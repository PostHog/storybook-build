(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[65559],{"../../frontend/src/lib/components/CompactList/CompactList.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>CompactList_CompactList_CompactList});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),CompactList=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/components/CompactList/CompactList.scss"),CompactList_default=__webpack_require__.n(CompactList),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(CompactList_default(),options),CompactList_default().locals;var clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonDivider=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonSkeleton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSkeleton/index.ts"),themeLogic=__webpack_require__("../../frontend/src/layout/navigation-3000/themeLogic.ts"),EmptyMessage=__webpack_require__("../../frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function CompactList_CompactList_CompactList(_ref){let{title,viewAllURL,loading,items,emptyMessage,renderRow,contentHeightBehavior="fixed"}=_ref,{theme}=(0,index_esm.useValues)(themeLogic.b);return(0,jsx_runtime.jsxs)("div",{className:"CompactList",style:theme?.boxStyle,children:[title&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"CompactList__header",children:[(0,jsx_runtime.jsx)("h3",{className:"px-2 truncate",title:"string"==typeof title?title:void 0,children:title}),viewAllURL&&(0,jsx_runtime.jsx)(LemonButton.J,{to:viewAllURL,children:"View all"})]}),(0,jsx_runtime.jsx)("div",{className:"mx-2",children:(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"})})]}),(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("CompactList__content","shrink"===contentHeightBehavior&&"max-h-[16rem] h-auto"),children:loading?(0,jsx_runtime.jsx)("div",{className:"p-2 deprecated-space-y-6",children:Array.from({length:6},(_,index)=>(0,jsx_runtime.jsx)(LemonSkeleton.y,{},index))}):0===items.length&&emptyMessage?(0,jsx_runtime.jsx)(EmptyMessage.M,{...emptyMessage}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:items.map((item,index)=>renderRow(item,index))})})]})}},"../../frontend/src/scenes/dashboard/NewDashboardModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>NewDashboardModal});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),LemonModal=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonModal/index.ts"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),dashboardTemplatesLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),newDashboardLogic=__webpack_require__("../../frontend/src/scenes/dashboard/newDashboardLogic.ts"),DashboardTemplateChooser=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),ActionFilter=__webpack_require__("../../frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),types=__webpack_require__("../../frontend/src/types.ts"),dashboardTemplateVariablesLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardTemplateVariablesLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DashboardTemplateVariables(){let{activeDashboardTemplate}=(0,index_esm.useValues)(newDashboardLogic.Z),theDashboardTemplateVariablesLogic=(0,dashboardTemplateVariablesLogic.y)({variables:activeDashboardTemplate?.variables||[]}),{variables}=(0,index_esm.useValues)(theDashboardTemplateVariablesLogic),{setVariable,setVariables}=(0,index_esm.useActions)(theDashboardTemplateVariablesLogic);return(0,react.useEffect)(()=>{setVariables(activeDashboardTemplate?.variables||[])},[activeDashboardTemplate]),(0,jsx_runtime.jsx)("div",{className:"mb-4 DashboardTemplateVariables max-w-192",children:variables.map((variable,index)=>(0,jsx_runtime.jsxs)("div",{className:"mb-6",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsx)(src.HQ,{showOptional:!variable.required,info:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:variable.description}),children:variable.name}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-secondary",children:variable.description})]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(ActionFilter.T,{filters:{insight:types.dw.TRENDS,events:[variable.default]},setFilters:filters=>{setVariable(variable.name,filters)},typeKey:"variable_"+variable.name,hideDeleteBtn:!0,hideRename:!0,hideDuplicate:!0,entitiesLimit:1})})]},index))})}function NewDashboardModal(){let builtLogic=(0,index_esm.useMountedLogic)(newDashboardLogic.Z),{hideNewDashboardModal,clearActiveDashboardTemplate,createDashboardFromTemplate}=(0,index_esm.useActions)(newDashboardLogic.Z),{newDashboardModalVisible,activeDashboardTemplate,variableSelectModalVisible}=(0,index_esm.useValues)(newDashboardLogic.Z),{variables}=(0,index_esm.useValues)(dashboardTemplateVariablesLogic.y),templatesLogic=(0,dashboardTemplatesLogic.R)({scope:builtLogic.props.featureFlagId?"feature_flag":"default"}),{templateFilter}=(0,index_esm.useValues)(templatesLogic),{setTemplateFilter}=(0,index_esm.useActions)(templatesLogic),_dashboardTemplateChooser=builtLogic.props.featureFlagId?(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{scope:"feature_flag"}):(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{});return(0,jsx_runtime.jsx)(LemonModal.f,{onClose:hideNewDashboardModal,isOpen:newDashboardModalVisible,title:activeDashboardTemplate?"Choose your events":"Create a dashboard","data-attr":"new-dashboard-chooser",description:activeDashboardTemplate?(0,jsx_runtime.jsxs)("p",{children:["The ",(0,jsx_runtime.jsx)("i",{children:activeDashboardTemplate.template_name})," template requires you to choose"," ",(0,utils.Zi)((activeDashboardTemplate.variables||[]).length,"event","events",!0),"."]}):(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("div",{children:"Choose a template or start with a blank slate"}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(src.DF,{type:"search",placeholder:"Filter templates",onChange:setTemplateFilter,value:templateFilter,fullWidth:!0})})]}),footer:activeDashboardTemplate?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[variableSelectModalVisible?(0,jsx_runtime.jsx)("div",{}):(0,jsx_runtime.jsx)(src.Jp,{onClick:clearActiveDashboardTemplate,type:"secondary",children:"Back"}),(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{activeDashboardTemplate&&createDashboardFromTemplate(activeDashboardTemplate,variables)},type:"primary",children:"Create"})]}):null,children:(0,jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:activeDashboardTemplate?(0,jsx_runtime.jsx)(DashboardTemplateVariables,{}):_dashboardTemplateChooser})})}},"../../frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>DashboardsTable,z:()=>DashboardsTableContainer});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/AccessControlledLemonButton.tsx"),lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/MemberSelect.tsx"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/constants.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonRow/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../frontend/src/lib/lemon-ui/Tooltip/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../frontend/src/lib/utils/eventUsageLogic.ts"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardLogic.tsx"),scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("../../frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx"),_types__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("../../frontend/src/types.ts"),_DashboardHeader__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardHeader.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DashboardsTableContainer(){let{dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.h),{dashboards,filters}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.dJ);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(DashboardsTable,{dashboards:dashboards,dashboardsLoading:dashboardsLoading,filters:filters})}function DashboardsTable(_ref){let{dashboards,dashboardsLoading,filters,extraActions,hideActions}=_ref,{unpinDashboard,pinDashboard}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.h),{setFilters,tableSortingChanged}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.dJ),{tableSorting,currentTab}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.dJ),{hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__.userLogic),{currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_21__.teamLogic),{showDuplicateDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_20__.T),{showDeleteDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_19__.r),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref2){let{id}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{size:"small",onClick:pinned?()=>unpinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList):()=>pinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList),tooltip:pinned?"Unpin dashboard":"Pin dashboard",icon:pinned?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPinFilled,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPin,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(_,_ref3){let{id,name,description,is_shared,effective_privilege_level}=_ref3,isPrimary=id===currentTeam?.primary_dashboard,canEditDashboard=effective_privilege_level>=lib_constants__WEBPACK_IMPORTED_MODULE_6__.kH.CanEdit;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_12__.i,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{"data-attr":"dashboard-name",children:name||"Untitled"}),is_shared&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__.u,{title:"This dashboard is shared publicly.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconShare,{className:"ml-1 text-base text-link"})}),!canEditDashboard&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__.u,{title:_DashboardHeader__WEBPACK_IMPORTED_MODULE_26__.o,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconLock,{className:"ml-1 text-base text-secondary"})}),isPrimary&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__.u,{title:"The primary dashboard is shown on the project home page.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconHome,{className:"ml-1 text-base text-warning"})})})]}),description:description})},sorter:_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.q},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_25__.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_5__.D,{tags:tags,staticOnly:!0}):null}}]:[],(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__.JB)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__.rw)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__.pD)("last_accessed_at","Last accessed at"),hideActions?{}:{width:0,render:function RenderActions(_,_ref4){let{id,name,user_access_level}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_8__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).actions.setDashboardMode(null,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList)},fullWidth:!0,children:"View"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_3__.o,{userAccessLevel:user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_25__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_25__.qR.Dashboard,to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).actions.setDashboardMode(_types__WEBPACK_IMPORTED_MODULE_25__.MN.Edit,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList)},fullWidth:!0,children:"Edit"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{onClick:()=>{showDuplicateDashboardModal(id,name)},fullWidth:!0,children:"Duplicate"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_9__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_10__.Q,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconHome,{className:"text-warning"}),fullWidth:!0,status:"warning",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("span",{className:"text-secondary",children:["Change the default dashboard",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("br",{}),"from the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_14__.r,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.projectHomepage(),children:"project home page"}),"."]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_9__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_3__.o,{userAccessLevel:user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_25__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_25__.qR.Dashboard,onClick:()=>{showDeleteDashboardModal(id)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.DF,{type:"search",placeholder:"Search for dashboards",onChange:x=>setFilters({search:x}),value:filters.search}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:"Filter to:"}),currentTab!==scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.NS.Pinned&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{active:filters.pinned,type:"secondary",size:"small",onClick:()=>setFilters({pinned:!filters.pinned}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPin,{}),children:"Pinned"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{active:filters.shared,type:"secondary",size:"small",onClick:()=>setFilters({shared:!filters.shared}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconShare,{}),children:"Shared"})})]}),currentTab!==scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.NS.Yours&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:"Created by:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_4__.a,{value:"All users"===filters.createdBy?null:filters.createdBy,onChange:user=>setFilters({createdBy:user?.uuid||"All users"})})]}),extraActions]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_11__.g,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:dashboards,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns:columns,loading:dashboardsLoading,defaultSorting:tableSorting,onSort:tableSortingChanged,emptyState:"No dashboards matching your filters!",nouns:["dashboard","dashboards"]})]})}},"../../frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{NS:()=>DashboardsTab,dJ:()=>dashboardsLogic});var fuse_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),lib_logic_scenes_tabAwareActionToUrl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareActionToUrl.ts"),lib_logic_scenes_tabAwareScene__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareScene.ts"),lib_logic_scenes_tabAwareUrlToAction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareUrlToAction.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/utils.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx");let DashboardsTab=function(DashboardsTab){return DashboardsTab.All="all",DashboardsTab.Yours="yours",DashboardsTab.Pinned="pinned",DashboardsTab.Templates="templates",DashboardsTab}({}),DEFAULT_SORTING={columnKey:"name",order:1},DEFAULT_FILTERS={search:"",createdBy:"All users",pinned:!1,shared:!1},dashboardsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","dashboard","dashboardsLogic"]),(0,lib_logic_scenes_tabAwareScene__WEBPACK_IMPORTED_MODULE_4__.P)(),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__.userLogic,["user"],lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_2__.featureFlagLogic,["featureFlags"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setCurrentTab:tab=>({tab}),setFilters:filters=>({filters}),tableSortingChanged:sorting=>({sorting})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({tableSorting:[DEFAULT_SORTING,{persist:!0},{tableSortingChanged:(_,_ref)=>{let{sorting}=_ref;return sorting||DEFAULT_SORTING}}],currentTab:[DashboardsTab.All,{setCurrentTab:(_,_ref2)=>{let{tab}=_ref2;return tab}}],filters:[DEFAULT_FILTERS,{setFilters:(state,_ref3)=>{let{filters}=_ref3;return(0,lib_utils__WEBPACK_IMPORTED_MODULE_6__.hO)({...state,...filters})}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({isFiltering:[s=>[s.filters],filters=>Object.keys(filters).some(key=>filters[key]!==DEFAULT_FILTERS[key])],dashboards:[s=>[_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_8__.h.selectors.nameSortedDashboards,s.filters,s.fuse,s.currentTab,s.user],(dashboards,filters,fuse,currentTab,user)=>{let haystack=dashboards;return filters.search&&(haystack=fuse.search(filters.search).map(result=>result.item)),currentTab===DashboardsTab.Pinned&&(haystack=haystack.filter(d=>d.pinned)),filters.shared&&(haystack=haystack.filter(d=>d.is_shared)),currentTab===DashboardsTab.Yours?haystack=haystack.filter(d=>d.created_by?.uuid===user?.uuid):"All users"!==filters.createdBy&&(haystack=haystack.filter(d=>d.created_by?.uuid===filters.createdBy)),haystack}],fuse:[()=>[_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_8__.h.selectors.nameSortedDashboards],dashboards=>new fuse_js__WEBPACK_IMPORTED_MODULE_9__.Z(dashboards,{keys:["key","name","description","tags"],threshold:.3})]}),(0,lib_logic_scenes_tabAwareActionToUrl__WEBPACK_IMPORTED_MODULE_3__.N)(_ref4=>{let{values}=_ref4;return{setCurrentTab:()=>{let tab=values.currentTab===DashboardsTab.All?void 0:values.currentTab;kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.searchParams.tab!==tab&&kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.push(kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.location.pathname,{...kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.searchParams,tab})}}}),(0,lib_logic_scenes_tabAwareUrlToAction__WEBPACK_IMPORTED_MODULE_5__.O)(_ref5=>{let{actions}=_ref5;return{"/dashboard":(_,searchParams)=>{let tab=searchParams.tab||DashboardsTab.All;actions.setCurrentTab(tab)}}})])},"../../frontend/src/scenes/feature-flags/FeatureFlag.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FeatureFlag:()=>FeatureFlag_FeatureFlag,createMaxToolSurveyConfig:()=>createMaxToolSurveyConfig,scene:()=>scene}),__webpack_require__("../../frontend/src/scenes/feature-flags/FeatureFlag.scss");var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.7_react@18.2.0_/node_modules/kea-forms/lib/index.js"),kea_router_lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),dist_module=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.262.0_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),esm=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.262.0_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/react/dist/esm/index.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),AccessControlAction=__webpack_require__("../../frontend/src/lib/components/AccessControlAction.tsx"),AccessControlledLemonButton=__webpack_require__("../../frontend/src/lib/components/AccessControlledLemonButton.tsx"),AccessDenied=__webpack_require__("../../frontend/src/lib/components/AccessDenied/index.tsx"),ActivityLog=__webpack_require__("../../frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),CopyToClipboard=__webpack_require__("../../frontend/src/lib/components/CopyToClipboard.tsx"),NotFound=__webpack_require__("../../frontend/src/lib/components/NotFound/index.tsx"),ObjectTags=__webpack_require__("../../frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),constants=__webpack_require__("../../frontend/src/lib/constants.tsx"),useFeatureFlag=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),LemonBanner=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),More=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonCheckbox=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonCheckbox/index.ts"),LemonDivider=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonField=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),LemonInput=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),LemonTabs=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),LemonTag=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),LemonTextArea=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTextArea/LemonTextArea.tsx"),Lettermark=__webpack_require__("../../frontend/src/lib/lemon-ui/Lettermark/index.ts"),Link=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),featureFlagLogic=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),product_intents=__webpack_require__("../../frontend/src/lib/utils/product-intents.ts"),AccessControlPopoutCTA=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/panels/access_control/AccessControlPopoutCTA.tsx"),types=__webpack_require__("../../frontend/src/types.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function FeatureFlagPermissions(_ref){let{featureFlag}=_ref;return featureFlag.id?(0,jsx_runtime.jsx)(AccessControlPopoutCTA._,{resourceType:types.qR.FeatureFlag}):(0,jsx_runtime.jsx)("p",{children:"Please save the feature flag before changing the access controls."})}var Dashboard=__webpack_require__("../../frontend/src/scenes/dashboard/Dashboard.tsx"),EmptyDashboardComponent=__webpack_require__("../../frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx"),dashboardLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardLogic.tsx"),FeatureFlagSnippets=__webpack_require__("../../frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx"),injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),JSONEditorInput=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/feature-flags/JSONEditorInput.scss"),JSONEditorInput_default=__webpack_require__.n(JSONEditorInput),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(JSONEditorInput_default(),options),JSONEditorInput_default().locals;var CodeEditor=__webpack_require__("../../frontend/src/lib/monaco/CodeEditor.tsx");function JSONEditorInput_JSONEditorInput(_ref){let{onChange,placeholder,lineHeight=20,defaultNumberOfLines=1,value="",readOnly=!1}=_ref,defaultHeight=lineHeight*(Math.max(defaultNumberOfLines,(value?.toString()||"").split(/\r\n|\r|\n/).length)+1),[height,setHeight]=(0,react.useState)(defaultHeight),[focused,setFocused]=(0,react.useState)(!1),updateHeight=val=>{val?setHeight(lineHeight*(Math.max(val.split(/\r\n|\r|\n/).length,defaultNumberOfLines)+1)):setHeight(lineHeight*(defaultNumberOfLines+1))};return(0,jsx_runtime.jsxs)("div",{className:"JsonEditorInput",onFocus:()=>setFocused(!0),onBlur:()=>setFocused(!1),children:[(0,jsx_runtime.jsx)(CodeEditor.p,{className:"border",language:"json",height:height,value:value?.toString(),options:{readOnly:readOnly,lineHeight:lineHeight,minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1},padding:{bottom:0,top:10},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,glyphMargin:!0,folding:!1,lineNumbers:"off",lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",cursorStyle:"line",scrollBeyondLastLine:!1,quickSuggestions:!1,contextmenu:!1},onChange:val=>{updateHeight(val),onChange?.(val)}}),!focused&&!value?.toString()&&placeholder&&(0,jsx_runtime.jsx)("div",{className:"placeholder",children:(0,jsx_runtime.jsx)("div",{className:"placeholderLabelContainer",children:placeholder})})]})}var insights_utils=__webpack_require__("../../frontend/src/scenes/insights/utils.tsx"),useMaxTool=__webpack_require__("../../frontend/src/scenes/max/useMaxTool.ts"),NotebookSelectButton=__webpack_require__("../../frontend/src/scenes/notebooks/NotebookSelectButton/NotebookSelectButton.tsx"),notebooks_types=__webpack_require__("../../frontend/src/scenes/notebooks/types.ts"),surveys_constants=__webpack_require__("../../frontend/src/scenes/surveys/constants.tsx"),surveys_utils=__webpack_require__("../../frontend/src/scenes/surveys/utils.ts"),teamLogic=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),scenes_urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),userLogic=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneSection.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),tagsModel=__webpack_require__("../../frontend/src/models/tagsModel.ts"),Query=__webpack_require__("../../frontend/src/queries/Query/Query.tsx"),DataTable_utils=__webpack_require__("../../frontend/src/queries/nodes/DataTable/utils.ts"),schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts"),DashboardTemplateChooser=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx"),NewDashboardModal=__webpack_require__("../../frontend/src/scenes/dashboard/NewDashboardModal.tsx"),DashboardsTable=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx"),dashboardsLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),newDashboardLogic=__webpack_require__("../../frontend/src/scenes/dashboard/newDashboardLogic.ts"),dashboardsModel=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx"),feature_flags_featureFlagLogic=__webpack_require__("../../frontend/src/scenes/feature-flags/featureFlagLogic.ts");function AnalysisTab(_ref){let{featureFlag}=_ref;return(0,jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:newDashboardLogic.Z,props:{featureFlagId:featureFlag.id},children:featureFlag.analytics_dashboards&&featureFlag.analytics_dashboards.length>0?(0,jsx_runtime.jsx)(FeatureFlagDashboardsTableContainer,{}):featureFlag.id&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{scope:"feature_flag"}),(0,jsx_runtime.jsx)(NewDashboardModal.O,{})]})})})}function FeatureFlagDashboardsTableContainer(){let{filteredDashboards}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{showNewDashboardModal}=(0,index_esm.useActions)(newDashboardLogic.Z),{dashboardsLoading}=(0,index_esm.useValues)(dashboardsModel.h),{filters}=(0,index_esm.useValues)(dashboardsLogic.dJ);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DashboardsTable.q,{extraActions:(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:showNewDashboardModal,children:"New dashboard"})}),hideActions:!0,dashboards:filteredDashboards,dashboardsLoading:dashboardsLoading,filters:filters}),(0,jsx_runtime.jsx)(NewDashboardModal.O,{})]})}var TaxonomicFilter_types=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),Spinner=__webpack_require__("../../frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),ActionFilter=__webpack_require__("../../frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),ActionFilterRow=__webpack_require__("../../frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function FeatureFlagAutoRollback(_ref){let{readOnly}=_ref,{featureFlag,sentryIntegrationEnabled,sentryErrorCount,insightRollingAverages}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{addRollbackCondition,removeRollbackCondition,loadInsightAtIndex}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{user}=(0,index_esm.useValues)(userLogic.userLogic);return featureFlag.rollback_conditions&&0!==featureFlag.rollback_conditions.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(SceneSection.S,{title:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-2",children:["Auto rollback",(0,jsx_runtime.jsx)(src.oe,{type:"warning",className:"uppercase",children:"Beta"})]}),description:!readOnly&&"Specify the conditions in which this feature flag will automatically roll back.",children:[readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map((rollback_condition,index)=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),"insight"===rollback_condition.threshold_type&&rollback_condition.threshold_metric?.events?.[0]?.name?(0,jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4 bg-surface-primary",children:[(0,jsx_runtime.jsx)("b",{children:`${(0,utils.fm)(rollback_condition.threshold_type)} based rollback`}),(0,jsx_runtime.jsx)(src.p2,{className:"my-3"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[insightRollingAverages[index]&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"  trailing average is ",insightRollingAverages[index],"."]})," Trigger when trailing average of  ",(0,jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"  is ",rollback_condition.operator&&utils.mG[rollback_condition.operator]," ",rollback_condition.threshold]})]}):(0,jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4 bg-surface-primary",children:[(0,jsx_runtime.jsx)("b",{children:`${(0,utils.fm)(rollback_condition.threshold_type)} based rollback`}),(0,jsx_runtime.jsx)(src.p2,{className:"my-3"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Trigger when there is a ",(0,jsx_runtime.jsxs)("b",{children:[rollback_condition.threshold,"%"]})," increase in errors"]})]})]})),!readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map((_,index)=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),(0,jsx_runtime.jsx)("div",{className:"mb-4 border rounded p-4 bg-surface-primary",children:(0,jsx_runtime.jsxs)(lib.Group,{name:["rollback_conditions",index],children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex",children:[(0,jsx_runtime.jsx)("div",{className:"mt-3 mr-3",children:(0,jsx_runtime.jsx)("b",{children:"Rollback Condition Type"})}),(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold_type",children:_ref2=>{let{value,onChange}=_ref2;return(0,jsx_runtime.jsx)(src.Yv,{value:value,onChange:onChange,options:[{value:types.SR.Sentry,label:"Error Based"},{value:types.SR.Insight,label:"Metric Based"}]})}})]}),(0,jsx_runtime.jsx)(src.Jp,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),noPadding:!0,onClick:()=>{removeRollbackCondition(index)}})]}),(0,jsx_runtime.jsx)(src.p2,{className:"my-3"}),"insight"==featureFlag.rollback_conditions[index].threshold_type?(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold_metric",children:_ref3=>{let{value,onChange}=_ref3;return(0,jsx_runtime.jsx)(ActionFilter.T,{filters:value,setFilters:payload=>{onChange({...payload}),loadInsightAtIndex(index,payload)},typeKey:"feature-flag-rollback-trends-"+index,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:ActionFilterRow.Qq.None,propertiesTaxonomicGroupTypes:[TaxonomicFilter_types.t.EventProperties,TaxonomicFilter_types.t.PersonProperties,TaxonomicFilter_types.t.EventFeatureFlags,TaxonomicFilter_types.t.Cohorts,TaxonomicFilter_types.t.Elements]})}}),(0,jsx_runtime.jsxs)("span",{children:["trailing 7 day average is ",void 0!==insightRollingAverages[index]?(0,jsx_runtime.jsx)("b",{children:insightRollingAverages[index]}):(0,jsx_runtime.jsx)(Spinner.$,{}),". Trigger when trailing average is"]}),(0,jsx_runtime.jsx)(LemonField.D,{name:"operator",children:_ref4=>{let{value,onChange}=_ref4;return(0,jsx_runtime.jsx)(src.Yv,{value:value,onChange:onChange,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold",children:(0,jsx_runtime.jsx)(src.DF,{min:0,type:"number"})})]}):sentryIntegrationEnabled?(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[sentryErrorCount?(0,jsx_runtime.jsxs)("span",{children:[(0,jsx_runtime.jsxs)("b",{children:[(0,utils.Lc)(sentryErrorCount)," "]})," Sentry errors in the past 24 hours."," "]}):(0,jsx_runtime.jsx)(Spinner.$,{}),(0,jsx_runtime.jsx)("span",{children:" Trigger when there is a"}),(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold",className:"ml-3 mr-3",children:_ref5=>{let{value,onChange}=_ref5;return(0,jsx_runtime.jsx)(src.DF,{value:value,suffix:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"%"}),type:"number",min:0,onChange:onChange})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"operator",className:"mr-3",children:_ref6=>{let{value,onChange}=_ref6;return(0,jsx_runtime.jsx)(src.Yv,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value:value,onChange:onChange})}}),(0,jsx_runtime.jsxs)("span",{children:["to"," ",sentryErrorCount?(0,jsx_runtime.jsx)("b",{children:(0,utils.Lc)(Math.round(sentryErrorCount*(1+(featureFlag.rollback_conditions[index].threshold||0)/100)))}):(0,jsx_runtime.jsx)(Spinner.$,{})," ","errors."]}),(0,jsx_runtime.jsx)("div",{})]})}):user?.is_staff?(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("b",{children:"This feature requires an active Sentry integration."}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(src.rU,{to:scenes_urls.j.instanceSettings(),children:"Go to Instance Settings"})," and update the ",(0,jsx_runtime.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):(0,jsx_runtime.jsx)("p",{className:"text-secondary",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]})),!readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.length>0&&(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",onClick:addRollbackCondition,children:"Add condition"})]})}):null}var FeatureFlagCodeExample=__webpack_require__("../../frontend/src/scenes/feature-flags/FeatureFlagCodeExample.tsx"),hooks_useOnMountEffect=__webpack_require__("../../frontend/src/lib/hooks/useOnMountEffect.ts"),LemonTable=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),LemonTableLink=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),columnUtils=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),cohortsModel=__webpack_require__("../../frontend/src/models/cohortsModel.ts"),groupsModel=__webpack_require__("../../frontend/src/models/groupsModel.ts"),organizationLogic=__webpack_require__("../../frontend/src/scenes/organizationLogic.tsx"),FeatureFlags=__webpack_require__("../../frontend/src/scenes/feature-flags/FeatureFlags.tsx");function checkHasStaticCohort(featureFlag,cohorts){let staticCohorts=new Set;for(let group of(cohorts.forEach(cohort=>{cohort.is_static&&staticCohorts.add(cohort.id)}),featureFlag.filters.groups))for(let prop of group.properties||[])if("cohort"===prop.type&&staticCohorts.has(prop.value))return!0;return!1}let getColumns=_ref=>{let{aggregationLabel,currentTeamId,currentOrganization}=_ref;return[{title:"Project",dataIndex:"team_id",width:"45%",render:(dataValue,record)=>{let team=currentOrganization?.teams?.find(t=>t.id===Number(dataValue));if(!team)return"(project does not exist)";let isCurrentTeam=team.id===currentTeamId,linkText=isCurrentTeam?`${team.name} (current)`:team.name;return(0,jsx_runtime.jsx)(LemonTableLink.i,{to:isCurrentTeam?void 0:scenes_urls.j.project(team.id,record.flag_id?scenes_urls.j.featureFlag(record.flag_id):""),title:linkText})}},(0,columnUtils.JB)(),(0,columnUtils.rw)(),{title:"Release conditions",width:200,render:function Render(_,record){let releaseText=(0,FeatureFlags.groupFilters)(record.filters,void 0,aggregationLabel);return"string"==typeof releaseText&&releaseText.startsWith("100% of")?(0,jsx_runtime.jsx)(src.oe,{type:"highlight",children:releaseText}):releaseText}},{title:"Status",dataIndex:"active",render:dataValue=>dataValue?(0,jsx_runtime.jsx)(src.oe,{type:"success",className:"uppercase",children:"Enabled"}):(0,jsx_runtime.jsx)(src.oe,{type:"default",className:"uppercase",children:"Disabled"})}]};function InfoBanner(){var _currentOrganization$;let text;let{currentOrganization}=(0,index_esm.useValues)(organizationLogic.organizationLogic),{featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),hasMultipleProjects=(null!==(_currentOrganization$=currentOrganization?.teams?.length)&&void 0!==_currentOrganization$?_currentOrganization$:0)>1;if(currentOrganization?.membership_level&&!(currentOrganization.membership_level<constants.Dk.Admin)||hasMultipleProjects){if(hasMultipleProjects){if(featureFlag.can_edit)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{});text="You don't have the necessary permissions to copy this flag to another project. Contact your administrator to request editing rights."}else text="This feature enables the copying of a feature flag across different projects. Once additional projects are added within your organization, you'll be able to replicate this flag to them."}else text="You currently have access to only one project. If your organization manages multiple projects and you wish to copy this feature flag across them, request project access from your administrator.";return(0,jsx_runtime.jsx)(src.Vp,{type:"info",className:"mb-4",children:text})}function FeatureFlagCopySection(){var _currentOrganization$2;let{featureFlag,copyDestinationProject,projectsWithCurrentFlag,featureFlagCopyLoading}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{setCopyDestinationProject,copyFlag}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{currentOrganization}=(0,index_esm.useValues)(organizationLogic.organizationLogic),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{allCohorts}=(0,index_esm.useValues)(cohortsModel.Qo),hasStaticCohort=checkHasStaticCohort(featureFlag,allCohorts.results);return(null!==(_currentOrganization$2=currentOrganization?.teams?.length)&&void 0!==_currentOrganization$2?_currentOrganization$2:0)>1&&featureFlag.can_edit?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Feature flag copy"}),(0,jsx_runtime.jsx)("div",{children:"Copy your flag and its configuration to another project."}),hasStaticCohort&&(0,jsx_runtime.jsx)(src.Vp,{type:"info",className:"mt-4",children:"The flag you are about to copy references a static cohort. If the cohort with identical name does not exist in the target project, it will be copied as an empty cohort. This is because the associated persons might not exist in the target project."}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex gap-4 my-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6",children:"Key"}),(0,jsx_runtime.jsx)("div",{className:"border px-3 rounded h-10 text-center flex items-center justify-center max-w-200",children:(0,jsx_runtime.jsx)("span",{className:"font-semibold truncate",children:featureFlag.key})})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"h-6"}),(0,jsx_runtime.jsx)(posthog_icons_es.IconArrowRight,{className:"h-10",fontSize:"30"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6",children:"Destination project"}),(0,jsx_runtime.jsx)(src.Yv,{dropdownMatchSelectWidth:!1,value:copyDestinationProject,onChange:id=>setCopyDestinationProject(id),options:currentOrganization?.teams?.map(team=>({value:team.id,label:team.name})).sort((a,b)=>a.label.localeCompare(b.label)).filter(option=>option.value!==currentTeam?.id)||[],className:"min-w-[10rem]"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"h-6"}),(0,jsx_runtime.jsx)(src.Jp,{disabledReason:!copyDestinationProject&&"Select destination project",loading:featureFlagCopyLoading,type:"primary",icon:(0,jsx_runtime.jsx)(icons.JK,{}),onClick:()=>copyFlag(),className:"w-28 max-w-28",children:projectsWithCurrentFlag.find(p=>Number(p.team_id)===copyDestinationProject)?"Update":"Copy"})]})]})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}function FeatureFlagProjects(){let{projectsWithCurrentFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{loadProjectsWithCurrentFlag}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{currentTeamId}=(0,index_esm.useValues)(teamLogic.teamLogic),{currentOrganization}=(0,index_esm.useValues)(organizationLogic.organizationLogic),{aggregationLabel}=(0,index_esm.useValues)(groupsModel.$);return(0,hooks_useOnMountEffect.x)(loadProjectsWithCurrentFlag),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(InfoBanner,{}),(0,jsx_runtime.jsx)(FeatureFlagCopySection,{}),(0,jsx_runtime.jsx)(LemonTable.g,{loading:!1,dataSource:projectsWithCurrentFlag,columns:getColumns({currentTeamId,currentOrganization,aggregationLabel}),emptyState:"This feature flag is not being used in any other project."})]})}var FeatureFlagReleaseConditions=__webpack_require__("../../frontend/src/scenes/feature-flags/FeatureFlagReleaseConditions.tsx"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts"),Tooltip=__webpack_require__("../../frontend/src/lib/lemon-ui/Tooltip/index.ts");function FeatureFlagSchedule(){let{featureFlag,scheduledChanges,scheduledChangeOperation,scheduleDateMarker,schedulePayload,schedulePayloadErrors}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{deleteScheduledChange,setScheduleDateMarker,setSchedulePayload,setScheduledChangeOperation,createScheduledChange}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{aggregationLabel}=(0,index_esm.useValues)(groupsModel.$),aggregationGroupTypeIndex=featureFlag.filters.aggregation_group_type_index,scheduleFilters={...schedulePayload.filters,aggregation_group_type_index:aggregationGroupTypeIndex},columns=[{title:"Change",dataIndex:"payload",render:function Render(_,scheduledChange){let{payload}=scheduledChange;if(payload.operation===types.fL.UpdateStatus){let isEnabled=payload.value;return(0,jsx_runtime.jsx)(src.oe,{type:isEnabled?"success":"default",className:"uppercase",children:isEnabled?"Enable":"Disable"})}if(payload.operation===types.fL.AddReleaseCondition){let releaseText=(0,FeatureFlags.groupFilters)(payload.value,void 0,aggregationLabel);return(0,jsx_runtime.jsxs)("div",{className:"inline-flex leading-8",children:[(0,jsx_runtime.jsx)("span",{className:"mr-2",children:(0,jsx_runtime.jsx)("b",{children:"Add release condition:"})}),"string"==typeof releaseText&&releaseText.startsWith("100% of")?(0,jsx_runtime.jsx)(src.oe,{type:"highlight",children:releaseText}):releaseText]})}return JSON.stringify(payload)}},(0,columnUtils.pD)("scheduled_at","Scheduled at"),(0,columnUtils.rw)(),(0,columnUtils.JB)(),{title:"Status",dataIndex:"executed_at",render:function Render(_,scheduledChange){let{executed_at,failure_reason}=scheduledChange,{type,text}=failure_reason?{type:"danger",text:"Error"}:executed_at?{type:"completion",text:"Complete"}:{type:"default",text:"Scheduled"};return(0,jsx_runtime.jsx)(Tooltip.u,{title:failure_reason?`Failed: ${failure_reason}`:executed_at&&`Completed: ${(0,dayjs.Bv)(executed_at).format("MMMM D, YYYY h:mm A")}`,children:(0,jsx_runtime.jsx)(src.oe,{type:type,children:(0,jsx_runtime.jsx)("b",{className:"uppercase",children:text})})})}},{width:0,render:function Render(_,scheduledChange){return!scheduledChange.executed_at&&featureFlag.can_edit&&(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsx)(src.Jp,{status:"danger",onClick:()=>deleteScheduledChange(scheduledChange.id),fullWidth:!0,children:"Delete scheduled change"})})}}];return(0,jsx_runtime.jsxs)("div",{children:[featureFlag.can_edit?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Add a scheduled change"}),(0,jsx_runtime.jsx)("div",{className:"mb-6",children:"Automatically change flag properties at a future point in time."}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex gap-10 mb-8",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6 mb-1",children:"Change type"}),(0,jsx_runtime.jsx)(src.Yv,{className:"w-50",placeholder:"Select variant",value:scheduledChangeOperation,onChange:value=>value&&setScheduledChangeOperation(value),options:[{label:"Change status",value:types.fL.UpdateStatus},{label:"Add a condition",value:types.fL.AddReleaseCondition}]})]}),(0,jsx_runtime.jsxs)("div",{className:"w-50",children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6 mb-1",children:"Date and time"}),(0,jsx_runtime.jsx)(src.he,{value:scheduleDateMarker,onChange:value=>setScheduleDateMarker(value),placeholder:"Select date",selectionPeriod:"upcoming",granularity:"minute"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"deprecated-space-y-4",children:[scheduledChangeOperation===types.fL.UpdateStatus&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("div",{className:"border rounded p-4",children:(0,jsx_runtime.jsx)(src.Hw,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:value=>{setSchedulePayload(null,value)},checked:schedulePayload.active})})}),scheduledChangeOperation===types.fL.AddReleaseCondition&&(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{id:`schedule-release-conditions-${featureFlag.id}`,filters:scheduleFilters,onChange:(value,errors)=>setSchedulePayload(value,null,errors),hideMatchOptions:!0}),(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-end",children:(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:createScheduledChange,disabledReason:scheduleDateMarker?(0,utils.bv)(schedulePayloadErrors)?"Fix release condition errors":void 0:"Select the scheduled date and time",children:"Schedule"})}),(0,jsx_runtime.jsx)(src.p2,{className:""})]})]}):(0,jsx_runtime.jsx)(src.Vp,{type:"info",className:"mb-2",children:"You don't have the necessary permissions to schedule changes to this flag. Contact your administrator to request editing rights."}),(0,jsx_runtime.jsx)(src.g3,{rowClassName:record=>record.executed_at?"opacity-75":"",className:"mt-4",loading:!1,dataSource:scheduledChanges,columns:columns,defaultSorting:{columnKey:"scheduled_at",order:1},emptyState:"You do not have any scheduled changes"})]})}var lemon_ui_LemonTag=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTag/index.ts");function FeatureFlagStatusIndicator(_ref){let{flagStatus}=_ref;return!flagStatus||[types.Bs.ACTIVE,types.Bs.INACTIVE,types.Bs.DELETED,types.Bs.UNKNOWN].includes(flagStatus.status)?null:(0,jsx_runtime.jsx)(Tooltip.u,{title:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"text-sm",children:flagStatus.reason}),(0,jsx_runtime.jsxs)("div",{className:"text-xs",children:[flagStatus.status===types.Bs.STALE&&"Make sure to remove any references to this flag in your code before deleting it.",flagStatus.status===types.Bs.INACTIVE&&"It is probably not being used in your code, but be sure to remove any references to this flag before deleting it."]})]}),placement:"right",children:(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsx)(lemon_ui_LemonTag.o,{type:"warning",className:"uppercase cursor-default",children:flagStatus.status})})})}var CompactList_CompactList=__webpack_require__("../../frontend/src/lib/components/CompactList/CompactList.tsx");__webpack_require__("../../frontend/src/scenes/project-homepage/ProjectHomepage.scss");var eventUsageLogic=__webpack_require__("../../frontend/src/lib/utils/eventUsageLogic.ts"),SavedInsights=__webpack_require__("../../frontend/src/scenes/saved-insights/SavedInsights.tsx"),ProjectHomePageCompactListItem=__webpack_require__("../../frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx");function InsightRow(_ref){let{insight}=_ref,{reportInsightOpenedFromRecentInsightList}=(0,index_esm.useActions)(eventUsageLogic.vx);return(0,jsx_runtime.jsx)(ProjectHomePageCompactListItem.x,{title:insight.name||insight.derived_name||"Insight",subtitle:`Last modified ${(0,dayjs.Bv)(insight.last_modified_at).fromNow()}`,prefix:(0,jsx_runtime.jsx)(SavedInsights.InsightIcon,{insight:insight}),to:scenes_urls.j.insightView(insight.short_id),onClick:()=>{reportInsightOpenedFromRecentInsightList()}})}function RecentFeatureFlagInsights(){let{relatedInsights,relatedInsightsLoading,featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{addProductIntentForCrossSell}=(0,index_esm.useActions)(teamLogic.teamLogic),query={kind:schema_general.OH.InsightVizNode,source:{kind:schema_general.OH.TrendsQuery,series:[{event:"$pageview",name:"$pageview",kind:schema_general.OH.EventsNode,math:types.vN.UniqueUsers}],breakdownFilter:{breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`}}};return(0,jsx_runtime.jsx)("div",{className:"max-w-prose",children:(0,jsx_runtime.jsx)(CompactList_CompactList.a,{loading:relatedInsightsLoading,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:scenes_urls.j.insightNew({query}),buttonOnClick:()=>{addProductIntentForCrossSell({from:types.Md.FEATURE_FLAGS,to:types.Md.PRODUCT_ANALYTICS,intent_context:product_intents.kp.FEATURE_FLAG_CREATE_INSIGHT})}},items:relatedInsights.slice(0,5),renderRow:(insight,index)=>(0,jsx_runtime.jsx)(InsightRow,{insight:insight},index),contentHeightBehavior:"shrink"})})}__webpack_require__("../../frontend/src/scenes/project-homepage/projectHomepageLogic.tsx");var featureFlagsLogic=__webpack_require__("../../frontend/src/scenes/feature-flags/featureFlagsLogic.ts");function createMaxToolSurveyConfig(featureFlag,user,multivariateEnabled,variants){return{identifier:"create_survey",active:!!user?.uuid,initialMaxPrompt:`Create a survey to collect feedback about the "${featureFlag.key}" feature flag${featureFlag.name?` (${featureFlag.name})`:""}${multivariateEnabled&&variants?.length>0?` which has variants: ${variants.map(v=>`"${v.key}"`).join(", ")}`:""}`,suggestions:multivariateEnabled&&variants?.length>0?[`Create a feedback survey comparing variants of the "${featureFlag.key}" feature flag`,`Create a survey for users who saw the "${variants[0]?.key}" variant of the "${featureFlag.key}" feature flag`,`Create an A/B test survey asking users to compare the "${featureFlag.key}" feature flag variants`,`Create a survey to understand which variant of the "${featureFlag.key}" feature flag performs better`,`Create a survey targeting all variants of the "${featureFlag.key}" feature flag to gather overall feedback`]:[`Create a feedback survey for users who see the "${featureFlag.key}" feature flag`,`Create an NPS survey for users exposed to the "${featureFlag.key}" feature flag`,`Create a satisfaction survey asking about the "${featureFlag.key}" feature flag experience`,`Create a survey to understand user reactions to the "${featureFlag.key}" feature flag`],context:{user_id:user?.uuid,feature_flag_key:featureFlag.key,feature_flag_id:featureFlag.id,feature_flag_name:featureFlag.name,target_feature_flag:featureFlag.key,survey_purpose:"collect_feedback_for_feature_flag",is_multivariate:multivariateEnabled,variants:multivariateEnabled&&variants?.length>0?variants.map(v=>({key:v.key,name:v.name||"",rollout_percentage:v.rollout_percentage})):[],variant_count:variants?.length||0},callback:toolOutput=>{if((0,product_intents.q)({product_type:types.Md.SURVEYS,intent_context:product_intents.kp.SURVEY_CREATED,metadata:{survey_id:toolOutput.survey_id,source:surveys_constants.o.FEATURE_FLAGS,created_successfully:!toolOutput?.error}}),toolOutput?.error||!toolOutput?.survey_id)return(0,surveys_utils.zY)(toolOutput.error,surveys_constants.o.FEATURE_FLAGS);kea_router_lib.router.actions.push(scenes_urls.j.survey(toolOutput.survey_id))}}}let scene={component:FeatureFlag_FeatureFlag,logic:feature_flags_featureFlagLogic.hk,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id:id&&"new"!==id?parseInt(id):"new"}},settingSectionId:"environment-feature-flags"};function focusVariantKeyField(index){setTimeout(()=>document.querySelector(`.VariantFormList input[data-key-index="${index}"]`)?.focus(),50)}function FeatureFlag_FeatureFlag(_ref2){let{id}=_ref2,{props,featureFlag,featureFlagLoading,featureFlagMissing,isEditingFlag,newCohortLoading,activeTab,accessDeniedToFeatureFlag,multivariateEnabled,variants}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{featureFlags}=(0,index_esm.useValues)(featureFlagLogic.featureFlagLogic),{deleteFeatureFlag,restoreFeatureFlag,editFeatureFlag,loadFeatureFlag,saveFeatureFlag,createStaticCohort,setFeatureFlagFilters,setActiveTab}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{earlyAccessFeaturesList}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{tags}=(0,index_esm.useValues)(tagsModel.x),{hasAvailableFeature,user}=(0,index_esm.useValues)(userLogic.userLogic),[hasKeyChanged,setHasKeyChanged]=(0,react.useState)(!1),{openMax}=(0,useMaxTool.$)(createMaxToolSurveyConfig(featureFlag,user,multivariateEnabled,variants)),[advancedSettingsExpanded,setAdvancedSettingsExpanded]=(0,react.useState)(!1),isNewFeatureFlag="new"===id||void 0===id,newSceneLayout=(0,useFeatureFlag.y)("NEW_SCENE_LAYOUT");if(featureFlagMissing)return(0,jsx_runtime.jsx)(NotFound.T,{object:"feature flag"});if(featureFlagLoading)return(0,jsx_runtime.jsxs)("div",{className:"deprecated-space-y-2",children:[(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-2/5"}),(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-full"}),(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-full"}),(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-3/5"})]});if(accessDeniedToFeatureFlag)return(0,jsx_runtime.jsx)(AccessDenied.J,{object:"feature flag"});let earlyAccessFeature=earlyAccessFeaturesList?.find(f=>f.flagKey===featureFlag.key),tabs=[{label:"Overview",key:featureFlagsLogic.id.OVERVIEW,content:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,jsx_runtime.jsx)(FeatureFlagRollout,{readOnly:!0}),!featureFlag.is_remote_configuration&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneDivider.V,{}),featureFlag.filters.super_groups&&featureFlag.filters.super_groups.length>0&&(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{readOnly:!0,isSuper:!0,filters:featureFlag.filters}),(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{readOnly:!0,filters:featureFlag.filters}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Insights that use this feature flag",children:(0,jsx_runtime.jsx)(RecentFeatureFlagInsights,{})}),featureFlags[constants.y8.AUTO_ROLLBACK_FEATURE_FLAGS]&&(0,jsx_runtime.jsx)(FeatureFlagAutoRollback,{readOnly:!0})]}),newSceneLayout?(0,jsx_runtime.jsx)(SceneDivider.V,{}):(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"}),(0,jsx_runtime.jsx)(FeatureFlagCodeExample.H,{featureFlag:featureFlag})]})})}];return featureFlag.key&&id&&(tabs.push({label:"Usage",key:featureFlagsLogic.id.USAGE,content:(0,jsx_runtime.jsx)(UsageTab,{featureFlag:featureFlag})}),tabs.push({label:"Projects",key:featureFlagsLogic.id.PROJECTS,content:(0,jsx_runtime.jsx)(FeatureFlagProjects,{})}),tabs.push({label:"Schedule",key:featureFlagsLogic.id.SCHEDULE,content:(0,jsx_runtime.jsx)(FeatureFlagSchedule,{})})),featureFlags[constants.y8.FF_DASHBOARD_TEMPLATES]&&featureFlag.key&&id&&tabs.push({label:(0,jsx_runtime.jsxs)("div",{className:"flex flex-row",children:[(0,jsx_runtime.jsx)("div",{children:"Analysis"}),(0,jsx_runtime.jsxs)(LemonTag.o,{className:"ml-1 float-right uppercase",type:"warning",children:[" ","Beta"]})]}),key:featureFlagsLogic.id.Analysis,content:(0,jsx_runtime.jsx)(esm.EO,{flag:constants.y8.FF_DASHBOARD_TEMPLATES,match:!0,children:(0,jsx_runtime.jsx)(AnalysisTab,{featureFlag:featureFlag})})}),featureFlag.id&&tabs.push({label:"History",key:featureFlagsLogic.id.HISTORY,content:(0,jsx_runtime.jsx)(ActivityLog.DA,{scope:types.jc.FEATURE_FLAG,id:featureFlag.id})}),featureFlag.can_edit&&tabs.push({label:"Permissions",key:featureFlagsLogic.id.PERMISSIONS,content:(0,jsx_runtime.jsx)(FeatureFlagPermissions,{featureFlag:featureFlag})}),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("div",{className:"feature-flag",children:isNewFeatureFlag||isEditingFlag?(0,jsx_runtime.jsxs)(lib.Form,{id:"feature-flag",logic:feature_flags_featureFlagLogic.hk,props:props,formKey:"featureFlag",enableFormOnSubmit:!0,className:"deprecated-space-y-4",children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(scenes_urls.j.featureFlags())},children:"Cancel"}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",form:"feature-flag",children:"Save"})]})}),(0,jsx_runtime.jsxs)(SceneContent._,{forceNewSpacing:!0,children:[featureFlag.experiment_set&&featureFlag.experiment_set.length>0&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"warning",children:["This feature flag is linked to an experiment. Edit settings here only for advanced functionality. If unsure, go back to"," ",(0,jsx_runtime.jsx)(Link.r,{to:scenes_urls.j.experiment(featureFlag.experiment_set[0]),children:"the experiment creation screen."})]}),(0,jsx_runtime.jsxs)("div",{className:"max-w-1/2 deprecated-space-y-4",children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"key",label:"Key",help:hasKeyChanged&&"new"!==id?(0,jsx_runtime.jsxs)("span",{className:"text-warning",children:[(0,jsx_runtime.jsx)("b",{children:"Warning! "}),"Changing this key will",(0,jsx_runtime.jsxs)(Link.r,{to:`https://posthog.com/docs/feature-flags${FeatureFlagSnippets.X_}#feature-flag-persistence`,target:"_blank",targetBlankIcon:!0,children:[" ","affect the persistence of your flag"]})]}):void 0,children:_ref3=>{let{value,onChange}=_ref3;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonInput.D,{value:value,onChange:v=>{v!==value&&setHasKeyChanged(!0),onChange(v)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),(0,jsx_runtime.jsx)("span",{className:"text-secondary text-sm",children:"Feature flag keys must be unique"})]})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"name",label:"Description",children:(0,jsx_runtime.jsx)(LemonTextArea._,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:featureFlag.name||""})}),hasAvailableFeature(types.P$.TAGGING)&&(0,jsx_runtime.jsx)(LemonField.D,{name:"tags",label:"Tags",children:_ref4=>{let{value,onChange}=_ref4;return(0,jsx_runtime.jsx)(ObjectTags.D,{saving:featureFlagLoading,tags:value,onChange:tags=>onChange(tags),tagsAvailable:tags.filter(tag=>!featureFlag.tags?.includes(tag)),className:"mt-2"})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"active",children:_ref5=>{let{value,onChange}=_ref5;return(0,jsx_runtime.jsx)("div",{className:"border rounded p-4",children:(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:()=>onChange(!value),checked:value,"data-attr":"feature-flag-enabled-checkbox"})})}}),!featureFlag.is_remote_configuration&&(0,jsx_runtime.jsx)(LemonField.D,{name:"ensure_experience_continuity",children:_ref6=>{let{value,onChange}=_ref6;return(0,jsx_runtime.jsxs)("div",{className:"border rounded p-4",children:[(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:()=>onChange(!value),fullWidth:!0,checked:value}),(0,jsx_runtime.jsxs)("div",{className:"text-secondary text-sm pl-7",children:["If your feature flag is applied before identifying the user, use this to ensure that the flag value remains consistent for the same user. Depending on your setup, this option might not always be suitable. This feature requires creating profiles for anonymous users."," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/feature-flags/creating-feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:"Learn more"})]})]})}})]}),newSceneLayout?(0,jsx_runtime.jsx)(SceneDivider.V,{}):(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-2"}),(0,jsx_runtime.jsx)(FeatureFlagRollout,{}),newSceneLayout?(0,jsx_runtime.jsx)(SceneDivider.V,{}):(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-2"}),!featureFlag.is_remote_configuration&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{id:`${featureFlag.id}`,filters:featureFlag.filters,onChange:setFeatureFlagFilters}),newSceneLayout?(0,jsx_runtime.jsx)(SceneDivider.V,{}):(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-2"})]}),(0,jsx_runtime.jsx)(FeatureFlagCodeExample.H,{featureFlag:featureFlag}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),isNewFeatureFlag&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(LemonButton.J,{fullWidth:!0,onClick:()=>setAdvancedSettingsExpanded(!advancedSettingsExpanded),sideIcon:advancedSettingsExpanded?(0,jsx_runtime.jsx)(posthog_icons_es.IconCollapse,{}):(0,jsx_runtime.jsx)(posthog_icons_es.IconExpand,{}),children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"l4 mt-2",children:"Advanced settings"}),(0,jsx_runtime.jsx)("div",{className:"text-secondary mb-2 font-medium",children:"Define who can modify this flag."})]})})}),advancedSettingsExpanded&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlags[constants.y8.AUTO_ROLLBACK_FEATURE_FLAGS]&&(0,jsx_runtime.jsx)(FeatureFlagAutoRollback,{}),(0,jsx_runtime.jsxs)("div",{className:"border rounded bg-surface-primary",children:[(0,jsx_runtime.jsx)("h3",{className:"p-2 mb-0",children:"Permissions"}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"}),(0,jsx_runtime.jsx)("div",{className:"p-3",children:(0,jsx_runtime.jsx)(FeatureFlagPermissions,{featureFlag:featureFlag})})]})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(scenes_urls.j.featureFlags())},children:"Cancel"}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",form:"feature-flag",children:"Save"})]})]})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{notebookProps:{href:scenes_urls.j.featureFlag(id)},caption:!newSceneLayout&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex deprecated-space-x-1",children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-secondary",children:"Key:"})," ",(0,jsx_runtime.jsx)(CopyToClipboard.D,{tooltipMessage:null,description:"Feature flag key",className:"justify-end",children:featureFlag.key})]})}),(0,jsx_runtime.jsx)("div",{children:featureFlag?.tags&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlag.tags.length>0?(0,jsx_runtime.jsx)("span",{className:"text-secondary",children:"Tags:"}):null," ",featureFlag.can_edit?(0,jsx_runtime.jsx)(ObjectTags.D,{tags:featureFlag.tags,onChange:tags=>{saveFeatureFlag({tags})},tagsAvailable:tags.filter(tag=>!featureFlag.tags?.includes(tag))}):featureFlag.tags.length>0?(0,jsx_runtime.jsx)(ObjectTags.D,{tags:featureFlag.tags,staticOnly:!0}):null]})})]}),(0,jsx_runtime.jsx)("div",{className:"mt-2",children:featureFlag.name||(0,jsx_runtime.jsx)("i",{children:"Description (optional)"})})]}),buttons:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(More.T,{loading:newCohortLoading,overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlags[constants.y8.FEATURE_FLAG_COHORT_CREATION]&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonButton.J,{loading:newCohortLoading,onClick:()=>{createStaticCohort()},fullWidth:!0,children:"Create Cohort"}),(0,jsx_runtime.jsx)(LemonDivider.p,{})]}),(0,jsx_runtime.jsx)(LemonButton.J,{to:scenes_urls.j.featureFlagDuplicate(featureFlag.id),fullWidth:!0,children:(0,jsx_runtime.jsx)("span",{children:"Duplicate feature flag"})}),openMax&&(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"create-survey",fullWidth:!0,onClick:openMax,children:"Create survey"}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsxs)(AccessControlledLemonButton.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:types.W$.Editor,resourceType:types.qR.FeatureFlag,"data-attr":featureFlag.deleted?"restore-feature-flag":"delete-feature-flag",status:"danger",fullWidth:!0,onClick:()=>{featureFlag.deleted?restoreFeatureFlag(featureFlag):deleteFeatureFlag(featureFlag)},disabledReason:featureFlag.can_edit?(featureFlag.features?.length||0)>0?"This feature flag is in use with an early access feature. Delete the early access feature to delete this flag":(featureFlag.experiment_set?.length||0)>0?"This feature flag is linked to an experiment. Delete the experiment to delete this flag":(featureFlag.surveys?.length||0)>0?"This feature flag is linked to a survey. Delete the survey to delete this flag":null:"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",children:[featureFlag.deleted?"Restore":"Delete"," feature flag"]})]})}),(0,jsx_runtime.jsx)(LemonDivider.p,{vertical:!0}),(0,jsx_runtime.jsx)(NotebookSelectButton.R,{resource:{type:notebooks_types.C.FeatureFlag,attrs:{id:featureFlag.id}},type:"secondary"}),(0,jsx_runtime.jsx)(AccessControlledLemonButton.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:types.W$.Editor,resourceType:types.qR.FeatureFlag,"data-attr":"edit-feature-flag",type:"secondary",disabledReason:featureFlag.can_edit?featureFlag.deleted?"This feature flag has been deleted. Restore it to edit.":null:"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",onClick:()=>{editFeatureFlag(!0)},children:"Edit"})]})})}),(0,jsx_runtime.jsxs)(SceneContent._,{forceNewSpacing:!0,children:[earlyAccessFeature&&earlyAccessFeature.stage===types.nE.Concept&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",children:["This feature flag is assigned to an early access feature in the"," ",(0,jsx_runtime.jsx)(LemonTag.o,{type:"default",className:"uppercase",children:"Concept"})," ","stage. All users who register interest will be assigned this feature flag. Gate your code behind a different feature flag if you'd like to keep it hidden, and then switch your code to this feature flag when you're ready to release to your early access users."]}),(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:featureFlag.key,description:featureFlag.name,resourceType:{type:"feature_flag"}}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:activeTab,onChange:tab=>tab!==activeTab&&setActiveTab(tab),tabs:tabs,sceneInset:newSceneLayout})]})]})})})}function UsageTab(_ref7){let{featureFlag}=_ref7,{key:featureFlagKey,usage_dashboard:dashboardId,has_enriched_analytics:hasEnrichedAnalytics}=featureFlag,{generateUsageDashboard,enrichUsageDashboard}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{featureFlagLoading}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),dashboard=null;dashboardId&&(dashboard=(0,index_esm.useValues)((0,dashboardLogic.BM)({id:dashboardId,placement:types.F4.FeatureFlag})).dashboard);let{closeEnrichAnalyticsNotice}=(0,index_esm.useActions)(featureFlagsLogic.bP),{enrichAnalyticsNoticeAcknowledged}=(0,index_esm.useValues)(featureFlagsLogic.bP);(0,react.useEffect)(()=>{dashboard&&hasEnrichedAnalytics&&dashboard.tiles?.find(tile=>{var _tile$insight$name$in;return(null!==(_tile$insight$name$in=tile.insight?.name?.indexOf("Feature Viewed"))&&void 0!==_tile$insight$name$in?_tile$insight$name$in:-1)>-1})===void 0&&enrichUsageDashboard()},[dashboard,hasEnrichedAnalytics,enrichUsageDashboard]);let propertyFilter=[{key:"$feature_flag",type:types.FT.Event,value:featureFlagKey,operator:types.WV.Exact}];return featureFlag.deleted?(0,jsx_runtime.jsx)("div",{"data-attr":"feature-flag-usage-deleted-banner",children:(0,jsx_runtime.jsx)(LemonBanner.V,{type:"error",children:"This feature flag has been deleted."})}):(0,jsx_runtime.jsxs)("div",{"data-attr":"feature-flag-usage-container",children:[dashboard?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hasEnrichedAnalytics&&!enrichAnalyticsNoticeAcknowledged&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",className:"mb-3",onClose:()=>closeEnrichAnalyticsNotice(),children:["Get richer insights automatically by"," ",(0,jsx_runtime.jsxs)(Link.r,{to:"https://posthog.com/docs/libraries/js/features#enriched-flag-analytics",target:"_blank",children:["enabling enriched analytics for flags"," "]})]}),(0,jsx_runtime.jsx)(Dashboard.Dashboard,{id:dashboardId.toString(),placement:types.F4.FeatureFlag})]}):(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("b",{children:"Dashboard"}),(0,jsx_runtime.jsx)("div",{className:"text-secondary mb-2",children:"There is currently no connected dashboard to this feature flag. If there was previously a connected dashboard, it may have been deleted."}),featureFlagLoading?(0,jsx_runtime.jsx)(EmptyDashboardComponent.l,{loading:!0,canEdit:!1}):(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary",onClick:()=>generateUsageDashboard(),children:"Generate Usage Dashboard"})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-4 mb-4",children:[(0,jsx_runtime.jsx)("b",{children:"Log"}),(0,jsx_runtime.jsx)("div",{className:"text-secondary",children:`Feature flag calls for "${featureFlagKey}" will appear here`})]}),(0,jsx_runtime.jsx)(Query.A,{query:{kind:schema_general.OH.DataTableNode,source:{kind:schema_general.OH.EventsQuery,select:[...(0,DataTable_utils.Qi)(schema_general.OH.EventsQuery),"properties.$feature_flag_response"],event:"$feature_flag_called",properties:propertyFilter,after:"-30d"},full:!1,showDateRange:!0}})]})}function variantConcatWithPunctuation(phrases){return null===phrases||phrases.length<3?(0,insights_utils.EL)(phrases):`${phrases[0]} and ${phrases.length-1} more sets`}function FeatureFlagRollout(_ref8){let{readOnly}=_ref8,{multivariateEnabled,variants,areVariantRolloutsValid,variantRolloutSum,nonEmptyVariants,aggregationTargetName,featureFlag,recordingFilterForFlag,flagStatus,flagType,flagTypeString,hasEncryptedPayloadBeenSaved,hasExperiment,isDraftExperiment}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{featureFlags}=(0,index_esm.useValues)(featureFlagLogic.featureFlagLogic),{distributeVariantsEqually,addVariant,removeVariant,setMultivariateEnabled,setFeatureFlag,saveFeatureFlag,setRemoteConfigEnabled,resetEncryptedPayload}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{addProductIntentForCrossSell}=(0,index_esm.useActions)(teamLogic.teamLogic),filterGroups=featureFlag.filters.groups||[],newSceneLayout=(0,useFeatureFlag.y)("NEW_SCENE_LAYOUT"),confirmRevertMultivariateEnabled=()=>{src.dn.open({title:"Change value type?",description:"The existing variants will be lost",primaryButton:{children:"Confirm",type:"primary",onClick:()=>setMultivariateEnabled(!1),size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},confirmEncryptedPayloadReset=()=>{src.dn.open({title:"Reset payload?",description:"The existing payload will not be reset until the feature flag is saved.",primaryButton:{children:"Reset",onClick:resetEncryptedPayload,size:"small",status:"danger"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},reportViewRecordingsClicked=variantKey=>{let properties={multivariate:multivariateEnabled.toString()};variantKey&&(properties.variant_key=variantKey),dist_module.ZP.capture("viewed recordings from feature flag",properties)},canEditVariant=index=>(!hasExperiment||!!isDraftExperiment)&&(!hasExperiment||!isDraftExperiment||0!==index);return(0,jsx_runtime.jsxs)(SceneContent._,{forceNewSpacing:!0,children:[readOnly?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-8",children:[(0,jsx_runtime.jsx)("div",{className:"col-span-2 card-secondary",children:"Status"}),(0,jsx_runtime.jsx)("div",{className:"col-span-6 card-secondary",children:"Type"}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:featureFlag.deleted?(0,jsx_runtime.jsx)(LemonTag.o,{size:"medium",type:"danger",className:"uppercase",children:"Deleted"}):(0,jsx_runtime.jsx)("div",{className:"flex gap-2",children:(0,jsx_runtime.jsx)(AccessControlAction.bW,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:types.W$.Editor,resourceType:types.qR.FeatureFlag,children:_ref9=>{let{disabledReason:accessControlDisabledReason}=_ref9;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.f4,{onChange:newValue=>{src.dn.open({title:`${!0===newValue?"Enable":"Disable"} this flag?`,description:`This flag will be immediately ${!0===newValue?"rolled out to":"rolled back from"} the users matching the release conditions.`,primaryButton:{children:"Confirm",type:"primary",onClick:()=>{let updatedFlag={...featureFlag,active:newValue};setFeatureFlag(updatedFlag),saveFeatureFlag(updatedFlag)},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},label:featureFlag.active?"Enabled":"Disabled",disabledReason:accessControlDisabledReason||(featureFlag.can_edit?null:"You only have view access to this feature flag. To make changes, contact the flag's creator."),checked:featureFlag.active}),!featureFlag.is_remote_configuration&&(0,jsx_runtime.jsx)(FeatureFlagStatusIndicator,{flagStatus:flagStatus})]})}})})}),(0,jsx_runtime.jsx)("div",{className:"col-span-6",children:(0,jsx_runtime.jsx)("span",{className:"mt-1",children:flagTypeString})})]}),(0,jsx_runtime.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),(0,jsx_runtime.jsxs)("span",{children:["This flag"," ",(0,jsx_runtime.jsxs)("b",{children:[featureFlag.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]}),featureFlags[constants.y8.FLAG_EVALUATION_RUNTIMES]&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"card-secondary mt-4",children:"Evaluation runtime"}),(0,jsx_runtime.jsx)("div",{className:"mt-2",children:(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:featureFlag.evaluation_runtime===types.GM.ALL?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconGlobe,{className:"text-lg text-muted"}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:"Both client and server"}),(0,jsx_runtime.jsx)(LemonTag.o,{type:"primary",size:"small",children:"Single + multi-user"})]}):featureFlag.evaluation_runtime===types.GM.CLIENT?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconLaptop,{className:"text-lg text-muted"}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:"Client-side only"}),(0,jsx_runtime.jsx)(LemonTag.o,{type:"completion",size:"small",children:"Single-user apps"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconServer,{className:"text-lg text-muted"}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:"Server-side only"}),(0,jsx_runtime.jsx)(LemonTag.o,{type:"caution",size:"small",children:"Multi-user systems"})]})})})]})]}),newSceneLayout?(0,jsx_runtime.jsx)(SceneDivider.V,{}):(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"}),featureFlag.filters.multivariate&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(SceneSection.S,{title:"Variant keys",children:(0,jsx_runtime.jsxs)("div",{className:"border rounded p-4 bg-surface-primary",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-10 gap-4 font-semibold",children:[(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:"Key"}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:"Description"}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:"Payload"}),(0,jsx_runtime.jsx)("div",{children:"Rollout"})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"}),variants.map((variant,index)=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-10 gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"col-span-2",children:[(0,jsx_runtime.jsx)(Lettermark.B,{name:utils.bH[index],color:Lettermark.w.Gray}),(0,jsx_runtime.jsx)(CopyToClipboard.D,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--color-text-secondary)"},children:variant.key})]}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:(0,jsx_runtime.jsx)("span",{className:variant.name?"":"text-muted",children:variant.name||"There is no description for this variant key"})}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:featureFlag.filters.payloads?.[index]?(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:!0,value:featureFlag.filters.payloads[index]}):(0,jsx_runtime.jsx)("span",{className:"text-secondary",children:"No payload associated with this variant"})}),(0,jsx_runtime.jsxs)("div",{children:[variant.rollout_percentage,"%"]}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:(0,jsx_runtime.jsx)(LemonButton.J,{size:"xsmall",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconRewindPlay,{}),type:"secondary",onClick:()=>{reportViewRecordingsClicked(variant.key),kea_router_lib.router.actions.push(scenes_urls.j.replay(types.yd.Home,(0,feature_flags_featureFlagLogic.qG)(featureFlag.key,variant.key,featureFlag.has_enriched_analytics))),addProductIntentForCrossSell({from:types.Md.FEATURE_FLAGS,to:types.Md.SESSION_REPLAY,intent_context:product_intents.kp.FEATURE_FLAG_VIEW_RECORDINGS})},children:"View recordings"})})]}),index!==variants.length-1&&(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"})]},index))]})})})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlags[constants.y8.FLAG_EVALUATION_RUNTIMES]&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneSection.S,{title:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-2",children:["Evaluation runtime",(0,jsx_runtime.jsx)(src.u,{title:"This setting controls where your feature flag can be evaluated. If you try to use a flag in a runtime where it's not allowed (e.g., using a server-only flag in client-side code), it won't evaluate.",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{className:"text-secondary text-lg"})})]}),children:(0,jsx_runtime.jsx)(LemonField.D,{name:"evaluation_runtime",children:_ref10=>{let{value,onChange}=_ref10;return(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[{value:types.GM.ALL,icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconGlobe,{}),title:"Both client and server",description:"Single-user apps + multi-user systems"},{value:types.GM.CLIENT,icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconLaptop,{}),title:"Client-side only",description:"Single-user apps (mobile, desktop, embedded)"},{value:types.GM.SERVER,icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconServer,{}),title:"Server-side only",description:"Multi-user systems in trusted environments"}].map(option=>(0,jsx_runtime.jsx)("div",{className:`border rounded-lg p-4 cursor-pointer transition-all hover:border-primary-light ${value===option.value?"border-primary bg-primary-highlight":"border-border"}`,onClick:()=>onChange(option.value),children:(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-3",children:[(0,jsx_runtime.jsx)("div",{className:"text-lg text-muted",children:option.icon}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"font-medium text-sm",children:option.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted mt-1",children:option.description})]}),(0,jsx_runtime.jsx)("input",{type:"radio",name:"evaluation-environment",checked:value===option.value,onChange:()=>onChange(option.value),className:"cursor-pointer"})]})},option.value))})}})}),(0,jsx_runtime.jsx)(SceneDivider.V,{})]}),(0,jsx_runtime.jsxs)(SceneSection.S,{title:"Served value",children:[(0,jsx_runtime.jsx)("div",{"data-attr":"feature-flag-served-value-segmented-button",children:(0,jsx_runtime.jsx)(src.P4,{size:"small",options:[{label:"Release toggle (boolean)",value:"boolean",disabledReason:hasExperiment?"This feature flag is associated with an experiment.":void 0},{label:(0,jsx_runtime.jsx)("span",{children:"Multiple variants with rollout percentages (A/B/n test)"}),value:"multivariate"},{label:(0,jsx_runtime.jsx)("span",{children:"Remote config (single payload)"}),value:"remote_config",disabledReason:hasExperiment?"This feature flag is associated with an experiment.":void 0}],onChange:value=>{["boolean","remote_config"].includes(value)&&nonEmptyVariants.length?confirmRevertMultivariateEnabled():(setMultivariateEnabled("multivariate"===value),setRemoteConfigEnabled("remote_config"===value),focusVariantKeyField(0))},value:flagType})}),(0,jsx_runtime.jsx)("div",{className:"text-secondary",children:featureFlag.is_remote_configuration?(0,jsx_runtime.jsxs)("span",{children:["Remote config flags provide runtime configuration values in your app. Read more in the"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/feature-flags/remote-config",children:"remote config flags documentation"}),"."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,utils.fm)(aggregationTargetName)," will be served"," ",multivariateEnabled?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)("code",{children:"true"})})," ",(0,jsx_runtime.jsx)("span",{children:"if they match one or more release condition groups."})]})})]}),!multivariateEnabled&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Payload",children:readOnly?featureFlag.filters.payloads?.true?(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,value:featureFlag.filters.payloads?.true}):(0,jsx_runtime.jsx)("span",{className:"text-secondary",children:"No payload associated with this flag"}):(0,jsx_runtime.jsxs)("div",{className:"w-1/2",children:[(0,jsx_runtime.jsx)("div",{className:"text-secondary mb-4",children:featureFlag.is_remote_configuration?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Specify a valid JSON payload to be returned for the config flag. Read more in the"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/feature-flags/creating-feature-flags#payloads",children:"payload documentation"}),"."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Optionally specify a valid JSON payload to be returned when the served value is"," ",(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)("code",{children:"true"})}),". Read more in the"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/feature-flags/creating-feature-flags#payloads",children:"payload documentation"}),"."]})}),featureFlag.is_remote_configuration&&(0,jsx_runtime.jsx)(LemonField.D,{name:"has_encrypted_payloads",children:_ref11=>{let{value,onChange}=_ref11;return(0,jsx_runtime.jsx)("div",{className:"border rounded mb-4 p-4",children:(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"flag-payload-encrypted-checkbox",label:"Encrypt remote configuration payload",onChange:()=>onChange(!value),checked:value,"data-attr":"feature-flag-payload-encrypted-checkbox",disabledReason:hasEncryptedPayloadBeenSaved&&"An encrypted payload has already been saved for this flag. Reset the payload or create a new flag to create an unencrypted configuration payload."})})}}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(lib.Group,{name:["filters","payloads"],children:(0,jsx_runtime.jsx)(LemonField.D,{name:"true",className:"grow",children:(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly||featureFlag.has_encrypted_payloads&&!!featureFlag.filters?.payloads?.true,placeholder:'Examples: "A string", 2500, {"key": "value"}'})})}),featureFlag.has_encrypted_payloads&&(0,jsx_runtime.jsx)(LemonButton.J,{className:"grow-0",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),type:"secondary",size:"small",status:"danger",onClick:confirmEncryptedPayloadReset,children:"Reset"})]}),featureFlag.is_remote_configuration&&(0,jsx_runtime.jsxs)("div",{className:"text-sm text-secondary mt-4",children:["Note: remote config flags must be accessed through payloads, e.g."," ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:featureFlag.has_encrypted_payloads?"getRemoteConfigPayload":"getFeatureFlagPayload"}),". Using standard SDK methods such as"," ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:"getFeatureFlag"})," or"," ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:"isFeatureEnabled"})," will always return ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:"true"})]})]})}),readOnly&&!featureFlag.is_remote_configuration&&(0,jsx_runtime.jsx)(SceneSection.S,{title:"Recordings",description:"Watch recordings of people who have been exposed to the feature flag.",children:(0,jsx_runtime.jsx)("div",{className:"inline-block",children:(0,jsx_runtime.jsx)(LemonButton.J,{onClick:()=>{reportViewRecordingsClicked(),kea_router_lib.router.actions.push(scenes_urls.j.replay(types.yd.Home,recordingFilterForFlag)),addProductIntentForCrossSell({from:types.Md.FEATURE_FLAGS,to:types.Md.SESSION_REPLAY,intent_context:product_intents.kp.FEATURE_FLAG_VIEW_RECORDINGS})},icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconRewindPlay,{}),type:"secondary",size:"small",children:"View recordings"})})})]}),!readOnly&&multivariateEnabled&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Variant keys",description:"The rollout percentage of feature flag variants must add up to 100%",children:(0,jsx_runtime.jsxs)("div",{className:"VariantFormList deprecated-space-y-2 mt-0",children:[(0,jsx_runtime.jsxs)("div",{className:"VariantFormList__row grid label-row gap-2 items-center",children:[(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)("div",{className:"col-span-4",children:"Variant key"}),(0,jsx_runtime.jsx)("div",{className:"col-span-6",children:"Description"}),(0,jsx_runtime.jsx)("div",{className:"col-span-8",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsx)("b",{children:"Payload"}),(0,jsx_runtime.jsx)("span",{className:"text-secondary font-normal",children:"Specify return payload when the variant key matches"})]})}),(0,jsx_runtime.jsxs)("div",{className:"col-span-3 flex justify-between items-center gap-1",children:[(0,jsx_runtime.jsx)("span",{children:"Rollout"}),(0,jsx_runtime.jsx)(LemonButton.J,{onClick:distributeVariantsEqually,tooltip:"Normalize variant rollout percentages",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconBalance,{})})]})]}),variants.map((variant,index)=>(0,jsx_runtime.jsx)(lib.Group,{name:"filters",children:(0,jsx_runtime.jsxs)("div",{className:"VariantFormList__row grid gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:(0,jsx_runtime.jsx)(Lettermark.B,{name:utils.bH[index],color:Lettermark.w.Gray})}),(0,jsx_runtime.jsx)("div",{className:"col-span-4",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["multivariate","variants",index,"key"],children:(0,jsx_runtime.jsx)(LemonInput.D,{"data-attr":"feature-flag-variant-key","data-key-index":index.toString(),className:"ph-ignore-input",placeholder:`example-variant-${index+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1,disabled:!canEditVariant(index)})})}),(0,jsx_runtime.jsx)("div",{className:"col-span-6",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["multivariate","variants",index,"name"],children:(0,jsx_runtime.jsx)(LemonInput.D,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),(0,jsx_runtime.jsx)("div",{className:"col-span-8",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["payloads",index],children:_ref12=>{let{value,onChange}=_ref12;return(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{onChange:newValue=>{onChange(""===newValue?void 0:newValue)},value:value,placeholder:'{"key": "value"}'})}})}),(0,jsx_runtime.jsx)("div",{className:"col-span-3",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["multivariate","variants",index,"rollout_percentage"],children:_ref13=>{let{value,onChange}=_ref13;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(LemonInput.D,{type:"number",min:0,max:100,value:value.toString(),onChange:changedValue=>{onChange(void 0===changedValue||isNaN(changedValue)?0:parseInt(changedValue.toString()))},suffix:(0,jsx_runtime.jsx)("span",{children:"%"}),"data-attr":"feature-flag-variant-rollout-percentage-input"}),filterGroups.filter(group=>group.variant===variant.key).length>0&&(0,jsx_runtime.jsxs)("span",{className:"text-secondary text-xs",children:["Overridden by"," ",(0,jsx_runtime.jsx)("strong",{children:variantConcatWithPunctuation(filterGroups.filter(group=>null!=group.variant&&group.variant===variant.key).map(variant=>"Set "+(filterGroups.findIndex(group=>group===variant)+1)))})]})]})}})}),(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:variants.length>1&&(0,jsx_runtime.jsx)(LemonButton.J,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),"data-attr":`delete-prop-filter-${index}`,noPadding:!0,onClick:()=>removeVariant(index),disabledReason:canEditVariant(index)?void 0:isDraftExperiment?"Cannot delete the control variant from an experiment.":"Cannot delete variants from a feature flag that is part of a launched experiment.",tooltipPlacement:"top-end"})})]})},index)),variants.length>0&&!areVariantRolloutsValid&&(0,jsx_runtime.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently"," ",variantRolloutSum,")."]}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"secondary",onClick:()=>{let newIndex=variants.length;addVariant(),focusVariantKeyField(newIndex)},icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),disabledReason:hasExperiment&&!isDraftExperiment?"Cannot add variants to a feature flag that is part of a launched experiment. To update variants, reset the experiment to draft.":void 0,tooltipPlacement:"top-start",center:!0,children:"Add variant"})]})})]})]}),readOnly&&!multivariateEnabled&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,jsx_runtime.jsx)(SceneSection.S,{title:"Payload",children:readOnly?featureFlag.filters.payloads?.true?(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,value:featureFlag.filters.payloads?.true}):(0,jsx_runtime.jsx)("span",{className:"text-secondary",children:"No payload associated with this flag"}):(0,jsx_runtime.jsxs)("div",{className:"w-1/2",children:[(0,jsx_runtime.jsx)("div",{className:"text-secondary mb-4",children:featureFlag.is_remote_configuration?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Specify a valid JSON payload to be returned for the config flag. Read more in the"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/feature-flags/creating-feature-flags#payloads",children:"payload documentation"}),"."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Optionally specify a valid JSON payload to be returned when the served value is"," ",(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)("code",{children:"true"})}),". Read more in the"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/feature-flags/creating-feature-flags#payloads",children:"payload documentation"}),"."]})}),featureFlag.is_remote_configuration&&(0,jsx_runtime.jsx)(LemonField.D,{name:"has_encrypted_payloads",children:_ref14=>{let{value,onChange}=_ref14;return(0,jsx_runtime.jsx)("div",{className:"border rounded mb-4 p-4",children:(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"flag-payload-encrypted-checkbox",label:"Encrypt remote configuration payload",onChange:()=>onChange(!value),checked:value,"data-attr":"feature-flag-payload-encrypted-checkbox",disabledReason:hasEncryptedPayloadBeenSaved&&"An encrypted payload has already been saved for this flag. Reset the payload or create a new flag to create an unencrypted configuration payload."})})}}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(lib.Group,{name:["filters","payloads"],children:(0,jsx_runtime.jsx)(LemonField.D,{name:"true",className:"grow",children:(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly||featureFlag.has_encrypted_payloads&&!!featureFlag.filters?.payloads?.true,placeholder:'Examples: "A string", 2500, {"key": "value"}'})})}),featureFlag.has_encrypted_payloads&&(0,jsx_runtime.jsx)(LemonButton.J,{className:"grow-0",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),type:"secondary",size:"small",status:"danger",onClick:confirmEncryptedPayloadReset,children:"Reset"})]}),featureFlag.is_remote_configuration&&(0,jsx_runtime.jsxs)("div",{className:"text-sm text-secondary mt-4",children:["Note: remote config flags must be accessed through payloads, e.g."," ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:featureFlag.has_encrypted_payloads?"getRemoteConfigPayload":"getFeatureFlagPayload"}),". Using standard SDK methods such as"," ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:"getFeatureFlag"})," or"," ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:"isFeatureEnabled"})," will always return"," ",(0,jsx_runtime.jsx)("span",{className:"font-mono font-bold",children:"true"})]})]})}),readOnly&&!featureFlag.is_remote_configuration&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Recordings",description:"Watch recordings of people who have been exposed to the feature flag.",children:(0,jsx_runtime.jsx)(LemonButton.J,{onClick:()=>{reportViewRecordingsClicked(),kea_router_lib.router.actions.push(scenes_urls.j.replay(types.yd.Home,recordingFilterForFlag)),addProductIntentForCrossSell({from:types.Md.FEATURE_FLAGS,to:types.Md.SESSION_REPLAY,intent_context:product_intents.kp.FEATURE_FLAG_VIEW_RECORDINGS})},icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconRewindPlay,{}),type:"secondary",size:"small",className:"w-fit",children:"View recordings"})})]})]})]})}},"../../frontend/src/scenes/feature-flags/FeatureFlags.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FeatureFlags:()=>FeatureFlags,OverViewTab:()=>OverViewTab,groupFilters:()=>groupFilters,scene:()=>scene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/AccessControlledLemonButton.tsx"),lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/MemberSelect.tsx"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_components_PropertyFilters_components_PropertyFiltersDisplay__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/lib/components/hedgehogs.tsx"),lib_constants__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/lib/constants.tsx"),lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../frontend/src/lib/lemon-ui/Tooltip/index.ts"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("../../frontend/src/lib/ui/WrappingLoadingSkeleton/WrappingLoadingSkeleton.tsx"),lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("../../frontend/src/lib/utils/copyToClipboard.tsx"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),lib_utils_deleteWithUndo__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("../../frontend/src/lib/utils/deleteWithUndo.tsx"),lib_utils_getAppContext__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("../../frontend/src/lib/utils/getAppContext.ts"),lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("../../frontend/src/lib/utils/stringWithWBR.tsx"),scenes_max_useMaxTool__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("../../frontend/src/scenes/max/useMaxTool.ts"),scenes_projectLogic__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("../../frontend/src/scenes/projectLogic.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("../../frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_layout_scenes_components_SceneContent__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),_layout_scenes_components_SceneDivider__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),_layout_scenes_components_SceneTitleSection__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),_models_groupsModel__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("../../frontend/src/models/groupsModel.ts"),_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts"),_types__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("../../frontend/src/types.ts"),_FeatureFlag__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("../../frontend/src/scenes/feature-flags/FeatureFlag.tsx"),_featureFlagLogic__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("../../frontend/src/scenes/feature-flags/featureFlagLogic.ts"),_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("../../frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function FeatureFlagRowActions(_ref){let{featureFlag}=_ref,{currentProjectId}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_projectLogic__WEBPACK_IMPORTED_MODULE_29__.K),{user}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_31__.userLogic),flagLogic=(0,_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.bP)({}),{updateFeatureFlag,loadFeatureFlags}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(flagLogic),multivariateEnabled=!!featureFlag.filters?.multivariate,variants=featureFlag.filters?.multivariate?.variants||[],{openMax}=(0,scenes_max_useMaxTool__WEBPACK_IMPORTED_MODULE_28__.$)((0,_FeatureFlag__WEBPACK_IMPORTED_MODULE_38__.createMaxToolSurveyConfig)(featureFlag,user,multivariateEnabled,variants));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_15__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_14__.J,{onClick:()=>{(0,lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_24__.v)(featureFlag.key,"feature flag key")},fullWidth:!0,children:"Copy feature flag key"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_37__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_37__.qR.FeatureFlag,"data-attr":`feature-flag-${featureFlag.key}-switch`,onClick:()=>{let newValue=!featureFlag.active;_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.dn.open({title:`${!0===newValue?"Enable":"Disable"} this flag?`,description:`This flag will be immediately ${!0===newValue?"rolled out to":"rolled back from"} the users matching the release conditions.`,primaryButton:{children:"Confirm",type:"primary",onClick:()=>{featureFlag.id&&updateFeatureFlag({id:featureFlag.id,payload:{active:newValue}})},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},id:`feature-flag-${featureFlag.id}-switch`,fullWidth:!0,children:[featureFlag.active?"Disable":"Enable"," feature flag"]}),featureFlag.id&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_37__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_37__.qR.FeatureFlag,fullWidth:!0,disabled:!featureFlag.can_edit,onClick:()=>{featureFlag.id&&((0,_featureFlagLogic__WEBPACK_IMPORTED_MODULE_39__.hk)({id:featureFlag.id}).mount(),(0,_featureFlagLogic__WEBPACK_IMPORTED_MODULE_39__.hk)({id:featureFlag.id}).actions.editFeatureFlag(!0),kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_30__.j.featureFlag(featureFlag.id)))},children:"Edit"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_14__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_30__.j.featureFlagDuplicate(featureFlag.id),"data-attr":"feature-flag-duplicate",fullWidth:!0,children:"Duplicate feature flag"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_14__.J,{to:(featureFlag=>{let query={kind:_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_36__.OH.InsightVizNode,source:{kind:_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_36__.OH.TrendsQuery,series:[{event:"$pageview",name:"$pageview",kind:_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_36__.OH.EventsNode,math:_types__WEBPACK_IMPORTED_MODULE_37__.vN.UniqueUsers}],breakdownFilter:{breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`}}};return scenes_urls__WEBPACK_IMPORTED_MODULE_30__.j.insightNew({query})})(featureFlag),"data-attr":"usage",fullWidth:!0,children:"Try out in Insights"}),openMax&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_14__.J,{onClick:openMax,"data-attr":"create-survey",fullWidth:!0,children:"Create survey"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_16__.p,{}),featureFlag.id&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_37__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_37__.qR.FeatureFlag,status:"danger",onClick:()=>{(0,lib_utils_deleteWithUndo__WEBPACK_IMPORTED_MODULE_25__.S)({endpoint:`projects/${currentProjectId}/feature_flags`,object:{name:featureFlag.key,id:featureFlag.id},callback:loadFeatureFlags}).catch(e=>{_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.UJ.error(`Failed to delete feature flag: ${e.detail}`)})},disabledReason:featureFlag.can_edit?(featureFlag.features?.length||0)>0?"This feature flag is in use with an early access feature. Delete the early access feature to delete this flag":(featureFlag.experiment_set?.length||0)>0?"This feature flag is linked to an experiment. Delete the experiment to delete this flag":(featureFlag.surveys?.length||0)>0?"This feature flag is linked to a survey. Delete the survey to delete this flag":null:"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",fullWidth:!0,children:"Delete feature flag"})]})})}let scene={component:FeatureFlags,logic:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.bP,settingSectionId:"environment-feature-flags"};function OverViewTab(_ref2){var _filters$type,_filters$active,_filters$created_by_i,_filters$evaluation_r;let{flagPrefix="",searchPlaceholder="Search for feature flags",nouns=["feature flag","feature flags"]}=_ref2,{aggregationLabel}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_groupsModel__WEBPACK_IMPORTED_MODULE_35__.$),flagLogic=(0,_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.bP)({flagPrefix}),{featureFlagsLoading,featureFlags,count,pagination,filters,shouldShowEmptyState}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(flagLogic),{setFeatureFlagsFilters}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(flagLogic),{hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_31__.userLogic),newSceneLayout=(0,lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_13__.y)("NEW_SCENE_LAYOUT"),page=filters.page||1,startCount=(page-1)*_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.ac+1,endCount=page*_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.ac<count?page*_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.ac:count,columns=[{title:"Key",dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(a,b)=>(a.key||"").localeCompare(b.key||""),render:function Render(_,featureFlag){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_18__.i,{to:featureFlag.id?scenes_urls__WEBPACK_IMPORTED_MODULE_30__.j.featureFlag(featureFlag.id):void 0,title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("span",{children:(0,lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_27__.Z)(featureFlag.key,17)}),!featureFlag.can_edit&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_21__.u,{title:"You don't have edit permissions for this feature flag.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_2__.IconLock,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})})]}),description:featureFlag.name})}},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_37__.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_7__.D,{tags:tags,staticOnly:!0}):null}}]:[],(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_19__.JB)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_19__.rw)(),{title:"Release conditions",width:100,render:function Render(_,featureFlag){let releaseText=groupFilters(featureFlag.filters,void 0,aggregationLabel);return"string"==typeof releaseText&&releaseText.startsWith("100% of")?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.oe,{type:"highlight",children:releaseText}):releaseText}},{title:"Status",dataIndex:"active",sorter:(a,b)=>Number(a.active)-Number(b.active),width:100,render:function RenderActive(_,featureFlag){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)("div",{className:"flex justify-start gap-1",children:[featureFlag.performed_rollback?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.oe,{type:"warning",className:"uppercase",children:"Rolled Back"}):featureFlag.active?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.oe,{type:"success",className:"uppercase",children:"Enabled"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.oe,{type:"default",className:"uppercase",children:"Disabled"}),"STALE"===featureFlag.status&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_21__.u,{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("div",{className:"text-sm",children:"Flag at least 30 days old and fully rolled out"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("div",{className:"text-xs",children:"Make sure to remove any references to this flag in your code before deleting it."})]}),placement:"left",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.oe,{type:"warning",className:"uppercase cursor-default",children:"Stale"})})})]})}},...lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_22__.featureFlagLogic.values.featureFlags?.[lib_constants__WEBPACK_IMPORTED_MODULE_12__.y8.FLAG_EVALUATION_RUNTIMES]?[{title:"Runtime",dataIndex:"evaluation_runtime",width:120,render:function RenderFlagRuntime(_,featureFlag){let runtime=featureFlag.evaluation_runtime||_types__WEBPACK_IMPORTED_MODULE_37__.GM.ALL;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.oe,{type:"default",className:"uppercase",children:runtime===_types__WEBPACK_IMPORTED_MODULE_37__.GM.ALL?"All":runtime===_types__WEBPACK_IMPORTED_MODULE_37__.GM.CLIENT?"Client":runtime===_types__WEBPACK_IMPORTED_MODULE_37__.GM.SERVER?"Server":"All"})}}]:[],{width:0,render:function Render(_,featureFlag){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(FeatureFlagRowActions,{featureFlag:featureFlag})}}],filtersSection=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.DF,{className:"w-60",type:"search",placeholder:searchPlaceholder||"",onChange:search=>setFeatureFlagsFilters({search,page:1}),value:filters.search||"","data-attr":"feature-flag-search"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("b",{children:"Type"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.Yv,{dropdownMatchSelectWidth:!1,size:"small",onChange:type=>{if(type){if("all"===type){if(filters){let{type,...restFilters}=filters;setFeatureFlagsFilters({...restFilters,page:1},!0)}}else setFeatureFlagsFilters({type,page:1})}},options:[{label:"All",value:"all"},{label:"Boolean",value:"boolean"},{label:"Multiple variants",value:"multivariant","data-attr":"feature-flag-select-type-option-multiple-variants"},{label:"Experiment",value:"experiment"},{label:"Remote config",value:"remote_config"}],value:null!==(_filters$type=filters.type)&&void 0!==_filters$type?_filters$type:"all","data-attr":"feature-flag-select-type"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("b",{children:"Status"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.Yv,{dropdownMatchSelectWidth:!1,size:"small",onChange:status=>{let{active,...restFilters}=filters||{};"all"===status?setFeatureFlagsFilters({...restFilters,page:1},!0):"STALE"===status?setFeatureFlagsFilters({...restFilters,active:"STALE",page:1},!0):setFeatureFlagsFilters({...restFilters,active:status,page:1},!0)},options:[{label:"All",value:"all","data-attr":"feature-flag-select-status-all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false","data-attr":"feature-flag-select-status-disabled"},{label:"Stale",value:"STALE","data-attr":"feature-flag-select-status-stale"}],value:null!==(_filters$active=filters.active)&&void 0!==_filters$active?_filters$active:"all","data-attr":"feature-flag-select-status"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("span",{className:"ml-1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("b",{children:"Created by"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_6__.a,{defaultLabel:"Any user",value:null!==(_filters$created_by_i=filters.created_by_id)&&void 0!==_filters$created_by_i?_filters$created_by_i:null,onChange:user=>{if(user)setFeatureFlagsFilters({created_by_id:user.id,page:1});else if(filters){let{created_by_id,...restFilters}=filters;setFeatureFlagsFilters({...restFilters,page:1},!0)}},"data-attr":"feature-flag-select-created-by"}),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_22__.featureFlagLogic.values.featureFlags?.[lib_constants__WEBPACK_IMPORTED_MODULE_12__.y8.FLAG_EVALUATION_RUNTIMES]&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("span",{className:"ml-1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("b",{children:"Runtime"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_3__.Yv,{dropdownMatchSelectWidth:!1,size:"small",onChange:runtime=>{let{evaluation_runtime,...restFilters}=filters||{};"any"===runtime?setFeatureFlagsFilters({...restFilters,page:1},!0):setFeatureFlagsFilters({...restFilters,evaluation_runtime:runtime,page:1},!0)},options:[{label:"Any",value:"any","data-attr":"feature-flag-select-runtime-any"},{label:"All",value:_types__WEBPACK_IMPORTED_MODULE_37__.GM.ALL},{label:"Client",value:_types__WEBPACK_IMPORTED_MODULE_37__.GM.CLIENT},{label:"Server",value:_types__WEBPACK_IMPORTED_MODULE_37__.GM.SERVER}],value:null!==(_filters$evaluation_r=filters.evaluation_runtime)&&void 0!==_filters$evaluation_r?_filters$evaluation_r:"any","data-attr":"feature-flag-select-runtime"})]})]})]});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)(_layout_scenes_components_SceneContent__WEBPACK_IMPORTED_MODULE_32__._,{forceNewSpacing:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_9__.C,{productName:"Feature flags",productKey:_types__WEBPACK_IMPORTED_MODULE_37__.Md.FEATURE_FLAGS,thingName:"feature flag",description:"Use feature flags to safely deploy and roll back new features in an easy-to-manage way. Roll variants out to certain groups, a percentage of users, or everyone all at once.",docsURL:"https://posthog.com/docs/feature-flags/manual",action:()=>kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_30__.j.featureFlag("new")),isEmpty:shouldShowEmptyState,customHog:lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_11__.FeatureFlagHog,className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_42__.cn)(newSceneLayout&&"my-0")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("div",{children:filtersSection}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_16__.p,{className:"my-0"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)("span",{className:"text-secondary",children:featureFlagsLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_23__.x,{children:"1-100 of 150 flags"}):count?`${startCount}${endCount-startCount>1?"-"+endCount:""} of ${count} flag${1===count?"":"s"}`:null})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_17__.g,{dataSource:featureFlags.results,columns:columns,rowKey:"key",defaultSorting:{columnKey:"created_at",order:-1},noSortingCancellation:!0,loading:featureFlagsLoading,pagination:pagination,nouns:nouns,"data-attr":"feature-flag-table",emptyState:"No results for this filter, change filter or create a new flag.",onSort:newSorting=>setFeatureFlagsFilters({order:newSorting?`${-1===newSorting.order?"-":""}${newSorting.columnKey}`:void 0,page:1})})]})}function FeatureFlags(){let{activeTab}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.bP),{setActiveTab}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.bP),newSceneLayout=(0,lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_13__.y)("NEW_SCENE_LAYOUT");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)(_layout_scenes_components_SceneContent__WEBPACK_IMPORTED_MODULE_32__._,{className:"feature_flags",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_8__.m,{buttons:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{type:"primary",to:scenes_urls__WEBPACK_IMPORTED_MODULE_30__.j.featureFlag("new"),"data-attr":"new-feature-flag",resourceType:_types__WEBPACK_IMPORTED_MODULE_37__.qR.FeatureFlag,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_37__.W$.Editor,userAccessLevel:lib_utils_getAppContext__WEBPACK_IMPORTED_MODULE_26__.Fj()?.resource_access_control?.[_types__WEBPACK_IMPORTED_MODULE_37__.qR.FeatureFlag],children:"New feature flag"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_layout_scenes_components_SceneTitleSection__WEBPACK_IMPORTED_MODULE_34__.s,{name:"Feature flags",description:"Use feature flags to safely deploy and roll back new features in an easy-to-manage way. Roll variants out to certain groups, a percentage of users, or everyone all at once.",resourceType:{type:"feature_flag"}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(_layout_scenes_components_SceneDivider__WEBPACK_IMPORTED_MODULE_33__.V,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_20__.T,{activeKey:activeTab,onChange:newKey=>setActiveTab(newKey),sceneInset:newSceneLayout,tabs:[{key:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.id.OVERVIEW,label:"Overview",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(OverViewTab,{})},{key:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_40__.id.HISTORY,label:"History",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_5__.DA,{scope:_types__WEBPACK_IMPORTED_MODULE_37__.jc.FEATURE_FLAG})}],"data-attr":"feature-flags-tab-navigation"})]})}function groupFilters(filters,stringOnly,aggregationLabel){let aggregationTargetName=aggregationLabel&&null!=filters.aggregation_group_type_index?aggregationLabel(filters.aggregation_group_type_index).plural:"users",groups=filters.groups||[];if(0===groups.length||!groups.some(group=>0!==group.rollout_percentage))return`No ${aggregationTargetName}`;if(groups.some(group=>!group.properties?.length&&[null,void 0,100].includes(group.rollout_percentage)))return`100% of all ${aggregationTargetName}`;if(1===groups.length){let{properties,rollout_percentage=null}=groups[0];return(properties?.length||0)>0?stringOnly?`${null!=rollout_percentage?rollout_percentage:100}% of one group`:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsxs)("span",{className:"shrink-0 mr-2",children:[null!=rollout_percentage?rollout_percentage:100,"% of"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_41__.jsx)(lib_components_PropertyFilters_components_PropertyFiltersDisplay__WEBPACK_IMPORTED_MODULE_10__.Z,{filters:properties})]}):null!==rollout_percentage?`${rollout_percentage}% of all ${aggregationTargetName}`:(console.error("A group with full rollout was not detected early"),`100% of all ${aggregationTargetName}`)}return"Multiple groups"}},"../../frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>ProjectHomePageCompactListItem}),__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ProjectHomePageCompactListItem(_ref){let{to,onClick,title,subtitle,prefix,suffix}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{fullWidth:!0,to:to,onClick:onClick,className:"h-12",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"flex items-start justify-between overflow-hidden gap-2 flex-1",children:[prefix?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"flex shrink-0 text-secondary text-xl",children:prefix}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"truncate flex flex-col gap-y-0.5 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"text-link truncate",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"truncate text-secondary font-normal text-xs",children:subtitle})]}),suffix?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"shrink-0",children:suffix}):null]})})}},"../../frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>projectHomepageLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.7_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/api.ts"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardLogic.tsx"),scenes_max_maxTypes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/max/maxTypes.ts"),scenes_projectLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/projectLogic.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),_queries_nodes_InsightViz_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/queries/nodes/InsightViz/utils.ts"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/types.ts");let projectHomepageLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","project-homepage","projectHomepageLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__.teamLogic,["currentTeam"],scenes_projectLogic__WEBPACK_IMPORTED_MODULE_6__.K,["currentProjectId"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({primaryDashboardId:[()=>[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__.teamLogic.selectors.currentTeam],currentTeam=>currentTeam?.primary_dashboard],dashboardLogicProps:[s=>[s.primaryDashboardId],primaryDashboardId=>primaryDashboardId?{id:primaryDashboardId,placement:_types__WEBPACK_IMPORTED_MODULE_9__.F4.ProjectHomepage}:null],maxContext:[s=>[state=>{let dashboardLogicProps=s.dashboardLogicProps(state);if(!dashboardLogicProps)return null;let logic=scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_4__.BM.findMounted(dashboardLogicProps);return logic?logic.selectors.dashboard(state):null}],dashboard=>dashboard?[scenes_max_maxTypes__WEBPACK_IMPORTED_MODULE_5__.s.dashboard(dashboard)]:[]]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref=>{let{values}=_ref;return{recentInsights:[[],{loadRecentInsights:async()=>(await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.get(`api/environments/${values.currentProjectId}/insights/my_last_viewed`)).map(legacyInsight=>(0,_queries_nodes_InsightViz_utils__WEBPACK_IMPORTED_MODULE_8__.Q0)(legacyInsight))}]}}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__.Vt)(_ref2=>{let{cache}=_ref2;return{dashboardLogicProps:dashboardLogicProps=>{if(dashboardLogicProps){let unmount=(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_4__.BM)(dashboardLogicProps).mount();cache.unmountDashboardLogic?.(),cache.unmountDashboardLogic=unmount}else cache.unmountDashboardLogic&&(cache.unmountDashboardLogic?.(),cache.unmountDashboardLogic=null)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.beforeUnmount)(_ref3=>{let{cache}=_ref3;cache.unmountDashboardLogic?.(),cache.unmountDashboardLogic=null})])},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/components/CompactList/CompactList.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".CompactList{background:var(--color-bg-surface-primary);border:1px solid var(--color-border-primary);border-radius:var(--radius);box-sizing:initial;display:flex;flex:1;flex-direction:column;overflow:hidden}.CompactList .CompactList__header{align-items:center;display:flex;justify-content:space-between;padding:.5rem}.CompactList .CompactList__header h3{font-size:.9rem;font-weight:600;line-height:1.4;margin-bottom:0}.CompactList .CompactList__content{height:16rem;overflow-y:auto;padding:.5rem}.CompactList .LemonButton{font-family:var(--font-sans)!important}",""]),module.exports=exports},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/feature-flags/JSONEditorInput.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".JsonEditorInput{position:relative}.JsonEditorInput .border{border-radius:var(--radius)}.JsonEditorInput .border .monaco-diff-editor,.JsonEditorInput .border .monaco-diff-editor .overflow-guard,.JsonEditorInput .border .monaco-editor,.JsonEditorInput .border .monaco-editor .overflow-guard{border-radius:inherit}.JsonEditorInput .placeholder{bottom:0;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.JsonEditorInput .placeholder .placeholderLabelContainer{align-items:center;color:gray;display:flex;height:100%;padding-left:18px;pointer-events:none}",""]),module.exports=exports},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/project-homepage/ProjectHomepage.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ProjectHomepage{container-type:inline-size}.ProjectHomepage .ProjectHomepage__dashboardheader{align-items:center;display:flex;justify-content:space-between;margin-top:1rem}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title{align-items:center;display:flex;flex-direction:row}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title a{color:var(--text-3000)}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title a:hover{color:var(--color-accent)}.ProjectHomepage .ProjectHomepage__lists{display:flex;gap:1rem}@container (max-width: 800px){.ProjectHomepage .ProjectHomepage__lists{flex-direction:column}}.ProjectHomepage .empty-state-container{align-items:center;background-color:var(--color-bg-primary);display:flex;flex-direction:column;justify-content:center;padding:4rem;width:100%}",""]),module.exports=exports},"../../frontend/src/scenes/project-homepage/ProjectHomepage.scss":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_5_6_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/project-homepage/ProjectHomepage.scss"),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_5_6_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_5_6_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__),options={};options.insert="head",options.singleton=!1,_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_5_6_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default(),options),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_5_6_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default().locals}}]);