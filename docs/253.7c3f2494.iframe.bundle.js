(window.webpackJsonp=window.webpackJsonp||[]).push([[253],{"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(u,l,e){"use strict";e.r(l),e.d(l,"ProjectHomepage",function(){return A}),e.d(l,"scene",function(){return q});var f=e("./node_modules/core-js/modules/es.function.name.js"),_=e("./node_modules/core-js/modules/es.object.to-string.js"),ee=e("./node_modules/core-js/modules/es.regexp.to-string.js"),V=e("./node_modules/react/index.js"),a=e.n(V),R=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),L=e.n(R),z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),C=e.n(z),P={};P.insert="head",P.singleton=!1;var ae=L()(C.a,P),oe=C.a.locals||{},$=e("./frontend/src/lib/components/PageHeader.tsx"),B=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),c=e("./node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/scenes/teamLogic.ts"),w=e("./frontend/src/types.ts"),F=e("./node_modules/antd/es/row/index.js"),N=e("./node_modules/antd/es/skeleton/index.js"),S=e("./node_modules/antd/es/typography/index.js"),G=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),W=e("./node_modules/kea-router/lib/index.js"),J=e("./frontend/src/scenes/urls.ts"),I=e("./frontend/src/lib/components/LemonRow/index.ts"),se=e("./node_modules/core-js/modules/es.symbol.js"),re=e("./node_modules/core-js/modules/es.symbol.description.js"),te=e("./node_modules/core-js/modules/es.array.map.js"),U=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/PrimaryDashboardModal.scss"),O=e.n(U),D={};D.insert="head",D.singleton=!1;var ne=L()(O.a,D),de=O.a.locals||{},K=e("./frontend/src/models/dashboardsModel.tsx"),Q=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),p=e("./frontend/src/lib/components/LemonButton/index.ts"),X=e("./node_modules/@babel/runtime/regenerator/index.js"),b=e.n(X),le=e("./node_modules/regenerator-runtime/runtime.js"),Y=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),H=e.n(Y),x=e("./frontend/src/lib/utils/eventUsageLogic.ts"),E=Object(c.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[x.f],actions:[v.a,["updateCurrentTeam"]],values:[v.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(i){return{dashboardId:i}}},selectors:{primaryDashboardId:[function(o){return[o.currentTeam]},function(o){return o==null?void 0:o.primary_dashboard}]},reducers:{visible:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(i){var d=i.actions;return{setPrimaryDashboard:function(){var r=H()(b.a.mark(function s(h){var m;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:m=h.dashboardId,d.updateCurrentTeam({primary_dashboard:m}),x.f.actions.reportPrimaryDashboardChanged();case 3:case"end":return n.stop()}},s)}));function t(s){return r.apply(this,arguments)}return t}(),showPrimaryDashboardModal:function(){var r=H()(b.a.mark(function s(){return b.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:x.f.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return m.stop()}},s)}));function t(){return r.apply(this,arguments)}return t}()}}}),M=e("./frontend/src/lib/components/icons.tsx");function Z(){var o=Object(c.useValues)(E),i=o.visible,d=o.primaryDashboardId,r=Object(c.useActions)(E),t=r.closePrimaryDashboardModal,s=r.setPrimaryDashboard,h=Object(c.useValues)(K.a),m=h.nameSortedDashboards,y=h.dashboardsLoading;return a.a.createElement(Q.a,{className:"primary-dashboard-modal",visible:i,onCancel:function(){t()},title:"Select a default dashboard for the project",destroyOnClose:!0,bodyStyle:{padding:0},footer:a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",style:{marginRight:"0.5rem"},onClick:t},"Close"))},y?a.a.createElement("div",{className:"loading-skeleton-container"},a.a.createElement(N.a,{active:!0})):a.a.createElement("div",{className:"dashboard-list"},m.map(function(n){var j=n.id===d,g=a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"dashboard-label-container"},a.a.createElement("strong",null,n.name),a.a.createElement(S.a.Paragraph,{ellipsis:{rows:1},className:"text-small dashboard-description"},n.description)),j?a.a.createElement("div",{className:"default-indicator"},a.a.createElement(M.IconCottage,{className:"mr-05 text-warning",style:{fontSize:"1.5rem"}}),a.a.createElement("span",null,"Default")):a.a.createElement("strong",{className:"set-default-text"},"Set as default"));return j?a.a.createElement(I.a,{key:n.id,fullWidth:!0,status:"muted",className:"dashboard-row"},g):a.a.createElement(p.a,{key:n.id,fullWidth:!0,className:"dashboard-row",onClick:function(){s(n.id),t()}},g)})))}var k=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),T=Object(c.kea)({path:["scenes","project-homepage","projectHomepageLogic"],selectors:{primaryDashboardId:[function(){return[v.a.selectors.currentTeam]},function(o){return o==null?void 0:o.primary_dashboard}],dashboardLogic:[function(o){return[o.primaryDashboardId]},function(o){return k.c.build({id:o!=null?o:void 0,placement:w.f.ProjectHomepage},!1)}]},subscriptions:function(i){var d=i.cache;return{dashboardLogic:function(t){var s;(s=d.unmount)===null||s===void 0||s.call(d),d.unmount=t?t.mount():null}}},events:function(i){var d=i.cache;return{afterMount:function(){var t;(t=d.unmount)===null||t===void 0||t.call(d)}}}});function A(){var o=Object(c.useValues)(T),i=o.dashboardLogic,d=Object(c.useValues)(v.a),r=d.currentTeam,t=Object(c.useValues)(i),s=t.dashboard,h=Object(c.useActions)(G.a),m=h.showInviteModal,y=Object(c.useActions)(E),n=y.showPrimaryDashboardModal,j=a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(p.a,{"data-attr":"project-home-invite-team-members",onClick:function(){m()},className:"mr-05",type:"secondary"},"Invite members"),a.a.createElement(p.a,{"data-attr":"project-home-new-insight",onClick:function(){W.router.actions.push(J.a.insightNew())},type:"secondary"},"New insight"));return a.a.createElement("div",{className:"project-homepage"},a.a.createElement($.a,{title:(r==null?void 0:r.name)||"",delimited:!0,buttons:j}),r!=null&&r.primary_dashboard?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(F.a,{className:"homepage-dashboard-header"},a.a.createElement("div",{className:"dashboard-title-container"},!s&&a.a.createElement(N.a,{active:!0,paragraph:!1}),(s==null?void 0:s.name)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(M.IconCottage,{className:"mr-05 text-warning",style:{fontSize:"1.5rem"}}),a.a.createElement(S.a.Title,{className:"dashboard-name",level:4},s==null?void 0:s.name))),a.a.createElement(p.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:n},"Change dashboard")),a.a.createElement(I.b,{large:!0})),a.a.createElement(B.Dashboard,{id:r.primary_dashboard.toString(),placement:w.f.ProjectHomepage})):a.a.createElement("div",{className:"empty-state-container"},a.a.createElement(M.IconCottage,{className:"mb-05 text-warning",style:{fontSize:"2rem"}}),a.a.createElement("h1",null,"There isn\u2019t a default dashboard set for this project"),a.a.createElement("p",{className:"mb"},"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."),a.a.createElement(p.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){n()}},"Select a default dashboard")),a.a.createElement(Z,null))}var q={component:A,logic:T}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/PrimaryDashboardModal.scss":function(u,l,e){var f=e("./node_modules/css-loader/dist/runtime/api.js");l=f(!1),l.push([u.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.primary-dashboard-modal .loading-skeleton-container{padding:1rem}.primary-dashboard-modal .dashboard-list{max-height:350px;overflow-y:scroll;padding:.5rem 1rem .25rem}.primary-dashboard-modal .dashboard-list .dashboard-row{display:flex;flex:1;height:60px;padding:.5rem;margin-bottom:.25rem}.primary-dashboard-modal .dashboard-list .dashboard-row .dashboard-label-container{color:#2d2d2d;flex:1}.primary-dashboard-modal .dashboard-list .dashboard-row .dashboard-description{margin-bottom:0;max-width:300px;color:rgba(0,0,0,.5)}.primary-dashboard-modal .dashboard-list .dashboard-row .set-default-text{color:#5375ff}.primary-dashboard-modal .dashboard-list .dashboard-row .default-indicator{color:#2d2d2d;display:flex;align-items:center}",""]),u.exports=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(u,l,e){var f=e("./node_modules/css-loader/dist/runtime/api.js");l=f(!1),l.push([u.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.project-homepage .homepage-dashboard-header{justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .dashboard-name{margin:0}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .empty-state-container{background-color:#fafaf9;width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),u.exports=l}}]);
