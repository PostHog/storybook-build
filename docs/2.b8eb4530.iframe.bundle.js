(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./frontend/src/lib/components/LemonModal/LemonModal.tsx":function(ee,p,e){"use strict";e.d(p,"a",function(){return W});var V=e("./node_modules/@babel/runtime/helpers/extends.js"),ae=e.n(V),Q=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),ne=e.n(Q),Z=e("./node_modules/react/index.js"),D=e.n(Z),z=e("./node_modules/antd/es/modal/index.js"),l=e("./frontend/src/lib/components/icons.tsx"),C=e("./frontend/src/lib/components/LemonButton/index.ts"),w=e("./node_modules/clsx/dist/clsx.m.js"),U=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),N=e.n(U),J=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/LemonModal/LemonModal.scss"),k=e.n(J),S={};S.insert="head",S.singleton=!1;var A=N()(k.a,S),x=k.a.locals||{};function W(b){var I=b.className,m=b.footer,v=m===void 0?null:m,y=b.width,u=y===void 0?480:y,K=ne()(b,["className","footer","width"]);return D.a.createElement(z.a,ae()({},K,{footer:v,width:u,closeIcon:D.a.createElement(C.a,{icon:D.a.createElement(l.IconClose,null),type:"stealth"}),className:Object(w.a)("LemonModal",I)}))}try{W.displayName="LemonModal",W.__docgenInfo={description:"A lightweight wrapper over Ant's Modal for matching Lemon style.",displayName:"LemonModal",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonModal/LemonModal.tsx#LemonModal"]={docgenInfo:W.__docgenInfo,name:"LemonModal",path:"frontend/src/lib/components/LemonModal/LemonModal.tsx#LemonModal"})}catch(b){}},"./frontend/src/lib/components/LemonSelect.tsx":function(ee,p,e){"use strict";e.d(p,"a",function(){return S});var V=e("./node_modules/core-js/modules/es.array.map.js"),ae=e.n(V),Q=e("./node_modules/core-js/modules/es.object.entries.js"),ne=e.n(Q),Z=e("./node_modules/@babel/runtime/helpers/extends.js"),D=e.n(Z),z=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=e.n(z),C=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),w=e.n(C),U=e("./node_modules/react/index.js"),N=e.n(U),J=e("./frontend/src/lib/components/icons.tsx"),k=e("./frontend/src/lib/components/LemonButton/index.ts");function S(A){var x,W,b=A.value,I=A.onChange,m=A.options,v=A.placeholder,y=A.dropdownMatchSelectWidth,u=y===void 0?!0:y,K=A.allowClear,L=K===void 0?!1:K,Y=w()(A,["value","onChange","options","placeholder","dropdownMatchSelectWidth","allowClear"]),te=Object(U.useState)(b),q=l()(te,2),O=q[0],$=q[1],X=Object(U.useState)(!1),F=l()(X,2),T=F[0],R=F[1],P=L&&T&&!!O;return Object(U.useEffect)(function(){Y.loading||$(b)},[b,Y.loading]),N.a.createElement("div",{className:"LemonButtonWithSideAction",onMouseEnter:function(){return R(!0)},onMouseLeave:function(){return R(!1)}},N.a.createElement(k.b,D()({popup:{overlay:Object.entries(m).map(function(B){var j=l()(B,2),h=j[0],M=j[1];return N.a.createElement(k.a,{key:h,icon:M.icon,onClick:function(){h!=O&&(I(h),$(h))},type:h==O?"highlighted":"stealth",disabled:M.disabled,fullWidth:!0,"data-attr":M["data-attr"]},M.label||h)}),sameWidth:u,actionable:!0},icon:O&&((x=m[O])===null||x===void 0?void 0:x.icon),sideIcon:P?N.a.createElement("div",null):void 0},Y),O&&(((W=m[O])===null||W===void 0?void 0:W.label)||O)||N.a.createElement("span",{className:"text-muted"},v)),P&&N.a.createElement(k.a,{className:"side-button",type:"tertiary",icon:N.a.createElement(J.IconClose,{style:{fontSize:"1rem"}}),tooltip:"Clear selection",onClick:function(){I(null),$(null)}}))}try{S.displayName="LemonSelect",S.__docgenInfo={description:"",displayName:"LemonSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"LemonSelectOptions"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number | symbol | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: keyof O | null) => void"}},dropdownMatchSelectWidth:{defaultValue:{value:"true"},description:"",name:"dropdownMatchSelectWidth",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:{value:"false"},description:"",name:"allowClear",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'},{value:'"stealth"'},{value:'"highlighted"'},{value:'"primary-alt"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLButtonElement>"}},relaxedIconWidth:{defaultValue:null,description:"If icon width is relaxed, width of icon box is set to auto. Default icon width is 1em",name:"relaxedIconWidth",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"muted"'},{value:'"highlighted"'},{value:'"success"'},{value:'"warning"'},{value:'"danger"'}]}},extendedContent:{defaultValue:null,description:"Extended content, e.g. a description, to show in the lower button area.",name:"extendedContent",required:!1,type:{name:"ReactNode"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:null,description:"Tooltip to display on hover.",name:"tooltip",required:!1,type:{name:"any"}},fullWidth:{defaultValue:null,description:"Whether the row should take up the parent's full width.",name:"fullWidth",required:!1,type:{name:"boolean"}},center:{defaultValue:null,description:"Whether the row's contents should be centered.",name:"center",required:!1,type:{name:"boolean"}},outlined:{defaultValue:null,description:"Whether the element should be outlined with a standard border.",name:"outlined",required:!1,type:{name:"any"}},compact:{defaultValue:null,description:"A compact row is slightly smaller than normal to better look inline with text.",name:"compact",required:!1,type:{name:"boolean"}},"data-attr":{defaultValue:null,description:"",name:"data-attr",required:!1,type:{name:"string"}},to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},sideIcon:{defaultValue:null,description:"",name:"sideIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | null"}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:"string"}},translucent:{defaultValue:null,description:"Whether the button should have transparent background in its base state (i.e. non-hover).",name:"translucent",required:!1,type:{name:"boolean"}},active:{defaultValue:null,description:"Whether hover style should be applied, signaling that the button is held active in some way.",name:"active",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonSelect.tsx#LemonSelect"]={docgenInfo:S.__docgenInfo,name:"LemonSelect",path:"frontend/src/lib/components/LemonSelect.tsx#LemonSelect"})}catch(A){}},"./frontend/src/lib/components/PayGateMini/PayGateMini.tsx":function(ee,p,e){"use strict";e.d(p,"a",function(){return u});var V=e("./node_modules/core-js/modules/es.symbol.js"),ae=e("./node_modules/core-js/modules/es.symbol.description.js"),Q=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ne=e.n(Q),Z=e("./node_modules/react/index.js"),D=e.n(Z),z=e("./node_modules/kea/lib/index.esm.js"),l=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),C=e("./frontend/src/types.ts"),w=e("./frontend/src/scenes/userLogic.ts"),U=e("./frontend/src/lib/components/icons.tsx"),N=e("./frontend/src/lib/components/LemonButton/index.ts"),J=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),k=e.n(J),S=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss"),A=e.n(S),x={};x.insert="head",x.singleton=!1;var W=k()(A.a,x),b=A.a.locals||{},I=e("./frontend/src/lib/constants.tsx"),m=e("./frontend/src/lib/utils.tsx"),v,y=(v={},ne()(v,C.c.DASHBOARD_PERMISSIONING,{icon:D.a.createElement(U.IconEmojiPeople,null),description:"Share insights, collaborate on dashboards, manage permissions, and make decisions with your team.",umbrella:"advanced permissioning"}),ne()(v,C.c.SSO_ENFORCEMENT,{icon:D.a.createElement(U.IconLock,null),description:"Enable SAML single sign-on, enforce login with SSO, automatic user provisioning, and advanced authentication controls.",umbrella:"advanced authentication"}),v);function u(K){var L=K.feature,Y=K.style,te=K.children,q=K.overrideShouldShowGate,O=Object(z.useValues)(l.a),$=O.preflight,X=Object(z.useValues)(w.a),F=X.hasAvailableFeature,T=y[L],R=I.i[L],P=null;return!q&&!F(L)&&($!=null&&$.cloud?R===I.n?P="add-card":P="contact-sales":P="check-licensing"),P?D.a.createElement("div",{className:"PayGateMini",style:Y},D.a.createElement("div",{className:"PayGateMini__icon"},T.icon),D.a.createElement("div",{className:"PayGateMini__description"},T.description),D.a.createElement("div",{className:"PayGateMini__cta"},"Upgrade to ",P==="add-card"?"a premium":"the ".concat(Object(m.j)(R))," ","plan to gain ",T.umbrella,"."),D.a.createElement(N.a,{to:P==="add-card"?"/organization/billing":void 0,href:P==="contact-sales"?"mailto:sales@posthog.com?subject=Inquiring about ".concat(T.umbrella):P==="check-licensing"?"https://posthog.com/pricing":void 0,type:"secondary",fullWidth:!0,center:!0},P==="add-card"?"Upgrade now":P==="contact-sales"?"Contact sales":"Explore license options")):D.a.createElement(D.a.Fragment,null,te)}try{u.displayName="PayGateMini",u.__docgenInfo={description:`A sort of paywall for premium features.

Simply shows its children when the feature is available,
otherwise it presents upsell UI with the call to action that's most relevant for the circumstances.`,displayName:"PayGateMini",props:{feature:{defaultValue:null,description:"",name:"feature",required:!0,type:{name:"enum",value:[{value:'"sso_enforcement"'},{value:'"dashboard_permissioning"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},overrideShouldShowGate:{defaultValue:null,description:"",name:"overrideShouldShowGate",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"]={docgenInfo:u.__docgenInfo,name:"PayGateMini",path:"frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"})}catch(K){}},"./frontend/src/scenes/dashboard/ShareModal.tsx":function(ee,p,e){"use strict";e.d(p,"a",function(){return O}),e.d(p,"b",function(){return $});var V=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(V),Q=e("./node_modules/core-js/modules/es.array.map.js"),ne=e.n(Q),Z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),D=e.n(Z),z=e("./node_modules/react/index.js"),l=e.n(z),C=e("./node_modules/kea/lib/index.esm.js"),w=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),U=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),N=e("./frontend/src/scenes/urls.ts"),J=e("./frontend/src/models/dashboardsModel.tsx"),k=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),S=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),A=e("./frontend/src/lib/components/LemonButton/index.ts"),x=e("./frontend/src/lib/utils.tsx"),W=e("./frontend/src/lib/components/icons.tsx"),b=e("./frontend/src/types.ts"),I=e("./frontend/src/lib/constants.tsx"),m=e("./frontend/src/lib/components/LemonSelect.tsx"),v=e("./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts"),y=e("./frontend/src/lib/components/ProfilePicture/index.ts"),u=e("./node_modules/antd/es/select/index.js"),K=e("./node_modules/antd/es/button/index.js"),L=e("./frontend/src/lib/components/Tooltip.tsx"),Y=e("./frontend/src/lib/components/InfoMessage/InfoMessage.tsx"),te=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),q,O=(q={},D()(q,I.e.EveryoneInProjectCanEdit,{label:"Everyone in the project can edit",icon:l.a.createElement(W.IconLockOpen,null)}),D()(q,I.e.OnlyCollaboratorsCanEdit,{label:"Only those invited to this dashboard can edit",icon:l.a.createElement(W.IconLock,null)}),q);function $(T){var R=T.visible,P=T.onCancel,B=Object(C.useValues)(J.a),j=B.dashboardLoading,h=Object(C.useValues)(w.c),M=h.dashboard,G=h.canEditDashboard,t=Object(C.useActions)(w.c),d=t.setIsSharedDashboard,n=M?window.location.origin+N.a.sharedDashboard(M.share_token):"";return M?l.a.createElement(S.a,{visible:R,onCancel:P},l.a.createElement(X,{dashboardId:M.id}),l.a.createElement("section",null,l.a.createElement("h5",null,"External sharing"),l.a.createElement(k.a,{id:"share-dashboard-switch",label:"Share dashboard publicly",checked:M.is_shared,loading:j,"data-attr":"share-dashboard-switch",onChange:function(i){d(M.id,i)},type:"primary",disabled:!G,rowStyle:{height:"3rem",fontWeight:600}}),M.is_shared?l.a.createElement(l.a.Fragment,null,M.share_token&&l.a.createElement(A.a,{"data-attr":"share-dashboard-link-button",onClick:function(){return Object(x.t)(n,"link")},icon:l.a.createElement(W.IconCopy,null),style:{width:"100%",height:"3rem",border:"1px solid var(--border)"}},"Copy shared dashboard link"),l.a.createElement("div",null,"Use this HTML snippet to embed the dashboard on your website:"),l.a.createElement(U.a,{language:U.b.HTML},'<iframe width="100%" height="100%" frameborder="0" src="'.concat(n,'?embedded" />'))):null)):null}function X(T){var R=T.dashboardId,P=Object(C.useValues)(J.a),B=P.dashboardLoading,j=Object(C.useValues)(w.c),h=j.dashboard,M=j.canEditDashboard,G=j.canRestrictDashboard,t=Object(C.useActions)(w.c),d=t.triggerDashboardUpdate,n=Object(C.useValues)(Object(v.a)({dashboardId:R})),o=n.allCollaborators,i=n.explicitCollaboratorsLoading,s=n.addableMembers,_=n.explicitCollaboratorsToBeAdded,c=Object(C.useActions)(Object(v.a)({dashboardId:R})),r=c.deleteExplicitCollaborator,a=c.setExplicitCollaboratorsToBeAdded,E=c.addExplicitCollaborators;return h&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Collaboration settings"),l.a.createElement(te.a,{feature:b.c.DASHBOARD_PERMISSIONING,style:{marginTop:"0.75rem"}},l.a.createElement("section",null,(!M||!G)&&l.a.createElement(Y.a,null,M?"You aren't allowed to change the restriction level \u2013 only the dashboard owner and project admins can.":"You aren't allowed to change sharing settings \u2013 only dashboard collaborators with edit settings can."),l.a.createElement(m.a,{value:h.effective_restriction_level,onChange:function(g){return d({restriction_level:g})},options:O,loading:B,type:"stealth",outlined:!0,style:{height:"3rem",width:"100%"},disabled:!G})),h.restriction_level>I.e.EveryoneInProjectCanEdit&&l.a.createElement("section",null,l.a.createElement("h5",null,"Collaborators"),M&&l.a.createElement("div",{style:{display:"flex",marginBottom:"0.75rem"}},l.a.createElement(u.a,{mode:"multiple",placeholder:"Search for team members to add\u2026",loading:i,value:_,onChange:function(g){return a(g)},showArrow:!0,showSearch:!0,style:{flexGrow:1}},s.map(function(f){return l.a.createElement(u.a.Option,{key:f.id,value:f.uuid,title:"".concat(f.first_name," (").concat(f.email,")")},l.a.createElement(y.a,{name:f.first_name,email:f.email,size:"sm",style:{display:"inline-flex",marginRight:8}}),f.first_name," (",f.email,")")})),l.a.createElement(K.a,{type:"primary",style:{flexShrink:0,marginLeft:"0.5rem"},loading:i,disabled:_.length===0,onClick:function(){return E()}},"Add")),o.map(function(f){return l.a.createElement(F,{key:f.user.uuid,collaborator:f,deleteCollaborator:M?r:void 0})}))))}function F(T){var R=T.collaborator,P=T.deleteCollaborator,B=R.user,j=R.level,h=j<=I.d.CanEdit,M=I.B[j];return l.a.createElement("div",{className:"CollaboratorRow"},l.a.createElement(y.a,{email:B.email,name:B.first_name,size:"md",showName:!0}),l.a.createElement(L.a,{title:h?null:"".concat(B.first_name||"This person"," ").concat(j===I.d._Owner?"created the dashboard":"is a project administrator"),placement:"left"},l.a.createElement("div",{className:"CollaboratorRow__details"},l.a.createElement("span",null,h?M:l.a.createElement("b",null,M)),P&&l.a.createElement(A.a,{icon:l.a.createElement(W.IconCancel,null),onClick:function(){return P(B.uuid)},type:"stealth",tooltip:h?"Remove invited collaborator":null,disabled:!h,status:"danger",compact:!0}))))}try{$.displayName="ShareModal",$.__docgenInfo={description:"",displayName:"ShareModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"]={docgenInfo:$.__docgenInfo,name:"ShareModal",path:"frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"})}catch(T){}},"./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts":function(ee,p,e){"use strict";e.d(p,"a",function(){return G});var V=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(V),Q=e("./node_modules/core-js/modules/es.array.filter.js"),ne=e.n(Q),Z=e("./node_modules/core-js/modules/es.array.find.js"),D=e.n(Z),z=e("./node_modules/core-js/modules/es.array.iterator.js"),l=e.n(z),C=e("./node_modules/core-js/modules/es.array.map.js"),w=e.n(C),U=e("./node_modules/core-js/modules/es.array.some.js"),N=e.n(U),J=e("./node_modules/core-js/modules/es.object.to-string.js"),k=e.n(J),S=e("./node_modules/core-js/modules/es.promise.js"),A=e.n(S),x=e("./node_modules/core-js/modules/es.string.iterator.js"),W=e.n(x),b=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),I=e.n(b),m=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=e.n(m),y=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),u=e.n(y),K=e("./node_modules/@babel/runtime/regenerator/index.js"),L=e.n(K),Y=e("./node_modules/regenerator-runtime/runtime.js"),te=e.n(Y),q=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),O=e.n(q),$=e("./node_modules/kea/lib/index.esm.js"),X=e("./frontend/src/lib/api.ts"),F=e("./frontend/src/lib/constants.tsx"),T=e("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),R=e("./frontend/src/scenes/dashboard/dashboardLogic.ts");function P(t,d){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=B(t))||d&&t&&typeof t.length=="number"){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(a){throw a},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,_=!1,c;return{s:function(){n=t[Symbol.iterator]()},n:function(){var a=n.next();return s=a.done,a},e:function(a){_=!0,c=a},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(_)throw c}}}}function B(t,d){if(!!t){if(typeof t=="string")return j(t,d);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,d)}}function j(t,d){(d==null||d>t.length)&&(d=t.length);for(var n=0,o=new Array(d);n<d;n++)o[n]=t[n];return o}function h(t,d){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);d&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,o)}return n}function M(t){for(var d=1;d<arguments.length;d++){var n=arguments[d]!=null?arguments[d]:{};d%2?h(Object(n),!0).forEach(function(o){v()(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}var G=Object($.kea)({path:function(d){return["scenes","dashboard","dashboardCollaboratorsLogic",d]},props:{},key:function(d){return d.dashboardId},connect:function(d){return{values:[T.b,["admins","plainMembers","allMembers","allMembersLoading"],Object(R.c)({id:d.dashboardId}),["dashboard"]]}},actions:{deleteExplicitCollaborator:function(d){return{userUuid:d}},setExplicitCollaboratorsToBeAdded:function(d){return{userUuids:d}},addExplicitCollaborators:!0},reducers:{explicitCollaboratorsToBeAdded:[[],{setExplicitCollaboratorsToBeAdded:function(d,n){var o=n.userUuids;return o}}]},loaders:function(d){var n=d.values,o=d.props,i=d.actions;return{explicitCollaborators:[[],{loadExplicitCollaborators:function(){var s=O()(L.a.mark(function c(){var r;return L.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,X.b.dashboards.collaborators.list(o.dashboardId);case 2:return r=E.sent,r.sort(function(f,g){return f.user.first_name.localeCompare(g.user.first_name)}),E.abrupt("return",r);case 5:case"end":return E.stop()}},c)}));function _(){return s.apply(this,arguments)}return _}(),addExplicitCollaborators:function(){var s=O()(L.a.mark(function c(){var r,a,E,f;return L.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return r=n.explicitCollaboratorsToBeAdded,a=n.explicitCollaborators,i.setExplicitCollaboratorsToBeAdded([]),H.next=4,Promise.all(r.map(function(){var re=O()(L.a.mark(function se(le){return L.a.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,X.b.dashboards.collaborators.create(o.dashboardId,le,F.d.CanEdit);case 2:return oe.abrupt("return",oe.sent);case 3:case"end":return oe.stop()}},se)}));return function(se){return re.apply(this,arguments)}}()));case 4:return E=H.sent,f=[].concat(u()(a),u()(E)),f.sort(function(re,se){return re.user.first_name.localeCompare(se.user.first_name)}),H.abrupt("return",f);case 8:case"end":return H.stop()}},c)}));function _(){return s.apply(this,arguments)}return _}(),deleteExplicitCollaborator:function(){var s=O()(L.a.mark(function c(r){var a;return L.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a=r.userUuid,f.next=3,X.b.dashboards.collaborators.delete(o.dashboardId,a);case 3:return f.abrupt("return",n.explicitCollaborators.filter(function(g){return g.user.uuid!==a}));case 4:case"end":return f.stop()}},c)}));function _(c){return s.apply(this,arguments)}return _}()}]}},selectors:{allCollaborators:[function(t){return[t.explicitCollaborators,t.admins,t.allMembers,t.dashboard]},function(t,d,n,o){var i,s=[],_=o==null||(i=o.created_by)===null||i===void 0?void 0:i.uuid,c=(o==null?void 0:o.effective_restriction_level)===F.e.EveryoneInProjectCanEdit?n:d;return s.push.apply(s,u()(t.filter(function(r){return!c.find(function(a){return a.user.uuid===r.user.uuid})}).map(function(r){return M(M({},r),{},{level:r.user.uuid===_?F.d._Owner:r.level})}))),s.push.apply(s,u()(c.map(function(r){return{user:r.user,level:r.user.uuid===_?F.d._Owner:F.d._ProjectAdmin}}))),s.sort(function(r,a){return r.level===a.level?r.user.first_name.localeCompare(a.user.first_name):a.level-r.level}),s}],addableMembers:[function(t){return[t.allCollaborators,t.plainMembers]},function(t,d){var n=[],o=P(d),i;try{var s=function(){var c=i.value;t.some(function(r){return r.user.uuid===c.user.uuid})||n.push(c.user)};for(o.s();!(i=o.n()).done;)s()}catch(_){o.e(_)}finally{o.f()}return n.sort(function(_,c){return _.first_name.localeCompare(c.first_name)}),n}],addableMembersLoading:[function(t){return[t.explicitCollaboratorsLoading,t.allMembersLoading]},function(t,d){return t||d}]},events:function(d){var n=d.actions;return{afterMount:function(){n.loadExplicitCollaborators()}}}})},"./frontend/src/scenes/dashboard/dashboardsLogic.ts":function(ee,p,e){"use strict";e.d(p,"a",function(){return b}),e.d(p,"b",function(){return I});var V=e("./node_modules/core-js/modules/es.array.filter.js"),ae=e.n(V),Q=e("./node_modules/core-js/modules/es.array.flat-map.js"),ne=e.n(Q),Z=e("./node_modules/core-js/modules/es.array.map.js"),D=e.n(Z),z=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),l=e.n(z),C=e("./node_modules/core-js/modules/es.function.name.js"),w=e.n(C),U=e("./node_modules/core-js/modules/es.regexp.exec.js"),N=e.n(U),J=e("./node_modules/core-js/modules/es.string.search.js"),k=e.n(J),S=e("./node_modules/kea/lib/index.esm.js"),A=e("./node_modules/fuse.js/dist/fuse.esm.js"),x=e("./frontend/src/models/dashboardsModel.tsx"),W=e("./frontend/src/lib/utils.tsx"),b;(function(m){m.All="all",m.Pinned="pinned",m.Shared="shared"})(b||(b={}));var I=Object(S.kea)({path:["scenes","dashboard","dashboardsLogic"],actions:{setSearchTerm:function(v){return{searchTerm:v}},setCurrentTab:function(v){return{tab:v}}},reducers:{searchTerm:{setSearchTerm:function(v,y){var u=y.searchTerm;return u}},currentTab:[b.All,{setCurrentTab:function(v,y){var u=y.tab;return u}}]},selectors:{dashboards:[function(m){return[x.a.selectors.nameSortedDashboards,m.searchTerm,m.currentTab]},function(m,v,y){return m=m.filter(function(u){return!u.deleted}).sort(function(u,K){var L,Y;return((L=u.name)!==null&&L!==void 0?L:"Untitled").localeCompare((Y=K.name)!==null&&Y!==void 0?Y:"Untitled")}),y===b.Pinned?m=m.filter(function(u){return u.pinned}):y===b.Shared&&(m=m.filter(function(u){return u.is_shared})),v?new A.a(m,{keys:["key","name"],threshold:.3}).search(v).map(function(u){return u.item}):m}],dashboardTags:[function(){return[x.a.selectors.nameSortedDashboards]},function(m){return Object(W.Ab)(m.flatMap(function(v){var y=v.tags;return y||""}),function(v){return v}).sort()}]}})},"./frontend/src/scenes/project/Settings/teamMembersLogic.tsx":function(ee,p,e){"use strict";e.d(p,"a",function(){return t}),e.d(p,"b",function(){return d});var V=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(V),Q=e("./node_modules/core-js/modules/es.array.filter.js"),ne=e.n(Q),Z=e("./node_modules/core-js/modules/es.array.find.js"),D=e.n(Z),z=e("./node_modules/core-js/modules/es.array.iterator.js"),l=e.n(z),C=e("./node_modules/core-js/modules/es.array.map.js"),w=e.n(C),U=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e.n(U),J=e("./node_modules/core-js/modules/es.promise.js"),k=e.n(J),S=e("./node_modules/core-js/modules/es.string.iterator.js"),A=e.n(S),x=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),W=e.n(x),b=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=e.n(b),m=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),v=e.n(m),y=e("./node_modules/@babel/runtime/regenerator/index.js"),u=e.n(y),K=e("./node_modules/regenerator-runtime/runtime.js"),L=e.n(K),Y=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),te=e.n(Y),q=e("./node_modules/react/index.js"),O=e.n(q),$=e("./node_modules/kea/lib/index.esm.js"),X=e("./frontend/src/lib/api.ts"),F=e("./frontend/src/lib/constants.tsx"),T=e("./frontend/src/types.ts"),R=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),P=e("./frontend/src/lib/utils/permissioning.ts"),B=e("./frontend/src/scenes/userLogic.ts"),j=e("./frontend/src/scenes/teamLogic.ts"),h=e("./frontend/src/lib/components/lemonToast.tsx");function M(n,o){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);o&&(s=s.filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable})),i.push.apply(i,s)}return i}function G(n){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?M(Object(i),!0).forEach(function(s){I()(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var t=F.m.Admin,d=Object($.kea)({path:["scenes","project","Settings","teamMembersLogic"],actions:{changeUserAccessLevel:function(o,i){return{user:o,newLevel:i}}},loaders:function(o){var i=o.values;return{explicitMembers:{__default:[],loadMembers:function(){var s=te()(u.a.mark(function c(){return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,X.b.get("api/projects/".concat(j.a.values.currentTeamId,"/explicit_members/"));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},c)}));function _(){return s.apply(this,arguments)}return _}(),addMembers:function(){var s=te()(u.a.mark(function c(r){var a,E,f;return u.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return a=r.userUuids,E=r.level,H.next=3,Promise.all(a.map(function(re){return X.b.create("api/projects/".concat(j.a.values.currentTeamId,"/explicit_members/"),{user_uuid:re,level:E})}));case 3:return f=H.sent,h.a.success("Added ".concat(f.length," members").concat(f.length!==1&&"s"," to the project.")),H.abrupt("return",[].concat(v()(i.explicitMembers),v()(f)));case 6:case"end":return H.stop()}},c)}));function _(c){return s.apply(this,arguments)}return _}(),removeMember:function(){var s=te()(u.a.mark(function c(r){var a,E;return u.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return E=r.member,g.next=3,X.b.delete("api/projects/".concat(j.a.values.currentTeamId,"/explicit_members/").concat(E.user.uuid,"/"));case 3:return h.a.success(O.a.createElement(O.a.Fragment,null,E.user.uuid===((a=B.a.values.user)===null||a===void 0?void 0:a.uuid)?"Left":"Removed ".concat(E.user.first_name," (").concat(E.user.email,") from")," ","the project.")),g.abrupt("return",i.explicitMembers.filter(function(H){return H.user.uuid!==E.user.uuid}));case 5:case"end":return g.stop()}},c)}));function _(c){return s.apply(this,arguments)}return _}()}}},selectors:function(o){var i=o.selectors;return{allMembers:[function(){return[j.a.selectors.currentTeam,B.a.selectors.hasAvailableFeature,i.explicitMembers,R.a.selectors.members]},function(s,_,c,r){return!(s!=null&&s.access_control)||!_(T.c.PROJECT_BASED_PERMISSIONING)?r.map(function(a){return G(G({},a),{},{explicit_team_level:null,organization_level:a.level})}):r.filter(function(a){var E=a.level;return E>=t}).map(function(a){return G(G({},a),{},{explicit_team_level:null,organization_level:a.level})}).concat(c.filter(function(a){var E=a.parent_level;return E<t}).map(function(a){return G(G({},a),{},{level:a.effective_level,explicit_team_level:a.level,organization_level:a.parent_level})}))}],allMembersLoading:[function(){return[i.explicitMembersLoading,R.a.selectors.membersLoading]},function(s,_){return s||_}],admins:[function(){return[i.allMembers]},function(s){return s.filter(function(_){var c=_.level;return c>=F.x.Admin})}],plainMembers:[function(){return[i.allMembers]},function(s){return s.filter(function(_){var c=_.level;return c<F.x.Admin})}],addableMembers:[function(){return[i.explicitMembers,R.a.selectors.members,B.a.selectors.user]},function(s,_,c){return _.filter(function(r){var a=r.user;return a.uuid!==c.uuid}).map(function(r){var a=s.find(function(f){return f.user.uuid===r.user.uuid}),E;return a?E=Math.max(a.effective_level,r.level):E=r.level>=t?r.level:null,G(G({},r),{},{level:E,explicit_team_level:a?a.level:null,organization_level:r.level})})}]}},listeners:function(o){var i=o.actions;return{changeUserAccessLevel:function(){var s=te()(u.a.mark(function c(r){var a,E;return u.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a=r.user,E=r.newLevel,g.next=3,X.b.update("api/projects/".concat(j.a.values.currentTeamId,"/explicit_members/").concat(a.uuid,"/"),{level:E});case 3:h.a.success(O.a.createElement(O.a.Fragment,null,"Made ",O.a.createElement("b",null,a.first_name)," project ",P.b.get(E))),i.loadMembers();case 5:case"end":return g.stop()}},c)}));function _(c){return s.apply(this,arguments)}return _}()}},events:function(o){var i=o.actions;return{afterMount:i.loadMembers}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/LemonModal/LemonModal.scss":function(ee,p,e){var V=e("./node_modules/css-loader/dist/runtime/api.js");p=V(!1),p.push([ee.i,".LemonModal .ant-modal-close-x{position:absolute;top:1rem;right:1rem;height:1.5rem;width:1.5rem}.LemonModal .ant-modal-body,.LemonModal .ant-modal-footer,.LemonModal .ant-modal-header{padding:1rem}.LemonModal .ant-modal-footer,.LemonModal .ant-modal-header{display:flex;align-items:center;line-height:1.5rem;border-color:var(--border)}.LemonModal .ant-modal-title{font-weight:600}.LemonModal .ant-modal-footer{justify-content:flex-end}.LemonModal section{width:100%}.LemonModal section:not(:first-child){padding-top:.75rem}.LemonModal section:not(:last-child){padding-bottom:.75rem;border-bottom:1px solid var(--border)}.LemonModal section>:not(:first-child){margin-top:.5rem}.LemonModal h5{line-height:1.5rem;margin:0;color:var(--muted)}",""]),ee.exports=p},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss":function(ee,p,e){var V=e("./node_modules/css-loader/dist/runtime/api.js");p=V(!1),p.push([ee.i,".PayGateMini{display:flex;flex-direction:column;align-items:center;text-align:center;background:var(--bg-side);border-radius:var(--radius);padding:.75rem;font-size:.875rem}.PayGateMini__icon{display:flex;color:var(--warning);font-size:2rem}.PayGateMini__description{margin-top:.75rem;font-weight:600;color:var(--primary-alt)}.PayGateMini__cta{margin-bottom:.75rem}",""]),ee.exports=p}}]);
