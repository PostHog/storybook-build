/*! For license information please see 275.bf5ff708.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DashboardTemplateChooser})),__webpack_require__.d(__webpack_exports__,"b",(function(){return NewDashboardModal_NewDashboardModal}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),LemonModal=__webpack_require__("./frontend/src/lib/lemon-ui/LemonModal/index.ts"),dashboardTemplatesLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),ActionFilter=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),types=__webpack_require__("./frontend/src/types.ts");const dashboardTemplateVariablesLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","dashboard","DashboardTemplateVariablesLogic"]),Object(index_esm.props)({variables:[]}),Object(index_esm.actions)({setVariables:variables=>({variables:variables}),setVariable:(variableName,filterGroup)=>({variable_name:variableName,filterGroup:filterGroup})}),Object(index_esm.reducers)({variables:[[],{setVariables:(_,_ref)=>{let{variables:variables}=_ref;return variables},setVariable:(state,_ref2)=>{let{variable_name:variableName,filterGroup:filterGroup}=_ref2;return state.map((v=>{var _filterGroup$events;return v.name===variableName&&null!=filterGroup&&null!==(_filterGroup$events=filterGroup.events)&&void 0!==_filterGroup$events&&_filterGroup$events.length&&filterGroup.events[0]?{...v,default:filterGroup.events[0]}:v}))}}]}),Object(index_esm.propsChanged)(((_ref3,oldProps)=>{let{actions:actions,props:props}=_ref3;props.variables!==oldProps.variables&&actions.setVariables(props.variables)}))]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function DashboardTemplateVariables(){const{activeDashboardTemplate:activeDashboardTemplate}=Object(index_esm.useValues)(newDashboardLogic.a),theDashboardTemplateVariablesLogic=dashboardTemplateVariablesLogic({variables:(null==activeDashboardTemplate?void 0:activeDashboardTemplate.variables)||[]}),{variables:variables}=Object(index_esm.useValues)(theDashboardTemplateVariablesLogic),{setVariable:setVariable}=Object(index_esm.useActions)(theDashboardTemplateVariablesLogic),FALLBACK_EVENT={id:"$pageview",math:"dau",type:"events"};return Object(jsx_runtime.jsx)("div",{className:"mb-4 DashboardTemplateVariables max-w-md",children:variables.map(((variable,index)=>Object(jsx_runtime.jsxs)("div",{className:"mb-6",children:[Object(jsx_runtime.jsxs)("div",{className:"mb-2",children:[Object(jsx_runtime.jsx)(src.LemonLabel,{showOptional:!variable.required,children:variable.name}),Object(jsx_runtime.jsx)("p",{className:"text-sm text-muted",children:variable.description})]}),Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(ActionFilter.a,{filters:{insight:types.F.TRENDS,events:variable.default?[variable.default]:[FALLBACK_EVENT]},setFilters:filters=>{setVariable(variable.name,filters)},typeKey:"variable_"+variable.name,buttonCopy:"",hideDeleteBtn:!0,hideRename:!0,hideDuplicate:!0,entitiesLimit:1})})]},index)))})}var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),blank_dashboard_hog=__webpack_require__("./frontend/public/blank-dashboard-hog.png"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),NewDashboardModal=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/NewDashboardModal.scss"),NewDashboardModal_default=__webpack_require__.n(NewDashboardModal),options={insert:"head",singleton:!1},FallbackCoverImage=(injectStylesIntoStyleTag_default()(NewDashboardModal_default.a,options),NewDashboardModal_default.a.locals,__webpack_require__("./frontend/src/lib/components/FallbackCoverImage/FallbackCoverImage.tsx")),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js");function TemplateItem(_ref){var _template$dashboard_d;let{template:template,onClick:onClick,index:index,"data-attr":dataAttr}=_ref;const[isHovering,setIsHovering]=Object(react.useState)(!1);return Object(jsx_runtime.jsxs)("div",{className:"cursor-pointer border rounded TemplateItem flex flex-col transition-all",onClick:onClick,onMouseEnter:()=>setIsHovering(!0),onMouseLeave:()=>setIsHovering(!1),"data-attr":dataAttr,children:[Object(jsx_runtime.jsx)("div",{className:Object(clsx_m.default)("transition-all w-full overflow-hidden",isHovering?"h-4 min-h-4":"h-30 min-h-30"),children:Object(jsx_runtime.jsx)(FallbackCoverImage.a,{src:null==template?void 0:template.image_url,alt:"cover photo",index:index,imageClassName:"h-30"})}),Object(jsx_runtime.jsx)("h5",{className:"px-2 mb-1",children:null==template?void 0:template.template_name}),Object(jsx_runtime.jsx)("div",{className:"px-2 py-1 overflow-y-auto grow",children:Object(jsx_runtime.jsx)("p",{className:Object(clsx_m.default)("text-muted-alt text-xs",isHovering?"":"line-clamp-2"),children:null!==(_template$dashboard_d=null==template?void 0:template.dashboard_description)&&void 0!==_template$dashboard_d?_template$dashboard_d:" "})})]})}function DashboardTemplatePreview(){const{activeDashboardTemplate:activeDashboardTemplate,variableSelectModalVisible:variableSelectModalVisible}=Object(index_esm.useValues)(newDashboardLogic.a),{variables:variables}=Object(index_esm.useValues)(dashboardTemplateVariablesLogic),{createDashboardFromTemplate:createDashboardFromTemplate,clearActiveDashboardTemplate:clearActiveDashboardTemplate}=Object(index_esm.useActions)(newDashboardLogic.a);return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(DashboardTemplateVariables,{}),Object(jsx_runtime.jsxs)("div",{className:"flex justify-between my-4",children:[variableSelectModalVisible?Object(jsx_runtime.jsx)("div",{}):Object(jsx_runtime.jsx)(src.LemonButton,{onClick:clearActiveDashboardTemplate,type:"secondary",children:"Back"}),Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{activeDashboardTemplate&&createDashboardFromTemplate(activeDashboardTemplate,variables)},type:"primary",children:"Create"})]})]})}function DashboardTemplateChooser(_ref2){let{scope:scope="global"}=_ref2;const templatesLogic=Object(dashboardTemplatesLogic.a)({scope:scope}),{allTemplates:allTemplates}=Object(index_esm.useValues)(templatesLogic),{isLoading:isLoading,newDashboardModalVisible:newDashboardModalVisible}=Object(index_esm.useValues)(newDashboardLogic.a),{setActiveDashboardTemplate:setActiveDashboardTemplate,createDashboardFromTemplate:createDashboardFromTemplate,addDashboard:addDashboard,setIsLoading:setIsLoading,showVariableSelectModal:showVariableSelectModal}=Object(index_esm.useActions)(newDashboardLogic.a);return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)("div",{className:"DashboardTemplateChooser",children:[Object(jsx_runtime.jsx)(TemplateItem,{template:{template_name:"Blank dashboard",dashboard_description:"Create a blank dashboard",image_url:blank_dashboard_hog.a},onClick:()=>{isLoading||(setIsLoading(!0),addDashboard({name:"New Dashboard",show:!0}))},index:0,"data-attr":"create-dashboard-blank"}),allTemplates.map(((template,index)=>Object(jsx_runtime.jsx)(TemplateItem,{template:template,onClick:()=>{isLoading||(setIsLoading(!0),0===(template.variables||[]).length?(null===template.variables&&(template.variables=[]),createDashboardFromTemplate(template,template.variables||[])):newDashboardModalVisible?setActiveDashboardTemplate(template):showVariableSelectModal(template))},index:index+1,"data-attr":"create-dashboard-from-template"},index)))]})})}function NewDashboardModal_NewDashboardModal(){const builtLogic=Object(index_esm.useMountedLogic)(newDashboardLogic.a),{hideNewDashboardModal:hideNewDashboardModal}=Object(index_esm.useActions)(newDashboardLogic.a),{newDashboardModalVisible:newDashboardModalVisible,activeDashboardTemplate:activeDashboardTemplate}=Object(index_esm.useValues)(newDashboardLogic.a),_dashboardTemplateChooser=builtLogic.props.featureFlagId?Object(jsx_runtime.jsx)(DashboardTemplateChooser,{scope:"feature_flag"}):Object(jsx_runtime.jsx)(DashboardTemplateChooser,{});return Object(jsx_runtime.jsx)(LemonModal.a,{onClose:hideNewDashboardModal,isOpen:newDashboardModalVisible,title:activeDashboardTemplate?"Setup your events":"Create a dashboard",description:activeDashboardTemplate?`The dashboard template you selected requires you to set up ${Object(utils.xb)((activeDashboardTemplate.variables||[]).length,"event","events",!0)}.`:"Choose a template or start with a blank slate",children:Object(jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:activeDashboardTemplate?Object(jsx_runtime.jsx)(DashboardTemplatePreview,{}):_dashboardTemplateChooser})})}try{DashboardTemplateChooser.displayName="DashboardTemplateChooser",DashboardTemplateChooser.__docgenInfo={description:"",displayName:"DashboardTemplateChooser",props:{scope:{defaultValue:{value:"global"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"team"'},{value:'"global"'},{value:'"feature_flag"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/NewDashboardModal.tsx#DashboardTemplateChooser"]={docgenInfo:DashboardTemplateChooser.__docgenInfo,name:"DashboardTemplateChooser",path:"frontend/src/scenes/dashboard/NewDashboardModal.tsx#DashboardTemplateChooser"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DashboardsTableContainer})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DashboardsTable}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/types.ts"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/constants.tsx"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonRow/index.ts"),_DashboardHeader__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./frontend/src/scenes/dashboard/DashboardHeader.tsx"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),scenes_organization_Settings_membersLogic__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function DashboardsTableContainer(){const{dashboardsLoading:dashboardsLoading}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__.a),{dashboards:dashboards,filters:filters}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_2__.b);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(DashboardsTable,{dashboards:dashboards,dashboardsLoading:dashboardsLoading,filters:filters})}function DashboardsTable(_ref){let{dashboards:dashboards,dashboardsLoading:dashboardsLoading,filters:filters,extraActions:extraActions,hideActions:hideActions}=_ref;const{unpinDashboard:unpinDashboard,pinDashboard:pinDashboard}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__.a),{setFilters:setFilters}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_2__.b),{hasAvailableFeature:hasAvailableFeature}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_3__.a),{currentTeam:currentTeam}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.b),{showDuplicateDashboardModal:showDuplicateDashboardModal}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_5__.a),{showDeleteDashboardModal:showDeleteDashboardModal}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_6__.a),{meFirstMembers:meFirstMembers}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_organization_Settings_membersLogic__WEBPACK_IMPORTED_MODULE_24__.a),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref2){let{id:id}=_ref2;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.a,{size:"small",status:"stealth",onClick:pinned?()=>unpinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.a.DashboardsList):()=>pinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.a.DashboardsList),tooltip:pinned?"Unpin dashboard":"Pin dashboard",icon:pinned?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.nc,{}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.oc,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(name,_ref3){let{id:id,description:description,is_shared:is_shared,effective_privilege_level:effective_privilege_level}=_ref3;const isPrimary=id===(null==currentTeam?void 0:currentTeam.primary_dashboard),canEditDashboard=effective_privilege_level>=lib_constants__WEBPACK_IMPORTED_MODULE_11__.f.CanEdit;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"row-name",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_12__.a,{"data-attr":"dashboard-name",to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.a.dashboard(id),children:name||"Untitled"}),is_shared&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.a,{title:"This dashboard is shared publicly.",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.Pc,{className:"ml-1 text-base text-primary"})}),!canEditDashboard&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.a,{title:_DashboardHeader__WEBPACK_IMPORTED_MODULE_22__.a,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.Ob,{className:"ml-1 text-base text-muted"})}),isPrimary&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.a,{title:"The primary dashboard is shown on the project home page.",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.M,{className:"ml-1 text-base text-warning"})})]}),hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_8__.d.DASHBOARD_COLLABORATION)&&description&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{className:"row-description",children:description})]})},sorter:(a,b)=>{var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")}},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_8__.d.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_16__.a,{tags:tags,staticOnly:!0}):null}}]:[],Object(lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_17__.b)(),Object(lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_17__.a)(),hideActions?{}:{width:0,render:function RenderActions(_,_ref4){let{id:id,name:name}=_ref4;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_18__.a,{overlay:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.a,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.a.dashboard(id),onClick:()=>{Object(scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.f)({id:id}).mount(),Object(scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.f)({id:id}).actions.setDashboardMode(null,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.a.DashboardsList)},fullWidth:!0,children:"View"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.a,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.a.dashboard(id),onClick:()=>{Object(scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.f)({id:id}).mount(),Object(scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.f)({id:id}).actions.setDashboardMode(_types__WEBPACK_IMPORTED_MODULE_8__.l.Edit,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.a.DashboardsList)},fullWidth:!0,children:"Edit"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.a,{status:"stealth",onClick:()=>{showDuplicateDashboardModal(id,name)},fullWidth:!0,children:"Duplicate"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_20__.a,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_21__.a,{icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.M,{className:"text-warning"}),fullWidth:!0,status:"warning",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("span",{className:"text-muted",children:["Change the default dashboard",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("br",{}),"from the ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_12__.a,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.a.projectHomepage(),children:"project home page"}),"."]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_20__.a,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.a,{onClick:()=>{showDeleteDashboardModal(id)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap mb-4",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_23__.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:x=>setFilters({search:x}),value:filters.search}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("div",{className:"flex items-center gap-2",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.a,{active:filters.pinned,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({pinned:!filters.pinned}),icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.oc,{}),children:"Pinned"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("div",{className:"flex items-center gap-2",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.a,{active:filters.shared,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({shared:!filters.shared}),icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.Pc,{}),children:"Shared"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex items-center gap-2",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{children:"Created by:"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_23__.LemonSelect,{options:[{value:"All users",label:"All Users"},...meFirstMembers.map((x=>({value:x.user.uuid,label:x.user.first_name})))],size:"small",value:filters.createdBy,onChange:v=>{setFilters({createdBy:v})},dropdownMatchSelectWidth:!1})]}),extraActions]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_7__.a,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:dashboards,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns:columns,loading:dashboardsLoading,defaultSorting:{columnKey:"name",order:1},emptyState:"No dashboards matching your filters!",nouns:["dashboard","dashboards"]})]})}try{DashboardsTable.displayName="DashboardsTable",DashboardsTable.__docgenInfo={description:"",displayName:"DashboardsTable",props:{dashboards:{defaultValue:null,description:"",name:"dashboards",required:!0,type:{name:"DashboardBasicType[]"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"DashboardsFilters"}},dashboardsLoading:{defaultValue:null,description:"",name:"dashboardsLoading",required:!0,type:{name:"boolean"}},extraActions:{defaultValue:null,description:"",name:"extraActions",required:!1,type:{name:"Element | Element[]"}},hideActions:{defaultValue:null,description:"",name:"hideActions",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx#DashboardsTable"]={docgenInfo:DashboardsTable.__docgenInfo,name:"DashboardsTable",path:"frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx#DashboardsTable"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"FeatureFlag",(function(){return FeatureFlag_FeatureFlag}));var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),react_default=__webpack_require__.n(react),lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),row=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/row/index.js"),col=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/col/index.js"),card=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/card/index.js"),skeleton=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/skeleton/index.js"),tabs=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/tabs/index.js"),popconfirm=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/popconfirm/index.js"),es_radio=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/radio/index.js"),input_number=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/input-number/index.js"),es_select=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/select/index.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),PropertyFilters=__webpack_require__("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),LockOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/LockOutlined.js"),featureFlagLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagLogic.ts"),logic_featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),FeatureFlag=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss"),FeatureFlag_default=__webpack_require__.n(FeatureFlag),FeatureFlag_options={insert:"head",singleton:!1},icons=(injectStylesIntoStyleTag_default()(FeatureFlag_default.a,FeatureFlag_options),FeatureFlag_default.a.locals,__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts")),Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),FeatureFlagSnippets=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),es=__webpack_require__("./node_modules/.pnpm/rc-select@13.1.1_react-dom@16.14.0_react@16.14.0/node_modules/rc-select/es/index.js"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function GroupsIntroductionOption(_ref){let{value:value}=_ref;const{groupsAccessStatus:groupsAccessStatus}=Object(index_esm.useValues)(groupsAccessLogic.b);return[groupsAccessLogic.a.HasAccess,groupsAccessLogic.a.HasGroupTypes,groupsAccessLogic.a.NoAccess].includes(groupsAccessStatus)?Object(jsx_runtime.jsxs)(es.c.Option,{value:value,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--side)",color:"var(--muted)"},children:[Object(jsx_runtime.jsx)(LockOutlined.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups –"," ",Object(jsx_runtime.jsx)(Link.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",className:"font-semibold",children:"Learn more"})]},"groups"):null}try{GroupsIntroductionOption.displayName="GroupsIntroductionOption",GroupsIntroductionOption.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:GroupsIntroductionOption.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(__react_docgen_typescript_loader_error){}var userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),types=__webpack_require__("./frontend/src/types.ts"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),Field=__webpack_require__("./frontend/src/lib/forms/Field.tsx"),LemonTextArea=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTextArea/LemonTextArea.tsx"),LemonInput=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),LemonCheckbox=__webpack_require__("./frontend/src/lib/lemon-ui/LemonCheckbox/index.ts"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),kea_router_lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),CopyToClipboard=__webpack_require__("./frontend/src/lib/components/CopyToClipboard.tsx"),Lettermark=__webpack_require__("./frontend/src/lib/lemon-ui/Lettermark/index.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),LemonTag=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),ActivityLog=__webpack_require__("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),humanizeActivity=__webpack_require__("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),featureFlagsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),DefinitionPopover_utils=__webpack_require__("./frontend/src/lib/components/DefinitionPopover/utils.ts"),CompactList=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),RecentInsights=__webpack_require__("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function RecentFeatureFlagInsights(){const{recentInsights:recentInsights,recentInsightsLoading:recentInsightsLoading,featureFlag:featureFlag}=Object(index_esm.useValues)(featureFlagLogic.b);return Object(jsx_runtime.jsx)(CompactList.a,{title:"Insights that use this feature flag",loading:recentInsightsLoading,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:urls.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`})},items:recentInsights.slice(0,5),renderRow:(insight,index)=>Object(jsx_runtime.jsx)(RecentInsights.a,{insight:insight},index)})}var NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),TaxonomicFilter_types=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),ActionFilter=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),ActionFilterRow=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function FeatureFlagAutoRollback(_ref){let{readOnly:readOnly}=_ref;const{featureFlag:featureFlag,sentryIntegrationEnabled:sentryIntegrationEnabled,sentryErrorCount:sentryErrorCount,insightRollingAverages:insightRollingAverages}=Object(index_esm.useValues)(featureFlagLogic.b),{addRollbackCondition:addRollbackCondition,removeRollbackCondition:removeRollbackCondition,loadInsightAtIndex:loadInsightAtIndex}=Object(index_esm.useActions)(featureFlagLogic.b),{user:user}=Object(index_esm.useValues)(userLogic.a);return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{className:"mb-2",children:[Object(jsx_runtime.jsx)("b",{children:"Auto rollback"}),Object(jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"}),!readOnly&&Object(jsx_runtime.jsx)("div",{className:"mt-2",children:"Specify the conditions in which this feature flag will automatically roll back."})]}),readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map(((rollback_condition,index)=>{var _rollback_condition$t,_rollback_condition$t2,_rollback_condition$t3;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&Object(jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),"insight"===rollback_condition.threshold_type&&null!==(_rollback_condition$t=rollback_condition.threshold_metric)&&void 0!==_rollback_condition$t&&null!==(_rollback_condition$t2=_rollback_condition$t.events)&&void 0!==_rollback_condition$t2&&null!==(_rollback_condition$t3=_rollback_condition$t2[0])&&void 0!==_rollback_condition$t3&&_rollback_condition$t3.name?Object(jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(jsx_runtime.jsx)("b",{children:`${Object(utils.i)(rollback_condition.threshold_type)} based rollback`}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:[insightRollingAverages[index]&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"  trailing average is ",insightRollingAverages[index],"."]})," Trigger when trailing average of  ",Object(jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"  is ",rollback_condition.operator&&utils.I[rollback_condition.operator]," ",rollback_condition.threshold]})]}):Object(jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(jsx_runtime.jsx)("b",{children:`${Object(utils.i)(rollback_condition.threshold_type)} based rollback`}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:["Trigger when there is a ",Object(jsx_runtime.jsxs)("b",{children:[rollback_condition.threshold,"%"]})," increase in errors"]})]})]})})),!readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map(((_,index)=>Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&Object(jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(jsx_runtime.jsx)("div",{className:"mb-4 border rounded p-4",children:Object(jsx_runtime.jsxs)(lib.Group,{name:["rollback_conditions",index],children:[Object(jsx_runtime.jsxs)(row.a,{align:"middle",justify:"space-between",children:[Object(jsx_runtime.jsxs)(row.a,{children:[Object(jsx_runtime.jsx)("div",{className:"mt-3 mr-3",children:Object(jsx_runtime.jsx)("b",{children:"Rollback Condition Type"})}),Object(jsx_runtime.jsx)(Field.a,{name:"threshold_type",children:_ref2=>{let{value:value,onChange:onChange}=_ref2;return Object(jsx_runtime.jsx)(src.LemonSelect,{value:value,onChange:onChange,options:[{value:types.bb.Sentry,label:"Error Based"},{value:types.bb.Insight,label:"Metric Based"}]})}})]}),Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.Q,{}),status:"muted",noPadding:!0,onClick:()=>{removeRollbackCondition(index)}})]}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),"insight"==featureFlag.rollback_conditions[index].threshold_type?Object(jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[Object(jsx_runtime.jsx)(Field.a,{name:"threshold_metric",children:_ref3=>{let{value:value,onChange:onChange}=_ref3;return Object(jsx_runtime.jsx)(ActionFilter.a,{filters:value,setFilters:payload=>{onChange({...payload}),loadInsightAtIndex(index,payload)},typeKey:"feature-flag-rollback-trends-"+index,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:ActionFilterRow.b.None,propertiesTaxonomicGroupTypes:[TaxonomicFilter_types.a.EventProperties,TaxonomicFilter_types.a.PersonProperties,TaxonomicFilter_types.a.EventFeatureFlags,TaxonomicFilter_types.a.Cohorts,TaxonomicFilter_types.a.Elements]})}}),Object(jsx_runtime.jsxs)("span",{children:["trailing 7 day average is ",void 0!==insightRollingAverages[index]?Object(jsx_runtime.jsx)("b",{children:insightRollingAverages[index]}):Object(jsx_runtime.jsx)(Spinner.a,{}),". Trigger when trailing average is"]}),Object(jsx_runtime.jsx)(Field.a,{name:"operator",children:_ref4=>{let{value:value,onChange:onChange}=_ref4;return Object(jsx_runtime.jsx)(src.LemonSelect,{value:value,onChange:onChange,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),Object(jsx_runtime.jsx)(Field.a,{name:"threshold",children:Object(jsx_runtime.jsx)(src.LemonInput,{min:0,type:"number"})})]}):sentryIntegrationEnabled?Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:[sentryErrorCount?Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsxs)("b",{children:[Object(utils.Q)(sentryErrorCount)," "]})," sentry errors in the past 24 hours."," "]}):Object(jsx_runtime.jsx)(Spinner.a,{}),Object(jsx_runtime.jsx)("span",{children:" Trigger when there is a"}),Object(jsx_runtime.jsx)(Field.a,{name:"threshold",className:"ml-3 mr-3",children:_ref5=>{let{value:value,onChange:onChange}=_ref5;return Object(jsx_runtime.jsx)(src.LemonInput,{value:value,suffix:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"%"}),type:"number",min:0,onChange:onChange})}}),Object(jsx_runtime.jsx)(Field.a,{name:"operator",className:"mr-3",children:_ref6=>{let{value:value,onChange:onChange}=_ref6;return Object(jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value:value,onChange:onChange})}}),Object(jsx_runtime.jsxs)("span",{children:["to"," ",sentryErrorCount?Object(jsx_runtime.jsx)("b",{children:Object(utils.Q)(Math.round(sentryErrorCount*(1+(featureFlag.rollback_conditions[index].threshold||0)/100)))}):Object(jsx_runtime.jsx)(Spinner.a,{})," ","errors."]}),Object(jsx_runtime.jsx)("div",{})]})}):null!=user&&user.is_staff?Object(jsx_runtime.jsxs)("div",{className:"mt-4",children:[Object(jsx_runtime.jsx)("b",{children:"This feature requires an active Sentry integration."}),Object(jsx_runtime.jsx)("br",{}),Object(jsx_runtime.jsx)(src.Link,{to:urls.a.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",Object(jsx_runtime.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):Object(jsx_runtime.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]}))),!readOnly&&Object(jsx_runtime.jsx)(src.LemonButton,{type:"secondary",onClick:()=>{addRollbackCondition()},children:"Add condition"})]})}try{FeatureFlagAutoRollback.displayName="FeatureFlagAutoRollback",FeatureFlagAutoRollback.__docgenInfo={description:"",displayName:"FeatureFlagAutoRollback",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"]={docgenInfo:FeatureFlagAutoRollback.__docgenInfo,name:"FeatureFlagAutoRollback",path:"frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"})}catch(__react_docgen_typescript_loader_error){}var PropertyFilters_utils=__webpack_require__("./frontend/src/lib/components/PropertyFilters/utils.ts"),featureFlagPermissionsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagPermissionsLogic.tsx"),LemonSelectMultiple=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSelectMultiple/LemonSelectMultiple.tsx"),TitleWithIcon=__webpack_require__("./frontend/src/lib/components/TitleWithIcon.tsx"),permissionsLogic=__webpack_require__("./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx"),rolesLogic=__webpack_require__("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx");function roleLemonSelectOptions(roles){return roles.map((role=>({key:role.id,label:`${role.name}`,labelComponent:Object(jsx_runtime.jsx)("span",{children:Object(jsx_runtime.jsx)("b",{children:`${role.name}`})})})))}function ResourcePermissionModal(_ref){let{title:title,visible:visible,onClose:onClose,rolesToAdd:rolesToAdd,addableRoles:addableRoles,onChange:onChange,addableRolesLoading:addableRolesLoading,onAdd:onAdd,roles:roles,deleteAssociatedRole:deleteAssociatedRole,canEdit:canEdit}=_ref;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(src.LemonModal,{title:title,isOpen:visible,onClose:onClose,children:Object(jsx_runtime.jsx)(ResourcePermission,{resourceType:types.Z.FEATURE_FLAGS,onChange:onChange,rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:addableRolesLoading,onAdd:onAdd,roles:roles,deleteAssociatedRole:deleteAssociatedRole,canEdit:canEdit})})})}function ResourcePermission(_ref2){let{rolesToAdd:rolesToAdd,addableRoles:addableRoles,onChange:onChange,addableRolesLoading:addableRolesLoading,onAdd:onAdd,roles:roles,deleteAssociatedRole:deleteAssociatedRole,resourceType:resourceType,canEdit:canEdit}=_ref2;const{allPermissions:allPermissions,shouldShowPermissionsTable:shouldShowPermissionsTable}=Object(index_esm.useValues)(permissionsLogic.b),{roles:possibleRolesWithAccess}=Object(index_esm.useValues)(rolesLogic.a),resourceLevel=allPermissions.find((permission=>permission.resource===resourceType)),rolesWithAccess=possibleRolesWithAccess.filter((role=>role.feature_flags_access_level===types.a.WRITE)),columns=[{title:"Role",dataIndex:"name",key:"name",render:function RenderRoleName(_,role){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Organization default"===role.name?Object(jsx_runtime.jsx)(TitleWithIcon.a,{icon:Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.Oc,{}),to:`${urls.a.organizationSettings()}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,tooltip:"Organization-wide permissions for roles can be managed in the organization settings.",className:"ml-1"}),children:"All users by default"}):role.name})}},{title:"Access",dataIndex:"feature_flags_access_level",key:"feature_flags_access_level",render:function RenderAccessLevel(_,role){return Object(jsx_runtime.jsxs)("div",{className:"flex flex-row justify-between",children:[role.feature_flags_access_level===types.a.WRITE?"Edit":"View",role.deletable&&Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.Q,{}),onClick:()=>deleteAssociatedRole(role.id),tooltip:"Remove custom role from feature flag",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}}],tableData=[{id:"",name:"Organization default",feature_flags_access_level:resourceLevel?resourceLevel.access_level:types.a.WRITE,created_by:null,created_at:""},...rolesWithAccess,...roles.map((role=>({...role,feature_flags_access_level:types.a.WRITE,deletable:!0})))];return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!shouldShowPermissionsTable&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[resourceLevel&&Object(jsx_runtime.jsx)(OrganizationResourcePermissionLabel,{resourceLevel:resourceLevel}),Object(jsx_runtime.jsx)(OrganizationResourcePermissionRoles,{roles:rolesWithAccess})]}),shouldShowPermissionsTable&&Object(jsx_runtime.jsx)(src.LemonTable,{dataSource:tableData,columns:columns,className:"mt-4"}),!shouldShowPermissionsTable&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h5",{className:"mt-4",children:"Roles"}),roles.length>0?Object(jsx_runtime.jsx)("div",{className:"pb-2 rounded overflow-y-auto",style:{maxHeight:300},children:roles.map((role=>Object(jsx_runtime.jsx)(RoleRow,{role:role,deleteRole:roleId=>deleteAssociatedRole(roleId)},role.id)))}):Object(jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"No roles added yet"})]}),canEdit&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h5",{className:"mt-4",children:"Custom edit roles"}),Object(jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[Object(jsx_runtime.jsx)("div",{className:"flex-1",children:Object(jsx_runtime.jsx)(LemonSelectMultiple.a,{placeholder:"Search for roles to add…",loading:addableRolesLoading,onChange:onChange,value:rolesToAdd,filterOption:!0,mode:"multiple","data-attr":"resource-permissioning-select",options:roleLemonSelectOptions(addableRoles)})}),Object(jsx_runtime.jsx)(src.LemonButton,{type:"primary",loading:!1,disabled:0===rolesToAdd.length,onClick:onAdd,children:"Add"})]})]})]})}function OrganizationResourcePermissionLabel(_ref3){let{resourceLevel:resourceLevel}=_ref3;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(TitleWithIcon.a,{icon:Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.Oc,{}),to:`${urls.a.organizationSettings()}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,className:"ml-1"}),children:Object(jsx_runtime.jsx)("h5",{children:"Organization default"})}),Object(jsx_runtime.jsx)("b",{children:permissionsLogic.a[resourceLevel.access_level]})]})}function OrganizationResourcePermissionRoles(_ref4){let{roles:roles}=_ref4;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h5",{className:"mt-4",children:"Roles with edit access"}),Object(jsx_runtime.jsx)(row.a,{children:roles.map((role=>Object(jsx_runtime.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt mr-2",children:[Object(jsx_runtime.jsx)("b",{children:role.name})," "]},role.id)))})]})}function RoleRow(_ref5){let{role:role,deleteRole:deleteRole}=_ref5;return Object(jsx_runtime.jsxs)("div",{className:"flex items-center justify-between h-8",children:[Object(jsx_runtime.jsx)("b",{children:role.name}),deleteRole&&Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.Q,{}),onClick:()=>deleteRole(role.id),tooltip:"Remove role from permission",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}try{roleLemonSelectOptions.displayName="roleLemonSelectOptions",roleLemonSelectOptions.__docgenInfo={description:"",displayName:"roleLemonSelectOptions",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#roleLemonSelectOptions"]={docgenInfo:roleLemonSelectOptions.__docgenInfo,name:"roleLemonSelectOptions",path:"frontend/src/scenes/ResourcePermissionModal.tsx#roleLemonSelectOptions"})}catch(__react_docgen_typescript_loader_error){}try{ResourcePermissionModal.displayName="ResourcePermissionModal",ResourcePermissionModal.__docgenInfo={description:"",displayName:"ResourcePermissionModal",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},addableRoles:{defaultValue:null,description:"",name:"addableRoles",required:!0,type:{name:"RoleType[]"}},addableRolesLoading:{defaultValue:null,description:"",name:"addableRolesLoading",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: string[]) => void"}},rolesToAdd:{defaultValue:null,description:"",name:"rolesToAdd",required:!0,type:{name:"string[]"}},onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"() => void"}},roles:{defaultValue:null,description:"",name:"roles",required:!0,type:{name:"RoleType[]"}},deleteAssociatedRole:{defaultValue:null,description:"",name:"deleteAssociatedRole",required:!0,type:{name:"(id: string) => void"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"Resource"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermissionModal"]={docgenInfo:ResourcePermissionModal.__docgenInfo,name:"ResourcePermissionModal",path:"frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermissionModal"})}catch(__react_docgen_typescript_loader_error){}try{ResourcePermission.displayName="ResourcePermission",ResourcePermission.__docgenInfo={description:"",displayName:"ResourcePermission",props:{addableRoles:{defaultValue:null,description:"",name:"addableRoles",required:!0,type:{name:"RoleType[]"}},addableRolesLoading:{defaultValue:null,description:"",name:"addableRolesLoading",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: string[]) => void"}},rolesToAdd:{defaultValue:null,description:"",name:"rolesToAdd",required:!0,type:{name:"string[]"}},onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"() => void"}},roles:{defaultValue:null,description:"",name:"roles",required:!0,type:{name:"RoleType[]"}},deleteAssociatedRole:{defaultValue:null,description:"",name:"deleteAssociatedRole",required:!0,type:{name:"(id: string) => void"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"Resource"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermission"]={docgenInfo:ResourcePermission.__docgenInfo,name:"ResourcePermission",path:"frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermission"})}catch(__react_docgen_typescript_loader_error){}var PayGateMini=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),lib_es=__webpack_require__("./node_modules/.pnpm/@monaco-editor+react@4.4.6_monaco-editor@0.39.0_react-dom@16.14.0_react@16.14.0/node_modules/@monaco-editor/react/lib/es/index.js"),JSONEditorInput=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/JSONEditorInput.scss"),JSONEditorInput_default=__webpack_require__.n(JSONEditorInput),JSONEditorInput_options={insert:"head",singleton:!1},lemon_ui_Spinner=(injectStylesIntoStyleTag_default()(JSONEditorInput_default.a,JSONEditorInput_options),JSONEditorInput_default.a.locals,__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/index.ts"));function JSONEditorInput_JSONEditorInput(_ref){let{onChange:onChange,placeholder:placeholder,lineHeight:lineHeight=20,defaultNumberOfLines:defaultNumberOfLines=1,value:value="",readOnly:readOnly=!1}=_ref;const valString=(null==value?void 0:value.toString())||"",_lineHeight=lineHeight,defaultLines=Math.max(defaultNumberOfLines,valString.split(/\r\n|\r|\n/).length)+1,defaultHeight=_lineHeight*defaultLines,[height,setHeight]=Object(react.useState)(defaultHeight),[focused,setFocused]=Object(react.useState)(!1);return Object(jsx_runtime.jsxs)("div",{className:"JsonEditorInput",onFocus:()=>setFocused(!0),onBlur:()=>setFocused(!1),children:[Object(jsx_runtime.jsx)(lib_es.a,{theme:"vs-light",className:"border",language:"json",height:height,value:null==value?void 0:value.toString(),options:{readOnly:readOnly,lineHeight:_lineHeight,minimap:{enabled:!1},scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1},padding:{bottom:0,top:10},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,glyphMargin:!0,folding:!1,lineNumbers:"off",lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",cursorStyle:"block-outline",scrollBeyondLastLine:!1,quickSuggestions:!1,contextmenu:!1},onChange:val=>{(val=>{if(val){const lineCount=val.split(/\r\n|\r|\n/).length,newLineCount=Math.max(lineCount,defaultNumberOfLines)+1;setHeight(_lineHeight*newLineCount)}else setHeight(_lineHeight*(defaultNumberOfLines+1))})(val),null==onChange||onChange(val)},loading:Object(jsx_runtime.jsx)(lemon_ui_Spinner.a,{})}),!focused&&!(null!=value&&value.toString())&&placeholder&&Object(jsx_runtime.jsx)("div",{className:"placeholder",children:Object(jsx_runtime.jsx)("div",{className:"placeholderLabelContainer",children:placeholder})})]})}try{JSONEditorInput_JSONEditorInput.displayName="JSONEditorInput",JSONEditorInput_JSONEditorInput.__docgenInfo={description:"",displayName:"JSONEditorInput",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((val: string) => void)"}},lineHeight:{defaultValue:{value:"20"},description:"",name:"lineHeight",required:!1,type:{name:"number"}},defaultNumberOfLines:{defaultValue:{value:"1"},description:"",name:"defaultNumberOfLines",required:!1,type:{name:"number"}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"JsonType"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/JSONEditorInput.tsx#JSONEditorInput"]={docgenInfo:JSONEditorInput_JSONEditorInput.__docgenInfo,name:"JSONEditorInput",path:"frontend/src/scenes/feature-flags/JSONEditorInput.tsx#JSONEditorInput"})}catch(__react_docgen_typescript_loader_error){}var ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),tagsModel=__webpack_require__("./frontend/src/models/tagsModel.ts"),Dashboard=__webpack_require__("./frontend/src/scenes/dashboard/Dashboard.tsx"),dashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),EmptyDashboardComponent=__webpack_require__("./frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx"),FeatureFlagInstructions=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx");function FeatureFlagCodeExample(_ref){let{featureFlag:featureFlag}=_ref;return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("h3",{className:"l3",children:"How to implement"}),Object(jsx_runtime.jsx)(FeatureFlagInstructions.b,{featureFlag:featureFlag})]})}try{FeatureFlagCodeExample.displayName="FeatureFlagCodeExample",FeatureFlagCodeExample.__docgenInfo={description:"",displayName:"FeatureFlagCodeExample",props:{featureFlag:{defaultValue:null,description:"",name:"featureFlag",required:!0,type:{name:"FeatureFlagType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagCodeExample.tsx#FeatureFlagCodeExample"]={docgenInfo:FeatureFlagCodeExample.__docgenInfo,name:"FeatureFlagCodeExample",path:"frontend/src/scenes/feature-flags/FeatureFlagCodeExample.tsx#FeatureFlagCodeExample"})}catch(__react_docgen_typescript_loader_error){}var billingLogic=__webpack_require__("./frontend/src/scenes/billing/billingLogic.ts"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),NewDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),DashboardsTable=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx"),dashboardsLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),dashboardsModel=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts");function AnalysisTab(_ref){let{featureFlag:featureFlag}=_ref;return Object(jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:Object(jsx_runtime.jsx)(index_esm.BindLogic,{logic:newDashboardLogic.a,props:{featureFlagId:featureFlag.id},children:featureFlag.analytics_dashboards&&featureFlag.analytics_dashboards.length>0?Object(jsx_runtime.jsx)(FeatureFlagDashboardsTableContainer,{}):featureFlag.id&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(NewDashboardModal.a,{scope:"feature_flag"}),Object(jsx_runtime.jsx)(NewDashboardModal.b,{})]})})})}function FeatureFlagDashboardsTableContainer(){const{filteredDashboards:filteredDashboards}=Object(index_esm.useValues)(featureFlagLogic.b),{showNewDashboardModal:showNewDashboardModal}=Object(index_esm.useActions)(newDashboardLogic.a),{dashboardsLoading:dashboardsLoading}=Object(index_esm.useValues)(dashboardsModel.a),{filters:filters}=Object(index_esm.useValues)(dashboardsLogic.b);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(DashboardsTable.a,{extraActions:Object(jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:Object(jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:()=>{showNewDashboardModal()},children:"New Dashboard"})}),hideActions:!0,dashboards:filteredDashboards,dashboardsLoading:dashboardsLoading,filters:filters}),Object(jsx_runtime.jsx)(NewDashboardModal.b,{})]})}try{AnalysisTab.displayName="AnalysisTab",AnalysisTab.__docgenInfo={description:"",displayName:"AnalysisTab",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},featureFlag:{defaultValue:null,description:"",name:"featureFlag",required:!0,type:{name:"FeatureFlagType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagAnalysisTab.tsx#AnalysisTab"]={docgenInfo:AnalysisTab.__docgenInfo,name:"AnalysisTab",path:"frontend/src/scenes/feature-flags/FeatureFlagAnalysisTab.tsx#AnalysisTab"})}catch(__react_docgen_typescript_loader_error){}var schema=__webpack_require__("./frontend/src/queries/schema.ts"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),DataTable_utils=__webpack_require__("./frontend/src/queries/nodes/DataTable/utils.ts"),PostHogContext=(__webpack_require__("./node_modules/.pnpm/posthog-js@1.67.1/node_modules/posthog-js/dist/es.js"),Object(react.createContext)({client:void 0}));var usePostHog=function(){return Object(react.useContext)(PostHogContext).client};var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function PostHogFeature(_a){var flag=_a.flag,match=_a.match,children=_a.children,fallback=_a.fallback,visibilityObserverOptions=_a.visibilityObserverOptions,props=__rest(_a,["flag","match","children","fallback","visibilityObserverOptions"]),payload=function useFeatureFlagPayload(flag){var client=usePostHog(),_a=Object(react.useState)(),featureFlagPayload=_a[0],setFeatureFlagPayload=_a[1];return Object(react.useEffect)((function(){if(client)return client.onFeatureFlags((function(){setFeatureFlagPayload(client.getFeatureFlagPayload(flag))}))}),[client,flag]),featureFlagPayload}(flag),variant=function useFeatureFlagVariantKey(flag){var client=usePostHog(),_a=Object(react.useState)(),featureFlagVariantKey=_a[0],setFeatureFlagVariantKey=_a[1];return Object(react.useEffect)((function(){if(client)return client.onFeatureFlags((function(){setFeatureFlagVariantKey(client.getFeatureFlag(flag))}))}),[client,flag]),featureFlagVariantKey}(flag);if(void 0===match||variant===match){var childNode="function"==typeof children?children(payload):children;return react_default.a.createElement(VisibilityAndClickTracker,__assign({flag:flag,options:visibilityObserverOptions},props),childNode)}return react_default.a.createElement(react_default.a.Fragment,null,fallback)}function VisibilityAndClickTracker(_a){var flag=_a.flag,children=_a.children,options=_a.options,props=__rest(_a,["flag","children","options"]),ref=Object(react.useRef)(null),posthog=usePostHog(),visibilityTrackedRef=Object(react.useRef)(!1),clickTrackedRef=Object(react.useRef)(!1),cachedOnClick=Object(react.useCallback)((function(){clickTrackedRef.current||(!function trackClicks(flag,posthog){var _a;null==posthog||posthog.capture("$feature_interaction",{feature_flag:flag,$set:(_a={},_a["$feature_interaction/"+flag]=!0,_a)})}(flag,posthog),clickTrackedRef.current=!0)}),[flag,posthog]);return Object(react.useEffect)((function(){if(null!==ref.current){var observer=new IntersectionObserver((function(_a){return function(entry){!visibilityTrackedRef.current&&entry.isIntersecting&&(function trackVisibility(flag,posthog){null==posthog||posthog.capture("$feature_view",{feature_flag:flag})}(flag,posthog),visibilityTrackedRef.current=!0)}(_a[0])}),__assign({threshold:.1},options));return observer.observe(ref.current),function(){return observer.disconnect()}}}),[flag,options,posthog,ref]),react_default.a.createElement("div",__assign({ref:ref},props,{onClick:cachedOnClick}),children)}const scene={component:FeatureFlag_FeatureFlag,logic:featureFlagLogic.b,paramsToProps:_ref=>{let{params:{id:id}}=_ref;return{id:id&&"new"!==id?parseInt(id):"new"}}};function focusVariantKeyField(index){setTimeout((()=>{var _document$querySelect;return null===(_document$querySelect=document.querySelector(`.variant-form-list input[data-key-index="${index}"]`))||void 0===_document$querySelect?void 0:_document$querySelect.focus()}),50)}function FeatureFlag_FeatureFlag(){var _featureFlag$experime,_featureFlag$features;let{id:id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{props:props,featureFlag:featureFlag,featureFlagLoading:featureFlagLoading,featureFlagMissing:featureFlagMissing,isEditingFlag:isEditingFlag}=Object(index_esm.useValues)(featureFlagLogic.b),{featureFlags:featureFlags}=Object(index_esm.useValues)(logic_featureFlagLogic.a),{deleteFeatureFlag:deleteFeatureFlag,editFeatureFlag:editFeatureFlag,loadFeatureFlag:loadFeatureFlag,triggerFeatureFlagUpdate:triggerFeatureFlagUpdate}=Object(index_esm.useActions)(featureFlagLogic.b),{addableRoles:addableRoles,unfilteredAddableRolesLoading:unfilteredAddableRolesLoading,rolesToAdd:rolesToAdd,derivedRoles:derivedRoles}=Object(index_esm.useValues)(Object(featureFlagPermissionsLogic.a)({flagId:featureFlag.id})),{setRolesToAdd:setRolesToAdd,addAssociatedRoles:addAssociatedRoles,deleteAssociatedRole:deleteAssociatedRole}=Object(index_esm.useActions)(Object(featureFlagPermissionsLogic.a)({flagId:featureFlag.id})),{tags:tags}=Object(index_esm.useValues)(tagsModel.a),{hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),[hasKeyChanged,setHasKeyChanged]=Object(react.useState)(!1),[activeTab,setActiveTab]=Object(react.useState)(featureFlagsLogic.a.OVERVIEW),[advancedSettingsExpanded,setAdvancedSettingsExpanded]=Object(react.useState)(!1),isNewFeatureFlag="new"===id||void 0===id;return featureFlagMissing?Object(jsx_runtime.jsx)(NotFound.a,{object:"feature flag"}):featureFlagLoading?Object(jsx_runtime.jsx)(Spinner.b,{}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)("div",{className:"feature-flag",children:isNewFeatureFlag||isEditingFlag?Object(jsx_runtime.jsxs)(lib.Form,{logic:featureFlagLogic.b,props:props,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:isNewFeatureFlag?"New feature flag":featureFlag.key||"Untitled",buttons:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.a.featureFlags())},disabled:featureFlagLoading,children:"Cancel"}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:featureFlagLoading,disabled:featureFlagLoading,children:"Save"})]})}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),featureFlag.experiment_set&&(null===(_featureFlag$experime=featureFlag.experiment_set)||void 0===_featureFlag$experime?void 0:_featureFlag$experime.length)>0&&Object(jsx_runtime.jsxs)(LemonBanner.a,{type:"warning",children:["This feature flag is linked to an experiment. It's recommended to only make changes to this flag"," ",Object(jsx_runtime.jsx)(Link.a,{to:urls.a.experiment(featureFlag.experiment_set[0]),children:"using the experiment creation screen."})]}),Object(jsx_runtime.jsx)(row.a,{gutter:16,style:{marginBottom:32},children:Object(jsx_runtime.jsxs)(col.a,{span:12,className:"space-y-4",children:[Object(jsx_runtime.jsx)(Field.a,{name:"key",label:"Key",help:hasKeyChanged&&"new"!==id?Object(jsx_runtime.jsxs)("span",{className:"text-warning",children:[Object(jsx_runtime.jsx)("b",{children:"Warning! "}),"Changing this key will",Object(jsx_runtime.jsxs)("a",{href:`https://posthog.com/docs/features/feature-flags${FeatureFlagSnippets.l}#feature-flag-persistence`,target:"_blank",rel:"noopener",children:[" ","affect the persistence of your flag ",Object(jsx_runtime.jsx)(icons.ec,{})]})]}):void 0,children:_ref2=>{let{value:value,onChange:onChange}=_ref2;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonInput.a,{value:value,onChange:v=>{v!==value&&setHasKeyChanged(!0),onChange(v)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),Object(jsx_runtime.jsx)("span",{style:{fontSize:13},className:"text-muted",children:"Feature flag keys must be unique"})]})}}),Object(jsx_runtime.jsx)(Field.a,{name:"name",label:"Description",children:Object(jsx_runtime.jsx)(LemonTextArea.a,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:featureFlag.name||""})}),hasAvailableFeature(types.d.TAGGING)&&Object(jsx_runtime.jsx)(Field.a,{name:"tags",label:"Tags",children:_ref3=>{let{value:value,onChange:onChange}=_ref3;return Object(jsx_runtime.jsx)(ObjectTags.a,{tags:value,onChange:(_,tags)=>onChange(tags),saving:featureFlagLoading,tagsAvailable:tags.filter((tag=>{var _featureFlag$tags;return!(null!==(_featureFlag$tags=featureFlag.tags)&&void 0!==_featureFlag$tags&&_featureFlag$tags.includes(tag))})),className:"insight-metadata-tags"})}}),Object(jsx_runtime.jsx)(Field.a,{name:"active",children:_ref4=>{let{value:value,onChange:onChange}=_ref4;return Object(jsx_runtime.jsx)("div",{className:"border rounded p-4",children:Object(jsx_runtime.jsx)(LemonCheckbox.a,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:()=>onChange(!value),checked:value})})}}),Object(jsx_runtime.jsx)(Field.a,{name:"ensure_experience_continuity",children:_ref5=>{let{value:value,onChange:onChange}=_ref5;return Object(jsx_runtime.jsxs)("div",{className:"border rounded p-4",children:[Object(jsx_runtime.jsx)(LemonCheckbox.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:()=>onChange(!value),fullWidth:!0,checked:value}),Object(jsx_runtime.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",Object(jsx_runtime.jsxs)(Link.a,{to:"https://posthog.com/manual/feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:["Learn more ",Object(jsx_runtime.jsx)(icons.ec,{})]})]})]})}})]})}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(FeatureFlagRollout,{}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(FeatureFlagReleaseConditions,{}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(FeatureFlagCodeExample,{featureFlag:featureFlag}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),isNewFeatureFlag&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(LemonButton.a,{fullWidth:!0,status:"default-dark",onClick:()=>setAdvancedSettingsExpanded(!advancedSettingsExpanded),sideIcon:advancedSettingsExpanded?Object(jsx_runtime.jsx)(icons.rd,{}):Object(jsx_runtime.jsx)(icons.sd,{}),children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("h3",{className:"l4 mt-2",children:"Advanced settings"}),Object(jsx_runtime.jsx)("div",{className:"text-muted mb-2 font-medium",children:"Define who can modify this flag."})]})})}),advancedSettingsExpanded&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlags[constants.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(jsx_runtime.jsx)(FeatureFlagAutoRollback,{}),featureFlags[constants.i.ROLE_BASED_ACCESS]&&Object(jsx_runtime.jsx)(card.a,{title:"Permissions",className:"mb-4",children:Object(jsx_runtime.jsx)(PayGateMini.a,{feature:types.d.ROLE_BASED_ACCESS,children:Object(jsx_runtime.jsx)(ResourcePermission,{resourceType:types.Z.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{})]}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.a.featureFlags())},disabled:featureFlagLoading,children:"Cancel"}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:featureFlagLoading,disabled:featureFlagLoading,children:"Save"})]})]}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlagLoading?Object(jsx_runtime.jsx)(skeleton.a,{active:!0}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(PageHeader.a,{notebookProps:{href:urls.a.featureFlag(id)},title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[featureFlag.key||"Untitled",Object(jsx_runtime.jsx)(CopyToClipboard.a,{explicitValue:featureFlag.key,iconStyle:{color:"var(--muted-alt)"}}),Object(jsx_runtime.jsx)("div",{className:"flex",children:featureFlag.active?Object(jsx_runtime.jsx)(LemonTag.a,{type:"success",className:"uppercase",children:"Enabled"}):Object(jsx_runtime.jsx)(LemonTag.a,{type:"default",className:"uppercase",children:"Disabled"})})]}),description:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlag.name?Object(jsx_runtime.jsx)("span",{style:{fontStyle:"normal"},children:featureFlag.name}):"There is no description for this feature flag."}),caption:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(null==featureFlag?void 0:featureFlag.tags)&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlag.can_edit?Object(jsx_runtime.jsx)(ObjectTags.a,{tags:featureFlag.tags,onChange:(_,tags)=>{triggerFeatureFlagUpdate({tags:tags})},saving:featureFlagLoading,tagsAvailable:tags.filter((tag=>{var _featureFlag$tags2;return!(null!==(_featureFlag$tags2=featureFlag.tags)&&void 0!==_featureFlag$tags2&&_featureFlag$tags2.includes(tag))})),className:"insight-metadata-tags"}):featureFlag.tags.length?Object(jsx_runtime.jsx)(ObjectTags.a,{tags:featureFlag.tags,saving:featureFlagLoading,staticOnly:!0,className:"insight-metadata-tags"}):null})}),buttons:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[featureFlags[constants.i.RECORDINGS_ON_FEATURE_FLAGS]&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)(LemonButton.a,{to:urls.a.replay(types.Y.Recent,{events:Object(featureFlagLogic.a)(featureFlag.key).events}),type:"secondary",children:["View Recordings",Object(jsx_runtime.jsx)(LemonTag.a,{type:"warning",className:"uppercase ml-2 mr-2",children:"Beta"})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{vertical:!0})]}),Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"delete-feature-flag",status:"danger",type:"secondary",onClick:()=>{deleteFeatureFlag(featureFlag)},disabledReason:featureFlagLoading?"Loading...":featureFlag.can_edit?((null===(_featureFlag$features=featureFlag.features)||void 0===_featureFlag$features?void 0:_featureFlag$features.length)||0)>0?"This feature flag is in use with an early access feature. Delete the early access feature to delete this flag":null:"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",children:"Delete feature flag"}),Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"edit-feature-flag",type:"secondary",tooltip:featureFlags[constants.i.ROLE_BASED_ACCESS]&&!featureFlag.can_edit&&"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",onClick:()=>{editFeatureFlag(!0)},disabled:featureFlagLoading||!featureFlag.can_edit,children:"Edit"})]})})}),Object(jsx_runtime.jsxs)(tabs.a,{activeKey:activeTab,destroyInactiveTabPane:!0,onChange:t=>setActiveTab(t),children:[Object(jsx_runtime.jsxs)(tabs.a.TabPane,{tab:"Overview",children:[Object(jsx_runtime.jsxs)(row.a,{children:[Object(jsx_runtime.jsxs)(col.a,{span:13,children:[Object(jsx_runtime.jsx)(FeatureFlagRollout,{readOnly:!0}),featureFlag.filters.super_groups&&Object(jsx_runtime.jsx)(FeatureFlagReleaseConditions,{readOnly:!0,isSuper:!0}),Object(jsx_runtime.jsx)(FeatureFlagReleaseConditions,{readOnly:!0}),featureFlags[constants.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(jsx_runtime.jsx)(FeatureFlagAutoRollback,{readOnly:!0})]}),Object(jsx_runtime.jsxs)(col.a,{span:11,className:"pl-4",children:[Object(jsx_runtime.jsx)(RecentFeatureFlagInsights,{}),Object(jsx_runtime.jsx)("div",{className:"my-4"})]})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"mb-4"}),Object(jsx_runtime.jsx)(FeatureFlagCodeExample,{featureFlag:featureFlag})]},"overview"),featureFlag.key&&id&&Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:Object(jsx_runtime.jsx)("div",{children:"Usage"}),children:Object(jsx_runtime.jsx)(UsageTab,{id:id,featureFlag:featureFlag})},"usage"),featureFlags[constants.i.FF_DASHBOARD_TEMPLATES]&&featureFlag.key&&id&&Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:Object(jsx_runtime.jsxs)("div",{className:"flex flex-row",children:[Object(jsx_runtime.jsx)("div",{children:"Analysis"}),Object(jsx_runtime.jsxs)(LemonTag.a,{className:"ml-1 float-right uppercase",type:"warning",children:[" ","Beta"]})]}),children:Object(jsx_runtime.jsx)(PostHogFeature,{flag:constants.i.FF_DASHBOARD_TEMPLATES,match:!0,children:Object(jsx_runtime.jsx)(AnalysisTab,{id:id,featureFlag:featureFlag})})},"analysis"),featureFlag.id&&Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:"History",children:Object(jsx_runtime.jsx)(ActivityLog.a,{scope:humanizeActivity.a.FEATURE_FLAG,id:featureFlag.id})},"history"),featureFlags[constants.i.ROLE_BASED_ACCESS]&&featureFlag.can_edit&&Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:"Permissions",children:Object(jsx_runtime.jsx)(PayGateMini.a,{feature:types.d.ROLE_BASED_ACCESS,children:Object(jsx_runtime.jsx)(ResourcePermission,{resourceType:types.Z.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})},"permissions")]})]})})})})}function UsageTab(_ref6){let{featureFlag:featureFlag}=_ref6;const{key:featureFlagKey,usage_dashboard:dashboardId}=featureFlag,{generateUsageDashboard:generateUsageDashboard}=Object(index_esm.useActions)(featureFlagLogic.b),{featureFlagLoading:featureFlagLoading}=Object(index_esm.useValues)(featureFlagLogic.b),{receivedErrorsFromAPI:receivedErrorsFromAPI}=Object(index_esm.useValues)(Object(dashboardLogic.f)({id:dashboardId,placement:types.m.FeatureFlag})),connectedDashboardExists=dashboardId&&!receivedErrorsFromAPI,propertyFilter=[{key:"$feature_flag",type:types.S.Event,value:featureFlagKey,operator:types.U.Exact}];return Object(jsx_runtime.jsxs)("div",{children:[connectedDashboardExists?Object(jsx_runtime.jsx)(Dashboard.Dashboard,{id:dashboardId.toString(),placement:types.m.FeatureFlag}):Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("b",{children:"Dashboard"}),Object(jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"There is currently no connected dashboard to this feature flag. If there was previously a connected dashboard, it may have been deleted."}),featureFlagLoading?Object(jsx_runtime.jsx)(EmptyDashboardComponent.a,{loading:!0,canEdit:!1}):Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary",onClick:()=>generateUsageDashboard(),children:"Generate Usage Dashboard"})]}),Object(jsx_runtime.jsxs)("div",{className:"mt-4 mb-4",children:[Object(jsx_runtime.jsx)("b",{children:"Log"}),Object(jsx_runtime.jsx)("div",{className:"text-muted",children:`Feature flag calls for "${featureFlagKey}" will appear here`})]}),Object(jsx_runtime.jsx)(Query.a,{query:{kind:schema.a.DataTableNode,source:{kind:schema.a.EventsQuery,select:[...Object(DataTable_utils.a)(schema.a.EventsQuery),featureFlag.filters.multivariate?"properties.$feature_flag_response":"if(properties.$feature_flag_response == 1, 'true', 'false') -- Feature Flag Response"],event:"$feature_flag_called",properties:propertyFilter,after:"-30d"},full:!1,showDateRange:!0}})]})}function FeatureFlagRollout(_ref7){var _featureFlag$filters$2,_featureFlag$filters$3;let{readOnly:readOnly}=_ref7;const{multivariateEnabled:multivariateEnabled,variants:variants,areVariantRolloutsValid:areVariantRolloutsValid,featureFlagLoading:featureFlagLoading,variantRolloutSum:variantRolloutSum,nonEmptyVariants:nonEmptyVariants,aggregationTargetName:aggregationTargetName,featureFlag:featureFlag}=Object(index_esm.useValues)(featureFlagLogic.b),{distributeVariantsEqually:distributeVariantsEqually,addVariant:addVariant,removeVariant:removeVariant,setMultivariateEnabled:setMultivariateEnabled}=Object(index_esm.useActions)(featureFlagLogic.b),[showVariantDiscardWarning,setShowVariantDiscardWarning]=Object(react.useState)(!1),{hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),{upgradeLink:upgradeLink}=Object(index_esm.useValues)(billingLogic.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[readOnly?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(jsx_runtime.jsx)("span",{className:"card-secondary",children:"Type"}),Object(jsx_runtime.jsx)("span",{children:featureFlag.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),Object(jsx_runtime.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),Object(jsx_runtime.jsxs)("span",{children:["This flag"," ",Object(jsx_runtime.jsxs)("b",{children:[featureFlag.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),featureFlag.filters.multivariate&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h3",{className:"l3",children:"Variant keys"}),Object(jsx_runtime.jsxs)("div",{className:"border rounded p-4 mb-4",children:[Object(jsx_runtime.jsxs)(row.a,{gutter:16,className:"font-semibold",children:[Object(jsx_runtime.jsx)(col.a,{span:6,children:"Key"}),Object(jsx_runtime.jsx)(col.a,{span:6,children:"Description"}),Object(jsx_runtime.jsx)(col.a,{span:9,children:"Payload"}),Object(jsx_runtime.jsx)(col.a,{span:3,children:"Rollout"})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),variants.map(((variant,index)=>{var _featureFlag$filters$;return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)(row.a,{gutter:16,children:[Object(jsx_runtime.jsxs)(col.a,{span:6,children:[Object(jsx_runtime.jsx)(Lettermark.a,{name:utils.c[index],color:Lettermark.b.Gray}),Object(jsx_runtime.jsx)(CopyToClipboard.a,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:variant.key})]}),Object(jsx_runtime.jsx)(col.a,{span:6,children:Object(jsx_runtime.jsx)("span",{className:variant.name?"":"text-muted",children:variant.name||"There is no description for this variant key"})}),Object(jsx_runtime.jsx)(col.a,{span:9,children:null!==(_featureFlag$filters$=featureFlag.filters.payloads)&&void 0!==_featureFlag$filters$&&_featureFlag$filters$[index]?Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:!0,value:featureFlag.filters.payloads[index]}):Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"No payload associated with this variant"})}),Object(jsx_runtime.jsxs)(col.a,{span:3,children:[variant.rollout_percentage,"%"]})]}),index!==variants.length-1&&Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"})]},index)}))]})]})]}):Object(jsx_runtime.jsxs)("div",{className:"mb-8",children:[Object(jsx_runtime.jsx)("h3",{className:"l3",children:"Served value"}),Object(jsx_runtime.jsx)("div",{className:"mb-2",children:Object(jsx_runtime.jsx)(popconfirm.a,{placement:"top",title:"Change value type? The variants below will be lost.",disabled:featureFlagLoading,visible:showVariantDiscardWarning,onConfirm:()=>{setMultivariateEnabled(!1),setShowVariantDiscardWarning(!1)},onCancel:()=>setShowVariantDiscardWarning(!1),okText:"OK",cancelText:"Cancel",children:Object(jsx_runtime.jsx)(es_radio.a.Group,{options:[{label:"Release toggle (boolean)",value:!1},{label:Object(jsx_runtime.jsx)(Tooltip.a,{title:hasAvailableFeature(types.d.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:Object(jsx_runtime.jsxs)("div",{children:[!hasAvailableFeature(types.d.MULTIVARIATE_FLAGS)&&Object(jsx_runtime.jsx)(Link.a,{to:upgradeLink,target:"_blank",children:Object(jsx_runtime.jsx)(LockOutlined.a,{style:{marginRight:4,color:"var(--warning)"}})}),"Multiple variants with rollout percentages (A/B test)"]})}),value:!0,disabled:!hasAvailableFeature(types.d.MULTIVARIATE_FLAGS)}],onChange:e=>{const{value:value}=e.target;!1===value&&nonEmptyVariants.length?setShowVariantDiscardWarning(!0):(setMultivariateEnabled(value),focusVariantKeyField(0))},value:multivariateEnabled,optionType:"button"})})}),Object(jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:[Object(utils.i)(aggregationTargetName)," will be served"," ",multivariateEnabled?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):Object(jsx_runtime.jsx)("strong",{children:Object(jsx_runtime.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),!multivariateEnabled&&Object(jsx_runtime.jsxs)("div",{className:"mb-6",children:[Object(jsx_runtime.jsx)("h3",{className:"l3",children:"Payload"}),readOnly?null!==(_featureFlag$filters$2=featureFlag.filters.payloads)&&void 0!==_featureFlag$filters$2&&_featureFlag$filters$2.true?Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,value:null===(_featureFlag$filters$3=featureFlag.filters.payloads)||void 0===_featureFlag$filters$3?void 0:_featureFlag$filters$3.true}):Object(jsx_runtime.jsx)("span",{children:"No payload associated with this flag"}):Object(jsx_runtime.jsx)(row.a,{gutter:16,children:Object(jsx_runtime.jsxs)(col.a,{span:12,children:[Object(jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:["Specify a payload to be returned when the served value is"," ",Object(jsx_runtime.jsx)("strong",{children:Object(jsx_runtime.jsx)("code",{children:"true"})})]}),Object(jsx_runtime.jsx)(lib.Group,{name:["filters","payloads"],children:Object(jsx_runtime.jsx)(Field.a,{name:"true",children:Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,placeholder:'Examples: "A string", 2500, {"key": "value"}'})})})]})})]}),!readOnly&&multivariateEnabled&&Object(jsx_runtime.jsxs)("div",{className:"feature-flag-variants",children:[Object(jsx_runtime.jsx)("h3",{className:"l4",children:"Variant keys"}),Object(jsx_runtime.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),Object(jsx_runtime.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(jsx_runtime.jsxs)(row.a,{gutter:8,className:"label-row",children:[Object(jsx_runtime.jsx)(col.a,{span:1}),Object(jsx_runtime.jsx)(col.a,{span:4,children:"Variant key"}),Object(jsx_runtime.jsx)(col.a,{span:6,children:"Description"}),Object(jsx_runtime.jsx)(col.a,{span:8,children:Object(jsx_runtime.jsxs)("div",{style:{display:"flex",flexDirection:"column",fontWeight:"normal"},children:[Object(jsx_runtime.jsx)("b",{children:"Payload"}),Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"Specify return payload when the variant key matches"})]})}),Object(jsx_runtime.jsxs)(col.a,{span:4,children:["Rollout",Object(jsx_runtime.jsx)(LemonButton.a,{type:"tertiary",onClick:distributeVariantsEqually,children:"(Redistribute)"})]})]}),variants.map(((_,index)=>Object(jsx_runtime.jsx)(lib.Group,{name:"filters",children:Object(jsx_runtime.jsxs)(row.a,{gutter:8,align:"middle",children:[Object(jsx_runtime.jsx)(col.a,{span:1,children:Object(jsx_runtime.jsx)(Lettermark.a,{name:utils.c[index],color:Lettermark.b.Gray})}),Object(jsx_runtime.jsx)(col.a,{span:4,children:Object(jsx_runtime.jsx)(Field.a,{name:["multivariate","variants",index,"key"],children:Object(jsx_runtime.jsx)(LemonInput.a,{"data-attr":"feature-flag-variant-key","data-key-index":index.toString(),className:"ph-ignore-input",placeholder:`example-variant-${index+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(jsx_runtime.jsx)(col.a,{span:6,children:Object(jsx_runtime.jsx)(Field.a,{name:["multivariate","variants",index,"name"],children:Object(jsx_runtime.jsx)(LemonInput.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(jsx_runtime.jsx)(col.a,{span:8,children:Object(jsx_runtime.jsx)(Field.a,{name:["payloads",index],children:_ref8=>{let{value:value,onChange:onChange}=_ref8;return Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{onChange:onChange,value:value,placeholder:'{"key": "value"}'})}})}),Object(jsx_runtime.jsx)(col.a,{span:3,children:Object(jsx_runtime.jsx)(Field.a,{name:["multivariate","variants",index,"rollout_percentage"],children:_ref9=>{let{value:value,onChange:onChange}=_ref9;return Object(jsx_runtime.jsx)(LemonInput.a,{type:"number",min:0,max:100,value:value,onChange:changedValue=>{if(null!=changedValue){const valueInt=parseInt(changedValue.toString());isNaN(valueInt)||onChange(valueInt)}}})}})}),Object(jsx_runtime.jsx)(col.a,{span:2,children:Object(jsx_runtime.jsx)(row.a,{children:variants.length>1&&Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.Q,{}),status:"primary-alt","data-attr":`delete-prop-filter-${index}`,noPadding:!0,onClick:()=>removeVariant(index)})})})]})},index))),variants.length>0&&!areVariantRolloutsValid&&Object(jsx_runtime.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",variantRolloutSum,")."]}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",onClick:()=>{const newIndex=variants.length;addVariant(),focusVariantKeyField(newIndex)},icon:Object(jsx_runtime.jsx)(icons.rc,{}),center:!0,children:"Add variant"})]})]})]})}function FeatureFlagReleaseConditions(_ref10){let{readOnly:readOnly,isSuper:isSuper}=_ref10;const{showGroupsOptions:showGroupsOptions,aggregationLabel:aggregationLabel}=Object(index_esm.useValues)(groupsModel.a),{aggregationTargetName:aggregationTargetName,featureFlag:featureFlag,groupTypes:groupTypes,taxonomicGroupTypes:taxonomicGroupTypes,nonEmptyVariants:nonEmptyVariants,propertySelectErrors:propertySelectErrors,computeBlastRadiusPercentage:computeBlastRadiusPercentage,affectedUsers:affectedUsers,totalUsers:totalUsers}=Object(index_esm.useValues)(featureFlagLogic.b),{setAggregationGroupTypeIndex:setAggregationGroupTypeIndex,updateConditionSet:updateConditionSet,duplicateConditionSet:duplicateConditionSet,removeConditionSet:removeConditionSet,addConditionSet:addConditionSet}=Object(index_esm.useActions)(featureFlagLogic.b),{cohortsById:cohortsById}=Object(index_esm.useValues)(cohortsModel.a),{featureFlags:featureFlags}=Object(index_esm.useValues)(logic_featureFlagLogic.a),_filter_groups=isSuper?featureFlag.filters.super_groups||[]:featureFlag.filters.groups,matchByGroupsIntroductionOption=GroupsIntroductionOption({value:-2}),isEarlyAccessFeatureCondition=group=>{var _featureFlag$features2,_featureFlag$features3;return!!(null!==(_featureFlag$features2=featureFlag.features)&&void 0!==_featureFlag$features2&&_featureFlag$features2.length&&(null===(_featureFlag$features3=featureFlag.features)||void 0===_featureFlag$features3?void 0:_featureFlag$features3.length)>0&&group.properties.some((property=>property.key==="$feature_enrollment/"+featureFlag.key)))};return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"feature-flag-form-row",children:[Object(jsx_runtime.jsx)("div",{"data-attr":"feature-flag-release-conditions",children:readOnly?Object(jsx_runtime.jsx)("h3",{className:"l3",children:isSuper?"Super Release Conditions":"Release conditions"}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h3",{className:"l3",children:"Release conditions"}),Object(jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:["Specify the ",aggregationTargetName," to which you want to release this flag. Note that condition sets are rolled out independently of each other."]})]})}),!readOnly&&showGroupsOptions&&Object(jsx_runtime.jsxs)("div",{className:"centered",children:["Match by",Object(jsx_runtime.jsxs)(es_select.a,{value:null!=featureFlag.filters.aggregation_group_type_index?featureFlag.filters.aggregation_group_type_index:-1,onChange:value=>{setAggregationGroupTypeIndex(-1!==value?value:null)},style:{marginLeft:8},"data-attr":"feature-flag-aggregation-filter",dropdownMatchSelectWidth:!1,dropdownAlign:{points:["tr","br"]},children:[Object(jsx_runtime.jsx)(es_select.a.Option,{value:-1,children:"Users"},-1),groupTypes.map((groupType=>Object(jsx_runtime.jsx)(es_select.a.Option,{value:groupType.group_type_index,children:Object(utils.i)(aggregationLabel(groupType.group_type_index).plural)},groupType.group_type_index))),matchByGroupsIntroductionOption]})]})]}),Object(jsx_runtime.jsx)(row.a,{className:"FeatureConditionCard",gutter:16,children:_filter_groups.map(((group,index)=>isSuper?((group,index)=>{var _group$properties3,_group$properties4;return readOnly?Object(jsx_runtime.jsxs)(col.a,{span:24,md:24,children:[index>0&&Object(jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(jsx_runtime.jsxs)("div",{className:Object(clsx_m.default)("mb-4","border","rounded","p-4","FeatureConditionCard--border--highlight"),children:[Object(jsx_runtime.jsx)(row.a,{align:"middle",justify:"space-between",children:Object(jsx_runtime.jsx)(row.a,{align:"middle",children:Object(jsx_runtime.jsx)("div",{children:null!==(_group$properties3=group.properties)&&void 0!==_group$properties3&&_group$properties3.length?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Match ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," against value set on"," ",Object(jsx_runtime.jsx)("span",{className:"simple-tag tag-light-blue text-primary-alt",children:"$feature_enrollment/"+featureFlag.key})]}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Condition set will match ",Object(jsx_runtime.jsxs)("b",{children:["all ",aggregationTargetName]})]})})})}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),(null===(_group$properties4=group.properties)||void 0===_group$properties4?void 0:_group$properties4.length)>0&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"feature-flag-property-display",children:[Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.Zc,{className:"arrow-right"}),status:"muted",size:"small"}),Object(jsx_runtime.jsxs)("span",{children:["If null, default to ",Object(jsx_runtime.jsx)("b",{children:"Release conditions"})]})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"})]}),Object(jsx_runtime.jsxs)(row.a,{justify:"space-between",align:"middle",children:[Object(jsx_runtime.jsx)("div",{}),Object(jsx_runtime.jsx)(LemonButton.a,{"aria-label":"more","data-attr":"feature-flag-feature-list-button",status:"primary",size:"small",onClick:()=>featureFlag.features&&featureFlag.features.length&&kea_router_lib.router.actions.push(urls.a.earlyAccessFeature(featureFlag.features[0].id)),children:"View Early Access Feature"})]})]})]},`${index}-${_filter_groups.length}`):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{})})(group,index):((group,index)=>{var _group$properties,_featureFlag$filters$4,_propertySelectErrors,_propertySelectErrors2,_group$properties2,_group$rollout_percen,properties;return Object(jsx_runtime.jsxs)(col.a,{span:24,md:24,children:[index>0&&Object(jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(jsx_runtime.jsxs)("div",{className:Object(clsx_m.default)("mb-4","border","rounded","p-4"),children:[Object(jsx_runtime.jsxs)(row.a,{align:"middle",justify:"space-between",children:[Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:[Object(jsx_runtime.jsxs)("span",{className:"simple-tag tag-light-blue font-medium mr-2",children:["Set ",index+1]}),Object(jsx_runtime.jsx)("div",{children:null!==(_group$properties=group.properties)&&void 0!==_group$properties&&_group$properties.length?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:readOnly?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Match ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," against ",Object(jsx_runtime.jsx)("b",{children:"all"})," criteria"]}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Matching ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," against the criteria"]})}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Condition set will match ",Object(jsx_runtime.jsxs)("b",{children:["all ",aggregationTargetName]})]})})]}),!readOnly&&Object(jsx_runtime.jsxs)(row.a,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.K,{}),status:"muted",noPadding:!0,onClick:()=>duplicateConditionSet(index)}),!isEarlyAccessFeatureCondition(group)&&_filter_groups.length>1&&Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.Q,{}),status:"muted",noPadding:!0,onClick:()=>removeConditionSet(index)})]})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),!readOnly&&(properties=group.properties,!!properties.find((property=>"cohort"===property.type||!constants.l.includes(property.key||""))))&&Object(jsx_runtime.jsxs)(LemonBanner.a,{type:"info",className:"mt-3 mb-3",children:["These properties aren't immediately available on first page load for unidentified persons. This feature flag requires that at least one event is sent prior to becoming available to your product or website."," ",Object(jsx_runtime.jsxs)("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank",children:[" ","Learn more about how to make feature flags available instantly."]})]}),readOnly?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:group.properties.map(((property,idx)=>{var _cohortsById$property;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("div",{className:"feature-flag-property-display",children:[0===idx?Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.Zc,{className:"arrow-right"}),status:"muted",size:"small"}):Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)("span",{className:"text-sm",children:"&"}),status:"muted",size:"small"}),Object(jsx_runtime.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt",children:["cohort"===property.type?"Cohort":property.key," "]}),Object(PropertyFilters_utils.e)(property)?Object(jsx_runtime.jsxs)("span",{children:[Object(DefinitionPopover_utils.a)(property.operator)," "]}):null,"cohort"===property.type?Object(jsx_runtime.jsx)("a",{href:urls.a.cohort(property.value),target:"_blank",rel:"noopener",className:"simple-tag tag-light-blue text-primary-alt display-value",children:property.value&&(null===(_cohortsById$property=cohortsById[property.value])||void 0===_cohortsById$property?void 0:_cohortsById$property.name)||`ID ${property.value}`}):[...Array.isArray(property.value)?property.value:[property.value]].map(((val,idx)=>Object(jsx_runtime.jsx)("span",{className:"simple-tag tag-light-blue text-primary-alt display-value",children:val},idx)))]},idx)})}))}):Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(PropertyFilters.a,{orFiltering:!0,pageKey:`feature-flag-${featureFlag.id}-${index}-${_filter_groups.length}-${null!==(_featureFlag$filters$4=featureFlag.filters.aggregation_group_type_index)&&void 0!==_featureFlag$filters$4?_featureFlag$filters$4:""}`,propertyFilters:null==group?void 0:group.properties,logicalRowDivider:!0,addButton:Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.sc,{}),sideIcon:null,noPadding:!0,children:"Add condition"}),onChange:properties=>updateConditionSet(index,void 0,properties),taxonomicGroupTypes:taxonomicGroupTypes,hasRowOperator:!1,sendAllKeyUpdates:!0,errorMessages:null!=propertySelectErrors&&null!==(_propertySelectErrors=propertySelectErrors[index])&&void 0!==_propertySelectErrors&&null!==(_propertySelectErrors2=_propertySelectErrors.properties)&&void 0!==_propertySelectErrors2&&_propertySelectErrors2.some((message=>!!message.value))?propertySelectErrors[index].properties.map(((message,index)=>message.value?Object(jsx_runtime.jsxs)("div",{className:"text-danger flex items-center gap-1 text-sm",children:[Object(jsx_runtime.jsx)(icons.Z,{className:"text-xl"})," ",message.value]},index):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{}))):null})}),(!readOnly||readOnly&&(null===(_group$properties2=group.properties)||void 0===_group$properties2?void 0:_group$properties2.length)>0)&&Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),readOnly?Object(jsx_runtime.jsx)(LemonTag.a,{type:1==_filter_groups.length?null==group.rollout_percentage||100==group.rollout_percentage?"highlight":0==group.rollout_percentage?"caution":"none":"none",children:Object(jsx_runtime.jsxs)("div",{className:"text-sm ",children:["Rolled out to"," ",Object(jsx_runtime.jsxs)("b",{children:[null!=group.rollout_percentage?group.rollout_percentage:100,"%"]})," of"," ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set."," "]})}):Object(jsx_runtime.jsx)("div",{className:"feature-flag-form-row",children:Object(jsx_runtime.jsxs)("div",{className:"centered",children:["Roll out to"," ",Object(jsx_runtime.jsx)(input_number.a,{style:{width:100,marginLeft:8,marginRight:8},onChange:value=>{updateConditionSet(index,value)},value:null!=group.rollout_percentage?group.rollout_percentage:100,min:0,max:100,addonAfter:"%"})," ","of ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set."," ",featureFlags[constants.i.FEATURE_FLAG_ROLLOUT_UX]&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Will match approximately"," ",void 0!==affectedUsers[index]?Object(jsx_runtime.jsx)("b",{children:1*computeBlastRadiusPercentage(group.rollout_percentage,index).toPrecision(2)+"% "}):Object(jsx_runtime.jsx)(Spinner.a,{className:"mr-1"})," ",affectedUsers[index]&&affectedUsers[index]>=0&&totalUsers?`(${Object(utils.Q)(Math.floor(affectedUsers[index]*(null!==(_group$rollout_percen=group.rollout_percentage)&&void 0!==_group$rollout_percen?_group$rollout_percen:100)/100))} / ${Object(utils.Q)(totalUsers)})`:""," ","of total ",aggregationTargetName,"."]})]})}),nonEmptyVariants.length>0&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),readOnly?Object(jsx_runtime.jsxs)("div",{children:["All ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set"," ",group.variant?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" ","will be in variant ",Object(jsx_runtime.jsx)("b",{children:group.variant})]}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"have no variant override"})]}):Object(jsx_runtime.jsx)("div",{className:"feature-flag-form-row",children:Object(jsx_runtime.jsxs)("div",{className:"centered",children:[Object(jsx_runtime.jsx)("b",{children:"Optional override:"})," Set variant for all ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set to"," ",Object(jsx_runtime.jsx)(src.LemonSelect,{placeholder:"Select variant",allowClear:!0,value:group.variant,onChange:value=>updateConditionSet(index,void 0,void 0,value),options:nonEmptyVariants.map((variant=>({label:variant.key,value:variant.key}))),"data-attr":"feature-flags-variant-override-select"})]})})]})]})]},`${index}-${_filter_groups.length}`)})(group,index)))}),!readOnly&&Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",className:"mt-0",onClick:addConditionSet,icon:Object(jsx_runtime.jsx)(icons.rc,{}),children:"Add condition set"})]})}try{FeatureFlag_FeatureFlag.displayName="FeatureFlag",FeatureFlag_FeatureFlag.__docgenInfo={description:"",displayName:"FeatureFlag",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"]={docgenInfo:FeatureFlag_FeatureFlag.__docgenInfo,name:"FeatureFlag",path:"frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePermissionMapping})),__webpack_require__.d(__webpack_exports__,"b",(function(){return permissionsLogic}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/types.ts"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/constants.tsx"),_Roles_rolesLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts");const ResourceDisplayMapping={[_types__WEBPACK_IMPORTED_MODULE_3__.Z.FEATURE_FLAGS]:"Feature Flags"},ResourcePermissionMapping={[_types__WEBPACK_IMPORTED_MODULE_3__.a.WRITE]:"View & Edit",[_types__WEBPACK_IMPORTED_MODULE_3__.a.READ]:"View Only"},ResourceAccessLevelMapping={[_types__WEBPACK_IMPORTED_MODULE_3__.Z.FEATURE_FLAGS]:"feature_flags_access_level"},permissionsLogic=Object(kea__WEBPACK_IMPORTED_MODULE_0__.kea)([Object(kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","organization","Settings","Permissions","permissionsLogic"]),Object(kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__.a,["featureFlags"],_Roles_rolesLogic__WEBPACK_IMPORTED_MODULE_6__.a,["roles"]],actions:[_Roles_rolesLogic__WEBPACK_IMPORTED_MODULE_6__.a,["updateRole"]]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.actions)({updatePermission:(checked,role,resourceId,resourceType)=>({checked:checked,role:role,resourceId:resourceId,resourceType:resourceType})}),Object(kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)((_ref=>{let{values:values}=_ref;return{organizationResourcePermissions:[[],{loadOrganizationResourcePermissions:async()=>{const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.resourcePermissions.list();return(null==response?void 0:response.results)||[]},updateOrganizationResourcePermission:async _ref2=>{let{id:id,resource:resource,access_level:access_level}=_ref2;if(id){const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.resourcePermissions.update(id,{access_level:access_level});return values.organizationResourcePermissions.map((permission=>permission.id==response.id?response:permission))}{const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.resourcePermissions.create({resource:resource,access_level:access_level});return[...values.organizationResourcePermissions,response]}}}]}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.listeners)((_ref3=>{let{actions:actions}=_ref3;return{updatePermission:async _ref4=>{let{checked:checked,role:role,resourceId:resourceId,resourceType:resourceType}=_ref4;const accessLevel=checked?_types__WEBPACK_IMPORTED_MODULE_3__.a.WRITE:_types__WEBPACK_IMPORTED_MODULE_3__.a.READ;if(role.id){const updatedRole=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.update(role.id,{[ResourceAccessLevelMapping[resourceType]]:accessLevel});updatedRole&&(actions.updateRole(updatedRole),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__.lemonToast.success(`${role.name} role ${resourceType} edit access updated`))}else actions.updateOrganizationResourcePermission({id:resourceId,resource:resourceType,access_level:accessLevel});lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__.d.actions.reportResourceAccessLevelUpdated(resourceType,role.name,accessLevel)},updateOrganizationResourcePermissionSuccess:()=>{_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__.lemonToast.success("Organizational edit access updated")}}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({organizationResourcePermissionsMap:[s=>[s.organizationResourcePermissions],organizationResourcePermissions=>organizationResourcePermissions.reduce(((obj,resourcePermission)=>({...obj,[resourcePermission.resource]:resourcePermission})),{})],allPermissions:[s=>[s.organizationResourcePermissionsMap],organizationResourcePermissionsMap=>Object.keys(ResourceDisplayMapping).map((key=>{var _organizationResource,_organizationResource2;return{id:(null===(_organizationResource=organizationResourcePermissionsMap[key])||void 0===_organizationResource?void 0:_organizationResource.id)||null,resource:key,name:ResourceDisplayMapping[key],access_level:(null===(_organizationResource2=organizationResourcePermissionsMap[key])||void 0===_organizationResource2?void 0:_organizationResource2.access_level)||_types__WEBPACK_IMPORTED_MODULE_3__.a.WRITE}}))],shouldShowPermissionsTable:[s=>[s.featureFlags],featureFlags=>"control"===featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_5__.i.ROLE_BASED_ACCESS]],resourceRolesAccess:[s=>[s.allPermissions,s.roles],(permissions,roles)=>{const resources=permissions.map((resource=>({[resource.resource]:{organization_default:resource.access_level,id:resource.id}})));for(const role of roles)for(const source of resources){const resourceType=Object.keys(source)[0];source[resourceType][`${role.name}`]=role[ResourceAccessLevelMapping[resourceType]]}return resources}]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)((_ref5=>{let{actions:actions}=_ref5;actions.loadOrganizationResourcePermissions()}))])},"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ProjectHomePageCompactListItem}));var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"));function ProjectHomePageCompactListItem(_ref){let{to:to,onClick:onClick,title:title,subtitle:subtitle,prefix:prefix,suffix:suffix}=_ref;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonButton,{fullWidth:!0,to:to,onClick:onClick,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[prefix?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"shrink-0",children:prefix}):null,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"text-primary font-semibold truncate",children:title}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"truncate text-default font-normal",children:subtitle})]}),suffix?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"shrink-0",children:suffix}):null]})})}try{ProjectHomePageCompactListItem.displayName="ProjectHomePageCompactListItem",ProjectHomePageCompactListItem.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:ProjectHomePageCompactListItem.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_4_46_0_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_4_46_0_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_4_46_0_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__),options={insert:"head",singleton:!1};_node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_4_46_0_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default.a,options),_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_4_46_0_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default.a.locals},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return InsightRow})),__webpack_require__.d(__webpack_exports__,"b",(function(){return RecentInsights}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),kea__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js")),lib_dayjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/dayjs.ts"),lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function InsightRow(_ref){let{insight:insight}=_ref;const{reportInsightOpenedFromRecentInsightList:reportInsightOpenedFromRecentInsightList}=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__.d);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_9__.a,{title:insight.name||insight.derived_name||"Insight",subtitle:`Last modified ${Object(lib_dayjs__WEBPACK_IMPORTED_MODULE_3__.a)(insight.last_modified_at).fromNow()}`,prefix:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__.InsightIcon,{insight:insight}),to:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.insightView(insight.short_id),onClick:()=>{reportInsightOpenedFromRecentInsightList()}})}function RecentInsights(){const{recentInsights:recentInsights,recentInsightsLoading:recentInsightsLoading}=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_7__.a),{loadRecentInsights:loadRecentInsights}=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_7__.a);return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{loadRecentInsights()}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_4__.a,{title:"Your recently viewed insights",viewAllURL:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.savedInsights(),loading:recentInsightsLoading,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.savedInsights()},items:recentInsights.slice(0,5),renderRow:(insight,index)=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(InsightRow,{insight:insight},index)})})}try{InsightRow.displayName="InsightRow",InsightRow.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:InsightRow.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return projectHomepageLogic}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/types.ts"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/api.ts"),kea_loaders__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/constants.tsx");const projectHomepageLogic=Object(kea__WEBPACK_IMPORTED_MODULE_0__.kea)([Object(kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_1__.b,["currentTeamId","currentTeam"],lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_5__.a,["featureFlags"]]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({primaryDashboardId:[()=>[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_1__.b.selectors.currentTeam],currentTeam=>null==currentTeam?void 0:currentTeam.primary_dashboard],dashboardLogicProps:[s=>[s.primaryDashboardId],primaryDashboardId=>({id:null!=primaryDashboardId?primaryDashboardId:void 0,placement:_types__WEBPACK_IMPORTED_MODULE_2__.m.ProjectHomepage})],allowQueryInsights:[s=>[s.featureFlags],featureFlags=>!!featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_6__.i.HOGQL]]}),Object(kea_loaders__WEBPACK_IMPORTED_MODULE_4__.loaders)((_ref=>{let{values:values}=_ref;return{recentInsights:[[],{loadRecentInsights:async()=>await lib_api__WEBPACK_IMPORTED_MODULE_3__.b.get(`api/projects/${values.currentTeamId}/insights/my_last_viewed?include_query_insights=${values.allowQueryInsights}`)}],persons:[[],{loadPersons:async()=>(await lib_api__WEBPACK_IMPORTED_MODULE_3__.b.persons.list()).results}]}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)((_ref2=>{let{actions:actions}=_ref2;actions.loadPersons()}))])},"./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/LockOutlined.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_LockOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_LockOutlined_LockOutlined=function LockOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_LockOutlined}))};icons_LockOutlined_LockOutlined.displayName="LockOutlined";__webpack_exports__.a=react.forwardRef(icons_LockOutlined_LockOutlined)},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/NewDashboardModal.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".NewDashboardModal .DashboardTemplateChooser{max-width:780px;grid-template-columns:repeat(3,1fr);-moz-column-gap:.5em;column-gap:.5em;row-gap:.5em;display:grid}.NewDashboardModal .TemplateItem{width:240px;height:210px}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".variant-form-list{font-size:13px;border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-top:16px}.variant-form-list .ant-form-item{min-height:32px}.variant-form-list .label-row{font-weight:700}.variant-form-list .label-row .ant-col{min-height:32px;display:flex;justify-content:space-between;align-items:center}.feature-flag-property-display{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.feature-flag-property-display .arrow-right{margin-right:-8px;margin-top:.25rem}.feature-flag-property-display .display-value{word-break:break-all}.condition-set-separator{color:var(--primary-alt);font-size:12px;font-weight:var(--font-semibold);margin-left:.5rem;margin-bottom:.5rem}.feature-flag-form-row{display:flex;justify-content:space-between;align-items:center;width:100%}.feature-flag-form-row .centered{display:flex;align-items:center;white-space:pre-wrap}.FeatureConditionCard .FeatureConditionCard--border--highlight{border-color:var(--primary)}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/JSONEditorInput.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".JsonEditorInput{position:relative}.JsonEditorInput .border{border-radius:var(--radius)}.JsonEditorInput .border .monaco-editor,.JsonEditorInput .border .monaco-editor .overflow-guard{border-radius:inherit}.JsonEditorInput .placeholder{position:absolute;top:0;left:0;bottom:0;height:100%;width:100%;pointer-events:none}.JsonEditorInput .placeholder .placeholderLabelContainer{display:flex;align-items:center;pointer-events:none;height:100%;padding-left:18px;color:grey}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".project-homepage .homepage-dashboard-header{margin-top:1rem;display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),module.exports=exports}}]);
//# sourceMappingURL=275.bf5ff708.iframe.bundle.js.map