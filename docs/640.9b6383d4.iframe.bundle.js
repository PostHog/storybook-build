"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[640],{"./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0});exports.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/lib/icons/UserOutlined.js":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireWildcard=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),_interopRequireDefault=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/interopRequireDefault.js");exports.Z=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/objectSpread2.js")),React=_interopRequireWildcard(__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),_UserOutlined=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js")),_AntdIcon=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/lib/components/AntdIcon.js")),UserOutlined=function UserOutlined(props,ref){return React.createElement(_AntdIcon.default,(0,_objectSpread2.default)((0,_objectSpread2.default)({},props),{},{ref,icon:_UserOutlined.default}))};UserOutlined.displayName="UserOutlined";var _default=React.forwardRef(UserOutlined);exports.Z=_default},"./frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>SceneDashboardChoiceModal});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonRow/index.ts"),lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonModal/index.ts"),lib_lemon_ui_LemonSkeleton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSkeleton/index.ts"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function SceneDashboardChoiceModal(_ref){let{scene}=_ref;const modalLogic=(0,_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_3__.F)({scene}),{isOpen,currentDashboardId,dashboards,searchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(modalLogic),{closeSceneDashboardChoiceModal,setSceneDashboardChoice,setSearchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(modalLogic),{dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__.h);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_5__.f,{isOpen,onClose:closeSceneDashboardChoiceModal,title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:["Select a default dashboard for ",_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_3__.o[scene]]}),footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_2__.Jp,{type:"secondary","data-attr":"close-scene-dashboard-choice-modal",onClick:closeSceneDashboardChoiceModal,children:"Close"})}),children:dashboardsLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"space-y-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_LemonSkeleton__WEBPACK_IMPORTED_MODULE_6__.y.Row,{repeat:4})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:setSearchTerm,value:null!=searchTerm?searchTerm:void 0,fullWidth:!0,allowClear:!0,className:"mb-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__.LemonDivider,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"space-y-2 min-h-100",children:dashboards.map((dashboard=>{const isCurrentChoice=dashboard.id===currentDashboardId,rowContents=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("strong",{children:dashboard.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{className:"text-default font-normal text-ellipsis",children:dashboard.description})]}),isCurrentChoice?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_8__.m,{scene,size:"small"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{children:"Default"})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return isCurrentChoice?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_4__.Q,{fullWidth:!0,status:"muted",className:"dashboard-row",children:rowContents},dashboard.id):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_2__.Jp,{fullWidth:!0,className:"dashboard-row",onClick:()=>{setSceneDashboardChoice(dashboard.id),setSearchTerm(""),closeSceneDashboardChoiceModal()},children:rowContents},dashboard.id)}))})]})})}try{SceneDashboardChoiceModal.displayName="SceneDashboardChoiceModal",SceneDashboardChoiceModal.__docgenInfo={description:"",displayName:"SceneDashboardChoiceModal",props:{scene:{defaultValue:null,description:"",name:"scene",required:!0,type:{name:"enum",value:[{value:'"Person"'},{value:'"Group"'},{value:'"ProjectHomepage"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceModal.tsx#SceneDashboardChoiceModal"]={docgenInfo:SceneDashboardChoiceModal.__docgenInfo,name:"SceneDashboardChoiceModal",path:"frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceModal.tsx#SceneDashboardChoiceModal"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceRequired.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>SceneDashboardChoiceRequired});var lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_components_SceneDashboardChoice_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function SceneDashboardChoiceRequired(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"empty-state-container flex flex-col items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("h1",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_3__.m,{scene:props.scene,size:"large"})," There isn’t a"," ",props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_2__.x.ProjectHomepage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:"default "}):null,"dashboard set for"," ",lib_components_SceneDashboardChoice_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_1__.o[props.scene]]}),props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_2__.x.ProjectHomepage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{className:"mb-4",children:"Default dashboards are shown to everyone in the project. When you set a default, it’ll show up here."}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_0__.Jp,{type:"primary","data-attr":`${props.scene}-choose-dashboard-from-empty`,onClick:props.open,children:"Select a dashboard"})]})}try{SceneDashboardChoiceRequired.displayName="SceneDashboardChoiceRequired",SceneDashboardChoiceRequired.__docgenInfo={description:"",displayName:"SceneDashboardChoiceRequired",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"() => void"}},scene:{defaultValue:null,description:"",name:"scene",required:!0,type:{name:"enum",value:[{value:'"Person"'},{value:'"Group"'},{value:'"ProjectHomepage"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceRequired.tsx#SceneDashboardChoiceRequired"]={docgenInfo:SceneDashboardChoiceRequired.__docgenInfo,name:"SceneDashboardChoiceRequired",path:"frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceRequired.tsx#SceneDashboardChoiceRequired"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>SceneIcon});var scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function SceneIcon(props){const className=(0,clsx__WEBPACK_IMPORTED_MODULE_3__.default)("text-warning","small"===props.size?"text-lg":"text-3xl");return props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_0__.x.ProjectHomepage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_1__.Bhv,{className}):props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_0__.x.Group||props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_0__.x.Person?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_1__.PLK,{className}):null}try{SceneIcon.displayName="SceneIcon",SceneIcon.__docgenInfo={description:"",displayName:"SceneIcon",props:{scene:{defaultValue:null,description:"",name:"scene",required:!0,type:{name:"enum",value:[{value:'"Person"'},{value:'"Group"'},{value:'"ProjectHomepage"'}]}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"large"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx#SceneIcon"]={docgenInfo:SceneIcon.__docgenInfo,name:"SceneIcon",path:"frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx#SceneIcon"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>sceneDashboardChoiceModalLogic,o:()=>sceneDescription});var fuse_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),posthog_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/posthog-js@1.80.0/node_modules/posthog-js/dist/es.js"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/userLogic.ts");const sceneDescription={[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.Person]:"persons",[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.Group]:"groups",[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.ProjectHomepage]:"this project"},sceneDashboardChoiceModalLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)((key=>["lib","components","SceneDashboardChoice","sceneDashboardChoiceModalLogic",key||"unknown"])),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)((props=>`${props.scene}`)),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({logic:[lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_1__.vx],actions:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_2__.teamLogic,["updateCurrentTeam"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_6__.userLogic,["setUserScenePersonalisation"]],values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_2__.teamLogic,["currentTeam"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_6__.userLogic,["user"],_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_3__.h,["nameSortedDashboards"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!0,setSceneDashboardChoice:dashboardId=>({dashboardId}),setSearchTerm:searchTerm=>({searchTerm})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({searchTerm:[null,{setSearchTerm:(_,_ref)=>{let{searchTerm}=_ref;return searchTerm}}],isOpen:[!1,{showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!1}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)((_ref2=>{let{props}=_ref2;return{currentDashboardId:[s=>[s.currentTeam,s.user],(currentTeam,user)=>{var _ref3;let currentDashboard=user?.scene_personalisation?.find((choice=>choice.scene===props.scene))?.dashboard;return currentDashboard||props.scene!==scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.ProjectHomepage||(currentDashboard=currentTeam?.primary_dashboard),null!==(_ref3="number"==typeof currentDashboard?currentDashboard:currentDashboard?.id)&&void 0!==_ref3?_ref3:null}],dashboards:[s=>[s.searchTerm,s.nameSortedDashboards],(searchTerm,dashboards)=>(dashboards=dashboards.filter((d=>!d.deleted)).sort(((a,b)=>{var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")})),searchTerm?new fuse_js__WEBPACK_IMPORTED_MODULE_7__.Z(dashboards,{keys:["key","name","description","tags"],threshold:.3}).search(searchTerm).map((result=>result.item)):dashboards)]}})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)((_ref4=>{let{actions,props}=_ref4;return{setSceneDashboardChoice:async _ref5=>{let{dashboardId}=_ref5;props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.ProjectHomepage?(actions.updateCurrentTeam({primary_dashboard:dashboardId}),posthog_js__WEBPACK_IMPORTED_MODULE_4__.LJ.capture("primary dashboard changed")):(actions.setUserScenePersonalisation(props.scene,dashboardId),posthog_js__WEBPACK_IMPORTED_MODULE_4__.LJ.capture("scene dashboard choice set",{scene:props.scene,dashboardId}))},showSceneDashboardChoiceModal:async()=>{props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.ProjectHomepage?posthog_js__WEBPACK_IMPORTED_MODULE_4__.LJ.capture("primary dashboard modal opened"):posthog_js__WEBPACK_IMPORTED_MODULE_4__.LJ.capture("scene dashboard choice modal opened",{scene:props.scene})}}}))])},"./frontend/src/scenes/groups/RelatedGroups.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>RelatedGroups});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),UserOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/lib/icons/UserOutlined.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),PersonDisplay=__webpack_require__("./frontend/src/scenes/persons/PersonDisplay.tsx"),api=__webpack_require__("./frontend/src/lib/api.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx");const relatedGroupsLogic=(0,index_esm.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[teamLogic.teamLogic,["currentTeamId"]]},props:{},key:props=>{var _props$groupTypeIndex;return`${null!==(_props$groupTypeIndex=props.groupTypeIndex)&&void 0!==_props$groupTypeIndex?_props$groupTypeIndex:"person"}-${props.id}`},actions:()=>({loadRelatedActors:!0}),loaders:_ref=>{let{values,props}=_ref;return{relatedActors:[[],{loadRelatedActors:async()=>{const url=`api/projects/${values.currentTeamId}/groups/related?${(0,utils.oZ)({group_type_index:props.groupTypeIndex,id:props.id})}`;return await api.ZP.get(url)},setGroup:()=>[]}]}},events:_ref2=>{let{actions}=_ref2;return{afterMount:actions.loadRelatedActors}}});var GroupActorDisplay=__webpack_require__("./frontend/src/scenes/persons/GroupActorDisplay.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function RelatedGroups(_ref){let{groupTypeIndex,id}=_ref;const{relatedActors,relatedActorsLoading}=(0,index_esm.useValues)(relatedGroupsLogic({groupTypeIndex,id})),{aggregationLabel}=(0,index_esm.useValues)(groupsModel.$),columns=[{title:"Type",key:"type",render:function RenderActor(_,actor){return"group"===actor.type?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,utils.fm)(aggregationLabel(actor.group_type_index).singular)}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UserOutlined.Z,{})," Person"]})}},{title:"id",key:"id",render:function RenderActor(_,actor){return"group"==actor.type?(0,jsx_runtime.jsx)(GroupActorDisplay.k,{actor}):(0,jsx_runtime.jsx)(PersonDisplay.I,{person:actor,withIcon:!1})}}];return(0,jsx_runtime.jsx)(LemonTable.g,{dataSource:relatedActors,columns,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:relatedActorsLoading,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{RelatedGroups.displayName="RelatedGroups",RelatedGroups.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:RelatedGroups.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/persons/RelatedFeatureFlags.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>FeatureFlagMatchReason,c:()=>RelatedFeatureFlags});var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),utils=__webpack_require__("./frontend/src/lib/components/Table/utils.tsx"),lib_utils=__webpack_require__("./frontend/src/lib/utils.tsx"),stringWithWBR=__webpack_require__("./frontend/src/lib/utils/stringWithWBR.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),types=__webpack_require__("./frontend/src/types.ts"),fuse_esm=__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),featureFlagsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx");const relatedFeatureFlagsLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","persons","relatedFeatureFlagsLogic"]),(0,index_esm.connect)({values:[teamLogic.teamLogic,["currentTeamId"],featureFlagsLogic.b,["featureFlags"]]}),(0,index_esm.props)({}),(0,index_esm.key)((props=>`${props.distinctId}`)),(0,index_esm.actions)({setSearchTerm:searchTerm=>({searchTerm}),setFilters:(filters,replace)=>({filters,replace}),loadRelatedFeatureFlags:!0}),(0,lib.loaders)((_ref=>{let{values,props}=_ref;return{relatedFeatureFlags:[null,{loadRelatedFeatureFlags:async()=>await api.ZP.get(`api/projects/${values.currentTeamId}/feature_flags/evaluation_reasons?${(0,lib_utils.oZ)({distinct_id:props.distinctId,...props.groups?{groups:props.groups}:{}})}`)}]}})),(0,index_esm.reducers)({searchTerm:["",{setSearchTerm:(_,_ref2)=>{let{searchTerm}=_ref2;return searchTerm}}],filters:[{},{setFilters:(state,_ref3)=>{let{filters,replace}=_ref3;return replace?{...filters}:{...state,...filters}}}]}),(0,index_esm.selectors)((()=>({mappedRelatedFeatureFlags:[selectors=>[selectors.relatedFeatureFlags,selectors.featureFlags],(relatedFlags,featureFlags)=>relatedFlags&&featureFlags?featureFlags.map((flag=>({...relatedFlags[flag.key],...flag}))):[]],filteredMappedFlags:[selectors=>[selectors.mappedRelatedFeatureFlags,selectors.searchTerm,selectors.filters],(featureFlags,searchTerm,filters)=>{if(!searchTerm&&0===Object.keys(filters).length)return featureFlags;let searchedFlags=featureFlags;searchTerm&&(searchedFlags=new fuse_esm.Z(featureFlags,{keys:["key","name"],threshold:.3}).search(searchTerm).map((result=>result.item)));const{type,active,reason}=filters;return type&&(searchedFlags=searchedFlags.filter((flag=>type===types.aI.Variants?flag.filters.multivariate:!flag.filters.multivariate))),active&&(searchedFlags=searchedFlags.filter((flag=>"true"===active?flag.active:!flag.active))),reason&&(searchedFlags=searchedFlags.filter((flag=>"not matched"===reason?flag.evaluation.reason!==FeatureFlagMatchReason.ConditionMatch:flag.evaluation.reason===FeatureFlagMatchReason.ConditionMatch))),searchedFlags}]}))),(0,index_esm.events)((_ref4=>{let{actions}=_ref4;return{afterMount:actions.loadRelatedFeatureFlags}}))]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");let FeatureFlagMatchReason=function(FeatureFlagMatchReason){return FeatureFlagMatchReason.SuperConditionMatch="super_condition_value",FeatureFlagMatchReason.ConditionMatch="condition_match",FeatureFlagMatchReason.NoConditionMatch="no_condition_match",FeatureFlagMatchReason.OutOfRolloutBound="out_of_rollout_bound",FeatureFlagMatchReason.NoGroupType="no_group_type",FeatureFlagMatchReason.Disabled="disabled",FeatureFlagMatchReason}({});const featureFlagMatchMapping={[FeatureFlagMatchReason.ConditionMatch]:"Matches",[FeatureFlagMatchReason.NoConditionMatch]:"Doesn't match any conditions",[FeatureFlagMatchReason.OutOfRolloutBound]:"Out of rollout bound",[FeatureFlagMatchReason.NoGroupType]:"Missing group type",[FeatureFlagMatchReason.SuperConditionMatch]:"Matches early access condition",[FeatureFlagMatchReason.Disabled]:"Disabled"};function RelatedFeatureFlags(_ref){let{distinctId,groups}=_ref;const{filteredMappedFlags,relatedFeatureFlagsLoading,searchTerm,filters}=(0,index_esm.useValues)(relatedFeatureFlagsLogic({distinctId,groups})),{setSearchTerm,setFilters}=(0,index_esm.useActions)(relatedFeatureFlagsLogic({distinctId,groups})),columns=[{title:(0,utils.P)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(a,b)=>(a.key||"").localeCompare(b.key||""),render:function Render(_,featureFlag){const isExperiment=(featureFlag.experiment_set||[]).length>0;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(src.Link,{to:featureFlag.id?urls.j.featureFlag(featureFlag.id):void 0,className:"row-name",children:[(0,stringWithWBR.Z)(featureFlag.key,17),(0,jsx_runtime.jsx)(src.LemonTag,{type:isExperiment?"completion":"default",className:"ml-2",children:isExperiment?"Experiment":"Feature flag"})]}),featureFlag.name&&(0,jsx_runtime.jsx)("span",{className:"row-description",children:featureFlag.name})]})}},{title:"Type",width:100,render:function Render(_,featureFlag){return featureFlag.filters.multivariate?types.aI.Variants:types.aI.ReleaseToggle}},{title:"Value",dataIndex:"value",width:150,render:function Render(_,featureFlag){return(0,jsx_runtime.jsx)("div",{style:{wordBreak:"break-word"},children:featureFlag.active&&featureFlag.value?(0,lib_utils.fm)(featureFlag.value.toString()):"--"})}},{title:"Match evaluation",dataIndex:"evaluation",width:150,render:function Render(_,featureFlag){var _featureFlag$evaluati;const matchesSet=featureFlag.evaluation.reason===FeatureFlagMatchReason.ConditionMatch;return(0,jsx_runtime.jsxs)("div",{children:[featureFlag.active?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlagMatchMapping[featureFlag.evaluation.reason]}):"--",matchesSet&&(0,jsx_runtime.jsxs)("span",{className:"simple-tag ml-2",style:{background:"var(--primary-highlight)"},children:["Set ",(null!==(_featureFlag$evaluati=featureFlag.evaluation.condition_index)&&void 0!==_featureFlag$evaluati?_featureFlag$evaluati:0)+1]})]})}},{title:"Status",dataIndex:"active",sorter:(a,b)=>Number(a.active)-Number(b.active),width:100,render:function RenderActive(_,featureFlag){return(0,jsx_runtime.jsx)("span",{className:"font-normal",children:featureFlag.active?"Enabled":"Disabled"})}}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:setSearchTerm,value:searchTerm}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsx)("b",{children:"Type"})}),(0,jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"All types",value:"all"},{label:types.aI.ReleaseToggle,value:types.aI.ReleaseToggle},{label:types.aI.Variants,value:types.aI.Variants}],onChange:type=>{if(type)if("all"===type){if(filters){const{type,...restFilters}=filters;setFilters(restFilters,!0)}}else setFilters({type})},value:"all",dropdownMaxContentWidth:!0}),(0,jsx_runtime.jsx)("span",{className:"ml-2",children:(0,jsx_runtime.jsx)("b",{children:"Match evaluation"})}),(0,jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"All",value:"all"},{label:"Matched",value:FeatureFlagMatchReason.ConditionMatch},{label:"Not matched",value:"not matched"}],onChange:reason=>{if(reason)if("all"===reason){if(filters){const{reason,...restFilters}=filters;setFilters(restFilters,!0)}}else setFilters({reason})},value:"all",dropdownMaxContentWidth:!0}),(0,jsx_runtime.jsx)("span",{className:"ml-2",children:(0,jsx_runtime.jsx)("b",{children:"Status"})}),(0,jsx_runtime.jsx)(src.LemonSelect,{onChange:status=>{if(status)if("all"===status){if(filters){const{active,...restFilters}=filters;setFilters(restFilters,!0)}}else setFilters({active:status})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0})]})]}),(0,jsx_runtime.jsx)(src.LemonTable,{columns,loading:relatedFeatureFlagsLoading,dataSource:filteredMappedFlags})]})}try{RelatedFeatureFlags.displayName="RelatedFeatureFlags",RelatedFeatureFlags.__docgenInfo={description:"",displayName:"RelatedFeatureFlags",props:{distinctId:{defaultValue:null,description:"",name:"distinctId",required:!0,type:{name:"string"}},groups:{defaultValue:null,description:"",name:"groups",required:!1,type:{name:"{ [key: string]: string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"]={docgenInfo:RelatedFeatureFlags.__docgenInfo,name:"RelatedFeatureFlags",path:"frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"})}catch(__react_docgen_typescript_loader_error){}}}]);