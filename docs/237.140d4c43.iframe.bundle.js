(window.webpackJsonp=window.webpackJsonp||[]).push([[237],{4333:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupsListLogic}));__webpack_require__(40),__webpack_require__(43),__webpack_require__(37),__webpack_require__(47);var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(66),__webpack_require__(11)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__),kea__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),lib_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(18),lib_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(27),scenes_urls__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(16),_models_groupsModel__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(143),groupsListLogic=Object(kea__WEBPACK_IMPORTED_MODULE_7__.kea)({path:["groups","groupsListLogic"],connect:{values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_10__.a,["currentTeamId"],_models_groupsModel__WEBPACK_IMPORTED_MODULE_12__.a,["groupsEnabled","groupTypes"]]},actions:function actions(){return{loadGroups:function loadGroups(url){return{url:url}},setTab:function setTab(tab){return{tab:tab}}}},loaders:function loaders(_ref){var _loadGroups,values=_ref.values;return{groups:[{next_url:null,previous_url:null,results:[]},{loadGroups:(_loadGroups=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function _callee(_ref2){var url;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(url=_ref2.url,!values.groupsEnabled){_context.next=6;break}return url=url||"api/projects/".concat(values.currentTeamId,"/groups/?group_type_index=").concat(values.currentTab),_context.next=5,lib_api__WEBPACK_IMPORTED_MODULE_8__.a.get(url);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}),_callee)}))),function loadGroups(_x){return _loadGroups.apply(this,arguments)})}]}},reducers:{currentTab:["-1",{setTab:function setTab(_,_ref3){return _ref3.tab}}]},selectors:{currentTabName:[function(s){return[s.currentTab,s.groupTypes]},function(currentTab,groupTypes){return"-1"===currentTab?"Persons":(null==groupTypes?void 0:groupTypes.length)?Object(lib_utils__WEBPACK_IMPORTED_MODULE_9__.i)(groupTypes[parseInt(currentTab)].group_type):""}]},actionToUrl:function actionToUrl(){return{setTab:function setTab(_ref4){var tab=_ref4.tab;return"-1"!==tab?scenes_urls__WEBPACK_IMPORTED_MODULE_11__.a.groups(tab):scenes_urls__WEBPACK_IMPORTED_MODULE_11__.a.persons()}}},urlToAction:function urlToAction(_ref5){var actions=_ref5.actions;return{"/groups/:id":function groupsId(_ref6){var id=_ref6.id;id&&(actions.setTab(id),actions.loadGroups())}}}})},4340:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonPageHeader}));var index_esm=__webpack_require__(1),PageHeader=__webpack_require__(339),react=__webpack_require__(0),react_default=__webpack_require__.n(react),tabs=(__webpack_require__(34),__webpack_require__(548)),utils=__webpack_require__(10),groupsModel=__webpack_require__(143),groupsListLogic=__webpack_require__(4333);function GroupsTabs(){var setTab=Object(index_esm.useActions)(groupsListLogic.a).setTab,currentTab=Object(index_esm.useValues)(groupsListLogic.a).currentTab,groupTypes=Object(index_esm.useValues)(groupsModel.a).groupTypes;return react_default.a.createElement(tabs.a,{activeKey:currentTab,onChange:function onChange(activeKey){return setTab(activeKey)}},react_default.a.createElement(tabs.a.TabPane,{tab:"Persons",key:"-1"}),groupTypes.map((function(groupType){return react_default.a.createElement(tabs.a.TabPane,{tab:Object(utils.i)(groupType.group_type),key:groupType.group_type_index})})))}function PersonPageHeader(_ref){var hideGroupTabs=_ref.hideGroupTabs,groupsEnabled=Object(index_esm.useValues)(groupsModel.a).groupsEnabled;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PageHeader.a,{title:"Persons".concat(groupsEnabled?" & groups":""),caption:"A catalog of your product's end users".concat(groupsEnabled?" and groups":"",".")}),!hideGroupTabs&&groupsEnabled&&react_default.a.createElement(GroupsTabs,null))}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}},4506:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Groups",(function(){return Groups}));__webpack_require__(111);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_groupsListLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4333),lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(694),scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4340),lib_components_TimezoneAware__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(252),lib_components_LemonTable_LemonTable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(470);function Groups(){var _useValues=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_3__.a),groups=_useValues.groups,groupsLoading=_useValues.groupsLoading,loadGroups=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_3__.a).loadGroups,columns=[{title:"Key",key:"group_key",render:function Render(_,group){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,group.group_key)}},{title:"Last updated",key:"created_at",render:function Render(_,group){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(lib_components_TimezoneAware__WEBPACK_IMPORTED_MODULE_6__.b,{time:group.created_at})}}];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_5__.a,null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(lib_components_LemonTable_LemonTable__WEBPACK_IMPORTED_MODULE_7__.a,{columns:columns,rowKey:"group_key",loading:groupsLoading,dataSource:groups.results,expandable:{expandedRowRender:function RenderPropertiesTable(_ref){var group_properties=_ref.group_properties;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_4__.a,{properties:group_properties})},rowExpandable:function rowExpandable(_ref2){var group_properties=_ref2.group_properties;return!!group_properties&&Object.keys(group_properties).length>0}},pagination:{controlled:!0,onBackward:groups.previous_url?function(){loadGroups(groups.previous_url),window.scrollTo(0,0)}:void 0,onForward:groups.next_url?function(){loadGroups(groups.next_url),window.scrollTo(0,0)}:void 0}}))}}}]);