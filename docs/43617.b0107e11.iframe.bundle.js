"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[43617],{"../../frontend/src/scenes/dashboard/NewDashboardModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>NewDashboardModal});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),LemonModal=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonModal/index.ts"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),dashboardTemplatesLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),newDashboardLogic=__webpack_require__("../../frontend/src/scenes/dashboard/newDashboardLogic.ts"),DashboardTemplateChooser=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),ActionFilter=__webpack_require__("../../frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),types=__webpack_require__("../../frontend/src/types.ts"),dashboardTemplateVariablesLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardTemplateVariablesLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DashboardTemplateVariables(){let{activeDashboardTemplate}=(0,index_esm.useValues)(newDashboardLogic.Z),theDashboardTemplateVariablesLogic=(0,dashboardTemplateVariablesLogic.y)({variables:activeDashboardTemplate?.variables||[]}),{variables}=(0,index_esm.useValues)(theDashboardTemplateVariablesLogic),{setVariable,setVariables}=(0,index_esm.useActions)(theDashboardTemplateVariablesLogic);return(0,react.useEffect)(()=>{setVariables(activeDashboardTemplate?.variables||[])},[activeDashboardTemplate]),(0,jsx_runtime.jsx)("div",{className:"mb-4 DashboardTemplateVariables max-w-192",children:variables.map((variable,index)=>(0,jsx_runtime.jsxs)("div",{className:"mb-6",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsx)(src.HQ,{showOptional:!variable.required,info:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:variable.description}),children:variable.name}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-secondary",children:variable.description})]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(ActionFilter.T,{filters:{insight:types.dw.TRENDS,events:[variable.default]},setFilters:filters=>{setVariable(variable.name,filters)},typeKey:"variable_"+variable.name,hideDeleteBtn:!0,hideRename:!0,hideDuplicate:!0,entitiesLimit:1})})]},index))})}function NewDashboardModal(){let builtLogic=(0,index_esm.useMountedLogic)(newDashboardLogic.Z),{hideNewDashboardModal,clearActiveDashboardTemplate,createDashboardFromTemplate}=(0,index_esm.useActions)(newDashboardLogic.Z),{newDashboardModalVisible,activeDashboardTemplate,variableSelectModalVisible}=(0,index_esm.useValues)(newDashboardLogic.Z),{variables}=(0,index_esm.useValues)(dashboardTemplateVariablesLogic.y),templatesLogic=(0,dashboardTemplatesLogic.R)({scope:builtLogic.props.featureFlagId?"feature_flag":"default"}),{templateFilter}=(0,index_esm.useValues)(templatesLogic),{setTemplateFilter}=(0,index_esm.useActions)(templatesLogic),_dashboardTemplateChooser=builtLogic.props.featureFlagId?(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{scope:"feature_flag"}):(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{});return(0,jsx_runtime.jsx)(LemonModal.f,{onClose:hideNewDashboardModal,isOpen:newDashboardModalVisible,title:activeDashboardTemplate?"Choose your events":"Create a dashboard","data-attr":"new-dashboard-chooser",description:activeDashboardTemplate?(0,jsx_runtime.jsxs)("p",{children:["The ",(0,jsx_runtime.jsx)("i",{children:activeDashboardTemplate.template_name})," template requires you to choose"," ",(0,utils.Zi)((activeDashboardTemplate.variables||[]).length,"event","events",!0),"."]}):(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("div",{children:"Choose a template or start with a blank slate"}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(src.DF,{type:"search",placeholder:"Filter templates",onChange:setTemplateFilter,value:templateFilter,fullWidth:!0})})]}),footer:activeDashboardTemplate?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[variableSelectModalVisible?(0,jsx_runtime.jsx)("div",{}):(0,jsx_runtime.jsx)(src.Jp,{onClick:clearActiveDashboardTemplate,type:"secondary",children:"Back"}),(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{activeDashboardTemplate&&createDashboardFromTemplate(activeDashboardTemplate,variables)},type:"primary",children:"Create"})]}):null,children:(0,jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:activeDashboardTemplate?(0,jsx_runtime.jsx)(DashboardTemplateVariables,{}):_dashboardTemplateChooser})})}},"../../frontend/src/scenes/dashboard/dashboards/Dashboards.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Dashboards:()=>Dashboards,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),AccessControlAction=__webpack_require__("../../frontend/src/lib/components/AccessControlAction.tsx"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),LemonTabs=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),DeleteDashboardModal=__webpack_require__("../../frontend/src/scenes/dashboard/DeleteDashboardModal.tsx"),DuplicateDashboardModal=__webpack_require__("../../frontend/src/scenes/dashboard/DuplicateDashboardModal.tsx"),NewDashboardModal=__webpack_require__("../../frontend/src/scenes/dashboard/NewDashboardModal.tsx"),DashboardsTable=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx"),dashboardsLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),More=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonDialog=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDialog/index.ts"),LemonSnack=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSnack/LemonSnack.tsx"),LemonTable=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),DashboardTemplateEditor=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardTemplateEditor.tsx"),dashboardTemplateEditorLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardTemplateEditorLogic.ts"),dashboardTemplatesLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),userLogic=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let DashboardTemplatesTable=()=>{let{allTemplates,allTemplatesLoading}=(0,index_esm.useValues)(dashboardTemplatesLogic.R),{openDashboardTemplateEditor,setDashboardTemplateId,deleteDashboardTemplate,updateDashboardTemplate}=(0,index_esm.useActions)(dashboardTemplateEditorLogic.X),{user}=(0,index_esm.useValues)(userLogic.userLogic),columns=[{title:"Name",dataIndex:"template_name",render:(_,_ref)=>{let{template_name}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:template_name})}},{title:"Description",dataIndex:"dashboard_description",render:(_,_ref2)=>{let{dashboard_description}=_ref2;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:dashboard_description})}},{title:"Type",dataIndex:"team_id",render:(_,_ref3)=>{let{scope}=_ref3;return"global"===scope?(0,jsx_runtime.jsx)(LemonSnack.L,{children:"Official"}):(0,jsx_runtime.jsx)(LemonSnack.L,{children:"Team"})}},{width:0,render:(_,_ref4)=>{let{id,scope}=_ref4;return user?.is_staff?(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{if(void 0===id){console.error("Dashboard template id not defined");return}setDashboardTemplateId(id),openDashboardTemplateEditor()},fullWidth:!0,children:"Edit"}),(0,jsx_runtime.jsxs)(src.Jp,{onClick:()=>{if(void 0===id){console.error("Dashboard template id not defined");return}updateDashboardTemplate({id,dashboardTemplateUpdates:{scope:"global"===scope?"team":"global"}})},fullWidth:!0,children:["Make visible to ","global"===scope?"this team only":"everyone"]}),(0,jsx_runtime.jsx)(src.p2,{}),(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{if(void 0===id){console.error("Dashboard template id not defined");return}LemonDialog.LemonDialog.open({title:"Delete dashboard template?",description:"This action cannot be undone.",primaryButton:{status:"danger",children:"Delete",onClick:()=>{deleteDashboardTemplate(id)}}})},fullWidth:!0,status:"danger",disabledReason:"global"===scope?"Cannot delete global dashboard templates, make them team only first":void 0,children:"Delete dashboard"})]})}):null}}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonTable.g,{"data-attr":"dashboards-template-table",pagination:{pageSize:10},dataSource:Object.values(allTemplates),columns:columns,loading:allTemplatesLoading,defaultSorting:{columnKey:"name",order:1},emptyState:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"There are no dashboard templates."}),nouns:["template","templates"]}),(0,jsx_runtime.jsx)(DashboardTemplateEditor.v,{})]})};var newDashboardLogic=__webpack_require__("../../frontend/src/scenes/dashboard/newDashboardLogic.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),dashboardsModel=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx"),types=__webpack_require__("../../frontend/src/types.ts"),DashboardTemplateChooser=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx");let scene={component:Dashboards,logic:dashboardsLogic.dJ,settingSectionId:"environment-product-analytics"};function Dashboards(){let{dashboardsLoading}=(0,index_esm.useValues)(dashboardsModel.h),{setCurrentTab}=(0,index_esm.useActions)(dashboardsLogic.dJ),{dashboards,currentTab,isFiltering}=(0,index_esm.useValues)(dashboardsLogic.dJ),{showNewDashboardModal}=(0,index_esm.useActions)(newDashboardLogic.Z),enabledTabs=[{key:dashboardsLogic.NS.All,label:"All dashboards"},{key:dashboardsLogic.NS.Yours,label:"My dashboards"},{key:dashboardsLogic.NS.Pinned,label:"Pinned"},{key:dashboardsLogic.NS.Templates,label:"Templates"}];return(0,jsx_runtime.jsxs)(SceneContent._,{children:[(0,jsx_runtime.jsx)(NewDashboardModal.O,{}),(0,jsx_runtime.jsx)(DuplicateDashboardModal.i,{}),(0,jsx_runtime.jsx)(DeleteDashboardModal.y,{}),(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsx)(AccessControlAction.bW,{resourceType:types.qR.Dashboard,minAccessLevel:types.W$.Editor,children:(0,jsx_runtime.jsx)(src.Jp,{"data-attr":"new-dashboard",onClick:showNewDashboardModal,type:"primary",children:"New dashboard"})})}),(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:"Dashboards",description:"Create and manage your dashboards",resourceType:{type:"dashboard"}}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:currentTab,onChange:newKey=>setCurrentTab(newKey),tabs:enabledTabs,sceneInset:!0}),(0,jsx_runtime.jsx)("div",{children:currentTab===dashboardsLogic.NS.Templates?(0,jsx_runtime.jsx)(DashboardTemplatesTable,{}):dashboardsLoading||dashboards.length>0||isFiltering?(0,jsx_runtime.jsx)(DashboardsTable.z,{}):(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("p",{children:"Create your first dashboard:"}),(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{})]})})]})}},"../../frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>DashboardsTable,z:()=>DashboardsTableContainer});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_AccessControlAction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/AccessControlAction.tsx"),lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/MemberSelect.tsx"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/constants.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonRow/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../frontend/src/lib/lemon-ui/Tooltip/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../frontend/src/lib/utils/eventUsageLogic.ts"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardLogic.tsx"),scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("../../frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx"),_types__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("../../frontend/src/types.ts"),_DashboardHeader__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardHeader.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DashboardsTableContainer(){let{dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.h),{dashboards,filters}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.dJ);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(DashboardsTable,{dashboards:dashboards,dashboardsLoading:dashboardsLoading,filters:filters})}function DashboardsTable(_ref){let{dashboards,dashboardsLoading,filters,extraActions,hideActions}=_ref,{unpinDashboard,pinDashboard}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.h),{setFilters,tableSortingChanged}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.dJ),{tableSorting,currentTab}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.dJ),{hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__.userLogic),{currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_21__.teamLogic),{showDuplicateDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_20__.T),{showDeleteDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_19__.r),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref2){let{id}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{size:"small",onClick:pinned?()=>unpinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList):()=>pinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList),tooltip:pinned?"Unpin dashboard":"Pin dashboard",icon:pinned?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPinFilled,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPin,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(_,_ref3){let{id,name,description,is_shared,effective_privilege_level}=_ref3,isPrimary=id===currentTeam?.primary_dashboard,canEditDashboard=effective_privilege_level>=lib_constants__WEBPACK_IMPORTED_MODULE_6__.kH.CanEdit;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_12__.i,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{"data-attr":"dashboard-name",children:name||"Untitled"}),is_shared&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__.u,{title:"This dashboard is shared publicly.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconShare,{className:"ml-1 text-base text-link"})}),!canEditDashboard&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__.u,{title:_DashboardHeader__WEBPACK_IMPORTED_MODULE_26__.o,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconLock,{className:"ml-1 text-base text-secondary"})}),isPrimary&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_15__.u,{title:"The primary dashboard is shown on the project home page.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconHome,{className:"ml-1 text-base text-warning"})})})]}),description:description})},sorter:_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.q},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_25__.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_5__.D,{tags:tags,staticOnly:!0}):null}}]:[],(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__.JB)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__.rw)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_13__.pD)("last_accessed_at","Last accessed at"),hideActions?{}:{width:0,render:function RenderActions(_,_ref4){let{id,name,user_access_level}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_8__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).actions.setDashboardMode(null,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList)},fullWidth:!0,children:"View"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_AccessControlAction__WEBPACK_IMPORTED_MODULE_3__.bW,{resourceType:_types__WEBPACK_IMPORTED_MODULE_25__.qR.Dashboard,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_25__.W$.Editor,userAccessLevel:user_access_level,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_17__.BM)({id}).actions.setDashboardMode(_types__WEBPACK_IMPORTED_MODULE_25__.MN.Edit,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_16__.GU.DashboardsList)},fullWidth:!0,children:"Edit"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{onClick:()=>{showDuplicateDashboardModal(id,name)},fullWidth:!0,children:"Duplicate"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_9__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_10__.Q,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconHome,{className:"text-warning"}),fullWidth:!0,status:"warning",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("span",{className:"text-secondary",children:["Change the default dashboard",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("br",{}),"from the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_14__.r,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.projectHomepage(),children:"project home page"}),"."]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_9__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_AccessControlAction__WEBPACK_IMPORTED_MODULE_3__.bW,{resourceType:_types__WEBPACK_IMPORTED_MODULE_25__.qR.Dashboard,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_25__.W$.Editor,userAccessLevel:user_access_level,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{onClick:()=>showDeleteDashboardModal(id),fullWidth:!0,status:"danger",children:"Delete dashboard"})})]})})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.DF,{type:"search",placeholder:"Search for dashboards",onChange:x=>setFilters({search:x}),value:filters.search}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:"Filter to:"}),currentTab!==scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.NS.Pinned&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{active:filters.pinned,type:"secondary",size:"small",onClick:()=>setFilters({pinned:!filters.pinned}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPin,{}),children:"Pinned"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_7__.J,{active:filters.shared,type:"secondary",size:"small",onClick:()=>setFilters({shared:!filters.shared}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconShare,{}),children:"Shared"})})]}),currentTab!==scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_18__.NS.Yours&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:"Created by:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_4__.a,{value:"All users"===filters.createdBy?null:filters.createdBy,onChange:user=>setFilters({createdBy:user?.uuid||"All users"})})]}),extraActions]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_11__.g,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:dashboards,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns:columns,loading:dashboardsLoading,defaultSorting:tableSorting,onSort:tableSortingChanged,emptyState:"No dashboards matching your filters!",nouns:["dashboard","dashboards"]})]})}},"../../frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NS:()=>DashboardsTab,dJ:()=>dashboardsLogic});var fuse_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),lib_logic_scenes_tabAwareActionToUrl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareActionToUrl.ts"),lib_logic_scenes_tabAwareScene__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareScene.ts"),lib_logic_scenes_tabAwareUrlToAction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareUrlToAction.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/utils.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx");let DashboardsTab=function(DashboardsTab){return DashboardsTab.All="all",DashboardsTab.Yours="yours",DashboardsTab.Pinned="pinned",DashboardsTab.Templates="templates",DashboardsTab}({}),DEFAULT_SORTING={columnKey:"name",order:1},DEFAULT_FILTERS={search:"",createdBy:"All users",pinned:!1,shared:!1},dashboardsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","dashboard","dashboardsLogic"]),(0,lib_logic_scenes_tabAwareScene__WEBPACK_IMPORTED_MODULE_4__.P)(),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__.userLogic,["user"],lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_2__.featureFlagLogic,["featureFlags"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setCurrentTab:tab=>({tab}),setFilters:filters=>({filters}),tableSortingChanged:sorting=>({sorting})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({tableSorting:[DEFAULT_SORTING,{persist:!0},{tableSortingChanged:(_,_ref)=>{let{sorting}=_ref;return sorting||DEFAULT_SORTING}}],currentTab:[DashboardsTab.All,{setCurrentTab:(_,_ref2)=>{let{tab}=_ref2;return tab}}],filters:[DEFAULT_FILTERS,{setFilters:(state,_ref3)=>{let{filters}=_ref3;return(0,lib_utils__WEBPACK_IMPORTED_MODULE_6__.hO)({...state,...filters})}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({isFiltering:[s=>[s.filters],filters=>Object.keys(filters).some(key=>filters[key]!==DEFAULT_FILTERS[key])],dashboards:[s=>[_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_8__.h.selectors.nameSortedDashboards,s.filters,s.fuse,s.currentTab,s.user],(dashboards,filters,fuse,currentTab,user)=>{let haystack=dashboards;return filters.search&&(haystack=fuse.search(filters.search).map(result=>result.item)),currentTab===DashboardsTab.Pinned&&(haystack=haystack.filter(d=>d.pinned)),filters.shared&&(haystack=haystack.filter(d=>d.is_shared)),currentTab===DashboardsTab.Yours?haystack=haystack.filter(d=>d.created_by?.uuid===user?.uuid):"All users"!==filters.createdBy&&(haystack=haystack.filter(d=>d.created_by?.uuid===filters.createdBy)),haystack}],fuse:[()=>[_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_8__.h.selectors.nameSortedDashboards],dashboards=>new fuse_js__WEBPACK_IMPORTED_MODULE_9__.Z(dashboards,{keys:["key","name","description","tags"],threshold:.3})]}),(0,lib_logic_scenes_tabAwareActionToUrl__WEBPACK_IMPORTED_MODULE_3__.N)(_ref4=>{let{values}=_ref4;return{setCurrentTab:()=>{let tab=values.currentTab===DashboardsTab.All?void 0:values.currentTab;kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.searchParams.tab!==tab&&kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.push(kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.location.pathname,{...kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.searchParams,tab})}}}),(0,lib_logic_scenes_tabAwareUrlToAction__WEBPACK_IMPORTED_MODULE_5__.O)(_ref5=>{let{actions}=_ref5;return{"/dashboard":(_,searchParams)=>{let tab=searchParams.tab||DashboardsTab.All;actions.setCurrentTab(tab)}}})])}}]);