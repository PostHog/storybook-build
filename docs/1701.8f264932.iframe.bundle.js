"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[1701],{"./frontend/src/scenes/experiments/Experiments.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Experiments:()=>Experiments,scene:()=>scene});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/hedgehogs.tsx"),lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/MemberSelect.tsx"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/components/Table/utils.tsx"),lib_dayjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/dayjs.ts"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonMarkdown__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonMarkdown/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/lib/utils/stringWithWBR.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_types__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./frontend/src/types.ts"),_Experiment__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./frontend/src/scenes/experiments/Experiment.tsx"),_experimentsLogic__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./frontend/src/scenes/experiments/experimentsLogic.ts"),_ExperimentsPayGate__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./frontend/src/scenes/experiments/ExperimentsPayGate.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const scene={component:Experiments,logic:_experimentsLogic__WEBPACK_IMPORTED_MODULE_22__.OK};function Experiments(){const{filteredExperiments,experimentsLoading,tab,searchTerm,shouldShowEmptyState,shouldShowProductIntroduction,searchStatus,userFilter}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_experimentsLogic__WEBPACK_IMPORTED_MODULE_22__.OK),{setExperimentsTab,deleteExperiment,archiveExperiment,setSearchStatus,setSearchTerm,setUserFilter}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_experimentsLogic__WEBPACK_IMPORTED_MODULE_22__.OK),{hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_19__.userLogic),EXPERIMENTS_PRODUCT_DESCRIPTION="A/B testing help you test changes to your product to see which changes will lead to optimal results. Automatic statistical calculations let you see if the results are valid or if they are likely just a chance occurrence.",getExperimentDuration=experiment=>experiment.end_date?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_8__.Bv)(experiment.end_date).diff((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_8__.Bv)(experiment.start_date),"day"):experiment.start_date?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_8__.Bv)().diff((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_8__.Bv)(experiment.start_date),"day"):void 0,columns=[{title:(0,lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_7__.P)("Name"),dataIndex:"name",className:"ph-no-capture",sticky:!0,width:"40%",render:function Render(_,experiment){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_16__.r,{to:experiment.id?scenes_urls__WEBPACK_IMPORTED_MODULE_18__.j.experiment(experiment.id):void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{className:"row-name",children:(0,lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_17__.Z)(experiment.name,17)})}),experiment.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonMarkdown__WEBPACK_IMPORTED_MODULE_12__.j,{className:"row-description",lowKeyHeadings:!0,children:experiment.description})]})}},(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_14__.JB)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_14__.rw)(),{title:"Duration",key:"duration",render:function Render(_,experiment){const duration=getExperimentDuration(experiment);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{children:void 0!==duration?`${duration} day${1!==duration?"s":""}`:"--"})},sorter:(a,b)=>{var _getExperimentDuratio,_getExperimentDuratio2;return(null!==(_getExperimentDuratio=getExperimentDuration(a))&&void 0!==_getExperimentDuratio?_getExperimentDuratio:-1)>(null!==(_getExperimentDuratio2=getExperimentDuration(b))&&void 0!==_getExperimentDuratio2?_getExperimentDuratio2:-1)?1:-1},align:"right"},{title:"Status",key:"status",render:function Render(_,experiment){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_Experiment__WEBPACK_IMPORTED_MODULE_21__.StatusTag,{experiment})},align:"center",sorter:(a,b)=>{const statusA=(0,_experimentsLogic__WEBPACK_IMPORTED_MODULE_22__.Ot)(a),statusB=(0,_experimentsLogic__WEBPACK_IMPORTED_MODULE_22__.Ot)(b),score={draft:1,running:2,complete:3};return score[statusA]>score[statusB]?1:-1}},{width:0,render:function Render(_,experiment){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_10__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_18__.j.experiment(`${experiment.id}`),size:"small",fullWidth:!0,children:"View"}),!experiment.archived&&experiment?.end_date&&(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_8__.Bv)().isSameOrAfter((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_8__.Bv)(experiment.end_date),"day")&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.J,{onClick:()=>archiveExperiment(experiment.id),"data-attr":`experiment-${experiment.id}-dropdown-archive`,fullWidth:!0,children:"Archive experiment"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_11__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.J,{status:"danger",onClick:()=>deleteExperiment(experiment.id),"data-attr":`experiment-${experiment.id}-dropdown-remove`,fullWidth:!0,children:"Delete experiment"})]})})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_5__.m,{buttons:hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_20__.P$.EXPERIMENTATION)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.J,{type:"primary","data-attr":"create-experiment",to:scenes_urls__WEBPACK_IMPORTED_MODULE_18__.j.experiment("new"),children:"New experiment"}):void 0,caption:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_16__.r,{"data-attr":"experiment-help",to:"https://posthog.com/docs/experiments/installation?utm_medium=in-product&utm_campaign=new-experiment",target:"_blank",children:[" ","Visit the guide"]})," ","to learn more."]}),tabbedPage:hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_20__.P$.EXPERIMENTATION)}),hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_20__.P$.EXPERIMENTATION)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_15__.T,{activeKey:tab,onChange:newKey=>setExperimentsTab(newKey),tabs:[{key:_types__WEBPACK_IMPORTED_MODULE_20__.F7.All,label:"All experiments"},{key:_types__WEBPACK_IMPORTED_MODULE_20__.F7.Yours,label:"Your experiments"},{key:_types__WEBPACK_IMPORTED_MODULE_20__.F7.Archived,label:"Archived experiments"}]}),(shouldShowEmptyState||shouldShowProductIntroduction)&&(tab===_types__WEBPACK_IMPORTED_MODULE_20__.F7.Archived?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_6__.C,{productName:"A/B testing",productKey:_types__WEBPACK_IMPORTED_MODULE_20__.Md.EXPERIMENTS,thingName:"archived experiment",description:EXPERIMENTS_PRODUCT_DESCRIPTION,docsURL:"https://posthog.com/docs/experiments",isEmpty:shouldShowEmptyState}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_6__.C,{productName:"A/B testing",productKey:_types__WEBPACK_IMPORTED_MODULE_20__.Md.EXPERIMENTS,thingName:"experiment",description:EXPERIMENTS_PRODUCT_DESCRIPTION,docsURL:"https://posthog.com/docs/experiments",action:()=>kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_18__.j.experiment("new")),isEmpty:shouldShowEmptyState,customHog:lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_3__.ExperimentsHog})),!shouldShowEmptyState&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonInput,{type:"search",placeholder:"Search experiments",onChange:setSearchTerm,value:searchTerm}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("b",{children:"Status"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonSelect,{size:"small",onChange:status=>{status&&setSearchStatus(status)},options:[{label:"All",value:"all"},{label:"Draft",value:_types__WEBPACK_IMPORTED_MODULE_20__.mN.Draft},{label:"Running",value:_types__WEBPACK_IMPORTED_MODULE_20__.mN.Running},{label:"Complete",value:_types__WEBPACK_IMPORTED_MODULE_20__.mN.Complete}],value:null!=searchStatus?searchStatus:"all",dropdownMatchSelectWidth:!1,dropdownMaxContentWidth:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{className:"ml-1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("b",{children:"Created by"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_4__.a,{defaultLabel:"Any user",value:null!=userFilter?userFilter:null,onChange:user=>{var _user$uuid;return setUserFilter(null!==(_user$uuid=user?.uuid)&&void 0!==_user$uuid?_user$uuid:null)}})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_13__.g,{dataSource:filteredExperiments,columns,rowKey:"id",loading:experimentsLoading,defaultSorting:{columnKey:"created_at",order:-1},noSortingCancellation:!0,pagination:{pageSize:100},nouns:["experiment","experiments"],"data-attr":"experiment-table"})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_ExperimentsPayGate__WEBPACK_IMPORTED_MODULE_23__.p,{})]})}}}]);