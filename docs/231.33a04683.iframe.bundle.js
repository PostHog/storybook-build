(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(oe,D,e){"use strict";e.d(D,"a",function(){return Ye});var G=e("./node_modules/core-js/modules/es.array.includes.js"),Z=e.n(G),Ie=e("./node_modules/core-js/modules/es.array.iterator.js"),he=e.n(Ie),Ee=e("./node_modules/core-js/modules/es.object.to-string.js"),ze=e.n(Ee),Je=e("./node_modules/core-js/modules/es.object.values.js"),ce=e.n(Je),t=e("./node_modules/core-js/modules/es.string.includes.js"),j=e.n(t),Ke=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ne=e.n(Ke),s=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Ue=e.n(s),L=e("./node_modules/kea/lib/index.esm.js"),K=e("./frontend/src/lib/utils.tsx"),I=e("./frontend/src/types.ts"),y=e("./frontend/src/scenes/insights/sharedUtils.ts"),h=e("./frontend/src/scenes/insights/insightLogic.ts");function se(_,k){var te=Object.keys(_);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(_);k&&(de=de.filter(function(be){return Object.getOwnPropertyDescriptor(_,be).enumerable})),te.push.apply(te,de)}return te}function Fe(_){for(var k=1;k<arguments.length;k++){var te=arguments[k]!=null?arguments[k]:{};k%2?se(Object(te),!0).forEach(function(de){Ue()(_,de,te[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(te)):se(Object(te)).forEach(function(de){Object.defineProperty(_,de,Object.getOwnPropertyDescriptor(te,de))})}return _}function ie(_){return Object.values(I.o).includes(_)}var Ye=Object(L.kea)({props:{},key:Object(y.c)("new"),path:function(k){return["lib","components","ChartFilter","chartFilterLogic",k]},connect:function(k){return{actions:[Object(h.c)(k),["setFilters"]],values:[Object(h.c)(k),["filters"]]}},actions:function(){return{setChartFilter:function(te){return{chartFilter:te}}}},selectors:{chartFilter:[function(_){return[_.filters]},function(_){var k=_.display,te=_.funnel_viz_type;return(k===I.d.FunnelViz?te:k)||null}]},listeners:function(k){var te=k.actions,de=k.values;return{setChartFilter:function(ht){var He=ht.chartFilter,Ze=de.filters,q=Ze.display,Ge=Ze.funnel_viz_type;ie(He)?(Ge!==He||q!==I.d.FunnelViz)&&te.setFilters(Fe(Fe({},de.filters),{},{display:I.d.FunnelViz,funnel_viz_type:He})):Object(K.mb)(q,He)||te.setFilters(Fe(Fe({},de.filters),{},{display:He}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(oe,D,e){"use strict";e.d(D,"a",function(){return K});var G=e("./node_modules/core-js/modules/es.array.iterator.js"),Z=e.n(G),Ie=e("./node_modules/core-js/modules/es.object.to-string.js"),he=e.n(Ie),Ee=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ze=e.n(Ee),Je=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ce=e.n(Je),t=e("./node_modules/kea/lib/index.esm.js"),j=e("./frontend/src/lib/utils.tsx"),Ke=e("./frontend/src/types.ts"),Ne=e("./frontend/src/scenes/insights/sharedUtils.ts"),s=e("./frontend/src/scenes/insights/insightLogic.ts");function Ue(I,y){var h=Object.keys(I);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(I);y&&(se=se.filter(function(Fe){return Object.getOwnPropertyDescriptor(I,Fe).enumerable})),h.push.apply(h,se)}return h}function L(I){for(var y=1;y<arguments.length;y++){var h=arguments[y]!=null?arguments[y]:{};y%2?Ue(Object(h),!0).forEach(function(se){ce()(I,se,h[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(h)):Ue(Object(h)).forEach(function(se){Object.defineProperty(I,se,Object.getOwnPropertyDescriptor(h,se))})}return I}var K=Object(t.kea)({props:{},key:Object(Ne.c)("new"),path:function(y){return["lib","components","CompareFilter","compareFilterLogic",y]},connect:function(y){return{actions:[Object(s.c)(y),["setFilters"]],values:[Object(s.c)(y),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(h){return{compare:h}},toggleCompare:!0}},selectors:{compare:[function(I){return[I.filters]},function(I){return!!(I!=null&&I.compare)}],disabled:[function(I){return[I.filters,I.canEditInsight]},function(I,y){var h=I.insight,se=I.date_from,Fe=I.display;return!y||h===Ke.s.LIFECYCLE||Fe===Ke.d.WorldMap||se==="all"}]},listeners:function(y){var h=y.values,se=y.actions;return{setCompare:function(ie){var Ye=ie.compare;Object(j.mb)(Ye,h.compare)||se.setFilters(L(L({},h.filters),{},{compare:Ye}))},toggleCompare:function(){se.setCompare(!h.compare)}}}})},"./frontend/src/lib/components/CopyToClipboard.tsx":function(oe,D,e){"use strict";e.d(D,"a",function(){return Ye});var G=e("./node_modules/core-js/modules/es.symbol.js"),Z=e.n(G),Ie=e("./node_modules/core-js/modules/es.symbol.description.js"),he=e.n(Ie),Ee=e("./node_modules/core-js/modules/es.object.to-string.js"),ze=e.n(Ee),Je=e("./node_modules/core-js/modules/es.regexp.to-string.js"),ce=e.n(Je),t=e("./node_modules/@babel/runtime/helpers/extends.js"),j=e.n(t),Ke=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Ne=e.n(Ke),s=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),Ue=e.n(s),L=e("./node_modules/react/index.js"),K=e.n(L),I=e("./frontend/src/lib/utils.tsx"),y=e("./frontend/src/lib/components/Tooltip.tsx"),h=e("./frontend/src/lib/components/icons.tsx"),se=e("./frontend/src/lib/components/LemonButton/index.ts");function Fe(_,k){var te=Object.keys(_);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(_);k&&(de=de.filter(function(be){return Object.getOwnPropertyDescriptor(_,be).enumerable})),te.push.apply(te,de)}return te}function ie(_){for(var k=1;k<arguments.length;k++){var te=arguments[k]!=null?arguments[k]:{};k%2?Fe(Object(te),!0).forEach(function(de){Ne()(_,de,te[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(te)):Fe(Object(te)).forEach(function(de){Object.defineProperty(_,de,Object.getOwnPropertyDescriptor(te,de))})}return _}function Ye(_){var k=_.children,te=_.explicitValue,de=_.description,be=_.selectable,ht=be===void 0?!1:be,He=_.isValueSensitive,Ze=He===void 0?!1:He,q=_.tooltipMessage,Ge=q===void 0?null:q,n=_.iconStyle,o=n===void 0?{}:n,Q=_.iconPosition,V=Q===void 0?"end":Q,O=_.style,ne=Ue()(_,["children","explicitValue","description","selectable","isValueSensitive","tooltipMessage","iconStyle","iconPosition","style"]),jt=function(){return Object(I.t)(te!=null?te:k?k.toString():"",de)},Re=K.a.createElement("span",j()({className:Ze?"ph-no-capture":"",style:ie({cursor:ht?"text":"pointer",display:"inline-flex",alignItems:"center",flexDirection:V==="end"?"row":"row-reverse",flexWrap:"nowrap",width:"fit-content",wordBreak:"break-all"},O),onClick:ht?void 0:jt},ne),K.a.createElement("span",{style:V==="start"?{flexGrow:1}:{}},k),K.a.createElement(se.a,{compact:!0,icon:K.a.createElement(h.IconCopy,null),className:"copy-icon",onClick:ht?jt:void 0,style:ie(Ne()({},V==="end"?"marginLeft":"marginRight",4),o)}));return!ht||Ge!==null?K.a.createElement(y.a,{title:Ge||"Click to copy"},Re):K.a.createElement(K.a.Fragment,null,Re)}try{Ye.displayName="CopyToClipboardInline",Ye.__docgenInfo={description:"",displayName:"CopyToClipboardInline",props:{explicitValue:{defaultValue:null,description:"",name:"explicitValue",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},selectable:{defaultValue:{value:"false"},description:"Makes text selectable instead of copying on click anywhere",name:"selectable",required:!1,type:{name:"boolean"}},isValueSensitive:{defaultValue:{value:"false"},description:"",name:"isValueSensitive",required:!1,type:{name:"boolean"}},tooltipMessage:{defaultValue:{value:"null"},description:"",name:"tooltipMessage",required:!1,type:{name:"string | null"}},iconStyle:{defaultValue:{value:"{}"},description:"",name:"iconStyle",required:!1,type:{name:"Record<string, string | number>"}},iconPosition:{defaultValue:{value:"end"},description:"",name:"iconPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"]={docgenInfo:Ye.__docgenInfo,name:"CopyToClipboardInline",path:"frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"})}catch(_){}},"./frontend/src/lib/components/PropertiesTable.tsx":function(oe,D,e){"use strict";e.d(D,"a",function(){return st});var G=e("./node_modules/core-js/modules/es.array.filter.js"),Z=e("./node_modules/core-js/modules/es.array.includes.js"),Ie=e("./node_modules/core-js/modules/es.array.map.js"),he=e("./node_modules/core-js/modules/es.array.some.js"),Ee=e("./node_modules/core-js/modules/es.object.entries.js"),ze=e("./node_modules/core-js/modules/es.string.includes.js"),Je=e("./node_modules/core-js/modules/es.string.starts-with.js"),ce=e("./node_modules/@babel/runtime/helpers/typeof.js"),t=e.n(ce),j=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ke=e.n(j),Ne=e("./node_modules/react/index.js"),s=e.n(Ne),Ue=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),L=e("./node_modules/antd/es/input/index.js"),K=e("./node_modules/antd/es/dropdown/index.js"),I=e("./node_modules/antd/es/menu/index.js"),y=e("./node_modules/antd/es/popconfirm/index.js"),h=e("./frontend/src/lib/utils.tsx"),se=e("./frontend/src/lib/components/icons.tsx"),Fe=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ie=e.n(Fe),Ye=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss"),_=e.n(Ye),k={};k.insert="head",k.singleton=!1;var te=ie()(_.a,k),de=_.a.locals||{},be=e("./frontend/src/lib/components/LemonTable/index.ts"),ht=e("./frontend/src/lib/components/CopyToClipboard.tsx"),He=e("./node_modules/kea/lib/index.esm.js"),Ze=e("./frontend/src/models/propertyDefinitionsModel.ts"),q=e("./frontend/src/lib/components/LemonButton/index.ts"),Ge=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=e.n(Ge),o=e("./node_modules/antd/es/radio/index.js"),Q=e("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),V=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),O=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),ne=e("./node_modules/@ant-design/icons/es/icons/StopOutlined.js"),jt=e("./node_modules/antd/lib/modal/Modal.js"),Re=e.n(jt);function Lt(J,le){var Oe=Object.keys(J);if(Object.getOwnPropertySymbols){var De=Object.getOwnPropertySymbols(J);le&&(De=De.filter(function(dt){return Object.getOwnPropertyDescriptor(J,dt).enumerable})),Oe.push.apply(Oe,De)}return Oe}function ct(J){for(var le=1;le<arguments.length;le++){var Oe=arguments[le]!=null?arguments[le]:{};le%2?Lt(Object(Oe),!0).forEach(function(De){n()(J,De,Oe[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(Oe)):Lt(Object(Oe)).forEach(function(De){Object.defineProperty(J,De,Object.getOwnPropertyDescriptor(Oe,De))})}return J}function Kt(J){var le=J.editProperty,Oe={creating:!1,propertyType:"string"},De=Object(Ne.useState)(Oe),dt=Ke()(De,2),_e=dt[0],ut=dt[1],Ct=function(){_e.key&&_e.value!==void 0&&(le(_e.key,_e.value),ut(Oe))};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mb"},s.a.createElement("div",{className:"text-right"},s.a.createElement(q.a,{"data-attr":"add-prop-button",onClick:function(){return ut(ct(ct({},_e),{},{creating:!0}))},type:"primary"},"New property"))),s.a.createElement(Re.a,{visible:_e.creating,destroyOnClose:!0,onCancel:function(){return ut(Oe)},title:"Adding new property",okText:s.a.createElement(s.a.Fragment,null,s.a.createElement(Q.a,{style:{marginRight:4}}),"Save Property"),okButtonProps:{disabled:!_e.key||_e.value===void 0},onOk:Ct},s.a.createElement("div",{className:"input-set"},s.a.createElement("label",{htmlFor:"propertyKey"},"Key"),s.a.createElement(L.a,{id:"propertyKey",autoFocus:!0,placeholder:"try email, first_name, is_verified, membership_level, total_revenue",onChange:function(U){return ut(ct(ct({},_e),{},{key:U.target.value}))}})),s.a.createElement("div",{className:"input-set"},s.a.createElement("label",{htmlFor:"propertyType"},"Type of Property"),s.a.createElement("div",null,s.a.createElement(o.a.Group,{value:_e.propertyType,onChange:function(U){return ut(ct(ct({},_e),{},{propertyType:U.target.value,value:U.target.value==="string"?void 0:"true"}))},id:"propertyType",buttonStyle:"solid"},s.a.createElement(o.a.Button,{value:"string"},"Text or Number"),s.a.createElement(o.a.Button,{value:"boolean"},"Boolean or Null")))),s.a.createElement("div",{className:"input-set"},s.a.createElement("label",{htmlFor:"propertyValue"},"Value"),_e.propertyType==="boolean"?s.a.createElement("div",null,s.a.createElement(o.a.Group,{value:_e.value,onChange:function(U){return ut(ct(ct({},_e),{},{value:U.target.value}))},id:"propertyValue",buttonStyle:"solid"},s.a.createElement(o.a.Button,{value:"true",defaultChecked:!0},s.a.createElement(V.a,null)," True"),s.a.createElement(o.a.Button,{value:"false"},s.a.createElement(O.a,null)," False"),s.a.createElement(o.a.Button,{value:"null"},s.a.createElement(ne.a,null)," Null"))):s.a.createElement(L.a,{placeholder:"try email@example.com, gold, 1",onChange:function(U){return ut(ct(ct({},_e),{},{value:U.target.value}))},id:"propertyValue",onKeyDown:function(U){return U.key==="Enter"&&Ct()}}))))}try{Kt.displayName="NewPropertyComponent",Kt.__docgenInfo={description:"",displayName:"NewPropertyComponent",props:{editProperty:{defaultValue:null,description:"",name:"editProperty",required:!0,type:{name:"(key: string, newValue?: string | number | boolean | null | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"]={docgenInfo:Kt.__docgenInfo,name:"NewPropertyComponent",path:"frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"})}catch(J){}function Xt(J){var le=J.value,Oe=J.onChange;return s.a.createElement(L.a,{defaultValue:le,autoFocus:!0,onBlur:function(){return Oe(null,!1)},onPressEnter:function(dt){return Oe(dt.target.value,!0)}})}function cn(J){var le=J.value,Oe=J.rootKey,De=J.onEdit,dt=J.nestingLevel,_e=J.useDetectedPropertyType,ut=Object(He.useValues)(Ze.a),Ct=ut.describeProperty,Me=Object(Ne.useState)(!1),U=Ke()(Me,2),kt=U[0],Et=U[1],Le=Oe&&!Ue.e.includes(Oe)&&(!dt||dt<=1)&&De,yt=["string","number","bigint"],S=["boolean","null"],lt;Oe&&_e&&(lt=Ct(Oe));var me=le===null?"null":t()(le),ge=le===null?"null":String(le),Rt=function(Ae,Se){Et(!1),Oe!==void 0&&Se&&De&&Ae!=le&&De(Oe,Ae,le)},We=s.a.createElement("span",{className:Le?"editable ph-no-capture":"ph-no-capture",onClick:function(){return Le&&yt.includes(me)&&Et(!0)}},Object(h.eb)(le)?s.a.createElement("a",{href:le,target:"_blank",rel:"noopener noreferrer",className:"value-link"},s.a.createElement("span",null,ge),s.a.createElement(se.IconOpenInNew,null)):ge);return s.a.createElement("div",{className:"properties-table-value"},kt?s.a.createElement(Xt,{value:le,onChange:Rt}):s.a.createElement(s.a.Fragment,null,Le&&S.includes(me)?s.a.createElement(K.a,{overlay:s.a.createElement(I.a,{onClick:function(Ae){var Se=Ae.key,ye=null;Se==="t"?ye=!0:Se==="f"&&(ye=!1),Rt(ye,!0)}},s.a.createElement(I.a.Item,{key:"t"},"true"),s.a.createElement(I.a.Item,{key:"f"},"false"),s.a.createElement(I.a.Item,{key:"n",danger:!0},"null"))},We):s.a.createElement(ht.a,{description:"property value",explicitValue:ge,selectable:!0,isValueSensitive:!0},We),s.a.createElement("div",{className:"property-value-type"},lt||me)))}function st(J){var le=J.properties,Oe=J.rootKey,De=J.onEdit,dt=J.sortProperties,_e=dt===void 0?!1:dt,ut=J.searchable,Ct=ut===void 0?!1:ut,Me=J.embedded,U=Me===void 0?!0:Me,kt=J.nestingLevel,Et=kt===void 0?0:kt,Le=J.onDelete,yt=J.className,S=J.useDetectedPropertyType,lt=Object(Ne.useState)(""),me=Ke()(lt,2),ge=me[0],Rt=me[1],We=Object(Ne.useMemo)(function(){if(!(le instanceof Object))return[];var Ae=Object.entries(le);if(ge){var Se=ge.toLowerCase();Ae=Ae.filter(function(ye){var mt=Ke()(ye,2),zt=mt[0],tt=mt[1];return zt.toLowerCase().includes(Se)||JSON.stringify(tt).toLowerCase().includes(Se)})}return _e&&Ae.sort(function(ye,mt){var zt=Ke()(ye,1),tt=zt[0],It=Ke()(mt,1),At=It[0];return tt[0]==="$"&&At[0]!=="$"?1:tt[0]!=="$"&&At[0]==="$"||tt.toLowerCase()<At.toLowerCase()?-1:1}),Ae},[le,_e,ge]);if(Array.isArray(le))return s.a.createElement("div",null,le.length?le.map(function(Ae,Se){return s.a.createElement(st,{key:Se,properties:Ae,nestingLevel:Et+1,useDetectedPropertyType:["$set","$set_once"].some(function(ye){return ye===Oe})?!1:S})}):s.a.createElement("div",{className:"property-value-type"},"ARRAY (EMPTY)"));var _t=[{key:"key",title:"Key",width:"20rem",render:function(Se,ye){return s.a.createElement("div",{className:"properties-table-key"},s.a.createElement(Ue.a,{value:ye[0]}))},sorter:function(Se,ye){return String(Se[0]).localeCompare(String(ye[0]))}},{key:"value",title:"Value",render:function(Se,ye){return s.a.createElement(st,{properties:ye[1],rootKey:ye[0],onEdit:De,nestingLevel:Et+1,useDetectedPropertyType:["$set","$set_once"].some(function(mt){return mt===Oe})?!1:S})}}];return Le&&Et===0&&_t.push({key:"delete",title:"",width:0,render:function(Se,ye){return!Ue.e.includes(ye[0])&&!String(ye[0]).startsWith("$initial_")&&s.a.createElement(y.a,{onConfirm:function(){return Le(ye[0])},okButtonProps:{danger:!0},okText:"Delete",title:s.a.createElement(s.a.Fragment,null,"Are you sure you want to delete property ",s.a.createElement("code",null,ye[0]),"?"," ",s.a.createElement("b",null,"This cannot be undone.")),placement:"left"},s.a.createElement(q.a,{icon:s.a.createElement(se.IconDeleteForever,null),status:"danger",compact:!0}))}}),le instanceof Object?s.a.createElement(s.a.Fragment,null,Ct&&s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},s.a.createElement(L.a.Search,{placeholder:"Search for property keys and values",className:"mb",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:ge,onChange:function(Se){Rt(Se.target.value)}}),De&&s.a.createElement(Kt,{editProperty:De})),s.a.createElement(be.a,{columns:_t,showHeader:!U,size:"small",rowKey:"0",embedded:U,dataSource:We,className:yt,emptyState:"This property value is an empty object."})):s.a.createElement(cn,{value:le,rootKey:Oe,onEdit:De,nestingLevel:Et,useDetectedPropertyType:S})}try{st.displayName="PropertiesTable",st.__docgenInfo={description:"",displayName:"PropertiesTable",props:{properties:{defaultValue:null,description:"",name:"properties",required:!0,type:{name:"any"}},sortProperties:{defaultValue:{value:"false"},description:"",name:"sortProperties",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"",name:"searchable",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"true"},description:"Whether this table should be style for being embedded. Default: true.",name:"embedded",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((key: string) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},useDetectedPropertyType:{defaultValue:null,description:"",name:"useDetectedPropertyType",required:!1,type:{name:"boolean"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((key: string, newValue: any, oldValue?: any) => void)"}},nestingLevel:{defaultValue:{value:"0"},description:"",name:"nestingLevel",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"]={docgenInfo:st.__docgenInfo,name:"PropertiesTable",path:"frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"})}catch(J){}},"./frontend/src/scenes/experiments/Experiment.tsx":function(oe,D,e){"use strict";e.r(D),e.d(D,"scene",function(){return ta}),e.d(D,"Experiment_",function(){return Cn}),e.d(D,"CodeLanguageSelect",function(){return Yn});var G=e("./node_modules/core-js/modules/es.symbol.js"),Z=e("./node_modules/core-js/modules/es.symbol.description.js"),Ie=e("./node_modules/core-js/modules/es.array.concat.js"),he=e("./node_modules/core-js/modules/es.array.filter.js"),Ee=e("./node_modules/core-js/modules/es.array.map.js"),ze=e("./node_modules/core-js/modules/es.array.reduce.js"),Je=e("./node_modules/core-js/modules/es.function.name.js"),ce=e("./node_modules/core-js/modules/es.number.constructor.js"),t=e("./node_modules/core-js/modules/es.number.to-fixed.js"),j=e("./node_modules/core-js/modules/es.object.keys.js"),Ke=e("./node_modules/core-js/modules/es.object.to-string.js"),Ne=e("./node_modules/core-js/modules/es.regexp.to-string.js"),s=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Ue=e.n(s),L=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),K=e.n(L),I=e("./node_modules/antd/es/form/index.js"),y=e("./node_modules/antd/es/row/index.js"),h=e("./node_modules/antd/es/col/index.js"),se=e("./node_modules/antd/es/input/index.js"),Fe=e("./node_modules/antd/es/tooltip/index.js"),ie=e("./node_modules/antd/es/select/index.js"),Ye=e("./node_modules/antd/es/card/index.js"),_=e("./node_modules/antd/es/tag/index.js"),k=e("./node_modules/antd/es/collapse/index.js"),te=e("./node_modules/antd/es/skeleton/index.js"),de=e("./node_modules/antd/es/progress/index.js"),be=e("./node_modules/kea/lib/index.esm.js"),ht=e("./frontend/src/lib/components/PageHeader.tsx"),He=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Ze=e("./frontend/src/lib/components/PropertyFilters/utils.ts"),q=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Ge=e("./node_modules/react/index.js"),n=e.n(Ge),o=e("./frontend/src/scenes/funnels/funnelLogic.ts"),Q=e("./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx"),V=e("./frontend/src/scenes/insights/insightLogic.ts"),O=e("./frontend/src/types.ts"),ne=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),jt=e.n(ne),Re=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),Lt=e.n(Re),ct={};ct.insert="head",ct.singleton=!1;var Kt=jt()(Lt.a,ct),Xt=Lt.a.locals||{},cn=e("./node_modules/core-js/modules/es.array.fill.js"),st=e("./node_modules/core-js/modules/es.array.find.js"),J=e("./node_modules/core-js/modules/es.array.find-index.js"),le=e("./node_modules/core-js/modules/es.array.iterator.js"),Oe=e("./node_modules/core-js/modules/es.array.splice.js"),De=e("./node_modules/core-js/modules/es.number.epsilon.js"),dt=e("./node_modules/core-js/modules/es.object.values.js"),_e=e("./node_modules/core-js/modules/es.promise.js"),ut=e("./node_modules/core-js/modules/es.string.iterator.js"),Ct=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Me=e("./node_modules/@babel/runtime/regenerator/index.js"),U=e.n(Me),kt=e("./node_modules/regenerator-runtime/runtime.js"),Et=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Le=e.n(Et),yt=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),S=e.n(yt),lt=e("./frontend/src/lib/api.ts"),me=e("./frontend/src/lib/dayjs.ts"),ge=e("./frontend/src/lib/utils.tsx"),Rt=["furry","amusing","charming","tame","swift","clever","pleasant","tiny","wild","herbivorous","admirable","adorable","agile","beautiful","bossy","candid","cold","colorful","cuddly","curious","cute","energetic","fast","feisty","fierce","fluffy","friendly","fuzzy","grumpy","hairy","heavy","large","lazy","loud","lovable","loving","enchanted","maternal","sweet","messy","nocturnal","noisy","nosy","picky","playful","quick","sassy","scaly","short","shy","slow","small","smart","soft","strong","tall","tenacious","glorious","warm","cheerful","gracious"],We=["aardvark","albatross","alligator","alpaca","ant","anteater","antelope","ape","armadillo","donkey","baboon","badger","barracuda","bat","bear","beaver","bee","bison","boar","buffalo","butterfly","camel","capybara","caribou","cassowary","cat","caterpillar","cattle","chamois","cheetah","chicken","chimpanzee","chinchilla","chough","clam","cobra","cockroach","cod","cormorant","coyote","crab","crane","crocodile","crow","curlew","deer","dinosaur","dog","dogfish","dolphin","dotterel","dove","dragonfly","duck","dugong","dunlin","eagle","echidna","eel","eland","elephant","elk","emu","falcon","ferret","finch","firefox","fish","flamingo","fly","fox","frog","gaur","gazelle","gerbil","giraffe","gnat","gnu","goat","goldfinch","goldfish","goose","gorilla","goshawk","grasshopper","grouse","guanaco","gull","hamster","hare","hawk","hedgehog","heron","herring","hippopotamus","hornet","horse","human","hummingbird","hyena","ibex","ibis","jackal","jaguar","jay","jellyfish","kangaroo","kingfisher","koala","kookabura","kouprey","kudu","lapwing","lark","lemur","leopard","lion","llama","lobster","locust","loris","louse","lyrebird","magpie","mallard","manatee","mandrill","mantis","marten","meerkat","mink","mole","mongoose","monkey","moose","mosquito","mouse","mule","narwhal","newt","nightingale","octopus","okapi","opossum","oryx","ostrich","otter","owl","oyster","panther","parrot","partridge","peafowl","pelican","penguin","pheasant","pig","pigeon","pony","porcupine","porpoise","quail","quelea","quetzal","rabbit","raccoon","rail","ram","rat","raven","reindeer","rhinoceros","rook","salamander","salmon","sandpiper","sardine","scorpion","seahorse","seal","shark","sheep","shrew","skunk","snail","snake","sparrow","spider","spoonbill","squid","squirrel","starling","stingray","stinkbug","stork","swallow","swan","tapir","tarsier","termite","tiger","toad","trout","turkey","turtle","viper","vulture","wallaby","walrus","wasp","weasel","whale","wildcat","wolf","wolverine","wombat","woodcock","woodpecker","worm","wren","yak","zebra"];function _t(){return"".concat(Object(ge.j)(Object(ge.ub)(Rt))," ").concat(Object(ge.j)(Object(ge.ub)(We)))}var Ae=e("./frontend/src/scenes/insights/utils/cleanFilters.ts"),Se=e("./frontend/src/scenes/teamLogic.ts"),ye=e("./frontend/src/scenes/urls.ts"),mt=e("./node_modules/kea-router/lib/index.js"),zt=e("./frontend/src/scenes/experiments/experimentsLogic.ts"),tt=e("./frontend/src/lib/constants.tsx"),It=e("./frontend/src/scenes/trends/trendsLogic.ts"),At=e("./frontend/src/lib/utils/eventUsageLogic.ts"),dn=e("./frontend/src/scenes/userLogic.ts"),qe=e("./frontend/src/lib/components/Tooltip.tsx"),Qt=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Zt=e("./frontend/src/models/groupsModel.ts"),bn=e("./frontend/src/lib/components/lemonToast.tsx");function Bn(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,i)}return l}function z(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?Bn(Object(l),!0).forEach(function(i){Ue()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Bn(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}var qt=14,en=Object(be.kea)({props:{},key:function(r){return r.experimentId||"new"},path:function(r){return["scenes","experiment","experimentLogic",r]},connect:{values:[Se.a,["currentTeamId"],dn.a,["hasAvailableFeature"],Zt.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[zt.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:function(r){return{experiment:r}},createExperiment:function(r,l,i){return{draft:r,runningTime:l,sampleSize:i}},setExperimentInsightId:function(r){return{shortId:r}},createNewExperimentInsight:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setNewExperimentData:function(r){return{experimentData:r}},updateExperimentGroup:function(r,l){return{variant:r,idx:l}},removeExperimentGroup:function(r){return{idx:r}},setExperimentInsightType:function(r){return{insightType:r}},setEditExperiment:function(r){return{editing:r}},setSecondaryMetrics:function(r){return{secondaryMetrics:r}},resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:function(r,l){var i=l.experimentData;if(i.filters){var p=z(z({},r==null?void 0:r.filters),i.filters);return z(z(z({},r),i),{},{filters:p})}if(i.parameters){var x=z(z({},r==null?void 0:r.parameters),i.parameters);return z(z(z({},r),i),{},{parameters:x})}return z(z({},r),i)},updateExperimentGroup:function(r,l){var i,p=l.variant,x=l.idx,b=S()((r==null||(i=r.parameters)===null||i===void 0?void 0:i.feature_flag_variants)||[]);return b[x]=z(z({},b[x]),p),z(z({},r),{},{parameters:z(z({},r==null?void 0:r.parameters),{},{feature_flag_variants:b})})},addExperimentGroup:function(r){var l;if(!(r==null||(l=r.parameters)===null||l===void 0)&&l.feature_flag_variants){var i=un(r.parameters.feature_flag_variants.length+1),p=r.parameters.feature_flag_variants.map(function(x,b){return z(z({},x),{},{rollout_percentage:i[b]})});return z(z({},r),{},{parameters:z(z({},r.parameters),{},{feature_flag_variants:[].concat(S()(p),[{key:"test_group_".concat(r.parameters.feature_flag_variants.length),rollout_percentage:i[i.length-1]}])})})}return r},removeExperimentGroup:function(r,l){var i,p,x=l.idx;if(!r)return r;var b=S()(((i=r.parameters)===null||i===void 0?void 0:i.feature_flag_variants)||[]);b.splice(x,1);var u=un(((r==null||(p=r.parameters)===null||p===void 0?void 0:p.feature_flag_variants)||[]).length-1),P=b.map(function(f,ee){return z(z({},f),{},{rollout_percentage:u[ee]})});return z(z({},r),{},{parameters:z(z({},r.parameters),{},{feature_flag_variants:P})})},setSecondaryMetrics:function(r,l){var i=l.secondaryMetrics,p=i.map(function(x){return x});return z(z({},r),{},{secondary_metrics:p})},resetNewExperiment:function(){return{parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}}}}],experimentInsightType:[O.s.TRENDS,{setExperimentInsightType:function(r,l){var i=l.insightType;return i}}],experimentInsightId:[null,{setExperimentInsightId:function(r,l){var i=l.shortId;return i}}],editingExistingExperiment:[!1,{setEditExperiment:function(r,l){var i=l.editing;return i}}]},listeners:function(r){var l=r.values,i=r.props,p=r.actions;return{createExperiment:function(){var x=Le()(U.a.mark(function u(P){var f,ee,fe,Pe,B,w,v,Ve,Ft,Vt;return U.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(ee=P.draft,fe=P.runningTime,Pe=P.sampleSize,B=null,w=!!i.experimentId&&i.experimentId!=="new",Y.prev=3,!w){Y.next=14;break}return Y.next=7,lt.b.update("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId),z(z({},l.newExperimentData),{},{parameters:z(z({},(v=l.newExperimentData)===null||v===void 0?void 0:v.parameters),{},{recommended_running_time:fe,recommended_sample_size:Pe})},!ee&&{start_date:Object(me.a)()}));case 7:if(B=Y.sent,!(!((Ve=B)===null||Ve===void 0)&&Ve.id)){Y.next=12;break}return p.updateExperiments(B),mt.router.actions.push(ye.a.experiment(B.id)),Y.abrupt("return");case 12:Y.next=18;break;case 14:return Y.next=16,lt.b.create("api/projects/".concat(l.currentTeamId,"/experiments"),z(z({},l.newExperimentData),{},{parameters:z(z({},(Ft=l.newExperimentData)===null||Ft===void 0?void 0:Ft.parameters),{},{recommended_running_time:fe,recommended_sample_size:Pe})},!ee&&{start_date:Object(me.a)()}));case 16:B=Y.sent,B&&At.f.actions.reportExperimentCreated(B);case 18:Y.next=24;break;case 20:return Y.prev=20,Y.t0=Y.catch(3),bn.a.error(Y.t0.detail||"Failed to create experiment"),Y.abrupt("return");case 24:!((f=B)===null||f===void 0)&&f.id&&(Vt=B.id,mt.router.actions.push(ye.a.experiment(Vt)),p.addToExperiments(B),bn.a.success("Experiment ".concat(w?"updated":"created"),{button:{label:"View it",action:function(){mt.router.actions.push(ye.a.experiment(Vt))}}}));case 25:case"end":return Y.stop()}},u,null,[[3,20]])}));function b(u){return x.apply(this,arguments)}return b}(),createNewExperimentInsight:function(){var x=Le()(U.a.mark(function u(P){var f,ee,fe,Pe;return U.a.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return f=P.filters,l.experimentInsightType===O.s.FUNNELS?ee=Object(Ae.a)(z({insight:O.s.FUNNELS,funnel_viz_type:O.o.Steps,display:O.d.FunnelViz,date_from:Object(me.a)().subtract(qt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(me.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:tt.p.horizontal},f)):ee=Object(Ae.a)(z({insight:O.s.TRENDS,date_from:Object(me.a)().subtract(qt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(me.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},f)),fe={name:_t(),description:"",tags:[],filters:ee,result:null},w.next=5,lt.b.create("api/projects/".concat(l.currentTeamId,"/insights"),fe);case 5:Pe=w.sent,p.setExperimentInsightId(Pe.short_id),p.setNewExperimentData({filters:z({},fe.filters)});case 8:case"end":return w.stop()}},u)}));function b(u){return x.apply(this,arguments)}return b}(),setFilters:function(b){var u=b.filters;if(l.experimentInsightType===O.s.FUNNELS){var P;(P=o.a.findMounted({dashboardItemId:l.experimentInsightId}))===null||P===void 0||P.actions.setFilters(u)}else{var f;(f=It.a.findMounted({dashboardItemId:l.experimentInsightId}))===null||f===void 0||f.actions.setFilters(u)}},loadExperimentSuccess:function(){var x=Le()(U.a.mark(function u(P){var f;return U.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:f=P.experimentData,f&&At.f.actions.reportExperimentViewed(f),p.setExperimentInsightType((f==null?void 0:f.filters.insight)||O.s.FUNNELS),f!=null&&f.start_date?(p.resetNewExperiment(),p.loadExperimentResults(),p.loadSecondaryMetricResults()):(p.setNewExperimentData(z({},f)),p.createNewExperimentInsight(f==null?void 0:f.filters));case 4:case"end":return fe.stop()}},u)}));function b(u){return x.apply(this,arguments)}return b}(),launchExperiment:function(){var x=Le()(U.a.mark(function u(){var P;return U.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:P=Object(me.a)(),p.updateExperiment({start_date:P.format("YYYY-MM-DDTHH:mm")}),l.experimentData&&At.f.actions.reportExperimentLaunched(l.experimentData,P);case 3:case"end":return ee.stop()}},u)}));function b(){return x.apply(this,arguments)}return b}(),endExperiment:function(){var x=Le()(U.a.mark(function u(){var P,f,ee;return U.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:f=Object(me.a)(),p.updateExperiment({end_date:f.format("YYYY-MM-DDTHH:mm")}),ee=f.diff((P=l.experimentData)===null||P===void 0?void 0:P.start_date,"second"),l.experimentData&&At.f.actions.reportExperimentCompleted(l.experimentData,f,ee,l.areResultsSignificant);case 4:case"end":return Pe.stop()}},u)}));function b(){return x.apply(this,arguments)}return b}(),archiveExperiment:function(){var x=Le()(U.a.mark(function u(){return U.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:p.updateExperiment({archived:!0}),l.experimentData&&At.f.actions.reportExperimentArchived(l.experimentData);case 2:case"end":return f.stop()}},u)}));function b(){return x.apply(this,arguments)}return b}(),setExperimentInsightType:function(){if(i.experimentId==="new"||l.editingExistingExperiment)p.createNewExperimentInsight();else{var b;p.createNewExperimentInsight((b=l.experimentData)===null||b===void 0?void 0:b.filters)}},updateExperimentSuccess:function(){var x=Le()(U.a.mark(function u(P){var f;return U.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:f=P.experimentData,p.updateExperiments(f);case 2:case"end":return fe.stop()}},u)}));function b(u){return x.apply(this,arguments)}return b}()}},loaders:function(r){var l=r.values,i=r.props;return{experimentData:[null,{loadExperiment:function(){var p=Le()(U.a.mark(function b(){var u;return U.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(i.experimentId&&i.experimentId!=="new")){f.next=16;break}return f.prev=1,f.next=4,lt.b.get("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId));case 4:return u=f.sent,f.abrupt("return",u);case 8:if(f.prev=8,f.t0=f.catch(1),f.t0.status!==404){f.next=14;break}mt.router.actions.push(ye.a.experiments()),f.next=16;break;case 14:throw bn.a.error("Failed to load experiment ".concat(i.experimentId)),new Error("Failed to load experiment ".concat(i.experimentId));case 16:return f.abrupt("return",null);case 17:case"end":return f.stop()}},b,null,[[1,8]])}));function x(){return p.apply(this,arguments)}return x}(),updateExperiment:function(){var p=Le()(U.a.mark(function b(u){var P;return U.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,lt.b.update("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId),u);case 2:return P=ee.sent,ee.abrupt("return",P);case 4:case"end":return ee.stop()}},b)}));function x(b){return p.apply(this,arguments)}return x}()}],experimentResults:[null,{loadExperimentResults:function(){var p=Le()(U.a.mark(function b(){var u;return U.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,lt.b.get("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId,"/results"));case 3:return u=f.sent,f.abrupt("return",z(z({},u),{},{itemID:Math.random().toString(36).substring(2,15)}));case 7:if(f.prev=7,f.t0=f.catch(0),f.t0.code!=="no_data"){f.next=11;break}return f.abrupt("return",null);case 11:return bn.a.error(f.t0.detail||"Failed to load experiment results"),f.abrupt("return",null);case 13:case"end":return f.stop()}},b,null,[[0,7]])}));function x(){return p.apply(this,arguments)}return x}()}],secondaryMetricResults:[null,{loadSecondaryMetricResults:function(){var p=Le()(U.a.mark(function b(){var u;return U.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Promise.all((((u=l.experimentData)===null||u===void 0?void 0:u.secondary_metrics)||[]).map(function(){var ee=Le()(U.a.mark(function fe(Pe,B){var w;return U.a.wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.prev=0,Ve.next=3,lt.b.get("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId,"/secondary_results?id=").concat(B));case 3:return w=Ve.sent,Ve.abrupt("return",w.result);case 7:return Ve.prev=7,Ve.t0=Ve.catch(0),Ve.abrupt("return",{});case 10:case"end":return Ve.stop()}},fe,null,[[0,7]])}));return function(fe,Pe){return ee.apply(this,arguments)}}()));case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},b)}));function x(){return p.apply(this,arguments)}return x}()}]}},selectors:{breadcrumbs:[function(a){return[a.experimentData,function(r,l){return l.experimentId}]},function(a,r){return[{name:"Experiments",path:ye.a.experiments()},{name:(a==null?void 0:a.name)||"New",path:ye.a.experiment(r||"new")}]}],variants:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var l,i;if(r!=null&&r.start_date){var p;return(r==null||(p=r.parameters)===null||p===void 0?void 0:p.feature_flag_variants)||[]}return(a==null||(l=a.parameters)===null||l===void 0?void 0:l.feature_flag_variants)||(r==null||(i=r.parameters)===null||i===void 0?void 0:i.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[function(a){return[a.newExperimentData,a.groupsTaxonomicTypes]},function(a,r){var l;return(a==null||(l=a.filters)===null||l===void 0?void 0:l.aggregation_group_type_index)!=null&&r.length>0?[r[a.filters.aggregation_group_type_index]]:[q.a.PersonProperties,q.a.Cohorts]}],parsedSecondaryMetrics:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var l=(a==null?void 0:a.secondary_metrics)||(r==null?void 0:r.secondary_metrics)||[];return l}],minimumDetectableChange:[function(a){return[a.newExperimentData]},function(a){var r;return(a==null||(r=a.parameters)===null||r===void 0?void 0:r.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){return Math.ceil(1600*r*(1-r/100)/(a*a))}}],areResultsSignificant:[function(a){return[a.experimentResults]},function(a){return(a==null?void 0:a.significant)||!1}],significanceBannerDetails:[function(a){return[a.experimentResults]},function(a){if((a==null?void 0:a.significance_code)===O.E.HighLoss){var r;return n.a.createElement(n.a.Fragment,null,"This is because the expected loss in conversion is greater than 1%",n.a.createElement(qe.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(r=((a==null?void 0:a.expected_loss)||0)*100)===null||r===void 0?void 0:r.toFixed(2),"%")},n.a.createElement(Qt.a,{style:{padding:"4px 2px"}})),".")}if((a==null?void 0:a.significance_code)===O.E.HighPValue){var l;return n.a.createElement(n.a.Fragment,null,"This is because the p value is greater than 0.05",n.a.createElement(qe.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(a==null||(l=a.p_value)===null||l===void 0?void 0:l.toFixed(3))||1,".")},n.a.createElement(Qt.a,{style:{padding:"4px 2px"}})),".")}return(a==null?void 0:a.significance_code)===O.E.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(a==null?void 0:a.significance_code)===O.E.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){var l=r*a/100,i=r,p=l+r;return parseFloat((4/Math.pow(Math.sqrt(i/qt)-Math.sqrt(p/qt),2)).toFixed(1))}}],expectedRunningTime:[function(){return[]},function(){return function(a,r){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qt;return parseFloat((r/(a/l)).toFixed(1))}}],conversionRateForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var l="Can't find variant";if(!a)return l;var i=(a==null?void 0:a.insight).find(function(p){var x,b;return((x=p[0])===null||x===void 0||(b=x.breakdown_value)===null||b===void 0?void 0:b[0])===r});return i?(i[i.length-1].count/i[0].count*100).toFixed(1):l}}],getIndexForVariant:[function(a){return[a.experimentResults]},function(a){return function(r,l){if(!a)return 0;var i=-1;return l===O.s.FUNNELS?i=S()(a==null?void 0:a.insight).sort(function(p,x){var b,u;return((b=x[0])===null||b===void 0?void 0:b.count)-((u=p[0])===null||u===void 0?void 0:u.count)}).findIndex(function(p){var x,b;return((x=p[0])===null||x===void 0||(b=x.breakdown_value)===null||b===void 0?void 0:b[0])===r}):i=(a==null?void 0:a.insight).findIndex(function(p){return p.breakdown_value===r}),i===-1?0:i}}],countDataForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var l="Can't find variant";if(!a)return l;var i=(a==null?void 0:a.insight).find(function(p){return p.breakdown_value===r});return i?i.count.toString():l}}],highestProbabilityVariant:[function(a){return[a.experimentResults]},function(a){if(a){var r=Math.max.apply(Math,S()(Object.values(a.probability)));return Object.keys(a.probability).find(function(l){return Math.abs(a.probability[l]-r)<Number.EPSILON})}}],areTrendResultsConfusing:[function(a){return[a.experimentResults,a.highestProbabilityVariant]},function(a,r){if(!a)return!1;var l=(a==null?void 0:a.insight).reduce(function(i,p){return p.count>i.count?p:i},{count:0,breakdown_value:""});return l.count?l.breakdown_value!==r:!1}]},urlToAction:function(r){var l=r.actions,i=r.values,p=r.props;return{"/experiments/:id":function(b){var u=b.id;if(!i.hasAvailableFeature(O.c.EXPERIMENTATION)){mt.router.actions.push("/experiments");return}if(u){var P=u==="new"?"new":parseInt(u);P==="new"&&(l.createNewExperimentInsight(),l.resetNewExperiment(),l.setSecondaryMetrics([])),l.setEditExperiment(!1),P!=="new"&&P===p.experimentId&&l.loadExperiment()}}}}});function un(a){var r=Math.round(100/a),l=r*a,i=l-100,p=new Array(a).fill(r);return p[a-1]=r-i,p}var On=e("./frontend/src/scenes/insights/InsightContainer.tsx"),pe=e("./frontend/src/lib/components/icons.tsx"),xe=e("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),ke=e("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),Yt=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),St=e("./frontend/src/lib/components/CopyToClipboard.tsx"),Xn=e("./frontend/src/scenes/funnels/funnelUtils.ts"),Kn=e("./node_modules/antd/es/modal/index.js"),Un=e("./node_modules/antd/es/button/index.js"),ha=e("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js");function Wn(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,i)}return l}function tn(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?Wn(Object(l),!0).forEach(function(i){Ue()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Wn(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}var Qn=14,mn={name:"",filters:{insight:O.s.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},$t={name:"",filters:{insight:O.s.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:tt.p.horizontal}},Ht=Object(be.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[Se.a,["currentTeamId"]]},actions:{setSecondaryMetrics:function(r){return{secondaryMetrics:r}},createNewMetric:!0,addNewMetric:function(r){return{metric:r}},updateMetricFilters:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setPreviewInsightId:function(r){return{shortId:r}},createPreviewInsight:function(r){return{filters:r}},showModal:!0,hideModal:!1,changeInsightType:function(r){return{type:r}},setCurrentMetricName:function(r){return{name:r}},deleteMetric:function(r){return{metricId:r}}},loaders:function(r){var l=r.values;return{experiments:[[],{loadExperiments:function(){var i=Le()(U.a.mark(function x(){var b;return U.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,lt.b.get("api/projects/".concat(l.currentTeamId,"/experiments"));case 2:return b=P.sent,P.abrupt("return",b.results);case 4:case"end":return P.stop()}},x)}));function p(){return i.apply(this,arguments)}return p}()}]}},reducers:function(r){var l=r.props;return{previewInsightId:[null,{setPreviewInsightId:function(p,x){var b=x.shortId;return b}}],metrics:[l.initialMetrics,{addNewMetric:function(p,x){var b=x.metric;return[].concat(S()(p),[tn({},b)])},deleteMetric:function(p,x){var b=x.metricId;return p.filter(function(u,P){return P!==b})}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1}}],currentMetricName:["",{setCurrentMetricName:function(p,x){var b=x.name;return b}}],currentMetric:[mn,{changeInsightType:function(p,x){var b=x.type;return b===O.s.TRENDS?mn:p.filters.insight===O.s.TRENDS?$t:mn},updateMetricFilters:function(p,x){var b=x.filters;return tn(tn({},p),{},{filters:b})}}]}},listeners:function(r){var l=r.actions,i=r.values,p=r.props;return{createPreviewInsight:function(){var x=Le()(U.a.mark(function u(P){var f,ee,fe,Pe;return U.a.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return f=P.filters,(f==null?void 0:f.insight)===O.s.FUNNELS?ee=Object(Ae.a)(tn({insight:O.s.FUNNELS,funnel_viz_type:O.o.Steps,display:O.d.FunnelViz,date_from:Object(me.a)().subtract(Qn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(me.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:tt.p.horizontal},f)):ee=Object(Ae.a)(tn({insight:O.s.TRENDS,date_from:Object(me.a)().subtract(Qn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(me.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},f)),fe={description:"",tags:[],filters:ee,result:null},w.next=5,lt.b.create("api/projects/".concat(Se.a.values.currentTeamId,"/insights"),fe);case 5:Pe=w.sent,l.setPreviewInsightId(Pe.short_id);case 7:case"end":return w.stop()}},u)}));function b(u){return x.apply(this,arguments)}return b}(),setFilters:function(b){var u=b.filters;if(u.insight===O.s.FUNNELS){var P;(P=o.a.findMounted({dashboardItemId:i.previewInsightId}))===null||P===void 0||P.actions.setFilters(u)}else{var f;(f=It.a.findMounted({dashboardItemId:i.previewInsightId}))===null||f===void 0||f.actions.setFilters(u)}},createNewMetric:function(){l.addNewMetric(tn(tn({},i.currentMetric),{},{name:i.currentMetricName})),p.onMetricsChange(i.metrics),l.changeInsightType(O.s.TRENDS),l.setCurrentMetricName("")},deleteMetric:function(){p.onMetricsChange(i.metrics)},changeInsightType:function(){return l.createPreviewInsight(i.currentMetric.filters)}}},events:function(r){var l=r.actions;return{afterMount:function(){l.createPreviewInsight()}}}}),Nt=e("./frontend/src/lib/components/LemonButton/index.ts"),kn=e("./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function Zn(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,i)}return l}function Gt(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?Zn(Object(l),!0).forEach(function(i){Ue()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Zn(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}function Nn(a){var r=a.onMetricsChange,l=a.initialMetrics,i=Ht({onMetricsChange:r,initialMetrics:l}),p=Object(be.useValues)(i),x=p.previewInsightId,b=p.metrics,u=p.modalVisible,P=p.currentMetric,f=Object(be.useActions)(i),ee=f.createNewMetric,fe=f.updateMetricFilters,Pe=f.setFilters,B=f.showModal,w=f.hideModal,v=f.changeInsightType,Ve=f.setCurrentMetricName,Ft=f.deleteMetric,Vt=Object(be.useValues)(Object(V.c)({dashboardItemId:x,syncWithUrl:!1})),Jt=Vt.insightProps,Y=Object(be.useValues)(Object(o.a)(Jt)),Bt=Y.isStepsEmpty,an=Y.filterSteps;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Kn.a,{title:"Add secondary metric",visible:u,destroyOnClose:!0,onCancel:w,footer:null,style:{minWidth:600}},n.a.createElement(I.a,{layout:"vertical",initialValues:{type:O.s.TRENDS},onValuesChange:function(et){et.name&&Ve(et.name)},onFinish:function(){ee(),w()},scrollToFirstError:!0,requiredMark:!1},n.a.createElement(I.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(se.a,null)),n.a.createElement(I.a.Item,{name:"type",label:"Type"},n.a.createElement(ie.a,{style:{display:"flex"},value:P.filters.insight,onChange:function(){v()},suffixIcon:n.a.createElement(ke.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(ie.a.Option,{value:O.s.TRENDS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(ie.a.Option,{value:O.s.FUNNELS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel")))))),n.a.createElement(I.a.Item,{name:"query",label:"Query"},n.a.createElement(Ye.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},P.filters.insight===O.s.FUNNELS&&n.a.createElement(Q.a,{filters:P.filters,setFilters:function(et){var Dt=Gt(Gt({},P.filters),{},{insight:O.s.FUNNELS},et);fe(Dt),Pe(Dt)},typeKey:"funnel-preview-metric",mathAvailability:kn.b.None,hideDeleteBtn:an.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!Bt,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[q.a.EventProperties,q.a.PersonProperties,q.a.Cohorts,q.a.Elements],rowClassName:"action-filters-bordered"}),P.filters.insight===O.s.TRENDS&&n.a.createElement(Q.a,{entitiesLimit:1,horizontalUI:!0,filters:P.filters,setFilters:function(et){var Dt=Gt(Gt({},P.filters),{},{insight:O.s.TRENDS},et);fe(Dt),Pe(Dt)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,propertiesTaxonomicGroupTypes:[q.a.EventProperties,q.a.PersonProperties,q.a.Cohorts,q.a.Elements]}))),n.a.createElement(I.a.Item,{name:"metric-preview",label:"Metric preview"},n.a.createElement(be.BindLogic,{logic:V.c,props:Jt},n.a.createElement(On.a,{disableHeader:!0,disableTable:!0}))),n.a.createElement(y.a,{justify:"end"},n.a.createElement(Nt.a,{type:"secondary",className:"mr-05",onClick:function(){return w()}},"Cancel"),n.a.createElement(Nt.a,{type:"primary",htmlType:"submit"},"Save")))),n.a.createElement(y.a,null,n.a.createElement(h.a,null,b.map(function(ue,et){return n.a.createElement(y.a,{key:et,className:"mt"},n.a.createElement(y.a,{align:"middle",className:"full-width border-all",style:{padding:8}},n.a.createElement("div",{style:{fontWeight:500}},"Name")," ",n.a.createElement("div",{className:"metric-name"},ue.name),n.a.createElement(ha.a,{className:"text-danger",style:{padding:8},onClick:function(){return Ft(et)}})),n.a.createElement(Ye.a,{className:"full-width",style:{borderTop:"none"},bodyStyle:{padding:0}},ue.filters.insight===O.s.FUNNELS&&n.a.createElement(Q.a,{filters:ue.filters,setFilters:function(Ut){var Pt=Gt(Gt({},ue.filters),{},{insight:O.s.FUNNELS},Ut);fe(Pt),Pe(Pt)},typeKey:"funnel-preview-".concat(et),mathAvailability:kn.b.None,hideDeleteBtn:an.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!Bt,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[q.a.EventProperties,q.a.PersonProperties,q.a.Cohorts,q.a.Elements],rowClassName:"action-filters-bordered",readOnly:!0}),ue.filters.insight===O.s.TRENDS&&n.a.createElement(Q.a,{horizontalUI:!0,filters:ue.filters,setFilters:function(Ut){var Pt=Gt(Gt({},ue.filters),{},{insight:O.s.TRENDS},Ut);fe(Pt),Pe(Pt)},typeKey:"trend-preview-".concat(et),buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[q.a.EventProperties,q.a.PersonProperties,q.a.Cohorts,q.a.Elements],readOnly:!0})))}),b&&!(b.length>2)&&n.a.createElement(h.a,null,n.a.createElement("div",{className:"mb-05 mt"},n.a.createElement(Un.a,{style:{color:"var(--primary)",minWidth:240},onClick:B},"Add metric"))))))}try{Nn.displayName="SecondaryMetrics",Nn.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:Nn.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(a){}var xn=e("./frontend/src/lib/colors.ts"),nn=e("./frontend/src/lib/components/EntityFilterInfo.tsx"),Ea=e("./frontend/src/lib/components/EditableField/EditableField.tsx"),jn=e("./frontend/src/lib/components/Link.tsx"),ya=e("./frontend/src/lib/logic/featureFlagLogic.ts"),qn=e("./node_modules/antd/es/slider/index.js"),zn=e("./node_modules/antd/es/input-number/index.js"),wa=e("./frontend/src/lib/components/InsightLabel/index.tsx"),ba=e("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function Oa(){var a=Object(Ge.useState)(!1),r=K()(a,2),l=r[0],i=r[1],p=Object(Ge.useState)(!1),x=K()(p,2),b=x[0],u=x[1];return n.a.createElement(Ye.a,{className:"experiment-workflow",title:n.a.createElement("span",{className:"card-secondary"},"Experiment workflow")},n.a.createElement(y.a,null,n.a.createElement(h.a,{className:"exp-workflow-step step-completed full-width"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(pe.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),n.a.createElement("b",{className:"ml-05"},"Create experiment")),n.a.createElement("div",{className:"ml-2"},"Set variants, select participants, and add secondary metrics"))),n.a.createElement(y.a,null,n.a.createElement(h.a,{className:"full-width exp-workflow-step ".concat(l?"step-completed":""),onClick:function(){return i(!l)}},n.a.createElement(y.a,{align:"middle"},l?n.a.createElement(pe.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(pe.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Validate experiment")),n.a.createElement("div",{className:"ml-2"},"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."))),n.a.createElement(y.a,null,n.a.createElement(h.a,{className:"full-width exp-workflow-step ".concat(b?"step-completed":""),onClick:function(){return u(!b)}},n.a.createElement(y.a,{align:"middle"},b?n.a.createElement(pe.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(pe.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Launch experiment")),n.a.createElement("div",{className:"ml-2"},"Run your experiment, monitor results, and decide when to terminate your experiment."))))}function Fn(a){var r,l,i,p,x,b,u=a.experiment,P=a.trendCount,f=a.funnelConversionRate,ee=a.trendExposure,fe=a.funnelSampleSize,Pe=a.funnelEntrants,B=(u==null?void 0:u.id)||"new",w=Object(be.useValues)(en({experimentId:B})),v=w.experimentInsightType,Ve=w.editingExistingExperiment,Ft=w.minimumDetectableChange,Vt=w.expectedRunningTime,Jt=w.aggregationLabel,Y=Object(be.useActions)(en({experimentId:B})),Bt=Y.setNewExperimentData,an=v===O.s.FUNNELS&&100-f<50?100-f:50,ue=Object(me.a)().diff(Object(me.a)(u==null?void 0:u.start_date),"hour"),et=0;u!=null&&u.start_date?et=Vt(Pe||1,fe||0,ue):et=Vt(Pe||1,fe||0);var Dt=Object(me.a)(u==null?void 0:u.start_date).add(et,"hour"),Ut=!(u!=null&&u.end_date)&&ue>=24&&Pe&&fe,Pt=Object(ge.s)(u==null||(r=u.filters)===null||r===void 0?void 0:r.properties);return n.a.createElement(y.a,null,n.a.createElement(h.a,{span:!(u!=null&&u.start_date)&&B!=="new"&&!Ve?12:24},B==="new"&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("b",null,"Experiment preview")),n.a.createElement("div",{className:"text-muted"},"Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "))),(B==="new"||Ve)&&n.a.createElement(y.a,{className:"mb"},n.a.createElement(h.a,{span:24},n.a.createElement("div",null,n.a.createElement("b",null,"Minimum acceptable improvement"),n.a.createElement(Fe.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept."},n.a.createElement(Qt.a,{style:{marginLeft:4}}))),n.a.createElement(y.a,{className:"mde-slider"},n.a.createElement(h.a,{span:8},n.a.createElement(qn.a,{defaultValue:5,value:Ft,min:1,max:an,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:function(pt){Bt({parameters:{minimum_detectable_effect:pt}})},tipFormatter:function(pt){return"".concat(pt,"%")}})),n.a.createElement(zn.a,{min:1,max:an,defaultValue:5,formatter:function(pt){return"".concat(pt,"%")},style:{margin:"0 16px"},value:Ft,onChange:function(pt){Bt({parameters:{minimum_detectable_effect:pt}})}})))),n.a.createElement(y.a,{className:"experiment-preview-row ".concat(u!=null&&u.start_date?"mr":"")},v===O.s.TRENDS?n.a.createElement(n.a.Fragment,null,!(u!=null&&u.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Baseline Count"),n.a.createElement("div",{className:"l4"},Object(ge.O)(P||0))),n.a.createElement(h.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Count"),n.a.createElement("div",{className:"l4"},Object(ge.O)(P+Math.ceil(P*(Ft/100))||0)))),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(ge.O)(ee||0))," days"))):n.a.createElement(n.a.Fragment,null,!(u!=null&&u.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Baseline Conversion Rate"),n.a.createElement("div",{className:"l4"},f.toFixed(1),"%")),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Conversion Rate"),n.a.createElement("div",{className:"l4"},(f+Ft).toFixed(1),"%"))),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended Sample Size"),n.a.createElement("div",{className:"pb"},n.a.createElement("span",{className:"l4"},"~",Object(ge.O)(fe||0))," persons")),!(u!=null&&u.start_date)&&n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(ge.O)(et||0))," days"))),n.a.createElement(y.a,{className:"full-width mt"},n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Experiment variants"),n.a.createElement("ul",{className:"variants-list"},u==null||(l=u.parameters)===null||l===void 0||(i=l.feature_flag_variants)===null||i===void 0?void 0:i.map(function(nt,pt){return n.a.createElement("li",{key:pt},nt.key)}))),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Participants"),n.a.createElement("div",null,Pt!=null&&Pt.length?n.a.createElement("div",null,Pt==null?void 0:Pt.map(function(nt){return n.a.createElement(ba.c,{key:nt.key,item:nt,style:{margin:2,cursor:"default"}})})):n.a.createElement(n.a.Fragment,null,"100% of"," ",(u==null||(p=u.filters)===null||p===void 0?void 0:p.aggregation_group_type_index)!=null?Object(ge.j)(Jt(u.filters.aggregation_group_type_index).plural):"users")))),n.a.createElement(y.a,{className:"full-width"},B!=="new"&&!Ve&&n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Start date"),u!=null&&u.start_date?n.a.createElement("span",null,Object(me.a)(u==null?void 0:u.start_date).format("D MMM YYYY")):n.a.createElement("span",{className:"description"},"Not started yet")),v===O.s.FUNNELS&&Ut?n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Expected end date"),n.a.createElement("span",null,Dt.isAfter(Object(me.a)())?Dt.format("D MMM YYYY"):Object(me.a)().format("D MMM YYYY"))):null,(u==null?void 0:u.end_date)&&n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Completed date"),n.a.createElement("span",null,Object(me.a)(u==null?void 0:u.end_date).format("D MMM YYYY"))))),B!=="new"&&!Ve&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement(h.a,null,n.a.createElement("div",{className:"card-secondary mb-05"},v===O.s.FUNNELS?"Conversion goal steps":"Trend goal"),[].concat(S()((u==null||(x=u.filters)===null||x===void 0?void 0:x.events)||[]),S()((u==null||(b=u.filters)===null||b===void 0?void 0:b.actions)||[])).sort(function(nt,pt){return(nt.order||0)-(pt.order||0)}).map(function(nt,pt){var rn;return n.a.createElement(h.a,{key:pt,className:"mb-05"},n.a.createElement(y.a,{style:{marginBottom:4}},n.a.createElement("div",{className:"preview-conversion-goal-num"},v===O.s.FUNNELS?(nt.order||0)+1:pt+1),n.a.createElement("b",null,n.a.createElement(wa.b,{action:nt,showCountedByTag:v===O.s.TRENDS,hideIcon:!0}))),(rn=nt.properties)===null||rn===void 0?void 0:rn.map(function(Ln){return n.a.createElement(ba.c,{key:Ln.key,item:Ln})}))})))),B!=="new"&&!Ve&&!(u!=null&&u.start_date)&&n.a.createElement(h.a,{span:12,className:"pl"},n.a.createElement(Oa,null)))}try{Fn.displayName="ExperimentPreview",Fn.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:Fn.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(a){}var Dn=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx");function pn(a){var r,l,i,p=a.experiment,x=Object(Ge.useState)("control"),b=K()(x,2),u=b[0],P=b[1];return n.a.createElement(Ye.a,{title:n.a.createElement("span",{className:"card-secondary"},"Feature flag usage and implementation"),className:"experiment-implementation-details"},n.a.createElement(y.a,{justify:"space-between",className:"mb-05"},n.a.createElement("div",null,n.a.createElement("span",{className:"mr-05"},"Variant group"),n.a.createElement(ie.a,{onChange:P,defaultValue:"control",suffixIcon:n.a.createElement(ke.a,null)},p==null||(r=p.parameters)===null||r===void 0||(l=r.feature_flag_variants)===null||l===void 0?void 0:l.map(function(f,ee){return n.a.createElement(ie.a.Option,{key:ee,value:f.key},f.key)}))),n.a.createElement("div",null,n.a.createElement(Yn,null))),n.a.createElement("b",null,"Implement your experiment in code"),n.a.createElement(Dn.a,{language:Dn.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat((i=p==null?void 0:p.feature_flag_key)!==null&&i!==void 0?i:"","') === '").concat(u,`') {
    // where '`).concat(u,`' is the variant, run your code here
}`)),n.a.createElement("b",null,"Test that it works"),n.a.createElement(Dn.a,{language:Dn.b.JavaScript},"posthog.feature_flags.override({'".concat(p==null?void 0:p.feature_flag_key,"': '").concat(u,"'})")),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://posthog.com/docs/user-guides/feature-flags"},n.a.createElement(y.a,{align:"middle"},"Experiment implementation guide",n.a.createElement(pe.IconOpenInNew,{className:"ml-05"}))))}try{pn.displayName="ExperimentImplementationDetails",pn.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:pn.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(a){}function ea(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,i)}return l}function Mn(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?ea(Object(l),!0).forEach(function(i){Ue()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ea(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}var ta={component:Cn,logic:en,paramsToProps:function(r){var l=r.params.id;return{experimentId:l==="new"?"new":parseInt(l)}}};function Cn(){var a,r,l,i,p,x,b,u,P,f,ee,fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=fe.id,B=Object(be.useValues)(en({experimentId:Pe})),w=B.newExperimentData,v=B.experimentData,Ve=B.experimentInsightId,Ft=B.minimumSampleSizePerVariant,Vt=B.recommendedExposureForCountData,Jt=B.variants,Y=B.experimentResults,Bt=B.countDataForVariant,an=B.editingExistingExperiment,ue=B.experimentInsightType,et=B.experimentResultsLoading,Dt=B.parsedSecondaryMetrics,Ut=B.areResultsSignificant,Pt=B.conversionRateForVariant,nt=B.getIndexForVariant,pt=B.significanceBannerDetails,rn=B.areTrendResultsConfusing,Ln=B.taxonomicGroupTypesForSelection,Mt=B.groupTypes,na=B.aggregationLabel,Wt=B.secondaryMetricResults,xa=B.experimentDataLoading,aa=B.secondaryMetricResultsLoading,bt=Object(be.useActions)(en({experimentId:Pe})),fn=bt.setNewExperimentData,vn=bt.createExperiment,ja=bt.launchExperiment,sn=bt.setFilters,An=bt.setEditExperiment,ln=bt.endExperiment,Ca=bt.addExperimentGroup,ra=bt.updateExperiment,$n=bt.updateExperimentGroup,Ra=bt.removeExperimentGroup,_a=bt.setSecondaryMetrics,Sa=bt.setExperimentInsightType,Sn=bt.archiveExperiment,gn=Object(be.useValues)(ya.a),wn=gn.featureFlags,Pa=I.a.useForm(),Ta=K()(Pa,1),Ia=Ta[0],Na=Object(Ge.useState)(!0),sa=K()(Na,2),Rn=sa[0],Pn=sa[1],Va=Object(be.useValues)(Object(V.c)({dashboardItemId:Ve})),la=Va.insightProps,Tn=Object(be.useValues)(Object(o.a)(la)),oa=Tn.isStepsEmpty,Fa=Tn.filterSteps,ia=Tn.filters,Hn=Tn.results,ca=Tn.conversionMetrics,da=Object(be.useValues)(Object(It.a)(la)),Gn=da.filters,Da=da.results,_n=ca.totalRate*100,Ma=Ft(_n),ua=Ma*Jt.length,Jn=(a=Da[0])===null||a===void 0?void 0:a.count,La=Hn==null||(r=Hn[0])===null||r===void 0?void 0:r.count,ma=Vt(Jn),on=Math.floor(24/(Jt.length+2)),hn=ue===O.s.FUNNELS&&(Y==null?void 0:Y.insight)?Y.insight.reduce(function($,H){var ot;return((ot=H[0])===null||ot===void 0?void 0:ot.count)+$},0):0,Ba=ue===O.s.FUNNELS?(hn||0)/((v==null||(l=v.parameters)===null||l===void 0?void 0:l.recommended_sample_size)||1)*100:Object(me.a)().diff(v==null?void 0:v.start_date,"day")/((v==null||(i=v.parameters)===null||i===void 0?void 0:i.recommended_running_time)||1)*100,Ka={running:"green",draft:"default",complete:"purple"},pa=function(){if(v!=null&&v.start_date){if(!(v!=null&&v.end_date))return"running"}else return"draft";return"complete"},Aa=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return n.a.createElement(n.a.Fragment,null,Pe==="new"||an?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8}},n.a.createElement(ht.a,{title:"New experiment"}),n.a.createElement(y.a,null,n.a.createElement(Nt.a,{type:"secondary",className:"mr-05",onClick:function(){return mt.router.actions.push(ye.a.experiments())}},"Cancel"),n.a.createElement(Nt.a,{type:"primary",htmlType:"submit",form:"new-experiment"},"Save"))),n.a.createElement(I.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:Ia,onValuesChange:function(H){return fn(H)},initialValues:{name:w==null?void 0:w.name,feature_flag_key:w==null?void 0:w.feature_flag_key,description:w==null?void 0:w.description},onFinish:function(){return vn(!0,ma,ua)},requiredMark:!1,scrollToFirstError:!0},n.a.createElement("div",null,n.a.createElement(be.BindLogic,{logic:V.c,props:la},n.a.createElement(y.a,null,n.a.createElement(h.a,{span:12,style:{paddingRight:24}},n.a.createElement(y.a,{className:"full-width"},n.a.createElement(I.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(se.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})),n.a.createElement(I.a.Item,{style:{marginBottom:"1rem"},label:n.a.createElement("div",null,"Feature flag key"," ",n.a.createElement(Fe.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment."},n.a.createElement(Qt.a,null))),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}]},n.a.createElement(se.a,{"data-attr":"experiment-feature-flag-key",disabled:an}))),n.a.createElement(I.a.Item,{label:n.a.createElement("div",null,"Description ",n.a.createElement("span",{className:"text-muted"},"(optional)")),name:"description"},n.a.createElement(se.a.TextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})),(w==null||(p=w.parameters)===null||p===void 0?void 0:p.feature_flag_variants)&&n.a.createElement(h.a,null,n.a.createElement("label",null,n.a.createElement("b",null,"Experiment variants")),n.a.createElement("div",{className:"text-muted"},"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."),n.a.createElement(h.a,{className:"variants"},w.parameters.feature_flag_variants.map(function($,H){return n.a.createElement(I.a,{key:"".concat($,"-").concat(H),initialValues:{key:$.key},onValuesChange:function(Qe){$n(Qe,H)}},n.a.createElement(y.a,{key:"".concat($,"-").concat(H),className:"feature-flag-variant ".concat(H===0?"border-top":H>=3?"border-bottom":"")},n.a.createElement("div",{className:"variant-label",style:Mn({},Aa[H])},H===0?"Control":"Test"),n.a.createElement(I.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:n.a.createElement(n.a.Fragment,null,n.a.createElement(xe.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores.")}],style:{display:"contents"}},n.a.createElement(se.a,{disabled:H===0,"data-attr":"feature-flag-variant-key","data-key-index":H.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(H+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})),n.a.createElement("div",{className:"float-right"},!(H===0||H===1)&&n.a.createElement(Fe.a,{title:"Delete this variant",placement:"bottomLeft"},n.a.createElement(Nt.a,{type:"primary-alt",compact:!0,icon:n.a.createElement(pe.IconDelete,null),onClick:function(){return Ra(H)}})))))}),w.parameters.feature_flag_variants.length<4&&n.a.createElement("div",{className:"feature-flag-variant border-bottom"},n.a.createElement(Nt.a,{onClick:function(){return Ca()},fullWidth:!0,icon:n.a.createElement(pe.IconPlusMini,null)},"Add test variant")))),n.a.createElement(y.a,{className:"person-selection"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("strong",null,"Select participants")),n.a.createElement(h.a,null,n.a.createElement("div",{className:"text-muted"},"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."),n.a.createElement("div",{className:"mt mb-05"},n.a.createElement("strong",null,"Participant type")),n.a.createElement(ie.a,{value:(w==null||(x=w.filters)===null||x===void 0?void 0:x.aggregation_group_type_index)!=null?w.filters.aggregation_group_type_index:-1,onChange:function(H){var ot,Qe=H!==-1?H:void 0;Qe!=(w==null||(ot=w.filters)===null||ot===void 0?void 0:ot.aggregation_group_type_index)&&(sn({properties:[],aggregation_group_type_index:Qe}),fn({filters:{aggregation_group_type_index:Qe,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1},n.a.createElement(ie.a.Option,{key:-1,value:-1},"Persons"),Mt.map(function($){return n.a.createElement(ie.a.Option,{key:$.group_type_index,value:$.group_type_index},Object(ge.j)(na($.group_type_index).plural))})),n.a.createElement("div",{className:"mt"},n.a.createElement("strong",null,"Filters")),n.a.createElement(He.a,{pageKey:"experiment-participants-property",propertyFilters:ue===O.s.FUNNELS?Object(ge.s)(ia.properties):Object(ge.s)(Gn.properties),onChange:function(H){fn({filters:{properties:H}}),sn({properties:H.filter(Ze.b)})},taxonomicGroupTypes:Ln})))),n.a.createElement(y.a,{className:"metrics-selection"},n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Goal type"),n.a.createElement("div",{className:"text-muted"},ue===O.s.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events")),n.a.createElement(ie.a,{style:{display:"flex"},value:ue,onChange:Sa,suffixIcon:n.a.createElement(ke.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(ie.a.Option,{value:O.s.TRENDS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(ie.a.Option,{value:O.s.FUNNELS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel"))))),n.a.createElement("div",{className:"mb mt"},n.a.createElement("b",null,"Experiment goal"),ue===O.s.TRENDS&&n.a.createElement("div",{className:"text-muted"},"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment.")),n.a.createElement(y.a,null,n.a.createElement(Ye.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},ue===O.s.FUNNELS&&n.a.createElement(Q.a,{filters:ia,setFilters:function(H){fn({filters:H}),sn(H)},typeKey:"EditFunnel-action",mathAvailability:kn.b.None,hideDeleteBtn:Fa.length===1,buttonCopy:"Add funnel step",buttonType:"link",showSeriesIndicator:!oa,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[q.a.EventProperties,q.a.PersonProperties,q.a.Cohorts,q.a.Elements],rowClassName:"action-filters-bordered"}),ue===O.s.TRENDS&&n.a.createElement(Q.a,{horizontalUI:!0,filters:Gn,setFilters:function(H){fn({filters:H}),sn(H)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[q.a.EventProperties,q.a.PersonProperties,q.a.Cohorts,q.a.Elements],customRowPrefix:Gn.insight===O.s.LIFECYCLE?n.a.createElement(n.a.Fragment,null,"Showing ",n.a.createElement("b",null,"Unique users")," who did"):void 0}))),wn[tt.n.EXPERIMENTS_SECONDARY_METRICS]&&n.a.createElement(h.a,{className:"secondary-metrics"},n.a.createElement("div",null,n.a.createElement("b",null,"Secondary metrics"),n.a.createElement("span",{className:"text-muted ml-05"},"(optional)")),n.a.createElement("div",{className:"text-muted",style:{marginTop:4}},"Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "),n.a.createElement(Nn,{onMetricsChange:function(H){return _a(H)},initialMetrics:Dt}))),n.a.createElement(h.a,{span:12,className:"pl"},n.a.createElement("div",{className:"card-secondary mb"},"Goal preview"),n.a.createElement(On.a,{disableHeader:ue===O.s.TRENDS,disableTable:!0})))),n.a.createElement(y.a,null,n.a.createElement(Ye.a,{className:"experiment-preview"},n.a.createElement(Fn,{experiment:w,trendCount:Jn,trendExposure:ma,funnelSampleSize:ua,funnelEntrants:La,funnelConversionRate:_n}))))),n.a.createElement(Nt.a,{className:"float-right",type:"primary",htmlType:"submit"},"Save"))):!xa&&v?n.a.createElement("div",{className:"view-experiment"},n.a.createElement(y.a,{className:"draft-header"},n.a.createElement(y.a,{justify:"space-between",align:"middle",className:"full-width pb"},n.a.createElement(h.a,null,n.a.createElement(y.a,null,n.a.createElement(ht.a,{style:{paddingRight:8},title:"".concat(v==null?void 0:v.name),buttons:n.a.createElement(n.a.Fragment,null,n.a.createElement(St.a,{explicitValue:v.feature_flag_key,iconStyle:{color:"var(--text-muted-alt)"}},n.a.createElement("span",{className:"text-muted"},v.feature_flag_key)),n.a.createElement(_.a,{style:{alignSelf:"center"},color:Ka[pa()]},n.a.createElement("b",{className:"uppercase"},pa())),Y&&v.end_date&&n.a.createElement(_.a,{style:{alignSelf:"center"},color:Ut?"green":"geekblue"},n.a.createElement("b",{className:"uppercase"},Ut?"Significant Results":"Results not significant")))})),n.a.createElement("span",{className:"exp-description"},v.start_date?n.a.createElement(Ea.a,{multiline:!0,name:"description",value:v.description||"",placeholder:"Description (optional)",onSave:function(H){return ra({description:H})},maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):n.a.createElement(n.a.Fragment,null,v.description||"There is no description for this experiment."))),v&&!v.start_date&&n.a.createElement("div",{className:"flex-center"},n.a.createElement(Nt.a,{type:"secondary",className:"mr-05",onClick:function(){return An(!0)}},"Edit"),n.a.createElement(Nt.a,{type:"primary",onClick:function(){return ja()}},"Launch")),v&&v.start_date&&!v.end_date&&n.a.createElement(Nt.a,{type:"secondary",status:"danger",onClick:function(){return ln()}},"Stop"),(v==null?void 0:v.end_date)&&Object(me.a)().isSameOrAfter(Object(me.a)(v.end_date),"day")&&!v.archived&&n.a.createElement(Nt.a,{type:"secondary",status:"danger",onClick:function(){return Sn()}},n.a.createElement("b",null,"Archive")))),n.a.createElement(y.a,null,Rn&&Y&&Ut&&!v.end_date&&n.a.createElement(y.a,{align:"middle",className:"significant-results"},n.a.createElement(h.a,{span:20,style:{fontWeight:500,color:"#497342"}},n.a.createElement("div",null,"Experiment results are significant."," ",v.end_date?"":"You can end your experiment now or let it run until complete.")),n.a.createElement(h.a,{span:4},v.end_date?n.a.createElement(Yt.a,{className:"close-button",onClick:function(){return Pn(!1)}}):n.a.createElement(Nt.a,{type:"highlighted",className:"end-experiment-btn",onClick:function(){return ln()}},"End experiment"))),Rn&&Y&&!Ut&&!v.end_date&&n.a.createElement(y.a,{align:"top",className:"not-significant-results"},n.a.createElement(h.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"}},n.a.createElement("strong",null,"Your results are not statistically significant"),"."," ",pt," ",v!=null&&v.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",n.a.createElement("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations"}," ","experimentation guide"," "),"for more information."," "),n.a.createElement(h.a,{span:1},n.a.createElement(Yt.a,{className:"close-button",onClick:function(){return Pn(!1)}}))),Rn&&v.end_date&&n.a.createElement(y.a,{align:"top",className:"feature-flag-mods"},n.a.createElement(h.a,{span:23,style:{fontWeight:500}},n.a.createElement("strong",null,"Your experiment is complete.")," We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",n.a.createElement(jn.a,{to:v.feature_flag?ye.a.featureFlag(v.feature_flag):void 0},n.a.createElement("b",null,"Adjust feature flag distribution"))),n.a.createElement(h.a,{span:1},n.a.createElement(Yt.a,{className:"close-button",onClick:function(){return Pn(!1)}})))),n.a.createElement(y.a,null,n.a.createElement(k.a,{className:"full-width",defaultActiveKey:"experiment-details"},n.a.createElement(k.a.Panel,{header:n.a.createElement("b",null,"Experiment details"),key:"experiment-details"},n.a.createElement(y.a,null,n.a.createElement(h.a,{span:v!=null&&v.start_date?12:24},n.a.createElement(Fn,{experiment:v,trendCount:Jn,trendExposure:v==null?void 0:v.parameters.recommended_running_time,funnelSampleSize:v==null?void 0:v.parameters.recommended_sample_size,funnelConversionRate:_n,funnelEntrants:v!=null&&v.start_date?hn:La})),!et&&!Y&&v.start_date&&n.a.createElement(h.a,{span:12},n.a.createElement(pn,{experiment:v})),(Y||((b=v.secondary_metrics)===null||b===void 0?void 0:b.length)>0)&&n.a.createElement(h.a,{className:"secondary-progress",span:v!=null&&v.start_date?12:24},wn[tt.n.EXPERIMENTS_SECONDARY_METRICS]&&!!(v!=null&&v.secondary_metrics.length)&&n.a.createElement(h.a,{className:"border-bottom"},n.a.createElement(y.a,{align:"middle",justify:"space-between",className:"mb-05"},n.a.createElement(h.a,{className:"card-secondary",span:2*on},"Secondary metrics"),v==null||(u=v.parameters)===null||u===void 0||(P=u.feature_flag_variants)===null||P===void 0?void 0:P.map(function($,H){return n.a.createElement(h.a,{key:H,span:on,style:{color:"".concat(ue===O.s.FUNNELS?Object(Xn.k)(nt($.key,O.s.FUNNELS)+1):Object(xn.c)("white")[nt($.key,O.s.TRENDS)])}},n.a.createElement("span",{className:"text-default"},Object(ge.j)($.key)))})),wn[tt.n.EXPERIMENTS_SECONDARY_METRICS]&&(v.start_date?aa?n.a.createElement(te.a,{active:!0,paragraph:!1}):n.a.createElement(n.a.Fragment,null,v.secondary_metrics.map(function($,H){var ot,Qe;return n.a.createElement(y.a,{className:"border-top",key:H,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(h.a,{span:2*on},Object(ge.j)($.name)),v==null||(ot=v.parameters)===null||ot===void 0||(Qe=ot.feature_flag_variants)===null||Qe===void 0?void 0:Qe.map(function(In,En){return n.a.createElement(h.a,{key:En,span:on},Wt!=null&&Wt[H][In.key]?$.filters.insight===O.s.FUNNELS?n.a.createElement(n.a.Fragment,null,((Wt==null?void 0:Wt[H][In.key])*100).toFixed(1),"%"):n.a.createElement(n.a.Fragment,null,Object(ge.O)(Wt==null?void 0:Wt[H][In.key])):n.a.createElement(n.a.Fragment,null,"--"))}))})):n.a.createElement(n.a.Fragment,null,v.secondary_metrics.map(function($,H){var ot,Qe;return n.a.createElement(y.a,{className:"border-top",key:H,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(h.a,{span:2*on},Object(ge.j)($.name)),v==null||(ot=v.parameters)===null||ot===void 0||(Qe=ot.feature_flag_variants)===null||Qe===void 0?void 0:Qe.map(function(In,En){return n.a.createElement(h.a,{key:En,span:on},"--")}))})))),Y&&n.a.createElement(h.a,{className:"mt"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Experiment progress")),n.a.createElement(de.a,{strokeWidth:20,showInfo:!1,percent:Ba,strokeColor:"var(--success)"}),ue===O.s.TRENDS&&v.start_date&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},v.end_date?n.a.createElement("div",null,"Ran for"," ",n.a.createElement("b",null,Object(me.a)(v.end_date).diff(v.start_date,"day"))," ","days"):n.a.createElement("div",null,n.a.createElement("b",null,Object(me.a)().diff(v.start_date,"day"))," ","days running"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,v==null||(f=v.parameters)===null||f===void 0?void 0:f.recommended_running_time)," ","days")),ue===O.s.FUNNELS&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},v.end_date?n.a.createElement("div",null,"Saw"," ",n.a.createElement("b",null,Object(ge.O)(hn))," ","participants"):n.a.createElement("div",null,n.a.createElement("b",null,Object(ge.O)(hn))," ","participants seen"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,Object(ge.O)((v==null||(ee=v.parameters)===null||ee===void 0?void 0:ee.recommended_sample_size)||0))," ","participants"))))))),!(v!=null&&v.start_date)&&n.a.createElement("div",{className:"mt full-width"},n.a.createElement(pn,{experiment:v}))),n.a.createElement("div",{className:"experiment-result"},Y?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{justify:"space-around",style:{flexFlow:"nowrap"}},Object.keys(Y.probability).sort(function($,H){return Y.probability[H]-Y.probability[$]}).map(function($,H){return n.a.createElement(h.a,{key:H,className:"pr"},n.a.createElement("div",null,n.a.createElement("b",null,Object(ge.j)($))),ue===O.s.TRENDS?n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},n.a.createElement(y.a,null,"action"in Y.insight[0]&&n.a.createElement(nn.a,{filter:Y.insight[0].action}),n.a.createElement("span",{style:{paddingLeft:4}},"count:")))," ",Bt($)," ",rn&&H===0&&n.a.createElement(Fe.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher."},n.a.createElement(Qt.a,{style:{padding:"4px 2px"}}))):n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},"Conversion rate:")," ",Pt($),"%"),n.a.createElement(de.a,{percent:Number((Y.probability[$]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:ue===O.s.FUNNELS?Object(Xn.k)(nt($,O.s.FUNNELS)+1):Object(xn.c)("white")[nt($,O.s.TRENDS)]}),n.a.createElement("div",null,"Probability that this variant is the best:"," ",n.a.createElement("b",null,(Y.probability[$]*100).toFixed(1),"%")))}))):et&&n.a.createElement("div",{className:"text-center"},n.a.createElement(te.a,{active:!0})),Y?n.a.createElement(be.BindLogic,{logic:V.c,props:{dashboardItemId:Y.itemID,cachedInsight:{short_id:Y.itemID,filters:Mn(Mn(Mn({},Y.filters),{},{insight:ue,display:v.filters.display},ue===O.s.FUNNELS&&{layout:tt.p.vertical,funnel_viz_type:O.o.Steps}),ue===O.s.TRENDS&&{display:O.d.ActionsLineGraphCumulative}),result:Y.insight},doNotLoad:!0}},n.a.createElement("div",{className:"mt"},n.a.createElement(On.a,{disableHeader:ue===O.s.TRENDS,disableTable:ue===O.s.FUNNELS}))):v.start_date&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"no-experiment-results"},!et&&n.a.createElement("div",{className:"text-center"},n.a.createElement("b",null,"There are no results for this experiment yet."),n.a.createElement("div",{className:"text-default"},"Double check your feature flag implementation if you're still not seeing results.")))))):n.a.createElement(te.a,{active:!0}))}function Yn(){return n.a.createElement(ie.a,{defaultValue:"JavaScript",suffixIcon:n.a.createElement(ke.a,null)},n.a.createElement(ie.a.Option,{value:"JavaScript"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(pe.IconJavascript,{style:{marginRight:6}})," JavaScript")))}try{Cn.displayName="Experiment_",Cn.__docgenInfo={description:"",displayName:"Experiment_",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/Experiment.tsx#Experiment_"]={docgenInfo:Cn.__docgenInfo,name:"Experiment_",path:"frontend/src/scenes/experiments/Experiment.tsx#Experiment_"})}catch(a){}},"./frontend/src/scenes/experiments/experimentsLogic.ts":function(oe,D,e){"use strict";e.d(D,"a",function(){return be});var G=e("./node_modules/core-js/modules/es.array.concat.js"),Z=e.n(G),Ie=e("./node_modules/core-js/modules/es.array.filter.js"),he=e.n(Ie),Ee=e("./node_modules/core-js/modules/es.array.iterator.js"),ze=e.n(Ee),Je=e("./node_modules/core-js/modules/es.array.map.js"),ce=e.n(Je),t=e("./node_modules/core-js/modules/es.object.to-string.js"),j=e.n(t),Ke=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ne=e.n(Ke),s=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Ue=e.n(s),L=e("./node_modules/@babel/runtime/regenerator/index.js"),K=e.n(L),I=e("./node_modules/regenerator-runtime/runtime.js"),y=e.n(I),h=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),se=e.n(h),Fe=e("./node_modules/kea/lib/index.esm.js"),ie=e("./frontend/src/lib/api.ts"),Ye=e("./frontend/src/scenes/teamLogic.ts"),_=e("./frontend/src/types.ts"),k=e("./frontend/src/lib/utils.tsx"),te=e("./frontend/src/scenes/userLogic.ts"),de=e("./frontend/src/lib/components/lemonToast.tsx"),be=Object(Fe.kea)({path:["scenes","experiments","experimentsLogic"],connect:{values:[Ye.a,["currentTeamId"],te.a,["hasAvailableFeature"]]},actions:{},loaders:function(He){var Ze=He.values,q=He.actions;return{experiments:[[],{loadExperiments:function(){var Ge=se()(K.a.mark(function o(Q){var V;return K.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(Ze.hasAvailableFeature(_.c.EXPERIMENTATION)){ne.next=2;break}return ne.abrupt("return",[]);case 2:return ne.next=4,ie.b.get("api/projects/".concat(Ze.currentTeamId,"/experiments?").concat(Q||""));case 4:return V=ne.sent,ne.abrupt("return",V.results);case 6:case"end":return ne.stop()}},o)}));function n(o){return Ge.apply(this,arguments)}return n}(),deleteExperiment:function(){var Ge=se()(K.a.mark(function o(Q){return K.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,ie.b.delete("api/projects/".concat(Ze.currentTeamId,"/experiments/").concat(Q));case 2:return de.a.info("Experiment removed"),O.abrupt("return",Ze.experiments.filter(function(ne){return ne.id!==Q}));case 4:case"end":return O.stop()}},o)}));function n(o){return Ge.apply(this,arguments)}return n}(),addToExperiments:function(n){return[].concat(Ue()(Ze.experiments),[n])},updateExperiments:function(n){return Ze.experiments.map(function(o){return o.id===n.id?n:o})}}],tab:[_.h.All,{setExperimentsFilters:function(){var Ge=se()(K.a.mark(function o(Q){var V,O;return K.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return V=Q.tab,O=V===_.h.Yours?Object(k.zb)({user:!0}):Object(k.zb)({archived:!0}),V===_.h.All?q.loadExperiments(Object(k.zb)({all:!0})):q.loadExperiments(O),jt.abrupt("return",V);case 4:case"end":return jt.stop()}},o)}));function n(o){return Ge.apply(this,arguments)}return n}()}]}},events:function(He){var Ze=He.actions;return{afterMount:function(){Ze.loadExperiments(Object(k.zb)({all:!0}))}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(oe,D,e){"use strict";e.d(D,"a",function(){return En});var G=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Z=e.n(G),Ie=e("./node_modules/antd/es/card/index.js"),he=e("./node_modules/antd/es/row/index.js"),Ee=e("./node_modules/antd/es/col/index.js"),ze=e("./node_modules/core-js/modules/es.array.includes.js"),Je=e("./node_modules/core-js/modules/es.string.includes.js"),ce=e("./node_modules/react/index.js"),t=e.n(ce),j=e("./node_modules/core-js/modules/es.array.concat.js"),Ke=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Ne=e.n(Ke),s=e("./node_modules/kea/lib/index.esm.js"),Ue=e("./node_modules/antd/es/tag/index.js"),L=e("./node_modules/antd/es/select/index.js"),K=e("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),I=e("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),y=e("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),h=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},Fe=se,ie=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Ye=function(c,d){return ce.createElement(ie.a,Object(h.a)(Object(h.a)({},c),{},{ref:d,icon:Fe}))};Ye.displayName="AreaChartOutlined";var _=ce.forwardRef(Ye),k=e("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},de=te,be=function(c,d){return ce.createElement(ie.a,Object(h.a)(Object(h.a)({},c),{},{ref:d,icon:de}))};be.displayName="TableOutlined";var ht=ce.forwardRef(be),He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},Ze=He,q=function(c,d){return ce.createElement(ie.a,Object(h.a)(Object(h.a)({},c),{},{ref:d,icon:Ze}))};q.displayName="PieChartOutlined";var Ge=ce.forwardRef(q),n=e("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),o=e("./frontend/src/types.ts"),Q=e("./frontend/src/lib/utils.tsx"),V=e("./frontend/src/scenes/insights/insightLogic.ts"),O=e("./frontend/src/lib/logic/featureFlagLogic.ts"),ne=e("./frontend/src/lib/constants.tsx"),jt=e("./frontend/src/scenes/insights/ActionFilter/entityFilterLogic.ts"),Re=e("./frontend/src/lib/components/Tooltip.tsx");function Lt(m){var c=m.filters,d=m.onChange,g=m.disabled,C=Object(s.useValues)(V.c),E=C.insightProps,T=Object(s.useValues)(Object(K.a)(E)),M=T.chartFilter,R=Object(s.useActions)(Object(K.a)(E)),A=R.setChartFilter,N=Object(s.useValues)(O.a),F=N.featureFlags,X=c.insight===o.s.STICKINESS||c.insight===o.s.RETENTION,W=c.insight===o.s.RETENTION||c.insight===o.s.STICKINESS,ae=c.insight===o.s.RETENTION||c.insight===o.s.STICKINESS||!!c.breakdown&&c.breakdown!=="$geoip_country_code"&&c.breakdown!=="$geoip_country_name"||Object(jt.c)(c).length>1,ve=c.insight===o.s.RETENTION,re=ve||c.insight===o.s.STICKINESS||c.insight===o.s.RETENTION,$e=c.insight===o.s.RETENTION?o.d.ActionsTable:c.insight===o.s.FUNNELS?o.d.FunnelViz:o.d.ActionsLineGraph;function je(Te){var we=Te.icon,vt=Te.tooltip,Ot=Te.children,wt=Ot===void 0?null:Ot;return t.a.createElement(Re.a,{title:vt,placement:"left"},t.a.createElement("div",{style:{width:"100%"}},we," ",wt))}function at(Te){var we=Te.children,vt=we===void 0?null:we;return t.a.createElement(Ue.a,{color:"orange",style:{marginLeft:8,fontSize:10}},vt)}var it=c.insight===o.s.FUNNELS?[{value:o.o.Steps,label:t.a.createElement(je,{icon:t.a.createElement(I.a,null)},"Steps")},{value:o.o.Trends,label:t.a.createElement(je,{icon:t.a.createElement(y.a,null)},"Trends",t.a.createElement(at,null,"BETA"))}]:[{label:"Line Chart",options:[{value:o.d.ActionsLineGraph,label:t.a.createElement(je,{icon:t.a.createElement(y.a,null)},"Linear")},{value:o.d.ActionsLineGraphCumulative,label:t.a.createElement(je,{icon:t.a.createElement(_,null)},"Cumulative"),disabled:X}]},{label:"Bar Chart",options:[{value:o.d.ActionsBar,label:t.a.createElement(je,{icon:t.a.createElement(k.a,null)},"Time"),disabled:ve},{value:o.d.ActionsBarValue,label:t.a.createElement(je,{icon:t.a.createElement(k.a,null)},"Value"),disabled:re}]},{value:o.d.ActionsTable,label:t.a.createElement(je,{icon:t.a.createElement(ht,null)},"Table")},{value:o.d.ActionsPie,label:t.a.createElement(je,{icon:t.a.createElement(Ge,null)},"Pie"),disabled:W}].concat(Ne()(F[ne.n.HEDGEHOGGER]?[{value:o.d.WorldMap,label:t.a.createElement(je,{icon:t.a.createElement(n.a,null),tooltip:"Visualize data by country. Only works with one series at a time."},"Map"),disabled:ae}]:[]));return t.a.createElement(L.a,{key:"2",defaultValue:c.display||$e,value:M||$e,onChange:function(we){A(we),d==null||d(we)},bordered:!0,dropdownAlign:Q.a.bottomRight,dropdownMatchSelectWidth:!1,"data-attr":"chart-filter",disabled:g,options:it})}try{Lt.displayName="ChartFilter",Lt.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:Lt.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(m){}var ct=e("./node_modules/antd/es/checkbox/index.js"),Kt=e("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Xt(){var m=Object(s.useValues)(V.c),c=m.insightProps,d=Object(s.useValues)(Object(Kt.a)(c)),g=d.compare,C=d.disabled,E=Object(s.useActions)(Object(Kt.a)(c)),T=E.setCompare;return C?null:t.a.createElement(ct.a,{onChange:function(R){T(R.target.checked)},checked:g,style:{marginLeft:8,marginRight:6},disabled:C},"Compare",t.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var cn=e("./node_modules/core-js/modules/es.array.map.js"),st=e("./node_modules/core-js/modules/es.object.entries.js"),J=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),le=e.n(J),Oe=e("./node_modules/core-js/modules/es.array.iterator.js"),De=e("./node_modules/core-js/modules/es.object.to-string.js"),dt=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),_e=e("./frontend/src/scenes/insights/sharedUtils.ts");function ut(m,c){var d=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);c&&(g=g.filter(function(C){return Object.getOwnPropertyDescriptor(m,C).enumerable})),d.push.apply(d,g)}return d}function Ct(m){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?ut(Object(d),!0).forEach(function(g){Z()(m,g,d[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(d)):ut(Object(d)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(d,g))})}return m}var Me=Object(s.kea)({props:{},key:Object(_e.c)("new"),path:function(c){return["lib","components","IntervalFilter","intervalFilterLogic",c]},connect:function(c){return{actions:[Object(V.c)(c),["setFilters"]],values:[Object(V.c)(c),["filters"]]}},actions:function(){return{setInterval:function(d){return{interval:d}}}},listeners:function(c){var d=c.values,g=c.actions;return{setInterval:function(E){var T=E.interval;Object(Q.mb)(T,d.filters.interval)||g.setFilters(Ct(Ct({},d.filters),{},{interval:T}))}}},selectors:{interval:[function(m){return[m.filters]},function(m){return m==null?void 0:m.interval}]}}),U=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),kt={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function Et(m){var c=m.disabled,d=Object(s.useValues)(V.c),g=d.insightProps,C=Object(s.useValues)(Me(g)),E=C.interval,T=Object(s.useActions)(Me(g)),M=T.setInterval,R=Object.entries(kt).map(function(A){var N=le()(A,2),F=N[0],X=N[1].label;return{key:F,value:F,label:F===E?t.a.createElement(t.a.Fragment,null,t.a.createElement(U.a,null)," ",X):X}});return t.a.createElement(L.a,{bordered:!0,disabled:c,defaultValue:E||"day",value:E||void 0,dropdownMatchSelectWidth:!1,onChange:M,"data-attr":"interval-filter",options:R})}try{Et.displayName="IntervalFilter",Et.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:Et.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(m){}var Le=e("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),yt=e("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function S(m,c){var d=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);c&&(g=g.filter(function(C){return Object.getOwnPropertyDescriptor(m,C).enumerable})),d.push.apply(d,g)}return d}function lt(m){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?S(Object(d),!0).forEach(function(g){Z()(m,g,d[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(d)):S(Object(d)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(d,g))})}return m}function me(){var m=Object(s.useValues)(V.c),c=m.filters,d=Object(s.useActions)(V.c),g=d.setFilters,C=c.interval,E=c.smoothing_intervals;if(!C)return null;var T=yt.a[C].map(function(M){var R=M.value,A=M.label;return{value:R,label:R===E?t.a.createElement(t.a.Fragment,null,t.a.createElement(Le.a,null)," ",A):A}});return T.length?t.a.createElement(L.a,{key:C,bordered:!0,value:E||1,dropdownMatchSelectWidth:!1,onChange:function(R){g(lt(lt({},c),{},{smoothing_intervals:R}))},"data-attr":"smoothing-filter",options:T}):t.a.createElement(t.a.Fragment,null)}var ge=e("./node_modules/@babel/runtime/helpers/extends.js"),Rt=e.n(ge),We=e("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),_t=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function Ae(m){var c=Object(s.useValues)(V.c),d=c.insightProps,g=Object(s.useValues)(Object(We.a)(d)),C=g.dates,E=C.dateFrom,T=C.dateTo,M=Object(s.useActions)(Object(We.a)(d)),R=M.setDates;return t.a.createElement(_t.a,Rt()({},m,{dateFrom:E!=null?E:void 0,dateTo:T!=null?T:void 0,onChange:function(N,F){var X;R(N,F),(X=m.onChange)===null||X===void 0||X.call(m,N,F)}}))}try{Ae.displayName="InsightDateFilter",Ae.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:Ae.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(m){}var Se=e("./node_modules/rc-picker/lib/generate/dayjs.js"),ye=e.n(Se),mt=e("./node_modules/antd/lib/date-picker/generatePicker/index.js"),zt=e.n(mt),tt=e("./frontend/src/scenes/retention/retentionTableLogic.ts"),It=e("./frontend/src/lib/dayjs.ts"),At=zt()(ye.a);function dn(m){var c=m.disabled,d=Object(s.useValues)(V.c),g=d.insightProps,C=Object(s.useValues)(Object(tt.d)(g)),E=C.filters,T=Object(s.useActions)(Object(tt.d)(g)),M=T.setFilters,R=E.date_to&&Object(It.a)(E.date_to).year()!==Object(It.a)().year()?", YYYY":"";return t.a.createElement(t.a.Fragment,null,t.a.createElement(Re.a,{title:"Cohorts up to this end date"},t.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},t.a.createElement(U.a,null),t.a.createElement(At,{showTime:E.period==="Hour",use12Hours:!0,format:E.period==="Hour"?"MMM D".concat(R,", h a"):"MMM D".concat(R),value:E.date_to?Object(It.a)(E.date_to):void 0,onChange:function(N){return M({date_to:N&&Object(It.a)(N).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:c}))))}try{dn.displayName="RetentionDatePicker",dn.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:dn.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(m){}var qe=e("./frontend/src/scenes/funnels/funnelLogic.ts"),Qt=e("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function Zt(m){var c=m.disabled,d=Object(s.useValues)(V.c),g=d.insightProps,C=Object(s.useValues)(Object(qe.a)(g)),E=C.barGraphLayout,T=Object(s.useActions)(Object(qe.a)(g)),M=T.setFilters,R=[{value:ne.p.vertical,icon:t.a.createElement(k.a,null),label:"Left to right"},{value:ne.p.horizontal,icon:t.a.createElement(Qt.a,null),label:"Top to bottom"}];return t.a.createElement(L.a,{defaultValue:ne.p.vertical,value:E||ne.p.vertical,onChange:function(N){return M({layout:N})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:c},t.a.createElement(L.a.OptGroup,{label:"Graph display options"},R.map(function(A){return t.a.createElement(L.a.Option,{key:A.value,value:A.value,label:t.a.createElement(t.a.Fragment,null,A.icon," ",A.label)},A.label)})))}try{Zt.displayName="FunnelDisplayLayoutPicker",Zt.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:Zt.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(m){}var bn=e("./node_modules/core-js/modules/es.array.filter.js"),Bn=e("./node_modules/core-js/modules/es.array.from.js"),z=e("./node_modules/core-js/modules/es.array.slice.js"),qt=e("./node_modules/core-js/modules/es.string.iterator.js"),en=e("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),un=e("./frontend/src/scenes/paths/pathsLogic.ts"),On=e("./frontend/src/scenes/userLogic.ts");function pe(m){var c,d=m.disabled,g=Object(s.useValues)(V.c),C=g.insightProps,E=Object(s.useValues)(Object(un.b)(C)),T=E.filter,M=Object(s.useActions)(Object(un.b)(C)),R=M.setFilter,A=Object(s.useValues)(On.a),N=A.user,F=2,X=!(N==null||(c=N.organization)===null||c===void 0)&&c.available_features.includes(o.c.PATHS_ADVANCED)?20:5,W=Array.from(Array.from(Array.from(Array(X+1).keys()).slice(F)),function(ae){return{label:"".concat(ae," Steps"),value:ae}});return t.a.createElement(L.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:T.step_limit||un.a,onSelect:function(ve){return R({step_limit:ve})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:Q.a.bottomRight,optionLabelProp:"label",disabled:d},W.map(function(ae){return t.a.createElement(L.a.Option,{key:ae.value,value:ae.value,label:t.a.createElement(t.a.Fragment,null,t.a.createElement(en.a,null)," ",ae.label)},ae.label)}))}try{pe.displayName="PathStepPicker",pe.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:pe.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(m){}var xe=e("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function ke(m){var c=m.disabled,d=Object(s.useValues)(V.c),g=d.insightProps,C=Object(s.useValues)(Object(tt.d)(g)),E=C.retentionReference,T=Object(s.useActions)(Object(tt.d)(g)),M=T.setRetentionReference;return t.a.createElement(L.a,{value:E,onChange:M,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:c},[{value:"total",icon:t.a.createElement(xe.a,null),label:"Overall cohort"},{value:"previous",icon:t.a.createElement(xe.a,null),label:"Relative to previous period"}].map(function(R){return t.a.createElement(L.a.Option,{key:R.value,value:R.value,label:t.a.createElement(t.a.Fragment,null,R.icon," ",R.label)},R.label)}))}try{ke.displayName="ReferencePicker",ke.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:ke.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(m){}var Yt=e("./node_modules/antd/es/tooltip/index.js"),St=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Xn=e("./node_modules/core-js/modules/es.set.js"),Kn=e("./node_modules/antd/es/input-number/index.js"),Un=e("./node_modules/clsx/dist/clsx.m.js"),ha=0,Wn=90,tn=new Set([5,15,25,50,90]),Qn=[{label:"Auto bins",value:ne.f,display:!0}].concat(Ne()(Array.from(Array.from(Array(Wn+1).keys()),function(m){return{label:"".concat(m," bins"),value:m,display:tn.has(m)}})),[{label:"Custom",value:"custom",display:!0}]);function mn(m){var c=m.disabled,d=Object(s.useValues)(V.c),g=d.insightProps,C=Object(s.useValues)(Object(qe.a)(g)),E=C.filters,T=C.numericBinCount,M=Object(s.useActions)(Object(qe.a)(g)),R=M.setBinCount;return t.a.createElement(L.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:ne.f,value:E.bin_count||ne.f,onSelect:function(N){return R(N)},dropdownRender:function(N){return t.a.createElement(t.a.Fragment,null,N,t.a.createElement("div",null,t.a.createElement(Kn.a,{className:"funnel-bins-custom-picker",size:"middle",min:ha,max:Wn,value:T,onChange:function(X){var W=typeof X=="string"?parseInt(X):X;W&&R(W)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:Q.a.bottomRight,optionLabelProp:"label",disabled:c},t.a.createElement(L.a.OptGroup,{label:"Bin Count"},Qn.map(function(A){return A.value==="custom"?null:t.a.createElement(L.a.Option,{className:Object(Un.a)({"select-option-hidden":!A.display}),key:A.value,value:A.value,label:t.a.createElement(t.a.Fragment,null,t.a.createElement(k.a,null)," ",A.label)},A.label)})))}try{mn.displayName="FunnelBinsPicker",mn.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:mn.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(m){}var $t,Ht,Nt=function(c,d){switch(c){case o.s.FUNNELS:return d.funnel_viz_type===o.o.Trends;case o.s.RETENTION:case o.s.PATHS:return!1;case o.s.TRENDS:case o.s.STICKINESS:case o.s.LIFECYCLE:default:return!d.display||![o.d.ActionsPie,o.d.ActionsTable,o.d.ActionsBarValue,o.d.WorldMap].includes(d.display)}},kn=function(c){switch(c){case o.s.TRENDS:case o.s.STICKINESS:return!0;case o.s.RETENTION:case o.s.FUNNELS:return!1;case o.s.LIFECYCLE:case o.s.PATHS:return!1;default:return!0}},Zn=($t={},Z()($t,"".concat(o.s.TRENDS),!0),Z()($t,"".concat(o.s.STICKINESS),!0),Z()($t,"".concat(o.s.LIFECYCLE),!0),Z()($t,"".concat(o.s.FUNNELS),!0),Z()($t,"".concat(o.s.RETENTION),!1),Z()($t,"".concat(o.s.PATHS),!0),$t),Gt=(Ht={},Z()(Ht,"".concat(o.s.TRENDS),!0),Z()(Ht,"".concat(o.s.STICKINESS),!0),Z()(Ht,"".concat(o.s.LIFECYCLE),!1),Z()(Ht,"".concat(o.s.FUNNELS),!1),Z()(Ht,"".concat(o.s.RETENTION),!1),Z()(Ht,"".concat(o.s.PATHS),!1),Ht),Nn=function(c){var d,g;return!c.actions&&!c.events||((d=c.actions)===null||d===void 0?void 0:d.length)===0&&((g=c.events)===null||g===void 0?void 0:g.length)===0};function xn(m){var c=m.filters,d=m.activeView,g=m.disableTable,C=m.disabled,E=d===o.s.FUNNELS,T=d===o.s.PATHS,M=Object(s.useValues)(O.a),R=M.featureFlags;return t.a.createElement("div",{className:"display-config-inner"},t.a.createElement("div",{className:"display-config-inner-row"},Zn[d]&&!g&&t.a.createElement("span",{className:"filter"},t.a.createElement("span",{className:"head-title-item"},"Date range"),t.a.createElement(Ae,{defaultValue:"Last 7 days",disabled:C||E&&Nn(c),bordered:!0,makeLabel:function(N){return t.a.createElement(t.a.Fragment,null,t.a.createElement(U.a,null)," ",N,N=="All time"&&t.a.createElement(Yt.a,{title:"Only events dated after 2015 will be shown"},t.a.createElement(St.a,{className:"info-indicator"})))}})),Nt(d,c)&&t.a.createElement("span",{className:"filter"},t.a.createElement("span",{className:"head-title-item"},t.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),t.a.createElement(Et,{view:d,disabled:C})),d===o.s.TRENDS&&!c.breakdown_type&&!c.compare&&(!c.display||c.display===ne.d)&&R[ne.n.SMOOTHING_INTERVAL]?t.a.createElement(me,null):null,d===o.s.RETENTION&&t.a.createElement(t.a.Fragment,null,t.a.createElement(dn,{disabled:C}),t.a.createElement(ke,{disabled:C})),T&&t.a.createElement("span",{className:"filter"},t.a.createElement(pe,{disabled:C})),Gt[d]&&t.a.createElement("span",{className:"filter"},t.a.createElement(Xt,null))),t.a.createElement("div",{className:"display-config-inner-row"},kn(d)&&t.a.createElement("span",{className:"filter"},t.a.createElement("span",{className:"head-title-item"},"Chart type"),t.a.createElement(Lt,{filters:c,disabled:C||c.insight===o.s.LIFECYCLE})),E&&c.funnel_viz_type===o.o.Steps&&t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"filter"},t.a.createElement(Zt,{disabled:C}))),E&&c.funnel_viz_type===o.o.TimeToConvert&&t.a.createElement("span",{className:"filter"},t.a.createElement(mn,{disabled:C}))))}try{xn.displayName="InsightDisplayConfig",xn.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:xn.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(m){}var nn=e("./node_modules/antd/es/button/index.js"),Ea=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),jn=e.n(Ea),ya=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),qn=e.n(ya),zn={};zn.insert="head",zn.singleton=!1;var wa=jn()(qn.a,zn),ba=qn.a.locals||{},Oa=e("./frontend/src/scenes/funnels/funnelUtils.ts"),Fn=e("./node_modules/core-js/modules/es.array.find.js"),Dn=e("./frontend/src/lib/components/EntityFilterInfo.tsx");function pn(){var m,c=Object(s.useValues)(V.c),d=c.insightProps,g=Object(s.useValues)(Object(qe.a)(d)),C=g.filters,E=g.numberOfSeries,T=g.areFiltersValid,M=g.filterSteps,R=Object(s.useActions)(Object(qe.a)(d)),A=R.changeStepRange;if(C.funnel_viz_type===o.o.Steps)return null;var N=function(ve,re){A(ve,re)},F=T?Array.from(Array(Math.max(E)).keys()).slice(0,-1):[0],X=T?Array.from(Array(Math.max(E)).keys()).slice(((m=C.funnel_from_step)!==null&&m!==void 0?m:0)+1):[1],W=function(ve){return ve.map(function(re){var $e=M.find(function(je){return je.order===re});return $e?t.a.createElement(L.a.Option,{key:re,value:re,label:"Step ".concat(re+1)},t.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},t.a.createElement("span",{style:{marginRight:4}},"Step ",re+1,":"),t.a.createElement(Dn.a,{filter:$e}))):null})};return t.a.createElement(he.a,{className:"funnel-options-inputs"},t.a.createElement("span",{className:"text-muted-alt"},"from"),t.a.createElement(L.a,{disabled:!T,dropdownMatchSelectWidth:!1,dropdownAlign:Q.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:C.funnel_from_step||0,onChange:function(ve){return N(ve,C.funnel_to_step)},style:{marginLeft:4,marginRight:4}},W(F)),t.a.createElement("span",{className:"text-muted-alt"},"to"),t.a.createElement(L.a,{disabled:!T,dropdownMatchSelectWidth:!1,dropdownAlign:Q.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:C.funnel_to_step||Math.max(E-1,1),onChange:function(ve){return N(C.funnel_from_step,ve)},style:{marginLeft:4,marginRight:4}},W(X)))}function ea(){var m=Object(s.useValues)(V.c),c=m.insightProps,d=m.filters,g=m.activeView,C=Object(s.useValues)(Object(qe.a)(c)),E=C.conversionMetrics,T=C.aggregationTargetLabel,M=Object(s.useActions)(Object(K.a)(c)),R=M.setChartFilter;if(g!==o.s.FUNNELS)return null;var A=[].concat(Ne()(d.funnel_viz_type===o.o.Steps?[t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},t.a.createElement(Re.a,{title:"Overall conversion rate for all ".concat(T.plural," on the entire funnel.")},t.a.createElement(St.a,{className:"info-indicator left"})),"Total conversion rate"),t.a.createElement("span",{className:"text-muted-alt mr-025"},":"),t.a.createElement("span",{className:"l4"},Object(Oa.c)(E.totalRate),"%"))]:[]),Ne()(d.funnel_viz_type!==o.o.Trends?[t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},t.a.createElement(Re.a,{title:"Average (arithmetic mean) of the total time each ".concat(T.singular," spent in the entire funnel.")},t.a.createElement(St.a,{className:"info-indicator left"})),"Average time to convert"," "),d.funnel_viz_type===o.o.TimeToConvert&&t.a.createElement(pn,null),t.a.createElement("span",{className:"text-muted-alt mr-025"},":"),t.a.createElement(nn.a,{type:"link",onClick:function(){return R(o.o.TimeToConvert)},disabled:d.funnel_viz_type===o.o.TimeToConvert},t.a.createElement("span",{className:"l4"},Object(Q.N)(E.averageTime))))]:[]),Ne()(d.funnel_viz_type===o.o.Trends?[t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),t.a.createElement(pn,null))]:[]));return t.a.createElement(he.a,{className:"funnel-canvas-label",align:"middle"},A.map(function(N,F){return t.a.createElement(t.a.Fragment,{key:F},F>0&&t.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),N)}))}var Mn=e("./frontend/src/lib/hooks/usePeriodicRerender.ts"),ta=3;function Cn(){var m=Object(s.useValues)(V.c),c=m.lastRefresh,d=Object(s.useActions)(V.c),g=d.loadResults;return Object(Mn.a)(15e3),t.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",c?Object(It.a)(c).fromNow():"a while ago",t.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),t.a.createElement(Yt.a,{title:t.a.createElement(t.a.Fragment,null,"Insights can be refreshed",t.a.createElement("br",null),"every ",ta," minutes.")},t.a.createElement(nn.a,{size:"small",type:"link",onClick:function(){return g(!0)},disabled:!!c&&Object(It.a)().subtract(ta-.5,"minutes").isBefore(c),style:{padding:0}},t.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var Yn=e("./frontend/src/scenes/trends/PersonsModal.tsx"),a=e("./frontend/src/scenes/trends/viz/index.ts"),r=e("./frontend/src/scenes/trends/SaveCohortModal.tsx"),l=e("./frontend/src/scenes/trends/trendsLogic.ts"),i=e("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(m){}var p=e("./frontend/src/scenes/trends/personsModalLogic.ts"),x=e("./frontend/src/lib/utils/eventUsageLogic.ts"),b=e("./frontend/src/scenes/insights/insightSceneLogic.tsx"),u=e("./frontend/src/scenes/insights/WorldMap/index.ts");function P(m){var c=m.view,d=Object(s.useValues)(b.a),g=d.insightMode,C=Object(s.useValues)(V.c),E=C.insightProps,T=Object(s.useValues)(p.b),M=T.cohortModalVisible,R=Object(s.useActions)(p.b),A=R.setCohortModalVisible,N=Object(s.useValues)(Object(l.a)(E)),F=N.filters,X=N.loadMoreBreakdownUrl,W=N.breakdownValuesLoading,ae=N.showModalActions,ve=N.aggregationTargetLabel,re=Object(s.useActions)(Object(l.a)(E)),$e=re.loadMoreBreakdownValues,je=Object(s.useValues)(p.b),at=je.showingPeople,it=Object(s.useActions)(p.b),Te=it.saveCohortWithUrl,we=Object(s.useActions)(x.f),vt=we.reportCohortCreatedFromPersonsModal,Ot=function(){if(!F.display||F.display===ne.d||F.display===ne.c||F.display===ne.a)return t.a.createElement(a.b,null);if(F.display===ne.e)return t.a.createElement(s.BindLogic,{logic:l.a,props:{dashboardItemId:null,view:c,filters:null}},t.a.createElement(i.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(c),canEditSeriesNameInline:g===o.t.Edit,isMainInsightView:!0}));if(F.display===o.d.ActionsPie)return t.a.createElement(a.c,null);if(F.display===o.d.ActionsBarValue)return t.a.createElement(a.a,null);if(F.display===o.d.WorldMap)return t.a.createElement(u.a,null)};return t.a.createElement(t.a.Fragment,null,(F.actions||F.events)&&t.a.createElement("div",{className:F.display!==ne.e&&F.display!==o.d.WorldMap?"trends-insights-container":void 0},Ot()),F.breakdown&&X&&t.a.createElement("div",{className:"mt text-center"},t.a.createElement("div",{className:"text-muted mb"},"For readability, ",t.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),t.a.createElement("div",null,t.a.createElement(nn.a,{style:{textAlign:"center",marginBottom:16},onClick:$e,loading:W},"Load more breakdown values"))),t.a.createElement(Yn.a,{visible:at&&!M,view:c,filters:F,onSaveCohort:function(){A(!0)},showModalActions:ae,aggregationTargetLabel:ve}),t.a.createElement(r.a,{visible:M,onOk:function(Vn){Te(Vn),A(!1),vt(F)},onCancel:function(){return A(!1)}}))}try{P.displayName="TrendInsight",P.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:P.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(m){}var f=e("./frontend/src/scenes/funnels/Funnel.tsx");function ee(){var m=Object(s.useValues)(V.c),c=m.insightProps,d=Object(s.useValues)(Object(qe.a)(c)),g=d.isValidFunnel,C=d.insightLoading,E=d.filters,T=d.areFiltersValid,M=d.barGraphLayout,R=d.aggregationTargetLabel,A=Object(s.useValues)(p.b),N=A.showingPeople,F=A.cohortModalVisible,X=Object(s.useActions)(p.b),W=X.setCohortModalVisible;return t.a.createElement(t.a.Fragment,null,t.a.createElement(Yn.a,{visible:N&&!F,view:o.s.FUNNELS,filters:E,onSaveCohort:function(){W(!0)},showModalActions:E.aggregation_group_type_index==null,aggregationTargetLabel:R}),t.a.createElement("div",{className:Object(Un.a)("funnel-insights-container",{"non-empty-state":g&&T||C,"no-padding":E.funnel_viz_type==o.o.Steps&&M===ne.p.vertical})},t.a.createElement(f.a,null)))}var fe=e("./frontend/src/scenes/retention/RetentionContainer.tsx"),Pe=e("./frontend/src/scenes/paths/Paths.tsx"),B=e("./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepTable.tsx"),w=e("./frontend/src/scenes/insights/EmptyStates/index.ts");function v(){var m=Object(s.useValues)(V.c),c=m.activeView;return c!==o.s.PATHS?null:t.a.createElement(he.a,{className:"funnel-canvas-label",align:"middle"},t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var Ve=e("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),Ft=e("./node_modules/antd/lib/input/TextArea.js"),Vt=e.n(Ft),Jt=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),Y=e.n(Jt),Bt={};Bt.insert="head",Bt.singleton=!1;var an=jn()(Y.a,Bt),ue=Y.a.locals||{},et=e("./node_modules/core-js/modules/es.number.constructor.js"),Dt=e("./node_modules/core-js/modules/es.number.is-integer.js"),Ut=e("./node_modules/core-js/modules/es.number.to-fixed.js"),Pt=e("./node_modules/core-js/modules/es.regexp.exec.js"),nt=e("./node_modules/core-js/modules/es.string.split.js"),pt=e("./node_modules/antd/es/spin/index.js"),rn=e("./node_modules/antd/es/table/index.js"),Ln=e("./node_modules/antd/lib/table/Column.js"),Mt=e.n(Ln),na=e("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},xa=Wt,aa=function(c,d){return ce.createElement(ie.a,Object(h.a)(Object(h.a)({},c),{},{ref:d,icon:xa}))};aa.displayName="FallOutlined";var bt=ce.forwardRef(aa),fn=e("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),vn=e("./frontend/src/lib/components/icons.tsx"),ja=e("./node_modules/antd/lib/checkbox/Checkbox.js"),sn=e.n(ja),An=e("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),ln=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ca=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),ra=e.n(Ca),$n={};$n.insert="head",$n.singleton=!1;var Ra=jn()(ra.a,$n),_a=ra.a.locals||{},Sa=e("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function Sn(m){var c=m.id,d=m.offset,g=m.children,C=Object(s.useActions)(Object(Sa.a)({id:c,offset:d})),E=C.scrolling,T=Object(ce.useRef)(null);return Object(ce.useEffect)(function(){var M=T.current;return document.addEventListener("scroll",function(){return E(M)}),function(){return document.removeEventListener("scroll",function(){return E(M)})}},[T.current]),t.a.createElement("div",{ref:T},g)}try{Sn.displayName="VisibilitySensor",Sn.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:Sn.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(m){}var gn=e("./frontend/src/lib/components/LemonButton/index.ts"),wn=e("./frontend/src/lib/components/Popup/Popup.tsx"),Pa=e("./node_modules/antd/es/modal/index.js"),Ta=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),Ia=e("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),Na=e("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),sa=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),Rn=e.n(sa),Pn={};Pn.insert="head",Pn.singleton=!1;var Va=jn()(Rn.a,Pn),la=Rn.a.locals||{},Tn=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),oa=e("./frontend/src/lib/components/Link.tsx"),Fa=e("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function ia(){var m=Object(s.useValues)(V.c),c=m.insightProps,d=Object(qe.a)(c),g=Object(s.useValues)(d),C=g.correlationsLoading,E=g.funnelCorrelationDetails,T=g.parseDisplayNameForCorrelation,M=g.correlationMatrixAndScore,R=Object(s.useActions)(d),A=R.setFunnelCorrelationDetails,N=R.openCorrelationPersonsModal,F=(E==null?void 0:E.result_type)===o.k.Events?"event":"property",X=(E==null?void 0:E.result_type)===o.k.Events?"performed event":"have property",W=t.a.createElement(t.a.Fragment,null);if(E){var ae=T(E),ve=ae.first_value,re=ae.second_value;W=t.a.createElement(t.a.Fragment,null,t.a.createElement(ln.a,{value:ve}),re!==void 0&&t.a.createElement(t.a.Fragment,null," :: ",t.a.createElement(ln.a,{value:re,disablePopover:!0})))}var $e=M.correlationScore,je=M.truePositive,at=M.falsePositive,it=M.trueNegative,Te=M.falseNegative,we=M.correlationScoreStrength,vt=we==="strong"?t.a.createElement(Ta.a,{style:{color:"var(--success)"}}):we==="moderate"?t.a.createElement(Ia.a,{style:{color:"var(--warning)"}}):t.a.createElement(Na.a,{style:{color:"var(--danger)"}}),Ot=function(){return A(null)};return t.a.createElement(Pa.a,{className:"correlation-matrix",visible:!!E,onCancel:Ot,destroyOnClose:!0,footer:t.a.createElement(nn.a,{onClick:Ot},"Dismiss"),width:600,title:"Correlation details"},t.a.createElement("div",{className:"correlation-table-wrapper"},C?t.a.createElement("div",{className:"mt text-center"},t.a.createElement(Tn.a,{size:"lg"})):E?t.a.createElement(t.a.Fragment,null,t.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",X," ",t.a.createElement("b",null,W),"."),t.a.createElement("table",null,t.a.createElement("thead",null,t.a.createElement("tr",{className:"table-title"},t.a.createElement("td",{colSpan:3},"Results matrix")),t.a.createElement("tr",null,t.a.createElement("td",null,(E==null?void 0:E.result_type)===o.k.Events?"Performed event":"Has property"),t.a.createElement("td",null,"Success"),t.a.createElement("td",null,"Dropped off"))),t.a.createElement("tbody",null,t.a.createElement("tr",null,t.a.createElement("td",{className:"horizontal-header"},"Yes"),t.a.createElement("td",null,t.a.createElement(Re.a,{title:"True positive (TP) - Percentage of users who ".concat(X," and completed the funnel.")},t.a.createElement("div",{className:"percentage"},je?Object(Q.ob)(je/(je+at)):"0.00%")),je===0?"0 users":t.a.createElement(oa.a,{onClick:function(){N(E,!0)}},Object(Q.qb)(je,"user",void 0,!0,!0))),t.a.createElement("td",null,t.a.createElement("div",{className:"percentage"},t.a.createElement(Re.a,{title:"False negative (FN) - Percentage of users who ".concat(X," and did not complete the funnel.")},Te?Object(Q.ob)(Te/(Te+it)):"0.00%")),Te===0?"0 users":t.a.createElement(oa.a,{onClick:function(){N(E,!1)}},Object(Q.qb)(Te,"user",void 0,!0,!0)))),t.a.createElement("tr",null,t.a.createElement("td",{className:"horizontal-header"},"No"),t.a.createElement("td",null,t.a.createElement("div",{className:"percentage"},t.a.createElement(Re.a,{title:"False positive (FP) - Percentage of users who did not ".concat(X," and completed the funnel.")},at?Object(Q.ob)(at/(je+at)):"0.00%")),Object(Q.qb)(at,"user",void 0,!0,!0)),t.a.createElement("td",null,t.a.createElement("div",{className:"percentage"},t.a.createElement(Re.a,{title:"True negative (TN) - Percentage of users who did not ".concat(X," and did not complete the funnel.")},it?Object(Q.ob)(it/(Te+it)):"0.00%")),Object(Q.qb)(it,"user",void 0,!0,!0))),t.a.createElement("tr",null,t.a.createElement("td",{className:"horizontal-header"}),t.a.createElement("td",null,t.a.createElement("b",null,"100%")),t.a.createElement("td",null,t.a.createElement("b",null,"100%"))))),t.a.createElement("div",{className:"mt text-center"},Object(Q.j)((E==null?void 0:E.result_type)||"")," ",t.a.createElement("b",null,W)," ","has a"," ",(E==null?void 0:E.correlation_type)===o.l.Success?t.a.createElement("b",{className:"text-success"},"positive"," ",t.a.createElement(Re.a,{title:"Positive correlation means this ".concat(F," is correlated with a successful conversion.")},t.a.createElement(St.a,{className:"cursor-pointer"}))):t.a.createElement("b",{className:"text-danger"},"negative"," ",t.a.createElement(Re.a,{title:"Negative correlation means this ".concat(F," is correlated with an unsuccessful conversion (user dropped off).")},t.a.createElement(St.a,{className:"cursor-pointer"})))," ","correlation score of"," ",t.a.createElement("b",{style:{color:we==="strong"?"var(--success)":we==="moderate"?"var(--warning)":"var(--danger)"}},t.a.createElement(Re.a,{title:"This ".concat(F," has ").concat(we," correlation.")},t.a.createElement("span",{style:{cursor:"pointer"}},vt," ",$e.toFixed(3)))))):t.a.createElement("div",null,t.a.createElement(Fa.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function Hn(){var m=Object(s.useValues)(V.c),c=m.insightProps,d=Object(qe.a)(c),g=Object(s.useValues)(d),C=g.stepsWithCount,E=g.correlationValues,T=g.correlationTypes,M=g.eventHasPropertyCorrelations,R=g.eventWithPropertyCorrelationsValues,A=g.parseDisplayNameForCorrelation,N=g.correlationsLoading,F=g.eventWithPropertyCorrelationsLoading,X=g.nestedTableExpandedKeys,W=g.correlationPropKey,ae=g.filters,ve=g.aggregationTargetLabel,re=Object(s.useActions)(d),$e=re.setCorrelationTypes,je=re.loadEventWithPropertyCorrelations,at=re.addNestedTableExpandedKey,it=re.removeNestedTableExpandedKey,Te=re.openCorrelationPersonsModal,we=re.loadCorrelations,vt=Object(s.useActions)(x.f),Ot=vt.reportCorrelationInteraction;Object(ce.useEffect)(function(){we({})},[ae]);var wt=function(Ce){T?T.includes(Ce)?$e(T.filter(function(Xe){return Xe!==Ce})):$e([].concat(Ne()(T),[Ce])):$e([Ce])},Vn=function(Ce){var Xe=function(ga){return ga<10&&!Number.isInteger(ga)?ga.toFixed(1):ga.toFixed()},xt=Ce.correlation_type===o.l.Success,rt=A(Ce),yn=rt.first_value,fa=rt.second_value;return t.a.createElement(t.a.Fragment,null,t.a.createElement("h4",null,xt?t.a.createElement(na.a,{style:{color:"green"}}):t.a.createElement(bt,{style:{color:"red"}})," ",t.a.createElement(ln.a,{value:yn}),fa!==void 0&&t.a.createElement(t.a.Fragment,null," :: ",t.a.createElement(ln.a,{value:fa,disablePopover:!0}))),t.a.createElement("div",null,Object(Q.j)(ve.plural)," ",ae.aggregation_group_type_index!=null?"that":"who"," converted were"," ",t.a.createElement("mark",null,t.a.createElement("b",null,Xe(Ce.odds_ratio),"x ",xt?"more":"less"," likely"))," ","to"," ",Ce.result_type===o.k.EventWithProperties?"have this event property":"do this event"),t.a.createElement(ia,null))},Tt=function(Ce){return t.a.createElement(An.c,{onClick:function(){Te(Ce,!0)}},Ce.success_count)},Be=function(Ce){return t.a.createElement(An.c,{onClick:function(){Te(Ce,!1)}},Ce.failure_count)},gt=function(Ce){return F?t.a.createElement("div",{className:"nested-properties-loading"},t.a.createElement(pt.a,null),t.a.createElement("h3",null,"Loading correlation results"),t.a.createElement("p",null,"This process can take up to 20 seconds. ")):t.a.createElement("div",null,t.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),t.a.createElement(rn.a,{dataSource:R[Ce],rowKey:function(xt){return xt.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(xt,rt){return Ot(o.k.EventWithProperties,"pagination change",{page:xt,page_size:rt})}}},t.a.createElement(Mt.a,{title:"Property",key:"eventName",render:function(xt,rt){return Vn(rt)},align:"left"}),t.a.createElement(Mt.a,{title:"Completed",key:"success_count",render:function(xt,rt){return Tt(rt)},width:90,align:"center"}),t.a.createElement(Mt.a,{title:"Dropped off",key:"failure_count",render:function(xt,rt){return Be(rt)},width:120,align:"center"}),t.a.createElement(Mt.a,{title:"",key:"actions",render:function(xt,rt){return t.a.createElement(ca,{record:rt})},align:"center",width:30})))};return C.length>1?t.a.createElement(Sn,{id:W,offset:152},t.a.createElement("div",{className:"funnel-correlation-table"},t.a.createElement("span",{className:"funnel-correlation-header"},t.a.createElement("span",{className:"table-header"},t.a.createElement(vn.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),t.a.createElement("span",{className:"table-options"},t.a.createElement("p",{className:"title"},"CORRELATION"),t.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return wt(o.l.Success)}},t.a.createElement(sn.a,{checked:T.includes(o.l.Success),style:{pointerEvents:"none"}},"Success")),t.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return wt(o.l.Failure)}},t.a.createElement(sn.a,{checked:T.includes(o.l.Failure),style:{pointerEvents:"none"}},"Dropoff")))),t.a.createElement(rn.a,{dataSource:E,loading:N,size:"small",scroll:{x:"max-content"},rowKey:function(Ce){return Ce.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return Ot(o.k.Events,"load more")}},expandable:{expandedRowRender:function(Ce){return gt(Ce.event.event)},expandedRowKeys:X,rowExpandable:function(){return ae.aggregation_group_type_index===void 0},expandIcon:function(Ce){var Xe=Ce.expanded,xt=Ce.onExpand,rt=Ce.record,yn=Ce.expandable;return yn?Xe?t.a.createElement(Re.a,{title:"Collapse"},t.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(va){it(rt.event.event),xt(rt,va)}},t.a.createElement(vn.IconUnfoldLess,null))):t.a.createElement(Re.a,{title:"Expand to see correlated properties for this event"},t.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(va){!M(rt.event.event)&&je(rt.event.event),at(rt.event.event),xt(rt,va)}},t.a.createElement(vn.IconUnfoldMore,null))):null}}},t.a.createElement(Mt.a,{title:"Event",key:"eventName",render:function(Ce,Xe){return Vn(Xe)},align:"left",ellipsis:!0}),t.a.createElement(Mt.a,{title:t.a.createElement("div",{className:"flex-center"},"Completed",t.a.createElement(Re.a,{title:"".concat(Object(Q.j)(ve.plural)," ").concat(ae.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},t.a.createElement(St.a,{className:"column-info"}))),key:"success_count",render:function(Ce,Xe){return Tt(Xe)},width:90,align:"center"}),t.a.createElement(Mt.a,{title:t.a.createElement("div",{className:"flex-center"},"Dropped off",t.a.createElement(Re.a,{title:t.a.createElement(t.a.Fragment,null,Object(Q.j)(ve.plural)," ",ae.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",t.a.createElement("b",null,"not complete")," the entire funnel.")},t.a.createElement(St.a,{className:"column-info"}))),key:"failure_count",render:function(Ce,Xe){return Be(Xe)},width:120,align:"center"}),t.a.createElement(Mt.a,{title:"",key:"actions",render:function(Ce,Xe){return t.a.createElement(ca,{record:Xe})},width:30})))):null}var ca=function(c){var d=c.record,g=Object(s.useValues)(V.c),C=g.insightProps,E=Object(qe.a)(C),T=Object(s.useActions)(E),M=T.excludeEventPropertyFromProject,R=T.excludeEventFromProject,A=T.setFunnelCorrelationDetails,N=Object(s.useValues)(E),F=N.isEventPropertyExcluded,X=N.isEventExcluded,W=d.event.event.split("::"),ae=Object(ce.useState)(!1),ve=le()(ae,2),re=ve[0],$e=ve[1];return t.a.createElement(he.a,{style:{justifyContent:"flex-end"}},t.a.createElement(wn.a,{visible:re,actionable:!0,onClickOutside:function(){return $e(!1)},overlay:t.a.createElement(t.a.Fragment,null,d.result_type===o.k.Events&&t.a.createElement(gn.a,{onClick:function(){return A(d)},fullWidth:!0,type:"stealth"},"View correlation details"),t.a.createElement(gn.a,{disabled:d.result_type===o.k.EventWithProperties?F(W[1]):X(W[0]),onClick:function(){return d.result_type===o.k.EventWithProperties?M(W[0],W[1]):R(W[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},t.a.createElement(gn.a,{type:"stealth",onClick:function(){return $e(!re)}},t.a.createElement(fn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},da=e("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function Gn(){var m=Object(s.useValues)(V.c),c=m.insightProps,d=Object(qe.a)(c),g=Object(s.useValues)(d),C=g.stepsWithCount,E=g.propertyCorrelationValues,T=g.propertyCorrelationTypes,M=g.excludedPropertyNames,R=g.parseDisplayNameForCorrelation,A=g.propertyCorrelationsLoading,N=g.inversePropertyNames,F=g.propertyNames,X=g.correlationPropKey,W=g.allProperties,ae=g.filters,ve=g.aggregationTargetLabel,re=Object(s.useActions)(d),$e=re.setPropertyCorrelationTypes,je=re.setPropertyNames,at=re.openCorrelationPersonsModal,it=re.loadPropertyCorrelations,Te=Object(s.useActions)(x.f),we=Te.reportCorrelationInteraction;Object(ce.useEffect)(function(){F.length===0&&je(W),it({})},[ae]);var vt=function(Be){T?T.includes(Be)?$e(T.filter(function(gt){return gt!==Be})):$e([].concat(Ne()(T),[Be])):$e([Be])},Ot=function(Be){return t.a.createElement(An.c,{onClick:function(){at(Be,!0)}},Be.success_count)},wt=function(Be){return t.a.createElement(An.c,{onClick:function(){at(Be,!1)}},Be.failure_count)},Vn=function(Be){var gt=function(yn){return yn<10&&!Number.isInteger(yn)?yn.toFixed(1):yn.toFixed()},ft=Be.correlation_type===o.l.Success,Ce=R(Be),Xe=Ce.first_value,xt=Ce.second_value;return t.a.createElement(t.a.Fragment,null,t.a.createElement("h4",null,ft?t.a.createElement(na.a,{style:{color:"green"}}):t.a.createElement(bt,{style:{color:"red"}})," ",t.a.createElement(ln.a,{value:Xe}),xt!==void 0&&t.a.createElement(t.a.Fragment,null," :: ",t.a.createElement(ln.a,{value:xt,disablePopover:!0}))),t.a.createElement("div",null,Object(Q.j)(ve.plural)," ",ae.aggregation_group_type_index!=null?"that":"who"," converted were"," ",t.a.createElement("mark",null,t.a.createElement("b",null,gt(Be.odds_ratio),"x ",ft?"more":"less"," likely"))," ","to have this property value"))};return C.length>1?t.a.createElement(Sn,{offset:150,id:"".concat(X,"-properties")},t.a.createElement("div",{className:"funnel-correlation-table"},t.a.createElement(he.a,{className:"funnel-correlation-header"},t.a.createElement(Ee.a,{className:"table-header"},t.a.createElement(vn.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),t.a.createElement(Ee.a,{className:"table-options"},t.a.createElement(he.a,{style:{display:"contents"}},W.length>0&&t.a.createElement(t.a.Fragment,null,t.a.createElement("p",{className:"title"},"PROPERTIES "),t.a.createElement(da.a,{value:new Set(F),onChange:function(Be){return je(Be)},allProperties:N(M||[])}))),t.a.createElement(he.a,{style:{display:"contents"}},t.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),t.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return vt(o.l.Success)}},t.a.createElement(sn.a,{checked:T.includes(o.l.Success),style:{pointerEvents:"none"}},"Success")),t.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return vt(o.l.Failure)}},t.a.createElement(sn.a,{checked:T.includes(o.l.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),t.a.createElement(rn.a,{dataSource:E,loading:A,scroll:{x:"max-content"},size:"small",rowKey:function(Be){return Be.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(Be,gt){return we(o.k.Properties,"pagination change",{page:Be,page_size:gt})}}},t.a.createElement(Mt.a,{title:"".concat(Object(Q.j)(ve.singular)," property"),key:"propertName",render:function(Be,gt){return Vn(gt)},align:"left"}),t.a.createElement(Mt.a,{title:t.a.createElement("div",{className:"flex-center"},"Completed",t.a.createElement(Re.a,{title:"".concat(Object(Q.j)(ve.plural)," ").concat(ae.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},t.a.createElement(St.a,{className:"column-info"}))),key:"success_count",render:function(Be,gt){return Ot(gt)},width:90,align:"center"}),t.a.createElement(Mt.a,{title:t.a.createElement("div",{className:"flex-center"},"Dropped off",t.a.createElement(Re.a,{title:t.a.createElement(t.a.Fragment,null,Object(Q.j)(ve.plural)," ",ae.aggregation_group_type_index!=null?"that":"who"," have this property and did ",t.a.createElement("b",null,"not complete")," the entire funnel.")},t.a.createElement(St.a,{className:"column-info"}))),key:"failure_count",render:function(Be,gt){return wt(gt)},width:120,align:"center"}),t.a.createElement(Mt.a,{title:"",key:"actions",render:function(Be,gt){return t.a.createElement(Da,{record:gt})},align:"center",width:30})))):null}var Da=function(c){var d=c.record,g=Object(s.useValues)(V.c),C=g.insightProps,E=Object(qe.a)(C),T=Object(s.useActions)(E),M=T.excludePropertyFromProject,R=T.setFunnelCorrelationDetails,A=Object(s.useValues)(E),N=A.isPropertyExcludedFromProject,F=(d.event.event||"").split("::")[0],X=Object(ce.useState)(!1),W=le()(X,2),ae=W[0],ve=W[1];return t.a.createElement(he.a,{style:{justifyContent:"flex-end"}},t.a.createElement(wn.a,{visible:ae,actionable:!0,onClickOutside:function(){return ve(!1)},overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(gn.a,{onClick:function(){return R(d)},fullWidth:!0,type:"stealth"},"View correlation details"),t.a.createElement(gn.a,{disabled:N(F),onClick:function(){return M(F)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},t.a.createElement(gn.a,{type:"stealth",onClick:function(){return ve(!ae)}},t.a.createElement(fn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},_n=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Ma=e("./frontend/src/lib/components/PayCard/PayCard.tsx"),ua=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),Jn=function(){var c,d=Object(s.useValues)(V.c),g=d.insightProps,C=Object(s.useValues)(Object(qe.a)(g)),E=C.isSkewed,T=C.stepsWithCount,M=C.correlationFeedbackHidden,R=C.correlationDetailedFeedbackVisible,A=C.correlationFeedbackRating,N=C.correlationAnalysisAvailable,F=C.aggregationTargetLabel,X=Object(s.useActions)(Object(qe.a)(g)),W=X.sendCorrelationAnalysisFeedback,ae=X.hideSkewWarning,ve=X.hideCorrelationAnalysisFeedback,re=X.setCorrelationFeedbackRating,$e=X.setCorrelationDetailedFeedback,je=Object(s.useValues)(ua.a),at=je.preflight,it=Object(ce.useRef)(null);return T.length<=1?null:!N&&!(!(at==null||(c=at.instance_preferences)===null||c===void 0)&&c.disable_paid_fs)?t.a.createElement(Ma.a,{identifier:o.c.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(F.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(F.plural," are converting or dropping off.")}):t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"funnel-correlation"},E&&t.a.createElement(Ie.a,{className:"skew-warning"},t.a.createElement("h4",null,t.a.createElement(vn.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",t.a.createElement(_n.a,{className:"close-button",onClick:ae})),t.a.createElement("div",null,t.a.createElement("b",null,"Tips for adjusting your funnel:"),t.a.createElement("ol",null,t.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),t.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),t.a.createElement(Hn,null),!M&&t.a.createElement(Ie.a,{className:"correlation-feedback"},t.a.createElement(he.a,{className:"row-initial"},t.a.createElement(Ee.a,{span:14},t.a.createElement("h4",null,t.a.createElement(Ve.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),t.a.createElement(Ee.a,{span:9,style:{alignContent:"right"}},!!A&&t.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(Te,we){return t.a.createElement(nn.a,{key:we,className:"emoji-button",style:A===Te[0]?{background:"#5375FF"}:A?{display:"none"}:{},onClick:function(){A===Te[0]?re(0):(re(Te[0]),setTimeout(function(){var Ot;return(Ot=it.current)===null||Ot===void 0?void 0:Ot.focus()},100))}},Te[1])})),t.a.createElement(Ee.a,{span:1},t.a.createElement(_n.a,{className:"close-button",onClick:ve}))),t.a.createElement("div",{style:{display:R?void 0:"none"}},t.a.createElement("form",{onSubmit:W},t.a.createElement(Vt.a,{onBlur:function(we){return $e(we.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:it,onKeyDown:function(we){if(we.key==="Enter"&&we.metaKey){var vt;(vt=it.current)===null||vt===void 0||vt.blur(),W()}}}),t.a.createElement("div",{className:"text-right"},t.a.createElement(nn.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),t.a.createElement(Gn,null)))},La=e("./node_modules/core-js/modules/es.regexp.to-string.js"),ma=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),on=e.n(ma),hn={};hn.insert="head",hn.singleton=!1;var Ba=jn()(on.a,hn),Ka=on.a.locals||{},pa=e("./frontend/src/lib/components/InsightLabel/index.tsx"),Aa=e("./frontend/src/lib/colors.ts"),$=e("./frontend/src/lib/components/LemonCheckbox/index.ts");function H(){var m=Object(s.useValues)(V.c),c=m.filters,d=m.activeView,g=Object(s.useActions)(V.c),C=g.toggleInsightLegend,E=Object(s.useValues)(O.a),T=E.featureFlags;return(d===o.s.TRENDS&&c.display!==o.d.WorldMap&&c.display!==o.d.ActionsTable||d===o.s.STICKINESS)&&T[ne.n.INSIGHT_LEGENDS]?t.a.createElement(nn.a,{className:"insight-legend-button",onClick:C},t.a.createElement(vn.IconLegend,null),t.a.createElement("span",{className:"insight-legend-button-title"},c.show_legend?"Hide":"Show"," legend")):null}function ot(){var m=Object(s.useValues)(V.c),c=m.insightProps,d=m.filters,g=Object(l.a)(c),C=Object(s.useValues)(g),E=C.indexedResults,T=C.hiddenLegendKeys,M=Object(s.useActions)(g),R=M.toggleVisibility,A=Object(Aa.c)("white",E.length,!!d.compare);return t.a.createElement("div",{className:"insight-legend-menu"},t.a.createElement("div",{className:"insight-legend-menu-scroll"},E&&E.map(function(N){var F,X;return t.a.createElement(he.a,{key:N.id,className:"insight-legend-menu-item",wrap:!1},t.a.createElement($.a,{className:"insight-legend-menu-item-inner",color:A[N.id],checked:!T[N.id],onChange:function(){return R(N.id)},rowProps:{fullWidth:!0},label:t.a.createElement(pa.b,{key:N.id,seriesColor:A[N.id],action:N.action,fallbackName:N.breakdown_value===""?"None":N.label,hasMultipleSeries:E.length>1,breakdownValue:N.breakdown_value===""?"None":(F=N.breakdown_value)===null||F===void 0?void 0:F.toString(),compareValue:d.compare?Object(i.d)(N):void 0,pillMidEllipsis:(N==null||(X=N.filter)===null||X===void 0?void 0:X.breakdown)==="$current_url",hideIcon:!0})}))})))}var Qe,In=(Qe={},Z()(Qe,"".concat(o.s.TRENDS),t.a.createElement(P,{view:o.s.TRENDS})),Z()(Qe,"".concat(o.s.STICKINESS),t.a.createElement(P,{view:o.s.STICKINESS})),Z()(Qe,"".concat(o.s.LIFECYCLE),t.a.createElement(P,{view:o.s.LIFECYCLE})),Z()(Qe,"".concat(o.s.FUNNELS),t.a.createElement(ee,null)),Z()(Qe,"".concat(o.s.RETENTION),t.a.createElement(fe.a,null)),Z()(Qe,"".concat(o.s.PATHS),t.a.createElement(Pe.a,null)),Qe);function En(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1},c=m.disableHeader,d=m.disableTable,g=Object(s.useValues)(O.a),C=g.featureFlags,E=Object(s.useValues)(b.a),T=E.insightMode,M=Object(s.useValues)(V.c),R=M.insightProps,A=M.canEditInsight,N=M.insightLoading,F=M.activeView,X=M.loadedView,W=M.filters,ae=M.showTimeoutMessage,ve=M.showErrorMessage,re=Object(s.useValues)(Object(qe.a)(R)),$e=re.areFiltersValid,je=re.isValidFunnel,at=re.areExclusionFiltersValid,it=re.correlationAnalysisAvailable,Te=function(){if(F!==X||N&&!ae)return t.a.createElement(t.a.Fragment,null,W.display!==ne.e&&W.display!==o.d.WorldMap&&t.a.createElement("div",{className:"trends-insights-container"}),t.a.createElement(Q.b,null));if(X===o.s.FUNNELS){if(!$e)return t.a.createElement(w.b,{actionable:T===o.t.Edit||d});if(!at)return t.a.createElement(w.a,null);if(!je&&!N)return t.a.createElement(w.c,null)}return ve?t.a.createElement(w.d,null):ae?t.a.createElement(w.e,{isLoading:N}):null}();function we(){return F===o.s.FUNNELS&&!ve&&!ae&&$e&&W.funnel_viz_type===o.o.Steps&&(W==null?void 0:W.layout)===ne.p.horizontal&&!d?t.a.createElement(B.a,null):(!W.display||(W==null?void 0:W.display)!==ne.e&&(W==null?void 0:W.display)!==ne.b)&&F===o.s.TRENDS&&!d?t.a.createElement(s.BindLogic,{logic:l.a,props:R},t.a.createElement(i.b,{isLegend:!0,showTotalCount:!0,filterKey:F===o.s.TRENDS?"trends_".concat(F):"",canEditSeriesNameInline:F===o.s.TRENDS&&T===o.t.Edit,canCheckUncheckSeries:A})):null}return t.a.createElement(t.a.Fragment,null,t.a.createElement(Ie.a,{title:c?null:t.a.createElement(xn,{activeView:F,insightMode:T,filters:W,disableTable:!!d,disabled:!A}),"data-attr":"insights-graph",className:"insights-graph-container"},t.a.createElement("div",null,t.a.createElement(he.a,{className:Object(Un.a)("insights-graph-header",{funnels:F===o.s.FUNNELS}),align:"middle",justify:"space-between"},t.a.createElement(Ee.a,null,t.a.createElement(Cn,null)),t.a.createElement(Ee.a,null,F===o.s.FUNNELS?t.a.createElement(ea,null):null,F===o.s.PATHS?t.a.createElement(v,null):null,t.a.createElement(H,null))),Te||(C[ne.n.INSIGHT_LEGENDS]&&(F===o.s.TRENDS||F===o.s.STICKINESS)&&W.show_legend?t.a.createElement(he.a,{className:"insights-graph-container-row",wrap:!1},t.a.createElement(Ee.a,{className:"insights-graph-container-row-left"},In[F]),t.a.createElement(Ee.a,{className:"insights-graph-container-row-right"},t.a.createElement(ot,null))):In[F]))),we(),!d&&it&&F===o.s.FUNNELS&&t.a.createElement(Jn,null))}try{En.displayName="InsightContainer",En.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:En.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(m){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(oe,D,e){"use strict";e.d(D,"a",function(){return Ue});var G=e("./node_modules/core-js/modules/es.array.iterator.js"),Z=e.n(G),Ie=e("./node_modules/core-js/modules/es.object.to-string.js"),he=e.n(Ie),Ee=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ze=e.n(Ee),Je=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ce=e.n(Je),t=e("./node_modules/kea/lib/index.esm.js"),j=e("./frontend/src/scenes/insights/insightLogic.ts"),Ke=e("./frontend/src/scenes/insights/sharedUtils.ts");function Ne(L,K){var I=Object.keys(L);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(L);K&&(y=y.filter(function(h){return Object.getOwnPropertyDescriptor(L,h).enumerable})),I.push.apply(I,y)}return I}function s(L){for(var K=1;K<arguments.length;K++){var I=arguments[K]!=null?arguments[K]:{};K%2?Ne(Object(I),!0).forEach(function(y){ce()(L,y,I[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(I)):Ne(Object(I)).forEach(function(y){Object.defineProperty(L,y,Object.getOwnPropertyDescriptor(I,y))})}return L}var Ue=Object(t.kea)({props:{},key:Object(Ke.c)("new"),path:function(K){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",K]},connect:function(K){return{actions:[Object(j.c)(K),["setFilters"]],values:[Object(j.c)(K),["filters"]]}},actions:function(){return{setDates:function(I,y){return{dateFrom:I,dateTo:y}}}},selectors:{dates:[function(L){return[L.filters]},function(L){return{dateFrom:(L==null?void 0:L.date_from)||null,dateTo:(L==null?void 0:L.date_to)||null}}]},listeners:function(K){var I=K.actions,y=K.values;return{setDates:function(se){var Fe=se.dateFrom,ie=se.dateTo;I.setFilters(s(s({},y.filters),{},{date_from:Fe||null,date_to:ie||null}))}}}})},"./frontend/src/scenes/trends/PersonsModal.tsx":function(oe,D,e){"use strict";e.d(D,"a",function(){return Xt});var G=e("./node_modules/core-js/modules/es.array.concat.js"),Z=e("./node_modules/core-js/modules/es.array.find.js"),Ie=e("./node_modules/core-js/modules/es.array.map.js"),he=e("./node_modules/core-js/modules/es.object.keys.js"),Ee=e("./node_modules/core-js/modules/es.object.to-string.js"),ze=e("./node_modules/core-js/modules/es.regexp.exec.js"),Je=e("./node_modules/core-js/modules/es.regexp.to-string.js"),ce=e("./node_modules/core-js/modules/es.string.replace.js"),t=e("./node_modules/react/index.js"),j=e.n(t),Ke=e("./node_modules/kea/lib/index.esm.js"),Ne=e("./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js"),s=e("./node_modules/@ant-design/icons/es/icons/UsergroupAddOutlined.js"),Ue=e("./node_modules/antd/es/modal/index.js"),L=e("./node_modules/antd/es/button/index.js"),K=e("./node_modules/antd/es/skeleton/index.js"),I=e("./node_modules/antd/es/input/index.js"),y=e("./node_modules/antd/es/select/index.js"),h=e("./frontend/src/types.ts"),se=e("./frontend/src/scenes/trends/personsModalLogic.ts"),Fe=e("./frontend/src/lib/components/CopyToClipboard.tsx"),ie=e("./frontend/src/lib/utils.tsx"),Ye=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_=e.n(Ye),k=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss"),te=e.n(k),de={};de.insert="head",de.singleton=!1;var be=_()(te.a,de),ht=te.a.locals||{},He=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ze=e("./frontend/src/lib/components/PropertiesTable.tsx"),q=e("./frontend/src/lib/components/DateDisplay/index.tsx"),Ge=e("./frontend/src/scenes/persons/PersonHeader.tsx"),n=e("./frontend/src/lib/api.ts"),o=e("./frontend/src/lib/components/LemonTable/index.ts"),Q=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),V=e("./frontend/src/lib/components/icons.tsx"),O=e("./frontend/src/lib/components/InsightLabel/index.tsx"),ne=e("./frontend/src/lib/colors.ts"),jt=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Re=e("./frontend/src/lib/constants.tsx"),Lt=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),ct=e("./frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.tsx"),Kt=e("./frontend/src/scenes/insights/WorldMap/countryCodes.ts");function Xt(st){var J,le,Oe,De,dt,_e,ut=st.visible,Ct=st.view,Me=st.filters,U=st.onSaveCohort,kt=st.showModalActions,Et=kt===void 0?!0:kt,Le=st.aggregationTargetLabel,yt=Object(Ke.useValues)(se.b),S=yt.people,lt=yt.loadingMorePeople,me=yt.firstLoadedPeople,ge=yt.searchTerm,Rt=yt.isInitialLoad,We=yt.peopleParams,_t=yt.actorLabel,Ae=yt.sessionRecordingId,Se=Object(Ke.useActions)(se.b),ye=Se.hidePeople,mt=Se.loadMorePeople,zt=Se.setFirstLoadedActors,tt=Se.setPersonsModalFilters,It=Se.setSearchTerm,At=Se.switchToDataPoint,dn=Se.openRecordingModal,qe=Se.closeRecordingModal,Qt=Object(Ke.useValues)(jt.a),Zt=Qt.featureFlags,bn=Object(t.useMemo)(function(){var pe,xe,ke;return Rt?"Loading ".concat(Le.plural,"\u2026"):Me.shown_as==="Stickiness"?j.a.createElement(j.a.Fragment,null,j.a.createElement(He.a,{value:(S==null?void 0:S.label)||"",disablePopover:!0})," stickiness on day ",S==null?void 0:S.day):Me.display==="ActionsBarValue"||Me.display==="ActionsPie"?j.a.createElement(He.a,{value:(S==null?void 0:S.label)||"",disablePopover:!0}):Me.insight===h.s.FUNNELS?j.a.createElement(j.a.Fragment,null,((pe=S==null?void 0:S.funnelStep)!==null&&pe!==void 0?pe:0)>=0?"Completed":"Dropped off at"," step"," ",Math.abs((xe=S==null?void 0:S.funnelStep)!==null&&xe!==void 0?xe:0)," \u2022 ",j.a.createElement(He.a,{value:(S==null?void 0:S.label)||"",disablePopover:!0})," ",S!=null&&S.breakdown_value?"\u2022 ".concat(S.breakdown_value):""):Me.insight===h.s.PATHS?j.a.createElement(j.a.Fragment,null,S!=null&&S.pathsDropoff?"Dropped off after":"Completed"," step"," ",j.a.createElement(He.a,{value:(S==null?void 0:S.label.replace(/(^[0-9]+_)/,""))||"",disablePopover:!0})):Me.display===h.d.WorldMap?j.a.createElement(j.a.Fragment,null,Object(ie.j)(_t),We!=null&&We.breakdown_value?" in ".concat(Object(Kt.a)(We==null?void 0:We.breakdown_value)," ").concat(Kt.b[We==null?void 0:We.breakdown_value]):""):j.a.createElement(j.a.Fragment,null,Object(ie.j)(_t)," on"," ",j.a.createElement(q.a,{interval:Me.interval||"day",date:(S==null||(ke=S.day)===null||ke===void 0?void 0:ke.toString())||""}))},[Me,S,Rt]),Bn=Zt[Re.n.NEW_INSIGHT_COHORTS],z=!1,qt=(Ct===h.s.TRENDS||Ct===h.s.STICKINESS||!!Bn&&(Ct===h.s.FUNNELS||Ct===h.s.PATHS))&&Et,en=Object(ne.c)("white",S==null||(J=S.crossDataset)===null||J===void 0?void 0:J.length),un=!!(!(S==null||(le=S.crossDataset)===null||le===void 0)&&le.find(function(pe){var xe=pe.action;return(xe==null?void 0:xe.math)&&xe.math!=="total"})),On=!!(!(S==null||(Oe=S.crossDataset)===null||Oe===void 0)&&Oe.find(function(pe){var xe=pe.action;return xe==null?void 0:xe.order}));return j.a.createElement(j.a.Fragment,null,!!Ae&&j.a.createElement(Lt.a,{onClose:qe}),j.a.createElement(Ue.a,{title:bn,visible:ut,onCancel:ye,footer:S&&S.count>0&&(z||qt)&&j.a.createElement(j.a.Fragment,null,z&&j.a.createElement(L.a,{icon:j.a.createElement(Ne.a,null),href:n.b.actions.determinePeopleCsvUrl({label:S.label,action:S.action,date_from:S.day,date_to:S.day,breakdown_value:S.breakdown_value},Me),style:{marginRight:8},"data-attr":"person-modal-download-csv"},"Download CSV"),qt&&j.a.createElement(L.a,{onClick:U,icon:j.a.createElement(s.a,null),"data-attr":"person-modal-save-as-cohort"},"Save as cohort")),width:600,className:"person-modal"},Rt?j.a.createElement("div",{style:{padding:16}},j.a.createElement(K.a,{active:!0})):S&&j.a.createElement(j.a.Fragment,null,j.a.createElement(I.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for persons by email, name, or ID",onChange:function(xe){It(xe.target.value),xe.target.value||zt(me)},value:ge,onSearch:function(xe){return xe?tt(xe,S,Me):zt(me)}}),Zt[Re.n.MULTI_POINT_PERSON_MODAL]&&!!(!((De=S.crossDataset)===null||De===void 0)&&De.length)&&S.seriesId!==void 0&&j.a.createElement("div",{className:"data-point-selector"},j.a.createElement(y.a,{value:S.seriesId,onChange:function(xe){return At(xe)}},S.crossDataset.map(function(pe){var xe,ke;return j.a.createElement(y.a.Option,{value:pe.id,key:"".concat((xe=pe.action)===null||xe===void 0?void 0:xe.id).concat(pe.breakdown_value)},j.a.createElement(O.b,{seriesColor:en[pe.id],action:pe.action,breakdownValue:pe.breakdown_value===""?"None":(ke=pe.breakdown_value)===null||ke===void 0?void 0:ke.toString(),showCountedByTag:un,hasMultipleSeries:On}))}))),j.a.createElement("div",{className:"user-count-subheader"},j.a.createElement(V.IconPersonFilled,{style:{fontSize:"1.125rem",marginRight:"0.5rem"}}),j.a.createElement("span",null,"This list contains"," ",j.a.createElement("b",null,S.count," unique ",Le.plural),(We==null?void 0:We.pointValue)!==void 0&&(!(!((dt=We.action)===null||dt===void 0)&&dt.math)||((_e=We.action)===null||_e===void 0?void 0:_e.math)==="total")&&j.a.createElement(j.a.Fragment,null," ","who performed the event"," ",j.a.createElement("b",null,We.pointValue," total"," ",Object(ie.qb)(We.pointValue,"time",void 0,!1))),".")),S.count>0?j.a.createElement(o.a,{columns:[{title:"Person",key:"person",render:function(xe,ke){return j.a.createElement(cn,{actor:ke})}},{width:0,title:"Recordings",key:"recordings",render:function(xe,ke){var Yt,St;if(((Yt=ke.matched_recordings)===null||Yt===void 0?void 0:Yt.length)&&((St=ke.matched_recordings)===null||St===void 0?void 0:St.length)>0)return j.a.createElement(ct.a,{sessionRecordings:ke.matched_recordings,onOpenRecording:function(Kn){dn(Kn.session_id)}})}}],className:"persons-table",rowKey:"id",expandable:{expandedRowRender:function(xe){var ke=xe.properties;return Object.keys(ke).length?j.a.createElement(Ze.a,{properties:ke}):"This person has no properties."}},embedded:!0,showHeader:!1,dataSource:S.people,nouns:["person","persons"]}):j.a.createElement("div",{className:"person-row-container person-row"},"We couldn't find any matching ",Le.plural," for this data point."),(S==null?void 0:S.next)&&j.a.createElement("div",{style:{margin:"1rem",textAlign:"center"}},j.a.createElement(L.a,{type:"primary",style:{color:"white"},onClick:mt,loading:lt},"Load more ",Le.plural)))))}function cn(st){var J=st.actor;return Object(ie.W)(J)?j.a.createElement("div",{key:J.id,className:"person-row"},j.a.createElement("div",{className:"person-ids"},j.a.createElement("strong",null,j.a.createElement(Q.a,{actor:J})))):j.a.createElement("div",{key:J.id,className:"person-ids"},j.a.createElement("strong",null,j.a.createElement(Ge.a,{person:J,withIcon:!1})),j.a.createElement(Fe.a,{explicitValue:J.distinct_ids[0],iconStyle:{color:"var(--primary)"},iconPosition:"end",className:"text-small text-muted-alt"},Object(ie.kb)(J.distinct_ids[0],32)))}try{Xt.displayName="PersonsModal",Xt.__docgenInfo={description:"",displayName:"PersonsModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},onSaveCohort:{defaultValue:null,description:"",name:"onSaveCohort",required:!0,type:{name:"() => void"}},showModalActions:{defaultValue:{value:"true"},description:"",name:"showModalActions",required:!1,type:{name:"boolean"}},aggregationTargetLabel:{defaultValue:null,description:"",name:"aggregationTargetLabel",required:!0,type:{name:"{ singular: string; plural: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"]={docgenInfo:Xt.__docgenInfo,name:"PersonsModal",path:"frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"})}catch(st){}try{cn.displayName="ActorRow",cn.__docgenInfo={description:"",displayName:"ActorRow",props:{actor:{defaultValue:null,description:"",name:"actor",required:!0,type:{name:"ActorType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"]={docgenInfo:cn.__docgenInfo,name:"ActorRow",path:"frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"})}catch(st){}},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(oe,D,e){"use strict";e.d(D,"a",function(){return Je});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Z=e.n(G),Ie=e("./node_modules/react/index.js"),he=e.n(Ie),Ee=e("./node_modules/antd/es/modal/index.js"),ze=e("./node_modules/antd/es/input/index.js");function Je(ce){var t=ce.onOk,j=ce.onCancel,Ke=ce.visible,Ne=Object(Ie.useState)(""),s=Z()(Ne,2),Ue=s[0],L=s[1];return he.a.createElement(Ee.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){t(Ue),L("")},onCancel:j,visible:Ke},he.a.createElement("div",{className:"mb"},he.a.createElement(ze.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:Ue,"data-attr":"cohort-name",onChange:function(I){return L(I.target.value)}})))}try{Je.displayName="SaveCohortModal",Je.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:Je.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(ce){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(oe,D,e){"use strict";var G=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=e("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},he=Ie,Ee=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ze=function(t,j){return Z.createElement(Ee.a,Object(G.a)(Object(G.a)({},t),{},{ref:j,icon:he}))};ze.displayName="BarChartOutlined";var Je=D.a=Z.forwardRef(ze)},"./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js":function(oe,D,e){"use strict";var G=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=e("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},he=Ie,Ee=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ze=function(t,j){return Z.createElement(Ee.a,Object(G.a)(Object(G.a)({},t),{},{ref:j,icon:he}))};ze.displayName="DownloadOutlined";var Je=D.a=Z.forwardRef(ze)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(oe,D,e){"use strict";var G=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=e("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},he=Ie,Ee=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ze=function(t,j){return Z.createElement(Ee.a,Object(G.a)(Object(G.a)({},t),{},{ref:j,icon:he}))};ze.displayName="OrderedListOutlined";var Je=D.a=Z.forwardRef(ze)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(oe,D,e){"use strict";var G=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=e("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},he=Ie,Ee=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ze=function(t,j){return Z.createElement(Ee.a,Object(G.a)(Object(G.a)({},t),{},{ref:j,icon:he}))};ze.displayName="PercentageOutlined";var Je=D.a=Z.forwardRef(ze)},"./node_modules/@ant-design/icons/es/icons/SaveOutlined.js":function(oe,D,e){"use strict";var G=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=e("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},he=Ie,Ee=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ze=function(t,j){return Z.createElement(Ee.a,Object(G.a)(Object(G.a)({},t),{},{ref:j,icon:he}))};ze.displayName="SaveOutlined";var Je=D.a=Z.forwardRef(ze)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{width:100%;font-size:.75rem}",""]),oe.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.properties-table-key{min-width:12rem;display:flex;align-items:center;justify-content:space-between}.property-value-type{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;text-transform:uppercase;cursor:default}.property-value-type:not(:first-child){margin-left:.25rem}.properties-table-value{min-width:12rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;display:flex;align-items:center}.properties-table-value .value-link>*{vertical-align:middle}.properties-table-value .value-link>svg{margin-left:.25rem;font-size:1rem}.properties-table-value .editable{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;-webkit-text-decoration-color:#5375ff;text-decoration-color:#5375ff;cursor:pointer}",""]),oe.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,'.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.experiment-form .metrics-selection{border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;width:100%}.experiment-form .metrics-selection .action-filters-bordered .draggable-action-filter{border-bottom:1px solid rgba(0,0,0,.15);padding:1rem .25rem;margin-top:0}.experiment-form .metrics-selection .action-filters-bordered .row-action-btn{color:#35416b}.experiment-form .person-selection{width:100%;border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid rgba(0,0,0,.15);min-height:unset;background-color:#fff;padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(calc(90vh - 16rem),36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .graph-container{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{display:flex;align-items:center;height:3.5rem;padding:0 .5rem;background:#fff;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);border-left:1px solid rgba(0,0,0,.15);border-right:1px solid rgba(0,0,0,.15)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:#bf411a}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.15);margin-bottom:1rem}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.view-experiment .exp-description{font-style:italic;color:rgba(0,0,0,.5)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list{list-style:none;margin:0;padding:0}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:#fafaf9;border:1px solid rgba(0,0,0,.15);width:100%;min-height:320px;font-size:24px}.view-experiment .end-experiment-btn{background:#77b96c;color:#fff}.view-experiment .end-experiment-btn:hover{color:#000}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:#fafaf9;color:#35416b;font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid rgba(0,0,0,.15);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:#d9d9d9}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid rgba(0,0,0,.15)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),oe.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),oe.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),oe.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),oe.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),oe.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss":function(oe,D,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");D=G(!1),D.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.person-modal .ant-modal-header{padding:1rem}.person-modal .ant-modal-title{overflow:hidden;text-overflow:ellipsis}.person-modal .ant-modal-content{overflow:hidden}.person-modal .ant-modal-body{padding:0;max-height:60vh;overflow-y:auto}.person-modal .ant-modal-footer .ant-btn{color:#5375ff}.person-modal .ant-input-search{padding:1rem}.person-modal .persons-table{border-top:1px solid var(--border);border-bottom:1px solid var(--border)}.person-modal .person-ids{display:flex;flex-direction:column}.person-modal .user-count-subheader{padding:.5rem 1rem;color:var(--muted-alt)}.person-modal .user-count-subheader>*{vertical-align:middle}.person-modal .person-row-container{padding:.5rem 1rem}.person-modal .data-point-selector{padding:.5rem 1rem;border-bottom:1px solid var(--border)}.person-modal .data-point-selector .ant-select{display:block;width:100%}",""]),oe.exports=D}}]);
