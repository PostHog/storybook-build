(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(U,d,e){"use strict";e.d(d,"a",function(){return p});var E=e("./frontend/src/lib/components/PageHeader.tsx"),_=e("./node_modules/react/index.js"),u=e.n(_),g=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx");function p(T){var N=T.activeTab,V=T.hideTabs;return u.a.createElement(u.a.Fragment,null,u.a.createElement(E.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!V&&u.a.createElement(g.a,{tab:N}))}try{p.displayName="DataManagementPageHeader",p.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:p.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(T){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(U,d,e){"use strict";e.d(d,"b",function(){return v}),e.d(d,"a",function(){return K});var E=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),_=e.n(E),u=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),g=e.n(u),p=e("./node_modules/core-js/modules/es.array.iterator.js"),T=e.n(p),N=e("./node_modules/core-js/modules/es.object.to-string.js"),V=e.n(N),H=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),me=e.n(H),ce=e("./node_modules/core-js/modules/es.object.from-entries.js"),oe=e.n(ce),n=e("./node_modules/core-js/modules/es.array.map.js"),y=e.n(n),G=e("./node_modules/core-js/modules/es.object.entries.js"),h=e.n(G),Q=e("./node_modules/react/index.js"),c=e.n(Q),W=e("./node_modules/kea/lib/index.esm.js"),O=e("./node_modules/antd/es/tabs/index.js"),Y=e("./frontend/src/scenes/urls.ts"),ie=e("./frontend/src/lib/components/Tooltip.tsx"),X=e("./frontend/src/lib/components/icons.tsx"),Z=e("./frontend/src/lib/components/TitleWithIcon.tsx"),C,v;(function(f){f.Actions="actions",f.EventDefinitions="events",f.EventPropertyDefinitions="properties"})(v||(v={}));var w=(C={},g()(C,v.EventPropertyDefinitions,Y.a.eventPropertyDefinitions()),g()(C,v.EventDefinitions,Y.a.eventDefinitions()),g()(C,v.Actions,Y.a.actions()),C),B=Object(W.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(b){return{tab:b}}},reducers:{tab:[v.EventDefinitions,{setTab:function(b,D){var P=D.tab;return P}}]},actionToUrl:function(){return{setTab:function(D){var P=D.tab;return w[P]||Y.a.events()}}},urlToAction:function(b){var D=b.actions,P=b.values;return Object.fromEntries(Object.entries(w).map(function(k){var L=_()(k,2),q=L[0],ee=L[1];return[ee,function(){P.tab!==q&&D.setTab(q)}]}))}});function K(f){var b=f.tab,D=Object(W.useActions)(B),P=D.setTab;return c.a.createElement(O.a,{tabPosition:"top",animated:!1,activeKey:b,onTabClick:function(L){return P(L)}},c.a.createElement(O.a.TabPane,{tab:c.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:v.EventDefinitions}),c.a.createElement(O.a.TabPane,{tab:c.a.createElement(Z.a,{icon:c.a.createElement(ie.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},c.a.createElement(X.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:v.Actions}),c.a.createElement(O.a.TabPane,{tab:c.a.createElement(Z.a,{icon:c.a.createElement(ie.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},c.a.createElement(X.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Properties"),key:v.EventPropertyDefinitions}))}try{K.displayName="DataManagementPageTabs",K.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:K.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(f){}},"./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx":function(U,d,e){"use strict";e.r(d),e.d(d,"scene",function(){return q}),e.d(d,"EventDefinitionsTable",function(){return ee});var E=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_=e.n(E),u=e("./node_modules/core-js/modules/es.array.concat.js"),g=e("./node_modules/core-js/modules/es.function.name.js"),p=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),T=e.n(p),N=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),V=e.n(N),H={};H.insert="head",H.singleton=!1;var me=T()(V.a,H),ce=V.a.locals||{},oe=e("./node_modules/react/index.js"),n=e.n(oe),y=e("./node_modules/kea/lib/index.esm.js"),G=e("./frontend/src/lib/components/LemonTable/index.ts"),h=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),Q=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),c=e("./frontend/src/scenes/organizationLogic.tsx"),W=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),O=e("./frontend/src/lib/utils.tsx"),Y=e("./node_modules/core-js/modules/es.array.includes.js"),ie=e("./node_modules/core-js/modules/es.string.includes.js"),X=e("./frontend/src/lib/components/LemonButton/More.tsx"),Z=e("./frontend/src/lib/components/LemonButton/index.ts"),C=e("./frontend/src/scenes/urls.ts"),v=e("./node_modules/kea-router/lib/index.js"),w=e("./frontend/src/lib/utils/eventUsageLogic.ts");function B(R){var A,I,S,F,x,j,l,$,i=R.definition,ne=Object(y.useActions)(h.d),M=ne.loadPropertiesForEvent,te=ne.setLocalPropertyDefinition,ae=Object(y.useValues)(h.d),s=ae.eventPropertiesCacheMap,se=ae.eventDefinitionPropertiesLoading,z=Object(y.useValues)(c.a),re=z.hasDashboardCollaboration,le=z.hasIngestionTaxonomy,de=Object(y.useActions)(w.f),m=de.reportDataManagementEventDefinitionsPageClickNestedPropertyDetail;Object(oe.useEffect)(function(){M(i)},[]);var a=[{title:"Property",key:"property",className:"definition-column-name",render:function(r,o){return n.a.createElement(W.b,{definition:o,event:i,hideIcon:!0,openDetailInNewTab:!1,updateRemoteItem:function(ue){te(i,ue)}})}},{title:"Type",key:"type",className:"definition-column-type",render:function(r,o){return o.property_type?n.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},o.property_type):n.a.createElement("span",{className:"text-muted"},"\u2014")}}].concat(_()(re?[{title:"Tags",key:"tags",render:function(r,o){var J;return n.a.createElement(Q.a,{tags:(J=o.tags)!==null&&J!==void 0?J:[],staticOnly:!0})}}]:[]),_()(le?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(r,o){return o.query_usage_30_day?Object(O.N)(o.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(r,o){return o.example?n.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},o.example):n.a.createElement("span",{className:"text-muted"},"\u2014")}},{key:"actions",width:0,render:function(r,o){return n.a.createElement(X.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{type:"stealth",onClick:function(){m(),v.router.actions.push(C.a.eventPropertyDefinition(o.id))},fullWidth:!0,"data-attr":"event-properties-definition-property-detail"},"Show property in list"))})}}]);return n.a.createElement("div",{className:"event-properties-wrapper"},n.a.createElement("span",{className:"event-properties-header"},"Top properties"),n.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),n.a.createElement(G.a,{id:"event-properties-definition-table-".concat(i.id),"data-attr":"event-properties-definition-nested-table",columns:a,className:"event-properties-definition-table-".concat(i.id),dataSource:(A=s==null||(I=s[i.id])===null||I===void 0?void 0:I.results)!==null&&A!==void 0?A:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:h.b,currentPage:(S=s==null||(F=s[i.id])===null||F===void 0?void 0:F.page)!==null&&S!==void 0?S:1,entryCount:(x=s==null||(j=s[i.id])===null||j===void 0?void 0:j.count)!==null&&x!==void 0?x:0,onForward:s!=null&&(l=s[i.id])!==null&&l!==void 0&&l.next?function(){M(i,s[i.id].next)}:void 0,onBackward:s!=null&&($=s[i.id])!==null&&$!==void 0&&$.previous?function(){M(i,s[i.id].previous)}:void 0},loading:se.includes(i.id)}))}try{B.displayName="EventDefinitionProperties",B.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:B.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(R){}var K=e("./node_modules/antd/es/alert/index.js"),f=e("./node_modules/antd/es/input/index.js"),b=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),D=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),P=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),k=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),L=e("./frontend/src/lib/components/DefinitionPopup/DefinitionPopupContents.tsx"),q={component:ee,logic:h.d,paramsToProps:function(){return{syncWithUrl:!0}}};function ee(){var R,A,I,S,F=Object(y.useValues)(k.a),x=F.preflight,j=Object(y.useValues)(h.d),l=j.eventDefinitions,$=j.eventDefinitionsLoading,i=j.openedDefinitionId,ne=j.filters,M=Object(y.useActions)(h.d),te=M.loadEventDefinitions,ae=M.setOpenedDefinition,s=M.setLocalEventDefinition,se=M.setFilters,z=Object(y.useValues)(c.a),re=z.hasDashboardCollaboration,le=z.hasIngestionTaxonomy,de=[{key:"icon",className:"definition-column-icon",render:function(a,t){return n.a.createElement(W.a,{definition:t,hideView:!0,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(a,t){return n.a.createElement(W.a,{definition:t,hideView:!0,hideIcon:!0,updateRemoteItem:function(o){return s(o)}})},sorter:function(a,t){return a.name.localeCompare(t.name)}}].concat(_()(re?[{title:"Tags",key:"tags",render:function(a,t){var r;return n.a.createElement(Q.a,{tags:(r=t.tags)!==null&&r!==void 0?r:[],staticOnly:!0})}}]:[]),_()(le?[{title:n.a.createElement(L.d,{tooltipPlacement:"bottom"}),key:"volume_30_day",align:"right",render:function(a,t){return t.volume_30_day?Object(O.N)(t.volume_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(a,t){var r,o;return((r=a==null?void 0:a.volume_30_day)!==null&&r!==void 0?r:0)-((o=t==null?void 0:t.volume_30_day)!==null&&o!==void 0?o:0)}},{title:n.a.createElement(L.c,{tooltipPlacement:"bottom"}),key:"query_usage_30_day",align:"right",render:function(a,t){return t.query_usage_30_day?Object(O.N)(t.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(a,t){var r,o;return((r=a==null?void 0:a.query_usage_30_day)!==null&&r!==void 0?r:0)-((o=t==null?void 0:t.query_usage_30_day)!==null&&o!==void 0?o:0)}}]:[]));return n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(b.a,{activeTab:D.b.EventDefinitions}),x&&!(x!=null&&x.is_event_property_usage_enabled)?n.a.createElement(P.a,{tab:"Event Definitions"}):((R=l.results)===null||R===void 0||(A=R[0])===null||A===void 0?void 0:A.volume_30_day)===null&&n.a.createElement(K.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later.",style:{marginBottom:"1rem"}}),n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",flexDirection:"row",alignItems:"center",width:"100%",marginBottom:"1rem"}},n.a.createElement(f.a.Search,{placeholder:"Search for events",allowClear:!0,enterButton:!0,value:ne.event,style:{maxWidth:600,width:"initial"},onChange:function(a){se({event:a.target.value||""})}})),n.a.createElement(G.a,{columns:de,className:"events-definition-table","data-attr":"events-definition-table",loading:$,rowKey:"id",rowStatus:function(a){return a.id===i?"highlighted":null},pagination:{controlled:!0,currentPage:(I=l==null?void 0:l.page)!==null&&I!==void 0?I:1,entryCount:(S=l==null?void 0:l.count)!==null&&S!==void 0?S:0,pageSize:h.a,onForward:l.next?function(){te(l.next)}:void 0,onBackward:l.previous?function(){te(l.previous)}:void 0},expandable:{expandedRowRender:function(a){return n.a.createElement(B,{definition:a})},noIndent:!0,isRowExpanded:function(a){return a.id===i?!0:-1},onRowCollapse:function(a){return a.id===i&&ae(null)}},dataSource:l.results,emptyState:"No event definitions",nouns:["event","events"]}))}},"./frontend/src/scenes/events/UsageDisabledWarning.tsx":function(U,d,e){"use strict";e.d(d,"a",function(){return g});var E=e("./node_modules/antd/es/alert/index.js"),_=e("./node_modules/react/index.js"),u=e.n(_);function g(p){var T=p.tab;return u.a.createElement(E.a,{type:"info",showIcon:!0,message:"".concat(T," are not enabled for your instance."),description:u.a.createElement(u.a.Fragment,null,"You will still see the list of events and properties, but usage information will be unavailable. If you want to enable event usage please set the follow environment variable:"," ",u.a.createElement("pre",{style:{display:"inline"}},"ASYNC_EVENT_PROPERTY_USAGE=1"),". Please note, enabling this environment variable ",u.a.createElement("b",null,"may increase load considerably in your infrastructure"),", particularly if you have a large volume of events.")})}try{g.displayName="UsageDisabledWarning",g.__docgenInfo={description:"",displayName:"UsageDisabledWarning",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"]={docgenInfo:g.__docgenInfo,name:"UsageDisabledWarning",path:"frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"})}catch(p){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(U,d,e){var E=e("./node_modules/css-loader/dist/runtime/api.js");d=E(!1),d.push([U.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:flex-start}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted path{fill:var(--taxonomy-icon-muted)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{height:28px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified path{fill:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified:not(.taxonomy-icon-ph){margin-bottom:-4px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--text-muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),U.exports=d}}]);
