"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[13616],{"../../frontend/src/lib/components/heatmaps/HeatMapsSettings.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>HeatmapsSettings});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.20.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/heatmaps/heatmapDataLogic.ts"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonLabel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonLabel/index.ts"),lib_lemon_ui_LemonSegmentedButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSegmentedButton/index.ts"),lib_lemon_ui_LemonSelect__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSelect/index.ts"),lib_lemon_ui_LemonSlider__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSlider/index.ts"),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_toolbar_elements_heatmapToolbarMenuLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/toolbar/elements/heatmapToolbarMenuLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ScrollDepthJSWarning=()=>{let{scrollDepthPosthogJsError}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_toolbar_elements_heatmapToolbarMenuLogic__WEBPACK_IMPORTED_MODULE_9__.W);return scrollDepthPosthogJsError?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{className:"my-2 bg-danger-highlight border border-danger rounded p-2",children:"version"===scrollDepthPosthogJsError?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:"This feature requires a newer version of posthog-js"}):"disabled"===scrollDepthPosthogJsError?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:["Your posthog-js config has ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("i",{children:"disable_scroll_properties"})," set - these properties are required for scroll depth calculations to work."]}):null}):null},SectionSetting=_ref=>{let{children,title,info}=_ref,[showInfo,setShowInfo]=(0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"deprecated-space-y-2 mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(lib_lemon_ui_LemonLabel__WEBPACK_IMPORTED_MODULE_4__.H,{className:"flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:title}),info&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_3__.J,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconInfo,{}),size:"xsmall",active:showInfo,onClick:()=>setShowInfo(!showInfo),noPadding:!0})]})}),showInfo?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"text-sm",children:info}):null,children]})},HeatmapsSettings=_ref2=>{var _heatmapFilters$type,_heatmapFilters$aggre,_heatmapFilters$viewp,_heatmapFilters$viewp2;let{heatmapFilters,patchHeatmapFilters,viewportRange,heatmapColorPalette,setHeatmapColorPalette,heatmapFixedPositionMode,setHeatmapFixedPositionMode}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(SectionSetting,{title:"Heatmap type",info:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:['Select the kind of heatmap you want to view. Clicks, rageclicks, and mouse moves options will show different "heat" based on the number of interactions at that area of the page. Scroll depth will show how far down the page users have reached.',(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("br",{}),"Scroll depth uses additional information from Pageview and Pageleave events to indicate how far down the page users have scrolled."]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"flex gap-2 justify-between items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_LemonSelect__WEBPACK_IMPORTED_MODULE_6__.Yv,{onChange:e=>patchHeatmapFilters?.({type:e}),value:null!==(_heatmapFilters$type=heatmapFilters?.type)&&void 0!==_heatmapFilters$type?_heatmapFilters$type:void 0,options:[{value:"click",label:"Clicks"},{value:"rageclick",label:"Rageclicks"},{value:"deadclick",label:"Dead clicks"},{value:"mousemove",label:"Mouse moves"},{value:"scrolldepth",label:"Scroll depth"}],size:"small"}),heatmapFilters?.type==="scrolldepth"&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(ScrollDepthJSWarning,{})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(SectionSetting,{title:"Aggregation",info:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:"Heatmaps can be aggregated by total count or unique visitors. Total count will show the total number of interactions on the page, while unique visitors will only count each visitor once."}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"flex gap-2 justify-between items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_LemonSegmentedButton__WEBPACK_IMPORTED_MODULE_5__.P,{onChange:e=>patchHeatmapFilters?.({aggregation:e}),value:null!==(_heatmapFilters$aggre=heatmapFilters?.aggregation)&&void 0!==_heatmapFilters$aggre?_heatmapFilters$aggre:"total_count",options:[{value:"total_count",label:"Total count"},{value:"unique_visitors",label:"Unique visitors"}],size:"small"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(SectionSetting,{title:"Viewport accuracy",info:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:["The viewport accuracy setting will determine how closely the loaded data will be to your current viewport.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("br",{}),"For example if you set this to 100%, only visitors whose viewport width is identical to yours will be included in the heatmap.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("br",{}),"At 90% you will see data from viewports that are 10% smaller or larger than yours."]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"flex gap-2 justify-between items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_LemonSlider__WEBPACK_IMPORTED_MODULE_7__.j,{className:"flex-1",min:0,max:1,step:.01,value:null!==(_heatmapFilters$viewp=heatmapFilters?.viewportAccuracy)&&void 0!==_heatmapFilters$viewp?_heatmapFilters$viewp:0,onChange:value=>patchHeatmapFilters?.({viewportAccuracy:value})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("code",{className:"w-[12rem] text-right text-xs whitsepace-nowrap",children:`${Math.round((null!==(_heatmapFilters$viewp2=heatmapFilters?.viewportAccuracy)&&void 0!==_heatmapFilters$viewp2?_heatmapFilters$viewp2:1)*100)}% (${viewportRange?.min}px - ${viewportRange?.max}px)`})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(SectionSetting,{title:"Color palette",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_LemonSelect__WEBPACK_IMPORTED_MODULE_6__.Yv,{size:"small",options:lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_2__.R,value:heatmapColorPalette,onChange:setHeatmapColorPalette})}),heatmapFilters?.type!=="scrolldepth"&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(SectionSetting,{title:"Fixed positioning calculation",info:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:["PostHog JS will attempt to detect fixed elements such as headers or modals and will therefore show those heatmap areas, ignoring the scroll value.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("br",{}),"You can choose to show these areas as fixed, include them with scrolled data or hide them altogether."]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_LemonSegmentedButton__WEBPACK_IMPORTED_MODULE_5__.P,{onChange:setHeatmapFixedPositionMode,value:heatmapFixedPositionMode,options:[{value:"fixed",label:"Show fixed"},{value:"relative",label:"Show scrolled"},{value:"hidden",label:"Hide"}],size:"small"})})]})}},"../../frontend/src/lib/components/heatmaps/HeatmapCanvas.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>HeatmapCanvas});var heatmap_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/heatmap.js@2.0.5_patch_hash=gydrxrztd4ruyhouu6tu7zh43e/node_modules/heatmap.js/build/heatmap.js"),heatmap_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(heatmap_js__WEBPACK_IMPORTED_MODULE_0__),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/heatmaps/heatmapDataLogic.ts"),lib_components_heatmaps_useShiftKeyPressed__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/heatmaps/useShiftKeyPressed.ts"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_useMousePosition__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/heatmaps/useMousePosition.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function HeatmapMouseInfo(_ref){let{heatmapJsRef,containerRef}=_ref,shiftPressed=(0,lib_components_heatmaps_useShiftKeyPressed__WEBPACK_IMPORTED_MODULE_3__.u)(),{heatmapTooltipLabel}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_2__.y),mousePosition=(0,_useMousePosition__WEBPACK_IMPORTED_MODULE_5__.k)(containerRef?.current),value=heatmapJsRef.current?.getValueAt(mousePosition);if(!mousePosition||!value&&!shiftPressed)return null;let leftPosition=window.innerWidth-mousePosition.x<100;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"absolute z-10",style:{top:mousePosition.y,left:mousePosition.x},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"absolute border rounded bg-surface-primary shadow-md p-2 mx-2 -translate-y-1/2",style:{left:leftPosition?void 0:0,right:leftPosition?0:void 0},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("span",{className:"font-semibold whitespace-nowrap",children:[value," ",heatmapTooltipLabel]})})})}function HeatmapCanvas(_ref2){let{positioning="fixed",widthOverride}=_ref2,{heatmapJsData,heatmapFilters,windowWidth,windowHeight,heatmapColorPalette}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_2__.y),heatmapsJsRef=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),heatmapsJsContainerRef=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),heatmapJSColorGradient=(0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(()=>{switch(heatmapColorPalette){case"blue":return{".0":"rgba(0, 0, 255, 0)",".100":"rgba(0, 0, 255, 1)"};case"green":return{".0":"rgba(0, 255, 0, 0)",".100":"rgba(0, 255, 0, 1)"};case"red":return{".0":"rgba(255, 0, 0, 0)",".100":"rgba(255, 0, 0, 1)"};default:return{".25":"rgb(0,0,255)","0.55":"rgb(0,255,0)","0.85":"yellow","1.0":"rgb(255,0,0)"}}},[heatmapColorPalette]),heatmapConfig={minOpacity:0,maxOpacity:.8},updateHeatmapData=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(()=>{try{heatmapsJsRef.current?.setData(heatmapJsData)}catch(e){console.error("error setting data",e)}},[heatmapJsData]),setHeatmapContainer=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(container=>{heatmapsJsContainerRef.current=container,container&&(heatmapsJsRef.current=heatmap_js__WEBPACK_IMPORTED_MODULE_0___default().create({...heatmapConfig,container,gradient:heatmapJSColorGradient}),updateHeatmapData())},[]);return((0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{updateHeatmapData()},[heatmapJsData]),(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{heatmapsJsContainerRef.current&&heatmapsJsRef.current?.configure({...heatmapConfig,container:heatmapsJsContainerRef.current,gradient:heatmapJSColorGradient})},[heatmapJSColorGradient]),heatmapFilters.enabled&&"scrolldepth"!==heatmapFilters.type)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_7__.cn)("inset-0 overflow-hidden w-full h-full",positioning),"data-attr":"heatmap-canvas",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"absolute inset-0",ref:setHeatmapContainer},`${null!=widthOverride?widthOverride:windowWidth}x${windowHeight}`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(HeatmapMouseInfo,{heatmapJsRef:heatmapsJsRef,containerRef:heatmapsJsContainerRef})]}):null}},"../../frontend/src/lib/components/heatmaps/heatmapDataLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>HEATMAP_COLOR_PALETTE_OPTIONS,y:()=>heatmapDataLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),kea_window_values__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-window-values@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-window-values/lib/index.js"),lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/IframedToolbarBrowser/utils.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/utils.tsx"),_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/toolbar/toolbarConfigLogic.ts");let HEATMAP_COLOR_PALETTE_OPTIONS=[{value:"default",label:"Default (multicolor)"},{value:"red",label:"Red (monocolor)"},{value:"green",label:"Green (monocolor)"},{value:"blue",label:"Blue (monocolor)"}],heatmapDataLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["lib","components","heatmap","heatmapDataLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({loadHeatmap:!0,setCommonFilters:filters=>({filters}),setHeatmapFilters:filters=>({filters}),patchHeatmapFilters:filters=>({filters}),setHeatmapFixedPositionMode:mode=>({mode}),setHeatmapColorPalette:Palette=>({Palette}),setHref:href=>({href}),setHrefMatchType:matchType=>({matchType}),setFetchFn:fetchFn=>({fetchFn}),setHeatmapScrollY:scrollY=>({scrollY}),setWindowWidthOverride:widthOverride=>({widthOverride})}),(0,kea_window_values__WEBPACK_IMPORTED_MODULE_3__.windowValues)(()=>({windowWidth:window1=>window1.innerWidth,windowHeight:window1=>window1.innerHeight})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({fetchFn:["toolbar",{setFetchFn:(_,_ref)=>{let{fetchFn}=_ref;return fetchFn}}],hrefMatchType:["exact",{setHrefMatchType:(_,_ref2)=>{let{matchType}=_ref2;return matchType}}],commonFilters:[{date_from:"-7d"},{setCommonFilters:(_,_ref3)=>{let{filters}=_ref3;return filters}}],heatmapFilters:[lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_4__._f,{persist:!0},{setHeatmapFilters:(_,_ref4)=>{let{filters}=_ref4;return filters},patchHeatmapFilters:(state,_ref5)=>{let{filters}=_ref5;return{...state,...filters}}}],heatmapFixedPositionMode:["fixed",{setHeatmapFixedPositionMode:(_,_ref6)=>{let{mode}=_ref6;return mode}}],heatmapColorPalette:["default",{persist:!0},{setHeatmapColorPalette:(_,_ref7)=>{let{Palette}=_ref7;return Palette}}],href:[null,{setHref:(_,_ref8)=>{let{href}=_ref8;return href}}],heatmapScrollY:[0,{setHeatmapScrollY:(_,_ref9)=>{let{scrollY}=_ref9;return scrollY}}],windowWidthOverride:[null,{setWindowWidthOverride:(_,_ref10)=>{let{widthOverride}=_ref10;return widthOverride}}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref11=>{let{values}=_ref11;return{rawHeatmap:[null,{resetHeatmapData:()=>({results:[]}),loadHeatmap:async(_,breakpoint)=>{if(!values.href||!values.href.trim().length||!values.heatmapFilters.enabled)return null;await breakpoint(150);let{date_from,date_to,filter_test_accounts}=values.commonFilters,{type,aggregation}=values.heatmapFilters,apiURL=`/api/heatmap/${(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.encodeParams)({type,date_from,date_to,url_exact:"exact"===values.hrefMatchType?values.href:void 0,url_pattern:"pattern"===values.hrefMatchType?values.href:void 0,viewport_width_min:values.viewportRange.min,viewport_width_max:values.viewportRange.max,aggregation,filter_test_accounts},"?")}`,response=await ("toolbar"===values.fetchFn?(0,_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_6__.O)(apiURL,"GET"):fetch(apiURL));if(breakpoint(),403===response.status&&_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_6__.W.actions.authenticate(),200!==response.status)throw Error("API error");return await response.json()}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({dateRange:[s=>[s.commonFilters],commonFilters=>(0,lib_utils__WEBPACK_IMPORTED_MODULE_5__.Kl)(commonFilters.date_from,commonFilters.date_to,"Last 7 days")],heatmapElements:[s=>[s.rawHeatmap],rawHeatmap=>{if(!rawHeatmap)return[];let elements=[];return rawHeatmap?.results.forEach(element=>{"scroll_depth_bucket"in element?elements.push({count:element.cumulative_count,xPercentage:0,targetFixed:!1,y:element.scroll_depth_bucket}):elements.push({count:element.count,xPercentage:element.pointer_relative_x,targetFixed:element.pointer_target_fixed,y:element.pointer_y})}),elements}],viewportRange:[s=>[s.heatmapFilters,s.windowWidth,s.windowWidthOverride],(heatmapFilters,windowWidth,windowWidthOverride)=>(0,lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_4__.f6)(heatmapFilters,null!=windowWidthOverride?windowWidthOverride:windowWidth)],heatmapTooltipLabel:[s=>[s.heatmapFilters],heatmapFilters=>"unique_visitors"===heatmapFilters.aggregation?"visitors":heatmapFilters.type+"s"],heatmapEmpty:[s=>[s.rawHeatmap,s.rawHeatmapLoading],(rawHeatmap,rawHeatmapLoading)=>rawHeatmap?.results.length===0&&!rawHeatmapLoading],heatmapJsData:[s=>[s.heatmapElements,s.heatmapScrollY,s.windowWidth,s.windowWidthOverride,s.heatmapFixedPositionMode],(heatmapElements,heatmapScrollY,windowWidth,windowWidthOverride,heatmapFixedPositionMode)=>{let width=null!=windowWidthOverride?windowWidthOverride:windowWidth,data=heatmapElements.reduce((acc,element)=>{if("hidden"===heatmapFixedPositionMode&&element.targetFixed)return acc;let y=Math.round(element.targetFixed&&"fixed"===heatmapFixedPositionMode?element.y:element.y-heatmapScrollY);return[...acc,{x:Math.round(element.xPercentage*width),y,value:element.count}]},[]);return{min:0,max:data.reduce((max,_ref12)=>{let{value}=_ref12;return Math.max(max,value)},0),data}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref13=>{let{actions}=_ref13;return{setCommonFilters:()=>{actions.loadHeatmap()},setHeatmapFilters:()=>{actions.loadHeatmap()},patchHeatmapFilters:()=>{actions.loadHeatmap()},setHeatmapFixedPositionMode:()=>{actions.loadHeatmap()},setHeatmapColorPalette:()=>{actions.loadHeatmap()},setHref:()=>{actions.loadHeatmap()},setWindowWidthOverride:()=>{actions.loadHeatmap()}}})])},"../../frontend/src/lib/components/heatmaps/useMousePosition.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>useMousePosition});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");let useMousePosition=container=>{let[mousePosition,setMousePosition]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({x:0,y:0});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{let onMove=e=>{let rect=container?container.getBoundingClientRect():{left:0,top:0},newX=e.clientX-rect.left,newY=e.clientY-rect.top,inBounds=newX>=0&&newY>=0;setMousePosition(prev=>{let hasChanged=newX!==prev.x||newY!==prev.y;return inBounds&&hasChanged?{x:newX,y:newY}:prev})};return window.addEventListener("mousemove",onMove,{passive:!0}),()=>{window.removeEventListener("mousemove",onMove)}},[container]),mousePosition}},"../../frontend/src/lib/components/heatmaps/useShiftKeyPressed.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>useShiftKeyPressed});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");function useShiftKeyPressed(){let[isShiftPressed,setIsShiftPressed]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{let handleKeyDown=event=>{"Shift"===event.key&&setIsShiftPressed(!0)},handleKeyUp=event=>{"Shift"===event.key&&setIsShiftPressed(!1)};return window.addEventListener("keydown",handleKeyDown,{passive:!0}),window.addEventListener("keyup",handleKeyUp,{passive:!0}),()=>{window.removeEventListener("keydown",handleKeyDown),window.removeEventListener("keyup",handleKeyUp)}},[]),isShiftPressed}},"../../frontend/src/toolbar/elements/heatmapToolbarMenuLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>heatmapToolbarMenuLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.5_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),kea_window_values__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/kea-window-values@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-window-values/lib/index.js"),lib_actionUtils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/actionUtils.ts"),lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/heatmaps/heatmapDataLogic.ts"),lib_utils_semver__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/lib/utils/semver.ts"),query_selector_shadow_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../node_modules/.pnpm/query-selector-shadow-dom@1.0.0/node_modules/query-selector-shadow-dom/src/querySelectorDeep.js"),_toolbar_stats_currentPageLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/toolbar/stats/currentPageLogic.ts"),_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/toolbar/toolbarConfigLogic.ts"),_toolbar_toolbarPosthogJS__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/toolbar/toolbarPosthogJS.ts"),_toolbar_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/toolbar/utils.ts"),_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/types.ts");let doesVersionSupportScrollDepth=(0,lib_utils_semver__WEBPACK_IMPORTED_MODULE_12__.Ff)("1.99"),emptyElementsStatsPages={next:void 0,previous:void 0,results:[]},heatmapToolbarMenuLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["toolbar","elements","heatmapToolbarMenuLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[_toolbar_stats_currentPageLogic__WEBPACK_IMPORTED_MODULE_7__.z,["href","wildcardHref"],_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_8__.W,["posthog"],lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_6__.y,["commonFilters","heatmapColorPalette","heatmapFixedPositionMode","rawHeatmapLoading","viewportRange","heatmapFilters","heatmapElements","heatmapTooltipLabel","heatmapScrollY","dateRange"]],actions:[_toolbar_stats_currentPageLogic__WEBPACK_IMPORTED_MODULE_7__.z,["setHref","setWildcardHref"],lib_components_heatmaps_heatmapDataLogic__WEBPACK_IMPORTED_MODULE_6__.y,["setHeatmapColorPalette","setCommonFilters","setHeatmapFixedPositionMode","setHref as setDataHref","setHrefMatchType","resetHeatmapData","patchHeatmapFilters","loadHeatmap","loadHeatmapSuccess","loadHeatmapFailure","setHeatmapScrollY"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({getElementStats:url=>({url}),enableHeatmap:!0,disableHeatmap:!0,toggleClickmapsEnabled:enabled=>({enabled}),setSamplingFactor:samplingFactor=>({samplingFactor}),loadMoreElementStats:!0,setMatchLinksByHref:matchLinksByHref=>({matchLinksByHref}),loadAllEnabled:!0,maybeLoadClickmap:!0,maybeLoadHeatmap:!0,updateElementMetrics:observedElements=>({observedElements})}),(0,kea_window_values__WEBPACK_IMPORTED_MODULE_4__.windowValues)(()=>({windowWidth:window1=>window1.innerWidth,windowHeight:window1=>window1.innerHeight})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({matchLinksByHref:[!1,{setMatchLinksByHref:(_,_ref)=>{let{matchLinksByHref}=_ref;return matchLinksByHref}}],canLoadMoreElementStats:[!0,{getElementStatsSuccess:(_,_ref2)=>{let{elementStats}=_ref2;return null!==elementStats.next},getElementStatsFailure:()=>!0}],heatmapEnabled:[!1,{enableHeatmap:()=>!0,disableHeatmap:()=>!1,getElementStatsFailure:()=>!1}],clickmapsEnabled:[!1,{toggleClickmapsEnabled:(_,_ref3)=>{let{enabled}=_ref3;return enabled}}],samplingFactor:[1,{persist:!0},{setSamplingFactor:(_,_ref4)=>{let{samplingFactor}=_ref4;return samplingFactor}}],elementMetrics:[new Map,{updateElementMetrics:(state,_ref5)=>{let{observedElements}=_ref5;if(0===observedElements.length)return state;let onUpdate=new Map(Array.from(state.entries()));for(let[element,visible]of observedElements)onUpdate.set(element,{visible});return onUpdate}}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref6=>{let{values}=_ref6;return{elementStats:[null,{resetElementStats:()=>emptyElementsStatsPages,getElementStats:async(_ref7,breakpoint)=>{let{url}=_ref7;await breakpoint(150);let{href,wildcardHref}=values,defaultUrl="";if(!url){let params={properties:[wildcardHref===href?{key:"$current_url",value:href,operator:_types__WEBPACK_IMPORTED_MODULE_11__.WV.Exact,type:_types__WEBPACK_IMPORTED_MODULE_11__.FT.Event}:{key:"$current_url",value:`^${wildcardHref.split("*").map(escapeUnescapedRegex).join(".*")}$`,operator:_types__WEBPACK_IMPORTED_MODULE_11__.WV.Regex,type:_types__WEBPACK_IMPORTED_MODULE_11__.FT.Event}],date_from:values.commonFilters.date_from,date_to:values.commonFilters.date_to};defaultUrl=`/api/element/stats/${(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.encodeParams)({...params,paginate_response:!0,sampling_factor:values.samplingFactor},"?")}`}let response=await (0,_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_8__.O)(url||defaultUrl,"GET",void 0,url?"use-as-provided":"full");if(breakpoint(),403===response.status)return _toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_8__.W.actions.authenticate(),emptyElementsStatsPages;let paginatedResults=await response.json();if(!Array.isArray(paginatedResults.results))throw Error("Error loading HeatMap data!");return{results:[...url&&values.elementStats?.results||[],...paginatedResults.results||[]],next:paginatedResults.next,previous:paginatedResults.previous}}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)(_ref8=>{let{cache}=_ref8;return{elements:[s=>[s.elementStats,_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_8__.W.selectors.dataAttributes,s.href,s.matchLinksByHref],(elementStats,dataAttributes,href,matchLinksByHref)=>{cache.pageElements=cache.lastHref==href?cache.pageElements:(0,query_selector_shadow_dom__WEBPACK_IMPORTED_MODULE_13__.n8)("*",document),cache.selectorToElements=cache.lastHref==href?cache.selectorToElements:{},cache.lastHref=href;let elements=[];return elementStats?.results.forEach(event=>{let combinedSelector,lastSelector;for(let i=0;i<event.elements.length;i++){let element=event.elements[i],selector=lib_actionUtils__WEBPACK_IMPORTED_MODULE_5__.nr(matchLinksByHref?element:{...element,href:void 0},dataAttributes)||"*";combinedSelector=lastSelector?`${selector} > ${lastSelector}`:selector;try{let domElements=cache.selectorToElements?.[combinedSelector];if(void 0===domElements&&(domElements=Array.from(query_selector_shadow_dom__WEBPACK_IMPORTED_MODULE_13__.Jp(combinedSelector,document,cache.pageElements)),cache.selectorToElements[combinedSelector]=domElements),1===domElements.length){let e=event.elements[i];if(0!==i||!e.tag_name||e.attr_class||e.attr_id||e.href||e.text||1!==e.nth_child||1!==e.nth_of_type||e.attributes["attr__data-attr"])return elements.push({element:domElements[0],count:event.count,selector:selector,hash:event.hash,type:event.type}),null}if(0===domElements.length){if(i===event.elements.length-1)return null;if(i>0&&lastSelector){lastSelector=lastSelector?`* > ${lastSelector}`:"*";continue}}}catch(error){break}lastSelector=combinedSelector}}),elements}],countedElements:[s=>[s.elements,_toolbar_toolbarConfigLogic__WEBPACK_IMPORTED_MODULE_8__.W.selectors.dataAttributes,s.clickmapsEnabled,s.elementMetrics],(elements,dataAttributes,clickmapsEnabled,elementMetrics)=>{if(!clickmapsEnabled)return[];cache.intersectionObserver.disconnect(),cache.intersectionObserver.observe(document.body);let normalisedElements=new Map;for(let countedElement of elements||[]){let trimmedElement=(0,_toolbar_utils__WEBPACK_IMPORTED_MODULE_10__.OS)(countedElement.element);if(!trimmedElement)continue;let metrics=elementMetrics.get(trimmedElement)||{visible:isElementVisible(trimmedElement),rect:trimmedElement.getBoundingClientRect()};if(normalisedElements.has(trimmedElement)){let existing=normalisedElements.get(trimmedElement);existing&&(existing.count+=countedElement.count,existing.clickCount+="$autocapture"===countedElement.type?countedElement.count:0,existing.rageclickCount+="$rageclick"===countedElement.type?countedElement.count:0,existing.deadclickCount+="$dead_click"===countedElement.type?countedElement.count:0,existing.visible=metrics.visible)}else normalisedElements.set(trimmedElement,{...countedElement,clickCount:"$autocapture"===countedElement.type?countedElement.count:0,rageclickCount:"$rageclick"===countedElement.type?countedElement.count:0,deadclickCount:"$dead_click"===countedElement.type?countedElement.count:0,element:trimmedElement,actionStep:(0,_toolbar_utils__WEBPACK_IMPORTED_MODULE_10__.bE)(trimmedElement,dataAttributes),visible:metrics.visible});cache.intersectionObserver.observe(trimmedElement)}let countedElements=Array.from(normalisedElements.values());return countedElements.sort((a,b)=>b.count-a.count),countedElements.map((e,i)=>({...e,position:i+1}))}],elementCount:[s=>[s.countedElements],countedElements=>countedElements.length],clickCount:[s=>[s.countedElements],countedElements=>countedElements?countedElements.map(e=>e.count).reduce((a,b)=>a+b,0):0],highestClickCount:[s=>[s.countedElements],countedElements=>countedElements?countedElements.map(e=>e.count).reduce((a,b)=>b>a?b:a,0):0],scrollDepthPosthogJsError:[s=>[s.posthog],posthog=>{var _ref9,_posthog$version;if(!posthog)return null;let posthogVersion=null!==(_ref9=null!==(_posthog$version=posthog?.version)&&void 0!==_posthog$version?_posthog$version:posthog?._calculate_event_properties("test",{},new Date)?.$lib_version)&&void 0!==_ref9?_ref9:"0.0.0";if(!posthog?.scrollManager?.scrollY)return"version";let isSupported=doesVersionSupportScrollDepth(posthogVersion),isDisabled=posthog?.config.disable_scroll_properties;return isSupported?isDisabled?"disabled":null:"version"}]}}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_3__.Vt)(_ref10=>{let{actions}=_ref10;return{viewportRange:()=>{actions.maybeLoadHeatmap()}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref11=>{let{actions,values}=_ref11;return{enableHeatmap:()=>{actions.setDataHref(values.href),actions.loadAllEnabled(),_toolbar_toolbarPosthogJS__WEBPACK_IMPORTED_MODULE_9__.T.capture("toolbar mode triggered",{mode:"heatmap",enabled:!0})},disableHeatmap:()=>{actions.resetElementStats(),actions.resetHeatmapData(),_toolbar_toolbarPosthogJS__WEBPACK_IMPORTED_MODULE_9__.T.capture("toolbar mode triggered",{mode:"heatmap",enabled:!1})},loadAllEnabled:async()=>{actions.maybeLoadHeatmap(),actions.maybeLoadClickmap()},maybeLoadClickmap:async()=>{values.clickmapsEnabled&&actions.getElementStats()},maybeLoadHeatmap:async()=>{values.heatmapEnabled&&values.heatmapFilters.enabled&&values.heatmapFilters.type&&actions.loadHeatmap()},setHref:_ref12=>{let{href}=_ref12;values.heatmapEnabled&&(actions.setHrefMatchType(href===window.location.href?"exact":"pattern"),actions.setDataHref(href)),actions.maybeLoadClickmap()},setWildcardHref:_ref13=>{let{href}=_ref13;values.heatmapEnabled&&(actions.setHrefMatchType(href===window.location.href?"exact":"pattern"),actions.setDataHref(href)),actions.maybeLoadClickmap()},setCommonFilters:()=>{actions.loadAllEnabled()},setSamplingFactor:()=>{actions.maybeLoadClickmap()},toggleClickmapsEnabled:()=>{values.clickmapsEnabled&&actions.getElementStats()},loadMoreElementStats:()=>{values.elementStats?.next&&actions.getElementStats(values.elementStats.next)},patchHeatmapFilters:_ref14=>{let{filters}=_ref14;filters.type&&actions.resetHeatmapData(),actions.maybeLoadHeatmap()}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref15=>{let{actions,values,cache}=_ref15;cache.scrollCheckTimer=setInterval(()=>{var _values$posthog$scrol;let scrollY=null!==(_values$posthog$scrol=values.posthog?.scrollManager?.scrollY())&&void 0!==_values$posthog$scrol?_values$posthog$scrol:0;values.heatmapScrollY!==scrollY&&actions.setHeatmapScrollY(scrollY)},100),cache.intersectionObserver=new IntersectionObserver(entries=>{let observedElements=[];entries.forEach(entry=>{let element=entry.target;observedElements.push([element,entry.isIntersecting])}),actions.updateElementMetrics(observedElements)})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.beforeUnmount)(_ref16=>{let{cache}=_ref16;clearInterval(cache.scrollCheckTimer),cache.intersectionObserver?.disconnect()})]);function isElementVisible(element){let style=window.getComputedStyle(element);return"none"!==style.display&&"hidden"!==style.visibility&&"0"!==style.opacity}let escapeUnescapedRegex=str=>str.replace(/\\.|([.*+?^=!:${}()|[\]/\\])/g,(match,group1)=>group1?`\\${group1}`:match)},"../../frontend/src/toolbar/stats/currentPageLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>currentPageLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js");let replaceWithWildcard=part=>part.match(/^([a-f]|[0-9]){8}-([a-f]|[0-9]){4}-([a-f]|[0-9]){4}-([a-f]|[0-9]){4}-([a-f]|[0-9]){12}$/)||part.match(/^[0-9]+$/)||part.length>24?"*":part;function withoutPostHogInit(href){try{let firstHash=href.indexOf("#");if(-1===firstHash)return href;return href.replace(/__posthog=\{[^}]*}[^#]*/,"").replace("##","#").replace(/#$/,"")}catch{return href}}let currentPageLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["toolbar","stats","currentPageLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)(()=>({setHref:href=>({href}),setWildcardHref:href=>({href}),autoWildcardHref:!0})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)(()=>({href:[window.location.href,{setHref:(_,_ref)=>{let{href}=_ref;return withoutPostHogInit(href)}}],wildcardHref:[window.location.href,{setHref:(_,_ref2)=>{let{href}=_ref2;return withoutPostHogInit(href)},setWildcardHref:(_,_ref3)=>{let{href}=_ref3;return withoutPostHogInit(href)}}]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref4=>{let{actions,values}=_ref4;return{autoWildcardHref:()=>{let url=values.wildcardHref,urlParts=url.split("?");if(url=urlParts[0].split("/").map(part=>replaceWithWildcard(part)).join("/"),urlParts.length>1){let queryParams=urlParts[1].split("&");for(let i=0;i<queryParams.length;i++){let[key,value]=queryParams[i].split("=");queryParams[i]=`${key}=${replaceWithWildcard(value)}`}url=`${url}\\?${queryParams.join("&")}`}actions.setWildcardHref(url)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref5=>{let{actions,values,cache}=_ref5;actions.setHref(withoutPostHogInit(values.href)),cache.interval=window.setInterval(()=>{window.location.href!==values.href&&actions.setHref(withoutPostHogInit(window.location.href))},500)}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.beforeUnmount)(_ref6=>{let{cache}=_ref6;window.clearInterval(cache.interval)})])}}]);