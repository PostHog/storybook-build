(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(fe,L,t){"use strict";t.d(L,"a",function(){return Ge});var X=t("./node_modules/core-js/modules/es.array.includes.js"),ee=t.n(X),Le=t("./node_modules/core-js/modules/es.array.iterator.js"),xe=t.n(Le),je=t("./node_modules/core-js/modules/es.object.to-string.js"),He=t.n(je),qe=t("./node_modules/core-js/modules/es.object.values.js"),he=t.n(qe),e=t("./node_modules/core-js/modules/es.string.includes.js"),S=t.n(e),Ye=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),De=t.n(Ye),s=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),$e=t.n(s),R=t("./node_modules/kea/lib/index.esm.js"),U=t("./frontend/src/lib/utils.tsx"),F=t("./frontend/src/types.ts"),y=t("./frontend/src/scenes/insights/sharedUtils.ts"),h=t("./frontend/src/scenes/insights/insightLogic.ts");function ie(w,k){var se=Object.keys(w);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(w);k&&(Ee=Ee.filter(function(Se){return Object.getOwnPropertyDescriptor(w,Se).enumerable})),se.push.apply(se,Ee)}return se}function _e(w){for(var k=1;k<arguments.length;k++){var se=arguments[k]!=null?arguments[k]:{};k%2?ie(Object(se),!0).forEach(function(Ee){$e()(w,Ee,se[Ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(se)):ie(Object(se)).forEach(function(Ee){Object.defineProperty(w,Ee,Object.getOwnPropertyDescriptor(se,Ee))})}return w}function ve(w){return Object.values(F.o).includes(w)}var Ge=Object(R.kea)({props:{},key:Object(y.c)("new"),path:function(k){return["lib","components","ChartFilter","chartFilterLogic",k]},connect:function(k){return{actions:[Object(h.c)(k),["setFilters"]],values:[Object(h.c)(k),["filters"]]}},actions:function(){return{setChartFilter:function(se){return{chartFilter:se}}}},selectors:{chartFilter:[function(w){return[w.filters]},function(w){var k=w.display,se=w.funnel_viz_type;return(k===F.d.FunnelViz?se:k)||null}]},listeners:function(k){var se=k.actions,Ee=k.values;return{setChartFilter:function(bt){var Xe=bt.chartFilter,at=Ee.filters,te=at.display,Qe=at.funnel_viz_type;ve(Xe)?(Qe!==Xe||te!==F.d.FunnelViz)&&se.setFilters(_e(_e({},Ee.filters),{},{display:F.d.FunnelViz,funnel_viz_type:Xe})):Object(U.mb)(te,Xe)||se.setFilters(_e(_e({},Ee.filters),{},{display:Xe}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(fe,L,t){"use strict";t.d(L,"a",function(){return U});var X=t("./node_modules/core-js/modules/es.array.iterator.js"),ee=t.n(X),Le=t("./node_modules/core-js/modules/es.object.to-string.js"),xe=t.n(Le),je=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),He=t.n(je),qe=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),he=t.n(qe),e=t("./node_modules/kea/lib/index.esm.js"),S=t("./frontend/src/lib/utils.tsx"),Ye=t("./frontend/src/types.ts"),De=t("./frontend/src/scenes/insights/sharedUtils.ts"),s=t("./frontend/src/scenes/insights/insightLogic.ts");function $e(F,y){var h=Object.keys(F);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(F);y&&(ie=ie.filter(function(_e){return Object.getOwnPropertyDescriptor(F,_e).enumerable})),h.push.apply(h,ie)}return h}function R(F){for(var y=1;y<arguments.length;y++){var h=arguments[y]!=null?arguments[y]:{};y%2?$e(Object(h),!0).forEach(function(ie){he()(F,ie,h[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(h)):$e(Object(h)).forEach(function(ie){Object.defineProperty(F,ie,Object.getOwnPropertyDescriptor(h,ie))})}return F}var U=Object(e.kea)({props:{},key:Object(De.c)("new"),path:function(y){return["lib","components","CompareFilter","compareFilterLogic",y]},connect:function(y){return{actions:[Object(s.c)(y),["setFilters"]],values:[Object(s.c)(y),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(h){return{compare:h}},toggleCompare:!0}},selectors:{compare:[function(F){return[F.filters]},function(F){return!!(F!=null&&F.compare)}],disabled:[function(F){return[F.filters,F.canEditInsight]},function(F,y){var h=F.insight,ie=F.date_from,_e=F.display;return!y||h===Ye.s.LIFECYCLE||_e===Ye.d.WorldMap||ie==="all"}]},listeners:function(y){var h=y.values,ie=y.actions;return{setCompare:function(ve){var Ge=ve.compare;Object(S.mb)(Ge,h.compare)||ie.setFilters(R(R({},h.filters),{},{compare:Ge}))},toggleCompare:function(){ie.setCompare(!h.compare)}}}})},"./frontend/src/lib/components/CopyToClipboard.tsx":function(fe,L,t){"use strict";t.d(L,"a",function(){return Ge});var X=t("./node_modules/core-js/modules/es.symbol.js"),ee=t.n(X),Le=t("./node_modules/core-js/modules/es.symbol.description.js"),xe=t.n(Le),je=t("./node_modules/core-js/modules/es.object.to-string.js"),He=t.n(je),qe=t("./node_modules/core-js/modules/es.regexp.to-string.js"),he=t.n(qe),e=t("./node_modules/@babel/runtime/helpers/extends.js"),S=t.n(e),Ye=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),De=t.n(Ye),s=t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),$e=t.n(s),R=t("./node_modules/react/index.js"),U=t.n(R),F=t("./frontend/src/lib/utils.tsx"),y=t("./frontend/src/lib/components/Tooltip.tsx"),h=t("./frontend/src/lib/components/icons.tsx"),ie=t("./frontend/src/lib/components/LemonButton/index.ts");function _e(w,k){var se=Object.keys(w);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(w);k&&(Ee=Ee.filter(function(Se){return Object.getOwnPropertyDescriptor(w,Se).enumerable})),se.push.apply(se,Ee)}return se}function ve(w){for(var k=1;k<arguments.length;k++){var se=arguments[k]!=null?arguments[k]:{};k%2?_e(Object(se),!0).forEach(function(Ee){De()(w,Ee,se[Ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(se)):_e(Object(se)).forEach(function(Ee){Object.defineProperty(w,Ee,Object.getOwnPropertyDescriptor(se,Ee))})}return w}function Ge(w){var k=w.children,se=w.explicitValue,Ee=w.description,Se=w.selectable,bt=Se===void 0?!1:Se,Xe=w.isValueSensitive,at=Xe===void 0?!1:Xe,te=w.tooltipMessage,Qe=te===void 0?null:te,n=w.iconStyle,o=n===void 0?{}:n,Q=w.iconPosition,_=Q===void 0?"end":Q,O=w.style,Ce=$e()(w,["children","explicitValue","description","selectable","isValueSensitive","tooltipMessage","iconStyle","iconPosition","style"]),St=function(){return Object(F.t)(se!=null?se:k?k.toString():"",Ee)},Ve=U.a.createElement("span",S()({className:at?"ph-no-capture":"",style:ve({cursor:bt?"text":"pointer",display:"inline-flex",alignItems:"center",flexDirection:_==="end"?"row":"row-reverse",flexWrap:"nowrap",width:"fit-content",wordBreak:"break-all"},O),onClick:bt?void 0:St},Ce),U.a.createElement("span",{style:_==="start"?{flexGrow:1}:{}},k),U.a.createElement(ie.a,{compact:!0,icon:U.a.createElement(h.IconCopy,null),className:"copy-icon",onClick:bt?St:void 0,style:ve(De()({},_==="end"?"marginLeft":"marginRight",4),o)}));return!bt||Qe!==null?U.a.createElement(y.a,{title:Qe||"Click to copy"},Ve):U.a.createElement(U.a.Fragment,null,Ve)}try{Ge.displayName="CopyToClipboardInline",Ge.__docgenInfo={description:"",displayName:"CopyToClipboardInline",props:{explicitValue:{defaultValue:null,description:"",name:"explicitValue",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},selectable:{defaultValue:{value:"false"},description:"Makes text selectable instead of copying on click anywhere",name:"selectable",required:!1,type:{name:"boolean"}},isValueSensitive:{defaultValue:{value:"false"},description:"",name:"isValueSensitive",required:!1,type:{name:"boolean"}},tooltipMessage:{defaultValue:{value:"null"},description:"",name:"tooltipMessage",required:!1,type:{name:"string | null"}},iconStyle:{defaultValue:{value:"{}"},description:"",name:"iconStyle",required:!1,type:{name:"Record<string, string | number>"}},iconPosition:{defaultValue:{value:"end"},description:"",name:"iconPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"]={docgenInfo:Ge.__docgenInfo,name:"CopyToClipboardInline",path:"frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"})}catch(w){}},"./frontend/src/lib/components/PropertiesTable.tsx":function(fe,L,t){"use strict";t.d(L,"a",function(){return it});var X=t("./node_modules/core-js/modules/es.array.filter.js"),ee=t("./node_modules/core-js/modules/es.array.includes.js"),Le=t("./node_modules/core-js/modules/es.array.map.js"),xe=t("./node_modules/core-js/modules/es.array.some.js"),je=t("./node_modules/core-js/modules/es.object.entries.js"),He=t("./node_modules/core-js/modules/es.string.includes.js"),qe=t("./node_modules/core-js/modules/es.string.starts-with.js"),he=t("./node_modules/@babel/runtime/helpers/typeof.js"),e=t.n(he),S=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ye=t.n(S),De=t("./node_modules/react/index.js"),s=t.n(De),$e=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),R=t("./node_modules/antd/es/input/index.js"),U=t("./node_modules/antd/es/dropdown/index.js"),F=t("./node_modules/antd/es/menu/index.js"),y=t("./node_modules/antd/es/popconfirm/index.js"),h=t("./frontend/src/lib/utils.tsx"),ie=t("./frontend/src/lib/components/icons.tsx"),_e=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ve=t.n(_e),Ge=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss"),w=t.n(Ge),k={};k.insert="head",k.singleton=!1;var se=ve()(w.a,k),Ee=w.a.locals||{},Se=t("./frontend/src/lib/components/LemonTable/index.ts"),bt=t("./frontend/src/lib/components/CopyToClipboard.tsx"),Xe=t("./node_modules/kea/lib/index.esm.js"),at=t("./frontend/src/models/propertyDefinitionsModel.ts"),te=t("./frontend/src/lib/components/LemonButton/index.ts"),Qe=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=t.n(Qe),o=t("./node_modules/antd/es/radio/index.js"),Q=t("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),_=t("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),O=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Ce=t("./node_modules/@ant-design/icons/es/icons/StopOutlined.js"),St=t("./node_modules/antd/lib/modal/Modal.js"),Ve=t.n(St);function _t(Z,de){var Pe=Object.keys(Z);if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(Z);de&&(Be=Be.filter(function(ut){return Object.getOwnPropertyDescriptor(Z,ut).enumerable})),Pe.push.apply(Pe,Be)}return Pe}function dt(Z){for(var de=1;de<arguments.length;de++){var Pe=arguments[de]!=null?arguments[de]:{};de%2?_t(Object(Pe),!0).forEach(function(Be){n()(Z,Be,Pe[Be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(Pe)):_t(Object(Pe)).forEach(function(Be){Object.defineProperty(Z,Be,Object.getOwnPropertyDescriptor(Pe,Be))})}return Z}function kt(Z){var de=Z.editProperty,Pe={creating:!1,propertyType:"string"},Be=Object(De.useState)(Pe),ut=Ye()(Be,2),ke=ut[0],mt=ut[1],Pt=function(){ke.key&&ke.value!==void 0&&(de(ke.key,ke.value),mt(Pe))};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mb"},s.a.createElement("div",{className:"text-right"},s.a.createElement(te.a,{"data-attr":"add-prop-button",onClick:function(){return mt(dt(dt({},ke),{},{creating:!0}))},type:"primary"},"New property"))),s.a.createElement(Ve.a,{visible:ke.creating,destroyOnClose:!0,onCancel:function(){return mt(Pe)},title:"Adding new property",okText:s.a.createElement(s.a.Fragment,null,s.a.createElement(Q.a,{style:{marginRight:4}}),"Save Property"),okButtonProps:{disabled:!ke.key||ke.value===void 0},onOk:Pt},s.a.createElement("div",{className:"input-set"},s.a.createElement("label",{htmlFor:"propertyKey"},"Key"),s.a.createElement(R.a,{id:"propertyKey",autoFocus:!0,placeholder:"try email, first_name, is_verified, membership_level, total_revenue",onChange:function(W){return mt(dt(dt({},ke),{},{key:W.target.value}))}})),s.a.createElement("div",{className:"input-set"},s.a.createElement("label",{htmlFor:"propertyType"},"Type of Property"),s.a.createElement("div",null,s.a.createElement(o.a.Group,{value:ke.propertyType,onChange:function(W){return mt(dt(dt({},ke),{},{propertyType:W.target.value,value:W.target.value==="string"?void 0:"true"}))},id:"propertyType",buttonStyle:"solid"},s.a.createElement(o.a.Button,{value:"string"},"Text or Number"),s.a.createElement(o.a.Button,{value:"boolean"},"Boolean or Null")))),s.a.createElement("div",{className:"input-set"},s.a.createElement("label",{htmlFor:"propertyValue"},"Value"),ke.propertyType==="boolean"?s.a.createElement("div",null,s.a.createElement(o.a.Group,{value:ke.value,onChange:function(W){return mt(dt(dt({},ke),{},{value:W.target.value}))},id:"propertyValue",buttonStyle:"solid"},s.a.createElement(o.a.Button,{value:"true",defaultChecked:!0},s.a.createElement(_.a,null)," True"),s.a.createElement(o.a.Button,{value:"false"},s.a.createElement(O.a,null)," False"),s.a.createElement(o.a.Button,{value:"null"},s.a.createElement(Ce.a,null)," Null"))):s.a.createElement(R.a,{placeholder:"try email@example.com, gold, 1",onChange:function(W){return mt(dt(dt({},ke),{},{value:W.target.value}))},id:"propertyValue",onKeyDown:function(W){return W.key==="Enter"&&Pt()}}))))}try{kt.displayName="NewPropertyComponent",kt.__docgenInfo={description:"",displayName:"NewPropertyComponent",props:{editProperty:{defaultValue:null,description:"",name:"editProperty",required:!0,type:{name:"(key: string, newValue?: string | number | boolean | null | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"]={docgenInfo:kt.__docgenInfo,name:"NewPropertyComponent",path:"frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"})}catch(Z){}function tn(Z){var de=Z.value,Pe=Z.onChange;return s.a.createElement(R.a,{defaultValue:de,autoFocus:!0,onBlur:function(){return Pe(null,!1)},onPressEnter:function(ut){return Pe(ut.target.value,!0)}})}function ln(Z){var de=Z.value,Pe=Z.rootKey,Be=Z.onEdit,ut=Z.nestingLevel,ke=Z.useDetectedPropertyType,mt=Object(Xe.useValues)(at.a),Pt=mt.describeProperty,Ke=Object(De.useState)(!1),W=Ye()(Ke,2),Jt=W[0],Ot=W[1],Ue=Pe&&!$e.e.includes(Pe)&&(!ut||ut<=1)&&Be,xt=["string","number","bigint"],P=["boolean","null"],ct;Pe&&ke&&(ct=Pt(Pe));var ye=de===null?"null":e()(de),ft=de===null?"null":String(de),At=function(Je,Oe){Ot(!1),Pe!==void 0&&Oe&&Be&&Je!=de&&Be(Pe,Je,de)},Te=s.a.createElement("span",{className:Ue?"editable ph-no-capture":"ph-no-capture",onClick:function(){return Ue&&xt.includes(ye)&&Ot(!0)}},Object(h.eb)(de)?s.a.createElement("a",{href:de,target:"_blank",rel:"noopener noreferrer",className:"value-link"},s.a.createElement("span",null,ft),s.a.createElement(ie.IconOpenInNew,null)):ft);return s.a.createElement("div",{className:"properties-table-value"},Jt?s.a.createElement(tn,{value:de,onChange:At}):s.a.createElement(s.a.Fragment,null,Ue&&P.includes(ye)?s.a.createElement(U.a,{overlay:s.a.createElement(F.a,{onClick:function(Je){var Oe=Je.key,Ae=null;Oe==="t"?Ae=!0:Oe==="f"&&(Ae=!1),At(Ae,!0)}},s.a.createElement(F.a.Item,{key:"t"},"true"),s.a.createElement(F.a.Item,{key:"f"},"false"),s.a.createElement(F.a.Item,{key:"n",danger:!0},"null"))},Te):s.a.createElement(bt.a,{description:"property value",explicitValue:ft,selectable:!0,isValueSensitive:!0},Te),s.a.createElement("div",{className:"property-value-type"},ct||ye)))}function it(Z){var de=Z.properties,Pe=Z.rootKey,Be=Z.onEdit,ut=Z.sortProperties,ke=ut===void 0?!1:ut,mt=Z.searchable,Pt=mt===void 0?!1:mt,Ke=Z.embedded,W=Ke===void 0?!0:Ke,Jt=Z.nestingLevel,Ot=Jt===void 0?0:Jt,Ue=Z.onDelete,xt=Z.className,P=Z.useDetectedPropertyType,ct=Object(De.useState)(""),ye=Ye()(ct,2),ft=ye[0],At=ye[1],Te=Object(De.useMemo)(function(){if(!(de instanceof Object))return[];var Je=Object.entries(de);if(ft){var Oe=ft.toLowerCase();Je=Je.filter(function(Ae){var gt=Ye()(Ae,2),Xt=gt[0],Tt=gt[1];return Xt.toLowerCase().includes(Oe)||JSON.stringify(Tt).toLowerCase().includes(Oe)})}return ke&&Je.sort(function(Ae,gt){var Xt=Ye()(Ae,1),Tt=Xt[0],jt=Ye()(gt,1),nn=jt[0];return Tt[0]==="$"&&nn[0]!=="$"?1:Tt[0]!=="$"&&nn[0]==="$"||Tt.toLowerCase()<nn.toLowerCase()?-1:1}),Je},[de,ke,ft]);if(Array.isArray(de))return s.a.createElement("div",null,de.length?de.map(function(Je,Oe){return s.a.createElement(it,{key:Oe,properties:Je,nestingLevel:Ot+1,useDetectedPropertyType:["$set","$set_once"].some(function(Ae){return Ae===Pe})?!1:P})}):s.a.createElement("div",{className:"property-value-type"},"ARRAY (EMPTY)"));var vt=[{key:"key",title:"Key",width:"20rem",render:function(Oe,Ae){return s.a.createElement("div",{className:"properties-table-key"},s.a.createElement($e.a,{value:Ae[0]}))},sorter:function(Oe,Ae){return String(Oe[0]).localeCompare(String(Ae[0]))}},{key:"value",title:"Value",render:function(Oe,Ae){return s.a.createElement(it,{properties:Ae[1],rootKey:Ae[0],onEdit:Be,nestingLevel:Ot+1,useDetectedPropertyType:["$set","$set_once"].some(function(gt){return gt===Pe})?!1:P})}}];return Ue&&Ot===0&&vt.push({key:"delete",title:"",width:0,render:function(Oe,Ae){return!$e.e.includes(Ae[0])&&!String(Ae[0]).startsWith("$initial_")&&s.a.createElement(y.a,{onConfirm:function(){return Ue(Ae[0])},okButtonProps:{danger:!0},okText:"Delete",title:s.a.createElement(s.a.Fragment,null,"Are you sure you want to delete property ",s.a.createElement("code",null,Ae[0]),"?"," ",s.a.createElement("b",null,"This cannot be undone.")),placement:"left"},s.a.createElement(te.a,{icon:s.a.createElement(ie.IconDeleteForever,null),status:"danger",compact:!0}))}}),de instanceof Object?s.a.createElement(s.a.Fragment,null,Pt&&s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},s.a.createElement(R.a.Search,{placeholder:"Search for property keys and values",className:"mb",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:ft,onChange:function(Oe){At(Oe.target.value)}}),Be&&s.a.createElement(kt,{editProperty:Be})),s.a.createElement(Se.a,{columns:vt,showHeader:!W,size:"small",rowKey:"0",embedded:W,dataSource:Te,className:xt,emptyState:"This property value is an empty object."})):s.a.createElement(ln,{value:de,rootKey:Pe,onEdit:Be,nestingLevel:Ot,useDetectedPropertyType:P})}try{it.displayName="PropertiesTable",it.__docgenInfo={description:"",displayName:"PropertiesTable",props:{properties:{defaultValue:null,description:"",name:"properties",required:!0,type:{name:"any"}},sortProperties:{defaultValue:{value:"false"},description:"",name:"sortProperties",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"",name:"searchable",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"true"},description:"Whether this table should be style for being embedded. Default: true.",name:"embedded",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((key: string) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},useDetectedPropertyType:{defaultValue:null,description:"",name:"useDetectedPropertyType",required:!1,type:{name:"boolean"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((key: string, newValue: any, oldValue?: any) => void)"}},nestingLevel:{defaultValue:{value:"0"},description:"",name:"nestingLevel",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"]={docgenInfo:it.__docgenInfo,name:"PropertiesTable",path:"frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"})}catch(Z){}},"./frontend/src/scenes/experiments/Experiment.tsx":function(fe,L,t){"use strict";t.r(L),t.d(L,"scene",function(){return Zn}),t.d(L,"Experiment_",function(){return bn}),t.d(L,"CodeLanguageSelect",function(){return qn});var X=t("./node_modules/core-js/modules/es.symbol.js"),ee=t("./node_modules/core-js/modules/es.symbol.description.js"),Le=t("./node_modules/core-js/modules/es.array.concat.js"),xe=t("./node_modules/core-js/modules/es.array.filter.js"),je=t("./node_modules/core-js/modules/es.array.map.js"),He=t("./node_modules/core-js/modules/es.array.reduce.js"),qe=t("./node_modules/core-js/modules/es.function.name.js"),he=t("./node_modules/core-js/modules/es.number.constructor.js"),e=t("./node_modules/core-js/modules/es.number.to-fixed.js"),S=t("./node_modules/core-js/modules/es.object.keys.js"),Ye=t("./node_modules/core-js/modules/es.object.to-string.js"),De=t("./node_modules/core-js/modules/es.regexp.to-string.js"),s=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),$e=t.n(s),R=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),U=t.n(R),F=t("./node_modules/antd/es/form/index.js"),y=t("./node_modules/antd/es/row/index.js"),h=t("./node_modules/antd/es/col/index.js"),ie=t("./node_modules/antd/es/input/index.js"),_e=t("./node_modules/antd/es/tooltip/index.js"),ve=t("./node_modules/antd/es/select/index.js"),Ge=t("./node_modules/antd/es/card/index.js"),w=t("./node_modules/antd/es/tag/index.js"),k=t("./node_modules/antd/es/collapse/index.js"),se=t("./node_modules/antd/es/skeleton/index.js"),Ee=t("./node_modules/antd/es/progress/index.js"),Se=t("./node_modules/kea/lib/index.esm.js"),bt=t("./frontend/src/lib/components/PageHeader.tsx"),Xe=t("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),at=t("./frontend/src/lib/components/PropertyFilters/utils.ts"),te=t("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Qe=t("./node_modules/react/index.js"),n=t.n(Qe),o=t("./frontend/src/scenes/funnels/funnelLogic.ts"),Q=t("./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx"),_=t("./frontend/src/scenes/insights/insightLogic.ts"),O=t("./frontend/src/types.ts"),Ce=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),St=t.n(Ce),Ve=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),_t=t.n(Ve),dt={};dt.insert="head",dt.singleton=!1;var kt=St()(_t.a,dt),tn=_t.a.locals||{},ln=t("./node_modules/core-js/modules/es.array.fill.js"),it=t("./node_modules/core-js/modules/es.array.find.js"),Z=t("./node_modules/core-js/modules/es.array.find-index.js"),de=t("./node_modules/core-js/modules/es.array.iterator.js"),Pe=t("./node_modules/core-js/modules/es.array.splice.js"),Be=t("./node_modules/core-js/modules/es.number.epsilon.js"),ut=t("./node_modules/core-js/modules/es.object.values.js"),ke=t("./node_modules/core-js/modules/es.promise.js"),mt=t("./node_modules/core-js/modules/es.string.iterator.js"),Pt=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ke=t("./node_modules/@babel/runtime/regenerator/index.js"),W=t.n(Ke),Jt=t("./node_modules/regenerator-runtime/runtime.js"),Ot=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Ue=t.n(Ot),xt=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),P=t.n(xt),ct=t("./frontend/src/lib/api.ts"),ye=t("./frontend/src/lib/dayjs.ts"),ft=t("./frontend/src/scenes/insights/utils/cleanFilters.ts"),At=t("./frontend/src/scenes/teamLogic.ts"),Te=t("./frontend/src/scenes/urls.ts"),vt=t("./node_modules/kea-router/lib/index.js"),Je=t("./frontend/src/scenes/experiments/experimentsLogic.ts"),Oe=t("./frontend/src/lib/constants.tsx"),Ae=t("./frontend/src/scenes/trends/trendsLogic.ts"),gt=t("./frontend/src/lib/utils/eventUsageLogic.ts"),Xt=t("./frontend/src/scenes/userLogic.ts"),Tt=t("./frontend/src/lib/components/Tooltip.tsx"),jt=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),nn=t("./frontend/src/models/groupsModel.ts"),zt=t("./frontend/src/lib/components/lemonToast.tsx");function tt(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),l.push.apply(l,i)}return l}function z(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?tt(Object(l),!0).forEach(function(i){$e()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):tt(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}var Vt=14,on=Object(Se.kea)({props:{},key:function(r){return r.experimentId||"new"},path:function(r){return["scenes","experiment","experimentLogic",r]},connect:{values:[At.a,["currentTeamId"],Xt.a,["hasAvailableFeature"],nn.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[Je.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:function(r){return{experiment:r}},createExperiment:function(r,l,i){return{draft:r,runningTime:l,sampleSize:i}},setExperimentInsightId:function(r){return{shortId:r}},createNewExperimentInsight:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setNewExperimentData:function(r){return{experimentData:r}},updateExperimentGroup:function(r,l){return{variant:r,idx:l}},removeExperimentGroup:function(r){return{idx:r}},setExperimentInsightType:function(r){return{insightType:r}},setEditExperiment:function(r){return{editing:r}},setSecondaryMetrics:function(r){return{secondaryMetrics:r}},resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:function(r,l){var i=l.experimentData;if(i.filters){var g=z(z({},r==null?void 0:r.filters),i.filters);return z(z(z({},r),i),{},{filters:g})}if(i.parameters){var j=z(z({},r==null?void 0:r.parameters),i.parameters);return z(z(z({},r),i),{},{parameters:j})}return z(z({},r),i)},updateExperimentGroup:function(r,l){var i,g=l.variant,j=l.idx,b=P()((r==null||(i=r.parameters)===null||i===void 0?void 0:i.feature_flag_variants)||[]);return b[j]=z(z({},b[j]),g),z(z({},r),{},{parameters:z(z({},r==null?void 0:r.parameters),{},{feature_flag_variants:b})})},addExperimentGroup:function(r){var l;if(!(r==null||(l=r.parameters)===null||l===void 0)&&l.feature_flag_variants){var i=Rn(r.parameters.feature_flag_variants.length+1),g=r.parameters.feature_flag_variants.map(function(j,b){return z(z({},j),{},{rollout_percentage:i[b]})});return z(z({},r),{},{parameters:z(z({},r.parameters),{},{feature_flag_variants:[].concat(P()(g),[{key:"test_group_".concat(r.parameters.feature_flag_variants.length),rollout_percentage:i[i.length-1]}])})})}return r},removeExperimentGroup:function(r,l){var i,g,j=l.idx;if(!r)return r;var b=P()(((i=r.parameters)===null||i===void 0?void 0:i.feature_flag_variants)||[]);b.splice(j,1);var d=Rn(((r==null||(g=r.parameters)===null||g===void 0?void 0:g.feature_flag_variants)||[]).length-1),T=b.map(function(f,re){return z(z({},f),{},{rollout_percentage:d[re]})});return z(z({},r),{},{parameters:z(z({},r.parameters),{},{feature_flag_variants:T})})},setSecondaryMetrics:function(r,l){var i=l.secondaryMetrics,g=i.map(function(j){return j});return z(z({},r),{},{secondary_metrics:g})},resetNewExperiment:function(){return{parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}}}}],experimentInsightType:[O.s.TRENDS,{setExperimentInsightType:function(r,l){var i=l.insightType;return i}}],experimentInsightId:[null,{setExperimentInsightId:function(r,l){var i=l.shortId;return i}}],editingExistingExperiment:[!1,{setEditExperiment:function(r,l){var i=l.editing;return i}}]},listeners:function(r){var l=r.values,i=r.props,g=r.actions;return{createExperiment:function(){var j=Ue()(W.a.mark(function d(T){var f,re,oe,Me,K,V,v,Fe,Rt,Ut;return W.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(re=T.draft,oe=T.runningTime,Me=T.sampleSize,K=null,V=!!i.experimentId&&i.experimentId!=="new",H.prev=3,!V){H.next=14;break}return H.next=7,ct.b.update("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId),z(z({},l.newExperimentData),{},{parameters:z(z({},(v=l.newExperimentData)===null||v===void 0?void 0:v.parameters),{},{recommended_running_time:oe,recommended_sample_size:Me})},!re&&{start_date:Object(ye.a)()}));case 7:if(K=H.sent,!(!((Fe=K)===null||Fe===void 0)&&Fe.id)){H.next=12;break}return g.updateExperiments(K),vt.router.actions.push(Te.a.experiment(K.id)),H.abrupt("return");case 12:H.next=18;break;case 14:return H.next=16,ct.b.create("api/projects/".concat(l.currentTeamId,"/experiments"),z(z({},l.newExperimentData),{},{parameters:z(z({},(Rt=l.newExperimentData)===null||Rt===void 0?void 0:Rt.parameters),{},{recommended_running_time:oe,recommended_sample_size:Me})},!re&&{start_date:Object(ye.a)()}));case 16:K=H.sent,K&&gt.f.actions.reportExperimentCreated(K);case 18:H.next=24;break;case 20:return H.prev=20,H.t0=H.catch(3),zt.a.error(H.t0.detail||"Failed to create experiment"),H.abrupt("return");case 24:!((f=K)===null||f===void 0)&&f.id&&(Ut=K.id,vt.router.actions.push(Te.a.experiment(Ut)),g.addToExperiments(K),zt.a.success("Experiment ".concat(V?"updated":"created"),{button:{label:"View it",action:function(){vt.router.actions.push(Te.a.experiment(Ut))}}}));case 25:case"end":return H.stop()}},d,null,[[3,20]])}));function b(d){return j.apply(this,arguments)}return b}(),createNewExperimentInsight:function(){var j=Ue()(W.a.mark(function d(T){var f,re,oe,Me;return W.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return f=T.filters,l.experimentInsightType===O.s.FUNNELS?re=Object(ft.a)(z({insight:O.s.FUNNELS,funnel_viz_type:O.o.Steps,display:O.d.FunnelViz,date_from:Object(ye.a)().subtract(Vt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ye.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:Oe.k.horizontal},f)):re=Object(ft.a)(z({insight:O.s.TRENDS,date_from:Object(ye.a)().subtract(Vt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ye.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},f)),oe={name:"",description:"",tags:[],filters:re,result:null},V.next=5,ct.b.create("api/projects/".concat(l.currentTeamId,"/insights"),oe);case 5:Me=V.sent,g.setExperimentInsightId(Me.short_id),g.setNewExperimentData({filters:z({},oe.filters)});case 8:case"end":return V.stop()}},d)}));function b(d){return j.apply(this,arguments)}return b}(),setFilters:function(b){var d=b.filters;if(l.experimentInsightType===O.s.FUNNELS){var T;(T=o.a.findMounted({dashboardItemId:l.experimentInsightId}))===null||T===void 0||T.actions.setFilters(d)}else{var f;(f=Ae.a.findMounted({dashboardItemId:l.experimentInsightId}))===null||f===void 0||f.actions.setFilters(d)}},loadExperimentSuccess:function(){var j=Ue()(W.a.mark(function d(T){var f;return W.a.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:f=T.experimentData,f&&gt.f.actions.reportExperimentViewed(f),g.setExperimentInsightType((f==null?void 0:f.filters.insight)||O.s.FUNNELS),f!=null&&f.start_date?(g.resetNewExperiment(),g.loadExperimentResults(),g.loadSecondaryMetricResults()):(g.setNewExperimentData(z({},f)),g.createNewExperimentInsight(f==null?void 0:f.filters));case 4:case"end":return oe.stop()}},d)}));function b(d){return j.apply(this,arguments)}return b}(),launchExperiment:function(){var j=Ue()(W.a.mark(function d(){var T;return W.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:T=Object(ye.a)(),g.updateExperiment({start_date:T.format("YYYY-MM-DDTHH:mm")}),l.experimentData&&gt.f.actions.reportExperimentLaunched(l.experimentData,T);case 3:case"end":return re.stop()}},d)}));function b(){return j.apply(this,arguments)}return b}(),endExperiment:function(){var j=Ue()(W.a.mark(function d(){var T,f,re;return W.a.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:f=Object(ye.a)(),g.updateExperiment({end_date:f.format("YYYY-MM-DDTHH:mm")}),re=f.diff((T=l.experimentData)===null||T===void 0?void 0:T.start_date,"second"),l.experimentData&&gt.f.actions.reportExperimentCompleted(l.experimentData,f,re,l.areResultsSignificant);case 4:case"end":return Me.stop()}},d)}));function b(){return j.apply(this,arguments)}return b}(),archiveExperiment:function(){var j=Ue()(W.a.mark(function d(){return W.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:g.updateExperiment({archived:!0}),l.experimentData&&gt.f.actions.reportExperimentArchived(l.experimentData);case 2:case"end":return f.stop()}},d)}));function b(){return j.apply(this,arguments)}return b}(),setExperimentInsightType:function(){if(i.experimentId==="new"||l.editingExistingExperiment)g.createNewExperimentInsight();else{var b;g.createNewExperimentInsight((b=l.experimentData)===null||b===void 0?void 0:b.filters)}},updateExperimentSuccess:function(){var j=Ue()(W.a.mark(function d(T){var f;return W.a.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:f=T.experimentData,g.updateExperiments(f);case 2:case"end":return oe.stop()}},d)}));function b(d){return j.apply(this,arguments)}return b}()}},loaders:function(r){var l=r.values,i=r.props;return{experimentData:[null,{loadExperiment:function(){var g=Ue()(W.a.mark(function b(){var d;return W.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(i.experimentId&&i.experimentId!=="new")){f.next=16;break}return f.prev=1,f.next=4,ct.b.get("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId));case 4:return d=f.sent,f.abrupt("return",d);case 8:if(f.prev=8,f.t0=f.catch(1),f.t0.status!==404){f.next=14;break}vt.router.actions.push(Te.a.experiments()),f.next=16;break;case 14:throw zt.a.error("Failed to load experiment ".concat(i.experimentId)),new Error("Failed to load experiment ".concat(i.experimentId));case 16:return f.abrupt("return",null);case 17:case"end":return f.stop()}},b,null,[[1,8]])}));function j(){return g.apply(this,arguments)}return j}(),updateExperiment:function(){var g=Ue()(W.a.mark(function b(d){var T;return W.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,ct.b.update("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId),d);case 2:return T=re.sent,re.abrupt("return",T);case 4:case"end":return re.stop()}},b)}));function j(b){return g.apply(this,arguments)}return j}()}],experimentResults:[null,{loadExperimentResults:function(){var g=Ue()(W.a.mark(function b(){var d;return W.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,ct.b.get("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId,"/results"));case 3:return d=f.sent,f.abrupt("return",z(z({},d),{},{itemID:Math.random().toString(36).substring(2,15)}));case 7:if(f.prev=7,f.t0=f.catch(0),f.t0.code!=="no_data"){f.next=11;break}return f.abrupt("return",null);case 11:return zt.a.error(f.t0.detail||"Failed to load experiment results"),f.abrupt("return",null);case 13:case"end":return f.stop()}},b,null,[[0,7]])}));function j(){return g.apply(this,arguments)}return j}()}],secondaryMetricResults:[null,{loadSecondaryMetricResults:function(){var g=Ue()(W.a.mark(function b(){var d;return W.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Promise.all((((d=l.experimentData)===null||d===void 0?void 0:d.secondary_metrics)||[]).map(function(){var re=Ue()(W.a.mark(function oe(Me,K){var V;return W.a.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.prev=0,Fe.next=3,ct.b.get("api/projects/".concat(l.currentTeamId,"/experiments/").concat(i.experimentId,"/secondary_results?id=").concat(K));case 3:return V=Fe.sent,Fe.abrupt("return",V.result);case 7:return Fe.prev=7,Fe.t0=Fe.catch(0),Fe.abrupt("return",{});case 10:case"end":return Fe.stop()}},oe,null,[[0,7]])}));return function(oe,Me){return re.apply(this,arguments)}}()));case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},b)}));function j(){return g.apply(this,arguments)}return j}()}]}},selectors:{breadcrumbs:[function(a){return[a.experimentData,function(r,l){return l.experimentId}]},function(a,r){return[{name:"Experiments",path:Te.a.experiments()},{name:(a==null?void 0:a.name)||"New",path:Te.a.experiment(r||"new")}]}],variants:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var l,i;if(r!=null&&r.start_date){var g;return(r==null||(g=r.parameters)===null||g===void 0?void 0:g.feature_flag_variants)||[]}return(a==null||(l=a.parameters)===null||l===void 0?void 0:l.feature_flag_variants)||(r==null||(i=r.parameters)===null||i===void 0?void 0:i.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[function(a){return[a.newExperimentData,a.groupsTaxonomicTypes]},function(a,r){var l;return(a==null||(l=a.filters)===null||l===void 0?void 0:l.aggregation_group_type_index)!=null&&r.length>0?[r[a.filters.aggregation_group_type_index]]:[te.a.PersonProperties,te.a.Cohorts]}],parsedSecondaryMetrics:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var l=(a==null?void 0:a.secondary_metrics)||(r==null?void 0:r.secondary_metrics)||[];return l}],minimumDetectableChange:[function(a){return[a.newExperimentData]},function(a){var r;return(a==null||(r=a.parameters)===null||r===void 0?void 0:r.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){return Math.ceil(1600*r*(1-r/100)/(a*a))}}],areResultsSignificant:[function(a){return[a.experimentResults]},function(a){return(a==null?void 0:a.significant)||!1}],significanceBannerDetails:[function(a){return[a.experimentResults]},function(a){if((a==null?void 0:a.significance_code)===O.E.HighLoss){var r;return n.a.createElement(n.a.Fragment,null,"This is because the expected loss in conversion is greater than 1%",n.a.createElement(Tt.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(r=((a==null?void 0:a.expected_loss)||0)*100)===null||r===void 0?void 0:r.toFixed(2),"%")},n.a.createElement(jt.a,{style:{padding:"4px 2px"}})),".")}if((a==null?void 0:a.significance_code)===O.E.HighPValue){var l;return n.a.createElement(n.a.Fragment,null,"This is because the p value is greater than 0.05",n.a.createElement(Tt.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(a==null||(l=a.p_value)===null||l===void 0?void 0:l.toFixed(3))||1,".")},n.a.createElement(jt.a,{style:{padding:"4px 2px"}})),".")}return(a==null?void 0:a.significance_code)===O.E.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(a==null?void 0:a.significance_code)===O.E.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){var l=r*a/100,i=r,g=l+r;return parseFloat((4/Math.pow(Math.sqrt(i/Vt)-Math.sqrt(g/Vt),2)).toFixed(1))}}],expectedRunningTime:[function(){return[]},function(){return function(a,r){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vt;return parseFloat((r/(a/l)).toFixed(1))}}],conversionRateForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var l="Can't find variant";if(!a)return l;var i=(a==null?void 0:a.insight).find(function(g){var j,b;return((j=g[0])===null||j===void 0||(b=j.breakdown_value)===null||b===void 0?void 0:b[0])===r});return i?(i[i.length-1].count/i[0].count*100).toFixed(1):l}}],getIndexForVariant:[function(a){return[a.experimentResults]},function(a){return function(r,l){if(!a)return 0;var i=-1;return l===O.s.FUNNELS?i=P()(a==null?void 0:a.insight).sort(function(g,j){var b,d;return((b=j[0])===null||b===void 0?void 0:b.count)-((d=g[0])===null||d===void 0?void 0:d.count)}).findIndex(function(g){var j,b;return((j=g[0])===null||j===void 0||(b=j.breakdown_value)===null||b===void 0?void 0:b[0])===r}):i=(a==null?void 0:a.insight).findIndex(function(g){return g.breakdown_value===r}),i===-1?0:i}}],countDataForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var l="Can't find variant";if(!a)return l;var i=(a==null?void 0:a.insight).find(function(g){return g.breakdown_value===r});return i?i.count.toString():l}}],highestProbabilityVariant:[function(a){return[a.experimentResults]},function(a){if(a){var r=Math.max.apply(Math,P()(Object.values(a.probability)));return Object.keys(a.probability).find(function(l){return Math.abs(a.probability[l]-r)<Number.EPSILON})}}],areTrendResultsConfusing:[function(a){return[a.experimentResults,a.highestProbabilityVariant]},function(a,r){if(!a)return!1;var l=(a==null?void 0:a.insight).reduce(function(i,g){return g.count>i.count?g:i},{count:0,breakdown_value:""});return l.count?l.breakdown_value!==r:!1}]},urlToAction:function(r){var l=r.actions,i=r.values,g=r.props;return{"/experiments/:id":function(b){var d=b.id;if(!i.hasAvailableFeature(O.c.EXPERIMENTATION)){vt.router.actions.push("/experiments");return}if(d){var T=d==="new"?"new":parseInt(d);T==="new"&&(l.createNewExperimentInsight(),l.resetNewExperiment(),l.setSecondaryMetrics([])),l.setEditExperiment(!1),T!=="new"&&T===g.experimentId&&l.loadExperiment()}}}}});function Rn(a){var r=Math.round(100/a),l=r*a,i=l-100,g=new Array(a).fill(r);return g[a-1]=r-i,g}var gn=t("./frontend/src/scenes/insights/InsightContainer.tsx"),Bt=t("./frontend/src/lib/components/icons.tsx"),wn=t("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),Qt=t("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),hn=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),We=t("./frontend/src/lib/components/CopyToClipboard.tsx"),Y=t("./frontend/src/lib/utils.tsx"),Ze=t("./frontend/src/scenes/funnels/funnelUtils.ts"),cn=t("./node_modules/antd/es/modal/index.js"),It=t("./node_modules/antd/es/button/index.js"),ga=t("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js");function Cn(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),l.push.apply(l,i)}return l}function Yt(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?Cn(Object(l),!0).forEach(function(i){$e()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Cn(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}var Xn=14,Sn={name:"",filters:{insight:O.s.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},ha={name:"",filters:{insight:O.s.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:Oe.k.horizontal}},Ea=Object(Se.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[At.a,["currentTeamId"]]},actions:{setSecondaryMetrics:function(r){return{secondaryMetrics:r}},createNewMetric:!0,addNewMetric:function(r){return{metric:r}},updateMetricFilters:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setPreviewInsightId:function(r){return{shortId:r}},createPreviewInsight:function(r){return{filters:r}},showModal:!0,hideModal:!1,changeInsightType:function(r){return{type:r}},setCurrentMetricName:function(r){return{name:r}},deleteMetric:function(r){return{metricId:r}}},loaders:function(r){var l=r.values;return{experiments:[[],{loadExperiments:function(){var i=Ue()(W.a.mark(function j(){var b;return W.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,ct.b.get("api/projects/".concat(l.currentTeamId,"/experiments"));case 2:return b=T.sent,T.abrupt("return",b.results);case 4:case"end":return T.stop()}},j)}));function g(){return i.apply(this,arguments)}return g}()}]}},reducers:function(r){var l=r.props;return{previewInsightId:[null,{setPreviewInsightId:function(g,j){var b=j.shortId;return b}}],metrics:[l.initialMetrics,{addNewMetric:function(g,j){var b=j.metric;return[].concat(P()(g),[Yt({},b)])},deleteMetric:function(g,j){var b=j.metricId;return g.filter(function(d,T){return T!==b})}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1}}],currentMetricName:["",{setCurrentMetricName:function(g,j){var b=j.name;return b}}],currentMetric:[Sn,{changeInsightType:function(g,j){var b=j.type;return b===O.s.TRENDS?Sn:g.filters.insight===O.s.TRENDS?ha:Sn},updateMetricFilters:function(g,j){var b=j.filters;return Yt(Yt({},g),{},{filters:b})}}]}},listeners:function(r){var l=r.actions,i=r.values,g=r.props;return{createPreviewInsight:function(){var j=Ue()(W.a.mark(function d(T){var f,re,oe,Me;return W.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return f=T.filters,(f==null?void 0:f.insight)===O.s.FUNNELS?re=Object(ft.a)(Yt({insight:O.s.FUNNELS,funnel_viz_type:O.o.Steps,display:O.d.FunnelViz,date_from:Object(ye.a)().subtract(Xn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ye.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:Oe.k.horizontal},f)):re=Object(ft.a)(Yt({insight:O.s.TRENDS,date_from:Object(ye.a)().subtract(Xn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ye.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},f)),oe={description:"",tags:[],filters:re,result:null},V.next=5,ct.b.create("api/projects/".concat(At.a.values.currentTeamId,"/insights"),oe);case 5:Me=V.sent,l.setPreviewInsightId(Me.short_id);case 7:case"end":return V.stop()}},d)}));function b(d){return j.apply(this,arguments)}return b}(),setFilters:function(b){var d=b.filters;if(d.insight===O.s.FUNNELS){var T;(T=o.a.findMounted({dashboardItemId:i.previewInsightId}))===null||T===void 0||T.actions.setFilters(d)}else{var f;(f=Ae.a.findMounted({dashboardItemId:i.previewInsightId}))===null||f===void 0||f.actions.setFilters(d)}},createNewMetric:function(){l.addNewMetric(Yt(Yt({},i.currentMetric),{},{name:i.currentMetricName})),g.onMetricsChange(i.metrics),l.changeInsightType(O.s.TRENDS),l.setCurrentMetricName("")},deleteMetric:function(){g.onMetricsChange(i.metrics)},changeInsightType:function(){return l.createPreviewInsight(i.currentMetric.filters)}}},events:function(r){var l=r.actions;return{afterMount:function(){l.createPreviewInsight()}}}}),ht=t("./frontend/src/lib/components/LemonButton/index.ts"),Kt=t("./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function $t(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),l.push.apply(l,i)}return l}function Zt(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?$t(Object(l),!0).forEach(function(i){$e()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):$t(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}function Pn(a){var r=a.onMetricsChange,l=a.initialMetrics,i=Ea({onMetricsChange:r,initialMetrics:l}),g=Object(Se.useValues)(i),j=g.previewInsightId,b=g.metrics,d=g.modalVisible,T=g.currentMetric,f=Object(Se.useActions)(i),re=f.createNewMetric,oe=f.updateMetricFilters,Me=f.setFilters,K=f.showModal,V=f.hideModal,v=f.changeInsightType,Fe=f.setCurrentMetricName,Rt=f.deleteMetric,Ut=Object(Se.useValues)(Object(_.c)({dashboardItemId:j,syncWithUrl:!1})),qt=Ut.insightProps,H=Object(Se.useValues)(Object(o.a)(qt)),en=H.isStepsEmpty,Ht=H.filterSteps;return n.a.createElement(n.a.Fragment,null,n.a.createElement(cn.a,{title:"Add secondary metric",visible:d,destroyOnClose:!0,onCancel:V,footer:null,style:{minWidth:600}},n.a.createElement(F.a,{layout:"vertical",initialValues:{type:O.s.TRENDS},onValuesChange:function(rt){rt.name&&Fe(rt.name)},onFinish:function(){re(),V()},scrollToFirstError:!0,requiredMark:!1},n.a.createElement(F.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(ie.a,null)),n.a.createElement(F.a.Item,{name:"type",label:"Type"},n.a.createElement(ve.a,{style:{display:"flex"},value:T.filters.insight,onChange:function(){v()},suffixIcon:n.a.createElement(Qt.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(ve.a.Option,{value:O.s.TRENDS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(ve.a.Option,{value:O.s.FUNNELS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel")))))),n.a.createElement(F.a.Item,{name:"query",label:"Query"},n.a.createElement(Ge.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},T.filters.insight===O.s.FUNNELS&&n.a.createElement(Q.a,{filters:T.filters,setFilters:function(rt){var wt=Zt(Zt({},T.filters),{},{insight:O.s.FUNNELS},rt);oe(wt),Me(wt)},typeKey:"funnel-preview-metric",mathAvailability:Kt.b.None,hideDeleteBtn:Ht.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!en,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[te.a.EventProperties,te.a.PersonProperties,te.a.Cohorts,te.a.Elements],rowClassName:"action-filters-bordered"}),T.filters.insight===O.s.TRENDS&&n.a.createElement(Q.a,{entitiesLimit:1,horizontalUI:!0,filters:T.filters,setFilters:function(rt){var wt=Zt(Zt({},T.filters),{},{insight:O.s.TRENDS},rt);oe(wt),Me(wt)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,propertiesTaxonomicGroupTypes:[te.a.EventProperties,te.a.PersonProperties,te.a.Cohorts,te.a.Elements]}))),n.a.createElement(F.a.Item,{name:"metric-preview",label:"Metric preview"},n.a.createElement(Se.BindLogic,{logic:_.c,props:qt},n.a.createElement(gn.a,{disableHeader:!0,disableTable:!0}))),n.a.createElement(y.a,{justify:"end"},n.a.createElement(ht.a,{type:"secondary",className:"mr-05",onClick:function(){return V()}},"Cancel"),n.a.createElement(ht.a,{type:"primary",htmlType:"submit"},"Save")))),n.a.createElement(y.a,null,n.a.createElement(h.a,null,b.map(function(ce,rt){return n.a.createElement(y.a,{key:rt,className:"mt"},n.a.createElement(y.a,{align:"middle",className:"full-width border-all",style:{padding:8}},n.a.createElement("div",{style:{fontWeight:500}},"Name")," ",n.a.createElement("div",{className:"metric-name"},ce.name),n.a.createElement(ga.a,{className:"text-danger",style:{padding:8},onClick:function(){return Rt(rt)}})),n.a.createElement(Ge.a,{className:"full-width",style:{borderTop:"none"},bodyStyle:{padding:0}},ce.filters.insight===O.s.FUNNELS&&n.a.createElement(Q.a,{filters:ce.filters,setFilters:function(Gt){var Ft=Zt(Zt({},ce.filters),{},{insight:O.s.FUNNELS},Gt);oe(Ft),Me(Ft)},typeKey:"funnel-preview-".concat(rt),mathAvailability:Kt.b.None,hideDeleteBtn:Ht.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!en,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[te.a.EventProperties,te.a.PersonProperties,te.a.Cohorts,te.a.Elements],rowClassName:"action-filters-bordered",readOnly:!0}),ce.filters.insight===O.s.TRENDS&&n.a.createElement(Q.a,{horizontalUI:!0,filters:ce.filters,setFilters:function(Gt){var Ft=Zt(Zt({},ce.filters),{},{insight:O.s.TRENDS},Gt);oe(Ft),Me(Ft)},typeKey:"trend-preview-".concat(rt),buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[te.a.EventProperties,te.a.PersonProperties,te.a.Cohorts,te.a.Elements],readOnly:!0})))}),b&&!(b.length>2)&&n.a.createElement(h.a,null,n.a.createElement("div",{className:"mb-05 mt"},n.a.createElement(It.a,{style:{color:"var(--primary)",minWidth:240},onClick:K},"Add metric"))))))}try{Pn.displayName="SecondaryMetrics",Pn.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:Pn.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(a){}var Qn=t("./frontend/src/lib/colors.ts"),ya=t("./frontend/src/lib/components/EntityFilterInfo.tsx"),ba=t("./frontend/src/lib/components/EditableField/EditableField.tsx"),Tn=t("./frontend/src/lib/components/Link.tsx"),an=t("./frontend/src/lib/logic/featureFlagLogic.ts"),Oa=t("./node_modules/antd/es/slider/index.js"),En=t("./node_modules/antd/es/input-number/index.js"),xa=t("./frontend/src/lib/components/InsightLabel/index.tsx"),_n=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function Vn(){var a=Object(Qe.useState)(!1),r=U()(a,2),l=r[0],i=r[1],g=Object(Qe.useState)(!1),j=U()(g,2),b=j[0],d=j[1];return n.a.createElement(Ge.a,{className:"experiment-workflow",title:n.a.createElement("span",{className:"card-secondary"},"Experiment workflow")},n.a.createElement(y.a,null,n.a.createElement(h.a,{className:"exp-workflow-step step-completed full-width"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(Bt.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),n.a.createElement("b",{className:"ml-05"},"Create experiment")),n.a.createElement("div",{className:"ml-2"},"Set variants, select participants, and add secondary metrics"))),n.a.createElement(y.a,null,n.a.createElement(h.a,{className:"full-width exp-workflow-step ".concat(l?"step-completed":""),onClick:function(){return i(!l)}},n.a.createElement(y.a,{align:"middle"},l?n.a.createElement(Bt.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(Bt.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Validate experiment")),n.a.createElement("div",{className:"ml-2"},"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."))),n.a.createElement(y.a,null,n.a.createElement(h.a,{className:"full-width exp-workflow-step ".concat(b?"step-completed":""),onClick:function(){return d(!b)}},n.a.createElement(y.a,{align:"middle"},b?n.a.createElement(Bt.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(Bt.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Launch experiment")),n.a.createElement("div",{className:"ml-2"},"Run your experiment, monitor results, and decide when to terminate your experiment."))))}function In(a){var r,l,i,g,j,b,d=a.experiment,T=a.trendCount,f=a.funnelConversionRate,re=a.trendExposure,oe=a.funnelSampleSize,Me=a.funnelEntrants,K=(d==null?void 0:d.id)||"new",V=Object(Se.useValues)(on({experimentId:K})),v=V.experimentInsightType,Fe=V.editingExistingExperiment,Rt=V.minimumDetectableChange,Ut=V.expectedRunningTime,qt=V.aggregationLabel,H=Object(Se.useActions)(on({experimentId:K})),en=H.setNewExperimentData,Ht=v===O.s.FUNNELS&&100-f<50?100-f:50,ce=Object(ye.a)().diff(Object(ye.a)(d==null?void 0:d.start_date),"hour"),rt=0;d!=null&&d.start_date?rt=Ut(Me||1,oe||0,ce):rt=Ut(Me||1,oe||0);var wt=Object(ye.a)(d==null?void 0:d.start_date).add(rt,"hour"),Gt=!(d!=null&&d.end_date)&&ce>=24&&Me&&oe,Ft=Object(Y.s)(d==null||(r=d.filters)===null||r===void 0?void 0:r.properties);return n.a.createElement(y.a,null,n.a.createElement(h.a,{span:!(d!=null&&d.start_date)&&K!=="new"&&!Fe?12:24},K==="new"&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("b",null,"Experiment preview")),n.a.createElement("div",{className:"text-muted"},"Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "))),(K==="new"||Fe)&&n.a.createElement(y.a,{className:"mb"},n.a.createElement(h.a,{span:24},n.a.createElement("div",null,n.a.createElement("b",null,"Minimum acceptable improvement"),n.a.createElement(_e.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept."},n.a.createElement(jt.a,{style:{marginLeft:4}}))),n.a.createElement(y.a,{className:"mde-slider"},n.a.createElement(h.a,{span:8},n.a.createElement(Oa.a,{defaultValue:5,value:Rt,min:1,max:Ht,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:function(Et){en({parameters:{minimum_detectable_effect:Et}})},tipFormatter:function(Et){return"".concat(Et,"%")}})),n.a.createElement(En.a,{min:1,max:Ht,defaultValue:5,formatter:function(Et){return"".concat(Et,"%")},style:{margin:"0 16px"},value:Rt,onChange:function(Et){en({parameters:{minimum_detectable_effect:Et}})}})))),n.a.createElement(y.a,{className:"experiment-preview-row ".concat(d!=null&&d.start_date?"mr":"")},v===O.s.TRENDS?n.a.createElement(n.a.Fragment,null,!(d!=null&&d.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Baseline Count"),n.a.createElement("div",{className:"l4"},Object(Y.O)(T||0))),n.a.createElement(h.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Count"),n.a.createElement("div",{className:"l4"},Object(Y.O)(T+Math.ceil(T*(Rt/100))||0)))),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(Y.O)(re||0))," days"))):n.a.createElement(n.a.Fragment,null,!(d!=null&&d.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Baseline Conversion Rate"),n.a.createElement("div",{className:"l4"},f.toFixed(1),"%")),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Conversion Rate"),n.a.createElement("div",{className:"l4"},(f+Rt).toFixed(1),"%"))),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended Sample Size"),n.a.createElement("div",{className:"pb"},n.a.createElement("span",{className:"l4"},"~",Object(Y.O)(oe||0))," persons")),!(d!=null&&d.start_date)&&n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(Y.O)(rt||0))," days"))),n.a.createElement(y.a,{className:"full-width mt"},n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Experiment variants"),n.a.createElement("ul",{className:"variants-list"},d==null||(l=d.parameters)===null||l===void 0||(i=l.feature_flag_variants)===null||i===void 0?void 0:i.map(function(lt,Et){return n.a.createElement("li",{key:Et},lt.key)}))),n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Participants"),n.a.createElement("div",null,Ft!=null&&Ft.length?n.a.createElement("div",null,Ft==null?void 0:Ft.map(function(lt){return n.a.createElement(_n.c,{key:lt.key,item:lt,style:{margin:2,cursor:"default"}})})):n.a.createElement(n.a.Fragment,null,"100% of"," ",(d==null||(g=d.filters)===null||g===void 0?void 0:g.aggregation_group_type_index)!=null?Object(Y.j)(qt(d.filters.aggregation_group_type_index).plural):"users")))),n.a.createElement(y.a,{className:"full-width"},K!=="new"&&!Fe&&n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Start date"),d!=null&&d.start_date?n.a.createElement("span",null,Object(ye.a)(d==null?void 0:d.start_date).format("D MMM YYYY")):n.a.createElement("span",{className:"description"},"Not started yet")),v===O.s.FUNNELS&&Gt?n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Expected end date"),n.a.createElement("span",null,wt.isAfter(Object(ye.a)())?wt.format("D MMM YYYY"):Object(ye.a)().format("D MMM YYYY"))):null,(d==null?void 0:d.end_date)&&n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Completed date"),n.a.createElement("span",null,Object(ye.a)(d==null?void 0:d.end_date).format("D MMM YYYY"))))),K!=="new"&&!Fe&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement(h.a,null,n.a.createElement("div",{className:"card-secondary mb-05"},v===O.s.FUNNELS?"Conversion goal steps":"Trend goal"),[].concat(P()((d==null||(j=d.filters)===null||j===void 0?void 0:j.events)||[]),P()((d==null||(b=d.filters)===null||b===void 0?void 0:b.actions)||[])).sort(function(lt,Et){return(lt.order||0)-(Et.order||0)}).map(function(lt,Et){var Nn;return n.a.createElement(h.a,{key:Et,className:"mb-05"},n.a.createElement(y.a,{style:{marginBottom:4}},n.a.createElement("div",{className:"preview-conversion-goal-num"},v===O.s.FUNNELS?(lt.order||0)+1:Et+1),n.a.createElement("b",null,n.a.createElement(xa.b,{action:lt,showCountedByTag:v===O.s.TRENDS,hideIcon:!0}))),(Nn=lt.properties)===null||Nn===void 0?void 0:Nn.map(function(Fn){return n.a.createElement(_n.c,{key:Fn.key,item:Fn})}))})))),K!=="new"&&!Fe&&!(d!=null&&d.start_date)&&n.a.createElement(h.a,{span:12,className:"pl"},n.a.createElement(Vn,null)))}try{In.displayName="ExperimentPreview",In.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:In.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(a){}var Bn=t("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx");function Nt(a){var r,l,i,g=a.experiment,j=Object(Qe.useState)("control"),b=U()(j,2),d=b[0],T=b[1];return n.a.createElement(Ge.a,{title:n.a.createElement("span",{className:"card-secondary"},"Feature flag usage and implementation"),className:"experiment-implementation-details"},n.a.createElement(y.a,{justify:"space-between",className:"mb-05"},n.a.createElement("div",null,n.a.createElement("span",{className:"mr-05"},"Variant group"),n.a.createElement(ve.a,{onChange:T,defaultValue:"control",suffixIcon:n.a.createElement(Qt.a,null)},g==null||(r=g.parameters)===null||r===void 0||(l=r.feature_flag_variants)===null||l===void 0?void 0:l.map(function(f,re){return n.a.createElement(ve.a.Option,{key:re,value:f.key},f.key)}))),n.a.createElement("div",null,n.a.createElement(qn,null))),n.a.createElement("b",null,"Implement your experiment in code"),n.a.createElement(Bn.a,{language:Bn.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat((i=g==null?void 0:g.feature_flag_key)!==null&&i!==void 0?i:"","') === '").concat(d,`') {
    // where '`).concat(d,`' is the variant, run your code here
}`)),n.a.createElement("b",null,"Test that it works"),n.a.createElement(Bn.a,{language:Bn.b.JavaScript},"posthog.feature_flags.override({'".concat(g==null?void 0:g.feature_flag_key,"': '").concat(d,"'})")),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://posthog.com/docs/user-guides/feature-flags"},n.a.createElement(y.a,{align:"middle"},"Experiment implementation guide",n.a.createElement(Bt.IconOpenInNew,{className:"ml-05"}))))}try{Nt.displayName="ExperimentImplementationDetails",Nt.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:Nt.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(a){}function ja(a,r){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);r&&(i=i.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),l.push.apply(l,i)}return l}function yn(a){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?ja(Object(l),!0).forEach(function(i){$e()(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ja(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}var Zn={component:bn,logic:on,paramsToProps:function(r){var l=r.params.id;return{experimentId:l==="new"?"new":parseInt(l)}}};function bn(){var a,r,l,i,g,j,b,d,T,f,re,oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Me=oe.id,K=Object(Se.useValues)(on({experimentId:Me})),V=K.newExperimentData,v=K.experimentData,Fe=K.experimentInsightId,Rt=K.minimumSampleSizePerVariant,Ut=K.recommendedExposureForCountData,qt=K.variants,H=K.experimentResults,en=K.countDataForVariant,Ht=K.editingExistingExperiment,ce=K.experimentInsightType,rt=K.experimentResultsLoading,wt=K.parsedSecondaryMetrics,Gt=K.areResultsSignificant,Ft=K.conversionRateForVariant,lt=K.getIndexForVariant,Et=K.significanceBannerDetails,Nn=K.areTrendResultsConfusing,Fn=K.taxonomicGroupTypesForSelection,Kn=K.groupTypes,Ca=K.aggregationLabel,nt=K.secondaryMetricResults,ea=K.experimentDataLoading,Sa=K.secondaryMetricResultsLoading,Dt=Object(Se.useActions)(on({experimentId:Me})),dn=Dt.setNewExperimentData,ta=Dt.createExperiment,na=Dt.launchExperiment,Wt=Dt.setFilters,Pa=Dt.setEditExperiment,On=Dt.endExperiment,un=Dt.addExperimentGroup,mn=Dt.updateExperiment,Ta=Dt.updateExperimentGroup,aa=Dt.removeExperimentGroup,Un=Dt.setSecondaryMetrics,wa=Dt.setExperimentInsightType,_a=Dt.archiveExperiment,Ia=Object(Se.useValues)(an.a),rn=Ia.featureFlags,sn=F.a.useForm(),ra=U()(sn,1),Na=ra[0],Fa=Object(Qe.useState)(!0),sa=U()(Fa,2),Wn=sa[0],kn=sa[1],la=Object(Se.useValues)(Object(_.c)({dashboardItemId:Fe})),xn=la.insightProps,Dn=Object(Se.useValues)(Object(o.a)(xn)),Va=Dn.isStepsEmpty,Da=Dn.filterSteps,zn=Dn.filters,Yn=Dn.results,Ma=Dn.conversionMetrics,oa=Object(Se.useValues)(Object(Ae.a)(xn)),Mn=oa.filters,La=oa.results,$n=Ma.totalRate*100,Aa=Rt($n),Hn=Aa*qt.length,Gn=(a=La[0])===null||a===void 0?void 0:a.count,ia=Yn==null||(r=Yn[0])===null||r===void 0?void 0:r.count,ca=Ut(Gn),jn=Math.floor(24/(qt.length+2)),Ln=ce===O.s.FUNNELS&&(H==null?void 0:H.insight)?H.insight.reduce(function(G,J){var st;return((st=J[0])===null||st===void 0?void 0:st.count)+G},0):0,da=ce===O.s.FUNNELS?(Ln||0)/((v==null||(l=v.parameters)===null||l===void 0?void 0:l.recommended_sample_size)||1)*100:Object(ye.a)().diff(v==null?void 0:v.start_date,"day")/((v==null||(i=v.parameters)===null||i===void 0?void 0:i.recommended_running_time)||1)*100,Jn={running:"green",draft:"default",complete:"purple"},Ra=function(){if(v!=null&&v.start_date){if(!(v!=null&&v.end_date))return"running"}else return"draft";return"complete"},Ba=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return n.a.createElement(n.a.Fragment,null,Me==="new"||Ht?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8}},n.a.createElement(bt.a,{title:"New experiment"}),n.a.createElement(y.a,null,n.a.createElement(ht.a,{type:"secondary",className:"mr-05",onClick:function(){return vt.router.actions.push(Te.a.experiments())}},"Cancel"),n.a.createElement(ht.a,{type:"primary",htmlType:"submit",form:"new-experiment"},"Save"))),n.a.createElement(F.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:Na,onValuesChange:function(J){return dn(J)},initialValues:{name:V==null?void 0:V.name,feature_flag_key:V==null?void 0:V.feature_flag_key,description:V==null?void 0:V.description},onFinish:function(){return ta(!0,ca,Hn)},requiredMark:!1,scrollToFirstError:!0},n.a.createElement("div",null,n.a.createElement(Se.BindLogic,{logic:_.c,props:xn},n.a.createElement(y.a,null,n.a.createElement(h.a,{span:12,style:{paddingRight:24}},n.a.createElement(y.a,{className:"full-width"},n.a.createElement(F.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(ie.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})),n.a.createElement(F.a.Item,{style:{marginBottom:"1rem"},label:n.a.createElement("div",null,"Feature flag key"," ",n.a.createElement(_e.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment."},n.a.createElement(jt.a,null))),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}]},n.a.createElement(ie.a,{"data-attr":"experiment-feature-flag-key",disabled:Ht}))),n.a.createElement(F.a.Item,{label:n.a.createElement("div",null,"Description ",n.a.createElement("span",{className:"text-muted"},"(optional)")),name:"description"},n.a.createElement(ie.a.TextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})),(V==null||(g=V.parameters)===null||g===void 0?void 0:g.feature_flag_variants)&&n.a.createElement(h.a,null,n.a.createElement("label",null,n.a.createElement("b",null,"Experiment variants")),n.a.createElement("div",{className:"text-muted"},"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."),n.a.createElement(h.a,{className:"variants"},V.parameters.feature_flag_variants.map(function(G,J){return n.a.createElement(F.a,{key:"".concat(G,"-").concat(J),initialValues:{key:G.key},onValuesChange:function(Mt){Ta(Mt,J)}},n.a.createElement(y.a,{key:"".concat(G,"-").concat(J),className:"feature-flag-variant ".concat(J===0?"border-top":J>=3?"border-bottom":"")},n.a.createElement("div",{className:"variant-label",style:yn({},Ba[J])},J===0?"Control":"Test"),n.a.createElement(F.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:n.a.createElement(n.a.Fragment,null,n.a.createElement(wn.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores.")}],style:{display:"contents"}},n.a.createElement(ie.a,{disabled:J===0,"data-attr":"feature-flag-variant-key","data-key-index":J.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(J+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})),n.a.createElement("div",{className:"float-right"},!(J===0||J===1)&&n.a.createElement(_e.a,{title:"Delete this variant",placement:"bottomLeft"},n.a.createElement(ht.a,{type:"primary-alt",compact:!0,icon:n.a.createElement(Bt.IconDelete,null),onClick:function(){return aa(J)}})))))}),V.parameters.feature_flag_variants.length<4&&n.a.createElement("div",{className:"feature-flag-variant border-bottom"},n.a.createElement(ht.a,{onClick:function(){return un()},fullWidth:!0,icon:n.a.createElement(Bt.IconPlusMini,null)},"Add test variant")))),n.a.createElement(y.a,{className:"person-selection"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("strong",null,"Select participants")),n.a.createElement(h.a,null,n.a.createElement("div",{className:"text-muted"},"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."),n.a.createElement("div",{className:"mt mb-05"},n.a.createElement("strong",null,"Participant type")),n.a.createElement(ve.a,{value:(V==null||(j=V.filters)===null||j===void 0?void 0:j.aggregation_group_type_index)!=null?V.filters.aggregation_group_type_index:-1,onChange:function(J){var st,Mt=J!==-1?J:void 0;Mt!=(V==null||(st=V.filters)===null||st===void 0?void 0:st.aggregation_group_type_index)&&(Wt({properties:[],aggregation_group_type_index:Mt}),dn({filters:{aggregation_group_type_index:Mt,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1},n.a.createElement(ve.a.Option,{key:-1,value:-1},"Persons"),Kn.map(function(G){return n.a.createElement(ve.a.Option,{key:G.group_type_index,value:G.group_type_index},Object(Y.j)(Ca(G.group_type_index).plural))})),n.a.createElement("div",{className:"mt"},n.a.createElement("strong",null,"Filters")),n.a.createElement(Xe.a,{pageKey:"experiment-participants-property",propertyFilters:ce===O.s.FUNNELS?Object(Y.s)(zn.properties):Object(Y.s)(Mn.properties),onChange:function(J){dn({filters:{properties:J}}),Wt({properties:J.filter(at.b)})},taxonomicGroupTypes:Fn})))),n.a.createElement(y.a,{className:"metrics-selection"},n.a.createElement(h.a,{span:12},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Goal type"),n.a.createElement("div",{className:"text-muted"},ce===O.s.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events")),n.a.createElement(ve.a,{style:{display:"flex"},value:ce,onChange:wa,suffixIcon:n.a.createElement(Qt.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(ve.a.Option,{value:O.s.TRENDS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(ve.a.Option,{value:O.s.FUNNELS},n.a.createElement(h.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel"))))),n.a.createElement("div",{className:"mb mt"},n.a.createElement("b",null,"Experiment goal"),ce===O.s.TRENDS&&n.a.createElement("div",{className:"text-muted"},"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment.")),n.a.createElement(y.a,null,n.a.createElement(Ge.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},ce===O.s.FUNNELS&&n.a.createElement(Q.a,{filters:zn,setFilters:function(J){dn({filters:J}),Wt(J)},typeKey:"EditFunnel-action",mathAvailability:Kt.b.None,hideDeleteBtn:Da.length===1,buttonCopy:"Add funnel step",buttonType:"link",showSeriesIndicator:!Va,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[te.a.EventProperties,te.a.PersonProperties,te.a.Cohorts,te.a.Elements],rowClassName:"action-filters-bordered"}),ce===O.s.TRENDS&&n.a.createElement(Q.a,{horizontalUI:!0,filters:Mn,setFilters:function(J){dn({filters:J}),Wt(J)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[te.a.EventProperties,te.a.PersonProperties,te.a.Cohorts,te.a.Elements],customRowPrefix:Mn.insight===O.s.LIFECYCLE?n.a.createElement(n.a.Fragment,null,"Showing ",n.a.createElement("b",null,"Unique users")," who did"):void 0}))),rn[Oe.i.EXPERIMENTS_SECONDARY_METRICS]&&n.a.createElement(h.a,{className:"secondary-metrics"},n.a.createElement("div",null,n.a.createElement("b",null,"Secondary metrics"),n.a.createElement("span",{className:"text-muted ml-05"},"(optional)")),n.a.createElement("div",{className:"text-muted",style:{marginTop:4}},"Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "),n.a.createElement(Pn,{onMetricsChange:function(J){return Un(J)},initialMetrics:wt}))),n.a.createElement(h.a,{span:12,className:"pl"},n.a.createElement("div",{className:"card-secondary mb"},"Goal preview"),n.a.createElement(gn.a,{disableHeader:ce===O.s.TRENDS,disableTable:!0})))),n.a.createElement(y.a,null,n.a.createElement(Ge.a,{className:"experiment-preview"},n.a.createElement(In,{experiment:V,trendCount:Gn,trendExposure:ca,funnelSampleSize:Hn,funnelEntrants:ia,funnelConversionRate:$n}))))),n.a.createElement(ht.a,{className:"float-right",type:"primary",htmlType:"submit"},"Save"))):!ea&&v?n.a.createElement("div",{className:"view-experiment"},n.a.createElement(y.a,{className:"draft-header"},n.a.createElement(y.a,{justify:"space-between",align:"middle",className:"full-width pb"},n.a.createElement(h.a,null,n.a.createElement(y.a,null,n.a.createElement(bt.a,{style:{paddingRight:8},title:"".concat(v==null?void 0:v.name),buttons:n.a.createElement(n.a.Fragment,null,n.a.createElement(We.a,{explicitValue:v.feature_flag_key,iconStyle:{color:"var(--text-muted-alt)"}},n.a.createElement("span",{className:"text-muted"},v.feature_flag_key)),n.a.createElement(w.a,{style:{alignSelf:"center"},color:Jn[Ra()]},n.a.createElement("b",{className:"uppercase"},Ra())),H&&v.end_date&&n.a.createElement(w.a,{style:{alignSelf:"center"},color:Gt?"green":"geekblue"},n.a.createElement("b",{className:"uppercase"},Gt?"Significant Results":"Results not significant")))})),n.a.createElement("span",{className:"exp-description"},v.start_date?n.a.createElement(ba.a,{multiline:!0,name:"description",value:v.description||"",placeholder:"Description (optional)",onSave:function(J){return mn({description:J})},maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):n.a.createElement(n.a.Fragment,null,v.description||"There is no description for this experiment."))),v&&!v.start_date&&n.a.createElement("div",{className:"flex-center"},n.a.createElement(ht.a,{type:"secondary",className:"mr-05",onClick:function(){return Pa(!0)}},"Edit"),n.a.createElement(ht.a,{type:"primary",onClick:function(){return na()}},"Launch")),v&&v.start_date&&!v.end_date&&n.a.createElement(ht.a,{type:"secondary",status:"danger",onClick:function(){return On()}},"Stop"),(v==null?void 0:v.end_date)&&Object(ye.a)().isSameOrAfter(Object(ye.a)(v.end_date),"day")&&!v.archived&&n.a.createElement(ht.a,{type:"secondary",status:"danger",onClick:function(){return _a()}},n.a.createElement("b",null,"Archive")))),n.a.createElement(y.a,null,Wn&&H&&Gt&&!v.end_date&&n.a.createElement(y.a,{align:"middle",className:"significant-results"},n.a.createElement(h.a,{span:20,style:{fontWeight:500,color:"#497342"}},n.a.createElement("div",null,"Experiment results are significant."," ",v.end_date?"":"You can end your experiment now or let it run until complete.")),n.a.createElement(h.a,{span:4},v.end_date?n.a.createElement(hn.a,{className:"close-button",onClick:function(){return kn(!1)}}):n.a.createElement(ht.a,{type:"highlighted",className:"end-experiment-btn",onClick:function(){return On()}},"End experiment"))),Wn&&H&&!Gt&&!v.end_date&&n.a.createElement(y.a,{align:"top",className:"not-significant-results"},n.a.createElement(h.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"}},n.a.createElement("strong",null,"Your results are not statistically significant"),"."," ",Et," ",v!=null&&v.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",n.a.createElement("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations"}," ","experimentation guide"," "),"for more information."," "),n.a.createElement(h.a,{span:1},n.a.createElement(hn.a,{className:"close-button",onClick:function(){return kn(!1)}}))),Wn&&v.end_date&&n.a.createElement(y.a,{align:"top",className:"feature-flag-mods"},n.a.createElement(h.a,{span:23,style:{fontWeight:500}},n.a.createElement("strong",null,"Your experiment is complete.")," We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",n.a.createElement(Tn.a,{to:v.feature_flag?Te.a.featureFlag(v.feature_flag):void 0},n.a.createElement("b",null,"Adjust feature flag distribution"))),n.a.createElement(h.a,{span:1},n.a.createElement(hn.a,{className:"close-button",onClick:function(){return kn(!1)}})))),n.a.createElement(y.a,null,n.a.createElement(k.a,{className:"full-width",defaultActiveKey:"experiment-details"},n.a.createElement(k.a.Panel,{header:n.a.createElement("b",null,"Experiment details"),key:"experiment-details"},n.a.createElement(y.a,null,n.a.createElement(h.a,{span:v!=null&&v.start_date?12:24},n.a.createElement(In,{experiment:v,trendCount:Gn,trendExposure:v==null?void 0:v.parameters.recommended_running_time,funnelSampleSize:v==null?void 0:v.parameters.recommended_sample_size,funnelConversionRate:$n,funnelEntrants:v!=null&&v.start_date?Ln:ia})),!rt&&!H&&v.start_date&&n.a.createElement(h.a,{span:12},n.a.createElement(Nt,{experiment:v})),(H||((b=v.secondary_metrics)===null||b===void 0?void 0:b.length)>0)&&n.a.createElement(h.a,{className:"secondary-progress",span:v!=null&&v.start_date?12:24},rn[Oe.i.EXPERIMENTS_SECONDARY_METRICS]&&!!(v!=null&&v.secondary_metrics.length)&&n.a.createElement(h.a,{className:"border-bottom"},n.a.createElement(y.a,{align:"middle",justify:"space-between",className:"mb-05"},n.a.createElement(h.a,{className:"card-secondary",span:2*jn},"Secondary metrics"),v==null||(d=v.parameters)===null||d===void 0||(T=d.feature_flag_variants)===null||T===void 0?void 0:T.map(function(G,J){return n.a.createElement(h.a,{key:J,span:jn,style:{color:"".concat(ce===O.s.FUNNELS?Object(Ze.k)(lt(G.key,O.s.FUNNELS)+1):Object(Qn.c)("white")[lt(G.key,O.s.TRENDS)])}},n.a.createElement("span",{className:"text-default"},Object(Y.j)(G.key)))})),rn[Oe.i.EXPERIMENTS_SECONDARY_METRICS]&&(v.start_date?Sa?n.a.createElement(se.a,{active:!0,paragraph:!1}):n.a.createElement(n.a.Fragment,null,v.secondary_metrics.map(function(G,J){var st,Mt;return n.a.createElement(y.a,{className:"border-top",key:J,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(h.a,{span:2*jn},Object(Y.j)(G.name)),v==null||(st=v.parameters)===null||st===void 0||(Mt=st.feature_flag_variants)===null||Mt===void 0?void 0:Mt.map(function(An,ua){return n.a.createElement(h.a,{key:ua,span:jn},nt!=null&&nt[J][An.key]?G.filters.insight===O.s.FUNNELS?n.a.createElement(n.a.Fragment,null,((nt==null?void 0:nt[J][An.key])*100).toFixed(1),"%"):n.a.createElement(n.a.Fragment,null,Object(Y.O)(nt==null?void 0:nt[J][An.key])):n.a.createElement(n.a.Fragment,null,"--"))}))})):n.a.createElement(n.a.Fragment,null,v.secondary_metrics.map(function(G,J){var st,Mt;return n.a.createElement(y.a,{className:"border-top",key:J,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(h.a,{span:2*jn},Object(Y.j)(G.name)),v==null||(st=v.parameters)===null||st===void 0||(Mt=st.feature_flag_variants)===null||Mt===void 0?void 0:Mt.map(function(An,ua){return n.a.createElement(h.a,{key:ua,span:jn},"--")}))})))),H&&n.a.createElement(h.a,{className:"mt"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Experiment progress")),n.a.createElement(Ee.a,{strokeWidth:20,showInfo:!1,percent:da,strokeColor:"var(--success)"}),ce===O.s.TRENDS&&v.start_date&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},v.end_date?n.a.createElement("div",null,"Ran for"," ",n.a.createElement("b",null,Object(ye.a)(v.end_date).diff(v.start_date,"day"))," ","days"):n.a.createElement("div",null,n.a.createElement("b",null,Object(ye.a)().diff(v.start_date,"day"))," ","days running"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,v==null||(f=v.parameters)===null||f===void 0?void 0:f.recommended_running_time)," ","days")),ce===O.s.FUNNELS&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},v.end_date?n.a.createElement("div",null,"Saw"," ",n.a.createElement("b",null,Object(Y.O)(Ln))," ","participants"):n.a.createElement("div",null,n.a.createElement("b",null,Object(Y.O)(Ln))," ","participants seen"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,Object(Y.O)((v==null||(re=v.parameters)===null||re===void 0?void 0:re.recommended_sample_size)||0))," ","participants"))))))),!(v!=null&&v.start_date)&&n.a.createElement("div",{className:"mt full-width"},n.a.createElement(Nt,{experiment:v}))),n.a.createElement("div",{className:"experiment-result"},H?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{justify:"space-around",style:{flexFlow:"nowrap"}},Object.keys(H.probability).sort(function(G,J){return H.probability[J]-H.probability[G]}).map(function(G,J){return n.a.createElement(h.a,{key:J,className:"pr"},n.a.createElement("div",null,n.a.createElement("b",null,Object(Y.j)(G))),ce===O.s.TRENDS?n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},n.a.createElement(y.a,null,"action"in H.insight[0]&&n.a.createElement(ya.a,{filter:H.insight[0].action}),n.a.createElement("span",{style:{paddingLeft:4}},"count:")))," ",en(G)," ",Nn&&J===0&&n.a.createElement(_e.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher."},n.a.createElement(jt.a,{style:{padding:"4px 2px"}}))):n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},"Conversion rate:")," ",Ft(G),"%"),n.a.createElement(Ee.a,{percent:Number((H.probability[G]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:ce===O.s.FUNNELS?Object(Ze.k)(lt(G,O.s.FUNNELS)+1):Object(Qn.c)("white")[lt(G,O.s.TRENDS)]}),n.a.createElement("div",null,"Probability that this variant is the best:"," ",n.a.createElement("b",null,(H.probability[G]*100).toFixed(1),"%")))}))):rt&&n.a.createElement("div",{className:"text-center"},n.a.createElement(se.a,{active:!0})),H?n.a.createElement(Se.BindLogic,{logic:_.c,props:{dashboardItemId:H.itemID,cachedInsight:{short_id:H.itemID,filters:yn(yn(yn({},H.filters),{},{insight:ce,display:v.filters.display},ce===O.s.FUNNELS&&{layout:Oe.k.vertical,funnel_viz_type:O.o.Steps}),ce===O.s.TRENDS&&{display:O.d.ActionsLineGraphCumulative}),result:H.insight},doNotLoad:!0}},n.a.createElement("div",{className:"mt"},n.a.createElement(gn.a,{disableHeader:ce===O.s.TRENDS,disableTable:ce===O.s.FUNNELS}))):v.start_date&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"no-experiment-results"},!rt&&n.a.createElement("div",{className:"text-center"},n.a.createElement("b",null,"There are no results for this experiment yet."),n.a.createElement("div",{className:"text-default"},"Double check your feature flag implementation if you're still not seeing results.")))))):n.a.createElement(se.a,{active:!0}))}function qn(){return n.a.createElement(ve.a,{defaultValue:"JavaScript",suffixIcon:n.a.createElement(Qt.a,null)},n.a.createElement(ve.a.Option,{value:"JavaScript"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(Bt.IconJavascript,{style:{marginRight:6}})," JavaScript")))}try{bn.displayName="Experiment_",bn.__docgenInfo={description:"",displayName:"Experiment_",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/Experiment.tsx#Experiment_"]={docgenInfo:bn.__docgenInfo,name:"Experiment_",path:"frontend/src/scenes/experiments/Experiment.tsx#Experiment_"})}catch(a){}},"./frontend/src/scenes/experiments/experimentsLogic.ts":function(fe,L,t){"use strict";t.d(L,"a",function(){return Se});var X=t("./node_modules/core-js/modules/es.array.concat.js"),ee=t.n(X),Le=t("./node_modules/core-js/modules/es.array.filter.js"),xe=t.n(Le),je=t("./node_modules/core-js/modules/es.array.iterator.js"),He=t.n(je),qe=t("./node_modules/core-js/modules/es.array.map.js"),he=t.n(qe),e=t("./node_modules/core-js/modules/es.object.to-string.js"),S=t.n(e),Ye=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),De=t.n(Ye),s=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),$e=t.n(s),R=t("./node_modules/@babel/runtime/regenerator/index.js"),U=t.n(R),F=t("./node_modules/regenerator-runtime/runtime.js"),y=t.n(F),h=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ie=t.n(h),_e=t("./node_modules/kea/lib/index.esm.js"),ve=t("./frontend/src/lib/api.ts"),Ge=t("./frontend/src/scenes/teamLogic.ts"),w=t("./frontend/src/types.ts"),k=t("./frontend/src/lib/utils.tsx"),se=t("./frontend/src/scenes/userLogic.ts"),Ee=t("./frontend/src/lib/components/lemonToast.tsx"),Se=Object(_e.kea)({path:["scenes","experiments","experimentsLogic"],connect:{values:[Ge.a,["currentTeamId"],se.a,["hasAvailableFeature"]]},actions:{},loaders:function(Xe){var at=Xe.values,te=Xe.actions;return{experiments:[[],{loadExperiments:function(){var Qe=ie()(U.a.mark(function o(Q){var _;return U.a.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(at.hasAvailableFeature(w.c.EXPERIMENTATION)){Ce.next=2;break}return Ce.abrupt("return",[]);case 2:return Ce.next=4,ve.b.get("api/projects/".concat(at.currentTeamId,"/experiments?").concat(Q||""));case 4:return _=Ce.sent,Ce.abrupt("return",_.results);case 6:case"end":return Ce.stop()}},o)}));function n(o){return Qe.apply(this,arguments)}return n}(),deleteExperiment:function(){var Qe=ie()(U.a.mark(function o(Q){return U.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,ve.b.delete("api/projects/".concat(at.currentTeamId,"/experiments/").concat(Q));case 2:return Ee.a.info("Experiment removed"),O.abrupt("return",at.experiments.filter(function(Ce){return Ce.id!==Q}));case 4:case"end":return O.stop()}},o)}));function n(o){return Qe.apply(this,arguments)}return n}(),addToExperiments:function(n){return[].concat($e()(at.experiments),[n])},updateExperiments:function(n){return at.experiments.map(function(o){return o.id===n.id?n:o})}}],tab:[w.h.All,{setExperimentsFilters:function(){var Qe=ie()(U.a.mark(function o(Q){var _,O;return U.a.wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return _=Q.tab,O=_===w.h.Yours?Object(k.yb)({user:!0}):Object(k.yb)({archived:!0}),_===w.h.All?te.loadExperiments(Object(k.yb)({all:!0})):te.loadExperiments(O),St.abrupt("return",_);case 4:case"end":return St.stop()}},o)}));function n(o){return Qe.apply(this,arguments)}return n}()}]}},events:function(Xe){var at=Xe.actions;return{afterMount:function(){at.loadExperiments(Object(k.yb)({all:!0}))}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(fe,L,t){"use strict";t.d(L,"a",function(){return ma});var X=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),ee=t.n(X),Le=t("./node_modules/antd/es/card/index.js"),xe=t("./node_modules/antd/es/row/index.js"),je=t("./node_modules/antd/es/col/index.js"),He=t("./node_modules/core-js/modules/es.array.includes.js"),qe=t("./node_modules/core-js/modules/es.string.includes.js"),he=t("./node_modules/react/index.js"),e=t.n(he),S=t("./node_modules/core-js/modules/es.array.concat.js"),Ye=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),De=t.n(Ye),s=t("./node_modules/kea/lib/index.esm.js"),$e=t("./node_modules/antd/es/tag/index.js"),R=t("./node_modules/antd/es/select/index.js"),U=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),F=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),y=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),h=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},_e=ie,ve=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Ge=function(c,u){return he.createElement(ve.a,Object(h.a)(Object(h.a)({},c),{},{ref:u,icon:_e}))};Ge.displayName="AreaChartOutlined";var w=he.forwardRef(Ge),k=t("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Ee=se,Se=function(c,u){return he.createElement(ve.a,Object(h.a)(Object(h.a)({},c),{},{ref:u,icon:Ee}))};Se.displayName="TableOutlined";var bt=he.forwardRef(Se),Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},at=Xe,te=function(c,u){return he.createElement(ve.a,Object(h.a)(Object(h.a)({},c),{},{ref:u,icon:at}))};te.displayName="PieChartOutlined";var Qe=he.forwardRef(te),n=t("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),o=t("./frontend/src/types.ts"),Q=t("./frontend/src/lib/utils.tsx"),_=t("./frontend/src/scenes/insights/insightLogic.ts"),O=t("./frontend/src/lib/logic/featureFlagLogic.ts"),Ce=t("./frontend/src/lib/constants.tsx"),St=t("./frontend/src/scenes/insights/ActionFilter/entityFilterLogic.ts"),Ve=t("./frontend/src/lib/components/Tooltip.tsx");function _t(m){var c=m.filters,u=m.onChange,p=m.disabled,C=Object(s.useValues)(_.c),E=C.insightProps,x=Object(s.useValues)(Object(U.a)(E)),D=x.chartFilter,M=Object(s.useActions)(Object(U.a)(E)),A=M.setChartFilter,I=Object(s.useValues)(O.a),N=I.featureFlags,$=c.insight===o.s.STICKINESS||c.insight===o.s.RETENTION,B=c.insight===o.s.RETENTION||c.insight===o.s.STICKINESS,ne=c.insight===o.s.RETENTION||c.insight===o.s.STICKINESS||!!c.breakdown&&c.breakdown!=="$geoip_country_code"&&c.breakdown!=="$geoip_country_name"||Object(St.c)(c).length>1,ue=c.insight===o.s.RETENTION,le=ue||c.insight===o.s.STICKINESS||c.insight===o.s.RETENTION,Re=c.insight===o.s.RETENTION?o.d.ActionsTable:c.insight===o.s.FUNNELS?o.d.FunnelViz:o.d.ActionsLineGraph;function q(me){var ae=me.icon,pe=me.tooltip,be=me.children,we=be===void 0?null:be;return e.a.createElement(Ve.a,{title:pe,placement:"left"},e.a.createElement("div",{style:{width:"100%"}},ae," ",we))}function ge(me){var ae=me.children,pe=ae===void 0?null:ae;return e.a.createElement($e.a,{color:"orange",style:{marginLeft:8,fontSize:10}},pe)}var Ie=c.insight===o.s.FUNNELS?[{value:o.o.Steps,label:e.a.createElement(q,{icon:e.a.createElement(F.a,null)},"Steps")},{value:o.o.Trends,label:e.a.createElement(q,{icon:e.a.createElement(y.a,null)},"Trends",e.a.createElement(ge,null,"BETA"))}]:[{label:"Line Chart",options:[{value:o.d.ActionsLineGraph,label:e.a.createElement(q,{icon:e.a.createElement(y.a,null)},"Linear")},{value:o.d.ActionsLineGraphCumulative,label:e.a.createElement(q,{icon:e.a.createElement(w,null)},"Cumulative"),disabled:$}]},{label:"Bar Chart",options:[{value:o.d.ActionsBar,label:e.a.createElement(q,{icon:e.a.createElement(k.a,null)},"Time"),disabled:ue},{value:o.d.ActionsBarValue,label:e.a.createElement(q,{icon:e.a.createElement(k.a,null)},"Value"),disabled:le}]},{value:o.d.ActionsTable,label:e.a.createElement(q,{icon:e.a.createElement(bt,null)},"Table")},{value:o.d.ActionsPie,label:e.a.createElement(q,{icon:e.a.createElement(Qe,null)},"Pie"),disabled:B}].concat(De()(N[Ce.i.HEDGEHOGGER]?[{value:o.d.WorldMap,label:e.a.createElement(q,{icon:e.a.createElement(n.a,null),tooltip:"Visualize data by country. Only works with one series at a time."},"World Map"),disabled:ne}]:[]));return e.a.createElement(R.a,{key:"2",defaultValue:c.display||Re,value:D||Re,onChange:function(ae){A(ae),u==null||u(ae)},bordered:!0,dropdownAlign:Q.a.bottomRight,dropdownMatchSelectWidth:!1,listHeight:288,"data-attr":"chart-filter",disabled:p,options:Ie})}try{_t.displayName="ChartFilter",_t.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:_t.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(m){}var dt=t("./node_modules/antd/es/checkbox/index.js"),kt=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function tn(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=Object(s.useValues)(Object(kt.a)(c)),p=u.compare,C=u.disabled,E=Object(s.useActions)(Object(kt.a)(c)),x=E.setCompare;return C?null:e.a.createElement(dt.a,{onChange:function(M){x(M.target.checked)},checked:p,style:{marginLeft:8,marginRight:6},disabled:C},"Compare",e.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var ln=t("./node_modules/core-js/modules/es.array.map.js"),it=t("./node_modules/core-js/modules/es.object.entries.js"),Z=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),de=t.n(Z),Pe=t("./node_modules/core-js/modules/es.array.iterator.js"),Be=t("./node_modules/core-js/modules/es.object.to-string.js"),ut=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ke=t("./frontend/src/scenes/insights/sharedUtils.ts");function mt(m,c){var u=Object.keys(m);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(m);c&&(p=p.filter(function(C){return Object.getOwnPropertyDescriptor(m,C).enumerable})),u.push.apply(u,p)}return u}function Pt(m){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{};c%2?mt(Object(u),!0).forEach(function(p){ee()(m,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(u)):mt(Object(u)).forEach(function(p){Object.defineProperty(m,p,Object.getOwnPropertyDescriptor(u,p))})}return m}var Ke=Object(s.kea)({props:{},key:Object(ke.c)("new"),path:function(c){return["lib","components","IntervalFilter","intervalFilterLogic",c]},connect:function(c){return{actions:[Object(_.c)(c),["setFilters"]],values:[Object(_.c)(c),["filters"]]}},actions:function(){return{setInterval:function(u){return{interval:u}}}},listeners:function(c){var u=c.values,p=c.actions;return{setInterval:function(E){var x=E.interval;Object(Q.mb)(x,u.filters.interval)||p.setFilters(Pt(Pt({},u.filters),{},{interval:x}))}}},selectors:{interval:[function(m){return[m.filters]},function(m){return m==null?void 0:m.interval}]}}),W=t("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),Jt={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function Ot(m){var c=m.disabled,u=Object(s.useValues)(_.c),p=u.insightProps,C=Object(s.useValues)(Ke(p)),E=C.interval,x=Object(s.useActions)(Ke(p)),D=x.setInterval,M=Object.entries(Jt).map(function(A){var I=de()(A,2),N=I[0],$=I[1].label;return{key:N,value:N,label:N===E?e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,null)," ",$):$}});return e.a.createElement(R.a,{bordered:!0,disabled:c,defaultValue:E||"day",value:E||void 0,dropdownMatchSelectWidth:!1,onChange:D,"data-attr":"interval-filter",options:M})}try{Ot.displayName="IntervalFilter",Ot.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:Ot.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(m){}var Ue=t("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),xt=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function P(m,c){var u=Object.keys(m);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(m);c&&(p=p.filter(function(C){return Object.getOwnPropertyDescriptor(m,C).enumerable})),u.push.apply(u,p)}return u}function ct(m){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{};c%2?P(Object(u),!0).forEach(function(p){ee()(m,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(u)):P(Object(u)).forEach(function(p){Object.defineProperty(m,p,Object.getOwnPropertyDescriptor(u,p))})}return m}function ye(){var m=Object(s.useValues)(_.c),c=m.filters,u=Object(s.useActions)(_.c),p=u.setFilters,C=c.interval,E=c.smoothing_intervals;if(!C)return null;var x=xt.a[C].map(function(D){var M=D.value,A=D.label;return{value:M,label:M===E?e.a.createElement(e.a.Fragment,null,e.a.createElement(Ue.a,null)," ",A):A}});return x.length?e.a.createElement(R.a,{key:C,bordered:!0,value:E||1,dropdownMatchSelectWidth:!1,onChange:function(M){p(ct(ct({},c),{},{smoothing_intervals:M}))},"data-attr":"smoothing-filter",options:x}):e.a.createElement(e.a.Fragment,null)}var ft=t("./node_modules/@babel/runtime/helpers/extends.js"),At=t.n(ft),Te=t("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),vt=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function Je(m){var c=Object(s.useValues)(_.c),u=c.insightProps,p=Object(s.useValues)(Object(Te.a)(u)),C=p.dates,E=C.dateFrom,x=C.dateTo,D=Object(s.useActions)(Object(Te.a)(u)),M=D.setDates;return e.a.createElement(vt.a,At()({},m,{dateFrom:E!=null?E:void 0,dateTo:x!=null?x:void 0,onChange:function(I,N){var $;M(I,N),($=m.onChange)===null||$===void 0||$.call(m,I,N)}}))}try{Je.displayName="InsightDateFilter",Je.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:Je.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(m){}var Oe=t("./node_modules/rc-picker/lib/generate/dayjs.js"),Ae=t.n(Oe),gt=t("./node_modules/antd/lib/date-picker/generatePicker/index.js"),Xt=t.n(gt),Tt=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),jt=t("./frontend/src/lib/dayjs.ts"),nn=Xt()(Ae.a);function zt(m){var c=m.disabled,u=Object(s.useValues)(_.c),p=u.insightProps,C=Object(s.useValues)(Object(Tt.e)(p)),E=C.filters,x=Object(s.useActions)(Object(Tt.e)(p)),D=x.setFilters,M=E.date_to&&Object(jt.a)(E.date_to).year()!==Object(jt.a)().year()?", YYYY":"";return e.a.createElement(e.a.Fragment,null,e.a.createElement(Ve.a,{title:"Cohorts up to this end date"},e.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},e.a.createElement(W.a,null),e.a.createElement(nn,{showTime:E.period==="Hour",use12Hours:!0,format:E.period==="Hour"?"MMM D".concat(M,", h a"):"MMM D".concat(M),value:E.date_to?Object(jt.a)(E.date_to):void 0,onChange:function(I){return D({date_to:I&&Object(jt.a)(I).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:c}))))}try{zt.displayName="RetentionDatePicker",zt.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:zt.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(m){}var tt=t("./frontend/src/scenes/funnels/funnelLogic.ts"),z=t("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function Vt(m){var c=m.disabled,u=Object(s.useValues)(_.c),p=u.insightProps,C=Object(s.useValues)(Object(tt.a)(p)),E=C.barGraphLayout,x=Object(s.useActions)(Object(tt.a)(p)),D=x.setFilters,M=[{value:Ce.k.vertical,icon:e.a.createElement(k.a,null),label:"Left to right"},{value:Ce.k.horizontal,icon:e.a.createElement(z.a,null),label:"Top to bottom"}];return e.a.createElement(R.a,{defaultValue:Ce.k.vertical,value:E||Ce.k.vertical,onChange:function(I){return D({layout:I})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:c},e.a.createElement(R.a.OptGroup,{label:"Graph display options"},M.map(function(A){return e.a.createElement(R.a.Option,{key:A.value,value:A.value,label:e.a.createElement(e.a.Fragment,null,A.icon," ",A.label)},A.label)})))}try{Vt.displayName="FunnelDisplayLayoutPicker",Vt.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:Vt.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(m){}var on=t("./node_modules/core-js/modules/es.array.filter.js"),Rn=t("./node_modules/core-js/modules/es.array.from.js"),gn=t("./node_modules/core-js/modules/es.array.slice.js"),Bt=t("./node_modules/core-js/modules/es.string.iterator.js"),wn=t("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),Qt=t("./frontend/src/scenes/paths/pathsLogic.ts"),hn=t("./frontend/src/scenes/userLogic.ts");function We(m){var c,u=m.disabled,p=Object(s.useValues)(_.c),C=p.insightProps,E=Object(s.useValues)(Object(Qt.b)(C)),x=E.filter,D=Object(s.useActions)(Object(Qt.b)(C)),M=D.setFilter,A=Object(s.useValues)(hn.a),I=A.user,N=2,$=!(I==null||(c=I.organization)===null||c===void 0)&&c.available_features.includes(o.c.PATHS_ADVANCED)?20:5,B=Array.from(Array.from(Array.from(Array($+1).keys()).slice(N)),function(ne){return{label:"".concat(ne," Steps"),value:ne}});return e.a.createElement(R.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:x.step_limit||Qt.a,onSelect:function(ue){return M({step_limit:ue})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:Q.a.bottomRight,optionLabelProp:"label",disabled:u},B.map(function(ne){return e.a.createElement(R.a.Option,{key:ne.value,value:ne.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(wn.a,null)," ",ne.label)},ne.label)}))}try{We.displayName="PathStepPicker",We.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:We.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(m){}var Y=t("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function Ze(m){var c=m.disabled,u=Object(s.useValues)(_.c),p=u.insightProps,C=Object(s.useValues)(Object(Tt.e)(p)),E=C.retentionReference,x=Object(s.useActions)(Object(Tt.e)(p)),D=x.setRetentionReference;return e.a.createElement(R.a,{value:E,onChange:D,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:c},[{value:"total",icon:e.a.createElement(Y.a,null),label:"Overall cohort"},{value:"previous",icon:e.a.createElement(Y.a,null),label:"Relative to previous period"}].map(function(M){return e.a.createElement(R.a.Option,{key:M.value,value:M.value,label:e.a.createElement(e.a.Fragment,null,M.icon," ",M.label)},M.label)}))}try{Ze.displayName="ReferencePicker",Ze.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:Ze.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(m){}var cn=t("./node_modules/antd/es/tooltip/index.js"),It=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),ga=t("./node_modules/core-js/modules/es.set.js"),Cn=t("./node_modules/antd/es/input-number/index.js"),Yt=t("./node_modules/clsx/dist/clsx.m.js"),Xn=0,Sn=90,ha=new Set([5,15,25,50,90]),Ea=[{label:"Auto bins",value:Ce.a,display:!0}].concat(De()(Array.from(Array.from(Array(Sn+1).keys()),function(m){return{label:"".concat(m," bins"),value:m,display:ha.has(m)}})),[{label:"Custom",value:"custom",display:!0}]);function ht(m){var c=m.disabled,u=Object(s.useValues)(_.c),p=u.insightProps,C=Object(s.useValues)(Object(tt.a)(p)),E=C.filters,x=C.numericBinCount,D=Object(s.useActions)(Object(tt.a)(p)),M=D.setBinCount;return e.a.createElement(R.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:Ce.a,value:E.bin_count||Ce.a,onSelect:function(I){return M(I)},dropdownRender:function(I){return e.a.createElement(e.a.Fragment,null,I,e.a.createElement("div",null,e.a.createElement(Cn.a,{className:"funnel-bins-custom-picker",size:"middle",min:Xn,max:Sn,value:x,onChange:function($){var B=typeof $=="string"?parseInt($):$;B&&M(B)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:Q.a.bottomRight,optionLabelProp:"label",disabled:c},e.a.createElement(R.a.OptGroup,{label:"Bin Count"},Ea.map(function(A){return A.value==="custom"?null:e.a.createElement(R.a.Option,{className:Object(Yt.a)({"select-option-hidden":!A.display}),key:A.value,value:A.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,null)," ",A.label)},A.label)})))}try{ht.displayName="FunnelBinsPicker",ht.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:ht.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(m){}var Kt,$t,Zt=function(c,u){switch(c){case o.s.FUNNELS:return u.funnel_viz_type===o.o.Trends;case o.s.RETENTION:case o.s.PATHS:return!1;case o.s.TRENDS:case o.s.STICKINESS:case o.s.LIFECYCLE:default:return!u.display||!Ce.m.includes(u.display)}},Pn=function(c){switch(c){case o.s.TRENDS:case o.s.STICKINESS:return!0;case o.s.RETENTION:case o.s.FUNNELS:return!1;case o.s.LIFECYCLE:case o.s.PATHS:return!1;default:return!0}},Qn=(Kt={},ee()(Kt,"".concat(o.s.TRENDS),!0),ee()(Kt,"".concat(o.s.STICKINESS),!0),ee()(Kt,"".concat(o.s.LIFECYCLE),!0),ee()(Kt,"".concat(o.s.FUNNELS),!0),ee()(Kt,"".concat(o.s.RETENTION),!1),ee()(Kt,"".concat(o.s.PATHS),!0),Kt),ya=($t={},ee()($t,"".concat(o.s.TRENDS),!0),ee()($t,"".concat(o.s.STICKINESS),!0),ee()($t,"".concat(o.s.LIFECYCLE),!1),ee()($t,"".concat(o.s.FUNNELS),!1),ee()($t,"".concat(o.s.RETENTION),!1),ee()($t,"".concat(o.s.PATHS),!1),$t),ba=function(c){var u,p;return!c.actions&&!c.events||((u=c.actions)===null||u===void 0?void 0:u.length)===0&&((p=c.events)===null||p===void 0?void 0:p.length)===0};function Tn(m){var c=m.filters,u=m.activeView,p=m.disableTable,C=m.disabled,E=u===o.s.FUNNELS,x=u===o.s.PATHS,D=Object(s.useValues)(O.a),M=D.featureFlags;return e.a.createElement("div",{className:"display-config-inner"},e.a.createElement("div",{className:"display-config-inner-row"},Qn[u]&&!p&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Date range"),e.a.createElement(Je,{defaultValue:"Last 7 days",disabled:C||E&&ba(c),bordered:!0,makeLabel:function(I){return e.a.createElement(e.a.Fragment,null,e.a.createElement(W.a,null)," ",I,I=="All time"&&e.a.createElement(cn.a,{title:"Only events dated after 2015 will be shown"},e.a.createElement(It.a,{className:"info-indicator"})))}})),Zt(u,c)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},e.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),e.a.createElement(Ot,{view:u,disabled:C})),u===o.s.TRENDS&&!c.breakdown_type&&!c.compare&&(!c.display||c.display===o.d.ActionsLineGraph)&&M[Ce.i.SMOOTHING_INTERVAL]?e.a.createElement(ye,null):null,u===o.s.RETENTION&&e.a.createElement(e.a.Fragment,null,e.a.createElement(zt,{disabled:C}),e.a.createElement(Ze,{disabled:C})),x&&e.a.createElement("span",{className:"filter"},e.a.createElement(We,{disabled:C})),ya[u]&&e.a.createElement("span",{className:"filter"},e.a.createElement(tn,null))),e.a.createElement("div",{className:"display-config-inner-row"},Pn(u)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Chart type"),e.a.createElement(_t,{filters:c,disabled:C||c.insight===o.s.LIFECYCLE})),E&&c.funnel_viz_type===o.o.Steps&&e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"filter"},e.a.createElement(Vt,{disabled:C}))),E&&c.funnel_viz_type===o.o.TimeToConvert&&e.a.createElement("span",{className:"filter"},e.a.createElement(ht,{disabled:C}))))}try{Tn.displayName="InsightDisplayConfig",Tn.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:Tn.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(m){}var an=t("./node_modules/antd/es/button/index.js"),Oa=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),En=t.n(Oa),xa=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),_n=t.n(xa),Vn={};Vn.insert="head",Vn.singleton=!1;var In=En()(_n.a,Vn),Bn=_n.a.locals||{},Nt=t("./frontend/src/scenes/funnels/funnelUtils.ts"),ja=t("./node_modules/core-js/modules/es.array.find.js"),yn=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function Zn(){var m,c=Object(s.useValues)(_.c),u=c.insightProps,p=Object(s.useValues)(Object(tt.a)(u)),C=p.filters,E=p.numberOfSeries,x=p.areFiltersValid,D=p.filterSteps,M=Object(s.useActions)(Object(tt.a)(u)),A=M.changeStepRange;if(C.funnel_viz_type===o.o.Steps)return null;var I=function(ue,le){A(ue,le)},N=x?Array.from(Array(Math.max(E)).keys()).slice(0,-1):[0],$=x?Array.from(Array(Math.max(E)).keys()).slice(((m=C.funnel_from_step)!==null&&m!==void 0?m:0)+1):[1],B=function(ue){return ue.map(function(le){var Re=D.find(function(q){return q.order===le});return Re?e.a.createElement(R.a.Option,{key:le,value:le,label:"Step ".concat(le+1)},e.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.a.createElement("span",{style:{marginRight:4}},"Step ",le+1,":"),e.a.createElement(yn.a,{filter:Re}))):null})};return e.a.createElement(xe.a,{className:"funnel-options-inputs"},e.a.createElement("span",{className:"text-muted-alt"},"from"),e.a.createElement(R.a,{disabled:!x,dropdownMatchSelectWidth:!1,dropdownAlign:Q.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:C.funnel_from_step||0,onChange:function(ue){return I(ue,C.funnel_to_step)},style:{marginLeft:4,marginRight:4}},B(N)),e.a.createElement("span",{className:"text-muted-alt"},"to"),e.a.createElement(R.a,{disabled:!x,dropdownMatchSelectWidth:!1,dropdownAlign:Q.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:C.funnel_to_step||Math.max(E-1,1),onChange:function(ue){return I(C.funnel_from_step,ue)},style:{marginLeft:4,marginRight:4}},B($)))}function bn(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=m.filters,p=m.activeView,C=Object(s.useValues)(Object(tt.a)(c)),E=C.conversionMetrics,x=C.aggregationTargetLabel,D=Object(s.useActions)(Object(U.a)(c)),M=D.setChartFilter;if(p!==o.s.FUNNELS)return null;var A=[].concat(De()(u.funnel_viz_type===o.o.Steps?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(Ve.a,{title:"Overall conversion rate for all ".concat(x.plural," on the entire funnel.")},e.a.createElement(It.a,{className:"info-indicator left"})),"Total conversion rate"),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement("span",{className:"l4"},Object(Nt.c)(E.totalRate),"%"))]:[]),De()(u.funnel_viz_type!==o.o.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(Ve.a,{title:"Average (arithmetic mean) of the total time each ".concat(x.singular," spent in the entire funnel.")},e.a.createElement(It.a,{className:"info-indicator left"})),"Average time to convert"," "),u.funnel_viz_type===o.o.TimeToConvert&&e.a.createElement(Zn,null),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement(an.a,{type:"link",onClick:function(){return M(o.o.TimeToConvert)},disabled:u.funnel_viz_type===o.o.TimeToConvert},e.a.createElement("span",{className:"l4"},Object(Q.N)(E.averageTime))))]:[]),De()(u.funnel_viz_type===o.o.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),e.a.createElement(Zn,null))]:[]));return e.a.createElement(xe.a,{className:"funnel-canvas-label",align:"middle"},A.map(function(I,N){return e.a.createElement(e.a.Fragment,{key:N},N>0&&e.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),I)}))}var qn=t("./frontend/src/lib/hooks/usePeriodicRerender.ts"),a=3;function r(){var m=Object(s.useValues)(_.c),c=m.lastRefresh,u=Object(s.useActions)(_.c),p=u.loadResults;return Object(qn.a)(15e3),e.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",c?Object(jt.a)(c).fromNow():"a while ago",e.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),e.a.createElement(cn.a,{title:e.a.createElement(e.a.Fragment,null,"Insights can be refreshed",e.a.createElement("br",null),"every ",a," minutes.")},e.a.createElement(an.a,{size:"small",type:"link",onClick:function(){return p(!0)},disabled:!!c&&Object(jt.a)().subtract(a-.5,"minutes").isBefore(c),style:{padding:0}},e.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var l=t("./frontend/src/scenes/trends/PersonsModal.tsx"),i=t("./frontend/src/scenes/trends/viz/index.ts"),g=t("./frontend/src/scenes/trends/SaveCohortModal.tsx"),j=t("./frontend/src/scenes/trends/trendsLogic.ts"),b=t("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(m){}var d=t("./frontend/src/scenes/trends/personsModalLogic.ts"),T=t("./frontend/src/lib/utils/eventUsageLogic.ts"),f=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),re=t("./frontend/src/scenes/insights/WorldMap/index.ts");function oe(m){var c=m.view,u=Object(s.useValues)(f.a),p=u.insightMode,C=Object(s.useValues)(_.c),E=C.insightProps,x=Object(s.useValues)(d.b),D=x.cohortModalVisible,M=Object(s.useActions)(d.b),A=M.setCohortModalVisible,I=Object(s.useValues)(Object(j.a)(E)),N=I.filters,$=I.loadMoreBreakdownUrl,B=I.breakdownValuesLoading,ne=I.showModalActions,ue=I.aggregationTargetLabel,le=Object(s.useActions)(Object(j.a)(E)),Re=le.loadMoreBreakdownValues,q=Object(s.useValues)(d.b),ge=q.showingPeople,Ie=Object(s.useActions)(d.b),me=Ie.saveCohortWithUrl,ae=Object(s.useActions)(T.f),pe=ae.reportCohortCreatedFromPersonsModal,be=function(){if(!N.display||N.display===o.d.ActionsLineGraph||N.display===o.d.ActionsLineGraphCumulative||N.display===o.d.ActionsBar)return e.a.createElement(i.b,null);if(N.display===o.d.ActionsTable)return e.a.createElement(s.BindLogic,{logic:j.a,props:{dashboardItemId:null,view:c,filters:null}},e.a.createElement(b.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(c),canEditSeriesNameInline:p===o.t.Edit,isMainInsightView:!0}));if(N.display===o.d.ActionsPie)return e.a.createElement(i.c,null);if(N.display===o.d.ActionsBarValue)return e.a.createElement(i.a,null);if(N.display===o.d.WorldMap)return e.a.createElement(re.a,null)};return e.a.createElement(e.a.Fragment,null,(N.actions||N.events)&&e.a.createElement("div",{className:N.display!==o.d.ActionsTable&&N.display!==o.d.WorldMap?"trends-insights-container":void 0},be()),N.breakdown&&$&&e.a.createElement("div",{className:"mt text-center"},e.a.createElement("div",{className:"text-muted mb"},"For readability, ",e.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),e.a.createElement("div",null,e.a.createElement(an.a,{style:{textAlign:"center",marginBottom:16},onClick:Re,loading:B},"Load more breakdown values"))),e.a.createElement(l.a,{visible:ge&&!D,view:c,filters:N,onSaveCohort:function(){A(!0)},showModalActions:ne,aggregationTargetLabel:ue}),e.a.createElement(g.a,{visible:D,onOk:function(fn){me(fn),A(!1),pe(N)},onCancel:function(){return A(!1)}}))}try{oe.displayName="TrendInsight",oe.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:oe.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(m){}var Me=t("./frontend/src/scenes/funnels/Funnel.tsx");function K(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=Object(s.useValues)(Object(tt.a)(c)),p=u.isValidFunnel,C=u.insightLoading,E=u.filters,x=u.areFiltersValid,D=u.barGraphLayout,M=u.aggregationTargetLabel,A=Object(s.useValues)(d.b),I=A.showingPeople,N=A.cohortModalVisible,$=Object(s.useActions)(d.b),B=$.setCohortModalVisible;return e.a.createElement(e.a.Fragment,null,e.a.createElement(l.a,{visible:I&&!N,view:o.s.FUNNELS,filters:E,onSaveCohort:function(){B(!0)},showModalActions:E.aggregation_group_type_index==null,aggregationTargetLabel:M}),e.a.createElement("div",{className:Object(Yt.a)("funnel-insights-container",{"non-empty-state":p&&x||C,"no-padding":E.funnel_viz_type==o.o.Steps&&D===Ce.k.vertical})},e.a.createElement(Me.a,null)))}var V=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),v=t("./frontend/src/scenes/paths/Paths.tsx"),Fe=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function Rt(){var m=Object(s.useValues)(_.c),c=m.activeView;return c!==o.s.PATHS?null:e.a.createElement(xe.a,{className:"funnel-canvas-label",align:"middle"},e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var Ut=t("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),qt=t("./node_modules/antd/lib/input/TextArea.js"),H=t.n(qt),en=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),Ht=t.n(en),ce={};ce.insert="head",ce.singleton=!1;var rt=En()(Ht.a,ce),wt=Ht.a.locals||{},Gt=t("./node_modules/core-js/modules/es.number.constructor.js"),Ft=t("./node_modules/core-js/modules/es.number.is-integer.js"),lt=t("./node_modules/core-js/modules/es.number.to-fixed.js"),Et=t("./node_modules/core-js/modules/es.regexp.exec.js"),Nn=t("./node_modules/core-js/modules/es.string.split.js"),Fn=t("./node_modules/antd/es/spin/index.js"),Kn=t("./node_modules/antd/es/table/index.js"),Ca=t("./node_modules/antd/lib/table/Column.js"),nt=t.n(Ca),ea=t("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Sa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},Dt=Sa,dn=function(c,u){return he.createElement(ve.a,Object(h.a)(Object(h.a)({},c),{},{ref:u,icon:Dt}))};dn.displayName="FallOutlined";var ta=he.forwardRef(dn),na=t("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),Wt=t("./frontend/src/lib/components/icons.tsx"),Pa=t("./node_modules/antd/lib/checkbox/Checkbox.js"),On=t.n(Pa),un=t("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),mn=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ta=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),aa=t.n(Ta),Un={};Un.insert="head",Un.singleton=!1;var wa=En()(aa.a,Un),_a=aa.a.locals||{},Ia=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function rn(m){var c=m.id,u=m.offset,p=m.children,C=Object(s.useActions)(Object(Ia.a)({id:c,offset:u})),E=C.scrolling,x=Object(he.useRef)(null);return Object(he.useEffect)(function(){var D=x.current;return document.addEventListener("scroll",function(){return E(D)}),function(){return document.removeEventListener("scroll",function(){return E(D)})}},[x.current]),e.a.createElement("div",{ref:x},p)}try{rn.displayName="VisibilitySensor",rn.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:rn.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(m){}var sn=t("./frontend/src/lib/components/LemonButton/index.ts"),ra=t("./frontend/src/lib/components/Popup/Popup.tsx"),Na=t("./node_modules/antd/es/modal/index.js"),Fa=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),sa=t("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),Wn=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),kn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),la=t.n(kn),xn={};xn.insert="head",xn.singleton=!1;var Dn=En()(la.a,xn),Va=la.a.locals||{},Da=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),zn=t("./frontend/src/lib/components/Link.tsx"),Yn=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function Ma(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=Object(tt.a)(c),p=Object(s.useValues)(u),C=p.correlationsLoading,E=p.funnelCorrelationDetails,x=p.parseDisplayNameForCorrelation,D=p.correlationMatrixAndScore,M=Object(s.useActions)(u),A=M.setFunnelCorrelationDetails,I=M.openCorrelationPersonsModal,N=(E==null?void 0:E.result_type)===o.k.Events?"event":"property",$=(E==null?void 0:E.result_type)===o.k.Events?"performed event":"have property",B=e.a.createElement(e.a.Fragment,null);if(E){var ne=x(E),ue=ne.first_value,le=ne.second_value;B=e.a.createElement(e.a.Fragment,null,e.a.createElement(mn.a,{value:ue}),le!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(mn.a,{value:le,disablePopover:!0})))}var Re=D.correlationScore,q=D.truePositive,ge=D.falsePositive,Ie=D.trueNegative,me=D.falseNegative,ae=D.correlationScoreStrength,pe=ae==="strong"?e.a.createElement(Fa.a,{style:{color:"var(--success)"}}):ae==="moderate"?e.a.createElement(sa.a,{style:{color:"var(--warning)"}}):e.a.createElement(Wn.a,{style:{color:"var(--danger)"}}),be=function(){return A(null)};return e.a.createElement(Na.a,{className:"correlation-matrix",visible:!!E,onCancel:be,destroyOnClose:!0,footer:e.a.createElement(an.a,{onClick:be},"Dismiss"),width:600,title:"Correlation details"},e.a.createElement("div",{className:"correlation-table-wrapper"},C?e.a.createElement("div",{className:"mt text-center"},e.a.createElement(Da.a,{size:"lg"})):E?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",$," ",e.a.createElement("b",null,B),"."),e.a.createElement("table",null,e.a.createElement("thead",null,e.a.createElement("tr",{className:"table-title"},e.a.createElement("td",{colSpan:3},"Results matrix")),e.a.createElement("tr",null,e.a.createElement("td",null,(E==null?void 0:E.result_type)===o.k.Events?"Performed event":"Has property"),e.a.createElement("td",null,"Success"),e.a.createElement("td",null,"Dropped off"))),e.a.createElement("tbody",null,e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"Yes"),e.a.createElement("td",null,e.a.createElement(Ve.a,{title:"True positive (TP) - Percentage of users who ".concat($," and completed the funnel.")},e.a.createElement("div",{className:"percentage"},q?Object(Q.ob)(q/(q+ge)):"0.00%")),q===0?"0 users":e.a.createElement(zn.a,{onClick:function(){I(E,!0)}},Object(Q.qb)(q,"user",void 0,!0,!0))),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(Ve.a,{title:"False negative (FN) - Percentage of users who ".concat($," and did not complete the funnel.")},me?Object(Q.ob)(me/(me+Ie)):"0.00%")),me===0?"0 users":e.a.createElement(zn.a,{onClick:function(){I(E,!1)}},Object(Q.qb)(me,"user",void 0,!0,!0)))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"No"),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(Ve.a,{title:"False positive (FP) - Percentage of users who did not ".concat($," and completed the funnel.")},ge?Object(Q.ob)(ge/(q+ge)):"0.00%")),Object(Q.qb)(ge,"user",void 0,!0,!0)),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(Ve.a,{title:"True negative (TN) - Percentage of users who did not ".concat($," and did not complete the funnel.")},Ie?Object(Q.ob)(Ie/(me+Ie)):"0.00%")),Object(Q.qb)(Ie,"user",void 0,!0,!0))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"}),e.a.createElement("td",null,e.a.createElement("b",null,"100%")),e.a.createElement("td",null,e.a.createElement("b",null,"100%"))))),e.a.createElement("div",{className:"mt text-center"},Object(Q.j)((E==null?void 0:E.result_type)||"")," ",e.a.createElement("b",null,B)," ","has a"," ",(E==null?void 0:E.correlation_type)===o.l.Success?e.a.createElement("b",{className:"text-success"},"positive"," ",e.a.createElement(Ve.a,{title:"Positive correlation means this ".concat(N," is correlated with a successful conversion.")},e.a.createElement(It.a,{className:"cursor-pointer"}))):e.a.createElement("b",{className:"text-danger"},"negative"," ",e.a.createElement(Ve.a,{title:"Negative correlation means this ".concat(N," is correlated with an unsuccessful conversion (user dropped off).")},e.a.createElement(It.a,{className:"cursor-pointer"})))," ","correlation score of"," ",e.a.createElement("b",{style:{color:ae==="strong"?"var(--success)":ae==="moderate"?"var(--warning)":"var(--danger)"}},e.a.createElement(Ve.a,{title:"This ".concat(N," has ").concat(ae," correlation.")},e.a.createElement("span",{style:{cursor:"pointer"}},pe," ",Re.toFixed(3)))))):e.a.createElement("div",null,e.a.createElement(Yn.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function oa(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=Object(tt.a)(c),p=Object(s.useValues)(u),C=p.stepsWithCount,E=p.correlationValues,x=p.correlationTypes,D=p.eventHasPropertyCorrelations,M=p.eventWithPropertyCorrelationsValues,A=p.parseDisplayNameForCorrelation,I=p.correlationsLoading,N=p.eventWithPropertyCorrelationsLoading,$=p.nestedTableExpandedKeys,B=p.correlationPropKey,ne=p.filters,ue=p.aggregationTargetLabel,le=Object(s.useActions)(u),Re=le.setCorrelationTypes,q=le.loadEventWithPropertyCorrelations,ge=le.addNestedTableExpandedKey,Ie=le.removeNestedTableExpandedKey,me=le.openCorrelationPersonsModal,ae=le.loadCorrelations,pe=Object(s.useActions)(T.f),be=pe.reportCorrelationInteraction;Object(he.useEffect)(function(){ae({})},[ne]);var we=function(Ne){x?x.includes(Ne)?Re(x.filter(function(et){return et!==Ne})):Re([].concat(De()(x),[Ne])):Re([Ne])},fn=function(Ne){var et=function(va){return va<10&&!Number.isInteger(va)?va.toFixed(1):va.toFixed()},Ct=Ne.correlation_type===o.l.Success,ot=A(Ne),vn=ot.first_value,pa=ot.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,Ct?e.a.createElement(ea.a,{style:{color:"green"}}):e.a.createElement(ta,{style:{color:"red"}})," ",e.a.createElement(mn.a,{value:vn}),pa!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(mn.a,{value:pa,disablePopover:!0}))),e.a.createElement("div",null,Object(Q.j)(ue.plural)," ",ne.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,et(Ne.odds_ratio),"x ",Ct?"more":"less"," likely"))," ","to"," ",Ne.result_type===o.k.EventWithProperties?"have this event property":"do this event"),e.a.createElement(Ma,null))},Lt=function(Ne){return e.a.createElement(un.c,{onClick:function(){me(Ne,!0)}},Ne.success_count)},ze=function(Ne){return e.a.createElement(un.c,{onClick:function(){me(Ne,!1)}},Ne.failure_count)},yt=function(Ne){return N?e.a.createElement("div",{className:"nested-properties-loading"},e.a.createElement(Fn.a,null),e.a.createElement("h3",null,"Loading correlation results"),e.a.createElement("p",null,"This process can take up to 20 seconds. ")):e.a.createElement("div",null,e.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),e.a.createElement(Kn.a,{dataSource:M[Ne],rowKey:function(Ct){return Ct.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(Ct,ot){return be(o.k.EventWithProperties,"pagination change",{page:Ct,page_size:ot})}}},e.a.createElement(nt.a,{title:"Property",key:"eventName",render:function(Ct,ot){return fn(ot)},align:"left"}),e.a.createElement(nt.a,{title:"Completed",key:"success_count",render:function(Ct,ot){return Lt(ot)},width:90,align:"center"}),e.a.createElement(nt.a,{title:"Dropped off",key:"failure_count",render:function(Ct,ot){return ze(ot)},width:120,align:"center"}),e.a.createElement(nt.a,{title:"",key:"actions",render:function(Ct,ot){return e.a.createElement(Mn,{record:ot})},align:"center",width:30})))};return C.length>1?e.a.createElement(rn,{id:B,offset:152},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement("span",{className:"funnel-correlation-header"},e.a.createElement("span",{className:"table-header"},e.a.createElement(Wt.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),e.a.createElement("span",{className:"table-options"},e.a.createElement("p",{className:"title"},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return we(o.l.Success)}},e.a.createElement(On.a,{checked:x.includes(o.l.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return we(o.l.Failure)}},e.a.createElement(On.a,{checked:x.includes(o.l.Failure),style:{pointerEvents:"none"}},"Dropoff")))),e.a.createElement(Kn.a,{dataSource:E,loading:I,size:"small",scroll:{x:"max-content"},rowKey:function(Ne){return Ne.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return be(o.k.Events,"load more")}},expandable:{expandedRowRender:function(Ne){return yt(Ne.event.event)},expandedRowKeys:$,rowExpandable:function(){return ne.aggregation_group_type_index===void 0},expandIcon:function(Ne){var et=Ne.expanded,Ct=Ne.onExpand,ot=Ne.record,vn=Ne.expandable;return vn?et?e.a.createElement(Ve.a,{title:"Collapse"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(fa){Ie(ot.event.event),Ct(ot,fa)}},e.a.createElement(Wt.IconUnfoldLess,null))):e.a.createElement(Ve.a,{title:"Expand to see correlated properties for this event"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(fa){!D(ot.event.event)&&q(ot.event.event),ge(ot.event.event),Ct(ot,fa)}},e.a.createElement(Wt.IconUnfoldMore,null))):null}}},e.a.createElement(nt.a,{title:"Event",key:"eventName",render:function(Ne,et){return fn(et)},align:"left",ellipsis:!0}),e.a.createElement(nt.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(Ve.a,{title:"".concat(Object(Q.j)(ue.plural)," ").concat(ne.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},e.a.createElement(It.a,{className:"column-info"}))),key:"success_count",render:function(Ne,et){return Lt(et)},width:90,align:"center"}),e.a.createElement(nt.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(Ve.a,{title:e.a.createElement(e.a.Fragment,null,Object(Q.j)(ue.plural)," ",ne.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(It.a,{className:"column-info"}))),key:"failure_count",render:function(Ne,et){return ze(et)},width:120,align:"center"}),e.a.createElement(nt.a,{title:"",key:"actions",render:function(Ne,et){return e.a.createElement(Mn,{record:et})},width:30})))):null}var Mn=function(c){var u=c.record,p=Object(s.useValues)(_.c),C=p.insightProps,E=Object(tt.a)(C),x=Object(s.useActions)(E),D=x.excludeEventPropertyFromProject,M=x.excludeEventFromProject,A=x.setFunnelCorrelationDetails,I=Object(s.useValues)(E),N=I.isEventPropertyExcluded,$=I.isEventExcluded,B=u.event.event.split("::"),ne=Object(he.useState)(!1),ue=de()(ne,2),le=ue[0],Re=ue[1];return e.a.createElement(xe.a,{style:{justifyContent:"flex-end"}},e.a.createElement(ra.a,{visible:le,actionable:!0,onClickOutside:function(){return Re(!1)},overlay:e.a.createElement(e.a.Fragment,null,u.result_type===o.k.Events&&e.a.createElement(sn.a,{onClick:function(){return A(u)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(sn.a,{disabled:u.result_type===o.k.EventWithProperties?N(B[1]):$(B[0]),onClick:function(){return u.result_type===o.k.EventWithProperties?D(B[0],B[1]):M(B[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},e.a.createElement(sn.a,{type:"stealth",onClick:function(){return Re(!le)}},e.a.createElement(na.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},La=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function $n(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=Object(tt.a)(c),p=Object(s.useValues)(u),C=p.stepsWithCount,E=p.propertyCorrelationValues,x=p.propertyCorrelationTypes,D=p.excludedPropertyNames,M=p.parseDisplayNameForCorrelation,A=p.propertyCorrelationsLoading,I=p.inversePropertyNames,N=p.propertyNames,$=p.correlationPropKey,B=p.allProperties,ne=p.filters,ue=p.aggregationTargetLabel,le=Object(s.useActions)(u),Re=le.setPropertyCorrelationTypes,q=le.setPropertyNames,ge=le.openCorrelationPersonsModal,Ie=le.loadPropertyCorrelations,me=Object(s.useActions)(T.f),ae=me.reportCorrelationInteraction;Object(he.useEffect)(function(){N.length===0&&q(B),Ie({})},[ne]);var pe=function(ze){x?x.includes(ze)?Re(x.filter(function(yt){return yt!==ze})):Re([].concat(De()(x),[ze])):Re([ze])},be=function(ze){return e.a.createElement(un.c,{onClick:function(){ge(ze,!0)}},ze.success_count)},we=function(ze){return e.a.createElement(un.c,{onClick:function(){ge(ze,!1)}},ze.failure_count)},fn=function(ze){var yt=function(vn){return vn<10&&!Number.isInteger(vn)?vn.toFixed(1):vn.toFixed()},pt=ze.correlation_type===o.l.Success,Ne=M(ze),et=Ne.first_value,Ct=Ne.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,pt?e.a.createElement(ea.a,{style:{color:"green"}}):e.a.createElement(ta,{style:{color:"red"}})," ",e.a.createElement(mn.a,{value:et}),Ct!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(mn.a,{value:Ct,disablePopover:!0}))),e.a.createElement("div",null,Object(Q.j)(ue.plural)," ",ne.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,yt(ze.odds_ratio),"x ",pt?"more":"less"," likely"))," ","to have this property value"))};return C.length>1?e.a.createElement(rn,{offset:150,id:"".concat($,"-properties")},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement(xe.a,{className:"funnel-correlation-header"},e.a.createElement(je.a,{className:"table-header"},e.a.createElement(Wt.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),e.a.createElement(je.a,{className:"table-options"},e.a.createElement(xe.a,{style:{display:"contents"}},B.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"title"},"PROPERTIES "),e.a.createElement(La.a,{value:new Set(N),onChange:function(ze){return q(ze)},allProperties:I(D||[])}))),e.a.createElement(xe.a,{style:{display:"contents"}},e.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return pe(o.l.Success)}},e.a.createElement(On.a,{checked:x.includes(o.l.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return pe(o.l.Failure)}},e.a.createElement(On.a,{checked:x.includes(o.l.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),e.a.createElement(Kn.a,{dataSource:E,loading:A,scroll:{x:"max-content"},size:"small",rowKey:function(ze){return ze.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(ze,yt){return ae(o.k.Properties,"pagination change",{page:ze,page_size:yt})}}},e.a.createElement(nt.a,{title:"".concat(Object(Q.j)(ue.singular)," property"),key:"propertName",render:function(ze,yt){return fn(yt)},align:"left"}),e.a.createElement(nt.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(Ve.a,{title:"".concat(Object(Q.j)(ue.plural)," ").concat(ne.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},e.a.createElement(It.a,{className:"column-info"}))),key:"success_count",render:function(ze,yt){return be(yt)},width:90,align:"center"}),e.a.createElement(nt.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(Ve.a,{title:e.a.createElement(e.a.Fragment,null,Object(Q.j)(ue.plural)," ",ne.aggregation_group_type_index!=null?"that":"who"," have this property and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(It.a,{className:"column-info"}))),key:"failure_count",render:function(ze,yt){return we(yt)},width:120,align:"center"}),e.a.createElement(nt.a,{title:"",key:"actions",render:function(ze,yt){return e.a.createElement(Aa,{record:yt})},align:"center",width:30})))):null}var Aa=function(c){var u=c.record,p=Object(s.useValues)(_.c),C=p.insightProps,E=Object(tt.a)(C),x=Object(s.useActions)(E),D=x.excludePropertyFromProject,M=x.setFunnelCorrelationDetails,A=Object(s.useValues)(E),I=A.isPropertyExcludedFromProject,N=(u.event.event||"").split("::")[0],$=Object(he.useState)(!1),B=de()($,2),ne=B[0],ue=B[1];return e.a.createElement(xe.a,{style:{justifyContent:"flex-end"}},e.a.createElement(ra.a,{visible:ne,actionable:!0,onClickOutside:function(){return ue(!1)},overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(sn.a,{onClick:function(){return M(u)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(sn.a,{disabled:I(N),onClick:function(){return D(N)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},e.a.createElement(sn.a,{type:"stealth",onClick:function(){return ue(!ne)}},e.a.createElement(na.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},Hn=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Gn=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),ia=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),ca=function(){var c,u=Object(s.useValues)(_.c),p=u.insightProps,C=Object(s.useValues)(Object(tt.a)(p)),E=C.isSkewed,x=C.stepsWithCount,D=C.correlationFeedbackHidden,M=C.correlationDetailedFeedbackVisible,A=C.correlationFeedbackRating,I=C.correlationAnalysisAvailable,N=C.aggregationTargetLabel,$=Object(s.useActions)(Object(tt.a)(p)),B=$.sendCorrelationAnalysisFeedback,ne=$.hideSkewWarning,ue=$.hideCorrelationAnalysisFeedback,le=$.setCorrelationFeedbackRating,Re=$.setCorrelationDetailedFeedback,q=Object(s.useValues)(ia.a),ge=q.preflight,Ie=Object(he.useRef)(null);return x.length<=1?null:!I&&!(!(ge==null||(c=ge.instance_preferences)===null||c===void 0)&&c.disable_paid_fs)?e.a.createElement(Gn.a,{identifier:o.c.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(N.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(N.plural," are converting or dropping off.")}):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Correlation analysis"),e.a.createElement("div",{className:"funnel-correlation"},E&&e.a.createElement(Le.a,{className:"skew-warning"},e.a.createElement("h4",null,e.a.createElement(Wt.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",e.a.createElement(Hn.a,{className:"close-button",onClick:ne})),e.a.createElement("div",null,e.a.createElement("b",null,"Tips for adjusting your funnel:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),e.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),e.a.createElement(oa,null),!D&&e.a.createElement(Le.a,{className:"correlation-feedback"},e.a.createElement(xe.a,{className:"row-initial"},e.a.createElement(je.a,{span:14},e.a.createElement("h4",null,e.a.createElement(Ut.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),e.a.createElement(je.a,{span:9,style:{alignContent:"right"}},!!A&&e.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(me,ae){return e.a.createElement(an.a,{key:ae,className:"emoji-button",style:A===me[0]?{background:"#5375FF"}:A?{display:"none"}:{},onClick:function(){A===me[0]?le(0):(le(me[0]),setTimeout(function(){var be;return(be=Ie.current)===null||be===void 0?void 0:be.focus()},100))}},me[1])})),e.a.createElement(je.a,{span:1},e.a.createElement(Hn.a,{className:"close-button",onClick:ue}))),e.a.createElement("div",{style:{display:M?void 0:"none"}},e.a.createElement("form",{onSubmit:B},e.a.createElement(H.a,{onBlur:function(ae){return Re(ae.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:Ie,onKeyDown:function(ae){if(ae.key==="Enter"&&ae.metaKey){var pe;(pe=Ie.current)===null||pe===void 0||pe.blur(),B()}}}),e.a.createElement("div",{className:"text-right"},e.a.createElement(an.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),e.a.createElement($n,null)))},jn=t("./node_modules/core-js/modules/es.regexp.to-string.js"),Ln=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),da=t.n(Ln),Jn={};Jn.insert="head",Jn.singleton=!1;var Ra=En()(da.a,Jn),Ba=da.a.locals||{},G=t("./frontend/src/lib/components/InsightLabel/index.tsx"),J=t("./frontend/src/lib/colors.ts"),st=t("./frontend/src/lib/components/LemonCheckbox/index.ts");function Mt(){var m=Object(s.useValues)(_.c),c=m.filters,u=m.activeView,p=Object(s.useActions)(_.c),C=p.toggleInsightLegend,E=Object(s.useValues)(O.a),x=E.featureFlags;return(u===o.s.TRENDS&&c.display!==o.d.WorldMap&&c.display!==o.d.ActionsTable||u===o.s.STICKINESS)&&x[Ce.i.INSIGHT_LEGENDS]?e.a.createElement(an.a,{className:"insight-legend-button",onClick:C},e.a.createElement(Wt.IconLegend,null),e.a.createElement("span",{className:"insight-legend-button-title"},c.show_legend?"Hide":"Show"," legend")):null}function An(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=m.filters,p=Object(j.a)(c),C=Object(s.useValues)(p),E=C.indexedResults,x=C.hiddenLegendKeys,D=Object(s.useActions)(p),M=D.toggleVisibility,A=Object(J.c)("white",E.length,!!u.compare);return e.a.createElement("div",{className:"insight-legend-menu"},e.a.createElement("div",{className:"insight-legend-menu-scroll"},E&&E.map(function(I){var N,$;return e.a.createElement(xe.a,{key:I.id,className:"insight-legend-menu-item",wrap:!1},e.a.createElement(st.a,{className:"insight-legend-menu-item-inner",color:A[I.id],checked:!x[I.id],onChange:function(){return M(I.id)},rowProps:{fullWidth:!0},label:e.a.createElement(G.b,{key:I.id,seriesColor:A[I.id],action:I.action,fallbackName:I.breakdown_value===""?"None":I.label,hasMultipleSeries:E.length>1,breakdownValue:I.breakdown_value===""?"None":(N=I.breakdown_value)===null||N===void 0?void 0:N.toString(),compareValue:u.compare?Object(b.d)(I):void 0,pillMidEllipsis:(I==null||($=I.filter)===null||$===void 0?void 0:$.breakdown)==="$current_url",hideIcon:!0})}))})))}var ua=t("./node_modules/core-js/modules/es.array.every.js"),Ha=t("./node_modules/core-js/modules/es.array.flat-map.js"),Ga=t("./node_modules/core-js/modules/es.array.some.js"),Ja=t("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),Xa=t("./node_modules/core-js/modules/es.object.from-entries.js"),Wa=t("./frontend/src/lib/components/LemonTable/index.ts"),ka=t("./frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx"),za=t("./frontend/src/models/cohortsModel.ts"),Ka=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Ya=t("./frontend/src/lib/components/LemonRow/index.ts");function $a(){var m=Object(s.useValues)(_.c),c=m.insightProps,u=Object(tt.a)(c),p=Object(s.useValues)(u),C=p.insightLoading,E=p.steps,x=p.flattenedBreakdowns,D=p.hiddenLegendKeys,M=p.visibleStepsWithConversionMetrics,A=Object(s.useActions)(u),I=A.setHiddenById,N=A.toggleVisibilityByBreakdown,$=A.openPersonsModalForStep,B=Object(s.useValues)(za.a),ne=B.cohorts,ue=x.length===1,le=x==null?void 0:x.every(function(q){return!D[Object(Nt.m)(M==null?void 0:M[0],q.breakdown_value)]}),Re=[{children:[{title:ue?"Breakdown":e.a.createElement(st.a,{checked:le||(x!=null&&x.some(function(q){return!D[Object(Nt.m)(M==null?void 0:M[0],q.breakdown_value)]})?"indeterminate":!1),onChange:function(){I(Object.fromEntries(M.flatMap(function(ge){return x.map(function(Ie){return[Object(Nt.m)(ge,Ie.breakdown_value),le]})})))},label:"Breakdown",rowProps:{compact:!0,style:{padding:0,marginLeft:"-0.5rem",font:"inherit"}}}),dataIndex:"breakdown_value",render:function(ge){var Ie=Object(b.c)(ne,ge);return ue?e.a.createElement("span",{style:{fontWeight:500}},Ie):e.a.createElement(st.a,{checked:!D[Object(Nt.m)(M==null?void 0:M[0],ge)],onChange:function(){return N(ge)},label:Ie,rowProps:{compact:!0,style:{padding:0,marginLeft:"-0.5rem"}}})}},{title:"Total conversion",render:function(ge,Ie){var me,ae;return Object(Nt.c)((me=Ie==null||(ae=Ie.conversionRates)===null||ae===void 0?void 0:ae.total)!==null&&me!==void 0?me:0,!0)},align:"right"}]}].concat(De()(E.map(function(q,ge){return{title:e.a.createElement(Ya.a,{icon:e.a.createElement(Ka.a,{name:ge+1,color:Ka.b.Gray}),style:{font:"inherit",padding:0},compact:!0},e.a.createElement(yn.a,{filter:Object(ka.b)(q)})),children:[{title:"Completed",render:function(me,ae){var pe,be,we=(pe=ae.steps)===null||pe===void 0?void 0:pe[ge];return we&&e.a.createElement(un.c,{onClick:function(){return $({step:we,converted:!0})},style:{padding:0}},(be=we.count)!==null&&be!==void 0?be:0)},align:"right"},{title:"Rate",render:function(me,ae){var pe,be,we;return Object(Nt.c)((pe=(be=ae.steps)===null||be===void 0||(we=be[ge])===null||we===void 0?void 0:we.conversionRates.fromPrevious)!==null&&pe!==void 0?pe:0,!0)},align:"right"}].concat(De()(ge===0?[]:[{title:"Dropped",render:function(me,ae){var pe,be,we=(pe=ae.steps)===null||pe===void 0?void 0:pe[ge];return we&&e.a.createElement(un.c,{onClick:function(){return $({step:we,converted:!1})},style:{padding:0}},(be=we.droppedOffFromPrevious)!==null&&be!==void 0?be:0)},align:"right"},{title:"Rate",render:function(me,ae){var pe,be,we;return Object(Nt.c)(1-((pe=(be=ae.steps)===null||be===void 0||(we=be[ge])===null||we===void 0?void 0:we.conversionRates.fromPrevious)!==null&&pe!==void 0?pe:0),!0)},align:"right"},{title:"Avg. time",render:function(me,ae){var pe,be;return((pe=ae.steps)===null||pe===void 0||(be=pe[q.order])===null||be===void 0?void 0:be.average_conversion_time)!=null?Object(Q.N)(ae.steps[q.order].average_conversion_time,3):"\u2013"},align:"right",className:"nowrap"}]))}})));return e.a.createElement(Wa.a,{dataSource:x,columns:Re,loading:C,rowRibbonColor:function(ge){return Object(Nt.k)(ge==null?void 0:ge.breakdownIndex,x.length===1)},rowKey:"breakdownIndex"})}var pn,Ua=(pn={},ee()(pn,"".concat(o.s.TRENDS),e.a.createElement(oe,{view:o.s.TRENDS})),ee()(pn,"".concat(o.s.STICKINESS),e.a.createElement(oe,{view:o.s.STICKINESS})),ee()(pn,"".concat(o.s.LIFECYCLE),e.a.createElement(oe,{view:o.s.LIFECYCLE})),ee()(pn,"".concat(o.s.FUNNELS),e.a.createElement(K,null)),ee()(pn,"".concat(o.s.RETENTION),e.a.createElement(V.a,null)),ee()(pn,"".concat(o.s.PATHS),e.a.createElement(v.a,null)),pn);function ma(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1},c=m.disableHeader,u=m.disableTable,p=Object(s.useValues)(O.a),C=p.featureFlags,E=Object(s.useValues)(f.a),x=E.insightMode,D=Object(s.useValues)(_.c),M=D.insightProps,A=D.canEditInsight,I=D.insightLoading,N=D.activeView,$=D.loadedView,B=D.filters,ne=D.showTimeoutMessage,ue=D.showErrorMessage,le=D.csvExportUrl,Re=Object(s.useValues)(Object(tt.a)(M)),q=Re.areFiltersValid,ge=Re.isValidFunnel,Ie=Re.areExclusionFiltersValid,me=Re.correlationAnalysisAvailable,ae=function(){if(N!==$||I&&!ne)return e.a.createElement(e.a.Fragment,null,B.display!==o.d.ActionsTable&&B.display!==o.d.WorldMap&&e.a.createElement("div",{className:"trends-insights-container"}),e.a.createElement(Q.b,null));if($===o.s.FUNNELS){if(!q)return e.a.createElement(Fe.b,{actionable:x===o.t.Edit||u});if(!Ie)return e.a.createElement(Fe.a,null);if(!ge&&!I)return e.a.createElement(Fe.c,null)}return ue?e.a.createElement(Fe.d,null):ne?e.a.createElement(Fe.e,{isLoading:I}):null}();function pe(){return N===o.s.FUNNELS&&!ue&&!ne&&q&&B.funnel_viz_type===o.o.Steps&&!u&&(B==null?void 0:B.layout)===Ce.k.horizontal?e.a.createElement($a,null):(!B.display||(B==null?void 0:B.display)!==o.d.ActionsTable&&(B==null?void 0:B.display)!==o.d.ActionsBarValue)&&N===o.s.TRENDS&&!u?e.a.createElement(e.a.Fragment,null,le&&e.a.createElement("div",{className:"flex-center space-between-items",style:{margin:"1rem 0"}},e.a.createElement("h2",null,"Trend results"),e.a.createElement(Ve.a,{title:"Export this table in CSV format",placement:"left"},e.a.createElement(sn.a,{type:"secondary",icon:e.a.createElement(Wt.IconExport,{style:{color:"var(--primary)"}}),href:le},"Export"))),e.a.createElement(s.BindLogic,{logic:j.a,props:M},e.a.createElement(b.b,{isLegend:!0,showTotalCount:!0,filterKey:N===o.s.TRENDS?"trends_".concat(N):"",canEditSeriesNameInline:N===o.s.TRENDS&&x===o.t.Edit,canCheckUncheckSeries:A}))):null}return e.a.createElement(e.a.Fragment,null,e.a.createElement(Le.a,{title:c?null:e.a.createElement(Tn,{activeView:N,insightMode:x,filters:B,disableTable:!!u,disabled:!A}),"data-attr":"insights-graph",className:"insights-graph-container"},e.a.createElement("div",null,e.a.createElement(xe.a,{className:Object(Yt.a)("insights-graph-header",{funnels:N===o.s.FUNNELS}),align:"middle",justify:"space-between"},e.a.createElement(je.a,null,e.a.createElement(r,null)),e.a.createElement(je.a,null,N===o.s.FUNNELS?e.a.createElement(bn,null):null,N===o.s.PATHS?e.a.createElement(Rt,null):null,e.a.createElement(Mt,null))),ae||(C[Ce.i.INSIGHT_LEGENDS]&&(N===o.s.TRENDS||N===o.s.STICKINESS)&&B.show_legend?e.a.createElement(xe.a,{className:"insights-graph-container-row",wrap:!1},e.a.createElement(je.a,{className:"insights-graph-container-row-left"},Ua[N]),e.a.createElement(je.a,{className:"insights-graph-container-row-right"},e.a.createElement(An,null))):Ua[N]))),pe(),!u&&me&&N===o.s.FUNNELS&&e.a.createElement(ca,null))}try{ma.displayName="InsightContainer",ma.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:ma.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(m){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(fe,L,t){"use strict";t.d(L,"a",function(){return $e});var X=t("./node_modules/core-js/modules/es.array.iterator.js"),ee=t.n(X),Le=t("./node_modules/core-js/modules/es.object.to-string.js"),xe=t.n(Le),je=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),He=t.n(je),qe=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),he=t.n(qe),e=t("./node_modules/kea/lib/index.esm.js"),S=t("./frontend/src/scenes/insights/insightLogic.ts"),Ye=t("./frontend/src/scenes/insights/sharedUtils.ts");function De(R,U){var F=Object.keys(R);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(R);U&&(y=y.filter(function(h){return Object.getOwnPropertyDescriptor(R,h).enumerable})),F.push.apply(F,y)}return F}function s(R){for(var U=1;U<arguments.length;U++){var F=arguments[U]!=null?arguments[U]:{};U%2?De(Object(F),!0).forEach(function(y){he()(R,y,F[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(F)):De(Object(F)).forEach(function(y){Object.defineProperty(R,y,Object.getOwnPropertyDescriptor(F,y))})}return R}var $e=Object(e.kea)({props:{},key:Object(Ye.c)("new"),path:function(U){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",U]},connect:function(U){return{actions:[Object(S.c)(U),["setFilters"]],values:[Object(S.c)(U),["filters"]]}},actions:function(){return{setDates:function(F,y){return{dateFrom:F,dateTo:y}}}},selectors:{dates:[function(R){return[R.filters]},function(R){return{dateFrom:(R==null?void 0:R.date_from)||null,dateTo:(R==null?void 0:R.date_to)||null}}]},listeners:function(U){var F=U.actions,y=U.values;return{setDates:function(ie){var _e=ie.dateFrom,ve=ie.dateTo;F.setFilters(s(s({},y.filters),{},{date_from:_e||null,date_to:ve||null}))}}}})},"./frontend/src/scenes/trends/PersonsModal.tsx":function(fe,L,t){"use strict";t.d(L,"a",function(){return tn});var X=t("./node_modules/core-js/modules/es.array.concat.js"),ee=t("./node_modules/core-js/modules/es.array.find.js"),Le=t("./node_modules/core-js/modules/es.array.map.js"),xe=t("./node_modules/core-js/modules/es.object.keys.js"),je=t("./node_modules/core-js/modules/es.object.to-string.js"),He=t("./node_modules/core-js/modules/es.regexp.exec.js"),qe=t("./node_modules/core-js/modules/es.regexp.to-string.js"),he=t("./node_modules/core-js/modules/es.string.replace.js"),e=t("./node_modules/react/index.js"),S=t.n(e),Ye=t("./node_modules/kea/lib/index.esm.js"),De=t("./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js"),s=t("./node_modules/@ant-design/icons/es/icons/UsergroupAddOutlined.js"),$e=t("./node_modules/antd/es/modal/index.js"),R=t("./node_modules/antd/es/button/index.js"),U=t("./node_modules/antd/es/skeleton/index.js"),F=t("./node_modules/antd/es/input/index.js"),y=t("./node_modules/antd/es/select/index.js"),h=t("./frontend/src/types.ts"),ie=t("./frontend/src/scenes/trends/personsModalLogic.ts"),_e=t("./frontend/src/lib/components/CopyToClipboard.tsx"),ve=t("./frontend/src/lib/utils.tsx"),Ge=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),w=t.n(Ge),k=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss"),se=t.n(k),Ee={};Ee.insert="head",Ee.singleton=!1;var Se=w()(se.a,Ee),bt=se.a.locals||{},Xe=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),at=t("./frontend/src/lib/components/PropertiesTable.tsx"),te=t("./frontend/src/lib/components/DateDisplay/index.tsx"),Qe=t("./frontend/src/scenes/persons/PersonHeader.tsx"),n=t("./frontend/src/lib/api.ts"),o=t("./frontend/src/lib/components/LemonTable/index.ts"),Q=t("./frontend/src/scenes/persons/GroupActorHeader.tsx"),_=t("./frontend/src/lib/components/icons.tsx"),O=t("./frontend/src/lib/components/InsightLabel/index.tsx"),Ce=t("./frontend/src/lib/colors.ts"),St=t("./frontend/src/lib/logic/featureFlagLogic.ts"),Ve=t("./frontend/src/lib/constants.tsx"),_t=t("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),dt=t("./frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.tsx"),kt=t("./frontend/src/scenes/insights/WorldMap/countryCodes.ts");function tn(it){var Z,de,Pe,Be,ut,ke,mt=it.visible,Pt=it.view,Ke=it.filters,W=it.onSaveCohort,Jt=it.showModalActions,Ot=Jt===void 0?!0:Jt,Ue=it.aggregationTargetLabel,xt=Object(Ye.useValues)(ie.b),P=xt.people,ct=xt.loadingMorePeople,ye=xt.firstLoadedPeople,ft=xt.searchTerm,At=xt.isInitialLoad,Te=xt.peopleParams,vt=xt.actorLabel,Je=xt.sessionRecordingId,Oe=Object(Ye.useActions)(ie.b),Ae=Oe.hidePeople,gt=Oe.loadMorePeople,Xt=Oe.setFirstLoadedActors,Tt=Oe.setPersonsModalFilters,jt=Oe.setSearchTerm,nn=Oe.switchToDataPoint,zt=Oe.openRecordingModal,tt=Oe.closeRecordingModal,z=Object(Ye.useValues)(St.a),Vt=z.featureFlags,on=Object(e.useMemo)(function(){var We,Y,Ze;return At?"Loading ".concat(Ue.plural,"\u2026"):Ke.shown_as==="Stickiness"?S.a.createElement(S.a.Fragment,null,S.a.createElement(Xe.a,{value:(P==null?void 0:P.label)||"",disablePopover:!0})," stickiness on day ",P==null?void 0:P.day):Ke.display==="ActionsBarValue"||Ke.display==="ActionsPie"?S.a.createElement(Xe.a,{value:(P==null?void 0:P.label)||"",disablePopover:!0}):Ke.insight===h.s.FUNNELS?S.a.createElement(S.a.Fragment,null,((We=P==null?void 0:P.funnelStep)!==null&&We!==void 0?We:0)>=0?"Completed":"Dropped off at"," step"," ",Math.abs((Y=P==null?void 0:P.funnelStep)!==null&&Y!==void 0?Y:0)," \u2022 ",S.a.createElement(Xe.a,{value:(P==null?void 0:P.label)||"",disablePopover:!0})," ",P!=null&&P.breakdown_value?"\u2022 ".concat(P.breakdown_value):""):Ke.insight===h.s.PATHS?S.a.createElement(S.a.Fragment,null,P!=null&&P.pathsDropoff?"Dropped off after":"Completed"," step"," ",S.a.createElement(Xe.a,{value:(P==null?void 0:P.label.replace(/(^[0-9]+_)/,""))||"",disablePopover:!0})):Ke.display===h.d.WorldMap?S.a.createElement(S.a.Fragment,null,Object(ve.j)(vt),Te!=null&&Te.breakdown_value?" in ".concat(Object(kt.a)(Te==null?void 0:Te.breakdown_value)," ").concat(kt.b[Te==null?void 0:Te.breakdown_value]):""):S.a.createElement(S.a.Fragment,null,Object(ve.j)(vt)," on"," ",S.a.createElement(te.a,{interval:Ke.interval||"day",date:(P==null||(Ze=P.day)===null||Ze===void 0?void 0:Ze.toString())||""}))},[Ke,P,At]),Rn=Vt[Ve.i.NEW_INSIGHT_COHORTS],gn=!1,Bt=(Pt===h.s.TRENDS||Pt===h.s.STICKINESS||!!Rn&&(Pt===h.s.FUNNELS||Pt===h.s.PATHS))&&Ot,wn=Object(Ce.c)("white",P==null||(Z=P.crossDataset)===null||Z===void 0?void 0:Z.length),Qt=!!(!(P==null||(de=P.crossDataset)===null||de===void 0)&&de.find(function(We){var Y=We.action;return(Y==null?void 0:Y.math)&&Y.math!=="total"})),hn=!!(!(P==null||(Pe=P.crossDataset)===null||Pe===void 0)&&Pe.find(function(We){var Y=We.action;return Y==null?void 0:Y.order}));return S.a.createElement(S.a.Fragment,null,!!Je&&S.a.createElement(_t.a,{onClose:tt}),S.a.createElement($e.a,{title:on,visible:mt,onCancel:Ae,footer:P&&P.count>0&&(gn||Bt)&&S.a.createElement(S.a.Fragment,null,gn&&S.a.createElement(R.a,{icon:S.a.createElement(De.a,null),href:n.b.actions.determinePeopleCsvUrl({label:P.label,action:P.action,date_from:P.day,date_to:P.day,breakdown_value:P.breakdown_value},Ke),style:{marginRight:8},"data-attr":"person-modal-download-csv"},"Download CSV"),Bt&&S.a.createElement(R.a,{onClick:W,icon:S.a.createElement(s.a,null),"data-attr":"person-modal-save-as-cohort"},"Save as cohort")),width:600,className:"person-modal"},At?S.a.createElement("div",{style:{padding:16}},S.a.createElement(U.a,{active:!0})):P&&S.a.createElement(S.a.Fragment,null,S.a.createElement(F.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for persons by email, name, or ID",onChange:function(Y){jt(Y.target.value),Y.target.value||Xt(ye)},value:ft,onSearch:function(Y){return Y?Tt(Y,P,Ke):Xt(ye)}}),Vt[Ve.i.MULTI_POINT_PERSON_MODAL]&&!!(!((Be=P.crossDataset)===null||Be===void 0)&&Be.length)&&P.seriesId!==void 0&&S.a.createElement("div",{className:"data-point-selector"},S.a.createElement(y.a,{value:P.seriesId,onChange:function(Y){return nn(Y)}},P.crossDataset.map(function(We){var Y,Ze;return S.a.createElement(y.a.Option,{value:We.id,key:"".concat((Y=We.action)===null||Y===void 0?void 0:Y.id).concat(We.breakdown_value)},S.a.createElement(O.b,{seriesColor:wn[We.id],action:We.action,breakdownValue:We.breakdown_value===""?"None":(Ze=We.breakdown_value)===null||Ze===void 0?void 0:Ze.toString(),showCountedByTag:Qt,hasMultipleSeries:hn}))}))),S.a.createElement("div",{className:"user-count-subheader"},S.a.createElement(_.IconPersonFilled,{style:{fontSize:"1.125rem",marginRight:"0.5rem"}}),S.a.createElement("span",null,"This list contains"," ",S.a.createElement("b",null,P.count," unique ",Ue.plural),(Te==null?void 0:Te.pointValue)!==void 0&&(!(!((ut=Te.action)===null||ut===void 0)&&ut.math)||((ke=Te.action)===null||ke===void 0?void 0:ke.math)==="total")&&S.a.createElement(S.a.Fragment,null," ","who performed the event"," ",S.a.createElement("b",null,Te.pointValue," total"," ",Object(ve.qb)(Te.pointValue,"time",void 0,!1))),".")),P.count>0?S.a.createElement(o.a,{columns:[{title:"Person",key:"person",render:function(Y,Ze){return S.a.createElement(ln,{actor:Ze})}},{width:0,title:"Recordings",key:"recordings",render:function(Y,Ze){var cn,It;if(((cn=Ze.matched_recordings)===null||cn===void 0?void 0:cn.length)&&((It=Ze.matched_recordings)===null||It===void 0?void 0:It.length)>0)return S.a.createElement(dt.a,{sessionRecordings:Ze.matched_recordings,onOpenRecording:function(Cn){zt(Cn.session_id)}})}}],className:"persons-table",rowKey:"id",expandable:{expandedRowRender:function(Y){var Ze=Y.properties;return Object.keys(Ze).length?S.a.createElement(at.a,{properties:Ze}):"This person has no properties."}},embedded:!0,showHeader:!1,dataSource:P.people,nouns:["person","persons"]}):S.a.createElement("div",{className:"person-row-container person-row"},"We couldn't find any matching ",Ue.plural," for this data point."),(P==null?void 0:P.next)&&S.a.createElement("div",{style:{margin:"1rem",textAlign:"center"}},S.a.createElement(R.a,{type:"primary",style:{color:"white"},onClick:gt,loading:ct},"Load more ",Ue.plural)))))}function ln(it){var Z=it.actor;return Object(ve.W)(Z)?S.a.createElement("div",{key:Z.id,className:"person-row"},S.a.createElement("div",{className:"person-ids"},S.a.createElement("strong",null,S.a.createElement(Q.a,{actor:Z})))):S.a.createElement("div",{key:Z.id,className:"person-ids"},S.a.createElement("strong",null,S.a.createElement(Qe.a,{person:Z,withIcon:!1})),S.a.createElement(_e.a,{explicitValue:Z.distinct_ids[0],iconStyle:{color:"var(--primary)"},iconPosition:"end",className:"text-small text-muted-alt"},Object(ve.kb)(Z.distinct_ids[0],32)))}try{tn.displayName="PersonsModal",tn.__docgenInfo={description:"",displayName:"PersonsModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},onSaveCohort:{defaultValue:null,description:"",name:"onSaveCohort",required:!0,type:{name:"() => void"}},showModalActions:{defaultValue:{value:"true"},description:"",name:"showModalActions",required:!1,type:{name:"boolean"}},aggregationTargetLabel:{defaultValue:null,description:"",name:"aggregationTargetLabel",required:!0,type:{name:"{ singular: string; plural: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"]={docgenInfo:tn.__docgenInfo,name:"PersonsModal",path:"frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"})}catch(it){}try{ln.displayName="ActorRow",ln.__docgenInfo={description:"",displayName:"ActorRow",props:{actor:{defaultValue:null,description:"",name:"actor",required:!0,type:{name:"ActorType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"]={docgenInfo:ln.__docgenInfo,name:"ActorRow",path:"frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"})}catch(it){}},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(fe,L,t){"use strict";t.d(L,"a",function(){return qe});var X=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ee=t.n(X),Le=t("./node_modules/react/index.js"),xe=t.n(Le),je=t("./node_modules/antd/es/modal/index.js"),He=t("./node_modules/antd/es/input/index.js");function qe(he){var e=he.onOk,S=he.onCancel,Ye=he.visible,De=Object(Le.useState)(""),s=ee()(De,2),$e=s[0],R=s[1];return xe.a.createElement(je.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){e($e),R("")},onCancel:S,visible:Ye},xe.a.createElement("div",{className:"mb"},xe.a.createElement(He.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:$e,"data-attr":"cohort-name",onChange:function(F){return R(F.target.value)}})))}try{qe.displayName="SaveCohortModal",qe.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:qe.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(he){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(fe,L,t){"use strict";var X=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=t("./node_modules/react/index.js"),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},xe=Le,je=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),He=function(e,S){return ee.createElement(je.a,Object(X.a)(Object(X.a)({},e),{},{ref:S,icon:xe}))};He.displayName="BarChartOutlined";var qe=L.a=ee.forwardRef(He)},"./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js":function(fe,L,t){"use strict";var X=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=t("./node_modules/react/index.js"),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},xe=Le,je=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),He=function(e,S){return ee.createElement(je.a,Object(X.a)(Object(X.a)({},e),{},{ref:S,icon:xe}))};He.displayName="DownloadOutlined";var qe=L.a=ee.forwardRef(He)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(fe,L,t){"use strict";var X=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=t("./node_modules/react/index.js"),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},xe=Le,je=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),He=function(e,S){return ee.createElement(je.a,Object(X.a)(Object(X.a)({},e),{},{ref:S,icon:xe}))};He.displayName="OrderedListOutlined";var qe=L.a=ee.forwardRef(He)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(fe,L,t){"use strict";var X=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=t("./node_modules/react/index.js"),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},xe=Le,je=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),He=function(e,S){return ee.createElement(je.a,Object(X.a)(Object(X.a)({},e),{},{ref:S,icon:xe}))};He.displayName="PercentageOutlined";var qe=L.a=ee.forwardRef(He)},"./node_modules/@ant-design/icons/es/icons/SaveOutlined.js":function(fe,L,t){"use strict";var X=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=t("./node_modules/react/index.js"),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},xe=Le,je=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),He=function(e,S){return ee.createElement(je.a,Object(X.a)(Object(X.a)({},e),{},{ref:S,icon:xe}))};He.displayName="SaveOutlined";var qe=L.a=ee.forwardRef(He)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{width:100%;font-size:.75rem}",""]),fe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.properties-table-key{min-width:12rem;display:flex;align-items:center;justify-content:space-between}.property-value-type{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;text-transform:uppercase;cursor:default}.property-value-type:not(:first-child){margin-left:.25rem}.properties-table-value{min-width:12rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;display:flex;align-items:center}.properties-table-value .value-link>*{vertical-align:middle}.properties-table-value .value-link>svg{margin-left:.25rem;font-size:1rem}.properties-table-value .editable{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;-webkit-text-decoration-color:#5375ff;text-decoration-color:#5375ff;cursor:pointer}",""]),fe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,'.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.experiment-form .metrics-selection{border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;width:100%}.experiment-form .metrics-selection .action-filters-bordered .draggable-action-filter{border-bottom:1px solid rgba(0,0,0,.15);padding:1rem .25rem;margin-top:0}.experiment-form .metrics-selection .action-filters-bordered .row-action-btn{color:#35416b}.experiment-form .person-selection{width:100%;border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid rgba(0,0,0,.15);min-height:unset;background-color:#fff;padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(calc(90vh - 16rem),36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .graph-container{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{display:flex;align-items:center;height:3.5rem;padding:0 .5rem;background:#fff;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);border-left:1px solid rgba(0,0,0,.15);border-right:1px solid rgba(0,0,0,.15)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:#bf411a}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.15);margin-bottom:1rem}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.view-experiment .exp-description{font-style:italic;color:rgba(0,0,0,.5)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list{list-style:none;margin:0;padding:0}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:#fafaf9;border:1px solid rgba(0,0,0,.15);width:100%;min-height:320px;font-size:24px}.view-experiment .end-experiment-btn{background:#77b96c;color:#fff}.view-experiment .end-experiment-btn:hover{color:#000}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:#fafaf9;color:#35416b;font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid rgba(0,0,0,.15);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:#d9d9d9}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid rgba(0,0,0,.15)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),fe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),fe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),fe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),fe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),fe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss":function(fe,L,t){var X=t("./node_modules/css-loader/dist/runtime/api.js");L=X(!1),L.push([fe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.person-modal .ant-modal-header{padding:1rem}.person-modal .ant-modal-title{overflow:hidden;text-overflow:ellipsis}.person-modal .ant-modal-content{overflow:hidden}.person-modal .ant-modal-body{padding:0;max-height:60vh;overflow-y:auto}.person-modal .ant-modal-footer .ant-btn{color:#5375ff}.person-modal .ant-input-search{padding:1rem}.person-modal .persons-table{border-top:1px solid var(--border);border-bottom:1px solid var(--border)}.person-modal .person-ids{display:flex;flex-direction:column}.person-modal .user-count-subheader{padding:.5rem 1rem;color:var(--muted-alt)}.person-modal .user-count-subheader>*{vertical-align:middle}.person-modal .person-row-container{padding:.5rem 1rem}.person-modal .data-point-selector{padding:.5rem 1rem;border-bottom:1px solid var(--border)}.person-modal .data-point-selector .ant-select{display:block;width:100%}",""]),fe.exports=L}}]);
