"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[59688],{"./frontend/src/toolbar/actions/ButtonWindow.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Actions:function(){return Actions},ActionsWithResults:function(){return ActionsWithResults},Flags:function(){return Flags}});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_mocks_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/mocks/browser.tsx"),_toolbar_Toolbar_stories__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/toolbar/Toolbar.stories.tsx"),_toolbar_toolbarLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/toolbar/toolbarLogic.ts"),_toolbar_actions_actionsTabLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/toolbar/actions/actionsTabLogic.tsx"),_toolbar_actions_ActionsTab__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/toolbar/actions/ActionsTab.tsx"),_toolbar_button_ButtonWindow__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/toolbar/button/ButtonWindow.tsx"),_toolbar_flags_FeatureFlags__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/toolbar/flags/FeatureFlags.tsx"),_toolbar_flags_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/toolbar/flags/featureFlagsLogic.ts"),_toolbar_actions_actionsLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/toolbar/actions/actionsLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Scenes-Other/Toolbar/Components",parameters:{layout:"fullscreen",viewMode:"story"}};const Template=props=>{(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({get:{"/decide":{config:{enable_collect_everything:!0},toolbarParams:{toolbarVersion:"toolbar",jsURL:"http://localhost:8234/"},isAuthenticated:!0,supportedCompression:["gzip","gzip-js","lz64"],featureFlags:{},sessionRecording:{endpoint:"/s/"}},"/api/element/stats/":{results:[{count:1592},{count:12}]},"/api/projects/@current/feature_flags/my_flags":[{feature_flag:{id:15927,name:"Example flag",key:"example-one",deleted:!1,active:!0,created_at:"2023-08-17T19:37:05.259538Z",filters:{}},value:!1},{feature_flag:{id:15927,name:"Another example flag",key:"example-two",deleted:!1,active:!0,created_at:"2023-08-17T19:37:05.259538Z",filters:{}},value:!0},{feature_flag:{id:13859,name:"Example multivariate flag",key:"my-multi-example",filters:{multivariate:{variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}},deleted:!1,active:!0},value:"control"},{feature_flag:{id:13859,name:"Example overridden multivariate flag",key:"my-other-multi-example",filters:{multivariate:{variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}},deleted:!1,active:!0},value:"control"}],"/api/projects/@current/actions/":props.listActionsAPIResponse||{results:[]}}});const toolbarParams={temporaryToken:"UExb1dCsoqBtrhrZYxzmxXQ7XdjVH5Ea_zbQjTFuJqk",actionId:void 0,userIntent:void 0,dataAttributes:["data-attr"],apiURL:"/",jsURL:"http://localhost:8234/",userEmail:"foobar@posthog.com"};(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)((0,_toolbar_toolbarLogic__WEBPACK_IMPORTED_MODULE_3__.toolbarLogic)(toolbarParams));const theMountedActionsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_toolbar_actions_actionsLogic__WEBPACK_IMPORTED_MODULE_9__.M);"actions"===props.name&&theMountedActionsLogic.actions.getActions(),(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_toolbar_actions_actionsTabLogic__WEBPACK_IMPORTED_MODULE_4__.actionsTabLogic);const theMountedFlagsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_toolbar_flags_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_8__.b);return"flags"===props.name&&theMountedFlagsLogic.actions.storeLocalOverrides({"example-two":!1,"my-other-multi-example":"test"}),(0,_toolbar_Toolbar_stories__WEBPACK_IMPORTED_MODULE_2__.useToolbarStyles)(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_toolbar_button_ButtonWindow__WEBPACK_IMPORTED_MODULE_6__.Y,{name:props.name,label:props.label,tagComponent:props.tagComponent,visible:!0,close:()=>{},position:{x:0,y:0},savePosition:()=>{},children:props.contents})})},Actions=Template.bind({});Actions.args={contents:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_toolbar_actions_ActionsTab__WEBPACK_IMPORTED_MODULE_5__.X,{}),name:"actions",label:"Actions"};const ActionsWithResults=Template.bind({});ActionsWithResults.args={contents:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_toolbar_actions_ActionsTab__WEBPACK_IMPORTED_MODULE_5__.X,{}),name:"actions",label:"Actions",listActionsAPIResponse:{results:[{id:49103,name:"Clicked notification row",description:"",post_to_slack:!1,slack_message_format:"",steps:[{id:"60889",event:"$autocapture",tag_name:null,text:null,text_matching:null,href:null,href_matching:null,selector:".notifications-menu .activity-log-row",url:null,name:null,url_matching:"contains",properties:[]}],created_at:"2023-08-22T06:31:40.495488Z",created_by:{id:5042,uuid:"017bcbcf-2391-0000-1868-14fb987285c5",distinct_id:"PqMBBFBfKo638PwvjCWTSZ6dnswYzJ3RtH8VIHCBWAy",first_name:"Paul",email:"paul@posthog.com",is_email_verified:!0},deleted:!1,is_calculating:!1,last_calculated_at:"2023-08-22T06:31:40.495197Z",team_id:2,is_action:!0,bytecode_error:null,tags:[]},{id:49059,name:"clicked nav bar2",description:"",post_to_slack:!1,slack_message_format:"",steps:[{id:"60829",event:"$autocapture",tag_name:null,text:"Products",text_matching:null,href:"/product-analytics",href_matching:null,selector:null,url:null,name:"",url_matching:"exact",properties:[]},{id:"60830",event:"$autocapture",tag_name:null,text:null,text_matching:null,href:null,href_matching:null,selector:".border-b .h-full:nth-child(2) > .text-\\[13\\.5px\\]",url:null,name:"",url_matching:"exact",properties:[]}],created_at:"2023-08-21T20:54:17.218311Z",created_by:{id:6352,uuid:"017d5334-911a-0000-6954-2d394263f3ca",distinct_id:"48vHN2rW28SvzA6D4NdgHajLOjBP1ulsI0Rr5DNas4i",first_name:"Cameron",email:"cameron@posthog.com",is_email_verified:!0},deleted:!1,is_calculating:!1,last_calculated_at:"2023-08-21T20:54:17.218023Z",team_id:2,is_action:!0,bytecode_error:null,tags:[]},{id:49050,name:"Clicked Products in nav bar",description:"",post_to_slack:!1,slack_message_format:"",steps:[{id:"60819",event:"$autocapture",tag_name:null,text:"Products",text_matching:null,href:"/product-analytics",href_matching:null,selector:null,url:null,name:"",url_matching:"exact",properties:[]},{id:"60820",event:"$autocapture",tag_name:null,text:"Pricing",text_matching:null,href:"/pricing",href_matching:null,selector:null,url:null,name:null,url_matching:"contains",properties:[]}],created_at:"2023-08-21T18:46:13.210958Z",created_by:{id:6352,uuid:"017d5334-911a-0000-6954-2d394263f3ca",distinct_id:"48vHN2rW28SvzA6D4NdgHajLOjBP1ulsI0Rr5DNas4i",first_name:"Cameron",email:"cameron@posthog.com",is_email_verified:!0},deleted:!1,is_calculating:!1,last_calculated_at:"2023-08-21T18:46:13.210590Z",team_id:2,is_action:!0,bytecode_error:null,tags:[]}]}};const Flags=Template.bind({});Flags.args={contents:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_toolbar_flags_FeatureFlags__WEBPACK_IMPORTED_MODULE_7__.T,{}),name:"flags",label:"Feature Flags",tagComponent:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"overridden-tag",children:"1 overridden"})},Actions.parameters={...Actions.parameters,docs:{...Actions.parameters?.docs,source:{originalSource:"(props: StoryProps) => {\n  useStorybookMocks({\n    get: {\n      '/decide': {\n        config: {\n          enable_collect_everything: true\n        },\n        toolbarParams: {\n          toolbarVersion: 'toolbar',\n          jsURL: 'http://localhost:8234/'\n        },\n        isAuthenticated: true,\n        supportedCompression: ['gzip', 'gzip-js', 'lz64'],\n        featureFlags: {},\n        sessionRecording: {\n          endpoint: '/s/'\n        }\n      },\n      '/api/element/stats/': {\n        results: [{\n          count: 1592\n        }, {\n          count: 12\n        }]\n      },\n      '/api/projects/@current/feature_flags/my_flags': [{\n        feature_flag: {\n          id: 15927,\n          name: 'Example flag',\n          key: 'example-one',\n          deleted: false,\n          active: true,\n          created_at: '2023-08-17T19:37:05.259538Z',\n          filters: {}\n        },\n        value: false\n      }, {\n        feature_flag: {\n          id: 15927,\n          name: 'Another example flag',\n          key: 'example-two',\n          deleted: false,\n          active: true,\n          created_at: '2023-08-17T19:37:05.259538Z',\n          filters: {}\n        },\n        value: true\n      }, {\n        feature_flag: {\n          id: 13859,\n          name: 'Example multivariate flag',\n          key: 'my-multi-example',\n          filters: {\n            multivariate: {\n              variants: [{\n                key: 'control',\n                rollout_percentage: 50\n              }, {\n                key: 'test',\n                rollout_percentage: 50\n              }]\n            }\n          },\n          deleted: false,\n          active: true\n        },\n        value: 'control'\n      }, {\n        feature_flag: {\n          id: 13859,\n          name: 'Example overridden multivariate flag',\n          key: 'my-other-multi-example',\n          filters: {\n            multivariate: {\n              variants: [{\n                key: 'control',\n                rollout_percentage: 50\n              }, {\n                key: 'test',\n                rollout_percentage: 50\n              }]\n            }\n          },\n          deleted: false,\n          active: true\n        },\n        value: 'control'\n      }],\n      '/api/projects/@current/actions/': props.listActionsAPIResponse || {\n        results: []\n      }\n    }\n  });\n  const toolbarParams = {\n    temporaryToken: 'UExb1dCsoqBtrhrZYxzmxXQ7XdjVH5Ea_zbQjTFuJqk',\n    actionId: undefined,\n    userIntent: undefined,\n    dataAttributes: ['data-attr'],\n    apiURL: '/',\n    jsURL: 'http://localhost:8234/',\n    userEmail: 'foobar@posthog.com'\n  };\n  useMountedLogic(toolbarLogic(toolbarParams));\n  const theMountedActionsLogic = useMountedLogic(actionsLogic);\n  if (props.name === 'actions') {\n    theMountedActionsLogic.actions.getActions();\n  }\n  useMountedLogic(actionsTabLogic);\n  const theMountedFlagsLogic = useMountedLogic(featureFlagsLogic);\n  if (props.name === 'flags') {\n    theMountedFlagsLogic.actions.storeLocalOverrides({\n      'example-two': false,\n      'my-other-multi-example': 'test'\n    });\n  }\n  useToolbarStyles();\n  return <div className=\"\">\n            <ButtonWindow name={props.name} label={props.label} tagComponent={props.tagComponent} visible={true} close={() => {}} position={{\n      x: 0,\n      y: 0\n    }} savePosition={() => {}}>\n                {props.contents}\n            </ButtonWindow>\n        </div>;\n}",...Actions.parameters?.docs?.source}}},ActionsWithResults.parameters={...ActionsWithResults.parameters,docs:{...ActionsWithResults.parameters?.docs,source:{originalSource:"(props: StoryProps) => {\n  useStorybookMocks({\n    get: {\n      '/decide': {\n        config: {\n          enable_collect_everything: true\n        },\n        toolbarParams: {\n          toolbarVersion: 'toolbar',\n          jsURL: 'http://localhost:8234/'\n        },\n        isAuthenticated: true,\n        supportedCompression: ['gzip', 'gzip-js', 'lz64'],\n        featureFlags: {},\n        sessionRecording: {\n          endpoint: '/s/'\n        }\n      },\n      '/api/element/stats/': {\n        results: [{\n          count: 1592\n        }, {\n          count: 12\n        }]\n      },\n      '/api/projects/@current/feature_flags/my_flags': [{\n        feature_flag: {\n          id: 15927,\n          name: 'Example flag',\n          key: 'example-one',\n          deleted: false,\n          active: true,\n          created_at: '2023-08-17T19:37:05.259538Z',\n          filters: {}\n        },\n        value: false\n      }, {\n        feature_flag: {\n          id: 15927,\n          name: 'Another example flag',\n          key: 'example-two',\n          deleted: false,\n          active: true,\n          created_at: '2023-08-17T19:37:05.259538Z',\n          filters: {}\n        },\n        value: true\n      }, {\n        feature_flag: {\n          id: 13859,\n          name: 'Example multivariate flag',\n          key: 'my-multi-example',\n          filters: {\n            multivariate: {\n              variants: [{\n                key: 'control',\n                rollout_percentage: 50\n              }, {\n                key: 'test',\n                rollout_percentage: 50\n              }]\n            }\n          },\n          deleted: false,\n          active: true\n        },\n        value: 'control'\n      }, {\n        feature_flag: {\n          id: 13859,\n          name: 'Example overridden multivariate flag',\n          key: 'my-other-multi-example',\n          filters: {\n            multivariate: {\n              variants: [{\n                key: 'control',\n                rollout_percentage: 50\n              }, {\n                key: 'test',\n                rollout_percentage: 50\n              }]\n            }\n          },\n          deleted: false,\n          active: true\n        },\n        value: 'control'\n      }],\n      '/api/projects/@current/actions/': props.listActionsAPIResponse || {\n        results: []\n      }\n    }\n  });\n  const toolbarParams = {\n    temporaryToken: 'UExb1dCsoqBtrhrZYxzmxXQ7XdjVH5Ea_zbQjTFuJqk',\n    actionId: undefined,\n    userIntent: undefined,\n    dataAttributes: ['data-attr'],\n    apiURL: '/',\n    jsURL: 'http://localhost:8234/',\n    userEmail: 'foobar@posthog.com'\n  };\n  useMountedLogic(toolbarLogic(toolbarParams));\n  const theMountedActionsLogic = useMountedLogic(actionsLogic);\n  if (props.name === 'actions') {\n    theMountedActionsLogic.actions.getActions();\n  }\n  useMountedLogic(actionsTabLogic);\n  const theMountedFlagsLogic = useMountedLogic(featureFlagsLogic);\n  if (props.name === 'flags') {\n    theMountedFlagsLogic.actions.storeLocalOverrides({\n      'example-two': false,\n      'my-other-multi-example': 'test'\n    });\n  }\n  useToolbarStyles();\n  return <div className=\"\">\n            <ButtonWindow name={props.name} label={props.label} tagComponent={props.tagComponent} visible={true} close={() => {}} position={{\n      x: 0,\n      y: 0\n    }} savePosition={() => {}}>\n                {props.contents}\n            </ButtonWindow>\n        </div>;\n}",...ActionsWithResults.parameters?.docs?.source}}},Flags.parameters={...Flags.parameters,docs:{...Flags.parameters?.docs,source:{originalSource:"(props: StoryProps) => {\n  useStorybookMocks({\n    get: {\n      '/decide': {\n        config: {\n          enable_collect_everything: true\n        },\n        toolbarParams: {\n          toolbarVersion: 'toolbar',\n          jsURL: 'http://localhost:8234/'\n        },\n        isAuthenticated: true,\n        supportedCompression: ['gzip', 'gzip-js', 'lz64'],\n        featureFlags: {},\n        sessionRecording: {\n          endpoint: '/s/'\n        }\n      },\n      '/api/element/stats/': {\n        results: [{\n          count: 1592\n        }, {\n          count: 12\n        }]\n      },\n      '/api/projects/@current/feature_flags/my_flags': [{\n        feature_flag: {\n          id: 15927,\n          name: 'Example flag',\n          key: 'example-one',\n          deleted: false,\n          active: true,\n          created_at: '2023-08-17T19:37:05.259538Z',\n          filters: {}\n        },\n        value: false\n      }, {\n        feature_flag: {\n          id: 15927,\n          name: 'Another example flag',\n          key: 'example-two',\n          deleted: false,\n          active: true,\n          created_at: '2023-08-17T19:37:05.259538Z',\n          filters: {}\n        },\n        value: true\n      }, {\n        feature_flag: {\n          id: 13859,\n          name: 'Example multivariate flag',\n          key: 'my-multi-example',\n          filters: {\n            multivariate: {\n              variants: [{\n                key: 'control',\n                rollout_percentage: 50\n              }, {\n                key: 'test',\n                rollout_percentage: 50\n              }]\n            }\n          },\n          deleted: false,\n          active: true\n        },\n        value: 'control'\n      }, {\n        feature_flag: {\n          id: 13859,\n          name: 'Example overridden multivariate flag',\n          key: 'my-other-multi-example',\n          filters: {\n            multivariate: {\n              variants: [{\n                key: 'control',\n                rollout_percentage: 50\n              }, {\n                key: 'test',\n                rollout_percentage: 50\n              }]\n            }\n          },\n          deleted: false,\n          active: true\n        },\n        value: 'control'\n      }],\n      '/api/projects/@current/actions/': props.listActionsAPIResponse || {\n        results: []\n      }\n    }\n  });\n  const toolbarParams = {\n    temporaryToken: 'UExb1dCsoqBtrhrZYxzmxXQ7XdjVH5Ea_zbQjTFuJqk',\n    actionId: undefined,\n    userIntent: undefined,\n    dataAttributes: ['data-attr'],\n    apiURL: '/',\n    jsURL: 'http://localhost:8234/',\n    userEmail: 'foobar@posthog.com'\n  };\n  useMountedLogic(toolbarLogic(toolbarParams));\n  const theMountedActionsLogic = useMountedLogic(actionsLogic);\n  if (props.name === 'actions') {\n    theMountedActionsLogic.actions.getActions();\n  }\n  useMountedLogic(actionsTabLogic);\n  const theMountedFlagsLogic = useMountedLogic(featureFlagsLogic);\n  if (props.name === 'flags') {\n    theMountedFlagsLogic.actions.storeLocalOverrides({\n      'example-two': false,\n      'my-other-multi-example': 'test'\n    });\n  }\n  useToolbarStyles();\n  return <div className=\"\">\n            <ButtonWindow name={props.name} label={props.label} tagComponent={props.tagComponent} visible={true} close={() => {}} position={{\n      x: 0,\n      y: 0\n    }} savePosition={() => {}}>\n                {props.contents}\n            </ButtonWindow>\n        </div>;\n}",...Flags.parameters?.docs?.source}}}}}]);