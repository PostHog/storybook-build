(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{5797:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MATCHING_EVENT_ICON_SIZE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return SessionsView}));__webpack_require__(39),__webpack_require__(35),__webpack_require__(267);var defineProperty=__webpack_require__(8),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(2),lib=__webpack_require__(21),space=__webpack_require__(5651),es_button=__webpack_require__(109),row=__webpack_require__(354),es_switch=__webpack_require__(5613),badge=__webpack_require__(5904),spin=__webpack_require__(598),Link=__webpack_require__(57),sessionsTableLogic=__webpack_require__(1199),utils=__webpack_require__(11),slicedToArray=(__webpack_require__(43),__webpack_require__(36),__webpack_require__(322),__webpack_require__(103),__webpack_require__(45),__webpack_require__(15)),slicedToArray_default=__webpack_require__.n(slicedToArray),table=__webpack_require__(2620),scenes_events=__webpack_require__(1796),Property=__webpack_require__(676),PropertyKeyInfo=__webpack_require__(61),ResizableTable=__webpack_require__(583),ExpandIcon=__webpack_require__(1821),MonitorOutlined=__webpack_require__(5906),Tooltip=__webpack_require__(56);function SessionDetails(_ref){var session=_ref.session,filteredSessionEvents=Object(index_esm.useValues)(sessionsTableLogic.a).filteredSessionEvents,loadSessionEvents=Object(index_esm.useActions)(sessionsTableLogic.a).loadSessionEvents,_useState=Object(react.useState)(1),_useState2=slicedToArray_default()(_useState,2),page=_useState2[0],setPage=_useState2[1],_useState3=Object(react.useState)(50),_useState4=slicedToArray_default()(_useState3,2),pageSize=_useState4[0],setPageSize=_useState4[1],events=filteredSessionEvents[session.global_session_id],matchingEventIds=Object(react.useMemo)((function(){return new Set(session.matching_events||[])}),[session.matching_events]);Object(react.useEffect)((function(){events||loadSessionEvents(session)}),[]);var columns=[{title:"Event",key:"id",render:function RenderEvent(event){return react_default.a.createElement(PropertyKeyInfo.b,{value:Object(utils.z)(event),ellipsis:!1})}},{title:"URL / screen",key:"url",render:function renderURL(event){if(!event)return{props:{colSpan:0}};var param=event.properties.$current_url?"$current_url":"$screen_name";return react_default.a.createElement(Property.a,{value:event.properties[param]})},ellipsis:!0},{title:"Timestamp",render:function RenderTimestamp(_ref2){var timestamp=_ref2.timestamp;return react_default.a.createElement("span",null,Object(utils.G)(timestamp,!0))}},{title:"Time since previous event",render:function RenderElapsed(_ref3,_,index){var timestamp=_ref3.timestamp,realIndex=(page-1)*pageSize+index,lastEvent=realIndex>0?null==events?void 0:events[realIndex-1]:null;return react_default.a.createElement("span",null,lastEvent?Object(utils.H)(lastEvent.timestamp,timestamp):"0s")}}];return react_default.a.createElement(table.a,{columns:columns,rowKey:"id",rowClassName:function rowClassName(event){return matchingEventIds.has(event.id)?"sessions-event-highlighted":""},dataSource:events,loading:!events,pagination:{pageSize:pageSize,hideOnSinglePage:!events||events.length<10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100","200","500"],onChange:function onChange(changedPage,changedPageSize){setPage(changedPage),setPageSize(changedPageSize||50)}},expandable:{expandedRowRender:function renderExpand(event){return react_default.a.createElement(scenes_events.a,{event:event})},rowExpandable:function rowExpandable(event){return!!event},expandRowByClick:!0,columnWidth:ResizableTable.a+MATCHING_EVENT_ICON_SIZE,expandIcon:function _renderExpandIcon(expandProps){var event=expandProps.record;return react_default.a.createElement(ExpandIcon.a,expandProps,matchingEventIds.has(event.id)?react_default.a.createElement(Tooltip.a,{title:"Matches your event filters"},react_default.a.createElement("div",{className:"sessions-event-matching-events-icon cursor-pointer ml-05"},react_default.a.createElement(MonitorOutlined.a,null))):react_default.a.createElement(react_default.a.Fragment,null))}}})}try{SessionDetails.displayName="SessionDetails",SessionDetails.__docgenInfo={description:"",displayName:"SessionDetails",props:{session:{defaultValue:null,description:"",name:"session",required:!0,type:{name:"SessionType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/SessionDetails.tsx#SessionDetails"]={docgenInfo:SessionDetails.__docgenInfo,name:"SessionDetails",path:"frontend/src/scenes/sessions/SessionDetails.tsx#SessionDetails"})}catch(__react_docgen_typescript_loader_error){}var dayjs_min=__webpack_require__(32),dayjs_min_default=__webpack_require__.n(dayjs_min),QuestionCircleOutlined=__webpack_require__(2615),PoweroffOutlined=__webpack_require__(5907),CaretLeftOutlined=__webpack_require__(5908),CaretRightOutlined=__webpack_require__(5802),PlayCircleOutlined=__webpack_require__(5732),injectStylesIntoStyleTag=(__webpack_require__(432),__webpack_require__(22)),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),SessionRecordingsButton=__webpack_require__(5872),SessionRecordingsButton_default=__webpack_require__.n(SessionRecordingsButton),options={insert:"head",singleton:!1},ArrowRightOutlined=(injectStylesIntoStyleTag_default()(SessionRecordingsButton_default.a,options),SessionRecordingsButton_default.a.locals,__webpack_require__(2621)),DownOutlined=__webpack_require__(592),Popup=__webpack_require__(185),clsx_m=__webpack_require__(92);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var SessionRecordingsButton_sessionPlayerUrl=function sessionPlayerUrl(sessionRecordingId,source){return"".concat(location.pathname,"?").concat(Object(utils.ob)(_objectSpread(_objectSpread({},Object(utils.C)()),{},{sessionRecordingId:sessionRecordingId,source:source})))};function SessionRecordingsButton_SessionRecordingsButton(_ref){var sessionRecordings=_ref.sessionRecordings,source=_ref.source,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),areRecordingsShown=_useState2[0],setAreRecordingsShown=_useState2[1],wereAllRecordingsViewed=!sessionRecordings.some((function(_ref2){return!_ref2.viewed})),isSingleRecording=1===sessionRecordings.length,ButtonWrapper=Object(react.useCallback)((function(_ref3){var setRef=_ref3.setRef,children=_ref3.children;return isSingleRecording?react_default.a.createElement("div",{className:"session-recordings-button__wrapper",ref:setRef},react_default.a.createElement(Link.a,{to:SessionRecordingsButton_sessionPlayerUrl(sessionRecordings[0].id,source),onClick:function onClick(event){event.stopPropagation(),setAreRecordingsShown(!1)},onMouseEnter:function onMouseEnter(){return setAreRecordingsShown(!0)},onMouseLeave:function onMouseLeave(){return setAreRecordingsShown(!1)}},children)):react_default.a.createElement("div",{ref:setRef,className:"session-recordings-button__wrapper",onClick:function onClick(event){event.stopPropagation(),setAreRecordingsShown((function(previousValue){return!previousValue}))}},children)}),[sessionRecordings,setAreRecordingsShown]);return react_default.a.createElement(Popup.a,{visible:areRecordingsShown,placement:"bottom-end",fallbackPlacements:["top-end"],className:"session-recordings-popup",overlay:sessionRecordings.map((function(_ref4,index){var id=_ref4.id,viewed=_ref4.viewed,recording_duration=_ref4.recording_duration,start_time=_ref4.start_time;return react_default.a.createElement(Link.a,{key:id,to:SessionRecordingsButton_sessionPlayerUrl(id,source),className:Object(clsx_m.default)("session-recordings-popup__link",viewed&&"session-recordings-popup__link--viewed"),onClick:function onClick(event){event.stopPropagation(),setAreRecordingsShown(!1)},"data-attr":"sessions-player-button"},react_default.a.createElement("div",{className:"session-recordings-popup__row"},react_default.a.createElement("div",{className:"session-recordings-popup__label"},react_default.a.createElement(Tooltip.a,{title:viewed?"This recording has been watched already.":"This recording has not been watched yet."},react_default.a.createElement(PlayCircleOutlined.a,{className:viewed?"text-muted":void 0})),"Recording ",index+1),react_default.a.createElement("div",{className:"session-recordings-popup__detail text-muted"},Object(utils.G)(start_time)," â€¢ ",Object(utils.k)(recording_duration))))})),onClickOutside:function onClickOutside(){setAreRecordingsShown(!1)}},(function(_ref5){var setRef=_ref5.setRef;return react_default.a.createElement(ButtonWrapper,{setRef:setRef},react_default.a.createElement(es_button.a,{className:Object(clsx_m.default)("session-recordings-button",wereAllRecordingsViewed&&"session-recordings-button--all-viewed"),"data-attr":"session-recordings-button",icon:react_default.a.createElement(PlayCircleOutlined.a,null)},"Watch session",isSingleRecording?react_default.a.createElement(ArrowRightOutlined.a,{className:"session-recordings-button__indicator"}):react_default.a.createElement(DownOutlined.a,{className:"session-recordings-button__indicator"})))}))}try{SessionRecordingsButton_SessionRecordingsButton.displayName="SessionRecordingsButton",SessionRecordingsButton_SessionRecordingsButton.__docgenInfo={description:"",displayName:"SessionRecordingsButton",props:{sessionRecordings:{defaultValue:null,description:"",name:"sessionRecordings",required:!0,type:{name:"SessionRecordingType[]"}},source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"enum",value:[{value:'"direct"'},{value:'"unknown"'},{value:'"recordings_list"'},{value:'"sessions_list"'},{value:'"sessions_list_play_all"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/SessionRecordingsButton.tsx#SessionRecordingsButton"]={docgenInfo:SessionRecordingsButton_SessionRecordingsButton.__docgenInfo,name:"SessionRecordingsButton",path:"frontend/src/scenes/sessions/SessionRecordingsButton.tsx#SessionRecordingsButton"})}catch(__react_docgen_typescript_loader_error){}var LinkButton=__webpack_require__(284),AimOutlined=(__webpack_require__(62),__webpack_require__(82),__webpack_require__(294),__webpack_require__(5673)),ContainerOutlined=__webpack_require__(5672),UsergroupAddOutlined=__webpack_require__(5674),PlaySquareOutlined=__webpack_require__(5801),SelectBox=__webpack_require__(5799),actionsModel=__webpack_require__(471),types=__webpack_require__(6),ActionFilterDropdown=__webpack_require__(5785),sessionsFiltersLogic=__webpack_require__(1187),cohortsModel=__webpack_require__(169),eventDefinitionsModel=__webpack_require__(385),personPropertiesModel=__webpack_require__(508);function SessionsFilterBox_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function SessionsFilterBox(_ref){var selector=_ref.selector,personProperties=Object(index_esm.useValues)(personPropertiesModel.a).personProperties,openFilter=Object(index_esm.useValues)(sessionsFiltersLogic.a).openFilter,_useActions=Object(index_esm.useActions)(sessionsFiltersLogic.a),closeFilterSelect=_useActions.closeFilterSelect,dropdownSelected=_useActions.dropdownSelected,eventDefinitions=Object(index_esm.useValues)(eventDefinitionsModel.a).eventDefinitions,actions=Object(index_esm.useValues)(actionsModel.a).actions,cohorts=Object(index_esm.useValues)(cohortsModel.a).cohorts;if(openFilter!==selector)return null;var groups=[{name:"Actions",header:function actionHeader(label){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(AimOutlined.a,null)," ",label)},dataSource:actions.map((function(action){return{key:types.f.ACTIONS+action.id,name:action.name,volume:action.count,id:action.id,action:action}})),renderInfo:ActionFilterDropdown.a,type:"action_type",key:"action_type",getValue:function getValue(item){var _item$action;return(null===(_item$action=item.action)||void 0===_item$action?void 0:_item$action.id)||""},getLabel:function getLabel(item){var _item$action2;return(null===(_item$action2=item.action)||void 0===_item$action2?void 0:_item$action2.name)||""}},{name:"Events",header:function eventHeader(label){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(ContainerOutlined.a,null)," ",label)},dataSource:eventDefinitions.map((function(definition){return function SessionsFilterBox_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?SessionsFilterBox_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):SessionsFilterBox_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({key:types.f.EVENTS+definition.name},definition)}))||[],renderInfo:function events(_ref2){var item=_ref2.item;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(ContainerOutlined.a,null)," Events",react_default.a.createElement("br",null),react_default.a.createElement("h3",null,item.name),(null==item?void 0:item.volume_30_day)&&react_default.a.createElement(react_default.a.Fragment,null,"Seen ",react_default.a.createElement("strong",null,item.volume_30_day)," times."," "),(null==item?void 0:item.query_usage_30_day)&&react_default.a.createElement(react_default.a.Fragment,null,"Used in ",react_default.a.createElement("strong",null,item.query_usage_30_day)," queries."))},type:"event_type",key:"event_type",getValue:function getValue(item){return item.name},getLabel:function getLabel(item){return item.name}},{name:"Cohorts",header:function cohortHeader(label){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(UsergroupAddOutlined.a,null)," ",label)},dataSource:cohorts.map((function(cohort){return{key:"cohorts"+cohort.id,name:cohort.name||"",id:cohort.id,cohort:cohort}})),renderInfo:function renderCohorts(_ref3){var _item$cohort,item=_ref3.item;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(UsergroupAddOutlined.a,null)," Cohorts",react_default.a.createElement(Link.a,{to:"/cohorts/".concat(item.id,"#backTo=Insights&backToURL=").concat(encodeURIComponent(window.location.pathname+window.location.search)),style:{float:"right"}},"edit"),react_default.a.createElement("br",null),react_default.a.createElement("h3",null,item.name),(null==item||null===(_item$cohort=item.cohort)||void 0===_item$cohort?void 0:_item$cohort.count)&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("strong",null,item.cohort.count)," persons in cohort."))},type:"cohort",key:"cohort",getValue:function getValue(item){return item.id||""},getLabel:function getLabel(item){return item.name}}];return personProperties.length>0&&groups.unshift({name:"User properties",header:function userHeader(label){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(UsergroupAddOutlined.a,null)," ",label)},dataSource:personProperties.map((function(_ref4){var name=_ref4.name;return{key:"person"+name,name:name,usage_count:_ref4.count}})),renderInfo:function renderPersonProperty(_ref5){var item=_ref5.item;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(UsergroupAddOutlined.a,null)," Person property",react_default.a.createElement("br",null),react_default.a.createElement("h3",null,item.name),(null==item?void 0:item.query_usage_30_day)&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("strong",null,item.query_usage_30_day)," persons have this property."))},key:"person",type:"person",getValue:function getValue(item){return item.name},getLabel:function getLabel(item){return item.name}}),groups.unshift({name:"Recording properties",header:function userPropertiesHeader(label){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PlaySquareOutlined.a,null)," ",label)},dataSource:[{key:"duration",name:"Recording duration",value:"duration"},{key:"unseen",name:"Unseen recordings",value:"unseen"}],renderInfo:function recordingProperty(_ref6){var item=_ref6.item;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PlaySquareOutlined.a,null)," Recording properties",react_default.a.createElement("br",null),react_default.a.createElement("h3",null,item.name))},key:"recording",type:"recording",getValue:function getValue(item){return item.value||""},getLabel:function getLabel(item){return item.name}}),react_default.a.createElement(SelectBox.a,{selectedItemKey:void 0,onDismiss:closeFilterSelect,onSelect:dropdownSelected,items:groups})}try{SessionsFilterBox.displayName="SessionsFilterBox",SessionsFilterBox.__docgenInfo={description:"",displayName:"SessionsFilterBox",props:{selector:{defaultValue:null,description:"",name:"selector",required:!0,type:{name:"FilterSelector"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/filters/SessionsFilterBox.tsx#SessionsFilterBox"]={docgenInfo:SessionsFilterBox.__docgenInfo,name:"SessionsFilterBox",path:"frontend/src/scenes/sessions/filters/SessionsFilterBox.tsx#SessionsFilterBox"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(321),__webpack_require__(355),__webpack_require__(140),__webpack_require__(120),__webpack_require__(141);var card=__webpack_require__(5647),divider=__webpack_require__(5608),SaveOutlined=__webpack_require__(5715),SearchOutlined=__webpack_require__(1176),CloseButton=__webpack_require__(347),fuse_esm=(__webpack_require__(63),__webpack_require__(152),__webpack_require__(410)),es_select=__webpack_require__(208),SelectGradientOverflow=__webpack_require__(679),eventUsageLogic=__webpack_require__(38),fuseCache={};function PropertySelect(_ref){var optionGroups=_ref.optionGroups,propertyOption=_ref.value,_onChange=_ref.onChange,placeholder=_ref.placeholder,autoOpenIfEmpty=_ref.autoOpenIfEmpty,delayBeforeAutoOpen=_ref.delayBeforeAutoOpen,_ref$dropdownMatchSel=_ref.dropdownMatchSelectWidth,dropdownMatchSelectWidth=void 0===_ref$dropdownMatchSel||_ref$dropdownMatchSel,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),search=_useState2[0],setSearch=_useState2[1],reportPropertySelectOpened=Object(index_esm.useActions)(eventUsageLogic.e).reportPropertySelectOpened;return react_default.a.createElement(SelectGradientOverflow.a,{showSearch:!0,autoFocus:autoOpenIfEmpty&&!(null==propertyOption?void 0:propertyOption.value),defaultOpen:autoOpenIfEmpty&&!(null==propertyOption?void 0:propertyOption.value),delayBeforeAutoOpen:delayBeforeAutoOpen,placeholder:placeholder,"data-attr":"property-filter-dropdown",labelInValue:!0,value:propertyOption||void 0,onSearch:function onSearch(value){setSearch(value)},filterOption:function filterOption(){return!0},onChange:function onChange(_,selection){var _ref2=selection,val=_ref2.value,type=_ref2.type;_onChange(type,val.replace(/^(event_|person_|element_)/gi,""))},style:{width:"100%"},dropdownMatchSelectWidth:dropdownMatchSelectWidth,onDropdownVisibleChange:function onDropdownVisibleChange(open){open&&reportPropertySelectOpened()}},optionGroups.map((function(group){var _group$options;return(null===(_group$options=group.options)||void 0===_group$options?void 0:_group$options.length)>0&&react_default.a.createElement(es_select.a.OptGroup,{key:group.type,label:group.label},function searchItems(sources,search,groupType){return search?(fuseCache[groupType]||(fuseCache[groupType]=new fuse_esm.a(sources,{keys:["value"],threshold:.3})),fuseCache[groupType].search(search).map((function(result){return result.item}))):sources}(group.options,search,group.type).map((function(option,index){return react_default.a.createElement(es_select.a.Option,{key:"".concat(group.type,"_").concat(option.value),value:"".concat(group.type,"_").concat(option.value),type:group.type,"data-attr":"prop-filter-".concat(group.type,"-").concat(index)},react_default.a.createElement(PropertyKeyInfo.b,{value:option.value,type:"element"==group.type?group.type:void 0}))})))})))}try{PropertySelect.displayName="PropertySelect",PropertySelect.__docgenInfo={description:"",displayName:"PropertySelect",props:{optionGroups:{defaultValue:null,description:"",name:"optionGroups",required:!0,type:{name:"PropertyOptionGroup[]"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"Partial<SelectOption> | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:'(type: "event" | "person" | "element", value: string) => void'}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"string"}},autoOpenIfEmpty:{defaultValue:null,description:"",name:"autoOpenIfEmpty",required:!1,type:{name:"boolean"}},delayBeforeAutoOpen:{defaultValue:null,description:"",name:"delayBeforeAutoOpen",required:!1,type:{name:"number"}},dropdownMatchSelectWidth:{defaultValue:{value:"true"},description:"",name:"dropdownMatchSelectWidth",required:!1,type:{name:"number | boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/components/PropertySelect.tsx#PropertySelect"]={docgenInfo:PropertySelect.__docgenInfo,name:"PropertySelect",path:"frontend/src/lib/components/PropertyFilters/components/PropertySelect.tsx#PropertySelect"})}catch(__react_docgen_typescript_loader_error){}var OperatorValueSelect=__webpack_require__(879),propertyDefinitionsModel=__webpack_require__(507);function EventPropertyFilter_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function EventPropertyFilter_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?EventPropertyFilter_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):EventPropertyFilter_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function EventPropertyFilter(_ref){var _keyMapping$event$pro,filter=_ref.filter,selector=_ref.selector,transformedPropertyDefinitions=Object(index_esm.useValues)(propertyDefinitionsModel.a).transformedPropertyDefinitions,updateFilter=Object(index_esm.useActions)(sessionsFiltersLogic.a).updateFilter,property=filter.properties&&filter.properties.length>0?filter.properties[0]:null,value=property?{value:property.key,label:(null===(_keyMapping$event$pro=PropertyKeyInfo.f.event[property.key])||void 0===_keyMapping$event$pro?void 0:_keyMapping$event$pro.label)||property.key}:null;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PropertySelect,{value:value,optionGroups:[{type:"event",label:"Event properties",options:transformedPropertyDefinitions}],onChange:function onChange(_,key){updateFilter(EventPropertyFilter_objectSpread(EventPropertyFilter_objectSpread({},filter),{},{properties:[EventPropertyFilter_objectSpread(EventPropertyFilter_objectSpread({operator:types.s.Exact,value:null},property),{},{type:"event",key:key})]}),selector)},placeholder:"Add property filter"}),property&&react_default.a.createElement(OperatorValueSelect.b,{type:"event",propkey:property.key,operator:property.operator,value:property.value,onChange:function onChange(operator,changedValue){updateFilter(EventPropertyFilter_objectSpread(EventPropertyFilter_objectSpread({},filter),{},{properties:[EventPropertyFilter_objectSpread(EventPropertyFilter_objectSpread({},property),{},{operator:operator,value:changedValue})]}),selector)}}))}try{EventPropertyFilter.displayName="EventPropertyFilter",EventPropertyFilter.__docgenInfo={description:"",displayName:"EventPropertyFilter",props:{filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"ActionTypePropertyFilter | EventTypePropertyFilter"}},selector:{defaultValue:null,description:"",name:"selector",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/filters/EventPropertyFilter.tsx#EventPropertyFilter"]={docgenInfo:EventPropertyFilter.__docgenInfo,name:"EventPropertyFilter",path:"frontend/src/scenes/sessions/filters/EventPropertyFilter.tsx#EventPropertyFilter"})}catch(__react_docgen_typescript_loader_error){}function UserFilter_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function UserFilter_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?UserFilter_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):UserFilter_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function PersonFilter(_ref){var filter=_ref.filter,selector=_ref.selector,updateFilter=Object(index_esm.useActions)(sessionsFiltersLogic.a).updateFilter;return react_default.a.createElement(OperatorValueSelect.b,{type:"person",propkey:filter.key,operator:filter.operator,value:filter.value,onChange:function onChange(operator,value){updateFilter(UserFilter_objectSpread(UserFilter_objectSpread({},filter),{},{operator:operator,value:value}),selector)}})}try{PersonFilter.displayName="PersonFilter",PersonFilter.__docgenInfo={description:"",displayName:"PersonFilter",props:{filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"PersonPropertyFilter"}},selector:{defaultValue:null,description:"",name:"selector",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/filters/UserFilter.tsx#PersonFilter"]={docgenInfo:PersonFilter.__docgenInfo,name:"PersonFilter",path:"frontend/src/scenes/sessions/filters/UserFilter.tsx#PersonFilter"})}catch(__react_docgen_typescript_loader_error){}var input=__webpack_require__(707);function DurationFilter_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function DurationFilter_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?DurationFilter_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):DurationFilter_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var multipliers={s:1,m:60,h:3600},durationToSeconds=function durationToSeconds(value,unit){return value*multipliers[unit]};function DurationFilter(_ref){var filter=_ref.filter,selector=_ref.selector,_useState=Object(react.useState)("m"),_useState2=slicedToArray_default()(_useState,2),unit=_useState2[0],setUnit=_useState2[1],_useState3=Object(react.useState)(Math.floor(filter.value/multipliers[unit])),_useState4=slicedToArray_default()(_useState3,2),duration=_useState4[0],setDuration=_useState4[1],updateFilter=Object(index_esm.useActions)(sessionsFiltersLogic.a).updateFilter;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(OperatorValueSelect.a,{operator:filter.operator,operators:[types.s.GreaterThan,types.s.LessThan],onChange:function onChange(operator){updateFilter(DurationFilter_objectSpread(DurationFilter_objectSpread({},filter),{},{operator:operator}),selector)}}),react_default.a.createElement(input.a,{type:"number",value:duration,placeholder:"0",min:0,autoFocus:!0,addonAfter:react_default.a.createElement(es_select.a,{showSearch:!1,value:unit,onChange:function onChange(newUnit){setUnit(newUnit),updateFilter(DurationFilter_objectSpread(DurationFilter_objectSpread({},filter),{},{value:durationToSeconds(duration,newUnit)}),selector)}},react_default.a.createElement(es_select.a.Option,{value:"s"},"seconds"),react_default.a.createElement(es_select.a.Option,{value:"m"},"minutes"),react_default.a.createElement(es_select.a.Option,{value:"h"},"hours")),step:1,onChange:function onChange(event){var value=parseFloat(event.target.value);setDuration(value),updateFilter(DurationFilter_objectSpread(DurationFilter_objectSpread({},filter),{},{value:durationToSeconds(value,unit)}),selector)}}))}try{DurationFilter.displayName="DurationFilter",DurationFilter.__docgenInfo={description:"",displayName:"DurationFilter",props:{filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"RecordingDurationFilter"}},selector:{defaultValue:null,description:"",name:"selector",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/filters/DurationFilter.tsx#DurationFilter"]={docgenInfo:DurationFilter.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/sessions/filters/DurationFilter.tsx#DurationFilter"})}catch(__react_docgen_typescript_loader_error){}var PlusOutlined=__webpack_require__(1789);function AddFilterButton(_ref){var selector=_ref.selector,openFilterSelect=Object(index_esm.useActions)(sessionsFiltersLogic.a).openFilterSelect;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(es_button.a,{onClick:function onClick(){return openFilterSelect(selector)},className:"add-session-filter"},react_default.a.createElement("span",null,react_default.a.createElement(PlusOutlined.a,null),react_default.a.createElement("span",{style:{marginLeft:8}},"Add filter")),react_default.a.createElement(DownOutlined.a,{style:{fontSize:12,color:"var(--muted)"}})),react_default.a.createElement(SessionsFilterBox,{selector:selector}))}try{AddFilterButton.displayName="AddFilterButton",AddFilterButton.__docgenInfo={description:"",displayName:"AddFilterButton",props:{selector:{defaultValue:null,description:"",name:"selector",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/filters/AddFilterButton.tsx#AddFilterButton"]={docgenInfo:AddFilterButton.__docgenInfo,name:"AddFilterButton",path:"frontend/src/scenes/sessions/filters/AddFilterButton.tsx#AddFilterButton"})}catch(__react_docgen_typescript_loader_error){}var constants=__webpack_require__(19),SelectDownIcon=__webpack_require__(1802),SECTIONS={recording:{label:"Recording filters",description:react_default.a.createElement(react_default.a.Fragment,null,"Find sessions ",react_default.a.createElement("b",null,"with recordings")," matching the following")},person:{label:"User property filters",description:react_default.a.createElement(react_default.a.Fragment,null,"Find sessions where user properties match ",react_default.a.createElement("b",null,"all")," of the following")},action_type:{label:"Action filters",description:react_default.a.createElement(react_default.a.Fragment,null,"Find sessions where a given ",react_default.a.createElement("b",null,"action")," has been triggered")},event_type:{label:"Event filters",description:react_default.a.createElement(react_default.a.Fragment,null,"Find sessions where a given ",react_default.a.createElement("b",null,"event")," has been triggered")},cohort:{label:"Cohort filters",description:react_default.a.createElement(react_default.a.Fragment,null,"Find sessions by ",react_default.a.createElement("b",null,"users in")," the following cohorts")}};function EditFiltersPanel(_ref){var onSubmit=_ref.onSubmit,_useValues=Object(index_esm.useValues)(sessionsFiltersLogic.a),activeFilter=_useValues.activeFilter,displayedFilterCount=_useValues.displayedFilterCount,displayedFilters=_useValues.displayedFilters,_useActions=Object(index_esm.useActions)(sessionsFiltersLogic.a),openFilterSelect=_useActions.openFilterSelect,openEditFilter=_useActions.openEditFilter,removeFilter=_useActions.removeFilter,filtersDirty=Object(index_esm.useValues)(sessionsTableLogic.a).filtersDirty;if(0===displayedFilterCount)return null;var andTag=function andTag(visible){return react_default.a.createElement("span",{className:"stateful-badge and",style:{visibility:visible?"initial":"hidden",marginLeft:16}},"AND")},properties=[],events=[],actions=[];Object.entries(displayedFilters).forEach((function(_ref2){var _ref3=slicedToArray_default()(_ref2,2),key=_ref3[0],values=_ref3[1];key===constants.g&&values.forEach((function(filter){!filter.item.label||"string"!=typeof filter.item.value&&"number"!=typeof filter.item.value||actions.push({id:filter.item.value,name:filter.item.label,type:"actions",order:0})})),key===constants.n&&values.forEach((function(filter){!filter.item.label||"string"!=typeof filter.item.value&&"number"!=typeof filter.item.value||events.push({id:filter.item.value,name:filter.item.label,type:"events",order:0})})),"cohort"===key&&values.forEach((function(filter){filter.item.value&&properties.push({key:"id",value:filter.item.value,type:"cohort",operator:types.s.Exact})})),"person"===key&&values.forEach((function(filter){filter.item.value&&properties.push({key:filter.item.key,value:filter.item.value,type:"person",operator:filter.item.operator})}))}));var params={insight:types.x.TRENDS,interval:"day",display:"ActionsLineGraph",events:events,actions:actions,properties:properties},encodedParams=Object(utils.ob)(params),insightLink="/insights?".concat(encodedParams,"#backTo=Sessions&backToURL=").concat(window.location.pathname+window.location.search);return react_default.a.createElement(card.a,null,Object.entries(displayedFilters).map((function(_ref4){var _ref5=slicedToArray_default()(_ref4,2),key=_ref5[0],filters=_ref5[1];return react_default.a.createElement("div",{key:key},react_default.a.createElement("div",{className:"sessions-filter-title"},react_default.a.createElement("h3",null,SECTIONS[key].label),react_default.a.createElement("p",{className:"text-muted"},SECTIONS[key].description)),filters.map((function(_ref6,index){var _item$label,item=_ref6.item,selector=_ref6.selector;return react_default.a.createElement("div",{className:"sessions-filter-row",key:selector},react_default.a.createElement("div",{className:"sessions-filter-row-filters"},react_default.a.createElement("div",null,react_default.a.createElement(es_button.a,{onClick:function onClick(){return openFilterSelect(selector)},className:"full-width",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},"data-attr":"edit-session-filter"},react_default.a.createElement(PropertyKeyInfo.b,{value:null!==(_item$label=item.label)&&void 0!==_item$label?_item$label:""}),react_default.a.createElement(SelectDownIcon.a,{className:"text-muted"})),react_default.a.createElement(SessionsFilterBox,{selector:selector})),("event_type"===item.type||"action_type"===item.type)&&react_default.a.createElement(EventPropertyFilter,{filter:item,selector:selector}),"person"===item.type&&react_default.a.createElement(PersonFilter,{filter:item,selector:selector}),"recording"===item.type&&"duration"===item.key&&react_default.a.createElement(DurationFilter,{filter:item,selector:selector})),filters.length>1&&andTag(index<filters.length-1),react_default.a.createElement(CloseButton.a,{onClick:function onClick(){return removeFilter(selector)},style:{marginLeft:8}}))})),react_default.a.createElement("div",{className:"sessions-filter-row"},react_default.a.createElement("div",{className:"sessions-filter-row-filters"},react_default.a.createElement(AddFilterButton,{selector:"new-".concat(key)})),filters.length>1&&andTag(!1),react_default.a.createElement(CloseButton.a,{style:{marginLeft:8,visibility:"hidden"}})),react_default.a.createElement(divider.a,null))})),react_default.a.createElement(space.b,{style:{display:"flex",justifyContent:"space-between"}},react_default.a.createElement(space.b,null,react_default.a.createElement(LinkButton.a,{to:insightLink},react_default.a.createElement("span",null,"View Insights"))),react_default.a.createElement(space.b,null,filtersDirty&&react_default.a.createElement("div",{className:"text-warning"},"There are unapplied filters."),react_default.a.createElement(es_button.a,{disabled:!!activeFilter,onClick:function onClick(){return openEditFilter({id:null})}},react_default.a.createElement("span",null,react_default.a.createElement(SaveOutlined.a,null)," Save filter")),react_default.a.createElement(es_button.a,{type:"primary",onClick:onSubmit,"data-attr":"sessions-apply-filters"},react_default.a.createElement("span",null,react_default.a.createElement(SearchOutlined.a,null)," Apply filters")))))}try{EditFiltersPanel.displayName="EditFiltersPanel",EditFiltersPanel.__docgenInfo={description:"",displayName:"EditFiltersPanel",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/filters/EditFiltersPanel.tsx#EditFiltersPanel"]={docgenInfo:EditFiltersPanel.__docgenInfo,name:"EditFiltersPanel",path:"frontend/src/scenes/sessions/filters/EditFiltersPanel.tsx#EditFiltersPanel"})}catch(__react_docgen_typescript_loader_error){}function SearchAllBox(){var openFilter=Object(index_esm.useValues)(sessionsFiltersLogic.a).openFilter,_useActions=Object(index_esm.useActions)(sessionsFiltersLogic.a),openFilterSelect=_useActions.openFilterSelect,closeFilterSelect=_useActions.closeFilterSelect;return react_default.a.createElement("div",{className:"mb-05 full-width"},react_default.a.createElement(es_button.a,{style:{textAlign:"left"},"data-attr":"sessions-filter-open",onClick:function onClick(){return openFilter?closeFilterSelect():openFilterSelect("new")}},react_default.a.createElement("span",{className:"text-muted"},"Filter by user, action, or event properties",react_default.a.createElement(SelectDownIcon.a,null))))}var dayjs=__webpack_require__(1104),dayjs_default=__webpack_require__.n(dayjs),generatePicker=__webpack_require__(670),generatePicker_default=__webpack_require__.n(generatePicker),teamLogic=__webpack_require__(27),icons=__webpack_require__(52),urls=__webpack_require__(28),SessionPlayerDrawer=__webpack_require__(2504);function SessionsView_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function SessionsView_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?SessionsView_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):SessionsView_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var DatePicker=generatePicker_default()(dayjs_default.a);var MATCHING_EVENT_ICON_SIZE=26;function SessionsView(_ref2){var personIds=_ref2.personIds,_ref2$isPersonPage=_ref2.isPersonPage,isPersonPage=void 0!==_ref2$isPersonPage&&_ref2$isPersonPage,logic=Object(sessionsTableLogic.a)({personIds:personIds}),_useValues=Object(index_esm.useValues)(logic),sessions=_useValues.sessions,sessionsLoading=_useValues.sessionsLoading,pagination=_useValues.pagination,isLoadingNext=_useValues.isLoadingNext,selectedDate=_useValues.selectedDate,properties=_useValues.properties,sessionRecordingId=_useValues.sessionRecordingId,firstRecordingId=_useValues.firstRecordingId,expandedRowKeysProps=_useValues.expandedRowKeysProps,showOnlyMatches=_useValues.showOnlyMatches,filters=_useValues.filters,_useActions=Object(index_esm.useActions)(logic),fetchNextSessions=_useActions.fetchNextSessions,previousDay=_useActions.previousDay,nextDay=_useActions.nextDay,setFilters=_useActions.setFilters,applyFilters=_useActions.applyFilters,onExpandedRowsChange=_useActions.onExpandedRowsChange,setShowOnlyMatches=_useActions.setShowOnlyMatches,closeSessionPlayer=_useActions.closeSessionPlayer,currentTeam=Object(index_esm.useValues)(teamLogic.a).currentTeam,sessionsTableRef=Object(react.useRef)(null),columns=[{title:"Person",key:"person",render:function RenderSession(session){return react_default.a.createElement(Link.a,{to:"/person/".concat(encodeURIComponent(session.distinct_id)),className:"ph-no-capture"},(null==session?void 0:session.email)||session.distinct_id)},ellipsis:!0,span:3},{title:"Session duration",render:function RenderDuration(session){if(session.session_recordings.length>0){var seconds=function getSessionRecordingsDurationSum(session){return session.session_recordings.map((function(_ref){return _ref.recording_duration})).reduce((function(a,b){return a+b}),0)}(session);return react_default.a.createElement("span",null,Object(utils.I)(Math.max(seconds,session.length)))}return react_default.a.createElement("span",null,Object(utils.I)(session.length))},span:3},{title:"Start time",render:function RenderStartTime(session){return Object(utils.G)(session.start_time)},span:3},{title:"Start point",render:function RenderStartPoint(session){return session.start_url?Object(utils.lb)(session.start_url):"N/A"},ellipsis:!0,span:4},{title:"End point",render:function RenderEndPoint(session){return session.end_url?Object(utils.lb)(session.end_url):"N/A"},ellipsis:!0,span:4},{title:react_default.a.createElement(Tooltip.a,{title:(null==currentTeam?void 0:currentTeam.session_recording_opt_in)?"Replay sessions as if you were right next to your users.":"Recordings is turned off for this project. Click to go to settings.",delayMs:0},react_default.a.createElement("span",{style:{whiteSpace:"nowrap"}},(null==currentTeam?void 0:currentTeam.session_recording_opt_in)?react_default.a.createElement(react_default.a.Fragment,null,"Recordings",react_default.a.createElement(QuestionCircleOutlined.a,{className:"info-indicator"})):react_default.a.createElement(Link.a,{to:urls.a.projectSettings()+"#session-recording",style:{color:"inherit"}},"Recordings",react_default.a.createElement(PoweroffOutlined.a,{className:"info-indicator"})))),render:function RenderEndPoint(session){return session.session_recordings.length?react_default.a.createElement(SessionRecordingsButton_SessionRecordingsButton,{sessionRecordings:session.session_recordings,source:eventUsageLogic.d.SessionsList}):null},span:4,defaultWidth:184}];return Object(react.useEffect)((function(){var _decodeParams;"Insights"===(null===(_decodeParams=Object(lib.decodeParams)(window.location.hash))||void 0===_decodeParams?void 0:_decodeParams["#backTo"])&&sessionsTableRef.current&&sessionsTableRef.current.scrollIntoView({behavior:"smooth"})}),[]),react_default.a.createElement("div",{className:"events","data-attr":"events-table"},react_default.a.createElement(space.b,{className:"mb-05"},react_default.a.createElement(es_button.a,{onClick:previousDay,icon:react_default.a.createElement(CaretLeftOutlined.a,null),"data-attr":"sessions-prev-date"}),react_default.a.createElement(DatePicker,{value:selectedDate,onChange:function onChange(date){return setFilters(properties,date)},allowClear:!1,"data-attr":"sessions-date-picker"}),react_default.a.createElement(es_button.a,{onClick:nextDay,icon:react_default.a.createElement(CaretRightOutlined.a,null),"data-attr":"sessions-next-date"})),react_default.a.createElement(SearchAllBox,null),react_default.a.createElement(SessionsFilterBox,{selector:"new"}),react_default.a.createElement(index_esm.BindLogic,{logic:sessionsTableLogic.a,props:{personIds:personIds}},react_default.a.createElement(EditFiltersPanel,{onSubmit:applyFilters})),react_default.a.createElement("div",{ref:sessionsTableRef}),react_default.a.createElement("div",{className:"sessions-view-actions"},react_default.a.createElement("div",{className:"sessions-view-actions-left-items"},filters.length>0&&react_default.a.createElement(row.a,{className:"action ml-05"},react_default.a.createElement(es_switch.a,{id:"show-only-matches",onChange:setShowOnlyMatches,checked:showOnlyMatches}),react_default.a.createElement("label",{className:"ml-025",htmlFor:"show-only-matches"},react_default.a.createElement("b",null,"Show only event matches")))),react_default.a.createElement("div",{className:"sessions-view-actions-right-items"},react_default.a.createElement(Tooltip.a,{title:null===firstRecordingId?"No recordings found for this date.":(null==currentTeam?void 0:currentTeam.session_recording_opt_in)?"Play all recordings found for this date.":"Recordings is turned off for this project. Enable in Project Settings."},react_default.a.createElement(LinkButton.a,{to:firstRecordingId?SessionRecordingsButton_sessionPlayerUrl(firstRecordingId,eventUsageLogic.d.SessionsListPlayAll):"#",type:"primary","data-attr":"play-all-recordings",disabled:null===firstRecordingId,icon:react_default.a.createElement(PlayCircleOutlined.a,null)},"Play all")))),react_default.a.createElement(ResizableTable.b,{locale:{emptyText:selectedDate?"No Sessions on ".concat(selectedDate.format(selectedDate.year()==dayjs_min_default()().year()?"MMM D":"MMM D, YYYY")):"No Sessions"},"data-attr":"sessions-table",size:"small",rowKey:"global_session_id",pagination:{pageSize:99999,hideOnSinglePage:!0},rowClassName:"cursor-pointer",dataSource:sessions,columns:columns,loading:sessionsLoading,expandable:SessionsView_objectSpread({expandedRowRender:function renderExpand(session){return react_default.a.createElement(index_esm.BindLogic,{logic:sessionsTableLogic.a,props:{personIds:personIds}},react_default.a.createElement(SessionDetails,{key:session.global_session_id,session:session}))},expandIcon:function _renderExpandIcon(expandProps){var _session$matching_eve,session=expandProps.record;return react_default.a.createElement(ExpandIcon.a,expandProps,(null==session||null===(_session$matching_eve=session.matching_events)||void 0===_session$matching_eve?void 0:_session$matching_eve.length)>0?react_default.a.createElement(Tooltip.a,{title:"".concat(Object(utils.db)(session.matching_events.length,"event")," ").concat(Object(utils.db)(session.matching_events.length,"matches","match",!1)," your event filters.")},react_default.a.createElement(badge.a,{className:"sessions-matching-events-icon cursor-pointer",count:react_default.a.createElement("span",{className:"badge-text"},session.matching_events.length),offset:[0,MATCHING_EVENT_ICON_SIZE],size:"small"},react_default.a.createElement(icons.IconEventsShort,{size:MATCHING_EVENT_ICON_SIZE}))):react_default.a.createElement(react_default.a.Fragment,null))},columnWidth:ResizableTable.a+MATCHING_EVENT_ICON_SIZE,rowExpandable:function rowExpandable(){return!0},onExpandedRowsChange:onExpandedRowsChange,expandRowByClick:!0},expandedRowKeysProps)}),!!sessionRecordingId&&react_default.a.createElement(SessionPlayerDrawer.a,{isPersonPage:isPersonPage,onClose:closeSessionPlayer}),react_default.a.createElement("div",{style:{marginTop:"5rem"}}),react_default.a.createElement("div",{style:{margin:"2rem auto 5rem",textAlign:"center"}},(pagination||isLoadingNext)&&react_default.a.createElement(es_button.a,{type:"primary",onClick:fetchNextSessions,"data-attr":"load-more-sessions"},isLoadingNext?react_default.a.createElement(spin.a,null," "):"Load more sessions")))}try{SessionsView.displayName="SessionsView",SessionsView.__docgenInfo={description:"",displayName:"SessionsView",props:{personIds:{defaultValue:null,description:"",name:"personIds",required:!1,type:{name:"string[]"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/SessionsView.tsx#SessionsView"]={docgenInfo:SessionsView.__docgenInfo,name:"SessionsView",path:"frontend/src/scenes/sessions/SessionsView.tsx#SessionsView"})}catch(__react_docgen_typescript_loader_error){}},5872:function(module,exports,__webpack_require__){(exports=__webpack_require__(50)(!1)).push([module.i,'.bg-mid{background-color:#f2f2f2!important}.mixin-base-bordered-card{border-radius:4px;box-shadow:0 4px 10px rgba(0,0,0,.04)}.mixin-gradient-overlay{width:100%;height:3rem;background:linear-gradient(0deg,#fff,transparent)}.mixin-gradient-overlay,.mixin-gradient-overlay-right{content:"";position:absolute;pointer-events:none;bottom:0}.mixin-gradient-overlay-right{width:3rem;height:100%;background:linear-gradient(270deg,#fff,transparent)}.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.session-recordings-popup{padding:0}.session-recordings-popup__link{color:#000}.session-recordings-popup__link .anticon-play-circle{color:#5375ff}.session-recordings-popup__link.session-recordings-popup__link--viewed .anticon-play-circle,.session-recordings-popup__link:visited .anticon-play-circle{color:rgba(0,0,0,.5)}.session-recordings-popup__detail,.session-recordings-popup__label,.session-recordings-popup__row{display:flex;align-items:center;box-sizing:content-box}.session-recordings-popup__row{height:32px;padding:4px 15px}.session-recordings-popup__label{font-weight:500}.session-recordings-popup__label .anticon{font-size:1.25rem;margin-right:.5rem}.session-recordings-popup__detail{margin-left:1rem}.session-recordings-button__wrapper{display:inline-block}.session-recordings-button .anticon-play-circle{color:#5375ff}.session-recordings-button.session-recordings-button--all-viewed .anticon-play-circle{color:rgba(0,0,0,.5)}.session-recordings-button .session-recordings-button__indicator{font-size:12px;color:rgba(0,0,0,.5)}',""]),module.exports=exports}}]);