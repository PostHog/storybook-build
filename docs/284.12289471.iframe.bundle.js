(window.webpackJsonp=window.webpackJsonp||[]).push([[284,295],{"./frontend/src/lib/components/Table/utils.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return normalizeColumnTitle}));var lib_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/hooks/useWindowSize.js"),lib_utils_responsiveUtils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/utils/responsiveUtils.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function normalizeColumnTitle(title){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{style:{whiteSpace:"nowrap"},children:title})}const useIsTableScrolling=scrollBreakpoint=>{const{width:width}=Object(lib_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_0__.a)(),tableScrollBreakpoint=Object(lib_utils_responsiveUtils__WEBPACK_IMPORTED_MODULE_1__.b)(scrollBreakpoint),isTableScrolling=!!width&&width<=tableScrollBreakpoint;return{isTableScrolling:isTableScrolling,tableScrollBreakpoint:tableScrollBreakpoint,tableScrollX:isTableScrolling?"max-content":`${tableScrollBreakpoint}px`}};try{normalizeColumnTitle.displayName="normalizeColumnTitle",normalizeColumnTitle.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:normalizeColumnTitle.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(__react_docgen_typescript_loader_error){}try{useIsTableScrolling.displayName="useIsTableScrolling",useIsTableScrolling.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:useIsTableScrolling.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"OverViewTab",(function(){return OverViewTab})),__webpack_require__.d(__webpack_exports__,"FeatureFlags",(function(){return FeatureFlags})),__webpack_require__.d(__webpack_exports__,"groupFilters",(function(){return groupFilters}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/utils.tsx"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts"),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/components/Table/utils.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/utils/stringWithWBR.tsx"),_teamLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_components_PropertyFilters_components_PropertyFiltersDisplay__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),lib_components_ActivityLog_humanizeActivity__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),kea_router__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:FeatureFlags,logic:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_1__.b};function OverViewTab(_ref){let{flagPrefix:flagPrefix="",searchPlaceholder:searchPlaceholder="Search for feature flags",nouns:nouns=["feature flag","feature flags"]}=_ref;const{currentTeamId:currentTeamId}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_teamLogic__WEBPACK_IMPORTED_MODULE_9__.a),flagLogic=Object(_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_1__.b)({flagPrefix:flagPrefix}),{featureFlagsLoading:featureFlagsLoading,searchedFeatureFlags:searchedFeatureFlags,searchTerm:searchTerm,uniqueCreators:uniqueCreators,filters:filters}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(flagLogic),{updateFeatureFlag:updateFeatureFlag,loadFeatureFlags:loadFeatureFlags,setSearchTerm:setSearchTerm,setFeatureFlagsFilters:setFeatureFlagsFilters}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(flagLogic),{hasAvailableFeature:hasAvailableFeature}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__.a),columns=[{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(a,b)=>(a.key||"").localeCompare(b.key||""),render:function Render(_,featureFlag){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex flex-row items-center",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_2__.a,{to:featureFlag.id?scenes_urls__WEBPACK_IMPORTED_MODULE_7__.a.featureFlag(featureFlag.id):void 0,className:"row-name",children:Object(lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_8__.a)(featureFlag.key,17)}),!featureFlag.can_edit&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_19__.a,{title:"You don't have edit permissions for this feature flag.",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_20__.Eb,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})})]}),featureFlag.name&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{className:"row-description",style:{maxWidth:"24rem"},children:featureFlag.name})]})}},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_5__.e.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_22__.a,{tags:tags,staticOnly:!0}):null}}]:[],Object(lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_14__.b)(),Object(lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_14__.a)(),{title:"Release conditions",width:100,render:function Render(_,featureFlag){const releaseText=groupFilters(featureFlag.filters.groups);return"100% of all users"==releaseText?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonTag,{type:"highlight",children:releaseText}):releaseText}},{title:"Status",dataIndex:"active",sorter:(a,b)=>Number(a.active)-Number(b.active),width:100,render:function RenderActive(_,featureFlag){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:featureFlag.performed_rollback?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonTag,{type:"warning",className:"uppercase",children:"Rolled Back"}):featureFlag.active?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonTag,{type:"success",className:"uppercase",children:"Enabled"}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonTag,{type:"default",className:"uppercase",children:"Disabled"})})}},{width:0,render:function Render(_,featureFlag){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_13__.a,{overlay:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_10__.a,{status:"stealth",onClick:()=>{Object(lib_utils__WEBPACK_IMPORTED_MODULE_3__.s)(featureFlag.key,"feature flag key")},fullWidth:!0,children:"Copy feature flag key"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_10__.a,{status:"stealth",onClick:()=>{featureFlag.id&&updateFeatureFlag({id:featureFlag.id,payload:{active:!featureFlag.active}})},id:`feature-flag-${featureFlag.id}-switch`,disabled:!featureFlag.can_edit,fullWidth:!0,children:[featureFlag.active?"Disable":"Enable"," feature flag"]}),featureFlag.id&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_10__.a,{status:"stealth",fullWidth:!0,disabled:!featureFlag.can_edit,onClick:()=>featureFlag.id&&kea_router__WEBPACK_IMPORTED_MODULE_21__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_7__.a.featureFlag(featureFlag.id)),children:"Edit"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_10__.a,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`}),"data-attr":"usage",fullWidth:!0,children:"Try out in Insights"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_11__.a,{}),featureFlag.id&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_10__.a,{status:"danger",onClick:()=>{Object(lib_utils__WEBPACK_IMPORTED_MODULE_3__.x)({endpoint:`projects/${currentTeamId}/feature_flags`,object:{name:featureFlag.key,id:featureFlag.id},callback:loadFeatureFlags})},disabled:!featureFlag.can_edit,fullWidth:!0,children:"Delete feature flag"})]})})}}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonInput,{type:"search",placeholder:searchPlaceholder||"",onChange:setSearchTerm,value:searchTerm||""}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex items-center gap-2",children:[hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_5__.e.MULTIVARIATE_FLAGS)&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("b",{children:"Type"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonSelect,{onChange:type=>{if(type)if("all"===type){if(filters){const{type:type,...restFilters}=filters;setFeatureFlagsFilters(restFilters,!0)}}else setFeatureFlagsFilters({type:type})},options:[{label:"All",value:"all"},{label:"Boolean",value:"boolean"},{label:"Multiple variants",value:"multivariant"},{label:"Experiment",value:"experiment"}],value:"all"})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("b",{children:"Status"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonSelect,{onChange:status=>{if(status)if("all"===status){if(filters){const{active:active,...restFilters}=filters;setFeatureFlagsFilters(restFilters,!0)}}else setFeatureFlagsFilters({active:status})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{className:"ml-1",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("b",{children:"Created by"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_18__.LemonSelect,{onChange:user=>{if(user)if("any"===user){if(filters){const{created_by:created_by,...restFilters}=filters;setFeatureFlagsFilters(restFilters,!0)}}else setFeatureFlagsFilters({created_by:user})},options:uniqueCreators,value:"any"})]})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_12__.a,{dataSource:searchedFeatureFlags,columns:columns,rowKey:"key",defaultSorting:{columnKey:"created_at",order:-1},noSortingCancellation:!0,loading:featureFlagsLoading,pagination:{pageSize:100},nouns:nouns,"data-attr":"feature-flag-table"})]})}function FeatureFlags(){const{activeTab:activeTab}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_1__.b),{setActiveTab:setActiveTab}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_1__.b);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"feature_flags",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_4__.a,{title:"Feature Flags",buttons:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_10__.a,{type:"primary",to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.a.featureFlag("new"),"data-attr":"new-feature-flag",children:"New feature flag"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_24__.a,{activeKey:activeTab,onChange:newKey=>setActiveTab(newKey),tabs:[{key:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_1__.a.OVERVIEW,label:"Overview",content:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(OverViewTab,{})},{key:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_1__.a.HISTORY,label:"History",content:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_16__.a,{scope:lib_components_ActivityLog_humanizeActivity__WEBPACK_IMPORTED_MODULE_17__.a.FEATURE_FLAG})}]})]})}function groupFilters(groups){if(0===groups.length||!groups.some((group=>0!==group.rollout_percentage)))return"No users";if(groups.some((group=>{var _group$properties;return!(null!==(_group$properties=group.properties)&&void 0!==_group$properties&&_group$properties.length)&&[null,void 0,100].includes(group.rollout_percentage)})))return"100% of all users";if(1===groups.length){const{properties:properties,rollout_percentage:rollout_percentage=null}=groups[0];return(null==properties?void 0:properties.length)>0?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"},children:[null!=rollout_percentage&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("span",{style:{flexShrink:0,marginRight:5},children:[rollout_percentage,"% of"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_components_PropertyFilters_components_PropertyFiltersDisplay__WEBPACK_IMPORTED_MODULE_15__.a,{filters:properties,style:{margin:0,flexDirection:"column"}})]}):null!==rollout_percentage?`${rollout_percentage}% of all users`:(console.error("A group with full rollout was not detected early"),"All users")}return"Multiple groups"}try{OverViewTab.displayName="OverViewTab",OverViewTab.__docgenInfo={description:"",displayName:"OverViewTab",props:{flagPrefix:{defaultValue:{value:""},description:"",name:"flagPrefix",required:!1,type:{name:"string"}},searchPlaceholder:{defaultValue:{value:"Search for feature flags"},description:"",name:"searchPlaceholder",required:!1,type:{name:"string"}},nouns:{defaultValue:{value:"['feature flag', 'feature flags']"},description:"",name:"nouns",required:!1,type:{name:"[string, string]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#OverViewTab"]={docgenInfo:OverViewTab.__docgenInfo,name:"OverViewTab",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#OverViewTab"})}catch(__react_docgen_typescript_loader_error){}try{groupFilters.displayName="groupFilters",groupFilters.__docgenInfo={description:"",displayName:"groupFilters",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:groupFilters.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/feedback/Feedback.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Feedback",(function(){return Feedback_Feedback})),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene}));var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),feedbackLogic=__webpack_require__("./frontend/src/scenes/feedback/feedbackLogic.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),Feedback=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feedback/Feedback.scss"),Feedback_default=__webpack_require__.n(Feedback),options={insert:"head",singleton:!1},LemonTabs=(injectStylesIntoStyleTag_default()(Feedback_default.a,options),Feedback_default.a.locals,__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts")),apps_common_src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),inAppFeedbackLogic=__webpack_require__("./frontend/src/scenes/feedback/inAppFeedbackLogic.ts"),CodeSnippet=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.tsx"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function FeedbackInstructions(){const{inAppFeedbackInstructions:inAppFeedbackInstructions}=Object(index_esm.useValues)(inAppFeedbackLogic.a),{toggleInAppFeedbackInstructions:toggleInAppFeedbackInstructions}=Object(index_esm.useActions)(inAppFeedbackLogic.a);return Object(jsx_runtime.jsx)(src.LemonModal,{title:"How to send in-app feedback to Posthog",isOpen:inAppFeedbackInstructions,onClose:toggleInAppFeedbackInstructions,width:640,children:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(src.LemonCollapse,{defaultActiveKey:"1",panels:[{key:"1",header:"Install the feedback app",content:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("p",{children:"PostHog's in-app widget is quickest way to get started managing customer feedback."}),Object(jsx_runtime.jsx)("div",{children:"1. Turn on the feedback widget"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{window.open(apps_common_src.urls.projectAppSearch("Feedback Widget"),"_blank")},type:"primary",children:"Feedback widget"})})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{children:"2. Enable site apps"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:"posthog.init('YOUR_PROJECT_API_KEY', {\n    api_host: 'YOUR API HOST',\n    opt_in_site_apps: true // <--- Add this line\n})"})})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{children:"3. Configure the feedback widget one of the following ways:"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsxs)("ul",{className:"list-disc ml-4",children:[Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Floating feedback button:"})," Select show feedback button on the page to have a floating feedback button on your website."]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Custom button:"})," Add a button with a corresponding data attribute e.g. data-attr='posthog-feedback-button'. When clicked this will open the feedback widget"]})]})})]})]})},{key:"2",header:"Create a custom feedback form",content:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("p",{children:"Build a custom feedback form to connect feedback styled to your brand."}),Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("div",{children:"1. Create a custom form in your webapp app or mobile app"})}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{children:"2. Send the feedback to PostHog"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:"posthog.capture('Feedback Sent', {\n    '$feedback': 'Can you make the logo bigger?'\n})"})})]})]})})}]})})})}function InAppFeedbackHeaderButtons(){const{toggleInAppFeedbackInstructions:toggleInAppFeedbackInstructions}=Object(index_esm.useActions)(inAppFeedbackLogic.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{toggleInAppFeedbackInstructions()},sideIcon:Object(jsx_runtime.jsx)(icons.rb,{}),children:"Feedback instructions"}),Object(jsx_runtime.jsx)(FeedbackInstructions,{})]})}function InAppFeedback(){const{dataTableQuery:dataTableQuery,trendQuery:trendQuery}=Object(index_esm.useValues)(inAppFeedbackLogic.a),{setDataTableQuery:setDataTableQuery}=Object(index_esm.useActions)(inAppFeedbackLogic.a),{toggleInAppFeedbackInstructions:toggleInAppFeedbackInstructions}=Object(index_esm.useActions)(inAppFeedbackLogic.a),{events:events,eventsLoading:eventsLoading}=Object(index_esm.useValues)(inAppFeedbackLogic.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!eventsLoading&&0===events.length&&Object(jsx_runtime.jsxs)("div",{children:["No events found."," ",Object(jsx_runtime.jsx)("a",{onClick:()=>{toggleInAppFeedbackInstructions()},children:"Send feedback"})," ","to use this feature."]}),Object(jsx_runtime.jsx)(Query.a,{query:trendQuery}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),Object(jsx_runtime.jsx)(Query.a,{query:dataTableQuery,setQuery:setDataTableQuery})]})}var userInterviewSchedulerLogic=__webpack_require__("./frontend/src/scenes/feedback/userInterviewSchedulerLogic.ts"),FeatureFlags=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlags.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),UserInterviewScheduler=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feedback/UserInterviewScheduler.scss"),UserInterviewScheduler_default=__webpack_require__.n(UserInterviewScheduler),UserInterviewScheduler_options={insert:"head",singleton:!1},Field=(injectStylesIntoStyleTag_default()(UserInterviewScheduler_default.a,UserInterviewScheduler_options),UserInterviewScheduler_default.a.locals,__webpack_require__("./frontend/src/lib/forms/Field.tsx"));function SchedulerInstructions(){const{schedulerInstructions:schedulerInstructions}=Object(index_esm.useValues)(userInterviewSchedulerLogic.b),{toggleSchedulerInstructions:toggleSchedulerInstructions}=Object(index_esm.useActions)(userInterviewSchedulerLogic.b);return Object(jsx_runtime.jsx)(src.LemonModal,{title:"How to set up the interview scheduler popup",isOpen:schedulerInstructions,onClose:toggleSchedulerInstructions,width:640,children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("p",{children:"The interview scheduler is powered by JSON feature flags. It requires setting up the interview scheduler app or building a custom popup:"}),Object(jsx_runtime.jsx)(src.LemonCollapse,{defaultActiveKey:"1",panels:[{key:"1",header:"Install the interview scheduler app",content:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("p",{children:"PostHog's user interview scheduler app is the quickest way to start inviting customers to interview. Here's what it looks like:"}),Object(jsx_runtime.jsx)("div",{className:"flex justify-center",children:Object(jsx_runtime.jsx)("img",{src:"https://posthog.com/static/user-interview-app-44f939731dce197547b675bb92942e7e.png",className:"w-80 m-auto"})}),Object(jsx_runtime.jsx)("div",{className:"mt-4",children:"1. Turn on the user interview scheduler app"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{window.open(apps_common_src.urls.projectAppSearch("User interview"),"_blank")},type:"primary",children:"User interview scheduler app"})})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{children:"2. Enable site apps"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:"posthog.init('YOUR_PROJECT_API_KEY', {\n    api_host: 'YOUR API HOST',\n    opt_in_site_apps: true // <--- Add this line\n})"})})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{children:"3. Configure the User interview scheduler app:"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsxs)("ul",{className:"list-disc ml-4",children:[Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Domains:"})," Add the domains where you want it to show"]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Invitation Title (default):"})," Set a default title for the popup"]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Invitation Body (default):"})," Set a default body for the popup, you can include images and links"]})]})})]})]})},{key:"2",header:"Create a custom user interview scheduler",content:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("p",{children:"Build a custom user interview scheduler to match your brand."}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{children:["1. Create a custom popup in your webapp or mobile app based on"," ",Object(jsx_runtime.jsx)("a",{href:"https://github.com/PostHog/user-interview-app/blob/main/site.ts",children:"PostHog's open-source popup code"})]}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsxs)("ul",{className:"list-disc ml-4",children:[Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Show the popup:"})," The popup should show when a flag with the prefix ",Object(jsx_runtime.jsx)("code",{children:userInterviewSchedulerLogic.a})," is enabled."]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Hide the popup:"})," Hide the popup when the user clicks ",Object(jsx_runtime.jsx)("code",{children:"Close"})," or ",Object(jsx_runtime.jsx)("code",{children:"Book"}),". Then use local storage to disable it from showing again and set the user properties to prevent is showing across devices. (See the code for an example)"]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Send events:"})," Send events to PostHog when the user clicks the buttons. (See the code for the events)"]})]})}),Object(jsx_runtime.jsxs)("div",{children:["2. Create a user interview flag. The flag should have the prefix"," ",Object(jsx_runtime.jsx)("code",{children:"interview-"})," and be enabled for the users you want to show it to. It should be disabled for the users with the property indicating they've already seen it. (See the code for an example)"]})]})]})})}]})]})})}function CreateInterviewFlag(){const{interviewFlagModal:interviewFlagModal,isInterviewFlagSubmitting:isInterviewFlagSubmitting}=Object(index_esm.useValues)(userInterviewSchedulerLogic.b),{toggleInterviewFlagModal:toggleInterviewFlagModal}=Object(index_esm.useActions)(userInterviewSchedulerLogic.b);return Object(jsx_runtime.jsx)(src.LemonModal,{title:"Create a user interview flag",isOpen:interviewFlagModal,onClose:toggleInterviewFlagModal,width:600,children:Object(jsx_runtime.jsxs)(lib.Form,{logic:userInterviewSchedulerLogic.b,formKey:"interviewFlag",enableFormOnSubmit:!0,className:"space-y-2",children:[Object(jsx_runtime.jsx)(Field.a,{name:"key",label:"Key",children:_ref=>{let{value:value,onChange:onChange}=_ref;return Object(jsx_runtime.jsx)(src.LemonInput,{value:value,onChange:onChange})}}),Object(jsx_runtime.jsx)(Field.a,{name:"title",label:"Invitation Title",children:Object(jsx_runtime.jsx)(src.LemonInput,{})}),Object(jsx_runtime.jsx)(Field.a,{name:"body",label:"Invitation Body",children:Object(jsx_runtime.jsx)(src.LemonInput,{})}),Object(jsx_runtime.jsx)(Field.a,{name:"bookingLink",label:"Booking Link",children:Object(jsx_runtime.jsx)(src.LemonInput,{})}),Object(jsx_runtime.jsx)(Field.a,{name:"description",label:"What is the purpose of the interview? (Internal only)",children:Object(jsx_runtime.jsx)(src.LemonTextArea,{placeholder:"What are these interviews for?"})}),Object(jsx_runtime.jsx)("p",{children:"Use the rollout conditions on the feature flag to set who the interview invitation is shown to. By default, it is shown to no-one."}),Object(jsx_runtime.jsx)("div",{className:"flex justify-end my-4",children:Object(jsx_runtime.jsx)(src.LemonButton,{loading:isInterviewFlagSubmitting,htmlType:"submit",type:"primary",children:"Create"})})]})})}function UserInterviewSchedulerHeaderButtons(){const{toggleInterviewFlagModal:toggleInterviewFlagModal,toggleSchedulerInstructions:toggleSchedulerInstructions}=Object(index_esm.useActions)(userInterviewSchedulerLogic.b);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{toggleSchedulerInstructions()},sideIcon:Object(jsx_runtime.jsx)(icons.rb,{}),children:"Scheduler instructions"}),Object(jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:()=>{toggleInterviewFlagModal()},children:"Create interview invitation"})]}),Object(jsx_runtime.jsx)(SchedulerInstructions,{}),Object(jsx_runtime.jsx)(CreateInterviewFlag,{})]})}function UserInterviewScheduler_UserInterviewScheduler(){return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:"my-4"}),Object(jsx_runtime.jsx)(FeatureFlags.OverViewTab,{flagPrefix:userInterviewSchedulerLogic.a,searchPlaceholder:"Search interview invitations",nouns:["invitation flag","invitation flags"]})]})}const Feedback_Feedback=()=>{const{activeTab:activeTab}=Object(index_esm.useValues)(feedbackLogic.a),{setActiveTab:setActiveTab}=Object(index_esm.useActions)(feedbackLogic.a);return Object(jsx_runtime.jsxs)("div",{className:"Feedback",children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:["Feedback",Object(jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase",children:"Alpha"})]}),buttons:"in-app-feedback"===activeTab?Object(jsx_runtime.jsx)(InAppFeedbackHeaderButtons,{}):Object(jsx_runtime.jsx)(UserInterviewSchedulerHeaderButtons,{})}),Object(jsx_runtime.jsx)(LemonTabs.a,{activeKey:activeTab,onChange:key=>{setActiveTab(key)},tabs:[{content:Object(jsx_runtime.jsx)(InAppFeedback,{}),key:"in-app-feedback",label:"In-app feedback"},{content:Object(jsx_runtime.jsx)(UserInterviewScheduler_UserInterviewScheduler,{}),key:"user-interview-scheduler",label:"User interview scheduler"}]})]})},scene={component:Feedback_Feedback,logic:feedbackLogic.a}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feedback/Feedback.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,"",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feedback/UserInterviewScheduler.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".UserInterviewScheduler .form-error{color:var(--danger)}",""]),module.exports=exports}}]);