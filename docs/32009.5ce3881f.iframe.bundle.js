"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[32009],{"../../frontend/src/scenes/embedded-analytics/EmbeddedAnalyticsScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EmbeddedAnalyticsScene:()=>EmbeddedAnalyticsScene,scene:()=>scene});var posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),Query=__webpack_require__("../../frontend/src/queries/Query/Query.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let EmbeddedTiles=props=>{let{tiles}=props;return(0,jsx_runtime.jsx)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-x-4 gap-y-8",children:tiles.map((tile,i)=>"query"===tile.kind?(0,jsx_runtime.jsx)(EmbeddedQueryTileItem,{tile:tile},i):null)})},EmbeddedQueryTileItem=_ref=>{var _layout$colSpanClassN,_layout$rowSpanClassN,_layout$orderWhenLarg;let{tile}=_ref,{query,title,layout}=tile;return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("col-span-1 row-span-1 flex flex-col",null!==(_layout$colSpanClassN=layout.colSpanClassName)&&void 0!==_layout$colSpanClassN?_layout$colSpanClassN:"md:col-span-6",null!==(_layout$rowSpanClassN=layout.rowSpanClassName)&&void 0!==_layout$rowSpanClassN?_layout$rowSpanClassN:"md:row-span-1",null!==(_layout$orderWhenLarg=layout.orderWhenLargeClassName)&&void 0!==_layout$orderWhenLarg?_layout$orderWhenLarg:"xxl:order-12",layout.className),children:[title&&(0,jsx_runtime.jsx)("div",{className:"flex flex-row items-center mb-3",children:(0,jsx_runtime.jsx)("h2",{children:title})}),(0,jsx_runtime.jsx)(Query.A,{query:query,readOnly:!0})]})};var schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts");let EmbeddedAnalyticsTileId=function(EmbeddedAnalyticsTileId){return EmbeddedAnalyticsTileId.API_QUERIES_COUNT="API_QUERIES_COUNT",EmbeddedAnalyticsTileId}({});EmbeddedAnalyticsTileId.API_QUERIES_COUNT;let embeddedAnalyticsLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","embedded-analytics","embeddedAnalyticsLogic"]),(0,index_esm.selectors)({tiles:[()=>[],()=>[{kind:"query",tileId:EmbeddedAnalyticsTileId.API_QUERIES_COUNT,title:"API Queries Count",layout:{colSpanClassName:"md:col-span-6"},query:{kind:schema_general.OH.DataVisualizationNode,source:{kind:schema_general.OH.HogQLQuery,query:`select 
                                        event_date, 
                                        count(1) as number_of_queries
                                    from query_log
                                    where 
                                        is_personal_api_key_request and 
                                        event_date >= today() - interval 21 day
                                    group by event_date
                                    order by event_date asc`}},insightProps:{dashboardItemId:"embedded_analytics_api_queries",cachedInsight:null},canOpenInsight:!1,canOpenModal:!1}]]})]);function EmbeddedAnalyticsDashboard(){let{tiles}=(0,index_esm.useValues)(embeddedAnalyticsLogic);return(0,jsx_runtime.jsx)(EmbeddedTiles,{tiles:tiles})}function EmbeddedAnalyticsScene(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{}),(0,jsx_runtime.jsxs)(SceneContent._,{children:[(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:"Embedded analytics",description:"Monitor API usage metrics and system performance through embedded analytics dashboard.",resourceType:{type:"embedded",forceIcon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPieChart,{}),forceIconColorOverride:["var(--color-product-embedded-analytics-light)","var(--color-product-embedded-analytics-dark)"]}}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(EmbeddedAnalyticsDashboard,{})]})]})}let scene={component:EmbeddedAnalyticsScene,logic:embeddedAnalyticsLogic}}}]);
//# sourceMappingURL=32009.5ce3881f.iframe.bundle.js.map