(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{"./frontend/src/scenes/groups/Groups.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Groups",(function(){return Groups}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_groupsListLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/scenes/groups/groupsListLogic.ts"),lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/PropertiesTable/index.ts"),scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/persons/PersonPageHeader.tsx"),lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/TZLabel/index.tsx"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_groups_GroupsIntroduction__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/groups/GroupsIntroduction.tsx"),lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),scenes_persons_GroupActorHeader__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/scenes/persons/GroupActorHeader.tsx"),lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.tsx"),lib_lemon_ui_AlertMessage__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/AlertMessage/index.ts"),lib_lemon_ui_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:Groups,logic:_groupsListLogic__WEBPACK_IMPORTED_MODULE_1__.a};function Groups(){const{currentTabName:currentTabName,groupName:{singular:singular,plural:plural},groups:groups,groupsLoading:groupsLoading,search:search}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_1__.a),{loadGroups:loadGroups,setSearch:setSearch}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_1__.a),{groupsAccessStatus:groupsAccessStatus}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__.b);if(groupsAccessStatus==lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__.a.HasAccess||groupsAccessStatus==lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__.a.HasGroupTypes||groupsAccessStatus==lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__.a.NoAccess)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_3__.a,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(scenes_groups_GroupsIntroduction__WEBPACK_IMPORTED_MODULE_8__.b,{access:groupsAccessStatus})]});const columns=[{title:currentTabName,key:"group_key",render:function Render(_,group){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_6__.a,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.a.group(group.group_type_index.toString(),group.group_key),children:Object(scenes_persons_GroupActorHeader__WEBPACK_IMPORTED_MODULE_10__.b)(group.group_key,group.group_properties)})}},{title:"First seen",key:"created_at",render:function Render(_,group){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_4__.a,{time:group.created_at})}}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_3__.a,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_13__.a,{type:"search",placeholder:`Search for ${plural}`,onChange:setSearch,value:search,"data-attr":"group-search",className:"mb-4"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_14__.a,{className:"mb-4"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_5__.a,{columns:columns,rowKey:"group_key",loading:groupsLoading,dataSource:groups.results,expandable:{expandedRowRender:function RenderPropertiesTable(_ref){let{group_properties:group_properties}=_ref;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_2__.a,{properties:group_properties})},rowExpandable:_ref2=>{let{group_properties:group_properties}=_ref2;return!!group_properties&&Object.keys(group_properties).length>0}},pagination:{controlled:!0,onBackward:groups.previous?()=>{loadGroups(groups.previous),window.scrollTo(0,0)}:void 0,onForward:groups.next?()=>{loadGroups(groups.next),window.scrollTo(0,0)}:void 0},emptyState:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(lib_lemon_ui_AlertMessage__WEBPACK_IMPORTED_MODULE_12__.a,{type:"info",children:["No ",plural," found. Make sure to send properties with your ",singular," for them to show up in the list."," ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("a",{href:"https://posthog.com/docs/user-guides/group-analytics",rel:"noopener",target:"_blank",children:"Read more here."})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_11__.a,{language:lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_11__.b.JavaScript,wrap:!0,children:`posthog.group('${singular}', 'id:5', {\n    name: 'Awesome ${currentTabName}',\n    value: 11\n});`})]})})]})}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupsListLogic}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),lib_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/api.ts"),lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/utils.tsx"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/urls.ts"),_models_groupsModel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/models/groupsModel.ts");const groupsListLogic=Object(kea__WEBPACK_IMPORTED_MODULE_0__.kea)({path:["groups","groupsListLogic"],connect:{values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.a,["currentTeamId"],_models_groupsModel__WEBPACK_IMPORTED_MODULE_6__.a,["groupTypes","aggregationLabel"],lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_2__.b,["groupsEnabled"]]},actions:()=>({loadGroups:url=>({url:url}),setTab:tab=>({tab:tab}),setSearch:search=>({search:search})}),loaders:_ref=>{let{values:values}=_ref;return{groups:[{next:null,previous:null,results:[]},{loadGroups:async _ref2=>{let{url:url}=_ref2;if(values.groupsEnabled)return url=url||`api/projects/${values.currentTeamId}/groups/?group_type_index=${values.currentTab}${values.search?"&search="+encodeURIComponent(values.search):""}`,await lib_api__WEBPACK_IMPORTED_MODULE_1__.b.get(url)}}]}},reducers:{search:["",{setSearch:(_,_ref3)=>{let{search:search}=_ref3;return search},setTab:()=>""}],currentTab:["-1",{setTab:(_,_ref4)=>{let{tab:tab}=_ref4;return tab}}]},selectors:{currentTabName:[s=>[s.currentTab,s.groupTypes,s.aggregationLabel],(currentTab,groupTypes,aggregationLabel)=>"-1"===currentTab?"Persons":null!=groupTypes&&groupTypes.length?Object(lib_utils__WEBPACK_IMPORTED_MODULE_3__.i)(aggregationLabel(parseInt(currentTab)).singular):""],groupName:[s=>[s.currentTab,s.aggregationLabel],(currentTab,aggregationLabel)=>"-1"===currentTab?{singular:"person",plural:"persons"}:aggregationLabel(parseInt(currentTab))],breadcrumbs:[s=>[s.currentTabName,s.currentTab],(currentTabName,currentTab)=>[{name:currentTabName,path:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.groups(currentTab)}]]},actionToUrl:()=>({setTab:_ref5=>{let{tab:tab}=_ref5;return"-1"!==tab?scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.groups(tab):scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.persons()}}),urlToAction:_ref6=>{let{actions:actions,values:values}=_ref6;return{"/groups/:id":_ref7=>{let{id:id}=_ref7;id&&(actions.setTab(id),actions.loadGroups())},"/persons":()=>{"-1"!==values.currentTab&&actions.setTab("-1")}}},listeners:_ref8=>{let{actions:actions}=_ref8;return{setSearch:async(_,breakpoint)=>{await breakpoint(300),actions.loadGroups()}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonPageHeader}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),groupsListLogic=__webpack_require__("./frontend/src/scenes/groups/groupsListLogic.ts"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function GroupsTabs(){const{setTab:setTab}=Object(index_esm.useActions)(groupsListLogic.a),{currentTab:currentTab}=Object(index_esm.useValues)(groupsListLogic.a),{groupTypes:groupTypes,aggregationLabel:aggregationLabel}=Object(index_esm.useValues)(groupsModel.a),{groupsAccessStatus:groupsAccessStatus}=Object(index_esm.useValues)(groupsAccessLogic.b),showGroupsIntroductionPage=[groupsAccessLogic.a.HasAccess,groupsAccessLogic.a.HasGroupTypes,groupsAccessLogic.a.NoAccess].includes(groupsAccessStatus);return Object(jsx_runtime.jsx)(LemonTabs.a,{activeKey:currentTab,onChange:activeKey=>setTab(activeKey),tabs:[{key:"-1",label:"Persons"},...showGroupsIntroductionPage?[{key:"0",label:"Groups"}]:groupTypes.map((groupType=>({label:Object(utils.i)(aggregationLabel(groupType.group_type_index).plural),key:String(groupType.group_type_index)})))]})}function PersonPageHeader(_ref){let{hideGroupTabs:hideGroupTabs}=_ref;const{showGroupsOptions:showGroupsOptions}=Object(index_esm.useValues)(groupsModel.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:"Persons"+(showGroupsOptions?" & Groups":""),caption:`A catalog of your product's end users${showGroupsOptions?" and groups":""}.`}),!hideGroupTabs&&showGroupsOptions&&Object(jsx_runtime.jsx)(GroupsTabs,{})]})}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}}}]);