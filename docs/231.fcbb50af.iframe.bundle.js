(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(ce,M,e){"use strict";e.d(M,"a",function(){return Se});var Z=e("./node_modules/core-js/modules/es.array.includes.js"),q=e.n(Z),Me=e("./node_modules/core-js/modules/es.array.iterator.js"),xe=e.n(Me),ge=e("./node_modules/core-js/modules/es.object.to-string.js"),Xe=e.n(ge),Qe=e("./node_modules/core-js/modules/es.object.values.js"),me=e.n(Qe),t=e("./node_modules/core-js/modules/es.string.includes.js"),l=e.n(t),Be=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),de=e.n(Be),x=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),_e=e.n(x),H=e("./node_modules/kea/lib/index.esm.js"),R=e("./frontend/src/lib/utils.tsx"),I=e("./frontend/src/types.ts"),y=e("./frontend/src/scenes/insights/sharedUtils.ts"),E=e("./frontend/src/scenes/insights/insightLogic.ts");function te(A,z){var ne=Object.keys(A);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(A);z&&(oe=oe.filter(function(ut){return Object.getOwnPropertyDescriptor(A,ut).enumerable})),ne.push.apply(ne,oe)}return ne}function Ve(A){for(var z=1;z<arguments.length;z++){var ne=arguments[z]!=null?arguments[z]:{};z%2?te(Object(ne),!0).forEach(function(oe){_e()(A,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(ne)):te(Object(ne)).forEach(function(oe){Object.defineProperty(A,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return A}function Pe(A){return Object.values(I.o).includes(A)}var Se=Object(H.kea)({props:{},key:Object(y.c)("new"),path:function(z){return["lib","components","ChartFilter","chartFilterLogic",z]},connect:function(z){return{actions:[Object(E.c)(z),["setFilters"]],values:[Object(E.c)(z),["filters"]]}},actions:function(){return{setChartFilter:function(ne){return{chartFilter:ne}}}},selectors:{chartFilter:[function(A){return[A.filters]},function(A){var z=A.display,ne=A.funnel_viz_type;return(z===I.d.FunnelViz?ne:z)||null}]},listeners:function(z){var ne=z.actions,oe=z.values;return{setChartFilter:function(Oe){var Ke=Oe.chartFilter,d=oe.filters,ae=d.display,T=d.funnel_viz_type;Pe(Ke)?(T!==Ke||ae!==I.d.FunnelViz)&&ne.setFilters(Ve(Ve({},oe.filters),{},{display:I.d.FunnelViz,funnel_viz_type:Ke})):Object(R.mb)(ae,Ke)||ne.setFilters(Ve(Ve({},oe.filters),{},{display:Ke}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(ce,M,e){"use strict";e.d(M,"a",function(){return R});var Z=e("./node_modules/core-js/modules/es.array.iterator.js"),q=e.n(Z),Me=e("./node_modules/core-js/modules/es.object.to-string.js"),xe=e.n(Me),ge=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Xe=e.n(ge),Qe=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),me=e.n(Qe),t=e("./node_modules/kea/lib/index.esm.js"),l=e("./frontend/src/lib/utils.tsx"),Be=e("./frontend/src/types.ts"),de=e("./frontend/src/scenes/insights/sharedUtils.ts"),x=e("./frontend/src/scenes/insights/insightLogic.ts");function _e(I,y){var E=Object.keys(I);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(I);y&&(te=te.filter(function(Ve){return Object.getOwnPropertyDescriptor(I,Ve).enumerable})),E.push.apply(E,te)}return E}function H(I){for(var y=1;y<arguments.length;y++){var E=arguments[y]!=null?arguments[y]:{};y%2?_e(Object(E),!0).forEach(function(te){me()(I,te,E[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(E)):_e(Object(E)).forEach(function(te){Object.defineProperty(I,te,Object.getOwnPropertyDescriptor(E,te))})}return I}var R=Object(t.kea)({props:{},key:Object(de.c)("new"),path:function(y){return["lib","components","CompareFilter","compareFilterLogic",y]},connect:function(y){return{actions:[Object(x.c)(y),["setFilters"]],values:[Object(x.c)(y),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(E){return{compare:E}},toggleCompare:!0}},selectors:{compare:[function(I){return[I.filters]},function(I){return!!(I!=null&&I.compare)}],disabled:[function(I){return[I.filters,I.canEditInsight]},function(I,y){var E=I.insight,te=I.date_from;return!y||E===Be.s.LIFECYCLE||te==="all"}]},listeners:function(y){var E=y.values,te=y.actions;return{setCompare:function(Pe){var Se=Pe.compare;Object(l.mb)(Se,E.compare)||te.setFilters(H(H({},E.filters),{},{compare:Se}))},toggleCompare:function(){te.setCompare(!E.compare)}}}})},"./frontend/src/lib/components/CopyToClipboard.tsx":function(ce,M,e){"use strict";e.d(M,"a",function(){return Se});var Z=e("./node_modules/core-js/modules/es.symbol.js"),q=e.n(Z),Me=e("./node_modules/core-js/modules/es.symbol.description.js"),xe=e.n(Me),ge=e("./node_modules/core-js/modules/es.object.to-string.js"),Xe=e.n(ge),Qe=e("./node_modules/core-js/modules/es.regexp.to-string.js"),me=e.n(Qe),t=e("./node_modules/@babel/runtime/helpers/extends.js"),l=e.n(t),Be=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),de=e.n(Be),x=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),_e=e.n(x),H=e("./node_modules/react/index.js"),R=e.n(H),I=e("./frontend/src/lib/utils.tsx"),y=e("./frontend/src/lib/components/Tooltip.tsx"),E=e("./frontend/src/lib/components/icons.tsx"),te=e("./frontend/src/lib/components/LemonButton/index.ts");function Ve(A,z){var ne=Object.keys(A);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(A);z&&(oe=oe.filter(function(ut){return Object.getOwnPropertyDescriptor(A,ut).enumerable})),ne.push.apply(ne,oe)}return ne}function Pe(A){for(var z=1;z<arguments.length;z++){var ne=arguments[z]!=null?arguments[z]:{};z%2?Ve(Object(ne),!0).forEach(function(oe){de()(A,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(ne)):Ve(Object(ne)).forEach(function(oe){Object.defineProperty(A,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return A}function Se(A){var z=A.children,ne=A.explicitValue,oe=A.description,ut=A.selectable,Oe=ut===void 0?!1:ut,Ke=A.isValueSensitive,d=Ke===void 0?!1:Ke,ae=A.tooltipMessage,T=ae===void 0?null:ae,Ie=A.iconStyle,n=Ie===void 0?{}:Ie,Ne=A.iconPosition,Ue=Ne===void 0?"end":Ne,Ze=A.style,O=_e()(A,["children","explicitValue","description","selectable","isValueSensitive","tooltipMessage","iconStyle","iconPosition","style"]),Ct=function(){return Object(I.t)(ne!=null?ne:z?z.toString():"",oe)},Mt=R.a.createElement("span",l()({className:d?"ph-no-capture":"",style:Pe({cursor:Oe?"text":"pointer",display:"inline-flex",alignItems:"center",flexDirection:Ue==="end"?"row":"row-reverse",flexWrap:"nowrap",width:"fit-content",wordBreak:"break-all"},Ze),onClick:Oe?void 0:Ct},O),R.a.createElement("span",{style:Ue==="start"?{flexGrow:1}:{}},z),R.a.createElement(te.a,{compact:!0,icon:R.a.createElement(E.IconCopy,null),className:"copy-icon",onClick:Oe?Ct:void 0,style:Pe(de()({},Ue==="end"?"marginLeft":"marginRight",4),n)}));return!Oe||T!==null?R.a.createElement(y.a,{title:T||"Click to copy"},Mt):R.a.createElement(R.a.Fragment,null,Mt)}try{Se.displayName="CopyToClipboardInline",Se.__docgenInfo={description:"",displayName:"CopyToClipboardInline",props:{explicitValue:{defaultValue:null,description:"",name:"explicitValue",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},selectable:{defaultValue:{value:"false"},description:"Makes text selectable instead of copying on click anywhere",name:"selectable",required:!1,type:{name:"boolean"}},isValueSensitive:{defaultValue:{value:"false"},description:"",name:"isValueSensitive",required:!1,type:{name:"boolean"}},tooltipMessage:{defaultValue:{value:"null"},description:"",name:"tooltipMessage",required:!1,type:{name:"string | null"}},iconStyle:{defaultValue:{value:"{}"},description:"",name:"iconStyle",required:!1,type:{name:"Record<string, string | number>"}},iconPosition:{defaultValue:{value:"end"},description:"",name:"iconPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"]={docgenInfo:Se.__docgenInfo,name:"CopyToClipboardInline",path:"frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"})}catch(A){}},"./frontend/src/lib/components/PropertiesTable.tsx":function(ce,M,e){"use strict";e.d(M,"a",function(){return St});var Z=e("./node_modules/core-js/modules/es.array.filter.js"),q=e("./node_modules/core-js/modules/es.array.includes.js"),Me=e("./node_modules/core-js/modules/es.array.map.js"),xe=e("./node_modules/core-js/modules/es.array.some.js"),ge=e("./node_modules/core-js/modules/es.object.entries.js"),Xe=e("./node_modules/core-js/modules/es.string.includes.js"),Qe=e("./node_modules/core-js/modules/es.string.starts-with.js"),me=e("./node_modules/@babel/runtime/helpers/typeof.js"),t=e.n(me),l=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Be=e.n(l),de=e("./node_modules/react/index.js"),x=e.n(de),_e=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),H=e("./node_modules/antd/es/input/index.js"),R=e("./node_modules/antd/es/dropdown/index.js"),I=e("./node_modules/antd/es/menu/index.js"),y=e("./node_modules/antd/es/popconfirm/index.js"),E=e("./frontend/src/lib/utils.tsx"),te=e("./frontend/src/lib/components/icons.tsx"),Ve=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Pe=e.n(Ve),Se=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss"),A=e.n(Se),z={};z.insert="head",z.singleton=!1;var ne=Pe()(A.a,z),oe=A.a.locals||{},ut=e("./frontend/src/lib/components/LemonTable/index.ts"),Oe=e("./frontend/src/lib/components/CopyToClipboard.tsx"),Ke=e("./node_modules/kea/lib/index.esm.js"),d=e("./frontend/src/models/propertyDefinitionsModel.ts"),ae=e("./frontend/src/lib/components/LemonButton/index.ts"),T=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Ie=e.n(T),n=e("./node_modules/antd/es/button/index.js"),Ne=e("./node_modules/antd/es/radio/index.js"),Ue=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),Ze=e("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),O=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),Ct=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Mt=e("./node_modules/@ant-design/icons/es/icons/StopOutlined.js"),un=e("./node_modules/antd/lib/modal/Modal.js"),mn=e.n(un);function wt(se,re){var he=Object.keys(se);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(se);re&&(Le=Le.filter(function(tt){return Object.getOwnPropertyDescriptor(se,tt).enumerable})),he.push.apply(he,Le)}return he}function ot(se){for(var re=1;re<arguments.length;re++){var he=arguments[re]!=null?arguments[re]:{};re%2?wt(Object(he),!0).forEach(function(Le){Ie()(se,Le,he[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(he)):wt(Object(he)).forEach(function(Le){Object.defineProperty(se,Le,Object.getOwnPropertyDescriptor(he,Le))})}return se}function rt(se){var re=se.editProperty,he={creating:!1,propertyType:"string"},Le=Object(de.useState)(he),tt=Be()(Le,2),Ee=tt[0],pt=tt[1],ie=function(){Ee.key&&Ee.value!==void 0&&(re(Ee.key,Ee.value),pt(he))};return x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"mb"},x.a.createElement("div",{className:"text-right"},x.a.createElement(n.a,{"data-attr":"add-prop-button",onClick:function(){return pt(ot(ot({},Ee),{},{creating:!0}))},type:"primary",icon:x.a.createElement(Ue.a,null)},"New property"))),x.a.createElement(mn.a,{visible:Ee.creating,destroyOnClose:!0,onCancel:function(){return pt(he)},title:"Adding new property",okText:x.a.createElement(x.a.Fragment,null,x.a.createElement(Ze.a,{style:{marginRight:4}}),"Save Property"),okButtonProps:{disabled:!Ee.key||Ee.value===void 0},onOk:ie},x.a.createElement("div",{className:"input-set"},x.a.createElement("label",{htmlFor:"propertyKey"},"Key"),x.a.createElement(H.a,{id:"propertyKey",autoFocus:!0,placeholder:"try email, first_name, is_verified, membership_level, total_revenue",onChange:function($e){return pt(ot(ot({},Ee),{},{key:$e.target.value}))}})),x.a.createElement("div",{className:"input-set"},x.a.createElement("label",{htmlFor:"propertyType"},"Type of Property"),x.a.createElement("div",null,x.a.createElement(Ne.a.Group,{value:Ee.propertyType,onChange:function($e){return pt(ot(ot({},Ee),{},{propertyType:$e.target.value,value:$e.target.value==="string"?void 0:"true"}))},id:"propertyType",buttonStyle:"solid"},x.a.createElement(Ne.a.Button,{value:"string"},"Text or Number"),x.a.createElement(Ne.a.Button,{value:"boolean"},"Boolean or Null")))),x.a.createElement("div",{className:"input-set"},x.a.createElement("label",{htmlFor:"propertyValue"},"Value"),Ee.propertyType==="boolean"?x.a.createElement("div",null,x.a.createElement(Ne.a.Group,{value:Ee.value,onChange:function($e){return pt(ot(ot({},Ee),{},{value:$e.target.value}))},id:"propertyValue",buttonStyle:"solid"},x.a.createElement(Ne.a.Button,{value:"true",defaultChecked:!0},x.a.createElement(O.a,null)," True"),x.a.createElement(Ne.a.Button,{value:"false"},x.a.createElement(Ct.a,null)," False"),x.a.createElement(Ne.a.Button,{value:"null"},x.a.createElement(Mt.a,null)," Null"))):x.a.createElement(H.a,{placeholder:"try email@example.com, gold, 1",onChange:function($e){return pt(ot(ot({},Ee),{},{value:$e.target.value}))},id:"propertyValue",onKeyDown:function($e){return $e.key==="Enter"&&ie()}}))))}try{rt.displayName="NewPropertyComponent",rt.__docgenInfo={description:"",displayName:"NewPropertyComponent",props:{editProperty:{defaultValue:null,description:"",name:"editProperty",required:!0,type:{name:"(key: string, newValue?: string | number | boolean | null | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"]={docgenInfo:rt.__docgenInfo,name:"NewPropertyComponent",path:"frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"})}catch(se){}function mt(se){var re=se.value,he=se.onChange;return x.a.createElement(H.a,{defaultValue:re,autoFocus:!0,onBlur:function(){return he(null,!1)},onPressEnter:function(tt){return he(tt.target.value,!0)}})}function Gt(se){var re=se.value,he=se.rootKey,Le=se.onEdit,tt=se.nestingLevel,Ee=se.useDetectedPropertyType,pt=Object(Ke.useValues)(d.a),ie=pt.describeProperty,X=Object(de.useState)(!1),$e=Be()(X,2),it=$e[0],j=$e[1],Pt=he&&!_e.e.includes(he)&&(!tt||tt<=1)&&Le,ft=["string","number","bigint"],st=["boolean","null"],ve;he&&Ee&&(ve=ie(he));var le=re===null?"null":t()(re),vt=re===null?"null":String(re),ke=function(Ae,Q){j(!1),he!==void 0&&Q&&Le&&Ae!=re&&Le(he,Ae,re)},qe=x.a.createElement("span",{className:Pt?"editable ph-no-capture":"ph-no-capture",onClick:function(){return Pt&&ft.includes(le)&&j(!0)}},Object(E.eb)(re)?x.a.createElement("a",{href:re,target:"_blank",rel:"noopener noreferrer",className:"value-link"},x.a.createElement("span",null,vt),x.a.createElement(te.IconOpenInNew,null)):vt);return x.a.createElement("div",{className:"properties-table-value"},it?x.a.createElement(mt,{value:re,onChange:ke}):x.a.createElement(x.a.Fragment,null,Pt&&st.includes(le)?x.a.createElement(R.a,{overlay:x.a.createElement(I.a,{onClick:function(Ae){var Q=Ae.key,je=null;Q==="t"?je=!0:Q==="f"&&(je=!1),ke(je,!0)}},x.a.createElement(I.a.Item,{key:"t"},"true"),x.a.createElement(I.a.Item,{key:"f"},"false"),x.a.createElement(I.a.Item,{key:"n",danger:!0},"null"))},qe):x.a.createElement(Oe.a,{description:"property value",explicitValue:vt,selectable:!0,isValueSensitive:!0},qe),x.a.createElement("div",{className:"property-value-type"},ve||le)))}function St(se){var re=se.properties,he=se.rootKey,Le=se.onEdit,tt=se.sortProperties,Ee=tt===void 0?!1:tt,pt=se.searchable,ie=pt===void 0?!1:pt,X=se.embedded,$e=X===void 0?!0:X,it=se.nestingLevel,j=it===void 0?0:it,Pt=se.onDelete,ft=se.className,st=se.useDetectedPropertyType,ve=Object(de.useState)(""),le=Be()(ve,2),vt=le[0],ke=le[1],qe=Object(de.useMemo)(function(){if(!(re instanceof Object))return[];var Ae=Object.entries(re);if(vt){var Q=vt.toLowerCase();Ae=Ae.filter(function(je){var Et=Be()(je,2),Ft=Et[0],Rt=Et[1];return Ft.toLowerCase().includes(Q)||JSON.stringify(Rt).toLowerCase().includes(Q)})}return Ee&&Ae.sort(function(je,Et){var Ft=Be()(je,1),Rt=Ft[0],zt=Be()(Et,1),en=zt[0];return Rt[0]==="$"&&en[0]!=="$"?1:Rt[0]!=="$"&&en[0]==="$"||Rt.toLowerCase()<en.toLowerCase()?-1:1}),Ae},[re,Ee,vt]);if(Array.isArray(re))return x.a.createElement("div",null,re.length?re.map(function(Ae,Q){return x.a.createElement(St,{key:Q,properties:Ae,nestingLevel:j+1,useDetectedPropertyType:["$set","$set_once"].some(function(je){return je===he})?!1:st})}):x.a.createElement("div",{className:"property-value-type"},"ARRAY (EMPTY)"));var Nt=[{key:"key",title:"Key",width:"20rem",render:function(Q,je){return x.a.createElement("div",{className:"properties-table-key"},x.a.createElement(_e.a,{value:je[0]}))},sorter:function(Q,je){return String(Q[0]).localeCompare(String(je[0]))}},{key:"value",title:"Value",render:function(Q,je){return x.a.createElement(St,{properties:je[1],rootKey:je[0],onEdit:Le,nestingLevel:j+1,useDetectedPropertyType:["$set","$set_once"].some(function(Et){return Et===he})?!1:st})}}];return Pt&&j===0&&Nt.push({key:"delete",title:"",width:0,render:function(Q,je){return!_e.e.includes(je[0])&&!String(je[0]).startsWith("$initial_")&&x.a.createElement(y.a,{onConfirm:function(){return Pt(je[0])},okButtonProps:{danger:!0},okText:"Delete",title:x.a.createElement(x.a.Fragment,null,"Are you sure you want to delete property ",x.a.createElement("code",null,je[0]),"?"," ",x.a.createElement("b",null,"This cannot be undone.")),placement:"left"},x.a.createElement(ae.a,{icon:x.a.createElement(te.IconDeleteForever,null),status:"danger",compact:!0}))}}),re instanceof Object?x.a.createElement(x.a.Fragment,null,ie&&x.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},x.a.createElement(H.a.Search,{placeholder:"Search for property keys and values",className:"mb",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:vt,onChange:function(Q){ke(Q.target.value)}}),Le&&x.a.createElement(rt,{editProperty:Le})),x.a.createElement(ut.a,{columns:Nt,showHeader:!$e,size:"small",rowKey:"0",embedded:$e,dataSource:qe,className:ft,emptyState:"This property value is an empty object."})):x.a.createElement(Gt,{value:re,rootKey:he,onEdit:Le,nestingLevel:j,useDetectedPropertyType:st})}try{St.displayName="PropertiesTable",St.__docgenInfo={description:"",displayName:"PropertiesTable",props:{properties:{defaultValue:null,description:"",name:"properties",required:!0,type:{name:"any"}},sortProperties:{defaultValue:{value:"false"},description:"",name:"sortProperties",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"",name:"searchable",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"true"},description:"Whether this table should be style for being embedded. Default: true.",name:"embedded",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((key: string) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},useDetectedPropertyType:{defaultValue:null,description:"",name:"useDetectedPropertyType",required:!1,type:{name:"boolean"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((key: string, newValue: any, oldValue?: any) => void)"}},nestingLevel:{defaultValue:{value:"0"},description:"",name:"nestingLevel",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"]={docgenInfo:St.__docgenInfo,name:"PropertiesTable",path:"frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"})}catch(se){}},"./frontend/src/scenes/experiments/Experiment.tsx":function(ce,M,e){"use strict";e.r(M),e.d(M,"scene",function(){return _n}),e.d(M,"Experiment_",function(){return yn}),e.d(M,"CodeLanguageSelect",function(){return rn});var Z=e("./node_modules/core-js/modules/es.symbol.js"),q=e("./node_modules/core-js/modules/es.symbol.description.js"),Me=e("./node_modules/core-js/modules/es.array.concat.js"),xe=e("./node_modules/core-js/modules/es.array.filter.js"),ge=e("./node_modules/core-js/modules/es.array.map.js"),Xe=e("./node_modules/core-js/modules/es.array.reduce.js"),Qe=e("./node_modules/core-js/modules/es.function.name.js"),me=e("./node_modules/core-js/modules/es.number.constructor.js"),t=e("./node_modules/core-js/modules/es.number.to-fixed.js"),l=e("./node_modules/core-js/modules/es.object.keys.js"),Be=e("./node_modules/core-js/modules/es.object.to-string.js"),de=e("./node_modules/core-js/modules/es.regexp.to-string.js"),x=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),_e=e.n(x),H=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),R=e.n(H),I=e("./node_modules/antd/es/form/index.js"),y=e("./node_modules/antd/es/row/index.js"),E=e("./node_modules/antd/es/col/index.js"),te=e("./node_modules/antd/es/input/index.js"),Ve=e("./node_modules/antd/es/tooltip/index.js"),Pe=e("./node_modules/antd/es/button/index.js"),Se=e("./node_modules/antd/es/select/index.js"),A=e("./node_modules/antd/es/card/index.js"),z=e("./node_modules/antd/es/tag/index.js"),ne=e("./node_modules/antd/es/collapse/index.js"),oe=e("./node_modules/antd/es/skeleton/index.js"),ut=e("./node_modules/antd/es/progress/index.js"),Oe=e("./node_modules/kea/lib/index.esm.js"),Ke=e("./frontend/src/lib/components/PageHeader.tsx"),d=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),ae=e("./frontend/src/lib/components/PropertyFilters/utils.ts"),T=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Ie=e("./node_modules/react/index.js"),n=e.n(Ie),Ne=e("./frontend/src/scenes/funnels/funnelLogic.ts"),Ue=e("./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx"),Ze=e("./frontend/src/scenes/insights/insightLogic.ts"),O=e("./frontend/src/types.ts"),Ct=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Mt=e.n(Ct),un=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),mn=e.n(un),wt={};wt.insert="head",wt.singleton=!1;var ot=Mt()(mn.a,wt),rt=mn.a.locals||{},mt=e("./node_modules/core-js/modules/es.array.fill.js"),Gt=e("./node_modules/core-js/modules/es.array.find.js"),St=e("./node_modules/core-js/modules/es.array.find-index.js"),se=e("./node_modules/core-js/modules/es.array.iterator.js"),re=e("./node_modules/core-js/modules/es.array.splice.js"),he=e("./node_modules/core-js/modules/es.number.epsilon.js"),Le=e("./node_modules/core-js/modules/es.object.values.js"),tt=e("./node_modules/core-js/modules/es.promise.js"),Ee=e("./node_modules/core-js/modules/es.string.iterator.js"),pt=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ie=e("./node_modules/@babel/runtime/regenerator/index.js"),X=e.n(ie),$e=e("./node_modules/regenerator-runtime/runtime.js"),it=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),j=e.n(it),Pt=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ft=e.n(Pt),st=e("./frontend/src/lib/api.ts"),ve=e("./frontend/src/lib/dayjs.ts"),le=e("./frontend/src/lib/utils.tsx"),vt=["furry","amusing","charming","tame","swift","clever","pleasant","tiny","wild","herbivorous","admirable","adorable","agile","beautiful","bossy","candid","cold","colorful","cuddly","curious","cute","energetic","fast","feisty","fierce","fluffy","friendly","fuzzy","grumpy","hairy","heavy","large","lazy","loud","lovable","loving","enchanted","maternal","sweet","messy","nocturnal","noisy","nosy","picky","playful","quick","sassy","scaly","short","shy","slow","small","smart","soft","strong","tall","tenacious","glorious","warm","cheerful","gracious"],ke=["aardvark","albatross","alligator","alpaca","ant","anteater","antelope","ape","armadillo","donkey","baboon","badger","barracuda","bat","bear","beaver","bee","bison","boar","buffalo","butterfly","camel","capybara","caribou","cassowary","cat","caterpillar","cattle","chamois","cheetah","chicken","chimpanzee","chinchilla","chough","clam","cobra","cockroach","cod","cormorant","coyote","crab","crane","crocodile","crow","curlew","deer","dinosaur","dog","dogfish","dolphin","dotterel","dove","dragonfly","duck","dugong","dunlin","eagle","echidna","eel","eland","elephant","elk","emu","falcon","ferret","finch","firefox","fish","flamingo","fly","fox","frog","gaur","gazelle","gerbil","giraffe","gnat","gnu","goat","goldfinch","goldfish","goose","gorilla","goshawk","grasshopper","grouse","guanaco","gull","hamster","hare","hawk","hedgehog","heron","herring","hippopotamus","hornet","horse","human","hummingbird","hyena","ibex","ibis","jackal","jaguar","jay","jellyfish","kangaroo","kingfisher","koala","kookabura","kouprey","kudu","lapwing","lark","lemur","leopard","lion","llama","lobster","locust","loris","louse","lyrebird","magpie","mallard","manatee","mandrill","mantis","marten","meerkat","mink","mole","mongoose","monkey","moose","mosquito","mouse","mule","narwhal","newt","nightingale","octopus","okapi","opossum","oryx","ostrich","otter","owl","oyster","panther","parrot","partridge","peafowl","pelican","penguin","pheasant","pig","pigeon","pony","porcupine","porpoise","quail","quelea","quetzal","rabbit","raccoon","rail","ram","rat","raven","reindeer","rhinoceros","rook","salamander","salmon","sandpiper","sardine","scorpion","seahorse","seal","shark","sheep","shrew","skunk","snail","snake","sparrow","spider","spoonbill","squid","squirrel","starling","stingray","stinkbug","stork","swallow","swan","tapir","tarsier","termite","tiger","toad","trout","turkey","turtle","viper","vulture","wallaby","walrus","wasp","weasel","whale","wildcat","wolf","wolverine","wombat","woodcock","woodpecker","worm","wren","yak","zebra"];function qe(){return"".concat(Object(le.j)(Object(le.ub)(vt))," ").concat(Object(le.j)(Object(le.ub)(ke)))}var Nt=e("./frontend/src/scenes/insights/utils/cleanFilters.ts"),Ae=e("./frontend/src/scenes/teamLogic.ts"),Q=e("./frontend/src/scenes/urls.ts"),je=e("./node_modules/kea-router/lib/index.js"),Et=e("./frontend/src/scenes/experiments/experimentsLogic.ts"),Ft=e("./frontend/src/lib/constants.tsx"),Rt=e("./frontend/src/scenes/trends/trendsLogic.ts"),zt=e("./frontend/src/lib/utils/eventUsageLogic.ts"),en=e("./frontend/src/scenes/userLogic.ts"),pn=e("./frontend/src/lib/components/Tooltip.tsx"),Kt=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Ln=e("./frontend/src/models/groupsModel.ts"),_t=e("./frontend/src/lib/components/lemonToast.tsx");function tn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable})),s.push.apply(s,o)}return s}function V(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?tn(Object(s),!0).forEach(function(o){_e()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):tn(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}var Yt=14,gt=Object(Oe.kea)({props:{},key:function(r){return r.experimentId||"new"},path:function(r){return["scenes","experiment","experimentLogic",r]},connect:{values:[Ae.a,["currentTeamId"],en.a,["hasAvailableFeature"],Ln.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[Et.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:function(r){return{experiment:r}},createExperiment:function(r,s,o){return{draft:r,runningTime:s,sampleSize:o}},setExperimentInsightId:function(r){return{shortId:r}},createNewExperimentInsight:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setNewExperimentData:function(r){return{experimentData:r}},updateExperimentGroup:function(r,s){return{variant:r,idx:s}},removeExperimentGroup:function(r){return{idx:r}},setExperimentInsightType:function(r){return{insightType:r}},setEditExperiment:function(r){return{editing:r}},setSecondaryMetrics:function(r){return{secondaryMetrics:r}},resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:function(r,s){var o=s.experimentData;if(o.filters){var f=V(V({},r==null?void 0:r.filters),o.filters);return V(V(V({},r),o),{},{filters:f})}if(o.parameters){var C=V(V({},r==null?void 0:r.parameters),o.parameters);return V(V(V({},r),o),{},{parameters:C})}return V(V({},r),o)},updateExperimentGroup:function(r,s){var o,f=s.variant,C=s.idx,b=ft()((r==null||(o=r.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]);return b[C]=V(V({},b[C]),f),V(V({},r),{},{parameters:V(V({},r==null?void 0:r.parameters),{},{feature_flag_variants:b})})},addExperimentGroup:function(r){var s;if(!(r==null||(s=r.parameters)===null||s===void 0)&&s.feature_flag_variants){var o=We(r.parameters.feature_flag_variants.length+1),f=r.parameters.feature_flag_variants.map(function(C,b){return V(V({},C),{},{rollout_percentage:o[b]})});return V(V({},r),{},{parameters:V(V({},r.parameters),{},{feature_flag_variants:[].concat(ft()(f),[{key:"test_group_".concat(r.parameters.feature_flag_variants.length),rollout_percentage:o[o.length-1]}])})})}return r},removeExperimentGroup:function(r,s){var o,f,C=s.idx;if(!r)return r;var b=ft()(((o=r.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]);b.splice(C,1);var m=We(((r==null||(f=r.parameters)===null||f===void 0?void 0:f.feature_flag_variants)||[]).length-1),N=b.map(function(v,G){return V(V({},v),{},{rollout_percentage:m[G]})});return V(V({},r),{},{parameters:V(V({},r.parameters),{},{feature_flag_variants:N})})},setSecondaryMetrics:function(r,s){var o=s.secondaryMetrics,f=o.map(function(C){return C});return V(V({},r),{},{secondary_metrics:f})},resetNewExperiment:function(){return{parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}}}}],experimentInsightType:[O.s.TRENDS,{setExperimentInsightType:function(r,s){var o=s.insightType;return o}}],experimentInsightId:[null,{setExperimentInsightId:function(r,s){var o=s.shortId;return o}}],editingExistingExperiment:[!1,{setEditExperiment:function(r,s){var o=s.editing;return o}}]},listeners:function(r){var s=r.values,o=r.props,f=r.actions;return{createExperiment:function(){var C=j()(X.a.mark(function m(N){var v,G,pe,Te,K,B,g,Fe,xt,kt;return X.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(G=N.draft,pe=N.runningTime,Te=N.sampleSize,K=null,B=!!o.experimentId&&o.experimentId!=="new",Y.prev=3,!B){Y.next=14;break}return Y.next=7,st.b.update("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId),V(V({},s.newExperimentData),{},{parameters:V(V({},(g=s.newExperimentData)===null||g===void 0?void 0:g.parameters),{},{recommended_running_time:pe,recommended_sample_size:Te})},!G&&{start_date:Object(ve.a)()}));case 7:if(K=Y.sent,!(!((Fe=K)===null||Fe===void 0)&&Fe.id)){Y.next=12;break}return f.updateExperiments(K),je.router.actions.push(Q.a.experiment(K.id)),Y.abrupt("return");case 12:Y.next=18;break;case 14:return Y.next=16,st.b.create("api/projects/".concat(s.currentTeamId,"/experiments"),V(V({},s.newExperimentData),{},{parameters:V(V({},(xt=s.newExperimentData)===null||xt===void 0?void 0:xt.parameters),{},{recommended_running_time:pe,recommended_sample_size:Te})},!G&&{start_date:Object(ve.a)()}));case 16:K=Y.sent,K&&zt.f.actions.reportExperimentCreated(K);case 18:Y.next=24;break;case 20:return Y.prev=20,Y.t0=Y.catch(3),_t.a.error(Y.t0.detail||"Failed to create experiment"),Y.abrupt("return");case 24:!((v=K)===null||v===void 0)&&v.id&&(kt=K.id,je.router.actions.push(Q.a.experiment(kt)),f.addToExperiments(K),_t.a.success("Experiment ".concat(B?"updated":"created"),{button:{label:"View it",action:function(){je.router.actions.push(Q.a.experiment(kt))}}}));case 25:case"end":return Y.stop()}},m,null,[[3,20]])}));function b(m){return C.apply(this,arguments)}return b}(),createNewExperimentInsight:function(){var C=j()(X.a.mark(function m(N){var v,G,pe,Te;return X.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return v=N.filters,s.experimentInsightType===O.s.FUNNELS?G=Object(Nt.a)(V({insight:O.s.FUNNELS,funnel_viz_type:O.o.Steps,display:O.d.FunnelViz,date_from:Object(ve.a)().subtract(Yt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ve.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:Ft.q.horizontal},v)):G=Object(Nt.a)(V({insight:O.s.TRENDS,date_from:Object(ve.a)().subtract(Yt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ve.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},v)),pe={name:qe(),description:"",tags:[],filters:G,result:null},B.next=5,st.b.create("api/projects/".concat(s.currentTeamId,"/insights"),pe);case 5:Te=B.sent,f.setExperimentInsightId(Te.short_id),f.setNewExperimentData({filters:V({},pe.filters)});case 8:case"end":return B.stop()}},m)}));function b(m){return C.apply(this,arguments)}return b}(),setFilters:function(b){var m=b.filters;if(s.experimentInsightType===O.s.FUNNELS){var N;(N=Ne.a.findMounted({dashboardItemId:s.experimentInsightId}))===null||N===void 0||N.actions.setFilters(m)}else{var v;(v=Rt.a.findMounted({dashboardItemId:s.experimentInsightId}))===null||v===void 0||v.actions.setFilters(m)}},loadExperimentSuccess:function(){var C=j()(X.a.mark(function m(N){var v;return X.a.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:v=N.experimentData,v&&zt.f.actions.reportExperimentViewed(v),f.setExperimentInsightType((v==null?void 0:v.filters.insight)||O.s.FUNNELS),v!=null&&v.start_date?(f.resetNewExperiment(),f.loadExperimentResults(),f.loadSecondaryMetricResults()):(f.setNewExperimentData(V({},v)),f.createNewExperimentInsight(v==null?void 0:v.filters));case 4:case"end":return pe.stop()}},m)}));function b(m){return C.apply(this,arguments)}return b}(),launchExperiment:function(){var C=j()(X.a.mark(function m(){var N;return X.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:N=Object(ve.a)(),f.updateExperiment({start_date:N.format("YYYY-MM-DDTHH:mm")}),s.experimentData&&zt.f.actions.reportExperimentLaunched(s.experimentData,N);case 3:case"end":return G.stop()}},m)}));function b(){return C.apply(this,arguments)}return b}(),endExperiment:function(){var C=j()(X.a.mark(function m(){var N,v,G;return X.a.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:v=Object(ve.a)(),f.updateExperiment({end_date:v.format("YYYY-MM-DDTHH:mm")}),G=v.diff((N=s.experimentData)===null||N===void 0?void 0:N.start_date,"second"),s.experimentData&&zt.f.actions.reportExperimentCompleted(s.experimentData,v,G,s.areResultsSignificant);case 4:case"end":return Te.stop()}},m)}));function b(){return C.apply(this,arguments)}return b}(),archiveExperiment:function(){var C=j()(X.a.mark(function m(){return X.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:f.updateExperiment({archived:!0}),s.experimentData&&zt.f.actions.reportExperimentArchived(s.experimentData);case 2:case"end":return v.stop()}},m)}));function b(){return C.apply(this,arguments)}return b}(),setExperimentInsightType:function(){if(o.experimentId==="new"||s.editingExistingExperiment)f.createNewExperimentInsight();else{var b;f.createNewExperimentInsight((b=s.experimentData)===null||b===void 0?void 0:b.filters)}},updateExperimentSuccess:function(){var C=j()(X.a.mark(function m(N){var v;return X.a.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:v=N.experimentData,f.updateExperiments(v);case 2:case"end":return pe.stop()}},m)}));function b(m){return C.apply(this,arguments)}return b}()}},loaders:function(r){var s=r.values,o=r.props;return{experimentData:[null,{loadExperiment:function(){var f=j()(X.a.mark(function b(){var m;return X.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(o.experimentId&&o.experimentId!=="new")){v.next=16;break}return v.prev=1,v.next=4,st.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId));case 4:return m=v.sent,v.abrupt("return",m);case 8:if(v.prev=8,v.t0=v.catch(1),v.t0.status!==404){v.next=14;break}je.router.actions.push(Q.a.experiments()),v.next=16;break;case 14:throw _t.a.error("Failed to load experiment ".concat(o.experimentId)),new Error("Failed to load experiment ".concat(o.experimentId));case 16:return v.abrupt("return",null);case 17:case"end":return v.stop()}},b,null,[[1,8]])}));function C(){return f.apply(this,arguments)}return C}(),updateExperiment:function(){var f=j()(X.a.mark(function b(m){var N;return X.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,st.b.update("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId),m);case 2:return N=G.sent,G.abrupt("return",N);case 4:case"end":return G.stop()}},b)}));function C(b){return f.apply(this,arguments)}return C}()}],experimentResults:[null,{loadExperimentResults:function(){var f=j()(X.a.mark(function b(){var m;return X.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,st.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId,"/results"));case 3:return m=v.sent,v.abrupt("return",V(V({},m),{},{itemID:Math.random().toString(36).substring(2,15)}));case 7:if(v.prev=7,v.t0=v.catch(0),v.t0.code!=="no_data"){v.next=11;break}return v.abrupt("return",null);case 11:return _t.a.error(v.t0.detail||"Failed to load experiment results"),v.abrupt("return",null);case 13:case"end":return v.stop()}},b,null,[[0,7]])}));function C(){return f.apply(this,arguments)}return C}()}],secondaryMetricResults:[null,{loadSecondaryMetricResults:function(){var f=j()(X.a.mark(function b(){var m;return X.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Promise.all((((m=s.experimentData)===null||m===void 0?void 0:m.secondary_metrics)||[]).map(function(){var G=j()(X.a.mark(function pe(Te,K){var B;return X.a.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.prev=0,Fe.next=3,st.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId,"/secondary_results?id=").concat(K));case 3:return B=Fe.sent,Fe.abrupt("return",B.result);case 7:return Fe.prev=7,Fe.t0=Fe.catch(0),Fe.abrupt("return",{});case 10:case"end":return Fe.stop()}},pe,null,[[0,7]])}));return function(pe,Te){return G.apply(this,arguments)}}()));case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},b)}));function C(){return f.apply(this,arguments)}return C}()}]}},selectors:{breadcrumbs:[function(a){return[a.experimentData,function(r,s){return s.experimentId}]},function(a,r){return[{name:"Experiments",path:Q.a.experiments()},{name:(a==null?void 0:a.name)||"New Experiment",path:Q.a.experiment(r||"new")}]}],variants:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var s,o;if(r!=null&&r.start_date){var f;return(r==null||(f=r.parameters)===null||f===void 0?void 0:f.feature_flag_variants)||[]}return(a==null||(s=a.parameters)===null||s===void 0?void 0:s.feature_flag_variants)||(r==null||(o=r.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[function(a){return[a.newExperimentData,a.groupsTaxonomicTypes]},function(a,r){var s;return(a==null||(s=a.filters)===null||s===void 0?void 0:s.aggregation_group_type_index)!=null&&r.length>0?[r[a.filters.aggregation_group_type_index]]:[T.a.PersonProperties,T.a.Cohorts]}],parsedSecondaryMetrics:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var s=(a==null?void 0:a.secondary_metrics)||(r==null?void 0:r.secondary_metrics)||[];return s}],minimumDetectableChange:[function(a){return[a.newExperimentData]},function(a){var r;return(a==null||(r=a.parameters)===null||r===void 0?void 0:r.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){return Math.ceil(1600*r*(1-r/100)/(a*a))}}],areResultsSignificant:[function(a){return[a.experimentResults]},function(a){return(a==null?void 0:a.significant)||!1}],significanceBannerDetails:[function(a){return[a.experimentResults]},function(a){if((a==null?void 0:a.significance_code)===O.E.HighLoss){var r;return n.a.createElement(n.a.Fragment,null,"This is because the expected loss in conversion is greater than 1%",n.a.createElement(pn.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(r=((a==null?void 0:a.expected_loss)||0)*100)===null||r===void 0?void 0:r.toFixed(2),"%")},n.a.createElement(Kt.a,{style:{padding:"4px 2px"}})),".")}if((a==null?void 0:a.significance_code)===O.E.HighPValue){var s;return n.a.createElement(n.a.Fragment,null,"This is because the p value is greater than 0.05",n.a.createElement(pn.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(a==null||(s=a.p_value)===null||s===void 0?void 0:s.toFixed(3))||1,".")},n.a.createElement(Kt.a,{style:{padding:"4px 2px"}})),".")}return(a==null?void 0:a.significance_code)===O.E.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(a==null?void 0:a.significance_code)===O.E.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){var s=r*a/100,o=r,f=s+r;return parseFloat((4/Math.pow(Math.sqrt(o/Yt)-Math.sqrt(f/Yt),2)).toFixed(1))}}],expectedRunningTime:[function(){return[]},function(){return function(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yt;return parseFloat((r/(a/s)).toFixed(1))}}],conversionRateForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var s="Can't find variant";if(!a)return s;var o=(a==null?void 0:a.insight).find(function(f){var C,b;return((C=f[0])===null||C===void 0||(b=C.breakdown_value)===null||b===void 0?void 0:b[0])===r});return o?(o[o.length-1].count/o[0].count*100).toFixed(1):s}}],getIndexForVariant:[function(a){return[a.experimentResults]},function(a){return function(r,s){if(!a)return 0;var o=-1;return s===O.s.FUNNELS?o=ft()(a==null?void 0:a.insight).sort(function(f,C){var b,m;return((b=C[0])===null||b===void 0?void 0:b.count)-((m=f[0])===null||m===void 0?void 0:m.count)}).findIndex(function(f){var C,b;return((C=f[0])===null||C===void 0||(b=C.breakdown_value)===null||b===void 0?void 0:b[0])===r}):o=(a==null?void 0:a.insight).findIndex(function(f){return f.breakdown_value===r}),o===-1?0:o}}],countDataForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var s="Can't find variant";if(!a)return s;var o=(a==null?void 0:a.insight).find(function(f){return f.breakdown_value===r});return o?o.count.toString():s}}],highestProbabilityVariant:[function(a){return[a.experimentResults]},function(a){if(a){var r=Math.max.apply(Math,ft()(Object.values(a.probability)));return Object.keys(a.probability).find(function(s){return Math.abs(a.probability[s]-r)<Number.EPSILON})}}],areTrendResultsConfusing:[function(a){return[a.experimentResults,a.highestProbabilityVariant]},function(a,r){if(!a)return!1;var s=(a==null?void 0:a.insight).reduce(function(o,f){return f.count>o.count?f:o},{count:0,breakdown_value:""});return s.count?s.breakdown_value!==r:!1}]},urlToAction:function(r){var s=r.actions,o=r.values,f=r.props;return{"/experiments/:id":function(b){var m=b.id;if(!o.hasAvailableFeature(O.c.EXPERIMENTATION)){je.router.actions.push("/experiments");return}if(m){var N=m==="new"?"new":parseInt(m);N==="new"&&(s.createNewExperimentInsight(),s.resetNewExperiment(),s.setSecondaryMetrics([])),s.setEditExperiment(!1),N!=="new"&&N===f.experimentId&&s.loadExperiment()}}}}});function We(a){var r=Math.round(100/a),s=r*a,o=s-100,f=new Array(a).fill(r);return f[a-1]=r-o,f}var ye=e("./frontend/src/scenes/insights/InsightContainer.tsx"),we=e("./frontend/src/lib/components/icons.tsx"),Vt=e("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),fn=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),Jt=e("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),vn=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),$n=e("./frontend/src/lib/components/CopyToClipboard.tsx"),Hn=e("./frontend/src/scenes/funnels/funnelUtils.ts"),ua=e("./node_modules/antd/es/modal/index.js"),Sn=e("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js");function Pn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable})),s.push.apply(s,o)}return s}function yt(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Pn(Object(s),!0).forEach(function(o){_e()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Pn(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}var Ut=14,An={name:"",filters:{insight:O.s.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},ma={name:"",filters:{insight:O.s.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:Ft.q.horizontal}},pa=Object(Oe.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[Ae.a,["currentTeamId"]]},actions:{setSecondaryMetrics:function(r){return{secondaryMetrics:r}},createNewMetric:!0,addNewMetric:function(r){return{metric:r}},updateMetricFilters:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setPreviewInsightId:function(r){return{shortId:r}},createPreviewInsight:function(r){return{filters:r}},showModal:!0,hideModal:!1,changeInsightType:function(r){return{type:r}},setCurrentMetricName:function(r){return{name:r}},deleteMetric:function(r){return{metricId:r}}},loaders:function(r){var s=r.values;return{experiments:[[],{loadExperiments:function(){var o=j()(X.a.mark(function C(){var b;return X.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,st.b.get("api/projects/".concat(s.currentTeamId,"/experiments"));case 2:return b=N.sent,N.abrupt("return",b.results);case 4:case"end":return N.stop()}},C)}));function f(){return o.apply(this,arguments)}return f}()}]}},reducers:function(r){var s=r.props;return{previewInsightId:[null,{setPreviewInsightId:function(f,C){var b=C.shortId;return b}}],metrics:[s.initialMetrics,{addNewMetric:function(f,C){var b=C.metric;return[].concat(ft()(f),[yt({},b)])},deleteMetric:function(f,C){var b=C.metricId;return f.filter(function(m,N){return N!==b})}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1}}],currentMetricName:["",{setCurrentMetricName:function(f,C){var b=C.name;return b}}],currentMetric:[An,{changeInsightType:function(f,C){var b=C.type;return b===O.s.TRENDS?An:f.filters.insight===O.s.TRENDS?ma:An},updateMetricFilters:function(f,C){var b=C.filters;return yt(yt({},f),{},{filters:b})}}]}},listeners:function(r){var s=r.actions,o=r.values,f=r.props;return{createPreviewInsight:function(){var C=j()(X.a.mark(function m(N){var v,G,pe,Te;return X.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return v=N.filters,(v==null?void 0:v.insight)===O.s.FUNNELS?G=Object(Nt.a)(yt({insight:O.s.FUNNELS,funnel_viz_type:O.o.Steps,display:O.d.FunnelViz,date_from:Object(ve.a)().subtract(Ut,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ve.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:Ft.q.horizontal},v)):G=Object(Nt.a)(yt({insight:O.s.TRENDS,date_from:Object(ve.a)().subtract(Ut,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(ve.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},v)),pe={description:"",tags:[],filters:G,result:null},B.next=5,st.b.create("api/projects/".concat(Ae.a.values.currentTeamId,"/insights"),pe);case 5:Te=B.sent,s.setPreviewInsightId(Te.short_id);case 7:case"end":return B.stop()}},m)}));function b(m){return C.apply(this,arguments)}return b}(),setFilters:function(b){var m=b.filters;if(m.insight===O.s.FUNNELS){var N;(N=Ne.a.findMounted({dashboardItemId:o.previewInsightId}))===null||N===void 0||N.actions.setFilters(m)}else{var v;(v=Rt.a.findMounted({dashboardItemId:o.previewInsightId}))===null||v===void 0||v.actions.setFilters(m)}},createNewMetric:function(){s.addNewMetric(yt(yt({},o.currentMetric),{},{name:o.currentMetricName})),f.onMetricsChange(o.metrics),s.changeInsightType(O.s.TRENDS),s.setCurrentMetricName("")},deleteMetric:function(){f.onMetricsChange(o.metrics)},changeInsightType:function(){return s.createPreviewInsight(o.currentMetric.filters)}}},events:function(r){var s=r.actions;return{afterMount:function(){s.createPreviewInsight()}}}}),Xt=e("./frontend/src/lib/components/LemonButton/index.ts"),wn=e("./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function gn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable})),s.push.apply(s,o)}return s}function bt(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?gn(Object(s),!0).forEach(function(o){_e()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):gn(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}function Tn(a){var r=a.onMetricsChange,s=a.initialMetrics,o=pa({onMetricsChange:r,initialMetrics:s}),f=Object(Oe.useValues)(o),C=f.previewInsightId,b=f.metrics,m=f.modalVisible,N=f.currentMetric,v=Object(Oe.useActions)(o),G=v.createNewMetric,pe=v.updateMetricFilters,Te=v.setFilters,K=v.showModal,B=v.hideModal,g=v.changeInsightType,Fe=v.setCurrentMetricName,xt=v.deleteMetric,kt=Object(Oe.useValues)(Object(Ze.c)({dashboardItemId:C,syncWithUrl:!1})),Qt=kt.insightProps,Y=Object(Oe.useValues)(Object(Ne.a)(Qt)),Zt=Y.isStepsEmpty,qt=Y.filterSteps;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ua.a,{title:"Add secondary metric",visible:m,destroyOnClose:!0,onCancel:B,footer:null,style:{minWidth:600}},n.a.createElement(I.a,{layout:"vertical",initialValues:{type:O.s.TRENDS},onValuesChange:function(nt){nt.name&&Fe(nt.name)},onFinish:function(){G(),B()},scrollToFirstError:!0,requiredMark:!1},n.a.createElement(I.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(te.a,null)),n.a.createElement(I.a.Item,{name:"type",label:"Type"},n.a.createElement(Se.a,{style:{display:"flex"},value:N.filters.insight,onChange:function(){g()},suffixIcon:n.a.createElement(Jt.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(Se.a.Option,{value:O.s.TRENDS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(Se.a.Option,{value:O.s.FUNNELS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel")))))),n.a.createElement(I.a.Item,{name:"query",label:"Query"},n.a.createElement(A.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},N.filters.insight===O.s.FUNNELS&&n.a.createElement(Ue.a,{filters:N.filters,setFilters:function(nt){var Tt=bt(bt({},N.filters),{},{insight:O.s.FUNNELS},nt);pe(Tt),Te(Tt)},typeKey:"funnel-preview-metric",mathAvailability:wn.b.None,hideDeleteBtn:qt.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!Zt,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[T.a.EventProperties,T.a.PersonProperties,T.a.Cohorts,T.a.Elements],rowClassName:"action-filters-bordered"}),N.filters.insight===O.s.TRENDS&&n.a.createElement(Ue.a,{entitiesLimit:1,horizontalUI:!0,filters:N.filters,setFilters:function(nt){var Tt=bt(bt({},N.filters),{},{insight:O.s.TRENDS},nt);pe(Tt),Te(Tt)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,propertiesTaxonomicGroupTypes:[T.a.EventProperties,T.a.PersonProperties,T.a.Cohorts,T.a.Elements]}))),n.a.createElement(I.a.Item,{name:"metric-preview",label:"Metric preview"},n.a.createElement(Oe.BindLogic,{logic:Ze.c,props:Qt},n.a.createElement(ye.a,{disableHeader:!0,disableTable:!0}))),n.a.createElement(y.a,{justify:"end"},n.a.createElement(Xt.a,{type:"secondary",className:"mr-05",onClick:function(){return B()}},"Cancel"),n.a.createElement(Xt.a,{type:"primary",htmlType:"submit"},"Save")))),n.a.createElement(y.a,null,n.a.createElement(E.a,null,b.map(function(ue,nt){return n.a.createElement(y.a,{key:nt,className:"mt"},n.a.createElement(y.a,{align:"middle",className:"full-width border-all",style:{padding:8}},n.a.createElement("div",{style:{fontWeight:500}},"Name")," ",n.a.createElement("div",{className:"metric-name"},ue.name),n.a.createElement(Sn.a,{className:"text-danger",style:{padding:8},onClick:function(){return xt(nt)}})),n.a.createElement(A.a,{className:"full-width",style:{borderTop:"none"},bodyStyle:{padding:0}},ue.filters.insight===O.s.FUNNELS&&n.a.createElement(Ue.a,{filters:ue.filters,setFilters:function(Dt){var Ot=bt(bt({},ue.filters),{},{insight:O.s.FUNNELS},Dt);pe(Ot),Te(Ot)},typeKey:"funnel-preview-".concat(nt),mathAvailability:wn.b.None,hideDeleteBtn:qt.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!Zt,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[T.a.EventProperties,T.a.PersonProperties,T.a.Cohorts,T.a.Elements],rowClassName:"action-filters-bordered",readOnly:!0}),ue.filters.insight===O.s.TRENDS&&n.a.createElement(Ue.a,{horizontalUI:!0,filters:ue.filters,setFilters:function(Dt){var Ot=bt(bt({},ue.filters),{},{insight:O.s.TRENDS},Dt);pe(Ot),Te(Ot)},typeKey:"trend-preview-".concat(nt),buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[T.a.EventProperties,T.a.PersonProperties,T.a.Cohorts,T.a.Elements],readOnly:!0})))}),b&&!(b.length>2)&&n.a.createElement(E.a,null,n.a.createElement("div",{className:"mb-05 mt"},n.a.createElement(Pe.a,{style:{color:"var(--primary)",minWidth:240},onClick:K},"Add metric"))))))}try{Tn.displayName="SecondaryMetrics",Tn.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:Tn.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(a){}var nn=e("./frontend/src/lib/colors.ts"),fa=e("./frontend/src/lib/components/EntityFilterInfo.tsx"),Gn=e("./frontend/src/lib/components/EditableField/EditableField.tsx"),Rn=e("./frontend/src/lib/components/Link.tsx"),La=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Aa=e("./node_modules/antd/es/slider/index.js"),va=e("./node_modules/antd/es/input-number/index.js"),wa=e("./frontend/src/lib/components/InsightLabel/index.tsx"),Jn=e("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function Xn(){var a=Object(Ie.useState)(!1),r=R()(a,2),s=r[0],o=r[1],f=Object(Ie.useState)(!1),C=R()(f,2),b=C[0],m=C[1];return n.a.createElement(A.a,{className:"experiment-workflow",title:n.a.createElement("span",{className:"card-secondary"},"Experiment workflow")},n.a.createElement(y.a,null,n.a.createElement(E.a,{className:"exp-workflow-step step-completed full-width"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(we.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),n.a.createElement("b",{className:"ml-05"},"Create experiment")),n.a.createElement("div",{className:"ml-2"},"Set variants, select participants, and add secondary metrics"))),n.a.createElement(y.a,null,n.a.createElement(E.a,{className:"full-width exp-workflow-step ".concat(s?"step-completed":""),onClick:function(){return o(!s)}},n.a.createElement(y.a,{align:"middle"},s?n.a.createElement(we.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(we.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Validate experiment")),n.a.createElement("div",{className:"ml-2"},"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."))),n.a.createElement(y.a,null,n.a.createElement(E.a,{className:"full-width exp-workflow-step ".concat(b?"step-completed":""),onClick:function(){return m(!b)}},n.a.createElement(y.a,{align:"middle"},b?n.a.createElement(we.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(we.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Launch experiment")),n.a.createElement("div",{className:"ml-2"},"Run your experiment, monitor results, and decide when to terminate your experiment."))))}function hn(a){var r,s,o,f,C,b,m=a.experiment,N=a.trendCount,v=a.funnelConversionRate,G=a.trendExposure,pe=a.funnelSampleSize,Te=a.funnelEntrants,K=(m==null?void 0:m.id)||"new",B=Object(Oe.useValues)(gt({experimentId:K})),g=B.experimentInsightType,Fe=B.editingExistingExperiment,xt=B.minimumDetectableChange,kt=B.expectedRunningTime,Qt=B.aggregationLabel,Y=Object(Oe.useActions)(gt({experimentId:K})),Zt=Y.setNewExperimentData,qt=g===O.s.FUNNELS&&100-v<50?100-v:50,ue=Object(ve.a)().diff(Object(ve.a)(m==null?void 0:m.start_date),"hour"),nt=0;m!=null&&m.start_date?nt=kt(Te||1,pe||0,ue):nt=kt(Te||1,pe||0);var Tt=Object(ve.a)(m==null?void 0:m.start_date).add(nt,"hour"),Dt=!(m!=null&&m.end_date)&&ue>=24&&Te&&pe,Ot=Object(le.s)(m==null||(r=m.filters)===null||r===void 0?void 0:r.properties);return n.a.createElement(y.a,null,n.a.createElement(E.a,{span:!(m!=null&&m.start_date)&&K!=="new"&&!Fe?12:24},K==="new"&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("b",null,"Experiment preview")),n.a.createElement("div",{className:"text-muted"},"Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "))),(K==="new"||Fe)&&n.a.createElement(y.a,{className:"mb"},n.a.createElement(E.a,{span:24},n.a.createElement("div",null,n.a.createElement("b",null,"Minimum acceptable improvement"),n.a.createElement(Ve.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept."},n.a.createElement(Kt.a,{style:{marginLeft:4}}))),n.a.createElement(y.a,{className:"mde-slider"},n.a.createElement(E.a,{span:8},n.a.createElement(Aa.a,{defaultValue:5,value:xt,min:1,max:qt,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:function(lt){Zt({parameters:{minimum_detectable_effect:lt}})},tipFormatter:function(lt){return"".concat(lt,"%")}})),n.a.createElement(va.a,{min:1,max:qt,defaultValue:5,formatter:function(lt){return"".concat(lt,"%")},style:{margin:"0 16px"},value:xt,onChange:function(lt){Zt({parameters:{minimum_detectable_effect:lt}})}})))),n.a.createElement(y.a,{className:"experiment-preview-row ".concat(m!=null&&m.start_date?"mr":"")},g===O.s.TRENDS?n.a.createElement(n.a.Fragment,null,!(m!=null&&m.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Baseline Count"),n.a.createElement("div",{className:"l4"},Object(le.O)(N||0))),n.a.createElement(E.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Count"),n.a.createElement("div",{className:"l4"},Object(le.O)(N+Math.ceil(N*(xt/100))||0)))),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(le.O)(G||0))," days"))):n.a.createElement(n.a.Fragment,null,!(m!=null&&m.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Baseline Conversion Rate"),n.a.createElement("div",{className:"l4"},v.toFixed(1),"%")),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Conversion Rate"),n.a.createElement("div",{className:"l4"},(v+xt).toFixed(1),"%"))),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended Sample Size"),n.a.createElement("div",{className:"pb"},n.a.createElement("span",{className:"l4"},"~",Object(le.O)(pe||0))," persons")),!(m!=null&&m.start_date)&&n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(le.O)(nt||0))," days"))),n.a.createElement(y.a,{className:"full-width mt"},n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Experiment variants"),n.a.createElement("ul",{className:"variants-list"},m==null||(s=m.parameters)===null||s===void 0||(o=s.feature_flag_variants)===null||o===void 0?void 0:o.map(function(Ce,lt){return n.a.createElement("li",{key:lt},Ce.key)}))),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Participants"),n.a.createElement("div",null,Ot!=null&&Ot.length?n.a.createElement("div",null,Ot==null?void 0:Ot.map(function(Ce){return n.a.createElement(Jn.c,{key:Ce.key,item:Ce,style:{margin:2,cursor:"default"}})})):n.a.createElement(n.a.Fragment,null,"100% of"," ",(m==null||(f=m.filters)===null||f===void 0?void 0:f.aggregation_group_type_index)!=null?Object(le.j)(Qt(m.filters.aggregation_group_type_index).plural):"users")))),n.a.createElement(y.a,{className:"full-width"},K!=="new"&&!Fe&&n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Start date"),m!=null&&m.start_date?n.a.createElement("span",null,Object(ve.a)(m==null?void 0:m.start_date).format("D MMM YYYY")):n.a.createElement("span",{className:"description"},"Not started yet")),g===O.s.FUNNELS&&Dt?n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Expected end date"),n.a.createElement("span",null,Tt.isAfter(Object(ve.a)())?Tt.format("D MMM YYYY"):Object(ve.a)().format("D MMM YYYY"))):null,(m==null?void 0:m.end_date)&&n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Completed date"),n.a.createElement("span",null,Object(ve.a)(m==null?void 0:m.end_date).format("D MMM YYYY"))))),K!=="new"&&!Fe&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement(E.a,null,n.a.createElement("div",{className:"card-secondary mb-05"},g===O.s.FUNNELS?"Conversion goal steps":"Trend goal"),[].concat(ft()((m==null||(C=m.filters)===null||C===void 0?void 0:C.events)||[]),ft()((m==null||(b=m.filters)===null||b===void 0?void 0:b.actions)||[])).sort(function(Ce,lt){return(Ce.order||0)-(lt.order||0)}).map(function(Ce,lt){var bn;return n.a.createElement(E.a,{key:lt,className:"mb-05"},n.a.createElement(y.a,{style:{marginBottom:4}},n.a.createElement("div",{className:"preview-conversion-goal-num"},g===O.s.FUNNELS?(Ce.order||0)+1:lt+1),n.a.createElement("b",null,n.a.createElement(wa.b,{action:Ce,showCountedByTag:g===O.s.TRENDS,hideIcon:!0}))),(bn=Ce.properties)===null||bn===void 0?void 0:bn.map(function(Nn){return n.a.createElement(Jn.c,{key:Nn.key,item:Nn})}))})))),K!=="new"&&!Fe&&!(m!=null&&m.start_date)&&n.a.createElement(E.a,{span:12,className:"pl"},n.a.createElement(Xn,null)))}try{hn.displayName="ExperimentPreview",hn.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:hn.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(a){}var In=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx");function an(a){var r,s,o,f=a.experiment,C=Object(Ie.useState)("control"),b=R()(C,2),m=b[0],N=b[1];return n.a.createElement(A.a,{title:n.a.createElement("span",{className:"card-secondary"},"Feature flag usage and implementation"),className:"experiment-implementation-details"},n.a.createElement(y.a,{justify:"space-between",className:"mb-05"},n.a.createElement("div",null,n.a.createElement("span",{className:"mr-05"},"Variant group"),n.a.createElement(Se.a,{onChange:N,defaultValue:"control",suffixIcon:n.a.createElement(Jt.a,null)},f==null||(r=f.parameters)===null||r===void 0||(s=r.feature_flag_variants)===null||s===void 0?void 0:s.map(function(v,G){return n.a.createElement(Se.a.Option,{key:G,value:v.key},v.key)}))),n.a.createElement("div",null,n.a.createElement(rn,null))),n.a.createElement("b",null,"Implement your experiment in code"),n.a.createElement(In.a,{language:In.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat((o=f==null?void 0:f.feature_flag_key)!==null&&o!==void 0?o:"","') === '").concat(m,`') {
    // where '`).concat(m,`' is the variant, run your code here
}`)),n.a.createElement("b",null,"Test that it works"),n.a.createElement(In.a,{language:In.b.JavaScript},"posthog.feature_flags.override({'".concat(f==null?void 0:f.feature_flag_key,"': '").concat(m,"'})")),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://posthog.com/docs/user-guides/feature-flags"},n.a.createElement(y.a,{align:"middle"},"Experiment implementation guide",n.a.createElement(we.IconOpenInNew,{className:"ml-05"}))))}try{an.displayName="ExperimentImplementationDetails",an.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:an.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(a){}function Qn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable})),s.push.apply(s,o)}return s}function En(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Qn(Object(s),!0).forEach(function(o){_e()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Qn(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}var _n={component:yn,logic:gt,paramsToProps:function(r){var s=r.params.id;return{experimentId:s==="new"?"new":parseInt(s)}}};function yn(){var a,r,s,o,f,C,b,m,N,v,G,pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Te=pe.id,K=Object(Oe.useValues)(gt({experimentId:Te})),B=K.newExperimentData,g=K.experimentData,Fe=K.experimentInsightId,xt=K.minimumSampleSizePerVariant,kt=K.recommendedExposureForCountData,Qt=K.variants,Y=K.experimentResults,Zt=K.countDataForVariant,qt=K.editingExistingExperiment,ue=K.experimentInsightType,nt=K.experimentResultsLoading,Tt=K.parsedSecondaryMetrics,Dt=K.areResultsSignificant,Ot=K.conversionRateForVariant,Ce=K.getIndexForVariant,lt=K.significanceBannerDetails,bn=K.areTrendResultsConfusing,Nn=K.taxonomicGroupTypesForSelection,Zn=K.groupTypes,qn=K.aggregationLabel,Bt=K.secondaryMetricResults,sn=K.experimentDataLoading,ga=K.secondaryMetricResultsLoading,ct=Object(Oe.useActions)(gt({experimentId:Te})),$t=ct.setNewExperimentData,ln=ct.createExperiment,ha=ct.launchExperiment,xn=ct.setFilters,Vn=ct.setEditExperiment,Ea=ct.endExperiment,Ra=ct.addExperimentGroup,ya=ct.updateExperiment,On=ct.updateExperimentGroup,on=ct.removeExperimentGroup,ea=ct.setSecondaryMetrics,ba=ct.setExperimentInsightType,xa=ct.archiveExperiment,Oa=Object(Oe.useValues)(La.a),Bn=Oa.featureFlags,ja=I.a.useForm(),ta=R()(ja,1),Kn=ta[0],_a=Object(Ie.useState)(!0),Ca=R()(_a,2),Un=Ca[0],Fn=Ca[1],Sa=Object(Oe.useValues)(Object(Ze.c)({dashboardItemId:Fe})),kn=Sa.insightProps,jn=Object(Oe.useValues)(Object(Ne.a)(kn)),na=jn.isStepsEmpty,Pa=jn.filterSteps,aa=jn.filters,Wn=jn.results,ra=jn.conversionMetrics,sa=Object(Oe.useValues)(Object(Rt.a)(kn)),zn=sa.filters,Ta=sa.results,la=ra.totalRate*100,Ia=xt(la),Yn=Ia*Qt.length,Cn=(a=Ta[0])===null||a===void 0?void 0:a.count,Na=Wn==null||(r=Wn[0])===null||r===void 0?void 0:r.count,Fa=kt(Cn),cn=Math.floor(24/(Qt.length+2)),Dn=ue===O.s.FUNNELS&&(Y==null?void 0:Y.insight)?Y.insight.reduce(function(W,U){var c;return((c=U[0])===null||c===void 0?void 0:c.count)+W},0):0,Da=ue===O.s.FUNNELS?(Dn||0)/((g==null||(s=g.parameters)===null||s===void 0?void 0:s.recommended_sample_size)||1)*100:Object(ve.a)().diff(g==null?void 0:g.start_date,"day")/((g==null||(o=g.parameters)===null||o===void 0?void 0:o.recommended_running_time)||1)*100,Ma={running:"green",draft:"default",complete:"purple"},oa=function(){if(g!=null&&g.start_date){if(!(g!=null&&g.end_date))return"running"}else return"draft";return"complete"},Ht=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return n.a.createElement(n.a.Fragment,null,Te==="new"||qt?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8}},n.a.createElement(Ke.a,{title:"New experiment"}),n.a.createElement(y.a,null,n.a.createElement(Xt.a,{type:"secondary",className:"mr-05",onClick:function(){return je.router.actions.push(Q.a.experiments())}},"Cancel"),n.a.createElement(Xt.a,{type:"primary",htmlType:"submit",form:"new-experiment"},"Save"))),n.a.createElement(I.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:Kn,onValuesChange:function(U){return $t(U)},initialValues:{name:B==null?void 0:B.name,feature_flag_key:B==null?void 0:B.feature_flag_key,description:B==null?void 0:B.description},onFinish:function(){return ln(!0,Fa,Yn)},requiredMark:!1,scrollToFirstError:!0},n.a.createElement("div",null,n.a.createElement(Oe.BindLogic,{logic:Ze.c,props:kn},n.a.createElement(y.a,null,n.a.createElement(E.a,{span:12,style:{paddingRight:24}},n.a.createElement(y.a,{className:"full-width"},n.a.createElement(I.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(te.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})),n.a.createElement(I.a.Item,{style:{marginBottom:"1rem"},label:n.a.createElement("div",null,"Feature flag key"," ",n.a.createElement(Ve.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment."},n.a.createElement(Kt.a,null))),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}]},n.a.createElement(te.a,{"data-attr":"experiment-feature-flag-key",disabled:qt}))),n.a.createElement(I.a.Item,{label:n.a.createElement("div",null,"Description ",n.a.createElement("span",{className:"text-muted"},"(optional)")),name:"description"},n.a.createElement(te.a.TextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})),(B==null||(f=B.parameters)===null||f===void 0?void 0:f.feature_flag_variants)&&n.a.createElement(E.a,null,n.a.createElement("label",null,n.a.createElement("b",null,"Experiment variants")),n.a.createElement("div",{className:"text-muted"},"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."),n.a.createElement(E.a,{className:"variants"},B.parameters.feature_flag_variants.map(function(W,U){return n.a.createElement(I.a,{key:"".concat(W,"-").concat(U),initialValues:{key:W.key},onValuesChange:function(i){On(i,U)}},n.a.createElement(y.a,{key:"".concat(W,"-").concat(U),className:"feature-flag-variant ".concat(U===0?"border-top":U>=3?"border-bottom":"")},n.a.createElement("div",{className:"variant-label",style:En({},Ht[U])},U===0?"Control":"Test"),n.a.createElement(I.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:n.a.createElement(n.a.Fragment,null,n.a.createElement(Vt.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores.")}],style:{display:"contents"}},n.a.createElement(te.a,{disabled:U===0,"data-attr":"feature-flag-variant-key","data-key-index":U.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(U+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})),n.a.createElement("div",{className:"float-right"},!(U===0||U===1)&&n.a.createElement(Ve.a,{title:"Delete this variant",placement:"bottomLeft"},n.a.createElement(Xt.a,{type:"primary-alt",compact:!0,icon:n.a.createElement(we.IconDelete,null),onClick:function(){return on(U)}})))))}),B.parameters.feature_flag_variants.length<4&&n.a.createElement("div",{className:"feature-flag-variant border-bottom"},n.a.createElement(Pe.a,{style:{color:"var(--primary)",border:"none",boxShadow:"none",paddingLeft:0},icon:n.a.createElement(fn.a,null),onClick:function(){return Ra()}},"Add test variant")))),n.a.createElement(y.a,{className:"person-selection"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("strong",null,"Select participants")),n.a.createElement(E.a,null,n.a.createElement("div",{className:"text-muted"},"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."),n.a.createElement("div",{className:"mt mb-05"},n.a.createElement("strong",null,"Participant type")),n.a.createElement(Se.a,{value:(B==null||(C=B.filters)===null||C===void 0?void 0:C.aggregation_group_type_index)!=null?B.filters.aggregation_group_type_index:-1,onChange:function(U){var c,i=U!==-1?U:void 0;i!=(B==null||(c=B.filters)===null||c===void 0?void 0:c.aggregation_group_type_index)&&(xn({properties:[],aggregation_group_type_index:i}),$t({filters:{aggregation_group_type_index:i,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1},n.a.createElement(Se.a.Option,{key:-1,value:-1},"Persons"),Zn.map(function(W){return n.a.createElement(Se.a.Option,{key:W.group_type_index,value:W.group_type_index},Object(le.j)(qn(W.group_type_index).plural))})),n.a.createElement("div",{className:"mt"},n.a.createElement("strong",null,"Filters")),n.a.createElement(d.a,{pageKey:"experiment-participants-property",propertyFilters:ue===O.s.FUNNELS?Object(le.s)(aa.properties):Object(le.s)(zn.properties),onChange:function(U){$t({filters:{properties:U}}),xn({properties:U.filter(ae.b)})},taxonomicGroupTypes:Nn})))),n.a.createElement(y.a,{className:"metrics-selection"},n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Goal type"),n.a.createElement("div",{className:"text-muted"},ue===O.s.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events")),n.a.createElement(Se.a,{style:{display:"flex"},value:ue,onChange:ba,suffixIcon:n.a.createElement(Jt.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(Se.a.Option,{value:O.s.TRENDS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(Se.a.Option,{value:O.s.FUNNELS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel"))))),n.a.createElement("div",{className:"mb mt"},n.a.createElement("b",null,"Experiment goal"),ue===O.s.TRENDS&&n.a.createElement("div",{className:"text-muted"},"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment.")),n.a.createElement(y.a,null,n.a.createElement(A.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},ue===O.s.FUNNELS&&n.a.createElement(Ue.a,{filters:aa,setFilters:function(U){$t({filters:U}),xn(U)},typeKey:"EditFunnel-action",mathAvailability:wn.b.None,hideDeleteBtn:Pa.length===1,buttonCopy:"Add funnel step",buttonType:"link",showSeriesIndicator:!na,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[T.a.EventProperties,T.a.PersonProperties,T.a.Cohorts,T.a.Elements],rowClassName:"action-filters-bordered"}),ue===O.s.TRENDS&&n.a.createElement(Ue.a,{horizontalUI:!0,filters:zn,setFilters:function(U){$t({filters:U}),xn(U)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[T.a.EventProperties,T.a.PersonProperties,T.a.Cohorts,T.a.Elements],customRowPrefix:zn.insight===O.s.LIFECYCLE?n.a.createElement(n.a.Fragment,null,"Showing ",n.a.createElement("b",null,"Unique users")," who did"):void 0}))),Bn[Ft.o.EXPERIMENTS_SECONDARY_METRICS]&&n.a.createElement(E.a,{className:"secondary-metrics"},n.a.createElement("div",null,n.a.createElement("b",null,"Secondary metrics"),n.a.createElement("span",{className:"text-muted ml-05"},"(optional)")),n.a.createElement("div",{className:"text-muted",style:{marginTop:4}},"Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "),n.a.createElement(Tn,{onMetricsChange:function(U){return ea(U)},initialMetrics:Tt}))),n.a.createElement(E.a,{span:12,className:"pl"},n.a.createElement("div",{className:"card-secondary mb"},"Goal preview"),n.a.createElement(ye.a,{disableHeader:ue===O.s.TRENDS,disableTable:!0})))),n.a.createElement(y.a,null,n.a.createElement(A.a,{className:"experiment-preview"},n.a.createElement(hn,{experiment:B,trendCount:Cn,trendExposure:Fa,funnelSampleSize:Yn,funnelEntrants:Na,funnelConversionRate:la}))))),n.a.createElement(Xt.a,{className:"float-right",type:"primary",htmlType:"submit"},"Save"))):!sn&&g?n.a.createElement("div",{className:"view-experiment"},n.a.createElement(y.a,{className:"draft-header"},n.a.createElement(y.a,{justify:"space-between",align:"middle",className:"full-width pb"},n.a.createElement(E.a,null,n.a.createElement(y.a,null,n.a.createElement(Ke.a,{style:{paddingRight:8},title:"".concat(g==null?void 0:g.name),buttons:n.a.createElement(n.a.Fragment,null,n.a.createElement($n.a,{explicitValue:g.feature_flag_key,iconStyle:{color:"var(--text-muted-alt)"}},n.a.createElement("span",{className:"text-muted"},g.feature_flag_key)),n.a.createElement(z.a,{style:{alignSelf:"center"},color:Ma[oa()]},n.a.createElement("b",{className:"uppercase"},oa())),Y&&g.end_date&&n.a.createElement(z.a,{style:{alignSelf:"center"},color:Dt?"green":"geekblue"},n.a.createElement("b",{className:"uppercase"},Dt?"Significant Results":"Results not significant")))})),n.a.createElement("span",{className:"exp-description"},g.start_date?n.a.createElement(Gn.a,{multiline:!0,name:"description",value:g.description||"",placeholder:"Description (optional)",onSave:function(U){return ya({description:U})},maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):n.a.createElement(n.a.Fragment,null,g.description||"There is no description for this experiment."))),g&&!g.start_date&&n.a.createElement("div",null,n.a.createElement(Pe.a,{className:"mr-05",onClick:function(){return Vn(!0)}},"Edit"),n.a.createElement(Pe.a,{type:"primary",onClick:function(){return ha()}},"Launch")),g&&g.start_date&&!g.end_date&&n.a.createElement(Pe.a,{className:"stop-experiment",onClick:function(){return Ea()}},"Stop experiment"),(g==null?void 0:g.end_date)&&Object(ve.a)().isSameOrAfter(Object(ve.a)(g.end_date),"day")&&!g.archived&&n.a.createElement(Pe.a,{className:"archive-experiment",onClick:function(){return xa()}},n.a.createElement("b",null,"Archive experiment")))),n.a.createElement(y.a,null,Un&&Y&&Dt&&!g.end_date&&n.a.createElement(y.a,{align:"middle",className:"significant-results"},n.a.createElement(E.a,{span:20,style:{fontWeight:500,color:"#497342"}},n.a.createElement("div",null,"Experiment results are significant."," ",g.end_date?"":"You can end your experiment now or let it run until complete.")),n.a.createElement(E.a,{span:4},g.end_date?n.a.createElement(vn.a,{className:"close-button",onClick:function(){return Fn(!1)}}):n.a.createElement(Xt.a,{type:"highlighted",className:"end-experiment-btn",onClick:function(){return Ea()}},"End experiment"))),Un&&Y&&!Dt&&!g.end_date&&n.a.createElement(y.a,{align:"top",className:"not-significant-results"},n.a.createElement(E.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"}},n.a.createElement("strong",null,"Your results are not statistically significant"),"."," ",lt," ",g!=null&&g.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",n.a.createElement("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations"}," ","experimentation guide"," "),"for more information."," "),n.a.createElement(E.a,{span:1},n.a.createElement(vn.a,{className:"close-button",onClick:function(){return Fn(!1)}}))),Un&&g.end_date&&n.a.createElement(y.a,{align:"top",className:"feature-flag-mods"},n.a.createElement(E.a,{span:23,style:{fontWeight:500}},n.a.createElement("strong",null,"Your experiment is complete.")," We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",n.a.createElement(Rn.a,{to:g.feature_flag?Q.a.featureFlag(g.feature_flag):void 0},n.a.createElement("b",null,"Adjust feature flag distribution"))),n.a.createElement(E.a,{span:1},n.a.createElement(vn.a,{className:"close-button",onClick:function(){return Fn(!1)}})))),n.a.createElement(y.a,null,n.a.createElement(ne.a,{className:"full-width",defaultActiveKey:"experiment-details"},n.a.createElement(ne.a.Panel,{header:n.a.createElement("b",null,"Experiment details"),key:"experiment-details"},n.a.createElement(y.a,null,n.a.createElement(E.a,{span:g!=null&&g.start_date?12:24},n.a.createElement(hn,{experiment:g,trendCount:Cn,trendExposure:g==null?void 0:g.parameters.recommended_running_time,funnelSampleSize:g==null?void 0:g.parameters.recommended_sample_size,funnelConversionRate:la,funnelEntrants:g!=null&&g.start_date?Dn:Na})),!nt&&!Y&&g.start_date&&n.a.createElement(E.a,{span:12},n.a.createElement(an,{experiment:g})),(Y||((b=g.secondary_metrics)===null||b===void 0?void 0:b.length)>0)&&n.a.createElement(E.a,{className:"secondary-progress",span:g!=null&&g.start_date?12:24},Bn[Ft.o.EXPERIMENTS_SECONDARY_METRICS]&&!!(g!=null&&g.secondary_metrics.length)&&n.a.createElement(E.a,{className:"border-bottom"},n.a.createElement(y.a,{align:"middle",justify:"space-between",className:"mb-05"},n.a.createElement(E.a,{className:"card-secondary",span:2*cn},"Secondary metrics"),g==null||(m=g.parameters)===null||m===void 0||(N=m.feature_flag_variants)===null||N===void 0?void 0:N.map(function(W,U){return n.a.createElement(E.a,{key:U,span:cn,style:{color:"".concat(ue===O.s.FUNNELS?Object(Hn.k)(Ce(W.key,O.s.FUNNELS)+1):Object(nn.c)("white")[Ce(W.key,O.s.TRENDS)])}},n.a.createElement("span",{className:"text-default"},Object(le.j)(W.key)))})),Bn[Ft.o.EXPERIMENTS_SECONDARY_METRICS]&&(g.start_date?ga?n.a.createElement(oe.a,{active:!0,paragraph:!1}):n.a.createElement(n.a.Fragment,null,g.secondary_metrics.map(function(W,U){var c,i;return n.a.createElement(y.a,{className:"border-top",key:U,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(E.a,{span:2*cn},Object(le.j)(W.name)),g==null||(c=g.parameters)===null||c===void 0||(i=c.feature_flag_variants)===null||i===void 0?void 0:i.map(function(u,p){return n.a.createElement(E.a,{key:p,span:cn},Bt!=null&&Bt[U][u.key]?W.filters.insight===O.s.FUNNELS?n.a.createElement(n.a.Fragment,null,((Bt==null?void 0:Bt[U][u.key])*100).toFixed(1),"%"):n.a.createElement(n.a.Fragment,null,Object(le.O)(Bt==null?void 0:Bt[U][u.key])):n.a.createElement(n.a.Fragment,null,"--"))}))})):n.a.createElement(n.a.Fragment,null,g.secondary_metrics.map(function(W,U){var c,i;return n.a.createElement(y.a,{className:"border-top",key:U,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(E.a,{span:2*cn},Object(le.j)(W.name)),g==null||(c=g.parameters)===null||c===void 0||(i=c.feature_flag_variants)===null||i===void 0?void 0:i.map(function(u,p){return n.a.createElement(E.a,{key:p,span:cn},"--")}))})))),Y&&n.a.createElement(E.a,{className:"mt"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Experiment progress")),n.a.createElement(ut.a,{strokeWidth:20,showInfo:!1,percent:Da,strokeColor:"var(--success)"}),ue===O.s.TRENDS&&g.start_date&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},g.end_date?n.a.createElement("div",null,"Ran for"," ",n.a.createElement("b",null,Object(ve.a)(g.end_date).diff(g.start_date,"day"))," ","days"):n.a.createElement("div",null,n.a.createElement("b",null,Object(ve.a)().diff(g.start_date,"day"))," ","days running"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,g==null||(v=g.parameters)===null||v===void 0?void 0:v.recommended_running_time)," ","days")),ue===O.s.FUNNELS&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},g.end_date?n.a.createElement("div",null,"Saw"," ",n.a.createElement("b",null,Object(le.O)(Dn))," ","participants"):n.a.createElement("div",null,n.a.createElement("b",null,Object(le.O)(Dn))," ","participants seen"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,Object(le.O)((g==null||(G=g.parameters)===null||G===void 0?void 0:G.recommended_sample_size)||0))," ","participants"))))))),!(g!=null&&g.start_date)&&n.a.createElement("div",{className:"mt full-width"},n.a.createElement(an,{experiment:g}))),n.a.createElement("div",{className:"experiment-result"},Y?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{justify:"space-around",style:{flexFlow:"nowrap"}},Object.keys(Y.probability).sort(function(W,U){return Y.probability[U]-Y.probability[W]}).map(function(W,U){return n.a.createElement(E.a,{key:U,className:"pr"},n.a.createElement("div",null,n.a.createElement("b",null,Object(le.j)(W))),ue===O.s.TRENDS?n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},n.a.createElement(y.a,null,"action"in Y.insight[0]&&n.a.createElement(fa.a,{filter:Y.insight[0].action}),n.a.createElement("span",{style:{paddingLeft:4}},"count:")))," ",Zt(W)," ",bn&&U===0&&n.a.createElement(Ve.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher."},n.a.createElement(Kt.a,{style:{padding:"4px 2px"}}))):n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},"Conversion rate:")," ",Ot(W),"%"),n.a.createElement(ut.a,{percent:Number((Y.probability[W]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:ue===O.s.FUNNELS?Object(Hn.k)(Ce(W,O.s.FUNNELS)+1):Object(nn.c)("white")[Ce(W,O.s.TRENDS)]}),n.a.createElement("div",null,"Probability that this variant is the best:"," ",n.a.createElement("b",null,(Y.probability[W]*100).toFixed(1),"%")))}))):nt&&n.a.createElement("div",{className:"text-center"},n.a.createElement(oe.a,{active:!0})),Y?n.a.createElement(Oe.BindLogic,{logic:Ze.c,props:{dashboardItemId:Y.itemID,cachedInsight:{short_id:Y.itemID,filters:En(En(En({},Y.filters),{},{insight:ue,display:g.filters.display},ue===O.s.FUNNELS&&{layout:Ft.q.vertical,funnel_viz_type:O.o.Steps}),ue===O.s.TRENDS&&{display:O.d.ActionsLineGraphCumulative}),result:Y.insight},doNotLoad:!0}},n.a.createElement("div",{className:"mt"},n.a.createElement(ye.a,{disableHeader:ue===O.s.TRENDS,disableTable:ue===O.s.FUNNELS}))):g.start_date&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"no-experiment-results"},!nt&&n.a.createElement("div",{className:"text-center"},n.a.createElement("b",null,"There are no results for this experiment yet."),n.a.createElement("div",{className:"text-default"},"Double check your feature flag implementation if you're still not seeing results.")))))):n.a.createElement(oe.a,{active:!0}))}function rn(){return n.a.createElement(Se.a,{defaultValue:"JavaScript",suffixIcon:n.a.createElement(Jt.a,null)},n.a.createElement(Se.a.Option,{value:"JavaScript"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(we.IconJavascript,{style:{marginRight:6}})," JavaScript")))}try{yn.displayName="Experiment_",yn.__docgenInfo={description:"",displayName:"Experiment_",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/Experiment.tsx#Experiment_"]={docgenInfo:yn.__docgenInfo,name:"Experiment_",path:"frontend/src/scenes/experiments/Experiment.tsx#Experiment_"})}catch(a){}},"./frontend/src/scenes/experiments/experimentsLogic.ts":function(ce,M,e){"use strict";e.d(M,"a",function(){return ut});var Z=e("./node_modules/core-js/modules/es.array.concat.js"),q=e.n(Z),Me=e("./node_modules/core-js/modules/es.array.filter.js"),xe=e.n(Me),ge=e("./node_modules/core-js/modules/es.array.iterator.js"),Xe=e.n(ge),Qe=e("./node_modules/core-js/modules/es.array.map.js"),me=e.n(Qe),t=e("./node_modules/core-js/modules/es.object.to-string.js"),l=e.n(t),Be=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),de=e.n(Be),x=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_e=e.n(x),H=e("./node_modules/@babel/runtime/regenerator/index.js"),R=e.n(H),I=e("./node_modules/regenerator-runtime/runtime.js"),y=e.n(I),E=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),te=e.n(E),Ve=e("./node_modules/kea/lib/index.esm.js"),Pe=e("./frontend/src/lib/api.ts"),Se=e("./frontend/src/scenes/teamLogic.ts"),A=e("./frontend/src/types.ts"),z=e("./frontend/src/lib/utils.tsx"),ne=e("./frontend/src/scenes/userLogic.ts"),oe=e("./frontend/src/lib/components/lemonToast.tsx"),ut=Object(Ve.kea)({path:["scenes","experiments","experimentsLogic"],connect:{values:[Se.a,["currentTeamId"],ne.a,["hasAvailableFeature"]]},actions:{},loaders:function(Ke){var d=Ke.values,ae=Ke.actions;return{experiments:[[],{loadExperiments:function(){var T=te()(R.a.mark(function n(Ne){var Ue;return R.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(d.hasAvailableFeature(A.c.EXPERIMENTATION)){O.next=2;break}return O.abrupt("return",[]);case 2:return O.next=4,Pe.b.get("api/projects/".concat(d.currentTeamId,"/experiments?").concat(Ne||""));case 4:return Ue=O.sent,O.abrupt("return",Ue.results);case 6:case"end":return O.stop()}},n)}));function Ie(n){return T.apply(this,arguments)}return Ie}(),deleteExperiment:function(){var T=te()(R.a.mark(function n(Ne){return R.a.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.next=2,Pe.b.delete("api/projects/".concat(d.currentTeamId,"/experiments/").concat(Ne));case 2:return oe.a.info("Experiment removed"),Ze.abrupt("return",d.experiments.filter(function(O){return O.id!==Ne}));case 4:case"end":return Ze.stop()}},n)}));function Ie(n){return T.apply(this,arguments)}return Ie}(),addToExperiments:function(Ie){return[].concat(_e()(d.experiments),[Ie])},updateExperiments:function(Ie){return d.experiments.map(function(n){return n.id===Ie.id?Ie:n})}}],tab:[A.h.All,{setExperimentsFilters:function(){var T=te()(R.a.mark(function n(Ne){var Ue,Ze;return R.a.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ue=Ne.tab,Ze=Ue===A.h.Yours?Object(z.Ab)({user:!0}):Object(z.Ab)({archived:!0}),Ue===A.h.All?ae.loadExperiments(Object(z.Ab)({all:!0})):ae.loadExperiments(Ze),Ct.abrupt("return",Ue);case 4:case"end":return Ct.stop()}},n)}));function Ie(n){return T.apply(this,arguments)}return Ie}()}]}},events:function(Ke){var d=Ke.actions;return{afterMount:function(){d.loadExperiments(Object(z.Ab)({all:!0}))}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(ce,M,e){"use strict";e.d(M,"a",function(){return U});var Z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),q=e.n(Z),Me=e("./node_modules/antd/es/card/index.js"),xe=e("./node_modules/antd/es/row/index.js"),ge=e("./node_modules/antd/es/col/index.js"),Xe=e("./node_modules/core-js/modules/es.array.includes.js"),Qe=e("./node_modules/core-js/modules/es.string.includes.js"),me=e("./node_modules/react/index.js"),t=e.n(me),l=e("./node_modules/kea/lib/index.esm.js"),Be=e("./node_modules/antd/es/tag/index.js"),de=e("./node_modules/antd/es/select/index.js"),x=e("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),_e=e("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),H=e("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),R=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},y=I,E=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),te=function(i,u){return me.createElement(E.a,Object(R.a)(Object(R.a)({},i),{},{ref:u,icon:y}))};te.displayName="AreaChartOutlined";var Ve=me.forwardRef(te),Pe=e("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},A=Se,z=function(i,u){return me.createElement(E.a,Object(R.a)(Object(R.a)({},i),{},{ref:u,icon:A}))};z.displayName="TableOutlined";var ne=me.forwardRef(z),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},ut=oe,Oe=function(i,u){return me.createElement(E.a,Object(R.a)(Object(R.a)({},i),{},{ref:u,icon:ut}))};Oe.displayName="PieChartOutlined";var Ke=me.forwardRef(Oe),d=e("./frontend/src/types.ts"),ae=e("./frontend/src/lib/utils.tsx"),T=e("./frontend/src/scenes/insights/insightLogic.ts");function Ie(c){var i=c.filters,u=c.onChange,p=c.disabled,S=Object(l.useValues)(T.c),h=S.insightProps,P=Object(l.useValues)(Object(x.a)(h)),L=P.chartFilter,_=Object(l.useActions)(Object(x.a)(h)),w=_.setChartFilter,F=i.insight===d.s.STICKINESS||i.insight===d.s.RETENTION,D=!1,J=i.insight===d.s.RETENTION||i.insight===d.s.STICKINESS,k=i.insight===d.s.RETENTION,ee=k||i.insight===d.s.STICKINESS||i.insight===d.s.RETENTION,fe=i.insight===d.s.RETENTION?d.d.ActionsTable:i.insight===d.s.FUNNELS?d.d.FunnelViz:d.d.ActionsLineGraph;function $(Ge){var Ye=Ge.icon,De=Ge.children,et=De===void 0?null:De;return t.a.createElement(t.a.Fragment,null,Ye," ",et)}function He(Ge){var Ye=Ge.children,De=Ye===void 0?null:Ye;return t.a.createElement(Be.a,{color:"orange",style:{marginLeft:8,fontSize:10}},De)}var ze=i.insight===d.s.FUNNELS?[{value:d.o.Steps,label:t.a.createElement($,{icon:t.a.createElement(_e.a,null)},"Steps")},{value:d.o.Trends,label:t.a.createElement($,{icon:t.a.createElement(H.a,null)},"Trends",t.a.createElement(He,null,"BETA"))}]:[{label:"Line Chart",options:[{value:d.d.ActionsLineGraph,label:t.a.createElement($,{icon:t.a.createElement(H.a,null)},"Linear")},{value:d.d.ActionsLineGraphCumulative,label:t.a.createElement($,{icon:t.a.createElement(Ve,null)},"Cumulative"),disabled:F}]},{label:"Bar Chart",options:[{value:d.d.ActionsBar,label:t.a.createElement($,{icon:t.a.createElement(Pe.a,null)},"Time"),disabled:k},{value:d.d.ActionsBarValue,label:t.a.createElement($,{icon:t.a.createElement(Pe.a,null)},"Value"),disabled:ee}]},{value:d.d.ActionsTable,label:t.a.createElement($,{icon:t.a.createElement(ne,null)},"Table"),disabled:D},{value:d.d.ActionsPie,label:t.a.createElement($,{icon:t.a.createElement(Ke,null)},"Pie"),disabled:J}];return t.a.createElement(de.a,{key:"2",defaultValue:i.display||fe,value:L||fe,onChange:function(Ye){w(Ye),u==null||u(Ye)},bordered:!0,dropdownAlign:ae.a.bottomRight,dropdownMatchSelectWidth:!1,"data-attr":"chart-filter",disabled:p,options:ze})}try{Ie.displayName="ChartFilter",Ie.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:Ie.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(c){}var n=e("./node_modules/antd/es/checkbox/index.js"),Ne=e("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Ue(){var c=Object(l.useValues)(T.c),i=c.insightProps,u=Object(l.useValues)(Object(Ne.a)(i)),p=u.compare,S=u.disabled,h=Object(l.useActions)(Object(Ne.a)(i)),P=h.setCompare;return S?null:t.a.createElement(n.a,{onChange:function(_){P(_.target.checked)},checked:p,style:{marginLeft:8,marginRight:6},disabled:S},"Compare",t.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var Ze=e("./node_modules/core-js/modules/es.array.map.js"),O=e("./node_modules/core-js/modules/es.object.entries.js"),Ct=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Mt=e.n(Ct),un=e("./node_modules/core-js/modules/es.array.iterator.js"),mn=e("./node_modules/core-js/modules/es.object.to-string.js"),wt=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ot=e("./frontend/src/scenes/insights/sharedUtils.ts");function rt(c,i){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(c);i&&(p=p.filter(function(S){return Object.getOwnPropertyDescriptor(c,S).enumerable})),u.push.apply(u,p)}return u}function mt(c){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?rt(Object(u),!0).forEach(function(p){q()(c,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):rt(Object(u)).forEach(function(p){Object.defineProperty(c,p,Object.getOwnPropertyDescriptor(u,p))})}return c}var Gt=Object(l.kea)({props:{},key:Object(ot.c)("new"),path:function(i){return["lib","components","IntervalFilter","intervalFilterLogic",i]},connect:function(i){return{actions:[Object(T.c)(i),["setFilters"]],values:[Object(T.c)(i),["filters"]]}},actions:function(){return{setInterval:function(u){return{interval:u}}}},listeners:function(i){var u=i.values,p=i.actions;return{setInterval:function(h){var P=h.interval;Object(ae.mb)(P,u.filters.interval)||p.setFilters(mt(mt({},u.filters),{},{interval:P}))}}},selectors:{interval:[function(c){return[c.filters]},function(c){return c==null?void 0:c.interval}]}}),St=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),se={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function re(c){var i=c.disabled,u=Object(l.useValues)(T.c),p=u.insightProps,S=Object(l.useValues)(Gt(p)),h=S.interval,P=Object(l.useActions)(Gt(p)),L=P.setInterval,_=Object.entries(se).map(function(w){var F=Mt()(w,2),D=F[0],J=F[1].label;return{key:D,value:D,label:D===h?t.a.createElement(t.a.Fragment,null,t.a.createElement(St.a,null)," ",J):J}});return t.a.createElement(de.a,{bordered:!0,disabled:i,defaultValue:h||"day",value:h||void 0,dropdownMatchSelectWidth:!1,onChange:L,"data-attr":"interval-filter",options:_})}try{re.displayName="IntervalFilter",re.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:re.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(c){}var he=e("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),Le=e("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function tt(c,i){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(c);i&&(p=p.filter(function(S){return Object.getOwnPropertyDescriptor(c,S).enumerable})),u.push.apply(u,p)}return u}function Ee(c){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?tt(Object(u),!0).forEach(function(p){q()(c,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):tt(Object(u)).forEach(function(p){Object.defineProperty(c,p,Object.getOwnPropertyDescriptor(u,p))})}return c}function pt(){var c=Object(l.useValues)(T.c),i=c.filters,u=Object(l.useActions)(T.c),p=u.setFilters,S=i.interval,h=i.smoothing_intervals;if(!S)return null;var P=Le.a[S].map(function(L){var _=L.value,w=L.label;return{value:_,label:_===h?t.a.createElement(t.a.Fragment,null,t.a.createElement(he.a,null)," ",w):w}});return P.length?t.a.createElement(de.a,{key:S,bordered:!0,value:h||1,dropdownMatchSelectWidth:!1,onChange:function(_){p(Ee(Ee({},i),{},{smoothing_intervals:_}))},"data-attr":"smoothing-filter",options:P}):t.a.createElement(t.a.Fragment,null)}var ie=e("./frontend/src/lib/constants.tsx"),X=e("./node_modules/@babel/runtime/helpers/extends.js"),$e=e.n(X),it=e("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),j=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function Pt(c){var i=Object(l.useValues)(T.c),u=i.insightProps,p=Object(l.useValues)(Object(it.a)(u)),S=p.dates,h=S.dateFrom,P=S.dateTo,L=Object(l.useActions)(Object(it.a)(u)),_=L.setDates;return t.a.createElement(j.a,$e()({},c,{dateFrom:h!=null?h:void 0,dateTo:P!=null?P:void 0,onChange:function(F,D){var J;_(F,D),(J=c.onChange)===null||J===void 0||J.call(c,F,D)}}))}try{Pt.displayName="InsightDateFilter",Pt.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:Pt.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(c){}var ft=e("./node_modules/rc-picker/lib/generate/dayjs.js"),st=e.n(ft),ve=e("./node_modules/antd/lib/date-picker/generatePicker/index.js"),le=e.n(ve),vt=e("./frontend/src/scenes/retention/retentionTableLogic.ts"),ke=e("./frontend/src/lib/components/Tooltip.tsx"),qe=e("./frontend/src/lib/dayjs.ts"),Nt=le()(st.a);function Ae(c){var i=c.disabled,u=Object(l.useValues)(T.c),p=u.insightProps,S=Object(l.useValues)(Object(vt.d)(p)),h=S.filters,P=Object(l.useActions)(Object(vt.d)(p)),L=P.setFilters,_=h.date_to&&Object(qe.a)(h.date_to).year()!==Object(qe.a)().year()?", YYYY":"";return t.a.createElement(t.a.Fragment,null,t.a.createElement(ke.a,{title:"Cohorts up to this end date"},t.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},t.a.createElement(St.a,null),t.a.createElement(Nt,{showTime:h.period==="Hour",use12Hours:!0,format:h.period==="Hour"?"MMM D".concat(_,", h a"):"MMM D".concat(_),value:h.date_to?Object(qe.a)(h.date_to):void 0,onChange:function(F){return L({date_to:F&&Object(qe.a)(F).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:i}))))}try{Ae.displayName="RetentionDatePicker",Ae.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:Ae.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(c){}var Q=e("./frontend/src/scenes/funnels/funnelLogic.ts"),je=e("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function Et(c){var i=c.disabled,u=Object(l.useValues)(T.c),p=u.insightProps,S=Object(l.useValues)(Object(Q.a)(p)),h=S.barGraphLayout,P=Object(l.useActions)(Object(Q.a)(p)),L=P.setFilters,_=[{value:ie.q.vertical,icon:t.a.createElement(Pe.a,null),label:"Left to right"},{value:ie.q.horizontal,icon:t.a.createElement(je.a,null),label:"Top to bottom"}];return t.a.createElement(de.a,{defaultValue:ie.q.vertical,value:h||ie.q.vertical,onChange:function(F){return L({layout:F})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:i},t.a.createElement(de.a.OptGroup,{label:"Graph display options"},_.map(function(w){return t.a.createElement(de.a.Option,{key:w.value,value:w.value,label:t.a.createElement(t.a.Fragment,null,w.icon," ",w.label)},w.label)})))}try{Et.displayName="FunnelDisplayLayoutPicker",Et.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:Et.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(c){}var Ft=e("./node_modules/core-js/modules/es.array.filter.js"),Rt=e("./node_modules/core-js/modules/es.array.from.js"),zt=e("./node_modules/core-js/modules/es.array.slice.js"),en=e("./node_modules/core-js/modules/es.string.iterator.js"),pn=e("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),Kt=e("./frontend/src/scenes/paths/pathsLogic.ts"),Ln=e("./frontend/src/scenes/userLogic.ts");function _t(c){var i,u=c.disabled,p=Object(l.useValues)(T.c),S=p.insightProps,h=Object(l.useValues)(Object(Kt.b)(S)),P=h.filter,L=Object(l.useActions)(Object(Kt.b)(S)),_=L.setFilter,w=Object(l.useValues)(Ln.a),F=w.user,D=2,J=!(F==null||(i=F.organization)===null||i===void 0)&&i.available_features.includes(d.c.PATHS_ADVANCED)?20:5,k=Array.from(Array.from(Array.from(Array(J+1).keys()).slice(D)),function(ee){return{label:"".concat(ee," Steps"),value:ee}});return t.a.createElement(de.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:P.step_limit||Kt.a,onSelect:function(fe){return _({step_limit:fe})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:ae.a.bottomRight,optionLabelProp:"label",disabled:u},k.map(function(ee){return t.a.createElement(de.a.Option,{key:ee.value,value:ee.value,label:t.a.createElement(t.a.Fragment,null,t.a.createElement(pn.a,null)," ",ee.label)},ee.label)}))}try{_t.displayName="PathStepPicker",_t.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:_t.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(c){}var tn=e("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function V(c){var i=c.disabled,u=Object(l.useValues)(T.c),p=u.insightProps,S=Object(l.useValues)(Object(vt.d)(p)),h=S.retentionReference,P=Object(l.useActions)(Object(vt.d)(p)),L=P.setRetentionReference;return t.a.createElement(de.a,{value:h,onChange:L,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:i},[{value:"total",icon:t.a.createElement(tn.a,null),label:"Overall cohort"},{value:"previous",icon:t.a.createElement(tn.a,null),label:"Relative to previous period"}].map(function(_){return t.a.createElement(de.a.Option,{key:_.value,value:_.value,label:t.a.createElement(t.a.Fragment,null,_.icon," ",_.label)},_.label)}))}try{V.displayName="ReferencePicker",V.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:V.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(c){}var Yt=e("./node_modules/antd/es/tooltip/index.js"),gt=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),We=e("./node_modules/core-js/modules/es.array.concat.js"),ye=e("./node_modules/core-js/modules/es.set.js"),we=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Vt=e.n(we),fn=e("./node_modules/antd/es/input-number/index.js"),Jt=e("./node_modules/clsx/dist/clsx.m.js"),vn=0,$n=90,Hn=new Set([5,15,25,50,90]),ua=[{label:"Auto bins",value:ie.g,display:!0}].concat(Vt()(Array.from(Array.from(Array($n+1).keys()),function(c){return{label:"".concat(c," bins"),value:c,display:Hn.has(c)}})),[{label:"Custom",value:"custom",display:!0}]);function Sn(c){var i=c.disabled,u=Object(l.useValues)(T.c),p=u.insightProps,S=Object(l.useValues)(Object(Q.a)(p)),h=S.filters,P=S.numericBinCount,L=Object(l.useActions)(Object(Q.a)(p)),_=L.setBinCount;return t.a.createElement(de.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:ie.g,value:h.bin_count||ie.g,onSelect:function(F){return _(F)},dropdownRender:function(F){return t.a.createElement(t.a.Fragment,null,F,t.a.createElement("div",null,t.a.createElement(fn.a,{className:"funnel-bins-custom-picker",size:"middle",min:vn,max:$n,value:P,onChange:function(J){var k=typeof J=="string"?parseInt(J):J;k&&_(k)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:ae.a.bottomRight,optionLabelProp:"label",disabled:i},t.a.createElement(de.a.OptGroup,{label:"Bin Count"},ua.map(function(w){return w.value==="custom"?null:t.a.createElement(de.a.Option,{className:Object(Jt.a)({"select-option-hidden":!w.display}),key:w.value,value:w.value,label:t.a.createElement(t.a.Fragment,null,t.a.createElement(Pe.a,null)," ",w.label)},w.label)})))}try{Sn.displayName="FunnelBinsPicker",Sn.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:Sn.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(c){}var Pn=e("./frontend/src/lib/logic/featureFlagLogic.ts"),yt,Ut,An=function(i,u){switch(i){case d.s.FUNNELS:return u.funnel_viz_type===d.o.Trends;case d.s.RETENTION:case d.s.PATHS:return!1;case d.s.TRENDS:case d.s.STICKINESS:case d.s.LIFECYCLE:default:return![ie.e,ie.f,ie.b].includes(u.display||"")}},ma=function(i){switch(i){case d.s.TRENDS:case d.s.STICKINESS:return!0;case d.s.RETENTION:case d.s.FUNNELS:return!1;case d.s.LIFECYCLE:case d.s.PATHS:return!1;default:return!0}},pa=(yt={},q()(yt,"".concat(d.s.TRENDS),!0),q()(yt,"".concat(d.s.STICKINESS),!0),q()(yt,"".concat(d.s.LIFECYCLE),!0),q()(yt,"".concat(d.s.FUNNELS),!0),q()(yt,"".concat(d.s.RETENTION),!1),q()(yt,"".concat(d.s.PATHS),!0),yt),Xt=(Ut={},q()(Ut,"".concat(d.s.TRENDS),!0),q()(Ut,"".concat(d.s.STICKINESS),!0),q()(Ut,"".concat(d.s.LIFECYCLE),!1),q()(Ut,"".concat(d.s.FUNNELS),!1),q()(Ut,"".concat(d.s.RETENTION),!1),q()(Ut,"".concat(d.s.PATHS),!1),Ut),wn=function(i){var u,p;return!i.actions&&!i.events||((u=i.actions)===null||u===void 0?void 0:u.length)===0&&((p=i.events)===null||p===void 0?void 0:p.length)===0};function gn(c){var i=c.filters,u=c.activeView,p=c.disableTable,S=c.disabled,h=u===d.s.FUNNELS,P=u===d.s.PATHS,L=Object(l.useValues)(Pn.a),_=L.featureFlags;return t.a.createElement("div",{className:"display-config-inner"},t.a.createElement("div",{className:"display-config-inner-row"},pa[u]&&!p&&t.a.createElement("span",{className:"filter"},t.a.createElement("span",{className:"head-title-item"},"Date range"),t.a.createElement(Pt,{defaultValue:"Last 7 days",disabled:S||h&&wn(i),bordered:!0,makeLabel:function(F){return t.a.createElement(t.a.Fragment,null,t.a.createElement(St.a,null)," ",F,F=="All time"&&t.a.createElement(Yt.a,{title:"Only events dated after 2015 will be shown"},t.a.createElement(gt.a,{className:"info-indicator"})))}})),An(u,i)&&t.a.createElement("span",{className:"filter"},t.a.createElement("span",{className:"head-title-item"},t.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),t.a.createElement(re,{view:u,disabled:S})),u===d.s.TRENDS&&!i.breakdown_type&&!i.compare&&(!i.display||i.display===ie.d)&&_[ie.o.SMOOTHING_INTERVAL]?t.a.createElement(pt,null):null,u===d.s.RETENTION&&t.a.createElement(t.a.Fragment,null,t.a.createElement(Ae,{disabled:S}),t.a.createElement(V,{disabled:S})),P&&t.a.createElement("span",{className:"filter"},t.a.createElement(_t,{disabled:S})),Xt[u]&&t.a.createElement("span",{className:"filter"},t.a.createElement(Ue,null))),t.a.createElement("div",{className:"display-config-inner-row"},ma(u)&&t.a.createElement("span",{className:"filter"},t.a.createElement("span",{className:"head-title-item"},"Chart type"),t.a.createElement(Ie,{filters:i,disabled:S||i.insight===d.s.LIFECYCLE})),h&&i.funnel_viz_type===d.o.Steps&&t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"filter"},t.a.createElement(Et,{disabled:S}))),h&&i.funnel_viz_type===d.o.TimeToConvert&&t.a.createElement("span",{className:"filter"},t.a.createElement(Sn,{disabled:S}))))}try{gn.displayName="InsightDisplayConfig",gn.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:gn.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(c){}var bt=e("./node_modules/antd/es/button/index.js"),Tn=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),nn=e.n(Tn),fa=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),Gn=e.n(fa),Rn={};Rn.insert="head",Rn.singleton=!1;var La=nn()(Gn.a,Rn),Aa=Gn.a.locals||{},va=e("./frontend/src/scenes/funnels/funnelUtils.ts"),wa=e("./node_modules/core-js/modules/es.array.find.js"),Jn=e("./frontend/src/lib/components/EntityFilterInfo.tsx");function Xn(){var c,i=Object(l.useValues)(T.c),u=i.insightProps,p=Object(l.useValues)(Object(Q.a)(u)),S=p.filters,h=p.numberOfSeries,P=p.areFiltersValid,L=p.filterSteps,_=Object(l.useActions)(Object(Q.a)(u)),w=_.changeStepRange;if(S.funnel_viz_type===d.o.Steps)return null;var F=function(fe,$){w(fe,$)},D=P?Array.from(Array(Math.max(h)).keys()).slice(0,-1):[0],J=P?Array.from(Array(Math.max(h)).keys()).slice(((c=S.funnel_from_step)!==null&&c!==void 0?c:0)+1):[1],k=function(fe){return fe.map(function($){var He=L.find(function(ze){return ze.order===$});return He?t.a.createElement(de.a.Option,{key:$,value:$,label:"Step ".concat($+1)},t.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},t.a.createElement("span",{style:{marginRight:4}},"Step ",$+1,":"),t.a.createElement(Jn.a,{filter:He}))):null})};return t.a.createElement(xe.a,{className:"funnel-options-inputs"},t.a.createElement("span",{className:"text-muted-alt"},"from"),t.a.createElement(de.a,{disabled:!P,dropdownMatchSelectWidth:!1,dropdownAlign:ae.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:S.funnel_from_step||0,onChange:function(fe){return F(fe,S.funnel_to_step)},style:{marginLeft:4,marginRight:4}},k(D)),t.a.createElement("span",{className:"text-muted-alt"},"to"),t.a.createElement(de.a,{disabled:!P,dropdownMatchSelectWidth:!1,dropdownAlign:ae.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:S.funnel_to_step||Math.max(h-1,1),onChange:function(fe){return F(S.funnel_from_step,fe)},style:{marginLeft:4,marginRight:4}},k(J)))}function hn(){var c=Object(l.useValues)(T.c),i=c.insightProps,u=c.filters,p=c.activeView,S=Object(l.useValues)(Object(Q.a)(i)),h=S.conversionMetrics,P=S.aggregationTargetLabel,L=Object(l.useActions)(Object(x.a)(i)),_=L.setChartFilter;if(p!==d.s.FUNNELS)return null;var w=[].concat(Vt()(u.funnel_viz_type===d.o.Steps?[t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},t.a.createElement(ke.a,{title:"Overall conversion rate for all ".concat(P.plural," on the entire funnel.")},t.a.createElement(gt.a,{className:"info-indicator left"})),"Total conversion rate"),t.a.createElement("span",{className:"text-muted-alt mr-025"},":"),t.a.createElement("span",{className:"l4"},Object(va.c)(h.totalRate),"%"))]:[]),Vt()(u.funnel_viz_type!==d.o.Trends?[t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},t.a.createElement(ke.a,{title:"Average (arithmetic mean) of the total time each ".concat(P.singular," spent in the entire funnel.")},t.a.createElement(gt.a,{className:"info-indicator left"})),"Average time to convert"," "),u.funnel_viz_type===d.o.TimeToConvert&&t.a.createElement(Xn,null),t.a.createElement("span",{className:"text-muted-alt mr-025"},":"),t.a.createElement(bt.a,{type:"link",onClick:function(){return _(d.o.TimeToConvert)},disabled:u.funnel_viz_type===d.o.TimeToConvert},t.a.createElement("span",{className:"l4"},Object(ae.N)(h.averageTime))))]:[]),Vt()(u.funnel_viz_type===d.o.Trends?[t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),t.a.createElement(Xn,null))]:[]));return t.a.createElement(xe.a,{className:"funnel-canvas-label",align:"middle"},w.map(function(F,D){return t.a.createElement(t.a.Fragment,{key:D},D>0&&t.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),F)}))}var In=e("./frontend/src/lib/hooks/usePeriodicRerender.ts"),an=3;function Qn(){var c=Object(l.useValues)(T.c),i=c.lastRefresh,u=Object(l.useActions)(T.c),p=u.loadResults;return Object(In.a)(15e3),t.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",i?Object(qe.a)(i).fromNow():"a while ago",t.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),t.a.createElement(Yt.a,{title:t.a.createElement(t.a.Fragment,null,"Insights can be refreshed",t.a.createElement("br",null),"every ",an," minutes.")},t.a.createElement(bt.a,{size:"small",type:"link",onClick:function(){return p(!0)},disabled:!!i&&Object(qe.a)().subtract(an-.5,"minutes").isBefore(i),style:{padding:0}},t.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var En=e("./frontend/src/scenes/trends/PersonsModal.tsx"),_n=e("./frontend/src/scenes/trends/viz/index.ts"),yn=e("./frontend/src/scenes/trends/SaveCohortModal.tsx"),rn=e("./frontend/src/scenes/trends/trendsLogic.ts"),a=e("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(c){}var r=e("./frontend/src/scenes/trends/personsModalLogic.ts"),s=e("./frontend/src/lib/utils/eventUsageLogic.ts"),o=e("./frontend/src/scenes/insights/insightSceneLogic.tsx");function f(c){var i=c.view,u=Object(l.useValues)(o.a),p=u.insightMode,S=Object(l.useValues)(T.c),h=S.insightProps,P=Object(l.useValues)(r.b),L=P.cohortModalVisible,_=Object(l.useActions)(r.b),w=_.setCohortModalVisible,F=Object(l.useValues)(Object(rn.a)(h)),D=F.filters,J=F.loadMoreBreakdownUrl,k=F.breakdownValuesLoading,ee=F.showModalActions,fe=F.aggregationTargetLabel,$=Object(l.useActions)(Object(rn.a)(h)),He=$.loadMoreBreakdownValues,ze=Object(l.useValues)(r.b),Ge=ze.showingPeople,Ye=Object(l.useActions)(r.b),De=Ye.saveCohortWithUrl,et=Object(l.useActions)(s.f),Lt=et.reportCohortCreatedFromPersonsModal,At=function(){if(!D.display||D.display===ie.d||D.display===ie.c||D.display===ie.a)return t.a.createElement(_n.b,null);if(D.display===ie.f)return t.a.createElement(l.BindLogic,{logic:rn.a,props:{dashboardItemId:null,view:i,filters:null}},t.a.createElement(a.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(i),canEditSeriesNameInline:p===d.t.Edit,isMainInsightView:!0}));if(D.display===ie.e)return t.a.createElement(_n.c,null);if(D.display===ie.b)return t.a.createElement(_n.a,null)};return t.a.createElement(t.a.Fragment,null,(D.actions||D.events)&&t.a.createElement("div",{className:D.display!==ie.f?"trends-insights-container":void 0},At()),D.breakdown&&t.a.createElement("div",{className:"mt text-center"},J?t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"text-muted mb"},"For readability, ",t.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),t.a.createElement("div",null,t.a.createElement(bt.a,{style:{textAlign:"center",marginBottom:16},onClick:He,loading:k},"Load more breakdown values"))):t.a.createElement("span",{className:"text-muted"},"Showing ",t.a.createElement("b",null,"all breakdown values"))),t.a.createElement(En.a,{visible:Ge&&!L,view:i,filters:D,onSaveCohort:function(){w(!0)},showModalActions:ee,aggregationTargetLabel:fe}),t.a.createElement(yn.a,{visible:L,onOk:function(Mn){De(Mn),w(!1),Lt(D)},onCancel:function(){return w(!1)}}))}try{f.displayName="TrendInsight",f.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:f.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(c){}var C=e("./frontend/src/scenes/funnels/Funnel.tsx");function b(){var c=Object(l.useValues)(T.c),i=c.insightProps,u=Object(l.useValues)(Object(Q.a)(i)),p=u.isValidFunnel,S=u.insightLoading,h=u.filters,P=u.areFiltersValid,L=u.barGraphLayout,_=u.aggregationTargetLabel,w=Object(l.useValues)(r.b),F=w.showingPeople,D=w.cohortModalVisible,J=Object(l.useActions)(r.b),k=J.setCohortModalVisible;return t.a.createElement(t.a.Fragment,null,t.a.createElement(En.a,{visible:F&&!D,view:d.s.FUNNELS,filters:h,onSaveCohort:function(){k(!0)},showModalActions:h.aggregation_group_type_index==null,aggregationTargetLabel:_}),t.a.createElement("div",{className:Object(Jt.a)("funnel-insights-container",{"non-empty-state":p&&P||S,"no-padding":h.funnel_viz_type==d.o.Steps&&L===ie.q.vertical})},t.a.createElement(C.a,null)))}var m=e("./frontend/src/scenes/retention/RetentionContainer.tsx"),N=e("./frontend/src/scenes/paths/Paths.tsx"),v=e("./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepTable.tsx"),G=e("./frontend/src/scenes/insights/EmptyStates/index.ts");function pe(){var c=Object(l.useValues)(T.c),i=c.activeView;return i!==d.s.PATHS?null:t.a.createElement(xe.a,{className:"funnel-canvas-label",align:"middle"},t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var Te=e("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),K=e("./node_modules/antd/lib/input/TextArea.js"),B=e.n(K),g=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),Fe=e.n(g),xt={};xt.insert="head",xt.singleton=!1;var kt=nn()(Fe.a,xt),Qt=Fe.a.locals||{},Y=e("./node_modules/core-js/modules/es.number.constructor.js"),Zt=e("./node_modules/core-js/modules/es.number.is-integer.js"),qt=e("./node_modules/core-js/modules/es.number.to-fixed.js"),ue=e("./node_modules/core-js/modules/es.regexp.exec.js"),nt=e("./node_modules/core-js/modules/es.string.split.js"),Tt=e("./node_modules/antd/es/spin/index.js"),Dt=e("./node_modules/antd/es/table/index.js"),Ot=e("./node_modules/antd/lib/table/Column.js"),Ce=e.n(Ot),lt=e("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},Nn=bn,Zn=function(i,u){return me.createElement(E.a,Object(R.a)(Object(R.a)({},i),{},{ref:u,icon:Nn}))};Zn.displayName="FallOutlined";var qn=me.forwardRef(Zn),Bt=e("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),sn=e("./frontend/src/lib/components/icons.tsx"),ga=e("./node_modules/antd/lib/checkbox/Checkbox.js"),ct=e.n(ga),$t=e("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),ln=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ha=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),xn=e.n(ha),Vn={};Vn.insert="head",Vn.singleton=!1;var Ea=nn()(xn.a,Vn),Ra=xn.a.locals||{},ya=e("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function On(c){var i=c.id,u=c.offset,p=c.children,S=Object(l.useActions)(Object(ya.a)({id:i,offset:u})),h=S.scrolling,P=Object(me.useRef)(null);return Object(me.useEffect)(function(){var L=P.current;return document.addEventListener("scroll",function(){return h(L)}),function(){return document.removeEventListener("scroll",function(){return h(L)})}},[P.current]),t.a.createElement("div",{ref:P},p)}try{On.displayName="VisibilitySensor",On.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:On.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(c){}var on=e("./frontend/src/lib/components/LemonButton/index.ts"),ea=e("./frontend/src/lib/components/Popup/Popup.tsx"),ba=e("./node_modules/antd/es/modal/index.js"),xa=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),Oa=e("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),Bn=e("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),ja=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),ta=e.n(ja),Kn={};Kn.insert="head",Kn.singleton=!1;var _a=nn()(ta.a,Kn),Ca=ta.a.locals||{},Un=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),Fn=e("./frontend/src/lib/components/Link.tsx"),Sa=e("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function kn(){var c=Object(l.useValues)(T.c),i=c.insightProps,u=Object(Q.a)(i),p=Object(l.useValues)(u),S=p.correlationsLoading,h=p.funnelCorrelationDetails,P=p.parseDisplayNameForCorrelation,L=p.correlationMatrixAndScore,_=Object(l.useActions)(u),w=_.setFunnelCorrelationDetails,F=_.openCorrelationPersonsModal,D=(h==null?void 0:h.result_type)===d.k.Events?"event":"property",J=(h==null?void 0:h.result_type)===d.k.Events?"performed event":"have property",k=t.a.createElement(t.a.Fragment,null);if(h){var ee=P(h),fe=ee.first_value,$=ee.second_value;k=t.a.createElement(t.a.Fragment,null,t.a.createElement(ln.a,{value:fe}),$!==void 0&&t.a.createElement(t.a.Fragment,null," :: ",t.a.createElement(ln.a,{value:$,disablePopover:!0})))}var He=L.correlationScore,ze=L.truePositive,Ge=L.falsePositive,Ye=L.trueNegative,De=L.falseNegative,et=L.correlationScoreStrength,Lt=et==="strong"?t.a.createElement(xa.a,{style:{color:"var(--success)"}}):et==="moderate"?t.a.createElement(Oa.a,{style:{color:"var(--warning)"}}):t.a.createElement(Bn.a,{style:{color:"var(--danger)"}}),At=function(){return w(null)};return t.a.createElement(ba.a,{className:"correlation-matrix",visible:!!h,onCancel:At,destroyOnClose:!0,footer:t.a.createElement(bt.a,{onClick:At},"Dismiss"),width:600,title:"Correlation details"},t.a.createElement("div",{className:"correlation-table-wrapper"},S?t.a.createElement("div",{className:"mt text-center"},t.a.createElement(Un.a,{size:"lg"})):h?t.a.createElement(t.a.Fragment,null,t.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",J," ",t.a.createElement("b",null,k),"."),t.a.createElement("table",null,t.a.createElement("thead",null,t.a.createElement("tr",{className:"table-title"},t.a.createElement("td",{colSpan:3},"Results matrix")),t.a.createElement("tr",null,t.a.createElement("td",null,(h==null?void 0:h.result_type)===d.k.Events?"Performed event":"Has property"),t.a.createElement("td",null,"Success"),t.a.createElement("td",null,"Dropped off"))),t.a.createElement("tbody",null,t.a.createElement("tr",null,t.a.createElement("td",{className:"horizontal-header"},"Yes"),t.a.createElement("td",null,t.a.createElement(ke.a,{title:"True positive (TP) - Percentage of users who ".concat(J," and completed the funnel.")},t.a.createElement("div",{className:"percentage"},ze?Object(ae.ob)(ze/(ze+Ge)):"0.00%")),ze===0?"0 users":t.a.createElement(Fn.a,{onClick:function(){F(h,!0)}},Object(ae.qb)(ze,"user",void 0,!0,!0))),t.a.createElement("td",null,t.a.createElement("div",{className:"percentage"},t.a.createElement(ke.a,{title:"False negative (FN) - Percentage of users who ".concat(J," and did not complete the funnel.")},De?Object(ae.ob)(De/(De+Ye)):"0.00%")),De===0?"0 users":t.a.createElement(Fn.a,{onClick:function(){F(h,!1)}},Object(ae.qb)(De,"user",void 0,!0,!0)))),t.a.createElement("tr",null,t.a.createElement("td",{className:"horizontal-header"},"No"),t.a.createElement("td",null,t.a.createElement("div",{className:"percentage"},t.a.createElement(ke.a,{title:"False positive (FP) - Percentage of users who did not ".concat(J," and completed the funnel.")},Ge?Object(ae.ob)(Ge/(ze+Ge)):"0.00%")),Object(ae.qb)(Ge,"user",void 0,!0,!0)),t.a.createElement("td",null,t.a.createElement("div",{className:"percentage"},t.a.createElement(ke.a,{title:"True negative (TN) - Percentage of users who did not ".concat(J," and did not complete the funnel.")},Ye?Object(ae.ob)(Ye/(De+Ye)):"0.00%")),Object(ae.qb)(Ye,"user",void 0,!0,!0))),t.a.createElement("tr",null,t.a.createElement("td",{className:"horizontal-header"}),t.a.createElement("td",null,t.a.createElement("b",null,"100%")),t.a.createElement("td",null,t.a.createElement("b",null,"100%"))))),t.a.createElement("div",{className:"mt text-center"},Object(ae.j)((h==null?void 0:h.result_type)||"")," ",t.a.createElement("b",null,k)," ","has a"," ",(h==null?void 0:h.correlation_type)===d.l.Success?t.a.createElement("b",{className:"text-success"},"positive"," ",t.a.createElement(ke.a,{title:"Positive correlation means this ".concat(D," is correlated with a successful conversion.")},t.a.createElement(gt.a,{className:"cursor-pointer"}))):t.a.createElement("b",{className:"text-danger"},"negative"," ",t.a.createElement(ke.a,{title:"Negative correlation means this ".concat(D," is correlated with an unsuccessful conversion (user dropped off).")},t.a.createElement(gt.a,{className:"cursor-pointer"})))," ","correlation score of"," ",t.a.createElement("b",{style:{color:et==="strong"?"var(--success)":et==="moderate"?"var(--warning)":"var(--danger)"}},t.a.createElement(ke.a,{title:"This ".concat(D," has ").concat(et," correlation.")},t.a.createElement("span",{style:{cursor:"pointer"}},Lt," ",He.toFixed(3)))))):t.a.createElement("div",null,t.a.createElement(Sa.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function jn(){var c=Object(l.useValues)(T.c),i=c.insightProps,u=Object(Q.a)(i),p=Object(l.useValues)(u),S=p.stepsWithCount,h=p.correlationValues,P=p.correlationTypes,L=p.eventHasPropertyCorrelations,_=p.eventWithPropertyCorrelationsValues,w=p.parseDisplayNameForCorrelation,F=p.correlationsLoading,D=p.eventWithPropertyCorrelationsLoading,J=p.nestedTableExpandedKeys,k=p.correlationPropKey,ee=p.filters,fe=p.aggregationTargetLabel,$=Object(l.useActions)(u),He=$.setCorrelationTypes,ze=$.loadEventWithPropertyCorrelations,Ge=$.addNestedTableExpandedKey,Ye=$.removeNestedTableExpandedKey,De=$.openCorrelationPersonsModal,et=$.loadCorrelations,Lt=Object(l.useActions)(s.f),At=Lt.reportCorrelationInteraction;Object(me.useEffect)(function(){et({})},[ee]);var Wt=function(be){P?P.includes(be)?He(P.filter(function(Je){return Je!==be})):He([].concat(Vt()(P),[be])):He([be])},Mn=function(be){var Je=function(da){return da<10&&!Number.isInteger(da)?da.toFixed(1):da.toFixed()},jt=be.correlation_type===d.l.Success,at=w(be),dn=at.first_value,ia=at.second_value;return t.a.createElement(t.a.Fragment,null,t.a.createElement("h4",null,jt?t.a.createElement(lt.a,{style:{color:"green"}}):t.a.createElement(qn,{style:{color:"red"}})," ",t.a.createElement(ln.a,{value:dn}),ia!==void 0&&t.a.createElement(t.a.Fragment,null," :: ",t.a.createElement(ln.a,{value:ia,disablePopover:!0}))),t.a.createElement("div",null,Object(ae.j)(fe.plural)," ",ee.aggregation_group_type_index!=null?"that":"who"," converted were"," ",t.a.createElement("mark",null,t.a.createElement("b",null,Je(be.odds_ratio),"x ",jt?"more":"less"," likely"))," ","to"," ",be.result_type===d.k.EventWithProperties?"have this event property":"do this event"),t.a.createElement(kn,null))},It=function(be){return t.a.createElement($t.c,{onClick:function(){De(be,!0)}},be.success_count)},Re=function(be){return t.a.createElement($t.c,{onClick:function(){De(be,!1)}},be.failure_count)},ht=function(be){return D?t.a.createElement("div",{className:"nested-properties-loading"},t.a.createElement(Tt.a,null),t.a.createElement("h3",null,"Loading correlation results"),t.a.createElement("p",null,"This process can take up to 20 seconds. ")):t.a.createElement("div",null,t.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),t.a.createElement(Dt.a,{dataSource:_[be],rowKey:function(jt){return jt.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(jt,at){return At(d.k.EventWithProperties,"pagination change",{page:jt,page_size:at})}}},t.a.createElement(Ce.a,{title:"Property",key:"eventName",render:function(jt,at){return Mn(at)},align:"left"}),t.a.createElement(Ce.a,{title:"Completed",key:"success_count",render:function(jt,at){return It(at)},width:90,align:"center"}),t.a.createElement(Ce.a,{title:"Dropped off",key:"failure_count",render:function(jt,at){return Re(at)},width:120,align:"center"}),t.a.createElement(Ce.a,{title:"",key:"actions",render:function(jt,at){return t.a.createElement(na,{record:at})},align:"center",width:30})))};return S.length>1?t.a.createElement(On,{id:k,offset:152},t.a.createElement("div",{className:"funnel-correlation-table"},t.a.createElement("span",{className:"funnel-correlation-header"},t.a.createElement("span",{className:"table-header"},t.a.createElement(sn.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),t.a.createElement("span",{className:"table-options"},t.a.createElement("p",{className:"title"},"CORRELATION"),t.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return Wt(d.l.Success)}},t.a.createElement(ct.a,{checked:P.includes(d.l.Success),style:{pointerEvents:"none"}},"Success")),t.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return Wt(d.l.Failure)}},t.a.createElement(ct.a,{checked:P.includes(d.l.Failure),style:{pointerEvents:"none"}},"Dropoff")))),t.a.createElement(Dt.a,{dataSource:h,loading:F,size:"small",scroll:{x:"max-content"},rowKey:function(be){return be.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return At(d.k.Events,"load more")}},expandable:{expandedRowRender:function(be){return ht(be.event.event)},expandedRowKeys:J,rowExpandable:function(){return ee.aggregation_group_type_index===void 0},expandIcon:function(be){var Je=be.expanded,jt=be.onExpand,at=be.record,dn=be.expandable;return dn?Je?t.a.createElement(ke.a,{title:"Collapse"},t.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(ca){Ye(at.event.event),jt(at,ca)}},t.a.createElement(sn.IconUnfoldLess,null))):t.a.createElement(ke.a,{title:"Expand to see correlated properties for this event"},t.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(ca){!L(at.event.event)&&ze(at.event.event),Ge(at.event.event),jt(at,ca)}},t.a.createElement(sn.IconUnfoldMore,null))):null}}},t.a.createElement(Ce.a,{title:"Event",key:"eventName",render:function(be,Je){return Mn(Je)},align:"left",ellipsis:!0}),t.a.createElement(Ce.a,{title:t.a.createElement("div",{className:"flex-center"},"Completed",t.a.createElement(ke.a,{title:"".concat(Object(ae.j)(fe.plural)," ").concat(ee.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},t.a.createElement(gt.a,{className:"column-info"}))),key:"success_count",render:function(be,Je){return It(Je)},width:90,align:"center"}),t.a.createElement(Ce.a,{title:t.a.createElement("div",{className:"flex-center"},"Dropped off",t.a.createElement(ke.a,{title:t.a.createElement(t.a.Fragment,null,Object(ae.j)(fe.plural)," ",ee.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",t.a.createElement("b",null,"not complete")," the entire funnel.")},t.a.createElement(gt.a,{className:"column-info"}))),key:"failure_count",render:function(be,Je){return Re(Je)},width:120,align:"center"}),t.a.createElement(Ce.a,{title:"",key:"actions",render:function(be,Je){return t.a.createElement(na,{record:Je})},width:30})))):null}var na=function(i){var u=i.record,p=Object(l.useValues)(T.c),S=p.insightProps,h=Object(Q.a)(S),P=Object(l.useActions)(h),L=P.excludeEventPropertyFromProject,_=P.excludeEventFromProject,w=P.setFunnelCorrelationDetails,F=Object(l.useValues)(h),D=F.isEventPropertyExcluded,J=F.isEventExcluded,k=u.event.event.split("::"),ee=Object(me.useState)(!1),fe=Mt()(ee,2),$=fe[0],He=fe[1];return t.a.createElement(xe.a,{style:{justifyContent:"flex-end"}},t.a.createElement(ea.a,{visible:$,actionable:!0,onClickOutside:function(){return He(!1)},overlay:t.a.createElement(t.a.Fragment,null,u.result_type===d.k.Events&&t.a.createElement(on.a,{onClick:function(){return w(u)},fullWidth:!0,type:"stealth"},"View correlation details"),t.a.createElement(on.a,{disabled:u.result_type===d.k.EventWithProperties?D(k[1]):J(k[0]),onClick:function(){return u.result_type===d.k.EventWithProperties?L(k[0],k[1]):_(k[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},t.a.createElement(on.a,{type:"stealth",onClick:function(){return He(!$)}},t.a.createElement(Bt.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},Pa=e("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function aa(){var c=Object(l.useValues)(T.c),i=c.insightProps,u=Object(Q.a)(i),p=Object(l.useValues)(u),S=p.stepsWithCount,h=p.propertyCorrelationValues,P=p.propertyCorrelationTypes,L=p.excludedPropertyNames,_=p.parseDisplayNameForCorrelation,w=p.propertyCorrelationsLoading,F=p.inversePropertyNames,D=p.propertyNames,J=p.correlationPropKey,k=p.allProperties,ee=p.filters,fe=p.aggregationTargetLabel,$=Object(l.useActions)(u),He=$.setPropertyCorrelationTypes,ze=$.setPropertyNames,Ge=$.openCorrelationPersonsModal,Ye=$.loadPropertyCorrelations,De=Object(l.useActions)(s.f),et=De.reportCorrelationInteraction;Object(me.useEffect)(function(){D.length===0&&ze(k),Ye({})},[ee]);var Lt=function(Re){P?P.includes(Re)?He(P.filter(function(ht){return ht!==Re})):He([].concat(Vt()(P),[Re])):He([Re])},At=function(Re){return t.a.createElement($t.c,{onClick:function(){Ge(Re,!0)}},Re.success_count)},Wt=function(Re){return t.a.createElement($t.c,{onClick:function(){Ge(Re,!1)}},Re.failure_count)},Mn=function(Re){var ht=function(dn){return dn<10&&!Number.isInteger(dn)?dn.toFixed(1):dn.toFixed()},dt=Re.correlation_type===d.l.Success,be=_(Re),Je=be.first_value,jt=be.second_value;return t.a.createElement(t.a.Fragment,null,t.a.createElement("h4",null,dt?t.a.createElement(lt.a,{style:{color:"green"}}):t.a.createElement(qn,{style:{color:"red"}})," ",t.a.createElement(ln.a,{value:Je}),jt!==void 0&&t.a.createElement(t.a.Fragment,null," :: ",t.a.createElement(ln.a,{value:jt,disablePopover:!0}))),t.a.createElement("div",null,Object(ae.j)(fe.plural)," ",ee.aggregation_group_type_index!=null?"that":"who"," converted were"," ",t.a.createElement("mark",null,t.a.createElement("b",null,ht(Re.odds_ratio),"x ",dt?"more":"less"," likely"))," ","to have this property value"))};return S.length>1?t.a.createElement(On,{offset:150,id:"".concat(J,"-properties")},t.a.createElement("div",{className:"funnel-correlation-table"},t.a.createElement(xe.a,{className:"funnel-correlation-header"},t.a.createElement(ge.a,{className:"table-header"},t.a.createElement(sn.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),t.a.createElement(ge.a,{className:"table-options"},t.a.createElement(xe.a,{style:{display:"contents"}},k.length>0&&t.a.createElement(t.a.Fragment,null,t.a.createElement("p",{className:"title"},"PROPERTIES "),t.a.createElement(Pa.a,{value:new Set(D),onChange:function(Re){return ze(Re)},allProperties:F(L||[])}))),t.a.createElement(xe.a,{style:{display:"contents"}},t.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),t.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return Lt(d.l.Success)}},t.a.createElement(ct.a,{checked:P.includes(d.l.Success),style:{pointerEvents:"none"}},"Success")),t.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return Lt(d.l.Failure)}},t.a.createElement(ct.a,{checked:P.includes(d.l.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),t.a.createElement(Dt.a,{dataSource:h,loading:w,scroll:{x:"max-content"},size:"small",rowKey:function(Re){return Re.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(Re,ht){return et(d.k.Properties,"pagination change",{page:Re,page_size:ht})}}},t.a.createElement(Ce.a,{title:"".concat(Object(ae.j)(fe.singular)," property"),key:"propertName",render:function(Re,ht){return Mn(ht)},align:"left"}),t.a.createElement(Ce.a,{title:t.a.createElement("div",{className:"flex-center"},"Completed",t.a.createElement(ke.a,{title:"".concat(Object(ae.j)(fe.plural)," ").concat(ee.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},t.a.createElement(gt.a,{className:"column-info"}))),key:"success_count",render:function(Re,ht){return At(ht)},width:90,align:"center"}),t.a.createElement(Ce.a,{title:t.a.createElement("div",{className:"flex-center"},"Dropped off",t.a.createElement(ke.a,{title:t.a.createElement(t.a.Fragment,null,Object(ae.j)(fe.plural)," ",ee.aggregation_group_type_index!=null?"that":"who"," have this property and did ",t.a.createElement("b",null,"not complete")," the entire funnel.")},t.a.createElement(gt.a,{className:"column-info"}))),key:"failure_count",render:function(Re,ht){return Wt(ht)},width:120,align:"center"}),t.a.createElement(Ce.a,{title:"",key:"actions",render:function(Re,ht){return t.a.createElement(Wn,{record:ht})},align:"center",width:30})))):null}var Wn=function(i){var u=i.record,p=Object(l.useValues)(T.c),S=p.insightProps,h=Object(Q.a)(S),P=Object(l.useActions)(h),L=P.excludePropertyFromProject,_=P.setFunnelCorrelationDetails,w=Object(l.useValues)(h),F=w.isPropertyExcludedFromProject,D=(u.event.event||"").split("::")[0],J=Object(me.useState)(!1),k=Mt()(J,2),ee=k[0],fe=k[1];return t.a.createElement(xe.a,{style:{justifyContent:"flex-end"}},t.a.createElement(ea.a,{visible:ee,actionable:!0,onClickOutside:function(){return fe(!1)},overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(on.a,{onClick:function(){return _(u)},fullWidth:!0,type:"stealth"},"View correlation details"),t.a.createElement(on.a,{disabled:F(D),onClick:function(){return L(D)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},t.a.createElement(on.a,{type:"stealth",onClick:function(){return fe(!ee)}},t.a.createElement(Bt.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},ra=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),sa=e("./frontend/src/lib/components/PayCard/PayCard.tsx"),zn=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),Ta=function(){var i,u=Object(l.useValues)(T.c),p=u.insightProps,S=Object(l.useValues)(Object(Q.a)(p)),h=S.isSkewed,P=S.stepsWithCount,L=S.correlationFeedbackHidden,_=S.correlationDetailedFeedbackVisible,w=S.correlationFeedbackRating,F=S.correlationAnalysisAvailable,D=S.aggregationTargetLabel,J=Object(l.useActions)(Object(Q.a)(p)),k=J.sendCorrelationAnalysisFeedback,ee=J.hideSkewWarning,fe=J.hideCorrelationAnalysisFeedback,$=J.setCorrelationFeedbackRating,He=J.setCorrelationDetailedFeedback,ze=Object(l.useValues)(zn.a),Ge=ze.preflight,Ye=Object(me.useRef)(null);return P.length<=1?null:!F&&!(!(Ge==null||(i=Ge.instance_preferences)===null||i===void 0)&&i.disable_paid_fs)?t.a.createElement(sa.a,{identifier:d.c.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(D.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(D.plural," are converting or dropping off.")}):t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"funnel-correlation"},h&&t.a.createElement(Me.a,{className:"skew-warning"},t.a.createElement("h4",null,t.a.createElement(sn.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",t.a.createElement(ra.a,{className:"close-button",onClick:ee})),t.a.createElement("div",null,t.a.createElement("b",null,"Tips for adjusting your funnel:"),t.a.createElement("ol",null,t.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),t.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),t.a.createElement(jn,null),!L&&t.a.createElement(Me.a,{className:"correlation-feedback"},t.a.createElement(xe.a,{className:"row-initial"},t.a.createElement(ge.a,{span:14},t.a.createElement("h4",null,t.a.createElement(Te.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),t.a.createElement(ge.a,{span:9,style:{alignContent:"right"}},!!w&&t.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(De,et){return t.a.createElement(bt.a,{key:et,className:"emoji-button",style:w===De[0]?{background:"#5375FF"}:w?{display:"none"}:{},onClick:function(){w===De[0]?$(0):($(De[0]),setTimeout(function(){var At;return(At=Ye.current)===null||At===void 0?void 0:At.focus()},100))}},De[1])})),t.a.createElement(ge.a,{span:1},t.a.createElement(ra.a,{className:"close-button",onClick:fe}))),t.a.createElement("div",{style:{display:_?void 0:"none"}},t.a.createElement("form",{onSubmit:k},t.a.createElement(B.a,{onBlur:function(et){return He(et.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:Ye,onKeyDown:function(et){if(et.key==="Enter"&&et.metaKey){var Lt;(Lt=Ye.current)===null||Lt===void 0||Lt.blur(),k()}}}),t.a.createElement("div",{className:"text-right"},t.a.createElement(bt.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),t.a.createElement(aa,null)))},la=e("./node_modules/core-js/modules/es.regexp.to-string.js"),Ia=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),Yn=e.n(Ia),Cn={};Cn.insert="head",Cn.singleton=!1;var Na=nn()(Yn.a,Cn),Fa=Yn.a.locals||{},cn=e("./frontend/src/lib/components/InsightLabel/index.tsx"),Dn=e("./frontend/src/lib/colors.ts"),Da=e("./frontend/src/lib/components/PHCheckbox.tsx");function Ma(){var c=Object(l.useValues)(T.c),i=c.filters,u=c.activeView,p=Object(l.useActions)(T.c),S=p.toggleInsightLegend,h=Object(l.useValues)(Pn.a),P=h.featureFlags;return(u===d.s.TRENDS||u===d.s.STICKINESS)&&P[ie.o.INSIGHT_LEGENDS]?t.a.createElement(bt.a,{className:"insight-legend-button",onClick:S},t.a.createElement(sn.IconLegend,null),t.a.createElement("span",{className:"insight-legend-button-title"},i.show_legend?"Hide":"Show"," legend")):null}function oa(){var c=Object(l.useValues)(T.c),i=c.insightProps,u=c.filters,p=Object(rn.a)(i),S=Object(l.useValues)(p),h=S.indexedResults,P=S.hiddenLegendKeys,L=Object(l.useActions)(p),_=L.toggleVisibility,w=Object(Dn.c)("white",h.length,!!u.compare);return t.a.createElement("div",{className:"insight-legend-menu"},t.a.createElement("div",{className:"insight-legend-menu-scroll"},h&&h.map(function(F){var D,J;return t.a.createElement(xe.a,{key:F.id,className:"insight-legend-menu-item",wrap:!1},t.a.createElement("div",{className:"insight-legend-menu-item-inner",onClick:function(){return _(F.id)}},t.a.createElement(ge.a,null,t.a.createElement(Da.a,{color:w[F.id],checked:!P[F.id],onChange:function(){}})),t.a.createElement(ge.a,null,t.a.createElement(cn.b,{key:F.id,seriesColor:w[F.id],action:F.action,fallbackName:F.breakdown_value===""?"None":F.label,hasMultipleSeries:h.length>1,breakdownValue:F.breakdown_value===""?"None":(D=F.breakdown_value)===null||D===void 0?void 0:D.toString(),compareValue:u.compare?Object(a.d)(F):void 0,pillMidEllipsis:(F==null||(J=F.filter)===null||J===void 0?void 0:J.breakdown)==="$current_url",hideIcon:!0}))))})))}var Ht,W=(Ht={},q()(Ht,"".concat(d.s.TRENDS),t.a.createElement(f,{view:d.s.TRENDS})),q()(Ht,"".concat(d.s.STICKINESS),t.a.createElement(f,{view:d.s.STICKINESS})),q()(Ht,"".concat(d.s.LIFECYCLE),t.a.createElement(f,{view:d.s.LIFECYCLE})),q()(Ht,"".concat(d.s.FUNNELS),t.a.createElement(b,null)),q()(Ht,"".concat(d.s.RETENTION),t.a.createElement(m.a,null)),q()(Ht,"".concat(d.s.PATHS),t.a.createElement(N.a,null)),Ht);function U(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1},i=c.disableHeader,u=c.disableTable,p=Object(l.useValues)(Pn.a),S=p.featureFlags,h=Object(l.useValues)(o.a),P=h.insightMode,L=Object(l.useValues)(T.c),_=L.insightProps,w=L.canEditInsight,F=L.insightLoading,D=L.activeView,J=L.loadedView,k=L.filters,ee=L.showTimeoutMessage,fe=L.showErrorMessage,$=Object(l.useValues)(Object(Q.a)(_)),He=$.areFiltersValid,ze=$.isValidFunnel,Ge=$.areExclusionFiltersValid,Ye=$.correlationAnalysisAvailable,De=function(){if(D!==J||F&&!ee)return t.a.createElement(t.a.Fragment,null,k.display!==ie.f&&t.a.createElement("div",{className:"trends-insights-container"}),t.a.createElement(ae.b,null));if(J===d.s.FUNNELS){if(!He)return t.a.createElement(G.b,{actionable:P===d.t.Edit||u});if(!Ge)return t.a.createElement(G.a,null);if(!ze&&!F)return t.a.createElement(G.c,null)}return fe?t.a.createElement(G.d,null):ee?t.a.createElement(G.e,{isLoading:F}):null}();function et(){return D===d.s.FUNNELS&&!fe&&!ee&&He&&k.funnel_viz_type===d.o.Steps&&(k==null?void 0:k.layout)===ie.q.horizontal&&!u?t.a.createElement(v.a,null):(!k.display||(k==null?void 0:k.display)!==ie.f&&(k==null?void 0:k.display)!==ie.b)&&D===d.s.TRENDS&&!u?t.a.createElement(l.BindLogic,{logic:rn.a,props:_},t.a.createElement(a.b,{isLegend:!0,showTotalCount:!0,filterKey:D===d.s.TRENDS?"trends_".concat(D):"",canEditSeriesNameInline:D===d.s.TRENDS&&P===d.t.Edit,canCheckUncheckSeries:!w})):null}return t.a.createElement(t.a.Fragment,null,t.a.createElement(Me.a,{title:i?null:t.a.createElement(gn,{activeView:D,insightMode:P,filters:k,disableTable:!!u,disabled:!w}),"data-attr":"insights-graph",className:"insights-graph-container"},t.a.createElement("div",null,t.a.createElement(xe.a,{className:Object(Jt.a)("insights-graph-header",{funnels:D===d.s.FUNNELS}),align:"middle",justify:"space-between"},t.a.createElement(ge.a,null,t.a.createElement(Qn,null)),t.a.createElement(ge.a,null,D===d.s.FUNNELS?t.a.createElement(hn,null):null,D===d.s.PATHS?t.a.createElement(pe,null):null,t.a.createElement(Ma,null))),De||(S[ie.o.INSIGHT_LEGENDS]&&(D===d.s.TRENDS||D===d.s.STICKINESS)&&k.show_legend?t.a.createElement(xe.a,{className:"insights-graph-container-row",wrap:!1},t.a.createElement(ge.a,{className:"insights-graph-container-row-left"},W[D]),t.a.createElement(ge.a,{className:"insights-graph-container-row-right"},t.a.createElement(oa,null))):W[D]))),et(),!u&&Ye&&D===d.s.FUNNELS&&t.a.createElement(Ta,null))}try{U.displayName="InsightContainer",U.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:U.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(c){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(ce,M,e){"use strict";e.d(M,"a",function(){return _e});var Z=e("./node_modules/core-js/modules/es.array.iterator.js"),q=e.n(Z),Me=e("./node_modules/core-js/modules/es.object.to-string.js"),xe=e.n(Me),ge=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Xe=e.n(ge),Qe=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),me=e.n(Qe),t=e("./node_modules/kea/lib/index.esm.js"),l=e("./frontend/src/scenes/insights/insightLogic.ts"),Be=e("./frontend/src/scenes/insights/sharedUtils.ts");function de(H,R){var I=Object.keys(H);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(H);R&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(H,E).enumerable})),I.push.apply(I,y)}return I}function x(H){for(var R=1;R<arguments.length;R++){var I=arguments[R]!=null?arguments[R]:{};R%2?de(Object(I),!0).forEach(function(y){me()(H,y,I[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(I)):de(Object(I)).forEach(function(y){Object.defineProperty(H,y,Object.getOwnPropertyDescriptor(I,y))})}return H}var _e=Object(t.kea)({props:{},key:Object(Be.c)("new"),path:function(R){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",R]},connect:function(R){return{actions:[Object(l.c)(R),["setFilters"]],values:[Object(l.c)(R),["filters"]]}},actions:function(){return{setDates:function(I,y){return{dateFrom:I,dateTo:y}}}},selectors:{dates:[function(H){return[H.filters]},function(H){return{dateFrom:(H==null?void 0:H.date_from)||null,dateTo:(H==null?void 0:H.date_to)||null}}]},listeners:function(R){var I=R.actions,y=R.values;return{setDates:function(te){var Ve=te.dateFrom,Pe=te.dateTo;I.setFilters(x(x({},y.filters),{},{date_from:Ve||null,date_to:Pe||null}))}}}})},"./frontend/src/scenes/trends/PersonsModal.tsx":function(ce,M,e){"use strict";e.d(M,"a",function(){return wt});var Z=e("./node_modules/core-js/modules/es.array.concat.js"),q=e("./node_modules/core-js/modules/es.array.find.js"),Me=e("./node_modules/core-js/modules/es.array.map.js"),xe=e("./node_modules/core-js/modules/es.object.keys.js"),ge=e("./node_modules/core-js/modules/es.object.to-string.js"),Xe=e("./node_modules/core-js/modules/es.regexp.exec.js"),Qe=e("./node_modules/core-js/modules/es.regexp.to-string.js"),me=e("./node_modules/core-js/modules/es.string.replace.js"),t=e("./node_modules/react/index.js"),l=e.n(t),Be=e("./node_modules/kea/lib/index.esm.js"),de=e("./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js"),x=e("./node_modules/@ant-design/icons/es/icons/UsergroupAddOutlined.js"),_e=e("./node_modules/antd/es/modal/index.js"),H=e("./node_modules/antd/es/button/index.js"),R=e("./node_modules/antd/es/skeleton/index.js"),I=e("./node_modules/antd/es/input/index.js"),y=e("./node_modules/antd/es/select/index.js"),E=e("./frontend/src/types.ts"),te=e("./frontend/src/scenes/trends/personsModalLogic.ts"),Ve=e("./frontend/src/lib/components/CopyToClipboard.tsx"),Pe=e("./frontend/src/lib/utils.tsx"),Se=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=e.n(Se),z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss"),ne=e.n(z),oe={};oe.insert="head",oe.singleton=!1;var ut=A()(ne.a,oe),Oe=ne.a.locals||{},Ke=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),d=e("./frontend/src/lib/components/PropertiesTable.tsx"),ae=e("./frontend/src/lib/components/DateDisplay/index.tsx"),T=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Ie=e("./frontend/src/lib/api.ts"),n=e("./frontend/src/lib/components/LemonTable/index.ts"),Ne=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),Ue=e("./frontend/src/lib/components/icons.tsx"),Ze=e("./frontend/src/lib/components/InsightLabel/index.tsx"),O=e("./frontend/src/lib/colors.ts"),Ct=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Mt=e("./frontend/src/lib/constants.tsx"),un=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),mn=e("./frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.tsx");function wt(rt){var mt,Gt,St,se,re,he,Le=rt.visible,tt=rt.view,Ee=rt.filters,pt=rt.onSaveCohort,ie=rt.showModalActions,X=ie===void 0?!0:ie,$e=rt.aggregationTargetLabel,it=Object(Be.useValues)(te.b),j=it.people,Pt=it.loadingMorePeople,ft=it.firstLoadedPeople,st=it.searchTerm,ve=it.isInitialLoad,le=it.peopleParams,vt=it.actorLabel,ke=it.sessionRecordingId,qe=Object(Be.useActions)(te.b),Nt=qe.hidePeople,Ae=qe.loadMorePeople,Q=qe.setFirstLoadedActors,je=qe.setPersonsModalFilters,Et=qe.setSearchTerm,Ft=qe.switchToDataPoint,Rt=qe.openRecordingModal,zt=qe.closeRecordingModal,en=Object(Be.useValues)(Ct.a),pn=en.featureFlags,Kt=Object(t.useMemo)(function(){var We,ye,we;return ve?"Loading ".concat($e.plural,"\u2026"):Ee.shown_as==="Stickiness"?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke.a,{value:(j==null?void 0:j.label)||"",disablePopover:!0})," stickiness on day ",j==null?void 0:j.day):Ee.display==="ActionsBarValue"||Ee.display==="ActionsPie"?l.a.createElement(Ke.a,{value:(j==null?void 0:j.label)||"",disablePopover:!0}):Ee.insight===E.s.FUNNELS?l.a.createElement(l.a.Fragment,null,((We=j==null?void 0:j.funnelStep)!==null&&We!==void 0?We:0)>=0?"Completed":"Dropped off at"," step"," ",Math.abs((ye=j==null?void 0:j.funnelStep)!==null&&ye!==void 0?ye:0)," \u2022 ",l.a.createElement(Ke.a,{value:(j==null?void 0:j.label)||"",disablePopover:!0})," ",j!=null&&j.breakdown_value?"\u2022 ".concat(j.breakdown_value):""):Ee.insight===E.s.PATHS?l.a.createElement(l.a.Fragment,null,j!=null&&j.pathsDropoff?"Dropped off after":"Completed"," step"," ",l.a.createElement(Ke.a,{value:(j==null?void 0:j.label.replace(/(^[0-9]+_)/,""))||"",disablePopover:!0})):l.a.createElement(l.a.Fragment,null,Object(Pe.j)(vt)," list on"," ",l.a.createElement(ae.a,{interval:Ee.interval||"day",date:(j==null||(we=j.day)===null||we===void 0?void 0:we.toString())||""}))},[Ee,j,ve]),Ln=pn[Mt.o.NEW_INSIGHT_COHORTS],_t=!1,tn=(tt===E.s.TRENDS||tt===E.s.STICKINESS||!!Ln&&(tt===E.s.FUNNELS||tt===E.s.PATHS))&&X,V=Object(O.c)("white",j==null||(mt=j.crossDataset)===null||mt===void 0?void 0:mt.length),Yt=!!(!(j==null||(Gt=j.crossDataset)===null||Gt===void 0)&&Gt.find(function(We){var ye=We.action;return(ye==null?void 0:ye.math)&&ye.math!=="total"})),gt=!!(!(j==null||(St=j.crossDataset)===null||St===void 0)&&St.find(function(We){var ye=We.action;return ye==null?void 0:ye.order}));return l.a.createElement(l.a.Fragment,null,!!ke&&l.a.createElement(un.a,{onClose:zt}),l.a.createElement(_e.a,{title:Kt,visible:Le,onCancel:Nt,footer:j&&j.count>0&&(_t||tn)&&l.a.createElement(l.a.Fragment,null,_t&&l.a.createElement(H.a,{icon:l.a.createElement(de.a,null),href:Ie.b.actions.determinePeopleCsvUrl({label:j.label,action:j.action,date_from:j.day,date_to:j.day,breakdown_value:j.breakdown_value},Ee),style:{marginRight:8},"data-attr":"person-modal-download-csv"},"Download CSV"),tn&&l.a.createElement(H.a,{onClick:pt,icon:l.a.createElement(x.a,null),"data-attr":"person-modal-save-as-cohort"},"Save as cohort")),width:600,className:"person-modal"},ve?l.a.createElement("div",{style:{padding:16}},l.a.createElement(R.a,{active:!0})):j&&l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for persons by email, name, or ID",onChange:function(ye){Et(ye.target.value),ye.target.value||Q(ft)},value:st,onSearch:function(ye){return ye?je(ye,j,Ee):Q(ft)}}),pn[Mt.o.MULTI_POINT_PERSON_MODAL]&&!!(!((se=j.crossDataset)===null||se===void 0)&&se.length)&&j.seriesId!==void 0&&l.a.createElement("div",{className:"data-point-selector"},l.a.createElement(y.a,{value:j.seriesId,onChange:function(ye){return Ft(ye)}},j.crossDataset.map(function(We){var ye,we;return l.a.createElement(y.a.Option,{value:We.id,key:"".concat((ye=We.action)===null||ye===void 0?void 0:ye.id).concat(We.breakdown_value)},l.a.createElement(Ze.b,{seriesColor:V[We.id],action:We.action,breakdownValue:We.breakdown_value===""?"None":(we=We.breakdown_value)===null||we===void 0?void 0:we.toString(),showCountedByTag:Yt,hasMultipleSeries:gt}))}))),l.a.createElement("div",{className:"user-count-subheader"},l.a.createElement(Ue.IconPersonFilled,{style:{fontSize:"1.125rem",marginRight:"0.5rem"}}),l.a.createElement("span",null,"This list contains"," ",l.a.createElement("b",null,j.count," unique ",$e.plural),(le==null?void 0:le.pointValue)!==void 0&&(!(!((re=le.action)===null||re===void 0)&&re.math)||((he=le.action)===null||he===void 0?void 0:he.math)==="total")&&l.a.createElement(l.a.Fragment,null," ","who performed the event"," ",l.a.createElement("b",null,le.pointValue," total"," ",Object(Pe.qb)(le.pointValue,"time",void 0,!1))),".")),j.count>0?l.a.createElement(n.a,{columns:[{title:"Person",key:"person",render:function(ye,we){return l.a.createElement(ot,{actor:we})}},{width:0,title:"Recordings",key:"recordings",render:function(ye,we){var Vt,fn;if(((Vt=we.matched_recordings)===null||Vt===void 0?void 0:Vt.length)&&((fn=we.matched_recordings)===null||fn===void 0?void 0:fn.length)>0)return l.a.createElement(mn.a,{sessionRecordings:we.matched_recordings,onOpenRecording:function(vn){Rt(vn.session_id)}})}}],className:"persons-table",rowKey:"id",expandable:{expandedRowRender:function(ye){var we=ye.properties;return Object.keys(we).length?l.a.createElement(d.a,{properties:we}):"This person has no properties."}},embedded:!0,showHeader:!1,dataSource:j.people,nouns:["person","persons"]}):l.a.createElement("div",{className:"person-row-container person-row"},"We couldn't find any matching ",$e.plural," for this data point."),(j==null?void 0:j.next)&&l.a.createElement("div",{style:{margin:"1rem",textAlign:"center"}},l.a.createElement(H.a,{type:"primary",style:{color:"white"},onClick:Ae,loading:Pt},"Load more ",$e.plural)))))}function ot(rt){var mt=rt.actor;return Object(Pe.W)(mt)?l.a.createElement("div",{key:mt.id,className:"person-row"},l.a.createElement("div",{className:"person-ids"},l.a.createElement("strong",null,l.a.createElement(Ne.a,{actor:mt})))):l.a.createElement("div",{key:mt.id,className:"person-ids"},l.a.createElement("strong",null,l.a.createElement(T.a,{person:mt,withIcon:!1})),l.a.createElement(Ve.a,{explicitValue:mt.distinct_ids[0],iconStyle:{color:"var(--primary)"},iconPosition:"end",className:"text-small text-muted-alt"},Object(Pe.kb)(mt.distinct_ids[0],32)))}try{wt.displayName="PersonsModal",wt.__docgenInfo={description:"",displayName:"PersonsModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},onSaveCohort:{defaultValue:null,description:"",name:"onSaveCohort",required:!0,type:{name:"() => void"}},showModalActions:{defaultValue:{value:"true"},description:"",name:"showModalActions",required:!1,type:{name:"boolean"}},aggregationTargetLabel:{defaultValue:null,description:"",name:"aggregationTargetLabel",required:!0,type:{name:"{ singular: string; plural: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"]={docgenInfo:wt.__docgenInfo,name:"PersonsModal",path:"frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"})}catch(rt){}try{ot.displayName="ActorRow",ot.__docgenInfo={description:"",displayName:"ActorRow",props:{actor:{defaultValue:null,description:"",name:"actor",required:!0,type:{name:"ActorType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"]={docgenInfo:ot.__docgenInfo,name:"ActorRow",path:"frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"})}catch(rt){}},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(ce,M,e){"use strict";e.d(M,"a",function(){return Qe});var Z=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),q=e.n(Z),Me=e("./node_modules/react/index.js"),xe=e.n(Me),ge=e("./node_modules/antd/es/modal/index.js"),Xe=e("./node_modules/antd/es/input/index.js");function Qe(me){var t=me.onOk,l=me.onCancel,Be=me.visible,de=Object(Me.useState)(""),x=q()(de,2),_e=x[0],H=x[1];return xe.a.createElement(ge.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){t(_e),H("")},onCancel:l,visible:Be},xe.a.createElement("div",{className:"mb"},xe.a.createElement(Xe.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:_e,"data-attr":"cohort-name",onChange:function(I){return H(I.target.value)}})))}try{Qe.displayName="SaveCohortModal",Qe.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:Qe.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(me){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(ce,M,e){"use strict";var Z=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),q=e("./node_modules/react/index.js"),Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},xe=Me,ge=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Xe=function(t,l){return q.createElement(ge.a,Object(Z.a)(Object(Z.a)({},t),{},{ref:l,icon:xe}))};Xe.displayName="BarChartOutlined";var Qe=M.a=q.forwardRef(Xe)},"./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js":function(ce,M,e){"use strict";var Z=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),q=e("./node_modules/react/index.js"),Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},xe=Me,ge=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Xe=function(t,l){return q.createElement(ge.a,Object(Z.a)(Object(Z.a)({},t),{},{ref:l,icon:xe}))};Xe.displayName="DownloadOutlined";var Qe=M.a=q.forwardRef(Xe)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(ce,M,e){"use strict";var Z=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),q=e("./node_modules/react/index.js"),Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},xe=Me,ge=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Xe=function(t,l){return q.createElement(ge.a,Object(Z.a)(Object(Z.a)({},t),{},{ref:l,icon:xe}))};Xe.displayName="OrderedListOutlined";var Qe=M.a=q.forwardRef(Xe)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(ce,M,e){"use strict";var Z=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),q=e("./node_modules/react/index.js"),Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},xe=Me,ge=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Xe=function(t,l){return q.createElement(ge.a,Object(Z.a)(Object(Z.a)({},t),{},{ref:l,icon:xe}))};Xe.displayName="PercentageOutlined";var Qe=M.a=q.forwardRef(Xe)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{padding:1rem!important;box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item:not(:last-child){margin-bottom:.5rem}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{margin-left:.5rem;width:100%;font-size:.75rem}",""]),ce.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.properties-table-key{min-width:12rem;display:flex;align-items:center;justify-content:space-between}.property-value-type{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;text-transform:uppercase;cursor:default}.property-value-type:not(:first-child){margin-left:.25rem}.properties-table-value{min-width:12rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;display:flex;align-items:center}.properties-table-value .value-link>*{vertical-align:middle}.properties-table-value .value-link>svg{margin-left:.25rem;font-size:1rem}.properties-table-value .editable{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;-webkit-text-decoration-color:#5375ff;text-decoration-color:#5375ff;cursor:pointer}",""]),ce.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,'.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.experiment-form .metrics-selection{border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;width:100%}.experiment-form .metrics-selection .action-filters-bordered .draggable-action-filter{border-bottom:1px solid rgba(0,0,0,.15);padding:1rem .25rem;margin-top:0}.experiment-form .metrics-selection .action-filters-bordered .row-action-btn{color:#35416b}.experiment-form .person-selection{width:100%;border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid rgba(0,0,0,.15);min-height:unset;background-color:#fff;padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(calc(90vh - 16rem),36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .graph-container{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{flex-direction:row;align-items:baseline;padding:12px 8px;background:#fff;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);border-left:1px solid rgba(0,0,0,.15);border-right:1px solid rgba(0,0,0,.15)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:#bf411a}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.15);margin-bottom:1rem}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.view-experiment .stop-experiment{background-color:#f96132;color:#fff}.view-experiment .archive-experiment{color:#f96132}.view-experiment .exp-description{font-style:italic;color:rgba(0,0,0,.5)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list{list-style:none;margin:0;padding:0}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:#fafaf9;border:1px solid rgba(0,0,0,.15);width:100%;min-height:320px;font-size:24px}.view-experiment .end-experiment-btn{background:#77b96c;color:#fff}.view-experiment .end-experiment-btn:hover{color:#000}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:#fafaf9;color:#35416b;font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid rgba(0,0,0,.15);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:#d9d9d9}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid rgba(0,0,0,.15)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),ce.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),ce.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),ce.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),ce.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),ce.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss":function(ce,M,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");M=Z(!1),M.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.person-modal .ant-modal-header{padding:1rem}.person-modal .ant-modal-title{overflow:hidden;text-overflow:ellipsis}.person-modal .ant-modal-content{overflow:hidden}.person-modal .ant-modal-body{padding:0;max-height:60vh;overflow-y:auto}.person-modal .ant-modal-footer .ant-btn{color:#5375ff}.person-modal .ant-input-search{padding:1rem}.person-modal .persons-table{border-top:1px solid var(--border);border-bottom:1px solid var(--border)}.person-modal .person-ids{display:flex;flex-direction:column}.person-modal .user-count-subheader{padding:.5rem 1rem;color:var(--muted-alt)}.person-modal .user-count-subheader>*{vertical-align:middle}.person-modal .person-row-container{padding:.5rem 1rem}.person-modal .data-point-selector{padding:.5rem 1rem;border-bottom:1px solid var(--border)}.person-modal .data-point-selector .ant-select{display:block;width:100%}",""]),ce.exports=M}}]);
