(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/scenes/groups/groupsListLogic.ts":function(D,d,e){"use strict";e.d(d,"a",function(){return H});var t=e("./node_modules/core-js/modules/es.array.concat.js"),s=e.n(t),i=e("./node_modules/core-js/modules/es.array.iterator.js"),l=e.n(i),A=e("./node_modules/core-js/modules/es.object.to-string.js"),$=e.n(A),W=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),L=e.n(W),j=e("./node_modules/@babel/runtime/regenerator/index.js"),N=e.n(j),M=e("./node_modules/regenerator-runtime/runtime.js"),V=e.n(M),G=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),u=e.n(G),O=e("./node_modules/kea/lib/index.esm.js"),S=e("./frontend/src/lib/api.ts"),C=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),T=e("./frontend/src/lib/utils.tsx"),m=e("./frontend/src/scenes/teamLogic.ts"),R=e("./frontend/src/scenes/urls.ts"),J=e("./frontend/src/models/groupsModel.ts"),H=Object(O.kea)({path:["groups","groupsListLogic"],connect:{values:[m.a,["currentTeamId"],J.a,["groupTypes","aggregationLabel"],C.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(n){return{url:n}},setTab:function(n){return{tab:n}}}},loaders:function(r){var n=r.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var c=u()(N.a.mark(function B(K){var I;return N.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(I=K.url,!n.groupsEnabled){y.next=6;break}return I=I||"api/projects/".concat(n.currentTeamId,"/groups/?group_type_index=").concat(n.currentTab),y.next=5,S.a.get(I);case 5:return y.abrupt("return",y.sent);case 6:case"end":return y.stop()}},B)}));function b(B){return c.apply(this,arguments)}return b}()}]}},reducers:{currentTab:["-1",{setTab:function(r,n){var c=n.tab;return c}}]},selectors:{currentTabName:[function(o){return[o.currentTab,o.groupTypes,o.aggregationLabel]},function(o,r,n){return o==="-1"?"Persons":r!=null&&r.length?Object(T.j)(n(parseInt(o)).singular):""}],breadcrumbs:[function(o){return[o.currentTabName,o.currentTab]},function(o,r){return[{name:o,path:R.a.groups(r)}]}]},actionToUrl:function(){return{setTab:function(n){var c=n.tab;return c!=="-1"?R.a.groups(c):R.a.persons()}}},urlToAction:function(r){var n=r.actions,c=r.values;return{"/groups/:id":function(B){var K=B.id;K&&(n.setTab(K),n.loadGroups())},"/persons":function(){c.currentTab!=="-1"&&n.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(D,d,e){"use strict";e.d(d,"a",function(){return u});var t=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/lib/components/PageHeader.tsx"),i=e("./node_modules/react/index.js"),l=e.n(i),A=e("./node_modules/core-js/modules/es.array.includes.js"),$=e("./node_modules/core-js/modules/es.array.map.js"),W=e("./node_modules/core-js/modules/es.string.includes.js"),L=e("./node_modules/antd/es/tabs/index.js"),j=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),N=e("./frontend/src/lib/utils.tsx"),M=e("./frontend/src/models/groupsModel.ts"),V=e("./frontend/src/scenes/groups/groupsListLogic.ts");function G(){var O=Object(t.useActions)(V.a),S=O.setTab,C=Object(t.useValues)(V.a),T=C.currentTab,m=Object(t.useValues)(M.a),R=m.groupTypes,J=m.aggregationLabel,H=Object(t.useValues)(j.b),o=H.groupsAccessStatus,r=[j.a.HasAccess,j.a.HasGroupTypes,j.a.NoAccess].includes(o);return l.a.createElement(L.a,{activeKey:T,onChange:function(c){return S(c)}},l.a.createElement(L.a.TabPane,{tab:"Persons",key:"-1"}),r?l.a.createElement(L.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):R.map(function(n){return l.a.createElement(L.a.TabPane,{tab:Object(N.j)(J(n.group_type_index).plural),key:n.group_type_index})}))}function u(O){var S=O.hideGroupTabs,C=Object(t.useValues)(M.a),T=C.showGroupsOptions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{title:"Persons".concat(T?" & Groups":""),caption:"A catalog of your product's end users".concat(T?" and groups":"",".")}),!S&&T&&l.a.createElement(G,null))}try{u.displayName="PersonPageHeader",u.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:u.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(O){}},"./frontend/src/scenes/persons/Persons.scss":function(D,d,e){"use strict";var t=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(t),i=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),l=e.n(i),A={};A.insert="head",A.singleton=!1;var $=s()(l.a,A),W=l.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(D,d,e){"use strict";e.r(d),e.d(d,"scene",function(){return y}),e.d(d,"Persons",function(){return Y});var t=e("./node_modules/react/index.js"),s=e.n(t),i=e("./node_modules/kea/lib/index.esm.js"),l=e("./node_modules/core-js/modules/es.array.concat.js"),A=e("./node_modules/core-js/modules/es.object.keys.js"),$=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),W=e.n($),L=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),j=e("./frontend/src/lib/components/PropertiesTable.tsx"),N=e("./frontend/src/scenes/persons/Persons.scss"),M=e("./frontend/src/lib/components/CopyToClipboard.tsx"),V=e("./frontend/src/scenes/persons/PersonHeader.tsx"),G=e("./frontend/src/lib/components/LemonTable/index.ts");function u(a){var v=a.people,h=a.loading,U=h===void 0?!1:h,x=a.hasPrevious,F=a.hasNext,P=a.loadPrevious,p=a.loadNext,E=a.compact,z=[{title:"Person",key:"person",render:function(f,g){return s.a.createElement(V.a,{withIcon:!0,person:g})}},{title:"ID",key:"id",render:function(f,g){return s.a.createElement("div",{style:{overflow:"hidden"}},g.distinct_ids.length&&s.a.createElement(M.a,{explicitValue:g.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},g.distinct_ids[0]))}}].concat(W()(E?[]:[{title:"First seen",dataIndex:"created_at",render:function(f){return f?s.a.createElement(L.b,{time:f}):s.a.createElement(s.a.Fragment,null)}}]));return s.a.createElement(G.a,{columns:z,loading:U,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:F?function(){p==null||p(),window.scrollTo(0,0)}:void 0,onBackward:x?function(){P==null||P(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(f){var g=f.properties;return Object.keys(g).length?s.a.createElement(j.a,{properties:g}):"This person has no properties."}},dataSource:v,emptyState:"No persons",nouns:["person","persons"]})}try{u.displayName="PersonsTable",u.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:u.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(a){}var O=e("./node_modules/antd/es/row/index.js"),S=e("./node_modules/antd/es/popconfirm/index.js"),C=e("./node_modules/antd/es/button/index.js"),T=e("./node_modules/@ant-design/icons/es/icons/ExportOutlined.js"),m=e("./frontend/src/scenes/persons/personsLogic.ts"),R=e("./node_modules/core-js/modules/es.regexp.exec.js"),J=e("./node_modules/core-js/modules/es.string.search.js"),H=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=e.n(H),r=e("./node_modules/antd/es/input/index.js"),n=e("./frontend/src/lib/components/LemonRow/index.ts"),c=e("./frontend/src/lib/components/icons.tsx"),b=function(v){var h=v.autoFocus,U=h===void 0?!0:h,x=Object(i.useActions)(m.a),F=x.loadPersons,P=x.setListFilters,p=Object(i.useValues)(m.a),E=p.listFilters,z=Object(t.useState)(""),_=o()(z,2),f=_[0],g=_[1];return Object(t.useEffect)(function(){g(E.search||"")},[]),s.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"min(100%, 24rem)"}},s.a.createElement(r.a.Search,{"data-attr":"persons-search",placeholder:"Search for persons",autoFocus:U,value:f,onChange:function(X){g(X.target.value),X.target.value||(P({search:void 0}),F())},enterButton:!0,allowClear:!0,onSearch:function(){P({search:f||void 0}),F()},style:{width:"100%"}}),s.a.createElement(n.a,{type:"stealth",tooltip:s.a.createElement(s.a.Fragment,null,"Search by email, name, ID, or even contents of properties. You can also search for persons who just ",s.a.createElement("i",null,"have"),' a property like so: "has:your_property".'),icon:s.a.createElement(c.IconInfo,null)}))};try{b.displayName="PersonsSearch",b.__docgenInfo={description:"",displayName:"PersonsSearch",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"]={docgenInfo:b.__docgenInfo,name:"PersonsSearch",path:"frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"})}catch(a){}var B=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),K=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),I=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Q=e("./frontend/src/lib/utils.tsx"),y={component:Y,logic:m.a,paramsToProps:function(){return{syncWithUrl:!0}}};function Y(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=a.cohort,h={cohort:v==null?void 0:v.id,syncWithUrl:!v},U=Object(i.useActions)(Object(m.a)(h)),x=U.loadPersons,F=U.setListFilters,P=Object(i.useValues)(Object(m.a)(h)),p=P.persons,E=P.listFilters,z=P.personsLoading;return s.a.createElement(i.BindLogic,{logic:m.a,props:h},s.a.createElement("div",{className:"persons-list"},s.a.createElement(B.a,{hideGroupTabs:!!v}),s.a.createElement(O.a,{align:"middle",justify:"space-between",className:"mb",style:{gap:"0.75rem"}},s.a.createElement(b,{autoFocus:!v}),s.a.createElement("div",null,s.a.createElement(S.a,{title:s.a.createElement(s.a.Fragment,null,"Exporting by csv is limited to 10,000 users.",s.a.createElement("br",null),"To return more, please use"," ",s.a.createElement("a",{href:"https://posthog.com/docs/api/persons"},"the API"),". Do you want to export by CSV?"),onConfirm:function(){window.location.href="/api/person.csv?"+Object(Q.Bb)(E)}},s.a.createElement(C.a,{type:"default",icon:s.a.createElement(T.a,null),href:"/api/person.csv?"+Object(Q.Bb)(E),style:{marginLeft:8}},E.properties&&E.properties.length>0?s.a.createElement(s.a.Fragment,null,"Export (",s.a.createElement("strong",null,E.properties.length)," filter)"):"Export")))),s.a.createElement(K.a,{pageKey:"persons-list-page",propertyFilters:E.properties,onChange:function(f){F({properties:f}),x()},endpoint:"person",taxonomicGroupTypes:[I.a.PersonProperties,I.a.Cohorts],showConditionBadge:!0}),s.a.createElement(u,{people:p.results,loading:z,hasPrevious:!!p.previous,hasNext:!!p.next,loadPrevious:function(){return x(p.previous)},loadNext:function(){return x(p.next)}})))}try{Y.displayName="Persons",Y.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:"CohortType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:Y.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(a){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(D,d,e){var t=e("./node_modules/css-loader/dist/runtime/api.js");d=t(!1),d.push([D.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:#5375ff;cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),D.exports=d}}]);
