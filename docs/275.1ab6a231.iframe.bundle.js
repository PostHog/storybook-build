(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{"./frontend/src/scenes/groups/RelatedGroups.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RelatedGroups}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),UserOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/lib/icons/UserOutlined.js"),UserOutlined_default=__webpack_require__.n(UserOutlined),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),PersonDisplay=__webpack_require__("./frontend/src/scenes/persons/PersonDisplay.tsx"),api=__webpack_require__("./frontend/src/lib/api.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx");const relatedGroupsLogic=Object(index_esm.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[teamLogic.b,["currentTeamId"]]},props:{},key:props=>{var _props$groupTypeIndex;return`${null!==(_props$groupTypeIndex=props.groupTypeIndex)&&void 0!==_props$groupTypeIndex?_props$groupTypeIndex:"person"}-${props.id}`},actions:()=>({loadRelatedActors:!0}),loaders:_ref=>{let{values:values,props:props}=_ref;return{relatedActors:[[],{loadRelatedActors:async()=>{const url=`api/projects/${values.currentTeamId}/groups/related?${Object(utils.Lb)({group_type_index:props.groupTypeIndex,id:props.id})}`;return await api.b.get(url)},setGroup:()=>[]}]}},events:_ref2=>{let{actions:actions}=_ref2;return{afterMount:actions.loadRelatedActors}}});var GroupActorDisplay=__webpack_require__("./frontend/src/scenes/persons/GroupActorDisplay.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function RelatedGroups(_ref){let{groupTypeIndex:groupTypeIndex,id:id}=_ref;const{relatedActors:relatedActors,relatedActorsLoading:relatedActorsLoading}=Object(index_esm.useValues)(relatedGroupsLogic({groupTypeIndex:groupTypeIndex,id:id})),{aggregationLabel:aggregationLabel}=Object(index_esm.useValues)(groupsModel.a),columns=[{title:"Type",key:"type",render:function RenderActor(_,actor){return"group"===actor.type?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(utils.i)(aggregationLabel(actor.group_type_index).singular)}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(UserOutlined_default.a,{})," Person"]})}},{title:"id",key:"id",render:function RenderActor(_,actor){return"group"==actor.type?Object(jsx_runtime.jsx)(GroupActorDisplay.a,{actor:actor}):Object(jsx_runtime.jsx)(PersonDisplay.a,{person:actor,withIcon:!1})}}];return Object(jsx_runtime.jsx)(LemonTable.a,{dataSource:relatedActors,columns:columns,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:relatedActorsLoading,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{RelatedGroups.displayName="RelatedGroups",RelatedGroups.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:RelatedGroups.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/persons/Person.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Person",(function(){return Person}));var dropdown=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/dropdown/index.js"),menu=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/menu/index.js"),tag=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/tag/index.js"),DownOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/DownOutlined.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),personsLogic=__webpack_require__("./frontend/src/scenes/persons/personsLogic.tsx"),PersonDisplay=__webpack_require__("./frontend/src/scenes/persons/PersonDisplay.tsx"),CopyToClipboard=(__webpack_require__("./frontend/src/scenes/persons/Persons.scss"),__webpack_require__("./frontend/src/lib/components/CopyToClipboard.tsx")),modal=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/modal/index.js"),es_select=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/select/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),MergeSplitPerson=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss"),MergeSplitPerson_default=__webpack_require__.n(MergeSplitPerson),options={insert:"head",singleton:!1},lib=(injectStylesIntoStyleTag_default()(MergeSplitPerson_default.a,options),MergeSplitPerson_default.a.locals,__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js")),api=__webpack_require__("./frontend/src/lib/api.ts"),lemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/lemonToast.tsx"),eventUsageLogic=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts");const mergeSplitPersonLogic=Object(index_esm.kea)({props:{},key:props=>{var _props$person$id;return null!==(_props$person$id=props.person.id)&&void 0!==_props$person$id?_props$person$id:"new"},path:key=>["scenes","persons","mergeSplitPersonLogic",key],connect:()=>({actions:[Object(personsLogic.a)({syncWithUrl:!0}),["setListFilters","loadPersons","setPerson","setSplitMergeModalShown"]],values:[Object(personsLogic.a)({syncWithUrl:!0}),["persons"]]}),actions:{setSelectedPersonToAssignSplit:id=>({id:id}),cancel:!0},reducers:_ref=>{let{props:props}=_ref;return{person:[props.person,{}],selectedPersonsToAssignSplit:[null,{setSelectedPersonToAssignSplit:(_,_ref2)=>{let{id:id}=_ref2;return id}}]}},listeners:_ref3=>{let{actions:actions,values:values}=_ref3;return{setListFilters:()=>{actions.loadPersons()},cancel:()=>{values.executedLoading||actions.setSplitMergeModalShown(!1)}}},loaders:_ref4=>{let{values:values,actions:actions}=_ref4;return{executed:[!1,{execute:async()=>!!(await api.b.create("api/person/"+values.person.id+"/split/",{...values.selectedPersonsToAssignSplit?{main_distinct_id:values.selectedPersonsToAssignSplit}:{}})).success&&(lemonToast.d.success("Person succesfully split. This may take up to a couple of minutes to complete."),eventUsageLogic.d.actions.reportPersonSplit(values.person.distinct_ids.length),actions.setSplitMergeModalShown(!1),lib.router.actions.push("/persons"),!0)}]}},events:_ref5=>{let{actions:actions}=_ref5;return{afterMount:[actions.loadPersons]}}});var utils=__webpack_require__("./frontend/src/lib/utils.tsx"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function MergeSplitPerson_MergeSplitPerson(_ref){let{person:person}=_ref;const logicProps={person:person},{executedLoading:executedLoading}=Object(index_esm.useValues)(mergeSplitPersonLogic(logicProps)),{execute:execute,cancel:cancel}=Object(index_esm.useActions)(mergeSplitPersonLogic(logicProps));return Object(jsx_runtime.jsx)(modal.a,{visible:!0,title:"Split persons",onCancel:cancel,className:"merge-split-person",okText:"Split persons",onOk:execute,okButtonProps:{loading:executedLoading},cancelButtonProps:{disabled:executedLoading},children:person.distinct_ids.length<2?"Only persons with more than two distinct IDs can be split.":Object(jsx_runtime.jsx)(index_esm.BindLogic,{logic:mergeSplitPersonLogic,props:logicProps,children:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(SplitPerson,{})})})})}function SplitPerson(){const{person:person,executedLoading:executedLoading}=Object(index_esm.useValues)(mergeSplitPersonLogic),{setSelectedPersonToAssignSplit:setSelectedPersonToAssignSplit}=Object(index_esm.useActions)(mergeSplitPersonLogic);return person?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("p",{children:"This will split all Distinct IDs for this person into unique persons."}),Object(jsx_runtime.jsxs)("p",{children:["You can select a distinct ID for which all the current properties will be assigned (",Object(jsx_runtime.jsx)("i",{children:"optional"}),"). All other new users will start without any properties."]}),Object(jsx_runtime.jsx)(es_select.a,{allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Select a distinct ID to which to assign all properties (optional)",onChange:value=>setSelectedPersonToAssignSplit(value),filterOption:!1,disabled:executedLoading,children:null==person?void 0:person.distinct_ids.map((distinct_id=>Object(jsx_runtime.jsx)(es_select.a.Option,{value:distinct_id,children:distinct_id},distinct_id)))}),Object(jsx_runtime.jsxs)(LemonBanner.a,{type:"warning",className:"mt-4",children:["This will create ",Object(jsx_runtime.jsx)("strong",{children:person.distinct_ids.length-1})," ",Object(utils.xb)(person.distinct_ids.length-1,"newÂ person",void 0,!1),". This might change the numbers in your charts, even historically. Please be certain."]})]}):null}try{MergeSplitPerson_MergeSplitPerson.displayName="MergeSplitPerson",MergeSplitPerson_MergeSplitPerson.__docgenInfo={description:"",displayName:"MergeSplitPerson",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"PersonType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"]={docgenInfo:MergeSplitPerson_MergeSplitPerson.__docgenInfo,name:"MergeSplitPerson",path:"frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"})}catch(__react_docgen_typescript_loader_error){}var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts");function PersonCohorts(){const{cohorts:cohorts,cohortsLoading:cohortsLoading,person:person}=Object(index_esm.useValues)(personsLogic.a),{loadCohorts:loadCohorts}=Object(index_esm.useActions)(personsLogic.a);Object(react.useEffect)((()=>{loadCohorts()}),[person]);const columns=[{title:"Name",dataIndex:"name",key:"name",className:"ph-no-capture",render:function RenderName(_,cohort){return Object(jsx_runtime.jsx)(Link.a,{to:urls.a.cohort(cohort.id),children:Object(jsx_runtime.jsx)("strong",{children:cohort.name})})},sorter:(a,b)=>(a.name||"").localeCompare(b.name||"")},{title:"Users in cohort",render:function RenderCount(count){return null==count?void 0:count.toLocaleString()},dataIndex:"count",sorter:(a,b)=>(a.count||0)-(b.count||0)}];return Object(jsx_runtime.jsx)(LemonTable.a,{dataSource:cohorts||[],loading:cohortsLoading,columns:columns,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},emptyState:"This person doesn't belong to any cohort"})}var PropertiesTable=__webpack_require__("./frontend/src/lib/components/PropertiesTable/index.ts"),TZLabel=__webpack_require__("./frontend/src/lib/components/TZLabel/index.tsx"),Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),types=__webpack_require__("./frontend/src/types.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),RelatedGroups=__webpack_require__("./frontend/src/scenes/groups/RelatedGroups.tsx"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),ActivityLog=__webpack_require__("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),humanizeActivity=__webpack_require__("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),PersonDeleteModal=__webpack_require__("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),SessionRecordingsPlaylist=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),RelatedFeatureFlags=__webpack_require__("./frontend/src/scenes/persons/RelatedFeatureFlags.tsx"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),schema=__webpack_require__("./frontend/src/queries/schema.ts"),personDeleteModalLogic=__webpack_require__("./frontend/src/scenes/persons/personDeleteModalLogic.tsx"),DataTable_utils=__webpack_require__("./frontend/src/queries/nodes/DataTable/utils.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts");const scene={component:Person,logic:personsLogic.a,paramsToProps:_ref=>{let{params:{_:rawUrlId}}=_ref;return{syncWithUrl:!0,urlId:decodeURIComponent(rawUrlId)}}};function PersonCaption(_ref2){let{person:person}=_ref2;return Object(jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"IDs:"})," ",Object(jsx_runtime.jsx)(CopyToClipboard.a,{tooltipMessage:null,description:"person distinct ID",style:{justifyContent:"flex-end"},children:person.distinct_ids[0]}),person.distinct_ids.length>1&&Object(jsx_runtime.jsx)(dropdown.a,{overlay:Object(jsx_runtime.jsx)(menu.a,{children:person.distinct_ids.slice(1).map((distinct_id=>Object(jsx_runtime.jsx)(menu.a.Item,{children:Object(jsx_runtime.jsx)(CopyToClipboard.a,{description:"person distinct ID",iconStyle:{color:"var(--primary)"},children:distinct_id})},distinct_id)))}),trigger:["click"],children:Object(jsx_runtime.jsxs)(tag.a,{className:"extra-ids",children:["+",person.distinct_ids.length-1,Object(jsx_runtime.jsx)(DownOutlined.a,{})]})})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"First seen:"})," ",person.created_at?Object(jsx_runtime.jsx)(TZLabel.a,{time:person.created_at}):"unknown"]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"Merge restrictions:"})," ",person.is_identified?"applied":"none",Object(jsx_runtime.jsx)(src.Link,{to:"https://posthog.com/docs/data/identify#alias-assigning-multiple-distinct-ids-to-the-same-user",children:Object(jsx_runtime.jsx)(Tooltip.a,{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[person.is_identified?Object(jsx_runtime.jsx)("strong",{children:"Cannot"}):"Can"," be used as `alias_id` - click for more info."]}),children:Object(jsx_runtime.jsx)(icons.Cb,{className:"ml-1 text-base shrink-0"})})})]})]})}function Person(){const{person:person,personLoading:personLoading,currentTab:currentTab,splitMergeModalShown:splitMergeModalShown,urlId:urlId,distinctId:distinctId}=Object(index_esm.useValues)(personsLogic.a),{loadPersons:loadPersons,editProperty:editProperty,deleteProperty:deleteProperty,navigateToTab:navigateToTab,setSplitMergeModalShown:setSplitMergeModalShown,setDistinctId:setDistinctId}=Object(index_esm.useActions)(personsLogic.a),{showPersonDeleteModal:showPersonDeleteModal}=Object(index_esm.useActions)(personDeleteModalLogic.a),{deletedPersonLoading:deletedPersonLoading}=Object(index_esm.useValues)(personDeleteModalLogic.a),{groupsEnabled:groupsEnabled}=Object(index_esm.useValues)(groupsAccessLogic.b),{currentTeam:currentTeam}=Object(index_esm.useValues)(teamLogic.b);if(!person)return personLoading?Object(jsx_runtime.jsx)(Spinner.b,{sceneLevel:!0}):Object(jsx_runtime.jsx)(NotFound.a,{object:"Person"});const url=urls.a.person(urlId||person.distinct_ids[0]||String(person.id));return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:Object(jsx_runtime.jsx)(PersonDisplay.a,{person:person,noLink:!0,withIcon:"lg",noPopover:!0}),caption:Object(jsx_runtime.jsx)(PersonCaption,{person:person}),notebookProps:url?{href:url}:void 0,buttons:Object(jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>showPersonDeleteModal(person,(()=>loadPersons())),disabled:deletedPersonLoading,loading:deletedPersonLoading,type:"secondary",status:"danger","data-attr":"delete-person",children:"Delete person"}),person.distinct_ids.length>1&&Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>setSplitMergeModalShown(!0),"data-attr":"merge-person-button",type:"secondary",children:"Split IDs"})]})}),Object(jsx_runtime.jsx)(PersonDeleteModal.a,{}),Object(jsx_runtime.jsx)(LemonTabs.a,{activeKey:currentTab,onChange:tab=>{navigateToTab(tab)},"data-attr":"persons-tabs",tabs:[{key:types.O.PROPERTIES,label:Object(jsx_runtime.jsx)("span",{"data-attr":"persons-properties-tab",children:"Properties"}),content:Object(jsx_runtime.jsx)(PropertiesTable.a,{type:types.T.Person,properties:person.properties||{},searchable:!0,onEdit:editProperty,sortProperties:!0,embedded:!1,onDelete:key=>deleteProperty(key),filterable:!0})},{key:types.O.EVENTS,label:Object(jsx_runtime.jsx)("span",{"data-attr":"persons-events-tab",children:"Events"}),content:Object(jsx_runtime.jsx)(Query.a,{query:{kind:schema.a.DataTableNode,full:!0,hiddenColumns:["person"],source:{kind:schema.a.EventsQuery,select:Object(DataTable_utils.a)(schema.a.EventsQuery),personId:person.id,after:"-24h"}}})},{key:types.O.SESSION_RECORDINGS,label:Object(jsx_runtime.jsx)("span",{"data-attr":"person-session-recordings-tab",children:"Recordings"}),content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[null!=currentTeam&&currentTeam.session_recording_opt_in?null:Object(jsx_runtime.jsx)("div",{className:"mb-4",children:Object(jsx_runtime.jsxs)(LemonBanner.a,{type:"info",children:["Session recordings are currently disabled for this project. To use this feature, please go to your"," ",Object(jsx_runtime.jsx)(src.Link,{to:`${urls.a.projectSettings()}#recordings`,children:"project settings"})," ","and enable it."]})}),Object(jsx_runtime.jsx)(SessionRecordingsPlaylist.b,{personUUID:person.uuid,updateSearchParams:!0})]})},{key:types.O.COHORTS,label:Object(jsx_runtime.jsx)("span",{"data-attr":"persons-cohorts-tab",children:"Cohorts"}),content:Object(jsx_runtime.jsx)(PersonCohorts,{})},!(!groupsEnabled||!person.uuid)&&{key:types.O.RELATED,label:Object(jsx_runtime.jsxs)("span",{className:"flex items-center","data-attr":"persons-related-tab",children:["Related groups",Object(jsx_runtime.jsx)(Tooltip.a,{title:"People and groups that have shared events with this person in the last 90 days.",children:Object(jsx_runtime.jsx)(icons.Cb,{className:"ml-1 text-base shrink-0"})})]}),content:Object(jsx_runtime.jsx)(RelatedGroups.a,{id:person.uuid,groupTypeIndex:null})},!!person.uuid&&{key:types.O.FEATURE_FLAGS,label:Object(jsx_runtime.jsx)("span",{"data-attr":"persons-related-flags-tab",children:"Feature flags"}),content:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"flex space-x-2 items-center mb-2",children:[Object(jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Choose ID:",Object(jsx_runtime.jsx)(Tooltip.a,{title:"Feature flags values can depend on person distincts IDs. Turn on persistence in feature flag settings if you'd like these to be constant always.",children:Object(jsx_runtime.jsx)(icons.Cb,{className:"ml-1 text-base"})})]}),Object(jsx_runtime.jsx)(src.LemonSelect,{value:person.distinct_ids[0],onChange:value=>value&&setDistinctId(value),options:person.distinct_ids.map((distinct_id=>({label:distinct_id,value:distinct_id}))),"data-attr":"person-feature-flags-select"})]}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"mb-4"}),Object(jsx_runtime.jsx)(RelatedFeatureFlags.b,{distinctId:distinctId||person.distinct_ids[0]})]})},{key:types.O.HISTORY,label:"History",content:Object(jsx_runtime.jsx)(ActivityLog.a,{scope:humanizeActivity.a.PERSON,id:person.id,caption:Object(jsx_runtime.jsx)(LemonBanner.a,{type:"info",children:"This page only shows changes made by users in the PostHog site. Automatic changes from the API aren't shown here."})})}]}),splitMergeModalShown&&person&&Object(jsx_runtime.jsx)(MergeSplitPerson_MergeSplitPerson,{person:person})]})}},"./frontend/src/scenes/persons/Persons.scss":function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ref_6_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ref_6_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ref_6_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1__),options={insert:"head",singleton:!1};_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ref_6_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1___default.a,options),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_18_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ref_6_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1___default.a.locals},"./frontend/src/scenes/persons/RelatedFeatureFlags.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FeatureFlagMatchReason})),__webpack_require__.d(__webpack_exports__,"b",(function(){return RelatedFeatureFlags}));var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),utils=__webpack_require__("./frontend/src/lib/components/Table/utils.tsx"),lib_utils=__webpack_require__("./frontend/src/lib/utils.tsx"),stringWithWBR=__webpack_require__("./frontend/src/lib/utils/stringWithWBR.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),types=__webpack_require__("./frontend/src/types.ts"),fuse_esm=__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),featureFlagsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx");const relatedFeatureFlagsLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","persons","relatedFeatureFlagsLogic"]),Object(index_esm.connect)({values:[teamLogic.b,["currentTeamId"],featureFlagsLogic.b,["featureFlags"]]}),Object(index_esm.props)({}),Object(index_esm.key)((props=>`${props.distinctId}`)),Object(index_esm.actions)({setSearchTerm:searchTerm=>({searchTerm:searchTerm}),setFilters:(filters,replace)=>({filters:filters,replace:replace}),loadRelatedFeatureFlags:!0}),Object(lib.loaders)((_ref=>{let{values:values,props:props}=_ref;return{relatedFeatureFlags:[null,{loadRelatedFeatureFlags:async()=>await api.b.get(`api/projects/${values.currentTeamId}/feature_flags/evaluation_reasons?${Object(lib_utils.Lb)({distinct_id:props.distinctId,...props.groups?{groups:props.groups}:{}})}`)}]}})),Object(index_esm.reducers)({searchTerm:["",{setSearchTerm:(_,_ref2)=>{let{searchTerm:searchTerm}=_ref2;return searchTerm}}],filters:[{},{setFilters:(state,_ref3)=>{let{filters:filters,replace:replace}=_ref3;return replace?{...filters}:{...state,...filters}}}]}),Object(index_esm.selectors)((()=>({mappedRelatedFeatureFlags:[selectors=>[selectors.relatedFeatureFlags,selectors.featureFlags],(relatedFlags,featureFlags)=>relatedFlags&&featureFlags?featureFlags.map((flag=>({...relatedFlags[flag.key],...flag}))):[]],filteredMappedFlags:[selectors=>[selectors.mappedRelatedFeatureFlags,selectors.searchTerm,selectors.filters],(featureFlags,searchTerm,filters)=>{if(!searchTerm&&0===Object.keys(filters).length)return featureFlags;let searchedFlags=featureFlags;searchTerm&&(searchedFlags=new fuse_esm.a(featureFlags,{keys:["key","name"],threshold:.3}).search(searchTerm).map((result=>result.item)));const{type:type,active:active,reason:reason}=filters;return type&&(searchedFlags=searchedFlags.filter((flag=>type===types.u.Variants?flag.filters.multivariate:!flag.filters.multivariate))),active&&(searchedFlags=searchedFlags.filter((flag=>"true"===active?flag.active:!flag.active))),reason&&(searchedFlags=searchedFlags.filter((flag=>"not matched"===reason?flag.evaluation.reason!==FeatureFlagMatchReason.ConditionMatch:flag.evaluation.reason===FeatureFlagMatchReason.ConditionMatch))),searchedFlags}]}))),Object(index_esm.events)((_ref4=>{let{actions:actions}=_ref4;return{afterMount:actions.loadRelatedFeatureFlags}}))]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");let FeatureFlagMatchReason=function(FeatureFlagMatchReason){return FeatureFlagMatchReason.SuperConditionMatch="super_condition_value",FeatureFlagMatchReason.ConditionMatch="condition_match",FeatureFlagMatchReason.NoConditionMatch="no_condition_match",FeatureFlagMatchReason.OutOfRolloutBound="out_of_rollout_bound",FeatureFlagMatchReason.NoGroupType="no_group_type",FeatureFlagMatchReason.Disabled="disabled",FeatureFlagMatchReason}({});const featureFlagMatchMapping={[FeatureFlagMatchReason.ConditionMatch]:"Matches",[FeatureFlagMatchReason.NoConditionMatch]:"Doesn't match any conditions",[FeatureFlagMatchReason.OutOfRolloutBound]:"Out of rollout bound",[FeatureFlagMatchReason.NoGroupType]:"Missing group type",[FeatureFlagMatchReason.SuperConditionMatch]:"Matches early access condition",[FeatureFlagMatchReason.Disabled]:"Disabled"};function RelatedFeatureFlags(_ref){let{distinctId:distinctId,groups:groups}=_ref;const{filteredMappedFlags:filteredMappedFlags,relatedFeatureFlagsLoading:relatedFeatureFlagsLoading,searchTerm:searchTerm,filters:filters}=Object(index_esm.useValues)(relatedFeatureFlagsLogic({distinctId:distinctId,groups:groups})),{setSearchTerm:setSearchTerm,setFilters:setFilters}=Object(index_esm.useActions)(relatedFeatureFlagsLogic({distinctId:distinctId,groups:groups})),columns=[{title:Object(utils.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(a,b)=>(a.key||"").localeCompare(b.key||""),render:function Render(_,featureFlag){const isExperiment=(featureFlag.experiment_set||[]).length>0;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)(src.Link,{to:featureFlag.id?urls.a.featureFlag(featureFlag.id):void 0,className:"row-name",children:[Object(stringWithWBR.a)(featureFlag.key,17),Object(jsx_runtime.jsx)(src.LemonTag,{type:isExperiment?"completion":"default",className:"ml-2",children:isExperiment?"Experiment":"Feature flag"})]}),featureFlag.name&&Object(jsx_runtime.jsx)("span",{className:"row-description",children:featureFlag.name})]})}},{title:"Type",width:100,render:function Render(_,featureFlag){return featureFlag.filters.multivariate?types.u.Variants:types.u.ReleaseToggle}},{title:"Value",dataIndex:"value",width:150,render:function Render(_,featureFlag){return Object(jsx_runtime.jsx)("div",{style:{wordBreak:"break-word"},children:featureFlag.active&&featureFlag.value?Object(lib_utils.i)(featureFlag.value.toString()):"--"})}},{title:"Match evaluation",dataIndex:"evaluation",width:150,render:function Render(_,featureFlag){var _featureFlag$evaluati;const matchesSet=featureFlag.evaluation.reason===FeatureFlagMatchReason.ConditionMatch;return Object(jsx_runtime.jsxs)("div",{children:[featureFlag.active?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlagMatchMapping[featureFlag.evaluation.reason]}):"--",matchesSet&&Object(jsx_runtime.jsxs)("span",{className:"simple-tag ml-2",style:{background:"var(--primary-highlight)"},children:["Set ",(null!==(_featureFlag$evaluati=featureFlag.evaluation.condition_index)&&void 0!==_featureFlag$evaluati?_featureFlag$evaluati:0)+1]})]})}},{title:"Status",dataIndex:"active",sorter:(a,b)=>Number(a.active)-Number(b.active),width:100,render:function RenderActive(_,featureFlag){return Object(jsx_runtime.jsx)("span",{className:"font-normal",children:featureFlag.active?"Enabled":"Disabled"})}}];return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:setSearchTerm,value:searchTerm}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[Object(jsx_runtime.jsx)("span",{children:Object(jsx_runtime.jsx)("b",{children:"Type"})}),Object(jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"All types",value:"all"},{label:types.u.ReleaseToggle,value:types.u.ReleaseToggle},{label:types.u.Variants,value:types.u.Variants}],onChange:type=>{if(type)if("all"===type){if(filters){const{type:type,...restFilters}=filters;setFilters(restFilters,!0)}}else setFilters({type:type})},value:"all",dropdownMaxContentWidth:!0}),Object(jsx_runtime.jsx)("span",{className:"ml-2",children:Object(jsx_runtime.jsx)("b",{children:"Match evaluation"})}),Object(jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"All",value:"all"},{label:"Matched",value:FeatureFlagMatchReason.ConditionMatch},{label:"Not matched",value:"not matched"}],onChange:reason=>{if(reason)if("all"===reason){if(filters){const{reason:reason,...restFilters}=filters;setFilters(restFilters,!0)}}else setFilters({reason:reason})},value:"all",dropdownMaxContentWidth:!0}),Object(jsx_runtime.jsx)("span",{className:"ml-2",children:Object(jsx_runtime.jsx)("b",{children:"Status"})}),Object(jsx_runtime.jsx)(src.LemonSelect,{onChange:status=>{if(status)if("all"===status){if(filters){const{active:active,...restFilters}=filters;setFilters(restFilters,!0)}}else setFilters({active:status})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0})]})]}),Object(jsx_runtime.jsx)(src.LemonTable,{columns:columns,loading:relatedFeatureFlagsLoading,dataSource:filteredMappedFlags})]})}try{RelatedFeatureFlags.displayName="RelatedFeatureFlags",RelatedFeatureFlags.__docgenInfo={description:"",displayName:"RelatedFeatureFlags",props:{distinctId:{defaultValue:null,description:"",name:"distinctId",required:!0,type:{name:"string"}},groups:{defaultValue:null,description:"",name:"groups",required:!1,type:{name:"{ [key: string]: string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"]={docgenInfo:RelatedFeatureFlags.__docgenInfo,name:"RelatedFeatureFlags",path:"frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/lib/icons/UserOutlined.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),_interopRequireDefault=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/objectSpread2.js")),React=_interopRequireWildcard(__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),_UserOutlined=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js")),_AntdIcon=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/lib/components/AntdIcon.js")),UserOutlined=function UserOutlined(props,ref){return React.createElement(_AntdIcon.default,(0,_objectSpread2.default)((0,_objectSpread2.default)({},props),{},{ref:ref,icon:_UserOutlined.default}))};UserOutlined.displayName="UserOutlined";var _default=React.forwardRef(UserOutlined);exports.default=_default},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".merge-split-person .activity-header{background-color:var(--mid);border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-left:-24px;margin-right:-24px;padding:8px 0;display:flex;justify-content:center;margin-bottom:1rem}.merge-split-person .ant-modal-header{border-bottom:0}.merge-split-person .ant-modal-body{padding-top:0}.merge-split-person .ant-radio-wrapper{margin-right:2px}.merge-split-person .ant-col{margin-right:1rem}.merge-split-person code{background-color:var(--mid);color:var(--primary-alt);padding:4px 8px;border-radius:var(--radius)}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),module.exports=exports}}]);