(window.webpackJsonp=window.webpackJsonp||[]).push([[301],{"./frontend/src/lib/hooks/useAnchor.ts":function(Y,p,s){"use strict";s.d(p,"a",function(){return P});var r=s("./node_modules/react/index.js"),h=s.n(r);function P(m){Object(r.useEffect)(function(){if(m&&document.getElementById(m.substr(1))){var g=document.getElementById(m.substr(1));if(!g)return;g.classList.add("highlighted");var S=g.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:S-50-32,behavior:"smooth"})}},[m])}},"./frontend/src/scenes/me/Settings/index.tsx":function(Y,p,s){"use strict";s.r(p),s.d(p,"scene",function(){return ce}),s.d(p,"MySettings",function(){return U});var r=s("./node_modules/kea/lib/index.esm.js"),h=s("./node_modules/antd/es/divider/index.js"),P=s("./frontend/src/lib/hooks/useAnchor.ts"),m=s("./node_modules/kea-router/lib/index.js"),g=s("./node_modules/core-js/modules/es.object.keys.js"),S=s("./node_modules/core-js/modules/es.symbol.js"),ue=s("./node_modules/core-js/modules/es.array.filter.js"),je=s("./node_modules/core-js/modules/es.object.to-string.js"),me=s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),be=s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),pe=s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),z=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),D=s.n(z),j=s("./frontend/src/scenes/userLogic.ts"),u=s("./frontend/@posthog/lemon-ui/src/index.ts"),e=s("./node_modules/react/jsx-runtime.js");function M(n,t){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),a.push.apply(a,o)}return a}function T(n){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?M(Object(a),!0).forEach(function(o){D()(n,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(a,o))})}return n}function B(){var n=Object(r.useValues)(j.a),t=n.user,a=n.userLoading,o=Object(r.useActions)(j.a),i=o.updateUser;return Object(e.jsxs)("div",{children:[Object(e.jsx)(u.LemonSwitch,{"data-attr":"email-preferences",onChange:function(){i({email_opt_in:!(t!=null&&t.email_opt_in)})},checked:(t==null?void 0:t.email_opt_in)||!1,disabled:a,label:"Receive security and feature updates via email. You can easily unsubscribe at any time.",fullWidth:!0,bordered:!0}),Object(e.jsx)("br",{}),Object(e.jsx)(u.LemonSwitch,{id:"plugin-disabled","data-attr":"plugin_disabled",onChange:function(){t!=null&&t.notification_settings&&i({notification_settings:T(T({},t==null?void 0:t.notification_settings),{},{plugin_disabled:!(t!=null&&t.notification_settings.plugin_disabled)})})},checked:(t==null?void 0:t.notification_settings.plugin_disabled)||!1,disabled:a,fullWidth:!0,bordered:!0,label:"Get notified when plugins are disabled due to errors."})]})}var w=s("./node_modules/kea-forms/lib/index.js"),f=s("./frontend/src/lib/forms/Field.tsx"),W=s("./frontend/src/lib/components/PasswordStrength.tsx"),R=s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),H=s.n(R),G=s("./node_modules/@babel/runtime/regenerator/index.js"),K=s.n(G),he=s("./node_modules/core-js/modules/es.array.iterator.js"),ge=s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),J=s("./frontend/src/lib/api.ts"),N=Object(r.kea)([Object(r.path)(["scenes","me","settings","changePasswordLogic"]),Object(r.connect)({values:[j.a,["user"]]}),Object(w.forms)(function(n){var t=n.values,a=n.actions;return{changePassword:{defaults:{},errors:function(i){var c=i.current_password,d=i.password;return{current_password:(!t.user||t.user.has_password)&&!c?"Please enter your current password":void 0,password:d?d.length<8?"Password must be at least 8 characters":void 0:"Please enter your password to continue"}},submit:function(){var o=H()(K.a.mark(function c(d,v){var b,x;return K.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return b=d.password,x=d.current_password,l.next=3,v(150);case 3:return l.prev=3,l.next=6,J.b.update("api/users/@me/",{current_password:x,password:b});case 6:a.resetChangePassword({password:"",current_password:""}),u.lemonToast.success("Password changed"),l.next=13;break;case 10:l.prev=10,l.t0=l.catch(3),a.setChangePasswordManualErrors(D()({},l.t0.attr,l.t0.detail));case 13:case"end":return l.stop()}},c,null,[[3,10]])}));function i(c,d){return o.apply(this,arguments)}return i}()}}})]);function Z(){var n=Object(r.useValues)(N),t=n.changePassword,a=n.isChangePasswordSubmitting;return Object(e.jsxs)(w.Form,{logic:N,formKey:"changePassword",enableFormOnSubmit:!0,className:"space-y-4",style:{maxWidth:"40rem"},children:[Object(e.jsx)(f.a,{name:"current_password",label:"Current Password",children:Object(e.jsx)(u.LemonInput,{autoComplete:"current-password",type:"password",className:"ph-ignore-input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})}),Object(e.jsx)(f.a,{name:"password",label:Object(e.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[Object(e.jsx)("span",{children:"Password"}),Object(e.jsx)("span",{className:"w-20",children:Object(e.jsx)(W.a,{password:t.password})})]}),children:Object(e.jsx)(u.LemonInput,{autoComplete:"current-password",type:"password",className:"ph-ignore-input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})}),Object(e.jsx)(u.LemonButton,{type:"primary",htmlType:"submit",loading:a,children:"Change password"})]})}var $=s("./node_modules/@babel/runtime/helpers/slicedToArray.js"),C=s.n($),y=s("./node_modules/react/index.js"),Q=s("./node_modules/antd/es/popconfirm/index.js"),X=s("./node_modules/antd/es/table/index.js"),k=s("./node_modules/@ant-design/icons/es/icons/ExclamationCircleOutlined.js"),A=s("./frontend/src/lib/components/PersonalAPIKeys/personalAPIKeysLogic.ts"),E=s("./frontend/src/lib/utils.tsx"),q=s("./frontend/src/lib/components/CopyToClipboard.tsx"),O=s("./frontend/src/lib/components/LemonButton/index.ts"),_=s("./frontend/src/lib/components/AlertMessage/index.ts"),ee=s("./frontend/src/lib/components/icons.tsx");function se(n){var t=n.isOpen,a=n.setIsOpen,o=Object(r.useActions)(A.a),i=o.createKey,c=Object(y.useState)(null),d=C()(c,2),v=d[0],b=d[1],x=Object(y.useState)(""),I=C()(x,2),l=I[0],F=I[1],L=Object(y.useCallback)(function(){b(null),a(!1)},[a]);return Object(e.jsx)(u.LemonModal,{title:"Creating a Personal API Key",onClose:L,isOpen:t,footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(O.a,{type:"secondary",onClick:L,children:"Cancel"}),Object(e.jsx)(O.a,{type:"primary",onClick:function(){l?(b(null),i(l),F(""),L()):b("Your key needs a label!")},children:"Create key"})]}),children:Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(u.LemonInput,{placeholder:'for example "Zapier"',maxLength:40,onChange:F,value:l}),v&&Object(e.jsx)(_.a,{type:"error",children:v}),Object(e.jsxs)("p",{children:["Key value ",Object(e.jsx)("b",{children:"will only ever be shown once"}),", immediately after creation.",Object(e.jsx)("br",{}),"Copy it to your destination right away."]})]})})}function te(n){return n?Object(e.jsx)(q.a,{description:"personal API key value",children:n}):Object(e.jsx)("i",{children:"secret"})}function ne(n){return function(a){return Object(e.jsx)(Q.a,{title:'Permanently delete key "'.concat(a.label,'"?'),okText:"Delete Key",okType:"danger",icon:Object(e.jsx)(k.a,{style:{color:"var(--danger)"}}),placement:"left",onConfirm:function(){n(a)},children:Object(e.jsx)("a",{className:"text-danger",children:"Delete"})})}}function ae(){var n=Object(r.useValues)(A.a),t=n.keys,a=Object(r.useActions)(A.a),o=a.deleteKey,i=[{title:"Label",dataIndex:"label",key:"label"},{title:"Value",dataIndex:"value",key:"value",className:"ph-no-capture",render:te},{title:"Last Used",dataIndex:"last_used_at",key:"lastUsedAt",render:function(d){return Object(E.N)(d,"MMMM DD, YYYY","h A")}},{title:"Created",dataIndex:"created_at",key:"createdAt",render:function(d){return Object(E.N)(d)}},{title:"",key:"actions",align:"center",render:ne(o)}];return Object(e.jsx)(X.a,{dataSource:t,columns:i,rowKey:"id",pagination:{pageSize:50,hideOnSinglePage:!0},style:{marginTop:"1rem"}})}function oe(){var n=Object(y.useState)(!1),t=C()(n,2),a=t[0],o=t[1];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("p",{children:["These keys allow full access to your personal account through the API, as if you were logged in. You can also use them in integrations, such as"," ",Object(e.jsx)("a",{href:"https://zapier.com/apps/posthog/",children:"our premium Zapier one"}),".",Object(e.jsx)("br",{}),"Try not to keep disused keys around. If you have any suspicion that one of these may be compromised, delete it and use a new one.",Object(e.jsx)("br",{}),Object(e.jsx)("a",{href:"https://posthog.com/docs/api/overview#authentication",children:"More about API authentication in PostHog Docs."})]}),Object(e.jsx)(O.a,{type:"primary",onClick:function(){o(!0)},icon:Object(e.jsx)(ee.IconPlus,{}),children:"Create personal API key"}),Object(e.jsx)(se,{isOpen:a,setIsOpen:o}),Object(e.jsx)(ae,{})]})}var re=s("./node_modules/antd/es/switch/index.js");function ie(){var n=Object(r.useValues)(j.a),t=n.user,a=n.userLoading,o=Object(r.useActions)(j.a),i=o.updateUser;return Object(e.jsxs)("div",{children:[Object(e.jsx)("p",{children:"PostHog uses PostHog (unsurprisingly!) to capture information about how people are using the product. We believe that product analytics is crucial to making PostHog the most useful it can be, for everyone."}),Object(e.jsx)("p",{children:"We also understand there are many reasons why people don't want to or aren't allowed to send this usage data. If you would like to anonymize your personal usage data, just tick the box below."}),Object(e.jsx)(re.a,{"data-attr":"anonymize-data-collection",onChange:function(d){return i({anonymize_data:d})},defaultChecked:t==null?void 0:t.anonymize_data,loading:a,disabled:a}),Object(e.jsx)("label",{htmlFor:"anonymize-data-collection",style:{marginLeft:"10px"},children:"Anonymize my data"})]})}var le=s("./frontend/src/lib/components/PageHeader.tsx"),V=s("./frontend/src/lib/components/LemonInput/LemonInput.tsx");function de(){var n=Object(r.useValues)(j.a),t=n.userLoading,a=n.isUserDetailsSubmitting,o=n.userDetailsChanged;return Object(e.jsxs)(w.Form,{logic:j.a,formKey:"userDetails",enableFormOnSubmit:!0,className:"space-y-4",style:{maxWidth:"28rem"},children:[Object(e.jsx)(f.a,{name:"first_name",label:"Your name",children:Object(e.jsx)(V.a,{className:"ph-ignore-input","data-attr":"settings-update-first-name",placeholder:"Jane Doe",disabled:t})}),Object(e.jsx)(f.a,{name:"email",label:"Your email",children:Object(e.jsx)(V.a,{className:"ph-ignore-input","data-attr":"settings-update-email",placeholder:"email@yourcompany.com",disabled:t})}),Object(e.jsx)(O.a,{type:"primary",htmlType:"submit",loading:a,disabled:!o,"data-attr":"user-details-submit-bottom",children:"Save name and email"})]})}var ce={component:U};function U(){var n=Object(r.useValues)(m.router),t=n.location;return Object(P.a)(t.hash),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(le.a,{title:"My settings"}),Object(e.jsxs)("div",{className:"border rounded p-6 mt-4",children:[Object(e.jsx)(de,{}),Object(e.jsx)(h.a,{}),Object(e.jsx)("h2",{id:"password",className:"subtitle",children:"Change Password"}),Object(e.jsx)(Z,{}),Object(e.jsx)(h.a,{}),Object(e.jsx)("h2",{id:"personal-api-keys",className:"subtitle",children:"Personal API Keys"}),Object(e.jsx)(oe,{}),Object(e.jsx)(h.a,{}),Object(e.jsxs)("div",{id:"notifications",children:[Object(e.jsx)("h2",{className:"subtitle",children:"Notifications"}),Object(e.jsx)(B,{})]}),Object(e.jsx)(h.a,{}),Object(e.jsx)("h2",{id:"optout",className:"subtitle",children:"Anonymize Data Collection"}),Object(e.jsx)(ie,{})]})]})}}}]);
