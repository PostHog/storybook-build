(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(B,u,e){"use strict";var b=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),R=e.n(b),I=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),O=e.n(I),E={};E.insert="head",E.singleton=!1;var S=R()(O.a,E),N=O.a.locals||{}},"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(B,u,e){"use strict";e.r(u),e.d(u,"ProjectHomepage",function(){return J}),e.d(u,"scene",function(){return ie});var b=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),R=e.n(b),I=e("./node_modules/core-js/modules/es.function.name.js"),O=e("./node_modules/core-js/modules/es.object.to-string.js"),E=e("./node_modules/core-js/modules/es.regexp.to-string.js"),S=e("./node_modules/react/index.js"),N=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),C=e("./frontend/src/lib/components/PageHeader.tsx"),T=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),h=e("./node_modules/kea/lib/index.esm.js"),p=e("./frontend/src/scenes/teamLogic.tsx"),x=e("./frontend/src/types.ts"),U=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),A=e("./frontend/src/lib/components/LemonDivider/index.ts"),W=e("./node_modules/core-js/modules/es.array.map.js"),i=e("./node_modules/core-js/modules/es.symbol.js"),V=e("./node_modules/core-js/modules/es.symbol.description.js"),n=e("./frontend/src/models/dashboardsModel.tsx"),D=e("./frontend/src/lib/components/LemonButton/index.ts"),g=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),t=e.n(g),c=e("./node_modules/@babel/runtime/regenerator/index.js"),o=e.n(c),r=e("./frontend/src/lib/utils/eventUsageLogic.ts"),d=Object(h.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[r.e],actions:[p.a,["updateCurrentTeam"]],values:[p.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(v){return{dashboardId:v}}},selectors:{primaryDashboardId:[function(a){return[a.currentTeam]},function(a){return a==null?void 0:a.primary_dashboard}]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(v){var L=v.actions;return{setPrimaryDashboard:function(){var m=t()(o.a.mark(function j(K){var y;return o.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:y=K.dashboardId,L.updateCurrentTeam({primary_dashboard:y}),r.e.actions.reportPrimaryDashboardChanged();case 3:case"end":return f.stop()}},j)}));function P(j){return m.apply(this,arguments)}return P}(),showPrimaryDashboardModal:function(){var m=t()(o.a.mark(function j(){return o.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:r.e.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return y.stop()}},j)}));function P(){return m.apply(this,arguments)}return P}()}}}),_=e("./frontend/src/lib/components/icons.tsx"),M=e("./frontend/src/lib/components/LemonRow/index.ts"),l=e("./frontend/src/lib/components/LemonModal/index.ts"),w=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),s=e("./node_modules/react/jsx-runtime.js");function Z(){var a=Object(h.useValues)(d),v=a.isOpen,L=a.primaryDashboardId,m=Object(h.useActions)(d),P=m.closePrimaryDashboardModal,j=m.setPrimaryDashboard,K=Object(h.useValues)(n.a),y=K.nameSortedDashboards,F=K.dashboardsLoading;return Object(s.jsx)(l.a,{isOpen:v,onClose:P,title:"Select a default dashboard for the project",footer:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(D.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:P,children:"Close"})}),children:F?Object(s.jsx)("div",{className:"space-y-2",children:Object(s.jsx)(w.a.Row,{repeat:4})}):Object(s.jsx)("div",{className:"space-y-2",children:y.map(function(f){var H=f.id===L,z=Object(s.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[Object(s.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[Object(s.jsx)("strong",{children:f.name}),Object(s.jsx)("span",{className:"text-default font-normal text-ellipsis",children:f.description})]}),H?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(_.IconCottage,{className:"mr-2 text-warning text-lg"}),Object(s.jsx)("span",{children:"Default"})]}):Object(s.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return H?Object(s.jsx)(M.a,{fullWidth:!0,status:"muted",className:"dashboard-row",children:z},f.id):Object(s.jsx)(D.a,{fullWidth:!0,className:"dashboard-row",onClick:function(){j(f.id),P()},children:z},f.id)})})})}var G=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),k=e("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),q=e("./frontend/src/scenes/project-homepage/RecentInsights.tsx"),me=e("./node_modules/core-js/modules/es.array.slice.js"),ee=e("./frontend/src/lib/dayjs.ts"),se=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),Y=e("./frontend/src/scenes/urls.ts"),te=e("./frontend/src/lib/components/ProfilePicture/index.ts"),$=e("./frontend/src/scenes/persons/PersonHeader.tsx");function oe(a){var v=a.person,L=Object(h.useActions)(r.e),m=L.reportPersonOpenedFromNewlySeenPersonsList;return Object(s.jsx)(D.a,{fullWidth:!0,to:Y.a.person(v.distinct_ids[0]),onClick:function(){m()},children:Object(s.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(s.jsx)(te.b,{name:Object($.b)(v)}),Object(s.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(s.jsx)("div",{children:Object($.b)(v)}),Object(s.jsxs)("div",{children:["First seen ",Object(ee.a)(v.created_at).fromNow()]})]})]})})}function ne(){var a=Object(h.useValues)(G.a),v=a.persons,L=a.personsLoading;return Object(s.jsx)(se.a,{title:"Newly seen persons",viewAllURL:Y.a.persons(),loading:L,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:v.slice(0,5),renderRow:function(P,j){return Object(s.jsx)(oe,{person:P},j)}})}var re=e("./node_modules/@react-hook/size/dist/module/index.js"),ae=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),ce=e("./frontend/@posthog/lemon-ui/src/index.ts");function J(){var a=Object(h.useValues)(G.a),v=a.dashboardLogic,L=Object(h.useValues)(p.a),m=L.currentTeam,P=Object(h.useValues)(v),j=P.allItems,K=Object(h.useActions)(U.a),y=K.showInviteModal,F=Object(h.useActions)(d),f=F.showPrimaryDashboardModal,H=Object(S.useRef)(null),z=Object(re.a)(H),Q=R()(z,1),X=Q[0],de=Object(s.jsxs)("div",{className:"flex",children:[Object(s.jsx)(D.a,{"data-attr":"project-home-invite-team-members",onClick:function(){y()},className:"mr-2",type:"secondary",children:"Invite members"}),Object(s.jsx)(ae.NewInsightButton,{dataAttr:"project-home-new-insight"})]});return Object(s.jsxs)("div",{className:"project-homepage",children:[Object(s.jsx)(C.a,{title:(m==null?void 0:m.name)||"",delimited:!0,buttons:de}),Object(s.jsxs)("div",{ref:H,className:X&&X<600?"top-list-container-vertical":"top-list-container-horizontal",children:[Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(q.b,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(ne,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(k.a,{})})]}),m!=null&&m.primary_dashboard?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"homepage-dashboard-header",children:[Object(s.jsxs)("div",{className:"dashboard-title-container",children:[!j&&Object(s.jsx)(w.a,{className:"w-20"}),(j==null?void 0:j.name)&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(_.IconCottage,{className:"mr-2 text-warning text-2xl"}),Object(s.jsx)(ce.Link,{className:"font-semibold text-xl text-default",to:Y.a.dashboard(j.id),children:j==null?void 0:j.name})]})]}),Object(s.jsx)(D.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:f,children:"Change dashboard"})]}),Object(s.jsx)(A.a,{className:"my-6"}),Object(s.jsx)(T.Dashboard,{id:m.primary_dashboard.toString(),placement:x.m.ProjectHomepage})]}):Object(s.jsxs)("div",{className:"empty-state-container",children:[Object(s.jsx)(_.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),Object(s.jsx)("h1",{children:"There isn\u2019t a default dashboard set for this project"}),Object(s.jsx)("p",{className:"mb-4",children:"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."}),Object(s.jsx)(D.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){f()},children:"Select a default dashboard"})]}),Object(s.jsx)(Z,{})]})}var ie={component:J,logic:G.a}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(B,u,e){"use strict";e.d(u,"a",function(){return n}),e.d(u,"b",function(){return D});var b=e("./node_modules/core-js/modules/es.function.name.js"),R=e.n(b),I=e("./node_modules/core-js/modules/es.array.slice.js"),O=e.n(I),E=e("./node_modules/react/index.js"),S=e.n(E),N=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),C=e("./node_modules/kea/lib/index.esm.js"),T=e("./frontend/src/lib/dayjs.ts"),h=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),p=e("./frontend/src/lib/components/LemonButton/index.ts"),x=e("./frontend/src/scenes/urls.ts"),U=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),A=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),W=e("./frontend/src/lib/utils/eventUsageLogic.ts"),i=e("./node_modules/react/jsx-runtime.js"),V=e.n(i);function n(g){var t=g.insight,c=Object(C.useActions)(W.e),o=c.reportInsightOpenedFromRecentInsightList;return Object(i.jsx)(p.a,{fullWidth:!0,to:x.a.insightView(t.short_id),onClick:function(){o()},children:Object(i.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(i.jsx)(U.InsightIcon,{insight:t}),Object(i.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(i.jsx)("div",{children:t.name||t.derived_name}),Object(i.jsxs)("div",{children:["Last modified ",Object(T.a)(t.last_modified_at).fromNow()]})]})]})})}function D(){var g=Object(C.useValues)(A.a),t=g.recentInsights,c=g.recentInsightsLoading,o=Object(C.useActions)(A.a),r=o.loadRecentInsights;return Object(E.useEffect)(function(){r()},[]),Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(h.a,{title:"Your recently viewed insights",viewAllURL:x.a.savedInsights(),loading:c,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:x.a.savedInsights()},items:t.slice(0,5),renderRow:function(_,M){return Object(i.jsx)(n,{insight:_},M)}})})}try{n.displayName="InsightRow",n.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:n.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(g){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(B,u,e){"use strict";e.d(u,"b",function(){return g}),e.d(u,"a",function(){return t});var b=e("./node_modules/core-js/modules/es.array.slice.js"),R=e.n(b),I=e("./frontend/src/lib/dayjs.ts"),O=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),S=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),N=e("./frontend/src/lib/components/LemonButton/index.ts"),C=e("./frontend/src/lib/components/ProfilePicture/index.ts"),T=e("./frontend/src/scenes/persons/PersonHeader.tsx"),h=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),p=e("./frontend/src/scenes/urls.ts"),x=e("./frontend/src/lib/utils/eventUsageLogic.ts"),U=e("./frontend/src/lib/utils.tsx"),A=e("./frontend/src/lib/components/icons.tsx"),W=e("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),i=e("./frontend/src/scenes/teamLogic.tsx"),V=e("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),n=e("./node_modules/react/jsx-runtime.js"),D=e.n(n);function g(c){var o=c.recording,r=Object(O.useActions)(V.a),d=r.openSessionPlayer,_=Object(O.useActions)(x.e),M=_.reportRecordingOpenedFromRecentRecordingList;return Object(n.jsx)(N.a,{fullWidth:!0,onClick:function(){d({id:o.id,matching_events:o.matching_events}),M()},children:Object(n.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(n.jsx)(C.b,{name:Object(T.b)(o.person)}),Object(n.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(n.jsx)("div",{children:Object(T.b)(o.person)}),Object(n.jsxs)("div",{children:["Recorded ",Object(I.a)(o.start_time).fromNow()]})]}),Object(n.jsx)("span",{children:Object(U.O)(o.recording_duration)}),Object(n.jsx)(A.IconPlayCircle,{className:"text-2xl ml-2"})]})})}function t(){var c=Object(O.useValues)(i.a),o=c.currentTeam,r=Object(h.b)({key:"projectHomepage"}),d=Object(O.useValues)(r),_=d.sessionRecordings,M=d.sessionRecordingsResponseLoading;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(W.a,{}),Object(n.jsx)(S.a,{title:"Recent recordings",viewAllURL:p.a.sessionRecordings(),loading:M,emptyMessage:o!=null&&o.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:p.a.projectSettings()+"#recordings"},items:_.slice(0,5),renderRow:function(w,s){return Object(n.jsx)(g,{recording:w},s)}})]})}try{g.displayName="RecordingRow",g.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:g.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(c){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(B,u,e){"use strict";e.d(u,"a",function(){return g});var b=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),R=e.n(b),I=e("./node_modules/@babel/runtime/regenerator/index.js"),O=e.n(I),E=e("./node_modules/core-js/modules/es.array.iterator.js"),S=e.n(E),N=e("./node_modules/core-js/modules/es.object.to-string.js"),C=e.n(N),T=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),h=e.n(T),p=e("./node_modules/kea/lib/index.esm.js"),x=e("./frontend/src/scenes/teamLogic.tsx"),U=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),A=e("./frontend/src/types.ts"),W=e("./frontend/src/lib/api.ts"),i=e("./node_modules/kea-subscriptions/lib/index.js"),V=e.n(i),n=e("./node_modules/kea-loaders/lib/index.js"),D=e.n(n),g=Object(p.kea)([Object(p.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(p.connect)({values:[x.a,["currentTeamId","currentTeam"]]}),Object(p.selectors)({primaryDashboardId:[function(){return[x.a.selectors.currentTeam]},function(t){return t==null?void 0:t.primary_dashboard}],dashboardLogic:[function(t){return[t.primaryDashboardId]},function(t){return Object(U.c)({id:t!=null?t:void 0,placement:A.m.ProjectHomepage})}]}),Object(n.loaders)(function(t){var c=t.values;return{recentInsights:[[],{loadRecentInsights:function(){var o=R()(O.a.mark(function d(){var _;return O.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,W.b.get("api/projects/".concat(c.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return _=l.sent,l.abrupt("return",_.results);case 4:case"end":return l.stop()}},d)}));function r(){return o.apply(this,arguments)}return r}()}],persons:[[],{loadPersons:function(){var o=R()(O.a.mark(function d(){var _;return O.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,W.b.persons.list();case 2:return _=l.sent,l.abrupt("return",_.results);case 4:case"end":return l.stop()}},d)}));function r(){return o.apply(this,arguments)}return r}()}]}}),Object(i.subscriptions)(function(t){var c=t.cache;return{dashboardLogic:function(r){var d;(d=c.unmount)===null||d===void 0||d.call(c),c.unmount=r?r.mount():null}}}),Object(p.afterMount)(function(t){var c,o=t.cache,r=t.actions;(c=o.unmount)===null||c===void 0||c.call(o),r.loadRecentInsights(),r.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(B,u,e){var b=e("./node_modules/css-loader/dist/runtime/api.js");u=b(!1),u.push([B.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),B.exports=u}}]);
