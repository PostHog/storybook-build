"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[27251],{"../../products/llm_analytics/frontend/evaluations/LLMAnalyticsEvaluation.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LLMAnalyticsEvaluation:()=>LLMAnalyticsEvaluation,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.7_react@18.2.0_/node_modules/kea-forms/lib/index.js"),kea_router_lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.34.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),NotFound=__webpack_require__("../../frontend/src/lib/components/NotFound/index.tsx"),SceneBreadcrumbs=__webpack_require__("../../frontend/src/layout/scenes/components/SceneBreadcrumbs.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),kea_loaders_lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),teamLogic=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),utils=__webpack_require__("../../products/llm_analytics/frontend/utils.ts");let llmEvaluationLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","llm_analytics","evaluations","llmEvaluationLogic"]),(0,index_esm.props)({}),(0,index_esm.key)(props=>props.evaluationId||"new"),(0,index_esm.actions)({setEvaluationName:name=>({name}),setEvaluationDescription:description=>({description}),setEvaluationPrompt:prompt=>({prompt}),setEvaluationEnabled:enabled=>({enabled}),setTriggerConditions:conditions=>({conditions}),saveEvaluation:!0,saveEvaluationSuccess:evaluation=>({evaluation}),loadEvaluation:!0,loadEvaluationSuccess:evaluation=>({evaluation}),resetEvaluation:!0,refreshEvaluationRuns:!0}),(0,kea_loaders_lib.loaders)(_ref=>{let{props,values}=_ref;return{evaluationRuns:[[],{loadEvaluationRuns:async()=>props.evaluationId&&"new"!==props.evaluationId?await (0,utils.pW)({evaluationId:props.evaluationId,forceRefresh:values.isForceRefresh}):[]}]}}),(0,index_esm.reducers)({originalEvaluation:[null,{loadEvaluationSuccess:(_,_ref2)=>{let{evaluation}=_ref2;return evaluation},saveEvaluationSuccess:(_,_ref3)=>{let{evaluation}=_ref3;return evaluation}}],evaluation:[null,{setEvaluationName:(state,_ref4)=>{let{name}=_ref4;return state?{...state,name}:null},setEvaluationDescription:(state,_ref5)=>{let{description}=_ref5;return state?{...state,description}:null},setEvaluationPrompt:(state,_ref6)=>{let{prompt}=_ref6;return state?{...state,evaluation_config:{...state.evaluation_config,prompt}}:null},setEvaluationEnabled:(state,_ref7)=>{let{enabled}=_ref7;return state?{...state,enabled}:null},setTriggerConditions:(state,_ref8)=>{let{conditions}=_ref8;return state?{...state,conditions}:null},loadEvaluationSuccess:(_,_ref9)=>{let{evaluation}=_ref9;return evaluation},saveEvaluationSuccess:(_,_ref10)=>{let{evaluation}=_ref10;return evaluation}}],isForceRefresh:[!1,{refreshEvaluationRuns:()=>!0,loadEvaluationRunsSuccess:()=>!1,loadEvaluationRunsFailure:()=>!1}],evaluationLoading:[!1,{loadEvaluation:()=>!0,loadEvaluationSuccess:()=>!1}],evaluationFormSubmitting:[!1,{saveEvaluation:()=>!0,saveEvaluationSuccess:()=>!1}],hasUnsavedChanges:[!1,{setEvaluationName:()=>!0,setEvaluationDescription:()=>!0,setEvaluationPrompt:()=>!0,setEvaluationEnabled:()=>!0,setTriggerConditions:()=>!0,saveEvaluationSuccess:()=>!1,loadEvaluationSuccess:()=>!1,resetEvaluation:()=>!1}]}),(0,index_esm.listeners)(_ref11=>{let{actions,values,props}=_ref11;return{loadEvaluation:async()=>{if(props.evaluationId&&"new"!==props.evaluationId)try{let teamId=teamLogic.teamLogic.values.currentTeamId;if(!teamId)return;let evaluation=await api.ZP.get(`/api/environments/${teamId}/evaluations/${props.evaluationId}/`);actions.loadEvaluationSuccess(evaluation)}catch(error){console.error("Failed to load evaluation:",error),actions.loadEvaluationSuccess(null)}else if("new"===props.evaluationId){let newEvaluation={id:"",name:"",description:"",enabled:!1,evaluation_type:"llm_judge",evaluation_config:{prompt:""},output_type:"boolean",output_config:{},conditions:[{id:`cond-${Date.now()}`,rollout_percentage:100,properties:[]}],total_runs:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};actions.loadEvaluationSuccess(newEvaluation)}},refreshEvaluationRuns:()=>{actions.loadEvaluationRuns()},resetEvaluation:()=>{if("new"===props.evaluationId){let newEvaluation={id:"",name:"",description:"",enabled:!1,evaluation_type:"llm_judge",evaluation_config:{prompt:""},output_type:"boolean",output_config:{},conditions:[{id:`cond-${Date.now()}`,rollout_percentage:100,properties:[]}],total_runs:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};actions.loadEvaluationSuccess(newEvaluation)}else actions.loadEvaluationSuccess(values.originalEvaluation)},saveEvaluation:async()=>{try{let teamId=teamLogic.teamLogic.values.currentTeamId;if(!teamId)return;if("new"===props.evaluationId){let response=await api.ZP.create(`/api/environments/${teamId}/evaluations/`,values.evaluation);actions.saveEvaluationSuccess(response)}else{let response=await api.ZP.update(`/api/environments/${teamId}/evaluations/${props.evaluationId}/`,values.evaluation);actions.saveEvaluationSuccess(response)}kea_router_lib.router.actions.push(urls.j.llmAnalyticsEvaluations())}catch(error){console.error("Failed to save evaluation:",error)}}}}),(0,index_esm.selectors)({isNewEvaluation:[(_,props)=>[props.evaluationId],evaluationId=>"new"===evaluationId],formValid:[s=>[s.evaluation],evaluation=>!!evaluation&&evaluation.name.length>0&&evaluation.evaluation_config.prompt.length>0&&evaluation.conditions.length>0&&evaluation.conditions.every(c=>c.rollout_percentage>0&&c.rollout_percentage<=100)],runsSummary:[s=>[s.evaluationRuns],runs=>{if(0===runs.length)return null;let successfulRuns=runs.filter(r=>!0===r.result).length,failedRuns=runs.filter(r=>!1===r.result).length,errorRuns=runs.filter(r=>"failed"===r.status).length;return{total:runs.length,successful:successfulRuns,failed:failedRuns,errors:errorRuns,successRate:runs.length>0?Math.round(successfulRuns/runs.length*100):0}}],breadcrumbs:[s=>[s.evaluation],evaluation=>[{name:"LLM Analytics",path:urls.j.llmAnalyticsDashboard(),key:"LLMAnalytics",iconType:"llm_analytics"},{name:"Evaluations",path:urls.j.llmAnalyticsEvaluations(),key:"LLMAnalyticsEvaluations",iconType:"llm_analytics"},{name:evaluation?.name||"New Evaluation",key:"LLMAnalyticsEvaluationEdit"}]]}),(0,kea_router_lib.urlToAction)(_ref12=>{let{actions,props}=_ref12;return{"/llm-analytics/evaluations/:id":(_,__,___,_ref13)=>{let{method}=_ref13;"PUSH"===method&&(actions.loadEvaluation(),"new"!==props.evaluationId&&actions.loadEvaluationRuns())}}}),(0,index_esm.afterMount)(_ref14=>{let{actions,props}=_ref14;actions.loadEvaluation(),"new"!==props.evaluationId&&actions.loadEvaluationRuns()})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function EvaluationPromptEditor(){let{evaluation}=(0,index_esm.useValues)(llmEvaluationLogic),{setEvaluationPrompt}=(0,index_esm.useActions)(llmEvaluationLogic);if(!evaluation)return(0,jsx_runtime.jsx)("div",{children:"Loading..."});let prompt=evaluation.evaluation_config.prompt;return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(lib.Field,{name:"prompt",label:"Evaluation prompt",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(src._V,{value:prompt,onChange:setEvaluationPrompt,placeholder:"Write a prompt that evaluates the LLM generation and returns true or false. Example: Is this response helpful and accurate? Return true if yes, false if no.",rows:4,className:"font-mono text-sm",maxLength:2e3}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center text-sm text-muted",children:[(0,jsx_runtime.jsxs)("div",{children:[prompt.length,"/2000 characters"]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"Expected output:"}),(0,jsx_runtime.jsx)(src.oe,{type:"completion",children:"Boolean (true/false)"})]})]})]})}),prompt.length>0&&(0,jsx_runtime.jsxs)("div",{className:"bg-bg-light border rounded p-3",children:[(0,jsx_runtime.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Prompt guidelines:"}),(0,jsx_runtime.jsxs)("ul",{className:"text-sm text-muted space-y-1 list-disc list-inside",children:[(0,jsx_runtime.jsx)("li",{children:"Be specific about what you want to evaluate"}),(0,jsx_runtime.jsxs)("li",{children:["Clearly instruct to return ",(0,jsx_runtime.jsx)("code",{children:"true"})," or ",(0,jsx_runtime.jsx)("code",{children:"false"})]}),(0,jsx_runtime.jsx)("li",{children:"Consider the context: input prompt, model output"}),(0,jsx_runtime.jsx)("li",{children:"Keep it concise but comprehensive"})]})]})]})}var TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx");function EvaluationRunsTable(){let{evaluationRuns,evaluationRunsLoading}=(0,index_esm.useValues)(llmEvaluationLogic),{refreshEvaluationRuns}=(0,index_esm.useActions)(llmEvaluationLogic),columns=[{title:"Timestamp",key:"timestamp",render:(_,run)=>(0,jsx_runtime.jsx)(TZLabel.w,{time:run.timestamp}),sorter:(a,b)=>new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime()},{title:"Generation ID",key:"generation_id",render:(_,run)=>(0,jsx_runtime.jsx)("div",{className:"font-mono text-sm",children:(0,jsx_runtime.jsxs)(src.rU,{to:urls.j.llmAnalyticsTrace(run.trace_id,{event:run.generation_id}),className:"text-primary",children:[run.generation_id.slice(0,12),"..."]})})},{title:"Result",key:"result",render:(_,run)=>"failed"===run.status?(0,jsx_runtime.jsx)(src.oe,{type:"danger",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconWarning,{}),children:"Error"}):"running"===run.status?(0,jsx_runtime.jsx)(src.oe,{type:"primary",children:"Running..."}):(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:run.result?(0,jsx_runtime.jsx)(src.oe,{type:"success",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconCheck,{}),children:"True"}):(0,jsx_runtime.jsx)(src.oe,{type:"danger",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconX,{}),children:"False"})}),sorter:(a,b)=>"completed"!==a.status||"completed"!==b.status?a.status.localeCompare(b.status):Number(b.result)-Number(a.result)},{title:"Reasoning",key:"reasoning",render:(_,run)=>(0,jsx_runtime.jsx)("div",{className:"max-w-md",children:(0,jsx_runtime.jsx)("div",{className:"text-sm text-default line-clamp-2",children:run.reasoning})})},{title:"Status",key:"status",render:(_,run)=>{let status={completed:{type:"success",text:"Completed"},failed:{type:"danger",text:"Failed"},running:{type:"primary",text:"Running"}}[run.status];return(0,jsx_runtime.jsx)(src.oe,{type:status.type,children:status.text})}}];return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-end",children:(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconRefresh,{}),onClick:refreshEvaluationRuns,loading:evaluationRunsLoading,size:"small",children:"Refresh"})}),(0,jsx_runtime.jsx)(src.g3,{columns:columns,dataSource:evaluationRuns,loading:evaluationRunsLoading,rowKey:"id",pagination:{pageSize:20},emptyState:(0,jsx_runtime.jsxs)("div",{className:"text-center py-8",children:[(0,jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"No evaluation runs yet"}),(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted",children:"Runs will appear here once this evaluation starts executing based on your triggers."})]})})]})}var PropertyFilters=__webpack_require__("../../frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),types=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),LemonSlider=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSlider/index.ts");function EvaluationTriggers(){let{evaluation}=(0,index_esm.useValues)(llmEvaluationLogic),{setTriggerConditions}=(0,index_esm.useActions)(llmEvaluationLogic);if(!evaluation)return(0,jsx_runtime.jsx)("div",{children:"Loading..."});let updateConditionSet=(index,updates)=>{setTriggerConditions(evaluation.conditions.map((condition,i)=>i===index?{...condition,...updates}:condition))},removeConditionSet=index=>{1!==evaluation.conditions.length&&setTriggerConditions(evaluation.conditions.filter((_,i)=>i!==index))},duplicateConditionSet=index=>{let duplicatedCondition={...evaluation.conditions[index],id:`cond-${Date.now()}`},updatedConditions=[...evaluation.conditions];updatedConditions.splice(index+1,0,duplicatedCondition),setTriggerConditions(updatedConditions)};return(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted",children:"Each condition set below defines when this evaluation should trigger. If multiple condition sets exist, the evaluation will trigger if ANY of them match (OR logic)."}),evaluation.conditions.map((condition,index)=>(0,jsx_runtime.jsxs)("div",{className:"bg-bg-light border rounded p-4 space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsxs)("h4",{className:"font-semibold",children:["Condition set ",index+1]}),evaluation.conditions.length>1&&(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted",children:0===index?"IF":"OR IF"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1",children:[(0,jsx_runtime.jsx)(src.Jp,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconCopy,{}),size:"small",type:"secondary",onClick:()=>duplicateConditionSet(index),tooltip:"Duplicate condition set"}),evaluation.conditions.length>1&&(0,jsx_runtime.jsx)(src.Jp,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),size:"small",type:"secondary",status:"danger",onClick:()=>removeConditionSet(index),tooltip:"Remove condition set"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("label",{className:"block text-sm font-medium",children:"Sampling percentage"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-4 max-w-md",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1",children:(0,jsx_runtime.jsx)(LemonSlider.j,{value:condition.rollout_percentage,onChange:value=>updateConditionSet(index,{rollout_percentage:value}),min:.1,max:100,step:.1})}),(0,jsx_runtime.jsx)("div",{className:"w-20",children:(0,jsx_runtime.jsx)(src.DF,{type:"number",value:condition.rollout_percentage,onChange:value=>updateConditionSet(index,{rollout_percentage:Number(value)||.1}),min:.1,max:100,step:.1,suffix:(0,jsx_runtime.jsx)("span",{children:"%"})})})]}),(0,jsx_runtime.jsxs)("div",{className:"text-xs text-muted",children:["This evaluation will run on ",condition.rollout_percentage.toFixed(2),"% of matching generations"]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("label",{className:"block text-sm font-medium",children:"Generation properties"}),(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted mb-2",children:"Define which generation events should trigger this evaluation. Leave empty to match all generations."}),(0,jsx_runtime.jsx)(PropertyFilters.t,{propertyFilters:condition.properties,onChange:properties=>updateConditionSet(index,{properties}),pageKey:`evaluation-condition-${condition.id}`,taxonomicGroupTypes:[types.t.EventProperties,types.t.EventMetadata],addText:"Add generation property condition",hasRowOperator:!1,sendAllKeyUpdates:!0,allowRelativeDateOptions:!1})]})]},condition.id)),(0,jsx_runtime.jsx)("div",{className:"flex justify-center",children:(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),onClick:()=>{let newCondition={id:`cond-${Date.now()}`,rollout_percentage:100,properties:[]};setTriggerConditions([...evaluation.conditions,newCondition])},children:"Add Condition Set"})}),(0,jsx_runtime.jsxs)("div",{className:"bg-bg-light border rounded p-3 text-sm",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold mb-2",children:"Examples:"}),(0,jsx_runtime.jsxs)("ul",{className:"space-y-1 text-muted list-disc list-inside",children:[(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("strong",{children:"10% of all generations:"})," Set 10% sampling with no property conditions"]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("strong",{children:"5% of GPT-4 generations:"}),' Set 5% sampling with $ai_model_name = "gpt-4"']}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("strong",{children:"20% of custom property generations:"}),' Set 20% sampling with my_custom_property = "value"']}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("strong",{children:"High-cost generations:"})," Set 100% sampling with $ai_total_cost_usd > 0.01"]})]})]})]})}function LLMAnalyticsEvaluation(){let{evaluation,evaluationLoading,evaluationFormSubmitting,hasUnsavedChanges,formValid,isNewEvaluation,runsSummary}=(0,index_esm.useValues)(llmEvaluationLogic),{setEvaluationName,setEvaluationDescription,setEvaluationEnabled,saveEvaluation,resetEvaluation}=(0,index_esm.useActions)(llmEvaluationLogic),{push}=(0,index_esm.useActions)(kea_router_lib.router);return evaluationLoading?(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-96"}):evaluation?(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsx)(SceneBreadcrumbs.A,{}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-start pb-4 border-b",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h1",{className:"text-2xl font-semibold",children:isNewEvaluation?"New evaluation":evaluation.name}),(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:isNewEvaluation?(0,jsx_runtime.jsx)(src.oe,{type:"primary",children:"New"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.oe,{type:evaluation.enabled?"success":"default",children:evaluation.enabled?"Enabled":"Disabled"}),hasUnsavedChanges&&(0,jsx_runtime.jsx)(src.oe,{type:"warning",children:"Unsaved Changes"})]})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconArrowLeft,{}),onClick:()=>{hasUnsavedChanges&&resetEvaluation(),push(urls.j.llmAnalyticsEvaluations())},children:hasUnsavedChanges?"Cancel":"Back"}),(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:()=>{saveEvaluation()},disabled:!formValid,loading:evaluationFormSubmitting,children:isNewEvaluation?"Create Evaluation":"Save Changes"})]})]}),(0,jsx_runtime.jsx)("div",{className:"max-w-4xl",children:(0,jsx_runtime.jsxs)(lib.Form,{logic:llmEvaluationLogic,formKey:"evaluation",className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{className:"bg-bg-light border rounded p-6",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Basic information"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(lib.Field,{name:"name",label:"Name",children:(0,jsx_runtime.jsx)(src.DF,{value:evaluation.name,onChange:setEvaluationName,placeholder:"e.g., Helpfulness Check",maxLength:100})}),(0,jsx_runtime.jsx)(lib.Field,{name:"description",label:"Description (optional)",children:(0,jsx_runtime.jsx)(src._V,{value:evaluation.description||"",onChange:setEvaluationDescription,placeholder:"Describe what this evaluation checks for...",rows:2,maxLength:500})}),(0,jsx_runtime.jsx)(lib.Field,{name:"enabled",label:"Status",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(src.f4,{checked:evaluation.enabled,onChange:setEvaluationEnabled}),(0,jsx_runtime.jsx)("span",{children:evaluation.enabled?"Enabled":"Disabled"}),(0,jsx_runtime.jsx)("span",{className:"text-muted text-sm",children:evaluation.enabled?"This evaluation will run automatically based on triggers":"This evaluation is paused and will not run"})]})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"bg-bg-light border rounded p-6",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Evaluation prompt"}),(0,jsx_runtime.jsx)(EvaluationPromptEditor,{})]}),(0,jsx_runtime.jsxs)("div",{className:"bg-bg-light border rounded p-6",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Triggers"}),(0,jsx_runtime.jsx)("p",{className:"text-muted text-sm mb-4",children:"Configure when this evaluation should run on your LLM generations."}),(0,jsx_runtime.jsx)(EvaluationTriggers,{})]})]})}),!isNewEvaluation&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.p2,{}),(0,jsx_runtime.jsxs)("div",{className:"max-w-6xl",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold",children:"Evaluation runs"}),(0,jsx_runtime.jsx)("p",{className:"text-muted text-sm",children:"History of when this evaluation has been executed."})]}),runsSummary&&(0,jsx_runtime.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold text-lg",children:runsSummary.total}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:"Total Runs"})]}),(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[(0,jsx_runtime.jsxs)("div",{className:"font-semibold text-lg text-success",children:[runsSummary.successRate,"%"]}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:"Success Rate"})]}),(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold text-lg text-danger",children:runsSummary.errors}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:"Errors"})]})]})]}),(0,jsx_runtime.jsx)(EvaluationRunsTable,{})]})]})]}):(0,jsx_runtime.jsx)(NotFound.T,{object:"evaluation"})}let scene={component:LLMAnalyticsEvaluation,logic:llmEvaluationLogic,paramsToProps:_ref=>{let{params:{id}}=_ref;return{evaluationId:id&&"new"!==id?id:"new"}}}}}]);