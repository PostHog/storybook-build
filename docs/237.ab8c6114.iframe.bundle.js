(window.webpackJsonp=window.webpackJsonp||[]).push([[237],{4341:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupsListLogic}));__webpack_require__(39),__webpack_require__(45),__webpack_require__(40),__webpack_require__(51);var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(68),__webpack_require__(11)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__),kea__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),lib_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20),lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(243),lib_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(29),scenes_urls__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(18),_models_groupsModel__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(122),groupsListLogic=Object(kea__WEBPACK_IMPORTED_MODULE_7__.kea)({path:["groups","groupsListLogic"],connect:{values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_11__.a,["currentTeamId"],_models_groupsModel__WEBPACK_IMPORTED_MODULE_13__.a,["groupTypes"],lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__.b,["groupsEnabled"]]},actions:function actions(){return{loadGroups:function loadGroups(url){return{url:url}},setTab:function setTab(tab){return{tab:tab}}}},loaders:function loaders(_ref){var _loadGroups,values=_ref.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:(_loadGroups=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function _callee(_ref2){var url;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(url=_ref2.url,!values.groupsEnabled){_context.next=6;break}return url=url||"api/projects/".concat(values.currentTeamId,"/groups/?group_type_index=").concat(values.currentTab),_context.next=5,lib_api__WEBPACK_IMPORTED_MODULE_8__.a.get(url);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}),_callee)}))),function loadGroups(_x){return _loadGroups.apply(this,arguments)})}]}},reducers:{currentTab:["-1",{setTab:function setTab(_,_ref3){return _ref3.tab}}]},selectors:{currentTabName:[function(s){return[s.currentTab,s.groupTypes]},function(currentTab,groupTypes){return"-1"===currentTab?"Persons":(null==groupTypes?void 0:groupTypes.length)?Object(lib_utils__WEBPACK_IMPORTED_MODULE_10__.h)(groupTypes[parseInt(currentTab)].group_type):""}],breadcrumbs:[function(s){return[s.currentTabName,s.currentTab]},function(currentTabName,currentTab){return[{name:currentTabName,path:scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.groups(currentTab)}]}]},actionToUrl:function actionToUrl(){return{setTab:function setTab(_ref4){var tab=_ref4.tab;return"-1"!==tab?scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.groups(tab):scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.persons()}}},urlToAction:function urlToAction(_ref5){var actions=_ref5.actions;return{"/groups/:id":function groupsId(_ref6){var id=_ref6.id;id&&(actions.setTab(id),actions.loadGroups())},"/persons":function persons(){actions.setTab("-1")}}}})},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonPageHeader}));var index_esm=__webpack_require__(1),PageHeader=__webpack_require__(344),react=__webpack_require__(0),react_default=__webpack_require__.n(react),tabs=(__webpack_require__(87),__webpack_require__(33),__webpack_require__(108),__webpack_require__(559)),groupsAccessLogic=__webpack_require__(243),utils=__webpack_require__(10),groupsModel=__webpack_require__(122),groupsListLogic=__webpack_require__(4341);function GroupsTabs(){var setTab=Object(index_esm.useActions)(groupsListLogic.a).setTab,currentTab=Object(index_esm.useValues)(groupsListLogic.a).currentTab,groupTypes=Object(index_esm.useValues)(groupsModel.a).groupTypes,groupsAccessStatus=Object(index_esm.useValues)(groupsAccessLogic.b).groupsAccessStatus,showGroupsIntroductionPage=[groupsAccessLogic.a.HasAccess,groupsAccessLogic.a.HasGroupTypes,groupsAccessLogic.a.NoAccess].includes(groupsAccessStatus);return react_default.a.createElement(tabs.a,{activeKey:currentTab,onChange:function onChange(activeKey){return setTab(activeKey)}},react_default.a.createElement(tabs.a.TabPane,{tab:"Persons",key:"-1"}),showGroupsIntroductionPage?react_default.a.createElement(tabs.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):groupTypes.map((function(groupType){return react_default.a.createElement(tabs.a.TabPane,{tab:Object(utils.h)(groupType.group_type),key:groupType.group_type_index})})))}function PersonPageHeader(_ref){var hideGroupTabs=_ref.hideGroupTabs,showGroupsOptions=Object(index_esm.useValues)(groupsModel.a).showGroupsOptions;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PageHeader.a,{title:"Persons".concat(showGroupsOptions?" & groups":""),caption:"A catalog of your product's end users".concat(showGroupsOptions?" and groups":"",".")}),!hideGroupTabs&&showGroupsOptions&&react_default.a.createElement(GroupsTabs,null))}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}},4471:function(module,exports,__webpack_require__){(exports=__webpack_require__(47)(!1)).push([module.i,'.mixin-gradient-overlay{width:100%;height:3rem;background:linear-gradient(0deg,#fff,transparent)}.mixin-gradient-overlay,.mixin-gradient-overlay-right{content:"";position:absolute;pointer-events:none;bottom:0}.mixin-gradient-overlay-right{width:3rem;height:100%;background:linear-gradient(270deg,#fff,transparent)}.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.groups-introduction{display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:16px}.groups-introduction h2{font-size:32px;font-weight:600;margin-bottom:8px}.groups-introduction h2 .highlight{font-weight:700}.groups-introduction .groups-introduction__subtext{max-width:500px;margin-bottom:16px}.groups-introduction .groups-introduction__action-button{min-width:300px;margin-bottom:8px}.groups-introduction .groups-introduction__action-button .LemonRow__content{justify-content:center}',""]),module.exports=exports},4719:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Groups",(function(){return Groups}));__webpack_require__(112),__webpack_require__(40),__webpack_require__(119);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),groupsListLogic=__webpack_require__(4341),PropertiesTable=__webpack_require__(705),PersonPageHeader=__webpack_require__(4360),TimezoneAware=__webpack_require__(310),LemonTable=__webpack_require__(346),Link=__webpack_require__(57),urls=__webpack_require__(18),icons=__webpack_require__(35),groupsAccessLogic=__webpack_require__(243),injectStylesIntoStyleTag=__webpack_require__(17),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),GroupsIntroduction=__webpack_require__(4471),GroupsIntroduction_default=__webpack_require__.n(GroupsIntroduction),options={insert:"head",singleton:!1},LemonButton=(injectStylesIntoStyleTag_default()(GroupsIntroduction_default.a,options),GroupsIntroduction_default.a.locals,__webpack_require__(92));function GroupsIntroduction_GroupsIntroduction(_ref){var title,subtext,primaryButton,secondaryButton,access=_ref.access,upgradeLink=Object(index_esm.useValues)(groupsAccessLogic.b).upgradeLink,upgradeButton=react_default.a.createElement(LemonButton.a,{to:upgradeLink,type:"primary","data-attr":"group-analytics-upgrade",className:"groups-introduction__action-button"},"Upgrade to get Group Analytics"),learnMoreButton=react_default.a.createElement(LemonButton.a,{type:access===groupsAccessLogic.a.HasAccess?"primary":void 0,to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",className:"groups-introduction__action-button"},"Learn how to track groups in PostHog ",react_default.a.createElement(icons.IconOpenInNew,{style:{marginLeft:8}}));return access===groupsAccessLogic.a.NoAccess?(title=react_default.a.createElement(react_default.a.Fragment,null,"Introducing ",react_default.a.createElement("span",{className:"highlight"},"Group Analytics"),"!"),subtext=react_default.a.createElement(react_default.a.Fragment,null,"Analyze how groups interact with your product as a whole instead of individual users (e.g. retention by companies instead of by users)"),primaryButton=upgradeButton,secondaryButton=learnMoreButton):access===groupsAccessLogic.a.HasAccess?(title=react_default.a.createElement(react_default.a.Fragment,null,"You're almost done!"),subtext=react_default.a.createElement(react_default.a.Fragment,null,"Learn how to track groups in your code"),primaryButton=learnMoreButton):(title=react_default.a.createElement(react_default.a.Fragment,null,"Looks like you're tracking groups!"),subtext=react_default.a.createElement(react_default.a.Fragment,null,"Upgrade today to use groups in Insights."),primaryButton=upgradeButton),react_default.a.createElement("div",{className:"groups-introduction"},react_default.a.createElement("h2",null,title),react_default.a.createElement("div",{className:"groups-introduction__subtext"},subtext),primaryButton,secondaryButton)}try{GroupsIntroduction_GroupsIntroduction.displayName="GroupsIntroduction",GroupsIntroduction_GroupsIntroduction.__docgenInfo={description:"",displayName:"GroupsIntroduction",props:{access:{defaultValue:null,description:"",name:"access",required:!0,type:{name:"enum",value:[{value:"1"},{value:"2"},{value:"3"}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"]={docgenInfo:GroupsIntroduction_GroupsIntroduction.__docgenInfo,name:"GroupsIntroduction",path:"frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"})}catch(__react_docgen_typescript_loader_error){}var GroupActorHeader=__webpack_require__(1142),scene={component:Groups,logic:groupsListLogic.a};function Groups(){var _useValues=Object(index_esm.useValues)(groupsListLogic.a),currentTabName=_useValues.currentTabName,groups=_useValues.groups,groupsLoading=_useValues.groupsLoading,loadGroups=Object(index_esm.useActions)(groupsListLogic.a).loadGroups,groupsAccessStatus=Object(index_esm.useValues)(groupsAccessLogic.b).groupsAccessStatus;if(groupsAccessStatus==groupsAccessLogic.a.HasAccess||groupsAccessStatus==groupsAccessLogic.a.HasGroupTypes||groupsAccessStatus==groupsAccessLogic.a.NoAccess)return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PersonPageHeader.a,null),react_default.a.createElement(GroupsIntroduction_GroupsIntroduction,{access:groupsAccessStatus}));var columns=[{title:currentTabName,key:"group_key",render:function Render(_,group){return react_default.a.createElement(Link.a,{to:urls.a.group(group.group_type_index.toString(),group.group_key)},Object(GroupActorHeader.b)(group.group_key,group.group_properties))}},{title:"First seen",key:"created_at",render:function Render(_,group){return react_default.a.createElement(TimezoneAware.b,{time:group.created_at})}}];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PersonPageHeader.a,null),react_default.a.createElement(LemonTable.a,{columns:columns,rowKey:"group_key",loading:groupsLoading,dataSource:groups.results,expandable:{expandedRowRender:function RenderPropertiesTable(_ref){var group_properties=_ref.group_properties;return react_default.a.createElement(PropertiesTable.a,{properties:group_properties})},rowExpandable:function rowExpandable(_ref2){var group_properties=_ref2.group_properties;return!!group_properties&&Object.keys(group_properties).length>0}},pagination:{controlled:!0,onBackward:groups.previous?function(){loadGroups(groups.previous),window.scrollTo(0,0)}:void 0,onForward:groups.next?function(){loadGroups(groups.next),window.scrollTo(0,0)}:void 0}}))}}}]);