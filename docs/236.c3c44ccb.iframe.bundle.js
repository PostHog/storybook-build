(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{"./frontend/src/scenes/groups/groupsListLogic.ts":function(R,c,e){"use strict";e.d(c,"a",function(){return H});var l=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=e.n(l),u=e("./node_modules/@babel/runtime/regenerator/index.js"),a=e.n(u),j=e("./node_modules/core-js/modules/es.array.iterator.js"),$=e.n(j),G=e("./node_modules/core-js/modules/es.object.to-string.js"),L=e.n(G),h=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),J=e.n(h),M=e("./node_modules/core-js/modules/es.array.concat.js"),K=e.n(M),F=e("./node_modules/kea/lib/index.esm.js"),g=e("./frontend/src/lib/api.ts"),O=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),p=e("./frontend/src/lib/utils.tsx"),S=e("./frontend/src/scenes/teamLogic.tsx"),P=e("./frontend/src/scenes/urls.ts"),U=e("./frontend/src/models/groupsModel.ts"),H=Object(F.kea)({path:["groups","groupsListLogic"],connect:{values:[S.a,["currentTeamId"],U.a,["groupTypes","aggregationLabel"],O.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(o){return{url:o}},setTab:function(o){return{tab:o}}}},loaders:function(r){var o=r.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var d=s()(a.a.mark(function b(A){var B;return a.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(B=A.url,!o.groupsEnabled){T.next=6;break}return B=B||"api/projects/".concat(o.currentTeamId,"/groups/?group_type_index=").concat(o.currentTab),T.next=5,g.b.get(B);case 5:return T.abrupt("return",T.sent);case 6:case"end":return T.stop()}},b)}));function y(b){return d.apply(this,arguments)}return y}()}]}},reducers:{currentTab:["-1",{setTab:function(r,o){var d=o.tab;return d}}]},selectors:{currentTabName:[function(n){return[n.currentTab,n.groupTypes,n.aggregationLabel]},function(n,r,o){return n==="-1"?"Persons":r!=null&&r.length?Object(p.j)(o(parseInt(n)).singular):""}],groupName:[function(n){return[n.currentTab,n.aggregationLabel]},function(n,r){return n==="-1"?{singular:"person",plural:"persons"}:r(parseInt(n))}],breadcrumbs:[function(n){return[n.currentTabName,n.currentTab]},function(n,r){return[{name:n,path:P.a.groups(r)}]}]},actionToUrl:function(){return{setTab:function(o){var d=o.tab;return d!=="-1"?P.a.groups(d):P.a.persons()}}},urlToAction:function(r){var o=r.actions,d=r.values;return{"/groups/:id":function(b){var A=b.id;A&&(o.setTab(A),o.loadGroups())},"/persons":function(){d.currentTab!=="-1"&&o.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(R,c,e){"use strict";e.d(c,"a",function(){return g});var l=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/lib/components/PageHeader.tsx"),u=e("./node_modules/react/index.js"),a=e.n(u),j=e("./node_modules/core-js/modules/es.array.includes.js"),$=e("./node_modules/core-js/modules/es.string.includes.js"),G=e("./node_modules/core-js/modules/es.array.map.js"),L=e("./node_modules/antd/es/tabs/index.js"),h=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),J=e("./frontend/src/lib/utils.tsx"),M=e("./frontend/src/models/groupsModel.ts"),K=e("./frontend/src/scenes/groups/groupsListLogic.ts");function F(){var O=Object(l.useActions)(K.a),p=O.setTab,S=Object(l.useValues)(K.a),P=S.currentTab,U=Object(l.useValues)(M.a),H=U.groupTypes,n=U.aggregationLabel,r=Object(l.useValues)(h.b),o=r.groupsAccessStatus,d=[h.a.HasAccess,h.a.HasGroupTypes,h.a.NoAccess].includes(o);return a.a.createElement(L.a,{activeKey:P,onChange:function(b){return p(b)}},a.a.createElement(L.a.TabPane,{tab:"Persons",key:"-1"}),d?a.a.createElement(L.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):H.map(function(y){return a.a.createElement(L.a.TabPane,{tab:Object(J.j)(n(y.group_type_index).plural),key:y.group_type_index})}))}function g(O){var p=O.hideGroupTabs,S=Object(l.useValues)(M.a),P=S.showGroupsOptions;return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{title:"Persons".concat(P?" & Groups":""),caption:"A catalog of your product's end users".concat(P?" and groups":"",".")}),!p&&P&&a.a.createElement(F,null))}try{g.displayName="PersonPageHeader",g.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:g.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(O){}},"./frontend/src/scenes/persons/Persons.scss":function(R,c,e){"use strict";var l=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(l),u=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),a=e.n(u),j={};j.insert="head",j.singleton=!1;var $=s()(a.a,j),G=a.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(R,c,e){"use strict";e.r(c),e.d(c,"scene",function(){return k}),e.d(c,"Persons",function(){return Y}),e.d(c,"PersonsScene",function(){return X});var l=e("./node_modules/react/index.js"),s=e.n(l),u=e("./node_modules/kea/lib/index.esm.js"),a=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),j=e.n(a),$=e("./node_modules/core-js/modules/es.array.concat.js"),G=e("./node_modules/core-js/modules/es.object.keys.js"),L=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),h=e("./frontend/src/lib/components/PropertiesTable.tsx"),J=e("./frontend/src/scenes/persons/Persons.scss"),M=e("./frontend/src/lib/components/CopyToClipboard.tsx"),K=e("./frontend/src/scenes/persons/PersonHeader.tsx"),F=e("./frontend/src/lib/components/LemonTable/index.ts");function g(t){var E=t.people,C=t.loading,N=C===void 0?!1:C,m=t.hasPrevious,I=t.hasNext,f=t.loadPrevious,_=t.loadNext,V=t.compact,W=[{title:"Person",key:"person",render:function(v,i){return s.a.createElement(K.a,{withIcon:!0,person:i})}},{title:"ID",key:"id",render:function(v,i){return s.a.createElement("div",{style:{overflow:"hidden"}},i.distinct_ids.length&&s.a.createElement(M.a,{explicitValue:i.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},i.distinct_ids[0]))}}].concat(j()(V?[]:[{title:"First seen",dataIndex:"created_at",render:function(v){return v?s.a.createElement(L.b,{time:v}):s.a.createElement(s.a.Fragment,null)}}]));return s.a.createElement(F.a,{columns:W,loading:N,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:I?function(){_==null||_(),window.scrollTo(0,0)}:void 0,onBackward:m?function(){f==null||f(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(v){var i=v.properties;return Object.keys(i).length?s.a.createElement(h.a,{properties:i}):"This person has no properties."}},dataSource:E,emptyState:"No persons",nouns:["person","persons"]})}try{g.displayName="PersonsTable",g.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:g.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(t){}var O=e("./node_modules/antd/es/popconfirm/index.js"),p=e("./frontend/src/scenes/persons/personsLogic.ts"),S=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),P=e.n(S),U=e("./node_modules/core-js/modules/es.regexp.exec.js"),H=e("./node_modules/core-js/modules/es.string.search.js"),n=e("./node_modules/antd/es/input/index.js"),r=e("./frontend/src/lib/components/LemonRow/index.ts"),o=e("./frontend/src/lib/components/icons.tsx"),d=function(E){var C=E.autoFocus,N=C===void 0?!0:C,m=Object(u.useActions)(p.a),I=m.loadPersons,f=m.setListFilters,_=Object(u.useValues)(p.a),V=_.listFilters,W=Object(l.useState)(""),x=P()(W,2),v=x[0],i=x[1];return Object(l.useEffect)(function(){i(V.search||"")},[]),s.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"min(100%, 24rem)"}},s.a.createElement(n.a.Search,{"data-attr":"persons-search",placeholder:"Search for persons",autoFocus:N,value:v,onChange:function(D){i(D.target.value)},enterButton:!0,onPressEnter:function(D){D.preventDefault(),f({search:v||void 0}),I()},allowClear:!0,onSearch:function(D){f({search:D||void 0}),I()},style:{width:"100%"}}),s.a.createElement(r.a,{className:"ml-05",type:"stealth",tooltip:s.a.createElement(s.a.Fragment,null,'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.'),icon:s.a.createElement(o.IconInfo,null)}))};try{d.displayName="PersonsSearch",d.__docgenInfo={description:"",displayName:"PersonsSearch",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"]={docgenInfo:d.__docgenInfo,name:"PersonsSearch",path:"frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"})}catch(t){}var y=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),b=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),A=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),B=e("./frontend/src/lib/components/LemonButton/index.ts"),Z=e("./frontend/src/lib/logic/featureFlagLogic.ts"),T=e("./frontend/src/lib/constants.tsx"),w=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),k={component:X,logic:p.a,paramsToProps:function(){return{syncWithUrl:!0}}};function Y(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=t.cohort;return s.a.createElement(u.BindLogic,{logic:p.a,props:{cohort:E,syncWithUrl:!E}},s.a.createElement(X,null))}function X(){var t=Object(u.useActions)(p.a),E=t.loadPersons,C=t.setListFilters,N=t.exportCsv,m=Object(u.useValues)(p.a),I=m.cohortId,f=m.persons,_=m.listFilters,V=m.personsLoading,W=m.exportUrl,x=m.exporterProps,v=m.apiDocsURL,i=Object(u.useValues)(Z.a),z=i.featureFlags,D=!!z[T.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS];return s.a.createElement("div",{className:"persons-list"},!I&&s.a.createElement(y.a,null),s.a.createElement("div",{className:"space-y-05"},s.a.createElement("div",{className:"space-between-items",style:{gap:"0.75rem"}},s.a.createElement(d,{autoFocus:!I}),W&&s.a.createElement(O.a,{placement:"topRight",title:s.a.createElement(s.a.Fragment,null,"Exporting by csv is limited to 10,000 users.",s.a.createElement("br",null),"To return more, please use ",s.a.createElement("a",{href:v},"the API"),". Do you want to export by CSV?"),onConfirm:function(){return D?Object(w.a)(x[0]):N()}},s.a.createElement(B.a,{type:"secondary",icon:s.a.createElement(o.IconExport,{style:{color:"var(--primary)"}})},_.properties&&_.properties.length>0?s.a.createElement("div",{style:{display:"block"}},"Export (",s.a.createElement("strong",null,_.properties.length)," filter)"):"Export"))),s.a.createElement(b.a,{pageKey:"persons-list-page",propertyFilters:_.properties,onChange:function(q){C({properties:q}),E()},endpoint:"person",taxonomicGroupTypes:[A.a.PersonProperties,A.a.Cohorts],showConditionBadge:!0}),s.a.createElement(g,{people:f.results,loading:V,hasPrevious:!!f.previous,hasNext:!!f.next,loadPrevious:function(){return E(f.previous)},loadNext:function(){return E(f.next)}})))}try{Y.displayName="Persons",Y.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:Y.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(t){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(R,c,e){var l=e("./node_modules/css-loader/dist/runtime/api.js");c=l(!1),c.push([R.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),R.exports=c}}]);
