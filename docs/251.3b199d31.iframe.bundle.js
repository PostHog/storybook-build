(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{"./frontend/src/lib/components/Table/utils.tsx":function(j,d,e){"use strict";e.d(d,"a",function(){return _});var L=e("./node_modules/react/index.js"),b=e.n(L),D=e("./frontend/src/lib/hooks/useWindowSize.js"),C=e("./frontend/src/lib/utils/responsiveUtils.tsx");function _(m){return b.a.createElement("span",{style:{whiteSpace:"nowrap"}},m)}var y=function(I){var A=Object(D.a)(),t=A.width,s=Object(C.b)(I),i=!!t&&t<=s;return{isTableScrolling:i,tableScrollBreakpoint:s,tableScrollX:i?"max-content":"".concat(s,"px")}};try{_.displayName="normalizeColumnTitle",_.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:_.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(m){}try{y.displayName="useIsTableScrolling",y.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:y.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(m){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(j,d,e){"use strict";e.r(d),e.d(d,"scene",function(){return k}),e.d(d,"FeatureFlags",function(){return K}),e.d(d,"groupFilters",function(){return T});var L=e("./node_modules/core-js/modules/es.array.includes.js"),b=e.n(L),D=e("./node_modules/core-js/modules/es.array.some.js"),C=e.n(D),_=e("./node_modules/core-js/modules/es.function.name.js"),y=e.n(_),m=e("./node_modules/core-js/modules/es.number.constructor.js"),I=e.n(m),A=e("./node_modules/react/index.js"),t=e.n(A),s=e("./node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),x=e("./node_modules/antd/es/input/index.js"),M=e("./node_modules/antd/es/tabs/index.js"),N=e("./frontend/src/lib/components/Link.tsx"),p=e("./frontend/src/lib/utils.tsx"),V=e("./frontend/src/lib/components/PageHeader.tsx"),z=e("./frontend/src/lib/components/Table/utils.tsx"),v=e("./frontend/src/scenes/urls.ts"),w=e("./frontend/src/lib/utils/stringWithWBR.tsx"),Y=e("./frontend/src/scenes/teamLogic.ts"),E=e("./frontend/src/lib/components/LemonButton/index.ts"),G=e("./frontend/src/lib/components/LemonRow/index.ts"),H=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),J=e("./frontend/src/lib/components/LemonTable/index.ts"),X=e("./frontend/src/lib/components/LemonButton/More.tsx"),R=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),S=e("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),B=e("./frontend/src/lib/logic/featureFlagLogic.ts"),W=e("./frontend/src/lib/constants.tsx"),$=e("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),Q=e("./frontend/src/scenes/feature-flags/activityDescriptions.tsx"),Z=e("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),k={component:K,logic:i.a};function F(){var o=Object(s.useValues)(Y.a),f=o.currentTeamId,a=Object(s.useValues)(i.a),g=a.featureFlagsLoading,c=a.searchedFeatureFlags,u=a.searchTerm,l=Object(s.useActions)(i.a),U=l.updateFeatureFlag,h=l.loadFeatureFlags,q=l.setSearchTerm,ee=Object(s.useValues)(B.a),te=ee.featureFlags,ne=te[W.h.FEATURE_FLAGS_ACTIVITY_LOG],ae=[{title:Object(z.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:function(r,n){return(r.key||"").localeCompare(n.key||"")},render:function(r,n){return t.a.createElement(t.a.Fragment,null,t.a.createElement(N.a,{to:n.id?v.a.featureFlag(n.id):void 0,className:"row-name"},Object(w.a)(n.key,17)),n.name&&t.a.createElement("span",{className:"row-description"},n.name))}},Object(R.b)(),Object(R.a)(),{title:"Rollout",width:200,render:function(r,n){return T(n.filters.groups)}},{title:"Status",dataIndex:"active",sorter:function(r,n){return Number(r.active)-Number(n.active)},width:100,render:function(r,n){var P="feature-flag-".concat(n.id,"-switch");return t.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},t.a.createElement("label",{htmlFor:P},n.active?"Enabled":"Disabled"),t.a.createElement(H.a,{id:P,checked:n.active,onChange:function(se){return n.id?U({id:n.id,payload:{active:se}}):null},style:{marginLeft:"0.5rem"}}))}},{width:0,render:function(r,n){return t.a.createElement(X.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(E.a,{type:"stealth",onClick:function(){Object(p.t)(n.key,"feature flag key")},fullWidth:!0},"Copy key"),n.id&&t.a.createElement(E.a,{type:"stealth",to:v.a.featureFlag(n.id),fullWidth:!0},"Edit"),t.a.createElement(E.a,{type:"stealth",to:v.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(n.key)}),"data-attr":"usage",fullWidth:!0},"Try out in Insights"),t.a.createElement(G.b,null),n.id&&t.a.createElement(E.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){Object(p.x)({endpoint:"projects/".concat(f,"/feature_flags"),object:{name:n.key,id:n.id},callback:h})},fullWidth:!0},"Delete feature flag"))})}}];return t.a.createElement(t.a.Fragment,null,t.a.createElement("div",null,t.a.createElement(x.a.Search,{placeholder:"Search for feature flags",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1,marginBottom:"1rem"},value:u,onChange:function(r){q(r.target.value)}}),!ne&&t.a.createElement("div",{className:"mb float-right"},t.a.createElement(E.a,{type:"primary",to:v.a.featureFlag("new"),"data-attr":"new-feature-flag"},"New feature flag"))),t.a.createElement(J.a,{dataSource:c,columns:ae,rowKey:"key",loading:g,defaultSorting:{columnKey:"key",order:1},pagination:{pageSize:100},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table"}))}function K(){var o=Object(s.useValues)(B.a),f=o.featureFlags,a=f[W.h.FEATURE_FLAGS_ACTIVITY_LOG],g=Object(s.useValues)(i.a),c=g.activeTab,u=Object(s.useActions)(i.a),l=u.setActiveTab;return t.a.createElement("div",{className:"feature_flags"},t.a.createElement(V.a,{title:"Feature Flags",caption:a?"":"Feature Flags are a way of turning functionality in your app on or off, based on user properties.",buttons:a?t.a.createElement(E.a,{type:"primary",to:v.a.featureFlag("new"),"data-attr":"new-feature-flag"},"New feature flag"):!1}),a?t.a.createElement(M.a,{activeKey:c,destroyInactiveTabPane:!0,onChange:function(h){return l(h)}},t.a.createElement(M.a.TabPane,{tab:"Overview",key:"overview"},t.a.createElement(F,null)),t.a.createElement(M.a.TabPane,{tab:"History",key:"history"},t.a.createElement($.a,{scope:Z.a.FEATURE_FLAG,describer:Q.b}))):t.a.createElement(F,null))}function T(o){if(o.length===0||!o.some(function(u){return u.rollout_percentage!==0}))return"No users";if(o.some(function(u){var l;return!(!((l=u.properties)===null||l===void 0)&&l.length)&&[null,void 0,100].includes(u.rollout_percentage)}))return"All users";if(o.length===1){var f=o[0],a=f.properties,g=f.rollout_percentage,c=g===void 0?null:g;return(a==null?void 0:a.length)>0&&c!=null?t.a.createElement("div",{style:{display:"flex",alignItems:"center"}},t.a.createElement("span",{style:{flexShrink:0,marginRight:5}},c,"% of"),t.a.createElement(S.a,{filters:a,style:{margin:0,width:"100%"}})):(a==null?void 0:a.length)>0?t.a.createElement(S.a,{filters:a,style:{margin:0}}):c!==null?"".concat(c,"% of all users"):(console.error("A group with full rollout was not detected early"),"All users")}return"".concat(o.length," groups")}try{T.displayName="groupFilters",T.__docgenInfo={description:"",displayName:"groupFilters",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:T.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(o){}}}]);
