(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{5766:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupsListLogic}));__webpack_require__(37),__webpack_require__(41),__webpack_require__(36),__webpack_require__(45);var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(65),__webpack_require__(12)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__),kea__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),lib_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(21),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(26),scenes_urls__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(24),_models_groupsModel__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(174),groupsListLogic=Object(kea__WEBPACK_IMPORTED_MODULE_7__.kea)({path:["groups","groupsListLogic"],connect:{values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_9__.a,["currentTeamId"],_models_groupsModel__WEBPACK_IMPORTED_MODULE_11__.a,["groupsEnabled","groupTypes"]]},actions:function actions(){return{loadGroups:function loadGroups(url){return{url:url}},setTab:function setTab(tab){return{tab:tab}}}},loaders:function loaders(_ref){var _loadGroups,values=_ref.values;return{groups:[{next_url:null,previous_url:null,results:[]},{loadGroups:(_loadGroups=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function _callee(_ref2){var url;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(url=_ref2.url,!values.groupsEnabled){_context.next=6;break}return url=url||"api/projects/".concat(values.currentTeamId,"/groups/?group_type_index=").concat(values.currentTab),_context.next=5,lib_api__WEBPACK_IMPORTED_MODULE_8__.a.get(url);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}),_callee)}))),function loadGroups(_x){return _loadGroups.apply(this,arguments)})}]}},reducers:{currentTab:["-1",{setTab:function setTab(_,_ref3){return _ref3.tab}}]},actionToUrl:function actionToUrl(){return{setTab:function setTab(_ref4){var tab=_ref4.tab;return"-1"!==tab?scenes_urls__WEBPACK_IMPORTED_MODULE_10__.a.groups(tab):scenes_urls__WEBPACK_IMPORTED_MODULE_10__.a.persons()}}},urlToAction:function urlToAction(_ref5){var actions=_ref5.actions;return{"/groups/:id":function groupsId(_ref6){var id=_ref6.id;id&&(actions.setTab(id),actions.loadGroups())}}}})},5770:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GroupsTabs}));__webpack_require__(34);var antd__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(536),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(11),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),_models_groupsModel__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(174),_groupsListLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5766);function GroupsTabs(){var setTab=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_6__.a).setTab,currentTab=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_6__.a).currentTab,groupTypes=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_models_groupsModel__WEBPACK_IMPORTED_MODULE_5__.a).groupTypes;return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__.a,{activeKey:currentTab,onChange:function onChange(activeKey){return setTab(activeKey)}},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__.a.TabPane,{tab:"Persons",key:"-1"}),groupTypes.map((function(groupType){return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__.a.TabPane,{tab:Object(lib_utils__WEBPACK_IMPORTED_MODULE_3__.i)(groupType.group_type),key:groupType.group_type_index})})))}},5941:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Groups",(function(){return Groups}));__webpack_require__(106);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),antd__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(114),kea__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),lib_components_ResizableTable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(587),lib_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11),_groupsListLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5766),_GroupsTabs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5770),_ant_design_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(712),_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(432),lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(680);function Groups(){var _useValues=Object(kea__WEBPACK_IMPORTED_MODULE_3__.useValues)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_6__.a),groups=_useValues.groups,groupsLoading=_useValues.groupsLoading,loadGroups=Object(kea__WEBPACK_IMPORTED_MODULE_3__.useActions)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_6__.a).loadGroups,columns=[{title:"Key",key:"group_key",span:8,render:function Render(group){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,group.group_key)}},{title:"Last updated",key:"created_at",span:8,render:function Render(group){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,Object(lib_utils__WEBPACK_IMPORTED_MODULE_5__.H)(group.created_at))}}];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_GroupsTabs__WEBPACK_IMPORTED_MODULE_7__.a,null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(lib_components_ResizableTable__WEBPACK_IMPORTED_MODULE_4__.b,{size:"small",columns:columns,rowKey:"group_key",loading:groupsLoading,dataSource:groups.results,expandable:{expandedRowRender:function RenderPropertiesTable(_ref){var group_properties=_ref.group_properties;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_10__.a,{properties:group_properties})},rowExpandable:function rowExpandable(_ref2){var group_properties=_ref2.group_properties;return!!group_properties&&Object.keys(group_properties).length>0}},pagination:!1}),(groups.previous_url||groups.next_url)&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:{margin:"3rem auto 10rem",width:200,display:"flex",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__.a,{type:"link",disabled:!groups.previous_url,onClick:function onClick(){loadGroups(groups.previous_url),window.scrollTo(0,0)}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_8__.a,null)," Previous"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__.a,{type:"link",disabled:!groups.next_url,onClick:function onClick(){loadGroups(groups.next_url),window.scrollTo(0,0)}},"Next ",react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__.a,null))))}}}]);