var ks=Object.defineProperty,Ms=Object.defineProperties;var Bs=Object.getOwnPropertyDescriptors;var Dt=Object.getOwnPropertySymbols;var Fn=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable;var En=(y,h,n)=>h in y?ks(y,h,{enumerable:!0,configurable:!0,writable:!0,value:n}):y[h]=n,K=(y,h)=>{for(var n in h||(h={}))Fn.call(h,n)&&En(y,n,h[n]);if(Dt)for(var n of Dt(h))Pn.call(h,n)&&En(y,n,h[n]);return y},ae=(y,h)=>Ms(y,Bs(h));var Cn=(y,h)=>{var n={};for(var f in y)Fn.call(y,f)&&h.indexOf(f)<0&&(n[f]=y[f]);if(y!=null&&Dt)for(var f of Dt(y))h.indexOf(f)<0&&Pn.call(y,f)&&(n[f]=y[f]);return n};var Je=(y,h,n)=>new Promise((f,l)=>{var M=x=>{try{N(n.next(x))}catch(I){l(I)}},V=x=>{try{N(n.throw(x))}catch(I){l(I)}},N=x=>x.done?f(x.value):Promise.resolve(x.value).then(M,V);N((n=n.apply(y,h)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[272],{"./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx":function(y,h,n){"use strict";n.d(h,"a",function(){return ee});var f=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),l=n.n(f),M=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),V=n("./frontend/src/lib/components/LemonButton/index.ts"),N=n("./frontend/src/lib/components/LemonDivider/index.ts"),x=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),I=n.n(x);function ee(re){let{item:D,onComplete:L,onClose:J}=re;const[de,oe]=Object(f.useState)(D.alias),[w,_]=Object(f.useState)(D.regex);return Object(x.jsxs)("div",{className:"px-2",children:[Object(x.jsx)("b",{children:"New Wildcard"}),Object(x.jsx)(N.a,{}),Object(x.jsxs)("div",{className:"space-y-2",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{children:"Alias"}),Object(x.jsx)(M.a,{defaultValue:de,onChange:F=>oe(F),onPressEnter:()=>!1})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{children:"Regex"}),Object(x.jsx)(M.a,{defaultValue:w,onChange:F=>_(F),onPressEnter:()=>!1}),Object(x.jsxs)("div",{className:"text-muted",style:{marginBottom:12},children:["For example: ",Object(x.jsx)("code",{children:"\\/merchant\\/\\d+\\/dashboard$"})]})]})]}),Object(x.jsxs)("div",{className:"flex justify-end gap-2",children:[Object(x.jsx)(V.a,{type:"secondary",onClick:J,children:"Cancel"}),Object(x.jsx)(V.a,{type:"primary",onClick:()=>L({alias:de,regex:w}),children:"Save"})]})]})}try{ee.displayName="PathRegexPopup",ee.__docgenInfo={description:"",displayName:"PathRegexPopup",props:{onComplete:{defaultValue:null,description:"",name:"onComplete",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"]={docgenInfo:ee.__docgenInfo,name:"PathRegexPopup",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"})}catch(re){}},"./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx":function(y,h,n){"use strict";n.d(h,"a",function(){return x});var f=n("./frontend/src/scenes/actions/Actions.scss"),l=n("./frontend/src/lib/components/PropertyFilters/components/FilterRow.tsx"),M=n("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx"),V=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),N=n.n(V);function x(I){let{pageKey:ee,onChange:re,onRemove:D,pathCleaningFilters:L,showConditionBadge:J=!1,disablePopover:de=!1}=I;return Object(V.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:L.length>0&&L.map((oe,w)=>Object(V.jsx)(l.a,{item:oe,index:w,totalCount:L.length-1,filters:L,pageKey:ee,showConditionBadge:J,disablePopover:de,label:"Add rule",onRemove:D,filterComponent:_=>Object(V.jsx)(M.a,{item:oe,onClose:_,onComplete:F=>{re(F),_()}})},w))})}try{x.displayName="PathCleanFilters",x.__docgenInfo={description:"",displayName:"PathCleanFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(index: number) => void"}},pathCleaningFilters:{defaultValue:null,description:"",name:"pathCleaningFilters",required:!0,type:{name:"Record<string, any>[]"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},showConditionBadge:{defaultValue:{value:"false"},description:"",name:"showConditionBadge",required:!1,type:{name:"boolean"}},disablePopover:{defaultValue:{value:"false"},description:"",name:"disablePopover",required:!1,type:{name:"boolean"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"]={docgenInfo:x.__docgenInfo,name:"PathCleanFilters",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"})}catch(I){}},"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(y,h,n){"use strict";n.d(h,"a",function(){return k});var f=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),l=n("./frontend/src/lib/forms/Field.tsx"),M=n("./frontend/src/lib/components/LemonButton/index.ts"),V=n("./frontend/src/types.ts"),N=n("./frontend/src/lib/components/LemonSelect.tsx"),x=n("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),I=n("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),ee=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),re=n("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),D=n("./frontend/src/scenes/dashboard/DashboardCollaborators.tsx"),L=n("./frontend/src/lib/components/LemonModal/index.ts"),J=n("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),de=n.n(J),oe=n("./frontend/src/lib/logic/featureFlagLogic.ts"),w=n("./frontend/src/lib/constants.tsx"),_=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),F=n.n(_);function k(){const{hideNewDashboardModal:O,createAndGoToDashboard:v}=Object(f.useActions)(I.a),{isNewDashboardSubmitting:c,newDashboardModalVisible:E}=Object(f.useValues)(I.a),{featureFlags:T}=Object(f.useValues)(oe.a),z=!!T[w.i.WEBSITE_ANALYTICS_TEMPLATE],Z=[{value:"DEFAULT_APP",label:"Product analytics","data-attr":"dashboard-select-default-app"}];return z&&Z.push({value:"WEBSITE_TRAFFIC",label:"Website traffic","data-attr":"dashboard-select-wesbite-template"}),Object(_.jsx)(L.a,{title:"New dashboard",description:"Use dashboards to compose multiple insights into a single view.",onClose:O,isOpen:E,footer:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(M.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",disabled:c,onClick:O,children:"Cancel"}),Object(_.jsx)(M.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-submit-and-go",disabled:c,onClick:v,children:"Create and go to dashboard"}),Object(_.jsx)(M.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:c,disabled:c,children:"Create"})]}),children:Object(_.jsxs)(J.Form,{logic:I.a,formKey:"newDashboard",id:"new-dashboard-form",enableFormOnSubmit:!0,className:"space-y-2",children:[Object(_.jsx)(l.a,{name:"name",label:"Name",children:Object(_.jsx)(ee.a,{autoFocus:!0,"data-attr":"dashboard-name-input",className:"ph-ignore-input"})}),Object(_.jsx)(l.a,{name:"description",label:"Description",showOptional:!0,children:Object(_.jsx)(re.a,{"data-attr":"dashboard-description-input",className:"ph-ignore-input"})}),Object(_.jsx)(l.a,{name:"useTemplate",label:"Template",showOptional:!0,children:Object(_.jsx)(N.a,{placeholder:"Optionally start from template",allowClear:!0,options:Z,fullWidth:!0,"data-attr":"copy-from-template"})}),Object(_.jsx)(l.a,{name:"restrictionLevel",label:"Collaboration settings",children:Ce=>{let{value:Te,onChange:Ae}=Ce;return Object(_.jsx)(x.a,{feature:V.e.DASHBOARD_PERMISSIONING,children:Object(_.jsx)(N.a,{value:Te,onChange:Ae,options:D.a,fullWidth:!0})})}})]})})}},"./frontend/src/scenes/insights/InsightScene.tsx":function(y,h,n){"use strict";n.r(h),n.d(h,"InsightScene",function(){return Sn}),n.d(h,"scene",function(){return Ds});var f=n("./frontend/src/scenes/insights/insightSceneLogic.tsx"),l=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),M=n("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),V=n.n(M),N=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss"),x=n.n(N),I={};I.insert="head",I.singleton=!1;var ee=V()(x.a,I),re=x.a.locals||{},D=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),L=n("./frontend/src/scenes/insights/insightLogic.ts"),J=n("./frontend/src/lib/components/CommandPalette/commandPaletteLogic.ts"),de=n("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts"),oe=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),w=n("./frontend/src/lib/utils.tsx"),_=n("./frontend/src/scenes/insights/sharedUtils.ts"),F=n("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts");const k="insights",O=Object(l.kea)({props:{},key:Object(_.l)("new"),path:t=>["scenes","insights","insightCommandLogic",t],connect:t=>[J.a,Object(de.a)(t),Object(F.a)(t)],events:t=>{let{props:s}=t;return{afterMount:()=>{const i=[{key:"insight-graph",resolver:[{icon:oe.a,display:'Toggle "Compare Previous" on Graph',executor:()=>{Object(de.a)(s).actions.toggleCompare()}},...w.u.map(a=>{let{key:r,values:o}=a;return{icon:oe.a,display:`Set Time Range to ${r}`,executor:()=>{Object(F.a)(s).actions.setDates(o[0],o[1])}}})],scope:k}];for(const a of i)J.a.actions.registerCommand(a)},beforeUnmount:()=>{J.a.actions.deregisterScope(k)}}}});var v=n("./frontend/src/scenes/insights/insightDataLogic.ts"),c=n("./frontend/src/types.ts"),E=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/button/index.js"),T=n("./frontend/src/lib/constants.tsx"),z=n("./frontend/src/lib/logic/featureFlagLogic.ts"),Z=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Te=Ce,Ae=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),fe=function(s,i){return D.createElement(Ae.a,Object(Z.a)(Object(Z.a)({},s),{},{ref:i,icon:Te}))};fe.displayName="ArrowLeftOutlined";var te=D.forwardRef(fe),U=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Ne=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/experimental/NPSPrompt.scss"),De=n.n(Ne),Ie={};Ie.insert="head",Ie.singleton=!1;var B=V()(De.a,Ie),je=De.a.locals||{},ne=n("./node_modules/.pnpm/posthog-js@1.38.1/node_modules/posthog-js/dist/es.js"),pe=n.p+"images/nps.01f8251908e72335482be26ee661ccc7.svg",ve=n("./frontend/src/scenes/userLogic.ts"),Ve=n("./frontend/src/lib/dayjs.ts"),q=n("./frontend/@posthog/lemon-ui/src/index.ts"),e=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const Vt=1e4,kt=3500,Xe="experimental-nps-v8",Me=Object(l.kea)({path:["lib","experimental","NPSPrompt"],selectors:{featureFlagEnabled:[()=>[z.a.selectors.featureFlags],t=>t[T.i.NPS_PROMPT]],userIsOldEnough:[()=>[ve.a.selectors.user],t=>t&&Object(Ve.a)(t.date_joined).isBefore(Object(Ve.a)().add(-15,"day"))],npsPromptEnabled:[t=>[t.featureFlagEnabled,t.userIsOldEnough],(t,s)=>t&&s]},actions:{show:!0,hide:!0,setStep:t=>({step:t}),stepBack:!0,setPayload:t=>({payload:t}),submit:t=>({completed:t}),dismiss:!0,send:t=>({result:t})},reducers:{step:[0,{setStep:(t,s)=>{let{step:i}=s;return i},stepBack:t=>Math.max(t-1,0),submit:()=>3,setPayload:(t,s)=>{let{payload:i}=s;return t===0&&typeof(i==null?void 0:i.score)!="undefined"?1:t}}],hidden:[!0,{show:()=>!1,hide:()=>!0}],payload:[null,{setPayload:(t,s)=>{let{payload:i}=s;return K(K({},t),i)}}]},listeners:t=>{let{values:s,actions:i,cache:a}=t;return{stepBack:()=>{s.step===1&&i.setPayload(null)},dismiss:()=>{var r;const o=typeof((r=s.payload)===null||r===void 0?void 0:r.score)!="undefined"?"partial":"dismissed";i.hide(),i.send(o)},submit:r=>{let{completed:o}=r;const d=o?"completed":"partial";i.send(d),a.timeout=window.setTimeout(()=>i.hide(),kt)},send:r=>{let{result:o}=r;ne.a.capture("nps feedback",ae(K({},s.payload),{result:o})),ne.a.people.set({nps_2106:!0}),localStorage.setItem(Xe,"true")},show:()=>{ne.a.capture("nps modal shown")}}},events:t=>{let{actions:s,values:i,cache:a}=t;return{afterMount:()=>{i.npsPromptEnabled&&!localStorage.getItem(Xe)&&(a.timeout=window.setTimeout(()=>s.show(),Vt))},beforeUnmount:()=>{window.clearTimeout(a.timeout)}}}});function Be(){const{setStep:t,setPayload:s,stepBack:i,submit:a,dismiss:r}=Object(l.useActions)(Me),{step:o,payload:d,hidden:m,npsPromptEnabled:u}=Object(l.useValues)(Me);if(!u)return null;const p=Object(e.jsxs)("div",{className:"nps-header",children:[Object(e.jsx)("div",{className:"cursor-pointer",onClick:i,children:Object(e.jsx)(te,{})}),Object(e.jsx)("div",{className:"nps-progress",children:[0,1,2].map(g=>Object(e.jsx)("div",{className:`pg-item${g<=o?" completed":""}`},g))})]});return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:`nps-prompt${m?" hide":""}`,children:[Object(e.jsx)("span",{className:"nps-dismiss",onClick:r,children:Object(e.jsx)(U.a,{})}),Object(e.jsxs)("div",{className:"prompt-inner",children:[o===0&&Object(e.jsxs)("div",{"data-attr":"nps-step-0",children:[Object(e.jsx)("div",{className:"prompt-title",children:"Help us improve PostHog in less than 60 seconds \u{1F64F}"}),Object(e.jsx)("div",{className:"question",children:"How would you feel if you could no longer use PostHog?"}),Object(e.jsxs)("div",{className:"action-buttons",children:[Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>s({score:1}),children:"Not disappointed"}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>s({score:3}),children:"Somewhat disappointed"}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>s({score:5}),children:"Very disappointed"})]})]}),o===1&&Object(e.jsxs)("div",{"data-attr":"nps-step-1",children:[p,Object(e.jsx)("div",{className:"question",children:"What's the main reason behind this score?"}),Object(e.jsx)(q.LemonTextArea,{autoFocus:!0,placeholder:"You can describe the key benefits you get from PostHog, shortcomings or anything else...",value:(d==null?void 0:d.feedback_score)||"",onChange:g=>s({feedback_score:g}),onKeyDown:g=>g.key==="Enter"&&g.metaKey&&t(2)}),Object(e.jsxs)("div",{style:{textAlign:"left"},className:"mt-4",children:[Object(e.jsx)(E.a,{type:"link",style:{paddingLeft:0},onClick:()=>a(!1),children:"Finish"}),Object(e.jsx)(E.a,{style:{float:"right"},onClick:()=>t(2),children:"Continue"})]})]}),o===2&&Object(e.jsxs)("div",{"data-attr":"nps-step-2",children:[p,Object(e.jsx)("div",{className:"question",children:"Last one. What type of person or company do you think could benefit most from PostHog?"}),Object(e.jsx)(q.LemonTextArea,{autoFocus:!0,placeholder:"You can describe their role, background, company or team size, ...",value:(d==null?void 0:d.feedback_persona)||"",onChange:g=>s({feedback_persona:g}),onKeyDown:g=>g.key==="Enter"&&g.metaKey&&a(!0)}),Object(e.jsx)("div",{style:{textAlign:"left"},className:"mt-4",children:Object(e.jsx)(E.a,{style:{float:"right"},onClick:()=>a(!0),children:"Finish"})})]}),o===3&&Object(e.jsxs)("div",{"data-attr":"nps-step-2",style:{display:"flex",alignItems:"center"},children:[Object(e.jsx)("img",{src:pe,alt:"",height:40}),Object(e.jsx)("div",{className:"prompt-title",style:{margin:0},children:"Thanks for helping us improve PostHog!"})]})]})]})})}var Mt=n("./frontend/src/scenes/insights/InsightsNav.tsx"),ye=n("./frontend/src/lib/components/Tooltip.tsx"),me=n("./frontend/src/models/dashboardsModel.tsx"),se=n("./frontend/src/lib/utils/eventUsageLogic.ts"),le=n("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),Oe=n("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),he=n("./frontend/src/lib/components/lemonToast.tsx"),xe=n("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),ge=n("./frontend/src/scenes/urls.ts");const Ze=Object(l.kea)({path:["lib","components","AddToDashboard","saveToDashboardModalLogic"],props:{},key:t=>{let{insight:s}=t;if(!s.short_id)throw Error("must provide an insight with a short id");return s.short_id},connect:t=>({logic:[me.a],actions:[Object(L.c)({dashboardItemId:t.insight.short_id}),["updateInsight","updateInsightSuccess","updateInsightFailure"],se.e,["reportSavedInsightToDashboard","reportRemovedInsightFromDashboard","reportCreatedDashboardFromModal"],le.a,["showNewDashboardModal"]]}),actions:{addNewDashboard:!0,setDashboardId:t=>({id:t}),setSearchQuery:t=>({query:t}),setInsight:t=>({insight:t}),setScrollIndex:t=>({index:t}),addToDashboard:(t,s)=>({insight:t,dashboardId:s}),removeFromDashboard:(t,s)=>({insight:t,dashboardId:s})},reducers:{_dashboardId:[null,{setDashboardId:(t,s)=>{let{id:i}=s;return i}}],searchQuery:["",{setSearchQuery:(t,s)=>{let{query:i}=s;return i}}],scrollIndex:[-1,{setScrollIndex:(t,s)=>{let{index:i}=s;return i}}],dashboardWithActiveAPICall:[null,{addToDashboard:(t,s)=>{let{dashboardId:i}=s;return i},removeFromDashboard:(t,s)=>{let{dashboardId:i}=s;return i},updateInsightSuccess:()=>null,updateInsightFailure:()=>null}]},selectors:{dashboardId:[t=>[t._dashboardId,me.a.selectors.lastDashboardId,me.a.selectors.nameSortedDashboards,(s,i)=>i.fromDashboard],(t,s,i,a)=>t||a||s||(i.length>0?i[0].id:null)],dashboardsFuse:[()=>[me.a.selectors.nameSortedDashboards],t=>new Oe.a(t||[],{keys:["name","description","tags"],threshold:.3})],filteredDashboards:[t=>[t.searchQuery,t.dashboardsFuse,me.a.selectors.nameSortedDashboards],(t,s,i)=>t.length?s.search(t).map(a=>a.item):i],currentDashboards:[t=>[t.filteredDashboards,(s,i)=>i.insight],(t,s)=>t.filter(i=>{var a;return(a=s.dashboards)===null||a===void 0?void 0:a.includes(i.id)})],availableDashboards:[t=>[t.filteredDashboards,(s,i)=>i.insight],(t,s)=>t.filter(i=>{var a;return!((a=s.dashboards)!==null&&a!==void 0&&a.includes(i.id))})],orderedDashboards:[t=>[t.currentDashboards,t.availableDashboards],(t,s)=>[...t,...s]]},listeners:t=>{let{actions:s,values:i,props:a}=t;return{setDashboardId:r=>{let{id:o}=r;me.a.actions.setLastDashboardId(o)},addNewDashboard:()=>Je(this,null,function*(){s.showNewDashboardModal()}),[me.a.actionTypes.addDashboardSuccess]:r=>Je(this,null,function*(){let{dashboard:o}=r;s.reportCreatedDashboardFromModal(),s.setDashboardId(o.id),s.addToDashboard(a.insight,o.id),s.setScrollIndex(i.orderedDashboards.findIndex(d=>d.id===o.id))}),addToDashboard:r=>Je(this,null,function*(){let{insight:o,dashboardId:d}=r;s.updateInsight(ae(K({},o),{dashboards:[...o.dashboards||[],d]}),()=>{s.reportSavedInsightToDashboard(),me.a.actions.tileAddedToDashboard(d),he.d.success("Insight added to dashboard",{button:{label:"View dashboard",action:()=>xe.router.actions.push(ge.a.dashboard(d))}})})}),removeFromDashboard:r=>Je(this,null,function*(){let{insight:o,dashboardId:d}=r;s.updateInsight(ae(K({},o),{dashboards:(o.dashboards||[]).filter(m=>m!==d)}),()=>{s.reportRemovedInsightFromDashboard(),he.d.success("Insight removed from dashboard")})})}}});var Bt=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss"),et=n.n(Bt),Le={};Le.insert="head",Le.singleton=!1;var Ws=V()(et.a,Le),Gs=et.a.locals||{},ie=n("./frontend/src/lib/components/icons.tsx"),Tn=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),An=n("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/List/index.js"),In=n("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/AutoSizer/index.js"),H=n("./frontend/src/lib/components/LemonButton/index.ts"),on=n("./frontend/src/lib/components/Link.tsx"),We=n("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),Wt=n("./frontend/src/scenes/teamLogic.tsx"),Ln=n("./frontend/src/lib/components/LemonModal/index.ts");const wn=t=>{var s;let{style:i,isHighlighted:a,isAlreadyOnDashboard:r,dashboard:o,insight:d,canEditInsight:m}=t;const u=Ze({insight:d,fromDashboard:((s=d.dashboards)===null||s===void 0?void 0:s[0])||void 0}),{addToDashboard:p,removeFromDashboard:g}=Object(l.useActions)(u),{dashboardWithActiveAPICall:j}=Object(l.useValues)(u),{currentTeam:P}=Object(l.useValues)(Wt.a),R=o.id===(P==null?void 0:P.primary_dashboard);return Object(e.jsxs)("div",{"data-attr":"dashboard-list-item",style:i,className:Object(We.default)("flex items-center space-x-2",a&&"highlighted"),children:[Object(e.jsx)(on.a,{to:ge.a.dashboard(o.id),children:o.name||"Untitled"}),R&&Object(e.jsx)(ye.a,{title:"Primary dashboards are shown on the project home page",children:Object(e.jsx)(ie.IconCottage,{className:"text-warning text-base"})}),Object(e.jsx)("span",{className:"grow"}),Object(e.jsx)(H.a,{type:r?"primary":"secondary",loading:j===o.id,disabled:!!j||!m,size:"small",onClick:b=>{b.preventDefault(),r?g(d,o.id):p(d,o.id)},children:r?"Added":"Add to dashboard"})]})};function tt(t){var s,i,a;let{isOpen:r,closeModal:o,insight:d,canEditInsight:m}=t;const u=Ze({insight:d,fromDashboard:((s=d.dashboards)===null||s===void 0?void 0:s[0])||void 0}),{searchQuery:p,currentDashboards:g,orderedDashboards:j,scrollIndex:P}=Object(l.useValues)(u),{setSearchQuery:R,addNewDashboard:b}=Object(l.useActions)(u),Y=S=>{let{index:A,style:$}=S;return Object(e.jsx)(wn,{dashboard:j[A],insight:d,canEditInsight:m,isHighlighted:A===P,isAlreadyOnDashboard:g.some(G=>G.id===j[A].id),style:$},A)};return Object(e.jsx)(Ln.a,{onClose:o,isOpen:r,title:"Add to dashboard",footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"flex-1",children:Object(e.jsx)(H.a,{type:"secondary",onClick:b,disabled:!m,children:"Add to a new dashboard"})}),Object(e.jsx)(H.a,{type:"secondary",onClick:o,children:"Close"})]}),children:Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(Tn.a,{"data-attr":"dashboard-searchfield",type:"search",fullWidth:!0,placeholder:"Search for dashboards...",value:p,onChange:S=>R(S)}),Object(e.jsxs)("div",{className:"text-muted-alt",children:["This insight is referenced on ",Object(e.jsx)("strong",{className:"text-default",children:(i=d.dashboards)===null||i===void 0?void 0:i.length})," ",Object(w.tb)(((a=d.dashboards)===null||a===void 0?void 0:a.length)||0,"dashboard","dashboards",!1)]}),Object(e.jsx)("div",{style:{minHeight:420},children:Object(e.jsx)(In.a,{children:S=>{let{height:A,width:$}=S;return Object(e.jsx)(An.a,{width:$,height:A,rowCount:j.length,overscanRowCount:100,rowHeight:40,rowRenderer:Y,scrollToIndex:P})}})})]})})}try{tt.displayName="AddToDashboardModal",tt.__docgenInfo={description:"",displayName:"AddToDashboardModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},closeModal:{defaultValue:null,description:"",name:"closeModal",required:!0,type:{name:"() => void"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"]={docgenInfo:tt.__docgenInfo,name:"AddToDashboardModal",path:"frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"})}catch(t){}var Rn=n("./frontend/src/scenes/dashboard/NewDashboardModal.tsx");function nt(t){var s;let{insight:i,canEditInsight:a}=t;const[r,o]=Object(D.useState)(!1),{rawDashboards:d}=Object(l.useValues)(me.a),m=((s=i.dashboards)===null||s===void 0?void 0:s.map(u=>d[u]).filter(u=>!!u))||[];return Object(e.jsxs)("span",{className:"save-to-dashboard","data-attr":"save-to-dashboard-button",children:[Object(e.jsx)(tt,{isOpen:r,closeModal:()=>o(!1),insight:i,canEditInsight:a}),Object(e.jsx)(Rn.a,{}),Object(e.jsx)(H.a,{onClick:()=>o(!0),type:"secondary",icon:Object(e.jsx)(ie.IconWithCount,{count:m.length,showZero:!1,children:Object(e.jsx)(ie.IconGauge,{})}),children:"Add to dashboard"})]})}try{nt.displayName="AddToDashboard",nt.__docgenInfo={description:"",displayName:"AddToDashboard",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"]={docgenInfo:nt.__docgenInfo,name:"AddToDashboard",path:"frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"})}catch(t){}var Nn=n("./frontend/src/scenes/insights/InsightContainer.tsx"),ln=n("./frontend/src/lib/components/EditableField/EditableField.tsx"),dn=n("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx");function st(t){let{saveAs:s,saveInsight:i,isSaved:a,insightSaving:r,insightChanged:o,addingToDashboard:d}=t;const m=a&&!o,u=a&&!d;return Object(e.jsx)(H.c,{type:"primary",onClick:()=>i(!0),"data-attr":"insight-save-button",disabled:m,loading:!m&&r,sideAction:{popup:{placement:"bottom-end",overlay:Object(e.jsxs)(e.Fragment,{children:[!m&&Object(e.jsxs)(H.a,{onClick:()=>i(!1),"data-attr":"insight-save-and-continue",status:"stealth",fullWidth:!0,children:[d?"Save, add to dashboard":"Save"," & continue editing"]}),u&&Object(e.jsx)(H.a,{onClick:s,"data-attr":"insight-save-as-new-insight",status:"stealth",fullWidth:!0,children:"Save as\u2026"})]})},disabled:m&&!u,"data-attr":"insight-save-dropdown"},children:m?"No changes to be saved":d?"Save & add to dashboard":"Save"})}try{st.displayName="InsightSaveButton",st.__docgenInfo={description:"",displayName:"InsightSaveButton",props:{saveAs:{defaultValue:null,description:"",name:"saveAs",required:!0,type:{name:"() => void"}},saveInsight:{defaultValue:null,description:"",name:"saveInsight",required:!0,type:{name:"(redirectToViewMode?: boolean | undefined) => void"}},isSaved:{defaultValue:null,description:"",name:"isSaved",required:!0,type:{name:"boolean | undefined"}},insightSaving:{defaultValue:null,description:"",name:"insightSaving",required:!0,type:{name:"boolean"}},insightChanged:{defaultValue:null,description:"",name:"insightChanged",required:!0,type:{name:"boolean"}},addingToDashboard:{defaultValue:null,description:"",name:"addingToDashboard",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"]={docgenInfo:st.__docgenInfo,name:"InsightSaveButton",path:"frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"})}catch(t){}const Gt="<this_should_be_changed_when_in_use>",Dn=15e3,Vn=!0,Kt=[{title:"Experimentation is launching!",description:"Experimentation can help you test which product changes optimize your metrics. Give us feedback on your needs!"},{title:"Want to test product changes before shipping? \u{1F9EA}",description:"Our new A/B testing feature is launching soon and will let you seamlessly run experiments on your product. Interested?"},{title:"Introducing A/B testing \u{1F680}",description:"We are launching our A/B testing suite soon! Share your feedback, help us shape this new feature."}],cn=Object(l.kea)({path:["lib","experimental","FeedbackCallCTA"],selectors:{featureFlagGroup:[()=>[z.a.selectors.featureFlags],t=>t[Gt]],copy:[t=>[t.featureFlagGroup],t=>t==="control"?Kt[0]:t==="variant-0"?Kt[1]:t==="variant-1"?Kt[2]:null]},actions:{reportAndDismiss:t=>({result:t}),show:!0,hide:!0},reducers:{hidden:[!0,{show:()=>!1,hide:()=>!0}]},listeners:t=>{let{actions:s}=t;return{reportAndDismiss:i=>{let{result:a}=i;ne.a.capture("experimentation call prompt action",{result:a}),localStorage.setItem(Gt,"true"),s.hide(),a==="more-info"&&he.d.success("We'll be in touch via email in the next few days!")}}},events:t=>{let{actions:s,values:i,cache:a}=t;return{afterMount:()=>{i.featureFlagGroup&&!localStorage.getItem(Gt)&&(a.timeout=window.setTimeout(()=>s.show(),Dn))},beforeUnmount:()=>{window.clearTimeout(a.timeout)}}}});function kn(){const{hidden:t,copy:s}=Object(l.useValues)(cn),{reportAndDismiss:i}=Object(l.useActions)(cn);return Vn?null:Object(e.jsxs)("div",{className:`nps-prompt${t?" hide":""}`,children:[Object(e.jsx)("span",{className:"nps-dismiss",onClick:()=>i("dismiss"),children:Object(e.jsx)(U.a,{})}),s&&Object(e.jsxs)("div",{className:"prompt-inner",children:[Object(e.jsx)("div",{className:"prompt-title",children:s.title}),Object(e.jsx)("div",{className:"question",children:s.description}),Object(e.jsxs)("div",{className:"action-buttons",style:{width:240},children:[Object(e.jsx)("a",{href:"https://calendly.com/posthog-feedback",target:"_blank",rel:"noreferrer",onClick:()=>i("call"),children:Object(e.jsx)(E.a,{className:"prompt-button",children:"Schedule call with Eng Team"})}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>i("more-info"),children:"Send me more info"}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>i("not-interested"),children:"Not interested"})]})]})]})}var Mn=n("./frontend/src/lib/components/PageHeader.tsx"),zt=n("./frontend/src/scenes/insights/utils.tsx"),ke=n("./frontend/src/models/groupsModel.ts"),Bn=n("./frontend/src/models/cohortsModel.ts"),Wn=n("./frontend/src/scenes/trends/mathsLogic.tsx"),Ge=n("./frontend/src/lib/components/LemonSkeleton/index.tsx");function un(){return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"my-6 space-y-4",children:[Object(e.jsx)(Ge.a,{className:"w-1/4"}),Object(e.jsx)(Ge.a,{className:"w-1/2",repeat:3}),Object(e.jsx)(Ge.a,{}),Object(e.jsxs)("div",{className:"border rounded p-6 flex items-center gap-4",children:[Object(e.jsx)("div",{className:"flex-1 space-y-2",children:Object(e.jsx)(Ge.a.Row,{repeat:3})}),Object(e.jsx)("div",{className:"flex-1 space-y-2",children:Object(e.jsx)(Ge.a.Row,{repeat:3})})]}),Object(e.jsx)("div",{className:"border rounded p-6",style:{minHeight:600}})]})})}var Gn=n("./node_modules/.pnpm/react-transition-group@4.4.5_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-transition-group/esm/CSSTransition.js"),be=n("./frontend/src/scenes/trends/trendsLogic.ts"),Ke=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),we=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),W=n("./frontend/src/lib/components/TaxonomicFilter/types.ts");function it(t){let{insightProps:s}=t;const{setFilters:i}=Object(l.useActions)(Object(be.a)(s)),{filters:a,isFormulaOn:r}=Object(l.useValues)(Object(be.a)(s)),{groupsTaxonomicTypes:o}=Object(l.useValues)(ke.a),d=[W.a.EventProperties,W.a.PersonProperties,W.a.EventFeatureFlags,...o,W.a.Cohorts,W.a.Elements,...Object(_.j)(a)?[W.a.Sessions]:[]];return Object(e.jsxs)(e.Fragment,{children:[Object(_.f)(a)&&Object(e.jsxs)("div",{className:"mb-2",children:["Showing ",Object(e.jsx)("b",{children:"Unique users"})," who did"]}),Object(e.jsx)(Ke.a,{filters:a,setFilters:m=>i(m),typeKey:`trends_${c.F.TRENDS}`,buttonCopy:`Add graph ${r?"variable":"series"}`,showSeriesIndicator:!0,showNestedArrow:!0,entitiesLimit:Object(_.c)(a)&&a.display&&T.y.includes(a.display)&&!r||Object(_.f)(a)?1:w.c.length,mathAvailability:Object(_.f)(a)?we.b.None:Object(_.i)(a)?we.b.ActorsOnly:we.b.All,propertiesTaxonomicGroupTypes:d})]})}function at(t){let{insightProps:s}=t;const{filters:i,localFilters:a,isFormulaOn:r}=Object(l.useValues)(Object(be.a)(s)),{setIsFormulaOn:o}=Object(l.useActions)(Object(be.a)(s)),d=r&&Object(_.j)(i)&&!!i.display&&T.y.includes(i.display)&&a.length>1;return Object(e.jsxs)("div",{className:"flex items-center justify-between w-full",children:[Object(e.jsx)("span",{children:r?"Variables":"Series"}),Object(e.jsx)(ye.a,{title:d?"This chart type does not support multiple series, so in order to disable formula mode, remove variables or switch to a different chart type.":"Make your own formula the output of the insight with formula mode. Use graph series as variables.",children:Object(e.jsx)("div",{style:{margin:"-0.25rem 0"},children:Object(e.jsxs)(q.LemonButton,{size:"small",onClick:()=>o(!r),disabled:d,icon:Object(e.jsx)(ie.IconCalculate,{}),id:"trends-formula-switch",children:[r?"Disable":"Enable"," formula mode"]})})})]})}try{it.displayName="TrendsSeries",it.__docgenInfo={description:"",displayName:"TrendsSeries",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"]={docgenInfo:it.__docgenInfo,name:"TrendsSeries",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"})}catch(t){}try{at.displayName="TrendsSeriesLabel",at.__docgenInfo={description:"",displayName:"TrendsSeriesLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"]={docgenInfo:at.__docgenInfo,name:"TrendsSeriesLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"})}catch(t){}var Kn=n("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx");function rt(t){let{filters:s}=t;const{setFiltersMerge:i}=Object(l.useActions)(L.c),{allEventNames:a}=Object(l.useValues)(L.c),{groupsTaxonomicTypes:r}=Object(l.useValues)(ke.a),o=[W.a.EventProperties,W.a.PersonProperties,W.a.EventFeatureFlags,...r,W.a.Cohorts,W.a.Elements,...s.insight===c.F.TRENDS?[W.a.Sessions]:[]];return Object(e.jsx)(Kn.b,{noTitle:!0,value:Object(w.q)(s.properties),onChange:d=>i({properties:d}),taxonomicGroupTypes:o,pageKey:"insight-filters",eventNames:a,filters:s,setTestFilters:d=>i(d)})}try{rt.displayName="GlobalAndOrFilters",rt.__docgenInfo={description:"",displayName:"GlobalAndOrFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"]={docgenInfo:rt.__docgenInfo,name:"GlobalAndOrFilters",path:"frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"})}catch(t){}const zn=/^[a-zA-Z\ \-\*\^0-9\+\/\(\)\.]+$/;function ot(t){let{insightProps:s}=t;const{isFormulaOn:i,filters:a}=Object(l.useValues)(Object(be.a)(s)),r=Object(_.j)(a)?a.formula:null,{setFilters:o}=Object(l.useActions)(Object(be.a)(s)),[d,m]=Object(D.useState)(r);return Object(D.useEffect)(()=>{r&&m(r)},[r]),i?Object(e.jsx)("div",{className:"flex items-center gap-2",children:Object(e.jsx)(q.LemonInput,{className:"flex-1",placeholder:"Example: (A + B) / 100",autoFocus:!0,value:d,onChange:u=>{let p=u.toLocaleUpperCase();p=p.split("").filter(g=>zn.test(g)).join(""),m(p)},onBlur:u=>{var p;((p=u.relatedTarget)===null||p===void 0?void 0:p.id)!=="trends-formula-switch"&&d!==r&&o({formula:d})},onFocus:()=>{d&&d!==r&&o({formula:d})},onPressEnter:()=>{d!==r&&o({formula:d})}})}):null}function lt(t){let{insightProps:s}=t;const{isFormulaOn:i}=Object(l.useValues)(Object(be.a)(s));return i?Object(e.jsx)(e.Fragment,{children:"Formula"}):null}try{ot.displayName="TrendsFormula",ot.__docgenInfo={description:"",displayName:"TrendsFormula",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"]={docgenInfo:ot.__docgenInfo,name:"TrendsFormula",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"})}catch(t){}try{lt.displayName="TrendsFormulaLabel",lt.__docgenInfo={description:"",displayName:"TrendsFormulaLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"]={docgenInfo:lt.__docgenInfo,name:"TrendsFormulaLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"})}catch(t){}var Un=n("./frontend/src/scenes/insights/filters/BreakdownFilter/index.ts");function dt(t){let{filters:s}=t;const{setFiltersMerge:i}=Object(l.useActions)(L.c),{featureFlags:a}=Object(l.useValues)(z.a),r=s.insight!==c.F.TRENDS&&!!a[T.i.BREAKDOWN_BY_MULTIPLE_PROPERTIES];return Object(e.jsx)(Un.a,{filters:s,setFilters:i,useMultiBreakdown:r})}try{dt.displayName="Breakdown",dt.__docgenInfo={description:"",displayName:"Breakdown",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"]={docgenInfo:dt.__docgenInfo,name:"Breakdown",path:"frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"})}catch(t){}var Yn=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/checkbox/index.js"),Ut=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),$n=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss"),pn=n.n($n),Yt={};Yt.insert="head",Yt.singleton=!1;var Ks=V()(pn.a,Yt),zs=pn.a.locals||{};const qn=[{name:"new",tooltip:"Users who were first seen on this period and did the activity during the period."},{name:"returning",tooltip:"Users who did activity both this and previous period."},{name:"resurrecting",tooltip:"Users who did the activity this period but did not do the activity on the previous period (i.e. were inactive for 1 or more periods)."},{name:"dormant",tooltip:"Users who went dormant on this period, i.e. users who did not do the activity this period but did the activity on the previous period."}];function ct(t){let{insightProps:s}=t;const{toggleLifecycle:i}=Object(l.useActions)(Object(be.a)(s));return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:"LifecycleToggles",children:qn.map((a,r)=>Object(e.jsxs)("div",{children:[a.name," ",Object(e.jsxs)("div",{children:[Object(e.jsx)(Yn.a,{defaultChecked:!0,className:a.name,onChange:()=>i(a.name)}),Object(e.jsx)(ye.a,{title:a.tooltip,children:Object(e.jsx)(Ut.a,{className:"info-indicator"})})]})]},r))})})}try{ct.displayName="LifecycleToggles",ct.__docgenInfo={description:"",displayName:"LifecycleToggles",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"]={docgenInfo:ct.__docgenInfo,name:"LifecycleToggles",path:"frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"})}catch(t){}var Hn=n("./frontend/src/scenes/insights/filters/TestAccountFilter/index.ts");function ut(t){let{filters:s,insightProps:i}=t;const{setFilters:a}=Object(l.useActions)(Object(be.a)(i));return Object(e.jsx)(Hn.a,{filters:s,onChange:a})}try{ut.displayName="LifecycleGlobalFilters",ut.__docgenInfo={description:"",displayName:"LifecycleGlobalFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"]={docgenInfo:ut.__docgenInfo,name:"LifecycleGlobalFilters",path:"frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"})}catch(t){}var _e=n("./frontend/src/scenes/retention/retentionTableLogic.ts"),Se=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),Qn=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input/index.js"),Jn=n("./frontend/src/lib/introductions/groupsAccessLogic.ts"),Xn=n("./frontend/src/scenes/groups/GroupsIntroduction.tsx");const $t=-1;function ze(t){let{aggregationGroupTypeIndex:s,onChange:i}=t;const{groupTypes:a,aggregationLabel:r}=Object(l.useValues)(ke.a),{needsUpgradeForGroups:o,canStartUsingGroups:d}=Object(l.useValues)(Jn.b),m=[{title:"Event Aggregation",options:[{value:$t,label:"Unique users"}]}];return o||d?m[0].footer=Object(e.jsx)(Xn.a,{needsUpgrade:o}):a.forEach(u=>{m[0].options.push({value:u.group_type_index,label:`Unique ${r(u.group_type_index).plural}`})}),Object(e.jsx)(q.LemonSelect,{value:s===void 0?$t:s,onChange:u=>{u!==null&&i(u===$t?void 0:u)},"data-attr":"retention-aggregation-selector",dropdownMatchSelectWidth:!1,options:m})}try{ze.displayName="AggregationSelect",ze.__docgenInfo={description:"",displayName:"AggregationSelect",props:{aggregationGroupTypeIndex:{defaultValue:null,description:"",name:"aggregationGroupTypeIndex",required:!0,type:{name:"number | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(aggregationGroupTypeIndex: number | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"]={docgenInfo:ze.__docgenInfo,name:"AggregationSelect",path:"frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"})}catch(t){}function pt(t){var s,i;let{insightProps:a}=t;const{showGroupsOptions:r}=Object(l.useValues)(ke.a),{filters:o,actionFilterTargetEntity:d,actionFilterReturningEntity:m}=Object(l.useValues)(Object(_e.e)(a)),{setFilters:u}=Object(l.useActions)(Object(_e.e)(a));return Object(e.jsxs)("div",{className:"space-y-2","data-attr":"retention-summary",children:[Object(e.jsxs)("div",{children:["Show"," ",r?Object(e.jsx)(ze,{aggregationGroupTypeIndex:o.aggregation_group_type_index,onChange:p=>u({aggregation_group_type_index:p})}):Object(e.jsx)("b",{children:"Unique users"})," ","who performed event or action"]}),Object(e.jsxs)("div",{className:"flex items-center",children:[Object(e.jsx)(Ke.a,{entitiesLimit:1,mathAvailability:we.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:d,setFilters:p=>{p.events&&p.events.length>0?u({target_entity:p.events[0]}):p.actions&&p.actions.length>0?u({target_entity:p.actions[0]}):u({target_entity:void 0})},typeKey:"retention-table"}),Object(e.jsx)(Se.a,{value:o.retention_type?_e.d[o.retention_type]:void 0,onChange:p=>u({retention_type:p}),dropdownMatchSelectWidth:!1,children:Object.entries(_e.d).map(p=>{let[g,j]=p;return Object(e.jsxs)(Se.a.Option,{value:g,children:[j,Object(e.jsx)(ye.a,{placement:"right",title:_e.c[g],children:Object(e.jsx)(Ut.a,{className:"info-indicator"})})]},g)})})]}),Object(e.jsxs)("div",{children:["in the last"," ",Object(e.jsx)(Qn.a,{type:"tel",style:{width:80},value:String(((s=o.total_intervals)!==null&&s!==void 0?s:11)-1),onChange:p=>u({total_intervals:parseInt(p.target.value||"0")+1})})," ",Object(e.jsx)(Se.a,{value:o.period,onChange:p=>u({period:p}),dropdownMatchSelectWidth:!1,children:_e.b.map(p=>Object(e.jsx)(Se.a.Option,{value:p,children:_e.a[p]||p},p))})]}),Object(e.jsxs)("div",{children:["and then came back to perform event or action"," ",Object(e.jsx)("div",{className:"flex",children:Object(e.jsx)(Ke.a,{entitiesLimit:1,mathAvailability:we.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:m,setFilters:p=>{p.events&&p.events.length>0?u({returning_entity:p.events[0]}):p.actions&&p.actions.length>0?u({returning_entity:p.actions[0]}):u({returning_entity:void 0})},typeKey:"retention-table-returning"})}),"on any of the next ",_e.a[(i=o.period)!==null&&i!==void 0?i:"Day"]]}),Object(e.jsx)("div",{children:Object(e.jsxs)("p",{className:"text-muted mt-4",children:["Want to learn more about retention?"," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/features/retention?utm_campaign=learn-more-horizontal&utm_medium=in-product",target:"_blank",rel:"noopener",style:{display:"inline-flex",alignItems:"center"},children:["Go to docs",Object(e.jsx)(ie.IconOpenInNew,{style:{marginLeft:4}})]})]})})]})}try{pt.displayName="RetentionSummary",pt.__docgenInfo={description:"",displayName:"RetentionSummary",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"]={docgenInfo:pt.__docgenInfo,name:"RetentionSummary",path:"frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"})}catch(t){}var ce=n("./frontend/src/scenes/paths/pathsLogic.ts"),Zn=n("./frontend/src/lib/components/LemonCheckbox/index.ts");function mt(t){var s,i,a;let{insightProps:r}=t;const{filter:o}=Object(l.useValues)(Object(ce.b)(r)),{setFilter:d}=Object(l.useActions)(Object(ce.b)(r)),m=[{type:c.J.PageView,label:"Page views",selected:(s=o.include_event_types)===null||s===void 0?void 0:s.includes(c.J.PageView)},{type:c.J.Screen,label:"Screen views",selected:(i=o.include_event_types)===null||i===void 0?void 0:i.includes(c.J.Screen)},{type:c.J.CustomEvent,label:"Custom events",selected:(a=o.include_event_types)===null||a===void 0?void 0:a.includes(c.J.CustomEvent)}],u=g=>{o.include_event_types?o.include_event_types.includes(g)?d({include_event_types:o.include_event_types.filter(j=>j!==g)}):d({include_event_types:o.include_event_types?[...o.include_event_types,g]:[g]}):d({include_event_types:[g]})},p=Object(w.i)(Object(zt.h)(o).join(" & "));return Object(e.jsx)(H.b,{status:"stealth",fullWidth:!0,type:"secondary",popup:{sameWidth:!0,closeOnClickInside:!1,overlay:m.map(g=>{var j;return Object(e.jsxs)(H.a,{onClick:()=>u(g.type),status:"stealth",disabled:g.selected&&((j=o.include_event_types)===null||j===void 0?void 0:j.length)===1,fullWidth:!0,"data-attr":g["data-attr"],children:[Object(e.jsx)("span",{className:"pointer-events-none mr-2",children:Object(e.jsx)(Zn.a,{checked:g.selected})}),g.label]},g.type)}),actionable:!0},children:p})}try{mt.displayName="PathsEventTypes",mt.__docgenInfo={description:"",displayName:"PathsEventTypes",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsEventTypes.tsx#PathsEventTypes"]={docgenInfo:mt.__docgenInfo,name:"PathsEventTypes",path:"frontend/src/scenes/insights/EditorFilters/PathsEventTypes.tsx#PathsEventTypes"})}catch(t){}var es=n("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx");function ht(t){let{insightProps:s}=t;const{filter:i}=Object(l.useValues)(Object(ce.b)(s)),{setFilter:a}=Object(l.useActions)(Object(ce.b)(s));return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(es.a,{onChange:r=>a({path_groupings:r}),value:i.path_groupings||[],filterOption:!1,mode:"multiple-custom"})})}try{ht.displayName="PathsWildcardGroups",ht.__docgenInfo={description:"",displayName:"PathsWildcardGroups",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsWildcardGroups.tsx#PathsWildcardGroups"]={docgenInfo:ht.__docgenInfo,name:"PathsWildcardGroups",path:"frontend/src/scenes/insights/EditorFilters/PathsWildcardGroups.tsx#PathsWildcardGroups"})}catch(t){}var mn=n("./frontend/src/lib/components/Popup/Popup.tsx"),ts=n("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx");function Ue(t){let{pathItem:s,onChange:i,children:a,taxonomicGroupTypes:r,disabled:o,wildcardOptions:d}=t;const[m,u]=Object(D.useState)(!1);return Object(e.jsx)(mn.a,{visible:m,placement:"bottom-end",onClickOutside:()=>u(!1),overlay:Object(e.jsx)(ts.a,{value:s,onChange:(p,g)=>{i(g),u(!1)},taxonomicGroupTypes:r,optionsFromProp:{wildcard:d}}),children:Object(e.jsx)("div",{onClick:o?()=>{}:()=>u(!m),children:a})})}try{Ue.displayName="PathItemSelector",Ue.__docgenInfo={description:"",displayName:"PathItemSelector",props:{pathItem:{defaultValue:null,description:"",name:"pathItem",required:!0,type:{name:"TaxonomicFilterValue | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(item: string) => void"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!0,type:{name:"TaxonomicFilterGroupType[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},wildcardOptions:{defaultValue:null,description:"",name:"wildcardOptions",required:!1,type:{name:"SimpleOption[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/components/PathItemSelector.tsx#PathItemSelector"]={docgenInfo:Ue.__docgenInfo,name:"PathItemSelector",path:"frontend/src/lib/components/PropertyFilters/components/PathItemSelector.tsx#PathItemSelector"})}catch(t){}function gt(t){return Object(e.jsx)(Ye,K({position:"start"},t))}function ft(t){return Object(e.jsx)(Ye,K({position:"end"},t))}function Ye(t){let{insightProps:s,position:i}=t;const{filter:a,wildcards:r,taxonomicGroupTypes:o}=Object(l.useValues)(Object(ce.b)(s)),{setFilter:d}=Object(l.useActions)(Object(ce.b)(s)),m=a.funnel_paths&&[c.z.between,c.z.after].includes(a.funnel_paths),u=a.funnel_paths&&[c.z.between,c.z.before].includes(a.funnel_paths),p=m||u;function g(S,A){var $,G,X,C;const ue=(($=S.events)===null||$===void 0||(G=$.filter(Re=>Re.order===A-1))===null||G===void 0?void 0:G[0])||((X=S.actions)===null||X===void 0||(C=X.filter(Re=>Re.order===A-1))===null||C===void 0?void 0:C[0]);return(ue==null?void 0:ue.name)||""}function j(S,A){let $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return S&&A?Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(ie.IconFunnelVertical,{className:"text-2xl"}),Object(e.jsx)("span",{className:"label",children:`${A>0?"Funnel step "+(A+$):"Funnel dropoff "+A*-1}: ${g(S,A>0?A+$:A*-1)}`})]}):Object(e.jsx)("span",{})}function P(){if(a.funnel_paths)if(a.funnel_paths===c.z.after){var S;return j(a.funnel_filter,(S=a.funnel_filter)===null||S===void 0?void 0:S.funnel_step)}else if(a.funnel_paths===c.z.between){var A;return j(a.funnel_filter,(A=a.funnel_filter)===null||A===void 0?void 0:A.funnel_step,-1)}else return Object(e.jsx)("span",{});else return a.start_point?Object(e.jsx)("span",{className:"label",children:a.start_point}):Object(e.jsx)("span",{className:"label",style:{color:"var(--muted)"},children:"Add start point"})}function R(){if(a.funnel_paths)if(a.funnel_paths===c.z.before||a.funnel_paths===c.z.between){var S;return j(a.funnel_filter,(S=a.funnel_filter)===null||S===void 0?void 0:S.funnel_step)}else return Object(e.jsx)("span",{});else return a.end_point?Object(e.jsx)("span",{className:"label",children:a.end_point}):Object(e.jsx)("span",{className:"label",style:{color:"var(--muted)"},children:"Add end point"})}const b={start:{index:0,getLabel:P,setFilterKey:"start_point",pathItem:a.start_point,closeButtonEnabled:a.start_point||m,disabled:u&&!m,funnelFilterLink:a.funnel_filter&&m},end:{index:1,getLabel:R,setFilterKey:"end_point",pathItem:a.end_point,closeButtonEnabled:a.end_point||u,disabled:m&&!u,funnelFilterLink:a.funnel_filter&&u}}[i],Y=b.closeButtonEnabled?H.c:H.a;return Object(e.jsx)(Ue,{pathItem:b.pathItem,index:b.index,onChange:S=>d({[b.setFilterKey]:S}),taxonomicGroupTypes:o,disabled:p,wildcardOptions:r,children:Object(e.jsx)(Y,{"data-attr":"new-prop-filter-"+b.index,status:b.funnelFilterLink?"primary":"stealth",fullWidth:!0,className:"paths-endpoint-field",type:"secondary",active:p,disabled:b.disabled,onClick:b.funnelFilterLink?()=>{xe.router.actions.push(Object(xe.combineUrl)("/insights",Object(xe.encodeParams)(a.funnel_filter,"?")).url)}:()=>{},sideAction:{icon:Object(e.jsx)(ie.IconClose,{}),type:"tertiary",onClick:S=>{d({[b.setFilterKey]:void 0,funnel_filter:void 0,funnel_paths:void 0}),S.stopPropagation()}},children:b.getLabel()})})}try{gt.displayName="PathsTargetStart",gt.__docgenInfo={description:"",displayName:"PathsTargetStart",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetStart"]={docgenInfo:gt.__docgenInfo,name:"PathsTargetStart",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetStart"})}catch(t){}try{ft.displayName="PathsTargetEnd",ft.__docgenInfo={description:"",displayName:"PathsTargetEnd",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetEnd"]={docgenInfo:ft.__docgenInfo,name:"PathsTargetEnd",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetEnd"})}catch(t){}try{Ye.displayName="PathsTarget",Ye.__docgenInfo={description:"",displayName:"PathsTarget",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTarget"]={docgenInfo:Ye.__docgenInfo,name:"PathsTarget",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTarget"})}catch(t){}var ns=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),qt=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),ss=n("./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx"),is=n("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx");function as(){const[t,s]=Object(D.useState)(!1),{insightProps:i}=Object(l.useValues)(L.c),{filter:a}=Object(l.useValues)(Object(ce.b)(i)),{setFilter:r}=Object(l.useActions)(Object(ce.b)(i)),{currentTeam:o}=Object(l.useValues)(Wt.a),d=((o==null?void 0:o.path_cleaning_filters)||[]).length>0;return Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(ss.a,{pageKey:"pathcleanfilters-local",pathCleaningFilters:a.local_path_cleaning_filters||[],onChange:m=>{r({local_path_cleaning_filters:[...a.local_path_cleaning_filters||[],m]})},onRemove:m=>{const u=(a.local_path_cleaning_filters||[]).filter((p,g)=>g!==m);r({local_path_cleaning_filters:u})}}),Object(e.jsx)(mn.a,{visible:t,placement:"top-end",fallbackPlacements:["top-start"],onClickOutside:()=>s(!1),overlay:Object(e.jsx)(is.a,{item:{},onClose:()=>s(!1),onComplete:m=>{r({local_path_cleaning_filters:[...a.local_path_cleaning_filters||[],m]}),s(!1)}}),children:Object(e.jsx)(q.LemonButton,{onClick:()=>s(!t),className:"new-prop-filter","data-attr":"new-prop-filter-pathcleanfilters-local",type:"secondary",icon:Object(e.jsx)(ie.IconPlus,{}),size:"small",children:"Add Rule"})}),Object(e.jsx)(ye.a,{title:d?"Clean paths based using regex replacement.":"You don't have path cleaning filters. Click the gear icon to configure it.",children:Object(e.jsx)(q.LemonSwitch,{disabled:!d,checked:d&&a.path_replacements||!1,onChange:m=>{localStorage.setItem("default_path_clean_filters",m.toString()),r({path_replacements:m})},label:"Apply global path URL cleaning",bordered:!0})})]})}var bt=n("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx");function jt(t){let{insightProps:s}=t;const{filter:i}=Object(l.useValues)(Object(ce.b)(s)),{setFilter:a}=Object(l.useActions)(Object(ce.b)(s)),[r,o]=Object(D.useState)({edge_limit:i.edge_limit,min_edge_weight:i.min_edge_weight,max_edge_weight:i.max_edge_weight}),d=()=>{(r.edge_limit!==i.edge_limit||r.min_edge_weight!==i.min_edge_weight||r.max_edge_weight!==i.max_edge_weight)&&a(K({},r))};return Object(e.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(e.jsx)(bt.a,{info:"Determines the maximum number of path nodes that can be generated. If necessary certain items will be grouped.",children:"Maximum number of paths"}),Object(e.jsx)(qt.a,{min:0,max:1e3,defaultValue:50,onChange:m=>o(u=>ae(K({},u),{edge_limit:Number(m)})),onBlur:d,onPressEnter:d}),Object(e.jsx)(bt.a,{info:"Determines the minimum and maximum number of persons in each path. Helps adjust the density of the visualization.",children:"Number of people on each path"}),Object(e.jsxs)("div",{children:["between"," ",Object(e.jsx)(qt.a,{min:0,max:1e5,onChange:m=>o(u=>ae(K({},u),{min_edge_weight:Number(m)})),onBlur:d,onPressEnter:d})," ","and"," ",Object(e.jsx)(qt.a,{onChange:m=>o(u=>ae(K({},u),{max_edge_weight:Number(m)})),min:0,max:1e5,onBlur:d,onPressEnter:d})]}),Object(e.jsxs)("div",{children:[Object(e.jsxs)("div",{className:"flex mb-2",children:[Object(e.jsx)(bt.a,{showOptional:!0,info:Object(e.jsx)(e.Fragment,{children:"Cleaning rules are an advanced feature that uses regex to normalize URLS for paths visualization. Rules can be set for all insights in the project settings, or they can be defined specifically for an insight."}),children:"Path Cleaning Rules"}),Object(e.jsxs)(on.a,{className:"grow-1 text-right",to:"/project/settings#path_cleaning_filtering",children:[Object(e.jsx)(ns.a,{})," Configure Project Rules"]})]}),Object(e.jsx)(as,{})]})]})}try{jt.displayName="PathsAdvanced",jt.__docgenInfo={description:"",displayName:"PathsAdvanced",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsAdvanced.tsx#PathsAdvanced"]={docgenInfo:jt.__docgenInfo,name:"PathsAdvanced",path:"frontend/src/scenes/insights/EditorFilters/PathsAdvanced.tsx#PathsAdvanced"})}catch(t){}var Q=n("./frontend/src/scenes/funnels/funnelLogic.ts"),hn=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js"),rs=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js"),os=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),gn=n("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),fn=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/menu/index.js"),ls=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/dropdown/index.js"),ds=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss"),bn=n.n(ds),Ht={};Ht.insert="head",Ht.singleton=!1;var Us=V()(bn.a,Ht),Ys=bn.a.locals||{};function jn(t){let{icon:s,label:i,description:a,onClick:r}=t;return Object(e.jsxs)("div",{onClick:r,children:[Object(e.jsxs)("div",{className:"flex items-center text-sm font-medium gap-2",children:[s,Object(e.jsx)("div",{children:i})]}),a&&Object(e.jsx)("div",{className:"text-muted text-xs mt-1",children:a})]})}function vt(t){let{label:s,value:i,onValueChange:a,options:r,hideDescriptionOnDisplay:o,disabled:d,compact:m}=t;const u=r.find(g=>g.key===i),p=Object(e.jsx)(fn.a,{children:r.map(g=>{let b=g,{key:j,hidden:P}=b,R=Cn(b,["key","hidden"]);return P?null:Object(e.jsx)(fn.a.Item,{children:Object(e.jsx)(jn,ae(K({},R),{onClick:()=>a(j)}))},j)})});return Object(e.jsxs)(e.Fragment,{children:[s&&Object(e.jsx)("label",{className:"ant-form-item-label",children:s}),Object(e.jsx)(ls.a,{overlay:p,trigger:["click"],disabled:d,children:Object(e.jsxs)("div",{className:Object(We.default)("dropdown-selector",d&&" disabled",m&&"compact"),onClick:g=>g.preventDefault(),children:[Object(e.jsx)("div",{className:"grow",children:u&&Object(e.jsx)(jn,ae(K({},u),{onClick:()=>{},description:o?void 0:u.description}))}),Object(e.jsx)("div",{className:"dropdown-arrow",children:Object(e.jsx)(ie.IconArrowDropDown,{})})]})})]})}try{vt.displayName="DropdownSelector",vt.__docgenInfo={description:"",displayName:"DropdownSelector",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | null"}},onValueChange:{defaultValue:null,description:"",name:"onValueChange",required:!0,type:{name:"(value: string) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"DropdownOption[]"}},hideDescriptionOnDisplay:{defaultValue:null,description:"",name:"hideDescriptionOnDisplay",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"]={docgenInfo:vt.__docgenInfo,name:"DropdownSelector",path:"frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"})}catch(t){}const cs=()=>{};function yt(t){let{onChange:s=cs,disabled:i=!1,simpleMode:a}=t;const{insightProps:r}=Object(l.useValues)(L.c),{aggregationTargetLabel:o}=Object(l.useValues)(Object(Q.a)(r)),{chartFilter:d}=Object(l.useValues)(Object(gn.a)(r)),{setChartFilter:m}=Object(l.useActions)(Object(gn.a)(r)),u=c.B.Steps,p=[{key:c.B.Steps,label:"Conversion steps",description:`Track ${o.plural} progress between steps of the funnel`,icon:Object(e.jsx)(hn.a,{})},{key:c.B.TimeToConvert,label:"Time to convert",description:`Track how long it takes for ${o.plural} to convert`,icon:Object(e.jsx)(rs.a,{}),hidden:!1},{key:c.B.Trends,label:"Historical trends",description:"Track how this funnel's conversion rate is trending over time",icon:Object(e.jsx)(os.a,{}),hidden:!1}];if(p.filter(j=>!j.hidden).length<=1)return null;const g=Object(e.jsx)("div",{className:"funnel-chart-filter",children:Object(e.jsx)(vt,{options:p,value:d||u,onValueChange:j=>{const P=j;m(P),s(P)},disabled:i,hideDescriptionOnDisplay:!0,compact:a})});return a?g:Object(e.jsxs)("div",{children:[Object(e.jsx)("h4",{className:"secondary",children:"Graph Type"}),g]})}try{yt.displayName="ToggleButtonChartFilter",yt.__docgenInfo={description:"",displayName:"ToggleButtonChartFilter",props:{onChange:{defaultValue:{value:"(): void => {}"},description:"",name:"onChange",required:!1,type:{name:"((chartFilter: FunnelVizType) => void)"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},simpleMode:{defaultValue:null,description:"",name:"simpleMode",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"]={docgenInfo:yt.__docgenInfo,name:"ToggleButtonChartFilter",path:"frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"})}catch(t){}const Qt="funnels",vn=Object(l.kea)({path:["scenes","insights","InsightTabs","FunnelTab","funnelCommandLogic"],connect:[J.a],events:{afterMount:()=>{const t=[{icon:hn.a,display:"Clear Funnel",executor:()=>{var i;(i=Q.a.findMounted({syncWithUrl:!0}))===null||i===void 0||i.actions.clearFunnel()}}],s=[{key:Qt,resolver:t,scope:Qt}];for(const i of s)J.a.actions.registerCommand(i)},beforeUnmount:()=>{J.a.actions.deregisterScope(Qt)}}});var us=n("./node_modules/.pnpm/use-debounce@6.0.1_react@16.14.0/node_modules/use-debounce/esm/useDebouncedCallback.js");const yn={[c.w.Minute]:[1,1440],[c.w.Hour]:[1,24],[c.w.Day]:[1,365],[c.w.Week]:[1,53],[c.w.Month]:[1,12]};function ps(){var t;const{insightProps:s}=Object(l.useValues)(L.c),{conversionWindow:i,aggregationTargetLabel:a,filters:r}=Object(l.useValues)(Object(Q.a)(s)),{setFilters:o}=Object(l.useActions)(Object(Q.a)(s)),[d,m]=Object(D.useState)(i),u=Object.keys(yn).map(j=>{var P;return{label:Object(w.i)(Object(w.tb)((P=i.funnel_window_interval)!==null&&P!==void 0?P:7,j,`${j}s`,!1)),value:j}}),p=yn[(t=i.funnel_window_interval_unit)!==null&&t!==void 0?t:c.w.Day],g=Object(us.a)(()=>{(d.funnel_window_interval!==i.funnel_window_interval||d.funnel_window_interval_unit!==i.funnel_window_interval_unit)&&o(d)},200);return Object(e.jsxs)("div",{className:"flex items-center gap-2 ",children:[Object(e.jsxs)("span",{className:"whitespace-nowrap",children:["Conversion window limit"," ",Object(e.jsx)(ye.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("b",{children:"Recommended!"})," Limit to ",a.plural," ",r.aggregation_group_type_index!=null?"that":"who"," converted within a specific time frame. ",Object(w.i)(a.plural)," ",r.aggregation_group_type_index!=null?"that":"who"," do not convert in this time frame will be considered as drop-offs."]}),children:Object(e.jsx)(Ut.a,{className:"info-indicator"})})]}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(q.LemonInput,{type:"number",className:"max-w-20",fullWidth:!1,min:p[0],max:p[1],defaultValue:i.funnel_window_interval,value:d.funnel_window_interval,onChange:j=>{m(P=>ae(K({},P),{funnel_window_interval:Number(j)})),g()},onBlur:g,onPressEnter:g}),Object(e.jsx)(q.LemonSelect,{dropdownMatchSelectWidth:!1,value:d.funnel_window_interval_unit,onChange:j=>{j&&(m(P=>ae(K({},P),{funnel_window_interval_unit:j})),g())},options:u})]})]})}const ms=20;function Ot(t){let{insightProps:s}=t;const{isStepsEmpty:i,filterSteps:a,filters:r}=Object(l.useValues)(Object(Q.a)(s)),{setFilters:o}=Object(l.useActions)(Object(Q.a)(s)),{groupsTaxonomicTypes:d,showGroupsOptions:m}=Object(l.useValues)(ke.a);return Object(l.useMountedLogic)(vn),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex justify-between items-center",children:[Object(e.jsx)(bt.a,{children:"Query Steps"}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{className:"text-muted",children:"Graph type"}),Object(e.jsx)(yt,{simpleMode:!0})]})]}),Object(e.jsx)(Ke.a,{bordered:!0,filters:r,setFilters:o,typeKey:"EditFunnel-action",mathAvailability:we.b.None,hideDeleteBtn:a.length===1,buttonCopy:"Add step",showSeriesIndicator:!i,seriesIndicatorType:"numeric",entitiesLimit:ms,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[W.a.EventProperties,W.a.PersonProperties,W.a.EventFeatureFlags,...d,W.a.Cohorts,W.a.Elements]}),Object(e.jsxs)("div",{className:"mt-4 space-y-4",children:[m&&Object(e.jsxs)("div",{className:"flex items-center w-full gap-2",children:[Object(e.jsx)("span",{children:"Aggregating by"}),Object(e.jsx)(ze,{aggregationGroupTypeIndex:r.aggregation_group_type_index,onChange:u=>o({aggregation_group_type_index:u})})]}),Object(e.jsx)(ps,{})]})]})}try{Ot.displayName="FunnelsQuerySteps",Ot.__docgenInfo={description:"",displayName:"FunnelsQuerySteps",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"]={docgenInfo:Ot.__docgenInfo,name:"FunnelsQuerySteps",path:"frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"})}catch(t){}const hs=[{label:"Sequential",value:c.bb.ORDERED},{label:"Strict order",value:c.bb.STRICT},{label:"Any order",value:c.bb.UNORDERED}];function gs(){const{insightProps:t}=Object(l.useValues)(L.c),{filters:s}=Object(l.useValues)(Object(Q.a)(t)),{setFilters:i}=Object(l.useActions)(Object(Q.a)(t));return Object(e.jsx)(q.LemonSelect,{id:"funnel-step-order-filter","data-attr":"funnel-step-order-filter",value:s.funnel_order_type||c.bb.ORDERED,onChange:a=>a&&i({funnel_order_type:a}),dropdownMatchSelectWidth:!1,options:hs})}var Jt=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),On=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),fs=n("./node_modules/.pnpm/@react-hook+size@2.1.2_react@16.14.0/node_modules/@react-hook/size/dist/module/index.js");function bs(t){var s,i,a,r,o,d,m,u;let{filter:p,index:g,onClose:j,isVertical:P}=t;const{insightProps:R}=Object(l.useValues)(L.c),{filters:b,areFiltersValid:Y,numberOfSeries:S,exclusionDefaultStepRange:A}=Object(l.useValues)(Object(Q.a)(R)),{setOneEventExclusionFilter:$}=Object(l.useActions)(Object(Q.a)(R)),G={funnel_from_step:(s=(i=b.exclusions)===null||i===void 0||(a=i[g])===null||a===void 0?void 0:a.funnel_from_step)!==null&&s!==void 0?s:A.funnel_from_step,funnel_to_step:(r=(o=b.exclusions)===null||o===void 0||(d=o[g])===null||d===void 0?void 0:d.funnel_to_step)!==null&&r!==void 0?r:A.funnel_to_step},X=function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G.funnel_from_step,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G.funnel_to_step;$(ae(K({},p),{funnel_from_step:C,funnel_to_step:ue}),g)};return Object(e.jsxs)(Jt.a,{justify:"space-between",align:"middle",wrap:!1,style:{margin:`${P?4:0}px 0`,paddingLeft:4,width:P?"100%":"auto"},children:["between",Object(e.jsx)(Se.a,{defaultValue:0,disabled:!Y,dropdownMatchSelectWidth:!1,dropdownAlign:w.a.bottomRight,"data-attr":"funnel-exclusion-funnel_from_step-selector",optionLabelProp:"label",value:G.funnel_from_step,onChange:C=>X(C),onBlur:()=>X,style:{marginLeft:4,marginRight:4},children:Array.from(Array(S).keys()).slice(0,-1).map(C=>Object(e.jsxs)(Se.a.Option,{value:C,label:`Step ${C+1}`,children:["Step ",C+1]},C))}),"and",Object(e.jsx)(Se.a,{defaultValue:((m=G.funnel_from_step)!==null&&m!==void 0?m:0)+1,disabled:!Y,dropdownMatchSelectWidth:!1,dropdownAlign:w.a.bottomRight,"data-attr":"funnel-exclusion-funnel_to_step-selector",optionLabelProp:"label",value:G.funnel_to_step,onChange:C=>X(G.funnel_from_step,C),onBlur:()=>X,style:{marginLeft:4},children:Array.from(Array(S).keys()).slice(((u=G.funnel_from_step)!==null&&u!==void 0?u:0)+1).map(C=>Object(e.jsxs)(Se.a.Option,{value:C,label:`Step ${C+1}`,children:["Step ",C+1]},C))}),Object(e.jsx)("div",{style:{flex:1}}),Object(e.jsx)(q.LemonButton,{icon:Object(e.jsx)(ie.IconDelete,{}),status:"primary-alt",onClick:j,"data-attr":"delete-prop-exclusion-filter",title:"Delete event exclusion series"})]})}function js(t){let{seriesIndicator:s,filter:i,suffix:a,isVertical:r}=t;return Object(e.jsxs)(Jt.a,{wrap:!1,align:r?"top":"middle",style:{width:"100%"},children:[Object(e.jsx)(On.a,{style:{padding:`${r?5:0}px 8px`},children:s}),Object(e.jsx)(On.a,{flex:"auto",children:Object(e.jsxs)(Jt.a,{align:"middle",wrap:r,children:[i,a]})})]})}function vs(){const{insightProps:t}=Object(l.useValues)(L.c),{exclusionFilters:s,areFiltersValid:i,exclusionDefaultStepRange:a}=Object(l.useValues)(Object(Q.a)(t)),{setEventExclusionFilters:r}=Object(l.useActions)(Object(Q.a)(t)),o=Object(D.useRef)(null),[d]=Object(fs.a)(o),m=!!d&&d<450;return Object(e.jsx)(Ke.a,{ref:o,setFilters:r,filters:s,typeKey:"funnel-exclusions-filter",addFilterDefaultOptions:K({id:"$pageview",name:"$pageview",type:c.p.EVENTS},a),disabled:!i,buttonCopy:"Add exclusion",actionsTaxonomicGroupTypes:[W.a.Events],mathAvailability:we.b.None,hideFilter:!0,hideRename:!0,hideDeleteBtn:!0,seriesIndicatorType:"alpha",renderRow:u=>Object(e.jsx)(js,ae(K({},u),{isVertical:m})),customRowSuffix:u=>Object(e.jsx)(bs,ae(K({},u),{isVertical:m}))})}function ys(){const{insightProps:t}=Object(l.useValues)(L.c),{stepReference:s}=Object(l.useValues)(Object(Q.a)(t)),{setStepReference:i}=Object(l.useActions)(Object(Q.a)(t)),a=[{value:c.A.total,label:"Overall conversion"},{value:c.A.previous,label:"Relative to previous step"}];return Object(e.jsx)(q.LemonSelect,{value:s||c.A.total,onChange:r=>r&&i(r),dropdownMatchSelectWidth:!1,"data-attr":"funnel-step-reference-selector",options:a})}var xt=n("./frontend/src/lib/forms/Field.tsx");function _t(t){let{filters:s,insightProps:i}=t;const{aggregationTargetLabel:a,advancedOptionsUsedCount:r}=Object(l.useValues)(Object(Q.a)(i)),{setFilters:o,setStepReference:d}=Object(l.useActions)(Object(Q.a)(i));return Object(l.useMountedLogic)(vn),Object(e.jsxs)("div",{className:"space-y-4",children:[Object(e.jsx)(xt.b,{label:"Step order",info:Object(e.jsxs)("ul",{className:"list-disc pl-4",children:[Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Sequential"})," - Step B must happen after Step A, but any number events can happen between A and B."]}),Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Strict order"})," - Step B must happen directly after Step A without any events in between."]}),Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Any order"})," - Steps can be completed in any sequence."]})]}),children:Object(e.jsx)(gs,{})}),Object(e.jsx)(xt.b,{label:"Conversion rate calculation",children:Object(e.jsx)(ys,{})}),Object(e.jsx)(xt.b,{label:"Exclusion steps",info:Object(e.jsxs)(e.Fragment,{children:["Exclude ",a.plural," ",s.aggregation_group_type_index!=null?"that":"who"," completed the specified event between two specific steps. Note that these ",a.plural," will be"," ",Object(e.jsx)("b",{children:"completely excluded from the entire funnel"}),"."]}),children:Object(e.jsx)(vs,{})}),!!r&&Object(e.jsx)("div",{className:"mt-4",children:Object(e.jsx)(H.a,{status:"danger",onClick:()=>{d(c.A.total),o({funnel_order_type:c.bb.ORDERED,exclusions:[]})},children:"Reset advanced options"})})]})}try{_t.displayName="FunnelsAdvanced",_t.__docgenInfo={description:"",displayName:"FunnelsAdvanced",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"]={docgenInfo:_t.__docgenInfo,name:"FunnelsAdvanced",path:"frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"})}catch(t){}var Xt=n("./frontend/src/lib/components/PropertyFilters/propertyFilterLogic.ts"),$s=n("./frontend/src/scenes/actions/Actions.scss"),Os=n("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function St(t){let{propertyFilters:s,onChange:i,pageKey:a,taxonomicGroupTypes:r,wildcardOptions:o}=t;const d={propertyFilters:s,onChange:i,pageKey:a},{filtersWithNew:m}=Object(l.useValues)(Object(Xt.a)(d)),{setFilter:u,remove:p,setFilters:g}=Object(l.useActions)(Object(Xt.a)(d));return Object(D.useEffect)(()=>{s&&!Object(w.qb)(s,m)&&g([...s,{}])},[s]),Object(e.jsx)(l.BindLogic,{logic:Xt.a,props:d,children:m==null?void 0:m.map((j,P)=>Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(Ue,{pathItem:j.value,onChange:R=>u(P,{key:R,value:R,type:c.N.Event}),index:P,taxonomicGroupTypes:r,wildcardOptions:o,children:j.value?Object(e.jsx)(Os.a,{item:j,onClose:()=>{p(P)},children:j.value.toString()}):Object(e.jsx)(q.LemonButton,{className:"new-prop-filter","data-attr":"new-prop-filter-"+a,type:"secondary",icon:Object(e.jsx)(ie.IconPlusMini,{color:"var(--primary)"}),children:"Add exclusion"})})},P))})}try{St.displayName="PathItemFilters",St.__docgenInfo={description:"",displayName:"PathItemFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},propertyFilters:{defaultValue:null,description:"",name:"propertyFilters",required:!1,type:{name:"AnyPropertyFilter[] | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(filters: AnyPropertyFilter[]) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!0,type:{name:"TaxonomicFilterGroupType[]"}},wildcardOptions:{defaultValue:null,description:"",name:"wildcardOptions",required:!1,type:{name:"SimpleOption[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/PathItemFilters.tsx#PathItemFilters"]={docgenInfo:St.__docgenInfo,name:"PathItemFilters",path:"frontend/src/lib/components/PropertyFilters/PathItemFilters.tsx#PathItemFilters"})}catch(t){}function Et(t){let{insightProps:s}=t;const{filter:i,wildcards:a}=Object(l.useValues)(Object(ce.b)(s)),{updateExclusions:r}=Object(l.useActions)(Object(ce.b)(s)),o=i.include_event_types?[...i.include_event_types.map(d=>d===c.J.Screen?W.a.Screens:d===c.J.CustomEvent?W.a.CustomEvents:W.a.PageviewUrls),W.a.Wildcards]:[W.a.Wildcards];return Object(e.jsx)(St,{taxonomicGroupTypes:o,pageKey:"exclusion",propertyFilters:i.exclude_events&&i.exclude_events.map(d=>({key:d,value:d,operator:void 0,type:c.N.Event})),onChange:d=>{const m=d.length>0?d.map(u=>u.value):d;r(m)},wildcardOptions:a})}try{Et.displayName="PathsExclusions",Et.__docgenInfo={description:"",displayName:"PathsExclusions",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsExclusions.tsx#PathsExclusions"]={docgenInfo:Et.__docgenInfo,name:"PathsExclusions",path:"frontend/src/scenes/insights/EditorFilters/PathsExclusions.tsx#PathsExclusions"})}catch(t){}var xs=n("./frontend/src/scenes/insights/utils/cleanFilters.ts"),qs=n("./frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.scss"),_s=n("./frontend/src/lib/components/LemonBadge/LemonBadge.tsx");function Ft(t){let{editorFilterGroup:s,insight:i,insightProps:a}=t;const{title:r,editorFilters:o,count:d,defaultExpanded:m=!0}=s,[u,p]=Object(D.useState)(m),{featureFlags:g}=Object(l.useValues)(z.a),j=g[T.i.INSIGHT_EDITOR_PANELS];return Object(e.jsxs)("div",{className:Object(We.default)("EditorFilterGroup",{"EditorFilterGroup--editorpanels":j}),children:[r&&Object(e.jsx)("div",{className:"EditorFilterGroup__title",children:Object(e.jsx)(H.a,{status:"stealth",fullWidth:!0,onClick:()=>p(!u),sideIcon:u?Object(e.jsx)(ie.IconUnfoldLess,{}):Object(e.jsx)(ie.IconUnfoldMore,{}),title:u?"Show less":"Show more","data-attr":"editor-filter-group-collapse-"+Object(w.Cb)(r),children:Object(e.jsxs)("div",{className:"flex items-center space-x-2 font-semibold",children:[Object(e.jsx)("span",{children:r}),Object(e.jsx)(_s.a.Number,{count:d||0})]})})}),!j||u?Object(e.jsx)("div",{className:"EditorFilterGroup__content",children:o.map(P=>{var R,b,Y;let{label:S,tooltip:A,showOptional:$,key:G,valueSelector:X,component:C}=P;const ue=typeof S=="function"||C?{insight:i,insightProps:a,filters:(R=i.filters)!==null&&R!==void 0?R:Object(xs.a)({}),value:(b=X?X(i):i==null||(Y=i.filters)===null||Y===void 0?void 0:Y[G])!==null&&b!==void 0?b:null}:null;return Object(e.jsx)("div",{children:Object(e.jsx)(xt.b,{label:typeof S=="function"?Object(e.jsx)(S,K({},ue)):S,info:A,showOptional:$,children:C?Object(e.jsx)(C,K({},ue)):null})},G)})}):null]},r)}try{Ft.displayName="EditorFilterGroup",Ft.__docgenInfo={description:"",displayName:"EditorFilterGroup",props:{editorFilterGroup:{defaultValue:null,description:"",name:"editorFilterGroup",required:!0,type:{name:"InsightEditorFilterGroup<InsightEditorFilter<EditorFilterProps>>"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"]={docgenInfo:Ft.__docgenInfo,name:"EditorFilterGroup",path:"frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"})}catch(t){}var Ss=n("./frontend/src/lib/components/PayCard/PayCard.tsx");function Pt(t){let{}=t;return Object(e.jsx)(Ss.a,{identifier:c.e.PATHS_ADVANCED,title:"Get a deeper understanding of your users",caption:"Advanced features such as interconnection with funnels, grouping & wildcarding and exclusions can help you gain deeper insights.",docsLink:"https://posthog.com/docs/user-guides/paths",dismissable:!1})}try{Pt.displayName="PathsAdvancedPaywall",Pt.__docgenInfo={description:"",displayName:"PathsAdvancedPaywall",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsAdvancedPaywall.tsx#PathsAdvancedPaywall"]={docgenInfo:Pt.__docgenInfo,name:"PathsAdvancedPaywall",path:"frontend/src/scenes/insights/EditorFilters/PathsAdvancedPaywall.tsx#PathsAdvancedPaywall"})}catch(t){}var Es=n("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),Fs=n("./frontend/src/scenes/saved-insights/SavedInsights.tsx");function Ct(t){let{value:s}=t;const{setActiveView:i}=Object(l.useActions)(L.c);return Object(e.jsx)(q.LemonSelect,{options:Fs.INSIGHT_TYPE_OPTIONS,value:s,onChange:a=>{a&&i(a)},fullWidth:!0,"data-attr":"insight-type"})}try{Ct.displayName="InsightTypeSelector",Ct.__docgenInfo={description:"",displayName:"InsightTypeSelector",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"]={docgenInfo:Ct.__docgenInfo,name:"InsightTypeSelector",path:"frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"})}catch(t){}var Ps=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss"),xn=n.n(Ps),Zt={};Zt.insert="head",Zt.singleton=!1;var Hs=V()(xn.a,Zt),Qs=xn.a.locals||{};function Tt(t){let{insightProps:s}=t;const{setFilters:i}=Object(l.useActions)(Object(Q.a)(s)),{filters:a,breakdownAttributionStepOptions:r}=Object(l.useValues)(Object(Q.a)(s));return Object(e.jsx)(q.LemonSelect,{value:a.breakdown_attribution_type||c.j.FirstTouch,placeholder:"Attribution",options:[{value:c.j.FirstTouch,label:"First touchpoint"},{value:c.j.LastTouch,label:"Last touchpoint"},{value:c.j.AllSteps,label:"All steps"},a.funnel_order_type===c.bb.UNORDERED?{value:c.j.Step,label:"Any step"}:{value:c.j.Step,label:"Specific step",element:Object(e.jsx)(q.LemonSelect,{className:"ml-2",onChange:o=>{o!==null&&i({breakdown_attribution_type:c.j.Step,breakdown_attribution_value:o})},placeholder:`Step ${a.breakdown_attribution_value?a.breakdown_attribution_value+1:1}`,options:r})}],onChange:o=>{o&&i({breakdown_attribution_type:o,breakdown_attribution_value:a.breakdown_attribution_value||0})},dropdownMaxContentWidth:!0,"data-attr":"breakdown-attributions"})}try{Tt.displayName="Attribution",Tt.__docgenInfo={description:"",displayName:"Attribution",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"]={docgenInfo:Tt.__docgenInfo,name:"Attribution",path:"frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"})}catch(t){}function At(t){var s,i,a;let{insightProps:r,showing:o}=t;const{user:d}=Object(l.useValues)(ve.a),m=(d==null||(s=d.organization)===null||s===void 0?void 0:s.available_features)||[],u=Object(L.c)(r),{filters:p,insight:g,filterPropertiesCount:j}=Object(l.useValues)(u),{preflight:P}=Object(l.useValues)(Es.a),{advancedOptionsUsedCount:R}=Object(l.useValues)(Object(Q.a)(r)),{featureFlags:b}=Object(l.useValues)(z.a),Y=b[T.i.INSIGHT_EDITOR_PANELS],S=Object(_.j)(p),A=Object(_.f)(p),$=Object(_.i)(p),G=Object(_.h)(p),X=Object(_.g)(p),C=Object(_.e)(p),ue=S||A||$,Re=S&&!T.n.includes(p.display||c.k.ActionsLineGraph)||G&&b[T.i.RETENTION_BREAKDOWN]&&p.display!==c.k.ActionsLineGraph||C&&p.funnel_viz_type===c.B.Steps,tn=S||$||G||X||C,$e=m.includes(c.e.PATHS_ADVANCED),Lt=C&&p.funnel_viz_type===c.B.Steps,wt=R+(S&&p.formula?1:0),nn=!!wt,qe=[{title:"General",editorFilters:Ee([Y?{key:"insight",label:"Type",component:Ct}:void 0,G&&{key:"retention-summary",label:"Retention Summary",component:pt},...X?Ee([{key:"event-types",label:"Event Types",component:mt},$e&&{key:"wildcard-groups",label:"Wildcard Groups",showOptional:!0,component:ht,tooltip:Object(e.jsxs)(e.Fragment,{children:["Use wildcard matching to group events by unique values in path item names. Use an asterisk (*) in place of unique values. For example, instead of /merchant/1234/payment, replace the unique value with an asterisk /merchant/*/payment. ",Object(e.jsx)("b",{children:"Use a comma to separate multiple wildcards."})]})},{key:"start-target",label:"Starts at",component:gt},$e&&{key:"ends-target",label:"Ends at",component:ft}]):[],...C?Ee([{key:"query-steps",component:Ot}]):[]])},{title:"Series",editorFilters:Ee([ue&&{key:"series",label:S?at:void 0,component:it},S?{key:"formula",label:lt,component:ot}:null])},{title:"Filters",count:j,editorFilters:Ee([A?{key:"properties",label:Y?void 0:"Filters",position:"right",component:ut}:null,A?{key:"toggles",label:"Lifecycle Toggles",position:"right",component:ct}:null,tn?{key:"properties",label:Y?void 0:"Filters",position:"right",component:rt}:null])},{title:"Breakdown",count:((i=p.breakdowns)===null||i===void 0?void 0:i.length)||(p.breakdown?1:0),position:"right",editorFilters:Ee([Re?{key:"breakdown",label:"Breakdown by",position:"right",tooltip:Object(e.jsx)(e.Fragment,{children:"Use breakdown to see the aggregation (total volume, active users, etc.) for each value of that property. For example, breaking down by Current URL with total volume will give you the event volume for each URL your users have visited."}),component:dt}:null,Lt?{key:"attribution",label:"Attribution type",position:"right",tooltip:Object(e.jsxs)("div",{children:["Attribution type determines which property value to use for the entire funnel.",Object(e.jsxs)("ul",{className:"list-disc pl-4",children:[Object(e.jsx)("li",{children:"First step: the first property value seen from all steps is chosen."}),Object(e.jsx)("li",{children:"Last step: last property value seen from all steps is chosen."}),Object(e.jsx)("li",{children:"Specific step: the property value seen at that specific step is chosen."}),Object(e.jsx)("li",{children:"All steps: the property value must be seen in all steps."}),Object(e.jsx)("li",{children:"Any step: the property value must be seen on at least one step of the funnel."})]})]}),component:Tt}:null])},{title:"Exclusions",position:"right",editorFilters:Ee([X&&{key:"paths-exclusions",label:"Exclusions",position:"right",tooltip:Object(e.jsx)(e.Fragment,{children:"Exclude events from Paths visualisation. You can use wildcard groups in exclusions as well."}),component:Et}])},{title:"Advanced Options",position:"left",defaultExpanded:nn,count:wt,editorFilters:Ee([X&&($e?{key:"paths-advanced",component:jt}:P!=null&&(a=P.instance_preferences)!==null&&a!==void 0&&a.disable_paid_fs?void 0:{key:"paths-paywall",component:Pt}),C&&{key:"funnels-advanced",component:_t}])}].filter(Fe=>Fe.editorFilters.length>0);let Rt=[];if(!Y){const Fe=qe.reduce((He,Qe)=>He.concat(Qe.editorFilters.filter(Pe=>Pe.position!=="right")),[]),sn=qe.reduce((He,Qe)=>He.concat(Qe.editorFilters.filter(Pe=>Pe.position==="right")),[]);Rt=[{title:"Left",editorFilters:Fe},{title:"right",editorFilters:sn}]}return Object(e.jsx)(Gn.a,{in:o,timeout:250,classNames:"anim-",mountOnEnter:!0,unmountOnExit:!0,children:Object(e.jsx)("div",{className:Object(We.default)("EditorFiltersWrapper",{"EditorFiltersWrapper--editorpanels":Y,"EditorFiltersWrapper--singlecolumn":Y||C}),children:Object(e.jsx)("div",{className:"EditorFilters",children:(Y||C?qe:Rt).map(Fe=>Object(e.jsx)(Ft,{editorFilterGroup:Fe,insight:g,insightProps:r},Fe.title))})})})}function Ee(t){return t.filter(s=>!!s)}try{At.displayName="EditorFilters",At.__docgenInfo={description:"",displayName:"EditorFilters",props:{insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},showing:{defaultValue:null,description:"",name:"showing",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"]={docgenInfo:At.__docgenInfo,name:"EditorFilters",path:"frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"})}catch(t){}var Cs=n("./frontend/src/lib/components/LemonButton/More.tsx"),en=n("./frontend/src/lib/components/LemonDivider/index.ts"),Ts=n("./frontend/src/scenes/saved-insights/savedInsightsLogic.ts"),_n=n("./frontend/src/lib/components/Subscriptions/SubscriptionsModal.tsx"),As=n("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),Is=n("./frontend/src/lib/components/Sharing/SharingModal.tsx"),Ls=n("./frontend/src/lib/components/ExportButton/ExportButton.tsx"),ws=n("./frontend/src/models/tagsModel.ts"),Rs=n("./frontend/src/queries/Query/Query.tsx");function It(t){var s,i,a;let{insightId:r}=t;const{insightMode:o,subscriptionId:d}=Object(l.useValues)(f.a),{setInsightMode:m}=Object(l.useActions)(f.a),u=Object(L.c)({dashboardItemId:r||"new"}),{insightProps:p,insightLoading:g,filtersKnown:j,filters:P,canEditInsight:R,insight:b,insightChanged:Y,tagLoading:S,insightSaving:A,exporterResourceParams:$,isUsingDataExploration:G}=Object(l.useValues)(u),{saveInsight:X,setInsightMetadata:C,saveAs:ue,reportInsightViewedForRecentInsights:Re}=Object(l.useActions)(u),{duplicateInsight:tn,loadInsights:$e}=Object(l.useActions)(Ts.b),{query:Lt}=Object(l.useValues)(Object(v.a)(p)),{setQuery:wt}=Object(l.useActions)(Object(v.a)(p));Object(l.useMountedLogic)(O(p));const{hasAvailableFeature:nn}=Object(l.useValues)(ve.a),{aggregationLabel:qe}=Object(l.useValues)(ke.a),{cohortsById:Rt}=Object(l.useValues)(Bn.a),{mathDefinitions:Fe}=Object(l.useValues)(Wn.f),{featureFlags:sn}=Object(l.useValues)(z.a),{tags:He}=Object(l.useValues)(ws.a),{currentTeamId:Qe}=Object(l.useValues)(Wt.a),{push:Pe}=Object(l.useActions)(xe.router);Object(D.useEffect)(()=>{Re()},[r]);const an=sn[T.i.INSIGHT_EDITOR_PANELS];if(r!=="new"&&g&&!j)return Object(e.jsx)(un,{});const Vs=Object(e.jsxs)("div",{className:"insights-page",children:[r!=="new"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(_n.b,{isOpen:o===c.G.Subscriptions,closeModal:()=>Pe(ge.a.insightView(b.short_id)),insightShortId:r,subscriptionId:d}),Object(e.jsx)(Is.a,{isOpen:o===c.G.Sharing,closeModal:()=>Pe(ge.a.insightView(b.short_id)),insightShortId:r,insight:b})]}),Object(e.jsx)(Mn.a,{title:Object(e.jsx)(ln.a,{name:"name",value:b.name||"",placeholder:G?Object(zt.k)(Lt.source):Object(zt.j)(P,qe,Rt,Fe),onSave:Nt=>C({name:Nt}),saveOnBlur:!0,maxLength:400,mode:R?void 0:"view","data-attr":"insight-name",notice:R?void 0:{icon:Object(e.jsx)(ie.IconLock,{}),tooltip:"You don't have edit permissions on any of the dashboards this insight belongs to. Ask a dashboard collaborator with edit access to add you."}}),buttons:Object(e.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[o!==c.G.Edit&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Cs.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(H.a,{status:"stealth",onClick:()=>tn(b,!0),fullWidth:!0,"data-attr":"duplicate-insight-from-insight-view",children:"Duplicate"}),Object(e.jsx)(H.a,{status:"stealth",onClick:()=>C({favorited:!b.favorited}),fullWidth:!0,children:b.favorited?"Remove from favorites":"Add to favorites"}),Object(e.jsx)(en.a,{}),Object(e.jsx)(H.a,{status:"stealth",onClick:()=>b.short_id?Pe(ge.a.insightSharing(b.short_id)):null,fullWidth:!0,children:"Share or embed"}),b.short_id&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(_n.a,{insightShortId:b.short_id}),$?Object(e.jsx)(Ls.a,{fullWidth:!0,items:[{export_format:c.t.PNG,insight:b.id},{export_format:c.t.CSV,export_context:$}]}):null,Object(e.jsx)(en.a,{})]}),Object(e.jsx)(H.a,{status:"danger",onClick:()=>Object(w.x)({object:b,endpoint:`projects/${Qe}/insights`,callback:()=>{$e(),Pe(ge.a.savedInsights())}}),fullWidth:!0,children:"Delete insight"})]})}),Object(e.jsx)(en.a,{vertical:!0})]}),o===c.G.Edit&&b.saved&&Object(e.jsx)(H.a,{type:"secondary",onClick:()=>m(c.G.View,null),children:"Cancel"}),o!==c.G.Edit&&b.short_id&&Object(e.jsx)(nt,{insight:b,canEditInsight:R}),o!==c.G.Edit?R&&Object(e.jsx)(H.a,{type:"primary",onClick:()=>m(c.G.Edit,null),"data-attr":"insight-edit-button",children:"Edit"}):Object(e.jsx)(st,{saveAs:ue,saveInsight:X,isSaved:b.saved,addingToDashboard:!!((s=b.dashboards)!==null&&s!==void 0&&s.length)&&!b.id,insightSaving:A,insightChanged:Y})]}),caption:Object(e.jsxs)(e.Fragment,{children:[!!(R||b.description)&&Object(e.jsx)(ln.a,{multiline:!0,name:"description",value:b.description||"",placeholder:"Description (optional)",onSave:Nt=>C({description:Nt}),saveOnBlur:!0,maxLength:400,mode:R?void 0:"view","data-attr":"insight-description",compactButtons:!0,paywall:!nn(c.e.DASHBOARD_COLLABORATION)}),R?Object(e.jsx)(dn.a,{tags:(i=b.tags)!==null&&i!==void 0?i:[],onChange:(Nt,rn)=>C({tags:rn!=null?rn:[]}),saving:S,tagsAvailable:He,className:"insight-metadata-tags","data-attr":"insight-tags"}):(a=b.tags)!==null&&a!==void 0&&a.length?Object(e.jsx)(dn.a,{tags:b.tags,saving:S,className:"insight-metadata-tags","data-attr":"insight-tags",staticOnly:!0}):null,Object(e.jsx)(As.a,{at:b.last_modified_at,by:b.last_modified_by,className:"mt-2"})]})}),G?Object(e.jsx)(Rs.a,{query:Lt,setQuery:wt}):Object(e.jsxs)(e.Fragment,{children:[!an&&o===c.G.Edit&&Object(e.jsx)(Mt.a,{}),Object(e.jsxs)("div",{className:Object(We.default)("insight-wrapper",{"insight-wrapper--editorpanels":an,"insight-wrapper--singlecolumn":!an&&P.insight===c.F.FUNNELS}),children:[Object(e.jsx)(At,{insightProps:p,showing:o===c.G.Edit}),Object(e.jsx)("div",{className:"insights-container","data-attr":"insight-view",children:Object(e.jsx)(Nn.a,{insightMode:o})})]})]}),o!==c.G.View?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Be,{}),Object(e.jsx)(kn,{})]}):null]});return Object(e.jsx)(l.BindLogic,{logic:L.c,props:p,children:Vs})}try{It.displayName="Insight",It.__docgenInfo={description:"",displayName:"Insight",props:{insightId:{defaultValue:null,description:"",name:"insightId",required:!0,type:{name:'"new" | InsightShortId'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/Insight.tsx#Insight"]={docgenInfo:It.__docgenInfo,name:"Insight",path:"frontend/src/scenes/insights/Insight.tsx#Insight"})}catch(t){}var Ns=n("./frontend/src/lib/components/NotFound/index.tsx");function Sn(){var t,s;const{insightId:i,insight:a,insightCache:r}=Object(l.useValues)(f.a);return i==="new"||i&&a!==null&&a!==void 0&&a.id&&a!==null&&a!==void 0&&a.short_id?Object(e.jsx)(It,{insightId:i}):r!=null&&(t=r.logic)!==null&&t!==void 0&&(s=t.values)!==null&&s!==void 0&&s.insightLoading?Object(e.jsx)(un,{}):Object(e.jsx)(Ns.a,{object:"insight"})}const Ds={component:Sn,logic:f.a}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FallOutlined.js":function(y,h,n){"use strict";var f=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),l=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},V=M,N=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),x=function(re,D){return l.createElement(N.a,Object(f.a)(Object(f.a)({},re),{},{ref:D,icon:V}))};x.displayName="FallOutlined";var I=h.a=l.forwardRef(x)},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js":function(y,h,n){"use strict";var f=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var M=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),V=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),N=J(n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),x=f(n("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),I=f(n("./node_modules/.pnpm/rc-checkbox@2.3.2_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-checkbox/es/index.js")),ee=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js"),re=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js"),D=f(n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/_util/devWarning.js"));function L(F){if(typeof WeakMap!="function")return null;var k=new WeakMap,O=new WeakMap;return(L=function(c){return c?O:k})(F)}function J(F,k){if(!k&&F&&F.__esModule)return F;if(F===null||l(F)!=="object"&&typeof F!="function")return{default:F};var O=L(k);if(O&&O.has(F))return O.get(F);var v={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in F)if(E!=="default"&&Object.prototype.hasOwnProperty.call(F,E)){var T=c?Object.getOwnPropertyDescriptor(F,E):null;T&&(T.get||T.set)?Object.defineProperty(v,E,T):v[E]=F[E]}return v.default=F,O&&O.set(F,v),v}var de=function(F,k){var O={};for(var v in F)Object.prototype.hasOwnProperty.call(F,v)&&k.indexOf(v)<0&&(O[v]=F[v]);if(F!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,v=Object.getOwnPropertySymbols(F);c<v.length;c++)k.indexOf(v[c])<0&&Object.prototype.propertyIsEnumerable.call(F,v[c])&&(O[v[c]]=F[v[c]]);return O},oe=function(k,O){var v,c=k.prefixCls,E=k.className,T=k.children,z=k.indeterminate,Z=z===void 0?!1:z,Ce=k.style,Te=k.onMouseEnter,Ae=k.onMouseLeave,fe=k.skipGroup,te=fe===void 0?!1:fe,U=de(k,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),Ne=N.useContext(re.ConfigContext),De=Ne.getPrefixCls,Ie=Ne.direction,B=N.useContext(ee.GroupContext),je=N.useRef(U.value);N.useEffect(function(){B==null||B.registerValue(U.value),(0,D.default)("checked"in U||!!B||!("value"in U),"Checkbox","`value` is not a valid prop, do you mean `checked`?")},[]),N.useEffect(function(){if(!te)return U.value!==je.current&&(B==null||B.cancelValue(je.current),B==null||B.registerValue(U.value)),function(){return B==null?void 0:B.cancelValue(U.value)}},[U.value]);var ne=De("checkbox",c),pe=(0,V.default)({},U);B&&!te&&(pe.onChange=function(){U.onChange&&U.onChange.apply(U,arguments),B.toggleOption&&B.toggleOption({label:T,value:U.value})},pe.name=B.name,pe.checked=B.value.indexOf(U.value)!==-1,pe.disabled=U.disabled||B.disabled);var ve=(0,x.default)((v={},(0,M.default)(v,"".concat(ne,"-wrapper"),!0),(0,M.default)(v,"".concat(ne,"-rtl"),Ie==="rtl"),(0,M.default)(v,"".concat(ne,"-wrapper-checked"),pe.checked),(0,M.default)(v,"".concat(ne,"-wrapper-disabled"),pe.disabled),v),E),Ve=(0,x.default)((0,M.default)({},"".concat(ne,"-indeterminate"),Z));return N.createElement("label",{className:ve,style:Ce,onMouseEnter:Te,onMouseLeave:Ae},N.createElement(I.default,(0,V.default)({},pe,{prefixCls:ne,className:Ve,ref:O})),T!==void 0&&N.createElement("span",null,T))},w=N.forwardRef(oe);w.displayName="Checkbox";var _=w;h.default=_},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js":function(y,h,n){"use strict";var f=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(h,"__esModule",{value:!0}),h.default=h.GroupContext=void 0;var M=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),V=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),N=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/toConsumableArray.js")),x=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/slicedToArray.js")),I=de(n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),ee=f(n("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),re=f(n("./node_modules/.pnpm/rc-util@5.24.4_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-util/lib/omit.js")),D=f(n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js")),L=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js");function J(O){if(typeof WeakMap!="function")return null;var v=new WeakMap,c=new WeakMap;return(J=function(T){return T?c:v})(O)}function de(O,v){if(!v&&O&&O.__esModule)return O;if(O===null||l(O)!=="object"&&typeof O!="function")return{default:O};var c=J(v);if(c&&c.has(O))return c.get(O);var E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in O)if(z!=="default"&&Object.prototype.hasOwnProperty.call(O,z)){var Z=T?Object.getOwnPropertyDescriptor(O,z):null;Z&&(Z.get||Z.set)?Object.defineProperty(E,z,Z):E[z]=O[z]}return E.default=O,c&&c.set(O,E),E}var oe=function(O,v){var c={};for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&v.indexOf(E)<0&&(c[E]=O[E]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,E=Object.getOwnPropertySymbols(O);T<E.length;T++)v.indexOf(E[T])<0&&Object.prototype.propertyIsEnumerable.call(O,E[T])&&(c[E[T]]=O[E[T]]);return c},w=I.createContext(null);h.GroupContext=w;var _=function(v,c){var E=v.defaultValue,T=v.children,z=v.options,Z=z===void 0?[]:z,Ce=v.prefixCls,Te=v.className,Ae=v.style,fe=v.onChange,te=oe(v,["defaultValue","children","options","prefixCls","className","style","onChange"]),U=I.useContext(L.ConfigContext),Ne=U.getPrefixCls,De=U.direction,Ie=I.useState(te.value||E||[]),B=(0,x.default)(Ie,2),je=B[0],ne=B[1],pe=I.useState([]),ve=(0,x.default)(pe,2),Ve=ve[0],q=ve[1];I.useEffect(function(){"value"in te&&ne(te.value||[])},[te.value]);var e=function(){return Z.map(function(le){return typeof le=="string"?{label:le,value:le}:le})},Vt=function(le){q(function(Oe){return Oe.filter(function(he){return he!==le})})},kt=function(le){q(function(Oe){return[].concat((0,N.default)(Oe),[le])})},Xe=function(le){var Oe=je.indexOf(le.value),he=(0,N.default)(je);Oe===-1?he.push(le.value):he.splice(Oe,1),"value"in te||ne(he);var xe=e();fe==null||fe(he.filter(function(ge){return Ve.indexOf(ge)!==-1}).sort(function(ge,Ze){var Bt=xe.findIndex(function(Le){return Le.value===ge}),et=xe.findIndex(function(Le){return Le.value===Ze});return Bt-et}))},Me=Ne("checkbox",Ce),Be="".concat(Me,"-group"),Mt=(0,re.default)(te,["value","disabled"]);Z&&Z.length>0&&(T=e().map(function(se){return I.createElement(D.default,{prefixCls:Me,key:se.value.toString(),disabled:"disabled"in se?se.disabled:te.disabled,value:se.value,checked:je.indexOf(se.value)!==-1,onChange:se.onChange,className:"".concat(Be,"-item"),style:se.style},se.label)}));var ye={toggleOption:Xe,value:je,disabled:te.disabled,name:te.name,registerValue:kt,cancelValue:Vt},me=(0,ee.default)(Be,(0,V.default)({},"".concat(Be,"-rtl"),De==="rtl"),Te);return I.createElement("div",(0,M.default)({className:me,style:Ae},Mt,{ref:c}),I.createElement(w.Provider,{value:ye},T))},F=I.forwardRef(_),k=I.memo(F);h.default=k},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/table/Column.js":function(y,h,n){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;function f(M){return null}var l=f;h.default=l},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,"",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".dropdown-selector{padding:.5rem;border:1px solid var(--border-light);border-radius:var(--radius);display:flex;align-items:center;cursor:pointer}.dropdown-selector.disabled{color:var(--muted);cursor:not-allowed}.dropdown-selector.compact{padding:.333rem .5rem}.dropdown-selector .dropdown-arrow{display:flex;align-items:center;padding-left:4px;font-size:1.2em;color:var(--muted-alt)}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/experimental/NPSPrompt.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".nps-prompt{background-color:var(--default);border-radius:var(--radius);padding:6px 1rem 1rem;color:var(--light);position:fixed;bottom:16px;right:16px;width:calc(100% - 32px);max-width:360px;z-index:var(--z-nps-overlay);font-size:.85rem;text-align:center;transition:transform 1s ease-in-out;transform:translateY(0)}.nps-prompt.hide{transform:translateY(150%)}.nps-prompt .prompt-title{font-size:1rem;font-weight:700;margin-bottom:1rem;max-width:90%;margin-left:auto;margin-right:auto;padding-top:10px}.nps-prompt .nps-dismiss{position:absolute;top:6px;right:6px;cursor:pointer}.nps-prompt .nps-header{display:flex;align-items:center;margin-bottom:.5rem}.nps-prompt .nps-progress{flex-grow:1;display:flex;justify-content:center}.nps-prompt .nps-progress .pg-item{width:12px;height:12px;border-radius:50%;background-color:var(--border);margin-right:.5rem}.nps-prompt .nps-progress .pg-item:last-of-type{margin-right:0}.nps-prompt .nps-progress .pg-item.completed{background-color:var(--success)}.nps-prompt .question{text-align:left;padding-bottom:.5rem}.nps-prompt .action-buttons{width:200px;margin:0 auto;padding-top:.5rem}.nps-prompt .action-buttons .ant-btn{margin-bottom:.5rem;width:100%}.nps-prompt .ant-btn:not(.ant-btn-link){background-color:var(--bg-depth);border:1px solid #000;color:var(--light)}.nps-prompt textarea{color:var(--light);background-color:var(--bg-depth);border-color:#000}.nps-prompt .ant-btn-link span{color:var(--light);text-decoration:underline!important}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".EditorFiltersWrapper{flex-shrink:0;border:1px solid var(--border);border-radius:var(--radius);padding:1rem;margin-bottom:1rem}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:1rem}@media screen and (min-width:768px){.EditorFiltersWrapper .EditorFilters{display:flex;gap:2rem}.EditorFiltersWrapper .EditorFilters .EditorFilterGroup{flex:1;width:50%}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:0}}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{margin-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{flex-direction:column;gap:0}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters .EditorFilterGroup{width:auto}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters>*+*{margin-top:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{border:none;padding:0}@media screen and (min-width:1200px){.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{--editor-panel-width:max(25vw,28rem)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{width:var(--editor-panel-width);display:block;padding-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter{width:0}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1))}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active{width:var(--editor-panel-width);transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active .EditorFilters{transform:translateX(0);transition:transform .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit{width:var(--editor-panel-width)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit .EditorFilters{transform:translateX(0)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active{width:0;transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1));transition:transform .25s}}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".LifecycleToggles{text-transform:uppercase}.LifecycleToggles div{font-size:12px;display:flex;justify-content:space-between;padding-bottom:4px;align-items:center}.LifecycleToggles .new .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-new);background-color:var(--lifecycle-new)}.LifecycleToggles .returning .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-returning);background-color:var(--lifecycle-returning)}.LifecycleToggles .resurrecting .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-resurrecting);background-color:var(--lifecycle-resurrecting)}.LifecycleToggles .dormant .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-dormant);background-color:var(--lifecycle-dormant)}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".insights-page .ant-card-bordered{border-radius:var(--radius);box-shadow:none;border:1px solid var(--border)}.insights-page h2{font-size:1.125rem;font-weight:600}.insights-page .top-bar,.insights-page .top-bar .ant-tabs,.insights-page .top-bar .ant-tabs-nav-list{width:100%}.insights-page .top-bar .ant-btn-loading-icon{display:none}.insights-page .top-bar .ant-tabs-tab{padding:0}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn,.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{padding-bottom:6px;color:inherit}.insights-page .insight-history-button{padding-right:0;padding-left:0;border-radius:0;border:0;border-bottom:2px solid transparent}.insights-page .insight-history-button.active{border-bottom:2px solid var(--primary)}.insights-page hr{margin:1rem 0}.insights-page .ant-tabs-tab .hotkey{margin-bottom:0;background-color:var(--primary-bg-hover)!important;border-color:var(--primary-bg-hover)!important}.insights-page .ant-tabs-tab .deprecated{color:var(--muted)}.insights-page .ant-tabs-tab .deprecated .hotkey{margin-bottom:0;background-color:var(--light)!important;border-color:var(--border)!important;color:var(--muted)}.insights-page .ant-tabs-tab.ant-tabs-tab-active .deprecated{color:var(--primary)}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .hotkey{background-color:var(--primary-bg-active)!important}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .deprecated .hotkey{background-color:var(--light)!important}.insights-page .insight-controls{overflow:visible;position:relative;margin-bottom:1rem}.insights-page .insight-controls .ant-card-body{padding:.8rem 1rem}.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{position:relative}@media screen and (min-width:1200px){.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{display:flex;overflow:hidden}.insights-page .insight-wrapper.insight-wrapper--editorpanels .insights-container,.insights-page .insight-wrapper.insight-wrapper--singlecolumn .insights-container{flex:1;overflow-x:auto}}.insights-page .insights-graph-container{background:#fff;margin-bottom:1rem}.insights-page .insights-graph-container .ant-card-head{border-bottom:1px solid var(--border);min-height:unset;background-color:var(--bg-light);padding-left:1rem;padding-right:1rem}.insights-page .insights-graph-container .ant-card-body,.insights-page .insights-graph-container .ant-card-head .ant-card-head-title{padding:0}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{height:min(90vh - 16rem,36rem);max-width:300px;width:-moz-fit-content;width:fit-content;padding:0 1rem 1rem 0;display:flex;align-items:center}.insights-page .insights-graph-container .LineGraph{width:calc(100% - 3rem);height:calc(100% - 3rem)}.insights-page .insight-title-container{display:flex;align-items:center}.insights-page .insight-title-container .insight-title-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.insights-page .advanced-options-dropdown{font-size:1.4em;color:var(--primary-alt)}.insights-page .advanced-options-dropdown.expanded{transform:rotateX(180deg)}.insights-page .funnel-advanced-options .funnel-exclusions-filter .mt:first-of-type{margin-top:.5rem}.insights-page .retention-date-picker{background-color:transparent;border:0}.insights-page .retention-date-picker input::-moz-placeholder{color:var(--default)}.insights-page .retention-date-picker input::placeholder{color:var(--default)}.insights-page .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.insight-metadata-tags{margin-top:.5rem}.insight-metadata-tags .ant-tag{margin-top:0}.trends-insights-container{position:relative;min-height:min(90vh - 16rem,36rem);display:flex;justify-content:center}.trends-insights-container .LineGraph{height:calc(100% - 1rem)!important}.funnel-insights-container{background-color:var(--funnel-canvas-background);border-radius:0 0 var(--radius) var(--radius)}.funnel-insights-container.non-empty-state{min-height:26rem;position:relative;margin-bottom:0}.funnel-insights-container .ant-table-wrapper{margin-top:0!important}.funnel-tab-btn-popover .ant-popover-inner-content{padding:4px 15px}.funnel-tab-btn-popover .ant-popover-inner-content button.ant-btn-link{padding:0;margin:0 0 0 4px}.significance-highlight{display:inline-flex;background:var(--primary);color:var(--bg-light)}.significance-highlight .LemonIcon{color:var(--bg-light)}",""]),y.exports=h}}]);
