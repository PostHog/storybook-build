var Y=(y,m,e)=>new Promise((r,d)=>{var f=g=>{try{b(e.next(g))}catch(v){d(v)}},O=g=>{try{b(e.throw(g))}catch(v){d(v)}},b=g=>g.done?r(g.value):Promise.resolve(g.value).then(f,O);b((e=e.apply(y,m)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[286],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(y,m,e){"use strict";e.d(m,"b",function(){return s}),e.d(m,"a",function(){return T});var r=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),d=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),f=e("./frontend/src/scenes/urls.ts"),O=e("./frontend/src/lib/components/Tooltip.tsx"),b=e("./frontend/src/lib/components/icons.tsx"),g=e("./frontend/src/lib/components/TitleWithIcon.tsx"),v=e("./frontend/src/lib/constants.tsx"),W=e("./frontend/src/lib/logic/featureFlagLogic.ts"),o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),A=e.n(o);let s;(function(a){a.Actions="actions",a.EventDefinitions="events",a.EventPropertyDefinitions="properties",a.IngestionWarnings="warnings"})(s||(s={}));const p={[s.EventPropertyDefinitions]:f.a.eventPropertyDefinitions(),[s.EventDefinitions]:f.a.eventDefinitions(),[s.Actions]:f.a.actions(),[s.IngestionWarnings]:f.a.ingestionWarnings()},S=Object(r.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[W.a,["featureFlags"]]},actions:{setTab:a=>({tab:a})},reducers:{tab:[s.EventDefinitions,{setTab:(a,j)=>{let{tab:h}=j;return h}}]},selectors:{showWarningsTab:[a=>[a.featureFlags],a=>!!a[v.i.INGESTION_WARNINGS_ENABLED]]},actionToUrl:()=>({setTab:a=>{let{tab:j}=a;return p[j]||f.a.events()}}),urlToAction:a=>{let{actions:j,values:h}=a;return Object.fromEntries(Object.entries(p).map(D=>{let[P,L]=D;return[L,()=>{h.tab!==P&&j.setTab(P)}]}))}});function T(a){let{tab:j}=a;const{showWarningsTab:h}=Object(r.useValues)(S),{setTab:D}=Object(r.useActions)(S);return Object(o.jsxs)(d.a,{tabPosition:"top",animated:!1,activeKey:j,onTabClick:P=>D(P),children:[Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},s.EventDefinitions),Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)(g.a,{icon:Object(o.jsx)(O.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(o.jsx)(b.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},s.Actions),Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)(g.a,{icon:Object(o.jsx)(O.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(o.jsx)(b.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},s.EventPropertyDefinitions),h&&Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},s.IngestionWarnings)]})}try{T.displayName="DataManagementPageTabs",T.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:T.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(a){}},"./frontend/src/scenes/data-management/ingestion-warnings/IngestionWarningsView.tsx":function(y,m,e){"use strict";e.r(m),e.d(m,"scene",function(){return F}),e.d(m,"IngestionWarningsView",function(){return N});var r=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),d=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/lib/components/PageHeader.tsx"),O=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),b=e("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),g=e("./frontend/src/lib/api.ts"),v=e("./frontend/src/scenes/teamLogic.tsx");const W=Object(r.kea)([Object(r.path)(["scenes","data-management","ingestion-warnings","ingestionWarningsLogic"]),Object(r.connect)({values:[v.a,["currentTeamId"]]}),Object(b.loaders)(l=>{let{values:i}=l;return{data:[[],{loadData:()=>Y(this,null,function*(){const{results:t}=yield g.b.get(`api/projects/${i.currentTeamId}/ingestion_warnings`);return t})}]}}),Object(r.selectors)({breadcrumbs:[()=>[],()=>[{name:"Data Management",path:d.a.eventDefinitions()},{name:"Ingestion Warnings",path:d.a.ingestionWarnings()}]]}),Object(r.events)(l=>{let{actions:i}=l;return{afterMount:()=>{i.loadData()}}})]);var o=e("./frontend/src/lib/components/LemonTable/index.ts"),A=e("./frontend/src/lib/components/TZLabel/index.tsx"),s=e("./frontend/src/lib/components/Link.tsx"),p=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),S=e("./node_modules/.pnpm/chart.js@3.9.1/node_modules/chart.js/dist/chart.mjs"),T=e("./frontend/src/lib/utils.tsx"),a=e("./frontend/src/lib/dayjs.ts"),j=e("./frontend/src/lib/components/Popup/Popup.tsx"),h=e("./node_modules/.pnpm/@floating-ui+core@0.7.3/node_modules/@floating-ui/core/dist/floating-ui.core.esm.js"),D=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),P=e.n(D),L=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss"),G=e.n(L),_={};_.insert="head",_.singleton=!1;var Z=P()(G.a,_),Q=G.a.locals||{},n=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function M(l){let{summary:i}=l;const t=Object(p.useRef)(null),c=Object(p.useRef)(null),{timezone:u}=Object(r.useValues)(v.a),[I,w]=Object(p.useState)(null),[$,J]=Object(p.useState)(0),B=Object(p.useMemo)(()=>Object(T.vb)(0,30).map(x=>Object(a.a)().subtract(x,"days").format("D MMM YYYY")).reverse(),[]),K=Object(p.useMemo)(()=>{const x=new Array(30).fill(0);for(const R of i.warnings){const E=Object(a.c)(R.timestamp,u);x[Object(a.a)().diff(E,"days")]+=1}return x.reverse()},[i]);return Object(p.useEffect)(()=>{let x;if(t.current){var R;x=new S.a((R=t.current)===null||R===void 0?void 0:R.getContext("2d"),{type:"bar",data:{labels:B,datasets:[{data:K,minBarLength:3,hoverBackgroundColor:"brand-blue"}]},options:{scales:{x:{display:!1},y:{beginAtZero:!0,display:!1}},plugins:{crosshair:!1,legend:{display:!1},tooltip:{enabled:!1,external(E){let{tooltip:C}=E;if(C.opacity===0){w(null);return}const U=C.dataPoints[0];w(Object(n.jsxs)(n.Fragment,{children:[U.label,": ",U.formattedValue]})),J(C.x)}}},maintainAspectRatio:!1,interaction:{mode:"index",axis:"x",intersect:!1}}})}return()=>{var E;(E=x)===null||E===void 0||E.destroy()}},[i,B,K]),Object(n.jsxs)("div",{className:"warning-events-graph",children:[Object(n.jsx)("canvas",{ref:t}),Object(n.jsx)(j.a,{visible:!!I,overlay:I,placement:"bottom-start",middleware:[Object(h.d)({crossAxis:$})],children:Object(n.jsx)("div",{ref:c})})]})}try{M.displayName="WarningEventsGraph",M.__docgenInfo={description:"",displayName:"WarningEventsGraph",props:{summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"IngestionWarningSummary"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"]={docgenInfo:M.__docgenInfo,name:"WarningEventsGraph",path:"frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"})}catch(l){}const F={component:N,logic:W},V={cannot_merge_already_identified:"Refused to merge an already identified user",cannot_merge_with_illegal_distinct_id:"Refused to merge with an illegal distinct id",skipping_event_invalid_uuid:"Refused to process event with invalid uuid"},z={cannot_merge_already_identified:function(i){const t=i.details;return Object(n.jsxs)(n.Fragment,{children:["Refused to merge already identified person"," ",Object(n.jsx)(s.a,{to:d.a.person(t.sourcePersonDistinctId),children:t.sourcePersonDistinctId})," into"," ",Object(n.jsx)(s.a,{to:d.a.person(t.targetPersonDistinctId),children:t.targetPersonDistinctId})," via an $identify or $create_alias call"]})},cannot_merge_with_illegal_distinct_id:function(i){const t=i.details;return Object(n.jsxs)(n.Fragment,{children:["Refused to merge an illegal distinct_id"," ",Object(n.jsx)(s.a,{to:d.a.person(t.illegalDistinctId),children:t.illegalDistinctId})," with"," ",Object(n.jsx)(s.a,{to:d.a.person(t.otherDistinctId),children:t.otherDistinctId})," via an $identify or $create_alias call"]})},skipping_event_invalid_uuid:function(i){const t=i.details;return Object(n.jsxs)(n.Fragment,{children:["Refused to process event with invalid uuid: ",Object(n.jsx)("code",{children:t.eventUuid}),"."]})}};function N(){const{data:l,dataLoading:i}=Object(r.useValues)(W);return Object(n.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(n.jsx)(f.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),Object(n.jsx)(O.a,{tab:O.b.IngestionWarnings}),Object(n.jsx)("div",{className:"mb-4",children:"Data ingestion related warnings from past 30 days."}),Object(n.jsx)(o.a,{dataSource:l,loading:i,columns:[{title:"Warning",dataIndex:"type",render:function(c,u){const I=V[u.type]||u.type;return Object(n.jsxs)(n.Fragment,{children:[I," (",Object(n.jsxs)(s.a,{to:`https://posthog.com/manual/data-management#${I.toLowerCase().split(" ").join("-")}`,children:["docs",")"]})]})}},{title:"Graph",render:function(c,u){return Object(n.jsx)(M,{summary:u})}},{title:"Events",dataIndex:"count",align:"right",sorter:(t,c)=>t.count-c.count},{title:"Last Seen",dataIndex:"lastSeen",render:function(c,u){return Object(n.jsx)(A.a,{time:u.lastSeen,showSeconds:!0})},align:"right",sorter:(t,c)=>new Date(t.lastSeen)>new Date(c.lastSeen)?1:-1}],expandable:{expandedRowRender:H},defaultSorting:{columnKey:"lastSeen",order:-1},noSortingCancellation:!0})]})}function H(l){return Object(n.jsx)(o.a,{dataSource:l.warnings,columns:[{title:"Description",key:"description",render:function(t,c){const u=z[c.type];return u?u(c):Object(n.jsx)("pre",{children:JSON.stringify(c.details,null,2)})}},{title:"Time",dataIndex:"timestamp",render:function(t,c){return Object(n.jsx)(A.a,{time:c.timestamp,showSeconds:!0})},align:"right"}],embedded:!0,size:"small",showHeader:!1})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss":function(y,m,e){var r=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");m=r(!1),m.push([y.i,".warning-events-graph{width:150px}.warning-events-graph canvas{height:36px}",""]),y.exports=m}}]);
