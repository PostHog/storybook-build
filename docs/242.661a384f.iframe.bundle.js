(window.webpackJsonp=window.webpackJsonp||[]).push([[242],{"./frontend/src/scenes/groups/Groups.tsx":function(S,P,e){"use strict";e.r(P),e.d(P,"scene",function(){return r}),e.d(P,"Groups",function(){return o});var E=e("./node_modules/core-js/modules/es.object.to-string.js"),x=e("./node_modules/core-js/modules/es.regexp.to-string.js"),D=e("./node_modules/core-js/modules/es.object.keys.js"),l=e("./node_modules/react/index.js"),s=e.n(l),L=e("./node_modules/kea/lib/index.esm.js"),y=e("./frontend/src/scenes/groups/groupsListLogic.ts"),T=e("./frontend/src/lib/components/PropertiesTable.tsx"),m=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),_=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),O=e("./frontend/src/lib/components/LemonTable/index.ts"),M=e("./frontend/src/lib/components/Link.tsx"),I=e("./frontend/src/scenes/urls.ts"),u=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),v=e("./frontend/src/lib/components/PayGatePage/PayGatePage.tsx"),b=e("./frontend/src/types.ts");function g(n){var t=n.access,a,c;return t===u.a.NoAccess?(a=s.a.createElement(s.a.Fragment,null,"Introducing ",s.a.createElement("span",{className:"highlight"},"Group Analytics"),"!"),c=s.a.createElement(s.a.Fragment,null,"Analyze how groups interact with your product as a whole instead of individual users (e.g. retention by companies instead of by users)")):t===u.a.HasAccess?(a=s.a.createElement(s.a.Fragment,null,"You're almost done!"),c=s.a.createElement(s.a.Fragment,null,"Learn how to track groups in your code")):(a=s.a.createElement(s.a.Fragment,null,"Looks like you're tracking groups!"),c=s.a.createElement(s.a.Fragment,null,"Upgrade today to use groups in Insights.")),s.a.createElement(v.a,{header:a,featureKey:b.d.GROUP_ANALYTICS,caption:c,docsLink:"https://posthog.com/docs/user-guides/group-analytics",hideUpgradeButton:t===u.a.HasAccess})}try{g.displayName="GroupsIntroduction",g.__docgenInfo={description:"",displayName:"GroupsIntroduction",props:{access:{defaultValue:null,description:"",name:"access",required:!0,type:{name:"enum",value:[{value:"1"},{value:"2"},{value:"3"}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"]={docgenInfo:g.__docgenInfo,name:"GroupsIntroduction",path:"frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"})}catch(n){}var d=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),j=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),h=e("./frontend/src/lib/components/AlertMessage/index.ts"),r={component:o,logic:y.a};function o(){var n=Object(L.useValues)(y.a),t=n.currentTabName,a=n.groupName,c=a.singular,A=a.plural,p=n.groups,K=n.groupsLoading,f=Object(L.useActions)(y.a),B=f.loadGroups,U=Object(L.useValues)(u.b),R=U.groupsAccessStatus;if(R==u.a.HasAccess||R==u.a.HasGroupTypes||R==u.a.NoAccess)return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null),s.a.createElement(g,{access:R}));var H=[{title:t,key:"group_key",render:function(G,i){return s.a.createElement(M.a,{to:I.a.group(i.group_type_index.toString(),i.group_key)},Object(d.b)(i.group_key,i.group_properties))}},{title:"First seen",key:"created_at",render:function(G,i){return s.a.createElement(_.b,{time:i.created_at})}}];return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null),s.a.createElement(O.a,{columns:H,rowKey:"group_key",loading:K,dataSource:p.results,expandable:{expandedRowRender:function(G){var i=G.group_properties;return s.a.createElement(T.a,{properties:i})},rowExpandable:function(G){var i=G.group_properties;return!!i&&Object.keys(i).length>0}},pagination:{controlled:!0,onBackward:p.previous?function(){B(p.previous),window.scrollTo(0,0)}:void 0,onForward:p.next?function(){B(p.next),window.scrollTo(0,0)}:void 0},emptyState:s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{type:"info"},"No ",A," found. Make sure to send properties with your ",c," for them to show up in the list."),s.a.createElement(j.a,{language:j.b.JavaScript,wrap:!0},"posthog.group('".concat(c,`', 'id:5', {
`)+"    name: 'Awesome ".concat(t,`',
`)+`    value: 11
});`))}))}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(S,P,e){"use strict";e.d(P,"a",function(){return h});var E=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),x=e.n(E),D=e("./node_modules/@babel/runtime/regenerator/index.js"),l=e.n(D),s=e("./node_modules/core-js/modules/es.array.iterator.js"),L=e.n(s),y=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e.n(y),m=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),_=e.n(m),O=e("./node_modules/core-js/modules/es.array.concat.js"),M=e.n(O),I=e("./node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/lib/api.ts"),v=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),b=e("./frontend/src/lib/utils.tsx"),g=e("./frontend/src/scenes/teamLogic.tsx"),d=e("./frontend/src/scenes/urls.ts"),j=e("./frontend/src/models/groupsModel.ts"),h=Object(I.kea)({path:["groups","groupsListLogic"],connect:{values:[g.a,["currentTeamId"],j.a,["groupTypes","aggregationLabel"],v.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(n){return{url:n}},setTab:function(n){return{tab:n}}}},loaders:function(o){var n=o.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var t=x()(l.a.mark(function c(A){var p;return l.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(p=A.url,!n.groupsEnabled){f.next=6;break}return p=p||"api/projects/".concat(n.currentTeamId,"/groups/?group_type_index=").concat(n.currentTab),f.next=5,u.b.get(p);case 5:return f.abrupt("return",f.sent);case 6:case"end":return f.stop()}},c)}));function a(c){return t.apply(this,arguments)}return a}()}]}},reducers:{currentTab:["-1",{setTab:function(o,n){var t=n.tab;return t}}]},selectors:{currentTabName:[function(r){return[r.currentTab,r.groupTypes,r.aggregationLabel]},function(r,o,n){return r==="-1"?"Persons":o!=null&&o.length?Object(b.j)(n(parseInt(r)).singular):""}],groupName:[function(r){return[r.currentTab,r.aggregationLabel]},function(r,o){return r==="-1"?{singular:"person",plural:"persons"}:o(parseInt(r))}],breadcrumbs:[function(r){return[r.currentTabName,r.currentTab]},function(r,o){return[{name:r,path:d.a.groups(o)}]}]},actionToUrl:function(){return{setTab:function(n){var t=n.tab;return t!=="-1"?d.a.groups(t):d.a.persons()}}},urlToAction:function(o){var n=o.actions,t=o.values;return{"/groups/:id":function(c){var A=c.id;A&&(n.setTab(A),n.loadGroups())},"/persons":function(){t.currentTab!=="-1"&&n.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(S,P,e){"use strict";e.d(P,"a",function(){return u});var E=e("./node_modules/kea/lib/index.esm.js"),x=e("./frontend/src/lib/components/PageHeader.tsx"),D=e("./node_modules/react/index.js"),l=e.n(D),s=e("./node_modules/core-js/modules/es.array.includes.js"),L=e("./node_modules/core-js/modules/es.string.includes.js"),y=e("./node_modules/core-js/modules/es.array.map.js"),T=e("./node_modules/antd/es/tabs/index.js"),m=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),_=e("./frontend/src/lib/utils.tsx"),O=e("./frontend/src/models/groupsModel.ts"),M=e("./frontend/src/scenes/groups/groupsListLogic.ts");function I(){var v=Object(E.useActions)(M.a),b=v.setTab,g=Object(E.useValues)(M.a),d=g.currentTab,j=Object(E.useValues)(O.a),h=j.groupTypes,r=j.aggregationLabel,o=Object(E.useValues)(m.b),n=o.groupsAccessStatus,t=[m.a.HasAccess,m.a.HasGroupTypes,m.a.NoAccess].includes(n);return l.a.createElement(T.a,{activeKey:d,onChange:function(c){return b(c)}},l.a.createElement(T.a.TabPane,{tab:"Persons",key:"-1"}),t?l.a.createElement(T.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):h.map(function(a){return l.a.createElement(T.a.TabPane,{tab:Object(_.j)(r(a.group_type_index).plural),key:a.group_type_index})}))}function u(v){var b=v.hideGroupTabs,g=Object(E.useValues)(O.a),d=g.showGroupsOptions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{title:"Persons".concat(d?" & Groups":""),caption:"A catalog of your product's end users".concat(d?" and groups":"",".")}),!b&&d&&l.a.createElement(I,null))}try{u.displayName="PersonPageHeader",u.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:u.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(v){}}}]);
