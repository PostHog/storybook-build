(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{4254:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20),_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4255),_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1__),options={insert:"head",singleton:!1};_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1___default.a,options),_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_Persons_scss__WEBPACK_IMPORTED_MODULE_1___default.a.locals},4255:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:#5375ff;cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),module.exports=exports},4271:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(70),_interopRequireDefault=__webpack_require__(25);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(81)),React=_interopRequireWildcard(__webpack_require__(0)),_UserOutlined=_interopRequireDefault(__webpack_require__(4272)),_AntdIcon=_interopRequireDefault(__webpack_require__(110)),UserOutlined=function UserOutlined(props,ref){return React.createElement(_AntdIcon.default,(0,_objectSpread2.default)((0,_objectSpread2.default)({},props),{},{ref:ref,icon:_UserOutlined.default}))};UserOutlined.displayName="UserOutlined";var _default=React.forwardRef(UserOutlined);exports.default=_default},4272:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"}},4414:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RelatedGroups}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),LemonTable=__webpack_require__(244),groupsModel=__webpack_require__(129),UserOutlined=__webpack_require__(4271),UserOutlined_default=__webpack_require__.n(UserOutlined),utils=__webpack_require__(10),PersonHeader=__webpack_require__(348),regenerator=(__webpack_require__(41),__webpack_require__(45),__webpack_require__(39),__webpack_require__(49),__webpack_require__(7)),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(67),__webpack_require__(12)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),api=__webpack_require__(21),teamLogic=__webpack_require__(27),relatedGroupsLogic=Object(index_esm.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[teamLogic.a,["currentTeamId"]]},props:{},key:function key(props){var _props$groupTypeIndex;return"".concat(null!==(_props$groupTypeIndex=props.groupTypeIndex)&&void 0!==_props$groupTypeIndex?_props$groupTypeIndex:"person","-").concat(props.id)},actions:function actions(){return{loadRelatedActors:!0}},loaders:function loaders(_ref){var _loadRelatedActors,values=_ref.values,props=_ref.props;return{relatedActors:[[],{loadRelatedActors:(_loadRelatedActors=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var url;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return url="api/projects/".concat(values.currentTeamId,"/groups/related?").concat(Object(utils.zb)({group_type_index:props.groupTypeIndex,id:props.id})),_context.next=3,api.a.get(url);case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)}))),function loadRelatedActors(){return _loadRelatedActors.apply(this,arguments)}),setGroup:function setGroup(){return[]}}]}},events:function events(_ref2){return{afterMount:_ref2.actions.loadRelatedActors}}}),GroupActorHeader=__webpack_require__(915);function RelatedGroups(_ref){var groupTypeIndex=_ref.groupTypeIndex,id=_ref.id,_useValues=Object(index_esm.useValues)(relatedGroupsLogic({groupTypeIndex:groupTypeIndex,id:id})),relatedActors=_useValues.relatedActors,relatedActorsLoading=_useValues.relatedActorsLoading,aggregationLabel=Object(index_esm.useValues)(groupsModel.a).aggregationLabel,columns=[{title:"Type",key:"type",render:function RenderActor(_,actor){return"group"===actor.type?react_default.a.createElement(react_default.a.Fragment,null,Object(utils.j)(aggregationLabel(actor.group_type_index).singular)):react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(UserOutlined_default.a,null)," Person")}},{title:"id",key:"id",render:function RenderActor(_,actor){return"group"==actor.type?react_default.a.createElement(GroupActorHeader.a,{actor:actor}):react_default.a.createElement(PersonHeader.a,{person:actor,withIcon:!1})}}];return react_default.a.createElement(LemonTable.a,{dataSource:relatedActors,columns:columns,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:relatedActorsLoading,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{RelatedGroups.displayName="RelatedGroups",RelatedGroups.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:RelatedGroups.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(__react_docgen_typescript_loader_error){}},4513:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.merge-split-person .activity-header{background-color:#f2f2f2;border-top:1px solid rgba(0,0,0,.15);border-bottom:1px solid rgba(0,0,0,.15);margin-left:-24px;margin-right:-24px;padding:8px 0;display:flex;justify-content:center;margin-bottom:1rem}.merge-split-person .ant-modal-header{border-bottom:0}.merge-split-person .ant-modal-body{padding-top:0}.merge-split-person .ant-radio-wrapper{margin-right:2px}.merge-split-person .ant-col{margin-right:1rem}.merge-split-person code{background-color:#f2f2f2;color:#35416b;padding:4px 8px;border-radius:4px}",""]),module.exports=exports},4750:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Person",(function(){return Person}));__webpack_require__(143),__webpack_require__(32),__webpack_require__(125);var ActivityType,react=__webpack_require__(0),react_default=__webpack_require__.n(react),tabs=__webpack_require__(577),dropdown=__webpack_require__(909),menu=__webpack_require__(358),tag=__webpack_require__(1742),popconfirm=__webpack_require__(4152),es_button=__webpack_require__(142),InfoCircleOutlined=__webpack_require__(644),events=__webpack_require__(1746),SessionRecordingsTable=__webpack_require__(2447),index_esm=__webpack_require__(1),personsLogic=__webpack_require__(1744),PersonHeader=__webpack_require__(348),CopyToClipboard=(__webpack_require__(4254),__webpack_require__(914)),DownOutlined=__webpack_require__(751),modal=(__webpack_require__(61),__webpack_require__(60),__webpack_require__(1251)),row=__webpack_require__(261),es_radio=__webpack_require__(1222),col=__webpack_require__(243),es_select=__webpack_require__(307),injectStylesIntoStyleTag=__webpack_require__(20),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),MergeSplitPerson=__webpack_require__(4513),MergeSplitPerson_default=__webpack_require__.n(MergeSplitPerson),options={insert:"head",singleton:!1},regenerator=(injectStylesIntoStyleTag_default()(MergeSplitPerson_default.a,options),MergeSplitPerson_default.a.locals,__webpack_require__(45),__webpack_require__(39),__webpack_require__(49),__webpack_require__(7)),regenerator_default=__webpack_require__.n(regenerator),defineProperty=__webpack_require__(3),defineProperty_default=__webpack_require__.n(defineProperty),asyncToGenerator=(__webpack_require__(67),__webpack_require__(12)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),lib=__webpack_require__(26),api=__webpack_require__(21),utils=__webpack_require__(10),eventUsageLogic=__webpack_require__(36);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}!function(ActivityType){ActivityType.SPLIT="split",ActivityType.MERGE="merge"}(ActivityType||(ActivityType={}));var mergeSplitPersonLogic=Object(index_esm.kea)({props:{},key:function key(props){return props.person.id},path:function path(key){return["scenes","persons","mergeSplitPersonLogic",key||"new"]},connect:function connect(){return{actions:[Object(personsLogic.a)({syncWithUrl:!0}),["setListFilters","loadPersons","setPerson","setSplitMergeModalShown"]],values:[Object(personsLogic.a)({syncWithUrl:!0}),["persons"]]}},actions:{setActivity:function setActivity(activity){return{activity:activity}},setSelectedPersonsToMerge:function setSelectedPersonsToMerge(persons){return{persons:persons}},setSelectedPersonToAssignSplit:function setSelectedPersonToAssignSplit(id){return{id:id}},cancel:!0},reducers:function reducers(_ref){var props=_ref.props;return{activity:[ActivityType.MERGE,{setActivity:function setActivity(_,_ref2){return _ref2.activity}}],person:[props.person,{}],selectedPersonsToMerge:[[],{setSelectedPersonsToMerge:function setSelectedPersonsToMerge(_,_ref3){return _ref3.persons}}],selectedPersonsToAssignSplit:[null,{setSelectedPersonToAssignSplit:function setSelectedPersonToAssignSplit(_,_ref4){return _ref4.id}}]}},listeners:function listeners(_ref5){var actions=_ref5.actions,values=_ref5.values;return{setListFilters:function setListFilters(){actions.loadPersons()},cancel:function cancel(){values.executedLoading||actions.setSplitMergeModalShown(!1)}}},loaders:function loaders(_ref6){var _execute,values=_ref6.values,actions=_ref6.actions;return{executed:[!1,{execute:(_execute=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var newPerson;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(values.activity!==ActivityType.MERGE){_context.next=12;break}return _context.next=3,api.a.create("api/person/"+values.person.id+"/merge/",{ids:values.selectedPersonsToMerge});case 3:if(!(newPerson=_context.sent).id){_context.next=10;break}return Object(utils.xb)("Persons succesfully merged.","All users have been succesfully merged. Changes should take effect immediately."),eventUsageLogic.f.actions.reportPersonMerged(values.selectedPersonsToMerge.length),actions.setSplitMergeModalShown(!1),actions.setPerson(newPerson),_context.abrupt("return",!0);case 10:_context.next=21;break;case 12:return _context.next=14,api.a.create("api/person/"+values.person.id+"/split/",_objectSpread({},values.selectedPersonsToAssignSplit?{main_distinct_id:values.selectedPersonsToAssignSplit}:{}));case 14:if(!_context.sent.success){_context.next=21;break}return Object(utils.xb)("Person succesfully split.","We are in the process of splitting this person. It may take up to a couple of minutes to complete."),eventUsageLogic.f.actions.reportPersonSplit(values.person.distinct_ids.length),actions.setSplitMergeModalShown(!1),lib.router.actions.push("/persons"),_context.abrupt("return",!0);case 21:return _context.abrupt("return",!1);case 22:case"end":return _context.stop()}}),_callee)}))),function execute(){return _execute.apply(this,arguments)})}]}},events:function events(_ref7){return{afterMount:[_ref7.actions.loadPersons]}}}),InlineMessage=__webpack_require__(383),Tooltip=__webpack_require__(44);function MergeSplitPerson_MergeSplitPerson(_ref){var person=_ref.person,logicProps={person:person},_useValues=Object(index_esm.useValues)(mergeSplitPersonLogic(logicProps)),activity=_useValues.activity,executedLoading=_useValues.executedLoading,_useActions=Object(index_esm.useActions)(mergeSplitPersonLogic(logicProps)),setActivity=_useActions.setActivity,execute=_useActions.execute,cancel=_useActions.cancel;return react_default.a.createElement(modal.a,{visible:!0,title:"Merge/split persons",onCancel:cancel,className:"merge-split-person",okText:"".concat(Object(utils.j)(activity)," persons"),onOk:execute,okButtonProps:{loading:executedLoading},cancelButtonProps:{disabled:executedLoading}},react_default.a.createElement("div",{className:"activity-header"},react_default.a.createElement(row.a,{align:"middle"},react_default.a.createElement(es_radio.a.Group,{onChange:function onChange(e){return setActivity(e.target.value)},value:activity},react_default.a.createElement(col.a,{className:"tab-btn ant-btn"},react_default.a.createElement(es_radio.a,{value:"merge"},"Merge")),react_default.a.createElement(col.a,{className:"tab-btn ant-btn"},react_default.a.createElement(es_radio.a,{value:"split",disabled:person.distinct_ids.length<2},person.distinct_ids.length<2?react_default.a.createElement(Tooltip.a,{title:"Only persons with more than two distinct IDs can be split.",delayMs:0},"Split"):react_default.a.createElement(react_default.a.Fragment,null,"Split")))))),react_default.a.createElement(index_esm.BindLogic,{logic:mergeSplitPersonLogic,props:logicProps},react_default.a.createElement(react_default.a.Fragment,null,activity===ActivityType.MERGE?react_default.a.createElement(MergePerson,null):react_default.a.createElement(SplitPerson,null))))}function MergePerson(){var _useValues2=Object(index_esm.useValues)(mergeSplitPersonLogic),persons=_useValues2.persons,person=_useValues2.person,executedLoading=_useValues2.executedLoading,_useActions2=Object(index_esm.useActions)(mergeSplitPersonLogic),setListFilters=_useActions2.setListFilters,setSelectedPersonsToMerge=_useActions2.setSelectedPersonsToMerge;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("p",{className:"mb"},"Merge all properties and events of the selected persons into ",react_default.a.createElement("strong",null,person.name)," ",react_default.a.createElement("span",{style:{fontSize:"1.2em"}},"("),react_default.a.createElement("code",{title:person.distinct_ids[0]},Object(utils.hb)(person.distinct_ids[0],20)),react_default.a.createElement("span",{style:{fontSize:"1.2em"}},")"),". Properties get merged based on timestamps, see more details on"," ",react_default.a.createElement("a",{href:"https://posthog.com/docs/integrate/user-properties#how-do-values-get-overridden"},"PostHog Docs"),"."),react_default.a.createElement(es_select.a,{mode:"multiple",allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Please select persons to merge",onChange:function onChange(value){return setSelectedPersonsToMerge(value)},filterOption:!1,onSearch:function onSearch(value){setListFilters({search:value})},className:"mt",disabled:executedLoading},persons.results&&persons.results.filter((function(p){return p.uuid!==person.uuid})).map((function(p){return p.id?react_default.a.createElement(es_select.a.Option,{value:p.id,key:p.id},p.name):void 0}))),react_default.a.createElement(InlineMessage.a,{style:{marginTop:16},type:"danger"},"This action is not reversible. Please be sure before continuing."))}function SplitPerson(){var _useValues3=Object(index_esm.useValues)(mergeSplitPersonLogic),person=_useValues3.person,executedLoading=_useValues3.executedLoading,setSelectedPersonToAssignSplit=Object(index_esm.useActions)(mergeSplitPersonLogic).setSelectedPersonToAssignSplit;return person?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("p",null,"This will split all Distinct IDs for this person into unique persons."),react_default.a.createElement("p",null,"You can select a distinct ID for which all the current properties will be assigned (",react_default.a.createElement("i",null,"optional"),"). All other new users will start without any properties."),react_default.a.createElement(es_select.a,{allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Select a distinct ID to which to assign all properties (optional)",onChange:function onChange(value){return setSelectedPersonToAssignSplit(value)},filterOption:!1,disabled:executedLoading},null==person?void 0:person.distinct_ids.map((function(distinct_id){return react_default.a.createElement(es_select.a.Option,{value:distinct_id,key:distinct_id},distinct_id)}))),react_default.a.createElement(InlineMessage.a,{style:{marginTop:16},type:"danger"},react_default.a.createElement("div",null,"This will create ",react_default.a.createElement("strong",null,person.distinct_ids.length-1)," new"," ",Object(utils.nb)(person.distinct_ids.length,"person",void 0,!1),". This might change the numbers in your charts, even historically. Please be certain."))):null}try{MergeSplitPerson_MergeSplitPerson.displayName="MergeSplitPerson",MergeSplitPerson_MergeSplitPerson.__docgenInfo={description:"",displayName:"MergeSplitPerson",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"PersonType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"]={docgenInfo:MergeSplitPerson_MergeSplitPerson.__docgenInfo,name:"MergeSplitPerson",path:"frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"})}catch(__react_docgen_typescript_loader_error){}var LemonTable=__webpack_require__(244),urls=__webpack_require__(19),Link=__webpack_require__(56);function PersonCohorts(){var _useValues=Object(index_esm.useValues)(personsLogic.a),cohorts=_useValues.cohorts,cohortsLoading=_useValues.cohortsLoading,loadCohorts=Object(index_esm.useActions)(personsLogic.a).loadCohorts;Object(react.useEffect)((function(){null!==cohorts||cohortsLoading||loadCohorts()}),[cohorts,cohortsLoading]);var columns=[{title:"Name",dataIndex:"name",key:"name",className:"ph-no-capture",render:function RenderName(_,cohort){return react_default.a.createElement(Link.a,{to:urls.a.cohort(cohort.id)},react_default.a.createElement("strong",null,cohort.name))},sorter:function sorter(a,b){return(a.name||"").localeCompare(b.name||"")}},{title:"Users in cohort",render:function RenderCount(count){return count.toLocaleString()},dataIndex:"count",sorter:function sorter(a,b){return(a.count||0)-(b.count||0)}}];return react_default.a.createElement(LemonTable.a,{dataSource:cohorts||[],loading:cohortsLoading,columns:columns,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},emptyState:"This person doesn't belong to any cohort"})}var PropertiesTable=__webpack_require__(916),TimezoneAware=__webpack_require__(237),types=__webpack_require__(4),PageHeader=__webpack_require__(210),RelatedGroups=__webpack_require__(4414),groupsAccessLogic=__webpack_require__(420),TabPane=tabs.a.TabPane,scene={component:Person,logic:personsLogic.a,paramsToProps:function paramsToProps(_ref){return{syncWithUrl:!0,urlId:_ref.params._}}};function PersonCaption(_ref2){var person=_ref2.person;return react_default.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},react_default.a.createElement("div",{className:"mr"},react_default.a.createElement("span",{className:"text-muted"},"IDs:")," ",react_default.a.createElement(CopyToClipboard.a,{tooltipMessage:null,description:"person distinct ID",style:{justifyContent:"flex-end"}},person.distinct_ids[0]),person.distinct_ids.length>1&&react_default.a.createElement(dropdown.a,{overlay:react_default.a.createElement(menu.a,null,person.distinct_ids.slice(1).map((function(distinct_id){return react_default.a.createElement(menu.a.Item,{key:distinct_id},react_default.a.createElement(CopyToClipboard.a,{description:"person distinct ID",iconStyle:{color:"var(--primary)"}},distinct_id))}))),trigger:["click"]},react_default.a.createElement(tag.a,{className:"extra-ids"},"+",person.distinct_ids.length-1,react_default.a.createElement(DownOutlined.a,null)))),react_default.a.createElement("div",null,react_default.a.createElement("span",{className:"text-muted"},"First seen:")," ",person.created_at?react_default.a.createElement(TimezoneAware.b,{time:person.created_at}):"unknown"))}function Person(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},urlId=_ref3._,personsLogicProps={syncWithUrl:!0,urlId:urlId},_useValues=Object(index_esm.useValues)(Object(personsLogic.a)(personsLogicProps)),person=_useValues.person,personLoading=_useValues.personLoading,deletedPersonLoading=_useValues.deletedPersonLoading,currentTab=_useValues.currentTab,showSessionRecordings=_useValues.showSessionRecordings,splitMergeModalShown=_useValues.splitMergeModalShown,_useActions=Object(index_esm.useActions)(Object(personsLogic.a)(personsLogicProps)),deletePerson=_useActions.deletePerson,editProperty=_useActions.editProperty,navigateToTab=_useActions.navigateToTab,setSplitMergeModalShown=_useActions.setSplitMergeModalShown,_useValues2=Object(index_esm.useValues)(groupsAccessLogic.b),groupsEnabled=_useValues2.groupsEnabled;return person?react_default.a.createElement(index_esm.BindLogic,{logic:personsLogic.a,props:personsLogicProps},react_default.a.createElement(PageHeader.a,{title:Object(PersonHeader.b)(person),caption:react_default.a.createElement(PersonCaption,{person:person}),buttons:react_default.a.createElement("div",null,react_default.a.createElement(popconfirm.a,{title:"Are you sure you want to delete this person?",onConfirm:deletePerson,okText:"Yes, delete ".concat(Object(PersonHeader.b)(person)),cancelText:"No, cancel"},react_default.a.createElement(es_button.a,{className:"text-danger",disabled:deletedPersonLoading,loading:deletedPersonLoading,"data-attr":"delete-person"},"Delete person")),react_default.a.createElement(es_button.a,{onClick:function onClick(){return setSplitMergeModalShown(!0)},"data-attr":"merge-person-button",style:{marginLeft:8}},"Split or merge IDs"))}),react_default.a.createElement(tabs.a,{activeKey:currentTab,onChange:function onChange(tab){navigateToTab(tab)}},react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"persons-properties-tab"},"Properties"),key:types.w.PROPERTIES},react_default.a.createElement(PropertiesTable.a,{properties:person.properties||{},searchable:!0,onEdit:editProperty,sortProperties:!0,embedded:!1,onDelete:function onDelete(key){return editProperty(key,void 0)}})),react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"persons-events-tab"},"Events"),key:types.w.EVENTS},react_default.a.createElement(events.b,{pageKey:person.distinct_ids.join("__"),fixedFilters:{person_id:person.id},hidePersonColumn:!0,sceneUrl:urls.a.person(urlId||person.distinct_ids[0]||String(person.id),!1)})),showSessionRecordings&&react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"person-session-recordings-tab"},"Recordings"),key:types.w.SESSION_RECORDINGS},react_default.a.createElement(SessionRecordingsTable.a,{key:person.uuid,personUUID:person.uuid,isPersonPage:!0})),react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"persons-cohorts-tab"},"Cohorts"),key:types.w.COHORTS},react_default.a.createElement(PersonCohorts,null)),groupsEnabled&&person.uuid&&react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"persons-related-tab"},"Related groups",react_default.a.createElement(Tooltip.a,{title:"People and groups that have shared events with this person in the last 90 days."},react_default.a.createElement(InfoCircleOutlined.a,{style:{marginLeft:6,marginRight:0}}))),key:types.w.RELATED},react_default.a.createElement(RelatedGroups.a,{id:person.uuid,groupTypeIndex:null}))),splitMergeModalShown&&person&&react_default.a.createElement(MergeSplitPerson_MergeSplitPerson,{person:person})):personLoading?react_default.a.createElement(utils.b,null):react_default.a.createElement(PageHeader.a,{title:"Person not found",caption:urlId?"There's no person matching distinct ID \"".concat(urlId,'".'):void 0})}try{Person.displayName="Person",Person.__docgenInfo={description:"",displayName:"Person",props:{_:{defaultValue:null,description:"",name:"_",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Person.tsx#Person"]={docgenInfo:Person.__docgenInfo,name:"Person",path:"frontend/src/scenes/persons/Person.tsx#Person"})}catch(__react_docgen_typescript_loader_error){}}}]);