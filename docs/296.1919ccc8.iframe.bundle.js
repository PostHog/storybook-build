(window.webpackJsonp=window.webpackJsonp||[]).push([[296],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(U,h,s){"use strict";s.r(h),s.d(h,"SessionsRecordings",function(){return w}),s.d(h,"scene",function(){return Le});var x=s("./node_modules/core-js/modules/es.array.map.js"),S=s("./node_modules/core-js/modules/es.object.values.js"),L=s("./frontend/src/lib/components/PageHeader.tsx"),F=s("./frontend/src/scenes/teamLogic.tsx"),l=s("./node_modules/kea/lib/index.esm.js"),f=s("./frontend/src/scenes/urls.ts"),K=s("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),A=s("./frontend/src/lib/components/AlertMessage/index.ts"),c=s("./frontend/@posthog/lemon-ui/src/index.ts"),P=s("./node_modules/antd/es/tabs/index.js"),j=s("./frontend/src/types.ts"),Ee=s("./node_modules/core-js/modules/es.object.keys.js"),Ae=s("./node_modules/core-js/modules/es.array.filter.js"),Te=s("./node_modules/core-js/modules/es.object.to-string.js"),Ie=s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),De=s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Be=s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),q=s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_=s.n(q),ee=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),se=s.n(ee),Ve=s("./node_modules/core-js/modules/es.symbol.js"),Ke=s("./node_modules/core-js/modules/es.symbol.description.js"),Ue=s("./node_modules/core-js/modules/es.regexp.exec.js"),Me=s("./node_modules/core-js/modules/es.string.search.js"),Ge=s("./node_modules/core-js/modules/es.array.concat.js"),ne=s("./node_modules/react/index.js"),T=s("./frontend/src/scenes/session-recordings/saved-playlists/savedSessionRecordingPlaylistsLogic.ts"),M=s("./node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),G=s("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),te=s("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),oe=s("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),ae=s("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),re=s("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),ie=s("./frontend/@posthog/apps-common/src/index.ts"),le=s("./frontend/src/lib/components/LemonButton/index.ts"),I=s("./frontend/src/lib/components/icons.tsx"),e=s("./node_modules/react/jsx-runtime.js");function D(t){var o=t.tab,a=Object(l.useValues)(Object(T.b)({tab:o})),n=a.newPlaylistLoading,u=Object(l.useActions)(Object(T.b)({tab:o})),b=u.createSavedPlaylist;return Object(e.jsx)("div",{className:"flex items-center justify-center",children:Object(e.jsxs)("div",{className:"max-w-lg mt-12 flex flex-col items-center",children:[Object(e.jsx)("h2",{className:"text-xl",children:"There are no playlists that match these filters"}),Object(e.jsx)("p",{className:"text-muted",children:"Once you create a playlist, it will show up here."}),Object(e.jsx)(le.a,{size:"large",type:"primary","data-attr":"add-session-playlist-button-empty-state",icon:Object(e.jsx)(I.IconPlus,{}),loading:n,onClick:function(){b({},!0)},children:"New Playlist"})]})})}try{D.displayName="SavedSessionRecordingPlaylistsEmptyState",D.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylistsEmptyState",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"recent"'},{value:'"playlists"'},{value:'"file-playback"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"]={docgenInfo:D.__docgenInfo,name:"SavedSessionRecordingPlaylistsEmptyState",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"})}catch(t){}var ce=s("./node_modules/clsx/dist/clsx.m.js"),de=s("./frontend/src/lib/components/LemonButton/More.tsx");function z(t,o){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,n)}return a}function W(t){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?z(Object(a),!0).forEach(function(n){se()(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function B(t){var o=t.tab,a=Object(T.b)({tab:o}),n=Object(l.useValues)(a),u=n.playlists,b=n.playlistsLoading,m=n.filters,p=n.sorting,R=n.pagination,i=n.newPlaylistLoading,v=Object(l.useActions)(a),d=v.setSavedPlaylistsFilters,O=v.updateSavedPlaylist,C=v.duplicateSavedPlaylist,N=v.deleteSavedPlaylistWithUndo,Fe=Object(l.useValues)(re.a),Ce=Fe.meFirstMembers,Ne=[{width:0,dataIndex:"pinned",render:function(r,y){var E=y.short_id;return Object(e.jsx)(c.LemonButton,{size:"small",status:"primary-alt",onClick:function(){return O({short_id:E,pinned:!r})},children:r?Object(e.jsx)(M.a,{}):Object(e.jsx)(G.a,{})})}},{title:"Name",dataIndex:"name",render:function(r,y){var E=y.short_id,Q=y.derived_name,k=y.description;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(c.Link,{className:Object(ce.a)("font-semibold",!r&&"italic"),to:f.a.sessionRecordingPlaylist(E),children:r||Q||"(Untitled)"}),k?Object(e.jsx)("div",{className:"truncate",children:k}):null]})}},{title:"Type",dataIndex:"is_static",width:0,sorter:!0,render:function(r){return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(c.LemonTag,{type:"success",className:"uppercase",children:r?"static":"dynamic"})})}},W(W({},Object(oe.b)()),{},{width:0}),{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",width:0,render:function(r){return Object(e.jsx)("div",{children:r&&typeof r=="string"&&Object(e.jsx)(ie.TZLabel,{time:r})})}},{width:0,render:function(r,y){return Object(e.jsx)(de.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(c.LemonButton,{status:"stealth",onClick:function(){return C(y,!0)},fullWidth:!0,loading:i,"data-attr":"duplicate-playlist",children:"Duplicate"}),Object(e.jsx)(c.LemonDivider,{}),Object(e.jsx)(c.LemonButton,{status:"danger",onClick:function(){return N(y)},fullWidth:!0,children:"Delete playlist"})]})})}}];return Object(e.jsxs)("div",{className:"space-y-4",children:[Object(e.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(e.jsx)(c.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:function(r){return d({search:r||void 0})},value:m.search||""}),Object(e.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(e.jsx)("div",{className:"flex items-center gap-2",children:Object(e.jsx)(c.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:m.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:function(){return d({pinned:!m.pinned})},icon:Object(ne.cloneElement)(m.pinned?Object(e.jsx)(M.a,{}):Object(e.jsx)(G.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:"Last modified:"}),Object(e.jsx)(ae.a,{disabled:!1,dateFrom:m.dateFrom,dateTo:m.dateTo,onChange:function(r,y){return d({dateFrom:r,dateTo:y!=null?y:void 0})},makeLabel:function(r){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(te.a,{}),Object(e.jsxs)("span",{className:"hide-when-small",children:[" ",r]})]})}})]}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:"Created by:"}),Object(e.jsx)(c.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"}].concat(_()(Ce.map(function(g){return{value:g.user.id,label:g.user.first_name}}))),value:m.createdBy,onChange:function(r){d({createdBy:r})},dropdownMatchSelectWidth:!1})]})]})]}),!b&&u.count<1?Object(e.jsx)(D,{tab:o}):Object(e.jsx)(c.LemonTable,{loading:b,columns:Ne,dataSource:u.results,pagination:R,noSortingCancellation:!0,sorting:p,onSort:function(r){return d({order:r?"".concat(r.order===-1?"-":"").concat(r.columnKey):void 0})},rowKey:"id",loadingSkeletonRows:T.a,nouns:["playlist","playlists"]})]})}try{B.displayName="SavedSessionRecordingPlaylists",B.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:B.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(t){}var ue=s("./frontend/src/lib/components/Tooltip.tsx"),V=s("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts"),Y=s("./frontend/src/lib/components/Spinner/Spinner.tsx"),J=s("./node_modules/kea-router/lib/index.js"),H=s("./frontend/src/scenes/session-recordings/settings/SessionRecordingSettings.tsx"),X=s("./frontend/src/scenes/session-recordings/player/new-playlist/PlayerNewPlaylist.tsx"),me=s("./frontend/src/lib/logic/featureFlagLogic.ts"),je=s("./frontend/src/lib/constants.tsx"),ge=s("./node_modules/antd/lib/upload/Dragger.js"),pe=s.n(ge),ye=s("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),be=s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ve=s.n(be),fe=s("./node_modules/@babel/runtime/regenerator/index.js"),$=s.n(fe),ze=s("./node_modules/core-js/modules/es.promise.js"),We=s("./node_modules/core-js/modules/es.array.iterator.js"),Ye=s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),he=s("./node_modules/kea-loaders/lib/index.js"),Oe=s("./frontend/src/lib/utils/eventUsageLogic.ts"),xe=s("./frontend/src/lib/utils.tsx"),Z=Object(l.kea)([Object(l.path)(["scenes","session-recordings","detail","sessionRecordingDetailLogic"]),Object(l.connect)({actions:[Oe.e,["reportRecordingLoadedFromFile"]]}),Object(he.loaders)(function(t){var o=t.actions;return{sessionRecording:{__default:null,loadFromFile:function(){var a=ve()($.a.mark(function u(b){var m,p;return $.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,new Promise(function(v,d){var O=new FileReader;O.onload=function(C){var N;v((N=C.target)===null||N===void 0?void 0:N.result)},O.onerror=function(C){d(C)},O.readAsText(b)});case 3:if(m=i.sent,p=JSON.parse(m),!(!p.version||!p.data)){i.next=7;break}throw new Error("File does not appear to be a valid session recording export");case 7:if(p.version!=="2022-12-02"){i.next=12;break}return o.reportRecordingLoadedFromFile({success:!0}),i.abrupt("return",p.data);case 12:throw new Error("File version is not supported");case 13:i.next=20;break;case 15:return i.prev=15,i.t0=i.catch(0),o.reportRecordingLoadedFromFile({success:!1,error:"".concat(i.t0)}),c.lemonToast.error("File import failed: ".concat(i.t0)),i.abrupt("return",null);case 20:case"end":return i.stop()}},u,null,[[0,15]])}));function n(u){return a.apply(this,arguments)}return n}(),resetSessionRecording:function(){return null}}}}),Object(l.reducers)({playerKey:["file-playback",{loadFromFileSuccess:function(){return"file-playback-".concat(Object(xe.Jb)())},resetSessionRecording:function(){return"file-playback"}}]}),Object(J.beforeUnload)(function(t){var o=t.values,a=t.actions;return{enabled:function(){return!!o.sessionRecording},message:"The loaded session recording will be lost. Are you sure you want to leave?",onConfirm:function(){a.resetSessionRecording()}}}),Object(l.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Recordings",path:f.a.sessionRecordings()},{name:"Import"}]}]})]),Se=s("./frontend/src/scenes/userLogic.ts"),Pe=s("./frontend/src/lib/components/PayGatePage/PayGatePage.tsx");function Re(){var t=Object(l.useActions)(Z),o=t.loadFromFile,a=t.resetSessionRecording,n=Object(l.useValues)(Z),u=n.sessionRecording,b=n.sessionRecordingLoading,m=n.playerKey,p=Object(l.useValues)(Se.a),R=p.hasAvailableFeature,i=R(j.e.RECORDINGS_FILE_EXPORT);return i?Object(e.jsx)("div",{children:b?Object(e.jsx)(Y.b,{}):u?Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(A.a,{type:"info",action:{onClick:function(){return a()},children:"Load a different recording"},children:"You are viewing a recording loaded from a file."}),Object(e.jsx)(ye.a,{sessionRecordingId:"",sessionRecordingData:u,playerKey:m})]}):Object(e.jsx)(pe.a,{name:"file",multiple:!1,accept:".json",showUploadList:!1,beforeUpload:function(d){return o(d),!1},children:Object(e.jsxs)("div",{className:"p-20 flex flex-col items-center justify-center space-y-2 text-muted-alt",children:[Object(e.jsxs)("p",{className:"flex items-center gap-2 font-semibold",children:[Object(e.jsx)(I.IconUploadFile,{className:"text-xl"}),"Load recording"]}),Object(e.jsx)("p",{className:"text-muted-alt ",children:"Drag and drop your exported recording here or click to open the file browser."})]})})}):Object(e.jsx)(Pe.a,{featureKey:j.e.RECORDINGS_FILE_EXPORT,featureName:"Recording Exports",header:Object(e.jsxs)(e.Fragment,{children:["Export and playback ",Object(e.jsx)("span",{className:"highlight",children:"Recordings from file"}),"!"]}),caption:"Store your recordings outside of PostHog wherever you like.",docsLink:"https://posthog.com/docs/user-guides/session-recordings"})}function w(){var t=Object(l.useValues)(F.a),o=t.currentTeam,a=Object(l.useValues)(V.c),n=a.tab,u=a.newPlaylistLoading,b=Object(l.useActions)(V.c),m=b.saveNewPlaylist,p=o&&!(o!=null&&o.session_recording_opt_in),R=Object(l.useValues)(me.a),i=R.featureFlags,v=[j.ab.Recent,j.ab.Playlists];return i[je.i.RECORDINGS_EXPORT]||v.push(j.ab.FilePlayback),Object(e.jsxs)("div",{children:[Object(e.jsx)(L.a,{title:Object(e.jsx)("div",{children:"Session Recordings"}),buttons:Object(e.jsxs)(e.Fragment,{children:[!p&&Object(e.jsx)(c.LemonButton,{type:"secondary",icon:Object(e.jsx)(I.IconSettings,{}),onClick:function(){return Object(H.b)()},children:"Configure"}),Object(e.jsx)(ue.a,{placement:"topRight",title:n===j.ab.Recent?"Save the currently filters as a dynamic playlist":"Create a new playlist",children:n===j.ab.Recent?Object(e.jsx)(c.LemonButtonWithSideAction,{type:"primary",onClick:function(){m()},loading:u,"data-attr":"save-recordings-playlist-button",sideAction:{popup:{placement:"bottom-end",className:"save-recordings-playlist-overlay",actionable:!0,overlay:Object(e.jsx)(c.LemonButton,{status:"stealth",onClick:function(){Object(X.a)({sessionRecordingId:"global",playerKey:"recents",defaultStatic:!0})},"data-attr":"create-new-playlist-button",fullWidth:!0,children:"Create new static playlist"})},"data-attr":"saved-recordings-playlists-new-playlist-dropdown"},children:"Save as dynamic playlist"}):n===j.ab.Playlists?Object(e.jsx)(c.LemonButton,{type:"primary",onClick:function(){Object(X.a)({sessionRecordingId:"global",playerKey:"recents"})},loading:u,"data-attr":"save-recordings-playlist-button",children:"New playlist"}):null})]})}),Object(e.jsx)(P.a,{activeKey:n,animated:!1,style:{borderColor:"#D9D9D9"},onChange:function(O){return J.router.actions.push(f.a.sessionRecordings(O))},children:Object.values(j.ab).map(function(d){return Object(e.jsx)(P.a.TabPane,{tab:Object(V.b)(d)},d)})}),p?Object(e.jsx)("div",{className:"mb-4",children:Object(e.jsx)(A.a,{type:"info",action:{type:"secondary",icon:Object(e.jsx)(I.IconSettings,{}),onClick:function(){return Object(H.b)()},children:"Configure"},children:"Session recordings are currently disabled for this project."})}):null,n?n===j.ab.Recent?Object(e.jsx)(K.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0}):n===j.ab.Playlists?Object(e.jsx)(B,{tab:j.ab.Playlists}):n===j.ab.FilePlayback?Object(e.jsx)(Re,{}):null:Object(e.jsx)(Y.a,{})]})}var Le={component:w,logic:V.c}},"./node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(U,h,s){"use strict";var x=s("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),S=s("./node_modules/react/index.js"),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},F=L,l=s("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),f=function(c,P){return S.createElement(l.a,Object(x.a)(Object(x.a)({},c),{},{ref:P,icon:F}))};f.displayName="PushpinFilled";var K=h.a=S.forwardRef(f)},"./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(U,h,s){"use strict";var x=s("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),S=s("./node_modules/react/index.js"),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},F=L,l=s("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),f=function(c,P){return S.createElement(l.a,Object(x.a)(Object(x.a)({},c),{},{ref:P,icon:F}))};f.displayName="PushpinOutlined";var K=h.a=S.forwardRef(f)}}]);
