"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[94148],{"../../frontend/src/scenes/data-pipelines/legacy-plugins/LegacyPluginScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LegacyPluginScene:()=>LegacyPluginScene,legacyPluginSceneLogic:()=>legacyPluginSceneLogic,scene:()=>scene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),scenes_pipeline_PipelineNodeLogs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/pipeline/PipelineNodeLogs.tsx"),scenes_pipeline_PipelineNodeMetrics__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/pipeline/PipelineNodeMetrics.tsx"),scenes_pipeline_PipelinePluginConfiguration__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/pipeline/PipelinePluginConfiguration.tsx"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/types.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let LEGACY_PLUGIN_SCENE_TABS=["configuration","metrics","logs","history"],legacyPluginSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(_ref=>{let{id}=_ref;return null!=id?id:"new"}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["scenes","data-pipelines","legacy-plugins","legacyPluginSceneLogic",key]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setCurrentTab:tab=>({tab})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)(()=>({currentTab:["configuration",{setCurrentTab:(_,_ref2)=>{let{tab}=_ref2;return tab}}]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({logicProps:[()=>[(_,props)=>props],props=>props],breadcrumbs:[()=>[],()=>[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_7__.x.DataPipelines,name:"Data pipelines",path:scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.dataPipelines()},{key:[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_7__.x.DataPipelines,"destinations"],name:"Destinations",path:scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.dataPipelines("destinations")},{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_7__.x.LegacyPlugin,name:"Plugin destination (deprecated)"}]]}),(0,kea_router__WEBPACK_IMPORTED_MODULE_1__.actionToUrl)(_ref3=>{let{values}=_ref3;return{setCurrentTab:()=>[kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.location.pathname,{...kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.searchParams,tab:values.currentTab},kea_router__WEBPACK_IMPORTED_MODULE_1__.router.values.hashParams]}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_1__.urlToAction)(_ref4=>{let{actions,values}=_ref4;return{[scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.legacyPlugin(":id")]:(_,search)=>{var _search$tab;let possibleTab=null!==(_search$tab=search.tab)&&void 0!==_search$tab?_search$tab:"configuration",tab=LEGACY_PLUGIN_SCENE_TABS.includes(possibleTab)?possibleTab:"configuration";tab!==values.currentTab&&actions.setCurrentTab(tab)}}})]),scene={component:LegacyPluginScene,logic:legacyPluginSceneLogic,paramsToProps:_ref5=>{let{params:{id}}=_ref5;return{id}}};function LegacyPluginScene(){let{currentTab,logicProps}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(legacyPluginSceneLogic),{setCurrentTab}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(legacyPluginSceneLogic),{id}=logicProps,pluginConfigId=parseInt(id),tabs=[{label:"Configuration",key:"configuration",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_pipeline_PipelinePluginConfiguration__WEBPACK_IMPORTED_MODULE_6__.s,{stage:_types__WEBPACK_IMPORTED_MODULE_9__.We.Destination,pluginConfigId:pluginConfigId})},{label:"Metrics",key:"metrics",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_pipeline_PipelineNodeMetrics__WEBPACK_IMPORTED_MODULE_5__._,{id:pluginConfigId})},{label:"Logs",key:"logs",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_pipeline_PipelineNodeLogs__WEBPACK_IMPORTED_MODULE_4__.e,{id:pluginConfigId,stage:_types__WEBPACK_IMPORTED_MODULE_9__.We.Destination})},{label:"History",key:"history",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_2__.DA,{id:id,scope:_types__WEBPACK_IMPORTED_MODULE_9__.jc.PLUGIN})}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_3__.T,{activeKey:currentTab,tabs:tabs,onChange:setCurrentTab})}}}]);