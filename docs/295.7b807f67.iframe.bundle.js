(window.webpackJsonp=window.webpackJsonp||[]).push([[295],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(U,f,e){"use strict";e.d(f,"b",function(){return m}),e.d(f,"a",function(){return W});var B=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),X=e.n(B),w=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=e.n(w),E=e("./node_modules/core-js/modules/es.array.iterator.js"),k=e.n(E),K=e("./node_modules/core-js/modules/es.object.to-string.js"),q=e.n(K),$=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ee=e.n($),G=e("./node_modules/core-js/modules/es.object.from-entries.js"),ce=e.n(G),te=e("./node_modules/core-js/modules/es.array.map.js"),ue=e.n(te),H=e("./node_modules/core-js/modules/es.object.entries.js"),ne=e.n(H),I=e("./node_modules/kea/lib/index.esm.js"),p=e("./node_modules/antd/es/tabs/index.js"),y=e("./frontend/src/scenes/urls.ts"),R=e("./frontend/src/lib/components/Tooltip.tsx"),h=e("./frontend/src/lib/components/icons.tsx"),N=e("./frontend/src/lib/components/TitleWithIcon.tsx"),V=e("./frontend/src/lib/constants.tsx"),ae=e("./frontend/src/lib/logic/featureFlagLogic.ts"),u=e("./node_modules/react/jsx-runtime.js"),me=e.n(u),T,m;(function(i){i.Actions="actions",i.EventDefinitions="events",i.EventPropertyDefinitions="properties",i.IngestionWarnings="warnings"})(m||(m={}));var z=(T={},j()(T,m.EventPropertyDefinitions,y.a.eventPropertyDefinitions()),j()(T,m.EventDefinitions,y.a.eventDefinitions()),j()(T,m.Actions,y.a.actions()),j()(T,m.IngestionWarnings,y.a.ingestionWarnings()),T),J=Object(I.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[ae.a,["featureFlags"]]},actions:{setTab:function(d){return{tab:d}}},reducers:{tab:[m.EventDefinitions,{setTab:function(d,v){var b=v.tab;return b}}]},selectors:{showWarningsTab:[function(i){return[i.featureFlags]},function(i){return!!i[V.h.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(v){var b=v.tab;return z[b]||y.a.events()}}},urlToAction:function(d){var v=d.actions,b=d.values;return Object.fromEntries(Object.entries(z).map(function(P){var M=X()(P,2),S=M[0],L=M[1];return[L,function(){b.tab!==S&&v.setTab(S)}]}))}});function W(i){var d=i.tab,v=Object(I.useValues)(J),b=v.showWarningsTab,P=Object(I.useActions)(J),M=P.setTab;return Object(u.jsxs)(p.a,{tabPosition:"top",animated:!1,activeKey:d,onTabClick:function(L){return M(L)},children:[Object(u.jsx)(p.a.TabPane,{tab:Object(u.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},m.EventDefinitions),Object(u.jsx)(p.a.TabPane,{tab:Object(u.jsx)(N.a,{icon:Object(u.jsx)(R.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(u.jsx)(h.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},m.Actions),Object(u.jsx)(p.a.TabPane,{tab:Object(u.jsx)(N.a,{icon:Object(u.jsx)(R.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(u.jsx)(h.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},m.EventPropertyDefinitions),b&&Object(u.jsx)(p.a.TabPane,{tab:Object(u.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},m.IngestionWarnings)]})}try{W.displayName="DataManagementPageTabs",W.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:W.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(i){}},"./frontend/src/scenes/data-management/ingestion-warnings/IngestionWarningsView.tsx":function(U,f,e){"use strict";e.r(f),e.d(f,"scene",function(){return be}),e.d(f,"IngestionWarningsView",function(){return oe});var B=e("./node_modules/core-js/modules/es.array.join.js"),X=e("./node_modules/core-js/modules/es.regexp.exec.js"),w=e("./node_modules/core-js/modules/es.string.split.js"),j=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/scenes/urls.ts"),k=e("./frontend/src/lib/components/PageHeader.tsx"),K=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),q=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),$=e.n(q),ee=e("./node_modules/@babel/runtime/regenerator/index.js"),G=e.n(ee),ce=e("./node_modules/core-js/modules/es.array.iterator.js"),te=e("./node_modules/core-js/modules/es.object.to-string.js"),ue=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),H=e("./node_modules/kea-loaders/lib/index.js"),ne=e("./frontend/src/lib/api.ts"),I=e("./frontend/src/scenes/teamLogic.tsx"),p=Object(j.kea)([Object(j.path)(["scenes","data-management","ingestion-warnings","ingestionWarningsLogic"]),Object(j.connect)({values:[I.a,["currentTeamId"]]}),Object(H.loaders)(function(n){var s=n.values;return{data:[[],{loadData:function(){var t=$()(G.a.mark(function l(){var o,g;return G.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ne.b.get("api/projects/".concat(s.currentTeamId,"/ingestion_warnings"));case 2:return o=c.sent,g=o.results,c.abrupt("return",g);case 5:case"end":return c.stop()}},l)}));function r(){return t.apply(this,arguments)}return r}()}]}}),Object(j.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Data Management",path:E.a.eventDefinitions()},{name:"Ingestion Warnings",path:E.a.ingestionWarnings()}]}]}),Object(j.events)(function(n){var s=n.actions;return{afterMount:function(){s.loadData()}}})]),y=e("./frontend/src/lib/components/LemonTable/index.ts"),R=e("./frontend/src/lib/components/TZLabel/index.tsx"),h=e("./frontend/src/lib/components/Link.tsx"),N=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),V=e.n(N),ae=e("./node_modules/core-js/modules/es.array.map.js"),u=e("./node_modules/core-js/modules/es.array.fill.js"),me=e("./node_modules/core-js/modules/es.array.slice.js"),T=e("./node_modules/core-js/modules/es.function.name.js"),m=e("./node_modules/core-js/modules/es.array.from.js"),z=e("./node_modules/core-js/modules/es.string.iterator.js"),J=e("./node_modules/core-js/modules/es.symbol.js"),W=e("./node_modules/core-js/modules/es.symbol.description.js"),i=e("./node_modules/core-js/modules/es.symbol.iterator.js"),d=e("./node_modules/react/index.js"),v=e("./node_modules/chart.js/dist/chart.mjs"),b=e("./frontend/src/lib/utils.tsx"),P=e("./frontend/src/lib/dayjs.ts"),M=e("./frontend/src/lib/components/Popup/Popup.tsx"),S=e("./node_modules/@floating-ui/core/dist/floating-ui.core.esm.js"),L=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),je=e.n(L),fe=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss"),se=e.n(fe),Z={};Z.insert="head",Z.singleton=!1;var Te=je()(se.a,Z),Pe=se.a.locals||{},a=e("./node_modules/react/jsx-runtime.js");function ge(n,s){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=ve(n))||s&&n&&typeof n.length=="number"){t&&(n=t);var r=0,l=function(){};return{s:l,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(O){throw O},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,g=!1,A;return{s:function(){t=t.call(n)},n:function(){var O=t.next();return o=O.done,O},e:function(O){g=!0,A=O},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(g)throw A}}}}function ve(n,s){if(!!n){if(typeof n=="string")return re(n,s);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return re(n,s)}}function re(n,s){(s==null||s>n.length)&&(s=n.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=n[t];return r}function F(n){var s=n.summary,t=Object(d.useRef)(null),r=Object(d.useRef)(null),l=Object(j.useValues)(I.a),o=l.timezone,g=Object(d.useState)(null),A=V()(g,2),c=A[0],O=A[1],ye=Object(d.useState)(0),ie=V()(ye,2),he=ie[0],_e=ie[1],de=Object(d.useMemo)(function(){return Object(b.ub)(0,30).map(function(D){return Object(P.a)().subtract(D,"days").format("D MMM YYYY")}).reverse()},[]),le=Object(d.useMemo)(function(){var D=new Array(30).fill(0),_=ge(s.warnings),x;try{for(_.s();!(x=_.n()).done;){var Q=x.value,C=Object(P.c)(Q.timestamp,o);D[Object(P.a)().diff(C,"days")]+=1}}catch(Y){_.e(Y)}finally{_.f()}return D.reverse()},[s]);return Object(d.useEffect)(function(){var D;if(t.current){var _;D=new v.a((_=t.current)===null||_===void 0?void 0:_.getContext("2d"),{type:"bar",data:{labels:de,datasets:[{data:le,minBarLength:3,hoverBackgroundColor:"brand-blue"}]},options:{scales:{x:{display:!1},y:{beginAtZero:!0,display:!1}},plugins:{crosshair:!1,legend:{display:!1},tooltip:{enabled:!1,external:function(Q){var C=Q.tooltip;if(C.opacity===0){O(null);return}var Y=C.dataPoints[0];O(Object(a.jsxs)(a.Fragment,{children:[Y.label,": ",Y.formattedValue]})),_e(C.x)}}},maintainAspectRatio:!1,interaction:{mode:"index",axis:"x",intersect:!1}}})}return function(){var x;(x=D)===null||x===void 0||x.destroy()}},[s,de,le]),Object(a.jsxs)("div",{className:"warning-events-graph",children:[Object(a.jsx)("canvas",{ref:t}),Object(a.jsx)(M.a,{visible:!!c,overlay:c,placement:"bottom-start",middleware:[Object(S.d)({crossAxis:he})],children:Object(a.jsx)("div",{ref:r})})]})}try{F.displayName="WarningEventsGraph",F.__docgenInfo={description:"",displayName:"WarningEventsGraph",props:{summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"IngestionWarningSummary"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"]={docgenInfo:F.__docgenInfo,name:"WarningEventsGraph",path:"frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"})}catch(n){}var be={component:oe,logic:p},Oe={cannot_merge_already_identified:"Refused to merge an already identified user",cannot_merge_with_illegal_distinct_id:"Refused to merge with an illegal distinct id",skipping_event_invalid_uuid:"Refused to process event with invalid uuid"},Ee={cannot_merge_already_identified:function(s){var t=s.details;return Object(a.jsxs)(a.Fragment,{children:["Refused to merge already identified person"," ",Object(a.jsx)(h.a,{to:E.a.person(t.sourcePersonDistinctId),children:t.sourcePersonDistinctId})," into"," ",Object(a.jsx)(h.a,{to:E.a.person(t.targetPersonDistinctId),children:t.targetPersonDistinctId})," via an $identify or $create_alias call"]})},cannot_merge_with_illegal_distinct_id:function(s){var t=s.details;return Object(a.jsxs)(a.Fragment,{children:["Refused to merge an illegal distinct_id"," ",Object(a.jsx)(h.a,{to:E.a.person(t.illegalDistinctId),children:t.illegalDistinctId})," with"," ",Object(a.jsx)(h.a,{to:E.a.person(t.otherDistinctId),children:t.otherDistinctId})," via an $identify or $create_alias call"]})},skipping_event_invalid_uuid:function(s){var t=s.details;return Object(a.jsxs)(a.Fragment,{children:["Refused to process event with invalid uuid: ",Object(a.jsx)("code",{children:t.eventUuid}),"."]})}};function oe(){var n=Object(j.useValues)(p),s=n.data,t=n.dataLoading;return Object(a.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(a.jsx)(k.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),Object(a.jsx)(K.a,{tab:K.b.IngestionWarnings}),Object(a.jsx)("div",{className:"mb-4",children:"Data ingestion related warnings from past 30 days."}),Object(a.jsx)(y.a,{dataSource:s,loading:t,columns:[{title:"Warning",dataIndex:"type",render:function(l,o){var g=Oe[o.type]||o.type;return Object(a.jsxs)(a.Fragment,{children:[g," (",Object(a.jsxs)(h.a,{to:"https://posthog.com/manual/data-management#".concat(g.toLowerCase().split(" ").join("-")),children:["docs",")"]})]})}},{title:"Graph",render:function(l,o){return Object(a.jsx)(F,{summary:o})}},{title:"Events",dataIndex:"count",align:"right",sorter:function(l,o){return l.count-o.count}},{title:"Last Seen",dataIndex:"lastSeen",render:function(l,o){return Object(a.jsx)(R.a,{time:o.lastSeen,showSeconds:!0})},align:"right",sorter:function(l,o){return new Date(l.lastSeen)>new Date(o.lastSeen)?1:-1}}],expandable:{expandedRowRender:pe},defaultSorting:{columnKey:"lastSeen",order:-1},noSortingCancellation:!0})]})}function pe(n){return Object(a.jsx)(y.a,{dataSource:n.warnings,columns:[{title:"Description",key:"description",render:function(t,r){var l=Ee[r.type];return l?l(r):Object(a.jsx)("pre",{children:JSON.stringify(r.details,null,2)})}},{title:"Time",dataIndex:"timestamp",render:function(t,r){return Object(a.jsx)(R.a,{time:r.timestamp,showSeconds:!0})},align:"right"}],embedded:!0,size:"small",showHeader:!1})}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss":function(U,f,e){var B=e("./node_modules/css-loader/dist/runtime/api.js");f=B(!1),f.push([U.i,".warning-events-graph{width:150px}.warning-events-graph canvas{height:36px}",""]),U.exports=f}}]);
