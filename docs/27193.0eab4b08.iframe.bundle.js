"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[27193],{"./frontend/src/scenes/pipeline/batch-exports/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>humanizeBatchExportName});let humanizeBatchExportName=service=>"HTTP"===service?"PostHog HTTP":service},"./frontend/src/scenes/pipeline/destinations/destinationsFiltersLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>destinationsFiltersLogic});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonField/index.ts"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/utils.tsx"),posthog_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/posthog-js@1.162.0/node_modules/posthog-js/dist/module.js"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let destinationsFiltersLogic=(0,kea__WEBPACK_IMPORTED_MODULE_1__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_1__.path)(()=>["scenes","pipeline","destinations","destinationsFiltersLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_1__.connect)({values:[scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__.userLogic,["user"],lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__.h,["featureFlags"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.actions)({setFilters:filters=>({filters}),resetFilters:!0,openFeedbackDialog:!0}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.reducers)(()=>({filters:[{},{setFilters:(state,_ref)=>{let{filters}=_ref;return{...state,...filters}},resetFilters:()=>({showPaused:!0})}]})),(0,kea__WEBPACK_IMPORTED_MODULE_1__.listeners)(_ref2=>{let{values}=_ref2;return{setFilters:async(_ref3,breakpoint)=>{let{filters}=_ref3;filters.search&&filters.search.length>2&&(await breakpoint(1e3),posthog_js__WEBPACK_IMPORTED_MODULE_6__.ZP.capture("cdp destination search",{search:filters.search}))},openFeedbackDialog:async(_,breakpoint)=>{await breakpoint(100),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.dn.openForm({title:"What destination would you like to see?",initialValues:{destination_name:values.filters.search},errors:{destination_name:x=>x?void 0:"Required"},description:void 0,content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_3__.D,{name:"destination_name",label:"Destination",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.DF,{placeholder:"What destination would you like to see?",autoFocus:!0})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_3__.D,{name:"destination_details",label:"Additional information",showOptional:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__._V,{placeholder:"Any extra details about what you would need this destination to do or your overall goal"})})]}),onSubmit:async values=>{posthog_js__WEBPACK_IMPORTED_MODULE_6__.ZP.capture("cdp destination feedback",{...values}),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.UJ.success("Thank you for your feedback!")}})}}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.actionToUrl)(_ref4=>{let{values}=_ref4,urlFromFilters=()=>[kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.location.pathname,{...values.filters},kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.hashParams,{replace:!0}];return{setFilters:()=>urlFromFilters(),resetFilters:()=>urlFromFilters()}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.urlToAction)(_ref5=>{let{actions,values}=_ref5;return{"*":(_,searchParams)=>{(0,lib_utils__WEBPACK_IMPORTED_MODULE_5__.h0)(values.filters,searchParams)||actions.setFilters(searchParams)}}})])},"./frontend/src/scenes/pipeline/destinations/destinationsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>pipelineDestinationsLogic});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),fuse_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/api.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/constants.tsx"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_utils_deleteWithUndo__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/utils/deleteWithUndo.tsx"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/types.ts"),_pipelineAccessLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/scenes/pipeline/pipelineAccessLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/scenes/pipeline/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/scenes/pipeline/utils.tsx"),_destinationsFiltersLogic__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/scenes/pipeline/destinations/destinationsFiltersLogic.tsx");let pipelineDestinationsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_1__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_1__.path)(["scenes","pipeline","destinationsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_1__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__.H,["currentTeamId"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_8__.userLogic,["user","hasAvailableFeature"],_pipelineAccessLogic__WEBPACK_IMPORTED_MODULE_10__.g,["canEnableDestination"],lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_5__.h,["featureFlags"],_destinationsFiltersLogic__WEBPACK_IMPORTED_MODULE_13__.T,["filters"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.actions)({toggleNode:(destination,enabled)=>({destination,enabled}),toggleNodeHogFunction:(destination,enabled)=>({destination,enabled}),deleteNode:destination=>({destination}),deleteNodeBatchExport:destination=>({destination}),deleteNodeHogFunction:destination=>({destination}),deleteNodeWebhook:destination=>({destination}),updatePluginConfig:pluginConfig=>({pluginConfig}),updateBatchExportConfig:batchExportConfig=>({batchExportConfig})}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_2__.loaders)(_ref=>{let{values,actions}=_ref;return{plugins:[{},{loadPlugins:async()=>(0,_utils__WEBPACK_IMPORTED_MODULE_12__.c$)("api/organizations/@current/pipeline_destinations")}],pluginConfigs:[{},{loadPluginConfigs:async()=>{let pluginConfigs={},results=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.loadPaginatedResults(`api/projects/${values.currentTeamId}/pipeline_destination_configs`);for(let pluginConfig of results)pluginConfigs[pluginConfig.id]={...pluginConfig,name:pluginConfig.name||values.plugins[pluginConfig.plugin]?.name||"Unknown app",description:pluginConfig.description||values.plugins[pluginConfig.plugin]?.description};return pluginConfigs},toggleNodeWebhook:async _ref2=>{let{destination,enabled}=_ref2,{pluginConfigs,plugins}=values,pluginConfig=pluginConfigs[destination.id],plugin=plugins[pluginConfig.plugin];(0,_utils__WEBPACK_IMPORTED_MODULE_12__.SO)(`plugin ${enabled?"enabled":"disabled"}`,plugin,pluginConfig);let response=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.update(`api/plugin_config/${destination.id}`,{enabled});return{...pluginConfigs,[destination.id]:response}},updatePluginConfig:_ref3=>{let{pluginConfig}=_ref3;return{...values.pluginConfigs,[pluginConfig.id]:pluginConfig}},deleteNodeWebhook:async _ref4=>{let{destination}=_ref4;await (0,lib_utils_deleteWithUndo__WEBPACK_IMPORTED_MODULE_6__.S)({endpoint:`projects/${scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__.H.values.currentTeamId}/plugin_configs`,object:{id:destination.id,name:destination.name},callback:undo=>{undo&&actions.loadPluginConfigs()}});let pluginConfigs={...values.pluginConfigs};return delete pluginConfigs[destination.id],pluginConfigs}}],batchExportConfigs:[{},{loadBatchExports:async()=>{let results=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.loadPaginatedResults(`api/projects/${values.currentTeamId}/batch_exports`);return Object.fromEntries(results.map(batchExport=>[batchExport.id,batchExport]))},toggleNodeBatchExport:async _ref5=>{let{destination,enabled}=_ref5,batchExport=values.batchExportConfigs[destination.id];return enabled?await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.batchExports.unpause(destination.id):await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.batchExports.pause(destination.id),(0,_utils__WEBPACK_IMPORTED_MODULE_12__.hO)(`batch export ${enabled?"enabled":"disabled"}`,batchExport),{...values.batchExportConfigs,[destination.id]:{...batchExport,paused:!enabled}}},deleteNodeBatchExport:async _ref6=>{let{destination}=_ref6;await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.batchExports.delete(destination.id);let batchExportConfigs={...values.batchExportConfigs};return delete batchExportConfigs[destination.id],batchExportConfigs},updateBatchExportConfig:_ref7=>{let{batchExportConfig}=_ref7;return{...values.batchExportConfigs,[batchExportConfig.id]:batchExportConfig}}}],_hogFunctions:[[],{loadHogFunctions:async()=>(await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.hogFunctions.list()).results,deleteNodeHogFunction:async _ref8=>{let{destination}=_ref8;return destination.backend!==_types__WEBPACK_IMPORTED_MODULE_11__.b.HogFunction?values.hogFunctions:(await (0,lib_utils_deleteWithUndo__WEBPACK_IMPORTED_MODULE_6__.S)({endpoint:`projects/${scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__.H.values.currentTeamId}/hog_functions`,object:{id:destination.hog_function.id,name:destination.name},callback:undo=>{undo&&actions.loadHogFunctions()}}),values.hogFunctions.filter(hogFunction=>hogFunction.id!==destination.hog_function.id))},toggleNodeHogFunction:async _ref9=>{let{destination,enabled}=_ref9,{hogFunctions}=values,hogFunctionIndex=hogFunctions.findIndex(hf=>hf.id===destination.hog_function.id),response=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.hogFunctions.update(destination.hog_function.id,{enabled});return[...hogFunctions.slice(0,hogFunctionIndex),response,...hogFunctions.slice(hogFunctionIndex+1)]}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.selectors)({hogFunctions:[s=>[s._hogFunctions,s.filters],(hogFunctions,filters)=>filters.showHidden?hogFunctions:hogFunctions.filter(hf=>!hf.name.includes("[CDP-TEST-HIDDEN]"))],loading:[s=>[s.pluginsLoading,s.pluginConfigsLoading,s.batchExportConfigsLoading,s._hogFunctionsLoading],(pluginsLoading,pluginConfigsLoading,batchExportConfigsLoading,hogFunctionsLoading)=>pluginsLoading||pluginConfigsLoading||batchExportConfigsLoading||hogFunctionsLoading],destinations:[s=>[s.pluginConfigs,s.plugins,s.batchExportConfigs,s.hogFunctions,s.user,s.featureFlags],(pluginConfigs,plugins,batchExportConfigs,hogFunctions,user,featureFlags)=>{let httpEnabled=featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_4__.y8.BATCH_EXPORTS_POSTHOG_HTTP]||user?.is_impersonated||user?.is_staff,rawBatchExports=Object.values(batchExportConfigs).filter(config=>!!httpEnabled||"HTTP"!==config.destination.type),rawDestinations=[].concat(hogFunctions).concat(Object.values(pluginConfigs).map(pluginConfig=>({...pluginConfig,plugin_info:plugins[pluginConfig.plugin]||null}))).concat(rawBatchExports),convertedDestinations=rawDestinations.map(d=>(0,_types__WEBPACK_IMPORTED_MODULE_11__.n)(d,_types__WEBPACK_IMPORTED_MODULE_9__.We.Destination)),enabledFirst=convertedDestinations.sort((a,b)=>Number(b.enabled)-Number(a.enabled));return enabledFirst}],destinationsFuse:[s=>[s.destinations],destinations=>new fuse_js__WEBPACK_IMPORTED_MODULE_14__.Z(destinations||[],{keys:["name","description"],threshold:.3})],filteredDestinations:[s=>[s.filters,s.destinations,s.destinationsFuse],(filters,destinations,destinationsFuse)=>{let{search,showPaused,kind}=filters;return(search?destinationsFuse.search(search).map(x=>x.item):destinations).filter(dest=>(!kind||dest.backend===kind)&&(!!showPaused||!!dest.enabled))}],hiddenDestinations:[s=>[s.destinations,s.filteredDestinations],(destinations,filteredDestinations)=>destinations.filter(dest=>!filteredDestinations.includes(dest))]}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.listeners)(_ref10=>{let{values,actions}=_ref10;return{toggleNode:_ref11=>{let{destination,enabled}=_ref11;if(enabled&&!values.canEnableDestination(destination)){_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.UJ.error("Data pipelines add-on is required for enabling new destinations.");return}destination.backend===_types__WEBPACK_IMPORTED_MODULE_11__.b.Plugin?actions.toggleNodeWebhook({destination:destination,enabled:enabled}):destination.backend===_types__WEBPACK_IMPORTED_MODULE_11__.b.BatchExport?actions.toggleNodeBatchExport({destination:destination,enabled:enabled}):destination.backend===_types__WEBPACK_IMPORTED_MODULE_11__.b.HogFunction&&actions.toggleNodeHogFunction(destination,enabled)},deleteNode:_ref12=>{let{destination}=_ref12;switch(destination.backend){case _types__WEBPACK_IMPORTED_MODULE_11__.b.Plugin:actions.deleteNodeWebhook(destination);break;case _types__WEBPACK_IMPORTED_MODULE_11__.b.BatchExport:actions.deleteNodeBatchExport(destination);break;case _types__WEBPACK_IMPORTED_MODULE_11__.b.HogFunction:actions.deleteNodeHogFunction(destination)}}}}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.afterMount)(_ref13=>{let{actions}=_ref13;actions.loadPlugins(),actions.loadPluginConfigs(),actions.loadBatchExports(),actions.loadHogFunctions()})])},"./frontend/src/scenes/pipeline/frontendAppsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>frontendAppsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/pipeline/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/pipeline/utils.tsx");let frontendAppsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","pipeline","frontendAppsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.H,["currentTeamId"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__.userLogic,["user"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({loadPluginConfigs:!0,updatePluginConfig:pluginConfig=>({pluginConfig})}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref=>{let{values}=_ref;return{plugins:[{},{loadPlugins:async()=>(0,_utils__WEBPACK_IMPORTED_MODULE_7__.c$)("api/organizations/@current/pipeline_frontend_apps")}],pluginConfigs:[{},{loadPluginConfigs:async()=>{let res=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.loadPaginatedResults(`api/projects/${values.currentTeamId}/pipeline_frontend_apps_configs`);return Object.fromEntries(res.map(pluginConfig=>[pluginConfig.id,pluginConfig]))},toggleEnabled:async _ref2=>{let{id,enabled}=_ref2;if(!(0,_utils__WEBPACK_IMPORTED_MODULE_7__.FH)(_types__WEBPACK_IMPORTED_MODULE_5__.We.SiteApp,enabled))return values.pluginConfigs;let{pluginConfigs,plugins}=values,pluginConfig=pluginConfigs[id],plugin=plugins[pluginConfig.plugin];(0,_utils__WEBPACK_IMPORTED_MODULE_7__.SO)(`plugin ${enabled?"enabled":"disabled"}`,plugin,pluginConfig);let response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.update(`api/plugin_config/${id}`,{enabled});return{...pluginConfigs,[id]:response}},updatePluginConfig:_ref3=>{let{pluginConfig}=_ref3;return{...values.pluginConfigs,[pluginConfig.id]:pluginConfig}}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({loading:[s=>[s.pluginsLoading,s.pluginConfigsLoading],(pluginsLoading,pluginConfigsLoading)=>pluginsLoading||pluginConfigsLoading],frontendApps:[s=>[s.plugins,s.pluginConfigs],(plugins,pluginConfigs)=>{let rawFrontendApp=Object.values(pluginConfigs).map(pluginConfig=>({...pluginConfig,plugin_info:plugins[pluginConfig.plugin]||null})),convertedFrontendApps=rawFrontendApp.map(t=>(0,_types__WEBPACK_IMPORTED_MODULE_6__.n)(t,_types__WEBPACK_IMPORTED_MODULE_5__.We.SiteApp)),enabledFirst=convertedFrontendApps.sort((a,b)=>Number(b.enabled)-Number(a.enabled));return enabledFirst}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref4=>{let{actions}=_ref4;actions.loadPlugins(),actions.loadPluginConfigs()})])},"./frontend/src/scenes/pipeline/hogfunctions/HogFunctionStatusIndicator.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>HogFunctionStatusIndicator});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/types.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let displayMap={[_types__WEBPACK_IMPORTED_MODULE_1__.si.healthy]:{tagType:"success",display:"Active",description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:"The function is running as expected."})},[_types__WEBPACK_IMPORTED_MODULE_1__.si.overflowed]:{tagType:"caution",display:"Degraded",description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:"The function is running slow or has issues performing async requests. It has been moved to the slow lane and may be processing slower than usual."})},[_types__WEBPACK_IMPORTED_MODULE_1__.si.disabledForPeriod]:{tagType:"danger",display:"Disabled temporarily",description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:"The function has been disabled temporarily due to enough slow or failed requests. It will be re-enabled soon."})},[_types__WEBPACK_IMPORTED_MODULE_1__.si.disabledIndefinitely]:{tagType:"danger",display:"Disabled",description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:'The function has been disabled indefinitely due to too many slow or failed requests. Please check your config. Updating your function will move it back to the "degraded" state for testing. If it performs well, it will then be moved to the healthy.'})}},DEFAULT_DISPLAY={tagType:"default",display:"Unknown",description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:"The function status is unknown. The status will be derived once enough invocations have been performed."})},DISABLED_MANUALLY_DISPLAY={tagType:"default",display:"Paused",description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:"This function is paused"})};function HogFunctionStatusIndicator(_ref){let{hogFunction}=_ref;if(!hogFunction)return null;let{tagType,display,description}=hogFunction.status?.state?displayMap[hogFunction.status.state]:hogFunction.enabled?DEFAULT_DISPLAY:DISABLED_MANUALLY_DISPLAY;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Qw,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"p-2 space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("h2",{className:"flex items-center m-0 gap-2",children:["Function status - ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.oe,{type:tagType,children:display})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("p",{children:description})]})}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.oe,{type:tagType,children:display})})}},"./frontend/src/scenes/pipeline/importAppsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>importAppsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/pipeline/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/pipeline/utils.tsx");let importAppsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","pipeline","importAppsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.H,["currentTeamId"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__.userLogic,["user"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({loadPluginConfigs:!0,updatePluginConfig:pluginConfig=>({pluginConfig})}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref=>{let{values}=_ref;return{plugins:[{},{loadPlugins:async()=>(0,_utils__WEBPACK_IMPORTED_MODULE_7__.c$)("api/organizations/@current/pipeline_import_apps")}],pluginConfigs:[{},{loadPluginConfigs:async()=>{let res=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.loadPaginatedResults(`api/projects/${values.currentTeamId}/pipeline_import_apps_configs`);return Object.fromEntries(res.map(pluginConfig=>[pluginConfig.id,pluginConfig]))},toggleEnabled:async _ref2=>{let{id,enabled}=_ref2;if(!(0,_utils__WEBPACK_IMPORTED_MODULE_7__.FH)(_types__WEBPACK_IMPORTED_MODULE_5__.We.ImportApp,enabled))return values.pluginConfigs;let{pluginConfigs,plugins}=values,pluginConfig=pluginConfigs[id],plugin=plugins[pluginConfig.plugin];(0,_utils__WEBPACK_IMPORTED_MODULE_7__.SO)(`plugin ${enabled?"enabled":"disabled"}`,plugin,pluginConfig);let response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.update(`api/plugin_config/${id}`,{enabled});return{...pluginConfigs,[id]:response}},updatePluginConfig:_ref3=>{let{pluginConfig}=_ref3;return{...values.pluginConfigs,[pluginConfig.id]:pluginConfig}}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({loading:[s=>[s.pluginsLoading,s.pluginConfigsLoading],(pluginsLoading,pluginConfigsLoading)=>pluginsLoading||pluginConfigsLoading],importApps:[s=>[s.plugins,s.pluginConfigs],(plugins,pluginConfigs)=>{let rawImportApp=Object.values(pluginConfigs).map(pluginConfig=>({...pluginConfig,plugin_info:plugins[pluginConfig.plugin]||null})),convertedImportApps=rawImportApp.map(t=>(0,_types__WEBPACK_IMPORTED_MODULE_6__.n)(t,_types__WEBPACK_IMPORTED_MODULE_5__.We.ImportApp)),enabledFirst=convertedImportApps.sort((a,b)=>Number(b.enabled)-Number(a.enabled));return enabledFirst}],hasEnabledImportApps:[s=>[s.importApps],importApps=>importApps.some(app=>app.enabled)]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref4=>{let{actions}=_ref4;actions.loadPlugins(),actions.loadPluginConfigs()})])},"./frontend/src/scenes/pipeline/pipelineNodeMetricsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>pipelineNodeMetricsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/utils.tsx"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx");let pipelineNodeMetricsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(_ref=>{let{id}=_ref;return id}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(id=>["scenes","pipeline","appMetricsLogic",id]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.H,["currentTeamId"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setDateRange:(from,to)=>({from,to}),openErrorDetailsModal:errorType=>({errorType}),closeErrorDetailsModal:!0}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref2=>{let{values,props}=_ref2;return{appMetricsResponse:[null,{loadMetrics:async()=>{let params=(0,lib_utils__WEBPACK_IMPORTED_MODULE_3__.oZ)({date_from:values.dateRange.from,date_to:values.dateRange.to});return await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.get(`api/projects/${scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.H.values.currentTeamId}/app_metrics/${props.id}?${params}`)}}],errorDetails:[[],{openErrorDetailsModal:async _ref3=>{let{errorType}=_ref3,params=(0,lib_utils__WEBPACK_IMPORTED_MODULE_3__.oZ)({error_type:errorType}),{result}=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.get(`api/projects/${scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.H.values.currentTeamId}/app_metrics/${props.id}/error_details?${params}`);return result}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({dateRange:[{from:"-7d",to:null},{setDateRange:(_,_ref4)=>{let{from,to}=_ref4;return{from:null!=from?from:"-7d",to:to}}}],errorDetailsModalError:[null,{openErrorDetailsModal:(_,_ref5)=>{let{errorType}=_ref5;return errorType},closeErrorDetailsModal:()=>null}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref6=>{let{actions}=_ref6;return{setDateRange:()=>{actions.loadMetrics()}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref7=>{let{actions}=_ref7;actions.loadMetrics()})])},"./frontend/src/scenes/pipeline/transformationsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>pipelineTransformationsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/pipeline/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/pipeline/utils.tsx");let pipelineTransformationsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","pipeline","transformationsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.H,["currentTeamId"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__.userLogic,["user"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({loadPluginConfigs:!0,openReorderModal:!0,closeReorderModal:!0,setTemporaryOrder:tempOrder=>({tempOrder}),savePluginConfigsOrder:newOrders=>({newOrders}),updatePluginConfig:pluginConfig=>({pluginConfig})}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref=>{let{values}=_ref;return{plugins:[{},{loadPlugins:async()=>(0,_utils__WEBPACK_IMPORTED_MODULE_7__.c$)("api/organizations/@current/pipeline_transformations")}],temporaryOrder:[{},{setTemporaryOrder:async _ref2=>{let{tempOrder}=_ref2;return tempOrder},closeReorderModal:async()=>({})}],pluginConfigs:[{},{loadPluginConfigs:async()=>{let res=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.loadPaginatedResults(`api/projects/${values.currentTeamId}/pipeline_transformation_configs`);return Object.fromEntries(res.map(pluginConfig=>[pluginConfig.id,pluginConfig]))},savePluginConfigsOrder:async _ref3=>{let{newOrders}=_ref3;if(!(0,_utils__WEBPACK_IMPORTED_MODULE_7__.FH)(_types__WEBPACK_IMPORTED_MODULE_5__.We.Transformation,!1))return values.pluginConfigs;let{pluginConfigs}=values,response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.update("api/plugin_config/rearrange",{orders:newOrders}),newPluginConfigs={...pluginConfigs};for(let pluginConfig of response)Object.keys(values.plugins).map(Number).includes(pluginConfig.plugin)&&(newPluginConfigs[pluginConfig.id]=pluginConfig);return newPluginConfigs},toggleEnabled:async _ref4=>{let{id,enabled}=_ref4;if(!(0,_utils__WEBPACK_IMPORTED_MODULE_7__.FH)(_types__WEBPACK_IMPORTED_MODULE_5__.We.Transformation,enabled))return values.pluginConfigs;let{pluginConfigs,plugins}=values,pluginConfig=pluginConfigs[id],plugin=plugins[pluginConfig.plugin];(0,_utils__WEBPACK_IMPORTED_MODULE_7__.SO)(`plugin ${enabled?"enabled":"disabled"}`,plugin,pluginConfig);let order={};enabled&&(order={order:values.nextAvailableOrder});let response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.update(`api/plugin_config/${id}`,{enabled,...order});return{...pluginConfigs,[id]:response}},updatePluginConfig:_ref5=>{let{pluginConfig}=_ref5;return{...values.pluginConfigs,[pluginConfig.id]:pluginConfig}}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({loading:[s=>[s.pluginsLoading,s.pluginConfigsLoading],(pluginsLoading,pluginConfigsLoading)=>pluginsLoading||pluginConfigsLoading],transformations:[s=>[s.pluginConfigs,s.plugins],(pluginConfigs,plugins)=>{let rawTransformations=Object.values(pluginConfigs).map(pluginConfig=>({...pluginConfig,plugin_info:plugins[pluginConfig.plugin]||null})),convertedTransformations=rawTransformations.map(t=>(0,_types__WEBPACK_IMPORTED_MODULE_6__.n)(t,_types__WEBPACK_IMPORTED_MODULE_5__.We.Transformation));return convertedTransformations}],sortedEnabledTransformations:[s=>[s.transformations,s.temporaryOrder],(transformations,temporaryOrder)=>(transformations=transformations.filter(t=>t.enabled),transformations=temporaryOrder&&Object.keys(temporaryOrder).length>0?Object.entries(temporaryOrder).sort((_ref6,_ref7)=>{let[,aIdx]=_ref6,[,bIdx]=_ref7;return aIdx-bIdx}).map(_ref8=>{let[pluginId]=_ref8;return transformations.find(t=>t.id===Number(pluginId))}):transformations.sort((a,b)=>a.order-b.order))],sortedTransformations:[s=>[s.transformations,s.sortedEnabledTransformations],(transformations,sortedEnabledTransformations)=>sortedEnabledTransformations.concat(transformations.filter(t=>!t.enabled).sort((a,b)=>a.id-b.id))],nextAvailableOrder:[s=>[s.transformations],transformations=>{let enabledTransformations=transformations.filter(t=>t.enabled);return enabledTransformations.length>0?Math.max(...enabledTransformations.map(t=>t.order),0)+1:0}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({reorderModalOpen:[!1,{openReorderModal:()=>!0,closeReorderModal:()=>!1}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref9=>{let{actions}=_ref9;return{savePluginConfigsOrderSuccess:()=>{actions.closeReorderModal()}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref10=>{let{actions}=_ref10;actions.loadPlugins(),actions.loadPluginConfigs()})])}}]);