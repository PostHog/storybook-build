(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(y,i,e){"use strict";e.r(i),e.d(i,"SessionsRecordings",function(){return ge}),e.d(i,"scene",function(){return ye});var j=e("./node_modules/react/index.js"),s=e.n(j),o=e("./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx"),U=e("./frontend/src/lib/components/PageHeader.tsx"),N=e("./frontend/src/scenes/teamLogic.tsx"),p=e("./node_modules/kea/lib/index.esm.js"),$=e("./frontend/src/scenes/urls.ts"),K=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),J=e("./frontend/src/lib/logic/featureFlagLogic.ts"),W=e("./frontend/src/lib/constants.tsx"),M=e("./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx"),S=e("./node_modules/antd/es/row/index.js"),Y=e("./node_modules/antd/es/typography/index.js"),Q=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),X=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),B=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),F=e("./frontend/src/types.ts"),ee=e("./node_modules/antd/es/space/index.js"),se=e("./node_modules/antd/es/button/index.js"),H=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),G=e("./frontend/src/lib/components/Popup/Popup.tsx"),E=e("./node_modules/core-js/modules/es.array.slice.js"),V=e("./node_modules/core-js/modules/es.array.iterator.js"),ne=e("./node_modules/core-js/modules/es.object.to-string.js"),z=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),R=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),T;(function(t){t.SECONDS="seconds",t.MINUTES="minutes",t.HOURS="hours"})(T||(T={}));var x=Object(p.kea)({path:function(n){return["scenes","session-recordings","DurationFilterLogic",n]},key:function(n){return n.pageKey||"global"},props:{},actions:{setValue:function(n){return{value:n}},setIsOpen:function(n){return{isOpen:n}},setOperator:function(n){return{operator:n}}},reducers:function(n){var a,r,g=n.props;return{operator:[g==null||(a=g.initialFilter)===null||a===void 0?void 0:a.operator,{setOperator:function(m,c){var f=c.operator;return f}}],value:[g==null||(r=g.initialFilter)===null||r===void 0?void 0:r.value,{setValue:function(m,c){var f=c.value;return f}}],isOpen:[!1,{setIsOpen:function(m,c){var f=c.isOpen;return f}}]}},selectors:{durationString:[function(t){return[t.operator,t.value]},function(t,n){var a="";t===F.K.GreaterThan?a+="> ":a+="< ";var r=Object(R.b)(n||0);return a+=r.timeValue||0,r.timeValue===1?a+=" "+r.unit.slice(0,-1):a+=" "+r.unit,a}]},listeners:function(n){var a=n.props,r=n.values,g=function(m){var c=m.value,f=m.operator;a.onChange({operator:f||r.operator,value:c||r.value||0,type:"recording",key:"duration"})};return{setValue:function(m){var c=m.value;return g({value:c})},setOperator:function(m){var c=m.operator;return g({operator:c})}}}});function b(t){var n=t.initialFilter,a=t.onChange,r=t.pageKey,g=x({initialFilter:n,onChange:a,pageKey:r}),d=Object(p.useActions)(g),m=d.setValue,c=d.setIsOpen,f=d.setOperator,L=Object(p.useValues)(g),le=L.durationString,oe=L.value,A=L.operator,de=L.isOpen;return s.a.createElement(G.a,{visible:de,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return c(!1)},overlay:s.a.createElement(S.a,null,s.a.createElement(ee.b,null,s.a.createElement(H.a,{operator:A,operators:[F.K.GreaterThan,F.K.LessThan],onChange:function(ce){f(ce)}}),s.a.createElement(R.a,{onChange:m,initialValue:oe||0})))},s.a.createElement(se.a,{onClick:function(){c(!0)}},le))}try{b.displayName="DurationFilter",b.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"]={docgenInfo:b.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"})}catch(t){}var C=e("./frontend/src/lib/utils/eventUsageLogic.ts"),I=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),D=e("./frontend/src/lib/components/Tooltip.tsx"),l=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Z=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),w=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),k=e.n(w),q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingFilters.scss"),O=e.n(q),u={};u.insert="head",u.singleton=!1;var P=k()(O.a,u),h=O.a.locals||{},ae=e("./frontend/src/lib/components/icons.tsx"),me=e("./frontend/src/lib/components/LemonButton/index.ts"),fe=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function te(t){var n=t.personUUID,a=t.isPersonPage,r=a===void 0?!1:a,g=Object(K.b)({personUUID:n}),d=Object(p.useValues)(g),m=d.entityFilters,c=d.propertyFilters,f=d.fromDate,L=d.toDate,le=d.durationFilter,oe=d.showFilters,A=Object(p.useActions)(g),de=A.setEntityFilters,re=A.setPropertyFilters,ce=A.setDateRange,Se=A.setDurationFilter,Re=A.enableFilter,ie=A.reportRecordingsListFilterAdded;return s.a.createElement("div",{className:"SessionRecordingFilters"},s.a.createElement(S.a,{className:"filter-row"},s.a.createElement("div",{className:"filter-container",style:{display:oe?void 0:"none"}},s.a.createElement("div",{className:"space-y-2"},s.a.createElement(Y.a.Text,{strong:!0},"Filter by events and actions ",s.a.createElement(D.a,{title:"Show recordings where all of the events or actions listed below happen."},s.a.createElement(Q.a,{className:"info-icon"}))),s.a.createElement(B.a,{bordered:!0,filters:m,setFilters:function(v){ie(C.d.EventAndAction),de(v)},typeKey:r?"person-".concat(n):"session-recordings",mathAvailability:fe.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[l.a.Actions,l.a.Events],propertiesTaxonomicGroupTypes:[l.a.EventProperties,l.a.EventFeatureFlags,l.a.Elements]})),!r&&s.a.createElement("div",{className:"mt-8 space-y-2"},s.a.createElement(Y.a.Text,{strong:!0},"Filter by persons and cohorts ",s.a.createElement(D.a,{title:"Show recordings by persons who match the set criteria"},s.a.createElement(Q.a,{className:"info-icon"}))),s.a.createElement(Z.a,{pageKey:r?"person-".concat(n):"session-recordings",taxonomicGroupTypes:[l.a.PersonProperties,l.a.Cohorts],propertyFilters:c,onChange:function(v){ie(C.d.PersonAndCohort),re(v)}}))),!oe&&s.a.createElement(me.a,{type:"secondary",size:"small",icon:s.a.createElement(ae.IconFilter,null),onClick:function(){if(Re(),r){var v=document.querySelectorAll(".entity-filter-row button");v.length>0&&v[0].click()}}},"Filter recordings"),s.a.createElement(S.a,{className:"time-filter-row"},s.a.createElement(S.a,{className:"time-filter"},s.a.createElement(I.a,{makeLabel:function(v){return s.a.createElement(s.a.Fragment,null,s.a.createElement(X.a,null),s.a.createElement("span",null," ",v))},dateFrom:f!=null?f:"-7d",dateTo:L!=null?L:void 0,onChange:function(v,ue){ie(C.d.DateRange),ce(v,ue!=null?ue:void 0)},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]})),s.a.createElement(S.a,{className:"time-filter"},s.a.createElement(Y.a.Text,{className:"filter-label"},"Duration"),s.a.createElement(b,{onChange:function(v){ie(C.d.Duration),Se(v)},initialFilter:le,pageKey:r?"person-".concat(n):"session-recordings"})))))}try{te.displayName="SessionRecordingsFilters",te.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"]={docgenInfo:te.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"})}catch(t){}var pe=e("./frontend/src/lib/components/AlertMessage/index.ts"),ve=e("./frontend/@posthog/lemon-ui/src/index.ts");function ge(){var t=Object(p.useValues)(N.a),n=t.currentTeam,a=Object(p.useValues)(J.a),r=a.featureFlags;return s.a.createElement("div",null,s.a.createElement(U.a,{title:s.a.createElement("div",null,"Recordings")}),n&&!(n!=null&&n.session_recording_opt_in)?s.a.createElement("div",{className:"mb-4"},s.a.createElement(pe.a,{type:"info"},"Session recordings are currently disabled for this project. To use this feature, please go to your ",s.a.createElement(ve.Link,{to:"".concat($.a.projectSettings(),"#recordings")},"project settings")," and enable it.")):null,s.a.createElement(te,null),r[W.h.SESSION_RECORDINGS_PLAYLIST]?s.a.createElement(M.a,{key:"global"}):s.a.createElement(o.a,{key:"global"}))}var ye={component:ge,logic:K.b}},"./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx":function(y,i,e){"use strict";e.d(i,"a",function(){return E});var j=e("./node_modules/core-js/modules/es.array.concat.js"),s=e("./node_modules/react/index.js"),o=e.n(s),U=e("./node_modules/kea/lib/index.esm.js"),N=e("./frontend/src/lib/utils.tsx"),p=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),$=e("./frontend/src/scenes/persons/PersonHeader.tsx"),K=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),J=e.n(K),W=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss"),M=e.n(W),S={};S.insert="head",S.singleton=!1;var Y=J()(M.a,S),Q=M.a.locals||{},X=e("./frontend/src/lib/components/LemonTable/index.ts"),B=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),F=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),ee=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),se=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),H=e("./frontend/@posthog/lemon-ui/src/index.ts"),G=e("./frontend/src/lib/components/icons.tsx");function E(V){var ne=V.personUUID,z=Object(p.b)({personUUID:ne,isPlaylist:!0}),R=Object(U.useValues)(z),T=R.sessionRecordings,x=R.sessionRecordingsResponseLoading,b=R.hasNext,C=R.hasPrev,I=R.activeSessionRecordingId,D=R.offset,l=Object(U.useActions)(z),Z=l.openSessionPlayer,w=l.loadNext,k=l.loadPrev,q=[{title:"Recordings",render:function(u,P){return o.a.createElement("div",null,Object($.b)(P.person,25),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement(B.b,{time:P.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})," \xB7 ",Object(N.n)(P.recording_duration))))}}];return o.a.createElement("div",{className:"SessionRecordingPlaylist","data-attr":"session-recordings-playlist"},o.a.createElement("div",{className:"SessionRecordingPlaylist__left-column mr-4"},o.a.createElement(X.a,{dataSource:T,columns:q,loading:x,onRow:function(u){return{onClick:function(h){h.target.closest("a")||Z(u.id)}}},rowStatus:function(u){return I===u.id?"highlighted":null},rowClassName:"cursor-pointer","data-attr":"session-recording-table","data-tooltip":"session-recording-table",emptyState:"No matching recordings found"}),o.a.createElement("div",{className:"SessionRecordingPlaylist__pagination-control"},o.a.createElement("span",null,"".concat(D+1," - ").concat(D+(x?Object(p.a)(!0):T.length))),o.a.createElement(H.LemonButton,{icon:o.a.createElement(G.IconChevronLeft,null),status:"stealth",disabled:!C,onClick:function(){k(),window.scrollTo(0,0)}}),o.a.createElement(H.LemonButton,{icon:o.a.createElement(G.IconChevronRight,null),status:"stealth",disabled:!b,onClick:function(){w(),window.scrollTo(0,0)}}))),o.a.createElement("div",{className:"SessionRecordingPlaylist__right-column"},I?o.a.createElement("div",{className:"border rounded h-full"},o.a.createElement(F.b,{playerKey:"playlist",sessionRecordingId:I})):x?o.a.createElement("div",{className:"SessionRecordingPlaylist__loading"},o.a.createElement(se.a,null)):o.a.createElement(ee.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonHref:"https://posthog.com/docs/user-guides/recordings"})))}try{E.displayName="SessionRecordingsPlaylist",E.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:E.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(V){}},"./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx":function(y,i,e){"use strict";e.d(i,"a",function(){return E});var j=e("./node_modules/react/index.js"),s=e.n(j),o=e("./node_modules/kea/lib/index.esm.js"),U=e("./frontend/src/lib/utils.tsx"),N=e("./node_modules/antd/es/button/index.js"),p=e("./node_modules/antd/es/row/index.js"),$=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),K=e("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),J=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),W=e("./node_modules/@ant-design/icons/es/icons/LeftOutlined.js"),M=e("./node_modules/@ant-design/icons/es/icons/RightOutlined.js"),S=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Y=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Q=e.n(Y),X=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss"),B=e.n(X),F={};F.insert="head",F.singleton=!1;var ee=Q()(B.a,F),se=B.a.locals||{},H=e("./frontend/src/lib/components/LemonTable/index.ts"),G=e("./frontend/src/lib/components/TimezoneAware/index.tsx");function E(V){var ne=V.personUUID,z=V.isPersonPage,R=z===void 0?!1:z,T=Object($.b)({personUUID:ne}),x=Object(o.useValues)(T),b=x.sessionRecordings,C=x.sessionRecordingsResponseLoading,I=x.hasNext,D=x.hasPrev,l=Object(o.useActions)(T),Z=l.openSessionPlayer,w=l.closeSessionPlayer,k=l.loadNext,q=l.loadPrev,O=[{title:"Start time",render:function(P,h){return s.a.createElement(G.b,{time:h.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})}},{title:"Duration",render:function(P,h){return s.a.createElement("span",null,Object(U.P)(h.recording_duration))}},{title:"Person",key:"person",render:function(P,h){return s.a.createElement(S.a,{withIcon:!0,person:h.person})}},{render:function(P,h){return s.a.createElement("div",{className:"play-button-container"},s.a.createElement(N.a,{className:h.viewed?"play-button viewed":"play-button","data-attr":"session-recordings-button",icon:s.a.createElement(K.a,null)},"Watch recording"))}}];return s.a.createElement("div",{className:"session-recordings-table","data-attr":"session-recordings-table"},s.a.createElement(H.a,{dataSource:b,columns:O,loading:C,onRow:function(P){return{onClick:function(ae){ae.target.closest("a")||Z(P.id)}}},rowClassName:"cursor-pointer","data-attr":"session-recording-table",emptyState:"No matching recordings found"}),(D||I)&&s.a.createElement(p.a,{className:"pagination-control"},s.a.createElement(N.a,{type:"link",disabled:!D,onClick:function(){q(),window.scrollTo(0,0)}},s.a.createElement(W.a,null)," Previous"),s.a.createElement(N.a,{type:"link",disabled:!I,onClick:function(){k(),window.scrollTo(0,0)}},"Next ",s.a.createElement(M.a,null))),s.a.createElement("div",{style:{marginBottom:64}}),s.a.createElement(J.a,{isPersonPage:R,onClose:w}))}try{E.displayName="SessionRecordingsTable",E.__docgenInfo={description:"",displayName:"SessionRecordingsTable",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"]={docgenInfo:E.__docgenInfo,name:"SessionRecordingsTable",path:"frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"})}catch(V){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingFilters.scss":function(y,i,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");i=j(!1),i.push([y.i,".SessionRecordingFilters .filter-row{width:100%;justify-content:space-between;margin-bottom:1rem;align-items:flex-end}.SessionRecordingFilters .filter-container{max-width:700px;padding:1rem;border:1px solid var(--border);flex:1;border-radius:var(--radius)}.SessionRecordingFilters .filter-section{padding-bottom:1rem}.SessionRecordingFilters .session-recording-action-property-filter{margin:0 0 0 68px;background-color:var(--antd-table-background-dark);border-top-width:1px;border:1px solid var(--border);border-top:0 solid var(--border);padding:.25rem 1rem}.SessionRecordingFilters .entity-filter-row{width:100%;padding:1rem;border:1px solid var(--border);margin-top:1rem;border-radius:var(--radius)}.SessionRecordingFilters .time-filter-row{justify-content:flex-end;align-items:flex-end}.SessionRecordingFilters .time-filter-row .time-filter{align-items:center;margin-left:1rem}.SessionRecordingFilters .time-filter-row .time-filter .filter-label{margin-right:4px}",""]),y.exports=i},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss":function(y,i,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");i=j(!1),i.push([y.i,".SessionRecordingPlaylist{display:flex;flex-direction:row}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column{width:300px;flex-shrink:0}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column .SessionRecordingPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column{flex:1}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column .SessionRecordingPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),y.exports=i},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss":function(y,i,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");i=j(!1),i.push([y.i,".session-recordings-table .pagination-control{margin:1rem;justify-content:center}.session-recordings-table .play-button-container{display:flex;justify-content:flex-end}.session-recordings-table .play-button-container .play-button .anticon-play-circle{color:var(--primary)}.session-recordings-table .play-button-container .play-button.viewed .anticon-play-circle{color:var(--muted)}.session-recordings-table .info-icon{color:var(--primary)}",""]),y.exports=i}}]);
