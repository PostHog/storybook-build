(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{5608:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createdAtColumn})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createdByColumn}));__webpack_require__(36);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),kea__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(74),_TimezoneAware__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(592),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(858);function createdAtColumn(){return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__.a)("Created"),render:function RenderCreatedAt(_,item){return item.created_at&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:{whiteSpace:"nowrap"}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_TimezoneAware__WEBPACK_IMPORTED_MODULE_5__.b,{time:item.created_at}))},sorter:function sorter(a,b){return new Date(a.created_at)>new Date(b.created_at)?1:-1}}}function createdByColumn(items){var user=Object(kea__WEBPACK_IMPORTED_MODULE_3__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__.a).user;return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__.a)("Created by"),render:function Render(_,item){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:{maxWidth:250,width:"auto"}},item.created_by?item.created_by.first_name||item.created_by.email:"-")},filters:Object(lib_utils__WEBPACK_IMPORTED_MODULE_2__.sb)(items.map((function(item){var _item$created_by,_item$created_by2,_item$created_by3;return item.created_by?{text:(null===(_item$created_by=item.created_by)||void 0===_item$created_by?void 0:_item$created_by.first_name)||(null===(_item$created_by2=item.created_by)||void 0===_item$created_by2?void 0:_item$created_by2.email),value:null===(_item$created_by3=item.created_by)||void 0===_item$created_by3?void 0:_item$created_by3.uuid}:{text:"(none)",value:null}})),(function(item){return null==item?void 0:item.value})).sort((function(a,b){return a.value===(null==user?void 0:user.uuid)?-10:b.value===(null==user?void 0:user.uuid)?10:(a.text+"").localeCompare(b.text+"")})),onFilter:function onFilter(value,item){var _item$created_by4;return null===value&&null===item.created_by||(null===(_item$created_by4=item.created_by)||void 0===_item$created_by4?void 0:_item$created_by4.uuid)===value},sorter:function sorter(a,b){var _a$created_by,_a$created_by2,_b$created_by,_b$created_by2;return((null===(_a$created_by=a.created_by)||void 0===_a$created_by?void 0:_a$created_by.first_name)||(null===(_a$created_by2=a.created_by)||void 0===_a$created_by2?void 0:_a$created_by2.email)||"").localeCompare((null===(_b$created_by=b.created_by)||void 0===_b$created_by?void 0:_b$created_by.first_name)||(null===(_b$created_by2=b.created_by)||void 0===_b$created_by2?void 0:_b$created_by2.email)||"")}}}try{createdByColumn.displayName="createdByColumn",createdByColumn.__docgenInfo={description:"",displayName:"createdByColumn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/Table.tsx#createdByColumn"]={docgenInfo:createdByColumn.__docgenInfo,name:"createdByColumn",path:"frontend/src/lib/components/Table/Table.tsx#createdByColumn"})}catch(__react_docgen_typescript_loader_error){}},5616:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return definitionDrawerLogic}));__webpack_require__(318),__webpack_require__(353),__webpack_require__(38),__webpack_require__(60),__webpack_require__(157),__webpack_require__(1167),__webpack_require__(142),__webpack_require__(95),__webpack_require__(44),__webpack_require__(36),__webpack_require__(1168),__webpack_require__(64),__webpack_require__(108),__webpack_require__(37),__webpack_require__(115),__webpack_require__(143),__webpack_require__(49);var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(18),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_17__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(5),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_18__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21__=(__webpack_require__(67),__webpack_require__(13)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21__),kea__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(3),lib_api__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(21),lib_utils__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(12),_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(381),lib_components_PropertyKeyInfo__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(59),_models_propertyDefinitionsModel__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(498),_teamLogic__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(27);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_18___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var definitionDrawerLogic=Object(kea__WEBPACK_IMPORTED_MODULE_22__.kea)({actions:function actions(){return{openDrawer:function openDrawer(type,id){return{type:type,id:id}},setDrawerType:function setDrawerType(type){return{type:type}},setDescription:function setDescription(description){return{description:description}},setNewTag:function setNewTag(tag){return{tag:tag}},deleteTag:function deleteTag(tag){return{tag:tag}},changeOwner:function changeOwner(owner){return{owner:owner}},setDefinition:function setDefinition(definition){return{definition:definition}},setNewEventPropertyTag:function setNewEventPropertyTag(tag,currentTags,id){return{tag:tag,currentTags:currentTags,id:id}},deleteEventPropertyTag:function deleteEventPropertyTag(tag,currentTags,id){return{tag:tag,currentTags:currentTags,id:id}},setEventPropertyDescription:function setEventPropertyDescription(description,id){return{description:description,id:id}},setEventPropertyDefinition:function setEventPropertyDefinition(propertyDefinition,id){return{propertyDefinition:propertyDefinition,id:id}},setEventPropertyDefinitionUpdateList:function setEventPropertyDefinitionUpdateList(id){return{id:id}},closeDrawer:!0,setTagLoading:function setTagLoading(loading){return{loading:loading}},saveAll:!0,setGraphResults:function setGraphResults(results){return{results:results}},setVisibilityById:function setVisibilityById(entry){return{entry:entry}}}},loaders:function loaders(_ref){var _loadEventPropertiesDefinitions,_loadEventsSnippet,_saveDefinition,_loadDefinition,actions=_ref.actions,values=_ref.values;return{definition:[null,{loadDefinition:(_loadDefinition=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee(_ref2){var type,id,definition;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return type=_ref2.type,id=_ref2.id,_context.next=3,lib_api__WEBPACK_IMPORTED_MODULE_23__.a.get("api/projects/@current/".concat(type,"_definitions/").concat(id));case 3:return definition=_context.sent,_context.abrupt("return",definition);case 5:case"end":return _context.stop()}}),_callee)}))),function loadDefinition(_x){return _loadDefinition.apply(this,arguments)}),saveDefinition:(_saveDefinition=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee2(_ref3){var definition,type,_definition$owner$use,updatedDefinition;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return definition=_ref3.definition,"event"===(type=_ref3.type)&&(definition.owner=(null===(_definition$owner$use=definition.owner.user)||void 0===_definition$owner$use?void 0:_definition$owner$use.id)||null,definition.description=values.description),"property"===type&&"property"===values.type&&(definition.description=values.description),_context2.next=5,lib_api__WEBPACK_IMPORTED_MODULE_23__.a.update("api/projects/@current/".concat(type,"_definitions/").concat(definition.id),definition);case 5:return updatedDefinition=_context2.sent,actions.saveDefinitionSuccess(updatedDefinition),_context2.abrupt("return",updatedDefinition);case 8:case"end":return _context2.stop()}}),_callee2)}))),function saveDefinition(_x2){return _saveDefinition.apply(this,arguments)})}],eventsSnippet:[[],{loadEventsSnippet:(_loadEventsSnippet=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee3(definition){var properties,event,eventsParams,events;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return properties="property"===values.type?[{key:null==definition?void 0:definition.name,value:"is_set",operator:"is_set",type:"event"}]:{},event="event"===values.type?null==definition?void 0:definition.name:null,eventsParams=Object(lib_utils__WEBPACK_IMPORTED_MODULE_24__.ob)(_objectSpread(_objectSpread({properties:properties},{event:event}),{},{orderBy:["-timestamp"],limit:5})),_context3.next=5,lib_api__WEBPACK_IMPORTED_MODULE_23__.a.get("api/projects/".concat(_teamLogic__WEBPACK_IMPORTED_MODULE_28__.a.values.currentTeamId,"/events/?").concat(eventsParams));case 5:return events=_context3.sent,"property"===values.type&&actions.loadEventsSnippetSuccess(events.results),_context3.abrupt("return",events.results);case 8:case"end":return _context3.stop()}}),_callee3)}))),function loadEventsSnippet(_x3){return _loadEventsSnippet.apply(this,arguments)})}],eventPropertiesDefinitions:[[],{loadEventPropertiesDefinitions:(_loadEventPropertiesDefinitions=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee4(propertyNames){var propertyDefinitions;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,lib_api__WEBPACK_IMPORTED_MODULE_23__.a.get("api/projects/@current/property_definitions/?properties=".concat(propertyNames));case 2:return propertyDefinitions=_context4.sent,_context4.abrupt("return",propertyDefinitions.results);case 4:case"end":return _context4.stop()}}),_callee4)}))),function loadEventPropertiesDefinitions(_x4){return _loadEventPropertiesDefinitions.apply(this,arguments)})}]}},reducers:function reducers(){return{drawerState:[!1,{openDrawer:function openDrawer(){return!0},closeDrawer:function closeDrawer(){return!1}}],description:["",{setDescription:function setDescription(_,_ref4){return _ref4.description}}],definition:[null,{setDefinition:function setDefinition(state,_ref5){var definition=_ref5.definition;return _objectSpread(_objectSpread({},state),definition)}}],tagLoading:[!1,{setTagLoading:function setTagLoading(_,_ref6){return _ref6.loading}}],type:["",{setDrawerType:function setDrawerType(_,_ref7){return _ref7.type}}],eventPropertiesDefinitions:[[],{setEventPropertyDefinition:function setEventPropertyDefinition(state,_ref8){var propertyDefinition=_ref8.propertyDefinition,id=_ref8.id;return state.map((function(p){return p.id===id?_objectSpread(_objectSpread({},p),propertyDefinition):p}))}}],editedEventPropertyDefinitions:[[],{setEventPropertyDefinitionUpdateList:function setEventPropertyDefinitionUpdateList(state,_ref9){var id=_ref9.id;return id&&!state.includes(id)?[].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_17___default()(state),[id]):_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_17___default()(state)}}],graphResults:[[],{setGraphResults:function setGraphResults(_,_ref10){return _ref10.results}}]}},selectors:function selectors(){return{eventDefinitionTags:[function(){return[_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_25__.a.selectors.eventDefinitions]},function(definitions){var allTags=definitions.flatMap((function(_ref11){return _ref11.tags})).filter((function(a){return!!a}));return Object(lib_utils__WEBPACK_IMPORTED_MODULE_24__.sb)(allTags,(function(item){return item})).sort()}],eventPropertiesDefinitionTags:[function(selectors){return[selectors.eventPropertiesDefinitions]},function(properties){var allTags=properties.flatMap((function(_ref12){return _ref12.tags})).filter((function(a){return!!a}));return Object(lib_utils__WEBPACK_IMPORTED_MODULE_24__.sb)(allTags,(function(item){return item})).sort()}],propertyDefinitionTags:[function(){return[_models_propertyDefinitionsModel__WEBPACK_IMPORTED_MODULE_27__.a.selectors.propertyDefinitions]},function(definitions){var allTags=definitions.flatMap((function(_ref13){return _ref13.tags})).filter((function(a){return!!a}));return Object(lib_utils__WEBPACK_IMPORTED_MODULE_24__.sb)(allTags,(function(item){return item})).sort()}]}},listeners:function listeners(_ref14){var _deleteEventPropertyTag,_setNewEventPropertyTag,_deleteTag,_setNewTag,actions=_ref14.actions,values=_ref14.values;return{openDrawer:function openDrawer(_ref15){var type=_ref15.type,id=_ref15.id;actions.setDrawerType(type),actions.loadDefinition({type:type,id:id})},loadDefinitionSuccess:function loadDefinitionSuccess(_ref16){var definition=_ref16.definition;actions.loadEventsSnippet(definition),actions.setDescription((null==definition?void 0:definition.description)||"")},loadEventsSnippetSuccess:function loadEventsSnippetSuccess(_ref17){var eventsSnippet=_ref17.eventsSnippet,propertyNames=Object.keys(eventsSnippet[0].properties).filter((function(key){return!lib_components_PropertyKeyInfo__WEBPACK_IMPORTED_MODULE_26__.f.event[key]}));actions.loadEventPropertiesDefinitions(propertyNames)},saveDefinitionSuccess:function saveDefinitionSuccess(_ref18){var definition=_ref18.definition;"event"===values.type?_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_25__.a.actions.updateEventDefinition(definition):_models_propertyDefinitionsModel__WEBPACK_IMPORTED_MODULE_27__.a.actions.updatePropertyDefinition(definition)},setNewTag:(_setNewTag=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee5(_ref19,breakpoint){var _values$definition,_values$definition$ta,_values$definition2,tag,currentTags;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(tag=_ref19.tag,actions.setTagLoading(!0),!(null===(_values$definition=values.definition)||void 0===_values$definition||null===(_values$definition$ta=_values$definition.tags)||void 0===_values$definition$ta?void 0:_values$definition$ta.includes(tag))){_context5.next=5;break}return Object(lib_utils__WEBPACK_IMPORTED_MODULE_24__.y)("Oops! This tag is already set","This event already includes the proposed tag."),_context5.abrupt("return");case 5:return currentTags=(null===(_values$definition2=values.definition)||void 0===_values$definition2?void 0:_values$definition2.tags)?[].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_17___default()(values.definition.tags),[tag]):[tag],actions.setDefinition({tags:currentTags}),_context5.next=9,breakpoint(100);case 9:actions.setTagLoading(!1);case 10:case"end":return _context5.stop()}}),_callee5)}))),function setNewTag(_x5,_x6){return _setNewTag.apply(this,arguments)}),deleteTag:(_deleteTag=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee6(_ref20,breakpoint){var _values$definition3,_values$definition3$t,tag,tags;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return tag=_ref20.tag,_context6.next=3,breakpoint(100);case 3:tags=(null===(_values$definition3=values.definition)||void 0===_values$definition3||null===(_values$definition3$t=_values$definition3.tags)||void 0===_values$definition3$t?void 0:_values$definition3$t.filter((function(_tag){return _tag!==tag})))||[],actions.setDefinition({tags:tags});case 5:case"end":return _context6.stop()}}),_callee6)}))),function deleteTag(_x7,_x8){return _deleteTag.apply(this,arguments)}),changeOwner:function changeOwner(_ref21){var owner=_ref21.owner;actions.setDefinition({owner:owner})},setNewEventPropertyTag:(_setNewEventPropertyTag=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee7(_ref22,breakpoint){var tag,currentTags,id,tags;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(tag=_ref22.tag,currentTags=_ref22.currentTags,id=_ref22.id,actions.setTagLoading(!0),!(null==currentTags?void 0:currentTags.includes(tag))){_context7.next=5;break}return Object(lib_utils__WEBPACK_IMPORTED_MODULE_24__.y)("Oops! This tag is already set","This event already includes the proposed tag."),_context7.abrupt("return");case 5:return tags=currentTags?[].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_17___default()(currentTags),[tag]):[],_context7.next=8,breakpoint(100);case 8:actions.setTagLoading(!1),actions.setEventPropertyDefinitionUpdateList(id),actions.setEventPropertyDefinition({tags:tags},id);case 11:case"end":return _context7.stop()}}),_callee7)}))),function setNewEventPropertyTag(_x9,_x10){return _setNewEventPropertyTag.apply(this,arguments)}),deleteEventPropertyTag:(_deleteEventPropertyTag=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_21___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.mark((function _callee8(_ref23,breakpoint){var tag,currentTags,id,tags;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_19___default.a.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return tag=_ref23.tag,currentTags=_ref23.currentTags,id=_ref23.id,_context8.next=3,breakpoint(100);case 3:tags=null==currentTags?void 0:currentTags.filter((function(_tag){return _tag!==tag})),actions.setEventPropertyDefinitionUpdateList(id),actions.setEventPropertyDefinition({tags:tags},id);case 6:case"end":return _context8.stop()}}),_callee8)}))),function deleteEventPropertyTag(_x11,_x12){return _deleteEventPropertyTag.apply(this,arguments)}),setEventPropertyDescription:function setEventPropertyDescription(_ref24){var description=_ref24.description,id=_ref24.id;actions.setEventPropertyDefinition({description:description},id),actions.setEventPropertyDefinitionUpdateList(id)},saveAll:function saveAll(){actions.saveDefinition({definition:_objectSpread({},values.definition),type:values.type}),values.editedEventPropertyDefinitions.forEach((function(id){var property=values.eventPropertiesDefinitions.find((function(prop){return prop.id===id}));actions.saveDefinition({definition:_objectSpread({},property),type:"property"})})),actions.closeDrawer()}}},path:function path(){return["scenes","events","definitions","definitionDrawerLogic"]}})},5645:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UsageDisabledWarning}));var antd__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(695),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);function UsageDisabledWarning(_ref){var tab=_ref.tab;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_0__.a,{type:"info",showIcon:!0,message:"".concat(tab," is not enabled for your instance."),description:react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,"You will still see the list of events and properties, but usage information will be unavailable. If you want to enable event usage please set the follow environment variable:"," ",react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("pre",{style:{display:"inline"}},"ASYNC_EVENT_PROPERTY_USAGE=1"),". Please note, enabling this environment variable ",react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("b",null,"may increase load considerably in your infrastructure"),", particularly if you have a large volume of events.")})}try{UsageDisabledWarning.displayName="UsageDisabledWarning",UsageDisabledWarning.__docgenInfo={description:"",displayName:"UsageDisabledWarning",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"]={docgenInfo:UsageDisabledWarning.__docgenInfo,name:"UsageDisabledWarning",path:"frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"})}catch(__react_docgen_typescript_loader_error){}},5646:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0);exports.default=function useDebouncedCallback(func,wait,options){var _this=this,lastCallTime=react_1.useRef(null),lastInvokeTime=react_1.useRef(0),timerId=react_1.useRef(null),lastArgs=react_1.useRef([]),lastThis=react_1.useRef(),result=react_1.useRef(),funcRef=react_1.useRef(func),mounted=react_1.useRef(!0);funcRef.current=func;var useRAF=!wait&&0!==wait&&"undefined"!=typeof window;if("function"!=typeof func)throw new TypeError("Expected a function");wait=+wait||0;var leading=!!(options=options||{}).leading,trailing=!("trailing"in options)||!!options.trailing,maxing="maxWait"in options,maxWait=maxing?Math.max(+options.maxWait||0,wait):null;return react_1.useEffect((function(){return mounted.current=!0,function(){mounted.current=!1}}),[]),react_1.useMemo((function(){var invokeFunc=function(time){var args=lastArgs.current,thisArg=lastThis.current;return lastArgs.current=lastThis.current=null,lastInvokeTime.current=time,result.current=funcRef.current.apply(thisArg,args)},startTimer=function(pendingFunc,wait){useRAF&&cancelAnimationFrame(timerId.current),timerId.current=useRAF?requestAnimationFrame(pendingFunc):setTimeout(pendingFunc,wait)},shouldInvoke=function(time){if(!mounted.current)return!1;var timeSinceLastCall=time-lastCallTime.current,timeSinceLastInvoke=time-lastInvokeTime.current;return!lastCallTime.current||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait},trailingEdge=function(time){return timerId.current=null,trailing&&lastArgs.current?invokeFunc(time):(lastArgs.current=lastThis.current=null,result.current)},timerExpired=function(){var time=Date.now();if(shouldInvoke(time))return trailingEdge(time);if(mounted.current){var timeSinceLastCall=time-lastCallTime.current,timeSinceLastInvoke=time-lastInvokeTime.current,timeWaiting=wait-timeSinceLastCall,remainingWait=maxing?Math.min(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting;startTimer(timerExpired,remainingWait)}},func=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var time=Date.now(),isInvoking=shouldInvoke(time);if(lastArgs.current=args,lastThis.current=_this,lastCallTime.current=time,isInvoking){if(!timerId.current&&mounted.current)return lastInvokeTime.current=lastCallTime.current,startTimer(timerExpired,wait),leading?invokeFunc(lastCallTime.current):result.current;if(maxing)return startTimer(timerExpired,wait),invokeFunc(lastCallTime.current)}return timerId.current||startTimer(timerExpired,wait),result.current};return func.cancel=function(){timerId.current&&(useRAF?cancelAnimationFrame(timerId.current):clearTimeout(timerId.current)),lastInvokeTime.current=0,lastArgs.current=lastCallTime.current=lastThis.current=timerId.current=null},func.isPending=function(){return!!timerId.current},func.flush=function(){return timerId.current?trailingEdge(Date.now()):result.current},func}),[leading,maxing,wait,maxWait,trailing,useRAF])}},5677:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_VolumeTable_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5771),_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_VolumeTable_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_VolumeTable_scss__WEBPACK_IMPORTED_MODULE_1__),options={insert:"head",singleton:!1};_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_VolumeTable_scss__WEBPACK_IMPORTED_MODULE_1___default.a,options),_node_modules_css_loader_dist_cjs_js_node_modules_postcss_loader_src_index_js_node_modules_sass_loader_dist_cjs_js_ref_5_3_VolumeTable_scss__WEBPACK_IMPORTED_MODULE_1___default.a.locals},5678:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Owner}));var lib_components_ProfilePicture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1166),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);function Owner(_ref){var user=_ref.user;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,(null==user?void 0:user.uuid)?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(lib_components_ProfilePicture__WEBPACK_IMPORTED_MODULE_0__.a,{name:user.first_name,email:user.email,size:"sm"}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span",{style:{paddingLeft:8}},user.first_name)):react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span",{className:"text-muted",style:{fontStyle:"italic"}},"No Owner"))}try{Owner.displayName="Owner",Owner.__docgenInfo={description:"",displayName:"Owner",props:{user:{defaultValue:null,description:"",name:"user",required:!1,type:{name:"UserBasicType | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/Owner.tsx#Owner"]={docgenInfo:Owner.__docgenInfo,name:"Owner",path:"frontend/src/scenes/events/Owner.tsx#Owner"})}catch(__react_docgen_typescript_loader_error){}},5700:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DefinitionDrawer}));__webpack_require__(60),__webpack_require__(95),__webpack_require__(64),__webpack_require__(115);var index_esm=__webpack_require__(3),Drawer=__webpack_require__(1764),react=__webpack_require__(0),react_default=__webpack_require__.n(react),definitionDrawerLogic=__webpack_require__(5616),Title=__webpack_require__(1766),collapse=(__webpack_require__(5677),__webpack_require__(5510)),es_button=__webpack_require__(114),es_alert=__webpack_require__(695),row=__webpack_require__(352),col=__webpack_require__(229),ObjectTags=__webpack_require__(859),utils=__webpack_require__(12),InfoCircleOutlined=__webpack_require__(681),logic=__webpack_require__(62),slicedToArray=(__webpack_require__(318),__webpack_require__(353),__webpack_require__(15)),slicedToArray_default=__webpack_require__.n(slicedToArray),input=__webpack_require__(694),table=__webpack_require__(2567),lib=__webpack_require__(5772);function EventPropertiesStats(){var _eventsSnippet$,_useValues=Object(index_esm.useValues)(definitionDrawerLogic.a),eventPropertiesDefinitions=_useValues.eventPropertiesDefinitions,eventsSnippet=_useValues.eventsSnippet,eventPropertiesDefinitionTags=_useValues.eventPropertiesDefinitionTags,tagLoading=_useValues.tagLoading,_useActions=Object(index_esm.useActions)(definitionDrawerLogic.a),setNewEventPropertyTag=_useActions.setNewEventPropertyTag,deleteEventPropertyTag=_useActions.deleteEventPropertyTag,setEventPropertyDescription=_useActions.setEventPropertyDescription,saveAll=_useActions.saveAll,propertyExamples=null===(_eventsSnippet$=eventsSnippet[0])||void 0===_eventsSnippet$?void 0:_eventsSnippet$.properties,tableColumns=[{title:"Property",key:"property",render:function renderProperty(_ref){var name=_ref.name;return react_default.a.createElement("span",{className:"text-default"},name)}},{title:"Description",key:"description",render:function renderDescription(_ref2){var description=_ref2.description,id=_ref2.id,_useState=Object(react.useState)(description),_useState2=slicedToArray_default()(_useState,2),newDescription=_useState2[0],setNewDescription=_useState2[1],debouncePropertyDescription=Object(lib.useDebouncedCallback)((function(value){setEventPropertyDescription(value,id)}),200);return react_default.a.createElement(input.a.TextArea,{placeholder:"Add description",value:newDescription||"",onChange:function onChange(e){setNewDescription(e.target.value),debouncePropertyDescription(e.target.value)},onKeyDown:function onKeyDown(e){"Enter"===e.key&&saveAll()}})}},{title:"Tags",key:"tags",render:function renderTags(_ref3){var id=_ref3.id,tags=_ref3.tags;return react_default.a.createElement(ObjectTags.a,{id:id,tags:tags||[],onTagSave:function onTagSave(tag,currentTags,propertyId){return setNewEventPropertyTag(tag,currentTags,propertyId)},onTagDelete:function onTagDelete(tag,currentTags,propertyId){return deleteEventPropertyTag(tag,currentTags,propertyId)},saving:tagLoading,tagsAvailable:null==eventPropertiesDefinitionTags?void 0:eventPropertiesDefinitionTags.filter((function(tag){return!(null==tags?void 0:tags.includes(tag))}))})}},{title:"Example",key:"example",render:function renderExample(_ref4){var name=_ref4.name,example=propertyExamples[name];return example=Array.isArray(example)||example instanceof Object?JSON.stringify(example).substr(0,140):example,react_default.a.createElement("div",{style:{backgroundColor:"#F0F0F0",padding:"4px, 15px",textAlign:"center"}},react_default.a.createElement("span",{style:{fontSize:10,fontWeight:400,fontFamily:"monaco"}},example))}}];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(row.a,{style:{paddingBottom:16}},react_default.a.createElement("span",{className:"text-default text-muted"},"Top properties that are sent with this event. Please note that description and tags are shared across events. Posthog properties are ",react_default.a.createElement("b",null,"excluded")," from this list.")),react_default.a.createElement(table.a,{dataSource:eventPropertiesDefinitions,columns:tableColumns,rowKey:function rowKey(row){return row.id},size:"small",tableLayout:"fixed",pagination:{pageSize:5,hideOnSinglePage:!0}}))}__webpack_require__(157),__webpack_require__(36);var es_select=__webpack_require__(208),membersLogic=__webpack_require__(1776),Owner=__webpack_require__(5678);function DefinitionOwnerDropdown(_ref){var owner=_ref.owner,members=Object(index_esm.useValues)(membersLogic.a).members,changeOwner=Object(index_esm.useActions)(definitionDrawerLogic.a).changeOwner;return react_default.a.createElement("div",{style:{paddingTop:16}},react_default.a.createElement("h4",{className:"l4"},"Owner"),react_default.a.createElement(es_select.a,{className:"owner-select",placeholder:react_default.a.createElement(Owner.a,{user:owner}),style:{minWidth:200},dropdownClassName:"owner-option",onChange:function onChange(val){var _members$find,newOwner=null===(_members$find=members.find((function(mem){return mem.user.id===val})))||void 0===_members$find?void 0:_members$find.user;newOwner&&changeOwner(newOwner)}},members.map((function(member){return react_default.a.createElement(es_select.a.Option,{key:member.user.id,value:member.user.id},react_default.a.createElement(Owner.a,{user:member.user}))}))))}try{DefinitionOwnerDropdown.displayName="DefinitionOwnerDropdown",DefinitionOwnerDropdown.__docgenInfo={description:"",displayName:"DefinitionOwnerDropdown",props:{owner:{defaultValue:null,description:"",name:"owner",required:!0,type:{name:"UserBasicType | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/definitions/DefinitionOwnerDropdown.tsx#DefinitionOwnerDropdown"]={docgenInfo:DefinitionOwnerDropdown.__docgenInfo,name:"DefinitionOwnerDropdown",path:"frontend/src/scenes/events/definitions/DefinitionOwnerDropdown.tsx#DefinitionOwnerDropdown"})}catch(__react_docgen_typescript_loader_error){}function DefinitionDescription(){var description=Object(index_esm.useValues)(definitionDrawerLogic.a).description,_useActions=Object(index_esm.useActions)(definitionDrawerLogic.a),setDescription=_useActions.setDescription,saveAll=_useActions.saveAll;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{style:{flexDirection:"column",minWidth:300}},react_default.a.createElement("h4",{className:"l4"},"Description"),react_default.a.createElement(input.a.TextArea,{style:{minHeight:108,marginBottom:8},placeholder:"Add description",value:description||"",onChange:function onChange(e){setDescription(e.target.value)},onKeyDown:function onKeyDown(e){"Enter"===e.key&&saveAll()}})))}var Property=__webpack_require__(663),TimezoneAware=__webpack_require__(592),PersonHeader=__webpack_require__(456);function EventsTableSnippet(){var eventsSnippet=Object(index_esm.useValues)(definitionDrawerLogic.a).eventsSnippet,columns=[{title:"Person",key:"person",render:function renderPerson(_ref){var person=_ref.person;return person?react_default.a.createElement(PersonHeader.a,{withIcon:!0,person:person}):{props:{colSpan:0}}}},{title:"URL",key:"url",eventProperties:["$current_url","$screen_name"],span:4,render:function renderURL(_ref2){var properties=_ref2.properties;return properties?react_default.a.createElement(Property.a,{value:properties.$current_url?properties.$current_url:properties.$screen_name}):{props:{colSpan:0}}},ellipsis:!0},{title:"Source",key:"source",render:function renderSource(_ref3){var properties=_ref3.properties;return properties?react_default.a.createElement(Property.a,{value:properties.$browser}):{props:{colSpan:0}}}},{title:"When",key:"when",render:function renderWhen(_ref4){var timestamp=_ref4.timestamp;return timestamp?react_default.a.createElement(TimezoneAware.b,{time:timestamp,showSeconds:!0}):{props:{colSpan:0}}},ellipsis:!0}];return react_default.a.createElement(react_default.a.Fragment,null,eventsSnippet&&react_default.a.createElement("div",{style:{fontWeight:400,paddingTop:15}},react_default.a.createElement(table.a,{dataSource:eventsSnippet,columns:columns,key:"default",rowKey:function rowKey(row){return row.id},size:"small",pagination:!1})))}var UsageDisabledWarning=__webpack_require__(5645),Tooltip=__webpack_require__(56);function DefinitionDrawer(){var _definition$updated_b,_useValues=Object(index_esm.useValues)(definitionDrawerLogic.a),drawerState=_useValues.drawerState,definition=_useValues.definition,tagLoading=_useValues.tagLoading,type=_useValues.type,eventDefinitionTags=_useValues.eventDefinitionTags,propertyDefinitionTags=_useValues.propertyDefinitionTags,_useActions=Object(index_esm.useActions)(definitionDrawerLogic.a),closeDrawer=_useActions.closeDrawer,setNewTag=_useActions.setNewTag,deleteTag=_useActions.deleteTag,saveAll=_useActions.saveAll,preflight=Object(index_esm.useValues)(logic.a).preflight,Panel=collapse.a.Panel,definitionTags="event"===type?eventDefinitionTags:propertyDefinitionTags;return react_default.a.createElement(react_default.a.Fragment,null,definition&&react_default.a.createElement("div",{className:"definition-drawer"},react_default.a.createElement(Drawer.a,{placement:"right",headerStyle:{paddingBottom:0},title:react_default.a.createElement(Title.a,{level:3},definition.name),visible:drawerState,onClose:closeDrawer,width:"60vw",bodyStyle:{padding:14,paddingTop:0},className:"definition-drawer",footer:react_default.a.createElement(es_button.a,{style:{float:"right"},type:"primary",onClick:saveAll},"Save")},preflight&&!(null==preflight?void 0:preflight.is_event_property_usage_enabled)?react_default.a.createElement("div",{style:{marginTop:8}},react_default.a.createElement(UsageDisabledWarning.a,{tab:"event"===type?"Events Stats":"Property Stats"})):null===definition.volume_30_day&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(es_alert.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later."})),react_default.a.createElement(collapse.a,{defaultActiveKey:["1"],expandIconPosition:"right",ghost:!0,style:{borderBottom:"1px solid #D9D9D9"}},react_default.a.createElement(Panel,{header:"General",key:"1",className:"l3"},react_default.a.createElement(row.a,{className:"panel-wrapper"},react_default.a.createElement(col.a,{style:{marginRight:14}},react_default.a.createElement(DefinitionDescription,null)),react_default.a.createElement(col.a,null,react_default.a.createElement(row.a,null,react_default.a.createElement(col.a,null,react_default.a.createElement("h4",{className:"l4"},"Tags"),react_default.a.createElement(ObjectTags.a,{tags:definition.tags||[],onTagSave:setNewTag,onTagDelete:deleteTag,saving:tagLoading,tagsAvailable:null==definitionTags?void 0:definitionTags.filter((function(tag){var _definition$tags;return!(null===(_definition$tags=definition.tags)||void 0===_definition$tags?void 0:_definition$tags.includes(tag))}))}))),"event"===type&&react_default.a.createElement(row.a,null,react_default.a.createElement(DefinitionOwnerDropdown,{owner:definition.owner||null})))),react_default.a.createElement(row.a,{className:"detail-status"},"event"===type&&react_default.a.createElement("div",{style:{paddingRight:32,textAlign:"center"}},react_default.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",textAlign:"center"}},react_default.a.createElement("h4",{className:"l4",style:{marginBottom:0}},"Total count (30 days)"),react_default.a.createElement(Tooltip.a,{placement:"right",title:"Total number of events over the last 30 days. Can be delayed by up to an hour."},react_default.a.createElement(InfoCircleOutlined.a,{className:"info-indicator"}))),react_default.a.createElement("span",null,definition.volume_30_day||"-")),react_default.a.createElement("div",{style:{textAlign:"center"}},react_default.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},react_default.a.createElement("h4",{className:"l4",style:{marginBottom:0}},"Query Usage (30 days)"),react_default.a.createElement(Tooltip.a,{placement:"right",title:"Number of queries in PostHog that included a filter on this ".concat(type)},react_default.a.createElement(InfoCircleOutlined.a,{className:"info-indicator"}))),react_default.a.createElement("span",null,definition.query_usage_30_day||"-")),react_default.a.createElement("div",null,react_default.a.createElement("h4",{className:"l4"},"Last modified"),react_default.a.createElement("span",null,Object(utils.G)(definition.updated_at||null))),react_default.a.createElement("div",null,react_default.a.createElement("h4",{className:"l4"},"Last modified by"),react_default.a.createElement("span",null,(null===(_definition$updated_b=definition.updated_by)||void 0===_definition$updated_b?void 0:_definition$updated_b.first_name)||"-"))))),"event"===type&&react_default.a.createElement(collapse.a,{defaultActiveKey:["2"],expandIconPosition:"right",ghost:!0},react_default.a.createElement(Panel,{header:"Properties",key:"2",className:"l3"},react_default.a.createElement(EventPropertiesStats,null))),react_default.a.createElement(collapse.a,{style:{paddingBottom:32},defaultActiveKey:["3"],expandIconPosition:"right",ghost:!0},react_default.a.createElement(Panel,{header:"Recent",key:"3",className:"l3 events-table"},react_default.a.createElement("span",{className:"text-muted",style:{fontWeight:400,fontSize:14}},"Most recent events received"),react_default.a.createElement(EventsTableSnippet,null))))))}},5704:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VolumeTable_VolumeTable}));__webpack_require__(318),__webpack_require__(353),__webpack_require__(95),__webpack_require__(36),__webpack_require__(64),__webpack_require__(91),__webpack_require__(2601),__webpack_require__(115),__webpack_require__(319),__webpack_require__(696);var slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),es_button=__webpack_require__(114),input=__webpack_require__(694),WarningOutlined=__webpack_require__(5532),InfoCircleOutlined=__webpack_require__(681),ArrowRightOutlined=__webpack_require__(2569),table=__webpack_require__(2425),table_default=__webpack_require__.n(table),fuse_esm=__webpack_require__(405),index_esm=__webpack_require__(3),PropertyKeyInfo=__webpack_require__(59),utils=__webpack_require__(12),react=__webpack_require__(0),react_default=__webpack_require__.n(react),userLogic=__webpack_require__(74),types=__webpack_require__(8),definitionDrawerLogic=(__webpack_require__(5677),__webpack_require__(5616)),ObjectTags=__webpack_require__(859),Owner=__webpack_require__(5678),row=__webpack_require__(352),eventDefinitionsModel=__webpack_require__(381);function VolumeTableRecordDescription(_ref){var id=_ref.id,description=_ref.description,type=_ref.type,updateDescription=Object(index_esm.useActions)(eventDefinitionsModel.a).updateDescription,_useState=Object(react.useState)(description),_useState2=slicedToArray_default()(_useState,2),newDescription=_useState2[0],setDescription=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),editing=_useState4[0],setEditing=_useState4[1];return Object(react.useEffect)((function(){setDescription(description)}),[description]),react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(row.a,null,react_default.a.createElement(input.a.TextArea,{value:newDescription||"",style:{paddingLeft:0},bordered:editing,onClick:function onClick(e){e.stopPropagation(),setEditing(!0)},placeholder:"Click to add description",onChange:function onChange(e){return setDescription(e.target.value)},onKeyDown:function onKeyDown(e){"Enter"===e.key&&(setEditing(!1),updateDescription(id,newDescription,type))},autoSize:!0})),editing&&react_default.a.createElement(row.a,{style:{float:"right",marginTop:8}},react_default.a.createElement(es_button.a,{size:"small",style:{marginRight:8},onClick:function onClick(e){e.stopPropagation(),setEditing(!1),setDescription(description)}},"Cancel"),react_default.a.createElement(es_button.a,{type:"primary",size:"small",onClick:function onClick(e){e.stopPropagation(),setDescription(newDescription),setEditing(!1),updateDescription(id,newDescription,type)}},"Save")))}try{VolumeTableRecordDescription.displayName="VolumeTableRecordDescription",VolumeTableRecordDescription.__docgenInfo={description:"",displayName:"VolumeTableRecordDescription",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/definitions/VolumeTableRecordDescription.tsx#VolumeTableRecordDescription"]={docgenInfo:VolumeTableRecordDescription.__docgenInfo,name:"VolumeTableRecordDescription",path:"frontend/src/scenes/events/definitions/VolumeTableRecordDescription.tsx#VolumeTableRecordDescription"})}catch(__react_docgen_typescript_loader_error){}var Tooltip=__webpack_require__(56),VolumeTable_isPosthogEvent=function isPosthogEvent(name){return!!PropertyKeyInfo.f.event[name]},VolumeTable_search=function search(sources,searchQuery){return new fuse_esm.a(sources,{keys:["eventOrProp.name"],threshold:.3}).search(searchQuery).map((function(result){return result.item}))};function VolumeTable_VolumeTable(_ref){var _user$organization,_user$organization$av,type=_ref.type,data=_ref.data,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1],_useState3=Object(react.useState)([]),_useState4=slicedToArray_default()(_useState3,2),dataWithWarnings=_useState4[0],setDataWithWarnings=_useState4[1],user=Object(index_esm.useValues)(userLogic.a).user,openDrawer=Object(index_esm.useActions)(definitionDrawerLogic.a).openDrawer,hasTaxonomyFeatures=null==user||null===(_user$organization=user.organization)||void 0===_user$organization||null===(_user$organization$av=_user$organization.available_features)||void 0===_user$organization$av?void 0:_user$organization$av.includes(types.c.INGESTION_TAXONOMY),columns=[{title:"".concat(Object(utils.h)(type)," name"),render:function Render(_,record){var _record$warnings;return react_default.a.createElement("span",null,react_default.a.createElement("div",{style:{display:"flex",alignItems:"baseline",paddingBottom:4}},react_default.a.createElement("span",{className:"ph-no-capture",style:{paddingRight:8}},react_default.a.createElement(PropertyKeyInfo.b,{style:hasTaxonomyFeatures?{fontWeight:"bold"}:{},value:record.eventOrProp.name})),hasTaxonomyFeatures?react_default.a.createElement(ObjectTags.a,{tags:record.eventOrProp.tags||[],staticOnly:!0}):null),hasTaxonomyFeatures&&(VolumeTable_isPosthogEvent(record.eventOrProp.name)?null:react_default.a.createElement(VolumeTableRecordDescription,{id:record.eventOrProp.id,description:record.eventOrProp.description,type:type})),null===(_record$warnings=record.warnings)||void 0===_record$warnings?void 0:_record$warnings.map((function(warning){return react_default.a.createElement(Tooltip.a,{key:warning,color:"orange",title:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("b",null,"Warning!")," ",warning)},react_default.a.createElement(WarningOutlined.a,{style:{color:"var(--warning)",marginLeft:6}}))})))},sorter:function sorter(a,b){return(""+a.eventOrProp.name).localeCompare(b.eventOrProp.name||"")},filters:[{text:"Has warnings",value:"warnings"},{text:"No warnings",value:"noWarnings"}],onFilter:function onFilter(value,record){return"warnings"===value?!!record.warnings.length:!record.warnings.length}},"event"===type&&hasTaxonomyFeatures?{title:"Owner",render:function Render(_,record){var _record$eventOrProp,owner=null===(_record$eventOrProp=record.eventOrProp)||void 0===_record$eventOrProp?void 0:_record$eventOrProp.owner;return VolumeTable_isPosthogEvent(record.eventOrProp.name)?react_default.a.createElement(react_default.a.Fragment,null,"-"):react_default.a.createElement(Owner.a,{user:owner})}}:{},"event"===type?{title:function VolumeTitle(){return react_default.a.createElement(Tooltip.a,{placement:"right",title:"Total number of events over the last 30 days. Can be delayed by up to an hour."},"30 day volume (delayed by up to an hour)",react_default.a.createElement(InfoCircleOutlined.a,{className:"info-indicator"}))},render:function RenderVolume(_,record){return react_default.a.createElement("span",{className:"ph-no-capture"},Object(utils.m)(record.eventOrProp.volume_30_day))},sorter:function sorter(a,b){return a.eventOrProp.volume_30_day,b.eventOrProp.volume_30_day,(a.eventOrProp.volume_30_day||-1)-(b.eventOrProp.volume_30_day||-1)}}:{},{title:function QueriesTitle(){return react_default.a.createElement(Tooltip.a,{placement:"right",title:"Number of queries in PostHog that included a filter on this ".concat(type)},"30 day queries (delayed by up to an hour)",react_default.a.createElement(InfoCircleOutlined.a,{className:"info-indicator"}))},render:function Render(_,item){return react_default.a.createElement("span",{className:"ph-no-capture"},Object(utils.m)(item.eventOrProp.query_usage_30_day))},sorter:function sorter(a,b){return a.eventOrProp.query_usage_30_day,b.eventOrProp.query_usage_30_day,(a.eventOrProp.query_usage_30_day||-1)-(b.eventOrProp.query_usage_30_day||-1)}},hasTaxonomyFeatures?{render:function Render(_,item){return react_default.a.createElement(react_default.a.Fragment,null,VolumeTable_isPosthogEvent(item.eventOrProp.name)?null:react_default.a.createElement(es_button.a,{type:"link",icon:react_default.a.createElement(ArrowRightOutlined.a,{style:{color:"#5375FF"}}),onClick:function onClick(){return openDrawer(type,item.eventOrProp.id)}}))}}:{}];return Object(react.useEffect)((function(){setDataWithWarnings(data.map((function(eventOrProp){var _eventOrProp$name,_eventOrProp$name2,record={eventOrProp:eventOrProp,warnings:[]};return(null===(_eventOrProp$name=eventOrProp.name)||void 0===_eventOrProp$name?void 0:_eventOrProp$name.endsWith(" "))&&record.warnings.push("This ".concat(type," ends with a space.")),(null===(_eventOrProp$name2=eventOrProp.name)||void 0===_eventOrProp$name2?void 0:_eventOrProp$name2.startsWith(" "))&&record.warnings.push("This ".concat(type," starts with a space.")),record}))||[])}),[data]),react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(input.a.Search,{allowClear:!0,enterButton:!0,style:{marginTop:"1.5rem",maxWidth:400,width:"initial",flexGrow:1},onChange:function onChange(e){setSearchTerm(e.target.value)},placeholder:"Filter ".concat("property"===type?"properties":"events","....")}),react_default.a.createElement("br",null),react_default.a.createElement("br",null),react_default.a.createElement(table_default.a,{dataSource:searchTerm?VolumeTable_search(dataWithWarnings,searchTerm):dataWithWarnings,columns:columns,rowKey:function rowKey(item){return item.eventOrProp.name},size:"small",style:{marginBottom:"4rem"},pagination:{pageSize:100,hideOnSinglePage:!0},onRow:function onRow(record){return hasTaxonomyFeatures&&!VolumeTable_isPosthogEvent(record.eventOrProp.name)?{onClick:function onClick(){return openDrawer(type,record.eventOrProp.id)},style:{cursor:"pointer"}}:{}}}))}try{VolumeTable_VolumeTable.displayName="VolumeTable",VolumeTable_VolumeTable.__docgenInfo={description:"",displayName:"VolumeTable",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"property"'},{value:'"event"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(EventDefinition | PropertyDefinition)[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/VolumeTable.tsx#VolumeTable"]={docgenInfo:VolumeTable_VolumeTable.__docgenInfo,name:"VolumeTable",path:"frontend/src/scenes/events/VolumeTable.tsx#VolumeTable"})}catch(__react_docgen_typescript_loader_error){}},5771:function(module,exports,__webpack_require__){(exports=__webpack_require__(55)(!1)).push([module.i,".definition-drawer .ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding-top:0}.definition-drawer .definition-description.ant-input:-moz-placeholder-shown{font-style:italic}.definition-drawer .definition-description.ant-input:-ms-input-placeholder{font-style:italic}.definition-drawer .definition-description.ant-input:placeholder-shown{font-style:italic}.definition-drawer .panel-wrapper{display:flex;flex-direction:row;padding-top:0}.definition-drawer .panel-wrapper span{font-weight:400;font-size:14px}.definition-drawer .owner-select .ant-select-selector .ant-select-selection-placeholder{color:#000;font-weight:400}.definition-drawer .detail-status{display:flex;flex-direction:row;justify-content:space-evenly;margin-top:30px;text-align:center}.definition-drawer .detail-status .ant-typography{margin-bottom:0}.definition-drawer .detail-status span{font-weight:400;font-size:14px}",""]),module.exports=exports},5772:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var useDebounce_1=__webpack_require__(5773);exports.useDebounce=useDebounce_1.default;var useDebouncedCallback_1=__webpack_require__(5646);exports.useDebouncedCallback=useDebouncedCallback_1.default;var useThrottledCallback_1=__webpack_require__(5774);exports.useThrottledCallback=useThrottledCallback_1.default},5773:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),useDebouncedCallback_1=__webpack_require__(5646);function valueEquality(left,right){return left===right}function adjustFunctionValueOfSetState(value){return"function"==typeof value?function(){return value}:value}exports.default=function useDebounce(value,delay,options){var eq=options&&options.equalityFn||valueEquality,_a=function useStateIgnoreCallback(initialState){var _a=react_1.useState(adjustFunctionValueOfSetState(initialState)),state=_a[0],setState=_a[1];return[state,react_1.useCallback((function(value){return setState(adjustFunctionValueOfSetState(value))}),[])]}(value),state=_a[0],dispatch=_a[1],debounced=useDebouncedCallback_1.default(react_1.useCallback((function(value){return dispatch(value)}),[dispatch]),delay,options),previousValue=react_1.useRef(value);return react_1.useEffect((function(){eq(previousValue.current,value)||(debounced(value),previousValue.current=value)}),[value,debounced,eq]),[state,{cancel:debounced.cancel,isPending:debounced.isPending,flush:debounced.flush}]}},5774:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var useDebouncedCallback_1=__webpack_require__(5646);exports.default=function useThrottledCallback(func,wait,_a){var _b=void 0===_a?{}:_a,_c=_b.leading,leading=void 0===_c||_c,_d=_b.trailing,trailing=void 0===_d||_d;return useDebouncedCallback_1.default(func,wait,{maxWait:wait,leading:leading,trailing:trailing})}},5896:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"EventsVolumeTable",(function(){return EventsVolumeTable}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),antd__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(695),antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1162),scenes_PreflightCheck_logic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(62),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(317),_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(381),_UsageDisabledWarning__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5645),_VolumeTable__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5704),scenes_events_definitions_DefinitionDrawer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5700),scenes_events_EventsTabs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(814),scene={component:EventsVolumeTable,logic:_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_6__.a};function EventsVolumeTable(){var preflight=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_PreflightCheck_logic__WEBPACK_IMPORTED_MODULE_4__.a).preflight,_useValues2=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_6__.a),eventDefinitions=_useValues2.eventDefinitions,loaded=_useValues2.loaded;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{"data-attr":"manage-events-table",style:{paddingTop:32}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(scenes_events_EventsTabs__WEBPACK_IMPORTED_MODULE_10__.b,{tab:scenes_events_EventsTabs__WEBPACK_IMPORTED_MODULE_10__.a.EventStats}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_5__.a,{title:"Events Stats",caption:"See all event names that have ever been sent to this team, including the volume and how often queries where made using this event.",style:{marginTop:0}}),loaded?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,preflight&&!(null==preflight?void 0:preflight.is_event_property_usage_enabled)?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_UsageDisabledWarning__WEBPACK_IMPORTED_MODULE_7__.a,{tab:"Events Stats"}):(0===eventDefinitions.length||null===eventDefinitions[0].volume_30_day)&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later."})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VolumeTable__WEBPACK_IMPORTED_MODULE_8__.a,{data:eventDefinitions,type:"event"})):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{active:!0,paragraph:{rows:5}}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(scenes_events_definitions_DefinitionDrawer__WEBPACK_IMPORTED_MODULE_9__.a,null))}},5897:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"PropertiesVolumeTable",(function(){return PropertiesVolumeTable}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),antd__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(695),antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1162),scenes_PreflightCheck_logic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(62),_models_propertyDefinitionsModel__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(498),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(317),_UsageDisabledWarning__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5645),_VolumeTable__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5704),scenes_events_definitions_DefinitionDrawer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5700),_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(381),scenes_events_EventsTabs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(814),scene={component:PropertiesVolumeTable,logic:_models_eventDefinitionsModel__WEBPACK_IMPORTED_MODULE_10__.a};function PropertiesVolumeTable(){var preflight=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_PreflightCheck_logic__WEBPACK_IMPORTED_MODULE_4__.a).preflight,_useValues2=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_models_propertyDefinitionsModel__WEBPACK_IMPORTED_MODULE_5__.a),propertyDefinitions=_useValues2.propertyDefinitions,loaded=_useValues2.loaded;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{"data-attr":"manage-events-table",style:{paddingTop:32}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(scenes_events_EventsTabs__WEBPACK_IMPORTED_MODULE_11__.b,{tab:scenes_events_EventsTabs__WEBPACK_IMPORTED_MODULE_11__.a.EventPropertyStats}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_6__.a,{title:"Properties Stats",caption:"See all property keys that have ever been sent to this team, including the volume and how often queries where made using this property key.",style:{marginTop:0}}),loaded?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,preflight&&!(null==preflight?void 0:preflight.is_event_property_usage_enabled)?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_UsageDisabledWarning__WEBPACK_IMPORTED_MODULE_7__.a,{tab:"Properties Stats"}):0===propertyDefinitions.length||null===propertyDefinitions[0].volume_30_day&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check back later."})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_VolumeTable__WEBPACK_IMPORTED_MODULE_8__.a,{data:propertyDefinitions,type:"property"})):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{active:!0,paragraph:{rows:5}}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(scenes_events_definitions_DefinitionDrawer__WEBPACK_IMPORTED_MODULE_9__.a,null))}},6102:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"ActionsTable",(function(){return ActionsTable}));__webpack_require__(38),__webpack_require__(60),__webpack_require__(36),__webpack_require__(166),__webpack_require__(64),__webpack_require__(241),__webpack_require__(91),__webpack_require__(319);var toConsumableArray=__webpack_require__(18),toConsumableArray_default=__webpack_require__.n(toConsumableArray),slicedToArray=__webpack_require__(15),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Link=(__webpack_require__(862),__webpack_require__(63)),input=__webpack_require__(694),es_radio=__webpack_require__(1142),table=__webpack_require__(2567),CheckOutlined=__webpack_require__(863),EditOutlined=__webpack_require__(2559),DeleteOutlined=__webpack_require__(5493),ExportOutlined=__webpack_require__(5575),QuestionCircleOutlined=__webpack_require__(2561),utils=__webpack_require__(12),index_esm=__webpack_require__(3),actionsModel=__webpack_require__(467),es_button=__webpack_require__(114),modal=__webpack_require__(2568),row=__webpack_require__(352),col=__webpack_require__(229),card=__webpack_require__(5513),EditAppUrls=__webpack_require__(1777),SearchOutlined=__webpack_require__(1151),lib=__webpack_require__(20),urls=__webpack_require__(32);function NewActionButton(){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),visible=_useState2[0],setVisible=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),appUrlsVisible=_useState4[0],setAppUrlsVisible=_useState4[1];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(es_button.a,{type:"primary",onClick:function onClick(){return setVisible(!0)},"data-attr":"create-action"},"+ New Action"),react_default.a.createElement(modal.a,{visible:visible,style:{cursor:"pointer"},onCancel:function onCancel(){setVisible(!1),setAppUrlsVisible(!1)},title:"Create new action",footer:[appUrlsVisible&&react_default.a.createElement(es_button.a,{key:"back-button",onClick:function onClick(){return setAppUrlsVisible(!1)}},"Back"),react_default.a.createElement(es_button.a,{key:"cancel-button",onClick:function onClick(){setVisible(!1),setAppUrlsVisible(!1)}},"Cancel")]},!appUrlsVisible&&react_default.a.createElement(row.a,{gutter:2,justify:"space-between"},react_default.a.createElement(col.a,{xs:11},react_default.a.createElement(card.a,{title:"Inspect element on your site",onClick:function onClick(){return setAppUrlsVisible(!0)},size:"small"},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40}},react_default.a.createElement(SearchOutlined.a,null)))),react_default.a.createElement(col.a,{xs:11},react_default.a.createElement(card.a,{title:"From event or pageview",onClick:function onClick(){lib.router.actions.push(urls.a.createAction())},size:"small"},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},react_default.a.createElement(EditOutlined.a,null))))),appUrlsVisible&&react_default.a.createElement(EditAppUrls.a,{allowNavigation:!0})))}var actions_tutorial_grouping=__webpack_require__.p+"images/actions-tutorial-grouping.c9c565ed9cae79997aa714fdf8196aca.svg",actions_tutorial_standardized=__webpack_require__.p+"images/actions-tutorial-standardized.3935760a1606361ee014ad5615d6e22a.svg",actions_tutorial_retroactive=__webpack_require__.p+"images/actions-tutorial-retroactive.8bcf9190e81ba5d434572271b9f632be.svg",types=__webpack_require__(8),fuse_esm=__webpack_require__(405),userLogic=__webpack_require__(74),Table=__webpack_require__(5608),PageHeader=__webpack_require__(317),responsiveUtils=__webpack_require__(288),teamLogic=__webpack_require__(27),events=__webpack_require__(1767),api=__webpack_require__(21),logics=__webpack_require__(660),scene={component:ActionsTable,logic:actionsModel.a,paramsToProps:function paramsToProps(){return{params:"include_count=1"}}};function ActionsTable(){var _actions$,_useValues=Object(index_esm.useValues)(teamLogic.a),currentTeam=_useValues.currentTeam,currentTeamId=_useValues.currentTeamId,_useValues2=Object(index_esm.useValues)(Object(actionsModel.a)({params:"include_count=1"})),actions=_useValues2.actions,actionsLoading=_useValues2.actionsLoading,loadActions=Object(index_esm.useActions)(actionsModel.a).loadActions,_useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),filterByMe=_useState4[0],setFilterByMe=_useState4[1],user=Object(index_esm.useValues)(userLogic.a).user,tableScrollBreakpoint=Object(responsiveUtils.b)("lg"),columns=[{title:"Name",key:"name",sorter:function sorter(a,b){return(""+a.name).localeCompare(b.name)},render:function RenderName(_,action,index){return react_default.a.createElement(Link.a,{"data-attr":"action-link-"+index,to:"/action/"+action.id+"#backTo=Actions&backToURL="+window.location.pathname},action.name)}}].concat(toConsumableArray_default()(null!==(null===(_actions$=actions[0])||void 0===_actions$?void 0:_actions$.count)?[{title:"Volume",render:function RenderVolume(action){return react_default.a.createElement("span",null,action.count)},sorter:function sorter(a,b){return(a.count||0)-(b.count||0)}}]:[]),[{title:"Type",render:function RenderType(action){var _action$steps;return react_default.a.createElement("span",null,null===(_action$steps=action.steps)||void 0===_action$steps?void 0:_action$steps.map((function(step){return react_default.a.createElement("div",{key:step.id},function(){var url=Object(utils.lb)(step.url||"");switch(url=url.slice(0,40)+(url.length>40?"...":""),step.event){case"$autocapture":return"Autocapture";case"$pageview":switch(step.url_matching){case"regex":return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL matches regex ",react_default.a.createElement("strong",null,url));case"exact":return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL matches exactly ",react_default.a.createElement("strong",null,url));default:return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL contains ",react_default.a.createElement("strong",null,url))}default:return react_default.a.createElement(react_default.a.Fragment,null,"Event: ",react_default.a.createElement("strong",null,step.event))}}())})))}},Object(Table.a)(),Object(Table.b)(actions)],toConsumableArray_default()((null==currentTeam?void 0:currentTeam.slack_incoming_webhook)?[{title:"Webhook",key:"post_to_slack",sorter:function sorter(a,b){return Number(a.post_to_slack)-Number(b.post_to_slack)},render:function RenderActions(action){return action.post_to_slack?react_default.a.createElement(CheckOutlined.a,null):null}}]:[]),[{title:"",render:function RenderActions(action){var params={insight:types.w.TRENDS,interval:"day",display:"ActionsLineGraph",actions:[{id:action.id,name:action.name,type:"actions",order:0}]},encodedParams=Object(utils.ob)(params),actionsLink="/insights?".concat(encodedParams,"#backTo=Actions&backToURL=").concat(window.location.pathname);return react_default.a.createElement("span",null,react_default.a.createElement(Link.a,{to:"/action/"+action.id+"#backTo=Actions&backToURL="+window.location.pathname},react_default.a.createElement(EditOutlined.a,null)),react_default.a.createElement(utils.b,{endpoint:api.a.actions.determineDeleteEndpoint(Object(logics.a)(currentTeamId)),object:action,className:"text-danger",style:{marginLeft:8,marginRight:8},callback:loadActions},react_default.a.createElement(DeleteOutlined.a,null)),react_default.a.createElement(Link.a,{to:"".concat(actionsLink),"data-attr":"actions-table-usage"},"Insights ",react_default.a.createElement(ExportOutlined.a,null)))}}]),data=actions;return searchTerm&&""!==searchTerm&&(data=function searchActions(sources,search){return new fuse_esm.a(sources,{keys:["name","url"],threshold:.3}).search(search).map((function(result){return result.item}))}(data,searchTerm)),filterByMe&&(data=data.filter((function(item){var _item$created_by;return(null===(_item$created_by=item.created_by)||void 0===_item$created_by?void 0:_item$created_by.uuid)===(null==user?void 0:user.uuid)}))),react_default.a.createElement("div",{"data-attr":"manage-events-table",style:{paddingTop:32}},react_default.a.createElement(events.d,{tab:events.b.Actions}),react_default.a.createElement(PageHeader.a,{title:"Actions",caption:react_default.a.createElement(react_default.a.Fragment,null,"Actions can retroactively group one or more raw events to help provide consistent analytics."," ",react_default.a.createElement("a",{href:"https://posthog.com/docs/features/actions?utm_medium=in-product&utm_campaign=actions-table",target:"_blank"},react_default.a.createElement(QuestionCircleOutlined.a,null))),style:{marginTop:0}}),react_default.a.createElement("div",null,react_default.a.createElement("div",null),react_default.a.createElement("div",{className:"tutorial-container"},react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_grouping,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Multiple grouping"),react_default.a.createElement("div",{className:"description"},"Group multiple sets of events into a single action."))),react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_standardized,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Clean & standardized data"),react_default.a.createElement("div",{className:"description"},"Keep your actions the same, even if your product or data changes."))),react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_retroactive,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Retroactive"),react_default.a.createElement("div",{className:"description"},"We'll retroactively update your actions to match any past events."))))),react_default.a.createElement(input.a.Search,{allowClear:!0,enterButton:!0,autoFocus:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function onChange(e){setSearchTerm(e.target.value)}}),react_default.a.createElement(es_radio.a.Group,{buttonStyle:"solid",value:filterByMe,onChange:function onChange(e){return setFilterByMe(e.target.value)}},react_default.a.createElement(es_radio.a.Button,{value:!1},"All actions"),react_default.a.createElement(es_radio.a.Button,{value:!0},"My actions")),react_default.a.createElement("div",{className:"mb float-right"},react_default.a.createElement(NewActionButton,null)),react_default.a.createElement("br",null),react_default.a.createElement(table.a,{size:"small",columns:columns,loading:actionsLoading,rowKey:"id",pagination:{pageSize:100,hideOnSinglePage:!0},"data-attr":"actions-table",dataSource:data,locale:{emptyText:"The first step to standardized analytics is creating your first action."},scroll:{x:"".concat(tableScrollBreakpoint,"px")}}))}}}]);