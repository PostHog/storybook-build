(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{"./frontend/src/scenes/cohorts/Cohorts.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Cohorts",(function(){return Cohorts_Cohorts})),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene}));var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),types=__webpack_require__("./frontend/src/types.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),Cohorts=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss"),Cohorts_default=__webpack_require__.n(Cohorts),options={insert:"head",singleton:!1},fuse_esm=(injectStylesIntoStyleTag_default()(Cohorts_default.a,options),Cohorts_default.a.locals,__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js")),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),dayjs=__webpack_require__("./frontend/src/lib/dayjs.ts"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function Cohorts_Cohorts(){const{cohorts:cohorts,cohortsLoading:cohortsLoading}=Object(index_esm.useValues)(cohortsModel.a),{deleteCohort:deleteCohort,exportCohortPersons:exportCohortPersons}=Object(index_esm.useActions)(cohortsModel.a),{hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),{searchParams:searchParams}=Object(index_esm.useValues)(lib.router),[searchTerm,setSearchTerm]=Object(react.useState)(""),columns=[{title:"Name",dataIndex:"name",className:"ph-no-capture",width:"30%",sorter:(a,b)=>(a.name||"").localeCompare(b.name||""),render:function Render(name,_ref){let{id:id,description:description}=_ref;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(Link.a,{to:Object(lib.combineUrl)(urls.a.cohort(id),searchParams).url,className:"row-name",children:name||"Untitled"}),hasAvailableFeature(types.d.DASHBOARD_COLLABORATION)&&description&&Object(jsx_runtime.jsx)("span",{className:"row-description",children:description})]})}},{title:"Users in cohort",align:"right",render:function RenderCount(_,cohort){var _cohort$count;return null===(_cohort$count=cohort.count)||void 0===_cohort$count?void 0:_cohort$count.toLocaleString()},dataIndex:"count",sorter:(a,b)=>(a.count||0)-(b.count||0)},Object(columnUtils.b)(),Object(columnUtils.a)(),{title:"Last calculated",tooltip:"PostHog calculates what users belong to each cohort. This is then used when filtering on cohorts in the Trends page etc. Calculating happens every 15 minutes, or whenever a cohort is updated",render:function RenderCalculation(_,cohort){return cohort.is_static?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"N/A"}):cohort.is_calculating?Object(jsx_runtime.jsxs)("span",{className:"flex items-center",children:["in progress ",Object(jsx_runtime.jsx)(Spinner.a,{className:"ml-2"})]}):Object(dayjs.a)(cohort.last_calculation).fromNow()}},{width:0,render:function RenderActions(_,cohort){return Object(jsx_runtime.jsx)(More.a,{overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",to:urls.a.cohort(cohort.id),fullWidth:!0,children:"Edit"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",to:Object(lib.combineUrl)(urls.a.replay(),{filters:{properties:[{key:"id",label:cohort.name,type:"cohort",value:cohort.id}]}}).url,fullWidth:!0,children:"View session recordings"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>exportCohortPersons(cohort.id,["distinct_ids.0","id","name","properties.email"]),tooltip:"Export specific columns for users belonging to this cohort in CSV format. Includes distinct id, internal id, email, and name",fullWidth:!0,children:"Export important columns for users"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>exportCohortPersons(cohort.id),tooltip:"Export all users belonging to this cohort in CSV format.",fullWidth:!0,children:"Export all columns for users"}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"danger",onClick:()=>deleteCohort(cohort),fullWidth:!0,children:"Delete cohort"})]})})}}];return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:"Cohorts",caption:"Create lists of users who have something in common to use in analytics or feature flags."}),Object(jsx_runtime.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-2",children:[Object(jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for cohorts",onChange:setSearchTerm,value:searchTerm}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary","data-attr":"create-cohort",onClick:()=>lib.router.actions.push(urls.a.cohort("new")),children:"New Cohort"})]}),Object(jsx_runtime.jsx)(LemonTable.a,{columns:columns,loading:cohortsLoading,rowKey:"id",pagination:{pageSize:100},dataSource:searchTerm?(sources=cohorts,search=searchTerm,new fuse_esm.a(sources,{keys:["name"],threshold:.3}).search(search).map((result=>result.item))):cohorts,nouns:["cohort","cohorts"],"data-attr":"cohorts-table"})]});var sources,search}const scene={component:Cohorts_Cohorts,logic:cohortsModel.a}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".cohorts-drawer .ant-drawer-content-wrapper{max-width:850px!important;width:100%!important}.cohort-recalculating{background-color:var(--mid);padding:.5rem 1rem;margin-top:1rem;border-radius:var(--radius)}.cohort-recalculating .ant-spin-spinning{margin-right:.375rem}.cohort-csv-dragger{height:155px!important;background-color:transparent!important;margin-top:1rem;border:2px dashed var(--primary)!important;border-radius:4px!important}.cohort-csv-dragger:hover{border-color:var(--primary-light)!important}.cohort-csv-dragger .ant-upload-drag-container{display:flex!important;justify-content:center;flex-direction:column;align-items:center;height:100%;padding:0 1rem}.cohort-csv-dragger .ant-upload-drag-container .ant-upload-text{font-weight:600;font-size:1rem!important;margin:8px 0 0!important}",""]),module.exports=exports}}]);