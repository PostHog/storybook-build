var v=(j,O,e)=>new Promise((a,i)=>{var l=t=>{try{b(e.next(t))}catch(p){i(p)}},d=t=>{try{b(e.throw(t))}catch(p){i(p)}},b=t=>t.done?a(t.value):Promise.resolve(t.value).then(l,d);b((e=e.apply(j,O)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{"./frontend/src/scenes/groups/Groups.tsx":function(j,O,e){"use strict";e.r(O),e.d(O,"scene",function(){return x}),e.d(O,"Groups",function(){return P});var a=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/scenes/groups/groupsListLogic.ts"),l=e("./frontend/src/lib/components/PropertiesTable.tsx"),d=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),b=e("./frontend/src/lib/components/TZLabel/index.tsx"),t=e("./frontend/src/lib/components/LemonTable/index.ts"),p=e("./frontend/src/lib/components/Link.tsx"),c=e("./frontend/src/scenes/urls.ts"),s=e("./frontend/src/scenes/groups/GroupsIntroduction.tsx"),n=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),r=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),u=e("./frontend/src/lib/components/CodeSnippet/index.tsx"),g=e("./frontend/src/lib/components/AlertMessage/index.ts"),o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),L=e.n(o);const x={component:P,logic:i.a};function P(){const{currentTabName:M,groupName:{singular:A,plural:h},groups:_,groupsLoading:I}=Object(a.useValues)(i.a),{loadGroups:D}=Object(a.useActions)(i.a),{groupsAccessStatus:f}=Object(a.useValues)(n.b);if(f==n.a.HasAccess||f==n.a.HasGroupTypes||f==n.a.NoAccess)return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(d.a,{}),Object(o.jsx)(s.b,{access:f})]});const R=[{title:M,key:"group_key",render:function(E,m){return Object(o.jsx)(p.a,{to:c.a.group(m.group_type_index.toString(),m.group_key),children:Object(r.b)(m.group_key,m.group_properties)})}},{title:"First seen",key:"created_at",render:function(E,m){return Object(o.jsx)(b.a,{time:m.created_at})}}];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(d.a,{}),Object(o.jsx)(t.a,{columns:R,rowKey:"group_key",loading:I,dataSource:_.results,expandable:{expandedRowRender:function(E){let{group_properties:m}=E;return Object(o.jsx)(l.a,{properties:m})},rowExpandable:T=>{let{group_properties:E}=T;return!!E&&Object.keys(E).length>0}},pagination:{controlled:!0,onBackward:_.previous?()=>{D(_.previous),window.scrollTo(0,0)}:void 0,onForward:_.next?()=>{D(_.next),window.scrollTo(0,0)}:void 0},emptyState:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(g.a,{type:"info",children:["No ",h," found. Make sure to send properties with your ",A," for them to show up in the list."," ",Object(o.jsx)("a",{href:"https://posthog.com/docs/user-guides/group-analytics",rel:"noopener",target:"_blank",children:"Read more here."})]}),Object(o.jsx)(u.a,{language:u.b.JavaScript,wrap:!0,children:`posthog.group('${A}', 'id:5', {
    name: 'Awesome ${M}',
    value: 11
});`})]})})]})}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(j,O,e){"use strict";e.d(O,"a",function(){return c});var a=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/lib/api.ts"),l=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),d=e("./frontend/src/lib/utils.tsx"),b=e("./frontend/src/scenes/teamLogic.tsx"),t=e("./frontend/src/scenes/urls.ts"),p=e("./frontend/src/models/groupsModel.ts");const c=Object(a.kea)({path:["groups","groupsListLogic"],connect:{values:[b.a,["currentTeamId"],p.a,["groupTypes","aggregationLabel"],l.b,["groupsEnabled"]]},actions:()=>({loadGroups:s=>({url:s}),setTab:s=>({tab:s})}),loaders:s=>{let{values:n}=s;return{groups:[{next:null,previous:null,results:[]},{loadGroups:r=>v(this,null,function*(){let{url:u}=r;if(n.groupsEnabled)return u=u||`api/projects/${n.currentTeamId}/groups/?group_type_index=${n.currentTab}`,yield i.b.get(u)})}]}},reducers:{currentTab:["-1",{setTab:(s,n)=>{let{tab:r}=n;return r}}]},selectors:{currentTabName:[s=>[s.currentTab,s.groupTypes,s.aggregationLabel],(s,n,r)=>s==="-1"?"Persons":n!=null&&n.length?Object(d.i)(r(parseInt(s)).singular):""],groupName:[s=>[s.currentTab,s.aggregationLabel],(s,n)=>s==="-1"?{singular:"person",plural:"persons"}:n(parseInt(s))],breadcrumbs:[s=>[s.currentTabName,s.currentTab],(s,n)=>[{name:s,path:t.a.groups(n)}]]},actionToUrl:()=>({setTab:s=>{let{tab:n}=s;return n!=="-1"?t.a.groups(n):t.a.persons()}}),urlToAction:s=>{let{actions:n,values:r}=s;return{"/groups/:id":u=>{let{id:g}=u;g&&(n.setTab(g),n.loadGroups())},"/persons":()=>{r.currentTab!=="-1"&&n.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(j,O,e){"use strict";e.d(O,"a",function(){return n});var a=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/lib/components/PageHeader.tsx"),l=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),d=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),b=e("./frontend/src/lib/utils.tsx"),t=e("./frontend/src/models/groupsModel.ts"),p=e("./frontend/src/scenes/groups/groupsListLogic.ts"),c=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function s(){const{setTab:r}=Object(a.useActions)(p.a),{currentTab:u}=Object(a.useValues)(p.a),{groupTypes:g,aggregationLabel:o}=Object(a.useValues)(t.a),{groupsAccessStatus:L}=Object(a.useValues)(d.b),x=[d.a.HasAccess,d.a.HasGroupTypes,d.a.NoAccess].includes(L);return Object(c.jsxs)(l.a,{activeKey:u,onChange:P=>r(P),children:[Object(c.jsx)(l.a.TabPane,{tab:"Persons"},"-1"),x?Object(c.jsx)(l.a.TabPane,{tab:"Groups"},"0"):g.map(P=>Object(c.jsx)(l.a.TabPane,{tab:Object(b.i)(o(P.group_type_index).plural)},P.group_type_index))]})}function n(r){let{hideGroupTabs:u}=r;const{showGroupsOptions:g}=Object(a.useValues)(t.a);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(i.a,{title:`Persons${g?" & Groups":""}`,caption:`A catalog of your product's end users${g?" and groups":""}.`}),!u&&g&&Object(c.jsx)(s,{})]})}try{n.displayName="PersonPageHeader",n.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:n.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(r){}}}]);
