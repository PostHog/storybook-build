(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[77977],{"../../frontend/src/scenes/error-tracking/ErrorTrackingIssueScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingIssueScene:()=>ErrorTrackingIssueScene,STATUS_LABEL:()=>STATUS_LABEL,scene:()=>scene});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),ErrorTracking=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.3_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/error-tracking/ErrorTracking.scss"),ErrorTracking_default=__webpack_require__.n(ErrorTracking),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(ErrorTracking_default(),options),ErrorTracking_default().locals;var src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),AssigneeDisplay=__webpack_require__("../../frontend/src/scenes/error-tracking/components/Assignee/AssigneeDisplay.tsx"),AssigneeSelect=__webpack_require__("../../frontend/src/scenes/error-tracking/components/Assignee/AssigneeSelect.tsx"),ErrorFilters=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ErrorFilters/index.tsx"),ErrorTrackingSetupPrompt=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ErrorTrackingSetupPrompt/ErrorTrackingSetupPrompt.tsx"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.14.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),errorPropertiesLogic=__webpack_require__("../../frontend/src/lib/components/Errors/errorPropertiesLogic.ts"),TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),ViewRecordingButton=__webpack_require__("../../frontend/src/lib/components/ViewRecordingButton/ViewRecordingButton.tsx"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),ButtonPrimitives=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),dist=__webpack_require__("../../node_modules/.pnpm/ts-pattern@4.3.0/node_modules/ts-pattern/dist/index.js"),Transition=__webpack_require__("../../node_modules/.pnpm/react-transition-group@4.4.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/react-transition-group/esm/Transition.js"),bundle_esm=__webpack_require__("../../node_modules/.pnpm/use-resize-observer@8.0.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/use-resize-observer/dist/bundle.esm.js"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function Collapsible(_ref){let{children,isExpanded,className,minHeight=0,onClick}=_ref,{height:contentHeight,ref:contentRef}=(0,bundle_esm.Z)({box:"border-box"});return(0,jsx_runtime.jsx)("div",{"aria-expanded":isExpanded,onClick:onClick,children:(0,jsx_runtime.jsx)(Transition.ZP,{in:isExpanded,timeout:200,children:status=>(0,jsx_runtime.jsx)("div",{style:getStyle(status,contentHeight,minHeight),className:"overflow-hidden","aria-busy":status.endsWith("ing"),children:(0,jsx_runtime.jsx)("div",{className:className,ref:contentRef,children:children})})})})}function getStyle(state,contentHeight,minHeight){switch(state){case Transition.d0:return{height:contentHeight,minHeight,transition:"height 200ms ease-in-out"};case Transition.cn:return{height:contentHeight,minHeight};case Transition.Ix:return{height:minHeight,minHeight,transition:"height 200ms ease-in-out"};case Transition.Wj:default:return{height:minHeight,minHeight}}}var ContextDisplay=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ContextDisplay.tsx"),PropertyIcon=__webpack_require__("../../frontend/src/lib/components/PropertyIcon/PropertyIcon.tsx");function ExceptionAttributesPreview(_ref){let{attributes,loading=!1}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,dist.EQ)(loading).with(!0,()=>(0,jsx_runtime.jsxs)("span",{className:"text-muted space-x-2 text-xs",children:[(0,jsx_runtime.jsx)(src.$j,{}),(0,jsx_runtime.jsx)("span",{children:"Loading details..."})]})).with(!1,()=>attributes&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PropertyWrapper,{title:"Unhandled",visible:!attributes.handled,children:(0,jsx_runtime.jsx)(posthog_icons_es.IconBug,{className:"text-sm text-secondary"})}),(0,jsx_runtime.jsx)(PropertyWrapper,{title:attributes.browser,visible:!!attributes.browser,children:(0,jsx_runtime.jsx)(PropertyIcon.V,{property:"$browser",value:attributes.browser,className:"text-sm text-secondary"})}),(0,jsx_runtime.jsx)(PropertyWrapper,{title:attributes.os,visible:!!attributes.os,children:(0,jsx_runtime.jsx)(PropertyIcon.V,{property:"$os",value:attributes.os,className:"text-sm text-secondary"})})]})).exhaustive()})}function PropertyWrapper(_ref2){let{title,visible=!0,children}=_ref2;return 0!=react.Children.count(children)&&void 0!==title&&visible?(0,jsx_runtime.jsxs)(src.oe,{children:[children,(0,jsx_runtime.jsx)("span",{className:"capitalize",children:title})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}var cva_dist=__webpack_require__("../../node_modules/.pnpm/cva@1.0.0-beta.3_typescript@4.9.5/node_modules/cva/dist/index.mjs");let ToggleButton_button=(0,cva_dist.jS)({variants:{checked:{true:"not-disabled:bg-zinc-700 not-disabled:hover:bg-zinc-700 dark:not-disabled:bg-zinc-300 dark:not-disabled:hover:bg-zinc-300 text-primary-inverse"}}});function ToggleButtonPrimitive(_ref){let{className,checked,tooltip,children,iconOnly,onCheckedChange}=_ref;return(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{iconOnly:iconOnly,tooltip:tooltip,className:ToggleButton_button({checked,className}),onClick:()=>onCheckedChange(!checked),children:children})}var exceptionCardLogic=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/exceptionCardLogic.ts"),StacktraceBase=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceBase.tsx"),StacktraceGenericDisplay=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceGenericDisplay.tsx"),StacktraceJsonDisplay=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceJsonDisplay.tsx"),StacktraceTextDisplay=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceTextDisplay.tsx");function ExceptionCard(_ref){var _issue$id;let{issue,issueLoading,label,event,eventLoading}=_ref;return(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:exceptionCardLogic.S,props:{loading:eventLoading},children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:errorPropertiesLogic.J,props:{properties:event?.properties,timestamp:event?.timestamp,id:null!==(_issue$id=issue?.id)&&void 0!==_issue$id?_issue$id:"error"},children:(0,jsx_runtime.jsx)(ExceptionCardContent,{issue:issue,label:label,timestamp:event?.timestamp,issueLoading:issueLoading})})})}function ExceptionCardContent(_ref2){let{issue,issueLoading,timestamp,label}=_ref2,{loading,showContext,isExpanded}=(0,index_esm.useValues)(exceptionCardLogic.S),{properties,exceptionAttributes,additionalProperties,sessionId}=(0,index_esm.useValues)(errorPropertiesLogic.J);return(0,jsx_runtime.jsxs)(src.Mi,{hoverEffect:!1,className:"group py-2 px-3 relative overflow-hidden",children:[(0,jsx_runtime.jsxs)(Collapsible,{isExpanded:isExpanded,className:"pb-1 flex w-full",minHeight:"calc(var(--spacing) * 12)",children:[(0,jsx_runtime.jsx)(StacktraceIssueDisplay,{className:(0,css_classes.cn)("flex-grow",showContext&&isExpanded?"w-2/3":"w-full"),truncateMessage:!isExpanded,issue:null!=issue?issue:void 0,issueLoading:issueLoading}),(0,jsx_runtime.jsx)(ContextDisplay.B,{className:(0,css_classes.cn)(showContext&&isExpanded?"w-1/3 pl-2":"w-0"),attributes:null!=exceptionAttributes?exceptionAttributes:void 0,additionalProperties:additionalProperties,loading:loading})]}),(0,jsx_runtime.jsx)(ExceptionCardActions,{className:"absolute top-2 right-3 flex gap-2 items-center z-10",children:(0,jsx_runtime.jsx)(ExceptionCardToggles,{})}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center pt-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[label,(0,jsx_runtime.jsx)(ExceptionAttributesPreview,{attributes:exceptionAttributes,loading:loading})]}),(0,jsx_runtime.jsxs)(ExceptionCardActions,{children:[timestamp&&(0,jsx_runtime.jsx)(TZLabel.w,{className:"text-muted text-xs",time:timestamp}),(0,jsx_runtime.jsx)(ViewRecordingButton.Z,{sessionId:sessionId,timestamp:null!=timestamp?timestamp:void 0,loading:loading,inModal:!0,size:"xsmall",type:"secondary",disabledReason:(0,ViewRecordingButton.k)(properties||{})?void 0:"No recording available"})]})]})]})}function ExceptionCardToggles(){let{showDetails,showAllFrames,showContext,showAsText,showAsJson}=(0,index_esm.useValues)(exceptionCardLogic.S),{setShowDetails,setShowAllFrames,setShowContext,setShowAsText,setShowAsJson}=(0,index_esm.useActions)(exceptionCardLogic.S);return(0,jsx_runtime.jsxs)(ButtonPrimitives.HL,{size:"sm",children:[(0,jsx_runtime.jsx)(ToggleButtonPrimitive,{className:"px-2",checked:showDetails,onCheckedChange:setShowDetails,children:showDetails?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(icons.qw,{}),"Hide details"]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(icons.MN,{}),"Show details"]})}),(0,jsx_runtime.jsx)(ToggleButtonPrimitive,{iconOnly:!0,checked:showAsText,onCheckedChange:setShowAsText,tooltip:"Show as text",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconDocument,{})}),(0,jsx_runtime.jsx)(ToggleButtonPrimitive,{iconOnly:!0,checked:showAsJson,onCheckedChange:setShowAsJson,tooltip:"Show as json",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconBrackets,{})}),(0,jsx_runtime.jsx)(ToggleButtonPrimitive,{iconOnly:!0,checked:showAllFrames,onCheckedChange:setShowAllFrames,tooltip:"Show vendor frames",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconBox,{})}),(0,jsx_runtime.jsx)(ToggleButtonPrimitive,{iconOnly:!0,checked:showContext,onCheckedChange:setShowContext,tooltip:"Show context",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconList,{})})]})}function ExceptionCardActions(_ref3){let{children,className}=_ref3;return(0,jsx_runtime.jsx)("div",{className:(0,css_classes.cn)("flex justify-between items-center gap-1 bg-surface-primary",className),onClick:e=>e.stopPropagation(),children:children})}function StacktraceIssueDisplay(_ref4){let{issue,issueLoading,...stacktraceDisplayProps}=_ref4,{showAsText,showAsJson}=(0,index_esm.useValues)(exceptionCardLogic.S),componentProps={...stacktraceDisplayProps,renderLoading:renderHeader=>{var _issue$name,_issue$description;return renderHeader({type:null!==(_issue$name=issue?.name)&&void 0!==_issue$name?_issue$name:void 0,value:null!==(_issue$description=issue?.description)&&void 0!==_issue$description?_issue$description:void 0,loading:issueLoading})},renderEmpty:()=>(0,jsx_runtime.jsx)(StacktraceBase.G,{})};return(0,dist.EQ)([showAsText,showAsJson]).with([!1,!1],()=>(0,jsx_runtime.jsx)(StacktraceGenericDisplay.l,{...componentProps})).with([!0,!1],()=>(0,jsx_runtime.jsx)(StacktraceTextDisplay.L,{...componentProps})).with([!1,!0],()=>(0,jsx_runtime.jsx)(StacktraceJsonDisplay.n,{...componentProps})).otherwise(()=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}))}var GenericSelect=__webpack_require__("../../frontend/src/scenes/error-tracking/components/GenericSelect.tsx"),Indicator=__webpack_require__("../../frontend/src/scenes/error-tracking/components/Indicator.tsx"),issueActionsLogic=__webpack_require__("../../frontend/src/scenes/error-tracking/components/IssueActions/issueActionsLogic.tsx"),errorTrackingIssueSceneLogic=__webpack_require__("../../frontend/src/scenes/error-tracking/errorTrackingIssueSceneLogic.ts"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts");let errorTag=(0,cva_dist.jS)({base:"font-semibold text-white border-gray-100/20 px-1 py-[0.1rem] text-[11px] rounded-sm inline",variants:{color:{yellow:"bg-brand-yellow",red:"bg-brand-red",blue:"bg-brand-blue"}}});function ErrorTag(_ref){let{color,label}=_ref;return(0,jsx_runtime.jsx)(src.oe,{size:"small",className:errorTag({color}),children:label})}function useErrorTagRenderer(){let{lastSeen,firstSeenEvent,selectedEvent}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);return(0,react.useCallback)(evt=>evt?lastSeen&&evt.timestamp&&(0,dayjs.Bv)(evt.timestamp).isSame(lastSeen)?(0,jsx_runtime.jsx)(ErrorTag,{color:"red",label:"Last Seen"}):firstSeenEvent&&firstSeenEvent.uuid==evt.uuid?(0,jsx_runtime.jsx)(ErrorTag,{color:"blue",label:"First Seen"}):selectedEvent&&selectedEvent.uuid==evt.uuid?(0,jsx_runtime.jsx)(ErrorTag,{color:"yellow",label:"Current"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),[lastSeen,firstSeenEvent,selectedEvent])}var utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),Errors_utils=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),error_tracking_utils=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts"),person_utils=__webpack_require__("../../frontend/src/scenes/persons/person-utils.ts"),PersonDisplay=__webpack_require__("../../frontend/src/scenes/persons/PersonDisplay.tsx"),dataNodeLogic=__webpack_require__("../../frontend/src/queries/nodes/DataNode/dataNodeLogic.ts"),InsightViz=__webpack_require__("../../frontend/src/queries/nodes/InsightViz/InsightViz.tsx");let buildKea=index_esm.kea;function defaultCreateKey(_ref){let{queryKey}=_ref;return queryKey}function createDataSourceLogic(createPath,createRecord){let createKey=arguments.length>2&&void 0!==arguments[2]?arguments[2]:defaultCreateKey;return buildKea([(0,index_esm.path)(createPath),(0,index_esm.props)({}),(0,index_esm.key)(createKey),(0,index_esm.connect)(props=>{let sourceKey=createKey(props),dataKey=`DataNode.${sourceKey}`,insightProps={dashboardItemId:`new-AdHoc.${dataKey}`,dataNodeCollectionId:dataKey},vizKey=(0,InsightViz.gG)(insightProps),dataLogic=(0,dataNodeLogic.M)({key:vizKey,query:props.query,autoLoad:!0});return{values:[dataLogic,["response","responseLoading","canLoadNextData"]],actions:[dataLogic,["loadData","loadNextData"]]}}),(0,index_esm.selectors)({items:[s=>[s.response],response=>response&&response.results?response.results.map(createRecord):[]],itemsLoading:[s=>[s.responseLoading],loading=>loading]})])}function DataSourceTable(_ref){let{dataSource,className,embedded=!1,onRowClick,children}=_ref,{items,itemsLoading}=(0,index_esm.useValues)(dataSource),columns=react.Children.toArray(children).filter(child=>(0,react.isValidElement)(child)).map(child=>{let props=child.props;return{title:props.title,align:props.align,width:props.width,render:(_,record,recordIndex,rowCount)=>props.cellRenderer(record,recordIndex,rowCount)}}),onRow=(0,react.useCallback)(record=>onRowClick?{onClick:event=>{onRowClick(record,event)},className:"hover:bg-fill-highlight-50"}:{},[onRowClick]);return(0,jsx_runtime.jsx)(src.g3,{dataSource:items,columns:columns,loading:itemsLoading,embedded:embedded,onRow:onRow,className:className,footer:(0,jsx_runtime.jsx)(DataSourceTableFooter,{dataSource:dataSource})})}function DataSourceTableFooter(_ref2){let{dataSource}=_ref2,{items,itemsLoading,canLoadNextData}=(0,index_esm.useValues)(dataSource),{loadNextData}=(0,index_esm.useActions)(dataSource);return(0,jsx_runtime.jsx)("div",{className:"p-1",children:(0,jsx_runtime.jsxs)(src.Jp,{className:"rounded-tl-none rounded-tr-none",loading:itemsLoading,center:!0,fullWidth:!0,disabledReason:itemsLoading||!canLoadNextData?"Disabled":"",onClick:()=>loadNextData(),children:[itemsLoading&&(0,jsx_runtime.jsx)("span",{children:"Loading..."}),!itemsLoading&&0===items.length&&(0,jsx_runtime.jsx)("span",{children:"No items found"}),!itemsLoading&&!canLoadNextData&&(0,jsx_runtime.jsx)("span",{children:"No more entries"}),!itemsLoading&&canLoadNextData&&(0,jsx_runtime.jsx)("span",{children:"Load More"})]})})}function DataSourceTableColumn(_){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}var queries=__webpack_require__("../../frontend/src/scenes/error-tracking/queries.ts"),errorFiltersLogic=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ErrorFilters/errorFiltersLogic.ts");let eventsQueryLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","error-tracking","eventsQueryLogic",key]),(0,index_esm.props)({}),(0,index_esm.key)(props=>props.issueId),(0,index_esm.connect)(()=>({values:[errorFiltersLogic.U,["filterTestAccounts","searchQuery","filterGroup","dateRange"]]})),(0,index_esm.selectors)({query:[s=>[(_,props)=>props.issueId,s.filterTestAccounts,s.searchQuery,s.filterGroup,s.dateRange],(issueId,filterTestAccounts,searchQuery,filterGroup,dateRange)=>(0,queries.QT)({issueId,filterTestAccounts,filterGroup,searchQuery,dateRange,columns:["*","timestamp","person"]})],queryKey:[s=>[s.query],()=>(0,utils.Vj)()]})]),eventsSourceLogic=createDataSourceLogic(()=>["scene","error-tracking","events-source"],function rowToRecord(row){return{uuid:row[0].uuid,timestamp:row[1],person:row[2],properties:row[0].properties}});function renderViewRecordingButton(event){var _event$timestamp;let sessionId=(0,Errors_utils.MQ)(event.properties),hasRecording=(0,ViewRecordingButton.k)(event.properties||{});return(0,jsx_runtime.jsx)("span",{onClick:error_tracking_utils.de,children:(0,jsx_runtime.jsx)(ViewRecordingButton.Z,{sessionId:sessionId,timestamp:null!==(_event$timestamp=event.timestamp)&&void 0!==_event$timestamp?_event$timestamp:void 0,inModal:!0,size:"xsmall",type:"secondary",disabledReason:hasRecording?void 0:"No recording available"})})}function EventsTable(_ref){let{issueId,selectedEvent,onEventSelect}=_ref,{query,queryKey}=(0,index_esm.useValues)(eventsQueryLogic({issueId})),tagRenderer=useErrorTagRenderer(),dataSource=eventsSourceLogic({queryKey,query});function isEventSelected(record){return!!selectedEvent&&selectedEvent.uuid===record.uuid}function toggleSelectedEvent(record){return isEventSelected(record)?onEventSelect(null):onEventSelect(record)}function renderUUID(record){return(0,jsx_runtime.jsx)("div",{className:"flex items-center",children:(0,jsx_runtime.jsx)("input",{type:"radio",className:"cursor-pointer",checked:isEventSelected(record)})})}function renderPerson(record){let display=(0,person_utils.y)(record.person);return(0,jsx_runtime.jsx)("div",{className:"flex items-center",children:(0,jsx_runtime.jsx)("span",{onClick:error_tracking_utils.de,children:(0,jsx_runtime.jsx)(PersonDisplay.I,{person:record.person,noLink:!0,children:(0,jsx_runtime.jsxs)(src.rU,{subtle:!0,className:(0,clsx_m.default)("flex items-center"),children:[(0,jsx_runtime.jsx)(PersonDisplay.T,{displayName:display,person:record.person,size:"md"}),(0,jsx_runtime.jsx)("span",{className:(0,clsx_m.default)("ph-no-capture","truncate"),children:display})]})})})})}function renderAttributes(record){return(0,jsx_runtime.jsxs)("div",{className:"flex justify-end gap-1",children:[tagRenderer(record),(0,jsx_runtime.jsx)(ExceptionAttributesPreview,{attributes:(0,Errors_utils.OZ)(record.properties)})]})}function renderRecording(record){return(0,jsx_runtime.jsx)("div",{className:"flex justify-end",children:renderViewRecordingButton(record)})}function renderTime(record){return(0,jsx_runtime.jsx)(TZLabel.w,{time:record.timestamp})}return(0,jsx_runtime.jsxs)(DataSourceTable,{dataSource:dataSource,embedded:!0,onRowClick:toggleSelectedEvent,children:[(0,jsx_runtime.jsx)(DataSourceTableColumn,{width:"40px",cellRenderer:renderUUID}),(0,jsx_runtime.jsx)(DataSourceTableColumn,{title:"Person",cellRenderer:renderPerson}),(0,jsx_runtime.jsx)(DataSourceTableColumn,{title:"Time",cellRenderer:renderTime}),(0,jsx_runtime.jsx)(DataSourceTableColumn,{title:"Labels",align:"right",cellRenderer:renderAttributes}),(0,jsx_runtime.jsx)(DataSourceTableColumn,{title:"Recording",align:"right",cellRenderer:renderRecording})]})}var SparklineChart=__webpack_require__("../../frontend/src/scenes/error-tracking/components/SparklineChart/SparklineChart.tsx");function TimeBoundary(_ref){let{time,loading,label,updateDateRange}=_ref,{dateRange}=(0,index_esm.useValues)(errorFiltersLogic.U),{setDateRange}=(0,index_esm.useActions)(errorFiltersLogic.U),onClick=(0,react.useCallback)(e=>{setDateRange(updateDateRange(dateRange)),e.preventDefault(),e.stopPropagation()},[dateRange,updateDateRange,setDateRange]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,dist.EQ)([loading,time]).with([!0,dist.P.any],()=>(0,jsx_runtime.jsx)(src.yW,{className:"w-[50px] h-2"})).with([!1,dist.P.nullish],()=>(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted",children:"-"})).with([!1,dist.P.any],()=>(0,jsx_runtime.jsx)("span",{onClick:onClick,className:"hover:bg-fill-button-tertiary-hover px-1 rounded flex items-center cursor-pointer",children:(0,jsx_runtime.jsx)(TZLabel.w,{time:time,className:"border-dotted border-b text-xs text-muted",title:label})})).exhaustive()})}var use_sparkline_data=__webpack_require__("../../frontend/src/scenes/error-tracking/hooks/use-sparkline-data.tsx");function useSparklineEvents(){let{firstSeen,firstSeenEvent,lastSeen,selectedEvent}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);return(0,react.useMemo)(()=>{let events=[];return firstSeen&&events.push({id:"first_seen",date:firstSeen.toDate(),color:"var(--brand-blue)",payload:"First Seen",radius:6}),selectedEvent&&!isFirstOrLastEvent(firstSeenEvent,lastSeen,selectedEvent)&&events.push({id:"current",date:new Date(selectedEvent.timestamp),color:"var(--brand-yellow)",payload:"Current",radius:6}),lastSeen&&events.push({id:"last_seen",date:lastSeen.toDate(),color:"var(--brand-red)",payload:"Last Seen",radius:6}),events},[firstSeen,firstSeenEvent,lastSeen,selectedEvent])}function isFirstOrLastEvent(firstSeenEvent,lastSeen,selectedEvent){return!!(selectedEvent&&firstSeenEvent&&firstSeenEvent.uuid==selectedEvent.uuid||selectedEvent&&lastSeen?.isSame(selectedEvent.timestamp))}var use_sparkline_options=__webpack_require__("../../frontend/src/scenes/error-tracking/hooks/use-sparkline-options.tsx");let Metadata=()=>{let{aggregations,issueId,selectedEvent,firstSeenEvent,summaryLoading,issueLoading,firstSeen,lastSeen}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{selectEvent}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),[hoveredDatum,setHoveredDatum]=(0,react.useState)(null),sparklineData=(0,use_sparkline_data.U)(),sparklineEvents=useSparklineEvents(),sparklineOptions=(0,use_sparkline_options.Q)({onDatumMouseEnter:d=>{setHoveredDatum({type:"datum",data:d})},onDatumMouseLeave:()=>{setHoveredDatum(null)},onEventMouseEnter:d=>{setHoveredDatum({type:"event",data:d})},onEventMouseLeave:()=>{setHoveredDatum(null)}},[setHoveredDatum]);return(0,jsx_runtime.jsxs)(src.Mi,{className:"p-0",hoverEffect:!1,children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center h-[40px] px-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-end items-center h-full",children:(0,dist.EQ)(hoveredDatum).when(data=>shouldRenderIssueMetrics(data),()=>(0,jsx_runtime.jsx)(IssueMetrics,{aggregations:aggregations,summaryLoading:summaryLoading})).with({type:"datum"},data=>renderDataPoint(data.data)).with({type:"event"},data=>renderEventPoint(data.data)).otherwise(()=>null)}),(0,jsx_runtime.jsx)("div",{className:"flex justify-end items-center h-full",children:(0,dist.EQ)(hoveredDatum).when(data=>shouldRenderIssueMetrics(data),()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(TimeBoundary,{time:firstSeen,loading:issueLoading,label:"First Seen",updateDateRange:dateRange=>(dateRange.date_from=firstSeen?.toISOString(),dateRange)}),(0,jsx_runtime.jsx)(icons.VG,{}),(0,jsx_runtime.jsx)(TimeBoundary,{time:lastSeen,loading:summaryLoading,label:"Last Seen",updateDateRange:dateRange=>(dateRange.date_to=lastSeen?.endOf("minute").toISOString(),dateRange)})]})).with({type:"datum"},data=>renderDate(data.data.date)).with({type:"event"},data=>renderDate(data.data.date)).otherwise(()=>null)})]}),(0,jsx_runtime.jsx)("div",{onClick:error_tracking_utils.de,children:(0,jsx_runtime.jsx)(SparklineChart.P,{data:sparklineData,events:sparklineEvents,options:sparklineOptions,className:"h-full pt-0"})}),(0,jsx_runtime.jsx)(EventsTable,{issueId:issueId,selectedEvent:selectedEvent,onEventSelect:selectedEvent=>selectedEvent?selectEvent(selectedEvent):selectEvent(firstSeenEvent)})]})};function shouldRenderIssueMetrics(data){return null==data||"datum"==data.type&&0==data.data.value}function IssueMetrics(_ref){let{aggregations,summaryLoading}=_ref,hasSessionCount=aggregations&&0!==aggregations.sessions;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center h-full gap-3",children:[renderMetric("Occurrences",aggregations?.occurrences,summaryLoading),renderMetric("Sessions",aggregations?.sessions,summaryLoading,hasSessionCount?void 0:"No $session_id was set for any event in this issue"),renderMetric("Users",aggregations?.users,summaryLoading)]})}function renderMetric(name,value,loading,tooltip){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,dist.EQ)([loading]).with([!0],()=>(0,jsx_runtime.jsx)(src.yW,{className:"w-[80px] h-2"})).with([!1],()=>(0,jsx_runtime.jsx)(src.u,{title:tooltip,delayMs:0,placement:"right",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-lg font-bold inline-block",children:null==value?"0":(0,utils.d$)(value)}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted inline-block",children:name})]})})).exhaustive()})}function renderDate(date){return(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted whitespace-nowrap",children:(0,dayjs.Bv)(date).format("D MMM YYYY HH:mm (UTC)")})}function renderDataPoint(d){return renderMetric("Occurrences",d.value,!1)}function renderEventPoint(d){return(0,jsx_runtime.jsx)("div",{className:"flex justify-start items-center h-full gap-1",children:(0,jsx_runtime.jsx)("div",{className:"text-lg font-bold",children:d.payload})})}let scene={component:ErrorTrackingIssueScene,logic:errorTrackingIssueSceneLogic.r,paramsToProps:_ref=>{let{params:{id},searchParams:{fingerprint}}=_ref;return{id,fingerprint}}},STATUS_LABEL={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release",suppressed:"Suppressed"};function ErrorTrackingIssueScene(){let{issue,issueId,issueLoading,selectedEvent,firstSeenEventLoading}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{loadIssue}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),{updateIssueAssignee,updateIssueStatus}=(0,index_esm.useActions)(issueActionsLogic.x),tagRenderer=useErrorTagRenderer();return(0,react.useEffect)(()=>{loadIssue()},[loadIssue]),(0,jsx_runtime.jsxs)(ErrorTrackingSetupPrompt.n,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsxs)("div",{className:"flex gap-x-2",children:[!issueLoading&&issue?.status==="active"&&(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:issue?.assignee,onChange:assignee=>updateIssueAssignee(issueId,assignee),children:displayAssignee=>(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",icon:(0,jsx_runtime.jsx)(AssigneeDisplay._x,{assignee:displayAssignee}),children:(0,jsx_runtime.jsx)(AssigneeDisplay.VQ,{assignee:displayAssignee,placeholder:"Unassigned"})})}),!issueLoading&&(0,jsx_runtime.jsx)(GenericSelect.e,{size:"small",current:issue?.status,values:["active","resolved","suppressed"],placeholder:"Mark as",renderValue:value=>(0,jsx_runtime.jsx)(Indicator.Eg,{status:value,size:"small",withTooltip:!0}),onChange:status=>updateIssueStatus(issueId,status)})]})}),(0,jsx_runtime.jsxs)("div",{className:"ErrorTrackingIssue space-y-2",children:[(0,jsx_runtime.jsx)(ExceptionCard,{issue:null!=issue?issue:void 0,issueLoading:issueLoading,event:null!=selectedEvent?selectedEvent:void 0,eventLoading:firstSeenEventLoading,label:tagRenderer(selectedEvent)}),(0,jsx_runtime.jsxs)(ErrorFilters.h.Root,{children:[(0,jsx_runtime.jsx)(ErrorFilters.h.DateRange,{}),(0,jsx_runtime.jsx)(ErrorFilters.h.FilterGroup,{}),(0,jsx_runtime.jsx)(ErrorFilters.h.InternalAccounts,{})]}),(0,jsx_runtime.jsx)(Metadata,{})]})]})}},"../../frontend/src/scenes/error-tracking/components/ContextDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>ContextDisplay});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.14.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),lib_hooks_useIsHovering__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/hooks/useIsHovering.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils.tsx"),lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/utils/copyToClipboard.tsx"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),ts_pattern__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/ts-pattern@4.3.0/node_modules/ts-pattern/dist/index.js"),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ContextDisplay(_ref){let{className,attributes,additionalProperties={},loading}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__.cn)("pt-8 transition-[width] duration-200",className),children:(0,ts_pattern__WEBPACK_IMPORTED_MODULE_7__.EQ)(loading).with(!0,()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"flex justify-center w-full h-32 items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.$j,{})})).with(!1,()=>{let additionalEntries=Object.entries(additionalProperties).map(_ref2=>{let[key,value]=_ref2;return[(0,lib_utils__WEBPACK_IMPORTED_MODULE_4__.UV)(key,"title"),value]}),exceptionEntries=attributes&&[["Level",attributes.level],["Synthetic",attributes.synthetic],["Library",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__.KT)(attributes,"lib","libVersion")],["Handled",attributes.handled],["Browser",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__.KT)(attributes,"browser","browserVersion")],["OS",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__.KT)(attributes,"os","osVersion")],["URL",attributes.url]];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ContextTable,{entries:exceptionEntries||[]}),additionalEntries.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ContextTable,{entries:additionalEntries})]})}).exhaustive()})}function ContextTable(_ref3){let{entries}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("table",{className:"border-spacing-0 border-separate rounded w-full border overflow-hidden cursor-default",onClick:_utils__WEBPACK_IMPORTED_MODULE_8__.de,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("tbody",{className:"w-full",children:[entries.filter(_ref4=>{let[,value]=_ref4;return void 0!==value}).map(_ref5=>{let[key,value]=_ref5;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ContextRow,{label:key,value:(0,lib_utils__WEBPACK_IMPORTED_MODULE_4__.Kn)(value)?JSON.stringify(value):String(value)},key)}),0==entries.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("tr",{className:"w-full text-center",children:"No data available"})]})})}function ContextRow(_ref6){let{label,value}=_ref6,valueRef=(0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),isHovering=(0,lib_hooks_useIsHovering__WEBPACK_IMPORTED_MODULE_3__.Z)(valueRef);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("tr",{className:"even:bg-fill-tertiary w-full group",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("th",{className:"border-r-1 font-semibold text-xs p-1 w-1/3 text-left",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("td",{ref:valueRef,className:"w-full truncate p-1 text-xs max-w-0 relative",title:value,children:[value,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__.cn)("absolute right-0 top-[50%] translate-y-[-50%] group-even:bg-fill-tertiary group-odd:bg-fill-primary drop-shadow-sm",isHovering?"opacity-100":"opacity-0"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{size:"xsmall",className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__.cn)("p-0 rounded-none"),tooltip:"Copy",onClick:()=>{(0,lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_5__.v)(value).catch(error=>{console.error("Failed to copy to clipboard:",error)})},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconCopy,{})})})]})]})}},"../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceBase.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>StacktraceEmptyDisplay});var lib_components_EmptyMessage_EmptyMessage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function StacktraceEmptyDisplay(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(lib_components_EmptyMessage_EmptyMessage__WEBPACK_IMPORTED_MODULE_0__.M,{title:"No stacktrace available",description:"Make sure the SDK is set up correctly or contact support if problem persists",buttonText:"Check documentation",buttonTo:"https://posthog.com/docs/error-tracking/installation",size:"small"})}},"../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceGenericDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>StacktraceGenericDisplay});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/Errors/errorPropertiesLogic.ts"),lib_components_Errors_FingerprintRecordPartDisplay__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/Errors/FingerprintRecordPartDisplay.tsx"),lib_components_Errors_StackTraces__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/Errors/StackTraces.tsx"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts"),_RuntimeIcon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/error-tracking/components/RuntimeIcon.tsx"),_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/exceptionCardLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function StacktraceGenericDisplay(_ref){let{className,truncateMessage,renderLoading,renderEmpty}=_ref,{exceptionAttributes,hasStacktrace}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_2__.J),{loading,showAllFrames}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_8__.S),{runtime}=exceptionAttributes||{},renderExceptionHeader=(0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(_ref2=>{let{type,value,loading,part}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(StacktraceGenericExceptionHeader,{type:type,value:value,part:part,runtime:runtime,loading:loading,truncate:truncateMessage})},[runtime,truncateMessage]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:className,children:[loading?renderLoading(renderExceptionHeader):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_Errors_StackTraces__WEBPACK_IMPORTED_MODULE_4__.v,{showAllFrames:showAllFrames,renderExceptionHeader:renderExceptionHeader,onFrameContextClick:(_,e)=>(0,_utils__WEBPACK_IMPORTED_MODULE_6__.de)(e)}),!loading&&!hasStacktrace&&renderEmpty()]})}function StacktraceGenericExceptionHeader(_ref3){let{type,value,runtime,part,loading,truncate}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"pb-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"flex gap-2 items-center h-6",children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.yW,{className:"w-[25%] h-2"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:[runtime&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_RuntimeIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{runtime:runtime}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"font-bold text-lg",children:type||"Unknown type"}),part&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_Errors_FingerprintRecordPartDisplay__WEBPACK_IMPORTED_MODULE_3__.t,{part:part})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__.cn)("text-tertiary leading-6",{"line-clamp-1":truncate}),children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.yW,{className:"w-[50%] h-2"}):value||"Unknown message"})]})}},"../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceJsonDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>StacktraceJsonDisplay});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/Errors/errorPropertiesLogic.ts"),lib_components_JSONViewer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/JSONViewer.tsx"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/exceptionCardLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function StacktraceJsonDisplay(_ref){let{className,renderLoading,renderEmpty}=_ref,{properties,hasStacktrace}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_2__.J),{loading}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__.S),renderExceptionHeader=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.$j,{}),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:className,children:[loading?renderLoading(renderExceptionHeader):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(lib_components_JSONViewer__WEBPACK_IMPORTED_MODULE_3__.C,{src:properties,name:"event",collapsed:1,collapseStringsAfterLength:80,sortKeys:!0}),!loading&&!hasStacktrace&&renderEmpty()]})}},"../../frontend/src/scenes/error-tracking/components/ExceptionCard/Stacktrace/StacktraceTextDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>StacktraceTextDisplay});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/Errors/errorPropertiesLogic.ts"),lib_components_Errors_stackFrameLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/Errors/stackFrameLogic.ts"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ExceptionCard/exceptionCardLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function StacktraceTextDisplay(_ref){let{className,renderLoading,renderEmpty,truncateMessage}=_ref,{exceptionList,hasStacktrace}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_2__.J),{loading}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__.S),renderExceptionHeader=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(_ref2=>{let{type,value,loading,part}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(StacktraceTextExceptionHeader,{type:type,value:value,part:part,loading:loading,truncate:truncateMessage})},[truncateMessage]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:className,children:[loading?renderLoading(renderExceptionHeader):exceptionList.map(exception=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(ExceptionTextDisplay,{exception:exception},exception.id)),!loading&&!hasStacktrace&&renderEmpty()]})}function StacktraceTextExceptionHeader(_ref3){let{type,value,loading}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_7__.cn)("font-mono"),children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.yW,{className:"h-2 w-1/2"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[type,": ",value]})})}function ExceptionTextDisplay(_ref4){let{exception}=_ref4,{showAllFrames}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__.S);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("p",{className:"font-mono mb-0 font-bold line-clamp-1",children:[exception.type,": ",exception.value]}),(exception.stacktrace?.frames||[]).filter(frame=>!!showAllFrames||frame.in_app).map((frame,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(StackframeTextDisplay,{frame:frame},idx))]})}function StackframeTextDisplay(_ref5){let{frame}=_ref5,{stackFrameRecords}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_Errors_stackFrameLogic__WEBPACK_IMPORTED_MODULE_3__.e),{loadFromRawIds}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_components_Errors_stackFrameLogic__WEBPACK_IMPORTED_MODULE_3__.e);return(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{loadFromRawIds([frame.raw_id])},[loadFromRawIds,frame.raw_id]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("p",{className:"font-mono indent-[1rem] whitespace-no-wrap mb-0 line-clamp-1",children:['File "',frame.source,'", line: ',frame.line,", in: ",frame.resolved_name]}),stackFrameRecords[frame.raw_id]&&stackFrameRecords[frame.raw_id].context?.line.line&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{className:"font-mono indent-[2rem] whitespace-no-wrap mb-0 text-tertiary line-clamp-1",children:stackFrameRecords[frame.raw_id].context?.line.line})]})}},"../../frontend/src/scenes/error-tracking/components/ExceptionCard/exceptionCardLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>exceptionCardLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js");let exceptionCardLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(()=>["scenes","error-tracking","exceptionCardLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setShowDetails:showDetails=>({showDetails}),setShowAsText:showAsText=>({showAsText}),setShowAsJson:showAsJson=>({showAsJson}),setShowContext:showContext=>({showContext}),setShowAllFrames:showAllFrames=>({showAllFrames})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({showDetails:[!0,{setShowDetails:(_,_ref)=>{let{showDetails}=_ref;return showDetails}}],showAsText:[!1,{setShowAsJson:(prevState,_ref2)=>{let{showAsJson}=_ref2;return!showAsJson&&prevState},setShowAsText:(_,_ref3)=>{let{showAsText}=_ref3;return showAsText}}],showAsJson:[!1,{setShowAsText:(prevState,_ref4)=>{let{showAsText}=_ref4;return!showAsText&&prevState},setShowAsJson:(_,_ref5)=>{let{showAsJson}=_ref5;return showAsJson}}],showAllFrames:[!1,{setShowAllFrames:(_,_ref6)=>{let{showAllFrames}=_ref6;return showAllFrames}}],showContext:[!0,{persist:!0},{setShowContext:(_,_ref7)=>{let{showContext}=_ref7;return showContext}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({loading:[()=>[(_,props)=>props.loading],loading=>loading],isExpanded:[s=>[s.showDetails,s.loading],(showDetails,loading)=>showDetails&&!loading]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref8=>{let{actions}=_ref8;return{setShowContext:()=>actions.setShowDetails(!0),setShowAllFrames:()=>actions.setShowDetails(!0)}})])},"../../frontend/src/scenes/error-tracking/components/SparklineChart/SparklineChart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>SparklineChart});var d3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/d3@7.9.0/node_modules/d3/src/index.js"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),use_resize_observer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/use-resize-observer@8.0.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/use-resize-observer/dist/bundle.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SparklineChart(_ref){let{data,events=[],options,className}=_ref,svgRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),{height:contentHeight,width:contentWidth,ref:contentRef}=(0,use_resize_observer__WEBPACK_IMPORTED_MODULE_3__.Z)({box:"content-box"});return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let svgEl=svgRef.current;if(svgEl&&contentHeight&&contentWidth){let svg=d3__WEBPACK_IMPORTED_MODULE_0__.Ys(svgEl);if(data.length<2)throw Error("Not enough data to render chart");let timeDiff=Math.abs(data[1].date.getTime()-data[0].date.getTime()),extent=d3__WEBPACK_IMPORTED_MODULE_0__.Wem(data.map(d=>d.date)),maxDate=new Date(extent[1]);maxDate.setTime(extent[1].getTime()+timeDiff);let xTicks=d3__WEBPACK_IMPORTED_MODULE_0__.jKP(extent[0],maxDate,8),xScale=d3__WEBPACK_IMPORTED_MODULE_0__.Xf().domain([extent[0],maxDate]).range([0,contentWidth]),maxValue=d3__WEBPACK_IMPORTED_MODULE_0__.Fp7(data.map(d=>d.value))||0,yScale=d3__WEBPACK_IMPORTED_MODULE_0__.BYU().domain([0,maxValue||1]).range([contentHeight,options.eventLabelHeight]),xAxis=d3__WEBPACK_IMPORTED_MODULE_0__.LLu(xScale).tickValues(xTicks).tickSize(0).tickPadding(5);return svg.selectAll("g.datum").data(data).enter().append("g").attr("class","datum").call(buildBarGroup,xScale,yScale,contentHeight,data,options),svg.append("g").attr("transform",`translate(0,${contentHeight})`).style("color",options.axisColor).call(xAxis),svg.selectAll("g.event").data(events||[]).enter().append("g").attr("class","event").call(buildEvent,xScale,options,contentHeight,contentWidth),()=>{svg.selectAll("*").remove()}}},[data,events,options,contentHeight,contentWidth]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{ref:contentRef,className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_4__.cn)("h-full w-full p-4 overflow-hidden",className),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{ref:svgRef,className:"overflow-visible",height:"100%",width:"100%"})})}function buildBarGroup(group,xScale,yScale,contentHeight,data,options){let bandwidth=xScale(data[1].date)-xScale(data[0].date);group.attr("x",d=>xScale(d.date)).on("mouseover",function(_,d){let current=d3__WEBPACK_IMPORTED_MODULE_0__.Ys(this);options.onDatumMouseEnter?.(d),options.hoverBackgroundColor&&current.select(".bar").style("fill",options.hoverBackgroundColor)}).on("mouseout",function(_,d){let current=d3__WEBPACK_IMPORTED_MODULE_0__.Ys(this);options.onDatumMouseLeave?.(d),current.select(".bar").style("fill",options.backgroundColor)}),group.append("rect").attr("class","bar").attr("x",(_,i)=>xScale(data[i].date)).attr("y",d=>yScale(d.value)+options.borderRadius).attr("width",.9*bandwidth).attr("height",d=>d?contentHeight-yScale(d.value):0).style("fill",options.backgroundColor).style("clip-path",`inset(0 0 ${options.borderRadius+1}px 0)`).attr("rx",options.borderRadius).attr("ry",options.borderRadius);let maxValue=Math.max(...yScale.domain());group.append("rect").attr("class","overlay").attr("x",(_,i)=>xScale(data[i].date)).attr("y",yScale(maxValue)).attr("width",bandwidth).attr("height",d=>d?contentHeight-yScale(maxValue)+options.borderRadius:0).style("fill","transparent")}function buildEventLabel(selection,xScale,options,contentWidth){let paddingX=options.eventLabelPaddingX,paddingY=options.eventLabelPaddingY,baseLine=options.eventLabelHeight/2,textNodes=selection.append("text").attr("class","font-semibold").attr("x",d=>xScale(d.date)).attr("y",baseLine).attr("fill","white").attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","10px").text(d=>d.payload).nodes();selection.insert("rect","text").attr("x",(_,i)=>textNodes[i].getBBox().x-paddingX).attr("y",(_,i)=>textNodes[i].getBBox().y-paddingY).attr("width",(_,i)=>textNodes[i].getBBox().width+2*paddingX).attr("height",(_,i)=>textNodes[i].getBBox().height+2*paddingY).attr("rx",options.borderRadius).attr("ry",options.borderRadius).attr("fill",d=>d.color||"black");let movingNodes=selection.nodes().map((node,index)=>{let bbox=node.getBBox();return{x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2,radius:bbox.width/2+options.eventMinSpace,id:`moving-${index}`}}),clonedNodes=[...movingNodes.map(node=>({...node}))],simulation=d3__WEBPACK_IMPORTED_MODULE_0__.A4v(movingNodes).velocityDecay(.9).force("collision",d3__WEBPACK_IMPORTED_MODULE_0__.Hh().radius((_,i)=>movingNodes[i].radius)).force("boundaries",forceBoundaries(movingNodes,-10,contentWidth+10));simulation.stop(),simulation.tick(500),movingNodes.forEach((_,index)=>{let newX=movingNodes[index].x,initialX=clonedNodes[index].x,newY=movingNodes[index].y,initialY=clonedNodes[index].y,deltaX=newX-initialX,deltaY=newY-initialY;selection.filter((_,i)=>i===index).attr("transform",`translate(${deltaX}, ${deltaY})`).attr("dx",deltaX).attr("dy",deltaY)})}function buildEventAnchor(selection,xScale,contentHeight){selection.append("circle").attr("cx",d=>xScale(d.date)).attr("cy",contentHeight).attr("r",6).attr("fill","white").attr("stroke",d=>d.color||"black").attr("stroke-width",2)}function buildEvent(selection,xScale,options,contentHeight,contentWidth){selection.append("g").attr("class","label").call(buildEventLabel,xScale,options,contentWidth),selection.call(buildEventLine,xScale,contentHeight,contentWidth),selection.call(buildEventAnchor,xScale,contentHeight),selection.style("cursor",options.onEventClick?"pointer":"default").on("mouseover",function(_,d){options.onEventMouseEnter?.(d)}).on("mouseout",function(_,d){options.onEventMouseLeave?.(d)})}function buildEventLine(selection,xScale,contentHeight,contentWidth){selection.insert("line","g.label").attr("x1",d=>xScale(d.date)).attr("y1",contentHeight).attr("x2",(_,index)=>{let labelNode=selection.selectAll(".label").nodes().find((_,i)=>i===index),dx=parseFloat(labelNode.getAttribute("dx")||"0"),labelBbox=labelNode.getBBox();return labelBbox?.x+dx+labelBbox?.width/2||0}).attr("y2",5).attr("stroke-width",2).attr("stroke",d=>{let xPos=xScale(d.date);return xPos<0||xPos>contentWidth?"transparent":d.color||"black"})}function forceBoundaries(nodes,minX,maxX){return()=>{nodes.forEach(node=>{node.vy=0,node.x+node.radius>maxX?node.vx+=maxX-(node.x+node.radius):node.x-node.radius<minX&&(node.vx+=minX-(node.x-node.radius))})}}},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.3_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/error-tracking/ErrorTracking.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ErrorTracking__issue{height:calc(100vh - 12rem);min-height:25rem}.ErrorTrackingIssue .SessionRecordingPlayer{height:24rem}.ErrorTrackingIssue .LemonCollapsePanel>.LemonButton:hover:has(.LemonSegmentedButton:hover){background-color:inherit}",""]),module.exports=exports}}]);