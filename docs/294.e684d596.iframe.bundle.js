var ve=Object.defineProperty,De=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var ae=(b,r,e)=>r in b?ve(b,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):b[r]=e,ne=(b,r)=>{for(var e in r||(r={}))Ae.call(r,e)&&ae(b,e,r[e]);if(se)for(var e of se(r))Le.call(r,e)&&ae(b,e,r[e]);return b},oe=(b,r)=>De(b,ge(r));(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(b,r,e){"use strict";e.d(r,"a",function(){return I});var n=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),j=e("./frontend/src/lib/forms/Field.tsx"),O=e("./frontend/src/lib/components/LemonButton/index.ts"),C=e("./frontend/src/types.ts"),P=e("./frontend/src/lib/components/LemonSelect.tsx"),A=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),a=e("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),D=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),V=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),z=e("./frontend/src/scenes/dashboard/DashboardCollaborators.tsx"),f=e("./frontend/src/lib/components/LemonModal/index.ts"),L=e("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),H=e.n(L),G=e("./frontend/src/lib/logic/featureFlagLogic.ts"),$=e("./frontend/src/lib/constants.tsx"),Y=e("./frontend/src/scenes/userLogic.ts"),o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),w=e.n(o);function I(){const{hideNewDashboardModal:M,createAndGoToDashboard:J}=Object(n.useActions)(a.a),{isNewDashboardSubmitting:T,newDashboardModalVisible:Q}=Object(n.useValues)(a.a),{hasAvailableFeature:N}=Object(n.useValues)(Y.a),{featureFlags:R}=Object(n.useValues)(G.a),t=!!R[$.i.WEBSITE_ANALYTICS_TEMPLATE],S=[{value:"DEFAULT_APP",label:"Product analytics","data-attr":"dashboard-select-default-app"}];return t&&S.push({value:"WEBSITE_TRAFFIC",label:"Website traffic","data-attr":"dashboard-select-wesbite-template"}),Object(o.jsx)(f.a,{title:"New dashboard",description:"Use dashboards to compose multiple insights into a single view.",onClose:M,isOpen:Q,footer:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",disabled:T,onClick:M,children:"Cancel"}),Object(o.jsx)(O.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-submit-and-go",disabled:T,onClick:J,children:"Create and go to dashboard"}),Object(o.jsx)(O.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:T,disabled:T,children:"Create"})]}),children:Object(o.jsxs)(L.Form,{logic:a.a,formKey:"newDashboard",id:"new-dashboard-form",enableFormOnSubmit:!0,className:"space-y-2",children:[Object(o.jsx)(j.a,{name:"name",label:"Name",children:Object(o.jsx)(D.a,{autoFocus:!0,"data-attr":"dashboard-name-input",className:"ph-ignore-input"})}),N(C.e.DASHBOARD_COLLABORATION)?Object(o.jsx)(j.a,{name:"description",label:"Description",showOptional:!0,children:Object(o.jsx)(V.a,{"data-attr":"dashboard-description-input",className:"ph-ignore-input"})}):null,Object(o.jsx)(j.a,{name:"useTemplate",label:"Template",showOptional:!0,children:Object(o.jsx)(P.a,{placeholder:"Optionally start from template",allowClear:!0,options:S,fullWidth:!0,"data-attr":"copy-from-template"})}),Object(o.jsx)(j.a,{name:"restrictionLevel",label:"Collaboration settings",children:X=>{let{value:Z,onChange:k}=X;return Object(o.jsx)(A.a,{feature:C.e.DASHBOARD_PERMISSIONING,children:Object(o.jsx)(P.a,{value:Z,onChange:k,options:z.a,fullWidth:!0})})}})]})})}},"./frontend/src/scenes/dashboard/dashboards/Dashboards.tsx":function(b,r,e){"use strict";e.r(r),e.d(r,"scene",function(){return me}),e.d(r,"Dashboards",function(){return te});var n=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),j=e("./frontend/src/models/dashboardsModel.tsx"),O=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),C=e("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),P=e("./frontend/src/scenes/userLogic.ts"),A=e("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js");let a;(function(s){s.All="all",s.Yours="yours",s.Pinned="pinned",s.Shared="shared"})(a||(a={}));const D=Object(n.kea)({path:["scenes","dashboard","dashboardsLogic"],connect:{values:[P.a,["user"]]},actions:{setSearchTerm:s=>({searchTerm:s}),setCurrentTab:s=>({tab:s})},reducers:{searchTerm:{setSearchTerm:(s,l)=>{let{searchTerm:i}=l;return i}},currentTab:[a.All,{setCurrentTab:(s,l)=>{let{tab:i}=l;return i}}]},actionToUrl:s=>{let{values:l}=s;return{setCurrentTab:()=>{const i=l.currentTab===a.All?void 0:l.currentTab;A.router.values.searchParams.tab!==i&&A.router.actions.push(A.router.values.location.pathname,oe(ne({},A.router.values.searchParams),{tab:i}))}}},urlToAction:s=>{let{actions:l}=s;return{"/dashboard":(i,x)=>{const d=x.tab||a.All;l.setCurrentTab(d)}}},selectors:{dashboards:[s=>[j.a.selectors.nameSortedDashboards,s.searchTerm,s.currentTab,s.user],(s,l,i,x)=>(s=s.filter(d=>!d.deleted).sort((d,m)=>{var u,v;return((u=d.name)!==null&&u!==void 0?u:"Untitled").localeCompare((v=m.name)!==null&&v!==void 0?v:"Untitled")}),i===a.Pinned?s=s.filter(d=>d.pinned):i===a.Shared?s=s.filter(d=>d.is_shared):i===a.Yours&&(s=s.filter(d=>{var m;return d.created_by&&x&&((m=d.created_by)===null||m===void 0?void 0:m.uuid)===x.uuid})),l?new C.a(s,{keys:["key","name","description","tags"],threshold:.3}).search(l).map(d=>d.item):s)]}});var V=e("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),z=e("./frontend/src/lib/components/PageHeader.tsx"),f=e("./frontend/src/lib/components/LemonButton/index.ts"),L=e("./frontend/src/lib/components/LemonDivider/index.ts"),H=e("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),G=e("./frontend/src/lib/logic/inAppPrompt/inAppPromptLogic.tsx"),$=e("./frontend/@posthog/lemon-ui/src/index.ts"),Y=e("./frontend/src/scenes/dashboard/DeleteDashboardModal.tsx"),o=e("./frontend/src/scenes/dashboard/DuplicateDashboardModal.tsx"),w=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/card/index.js"),I=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),M=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},T=J,Q=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),N=function(l,i){return M.createElement(Q.a,Object(I.a)(Object(I.a)({},l),{},{ref:i,icon:T}))};N.displayName="AppstoreAddOutlined";var R=M.forwardRef(N),t=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const S=()=>{const{addDashboard:s}=Object(n.useActions)(H.a);return Object(t.jsxs)("div",{className:"mt-4",children:[Object(t.jsx)("p",{children:"Create your first dashboard:"}),Object(t.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[Object(t.jsx)(w.a,{title:"Empty",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>s({name:"New Dashboard",useTemplate:""}),children:Object(t.jsx)("div",{style:{textAlign:"center",fontSize:40},children:Object(t.jsx)(R,{})})}),Object(t.jsx)(w.a,{title:"App Default",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>s({name:"Web App Dashboard",useTemplate:"DEFAULT_APP"}),children:Object(t.jsx)("div",{style:{textAlign:"center",fontSize:40},children:Object(t.jsx)(R,{})})})]})]})};var X=e("./frontend/src/scenes/teamLogic.tsx"),Z=e("./frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),k=e("./frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),de=e("./frontend/src/lib/components/LemonTable/index.ts"),q=e("./frontend/src/types.ts"),U=e("./frontend/src/lib/utils/eventUsageLogic.ts"),re=e("./frontend/src/lib/constants.tsx"),B=e("./frontend/src/lib/components/Link.tsx"),W=e("./frontend/src/scenes/urls.ts"),_=e("./frontend/src/lib/components/Tooltip.tsx"),E=e("./frontend/src/lib/components/icons.tsx"),ce=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),ee=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),le=e("./frontend/src/lib/components/LemonButton/More.tsx"),K=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),ie=e("./frontend/src/lib/components/LemonRow/index.ts");function be(){const{dashboardsLoading:s}=Object(n.useValues)(j.a),{unpinDashboard:l,pinDashboard:i}=Object(n.useActions)(j.a),{setCurrentTab:x}=Object(n.useActions)(D),{dashboards:d,searchTerm:m,currentTab:u}=Object(n.useValues)(D),{hasAvailableFeature:v}=Object(n.useValues)(P.a),{currentTeam:y}=Object(n.useValues)(X.a),{showDuplicateDashboardModal:he}=Object(n.useActions)(Z.a),{showDeleteDashboardModal:ue}=Object(n.useActions)(k.a),je=[{width:0,dataIndex:"pinned",render:function(h,p){let{id:c}=p;return Object(t.jsx)(f.a,{size:"small",status:"stealth",onClick:h?()=>l(c,U.a.DashboardsList):()=>i(c,U.a.DashboardsList),tooltip:h?"Unpin dashboard":"Pin dashboard",icon:h?Object(t.jsx)(E.IconPinFilled,{}):Object(t.jsx)(E.IconPin,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function(h,p){let{id:c,description:F,is_shared:Oe,effective_privilege_level:xe}=p;const pe=c===(y==null?void 0:y.primary_dashboard),fe=xe>=re.f.CanEdit;return Object(t.jsxs)("div",{children:[Object(t.jsxs)("div",{className:"row-name",children:[Object(t.jsx)(B.a,{"data-attr":"dashboard-name",to:W.a.dashboard(c),children:h||"Untitled"}),Oe&&Object(t.jsx)(_.a,{title:"This dashboard is shared publicly.",children:Object(t.jsx)(E.IconShare,{className:"ml-1 text-base text-primary"})}),!fe&&Object(t.jsx)(_.a,{title:"You don't have edit permissions for this dashboard.",children:Object(t.jsx)(E.IconLock,{className:"ml-1 text-base text-muted"})}),pe&&Object(t.jsx)(_.a,{title:"The primary dashboard is shown on the project home page.",children:Object(t.jsx)(E.IconCottage,{className:"ml-1 text-base text-warning"})})]}),v(q.e.DASHBOARD_COLLABORATION)&&F&&Object(t.jsx)("span",{className:"row-description",children:F})]})},sorter:(g,h)=>{var p,c;return((p=g.name)!==null&&p!==void 0?p:"Untitled").localeCompare((c=h.name)!==null&&c!==void 0?c:"Untitled")}},...v(q.e.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function(h){return h?Object(t.jsx)(ce.a,{tags:h,staticOnly:!0}):null}}]:[],Object(ee.b)(),Object(ee.a)(),{width:0,render:function(h,p){let{id:c,name:F}=p;return Object(t.jsx)(le.a,{overlay:Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(f.a,{status:"stealth",to:W.a.dashboard(c),onClick:()=>{Object(K.e)({id:c}).mount(),Object(K.e)({id:c}).actions.setDashboardMode(null,U.a.DashboardsList)},fullWidth:!0,children:"View"}),Object(t.jsx)(f.a,{status:"stealth",to:W.a.dashboard(c),onClick:()=>{Object(K.e)({id:c}).mount(),Object(K.e)({id:c}).actions.setDashboardMode(q.m.Edit,U.a.DashboardsList)},fullWidth:!0,children:"Edit"}),Object(t.jsx)(f.a,{status:"stealth",onClick:()=>{he(c,F)},fullWidth:!0,children:"Duplicate"}),Object(t.jsx)(L.a,{}),Object(t.jsx)(ie.a,{icon:Object(t.jsx)(E.IconCottage,{className:"text-warning"}),fullWidth:!0,status:"warning",children:Object(t.jsxs)("span",{className:"text-muted",children:["Change the default dashboard",Object(t.jsx)("br",{}),"from the ",Object(t.jsx)(B.a,{to:W.a.projectHomepage(),children:"project home page"}),"."]})}),Object(t.jsx)(L.a,{}),Object(t.jsx)(f.a,{onClick:()=>{ue(c)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return Object(t.jsx)(de.a,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:d,rowKey:"id",rowClassName:g=>g._highlight?"highlighted":null,columns:je,loading:s,defaultSorting:{columnKey:"name",order:1},emptyState:m?`No ${u===a.Pinned?"pinned ":u===a.Shared?"shared ":""}dashboards matching "${m}"!`:u===a.Pinned?Object(t.jsxs)(t.Fragment,{children:["No dashboards have been pinned for quick access yet."," ",Object(t.jsx)(B.a,{onClick:()=>x(a.All),children:"Go to All Dashboards to pin one."})]}):u===a.Shared?Object(t.jsxs)(t.Fragment,{children:["No dashboards have been shared yet."," ",Object(t.jsx)(B.a,{onClick:()=>x(a.All),children:"Go to All Dashboards to share one."})]}):void 0,nouns:["dashboard","dashboards"]})}const me={component:te,logic:D};function te(){const{dashboardsLoading:s}=Object(n.useValues)(j.a),{setSearchTerm:l,setCurrentTab:i}=Object(n.useActions)(D),{dashboards:x,searchTerm:d,currentTab:m}=Object(n.useValues)(D),{showNewDashboardModal:u}=Object(n.useActions)(H.a),{closePrompts:v}=Object(n.useActions)(G.b);return Object(t.jsxs)("div",{children:[Object(t.jsx)(V.a,{}),Object(t.jsx)(o.a,{}),Object(t.jsx)(Y.a,{}),Object(t.jsx)(z.a,{title:"Dashboards",buttons:Object(t.jsx)(f.a,{"data-attr":"new-dashboard",onClick:()=>{v(),u()},type:"primary",children:"New dashboard"})}),Object(t.jsxs)(O.a,{activeKey:m,style:{borderColor:"#D9D9D9"},onChange:y=>i(y),children:[Object(t.jsx)(O.a.TabPane,{tab:"All Dashboards"},a.All),Object(t.jsx)(O.a.TabPane,{tab:"Your Dashboards"},a.Yours),Object(t.jsx)(O.a.TabPane,{tab:"Pinned"},a.Pinned),Object(t.jsx)(O.a.TabPane,{tab:"Shared"},a.Shared)]}),Object(t.jsxs)("div",{className:"flex",children:[Object(t.jsx)($.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:l,value:d}),Object(t.jsx)("div",{})]}),Object(t.jsx)(L.a,{className:"my-4"}),s||x.length>0||d||m!==a.All?Object(t.jsx)(be,{}):Object(t.jsx)(S,{})]})}}}]);
