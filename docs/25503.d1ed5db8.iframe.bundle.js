"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[25503],{"../../products/links/frontend/LinksScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LinksScene:()=>LinksScene,scene:()=>scene});var posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.21.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),ProductIntroduction=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),More=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonMenu=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonMenu/LemonMenu.tsx"),columnUtils=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),LemonTableLink=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),stringWithWBR=__webpack_require__("../../frontend/src/lib/utils/stringWithWBR.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),types=__webpack_require__("../../frontend/src/types.ts"),Sparkline=__webpack_require__("../../frontend/src/lib/components/Sparkline.tsx"),kea_loaders_lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts");let linkMetricSparklineLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.key)(_ref=>{let{id}=_ref;return id}),(0,index_esm.path)(["scenes","links","linkMetricSparklineLogic","id"]),(0,kea_loaders_lib.loaders)({sparklineData:[null,{loadSparklineData:async()=>{let query={kind:schema_general.OH.TrendsQuery,filterTestAccounts:!1,trendsFilter:{display:types.Qb.ActionsBar},series:[{kind:schema_general.OH.EventsNode,event:"$pageview",name:"$pageview"}]};return(await api.ZP.query(query)).results[0]}}]}),(0,index_esm.afterMount)(_ref2=>{let{actions}=_ref2;actions.loadSparklineData()})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function LinkMetricSparkline(_ref){let{id}=_ref,logic=linkMetricSparklineLogic({id}),{sparklineData,sparklineDataLoading}=(0,index_esm.useValues)(logic),displayData=[{color:"success",name:"Clicks",values:sparklineData?.data||[]}];return(0,jsx_runtime.jsx)(Sparkline.b,{loading:sparklineDataLoading,labels:sparklineData?.labels,data:displayData,className:"h-8 max-w-24",maximumIndicator:!1})}var linksLogic=__webpack_require__("../../products/links/frontend/linksLogic.ts");let scene={component:LinksScene,logic:linksLogic.P};function LinksScene(){let{links,linksLoading}=(0,index_esm.useValues)(linksLogic.P),shouldShowEmptyState=0==links.length&&!linksLoading,columns=[{title:"Key",sticky:!0,width:"40%",render:function Render(_,record){return(0,jsx_runtime.jsx)(LemonTableLink.i,{to:record.id?urls.j.link(record.id):void 0,title:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("span",{children:(0,stringWithWBR.Z)(record?.short_link_domain+"/"+record?.short_code||"",17)})}),description:record?.redirect_url})}},(0,columnUtils.JB)(),(0,columnUtils.rw)(),{title:"Last 7 days",render:function RenderLinkMetricSparkline(_,link){return(0,jsx_runtime.jsx)(src.rU,{to:"/insights",children:(0,jsx_runtime.jsx)(LinkMetricSparkline,{id:link.id})})}},{width:0,render:function Render(_,link){return(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsx)(LemonMenu.iy,{items:[{label:"Edit link",onClick:()=>lib.router.actions.push(urls.j.link(link.id))},{label:"Delete link",status:"danger",disabledReason:"Coming soon",onClick:()=>{}}]})})}}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsx)(src.Jp,{type:"primary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),onClick:()=>lib.router.actions.push(urls.j.link("new")),sideAction:{dropdown:{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{disabledReason:"Coming soon",fullWidth:!0,children:"Import from Bit.ly"}),(0,jsx_runtime.jsx)(src.Jp,{disabledReason:"Coming soon",fullWidth:!0,children:"Import from Dub.co"}),(0,jsx_runtime.jsx)(src.Jp,{disabledReason:"Coming soon",fullWidth:!0,children:"Import from CSV"})]}),placement:"bottom-end"}},children:"Create link"}),delimited:!0}),(0,jsx_runtime.jsx)(ProductIntroduction.C,{isEmpty:shouldShowEmptyState,productName:"Links",productKey:types.Md.LINKS,thingName:"link",description:"Start creating links for your marketing campaigns, referral programs, and more.",action:()=>lib.router.actions.push(urls.j.link("new")),docsURL:"https://posthog.com/docs/links"}),!shouldShowEmptyState&&(0,jsx_runtime.jsx)(src.g3,{loading:linksLoading,columns:columns,dataSource:links})]})}},"../../products/links/frontend/linksLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>linksLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts");let linksLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(()=>["scenes","links","linksLogic"]),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(()=>({links:[[],{loadLinks:async()=>(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.links.list()).results}]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref=>{let{actions}=_ref;actions.loadLinks()})])}}]);