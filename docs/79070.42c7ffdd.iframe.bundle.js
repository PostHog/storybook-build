"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[79070],{"../../frontend/src/scenes/heatmaps/components/HeatmapsForbiddenURL.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>HeatmapsForbiddenURL});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_AuthorizedUrlList_AuthorizedUrlList__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),scenes_heatmaps_scenes_heatmap_heatmapLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/heatmaps/scenes/heatmap/heatmapLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function HeatmapsForbiddenURL(){let{dataUrl}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_heatmaps_scenes_heatmap_heatmapLogic__WEBPACK_IMPORTED_MODULE_4__.X);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"flex-1 gap-y-4 my-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Vp,{type:"error",children:[dataUrl," is not an authorized URL. Please add it to the list of authorized URLs to view heatmaps on this page."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("h4",{className:"my-4",children:"Authorized Toolbar URLs"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_AuthorizedUrlList_AuthorizedUrlList__WEBPACK_IMPORTED_MODULE_2__.t,{type:lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_3__.uw.TOOLBAR_URLS})]})}},"../../frontend/src/scenes/heatmaps/scenes/heatmap/HeatmapNewScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{HeatmapNewScene:()=>HeatmapNewScene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),index_module=__webpack_require__("../../node_modules/.pnpm/use-debounce@9.0.3_react@18.2.0/node_modules/use-debounce/dist/index.module.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonInput=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonInput/index.ts"),LemonRadio=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonRadio/index.ts"),HeatmapsForbiddenURL=__webpack_require__("../../frontend/src/scenes/heatmaps/components/HeatmapsForbiddenURL.tsx");__webpack_require__("../../frontend/src/lib/components/hedgehogs.tsx");var heatmapLogic=__webpack_require__("../../frontend/src/scenes/heatmaps/scenes/heatmap/heatmapLogic.ts"),heatmapsBrowserLogic=__webpack_require__("../../frontend/src/scenes/heatmaps/components/heatmapsBrowserLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function HeatmapsUrlsList(){let{topUrls,topUrlsLoading,noPageviews}=(0,index_esm.useValues)(heatmapsBrowserLogic.p),{setDisplayUrl}=(0,index_esm.useActions)(heatmapLogic.X);return(0,jsx_runtime.jsx)("div",{className:"flex-1 flex items-center overflow-y-auto",children:(0,jsx_runtime.jsx)("div",{className:" w-full",children:(0,jsx_runtime.jsx)("div",{className:"gap-y-px p-2 border bg-surface-primary rounded",children:topUrlsLoading?(0,jsx_runtime.jsx)(src.yW,{className:"h-10",repeat:10}):noPageviews?(0,jsx_runtime.jsx)(src.Vp,{type:"info",children:"No pageview events have been received yet. Once you have some data, you'll see the most viewed pages here."}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium text-muted ml-2",children:"Most viewed pages:"}),topUrls?.map(_ref=>{let{url}=_ref;return jsx_runtime.jsx(src.Jp,{fullWidth:!0,onClick:()=>{setDisplayUrl(url)},children:url},url)})]})})})})}function HeatmapsInvalidURL(){return(0,jsx_runtime.jsx)("div",{className:"flex-1 py-4 gap-y-4 mb-2",children:(0,jsx_runtime.jsx)(src.Vp,{type:"error",children:"Not a valid URL. Can't load a heatmap for that \uD83D\uDE30"})})}var urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneSection.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx");function HeatmapNewScene(){let logic=(0,heatmapLogic.X)({id:"new"}),{loading,displayUrl,isDisplayUrlValid,type,name,dataUrl,isBrowserUrlAuthorized}=(0,index_esm.useValues)(logic),{setDisplayUrl,setType,setName,createHeatmap,setDataUrl}=(0,index_esm.useActions)(logic),debouncedOnNameChange=(0,index_module.y1)(name=>{setName(name)},500);return loading?(0,jsx_runtime.jsx)(SceneContent._,{children:(0,jsx_runtime.jsx)(src.$j,{})}):(0,jsx_runtime.jsxs)(SceneContent._,{children:[(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:name,resourceType:{type:"heatmap"},description:null,canEdit:!0,forceEdit:!0,onNameChange:debouncedOnNameChange,forceBackTo:{name:"Heatmaps",path:urls.j.heatmaps(),key:"heatmaps"}}),(0,jsx_runtime.jsxs)(SceneSection.S,{title:"Page URL",description:"URL to your website",children:[(0,jsx_runtime.jsx)(LemonInput.D,{value:displayUrl||"",onChange:setDisplayUrl,placeholder:"https://www.example.com"}),isDisplayUrlValid?null:(0,jsx_runtime.jsx)(HeatmapsInvalidURL,{}),!displayUrl&&(0,jsx_runtime.jsx)(HeatmapsUrlsList,{})]}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsxs)(SceneSection.S,{title:"Heatmap data URL",description:"An exact match or a pattern for heatmap data. For example, use a pattern if you have pages with dynamic IDs. E.g. https://www.example.com/users/* will aggregate data from all pages under /users/.",children:[(0,jsx_runtime.jsx)(LemonInput.D,{size:"small",placeholder:"https://www.example.com/*",value:null!=dataUrl?dataUrl:"",onChange:value=>{setDataUrl(value||null)},fullWidth:!0}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted mt-1",children:"Add * for wildcards to aggregate data from multiple pages"}),dataUrl&&!isBrowserUrlAuthorized?(0,jsx_runtime.jsx)(HeatmapsForbiddenURL.A,{}):null]}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Capture method",description:"Choose how to display your page in the heatmap",children:(0,jsx_runtime.jsx)(LemonRadio._,{options:[{label:"Screenshot",value:"screenshot",description:"We will generate a full-page screenshot of your website"},{label:"Iframe",value:"iframe",description:"We will load your website in an iframe. Make sure you allow your website to be loaded in an iframe."}],value:type,onChange:value=>setType(value)})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)("div",{className:"flex gap-2",children:(0,jsx_runtime.jsx)(LemonButton.J,{className:"w-fit",type:"primary","data-attr":"save-heatmap",onClick:createHeatmap,loading:!1,disabledReason:isDisplayUrlValid&&isBrowserUrlAuthorized?displayUrl?dataUrl?null:"Heatmap data URL is required":"URL is required":"Invalid URL or forbidden URL",children:"Save"})})]})}}}]);