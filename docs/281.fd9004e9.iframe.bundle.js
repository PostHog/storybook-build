(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(K,O,e){"use strict";e.d(O,"a",function(){return L});var n=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/lib/forms/Field.tsx"),m=e("./frontend/src/lib/components/LemonButton/index.ts"),g=e("./frontend/src/types.ts"),f=e("./frontend/src/lib/components/LemonSelect.tsx"),a=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),u=e("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),E=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),D=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),h=e("./frontend/src/scenes/dashboard/DashboardCollaborators.tsx"),M=e("./frontend/src/lib/components/LemonModal/index.ts"),T=e("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),k=e.n(T),V=e("./frontend/src/lib/logic/featureFlagLogic.ts"),w=e("./frontend/src/lib/constants.tsx"),o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),H=e.n(o);function L(){const{hideNewDashboardModal:A,createAndGoToDashboard:G}=Object(n.useActions)(u.a),{isNewDashboardSubmitting:P,newDashboardModalVisible:S}=Object(n.useValues)(u.a),{featureFlags:N}=Object(n.useValues)(V.a),R=!!N[w.i.WEBSITE_ANALYTICS_TEMPLATE],t=[{value:"DEFAULT_APP",label:"Product analytics","data-attr":"dashboard-select-default-app"}];return R&&t.push({value:"WEBSITE_TRAFFIC",label:"Website traffic","data-attr":"dashboard-select-wesbite-template"}),Object(o.jsx)(M.a,{title:"New dashboard",description:"Use dashboards to compose multiple insights into a single view.",onClose:A,isOpen:S,footer:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(m.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",disabled:P,onClick:A,children:"Cancel"}),Object(o.jsx)(m.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-submit-and-go",disabled:P,onClick:G,children:"Create and go to dashboard"}),Object(o.jsx)(m.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:P,disabled:P,children:"Create"})]}),children:Object(o.jsxs)(T.Form,{logic:u.a,formKey:"newDashboard",id:"new-dashboard-form",enableFormOnSubmit:!0,className:"space-y-2",children:[Object(o.jsx)(c.a,{name:"name",label:"Name",children:Object(o.jsx)(E.a,{autoFocus:!0,"data-attr":"dashboard-name-input",className:"ph-ignore-input"})}),Object(o.jsx)(c.a,{name:"description",label:"Description",showOptional:!0,children:Object(o.jsx)(D.a,{"data-attr":"dashboard-description-input",className:"ph-ignore-input"})}),Object(o.jsx)(c.a,{name:"useTemplate",label:"Template",showOptional:!0,children:Object(o.jsx)(f.a,{placeholder:"Optionally start from template",allowClear:!0,options:t,fullWidth:!0,"data-attr":"copy-from-template"})}),Object(o.jsx)(c.a,{name:"restrictionLevel",label:"Collaboration settings",children:$=>{let{value:Y,onChange:J}=$;return Object(o.jsx)(a.a,{feature:g.e.DASHBOARD_PERMISSIONING,children:Object(o.jsx)(f.a,{value:Y,onChange:J,options:h.a,fullWidth:!0})})}})]})})}},"./frontend/src/scenes/dashboard/dashboards/Dashboards.tsx":function(K,O,e){"use strict";e.r(O),e.d(O,"scene",function(){return ue}),e.d(O,"Dashboards",function(){return ee});var n=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/models/dashboardsModel.tsx"),m=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),g=e("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),f=e("./frontend/src/scenes/userLogic.ts");let a;(function(s){s.All="all",s.Yours="yours",s.Pinned="pinned",s.Shared="shared"})(a||(a={}));const u=Object(n.kea)({path:["scenes","dashboard","dashboardsLogic"],connect:{values:[f.a,["user"]]},actions:{setSearchTerm:s=>({searchTerm:s}),setCurrentTab:s=>({tab:s})},reducers:{searchTerm:{setSearchTerm:(s,i)=>{let{searchTerm:l}=i;return l}},currentTab:[a.All,{setCurrentTab:(s,i)=>{let{tab:l}=i;return l}}]},selectors:{dashboards:[s=>[c.a.selectors.nameSortedDashboards,s.searchTerm,s.currentTab,s.user],(s,i,l,y)=>(s=s.filter(r=>!r.deleted).sort((r,b)=>{var j,v;return((j=r.name)!==null&&j!==void 0?j:"Untitled").localeCompare((v=b.name)!==null&&v!==void 0?v:"Untitled")}),l===a.Pinned?s=s.filter(r=>r.pinned):l===a.Shared?s=s.filter(r=>r.is_shared):l===a.Yours&&(s=s.filter(r=>{var b;return r.created_by&&y&&((b=r.created_by)===null||b===void 0?void 0:b.uuid)===y.uuid})),i?new g.a(s,{keys:["key","name","description","tags"],threshold:.3}).search(i).map(r=>r.item):s)]}});var E=e("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),D=e("./frontend/src/lib/components/PageHeader.tsx"),h=e("./frontend/src/lib/components/LemonButton/index.ts"),M=e("./frontend/src/lib/components/LemonDivider/index.ts"),T=e("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),k=e("./frontend/src/lib/logic/inAppPrompt/inAppPromptLogic.tsx"),V=e("./frontend/@posthog/lemon-ui/src/index.ts"),w=e("./frontend/src/scenes/dashboard/DeleteDashboardModal.tsx"),o=e("./frontend/src/scenes/dashboard/DuplicateDashboardModal.tsx"),H=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/card/index.js"),L=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),A=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},P=G,S=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),N=function(i,l){return A.createElement(S.a,Object(L.a)(Object(L.a)({},i),{},{ref:l,icon:P}))};N.displayName="AppstoreAddOutlined";var R=A.forwardRef(N),t=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const $=()=>{const{addDashboard:s}=Object(n.useActions)(T.a);return Object(t.jsxs)("div",{className:"mt-4",children:[Object(t.jsx)("p",{children:"Create your first dashboard:"}),Object(t.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[Object(t.jsx)(H.a,{title:"Empty",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>s({name:"New Dashboard",useTemplate:""}),children:Object(t.jsx)("div",{style:{textAlign:"center",fontSize:40},children:Object(t.jsx)(R,{})})}),Object(t.jsx)(H.a,{title:"App Default",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>s({name:"Web App Dashboard",useTemplate:"DEFAULT_APP"}),children:Object(t.jsx)("div",{style:{textAlign:"center",fontSize:40},children:Object(t.jsx)(R,{})})})]})]})};var Y=e("./frontend/src/scenes/teamLogic.tsx"),J=e("./frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),te=e("./frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),se=e("./frontend/src/lib/components/LemonTable/index.ts"),Q=e("./frontend/src/types.ts"),B=e("./frontend/src/lib/utils/eventUsageLogic.ts"),ne=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),ae=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},de=oe,q=function(i,l){return A.createElement(S.a,Object(L.a)(Object(L.a)({},i),{},{ref:l,icon:de}))};q.displayName="ShareAltOutlined";var re=A.forwardRef(q),ce=e("./frontend/src/lib/constants.tsx"),z=e("./frontend/src/lib/components/Link.tsx"),U=e("./frontend/src/scenes/urls.ts"),X=e("./frontend/src/lib/components/Tooltip.tsx"),Z=e("./frontend/src/lib/components/icons.tsx"),le=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),_=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),ie=e("./frontend/src/lib/components/LemonButton/More.tsx"),W=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),me=e("./frontend/src/lib/components/LemonRow/index.ts");const he=()=>{const{dashboardsLoading:s}=Object(n.useValues)(c.a),{unpinDashboard:i,pinDashboard:l}=Object(n.useActions)(c.a),{setCurrentTab:y}=Object(n.useActions)(u),{dashboards:r,searchTerm:b,currentTab:j}=Object(n.useValues)(u),{hasAvailableFeature:v}=Object(n.useValues)(f.a),{currentTeam:C}=Object(n.useValues)(Y.a),{showDuplicateDashboardModal:be}=Object(n.useActions)(J.a),{showDeleteDashboardModal:je}=Object(n.useActions)(te.a),pe=[{width:0,dataIndex:"pinned",render:function(p,x){let{id:d}=x;return Object(t.jsx)(h.a,{size:"small",status:"primary-alt",onClick:p?()=>i(d,B.a.DashboardsList):()=>l(d,B.a.DashboardsList),children:p?Object(t.jsx)(ne.a,{}):Object(t.jsx)(ae.a,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function(p,x){let{id:d,description:F,_highlight:Oe,is_shared:fe,effective_privilege_level:xe}=x;const ve=d===(C==null?void 0:C.primary_dashboard),ge=xe>=ce.f.CanEdit;return Object(t.jsxs)("div",{className:Oe?"highlighted":void 0,style:{display:"inline-block"},children:[Object(t.jsxs)("div",{className:"row-name",children:[Object(t.jsx)(z.a,{"data-attr":"dashboard-name",to:U.a.dashboard(d),children:p||"Untitled"}),!ge&&Object(t.jsx)(X.a,{title:"You don't have edit permissions for this dashboard.",children:Object(t.jsx)(Z.IconLock,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})}),fe&&Object(t.jsx)(X.a,{title:"This dashboard is shared publicly.",children:Object(t.jsx)(re,{style:{marginLeft:6}})}),ve&&Object(t.jsx)(X.a,{title:"Primary dashboards are shown on the project home page",children:Object(t.jsx)(Z.IconCottage,{style:{marginLeft:6,color:"var(--warning)",fontSize:"1rem",verticalAlign:"-0.125em",display:"inline"}})})]}),v(Q.e.DASHBOARD_COLLABORATION)&&F&&Object(t.jsx)("span",{className:"row-description",children:F})]})},sorter:(I,p)=>{var x,d;return((x=I.name)!==null&&x!==void 0?x:"Untitled").localeCompare((d=p.name)!==null&&d!==void 0?d:"Untitled")}},...v(Q.e.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function(p){return p?Object(t.jsx)(le.a,{tags:p,staticOnly:!0}):null}}]:[],Object(_.b)(),Object(_.a)(),{width:0,render:function(p,x){let{id:d,name:F}=x;return Object(t.jsx)(ie.a,{overlay:Object(t.jsxs)("div",{style:{maxWidth:250},children:[Object(t.jsx)(h.a,{status:"stealth",to:U.a.dashboard(d),onClick:()=>{Object(W.c)({id:d}).mount(),Object(W.c)({id:d}).actions.setDashboardMode(null,B.a.DashboardsList)},fullWidth:!0,children:"View"}),Object(t.jsx)(h.a,{status:"stealth",to:U.a.dashboard(d),onClick:()=>{Object(W.c)({id:d}).mount(),Object(W.c)({id:d}).actions.setDashboardMode(Q.m.Edit,B.a.DashboardsList)},fullWidth:!0,children:"Edit"}),Object(t.jsx)(h.a,{status:"stealth",onClick:()=>{be(d,F)},fullWidth:!0,children:"Duplicate"}),Object(t.jsx)(M.a,{}),Object(t.jsx)(me.a,{icon:Object(t.jsx)(Z.IconCottage,{className:"text-warning"}),fullWidth:!0,status:"warning",children:Object(t.jsxs)("span",{className:"text-muted",children:["Change the default dashboard on the"," ",Object(t.jsx)(z.a,{to:U.a.projectHomepage(),children:"project home page"}),"."]})}),Object(t.jsx)(M.a,{}),Object(t.jsx)(h.a,{onClick:()=>{je(d)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return Object(t.jsx)(se.a,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:r,rowKey:"id",columns:pe,loading:s,defaultSorting:{columnKey:"name",order:1},emptyState:b?`No ${j===a.Pinned?"pinned ":j===a.Shared?"shared ":""}dashboards matching "${b}"!`:j===a.Pinned?Object(t.jsxs)(t.Fragment,{children:["No dashboards have been pinned for quick access yet."," ",Object(t.jsx)(z.a,{onClick:()=>y(a.All),children:"Go to All Dashboards to pin one."})]}):j===a.Shared?Object(t.jsxs)(t.Fragment,{children:["No dashboards have been shared yet."," ",Object(t.jsx)(z.a,{onClick:()=>y(a.All),children:"Go to All Dashboards to share one."})]}):void 0,nouns:["dashboard","dashboards"]})},ue={component:ee,logic:u};function ee(){const{dashboardsLoading:s}=Object(n.useValues)(c.a),{setSearchTerm:i,setCurrentTab:l}=Object(n.useActions)(u),{dashboards:y,searchTerm:r,currentTab:b}=Object(n.useValues)(u),{showNewDashboardModal:j}=Object(n.useActions)(T.a),{closePrompts:v}=Object(n.useActions)(k.b);return Object(t.jsxs)("div",{children:[Object(t.jsx)(E.a,{}),Object(t.jsx)(o.a,{}),Object(t.jsx)(w.a,{}),Object(t.jsx)(D.a,{title:"Dashboards",buttons:Object(t.jsx)(h.a,{"data-attr":"new-dashboard",onClick:()=>{v(),j()},type:"primary",children:"New dashboard"})}),Object(t.jsxs)(m.a,{activeKey:b,style:{borderColor:"#D9D9D9"},onChange:C=>l(C),children:[Object(t.jsx)(m.a.TabPane,{tab:"All Dashboards"},a.All),Object(t.jsx)(m.a.TabPane,{tab:"Your Dashboards"},a.Yours),Object(t.jsx)(m.a.TabPane,{tab:"Pinned"},a.Pinned),Object(t.jsx)(m.a.TabPane,{tab:"Shared"},a.Shared)]}),Object(t.jsxs)("div",{className:"flex",children:[Object(t.jsx)(V.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:i,value:r}),Object(t.jsx)("div",{})]}),Object(t.jsx)(M.a,{className:"my-4"}),s||y.length>0||r||b!==a.All?Object(t.jsx)(he,{}):Object(t.jsx)($,{})]})}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(K,O,e){"use strict";var n=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),c=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},g=m,f=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),a=function(D,h){return c.createElement(f.a,Object(n.a)(Object(n.a)({},D),{},{ref:h,icon:g}))};a.displayName="PushpinFilled";var u=O.a=c.forwardRef(a)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(K,O,e){"use strict";var n=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),c=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},g=m,f=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),a=function(D,h){return c.createElement(f.a,Object(n.a)(Object(n.a)({},D),{},{ref:h,icon:g}))};a.displayName="PushpinOutlined";var u=O.a=c.forwardRef(a)}}]);
