(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{6046:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Licenses",(function(){return Licenses}));__webpack_require__(53);var slicedToArray=__webpack_require__(17),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),es_form=__webpack_require__(831),es_alert=__webpack_require__(676),input=__webpack_require__(675),es_button=__webpack_require__(130),table=__webpack_require__(5431),toConsumableArray=(__webpack_require__(39),__webpack_require__(47),__webpack_require__(37),__webpack_require__(50),__webpack_require__(19)),toConsumableArray_default=__webpack_require__.n(toConsumableArray),regenerator=__webpack_require__(8),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(67),__webpack_require__(15)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),api=__webpack_require__(22),index_esm=__webpack_require__(3),react_toastify=__webpack_require__(60),licenseLogic=Object(index_esm.kea)({actions:{setError:function setError(error){return{error:error}},addLicense:function addLicense(license){return{license:license}}},loaders:function loaders(_ref){var _createLicense,_loadLicenses,values=_ref.values,actions=_ref.actions;return{licenses:[[],{loadLicenses:(_loadLicenses=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,api.a.get("api/license");case 2:return _context.abrupt("return",_context.sent.results);case 3:case"end":return _context.stop()}}),_callee)}))),function loadLicenses(){return _loadLicenses.apply(this,arguments)}),createLicense:(_createLicense=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(payload){var license;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,api.a.create("api/license",payload);case 3:return license=_context2.sent,Object(react_toastify.c)("Your license key was succesfully activated. You can now use all the features in the ".concat(license.plan," plan.")),actions.setError(null),_context2.abrupt("return",[license].concat(toConsumableArray_default()(values.licenses)));case 9:return _context2.prev=9,_context2.t0=_context2.catch(0),actions.setError(_context2.t0),_context2.abrupt("return",values.licenses);case 13:case"end":return _context2.stop()}}),_callee2,null,[[0,9]])}))),function createLicense(_x){return _createLicense.apply(this,arguments)})}]}},reducers:{licenses:{addLicense:function addLicense(state,_ref2){return[_ref2.license].concat(toConsumableArray_default()(state))}},error:[null,{setError:function setError(_,_ref3){return _ref3.error}}]},events:function events(_ref4){var actions=_ref4.actions;return{afterMount:function afterMount(){actions.loadLicenses()}}},path:function path(){return["scenes","instance","Licenses","logic"]}}),utils=__webpack_require__(12),CodeSnippet=__webpack_require__(43),PageHeader=__webpack_require__(204),InfoCircleOutlined=__webpack_require__(662),Tooltip=__webpack_require__(51),columns=[{title:"Active",render:function renderActive(license){return new Date(license.valid_until)>new Date?"active":"expired"}},{title:"Valid until",render:function renderActive(license){return Object(utils.H)(license.valid_until)}},{title:"Plan",dataIndex:"plan"},{title:function Render(){return react_default.a.createElement(Tooltip.a,{placement:"right",title:"Maximum number of team members that you can have across all organizations with your current license."},"Max #Â of team members",react_default.a.createElement(InfoCircleOutlined.a,{className:"info-indicator"}))},render:function renderMaxUsers(license){return null===license.max_users?"Unlimited":license.max_users}},{title:"Key",render:function renderActive(license){return react_default.a.createElement(CodeSnippet.a,null,license.key)}},{title:"License added on",render:function renderActive(license){return Object(utils.H)(license.created_at)}}];function Licenses(){var _Form$useForm=es_form.a.useForm(),form=slicedToArray_default()(_Form$useForm,1)[0],_useValues=Object(index_esm.useValues)(licenseLogic),licenses=_useValues.licenses,licensesLoading=_useValues.licensesLoading,error=_useValues.error,createLicense=Object(index_esm.useActions)(licenseLogic).createLicense;return react_default.a.createElement("div",null,react_default.a.createElement(PageHeader.a,{title:"Licenses",caption:react_default.a.createElement(react_default.a.Fragment,null,"Here you can add and manage your PostHog enterprise licenses. When you activate a license key, enterprise functionality will be enabled immediately. Contact"," ",react_default.a.createElement("a",{href:"mailto:sales@posthog.com"},"sales@posthog.com")," to buy a license or if you have any issues with a license.")}),error&&react_default.a.createElement(es_alert.a,{message:error.detail||react_default.a.createElement("span",null,"Could not validate license key. Please try again or contact us."),type:"error",style:{marginBottom:"1em"}}),react_default.a.createElement(es_form.a,{form:form,name:"horizontal_login",layout:"inline",onFinish:function onFinish(values){return createLicense({key:values.key})},style:{marginBottom:"1rem"}},react_default.a.createElement(es_form.a.Item,{name:"key",rules:[{required:!0,message:"Please input a license key!"}]},react_default.a.createElement(input.a,{placeholder:"License key",style:{minWidth:400}})),react_default.a.createElement(es_form.a.Item,{shouldUpdate:!0},(function(){return react_default.a.createElement(es_button.a,{type:"primary",htmlType:"submit",disabled:!form.isFieldsTouched(!0)||!!form.getFieldsError().filter((function(_ref){return _ref.errors.length})).length},"Activate License Key")}))),react_default.a.createElement(table.a,{"data-attr":"license-table",size:"small",rowKey:"id",pagination:{pageSize:99999,hideOnSinglePage:!0},rowClassName:"cursor-pointer",dataSource:licenses,columns:columns,loading:licensesLoading}))}}}]);