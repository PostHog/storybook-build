(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{"./frontend/src/scenes/dashboard/Dashboards.tsx":function(Me,P,a){"use strict";a.r(P),a.d(P,"scene",function(){return Te}),a.d(P,"Dashboards",function(){return Y});var Ne=a("./node_modules/core-js/modules/es.symbol.js"),Ve=a("./node_modules/core-js/modules/es.symbol.description.js"),ze=a("./node_modules/core-js/modules/es.array.concat.js"),Ie=a("./node_modules/core-js/modules/es.function.name.js"),k=a("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),q=a.n(k),b=a("./node_modules/react/index.js"),e=a.n(b),m=a("./node_modules/kea/lib/index.esm.js"),C=a("./frontend/src/models/dashboardsModel.tsx"),_=a("./node_modules/antd/es/button/index.js"),j=a("./node_modules/antd/es/tabs/index.js"),H=a("./node_modules/antd/es/input/index.js"),ee=a("./node_modules/antd/es/row/index.js"),B=a("./node_modules/antd/es/col/index.js"),U=a("./node_modules/antd/es/card/index.js"),n=a("./frontend/src/scenes/dashboard/dashboardsLogic.ts"),F=a("./frontend/src/lib/components/Link.tsx"),v=a("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},te=ae,M=a("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),G=function(d,s){return b.createElement(M.a,Object(v.a)(Object(v.a)({},d),{},{ref:s,icon:te}))};G.displayName="PushpinFilled";var ne=b.forwardRef(G),se=a("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},le=oe,W=function(d,s){return b.createElement(M.a,Object(v.a)(Object(v.a)({},d),{},{ref:s,icon:le}))};W.displayName="ShareAltOutlined";var re=b.forwardRef(W),de=a("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},ce=ie,$=function(d,s){return b.createElement(M.a,Object(v.a)(Object(v.a)({},d),{},{ref:s,icon:ce}))};$.displayName="AppstoreAddOutlined";var K=b.forwardRef($),me=a("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ue=a.n(me),f=a("./node_modules/antd/es/form/index.js"),he=a("./frontend/src/lib/utils.tsx"),be=a("./node_modules/antd/lib/input/TextArea.js"),ve=a.n(be),fe=a("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),p=a("./frontend/src/lib/components/LemonButton/index.ts"),pe=a("./frontend/src/lib/constants.tsx"),D=a("./frontend/src/types.ts"),J=a("./frontend/src/lib/components/LemonSelect.tsx"),ge=a("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),Ee=a("./frontend/src/scenes/dashboard/ShareModal.tsx");function ye(){var g=Object(m.useActions)(n.b),d=g.hideNewDashboardModal,s=Object(m.useValues)(n.b),V=s.newDashboardModalVisible,z=Object(m.useActions)(C.a),I=z.addDashboard,T=Object(m.useValues)(C.a),y=T.dashboardLoading,A=f.a.useForm(),R=ue()(A,1),u=R[0];return e.a.createElement(fe.a,{title:"New dashboard",destroyOnClose:!0,onCancel:d,visible:V,footer:e.a.createElement(e.a.Fragment,null,e.a.createElement(p.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",loading:y,style:{marginRight:"0.5rem"},onClick:d},"Cancel"),e.a.createElement(p.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:y},"Create"))},e.a.createElement(f.a,{layout:"vertical",form:u,onFinish:function(o){I(o)},id:"new-dashboard-form",requiredMark:"optional",initialValues:{restrictionLevel:pe.k.EveryoneInProjectCanEdit}},e.a.createElement("p",null,"Use dashboards to compose multiple insights into a single view."),e.a.createElement(f.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please give your dashboard a name."}]},e.a.createElement(H.a,{autoFocus:!0,onChange:function(o){return u.setFieldsValue({key:Object(he.xb)(o.target.value)})},"data-attr":"dashboard-name-input",className:"ph-ignore-input"})),e.a.createElement(f.a.Item,{name:"description",label:"Description"},e.a.createElement(ve.a,{onChange:function(o){return u.setFieldsValue({description:o.target.value})},"data-attr":"dashboard-description-input",className:"ph-ignore-input"})),e.a.createElement(f.a.Item,{name:"useTemplate",label:"Template"},e.a.createElement(J.a,{value:u.getFieldValue("useTemplate"),onChange:function(o){return u.setFieldsValue({useTemplate:o})},placeholder:"Optionally start from template",allowClear:!0,options:{DEFAULT_APP:{label:"Website","data-attr":"dashboard-select-default-app"}},type:"stealth",outlined:!0,style:{width:"100%"},"data-attr":"copy-from-template"})),e.a.createElement(f.a.Item,{name:"restrictionLevel",label:"Collaboration settings",rules:[{required:!0,message:"Restriction level needs to be specified."}]},e.a.createElement(ge.a,{feature:D.c.DASHBOARD_PERMISSIONING},e.a.createElement(J.a,{value:u.getFieldValue("restrictionLevel"),onChange:function(o){return u.setFieldsValue({restrictionLevel:o})},options:Ee.a,loading:y,type:"stealth",outlined:!0,style:{width:"100%"}})))))}var Ae=a("./frontend/src/lib/components/PageHeader.tsx"),Oe=a("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),Ce=a("./frontend/src/scenes/userLogic.ts"),L=a("./frontend/src/lib/utils/eventUsageLogic.ts"),N=a("./frontend/src/scenes/urls.ts"),je=a("./frontend/src/lib/components/Spinner/Spinner.tsx"),De=a("./frontend/src/lib/components/LemonTable/index.ts"),Q=a("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),Le=a("./frontend/src/lib/components/LemonButton/More.tsx"),x=a("./frontend/src/scenes/dashboard/dashboardLogic.ts"),X=a("./frontend/src/lib/components/LemonRow/index.ts"),xe=a("./frontend/src/lib/components/Tooltip.tsx"),Te={component:Y,logic:n.b};function Y(){var g=Object(m.useValues)(C.a),d=g.dashboardsLoading,s=Object(m.useActions)(C.a),V=s.deleteDashboard,z=s.unpinDashboard,I=s.pinDashboard,T=s.addDashboard,y=s.duplicateDashboard,A=Object(m.useActions)(n.b),R=A.showNewDashboardModal,u=A.setSearchTerm,h=A.setCurrentTab,o=Object(m.useValues)(n.b),Z=o.dashboards,S=o.searchTerm,E=o.currentTab,Se=Object(m.useValues)(Ce.a),w=Se.hasAvailableFeature,Pe=[{width:0,dataIndex:"pinned",render:function(l,r){var t=r.id;return l?e.a.createElement(ne,{onClick:function(){return z(t,L.a.DashboardsList)},style:{cursor:"pointer"}}):e.a.createElement(se.a,{onClick:function(){return I(t,L.a.DashboardsList)},style:{cursor:"pointer"}})}},{title:"Name",dataIndex:"name",width:"40%",render:function(l,r){var t=r.id,c=r.description,O=r._highlight,Fe=r.is_shared;return e.a.createElement("div",{className:O?"highlighted":void 0,style:{display:"inline-block"}},e.a.createElement("div",{className:"row-name"},e.a.createElement(F.a,{"data-attr":"dashboard-name",to:N.a.dashboard(t)},l||"Untitled"),Fe&&e.a.createElement(xe.a,{title:"This dashboard is shared publicly."},e.a.createElement(re,{style:{marginLeft:6}}))),w(D.c.DASHBOARD_COLLABORATION)&&c&&e.a.createElement("span",{className:"row-description"},c))},sorter:function(l,r){var t,c;return((t=l.name)!==null&&t!==void 0?t:"Untitled").localeCompare((c=r.name)!==null&&c!==void 0?c:"Untitled")}}].concat(q()(w(D.c.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function(l){return l?e.a.createElement(Oe.a,{tags:l,staticOnly:!0}):null}}]:[]),[Object(Q.b)(),Object(Q.a)(),{width:0,render:function(l,r){var t=r.id,c=r.name;return e.a.createElement(Le.a,{overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(p.a,{type:"stealth",to:N.a.dashboard(t),onClick:function(){Object(x.c)({id:t}).mount(),Object(x.c)({id:t}).actions.setDashboardMode(null,L.a.DashboardsList)},fullWidth:!0},"View"),e.a.createElement(p.a,{type:"stealth",to:N.a.dashboard(t),onClick:function(){Object(x.c)({id:t}).mount(),Object(x.c)({id:t}).actions.setDashboardMode(D.e.Edit,L.a.DashboardsList)},fullWidth:!0},"Edit"),e.a.createElement(p.a,{type:"stealth",onClick:function(){return y({id:t,name:c})},fullWidth:!0},"Duplicate"),e.a.createElement(X.b,null),e.a.createElement(p.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return V({id:t,redirect:!1})},fullWidth:!0},"Delete dashboard"))})}}]);return e.a.createElement("div",null,e.a.createElement(ye,null),e.a.createElement(Ae.a,{title:"Dashboards",buttons:e.a.createElement(_.a,{"data-attr":"new-dashboard",onClick:R,type:"primary",icon:e.a.createElement(de.a,null)},"New Dashboard")}),e.a.createElement(j.a,{activeKey:E,style:{borderColor:"#D9D9D9"},onChange:function(l){return h(l)}},e.a.createElement(j.a.TabPane,{tab:"All Dashboards",key:n.a.All}),e.a.createElement(j.a.TabPane,{tab:"Pinned",key:n.a.Pinned}),e.a.createElement(j.a.TabPane,{tab:"Shared",key:n.a.Shared})),e.a.createElement("div",null,e.a.createElement(H.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for dashboards",style:{width:240},value:S,onChange:function(l){u(l.target.value)}})),e.a.createElement(X.b,{large:!0}),d?e.a.createElement("div",{className:"flex-center",style:{flexDirection:"column"}},e.a.createElement(je.a,null),e.a.createElement("div",{className:"mt"},e.a.createElement("b",null,"Loading dashboards"))):Z.length>0||S||E!==n.a.All?e.a.createElement(De.a,{dataSource:Z,rowKey:"id",columns:Pe,defaultSorting:{columnKey:"name",order:1},emptyState:S?"No ".concat(E===n.a.Pinned?"pinned ":E===n.a.Shared?"shared ":"",'dashboards matching "').concat(S,'"!'):E===n.a.Pinned?e.a.createElement(e.a.Fragment,null,"No dashboards have been pinned for quick access yet."," ",e.a.createElement(F.a,{onClick:function(){return h(n.a.All)}},"Go to All Dashboards to pin one.")):E===n.a.Shared?e.a.createElement(e.a.Fragment,null,"No dashboards have been shared yet."," ",e.a.createElement(F.a,{onClick:function(){return h(n.a.All)}},"Go to All Dashboards to share one.")):void 0,nouns:["dashboard","dashboards"]}):e.a.createElement("div",{className:"mt"},e.a.createElement("p",null,"Create your first dashboard:"),e.a.createElement(ee.a,{gutter:[16,16]},e.a.createElement(B.a,{xs:24,xl:6},e.a.createElement(U.a,{title:"Empty",size:"small",style:{cursor:"pointer"},onClick:function(){return T({name:"New Dashboard",show:!0,useTemplate:""})}},e.a.createElement("div",{style:{textAlign:"center",fontSize:40}},e.a.createElement(K,null)))),e.a.createElement(B.a,{xs:24,xl:6},e.a.createElement(U.a,{title:"App Default",size:"small",style:{cursor:"pointer"},onClick:function(){return T({name:"Web App Dashboard",show:!0,useTemplate:"DEFAULT_APP"})}},e.a.createElement("div",{style:{textAlign:"center",fontSize:40}},e.a.createElement(K,null)))))))}}}]);
