(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(I,m,e){"use strict";e.d(m,"b",function(){return s}),e.d(m,"a",function(){return g});var v=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),r=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),O=e("./frontend/src/scenes/urls.ts"),b=e("./frontend/src/lib/components/Tooltip.tsx"),_=e("./frontend/src/lib/components/icons.tsx"),C=e("./frontend/src/lib/components/TitleWithIcon.tsx"),S=e("./frontend/src/lib/constants.tsx"),T=e("./frontend/src/lib/logic/featureFlagLogic.ts"),a=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),d=e.n(a);let s;(function(n){n.Actions="actions",n.EventDefinitions="events",n.EventPropertyDefinitions="properties",n.IngestionWarnings="warnings"})(s||(s={}));const y={[s.EventPropertyDefinitions]:O.a.eventPropertyDefinitions(),[s.EventDefinitions]:O.a.eventDefinitions(),[s.Actions]:O.a.actions(),[s.IngestionWarnings]:O.a.ingestionWarnings()},P=Object(v.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[T.a,["featureFlags"]]},actions:{setTab:n=>({tab:n})},reducers:{tab:[s.EventDefinitions,{setTab:(n,f)=>{let{tab:p}=f;return p}}]},selectors:{showWarningsTab:[n=>[n.featureFlags],n=>!!n[S.i.INGESTION_WARNINGS_ENABLED]]},actionToUrl:()=>({setTab:n=>{let{tab:f}=n;return y[f]||O.a.events()}}),urlToAction:n=>{let{actions:f,values:p}=n;return Object.fromEntries(Object.entries(y).map(E=>{let[x,h]=E;return[h,()=>{p.tab!==x&&f.setTab(x)}]}))}});function g(n){let{tab:f}=n;const{showWarningsTab:p}=Object(v.useValues)(P),{setTab:E}=Object(v.useActions)(P);return Object(a.jsxs)(r.a,{tabPosition:"top",animated:!1,activeKey:f,onTabClick:x=>E(x),children:[Object(a.jsx)(r.a.TabPane,{tab:Object(a.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},s.EventDefinitions),Object(a.jsx)(r.a.TabPane,{tab:Object(a.jsx)(C.a,{icon:Object(a.jsx)(b.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(a.jsx)(_.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},s.Actions),Object(a.jsx)(r.a.TabPane,{tab:Object(a.jsx)(C.a,{icon:Object(a.jsx)(b.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(a.jsx)(_.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},s.EventPropertyDefinitions),p&&Object(a.jsx)(r.a.TabPane,{tab:Object(a.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},s.IngestionWarnings)]})}try{g.displayName="DataManagementPageTabs",g.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:g.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(n){}},"./frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx":function(I,m,e){"use strict";e.d(m,"a",function(){return y});var v=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),r=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),O=e.n(r),b=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),_=e("./frontend/src/lib/components/LemonTable/index.ts"),C=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),S=e("./frontend/src/scenes/organizationLogic.tsx"),T=e("./frontend/src/lib/utils.tsx"),a=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),d=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),s=e.n(d);function y(P){var g,n,f,p,E,x,h,A;let{definition:i}=P;const{loadPropertiesForEvent:W}=Object(v.useActions)(b.c),{eventPropertiesCacheMap:o,eventDefinitionPropertiesLoading:N}=Object(v.useValues)(b.c),{hasDashboardCollaboration:B,hasIngestionTaxonomy:t}=Object(v.useValues)(S.a);Object(r.useEffect)(()=>{W(i)},[]);const K=[{title:"Property",key:"property",className:"definition-column-name",render:function(D,l){return Object(d.jsx)(a.b,{definition:l,event:i,hideIcon:!0,asLink:!0})}},{title:"Type",key:"type",className:"definition-column-type",render:function(D,l){return l.property_type?Object(d.jsx)("div",{className:"definition-pill-value",style:{textTransform:"uppercase"},children:l.property_type}):Object(d.jsx)("span",{className:"text-muted",children:"\u2014"})}},...B?[{title:"Tags",key:"tags",render:function(D,l){var L;return Object(d.jsx)(C.a,{tags:(L=l.tags)!==null&&L!==void 0?L:[],staticOnly:!0})}}]:[],...t?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(D,l){return l.query_usage_30_day?Object(T.R)(l.query_usage_30_day):Object(d.jsx)("span",{className:"text-muted",children:"\u2014"})}}]:[],{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(D,l){return l.example?Object(d.jsx)("div",{className:"definition-pill-value",style:{fontFamily:"monospace"},children:l.example}):Object(d.jsx)("span",{className:"text-muted",children:"\u2014"})}}];return Object(d.jsxs)("div",{className:"event-properties-wrapper",children:[Object(d.jsx)("span",{className:"event-properties-header",children:"Top properties"}),Object(d.jsx)("p",{className:"event-properties-subtext",children:"Please note that description and tags are shared across events. Posthog properties are excluded from this list."}),Object(d.jsx)(_.a,{id:`event-properties-definition-table-${i.id}`,"data-attr":"event-properties-definition-nested-table",columns:K,className:`event-properties-definition-table-${i.id}`,dataSource:(g=o==null||(n=o[i.id])===null||n===void 0?void 0:n.results)!==null&&g!==void 0?g:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:b.b,currentPage:(f=o==null||(p=o[i.id])===null||p===void 0?void 0:p.page)!==null&&f!==void 0?f:1,entryCount:(E=o==null||(x=o[i.id])===null||x===void 0?void 0:x.count)!==null&&E!==void 0?E:0,onForward:o!=null&&(h=o[i.id])!==null&&h!==void 0&&h.next?()=>{W(i,o[i.id].next)}:void 0,onBackward:o!=null&&(A=o[i.id])!==null&&A!==void 0&&A.previous?()=>{W(i,o[i.id].previous)}:void 0},loading:N.includes(i.id)})]})}try{y.displayName="EventDefinitionProperties",y.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:y.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(P){}},"./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx":function(I,m,e){"use strict";e.r(m),e.d(m,"scene",function(){return R}),e.d(m,"EventDefinitionsTable",function(){return D});var v=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),r=e.n(v),O=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),b=e.n(O),_={};_.insert="head",_.singleton=!1;var C=r()(b.a,_),S=b.a.locals||{},T=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),a=e("./frontend/src/lib/components/LemonTable/index.ts"),d=e("./frontend/src/types.ts"),s=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),y=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),P=e("./frontend/src/scenes/organizationLogic.tsx"),g=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),n=e("./frontend/src/lib/utils.tsx"),f=e("./frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx"),p=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),E=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),x=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),h=e("./frontend/src/lib/components/DefinitionPopup/DefinitionPopupContents.tsx"),A=e("./frontend/src/lib/components/PageHeader.tsx"),i=e("./frontend/@posthog/lemon-ui/src/index.ts"),W=e("./frontend/src/lib/components/LemonButton/More.tsx"),o=e("./frontend/src/scenes/urls.ts"),N=e("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),B=e("./frontend/src/lib/components/icons.tsx"),t=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const K=[{value:d.q.Event,label:"All events","data-attr":"event-type-option-event"},{value:d.q.EventCustom,label:"Custom events","data-attr":"event-type-option-event-custom"},{value:d.q.EventPostHog,label:"PostHog events","data-attr":"event-type-option-event-posthog"}],R={component:D,logic:s.c,paramsToProps:()=>({syncWithUrl:!0})};function D(){var l,L;const{preflight:U}=Object(T.useValues)(x.a),{eventDefinitions:j,eventDefinitionsLoading:$,filters:V}=Object(T.useValues)(s.c),{loadEventDefinitions:H,setFilters:z}=Object(T.useActions)(s.c),{hasDashboardCollaboration:Y,hasIngestionTaxonomy:G}=Object(T.useValues)(P.a),J=[{key:"icon",className:"definition-column-icon",render:function(M,c){return Object(t.jsx)(g.a,{definition:c,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(M,c){return Object(t.jsx)(g.a,{definition:c,hideIcon:!0,asLink:!0})},sorter:!0},...Y?[{title:"Tags",key:"tags",render:function(M,c){var F;return Object(t.jsx)(y.a,{tags:(F=c.tags)!==null&&F!==void 0?F:[],staticOnly:!0})}}]:[],...G?[{title:Object(t.jsx)(h.c,{tooltipPlacement:"bottom"}),key:"volume_30_day",align:"right",render:function(M,c){return c.volume_30_day?Object(n.R)(c.volume_30_day):Object(t.jsx)("span",{className:"text-muted",children:"\u2014"})},sorter:!0},{title:Object(t.jsx)(h.b,{tooltipPlacement:"bottom"}),key:"query_usage_30_day",align:"right",render:function(M,c){return c.query_usage_30_day?Object(n.R)(c.query_usage_30_day):Object(t.jsx)("span",{className:"text-muted",children:"\u2014"})},sorter:!0}]:[],{key:"actions",width:0,render:function(M,c){return Object(t.jsx)(W.a,{"data-attr":`event-definitions-table-more-button-${c.name}`,overlay:Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(i.LemonButton,{status:"stealth",to:Object(N.combineUrl)(o.a.sessionRecordings(),{filters:{events:[{id:c.name,type:"events",order:0,name:c.name}]}}).url,fullWidth:!0,sideIcon:Object(t.jsx)(B.IconPlayCircle,{}),"data-attr":"event-definitions-table-view-recordings",children:"View recordings"})})})}}];return Object(t.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(t.jsx)(A.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),U&&!(U!=null&&U.is_event_property_usage_enabled)&&Object(t.jsx)(E.a,{}),Object(t.jsx)(p.a,{tab:p.b.EventDefinitions}),Object(t.jsxs)("div",{className:"flex justify-between items-center gap-2 mb-4",children:[Object(t.jsx)(i.LemonInput,{type:"search",placeholder:"Search for events",onChange:u=>z({event:u||""}),value:V.event}),Object(t.jsxs)("div",{className:"flex items-center gap-2",children:[Object(t.jsx)("span",{children:"Type:"}),Object(t.jsx)(i.LemonSelect,{value:V.event_type,options:K,"data-attr":"event-type-filter",dropdownMatchSelectWidth:!1,onChange:u=>{z({event_type:u})},size:"small"})]})]}),Object(t.jsx)(a.a,{columns:J,className:"events-definition-table","data-attr":"events-definition-table",loading:$,rowKey:"id",pagination:{controlled:!0,currentPage:(l=j==null?void 0:j.page)!==null&&l!==void 0?l:1,entryCount:(L=j==null?void 0:j.count)!==null&&L!==void 0?L:0,pageSize:s.a,onForward:j.next?()=>{H(j.next)}:void 0,onBackward:j.previous?()=>{H(j.previous)}:void 0},onSort:u=>z({ordering:u?`${u.order===-1?"-":""}${u.columnKey}`:void 0}),expandable:{expandedRowRender:function(M){return Object(t.jsx)(f.a,{definition:M})},rowExpandable:()=>!0,noIndent:!0},dataSource:j.results,useURLForSorting:!1,emptyState:"No event definitions",nouns:["event","events"]})]})}},"./frontend/src/scenes/events/UsageDisabledWarning.tsx":function(I,m,e){"use strict";e.d(m,"a",function(){return b});var v=e("./frontend/src/lib/components/AlertMessage/index.ts"),r=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),O=e.n(r);function b(){return Object(r.jsxs)(v.a,{type:"info",children:[Object(r.jsx)("div",{className:"text-base mb-1",children:"Event usage information is not enabled for your instance."}),Object(r.jsxs)("p",{className:"font-normal",children:["You will still see the list of events and properties, but usage information will be unavailable. If you want to enable event usage please set the follow environment variable:"," ",Object(r.jsx)("pre",{style:{display:"inline"},children:"ASYNC_EVENT_PROPERTY_USAGE=1"}),". Please note, enabling this environment variable ",Object(r.jsx)("b",{children:"may increase load considerably in your infrastructure"}),", particularly if you have a large volume of events."]})]})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(I,m,e){var v=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");m=v(!1),m.push([I.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:center;width:30px;font-size:1.5rem}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted{color:var(--muted-alt)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{color:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),I.exports=m}}]);
