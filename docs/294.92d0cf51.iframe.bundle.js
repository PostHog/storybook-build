(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx":function(le,T,e){"use strict";e.d(T,"a",function(){return d});var G=e("./node_modules/core-js/modules/es.array.map.js"),$=e.n(G),Y=e("./node_modules/clsx/dist/clsx.m.js"),O=e("./node_modules/kea/lib/index.esm.js"),X=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),E=e("./frontend/src/lib/components/LemonButton/index.ts"),Z=e("./node_modules/antd/es/popconfirm/index.js"),_=e("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),C=e("./frontend/src/lib/components/LemonRow/index.ts"),R=e("./frontend/src/lib/components/icons.tsx"),w=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),k=e("./node_modules/kea-forms/lib/index.js"),oe=e.n(k),P=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),q=e("./frontend/src/lib/forms/Field.tsx"),n=e("./node_modules/react/jsx-runtime.js"),L=e.n(n);function p(c){var u=c.numberOfResults,o=c.isSearching,v=c.isAddingEntry,a=c.type;return u>0?null:o?Object(n.jsxs)(C.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow",children:["There are no authorized ",a===_.a.RECORDING_DOMAINS?"domains":"URLs"," that match your search."]}):v?null:Object(n.jsx)(C.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow",children:a===_.a.RECORDING_DOMAINS?"No domains are specified, so recordings will be authorized on all domains.":"There are no authorized urls. Add one to get started."})}function f(c){var u=c.actionId,o=c.type,v=Object(_.c)({actionId:u,type:o}),a=Object(O.useValues)(v),A=a.isProposedUrlSubmitting,s=Object(O.useActions)(v),r=s.cancelProposingUrl;return Object(n.jsxs)(k.Form,{logic:_.c,props:{actionId:u,type:o},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2",children:[Object(n.jsx)(q.a,{name:"url",children:Object(n.jsx)(P.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})}),Object(n.jsxs)("div",{className:"flex justify-end gap-2",children:[Object(n.jsx)(E.a,{type:"secondary",onClick:r,children:"Cancel"}),Object(n.jsx)(E.a,{htmlType:"submit",type:"primary",disabled:A,"data-attr":"url-save",children:"Save"})]})]})}function d(c){var u=c.actionId,o=c.type,v=c.addText,a=v===void 0?"Add":v,A=Object(_.c)({actionId:u,type:o}),s=Object(O.useValues)(A),r=s.urlsKeyed,t=s.suggestionsLoading,B=s.searchTerm,g=s.launchUrl,i=s.editUrlIndex,b=s.isAddUrlFormVisible,h=s.onlyAllowDomains,m=Object(O.useActions)(A),D=m.addUrl,M=m.removeUrl,W=m.setSearchTerm,S=m.newUrl,re=m.setEditUrlIndex;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"flex items-center mb-4 gap-2 justify-between",children:[Object(n.jsx)(P.a,{type:"search",placeholder:"Search for authorized ".concat(h?"domains":"URLs"),onChange:W,value:B}),Object(n.jsx)(E.a,{onClick:S,type:"secondary",icon:Object(n.jsx)(R.IconPlus,{}),"data-attr":"toolbar-add-url",children:a})]}),t?Object(n.jsx)(C.a,{outlined:!0,fullWidth:!0,size:"large",children:Object(n.jsx)(w.a,{className:"text-xl"})},-1):Object(n.jsxs)("div",{className:"space-y-2",children:[b&&Object(n.jsx)(C.a,{outlined:!0,fullWidth:!0,size:"large",children:Object(n.jsx)(f,{type:o,actionId:u})}),Object(n.jsx)(p,{numberOfResults:r.length,isSearching:B.length>0,isAddingEntry:b,type:o}),r.map(function(x,H){return Object(n.jsx)("div",{className:Object(Y.a)("border rounded flex items-center py-2 px-4 min-h-14"),children:i===H?Object(n.jsx)(f,{type:o,actionId:u}):Object(n.jsxs)(n.Fragment,{children:[x.type==="suggestion"&&Object(n.jsx)(X.a,{type:"highlight",className:"mr-4 uppercase",children:"Suggestion"}),Object(n.jsx)("span",{title:x.url,className:"flex-1 truncate",children:x.url}),Object(n.jsx)("div",{className:"Actions flex space-x-2 shrink-0",children:x.type==="suggestion"?Object(n.jsx)(E.a,{onClick:function(){return D(x.url)},icon:Object(n.jsx)(R.IconPlus,{}),"data-attr":"toolbar-apply-suggestion",children:"Apply suggestion"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(E.a,{icon:Object(n.jsx)(R.IconOpenInApp,{}),to:g(x.url),targetBlank:!0,tooltip:o===_.a.TOOLBAR_URLS?"Launch toolbar":"Launch url",center:!0,className:"ActionButton","data-attr":"toolbar-open",children:"Launch"}),Object(n.jsx)(E.a,{icon:Object(n.jsx)(R.IconEdit,{}),onClick:function(){return re(x.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),Object(n.jsx)(Z.a,{placement:"topRight",title:Object(n.jsxs)(n.Fragment,{children:["Are you sure you want to remove this authorized"," ",h?"domain":"URL","?"]}),onConfirm:function(){return M(H)},children:Object(n.jsx)(E.a,{icon:Object(n.jsx)(R.IconDelete,{}),tooltip:"Remove ".concat(h?"domain":"URL"),center:!0,className:"ActionButton"})})]})})]})},H)})]})]})}try{d.displayName="AuthorizedUrlList",d.__docgenInfo={description:"",displayName:"AuthorizedUrlList",props:{actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"TOOLBAR_URLS"'},{value:'"RECORDING_DOMAINS"'}]}},addText:{defaultValue:{value:"Add"},description:"",name:"addText",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"]={docgenInfo:d.__docgenInfo,name:"AuthorizedUrlList",path:"frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"})}catch(c){}},"./frontend/src/scenes/actions/ActionsTable.tsx":function(le,T,e){"use strict";e.r(T),e.d(T,"scene",function(){return be}),e.d(T,"ActionsTable",function(){return de});var G=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),$=e.n(G),Y=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),O=e.n(Y),X=e("./node_modules/core-js/modules/es.array.map.js"),E=e("./node_modules/core-js/modules/es.regexp.exec.js"),Z=e("./node_modules/core-js/modules/es.string.search.js"),_=e("./node_modules/core-js/modules/es.array.concat.js"),C=e("./node_modules/core-js/modules/es.function.name.js"),R=e("./node_modules/core-js/modules/es.array.slice.js"),w=e("./node_modules/core-js/modules/es.number.constructor.js"),k=e("./node_modules/core-js/modules/es.array.filter.js"),oe=e("./node_modules/core-js/modules/es.object.to-string.js"),P=e("./node_modules/react/index.js"),q=e("./frontend/src/scenes/actions/Actions.scss"),n=e("./frontend/src/lib/components/Link.tsx"),L=e("./node_modules/antd/es/radio/index.js"),p=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),f=e("./frontend/src/lib/utils.tsx"),d=e("./node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/models/actionsModel.ts"),u=e("./node_modules/kea-router/lib/index.js"),o=e("./frontend/src/scenes/urls.ts"),v=e("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),a=e("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),A=e("./frontend/src/lib/components/icons.tsx"),s=e("./frontend/src/lib/components/LemonButton/index.ts"),r=e("./frontend/@posthog/lemon-ui/src/index.ts"),t=e("./node_modules/react/jsx-runtime.js");function B(){var te=Object(P.useState)(!1),I=O()(te,2),N=I[0],K=I[1],ie=Object(P.useState)(!1),ne=O()(ie,2),se=ne[0],z=ne[1];return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(s.a,{type:"primary",onClick:function(){return K(!0)},"data-attr":"create-action",children:"New action"}),Object(t.jsx)(r.LemonModal,{isOpen:N,onClose:function(){K(!1),z(!1)},title:"Create new action",footer:Object(t.jsxs)(t.Fragment,{children:[se&&Object(t.jsx)(s.a,{type:"secondary",onClick:function(){return z(!1)},children:"Back"},"back-button"),Object(t.jsx)(s.a,{type:"secondary",onClick:function(){K(!1),z(!1)},children:"Cancel"},"cancel-button")]}),children:se?Object(t.jsx)("div",{style:{maxWidth:"40rem"},children:Object(t.jsx)(v.a,{type:a.a.TOOLBAR_URLS})}):Object(t.jsxs)("div",{className:"space-y-2",children:[Object(t.jsx)(s.a,{type:"secondary",icon:Object(t.jsx)(A.IconMagnifier,{}),onClick:function(){return z(!0)},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect",children:"Inspect element on your site"}),Object(t.jsx)(s.a,{type:"secondary",icon:Object(t.jsx)(A.IconEdit,{}),onClick:function(){u.router.actions.push(o.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview",children:"From event or pageview"})]})})]})}var g=e("./frontend/src/types.ts"),i=e("./node_modules/fuse.js/dist/fuse.esm.js"),b=e("./frontend/src/scenes/userLogic.ts"),h=e("./frontend/src/scenes/teamLogic.tsx"),m=e("./frontend/src/lib/api.ts"),D=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),M=e("./frontend/src/lib/components/LemonTable/index.ts"),W=e("./frontend/src/lib/components/LemonDivider/index.ts"),S=e("./frontend/src/lib/components/LemonButton/More.tsx"),re=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),x=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),H=e("./frontend/src/lib/components/PageHeader.tsx"),ee=Object(d.kea)([Object(d.path)(["scenes","actions","actionsLogic"]),Object(d.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Data Management",path:o.a.eventDefinitions()},{name:"Actions",path:o.a.actions()}]}]})]),Oe=function(I,N){return new i.a(I,{keys:["name","url"],threshold:.3}).search(N).map(function(K){return K.item})},be={component:de,logic:ee};function de(){var te=Object(d.useValues)(h.a),I=te.currentTeam,N=Object(d.useValues)(Object(c.a)({params:"include_count=1"})),K=N.actions,ie=N.actionsLoading,ne=Object(d.useActions)(c.a),se=ne.loadActions,z=Object(P.useState)(""),U=O()(z,2),ae=U[0],he=U[1],fe=Object(P.useState)(!1),ue=O()(fe,2),me=ue[0],ve=ue[1],je=Object(d.useValues)(b.a),ce=je.user,ge=je.hasAvailableFeature,xe=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(l,j){return(l.name||"").localeCompare(j.name||"")},render:function(l,j,F){return Object(t.jsx)(n.a,{"data-attr":"action-link-"+F,to:o.a.action(j.id),className:"row-name",children:l||Object(t.jsx)("i",{children:"Unnamed action"})})}}].concat($()(ge(g.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(l){return Object(t.jsx)(re.a,{tags:l,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(l,j){var F;return Object(t.jsx)("span",{children:(F=j.steps)!==null&&F!==void 0&&F.length?j.steps.map(function(Q){return Object(t.jsx)("div",{children:function(){var V=Object(f.Cb)(Q.url||"");switch(V=V.slice(0,40)+(V.length>40?"...":""),Q.event){case"$autocapture":return"Autocapture";case"$pageview":switch(Q.url_matching){case"regex":return Object(t.jsxs)(t.Fragment,{children:["Page view URL matches regex ",Object(t.jsx)("strong",{children:V})]});case"exact":return Object(t.jsxs)(t.Fragment,{children:["Page view URL matches exactly ",Object(t.jsx)("strong",{children:V})]});default:return Object(t.jsxs)(t.Fragment,{children:["Page view URL contains ",Object(t.jsx)("strong",{children:V})]})}default:return Object(t.jsxs)(t.Fragment,{children:["Event: ",Object(t.jsx)("strong",{children:Q.event})]})}}()},Q.id)}):Object(t.jsx)("i",{children:"Empty \u2013 set this action up"})})}},Object(D.b)(),Object(D.a)()],$()(I!=null&&I.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(l,j){return Number(l.post_to_slack)-Number(j.post_to_slack)},render:function(l){return l?Object(t.jsx)(p.a,{}):null}}]:[]),[{width:0,render:function(l,j){return Object(t.jsx)(S.a,{overlay:Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(s.a,{status:"stealth",to:o.a.action(j.id),fullWidth:!0,children:"Edit"}),Object(t.jsx)(s.a,{status:"stealth",to:Object(u.combineUrl)(o.a.sessionRecordings(),{filters:{actions:[{id:j.id,type:"actions",order:0,name:j.name}]}}).url,sideIcon:Object(t.jsx)(A.IconPlayCircle,{}),fullWidth:!0,"data-attr":"action-table-view-recordings",children:"View recordings"}),Object(t.jsx)(s.a,{status:"stealth",to:Object(u.combineUrl)(o.a.insightNew({insight:g.E.TRENDS,interval:"day",display:g.j.ActionsLineGraph,actions:[{id:j.id,name:j.name,type:"actions",order:0}]})).url,fullWidth:!0,children:"Try out in Insights"}),Object(t.jsx)(W.a,{}),Object(t.jsx)(s.a,{status:"danger",onClick:function(){return Object(f.x)({endpoint:m.b.actions.determineDeleteEndpoint(),object:j,callback:se})},fullWidth:!0,children:"Delete action"})]})})}}]),J=K;return ae&&ae!==""&&(J=Oe(J,ae)),me&&(J=J.filter(function(y){var l;return((l=y.created_by)===null||l===void 0?void 0:l.uuid)===(ce==null?void 0:ce.uuid)})),Object(t.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(t.jsx)(H.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0,buttons:Object(t.jsx)(B,{})}),Object(t.jsx)(x.a,{tab:x.b.Actions}),Object(t.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4",children:[Object(t.jsx)(r.LemonInput,{type:"search",placeholder:"Search for actions",onChange:he,value:ae}),Object(t.jsxs)(L.a.Group,{buttonStyle:"solid",value:me,onChange:function(l){return ve(l.target.value)},children:[Object(t.jsx)(L.a.Button,{value:!1,children:"All actions"}),Object(t.jsx)(L.a.Button,{value:!0,children:"My actions"})]})]}),Object(t.jsx)(M.a,{columns:xe,loading:ie,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:J,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."})]})}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(le,T,e){"use strict";e.d(T,"b",function(){return r}),e.d(T,"a",function(){return g});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),$=e.n(G),Y=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),O=e.n(Y),X=e("./node_modules/core-js/modules/es.array.iterator.js"),E=e.n(X),Z=e("./node_modules/core-js/modules/es.object.to-string.js"),_=e.n(Z),C=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),R=e.n(C),w=e("./node_modules/core-js/modules/es.object.from-entries.js"),k=e.n(w),oe=e("./node_modules/core-js/modules/es.array.map.js"),P=e.n(oe),q=e("./node_modules/core-js/modules/es.object.entries.js"),n=e.n(q),L=e("./node_modules/kea/lib/index.esm.js"),p=e("./node_modules/antd/es/tabs/index.js"),f=e("./frontend/src/scenes/urls.ts"),d=e("./frontend/src/lib/components/Tooltip.tsx"),c=e("./frontend/src/lib/components/icons.tsx"),u=e("./frontend/src/lib/components/TitleWithIcon.tsx"),o=e("./frontend/src/lib/constants.tsx"),v=e("./frontend/src/lib/logic/featureFlagLogic.ts"),a=e("./node_modules/react/jsx-runtime.js"),A=e.n(a),s,r;(function(i){i.Actions="actions",i.EventDefinitions="events",i.EventPropertyDefinitions="properties",i.IngestionWarnings="warnings"})(r||(r={}));var t=(s={},O()(s,r.EventPropertyDefinitions,f.a.eventPropertyDefinitions()),O()(s,r.EventDefinitions,f.a.eventDefinitions()),O()(s,r.Actions,f.a.actions()),O()(s,r.IngestionWarnings,f.a.ingestionWarnings()),s),B=Object(L.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[v.a,["featureFlags"]]},actions:{setTab:function(b){return{tab:b}}},reducers:{tab:[r.EventDefinitions,{setTab:function(b,h){var m=h.tab;return m}}]},selectors:{showWarningsTab:[function(i){return[i.featureFlags]},function(i){return!!i[o.h.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(h){var m=h.tab;return t[m]||f.a.events()}}},urlToAction:function(b){var h=b.actions,m=b.values;return Object.fromEntries(Object.entries(t).map(function(D){var M=$()(D,2),W=M[0],S=M[1];return[S,function(){m.tab!==W&&h.setTab(W)}]}))}});function g(i){var b=i.tab,h=Object(L.useValues)(B),m=h.showWarningsTab,D=Object(L.useActions)(B),M=D.setTab;return Object(a.jsxs)(p.a,{tabPosition:"top",animated:!1,activeKey:b,onTabClick:function(S){return M(S)},children:[Object(a.jsx)(p.a.TabPane,{tab:Object(a.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},r.EventDefinitions),Object(a.jsx)(p.a.TabPane,{tab:Object(a.jsx)(u.a,{icon:Object(a.jsx)(d.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(a.jsx)(c.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},r.Actions),Object(a.jsx)(p.a.TabPane,{tab:Object(a.jsx)(u.a,{icon:Object(a.jsx)(d.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(a.jsx)(c.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},r.EventPropertyDefinitions),m&&Object(a.jsx)(p.a.TabPane,{tab:Object(a.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},r.IngestionWarnings)]})}try{g.displayName="DataManagementPageTabs",g.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:g.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(i){}}}]);
