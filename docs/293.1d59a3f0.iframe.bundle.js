(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(z,v,e){"use strict";e.r(v),e.d(v,"SessionsRecordings",function(){return B}),e.d(v,"scene",function(){return j});var P=e("./frontend/src/lib/components/PageHeader.tsx"),H=e("./frontend/src/scenes/teamLogic.tsx"),F=e("./node_modules/kea/lib/index.esm.js"),G=e("./frontend/src/scenes/urls.ts"),y=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),Y=e("./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx"),L=e("./frontend/src/types.ts"),N=e("./node_modules/antd/es/row/index.js"),J=e("./node_modules/antd/es/space/index.js"),W=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),g=e("./frontend/src/lib/components/Popup/Popup.tsx"),Z=e("./node_modules/core-js/modules/es.array.slice.js"),A=e("./node_modules/core-js/modules/es.array.iterator.js"),T=e("./node_modules/core-js/modules/es.object.to-string.js"),D=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),h=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),b;(function(o){o.SECONDS="seconds",o.MINUTES="minutes",o.HOURS="hours"})(b||(b={}));var C=Object(F.kea)({path:function(t){return["scenes","session-recordings","DurationFilterLogic",t]},key:function(t){return t.pageKey||"global"},props:{},actions:{setValue:function(t){return{value:t}},setIsOpen:function(t){return{isOpen:t}},setOperator:function(t){return{operator:t}}},reducers:function(t){var a,l,i=t.props;return{operator:[i==null||(a=i.initialFilter)===null||a===void 0?void 0:a.operator,{setOperator:function(u,c){var r=c.operator;return r}}],value:[i==null||(l=i.initialFilter)===null||l===void 0?void 0:l.value,{setValue:function(u,c){var r=c.value;return r}}],isOpen:[!1,{setIsOpen:function(u,c){var r=c.isOpen;return r}}]}},selectors:{durationString:[function(o){return[o.operator,o.value]},function(o,t){var a="";o===L.N.GreaterThan?a+="> ":a+="< ";var l=Object(h.b)(t||0);return a+=l.timeValue||0,l.timeValue===1?a+=" "+l.unit.slice(0,-1):a+=" "+l.unit,a}]},listeners:function(t){var a=t.props,l=t.values,i=function(u){var c=u.value,r=u.operator;a.onChange({operator:r||l.operator,value:c||l.value||0,type:"recording",key:"duration"})};return{setValue:function(u){var c=u.value;return i({value:c})},setOperator:function(u){var c=u.operator;return i({operator:c})}}}}),I=e("./frontend/@posthog/lemon-ui/src/index.ts"),n=e("./node_modules/react/jsx-runtime.js");function p(o){var t=o.initialFilter,a=o.onChange,l=o.pageKey,i=C({initialFilter:t,onChange:a,pageKey:l}),d=Object(F.useActions)(i),u=d.setValue,c=d.setIsOpen,r=d.setOperator,x=Object(F.useValues)(i),V=x.durationString,Q=x.value,M=x.operator,$=x.isOpen;return Object(n.jsx)(g.a,{visible:$,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return c(!1)},overlay:Object(n.jsx)(N.a,{children:Object(n.jsxs)(J.b,{children:[Object(n.jsx)(W.a,{operator:M,operators:[L.N.GreaterThan,L.N.LessThan],onChange:function(K){r(K)}}),Object(n.jsx)(h.a,{onChange:u,initialValue:Q||0})]})}),children:Object(n.jsx)(I.LemonButton,{type:"secondary",status:"stealth",size:"small",onClick:function(){c(!0)},children:V})})}try{p.displayName="DurationFilter",p.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"]={docgenInfo:p.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"})}catch(o){}var E=e("./frontend/src/lib/utils/eventUsageLogic.ts"),O=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),R=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),U=e("./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx");function S(o){var t=o.personUUID,a=o.isPersonPage,l=a===void 0?!1:a,i=Object(y.b)({personUUID:t}),d=Object(F.useValues)(i),u=d.fromDate,c=d.toDate,r=d.durationFilter,x=Object(F.useActions)(i),V=x.setDateRange,Q=x.setDurationFilter,M=x.reportRecordingsListFilterAdded;return Object(n.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-4",children:[Object(n.jsx)(U.b,{personUUID:t,isPersonPage:l}),Object(n.jsxs)("div",{className:"flex items-center gap-4",children:[Object(n.jsx)(O.a,{dateFrom:u!=null?u:"-7d",dateTo:c!=null?c:void 0,onChange:function(m,K){M(E.d.DateRange),V(m!=null?m:void 0,K!=null?K:void 0)},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]}),Object(n.jsxs)("div",{className:"flex gap-2",children:[Object(n.jsx)(R.a,{children:"Duration"}),Object(n.jsx)(p,{onChange:function(m){M(E.d.Duration),Q(m)},initialFilter:r,pageKey:l?"person-".concat(t):"session-recordings"})]})]})]})}try{S.displayName="SessionRecordingsTopBar",S.__docgenInfo={description:"",displayName:"SessionRecordingsTopBar",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsTopBar.tsx#SessionRecordingsTopBar"]={docgenInfo:S.__docgenInfo,name:"SessionRecordingsTopBar",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsTopBar.tsx#SessionRecordingsTopBar"})}catch(o){}var s=e("./frontend/src/lib/components/AlertMessage/index.ts");function B(){var o=Object(F.useValues)(H.a),t=o.currentTeam;return Object(n.jsxs)("div",{children:[Object(n.jsx)(P.a,{title:Object(n.jsx)("div",{children:"Recordings"})}),t&&!(t!=null&&t.session_recording_opt_in)?Object(n.jsx)("div",{className:"mb-4",children:Object(n.jsxs)(s.a,{type:"info",children:["Session recordings are currently disabled for this project. To use this feature, please go to your ",Object(n.jsx)(I.Link,{to:"".concat(G.a.projectSettings(),"#recordings"),children:"project settings"})," and enable it."]})}):null,Object(n.jsx)(S,{}),Object(n.jsx)(Y.a,{},"global")]})}var j={component:B,logic:y.b}},"./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx":function(z,v,e){"use strict";e.d(v,"a",function(){return j});var P=e("./node_modules/core-js/modules/es.regexp.exec.js"),H=e("./node_modules/core-js/modules/es.string.split.js"),F=e("./node_modules/core-js/modules/es.array.concat.js"),G=e("./node_modules/core-js/modules/es.array.map.js"),y=e("./node_modules/react/index.js"),Y=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/lib/utils.tsx"),N=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),J=e("./frontend/src/scenes/persons/PersonHeader.tsx"),W=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),g=e.n(W),Z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.scss"),A=e.n(Z),T={};T.insert="head",T.singleton=!1;var D=g()(A.a,T),h=A.a.locals||{},b=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),C=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),I=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),n=e("./frontend/@posthog/lemon-ui/src/index.ts"),p=e("./frontend/src/lib/components/icons.tsx"),E=e("./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx"),O=e("./node_modules/clsx/dist/clsx.m.js"),R=e("./frontend/src/lib/components/Tooltip.tsx"),U=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),S=e("./frontend/src/lib/components/LemonTable/LemonTableLoader.tsx"),s=e("./node_modules/react/jsx-runtime.js"),B=function(t){var a=t.duration,l=Object(L.n)(a),i=l.split(":");return Object(s.jsxs)("span",{className:"flex items-center gap-1",children:[Object(s.jsx)(p.IconSchedule,{className:"text-lg"}),Object(s.jsxs)("span",{children:[Object(s.jsxs)("span",{className:Object(O.a)(i[0]==="00"&&"opacity-50"),children:[i[0],":"]}),Object(s.jsxs)("span",{className:Object(O.a)({"opacity-50":i[0]==="00"&&i[1]==="00"}),children:[i[1],":"]}),i[2]]})]})};function j(o){var t=o.personUUID,a=Object(N.b)({personUUID:t}),l=Object(Y.useValues)(a),i=l.sessionRecordings,d=l.sessionRecordingsResponseLoading,u=l.hasNext,c=l.hasPrev,r=l.activeSessionRecording,x=l.offset,V=Object(Y.useActions)(a),Q=V.setSelectedRecordingId,M=V.loadNext,$=V.loadPrev,m=Object(y.useRef)(null),K=function(k){var X;Q(k.id);var _=m!=null&&(X=m.current)!==null&&X!==void 0&&X.offsetTop?m.current.offsetTop-8:0;window.scrollY>_&&window.scrollTo({left:0,top:_,behavior:"smooth"})},w=x+(d?N.a:i.length),q=w?Object(s.jsxs)("div",{className:"flex items-center gap-1",children:[Object(s.jsx)("span",{children:"".concat(x+1," - ").concat(w)}),Object(s.jsx)(n.LemonButton,{icon:Object(s.jsx)(p.IconChevronLeft,{}),status:"stealth",size:"small",disabled:!c,onClick:function(){$(),window.scrollTo(0,0)}}),Object(s.jsx)(n.LemonButton,{icon:Object(s.jsx)(p.IconChevronRight,{}),status:"stealth",disabled:!u,size:"small",onClick:function(){M(),window.scrollTo(0,0)}})]}):null;return Object(s.jsxs)("div",{ref:m,className:"SessionRecordingsPlaylist","data-attr":"session-recordings-playlist",children:[Object(s.jsxs)("div",{className:"SessionRecordingsPlaylist__left-column space-y-4",children:[Object(s.jsx)(E.a,{personUUID:t}),Object(s.jsxs)("div",{className:"w-full overflow-hidden border rounded",children:[Object(s.jsxs)("div",{className:"relative flex justify-between items-center bg-mid py-3 px-4 border-b",children:[Object(s.jsx)("span",{className:"font-bold uppercase text-xs my-1 tracking-wide",children:"Recent Recordings"}),q,Object(s.jsx)(S.a,{loading:d})]}),i.length?Object(s.jsx)("ul",{className:Object(O.a)(d?"opacity-50":""),children:i.map(function(f,k){return Object(s.jsxs)("li",{className:Object(O.a)("p-2 px-4 cursor-pointer",(r==null?void 0:r.id)===f.id?"bg-primary-highlight font-semibold":"",k!==0&&"border-t"),onClick:function(){return K(f)},children:[Object(s.jsxs)("div",{className:"flex justify-between items-center",children:[Object(s.jsx)("div",{className:"truncate font-medium text-primary ph-no-capture",children:Object(J.b)(f.person,25)}),!f.viewed&&Object(s.jsx)(R.a,{title:"Indicates the recording has not been watched yet",children:Object(s.jsx)("div",{className:"w-2 h-2 rounded bg-primary-light","aria-label":"unwatched-recording-label"})})]}),Object(s.jsxs)("div",{className:"flex justify-between",children:[Object(s.jsx)(b.b,{time:f.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"}),Object(s.jsx)(B,{duration:f.recording_duration})]})]},f.id)})}):d?Object(s.jsx)(s.Fragment,{children:Object(L.ub)(N.a).map(function(f){return Object(s.jsxs)("div",{className:"p-4 space-y-2 border-b",children:[Object(s.jsx)(U.a,{className:"w-1/2"}),Object(s.jsx)(U.a,{className:"w-1/3"})]},f)})}):Object(s.jsx)("p",{className:"text-muted-alt m-4",children:"No matching recordings found"})]}),Object(s.jsxs)("div",{className:"flex justify-between items-center",children:[Object(s.jsx)(n.LemonButton,{icon:Object(s.jsx)(p.IconChevronLeft,{}),type:"secondary",disabled:!c,onClick:function(){$(),window.scrollTo(0,0)},children:"Previous"}),Object(s.jsx)("span",{children:"".concat(x+1," - ").concat(w)}),Object(s.jsx)(n.LemonButton,{icon:Object(s.jsx)(p.IconChevronRight,{}),type:"secondary",disabled:!u,onClick:function(){M(),window.scrollTo(0,0)},children:"Next"})]})]}),Object(s.jsx)("div",{className:"SessionRecordingsPlaylist__right-column",children:r!=null&&r.id?Object(s.jsx)("div",{className:"border rounded h-full",children:Object(s.jsx)(C.a,{playerKey:"playlist",sessionRecordingId:r==null?void 0:r.id,matching:r==null?void 0:r.matching_events,recordingStartTime:r?r.start_time:void 0})}):Object(s.jsx)("div",{className:"mt-20",children:Object(s.jsx)(I.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonTo:"https://posthog.com/docs/user-guides/recordings"})})})]})}try{j.displayName="SessionRecordingsPlaylist",j.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:j.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(o){}},"./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx":function(z,v,e){"use strict";e.d(v,"a",function(){return A}),e.d(v,"b",function(){return T});var P=e("./node_modules/kea/lib/index.esm.js"),H=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),F=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),G=e("./frontend/src/lib/utils/eventUsageLogic.ts"),y=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Y=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),L=e("./frontend/src/lib/components/icons.tsx"),N=e("./frontend/src/lib/components/LemonButton/index.ts"),J=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),W=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),g=e("./node_modules/react/jsx-runtime.js"),Z=e.n(g);function A(D){var h=D.personUUID,b=D.isPersonPage,C=b===void 0?!1:b,I=Object(H.b)({personUUID:h}),n=Object(P.useValues)(I),p=n.entityFilters,E=n.propertyFilters,O=n.filtersEnabled,R=Object(P.useActions)(I),U=R.setEntityFilters,S=R.setPropertyFilters,s=R.reportRecordingsListFilterAdded;return Object(g.jsx)(g.Fragment,{children:O?Object(g.jsxs)("div",{className:"flex-1 border rounded p-4",children:[Object(g.jsxs)("div",{className:"space-y-2",children:[Object(g.jsx)(W.a,{info:"Show recordings where all of the events or actions listed below happen.",children:"Filter by events and actions"}),Object(g.jsx)(F.a,{bordered:!0,filters:p,setFilters:function(j){s(G.d.EventAndAction),U(j)},typeKey:C?"person-".concat(h):"session-recordings",mathAvailability:J.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[y.a.Actions,y.a.Events],propertiesTaxonomicGroupTypes:[y.a.EventProperties,y.a.EventFeatureFlags,y.a.Elements],propertyFiltersPopover:!0})]}),!C&&Object(g.jsxs)("div",{className:"mt-4 space-y-2",children:[Object(g.jsx)(W.a,{info:"Show recordings by persons who match the set criteria",children:"Filter by persons and cohorts"}),Object(g.jsx)(Y.a,{pageKey:C?"person-".concat(h):"session-recordings",taxonomicGroupTypes:[y.a.PersonProperties,y.a.Cohorts],propertyFilters:E,onChange:function(j){s(G.d.PersonAndCohort),S(j)}})]})]}):void 0})}function T(D){var h,b,C=D.personUUID,I=D.isPersonPage,n=Object(H.b)({personUUID:C}),p=Object(P.useValues)(n),E=p.entityFilters,O=p.propertyFilters,R=p.filtersEnabled,U=Object(P.useActions)(n),S=U.setFiltersEnabled,s=(((h=E.actions)===null||h===void 0?void 0:h.length)||0)+(((b=E.events)===null||b===void 0?void 0:b.length)||0)+((O==null?void 0:O.length)||0);return Object(g.jsx)(N.a,{type:"secondary",size:"small",icon:Object(g.jsx)(L.IconWithCount,{count:s,children:Object(g.jsx)(L.IconFilter,{})}),onClick:function(){if(S(!R),I){var j=document.querySelectorAll(".entity-filter-row button");j.length>0&&j[0].click()}},children:R?"Hide filters":"Filter recordings"})}try{A.displayName="SessionRecordingsFilters",A.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"]={docgenInfo:A.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"})}catch(D){}try{T.displayName="SessionRecordingsFiltersToggle",T.__docgenInfo={description:"",displayName:"SessionRecordingsFiltersToggle",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFiltersToggle"]={docgenInfo:T.__docgenInfo,name:"SessionRecordingsFiltersToggle",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFiltersToggle"})}catch(D){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.scss":function(z,v,e){var P=e("./node_modules/css-loader/dist/runtime/api.js");v=P(!1),v.push([z.i,".SessionRecordingsPlaylist{display:flex;flex-direction:column-reverse;gap:1rem;overflow:hidden}@media screen and (min-width:768px){.SessionRecordingsPlaylist{flex-direction:row;justify-content:flex-start}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{flex-shrink:0}@media screen and (min-width:768px){.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{width:30%;min-width:350px;max-width:500px}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column{flex:1;overflow:hidden}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column .SessionRecordingsPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),z.exports=v}}]);
