var vs=Object.defineProperty,_s=Object.defineProperties;var xs=Object.getOwnPropertyDescriptors;var ze=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;var St=(F,f,n)=>f in F?vs(F,f,{enumerable:!0,configurable:!0,writable:!0,value:n}):F[f]=n,y=(F,f)=>{for(var n in f||(f={}))Et.call(f,n)&&St(F,n,f[n]);if(ze)for(var n of ze(f))It.call(f,n)&&St(F,n,f[n]);return F},E=(F,f)=>_s(F,xs(f));var At=(F,f)=>{var n={};for(var m in F)Et.call(F,m)&&f.indexOf(m)<0&&(n[m]=F[m]);if(F!=null&&ze)for(var m of ze(F))f.indexOf(m)<0&&It.call(F,m)&&(n[m]=F[m]);return n};var V=(F,f,n)=>new Promise((m,D)=>{var te=U=>{try{d(n.next(U))}catch(W){D(W)}},g=U=>{try{d(n.throw(U))}catch(W){D(W)}},d=U=>U.done?m(U.value):Promise.resolve(U.value).then(te,g);d((n=n.apply(F,f)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[273],{"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":function(F,f,n){"use strict";n.r(f),n.d(f,"scene",function(){return bs}),n.d(f,"FeatureFlag",function(){return Ee});var m=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),D=n("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),te=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/divider/index.js"),g=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),d=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),U=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/card/index.js"),W=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/skeleton/index.js"),M=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),O=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/popconfirm/index.js"),x=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/radio/index.js"),T=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),v=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),c=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),A=n("./frontend/src/lib/utils.tsx"),L=n("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),S=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LockOutlined.js"),j=n("./frontend/src/types.ts"),R=n("./frontend/src/lib/api.ts"),Q=n("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),k=n("./frontend/src/scenes/urls.ts"),H=n("./frontend/src/scenes/teamLogic.tsx"),se=n("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),ue=n("./frontend/src/models/groupsModel.ts"),pe=n("./frontend/src/lib/components/TaxonomicFilter/types.ts"),We=n("./frontend/src/lib/components/lemonToast.tsx"),it=n("./frontend/src/lib/utils/eventUsageLogic.ts"),ct=n("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),Tt=n("./frontend/src/scenes/insights/utils/cleanFilters.ts"),dt=n("./frontend/src/lib/dayjs.ts"),Lt=n("./frontend/src/scenes/insights/sharedUtils.ts"),ut=n("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx");const He=Object(c.kea)([Object(c.path)(["scenes","feature-flags","featureFlagPermissionsLogic"]),Object(c.props)({}),Object(c.key)(t=>`${t.flagId}`),Object(c.connect)({values:[ut.a,["roles"]]}),Object(c.actions)({setModalOpen:t=>({visible:t}),setRolesToAdd:t=>({roleIds:t})}),Object(c.reducers)({permissionModalVisible:[!1,{setModalOpen:(t,s)=>{let{visible:r}=s;return r}}],rolesToAdd:[[],{setRolesToAdd:(t,s)=>{let{roleIds:r}=s;return r}}]}),Object(ct.loaders)(t=>{let{props:s,values:r,actions:a}=t;return{unfilteredAddableRoles:[[],{loadPossibleRolesToAdd:()=>V(this,null,function*(){return(yield R.b.roles.list({feature_flags_access_level:j.a.READ})).results||[]})}],associatedRoles:[[],{loadAssociatedRoles:()=>V(this,null,function*(){return s.flagId?(yield R.b.resourceAccessPermissions.featureFlags.list(s.flagId)).results||[]:[]}),addAssociatedRoles:o=>V(this,null,function*(){const{rolesToAdd:l}=r,i=s.flagId||o;if(i){const b=yield Promise.all(l.map(h=>V(this,null,function*(){return yield R.b.resourceAccessPermissions.featureFlags.create(i,h)})));return a.setRolesToAdd([]),[...r.associatedRoles,...b]}const u=[];for(const b of l){const h=r.roles.find(_=>b===_.id);h!=null&&h.id&&u.push(h)}return it.e.actions.reportRoleCustomAddedToAResource(j.T.FEATURE_FLAGS,l.length),u.map(b=>({id:b.id,role:b,feature_flag:null,updated_at:"",added_at:""}))}),deleteAssociatedRole:o=>V(this,null,function*(){var l;let{roleId:i}=o;const u=(l=r.associatedRoles.find(h=>h.role.id===i))===null||l===void 0?void 0:l.id,b=r.associatedRoles.filter(h=>h.id!==u);return s.flagId?u&&(yield R.b.resourceAccessPermissions.featureFlags.delete(s.flagId,u)):a.setRolesToAdd(b.map(h=>h.id)),b})}]}}),Object(c.selectors)({derivedRoles:[t=>[t.associatedRoles],t=>t.map(s=>s.role)],addableRoles:[t=>[t.unfilteredAddableRoles,t.associatedRoles],(t,s)=>{const r=[];for(const a of t)s.some(o=>o.role.id===a.id)||r.push(a);return r}]}),Object(c.afterMount)(t=>{let{actions:s}=t;s.loadPossibleRolesToAdd(),s.loadAssociatedRoles()})]);var Ie=n("./frontend/src/scenes/userLogic.ts");const Pt=()=>({operator:"gt",threshold_type:j.U.Sentry,threshold:50,threshold_metric:y({},Object(Tt.a)({insight:j.F.TRENDS,date_from:Object(dt.a)().subtract(7,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(dt.a)().endOf("d").format("YYYY-MM-DDTHH:mm")}))}),Ge={id:null,created_at:null,key:"",name:"",filters:{groups:[{properties:[],rollout_percentage:0,variant:null}],multivariate:null,payloads:{}},deleted:!1,active:!0,created_by:null,is_simple_flag:!1,rollout_percentage:null,ensure_experience_continuity:!1,experiment_set:null,rollback_conditions:[],performed_rollback:!1,can_edit:!0,tags:[]},Ct={key:"",name:"",rollout_percentage:0},Mt={variants:[{key:"",name:"",rollout_percentage:100}]},Nt=t=>({events:[{id:"$feature_flag_called",name:"$feature_flag_called",type:"events",properties:Ye(t)}]}),Ye=t=>[{key:"$feature/"+t,type:j.N.Event,value:["false"],operator:j.P.IsNot},{key:"$feature/"+t,type:j.N.Event,value:"is_set",operator:j.P.IsSet},{key:"$feature_flag",type:j.N.Event,value:t,operator:j.P.Exact}],pt=t=>{var s;if(!t.filters.multivariate)return t;const r={};return(s=t.filters.multivariate)===null||s===void 0||s.variants.forEach((a,o)=>{r[o]=t.filters.payloads[a.key]}),E(y({},t),{filters:E(y({},t.filters),{payloads:r})})},Dt=t=>{var s;if((s=t.filters)!==null&&s!==void 0&&s.multivariate){var r,a;const o={};return(r=t.filters)===null||r===void 0||(a=r.multivariate)===null||a===void 0||a.variants.forEach((l,i)=>{var u;let{key:b}=l;const h=(u=t.filters)===null||u===void 0?void 0:u.payloads[i];h&&(o[b]=h)}),E(y({},t),{filters:E(y({},t.filters),{payloads:o})})}return t},ie=Object(c.kea)([Object(c.path)(["scenes","feature-flags","featureFlagLogic"]),Object(c.props)({}),Object(c.key)(t=>{let{id:s}=t;return s!=null?s:"unknown"}),Object(c.connect)({values:[H.a,["currentTeamId"],ue.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"],Ie.a,["hasAvailableFeature"]]}),Object(c.actions)({setFeatureFlag:t=>({featureFlag:t}),setFeatureFlagMissing:!0,addConditionSet:!0,addRollbackCondition:!0,setAggregationGroupTypeIndex:t=>({value:t}),removeConditionSet:t=>({index:t}),removeRollbackCondition:t=>({index:t}),duplicateConditionSet:t=>({index:t}),updateConditionSet:(t,s,r,a)=>({index:t,newRolloutPercentage:s,newProperties:r,newVariant:a}),deleteFeatureFlag:t=>({featureFlag:t}),setMultivariateEnabled:t=>({enabled:t}),setMultivariateOptions:t=>({multivariateOptions:t}),addVariant:!0,duplicateVariant:t=>({index:t}),removeVariant:t=>({index:t}),editFeatureFlag:t=>({editing:t}),distributeVariantsEqually:!0,setFilters:t=>({filters:t}),loadInsightAtIndex:(t,s)=>({index:t,filters:s}),setInsightResultAtIndex:(t,s)=>({index:t,average:s}),loadAllInsightsForFlag:!0,setAffectedUsers:(t,s)=>({index:t,count:s}),setTotalUsers:t=>({count:t}),triggerFeatureFlagUpdate:t=>({payload:t})}),Object(D.forms)(t=>{let{actions:s,values:r}=t;return{featureFlag:{defaults:y({},Ge),errors:a=>{var o,l,i;let{key:u,filters:b}=a;return{key:u?(o=u.match)!==null&&o!==void 0&&o.call(u,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key",filters:{multivariate:{variants:b==null||(l=b.multivariate)===null||l===void 0||(i=l.variants)===null||i===void 0?void 0:i.map(h=>{var _;let{key:p}=h;return{key:p?(_=p.match)!==null&&_!==void 0&&_.call(p,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key"}})},groups:r.propertySelectErrors}}},submit:a=>{s.saveFeatureFlag(a)}}}}),Object(c.reducers)({featureFlag:[y({},Ge),{setFeatureFlag:(t,s)=>{let{featureFlag:r}=s;if(r.filters.groups){const a=r.filters.groups.map(o=>o.properties?E(y({},o),{properties:Object(A.r)(o.properties)}):o);return E(y({},r),{filters:E(y({},r==null?void 0:r.filters),{groups:a})})}return r},addConditionSet:t=>{if(!t)return t;const s=[...t==null?void 0:t.filters.groups,{properties:[],rollout_percentage:0,variant:null}];return E(y({},t),{filters:E(y({},t.filters),{groups:s})})},addRollbackCondition:t=>t&&E(y({},t),{rollback_conditions:[...t.rollback_conditions,Pt()]}),removeRollbackCondition:(t,s)=>{let{index:r}=s;if(!t)return t;const a=[...t.rollback_conditions];return a.splice(r,1),E(y({},t),{rollback_conditions:a})},updateConditionSet:(t,s)=>{let{index:r,newRolloutPercentage:a,newProperties:o,newVariant:l}=s;if(!t)return t;const i=[...t==null?void 0:t.filters.groups];return a!==void 0&&(i[r]=E(y({},i[r]),{rollout_percentage:a})),o!==void 0&&(i[r]=E(y({},i[r]),{properties:o})),l!==void 0&&(i[r]=E(y({},i[r]),{variant:l})),E(y({},t),{filters:E(y({},t.filters),{groups:i})})},removeConditionSet:(t,s)=>{let{index:r}=s;if(!t)return t;const a=[...t.filters.groups];return a.splice(r,1),E(y({},t),{filters:E(y({},t.filters),{groups:a})})},duplicateConditionSet:(t,s)=>{let{index:r}=s;if(!t)return t;const a=t.filters.groups.concat([t.filters.groups[r]]);return E(y({},t),{filters:E(y({},t.filters),{groups:a})})},setMultivariateOptions:(t,s)=>{let{multivariateOptions:r}=s;return t&&E(y({},t),{filters:E(y({},t.filters),{multivariate:r})})},addVariant:t=>{var s;if(!t)return t;const r=[...((s=t.filters.multivariate)===null||s===void 0?void 0:s.variants)||[]];return E(y({},t),{filters:E(y({},t.filters),{multivariate:E(y({},t.filters.multivariate||{}),{variants:[...r,Ct]})})})},removeVariant:(t,s)=>{var r;let{index:a}=s;if(!t)return t;const o=[...((r=t.filters.multivariate)===null||r===void 0?void 0:r.variants)||[]];return o.splice(a,1),E(y({},t),{filters:E(y({},t.filters),{multivariate:E(y({},t.filters.multivariate),{variants:o})})})},distributeVariantsEqually:t=>{var s;if(!t)return t;const r=[...((s=t.filters.multivariate)===null||s===void 0?void 0:s.variants)||[]],a=r.length;if(a>0&&a<=100){const o=Math.round(100/a),i=o*a-100;r.forEach((u,b)=>{r[b]=E(y({},u),{rollout_percentage:o})}),r[a-1]=E(y({},r[a-1]),{rollout_percentage:o-i})}return E(y({},t),{filters:E(y({},t.filters),{multivariate:E(y({},t.filters.multivariate),{variants:r})})})},setAggregationGroupTypeIndex:(t,s)=>{let{value:r}=s;return!t||t.filters.aggregation_group_type_index==r?t:E(y({},t),{filters:E(y({},t.filters),{aggregation_group_type_index:r,groups:[{properties:[],rollout_percentage:0,variant:null}]})})}}],featureFlagMissing:[!1,{setFeatureFlagMissing:()=>!0}],isEditingFlag:[!1,{editFeatureFlag:(t,s)=>{let{editing:r}=s;return r}}],insightRollingAverages:[{},{setInsightResultAtIndex:(t,s)=>{let{index:r,average:a}=s;return E(y({},t),{[`${r}`]:a})}}],affectedUsers:[{},{setAffectedUsers:(t,s)=>{let{index:r,count:a}=s;return E(y({},t),{[r]:a})},resetFeatureFlag:()=>({0:-1}),loadFeatureFlag:()=>({0:-1})}],totalUsers:[null,{setTotalUsers:(t,s)=>{let{count:r}=s;return r}}]}),Object(ct.loaders)(t=>{let{values:s,props:r,actions:a}=t;return{featureFlag:{loadFeatureFlag:()=>V(this,null,function*(){if(r.id&&r.id!=="new")try{const o=yield R.b.get(`api/projects/${s.currentTeamId}/feature_flags/${r.id}`);return pt(o)}catch(o){throw a.setFeatureFlagMissing(),o}return Ge}),saveFeatureFlag:o=>V(this,null,function*(){const _=o,{created_at:l,id:i}=_,u=At(_,["created_at","id"]),b=Dt(u);try{let p;if(o.id)p=yield R.b.update(`api/projects/${s.currentTeamId}/feature_flags/${o.id}`,b);else if(p=yield R.b.create(`api/projects/${s.currentTeamId}/feature_flags`,b),s.roleBasedAccessEnabled&&p.id){var h;(h=He({flagId:null}))===null||h===void 0||h.actions.addAssociatedRoles(p.id)}return pt(p)}catch(p){throw(p.code==="behavioral_cohort_found"||p.code==="cohort_does_not_exist")&&it.e.actions.reportFailedToCreateFeatureFlagWithCohort(p.code,p.detail),p}})},recentInsights:[[],{loadRecentInsights:()=>V(this,null,function*(){return r.id&&r.id!=="new"&&s.featureFlag.key?(yield R.b.get(`api/projects/${s.currentTeamId}/insights/?feature_flag=${s.featureFlag.key}&order=-created_at`)).results:[]})}],sentryStats:[{},{loadSentryStats:()=>V(this,null,function*(){return yield R.b.get("api/sentry_stats/")})}]}}),Object(c.listeners)(t=>{let{actions:s,values:r}=t;return{saveFeatureFlagSuccess:a=>{var o;let{featureFlag:l}=a;We.d.success("Feature flag saved"),(o=se.b.findMounted())===null||o===void 0||o.actions.updateFlag(l),l.id&&Q.router.actions.replace(k.a.featureFlag(l.id)),s.editFeatureFlag(!1)},deleteFeatureFlag:a=>V(this,null,function*(){let{featureFlag:o}=a;Object(A.x)({endpoint:`projects/${r.currentTeamId}/feature_flags`,object:{name:o.name,id:o.id},callback:()=>{var l,i;o.id&&((l=se.b.findMounted())===null||l===void 0||l.actions.deleteFlag(o.id)),(i=se.b.findMounted())===null||i===void 0||i.actions.loadFeatureFlags(),Q.router.actions.push(k.a.featureFlags())}})}),setMultivariateEnabled:a=>V(this,null,function*(){let{enabled:o}=a;o?s.setMultivariateOptions(Mt):s.setMultivariateOptions(null)}),loadFeatureFlagSuccess:()=>V(this,null,function*(){s.loadRecentInsights(),s.loadAllInsightsForFlag()}),loadInsightAtIndex:a=>V(this,null,function*(){let{index:o,filters:l}=a;if(l){var i,u;const h=(i=(yield R.b.get(`api/projects/${r.currentTeamId}/insights/trend/?${Object(A.Ib)(Object(Lt.a)(l))}`)).result)===null||i===void 0||(u=i[0])===null||u===void 0?void 0:u.data,_=Math.round(Object(A.Hb)(h)/7);s.setInsightResultAtIndex(o,_)}}),loadAllInsightsForFlag:()=>{var a;(a=r.featureFlag.rollback_conditions)===null||a===void 0||a.forEach((o,l)=>{o.threshold_metric&&s.loadInsightAtIndex(l,o.threshold_metric)})},addRollbackCondition:()=>{const a=r.featureFlag.rollback_conditions.length-1;s.loadInsightAtIndex(a,r.featureFlag.rollback_conditions[a].threshold_metric)},updateConditionSet:(a,o)=>V(this,null,function*(){var l,i,u;let{index:b,newProperties:h}=a;if(h&&s.setAffectedUsers(b,void 0),!h||h.some(p=>p.value===null||p.value===void 0||Array.isArray(p.value)&&p.value.length===0))return;yield o(1e3);const _=yield R.b.create(`api/projects/${r.currentTeamId}/feature_flags/user_blast_radius`,{condition:{properties:h},group_type_index:(l=(i=r.featureFlag)===null||i===void 0||(u=i.filters)===null||u===void 0?void 0:u.aggregation_group_type_index)!==null&&l!==void 0?l:null});s.setAffectedUsers(b,_.users_affected),s.setTotalUsers(_.total_users)}),addConditionSet:()=>{s.setAffectedUsers(r.featureFlag.filters.groups.length-1,-1)},editFeatureFlag:a=>V(this,null,function*(){var o,l,i;let{editing:u}=a;if(!u)return;const b=[];(o=r.featureFlag)===null||o===void 0||(l=o.filters)===null||l===void 0||(i=l.groups)===null||i===void 0||i.forEach((_,p)=>{s.setAffectedUsers(p,void 0);const K=_.properties;if(!K||(K==null?void 0:K.length)===0||K.some(ne=>ne.value===null||ne.value===void 0||Array.isArray(ne.value)&&ne.value.length===0))b.push(Promise.resolve({users_affected:-1,total_users:-1}));else{var I,w,ee;const ne=R.b.create(`api/projects/${r.currentTeamId}/feature_flags/user_blast_radius`,{condition:_,group_type_index:(I=(w=r.featureFlag)===null||w===void 0||(ee=w.filters)===null||ee===void 0?void 0:ee.aggregation_group_type_index)!==null&&I!==void 0?I:null});b.push(ne)}}),(yield Promise.all(b)).forEach((_,p)=>{s.setAffectedUsers(p,_.users_affected),_.total_users!==-1&&s.setTotalUsers(_.total_users)})}),triggerFeatureFlagUpdate:a=>V(this,null,function*(){let{payload:o}=a;if(r.featureFlag){var l;const i=yield R.b.update(`api/projects/${r.currentTeamId}/feature_flags/${r.featureFlag.id}`,o);s.setFeatureFlag(i),(l=se.b.findMounted())===null||l===void 0||l.actions.updateFlag(i)}})}}),Object(c.selectors)({sentryErrorCount:[t=>[t.sentryStats],t=>t.total_count],sentryIntegrationEnabled:[t=>[t.sentryStats],t=>!!t.sentry_integration_enabled],props:[()=>[(t,s)=>s],t=>t],multivariateEnabled:[t=>[t.featureFlag],t=>!!(t!=null&&t.filters.multivariate)],roleBasedAccessEnabled:[t=>[t.hasAvailableFeature],t=>t(j.e.ROLE_BASED_ACCESS)],variants:[t=>[t.featureFlag],t=>{var s;return(t==null||(s=t.filters.multivariate)===null||s===void 0?void 0:s.variants)||[]}],nonEmptyVariants:[t=>[t.variants],t=>t.filter(s=>{let{key:r}=s;return!!r})],variantRolloutSum:[t=>[t.variants],t=>t.reduce((s,r)=>{let{rollout_percentage:a}=r;return s+a},0)],areVariantRolloutsValid:[t=>[t.variants,t.variantRolloutSum],(t,s)=>t.every(r=>{let{rollout_percentage:a}=r;return a>=0&&a<=100})&&s===100],aggregationTargetName:[t=>[t.featureFlag,t.groupTypes,t.aggregationLabel],(t,s,r)=>t&&t.filters.aggregation_group_type_index!=null&&s.length>0?r(t.filters.aggregation_group_type_index).plural:"users"],taxonomicGroupTypes:[t=>[t.featureFlag,t.groupsTaxonomicTypes],(t,s)=>t&&t.filters.aggregation_group_type_index!=null&&s.length>0?[s[t.filters.aggregation_group_type_index]]:[pe.a.PersonProperties,pe.a.Cohorts]],breadcrumbs:[t=>[t.featureFlag],t=>[{name:"Feature Flags",path:k.a.featureFlags()},...t?[{name:t.key||"Unnamed"}]:[]]],propertySelectErrors:[t=>[t.featureFlag],t=>{var s,r;return t==null||(s=t.filters)===null||s===void 0||(r=s.groups)===null||r===void 0?void 0:r.map(a=>{let{properties:o}=a;return{properties:o==null?void 0:o.map(l=>({value:l.value===null||l.value===void 0||Array.isArray(l.value)&&l.value.length===0?"Property filters can't be empty":void 0}))}})}],computeBlastRadiusPercentage:[t=>[t.affectedUsers,t.totalUsers],(t,s)=>(r,a)=>{let o=r;if(r==null&&(o=100),t[a]===-1||s===-1||!s)return o;let l=s;return l===0&&(l=1),o*(t[a]/l)}],approximateTotalBlastRadius:[t=>[t.computeBlastRadiusPercentage,t.featureFlag],(t,s)=>{if(!s||!s.filters.groups)return 0;let r=0;return s.filters.groups.forEach((a,o)=>{r+=t(a.rollout_percentage,o)}),Math.min(r,100)}]}),Object(Q.urlToAction)(t=>{var s;let{actions:r,props:a}=t;return{[k.a.featureFlag((s=a.id)!==null&&s!==void 0?s:"new")]:(o,l,i,u)=>{let{method:b}=u;b==="PUSH"&&(a.id?r.loadFeatureFlag():r.resetFeatureFlag())}}}),Object(c.afterMount)(t=>{var s;let{props:r,actions:a}=t;const o=(s=se.b.findMounted())===null||s===void 0?void 0:s.values.featureFlags.find(l=>l.id===r.id);o?(a.setFeatureFlag(o),a.loadRecentInsights(),a.loadAllInsightsForFlag()):r.id!=="new"&&a.loadFeatureFlag(),a.loadSentryStats()})]);var Ae=n("./frontend/src/lib/logic/featureFlagLogic.ts"),$=n("./frontend/src/lib/components/icons.tsx"),ce=n("./frontend/src/lib/components/LemonDivider/index.ts"),ae=n("./frontend/src/lib/components/CodeSnippet/index.tsx"),e=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const je="?utm_medium=in-product&utm_campaign=feature-flag";function Te(t){let{flagKey:s}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ae.a,{language:ae.b.JavaScript,wrap:!0,children:`const isMyFlagEnabledForUser = await client.isFeatureEnabled('${s}', 'user distinct id')

if (isMyFlagEnabledForUser) {
    // Do something differently for this user
}`})})}function Le(t){let{flagKey:s}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ae.a,{language:ae.b.JavaScript,wrap:!0,children:`if\xA0(posthog.isFeatureEnabled('${s!=null?s:""}')) {
    // run your activation code here
}`})})}function Pe(t){let{flagKey:s}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ae.a,{language:ae.b.PHP,wrap:!0,children:`if (PostHog::isFeatureEnabled('${s}', 'some distinct id')) {
    // do something here
}`})})}function Ce(t){let{flagKey:s}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ae.a,{language:ae.b.Go,wrap:!0,children:`isFlagEnabledForUser, err := client.IsFeatureEnabled(
                    FeatureFlagPayload{
                        Key:        '${s}',
                        DistinctId: "distinct-id",
                    })

if (isFlagEnabledForUser) {
  // Do something differently for this user
}`})})}function Me(t){let{flagKey:s}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ae.a,{language:ae.b.Ruby,wrap:!0,children:`is_my_flag_enabled = posthog.is_feature_enabled('${s}', 'user distinct id')

if is_my_flag_enabled
  # Do something differently for this user
end`})})}function Ne(t){let{flagKey:s}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ae.a,{language:ae.b.Python,wrap:!0,children:`if posthog.feature_enabled("${s}", "user_distinct_id"):
    runAwesomeFeature()
`})})}function kt(){const{currentTeam:t}=Object(c.useValues)(H.a);return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ae.a,{language:ae.b.Bash,wrap:!0,children:`curl ${window.location.origin}/decide/ \\
-X POST -H 'Content-Type: application/json' \\
-d '{
    "api_key": "${t?t.api_token:"[project_api_key]"}",
    "distinct_id": "[user distinct id]"
}'
                `})})}try{Te.displayName="NodeJSSnippet",Te.__docgenInfo={description:"",displayName:"NodeJSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"]={docgenInfo:Te.__docgenInfo,name:"NodeJSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"})}catch(t){}try{Le.displayName="JSSnippet",Le.__docgenInfo={description:"",displayName:"JSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"]={docgenInfo:Le.__docgenInfo,name:"JSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"})}catch(t){}try{Pe.displayName="PHPSnippet",Pe.__docgenInfo={description:"",displayName:"PHPSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"]={docgenInfo:Pe.__docgenInfo,name:"PHPSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"})}catch(t){}try{Ce.displayName="GolangSnippet",Ce.__docgenInfo={description:"",displayName:"GolangSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"]={docgenInfo:Ce.__docgenInfo,name:"GolangSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"})}catch(t){}try{Me.displayName="RubySnippet",Me.__docgenInfo={description:"",displayName:"RubySnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"]={docgenInfo:Me.__docgenInfo,name:"RubySnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"})}catch(t){}try{Ne.displayName="PythonSnippet",Ne.__docgenInfo={description:"",displayName:"PythonSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"]={docgenInfo:Ne.__docgenInfo,name:"PythonSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"})}catch(t){}var Kt=n("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Je=n.n(Kt),wt=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss"),mt=n.n(wt),Qe={};Qe.insert="head",Qe.singleton=!1;var ys=Je()(mt.a,Qe),Rs=mt.a.locals||{};const he="https://posthog.com/docs/",_e="#feature-flags",Xe=[{value:"JavaScript",documentationLink:`${he}integrations/js-integration${je}${_e}`,Icon:$.IconJavascript,Snippet:Le},{value:"Node.js",documentationLink:`${he}integrations/node-integration${je}${_e}`,Icon:$.IconNodeJS,Snippet:Te},{value:"PHP",documentationLink:`${he}integrations/php-integration${je}${_e}`,Icon:$.IconPHP,Snippet:Pe},{value:"Ruby",documentationLink:`${he}integrations/ruby-integration${je}${_e}`,Icon:$.IconRuby,Snippet:Me},{value:"Golang",documentationLink:`${he}integrations/go-integration${je}${_e}`,Icon:$.IconGolang,Snippet:Ce},{value:"Python",documentationLink:`${he}integrations/python-integration${je}${_e}`,Icon:$.IconPython,Snippet:Ne},{value:"API",documentationLink:`${he}api/feature-flags${je}`,Icon:$.IconOpenInNew,Snippet:kt}];function Bt(t){let{selectedOptionValue:s,selectOption:r}=t;return Object(e.jsxs)(g.a,{className:"FeatureFlagInstructionsHeader",justify:"space-between",align:"middle",children:[Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__header-title",children:[Object(e.jsx)($.IconFlag,{className:"FeatureFlagInstructionsHeader__header-title__icon"}),Object(e.jsx)("b",{children:"Learn how to use feature flags in your code"})]}),Object(e.jsx)(v.a,{"data-attr":"feature-flag-instructions-select",value:s,style:{width:140},onChange:r,children:Xe.map((a,o)=>{let{value:l,Icon:i}=a;return Object(e.jsx)(v.a.Option,{"data-attr":"feature-flag-instructions-select-option-"+l,value:l,children:Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__option",children:[Object(e.jsx)("div",{className:"FeatureFlagInstructionsHeader__option__icon",children:Object(e.jsx)(i,{})}),Object(e.jsx)("div",{children:l})]})},o)})})]})}function Ut(t){let{documenrationLink:s}=t;return Object(e.jsxs)("div",{className:"mt-4",children:["Need more information?"," ",Object(e.jsxs)("a",{"data-attr":"feature-flag-doc-link",target:"_blank",rel:"noopener",href:s,children:["Check the docs ",Object(e.jsx)($.IconOpenInNew,{})]})]})}function Re(t){let{featureFlagKey:s}=t;const[r]=Xe,[a,o]=Object(m.useState)(r),l=i=>{const u=Xe.find(b=>b.value===i);u&&o(u)};return Object(e.jsxs)(U.a,{size:"small",children:[Object(e.jsx)(Bt,{selectedOptionValue:a.value,selectOption:l}),Object(e.jsx)(ce.a,{}),Object(e.jsx)("div",{className:"mt mb",children:Object(e.jsx)(a.Snippet,{"data-attr":"feature-flag-instructions-snippet",flagKey:s})}),Object(e.jsx)(ce.a,{}),Object(e.jsx)(Ut,{documenrationLink:a.documentationLink})]})}try{Re.displayName="FeatureFlagInstructions",Re.__docgenInfo={description:"",displayName:"FeatureFlagInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"]={docgenInfo:Re.__docgenInfo,name:"FeatureFlagInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"})}catch(t){}var gt=n("./frontend/src/lib/components/PageHeader.tsx"),Vt=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss"),ft=n.n(Vt),Ze={};Ze.insert="head",Ze.singleton=!1;var Fs=Je()(ft.a,Ze),Ss=ft.a.locals||{},$t=n("./frontend/src/lib/components/Tooltip.tsx"),zt=n("./node_modules/.pnpm/rc-select@13.1.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-select/es/index.js"),De=n("./frontend/src/lib/components/Link.tsx"),ke=n("./frontend/src/lib/introductions/groupsAccessLogic.ts");function Ke(t){let{value:s}=t;const{groupsAccessStatus:r}=Object(c.useValues)(ke.b);return[ke.a.HasAccess,ke.a.HasGroupTypes,ke.a.NoAccess].includes(r)?Object(e.jsxs)(zt.c.Option,{value:s,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--side)",color:"var(--muted)"},children:[Object(e.jsx)(S.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups \u2013"," ",Object(e.jsx)(De.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",className:"font-semibold",children:"Learn more"})]},"groups"):null}try{Ke.displayName="GroupsIntroductionOption",Ke.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:Ke.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(t){}var q=n("./frontend/src/lib/components/LemonButton/index.ts"),X=n("./frontend/src/lib/forms/Field.tsx"),Wt=n("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),xe=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),jt=n("./frontend/src/lib/components/LemonCheckbox/index.ts"),Ht=n("./frontend/src/scenes/events/EventBufferNotice.tsx"),bt=n("./frontend/src/lib/components/AlertMessage/index.ts"),Fe=n("./frontend/src/lib/components/Spinner/Spinner.tsx"),qe=n("./frontend/src/lib/components/CopyToClipboard.tsx"),be=n("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),re=n("./frontend/src/lib/constants.tsx"),ht=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),Gt=n("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),Yt=n("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),Jt=n("./frontend/src/lib/components/DefinitionPopup/utils.ts"),Ot=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),Qt=n("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function Xt(){const{recentInsights:t,recentInsightsLoading:s,featureFlag:r}=Object(c.useValues)(ie);return Object(e.jsx)(Ot.a,{title:"Insights that use this feature flag",loading:s,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:k.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${r.key}`})},items:t.slice(0,5),renderRow:(a,o)=>Object(e.jsx)(Qt.a,{insight:a},o)})}var Zt=n("./frontend/src/lib/components/NotFound/index.tsx"),qt=n("./frontend/src/models/cohortsModel.ts"),Y=n("./frontend/@posthog/lemon-ui/src/index.ts"),es=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),ts=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function Se(t){let{readOnly:s}=t;const{featureFlag:r,sentryIntegrationEnabled:a,sentryErrorCount:o,insightRollingAverages:l}=Object(c.useValues)(ie),{addRollbackCondition:i,removeRollbackCondition:u,loadInsightAtIndex:b}=Object(c.useActions)(ie),{user:h}=Object(c.useValues)(Ie.a);return Object(e.jsxs)("div",{children:[Object(e.jsxs)("div",{className:"mb-2",children:[Object(e.jsx)("b",{children:"Auto rollback"}),Object(e.jsx)(Y.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"}),!s&&Object(e.jsx)("div",{className:"mt-2",children:"Specify the conditions in which this feature flag will automatically roll back."})]}),s&&r.rollback_conditions&&r.rollback_conditions.map((_,p)=>{var K,I,w;return Object(e.jsxs)(e.Fragment,{children:[p>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),_.threshold_type==="insight"&&(K=_.threshold_metric)!==null&&K!==void 0&&(I=K.events)!==null&&I!==void 0&&(w=I[0])!==null&&w!==void 0&&w.name?Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsx)("b",{children:`${Object(A.i)(_.threshold_type)} based rollback`}),Object(e.jsx)(Y.LemonDivider,{className:"my-3"}),Object(e.jsxs)(g.a,{align:"middle",children:[l[p]&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("b",{children:_.threshold_metric.events[0].name}),"\xA0 trailing average is ",l[p],"."]}),"\xA0Trigger when trailing average of \xA0",Object(e.jsx)("b",{children:_.threshold_metric.events[0].name}),"\xA0 is\xA0",_.operator&&A.J[_.operator]," ",_.threshold]})]}):Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsx)("b",{children:`${Object(A.i)(_.threshold_type)} based rollback`}),Object(e.jsx)(Y.LemonDivider,{className:"my-3"}),Object(e.jsxs)(g.a,{align:"middle",children:["Trigger when there is a\xA0",Object(e.jsxs)("b",{children:[_.threshold,"%"]}),"\xA0increase in errors"]})]})]})}),!s&&r.rollback_conditions&&r.rollback_conditions.map((_,p)=>Object(e.jsxs)(e.Fragment,{children:[p>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(e.jsx)("div",{className:"mb-4 border rounded p-4",children:Object(e.jsxs)(D.Group,{name:["rollback_conditions",p],children:[Object(e.jsxs)(g.a,{align:"middle",justify:"space-between",children:[Object(e.jsxs)(g.a,{children:[Object(e.jsx)("div",{className:"mt-3 mr-3",children:Object(e.jsx)("b",{children:"Rollback Condition Type"})}),Object(e.jsx)(X.a,{name:"threshold_type",children:K=>{let{value:I,onChange:w}=K;return Object(e.jsx)(Y.LemonSelect,{value:I,onChange:w,options:[{value:j.U.Sentry,label:"Error Based"},{value:j.U.Insight,label:"Metric Based"}]})}})]}),Object(e.jsx)(Y.LemonButton,{icon:Object(e.jsx)($.IconDelete,{}),status:"muted",noPadding:!0,onClick:()=>{u(p)}})]}),Object(e.jsx)(Y.LemonDivider,{className:"my-3"}),r.rollback_conditions[p].threshold_type=="insight"?Object(e.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[Object(e.jsx)(X.a,{name:"threshold_metric",children:K=>{let{value:I,onChange:w}=K;return Object(e.jsx)(es.a,{filters:I,setFilters:ee=>{w(y({},ee)),b(p,ee)},typeKey:"feature-flag-rollback-trends-"+p,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:ts.b.None,propertiesTaxonomicGroupTypes:[pe.a.EventProperties,pe.a.PersonProperties,pe.a.EventFeatureFlags,pe.a.Cohorts,pe.a.Elements]})}}),Object(e.jsxs)("span",{children:["trailing 7 day average is\xA0",l[p]!==void 0?Object(e.jsx)("b",{children:l[p]}):Object(e.jsx)(Fe.a,{}),". Trigger when trailing average is"]}),Object(e.jsx)(X.a,{name:"operator",children:K=>{let{value:I,onChange:w}=K;return Object(e.jsx)(Y.LemonSelect,{value:I,onChange:w,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),Object(e.jsx)(X.a,{name:"threshold",children:Object(e.jsx)(Y.LemonInput,{min:0,type:"number"})})]}):a?Object(e.jsx)("div",{children:Object(e.jsxs)(g.a,{align:"middle",children:[o?Object(e.jsxs)("span",{children:[Object(e.jsxs)("b",{children:[Object(A.R)(o)," "]})," sentry errors in the past 24 hours."," "]}):Object(e.jsx)(Fe.a,{}),Object(e.jsx)("span",{children:"\xA0Trigger when there is a"}),Object(e.jsx)(X.a,{name:"threshold",className:"ml-3 mr-3",children:K=>{let{value:I,onChange:w}=K;return Object(e.jsx)(Y.LemonInput,{value:I,suffix:Object(e.jsx)(e.Fragment,{children:"%"}),type:"number",min:0,onChange:w})}}),Object(e.jsx)(X.a,{name:"operator",className:"mr-3",children:K=>{let{value:I,onChange:w}=K;return Object(e.jsx)(Y.LemonSelect,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value:I,onChange:w})}}),Object(e.jsxs)("span",{children:["to"," ",o?Object(e.jsx)("b",{children:Object(A.R)(Math.round(o*(1+(r.rollback_conditions[p].threshold||0)/100)))}):Object(e.jsx)(Fe.a,{})," ","errors."]}),Object(e.jsx)("div",{})]})}):h!=null&&h.is_staff?Object(e.jsxs)("div",{className:"mt-4",children:[Object(e.jsx)("b",{children:"This feature requires an active Sentry integration."}),Object(e.jsx)("br",{}),Object(e.jsx)(Y.Link,{to:k.a.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",Object(e.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):Object(e.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]})),!s&&Object(e.jsx)(Y.LemonButton,{type:"secondary",onClick:()=>{i()},children:"Add condition"})]})}try{Se.displayName="FeatureFlagAutoRollback",Se.__docgenInfo={description:"",displayName:"FeatureFlagAutoRollback",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"]={docgenInfo:Se.__docgenInfo,name:"FeatureFlagAutoRollback",path:"frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"})}catch(t){}var ss=n("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),ns=n("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),as=n("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts");const we=t=>({events:Nt(t).events});function Be(t){let{flagKey:s}=t;const{currentTeam:r}=Object(c.useValues)(H.a),a=Object(as.e)({key:`feature-flag-${s}`,filters:we(s)}),{sessionRecordings:o,sessionRecordingsResponseLoading:l,filters:i}=Object(c.useValues)(a);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ns.a,{}),Object(e.jsx)(Ot.a,{title:"Recordings with current feature flag",viewAllURL:k.a.sessionRecordings(void 0,i),loading:l,emptyMessage:r!=null&&r.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:k.a.projectSettings()+"#recordings"},items:o.slice(0,5),renderRow:(u,b)=>Object(e.jsx)(ss.b,{recording:u},b)})]})}try{Be.displayName="FeatureFlagRecordings",Be.__docgenInfo={description:"",displayName:"FeatureFlagRecordings",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"]={docgenInfo:Be.__docgenInfo,name:"FeatureFlagRecordings",path:"frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"})}catch(t){}try{we.displayName="filtersForFlag",we.__docgenInfo={description:"",displayName:"filtersForFlag",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#filtersForFlag"]={docgenInfo:we.__docgenInfo,name:"filtersForFlag",path:"frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#filtersForFlag"})}catch(t){}var rs=n("./frontend/src/scenes/billing/billingLogic.ts"),os=n("./frontend/src/scenes/events/index.ts"),ls=n("./frontend/src/lib/components/PropertyFilters/utils.ts"),is=n("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx"),vt=n("./frontend/src/lib/components/TitleWithIcon.tsx"),_t=n("./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx");function Ue(t){return t.map(s=>({key:s.id,label:`${s.name}`,labelComponent:Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:`${s.name}`})})}))}function et(t){let{title:s,visible:r,onClose:a,rolesToAdd:o,addableRoles:l,onChange:i,addableRolesLoading:u,onAdd:b,roles:h,deleteAssociatedRole:_,canEdit:p}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(Y.LemonModal,{title:s,isOpen:r,onClose:a,children:Object(e.jsx)(ye,{resourceType:j.T.FEATURE_FLAGS,onChange:i,rolesToAdd:o,addableRoles:l,addableRolesLoading:u,onAdd:b,roles:h,deleteAssociatedRole:_,canEdit:p})})})}function ye(t){let{rolesToAdd:s,addableRoles:r,onChange:a,addableRolesLoading:o,onAdd:l,roles:i,deleteAssociatedRole:u,resourceType:b,canEdit:h}=t;const{allPermissions:_,shouldShowPermissionsTable:p}=Object(c.useValues)(_t.b),{roles:K}=Object(c.useValues)(ut.a),I=_.find(Z=>Z.resource===b),w=K.filter(Z=>Z.feature_flags_access_level===j.a.WRITE),ee=[{title:"Role",dataIndex:"name",key:"name",render:function(le,oe){return Object(e.jsx)(e.Fragment,{children:oe.name==="Organization default"?Object(e.jsx)(vt.a,{icon:Object(e.jsx)(Y.LemonButton,{icon:Object(e.jsx)($.IconSettings,{}),to:`${k.a.organizationSettings()}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,tooltip:"Organization-wide permissions for roles can be managed in the organization settings.",className:"ml-1"}),children:"All users by default"}):oe.name})}},{title:"Access",dataIndex:"feature_flags_access_level",key:"feature_flags_access_level",render:function(le,oe){return Object(e.jsxs)("div",{className:"flex flex-row justify-between",children:[oe.feature_flags_access_level===j.a.WRITE?"Edit":"View",oe.deletable&&Object(e.jsx)(Y.LemonButton,{icon:Object(e.jsx)($.IconDelete,{}),onClick:()=>u(oe.id),tooltip:"Remove custom role from feature flag",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}}],ne=[{id:"",name:"Organization default",feature_flags_access_level:I?I.access_level:j.a.WRITE,created_by:null,created_at:""},...w,...i.map(Z=>E(y({},Z),{feature_flags_access_level:j.a.WRITE,deletable:!0}))];return Object(e.jsxs)(e.Fragment,{children:[!p&&Object(e.jsxs)(e.Fragment,{children:[I&&Object(e.jsx)(cs,{resourceLevel:I}),Object(e.jsx)(ds,{roles:w})]}),p&&Object(e.jsx)(Y.LemonTable,{dataSource:ne,columns:ee,className:"mt-4"}),!p&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h5",{className:"mt-4",children:"Roles"}),i.length>0?Object(e.jsx)("div",{className:"pb-2 rounded overflow-y-auto",style:{maxHeight:300},children:i.map(Z=>Object(e.jsx)(us,{role:Z,deleteRole:le=>u(le)},Z.id))}):Object(e.jsx)("div",{className:"text-muted mb-2",children:"No roles added yet"})]}),h&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h5",{className:"mt-4",children:"Custom edit roles"}),Object(e.jsxs)("div",{className:"flex gap-2",children:[Object(e.jsx)("div",{className:"flex-1",children:Object(e.jsx)(is.a,{placeholder:"Search for roles to add\u2026",loading:o,onChange:a,value:s,filterOption:!0,mode:"multiple","data-attr":"resource-permissioning-select",options:Ue(r)})}),Object(e.jsx)(Y.LemonButton,{type:"primary",loading:!1,disabled:s.length===0,onClick:l,children:"Add"})]})]})]})}function cs(t){let{resourceLevel:s}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(vt.a,{icon:Object(e.jsx)(Y.LemonButton,{icon:Object(e.jsx)($.IconSettings,{}),to:`${k.a.organizationSettings()}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,className:"ml-1"}),children:Object(e.jsx)("h5",{children:"Organization default"})}),Object(e.jsx)("b",{children:_t.a[s.access_level]})]})}function ds(t){let{roles:s}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h5",{className:"mt-4",children:"Roles with edit access"}),Object(e.jsx)(g.a,{children:s.map(r=>Object(e.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt mr-2",children:[Object(e.jsx)("b",{children:r.name})," "]},r.id))})]})}function us(t){let{role:s,deleteRole:r}=t;return Object(e.jsxs)("div",{className:"flex items-center justify-between h-8",children:[Object(e.jsx)("b",{children:s.name}),r&&Object(e.jsx)(Y.LemonButton,{icon:Object(e.jsx)($.IconDelete,{}),onClick:()=>r(s.id),tooltip:"Remove role from permission",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}try{Ue.displayName="roleLemonSelectOptions",Ue.__docgenInfo={description:"",displayName:"roleLemonSelectOptions",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#roleLemonSelectOptions"]={docgenInfo:Ue.__docgenInfo,name:"roleLemonSelectOptions",path:"frontend/src/scenes/ResourcePermissionModal.tsx#roleLemonSelectOptions"})}catch(t){}try{et.displayName="ResourcePermissionModal",et.__docgenInfo={description:"",displayName:"ResourcePermissionModal",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},addableRoles:{defaultValue:null,description:"",name:"addableRoles",required:!0,type:{name:"RoleType[]"}},addableRolesLoading:{defaultValue:null,description:"",name:"addableRolesLoading",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: string[]) => void"}},rolesToAdd:{defaultValue:null,description:"",name:"rolesToAdd",required:!0,type:{name:"string[]"}},onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"() => void"}},roles:{defaultValue:null,description:"",name:"roles",required:!0,type:{name:"RoleType[]"}},deleteAssociatedRole:{defaultValue:null,description:"",name:"deleteAssociatedRole",required:!0,type:{name:"(id: string) => void"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"Resource"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermissionModal"]={docgenInfo:et.__docgenInfo,name:"ResourcePermissionModal",path:"frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermissionModal"})}catch(t){}try{ye.displayName="ResourcePermission",ye.__docgenInfo={description:"",displayName:"ResourcePermission",props:{addableRoles:{defaultValue:null,description:"",name:"addableRoles",required:!0,type:{name:"RoleType[]"}},addableRolesLoading:{defaultValue:null,description:"",name:"addableRolesLoading",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: string[]) => void"}},rolesToAdd:{defaultValue:null,description:"",name:"rolesToAdd",required:!0,type:{name:"string[]"}},onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"() => void"}},roles:{defaultValue:null,description:"",name:"roles",required:!0,type:{name:"RoleType[]"}},deleteAssociatedRole:{defaultValue:null,description:"",name:"deleteAssociatedRole",required:!0,type:{name:"(id: string) => void"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"Resource"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermission"]={docgenInfo:ye.__docgenInfo,name:"ResourcePermission",path:"frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermission"})}catch(t){}var xt=n("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),tt=n("./frontend/src/queries/schema.ts"),ps=n("./frontend/src/queries/Query/Query.tsx"),ms=n("./frontend/src/queries/nodes/DataTable/utils.ts"),gs=n("./node_modules/.pnpm/@monaco-editor+react@4.4.6_vtctfwvicljpcdx2mjoqbo4tly/node_modules/@monaco-editor/react/lib/es/index.js"),fs=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/JSONEditorInput.scss"),yt=n.n(fs),st={};st.insert="head",st.singleton=!1;var Es=Je()(yt.a,st),Is=yt.a.locals||{};function Oe(t){let{onChange:s,lineHeight:r=20,defaultNumberOfLines:a=1,value:o="",readOnly:l=!1}=t;const i=(o==null?void 0:o.toString())||"",u=r,b=Math.max(a,i.split(/\r\n|\r|\n/).length)+1,h=u*b,[_,p]=Object(m.useState)(h),K=I=>{if(I){const w=I.split(/\r\n|\r|\n/).length,ee=Math.max(w,a)+1;p(u*ee)}else p(u*(a+1))};return Object(e.jsx)("div",{className:"JsonEditorInput",children:Object(e.jsx)(gs.a,{theme:"vs-light",className:"border",language:"json",height:_,value:o==null?void 0:o.toString(),options:{readOnly:l,lineHeight:u,minimap:{enabled:!1},scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1},padding:{bottom:0,top:10},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,glyphMargin:!0,folding:!1,lineNumbers:"off",lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",cursorStyle:"block-outline",scrollBeyondLastLine:!1,quickSuggestions:!1,contextmenu:!1},onChange:I=>{K(I),s==null||s(I)}})})}try{Oe.displayName="JSONEditorInput",Oe.__docgenInfo={description:"",displayName:"JSONEditorInput",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((val: string) => void)"}},lineHeight:{defaultValue:{value:"20"},description:"",name:"lineHeight",required:!1,type:{name:"number"}},defaultNumberOfLines:{defaultValue:{value:"1"},description:"",name:"defaultNumberOfLines",required:!1,type:{name:"number"}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"JsonType"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/JSONEditorInput.tsx#JSONEditorInput"]={docgenInfo:Oe.__docgenInfo,name:"JSONEditorInput",path:"frontend/src/scenes/feature-flags/JSONEditorInput.tsx#JSONEditorInput"})}catch(t){}var nt=n("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),js=n("./frontend/src/models/tagsModel.ts");const bs={component:Ee,logic:ie,paramsToProps:t=>{let{params:{id:s}}=t;return{id:s&&s!=="new"?parseInt(s):"new"}}};function at(t){setTimeout(()=>{var s;return(s=document.querySelector(`.variant-form-list input[data-key-index="${t}"]`))===null||s===void 0?void 0:s.focus()},50)}function Ee(){var t;let{id:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{props:r,featureFlag:a,featureFlagLoading:o,featureFlagMissing:l,isEditingFlag:i}=Object(c.useValues)(ie),{featureFlags:u}=Object(c.useValues)(Ae.a),{deleteFeatureFlag:b,editFeatureFlag:h,loadFeatureFlag:_,triggerFeatureFlagUpdate:p}=Object(c.useActions)(ie),{addableRoles:K,unfilteredAddableRolesLoading:I,rolesToAdd:w,derivedRoles:ee}=Object(c.useValues)(He({flagId:a.id})),{setRolesToAdd:ne,addAssociatedRoles:Z,deleteAssociatedRole:le}=Object(c.useActions)(He({flagId:a.id})),{tags:oe}=Object(c.useValues)(js.a),{hasAvailableFeature:ve}=Object(c.useValues)(Ie.a),[J,P]=Object(m.useState)(!1),[me,C]=Object(m.useState)(se.a.OVERVIEW),B=s==="new"||s===void 0;return l?Object(e.jsx)(Zt.a,{object:"feature flag"}):o?Object(e.jsx)(Fe.b,{}):Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:"feature-flag",children:B||i?Object(e.jsxs)(D.Form,{logic:ie,props:r,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(e.jsx)(gt.a,{title:B?"New feature flag":a.key||"Untitled",buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(q.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{i?(h(!1),_()):Q.router.actions.push(k.a.featureFlags())},disabled:o,children:"Cancel"}),Object(e.jsx)(q.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:o,disabled:o,children:"Save"})]})}),Object(e.jsx)(te.a,{}),a.experiment_set&&((t=a.experiment_set)===null||t===void 0?void 0:t.length)>0&&Object(e.jsxs)(bt.a,{type:"warning",children:["This feature flag is linked to an experiment. It's recommended to only make changes to this flag"," ",Object(e.jsx)(De.a,{to:k.a.experiment(a.experiment_set[0]),children:"using the experiment creation screen."})]}),Object(e.jsx)(Ht.a,{additionalInfo:", meaning it can take around 60 seconds for some flags to update for recently-identified persons. To sidestep this, you can choose to override server properties when requesting the feature flag"}),Object(e.jsxs)(g.a,{gutter:16,style:{marginBottom:32},children:[Object(e.jsxs)(d.a,{span:12,className:"space-y-4",children:[Object(e.jsx)(X.a,{name:"key",label:"Key",help:J&&s!=="new"?Object(e.jsxs)("span",{className:"text-warning",children:[Object(e.jsx)("b",{children:"Warning! "}),"Changing this key will",Object(e.jsxs)("a",{href:`https://posthog.com/docs/features/feature-flags${je}#feature-flag-persistence`,target:"_blank",rel:"noopener",children:[" ","affect the persistence of your flag ",Object(e.jsx)($.IconOpenInNew,{})]})]}):void 0,children:N=>{let{value:z,onChange:de}=N;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(xe.a,{value:z,onChange:ge=>{ge!==z&&P(!0),de(ge)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),Object(e.jsx)("span",{style:{fontSize:13},className:"text-muted",children:"Feature flag keys must be unique"})]})}}),Object(e.jsx)(X.a,{name:"name",label:"Description",children:Object(e.jsx)(Wt.a,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:a.name||""})}),ve(j.e.TAGGING)&&Object(e.jsx)(X.a,{name:"tags",label:"Tags",children:N=>{let{value:z,onChange:de}=N;return Object(e.jsx)(nt.a,{tags:z,onChange:(ge,fe)=>de(fe),saving:o,tagsAvailable:oe.filter(ge=>{var fe;return!((fe=a.tags)!==null&&fe!==void 0&&fe.includes(ge))}),className:"insight-metadata-tags"})}}),Object(e.jsx)(X.a,{name:"ensure_experience_continuity",children:N=>{let{value:z,onChange:de}=N;return Object(e.jsxs)("div",{className:"border rounded p-4",children:[Object(e.jsx)(jt.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:()=>de(!z),fullWidth:!0,checked:z}),Object(e.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",Object(e.jsxs)(De.a,{to:"https://posthog.com/manual/feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:["Learn more ",Object(e.jsx)($.IconOpenInNew,{})]})]})]})}}),Object(e.jsx)(X.a,{name:"active",children:N=>{let{value:z,onChange:de}=N;return Object(e.jsx)("div",{className:"border rounded p-4",children:Object(e.jsx)(jt.a,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:()=>de(!z),checked:z})})}})]}),Object(e.jsx)(d.a,{span:12,children:Object(e.jsx)(Re,{featureFlagKey:a.key||"my-flag"})})]}),Object(e.jsx)(te.a,{}),Object(e.jsx)(Rt,{}),Object(e.jsx)(te.a,{}),Object(e.jsx)(Ft,{}),Object(e.jsx)(te.a,{}),u[re.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(e.jsx)(Se,{}),B&&u[re.i.ROLE_BASED_ACCESS]&&Object(e.jsx)(U.a,{title:"Permissions",className:"mb-4",children:Object(e.jsx)(xt.a,{feature:j.e.ROLE_BASED_ACCESS,children:Object(e.jsx)(ye,{resourceType:j.T.FEATURE_FLAGS,onChange:N=>ne(N),rolesToAdd:w,addableRoles:K,addableRolesLoading:I,onAdd:()=>Z(),roles:ee,deleteAssociatedRole:N=>le({roleId:N}),canEdit:a.can_edit})})}),Object(e.jsx)(ce.a,{className:"mt-8"}),Object(e.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[Object(e.jsx)(q.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{i?(h(!1),_()):Q.router.actions.push(k.a.featureFlags())},disabled:o,children:"Cancel"}),Object(e.jsx)(q.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:o,disabled:o,children:"Save"})]})]}):Object(e.jsx)(e.Fragment,{children:o?Object(e.jsx)(W.a,{active:!0}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(gt.a,{title:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.key||"Untitled",Object(e.jsx)(qe.a,{explicitValue:a.key,iconStyle:{color:"var(--muted-alt)"}}),Object(e.jsx)("div",{className:"flex",children:a.active?Object(e.jsx)(ht.a,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(ht.a,{type:"default",className:"uppercase",children:"Disabled"})})]}),description:Object(e.jsx)(e.Fragment,{children:a.name?Object(e.jsx)("span",{style:{fontStyle:"normal"},children:a.name}):"There is no description for this feature flag."}),caption:Object(e.jsx)(e.Fragment,{children:(a==null?void 0:a.tags)&&Object(e.jsx)(e.Fragment,{children:a.can_edit?Object(e.jsx)(nt.a,{tags:a.tags,onChange:(N,z)=>{p({tags:z})},saving:o,tagsAvailable:oe.filter(N=>{var z;return!((z=a.tags)!==null&&z!==void 0&&z.includes(N))}),className:"insight-metadata-tags"}):a.tags.length?Object(e.jsx)(nt.a,{tags:a.tags,saving:o,staticOnly:!0,className:"insight-metadata-tags"}):null})}),buttons:Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[Object(e.jsx)(q.a,{"data-attr":"delete-feature-flag",status:"danger",type:"secondary",onClick:()=>{b(a)},disabled:o||!a.can_edit,children:"Delete feature flag"}),Object(e.jsx)(q.a,{"data-attr":"edit-feature-flag",type:"secondary",tooltip:u[re.i.ROLE_BASED_ACCESS]&&!a.can_edit&&"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",onClick:()=>{h(!0)},disabled:o||!a.can_edit,children:"Edit"})]})})}),Object(e.jsxs)(M.a,{activeKey:me,destroyInactiveTabPane:!0,onChange:N=>C(N),children:[Object(e.jsx)(M.a.TabPane,{tab:"Overview",children:Object(e.jsxs)(g.a,{children:[Object(e.jsxs)(d.a,{span:13,children:[Object(e.jsx)(Rt,{readOnly:!0}),Object(e.jsx)(Ft,{readOnly:!0}),u[re.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(e.jsx)(Se,{readOnly:!0})]}),Object(e.jsxs)(d.a,{span:11,className:"pl-4",children:[Object(e.jsx)(Xt,{}),Object(e.jsx)("div",{className:"my-4"}),u[re.i.RECORDINGS_ON_FEATURE_FLAGS]?Object(e.jsx)(Be,{flagKey:a.key||"my-flag"}):Object(e.jsx)(Re,{featureFlagKey:a.key||"my-flag"})]})]})},"overview"),u[re.i.EXPOSURES_ON_FEATURE_FLAGS]&&a.key&&s&&Object(e.jsx)(M.a.TabPane,{tab:"Exposures",children:Object(e.jsx)(hs,{id:s,featureFlagKey:a.key})},"exposure"),a.id&&Object(e.jsx)(M.a.TabPane,{tab:"History",children:Object(e.jsx)(Gt.a,{scope:Yt.a.FEATURE_FLAG,id:a.id})},"history"),u[re.i.ROLE_BASED_ACCESS]&&a.can_edit&&Object(e.jsx)(M.a.TabPane,{tab:"Permissions",children:Object(e.jsx)(xt.a,{feature:j.e.ROLE_BASED_ACCESS,children:Object(e.jsx)(ye,{resourceType:j.T.FEATURE_FLAGS,onChange:N=>ne(N),rolesToAdd:w,addableRoles:K,addableRolesLoading:I,onAdd:()=>Z(),roles:ee,deleteAssociatedRole:N=>le({roleId:N}),canEdit:a.can_edit})})},"permissions")]})]})})})})}function hs(t){let{id:s,featureFlagKey:r}=t;const{featureFlags:a}=Object(c.useValues)(Ae.a);return a[re.i.DATA_EXPLORATION_LIVE_EVENTS]?Object(e.jsx)(ps.a,{query:{kind:tt.a.DataTableNode,source:{kind:tt.a.EventsQuery,select:Object(ms.a)(tt.a.EventsQuery),event:"$feature_flag_called",properties:Ye(r)},full:!0,showEventFilter:!1,showPropertyFilter:!1}}):Object(e.jsx)(os.b,{fixedFilters:{event_filter:"$feature_flag_called",properties:Ye(r)},sceneUrl:k.a.featureFlag(s),fetchMonths:3,pageKey:`feature-flag-${r}}`,showEventFilter:!1,showPropertyFilter:!1})}function Rt(t){var s,r;let{readOnly:a}=t;const{multivariateEnabled:o,variants:l,areVariantRolloutsValid:i,featureFlagLoading:u,variantRolloutSum:b,nonEmptyVariants:h,aggregationTargetName:_,featureFlag:p}=Object(c.useValues)(ie),{distributeVariantsEqually:K,addVariant:I,removeVariant:w,setMultivariateEnabled:ee}=Object(c.useActions)(ie),[ne,Z]=Object(m.useState)(!1),{hasAvailableFeature:le}=Object(c.useValues)(Ie.a),{upgradeLink:oe}=Object(c.useValues)(rs.a),{featureFlags:ve}=Object(c.useValues)(Ae.a);return Object(e.jsxs)(e.Fragment,{children:[a?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(e.jsx)("span",{className:"card-secondary",children:"Type"}),Object(e.jsx)("span",{children:p.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),Object(e.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),Object(e.jsxs)("span",{children:["This flag"," ",Object(e.jsxs)("b",{children:[p.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),Object(e.jsx)(ce.a,{className:"my-3"}),p.filters.multivariate&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Variant keys"})}),ve[re.i.FF_JSON_PAYLOADS]?Object(e.jsxs)("div",{className:"border rounded p-4 mb-4",children:[Object(e.jsxs)(g.a,{gutter:16,className:"font-semibold",children:[Object(e.jsx)(d.a,{span:6,children:"Key"}),Object(e.jsx)(d.a,{span:6,children:"Description"}),Object(e.jsx)(d.a,{span:9,children:"Payload"}),Object(e.jsx)(d.a,{span:3,children:"Rollout"})]}),Object(e.jsx)(ce.a,{className:"my-3"}),l.map((J,P)=>Object(e.jsxs)("div",{children:[Object(e.jsxs)(g.a,{gutter:16,children:[Object(e.jsxs)(d.a,{span:6,children:[Object(e.jsx)(be.a,{name:A.c[P],color:be.b.Gray}),Object(e.jsx)(qe.a,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:J.key})]}),Object(e.jsx)(d.a,{span:6,children:Object(e.jsx)("span",{className:J.name?"":"text-muted",children:J.name||"There is no description for this variant key"})}),Object(e.jsx)(d.a,{span:9,children:p.filters.payloads[P]?Object(e.jsx)(Oe,{readOnly:!0,value:p.filters.payloads[P]}):Object(e.jsx)("span",{className:"text-muted",children:"No payload associated with this variant"})}),Object(e.jsxs)(d.a,{span:3,children:[J.rollout_percentage,"%"]})]}),P!==l.length-1&&Object(e.jsx)(ce.a,{className:"my-3"})]},P))]}):Object(e.jsxs)("div",{className:"border rounded p-4 mb-4",children:[Object(e.jsxs)(g.a,{className:"font-semibold",children:[Object(e.jsx)(d.a,{span:10,children:"Key"}),Object(e.jsx)(d.a,{span:11,children:"Description"}),Object(e.jsx)(d.a,{span:3,children:"Rollout"})]}),Object(e.jsx)(ce.a,{className:"my-3"}),l.map((J,P)=>Object(e.jsxs)("div",{children:[Object(e.jsxs)(g.a,{children:[Object(e.jsxs)(d.a,{span:10,children:[Object(e.jsx)(be.a,{name:A.c[P],color:be.b.Gray}),Object(e.jsx)(qe.a,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:J.key})]}),Object(e.jsx)(d.a,{span:12,children:J.name||"There is no description for this variant key"}),Object(e.jsxs)(d.a,{span:2,children:[J.rollout_percentage,"%"]})]}),P!==l.length-1&&Object(e.jsx)(ce.a,{className:"my-3"})]},P))]})]})]}):Object(e.jsxs)("div",{className:"mb-8",children:[Object(e.jsx)("h3",{className:"l4",children:"Served value"}),Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(O.a,{placement:"top",title:"Change value type? The variants below will be lost.",disabled:u,visible:ne,onConfirm:()=>{ee(!1),Z(!1)},onCancel:()=>Z(!1),okText:"OK",cancelText:"Cancel",children:Object(e.jsx)(x.a.Group,{options:[{label:"Release toggle (boolean)",value:!1},{label:Object(e.jsx)($t.a,{title:le(j.e.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:Object(e.jsxs)("div",{children:[!le(j.e.MULTIVARIATE_FLAGS)&&Object(e.jsx)(De.a,{to:oe,target:"_blank",children:Object(e.jsx)(S.a,{style:{marginRight:4,color:"var(--warning)"}})}),"Multiple variants with rollout percentages (A/B test)"]})}),value:!0,disabled:!le(j.e.MULTIVARIATE_FLAGS)}],onChange:J=>{const{value:P}=J.target;P===!1&&h.length?Z(!0):(ee(P),at(0))},value:o,optionType:"button"})})}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:[Object(A.i)(_)," will be served"," ",o?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):Object(e.jsx)("strong",{children:Object(e.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),ve[re.i.FF_JSON_PAYLOADS]&&!o&&Object(e.jsxs)("div",{className:"mb-6",children:[Object(e.jsx)("h3",{className:"l4",children:"Payload"}),!a&&Object(e.jsxs)("div",{className:"text-muted mb-4",children:["Specify a json payload to be returned when the served value is"," ",Object(e.jsx)("strong",{children:Object(e.jsx)("code",{children:"true"})}),". Examples: ",Object(e.jsx)("code",{children:'"A string"'}),", ",Object(e.jsx)("code",{children:"2500"}),", ",Object(e.jsx)("code",{children:'{"key": "value"}'})]}),a?(s=p.filters.payloads)!==null&&s!==void 0&&s.true?Object(e.jsx)(Oe,{readOnly:a,value:(r=p.filters.payloads)===null||r===void 0?void 0:r.true}):Object(e.jsx)("span",{children:"No payload associated with this flag"}):Object(e.jsx)(D.Group,{name:["filters","payloads"],children:Object(e.jsx)(X.a,{name:"true",children:Object(e.jsx)(Oe,{readOnly:a})})})]}),!a&&o&&(ve[re.i.FF_JSON_PAYLOADS]?Object(e.jsxs)("div",{className:"feature-flag-variants",children:[Object(e.jsx)("h3",{className:"l4",children:"Variant keys"}),Object(e.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),Object(e.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(e.jsxs)(g.a,{gutter:8,className:"label-row",children:[Object(e.jsx)(d.a,{span:1}),Object(e.jsx)(d.a,{span:4,children:"Variant key"}),Object(e.jsx)(d.a,{span:6,children:"Description"}),Object(e.jsx)(d.a,{span:8,children:Object(e.jsxs)("div",{style:{display:"flex",flexDirection:"column",fontWeight:"normal"},children:[Object(e.jsx)("b",{children:"Payload"}),Object(e.jsx)("span",{className:"text-muted",children:"Specify return JSON payload when key matches"})]})}),Object(e.jsxs)(d.a,{span:4,children:["Rollout",Object(e.jsx)(q.a,{type:"tertiary",onClick:K,children:"(Redistribute)"})]})]}),l.map((J,P)=>Object(e.jsx)(D.Group,{name:"filters",children:Object(e.jsxs)(g.a,{gutter:8,align:"middle",children:[Object(e.jsx)(d.a,{span:1,children:Object(e.jsx)(be.a,{name:A.c[P],color:be.b.Gray})}),Object(e.jsx)(d.a,{span:4,children:Object(e.jsx)(X.a,{name:["multivariate","variants",P,"key"],children:Object(e.jsx)(xe.a,{"data-attr":"feature-flag-variant-key","data-key-index":P.toString(),className:"ph-ignore-input",placeholder:`example-variant-${P+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(e.jsx)(d.a,{span:6,children:Object(e.jsx)(X.a,{name:["multivariate","variants",P,"name"],children:Object(e.jsx)(xe.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(e.jsx)(d.a,{span:8,children:Object(e.jsx)(X.a,{name:["payloads",P],children:me=>{let{value:C,onChange:B}=me;return Object(e.jsx)(Oe,{onChange:B,value:C})}})}),Object(e.jsx)(d.a,{span:3,children:Object(e.jsx)(X.a,{name:["multivariate","variants",P,"rollout_percentage"],children:me=>{let{value:C,onChange:B}=me;return Object(e.jsx)(xe.a,{type:"number",min:0,max:100,value:C,onChange:N=>{if(N!=null){const z=parseInt(N.toString());isNaN(z)||B(z)}}})}})}),Object(e.jsx)(d.a,{span:2,children:Object(e.jsx)(g.a,{children:l.length>1&&Object(e.jsx)(q.a,{icon:Object(e.jsx)($.IconDelete,{}),status:"primary-alt","data-attr":`delete-prop-filter-${P}`,noPadding:!0,onClick:()=>w(P)})})})]})},P)),l.length>0&&!i&&Object(e.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",b,")."]}),Object(e.jsx)(q.a,{type:"secondary",onClick:()=>{const J=l.length;I(),at(J)},icon:Object(e.jsx)($.IconPlus,{}),center:!0,children:"Add variant"})]})]}):Object(e.jsxs)("div",{className:"feature-flag-variants",children:[Object(e.jsx)("h3",{className:"l4",children:"Variant keys"}),Object(e.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),Object(e.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(e.jsxs)(g.a,{gutter:8,className:"label-row",children:[Object(e.jsx)(d.a,{span:1}),Object(e.jsx)(d.a,{span:6,children:"Variant key"}),Object(e.jsx)(d.a,{span:12,children:"Description"}),Object(e.jsxs)(d.a,{span:4,children:["Rollout",Object(e.jsx)(q.a,{type:"tertiary",onClick:K,children:"(Redistribute)"})]})]}),l.map((J,P)=>Object(e.jsx)(D.Group,{name:["filters","multivariate","variants",P],children:Object(e.jsxs)(g.a,{gutter:8,align:"middle",children:[Object(e.jsx)(d.a,{span:1,children:Object(e.jsx)(be.a,{name:A.c[P],color:be.b.Gray})}),Object(e.jsx)(d.a,{span:6,children:Object(e.jsx)(X.a,{name:"key",children:Object(e.jsx)(xe.a,{"data-attr":"feature-flag-variant-key","data-key-index":P.toString(),className:"ph-ignore-input",placeholder:`example-variant-${P+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(e.jsx)(d.a,{span:12,children:Object(e.jsx)(X.a,{name:"name",children:Object(e.jsx)(xe.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(e.jsx)(d.a,{span:3,children:Object(e.jsx)(X.a,{name:"rollout_percentage",children:me=>{let{value:C,onChange:B}=me;return Object(e.jsx)(T.a,{min:0,max:100,value:C,onChange:N=>{if(N!=null){const z=parseInt(N.toString());isNaN(z)||B(z)}},style:{width:"100%",borderColor:i?void 0:"var(--danger)"}})}})}),Object(e.jsx)(d.a,{span:2,children:Object(e.jsx)(g.a,{children:l.length>1&&Object(e.jsx)(q.a,{icon:Object(e.jsx)($.IconDelete,{}),status:"primary-alt","data-attr":`delete-prop-filter-${P}`,noPadding:!0,onClick:()=>w(P)})})})]})},P)),l.length>0&&!i&&Object(e.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",b,")."]}),Object(e.jsx)(q.a,{type:"secondary",onClick:()=>{const J=l.length;I(),at(J)},icon:Object(e.jsx)($.IconPlus,{}),center:!0,children:"Add variant"})]})]}))]})}function Ft(t){var s,r;let{readOnly:a}=t;const{showGroupsOptions:o,aggregationLabel:l}=Object(c.useValues)(ue.a),{aggregationTargetName:i,featureFlag:u,groupTypes:b,taxonomicGroupTypes:h,nonEmptyVariants:_,propertySelectErrors:p,computeBlastRadiusPercentage:K,affectedUsers:I,totalUsers:w}=Object(c.useValues)(ie),{setAggregationGroupTypeIndex:ee,updateConditionSet:ne,duplicateConditionSet:Z,removeConditionSet:le,addConditionSet:oe}=Object(c.useActions)(ie),{cohortsById:ve}=Object(c.useValues)(qt.a),{featureFlags:J}=Object(c.useValues)(Ae.a),P=Ke({value:-2}),me=C=>!!C.find(B=>B.type==="cohort"||!re.l.includes(B.key||""));return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"feature-flag-form-row",children:[Object(e.jsx)("div",{"data-attr":"feature-flag-release-conditions",children:a?Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Release conditions"})}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h3",{className:"l4",children:"Release conditions"}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:["Specify the ",i," to which you want to release this flag. Note that condition sets are rolled out independently of each other."]})]})}),!a&&o&&Object(e.jsxs)("div",{className:"centered",children:["Match by",Object(e.jsxs)(v.a,{value:((s=u.filters)===null||s===void 0?void 0:s.aggregation_group_type_index)!=null?(r=u.filters)===null||r===void 0?void 0:r.aggregation_group_type_index:-1,onChange:C=>{ee(C!==-1?C:null)},style:{marginLeft:8},"data-attr":"feature-flag-aggregation-filter",dropdownMatchSelectWidth:!1,dropdownAlign:{points:["tr","br"]},children:[Object(e.jsx)(v.a.Option,{value:-1,children:"Users"},-1),b.map(C=>Object(e.jsx)(v.a.Option,{value:C.group_type_index,children:Object(A.i)(l(C.group_type_index).plural)},C.group_type_index)),P]})]})]}),Object(e.jsx)(g.a,{gutter:16,children:u.filters.groups.map((C,B)=>{var N,z,de,ge,fe,rt,ot;return Object(e.jsxs)(d.a,{span:24,md:24,children:[B>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsxs)(g.a,{align:"middle",justify:"space-between",children:[Object(e.jsxs)(g.a,{align:"middle",children:[Object(e.jsxs)("span",{className:"simple-tag tag-light-blue font-medium mr-2",children:["Set ",B+1]}),Object(e.jsx)("div",{children:(N=C.properties)!==null&&N!==void 0&&N.length?Object(e.jsx)(e.Fragment,{children:a?Object(e.jsxs)(e.Fragment,{children:["Match ",Object(e.jsx)("b",{children:i})," against ",Object(e.jsx)("b",{children:"all"})," criteria"]}):Object(e.jsxs)(e.Fragment,{children:["Matching ",Object(e.jsx)("b",{children:i})," against the criteria"]})}):Object(e.jsxs)(e.Fragment,{children:["Condition set will match ",Object(e.jsxs)("b",{children:["all ",i]})]})})]}),!a&&Object(e.jsxs)(g.a,{children:[Object(e.jsx)(q.a,{icon:Object(e.jsx)($.IconCopy,{}),status:"muted",noPadding:!0,onClick:()=>Z(B)}),u.filters.groups.length>1&&Object(e.jsx)(q.a,{icon:Object(e.jsx)($.IconDelete,{}),status:"muted",noPadding:!0,onClick:()=>le(B)})]})]}),Object(e.jsx)(ce.a,{className:"my-3"}),!a&&me(C.properties)&&Object(e.jsxs)(bt.a,{type:"info",className:"mt-3 mb-3",children:["These properties aren't immediately available on first page load for unidentified persons. This feature flag requires that at least one event is sent prior to becoming available to your product or website."," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank",children:[" ","Learn more about how to make feature flags available instantly."]})]}),a?Object(e.jsx)(e.Fragment,{children:C.properties.map((G,Ve)=>Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"feature-flag-property-display",children:[Ve===0?Object(e.jsx)(q.a,{icon:Object(e.jsx)($.IconSubArrowRight,{className:"arrow-right"}),status:"muted",size:"small"}):Object(e.jsx)(q.a,{icon:Object(e.jsx)("span",{className:"text-sm",children:"&"}),status:"muted",size:"small"}),Object(e.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt",children:[G.type==="cohort"?"Cohort":G.key," "]}),Object(ls.d)(G)?Object(e.jsxs)("span",{children:[Object(Jt.a)(G.operator)," "]}):null,[...Array.isArray(G.value)?G.value:[G.value]].map(($e,Os)=>{var lt;return Object(e.jsx)("span",{className:"simple-tag tag-light-blue text-primary-alt display-value",children:G.type==="cohort"?$e&&((lt=ve[$e])===null||lt===void 0?void 0:lt.name)||`ID ${$e}`:$e},Os)})]},Ve)}))}):Object(e.jsx)("div",{children:Object(e.jsx)(L.a,{orFiltering:!0,pageKey:`feature-flag-${u.id}-${B}-${u.filters.groups.length}-${(z=u.filters.aggregation_group_type_index)!==null&&z!==void 0?z:""}`,propertyFilters:C==null?void 0:C.properties,logicalRowDivider:!0,addButton:Object(e.jsx)(q.a,{icon:Object(e.jsx)($.IconPlusMini,{}),noPadding:!0,children:"Add condition"}),onChange:G=>ne(B,void 0,G),taxonomicGroupTypes:h,hasRowOperator:!1,sendAllKeyUpdates:!0,errorMessages:p!=null&&(de=p[B])!==null&&de!==void 0&&(ge=de.properties)!==null&&ge!==void 0&&ge.some(G=>!!G.value)?p[B].properties.map((G,Ve)=>G.value?Object(e.jsxs)("div",{className:"text-danger flex items-center gap-1 text-sm",children:[Object(e.jsx)($.IconErrorOutline,{className:"text-xl"})," ",G.value]},Ve):Object(e.jsx)(e.Fragment,{})):null})}),(!a||a&&((fe=C.properties)===null||fe===void 0?void 0:fe.length)>0)&&Object(e.jsx)(ce.a,{className:"my-3"}),a?Object(e.jsxs)("div",{children:["Rolled out to"," ",Object(e.jsxs)("b",{children:[C.rollout_percentage!=null?C.rollout_percentage:100,"%"]})," of"," ",Object(e.jsx)("b",{children:i})," in this set."," "]}):Object(e.jsx)("div",{className:"feature-flag-form-row",children:Object(e.jsxs)("div",{className:"centered",children:["Roll out to"," ",Object(e.jsx)(T.a,{style:{width:100,marginLeft:8,marginRight:8},onChange:G=>{ne(B,G)},value:C.rollout_percentage!=null?C.rollout_percentage:100,min:0,max:100,addonAfter:"%"})," ","of ",Object(e.jsx)("b",{children:i})," in this set."," ",J[re.i.FEATURE_FLAG_ROLLOUT_UX]&&Object(e.jsxs)(e.Fragment,{children:["Will match approximately"," ",I[B]!==void 0?Object(e.jsx)("b",{children:`${K(C.rollout_percentage,B).toPrecision(2)*1}% `}):Object(e.jsx)(Fe.a,{className:"mr-1"})," ",I[B]&&I[B]>=0&&w?`(${Object(A.R)(Math.floor(I[B]*((rt=C.rollout_percentage)!==null&&rt!==void 0?rt:100)/100))} / ${Object(A.R)(w)})`:""," ","of total ",i,"."]})]})}),_.length>0&&Object(e.jsxs)(e.Fragment,{children:[(!a||a&&((ot=C.properties)===null||ot===void 0?void 0:ot.length)>0)&&Object(e.jsx)(ce.a,{className:"my-3"}),a?Object(e.jsxs)("div",{children:["All ",Object(e.jsx)("b",{children:i})," in this set"," ",C.variant?Object(e.jsxs)(e.Fragment,{children:[" ","will be in variant ",Object(e.jsx)("b",{children:C.variant})]}):Object(e.jsx)(e.Fragment,{children:"have no variant override"})]}):Object(e.jsx)("div",{className:"feature-flag-form-row",children:Object(e.jsxs)("div",{className:"centered",children:[Object(e.jsx)("b",{children:"Optional override:"})," Set variant for all"," ",Object(e.jsx)("b",{children:i})," in this set to"," ",Object(e.jsx)(Y.LemonSelect,{placeholder:"Select variant",allowClear:!0,value:C.variant,onChange:G=>ne(B,void 0,void 0,G),options:_.map(G=>({label:G.key,value:G.key})),"data-attr":"feature-flags-variant-override-select"})]})})]})]})]},`${B}-${u.filters.groups.length}`)})}),!a&&Object(e.jsx)(q.a,{type:"secondary",className:"mt-0",onClick:oe,icon:Object(e.jsx)($.IconPlus,{}),children:"Add condition set"})]})}try{Ee.displayName="FeatureFlag",Ee.__docgenInfo={description:"",displayName:"FeatureFlag",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"]={docgenInfo:Ee.__docgenInfo,name:"FeatureFlag",path:"frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"})}catch(t){}},"./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx":function(F,f,n){"use strict";n.d(f,"a",function(){return M});var m=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),D=n("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),te=n.n(D),g=n("./frontend/src/lib/api.ts"),d=n("./frontend/src/lib/utils/eventUsageLogic.ts"),U=n("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),W=n("./frontend/src/types.ts");const M=Object(m.kea)([Object(m.path)(["scenes","organization","rolesLogic"]),Object(m.connect)({values:[U.b,["allMembers"]]}),Object(m.actions)({setCreateRoleModalShown:O=>({shown:O}),setRoleInFocus:O=>({role:O}),setRoleMembersInFocus:O=>({roleMembers:O}),setRoleMembersToAdd:O=>({uuids:O}),openCreateRoleModal:!0,setPermission:(O,x)=>({resource:O,access:x}),clearPermission:!0,updateRole:O=>({role:O})}),Object(m.reducers)({createRoleModalShown:[!1,{setCreateRoleModalShown:(O,x)=>{let{shown:T}=x;return T}}],roleInFocus:[null,{setRoleInFocus:(O,x)=>{let{role:T}=x;return T}}],roleMembersInFocus:[[],{setRoleMembersInFocus:(O,x)=>{let{roleMembers:T}=x;return T}}],roleMembersToAdd:[[],{setRoleMembersToAdd:(O,x)=>{let{uuids:T}=x;return T}}],roles:[[],{updateRole:(O,x)=>{let{role:T}=x;return O.map(v=>v.id==T.id?T:v)}}]}),Object(D.loaders)(O=>{let{values:x,actions:T}=O;return{roles:{loadRoles:()=>V(this,null,function*(){const v=yield g.b.roles.list();return(v==null?void 0:v.results)||[]}),createRole:v=>V(this,null,function*(){const{roles:c,roleMembersToAdd:A}=x,L=yield g.b.roles.create(v);return yield T.addRoleMembers({role:L,membersToAdd:A}),d.e.actions.reportRoleCreated(v),T.setRoleMembersInFocus([]),T.setRoleMembersToAdd([]),T.clearPermission(),T.setCreateRoleModalShown(!1),[L,...c]}),deleteRole:v=>V(this,null,function*(){return yield g.b.roles.delete(v.id),x.roles.filter(c=>c.id!==v.id)})},roleMembersInFocus:[[],{loadRoleMembers:v=>V(this,null,function*(){let{roleId:c}=v;const A=yield g.b.roles.members.list(c);return(A==null?void 0:A.results)||[]}),addRoleMembers:v=>V(this,null,function*(){let{role:c,membersToAdd:A}=v;const L=yield Promise.all(A.map(S=>V(this,null,function*(){return yield g.b.roles.members.create(c.id,S)})));return T.setRoleMembersToAdd([]),[...x.roleMembersInFocus,...L]}),deleteRoleMember:v=>V(this,null,function*(){let{roleMemberUuid:c}=v;return x.roleInFocus&&(yield g.b.roles.members.delete(x.roleInFocus.id,c)),x.roleMembersInFocus.filter(A=>A.id!==c)})}]}}),Object(m.listeners)(O=>{let{actions:x,values:T}=O;return{setRoleInFocus:v=>{let{role:c}=v;c&&x.loadRoleMembers({roleId:c.id}),x.setCreateRoleModalShown(!0)},openCreateRoleModal:()=>{x.setRoleInFocus(null),x.setRoleMembersInFocus([]),x.setCreateRoleModalShown(!0)},setCreateRoleModalShown:()=>{T.roleInFocus?x.setPermission(W.T.FEATURE_FLAGS,T.roleInFocus.feature_flags_access_level):x.setPermission(W.T.FEATURE_FLAGS,W.a.WRITE)},deleteRoleSuccess:()=>{x.setCreateRoleModalShown(!1)}}}),Object(m.selectors)({addableMembers:[O=>[O.allMembers,O.roleMembersInFocus],(O,x)=>{const T=[];for(const v of O)x.some(c=>c.user.uuid===v.user.uuid)||T.push(v.user);return T.sort((v,c)=>v.first_name.localeCompare(c.first_name)),T}]}),Object(m.afterMount)(O=>{let{actions:x}=O;x.loadRoles()})])},"./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx":function(F,f,n){"use strict";n.d(f,"a",function(){return v}),n.d(f,"b",function(){return A});var m=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),D=n("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),te=n.n(D),g=n("./frontend/src/lib/api.ts"),d=n("./frontend/src/types.ts"),U=n("./frontend/src/lib/logic/featureFlagLogic.ts"),W=n("./frontend/src/lib/constants.tsx"),M=n("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx"),O=n("./frontend/@posthog/lemon-ui/src/index.ts"),x=n("./frontend/src/lib/utils/eventUsageLogic.ts");const T={[d.T.FEATURE_FLAGS]:"Feature Flags"},v={[d.a.WRITE]:"View & Edit",[d.a.READ]:"View Only"},c={[d.T.FEATURE_FLAGS]:"feature_flags_access_level"},A=Object(m.kea)([Object(m.path)(["scenes","organization","Settings","Permissions","permissionsLogic"]),Object(m.connect)({values:[U.a,["featureFlags"],M.a,["roles"]],actions:[M.a,["updateRole"]]}),Object(m.actions)({updatePermission:(L,S,j,R)=>({checked:L,role:S,resourceId:j,resourceType:R})}),Object(D.loaders)(L=>{let{values:S}=L;return{organizationResourcePermissions:[[],{loadOrganizationResourcePermissions:()=>V(this,null,function*(){const j=yield g.b.resourcePermissions.list();return(j==null?void 0:j.results)||[]}),updateOrganizationResourcePermission:j=>V(this,null,function*(){let{id:R,resource:Q,access_level:k}=j;if(R){const H=yield g.b.resourcePermissions.update(R,{access_level:k});return S.organizationResourcePermissions.map(se=>se.id==H.id?H:se)}else{const H=yield g.b.resourcePermissions.create({resource:Q,access_level:k});return[...S.organizationResourcePermissions,H]}})}]}}),Object(m.listeners)(L=>{let{actions:S}=L;return{updatePermission:j=>V(this,null,function*(){let{checked:R,role:Q,resourceId:k,resourceType:H}=j;const se=R?d.a.WRITE:d.a.READ;if(Q.id){const ue=yield g.b.roles.update(Q.id,{[c[H]]:se});ue&&(S.updateRole(ue),O.lemonToast.success(`${Q.name} role ${H} edit access updated`))}else S.updateOrganizationResourcePermission({id:k,resource:H,access_level:se});x.e.actions.reportResourceAccessLevelUpdated(H,Q.name,se)}),updateOrganizationResourcePermissionSuccess:()=>{O.lemonToast.success("Organizational edit access updated")}}}),Object(m.selectors)({organizationResourcePermissionsMap:[L=>[L.organizationResourcePermissions],L=>L.reduce((S,j)=>E(y({},S),{[j.resource]:j}),{})],allPermissions:[L=>[L.organizationResourcePermissionsMap],L=>Object.keys(T).map(S=>{var j,R;return{id:((j=L[S])===null||j===void 0?void 0:j.id)||null,resource:S,name:T[S],access_level:((R=L[S])===null||R===void 0?void 0:R.access_level)||d.a.WRITE}})],shouldShowPermissionsTable:[L=>[L.featureFlags],L=>L[W.i.ROLE_BASED_ACCESS]==="control"],resourceRolesAccess:[L=>[L.allPermissions,L.roles],(L,S)=>{const j=L.map(R=>({[R.resource]:{organization_default:R.access_level,id:R.id}}));for(const R of S)for(const Q of j){const k=Object.keys(Q)[0];Q[k][`${R.name}`]=R[c[k]]}return j}]}),Object(m.afterMount)(L=>{let{actions:S}=L;S.loadOrganizationResourcePermissions()})])},"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function(F,f,n){"use strict";n.d(f,"a",function(){return U});var m=n("./frontend/@posthog/lemon-ui/src/index.ts"),D=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),te=n.n(D),g=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),d=n.n(g);function U(W){let{to:M,onClick:O,title:x,subtitle:T,prefix:v,suffix:c}=W;return Object(g.jsx)(m.LemonButton,{fullWidth:!0,to:M,onClick:O,children:Object(g.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[v?Object(g.jsx)("span",{className:"shrink-0",children:v}):null,Object(g.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(g.jsx)("div",{className:"text-primary font-semibold truncate",children:x}),Object(g.jsx)("div",{className:"truncate text-default font-normal",children:T})]}),c?Object(g.jsx)("span",{className:"shrink-0",children:c}):null]})})}try{U.displayName="ProjectHomePageCompactListItem",U.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:U.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(W){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(F,f,n){"use strict";var m=n("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),D=n.n(m),te=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),g=n.n(te),d={};d.insert="head",d.singleton=!1;var U=D()(g.a,d),W=g.a.locals||{}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(F,f,n){"use strict";n.d(f,"a",function(){return A}),n.d(f,"b",function(){return L});var m=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),D=n.n(m),te=n("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),g=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),d=n("./frontend/src/lib/dayjs.ts"),U=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),W=n("./frontend/src/scenes/urls.ts"),M=n("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),O=n("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),x=n("./frontend/src/lib/utils/eventUsageLogic.ts"),T=n("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),v=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),c=n.n(v);function A(S){let{insight:j}=S;const{reportInsightOpenedFromRecentInsightList:R}=Object(g.useActions)(x.e);return Object(v.jsx)(T.a,{title:j.name||j.derived_name||"Insight",subtitle:`Last modified ${Object(d.a)(j.last_modified_at).fromNow()}`,prefix:Object(v.jsx)(M.InsightIcon,{insight:j}),to:W.a.insightView(j.short_id),onClick:()=>{R()}})}function L(){const{recentInsights:S,recentInsightsLoading:j}=Object(g.useValues)(O.a),{loadRecentInsights:R}=Object(g.useActions)(O.a);return Object(m.useEffect)(()=>{R()},[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(U.a,{title:"Your recently viewed insights",viewAllURL:W.a.savedInsights(),loading:j,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:W.a.savedInsights()},items:S.slice(0,5),renderRow:(Q,k)=>Object(v.jsx)(A,{insight:Q},k)})})}try{A.displayName="InsightRow",A.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:A.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(S){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(F,f,n){"use strict";n.d(f,"b",function(){return R}),n.d(f,"a",function(){return Q});var m=n("./frontend/src/lib/dayjs.ts"),D=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),te=n("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),g=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),d=n("./frontend/src/lib/components/ProfilePicture/index.ts"),U=n("./frontend/src/scenes/persons/PersonHeader.tsx"),W=n("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),M=n("./frontend/src/scenes/urls.ts"),O=n("./frontend/src/lib/utils/eventUsageLogic.ts"),x=n("./frontend/src/lib/utils.tsx"),T=n("./frontend/src/lib/components/icons.tsx"),v=n("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),c=n("./frontend/src/scenes/teamLogic.tsx"),A=n("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),L=n("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),S=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),j=n.n(S);function R(k){let{recording:H}=k;const{openSessionPlayer:se}=Object(D.useActions)(A.a),{reportRecordingOpenedFromRecentRecordingList:ue}=Object(D.useActions)(O.e);return Object(S.jsx)(L.a,{title:Object(U.b)(H.person),subtitle:`Recorded ${Object(m.a)(H.start_time).fromNow()}`,prefix:Object(S.jsx)(d.b,{name:Object(U.b)(H.person)}),suffix:Object(S.jsxs)("div",{className:"flex items-center justify-end text-default",children:[Object(S.jsx)("span",{children:Object(x.P)(H.recording_duration)}),Object(S.jsx)(T.IconPlayCircle,{className:"text-2xl ml-2"})]}),onClick:()=>{se({id:H.id,matching_events:H.matching_events}),ue()}})}function Q(){const{currentTeam:k}=Object(D.useValues)(c.a),H=Object(W.e)({key:"projectHomepage"}),{sessionRecordings:se,sessionRecordingsResponseLoading:ue}=Object(D.useValues)(H);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(v.a,{}),Object(S.jsx)(g.a,{title:"Recent recordings",viewAllURL:M.a.sessionRecordings(),loading:ue,emptyMessage:k!=null&&k.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:M.a.projectSettings()+"#recordings"},items:se.slice(0,5),renderRow:(pe,We)=>Object(S.jsx)(R,{recording:pe},We)})]})}try{R.displayName="RecordingRow",R.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:R.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(k){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(F,f,n){"use strict";n.d(f,"a",function(){return W});var m=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),D=n("./frontend/src/scenes/teamLogic.tsx"),te=n("./frontend/src/types.ts"),g=n("./frontend/src/lib/api.ts"),d=n("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),U=n.n(d);const W=Object(m.kea)([Object(m.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(m.connect)({values:[D.a,["currentTeamId","currentTeam"]]}),Object(m.selectors)({primaryDashboardId:[()=>[D.a.selectors.currentTeam],M=>M==null?void 0:M.primary_dashboard],dashboardLogicProps:[M=>[M.primaryDashboardId],M=>({id:M!=null?M:void 0,placement:te.n.ProjectHomepage})]}),Object(d.loaders)(M=>{let{values:O}=M;return{recentInsights:[[],{loadRecentInsights:()=>V(this,null,function*(){return yield g.b.get(`api/projects/${O.currentTeamId}/insights/my_last_viewed`)})}],persons:[[],{loadPersons:()=>V(this,null,function*(){return(yield g.b.persons.list()).results})}]}}),Object(m.afterMount)(M=>{let{actions:O}=M;O.loadPersons()})])},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LockOutlined.js":function(F,f,n){"use strict";var m=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),D=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},g=te,d=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),U=function(O,x){return D.createElement(d.a,Object(m.a)(Object(m.a)({},O),{},{ref:x,icon:g}))};U.displayName="LockOutlined";var W=f.a=D.forwardRef(U)},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss":function(F,f,n){var m=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");f=m(!1),f.push([F.i,".variant-form-list{font-size:13px;border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-top:16px}.variant-form-list .ant-form-item{min-height:32px}.variant-form-list .label-row{font-weight:700}.variant-form-list .label-row .ant-col{min-height:32px;display:flex;justify-content:space-between;align-items:center}.feature-flag-property-display{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.feature-flag-property-display .arrow-right{margin-right:-8px;margin-top:.25rem}.feature-flag-property-display .display-value{word-break:break-all}.condition-set-separator{color:var(--primary-alt);font-size:12px;font-weight:var(--font-semibold);margin-left:.5rem;margin-bottom:.5rem}.feature-flag-form-row{display:flex;justify-content:space-between;align-items:center;width:100%}.feature-flag-form-row .centered{display:flex;align-items:center;white-space:pre-wrap}",""]),F.exports=f},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss":function(F,f,n){var m=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");f=m(!1),f.push([F.i,".FeatureFlagInstructionsHeader{flex-wrap:nowrap}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title{display:flex;justify-items:center}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title .FeatureFlagInstructionsHeader__header-title__icon{color:var(--text-muted-alt);margin-right:12px;font-size:1.6em}.FeatureFlagInstructionsHeader__option{display:flex;justify-items:center}.FeatureFlagInstructionsHeader__option .FeatureFlagInstructionsHeader__option__icon{margin-top:2px;margin-right:8px}",""]),F.exports=f},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/JSONEditorInput.scss":function(F,f,n){var m=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");f=m(!1),f.push([F.i,".JsonEditorInput .border{border-radius:var(--radius)}.JsonEditorInput .border .monaco-editor,.JsonEditorInput .border .monaco-editor .overflow-guard{border-radius:inherit}",""]),F.exports=f},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(F,f,n){var m=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");f=m(!1),f.push([F.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),F.exports=f}}]);
