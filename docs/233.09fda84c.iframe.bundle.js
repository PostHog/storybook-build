(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(ce,v,e){"use strict";e.r(v),e.d(v,"scene",function(){return ae}),e.d(v,"ActionsTable",function(){return ue});var x=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),S=e.n(x),g=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),t=e.n(g),N=e("./node_modules/core-js/modules/es.array.map.js"),A=e.n(N),F=e("./node_modules/core-js/modules/es.regexp.exec.js"),O=e.n(F),C=e("./node_modules/core-js/modules/es.string.search.js"),z=e.n(C),b=e("./node_modules/core-js/modules/es.array.concat.js"),V=e.n(b),M=e("./node_modules/core-js/modules/es.function.name.js"),Q=e.n(M),h=e("./node_modules/core-js/modules/es.array.slice.js"),y=e.n(h),R=e("./node_modules/core-js/modules/es.number.constructor.js"),q=e.n(R),B=e("./node_modules/core-js/modules/es.array.filter.js"),ee=e.n(B),Y=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(Y),P=e("./node_modules/react/index.js"),n=e.n(P),D=e("./frontend/src/scenes/actions/Actions.scss"),E=e("./frontend/src/lib/components/Link.tsx"),d=e("./node_modules/antd/es/radio/index.js"),i=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),f=e("./frontend/src/lib/utils.tsx"),s=e("./node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/models/actionsModel.ts"),K=e("./frontend/src/scenes/actions/NewActionButton.tsx"),j=e("./frontend/src/types.ts"),$=e("./node_modules/fuse.js/dist/fuse.esm.js"),T=e("./frontend/src/scenes/userLogic.ts"),X=e("./frontend/src/scenes/teamLogic.tsx"),Z=e("./frontend/src/lib/api.ts"),W=e("./frontend/src/scenes/urls.ts"),H=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),te=e("./frontend/src/lib/components/LemonTable/index.ts"),r=e("./frontend/src/lib/components/LemonButton/index.ts"),J=e("./frontend/src/lib/components/LemonDivider/index.ts"),I=e("./frontend/src/lib/components/LemonButton/More.tsx"),o=e("./node_modules/kea-router/lib/index.js"),l=e.n(o),a=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),_=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),L=e("./frontend/src/lib/components/PageHeader.tsx"),p=e("./frontend/@posthog/lemon-ui/src/index.ts"),ne=function(se,le){return new $.a(se,{keys:["name","url"],threshold:.3}).search(le).map(function(de){return de.item})},ae={component:ue};function ue(){var Ee=Object(s.useValues)(X.a),se=Ee.currentTeam,le=Object(s.useValues)(Object(u.a)({params:"include_count=1"})),de=le.actions,Me=le.actionsLoading,fe=Object(s.useActions)(u.a),ve=fe.loadActions,je=Object(P.useState)(""),me=t()(je,2),_e=me[0],Te=me[1],ge=Object(P.useState)(!1),Oe=t()(ge,2),Pe=Oe[0],Ae=Oe[1],De=Object(s.useValues)(T.a),ie=De.user,Ie=De.hasAvailableFeature,Le=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(c,m){return(c.name||"").localeCompare(m.name||"")},render:function(c,m,k){return n.a.createElement(E.a,{"data-attr":"action-link-"+k,to:W.a.action(m.id),className:"row-name"},c||n.a.createElement("i",null,"Unnamed action"))}}].concat(S()(Ie(j.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(c){return n.a.createElement(a.a,{tags:c,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(c,m){var k;return n.a.createElement("span",null,(k=m.steps)!==null&&k!==void 0&&k.length?m.steps.map(function(re){return n.a.createElement("div",{key:re.id},function(){var w=Object(f.Ab)(re.url||"");switch(w=w.slice(0,40)+(w.length>40?"...":""),re.event){case"$autocapture":return"Autocapture";case"$pageview":switch(re.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,w));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,w));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,w))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,re.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(H.b)(),Object(H.a)()],S()(se!=null&&se.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(c,m){return Number(c.post_to_slack)-Number(m.post_to_slack)},render:function(c){return c?n.a.createElement(i.a,null):null}}]:[]),[{width:0,render:function(c,m){return n.a.createElement(I.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,{status:"stealth",to:W.a.action(m.id),fullWidth:!0},"Edit"),n.a.createElement(r.a,{status:"stealth",to:Object(o.combineUrl)(W.a.insightNew({insight:j.B.TRENDS,interval:"day",display:j.j.ActionsLineGraph,actions:[{id:m.id,name:m.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(J.a,null),n.a.createElement(r.a,{status:"danger",onClick:function(){return Object(f.w)({endpoint:Z.b.actions.determineDeleteEndpoint(),object:m,callback:ve})},fullWidth:!0},"Delete action"))})}}]),oe=de;return _e&&_e!==""&&(oe=ne(oe,_e)),Pe&&(oe=oe.filter(function(U){var c;return((c=U.created_by)===null||c===void 0?void 0:c.uuid)===(ie==null?void 0:ie.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(L.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),n.a.createElement(_.a,{tab:_.b.Actions}),n.a.createElement(p.LemonInput,{type:"search",placeholder:"Search for actions",onChange:Te,value:_e}),n.a.createElement(d.a.Group,{buttonStyle:"solid",value:Pe,onChange:function(c){return Ae(c.target.value)}},n.a.createElement(d.a.Button,{value:!1},"All actions"),n.a.createElement(d.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb-4 float-right"},n.a.createElement(K.a,null)),n.a.createElement(te.a,{columns:Le,loading:Me,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:oe,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/actions/NewActionButton.tsx":function(ce,v,e){"use strict";e.d(v,"a",function(){return ee});var x=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),S=e.n(x),g=e("./node_modules/react/index.js"),t=e.n(g),N=e("./node_modules/antd/es/modal/index.js"),A=e("./node_modules/antd/es/button/index.js"),F=e("./node_modules/antd/es/row/index.js"),O=e("./node_modules/antd/es/col/index.js"),C=e("./node_modules/antd/es/card/index.js"),z=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),b=e("./node_modules/kea-router/lib/index.js"),V=e.n(b),M=e("./frontend/src/scenes/urls.ts"),Q=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx"),h=e("./frontend/src/lib/components/icons.tsx"),y=e("./frontend/src/lib/components/LemonButton/index.ts"),R=e("./node_modules/kea/lib/index.esm.js"),q=e("./frontend/src/lib/logic/featureFlagLogic.ts"),B=e("./frontend/src/lib/constants.tsx");function ee(){var Y=Object(g.useState)(!1),G=S()(Y,2),P=G[0],n=G[1],D=Object(g.useState)(!1),E=S()(D,2),d=E[0],i=E[1],f=Object(R.useValues)(q.a),s=f.featureFlags;return t.a.createElement(t.a.Fragment,null,t.a.createElement(y.a,{type:"primary",onClick:function(){return n(!0)},"data-attr":"create-action"},"New ",s[B.h.SIMPLIFY_ACTIONS]?"Calculated Event":"Action"),t.a.createElement(N.a,{visible:P,style:{cursor:"pointer"},onCancel:function(){n(!1),i(!1)},title:"Create new ".concat(s[B.h.SIMPLIFY_ACTIONS]?"calculated event":"action"),footer:[d&&t.a.createElement(A.a,{key:"back-button",onClick:function(){return i(!1)}},"Back"),t.a.createElement(A.a,{key:"cancel-button",onClick:function(){n(!1),i(!1)}},"Cancel")]},!d&&t.a.createElement(F.a,{gutter:2,justify:"space-between"},t.a.createElement(O.a,{xs:11},t.a.createElement(C.a,{title:"Inspect element on your site",onClick:function(){return i(!0)},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40}},t.a.createElement(z.a,null)))),t.a.createElement(O.a,{xs:11},t.a.createElement(C.a,{title:"From event or pageview",onClick:function(){b.router.actions.push(M.a.createAction())},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},t.a.createElement(h.IconEdit,null))))),d&&t.a.createElement(Q.a,null)))}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(ce,v,e){"use strict";e.d(v,"b",function(){return r}),e.d(v,"a",function(){return I});var x=e("./node_modules/core-js/modules/es.object.keys.js"),S=e.n(x),g=e("./node_modules/core-js/modules/es.symbol.js"),t=e.n(g),N=e("./node_modules/core-js/modules/es.array.filter.js"),A=e.n(N),F=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),O=e.n(F),C=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),z=e.n(C),b=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),V=e.n(b),M=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Q=e.n(M),h=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),y=e.n(h),R=e("./node_modules/core-js/modules/es.array.iterator.js"),q=e.n(R),B=e("./node_modules/core-js/modules/es.object.to-string.js"),ee=e.n(B),Y=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),G=e.n(Y),P=e("./node_modules/core-js/modules/es.object.from-entries.js"),n=e.n(P),D=e("./node_modules/core-js/modules/es.array.map.js"),E=e.n(D),d=e("./node_modules/core-js/modules/es.object.entries.js"),i=e.n(d),f=e("./node_modules/react/index.js"),s=e.n(f),u=e("./node_modules/kea/lib/index.esm.js"),K=e("./node_modules/antd/es/tabs/index.js"),j=e("./frontend/src/scenes/urls.ts"),$=e("./frontend/src/lib/components/Tooltip.tsx"),T=e("./frontend/src/lib/components/icons.tsx"),X=e("./frontend/src/lib/components/TitleWithIcon.tsx"),Z=e("./frontend/src/lib/logic/featureFlagLogic.ts"),W=e("./frontend/src/lib/constants.tsx");function H(o,l){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(o);l&&(_=_.filter(function(L){return Object.getOwnPropertyDescriptor(o,L).enumerable})),a.push.apply(a,_)}return a}function te(o){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?arguments[l]:{};l%2?H(Object(a),!0).forEach(function(_){y()(o,_,a[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach(function(_){Object.defineProperty(o,_,Object.getOwnPropertyDescriptor(a,_))})}return o}var r;(function(o){o.Actions="actions",o.EventDefinitions="events",o.EventPropertyDefinitions="properties"})(r||(r={}));var J=Object(u.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(l){return{tab:l}}},reducers:{tab:[r.EventDefinitions,{setTab:function(l,a){var _=a.tab;return _}}]},selectors:function(){return{tabUrls:[function(){return[Z.a.selectors.featureFlags]},function(l){var a;return te((a={},y()(a,r.EventPropertyDefinitions,j.a.eventPropertyDefinitions()),y()(a,r.EventDefinitions,j.a.eventDefinitions()),a),l[W.h.SIMPLIFY_ACTIONS]?{}:y()({},r.Actions,j.a.actions()))}]}},actionToUrl:function(l){var a=l.values;return{setTab:function(L){var p=L.tab;return a.tabUrls[p]||j.a.events()}}},urlToAction:function(l){var a=l.actions,_=l.values;return Object.fromEntries(Object.entries(_.tabUrls).map(function(L){var p=Q()(L,2),ne=p[0],ae=p[1];return[ae,function(){_.tab!==ne&&a.setTab(ne)}]}))}});function I(o){var l=o.tab,a=Object(u.useActions)(J),_=a.setTab,L=Object(u.useValues)(Z.a),p=L.featureFlags;return s.a.createElement(K.a,{tabPosition:"top",animated:!1,activeKey:l,onTabClick:function(ae){return _(ae)}},s.a.createElement(K.a.TabPane,{tab:s.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:r.EventDefinitions}),!p[W.h.SIMPLIFY_ACTIONS]&&s.a.createElement(K.a.TabPane,{tab:s.a.createElement(X.a,{icon:s.a.createElement($.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},s.a.createElement(T.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:r.Actions}),s.a.createElement(K.a.TabPane,{tab:s.a.createElement(X.a,{icon:s.a.createElement($.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},s.a.createElement(T.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:r.EventPropertyDefinitions}))}try{I.displayName="DataManagementPageTabs",I.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:I.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(o){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx":function(ce,v,e){"use strict";e.d(v,"a",function(){return P});var x=e("./node_modules/core-js/modules/es.array.map.js"),S=e.n(x),g=e("./node_modules/react/index.js"),t=e.n(g),N=e("./node_modules/clsx/dist/clsx.m.js"),A=e("./node_modules/kea/lib/index.esm.js"),F=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),O=e("./frontend/src/lib/components/LemonButton/index.ts"),C=e("./node_modules/antd/es/popconfirm/index.js"),z=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),b=e("./frontend/src/lib/utils.tsx"),V=e("./frontend/src/lib/components/LemonRow/index.ts"),M=e("./frontend/src/lib/components/icons.tsx"),Q=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),h=e("./node_modules/kea-forms/lib/index.js"),y=e.n(h),R=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),q=e("./frontend/src/lib/forms/Field.tsx"),B=e("./node_modules/antd/lib/typography/index.js"),ee=e.n(B);function Y(n){var D=n.numberOfResults,E=n.isSearching,d=n.isAddingEntry;return D>0?null:E?t.a.createElement(V.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs that match your search."):d?null:t.a.createElement(V.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs or domains. Add one to get started.")}function G(n){var D=n.actionId,E=Object(z.b)({actionId:D}),d=Object(A.useValues)(E),i=d.isProposedUrlSubmitting,f=Object(A.useActions)(E),s=f.cancelProposingUrl;return t.a.createElement(h.Form,{logic:z.b,props:{actionId:D},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2"},t.a.createElement(q.a,{name:"url"},t.a.createElement(R.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),t.a.createElement("div",{className:"flex justify-end gap-2"},t.a.createElement(O.a,{type:"secondary",onClick:s},"Cancel"),t.a.createElement(O.a,{htmlType:"submit",type:"primary",disabled:i,"data-attr":"url-save"},"Save")))}function P(n){var D=n.pageKey,E=n.actionId,d=Object(z.b)({actionId:E}),i=Object(A.useValues)(d),f=i.appUrlsKeyed,s=i.suggestionsLoading,u=i.searchTerm,K=i.launchUrl,j=i.editUrlIndex,$=i.isAddUrlFormVisible,T=Object(A.useActions)(d),X=T.addUrl,Z=T.removeUrl,W=T.setSearchTerm,H=T.newUrl,te=T.setEditUrlIndex;return t.a.createElement("div",null,t.a.createElement("div",{className:"flex items-center mb-4 gap-2 justify-between"},t.a.createElement(R.a,{type:"search",autoFocus:D==="toolbar-launch"&&!Object(b.Y)(),placeholder:"Search for authorized URLs",onChange:W,value:u}),t.a.createElement(O.a,{onClick:H,type:"secondary",icon:t.a.createElement(M.IconPlus,null),"data-attr":"toolbar-add-url"},"Add",D==="toolbar-launch"&&" authorized URL")),s?t.a.createElement(V.a,{outlined:!0,fullWidth:!0,size:"large",key:-1},t.a.createElement(Q.a,{className:"text-xl"})):t.a.createElement("div",{className:"space-y-2"},$&&t.a.createElement(V.a,{outlined:!0,fullWidth:!0,size:"large"},t.a.createElement(G,{actionId:E})),t.a.createElement(Y,{numberOfResults:f.length,isSearching:u.length>0,isAddingEntry:$}),f.map(function(r,J){return t.a.createElement("div",{key:J,className:Object(N.a)("border rounded flex items-center py-2 px-4 min-h-14")},j===J?t.a.createElement(G,{actionId:E}):t.a.createElement(t.a.Fragment,null,r.type==="suggestion"&&t.a.createElement(F.a,{type:"highlight",className:"mr-4"},"Suggestion"),t.a.createElement(ee.a.Text,{ellipsis:{tooltip:r.url},className:"text-muted-alt flex-1"},r.url),t.a.createElement("div",{className:"Actions flex space-x-2 shrink-0"},r.type==="suggestion"?t.a.createElement(O.a,{onClick:function(){return X(r.url)},icon:t.a.createElement(M.IconPlus,null),"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):t.a.createElement(t.a.Fragment,null,t.a.createElement(O.a,{icon:t.a.createElement(M.IconOpenInApp,null),href:K(r.url),tooltip:"Launch toolbar",center:!0,className:"ActionButton","data-attr":"toolbar-open"},"Launch"),t.a.createElement(O.a,{icon:t.a.createElement(M.IconEdit,null),onClick:function(){return te(r.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),t.a.createElement(C.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Are you sure you want to remove this authorized url?"),onConfirm:function(){return Z(J)}},t.a.createElement(O.a,{icon:t.a.createElement(M.IconDelete,null),tooltip:"Remove URL",center:!0,className:"ActionButton"}))))))})))}try{P.displayName="AuthorizedUrls",P.__docgenInfo={description:"",displayName:"AuthorizedUrls",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"]={docgenInfo:P.__docgenInfo,name:"AuthorizedUrls",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"})}catch(n){}}}]);
