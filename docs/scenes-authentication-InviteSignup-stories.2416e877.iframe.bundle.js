(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[41694,5747],{"../../frontend/src/scenes/authentication/InviteSignup.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Cloud:()=>Cloud,CloudEU:()=>CloudEU,InvalidLink:()=>InvalidLink,LoggedIn:()=>LoggedIn,LoggedInWrongUser:()=>LoggedInWrongUser,SSOEnforcedGoogle:()=>SSOEnforcedGoogle,SSOEnforcedSaml:()=>SSOEnforcedSaml,SelfHosted:()=>SelfHosted,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_mocks_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/mocks/browser.tsx"),_mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/mocks/fixtures/_preflight.json"),_InviteSignup__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/authentication/InviteSignup.tsx"),_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/authentication/inviteSignupLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let __WEBPACK_DEFAULT_EXPORT__={title:"Scenes-Other/InviteSignup",parameters:{layout:"fullscreen",viewMode:"story",testOptions:{waitForSelector:".BridgePage__left__message--enter-done"}},decorators:[(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.x8)({get:{"/api/users/@me":()=>[500,null],"/api/signup/1234/":()=>[200,{id:"1234",target_email:"b*@posthog.com",first_name:"Jane Doe",organization_name:"PostHog"}]},post:{"/api/signup":(_,__,ctx)=>[ctx.delay(1e3),ctx.status(200),ctx.json({success:!0})],"/api/signup/1234":(_,__,ctx)=>[ctx.delay(1e3),ctx.status(200),ctx.json({success:!0})],"/api/login/precheck":{sso_enforcement:null,saml_available:!1}}})]},SelfHosted=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_2__,cloud:!1,realm:"hosted-clickhouse",available_social_auth_providers:{github:!1,gitlab:!1,"google-oauth2":!1,saml:!1}}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("1234")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})),Cloud=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_2__,cloud:!0,realm:"cloud",can_create_org:!0,available_social_auth_providers:{github:!0,gitlab:!0,"google-oauth2":!0,saml:!1}}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("1234")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})),CloudEU=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_2__,cloud:!0,region:"EU",realm:"cloud",can_create_org:!0,available_social_auth_providers:{github:!0,gitlab:!0,"google-oauth2":!0,saml:!1}}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("1234")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})),InvalidLink=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_2__,cloud:!0,realm:"cloud",can_create_org:!0,available_social_auth_providers:{github:!0,gitlab:!0,"google-oauth2":!0,saml:!1}}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("not-found")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})),LoggedIn=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_2__,cloud:!0,realm:"cloud",can_create_org:!0,available_social_auth_providers:{github:!0,gitlab:!0,"google-oauth2":!0,saml:!1}},"/api/users/@me":()=>[200,{email:"ben@posthog.com",first_name:"Ben White",organization:{name:"Other org"}}]}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("1234")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})),LoggedInWrongUser=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_2__,cloud:!0,realm:"cloud",can_create_org:!0,available_social_auth_providers:{github:!0,gitlab:!0,"google-oauth2":!0,saml:!1}},"/api/users/@me":()=>[200,{email:"ben@posthog.com",first_name:"Ben White",organization:{name:"Other org"}}],"/api/signup/1234/":()=>[400,{code:"invalid_recipient"}]}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("1234")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"border-b border-t p-4 font-bold",children:"HEADER AREA"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})]})),SSOEnforcedSaml=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({post:{"/api/login/precheck":{sso_enforcement:"saml",saml_available:!0}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("1234")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"border-b border-t p-4 font-bold",children:"HEADER AREA"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})]})),SSOEnforcedGoogle=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_1__.ok)({post:{"/api/login/precheck":{sso_enforcement:"google-oauth2",saml_available:!1}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_4__.C.actions.prevalidateInvite("1234")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"border-b border-t p-4 font-bold",children:"HEADER AREA"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_InviteSignup__WEBPACK_IMPORTED_MODULE_3__.InviteSignup,{})]}));SelfHosted.parameters={...SelfHosted.parameters,docs:{...SelfHosted.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: false,\n        realm: 'hosted-clickhouse',\n        available_social_auth_providers: {\n          github: false,\n          gitlab: false,\n          'google-oauth2': false,\n          saml: false\n        }\n      }\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('1234');\n  }, []);\n  return <InviteSignup />;\n}",...SelfHosted.parameters?.docs?.source}}},Cloud.parameters={...Cloud.parameters,docs:{...Cloud.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: true,\n        realm: 'cloud',\n        can_create_org: true,\n        available_social_auth_providers: {\n          github: true,\n          gitlab: true,\n          'google-oauth2': true,\n          saml: false\n        }\n      }\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('1234');\n  }, []);\n  return <InviteSignup />;\n}",...Cloud.parameters?.docs?.source}}},CloudEU.parameters={...CloudEU.parameters,docs:{...CloudEU.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: true,\n        region: 'EU',\n        realm: 'cloud',\n        can_create_org: true,\n        available_social_auth_providers: {\n          github: true,\n          gitlab: true,\n          'google-oauth2': true,\n          saml: false\n        }\n      }\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('1234');\n  }, []);\n  return <InviteSignup />;\n}",...CloudEU.parameters?.docs?.source}}},InvalidLink.parameters={...InvalidLink.parameters,docs:{...InvalidLink.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: true,\n        realm: 'cloud',\n        can_create_org: true,\n        available_social_auth_providers: {\n          github: true,\n          gitlab: true,\n          'google-oauth2': true,\n          saml: false\n        }\n      }\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('not-found');\n  }, []);\n  return <InviteSignup />;\n}",...InvalidLink.parameters?.docs?.source}}},LoggedIn.parameters={...LoggedIn.parameters,docs:{...LoggedIn.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: true,\n        realm: 'cloud',\n        can_create_org: true,\n        available_social_auth_providers: {\n          github: true,\n          gitlab: true,\n          'google-oauth2': true,\n          saml: false\n        }\n      },\n      '/api/users/@me': () => [200, {\n        email: 'ben@posthog.com',\n        first_name: 'Ben White',\n        organization: {\n          name: 'Other org'\n        }\n      }]\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('1234');\n  }, []);\n  return <InviteSignup />;\n}",...LoggedIn.parameters?.docs?.source}}},LoggedInWrongUser.parameters={...LoggedInWrongUser.parameters,docs:{...LoggedInWrongUser.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: true,\n        realm: 'cloud',\n        can_create_org: true,\n        available_social_auth_providers: {\n          github: true,\n          gitlab: true,\n          'google-oauth2': true,\n          saml: false\n        }\n      },\n      '/api/users/@me': () => [200, {\n        email: 'ben@posthog.com',\n        first_name: 'Ben White',\n        organization: {\n          name: 'Other org'\n        }\n      }],\n      '/api/signup/1234/': () => [400, {\n        code: 'invalid_recipient'\n      }]\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('1234');\n  }, []);\n  return <div>\n            <div className=\"border-b border-t p-4 font-bold\">HEADER AREA</div>\n            <InviteSignup />\n        </div>;\n}",...LoggedInWrongUser.parameters?.docs?.source}}},SSOEnforcedSaml.parameters={...SSOEnforcedSaml.parameters,docs:{...SSOEnforcedSaml.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    post: {\n      '/api/login/precheck': {\n        sso_enforcement: 'saml',\n        saml_available: true\n      }\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('1234');\n  }, []);\n  return <div>\n            <div className=\"border-b border-t p-4 font-bold\">HEADER AREA</div>\n            <InviteSignup />\n        </div>;\n}",...SSOEnforcedSaml.parameters?.docs?.source}}},SSOEnforcedGoogle.parameters={...SSOEnforcedGoogle.parameters,docs:{...SSOEnforcedGoogle.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    post: {\n      '/api/login/precheck': {\n        sso_enforcement: 'google-oauth2',\n        saml_available: false\n      }\n    }\n  });\n  useEffect(() => {\n    inviteSignupLogic.actions.prevalidateInvite('1234');\n  }, []);\n  return <div>\n            <div className=\"border-b border-t p-4 font-bold\">HEADER AREA</div>\n            <InviteSignup />\n        </div>;\n}",...SSOEnforcedGoogle.parameters?.docs?.source}}};let __namedExportsOrder=["SelfHosted","Cloud","CloudEU","InvalidLink","LoggedIn","LoggedInWrongUser","SSOEnforcedSaml","SSOEnforcedGoogle"]},"../../frontend/src/lib/components/BridgePage/BridgePage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>BridgePage_BridgePage_BridgePage});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),BridgePage=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.3_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/components/BridgePage/BridgePage.scss"),BridgePage_default=__webpack_require__.n(BridgePage),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(BridgePage_default(),options),BridgePage_default().locals;var clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),CSSTransition=__webpack_require__("../../node_modules/.pnpm/react-transition-group@4.4.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/react-transition-group/esm/CSSTransition.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts");let posthog_logo=__webpack_require__.p+"images/posthog-logo.1e8f704e9f5c893139d4ad8dcb7e2954.svg",posthog_logo_cloud=__webpack_require__.p+"images/posthog-logo-cloud.ff39f38d10e1d8769248bd773fc42a24.svg",posthog_logo_demo=__webpack_require__.p+"images/posthog-logo-demo.a5b7691e421e187226625869bf85673a.svg";var preflightLogic=__webpack_require__("../../frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function WelcomeLogo(_ref){let{view}=_ref,UTM_TAGS=`utm_campaign=in-product&utm_tag=${view||"welcome"}-header`,{preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,jsx_runtime.jsx)(src.rU,{to:`https://posthog.com?${UTM_TAGS}`,className:"flex flex-col items-center mb-8",children:(0,jsx_runtime.jsx)("img",{src:preflight?.demo?posthog_logo_demo:preflight?.cloud?posthog_logo_cloud:posthog_logo,alt:`PostHog${preflight?.cloud?" Cloud":""}`,className:"h-6"})})}var types=__webpack_require__("../../frontend/src/types.ts"),hedgehogs=__webpack_require__("../../frontend/src/lib/components/hedgehogs.tsx");function BridgePage_BridgePage_BridgePage(_ref){let{children,header,footer,view,message,noLogo=!1,sideLogo=!1,fixedWidth=!0,leftContainerContent,hedgehog=!1}=_ref,[messageShowing,setMessageShowing]=(0,react.useState)(!1),{preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,react.useEffect)(()=>{let t=setTimeout(()=>{setMessageShowing(!0)},200);return()=>clearTimeout(t)},[]),(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("BridgePage",fixedWidth&&"BridgePage--fixed-width"),children:[(0,jsx_runtime.jsxs)("div",{className:"BridgePage__main",children:[leftContainerContent||hedgehog?(0,jsx_runtime.jsx)("div",{className:"BridgePage__left-wrapper",children:(0,jsx_runtime.jsxs)("div",{className:"BridgePage__left",children:[!noLogo&&sideLogo&&(0,jsx_runtime.jsx)("div",{className:"BridgePage__header-logo mb-16",children:(0,jsx_runtime.jsx)(WelcomeLogo,{view:view})}),leftContainerContent&&leftContainerContent,hedgehog&&(0,jsx_runtime.jsxs)("div",{className:"BridgePage__left__art",children:[preflight?.region===types.yp.EU?(0,jsx_runtime.jsx)(hedgehogs.LaptopHogEU,{alt:"",draggable:"false"}):(0,jsx_runtime.jsx)(hedgehogs.LaptopHog4,{alt:"",draggable:"false"}),message?(0,jsx_runtime.jsx)(CSSTransition.Z,{in:messageShowing,timeout:200,classNames:"BridgePage__left__message-",children:(0,jsx_runtime.jsx)("div",{className:"BridgePage__left__message",children:message})}):null]})]})}):null,(0,jsx_runtime.jsxs)("div",{className:"BridgePage__content-wrapper",children:[!noLogo&&(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("BridgePage__header-logo",{mobile:sideLogo}),children:(0,jsx_runtime.jsx)(WelcomeLogo,{view:view})}),(0,jsx_runtime.jsx)("div",{className:"BridgePage__header",children:header}),(0,jsx_runtime.jsx)("div",{className:"BridgePage__content",children:children})]})]}),footer&&(0,jsx_runtime.jsx)("div",{className:"BridgePage__footer",children:footer})]})}},"../../frontend/src/lib/components/SignupRoleSelect.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>SignupRoleSelect});var lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),lib_lemon_ui_LemonSelect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSelect/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SignupRoleSelect(_ref){let{className}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_0__.D,{name:"role_at_organization",label:"What is your role?",className:className,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(lib_lemon_ui_LemonSelect__WEBPACK_IMPORTED_MODULE_1__.Yv,{fullWidth:!0,"data-attr":"signup-role-at-organization",options:[{label:"Engineering",value:"engineering"},{label:"Data",value:"data"},{label:"Product Management",value:"product"},{label:"Founder",value:"founder"},{label:"Leadership",value:"leadership"},{label:"Marketing",value:"marketing"},{label:"Sales / Success",value:"sales"},{label:"Other",value:"other"}]})})}},"../../frontend/src/scenes/authentication/InviteSignup.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{InviteSignup:()=>InviteSignup,scene:()=>scene});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),clsx__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_forms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.5_react@18.2.0_/node_modules/kea-forms/lib/index.js"),lib_components_BridgePage_BridgePage__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/BridgePage/BridgePage.tsx"),lib_components_PasswordStrength__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/PasswordStrength.tsx"),lib_components_SignupRoleSelect__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/SignupRoleSelect.tsx"),lib_components_SocialLoginButton_SocialLoginButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/SocialLoginButton/SocialLoginButton.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/lemon-ui/ProfilePicture/index.ts"),lib_lemon_ui_Spinner_Spinner__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../frontend/src/scenes/authentication/inviteSignupLogic.ts"),_loginLogic__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../frontend/src/scenes/authentication/loginLogic.ts"),_SupportModalButton__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../frontend/src/scenes/authentication/SupportModalButton.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:InviteSignup,logic:_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.C};function HelperLinks(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"font-bold text-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__.r,{to:"/",children:"App Home"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("span",{className:"mx-2",children:"|"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__.r,{to:"https://posthog.com?utm_medium=in-product&utm_campaign=invite-signup&utm_message=invalid-invite",children:"PostHog Website"})]})}function BackToPostHog(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{type:"secondary",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__.ed,{}),center:!0,fullWidth:!0,to:scenes_urls__WEBPACK_IMPORTED_MODULE_14__.j.default(),children:"Go back to PostHog"})}function ErrorView(){let{error}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.C),{user}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_15__.userLogic),ErrorMessages={[_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.S.InvalidInvite]:{title:"Oops! This invite link is invalid or has expired",detail:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[error?.detail," If you believe this is a mistake, please contact whoever created this invite and"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("b",{children:"ask them for a new invite"}),"."]}),actions:user?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(BackToPostHog,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(HelperLinks,{})},[_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.S.InvalidRecipient]:{title:"Oops! This invite link can't be used",detail:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{children:error?.detail}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"mt-4",children:user?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("span",{children:["You can either log out and create a new account under the new email address or ask the organization admin to send a"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("b",{children:["new invite to the email address on your account, ",user?.email]}),"."]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{children:["You need to log in with the email address above, or create your own password.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"mt-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__.ed,{}),to:window.location.pathname,disableClientSideRouting:!0,children:"Try again"})})]})})]}),actions:user?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(BackToPostHog,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(HelperLinks,{})},[_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.S.Unknown]:{title:"Oops! We could not validate this invite link",detail:`${error?.detail||""} There was an issue with your invite link, please try again in a few seconds. If the problem persists, contact us.`,actions:user?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(BackToPostHog,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(HelperLinks,{})}};return error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(lib_components_BridgePage_BridgePage__WEBPACK_IMPORTED_MODULE_3__.N,{view:"signup-error",hedgehog:!0,message:"Oops!",footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_SupportModalButton__WEBPACK_IMPORTED_MODULE_18__.J,{}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("h2",{children:ErrorMessages[error.code].title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"error-message",children:ErrorMessages[error.code].detail}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.p2,{dashed:!0,className:"my-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{children:ErrorMessages[error.code].actions})]}):null}function AuthenticatedAcceptInvite(_ref){let{invite}=_ref,{user}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_15__.userLogic),{acceptInvite}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.C),{acceptedInviteLoading,acceptedInvite}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.C);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_BridgePage_BridgePage__WEBPACK_IMPORTED_MODULE_3__.N,{view:"accept-invite",hedgehog:!0,message:user?.first_name?`Hey ${user?.first_name}!`:"Hello!",footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_SupportModalButton__WEBPACK_IMPORTED_MODULE_18__.J,{name:user?.first_name,email:user?.email}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"deprecated-space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("h2",{children:["You have been invited to join ",invite.organization_name]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{children:["You will accept the invite under your ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("b",{children:"existing PostHog account"})," (",user?.email,")"]}),user&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"border rounded-lg border-dashed flex items-center gap-2 px-2 py-1","data-attr":"top-navigation-whoami",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_10__.Y,{user:user}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"font-bold",children:user.first_name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{children:user.organization?.name})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{children:"You can change organizations at any time by clicking on the dropdown at the top right corner of the navigation bar."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{children:acceptedInvite?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{type:"secondary",center:!0,fullWidth:!0,sideIcon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__.VG,{}),onClick:()=>window.location.href="/",children:"Go to PostHog"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{type:"primary",center:!0,fullWidth:!0,onClick:()=>acceptInvite(),loading:acceptedInviteLoading,children:"Accept invite"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"mt-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{type:"secondary",center:!0,fullWidth:!0,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__.ed,{}),to:"/",children:"Go back to PostHog"})})]})})]})})}function UnauthenticatedAcceptInvite(_ref2){let{invite}=_ref2,{isSignupSubmitting,validatedPassword}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.C),{preflight}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_13__.preflightLogic),{precheck}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_loginLogic__WEBPACK_IMPORTED_MODULE_17__.l),{precheckResponse,precheckResponseLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_loginLogic__WEBPACK_IMPORTED_MODULE_17__.l),areExtraFieldsHidden=precheckResponse.sso_enforcement;return(0,react__WEBPACK_IMPORTED_MODULE_12__.useEffect)(()=>{precheck({email:invite.target_email})},[invite.target_email]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(lib_components_BridgePage_BridgePage__WEBPACK_IMPORTED_MODULE_3__.N,{view:"invites-signup",hedgehog:!0,message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:["Welcome to",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("br",{})," PostHog",preflight?.cloud?" Cloud":"","!"]}),leftContainerContent:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"mb-8 text-secondary",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"font-semibold flex flex-col gap-2 text-center items-center text-lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("span",{children:"You've been invited to join"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("span",{className:"text-4xl font-bold border-b border-dashed pb-2",children:invite?.organization_name||"us"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("span",{children:"on PostHog"})]})}),footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_SupportModalButton__WEBPACK_IMPORTED_MODULE_18__.J,{name:invite.first_name,email:invite.target_email}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("h2",{className:"text-center",children:"Create your PostHog account"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(kea_forms__WEBPACK_IMPORTED_MODULE_2__.Form,{logic:_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.C,formKey:"signup",className:"deprecated-space-y-4",enableFormOnSubmit:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_8__.D.Pure,{label:"Email",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.DF,{type:"email",disabled:!0,value:invite?.target_email})}),!areExtraFieldsHidden&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_8__.D,{name:"password",label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("span",{children:"Password"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_PasswordStrength__WEBPACK_IMPORTED_MODULE_4__.Z,{validatedPassword:validatedPassword})]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.DF,{type:"password",className:"ph-ignore-input","data-attr":"password",placeholder:"••••••••••",autoComplete:"new-password",autoFocus:window.screen.width>=768,disabled:isSignupSubmitting})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_8__.D,{name:"first_name",label:"First Name",help:invite?.first_name?"Your name was provided in the invite, feel free to change it.":void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.DF,{"data-attr":"first_name",placeholder:"Jane"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_SignupRoleSelect__WEBPACK_IMPORTED_MODULE_5__.Z,{})]}),!precheckResponse.sso_enforcement&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{type:"primary",status:"alt",htmlType:"submit","data-attr":"password-signup",fullWidth:!0,center:!0,loading:isSignupSubmitting||precheckResponseLoading,size:"large",children:"Continue"}),precheckResponse.sso_enforcement&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_SocialLoginButton_SocialLoginButton__WEBPACK_IMPORTED_MODULE_6__.mB,{provider:precheckResponse.sso_enforcement,email:invite?.target_email,actionText:"Continue",extraQueryParams:invite?{invite_id:invite.id}:void 0}),precheckResponse.saml_available&&!precheckResponse.sso_enforcement&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_SocialLoginButton_SocialLoginButton__WEBPACK_IMPORTED_MODULE_6__.mB,{provider:"saml",email:invite?.target_email,actionText:"Continue",extraQueryParams:invite?{invite_id:invite.id}:void 0})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"mt-4 text-center text-secondary",children:["Already have an account? ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__.r,{to:"/login",children:"Log in"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"mt-4 text-center text-secondary",children:["By clicking continue you agree to our"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__.r,{to:"https://posthog.com/terms",target:"_blank",children:"Terms of Service"})," ","and"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__.r,{to:"https://posthog.com/privacy",target:"_blank",children:"Privacy Policy"}),"."]}),!areExtraFieldsHidden&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_SocialLoginButton_SocialLoginButton__WEBPACK_IMPORTED_MODULE_6__.NN,{className:"mb-4",title:"Or sign in with",caption:`Remember to log in with ${invite?.target_email}`,captionLocation:"bottom",topDivider:!0,extraQueryParams:invite?{invite_id:invite.id}:void 0})]})}function InviteSignup(){let{invite,inviteLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_inviteSignupLogic__WEBPACK_IMPORTED_MODULE_16__.C),{user}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_15__.userLogic);return inviteLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_Spinner_Spinner__WEBPACK_IMPORTED_MODULE_11__.t,{sceneLevel:!0}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_20__.default)("InviteSignup",!!user&&"InviteSignup--authenticated"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(ErrorView,{}),invite&&(user?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(AuthenticatedAcceptInvite,{invite:invite}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(UnauthenticatedAcceptInvite,{invite:invite}))]})}},"../../frontend/src/scenes/authentication/SupportModalButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>SupportModalButton});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.12.1_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_Support_supportLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/Support/supportLogic.ts"),scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SupportModalButton(_ref){let{name,email}=_ref,{openSupportForm}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(lib_components_Support_supportLogic__WEBPACK_IMPORTED_MODULE_3__.Pw),{preflight}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_4__.preflightLogic);return preflight?.cloud?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"text-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{onClick:()=>{openSupportForm({name,email,kind:"bug",target_area:"login"})},icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconBug,{}),size:"small",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:"text-secondary",children:"Report an issue"})})})}):null}},"../../frontend/src/scenes/authentication/inviteSignupLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>inviteSignupLogic,S:()=>ErrorCodes});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.5_react@18.2.0_/node_modules/kea-forms/lib/index.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_components_PasswordStrength__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/PasswordStrength.tsx");let ErrorCodes=function(ErrorCodes){return ErrorCodes.InvalidInvite="invalid_invite",ErrorCodes.InvalidRecipient="invalid_recipient",ErrorCodes.Unknown="unknown",ErrorCodes}({}),inviteSignupLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","authentication","inviteSignupLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setError:payload=>({payload})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({error:[null,{setError:(_,_ref)=>{let{payload}=_ref;return payload}}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_2__.loaders)(_ref2=>{let{actions,values}=_ref2;return{invite:[null,{prevalidateInvite:async(id,breakpoint)=>{breakpoint();try{return await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.get(`api/signup/${id}/`)}catch(e){return 400===e.status?"invalid_recipient"===e.code?actions.setError({code:ErrorCodes.InvalidRecipient,detail:e.detail}):"account_exists"===e.code?location.href=e.detail:actions.setError({code:ErrorCodes.InvalidInvite,detail:e.detail}):actions.setError({code:ErrorCodes.Unknown}),null}}}],acceptedInvite:[null,{acceptInvite:async(payload,breakpoint)=>(breakpoint(),values.invite)?await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.create(`api/signup/${values.invite.id}/`,payload):null}]}}),(0,kea_forms__WEBPACK_IMPORTED_MODULE_1__.forms)(_ref3=>{let{actions,values}=_ref3;return{signup:{defaults:{role_at_organization:""},errors:_ref4=>{let{password,first_name,role_at_organization}=_ref4;return{password:password?values.validatedPassword.feedback||void 0:"Please enter your password to continue",first_name:first_name?void 0:"Please enter your name",role_at_organization:role_at_organization?void 0:"Please select your role to continue"}},submit:async(payload,breakpoint)=>{if(breakpoint(),values.invite)try{let res=await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.create(`api/signup/${values.invite.id}/`,payload);location.href=res.redirect_url||"/"}catch(e){throw actions.setSignupManualErrors({generic:{code:e.code,detail:e.detail}}),e}}}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({validatedPassword:[s=>[s.signup],_ref5=>{let{password}=_ref5;return(0,lib_components_PasswordStrength__WEBPACK_IMPORTED_MODULE_5__.u)(password)}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref6=>{let{actions}=_ref6;return{prevalidateInviteSuccess:_ref7=>{let{invite}=_ref7;invite?.first_name&&actions.setSignupValue("first_name",invite.first_name)}}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_3__.urlToAction)(_ref8=>{let{actions}=_ref8;return{"/signup/*":(_ref9,_ref10)=>{let{_:id}=_ref9,{error_code,error_detail}=_ref10;error_code?Object.values(ErrorCodes).includes(error_code)?actions.setError({code:error_code,detail:error_detail}):actions.setError({code:ErrorCodes.Unknown,detail:error_detail}):id&&actions.prevalidateInvite(id)}}})])},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.3_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/components/BridgePage/BridgePage.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,'.BridgePage{background-color:var(--bg-bridge);display:flex;flex:1;flex-direction:column;height:100vh;overflow:scroll;position:relative;-ms-overflow-style:none}.BridgePage::-webkit-scrollbar{width:0!important}.BridgePage .BridgePage__main{align-items:center;display:flex;flex:1;justify-content:center;padding:1rem}.BridgePage .BridgePage__content-wrapper{max-width:380px;width:100%}@media screen and (min-width:768px){.BridgePage .BridgePage__content-wrapper{max-width:100%;width:auto}}.BridgePage .BridgePage__left-wrapper{display:none;margin-right:60px}@media screen and (min-width:768px){.BridgePage .BridgePage__left-wrapper{display:block;visibility:visible}}.BridgePage .BridgePage__content{background-color:#fff;border-radius:var(--radius);box-shadow:var(--shadow-elevation-3000);padding:2rem;position:relative;width:100%}.BridgePage .BridgePage__content h2{font-weight:700;text-align:center}.BridgePage .BridgePage__footer{color:var(--text-secondary);display:flex;font-weight:500;gap:10%;justify-content:center;margin:1rem 0;width:100%}.BridgePage .BridgePage__left{display:none;position:relative;visibility:none}.BridgePage .BridgePage__left img{height:300px}.BridgePage .BridgePage__left .BridgePage__left__art{margin-top:50px}.BridgePage .BridgePage__left .BridgePage__left__message{background-color:var(--text-3000);border-radius:.75rem;bottom:220px;color:#fff;font-size:.8em;font-weight:600;left:265px;max-width:150px;opacity:0;padding:.5rem .75rem;position:absolute;transition-timing-function:cubic-bezier(.455,.03,.31,1.585)}.BridgePage .BridgePage__left .BridgePage__left__message:after{border:10px solid transparent;border-left:10px solid var(--text-3000);content:" ";left:20px;margin-top:-10px;position:absolute;top:100%}.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter{opacity:0;transform:translateY(50px) rotate(0deg) scale(.5)}.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter-active,.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter-done{opacity:1;transform:translateY(0) rotate(5deg) scale(1);transition:opacity .2s,transform .2s}@media(prefers-reduced-motion){.BridgePage .BridgePage__left .BridgePage__left__message{transition:none}}@media screen and (min-width:768px){.BridgePage .BridgePage__left{display:block;visibility:visible}}.BridgePage .BridgePage__cta{max-width:400px}.BridgePage .BridgePage__header-logo.mobile{display:block}@media screen and (min-width:768px){.BridgePage .BridgePage__header-logo.mobile{display:none}.BridgePage.BridgePage--fixed-width .BridgePage__content{max-width:400px;width:400px}}',""]),module.exports=exports}}]);