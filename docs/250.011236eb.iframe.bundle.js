(window.webpackJsonp=window.webpackJsonp||[]).push([[250],{"./frontend/src/scenes/instance/AsyncMigrations/AsyncMigrations.tsx":function(Ee,ne,t){"use strict";t.r(ne),t.d(ne,"scene",function(){return G}),t.d(ne,"AsyncMigrations",function(){return ie});var _=t("./node_modules/core-js/modules/es.symbol.js"),ae=t("./node_modules/core-js/modules/es.symbol.description.js"),ve=t("./node_modules/core-js/modules/es.array.map.js"),$=t("./node_modules/core-js/modules/es.function.name.js"),ce=t("./node_modules/react/index.js"),e=t.n(ce),le=t("./frontend/src/lib/components/PageHeader.tsx"),M=t("./node_modules/antd/es/tabs/index.js"),ue=t("./node_modules/antd/es/progress/index.js"),se=t("./node_modules/antd/es/button/index.js"),ge=t("./node_modules/antd/es/space/index.js"),Q=t("./node_modules/kea/lib/index.esm.js"),me=t("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),ye=t("./node_modules/core-js/modules/es.array.filter.js"),pe=t("./node_modules/core-js/modules/es.array.includes.js"),he=t("./node_modules/core-js/modules/es.array.iterator.js"),be=t("./node_modules/core-js/modules/es.array.some.js"),H=t("./node_modules/core-js/modules/es.object.to-string.js"),v=t("./node_modules/core-js/modules/es.string.includes.js"),I=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),x=t("./node_modules/@babel/runtime/regenerator/index.js"),h=t.n(x),J=t("./node_modules/regenerator-runtime/runtime.js"),C=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),j=t.n(C),z=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),B=t.n(z),R=t("./frontend/src/lib/api.ts"),ee=t("./frontend/src/scenes/userLogic.ts"),O=t("./frontend/src/lib/components/lemonToast.tsx");function te(a,s){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);s&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable})),i.push.apply(i,l)}return i}function D(a){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?te(Object(i),!0).forEach(function(l){B()(a,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(i,l))})}return a}var k;(function(a){a[a.NotStarted=0]="NotStarted",a[a.Running=1]="Running",a[a.CompletedSuccessfully=2]="CompletedSuccessfully",a[a.Errored=3]="Errored",a[a.RolledBack=4]="RolledBack",a[a.Starting=5]="Starting",a[a.FailedAtStartup=6]="FailedAtStartup"})(k||(k={}));var X;(function(a){a.Management="management",a.Settings="settings"})(X||(X={}));var fe={0:"Not started",1:"Running",2:"Complete",3:"Error",4:"Rolled back",5:"Starting",6:"Failed at startup"},w=Object(Q.kea)({path:["scenes","instance","AsyncMigrations","asyncMigrationsLogic"],actions:{triggerMigration:function(s){return{migrationId:s}},resumeMigration:function(s){return{migrationId:s}},rollbackMigration:function(s){return{migrationId:s}},forceStopMigration:function(s){return{migrationId:s}},forceStopMigrationWithoutRollback:function(s){return{migrationId:s}},setActiveTab:function(s){return{tab:s}},updateSetting:function(s,i){return{settingKey:s,newValue:i}},loadAsyncMigrationErrors:function(s){return{migrationId:s}},loadAsyncMigrationErrorsSuccess:function(s,i){return{migrationId:s,errors:i}},loadAsyncMigrationErrorsFailure:function(s,i){return{migrationId:s,error:i}}},reducers:{activeTab:[X.Management,{setActiveTab:function(s,i){var l=i.tab;return l}}],asyncMigrationErrors:[{},{loadAsyncMigrationErrorsSuccess:function(s,i){var l=i.migrationId,f=i.errors;return D(D({},s),{},B()({},l,f))}}],asyncMigrationErrorsLoading:[{},{loadAsyncMigrationErrors:function(s,i){var l=i.migrationId;return D(D({},s),{},B()({},l,!0))},loadAsyncMigrationErrorsSuccess:function(s,i){var l=i.migrationId;return D(D({},s),{},B()({},l,!1))},loadAsyncMigrationErrorsFailure:function(s,i){var l=i.migrationId;return D(D({},s),{},B()({},l,!1))}}]},loaders:function(){return{asyncMigrations:[[],{loadAsyncMigrations:function(){var s=j()(h.a.mark(function l(){var f;return h.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!((f=ee.a.values.user)===null||f===void 0)&&f.is_staff){b.next=2;break}return b.abrupt("return",[]);case 2:return b.next=4,R.b.get("api/async_migrations");case 4:return b.abrupt("return",b.sent.results);case 5:case"end":return b.stop()}},l)}));function i(){return s.apply(this,arguments)}return i}()}],asyncMigrationSettings:[[],{loadAsyncMigrationSettings:function(){var s=j()(h.a.mark(function l(){var f,y;return h.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!((f=ee.a.values.user)===null||f===void 0)&&f.is_staff){m.next=2;break}return m.abrupt("return",[]);case 2:return m.next=4,R.b.get("api/instance_settings");case 4:return y=m.sent.results,m.abrupt("return",y.filter(function(g){return g.key.includes("ASYNC_MIGRATIONS")}));case 6:case"end":return m.stop()}},l)}));function i(){return s.apply(this,arguments)}return i}()}]}},selectors:{isAnyMigrationRunning:[function(a){return[a.asyncMigrations]},function(a){return a.some(function(s){return[k.Running,k.Starting].includes(s.status)})}]},listeners:function(s){var i=s.actions;return{triggerMigration:function(){var l=j()(h.a.mark(function y(b){var m,g;return h.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=b.migrationId,c.next=3,R.b.create("/api/async_migrations/".concat(m,"/trigger"));case 3:g=c.sent,g.success?(O.a.success("Migration triggered successfully"),i.loadAsyncMigrations()):O.a.error(g.error);case 5:case"end":return c.stop()}},y)}));function f(y){return l.apply(this,arguments)}return f}(),resumeMigration:function(){var l=j()(h.a.mark(function y(b){var m,g;return h.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=b.migrationId,c.next=3,R.b.create("/api/async_migrations/".concat(m,"/resume"));case 3:g=c.sent,g.success?(O.a.success("Migration resume triggered successfully"),i.loadAsyncMigrations()):O.a.error(g.error);case 5:case"end":return c.stop()}},y)}));function f(y){return l.apply(this,arguments)}return f}(),rollbackMigration:function(){var l=j()(h.a.mark(function y(b){var m,g;return h.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=b.migrationId,c.next=3,R.b.create("/api/async_migrations/".concat(m,"/rollback"));case 3:g=c.sent,g.success?(O.a.success("Migration rolledback triggered successfully"),i.loadAsyncMigrations()):O.a.error(g.error);case 5:case"end":return c.stop()}},y)}));function f(y){return l.apply(this,arguments)}return f}(),forceStopMigration:function(){var l=j()(h.a.mark(function y(b){var m,g;return h.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=b.migrationId,c.next=3,R.b.create("/api/async_migrations/".concat(m,"/force_stop"));case 3:g=c.sent,g.success?(O.a.success("Force stop triggered successfully"),i.loadAsyncMigrations()):O.a.error(g.error);case 5:case"end":return c.stop()}},y)}));function f(y){return l.apply(this,arguments)}return f}(),forceStopMigrationWithoutRollback:function(){var l=j()(h.a.mark(function y(b){var m,g;return h.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=b.migrationId,c.next=3,R.b.create("/api/async_migrations/".concat(m,"/force_stop_without_rollback"));case 3:g=c.sent,g.success?(O.a.success("Force stop without rollback triggered successfully"),i.loadAsyncMigrations()):O.a.error(g.error);case 5:case"end":return c.stop()}},y)}));function f(y){return l.apply(this,arguments)}return f}(),updateSetting:function(){var l=j()(h.a.mark(function y(b){var m,g;return h.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=b.settingKey,g=b.newValue,c.prev=1,c.next=4,R.b.update("/api/instance_settings/".concat(m),{value:g});case 4:O.a.success("Instance setting ".concat(m," updated")),i.loadAsyncMigrationSettings(),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),O.a.error("Failed to trigger migration");case 11:case"end":return c.stop()}},y,null,[[1,8]])}));function f(y){return l.apply(this,arguments)}return f}(),loadAsyncMigrationErrors:function(){var l=j()(h.a.mark(function y(b){var m,g;return h.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=b.migrationId,c.prev=1,c.next=4,R.b.get("api/async_migrations/".concat(m,"/errors"));case 4:g=c.sent,i.loadAsyncMigrationErrorsSuccess(m,g),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),i.loadAsyncMigrationErrorsFailure(m,c.t0);case 11:case"end":return c.stop()}},y,null,[[1,8]])}));function f(y){return l.apply(this,arguments)}return f}()}},events:function(s){var i=s.actions;return{afterMount:function(){i.loadAsyncMigrations(),i.loadAsyncMigrationSettings()}}}}),Z=t("./frontend/src/lib/components/Tooltip.tsx"),re=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),d=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),n=t.n(d),u=t("./node_modules/antd/es/row/index.js"),r=t("./node_modules/antd/es/col/index.js"),o=t("./node_modules/antd/es/input/index.js"),p=t("./node_modules/antd/es/divider/index.js");function S(a){var s=a.setting,i=Object(Q.useActions)(w),l=i.updateSetting,f=Object(ce.useState)(String(s.value)),y=n()(f,2),b=y[0],m=y[1];return e.a.createElement("div",{key:s.key},e.a.createElement("h4",null,s.key),e.a.createElement("p",null,s.description),e.a.createElement(u.a,{gutter:[8,8]},e.a.createElement(r.a,{span:8},e.a.createElement(o.a,{value:b,onChange:function(q){return m(q.target.value)}})),e.a.createElement(r.a,{span:16},e.a.createElement(se.a,{disabled:String(s.value)===b,type:"primary",onClick:function(){return l(s.key,b)}},"Update"))),e.a.createElement(p.a,null))}try{S.displayName="SettingUpdateField",S.__docgenInfo={description:"",displayName:"SettingUpdateField",props:{setting:{defaultValue:null,description:"",name:"setting",required:!0,type:{name:"InstanceSetting"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/instance/AsyncMigrations/SettingUpdateField.tsx#SettingUpdateField"]={docgenInfo:S.__docgenInfo,name:"SettingUpdateField",path:"frontend/src/scenes/instance/AsyncMigrations/SettingUpdateField.tsx#SettingUpdateField"})}catch(a){}var P=t("./frontend/src/lib/components/LemonTable/index.ts"),A=t("./frontend/src/lib/utils.tsx"),E=t("./frontend/src/lib/components/LemonButton/index.ts"),T=t("./frontend/src/lib/components/icons.tsx");function V(a){var s=a.asyncMigration,i=Object(Q.useValues)(w),l=i.asyncMigrationErrorsLoading,f=i.asyncMigrationErrors,y=Object(Q.useActions)(w),b=y.loadAsyncMigrationErrors,m=[{title:"Error",dataIndex:"description"},{title:e.a.createElement(E.a,{icon:l[s.id]?e.a.createElement(re.a,{size:"sm"}):e.a.createElement(T.IconRefresh,null),onClick:function(){return b(s.id)},type:"secondary",size:"small"},"Refresh errors"),render:function(q,c){return e.a.createElement("div",null,Object(A.L)(c.created_at))}}];return e.a.createElement(P.a,{columns:m,dataSource:f[s.id],loading:l[s.id],embedded:!0})}try{V.displayName="AsyncMigrationDetails",V.__docgenInfo={description:"",displayName:"AsyncMigrationDetails",props:{asyncMigration:{defaultValue:null,description:"",name:"asyncMigration",required:!0,type:{name:"AsyncMigration"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/instance/AsyncMigrations/AsyncMigrationDetails.tsx#AsyncMigrationDetails"]={docgenInfo:V.__docgenInfo,name:"AsyncMigrationDetails",path:"frontend/src/scenes/instance/AsyncMigrations/AsyncMigrationDetails.tsx#AsyncMigrationDetails"})}catch(a){}var N=t("./frontend/src/lib/components/LemonButton/More.tsx"),K=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),F=M.a.TabPane,G={component:ie,logic:w},oe=3e3;function ie(){var a=Object(Q.useValues)(ee.a),s=a.user,i=Object(Q.useValues)(w),l=i.asyncMigrations,f=i.asyncMigrationsLoading,y=i.activeTab,b=i.asyncMigrationSettings,m=i.isAnyMigrationRunning,g=Object(Q.useActions)(w),q=g.triggerMigration,c=g.resumeMigration,je=g.rollbackMigration,Ce=g.forceStopMigration,Me=g.forceStopMigrationWithoutRollback,Se=g.loadAsyncMigrations,Oe=g.loadAsyncMigrationErrors,ke=g.setActiveTab;Object(ce.useEffect)(function(){if(m){var U=setInterval(function(){return Se()},oe);return function(){return clearInterval(U)}}},[m]);var Pe=[{title:"Migration",render:function(Y,W){var L="https://github.com/PostHog/posthog/blob/master/posthog/async_migrations/migrations/"+W.name+".py";return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"row-name"},e.a.createElement("a",{href:L},W.name)),e.a.createElement("div",{className:"row-description"},W.description))}},{title:"Progress",render:function(Y,W){var L=W.progress;return e.a.createElement("div",null,e.a.createElement(ue.a,{percent:L}))}},{title:"Status",render:function(Y,W){var L=W.status,de=L===k.Running?"success":L===k.Errored||L===k.FailedAtStartup?"danger":L===k.Starting||L===k.RolledBack?"warning":"default";return e.a.createElement(K.a,{type:de},fe[L])}},{title:"Last operation index",dataIndex:"current_operation_index"},{title:"Last query ID",render:function(Y,W){return e.a.createElement("div",null,e.a.createElement("small",null,W.current_query_id))}},{title:"Started at",render:function(Y,W){var L=W.started_at;return e.a.createElement("div",null,Object(A.L)(L))}},{title:"Finished at",render:function(Y,W){var L=W.finished_at;return e.a.createElement("div",null,Object(A.L)(L))}},{title:"",render:function(Y,W){var L=W.status;return e.a.createElement("div",null,L===k.NotStarted||L===k.FailedAtStartup?e.a.createElement(Z.a,{title:"Start"},e.a.createElement(se.a,{type:"link",icon:e.a.createElement(me.a,null),onClick:function(){return q(W.id)}},"Run")):L===k.Running?e.a.createElement(N.a,{overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(E.a,{type:"stealth",onClick:function(){return Ce(W.id)},fullWidth:!0},"Stop and rollback"),e.a.createElement(E.a,{type:"stealth",onClick:function(){return Me(W.id)},fullWidth:!0},"Stop"))}):L===k.CompletedSuccessfully?e.a.createElement(e.a.Fragment,null):L===k.Errored?e.a.createElement(N.a,{overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(E.a,{type:"stealth",onClick:function(){return c(W.id)},fullWidth:!0},"Resume"),e.a.createElement(E.a,{type:"stealth",onClick:function(){return je(W.id)},fullWidth:!0},"Rollback"))}):L===k.RolledBack?e.a.createElement(Z.a,{title:"Restart"},e.a.createElement(E.a,{type:"stealth",icon:e.a.createElement(T.IconReplay,null),onClick:function(){return q(W.id)},fullWidth:!0})):L===k.Starting?e.a.createElement(re.a,{size:"sm"}):null)}}],Ae={expandedRowRender:function(Y){return Y&&e.a.createElement(V,{asyncMigration:Y})},rowExpandable:function(Y){return Y.error_count>0},onRowExpand:function(Y){Oe(Y.id)}};return e.a.createElement("div",null,s!=null&&s.is_staff?e.a.createElement(e.a.Fragment,null,e.a.createElement(le.a,{title:"Async Migrations",caption:e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Manage async migrations in your instance."),e.a.createElement("p",null,"Read about async migrations on our"," ",e.a.createElement("a",{href:"https://posthog.com/docs/self-host/configure/async-migrations"},"dedicated docs page"),"."))}),e.a.createElement(M.a,{activeKey:y,onChange:function(Y){return ke(Y)}},e.a.createElement(F,{tab:"Management",key:X.Management}),e.a.createElement(F,{tab:"Settings",key:X.Settings})),y===X.Management?e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"mb float-right"},e.a.createElement(E.a,{icon:f?e.a.createElement(re.a,{size:"sm"}):e.a.createElement(T.IconRefresh,null),onClick:Se,type:"secondary",size:"small"},"Refresh")),e.a.createElement(ge.b,null),e.a.createElement(P.a,{pagination:{pageSize:10},loading:f,columns:Pe,dataSource:l,expandable:Ae})):y===X.Settings?e.a.createElement(e.a.Fragment,null,e.a.createElement("br",null),b.map(function(U){return e.a.createElement("div",{key:U.key},e.a.createElement(S,{setting:U}))})):null):e.a.createElement(le.a,{title:"Async Migrations",caption:e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Only users with staff access can manage async migrations. Please contact your instance admin."),e.a.createElement("p",null,"If you're an admin and don't have access, set ",e.a.createElement("code",null,"is_staff=true")," for your user on the PostgreSQL ",e.a.createElement("code",null,"posthog_user")," table."))}))}},"./node_modules/antd/es/progress/index.js":function(Ee,ne,t){"use strict";var _=t("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),ae=t("./node_modules/@babel/runtime/helpers/esm/extends.js"),ve=t("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),$=t("./node_modules/@babel/runtime/helpers/esm/createClass.js"),ce=t("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),e=t("./node_modules/@babel/runtime/helpers/esm/inherits.js"),le=t("./node_modules/@babel/runtime/helpers/esm/createSuper.js"),M=t("./node_modules/react/index.js"),ue=t("./node_modules/classnames/index.js"),se=t.n(ue),ge=t("./node_modules/antd/node_modules/rc-util/es/omit.js"),Q=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),me=t("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),ye=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),pe=t("./node_modules/@ant-design/icons/es/icons/CloseCircleFilled.js"),he=t("./node_modules/antd/es/config-provider/context.js"),be=t("./node_modules/antd/es/_util/type.js"),H=t("./node_modules/antd/es/_util/devWarning.js"),v=t("./node_modules/@ant-design/colors/dist/index.esm.js");function I(d){return!d||d<0?0:d>100?100:d}function x(d){var n=d.success,u=d.successPercent,r=u;return n&&"progress"in n&&(Object(H.a)(!1,"Progress","`success.progress` is deprecated. Please use `success.percent` instead."),r=n.progress),n&&"percent"in n&&(r=n.percent),r}var h=function(d,n){var u={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&n.indexOf(r)<0&&(u[r]=d[r]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(d);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(u[r[o]]=d[r[o]]);return u},J=function(n){var u=[];return Object.keys(n).forEach(function(r){var o=parseFloat(r.replace(/%/g,""));isNaN(o)||u.push({key:o,value:n[r]})}),u=u.sort(function(r,o){return r.key-o.key}),u.map(function(r){var o=r.key,p=r.value;return"".concat(p," ").concat(o,"%")}).join(", ")},C=function(n,u){var r=n.from,o=r===void 0?v.presetPrimaryColors.blue:r,p=n.to,S=p===void 0?v.presetPrimaryColors.blue:p,P=n.direction,A=P===void 0?u==="rtl"?"to left":"to right":P,E=h(n,["from","to","direction"]);if(Object.keys(E).length!==0){var T=J(E);return{backgroundImage:"linear-gradient(".concat(A,", ").concat(T,")")}}return{backgroundImage:"linear-gradient(".concat(A,", ").concat(o,", ").concat(S,")")}},j=function(n){var u=n.prefixCls,r=n.direction,o=n.percent,p=n.strokeWidth,S=n.size,P=n.strokeColor,A=n.strokeLinecap,E=n.children,T=n.trailColor,V=n.success,N=P&&typeof P!="string"?C(P,r):{background:P},K=T?{backgroundColor:T}:void 0,F=Object(ae.a)({width:"".concat(I(o),"%"),height:p||(S==="small"?6:8),borderRadius:A==="square"?0:""},N),G=x(n),oe={width:"".concat(I(G),"%"),height:p||(S==="small"?6:8),borderRadius:A==="square"?0:"",backgroundColor:V==null?void 0:V.strokeColor},ie=G!==void 0?M.createElement("div",{className:"".concat(u,"-success-bg"),style:oe}):null;return M.createElement(M.Fragment,null,M.createElement("div",{className:"".concat(u,"-outer")},M.createElement("div",{className:"".concat(u,"-inner"),style:K},M.createElement("div",{className:"".concat(u,"-bg"),style:F}),ie)),E)},z=j,B=t("./node_modules/rc-progress/es/index.js");function R(d){var n=d.percent,u=d.success,r=d.successPercent,o=I(x({success:u,successPercent:r}));return[o,I(I(n)-o)]}function ee(d){var n=d.success,u=n===void 0?{}:n,r=d.strokeColor,o=u.strokeColor;return[o||v.presetPrimaryColors.green,r||null]}var O=function(n){var u=n.prefixCls,r=n.width,o=n.strokeWidth,p=n.trailColor,S=n.strokeLinecap,P=n.gapPosition,A=n.gapDegree,E=n.type,T=n.children,V=n.success,N=r||120,K={width:N,height:N,fontSize:N*.15+6},F=o||6,G=P||E==="dashboard"&&"bottom"||"top",oe=function(){if(A||A===0)return A;if(E==="dashboard")return 75},ie=Object.prototype.toString.call(n.strokeColor)==="[object Object]",a=ee({success:V,strokeColor:n.strokeColor}),s=se()("".concat(u,"-inner"),Object(_.a)({},"".concat(u,"-circle-gradient"),ie));return M.createElement("div",{className:s,style:K},M.createElement(B.Circle,{percent:R(n),strokeWidth:F,trailWidth:F,strokeColor:a,strokeLinecap:S,trailColor:p,prefixCls:u,gapDegree:oe(),gapPosition:G}),T)},te=O,D=function(n){for(var u=n.size,r=n.steps,o=n.percent,p=o===void 0?0:o,S=n.strokeWidth,P=S===void 0?8:S,A=n.strokeColor,E=n.trailColor,T=n.prefixCls,V=n.children,N=Math.round(r*(p/100)),K=u==="small"?2:14,F=[],G=0;G<r;G+=1)F.push(M.createElement("div",{key:G,className:se()("".concat(T,"-steps-item"),Object(_.a)({},"".concat(T,"-steps-item-active"),G<=N-1)),style:{backgroundColor:G<=N-1?A:E,width:K,height:P}}));return M.createElement("div",{className:"".concat(T,"-steps-outer")},F,V)},k=D,X=function(d,n){var u={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&n.indexOf(r)<0&&(u[r]=d[r]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(d);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(u[r[o]]=d[r[o]]);return u},fe=Object(be.a)("line","circle","dashboard"),w=Object(be.a)("normal","exception","active","success"),Z=function(d){Object(e.a)(u,d);var n=Object(le.a)(u);function u(){var r;return Object(ve.a)(this,u),r=n.apply(this,arguments),r.renderProgress=function(o){var p,S=o.getPrefixCls,P=o.direction,A=Object(ce.a)(r),E=A.props,T=E.prefixCls,V=E.className,N=E.size,K=E.type,F=E.steps,G=E.showInfo,oe=E.strokeColor,ie=X(E,["prefixCls","className","size","type","steps","showInfo","strokeColor"]),a=S("progress",T),s=r.getProgressStatus(),i=r.renderProcessInfo(a,s);Object(H.a)(!("successPercent"in E),"Progress","`successPercent` is deprecated. Please use `success.percent` instead.");var l;K==="line"?l=F?M.createElement(k,Object(ae.a)({},r.props,{strokeColor:typeof oe=="string"?oe:void 0,prefixCls:a,steps:F}),i):M.createElement(z,Object(ae.a)({},r.props,{prefixCls:a,direction:P}),i):(K==="circle"||K==="dashboard")&&(l=M.createElement(te,Object(ae.a)({},r.props,{prefixCls:a,progressStatus:s}),i));var f=se()(a,(p={},Object(_.a)(p,"".concat(a,"-").concat(K==="dashboard"&&"circle"||F&&"steps"||K),!0),Object(_.a)(p,"".concat(a,"-status-").concat(s),!0),Object(_.a)(p,"".concat(a,"-show-info"),G),Object(_.a)(p,"".concat(a,"-").concat(N),N),Object(_.a)(p,"".concat(a,"-rtl"),P==="rtl"),p),V);return M.createElement("div",Object(ae.a)({},Object(ge.a)(ie,["status","format","trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","percent","success","successPercent"]),{className:f}),l)},r}return Object($.a)(u,[{key:"getPercentNumber",value:function(){var o=this.props.percent,p=o===void 0?0:o,S=x(this.props);return parseInt(S!==void 0?S.toString():p.toString(),10)}},{key:"getProgressStatus",value:function(){var o=this.props.status;return w.indexOf(o)<0&&this.getPercentNumber()>=100?"success":o||"normal"}},{key:"renderProcessInfo",value:function(o,p){var S=this.props,P=S.showInfo,A=S.format,E=S.type,T=S.percent,V=x(this.props);if(!P)return null;var N,K=A||function(G){return"".concat(G,"%")},F=E==="line";return A||p!=="exception"&&p!=="success"?N=K(I(T),I(V)):p==="exception"?N=F?M.createElement(pe.a,null):M.createElement(Q.a,null):p==="success"&&(N=F?M.createElement(ye.a,null):M.createElement(me.a,null)),M.createElement("span",{className:"".concat(o,"-text"),title:typeof N=="string"?N:void 0},N)}},{key:"render",value:function(){return M.createElement(he.a,null,this.renderProgress)}}]),u}(M.Component);Z.defaultProps={type:"line",percent:0,showInfo:!0,trailColor:null,size:"default",gapDegree:void 0,strokeLinecap:"round"};var re=ne.a=Z},"./node_modules/rc-progress/es/index.js":function(Ee,ne,t){"use strict";t.r(ne),t.d(ne,"Line",function(){return se}),t.d(ne,"Circle",function(){return he});var _=t("./node_modules/@babel/runtime/helpers/esm/extends.js"),ae=t("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),ve=t("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),$=t("./node_modules/react/index.js"),ce=t("./node_modules/classnames/index.js"),e=t.n(ce),le={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1},M=function(v){var I=v.map(function(){return Object($.useRef)()}),x=Object($.useRef)(null);return Object($.useEffect)(function(){var h=Date.now(),J=!1;Object.keys(I).forEach(function(C){var j=I[C].current;if(!!j){J=!0;var z=j.style;z.transitionDuration=".3s, .3s, .3s, .06s",x.current&&h-x.current<100&&(z.transitionDuration="0s, 0s")}}),J&&(x.current=Date.now())}),[I]},ue=function(v){var I=v.className,x=v.percent,h=v.prefixCls,J=v.strokeColor,C=v.strokeLinecap,j=v.strokeWidth,z=v.style,B=v.trailColor,R=v.trailWidth,ee=v.transition,O=Object(ve.a)(v,["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"]);delete O.gapPosition;var te=Array.isArray(x)?x:[x],D=Array.isArray(J)?J:[J],k=M(te),X=Object(ae.a)(k,1),fe=X[0],w=j/2,Z=100-j/2,re="M ".concat(C==="round"?w:0,",").concat(w,`
         L `).concat(C==="round"?Z:100,",").concat(w),d="0 0 100 ".concat(j),n=0;return $.createElement("svg",Object(_.a)({className:e()("".concat(h,"-line"),I),viewBox:d,preserveAspectRatio:"none",style:z},O),$.createElement("path",{className:"".concat(h,"-line-trail"),d:re,strokeLinecap:C,stroke:B,strokeWidth:R||j,fillOpacity:"0"}),te.map(function(u,r){var o=1;switch(C){case"round":o=1-j/100;break;case"square":o=1-j/2/100;break;default:o=1;break}var p={strokeDasharray:"".concat(u*o,"px, 100px"),strokeDashoffset:"-".concat(n,"px"),transition:ee||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},S=D[r]||D[D.length-1];return n+=u,$.createElement("path",{key:r,className:"".concat(h,"-line-path"),d:re,strokeLinecap:C,stroke:S,strokeWidth:j,fillOpacity:"0",ref:fe[r],style:p})}))};ue.defaultProps=le,ue.displayName="Line";var se=ue,ge=0;function Q(H){return+H.replace("%","")}function me(H){return Array.isArray(H)?H:[H]}function ye(H,v,I,x){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,J=arguments.length>5?arguments[5]:void 0,C=50-x/2,j=0,z=-C,B=0,R=-2*C;switch(J){case"left":j=-C,z=0,B=2*C,R=0;break;case"right":j=C,z=0,B=-2*C,R=0;break;case"bottom":z=C,R=2*C;break;default:}var ee="M 50,50 m ".concat(j,",").concat(z,`
   a `).concat(C,",").concat(C," 0 1 1 ").concat(B,",").concat(-R,`
   a `).concat(C,",").concat(C," 0 1 1 ").concat(-B,",").concat(R),O=Math.PI*2*C,te={stroke:I,strokeDasharray:"".concat(v/100*(O-h),"px ").concat(O,"px"),strokeDashoffset:"-".concat(h/2+H/100*(O-h),"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s"};return{pathString:ee,pathStyle:te}}var pe=function(v){var I=v.prefixCls,x=v.strokeWidth,h=v.trailWidth,J=v.gapDegree,C=v.gapPosition,j=v.trailColor,z=v.strokeLinecap,B=v.style,R=v.className,ee=v.strokeColor,O=v.percent,te=Object(ve.a)(v,["prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"]),D=$.useMemo(function(){return ge+=1,ge},[]),k=ye(0,100,j,x,J,C),X=k.pathString,fe=k.pathStyle,w=me(O),Z=me(ee),re=Z.find(function(o){return Object.prototype.toString.call(o)==="[object Object]"}),d=M(w),n=Object(ae.a)(d,1),u=n[0],r=function(){var p=0;return w.map(function(S,P){var A=Z[P]||Z[Z.length-1],E=Object.prototype.toString.call(A)==="[object Object]"?"url(#".concat(I,"-gradient-").concat(D,")"):"",T=ye(p,S,A,x,J,C);return p+=S,$.createElement("path",{key:P,className:"".concat(I,"-circle-path"),d:T.pathString,stroke:E,strokeLinecap:z,strokeWidth:x,opacity:S===0?0:1,fillOpacity:"0",style:T.pathStyle,ref:u[P]})})};return $.createElement("svg",Object(_.a)({className:e()("".concat(I,"-circle"),R),viewBox:"0 0 100 100",style:B},te),re&&$.createElement("defs",null,$.createElement("linearGradient",{id:"".concat(I,"-gradient-").concat(D),x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(re).sort(function(o,p){return Q(o)-Q(p)}).map(function(o,p){return $.createElement("stop",{key:p,offset:o,stopColor:re[o]})}))),$.createElement("path",{className:"".concat(I,"-circle-trail"),d:X,stroke:j,strokeLinecap:z,strokeWidth:h||x,fillOpacity:"0",style:fe}),r().reverse())};pe.defaultProps=le,pe.displayName="Circle";var he=pe,be=ne.default={Line:se,Circle:he}}}]);
