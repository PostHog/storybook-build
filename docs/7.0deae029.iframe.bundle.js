(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(X,x,t){"use strict";t.d(x,"a",function(){return _e});var B=t("./node_modules/core-js/modules/es.array.includes.js"),I=t.n(B),ee=t("./node_modules/core-js/modules/es.array.iterator.js"),U=t.n(ee),Y=t("./node_modules/core-js/modules/es.object.to-string.js"),ie=t.n(Y),ce=t("./node_modules/core-js/modules/es.object.values.js"),w=t.n(ce),e=t("./node_modules/core-js/modules/es.string.includes.js"),o=t.n(e),ge=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),H=t.n(ge),de=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),pe=t.n(de),V=t("./node_modules/kea/lib/index.esm.js"),D=t("./frontend/src/lib/utils.tsx"),E=t("./frontend/src/types.ts"),_=t("./frontend/src/scenes/insights/sharedUtils.ts"),K=t("./frontend/src/scenes/insights/insightLogic.ts");function $(Q,Z){var te=Object.keys(Q);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(Q);Z&&(oe=oe.filter(function(we){return Object.getOwnPropertyDescriptor(Q,we).enumerable})),te.push.apply(te,oe)}return te}function ue(Q){for(var Z=1;Z<arguments.length;Z++){var te=arguments[Z]!=null?arguments[Z]:{};Z%2?$(Object(te),!0).forEach(function(oe){pe()(Q,oe,te[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(te)):$(Object(te)).forEach(function(oe){Object.defineProperty(Q,oe,Object.getOwnPropertyDescriptor(te,oe))})}return Q}function ve(Q){return Object.values(E.u).includes(Q)}var _e=Object(V.kea)({props:{},key:Object(_.c)("new"),path:function(Z){return["lib","components","ChartFilter","chartFilterLogic",Z]},connect:function(Z){return{actions:[Object(K.c)(Z),["setFilters"]],values:[Object(K.c)(Z),["filters"]]}},actions:function(){return{setChartFilter:function(te){return{chartFilter:te}}}},selectors:{chartFilter:[function(Q){return[Q.filters]},function(Q){var Z=Q.display,te=Q.funnel_viz_type;return(Z===E.i.FunnelViz?te:Z)||null}]},listeners:function(Z){var te=Z.actions,oe=Z.values;return{setChartFilter:function(Be){var Se=Be.chartFilter,Ke=oe.filters,a=Ke.display,N=Ke.funnel_viz_type;ve(Se)?(N!==Se||a!==E.i.FunnelViz)&&te.setFilters(ue(ue({},oe.filters),{},{display:E.i.FunnelViz,funnel_viz_type:Se})):Object(D.lb)(a,Se)||te.setFilters(ue(ue({},oe.filters),{},{display:Se}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(X,x,t){"use strict";t.d(x,"a",function(){return D});var B=t("./node_modules/core-js/modules/es.array.iterator.js"),I=t.n(B),ee=t("./node_modules/core-js/modules/es.object.to-string.js"),U=t.n(ee),Y=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ie=t.n(Y),ce=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),w=t.n(ce),e=t("./node_modules/kea/lib/index.esm.js"),o=t("./frontend/src/lib/utils.tsx"),ge=t("./frontend/src/types.ts"),H=t("./frontend/src/scenes/insights/sharedUtils.ts"),de=t("./frontend/src/scenes/insights/insightLogic.ts");function pe(E,_){var K=Object.keys(E);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(E);_&&($=$.filter(function(ue){return Object.getOwnPropertyDescriptor(E,ue).enumerable})),K.push.apply(K,$)}return K}function V(E){for(var _=1;_<arguments.length;_++){var K=arguments[_]!=null?arguments[_]:{};_%2?pe(Object(K),!0).forEach(function($){w()(E,$,K[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(K)):pe(Object(K)).forEach(function($){Object.defineProperty(E,$,Object.getOwnPropertyDescriptor(K,$))})}return E}var D=Object(e.kea)({props:{},key:Object(H.c)("new"),path:function(_){return["lib","components","CompareFilter","compareFilterLogic",_]},connect:function(_){return{actions:[Object(de.c)(_),["setFilters"]],values:[Object(de.c)(_),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(K){return{compare:K}},toggleCompare:!0}},selectors:{compare:[function(E){return[E.filters]},function(E){return!!(E!=null&&E.compare)}],disabled:[function(E){return[E.filters,E.canEditInsight]},function(E,_){var K=E.insight,$=E.date_from,ue=E.display;return!_||K===ge.y.LIFECYCLE||ue===ge.i.WorldMap||$==="all"}]},listeners:function(_){var K=_.values,$=_.actions;return{setCompare:function(ve){var _e=ve.compare;Object(o.lb)(_e,K.compare)||$.setFilters(V(V({},K.filters),{},{compare:_e}))},toggleCompare:function(){$.setCompare(!K.compare)}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(X,x,t){"use strict";t.d(x,"a",function(){return qe});var B=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=t.n(B),ee=t("./node_modules/antd/es/card/index.js"),U=t("./node_modules/antd/es/row/index.js"),Y=t("./node_modules/antd/es/col/index.js"),ie=t("./node_modules/core-js/modules/es.array.includes.js"),ce=t("./node_modules/core-js/modules/es.string.includes.js"),w=t("./node_modules/react/index.js"),e=t.n(w),o=t("./node_modules/kea/lib/index.esm.js"),ge=t("./node_modules/antd/es/tag/index.js"),H=t("./node_modules/antd/es/select/index.js"),de=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),pe=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),V=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),D=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},_=E,K=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),$=function(n,r){return w.createElement(K.a,Object(D.a)(Object(D.a)({},n),{},{ref:r,icon:_}))};$.displayName="AreaChartOutlined";var ue=w.forwardRef($),ve=t("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),_e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Q=_e,Z=function(n,r){return w.createElement(K.a,Object(D.a)(Object(D.a)({},n),{},{ref:r,icon:Q}))};Z.displayName="TableOutlined";var te=w.forwardRef(Z),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},we=oe,Be=function(n,r){return w.createElement(K.a,Object(D.a)(Object(D.a)({},n),{},{ref:r,icon:we}))};Be.displayName="PieChartOutlined";var Se=w.forwardRef(Be),Ke=t("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),a=t("./frontend/src/types.ts"),N=t("./frontend/src/lib/utils.tsx"),M=t("./frontend/src/scenes/insights/insightLogic.ts"),Jt=t("./frontend/src/scenes/insights/ActionFilter/entityFilterLogic.ts"),ne=t("./frontend/src/lib/components/Tooltip.tsx");function ke(l){var n=l.filters,r=l.onChange,s=l.disabled,d=Object(o.useValues)(M.c),i=d.insightProps,c=Object(o.useValues)(Object(de.a)(i)),f=c.chartFilter,p=Object(o.useActions)(Object(de.a)(i)),g=p.setChartFilter,m=n.insight===a.y.STICKINESS||n.insight===a.y.RETENTION,u=n.insight===a.y.RETENTION||n.insight===a.y.STICKINESS,b=n.insight===a.y.RETENTION||n.insight===a.y.STICKINESS||!!n.breakdown&&n.breakdown!=="$geoip_country_code"&&n.breakdown!=="$geoip_country_name"||Object(Jt.c)(n).length>1,v=n.insight===a.y.RETENTION,O=v||n.insight===a.y.STICKINESS||n.insight===a.y.RETENTION,S=n.insight===a.y.RETENTION?a.i.ActionsTable:n.insight===a.y.FUNNELS?a.i.FunnelViz:a.i.ActionsLineGraph;function h(C){var P=C.icon,F=C.tooltip,j=C.children,T=j===void 0?null:j;return e.a.createElement(ne.a,{title:F,placement:"left"},e.a.createElement("div",{style:{width:"100%"}},P," ",T))}function k(C){var P=C.children,F=P===void 0?null:P;return e.a.createElement(ge.a,{color:"orange",style:{marginLeft:8,fontSize:10}},F)}var y=n.insight===a.y.FUNNELS?[{value:a.u.Steps,label:e.a.createElement(h,{icon:e.a.createElement(pe.a,null)},"Steps")},{value:a.u.Trends,label:e.a.createElement(h,{icon:e.a.createElement(V.a,null)},"Trends",e.a.createElement(k,null,"BETA"))}]:[{label:"Line Chart",options:[{value:a.i.ActionsLineGraph,label:e.a.createElement(h,{icon:e.a.createElement(V.a,null)},"Linear")},{value:a.i.ActionsLineGraphCumulative,label:e.a.createElement(h,{icon:e.a.createElement(ue,null)},"Cumulative"),disabled:m}]},{label:"Bar Chart",options:[{value:a.i.ActionsBar,label:e.a.createElement(h,{icon:e.a.createElement(ve.a,null)},"Time"),disabled:v},{value:a.i.ActionsBarValue,label:e.a.createElement(h,{icon:e.a.createElement(ve.a,null)},"Value"),disabled:O}]},{value:a.i.ActionsTable,label:e.a.createElement(h,{icon:e.a.createElement(te,null)},"Table")},{value:a.i.ActionsPie,label:e.a.createElement(h,{icon:e.a.createElement(Se,null)},"Pie"),disabled:u},{value:a.i.WorldMap,label:e.a.createElement(h,{icon:e.a.createElement(Ke.a,null),tooltip:"Visualize data by country. Only works with one series at a time."},"World Map"),disabled:b}];return e.a.createElement(H.a,{key:"2",defaultValue:n.display||S,value:f||S,onChange:function(P){g(P),r==null||r(P)},bordered:!0,dropdownAlign:N.a.bottomRight,dropdownMatchSelectWidth:!1,listHeight:288,"data-attr":"chart-filter",disabled:s,options:y})}try{ke.displayName="ChartFilter",ke.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:ke.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(l){}var Xt=t("./node_modules/antd/es/checkbox/index.js"),Et=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Zt(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=Object(o.useValues)(Object(Et.a)(n)),s=r.compare,d=r.disabled,i=Object(o.useActions)(Object(Et.a)(n)),c=i.setCompare;return d?null:e.a.createElement(Xt.a,{onChange:function(p){c(p.target.checked)},checked:s,style:{marginLeft:8,marginRight:6},disabled:d},"Compare",e.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var ba=t("./node_modules/core-js/modules/es.array.map.js"),Ea=t("./node_modules/core-js/modules/es.object.entries.js"),Qt=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),at=t.n(Qt),ya=t("./node_modules/core-js/modules/es.array.iterator.js"),Oa=t("./node_modules/core-js/modules/es.object.to-string.js"),Ca=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),qt=t("./frontend/src/scenes/insights/sharedUtils.ts");function yt(l,n){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(l);n&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),r.push.apply(r,s)}return r}function Ot(l){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?yt(Object(r),!0).forEach(function(s){I()(l,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach(function(s){Object.defineProperty(l,s,Object.getOwnPropertyDescriptor(r,s))})}return l}var Ct=Object(o.kea)({props:{},key:Object(qt.c)("new"),path:function(n){return["lib","components","IntervalFilter","intervalFilterLogic",n]},connect:function(n){return{actions:[Object(M.c)(n),["setFilters"]],values:[Object(M.c)(n),["filters"]]}},actions:function(){return{setInterval:function(r){return{interval:r}}}},listeners:function(n){var r=n.values,s=n.actions;return{setInterval:function(i){var c=i.interval;Object(N.lb)(c,r.filters.interval)||s.setFilters(Ot(Ot({},r.filters),{},{interval:c}))}}},selectors:{interval:[function(l){return[l.filters]},function(l){return l==null?void 0:l.interval}]}}),rt=t("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),en={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function We(l){var n=l.disabled,r=Object(o.useValues)(M.c),s=r.insightProps,d=Object(o.useValues)(Ct(s)),i=d.interval,c=Object(o.useActions)(Ct(s)),f=c.setInterval,p=Object.entries(en).map(function(g){var m=at()(g,2),u=m[0],b=m[1].label;return{key:u,value:u,label:u===i?e.a.createElement(e.a.Fragment,null,e.a.createElement(rt.a,null)," ",b):b}});return e.a.createElement(H.a,{bordered:!0,disabled:n,defaultValue:i||"day",value:i||void 0,dropdownMatchSelectWidth:!1,onChange:f,"data-attr":"interval-filter",options:p})}try{We.displayName="IntervalFilter",We.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:We.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(l){}var tn=t("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),nn=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function jt(l,n){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(l);n&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),r.push.apply(r,s)}return r}function St(l){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?jt(Object(r),!0).forEach(function(s){I()(l,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach(function(s){Object.defineProperty(l,s,Object.getOwnPropertyDescriptor(r,s))})}return l}function an(){var l=Object(o.useValues)(M.c),n=l.filters,r=Object(o.useActions)(M.c),s=r.setFilters,d=n.interval,i=n.smoothing_intervals;if(!d)return null;var c=nn.a[d].map(function(f){var p=f.value,g=f.label;return{value:p,label:p===i?e.a.createElement(e.a.Fragment,null,e.a.createElement(tn.a,null)," ",g):g}});return c.length?e.a.createElement(H.a,{key:d,bordered:!0,value:i||1,dropdownMatchSelectWidth:!1,onChange:function(p){s(St(St({},n),{},{smoothing_intervals:p}))},"data-attr":"smoothing-filter",options:c}):e.a.createElement(e.a.Fragment,null)}var me=t("./frontend/src/lib/constants.tsx"),rn=t("./node_modules/@babel/runtime/helpers/extends.js"),ln=t.n(rn),Pt=t("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),sn=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function ze(l){var n=Object(o.useValues)(M.c),r=n.insightProps,s=Object(o.useValues)(Object(Pt.a)(r)),d=s.dates,i=d.dateFrom,c=d.dateTo,f=Object(o.useActions)(Object(Pt.a)(r)),p=f.setDates;return e.a.createElement(sn.a,ln()({},l,{dateFrom:i!=null?i:void 0,dateTo:c!=null?c:void 0,onChange:function(m,u){var b;p(m,u),(b=l.onChange)===null||b===void 0||b.call(l,m,u)}}))}try{ze.displayName="InsightDateFilter",ze.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:ze.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(l){}var on=t("./node_modules/rc-picker/lib/generate/dayjs.js"),cn=t.n(on),dn=t("./node_modules/antd/lib/date-picker/generatePicker/index.js"),un=t.n(dn),Ue=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),Fe=t("./frontend/src/lib/dayjs.ts"),mn=un()(cn.a);function He(l){var n=l.disabled,r=Object(o.useValues)(M.c),s=r.insightProps,d=Object(o.useValues)(Object(Ue.e)(s)),i=d.filters,c=Object(o.useActions)(Object(Ue.e)(s)),f=c.setFilters,p=i.date_to&&Object(Fe.a)(i.date_to).year()!==Object(Fe.a)().year()?", YYYY":"";return e.a.createElement(e.a.Fragment,null,e.a.createElement(ne.a,{title:"Cohorts up to this end date"},e.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},e.a.createElement(rt.a,null),e.a.createElement(mn,{showTime:i.period==="Hour",use12Hours:!0,format:i.period==="Hour"?"MMM D".concat(p,", h a"):"MMM D".concat(p),value:i.date_to?Object(Fe.a)(i.date_to):void 0,onChange:function(m){return f({date_to:m&&Object(Fe.a)(m).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:n}))))}try{He.displayName="RetentionDatePicker",He.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:He.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(l){}var re=t("./frontend/src/scenes/funnels/funnelLogic.ts"),fn=t("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function Ye(l){var n=l.disabled,r=Object(o.useValues)(M.c),s=r.insightProps,d=Object(o.useValues)(Object(re.a)(s)),i=d.barGraphLayout,c=Object(o.useActions)(Object(re.a)(s)),f=c.setFilters,p=[{value:me.j.vertical,icon:e.a.createElement(ve.a,null),label:"Left to right"},{value:me.j.horizontal,icon:e.a.createElement(fn.a,null),label:"Top to bottom"}];return e.a.createElement(H.a,{defaultValue:me.j.vertical,value:i||me.j.vertical,onChange:function(m){return f({layout:m})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:n},e.a.createElement(H.a.OptGroup,{label:"Graph display options"},p.map(function(g){return e.a.createElement(H.a.Option,{key:g.value,value:g.value,label:e.a.createElement(e.a.Fragment,null,g.icon," ",g.label)},g.label)})))}try{Ye.displayName="FunnelDisplayLayoutPicker",Ye.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:Ye.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(l){}var ja=t("./node_modules/core-js/modules/es.array.filter.js"),Sa=t("./node_modules/core-js/modules/es.array.from.js"),Pa=t("./node_modules/core-js/modules/es.array.slice.js"),Ta=t("./node_modules/core-js/modules/es.string.iterator.js"),pn=t("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),lt=t("./frontend/src/scenes/paths/pathsLogic.ts"),gn=t("./frontend/src/scenes/userLogic.ts");function $e(l){var n,r=l.disabled,s=Object(o.useValues)(M.c),d=s.insightProps,i=Object(o.useValues)(Object(lt.b)(d)),c=i.filter,f=Object(o.useActions)(Object(lt.b)(d)),p=f.setFilter,g=Object(o.useValues)(gn.a),m=g.user,u=2,b=!(m==null||(n=m.organization)===null||n===void 0)&&n.available_features.includes(a.d.PATHS_ADVANCED)?20:5,v=Array.from(Array.from(Array.from(Array(b+1).keys()).slice(u)),function(O){return{label:"".concat(O," Steps"),value:O}});return e.a.createElement(H.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:c.step_limit||lt.a,onSelect:function(S){return p({step_limit:S})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:N.a.bottomRight,optionLabelProp:"label",disabled:r},v.map(function(O){return e.a.createElement(H.a.Option,{key:O.value,value:O.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(pn.a,null)," ",O.label)},O.label)}))}try{$e.displayName="PathStepPicker",$e.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:$e.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(l){}var Tt=t("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function Ge(l){var n=l.disabled,r=Object(o.useValues)(M.c),s=r.insightProps,d=Object(o.useValues)(Object(Ue.e)(s)),i=d.retentionReference,c=Object(o.useActions)(Object(Ue.e)(s)),f=c.setRetentionReference;return e.a.createElement(H.a,{value:i,onChange:f,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:n},[{value:"total",icon:e.a.createElement(Tt.a,null),label:"Overall cohort"},{value:"previous",icon:e.a.createElement(Tt.a,null),label:"Relative to previous period"}].map(function(p){return e.a.createElement(H.a.Option,{key:p.value,value:p.value,label:e.a.createElement(e.a.Fragment,null,p.icon," ",p.label)},p.label)}))}try{Ge.displayName="ReferencePicker",Ge.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:Ge.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(l){}var _t=t("./node_modules/antd/es/tooltip/index.js"),he=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),_a=t("./node_modules/core-js/modules/es.array.concat.js"),Fa=t("./node_modules/core-js/modules/es.set.js"),vn=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),be=t.n(vn),hn=t("./node_modules/antd/es/input-number/index.js"),st=t("./node_modules/clsx/dist/clsx.m.js"),bn=0,Ft=90,En=new Set([5,15,25,50,90]),yn=[{label:"Auto bins",value:me.a,display:!0}].concat(be()(Array.from(Array.from(Array(Ft+1).keys()),function(l){return{label:"".concat(l," bins"),value:l,display:En.has(l)}})),[{label:"Custom",value:"custom",display:!0}]);function Je(l){var n=l.disabled,r=Object(o.useValues)(M.c),s=r.insightProps,d=Object(o.useValues)(Object(re.a)(s)),i=d.filters,c=d.numericBinCount,f=Object(o.useActions)(Object(re.a)(s)),p=f.setBinCount;return e.a.createElement(H.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:me.a,value:i.bin_count||me.a,onSelect:function(m){return p(m)},dropdownRender:function(m){return e.a.createElement(e.a.Fragment,null,m,e.a.createElement("div",null,e.a.createElement(hn.a,{className:"funnel-bins-custom-picker",size:"middle",min:bn,max:Ft,value:c,onChange:function(b){var v=typeof b=="string"?parseInt(b):b;v&&p(v)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:N.a.bottomRight,optionLabelProp:"label",disabled:n},e.a.createElement(H.a.OptGroup,{label:"Bin Count"},yn.map(function(g){return g.value==="custom"?null:e.a.createElement(H.a.Option,{className:Object(st.a)({"select-option-hidden":!g.display}),key:g.value,value:g.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(ve.a,null)," ",g.label)},g.label)})))}try{Je.displayName="FunnelBinsPicker",Je.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:Je.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(l){}var ot=t("./frontend/src/lib/logic/featureFlagLogic.ts"),ye,Oe,On=function(n,r){switch(n){case a.y.FUNNELS:return r.funnel_viz_type===a.u.Trends;case a.y.RETENTION:case a.y.PATHS:return!1;case a.y.TRENDS:case a.y.STICKINESS:case a.y.LIFECYCLE:default:return!r.display||!me.l.includes(r.display)}},Cn=function(n){switch(n){case a.y.TRENDS:case a.y.STICKINESS:return!0;case a.y.RETENTION:case a.y.FUNNELS:return!1;case a.y.LIFECYCLE:case a.y.PATHS:return!1;default:return!0}},jn=(ye={},I()(ye,"".concat(a.y.TRENDS),!0),I()(ye,"".concat(a.y.STICKINESS),!0),I()(ye,"".concat(a.y.LIFECYCLE),!0),I()(ye,"".concat(a.y.FUNNELS),!0),I()(ye,"".concat(a.y.RETENTION),!1),I()(ye,"".concat(a.y.PATHS),!0),ye),Sn=(Oe={},I()(Oe,"".concat(a.y.TRENDS),!0),I()(Oe,"".concat(a.y.STICKINESS),!0),I()(Oe,"".concat(a.y.LIFECYCLE),!1),I()(Oe,"".concat(a.y.FUNNELS),!1),I()(Oe,"".concat(a.y.RETENTION),!1),I()(Oe,"".concat(a.y.PATHS),!1),Oe),Pn=function(n){var r,s;return!n.actions&&!n.events||((r=n.actions)===null||r===void 0?void 0:r.length)===0&&((s=n.events)===null||s===void 0?void 0:s.length)===0};function Xe(l){var n=l.filters,r=l.activeView,s=l.disableTable,d=r===a.y.FUNNELS,i=r===a.y.PATHS,c=Object(o.useValues)(ot.a),f=c.featureFlags;return e.a.createElement("div",{className:"display-config-inner"},e.a.createElement("div",{className:"display-config-inner-row"},jn[r]&&!s&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Date range"),e.a.createElement(ze,{defaultValue:"Last 7 days",disabled:d&&Pn(n),bordered:!0,makeLabel:function(g){return e.a.createElement(e.a.Fragment,null,e.a.createElement(rt.a,null)," ",g,g=="All time"&&e.a.createElement(_t.a,{title:"Only events dated after 2015 will be shown"},e.a.createElement(he.a,{className:"info-indicator"})))}})),On(r,n)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},e.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),e.a.createElement(We,{view:r})),r===a.y.TRENDS&&!n.breakdown_type&&!n.compare&&(!n.display||n.display===a.i.ActionsLineGraph)&&f[me.h.SMOOTHING_INTERVAL]?e.a.createElement(an,null):null,r===a.y.RETENTION&&e.a.createElement(e.a.Fragment,null,e.a.createElement(He,null),e.a.createElement(Ge,null)),i&&e.a.createElement("span",{className:"filter"},e.a.createElement($e,null)),Sn[r]&&e.a.createElement("span",{className:"filter"},e.a.createElement(Zt,null))),e.a.createElement("div",{className:"display-config-inner-row"},Cn(r)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Chart type"),e.a.createElement(ke,{filters:n,disabled:n.insight===a.y.LIFECYCLE})),d&&n.funnel_viz_type===a.u.Steps&&e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"filter"},e.a.createElement(Ye,null))),d&&n.funnel_viz_type===a.u.TimeToConvert&&e.a.createElement("span",{className:"filter"},e.a.createElement(Je,null))))}try{Xe.displayName="InsightDisplayConfig",Xe.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:Xe.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(l){}var Pe=t("./node_modules/antd/es/button/index.js"),Tn=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Re=t.n(Tn),_n=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),xt=t.n(_n),it={};it.insert="head",it.singleton=!1;var xa=Re()(xt.a,it),La=xt.a.locals||{},xe=t("./frontend/src/scenes/funnels/funnelUtils.ts"),Ia=t("./node_modules/core-js/modules/es.array.find.js"),Lt=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function It(){var l,n=Object(o.useValues)(M.c),r=n.insightProps,s=Object(o.useValues)(Object(re.a)(r)),d=s.filters,i=s.numberOfSeries,c=s.areFiltersValid,f=s.filterSteps,p=Object(o.useActions)(Object(re.a)(r)),g=p.changeStepRange;if(d.funnel_viz_type===a.u.Steps)return null;var m=function(S,h){g(S,h)},u=c?Array.from(Array(Math.max(i)).keys()).slice(0,-1):[0],b=c?Array.from(Array(Math.max(i)).keys()).slice(((l=d.funnel_from_step)!==null&&l!==void 0?l:0)+1):[1],v=function(S){return S.map(function(h){var k=f.find(function(y){return y.order===h});return k?e.a.createElement(H.a.Option,{key:h,value:h,label:"Step ".concat(h+1)},e.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.a.createElement("span",{style:{marginRight:4}},"Step ",h+1,":"),e.a.createElement(Lt.a,{filter:k}))):null})};return e.a.createElement(U.a,{className:"funnel-options-inputs"},e.a.createElement("span",{className:"text-muted-alt"},"from"),e.a.createElement(H.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:N.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:d.funnel_from_step||0,onChange:function(S){return m(S,d.funnel_to_step)},style:{marginLeft:4,marginRight:4}},v(u)),e.a.createElement("span",{className:"text-muted-alt"},"to"),e.a.createElement(H.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:N.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:d.funnel_to_step||Math.max(i-1,1),onChange:function(S){return m(d.funnel_from_step,S)},style:{marginLeft:4,marginRight:4}},v(b)))}function Fn(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=l.filters,s=l.activeView,d=Object(o.useValues)(Object(re.a)(n)),i=d.conversionMetrics,c=d.aggregationTargetLabel,f=Object(o.useActions)(Object(de.a)(n)),p=f.setChartFilter;if(s!==a.y.FUNNELS)return null;var g=[].concat(be()(r.funnel_viz_type===a.u.Steps?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(ne.a,{title:"Overall conversion rate for all ".concat(c.plural," on the entire funnel.")},e.a.createElement(he.a,{className:"info-indicator left"})),"Total conversion rate"),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement("span",{className:"l4"},Object(xe.c)(i.totalRate),"%"))]:[]),be()(r.funnel_viz_type!==a.u.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(ne.a,{title:"Average (arithmetic mean) of the total time each ".concat(c.singular," spent in the entire funnel.")},e.a.createElement(he.a,{className:"info-indicator left"})),"Average time to convert"," "),r.funnel_viz_type===a.u.TimeToConvert&&e.a.createElement(It,null),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement(Pe.a,{type:"link",onClick:function(){return p(a.u.TimeToConvert)},disabled:r.funnel_viz_type===a.u.TimeToConvert},e.a.createElement("span",{className:"l4"},Object(N.M)(i.averageTime))))]:[]),be()(r.funnel_viz_type===a.u.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),e.a.createElement(It,null))]:[]));return e.a.createElement(U.a,{className:"funnel-canvas-label",align:"middle"},g.map(function(m,u){return e.a.createElement(e.a.Fragment,{key:u},u>0&&e.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),m)}))}var xn=t("./frontend/src/lib/hooks/usePeriodicRerender.ts"),Nt=3;function Ln(){var l=Object(o.useValues)(M.c),n=l.lastRefresh,r=Object(o.useActions)(M.c),s=r.loadResults;return Object(xn.a)(15e3),e.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",n?Object(Fe.a)(n).fromNow():"a while ago",e.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),e.a.createElement(_t.a,{title:e.a.createElement(e.a.Fragment,null,"Insights can be refreshed",e.a.createElement("br",null),"every ",Nt," minutes.")},e.a.createElement(Pe.a,{size:"small",type:"link",onClick:function(){return s(!0)},disabled:!!n&&Object(Fe.a)().subtract(Nt-.5,"minutes").isBefore(n),style:{padding:0}},e.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var At=t("./frontend/src/scenes/trends/PersonsModal.tsx"),ct=t("./frontend/src/scenes/trends/viz/index.ts"),In=t("./frontend/src/scenes/trends/SaveCohortModal.tsx"),Ve=t("./frontend/src/scenes/trends/trendsLogic.ts"),Ze=t("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(l){}var Le=t("./frontend/src/scenes/trends/personsModalLogic.ts"),dt=t("./frontend/src/lib/utils/eventUsageLogic.ts"),Rt=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),Nn=t("./frontend/src/scenes/insights/WorldMap/index.ts");function Ie(l){var n=l.view,r=Object(o.useValues)(Rt.a),s=r.insightMode,d=Object(o.useValues)(M.c),i=d.insightProps,c=Object(o.useValues)(Le.b),f=c.cohortModalVisible,p=Object(o.useActions)(Le.b),g=p.setCohortModalVisible,m=Object(o.useValues)(Object(Ve.a)(i)),u=m.filters,b=m.loadMoreBreakdownUrl,v=m.breakdownValuesLoading,O=m.showModalActions,S=m.aggregationTargetLabel,h=Object(o.useActions)(Object(Ve.a)(i)),k=h.loadMoreBreakdownValues,y=Object(o.useValues)(Le.b),C=y.showingPeople,P=Object(o.useActions)(Le.b),F=P.saveCohortWithUrl,j=Object(o.useActions)(dt.f),T=j.reportCohortCreatedFromPersonsModal,A=function(){if(!u.display||u.display===a.i.ActionsLineGraph||u.display===a.i.ActionsLineGraphCumulative||u.display===a.i.ActionsBar)return e.a.createElement(ct.b,null);if(u.display===a.i.ActionsTable)return e.a.createElement(o.BindLogic,{logic:Ve.a,props:{dashboardItemId:null,view:n,filters:null}},e.a.createElement(Ze.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(n),canEditSeriesNameInline:s===a.z.Edit,isMainInsightView:!0}));if(u.display===a.i.ActionsPie)return e.a.createElement(ct.c,null);if(u.display===a.i.ActionsBarValue)return e.a.createElement(ct.a,null);if(u.display===a.i.WorldMap)return e.a.createElement(Nn.a,null)};return e.a.createElement(e.a.Fragment,null,(u.actions||u.events)&&e.a.createElement("div",{className:u.display!==a.i.ActionsTable&&u.display!==a.i.WorldMap?"trends-insights-container":void 0},A()),u.breakdown&&b&&e.a.createElement("div",{className:"mt text-center"},e.a.createElement("div",{className:"text-muted mb"},"For readability, ",e.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),e.a.createElement("div",null,e.a.createElement(Pe.a,{style:{textAlign:"center",marginBottom:16},onClick:k,loading:v},"Load more breakdown values"))),e.a.createElement(At.a,{visible:C&&!f,view:n,filters:u,onSaveCohort:function(){g(!0)},showModalActions:O,aggregationTargetLabel:S}),e.a.createElement(In.a,{visible:f,onOk:function(le){F(le),g(!1),T(u)},onCancel:function(){return g(!1)}}))}try{Ie.displayName="TrendInsight",Ie.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:Ie.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(l){}var An=t("./frontend/src/scenes/funnels/Funnel.tsx");function Rn(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=Object(o.useValues)(Object(re.a)(n)),s=r.isValidFunnel,d=r.insightLoading,i=r.filters,c=r.areFiltersValid,f=r.barGraphLayout,p=r.aggregationTargetLabel,g=Object(o.useValues)(Le.b),m=g.showingPeople,u=g.cohortModalVisible,b=Object(o.useActions)(Le.b),v=b.setCohortModalVisible,O=s&&c||d,S=i.funnel_viz_type==a.u.Steps&&f===me.j.vertical;return e.a.createElement(e.a.Fragment,null,e.a.createElement(At.a,{visible:m&&!u,view:a.y.FUNNELS,filters:i,onSaveCohort:function(){v(!0)},showModalActions:i.aggregation_group_type_index==null,aggregationTargetLabel:p}),e.a.createElement("div",{className:Object(st.a)("funnel-insights-container",{"non-empty-state":O,"no-padding":S})},e.a.createElement(An.a,null)))}var Vn=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),Dn=t("./frontend/src/scenes/paths/Paths.tsx"),De=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function Mn(){var l=Object(o.useValues)(M.c),n=l.activeView;return n!==a.y.PATHS?null:e.a.createElement(U.a,{className:"funnel-canvas-label",align:"middle"},e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var wn=t("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),Bn=t("./node_modules/antd/lib/input/TextArea.js"),Kn=t.n(Bn),kn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),Vt=t.n(kn),ut={};ut.insert="head",ut.singleton=!1;var Na=Re()(Vt.a,ut),Aa=Vt.a.locals||{},Ra=t("./node_modules/core-js/modules/es.number.constructor.js"),Va=t("./node_modules/core-js/modules/es.number.is-integer.js"),Da=t("./node_modules/core-js/modules/es.number.to-fixed.js"),Ma=t("./node_modules/core-js/modules/es.regexp.exec.js"),wa=t("./node_modules/core-js/modules/es.string.split.js"),Wn=t("./node_modules/antd/es/spin/index.js"),mt=t("./node_modules/antd/es/table/index.js"),zn=t("./node_modules/antd/lib/table/Column.js"),fe=t.n(zn),Dt=t("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},Hn=Un,Mt=function(n,r){return w.createElement(K.a,Object(D.a)(Object(D.a)({},n),{},{ref:r,icon:Hn}))};Mt.displayName="FallOutlined";var wt=w.forwardRef(Mt),Bt=t("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),Ee=t("./frontend/src/lib/components/icons.tsx"),Yn=t("./node_modules/antd/lib/checkbox/Checkbox.js"),Qe=t.n(Yn),Ne=t("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),Ae=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),$n=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),Kt=t.n($n),ft={};ft.insert="head",ft.singleton=!1;var Ba=Re()(Kt.a,ft),Ka=Kt.a.locals||{},Gn=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function Me(l){var n=l.id,r=l.offset,s=l.children,d=Object(o.useActions)(Object(Gn.a)({id:n,offset:r})),i=d.scrolling,c=Object(w.useRef)(null);return Object(w.useEffect)(function(){var f=c.current;return document.addEventListener("scroll",function(){return i(f)}),function(){return document.removeEventListener("scroll",function(){return i(f)})}},[c.current]),e.a.createElement("div",{ref:c},s)}try{Me.displayName="VisibilitySensor",Me.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:Me.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(l){}var Te=t("./frontend/src/lib/components/LemonButton/index.ts"),kt=t("./frontend/src/lib/components/Popup/Popup.tsx"),Jn=t("./node_modules/antd/es/modal/index.js"),Xn=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),Zn=t("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),Qn=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),qn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),Wt=t.n(qn),pt={};pt.insert="head",pt.singleton=!1;var ka=Re()(Wt.a,pt),Wa=Wt.a.locals||{},ea=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),zt=t("./frontend/src/lib/components/Link.tsx"),ta=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function na(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=Object(re.a)(n),s=Object(o.useValues)(r),d=s.correlationsLoading,i=s.funnelCorrelationDetails,c=s.parseDisplayNameForCorrelation,f=s.correlationMatrixAndScore,p=Object(o.useActions)(r),g=p.setFunnelCorrelationDetails,m=p.openCorrelationPersonsModal,u=(i==null?void 0:i.result_type)===a.q.Events?"event":"property",b=(i==null?void 0:i.result_type)===a.q.Events?"performed event":"have property",v=e.a.createElement(e.a.Fragment,null);if(i){var O=c(i),S=O.first_value,h=O.second_value;v=e.a.createElement(e.a.Fragment,null,e.a.createElement(Ae.a,{value:S}),h!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Ae.a,{value:h,disablePopover:!0})))}var k=f.correlationScore,y=f.truePositive,C=f.falsePositive,P=f.trueNegative,F=f.falseNegative,j=f.correlationScoreStrength,T=j==="strong"?e.a.createElement(Xn.a,{style:{color:"var(--success)"}}):j==="moderate"?e.a.createElement(Zn.a,{style:{color:"var(--warning)"}}):e.a.createElement(Qn.a,{style:{color:"var(--danger)"}}),A=function(){return g(null)};return e.a.createElement(Jn.a,{className:"correlation-matrix",visible:!!i,onCancel:A,destroyOnClose:!0,footer:e.a.createElement(Pe.a,{onClick:A},"Dismiss"),width:600,title:"Correlation details"},e.a.createElement("div",{className:"correlation-table-wrapper"},d?e.a.createElement("div",{className:"mt text-center"},e.a.createElement(ea.a,{size:"lg"})):i?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",b," ",e.a.createElement("b",null,v),"."),e.a.createElement("table",null,e.a.createElement("thead",null,e.a.createElement("tr",{className:"table-title"},e.a.createElement("td",{colSpan:3},"Results matrix")),e.a.createElement("tr",null,e.a.createElement("td",null,(i==null?void 0:i.result_type)===a.q.Events?"Performed event":"Has property"),e.a.createElement("td",null,"Success"),e.a.createElement("td",null,"Dropped off"))),e.a.createElement("tbody",null,e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"Yes"),e.a.createElement("td",null,e.a.createElement(ne.a,{title:"True positive (TP) - Percentage of users who ".concat(b," and completed the funnel.")},e.a.createElement("div",{className:"percentage"},y?Object(N.nb)(y/(y+C)):"0.00%")),y===0?"0 users":e.a.createElement(zt.a,{onClick:function(){m(i,!0)}},Object(N.pb)(y,"user",void 0,!0))),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ne.a,{title:"False negative (FN) - Percentage of users who ".concat(b," and did not complete the funnel.")},F?Object(N.nb)(F/(F+P)):"0.00%")),F===0?"0 users":e.a.createElement(zt.a,{onClick:function(){m(i,!1)}},Object(N.pb)(F,"user",void 0,!0)))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"No"),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ne.a,{title:"False positive (FP) - Percentage of users who did not ".concat(b," and completed the funnel.")},C?Object(N.nb)(C/(y+C)):"0.00%")),Object(N.pb)(C,"user",void 0,!0)),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ne.a,{title:"True negative (TN) - Percentage of users who did not ".concat(b," and did not complete the funnel.")},P?Object(N.nb)(P/(F+P)):"0.00%")),Object(N.pb)(P,"user",void 0,!0))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"}),e.a.createElement("td",null,e.a.createElement("b",null,"100%")),e.a.createElement("td",null,e.a.createElement("b",null,"100%"))))),e.a.createElement("div",{className:"mt text-center"},Object(N.i)((i==null?void 0:i.result_type)||"")," ",e.a.createElement("b",null,v)," ","has a"," ",(i==null?void 0:i.correlation_type)===a.r.Success?e.a.createElement("b",{className:"text-success"},"positive"," ",e.a.createElement(ne.a,{title:"Positive correlation means this ".concat(u," is correlated with a successful conversion.")},e.a.createElement(he.a,{className:"cursor-pointer"}))):e.a.createElement("b",{className:"text-danger"},"negative"," ",e.a.createElement(ne.a,{title:"Negative correlation means this ".concat(u," is correlated with an unsuccessful conversion (user dropped off).")},e.a.createElement(he.a,{className:"cursor-pointer"})))," ","correlation score of"," ",e.a.createElement("b",{style:{color:j==="strong"?"var(--success)":j==="moderate"?"var(--warning)":"var(--danger)"}},e.a.createElement(ne.a,{title:"This ".concat(u," has ").concat(j," correlation.")},e.a.createElement("span",{style:{cursor:"pointer"}},T," ",k.toFixed(3)))))):e.a.createElement("div",null,e.a.createElement(ta.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function aa(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=Object(re.a)(n),s=Object(o.useValues)(r),d=s.stepsWithCount,i=s.correlationValues,c=s.correlationTypes,f=s.eventHasPropertyCorrelations,p=s.eventWithPropertyCorrelationsValues,g=s.parseDisplayNameForCorrelation,m=s.correlationsLoading,u=s.eventWithPropertyCorrelationsLoading,b=s.nestedTableExpandedKeys,v=s.correlationPropKey,O=s.filters,S=s.aggregationTargetLabel,h=Object(o.useActions)(r),k=h.setCorrelationTypes,y=h.loadEventWithPropertyCorrelations,C=h.addNestedTableExpandedKey,P=h.removeNestedTableExpandedKey,F=h.openCorrelationPersonsModal,j=h.loadCorrelations,T=Object(o.useActions)(dt.f),A=T.reportCorrelationInteraction;Object(w.useEffect)(function(){j({})},[O]);var z=function(R){c?c.includes(R)?k(c.filter(function(J){return J!==R})):k([].concat(be()(c),[R])):k([R])},le=function(R){var J=function(nt){return nt<10&&!Number.isInteger(nt)?nt.toFixed(1):nt.toFixed()},se=R.correlation_type===a.r.Success,q=g(R),je=q.first_value,et=q.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,se?e.a.createElement(Dt.a,{style:{color:"green"}}):e.a.createElement(wt,{style:{color:"red"}})," ",e.a.createElement(Ae.a,{value:je}),et!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Ae.a,{value:et,disablePopover:!0}))),e.a.createElement("div",null,Object(N.i)(S.plural)," ",O.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,J(R.odds_ratio),"x ",se?"more":"less"," likely"))," ","to"," ",R.result_type===a.q.EventWithProperties?"have this event property":"do this event"),e.a.createElement(na,null))},G=function(R){return e.a.createElement(Ne.c,{onClick:function(){F(R,!0)}},R.success_count)},L=function(R){return e.a.createElement(Ne.c,{onClick:function(){F(R,!1)}},R.failure_count)},W=function(R){return u?e.a.createElement("div",{className:"nested-properties-loading"},e.a.createElement(Wn.a,null),e.a.createElement("h3",null,"Loading correlation results"),e.a.createElement("p",null,"This process can take up to 20 seconds. ")):e.a.createElement("div",null,e.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),e.a.createElement(mt.a,{dataSource:p[R],rowKey:function(se){return se.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(se,q){return A(a.q.EventWithProperties,"pagination change",{page:se,page_size:q})}}},e.a.createElement(fe.a,{title:"Property",key:"eventName",render:function(se,q){return le(q)},align:"left"}),e.a.createElement(fe.a,{title:"Completed",key:"success_count",render:function(se,q){return G(q)},width:90,align:"center"}),e.a.createElement(fe.a,{title:"Dropped off",key:"failure_count",render:function(se,q){return L(q)},width:120,align:"center"}),e.a.createElement(fe.a,{title:"",key:"actions",render:function(se,q){return e.a.createElement(Ut,{record:q})},align:"center",width:30})))};return d.length>1?e.a.createElement(Me,{id:v,offset:152},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement("span",{className:"funnel-correlation-header"},e.a.createElement("span",{className:"table-header"},e.a.createElement(Ee.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),e.a.createElement("span",{className:"table-options"},e.a.createElement("p",{className:"title"},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return z(a.r.Success)}},e.a.createElement(Qe.a,{checked:c.includes(a.r.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return z(a.r.Failure)}},e.a.createElement(Qe.a,{checked:c.includes(a.r.Failure),style:{pointerEvents:"none"}},"Dropoff")))),e.a.createElement(mt.a,{dataSource:i,loading:m,size:"small",scroll:{x:"max-content"},rowKey:function(R){return R.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return A(a.q.Events,"load more")}},expandable:{expandedRowRender:function(R){return W(R.event.event)},expandedRowKeys:b,rowExpandable:function(){return O.aggregation_group_type_index===void 0},expandIcon:function(R){var J=R.expanded,se=R.onExpand,q=R.record,je=R.expandable;return je?J?e.a.createElement(ne.a,{title:"Collapse"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(tt){P(q.event.event),se(q,tt)}},e.a.createElement(Ee.IconUnfoldLess,null))):e.a.createElement(ne.a,{title:"Expand to see correlated properties for this event"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(tt){!f(q.event.event)&&y(q.event.event),C(q.event.event),se(q,tt)}},e.a.createElement(Ee.IconUnfoldMore,null))):null}}},e.a.createElement(fe.a,{title:"Event",key:"eventName",render:function(R,J){return le(J)},align:"left",ellipsis:!0}),e.a.createElement(fe.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(ne.a,{title:"".concat(Object(N.i)(S.plural)," ").concat(O.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},e.a.createElement(he.a,{className:"column-info"}))),key:"success_count",render:function(R,J){return G(J)},width:90,align:"center"}),e.a.createElement(fe.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(ne.a,{title:e.a.createElement(e.a.Fragment,null,Object(N.i)(S.plural)," ",O.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(he.a,{className:"column-info"}))),key:"failure_count",render:function(R,J){return L(J)},width:120,align:"center"}),e.a.createElement(fe.a,{title:"",key:"actions",render:function(R,J){return e.a.createElement(Ut,{record:J})},width:30})))):null}var Ut=function(n){var r=n.record,s=Object(o.useValues)(M.c),d=s.insightProps,i=Object(re.a)(d),c=Object(o.useActions)(i),f=c.excludeEventPropertyFromProject,p=c.excludeEventFromProject,g=c.setFunnelCorrelationDetails,m=Object(o.useValues)(i),u=m.isEventPropertyExcluded,b=m.isEventExcluded,v=r.event.event.split("::"),O=Object(w.useState)(!1),S=at()(O,2),h=S[0],k=S[1];return e.a.createElement(U.a,{style:{justifyContent:"flex-end"}},e.a.createElement(kt.a,{visible:h,actionable:!0,onClickOutside:function(){return k(!1)},overlay:e.a.createElement(e.a.Fragment,null,r.result_type===a.q.Events&&e.a.createElement(Te.a,{onClick:function(){return g(r)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Te.a,{disabled:r.result_type===a.q.EventWithProperties?u(v[1]):b(v[0]),onClick:function(){return r.result_type===a.q.EventWithProperties?f(v[0],v[1]):p(v[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},e.a.createElement(Te.a,{type:"stealth",onClick:function(){return k(!h)}},e.a.createElement(Bt.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},ra=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function la(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=Object(re.a)(n),s=Object(o.useValues)(r),d=s.stepsWithCount,i=s.propertyCorrelationValues,c=s.propertyCorrelationTypes,f=s.excludedPropertyNames,p=s.parseDisplayNameForCorrelation,g=s.propertyCorrelationsLoading,m=s.inversePropertyNames,u=s.propertyNames,b=s.correlationPropKey,v=s.allProperties,O=s.filters,S=s.aggregationTargetLabel,h=Object(o.useActions)(r),k=h.setPropertyCorrelationTypes,y=h.setPropertyNames,C=h.openCorrelationPersonsModal,P=h.loadPropertyCorrelations,F=Object(o.useActions)(dt.f),j=F.reportCorrelationInteraction;Object(w.useEffect)(function(){u.length===0&&y(v),P({})},[O]);var T=function(L){c?c.includes(L)?k(c.filter(function(W){return W!==L})):k([].concat(be()(c),[L])):k([L])},A=function(L){return e.a.createElement(Ne.c,{onClick:function(){C(L,!0)}},L.success_count)},z=function(L){return e.a.createElement(Ne.c,{onClick:function(){C(L,!1)}},L.failure_count)},le=function(L){var W=function(je){return je<10&&!Number.isInteger(je)?je.toFixed(1):je.toFixed()},ae=L.correlation_type===a.r.Success,R=p(L),J=R.first_value,se=R.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,ae?e.a.createElement(Dt.a,{style:{color:"green"}}):e.a.createElement(wt,{style:{color:"red"}})," ",e.a.createElement(Ae.a,{value:J}),se!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Ae.a,{value:se,disablePopover:!0}))),e.a.createElement("div",null,Object(N.i)(S.plural)," ",O.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,W(L.odds_ratio),"x ",ae?"more":"less"," likely"))," ","to have this property value"))};return d.length>1?e.a.createElement(Me,{offset:150,id:"".concat(b,"-properties")},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement(U.a,{className:"funnel-correlation-header"},e.a.createElement(Y.a,{className:"table-header"},e.a.createElement(Ee.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),e.a.createElement(Y.a,{className:"table-options"},e.a.createElement(U.a,{style:{display:"contents"}},v.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"title"},"PROPERTIES "),e.a.createElement(ra.a,{value:new Set(u),onChange:function(L){return y(L)},allProperties:m(f||[])}))),e.a.createElement(U.a,{style:{display:"contents"}},e.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return T(a.r.Success)}},e.a.createElement(Qe.a,{checked:c.includes(a.r.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return T(a.r.Failure)}},e.a.createElement(Qe.a,{checked:c.includes(a.r.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),e.a.createElement(mt.a,{dataSource:i,loading:g,scroll:{x:"max-content"},size:"small",rowKey:function(L){return L.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(L,W){return j(a.q.Properties,"pagination change",{page:L,page_size:W})}}},e.a.createElement(fe.a,{title:"".concat(Object(N.i)(S.singular)," property"),key:"propertName",render:function(L,W){return le(W)},align:"left"}),e.a.createElement(fe.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(ne.a,{title:"".concat(Object(N.i)(S.plural)," ").concat(O.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},e.a.createElement(he.a,{className:"column-info"}))),key:"success_count",render:function(L,W){return A(W)},width:90,align:"center"}),e.a.createElement(fe.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(ne.a,{title:e.a.createElement(e.a.Fragment,null,Object(N.i)(S.plural)," ",O.aggregation_group_type_index!=null?"that":"who"," have this property and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(he.a,{className:"column-info"}))),key:"failure_count",render:function(L,W){return z(W)},width:120,align:"center"}),e.a.createElement(fe.a,{title:"",key:"actions",render:function(L,W){return e.a.createElement(sa,{record:W})},align:"center",width:30})))):null}var sa=function(n){var r=n.record,s=Object(o.useValues)(M.c),d=s.insightProps,i=Object(re.a)(d),c=Object(o.useActions)(i),f=c.excludePropertyFromProject,p=c.setFunnelCorrelationDetails,g=Object(o.useValues)(i),m=g.isPropertyExcludedFromProject,u=(r.event.event||"").split("::")[0],b=Object(w.useState)(!1),v=at()(b,2),O=v[0],S=v[1];return e.a.createElement(U.a,{style:{justifyContent:"flex-end"}},e.a.createElement(kt.a,{visible:O,actionable:!0,onClickOutside:function(){return S(!1)},overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(Te.a,{onClick:function(){return p(r)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Te.a,{disabled:m(u),onClick:function(){return f(u)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},e.a.createElement(Te.a,{type:"stealth",onClick:function(){return S(!O)}},e.a.createElement(Bt.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},Ht=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),oa=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),ia=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),ca=function(){var n,r=Object(o.useValues)(M.c),s=r.insightProps,d=Object(o.useValues)(Object(re.a)(s)),i=d.isSkewed,c=d.stepsWithCount,f=d.correlationFeedbackHidden,p=d.correlationDetailedFeedbackVisible,g=d.correlationFeedbackRating,m=d.correlationAnalysisAvailable,u=d.aggregationTargetLabel,b=Object(o.useActions)(Object(re.a)(s)),v=b.sendCorrelationAnalysisFeedback,O=b.hideSkewWarning,S=b.hideCorrelationAnalysisFeedback,h=b.setCorrelationFeedbackRating,k=b.setCorrelationDetailedFeedback,y=Object(o.useValues)(ia.a),C=y.preflight,P=Object(w.useRef)(null);return c.length<=1?null:!m&&!(!(C==null||(n=C.instance_preferences)===null||n===void 0)&&n.disable_paid_fs)?e.a.createElement(oa.a,{identifier:a.d.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(u.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(u.plural," are converting or dropping off.")}):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Correlation analysis"),e.a.createElement("div",{className:"funnel-correlation"},i&&e.a.createElement(ee.a,{className:"skew-warning"},e.a.createElement("h4",null,e.a.createElement(Ee.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",e.a.createElement(Ht.a,{className:"close-button",onClick:O})),e.a.createElement("div",null,e.a.createElement("b",null,"Tips for adjusting your funnel:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),e.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),e.a.createElement(aa,null),!f&&e.a.createElement(ee.a,{className:"correlation-feedback"},e.a.createElement(U.a,{className:"row-initial"},e.a.createElement(Y.a,{span:14},e.a.createElement("h4",null,e.a.createElement(wn.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),e.a.createElement(Y.a,{span:9,style:{alignContent:"right"}},!!g&&e.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(F,j){return e.a.createElement(Pe.a,{key:j,className:"emoji-button",style:g===F[0]?{background:"#5375FF"}:g?{display:"none"}:{},onClick:function(){g===F[0]?h(0):(h(F[0]),setTimeout(function(){var A;return(A=P.current)===null||A===void 0?void 0:A.focus()},100))}},F[1])})),e.a.createElement(Y.a,{span:1},e.a.createElement(Ht.a,{className:"close-button",onClick:S}))),e.a.createElement("div",{style:{display:p?void 0:"none"}},e.a.createElement("form",{onSubmit:v},e.a.createElement(Kn.a,{onBlur:function(j){return k(j.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:P,onKeyDown:function(j){if(j.key==="Enter"&&j.metaKey){var T;(T=P.current)===null||T===void 0||T.blur(),v()}}}),e.a.createElement("div",{className:"text-right"},e.a.createElement(Pe.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),e.a.createElement(la,null)))},za=t("./node_modules/core-js/modules/es.regexp.to-string.js"),da=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),Yt=t.n(da),gt={};gt.insert="head",gt.singleton=!1;var Ua=Re()(Yt.a,gt),Ha=Yt.a.locals||{},ua=t("./frontend/src/lib/components/InsightLabel/index.tsx"),ma=t("./frontend/src/lib/colors.ts"),vt=t("./frontend/src/lib/components/LemonCheckbox/index.ts");function fa(){var l=Object(o.useValues)(M.c),n=l.filters,r=l.activeView,s=Object(o.useActions)(M.c),d=s.toggleInsightLegend,i=Object(o.useValues)(ot.a),c=i.featureFlags;return(r===a.y.TRENDS&&n.display!==a.i.WorldMap&&n.display!==a.i.ActionsTable||r===a.y.STICKINESS)&&c[me.h.INSIGHT_LEGENDS]?e.a.createElement(Pe.a,{className:"insight-legend-button",onClick:d},e.a.createElement(Ee.IconLegend,null),e.a.createElement("span",{className:"insight-legend-button-title"},n.show_legend?"Hide":"Show"," legend")):null}function pa(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=l.filters,s=Object(Ve.a)(n),d=Object(o.useValues)(s),i=d.indexedResults,c=d.hiddenLegendKeys,f=Object(o.useActions)(s),p=f.toggleVisibility,g=Object(ma.c)("white",i.length,!!r.compare);return e.a.createElement("div",{className:"insight-legend-menu"},e.a.createElement("div",{className:"insight-legend-menu-scroll"},i&&i.map(function(m){var u,b;return e.a.createElement(U.a,{key:m.id,className:"insight-legend-menu-item",wrap:!1},e.a.createElement(vt.a,{className:"insight-legend-menu-item-inner",color:g[m.id],checked:!c[m.id],onChange:function(){return p(m.id)},rowProps:{fullWidth:!0},label:e.a.createElement(ua.b,{key:m.id,seriesColor:g[m.id],action:m.action,fallbackName:m.breakdown_value===""?"None":m.label,hasMultipleSeries:i.length>1,breakdownValue:m.breakdown_value===""?"None":(u=m.breakdown_value)===null||u===void 0?void 0:u.toString(),compareValue:r.compare?Object(Ze.d)(m):void 0,pillMidEllipsis:(m==null||(b=m.filter)===null||b===void 0?void 0:b.breakdown)==="$current_url",hideIcon:!0})}))})))}var Ya=t("./node_modules/core-js/modules/es.array.every.js"),$a=t("./node_modules/core-js/modules/es.array.flat-map.js"),Ga=t("./node_modules/core-js/modules/es.array.some.js"),Ja=t("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),Xa=t("./node_modules/core-js/modules/es.object.from-entries.js"),ga=t("./frontend/src/lib/components/LemonTable/index.ts"),ht=t("./frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx"),va=t("./frontend/src/models/cohortsModel.ts"),$t=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),bt=t("./frontend/src/lib/components/LemonRow/index.ts");function ha(){var l=Object(o.useValues)(M.c),n=l.insightProps,r=Object(re.a)(n),s=Object(o.useValues)(r),d=s.insightLoading,i=s.steps,c=s.flattenedBreakdowns,f=s.hiddenLegendKeys,p=s.visibleStepsWithConversionMetrics,g=Object(o.useActions)(r),m=g.setHiddenById,u=g.toggleVisibilityByBreakdown,b=g.openPersonsModalForSeries,v=Object(o.useValues)(va.a),O=v.cohorts,S=c.length===1,h=c==null?void 0:c.every(function(y){return!f[Object(xe.m)(p==null?void 0:p[0],y.breakdown_value)]}),k=[{children:[{title:S?"Breakdown":e.a.createElement(vt.a,{checked:h||(c!=null&&c.some(function(y){return!f[Object(xe.m)(p==null?void 0:p[0],y.breakdown_value)]})?"indeterminate":!1),onChange:function(){m(Object.fromEntries(p.flatMap(function(C){return c.map(function(P){return[Object(xe.m)(C,P.breakdown_value),h]})})))},label:"Breakdown",rowProps:{compact:!0,style:{padding:0,marginLeft:"-0.5rem",font:"inherit"}}}),dataIndex:"breakdown_value",render:function(C){var P=Object(Ze.c)(O,C);return S?e.a.createElement("span",{style:{fontWeight:500}},P):e.a.createElement(vt.a,{checked:!f[Object(xe.m)(p==null?void 0:p[0],C)],onChange:function(){return u(C)},label:P,rowProps:{compact:!0,style:{padding:0,marginLeft:"-0.5rem",maxWidth:"16rem"},title:P}})}},{title:"Total conversion",render:function(C,P){var F,j;return Object(N.nb)((F=P==null||(j=P.conversionRates)===null||j===void 0?void 0:j.total)!==null&&F!==void 0?F:0,1,!0)},align:"right"}]}].concat(be()(i.map(function(y,C){return{title:e.a.createElement(bt.a,{icon:e.a.createElement($t.a,{name:C+1,color:$t.b.Gray}),style:{font:"inherit",padding:0},compact:!0},e.a.createElement(Lt.a,{filter:Object(ht.b)(y)})),children:[{title:C===0?"Entered":"Converted",render:function(F,j){var T,A,z=(T=j.steps)===null||T===void 0?void 0:T[C];return z&&e.a.createElement(Ne.c,{onClick:function(){return b({step:y,series:z,converted:!0})},style:{padding:0}},Object(N.N)((A=z.count)!==null&&A!==void 0?A:0))},align:"right"}].concat(be()(C===0?[]:[{title:"Dropped\xA0off",render:function(F,j){var T,A,z=(T=j.steps)===null||T===void 0?void 0:T[C];return z&&e.a.createElement(Ne.c,{onClick:function(){return b({step:y,series:z,converted:!1})},style:{padding:0}},Object(N.N)((A=z.droppedOffFromPrevious)!==null&&A!==void 0?A:0))},align:"right"}]),[{title:"Conversion so\xA0far",render:function(F,j){var T,A,z,le,G,L,W=Object(ht.c)(j,y.order);return W!=null&&W.total?e.a.createElement(bt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(Ee.IconFlag,null),compact:!0},Object(N.nb)((T=(A=j.steps)===null||A===void 0||(z=A[y.order])===null||z===void 0?void 0:z.conversionRates.total)!==null&&T!==void 0?T:0,1,!0)):Object(N.nb)((le=(G=j.steps)===null||G===void 0||(L=G[y.order])===null||L===void 0?void 0:L.conversionRates.total)!==null&&le!==void 0?le:0,1,!0)},align:"right"}],be()(C===0?[]:[{title:"Conversion from\xA0previous",render:function(F,j){var T,A,z,le,G,L,W=Object(ht.c)(j,y.order);return!(W!=null&&W.total)&&(W==null?void 0:W.fromPrevious)?e.a.createElement(bt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(Ee.IconFlag,null),compact:!0},Object(N.nb)((T=(A=j.steps)===null||A===void 0||(z=A[y.order])===null||z===void 0?void 0:z.conversionRates.fromPrevious)!==null&&T!==void 0?T:0,1,!0)):Object(N.nb)((le=(G=j.steps)===null||G===void 0||(L=G[y.order])===null||L===void 0?void 0:L.conversionRates.fromPrevious)!==null&&le!==void 0?le:0,1,!0)},align:"right"},{title:"Avg.\xA0time",render:function(F,j){var T,A;return((T=j.steps)===null||T===void 0||(A=T[y.order])===null||A===void 0?void 0:A.average_conversion_time)!=null?Object(N.M)(j.steps[y.order].average_conversion_time,3):"\u2013"},align:"right",width:0,className:"no-wrap"}]))}})));return e.a.createElement(ga.a,{dataSource:c,columns:k,loading:d,rowKey:"breakdownIndex",rowStatus:function(C){return C.significant?"highlighted":void 0},rowRibbonColor:function(C){return Object(xe.k)(C==null?void 0:C.breakdownIndex,c.length===1,void 0,c.length)}})}var Ce,Gt=(Ce={},I()(Ce,"".concat(a.y.TRENDS),e.a.createElement(Ie,{view:a.y.TRENDS})),I()(Ce,"".concat(a.y.STICKINESS),e.a.createElement(Ie,{view:a.y.STICKINESS})),I()(Ce,"".concat(a.y.LIFECYCLE),e.a.createElement(Ie,{view:a.y.LIFECYCLE})),I()(Ce,"".concat(a.y.FUNNELS),e.a.createElement(Rn,null)),I()(Ce,"".concat(a.y.RETENTION),e.a.createElement(Vn.a,null)),I()(Ce,"".concat(a.y.PATHS),e.a.createElement(Dn.a,null)),Ce);function qe(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1},n=l.disableHeader,r=l.disableTable,s=Object(o.useValues)(ot.a),d=s.featureFlags,i=Object(o.useValues)(Rt.a),c=i.insightMode,f=Object(o.useValues)(M.c),p=f.insightProps,g=f.canEditInsight,m=f.insightLoading,u=f.activeView,b=f.loadedView,v=f.filters,O=f.showTimeoutMessage,S=f.showErrorMessage,h=f.csvExportUrl,k=Object(o.useValues)(Object(re.a)(p)),y=k.areFiltersValid,C=k.isValidFunnel,P=k.areExclusionFiltersValid,F=k.correlationAnalysisAvailable,j=function(){if(u!==b||m&&!O)return e.a.createElement(e.a.Fragment,null,v.display!==a.i.ActionsTable&&v.display!==a.i.WorldMap&&e.a.createElement("div",{className:"trends-insights-container"}),e.a.createElement(N.b,null));if(b===a.y.FUNNELS){if(!y)return e.a.createElement(De.b,{actionable:c===a.z.Edit||r});if(!P)return e.a.createElement(De.a,null);if(!C&&!m)return e.a.createElement(De.c,null)}return S?e.a.createElement(De.d,null):O?e.a.createElement(De.e,{isLoading:m}):null}();function T(){return u===a.y.FUNNELS&&!S&&!O&&y&&v.funnel_viz_type===a.u.Steps&&!r&&(d[me.h.LEMON_FUNNEL_VIZ]||(v==null?void 0:v.layout)===me.j.horizontal)?e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Detailed results"),e.a.createElement(ha,null)):(!v.display||(v==null?void 0:v.display)!==a.i.ActionsTable&&(v==null?void 0:v.display)!==a.i.ActionsBarValue)&&u===a.y.TRENDS&&!r?e.a.createElement(e.a.Fragment,null,h&&e.a.createElement("div",{className:"flex-center space-between-items",style:{margin:"1rem 0"}},e.a.createElement("h2",null,"Detailed results"),e.a.createElement(ne.a,{title:"Export this table in CSV format",placement:"left"},e.a.createElement(Te.a,{type:"secondary",icon:e.a.createElement(Ee.IconExport,{style:{color:"var(--primary)"}}),href:h},"Export"))),e.a.createElement(o.BindLogic,{logic:Ve.a,props:p},e.a.createElement(Ze.b,{isLegend:!0,showTotalCount:!0,filterKey:u===a.y.TRENDS?"trends_".concat(u):"",canEditSeriesNameInline:u===a.y.TRENDS&&c===a.z.Edit,canCheckUncheckSeries:g}))):null}return e.a.createElement(e.a.Fragment,null,e.a.createElement(ee.a,{title:n?null:e.a.createElement(Xe,{activeView:u,insightMode:c,filters:v,disableTable:!!r}),"data-attr":"insights-graph",className:"insights-graph-container"},e.a.createElement("div",null,e.a.createElement(U.a,{className:Object(st.a)("insights-graph-header",{funnels:u===a.y.FUNNELS}),align:"middle",justify:"space-between"},e.a.createElement(Y.a,null,e.a.createElement(Ln,null)),e.a.createElement(Y.a,null,u===a.y.FUNNELS?e.a.createElement(Fn,null):null,u===a.y.PATHS?e.a.createElement(Mn,null):null,e.a.createElement(fa,null))),j||(d[me.h.INSIGHT_LEGENDS]&&(u===a.y.TRENDS||u===a.y.STICKINESS)&&v.show_legend?e.a.createElement(U.a,{className:"insights-graph-container-row",wrap:!1},e.a.createElement(Y.a,{className:"insights-graph-container-row-left"},Gt[u]),e.a.createElement(Y.a,{className:"insights-graph-container-row-right"},e.a.createElement(pa,null))):Gt[u]))),T(),!r&&F&&u===a.y.FUNNELS&&e.a.createElement(ca,null))}try{qe.displayName="InsightContainer",qe.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:qe.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(l){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(X,x,t){"use strict";t.d(x,"a",function(){return pe});var B=t("./node_modules/core-js/modules/es.array.iterator.js"),I=t.n(B),ee=t("./node_modules/core-js/modules/es.object.to-string.js"),U=t.n(ee),Y=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ie=t.n(Y),ce=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),w=t.n(ce),e=t("./node_modules/kea/lib/index.esm.js"),o=t("./frontend/src/scenes/insights/insightLogic.ts"),ge=t("./frontend/src/scenes/insights/sharedUtils.ts");function H(V,D){var E=Object.keys(V);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(V);D&&(_=_.filter(function(K){return Object.getOwnPropertyDescriptor(V,K).enumerable})),E.push.apply(E,_)}return E}function de(V){for(var D=1;D<arguments.length;D++){var E=arguments[D]!=null?arguments[D]:{};D%2?H(Object(E),!0).forEach(function(_){w()(V,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(E)):H(Object(E)).forEach(function(_){Object.defineProperty(V,_,Object.getOwnPropertyDescriptor(E,_))})}return V}var pe=Object(e.kea)({props:{},key:Object(ge.c)("new"),path:function(D){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",D]},connect:function(D){return{actions:[Object(o.c)(D),["setFilters"]],values:[Object(o.c)(D),["filters"]]}},actions:function(){return{setDates:function(E,_){return{dateFrom:E,dateTo:_}}}},selectors:{dates:[function(V){return[V.filters]},function(V){return{dateFrom:(V==null?void 0:V.date_from)||null,dateTo:(V==null?void 0:V.date_to)||null}}]},listeners:function(D){var E=D.actions,_=D.values;return{setDates:function($){var ue=$.dateFrom,ve=$.dateTo;E.setFilters(de(de({},_.filters),{},{date_from:ue||null,date_to:ve||null}))}}}})},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(X,x,t){"use strict";t.d(x,"a",function(){return ce});var B=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),I=t.n(B),ee=t("./node_modules/react/index.js"),U=t.n(ee),Y=t("./node_modules/antd/es/modal/index.js"),ie=t("./node_modules/antd/es/input/index.js");function ce(w){var e=w.onOk,o=w.onCancel,ge=w.visible,H=Object(ee.useState)(""),de=I()(H,2),pe=de[0],V=de[1];return U.a.createElement(Y.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){e(pe),V("")},onCancel:o,visible:ge},U.a.createElement("div",{className:"mb"},U.a.createElement(ie.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:pe,"data-attr":"cohort-name",onChange:function(E){return V(E.target.value)}})))}try{ce.displayName="SaveCohortModal",ce.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:ce.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(w){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(X,x,t){"use strict";var B=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),I=t("./node_modules/react/index.js"),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},U=ee,Y=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ie=function(e,o){return I.createElement(Y.a,Object(B.a)(Object(B.a)({},e),{},{ref:o,icon:U}))};ie.displayName="BarChartOutlined";var ce=x.a=I.forwardRef(ie)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(X,x,t){"use strict";var B=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),I=t("./node_modules/react/index.js"),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},U=ee,Y=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ie=function(e,o){return I.createElement(Y.a,Object(B.a)(Object(B.a)({},e),{},{ref:o,icon:U}))};ie.displayName="OrderedListOutlined";var ce=x.a=I.forwardRef(ie)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(X,x,t){"use strict";var B=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),I=t("./node_modules/react/index.js"),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},U=ee,Y=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ie=function(e,o){return I.createElement(Y.a,Object(B.a)(Object(B.a)({},e),{},{ref:o,icon:U}))};ie.displayName="PercentageOutlined";var ce=x.a=I.forwardRef(ie)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(X,x,t){var B=t("./node_modules/css-loader/dist/runtime/api.js");x=B(!1),x.push([X.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{width:100%;font-size:.75rem}",""]),X.exports=x},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(X,x,t){var B=t("./node_modules/css-loader/dist/runtime/api.js");x=B(!1),x.push([X.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),X.exports=x},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(X,x,t){var B=t("./node_modules/css-loader/dist/runtime/api.js");x=B(!1),x.push([X.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),X.exports=x},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(X,x,t){var B=t("./node_modules/css-loader/dist/runtime/api.js");x=B(!1),x.push([X.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),X.exports=x},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(X,x,t){var B=t("./node_modules/css-loader/dist/runtime/api.js");x=B(!1),x.push([X.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px;overflow:auto}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),X.exports=x}}]);
