(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/ExportButton/exporterLogic.ts":function(Oe,T,e){"use strict";e.d(T,"a",function(){return H}),e.d(T,"b",function(){return Ae});var k=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ie=e.n(k),ce=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),de=e.n(ce),q=e("./node_modules/@babel/runtime/regenerator/index.js"),ee=e.n(q),re=e("./node_modules/core-js/modules/es.array.concat.js"),Y=e.n(re),ue=e("./node_modules/core-js/modules/es.array.iterator.js"),me=e.n(ue),I=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(I),b=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),B=e.n(b),he=e("./node_modules/core-js/modules/es.object.keys.js"),te=e.n(he),ve=e("./node_modules/core-js/modules/es.symbol.js"),be=e.n(ve),t=e("./node_modules/core-js/modules/es.array.filter.js"),N=e.n(t),_e=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),X=e.n(_e),W=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ge=e.n(W),oe=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Fe=e.n(oe),K=e("./node_modules/kea/lib/index.esm.js"),Q=e("./frontend/src/lib/api.ts"),M=e("./frontend/src/lib/utils.tsx"),Ce=e("./node_modules/posthog-js/dist/es.js"),se=e("./frontend/src/scenes/teamLogic.tsx"),_=e("./frontend/src/lib/components/lemonToast.tsx");function i(p,D){var y=Object.keys(p);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(p);D&&(A=A.filter(function(V){return Object.getOwnPropertyDescriptor(p,V).enumerable})),y.push.apply(y,A)}return y}function O(p){for(var D=1;D<arguments.length;D++){var y=arguments[D]!=null?arguments[D]:{};D%2?i(Object(y),!0).forEach(function(A){ie()(p,A,y[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):i(Object(y)).forEach(function(A){Object.defineProperty(p,A,Object.getOwnPropertyDescriptor(y,A))})}return p}var g=1e3,F=10,H;(function(p){p.PNG="image/png",p.CSV="text/csv",p.PDF="application/pdf"})(H||(H={}));var Ae=Object(K.kea)([Object(K.path)(["lib","components","ExportButton","ExporterLogic"]),Object(K.props)({}),Object(K.key)(function(p){var D=p.dashboardId,y=p.insightId;return"dash:".concat(D,"::insight:").concat(y)}),Object(K.actions)({exportItem:function(D,y,A){return{exportFormat:D,exportContext:y,successCallback:A}},exportItemSuccess:!0,exportItemFailure:!0}),Object(K.reducers)({exportInProgress:[!1,{exportItem:function(){return!0},exportItemSuccess:function(){return!1},exportItemFailure:function(){return!1}}]}),Object(K.listeners)(function(p){var D=p.actions,y=p.props;return{exportItem:function(){var A=de()(ee.a.mark(function Ue(Le){var Te,w,Ne,De,xe,ae,Se,Ve;return ee.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Te=Le.exportFormat,w=Le.exportContext,Ne=Le.successCallback,_.d.info("Export started..."),De={export_format:Te,dashboard:y.dashboardId,insight:y.insightId,total_time_ms:0},xe=performance.now(),n.prev=4,n.next=7,Q.b.create("api/projects/".concat(se.a.values.currentTeamId,"/exports"),O({export_format:Te,dashboard:y.dashboardId,insight:y.insightId},w||{}));case 7:if(ae=n.sent,ae.id){n.next=10;break}throw new Error("Missing export_id from response");case 10:Se=Q.b.exports.determineExportUrl(ae.id),Ve=0;case 12:if(!(Ve<F)){n.next=29;break}if(Ve++,!ae.has_content){n.next=22;break}return D.exportItemSuccess(),_.d.success("Export complete."),Ne==null||Ne(),window.open(Se,"_blank"),De.total_time_ms=performance.now()-xe,Ce.a.capture("export succeeded",De),n.abrupt("return");case 22:return n.next=24,Object(M.w)(g);case 24:return n.next=26,Q.b.get("api/projects/".concat(se.a.values.currentTeamId,"/exports/").concat(ae.id));case 26:ae=n.sent,n.next=12;break;case 29:throw new Error("Content not loaded in time...");case 32:n.prev=32,n.t0=n.catch(4),D.exportItemFailure(),De.total_time_ms=performance.now()-xe,Ce.a.capture("export failed",De),_.d.error("Export failed: ".concat(JSON.stringify(n.t0)));case 38:case"end":return n.stop()}},Ue,null,[[4,32]])}));function V(Ue){return A.apply(this,arguments)}return V}()}})])},"./frontend/src/lib/components/RestrictedArea.tsx":function(Oe,T,e){"use strict";e.d(T,"b",function(){return I}),e.d(T,"a",function(){return G});var k=e("./node_modules/core-js/modules/es.array.concat.js"),ie=e.n(k),ce=e("./node_modules/kea/lib/index.esm.js"),de=e("./node_modules/react/index.js"),q=e.n(de),ee=e("./frontend/src/scenes/organizationLogic.tsx"),re=e("./frontend/src/lib/constants.tsx"),Y=e("./frontend/src/lib/components/Tooltip.tsx"),ue=e("./frontend/src/lib/utils/permissioning.ts"),me=e("./frontend/src/scenes/teamLogic.tsx"),I;(function(b){b.Organization="organization",b.Project="project"})(I||(I={}));function G(b){var B=b.Component,he=b.minimumAccessLevel,te=b.scope,ve=te===void 0?I.Organization:te,be=Object(ce.useValues)(ee.a),t=be.currentOrganization,N=Object(ce.useValues)(me.a),_e=N.currentTeam,X=Object(de.useMemo)(function(){var W;if(ve===I.Project){if(!_e)return"Loading current project\u2026";W=_e.effective_membership_level}else{if(!t)return"Loading current organization\u2026";W=t.membership_level}return W===null?"You don't have access to the current ".concat(ve,"."):W<he?he===re.m.Owner?"This area is restricted to the ".concat(ve," owner."):"This area is restricted to ".concat(ve," ").concat(ue.b.get(he),"s and up. Your level is ").concat(ue.b.get(W),"."):null},[t]);return X?q.a.createElement(Y.a,{title:X,placement:"topLeft",delayMs:0},q.a.createElement("span",null,q.a.createElement(B,{isRestricted:!0,restrictionReason:X}))):q.a.createElement(B,{isRestricted:!1,restrictionReason:null})}try{G.displayName="RestrictedArea",G.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:G.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(b){}try{I.Organization.displayName="RestrictionScope.Organization",I.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:I.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(b){}try{I.Project.displayName="RestrictionScope.Project",I.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:I.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(b){}},"./frontend/src/scenes/actions/EventName.tsx":function(Oe,T,e){"use strict";e.d(T,"a",function(){return ee}),e.d(T,"b",function(){return re});var k=e("./node_modules/react/index.js"),ie=e.n(k),ce=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),de=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),q=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function ee(Y){var ue=Y.value,me=Y.onChange;return ie.a.createElement(de.d,{groupType:q.a.Events,onChange:me,value:ue,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(G){return ie.a.createElement(ce.a,{value:G,disablePopover:!0})},allowClear:!0})}function re(Y){var ue=Y.value,me=Y.onChange;return ie.a.createElement(de.b,{groupType:q.a.Events,onChange:me,value:ue,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(G){return ie.a.createElement(ce.a,{value:G,disablePopover:!0})},allowClear:!0})}try{ee.displayName="EventName",ee.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:ee.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(Y){}try{re.displayName="LemonEventName",re.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:re.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(Y){}},"./frontend/src/scenes/events/EventDetails.tsx":function(Oe,T,e){"use strict";e.d(T,"a",function(){return se});var k=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ie=e.n(k),ce=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),de=e.n(ce),q=e("./node_modules/core-js/modules/es.object.keys.js"),ee=e("./node_modules/core-js/modules/es.symbol.js"),re=e("./node_modules/core-js/modules/es.array.filter.js"),Y=e("./node_modules/core-js/modules/es.object.to-string.js"),ue=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),me=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),I=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),G=e("./node_modules/react/index.js"),b=e.n(G),B=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),he=e("./frontend/src/lib/components/PropertiesTable.tsx"),te=e("./frontend/src/scenes/events/EventElements.tsx"),ve=e("./node_modules/antd/es/tabs/index.js"),be=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(be),N=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),_e=e("./frontend/src/lib/utils.tsx"),X=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function W(_,i){var O=Object.keys(_);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(_);i&&(g=g.filter(function(F){return Object.getOwnPropertyDescriptor(_,F).enumerable})),O.push.apply(O,g)}return O}function ge(_){for(var i=1;i<arguments.length;i++){var O=arguments[i]!=null?arguments[i]:{};i%2?W(Object(O),!0).forEach(function(g){ie()(_,g,O[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(O)):W(Object(O)).forEach(function(g){Object.defineProperty(_,g,Object.getOwnPropertyDescriptor(O,g))})}return _}function oe(_){var i=_.event,O=i.event,g=i.id,F=i.uuid,H=i.distinct_id,Ae=i.properties,p=i.elements,D=i.timestamp,y=i.person,A=t()(i,X),V=ge(ge(ge(ge({},g?{id:g}:null),F?{uuid:F}:null),{},{timestamp:D,event:O,distinct_id:H,properties:Object(_e.yb)(Ae)},p&&p.length>0?{elements:p}:null),A);return b.a.createElement(N.a,{language:N.b.JSON},JSON.stringify(V,null,4))}try{oe.displayName="EventJSON",oe.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:oe.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(_){}var Fe=e("./frontend/src/lib/dayjs.ts"),K=e("./frontend/src/lib/components/LemonButton/index.ts");function Q(_,i){var O=Object.keys(_);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(_);i&&(g=g.filter(function(F){return Object.getOwnPropertyDescriptor(_,F).enumerable})),O.push.apply(O,g)}return O}function M(_){for(var i=1;i<arguments.length;i++){var O=arguments[i]!=null?arguments[i]:{};i%2?Q(Object(O),!0).forEach(function(g){ie()(_,g,O[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(O)):Q(Object(O)).forEach(function(g){Object.defineProperty(_,g,Object.getOwnPropertyDescriptor(O,g))})}return _}var Ce=ve.a.TabPane;function se(_){for(var i=_.event,O=Object(G.useState)(!1),g=de()(O,2),F=g[0],H=g[1],Ae={},p={},D=0,y=0,A=Object.keys(i.properties);y<A.length;y++){var V=A[y];B.e.event[V]&&B.e.event[V].hide&&(D+=1,F&&(p[V]=i.properties[V])),(!B.e.event[V]||!B.e.event[V].hide)&&(Ae[V]=i.properties[V])}return b.a.createElement(ve.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},b.a.createElement(Ce,{tab:"Properties",key:"properties"},b.a.createElement(he.a,{properties:M(M({$timestamp:Object(Fe.a)(i.timestamp).toISOString()},Ae),p),useDetectedPropertyType:!0}),D>0&&b.a.createElement(K.a,{className:"mb-05",onClick:function(){return H(!F)},size:"small"},F?"Hide":"Show"," ",Object(_e.qb)(D,"hidden property","hidden properties"))),b.a.createElement(Ce,{tab:"JSON",key:"json"},b.a.createElement(oe,{event:i})),i.elements&&i.elements.length>0&&b.a.createElement(Ce,{tab:"Elements",key:"elements"},b.a.createElement(te.a,{event:i})))}try{se.displayName="EventDetails",se.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:se.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(_){}},"./frontend/src/scenes/events/EventElements.tsx":function(Oe,T,e){"use strict";e.d(T,"a",function(){return ge});var k=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ie=e.n(k),ce=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),de=e.n(ce),q=e("./node_modules/core-js/modules/es.array.join.js"),ee=e.n(q),re=e("./node_modules/core-js/modules/es.array.fill.js"),Y=e.n(re),ue=e("./node_modules/core-js/modules/es.array.slice.js"),me=e.n(ue),I=e("./node_modules/core-js/modules/es.array.map.js"),G=e.n(I),b=e("./node_modules/core-js/modules/es.object.entries.js"),B=e.n(b),he=e("./node_modules/core-js/modules/es.array.concat.js"),te=e.n(he),ve=e("./node_modules/core-js/modules/es.regexp.exec.js"),be=e.n(ve),t=e("./node_modules/core-js/modules/es.string.replace.js"),N=e.n(t),_e=e("./node_modules/react/index.js"),X=e.n(_e);function W(oe){return Array(oe).fill("    ").join("")}function ge(oe){var Fe=oe.event,K=de()(Fe.elements||[]).reverse();return K=K.slice(Math.max(K.length-10,1)),X.a.createElement("div",null,K.map(function(Q,M){return X.a.createElement("pre",{className:"code",key:M,style:{margin:0,padding:0,borderRadius:0,backgroundColor:M===K.length-1?"var(--primary)":void 0}},W(M),"<",Q.tag_name,Q.attr_id&&' id="'.concat(Q.attr_id,'"'),Object.entries(Q.attributes).map(function(Ce){var se=ie()(Ce,2),_=se[0],i=se[1];return X.a.createElement("span",{key:_}," ".concat(_.replace("attr__",""),'="').concat(i,'"'))}),">",Q.text,M===K.length-1&&X.a.createElement("span",null,"</",Q.tag_name,">"))}),de()(K).reverse().slice(1).map(function(Q,M){return X.a.createElement("pre",{className:"code",key:M,style:{margin:0,padding:0,borderRadius:0}},W(K.length-M-2),"</",Q.tag_name,">")}))}try{ge.displayName="EventElements",ge.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:ge.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(oe){}},"./frontend/src/scenes/events/EventsTable.tsx":function(Oe,T,e){"use strict";e.d(T,"a",function(){return lt});var k=e("./node_modules/core-js/modules/es.symbol.js"),ie=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ce=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),de=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),q=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ee=e.n(q),re=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Y=e.n(re),ue=e("./node_modules/core-js/modules/es.array.splice.js"),me=e("./node_modules/core-js/modules/es.array.filter.js"),I=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e("./node_modules/core-js/modules/es.array.map.js"),b=e("./node_modules/core-js/modules/es.array.find.js"),B=e("./node_modules/core-js/modules/es.array.concat.js"),he=e("./node_modules/core-js/modules/es.array.join.js"),te=e("./node_modules/core-js/modules/es.object.keys.js"),ve=e("./node_modules/core-js/modules/es.regexp.to-string.js"),be=e("./node_modules/react/index.js"),t=e.n(be),N=e("./node_modules/kea/lib/index.esm.js"),_e=e("./frontend/src/scenes/events/EventDetails.tsx"),X=e("./frontend/src/lib/components/Link.tsx"),W=e("./node_modules/antd/es/button/index.js"),ge=e("./node_modules/kea-router/lib/index.js"),oe=e("./node_modules/@babel/runtime/helpers/typeof.js"),Fe=e.n(oe),K=e("./node_modules/core-js/modules/es.regexp.exec.js"),Q=e("./node_modules/core-js/modules/es.string.replace.js");function M(r){var o=r.value;return t.a.createElement("span",{title:o},Fe()(o)==="object"?JSON.stringify(o):o&&o.toString().replace(/(^\w+:|^)\/\//,""))}try{M.displayName="Property",M.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:M.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(r){}var Ce=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function se(r,o){var c=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);o&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),c.push.apply(c,d)}return c}function _(r){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?se(Object(c),!0).forEach(function(d){ee()(r,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):se(Object(c)).forEach(function(d){Object.defineProperty(r,d,Object.getOwnPropertyDescriptor(c,d))})}return r}function i(r){var o=r.property,c=r.value,d=r.filters,x=r.onClick,ne=r.className,z=Object(Ce.c)(d.properties),we=z.find(function(fe){return fe.key===o&&fe.value===c&&!fe.operator})?z.filter(function(fe){return fe.key!==o||fe.value!==c||fe.operator}):[].concat(Y()(z),[{key:o,value:c}]),Ze=Object(ge.combineUrl)(window.location.pathname,_(_({},d),{},{properties:we}),{}),ze=Ze.url;return t.a.createElement(X.a,{to:ze,className:ne,onClick:function(){x&&x(o,c)}},t.a.createElement(M,{value:c}))}try{i.displayName="FilterPropertyLink",i.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:i.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(r){}var O=e("./frontend/src/lib/utils.tsx"),g=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),F=e.n(g),H=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),Ae=e.n(H),p={};p.insert="head",p.singleton=!1;var D=F()(Ae.a,p),y=Ae.a.locals||{},A=e("./frontend/src/scenes/events/eventsTableLogic.ts"),V=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Ue=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),Le=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Te=e("./frontend/src/types.ts"),w=e("./frontend/src/scenes/actions/EventName.tsx"),Ne=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),De=e("./frontend/src/lib/components/Tooltip.tsx"),xe=e("./node_modules/clsx/dist/clsx.m.js"),ae=Object(N.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(o){return{columnConfig:o}}},reducers:function(o){var c=o.props;return{selectedColumns:[c.startingColumns||"DEFAULT",{setSelectedColumns:function(x,ne){var z=ne.columnConfig;return z}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(r){return[r.selectedColumns]},function(r){return r==="DEFAULT"?7:r.length+2}]}}),Se=e("./frontend/src/scenes/urls.ts"),Ve=e("./frontend/src/lib/components/LemonTable/index.ts"),f=e("./frontend/src/lib/components/icons.tsx"),n=e("./frontend/src/lib/components/LemonButton/index.ts"),s=e("./frontend/src/lib/components/LemonButton/More.tsx"),a=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),v=e("./frontend/src/scenes/teamLogic.tsx"),l=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function E(r){Object(be.useEffect)(function(){var o="hidden",c="visibilitychange";typeof document.msHidden!="undefined"?(o="msHidden",c="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(o="webkitHidden",c="webkitvisibilitychange");var d=function(){r(!document[o])};return document.addEventListener(c,d),function(){document.removeEventListener(c,d)}},[])}var u=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),m=e.n(u),Pe=e("./node_modules/core-js/modules/es.array.includes.js"),pe=e("./node_modules/core-js/modules/es.string.includes.js"),Me=e("./node_modules/antd/es/row/index.js"),We=e("./node_modules/antd/es/space/index.js"),Ie=e("./node_modules/antd/es/col/index.js"),Be=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),ye=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Je=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),L=e.n(Je),Xe={};Xe.insert="head",Xe.singleton=!1;var R=F()(L.a,Xe),Ct=L.a.locals||{},ot=e("./node_modules/antd/lib/modal/Modal.js"),_t=e.n(ot),st=e("./node_modules/react-virtualized/dist/es/List/index.js"),gt=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),Qe=e("./node_modules/core-js/modules/es.array.from.js"),nn=e("./node_modules/core-js/modules/es.string.iterator.js"),rn=e("./node_modules/core-js/modules/es.array.iterator.js"),on=e("./node_modules/core-js/modules/es.set.js"),sn=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Mt=Object(N.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[ae],actions:{selectColumn:function(o){return{column:o}},unselectColumn:function(o){return{column:o}},resetColumns:function(o){return{columns:o}},setColumns:function(o){return{columns:o}},toggleSaveAsDefault:!0,save:!0},reducers:function(o){var c=o.props;return{selectedColumns:[c.selectedColumns,{selectColumn:function(x,ne){var z=ne.column;return Array.from(new Set([].concat(Y()(x),[z])))},unselectColumn:function(x,ne){var z=ne.column;return x.filter(function(we){return we!==z})},resetColumns:function(x,ne){var z=ne.columns;return z},setColumns:function(x,ne){var z=ne.columns;return z}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(x){return!x}}]}},listeners:function(o){var c=o.values,d=o.actions;return{save:function(){ae.actions.setSelectedColumns(c.selectedColumns),c.saveAsDefault&&(v.a.actions.updateCurrentTeam({live_events_columns:c.selectedColumns}),d.toggleSaveAsDefault())}}}}),Rt=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Tt=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),It=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),yt=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),Dt=e("./frontend/src/lib/components/RestrictedArea.tsx"),Bt=e("./frontend/src/lib/constants.tsx"),Kt=Object(yt.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(f.SortableDragIcon,null))});function at(r){var o=Object(N.useActions)(ae),c=o.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(n.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:c,icon:t.a.createElement(f.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Ut,{immutableColumns:r.immutableColumns,defaultColumns:r.defaultColumns}))}function Ut(r){var o=r.immutableColumns,c=r.defaultColumns,d=36,x=32,ne=Object(N.useValues)(ae),z=ne.selectedColumns,we=ne.modalVisible,Ze=Object(N.useActions)(ae),ze=Ze.hideModal,fe=Mt({selectedColumns:z==="DEFAULT"?c:z}),Ke=Object(N.useActions)(fe),it=Ke.selectColumn,ct=Ke.unselectColumn,dt=Ke.resetColumns,ut=Ke.setColumns,ke=Ke.toggleSaveAsDefault,qe=Ke.save,et=Object(N.useValues)(fe),Re=et.selectedColumns;function jt(le){var Z=le.isRestricted;return t.a.createElement(It.a,{label:"Save as default for all project members",className:"save-as-default-button mt","data-attr":"events-table-save-columns-as-default-toggle",onChange:ke,defaultChecked:!1,disabled:Z})}var tt=function(Z){var $=Z.column,je=Z.disabled;return t.a.createElement("div",{className:Object(xe.a)(["column-display-item",{selected:!je,disabled:je}]),style:{height:"".concat(x,"px")}},!je&&t.a.createElement(Kt,null),t.a.createElement(Le.a,{value:$}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(De.a,{title:je?"Reserved":"Remove"},je?t.a.createElement(Be.a,null):t.a.createElement(ye.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return ct($)}}))))},Ot=Object(yt.b)(tt),mt=function(Z){var $=Z.index,je=Z.style,J=Z.key,Ee=o==null?void 0:o.includes(Re[$]);return t.a.createElement("div",{style:je,key:J},Ee&&t.a.createElement(tt,{column:Re[$],disabled:Boolean(Ee)}),!Ee&&t.a.createElement(Ot,{column:Re[$],index:$,collection:"selected-columns"}))},vt=Object(yt.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(gt.a,null,function(le){var Z=le.height,$=le.width;return t.a.createElement(st.b,{height:Z,rowCount:Re.length,rowRenderer:mt,rowHeight:d,width:$})}))}),pt=function(Z){var $=Z.oldIndex,je=Z.newIndex,J=Y()(Re),Ee=J.splice($,1),ht=m()(Ee,1),ft=ht[0];J.splice(je,0,ft),ut(J)};return t.a.createElement(_t.a,{id:"column-configurator-modal",centered:!0,visible:we,title:"Configure columns",onOk:qe,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:ze,footer:t.a.createElement(Me.a,null,t.a.createElement(We.b,{style:{flexGrow:1},align:"start"},t.a.createElement(W.a,{className:"text-blue",onClick:function(){return dt(c)}},"Reset to defaults")),t.a.createElement(We.b,null,t.a.createElement(W.a,{className:"text-blue",type:"text",onClick:ze},"Close"),t.a.createElement(W.a,{type:"primary",onClick:qe},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(Me.a,{gutter:16,className:"lists"},t.a.createElement(Ie.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",Re.length,") - Drag to reorder"),t.a.createElement(vt,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:pt,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(Ie.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(gt.a,null,function(le){var Z=le.height,$=le.width;return t.a.createElement(Rt.a,{height:Z,width:$,taxonomicGroupTypes:[Tt.a.EventProperties],value:void 0,onChange:function(J,Ee){return Ee&&it(String(Ee))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:ee()({},Tt.a.EventProperties,Re)})})))),t.a.createElement(Dt.a,{Component:jt,minimumAccessLevel:Bt.m.Owner,scope:Dt.b.Project})))}try{at.displayName="LemonTableConfig",at.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:at.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(r){}var Nt=e("./frontend/src/lib/utils/eventUsageLogic.ts");function At(r,o){var c=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);o&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),c.push.apply(c,d)}return c}function Lt(r){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?At(Object(c),!0).forEach(function(d){ee()(r,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):At(Object(c)).forEach(function(d){Object.defineProperty(r,d,Object.getOwnPropertyDescriptor(c,d))})}return r}function lt(r){var o,c=r.pageKey,d=r.fixedFilters,x=r.fixedColumns,ne=r.sceneUrl,z=r.fetchMonths,we=z===void 0?12:z,Ze=r.startingColumns,ze=r.showCustomizeColumns,fe=ze===void 0?!0:ze,Ke=r.showExport,it=Ke===void 0?!0:Ke,ct=r.showAutoload,dt=ct===void 0?!0:ct,ut=r.showEventFilter,ke=ut===void 0?!0:ut,qe=r.showPropertyFilter,et=qe===void 0?!0:qe,Re=r.showRowExpanders,jt=Re===void 0?!0:Re,tt=r.showActionsButton,Ot=tt===void 0?!0:tt,mt=r.showPersonColumn,vt=mt===void 0?!0:mt,pt=r.linkPropertiesToFilters,le=pt===void 0?!0:pt,Z=Object(N.useValues)(v.a),$=Z.currentTeam,je=Object(A.a)({fixedFilters:d,key:c,sceneUrl:ne||Se.a.events(),fetchMonths:we}),J=Object(N.useValues)(je),Ee=J.properties,ht=J.eventsFormatted,ft=J.isLoading,Wt=J.hasNext,xt=J.isLoadingNext,Et=J.eventFilter,Ft=J.automaticLoadEnabled,Vt=J.exportUrl,wt=J.highlightEvents,zt=J.months,St=Object(N.useValues)(ae({startingColumns:(o=$&&$.live_events_columns)!==null&&o!==void 0?o:Ze})),nt=St.tableWidth,Ge=St.selectedColumns,$e=Object(N.useActions)(je),$t=$e.fetchNextEvents,Yt=$e.prependNewEvents,Ht=$e.setEventFilter,Jt=$e.toggleAutomaticLoad,Gt=$e.startDownload,Xt=$e.setPollingActive,Qt=$e.setProperties,Zt=!(d!=null&&d.person_id),kt=Object(N.useActions)(Nt.f),qt=kt.reportEventsTablePollingReactedToPageVisibility;E(function(S){Xt(S),qt(S)});var Pt=function(j,h){var U=j.date_break,P=j.new_events;return{children:U||(P?t.a.createElement(n.a,{icon:t.a.createElement(f.IconSync,null),style:{borderRadius:0},onClick:function(){return Yt()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:h+1,style:P?{padding:0}:void 0}}},en={title:"Person",key:"person",render:function(j,h){var U,P,C=h.event;return C?Zt&&(U=C.person)!==null&&U!==void 0&&(P=U.distinct_ids)!==null&&P!==void 0&&P.length?t.a.createElement(X.a,{to:Se.a.person(C.person.distinct_ids[0])},t.a.createElement(V.a,{noLink:!0,withIcon:!0,person:C.person})):t.a.createElement(V.a,{withIcon:!0,person:C.person}):{props:{colSpan:0}}}},bt=Object(be.useMemo)(function(){var S=[{title:"Event",key:"event",width:"16rem",render:function(h,U){if(!U.event)return Pt(U,nt);var P=U.event;return t.a.createElement(Le.a,{value:Object(O.f)(P)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(h,U){var P=U.event;if(!P)return{props:{colSpan:0}};var C=P.properties.$current_url?"$current_url":"$screen_name";return le?t.a.createElement(i,{className:"ph-no-capture",property:C,value:P.properties[C],filters:{properties:Ee}}):t.a.createElement(M,{value:P.properties[C]})}},{title:t.a.createElement(De.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(h,U){var P=U.event;return P?le?t.a.createElement(i,{property:"$lib",value:P.properties.$lib,filters:{properties:Ee}}):t.a.createElement(M,{value:P.properties.$lib}):{props:{colSpan:0}}}}];return vt&&S.splice(1,0,en),S},[nt]),tn=Object(be.useMemo)(function(){var S=[];if(Ge==="DEFAULT")S=Y()(bt);else{var j=vt?Ge:Ge.filter(function(h){return h!=="person"});S=j.map(function(h,U){var P=bt.find(function(C){return C.key===h});return P?Lt(Lt({},P),{},{render:function(Ye,He){var rt=He.event;return rt?P.render?P.render(Ye,He,U):{props:{colSpan:0}}:U===0?Pt(He,nt):{props:{colSpan:0}}}}):{title:Le.e.event[h]?Le.e.event[h].label:h,key:h,render:function(Ye,He){var rt=He.event;return rt?le?t.a.createElement(i,{className:"ph-no-capture ",property:h,value:rt.properties[h],filters:{properties:Ee}}):t.a.createElement(M,{value:rt.properties[h]}):U===0?Pt(He,nt):{props:{colSpan:0}}}}})}return S.push({title:"Time",key:"time",render:function(U,P){var C=P.event;return C?t.a.createElement(Ue.b,{time:C.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),Ot&&S.push({key:"actions",width:0,render:function(U,P){var C=P.event;if(!C)return{props:{colSpan:0}};var Ye;return C.event==="$pageview"?Ye={insight:Te.z.TRENDS,interval:"day",display:Te.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:C.properties.$current_url,type:"event"}]}]}:C.event!=="$autocapture"&&(Ye={insight:Te.z.TRENDS,interval:"day",display:Te.j.ActionsLineGraph,actions:[],events:[{id:C.event,name:C.event,type:"events",order:0,properties:[]}]}),t.a.createElement(s.a,{overlay:t.a.createElement(t.a.Fragment,null,$&&t.a.createElement(n.a,{type:"stealth",onClick:function(){return Object(l.a)($.id,C,0,$.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),Ye&&t.a.createElement(n.a,{type:"stealth",to:Se.a.insightNew(Ye),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),x?S.concat(x):S},[Ge,nt]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(ke||et)&&t.a.createElement("div",{className:"flex pt pb space-x border-top"},ke&&t.a.createElement(w.b,{value:Et,onChange:function(j){Ht(j||"")}}),et&&t.a.createElement(Ne.a,{propertyFilters:Ee,onChange:Qt,pageKey:c,style:{marginBottom:0,marginTop:0},eventNames:Et?[Et]:[],useLemonButton:!0})),dt||fe||it?t.a.createElement("div",{className:Object(xe.a)("space-between-items pt pb",(ke||et)&&"border-top")},dt&&t.a.createElement(a.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:Ft,onChange:Jt}),t.a.createElement("div",{className:"flex space-x-05"},fe&&t.a.createElement(at,{immutableColumns:["event","person"],defaultColumns:bt.map(function(S){return S.key||""})}),it&&Vt&&t.a.createElement(De.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(n.a,{type:"secondary",icon:t.a.createElement(f.IconExport,{style:{color:"var(--primary)"}}),onClick:Gt},"Export")))):null,t.a.createElement(Ve.a,{dataSource:ht,loading:ft,columns:tn,key:Ge==="DEFAULT"?"default":Ge.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:ft?void 0:Ee.some(function(S){return Object.keys(S).length})||Et?"No events matching filters found in the last ".concat(zt," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(X.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(j){var h;return j.event?j.event.id+"-"+j.event.event:((h=j.date_break)===null||h===void 0?void 0:h.toString())||""},rowClassName:function(j){return Object(xe.a)({"event-row":j.event,highlighted:j.event&&wt[j.event.id],"event-row-is-exception":j.event&&j.event.event==="$exception","event-row-date-separator":j.date_break,"event-row-new":j.new_events})},expandable:jt?{expandedRowRender:function(j){var h=j.event;return h&&t.a.createElement(_e.a,{event:h})},rowExpandable:function(j){var h=j.event,U=j.date_break,P=j.new_events;return U||P?-1:!!h}}:void 0}),t.a.createElement(W.a,{type:"primary",onClick:$t,loading:xt,style:{display:Wt||xt?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{lt.displayName="EventsTable",lt.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:lt.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(r){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(Oe,T,e){"use strict";e.d(T,"a",function(){return Ve});var k=e("./node_modules/core-js/modules/es.object.keys.js"),ie=e.n(k),ce=e("./node_modules/core-js/modules/es.symbol.js"),de=e.n(ce),q=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ee=e.n(q),re=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Y=e.n(re),ue=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),me=e.n(ue),I=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),G=e.n(I),b=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),B=e.n(b),he=e("./node_modules/@babel/runtime/regenerator/index.js"),te=e.n(he),ve=e("./node_modules/core-js/modules/es.array.map.js"),be=e.n(ve),t=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e.n(t),_e=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),X=e.n(_e),W=e("./node_modules/core-js/modules/es.array.splice.js"),ge=e.n(W),oe=e("./node_modules/core-js/modules/es.array.join.js"),Fe=e.n(oe),K=e("./node_modules/core-js/modules/es.array.filter.js"),Q=e.n(K),M=e("./node_modules/core-js/modules/es.array.concat.js"),Ce=e.n(M),se=e("./node_modules/core-js/modules/es.array.iterator.js"),_=e.n(se),i=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),O=e.n(i),g=e("./node_modules/kea/lib/index.esm.js"),F=e("./frontend/src/lib/utils.tsx"),H=e("./node_modules/kea-router/lib/index.js"),Ae=e.n(H),p=e("./frontend/src/lib/api.ts"),D=e("./frontend/src/scenes/teamLogic.tsx"),y=e("./frontend/src/lib/dayjs.ts"),A=e("./frontend/src/lib/components/lemonToast.tsx"),V=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Ue=e("./frontend/src/lib/components/ExportButton/exporterLogic.ts"),Le=e("./frontend/src/lib/constants.tsx");function Te(f,n){var s=Object.keys(f);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(f);n&&(a=a.filter(function(v){return Object.getOwnPropertyDescriptor(f,v).enumerable})),s.push.apply(s,a)}return s}function w(f){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Te(Object(s),!0).forEach(function(a){G()(f,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(s)):Te(Object(s)).forEach(function(a){Object.defineProperty(f,a,Object.getOwnPropertyDescriptor(s,a))})}return f}var Ne=5,De=365,xe=5e3,ae=function(n,s){var a=[];return a=n.map(function(v){return{event:v}}),a.forEach(function(v,l){var E=a[l-1];l>0&&v.event&&E.event&&!Object(y.a)(v.event.timestamp).isSame(E.event.timestamp,"day")&&a.splice(l,0,{date_break:Object(y.a)(v.event.timestamp).format("LL")})}),s.length>0&&a.splice(0,0,{new_events:!0}),a},Se=function(n){return Object(y.b)().subtract(n,"day").toISOString()},Ve=Object(g.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(s){return!!s}).join("-")},connect:{values:[D.a,["currentTeamId"],V.a,["featureFlags"]],actions:[Ue.b,["exportItem"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:function(n){var s,a,v=n.props;return{pollingIsActive:[!0,{setPollingActive:function(E,u){var m=u.pollingActive;return m},pollEventsSuccess:function(E,u){var m=u.events;return m&&m.length?!1:E},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(E,u){var m=u.properties;return Object(F.s)(m)}}],eventFilter:[(s=(a=v.fixedFilters)===null||a===void 0?void 0:a.event_filter)!==null&&s!==void 0?s:"",{setEventFilter:function(E,u){var m=u.event;return m}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(E,u){var m=u.events,Pe=u.isNext;return Pe?[].concat(B()(E),B()(m)):m},prependEvents:function(E,u){var m=u.events;return[].concat(B()(m),B()(E))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(E,u){var m=u.hasNext;return m}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(E,u){var m=u.selectedEvent;return m}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(E,u){var m=u.events;return m||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(E,u){var m=u.events;return m.reduce(function(Pe,pe){return Pe[pe.id]=!0,Pe},{})}}],pollTimeout:[0,{setPollTimeout:function(E,u){return u.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(E,u){var m=u.automaticLoadEnabled;return m}}]}},selectors:function(n){var s=n.selectors,a=n.props;return{eventsFormatted:[function(){return[s.events,s.newEvents]},function(v,l){return ae(v,l)}],exportParams:[function(){return[s.eventFilter,s.orderBy,s.properties,s.minimumQueryDate]},function(v,l,E,u){var m;return w(w(w({},a.fixedFilters||{}),{},{properties:[].concat(B()(E),B()(((m=a.fixedFilters)===null||m===void 0?void 0:m.properties)||[]))},v?{event:v}:{}),{},{orderBy:[l],after:u})}],exportUrl:[function(){return[s.currentTeamId,s.exportParams]},function(v,l){return"/api/projects/".concat(v,"/events.csv?").concat(Object(F.Bb)(l))}],months:[function(){return[function(v,l){return l.fetchMonths}]},function(v){return v||12}],minimumQueryDate:[function(){return[s.months]},function(v){return Object(y.b)().subtract(v,"months").toISOString()}],pollAfter:[function(){return[s.events]},function(v){return(v==null?void 0:v.length)>0&&v[0].timestamp?v[0].timestamp:Se(0)}]}},actionToUrl:function(n){var s=n.values;return{setProperties:function(){return[H.router.values.location.pathname,w(w({},H.router.values.searchParams),{},{properties:s.properties.length===0?void 0:s.properties}),H.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[H.router.values.location.pathname,w(w({},H.router.values.searchParams),{},{eventFilter:s.eventFilter}),H.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var s=n.actions,a=n.values,v=n.props;return G()({},v.sceneUrl,function(l,E){s.setProperties(E.properties||a.properties||{}),E.eventFilter&&s.setEventFilter(E.eventFilter)})},events:function(n){var s=n.values;return{beforeUnmount:function(){return clearTimeout(s.pollTimeout||void 0)}}},listeners:function(n){var s=n.actions,a=n.values,v=n.props;return{startDownload:function(){a.featureFlags[Le.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS]?s.exportItem(Ue.a.CSV,a.exportParams):(A.d.success("The export is starting. It should finish soon"),window.location.href=a.exportUrl)},setProperties:function(){return s.fetchEvents()},setEventFilter:function(){return s.fetchEvents()},fetchNextEvents:function(){var l=me()(te.a.mark(function u(){var m;return te.a.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:m=a.events,m.length===0?s.fetchEvents():s.fetchEvents({before:m[m.length-1].timestamp});case 2:case"end":return pe.stop()}},u)}));function E(){return l.apply(this,arguments)}return E}(),fetchEvents:function(){var l=me()(te.a.mark(function u(m,Pe){var pe,Me,We,Ie,Be,ye,Je,L;return te.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(Be=function(){return Be=me()(te.a.mark(function ot(_t){var st;return te.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return st=w(w(w(w({after:_t},v.fixedFilters||{}),{},{properties:We},Me||{}),a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy]}),Qe.abrupt("return",p.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(Object(F.Bb)(st))));case 2:case"end":return Qe.stop()}},ot)})),Be.apply(this,arguments)},Ie=function(ot){return Be.apply(this,arguments)},Me=m.nextParams,clearTimeout(a.pollTimeout),!(a.events.length>0)){R.next=9;break}return R.next=7,Pe(300);case 7:R.next=11;break;case 9:return R.next=11,Pe(1);case 11:return We=[].concat(B()(a.properties),B()(((pe=v.fixedFilters)===null||pe===void 0?void 0:pe.properties)||[])),ye=null,Je=!1,R.prev=14,R.next=17,Ie(Se(Ne));case 17:if(ye=R.sent,ye.results.length!==0){R.next=23;break}return R.next=21,Ie(Se(De));case 21:ye=R.sent,Je=!0;case 23:R.next=29;break;case 25:return R.prev=25,R.t0=R.catch(14),s.fetchOrPollFailure(R.t0),R.abrupt("return");case 29:Pe(),s.fetchEventsSuccess({events:ye.results,hasNext:!!ye.next||!Je,isNext:!!Me}),L=window.setTimeout(s.pollEvents,xe),s.setPollTimeout(L);case 33:case"end":return R.stop()}},u,null,[[14,25]])}));function E(u,m){return l.apply(this,arguments)}return E}(),pollEvents:function(){var l=me()(te.a.mark(function u(m,Pe){var pe,Me,We,Ie,Be,ye;return te.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(Me=function(){var R=window.setTimeout(s.pollEvents,xe);s.setPollTimeout(R)},a.orderBy==="-timestamp"){L.next=3;break}return L.abrupt("return");case 3:if(v.sceneUrl===H.router.values.location.pathname){L.next=5;break}return L.abrupt("return");case 5:if(a.pollingIsActive){L.next=8;break}return Me(),L.abrupt("return");case 8:return We=[].concat(B()(a.properties),B()(((pe=v.fixedFilters)===null||pe===void 0?void 0:pe.properties)||[])),Ie=w(w(w({},v.fixedFilters||{}),{},{properties:We},a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy],after:a.pollAfter}),Be=Object(F.Bb)(Ie),ye=null,L.prev=12,L.next=15,p.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(Be));case 15:ye=L.sent,L.next=21;break;case 18:return L.prev=18,L.t0=L.catch(12),L.abrupt("return");case 21:Pe(),a.automaticLoadEnabled?s.prependEvents(ye.results):s.pollEventsSuccess(ye.results),Me();case 24:case"end":return L.stop()}},u,null,[[12,18]])}));function E(u,m){return l.apply(this,arguments)}return E}(),prependNewEvents:function(){a.newEvents.length&&s.prependEvents(a.newEvents)},fetchOrPollFailure:function(E){var u=E.error;A.d.error("There was a problem fetching your events: ".concat(u.statusText))},toggleAutomaticLoad:function(E){var u=E.automaticLoadEnabled;u&&s.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(Oe,T,e){var k=e("./node_modules/css-loader/dist/runtime/api.js");T=k(!1),T.push([Oe.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--text-muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--text-default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal .save-as-default-button{border:1px solid var(--dark-grey);border-radius:.25rem}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--text-default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),Oe.exports=T},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(Oe,T,e){var k=e("./node_modules/css-loader/dist/runtime/api.js");T=k(!1),T.push([Oe.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--depr-lighten-danger-40)}.events td{max-width:20rem}",""]),Oe.exports=T}}]);
