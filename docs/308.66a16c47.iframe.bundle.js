(window.webpackJsonp=window.webpackJsonp||[]).push([[308],{"./frontend/src/scenes/annotations/Annotations.tsx":function(W,c,n){"use strict";n.r(c),n.d(c,"scene",function(){return T}),n.d(c,"Annotations",function(){return E});var i=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),e=n("./frontend/src/scenes/annotations/annotationModalLogic.ts"),M=n("./frontend/src/lib/components/PageHeader.tsx"),r=n("./frontend/src/types.ts"),p=n("./frontend/src/lib/components/LemonTable/index.ts"),_=n("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),l=n("./frontend/src/lib/components/LemonButton/index.ts"),g=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),O=n("./frontend/src/lib/components/icons.tsx"),P=n("./frontend/@posthog/lemon-ui/src/index.ts"),u=n("./frontend/src/scenes/urls.ts"),x=n("./frontend/src/lib/components/Tooltip.tsx"),D=n("./frontend/src/scenes/teamLogic.tsx"),L=n("./frontend/src/scenes/organizationLogic.tsx"),h=n("./frontend/src/scenes/annotations/AnnotationModal.tsx"),f=n("./frontend/src/lib/utils.tsx"),t=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),N=n.n(t);const T={component:E,logic:e.b};function E(){const{currentTeam:d}=Object(i.useValues)(D.a),{currentOrganization:m}=Object(i.useValues)(L.a),{annotations:b,annotationsLoading:A,next:v,loadingNext:C,timezone:I}=Object(i.useValues)(e.b),{loadAnnotationsNext:R,openModalToCreateAnnotation:B,openModalToEditAnnotation:K}=Object(i.useActions)(e.b),U=[{title:"Annotation",key:"annotation",width:"30%",render:function(a,o){return Object(t.jsx)("div",{className:"ph-no-capture",children:o.content})}},{title:`Date\xA0and\xA0time (${Object(f.Cb)(I)})`,dataIndex:"date_marker",render:function(a,o){return o.date_marker.format(e.a)},sorter:(s,a)=>s.date_marker.diff(a.date_marker)},{title:"Scope",key:"scope",render:function(a,o){const j=e.d[o.scope],y=o.scope===r.d.Insight?`This annotation only applies to the "${o.insight_name}" insight`:o.scope===r.d.Project?`This annotation applies to all insights in the ${d==null?void 0:d.name} project`:`This annotation applies to all insights in the ${m==null?void 0:m.name} organization`;return Object(t.jsx)(x.a,{title:y,placement:"right",children:Object(t.jsx)(g.a,{className:"uppercase",children:o.scope===r.d.Insight?Object(t.jsxs)(P.Link,{to:u.a.insightView(o.insight_short_id),className:"flex items-center",target:"_blank",children:[j,Object(t.jsx)(O.IconOpenInNew,{className:"ml-1"})]}):j})})},sorter:(s,a)=>e.c[s.scope]-e.c[a.scope]},Object(_.b)(),Object(_.a)(),{key:"actions",width:0,render:function(a,o){return Object(t.jsx)(l.a,{icon:Object(t.jsx)(O.IconEdit,{}),size:"small",type:"tertiary",status:"stealth",onClick:()=>K(o)})}}];return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(M.a,{title:"Annotations",caption:Object(t.jsxs)(t.Fragment,{children:["Annotations add time-specific context to insights and dashboards.",Object(t.jsx)("br",{}),"Manage all of this project's annotations from this page."]}),buttons:Object(t.jsx)(l.a,{type:"primary","data-attr":"create-annotation",onClick:()=>B(),children:"New annotation"})}),Object(t.jsx)(p.a,{"data-attr":"annotations-table",rowKey:"id",dataSource:b,columns:U,defaultSorting:{columnKey:"date_marker",order:-1},noSortingCancellation:!0,loading:A,emptyState:"No annotations yet"}),v&&Object(t.jsx)("div",{className:"flex justify-center mt-6",children:Object(t.jsx)(l.a,{type:"primary",loading:C,onClick:()=>{R()},children:"Load more annotations"})}),Object(t.jsx)(h.a,{})]})}}}]);
