(window.webpackJsonp=window.webpackJsonp||[]).push([[315],{"./frontend/src/scenes/performance/WebPerformance.tsx":function(A,c,n){"use strict";n.r(c),n.d(c,"webPerformancePropertyFilters",function(){return v}),n.d(c,"WebPerformance",function(){return O}),n.d(c,"scene",function(){return M});var C=n("./frontend/src/scenes/performance/WebPerformance.scss"),E=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),_=n("./frontend/src/lib/components/PageHeader.tsx"),d=n("./frontend/src/types.ts"),a=n("./frontend/src/scenes/performance/webPerformanceLogic.tsx"),m=n("./frontend/src/scenes/urls.ts"),l=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),b=n("./frontend/src/scenes/performance/WebPerformanceWaterfallChart.tsx"),g=n("./frontend/src/lib/components/icons.tsx"),i=n("./frontend/@posthog/lemon-ui/src/index.ts"),x=n("./frontend/src/lib/logic/featureFlagLogic.ts"),h=n("./frontend/src/lib/constants.tsx"),p=n("./frontend/src/queries/Query/Query.tsx"),u=n("./frontend/src/queries/schema.ts"),f=n("./frontend/src/lib/utils.tsx"),L=n("./frontend/src/lib/components/TZLabel/index.tsx"),e=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),B=n.n(e);const v=[{key:"$performance_raw",value:"is_set",operator:d.P.IsSet,type:d.N.Event}];function j(o){return Object(e.jsx)("div",{children:Object(e.jsx)(i.LemonButton,{"data-attr":`view-waterfall-button-${o.record.pageview_id}`,icon:Object(e.jsx)(g.IconPlay,{}),type:"secondary",size:"small",to:m.a.webPerformanceWaterfall(o.record),children:"View waterfall chart"})})}const D=()=>{const{recentPageViews:o,recentPageViewsLoading:P}=Object(l.useValues)(a.b),{featureFlags:T}=Object(l.useValues)(x.a),W=T[h.i.DATA_EXPLORATION_LIVE_EVENTS],R=[{title:"Page",key:"page_url",width:"45%",render:function(r,t){return Object(e.jsx)("div",{className:"max-w-100 overflow-auto",children:t.page_url})}},{title:"Page load",key:"duration",render:function(r,t){return t.duration?Object(e.jsx)(e.Fragment,{children:Object(f.P)(t.duration/1e3)}):Object(e.jsx)(e.Fragment,{children:"-"})}},{title:"timestamp",key:"timestamp",render:function(r,t){return Object(e.jsx)(L.a,{time:t.timestamp})}},{title:"",render:function(r,t){return Object(e.jsx)(j,{record:t,onClick:()=>console.log(t)})}}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"pt-4 border-t"}),W?Object(e.jsx)(p.a,{query:{kind:u.a.DataTableNode,source:{kind:u.a.RecentPerformancePageViewNode},columns:["context.columns.page_url","context.columns.duration","timestamp","context.columns.waterfallButton"],showReload:!0,showColumnConfigurator:!1,showExport:!1,showEventFilter:!1,showPropertyFilter:!1,showActions:!1,expandable:!1},context:{columns:{page_url:{title:"Page",render:function(r){let{record:t}=r;return t.page_url?Object(e.jsx)("div",{className:"max-w-100 overflow-auto",children:t.page_url}):Object(e.jsx)(e.Fragment,{children:"-"})}},duration:{title:"Page load",render:function(r){let{record:t}=r;return t.duration?Object(e.jsx)(e.Fragment,{children:Object(f.P)(t.duration/1e3)}):Object(e.jsx)(e.Fragment,{children:"-"})}},waterfallButton:{title:"",render:function(r){let{record:t}=r;return Object(e.jsx)(j,{record:t,onClick:()=>console.log(t)})}}}}}):Object(e.jsx)(i.LemonTable,{"data-attr":"web-performance-table",dataSource:o,loading:P,columns:R,loadingSkeletonRows:20,emptyState:P?void 0:Object(e.jsx)(e.Fragment,{children:"need an empty state that makes sense"}),rowKey:s=>s.pageview_id})]})},O=()=>{const{currentPage:o}=Object(l.useValues)(a.b);return Object(e.jsxs)("div",{className:"web-performance",children:[Object(e.jsx)(_.a,{title:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:["Web Performance",Object(e.jsx)(E.a,{type:"warning",className:"uppercase",children:"Alpha"})]}),caption:o===a.a.TABLE?Object(e.jsxs)("div",{children:[Object(e.jsx)("p",{children:"Shows page view events where performance information has been captured. Not all events have all performance information."}),Object(e.jsxs)("p",{children:["To capture performance information you must be using posthog-js and set"," ",Object(e.jsx)("code",{children:"_capture_performance"})," to true. See the"," ",Object(e.jsx)(i.Link,{to:"https://posthog.com/docs/integrate/client/js#config",disableClientSideRouting:!0,children:"config instructions in our handbook"})]})]}):null}),Object(e.jsx)("div",{children:o===a.a.TABLE?Object(e.jsx)(D,{}):o===a.a.WATERFALL_CHART?Object(e.jsx)(b.b,{}):Object(e.jsx)(e.Fragment,{children:"404?"})})]})},M={component:O,logic:a.b,paramsToProps:()=>({sceneUrl:m.a.webPerformance()})}}}]);
