(window.webpackJsonp=window.webpackJsonp||[]).push([[291],{"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(I,h,e){"use strict";var x=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),R=e.n(x),C=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),y=e.n(C),E={};E.insert="head",E.singleton=!1;var w=R()(y.a,E),V=y.a.locals||{}},"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(I,h,e){"use strict";e.r(h),e.d(h,"ProjectHomepage",function(){return Z}),e.d(h,"scene",function(){return ue});var x=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),R=e.n(x),C=e("./node_modules/core-js/modules/es.function.name.js"),y=e("./node_modules/core-js/modules/es.object.to-string.js"),E=e("./node_modules/core-js/modules/es.regexp.to-string.js"),w=e("./node_modules/react/index.js"),V=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),T=e("./frontend/src/lib/components/PageHeader.tsx"),U=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),i=e("./node_modules/kea/lib/index.esm.js"),p=e("./frontend/src/scenes/teamLogic.tsx"),M=e("./frontend/src/types.ts"),W=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),A=e("./frontend/src/lib/components/LemonDivider/index.ts"),N=e("./node_modules/core-js/modules/es.array.map.js"),m=e("./node_modules/core-js/modules/es.symbol.js"),$=e("./node_modules/core-js/modules/es.symbol.description.js"),_=e("./frontend/src/models/dashboardsModel.tsx"),P=e("./frontend/src/lib/components/LemonButton/index.ts"),D=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),t=e.n(D),j=e("./node_modules/@babel/runtime/regenerator/index.js"),d=e.n(j),c=e("./frontend/src/lib/utils/eventUsageLogic.ts"),O=Object(i.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[c.e],actions:[p.a,["updateCurrentTeam"]],values:[p.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(n){return{dashboardId:n}}},selectors:{primaryDashboardId:[function(o){return[o.currentTeam]},function(o){return o==null?void 0:o.primary_dashboard}]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(n){var g=n.actions;return{setPrimaryDashboard:function(){var r=t()(d.a.mark(function a(L){var b;return d.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:b=L.dashboardId,g.updateCurrentTeam({primary_dashboard:b}),c.e.actions.reportPrimaryDashboardChanged();case 3:case"end":return v.stop()}},a)}));function l(a){return r.apply(this,arguments)}return l}(),showPrimaryDashboardModal:function(){var r=t()(d.a.mark(function a(){return d.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:c.e.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return b.stop()}},a)}));function l(){return r.apply(this,arguments)}return l}()}}}),f=e("./frontend/src/lib/components/icons.tsx"),K=e("./frontend/src/lib/components/LemonRow/index.ts"),u=e("./frontend/src/lib/components/LemonModal/index.ts"),Y=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),s=e("./node_modules/react/jsx-runtime.js");function ee(){var o=Object(i.useValues)(O),n=o.isOpen,g=o.primaryDashboardId,r=Object(i.useActions)(O),l=r.closePrimaryDashboardModal,a=r.setPrimaryDashboard,L=Object(i.useValues)(_.a),b=L.nameSortedDashboards,B=L.dashboardsLoading;return Object(s.jsx)(u.a,{isOpen:n,onClose:l,title:"Select a default dashboard for the project",footer:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(P.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:l,children:"Close"})}),children:B?Object(s.jsx)("div",{className:"space-y-2",children:Object(s.jsx)(Y.a.Row,{repeat:4})}):Object(s.jsx)("div",{className:"space-y-2",children:b.map(function(v){var H=v.id===g,z=Object(s.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[Object(s.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[Object(s.jsx)("strong",{children:v.name}),Object(s.jsx)("span",{className:"text-default font-normal text-ellipsis",children:v.description})]}),H?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(f.IconCottage,{className:"mr-2 text-warning text-lg"}),Object(s.jsx)("span",{children:"Default"})]}):Object(s.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return H?Object(s.jsx)(K.a,{fullWidth:!0,status:"muted",className:"dashboard-row",children:z},v.id):Object(s.jsx)(P.a,{fullWidth:!0,className:"dashboard-row",onClick:function(){a(v.id),l()},children:z},v.id)})})})}var G=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),ve=e("./node_modules/core-js/modules/es.array.slice.js"),J=e("./frontend/src/lib/dayjs.ts"),Q=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),X=e("./frontend/src/lib/components/ProfilePicture/index.ts"),F=e("./frontend/src/scenes/persons/PersonHeader.tsx"),se=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),S=e("./frontend/src/scenes/urls.ts"),te=e("./frontend/src/lib/utils.tsx"),oe=e("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),ne=e("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts");function re(o){var n=o.recording,g=Object(i.useActions)(ne.a),r=g.openSessionPlayer,l=Object(i.useActions)(c.e),a=l.reportRecordingOpenedFromRecentRecordingList;return Object(s.jsx)(P.a,{fullWidth:!0,onClick:function(){r({id:n.id,matching_events:n.matching_events}),a()},children:Object(s.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(s.jsx)(X.b,{name:Object(F.b)(n.person)}),Object(s.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(s.jsx)("div",{children:Object(F.b)(n.person)}),Object(s.jsxs)("div",{children:["Recorded ",Object(J.a)(n.start_time).fromNow()]})]}),Object(s.jsx)("span",{children:Object(te.O)(n.recording_duration)}),Object(s.jsx)(f.IconPlayCircle,{className:"text-2xl ml-2"})]})})}function ae(){var o=Object(i.useValues)(p.a),n=o.currentTeam,g=Object(se.b)({key:"projectHomepage"}),r=Object(i.useValues)(g),l=r.sessionRecordings,a=r.sessionRecordingsResponseLoading;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(oe.a,{}),Object(s.jsx)(Q.a,{title:"Recent recordings",viewAllURL:S.a.sessionRecordings(),loading:a,emptyMessage:n!=null&&n.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:S.a.projectSettings()+"#recordings"},items:l.slice(0,5),renderRow:function(b,B){return Object(s.jsx)(re,{recording:b},B)}})]})}var ie=e("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function ce(o){var n=o.person,g=Object(i.useActions)(c.e),r=g.reportPersonOpenedFromNewlySeenPersonsList;return Object(s.jsx)(P.a,{fullWidth:!0,to:S.a.person(n.distinct_ids[0]),onClick:function(){r()},children:Object(s.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(s.jsx)(X.b,{name:Object(F.b)(n)}),Object(s.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(s.jsx)("div",{children:Object(F.b)(n)}),Object(s.jsxs)("div",{children:["First seen ",Object(J.a)(n.created_at).fromNow()]})]})]})})}function de(){var o=Object(i.useValues)(G.a),n=o.persons,g=o.personsLoading;return Object(s.jsx)(Q.a,{title:"Newly seen persons",viewAllURL:S.a.persons(),loading:g,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:n.slice(0,5),renderRow:function(l,a){return Object(s.jsx)(ce,{person:l},a)}})}var le=e("./node_modules/@react-hook/size/dist/module/index.js"),me=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),je=e("./frontend/@posthog/lemon-ui/src/index.ts");function Z(){var o=Object(i.useValues)(G.a),n=o.dashboardLogic,g=Object(i.useValues)(p.a),r=g.currentTeam,l=Object(i.useValues)(n),a=l.allItems,L=Object(i.useActions)(W.a),b=L.showInviteModal,B=Object(i.useActions)(O),v=B.showPrimaryDashboardModal,H=Object(w.useRef)(null),z=Object(le.a)(H),k=R()(z,1),q=k[0],he=Object(s.jsxs)("div",{className:"flex",children:[Object(s.jsx)(P.a,{"data-attr":"project-home-invite-team-members",onClick:function(){b()},className:"mr-2",type:"secondary",children:"Invite members"}),Object(s.jsx)(me.NewInsightButton,{dataAttr:"project-home-new-insight"})]});return Object(s.jsxs)("div",{className:"project-homepage",children:[Object(s.jsx)(T.a,{title:(r==null?void 0:r.name)||"",delimited:!0,buttons:he}),Object(s.jsxs)("div",{ref:H,className:q&&q<600?"top-list-container-vertical":"top-list-container-horizontal",children:[Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(ie.b,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(de,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(ae,{})})]}),r!=null&&r.primary_dashboard?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"homepage-dashboard-header",children:[Object(s.jsxs)("div",{className:"dashboard-title-container",children:[!a&&Object(s.jsx)(Y.a,{className:"w-20"}),(a==null?void 0:a.name)&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(f.IconCottage,{className:"mr-2 text-warning text-2xl"}),Object(s.jsx)(je.Link,{className:"font-semibold text-xl text-default",to:S.a.dashboard(a.id),children:a==null?void 0:a.name})]})]}),Object(s.jsx)(P.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:v,children:"Change dashboard"})]}),Object(s.jsx)(A.a,{className:"my-6"}),Object(s.jsx)(U.Dashboard,{id:r.primary_dashboard.toString(),placement:M.l.ProjectHomepage})]}):Object(s.jsxs)("div",{className:"empty-state-container",children:[Object(s.jsx)(f.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),Object(s.jsx)("h1",{children:"There isn\u2019t a default dashboard set for this project"}),Object(s.jsx)("p",{className:"mb-4",children:"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."}),Object(s.jsx)(P.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){v()},children:"Select a default dashboard"})]}),Object(s.jsx)(ee,{})]})}var ue={component:Z,logic:G.a}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(I,h,e){"use strict";e.d(h,"a",function(){return _}),e.d(h,"b",function(){return P});var x=e("./node_modules/core-js/modules/es.function.name.js"),R=e.n(x),C=e("./node_modules/core-js/modules/es.array.slice.js"),y=e.n(C),E=e("./node_modules/react/index.js"),w=e.n(E),V=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),T=e("./node_modules/kea/lib/index.esm.js"),U=e("./frontend/src/lib/dayjs.ts"),i=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),p=e("./frontend/src/lib/components/LemonButton/index.ts"),M=e("./frontend/src/scenes/urls.ts"),W=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),A=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),N=e("./frontend/src/lib/utils/eventUsageLogic.ts"),m=e("./node_modules/react/jsx-runtime.js"),$=e.n(m);function _(D){var t=D.insight,j=Object(T.useActions)(N.e),d=j.reportInsightOpenedFromRecentInsightList;return Object(m.jsx)(p.a,{fullWidth:!0,to:M.a.insightView(t.short_id),onClick:function(){d()},children:Object(m.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(m.jsx)(W.InsightIcon,{insight:t}),Object(m.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(m.jsx)("div",{children:t.name||t.derived_name}),Object(m.jsxs)("div",{children:["Last modified ",Object(U.a)(t.last_modified_at).fromNow()]})]})]})})}function P(){var D=Object(T.useValues)(A.a),t=D.recentInsights,j=D.recentInsightsLoading,d=Object(T.useActions)(A.a),c=d.loadRecentInsights;return Object(E.useEffect)(function(){c()},[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(i.a,{title:"Your recently viewed insights",viewAllURL:M.a.savedInsights(),loading:j,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:M.a.savedInsights()},items:t.slice(0,5),renderRow:function(f,K){return Object(m.jsx)(_,{insight:f},K)}})})}try{_.displayName="InsightRow",_.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:_.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(D){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(I,h,e){"use strict";e.d(h,"a",function(){return D});var x=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),R=e.n(x),C=e("./node_modules/@babel/runtime/regenerator/index.js"),y=e.n(C),E=e("./node_modules/core-js/modules/es.array.iterator.js"),w=e.n(E),V=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e.n(V),U=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),i=e.n(U),p=e("./node_modules/kea/lib/index.esm.js"),M=e("./frontend/src/scenes/teamLogic.tsx"),W=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),A=e("./frontend/src/types.ts"),N=e("./frontend/src/lib/api.ts"),m=e("./node_modules/kea-subscriptions/lib/index.js"),$=e.n(m),_=e("./node_modules/kea-loaders/lib/index.js"),P=e.n(_),D=Object(p.kea)([Object(p.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(p.connect)({values:[M.a,["currentTeamId","currentTeam"]]}),Object(p.selectors)({primaryDashboardId:[function(){return[M.a.selectors.currentTeam]},function(t){return t==null?void 0:t.primary_dashboard}],dashboardLogic:[function(t){return[t.primaryDashboardId]},function(t){return Object(W.c)({id:t!=null?t:void 0,placement:A.l.ProjectHomepage})}]}),Object(_.loaders)(function(t){var j=t.values;return{recentInsights:[[],{loadRecentInsights:function(){var d=R()(y.a.mark(function O(){var f;return y.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,N.b.get("api/projects/".concat(j.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return f=u.sent,u.abrupt("return",f.results);case 4:case"end":return u.stop()}},O)}));function c(){return d.apply(this,arguments)}return c}()}],persons:[[],{loadPersons:function(){var d=R()(y.a.mark(function O(){var f;return y.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,N.b.persons.list();case 2:return f=u.sent,u.abrupt("return",f.results);case 4:case"end":return u.stop()}},O)}));function c(){return d.apply(this,arguments)}return c}()}]}}),Object(m.subscriptions)(function(t){var j=t.cache;return{dashboardLogic:function(c){var O;(O=j.unmount)===null||O===void 0||O.call(j),j.unmount=c?c.mount():null}}}),Object(p.afterMount)(function(t){var j,d=t.cache,c=t.actions;(j=d.unmount)===null||j===void 0||j.call(d),c.loadRecentInsights(),c.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(I,h,e){var x=e("./node_modules/css-loader/dist/runtime/api.js");h=x(!1),h.push([I.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),I.exports=h}}]);
