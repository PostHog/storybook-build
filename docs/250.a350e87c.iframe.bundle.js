(window.webpackJsonp=window.webpackJsonp||[]).push([[250],{"./frontend/src/scenes/dashboard/Dashboards.tsx":function(re,g,e){"use strict";e.r(g),e.d(g,"scene",function(){return ye}),e.d(g,"Dashboards",function(){return ee});var I=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),t=e.n(I),R=e("./node_modules/core-js/modules/es.array.concat.js"),O=e("./node_modules/core-js/modules/es.symbol.js"),Q=e("./node_modules/core-js/modules/es.symbol.description.js"),C=e("./node_modules/core-js/modules/es.function.name.js"),d=e("./node_modules/react/index.js"),a=e.n(d),u=e("./node_modules/kea/lib/index.esm.js"),f=e("./frontend/src/models/dashboardsModel.tsx"),p=e("./node_modules/antd/es/tabs/index.js"),B=e("./node_modules/antd/es/input/index.js"),U=e("./node_modules/antd/es/row/index.js"),D=e("./node_modules/antd/es/col/index.js"),W=e("./node_modules/antd/es/card/index.js"),s=e("./frontend/src/scenes/dashboard/dashboardsLogic.ts"),v=e("./frontend/src/lib/components/Link.tsx"),i=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},P=V,c=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),M=function(h,r){return d.createElement(c.a,Object(i.a)(Object(i.a)({},h),{},{ref:r,icon:P}))};M.displayName="PushpinFilled";var x=d.forwardRef(M),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},F=z,X=function(h,r){return d.createElement(c.a,Object(i.a)(Object(i.a)({},h),{},{ref:r,icon:F}))};X.displayName="PushpinOutlined";var le=d.forwardRef(X),de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},ie=de,Z=function(h,r){return d.createElement(c.a,Object(i.a)(Object(i.a)({},h),{},{ref:r,icon:ie}))};Z.displayName="ShareAltOutlined";var ce=d.forwardRef(Z),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},ue=me,k=function(h,r){return d.createElement(c.a,Object(i.a)(Object(i.a)({},h),{},{ref:r,icon:ue}))};k.displayName="AppstoreAddOutlined";var q=d.forwardRef(k),he=e("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),be=e("./frontend/src/lib/components/PageHeader.tsx"),K=e("./frontend/src/types.ts"),ve=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),fe=e("./frontend/src/scenes/userLogic.ts"),j=e("./frontend/src/lib/utils/eventUsageLogic.ts"),T=e("./frontend/src/scenes/urls.ts"),pe=e("./frontend/src/lib/components/LemonTable/index.ts"),_=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),A=e("./frontend/src/lib/components/LemonButton/index.ts"),Ee=e("./frontend/src/lib/components/LemonButton/More.tsx"),N=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),ge=e("./frontend/src/lib/components/LemonRow/index.ts"),H=e("./frontend/src/lib/components/LemonDivider/index.ts"),G=e("./frontend/src/lib/components/Tooltip.tsx"),w=e("./frontend/src/lib/components/icons.tsx"),Oe=e("./frontend/src/scenes/teamLogic.tsx"),De=e("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),Ae=e("./frontend/src/lib/constants.tsx"),Le=e("./frontend/src/lib/logic/inAppPrompt/inAppPromptLogic.tsx"),ye={component:ee,logic:s.b};function ee(){var L=Object(u.useValues)(f.a),h=L.dashboardsLoading,r=Object(u.useActions)(f.a),Ce=r.deleteDashboard,Pe=r.unpinDashboard,Me=r.pinDashboard,xe=r.duplicateDashboard,ae=Object(u.useActions)(s.b),je=ae.setSearchTerm,J=ae.setCurrentTab,$=Object(u.useValues)(s.b),te=$.dashboards,S=$.searchTerm,E=$.currentTab,ne=Object(u.useActions)(De.a),Te=ne.showNewDashboardModal,se=ne.addDashboard,Ne=Object(u.useValues)(fe.a),oe=Ne.hasAvailableFeature,Se=Object(u.useValues)(Oe.a),Y=Se.currentTeam,Ie=Object(u.useActions)(Le.a),Re=Ie.closePrompts,Be=[{width:0,dataIndex:"pinned",render:function(o,l){var n=l.id;return o?a.a.createElement(x,{onClick:function(){return Pe(n,j.a.DashboardsList)},style:{cursor:"pointer"}}):a.a.createElement(le,{onClick:function(){return Me(n,j.a.DashboardsList)},style:{cursor:"pointer"}})}},{title:"Name",dataIndex:"name",width:"40%",render:function(o,l){var n=l.id,b=l.description,y=l._highlight,Ue=l.is_shared,We=l.effective_privilege_level,Ve=n===(Y==null?void 0:Y.primary_dashboard),ze=We>=Ae.d.CanEdit;return a.a.createElement("div",{className:y?"highlighted":void 0,style:{display:"inline-block"}},a.a.createElement("div",{className:"row-name"},a.a.createElement(v.a,{"data-attr":"dashboard-name",to:T.a.dashboard(n)},o||"Untitled"),!ze&&a.a.createElement(G.a,{title:"You don't have edit permissions for this dashboard."},a.a.createElement(w.IconLock,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})),Ue&&a.a.createElement(G.a,{title:"This dashboard is shared publicly."},a.a.createElement(ce,{style:{marginLeft:6}})),Ve&&a.a.createElement(G.a,{title:"Primary dashboards are shown on the project home page"},a.a.createElement(w.IconCottage,{style:{marginLeft:6,color:"var(--warning)",fontSize:"1rem",verticalAlign:"-0.125em",display:"inline"}}))),oe(K.d.DASHBOARD_COLLABORATION)&&b&&a.a.createElement("span",{className:"row-description"},b))},sorter:function(o,l){var n,b;return((n=o.name)!==null&&n!==void 0?n:"Untitled").localeCompare((b=l.name)!==null&&b!==void 0?b:"Untitled")}}].concat(t()(oe(K.d.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function(o){return o?a.a.createElement(ve.a,{tags:o,staticOnly:!0}):null}}]:[]),[Object(_.b)(),Object(_.a)(),{width:0,render:function(o,l){var n=l.id,b=l.name;return a.a.createElement(Ee.a,{overlay:a.a.createElement("div",{style:{maxWidth:250}},a.a.createElement(A.a,{status:"stealth",to:T.a.dashboard(n),onClick:function(){Object(N.c)({id:n}).mount(),Object(N.c)({id:n}).actions.setDashboardMode(null,j.a.DashboardsList)},fullWidth:!0},"View"),a.a.createElement(A.a,{status:"stealth",to:T.a.dashboard(n),onClick:function(){Object(N.c)({id:n}).mount(),Object(N.c)({id:n}).actions.setDashboardMode(K.l.Edit,j.a.DashboardsList)},fullWidth:!0},"Edit"),a.a.createElement(A.a,{status:"stealth",onClick:function(){return xe({id:n,name:b})},fullWidth:!0},"Duplicate"),a.a.createElement(H.a,null),a.a.createElement(ge.a,{icon:a.a.createElement(w.IconCottage,{className:"text-warning"}),fullWidth:!0,status:"warning"},a.a.createElement("span",{className:"text-muted"},"Change the default dashboard on the"," ",a.a.createElement(v.a,{to:T.a.projectHomepage()},"project home page"),".")),a.a.createElement(H.a,null),a.a.createElement(A.a,{onClick:function(){return Ce({id:n,redirect:!1})},fullWidth:!0,status:"danger"},"Delete dashboard"))})}}]);return a.a.createElement("div",null,a.a.createElement(he.a,null),a.a.createElement(be.a,{title:"Dashboards",buttons:a.a.createElement(A.a,{"data-attr":"new-dashboard",onClick:function(){Re(),Te()},type:"primary"},"New dashboard")}),a.a.createElement(p.a,{activeKey:E,style:{borderColor:"#D9D9D9"},onChange:function(o){return J(o)}},a.a.createElement(p.a.TabPane,{tab:"All Dashboards",key:s.a.All}),a.a.createElement(p.a.TabPane,{tab:"Pinned",key:s.a.Pinned}),a.a.createElement(p.a.TabPane,{tab:"Shared",key:s.a.Shared})),a.a.createElement("div",null,a.a.createElement(B.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for dashboards",style:{width:240},value:S,onChange:function(o){je(o.target.value)}})),a.a.createElement(H.a,{large:!0}),h||te.length>0||S||E!==s.a.All?a.a.createElement(pe.a,{"data-tooltip":"dashboards-table",pagination:{pageSize:100},dataSource:te,rowKey:"id",columns:Be,loading:h,defaultSorting:{columnKey:"name",order:1},emptyState:S?"No ".concat(E===s.a.Pinned?"pinned ":E===s.a.Shared?"shared ":"",'dashboards matching "').concat(S,'"!'):E===s.a.Pinned?a.a.createElement(a.a.Fragment,null,"No dashboards have been pinned for quick access yet."," ",a.a.createElement(v.a,{onClick:function(){return J(s.a.All)}},"Go to All Dashboards to pin one.")):E===s.a.Shared?a.a.createElement(a.a.Fragment,null,"No dashboards have been shared yet."," ",a.a.createElement(v.a,{onClick:function(){return J(s.a.All)}},"Go to All Dashboards to share one.")):void 0,nouns:["dashboard","dashboards"]}):a.a.createElement("div",{className:"mt-4"},a.a.createElement("p",null,"Create your first dashboard:"),a.a.createElement(U.a,{gutter:[16,16]},a.a.createElement(D.a,{xs:24,xl:6},a.a.createElement(W.a,{title:"Empty",size:"small",style:{cursor:"pointer"},onClick:function(){return se({name:"New Dashboard",useTemplate:""})}},a.a.createElement("div",{style:{textAlign:"center",fontSize:40}},a.a.createElement(q,null)))),a.a.createElement(D.a,{xs:24,xl:6},a.a.createElement(W.a,{title:"App Default",size:"small",style:{cursor:"pointer"},onClick:function(){return se({name:"Web App Dashboard",useTemplate:"DEFAULT_APP"})}},a.a.createElement("div",{style:{textAlign:"center",fontSize:40}},a.a.createElement(q,null)))))))}},"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(re,g,e){"use strict";e.d(g,"a",function(){return s});var I=e("./node_modules/react/index.js"),t=e.n(I),R=e("./node_modules/kea/lib/index.esm.js"),O=e("./frontend/src/lib/forms/Field.tsx"),Q=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),C=e("./frontend/src/lib/components/LemonButton/index.ts"),d=e("./frontend/src/types.ts"),a=e("./frontend/src/lib/components/LemonSelect.tsx"),u=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),f=e("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),p=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),B=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),U=e("./frontend/src/scenes/dashboard/DashboardCollaborators.tsx"),D=e("./node_modules/kea-forms/lib/index.js"),W=e.n(D);function s(){var v=Object(R.useActions)(f.a),i=v.hideNewDashboardModal,V=v.createAndGoToDashboard,P=Object(R.useValues)(f.a),c=P.isNewDashboardSubmitting,M=P.newDashboardModalVisible;return t.a.createElement(Q.a,{title:"New dashboard",destroyOnClose:!0,onCancel:i,visible:M,footer:t.a.createElement("div",{className:"flex justify-end space-x-2 w-full"},t.a.createElement(C.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",loading:c,onClick:i},"Cancel"),t.a.createElement(C.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-submit-and-go",loading:c,disabled:c,onClick:V},"Create and go to dashboard"),t.a.createElement(C.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:c,disabled:c},"Create"))},t.a.createElement(D.Form,{logic:f.a,formKey:"newDashboard",id:"new-dashboard-form",enableFormOnSubmit:!0,className:"space-y-2"},t.a.createElement("p",null,"Use dashboards to compose multiple insights into a single view."),t.a.createElement(O.a,{name:"name",label:"Name"},t.a.createElement(p.a,{autoFocus:!0,"data-attr":"dashboard-name-input",className:"ph-ignore-input"})),t.a.createElement(O.a,{name:"description",label:"Description",showOptional:!0},t.a.createElement(B.a,{"data-attr":"dashboard-description-input",className:"ph-ignore-input"})),t.a.createElement(O.a,{name:"useTemplate",label:"Template",showOptional:!0},t.a.createElement(a.a,{placeholder:"Optionally start from template",allowClear:!0,options:{DEFAULT_APP:{label:"Website","data-attr":"dashboard-select-default-app"}},status:"stealth",type:"secondary",fullWidth:!0,"data-attr":"copy-from-template"})),t.a.createElement(O.a,{name:"restrictionLevel",label:"Collaboration settings"},function(x){var z=x.value,F=x.onChange;return t.a.createElement(u.a,{feature:d.d.DASHBOARD_PERMISSIONING},t.a.createElement(a.a,{value:z,onChange:F,options:U.a,loading:c,status:"stealth",type:"secondary",fullWidth:!0}))})))}}}]);
