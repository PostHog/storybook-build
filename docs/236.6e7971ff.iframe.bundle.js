(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(_e,v,e){"use strict";e.r(v),e.d(v,"scene",function(){return ne}),e.d(v,"ActionsTable",function(){return ue});var S=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),N=e.n(S),h=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),t=e.n(h),F=e("./node_modules/core-js/modules/es.array.map.js"),y=e.n(F),z=e("./node_modules/core-js/modules/es.regexp.exec.js"),M=e.n(z),B=e("./node_modules/core-js/modules/es.string.search.js"),k=e.n(B),j=e("./node_modules/core-js/modules/es.array.concat.js"),re=e.n(j),g=e("./node_modules/core-js/modules/es.function.name.js"),T=e.n(g),V=e("./node_modules/core-js/modules/es.array.slice.js"),A=e.n(V),$=e("./node_modules/core-js/modules/es.number.constructor.js"),q=e.n($),R=e("./node_modules/core-js/modules/es.array.filter.js"),ee=e.n(R),Y=e("./node_modules/core-js/modules/es.object.to-string.js"),H=e.n(Y),I=e("./node_modules/react/index.js"),n=e.n(I),u=e("./frontend/src/scenes/actions/Actions.scss"),P=e("./frontend/src/lib/components/Link.tsx"),d=e("./node_modules/antd/es/input/index.js"),i=e("./node_modules/antd/es/radio/index.js"),E=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),o=e("./frontend/src/lib/utils.tsx"),c=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/models/actionsModel.ts"),K=e("./frontend/src/scenes/actions/NewActionButton.tsx"),W=e("./frontend/src/types.ts"),G=e("./node_modules/fuse.js/dist/fuse.esm.js"),C=e("./frontend/src/scenes/userLogic.ts"),J=e("./frontend/src/scenes/teamLogic.tsx"),Q=e("./frontend/src/lib/api.ts"),p=e("./frontend/src/scenes/urls.ts"),X=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),m=e("./frontend/src/lib/components/LemonTable/index.ts"),O=e("./frontend/src/lib/components/LemonButton/index.ts"),f=e("./frontend/src/lib/components/LemonDivider/index.ts"),a=e("./frontend/src/lib/components/LemonButton/More.tsx"),r=e("./node_modules/kea-router/lib/index.js"),s=e.n(r),l=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),U=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),x=e("./frontend/src/lib/components/PageHeader.tsx"),te=function(ae,le){return new G.a(ae,{keys:["name","url"],threshold:.3}).search(le).map(function(ce){return ce.item})},ne={component:ue};function ue(){var Ee=Object(c.useValues)(J.a),ae=Ee.currentTeam,le=Object(c.useValues)(Object(L.a)({params:"include_count=1"})),ce=le.actions,Me=le.actionsLoading,fe=Object(c.useActions)(L.a),ve=fe.loadActions,je=Object(I.useState)(""),me=t()(je,2),de=me[0],ge=me[1],Te=Object(I.useState)(!1),Oe=t()(Te,2),Pe=Oe[0],Ae=Oe[1],De=Object(c.useValues)(C.a),ie=De.user,Ie=De.hasAvailableFeature,Le=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(_,D){return(_.name||"").localeCompare(D.name||"")},render:function(_,D,Z){return n.a.createElement(P.a,{"data-attr":"action-link-"+Z,to:p.a.action(D.id),className:"row-name"},_||n.a.createElement("i",null,"Unnamed action"))}}].concat(N()(Ie(W.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(_){return n.a.createElement(l.a,{tags:_,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(_,D){var Z;return n.a.createElement("span",null,(Z=D.steps)!==null&&Z!==void 0&&Z.length?D.steps.map(function(oe){return n.a.createElement("div",{key:oe.id},function(){var w=Object(o.Ab)(oe.url||"");switch(w=w.slice(0,40)+(w.length>40?"...":""),oe.event){case"$autocapture":return"Autocapture";case"$pageview":switch(oe.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,w));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,w));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,w))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,oe.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(X.b)(),Object(X.a)()],N()(ae!=null&&ae.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(_,D){return Number(_.post_to_slack)-Number(D.post_to_slack)},render:function(_){return _?n.a.createElement(E.a,null):null}}]:[]),[{width:0,render:function(_,D){return n.a.createElement(a.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(O.a,{status:"stealth",to:p.a.action(D.id),fullWidth:!0},"Edit"),n.a.createElement(O.a,{status:"stealth",to:Object(r.combineUrl)(p.a.insightNew({insight:W.B.TRENDS,interval:"day",display:W.j.ActionsLineGraph,actions:[{id:D.id,name:D.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(f.a,null),n.a.createElement(O.a,{status:"danger",onClick:function(){return Object(o.x)({endpoint:Q.b.actions.determineDeleteEndpoint(),object:D,callback:ve})},fullWidth:!0},"Delete action"))})}}]),se=ce;return de&&de!==""&&(se=te(se,de)),Pe&&(se=se.filter(function(b){var _;return((_=b.created_by)===null||_===void 0?void 0:_.uuid)===(ie==null?void 0:ie.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(x.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),n.a.createElement(U.a,{tab:U.b.Actions}),n.a.createElement(d.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(_){ge(_.target.value)}}),n.a.createElement(i.a.Group,{buttonStyle:"solid",value:Pe,onChange:function(_){return Ae(_.target.value)}},n.a.createElement(i.a.Button,{value:!1},"All actions"),n.a.createElement(i.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb-4 float-right"},n.a.createElement(K.a,null)),n.a.createElement(m.a,{columns:Le,loading:Me,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:se,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/actions/NewActionButton.tsx":function(_e,v,e){"use strict";e.d(v,"a",function(){return ee});var S=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),N=e.n(S),h=e("./node_modules/react/index.js"),t=e.n(h),F=e("./node_modules/antd/es/modal/index.js"),y=e("./node_modules/antd/es/button/index.js"),z=e("./node_modules/antd/es/row/index.js"),M=e("./node_modules/antd/es/col/index.js"),B=e("./node_modules/antd/es/card/index.js"),k=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),j=e("./node_modules/kea-router/lib/index.js"),re=e.n(j),g=e("./frontend/src/scenes/urls.ts"),T=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx"),V=e("./frontend/src/lib/components/icons.tsx"),A=e("./frontend/src/lib/components/LemonButton/index.ts"),$=e("./node_modules/kea/lib/index.esm.js"),q=e("./frontend/src/lib/logic/featureFlagLogic.ts"),R=e("./frontend/src/lib/constants.tsx");function ee(){var Y=Object(h.useState)(!1),H=N()(Y,2),I=H[0],n=H[1],u=Object(h.useState)(!1),P=N()(u,2),d=P[0],i=P[1],E=Object($.useValues)(q.a),o=E.featureFlags;return t.a.createElement(t.a.Fragment,null,t.a.createElement(A.a,{type:"primary",onClick:function(){return n(!0)},"data-attr":"create-action"},"New ",o[R.h.SIMPLIFY_ACTIONS]?"Calculated Event":"Action"),t.a.createElement(F.a,{visible:I,style:{cursor:"pointer"},onCancel:function(){n(!1),i(!1)},title:"Create new ".concat(o[R.h.SIMPLIFY_ACTIONS]?"calculated event":"action"),footer:[d&&t.a.createElement(y.a,{key:"back-button",onClick:function(){return i(!1)}},"Back"),t.a.createElement(y.a,{key:"cancel-button",onClick:function(){n(!1),i(!1)}},"Cancel")]},!d&&t.a.createElement(z.a,{gutter:2,justify:"space-between"},t.a.createElement(M.a,{xs:11},t.a.createElement(B.a,{title:"Inspect element on your site",onClick:function(){return i(!0)},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40}},t.a.createElement(k.a,null)))),t.a.createElement(M.a,{xs:11},t.a.createElement(B.a,{title:"From event or pageview",onClick:function(){j.router.actions.push(g.a.createAction())},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},t.a.createElement(V.IconEdit,null))))),d&&t.a.createElement(T.a,null)))}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(_e,v,e){"use strict";e.d(v,"b",function(){return m}),e.d(v,"a",function(){return f});var S=e("./node_modules/core-js/modules/es.object.keys.js"),N=e.n(S),h=e("./node_modules/core-js/modules/es.symbol.js"),t=e.n(h),F=e("./node_modules/core-js/modules/es.array.filter.js"),y=e.n(F),z=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),M=e.n(z),B=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),k=e.n(B),j=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),re=e.n(j),g=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),T=e.n(g),V=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),A=e.n(V),$=e("./node_modules/core-js/modules/es.array.iterator.js"),q=e.n($),R=e("./node_modules/core-js/modules/es.object.to-string.js"),ee=e.n(R),Y=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),H=e.n(Y),I=e("./node_modules/core-js/modules/es.object.from-entries.js"),n=e.n(I),u=e("./node_modules/core-js/modules/es.array.map.js"),P=e.n(u),d=e("./node_modules/core-js/modules/es.object.entries.js"),i=e.n(d),E=e("./node_modules/react/index.js"),o=e.n(E),c=e("./node_modules/kea/lib/index.esm.js"),L=e("./node_modules/antd/es/tabs/index.js"),K=e("./frontend/src/scenes/urls.ts"),W=e("./frontend/src/lib/components/Tooltip.tsx"),G=e("./frontend/src/lib/components/icons.tsx"),C=e("./frontend/src/lib/components/TitleWithIcon.tsx"),J=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Q=e("./frontend/src/lib/constants.tsx");function p(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);r&&(l=l.filter(function(U){return Object.getOwnPropertyDescriptor(a,U).enumerable})),s.push.apply(s,l)}return s}function X(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?p(Object(s),!0).forEach(function(l){A()(a,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(s,l))})}return a}var m;(function(a){a.Actions="actions",a.EventDefinitions="events",a.EventPropertyDefinitions="properties"})(m||(m={}));var O=Object(c.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(r){return{tab:r}}},reducers:{tab:[m.EventDefinitions,{setTab:function(r,s){var l=s.tab;return l}}]},selectors:function(){return{tabUrls:[function(){return[J.a.selectors.featureFlags]},function(r){var s;return X((s={},A()(s,m.EventPropertyDefinitions,K.a.eventPropertyDefinitions()),A()(s,m.EventDefinitions,K.a.eventDefinitions()),s),r[Q.h.SIMPLIFY_ACTIONS]?{}:A()({},m.Actions,K.a.actions()))}]}},actionToUrl:function(r){var s=r.values;return{setTab:function(U){var x=U.tab;return s.tabUrls[x]||K.a.events()}}},urlToAction:function(r){var s=r.actions,l=r.values;return Object.fromEntries(Object.entries(l.tabUrls).map(function(U){var x=T()(U,2),te=x[0],ne=x[1];return[ne,function(){l.tab!==te&&s.setTab(te)}]}))}});function f(a){var r=a.tab,s=Object(c.useActions)(O),l=s.setTab,U=Object(c.useValues)(J.a),x=U.featureFlags;return o.a.createElement(L.a,{tabPosition:"top",animated:!1,activeKey:r,onTabClick:function(ne){return l(ne)}},o.a.createElement(L.a.TabPane,{tab:o.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:m.EventDefinitions}),!x[Q.h.SIMPLIFY_ACTIONS]&&o.a.createElement(L.a.TabPane,{tab:o.a.createElement(C.a,{icon:o.a.createElement(W.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},o.a.createElement(G.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:m.Actions}),o.a.createElement(L.a.TabPane,{tab:o.a.createElement(C.a,{icon:o.a.createElement(W.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},o.a.createElement(G.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:m.EventPropertyDefinitions}))}try{f.displayName="DataManagementPageTabs",f.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:f.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(a){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx":function(_e,v,e){"use strict";e.d(v,"a",function(){return n});var S=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(S),h=e("./node_modules/react/index.js"),t=e.n(h),F=e("./node_modules/clsx/dist/clsx.m.js"),y=e("./node_modules/kea/lib/index.esm.js"),z=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),M=e("./frontend/src/lib/components/LemonButton/index.ts"),B=e("./node_modules/antd/es/input/index.js"),k=e("./node_modules/antd/es/popconfirm/index.js"),j=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),re=e("./frontend/src/lib/utils.tsx"),g=e("./frontend/src/lib/components/LemonRow/index.ts"),T=e("./frontend/src/lib/components/icons.tsx"),V=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),A=e("./node_modules/kea-forms/lib/index.js"),$=e.n(A),q=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),R=e("./frontend/src/lib/forms/Field.tsx"),ee=e("./node_modules/antd/lib/typography/index.js"),Y=e.n(ee);function H(u){var P=u.numberOfResults,d=u.isSearching,i=u.isAddingEntry;return P>0?null:d?t.a.createElement(g.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs that match your search."):i?null:t.a.createElement(g.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs or domains. Add one to get started.")}function I(u){var P=u.actionId,d=Object(j.b)({actionId:P}),i=Object(y.useValues)(d),E=i.isProposedUrlSubmitting,o=Object(y.useActions)(d),c=o.cancelProposingUrl;return t.a.createElement(A.Form,{logic:j.b,props:{actionId:P},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2"},t.a.createElement(R.a,{name:"url"},t.a.createElement(q.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),t.a.createElement("div",{className:"flex justify-end gap-2"},t.a.createElement(M.a,{type:"secondary",onClick:c},"Cancel"),t.a.createElement(M.a,{htmlType:"submit",type:"primary",disabled:E,"data-attr":"url-save"},"Save")))}function n(u){var P=u.pageKey,d=u.actionId,i=Object(j.b)({actionId:d}),E=Object(y.useValues)(i),o=E.appUrlsKeyed,c=E.suggestionsLoading,L=E.searchTerm,K=E.launchUrl,W=E.editUrlIndex,G=E.isAddUrlFormVisible,C=Object(y.useActions)(i),J=C.addUrl,Q=C.removeUrl,p=C.setSearchTerm,X=C.newUrl,m=C.setEditUrlIndex;return t.a.createElement("div",null,t.a.createElement("div",{className:"flex items-center mb-4 gap-2"},t.a.createElement("div",{className:"flex grow"},t.a.createElement(B.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:L,onChange:function(f){p(f.target.value)},autoFocus:P==="toolbar-launch"&&!Object(re.Y)()})),t.a.createElement(M.a,{onClick:X,type:"secondary",icon:t.a.createElement(T.IconPlus,null),"data-attr":"toolbar-add-url"},"Add",P==="toolbar-launch"&&" authorized URL")),c?t.a.createElement(g.a,{outlined:!0,fullWidth:!0,size:"large",key:-1},t.a.createElement(V.a,{size:"md"})):t.a.createElement("div",{className:"space-y-2"},G&&t.a.createElement(g.a,{outlined:!0,fullWidth:!0,size:"large"},t.a.createElement(I,{actionId:d})),t.a.createElement(H,{numberOfResults:o.length,isSearching:L.length>0,isAddingEntry:G}),o.map(function(O,f){return t.a.createElement("div",{key:f,className:Object(F.a)("border rounded flex items-center py-2 px-4 min-h-14")},W===f?t.a.createElement(I,{actionId:d}):t.a.createElement(t.a.Fragment,null,O.type==="suggestion"&&t.a.createElement(z.a,{type:"highlight",className:"mr-4"},"Suggestion"),t.a.createElement(Y.a.Text,{ellipsis:{tooltip:O.url},className:"text-muted-alt flex-1"},O.url),t.a.createElement("div",{className:"Actions flex space-x-2 shrink-0"},O.type==="suggestion"?t.a.createElement(M.a,{onClick:function(){return J(O.url)},icon:t.a.createElement(T.IconPlus,null),"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):t.a.createElement(t.a.Fragment,null,t.a.createElement(M.a,{icon:t.a.createElement(T.IconOpenInApp,null),href:K(O.url),tooltip:"Launch toolbar",center:!0,className:"ActionButton","data-attr":"toolbar-open"}),t.a.createElement(M.a,{icon:t.a.createElement(T.IconEdit,null),onClick:function(){return m(O.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),t.a.createElement(k.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Are you sure you want to remove this authorized url?"),onConfirm:function(){return Q(f)}},t.a.createElement(M.a,{icon:t.a.createElement(T.IconDelete,null),tooltip:"Remove URL",center:!0,className:"ActionButton"}))))))})))}try{n.displayName="AuthorizedUrls",n.__docgenInfo={description:"",displayName:"AuthorizedUrls",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"]={docgenInfo:n.__docgenInfo,name:"AuthorizedUrls",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"})}catch(u){}}}]);
