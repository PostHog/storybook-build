var T=(x,r,e)=>new Promise((c,_)=>{var P=n=>{try{t(e.next(n))}catch(m){_(m)}},o=n=>{try{t(e.throw(n))}catch(m){_(m)}},t=n=>n.done?c(n.value):Promise.resolve(n.value).then(P,o);t((e=e.apply(x,r)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[277],{"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function(x,r,e){"use strict";e.d(r,"a",function(){return n});var c=e("./frontend/@posthog/lemon-ui/src/index.ts"),_=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),P=e.n(_),o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),t=e.n(o);function n(m){let{to:a,onClick:g,title:v,subtitle:u,prefix:p,suffix:E}=m;return Object(o.jsx)(c.LemonButton,{fullWidth:!0,to:a,onClick:g,children:Object(o.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[p?Object(o.jsx)("span",{className:"shrink-0",children:p}):null,Object(o.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(o.jsx)("div",{className:"text-primary font-semibold truncate",children:v}),Object(o.jsx)("div",{className:"truncate text-default font-normal",children:u})]}),E?Object(o.jsx)("span",{className:"shrink-0",children:E}):null]})})}try{n.displayName="ProjectHomePageCompactListItem",n.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:n.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(m){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(x,r,e){"use strict";var c=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_=e.n(c),P=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),o=e.n(P),t={};t.insert="head",t.singleton=!1;var n=_()(o.a,t),m=o.a.locals||{}},"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(x,r,e){"use strict";e.r(r),e.d(r,"ProjectHomepage",function(){return N}),e.d(r,"scene",function(){return G});var c=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),_=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),P=e("./frontend/src/lib/components/PageHeader.tsx"),o=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),t=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),n=e("./frontend/src/scenes/teamLogic.tsx"),m=e("./frontend/src/types.ts"),a=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),g=e("./frontend/src/lib/components/LemonDivider/index.ts"),v=e("./frontend/src/models/dashboardsModel.tsx"),u=e("./frontend/src/lib/components/LemonButton/index.ts"),p=e("./frontend/src/lib/utils/eventUsageLogic.ts");const E=Object(t.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[p.e],actions:[n.a,["updateCurrentTeam"]],values:[n.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:()=>!0,closePrimaryDashboardModal:()=>!0,setPrimaryDashboard:j=>({dashboardId:j})},selectors:{primaryDashboardId:[j=>[j.currentTeam],j=>j==null?void 0:j.primary_dashboard]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:()=>!0,closePrimaryDashboardModal:()=>!1}]},listeners:j=>{let{actions:i}=j;return{setPrimaryDashboard:l=>T(this,null,function*(){let{dashboardId:y}=l;i.updateCurrentTeam({primary_dashboard:y}),p.e.actions.reportPrimaryDashboardChanged()}),showPrimaryDashboardModal:()=>T(this,null,function*(){p.e.actions.reportPrimaryDashboardModalOpened()})}}});var O=e("./frontend/src/lib/components/icons.tsx"),R=e("./frontend/src/lib/components/LemonRow/index.ts"),d=e("./frontend/src/lib/components/LemonModal/index.ts"),f=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),s=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function I(){const{isOpen:j,primaryDashboardId:i}=Object(t.useValues)(E),{closePrimaryDashboardModal:l,setPrimaryDashboard:y}=Object(t.useActions)(E),{nameSortedDashboards:A,dashboardsLoading:B}=Object(t.useValues)(v.a);return Object(s.jsx)(d.a,{isOpen:j,onClose:l,title:"Select a default dashboard for the project",footer:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(u.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:l,children:"Close"})}),children:B?Object(s.jsx)("div",{className:"space-y-2",children:Object(s.jsx)(f.a.Row,{repeat:4})}):Object(s.jsx)("div",{className:"space-y-2",children:A.map(L=>{const U=L.id===i,W=Object(s.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[Object(s.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[Object(s.jsx)("strong",{children:L.name}),Object(s.jsx)("span",{className:"text-default font-normal text-ellipsis",children:L.description})]}),U?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O.IconCottage,{className:"mr-2 text-warning text-lg"}),Object(s.jsx)("span",{children:"Default"})]}):Object(s.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return U?Object(s.jsx)(R.a,{fullWidth:!0,status:"muted",className:"dashboard-row",children:W},L.id):Object(s.jsx)(u.a,{fullWidth:!0,className:"dashboard-row",onClick:()=>{y(L.id),l()},children:W},L.id)})})})}var h=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),b=e("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),D=e("./frontend/src/scenes/project-homepage/RecentInsights.tsx"),M=e("./frontend/src/lib/dayjs.ts"),S=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),C=e("./frontend/src/scenes/urls.ts"),H=e("./frontend/src/lib/components/ProfilePicture/index.ts"),K=e("./frontend/src/scenes/persons/PersonHeader.tsx"),V=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx");function z(j){let{person:i}=j;const{reportPersonOpenedFromNewlySeenPersonsList:l}=Object(t.useActions)(p.e);return Object(s.jsx)(V.a,{to:C.a.person(i.distinct_ids[0]),title:Object(K.b)(i),subtitle:`First seen ${Object(M.a)(i.created_at).fromNow()}`,prefix:Object(s.jsx)(H.b,{name:Object(K.b)(i)}),onClick:()=>{l()}})}function F(){const{persons:j,personsLoading:i}=Object(t.useValues)(h.a);return Object(s.jsx)(S.a,{title:"Newly seen persons",viewAllURL:C.a.persons(),loading:i,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:j.slice(0,5),renderRow:(l,y)=>Object(s.jsx)(z,{person:l},y)})}var w=e("./node_modules/.pnpm/@react-hook+size@2.1.2_react@16.14.0/node_modules/@react-hook/size/dist/module/index.js"),Y=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),$=e("./frontend/@posthog/lemon-ui/src/index.ts"),J=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx");function N(){const{dashboardLogicProps:j}=Object(t.useValues)(h.a),{currentTeam:i}=Object(t.useValues)(n.a),{allItems:l}=Object(t.useValues)(Object(J.c)(j)),{showInviteModal:y}=Object(t.useActions)(a.a),{showPrimaryDashboardModal:A}=Object(t.useActions)(E),B=Object(c.useRef)(null),[L]=Object(w.a)(B),U=Object(s.jsxs)("div",{className:"flex",children:[Object(s.jsx)(u.a,{"data-attr":"project-home-invite-team-members",onClick:()=>{y()},className:"mr-2",type:"secondary",children:"Invite members"}),Object(s.jsx)(Y.NewInsightButton,{dataAttr:"project-home-new-insight"})]});return Object(s.jsxs)("div",{className:"project-homepage",children:[Object(s.jsx)(P.a,{title:(i==null?void 0:i.name)||"",delimited:!0,buttons:U}),Object(s.jsxs)("div",{ref:B,className:L&&L<600?"top-list-container-vertical":"top-list-container-horizontal",children:[Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(D.b,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(F,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(b.a,{})})]}),i!=null&&i.primary_dashboard?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"homepage-dashboard-header",children:[Object(s.jsxs)("div",{className:"dashboard-title-container",children:[!l&&Object(s.jsx)(f.a,{className:"w-20"}),(l==null?void 0:l.name)&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O.IconCottage,{className:"mr-2 text-warning text-2xl"}),Object(s.jsx)($.Link,{className:"font-semibold text-xl text-default",to:C.a.dashboard(l.id),children:l==null?void 0:l.name})]})]}),Object(s.jsx)(u.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:A,children:"Change dashboard"})]}),Object(s.jsx)(g.a,{className:"my-6"}),Object(s.jsx)(o.Dashboard,{id:i.primary_dashboard.toString(),placement:m.n.ProjectHomepage})]}):Object(s.jsxs)("div",{className:"empty-state-container",children:[Object(s.jsx)(O.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),Object(s.jsx)("h1",{children:"There isn\u2019t a default dashboard set for this project"}),Object(s.jsx)("p",{className:"mb-4",children:"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."}),Object(s.jsx)(u.a,{type:"primary","data-attr":"project-home-new-insight",onClick:()=>{A()},children:"Select a default dashboard"})]}),Object(s.jsx)(I,{})]})}const G={component:N,logic:h.a}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(x,r,e){"use strict";e.d(r,"a",function(){return O}),e.d(r,"b",function(){return R});var c=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),_=e.n(c),P=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),o=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),t=e("./frontend/src/lib/dayjs.ts"),n=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),m=e("./frontend/src/scenes/urls.ts"),a=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),g=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),v=e("./frontend/src/lib/utils/eventUsageLogic.ts"),u=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),p=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),E=e.n(p);function O(d){let{insight:f}=d;const{reportInsightOpenedFromRecentInsightList:s}=Object(o.useActions)(v.e);return Object(p.jsx)(u.a,{title:f.name||f.derived_name||"Insight",subtitle:`Last modified ${Object(t.a)(f.last_modified_at).fromNow()}`,prefix:Object(p.jsx)(a.InsightIcon,{insight:f}),to:m.a.insightView(f.short_id),onClick:()=>{s()}})}function R(){const{recentInsights:d,recentInsightsLoading:f}=Object(o.useValues)(g.a),{loadRecentInsights:s}=Object(o.useActions)(g.a);return Object(c.useEffect)(()=>{s()},[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(n.a,{title:"Your recently viewed insights",viewAllURL:m.a.savedInsights(),loading:f,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:m.a.savedInsights()},items:d.slice(0,5),renderRow:(I,h)=>Object(p.jsx)(O,{insight:I},h)})})}try{O.displayName="InsightRow",O.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:O.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(d){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(x,r,e){"use strict";e.d(r,"b",function(){return s}),e.d(r,"a",function(){return I});var c=e("./frontend/src/lib/dayjs.ts"),_=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),P=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),o=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),t=e("./frontend/src/lib/components/ProfilePicture/index.ts"),n=e("./frontend/src/scenes/persons/PersonHeader.tsx"),m=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),a=e("./frontend/src/scenes/urls.ts"),g=e("./frontend/src/lib/utils/eventUsageLogic.ts"),v=e("./frontend/src/lib/utils.tsx"),u=e("./frontend/src/lib/components/icons.tsx"),p=e("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),E=e("./frontend/src/scenes/teamLogic.tsx"),O=e("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),R=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),d=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),f=e.n(d);function s(h){let{recording:b}=h;const{openSessionPlayer:D}=Object(_.useActions)(O.a),{reportRecordingOpenedFromRecentRecordingList:M}=Object(_.useActions)(g.e);return Object(d.jsx)(R.a,{title:Object(n.b)(b.person),subtitle:`Recorded ${Object(c.a)(b.start_time).fromNow()}`,prefix:Object(d.jsx)(t.b,{name:Object(n.b)(b.person)}),suffix:Object(d.jsxs)("div",{className:"flex items-center justify-end text-default",children:[Object(d.jsx)("span",{children:Object(v.P)(b.recording_duration)}),Object(d.jsx)(u.IconPlayCircle,{className:"text-2xl ml-2"})]}),onClick:()=>{D({id:b.id,matching_events:b.matching_events}),M()}})}function I(){const{currentTeam:h}=Object(_.useValues)(E.a),b=Object(m.d)({key:"projectHomepage"}),{sessionRecordings:D,sessionRecordingsResponseLoading:M}=Object(_.useValues)(b);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{}),Object(d.jsx)(o.a,{title:"Recent recordings",viewAllURL:a.a.sessionRecordings(),loading:M,emptyMessage:h!=null&&h.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:a.a.projectSettings()+"#recordings"},items:D.slice(0,5),renderRow:(S,C)=>Object(d.jsx)(s,{recording:S},C)})]})}try{s.displayName="RecordingRow",s.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:s.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(h){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(x,r,e){"use strict";e.d(r,"a",function(){return m});var c=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),_=e("./frontend/src/scenes/teamLogic.tsx"),P=e("./frontend/src/types.ts"),o=e("./frontend/src/lib/api.ts"),t=e("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),n=e.n(t);const m=Object(c.kea)([Object(c.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(c.connect)({values:[_.a,["currentTeamId","currentTeam"]]}),Object(c.selectors)({primaryDashboardId:[()=>[_.a.selectors.currentTeam],a=>a==null?void 0:a.primary_dashboard],dashboardLogicProps:[a=>[a.primaryDashboardId],a=>({id:a!=null?a:void 0,placement:P.n.ProjectHomepage})]}),Object(t.loaders)(a=>{let{values:g}=a;return{recentInsights:[[],{loadRecentInsights:()=>T(this,null,function*(){return(yield o.b.get(`api/projects/${g.currentTeamId}/insights/?my_last_viewed=true&order=-my_last_viewed_at`)).results})}],persons:[[],{loadPersons:()=>T(this,null,function*(){return(yield o.b.persons.list()).results})}]}}),Object(c.afterMount)(a=>{let{actions:g}=a;g.loadRecentInsights(),g.loadPersons()})])},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(x,r,e){var c=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");r=c(!1),r.push([x.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),x.exports=r}}]);
