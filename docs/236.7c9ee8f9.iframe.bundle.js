(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(ae,v,e){"use strict";e.r(v),e.d(v,"scene",function(){return Q}),e.d(v,"ActionsTable",function(){return y});var x=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),F=e.n(x),R=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),M=e.n(R),h=e("./node_modules/core-js/modules/es.array.map.js"),r=e("./node_modules/core-js/modules/es.regexp.exec.js"),k=e("./node_modules/core-js/modules/es.string.search.js"),le=e("./node_modules/core-js/modules/es.array.concat.js"),de=e("./node_modules/core-js/modules/es.function.name.js"),ve=e("./node_modules/core-js/modules/es.array.slice.js"),q=e("./node_modules/core-js/modules/es.number.constructor.js"),ce=e("./node_modules/core-js/modules/es.array.filter.js"),fe=e("./node_modules/core-js/modules/es.object.to-string.js"),U=e("./node_modules/react/index.js"),n=e.n(U),ee=e("./frontend/src/scenes/actions/Actions.scss"),se=e("./frontend/src/lib/components/Link.tsx"),m=e("./node_modules/antd/es/input/index.js"),P=e("./node_modules/antd/es/radio/index.js"),V=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),B=e("./frontend/src/lib/utils.tsx"),p=e("./node_modules/kea/lib/index.esm.js"),H=e("./frontend/src/models/actionsModel.ts"),re=e("./node_modules/antd/es/modal/index.js"),O=e("./node_modules/antd/es/button/index.js"),f=e("./node_modules/antd/es/row/index.js"),$=e("./node_modules/antd/es/col/index.js"),oe=e("./node_modules/antd/es/card/index.js"),K=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),E=e("./node_modules/kea-router/lib/index.js"),j=e("./frontend/src/scenes/urls.ts"),A=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx"),T=e("./frontend/src/lib/components/icons.tsx"),G=e("./frontend/src/lib/components/LemonButton/index.ts");function b(){var Z=Object(U.useState)(!1),W=M()(Z,2),S=W[0],L=W[1],Y=Object(U.useState)(!1),I=M()(Y,2),w=I[0],J=I[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(G.a,{type:"primary",onClick:function(){return L(!0)},"data-attr":"create-action"},"New Action"),n.a.createElement(re.a,{visible:S,style:{cursor:"pointer"},onCancel:function(){L(!1),J(!1)},title:"Create new action",footer:[w&&n.a.createElement(O.a,{key:"back-button",onClick:function(){return J(!1)}},"Back"),n.a.createElement(O.a,{key:"cancel-button",onClick:function(){L(!1),J(!1)}},"Cancel")]},!w&&n.a.createElement(f.a,{gutter:2,justify:"space-between"},n.a.createElement($.a,{xs:11},n.a.createElement(oe.a,{title:"Inspect element on your site",onClick:function(){return J(!0)},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40}},n.a.createElement(K.a,null)))),n.a.createElement($.a,{xs:11},n.a.createElement(oe.a,{title:"From event or pageview",onClick:function(){E.router.actions.push(j.a.createAction())},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},n.a.createElement(T.IconEdit,null))))),w&&n.a.createElement(A.a,null)))}var X=e("./frontend/src/types.ts"),C=e("./node_modules/fuse.js/dist/fuse.esm.js"),Oe=e("./frontend/src/scenes/userLogic.ts"),ue=e("./frontend/src/scenes/teamLogic.tsx"),he=e("./frontend/src/lib/api.ts"),ie=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),Pe=e("./frontend/src/lib/components/LemonTable/index.ts"),je=e("./frontend/src/lib/components/LemonDivider/index.ts"),Te=e("./frontend/src/lib/components/LemonButton/More.tsx"),me=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),te=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),u=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),_e=function(W,S){return new C.a(W,{keys:["name","url"],threshold:.3}).search(S).map(function(L){return L.item})},Q={component:y};function y(){var Z=Object(p.useValues)(ue.a),W=Z.currentTeam,S=Object(p.useValues)(Object(H.a)({params:"include_count=1"})),L=S.actions,Y=S.actionsLoading,I=Object(p.useActions)(H.a),w=I.loadActions,J=Object(U.useState)(""),z=M()(J,2),ye=z[0],De=z[1],Me=Object(U.useState)(!1),ge=M()(Me,2),Ee=ge[0],Ue=ge[1],i=Object(p.useValues)(Oe.a),s=i.user,t=i.hasAvailableFeature,a=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(l,d){return(l.name||"").localeCompare(d.name||"")},render:function(l,d,_){return n.a.createElement(se.a,{"data-attr":"action-link-"+_,to:j.a.action(d.id),className:"row-name"},l||n.a.createElement("i",null,"Unnamed action"))}}].concat(F()(t(X.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(l){return n.a.createElement(me.a,{tags:l,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(l,d){var _;return n.a.createElement("span",null,(_=d.steps)!==null&&_!==void 0&&_.length?d.steps.map(function(g){return n.a.createElement("div",{key:g.id},function(){var N=Object(B.yb)(g.url||"");switch(N=N.slice(0,40)+(N.length>40?"...":""),g.event){case"$autocapture":return"Autocapture";case"$pageview":switch(g.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,N));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,N));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,N))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,g.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(ie.b)(),Object(ie.a)()],F()(W!=null&&W.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(l,d){return Number(l.post_to_slack)-Number(d.post_to_slack)},render:function(l){return l?n.a.createElement(V.a,null):null}}]:[]),[{width:0,render:function(l,d){return n.a.createElement(Te.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(G.a,{type:"stealth",to:j.a.action(d.id),fullWidth:!0},"Edit"),n.a.createElement(G.a,{type:"stealth",to:Object(E.combineUrl)(j.a.insightNew({insight:X.z.TRENDS,interval:"day",display:X.j.ActionsLineGraph,actions:[{id:d.id,name:d.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(je.a,null),n.a.createElement(G.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Object(B.x)({endpoint:he.b.actions.determineDeleteEndpoint(),object:d,callback:w})},fullWidth:!0},"Delete action"))})}}]),o=L;return ye&&ye!==""&&(o=_e(o,ye)),Ee&&(o=o.filter(function(c){var l;return((l=c.created_by)===null||l===void 0?void 0:l.uuid)===(s==null?void 0:s.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(u.a,{activeTab:te.b.Actions}),n.a.createElement(m.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(l){De(l.target.value)}}),n.a.createElement(P.a.Group,{buttonStyle:"solid",value:Ee,onChange:function(l){return Ue(l.target.value)}},n.a.createElement(P.a.Button,{value:!1},"All actions"),n.a.createElement(P.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb float-right"},n.a.createElement(b,null)),n.a.createElement(Pe.a,{columns:a,loading:Y,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:o,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(ae,v,e){"use strict";e.d(v,"a",function(){return h});var x=e("./frontend/src/lib/components/PageHeader.tsx"),F=e("./node_modules/react/index.js"),R=e.n(F),M=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx");function h(r){var k=r.activeTab,le=r.hideTabs;return R.a.createElement(R.a.Fragment,null,R.a.createElement(x.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!le&&R.a.createElement(M.a,{tab:k}))}try{h.displayName="DataManagementPageHeader",h.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:h.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(r){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(ae,v,e){"use strict";e.d(v,"b",function(){return f}),e.d(v,"a",function(){return K});var x=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=e.n(x),R=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),M=e.n(R),h=e("./node_modules/core-js/modules/es.array.iterator.js"),r=e.n(h),k=e("./node_modules/core-js/modules/es.object.to-string.js"),le=e.n(k),de=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ve=e.n(de),q=e("./node_modules/core-js/modules/es.object.from-entries.js"),ce=e.n(q),fe=e("./node_modules/core-js/modules/es.array.map.js"),U=e.n(fe),n=e("./node_modules/core-js/modules/es.object.entries.js"),ee=e.n(n),se=e("./node_modules/react/index.js"),m=e.n(se),P=e("./node_modules/kea/lib/index.esm.js"),V=e("./node_modules/antd/es/tabs/index.js"),B=e("./frontend/src/scenes/urls.ts"),p=e("./frontend/src/lib/components/Tooltip.tsx"),H=e("./frontend/src/lib/components/icons.tsx"),re=e("./frontend/src/lib/components/TitleWithIcon.tsx"),O,f;(function(E){E.Actions="actions",E.EventDefinitions="events",E.EventPropertyDefinitions="properties"})(f||(f={}));var $=(O={},M()(O,f.EventPropertyDefinitions,B.a.eventPropertyDefinitions()),M()(O,f.EventDefinitions,B.a.eventDefinitions()),M()(O,f.Actions,B.a.actions()),O),oe=Object(P.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(j){return{tab:j}}},reducers:{tab:[f.EventDefinitions,{setTab:function(j,A){var T=A.tab;return T}}]},actionToUrl:function(){return{setTab:function(A){var T=A.tab;return $[T]||B.a.events()}}},urlToAction:function(j){var A=j.actions,T=j.values;return Object.fromEntries(Object.entries($).map(function(G){var b=F()(G,2),X=b[0],C=b[1];return[C,function(){T.tab!==X&&A.setTab(X)}]}))}});function K(E){var j=E.tab,A=Object(P.useActions)(oe),T=A.setTab;return m.a.createElement(V.a,{tabPosition:"top",animated:!1,activeKey:j,onTabClick:function(b){return T(b)}},m.a.createElement(V.a.TabPane,{tab:m.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:f.EventDefinitions}),m.a.createElement(V.a.TabPane,{tab:m.a.createElement(re.a,{icon:m.a.createElement(p.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},m.a.createElement(H.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:f.Actions}),m.a.createElement(V.a.TabPane,{tab:m.a.createElement(re.a,{icon:m.a.createElement(p.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},m.a.createElement(H.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Properties"),key:f.EventPropertyDefinitions}))}try{K.displayName="DataManagementPageTabs",K.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:K.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(E){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx":function(ae,v,e){"use strict";e.d(v,"a",function(){return O});var x=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=e.n(x),R=e("./node_modules/core-js/modules/es.regexp.exec.js"),M=e("./node_modules/core-js/modules/es.string.match.js"),h=e("./node_modules/react/index.js"),r=e.n(h),k=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),le=e.n(k),de=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss"),ve=e.n(de),q={};q.insert="head",q.singleton=!1;var ce=le()(ve.a,q),fe=ve.a.locals||{},U=e("./node_modules/clsx/dist/clsx.m.js"),n=e("./node_modules/kea/lib/index.esm.js"),ee=e("./frontend/src/lib/components/LemonTable/index.ts"),se=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),m=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),P=e("./frontend/src/lib/components/LemonButton/index.ts"),V=e("./node_modules/antd/es/input/index.js"),B=e("./node_modules/antd/es/button/index.js"),p=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),H=e("./frontend/src/lib/utils.tsx"),re=e("./frontend/src/lib/components/LemonButton/More.tsx");function O(f){var $=f.pageKey,oe=f.actionId,K=Object(p.c)({actionId:oe}),E=Object(n.useValues)(K),j=E.appUrlsKeyed,A=E.suggestionsLoading,T=E.searchTerm,G=E.launchUrl,b=E.appUrls,X=E.editUrlIndex,C=Object(n.useActions)(K),Oe=C.addUrl,ue=C.removeUrl,he=C.setSearchTerm,ie=C.updateUrl,Pe=C.newUrl,je=C.setEditUrlIndex,Te=[{title:"URLs",dataIndex:"url",key:"url",render:function(te,u){var _e=Object(h.useState)(u.url),Q=F()(_e,2),y=Q[0],Z=Q[1],W=Object(h.useState)(""),S=F()(W,2),L=S[0],Y=S[1];Object(h.useEffect)(function(){return Z(u.url)},[u]);var I=function(){if(Y(""),y===p.a&&ue(u.originalIndex),y.indexOf("*")>-1&&!y.match(/^(.*)\*[^\*]*\.[^\*]+\.[^\*]+$/)){Y("You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.");return}if(!Object(H.fb)(y)){Y("Please type a valid URL or domain.");return}if(b.indexOf(y)>-1&&b.indexOf(y,u.originalIndex)!==u.originalIndex&&b.indexOf(y,u.originalIndex+1)!==u.originalIndex){Y("This URL is already registered.");return}ie(u.originalIndex,y)};return u.type==="suggestion"||te!==p.a&&X!==u.originalIndex?r.a.createElement("div",{className:Object(U.a)("authorized-url-col",u.type)},u.type==="authorized"&&r.a.createElement(m.a,{style:{marginRight:4}}),te,u.type==="suggestion"&&r.a.createElement(se.a,null,"Suggestion")):r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(V.a,{value:y,onChange:function(J){return Z(J.target.value)},onPressEnter:I,autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)"}),r.a.createElement(B.a,{type:"primary",onClick:I},"Save")),L&&r.a.createElement("span",{className:"text-small text-danger"},L))}},{title:"",key:"actions",render:function(te,u,_e){return r.a.createElement("div",{className:"actions-col"},u.type==="suggestion"?r.a.createElement(P.a,{type:"secondary",onClick:function(){return Oe(u.url)}},"Apply suggestion"):r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{type:"highlighted",href:G(u.url),className:"mr"},"Open with Toolbar"),r.a.createElement(re.a,{overlay:r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{fullWidth:!0,type:"stealth",onClick:function(){return je(u.originalIndex)}},"Edit authorized URL"),r.a.createElement(P.a,{fullWidth:!0,style:{color:"var(--danger)"},type:"stealth",onClick:function(){return ue(_e)}},"Remove authorized URL"))})))}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"flex-center mb"},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(V.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:T,onChange:function(te){he(te.target.value)},autoFocus:$==="toolbar-launch"&&!Object(H.X)()})),r.a.createElement(P.a,{type:"primary",onClick:Pe},"Add",$==="toolbar-launch"&&" authorized domain")),r.a.createElement(ee.a,{className:"authorized-urls-table",columns:Te,dataSource:j,emptyState:T?"There are no authorized URLs that match your search.":"There are no authorized URLs or domains. Add one to get started.",loading:A}))}try{O.displayName="AuthorizedUrlsTable",O.__docgenInfo={description:"",displayName:"AuthorizedUrlsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"]={docgenInfo:O.__docgenInfo,name:"AuthorizedUrlsTable",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"})}catch(f){}},"./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts":function(ae,v,e){"use strict";e.d(v,"b",function(){return ge}),e.d(v,"a",function(){return Ee}),e.d(v,"c",function(){return Ue});var x=e("./node_modules/core-js/modules/es.object.keys.js"),F=e.n(x),R=e("./node_modules/core-js/modules/es.symbol.js"),M=e.n(R),h=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r=e.n(h),k=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),le=e.n(k),de=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),ve=e.n(de),q=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ce=e.n(q),fe=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),U=e.n(fe),n=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ee=e.n(n),se=e("./node_modules/@babel/runtime/regenerator/index.js"),m=e.n(se),P=e("./node_modules/core-js/modules/es.array.concat.js"),V=e.n(P),B=e("./node_modules/core-js/modules/es.array.iterator.js"),p=e.n(B),H=e("./node_modules/core-js/modules/es.object.to-string.js"),re=e.n(H),O=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),f=e.n(O),$=e("./node_modules/core-js/modules/es.array.slice.js"),oe=e.n($),K=e("./node_modules/core-js/modules/es.array.map.js"),E=e.n(K),j=e("./node_modules/core-js/modules/es.array.filter.js"),A=e.n(j),T=e("./node_modules/core-js/modules/es.string.iterator.js"),G=e.n(T),b=e("./node_modules/core-js/modules/web.url.js"),X=e.n(b),C=e("./node_modules/core-js/modules/web.url-search-params.js"),Oe=e.n(C),ue=e("./node_modules/core-js/modules/es.regexp.to-string.js"),he=e.n(ue),ie=e("./node_modules/core-js/modules/es.array.includes.js"),Pe=e.n(ie),je=e("./node_modules/core-js/modules/es.string.includes.js"),Te=e.n(je),me=e("./node_modules/core-js/modules/es.object.assign.js"),te=e.n(me),u=e("./node_modules/core-js/modules/es.array.splice.js"),_e=e.n(u),Q=e("./node_modules/core-js/modules/es.regexp.exec.js"),y=e.n(Q),Z=e("./node_modules/core-js/modules/es.string.search.js"),W=e.n(Z),S=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/lib/api.ts"),Y=e("./frontend/src/lib/utils.tsx"),I=e("./frontend/src/scenes/teamLogic.tsx"),w=e("./frontend/src/lib/dayjs.ts"),J=e("./node_modules/fuse.js/dist/fuse.esm.js"),z=e("./node_modules/kea-router/lib/index.js"),ye=e.n(z);function De(i,s){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);s&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,a)}return t}function Me(i){for(var s=1;s<arguments.length;s++){var t=arguments[s]!=null?arguments[s]:{};s%2?De(Object(t),!0).forEach(function(a){ee()(i,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(t,a))})}return i}function ge(i,s,t){var a=Me(Me({userIntent:t?void 0:s?"edit-action":"add-action"},s?{actionId:s}:{}),i?{appUrl:i}:{});return"/api/user/redirect_to_site/"+Object(z.encodeParams)(a,"?")}var Ee="https://",Ue=Object(S.kea)({path:function(s){return["lib","components","AppEditorLink","appUrlsLogic",s]},key:function(s){return"".concat(s.pageKey).concat(s.actionId)||"global"},props:{},connect:{values:[I.a,["currentTeam","currentTeamId"]],actions:[I.a,["updateCurrentTeam"]]},actions:function(){return{setAppUrls:function(t){return{appUrls:t}},addUrl:function(t,a){return{url:t,launch:a}},newUrl:!0,removeUrl:function(t){return{index:t}},updateUrl:function(t,a){return{index:t,url:a}},launchAtUrl:function(t){return{url:t}},setSearchTerm:function(t){return{term:t}},setEditUrlIndex:function(t){return{originalIndex:t}}}},loaders:function(s){var t=s.values;return{suggestions:{__default:[],loadSuggestions:function(){var a=U()(m.a.mark(function c(){var l,d,_,g;return m.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return d={events:[{id:"$pageview",name:"$pageview",type:"events"}],breakdown:"$current_url",date_from:Object(w.a)().subtract(3,"days").toISOString()},D.next=3,L.b.get("api/projects/".concat(t.currentTeamId,"/insights/trend/?").concat(Object(Y.Ab)(d)));case 3:if(_=D.sent.result,!(_&&((l=_[0])===null||l===void 0?void 0:l.count)===0)){D.next=6;break}return D.abrupt("return",[]);case 6:return g=[],D.abrupt("return",(_||[]).filter(function(ne){if(!ne.breakdown_value)return!1;try{var pe=new URL(ne.breakdown_value.toString()).hostname;return g.indexOf(pe)>-1||t.appUrls.filter(function(Ae){return Ae.indexOf(pe)>-1}).length>0?void 0:(g.push(pe),!0)}catch(Ae){return!1}}).map(function(ne){return ne.breakdown_value}).slice(0,20));case 8:case"end":return D.stop()}},c)}));function o(){return a.apply(this,arguments)}return o}()}}},events:function(s){var t=s.actions,a=s.values;return{afterMount:function(){t.loadSuggestions(),a.currentTeam&&t.setAppUrls(a.currentTeam.app_urls)}}},reducers:function(){return{appUrls:[[],{setAppUrls:function(t,a){var o=a.appUrls;return o},addUrl:function(t,a){var o=a.url;return t.concat([o])},newUrl:function(t){return t.includes(Ee)?t:[Ee].concat(t)},updateUrl:function(t,a){var o=a.index,c=a.url;return Object.assign(ce()(t),ee()({},o,c))},removeUrl:function(t,a){var o=a.index,c=ce()(t);return c.splice(o,1),c}}],suggestions:[[],{addUrl:function(t,a){var o=a.url;return ce()(t).filter(function(c){return o!==c})}}],searchTerm:["",{setSearchTerm:function(t,a){var o=a.term;return o}}],editUrlIndex:[null,{setEditUrlIndex:function(t,a){var o=a.originalIndex;return o},removeUrl:function(t,a){var o=a.index;return t&&o<t?t-1:o===t?null:t}}]}},listeners:function(s){var t,a=s.sharedListeners,o=s.values,c=s.actions;return t={addUrl:[a.saveAppUrls,function(){var l=U()(m.a.mark(function d(_){var g,N;return m.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:g=_.url,N=_.launch,N&&c.launchAtUrl(g);case 2:case"end":return ne.stop()}},d)}));return function(d){return l.apply(this,arguments)}}()],removeUrl:a.saveAppUrls,updateUrl:[a.saveAppUrls,function(){return c.setEditUrlIndex(null)}]},ee()(t,I.a.actionTypes.loadCurrentTeamSuccess,function(){var l=U()(m.a.mark(function d(_){var g;return m.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:g=_.currentTeam,g&&c.setAppUrls(g.app_urls);case 2:case"end":return D.stop()}},d)}));return function(d){return l.apply(this,arguments)}}()),ee()(t,"launchAtUrl",function(d){var _=d.url;window.location.href=o.launchUrl(_)}),t},sharedListeners:function(s){var t=s.values;return{saveAppUrls:function(){I.a.actions.updateCurrentTeam({app_urls:t.appUrls})}}},selectors:function(s){var t=s.props;return{appUrlsKeyed:[function(a){return[a.appUrls,a.suggestions,a.searchTerm]},function(a,o,c){var l=a.map(function(d,_){return{url:d,type:"authorized",originalIndex:_}}).concat(o.map(function(d,_){return{url:d,type:"suggestion",originalIndex:_}}));return c?new J.a(l,{keys:["url"],threshold:.3}).search(c).map(function(d){return d.item}):l}],launchUrl:[function(){return[]},function(){return function(a){return ge(a,t.actionId,!t.actionId)}}]}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss":function(ae,v,e){var x=e("./node_modules/css-loader/dist/runtime/api.js");v=x(!1),v.push([ae.i,".authorized-urls-table .authorized-url-col{display:flex;align-items:center}.authorized-urls-table .authorized-url-col .lemon-tag{margin-left:6px}.authorized-urls-table .authorized-url-col.suggestion{color:var(--text-muted-alt)}.authorized-urls-table .authorized-url-col.authorized{color:var(--success)}.authorized-urls-table .actions-col{display:flex;align-items:center;justify-content:flex-end}",""]),ae.exports=v}}]);
