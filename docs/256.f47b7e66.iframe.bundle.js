(window.webpackJsonp=window.webpackJsonp||[]).push([[256],{"./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx":function(N,v,e){"use strict";e.r(v),e.d(v,"scene",function(){return q}),e.d(v,"EventDefinitionsTable",function(){return W});var V=e("./node_modules/core-js/modules/es.array.concat.js"),te=e("./node_modules/core-js/modules/es.function.name.js"),K=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),P=e.n(K),U=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),H=e.n(U),J=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),B=e.n(J),I={};I.insert="head",I.singleton=!1;var ie=H()(B.a,I),oe=B.a.locals||{},F=e("./node_modules/react/index.js"),n=e.n(F),f=e("./node_modules/kea/lib/index.esm.js"),$=e("./frontend/src/lib/components/LemonTable/index.ts"),p=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),z=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),M=e("./frontend/src/scenes/organizationLogic.tsx"),_=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),w=e("./frontend/src/lib/utils.tsx"),ae=e("./node_modules/core-js/modules/es.array.includes.js"),se=e("./node_modules/core-js/modules/es.string.includes.js"),Y=e("./frontend/src/lib/components/LemonButton/More.tsx"),G=e("./frontend/src/lib/components/LemonButton/index.ts"),Q=e("./frontend/src/scenes/urls.ts"),X=e("./node_modules/kea-router/lib/index.js"),Z=e("./frontend/src/lib/utils/eventUsageLogic.ts");function C(y){var g,u,s,h,b,E,m,x,a=y.definition,O=Object(f.useActions)(p.d),T=O.loadPropertiesForEvent,R=O.setLocalPropertyDefinition,S=Object(f.useValues)(p.d),o=S.eventPropertiesCacheMap,A=S.eventDefinitionPropertiesLoading,r=Object(f.useValues)(M.a),t=r.hasDashboardCollaboration,i=r.hasIngestionTaxonomy,l=Object(f.useActions)(Z.f),c=l.reportDataManagementEventDefinitionsPageClickNestedPropertyDetail;Object(F.useEffect)(function(){T(a)},[]);var ee=[{title:"Property",key:"property",className:"definition-column-name",render:function(j,d){return n.a.createElement(_.b,{definition:d,event:a,hideIcon:!0,openDetailInNewTab:!1,updateRemoteItem:function(ne){R(a,ne)}})}},{title:"Type",key:"type",className:"definition-column-type",render:function(j,d){return d.property_type?n.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},d.property_type):n.a.createElement("span",{className:"text-muted"},"\u2014")}}].concat(P()(t?[{title:"Tags",key:"tags",render:function(j,d){var L;return n.a.createElement(z.a,{tags:(L=d.tags)!==null&&L!==void 0?L:[],staticOnly:!0})}}]:[]),P()(i?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(j,d){return d.query_usage_30_day?Object(w.O)(d.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(j,d){return d.example?n.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},d.example):n.a.createElement("span",{className:"text-muted"},"\u2014")}},{key:"actions",width:0,render:function(j,d){return n.a.createElement(Y.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(G.a,{type:"stealth",onClick:function(){c(),X.router.actions.push(Q.a.eventPropertyDefinition(d.id))},fullWidth:!0,"data-attr":"event-properties-definition-property-detail"},"Show property in list"))})}}]);return n.a.createElement("div",{className:"event-properties-wrapper"},n.a.createElement("span",{className:"event-properties-header"},"Top properties"),n.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),n.a.createElement($.a,{id:"event-properties-definition-table-".concat(a.id),"data-attr":"event-properties-definition-nested-table",columns:ee,className:"event-properties-definition-table-".concat(a.id),dataSource:(g=o==null||(u=o[a.id])===null||u===void 0?void 0:u.results)!==null&&g!==void 0?g:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:p.b,currentPage:(s=o==null||(h=o[a.id])===null||h===void 0?void 0:h.page)!==null&&s!==void 0?s:1,entryCount:(b=o==null||(E=o[a.id])===null||E===void 0?void 0:E.count)!==null&&b!==void 0?b:0,onForward:!(o==null||(m=o[a.id])===null||m===void 0)&&m.next?function(){T(a,o[a.id].next)}:void 0,onBackward:!(o==null||(x=o[a.id])===null||x===void 0)&&x.previous?function(){T(a,o[a.id].previous)}:void 0},loading:A.includes(a.id)}))}try{C.displayName="EventDefinitionProperties",C.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:C.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(y){}var k=e("./node_modules/antd/es/input/index.js"),q={component:W,logic:p.d,paramsToProps:function(){return{syncWithUrl:!0}}};function W(){var y,g,u=Object(f.useValues)(p.d),s=u.eventDefinitions,h=u.eventDefinitionsLoading,b=u.openedDefinitionId,E=u.filters,m=Object(f.useActions)(p.d),x=m.loadEventDefinitions,a=m.setOpenedDefinition,O=m.setLocalEventDefinition,T=m.setFilters,R=Object(f.useValues)(M.a),S=R.hasDashboardCollaboration,o=R.hasIngestionTaxonomy,A=[{key:"icon",className:"definition-column-icon",render:function(t,i){return n.a.createElement(_.a,{definition:i,hideView:!0,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(t,i){return n.a.createElement(_.a,{definition:i,hideView:!0,hideIcon:!0,updateRemoteItem:function(c){return O(c)}})},sorter:function(t,i){return t.name.localeCompare(i.name)}}].concat(P()(S?[{title:"Tags",key:"tags",render:function(t,i){var l;return n.a.createElement(z.a,{tags:(l=i.tags)!==null&&l!==void 0?l:[],staticOnly:!0})}}]:[]),P()(o?[{title:"30 day volume",key:"volume_30_day",align:"right",render:function(t,i){return i.volume_30_day?Object(w.O)(i.volume_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(t,i){var l,c;return((l=t==null?void 0:t.volume_30_day)!==null&&l!==void 0?l:0)-((c=i==null?void 0:i.volume_30_day)!==null&&c!==void 0?c:0)}},{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(t,i){return i.query_usage_30_day?Object(w.O)(i.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(t,i){var l,c;return((l=t==null?void 0:t.query_usage_30_day)!==null&&l!==void 0?l:0)-((c=i==null?void 0:i.query_usage_30_day)!==null&&c!==void 0?c:0)}}]:[]));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",flexDirection:"row",alignItems:"center",width:"100%",marginBottom:"1rem"}},n.a.createElement(k.a.Search,{placeholder:"Search for events",allowClear:!0,enterButton:!0,value:E.event,style:{maxWidth:600,width:"initial"},onChange:function(t){T({event:t.target.value||""})}})),n.a.createElement($.a,{columns:A,className:"events-definition-table","data-attr":"events-definition-table",loading:h,rowKey:"id",rowStatus:function(t){return t.id===b?"highlighted":void 0},pagination:{controlled:!0,currentPage:(y=s==null?void 0:s.page)!==null&&y!==void 0?y:1,entryCount:(g=s==null?void 0:s.count)!==null&&g!==void 0?g:0,pageSize:p.a,onForward:s.next?function(){x(s.next)}:void 0,onBackward:s.previous?function(){x(s.previous)}:void 0},expandable:{expandedRowRender:function(t){return n.a.createElement(C,{definition:t})},noIndent:!0,isRowExpanded:function(t){return t.id===b?!0:-1},onRowCollapse:function(t){return t.id===b&&a(null)}},dataSource:s.results,emptyState:"No event definitions",nouns:["event","events"]}))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(N,v,e){var V=e("./node_modules/css-loader/dist/runtime/api.js");v=V(!1),v.push([N.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:flex-start}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted path{fill:var(--taxonomy-icon-muted)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{height:28px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified path{fill:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified:not(.taxonomy-icon-ph){margin-bottom:-4px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--text-muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),N.exports=v}}]);
