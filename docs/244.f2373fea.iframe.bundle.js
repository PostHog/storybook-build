(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{"./frontend/src/scenes/groups/Groups.tsx":function(R,P,e){"use strict";e.r(P),e.d(P,"scene",function(){return y}),e.d(P,"Groups",function(){return A});var E=e("./node_modules/core-js/modules/es.object.to-string.js"),D=e("./node_modules/core-js/modules/es.regexp.to-string.js"),h=e("./node_modules/core-js/modules/es.object.keys.js"),u=e("./node_modules/react/index.js"),n=e.n(u),_=e("./node_modules/kea/lib/index.esm.js"),j=e("./frontend/src/scenes/groups/groupsListLogic.ts"),T=e("./frontend/src/lib/components/PropertiesTable.tsx"),g=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),x=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),O=e("./frontend/src/lib/components/LemonTable/index.ts"),I=e("./frontend/src/lib/components/Link.tsx"),M=e("./frontend/src/scenes/urls.ts"),a=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),v=e("./frontend/src/lib/components/PayGatePage/PayGatePage.tsx"),b=e("./frontend/src/types.ts");function i(r){var o=r.access,s,t;return o===a.a.NoAccess?(s=n.a.createElement(n.a.Fragment,null,"Introducing ",n.a.createElement("span",{className:"highlight"},"Group Analytics"),"!"),t=n.a.createElement(n.a.Fragment,null,"Analyze how groups interact with your product as a whole instead of individual users (e.g. retention by companies instead of by users)")):o===a.a.HasAccess?(s=n.a.createElement(n.a.Fragment,null,"You're almost done!"),t=n.a.createElement(n.a.Fragment,null,"Learn how to track groups in your code")):(s=n.a.createElement(n.a.Fragment,null,"Looks like you're tracking groups!"),t=n.a.createElement(n.a.Fragment,null,"Upgrade today to use groups in Insights.")),n.a.createElement(v.a,{header:s,featureKey:b.d.GROUP_ANALYTICS,caption:t,docsLink:"https://posthog.com/docs/user-guides/group-analytics",hideUpgradeButton:o===a.a.HasAccess})}try{i.displayName="GroupsIntroduction",i.__docgenInfo={description:"",displayName:"GroupsIntroduction",props:{access:{defaultValue:null,description:"",name:"access",required:!0,type:{name:"enum",value:[{value:"1"},{value:"2"},{value:"3"}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"]={docgenInfo:i.__docgenInfo,name:"GroupsIntroduction",path:"frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"})}catch(r){}var c=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),y={component:A,logic:j.a};function A(){var r=Object(_.useValues)(j.a),o=r.currentTabName,s=r.groups,t=r.groupsLoading,p=Object(_.useActions)(j.a),m=p.loadGroups,L=Object(_.useValues)(a.b),f=L.groupsAccessStatus;if(f==a.a.HasAccess||f==a.a.HasGroupTypes||f==a.a.NoAccess)return n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,null),n.a.createElement(i,{access:f}));var C=[{title:o,key:"group_key",render:function(G,d){return n.a.createElement(I.a,{to:M.a.group(d.group_type_index.toString(),d.group_key)},Object(c.b)(d.group_key,d.group_properties))}},{title:"First seen",key:"created_at",render:function(G,d){return n.a.createElement(x.b,{time:d.created_at})}}];return n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,null),n.a.createElement(O.a,{columns:C,rowKey:"group_key",loading:t,dataSource:s.results,expandable:{expandedRowRender:function(G){var d=G.group_properties;return n.a.createElement(T.a,{properties:d})},rowExpandable:function(G){var d=G.group_properties;return!!d&&Object.keys(d).length>0}},pagination:{controlled:!0,onBackward:s.previous?function(){m(s.previous),window.scrollTo(0,0)}:void 0,onForward:s.next?function(){m(s.next),window.scrollTo(0,0)}:void 0}}))}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(R,P,e){"use strict";e.d(P,"a",function(){return A});var E=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),D=e.n(E),h=e("./node_modules/@babel/runtime/regenerator/index.js"),u=e.n(h),n=e("./node_modules/core-js/modules/es.array.iterator.js"),_=e.n(n),j=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e.n(j),g=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),x=e.n(g),O=e("./node_modules/core-js/modules/es.array.concat.js"),I=e.n(O),M=e("./node_modules/kea/lib/index.esm.js"),a=e("./frontend/src/lib/api.ts"),v=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),b=e("./frontend/src/lib/utils.tsx"),i=e("./frontend/src/scenes/teamLogic.tsx"),c=e("./frontend/src/scenes/urls.ts"),y=e("./frontend/src/models/groupsModel.ts"),A=Object(M.kea)({path:["groups","groupsListLogic"],connect:{values:[i.a,["currentTeamId"],y.a,["groupTypes","aggregationLabel"],v.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(s){return{url:s}},setTab:function(s){return{tab:s}}}},loaders:function(o){var s=o.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var t=D()(u.a.mark(function m(L){var f;return u.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(f=L.url,!s.groupsEnabled){l.next=6;break}return f=f||"api/projects/".concat(s.currentTeamId,"/groups/?group_type_index=").concat(s.currentTab),l.next=5,a.b.get(f);case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}},m)}));function p(m){return t.apply(this,arguments)}return p}()}]}},reducers:{currentTab:["-1",{setTab:function(o,s){var t=s.tab;return t}}]},selectors:{currentTabName:[function(r){return[r.currentTab,r.groupTypes,r.aggregationLabel]},function(r,o,s){return r==="-1"?"Persons":o!=null&&o.length?Object(b.j)(s(parseInt(r)).singular):""}],breadcrumbs:[function(r){return[r.currentTabName,r.currentTab]},function(r,o){return[{name:r,path:c.a.groups(o)}]}]},actionToUrl:function(){return{setTab:function(s){var t=s.tab;return t!=="-1"?c.a.groups(t):c.a.persons()}}},urlToAction:function(o){var s=o.actions,t=o.values;return{"/groups/:id":function(m){var L=m.id;L&&(s.setTab(L),s.loadGroups())},"/persons":function(){t.currentTab!=="-1"&&s.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(R,P,e){"use strict";e.d(P,"a",function(){return a});var E=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/lib/components/PageHeader.tsx"),h=e("./node_modules/react/index.js"),u=e.n(h),n=e("./node_modules/core-js/modules/es.array.includes.js"),_=e("./node_modules/core-js/modules/es.string.includes.js"),j=e("./node_modules/core-js/modules/es.array.map.js"),T=e("./node_modules/antd/es/tabs/index.js"),g=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),x=e("./frontend/src/lib/utils.tsx"),O=e("./frontend/src/models/groupsModel.ts"),I=e("./frontend/src/scenes/groups/groupsListLogic.ts");function M(){var v=Object(E.useActions)(I.a),b=v.setTab,i=Object(E.useValues)(I.a),c=i.currentTab,y=Object(E.useValues)(O.a),A=y.groupTypes,r=y.aggregationLabel,o=Object(E.useValues)(g.b),s=o.groupsAccessStatus,t=[g.a.HasAccess,g.a.HasGroupTypes,g.a.NoAccess].includes(s);return u.a.createElement(T.a,{activeKey:c,onChange:function(m){return b(m)}},u.a.createElement(T.a.TabPane,{tab:"Persons",key:"-1"}),t?u.a.createElement(T.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):A.map(function(p){return u.a.createElement(T.a.TabPane,{tab:Object(x.j)(r(p.group_type_index).plural),key:p.group_type_index})}))}function a(v){var b=v.hideGroupTabs,i=Object(E.useValues)(O.a),c=i.showGroupsOptions;return u.a.createElement(u.a.Fragment,null,u.a.createElement(D.a,{title:"Persons".concat(c?" & Groups":""),caption:"A catalog of your product's end users".concat(c?" and groups":"",".")}),!b&&c&&u.a.createElement(M,null))}try{a.displayName="PersonPageHeader",a.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:a.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(v){}}}]);
