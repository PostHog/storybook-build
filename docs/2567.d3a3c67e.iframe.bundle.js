"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[2567],{"./frontend/src/scenes/notebooks/NotebooksScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NotebooksScene:()=>NotebooksScene,scene:()=>scene});__webpack_require__("./frontend/src/scenes/notebooks/NotebookScene.scss");var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonMenu=__webpack_require__("./frontend/src/lib/lemon-ui/LemonMenu/index.ts"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),LemonSelectMultiple=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSelectMultiple/index.ts"),es=__webpack_require__("./node_modules/.pnpm/posthog-js@1.93.1/node_modules/posthog-js/dist/es.js"),types=__webpack_require__("./frontend/src/types.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const fromNodeTypeToLabel={[types.Cz.FeatureFlag]:"Feature flags",[types.Cz.FeatureFlagCodeExample]:"Feature flag Code Examples",[types.Cz.Experiment]:"Experiments",[types.Cz.EarlyAccessFeature]:"Early Access Features",[types.Cz.Survey]:"Surveys",[types.Cz.Image]:"Images",[types.Cz.Person]:"Persons",[types.Cz.Query]:"Queries",[types.Cz.Recording]:"Session recordings",[types.Cz.RecordingPlaylist]:"Session replay playlists",[types.Cz.ReplayTimestamp]:"Session recording comments",[types.Cz.Cohort]:"Cohorts",[types.Cz.Group]:"Groups"};function ContainsTypeFilters(_ref){let{filters,setFilters}=_ref;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"Containing:"}),(0,jsx_runtime.jsx)(LemonSelectMultiple.E,{mode:"multiple",selectClassName:"min-w-40",placeholder:"Any content",options:Object.entries(fromNodeTypeToLabel).filter((entry=>""!==entry[1])).reduce(((acc,_ref2)=>{let[type,label]=_ref2;return acc[type]={label},acc}),{}),value:filters.contains,onChange:newValue=>{es.ZP.capture("notebook containing filter applied"),setFilters({contains:newValue.map((x=>x))})},"data-attr":"notebooks-list-contains-filters"})]})}try{ContainsTypeFilters.displayName="ContainsTypeFilters",ContainsTypeFilters.__docgenInfo={description:"",displayName:"ContainsTypeFilters",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"NotebooksListFilters"}},setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(selection: Partial<NotebooksListFilters>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/notebooks/NotebooksTable/ContainsTypeFilter.tsx#ContainsTypeFilters"]={docgenInfo:ContainsTypeFilters.__docgenInfo,name:"ContainsTypeFilters",path:"frontend/src/scenes/notebooks/NotebooksTable/ContainsTypeFilter.tsx#ContainsTypeFilters"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),notebooksModel=__webpack_require__("./frontend/src/models/notebooksModel.ts");const DEFAULT_FILTERS={search:"",createdBy:"All users",contains:[]},notebooksTableLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","notebooks","NotebooksTable","notebooksTableLogic"]),(0,index_esm.actions)({loadNotebooks:!0,setFilters:filters=>({filters})}),(0,index_esm.connect)({values:[notebooksModel.L,["notebookTemplates"]],actions:[notebooksModel.L,["deleteNotebookSuccess"]]}),(0,index_esm.reducers)({filters:[DEFAULT_FILTERS,{setFilters:(state,_ref)=>{let{filters}=_ref;return(0,utils.hO)({...state||{},...filters})}}]}),(0,lib.loaders)((_ref2=>{let{values}=_ref2;return{notebooks:[[],{loadNotebooks:async(_,breakpoint)=>{await breakpoint(100);const contains=values.filters?.contains.map((type=>({type,attrs:{}})))||void 0,createdByForQuery=values.filters?.createdBy===DEFAULT_FILTERS.createdBy?void 0:values.filters?.createdBy,res=await api.ZP.notebooks.list(contains,createdByForQuery,values.filters?.search);return breakpoint(),res.results}}]}})),(0,index_esm.listeners)((_ref3=>{let{actions}=_ref3;return{setFilters:()=>{actions.loadNotebooks()},deleteNotebookSuccess:()=>{actions.loadNotebooks()}}})),(0,index_esm.selectors)({notebooksAndTemplates:[s=>[s.notebooks,s.notebookTemplates,s.filters],(notebooks,notebookTemplates,filters)=>[...(0,utils.h0)(filters,DEFAULT_FILTERS)?notebookTemplates:[],...notebooks]]})]);var membersLogic=__webpack_require__("./frontend/src/scenes/organization/membersLogic.tsx"),notebookPanelLogic=__webpack_require__("./frontend/src/scenes/notebooks/NotebookPanel/notebookPanelLogic.ts");function NotebooksTable(){const{notebooksAndTemplates,filters,notebooksLoading,notebookTemplates}=(0,index_esm.useValues)(notebooksTableLogic),{loadNotebooks,setFilters}=(0,index_esm.useActions)(notebooksTableLogic),{meFirstMembers}=(0,index_esm.useValues)(membersLogic.m),{selectNotebook}=(0,index_esm.useActions)(notebookPanelLogic.F);(0,react.useEffect)((()=>{loadNotebooks()}),[]);const columns=[{title:"Title",dataIndex:"title",width:"100%",render:function Render(title,_ref){let{short_id,is_template}=_ref;return(0,jsx_runtime.jsxs)(Link.r,{"data-attr":"notebook-title",to:urls.j.notebook(short_id),className:"font-semibold flex items-center gap-2",children:[title||"Untitled",is_template&&(0,jsx_runtime.jsx)(src.LemonTag,{type:"highlight",children:"TEMPLATE"})]})},sorter:(a,b)=>{var _a$title,_b$title;return(null!==(_a$title=a.title)&&void 0!==_a$title?_a$title:"Untitled").localeCompare(null!==(_b$title=b.title)&&void 0!==_b$title?_b$title:"Untitled")}},(0,columnUtils.JB)(),(0,columnUtils.rw)(),{render:function Render(_,notebook){return(0,jsx_runtime.jsx)(LemonMenu.d,{items:[{items:[{label:"Delete",icon:(0,jsx_runtime.jsx)(icons.Fzz,{}),status:"danger",onClick:()=>{notebooksModel.L.actions.deleteNotebook(notebook.short_id,notebook?.title)}}]}],actionable:!0,children:(0,jsx_runtime.jsx)(src.LemonButton,{"aria-label":"more",icon:(0,jsx_runtime.jsx)(icons.YRX,{}),status:"stealth",size:"small"})})}}];return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",action:{onClick:()=>{selectNotebook(notebookTemplates[0].short_id)},children:"Get started"},dismissKey:"notebooks-preview-banner",children:[(0,jsx_runtime.jsx)("b",{children:"Welcome to Notebooks"})," - a great way to bring Insights, Replays, Feature Flags and many more PostHog products together into one place."]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap",children:[(0,jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for notebooks",onChange:s=>{setFilters({search:s})},value:filters.search,"data-attr":"notebooks-search"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,jsx_runtime.jsx)(ContainsTypeFilters,{filters,setFilters}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"Created by:"}),(0,jsx_runtime.jsx)(src.LemonSelect,{options:[{value:DEFAULT_FILTERS.createdBy,label:DEFAULT_FILTERS.createdBy},...meFirstMembers.map((x=>({value:x.user.uuid,label:x.user.first_name})))],size:"small",value:filters.createdBy,onChange:v=>{setFilters({createdBy:v||DEFAULT_FILTERS.createdBy})},dropdownMatchSelectWidth:!1})]})]})]}),(0,jsx_runtime.jsx)(LemonTable.g,{"data-attr":"notebooks-table",pagination:{pageSize:100},dataSource:notebooksAndTemplates,rowKey:"short_id",columns,loading:notebooksLoading,defaultSorting:{columnKey:"-created_at",order:1},emptyState:"No notebooks matching your filters!",nouns:["notebook","notebooks"]})]})}const scene={component:NotebooksScene};function NotebooksScene(){return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:["Notebooks",(0,jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase",children:"Beta"})]}),buttons:(0,jsx_runtime.jsx)(src.LemonButton,{"data-attr":"new-notebook",to:urls.j.notebook("new"),type:"primary",children:"New notebook"})}),(0,jsx_runtime.jsx)(NotebooksTable,{})]})}}}]);