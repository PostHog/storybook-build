(window.webpackJsonp=window.webpackJsonp||[]).push([[237],{4337:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createdAtColumn})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createdByColumn}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_TimezoneAware__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(292),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1841),antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(367),_ProfilePicture__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(448);function createdAtColumn(){return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_2__.a)("Created"),render:function RenderCreatedAt(_,item){return item.created_at?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{whiteSpace:"nowrap"}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_TimezoneAware__WEBPACK_IMPORTED_MODULE_1__.b,{time:item.created_at})):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{style:{color:"var(--muted)"}},"—")},sorter:function sorter(a,b){return new Date(a.created_at||0)>new Date(b.created_at||0)?1:-1}}}function createdByColumn(){return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_2__.a)("Created by"),render:function Render(_,item){var created_by=item.created_by;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{align:"middle",wrap:!1},created_by&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ProfilePicture__WEBPACK_IMPORTED_MODULE_4__.a,{name:created_by.first_name,email:created_by.email,size:"md"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{maxWidth:250,width:"auto",verticalAlign:"middle",marginLeft:created_by?8:0,color:created_by?void 0:"var(--muted)"}},created_by?created_by.first_name||created_by.email:"—"))},sorter:function sorter(a,b){var _a$created_by,_a$created_by2,_b$created_by,_b$created_by2;return((null===(_a$created_by=a.created_by)||void 0===_a$created_by?void 0:_a$created_by.first_name)||(null===(_a$created_by2=a.created_by)||void 0===_a$created_by2?void 0:_a$created_by2.email)||"").localeCompare((null===(_b$created_by=b.created_by)||void 0===_b$created_by?void 0:_b$created_by.first_name)||(null===(_b$created_by2=b.created_by)||void 0===_b$created_by2?void 0:_b$created_by2.email)||"")}}}},4353:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return More}));var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(123),_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41);function More(_ref){var overlay=_ref.overlay,_useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),visible=_useState2[0],setVisible=_useState2[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(___WEBPACK_IMPORTED_MODULE_2__.a,{compact:!0,"data-attr":"more-button",icon:react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_icons__WEBPACK_IMPORTED_MODULE_3__.IconEllipsis,null),type:"stealth",onClick:function onClick(e){setVisible((function(state){return!state})),e.stopPropagation()},popup:{visible:visible,onClickOutside:function onClickOutside(){return setVisible(!1)},onClickInside:function onClickInside(){return setVisible(!1)},placement:"bottom-end",actionable:!0,overlay:overlay}})}try{More.displayName="More",More.__docgenInfo={description:"",displayName:"More",props:{overlay:{defaultValue:null,description:"Content of the overlay.",name:"overlay",required:!0,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonButton/More.tsx#More"]={docgenInfo:More.__docgenInfo,name:"More",path:"frontend/src/lib/components/LemonButton/More.tsx#More"})}catch(__react_docgen_typescript_loader_error){}},4723:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"FeatureFlags",(function(){return FeatureFlags}));__webpack_require__(64),__webpack_require__(289);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),featureFlagsLogic=__webpack_require__(1178),input=__webpack_require__(547),Link=__webpack_require__(63),utils=__webpack_require__(10),PlusOutlined=__webpack_require__(1836),PageHeader=__webpack_require__(337),PropertyFilterButton=(__webpack_require__(34),__webpack_require__(862)),PropertyFiltersDisplay_PropertyFiltersDisplay=function PropertyFiltersDisplay(_ref){var filters=_ref.filters,style=_ref.style;return react_default.a.createElement("div",{className:"mb",style:style},filters&&filters.map((function(item){return react_default.a.createElement(PropertyFilterButton.b,{key:item.key,item:item})})))},components_PropertyFiltersDisplay=PropertyFiltersDisplay_PropertyFiltersDisplay;try{PropertyFiltersDisplay_PropertyFiltersDisplay.displayName="PropertyFiltersDisplay",PropertyFiltersDisplay_PropertyFiltersDisplay.__docgenInfo={description:"",displayName:"PropertyFiltersDisplay",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"AnyPropertyFilter[]"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx#PropertyFiltersDisplay"]={docgenInfo:PropertyFiltersDisplay_PropertyFiltersDisplay.__docgenInfo,name:"PropertyFiltersDisplay",path:"frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx#PropertyFiltersDisplay"})}catch(__react_docgen_typescript_loader_error){}var LinkButton=__webpack_require__(383),Table_utils=__webpack_require__(1841),urls=__webpack_require__(23),stringWithWBR=__webpack_require__(2504),teamLogic=__webpack_require__(27),LemonButton=__webpack_require__(123),LemonRow=__webpack_require__(214),LemonSwitch=__webpack_require__(866),LemonTable=__webpack_require__(855),More=__webpack_require__(4353),columnUtils=__webpack_require__(4337),scene={component:FeatureFlags,logic:featureFlagsLogic.a};function FeatureFlags(){var currentTeamId=Object(index_esm.useValues)(teamLogic.a).currentTeamId,_useValues2=Object(index_esm.useValues)(featureFlagsLogic.a),featureFlagsLoading=_useValues2.featureFlagsLoading,searchedFeatureFlags=_useValues2.searchedFeatureFlags,searchTerm=_useValues2.searchTerm,_useActions=Object(index_esm.useActions)(featureFlagsLogic.a),updateFeatureFlag=_useActions.updateFeatureFlag,loadFeatureFlags=_useActions.loadFeatureFlags,setSearchTerm=_useActions.setSearchTerm,columns=[{title:Object(Table_utils.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"15%",sorter:function sorter(a,b){return(a.key||"").localeCompare(b.key||"")},render:function Render(_,featureFlag){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Link.a,{to:featureFlag.id?urls.a.featureFlag(featureFlag.id):void 0},react_default.a.createElement("h4",{className:"row-name"},Object(stringWithWBR.a)(featureFlag.key,17))),featureFlag.name&&react_default.a.createElement("span",{className:"row-description"},featureFlag.name))}},Object(columnUtils.b)(),Object(columnUtils.a)(),{title:"Release conditions",render:function Render(_,featureFlag){var _featureFlag$filters;return(null===(_featureFlag$filters=featureFlag.filters)||void 0===_featureFlag$filters?void 0:_featureFlag$filters.groups)?featureFlag.filters.groups.length>1?"Multiple groups":function GroupFilters(_ref){var group=_ref.group;return group.properties&&group.properties.length>0&&null!=group.rollout_percentage?react_default.a.createElement("div",{style:{display:"flex",alignItems:"center"}},react_default.a.createElement("span",{style:{flexShrink:0,marginRight:5}},group.rollout_percentage,"% of"),react_default.a.createElement(components_PropertyFiltersDisplay,{filters:group.properties,style:{margin:0,width:"100%"}})):group.properties&&group.properties.length>0?react_default.a.createElement(components_PropertyFiltersDisplay,{filters:group.properties,style:{margin:0}}):null!==group.rollout_percentage&&void 0!==group.rollout_percentage?"".concat(group.rollout_percentage,"% of all users"):"100% of all users"}({group:featureFlag.filters.groups[0]}):"N/A"}},{title:"Status",sorter:function sorter(a,b){return Number(a.active)-Number(b.active)},width:90,render:function RenderActive(_,featureFlag){var switchId="feature-flag-".concat(featureFlag.id,"-switch");return react_default.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},react_default.a.createElement("label",{htmlFor:switchId},featureFlag.active?"Enabled":"Disabled"),react_default.a.createElement(LemonSwitch.a,{id:switchId,checked:featureFlag.active,onChange:function onChange(active){return featureFlag.id?updateFeatureFlag({id:featureFlag.id,payload:{active:active}}):null},style:{marginLeft:"0.5rem"}}))}},{width:0,render:function Render(_,featureFlag){return react_default.a.createElement(More.a,{overlay:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(LemonButton.a,{type:"stealth",onClick:function onClick(){Object(utils.p)(featureFlag.key,"feature flag key")},fullWidth:!0},"Copy key"),react_default.a.createElement(LemonButton.a,{type:"stealth",to:"/feature_flags/".concat(featureFlag.id),fullWidth:!0},"Edit"),react_default.a.createElement(LemonButton.a,{type:"stealth",to:'/insights?events=[{"id":"$pageview","name":"$pageview","type":"events","math":"dau"}]&breakdown_type=event&breakdown=$feature/'.concat(featureFlag.key),"data-attr":"usage",fullWidth:!0},"Use in Insights"),react_default.a.createElement(LemonRow.b,null),featureFlag.id&&react_default.a.createElement(LemonButton.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function onClick(){Object(utils.t)({endpoint:"projects/".concat(currentTeamId,"/feature_flags"),object:{name:featureFlag.name,id:featureFlag.id},callback:loadFeatureFlags})},fullWidth:!0},"Delete feature flag"))})}}];return react_default.a.createElement("div",{className:"feature_flags"},react_default.a.createElement(PageHeader.a,{title:"Feature Flags",caption:"Feature flags are a way of turning functionality in your app on or off, based on user properties."}),react_default.a.createElement("div",null,react_default.a.createElement(input.a.Search,{allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value)}}),react_default.a.createElement("div",{className:"mb float-right"},react_default.a.createElement(LinkButton.a,{type:"primary",to:urls.a.featureFlag("new"),"data-attr":"new-feature-flag",icon:react_default.a.createElement(PlusOutlined.a,null)},"New Feature Flag"))),react_default.a.createElement(LemonTable.a,{dataSource:searchedFeatureFlags,columns:columns,rowKey:"key",loading:featureFlagsLoading,defaultSorting:{columnIndex:2,order:1},pagination:{pageSize:20},"data-attr":"feature-flag-table"}))}}}]);