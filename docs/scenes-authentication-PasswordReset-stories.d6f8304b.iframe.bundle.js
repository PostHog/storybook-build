(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[16680,3948],{"../../frontend/src/scenes/authentication/PasswordReset.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Initial:()=>Initial,NoSMTP:()=>NoSMTP,Success:()=>Success,Throttled:()=>Throttled,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_authentication_passwordResetLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/scenes/authentication/passwordResetLogic.ts"),_mocks_browser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/mocks/browser.tsx"),_mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/mocks/fixtures/_preflight.json"),_PasswordReset__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/authentication/PasswordReset.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let __WEBPACK_DEFAULT_EXPORT__={title:"Scenes-Other/Password Reset",parameters:{layout:"fullscreen",viewMode:"story"}},NoSMTP=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_2__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_3__,cloud:!1,realm:"hosted-clickhouse",available_social_auth_providers:{github:!1,gitlab:!1,"google-oauth2":!1,saml:!1},email_service_available:!1}}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_PasswordReset__WEBPACK_IMPORTED_MODULE_4__.PasswordReset,{})),Initial=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_2__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_3__,cloud:!1,realm:"hosted-clickhouse",available_social_auth_providers:{github:!1,gitlab:!1,"google-oauth2":!1,saml:!1},email_service_available:!0}},post:{"/api/reset":{}}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_PasswordReset__WEBPACK_IMPORTED_MODULE_4__.PasswordReset,{})),Success=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_2__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_3__,cloud:!1,realm:"hosted-clickhouse",available_social_auth_providers:{github:!1,gitlab:!1,"google-oauth2":!1,saml:!1},email_service_available:!0}},post:{"/api/reset":{}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{scenes_authentication_passwordResetLogic__WEBPACK_IMPORTED_MODULE_1__.a.actions.setRequestPasswordResetValues({email:"test@posthog.com"}),scenes_authentication_passwordResetLogic__WEBPACK_IMPORTED_MODULE_1__.a.actions.submitRequestPasswordResetSuccess({email:"test@posthog.com"})},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_PasswordReset__WEBPACK_IMPORTED_MODULE_4__.PasswordReset,{})),Throttled=()=>((0,_mocks_browser__WEBPACK_IMPORTED_MODULE_2__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_3__,cloud:!1,realm:"hosted-clickhouse",available_social_auth_providers:{github:!1,gitlab:!1,"google-oauth2":!1,saml:!1},email_service_available:!0}},post:{"/api/reset":{}}}),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{scenes_authentication_passwordResetLogic__WEBPACK_IMPORTED_MODULE_1__.a.actions.setRequestPasswordResetValues({email:"test@posthog.com"}),scenes_authentication_passwordResetLogic__WEBPACK_IMPORTED_MODULE_1__.a.actions.setRequestPasswordResetManualErrors({code:"throttled"})},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_PasswordReset__WEBPACK_IMPORTED_MODULE_4__.PasswordReset,{}));NoSMTP.parameters={...NoSMTP.parameters,docs:{...NoSMTP.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: false,\n        realm: 'hosted-clickhouse',\n        available_social_auth_providers: {\n          github: false,\n          gitlab: false,\n          'google-oauth2': false,\n          saml: false\n        },\n        email_service_available: false\n      }\n    }\n  });\n  return <PasswordReset />;\n}",...NoSMTP.parameters?.docs?.source}}},Initial.parameters={...Initial.parameters,docs:{...Initial.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: false,\n        realm: 'hosted-clickhouse',\n        available_social_auth_providers: {\n          github: false,\n          gitlab: false,\n          'google-oauth2': false,\n          saml: false\n        },\n        email_service_available: true\n      }\n    },\n    post: {\n      '/api/reset': {}\n    }\n  });\n  return <PasswordReset />;\n}",...Initial.parameters?.docs?.source}}},Success.parameters={...Success.parameters,docs:{...Success.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: false,\n        realm: 'hosted-clickhouse',\n        available_social_auth_providers: {\n          github: false,\n          gitlab: false,\n          'google-oauth2': false,\n          saml: false\n        },\n        email_service_available: true\n      }\n    },\n    post: {\n      '/api/reset': {}\n    }\n  });\n  useEffect(() => {\n    passwordResetLogic.actions.setRequestPasswordResetValues({\n      email: 'test@posthog.com'\n    });\n    passwordResetLogic.actions.submitRequestPasswordResetSuccess({\n      email: 'test@posthog.com'\n    });\n  }, []);\n  return <PasswordReset />;\n}",...Success.parameters?.docs?.source}}},Throttled.parameters={...Throttled.parameters,docs:{...Throttled.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useStorybookMocks({\n    get: {\n      '/_preflight': {\n        ...preflightJson,\n        cloud: false,\n        realm: 'hosted-clickhouse',\n        available_social_auth_providers: {\n          github: false,\n          gitlab: false,\n          'google-oauth2': false,\n          saml: false\n        },\n        email_service_available: true\n      }\n    },\n    post: {\n      '/api/reset': {}\n    }\n  });\n  useEffect(() => {\n    passwordResetLogic.actions.setRequestPasswordResetValues({\n      email: 'test@posthog.com'\n    });\n    passwordResetLogic.actions.setRequestPasswordResetManualErrors({\n      code: 'throttled'\n    });\n  }, []);\n  return <PasswordReset />;\n}",...Throttled.parameters?.docs?.source}}};let __namedExportsOrder=["NoSMTP","Initial","Success","Throttled"]},"../../frontend/src/lib/components/BridgePage/BridgePage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>BridgePage_BridgePage_BridgePage});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),BridgePage=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.2_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/components/BridgePage/BridgePage.scss"),BridgePage_default=__webpack_require__.n(BridgePage),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(BridgePage_default(),options),BridgePage_default().locals;var clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),CSSTransition=__webpack_require__("../../node_modules/.pnpm/react-transition-group@4.4.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/react-transition-group/esm/CSSTransition.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts");let posthog_logo=__webpack_require__.p+"images/posthog-logo.1e8f704e9f5c893139d4ad8dcb7e2954.svg",posthog_logo_cloud=__webpack_require__.p+"images/posthog-logo-cloud.ff39f38d10e1d8769248bd773fc42a24.svg",posthog_logo_demo=__webpack_require__.p+"images/posthog-logo-demo.a5b7691e421e187226625869bf85673a.svg";var preflightLogic=__webpack_require__("../../frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function WelcomeLogo(_ref){let{view}=_ref,UTM_TAGS=`utm_campaign=in-product&utm_tag=${view||"welcome"}-header`,{preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,jsx_runtime.jsx)(src.rU,{to:`https://posthog.com?${UTM_TAGS}`,className:"flex flex-col items-center mb-8",children:(0,jsx_runtime.jsx)("img",{src:preflight?.demo?posthog_logo_demo:preflight?.cloud?posthog_logo_cloud:posthog_logo,alt:`PostHog${preflight?.cloud?" Cloud":""}`,className:"h-6"})})}var types=__webpack_require__("../../frontend/src/types.ts"),hedgehogs=__webpack_require__("../../frontend/src/lib/components/hedgehogs.tsx");function BridgePage_BridgePage_BridgePage(_ref){let{children,header,footer,view,message,noLogo=!1,sideLogo=!1,fixedWidth=!0,leftContainerContent,hedgehog=!1}=_ref,[messageShowing,setMessageShowing]=(0,react.useState)(!1),{preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,react.useEffect)(()=>{let t=setTimeout(()=>{setMessageShowing(!0)},200);return()=>clearTimeout(t)},[]),(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("BridgePage",fixedWidth&&"BridgePage--fixed-width"),children:[(0,jsx_runtime.jsxs)("div",{className:"BridgePage__main",children:[leftContainerContent||hedgehog?(0,jsx_runtime.jsx)("div",{className:"BridgePage__left-wrapper",children:(0,jsx_runtime.jsxs)("div",{className:"BridgePage__left",children:[!noLogo&&sideLogo&&(0,jsx_runtime.jsx)("div",{className:"BridgePage__header-logo mb-16",children:(0,jsx_runtime.jsx)(WelcomeLogo,{view:view})}),leftContainerContent&&leftContainerContent,hedgehog&&(0,jsx_runtime.jsxs)("div",{className:"BridgePage__left__art",children:[preflight?.region===types.yp.EU?(0,jsx_runtime.jsx)(hedgehogs.LaptopHogEU,{alt:"",draggable:"false"}):(0,jsx_runtime.jsx)(hedgehogs.LaptopHog4,{alt:"",draggable:"false"}),message?(0,jsx_runtime.jsx)(CSSTransition.Z,{in:messageShowing,timeout:200,classNames:"BridgePage__left__message-",children:(0,jsx_runtime.jsx)("div",{className:"BridgePage__left__message",children:message})}):null]})]})}):null,(0,jsx_runtime.jsxs)("div",{className:"BridgePage__content-wrapper",children:[!noLogo&&(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("BridgePage__header-logo",{mobile:sideLogo}),children:(0,jsx_runtime.jsx)(WelcomeLogo,{view:view})}),(0,jsx_runtime.jsx)("div",{className:"BridgePage__header",children:header}),(0,jsx_runtime.jsx)("div",{className:"BridgePage__content",children:children})]})]}),footer&&(0,jsx_runtime.jsx)("div",{className:"BridgePage__footer",children:footer})]})}},"../../frontend/src/scenes/authentication/PasswordReset.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PasswordReset:()=>PasswordReset,scene:()=>scene});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.11.2_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_forms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.5_react@18.2.0_/node_modules/kea-forms/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_components_BridgePage_BridgePage__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/BridgePage/BridgePage.tsx"),lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/CodeSnippet/index.ts"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),lib_lemon_ui_Spinner_Spinner__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),_passwordResetLogic__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/scenes/authentication/passwordResetLogic.ts"),_SupportModalButton__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/scenes/authentication/SupportModalButton.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:PasswordReset,logic:_passwordResetLogic__WEBPACK_IMPORTED_MODULE_11__.a};function PasswordReset(){let{preflight,preflightLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_10__.preflightLogic),{requestPasswordResetSucceeded,requestPasswordResetManualErrors}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_passwordResetLogic__WEBPACK_IMPORTED_MODULE_11__.a);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(lib_components_BridgePage_BridgePage__WEBPACK_IMPORTED_MODULE_5__.N,{view:"password-reset",footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_SupportModalButton__WEBPACK_IMPORTED_MODULE_12__.J,{}),children:[requestPasswordResetManualErrors?.code==="throttled"?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"text-center ",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__.b8,{className:"text-5xl text-danger"})}):requestPasswordResetSucceeded&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"text-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconCheckCircle,{className:"text-5xl text-success"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("h2",{children:"Reset password"}),preflightLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_lemon_ui_Spinner_Spinner__WEBPACK_IMPORTED_MODULE_9__.$,{}):preflight?.email_service_available?requestPasswordResetManualErrors?.code==="throttled"?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(ResetThrottled,{}):requestPasswordResetSucceeded?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(ResetSuccess,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(ResetForm,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(EmailUnavailable,{})]})}function EmailUnavailable(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{children:["Self-serve password reset is unavailable. Please ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("b",{children:"contact your instance administrator"})," to reset your password."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.p2,{className:"my-6"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"mt-4",children:["If you're an administrator:",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("ul",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("li",{children:["Password reset is unavailable because email service is not configured."," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.rU,{to:"https://posthog.com/docs/self-host/configure/email?utm_medium=in-product&utm_campaign=password-reset",children:"Read the docs"})," ","on how to set this up."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("li",{children:"To reset the password manually, run the following command in your instance."})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_6__.O,{language:lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_6__.S.Bash,wrap:!0,children:"python manage.py changepassword [account email]"})]})]})}function ResetForm(){let{isRequestPasswordResetSubmitting}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_passwordResetLogic__WEBPACK_IMPORTED_MODULE_11__.a);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(kea_forms__WEBPACK_IMPORTED_MODULE_3__.Form,{logic:_passwordResetLogic__WEBPACK_IMPORTED_MODULE_11__.a,formKey:"requestPasswordReset",className:"space-y-4",enableFormOnSubmit:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"text-center",children:"Enter your email address. If an account exists, you’ll receive an email with a password reset link soon."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_8__.D,{name:"email",label:"Email",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.DF,{className:"ph-ignore-input",autoFocus:!0,"data-attr":"reset-email",placeholder:"email@yourcompany.com",type:"email",disabled:isRequestPasswordResetSubmitting})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{fullWidth:!0,type:"primary",status:"alt",center:!0,htmlType:"submit","data-attr":"password-reset",loading:isRequestPasswordResetSubmitting,size:"large",children:"Continue"})]})}function ResetSuccess(){let{requestPasswordReset}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_passwordResetLogic__WEBPACK_IMPORTED_MODULE_11__.a),{push}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(kea_router__WEBPACK_IMPORTED_MODULE_4__.router);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"text-center",children:["Request received successfully! If the email ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("b",{children:requestPasswordReset?.email||"you typed"})," exists, you’ll receive an email with a reset link soon.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"mt-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"primary",status:"alt","data-attr":"back-to-login",center:!0,fullWidth:!0,onClick:()=>push("/login"),size:"large",children:"Back to login"})})]})}function ResetThrottled(){let{requestPasswordReset}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_passwordResetLogic__WEBPACK_IMPORTED_MODULE_11__.a),{push}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(kea_router__WEBPACK_IMPORTED_MODULE_4__.router);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)("div",{className:"text-center",children:["There have been too many reset requests for the email ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("b",{children:requestPasswordReset?.email||"you typed"}),". Please try again later or contact support if you think this has been a mistake.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)("div",{className:"mt-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"primary",status:"alt","data-attr":"back-to-login",center:!0,fullWidth:!0,onClick:()=>push("/login"),size:"large",children:"Back to login"})})]})}},"../../frontend/src/scenes/authentication/SupportModalButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>SupportModalButton});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.11.2_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_Support_supportLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/Support/supportLogic.ts"),scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SupportModalButton(_ref){let{name,email}=_ref,{openSupportForm}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(lib_components_Support_supportLogic__WEBPACK_IMPORTED_MODULE_3__.Pw),{preflight}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_PreflightCheck_preflightLogic__WEBPACK_IMPORTED_MODULE_4__.preflightLogic);return preflight?.cloud?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"text-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{onClick:()=>{openSupportForm({name,email,kind:"bug",target_area:"login"})},icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconBug,{}),size:"small",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:"text-secondary",children:"Report an issue"})})})}):null}},"../../frontend/src/scenes/authentication/passwordResetLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>passwordResetLogic});var _sentry_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/@sentry+core@7.112.1/node_modules/@sentry/core/esm/exports.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.5_react@18.2.0_/node_modules/kea-forms/lib/index.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_components_PasswordStrength__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/PasswordStrength.tsx"),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonToast/LemonToast.tsx");let passwordResetLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","authentication","passwordResetLogic"]),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_2__.loaders)(()=>({validatedResetToken:[null,{validateResetToken:async _ref=>{let{uuid,token}=_ref;try{return await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.get(`api/reset/${uuid}/?token=${token}`),{success:!0,token,uuid}}catch(e){return{success:!1,errorCode:e.code,errorDetail:e.detail}}}}]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({requestPasswordResetSucceeded:[!1,{submitRequestPasswordResetSuccess:()=>!0}],passwordResetSucceeded:[!1,{submitPasswordResetSuccess:()=>!0}]}),(0,kea_forms__WEBPACK_IMPORTED_MODULE_1__.forms)(_ref2=>{let{values,actions}=_ref2;return{requestPasswordReset:{defaults:{},errors:_ref3=>{let{email}=_ref3;return{email:email?void 0:"Please enter your email to continue"}},submit:async(_ref4,breakpoint)=>{let{email}=_ref4;breakpoint();try{await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.create("api/reset/",{email})}catch(e){var _e$detail;throw actions.setRequestPasswordResetManualErrors({email:null!==(_e$detail=e.detail)&&void 0!==_e$detail?_e$detail:"An error occurred"}),(0,_sentry_react__WEBPACK_IMPORTED_MODULE_7__.Tb)("Failed to reset password",{extra:{error:e}}),e}}},passwordReset:{defaults:{},errors:_ref5=>{let{password,passwordConfirm}=_ref5;return{password:password?values.validatedPassword.feedback:"Please enter your password to continue",passwordConfirm:passwordConfirm?password!==passwordConfirm?"Passwords do not match":void 0:"Please confirm your password to continue"}},submit:async(_ref6,breakpoint)=>{let{password}=_ref6;if(await breakpoint(150),values.validatedResetToken?.token&&values.validatedResetToken.uuid)try{await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.create(`api/reset/${values.validatedResetToken.uuid}/`,{password,token:values.validatedResetToken.token}),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_6__.UJ.success("Your password has been changed. Redirecting…"),await breakpoint(3e3),window.location.href="/"}catch(e){throw actions.setPasswordResetManualErrors({password:e.detail}),e}}}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({validatedPassword:[s=>[s.passwordReset],_ref7=>{let{password}=_ref7;return(0,lib_components_PasswordStrength__WEBPACK_IMPORTED_MODULE_5__.u)(password)}]}),(0,kea_router__WEBPACK_IMPORTED_MODULE_3__.urlToAction)(_ref8=>{let{actions}=_ref8;return{"/reset/:uuid/:token":_ref9=>{let{uuid,token}=_ref9;token&&uuid&&actions.validateResetToken({uuid,token})}}})])},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.2_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/components/BridgePage/BridgePage.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,'.BridgePage{background-color:var(--bg-bridge);display:flex;flex:1;flex-direction:column;height:100vh;overflow:scroll;position:relative;-ms-overflow-style:none}.BridgePage::-webkit-scrollbar{width:0!important}.BridgePage .BridgePage__main{align-items:center;display:flex;flex:1;justify-content:center;padding:1rem}.BridgePage .BridgePage__content-wrapper{max-width:380px;width:100%}@media screen and (min-width:768px){.BridgePage .BridgePage__content-wrapper{max-width:100%;width:auto}}.BridgePage .BridgePage__left-wrapper{display:none;margin-right:60px}@media screen and (min-width:768px){.BridgePage .BridgePage__left-wrapper{display:block;visibility:visible}}.BridgePage .BridgePage__content{background-color:#fff;border-radius:var(--radius);box-shadow:var(--shadow-elevation-3000);padding:2rem;position:relative;width:100%}.BridgePage .BridgePage__content h2{font-weight:700;text-align:center}.BridgePage .BridgePage__footer{color:var(--text-secondary);display:flex;font-weight:500;gap:10%;justify-content:center;margin:1rem 0;width:100%}.BridgePage .BridgePage__left{display:none;position:relative;visibility:none}.BridgePage .BridgePage__left img{height:300px}.BridgePage .BridgePage__left .BridgePage__left__art{margin-top:50px}.BridgePage .BridgePage__left .BridgePage__left__message{background-color:var(--text-3000);border-radius:.75rem;bottom:220px;color:#fff;font-size:.8em;font-weight:600;left:265px;max-width:150px;opacity:0;padding:.5rem .75rem;position:absolute;transition-timing-function:cubic-bezier(.455,.03,.31,1.585)}.BridgePage .BridgePage__left .BridgePage__left__message:after{border:10px solid transparent;border-left:10px solid var(--text-3000);content:" ";left:20px;margin-top:-10px;position:absolute;top:100%}.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter{opacity:0;transform:translateY(50px) rotate(0deg) scale(.5)}.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter-active,.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter-done{opacity:1;transform:translateY(0) rotate(5deg) scale(1);transition:opacity .2s,transform .2s}@media(prefers-reduced-motion){.BridgePage .BridgePage__left .BridgePage__left__message{transition:none}}@media screen and (min-width:768px){.BridgePage .BridgePage__left{display:block;visibility:visible}}.BridgePage .BridgePage__cta{max-width:400px}.BridgePage .BridgePage__header-logo.mobile{display:block}@media screen and (min-width:768px){.BridgePage .BridgePage__header-logo.mobile{display:none}.BridgePage.BridgePage--fixed-width .BridgePage__content{max-width:400px;width:400px}}',""]),module.exports=exports}}]);