(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(T,h,e){"use strict";var O=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),I=e.n(O),C=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),b=e.n(C),D={};D.insert="head",D.singleton=!1;var d=I()(b.a,D),s=b.a.locals||{}},"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(T,h,e){"use strict";e.r(h),e.d(h,"ProjectHomepage",function(){return Z}),e.d(h,"scene",function(){return ue});var O=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),I=e.n(O),C=e("./node_modules/core-js/modules/es.function.name.js"),b=e("./node_modules/core-js/modules/es.object.to-string.js"),D=e("./node_modules/core-js/modules/es.regexp.to-string.js"),d=e("./node_modules/react/index.js"),s=e.n(d),W=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),N=e("./frontend/src/lib/components/PageHeader.tsx"),w=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),o=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/scenes/teamLogic.tsx"),K=e("./frontend/src/types.ts"),x=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),A=e("./frontend/src/lib/components/LemonDivider/index.ts"),L=e("./node_modules/core-js/modules/es.array.map.js"),z=e("./node_modules/core-js/modules/es.symbol.js"),M=e("./node_modules/core-js/modules/es.symbol.description.js"),_=e("./frontend/src/models/dashboardsModel.tsx"),p=e("./frontend/src/lib/components/LemonButton/index.ts"),a=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),m=e.n(a),P=e("./node_modules/@babel/runtime/regenerator/index.js"),c=e.n(P),u=e("./frontend/src/lib/utils/eventUsageLogic.ts"),R=Object(o.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[u.e],actions:[E.a,["updateCurrentTeam"]],values:[E.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(n){return{dashboardId:n}}},selectors:{primaryDashboardId:[function(t){return[t.currentTeam]},function(t){return t==null?void 0:t.primary_dashboard}]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(n){var v=n.actions;return{setPrimaryDashboard:function(){var r=m()(c.a.mark(function i(y){var j;return c.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:j=y.dashboardId,v.updateCurrentTeam({primary_dashboard:j}),u.e.actions.reportPrimaryDashboardChanged();case 3:case"end":return f.stop()}},i)}));function l(i){return r.apply(this,arguments)}return l}(),showPrimaryDashboardModal:function(){var r=m()(c.a.mark(function i(){return c.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:u.e.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return j.stop()}},i)}));function l(){return r.apply(this,arguments)}return l}()}}}),B=e("./frontend/src/lib/components/icons.tsx"),g=e("./frontend/src/lib/components/LemonRow/index.ts"),ee=e("./frontend/src/lib/components/LemonModal/index.ts"),$=e("./frontend/src/lib/components/LemonSkeleton/index.tsx");function se(){var t=Object(o.useValues)(R),n=t.isOpen,v=t.primaryDashboardId,r=Object(o.useActions)(R),l=r.closePrimaryDashboardModal,i=r.setPrimaryDashboard,y=Object(o.useValues)(_.a),j=y.nameSortedDashboards,U=y.dashboardsLoading;return s.a.createElement(ee.a,{isOpen:n,onClose:l,title:"Select a default dashboard for the project",footer:s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:l},"Close"))},U?s.a.createElement("div",{className:"space-y-2"},s.a.createElement($.a.Row,{repeat:4})):s.a.createElement("div",{className:"space-y-2"},j.map(function(f){var H=f.id===v,F=s.a.createElement("div",{className:"flex flex-1 items-center justify-between overflow-hidden"},s.a.createElement("div",{className:"flex-1 flex flex-col justify-center overflow-hidden"},s.a.createElement("strong",null,f.name),s.a.createElement("span",{className:"text-default font-normal text-ellipsis"},f.description)),H?s.a.createElement(s.a.Fragment,null,s.a.createElement(B.IconCottage,{className:"mr-2 text-warning text-lg"}),s.a.createElement("span",null,"Default")):s.a.createElement("strong",{className:"set-default-text"},"Set as default"));return H?s.a.createElement(g.a,{key:f.id,fullWidth:!0,status:"muted",className:"dashboard-row"},F):s.a.createElement(p.a,{key:f.id,fullWidth:!0,className:"dashboard-row",onClick:function(){i(f.id),l()}},F)})))}var G=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),pe=e("./node_modules/core-js/modules/es.array.slice.js"),Y=e("./frontend/src/lib/dayjs.ts"),J=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),Q=e("./frontend/src/lib/components/ProfilePicture/index.ts"),V=e("./frontend/src/scenes/persons/PersonHeader.tsx"),X=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),S=e("./frontend/src/scenes/urls.ts"),te=e("./frontend/src/lib/utils.tsx"),ne=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx");function oe(t){var n=t.recording,v=Object(X.c)({key:"projectHomepage"}),r=Object(o.useActions)(v),l=r.openSessionPlayer,i=Object(o.useActions)(u.e),y=i.reportRecordingOpenedFromRecentRecordingList;return s.a.createElement(p.a,{fullWidth:!0,onClick:function(){l(n),y()}},s.a.createElement("div",{className:"ProjectHomePage__listrow"},s.a.createElement(Q.b,{name:Object(V.b)(n.person)}),s.a.createElement("div",{className:"ProjectHomePage__listrow__details"},s.a.createElement("div",null,Object(V.b)(n.person)),s.a.createElement("div",null,"Recorded ",Object(Y.a)(n.start_time).fromNow())),s.a.createElement("span",null,Object(te.O)(n.recording_duration)),s.a.createElement(B.IconPlayCircle,{className:"text-2xl ml-2"})))}function ae(){var t=Object(o.useValues)(E.a),n=t.currentTeam,v=Object(X.c)({key:"projectHomepage"}),r=Object(o.useValues)(v),l=r.sessionRecordings,i=r.sessionRecordingsResponseLoading;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ne.a,null),s.a.createElement(J.a,{title:"Recent recordings",viewAllURL:S.a.sessionRecordings(),loading:i,emptyMessage:n!=null&&n.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:S.a.projectSettings()+"#recordings"},items:l.slice(0,5),renderRow:function(j,U){return s.a.createElement(oe,{key:U,recording:j})}}))}var re=e("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function ie(t){var n=t.person,v=Object(o.useActions)(u.e),r=v.reportPersonOpenedFromNewlySeenPersonsList;return s.a.createElement(p.a,{fullWidth:!0,to:S.a.person(n.distinct_ids[0]),onClick:function(){r()}},s.a.createElement("div",{className:"ProjectHomePage__listrow"},s.a.createElement(Q.b,{name:Object(V.b)(n)}),s.a.createElement("div",{className:"ProjectHomePage__listrow__details"},s.a.createElement("div",null,Object(V.b)(n)),s.a.createElement("div",null,"First seen ",Object(Y.a)(n.created_at).fromNow()))))}function ce(){var t=Object(o.useValues)(G.a),n=t.persons,v=t.personsLoading;return s.a.createElement(J.a,{title:"Newly seen persons",viewAllURL:S.a.persons(),loading:v,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:n.slice(0,5),renderRow:function(l,i){return s.a.createElement(ie,{key:i,person:l})}})}var le=e("./node_modules/@react-hook/size/dist/module/index.js"),de=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),me=e("./frontend/@posthog/lemon-ui/src/index.ts");function Z(){var t=Object(o.useValues)(G.a),n=t.dashboardLogic,v=Object(o.useValues)(E.a),r=v.currentTeam,l=Object(o.useValues)(n),i=l.dashboard,y=Object(o.useActions)(x.a),j=y.showInviteModal,U=Object(o.useActions)(R),f=U.showPrimaryDashboardModal,H=Object(d.useRef)(null),F=Object(le.a)(H),k=I()(F,1),q=k[0],ge=s.a.createElement("div",{className:"flex"},s.a.createElement(p.a,{"data-attr":"project-home-invite-team-members",onClick:function(){j()},className:"mr-2",type:"secondary"},"Invite members"),s.a.createElement(de.NewInsightButton,{dataAttr:"project-home-new-insight"}));return s.a.createElement("div",{className:"project-homepage"},s.a.createElement(N.a,{title:(r==null?void 0:r.name)||"",delimited:!0,buttons:ge}),s.a.createElement("div",{ref:H,className:q&&q<600?"top-list-container-vertical":"top-list-container-horizontal"},s.a.createElement("div",{className:"top-list"},s.a.createElement(re.b,null)),s.a.createElement("div",{className:"spacer"}),s.a.createElement("div",{className:"top-list"},s.a.createElement(ce,null)),s.a.createElement("div",{className:"spacer"}),s.a.createElement("div",{className:"top-list"},s.a.createElement(ae,null))),r!=null&&r.primary_dashboard?s.a.createElement("div",null,s.a.createElement("div",{className:"homepage-dashboard-header"},s.a.createElement("div",{className:"dashboard-title-container"},!i&&s.a.createElement($.a,{className:"w-20"}),(i==null?void 0:i.name)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(B.IconCottage,{className:"mr-2 text-warning text-2xl"}),s.a.createElement(me.Link,{className:"font-semibold text-xl text-default",to:S.a.dashboard(i.id)},i==null?void 0:i.name))),s.a.createElement(p.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:f},"Change dashboard")),s.a.createElement(A.a,{className:"my-6"}),s.a.createElement(w.Dashboard,{id:r.primary_dashboard.toString(),placement:K.l.ProjectHomepage})):s.a.createElement("div",{className:"empty-state-container"},s.a.createElement(B.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),s.a.createElement("h1",null,"There isn\u2019t a default dashboard set for this project"),s.a.createElement("p",{className:"mb-4"},"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."),s.a.createElement(p.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){f()}},"Select a default dashboard")),s.a.createElement(se,null))}var ue={component:Z,logic:G.a}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(T,h,e){"use strict";e.d(h,"a",function(){return L}),e.d(h,"b",function(){return z});var O=e("./node_modules/core-js/modules/es.function.name.js"),I=e.n(O),C=e("./node_modules/core-js/modules/es.array.slice.js"),b=e.n(C),D=e("./node_modules/react/index.js"),d=e.n(D),s=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),W=e("./node_modules/kea/lib/index.esm.js"),N=e("./frontend/src/lib/dayjs.ts"),w=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),o=e("./frontend/src/lib/components/LemonButton/index.ts"),E=e("./frontend/src/scenes/urls.ts"),K=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),x=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),A=e("./frontend/src/lib/utils/eventUsageLogic.ts");function L(M){var _=M.insight,p=Object(W.useActions)(A.e),a=p.reportInsightOpenedFromRecentInsightList;return d.a.createElement(o.a,{fullWidth:!0,to:E.a.insightView(_.short_id),onClick:function(){a()}},d.a.createElement("div",{className:"ProjectHomePage__listrow"},d.a.createElement(K.InsightIcon,{insight:_}),d.a.createElement("div",{className:"ProjectHomePage__listrow__details"},d.a.createElement("div",null,_.name||_.derived_name),d.a.createElement("div",null,"Last modified ",Object(N.a)(_.last_modified_at).fromNow()))))}function z(){var M=Object(W.useValues)(x.a),_=M.recentInsights,p=M.recentInsightsLoading,a=Object(W.useActions)(x.a),m=a.loadRecentInsights;return Object(D.useEffect)(function(){m()},[]),d.a.createElement(d.a.Fragment,null,d.a.createElement(w.a,{title:"Your recently viewed insights",viewAllURL:E.a.savedInsights(),loading:p,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:E.a.savedInsights()},items:_.slice(0,5),renderRow:function(c,u){return d.a.createElement(L,{key:u,insight:c})}}))}try{L.displayName="InsightRow",L.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:L.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(M){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(T,h,e){"use strict";e.d(h,"a",function(){return p});var O=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),I=e.n(O),C=e("./node_modules/@babel/runtime/regenerator/index.js"),b=e.n(C),D=e("./node_modules/core-js/modules/es.array.iterator.js"),d=e.n(D),s=e("./node_modules/core-js/modules/es.object.to-string.js"),W=e.n(s),N=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),w=e.n(N),o=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/scenes/teamLogic.tsx"),K=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),x=e("./frontend/src/types.ts"),A=e("./frontend/src/lib/api.ts"),L=e("./node_modules/kea-subscriptions/lib/index.js"),z=e.n(L),M=e("./node_modules/kea-loaders/lib/index.js"),_=e.n(M),p=Object(o.kea)([Object(o.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(o.connect)({values:[E.a,["currentTeamId","currentTeam"]]}),Object(o.selectors)({primaryDashboardId:[function(){return[E.a.selectors.currentTeam]},function(a){return a==null?void 0:a.primary_dashboard}],dashboardLogic:[function(a){return[a.primaryDashboardId]},function(a){return Object(K.c)({id:a!=null?a:void 0,placement:x.l.ProjectHomepage})}]}),Object(M.loaders)(function(a){var m=a.values;return{recentInsights:[[],{loadRecentInsights:function(){var P=I()(b.a.mark(function u(){var R;return b.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,A.b.get("api/projects/".concat(m.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return R=g.sent,g.abrupt("return",R.results);case 4:case"end":return g.stop()}},u)}));function c(){return P.apply(this,arguments)}return c}()}],persons:[[],{loadPersons:function(){var P=I()(b.a.mark(function u(){var R;return b.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,A.b.persons.list();case 2:return R=g.sent,g.abrupt("return",R.results);case 4:case"end":return g.stop()}},u)}));function c(){return P.apply(this,arguments)}return c}()}]}}),Object(L.subscriptions)(function(a){var m=a.cache;return{dashboardLogic:function(c){var u;(u=m.unmount)===null||u===void 0||u.call(m),m.unmount=c?c.mount():null}}}),Object(o.afterMount)(function(a){var m,P=a.cache,c=a.actions;(m=P.unmount)===null||m===void 0||m.call(P),c.loadRecentInsights(),c.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(T,h,e){var O=e("./node_modules/css-loader/dist/runtime/api.js");h=O(!1),h.push([T.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),T.exports=h}}]);
