"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[4734],{"../../products/error_tracking/frontend/ErrorTrackingScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingScene:()=>ErrorTrackingScene,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),dist_module=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.261.8_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.28.1_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),constants=__webpack_require__("../../frontend/src/lib/constants.tsx"),useFeatureFlag=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),featureFlagLogic=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),preflightLogic=__webpack_require__("../../frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),Query=__webpack_require__("../../frontend/src/queries/Query/Query.tsx"),InsightViz=__webpack_require__("../../frontend/src/queries/nodes/InsightViz/InsightViz.tsx"),BulkActions=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/BulkActions.tsx"),dataNodeLogic=__webpack_require__("../../frontend/src/queries/nodes/DataNode/dataNodeLogic.ts"),issueActionsLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),frontend_utils=__webpack_require__("../../products/error_tracking/frontend/utils.ts");let errorTrackingDataNodeLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","error-tracking","errorTrackingDataNodeLogic"]),(0,index_esm.props)({}),(0,index_esm.connect)(_ref=>{let{key,query}=_ref,nodeLogic=(0,dataNodeLogic.M)({key,query,refresh:"blocking"});return{values:[nodeLogic,["response","responseLoading"]],actions:[nodeLogic,["setResponse","loadData","cancelQuery"],issueActionsLogic.x,["mergeIssues","resolveIssues","suppressIssues","activateIssues","assignIssues","updateIssueAssignee","updateIssueStatus","mutationSuccess","mutationFailure"]]}}),(0,index_esm.actions)({reloadData:()=>({})}),(0,index_esm.selectors)({results:[s=>[s.response],response=>response&&"results"in response?response.results:[]]}),(0,index_esm.listeners)(_ref2=>{let{values,actions}=_ref2;return{reloadData:async()=>{actions.loadData("force_blocking")},mergeIssues:_ref3=>{let{ids}=_ref3,{results}=values,issues=results.filter(_ref4=>{let{id}=_ref4;return ids.includes(id)}),primaryIssue=issues.shift();if(primaryIssue&&issues.length>0){let mergingIds=issues.map(g=>g.id),mergedIssue=(0,frontend_utils.Z0)(primaryIssue,issues);actions.setResponse({...values.response,results:results.filter(_ref5=>{let{id}=_ref5;return!mergingIds.includes(id)}).map(issue=>mergedIssue.id===issue.id?mergedIssue:issue)})}},resolveIssues:_ref6=>{let{ids}=_ref6,{results}=values;actions.setResponse({...values.response,results:results.map(issue=>ids.includes(issue.id)?{...issue,status:"resolved"}:issue)})},suppressIssues:_ref7=>{let{ids}=_ref7,{results}=values;actions.setResponse({...values.response,results:results.map(issue=>ids.includes(issue.id)?{...issue,status:"suppressed"}:issue)})},activateIssues:_ref8=>{let{ids}=_ref8,{results}=values;actions.setResponse({...values.response,results:results.map(issue=>ids.includes(issue.id)?{...issue,status:"active"}:issue)})},assignIssues:_ref9=>{let{ids,assignee}=_ref9,{results}=values;actions.setResponse({...values.response,results:results.map(issue=>ids.includes(issue.id)?{...issue,assignee}:issue)})},updateIssueAssignee:_ref10=>{let{id,assignee}=_ref10,response=values.response;if(response){let results="results"in response?response.results:[],recordIndex=results.findIndex(r=>r.id===id);if(recordIndex>-1){let issue={...results[recordIndex],assignee};results.splice(recordIndex,1,issue),actions.setResponse({...response,results:results})}}},updateIssueStatus:_ref11=>{let{id,status}=_ref11,response=values.response;if(response){let results="results"in response?response.results:[],recordIndex=results.findIndex(r=>r.id===id);if(recordIndex>-1){let issue={...results[recordIndex],status};results.splice(recordIndex,1,issue),actions.setResponse({...response,results:results})}}},mutationSuccess:()=>actions.reloadData(),mutationFailure:()=>actions.reloadData()}})]);var AssigneeDisplay=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeDisplay.tsx"),AssigneeSelect=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeSelect.tsx"),GenericSelect=__webpack_require__("../../products/error_tracking/frontend/components/GenericSelect.tsx"),Indicator=__webpack_require__("../../products/error_tracking/frontend/components/Indicator.tsx"),fast_deep_equal=__webpack_require__("../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js");let DEFAULT_ORDER_BY="last_seen",DEFAULT_ORDER_DIRECTION="DESC",DEFAULT_STATUS="active",issueQueryOptionsLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","error-tracking","issueQueryOptionsLogic"]),(0,index_esm.actions)({setOrderBy:orderBy=>({orderBy}),setOrderDirection:orderDirection=>({orderDirection}),setAssignee:assignee=>({assignee}),setStatus:status=>({status})}),(0,index_esm.reducers)({orderBy:[DEFAULT_ORDER_BY,{persist:!0},{setOrderBy:(_,_ref)=>{let{orderBy}=_ref;return orderBy}}],orderDirection:[DEFAULT_ORDER_DIRECTION,{persist:!0},{setOrderDirection:(_,_ref2)=>{let{orderDirection}=_ref2;return orderDirection}}],assignee:[null,{persist:!0},{setAssignee:(_,_ref3)=>{let{assignee}=_ref3;return assignee}}],status:[DEFAULT_STATUS,{persist:!0},{setStatus:(_,_ref4)=>{let{status}=_ref4;return status}}]}),(0,lib.actionToUrl)(_ref5=>{let{values}=_ref5,buildURL=()=>(0,frontend_utils.qI)(lib.router,params=>((0,frontend_utils.aM)(params,"assignee",values.assignee,null),(0,frontend_utils.aM)(params,"status",values.status,DEFAULT_STATUS),(0,frontend_utils.aM)(params,"orderBy",values.orderBy,DEFAULT_ORDER_BY),(0,frontend_utils.aM)(params,"orderDirection",values.orderDirection,DEFAULT_ORDER_DIRECTION),params));return{setOrderBy:()=>buildURL(),setStatus:()=>buildURL(),setAssignee:()=>buildURL(),setOrderDirection:()=>buildURL()}}),(0,lib.urlToAction)(_ref6=>{let{actions,values}=_ref6;return{"*":(_,params)=>{params.orderBy&&!fast_deep_equal_default()(params.orderBy,values.orderBy)&&actions.setOrderBy(params.orderBy),params.status&&!fast_deep_equal_default()(params.status,values.status)&&actions.setStatus(params.status),params.assignee&&!fast_deep_equal_default()(params.assignee,values.assignee)&&actions.setAssignee(params.assignee),params.orderDirection&&!fast_deep_equal_default()(params.orderDirection,values.orderDirection)&&actions.setOrderDirection(params.orderDirection)}}})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let IssueQueryOptions=()=>{let{assignee,orderBy,status,orderDirection}=(0,index_esm.useValues)(issueQueryOptionsLogic),{setAssignee,setOrderBy,setStatus,setOrderDirection}=(0,index_esm.useActions)(issueQueryOptionsLogic);return(0,jsx_runtime.jsxs)("span",{className:"flex items-center justify-between gap-2 self-end",children:[(0,jsx_runtime.jsx)(Reload,{}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 self-end",children:[(0,jsx_runtime.jsx)(GenericSelect.e,{values:["all","active","resolved","suppressed"],current:status||null,renderValue:key=>{switch(key){case"all":case null:return(0,jsx_runtime.jsx)(Indicator.VO,{intent:"muted",label:"All",size:"small"});default:return(0,jsx_runtime.jsx)(Indicator.Eg,{status:key,size:"small"})}},placeholder:"Select status",onChange:value=>setStatus(value||void 0),size:"small"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)("span",{children:"Sort by:"}),(0,jsx_runtime.jsx)(src.Yv,{onChange:setOrderBy,value:orderBy,options:[{value:"last_seen",label:"Last seen"},{value:"first_seen",label:"First seen"},{value:"occurrences",label:"Occurrences"},{value:"users",label:"Users"},{value:"sessions",label:"Sessions"}],size:"small"}),(0,jsx_runtime.jsx)(src.Yv,{onChange:setOrderDirection,value:orderDirection,options:[{value:"DESC",label:"Descending"},{value:"ASC",label:"Ascending"}],size:"small"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)("span",{children:"Assigned to:"}),(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:null!=assignee?assignee:null,onChange:assignee=>setAssignee(assignee),children:displayAssignee=>(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",size:"small",children:(0,jsx_runtime.jsx)(AssigneeDisplay.VQ,{assignee:displayAssignee,placeholder:"Any user"})})})]})]})]})},Reload=()=>{let{responseLoading}=(0,index_esm.useValues)(errorTrackingDataNodeLogic),{reloadData,cancelQuery}=(0,index_esm.useActions)(errorTrackingDataNodeLogic);return(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",size:"small",onClick:()=>{responseLoading?cancelQuery():reloadData()},icon:responseLoading?(0,jsx_runtime.jsx)(src.$j,{textColored:!0}):(0,jsx_runtime.jsx)(posthog_icons_es.IconRefresh,{}),children:responseLoading?"Cancel":"Reload"})};var errorTrackingBulkSelectLogic=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts");let ErrorTrackingListOptions=()=>{let{selectedIssueIds}=(0,index_esm.useValues)(errorTrackingBulkSelectLogic.t),{results}=(0,index_esm.useValues)(errorTrackingDataNodeLogic),newSceneLayout=(0,useFeatureFlag.y)("NEW_SCENE_LAYOUT");return(0,jsx_runtime.jsx)("div",{className:(0,css_classes.cn)("sticky top-[var(--breadcrumbs-height-compact)] z-20 py-2 bg-primary",newSceneLayout&&"top-0 -mx-4 px-4"),children:selectedIssueIds.length>0?(0,jsx_runtime.jsx)(BulkActions.c,{issues:results,selectedIds:selectedIssueIds}):(0,jsx_runtime.jsx)(IssueQueryOptions,{})})};var react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),Sparkline=__webpack_require__("../../frontend/src/lib/components/Sparkline.tsx"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts");__webpack_require__("../../frontend/src/layout/navigation-3000/themeLogic.ts");var use_sparkline_options=__webpack_require__("../../products/error_tracking/frontend/hooks/use-sparkline-options.tsx");function OccurrenceSparkline(_ref){let{data,className,displayXAxis=!1}=_ref,colorVars=(0,use_sparkline_options.z)(),options=(0,use_sparkline_options.Q)({backgroundColor:colorVars[0],hoverBackgroundColor:colorVars[1]}),[occurrences,labels,labelRenderer]=(0,react.useMemo)(()=>[wrapDataWithColor(data,options),data.map(value=>(0,dayjs.Bv)(value.date).toISOString()),label=>(0,dayjs.Bv)(label).format("D MMM YYYY HH:mm (UTC)")],[data,options]),withXScale=(0,react.useCallback)(scale=>({...scale,type:"timeseries",ticks:{display:!0,maxRotation:0,maxTicksLimit:5,font:{size:10,lineHeight:1}},time:{unit:"day",displayFormats:{day:"D MMM"}}}),[]);return(0,jsx_runtime.jsx)(Sparkline.b,{className:className,data:occurrences,labels:labels,renderLabel:labelRenderer,withXScale:displayXAxis?withXScale:void 0})}function wrapDataWithColor(data,options){return[{values:data.map(d=>d.value),name:"Occurrences",color:options.backgroundColor,hoverColor:options.hoverBackgroundColor}]}var ErrorFilters=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/index.tsx"),ErrorTrackingSetupPrompt=__webpack_require__("../../products/error_tracking/frontend/components/ErrorTrackingSetupPrompt/ErrorTrackingSetupPrompt.tsx"),errorIngestionLogic=__webpack_require__("../../products/error_tracking/frontend/components/ErrorTrackingSetupPrompt/errorIngestionLogic.tsx"),taxonomicFilterLogic=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx"),MaxTool=__webpack_require__("../../frontend/src/scenes/max/MaxTool.tsx"),types=__webpack_require__("../../frontend/src/types.ts"),kea_subscriptions_lib=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.7_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),errorFiltersLogic=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/errorFiltersLogic.ts"),queries=__webpack_require__("../../products/error_tracking/frontend/queries.ts");let errorTrackingSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","error-tracking","errorTrackingSceneLogic"]),(0,index_esm.connect)(()=>({values:[errorFiltersLogic.U,["dateRange","filterTestAccounts","filterGroup","searchQuery"],issueQueryOptionsLogic,["assignee","orderBy","orderDirection","status"]],actions:[issueActionsLogic.x,["mutationSuccess","mutationFailure"],errorTrackingBulkSelectLogic.t,["setSelectedIssueIds"]]})),(0,index_esm.selectors)({query:[s=>[s.orderBy,s.status,s.dateRange,s.assignee,s.filterTestAccounts,s.filterGroup,s.searchQuery,s.orderDirection],(orderBy,status,dateRange,assignee,filterTestAccounts,filterGroup,searchQuery,orderDirection)=>(0,queries.mx)({orderBy,status,dateRange,assignee,filterTestAccounts,filterGroup,volumeResolution:frontend_utils.$N,searchQuery,columns:["error","volume","occurrences","sessions","users"],orderDirection})]}),(0,kea_subscriptions_lib.Vt)(_ref=>{let{actions}=_ref;return{query:()=>actions.setSelectedIssueIds([])}})]);var FilterGroup=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/FilterGroup.tsx");function updateFilterGroup(removedFilterIndexes,newFilters,filterGroup){let firstGroup;if(!(newFilters&&newFilters.length>0)&&!(removedFilterIndexes&&removedFilterIndexes.length>0))return null;let firstValue=filterGroup.values[0],updatedValues=[...(firstGroup=firstValue&&"values"in firstValue?firstValue:{type:types.J2.And,values:firstValue?[firstValue]:[]}).values];if(removedFilterIndexes&&removedFilterIndexes.length>0)for(let index of[...removedFilterIndexes].sort((a,b)=>b-a))index>=0&&index<updatedValues.length&&updatedValues.splice(index,1);return newFilters&&newFilters.length>0&&updatedValues.push(...newFilters),{...filterGroup,values:[{...firstGroup,values:updatedValues},...filterGroup.values.slice(1)]}}function ErrorTrackingIssueFilteringTool(){let{query}=(0,index_esm.useValues)(errorTrackingSceneLogic),{setDateRange,setFilterGroup,setFilterTestAccounts}=(0,index_esm.useActions)(errorFiltersLogic.U),{setOrderBy,setOrderDirection,setStatus}=(0,index_esm.useActions)(issueQueryOptionsLogic),{filterGroup}=(0,index_esm.useValues)(errorFiltersLogic.U),{setSearchQuery}=(0,index_esm.useActions)((0,taxonomicFilterLogic.aS)({taxonomicFilterLogicKey:FilterGroup.Vd,taxonomicGroupTypes:FilterGroup.o5})),callback=update=>{update.orderBy&&setOrderBy(update.orderBy),update.orderDirection&&setOrderDirection(update.orderDirection),update.status&&setStatus(update.status),update.searchQuery&&setSearchQuery(update.searchQuery),update.dateRange&&setDateRange(update.dateRange),void 0!==update.filterTestAccounts&&setFilterTestAccounts(update.filterTestAccounts);let updatedFilterGroup=updateFilterGroup(update.removedFilterIndexes,update.newFilters,filterGroup);updatedFilterGroup&&setFilterGroup(updatedFilterGroup)};return(0,jsx_runtime.jsx)(MaxTool.Z,{identifier:"filter_error_tracking_issues",context:{current_query:query},callback:toolOutput=>{callback(toolOutput)},suggestions:[],introOverride:{headline:"What kind of issues are you looking for?",description:"Search by message, file name, event properties, or stack trace."},className:"hidden",children:(0,jsx_runtime.jsx)("div",{className:"relative"})})}var IssueImpactTool=__webpack_require__("../../products/error_tracking/frontend/components/IssueImpactTool.tsx"),TableColumns=__webpack_require__("../../products/error_tracking/frontend/components/TableColumns.tsx"),use_sparkline_data=__webpack_require__("../../products/error_tracking/frontend/hooks/use-sparkline-data.tsx");let scene={component:ErrorTrackingScene,logic:errorTrackingSceneLogic};function ErrorTrackingScene(){let{hasSentExceptionEvent,hasSentExceptionEventLoading}=(0,index_esm.useValues)(errorIngestionLogic.T),{query}=(0,index_esm.useValues)(errorTrackingSceneLogic),{featureFlags}=(0,index_esm.useValues)(featureFlagLogic.featureFlagLogic),insightProps={dashboardItemId:"new-ErrorTrackingQuery"};return(0,jsx_runtime.jsxs)(ErrorTrackingSetupPrompt.n,{children:[(0,jsx_runtime.jsx)(ErrorTrackingIssueFilteringTool,{}),featureFlags[constants.y8.ERROR_TRACKING_IMPACT_MAX_TOOL]&&(0,jsx_runtime.jsx)(IssueImpactTool.J,{}),(0,jsx_runtime.jsx)(SceneContent._,{className:"ErrorTracking",children:(0,jsx_runtime.jsxs)(index_esm.BindLogic,{logic:errorTrackingDataNodeLogic,props:{key:(0,InsightViz.gG)(insightProps)},children:[(0,jsx_runtime.jsx)(Header,{}),hasSentExceptionEventLoading||hasSentExceptionEvent?null:(0,jsx_runtime.jsx)(IngestionStatusCheck,{}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)(ErrorFilters.h.Root,{children:[(0,jsx_runtime.jsx)(ErrorFilters.h.DateRange,{}),(0,jsx_runtime.jsx)(ErrorFilters.h.FilterGroup,{}),(0,jsx_runtime.jsx)(ErrorFilters.h.InternalAccounts,{})]}),(0,jsx_runtime.jsx)(src.p2,{className:"mt-2"}),(0,jsx_runtime.jsx)(ErrorTrackingListOptions,{}),(0,jsx_runtime.jsx)(Query.A,{query:query,context:{columns:{error:{width:"50%",render:TitleColumn,renderTitle:TitleHeader},occurrences:{align:"center",render:CountColumn},sessions:{align:"center",render:CountColumn},users:{align:"center",render:CountColumn},volume:{align:"right",renderTitle:VolumeColumnHeader,render:VolumeColumn}},showOpenEditorButton:!1,insightProps:insightProps,emptyStateHeading:"No issues found",emptyStateDetail:"Try changing the date range, changing the filters or removing the assignee."}})]})]})})]})}let VolumeColumn=props=>{let record=props.record;if(!record.aggregations)throw Error("No aggregations found");let data=(0,use_sparkline_data.P)(record.aggregations,frontend_utils.$N);return(0,jsx_runtime.jsx)("div",{className:"flex justify-end",children:(0,jsx_runtime.jsx)(OccurrenceSparkline,{className:"h-8",data:data,displayXAxis:!1})})},VolumeColumnHeader=_ref=>{let{columnName}=_ref;return(0,jsx_runtime.jsx)("div",{className:"flex justify-between items-center min-w-64",children:(0,jsx_runtime.jsx)("div",{children:columnName})})},TitleHeader=()=>{let{results}=(0,index_esm.useValues)(errorTrackingDataNodeLogic);return(0,jsx_runtime.jsx)(TableColumns.r,{results:results})},TitleColumn=props=>{let{results}=(0,index_esm.useValues)(errorTrackingDataNodeLogic);return(0,jsx_runtime.jsx)(TableColumns.O,{results:results,...props})},CountColumn=_ref2=>{let{record,columnName}=_ref2,aggregations=record.aggregations,count=aggregations?aggregations[columnName]:0;return(0,jsx_runtime.jsx)("span",{className:"text-lg font-medium",children:"sessions"===columnName&&0===count?(0,jsx_runtime.jsx)(src.u,{title:"No $session_id was set for any event in this issue",delayMs:0,children:"-"}):(0,utils.d$)(count)})},Header=()=>{let{isDev}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isDev?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{dist_module.LJ.captureException(Error("Kaboom !"))},children:"Send an exception"}),(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{setInterval(()=>{throw Error("Kaboom !")},100)},children:"Start exception loop"})]}):null,(0,jsx_runtime.jsx)(src.Jp,{to:"https://posthog.com/docs/error-tracking",type:"secondary",targetBlank:!0,children:"Documentation"}),(0,jsx_runtime.jsx)(src.Jp,{to:urls.j.errorTrackingConfiguration(),type:"secondary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconGear,{}),children:"Configure"})]})}),(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:"Error tracking",description:"Track and analyze errors in your website or application to understand and fix issues.",resourceType:{type:"error_tracking"}}),(0,jsx_runtime.jsx)(SceneDivider.V,{})]})},IngestionStatusCheck=()=>{let newSceneLayout=(0,useFeatureFlag.y)("NEW_SCENE_LAYOUT");return(0,jsx_runtime.jsxs)(src.Vp,{type:"warning",className:(0,css_classes.cn)(!newSceneLayout&&"mb-4"),children:[(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)("strong",{children:"No Exception events have been detected!"})}),(0,jsx_runtime.jsxs)("p",{children:["To use the Error tracking product, please"," ",(0,jsx_runtime.jsx)(src.rU,{to:"https://posthog.com/docs/error-tracking/installation",children:"enable exception capture within the PostHog SDK"})," ","(otherwise it'll be a little empty!)"]})]})}},"../../products/error_tracking/frontend/components/ErrorFilters/FilterGroup.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Vd:()=>taxonomicFilterLogicKey,e_:()=>FilterGroup,o5:()=>taxonomicGroupTypes});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),use_debounce__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../node_modules/.pnpm/use-debounce@9.0.3_react@18.2.0/node_modules/use-debounce/dist/index.module.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_TaxonomicFilter_InfiniteSelectResults__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/InfiniteSelectResults.tsx"),lib_components_TaxonomicFilter_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),lib_components_TaxonomicFilter_taxonomicFilterLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/UniversalFilters.tsx"),lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/universalFiltersLogic.ts"),lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/utils.ts"),lib_hooks_useOnMountEffect__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/hooks/useOnMountEffect.ts"),_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/types.ts"),_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/errorFiltersLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let taxonomicFilterLogicKey="error-tracking",taxonomicGroupTypes=[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.ErrorTrackingProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.ErrorTrackingIssues,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.EventProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.Cohorts,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.HogQLExpression],FilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.U),{setFilterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.U);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__.Z,{rootKey:taxonomicFilterLogicKey,group:filterGroup.values[0],taxonomicGroupTypes:taxonomicGroupTypes,onChange:group=>setFilterGroup({type:_types__WEBPACK_IMPORTED_MODULE_11__.J2.And,values:[group]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(UniversalSearch,{})})},UniversalSearch=()=>{let[visible,setVisible]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),{searchQuery}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.U),{setSearchQuery}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.U),{addGroupFilter}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__.d),searchInputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),floatingRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),onClose=()=>{searchInputRef.current?.blur(),setVisible(!1)},taxonomicFilterLogicProps={taxonomicFilterLogicKey,taxonomicGroupTypes,onChange:(taxonomicGroup,value,item,originalQuery)=>{searchInputRef.current?.blur(),setVisible(!1),setSearchQuery(""),addGroupFilter(taxonomicGroup,value,item,originalQuery)},onEnter:onClose,autoSelectItem:!1,initialSearchQuery:searchQuery,excludedProperties:{[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.ErrorTrackingIssues]:["assignee"]}},onChange=(0,use_debounce__WEBPACK_IMPORTED_MODULE_14__.y1)(value=>setSearchQuery(value),250);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(kea__WEBPACK_IMPORTED_MODULE_0__.BindLogic,{logic:lib_components_TaxonomicFilter_taxonomicFilterLogic__WEBPACK_IMPORTED_MODULE_5__.aS,props:taxonomicFilterLogicProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Qw,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_TaxonomicFilter_InfiniteSelectResults__WEBPACK_IMPORTED_MODULE_3__.Q,{focusInput:()=>searchInputRef.current?.focus(),taxonomicFilterLogicProps:taxonomicFilterLogicProps,popupAnchorElement:floatingRef.current,useVerticalLayout:!0}),matchWidth:!0,visible:visible,closeOnClickInside:!1,floatingRef:floatingRef,onClickOutside:()=>onClose(),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_TaxonomicFilter_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_4__.N,{prefix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(UniversalFilterGroup,{}),onClick:()=>setVisible(!0),searchInputRef:searchInputRef,onClose:()=>onClose(),onChange:onChange,size:"small",fullWidth:!0,docLink:"https://posthog.com/docs/error-tracking/filter-and-search-issues"})})})},UniversalFilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__.d),{replaceGroupValue,removeGroupValue}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__.d),[allowInitiallyOpen,setAllowInitiallyOpen]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,lib_hooks_useOnMountEffect__WEBPACK_IMPORTED_MODULE_10__.x)(()=>setAllowInitiallyOpen(!0)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.Fragment,{children:filterGroup.values.map((filterOrGroup,index)=>(0,lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_9__.pU)(filterOrGroup)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__.Z.Group,{index:index,group:filterOrGroup,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(UniversalSearch,{})},index):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__.Z.Value,{index:index,filter:filterOrGroup,onRemove:()=>removeGroupValue(index),onChange:value=>replaceGroupValue(index,value),initiallyOpen:allowInitiallyOpen&&filterOrGroup.type!=_types__WEBPACK_IMPORTED_MODULE_11__.FT.HogQL},index))})}},"../../products/error_tracking/frontend/components/ErrorFilters/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>ErrorFilters});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),DateFilter=__webpack_require__("../../frontend/src/lib/components/DateFilter/DateFilter.tsx"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),errorFiltersLogic=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/errorFiltersLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let errorTrackingDateOptions=utils.bE.filter(dm=>!["Yesterday","All time","Today"].includes(dm.key));errorTrackingDateOptions.unshift({key:"Last hour",values:["-1h"],getFormattedDate:date=>date.subtract(1,"h").format(utils.zT)});var FilterGroup=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/FilterGroup.tsx"),TestAccountFilter=__webpack_require__("../../frontend/src/scenes/insights/filters/TestAccountFilter/index.ts");let ErrorFilters={Root:_ref=>{let{children}=_ref;return(0,jsx_runtime.jsx)("div",{className:"space-y-1",children:(0,jsx_runtime.jsx)("div",{className:"flex gap-2 items-center",children:children})})},DateRange:_ref=>{let{className,fullWidth=!1,size="small"}=_ref,{dateRange}=(0,index_esm.useValues)(errorFiltersLogic.U),{setDateRange}=(0,index_esm.useActions)(errorFiltersLogic.U);return(0,jsx_runtime.jsx)("span",{className:(0,css_classes.cn)("rounded bg-surface-primary",className),children:(0,jsx_runtime.jsx)(DateFilter.f,{size:size,dateFrom:dateRange.date_from,dateTo:dateRange.date_to,fullWidth:fullWidth,dateOptions:errorTrackingDateOptions,onChange:(changedDateFrom,changedDateTo)=>setDateRange({date_from:changedDateFrom,date_to:changedDateTo}),allowedRollingDateOptions:["hours","days","weeks","months","years"]})})},FilterGroup:FilterGroup.e_,InternalAccounts:()=>{let{filterTestAccounts}=(0,index_esm.useValues)(errorFiltersLogic.U),{setFilterTestAccounts}=(0,index_esm.useActions)(errorFiltersLogic.U);return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(TestAccountFilter.z,{size:"small",filters:{filter_test_accounts:filterTestAccounts},onChange:_ref=>{let{filter_test_accounts}=_ref;return setFilterTestAccounts(filter_test_accounts||!1)}})})}}},"../../products/error_tracking/frontend/components/GenericSelect.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>GenericSelect});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function GenericSelect(_ref){let{current,size,onChange,values,placeholder,renderValue}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Yv,{onChange:onChange,value:current,placeholder:placeholder,options:values.map(key=>({value:key,label:renderValue(key)})),size:size})}},"../../products/error_tracking/frontend/components/IssueActions/BulkActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>BulkActions});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/types.ts"),_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts"),_Assignee_AssigneeDisplay__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeDisplay.tsx"),_Assignee_AssigneeSelect__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeSelect.tsx"),_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/errorFiltersLogic.ts"),_GenericSelect__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/components/GenericSelect.tsx"),_Indicator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../products/error_tracking/frontend/components/Indicator.tsx"),_issueActionsLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function BulkActions(_ref){let{issues,selectedIds}=_ref,{mergeIssues,assignIssues,resolveIssues,suppressIssues,activateIssues}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_issueActionsLogic__WEBPACK_IMPORTED_MODULE_9__.x),{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_6__.U),{setFilterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_6__.U),{setSelectedIssueIds}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_3__.t),hasAtLeastTwoIssues=selectedIds.length>=2,currentStatus=issues.filter(issue=>selectedIds.includes(issue.id)).map(issue=>issue.status).reduce((acc,status)=>null===acc?status:"mixed"===acc||acc!==status?"mixed":acc,null);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"flex gap-x-2 justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"flex gap-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{disabledReason:hasAtLeastTwoIssues?null:"Select at least two issues to merge",type:"secondary",size:"small",onClick:()=>_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.dn.open({title:"Merge Issues",content:`Are you sure you want to merge these ${selectedIds.length} issues?`,primaryButton:{children:"Merge",status:"danger",onClick:()=>{mergeIssues(selectedIds)}}}),children:"Merge"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_GenericSelect__WEBPACK_IMPORTED_MODULE_7__.e,{size:"small",current:"mixed"==currentStatus?null:currentStatus,values:["active","resolved","suppressed"],placeholder:"Mark as",renderValue:value=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Indicator__WEBPACK_IMPORTED_MODULE_8__.Eg,{status:value,size:"small",className:"w-full",withTooltip:!0}),onChange:value=>{if(value!=currentStatus)switch(value){case"resolved":resolveIssues(selectedIds);break;case"suppressed":suppressIssues(selectedIds);break;case"active":activateIssues(selectedIds)}}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Assignee_AssigneeSelect__WEBPACK_IMPORTED_MODULE_5__.i,{assignee:null,onChange:assignee=>assignIssues(selectedIds,assignee),children:displayAssignee=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"secondary",size:"small",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Assignee_AssigneeDisplay__WEBPACK_IMPORTED_MODULE_4__.VQ,{assignee:displayAssignee,placeholder:"Assign"})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"secondary",size:"small",onClick:()=>{let quotedIds=selectedIds.map(id=>`'${id}'`).join(", "),newFilter={key:`issue_id NOT IN (${quotedIds})`,type:_types__WEBPACK_IMPORTED_MODULE_2__.FT.HogQL,value:null},firstGroup=filterGroup.values[0],updatedFirstGroup={...firstGroup,values:[...firstGroup.values,newFilter]};setFilterGroup({type:_types__WEBPACK_IMPORTED_MODULE_2__.J2.And,values:[updatedFirstGroup]}),setSelectedIssueIds([])},children:"Hide from search"})]})}},"../../products/error_tracking/frontend/components/IssueImpactTool.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>ErrorTrackingIssueImpactTool});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),scenes_max_MaxTool__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/scenes/max/MaxTool.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_impact_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../products/error_tracking/frontend/impact/errorTrackingImpactSceneLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ErrorTrackingIssueImpactTool(){let{setEvents}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_impact_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_4__.l);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(scenes_max_MaxTool__WEBPACK_IMPORTED_MODULE_2__.Z,{identifier:"find_error_tracking_impactful_issue_event_list",context:{},callback:toolOutput=>{setEvents(toolOutput.events),kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.errorTrackingImpact())},suggestions:[],introOverride:{headline:"What kind of issues are you looking for?",description:"Search by message, file name, event properties, or stack trace."},className:"hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"relative"})})}},"../../products/error_tracking/frontend/components/TableColumns.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>IssueListTitleColumn,r:()=>IssueListTitleHeader});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.28.1_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),utils=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),errorTrackingBulkSelectLogic=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts"),errorTrackingIssueSceneLogic=__webpack_require__("../../products/error_tracking/frontend/errorTrackingIssueSceneLogic.ts"),AssigneeDisplay=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeDisplay.tsx"),AssigneeSelect=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeSelect.tsx"),issueActionsLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),DropdownMenu=__webpack_require__("../../frontend/src/lib/ui/DropdownMenu/DropdownMenu.tsx"),frontend_utils=__webpack_require__("../../products/error_tracking/frontend/utils.ts"),Indicator=__webpack_require__("../../products/error_tracking/frontend/components/Indicator.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let IssueStatusSelect=_ref=>{let{status,options=frontend_utils.y$,onChange}=_ref,[showPopover,setShowPopover]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(DropdownMenu.h_,{open:showPopover,onOpenChange:setShowPopover,children:[(0,jsx_runtime.jsxs)(DropdownMenu.$F,{className:"flex items-center hover:bg-fill-button-tertiary-hover p-[0.1rem] rounded cursor-pointer",role:"button",children:[(0,jsx_runtime.jsx)(Indicator.Eg,{status:status,className:"ml-1 text-xs text-secondary"}),(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronDown,{})]}),(0,jsx_runtime.jsx)(IssueStatusDropdown,{status:status,options:options,onChange:status=>{setShowPopover(!1),onChange(status)}})]})};function IssueStatusDropdown(_ref2){let{status,options,onChange}=_ref2;return(0,jsx_runtime.jsx)(DropdownMenu.AW,{children:options.map(option=>(0,jsx_runtime.jsx)(DropdownMenu.Xi,{className:"text-base text-secondary hover:bg-fill-button-tertiary-hover hover:text-fill-button-tertiary px-1",asChild:!0,children:(0,jsx_runtime.jsx)(src.Jp,{fullWidth:!0,onClick:()=>option!==status&&onChange(option),role:"menuitem",size:"xsmall",active:option===status,children:(0,jsx_runtime.jsx)(Indicator.Eg,{status:option})})},option))})}var RuntimeIcon=__webpack_require__("../../products/error_tracking/frontend/components/RuntimeIcon.tsx");let IssueListTitleHeader=_ref=>{let{results}=_ref,{selectedIssueIds}=(0,index_esm.useValues)(errorTrackingBulkSelectLogic.t),{setSelectedIssueIds}=(0,index_esm.useActions)(errorTrackingBulkSelectLogic.t),allSelected=results.length==selectedIssueIds.length&&selectedIssueIds.length>0;return(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,jsx_runtime.jsx)(src.Hw,{checked:allSelected,onChange:()=>allSelected?setSelectedIssueIds([]):setSelectedIssueIds(results.map(r=>r.id))}),(0,jsx_runtime.jsx)("span",{children:"Issue"})]})},IssueListTitleColumn=props=>{let{selectedIssueIds,shiftKeyHeld,previouslyCheckedRecordIndex}=(0,index_esm.useValues)(errorTrackingBulkSelectLogic.t),{setSelectedIssueIds,setPreviouslyCheckedRecordIndex}=(0,index_esm.useActions)(errorTrackingBulkSelectLogic.t),{updateIssueAssignee,updateIssueStatus}=(0,index_esm.useActions)(issueActionsLogic.x),record=props.record,checked=selectedIssueIds.includes(record.id),runtime=(0,utils.sm)(record.library),recordIndex=props.recordIndex;return(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-x-2 group my-1",children:[(0,jsx_runtime.jsx)(src.Hw,{className:"h-[1rem]",checked:checked,onChange:newValue=>{let includedIds=[];if(shiftKeyHeld&&null!==previouslyCheckedRecordIndex){let start=Math.min(previouslyCheckedRecordIndex,recordIndex),end=Math.max(previouslyCheckedRecordIndex,recordIndex)+1;includedIds.push(...props.results.slice(start,end).map(r=>r.id))}else includedIds.push(record.id);setPreviouslyCheckedRecordIndex(recordIndex),setSelectedIssueIds(newValue?[...new Set([...selectedIssueIds,...includedIds])]:selectedIssueIds.filter(id=>!includedIds.includes(id)))}}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-[3px]",children:[(0,jsx_runtime.jsx)(src.rU,{className:"flex-1 pr-12",to:urls.j.errorTrackingIssue(record.id,{timestamp:record.last_seen}),onClick:()=>{let issueLogic=(0,errorTrackingIssueSceneLogic.r)({id:record.id,timestamp:record.last_seen});issueLogic.mount(),issueLogic.actions.setIssue(record)},children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center h-[1rem] gap-2",children:[(0,jsx_runtime.jsx)(RuntimeIcon.Z,{className:"shrink-0",runtime:runtime,fontSize:"0.7rem"}),(0,jsx_runtime.jsx)("span",{className:"font-semibold text-[0.9rem] line-clamp-1",children:record.name||"Unknown Type"})]})}),(0,jsx_runtime.jsx)("div",{title:record.description||void 0,className:"font-medium line-clamp-1 text-[var(--gray-8)]",children:record.description}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center text-secondary",children:[(0,jsx_runtime.jsx)(IssueStatusSelect,{status:record.status,onChange:status=>updateIssueStatus(record.id,status)}),(0,jsx_runtime.jsx)(CustomGroupSeparator,{}),(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:record.assignee,onChange:assignee=>updateIssueAssignee(record.id,assignee),children:anyAssignee=>(0,jsx_runtime.jsxs)("div",{className:"flex items-center hover:bg-fill-button-tertiary-hover p-[0.1rem] rounded cursor-pointer",role:"button",children:[(0,jsx_runtime.jsx)(AssigneeDisplay._x,{assignee:anyAssignee,size:"xsmall"}),(0,jsx_runtime.jsx)(AssigneeDisplay.VQ,{assignee:anyAssignee,className:"ml-1 text-xs text-secondary",size:"xsmall"}),(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronDown,{})]})}),(0,jsx_runtime.jsx)(CustomGroupSeparator,{}),(0,jsx_runtime.jsx)(TZLabel.w,{time:record.first_seen,className:"border-dotted border-b text-xs ml-1",delayMs:750}),(0,jsx_runtime.jsx)(icons.VG,{className:"text-quaternary mx-1"}),record.last_seen?(0,jsx_runtime.jsx)(TZLabel.w,{time:record.last_seen,className:"border-dotted border-b text-xs",delayMs:750}):(0,jsx_runtime.jsx)(src.yW,{})]})]})]})},CustomGroupSeparator=()=>(0,jsx_runtime.jsx)(posthog_icons_es.IconMinus,{className:"text-quaternary",transform:"rotate(90)"})},"../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>errorTrackingBulkSelectLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx");let errorTrackingBulkSelectLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingBulkSelectLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({actions:[_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_1__.x,["mutationSuccess","mutationFailure"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setSelectedIssueIds:ids=>({ids}),setShiftKeyHeld:shiftKeyHeld=>({shiftKeyHeld}),setPreviouslyCheckedRecordIndex:index=>({index})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({selectedIssueIds:[[],{setSelectedIssueIds:(_,_ref)=>{let{ids}=_ref;return ids}}],shiftKeyHeld:[!1,{setShiftKeyHeld:(_,_ref2)=>{let{shiftKeyHeld}=_ref2;return shiftKeyHeld}}],previouslyCheckedRecordIndex:[null,{setPreviouslyCheckedRecordIndex:(_,_ref3)=>{let{index}=_ref3;return index}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref4=>{let{actions}=_ref4;return{mutationSuccess:()=>actions.setSelectedIssueIds([]),mutationFailure:()=>actions.setSelectedIssueIds([])}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref5=>{let{actions,cache}=_ref5,onKeyChange=event=>{actions.setShiftKeyHeld(event.shiftKey)};window.addEventListener("keydown",onKeyChange),window.addEventListener("keyup",onKeyChange),cache.onKeyChange=onKeyChange}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.beforeUnmount)(_ref6=>{let{cache}=_ref6;window.removeEventListener("keydown",cache.onKeyChange),window.removeEventListener("keyup",cache.onKeyChange)})])},"../../products/error_tracking/frontend/hooks/use-sparkline-data.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>useSparklineData,U:()=>useSparklineDataIssueScene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_errorTrackingIssueSceneLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../products/error_tracking/frontend/errorTrackingIssueSceneLogic.ts"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../products/error_tracking/frontend/utils.ts");function generateDataFromVolumeBuckets(volumeBuckets){return volumeBuckets.map(_ref=>{let{label,value}=_ref;return{value,date:new Date(label)}})}function useSparklineData(aggregations,volumeResolution){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>aggregations?.volume_buckets?generateDataFromVolumeBuckets(aggregations.volume_buckets):Array(volumeResolution).fill({value:0,date:new Date}),[aggregations,volumeResolution])}function useSparklineDataIssueScene(){let{aggregations}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorTrackingIssueSceneLogic__WEBPACK_IMPORTED_MODULE_2__.r);return useSparklineData(aggregations,_utils__WEBPACK_IMPORTED_MODULE_3__.q7)}},"../../products/error_tracking/frontend/hooks/use-sparkline-options.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>useSparklineOptions,z:()=>useDefaultSparklineColorVars});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_layout_navigation_3000_themeLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/layout/navigation-3000/themeLogic.ts");function useSparklineOptions(){let overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},deps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],colorVars=useDefaultSparklineColorVars();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({backgroundColor:`var(--${colorVars[0]})`,hoverBackgroundColor:`var(--${colorVars[1]})`,axisColor:`var(--${colorVars[0]})`,borderRadius:5,eventLabelHeight:20,eventLabelPaddingX:5,eventLabelPaddingY:3,eventMinSpace:2,minBarHeight:10,...overrides}),[colorVars,...deps])}let DARK_MODE_COLORS=["color-zinc-400","color-zinc-200"],LIGHT_MODE_COLORS=["color-zinc-400","color-zinc-600"];function useDefaultSparklineColorVars(){let{isDarkModeOn}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_layout_navigation_3000_themeLogic__WEBPACK_IMPORTED_MODULE_2__.b);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>isDarkModeOn?DARK_MODE_COLORS:LIGHT_MODE_COLORS,[isDarkModeOn])}},"../../products/error_tracking/frontend/impact/errorTrackingImpactSceneLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>errorTrackingImpactSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.7_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/api.ts"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts"),_queries__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/queries.ts");let errorTrackingImpactSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","configuration","errorTrackingImpactSceneLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({actions:[_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_6__.t,["setSelectedIssueIds"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setEvents:events=>({events})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({events:[null,{setEvents:(_,_ref)=>{let{events}=_ref;return events}}],completedInitialLoad:[!1,{loadIssuesSuccess:()=>!0}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref2=>{let{values}=_ref2;return{issues:[[],{loadIssues:async()=>values.events?(await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_7__.x3)({events:values.events}),{refresh:"force_blocking"})).results:[]}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref3=>{let{actions}=_ref3;return{setEvents:()=>actions.loadIssues()}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({breadcrumbs:[()=>[],()=>[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_4__.x.ErrorTracking,path:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.j.errorTracking(),name:"Error tracking"},{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_4__.x.ErrorTrackingImpact,path:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.j.errorTrackingImpact(),name:"Impact"}]]}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__.Vt)(_ref4=>{let{actions}=_ref4;return{events:()=>actions.setSelectedIssueIds([])}})])}}]);