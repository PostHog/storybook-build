(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{4703:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"ActionsTable",(function(){return ActionsTable}));__webpack_require__(41),__webpack_require__(62),__webpack_require__(34),__webpack_require__(172),__webpack_require__(63),__webpack_require__(248),__webpack_require__(82),__webpack_require__(290);var toConsumableArray=__webpack_require__(14),toConsumableArray_default=__webpack_require__.n(toConsumableArray),slicedToArray=__webpack_require__(13),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Link=(__webpack_require__(896),__webpack_require__(61)),input=__webpack_require__(552),es_radio=__webpack_require__(1200),CheckOutlined=__webpack_require__(898),utils=__webpack_require__(10),index_esm=__webpack_require__(1),actionsModel=__webpack_require__(525),es_button=__webpack_require__(128),modal=__webpack_require__(1843),row=__webpack_require__(337),col=__webpack_require__(246),card=__webpack_require__(4245),EditAppUrls=__webpack_require__(1856),PlusOutlined=__webpack_require__(1841),SearchOutlined=__webpack_require__(729),EditOutlined=__webpack_require__(2655),lib=__webpack_require__(23),urls=__webpack_require__(18);function NewActionButton(){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),visible=_useState2[0],setVisible=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),appUrlsVisible=_useState4[0],setAppUrlsVisible=_useState4[1];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(es_button.a,{type:"primary",icon:react_default.a.createElement(PlusOutlined.a,null),onClick:function onClick(){return setVisible(!0)},"data-attr":"create-action"},"New Action"),react_default.a.createElement(modal.a,{visible:visible,style:{cursor:"pointer"},onCancel:function onCancel(){setVisible(!1),setAppUrlsVisible(!1)},title:"Create new action",footer:[appUrlsVisible&&react_default.a.createElement(es_button.a,{key:"back-button",onClick:function onClick(){return setAppUrlsVisible(!1)}},"Back"),react_default.a.createElement(es_button.a,{key:"cancel-button",onClick:function onClick(){setVisible(!1),setAppUrlsVisible(!1)}},"Cancel")]},!appUrlsVisible&&react_default.a.createElement(row.a,{gutter:2,justify:"space-between"},react_default.a.createElement(col.a,{xs:11},react_default.a.createElement(card.a,{title:"Inspect element on your site",onClick:function onClick(){return setAppUrlsVisible(!0)},size:"small"},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40}},react_default.a.createElement(SearchOutlined.a,null)))),react_default.a.createElement(col.a,{xs:11},react_default.a.createElement(card.a,{title:"From event or pageview",onClick:function onClick(){lib.router.actions.push(urls.a.createAction())},size:"small"},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},react_default.a.createElement(EditOutlined.a,null))))),appUrlsVisible&&react_default.a.createElement(EditAppUrls.a,{allowNavigation:!0})))}var actions_tutorial_grouping=__webpack_require__.p+"images/actions-tutorial-grouping.c9c565ed9cae79997aa714fdf8196aca.svg",actions_tutorial_standardized=__webpack_require__.p+"images/actions-tutorial-standardized.3935760a1606361ee014ad5615d6e22a.svg",actions_tutorial_retroactive=__webpack_require__.p+"images/actions-tutorial-retroactive.8bcf9190e81ba5d434572271b9f632be.svg",types=__webpack_require__(4),fuse_esm=__webpack_require__(306),userLogic=__webpack_require__(66),teamLogic=__webpack_require__(29),events=__webpack_require__(903),api=__webpack_require__(22),EventPageHeader=__webpack_require__(1851),columnUtils=__webpack_require__(1224),LemonTable=__webpack_require__(340),LemonButton=__webpack_require__(91),LemonRow=__webpack_require__(195),More=__webpack_require__(897),scene={component:ActionsTable};function ActionsTable(){var currentTeam=Object(index_esm.useValues)(teamLogic.a).currentTeam,_useValues2=Object(index_esm.useValues)(Object(actionsModel.a)({params:"include_count=1"})),actions=_useValues2.actions,actionsLoading=_useValues2.actionsLoading,loadActions=Object(index_esm.useActions)(actionsModel.a).loadActions,_useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),filterByMe=_useState4[0],setFilterByMe=_useState4[1],user=Object(index_esm.useValues)(userLogic.a).user,columns=[{title:"Name",dataIndex:"name",width:"30%",sorter:function sorter(a,b){return(""+a.name).localeCompare(b.name)},render:function RenderName(name,action,index){return react_default.a.createElement(Link.a,{"data-attr":"action-link-"+index,to:urls.a.action(action.id)},react_default.a.createElement("h4",{className:"row-name"},name||react_default.a.createElement("i",null,"Unnnamed action")))}},{title:"Type",key:"type",render:function RenderType(_,action){var _action$steps;return react_default.a.createElement("span",null,(null===(_action$steps=action.steps)||void 0===_action$steps?void 0:_action$steps.length)?action.steps.map((function(step){return react_default.a.createElement("div",{key:step.id},function(){var url=Object(utils.qb)(step.url||"");switch(url=url.slice(0,40)+(url.length>40?"...":""),step.event){case"$autocapture":return"Autocapture";case"$pageview":switch(step.url_matching){case"regex":return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL matches regex ",react_default.a.createElement("strong",null,url));case"exact":return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL matches exactly ",react_default.a.createElement("strong",null,url));default:return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL contains ",react_default.a.createElement("strong",null,url))}default:return react_default.a.createElement(react_default.a.Fragment,null,"Event: ",react_default.a.createElement("strong",null,step.event))}}())})):react_default.a.createElement("i",null,"Empty â€“ set this action up"))}},Object(columnUtils.b)(),Object(columnUtils.a)()].concat(toConsumableArray_default()((null==currentTeam?void 0:currentTeam.slack_incoming_webhook)?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function sorter(a,b){return Number(a.post_to_slack)-Number(b.post_to_slack)},render:function RenderActions(post_to_slack){return post_to_slack?react_default.a.createElement(CheckOutlined.a,null):null}}]:[]),[{width:0,render:function RenderActions(_,action){return react_default.a.createElement(More.a,{overlay:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(LemonButton.a,{type:"stealth",to:urls.a.action(action.id),fullWidth:!0},"Edit"),react_default.a.createElement(LemonButton.a,{type:"stealth",to:Object(lib.combineUrl)(urls.a.insightNew({insight:types.n.TRENDS,interval:"day",display:types.d.ActionsLineGraphLinear,actions:[{id:action.id,name:action.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),react_default.a.createElement(LemonRow.b,null),react_default.a.createElement(LemonButton.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function onClick(){return Object(utils.s)({endpoint:api.a.actions.determineDeleteEndpoint(),object:action,callback:loadActions})},fullWidth:!0},"Delete action"))})}}]),data=actions;return searchTerm&&""!==searchTerm&&(data=function searchActions(sources,search){return new fuse_esm.a(sources,{keys:["name","url"],threshold:.3}).search(search).map((function(result){return result.item}))}(data,searchTerm)),filterByMe&&(data=data.filter((function(item){var _item$created_by;return(null===(_item$created_by=item.created_by)||void 0===_item$created_by?void 0:_item$created_by.uuid)===(null==user?void 0:user.uuid)}))),react_default.a.createElement("div",{"data-attr":"manage-events-table"},react_default.a.createElement(EventPageHeader.a,{activeTab:events.a.Actions}),react_default.a.createElement("div",null,react_default.a.createElement("div",null),react_default.a.createElement("div",{className:"tutorial-container"},react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_grouping,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Multiple grouping"),react_default.a.createElement("div",{className:"description"},"Group multiple sets of events into a single action."))),react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_standardized,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Clean & standardized data"),react_default.a.createElement("div",{className:"description"},"Keep your actions the same, even if your product or data changes."))),react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_retroactive,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Retroactive"),react_default.a.createElement("div",{className:"description"},"We'll retroactively update your actions to match any past events."))))),react_default.a.createElement(input.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function onChange(e){setSearchTerm(e.target.value)}}),react_default.a.createElement(es_radio.a.Group,{buttonStyle:"solid",value:filterByMe,onChange:function onChange(e){return setFilterByMe(e.target.value)}},react_default.a.createElement(es_radio.a.Button,{value:!1},"All actions"),react_default.a.createElement(es_radio.a.Button,{value:!0},"My actions")),react_default.a.createElement("div",{className:"mb float-right"},react_default.a.createElement(NewActionButton,null)),react_default.a.createElement(LemonTable.a,{columns:columns,loading:actionsLoading,rowKey:"id",pagination:{pageSize:30},"data-attr":"actions-table",dataSource:data,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}}}]);