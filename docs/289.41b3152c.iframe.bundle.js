(window.webpackJsonp=window.webpackJsonp||[]).push([[289],{"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function(K,l,e){"use strict";e.d(l,"a",function(){return L});var v=e("./frontend/@posthog/lemon-ui/src/index.ts"),R=e("./node_modules/react/index.js"),C=e.n(R),n=e("./node_modules/react/jsx-runtime.js"),x=e.n(n);function L(f){var y=f.to,T=f.onClick,d=f.title,m=f.subtitle,D=f.prefix,M=f.suffix;return Object(n.jsx)(v.LemonButton,{fullWidth:!0,to:y,onClick:T,children:Object(n.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[D?Object(n.jsx)("span",{className:"shrink-0",children:D}):null,Object(n.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(n.jsx)("div",{className:"text-primary font-semibold truncate",children:d}),Object(n.jsx)("div",{className:"truncate text-default font-normal",children:m})]}),M?Object(n.jsx)("span",{className:"shrink-0",children:M}):null]})})}try{L.displayName="ProjectHomePageCompactListItem",L.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:L.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(f){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(K,l,e){"use strict";var v=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),R=e.n(v),C=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),n=e.n(C),x={};x.insert="head",x.singleton=!1;var L=R()(n.a,x),f=n.a.locals||{}},"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(K,l,e){"use strict";e.r(l),e.d(l,"ProjectHomepage",function(){return Q}),e.d(l,"scene",function(){return de});var v=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),R=e.n(v),C=e("./node_modules/core-js/modules/es.function.name.js"),n=e("./node_modules/core-js/modules/es.object.to-string.js"),x=e("./node_modules/core-js/modules/es.regexp.to-string.js"),L=e("./node_modules/react/index.js"),f=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),y=e("./frontend/src/lib/components/PageHeader.tsx"),T=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),d=e("./node_modules/kea/lib/index.esm.js"),m=e("./frontend/src/scenes/teamLogic.tsx"),D=e("./frontend/src/types.ts"),M=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),W=e("./frontend/src/lib/components/LemonDivider/index.ts"),S=e("./node_modules/core-js/modules/es.array.map.js"),P=e("./node_modules/core-js/modules/es.symbol.js"),V=e("./node_modules/core-js/modules/es.symbol.description.js"),r=e("./frontend/src/models/dashboardsModel.tsx"),A=e("./frontend/src/lib/components/LemonButton/index.ts"),p=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),t=e.n(p),i=e("./node_modules/@babel/runtime/regenerator/index.js"),o=e.n(i),a=e("./frontend/src/lib/utils/eventUsageLogic.ts"),u=Object(d.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[a.e],actions:[m.a,["updateCurrentTeam"]],values:[m.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(O){return{dashboardId:O}}},selectors:{primaryDashboardId:[function(c){return[c.currentTeam]},function(c){return c==null?void 0:c.primary_dashboard}]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(O){var U=O.actions;return{setPrimaryDashboard:function(){var g=t()(o.a.mark(function h(N){var I;return o.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:I=N.dashboardId,U.updateCurrentTeam({primary_dashboard:I}),a.e.actions.reportPrimaryDashboardChanged();case 3:case"end":return E.stop()}},h)}));function b(h){return g.apply(this,arguments)}return b}(),showPrimaryDashboardModal:function(){var g=t()(o.a.mark(function h(){return o.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:a.e.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return I.stop()}},h)}));function b(){return g.apply(this,arguments)}return b}()}}}),_=e("./frontend/src/lib/components/icons.tsx"),B=e("./frontend/src/lib/components/LemonRow/index.ts"),j=e("./frontend/src/lib/components/LemonModal/index.ts"),F=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),s=e("./node_modules/react/jsx-runtime.js");function w(){var c=Object(d.useValues)(u),O=c.isOpen,U=c.primaryDashboardId,g=Object(d.useActions)(u),b=g.closePrimaryDashboardModal,h=g.setPrimaryDashboard,N=Object(d.useValues)(r.a),I=N.nameSortedDashboards,z=N.dashboardsLoading;return Object(s.jsx)(j.a,{isOpen:O,onClose:b,title:"Select a default dashboard for the project",footer:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(A.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:b,children:"Close"})}),children:z?Object(s.jsx)("div",{className:"space-y-2",children:Object(s.jsx)(F.a.Row,{repeat:4})}):Object(s.jsx)("div",{className:"space-y-2",children:I.map(function(E){var H=E.id===U,Y=Object(s.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[Object(s.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[Object(s.jsx)("strong",{children:E.name}),Object(s.jsx)("span",{className:"text-default font-normal text-ellipsis",children:E.description})]}),H?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(_.IconCottage,{className:"mr-2 text-warning text-lg"}),Object(s.jsx)("span",{children:"Default"})]}):Object(s.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return H?Object(s.jsx)(B.a,{fullWidth:!0,status:"muted",className:"dashboard-row",children:Y},E.id):Object(s.jsx)(A.a,{fullWidth:!0,className:"dashboard-row",onClick:function(){h(E.id),b()},children:Y},E.id)})})})}var G=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),k=e("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),q=e("./frontend/src/scenes/project-homepage/RecentInsights.tsx"),ue=e("./node_modules/core-js/modules/es.array.slice.js"),ee=e("./frontend/src/lib/dayjs.ts"),se=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),$=e("./frontend/src/scenes/urls.ts"),te=e("./frontend/src/lib/components/ProfilePicture/index.ts"),J=e("./frontend/src/scenes/persons/PersonHeader.tsx"),oe=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx");function ne(c){var O=c.person,U=Object(d.useActions)(a.e),g=U.reportPersonOpenedFromNewlySeenPersonsList;return Object(s.jsx)(oe.a,{to:$.a.person(O.distinct_ids[0]),title:Object(J.b)(O),subtitle:"First seen ".concat(Object(ee.a)(O.created_at).fromNow()),prefix:Object(s.jsx)(te.b,{name:Object(J.b)(O)}),onClick:function(){g()}})}function re(){var c=Object(d.useValues)(G.a),O=c.persons,U=c.personsLoading;return Object(s.jsx)(se.a,{title:"Newly seen persons",viewAllURL:$.a.persons(),loading:U,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:O.slice(0,5),renderRow:function(b,h){return Object(s.jsx)(ne,{person:b},h)}})}var ae=e("./node_modules/@react-hook/size/dist/module/index.js"),ce=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),ie=e("./frontend/@posthog/lemon-ui/src/index.ts");function Q(){var c=Object(d.useValues)(G.a),O=c.dashboardLogic,U=Object(d.useValues)(m.a),g=U.currentTeam,b=Object(d.useValues)(O),h=b.allItems,N=Object(d.useActions)(M.a),I=N.showInviteModal,z=Object(d.useActions)(u),E=z.showPrimaryDashboardModal,H=Object(L.useRef)(null),Y=Object(ae.a)(H),X=R()(Y,1),Z=X[0],le=Object(s.jsxs)("div",{className:"flex",children:[Object(s.jsx)(A.a,{"data-attr":"project-home-invite-team-members",onClick:function(){I()},className:"mr-2",type:"secondary",children:"Invite members"}),Object(s.jsx)(ce.NewInsightButton,{dataAttr:"project-home-new-insight"})]});return Object(s.jsxs)("div",{className:"project-homepage",children:[Object(s.jsx)(y.a,{title:(g==null?void 0:g.name)||"",delimited:!0,buttons:le}),Object(s.jsxs)("div",{ref:H,className:Z&&Z<600?"top-list-container-vertical":"top-list-container-horizontal",children:[Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(q.b,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(re,{})}),Object(s.jsx)("div",{className:"spacer"}),Object(s.jsx)("div",{className:"top-list",children:Object(s.jsx)(k.a,{})})]}),g!=null&&g.primary_dashboard?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"homepage-dashboard-header",children:[Object(s.jsxs)("div",{className:"dashboard-title-container",children:[!h&&Object(s.jsx)(F.a,{className:"w-20"}),(h==null?void 0:h.name)&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(_.IconCottage,{className:"mr-2 text-warning text-2xl"}),Object(s.jsx)(ie.Link,{className:"font-semibold text-xl text-default",to:$.a.dashboard(h.id),children:h==null?void 0:h.name})]})]}),Object(s.jsx)(A.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:E,children:"Change dashboard"})]}),Object(s.jsx)(W.a,{className:"my-6"}),Object(s.jsx)(T.Dashboard,{id:g.primary_dashboard.toString(),placement:D.n.ProjectHomepage})]}):Object(s.jsxs)("div",{className:"empty-state-container",children:[Object(s.jsx)(_.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),Object(s.jsx)("h1",{children:"There isn\u2019t a default dashboard set for this project"}),Object(s.jsx)("p",{className:"mb-4",children:"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."}),Object(s.jsx)(A.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){E()},children:"Select a default dashboard"})]}),Object(s.jsx)(w,{})]})}var de={component:Q,logic:G.a}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(K,l,e){"use strict";e.d(l,"a",function(){return r}),e.d(l,"b",function(){return A});var v=e("./node_modules/core-js/modules/es.function.name.js"),R=e.n(v),C=e("./node_modules/core-js/modules/es.array.slice.js"),n=e.n(C),x=e("./node_modules/react/index.js"),L=e.n(x),f=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),y=e("./node_modules/kea/lib/index.esm.js"),T=e("./frontend/src/lib/dayjs.ts"),d=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),m=e("./frontend/src/scenes/urls.ts"),D=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),M=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),W=e("./frontend/src/lib/utils/eventUsageLogic.ts"),S=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),P=e("./node_modules/react/jsx-runtime.js"),V=e.n(P);function r(p){var t=p.insight,i=Object(y.useActions)(W.e),o=i.reportInsightOpenedFromRecentInsightList;return Object(P.jsx)(S.a,{title:t.name||t.derived_name||"Insight",subtitle:"Last modified ".concat(Object(T.a)(t.last_modified_at).fromNow()),prefix:Object(P.jsx)(D.InsightIcon,{insight:t}),to:m.a.insightView(t.short_id),onClick:function(){o()}})}function A(){var p=Object(y.useValues)(M.a),t=p.recentInsights,i=p.recentInsightsLoading,o=Object(y.useActions)(M.a),a=o.loadRecentInsights;return Object(x.useEffect)(function(){a()},[]),Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(d.a,{title:"Your recently viewed insights",viewAllURL:m.a.savedInsights(),loading:i,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:m.a.savedInsights()},items:t.slice(0,5),renderRow:function(_,B){return Object(P.jsx)(r,{insight:_},B)}})})}try{r.displayName="InsightRow",r.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:r.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(p){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(K,l,e){"use strict";e.d(l,"b",function(){return p}),e.d(l,"a",function(){return t});var v=e("./node_modules/core-js/modules/es.array.slice.js"),R=e.n(v),C=e("./frontend/src/lib/dayjs.ts"),n=e("./node_modules/kea/lib/index.esm.js"),x=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),L=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),f=e("./frontend/src/lib/components/ProfilePicture/index.ts"),y=e("./frontend/src/scenes/persons/PersonHeader.tsx"),T=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),d=e("./frontend/src/scenes/urls.ts"),m=e("./frontend/src/lib/utils/eventUsageLogic.ts"),D=e("./frontend/src/lib/utils.tsx"),M=e("./frontend/src/lib/components/icons.tsx"),W=e("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),S=e("./frontend/src/scenes/teamLogic.tsx"),P=e("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),V=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),r=e("./node_modules/react/jsx-runtime.js"),A=e.n(r);function p(i){var o=i.recording,a=Object(n.useActions)(P.a),u=a.openSessionPlayer,_=Object(n.useActions)(m.e),B=_.reportRecordingOpenedFromRecentRecordingList;return Object(r.jsx)(V.a,{title:Object(y.b)(o.person),subtitle:"Recorded ".concat(Object(C.a)(o.start_time).fromNow()),prefix:Object(r.jsx)(f.b,{name:Object(y.b)(o.person)}),suffix:Object(r.jsxs)("div",{className:"flex items-center justify-end text-default",children:[Object(r.jsx)("span",{children:Object(D.O)(o.recording_duration)}),Object(r.jsx)(M.IconPlayCircle,{className:"text-2xl ml-2"})]}),onClick:function(){u({id:o.id,matching_events:o.matching_events}),B()}})}function t(){var i=Object(n.useValues)(S.a),o=i.currentTeam,a=Object(T.d)({key:"projectHomepage"}),u=Object(n.useValues)(a),_=u.sessionRecordings,B=u.sessionRecordingsResponseLoading;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(W.a,{}),Object(r.jsx)(L.a,{title:"Recent recordings",viewAllURL:d.a.sessionRecordings(),loading:B,emptyMessage:o!=null&&o.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:d.a.projectSettings()+"#recordings"},items:_.slice(0,5),renderRow:function(F,s){return Object(r.jsx)(p,{recording:F},s)}})]})}try{p.displayName="RecordingRow",p.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:p.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(i){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(K,l,e){"use strict";e.d(l,"a",function(){return p});var v=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),R=e.n(v),C=e("./node_modules/@babel/runtime/regenerator/index.js"),n=e.n(C),x=e("./node_modules/core-js/modules/es.array.iterator.js"),L=e.n(x),f=e("./node_modules/core-js/modules/es.object.to-string.js"),y=e.n(f),T=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),d=e.n(T),m=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/scenes/teamLogic.tsx"),M=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),W=e("./frontend/src/types.ts"),S=e("./frontend/src/lib/api.ts"),P=e("./node_modules/kea-subscriptions/lib/index.js"),V=e.n(P),r=e("./node_modules/kea-loaders/lib/index.js"),A=e.n(r),p=Object(m.kea)([Object(m.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(m.connect)({values:[D.a,["currentTeamId","currentTeam"]]}),Object(m.selectors)({primaryDashboardId:[function(){return[D.a.selectors.currentTeam]},function(t){return t==null?void 0:t.primary_dashboard}],dashboardLogic:[function(t){return[t.primaryDashboardId]},function(t){return Object(M.c)({id:t!=null?t:void 0,placement:W.n.ProjectHomepage})}]}),Object(r.loaders)(function(t){var i=t.values;return{recentInsights:[[],{loadRecentInsights:function(){var o=R()(n.a.mark(function u(){var _;return n.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,S.b.get("api/projects/".concat(i.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return _=j.sent,j.abrupt("return",_.results);case 4:case"end":return j.stop()}},u)}));function a(){return o.apply(this,arguments)}return a}()}],persons:[[],{loadPersons:function(){var o=R()(n.a.mark(function u(){var _;return n.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,S.b.persons.list();case 2:return _=j.sent,j.abrupt("return",_.results);case 4:case"end":return j.stop()}},u)}));function a(){return o.apply(this,arguments)}return a}()}]}}),Object(P.subscriptions)(function(t){var i=t.cache;return{dashboardLogic:function(a){var u;(u=i.unmount)===null||u===void 0||u.call(i),i.unmount=a?a.mount():null}}}),Object(m.afterMount)(function(t){var i,o=t.cache,a=t.actions;(i=o.unmount)===null||i===void 0||i.call(o),a.loadRecentInsights(),a.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(K,l,e){var v=e("./node_modules/css-loader/dist/runtime/api.js");l=v(!1),l.push([K.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),K.exports=l}}]);
