(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(ae,O,e){"use strict";e.r(O),e.d(O,"scene",function(){return d}),e.d(O,"ActionsTable",function(){return ne});var Y=e("./node_modules/core-js/modules/es.array.concat.js"),Oe=e("./node_modules/core-js/modules/es.array.filter.js"),N=e("./node_modules/core-js/modules/es.array.map.js"),ie=e("./node_modules/core-js/modules/es.array.slice.js"),A=e("./node_modules/core-js/modules/es.function.name.js"),B=e("./node_modules/core-js/modules/es.number.constructor.js"),r=e("./node_modules/core-js/modules/es.regexp.exec.js"),ue=e("./node_modules/core-js/modules/es.string.search.js"),se=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ce=e.n(se),w=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=e.n(w),V=e("./node_modules/react/index.js"),n=e.n(V),me=e("./frontend/src/scenes/actions/Actions.scss"),J=e("./frontend/src/lib/components/Link.tsx"),re=e("./node_modules/antd/es/input/index.js"),h=e("./node_modules/antd/es/radio/index.js"),k=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),D=e("./frontend/src/lib/utils.tsx"),U=e("./node_modules/kea/lib/index.esm.js"),q=e("./frontend/src/models/actionsModel.ts"),H=e("./node_modules/antd/es/modal/index.js"),Q=e("./node_modules/antd/es/button/index.js"),K=e("./node_modules/antd/es/row/index.js"),c=e("./node_modules/antd/es/col/index.js"),W=e("./node_modules/antd/es/card/index.js"),oe=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),S=e("./node_modules/kea-router/lib/index.js"),m=e("./frontend/src/scenes/urls.ts"),E=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx"),b=e("./frontend/src/lib/components/icons.tsx"),T=e("./frontend/src/lib/components/LemonButton/index.ts");function ee(){var I=Object(V.useState)(!1),u=F()(I,2),$=u[0],x=u[1],Z=Object(V.useState)(!1),G=F()(Z,2),p=G[0],z=G[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{type:"primary",onClick:function(){return x(!0)},"data-attr":"create-action"},"New Action"),n.a.createElement(H.a,{visible:$,style:{cursor:"pointer"},onCancel:function(){x(!1),z(!1)},title:"Create new action",footer:[p&&n.a.createElement(Q.a,{key:"back-button",onClick:function(){return z(!1)}},"Back"),n.a.createElement(Q.a,{key:"cancel-button",onClick:function(){x(!1),z(!1)}},"Cancel")]},!p&&n.a.createElement(K.a,{gutter:2,justify:"space-between"},n.a.createElement(c.a,{xs:11},n.a.createElement(W.a,{title:"Inspect element on your site",onClick:function(){return z(!0)},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40}},n.a.createElement(oe.a,null)))),n.a.createElement(c.a,{xs:11},n.a.createElement(W.a,{title:"From event or pageview",onClick:function(){S.router.actions.push(m.a.createAction())},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},n.a.createElement(b.IconEdit,null))))),p&&n.a.createElement(E.a,null)))}var C=e("./frontend/src/types.ts"),L=e("./node_modules/fuse.js/dist/fuse.esm.js"),le=e("./frontend/src/scenes/userLogic.ts"),y=e("./frontend/src/scenes/teamLogic.ts"),he=e("./frontend/src/lib/api.ts"),Ee=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),je=e("./frontend/src/lib/components/LemonTable/index.ts"),de=e("./frontend/src/lib/components/LemonDivider/index.ts"),Te=e("./frontend/src/lib/components/LemonButton/More.tsx"),te=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),Pe=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),fe=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),X=function(u,$){return new L.a(u,{keys:["name","url"],threshold:.3}).search($).map(function(x){return x.item})},d={component:ne};function ne(){var I=Object(U.useValues)(y.a),u=I.currentTeam,$=Object(U.useValues)(Object(q.a)({params:"include_count=1"})),x=$.actions,Z=$.actionsLoading,G=Object(U.useActions)(q.a),p=G.loadActions,z=Object(V.useState)(""),o=F()(z,2),s=o[0],t=o[1],a=Object(V.useState)(!1),l=F()(a,2),j=l[0],M=l[1],f=Object(U.useValues)(le.a),v=f.user,R=f.hasAvailableFeature,ve=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(i,P){return(i.name||"").localeCompare(P.name||"")},render:function(i,P,_e){return n.a.createElement(J.a,{"data-attr":"action-link-"+_e,to:m.a.action(P.id),className:"row-name"},i||n.a.createElement("i",null,"Unnamed action"))}}].concat(ce()(R(C.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(i){return n.a.createElement(te.a,{tags:i,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(i,P){var _e;return n.a.createElement("span",null,!((_e=P.steps)===null||_e===void 0)&&_e.length?P.steps.map(function(ye){return n.a.createElement("div",{key:ye.id},function(){var ge=Object(D.vb)(ye.url||"");switch(ge=ge.slice(0,40)+(ge.length>40?"...":""),ye.event){case"$autocapture":return"Autocapture";case"$pageview":switch(ye.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,ge));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,ge));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,ge))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,ye.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(Ee.b)(),Object(Ee.a)()],ce()(u!=null&&u.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(i,P){return Number(i.post_to_slack)-Number(P.post_to_slack)},render:function(i){return i?n.a.createElement(k.a,null):null}}]:[]),[{width:0,render:function(i,P){return n.a.createElement(Te.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{type:"stealth",to:m.a.action(P.id),fullWidth:!0},"Edit"),n.a.createElement(T.a,{type:"stealth",to:Object(S.combineUrl)(m.a.insightNew({insight:C.y.TRENDS,interval:"day",display:C.i.ActionsLineGraph,actions:[{id:P.id,name:P.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(de.a,null),n.a.createElement(T.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Object(D.w)({endpoint:he.b.actions.determineDeleteEndpoint(),object:P,callback:p})},fullWidth:!0},"Delete action"))})}}]),_=x;return s&&s!==""&&(_=X(_,s)),j&&(_=_.filter(function(g){var i;return((i=g.created_by)===null||i===void 0?void 0:i.uuid)===(v==null?void 0:v.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(fe.a,{activeTab:Pe.b.Actions}),n.a.createElement(re.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(i){t(i.target.value)}}),n.a.createElement(h.a.Group,{buttonStyle:"solid",value:j,onChange:function(i){return M(i.target.value)}},n.a.createElement(h.a.Button,{value:!1},"All actions"),n.a.createElement(h.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb float-right"},n.a.createElement(ee,null)),n.a.createElement(je.a,{columns:ve,loading:Z,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:_,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(ae,O,e){"use strict";e.d(O,"a",function(){return A});var Y=e("./frontend/src/lib/components/PageHeader.tsx"),Oe=e("./node_modules/react/index.js"),N=e.n(Oe),ie=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx");function A(B){var r=B.activeTab,ue=B.hideTabs;return N.a.createElement(N.a.Fragment,null,N.a.createElement(Y.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!ue&&N.a.createElement(ie.a,{tab:r}))}try{A.displayName="DataManagementPageHeader",A.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:A.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(B){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(ae,O,e){"use strict";e.d(O,"b",function(){return c}),e.d(O,"a",function(){return S});var Y=e("./node_modules/core-js/modules/es.array.iterator.js"),Oe=e.n(Y),N=e("./node_modules/core-js/modules/es.array.map.js"),ie=e.n(N),A=e("./node_modules/core-js/modules/es.object.entries.js"),B=e.n(A),r=e("./node_modules/core-js/modules/es.object.from-entries.js"),ue=e.n(r),se=e("./node_modules/core-js/modules/es.object.to-string.js"),ce=e.n(se),w=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),F=e.n(w),V=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),n=e.n(V),me=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),J=e.n(me),re=e("./node_modules/react/index.js"),h=e.n(re),k=e("./node_modules/kea/lib/index.esm.js"),D=e("./node_modules/antd/es/tabs/index.js"),U=e("./frontend/src/scenes/urls.ts"),q=e("./frontend/src/lib/components/Tooltip.tsx"),H=e("./frontend/src/lib/components/icons.tsx"),Q=e("./frontend/src/lib/components/TitleWithIcon.tsx"),K,c;(function(m){m.Actions="actions",m.EventDefinitions="events",m.EventPropertyDefinitions="properties"})(c||(c={}));var W=(K={},J()(K,c.EventPropertyDefinitions,U.a.eventPropertyDefinitions()),J()(K,c.EventDefinitions,U.a.eventDefinitions()),J()(K,c.Actions,U.a.actions()),K),oe=Object(k.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(E){return{tab:E}}},reducers:{tab:[c.EventDefinitions,{setTab:function(E,b){var T=b.tab;return T}}]},actionToUrl:function(){return{setTab:function(b){var T=b.tab;return W[T]||U.a.events()}}},urlToAction:function(E){var b=E.actions,T=E.values;return Object.fromEntries(Object.entries(W).map(function(ee){var C=n()(ee,2),L=C[0],le=C[1];return[le,function(){T.tab!==L&&b.setTab(L)}]}))}});function S(m){var E=m.tab,b=Object(k.useActions)(oe),T=b.setTab;return h.a.createElement(D.a,{tabPosition:"top",animated:!1,activeKey:E,onTabClick:function(C){return T(C)}},h.a.createElement(D.a.TabPane,{tab:h.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:c.EventDefinitions}),h.a.createElement(D.a.TabPane,{tab:h.a.createElement(Q.a,{icon:h.a.createElement(q.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},h.a.createElement(H.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:c.Actions}),h.a.createElement(D.a.TabPane,{tab:h.a.createElement(Q.a,{icon:h.a.createElement(q.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},h.a.createElement(H.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Properties"),key:c.EventPropertyDefinitions}))}try{S.displayName="DataManagementPageTabs",S.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:S.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(m){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx":function(ae,O,e){"use strict";e.d(O,"a",function(){return c});var Y=e("./node_modules/core-js/modules/es.array.index-of.js"),Oe=e("./node_modules/core-js/modules/es.regexp.exec.js"),N=e("./node_modules/core-js/modules/es.string.match.js"),ie=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),A=e.n(ie),B=e("./node_modules/react/index.js"),r=e.n(B),ue=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),se=e.n(ue),ce=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss"),w=e.n(ce),F={};F.insert="head",F.singleton=!1;var V=se()(w.a,F),n=w.a.locals||{},me=e("./node_modules/clsx/dist/clsx.m.js"),J=e("./node_modules/kea/lib/index.esm.js"),re=e("./frontend/src/lib/components/LemonTable/index.ts"),h=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),k=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),D=e("./frontend/src/lib/components/LemonButton/index.ts"),U=e("./node_modules/antd/es/input/index.js"),q=e("./node_modules/antd/es/button/index.js"),H=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),Q=e("./frontend/src/lib/utils.tsx"),K=e("./frontend/src/lib/components/LemonButton/More.tsx");function c(W){var oe=W.pageKey,S=W.actionId,m=Object(H.c)({actionId:S}),E=Object(J.useValues)(m),b=E.appUrlsKeyed,T=E.suggestionsLoading,ee=E.searchTerm,C=E.launchUrl,L=E.appUrls,le=E.editUrlIndex,y=Object(J.useActions)(m),he=y.addUrl,Ee=y.removeUrl,je=y.setSearchTerm,de=y.updateUrl,Te=y.newUrl,te=y.setEditUrlIndex,Pe=[{title:"URLs",dataIndex:"url",key:"url",render:function(X,d){var ne=Object(B.useState)(d.url),I=A()(ne,2),u=I[0],$=I[1],x=Object(B.useState)(""),Z=A()(x,2),G=Z[0],p=Z[1];Object(B.useEffect)(function(){return $(d.url)},[d]);var z=function(){if(p(""),u===H.a&&Ee(d.originalIndex),u.indexOf("*")>-1&&!u.match(/^(.*)\*[^\*]*\.[^\*]+\.[^\*]+$/)){p("You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.");return}if(!Object(Q.db)(u)){p("Please type a valid URL or domain.");return}if(L.indexOf(u)>-1&&L.indexOf(u,d.originalIndex)!==d.originalIndex&&L.indexOf(u,d.originalIndex+1)!==d.originalIndex){p("This URL is already registered.");return}de(d.originalIndex,u)};return d.type==="suggestion"||X!==H.a&&le!==d.originalIndex?r.a.createElement("div",{className:Object(me.a)("authorized-url-col",d.type)},d.type==="authorized"&&r.a.createElement(k.a,{style:{marginRight:4}}),X,d.type==="suggestion"&&r.a.createElement(h.a,null,"Suggestion")):r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(U.a,{value:u,onChange:function(s){return $(s.target.value)},onPressEnter:z,autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)"}),r.a.createElement(q.a,{type:"primary",onClick:z},"Save")),G&&r.a.createElement("span",{className:"text-small text-danger"},G))}},{title:"",key:"actions",render:function(X,d,ne){return r.a.createElement("div",{className:"actions-col"},d.type==="suggestion"?r.a.createElement(D.a,{type:"secondary",onClick:function(){return he(d.url)}},"Apply suggestion"):r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{type:"highlighted",href:C(d.url),className:"mr"},"Open with Toolbar"),r.a.createElement(K.a,{overlay:r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{fullWidth:!0,type:"stealth",onClick:function(){return te(d.originalIndex)}},"Edit authorized URL"),r.a.createElement(D.a,{fullWidth:!0,style:{color:"var(--danger)"},type:"stealth",onClick:function(){return Ee(ne)}},"Remove authorized URL"))})))}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"flex-center mb"},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(U.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:ee,onChange:function(X){je(X.target.value)},autoFocus:oe==="toolbar-launch"&&!Object(Q.W)()})),r.a.createElement(D.a,{type:"primary",onClick:Te},"Add",oe==="toolbar-launch"&&" authorized domain")),r.a.createElement(re.a,{className:"authorized-urls-table",columns:Pe,dataSource:b,emptyState:ee?"There are no authorized URLs that match your search.":"There are no authorized URLs or domains. Add one to get started.",loading:T}))}try{c.displayName="AuthorizedUrlsTable",c.__docgenInfo={description:"",displayName:"AuthorizedUrlsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"]={docgenInfo:c.__docgenInfo,name:"AuthorizedUrlsTable",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"})}catch(W){}},"./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts":function(ae,O,e){"use strict";e.d(O,"b",function(){return G}),e.d(O,"a",function(){return p}),e.d(O,"c",function(){return z});var Y=e("./node_modules/core-js/modules/es.array.concat.js"),Oe=e.n(Y),N=e("./node_modules/core-js/modules/es.array.filter.js"),ie=e.n(N),A=e("./node_modules/core-js/modules/es.array.includes.js"),B=e.n(A),r=e("./node_modules/core-js/modules/es.array.index-of.js"),ue=e.n(r),se=e("./node_modules/core-js/modules/es.array.iterator.js"),ce=e.n(se),w=e("./node_modules/core-js/modules/es.array.map.js"),F=e.n(w),V=e("./node_modules/core-js/modules/es.array.slice.js"),n=e.n(V),me=e("./node_modules/core-js/modules/es.array.splice.js"),J=e.n(me),re=e("./node_modules/core-js/modules/es.object.assign.js"),h=e.n(re),k=e("./node_modules/core-js/modules/es.object.to-string.js"),D=e.n(k),U=e("./node_modules/core-js/modules/es.regexp.exec.js"),q=e.n(U),H=e("./node_modules/core-js/modules/es.regexp.to-string.js"),Q=e.n(H),K=e("./node_modules/core-js/modules/es.string.includes.js"),c=e.n(K),W=e("./node_modules/core-js/modules/es.string.iterator.js"),oe=e.n(W),S=e("./node_modules/core-js/modules/es.string.search.js"),m=e.n(S),E=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),b=e.n(E),T=e("./node_modules/core-js/modules/web.url.js"),ee=e.n(T),C=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),L=e.n(C),le=e("./node_modules/@babel/runtime/regenerator/index.js"),y=e.n(le),he=e("./node_modules/regenerator-runtime/runtime.js"),Ee=e.n(he),je=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),de=e.n(je),Te=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),te=e.n(Te),Pe=e("./node_modules/kea/lib/index.esm.js"),fe=e("./frontend/src/lib/api.ts"),X=e("./frontend/src/lib/utils.tsx"),d=e("./frontend/src/scenes/teamLogic.ts"),ne=e("./frontend/src/lib/dayjs.ts"),I=e("./node_modules/fuse.js/dist/fuse.esm.js"),u=e("./node_modules/kea-router/lib/index.js"),$=e.n(u);function x(o,s){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),t.push.apply(t,a)}return t}function Z(o){for(var s=1;s<arguments.length;s++){var t=arguments[s]!=null?arguments[s]:{};s%2?x(Object(t),!0).forEach(function(a){te()(o,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(t,a))})}return o}function G(o,s,t){var a=Z(Z({userIntent:t?void 0:s?"edit-action":"add-action"},s?{actionId:s}:{}),o?{appUrl:o}:{});return"/api/user/redirect_to_site/"+Object(u.encodeParams)(a,"?")}var p="https://",z=Object(Pe.kea)({path:function(s){return["lib","components","AppEditorLink","appUrlsLogic",s]},key:function(s){return"".concat(s.pageKey).concat(s.actionId)||"global"},props:{},connect:{values:[d.a,["currentTeam","currentTeamId"]],actions:[d.a,["updateCurrentTeam"]]},actions:function(){return{setAppUrls:function(t){return{appUrls:t}},addUrl:function(t,a){return{url:t,launch:a}},newUrl:!0,removeUrl:function(t){return{index:t}},updateUrl:function(t,a){return{index:t,url:a}},launchAtUrl:function(t){return{url:t}},setSearchTerm:function(t){return{term:t}},setEditUrlIndex:function(t){return{originalIndex:t}}}},loaders:function(s){var t=s.values;return{suggestions:{__default:[],loadSuggestions:function(){var a=de()(y.a.mark(function j(){var M,f,v,R;return y.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return f={events:[{id:"$pageview",name:"$pageview",type:"events"}],breakdown:"$current_url",date_from:Object(ne.a)().subtract(3,"days").toISOString()},_.next=3,fe.b.get("api/projects/".concat(t.currentTeamId,"/insights/trend/?").concat(Object(X.xb)(f)));case 3:if(v=_.sent.result,!(v&&((M=v[0])===null||M===void 0?void 0:M.count)===0)){_.next=6;break}return _.abrupt("return",[]);case 6:return R=[],_.abrupt("return",(v||[]).filter(function(g){if(!g.breakdown_value)return!1;try{var i=new URL(g.breakdown_value.toString()).hostname;return R.indexOf(i)>-1||t.appUrls.filter(function(P){return P.indexOf(i)>-1}).length>0?void 0:(R.push(i),!0)}catch(P){return!1}}).map(function(g){return g.breakdown_value}).slice(0,20));case 8:case"end":return _.stop()}},j)}));function l(){return a.apply(this,arguments)}return l}()}}},events:function(s){var t=s.actions,a=s.values;return{afterMount:function(){t.loadSuggestions(),a.currentTeam&&t.setAppUrls(a.currentTeam.app_urls)}}},reducers:function(){return{appUrls:[[],{setAppUrls:function(t,a){var l=a.appUrls;return l},addUrl:function(t,a){var l=a.url;return t.concat([l])},newUrl:function(t){return t.includes(p)?t:[p].concat(t)},updateUrl:function(t,a){var l=a.index,j=a.url;return Object.assign(L()(t),te()({},l,j))},removeUrl:function(t,a){var l=a.index,j=L()(t);return j.splice(l,1),j}}],suggestions:[[],{addUrl:function(t,a){var l=a.url;return L()(t).filter(function(j){return l!==j})}}],searchTerm:["",{setSearchTerm:function(t,a){var l=a.term;return l}}],editUrlIndex:[null,{setEditUrlIndex:function(t,a){var l=a.originalIndex;return l},removeUrl:function(t,a){var l=a.index;return t&&l<t?t-1:l===t?null:t}}]}},listeners:function(s){var t,a=s.sharedListeners,l=s.values,j=s.actions;return t={addUrl:[a.saveAppUrls,function(){var M=de()(y.a.mark(function f(v){var R,ve;return y.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:R=v.url,ve=v.launch,ve&&j.launchAtUrl(R);case 2:case"end":return g.stop()}},f)}));return function(f){return M.apply(this,arguments)}}()],removeUrl:a.saveAppUrls,updateUrl:[a.saveAppUrls,function(){return j.setEditUrlIndex(null)}]},te()(t,d.a.actionTypes.loadCurrentTeamSuccess,function(){var M=de()(y.a.mark(function f(v){var R;return y.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:R=v.currentTeam,R&&j.setAppUrls(R.app_urls);case 2:case"end":return _.stop()}},f)}));return function(f){return M.apply(this,arguments)}}()),te()(t,"launchAtUrl",function(f){var v=f.url;window.location.href=l.launchUrl(v)}),t},sharedListeners:function(s){var t=s.values;return{saveAppUrls:function(){d.a.actions.updateCurrentTeam({app_urls:t.appUrls})}}},selectors:function(s){var t=s.props;return{appUrlsKeyed:[function(a){return[a.appUrls,a.suggestions,a.searchTerm]},function(a,l,j){var M=a.map(function(f,v){return{url:f,type:"authorized",originalIndex:v}}).concat(l.map(function(f,v){return{url:f,type:"suggestion",originalIndex:v}}));return j?new I.a(M,{keys:["url"],threshold:.3}).search(j).map(function(f){return f.item}):M}],launchUrl:[function(){return[]},function(){return function(a){return G(a,t.actionId,!t.actionId)}}]}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss":function(ae,O,e){var Y=e("./node_modules/css-loader/dist/runtime/api.js");O=Y(!1),O.push([ae.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.authorized-urls-table .authorized-url-col{display:flex;align-items:center}.authorized-urls-table .authorized-url-col .lemon-tag{margin-left:6px}.authorized-urls-table .authorized-url-col.suggestion{color:#747ea1}.authorized-urls-table .authorized-url-col.authorized{color:var(--success)}.authorized-urls-table .actions-col{display:flex;align-items:center;justify-content:flex-end}",""]),ae.exports=O}}]);
