var A=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var y=(c,d)=>{var t={};for(var s in c)Q.call(c,s)&&d.indexOf(s)<0&&(t[s]=c[s]);if(c!=null&&A)for(var s of A(c))d.indexOf(s)<0&&Z.call(c,s)&&(t[s]=c[s]);return t};(window.webpackJsonp=window.webpackJsonp||[]).push([[291],{"./frontend/src/lib/components/Table/utils.tsx":function(c,d,t){"use strict";t.d(d,"a",function(){return m});var s=t("./frontend/src/lib/hooks/useWindowSize.js"),_=t("./frontend/src/lib/utils/responsiveUtils.tsx"),b=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),D=t.n(b);function m(O){return Object(b.jsx)("span",{style:{whiteSpace:"nowrap"},children:O})}const p=O=>{const{width:g}=Object(s.a)(),u=Object(_.b)(O),x=!!g&&g<=u;return{isTableScrolling:x,tableScrollBreakpoint:u,tableScrollX:x?"max-content":`${u}px`}};try{m.displayName="normalizeColumnTitle",m.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:m.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(O){}try{p.displayName="useIsTableScrolling",p.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:p.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(O){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(c,d,t){"use strict";t.r(d),t.d(d,"scene",function(){return $}),t.d(d,"FeatureFlags",function(){return M}),t.d(d,"groupFilters",function(){return E});var s=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),_=t("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),b=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),D=t("./frontend/src/lib/components/Link.tsx"),m=t("./frontend/src/lib/utils.tsx"),p=t("./frontend/src/lib/components/PageHeader.tsx"),O=t("./frontend/src/types.ts"),g=t("./frontend/src/lib/components/Table/utils.tsx"),u=t("./frontend/src/scenes/urls.ts"),x=t("./frontend/src/lib/utils/stringWithWBR.tsx"),C=t("./frontend/src/scenes/teamLogic.tsx"),f=t("./frontend/src/lib/components/LemonButton/index.ts"),I=t("./frontend/src/lib/components/LemonDivider/index.ts"),R=t("./frontend/src/lib/components/LemonTable/index.ts"),S=t("./frontend/src/lib/components/LemonButton/More.tsx"),P=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),B=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),W=t("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),K=t("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),j=t("./frontend/@posthog/lemon-ui/src/index.ts"),U=t("./frontend/src/lib/components/Tooltip.tsx"),F=t("./frontend/src/lib/components/icons.tsx"),L=t("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),q=t.n(L),N=t("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),z=t("./frontend/src/scenes/userLogic.ts"),e=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),ee=t.n(e);const $={component:M,logic:_.b};function Y(){const{currentTeamId:i}=Object(s.useValues)(C.a),{featureFlagsLoading:r,searchedFeatureFlags:a,searchTerm:V,uniqueCreators:G,filters:h}=Object(s.useValues)(_.b),{updateFeatureFlag:H,loadFeatureFlags:J,setSearchTerm:k,setFeatureFlagsFilters:T}=Object(s.useActions)(_.b),{hasAvailableFeature:w}=Object(s.useValues)(z.a),X=[{title:Object(g.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(o,l)=>(o.key||"").localeCompare(l.key||""),render:function(l,n){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-row items-center",children:[Object(e.jsx)(D.a,{to:n.id?u.a.featureFlag(n.id):void 0,className:"row-name",children:Object(x.a)(n.key,17)}),!n.can_edit&&Object(e.jsx)(U.a,{title:"You don't have edit permissions for this feature flag.",children:Object(e.jsx)(F.IconLock,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})})]}),n.name&&Object(e.jsx)("span",{className:"row-description",style:{maxWidth:"24rem"},children:n.name})]})}},...w(O.e.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function(l){return l?Object(e.jsx)(N.a,{tags:l,staticOnly:!0}):null}}]:[],Object(P.b)(),Object(P.a)(),{title:"Release conditions",width:100,render:function(l,n){return E(n.filters.groups)}},{title:"Status",dataIndex:"active",sorter:(o,l)=>Number(o.active)-Number(l.active),width:100,render:function(l,n){return Object(e.jsx)(e.Fragment,{children:n.performed_rollback?Object(e.jsx)(j.LemonTag,{type:"warning",className:"uppercase",children:"Rolled Back"}):n.active?Object(e.jsx)(j.LemonTag,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(j.LemonTag,{type:"default",className:"uppercase",children:"Disabled"})})}},{width:0,render:function(l,n){return Object(e.jsx)(S.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(f.a,{status:"stealth",onClick:()=>{Object(m.s)(n.key,"feature flag key")},fullWidth:!0,children:"Copy feature flag key"}),Object(e.jsxs)(f.a,{status:"stealth",onClick:()=>{n.id&&H({id:n.id,payload:{active:!n.active}})},id:`feature-flag-${n.id}-switch`,disabled:!n.can_edit,fullWidth:!0,children:[n.active?"Disable":"Enable"," feature flag"]}),n.id&&Object(e.jsx)(f.a,{status:"stealth",fullWidth:!0,disabled:!n.can_edit,onClick:()=>n.id&&L.router.actions.push(u.a.featureFlag(n.id)),children:"Edit"}),Object(e.jsx)(f.a,{status:"stealth",to:u.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${n.key}`}),"data-attr":"usage",fullWidth:!0,children:"Try out in Insights"}),Object(e.jsx)(I.a,{}),n.id&&Object(e.jsx)(f.a,{status:"danger",onClick:()=>{Object(m.x)({endpoint:`projects/${i}/feature_flags`,object:{name:n.key,id:n.id},callback:J})},disabled:!n.can_edit,fullWidth:!0,children:"Delete feature flag"})]})})}}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{children:Object(e.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(e.jsx)(j.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:k,value:V}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Status"})}),Object(e.jsx)(j.LemonSelect,{onChange:o=>{if(o)if(o==="all"){if(h){const l=h,{active:n}=l,v=y(l,["active"]);T(v,!0)}}else T({active:o})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0}),Object(e.jsx)("span",{className:"ml-1",children:Object(e.jsx)("b",{children:"Created by"})}),Object(e.jsx)(j.LemonSelect,{onChange:o=>{if(o)if(o==="any"){if(h){const l=h,{created_by:n}=l,v=y(l,["created_by"]);T(v,!0)}}else T({created_by:o})},options:G,value:"any"})]})]})}),Object(e.jsx)(R.a,{dataSource:a,columns:X,rowKey:"key",defaultSorting:{columnKey:"created_at",order:-1},noSortingCancellation:!0,loading:r,pagination:{pageSize:100},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table"})]})}function M(){const{activeTab:i}=Object(s.useValues)(_.b),{setActiveTab:r}=Object(s.useActions)(_.b);return Object(e.jsxs)("div",{className:"feature_flags",children:[Object(e.jsx)(p.a,{title:"Feature Flags",buttons:Object(e.jsx)(f.a,{type:"primary",to:u.a.featureFlag("new"),"data-attr":"new-feature-flag",children:"New feature flag"})}),Object(e.jsxs)(b.a,{activeKey:i,destroyInactiveTabPane:!0,onChange:a=>r(a),children:[Object(e.jsx)(b.a.TabPane,{tab:"Overview",children:Object(e.jsx)(Y,{})},"overview"),Object(e.jsx)(b.a.TabPane,{tab:"History",children:Object(e.jsx)(W.a,{scope:K.a.FEATURE_FLAG})},"history")]})]})}function E(i){if(i.length===0||!i.some(r=>r.rollout_percentage!==0))return"No users";if(i.some(r=>{var a;return!((a=r.properties)!==null&&a!==void 0&&a.length)&&[null,void 0,100].includes(r.rollout_percentage)}))return"100% of all users";if(i.length===1){const{properties:r,rollout_percentage:a=null}=i[0];return(r==null?void 0:r.length)>0?Object(e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"},children:[a!=null&&Object(e.jsxs)("span",{style:{flexShrink:0,marginRight:5},children:[a,"% of"]}),Object(e.jsx)(B.a,{filters:r,style:{margin:0,flexDirection:"column"}})]}):a!==null?`${a}% of all users`:(console.error("A group with full rollout was not detected early"),"All users")}return"Multiple groups"}try{E.displayName="groupFilters",E.__docgenInfo={description:"",displayName:"groupFilters",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:E.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(i){}}}]);
