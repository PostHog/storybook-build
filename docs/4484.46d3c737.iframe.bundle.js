(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[4484],{"./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{F:function(){return UserActivityIndicator_UserActivityIndicator_UserActivityIndicator}});var clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),ProfilePicture=__webpack_require__("./frontend/src/lib/lemon-ui/ProfilePicture/index.ts"),TZLabel=__webpack_require__("./frontend/src/lib/components/TZLabel/index.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),UserActivityIndicator=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.scss"),UserActivityIndicator_default=__webpack_require__.n(UserActivityIndicator),options={insert:"head",singleton:!1},jsx_runtime=(injectStylesIntoStyleTag_default()(UserActivityIndicator_default(),options),UserActivityIndicator_default().locals,__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"));function UserActivityIndicator_UserActivityIndicator_UserActivityIndicator(_ref){let{at:at,by:by,prefix:prefix="Last modified",className:className}=_ref;return at||by?(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("UserActivityIndicator",className),children:[(0,jsx_runtime.jsxs)("div",{children:[prefix,at&&" ",at&&(0,jsx_runtime.jsx)(TZLabel.w,{time:at}),by&&" by"]}),by&&(0,jsx_runtime.jsx)(ProfilePicture.Y,{name:by.first_name,email:by.email,showName:!0,size:"md"})]}):null}try{UserActivityIndicator_UserActivityIndicator_UserActivityIndicator.displayName="UserActivityIndicator",UserActivityIndicator_UserActivityIndicator_UserActivityIndicator.__docgenInfo={description:"",displayName:"UserActivityIndicator",props:{prefix:{defaultValue:{value:"Last modified"},description:"",name:"prefix",required:!1,type:{name:"string"}},at:{defaultValue:null,description:"",name:"at",required:!0,type:{name:"string | null | undefined"}},by:{defaultValue:null,description:"",name:"by",required:!1,type:{name:"UserBasicType | null"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx#UserActivityIndicator"]={docgenInfo:UserActivityIndicator_UserActivityIndicator_UserActivityIndicator.__docgenInfo,name:"UserActivityIndicator",path:"frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx#UserActivityIndicator"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylistScene.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SessionRecordingsPlaylistScene:function(){return SessionRecordingsPlaylistScene},scene:function(){return scene}});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),src=(__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss"),__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts")),LemonSkeleton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSkeleton/index.tsx"),EditableField=__webpack_require__("./frontend/src/lib/components/EditableField/EditableField.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),types=__webpack_require__("./frontend/src/types.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),fast_deep_equal=__webpack_require__("./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),playlistUtils=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/playlistUtils.ts"),kea_loaders_lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js");const sessionRecordingsPlaylistLogic=(0,index_esm.kea)([(0,index_esm.path)((key=>["scenes","session-recordings","playlist","sessionRecordingsPlaylistLogic",key])),(0,index_esm.props)({}),(0,index_esm.key)((props=>props.shortId)),(0,index_esm.connect)({values:[cohortsModel.Q,["cohortsById"]]}),(0,index_esm.actions)({updatePlaylist:function(properties){return{properties:properties,silent:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},setFilters:filters=>({filters:filters})}),(0,kea_loaders_lib.loaders)((_ref=>{let{values:values,props:props}=_ref;return{playlist:[null,{getPlaylist:async()=>(0,playlistUtils.A5)(props.shortId),updatePlaylist:async _ref2=>{let{properties:properties,silent:silent}=_ref2;return values.playlist?.short_id?(0,playlistUtils.CE)(values.playlist?.short_id,null!=properties?properties:{filters:values.filters||void 0},silent):values.playlist},duplicatePlaylist:async()=>{var _values$playlist;return(0,playlistUtils.NR)(null!==(_values$playlist=values.playlist)&&void 0!==_values$playlist?_values$playlist:{},!0)},deletePlaylist:async()=>values.playlist?(0,playlistUtils.l8)(values.playlist,(()=>{lib.router.actions.replace(urls.j.replay(types.yd.Playlists))})):null}]}})),(0,index_esm.reducers)((()=>({filters:[null,{getPlaylistSuccess:(_,_ref3)=>{let{playlist:playlist}=_ref3;return playlist?.filters||null},updatePlaylistSuccess:(_,_ref4)=>{let{playlist:playlist}=_ref4;return playlist?.filters||null},setFilters:(_,_ref5)=>{let{filters:filters}=_ref5;return filters}}]}))),(0,index_esm.listeners)((_ref6=>{let{actions:actions,values:values}=_ref6;return{getPlaylistSuccess:()=>{values.playlist?.derived_name!==values.derivedName&&actions.updatePlaylist({derived_name:values.derivedName},!0)}}})),(0,lib.beforeUnload)((_ref7=>{let{values:values,actions:actions}=_ref7;return{enabled:newLocation=>values.hasChanges&&newLocation?.pathname!==lib.router.values.location.pathname,message:"Leave playlist?\nChanges you made will be discarded.",onConfirm:()=>{actions.setFilters(values.playlist?.filters||null)}}})),(0,index_esm.selectors)((()=>({breadcrumbs:[s=>[s.playlist],playlist=>[{name:"Recordings",path:urls.j.replay()},{name:"Playlists",path:urls.j.replay(types.yd.Playlists)},{name:playlist?.name||playlist?.derived_name||"(Untitled)",path:urls.j.replayPlaylist(playlist?.short_id||"")}]],hasChanges:[s=>[s.playlist,s.filters],(playlist,filters)=>!fast_deep_equal_default()(playlist?.filters,filters)],derivedName:[s=>[s.filters,s.cohortsById],(filters,cohortsById)=>(0,playlistUtils.rP)(filters||{},cohortsById)?.slice(0,400)||"(Untitled)"]}))),(0,index_esm.afterMount)((_ref8=>{let{actions:actions}=_ref8;actions.getPlaylist()}))]);var NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),UserActivityIndicator=__webpack_require__("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),playlist_SessionRecordingsPlaylist=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),playerSettingsLogic=__webpack_require__("./frontend/src/scenes/session-recordings/player/playerSettingsLogic.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:SessionRecordingsPlaylistScene,logic:sessionRecordingsPlaylistLogic,paramsToProps:_ref=>{let{params:{id:id}}=_ref;return{shortId:id}}};function SessionRecordingsPlaylistScene(){const{playlist:playlist,playlistLoading:playlistLoading,hasChanges:hasChanges,derivedName:derivedName}=(0,index_esm.useValues)(sessionRecordingsPlaylistLogic),{setFilters:setFilters,updatePlaylist:updatePlaylist,duplicatePlaylist:duplicatePlaylist,deletePlaylist:deletePlaylist}=(0,index_esm.useActions)(sessionRecordingsPlaylistLogic),{showFilters:showFilters}=(0,index_esm.useValues)(playerSettingsLogic.N),{setShowFilters:setShowFilters}=(0,index_esm.useActions)(playerSettingsLogic.N);return!playlist&&playlistLoading?(0,jsx_runtime.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,jsx_runtime.jsx)(LemonSkeleton.y,{className:"h-10 w-1/4"}),(0,jsx_runtime.jsx)(LemonSkeleton.y,{className:" w-1/3"}),(0,jsx_runtime.jsx)(LemonSkeleton.y,{className:" w-1/4"}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,jsx_runtime.jsx)(LemonSkeleton.y.Button,{}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-4",children:[(0,jsx_runtime.jsx)(LemonSkeleton.y.Button,{}),(0,jsx_runtime.jsx)(LemonSkeleton.y.Button,{})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between gap-4 mt-8",children:[(0,jsx_runtime.jsx)("div",{className:"space-y-8 w-1/4",children:(0,jsx_runtime.jsx)(LemonSkeleton.y,{className:"h-10",repeat:10})}),(0,jsx_runtime.jsx)("div",{className:"flex-1"})]})]}):playlist?(0,jsx_runtime.jsxs)("div",{className:"-mb-16",children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:(0,jsx_runtime.jsx)(EditableField.f,{name:"name",value:playlist.name||"",placeholder:derivedName,onSave:value=>updatePlaylist({short_id:playlist.short_id,name:value}),saveOnBlur:!0,maxLength:400,mode:void 0,"data-attr":"playlist-name"}),buttons:(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.LemonButton,{status:"stealth",onClick:()=>duplicatePlaylist(),fullWidth:!0,"data-attr":"duplicate-playlist",children:"Duplicate"}),(0,jsx_runtime.jsx)(src.LemonButton,{status:"stealth",onClick:()=>updatePlaylist({short_id:playlist.short_id,pinned:!playlist.pinned}),fullWidth:!0,children:playlist.pinned?"Unpin playlist":"Pin playlist"}),(0,jsx_runtime.jsx)(src.LemonDivider,{}),(0,jsx_runtime.jsx)(src.LemonButton,{status:"danger",onClick:()=>deletePlaylist(),fullWidth:!0,children:"Delete playlist"})]})}),(0,jsx_runtime.jsx)(src.LemonDivider,{vertical:!0}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",disabledReason:showFilters&&!hasChanges?"No changes to save":void 0,loading:hasChanges&&playlistLoading,onClick:()=>{showFilters?updatePlaylist():setShowFilters(!showFilters)},children:showFilters?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Save changes"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Edit"})})]}),caption:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(EditableField.f,{multiline:!0,name:"description",markdown:!0,value:playlist.description||"",placeholder:"Description (optional)",onSave:value=>updatePlaylist({description:value}),saveOnBlur:!0,maxLength:400,"data-attr":"playlist-description",compactButtons:!0}),(0,jsx_runtime.jsx)(UserActivityIndicator.F,{at:playlist.last_modified_at,by:playlist.last_modified_by,className:"mt-2"})]})}),playlist.short_id?(0,jsx_runtime.jsx)(playlist_SessionRecordingsPlaylist.m,{playlistShortId:playlist.short_id,filters:playlist.filters,onFiltersChange:setFilters}):null]}):(0,jsx_runtime.jsx)(NotFound.T,{object:"Recording Playlist"})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".UserActivityIndicator{display:flex;align-items:center;font-size:.8125rem;white-space:nowrap;overflow-x:auto}",""]),module.exports=exports}}]);