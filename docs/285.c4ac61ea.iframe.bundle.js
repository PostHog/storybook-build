(window.webpackJsonp=window.webpackJsonp||[]).push([[285,289],{"./frontend/src/scenes/cohorts/Cohort.tsx":function(I,a,e){"use strict";e.r(a),e.d(a,"scene",function(){return ye}),e.d(a,"Cohort",function(){return le});var r=e("./node_modules/core-js/modules/es.function.name.js"),c=e("./node_modules/kea/lib/index.esm.js"),M=e("./frontend/src/scenes/urls.ts"),x=e("./frontend/src/models/cohortsModel.ts"),i=Object(c.kea)([Object(c.props)({}),Object(c.key)(function(O){return O.id||"new"}),Object(c.path)(["scenes","cohorts","cohortLogic"]),Object(c.selectors)({breadcrumbs:[function(){return[x.a.selectors.cohortsById,function(O,T){return T.id}]},function(O,T){var E;return[{name:"Cohorts",path:M.a.cohorts()},{name:T!=="new"&&((E=O[T])===null||E===void 0?void 0:E.name)||"Untitled"}]}]})]),G=e("./node_modules/antd/lib/dropdown/style/index.css"),v=e("./frontend/src/scenes/cohorts/cohortEditLogic.ts"),Z=e("./frontend/src/scenes/userLogic.ts"),C=e("./frontend/src/lib/components/PageHeader.tsx"),p=e("./frontend/src/lib/components/LemonButton/index.ts"),u=e("./node_modules/kea-router/lib/index.js"),b=e("./node_modules/antd/es/divider/index.js"),d=e("./frontend/src/lib/forms/Field.tsx"),h=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),V=e("./frontend/src/lib/components/Tooltip.tsx"),o=e("./frontend/src/lib/components/LemonSelect.tsx"),y=e("./frontend/src/scenes/cohorts/CohortFilters/constants.tsx"),L=e("./frontend/src/lib/constants.tsx"),w=e("./frontend/src/types.ts"),k=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),n=e("./node_modules/antd/lib/upload/Dragger.js"),l=e.n(n),t=e("./frontend/src/lib/components/icons.tsx"),m=e("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx"),J=e("./node_modules/core-js/modules/es.array.map.js"),q=e("./node_modules/core-js/modules/es.array.iterator.js"),ee=e("./node_modules/core-js/modules/es.object.to-string.js"),se=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ue=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),R=e.n(ue),he=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss"),me=e.n(he),Q={};Q.insert="head",Q.singleton=!1;var je=R()(me.a,Q),j=me.a.locals||{},g=e("./frontend/src/scenes/cohorts/cohortUtils.tsx"),U=e("./node_modules/kea-forms/lib/index.js"),A=e("./node_modules/kea-forms/lib/components.js"),oe=e("./node_modules/clsx/dist/clsx.m.js"),N=e("./node_modules/antd/es/row/index.js"),P=e("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),K=e("./frontend/src/lib/utils.tsx"),W=e("./frontend/src/lib/components/LemonDivider/index.ts"),X=e("./frontend/src/lib/components/AlertMessage/index.ts"),H=e("./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaRowBuilder.tsx"),s=e("./node_modules/react/jsx-runtime.js");function Y(O){var T=Object(v.a)(O),E=Object(c.useValues)(T),re=E.cohort,te=Object(c.useActions)(T),fe=te.setInnerGroupType,ve=te.duplicateFilter,ie=te.removeFilter,f=te.addFilter;return Object(s.jsxs)(s.Fragment,{children:[re.filters.properties.values.map(function(S,B){return Object(g.i)(S)?Object(s.jsxs)(U.Group,{name:["filters","properties","values",B],children:[B!==0&&Object(s.jsx)("div",{className:"CohortCriteriaGroups__matching-group__logical-divider",children:re.filters.properties.type}),Object(s.jsx)(A.Field,{name:"id",template:function(z){var F=z.error,ce=z.kids;return Object(s.jsxs)("div",{className:Object(oe.a)("CohortCriteriaGroups__matching-group",F&&"CohortCriteriaGroups__matching-group--error"),children:[Object(s.jsxs)(N.a,{align:"middle",wrap:!1,className:"px-4",children:[Object(s.jsx)(P.a,{name:K.c[B],color:P.b.Gray}),Object(s.jsx)(m.a,{prefix:"Match persons against",suffix:"criteria",onChange:function(ne){return fe(ne,B)},value:S.type}),Object(s.jsx)("div",{style:{flex:1,minWidth:"0.5rem"}}),Object(s.jsx)(p.a,{icon:Object(s.jsx)(t.IconCopy,{}),status:"primary-alt",onClick:function(){return ve(B)}}),re.filters.properties.values.length>1&&Object(s.jsx)(p.a,{icon:Object(s.jsx)(t.IconDelete,{}),status:"primary-alt",onClick:function(){return ie(B)}})]}),Object(s.jsx)(W.a,{className:"my-4"}),F&&Object(s.jsx)(X.a,{className:"m-2",type:"error",children:F}),ce]})},children:Object(s.jsx)(s.Fragment,{children:S.values.map(function(ae,z){return Object(g.i)(ae)?null:Object(s.jsxs)(U.Group,{name:["values",z],children:[Object(s.jsx)(H.a,{id:O.id,groupIndex:B,index:z,logicalOperator:S.type,criteria:ae,type:Object(g.g)(ae),hideDeleteIcon:S.values.length<=1}),z===S.values.length-1&&Object(s.jsx)("div",{className:"m-3",children:Object(s.jsx)(p.a,{"data-attr":"cohort-add-filter-group-criteria",type:"secondary",onClick:function(){return f(B)},icon:Object(s.jsx)(t.IconPlusMini,{color:"var(--primary)"}),children:"Add criteria"})})]},z)})})})]},B):null}),Object(s.jsx)(p.a,{"data-attr":"cohort-add-filter-group",className:"mb-4 mt-4",type:"secondary",onClick:function(){return f()},icon:Object(s.jsx)(t.IconPlusMini,{color:"var(--primary)"}),fullWidth:!0,children:"Add criteria group"})]})}try{Y.displayName="CohortCriteriaGroups",Y.__docgenInfo={description:"",displayName:"CohortCriteriaGroups",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"]={docgenInfo:Y.__docgenInfo,name:"CohortCriteriaGroups",path:"frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"})}catch(O){}var _=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),D=e("./frontend/src/scenes/persons/Persons.tsx"),ge=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),be=e("./frontend/src/lib/components/NotFound/index.tsx");function pe(O){var T=O.id,E={id:T},re=Object(v.a)(E),te=Object(c.useActions)(re),fe=te.deleteCohort,ve=te.setOuterGroupsType,ie=Object(c.useValues)(re),f=ie.cohort,S=ie.cohortLoading,B=ie.cohortMissing,ae=Object(c.useValues)(Z.a),z=ae.hasAvailableFeature,F=f.id==="new"||f.id===void 0;return B?Object(s.jsx)(be.a,{object:"cohort"}):Object(s.jsx)("div",{className:"cohort",children:Object(s.jsxs)(U.Form,{logic:v.a,props:E,formKey:"cohort",enableFormOnSubmit:!0,children:[Object(s.jsx)(C.a,{title:F?"New cohort":f.name||"Untitled",buttons:Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[F?Object(s.jsx)(p.a,{"data-attr":"cancel-cohort",type:"secondary",onClick:function(){u.router.actions.push(M.a.cohorts())},disabled:S,children:"Cancel"}):Object(s.jsx)(p.a,{"data-attr":"delete-cohort",status:"danger",type:"secondary",onClick:function(){fe()},disabled:S,children:"Delete"}),Object(s.jsx)(p.a,{type:"primary","data-attr":"save-cohort",htmlType:"submit",loading:S||f.is_calculating,disabled:S||f.is_calculating,children:"Save"})]})}),Object(s.jsx)(b.a,{}),Object(s.jsxs)("div",{className:"space-y-2",style:{maxWidth:640},children:[Object(s.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[Object(s.jsx)("div",{className:"flex-1",children:Object(s.jsx)(d.a,{name:"name",label:"Name",children:Object(s.jsx)(h.a,{"data-attr":"cohort-name"})})}),Object(s.jsx)("div",{className:"flex-1",children:Object(s.jsx)(d.a,{name:"is_static",label:"Type",children:function($){var ne=$.value,de=$.onChange;return Object(s.jsx)(V.a,{title:F?null:"Create a new cohort to use a different type of cohort.",children:Object(s.jsx)("div",{children:Object(s.jsx)(o.a,{disabled:!F,options:y.b,value:ne?L.c.Static:L.c.Dynamic,onChange:function(xe){de(xe===L.c.Static)},fullWidth:!0,"data-attr":"cohort-type"})})})}})})]}),z(w.d.DASHBOARD_COLLABORATION)&&Object(s.jsx)("div",{className:"ph-ignore-input",children:Object(s.jsx)(d.a,{name:"description",label:"Description","data-attr":"cohort-description",children:Object(s.jsx)(k.a,{})})})]}),f.is_static?Object(s.jsx)("div",{className:"mt-4 ph-ignore-input",children:Object(s.jsx)(d.a,{name:"csv",label:F?"Upload users":"Add users","data-attr":"cohort-csv",children:function($){var ne,de,Oe=$.onChange;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("span",{children:"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user\u2019s distinct ID."}),Object(s.jsx)(l.a,{name:"file",multiple:!1,fileList:f.csv?[f.csv]:[],accept:".csv",showUploadList:!1,beforeUpload:function(Ce){return Oe(Ce),!1},className:"cohort-csv-dragger",children:f.csv?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(t.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),Object(s.jsx)("div",{className:"ant-upload-text",children:(ne=(de=f.csv)===null||de===void 0?void 0:de.name)!==null&&ne!==void 0?ne:"File chosen"})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(t.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),Object(s.jsx)("div",{className:"ant-upload-text",children:"Drag a file here or click to browse for a file"})]})})]})}})}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(b.a,{}),Object(s.jsxs)("div",{className:"flex items-center justify-between my-4",children:[Object(s.jsxs)("div",{className:"flex flex-col",children:[Object(s.jsx)(ge.a,{htmlFor:"groups",children:"Matching criteria"}),Object(s.jsx)("span",{children:"Actors who match the following criteria will be part of the cohort. Continuously updated automatically."})]}),Object(s.jsx)(m.a,{value:f.filters.properties.type,onChange:function($){ve($)},topLevelFilter:!0,suffix:"criteria"})]}),Object(s.jsx)(Y,{id:E.id})]}),!F&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(b.a,{}),Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{className:"l3",children:"Persons in this cohort"}),f.is_calculating?Object(s.jsxs)("div",{className:"cohort-recalculating flex items-center",children:[Object(s.jsx)(_.a,{className:"mr-4"}),"We're recalculating who belongs to this cohort. This could take up to a couple of minutes."]}):Object(s.jsx)(D.Persons,{cohort:f.id})]})]})]})})}try{pe.displayName="CohortEdit",pe.__docgenInfo={description:"",displayName:"CohortEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"]={docgenInfo:pe.__docgenInfo,name:"CohortEdit",path:"frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"})}catch(O){}var ye={component:le,logic:i,paramsToProps:function(T){var E=T.params.id;return{id:E&&E!=="new"?parseInt(E):"new"}}};function le(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=O.id;return Object(s.jsx)(pe,{id:T})}try{le.displayName="Cohort",le.__docgenInfo={description:"",displayName:"Cohort",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/Cohort.tsx#Cohort"]={docgenInfo:le.__docgenInfo,name:"Cohort",path:"frontend/src/scenes/cohorts/Cohort.tsx#Cohort"})}catch(O){}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(I,a,e){"use strict";e.d(a,"a",function(){return k});var r=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),c=e.n(r),M=e("./node_modules/@babel/runtime/regenerator/index.js"),x=e.n(M),i=e("./node_modules/core-js/modules/es.array.iterator.js"),G=e.n(i),v=e("./node_modules/core-js/modules/es.object.to-string.js"),Z=e.n(v),C=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),p=e.n(C),u=e("./node_modules/core-js/modules/es.array.concat.js"),b=e.n(u),d=e("./node_modules/kea/lib/index.esm.js"),h=e("./frontend/src/lib/api.ts"),V=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),o=e("./frontend/src/lib/utils.tsx"),y=e("./frontend/src/scenes/teamLogic.tsx"),L=e("./frontend/src/scenes/urls.ts"),w=e("./frontend/src/models/groupsModel.ts"),k=Object(d.kea)({path:["groups","groupsListLogic"],connect:{values:[y.a,["currentTeamId"],w.a,["groupTypes","aggregationLabel"],V.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(t){return{url:t}},setTab:function(t){return{tab:t}}}},loaders:function(l){var t=l.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var m=c()(x.a.mark(function q(ee){var se;return x.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(se=ee.url,!t.groupsEnabled){R.next=6;break}return se=se||"api/projects/".concat(t.currentTeamId,"/groups/?group_type_index=").concat(t.currentTab),R.next=5,h.b.get(se);case 5:return R.abrupt("return",R.sent);case 6:case"end":return R.stop()}},q)}));function J(q){return m.apply(this,arguments)}return J}()}]}},reducers:{currentTab:["-1",{setTab:function(l,t){var m=t.tab;return m}}]},selectors:{currentTabName:[function(n){return[n.currentTab,n.groupTypes,n.aggregationLabel]},function(n,l,t){return n==="-1"?"Persons":l!=null&&l.length?Object(o.i)(t(parseInt(n)).singular):""}],groupName:[function(n){return[n.currentTab,n.aggregationLabel]},function(n,l){return n==="-1"?{singular:"person",plural:"persons"}:l(parseInt(n))}],breadcrumbs:[function(n){return[n.currentTabName,n.currentTab]},function(n,l){return[{name:n,path:L.a.groups(l)}]}]},actionToUrl:function(){return{setTab:function(t){var m=t.tab;return m!=="-1"?L.a.groups(m):L.a.persons()}}},urlToAction:function(l){var t=l.actions,m=l.values;return{"/groups/:id":function(q){var ee=q.id;ee&&(t.setTab(ee),t.loadGroups())},"/persons":function(){m.currentTab!=="-1"&&t.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(I,a,e){"use strict";e.d(a,"a",function(){return v});var r=e("./node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/scenes/persons/personsLogic.tsx"),M=e("./frontend/src/scenes/persons/PersonHeader.tsx"),x=e("./frontend/@posthog/lemon-ui/src/index.ts"),i=e("./node_modules/react/jsx-runtime.js"),G=e.n(i);function v(){var Z=Object(r.useValues)(c.a),C=Z.personDeleteModal,p=Object(r.useActions)(c.a),u=p.deletePerson,b=p.showPersonDeleteModal;return Object(i.jsx)(x.LemonModal,{isOpen:!!C,onClose:function(){return b(null)},title:'Are you sure you want to delete "'.concat(Object(M.b)(C),'"?'),description:Object(i.jsxs)(i.Fragment,{children:["This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",Object(i.jsxs)("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold",children:[" ","Learn more"]})]}),footer:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(x.LemonButton,{status:"danger",type:"secondary",onClick:function(){u({person:C,deleteEvents:!0}),b(null)},"data-attr":"delete-person-with-events",children:"Delete person and all corresponding events"}),Object(i.jsx)(x.LemonButton,{type:"secondary",onClick:function(){return b(null)},"data-attr":"delete-person-cancel",children:"Cancel"}),Object(i.jsx)(x.LemonButton,{type:"primary",status:"danger",onClick:function(){u({person:C,deleteEvents:!1}),b(null)},"data-attr":"delete-person-no-events",children:"Delete person"})]})})}},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(I,a,e){"use strict";e.d(a,"a",function(){return d});var r=e("./node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/lib/components/PageHeader.tsx"),M=e("./node_modules/core-js/modules/es.array.includes.js"),x=e("./node_modules/core-js/modules/es.string.includes.js"),i=e("./node_modules/core-js/modules/es.array.map.js"),G=e("./node_modules/antd/es/tabs/index.js"),v=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),Z=e("./frontend/src/lib/utils.tsx"),C=e("./frontend/src/models/groupsModel.ts"),p=e("./frontend/src/scenes/groups/groupsListLogic.ts"),u=e("./node_modules/react/jsx-runtime.js");function b(){var h=Object(r.useActions)(p.a),V=h.setTab,o=Object(r.useValues)(p.a),y=o.currentTab,L=Object(r.useValues)(C.a),w=L.groupTypes,k=L.aggregationLabel,n=Object(r.useValues)(v.b),l=n.groupsAccessStatus,t=[v.a.HasAccess,v.a.HasGroupTypes,v.a.NoAccess].includes(l);return Object(u.jsxs)(G.a,{activeKey:y,onChange:function(J){return V(J)},children:[Object(u.jsx)(G.a.TabPane,{tab:"Persons"},"-1"),t?Object(u.jsx)(G.a.TabPane,{tab:"Introducing Group Analytics"},"0"):w.map(function(m){return Object(u.jsx)(G.a.TabPane,{tab:Object(Z.i)(k(m.group_type_index).plural)},m.group_type_index)})]})}function d(h){var V=h.hideGroupTabs,o=Object(r.useValues)(C.a),y=o.showGroupsOptions;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(c.a,{title:"Persons".concat(y?" & Groups":""),caption:"A catalog of your product's end users".concat(y?" and groups":"",".")}),!V&&y&&Object(u.jsx)(b,{})]})}try{d.displayName="PersonPageHeader",d.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:d.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(h){}},"./frontend/src/scenes/persons/Persons.scss":function(I,a,e){"use strict";var r=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),c=e.n(r),M=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),x=e.n(M),i={};i.insert="head",i.singleton=!1;var G=c()(x.a,i),v=x.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(I,a,e){"use strict";e.r(a),e.d(a,"scene",function(){return me}),e.d(a,"Persons",function(){return Q}),e.d(a,"PersonsScene",function(){return je});var r=e("./node_modules/kea/lib/index.esm.js"),c=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),M=e.n(c),x=e("./node_modules/core-js/modules/es.array.concat.js"),i=e("./node_modules/core-js/modules/es.object.keys.js"),G=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),v=e("./frontend/src/lib/components/PropertiesTable.tsx"),Z=e("./frontend/src/scenes/persons/Persons.scss"),C=e("./frontend/src/lib/components/CopyToClipboard.tsx"),p=e("./frontend/src/scenes/persons/PersonHeader.tsx"),u=e("./frontend/src/lib/components/LemonTable/index.ts"),b=e("./frontend/@posthog/lemon-ui/src/index.ts"),d=e("./frontend/src/lib/components/icons.tsx"),h=e("./frontend/src/scenes/persons/personsLogic.tsx"),V=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),o=e("./node_modules/react/jsx-runtime.js");function y(j){var g=j.people,U=j.loading,A=U===void 0?!1:U,oe=j.hasPrevious,N=j.hasNext,P=j.loadPrevious,K=j.loadNext,W=j.compact,X=Object(r.useActions)(h.a),H=X.showPersonDeleteModal,s=[{title:"Person",key:"person",render:function(_,D){return Object(o.jsx)(p.a,{withIcon:!0,person:D})}},{title:"ID",key:"id",render:function(_,D){return Object(o.jsx)("div",{style:{overflow:"hidden"},children:D.distinct_ids.length&&Object(o.jsx)(C.a,{explicitValue:D.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID",children:D.distinct_ids[0]})})}}].concat(M()(W?[]:[{title:"First seen",dataIndex:"created_at",render:function(_){return _?Object(o.jsx)(G.b,{time:_}):Object(o.jsx)(o.Fragment,{})}},{render:function(_,D){return Object(o.jsx)(b.LemonButton,{onClick:function(){return H(D)},icon:Object(o.jsx)(d.IconDelete,{}),status:"danger",size:"small"})}}]));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u.a,{"data-attr":"persons-table",columns:s,loading:A,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:N?function(){K==null||K(),window.scrollTo(0,0)}:void 0,onBackward:oe?function(){P==null||P(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(_){var D=_.properties;return Object.keys(D).length?Object(o.jsx)(v.a,{properties:D}):"This person has no properties."}},dataSource:g,emptyState:"No persons",nouns:["person","persons"]}),Object(o.jsx)(V.a,{})]})}try{y.displayName="PersonsTable",y.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:y.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(j){}var L=e("./node_modules/antd/es/popconfirm/index.js"),w=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),k=e.n(w),n=e("./node_modules/core-js/modules/es.regexp.exec.js"),l=e("./node_modules/core-js/modules/es.string.search.js"),t=e("./node_modules/react/index.js"),m=e("./frontend/src/lib/components/Tooltip.tsx"),J=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),q=function(){var g=Object(r.useActions)(h.a),U=g.loadPersons,A=g.setListFilters,oe=Object(r.useValues)(h.a),N=oe.listFilters,P=Object(t.useState)(""),K=k()(P,2),W=K[0],X=K[1],H=Object(J.a)(U,800);return Object(t.useEffect)(function(){X(N.search||"")},[]),Object(t.useEffect)(function(){A({search:W||void 0}),H()},[W]),Object(o.jsxs)("div",{className:"flex items-center gap-2",children:[Object(o.jsx)(b.LemonInput,{type:"search",placeholder:"Search for persons",onChange:X,value:W,"data-attr":"persons-search"}),Object(o.jsx)(m.a,{title:Object(o.jsx)(o.Fragment,{children:'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.'}),children:Object(o.jsx)(d.IconInfo,{className:"text-2xl text-muted-alt shrink-0"})})]})},ee=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),se=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),ue=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),R=e("./frontend/src/lib/components/LemonButton/index.ts"),he=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),me={component:je,logic:h.a,paramsToProps:function(){return{syncWithUrl:!0}}};function Q(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=j.cohort;return Object(o.jsx)(r.BindLogic,{logic:h.a,props:{cohort:g,syncWithUrl:!g},children:Object(o.jsx)(je,{})})}function je(){var j=Object(r.useActions)(h.a),g=j.loadPersons,U=j.setListFilters,A=Object(r.useValues)(h.a),oe=A.cohortId,N=A.persons,P=A.listFilters,K=A.personsLoading,W=A.exporterProps,X=A.apiDocsURL;return Object(o.jsxs)("div",{className:"persons-list",children:[!oe&&Object(o.jsx)(ee.a,{}),Object(o.jsxs)("div",{className:"space-y-2",children:[Object(o.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[Object(o.jsx)(q,{}),Object(o.jsx)(L.a,{placement:"topRight",title:Object(o.jsxs)(o.Fragment,{children:["Exporting by CSV is limited to 10,000 users.",Object(o.jsx)("br",{}),"To export more, please use ",Object(o.jsx)("a",{href:X,children:"the API"}),". Do you want to export by CSV?"]}),onConfirm:function(){return Object(he.a)(W[0])},children:Object(o.jsx)(R.a,{type:"secondary",icon:Object(o.jsx)(d.IconExport,{style:{color:"var(--primary)"}}),children:P.properties&&P.properties.length>0?Object(o.jsxs)("div",{style:{display:"block"},children:["Export (",Object(o.jsx)("strong",{children:P.properties.length})," filter)"]}):"Export"})})]}),Object(o.jsx)(se.a,{pageKey:"persons-list-page",propertyFilters:P.properties,onChange:function(s){U({properties:s}),g()},endpoint:"person",taxonomicGroupTypes:[ue.a.PersonProperties],showConditionBadge:!0}),Object(o.jsx)(y,{people:N.results,loading:K,hasPrevious:!!N.previous,hasNext:!!N.next,loadPrevious:function(){return g(N.previous)},loadNext:function(){return g(N.next)}})]})]})}try{Q.displayName="Persons",Q.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:Q.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(j){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss":function(I,a,e){var r=e("./node_modules/css-loader/dist/runtime/api.js");a=r(!1),a.push([I.i,".CohortCriteriaGroups__matching-group{padding-top:1rem;border:1px solid var(--border);border-radius:4px;width:100%;margin:.5rem 0}.CohortCriteriaGroups__matching-group.CohortCriteriaGroups__matching-group--error{border:1px solid var(--danger)}.CohortCriteriaGroups__matching-group__logical-divider{color:var(--primary-alt);font-weight:600;font-size:12px;text-transform:uppercase;padding:0 1.5rem}",""]),I.exports=a},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(I,a,e){var r=e("./node_modules/css-loader/dist/runtime/api.js");a=r(!1),a.push([I.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),I.exports=a}}]);
