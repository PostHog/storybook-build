(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":function(H,S,n){"use strict";n.r(S),n.d(S,"scene",function(){return hn}),n.d(S,"FeatureFlag",function(){return Ee});var U=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),V=n.n(U),ue=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),w=n.n(ue),ae=n("./node_modules/core-js/modules/es.function.name.js"),Ye=n("./node_modules/core-js/modules/es.array.map.js"),Re=n("./node_modules/core-js/modules/es.object.to-string.js"),ye=n("./node_modules/core-js/modules/es.regexp.to-string.js"),Ne=n("./node_modules/core-js/modules/es.array.concat.js"),ze=n("./node_modules/core-js/modules/es.array.find.js"),le=n("./node_modules/core-js/modules/es.array.includes.js"),ge=n("./node_modules/core-js/modules/es.string.includes.js"),$=n("./node_modules/react/index.js"),z=n("./node_modules/kea-forms/lib/index.js"),ce=n("./node_modules/antd/es/divider/index.js"),h=n("./node_modules/antd/es/row/index.js"),m=n("./node_modules/antd/es/col/index.js"),J=n("./node_modules/antd/es/skeleton/index.js"),je=n("./node_modules/antd/es/tabs/index.js"),X=n("./node_modules/antd/es/popconfirm/index.js"),y=n("./node_modules/antd/es/radio/index.js"),D=n("./node_modules/antd/es/button/index.js"),G=n("./node_modules/antd/es/slider/index.js"),A=n("./node_modules/antd/es/input-number/index.js"),R=n("./node_modules/antd/es/select/index.js"),k=n("./node_modules/antd/es/card/index.js"),b=n("./node_modules/kea/lib/index.esm.js"),F=n("./frontend/src/lib/utils.tsx"),lt=n("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Je=n("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),ct=n("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"merge-cells",theme:"outlined"},Vt=Dt,Kt=n("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),dt=function(t,r){return $.createElement(Kt.a,Object(ct.a)(Object(ct.a)({},t),{},{ref:r,icon:Vt}))};dt.displayName="MergeCellsOutlined";var wt=$.forwardRef(dt),Bt=n("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js"),Ln=n("./node_modules/core-js/modules/es.object.keys.js"),Pn=n("./node_modules/core-js/modules/es.symbol.js"),An=n("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Rn=n("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Ut=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),Gt=n.n(Ut),Ht=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),me=n.n(Ht),Wt=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),ut=n.n(Wt),$t=n("./node_modules/@babel/runtime/regenerator/index.js"),W=n.n($t),Nn=n("./node_modules/core-js/modules/es.regexp.exec.js"),Mn=n("./node_modules/core-js/modules/es.string.match.js"),Dn=n("./node_modules/core-js/modules/es.array.splice.js"),Vn=n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Kn=n("./node_modules/core-js/modules/es.array.iterator.js"),wn=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Bn=n("./node_modules/core-js/modules/es.string.replace.js"),Un=n("./node_modules/core-js/modules/es.array.filter.js"),Me=n("./frontend/src/lib/api.ts"),Fe=n("./node_modules/kea-router/lib/index.js"),se=n("./frontend/src/scenes/urls.ts"),gt=n("./frontend/src/scenes/teamLogic.tsx"),_e=n("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),Xe=n("./frontend/src/models/groupsModel.ts"),ft=n("./frontend/src/lib/components/TaxonomicFilter/types.ts"),kt=n("./frontend/src/lib/components/lemonToast.tsx"),Yt=n("./frontend/src/lib/utils/eventUsageLogic.ts"),zt=n("./node_modules/kea-loaders/lib/index.js"),Jt=["created_at","id"];function pt(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),r.push.apply(r,s)}return r}function l(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pt(Object(r),!0).forEach(function(s){ut()(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Qe={id:null,created_at:null,key:"",name:"",filters:{groups:[{properties:[],rollout_percentage:null}],multivariate:null},deleted:!1,active:!0,created_by:null,is_simple_flag:!1,rollout_percentage:null,ensure_experience_continuity:!1,experiment_set:null},Xt={key:"",name:"",rollout_percentage:0},Qt={variants:[{key:"",name:"",rollout_percentage:100}]},Q=Object(b.kea)([Object(b.path)(["scenes","feature-flags","featureFlagLogic"]),Object(b.props)({}),Object(b.key)(function(a){var t=a.id;return t!=null?t:"unknown"}),Object(b.connect)({values:[gt.a,["currentTeamId"],Xe.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]]}),Object(b.actions)({setFeatureFlag:function(t){return{featureFlag:t}},setFeatureFlagMissing:!0,addConditionSet:!0,setAggregationGroupTypeIndex:function(t){return{value:t}},removeConditionSet:function(t){return{index:t}},duplicateConditionSet:function(t){return{index:t}},updateConditionSet:function(t,r,s){return{index:t,newRolloutPercentage:r,newProperties:s}},deleteFeatureFlag:function(t){return{featureFlag:t}},setMultivariateEnabled:function(t){return{enabled:t}},setMultivariateOptions:function(t){return{multivariateOptions:t}},addVariant:!0,duplicateVariant:function(t){return{index:t}},removeVariant:function(t){return{index:t}},editFeatureFlag:function(t){return{editing:t}},distributeVariantsEqually:!0}),Object(z.forms)(function(a){var t=a.actions;return{featureFlag:{defaults:l({},Qe),errors:function(s){var o,i,f,u=s.key,c=s.filters;return{key:u?(o=u.match)!==null&&o!==void 0&&o.call(u,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key",filters:{multivariate:{variants:c==null||(i=c.multivariate)===null||i===void 0||(f=i.variants)===null||f===void 0?void 0:f.map(function(p){var d,C=p.key;return{key:C?(d=C.match)!==null&&d!==void 0&&d.call(C,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key"}})}}}},submit:function(s){t.saveFeatureFlag(s)}}}}),Object(b.reducers)({featureFlag:[l({},Qe),{setFeatureFlag:function(t,r){var s=r.featureFlag;if(s.filters.groups){var o=s.filters.groups.map(function(i){return i.properties?l(l({},i),{},{properties:Object(F.r)(i.properties)}):i});return l(l({},s),{},{filters:l(l({},s==null?void 0:s.filters),{},{groups:o})})}return s},addConditionSet:function(t){if(!t)return t;var r=[].concat(V()(t==null?void 0:t.filters.groups),[{properties:[],rollout_percentage:null}]);return l(l({},t),{},{filters:l(l({},t.filters),{},{groups:r})})},updateConditionSet:function(t,r){var s=r.index,o=r.newRolloutPercentage,i=r.newProperties;if(!t)return t;var f=V()(t==null?void 0:t.filters.groups);return o!==void 0&&(f[s]=l(l({},f[s]),{},{rollout_percentage:o})),i!==void 0&&(f[s]=l(l({},f[s]),{},{properties:i})),l(l({},t),{},{filters:l(l({},t.filters),{},{groups:f})})},removeConditionSet:function(t,r){var s=r.index;if(!t)return t;var o=V()(t.filters.groups);return o.splice(s,1),l(l({},t),{},{filters:l(l({},t.filters),{},{groups:o})})},duplicateConditionSet:function(t,r){var s=r.index;if(!t)return t;var o=t.filters.groups.concat([t.filters.groups[s]]);return l(l({},t),{},{filters:l(l({},t.filters),{},{groups:o})})},setMultivariateOptions:function(t,r){var s=r.multivariateOptions;return t&&l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:s})})},addVariant:function(t){var r;if(!t)return t;var s=V()(((r=t.filters.multivariate)===null||r===void 0?void 0:r.variants)||[]);return l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:l(l({},t.filters.multivariate||{}),{},{variants:[].concat(V()(s),[Xt])})})})},removeVariant:function(t,r){var s,o=r.index;if(!t)return t;var i=V()(((s=t.filters.multivariate)===null||s===void 0?void 0:s.variants)||[]);return i.splice(o,1),l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:l(l({},t.filters.multivariate),{},{variants:i})})})},distributeVariantsEqually:function(t){var r;if(!t)return t;var s=V()(((r=t.filters.multivariate)===null||r===void 0?void 0:r.variants)||[]),o=s.length;if(o>0&&o<=100){var i=Math.round(100/o),f=i*o,u=f-100;s.forEach(function(c,p){s[p]=l(l({},c),{},{rollout_percentage:i})}),s[o-1]=l(l({},s[o-1]),{},{rollout_percentage:i-u})}return l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:l(l({},t.filters.multivariate),{},{variants:s})})})},setAggregationGroupTypeIndex:function(t,r){var s=r.value;return!t||t.filters.aggregation_group_type_index==s?t:l(l({},t),{},{filters:l(l({},t.filters),{},{aggregation_group_type_index:s,groups:[{properties:[],rollout_percentage:null}]})})}}],featureFlagMissing:[!1,{setFeatureFlagMissing:function(){return!0}}],isEditingFlag:[!1,{editFeatureFlag:function(t,r){var s=r.editing;return s}}]}),Object(zt.loaders)(function(a){var t=a.values,r=a.props,s=a.actions;return{featureFlag:{loadFeatureFlag:function(){var o=me()(W.a.mark(function f(){return W.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(r.id&&r.id!=="new")){c.next=11;break}return c.prev=1,c.next=4,Me.b.get("api/projects/".concat(t.currentTeamId,"/feature_flags/").concat(r.id));case 4:return c.abrupt("return",c.sent);case 7:throw c.prev=7,c.t0=c.catch(1),s.setFeatureFlagMissing(),c.t0;case 11:return c.abrupt("return",Qe);case 12:case"end":return c.stop()}},f,null,[[1,7]])}));function i(){return o.apply(this,arguments)}return i}(),saveFeatureFlag:function(){var o=me()(W.a.mark(function f(u){var c,p,d;return W.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(c=u.created_at,p=u.id,d=Gt()(u,Jt),j.prev=1,u.id){j.next=8;break}return j.next=5,Me.b.create("api/projects/".concat(t.currentTeamId,"/feature_flags"),d);case 5:return j.abrupt("return",j.sent);case 8:return j.next=10,Me.b.update("api/projects/".concat(t.currentTeamId,"/feature_flags/").concat(u.id),d);case 10:return j.abrupt("return",j.sent);case 11:j.next=17;break;case 13:throw j.prev=13,j.t0=j.catch(1),(j.t0.code==="behavioral_cohort_found"||j.t0.code==="cohort_does_not_exist")&&Yt.e.actions.reportFailedToCreateFeatureFlagWithCohort(j.t0.code,j.t0.detail),j.t0;case 17:case"end":return j.stop()}},f,null,[[1,13]])}));function i(f){return o.apply(this,arguments)}return i}()},recentInsights:[[],{loadRecentInsights:function(){var o=me()(W.a.mark(function f(){var u;return W.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(r.id&&r.id!=="new"&&t.featureFlag.key)){p.next=5;break}return p.next=3,Me.b.get("api/projects/".concat(t.currentTeamId,"/insights/?feature_flag=").concat(t.featureFlag.key,"&order=-created_at"));case 3:return u=p.sent,p.abrupt("return",u.results);case 5:return p.abrupt("return",[]);case 6:case"end":return p.stop()}},f)}));function i(){return o.apply(this,arguments)}return i}()}]}}),Object(b.listeners)(function(a){var t=a.actions,r=a.values;return{saveFeatureFlagSuccess:function(o){var i,f=o.featureFlag;kt.d.success("Feature flag saved"),(i=_e.b.findMounted())===null||i===void 0||i.actions.updateFlag(f),Fe.router.actions.replace(se.a.featureFlag(f.id)),t.editFeatureFlag(!1)},deleteFeatureFlag:function(){var s=me()(W.a.mark(function i(f){var u;return W.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:u=f.featureFlag,Object(F.x)({endpoint:"projects/".concat(r.currentTeamId,"/feature_flags"),object:{name:u.name,id:u.id},callback:function(){var C,j;u.id&&((C=_e.b.findMounted())===null||C===void 0||C.actions.deleteFlag(u.id)),(j=_e.b.findMounted())===null||j===void 0||j.actions.loadFeatureFlags(),Fe.router.actions.push(se.a.featureFlags())}});case 2:case"end":return p.stop()}},i)}));function o(i){return s.apply(this,arguments)}return o}(),setMultivariateEnabled:function(){var s=me()(W.a.mark(function i(f){var u;return W.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:u=f.enabled,u?t.setMultivariateOptions(Qt):t.setMultivariateOptions(null);case 2:case"end":return p.stop()}},i)}));function o(i){return s.apply(this,arguments)}return o}(),loadFeatureFlagSuccess:function(){var s=me()(W.a.mark(function i(){return W.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t.loadRecentInsights();case 1:case"end":return u.stop()}},i)}));function o(){return s.apply(this,arguments)}return o}()}}),Object(b.selectors)({props:[function(){return[function(a,t){return t}]},function(a){return a}],multivariateEnabled:[function(a){return[a.featureFlag]},function(a){return!!(a!=null&&a.filters.multivariate)}],variants:[function(a){return[a.featureFlag]},function(a){var t;return(a==null||(t=a.filters.multivariate)===null||t===void 0?void 0:t.variants)||[]}],nonEmptyVariants:[function(a){return[a.variants]},function(a){return a.filter(function(t){var r=t.key;return!!r})}],variantRolloutSum:[function(a){return[a.variants]},function(a){return a.reduce(function(t,r){var s=r.rollout_percentage;return t+s},0)}],areVariantRolloutsValid:[function(a){return[a.variants,a.variantRolloutSum]},function(a,t){return a.every(function(r){var s=r.rollout_percentage;return s>=0&&s<=100})&&t===100}],aggregationTargetName:[function(a){return[a.featureFlag,a.groupTypes,a.aggregationLabel]},function(a,t,r){return a&&a.filters.aggregation_group_type_index!=null&&t.length>0?r(a.filters.aggregation_group_type_index).plural:"users"}],taxonomicGroupTypes:[function(a){return[a.featureFlag,a.groupsTaxonomicTypes]},function(a,t){return a&&a.filters.aggregation_group_type_index!=null&&t.length>0?[t[a.filters.aggregation_group_type_index]]:[ft.a.PersonProperties,ft.a.Cohorts]}],breadcrumbs:[function(a){return[a.featureFlag]},function(a){return[{name:"Feature Flags",path:se.a.featureFlags()}].concat(V()(a?[{name:a.key||"Unnamed"}]:[]))}]}),Object(Fe.urlToAction)(function(a){var t,r=a.actions,s=a.props;return ut()({},se.a.featureFlag((t=s.id)!==null&&t!==void 0?t:"new"),function(o,i,f,u){var c=u.method;c==="PUSH"&&(s.id?r.loadFeatureFlag():r.resetFeatureFlag())})}),Object(b.afterMount)(function(a){var t,r=a.props,s=a.actions,o=(t=_e.b.findMounted())===null||t===void 0?void 0:t.values.featureFlags.find(function(i){return i.id===r.id});o?(s.setFeatureFlag(o),s.loadRecentInsights()):r.id!=="new"&&s.loadFeatureFlag()})]),I=n("./frontend/src/lib/components/icons.tsx"),Z=n("./frontend/src/lib/components/LemonDivider/index.ts"),B=n("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),e=n("./node_modules/react/jsx-runtime.js"),re="?utm_medium=in-product&utm_campaign=feature-flag";function De(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(B.a,{language:B.b.JavaScript,wrap:!0,children:"const isMyFlagEnabledForUser = await client.isFeatureEnabled('".concat(t,`', 'user distinct id')

if (isMyFlagEnabledForUser) {
    // Do something differently for this user
}`)})})}function Ve(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(B.a,{language:B.b.JavaScript,wrap:!0,children:"if\xA0(posthog.isFeatureEnabled('".concat(t!=null?t:"",`')) {
    // run your activation code here
}`)})})}function Ke(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(B.a,{language:B.b.PHP,wrap:!0,children:"if (PostHog::isFeatureEnabled('".concat(t,`', 'some distinct id')) {
    // do something here
}`)})})}function we(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(B.a,{language:B.b.Go,wrap:!0,children:`isFlagEnabledForUser, err := client.IsFeatureEnabled(
                    FeatureFlagPayload{
                        Key:        '`.concat(t,`',
                        DistinctId: "distinct-id",
                    })

if (isFlagEnabledForUser) {
  // Do something differently for this user
}`)})})}function Be(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(B.a,{language:B.b.Ruby,wrap:!0,children:"is_my_flag_enabled = posthog.is_feature_enabled('".concat(t,`', 'user distinct id')

if is_my_flag_enabled
  # Do something differently for this user
end`)})})}function Ue(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(B.a,{language:B.b.Python,wrap:!0,children:'if\xA0posthog.feature_enabled("'.concat(t,`", "user_distinct_id"):
    runAwesomeFeature()
`)})})}function Zt(){var a=Object(b.useValues)(gt.a),t=a.currentTeam;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(B.a,{language:B.b.Bash,wrap:!0,children:"curl ".concat(window.location.origin,`/decide/ \\
-X POST -H 'Content-Type: application/json' \\
-d '{
    "api_key": "`).concat(t?t.api_token:"[project_api_key]",`",
    "distinct_id": "[user distinct id]"
}'
                `)})})}try{De.displayName="NodeJSSnippet",De.__docgenInfo={description:"",displayName:"NodeJSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"]={docgenInfo:De.__docgenInfo,name:"NodeJSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"})}catch(a){}try{Ve.displayName="JSSnippet",Ve.__docgenInfo={description:"",displayName:"JSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"]={docgenInfo:Ve.__docgenInfo,name:"JSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"})}catch(a){}try{Ke.displayName="PHPSnippet",Ke.__docgenInfo={description:"",displayName:"PHPSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"]={docgenInfo:Ke.__docgenInfo,name:"PHPSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"})}catch(a){}try{we.displayName="GolangSnippet",we.__docgenInfo={description:"",displayName:"GolangSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"]={docgenInfo:we.__docgenInfo,name:"GolangSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"})}catch(a){}try{Be.displayName="RubySnippet",Be.__docgenInfo={description:"",displayName:"RubySnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"]={docgenInfo:Be.__docgenInfo,name:"RubySnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"})}catch(a){}try{Ue.displayName="PythonSnippet",Ue.__docgenInfo={description:"",displayName:"PythonSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"]={docgenInfo:Ue.__docgenInfo,name:"PythonSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"})}catch(a){}var qt=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),jt=n.n(qt),en=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss"),mt=n.n(en),Ze={};Ze.insert="head",Ze.singleton=!1;var Gn=jt()(mt.a,Ze),Hn=mt.a.locals||{},fe="https://posthog.com/docs/",he="#feature-flags",qe=[{value:"JavaScript",documentationLink:"".concat(fe,"integrations/js-integration").concat(re).concat(he),Icon:I.IconJavascript,Snippet:Ve},{value:"Node.js",documentationLink:"".concat(fe,"integrations/node-integration").concat(re).concat(he),Icon:I.IconNodeJS,Snippet:De},{value:"PHP",documentationLink:"".concat(fe,"integrations/php-integration").concat(re).concat(he),Icon:I.IconPHP,Snippet:Ke},{value:"Ruby",documentationLink:"".concat(fe,"integrations/ruby-integration").concat(re).concat(he),Icon:I.IconRuby,Snippet:Be},{value:"Golang",documentationLink:"".concat(fe,"integrations/go-integration").concat(re).concat(he),Icon:I.IconGolang,Snippet:we},{value:"Python",documentationLink:"".concat(fe,"integrations/python-integration").concat(re).concat(he),Icon:I.IconPython,Snippet:Ue},{value:"API",documentationLink:"".concat(fe,"api/feature-flags").concat(re),Icon:I.IconOpenInNew,Snippet:Zt}];function tn(a){var t=a.selectedOptionValue,r=a.selectOption;return Object(e.jsxs)(h.a,{className:"FeatureFlagInstructionsHeader",justify:"space-between",align:"middle",children:[Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__header-title",children:[Object(e.jsx)(I.IconFlag,{className:"FeatureFlagInstructionsHeader__header-title__icon"}),Object(e.jsx)("b",{children:"Learn how to use feature flags in your code"})]}),Object(e.jsx)(R.a,{"data-attr":"feature-flag-instructions-select",value:t,style:{width:140},onChange:r,children:qe.map(function(s,o){var i=s.value,f=s.Icon;return Object(e.jsx)(R.a.Option,{"data-attr":"feature-flag-instructions-select-option-"+i,value:i,children:Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__option",children:[Object(e.jsx)("div",{className:"FeatureFlagInstructionsHeader__option__icon",children:Object(e.jsx)(f,{})}),Object(e.jsx)("div",{children:i})]})},o)})})]})}function nn(a){var t=a.documenrationLink;return Object(e.jsxs)("div",{className:"mt-4",children:["Need more information?"," ",Object(e.jsxs)("a",{"data-attr":"feature-flag-doc-link",target:"_blank",rel:"noopener",href:t,children:["Check the docs ",Object(e.jsx)(I.IconOpenInNew,{})]})]})}function ve(a){var t=a.featureFlagKey,r=qe[0],s=Object($.useState)(r),o=w()(s,2),i=o[0],f=o[1],u=function(p){var d=qe.find(function(C){return C.value===p});d&&f(d)};return Object(e.jsxs)(k.a,{size:"small",children:[Object(e.jsx)(tn,{selectedOptionValue:i.value,selectOption:u}),Object(e.jsx)(Z.a,{}),Object(e.jsx)("div",{className:"mt mb",children:Object(e.jsx)(i.Snippet,{"data-attr":"feature-flag-instructions-snippet",flagKey:t})}),Object(e.jsx)(Z.a,{}),Object(e.jsx)(nn,{documenrationLink:i.documentationLink})]})}try{ve.displayName="FeatureFlagInstructions",ve.__docgenInfo={description:"",displayName:"FeatureFlagInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"]={docgenInfo:ve.__docgenInfo,name:"FeatureFlagInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"})}catch(a){}var et=n("./frontend/src/lib/components/PageHeader.tsx"),an=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss"),ht=n.n(an),tt={};tt.insert="head",tt.singleton=!1;var Wn=jt()(ht.a,tt),$n=ht.a.locals||{},Se=n("./frontend/src/lib/components/Tooltip.tsx"),sn=n("./node_modules/rc-select/es/index.js"),Ce=n("./frontend/src/lib/components/Link.tsx"),Ge=n("./frontend/src/lib/introductions/groupsAccessLogic.ts");function Ie(a){var t=a.value,r=Object(b.useValues)(Ge.b),s=r.groupsAccessStatus;return[Ge.a.HasAccess,Ge.a.HasGroupTypes,Ge.a.NoAccess].includes(s)?Object(e.jsxs)(sn.c.Option,{value:t,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--side)",color:"var(--muted)"},children:[Object(e.jsx)(Je.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups \u2013"," ",Object(e.jsx)(Ce.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",className:"font-semibold",children:"Learn more"})]},"groups"):null}try{Ie.displayName="GroupsIntroductionOption",Ie.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:Ie.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(a){}var vt=n("./frontend/src/scenes/userLogic.ts"),be=n("./frontend/src/types.ts"),_=n("./frontend/src/lib/components/LemonButton/index.ts"),rn=n("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),K=n("./frontend/src/lib/forms/Field.tsx"),bt=n("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),Oe=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),nt=n("./frontend/src/lib/components/LemonCheckbox/index.ts"),Ot=n("./frontend/src/scenes/events/EventBufferNotice.tsx"),at=n("./frontend/src/lib/components/AlertMessage/index.ts"),on=n("./frontend/src/lib/components/Spinner/Spinner.tsx"),xt=n("./frontend/src/lib/components/CopyToClipboard.tsx"),He=n("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),yt=n("./frontend/src/lib/constants.tsx"),ln=n("./frontend/src/lib/logic/featureFlagLogic.ts"),Ft=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),cn=n("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),dn=n("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),un=n("./frontend/src/lib/components/DefinitionPopup/utils.ts"),kn=n("./node_modules/core-js/modules/es.array.slice.js"),gn=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),fn=n("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function pn(){var a=Object(b.useValues)(Q),t=a.recentInsights,r=a.recentInsightsLoading,s=a.featureFlag;return Object(e.jsx)(gn.a,{title:"Insights that use this feature flag",loading:r,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:se.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(s.key)})},items:t.slice(0,5),renderRow:function(i,f){return Object(e.jsx)(fn.a,{insight:i},f)}})}var jn=n("./frontend/src/lib/components/NotFound/index.tsx"),mn=n("./frontend/src/models/cohortsModel.ts"),_t=n("./frontend/src/scenes/billing/billingLogic.ts"),hn={component:Ee,logic:Q,paramsToProps:function(t){var r=t.params.id;return{id:r&&r!=="new"?parseInt(r):"new"}}};function We(a){setTimeout(function(){var t;return(t=document.querySelector('.variant-form-list input[data-key-index="'.concat(a,'"]')))===null||t===void 0?void 0:t.focus()},50)}function Ee(){var a,t,r,s,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=o.id,f=Object(b.useValues)(ln.a),u=f.featureFlags,c=Object(b.useValues)(Q),p=c.props,d=c.featureFlag,C=c.multivariateEnabled,j=c.variants,Te=c.nonEmptyVariants,pe=c.areVariantRolloutsValid,xe=c.variantRolloutSum,Le=c.groupTypes,q=c.aggregationTargetName,Pe=c.taxonomicGroupTypes,L=c.featureFlagLoading,Ae=c.featureFlagMissing,oe=c.isEditingFlag,v=Object(b.useActions)(Q),N=v.addConditionSet,E=v.updateConditionSet,T=v.removeConditionSet,ee=v.duplicateConditionSet,M=v.deleteFeatureFlag,te=v.setMultivariateEnabled,de=v.addVariant,$e=v.removeVariant,ie=v.distributeVariantsEqually,ke=v.setAggregationGroupTypeIndex,st=v.editFeatureFlag,It=v.loadFeatureFlag,Et=Object(b.useValues)(Xe.a),vn=Et.showGroupsOptions,bn=Et.aggregationLabel,On=Object(b.useValues)(vt.a),rt=On.hasAvailableFeature,xn=Object(b.useValues)(_t.b),yn=xn.upgradeLink,Fn=Object($.useState)(!1),Tt=w()(Fn,2),Lt=Tt[0],Pt=Tt[1],_n=Object($.useState)(!1),At=w()(_n,2),Sn=At[0],ot=At[1],Cn=Object($.useState)(_e.a.OVERVIEW),Rt=w()(Cn,2),In=Rt[0],En=Rt[1],Tn=Ie({value:-2}),Nt=i==="new"||i===void 0;return Ae?Object(e.jsx)(jn.a,{object:"feature flag"}):L?Object(e.jsx)(on.b,{}):Object(e.jsx)(e.Fragment,{children:u[yt.h.FEATURE_FLAGS_UX]?Object(e.jsx)("div",{className:"feature-flag",children:Nt||oe?Object(e.jsxs)(z.Form,{logic:Q,props:p,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(e.jsx)(et.a,{title:Nt?"New feature flag":d.key||"Untitled",buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(_.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:function(){oe?(st(!1),It()):Fe.router.actions.push(se.a.featureFlags())},disabled:L,children:"Cancel"}),Object(e.jsx)(_.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:L,disabled:L,children:"Save"})]})}),Object(e.jsx)(ce.a,{}),d.experiment_set&&((a=d.experiment_set)===null||a===void 0?void 0:a.length)>0&&Object(e.jsxs)(at.a,{type:"warning",children:["This feature flag is linked to an experiment. It's recommended to only make changes to this flag"," ",Object(e.jsx)(Ce.a,{to:se.a.experiment(d.experiment_set[0]),children:"using the experiment creation screen."})]}),Object(e.jsx)(Ot.a,{additionalInfo:", meaning it can take around 60 seconds for some flags to update for recently-identified persons. To sidestep this, you can choose to override server properties when requesting the feature flag."}),Object(e.jsxs)(h.a,{gutter:16,style:{marginBottom:32},children:[Object(e.jsxs)(m.a,{span:12,className:"space-y-4",children:[Object(e.jsx)(K.a,{name:"key",label:"Key",help:Lt&&i!=="new"?Object(e.jsxs)("span",{className:"text-warning",children:[Object(e.jsx)("b",{children:"Warning! "}),"Changing this key will",Object(e.jsxs)("a",{href:"https://posthog.com/docs/features/feature-flags".concat(re,"#feature-flag-persistence"),target:"_blank",rel:"noopener",children:[" ","affect the persistence of your flag ",Object(e.jsx)(I.IconOpenInNew,{})]})]}):void 0,children:function(g){var x=g.value,P=g.onChange;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Oe.a,{value:x,onChange:function(Y){Y!==x&&Pt(!0),P(Y)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),Object(e.jsx)("span",{style:{fontSize:13},className:"text-muted",children:"Feature flag keys must be unique"})]})}}),Object(e.jsx)(K.a,{name:"name",label:"Description",children:Object(e.jsx)(bt.a,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:d.name||""})}),Object(e.jsx)(K.a,{name:"ensure_experience_continuity",children:function(g){var x=g.value,P=g.onChange;return Object(e.jsxs)("div",{className:"border rounded p-4",children:[Object(e.jsx)(nt.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:function(){return P(!x)},fullWidth:!0,checked:x}),Object(e.jsx)("div",{className:"text-muted text-sm pl-7",children:"If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."})]})}}),Object(e.jsx)(K.a,{name:"active",children:function(g){var x=g.value,P=g.onChange;return Object(e.jsx)("div",{className:"border rounded p-4",children:Object(e.jsx)(nt.a,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:function(){return P(!x)},checked:x})})}})]}),Object(e.jsx)(m.a,{span:12,children:Object(e.jsx)(ve,{featureFlagKey:d.key||"my-flag"})})]}),Object(e.jsx)(ce.a,{}),Object(e.jsx)(St,{}),Object(e.jsx)(ce.a,{}),Object(e.jsx)(Ct,{}),Object(e.jsx)(Z.a,{className:"mt-8"}),Object(e.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[Object(e.jsx)(_.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:function(){oe?(st(!1),It()):Fe.router.actions.push(se.a.featureFlags())},disabled:L,children:"Cancel"}),Object(e.jsx)(_.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:L,disabled:L,children:"Save"})]})]}):Object(e.jsx)(e.Fragment,{children:L?Object(e.jsx)(J.a,{active:!0}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(et.a,{title:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[d.key||"Untitled",Object(e.jsx)(xt.a,{explicitValue:d.key,iconStyle:{color:"var(--muted-alt)"}}),Object(e.jsx)("div",{className:"flex",children:d.active?Object(e.jsx)(Ft.a,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(Ft.a,{type:"default",className:"uppercase",children:"Disabled"})})]}),description:Object(e.jsx)(e.Fragment,{children:d.name?Object(e.jsx)("span",{style:{fontStyle:"normal"},children:d.name}):"There is no description for this feature flag."}),buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[Object(e.jsx)(_.a,{"data-attr":"delete-feature-flag",status:"danger",type:"secondary",onClick:function(){M(d)},disabled:L,children:"Delete feature flag"}),Object(e.jsx)(_.a,{"data-attr":"edit-feature-flag",type:"secondary",onClick:function(){st(!0)},disabled:L,children:"Edit"})]})}),Object(e.jsxs)(je.a,{activeKey:In,destroyInactiveTabPane:!0,onChange:function(g){return En(g)},children:[Object(e.jsx)(je.a.TabPane,{tab:"Overview",children:Object(e.jsxs)(h.a,{children:[Object(e.jsxs)(m.a,{span:13,children:[Object(e.jsx)(St,{readOnly:!0}),Object(e.jsx)(Ct,{readOnly:!0})]}),Object(e.jsxs)(m.a,{span:11,className:"pl-4",children:[Object(e.jsx)(pn,{}),Object(e.jsx)("div",{className:"my-4"}),Object(e.jsx)(ve,{featureFlagKey:d.key||"my-flag"})]})]})},"overview"),d.id&&Object(e.jsx)(je.a.TabPane,{tab:"History",children:Object(e.jsx)(cn.a,{scope:dn.a.FEATURE_FLAG,id:d.id})},"history")]})]})})}):Object(e.jsxs)(z.Form,{logic:Q,props:p,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(e.jsx)(et.a,{title:"Feature Flag",buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(K.a,{name:"active",children:function(g){var x=g.value,P=g.onChange;return Object(e.jsx)(rn.a,{"data-attr":"feature-flag-enabled-toggle",checked:x,onChange:P,label:x?Object(e.jsx)("span",{className:"text-success",children:"Enabled"}):Object(e.jsx)("span",{className:"text-danger",children:"Disabled"})})}}),(d==null?void 0:d.id)&&Object(e.jsx)(_.a,{"data-attr":"delete-flag",status:"danger",type:"secondary",onClick:function(){M(d)},children:"Delete"}),Object(e.jsx)(_.a,{type:"primary","data-attr":"feature-flag-submit",loading:L,htmlType:"submit",children:"Save changes"})]})}),d.experiment_set&&((t=d.experiment_set)===null||t===void 0?void 0:t.length)>0&&Object(e.jsxs)(at.a,{type:"warning",children:["This feature flag is linked to an experiment. It's recommended to only make changes to this flag"," ",Object(e.jsx)(Ce.a,{to:se.a.experiment(d.experiment_set[0]),children:"using the experiment creation screen."})]}),Object(e.jsx)(Ot.a,{additionalInfo:", meaning it can take around 60 seconds for some flags to update for recently-identified persons"}),Object(e.jsx)("h3",{className:"l3 mt-4",children:"General configuration"}),Object(e.jsx)("div",{className:"text-muted mb-4",children:"General settings for your feature flag and integration instructions."}),Object(e.jsxs)(h.a,{gutter:16,style:{marginBottom:32},children:[Object(e.jsxs)(m.a,{span:12,className:"space-y-4",children:[Object(e.jsx)(K.a,{name:"key",label:"Key (must be unique)",help:Lt&&i!=="new"?Object(e.jsxs)("span",{className:"text-warning",children:[Object(e.jsx)("b",{children:"Warning! "}),"Changing this key will",Object(e.jsxs)("a",{href:"https://posthog.com/docs/features/feature-flags".concat(re,"#feature-flag-persistence"),target:"_blank",rel:"noopener",children:[" ","affect the persistence of your flag ",Object(e.jsx)(I.IconOpenInNew,{})]})]}):void 0,children:function(g){var x=g.value,P=g.onChange;return Object(e.jsx)(Oe.a,{value:x,onChange:function(Y){Y!==x&&Pt(!0),P(Y)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})}}),Object(e.jsx)(K.a,{name:"name",label:"Description",children:Object(e.jsx)(bt.a,{className:"ph-ignore-input","data-attr":"feature-flag-description",placeholder:"Adding a helpful description can ensure others know what this feature is for."})}),Object(e.jsx)(K.a,{name:"ensure_experience_continuity",children:function(g){var x=g.value,P=g.onChange;return Object(e.jsxs)("div",{className:"border rounded p-4",children:[Object(e.jsx)(nt.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:function(){return P(!x)},fullWidth:!0,checked:x}),Object(e.jsx)("div",{className:"text-muted text-sm pl-7",children:"If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."})]})}})]}),Object(e.jsx)(m.a,{span:12,children:Object(e.jsx)(ve,{featureFlagKey:d.key||"my-flag"})})]}),Object(e.jsxs)("div",{className:"mb-8",children:[Object(e.jsx)("h3",{className:"l3",children:"Served value"}),Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(X.a,{placement:"top",title:"Change value type? The variants below will be lost.",visible:Sn,onConfirm:function(){te(!1),ot(!1)},onCancel:function(){return ot(!1)},okText:"OK",cancelText:"Cancel",children:Object(e.jsx)(y.a.Group,{options:[{label:"Boolean value (A/B test)",value:!1},{label:Object(e.jsx)(Se.a,{title:rt(be.d.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:Object(e.jsxs)("div",{children:[!rt(be.d.MULTIVARIATE_FLAGS)&&Object(e.jsx)(Ce.a,{to:yn,target:"_blank",children:Object(e.jsx)(Je.a,{style:{marginRight:4,color:"var(--warning)"}})}),"String value (Multivariate test)"," "]})}),value:!0,disabled:!rt(be.d.MULTIVARIATE_FLAGS)}],onChange:function(g){var x=g.target.value;x===!1&&Te.length?ot(!0):(te(x),We(0))},value:C,optionType:"button"})})}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:[Object(F.i)(q)," will be served"," ",C?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):Object(e.jsx)("strong",{children:Object(e.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]}),C&&Object(e.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(e.jsxs)(h.a,{gutter:8,className:"label-row",children:[Object(e.jsx)(m.a,{span:7,children:"Variant key"}),Object(e.jsx)(m.a,{span:7,children:"Description"}),Object(e.jsxs)(m.a,{span:9,children:[Object(e.jsx)("span",{children:"Rollout percentage"}),Object(e.jsx)(D.a,{type:"link",onClick:ie,icon:Object(e.jsx)(wt,{}),style:{padding:"0 0 0 0.5em"},title:"Distribute variants equally",children:"Distribute"})]})]}),j.map(function(O,g){return Object(e.jsx)(z.Group,{name:["filters","multivariate","variants",g],children:Object(e.jsxs)(h.a,{gutter:8,children:[Object(e.jsx)(m.a,{span:7,children:Object(e.jsx)(K.a,{name:"key",children:Object(e.jsx)(Oe.a,{"data-attr":"feature-flag-variant-key","data-key-index":g.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(g+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(e.jsx)(m.a,{span:7,children:Object(e.jsx)(K.a,{name:"name",children:Object(e.jsx)(Oe.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(e.jsx)(m.a,{span:7,children:Object(e.jsx)(K.a,{name:"rollout_percentage",children:Object(e.jsx)(G.a,{tooltipPlacement:"top"})})}),Object(e.jsx)(m.a,{span:2,children:Object(e.jsx)(K.a,{name:"rollout_percentage",children:function(P){var ne=P.value,Y=P.onChange;return Object(e.jsx)(A.a,{min:0,max:100,value:ne,onChange:function(it){if(it!=null){var Mt=parseInt(it.toString());isNaN(Mt)||Y(Mt)}},style:{width:"100%",borderColor:pe?void 0:"var(--danger)"}})}})}),j.length>1&&Object(e.jsx)(m.a,{span:1,children:Object(e.jsx)(Se.a,{title:"Delete this variant",placement:"bottomLeft",children:Object(e.jsx)(D.a,{type:"link",icon:Object(e.jsx)(Bt.a,{}),onClick:function(){return $e(g)},style:{color:"var(--danger)"}})})})]})},g)}),j.length>0&&!pe&&Object(e.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",xe,")."]}),Object(e.jsx)(_.a,{type:"secondary",onClick:function(){var g=j.length;de(),We(g)},fullWidth:!0,center:!0,children:"Add variant"})]})]}),Object(e.jsxs)("div",{className:"feature-flag-form-row",children:[Object(e.jsxs)("div",{"data-attr":"feature-flag-release-conditions",children:[Object(e.jsx)("h3",{className:"l3",children:"Release conditions"}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:["Specify the ",q," to which you want to release this flag. Note that condition sets are rolled out independently of each other."]})]}),vn&&Object(e.jsxs)("div",{className:"centered",children:["Match by",Object(e.jsxs)(R.a,{value:((r=d.filters)===null||r===void 0?void 0:r.aggregation_group_type_index)!=null?(s=d.filters)===null||s===void 0?void 0:s.aggregation_group_type_index:-1,onChange:function(g){var x=g!==-1?g:null;ke(x)},style:{marginLeft:8},"data-attr":"feature-flag-aggregation-filter",dropdownMatchSelectWidth:!1,dropdownAlign:{points:["tr","br"]},children:[Object(e.jsx)(R.a.Option,{value:-1,children:"Users"},-1),Le.map(function(O){return Object(e.jsx)(R.a.Option,{value:O.group_type_index,children:Object(F.i)(bn(O.group_type_index).plural)},O.group_type_index)}),Tn]})]})]}),Object(e.jsx)(h.a,{gutter:16,children:d.filters.groups.map(function(O,g){var x,P;return Object(e.jsxs)(m.a,{span:24,md:24,children:[g>0&&Object(e.jsx)("div",{style:{display:"flex",marginLeft:16},children:Object(e.jsx)("div",{className:"stateful-badge or-light-grey mb-4",children:"OR"})}),Object(e.jsxs)(k.a,{style:{marginBottom:16},children:[Object(e.jsxs)("div",{className:"feature-flag-form-row",style:{height:24},children:[Object(e.jsxs)("div",{children:[Object(e.jsxs)("span",{className:"simple-tag tag-light-blue",style:{marginRight:8},children:["Set ",g+1]}),(x=O.properties)!==null&&x!==void 0&&x.length?Object(e.jsxs)(e.Fragment,{children:["Matching ",Object(e.jsx)("b",{children:q})," with filters"]}):Object(e.jsxs)(e.Fragment,{children:["Condition set will match ",Object(e.jsxs)("b",{children:["all ",q]})]})]}),Object(e.jsxs)(h.a,{align:"middle",children:[Object(e.jsx)(Se.a,{title:"Duplicate this condition set",placement:"bottomLeft",children:Object(e.jsx)(_.a,{icon:Object(e.jsx)(I.IconCopy,{}),size:"small",onClick:function(){return ee(g)}})}),d.filters.groups.length>1&&Object(e.jsx)(Se.a,{title:"Delete this condition set",placement:"bottomLeft",children:Object(e.jsx)(_.a,{icon:Object(e.jsx)(I.IconDelete,{}),size:"small",onClick:function(){return T(g)}})})]})]}),Object(e.jsx)(Z.a,{className:"my-4"}),Object(e.jsx)("div",{className:"ml-4",children:Object(e.jsx)(lt.a,{pageKey:"feature-flag-".concat(d.id,"-").concat(g,"-").concat(d.filters.groups.length,"-").concat((P=d.filters.aggregation_group_type_index)!==null&&P!==void 0?P:""),propertyFilters:O==null?void 0:O.properties,onChange:function(Y){return E(g,void 0,Y)},taxonomicGroupTypes:Pe,showConditionBadge:!0})}),Object(e.jsx)(Z.a,{className:"my-4"}),Object(e.jsx)("div",{className:"feature-flag-form-row",children:Object(e.jsxs)("div",{className:"centered",children:["Roll out to"," ",Object(e.jsx)(A.a,{style:{width:100,marginLeft:8,marginRight:8},onChange:function(Y){E(g,Y)},value:O.rollout_percentage!=null?O.rollout_percentage:100,min:0,max:100,addonAfter:"%"})," ","of ",Object(e.jsx)("b",{children:q})," in this set"]})})]})]},"".concat(g,"-").concat(d.filters.groups.length))})}),Object(e.jsx)(k.a,{size:"small",style:{marginBottom:16},children:Object(e.jsx)(_.a,{onClick:N,fullWidth:!0,children:"Add condition set"})}),Object(e.jsx)("div",{className:"text-right",children:Object(e.jsx)(_.a,{htmlType:"submit",loading:L,type:"primary","data-attr":"feature-flag-submit-bottom",children:"Save changes"})})]})})}function St(a){var t=a.readOnly,r=Object(b.useValues)(Q),s=r.multivariateEnabled,o=r.variants,i=r.areVariantRolloutsValid,f=r.featureFlagLoading,u=r.variantRolloutSum,c=r.nonEmptyVariants,p=r.aggregationTargetName,d=r.featureFlag,C=Object(b.useActions)(Q),j=C.distributeVariantsEqually,Te=C.addVariant,pe=C.removeVariant,xe=C.setMultivariateEnabled,Le=Object($.useState)(!1),q=w()(Le,2),Pe=q[0],L=q[1],Ae=Object(b.useValues)(vt.a),oe=Ae.hasAvailableFeature,v=Object(b.useValues)(_t.b),N=v.upgradeLink;return Object(e.jsxs)(e.Fragment,{children:[t?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(e.jsx)("span",{className:"card-secondary",children:"Type"}),Object(e.jsx)("span",{children:d.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),Object(e.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),Object(e.jsxs)("span",{children:["This flag"," ",Object(e.jsxs)("b",{children:[d.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),Object(e.jsx)(Z.a,{className:"my-3"}),d.filters.multivariate&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Variant keys"})}),Object(e.jsxs)("div",{className:"border rounded p-4 mb-4",children:[Object(e.jsxs)(h.a,{className:"font-semibold",children:[Object(e.jsx)(m.a,{span:10,children:"Key"}),Object(e.jsx)(m.a,{span:11,children:"Description"}),Object(e.jsx)(m.a,{span:3,children:"Rollout"})]}),Object(e.jsx)(Z.a,{className:"my-3"}),o.map(function(E,T){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)(h.a,{children:[Object(e.jsxs)(m.a,{span:10,children:[Object(e.jsx)(He.a,{name:F.c[T],color:He.b.Gray}),Object(e.jsx)(xt.a,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:E.key})]}),Object(e.jsx)(m.a,{span:12,children:E.name||"There is no description for this variant key"}),Object(e.jsxs)(m.a,{span:2,children:[E.rollout_percentage,"%"]})]}),T!==o.length-1&&Object(e.jsx)(Z.a,{className:"my-3"})]})})]})]})]}):Object(e.jsxs)("div",{className:"mb-8",children:[Object(e.jsx)("h3",{className:"l4",children:"Served value"}),Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(X.a,{placement:"top",title:"Change value type? The variants below will be lost.",disabled:f,visible:Pe,onConfirm:function(){xe(!1),L(!1)},onCancel:function(){return L(!1)},okText:"OK",cancelText:"Cancel",children:Object(e.jsx)(y.a.Group,{options:[{label:"Release toggle (boolean)",value:!1},{label:Object(e.jsx)(Se.a,{title:oe(be.d.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:Object(e.jsxs)("div",{children:[!oe(be.d.MULTIVARIATE_FLAGS)&&Object(e.jsx)(Ce.a,{to:N,target:"_blank",children:Object(e.jsx)(Je.a,{style:{marginRight:4,color:"var(--warning)"}})}),"Multiple variants with rollout percentages (A/B test)"]})}),value:!0,disabled:!oe(be.d.MULTIVARIATE_FLAGS)}],onChange:function(T){var ee=T.target.value;ee===!1&&c.length?L(!0):(xe(ee),We(0))},value:s,optionType:"button"})})}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:[Object(F.i)(p)," will be served"," ",s?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):Object(e.jsx)("strong",{children:Object(e.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),!t&&s&&Object(e.jsxs)("div",{className:"feature-flag-variants",children:[Object(e.jsx)("h3",{className:"l4",children:"Variant keys"}),Object(e.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),Object(e.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(e.jsxs)(h.a,{gutter:8,className:"label-row",children:[Object(e.jsx)(m.a,{span:1}),Object(e.jsx)(m.a,{span:6,children:"Variant key"}),Object(e.jsx)(m.a,{span:12,children:"Description"}),Object(e.jsxs)(m.a,{span:4,children:["Rollout",Object(e.jsx)(_.a,{type:"tertiary",onClick:j,children:"(Redistribute)"})]})]}),o.map(function(E,T){return Object(e.jsx)(z.Group,{name:["filters","multivariate","variants",T],children:Object(e.jsxs)(h.a,{gutter:8,align:"middle",children:[Object(e.jsx)(m.a,{span:1,children:Object(e.jsx)(He.a,{name:F.c[T],color:He.b.Gray})}),Object(e.jsx)(m.a,{span:6,children:Object(e.jsx)(K.a,{name:"key",children:Object(e.jsx)(Oe.a,{"data-attr":"feature-flag-variant-key","data-key-index":T.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(T+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(e.jsx)(m.a,{span:12,children:Object(e.jsx)(K.a,{name:"name",children:Object(e.jsx)(Oe.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(e.jsx)(m.a,{span:3,children:Object(e.jsx)(K.a,{name:"rollout_percentage",children:function(M){var te=M.value,de=M.onChange;return Object(e.jsx)(A.a,{min:0,max:100,value:te,onChange:function(ie){if(ie!=null){var ke=parseInt(ie.toString());isNaN(ke)||de(ke)}},style:{width:"100%",borderColor:i?void 0:"var(--danger)"}})}})}),Object(e.jsx)(m.a,{span:2,children:Object(e.jsx)(h.a,{children:o.length>1&&Object(e.jsx)(_.a,{icon:Object(e.jsx)(I.IconDelete,{}),status:"primary-alt","data-attr":"delete-prop-filter-".concat(T),noPadding:!0,onClick:function(){return pe(T)}})})})]})},T)}),o.length>0&&!i&&Object(e.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",u,")."]}),Object(e.jsx)(_.a,{type:"secondary",onClick:function(){var T=o.length;Te(),We(T)},icon:Object(e.jsx)(I.IconPlus,{}),center:!0,children:"Add variant"})]})]})]})}function Ct(a){var t,r,s=a.readOnly,o=Object(b.useValues)(Xe.a),i=o.showGroupsOptions,f=o.aggregationLabel,u=Object(b.useValues)(Q),c=u.aggregationTargetName,p=u.featureFlag,d=u.groupTypes,C=u.taxonomicGroupTypes,j=Object(b.useActions)(Q),Te=j.setAggregationGroupTypeIndex,pe=j.updateConditionSet,xe=j.duplicateConditionSet,Le=j.removeConditionSet,q=j.addConditionSet,Pe=Object(b.useValues)(mn.a),L=Pe.cohortsById,Ae=Ie({value:-2}),oe=function(N){return!!N.find(function(E){return E.type==="cohort"||!yt.k.includes(E.key||"")})};return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"feature-flag-form-row",children:[Object(e.jsx)("div",{"data-attr":"feature-flag-release-conditions",children:s?Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Release conditions"})}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h3",{className:"l4",children:"Release conditions"}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:["Specify the ",c," to which you want to release this flag. Note that condition sets are rolled out independently of each other."]})]})}),!s&&i&&Object(e.jsxs)("div",{className:"centered",children:["Match by",Object(e.jsxs)(R.a,{value:((t=p.filters)===null||t===void 0?void 0:t.aggregation_group_type_index)!=null?(r=p.filters)===null||r===void 0?void 0:r.aggregation_group_type_index:-1,onChange:function(N){var E=N!==-1?N:null;Te(E)},style:{marginLeft:8},"data-attr":"feature-flag-aggregation-filter",dropdownMatchSelectWidth:!1,dropdownAlign:{points:["tr","br"]},children:[Object(e.jsx)(R.a.Option,{value:-1,children:"Users"},-1),d.map(function(v){return Object(e.jsx)(R.a.Option,{value:v.group_type_index,children:Object(F.i)(f(v.group_type_index).plural)},v.group_type_index)}),Ae]})]})]}),Object(e.jsx)(h.a,{gutter:16,children:p.filters.groups.map(function(v,N){var E,T,ee;return Object(e.jsxs)(m.a,{span:24,md:24,children:[N>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsxs)(h.a,{align:"middle",justify:"space-between",children:[Object(e.jsxs)(h.a,{align:"middle",children:[Object(e.jsxs)("span",{className:"simple-tag tag-light-blue font-medium mr-2",children:["Set ",N+1]}),Object(e.jsx)("div",{children:(E=v.properties)!==null&&E!==void 0&&E.length?Object(e.jsx)(e.Fragment,{children:s?Object(e.jsxs)(e.Fragment,{children:["Match ",Object(e.jsx)("b",{children:c})," against ",Object(e.jsx)("b",{children:"all"})," criteria"]}):Object(e.jsxs)(e.Fragment,{children:["Matching ",Object(e.jsx)("b",{children:c})," against the criteria"]})}):Object(e.jsxs)(e.Fragment,{children:["Condition set will match ",Object(e.jsxs)("b",{children:["all ",c]})]})})]}),!s&&Object(e.jsxs)(h.a,{children:[Object(e.jsx)(_.a,{icon:Object(e.jsx)(I.IconCopy,{}),status:"muted",noPadding:!0,onClick:function(){return xe(N)}}),p.filters.groups.length>1&&Object(e.jsx)(_.a,{icon:Object(e.jsx)(I.IconDelete,{}),status:"muted",noPadding:!0,onClick:function(){return Le(N)}})]})]}),Object(e.jsx)(Z.a,{className:"my-3"}),!s&&oe(v.properties)&&Object(e.jsxs)(at.a,{type:"info",className:"mt-3 mb-3",children:["These properties aren't immediately available on first page load for unidentified persons. This feature flag requires that at least one event is sent prior to becoming available to your product or website."," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank",children:[" ","Learn more about how to make feature flags available instantly."]})]}),s?Object(e.jsx)(e.Fragment,{children:v.properties.map(function(M,te){return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"feature-flag-property-display",children:[te===0?Object(e.jsx)(_.a,{icon:Object(e.jsx)(I.IconSubArrowRight,{className:"arrow-right"}),status:"muted",size:"small"}):Object(e.jsx)(_.a,{icon:Object(e.jsx)("span",{className:"text-sm",children:"&"}),status:"muted",size:"small"}),Object(e.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt",children:[M.type==="cohort"?"Cohort":M.key," "]}),Object(e.jsxs)("span",{children:[Object(un.a)(M.operator)," "]}),V()(Array.isArray(M.value)?M.value:[M.value]).map(function(de,$e){var ie;return Object(e.jsx)("span",{className:"simple-tag tag-light-blue text-primary-alt display-value",children:M.type==="cohort"?de&&((ie=L[de])===null||ie===void 0?void 0:ie.name)||"ID ".concat(de):de},$e)})]})})})}):Object(e.jsx)("div",{children:Object(e.jsx)(lt.a,{orFiltering:!0,pageKey:"feature-flag-".concat(p.id,"-").concat(N,"-").concat(p.filters.groups.length,"-").concat((T=p.filters.aggregation_group_type_index)!==null&&T!==void 0?T:""),propertyFilters:v==null?void 0:v.properties,logicalRowDivider:!0,addButton:Object(e.jsx)(_.a,{icon:Object(e.jsx)(I.IconPlusMini,{}),noPadding:!0,children:"Add condition"}),onChange:function(te){return pe(N,void 0,te)},taxonomicGroupTypes:C,hasRowOperator:!1})}),(!s||s&&((ee=v.properties)===null||ee===void 0?void 0:ee.length)>0)&&Object(e.jsx)(Z.a,{className:"my-3"}),s?Object(e.jsxs)("div",{children:["Rolled out to"," ",Object(e.jsxs)("b",{children:[v.rollout_percentage!=null?v.rollout_percentage:100,"%"]})," of"," ",Object(e.jsx)("b",{children:c})," in this set"]}):Object(e.jsx)("div",{className:"feature-flag-form-row",children:Object(e.jsxs)("div",{className:"centered",children:["Roll out to"," ",Object(e.jsx)(A.a,{style:{width:100,marginLeft:8,marginRight:8},onChange:function(te){pe(N,te)},value:v.rollout_percentage!=null?v.rollout_percentage:100,min:0,max:100,addonAfter:"%"})," ","of ",Object(e.jsx)("b",{children:c})," in this set"]})})]})]},"".concat(N,"-").concat(p.filters.groups.length))})}),!s&&Object(e.jsx)(_.a,{type:"secondary",className:"mt-0",onClick:q,icon:Object(e.jsx)(I.IconPlus,{}),children:"Add condition set"})]})}try{Ee.displayName="FeatureFlag",Ee.__docgenInfo={description:"",displayName:"FeatureFlag",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"]={docgenInfo:Ee.__docgenInfo,name:"FeatureFlag",path:"frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"})}catch(a){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(H,S,n){"use strict";var U=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),V=n.n(U),ue=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),w=n.n(ue),ae={};ae.insert="head",ae.singleton=!1;var Ye=V()(w.a,ae),Re=w.a.locals||{}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(H,S,n){"use strict";n.d(S,"a",function(){return J}),n.d(S,"b",function(){return je});var U=n("./node_modules/core-js/modules/es.function.name.js"),V=n.n(U),ue=n("./node_modules/core-js/modules/es.array.slice.js"),w=n.n(ue),ae=n("./node_modules/react/index.js"),Ye=n.n(ae),Re=n("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),ye=n("./node_modules/kea/lib/index.esm.js"),Ne=n("./frontend/src/lib/dayjs.ts"),ze=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),le=n("./frontend/src/lib/components/LemonButton/index.ts"),ge=n("./frontend/src/scenes/urls.ts"),$=n("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),z=n("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),ce=n("./frontend/src/lib/utils/eventUsageLogic.ts"),h=n("./node_modules/react/jsx-runtime.js"),m=n.n(h);function J(X){var y=X.insight,D=Object(ye.useActions)(ce.e),G=D.reportInsightOpenedFromRecentInsightList;return Object(h.jsx)(le.a,{fullWidth:!0,to:ge.a.insightView(y.short_id),onClick:function(){G()},children:Object(h.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(h.jsx)($.InsightIcon,{insight:y}),Object(h.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(h.jsx)("div",{children:y.name||y.derived_name}),Object(h.jsxs)("div",{children:["Last modified ",Object(Ne.a)(y.last_modified_at).fromNow()]})]})]})})}function je(){var X=Object(ye.useValues)(z.a),y=X.recentInsights,D=X.recentInsightsLoading,G=Object(ye.useActions)(z.a),A=G.loadRecentInsights;return Object(ae.useEffect)(function(){A()},[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ze.a,{title:"Your recently viewed insights",viewAllURL:ge.a.savedInsights(),loading:D,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:ge.a.savedInsights()},items:y.slice(0,5),renderRow:function(k,b){return Object(h.jsx)(J,{insight:k},b)}})})}try{J.displayName="InsightRow",J.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:J.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(X){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(H,S,n){"use strict";n.d(S,"a",function(){return X});var U=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),V=n.n(U),ue=n("./node_modules/@babel/runtime/regenerator/index.js"),w=n.n(ue),ae=n("./node_modules/core-js/modules/es.array.iterator.js"),Ye=n.n(ae),Re=n("./node_modules/core-js/modules/es.object.to-string.js"),ye=n.n(Re),Ne=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ze=n.n(Ne),le=n("./node_modules/kea/lib/index.esm.js"),ge=n("./frontend/src/scenes/teamLogic.tsx"),$=n("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),z=n("./frontend/src/types.ts"),ce=n("./frontend/src/lib/api.ts"),h=n("./node_modules/kea-subscriptions/lib/index.js"),m=n.n(h),J=n("./node_modules/kea-loaders/lib/index.js"),je=n.n(J),X=Object(le.kea)([Object(le.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(le.connect)({values:[ge.a,["currentTeamId","currentTeam"]]}),Object(le.selectors)({primaryDashboardId:[function(){return[ge.a.selectors.currentTeam]},function(y){return y==null?void 0:y.primary_dashboard}],dashboardLogic:[function(y){return[y.primaryDashboardId]},function(y){return Object($.c)({id:y!=null?y:void 0,placement:z.m.ProjectHomepage})}]}),Object(J.loaders)(function(y){var D=y.values;return{recentInsights:[[],{loadRecentInsights:function(){var G=V()(w.a.mark(function R(){var k;return w.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,ce.b.get("api/projects/".concat(D.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return k=F.sent,F.abrupt("return",k.results);case 4:case"end":return F.stop()}},R)}));function A(){return G.apply(this,arguments)}return A}()}],persons:[[],{loadPersons:function(){var G=V()(w.a.mark(function R(){var k;return w.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,ce.b.persons.list();case 2:return k=F.sent,F.abrupt("return",k.results);case 4:case"end":return F.stop()}},R)}));function A(){return G.apply(this,arguments)}return A}()}]}}),Object(h.subscriptions)(function(y){var D=y.cache;return{dashboardLogic:function(A){var R;(R=D.unmount)===null||R===void 0||R.call(D),D.unmount=A?A.mount():null}}}),Object(le.afterMount)(function(y){var D,G=y.cache,A=y.actions;(D=G.unmount)===null||D===void 0||D.call(G),A.loadRecentInsights(),A.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss":function(H,S,n){var U=n("./node_modules/css-loader/dist/runtime/api.js");S=U(!1),S.push([H.i,".variant-form-list{font-size:13px;border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-top:16px}.variant-form-list .ant-form-item{min-height:32px}.variant-form-list .label-row{font-weight:700}.variant-form-list .label-row .ant-col{min-height:32px;display:flex;justify-content:space-between;align-items:center}.feature-flag-property-display{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.feature-flag-property-display .arrow-right{margin-right:-8px;margin-top:.25rem}.feature-flag-property-display .display-value{word-break:break-all}.condition-set-separator{color:var(--primary-alt);font-size:12px;font-weight:var(--font-semibold);margin-left:.5rem;margin-bottom:.5rem}.feature-flag-form-row{display:flex;justify-content:space-between;align-items:center;width:100%}.feature-flag-form-row .centered{display:flex;align-items:center;white-space:pre-wrap}",""]),H.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss":function(H,S,n){var U=n("./node_modules/css-loader/dist/runtime/api.js");S=U(!1),S.push([H.i,".FeatureFlagInstructionsHeader{flex-wrap:nowrap}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title{display:flex;justify-items:center}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title .FeatureFlagInstructionsHeader__header-title__icon{color:var(--text-muted-alt);margin-right:12px;font-size:1.6em}.FeatureFlagInstructionsHeader__option{display:flex;justify-items:center}.FeatureFlagInstructionsHeader__option .FeatureFlagInstructionsHeader__option__icon{margin-top:2px;margin-right:8px}",""]),H.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(H,S,n){var U=n("./node_modules/css-loader/dist/runtime/api.js");S=U(!1),S.push([H.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),H.exports=S}}]);
