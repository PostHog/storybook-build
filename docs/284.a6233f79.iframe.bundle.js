(window.webpackJsonp=window.webpackJsonp||[]).push([[284],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(H,p,e){"use strict";e.r(p),e.d(p,"SessionsRecordings",function(){return E}),e.d(p,"scene",function(){return Q});var N=e("./node_modules/react/index.js"),n=e.n(N),o=e("./frontend/src/lib/components/PageHeader.tsx"),M=e("./frontend/src/scenes/teamLogic.tsx"),O=e("./node_modules/kea/lib/index.esm.js"),C=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),G=e("./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx"),A=e("./frontend/src/types.ts"),z=e("./node_modules/antd/es/row/index.js"),K=e("./node_modules/antd/es/space/index.js"),I=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),B=e("./frontend/src/lib/components/Popup/Popup.tsx"),Y=e("./node_modules/core-js/modules/es.array.slice.js"),h=e("./node_modules/core-js/modules/es.array.iterator.js"),F=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),L=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),D;(function(s){s.SECONDS="seconds",s.MINUTES="minutes",s.HOURS="hours"})(D||(D={}));var R=Object(O.kea)({path:function(t){return["scenes","session-recordings","DurationFilterLogic",t]},key:function(t){return t.pageKey||"global"},props:{},actions:{setValue:function(t){return{value:t}},setIsOpen:function(t){return{isOpen:t}},setOperator:function(t){return{operator:t}}},reducers:function(t){var r,l,c=t.props;return{operator:[c==null||(r=c.initialFilter)===null||r===void 0?void 0:r.operator,{setOperator:function(i,a){var d=a.operator;return d}}],value:[c==null||(l=c.initialFilter)===null||l===void 0?void 0:l.value,{setValue:function(i,a){var d=a.value;return d}}],isOpen:[!1,{setIsOpen:function(i,a){var d=a.isOpen;return d}}]}},selectors:{durationString:[function(s){return[s.operator,s.value]},function(s,t){var r="";s===A.M.GreaterThan?r+="> ":r+="< ";var l=Object(L.b)(t||0);return r+=l.timeValue||0,l.timeValue===1?r+=" "+l.unit.slice(0,-1):r+=" "+l.unit,r}]},listeners:function(t){var r=t.props,l=t.values,c=function(i){var a=i.value,d=i.operator;r.onChange({operator:d||l.operator,value:a||l.value||0,type:"recording",key:"duration"})};return{setValue:function(i){var a=i.value;return c({value:a})},setOperator:function(i){var a=i.operator;return c({operator:a})}}}}),x=e("./frontend/@posthog/lemon-ui/src/index.ts");function g(s){var t=s.initialFilter,r=s.onChange,l=s.pageKey,c=R({initialFilter:t,onChange:r,pageKey:l}),u=Object(O.useActions)(c),i=u.setValue,a=u.setIsOpen,d=u.setOperator,m=Object(O.useValues)(c),U=m.durationString,$=m.value,b=m.operator,X=m.isOpen;return n.a.createElement(B.a,{visible:X,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return a(!1)},overlay:n.a.createElement(z.a,null,n.a.createElement(K.b,null,n.a.createElement(I.a,{operator:b,operators:[A.M.GreaterThan,A.M.LessThan],onChange:function(J){d(J)}}),n.a.createElement(L.a,{onChange:i,initialValue:$||0})))},n.a.createElement(x.LemonButton,{type:"secondary",status:"stealth",size:"small",onClick:function(){a(!0)}},U))}try{g.displayName="DurationFilter",g.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"]={docgenInfo:g.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"})}catch(s){}var S=e("./frontend/src/lib/utils/eventUsageLogic.ts"),P=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),j=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),v=e("./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx");function y(s){var t=s.personUUID,r=s.isPersonPage,l=r===void 0?!1:r,c=Object(f.c)({personUUID:t}),u=Object(O.useValues)(c),i=u.fromDate,a=u.toDate,d=u.durationFilter,m=Object(O.useActions)(c),U=m.setDateRange,$=m.setDurationFilter,b=m.reportRecordingsListFilterAdded;return n.a.createElement("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-4"},n.a.createElement(v.b,{personUUID:t,isPersonPage:l}),n.a.createElement("div",{className:"flex items-center gap-4"},n.a.createElement(P.a,{dateFrom:i!=null?i:"-7d",dateTo:a!=null?a:void 0,onChange:function(W,J){b(S.d.DateRange),U(W,J!=null?J:void 0)},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]}),n.a.createElement("div",{className:"flex gap-2"},n.a.createElement(j.a,null,"Duration"),n.a.createElement(g,{onChange:function(W){b(S.d.Duration),$(W)},initialFilter:d,pageKey:l?"person-".concat(t):"session-recordings"}))))}try{y.displayName="SessionRecordingsTopBar",y.__docgenInfo={description:"",displayName:"SessionRecordingsTopBar",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsTopBar.tsx#SessionRecordingsTopBar"]={docgenInfo:y.__docgenInfo,name:"SessionRecordingsTopBar",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsTopBar.tsx#SessionRecordingsTopBar"})}catch(s){}var V=e("./frontend/src/lib/components/AlertMessage/index.ts");function E(){var s=Object(O.useValues)(M.a),t=s.currentTeam;return n.a.createElement("div",null,n.a.createElement(o.a,{title:n.a.createElement("div",null,"Recordings")}),t&&!(t!=null&&t.session_recording_opt_in)?n.a.createElement("div",{className:"mb-4"},n.a.createElement(V.a,{type:"info"},"Session recordings are currently disabled for this project. To use this feature, please go to your ",n.a.createElement(x.Link,{to:"".concat(C.a.projectSettings(),"#recordings")},"project settings")," and enable it.")):null,n.a.createElement(y,null),n.a.createElement(G.a,{key:"global"}))}var Q={component:E,logic:f.c}},"./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx":function(H,p,e){"use strict";e.d(p,"a",function(){return g});var N=e("./node_modules/core-js/modules/es.array.concat.js"),n=e("./node_modules/react/index.js"),o=e.n(n),M=e("./node_modules/kea/lib/index.esm.js"),O=e("./frontend/src/lib/utils.tsx"),C=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),f=e("./frontend/src/scenes/persons/PersonHeader.tsx"),G=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=e.n(G),z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.scss"),K=e.n(z),I={};I.insert="head",I.singleton=!1;var B=A()(K.a,I),Y=K.a.locals||{},h=e("./frontend/src/lib/components/LemonTable/index.ts"),F=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),T=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),L=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),D=e("./frontend/@posthog/lemon-ui/src/index.ts"),R=e("./frontend/src/lib/components/icons.tsx"),x=e("./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx");function g(S){var P=S.personUUID,j=Object(C.c)({personUUID:P,isPlaylist:!0}),v=Object(M.useValues)(j),y=v.sessionRecordings,V=v.sessionRecordingsResponseLoading,E=v.hasNext,Q=v.hasPrev,s=v.activeSessionRecording,t=v.offset,r=Object(M.useActions)(j),l=r.openSessionPlayer,c=r.loadNext,u=r.loadPrev,i=Object(n.useRef)(null),a=[{title:"Recordings",render:function(m,U){return o.a.createElement("div",null,Object(f.b)(U.person,25),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement(F.b,{time:U.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})," \xB7 ",Object(O.n)(U.recording_duration))))}}];return o.a.createElement("div",{ref:i,className:"SessionRecordingsPlaylist","data-attr":"session-recordings-playlist"},o.a.createElement("div",{className:"SessionRecordingsPlaylist__left-column space-y-4"},o.a.createElement(x.a,{personUUID:P}),o.a.createElement(h.a,{dataSource:y,columns:a,loading:V,onRow:function(m){return{onClick:function($){if(!$.target.closest("a")){var b;l({id:m.id}),window.scrollTo({left:0,top:i!=null&&(b=i.current)!==null&&b!==void 0&&b.offsetTop?i.current.offsetTop-8:0,behavior:"smooth"})}}}},rowStatus:function(m){return(s==null?void 0:s.id)===m.id?"highlighted":null},rowClassName:"cursor-pointer","data-attr":"session-recording-table","data-tooltip":"session-recording-table",emptyState:"No matching recordings found",loadingSkeletonRows:C.a}),o.a.createElement("div",{className:"flex justify-end items-center my-2"},o.a.createElement("span",null,"".concat(t+1," - ").concat(t+(V?Object(C.b)(!0):y.length))),o.a.createElement(D.LemonButton,{icon:o.a.createElement(R.IconChevronLeft,null),status:"stealth",disabled:!Q,onClick:function(){u(),window.scrollTo(0,0)}}),o.a.createElement(D.LemonButton,{icon:o.a.createElement(R.IconChevronRight,null),status:"stealth",disabled:!E,onClick:function(){c(),window.scrollTo(0,0)}}))),o.a.createElement("div",{className:"SessionRecordingsPlaylist__right-column"},s!=null&&s.id?o.a.createElement("div",{className:"border rounded h-full"},o.a.createElement(T.a,{playerKey:"playlist",sessionRecordingId:s.id,matching:s==null?void 0:s.matching_events,recordingStartTime:s?s.start_time:void 0})):o.a.createElement(L.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonTo:"https://posthog.com/docs/user-guides/recordings"})))}try{g.displayName="SessionRecordingsPlaylist",g.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:g.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(S){}},"./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx":function(H,p,e){"use strict";e.d(p,"a",function(){return B}),e.d(p,"b",function(){return Y});var N=e("./node_modules/react/index.js"),n=e.n(N),o=e("./node_modules/kea/lib/index.esm.js"),M=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),O=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),C=e("./frontend/src/lib/utils/eventUsageLogic.ts"),f=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),G=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),A=e("./frontend/src/lib/components/icons.tsx"),z=e("./frontend/src/lib/components/LemonButton/index.ts"),K=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),I=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx");function B(h){var F=h.personUUID,T=h.isPersonPage,L=T===void 0?!1:T,D=Object(M.c)({personUUID:F}),R=Object(o.useValues)(D),x=R.entityFilters,g=R.propertyFilters,S=R.filtersEnabled,P=Object(o.useActions)(D),j=P.setEntityFilters,v=P.setPropertyFilters,y=P.reportRecordingsListFilterAdded;return n.a.createElement(n.a.Fragment,null,S?n.a.createElement("div",{className:"flex-1 border rounded p-4"},n.a.createElement("div",{className:"space-y-2"},n.a.createElement(I.a,{info:"Show recordings where all of the events or actions listed below happen."},"Filter by events and actions"),n.a.createElement(O.a,{bordered:!0,filters:x,setFilters:function(E){y(C.d.EventAndAction),j(E)},typeKey:L?"person-".concat(F):"session-recordings",mathAvailability:K.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[f.a.Actions,f.a.Events],propertiesTaxonomicGroupTypes:[f.a.EventProperties,f.a.EventFeatureFlags,f.a.Elements],propertyFiltersPopover:!0})),!L&&n.a.createElement("div",{className:"mt-8 space-y-2"},n.a.createElement(I.a,{info:"Show recordings by persons who match the set criteria"},"Filter by persons and cohorts"),n.a.createElement(G.a,{pageKey:L?"person-".concat(F):"session-recordings",taxonomicGroupTypes:[f.a.PersonProperties,f.a.Cohorts],propertyFilters:g,onChange:function(E){y(C.d.PersonAndCohort),v(E)}}))):void 0)}function Y(h){var F,T,L=h.personUUID,D=h.isPersonPage,R=Object(M.c)({personUUID:L}),x=Object(o.useValues)(R),g=x.entityFilters,S=x.propertyFilters,P=x.filtersEnabled,j=Object(o.useActions)(R),v=j.setFiltersEnabled,y=(((F=g.actions)===null||F===void 0?void 0:F.length)||0)+(((T=g.events)===null||T===void 0?void 0:T.length)||0)+((S==null?void 0:S.length)||0);return n.a.createElement(z.a,{type:"secondary",size:"small",icon:n.a.createElement(A.IconWithCount,{count:y},n.a.createElement(A.IconFilter,null)),onClick:function(){if(v(!P),D){var E=document.querySelectorAll(".entity-filter-row button");E.length>0&&E[0].click()}}},P?"Hide filters":"Filter recordings")}try{B.displayName="SessionRecordingsFilters",B.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"]={docgenInfo:B.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"})}catch(h){}try{Y.displayName="SessionRecordingsFiltersToggle",Y.__docgenInfo={description:"",displayName:"SessionRecordingsFiltersToggle",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFiltersToggle"]={docgenInfo:Y.__docgenInfo,name:"SessionRecordingsFiltersToggle",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFiltersToggle"})}catch(h){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.scss":function(H,p,e){var N=e("./node_modules/css-loader/dist/runtime/api.js");p=N(!1),p.push([H.i,".SessionRecordingsPlaylist{display:flex;flex-direction:column;gap:1rem}@media screen and (min-width:768px){.SessionRecordingsPlaylist{flex-direction:row}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{flex-shrink:0}@media screen and (min-width:768px){.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{width:30%;min-width:350px;max-width:500px}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column{flex:1}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column .SessionRecordingsPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),H.exports=p}}]);
