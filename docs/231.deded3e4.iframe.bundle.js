(window.webpackJsonp=window.webpackJsonp||[]).push([[231,236],{"./frontend/src/scenes/cohorts/Cohort.tsx":function(j,n,e){"use strict";e.r(n),e.d(n,"scene",function(){return Se}),e.d(n,"Cohort",function(){return le});var c=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(c),E=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohort.scss"),d=e.n(E),I={};I.insert="head",I.singleton=!1;var ce=s()(d.a,I),ne=d.a.locals||{},G=e("./node_modules/react/index.js"),t=e.n(G),ie=e("./node_modules/core-js/modules/es.function.name.js"),u=e("./node_modules/kea/lib/index.esm.js"),Y=e("./frontend/src/scenes/urls.ts"),Q=e("./frontend/src/models/cohortsModel.ts"),P=Object(u.kea)([Object(u.props)({}),Object(u.key)(function(v){return v.id||"new"}),Object(u.path)(["scenes","cohorts","cohortLogic"]),Object(u.selectors)({breadcrumbs:[function(){return[Q.a.selectors.cohortsById,function(v,L){return L.id}]},function(v,L){var A;return[{name:"Cohorts",path:Y.a.cohorts()},{name:L!=="new"&&((A=v[L])===null||A===void 0?void 0:A.name)||"Untitled"}]}]})]),B=e("./node_modules/antd/lib/dropdown/style/index.css"),m=e("./frontend/src/scenes/cohorts/cohortEditLogic.ts"),U=e("./frontend/src/scenes/userLogic.ts"),T=e("./frontend/src/lib/forms/VerticalForm.tsx"),Z=e("./frontend/src/lib/components/PageHeader.tsx"),R=e("./frontend/src/lib/components/LemonButton/index.ts"),r=e("./node_modules/kea-router/lib/index.js"),l=e("./node_modules/antd/es/divider/index.js"),o=e("./node_modules/antd/es/row/index.js"),i=e("./node_modules/antd/es/col/index.js"),y=e("./frontend/src/lib/forms/Field.tsx"),N=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),V=e("./frontend/src/lib/components/Tooltip.tsx"),z=e("./frontend/src/lib/components/LemonSelect.tsx"),de=e("./frontend/src/scenes/cohorts/CohortFilters/constants.tsx"),O=e("./frontend/src/lib/constants.tsx"),he=e("./frontend/src/types.ts"),ge=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),k=e("./node_modules/antd/lib/upload/Dragger.js"),ae=e.n(k),a=e("./frontend/src/lib/components/icons.tsx"),x=e("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx"),$=e("./node_modules/core-js/modules/es.array.map.js"),q=e("./node_modules/core-js/modules/es.array.iterator.js"),S=e("./node_modules/core-js/modules/es.object.to-string.js"),K=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),g=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss"),b=e.n(g),W={};W.insert="head",W.singleton=!1;var ee=s()(b.a,W),H=b.a.locals||{},p=e("./frontend/src/scenes/cohorts/cohortUtils.tsx"),f=e("./node_modules/kea-forms/lib/index.js"),te=e("./node_modules/kea-forms/lib/components.js"),J=e("./node_modules/clsx/dist/clsx.m.js"),se=e("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),ve=e("./frontend/src/lib/utils.tsx"),je=e("./frontend/src/lib/components/LemonDivider/index.ts"),Pe=e("./frontend/src/lib/components/AlertMessage/index.ts"),Te=e("./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaRowBuilder.tsx");function ue(v){var L=Object(m.a)(v),A=Object(u.useValues)(L),oe=A.cohort,w=Object(u.useActions)(L),Ee=w.setInnerGroupType,ye=w.duplicateFilter,pe=w.removeFilter,h=w.addFilter;return t.a.createElement(t.a.Fragment,null,oe.filters.properties.values.map(function(D,M){return Object(p.i)(D)?t.a.createElement(f.Group,{key:M,name:["filters","properties","values",M]},M!==0&&t.a.createElement("div",{className:"CohortCriteriaGroups__matching-group__logical-divider"},oe.filters.properties.type),t.a.createElement(te.Field,{name:"id",template:function(C){var F=C.error,_=C.kids;return t.a.createElement("div",{className:Object(J.a)("CohortCriteriaGroups__matching-group",F&&"CohortCriteriaGroups__matching-group--error")},t.a.createElement(o.a,{align:"middle",wrap:!1,className:"pl pr"},t.a.createElement(se.a,{name:ve.d[M],color:se.b.Gray}),t.a.createElement(x.a,{prefix:"Match persons against",suffix:"criteria",onChange:function(fe){return Ee(fe,M)},value:D.type}),t.a.createElement("div",{style:{flex:1,minWidth:"0.5rem"}}),t.a.createElement(R.a,{icon:t.a.createElement(a.IconCopy,null),type:"alt",onClick:function(){return ye(M)}}),oe.filters.properties.values.length>1&&t.a.createElement(R.a,{icon:t.a.createElement(a.IconDelete,null),type:"alt",onClick:function(){return pe(M)}})),t.a.createElement(je.a,{large:!0}),F&&t.a.createElement(o.a,{className:"CohortCriteriaGroups__matching-group__error-row"},t.a.createElement(Pe.a,{type:"error",style:{width:"100%"}},t.a.createElement(t.a.Fragment,null,F))),_)}},t.a.createElement(t.a.Fragment,null,D.values.map(function(re,C){return Object(p.i)(re)?null:t.a.createElement(f.Group,{key:C,name:["values",C]},t.a.createElement(Te.a,{id:v.id,groupIndex:M,index:C,logicalOperator:D.type,criteria:re,type:Object(p.g)(re),hideDeleteIcon:D.values.length<=1}),C===D.values.length-1&&t.a.createElement(o.a,null,t.a.createElement(R.a,{"data-attr":"cohort-add-filter-group-criteria",style:{margin:"0.75rem"},type:"secondary",onClick:function(){return h(M)},icon:t.a.createElement(a.IconPlusMini,{color:"var(--primary)"})},"Add criteria")))})))):null}),t.a.createElement(R.a,{"data-attr":"cohort-add-filter-group",className:"mb mt",type:"secondary",onClick:function(){return h()},icon:t.a.createElement(a.IconPlusMini,{color:"var(--primary)"}),fullWidth:!0},"Add criteria group"))}try{ue.displayName="CohortCriteriaGroups",ue.__docgenInfo={description:"",displayName:"CohortCriteriaGroups",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"]={docgenInfo:ue.__docgenInfo,name:"CohortCriteriaGroups",path:"frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"})}catch(v){}var Oe=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),xe=e("./frontend/src/scenes/persons/Persons.tsx");function me(v){var L=v.id,A={id:L},oe=Object(m.a)(A),w=Object(u.useActions)(oe),Ee=w.deleteCohort,ye=w.setOuterGroupsType,pe=Object(u.useValues)(oe),h=pe.cohort,D=pe.cohortLoading,M=Object(u.useValues)(U.a),re=M.hasAvailableFeature,C=h.id==="new"||h.id===void 0;return t.a.createElement("div",{className:"cohort"},t.a.createElement(T.a,{logic:m.a,props:A,formKey:"cohort",enableFormOnSubmit:!0},t.a.createElement(Z.a,{title:C?"New cohort":h.name||"Untitled",buttons:t.a.createElement("div",{className:"flex-center"},C?t.a.createElement(R.a,{"data-attr":"cancel-cohort",type:"secondary",onClick:function(){r.router.actions.push(Y.a.cohorts())},style:{marginRight:8},disabled:D},"Cancel"):t.a.createElement(R.a,{"data-attr":"delete-cohort",status:"danger",type:"secondary",onClick:function(){Ee()},style:{marginRight:8},disabled:D},"Delete"),t.a.createElement(R.a,{type:"primary","data-attr":"save-cohort",htmlType:"submit",loading:D||h.is_calculating,disabled:D||h.is_calculating},"Save"))}),t.a.createElement(l.a,null),t.a.createElement(o.a,{gutter:[16,24],style:{maxWidth:640}},t.a.createElement(i.a,{xs:24,sm:12},t.a.createElement(y.a,{name:"name",label:"Name",className:"Cohort__Name"},t.a.createElement(N.a,{"data-attr":"cohort-name"}))),t.a.createElement(i.a,{xs:24,sm:12},t.a.createElement(y.a,{name:"is_static",label:"Type"},function(F){var _=F.value,X=F.onChange;return t.a.createElement(V.a,{title:C?null:"Create a new cohort to use a different type of cohort."},t.a.createElement("div",null,t.a.createElement(z.a,{disabled:!C,options:de.b,value:_?O.b.Static:O.b.Dynamic,onChange:function(Ce){X(Ce===O.b.Static)},type:"stealth",outlined:!0,style:{width:"100%"},"data-attr":"cohort-type"})))}))),re(he.d.DASHBOARD_COLLABORATION)&&t.a.createElement(o.a,{gutter:[16,24],className:"mt ph-ignore-input",style:{maxWidth:640}},t.a.createElement(i.a,{span:24},t.a.createElement(y.a,{name:"description",label:"Description","data-attr":"cohort-description"},t.a.createElement(ge.a,null)))),h.is_static?t.a.createElement(o.a,{gutter:24,className:"mt ph-ignore-input"},t.a.createElement(i.a,{span:24},t.a.createElement(y.a,{name:"csv",label:C?"Upload users":"Add users","data-attr":"cohort-csv"},function(F){var _,X,fe=F.onChange;return t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"mb"},"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user\u2019s distinct ID."),t.a.createElement(ae.a,{name:"file",multiple:!1,fileList:h.csv?[h.csv]:[],accept:".csv",showUploadList:!1,beforeUpload:function(be){return fe(be),!1},className:"cohort-csv-dragger"},h.csv?t.a.createElement(t.a.Fragment,null,t.a.createElement(a.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),t.a.createElement("div",{className:"ant-upload-text"},(_=(X=h.csv)===null||X===void 0?void 0:X.name)!==null&&_!==void 0?_:"File chosen")):t.a.createElement(t.a.Fragment,null,t.a.createElement(a.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),t.a.createElement("div",{className:"ant-upload-text"},"Drag a file here or click to browse for a file"))))}))):t.a.createElement(t.a.Fragment,null,t.a.createElement(l.a,null),t.a.createElement(o.a,{gutter:24,className:"mt"},t.a.createElement(i.a,{span:24},t.a.createElement(t.a.Fragment,null,t.a.createElement(o.a,{align:"middle",justify:"space-between",wrap:!1},t.a.createElement(o.a,{className:"ant-form-item ant-form-item-label",style:{marginBottom:0}},t.a.createElement("label",{htmlFor:"groups",title:"Matching criteria"},"Matching criteria"),t.a.createElement("span",null,"Actors who match the following criteria will be part of the cohort. Continuously updated automatically.")),t.a.createElement(o.a,{align:"middle",wrap:!1,justify:"space-between",className:"pl"},t.a.createElement(x.a,{value:h.filters.properties.type,onChange:function(_){ye(_)},topLevelFilter:!0,suffix:"criteria"}))),t.a.createElement(ue,{id:A.id}))))),!C&&t.a.createElement(t.a.Fragment,null,t.a.createElement(l.a,null),t.a.createElement("div",null,t.a.createElement("h3",{className:"l3"},"Persons in this cohort"),h.is_calculating?t.a.createElement("div",{className:"cohort-recalculating flex-center"},t.a.createElement(Oe.a,{size:"sm",style:{marginRight:4}}),"We're recalculating who belongs to this cohort. This could take up to a couple of minutes."):t.a.createElement("div",{style:{marginTop:15}},t.a.createElement(xe.Persons,{cohort:h.id}))))))}try{me.displayName="CohortEdit",me.__docgenInfo={description:"",displayName:"CohortEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"]={docgenInfo:me.__docgenInfo,name:"CohortEdit",path:"frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"})}catch(v){}var Se={component:le,logic:P,paramsToProps:function(L){var A=L.params.id;return{id:A&&A!=="new"?parseInt(A):"new"}}};function le(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=v.id;return t.a.createElement(me,{id:L})}try{le.displayName="Cohort",le.__docgenInfo={description:"",displayName:"Cohort",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/Cohort.tsx#Cohort"]={docgenInfo:le.__docgenInfo,name:"Cohort",path:"frontend/src/scenes/cohorts/Cohort.tsx#Cohort"})}catch(v){}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(j,n,e){"use strict";e.d(n,"a",function(){return R});var c=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=e.n(c),E=e("./node_modules/@babel/runtime/regenerator/index.js"),d=e.n(E),I=e("./node_modules/core-js/modules/es.array.iterator.js"),ce=e.n(I),ne=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(ne),t=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ie=e.n(t),u=e("./node_modules/core-js/modules/es.array.concat.js"),Y=e.n(u),Q=e("./node_modules/kea/lib/index.esm.js"),P=e("./frontend/src/lib/api.ts"),B=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),m=e("./frontend/src/lib/utils.tsx"),U=e("./frontend/src/scenes/teamLogic.tsx"),T=e("./frontend/src/scenes/urls.ts"),Z=e("./frontend/src/models/groupsModel.ts"),R=Object(Q.kea)({path:["groups","groupsListLogic"],connect:{values:[U.a,["currentTeamId"],Z.a,["groupTypes","aggregationLabel"],B.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(o){return{url:o}},setTab:function(o){return{tab:o}}}},loaders:function(l){var o=l.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var i=s()(d.a.mark(function N(V){var z;return d.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(z=V.url,!o.groupsEnabled){O.next=6;break}return z=z||"api/projects/".concat(o.currentTeamId,"/groups/?group_type_index=").concat(o.currentTab),O.next=5,P.b.get(z);case 5:return O.abrupt("return",O.sent);case 6:case"end":return O.stop()}},N)}));function y(N){return i.apply(this,arguments)}return y}()}]}},reducers:{currentTab:["-1",{setTab:function(l,o){var i=o.tab;return i}}]},selectors:{currentTabName:[function(r){return[r.currentTab,r.groupTypes,r.aggregationLabel]},function(r,l,o){return r==="-1"?"Persons":l!=null&&l.length?Object(m.j)(o(parseInt(r)).singular):""}],groupName:[function(r){return[r.currentTab,r.aggregationLabel]},function(r,l){return r==="-1"?{singular:"person",plural:"persons"}:l(parseInt(r))}],breadcrumbs:[function(r){return[r.currentTabName,r.currentTab]},function(r,l){return[{name:r,path:T.a.groups(l)}]}]},actionToUrl:function(){return{setTab:function(o){var i=o.tab;return i!=="-1"?T.a.groups(i):T.a.persons()}}},urlToAction:function(l){var o=l.actions,i=l.values;return{"/groups/:id":function(N){var V=N.id;V&&(o.setTab(V),o.loadGroups())},"/persons":function(){i.currentTab!=="-1"&&o.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(j,n,e){"use strict";e.d(n,"a",function(){return P});var c=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/lib/components/PageHeader.tsx"),E=e("./node_modules/react/index.js"),d=e.n(E),I=e("./node_modules/core-js/modules/es.array.includes.js"),ce=e("./node_modules/core-js/modules/es.string.includes.js"),ne=e("./node_modules/core-js/modules/es.array.map.js"),G=e("./node_modules/antd/es/tabs/index.js"),t=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),ie=e("./frontend/src/lib/utils.tsx"),u=e("./frontend/src/models/groupsModel.ts"),Y=e("./frontend/src/scenes/groups/groupsListLogic.ts");function Q(){var B=Object(c.useActions)(Y.a),m=B.setTab,U=Object(c.useValues)(Y.a),T=U.currentTab,Z=Object(c.useValues)(u.a),R=Z.groupTypes,r=Z.aggregationLabel,l=Object(c.useValues)(t.b),o=l.groupsAccessStatus,i=[t.a.HasAccess,t.a.HasGroupTypes,t.a.NoAccess].includes(o);return d.a.createElement(G.a,{activeKey:T,onChange:function(N){return m(N)}},d.a.createElement(G.a.TabPane,{tab:"Persons",key:"-1"}),i?d.a.createElement(G.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):R.map(function(y){return d.a.createElement(G.a.TabPane,{tab:Object(ie.j)(r(y.group_type_index).plural),key:y.group_type_index})}))}function P(B){var m=B.hideGroupTabs,U=Object(c.useValues)(u.a),T=U.showGroupsOptions;return d.a.createElement(d.a.Fragment,null,d.a.createElement(s.a,{title:"Persons".concat(T?" & Groups":""),caption:"A catalog of your product's end users".concat(T?" and groups":"",".")}),!m&&T&&d.a.createElement(Q,null))}try{P.displayName="PersonPageHeader",P.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:P.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(B){}},"./frontend/src/scenes/persons/Persons.scss":function(j,n,e){"use strict";var c=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(c),E=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),d=e.n(E),I={};I.insert="head",I.singleton=!1;var ce=s()(d.a,I),ne=d.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(j,n,e){"use strict";e.r(n),e.d(n,"scene",function(){return ge}),e.d(n,"Persons",function(){return k}),e.d(n,"PersonsScene",function(){return ae});var c=e("./node_modules/react/index.js"),s=e.n(c),E=e("./node_modules/kea/lib/index.esm.js"),d=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),I=e.n(d),ce=e("./node_modules/core-js/modules/es.array.concat.js"),ne=e("./node_modules/core-js/modules/es.object.keys.js"),G=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),t=e("./frontend/src/lib/components/PropertiesTable.tsx"),ie=e("./frontend/src/scenes/persons/Persons.scss"),u=e("./frontend/src/lib/components/CopyToClipboard.tsx"),Y=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Q=e("./frontend/src/lib/components/LemonTable/index.ts");function P(a){var x=a.people,$=a.loading,q=$===void 0?!1:$,S=a.hasPrevious,K=a.hasNext,g=a.loadPrevious,b=a.loadNext,W=a.compact,ee=[{title:"Person",key:"person",render:function(p,f){return s.a.createElement(Y.a,{withIcon:!0,person:f})}},{title:"ID",key:"id",render:function(p,f){return s.a.createElement("div",{style:{overflow:"hidden"}},f.distinct_ids.length&&s.a.createElement(u.a,{explicitValue:f.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},f.distinct_ids[0]))}}].concat(I()(W?[]:[{title:"First seen",dataIndex:"created_at",render:function(p){return p?s.a.createElement(G.b,{time:p}):s.a.createElement(s.a.Fragment,null)}}]));return s.a.createElement(Q.a,{columns:ee,loading:q,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:K?function(){b==null||b(),window.scrollTo(0,0)}:void 0,onBackward:S?function(){g==null||g(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(p){var f=p.properties;return Object.keys(f).length?s.a.createElement(t.a,{properties:f}):"This person has no properties."}},dataSource:x,emptyState:"No persons",nouns:["person","persons"]})}try{P.displayName="PersonsTable",P.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:P.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(a){}var B=e("./node_modules/antd/es/popconfirm/index.js"),m=e("./frontend/src/scenes/persons/personsLogic.ts"),U=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),T=e.n(U),Z=e("./node_modules/core-js/modules/es.regexp.exec.js"),R=e("./node_modules/core-js/modules/es.string.search.js"),r=e("./node_modules/antd/es/input/index.js"),l=e("./frontend/src/lib/components/LemonRow/index.ts"),o=e("./frontend/src/lib/components/icons.tsx"),i=function(x){var $=x.autoFocus,q=$===void 0?!0:$,S=Object(E.useActions)(m.a),K=S.loadPersons,g=S.setListFilters,b=Object(E.useValues)(m.a),W=b.listFilters,ee=Object(c.useState)(""),H=T()(ee,2),p=H[0],f=H[1];return Object(c.useEffect)(function(){f(W.search||"")},[]),s.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"min(100%, 24rem)"}},s.a.createElement(r.a.Search,{"data-attr":"persons-search",placeholder:"Search for persons",autoFocus:q,value:p,onChange:function(J){f(J.target.value),J.target.value||(g({search:void 0}),K())},enterButton:!0,onPressEnter:function(J){J.preventDefault(),g({search:p||void 0}),K()},allowClear:!0,onSearch:function(){g({search:p||void 0}),K()},style:{width:"100%"}}),s.a.createElement(l.a,{className:"ml-05",type:"stealth",tooltip:s.a.createElement(s.a.Fragment,null,"Search by email, name, ID, or even contents of properties. You can also search for persons who just ",s.a.createElement("i",null,"have"),' a property like so: "has:your_property".'),icon:s.a.createElement(o.IconInfo,null)}))};try{i.displayName="PersonsSearch",i.__docgenInfo={description:"",displayName:"PersonsSearch",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"]={docgenInfo:i.__docgenInfo,name:"PersonsSearch",path:"frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"})}catch(a){}var y=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),N=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),V=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),z=e("./frontend/src/lib/components/LemonButton/index.ts"),de=e("./frontend/src/lib/logic/featureFlagLogic.ts"),O=e("./frontend/src/lib/constants.tsx"),he=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),ge={component:ae,logic:m.a,paramsToProps:function(){return{syncWithUrl:!0}}};function k(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=a.cohort;return s.a.createElement(E.BindLogic,{logic:m.a,props:{cohort:x,syncWithUrl:!x}},s.a.createElement(ae,null))}function ae(){var a=Object(E.useActions)(m.a),x=a.loadPersons,$=a.setListFilters,q=a.exportCsv,S=Object(E.useValues)(m.a),K=S.cohortId,g=S.persons,b=S.listFilters,W=S.personsLoading,ee=S.exportUrl,H=S.exporterProps,p=S.apiDocsURL,f=Object(E.useValues)(de.a),te=f.featureFlags,J=!!te[O.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS];return s.a.createElement("div",{className:"persons-list"},!K&&s.a.createElement(y.a,null),s.a.createElement("div",{className:"space-y-05"},s.a.createElement("div",{className:"space-between-items",style:{gap:"0.75rem"}},s.a.createElement(i,{autoFocus:!K}),ee&&s.a.createElement(B.a,{placement:"topRight",title:s.a.createElement(s.a.Fragment,null,"Exporting by csv is limited to 10,000 users.",s.a.createElement("br",null),"To return more, please use ",s.a.createElement("a",{href:p},"the API"),". Do you want to export by CSV?"),onConfirm:function(){return J?Object(he.a)(H[0]):q()}},s.a.createElement(z.a,{type:"secondary",icon:s.a.createElement(o.IconExport,{style:{color:"var(--primary)"}})},b.properties&&b.properties.length>0?s.a.createElement("div",{style:{display:"block"}},"Export (",s.a.createElement("strong",null,b.properties.length)," filter)"):"Export"))),s.a.createElement(N.a,{pageKey:"persons-list-page",propertyFilters:b.properties,onChange:function(ve){$({properties:ve}),x()},endpoint:"person",taxonomicGroupTypes:[V.a.PersonProperties,V.a.Cohorts],showConditionBadge:!0}),s.a.createElement(P,{people:g.results,loading:W,hasPrevious:!!g.previous,hasNext:!!g.next,loadPrevious:function(){return x(g.previous)},loadNext:function(){return x(g.next)}})))}try{k.displayName="Persons",k.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:k.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(a){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohort.scss":function(j,n,e){var c=e("./node_modules/css-loader/dist/runtime/api.js");n=c(!1),n.push([j.i,".Cohort__Name.ant-form-item-has-error .ant-form-item-explain-error{font-weight:500;margin:.25rem 0}.Cohort__Name.ant-form-item-has-error .LemonInput{border:1px solid var(--danger)}",""]),j.exports=n},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss":function(j,n,e){var c=e("./node_modules/css-loader/dist/runtime/api.js");n=c(!1),n.push([j.i,".CohortCriteriaGroups__matching-group{padding-top:1rem;border:1px solid var(--border);border-radius:4px;width:100%;margin:.5rem 0}.CohortCriteriaGroups__matching-group.CohortCriteriaGroups__matching-group--error{border:1px solid var(--danger)}.CohortCriteriaGroups__matching-group .CohortCriteriaGroups__matching-group__error-row{padding:0 1rem 1rem}.CohortCriteriaGroups__matching-group__logical-divider{color:var(--primary-alt);font-weight:600;font-size:12px;text-transform:uppercase;padding:0 1.5rem}",""]),j.exports=n},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(j,n,e){var c=e("./node_modules/css-loader/dist/runtime/api.js");n=c(!1),n.push([j.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),j.exports=n}}]);
