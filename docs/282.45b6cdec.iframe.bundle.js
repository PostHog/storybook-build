(window.webpackJsonp=window.webpackJsonp||[]).push([[282],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(_e,j,e){"use strict";e.r(j),e.d(j,"scene",function(){return ne}),e.d(j,"ActionsTable",function(){return ue});var x=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),S=e.n(x),T=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),t=e.n(T),C=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(C),F=e("./node_modules/core-js/modules/es.regexp.exec.js"),f=e.n(F),h=e("./node_modules/core-js/modules/es.string.search.js"),M=e.n(h),z=e("./node_modules/core-js/modules/es.array.concat.js"),y=e.n(z),P=e("./node_modules/core-js/modules/es.function.name.js"),G=e.n(P),R=e("./node_modules/core-js/modules/es.array.slice.js"),B=e.n(R),A=e("./node_modules/core-js/modules/es.number.constructor.js"),ee=e.n(A),I=e("./node_modules/core-js/modules/es.array.filter.js"),$=e.n(I),v=e("./node_modules/core-js/modules/es.object.to-string.js"),u=e.n(v),l=e("./node_modules/react/index.js"),n=e.n(l),D=e("./frontend/src/scenes/actions/Actions.scss"),c=e("./frontend/src/lib/components/Link.tsx"),g=e("./node_modules/antd/es/radio/index.js"),H=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),V=e("./frontend/src/lib/utils.tsx"),_=e("./node_modules/kea/lib/index.esm.js"),K=e("./frontend/src/models/actionsModel.ts"),L=e("./frontend/src/scenes/actions/NewActionButton.tsx"),m=e("./frontend/src/types.ts"),J=e("./node_modules/fuse.js/dist/fuse.esm.js"),Q=e("./frontend/src/scenes/userLogic.ts"),X=e("./frontend/src/scenes/teamLogic.tsx"),Z=e("./frontend/src/lib/api.ts"),p=e("./frontend/src/scenes/urls.ts"),E=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),Y=e("./frontend/src/lib/components/LemonTable/index.ts"),i=e("./frontend/src/lib/components/LemonButton/index.ts"),ce=e("./frontend/src/lib/components/LemonDivider/index.ts"),k=e("./frontend/src/lib/components/LemonButton/More.tsx"),s=e("./node_modules/kea-router/lib/index.js"),o=e.n(s),a=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),r=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),b=e("./frontend/src/lib/components/PageHeader.tsx"),W=e("./frontend/@posthog/lemon-ui/src/index.ts"),te=function(ae,re){return new J.a(ae,{keys:["name","url"],threshold:.3}).search(re).map(function(ie){return ie.item})},ne={component:ue};function ue(){var me=Object(_.useValues)(X.a),ae=me.currentTeam,re=Object(_.useValues)(Object(K.a)({params:"include_count=1"})),ie=re.actions,fe=re.actionsLoading,Me=Object(_.useActions)(K.a),ve=Me.loadActions,je=Object(l.useState)(""),Ee=t()(je,2),le=Ee[0],ge=Ee[1],Te=Object(l.useState)(!1),Oe=t()(Te,2),Pe=Oe[0],Ae=Oe[1],De=Object(_.useValues)(Q.a),de=De.user,Ie=De.hasAvailableFeature,Le=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(d,O){return(d.name||"").localeCompare(O.name||"")},render:function(d,O,w){return n.a.createElement(c.a,{"data-attr":"action-link-"+w,to:p.a.action(O.id),className:"row-name"},d||n.a.createElement("i",null,"Unnamed action"))}}].concat(S()(Ie(m.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(d){return n.a.createElement(a.a,{tags:d,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(d,O){var w;return n.a.createElement("span",null,(w=O.steps)!==null&&w!==void 0&&w.length?O.steps.map(function(oe){return n.a.createElement("div",{key:oe.id},function(){var q=Object(V.Cb)(oe.url||"");switch(q=q.slice(0,40)+(q.length>40?"...":""),oe.event){case"$autocapture":return"Autocapture";case"$pageview":switch(oe.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,q));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,q));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,q))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,oe.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(E.b)(),Object(E.a)()],S()(ae!=null&&ae.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(d,O){return Number(d.post_to_slack)-Number(O.post_to_slack)},render:function(d){return d?n.a.createElement(H.a,null):null}}]:[]),[{width:0,render:function(d,O){return n.a.createElement(k.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{status:"stealth",to:p.a.action(O.id),fullWidth:!0},"Edit"),n.a.createElement(i.a,{status:"stealth",to:Object(s.combineUrl)(p.a.insightNew({insight:m.B.TRENDS,interval:"day",display:m.j.ActionsLineGraph,actions:[{id:O.id,name:O.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(ce.a,null),n.a.createElement(i.a,{status:"danger",onClick:function(){return Object(V.x)({endpoint:Z.b.actions.determineDeleteEndpoint(),object:O,callback:ve})},fullWidth:!0},"Delete action"))})}}]),se=ie;return le&&le!==""&&(se=te(se,le)),Pe&&(se=se.filter(function(U){var d;return((d=U.created_by)===null||d===void 0?void 0:d.uuid)===(de==null?void 0:de.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(b.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),n.a.createElement(r.a,{tab:r.b.Actions}),n.a.createElement(W.LemonInput,{type:"search",placeholder:"Search for actions",onChange:ge,value:le}),n.a.createElement(g.a.Group,{buttonStyle:"solid",value:Pe,onChange:function(d){return Ae(d.target.value)}},n.a.createElement(g.a.Button,{value:!1},"All actions"),n.a.createElement(g.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb-4 float-right"},n.a.createElement(L.a,null)),n.a.createElement(Y.a,{columns:Le,loading:fe,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:se,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/actions/NewActionButton.tsx":function(_e,j,e){"use strict";e.d(j,"a",function(){return R});var x=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),S=e.n(x),T=e("./node_modules/react/index.js"),t=e.n(T),C=e("./node_modules/kea-router/lib/index.js"),N=e.n(C),F=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx"),h=e("./frontend/src/lib/components/icons.tsx"),M=e("./frontend/src/lib/components/LemonButton/index.ts"),z=e("./node_modules/kea/lib/index.esm.js"),y=e("./frontend/src/lib/logic/featureFlagLogic.ts"),P=e("./frontend/src/lib/constants.tsx"),G=e("./frontend/@posthog/lemon-ui/src/index.ts");function R(){var B=Object(T.useState)(!1),A=S()(B,2),ee=A[0],I=A[1],$=Object(T.useState)(!1),v=S()($,2),u=v[0],l=v[1],n=Object(z.useValues)(y.a),D=n.featureFlags;return t.a.createElement(t.a.Fragment,null,t.a.createElement(M.a,{type:"primary",onClick:function(){return I(!0)},"data-attr":"create-action"},"New ",D[P.h.SIMPLIFY_ACTIONS]?"calculated event":"action"),t.a.createElement(G.LemonModal,{isOpen:ee,onClose:function(){I(!1),l(!1)},title:"Create new ".concat(D[P.h.SIMPLIFY_ACTIONS]?"calculated event":"action"),footer:t.a.createElement(t.a.Fragment,null,u&&t.a.createElement(M.a,{key:"back-button",type:"secondary",onClick:function(){return l(!1)}},"Back"),t.a.createElement(M.a,{key:"cancel-button",type:"secondary",onClick:function(){I(!1),l(!1)}},"Cancel"))},u?t.a.createElement("div",{style:{maxWidth:"40rem"}},t.a.createElement(f.a,null)):t.a.createElement("div",{className:"space-y-2"},t.a.createElement(M.a,{type:"secondary",icon:t.a.createElement(h.IconMagnifier,null),onClick:function(){return l(!0)},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect"},"Inspect element on your site"),t.a.createElement(M.a,{type:"secondary",icon:t.a.createElement(h.IconEdit,null),onClick:function(){C.router.actions.push(F.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview"},"From event or pageview"))))}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(_e,j,e){"use strict";e.d(j,"b",function(){return i}),e.d(j,"a",function(){return k});var x=e("./node_modules/core-js/modules/es.object.keys.js"),S=e.n(x),T=e("./node_modules/core-js/modules/es.symbol.js"),t=e.n(T),C=e("./node_modules/core-js/modules/es.array.filter.js"),N=e.n(C),F=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),f=e.n(F),h=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),M=e.n(h),z=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),y=e.n(z),P=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),G=e.n(P),R=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),B=e.n(R),A=e("./node_modules/core-js/modules/es.array.iterator.js"),ee=e.n(A),I=e("./node_modules/core-js/modules/es.object.to-string.js"),$=e.n(I),v=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),u=e.n(v),l=e("./node_modules/core-js/modules/es.object.from-entries.js"),n=e.n(l),D=e("./node_modules/core-js/modules/es.array.map.js"),c=e.n(D),g=e("./node_modules/core-js/modules/es.object.entries.js"),H=e.n(g),V=e("./node_modules/react/index.js"),_=e.n(V),K=e("./node_modules/kea/lib/index.esm.js"),L=e("./node_modules/antd/es/tabs/index.js"),m=e("./frontend/src/scenes/urls.ts"),J=e("./frontend/src/lib/components/Tooltip.tsx"),Q=e("./frontend/src/lib/components/icons.tsx"),X=e("./frontend/src/lib/components/TitleWithIcon.tsx"),Z=e("./frontend/src/lib/logic/featureFlagLogic.ts"),p=e("./frontend/src/lib/constants.tsx");function E(s,o){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);o&&(r=r.filter(function(b){return Object.getOwnPropertyDescriptor(s,b).enumerable})),a.push.apply(a,r)}return a}function Y(s){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?E(Object(a),!0).forEach(function(r){B()(s,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(a,r))})}return s}var i;(function(s){s.Actions="actions",s.EventDefinitions="events",s.EventPropertyDefinitions="properties"})(i||(i={}));var ce=Object(K.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(o){return{tab:o}}},reducers:{tab:[i.EventDefinitions,{setTab:function(o,a){var r=a.tab;return r}}]},selectors:function(){return{tabUrls:[function(){return[Z.a.selectors.featureFlags]},function(o){var a;return Y((a={},B()(a,i.EventPropertyDefinitions,m.a.eventPropertyDefinitions()),B()(a,i.EventDefinitions,m.a.eventDefinitions()),a),o[p.h.SIMPLIFY_ACTIONS]?{}:B()({},i.Actions,m.a.actions()))}]}},actionToUrl:function(o){var a=o.values;return{setTab:function(b){var W=b.tab;return a.tabUrls[W]||m.a.events()}}},urlToAction:function(o){var a=o.actions,r=o.values;return Object.fromEntries(Object.entries(r.tabUrls).map(function(b){var W=G()(b,2),te=W[0],ne=W[1];return[ne,function(){r.tab!==te&&a.setTab(te)}]}))}});function k(s){var o=s.tab,a=Object(K.useActions)(ce),r=a.setTab,b=Object(K.useValues)(Z.a),W=b.featureFlags;return _.a.createElement(L.a,{tabPosition:"top",animated:!1,activeKey:o,onTabClick:function(ne){return r(ne)}},_.a.createElement(L.a.TabPane,{tab:_.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:i.EventDefinitions}),!W[p.h.SIMPLIFY_ACTIONS]&&_.a.createElement(L.a.TabPane,{tab:_.a.createElement(X.a,{icon:_.a.createElement(J.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},_.a.createElement(Q.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:i.Actions}),_.a.createElement(L.a.TabPane,{tab:_.a.createElement(X.a,{icon:_.a.createElement(J.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},_.a.createElement(Q.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:i.EventPropertyDefinitions}))}try{k.displayName="DataManagementPageTabs",k.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:k.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(s){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx":function(_e,j,e){"use strict";e.d(j,"a",function(){return v});var x=e("./node_modules/core-js/modules/es.array.map.js"),S=e.n(x),T=e("./node_modules/react/index.js"),t=e.n(T),C=e("./node_modules/clsx/dist/clsx.m.js"),N=e("./node_modules/kea/lib/index.esm.js"),F=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),f=e("./frontend/src/lib/components/LemonButton/index.ts"),h=e("./node_modules/antd/es/popconfirm/index.js"),M=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),z=e("./frontend/src/lib/utils.tsx"),y=e("./frontend/src/lib/components/LemonRow/index.ts"),P=e("./frontend/src/lib/components/icons.tsx"),G=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),R=e("./node_modules/kea-forms/lib/index.js"),B=e.n(R),A=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),ee=e("./frontend/src/lib/forms/Field.tsx");function I(u){var l=u.numberOfResults,n=u.isSearching,D=u.isAddingEntry;return l>0?null:n?t.a.createElement(y.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs that match your search."):D?null:t.a.createElement(y.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs or domains. Add one to get started.")}function $(u){var l=u.actionId,n=Object(M.b)({actionId:l}),D=Object(N.useValues)(n),c=D.isProposedUrlSubmitting,g=Object(N.useActions)(n),H=g.cancelProposingUrl;return t.a.createElement(R.Form,{logic:M.b,props:{actionId:l},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2"},t.a.createElement(ee.a,{name:"url"},t.a.createElement(A.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),t.a.createElement("div",{className:"flex justify-end gap-2"},t.a.createElement(f.a,{type:"secondary",onClick:H},"Cancel"),t.a.createElement(f.a,{htmlType:"submit",type:"primary",disabled:c,"data-attr":"url-save"},"Save")))}function v(u){var l=u.pageKey,n=u.actionId,D=Object(M.b)({actionId:n}),c=Object(N.useValues)(D),g=c.appUrlsKeyed,H=c.suggestionsLoading,V=c.searchTerm,_=c.launchUrl,K=c.editUrlIndex,L=c.isAddUrlFormVisible,m=Object(N.useActions)(D),J=m.addUrl,Q=m.removeUrl,X=m.setSearchTerm,Z=m.newUrl,p=m.setEditUrlIndex;return t.a.createElement("div",null,t.a.createElement("div",{className:"flex items-center mb-4 gap-2 justify-between"},t.a.createElement(A.a,{type:"search",autoFocus:l==="toolbar-launch"&&!Object(z.bb)(),placeholder:"Search for authorized URLs",onChange:X,value:V}),t.a.createElement(f.a,{onClick:Z,type:"secondary",icon:t.a.createElement(P.IconPlus,null),"data-attr":"toolbar-add-url"},"Add",l==="toolbar-launch"&&" authorized URL")),H?t.a.createElement(y.a,{outlined:!0,fullWidth:!0,size:"large",key:-1},t.a.createElement(G.a,{className:"text-xl"})):t.a.createElement("div",{className:"space-y-2"},L&&t.a.createElement(y.a,{outlined:!0,fullWidth:!0,size:"large"},t.a.createElement($,{actionId:n})),t.a.createElement(I,{numberOfResults:g.length,isSearching:V.length>0,isAddingEntry:L}),g.map(function(E,Y){return t.a.createElement("div",{key:Y,className:Object(C.a)("border rounded flex items-center py-2 px-4 min-h-14")},K===Y?t.a.createElement($,{actionId:n}):t.a.createElement(t.a.Fragment,null,E.type==="suggestion"&&t.a.createElement(F.a,{type:"highlight",className:"mr-4"},"Suggestion"),t.a.createElement("span",{title:E.url,className:"flex-1 truncate"},E.url),t.a.createElement("div",{className:"Actions flex space-x-2 shrink-0"},E.type==="suggestion"?t.a.createElement(f.a,{onClick:function(){return J(E.url)},icon:t.a.createElement(P.IconPlus,null),"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):t.a.createElement(t.a.Fragment,null,t.a.createElement(f.a,{icon:t.a.createElement(P.IconOpenInApp,null),href:_(E.url),tooltip:"Launch toolbar",center:!0,className:"ActionButton","data-attr":"toolbar-open"},"Launch"),t.a.createElement(f.a,{icon:t.a.createElement(P.IconEdit,null),onClick:function(){return p(E.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),t.a.createElement(h.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Are you sure you want to remove this authorized url?"),onConfirm:function(){return Q(Y)}},t.a.createElement(f.a,{icon:t.a.createElement(P.IconDelete,null),tooltip:"Remove URL",center:!0,className:"ActionButton"}))))))})))}try{v.displayName="AuthorizedUrls",v.__docgenInfo={description:"",displayName:"AuthorizedUrls",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"]={docgenInfo:v.__docgenInfo,name:"AuthorizedUrls",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"})}catch(u){}}}]);
