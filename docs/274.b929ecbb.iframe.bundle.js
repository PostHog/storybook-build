(window.webpackJsonp=window.webpackJsonp||[]).push([[274],{"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"FeatureFlag",(function(){return FeatureFlag_FeatureFlag}));var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),row=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),col=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),card=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/card/index.js"),skeleton=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/skeleton/index.js"),tabs=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),popconfirm=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/popconfirm/index.js"),es_radio=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/radio/index.js"),es_select=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),input_number=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),PropertyFilters=__webpack_require__("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),LockOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LockOutlined.js"),types=__webpack_require__("./frontend/src/types.ts"),api=__webpack_require__("./frontend/src/lib/api.ts"),kea_router_lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),featureFlagsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),TaxonomicFilter_types=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),lemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/lemonToast.tsx"),eventUsageLogic=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),kea_loaders_lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),cleanFilters=__webpack_require__("./frontend/src/scenes/insights/utils/cleanFilters.ts"),dayjs=__webpack_require__("./frontend/src/lib/dayjs.ts"),sharedUtils=__webpack_require__("./frontend/src/scenes/insights/sharedUtils.ts"),rolesLogic=__webpack_require__("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx");const featureFlagPermissionsLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","feature-flags","featureFlagPermissionsLogic"]),Object(index_esm.props)({}),Object(index_esm.key)((props=>`${props.flagId}`)),Object(index_esm.connect)({values:[rolesLogic.a,["roles"]]}),Object(index_esm.actions)({setModalOpen:visible=>({visible:visible}),setRolesToAdd:roleIds=>({roleIds:roleIds})}),Object(index_esm.reducers)({permissionModalVisible:[!1,{setModalOpen:(_,_ref)=>{let{visible:visible}=_ref;return visible}}],rolesToAdd:[[],{setRolesToAdd:(_,_ref2)=>{let{roleIds:roleIds}=_ref2;return roleIds}}]}),Object(kea_loaders_lib.loaders)((_ref3=>{let{props:props,values:values,actions:actions}=_ref3;return{unfilteredAddableRoles:[[],{loadPossibleRolesToAdd:async()=>(await api.b.roles.list({feature_flags_access_level:types.a.READ})).results||[]}],associatedRoles:[[],{loadAssociatedRoles:async()=>{if(props.flagId){return(await api.b.resourceAccessPermissions.featureFlags.list(props.flagId)).results||[]}return[]},addAssociatedRoles:async flagId=>{const{rolesToAdd:rolesToAdd}=values,possibleFlagId=props.flagId||flagId;if(possibleFlagId){const newAssociatedRoles=await Promise.all(rolesToAdd.map((async roleId=>await api.b.resourceAccessPermissions.featureFlags.create(possibleFlagId,roleId))));return actions.setRolesToAdd([]),[...values.associatedRoles,...newAssociatedRoles]}const newFlagAssociatedRoles=[];for(const roleId of rolesToAdd){const existingRole=values.roles.find((r=>roleId===r.id));null!=existingRole&&existingRole.id&&newFlagAssociatedRoles.push(existingRole)}return eventUsageLogic.e.actions.reportRoleCustomAddedToAResource(types.T.FEATURE_FLAGS,rolesToAdd.length),newFlagAssociatedRoles.map((newRole=>({id:newRole.id,role:newRole,feature_flag:null,updated_at:"",added_at:""})))},deleteAssociatedRole:async _ref4=>{var _values$associatedRol;let{roleId:roleId}=_ref4;const associatedRoleId=null===(_values$associatedRol=values.associatedRoles.find((associatedRole=>associatedRole.role.id===roleId)))||void 0===_values$associatedRol?void 0:_values$associatedRol.id,filteredRoles=values.associatedRoles.filter((associatedRole=>associatedRole.id!==associatedRoleId));return props.flagId?associatedRoleId&&await api.b.resourceAccessPermissions.featureFlags.delete(props.flagId,associatedRoleId):actions.setRolesToAdd(filteredRoles.map((filteredRole=>filteredRole.id))),filteredRoles}}]}})),Object(index_esm.selectors)({derivedRoles:[s=>[s.associatedRoles],associatedRoles=>associatedRoles.map((associatedRole=>associatedRole.role))],addableRoles:[s=>[s.unfilteredAddableRoles,s.associatedRoles],(unfilteredAddableRoles,associatedRoles)=>{const addableRoles=[];for(const role of unfilteredAddableRoles)associatedRoles.some((associatedRole=>associatedRole.role.id===role.id))||addableRoles.push(role);return addableRoles}]}),Object(index_esm.afterMount)((_ref5=>{let{actions:actions}=_ref5;actions.loadPossibleRolesToAdd(),actions.loadAssociatedRoles()}))]);var userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts");const NEW_FLAG={id:null,created_at:null,key:"",name:"",filters:{groups:[{properties:[],rollout_percentage:0,variant:null}],multivariate:null,payloads:{}},deleted:!1,active:!0,created_by:null,is_simple_flag:!1,rollout_percentage:null,ensure_experience_continuity:!1,experiment_set:null,rollback_conditions:[],performed_rollback:!1,can_edit:!0,tags:[]},NEW_VARIANT={key:"",name:"",rollout_percentage:0},EMPTY_MULTIVARIATE_OPTIONS={variants:[{key:"",name:"",rollout_percentage:100}]},defaultEntityFilterOnFlag=flagKey=>({events:[{id:"$feature_flag_called",name:"$feature_flag_called",type:"events",properties:defaultPropertyOnFlag(flagKey)}]}),defaultPropertyOnFlag=flagKey=>[{key:"$feature/"+flagKey,type:types.N.Event,value:["false"],operator:types.P.IsNot},{key:"$feature/"+flagKey,type:types.N.Event,value:"is_set",operator:types.P.IsSet},{key:"$feature_flag",type:types.N.Event,value:flagKey,operator:types.P.Exact}],variantKeyToIndexFeatureFlagPayloads=flag=>{var _flag$filters$multiva;if(!flag.filters.multivariate)return flag;const newPayloads={};return null===(_flag$filters$multiva=flag.filters.multivariate)||void 0===_flag$filters$multiva||_flag$filters$multiva.variants.forEach(((variant,index)=>{var _flag$filters$payload;newPayloads[index]=null===(_flag$filters$payload=flag.filters.payloads)||void 0===_flag$filters$payload?void 0:_flag$filters$payload[variant.key]})),{...flag,filters:{...flag.filters,payloads:newPayloads}}},featureFlagLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","feature-flags","featureFlagLogic"]),Object(index_esm.props)({}),Object(index_esm.key)((_ref2=>{let{id:id}=_ref2;return null!=id?id:"unknown"})),Object(index_esm.connect)({values:[teamLogic.a,["currentTeamId"],groupsModel.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"],userLogic.a,["hasAvailableFeature"]]}),Object(index_esm.actions)({setFeatureFlag:featureFlag=>({featureFlag:featureFlag}),setFeatureFlagMissing:!0,addConditionSet:!0,addRollbackCondition:!0,setAggregationGroupTypeIndex:value=>({value:value}),removeConditionSet:index=>({index:index}),removeRollbackCondition:index=>({index:index}),duplicateConditionSet:index=>({index:index}),updateConditionSet:(index,newRolloutPercentage,newProperties,newVariant)=>({index:index,newRolloutPercentage:newRolloutPercentage,newProperties:newProperties,newVariant:newVariant}),deleteFeatureFlag:featureFlag=>({featureFlag:featureFlag}),setMultivariateEnabled:enabled=>({enabled:enabled}),setMultivariateOptions:multivariateOptions=>({multivariateOptions:multivariateOptions}),addVariant:!0,duplicateVariant:index=>({index:index}),removeVariant:index=>({index:index}),editFeatureFlag:editing=>({editing:editing}),distributeVariantsEqually:!0,setFilters:filters=>({filters:filters}),loadInsightAtIndex:(index,filters)=>({index:index,filters:filters}),setInsightResultAtIndex:(index,average)=>({index:index,average:average}),loadAllInsightsForFlag:!0,setAffectedUsers:(index,count)=>({index:index,count:count}),setTotalUsers:count=>({count:count}),triggerFeatureFlagUpdate:payload=>({payload:payload}),generateUsageDashboard:!0}),Object(lib.forms)((_ref3=>{let{actions:actions,values:values}=_ref3;return{featureFlag:{defaults:{...NEW_FLAG},errors:_ref4=>{var _key$match,_filters$multivariate,_filters$multivariate2;let{key:key,filters:filters}=_ref4;return{key:key?null!==(_key$match=key.match)&&void 0!==_key$match&&_key$match.call(key,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key",filters:{multivariate:{variants:null==filters||null===(_filters$multivariate=filters.multivariate)||void 0===_filters$multivariate||null===(_filters$multivariate2=_filters$multivariate.variants)||void 0===_filters$multivariate2?void 0:_filters$multivariate2.map((_ref5=>{var _variantKey$match;let{key:variantKey}=_ref5;return{key:variantKey?null!==(_variantKey$match=variantKey.match)&&void 0!==_variantKey$match&&_variantKey$match.call(variantKey,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key"}}))},groups:values.propertySelectErrors}}},submit:featureFlag=>{actions.saveFeatureFlag(featureFlag)}}}})),Object(index_esm.reducers)({featureFlag:[{...NEW_FLAG},{setFeatureFlag:(_,_ref6)=>{let{featureFlag:featureFlag}=_ref6;if(featureFlag.filters.groups){const groups=featureFlag.filters.groups.map((group=>group.properties?{...group,properties:Object(utils.r)(group.properties)}:group));return{...featureFlag,filters:{...null==featureFlag?void 0:featureFlag.filters,groups:groups}}}return featureFlag},addConditionSet:state=>{if(!state)return state;const groups=[...null==state?void 0:state.filters.groups,{properties:[],rollout_percentage:0,variant:null}];return{...state,filters:{...state.filters,groups:groups}}},addRollbackCondition:state=>state?{...state,rollback_conditions:[...state.rollback_conditions,{operator:"gt",threshold_type:types.V.Sentry,threshold:50,threshold_metric:{...Object(cleanFilters.a)({insight:types.F.TRENDS,date_from:Object(dayjs.a)().subtract(7,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(dayjs.a)().endOf("d").format("YYYY-MM-DDTHH:mm")})}}]}:state,removeRollbackCondition:(state,_ref7)=>{let{index:index}=_ref7;if(!state)return state;const rollback_conditions=[...state.rollback_conditions];return rollback_conditions.splice(index,1),{...state,rollback_conditions:rollback_conditions}},updateConditionSet:(state,_ref8)=>{let{index:index,newRolloutPercentage:newRolloutPercentage,newProperties:newProperties,newVariant:newVariant}=_ref8;if(!state)return state;const groups=[...null==state?void 0:state.filters.groups];return void 0!==newRolloutPercentage&&(groups[index]={...groups[index],rollout_percentage:newRolloutPercentage}),void 0!==newProperties&&(groups[index]={...groups[index],properties:newProperties}),void 0!==newVariant&&(groups[index]={...groups[index],variant:newVariant}),{...state,filters:{...state.filters,groups:groups}}},removeConditionSet:(state,_ref9)=>{let{index:index}=_ref9;if(!state)return state;const groups=[...state.filters.groups];return groups.splice(index,1),{...state,filters:{...state.filters,groups:groups}}},duplicateConditionSet:(state,_ref10)=>{let{index:index}=_ref10;if(!state)return state;const groups=state.filters.groups.concat([state.filters.groups[index]]);return{...state,filters:{...state.filters,groups:groups}}},setMultivariateOptions:(state,_ref11)=>{let{multivariateOptions:multivariateOptions}=_ref11;return state?{...state,filters:{...state.filters,multivariate:multivariateOptions}}:state},addVariant:state=>{var _state$filters$multiv;if(!state)return state;const variants=[...(null===(_state$filters$multiv=state.filters.multivariate)||void 0===_state$filters$multiv?void 0:_state$filters$multiv.variants)||[]];return{...state,filters:{...state.filters,multivariate:{...state.filters.multivariate||{},variants:[...variants,NEW_VARIANT]}}}},removeVariant:(state,_ref12)=>{var _state$filters$multiv2;let{index:index}=_ref12;if(!state)return state;const variants=[...(null===(_state$filters$multiv2=state.filters.multivariate)||void 0===_state$filters$multiv2?void 0:_state$filters$multiv2.variants)||[]];return variants.splice(index,1),{...state,filters:{...state.filters,multivariate:{...state.filters.multivariate,variants:variants}}}},distributeVariantsEqually:state=>{var _state$filters$multiv3;if(!state)return state;const variants=[...(null===(_state$filters$multiv3=state.filters.multivariate)||void 0===_state$filters$multiv3?void 0:_state$filters$multiv3.variants)||[]],numVariants=variants.length;if(numVariants>0&&numVariants<=100){const percentageRounded=Math.round(100/numVariants),delta=percentageRounded*numVariants-100;variants.forEach(((variant,index)=>{variants[index]={...variant,rollout_percentage:percentageRounded}})),variants[numVariants-1]={...variants[numVariants-1],rollout_percentage:percentageRounded-delta}}return{...state,filters:{...state.filters,multivariate:{...state.filters.multivariate,variants:variants}}}},setAggregationGroupTypeIndex:(state,_ref13)=>{let{value:value}=_ref13;return state&&state.filters.aggregation_group_type_index!=value?{...state,filters:{...state.filters,aggregation_group_type_index:value,groups:[{properties:[],rollout_percentage:0,variant:null}]}}:state}}],featureFlagMissing:[!1,{setFeatureFlagMissing:()=>!0}],isEditingFlag:[!1,{editFeatureFlag:(_,_ref14)=>{let{editing:editing}=_ref14;return editing}}],insightRollingAverages:[{},{setInsightResultAtIndex:(state,_ref15)=>{let{index:index,average:average}=_ref15;return{...state,[`${index}`]:average}}}],affectedUsers:[{},{setAffectedUsers:(state,_ref16)=>{let{index:index,count:count}=_ref16;return{...state,[index]:count}},resetFeatureFlag:()=>({0:-1}),loadFeatureFlag:()=>({0:-1})}],totalUsers:[null,{setTotalUsers:(_,_ref17)=>{let{count:count}=_ref17;return count}}]}),Object(kea_loaders_lib.loaders)((_ref18=>{let{values:values,props:props,actions:actions}=_ref18;return{featureFlag:{loadFeatureFlag:async()=>{if(props.id&&"new"!==props.id)try{const retrievedFlag=await api.b.get(`api/projects/${values.currentTeamId}/feature_flags/${props.id}`);return variantKeyToIndexFeatureFlagPayloads(retrievedFlag)}catch(e){throw actions.setFeatureFlagMissing(),e}return NEW_FLAG},saveFeatureFlag:async updatedFlag=>{const{created_at:created_at,id:id,...flag}=updatedFlag,preparedFlag=(flag=>{var _flag$filters;if(null!==(_flag$filters=flag.filters)&&void 0!==_flag$filters&&_flag$filters.multivariate){var _flag$filters2,_flag$filters2$multiv;const newPayloads={};return null===(_flag$filters2=flag.filters)||void 0===_flag$filters2||null===(_flag$filters2$multiv=_flag$filters2.multivariate)||void 0===_flag$filters2$multiv||_flag$filters2$multiv.variants.forEach(((_ref,index)=>{var _flag$filters3,_flag$filters3$payloa;let{key:key}=_ref;const payload=null===(_flag$filters3=flag.filters)||void 0===_flag$filters3||null===(_flag$filters3$payloa=_flag$filters3.payloads)||void 0===_flag$filters3$payloa?void 0:_flag$filters3$payloa[index];payload&&(newPayloads[key]=payload)})),{...flag,filters:{...flag.filters,payloads:newPayloads}}}if(flag.filters&&!flag.filters.multivariate){var _flag$filters$payload2;let cleanedPayloadValue={};return null!==(_flag$filters$payload2=flag.filters.payloads)&&void 0!==_flag$filters$payload2&&_flag$filters$payload2.true&&(cleanedPayloadValue={true:flag.filters.payloads.true}),{...flag,filters:{...flag.filters,payloads:cleanedPayloadValue}}}return flag})(flag);try{let savedFlag;var _featureFlagPermissio;if(updatedFlag.id)savedFlag=await api.b.update(`api/projects/${values.currentTeamId}/feature_flags/${updatedFlag.id}`,preparedFlag);else if(savedFlag=await api.b.create(`api/projects/${values.currentTeamId}/feature_flags`,preparedFlag),values.roleBasedAccessEnabled&&savedFlag.id)null===(_featureFlagPermissio=featureFlagPermissionsLogic({flagId:null}))||void 0===_featureFlagPermissio||_featureFlagPermissio.actions.addAssociatedRoles(savedFlag.id);return variantKeyToIndexFeatureFlagPayloads(savedFlag)}catch(error){throw"behavioral_cohort_found"!==error.code&&"cohort_does_not_exist"!==error.code||eventUsageLogic.e.actions.reportFailedToCreateFeatureFlagWithCohort(error.code,error.detail),error}}},recentInsights:[[],{loadRecentInsights:async()=>{if(props.id&&"new"!==props.id&&values.featureFlag.key){return(await api.b.get(`api/projects/${values.currentTeamId}/insights/?feature_flag=${values.featureFlag.key}&order=-created_at`)).results}return[]}}],sentryStats:[{},{loadSentryStats:async()=>await api.b.get("api/sentry_stats/")}]}})),Object(index_esm.listeners)((_ref19=>{let{actions:actions,values:values,props:props}=_ref19;return{generateUsageDashboard:async()=>{props.id&&(await api.b.create(`api/projects/${values.currentTeamId}/feature_flags/${props.id}/dashboard`),actions.loadFeatureFlag())},saveFeatureFlagSuccess:_ref20=>{var _featureFlagsLogic$fi;let{featureFlag:featureFlag}=_ref20;lemonToast.d.success("Feature flag saved"),null===(_featureFlagsLogic$fi=featureFlagsLogic.b.findMounted())||void 0===_featureFlagsLogic$fi||_featureFlagsLogic$fi.actions.updateFlag(featureFlag),featureFlag.id&&kea_router_lib.router.actions.replace(urls.a.featureFlag(featureFlag.id)),actions.editFeatureFlag(!1)},deleteFeatureFlag:async _ref21=>{let{featureFlag:featureFlag}=_ref21;Object(utils.x)({endpoint:`projects/${values.currentTeamId}/feature_flags`,object:{name:featureFlag.name,id:featureFlag.id},callback:()=>{var _featureFlagsLogic$fi2,_featureFlagsLogic$fi3;featureFlag.id&&(null===(_featureFlagsLogic$fi2=featureFlagsLogic.b.findMounted())||void 0===_featureFlagsLogic$fi2||_featureFlagsLogic$fi2.actions.deleteFlag(featureFlag.id)),null===(_featureFlagsLogic$fi3=featureFlagsLogic.b.findMounted())||void 0===_featureFlagsLogic$fi3||_featureFlagsLogic$fi3.actions.loadFeatureFlags(),kea_router_lib.router.actions.push(urls.a.featureFlags())}})},setMultivariateEnabled:async _ref22=>{let{enabled:enabled}=_ref22;enabled?actions.setMultivariateOptions(EMPTY_MULTIVARIATE_OPTIONS):actions.setMultivariateOptions(null)},loadFeatureFlagSuccess:async()=>{actions.loadRecentInsights(),actions.loadAllInsightsForFlag()},loadInsightAtIndex:async _ref23=>{let{index:index,filters:filters}=_ref23;if(filters){var _response$result,_response$result$;const counts=null===(_response$result=(await api.b.get(`api/projects/${values.currentTeamId}/insights/trend/?${Object(utils.Kb)(Object(sharedUtils.a)(filters))}`)).result)||void 0===_response$result||null===(_response$result$=_response$result[0])||void 0===_response$result$?void 0:_response$result$.data,avg=Math.round(Object(utils.Jb)(counts)/7);actions.setInsightResultAtIndex(index,avg)}},loadAllInsightsForFlag:()=>{var _values$featureFlag$r;null===(_values$featureFlag$r=values.featureFlag.rollback_conditions)||void 0===_values$featureFlag$r||_values$featureFlag$r.forEach(((condition,index)=>{condition.threshold_metric&&actions.loadInsightAtIndex(index,condition.threshold_metric)}))},addRollbackCondition:()=>{const index=values.featureFlag.rollback_conditions.length-1;actions.loadInsightAtIndex(index,values.featureFlag.rollback_conditions[index].threshold_metric)},updateConditionSet:async(_ref24,breakpoint)=>{var _values$featureFlag$f,_values$featureFlag,_values$featureFlag$f2;let{index:index,newProperties:newProperties}=_ref24;if(newProperties&&actions.setAffectedUsers(index,void 0),!newProperties||newProperties.some((property=>null===property.value||void 0===property.value||Array.isArray(property.value)&&0===property.value.length)))return;await breakpoint(1e3);const response=await api.b.create(`api/projects/${values.currentTeamId}/feature_flags/user_blast_radius`,{condition:{properties:newProperties},group_type_index:null!==(_values$featureFlag$f=null===(_values$featureFlag=values.featureFlag)||void 0===_values$featureFlag||null===(_values$featureFlag$f2=_values$featureFlag.filters)||void 0===_values$featureFlag$f2?void 0:_values$featureFlag$f2.aggregation_group_type_index)&&void 0!==_values$featureFlag$f?_values$featureFlag$f:null});actions.setAffectedUsers(index,response.users_affected),actions.setTotalUsers(response.total_users)},addConditionSet:()=>{actions.setAffectedUsers(values.featureFlag.filters.groups.length-1,-1)},editFeatureFlag:async _ref25=>{var _values$featureFlag2,_values$featureFlag2$,_values$featureFlag2$2;let{editing:editing}=_ref25;if(!editing)return;const usersAffected=[];null===(_values$featureFlag2=values.featureFlag)||void 0===_values$featureFlag2||null===(_values$featureFlag2$=_values$featureFlag2.filters)||void 0===_values$featureFlag2$||null===(_values$featureFlag2$2=_values$featureFlag2$.groups)||void 0===_values$featureFlag2$2||_values$featureFlag2$2.forEach(((condition,index)=>{actions.setAffectedUsers(index,void 0);const properties=condition.properties;if(!properties||0===(null==properties?void 0:properties.length)||properties.some((property=>null===property.value||void 0===property.value||Array.isArray(property.value)&&0===property.value.length)))usersAffected.push(Promise.resolve({users_affected:-1,total_users:-1}));else{var _values$featureFlag$f3,_values$featureFlag3,_values$featureFlag3$;const responsePromise=api.b.create(`api/projects/${values.currentTeamId}/feature_flags/user_blast_radius`,{condition:condition,group_type_index:null!==(_values$featureFlag$f3=null===(_values$featureFlag3=values.featureFlag)||void 0===_values$featureFlag3||null===(_values$featureFlag3$=_values$featureFlag3.filters)||void 0===_values$featureFlag3$?void 0:_values$featureFlag3$.aggregation_group_type_index)&&void 0!==_values$featureFlag$f3?_values$featureFlag$f3:null});usersAffected.push(responsePromise)}}));(await Promise.all(usersAffected)).forEach(((result,index)=>{actions.setAffectedUsers(index,result.users_affected),-1!==result.total_users&&actions.setTotalUsers(result.total_users)}))},triggerFeatureFlagUpdate:async _ref26=>{let{payload:payload}=_ref26;if(values.featureFlag){var _featureFlagsLogic$fi4;const updatedFlag=await api.b.update(`api/projects/${values.currentTeamId}/feature_flags/${values.featureFlag.id}`,payload);actions.setFeatureFlag(updatedFlag),null===(_featureFlagsLogic$fi4=featureFlagsLogic.b.findMounted())||void 0===_featureFlagsLogic$fi4||_featureFlagsLogic$fi4.actions.updateFlag(updatedFlag)}}}})),Object(index_esm.selectors)({sentryErrorCount:[s=>[s.sentryStats],stats=>stats.total_count],sentryIntegrationEnabled:[s=>[s.sentryStats],stats=>!!stats.sentry_integration_enabled],props:[()=>[(_,props)=>props],props=>props],multivariateEnabled:[s=>[s.featureFlag],featureFlag=>!(null==featureFlag||!featureFlag.filters.multivariate)],roleBasedAccessEnabled:[s=>[s.hasAvailableFeature],hasAvailableFeature=>hasAvailableFeature(types.e.ROLE_BASED_ACCESS)],variants:[s=>[s.featureFlag],featureFlag=>{var _featureFlag$filters$;return(null==featureFlag||null===(_featureFlag$filters$=featureFlag.filters.multivariate)||void 0===_featureFlag$filters$?void 0:_featureFlag$filters$.variants)||[]}],nonEmptyVariants:[s=>[s.variants],variants=>variants.filter((_ref27=>{let{key:key}=_ref27;return!!key}))],variantRolloutSum:[s=>[s.variants],variants=>variants.reduce(((total,_ref28)=>{let{rollout_percentage:rollout_percentage}=_ref28;return total+rollout_percentage}),0)],areVariantRolloutsValid:[s=>[s.variants,s.variantRolloutSum],(variants,variantRolloutSum)=>variants.every((_ref29=>{let{rollout_percentage:rollout_percentage}=_ref29;return rollout_percentage>=0&&rollout_percentage<=100}))&&100===variantRolloutSum],aggregationTargetName:[s=>[s.featureFlag,s.groupTypes,s.aggregationLabel],(featureFlag,groupTypes,aggregationLabel)=>featureFlag&&null!=featureFlag.filters.aggregation_group_type_index&&groupTypes.length>0?aggregationLabel(featureFlag.filters.aggregation_group_type_index).plural:"users"],taxonomicGroupTypes:[s=>[s.featureFlag,s.groupsTaxonomicTypes],(featureFlag,groupsTaxonomicTypes)=>featureFlag&&null!=featureFlag.filters.aggregation_group_type_index&&groupsTaxonomicTypes.length>0?[groupsTaxonomicTypes[featureFlag.filters.aggregation_group_type_index]]:[TaxonomicFilter_types.a.PersonProperties,TaxonomicFilter_types.a.Cohorts]],breadcrumbs:[s=>[s.featureFlag],featureFlag=>[{name:"Feature Flags",path:urls.a.featureFlags()},...featureFlag?[{name:featureFlag.key||"Unnamed"}]:[]]],propertySelectErrors:[s=>[s.featureFlag],featureFlag=>{var _featureFlag$filters,_featureFlag$filters$2;return null==featureFlag||null===(_featureFlag$filters=featureFlag.filters)||void 0===_featureFlag$filters||null===(_featureFlag$filters$2=_featureFlag$filters.groups)||void 0===_featureFlag$filters$2?void 0:_featureFlag$filters$2.map((_ref30=>{let{properties:properties}=_ref30;return{properties:null==properties?void 0:properties.map((property=>({value:null===property.value||void 0===property.value||Array.isArray(property.value)&&0===property.value.length?"Property filters can't be empty":void 0})))}}))}],computeBlastRadiusPercentage:[s=>[s.affectedUsers,s.totalUsers],(affectedUsers,totalUsers)=>(rolloutPercentage,index)=>{let effectiveRolloutPercentage=rolloutPercentage;if(null==rolloutPercentage&&(effectiveRolloutPercentage=100),-1===affectedUsers[index]||-1===totalUsers||!totalUsers)return effectiveRolloutPercentage;let effectiveTotalUsers=totalUsers;return 0===effectiveTotalUsers&&(effectiveTotalUsers=1),effectiveRolloutPercentage*(affectedUsers[index]/effectiveTotalUsers)}],approximateTotalBlastRadius:[s=>[s.computeBlastRadiusPercentage,s.featureFlag],(computeBlastRadiusPercentage,featureFlag)=>{if(!featureFlag||!featureFlag.filters.groups)return 0;let total=0;return featureFlag.filters.groups.forEach(((group,index)=>{total+=computeBlastRadiusPercentage(group.rollout_percentage,index)})),Math.min(total,100)}]}),Object(kea_router_lib.urlToAction)((_ref31=>{var _props$id;let{actions:actions,props:props}=_ref31;return{[urls.a.featureFlag(null!==(_props$id=props.id)&&void 0!==_props$id?_props$id:"new")]:(_,__,___,_ref32)=>{let{method:method}=_ref32;"PUSH"===method&&(props.id?actions.loadFeatureFlag():actions.resetFeatureFlag())}}})),Object(index_esm.afterMount)((_ref33=>{var _featureFlagsLogic$fi5;let{props:props,actions:actions}=_ref33;const foundFlag=null===(_featureFlagsLogic$fi5=featureFlagsLogic.b.findMounted())||void 0===_featureFlagsLogic$fi5?void 0:_featureFlagsLogic$fi5.values.featureFlags.find((flag=>flag.id===props.id));foundFlag?(actions.setFeatureFlag(foundFlag),actions.loadRecentInsights(),actions.loadAllInsightsForFlag()):"new"!==props.id&&actions.loadFeatureFlag(),actions.loadSentryStats()}))]);var logic_featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),CodeSnippet=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const UTM_TAGS="?utm_medium=in-product&utm_campaign=feature-flag";function NodeJSSnippet(_ref){let{flagKey:flagKey}=_ref;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:`const isMyFlagEnabledForUser = await client.isFeatureEnabled('${flagKey}', 'user distinct id')\n\nif (isMyFlagEnabledForUser) {\n    // Do something differently for this user\n}`})})}function JSSnippet(_ref2){let{flagKey:flagKey}=_ref2;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:`// Ensure flags are loaded before usage.\n// You'll only need to call this on the code for when the first time a user visits.\n\nposthog.onFeatureFlags(function() {\n    // feature flags should be available at this point\n    if (posthog.isFeatureEnabled('${null!=flagKey?flagKey:""}')) {\n        // do something\n    }\n})\n\n// Otherwise, you can just do\n\nif (posthog.isFeatureEnabled('${null!=flagKey?flagKey:""}')) {\n    // do something\n}`})})}function PHPSnippet(_ref3){let{flagKey:flagKey}=_ref3;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.PHP,wrap:!0,children:`if (PostHog::isFeatureEnabled('${flagKey}', 'some distinct id')) {\n    // do something here\n}`})})}function GolangSnippet(_ref4){let{flagKey:flagKey}=_ref4;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Go,wrap:!0,children:`isFlagEnabledForUser, err := client.IsFeatureEnabled(\n                    FeatureFlagPayload{\n                        Key:        '${flagKey}',\n                        DistinctId: "distinct-id",\n                    })\n\nif (isFlagEnabledForUser) {\n  // Do something differently for this user\n}`})})}function RubySnippet(_ref5){let{flagKey:flagKey}=_ref5;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Ruby,wrap:!0,children:`is_my_flag_enabled = posthog.is_feature_enabled('${flagKey}', 'user distinct id')\n\nif is_my_flag_enabled\n  # Do something differently for this user\nend`})})}function PythonSnippet(_ref6){let{flagKey:flagKey}=_ref6;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Python,wrap:!0,children:`if posthog.feature_enabled("${flagKey}", "user_distinct_id"):\n    runAwesomeFeature()\n`})})}function AndroidSnippet(_ref7){let{flagKey:flagKey}=_ref7;return Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Java,wrap:!0,children:`if (PostHog.with(this).isFeatureEnabled('${flagKey}')) {\n    // do something\n}\n            `})}function iOSSnippet(_ref8){let{flagKey:flagKey}=_ref8;return Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Swift,wrap:!0,children:`// In Swift\n\nif (posthog.isFeatureEnabled('${flagKey}')) {\n    // do something\n}\n            `})}function ReactNativeSnippet(_ref9){let{flagKey:flagKey}=_ref9;return Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Java,wrap:!0,children:`// With a hook\nimport { useFeatureFlag } from 'posthog-react-native'\n\nconst MyComponent = () => {\n    const showFlaggedFeature = useFeatureFlag('${flagKey}')\n\n    if (showFlaggedFeature === undefined) {\n        // the response is undefined if the flags are being loaded\n        return null\n    }\n\n    return showFlaggedFeature ? <Text>Testing feature ðŸ˜„</Text> : <Text>Not Testing feature ðŸ˜¢</Text>\n}\n\n// Or calling on the method directly\nposthog.getFeatureFlag('my-flag')\n            `})}function PythonLocalEvaluationSnippet(_ref10){let{flagKey:flagKey}=_ref10;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Python,wrap:!0,children:`posthog.get_feature_flag(\n    ${flagKey},\n    'distinct id',\n    person_properties={'is_authorized': True}\n)\n\n`})})}function RubyLocalEvaluationSnippet(_ref11){let{flagKey:flagKey}=_ref11;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Ruby,wrap:!0,children:`posthog.get_feature_flag(\n    ${flagKey},\n    'distinct id',\n    person_properties: {'is_authorized': true}\n)\n\n`})})}function NodeLocalEvaluationSnippet(_ref12){let{flagKey:flagKey}=_ref12;return Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:`await client.getFeatureFlag(\n    ${flagKey},\n    'distinct id',\n    {\n        personProperties: {'is_authorized': true}\n    }\n)`})}function PHPLocalEvaluationSnippet(_ref13){let{flagKey:flagKey}=_ref13;return Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.PHP,wrap:!0,children:`PostHog::getFeatureFlag(\n    ${flagKey},\n    'distinct id',\n    [], // group properties\n    ["is_authorized" => true] // person properties\n)\n            `})}function GolangLocalEvaluationSnippet(_ref14){let{flagKey:flagKey}=_ref14;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Go,wrap:!0,children:`enabledVariant, err := client.GetFeatureFlag(\n        FeatureFlagPayload{\n            Key:        ${flagKey},\n            DistinctId: "distinct-id",\n      PersonProperties: posthog.NewProperties().\n        Set("is_authorized", true),\n        },\n)`})})}function JSBootstrappingSnippet(){return Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:"posthog.init('{project_api_key}', {\n    api_host: 'https://app.posthog.com',\n    bootstrap: {\n        distinctID: 'your-anonymous-id',\n        featureFlags: {\n            'flag-1': true,\n            'variant-flag': 'control',\n            'other-flag': false\n        }\n    }\n})\n            "})}try{NodeJSSnippet.displayName="NodeJSSnippet",NodeJSSnippet.__docgenInfo={description:"",displayName:"NodeJSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"]={docgenInfo:NodeJSSnippet.__docgenInfo,name:"NodeJSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"})}catch(__react_docgen_typescript_loader_error){}try{JSSnippet.displayName="JSSnippet",JSSnippet.__docgenInfo={description:"",displayName:"JSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"]={docgenInfo:JSSnippet.__docgenInfo,name:"JSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"})}catch(__react_docgen_typescript_loader_error){}try{PHPSnippet.displayName="PHPSnippet",PHPSnippet.__docgenInfo={description:"",displayName:"PHPSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"]={docgenInfo:PHPSnippet.__docgenInfo,name:"PHPSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"})}catch(__react_docgen_typescript_loader_error){}try{GolangSnippet.displayName="GolangSnippet",GolangSnippet.__docgenInfo={description:"",displayName:"GolangSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"]={docgenInfo:GolangSnippet.__docgenInfo,name:"GolangSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"})}catch(__react_docgen_typescript_loader_error){}try{RubySnippet.displayName="RubySnippet",RubySnippet.__docgenInfo={description:"",displayName:"RubySnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"]={docgenInfo:RubySnippet.__docgenInfo,name:"RubySnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"})}catch(__react_docgen_typescript_loader_error){}try{PythonSnippet.displayName="PythonSnippet",PythonSnippet.__docgenInfo={description:"",displayName:"PythonSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"]={docgenInfo:PythonSnippet.__docgenInfo,name:"PythonSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"})}catch(__react_docgen_typescript_loader_error){}try{AndroidSnippet.displayName="AndroidSnippet",AndroidSnippet.__docgenInfo={description:"",displayName:"AndroidSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#AndroidSnippet"]={docgenInfo:AndroidSnippet.__docgenInfo,name:"AndroidSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#AndroidSnippet"})}catch(__react_docgen_typescript_loader_error){}try{iOSSnippet.displayName="iOSSnippet",iOSSnippet.__docgenInfo={description:"",displayName:"iOSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#iOSSnippet"]={docgenInfo:iOSSnippet.__docgenInfo,name:"iOSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#iOSSnippet"})}catch(__react_docgen_typescript_loader_error){}try{ReactNativeSnippet.displayName="ReactNativeSnippet",ReactNativeSnippet.__docgenInfo={description:"",displayName:"ReactNativeSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#ReactNativeSnippet"]={docgenInfo:ReactNativeSnippet.__docgenInfo,name:"ReactNativeSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#ReactNativeSnippet"})}catch(__react_docgen_typescript_loader_error){}try{PythonLocalEvaluationSnippet.displayName="PythonLocalEvaluationSnippet",PythonLocalEvaluationSnippet.__docgenInfo={description:"",displayName:"PythonLocalEvaluationSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonLocalEvaluationSnippet"]={docgenInfo:PythonLocalEvaluationSnippet.__docgenInfo,name:"PythonLocalEvaluationSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonLocalEvaluationSnippet"})}catch(__react_docgen_typescript_loader_error){}try{RubyLocalEvaluationSnippet.displayName="RubyLocalEvaluationSnippet",RubyLocalEvaluationSnippet.__docgenInfo={description:"",displayName:"RubyLocalEvaluationSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubyLocalEvaluationSnippet"]={docgenInfo:RubyLocalEvaluationSnippet.__docgenInfo,name:"RubyLocalEvaluationSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubyLocalEvaluationSnippet"})}catch(__react_docgen_typescript_loader_error){}try{NodeLocalEvaluationSnippet.displayName="NodeLocalEvaluationSnippet",NodeLocalEvaluationSnippet.__docgenInfo={description:"",displayName:"NodeLocalEvaluationSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeLocalEvaluationSnippet"]={docgenInfo:NodeLocalEvaluationSnippet.__docgenInfo,name:"NodeLocalEvaluationSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeLocalEvaluationSnippet"})}catch(__react_docgen_typescript_loader_error){}try{PHPLocalEvaluationSnippet.displayName="PHPLocalEvaluationSnippet",PHPLocalEvaluationSnippet.__docgenInfo={description:"",displayName:"PHPLocalEvaluationSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPLocalEvaluationSnippet"]={docgenInfo:PHPLocalEvaluationSnippet.__docgenInfo,name:"PHPLocalEvaluationSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPLocalEvaluationSnippet"})}catch(__react_docgen_typescript_loader_error){}try{GolangLocalEvaluationSnippet.displayName="GolangLocalEvaluationSnippet",GolangLocalEvaluationSnippet.__docgenInfo={description:"",displayName:"GolangLocalEvaluationSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangLocalEvaluationSnippet"]={docgenInfo:GolangLocalEvaluationSnippet.__docgenInfo,name:"GolangLocalEvaluationSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangLocalEvaluationSnippet"})}catch(__react_docgen_typescript_loader_error){}var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),FeatureFlagInstructions=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss"),FeatureFlagInstructions_default=__webpack_require__.n(FeatureFlagInstructions),FeatureFlagInstructions_options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(FeatureFlagInstructions_default.a,FeatureFlagInstructions_options),FeatureFlagInstructions_default.a.locals;function NodeJSPayloadSnippet(_ref){let{flagKey:flagKey}=_ref;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:`const matchedFlagPayload = await client.getFeatureFlagPayload('${flagKey}', 'user distinct id')`})})}function JSPayloadSnippet(_ref2){let{flagKey:flagKey}=_ref2;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:`posthog.getFeatureFlagPayload('${null!=flagKey?flagKey:""}')`})})}function PythonPayloadSnippet(_ref3){let{flagKey:flagKey}=_ref3;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Python,wrap:!0,children:`posthog.get_feature_flag_payload(${flagKey}, "user_distinct_id")`})})}function RubyPayloadSnippet(_ref4){let{flagKey:flagKey}=_ref4;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Ruby,wrap:!0,children:`posthog.get_feature_flag_payload(${flagKey}, "user_distinct_id")`})})}try{NodeJSPayloadSnippet.displayName="NodeJSPayloadSnippet",NodeJSPayloadSnippet.__docgenInfo={description:"",displayName:"NodeJSPayloadSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#NodeJSPayloadSnippet"]={docgenInfo:NodeJSPayloadSnippet.__docgenInfo,name:"NodeJSPayloadSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#NodeJSPayloadSnippet"})}catch(__react_docgen_typescript_loader_error){}try{JSPayloadSnippet.displayName="JSPayloadSnippet",JSPayloadSnippet.__docgenInfo={description:"",displayName:"JSPayloadSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#JSPayloadSnippet"]={docgenInfo:JSPayloadSnippet.__docgenInfo,name:"JSPayloadSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#JSPayloadSnippet"})}catch(__react_docgen_typescript_loader_error){}try{PythonPayloadSnippet.displayName="PythonPayloadSnippet",PythonPayloadSnippet.__docgenInfo={description:"",displayName:"PythonPayloadSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#PythonPayloadSnippet"]={docgenInfo:PythonPayloadSnippet.__docgenInfo,name:"PythonPayloadSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#PythonPayloadSnippet"})}catch(__react_docgen_typescript_loader_error){}try{RubyPayloadSnippet.displayName="RubyPayloadSnippet",RubyPayloadSnippet.__docgenInfo={description:"",displayName:"RubyPayloadSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#RubyPayloadSnippet"]={docgenInfo:RubyPayloadSnippet.__docgenInfo,name:"RubyPayloadSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagPayloadSnippets.tsx#RubyPayloadSnippet"})}catch(__react_docgen_typescript_loader_error){}var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx");const DOC_BASE_URL="https://posthog.com/docs/",FF_ANCHOR="#feature-flags";var LibraryType=function(LibraryType){return LibraryType.Client="Client",LibraryType.Server="Server",LibraryType}(LibraryType||{});const OPTIONS=[{value:"JavaScript",documentationLink:`${DOC_BASE_URL}integrations/js-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:JSSnippet,type:LibraryType.Client},{value:"Android",documentationLink:`${DOC_BASE_URL}integrate/client/android${UTM_TAGS}${FF_ANCHOR}`,Snippet:AndroidSnippet,type:LibraryType.Client},{value:"iOS",documentationLink:`${DOC_BASE_URL}integrate/client/ios${UTM_TAGS}${FF_ANCHOR}`,Snippet:iOSSnippet,type:LibraryType.Client},{value:"ReactNative",documentationLink:`${DOC_BASE_URL}integrate/client/react-native${UTM_TAGS}${FF_ANCHOR}`,Snippet:ReactNativeSnippet,type:LibraryType.Client},{value:"Node.js",documentationLink:`${DOC_BASE_URL}integrations/node-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:NodeJSSnippet,type:LibraryType.Server},{value:"Python",documentationLink:`${DOC_BASE_URL}integrations/python-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:PythonSnippet,type:LibraryType.Server},{value:"Ruby",documentationLink:`${DOC_BASE_URL}integrations/ruby-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:RubySnippet,type:LibraryType.Server},{value:"API",documentationLink:`${DOC_BASE_URL}api/post-only-endpoints#example-request--response-decide-v2`,Snippet:function APISnippet(){const{currentTeam:currentTeam}=Object(index_esm.useValues)(teamLogic.a);return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.Bash,wrap:!0,children:`curl ${window.location.origin}/decide?v=2/ \\\n-X POST -H 'Content-Type: application/json' \\\n-d '{\n    "api_key": "${currentTeam?currentTeam.api_token:"[project_api_key]"}",\n    "distinct_id": "[user distinct id]",\n}'\n                `})})},type:LibraryType.Server},{value:"PHP",documentationLink:`${DOC_BASE_URL}integrations/php-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:PHPSnippet,type:LibraryType.Server},{value:"Golang",documentationLink:`${DOC_BASE_URL}integrations/go-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:GolangSnippet,type:LibraryType.Server}],LOCAL_EVALUATION_OPTIONS=[{value:"Node.js",documentationLink:`${DOC_BASE_URL}integrations/node-integration${UTM_TAGS}#local-evaluation`,Snippet:NodeLocalEvaluationSnippet,type:LibraryType.Server},{value:"PHP",documentationLink:`${DOC_BASE_URL}integrations/php-integration${UTM_TAGS}#local-evaluation`,Snippet:PHPLocalEvaluationSnippet,type:LibraryType.Server},{value:"Ruby",documentationLink:`${DOC_BASE_URL}integrations/ruby-integration${UTM_TAGS}#local-evaluation`,Snippet:RubyLocalEvaluationSnippet,type:LibraryType.Server},{value:"Golang",documentationLink:`${DOC_BASE_URL}integrations/go-integration${UTM_TAGS}#local-evaluation`,Snippet:GolangSnippet,type:LibraryType.Server},{value:"Python",documentationLink:`${DOC_BASE_URL}integrations/python-integration${UTM_TAGS}#local-evaluation`,Snippet:PythonLocalEvaluationSnippet,type:LibraryType.Server}],BOOTSTRAPPING_OPTIONS=[{value:"JavaScript",documentationLink:`${DOC_BASE_URL}integrations/js-integration${UTM_TAGS}#bootstrapping-flags`,Snippet:JSBootstrappingSnippet,type:LibraryType.Client},{value:"ReactNative",documentationLink:`${DOC_BASE_URL}integrate/client/react-native${UTM_TAGS}#bootstrapping-flags`,Snippet:JSBootstrappingSnippet,type:LibraryType.Client}];function FeatureFlagInstructionsHeader(_ref){let{selectedOptionValue:selectedOptionValue,selectOption:selectOption,headerPrompt:headerPrompt,options:options,dataAttr:dataAttr}=_ref;return Object(jsx_runtime.jsxs)(row.a,{className:"FeatureFlagInstructionsHeader",justify:"space-between",align:"middle",children:[Object(jsx_runtime.jsxs)("div",{className:"FeatureFlagInstructionsHeader__header-title",children:[Object(jsx_runtime.jsx)(icons.db,{className:"FeatureFlagInstructionsHeader__header-title__icon"}),Object(jsx_runtime.jsx)("b",{children:headerPrompt})]}),Object(jsx_runtime.jsx)(src.LemonSelect,{"data-attr":"feature-flag-instructions-select"+(dataAttr?`-${dataAttr}`:""),options:[{title:"Client libraries",options:options.filter((option=>option.type==LibraryType.Client)).map((option=>({value:option.value,label:option.value,"data-attr":`feature-flag-instructions-select-option-${option.value}`})))},{title:"Server libraries",options:options.filter((option=>option.type==LibraryType.Server)).map((option=>({value:option.value,label:option.value,"data-attr":`feature-flag-instructions-select-option-${option.value}`})))}],onChange:val=>{val&&selectOption(val)},value:selectedOptionValue})]})}function FeatureFlagInstructionsFooter(_ref2){let{documentationLink:documentationLink}=_ref2;return Object(jsx_runtime.jsxs)("div",{className:"mt-4",children:["Need more information?"," ",Object(jsx_runtime.jsxs)("a",{"data-attr":"feature-flag-doc-link",target:"_blank",rel:"noopener",href:documentationLink,children:["Check the docs ",Object(jsx_runtime.jsx)(icons.Tb,{})]})]})}function CodeInstructions(_ref3){let{featureFlagKey:featureFlagKey,options:options,headerPrompt:headerPrompt,selectedLanguage:selectedLanguage,newCodeExample:newCodeExample,featureFlag:featureFlag,dataAttr:dataAttr=""}=_ref3;const[defaultSelectedOption]=options,[selectedOption,setSelectedOption]=Object(react.useState)(defaultSelectedOption),[payloadOption,setPayloadOption]=Object(react.useState)(PAYLOAD_OPTIONS[0]),[showPayloadCode,setShowPayloadCode]=Object(react.useState)(Object.keys((null==featureFlag?void 0:featureFlag.filters.payloads)||{}).length>0),selectOption=selectedValue=>{const option=options.find((option=>option.value===selectedValue)),payloadOption=PAYLOAD_OPTIONS.find((payloadOption=>payloadOption.value===selectedValue));option&&setSelectedOption(option),payloadOption?setPayloadOption(payloadOption):setShowPayloadCode(!1)};return Object(react.useEffect)((()=>{selectedLanguage&&selectOption(selectedLanguage)}),[selectedLanguage]),Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:newCodeExample?Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{className:"flex flex-row gap-4",children:[Object(jsx_runtime.jsx)(src.LemonSelect,{"data-attr":"feature-flag-instructions-select"+(dataAttr?`-${dataAttr}`:""),options:[{title:"Client libraries",options:OPTIONS.filter((option=>option.type==LibraryType.Client)).map((option=>({value:option.value,label:option.value,"data-attr":`feature-flag-instructions-select-option-${option.value}`})))},{title:"Server libraries",options:OPTIONS.filter((option=>option.type==LibraryType.Server)).map((option=>({value:option.value,label:option.value,"data-attr":`feature-flag-instructions-select-option-${option.value}`})))}],onChange:val=>{val&&selectOption(val)},value:selectedOption.value}),PAYLOAD_OPTIONS.map((payloadOption=>payloadOption.value)).includes(selectedOption.value)&&Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[Object(jsx_runtime.jsx)(src.LemonCheckbox,{label:"Show payload option",onChange:()=>setShowPayloadCode(!showPayloadCode)}),Object(jsx_runtime.jsx)(Tooltip.a,{title:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:`Feature flag payloads is only available in these libraries: ${PAYLOAD_OPTIONS.map((payloadOption=>payloadOption.value))}`}),children:Object(jsx_runtime.jsx)(icons.sb,{className:"text-xl text-muted-alt shrink-0"})})]}),!(null!=featureFlag&&featureFlag.ensure_experience_continuity)&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[selectedOption.type===LibraryType.Server&&Object(jsx_runtime.jsx)(src.LemonCheckbox,{label:"Show local evaluation option",onChange:()=>{}}),selectedOption.type===LibraryType.Client&&Object(jsx_runtime.jsx)(src.LemonCheckbox,{label:"Show bootstrap option",onChange:()=>{}})]})]}),Object(jsx_runtime.jsxs)("div",{className:"mt mb",children:[Object(jsx_runtime.jsx)(selectedOption.Snippet,{"data-attr":"feature-flag-instructions-snippet",flagKey:featureFlagKey}),showPayloadCode&&Object(jsx_runtime.jsx)(payloadOption.Snippet,{flagKey:featureFlagKey}),Object(jsx_runtime.jsx)(FeatureFlagInstructionsFooter,{documentationLink:selectedOption.documentationLink})]})]}):Object(jsx_runtime.jsxs)(card.a,{size:"small",children:[Object(jsx_runtime.jsx)(FeatureFlagInstructionsHeader,{dataAttr:dataAttr,options:options,headerPrompt:headerPrompt,selectedOptionValue:selectedOption.value,selectOption:selectOption}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)("div",{className:"mt mb",children:Object(jsx_runtime.jsx)(selectedOption.Snippet,{"data-attr":"feature-flag-instructions-snippet",flagKey:featureFlagKey})}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(FeatureFlagInstructionsFooter,{documentationLink:selectedOption.documentationLink})]})})}function FeatureFlagInstructions_FeatureFlagInstructions(_ref4){let{featureFlagKey:featureFlagKey,newCodeExample:newCodeExample,language:language,featureFlag:featureFlag}=_ref4;return Object(jsx_runtime.jsx)(CodeInstructions,{featureFlagKey:featureFlagKey,headerPrompt:"Learn how to use feature flags in your code",options:OPTIONS,selectedLanguage:language,newCodeExample:newCodeExample,featureFlag:featureFlag})}function FeatureFlagLocalEvaluationInstructions(_ref5){let{featureFlagKey:featureFlagKey,language:language}=_ref5;return Object(jsx_runtime.jsx)(CodeInstructions,{featureFlagKey:featureFlagKey,headerPrompt:"Learn how to use local evaluation",options:LOCAL_EVALUATION_OPTIONS,selectedLanguage:language})}function FeatureFlagBootstrappingInstructions(_ref6){let{language:language}=_ref6;return Object(jsx_runtime.jsx)(CodeInstructions,{featureFlagKey:"",headerPrompt:"Learn how to use bootstrapping",options:BOOTSTRAPPING_OPTIONS,selectedLanguage:language})}const PAYLOAD_OPTIONS=[{value:"JavaScript",documentationLink:`${DOC_BASE_URL}integrations/js-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:JSPayloadSnippet,type:LibraryType.Client},{value:"Node.js",documentationLink:`${DOC_BASE_URL}integrations/node-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:NodeJSPayloadSnippet,type:LibraryType.Server},{value:"Python",documentationLink:`${DOC_BASE_URL}integrations/python-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:PythonPayloadSnippet,type:LibraryType.Server},{value:"Ruby",documentationLink:`${DOC_BASE_URL}integrations/ruby-integration${UTM_TAGS}${FF_ANCHOR}`,Snippet:RubyPayloadSnippet,type:LibraryType.Server}];function FeatureFlagPayloadInstructions(_ref7){let{featureFlagKey:featureFlagKey}=_ref7;return Object(jsx_runtime.jsx)(CodeInstructions,{dataAttr:"payload",featureFlagKey:featureFlagKey,headerPrompt:"Using feature flag payloads in your code",options:PAYLOAD_OPTIONS})}try{CodeInstructions.displayName="CodeInstructions",CodeInstructions.__docgenInfo={description:"",displayName:"CodeInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"InstructionOption[]"}},headerPrompt:{defaultValue:null,description:"",name:"headerPrompt",required:!0,type:{name:"string"}},selectedLanguage:{defaultValue:null,description:"",name:"selectedLanguage",required:!1,type:{name:"string"}},newCodeExample:{defaultValue:null,description:"",name:"newCodeExample",required:!1,type:{name:"boolean"}},featureFlag:{defaultValue:null,description:"",name:"featureFlag",required:!1,type:{name:"FeatureFlagType"}},dataAttr:{defaultValue:{value:""},description:"",name:"dataAttr",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#CodeInstructions"]={docgenInfo:CodeInstructions.__docgenInfo,name:"CodeInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#CodeInstructions"})}catch(__react_docgen_typescript_loader_error){}try{FeatureFlagInstructions_FeatureFlagInstructions.displayName="FeatureFlagInstructions",FeatureFlagInstructions_FeatureFlagInstructions.__docgenInfo={description:"",displayName:"FeatureFlagInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}},newCodeExample:{defaultValue:null,description:"",name:"newCodeExample",required:!1,type:{name:"boolean"}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"string"}},featureFlag:{defaultValue:null,description:"",name:"featureFlag",required:!1,type:{name:"FeatureFlagType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"]={docgenInfo:FeatureFlagInstructions_FeatureFlagInstructions.__docgenInfo,name:"FeatureFlagInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"})}catch(__react_docgen_typescript_loader_error){}try{FeatureFlagLocalEvaluationInstructions.displayName="FeatureFlagLocalEvaluationInstructions",FeatureFlagLocalEvaluationInstructions.__docgenInfo={description:"",displayName:"FeatureFlagLocalEvaluationInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagLocalEvaluationInstructions"]={docgenInfo:FeatureFlagLocalEvaluationInstructions.__docgenInfo,name:"FeatureFlagLocalEvaluationInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagLocalEvaluationInstructions"})}catch(__react_docgen_typescript_loader_error){}try{FeatureFlagBootstrappingInstructions.displayName="FeatureFlagBootstrappingInstructions",FeatureFlagBootstrappingInstructions.__docgenInfo={description:"",displayName:"FeatureFlagBootstrappingInstructions",props:{language:{defaultValue:null,description:"",name:"language",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagBootstrappingInstructions"]={docgenInfo:FeatureFlagBootstrappingInstructions.__docgenInfo,name:"FeatureFlagBootstrappingInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagBootstrappingInstructions"})}catch(__react_docgen_typescript_loader_error){}try{FeatureFlagPayloadInstructions.displayName="FeatureFlagPayloadInstructions",FeatureFlagPayloadInstructions.__docgenInfo={description:"",displayName:"FeatureFlagPayloadInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagPayloadInstructions"]={docgenInfo:FeatureFlagPayloadInstructions.__docgenInfo,name:"FeatureFlagPayloadInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagPayloadInstructions"})}catch(__react_docgen_typescript_loader_error){}var PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),FeatureFlag=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss"),FeatureFlag_default=__webpack_require__.n(FeatureFlag),FeatureFlag_options={insert:"head",singleton:!1},es=(injectStylesIntoStyleTag_default()(FeatureFlag_default.a,FeatureFlag_options),FeatureFlag_default.a.locals,__webpack_require__("./node_modules/.pnpm/rc-select@13.1.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-select/es/index.js")),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts");function GroupsIntroductionOption(_ref){let{value:value}=_ref;const{groupsAccessStatus:groupsAccessStatus}=Object(index_esm.useValues)(groupsAccessLogic.b);return[groupsAccessLogic.a.HasAccess,groupsAccessLogic.a.HasGroupTypes,groupsAccessLogic.a.NoAccess].includes(groupsAccessStatus)?Object(jsx_runtime.jsxs)(es.c.Option,{value:value,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--side)",color:"var(--muted)"},children:[Object(jsx_runtime.jsx)(LockOutlined.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups â€“"," ",Object(jsx_runtime.jsx)(Link.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",className:"font-semibold",children:"Learn more"})]},"groups"):null}try{GroupsIntroductionOption.displayName="GroupsIntroductionOption",GroupsIntroductionOption.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:GroupsIntroductionOption.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(__react_docgen_typescript_loader_error){}var LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),Field=__webpack_require__("./frontend/src/lib/forms/Field.tsx"),LemonTextArea=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTextArea/LemonTextArea.tsx"),LemonInput=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),LemonCheckbox=__webpack_require__("./frontend/src/lib/lemon-ui/LemonCheckbox/index.ts"),EventBufferNotice=__webpack_require__("./frontend/src/scenes/events/EventBufferNotice.tsx"),AlertMessage=__webpack_require__("./frontend/src/lib/lemon-ui/AlertMessage/index.ts"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),CopyToClipboard=__webpack_require__("./frontend/src/lib/components/CopyToClipboard.tsx"),Lettermark=__webpack_require__("./frontend/src/lib/lemon-ui/Lettermark/index.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),LemonTag=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),ActivityLog=__webpack_require__("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),humanizeActivity=__webpack_require__("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),DefinitionPopover_utils=__webpack_require__("./frontend/src/lib/components/DefinitionPopover/utils.ts"),CompactList=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),RecentInsights=__webpack_require__("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function RecentFeatureFlagInsights(){const{recentInsights:recentInsights,recentInsightsLoading:recentInsightsLoading,featureFlag:featureFlag}=Object(index_esm.useValues)(featureFlagLogic);return Object(jsx_runtime.jsx)(CompactList.a,{title:"Insights that use this feature flag",loading:recentInsightsLoading,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:urls.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`})},items:recentInsights.slice(0,5),renderRow:(insight,index)=>Object(jsx_runtime.jsx)(RecentInsights.a,{insight:insight},index)})}var NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),ActionFilter=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),ActionFilterRow=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function FeatureFlagAutoRollback(_ref){let{readOnly:readOnly}=_ref;const{featureFlag:featureFlag,sentryIntegrationEnabled:sentryIntegrationEnabled,sentryErrorCount:sentryErrorCount,insightRollingAverages:insightRollingAverages}=Object(index_esm.useValues)(featureFlagLogic),{addRollbackCondition:addRollbackCondition,removeRollbackCondition:removeRollbackCondition,loadInsightAtIndex:loadInsightAtIndex}=Object(index_esm.useActions)(featureFlagLogic),{user:user}=Object(index_esm.useValues)(userLogic.a);return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{className:"mb-2",children:[Object(jsx_runtime.jsx)("b",{children:"Auto rollback"}),Object(jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"}),!readOnly&&Object(jsx_runtime.jsx)("div",{className:"mt-2",children:"Specify the conditions in which this feature flag will automatically roll back."})]}),readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map(((rollback_condition,index)=>{var _rollback_condition$t,_rollback_condition$t2,_rollback_condition$t3;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&Object(jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),"insight"===rollback_condition.threshold_type&&null!==(_rollback_condition$t=rollback_condition.threshold_metric)&&void 0!==_rollback_condition$t&&null!==(_rollback_condition$t2=_rollback_condition$t.events)&&void 0!==_rollback_condition$t2&&null!==(_rollback_condition$t3=_rollback_condition$t2[0])&&void 0!==_rollback_condition$t3&&_rollback_condition$t3.name?Object(jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(jsx_runtime.jsx)("b",{children:`${Object(utils.i)(rollback_condition.threshold_type)} based rollback`}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:[insightRollingAverages[index]&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"Â  trailing average is ",insightRollingAverages[index],"."]}),"Â Trigger when trailing average of Â ",Object(jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"Â  isÂ ",rollback_condition.operator&&utils.I[rollback_condition.operator]," ",rollback_condition.threshold]})]}):Object(jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(jsx_runtime.jsx)("b",{children:`${Object(utils.i)(rollback_condition.threshold_type)} based rollback`}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:["Trigger when there is aÂ ",Object(jsx_runtime.jsxs)("b",{children:[rollback_condition.threshold,"%"]}),"Â increase in errors"]})]})]})})),!readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map(((_,index)=>Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&Object(jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(jsx_runtime.jsx)("div",{className:"mb-4 border rounded p-4",children:Object(jsx_runtime.jsxs)(lib.Group,{name:["rollback_conditions",index],children:[Object(jsx_runtime.jsxs)(row.a,{align:"middle",justify:"space-between",children:[Object(jsx_runtime.jsxs)(row.a,{children:[Object(jsx_runtime.jsx)("div",{className:"mt-3 mr-3",children:Object(jsx_runtime.jsx)("b",{children:"Rollback Condition Type"})}),Object(jsx_runtime.jsx)(Field.a,{name:"threshold_type",children:_ref2=>{let{value:value,onChange:onChange}=_ref2;return Object(jsx_runtime.jsx)(src.LemonSelect,{value:value,onChange:onChange,options:[{value:types.V.Sentry,label:"Error Based"},{value:types.V.Insight,label:"Metric Based"}]})}})]}),Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.M,{}),status:"muted",noPadding:!0,onClick:()=>{removeRollbackCondition(index)}})]}),Object(jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),"insight"==featureFlag.rollback_conditions[index].threshold_type?Object(jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[Object(jsx_runtime.jsx)(Field.a,{name:"threshold_metric",children:_ref3=>{let{value:value,onChange:onChange}=_ref3;return Object(jsx_runtime.jsx)(ActionFilter.a,{filters:value,setFilters:payload=>{onChange({...payload}),loadInsightAtIndex(index,payload)},typeKey:"feature-flag-rollback-trends-"+index,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:ActionFilterRow.b.None,propertiesTaxonomicGroupTypes:[TaxonomicFilter_types.a.EventProperties,TaxonomicFilter_types.a.PersonProperties,TaxonomicFilter_types.a.EventFeatureFlags,TaxonomicFilter_types.a.Cohorts,TaxonomicFilter_types.a.Elements]})}}),Object(jsx_runtime.jsxs)("span",{children:["trailing 7 day average isÂ ",void 0!==insightRollingAverages[index]?Object(jsx_runtime.jsx)("b",{children:insightRollingAverages[index]}):Object(jsx_runtime.jsx)(Spinner.a,{}),". Trigger when trailing average is"]}),Object(jsx_runtime.jsx)(Field.a,{name:"operator",children:_ref4=>{let{value:value,onChange:onChange}=_ref4;return Object(jsx_runtime.jsx)(src.LemonSelect,{value:value,onChange:onChange,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),Object(jsx_runtime.jsx)(Field.a,{name:"threshold",children:Object(jsx_runtime.jsx)(src.LemonInput,{min:0,type:"number"})})]}):sentryIntegrationEnabled?Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:[sentryErrorCount?Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsxs)("b",{children:[Object(utils.Q)(sentryErrorCount)," "]})," sentry errors in the past 24 hours."," "]}):Object(jsx_runtime.jsx)(Spinner.a,{}),Object(jsx_runtime.jsx)("span",{children:"Â Trigger when there is a"}),Object(jsx_runtime.jsx)(Field.a,{name:"threshold",className:"ml-3 mr-3",children:_ref5=>{let{value:value,onChange:onChange}=_ref5;return Object(jsx_runtime.jsx)(src.LemonInput,{value:value,suffix:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"%"}),type:"number",min:0,onChange:onChange})}}),Object(jsx_runtime.jsx)(Field.a,{name:"operator",className:"mr-3",children:_ref6=>{let{value:value,onChange:onChange}=_ref6;return Object(jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value:value,onChange:onChange})}}),Object(jsx_runtime.jsxs)("span",{children:["to"," ",sentryErrorCount?Object(jsx_runtime.jsx)("b",{children:Object(utils.Q)(Math.round(sentryErrorCount*(1+(featureFlag.rollback_conditions[index].threshold||0)/100)))}):Object(jsx_runtime.jsx)(Spinner.a,{})," ","errors."]}),Object(jsx_runtime.jsx)("div",{})]})}):null!=user&&user.is_staff?Object(jsx_runtime.jsxs)("div",{className:"mt-4",children:[Object(jsx_runtime.jsx)("b",{children:"This feature requires an active Sentry integration."}),Object(jsx_runtime.jsx)("br",{}),Object(jsx_runtime.jsx)(src.Link,{to:urls.a.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",Object(jsx_runtime.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):Object(jsx_runtime.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]}))),!readOnly&&Object(jsx_runtime.jsx)(src.LemonButton,{type:"secondary",onClick:()=>{addRollbackCondition()},children:"Add condition"})]})}try{FeatureFlagAutoRollback.displayName="FeatureFlagAutoRollback",FeatureFlagAutoRollback.__docgenInfo={description:"",displayName:"FeatureFlagAutoRollback",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"]={docgenInfo:FeatureFlagAutoRollback.__docgenInfo,name:"FeatureFlagAutoRollback",path:"frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"})}catch(__react_docgen_typescript_loader_error){}var RecentRecordings=__webpack_require__("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),SessionPlayerModal=__webpack_require__("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),sessionRecordingsListLogic=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts");const filtersForFlag=flagKey=>({events:defaultEntityFilterOnFlag(flagKey).events});function FeatureFlagRecordings(_ref){let{flagKey:flagKey}=_ref;const{currentTeam:currentTeam}=Object(index_esm.useValues)(teamLogic.a),sessionRecordingsListLogicInstance=Object(sessionRecordingsListLogic.e)({key:`feature-flag-${flagKey}`,filters:filtersForFlag(flagKey)}),{sessionRecordings:sessionRecordings,sessionRecordingsResponseLoading:sessionRecordingsResponseLoading,filters:filters}=Object(index_esm.useValues)(sessionRecordingsListLogicInstance);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SessionPlayerModal.a,{}),Object(jsx_runtime.jsx)(CompactList.a,{title:"Recordings with current feature flag",viewAllURL:urls.a.sessionRecordings(void 0,filters),loading:sessionRecordingsResponseLoading,emptyMessage:null!=currentTeam&&currentTeam.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:urls.a.projectSettings()+"#recordings"},items:sessionRecordings.slice(0,5),renderRow:(recording,index)=>Object(jsx_runtime.jsx)(RecentRecordings.b,{recording:recording},index)})]})}try{FeatureFlagRecordings.displayName="FeatureFlagRecordings",FeatureFlagRecordings.__docgenInfo={description:"",displayName:"FeatureFlagRecordings",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"]={docgenInfo:FeatureFlagRecordings.__docgenInfo,name:"FeatureFlagRecordings",path:"frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"})}catch(__react_docgen_typescript_loader_error){}try{filtersForFlag.displayName="filtersForFlag",filtersForFlag.__docgenInfo={description:"",displayName:"filtersForFlag",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#filtersForFlag"]={docgenInfo:filtersForFlag.__docgenInfo,name:"filtersForFlag",path:"frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#filtersForFlag"})}catch(__react_docgen_typescript_loader_error){}var events=__webpack_require__("./frontend/src/scenes/events/index.ts"),PropertyFilters_utils=__webpack_require__("./frontend/src/lib/components/PropertyFilters/utils.ts"),LemonSelectMultiple=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSelectMultiple/LemonSelectMultiple.tsx"),TitleWithIcon=__webpack_require__("./frontend/src/lib/components/TitleWithIcon.tsx"),permissionsLogic=__webpack_require__("./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx");function roleLemonSelectOptions(roles){return roles.map((role=>({key:role.id,label:`${role.name}`,labelComponent:Object(jsx_runtime.jsx)("span",{children:Object(jsx_runtime.jsx)("b",{children:`${role.name}`})})})))}function ResourcePermissionModal(_ref){let{title:title,visible:visible,onClose:onClose,rolesToAdd:rolesToAdd,addableRoles:addableRoles,onChange:onChange,addableRolesLoading:addableRolesLoading,onAdd:onAdd,roles:roles,deleteAssociatedRole:deleteAssociatedRole,canEdit:canEdit}=_ref;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(src.LemonModal,{title:title,isOpen:visible,onClose:onClose,children:Object(jsx_runtime.jsx)(ResourcePermission,{resourceType:types.T.FEATURE_FLAGS,onChange:onChange,rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:addableRolesLoading,onAdd:onAdd,roles:roles,deleteAssociatedRole:deleteAssociatedRole,canEdit:canEdit})})})}function ResourcePermission(_ref2){let{rolesToAdd:rolesToAdd,addableRoles:addableRoles,onChange:onChange,addableRolesLoading:addableRolesLoading,onAdd:onAdd,roles:roles,deleteAssociatedRole:deleteAssociatedRole,resourceType:resourceType,canEdit:canEdit}=_ref2;const{allPermissions:allPermissions,shouldShowPermissionsTable:shouldShowPermissionsTable}=Object(index_esm.useValues)(permissionsLogic.b),{roles:possibleRolesWithAccess}=Object(index_esm.useValues)(rolesLogic.a),resourceLevel=allPermissions.find((permission=>permission.resource===resourceType)),rolesWithAccess=possibleRolesWithAccess.filter((role=>role.feature_flags_access_level===types.a.WRITE)),columns=[{title:"Role",dataIndex:"name",key:"name",render:function RenderRoleName(_,role){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Organization default"===role.name?Object(jsx_runtime.jsx)(TitleWithIcon.a,{icon:Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.zc,{}),to:`${urls.a.organizationSettings()}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,tooltip:"Organization-wide permissions for roles can be managed in the organization settings.",className:"ml-1"}),children:"All users by default"}):role.name})}},{title:"Access",dataIndex:"feature_flags_access_level",key:"feature_flags_access_level",render:function RenderAccessLevel(_,role){return Object(jsx_runtime.jsxs)("div",{className:"flex flex-row justify-between",children:[role.feature_flags_access_level===types.a.WRITE?"Edit":"View",role.deletable&&Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.M,{}),onClick:()=>deleteAssociatedRole(role.id),tooltip:"Remove custom role from feature flag",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}}],tableData=[{id:"",name:"Organization default",feature_flags_access_level:resourceLevel?resourceLevel.access_level:types.a.WRITE,created_by:null,created_at:""},...rolesWithAccess,...roles.map((role=>({...role,feature_flags_access_level:types.a.WRITE,deletable:!0})))];return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!shouldShowPermissionsTable&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[resourceLevel&&Object(jsx_runtime.jsx)(OrganizationResourcePermissionLabel,{resourceLevel:resourceLevel}),Object(jsx_runtime.jsx)(OrganizationResourcePermissionRoles,{roles:rolesWithAccess})]}),shouldShowPermissionsTable&&Object(jsx_runtime.jsx)(src.LemonTable,{dataSource:tableData,columns:columns,className:"mt-4"}),!shouldShowPermissionsTable&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h5",{className:"mt-4",children:"Roles"}),roles.length>0?Object(jsx_runtime.jsx)("div",{className:"pb-2 rounded overflow-y-auto",style:{maxHeight:300},children:roles.map((role=>Object(jsx_runtime.jsx)(RoleRow,{role:role,deleteRole:roleId=>deleteAssociatedRole(roleId)},role.id)))}):Object(jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"No roles added yet"})]}),canEdit&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h5",{className:"mt-4",children:"Custom edit roles"}),Object(jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[Object(jsx_runtime.jsx)("div",{className:"flex-1",children:Object(jsx_runtime.jsx)(LemonSelectMultiple.a,{placeholder:"Search for roles to addâ€¦",loading:addableRolesLoading,onChange:onChange,value:rolesToAdd,filterOption:!0,mode:"multiple","data-attr":"resource-permissioning-select",options:roleLemonSelectOptions(addableRoles)})}),Object(jsx_runtime.jsx)(src.LemonButton,{type:"primary",loading:!1,disabled:0===rolesToAdd.length,onClick:onAdd,children:"Add"})]})]})]})}function OrganizationResourcePermissionLabel(_ref3){let{resourceLevel:resourceLevel}=_ref3;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(TitleWithIcon.a,{icon:Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.zc,{}),to:`${urls.a.organizationSettings()}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,className:"ml-1"}),children:Object(jsx_runtime.jsx)("h5",{children:"Organization default"})}),Object(jsx_runtime.jsx)("b",{children:permissionsLogic.a[resourceLevel.access_level]})]})}function OrganizationResourcePermissionRoles(_ref4){let{roles:roles}=_ref4;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h5",{className:"mt-4",children:"Roles with edit access"}),Object(jsx_runtime.jsx)(row.a,{children:roles.map((role=>Object(jsx_runtime.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt mr-2",children:[Object(jsx_runtime.jsx)("b",{children:role.name})," "]},role.id)))})]})}function RoleRow(_ref5){let{role:role,deleteRole:deleteRole}=_ref5;return Object(jsx_runtime.jsxs)("div",{className:"flex items-center justify-between h-8",children:[Object(jsx_runtime.jsx)("b",{children:role.name}),deleteRole&&Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.M,{}),onClick:()=>deleteRole(role.id),tooltip:"Remove role from permission",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}try{roleLemonSelectOptions.displayName="roleLemonSelectOptions",roleLemonSelectOptions.__docgenInfo={description:"",displayName:"roleLemonSelectOptions",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#roleLemonSelectOptions"]={docgenInfo:roleLemonSelectOptions.__docgenInfo,name:"roleLemonSelectOptions",path:"frontend/src/scenes/ResourcePermissionModal.tsx#roleLemonSelectOptions"})}catch(__react_docgen_typescript_loader_error){}try{ResourcePermissionModal.displayName="ResourcePermissionModal",ResourcePermissionModal.__docgenInfo={description:"",displayName:"ResourcePermissionModal",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},addableRoles:{defaultValue:null,description:"",name:"addableRoles",required:!0,type:{name:"RoleType[]"}},addableRolesLoading:{defaultValue:null,description:"",name:"addableRolesLoading",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: string[]) => void"}},rolesToAdd:{defaultValue:null,description:"",name:"rolesToAdd",required:!0,type:{name:"string[]"}},onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"() => void"}},roles:{defaultValue:null,description:"",name:"roles",required:!0,type:{name:"RoleType[]"}},deleteAssociatedRole:{defaultValue:null,description:"",name:"deleteAssociatedRole",required:!0,type:{name:"(id: string) => void"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"Resource"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermissionModal"]={docgenInfo:ResourcePermissionModal.__docgenInfo,name:"ResourcePermissionModal",path:"frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermissionModal"})}catch(__react_docgen_typescript_loader_error){}try{ResourcePermission.displayName="ResourcePermission",ResourcePermission.__docgenInfo={description:"",displayName:"ResourcePermission",props:{addableRoles:{defaultValue:null,description:"",name:"addableRoles",required:!0,type:{name:"RoleType[]"}},addableRolesLoading:{defaultValue:null,description:"",name:"addableRolesLoading",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: string[]) => void"}},rolesToAdd:{defaultValue:null,description:"",name:"rolesToAdd",required:!0,type:{name:"string[]"}},onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"() => void"}},roles:{defaultValue:null,description:"",name:"roles",required:!0,type:{name:"RoleType[]"}},deleteAssociatedRole:{defaultValue:null,description:"",name:"deleteAssociatedRole",required:!0,type:{name:"(id: string) => void"}},resourceType:{defaultValue:null,description:"",name:"resourceType",required:!0,type:{name:"Resource"}},canEdit:{defaultValue:null,description:"",name:"canEdit",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermission"]={docgenInfo:ResourcePermission.__docgenInfo,name:"ResourcePermission",path:"frontend/src/scenes/ResourcePermissionModal.tsx#ResourcePermission"})}catch(__react_docgen_typescript_loader_error){}var PayGateMini=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),lib_es=__webpack_require__("./node_modules/.pnpm/@monaco-editor+react@4.4.6_vtctfwvicljpcdx2mjoqbo4tly/node_modules/@monaco-editor/react/lib/es/index.js"),JSONEditorInput=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/JSONEditorInput.scss"),JSONEditorInput_default=__webpack_require__.n(JSONEditorInput),JSONEditorInput_options={insert:"head",singleton:!1},lemon_ui_Spinner=(injectStylesIntoStyleTag_default()(JSONEditorInput_default.a,JSONEditorInput_options),JSONEditorInput_default.a.locals,__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/index.ts"));function JSONEditorInput_JSONEditorInput(_ref){let{onChange:onChange,placeholder:placeholder,lineHeight:lineHeight=20,defaultNumberOfLines:defaultNumberOfLines=1,value:value="",readOnly:readOnly=!1}=_ref;const valString=(null==value?void 0:value.toString())||"",_lineHeight=lineHeight,defaultLines=Math.max(defaultNumberOfLines,valString.split(/\r\n|\r|\n/).length)+1,defaultHeight=_lineHeight*defaultLines,[height,setHeight]=Object(react.useState)(defaultHeight),[focused,setFocused]=Object(react.useState)(!1);return Object(jsx_runtime.jsxs)("div",{className:"JsonEditorInput",onFocus:()=>setFocused(!0),onBlur:()=>setFocused(!1),children:[Object(jsx_runtime.jsx)(lib_es.a,{theme:"vs-light",className:"border",language:"json",height:height,value:null==value?void 0:value.toString(),options:{readOnly:readOnly,lineHeight:_lineHeight,minimap:{enabled:!1},scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1},padding:{bottom:0,top:10},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,glyphMargin:!0,folding:!1,lineNumbers:"off",lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",cursorStyle:"block-outline",scrollBeyondLastLine:!1,quickSuggestions:!1,contextmenu:!1},onChange:val=>{(val=>{if(val){const lineCount=val.split(/\r\n|\r|\n/).length,newLineCount=Math.max(lineCount,defaultNumberOfLines)+1;setHeight(_lineHeight*newLineCount)}else setHeight(_lineHeight*(defaultNumberOfLines+1))})(val),null==onChange||onChange(val)},loading:Object(jsx_runtime.jsx)(lemon_ui_Spinner.a,{})}),!focused&&!(null!=value&&value.toString())&&placeholder&&Object(jsx_runtime.jsx)("div",{className:"placeholder",children:Object(jsx_runtime.jsx)("div",{className:"placeholderLabelContainer",children:placeholder})})]})}try{JSONEditorInput_JSONEditorInput.displayName="JSONEditorInput",JSONEditorInput_JSONEditorInput.__docgenInfo={description:"",displayName:"JSONEditorInput",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((val: string) => void)"}},lineHeight:{defaultValue:{value:"20"},description:"",name:"lineHeight",required:!1,type:{name:"number"}},defaultNumberOfLines:{defaultValue:{value:"1"},description:"",name:"defaultNumberOfLines",required:!1,type:{name:"number"}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"JsonType"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/JSONEditorInput.tsx#JSONEditorInput"]={docgenInfo:JSONEditorInput_JSONEditorInput.__docgenInfo,name:"JSONEditorInput",path:"frontend/src/scenes/feature-flags/JSONEditorInput.tsx#JSONEditorInput"})}catch(__react_docgen_typescript_loader_error){}var ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),tagsModel=__webpack_require__("./frontend/src/models/tagsModel.ts"),Dashboard=__webpack_require__("./frontend/src/scenes/dashboard/Dashboard.tsx"),dashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),EmptyDashboardComponent=__webpack_require__("./frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx");function FeatureFlagCodeExample(_ref){let{featureFlag:featureFlag}=_ref;return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("h3",{children:Object(jsx_runtime.jsx)("b",{children:"Implementation example"})}),Object(jsx_runtime.jsx)(FeatureFlagInstructions_FeatureFlagInstructions,{newCodeExample:!0,featureFlag:featureFlag,featureFlagKey:featureFlag.key||"my-flag"})]})}try{FeatureFlagCodeExample.displayName="FeatureFlagCodeExample",FeatureFlagCodeExample.__docgenInfo={description:"",displayName:"FeatureFlagCodeExample",props:{featureFlag:{defaultValue:null,description:"",name:"featureFlag",required:!0,type:{name:"FeatureFlagType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagCodeExample.tsx#FeatureFlagCodeExample"]={docgenInfo:FeatureFlagCodeExample.__docgenInfo,name:"FeatureFlagCodeExample",path:"frontend/src/scenes/feature-flags/FeatureFlagCodeExample.tsx#FeatureFlagCodeExample"})}catch(__react_docgen_typescript_loader_error){}var billingLogic=__webpack_require__("./frontend/src/scenes/billing/billingLogic.ts");const scene={component:FeatureFlag_FeatureFlag,logic:featureFlagLogic,paramsToProps:_ref=>{let{params:{id:id}}=_ref;return{id:id&&"new"!==id?parseInt(id):"new"}}};function focusVariantKeyField(index){setTimeout((()=>{var _document$querySelect;return null===(_document$querySelect=document.querySelector(`.variant-form-list input[data-key-index="${index}"]`))||void 0===_document$querySelect?void 0:_document$querySelect.focus()}),50)}function FeatureFlag_FeatureFlag(){var _featureFlag$experime;let{id:id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{props:props,featureFlag:featureFlag,featureFlagLoading:featureFlagLoading,featureFlagMissing:featureFlagMissing,isEditingFlag:isEditingFlag}=Object(index_esm.useValues)(featureFlagLogic),{featureFlags:featureFlags}=Object(index_esm.useValues)(logic_featureFlagLogic.a),{deleteFeatureFlag:deleteFeatureFlag,editFeatureFlag:editFeatureFlag,loadFeatureFlag:loadFeatureFlag,triggerFeatureFlagUpdate:triggerFeatureFlagUpdate}=Object(index_esm.useActions)(featureFlagLogic),{addableRoles:addableRoles,unfilteredAddableRolesLoading:unfilteredAddableRolesLoading,rolesToAdd:rolesToAdd,derivedRoles:derivedRoles}=Object(index_esm.useValues)(featureFlagPermissionsLogic({flagId:featureFlag.id})),{setRolesToAdd:setRolesToAdd,addAssociatedRoles:addAssociatedRoles,deleteAssociatedRole:deleteAssociatedRole}=Object(index_esm.useActions)(featureFlagPermissionsLogic({flagId:featureFlag.id})),{tags:tags}=Object(index_esm.useValues)(tagsModel.a),{hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),[hasKeyChanged,setHasKeyChanged]=Object(react.useState)(!1),[activeTab,setActiveTab]=Object(react.useState)(featureFlagsLogic.a.OVERVIEW),[advancedSettingsExpanded,setAdvancedSettingsExpanded]=Object(react.useState)(!1),isNewFeatureFlag="new"===id||void 0===id;return featureFlagMissing?Object(jsx_runtime.jsx)(NotFound.a,{object:"feature flag"}):featureFlagLoading?Object(jsx_runtime.jsx)(Spinner.b,{}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)("div",{className:"feature-flag",children:isNewFeatureFlag||isEditingFlag?Object(jsx_runtime.jsxs)(lib.Form,{logic:featureFlagLogic,props:props,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:isNewFeatureFlag?"New feature flag":featureFlag.key||"Untitled",buttons:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.a.featureFlags())},disabled:featureFlagLoading,children:"Cancel"}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:featureFlagLoading,disabled:featureFlagLoading,children:"Save"})]})}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),featureFlag.experiment_set&&(null===(_featureFlag$experime=featureFlag.experiment_set)||void 0===_featureFlag$experime?void 0:_featureFlag$experime.length)>0&&Object(jsx_runtime.jsxs)(AlertMessage.a,{type:"warning",children:["This feature flag is linked to an experiment. It's recommended to only make changes to this flag"," ",Object(jsx_runtime.jsx)(Link.a,{to:urls.a.experiment(featureFlag.experiment_set[0]),children:"using the experiment creation screen."})]}),Object(jsx_runtime.jsx)(EventBufferNotice.a,{additionalInfo:", meaning it can take around 60 seconds for some flags to update for recently-identified persons. To sidestep this, you can choose to override server properties when requesting the feature flag"}),Object(jsx_runtime.jsxs)(row.a,{gutter:16,style:{marginBottom:32},children:[Object(jsx_runtime.jsxs)(col.a,{span:12,className:"space-y-4",children:[Object(jsx_runtime.jsx)(Field.a,{name:"key",label:"Key",help:hasKeyChanged&&"new"!==id?Object(jsx_runtime.jsxs)("span",{className:"text-warning",children:[Object(jsx_runtime.jsx)("b",{children:"Warning! "}),"Changing this key will",Object(jsx_runtime.jsxs)("a",{href:`https://posthog.com/docs/features/feature-flags${UTM_TAGS}#feature-flag-persistence`,target:"_blank",rel:"noopener",children:[" ","affect the persistence of your flag ",Object(jsx_runtime.jsx)(icons.Tb,{})]})]}):void 0,children:_ref2=>{let{value:value,onChange:onChange}=_ref2;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonInput.a,{value:value,onChange:v=>{v!==value&&setHasKeyChanged(!0),onChange(v)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),Object(jsx_runtime.jsx)("span",{style:{fontSize:13},className:"text-muted",children:"Feature flag keys must be unique"})]})}}),Object(jsx_runtime.jsx)(Field.a,{name:"name",label:"Description",children:Object(jsx_runtime.jsx)(LemonTextArea.a,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:featureFlag.name||""})}),hasAvailableFeature(types.e.TAGGING)&&Object(jsx_runtime.jsx)(Field.a,{name:"tags",label:"Tags",children:_ref3=>{let{value:value,onChange:onChange}=_ref3;return Object(jsx_runtime.jsx)(ObjectTags.a,{tags:value,onChange:(_,tags)=>onChange(tags),saving:featureFlagLoading,tagsAvailable:tags.filter((tag=>{var _featureFlag$tags;return!(null!==(_featureFlag$tags=featureFlag.tags)&&void 0!==_featureFlag$tags&&_featureFlag$tags.includes(tag))})),className:"insight-metadata-tags"})}}),!featureFlags[constants.i.FF_CODE_EXAMPLE]&&Object(jsx_runtime.jsx)(Field.a,{name:"ensure_experience_continuity",children:_ref4=>{let{value:value,onChange:onChange}=_ref4;return Object(jsx_runtime.jsxs)("div",{className:"border rounded p-4",children:[Object(jsx_runtime.jsx)(LemonCheckbox.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:()=>onChange(!value),fullWidth:!0,checked:value}),Object(jsx_runtime.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",Object(jsx_runtime.jsxs)(Link.a,{to:"https://posthog.com/manual/feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:["Learn more ",Object(jsx_runtime.jsx)(icons.Tb,{})]})]})]})}}),Object(jsx_runtime.jsx)(Field.a,{name:"active",children:_ref5=>{let{value:value,onChange:onChange}=_ref5;return Object(jsx_runtime.jsx)("div",{className:"border rounded p-4",children:Object(jsx_runtime.jsx)(LemonCheckbox.a,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:()=>onChange(!value),checked:value})})}})]}),!featureFlags[constants.i.FF_CODE_EXAMPLE]&&Object(jsx_runtime.jsx)(col.a,{span:12,children:Object(jsx_runtime.jsx)(FeatureFlagInstructions_FeatureFlagInstructions,{featureFlagKey:featureFlag.key||"my-flag"})})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(FeatureFlagRollout,{}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(FeatureFlagReleaseConditions,{}),featureFlags[constants.i.FF_CODE_EXAMPLE]&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(FeatureFlagCodeExample,{featureFlag:featureFlag}),Object(jsx_runtime.jsx)(Field.a,{name:"ensure_experience_continuity",children:_ref6=>{let{value:value,onChange:onChange}=_ref6;return Object(jsx_runtime.jsxs)("div",{className:"border rounded p-4",children:[Object(jsx_runtime.jsx)(LemonCheckbox.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:()=>onChange(!value),fullWidth:!0,checked:value}),Object(jsx_runtime.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",Object(jsx_runtime.jsxs)(Link.a,{to:"https://posthog.com/manual/feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:["Learn more ",Object(jsx_runtime.jsx)(icons.Tb,{})]})]})]})}})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),isNewFeatureFlag&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(LemonButton.a,{fullWidth:!0,status:"default-dark",onClick:()=>setAdvancedSettingsExpanded(!advancedSettingsExpanded),sideIcon:advancedSettingsExpanded?Object(jsx_runtime.jsx)(icons.bd,{}):Object(jsx_runtime.jsx)(icons.cd,{}),children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("h3",{className:"l4",children:"Advanced settings"}),Object(jsx_runtime.jsx)("div",{className:"text-muted mb-4 font-medium",children:"Define who can modify this flag."})]})})}),advancedSettingsExpanded&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlags[constants.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(jsx_runtime.jsx)(FeatureFlagAutoRollback,{}),featureFlags[constants.i.ROLE_BASED_ACCESS]&&Object(jsx_runtime.jsx)(card.a,{title:"Permissions",className:"mb-4",children:Object(jsx_runtime.jsx)(PayGateMini.a,{feature:types.e.ROLE_BASED_ACCESS,children:Object(jsx_runtime.jsx)(ResourcePermission,{resourceType:types.T.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{})]}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.a.featureFlags())},disabled:featureFlagLoading,children:"Cancel"}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:featureFlagLoading,disabled:featureFlagLoading,children:"Save"})]})]}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlagLoading?Object(jsx_runtime.jsx)(skeleton.a,{active:!0}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[featureFlag.key||"Untitled",Object(jsx_runtime.jsx)(CopyToClipboard.a,{explicitValue:featureFlag.key,iconStyle:{color:"var(--muted-alt)"}}),Object(jsx_runtime.jsx)("div",{className:"flex",children:featureFlag.active?Object(jsx_runtime.jsx)(LemonTag.a,{type:"success",className:"uppercase",children:"Enabled"}):Object(jsx_runtime.jsx)(LemonTag.a,{type:"default",className:"uppercase",children:"Disabled"})})]}),description:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlag.name?Object(jsx_runtime.jsx)("span",{style:{fontStyle:"normal"},children:featureFlag.name}):"There is no description for this feature flag."}),caption:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(null==featureFlag?void 0:featureFlag.tags)&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlag.can_edit?Object(jsx_runtime.jsx)(ObjectTags.a,{tags:featureFlag.tags,onChange:(_,tags)=>{triggerFeatureFlagUpdate({tags:tags})},saving:featureFlagLoading,tagsAvailable:tags.filter((tag=>{var _featureFlag$tags2;return!(null!==(_featureFlag$tags2=featureFlag.tags)&&void 0!==_featureFlag$tags2&&_featureFlag$tags2.includes(tag))})),className:"insight-metadata-tags"}):featureFlag.tags.length?Object(jsx_runtime.jsx)(ObjectTags.a,{tags:featureFlag.tags,saving:featureFlagLoading,staticOnly:!0,className:"insight-metadata-tags"}):null})}),buttons:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"delete-feature-flag",status:"danger",type:"secondary",onClick:()=>{deleteFeatureFlag(featureFlag)},disabled:featureFlagLoading||!featureFlag.can_edit,children:"Delete feature flag"}),Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"edit-feature-flag",type:"secondary",tooltip:featureFlags[constants.i.ROLE_BASED_ACCESS]&&!featureFlag.can_edit&&"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",onClick:()=>{editFeatureFlag(!0)},disabled:featureFlagLoading||!featureFlag.can_edit,children:"Edit"})]})})}),Object(jsx_runtime.jsxs)(tabs.a,{activeKey:activeTab,destroyInactiveTabPane:!0,onChange:t=>setActiveTab(t),children:[Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:"Overview",children:Object(jsx_runtime.jsxs)(row.a,{children:[Object(jsx_runtime.jsxs)(col.a,{span:13,children:[Object(jsx_runtime.jsx)(FeatureFlagRollout,{readOnly:!0}),Object(jsx_runtime.jsx)(FeatureFlagReleaseConditions,{readOnly:!0}),featureFlags[constants.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(jsx_runtime.jsx)(FeatureFlagAutoRollback,{readOnly:!0})]}),Object(jsx_runtime.jsxs)(col.a,{span:11,className:"pl-4",children:[Object(jsx_runtime.jsx)(RecentFeatureFlagInsights,{}),Object(jsx_runtime.jsx)("div",{className:"my-4"}),featureFlags[constants.i.RECORDINGS_ON_FEATURE_FLAGS]?Object(jsx_runtime.jsx)(FeatureFlagRecordings,{flagKey:featureFlag.key||"my-flag"}):Object(jsx_runtime.jsx)(FeatureFlagInstructions_FeatureFlagInstructions,{featureFlagKey:featureFlag.key||"my-flag"})]})]})},"overview"),featureFlags[constants.i.EXPOSURES_ON_FEATURE_FLAGS]&&featureFlag.key&&id&&Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:Object(jsx_runtime.jsxs)("div",{children:["Usage",Object(jsx_runtime.jsx)(LemonTag.a,{type:"warning",className:"uppercase ml-2",children:"Beta"})]}),children:Object(jsx_runtime.jsx)(UsageTab,{id:id,featureFlag:featureFlag})},"usage"),featureFlag.id&&Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:"History",children:Object(jsx_runtime.jsx)(ActivityLog.a,{scope:humanizeActivity.a.FEATURE_FLAG,id:featureFlag.id})},"history"),featureFlags[constants.i.ROLE_BASED_ACCESS]&&featureFlag.can_edit&&Object(jsx_runtime.jsx)(tabs.a.TabPane,{tab:"Permissions",children:Object(jsx_runtime.jsx)(PayGateMini.a,{feature:types.e.ROLE_BASED_ACCESS,children:Object(jsx_runtime.jsx)(ResourcePermission,{resourceType:types.T.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})},"permissions")]})]})})})})}function UsageTab(_ref7){let{featureFlag:featureFlag}=_ref7;const{key:featureFlagKey,usage_dashboard:dashboardId}=featureFlag,{generateUsageDashboard:generateUsageDashboard}=Object(index_esm.useActions)(featureFlagLogic),{featureFlagLoading:featureFlagLoading}=Object(index_esm.useValues)(featureFlagLogic),{receivedErrorsFromAPI:receivedErrorsFromAPI}=Object(index_esm.useValues)(Object(dashboardLogic.f)({id:dashboardId,placement:types.n.FeatureFlag})),connectedDashboardExists=dashboardId&&!receivedErrorsFromAPI,propertyFilter=[{key:"$feature_flag",type:types.N.Event,value:featureFlagKey,operator:types.P.Exact}];return Object(jsx_runtime.jsxs)("div",{children:[connectedDashboardExists?Object(jsx_runtime.jsx)(Dashboard.Dashboard,{id:dashboardId.toString(),placement:types.n.FeatureFlag}):Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("b",{children:"Dashboard"}),Object(jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"There is currently no connected dashboard to this feature flag. If there was previously a connected dashboard, it may have been deleted."}),featureFlagLoading?Object(jsx_runtime.jsx)(EmptyDashboardComponent.a,{loading:!0,canEdit:!1}):Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary",onClick:()=>generateUsageDashboard(),children:"Generate Usage Dashboard"})]}),Object(jsx_runtime.jsxs)("div",{className:"mt-4 mb-4",children:[Object(jsx_runtime.jsx)("b",{children:"Log"}),Object(jsx_runtime.jsx)("div",{className:"text-muted",children:`Feature flag calls for "${featureFlagKey}" will appear here`})]}),Object(jsx_runtime.jsx)(events.b,{fixedFilters:{event_filter:"$feature_flag_called",properties:propertyFilter},fixedColumns:[{title:"Value",key:"value",render:function renderEventProperty(_,_ref8){var _event$properties$$fe;let{event:event}=_ref8;return null==event||null===(_event$properties$$fe=event.properties.$feature_flag_response)||void 0===_event$properties$$fe?void 0:_event$properties$$fe.toString()}}],startingColumns:["person"],fetchMonths:1,pageKey:"feature-flag-"+featureFlagKey,showPersonColumn:!0,showEventFilter:!1,showPropertyFilter:!1,showCustomizeColumns:!1,showAutoload:!1,showExport:!1,showActionsButton:!1,emptyPrompt:"No events received"})]})}function FeatureFlagRollout(_ref9){var _featureFlag$filters$2,_featureFlag$filters$3;let{readOnly:readOnly}=_ref9;const{multivariateEnabled:multivariateEnabled,variants:variants,areVariantRolloutsValid:areVariantRolloutsValid,featureFlagLoading:featureFlagLoading,variantRolloutSum:variantRolloutSum,nonEmptyVariants:nonEmptyVariants,aggregationTargetName:aggregationTargetName,featureFlag:featureFlag}=Object(index_esm.useValues)(featureFlagLogic),{distributeVariantsEqually:distributeVariantsEqually,addVariant:addVariant,removeVariant:removeVariant,setMultivariateEnabled:setMultivariateEnabled}=Object(index_esm.useActions)(featureFlagLogic),[showVariantDiscardWarning,setShowVariantDiscardWarning]=Object(react.useState)(!1),{hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),{upgradeLink:upgradeLink}=Object(index_esm.useValues)(billingLogic.a),{featureFlags:featureFlags}=Object(index_esm.useValues)(logic_featureFlagLogic.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[readOnly?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(jsx_runtime.jsx)("span",{className:"card-secondary",children:"Type"}),Object(jsx_runtime.jsx)("span",{children:featureFlag.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),Object(jsx_runtime.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),Object(jsx_runtime.jsxs)("span",{children:["This flag"," ",Object(jsx_runtime.jsxs)("b",{children:[featureFlag.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),featureFlag.filters.multivariate&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{className:"mb-2",children:Object(jsx_runtime.jsx)("b",{children:"Variant keys"})}),Object(jsx_runtime.jsxs)("div",{className:"border rounded p-4 mb-4",children:[Object(jsx_runtime.jsxs)(row.a,{gutter:16,className:"font-semibold",children:[Object(jsx_runtime.jsx)(col.a,{span:6,children:"Key"}),Object(jsx_runtime.jsx)(col.a,{span:6,children:"Description"}),Object(jsx_runtime.jsx)(col.a,{span:9,children:"Payload"}),Object(jsx_runtime.jsx)(col.a,{span:3,children:"Rollout"})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),variants.map(((variant,index)=>{var _featureFlag$filters$;return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)(row.a,{gutter:16,children:[Object(jsx_runtime.jsxs)(col.a,{span:6,children:[Object(jsx_runtime.jsx)(Lettermark.a,{name:utils.c[index],color:Lettermark.b.Gray}),Object(jsx_runtime.jsx)(CopyToClipboard.a,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:variant.key})]}),Object(jsx_runtime.jsx)(col.a,{span:6,children:Object(jsx_runtime.jsx)("span",{className:variant.name?"":"text-muted",children:variant.name||"There is no description for this variant key"})}),Object(jsx_runtime.jsx)(col.a,{span:9,children:null!==(_featureFlag$filters$=featureFlag.filters.payloads)&&void 0!==_featureFlag$filters$&&_featureFlag$filters$[index]?Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:!0,value:featureFlag.filters.payloads[index]}):Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"No payload associated with this variant"})}),Object(jsx_runtime.jsxs)(col.a,{span:3,children:[variant.rollout_percentage,"%"]})]}),index!==variants.length-1&&Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"})]},index)}))]})]})]}):Object(jsx_runtime.jsxs)("div",{className:"mb-8",children:[Object(jsx_runtime.jsx)("h3",{className:"l4",children:"Served value"}),Object(jsx_runtime.jsx)("div",{className:"mb-2",children:Object(jsx_runtime.jsx)(popconfirm.a,{placement:"top",title:"Change value type? The variants below will be lost.",disabled:featureFlagLoading,visible:showVariantDiscardWarning,onConfirm:()=>{setMultivariateEnabled(!1),setShowVariantDiscardWarning(!1)},onCancel:()=>setShowVariantDiscardWarning(!1),okText:"OK",cancelText:"Cancel",children:Object(jsx_runtime.jsx)(es_radio.a.Group,{options:[{label:"Release toggle (boolean)",value:!1},{label:Object(jsx_runtime.jsx)(Tooltip.a,{title:hasAvailableFeature(types.e.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:Object(jsx_runtime.jsxs)("div",{children:[!hasAvailableFeature(types.e.MULTIVARIATE_FLAGS)&&Object(jsx_runtime.jsx)(Link.a,{to:upgradeLink,target:"_blank",children:Object(jsx_runtime.jsx)(LockOutlined.a,{style:{marginRight:4,color:"var(--warning)"}})}),"Multiple variants with rollout percentages (A/B test)"]})}),value:!0,disabled:!hasAvailableFeature(types.e.MULTIVARIATE_FLAGS)}],onChange:e=>{const{value:value}=e.target;!1===value&&nonEmptyVariants.length?setShowVariantDiscardWarning(!0):(setMultivariateEnabled(value),focusVariantKeyField(0))},value:multivariateEnabled,optionType:"button"})})}),Object(jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:[Object(utils.i)(aggregationTargetName)," will be served"," ",multivariateEnabled?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):Object(jsx_runtime.jsx)("strong",{children:Object(jsx_runtime.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),!multivariateEnabled&&Object(jsx_runtime.jsxs)("div",{className:"mb-6",children:[Object(jsx_runtime.jsx)("h3",{className:"l4",children:"Payload"}),readOnly?null!==(_featureFlag$filters$2=featureFlag.filters.payloads)&&void 0!==_featureFlag$filters$2&&_featureFlag$filters$2.true?Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,value:null===(_featureFlag$filters$3=featureFlag.filters.payloads)||void 0===_featureFlag$filters$3?void 0:_featureFlag$filters$3.true}):Object(jsx_runtime.jsx)("span",{children:"No payload associated with this flag"}):Object(jsx_runtime.jsxs)(row.a,{gutter:16,children:[Object(jsx_runtime.jsxs)(col.a,{span:12,children:[Object(jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:["Specify a payload to be returned when the served value is"," ",Object(jsx_runtime.jsx)("strong",{children:Object(jsx_runtime.jsx)("code",{children:"true"})})]}),Object(jsx_runtime.jsx)(lib.Group,{name:["filters","payloads"],children:Object(jsx_runtime.jsx)(Field.a,{name:"true",children:Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,placeholder:'Examples: "A string", 2500, {"key": "value"}'})})})]}),!featureFlags[constants.i.FF_CODE_EXAMPLE]&&Object(jsx_runtime.jsx)(col.a,{span:12,children:Object(jsx_runtime.jsx)(FeatureFlagPayloadInstructions,{featureFlagKey:featureFlag.key||"my-flag"})})]})]}),!readOnly&&multivariateEnabled&&Object(jsx_runtime.jsxs)("div",{className:"feature-flag-variants",children:[Object(jsx_runtime.jsx)("h3",{className:"l4",children:"Variant keys"}),Object(jsx_runtime.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),Object(jsx_runtime.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(jsx_runtime.jsxs)(row.a,{gutter:8,className:"label-row",children:[Object(jsx_runtime.jsx)(col.a,{span:1}),Object(jsx_runtime.jsx)(col.a,{span:4,children:"Variant key"}),Object(jsx_runtime.jsx)(col.a,{span:6,children:"Description"}),Object(jsx_runtime.jsx)(col.a,{span:8,children:Object(jsx_runtime.jsxs)("div",{style:{display:"flex",flexDirection:"column",fontWeight:"normal"},children:[Object(jsx_runtime.jsx)("b",{children:"Payload"}),Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"Specify return payload when the variant key matches"})]})}),Object(jsx_runtime.jsxs)(col.a,{span:4,children:["Rollout",Object(jsx_runtime.jsx)(LemonButton.a,{type:"tertiary",onClick:distributeVariantsEqually,children:"(Redistribute)"})]})]}),variants.map(((_,index)=>Object(jsx_runtime.jsx)(lib.Group,{name:"filters",children:Object(jsx_runtime.jsxs)(row.a,{gutter:8,align:"middle",children:[Object(jsx_runtime.jsx)(col.a,{span:1,children:Object(jsx_runtime.jsx)(Lettermark.a,{name:utils.c[index],color:Lettermark.b.Gray})}),Object(jsx_runtime.jsx)(col.a,{span:4,children:Object(jsx_runtime.jsx)(Field.a,{name:["multivariate","variants",index,"key"],children:Object(jsx_runtime.jsx)(LemonInput.a,{"data-attr":"feature-flag-variant-key","data-key-index":index.toString(),className:"ph-ignore-input",placeholder:`example-variant-${index+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(jsx_runtime.jsx)(col.a,{span:6,children:Object(jsx_runtime.jsx)(Field.a,{name:["multivariate","variants",index,"name"],children:Object(jsx_runtime.jsx)(LemonInput.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(jsx_runtime.jsx)(col.a,{span:8,children:Object(jsx_runtime.jsx)(Field.a,{name:["payloads",index],children:_ref10=>{let{value:value,onChange:onChange}=_ref10;return Object(jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{onChange:onChange,value:value,placeholder:'{"key": "value"}'})}})}),Object(jsx_runtime.jsx)(col.a,{span:3,children:Object(jsx_runtime.jsx)(Field.a,{name:["multivariate","variants",index,"rollout_percentage"],children:_ref11=>{let{value:value,onChange:onChange}=_ref11;return Object(jsx_runtime.jsx)(LemonInput.a,{type:"number",min:0,max:100,value:value,onChange:changedValue=>{if(null!=changedValue){const valueInt=parseInt(changedValue.toString());isNaN(valueInt)||onChange(valueInt)}}})}})}),Object(jsx_runtime.jsx)(col.a,{span:2,children:Object(jsx_runtime.jsx)(row.a,{children:variants.length>1&&Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.M,{}),status:"primary-alt","data-attr":`delete-prop-filter-${index}`,noPadding:!0,onClick:()=>removeVariant(index)})})})]})},index))),variants.length>0&&!areVariantRolloutsValid&&Object(jsx_runtime.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",variantRolloutSum,")."]}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",onClick:()=>{const newIndex=variants.length;addVariant(),focusVariantKeyField(newIndex)},icon:Object(jsx_runtime.jsx)(icons.hc,{}),center:!0,children:"Add variant"})]})]})]})}function FeatureFlagReleaseConditions(_ref12){var _featureFlag$filters,_featureFlag$filters2;let{readOnly:readOnly}=_ref12;const{showGroupsOptions:showGroupsOptions,aggregationLabel:aggregationLabel}=Object(index_esm.useValues)(groupsModel.a),{aggregationTargetName:aggregationTargetName,featureFlag:featureFlag,groupTypes:groupTypes,taxonomicGroupTypes:taxonomicGroupTypes,nonEmptyVariants:nonEmptyVariants,propertySelectErrors:propertySelectErrors,computeBlastRadiusPercentage:computeBlastRadiusPercentage,affectedUsers:affectedUsers,totalUsers:totalUsers}=Object(index_esm.useValues)(featureFlagLogic),{setAggregationGroupTypeIndex:setAggregationGroupTypeIndex,updateConditionSet:updateConditionSet,duplicateConditionSet:duplicateConditionSet,removeConditionSet:removeConditionSet,addConditionSet:addConditionSet}=Object(index_esm.useActions)(featureFlagLogic),{cohortsById:cohortsById}=Object(index_esm.useValues)(cohortsModel.a),{featureFlags:featureFlags}=Object(index_esm.useValues)(logic_featureFlagLogic.a),matchByGroupsIntroductionOption=GroupsIntroductionOption({value:-2});return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"feature-flag-form-row",children:[Object(jsx_runtime.jsx)("div",{"data-attr":"feature-flag-release-conditions",children:readOnly?Object(jsx_runtime.jsx)("div",{className:"mb-2",children:Object(jsx_runtime.jsx)("b",{children:"Release conditions"})}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h3",{className:"l4",children:"Release conditions"}),Object(jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:["Specify the ",aggregationTargetName," to which you want to release this flag. Note that condition sets are rolled out independently of each other."]})]})}),!readOnly&&showGroupsOptions&&Object(jsx_runtime.jsxs)("div",{className:"centered",children:["Match by",Object(jsx_runtime.jsxs)(es_select.a,{value:null!=(null===(_featureFlag$filters=featureFlag.filters)||void 0===_featureFlag$filters?void 0:_featureFlag$filters.aggregation_group_type_index)?null===(_featureFlag$filters2=featureFlag.filters)||void 0===_featureFlag$filters2?void 0:_featureFlag$filters2.aggregation_group_type_index:-1,onChange:value=>{setAggregationGroupTypeIndex(-1!==value?value:null)},style:{marginLeft:8},"data-attr":"feature-flag-aggregation-filter",dropdownMatchSelectWidth:!1,dropdownAlign:{points:["tr","br"]},children:[Object(jsx_runtime.jsx)(es_select.a.Option,{value:-1,children:"Users"},-1),groupTypes.map((groupType=>Object(jsx_runtime.jsx)(es_select.a.Option,{value:groupType.group_type_index,children:Object(utils.i)(aggregationLabel(groupType.group_type_index).plural)},groupType.group_type_index))),matchByGroupsIntroductionOption]})]})]}),Object(jsx_runtime.jsx)(row.a,{gutter:16,children:featureFlag.filters.groups.map(((group,index)=>{var _group$properties,_featureFlag$filters$4,_propertySelectErrors,_propertySelectErrors2,_group$properties2,_group$rollout_percen,properties;return Object(jsx_runtime.jsxs)(col.a,{span:24,md:24,children:[index>0&&Object(jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(jsx_runtime.jsxs)(row.a,{align:"middle",justify:"space-between",children:[Object(jsx_runtime.jsxs)(row.a,{align:"middle",children:[Object(jsx_runtime.jsxs)("span",{className:"simple-tag tag-light-blue font-medium mr-2",children:["Set ",index+1]}),Object(jsx_runtime.jsx)("div",{children:null!==(_group$properties=group.properties)&&void 0!==_group$properties&&_group$properties.length?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:readOnly?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Match ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," against ",Object(jsx_runtime.jsx)("b",{children:"all"})," criteria"]}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Matching ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," against the criteria"]})}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Condition set will match ",Object(jsx_runtime.jsxs)("b",{children:["all ",aggregationTargetName]})]})})]}),!readOnly&&Object(jsx_runtime.jsxs)(row.a,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.I,{}),status:"muted",noPadding:!0,onClick:()=>duplicateConditionSet(index)}),featureFlag.filters.groups.length>1&&Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.M,{}),status:"muted",noPadding:!0,onClick:()=>removeConditionSet(index)})]})]}),Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),!readOnly&&(properties=group.properties,!!properties.find((property=>"cohort"===property.type||!constants.l.includes(property.key||""))))&&Object(jsx_runtime.jsxs)(AlertMessage.a,{type:"info",className:"mt-3 mb-3",children:["These properties aren't immediately available on first page load for unidentified persons. This feature flag requires that at least one event is sent prior to becoming available to your product or website."," ",Object(jsx_runtime.jsxs)("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank",children:[" ","Learn more about how to make feature flags available instantly."]})]}),readOnly?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:group.properties.map(((property,idx)=>{var _cohortsById$property;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("div",{className:"feature-flag-property-display",children:[0===idx?Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.Kc,{className:"arrow-right"}),status:"muted",size:"small"}):Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)("span",{className:"text-sm",children:"&"}),status:"muted",size:"small"}),Object(jsx_runtime.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt",children:["cohort"===property.type?"Cohort":property.key," "]}),Object(PropertyFilters_utils.e)(property)?Object(jsx_runtime.jsxs)("span",{children:[Object(DefinitionPopover_utils.a)(property.operator)," "]}):null,"cohort"===property.type?Object(jsx_runtime.jsx)("a",{href:urls.a.cohort(property.value),target:"_blank",rel:"noopener",className:"simple-tag tag-light-blue text-primary-alt display-value",children:property.value&&(null===(_cohortsById$property=cohortsById[property.value])||void 0===_cohortsById$property?void 0:_cohortsById$property.name)||`ID ${property.value}`}):[...Array.isArray(property.value)?property.value:[property.value]].map(((val,idx)=>Object(jsx_runtime.jsx)("span",{className:"simple-tag tag-light-blue text-primary-alt display-value",children:val},idx)))]},idx)})}))}):Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(PropertyFilters.a,{orFiltering:!0,pageKey:`feature-flag-${featureFlag.id}-${index}-${featureFlag.filters.groups.length}-${null!==(_featureFlag$filters$4=featureFlag.filters.aggregation_group_type_index)&&void 0!==_featureFlag$filters$4?_featureFlag$filters$4:""}`,propertyFilters:null==group?void 0:group.properties,logicalRowDivider:!0,addButton:Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.ic,{}),noPadding:!0,children:"Add condition"}),onChange:properties=>updateConditionSet(index,void 0,properties),taxonomicGroupTypes:taxonomicGroupTypes,hasRowOperator:!1,sendAllKeyUpdates:!0,errorMessages:null!=propertySelectErrors&&null!==(_propertySelectErrors=propertySelectErrors[index])&&void 0!==_propertySelectErrors&&null!==(_propertySelectErrors2=_propertySelectErrors.properties)&&void 0!==_propertySelectErrors2&&_propertySelectErrors2.some((message=>!!message.value))?propertySelectErrors[index].properties.map(((message,index)=>message.value?Object(jsx_runtime.jsxs)("div",{className:"text-danger flex items-center gap-1 text-sm",children:[Object(jsx_runtime.jsx)(icons.S,{className:"text-xl"})," ",message.value]},index):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{}))):null})}),(!readOnly||readOnly&&(null===(_group$properties2=group.properties)||void 0===_group$properties2?void 0:_group$properties2.length)>0)&&Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),readOnly?Object(jsx_runtime.jsx)(LemonTag.a,{type:1==featureFlag.filters.groups.length?null==group.rollout_percentage||100==group.rollout_percentage?"highlight":0==group.rollout_percentage?"caution":"none":"none",children:Object(jsx_runtime.jsxs)("div",{className:"text-sm ",children:["Rolled out to"," ",Object(jsx_runtime.jsxs)("b",{children:[null!=group.rollout_percentage?group.rollout_percentage:100,"%"]})," of"," ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set."," "]})}):Object(jsx_runtime.jsx)("div",{className:"feature-flag-form-row",children:Object(jsx_runtime.jsxs)("div",{className:"centered",children:["Roll out to"," ",Object(jsx_runtime.jsx)(input_number.a,{style:{width:100,marginLeft:8,marginRight:8},onChange:value=>{updateConditionSet(index,value)},value:null!=group.rollout_percentage?group.rollout_percentage:100,min:0,max:100,addonAfter:"%"})," ","of ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set."," ",featureFlags[constants.i.FEATURE_FLAG_ROLLOUT_UX]&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Will match approximately"," ",void 0!==affectedUsers[index]?Object(jsx_runtime.jsx)("b",{children:1*computeBlastRadiusPercentage(group.rollout_percentage,index).toPrecision(2)+"% "}):Object(jsx_runtime.jsx)(Spinner.a,{className:"mr-1"})," ",affectedUsers[index]&&affectedUsers[index]>=0&&totalUsers?`(${Object(utils.Q)(Math.floor(affectedUsers[index]*(null!==(_group$rollout_percen=group.rollout_percentage)&&void 0!==_group$rollout_percen?_group$rollout_percen:100)/100))} / ${Object(utils.Q)(totalUsers)})`:""," ","of total ",aggregationTargetName,"."]})]})}),nonEmptyVariants.length>0&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonDivider.a,{className:"my-3"}),readOnly?Object(jsx_runtime.jsxs)("div",{children:["All ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set"," ",group.variant?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" ","will be in variant ",Object(jsx_runtime.jsx)("b",{children:group.variant})]}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"have no variant override"})]}):Object(jsx_runtime.jsx)("div",{className:"feature-flag-form-row",children:Object(jsx_runtime.jsxs)("div",{className:"centered",children:[Object(jsx_runtime.jsx)("b",{children:"Optional override:"})," Set variant for all"," ",Object(jsx_runtime.jsx)("b",{children:aggregationTargetName})," in this set to"," ",Object(jsx_runtime.jsx)(src.LemonSelect,{placeholder:"Select variant",allowClear:!0,value:group.variant,onChange:value=>updateConditionSet(index,void 0,void 0,value),options:nonEmptyVariants.map((variant=>({label:variant.key,value:variant.key}))),"data-attr":"feature-flags-variant-override-select"})]})})]})]})]},`${index}-${featureFlag.filters.groups.length}`)}))}),!readOnly&&Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",className:"mt-0",onClick:addConditionSet,icon:Object(jsx_runtime.jsx)(icons.hc,{}),children:"Add condition set"})]})}try{FeatureFlag_FeatureFlag.displayName="FeatureFlag",FeatureFlag_FeatureFlag.__docgenInfo={description:"",displayName:"FeatureFlag",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"]={docgenInfo:FeatureFlag_FeatureFlag.__docgenInfo,name:"FeatureFlag",path:"frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return rolesLogic}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),scenes_project_Settings_teamMembersLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts");const rolesLogic=Object(kea__WEBPACK_IMPORTED_MODULE_0__.kea)([Object(kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","organization","rolesLogic"]),Object(kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_project_Settings_teamMembersLogic__WEBPACK_IMPORTED_MODULE_4__.b,["allMembers"]]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setCreateRoleModalShown:shown=>({shown:shown}),setRoleInFocus:role=>({role:role}),setRoleMembersInFocus:roleMembers=>({roleMembers:roleMembers}),setRoleMembersToAdd:uuids=>({uuids:uuids}),openCreateRoleModal:!0,setPermission:(resource,access)=>({resource:resource,access:access}),clearPermission:!0,updateRole:role=>({role:role})}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({createRoleModalShown:[!1,{setCreateRoleModalShown:(_,_ref)=>{let{shown:shown}=_ref;return shown}}],roleInFocus:[null,{setRoleInFocus:(_,_ref2)=>{let{role:role}=_ref2;return role}}],roleMembersInFocus:[[],{setRoleMembersInFocus:(_,_ref3)=>{let{roleMembers:roleMembers}=_ref3;return roleMembers}}],roleMembersToAdd:[[],{setRoleMembersToAdd:(_,_ref4)=>{let{uuids:uuids}=_ref4;return uuids}}],roles:[[],{updateRole:(state,_ref5)=>{let{role:newRole}=_ref5;return state.map((role=>role.id==newRole.id?newRole:role))}}]}),Object(kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)((_ref6=>{let{values:values,actions:actions}=_ref6;return{roles:{loadRoles:async()=>{const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.list();return(null==response?void 0:response.results)||[]},createRole:async roleName=>{const{roles:roles,roleMembersToAdd:roleMembersToAdd}=values,newRole=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.create(roleName);return await actions.addRoleMembers({role:newRole,membersToAdd:roleMembersToAdd}),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_3__.e.actions.reportRoleCreated(roleName),actions.setRoleMembersInFocus([]),actions.setRoleMembersToAdd([]),actions.clearPermission(),actions.setCreateRoleModalShown(!1),[newRole,...roles]},deleteRole:async role=>(await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.delete(role.id),values.roles.filter((currRoles=>currRoles.id!==role.id)))},roleMembersInFocus:[[],{loadRoleMembers:async _ref7=>{let{roleId:roleId}=_ref7;const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.members.list(roleId);return(null==response?void 0:response.results)||[]},addRoleMembers:async _ref8=>{let{role:role,membersToAdd:membersToAdd}=_ref8;const newMembers=await Promise.all(membersToAdd.map((async userUuid=>await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.members.create(role.id,userUuid))));return actions.setRoleMembersToAdd([]),[...values.roleMembersInFocus,...newMembers]},deleteRoleMember:async _ref9=>{let{roleMemberUuid:roleMemberUuid}=_ref9;return values.roleInFocus&&await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.members.delete(values.roleInFocus.id,roleMemberUuid),values.roleMembersInFocus.filter((member=>member.id!==roleMemberUuid))}}]}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.listeners)((_ref10=>{let{actions:actions,values:values}=_ref10;return{setRoleInFocus:_ref11=>{let{role:role}=_ref11;role&&actions.loadRoleMembers({roleId:role.id}),actions.setCreateRoleModalShown(!0)},openCreateRoleModal:()=>{actions.setRoleInFocus(null),actions.setRoleMembersInFocus([]),actions.setCreateRoleModalShown(!0)},setCreateRoleModalShown:()=>{values.roleInFocus?actions.setPermission(_types__WEBPACK_IMPORTED_MODULE_5__.T.FEATURE_FLAGS,values.roleInFocus.feature_flags_access_level):actions.setPermission(_types__WEBPACK_IMPORTED_MODULE_5__.T.FEATURE_FLAGS,_types__WEBPACK_IMPORTED_MODULE_5__.a.WRITE)},deleteRoleSuccess:()=>{actions.setCreateRoleModalShown(!1)}}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({addableMembers:[s=>[s.allMembers,s.roleMembersInFocus],(allMembers,roleMembersInFocus)=>{const addableMembers=[];for(const member of allMembers)roleMembersInFocus.some((roleMember=>roleMember.user.uuid===member.user.uuid))||addableMembers.push(member.user);return addableMembers.sort(((a,b)=>a.first_name.localeCompare(b.first_name))),addableMembers}]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)((_ref12=>{let{actions:actions}=_ref12;actions.loadRoles()}))])},"./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePermissionMapping})),__webpack_require__.d(__webpack_exports__,"b",(function(){return permissionsLogic}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/types.ts"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/constants.tsx"),_Roles_rolesLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts");const ResourceDisplayMapping={[_types__WEBPACK_IMPORTED_MODULE_3__.T.FEATURE_FLAGS]:"Feature Flags"},ResourcePermissionMapping={[_types__WEBPACK_IMPORTED_MODULE_3__.a.WRITE]:"View & Edit",[_types__WEBPACK_IMPORTED_MODULE_3__.a.READ]:"View Only"},ResourceAccessLevelMapping={[_types__WEBPACK_IMPORTED_MODULE_3__.T.FEATURE_FLAGS]:"feature_flags_access_level"},permissionsLogic=Object(kea__WEBPACK_IMPORTED_MODULE_0__.kea)([Object(kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","organization","Settings","Permissions","permissionsLogic"]),Object(kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__.a,["featureFlags"],_Roles_rolesLogic__WEBPACK_IMPORTED_MODULE_6__.a,["roles"]],actions:[_Roles_rolesLogic__WEBPACK_IMPORTED_MODULE_6__.a,["updateRole"]]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.actions)({updatePermission:(checked,role,resourceId,resourceType)=>({checked:checked,role:role,resourceId:resourceId,resourceType:resourceType})}),Object(kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)((_ref=>{let{values:values}=_ref;return{organizationResourcePermissions:[[],{loadOrganizationResourcePermissions:async()=>{const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.resourcePermissions.list();return(null==response?void 0:response.results)||[]},updateOrganizationResourcePermission:async _ref2=>{let{id:id,resource:resource,access_level:access_level}=_ref2;if(id){const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.resourcePermissions.update(id,{access_level:access_level});return values.organizationResourcePermissions.map((permission=>permission.id==response.id?response:permission))}{const response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.resourcePermissions.create({resource:resource,access_level:access_level});return[...values.organizationResourcePermissions,response]}}}]}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.listeners)((_ref3=>{let{actions:actions}=_ref3;return{updatePermission:async _ref4=>{let{checked:checked,role:role,resourceId:resourceId,resourceType:resourceType}=_ref4;const accessLevel=checked?_types__WEBPACK_IMPORTED_MODULE_3__.a.WRITE:_types__WEBPACK_IMPORTED_MODULE_3__.a.READ;if(role.id){const updatedRole=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.roles.update(role.id,{[ResourceAccessLevelMapping[resourceType]]:accessLevel});updatedRole&&(actions.updateRole(updatedRole),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__.lemonToast.success(`${role.name} role ${resourceType} edit access updated`))}else actions.updateOrganizationResourcePermission({id:resourceId,resource:resourceType,access_level:accessLevel});lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__.e.actions.reportResourceAccessLevelUpdated(resourceType,role.name,accessLevel)},updateOrganizationResourcePermissionSuccess:()=>{_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_7__.lemonToast.success("Organizational edit access updated")}}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({organizationResourcePermissionsMap:[s=>[s.organizationResourcePermissions],organizationResourcePermissions=>organizationResourcePermissions.reduce(((obj,resourcePermission)=>({...obj,[resourcePermission.resource]:resourcePermission})),{})],allPermissions:[s=>[s.organizationResourcePermissionsMap],organizationResourcePermissionsMap=>Object.keys(ResourceDisplayMapping).map((key=>{var _organizationResource,_organizationResource2;return{id:(null===(_organizationResource=organizationResourcePermissionsMap[key])||void 0===_organizationResource?void 0:_organizationResource.id)||null,resource:key,name:ResourceDisplayMapping[key],access_level:(null===(_organizationResource2=organizationResourcePermissionsMap[key])||void 0===_organizationResource2?void 0:_organizationResource2.access_level)||_types__WEBPACK_IMPORTED_MODULE_3__.a.WRITE}}))],shouldShowPermissionsTable:[s=>[s.featureFlags],featureFlags=>"control"===featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_5__.i.ROLE_BASED_ACCESS]],resourceRolesAccess:[s=>[s.allPermissions,s.roles],(permissions,roles)=>{const resources=permissions.map((resource=>({[resource.resource]:{organization_default:resource.access_level,id:resource.id}})));for(const role of roles)for(const source of resources){const resourceType=Object.keys(source)[0];source[resourceType][`${role.name}`]=role[ResourceAccessLevelMapping[resourceType]]}return resources}]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)((_ref5=>{let{actions:actions}=_ref5;actions.loadOrganizationResourcePermissions()}))])},"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ProjectHomePageCompactListItem}));var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"));function ProjectHomePageCompactListItem(_ref){let{to:to,onClick:onClick,title:title,subtitle:subtitle,prefix:prefix,suffix:suffix}=_ref;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonButton,{fullWidth:!0,to:to,onClick:onClick,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[prefix?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"shrink-0",children:prefix}):null,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"text-primary font-semibold truncate",children:title}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"truncate text-default font-normal",children:subtitle})]}),suffix?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"shrink-0",children:suffix}):null]})})}try{ProjectHomePageCompactListItem.displayName="ProjectHomePageCompactListItem",ProjectHomePageCompactListItem.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:ProjectHomePageCompactListItem.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_dhonik3q6ff6ozbzdscnovq2ka_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_dhonik3q6ff6ozbzdscnovq2ka_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_dhonik3q6ff6ozbzdscnovq2ka_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__),options={insert:"head",singleton:!1};_node_modules_pnpm_style_loader_2_0_0_webpack_4_46_0_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_dhonik3q6ff6ozbzdscnovq2ka_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default.a,options),_node_modules_pnpm_css_loader_3_6_0_webpack_4_46_0_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_dhonik3q6ff6ozbzdscnovq2ka_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_4_46_0_node_modules_sass_loader_dist_cjs_js_ref_6_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default.a.locals},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return InsightRow})),__webpack_require__.d(__webpack_exports__,"b",(function(){return RecentInsights}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),kea__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js")),lib_dayjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/dayjs.ts"),lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function InsightRow(_ref){let{insight:insight}=_ref;const{reportInsightOpenedFromRecentInsightList:reportInsightOpenedFromRecentInsightList}=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__.e);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_9__.a,{title:insight.name||insight.derived_name||"Insight",subtitle:`Last modified ${Object(lib_dayjs__WEBPACK_IMPORTED_MODULE_3__.a)(insight.last_modified_at).fromNow()}`,prefix:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__.InsightIcon,{insight:insight}),to:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.insightView(insight.short_id),onClick:()=>{reportInsightOpenedFromRecentInsightList()}})}function RecentInsights(){const{recentInsights:recentInsights,recentInsightsLoading:recentInsightsLoading}=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_7__.a),{loadRecentInsights:loadRecentInsights}=Object(kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_7__.a);return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{loadRecentInsights()}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_4__.a,{title:"Your recently viewed insights",viewAllURL:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.savedInsights(),loading:recentInsightsLoading,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.a.savedInsights()},items:recentInsights.slice(0,5),renderRow:(insight,index)=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(InsightRow,{insight:insight},index)})})}try{InsightRow.displayName="InsightRow",InsightRow.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:InsightRow.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return RecordingRow})),__webpack_require__.d(__webpack_exports__,"a",(function(){return RecentRecordings}));var lib_dayjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/dayjs.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx")),lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/lemon-ui/ProfilePicture/index.ts"),scenes_persons_PersonHeader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/persons/PersonHeader.tsx"),scenes_session_recordings_playlist_sessionRecordingsListLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/utils.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),scenes_session_recordings_player_modal_SessionPlayerModal__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_session_recordings_player_modal_sessionPlayerModalLogic__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function RecordingRow(_ref){let{recording:recording}=_ref;const{openSessionPlayer:openSessionPlayer}=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(scenes_session_recordings_player_modal_sessionPlayerModalLogic__WEBPACK_IMPORTED_MODULE_13__.a),{reportRecordingOpenedFromRecentRecordingList:reportRecordingOpenedFromRecentRecordingList}=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_8__.e);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_14__.a,{title:Object(scenes_persons_PersonHeader__WEBPACK_IMPORTED_MODULE_5__.b)(recording.person),subtitle:`Recorded ${Object(lib_dayjs__WEBPACK_IMPORTED_MODULE_0__.a)(recording.start_time).fromNow()}`,prefix:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_4__.b,{name:Object(scenes_persons_PersonHeader__WEBPACK_IMPORTED_MODULE_5__.b)(recording.person)}),suffix:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"flex items-center justify-end text-default",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("span",{children:Object(lib_utils__WEBPACK_IMPORTED_MODULE_9__.O)(recording.recording_duration)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_10__.gc,{className:"text-2xl ml-2"})]}),onClick:()=>{openSessionPlayer({id:recording.id,matching_events:recording.matching_events}),reportRecordingOpenedFromRecentRecordingList()}})}function RecentRecordings(){const{currentTeam:currentTeam}=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_12__.a),sessionRecordingsListLogicInstance=Object(scenes_session_recordings_playlist_sessionRecordingsListLogic__WEBPACK_IMPORTED_MODULE_6__.e)({key:"projectHomepage"}),{sessionRecordings:sessionRecordings,sessionRecordingsResponseLoading:sessionRecordingsResponseLoading}=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(sessionRecordingsListLogicInstance);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(scenes_session_recordings_player_modal_SessionPlayerModal__WEBPACK_IMPORTED_MODULE_11__.a,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_3__.a,{title:"Recent recordings",viewAllURL:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.a.sessionRecordings(),loading:sessionRecordingsResponseLoading,emptyMessage:null!=currentTeam&&currentTeam.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.a.projectSettings()+"#recordings"},items:sessionRecordings.slice(0,5),renderRow:(recording,index)=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(RecordingRow,{recording:recording},index)})]})}try{RecordingRow.displayName="RecordingRow",RecordingRow.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:RecordingRow.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LockOutlined.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_LockOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_LockOutlined_LockOutlined=function LockOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_LockOutlined}))};icons_LockOutlined_LockOutlined.displayName="LockOutlined";__webpack_exports__.a=react.forwardRef(icons_LockOutlined_LockOutlined)},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".variant-form-list{font-size:13px;border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-top:16px}.variant-form-list .ant-form-item{min-height:32px}.variant-form-list .label-row{font-weight:700}.variant-form-list .label-row .ant-col{min-height:32px;display:flex;justify-content:space-between;align-items:center}.feature-flag-property-display{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.feature-flag-property-display .arrow-right{margin-right:-8px;margin-top:.25rem}.feature-flag-property-display .display-value{word-break:break-all}.condition-set-separator{color:var(--primary-alt);font-size:12px;font-weight:var(--font-semibold);margin-left:.5rem;margin-bottom:.5rem}.feature-flag-form-row{display:flex;justify-content:space-between;align-items:center;width:100%}.feature-flag-form-row .centered{display:flex;align-items:center;white-space:pre-wrap}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".FeatureFlagInstructionsHeader{flex-wrap:nowrap}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title{display:flex;justify-items:center}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title .FeatureFlagInstructionsHeader__header-title__icon{color:var(--text-muted-alt);margin-right:12px;font-size:1.6em}.FeatureFlagInstructionsHeader__option{display:flex;justify-items:center}.FeatureFlagInstructionsHeader__option .FeatureFlagInstructionsHeader__option__icon{margin-top:2px;margin-right:8px}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/JSONEditorInput.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".JsonEditorInput{position:relative}.JsonEditorInput .border{border-radius:var(--radius)}.JsonEditorInput .border .monaco-editor,.JsonEditorInput .border .monaco-editor .overflow-guard{border-radius:inherit}.JsonEditorInput .placeholder{position:absolute;top:0;left:0;bottom:0;height:100%;width:100%;pointer-events:none}.JsonEditorInput .placeholder .placeholderLabelContainer{display:flex;align-items:center;pointer-events:none;height:100%;padding-left:18px;color:grey}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".project-homepage .homepage-dashboard-header{margin-top:1rem;display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),module.exports=exports}}]);