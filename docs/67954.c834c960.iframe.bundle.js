"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[67954],{"../../frontend/src/scenes/feature-flags/FeatureFlags.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FeatureFlags:()=>FeatureFlags,OverViewTab:()=>OverViewTab,groupFilters:()=>groupFilters,scene:()=>scene});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.26.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/AccessControlledLemonButton.tsx"),lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/hedgehogs.tsx"),lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/components/MemberSelect.tsx"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_components_PropertyFilters_components_PropertyFiltersDisplay__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../frontend/src/lib/lemon-ui/Tooltip/index.ts"),lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../frontend/src/lib/utils/copyToClipboard.tsx"),lib_utils_deleteWithUndo__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../frontend/src/lib/utils/deleteWithUndo.tsx"),lib_utils_getAppContext__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("../../frontend/src/lib/utils/getAppContext.ts"),lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("../../frontend/src/lib/utils/stringWithWBR.tsx"),scenes_projectLogic__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("../../frontend/src/scenes/projectLogic.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("../../frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_models_groupsModel__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("../../frontend/src/models/groupsModel.ts"),_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts"),_types__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("../../frontend/src/types.ts"),_featureFlagLogic__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("../../frontend/src/scenes/feature-flags/featureFlagLogic.ts"),_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("../../frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:FeatureFlags,logic:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.bP,settingSectionId:"environment-feature-flags"};function OverViewTab(_ref){var _filters$type,_filters$active,_filters$created_by_i;let{flagPrefix="",searchPlaceholder="Search for feature flags",nouns=["feature flag","feature flags"]}=_ref,{currentProjectId}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_projectLogic__WEBPACK_IMPORTED_MODULE_24__.K),{aggregationLabel}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_models_groupsModel__WEBPACK_IMPORTED_MODULE_27__.$),flagLogic=(0,_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.bP)({flagPrefix}),{featureFlagsLoading,featureFlags,count,pagination,filters,shouldShowEmptyState}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(flagLogic),{updateFeatureFlag,loadFeatureFlags,setFeatureFlagsFilters}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(flagLogic),{hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_26__.userLogic),page=filters.page||1,startCount=(page-1)*_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.ac+1,endCount=page*_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.ac<count?page*_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.ac:count,tryInInsightsUrl=featureFlag=>{let query={kind:_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_28__.OH.InsightVizNode,source:{kind:_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_28__.OH.TrendsQuery,series:[{event:"$pageview",name:"$pageview",kind:_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_28__.OH.EventsNode,math:_types__WEBPACK_IMPORTED_MODULE_29__.vN.UniqueUsers}],breakdownFilter:{breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`}}};return scenes_urls__WEBPACK_IMPORTED_MODULE_25__.j.insightNew({query})},columns=[{title:"Key",dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(a,b)=>(a.key||"").localeCompare(b.key||""),render:function Render(_,featureFlag){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_17__.i,{to:featureFlag.id?scenes_urls__WEBPACK_IMPORTED_MODULE_25__.j.featureFlag(featureFlag.id):void 0,title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("span",{children:(0,lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_23__.Z)(featureFlag.key,17)}),!featureFlag.can_edit&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_19__.u,{title:"You don't have edit permissions for this feature flag.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconLock,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})})]}),description:featureFlag.name})}},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_29__.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_8__.D,{tags:tags,staticOnly:!0}):null}}]:[],(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_16__.JB)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_16__.rw)(),{title:"Release conditions",width:100,render:function Render(_,featureFlag){let releaseText=groupFilters(featureFlag.filters,void 0,aggregationLabel);return"string"==typeof releaseText&&releaseText.startsWith("100% of")?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.oe,{type:"highlight",children:releaseText}):releaseText}},{title:"Status",dataIndex:"active",sorter:(a,b)=>Number(a.active)-Number(b.active),width:100,render:function RenderActive(_,featureFlag){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)("div",{className:"flex justify-start gap-1",children:[featureFlag.performed_rollback?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.oe,{type:"warning",className:"uppercase",children:"Rolled Back"}):featureFlag.active?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.oe,{type:"success",className:"uppercase",children:"Enabled"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.oe,{type:"default",className:"uppercase",children:"Disabled"}),"STALE"===featureFlag.status&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_19__.u,{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("div",{className:"text-sm",children:"Flag at least 30 days old and fully rolled out"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("div",{className:"text-xs",children:"Make sure to remove any references to this flag in your code before deleting it."})]}),placement:"left",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.oe,{type:"warning",className:"uppercase cursor-default",children:"Stale"})})})]})}},{width:0,render:function Render(_,featureFlag){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_13__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__.J,{onClick:()=>{(0,lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_20__.v)(featureFlag.key,"feature flag key")},fullWidth:!0,children:"Copy feature flag key"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_29__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_29__.qR.FeatureFlag,"data-attr":`feature-flag-${featureFlag.key}-switch`,onClick:()=>{let newValue=!featureFlag.active;_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.dn.open({title:`${!0===newValue?"Enable":"Disable"} this flag?`,description:`This flag will be immediately ${!0===newValue?"rolled out to":"rolled back from"} the users matching the release conditions.`,primaryButton:{children:"Confirm",type:"primary",onClick:()=>{featureFlag.id&&updateFeatureFlag({id:featureFlag.id,payload:{active:newValue}})},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},id:`feature-flag-${featureFlag.id}-switch`,fullWidth:!0,children:[featureFlag.active?"Disable":"Enable"," feature flag"]}),featureFlag.id&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_29__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_29__.qR.FeatureFlag,fullWidth:!0,disabled:!featureFlag.can_edit,onClick:()=>{featureFlag.id&&((0,_featureFlagLogic__WEBPACK_IMPORTED_MODULE_30__.hk)({id:featureFlag.id}).mount(),(0,_featureFlagLogic__WEBPACK_IMPORTED_MODULE_30__.hk)({id:featureFlag.id}).actions.editFeatureFlag(!0),kea_router__WEBPACK_IMPORTED_MODULE_3__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_25__.j.featureFlag(featureFlag.id)))},children:"Edit"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_25__.j.featureFlagDuplicate(featureFlag.id),"data-attr":"feature-flag-duplicate",fullWidth:!0,children:"Duplicate feature flag"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__.J,{to:tryInInsightsUrl(featureFlag),"data-attr":"usage",fullWidth:!0,children:"Try out in Insights"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_14__.p,{}),featureFlag.id&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{userAccessLevel:featureFlag.user_access_level,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_29__.W$.Editor,resourceType:_types__WEBPACK_IMPORTED_MODULE_29__.qR.FeatureFlag,status:"danger",onClick:()=>{(0,lib_utils_deleteWithUndo__WEBPACK_IMPORTED_MODULE_21__.S)({endpoint:`projects/${currentProjectId}/feature_flags`,object:{name:featureFlag.key,id:featureFlag.id},callback:loadFeatureFlags}).catch(e=>{_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.UJ.error(`Failed to delete feature flag: ${e.detail}`)})},disabledReason:featureFlag.can_edit?(featureFlag.features?.length||0)>0?"This feature flag is in use with an early access feature. Delete the early access feature to delete this flag":(featureFlag.experiment_set?.length||0)>0?"This feature flag is linked to an experiment. Delete the experiment to delete this flag":null:"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",fullWidth:!0,children:"Delete feature flag"})]})})}}],filtersSection=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.DF,{className:"w-60",type:"search",placeholder:searchPlaceholder||"",onChange:search=>setFeatureFlagsFilters({search,page:1}),value:filters.search||"","data-attr":"feature-flag-search"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("b",{children:"Type"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Yv,{dropdownMatchSelectWidth:!1,size:"small",onChange:type=>{if(type){if("all"===type){if(filters){let{type,...restFilters}=filters;setFeatureFlagsFilters({...restFilters,page:1},!0)}}else setFeatureFlagsFilters({type,page:1})}},options:[{label:"All",value:"all"},{label:"Boolean",value:"boolean"},{label:"Multiple variants",value:"multivariant","data-attr":"feature-flag-select-type-option-multiple-variants"},{label:"Experiment",value:"experiment"},{label:"Remote config",value:"remote_config"}],value:null!==(_filters$type=filters.type)&&void 0!==_filters$type?_filters$type:"all","data-attr":"feature-flag-select-type"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("b",{children:"Status"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Yv,{dropdownMatchSelectWidth:!1,size:"small",onChange:status=>{if("all"===status){if(filters){let{active,...restFilters}=filters;setFeatureFlagsFilters({...restFilters,page:1},!0)}}else setFeatureFlagsFilters({active:status,page:1})},options:[{label:"All",value:"all","data-attr":"feature-flag-select-status-all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false","data-attr":"feature-flag-select-status-disabled"}],value:null!==(_filters$active=filters.active)&&void 0!==_filters$active?_filters$active:"all","data-attr":"feature-flag-select-status"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("span",{className:"ml-1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("b",{children:"Created by"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_7__.a,{defaultLabel:"Any user",value:null!==(_filters$created_by_i=filters.created_by_id)&&void 0!==_filters$created_by_i?_filters$created_by_i:null,onChange:user=>{if(user)setFeatureFlagsFilters({created_by_id:user.id,page:1});else if(filters){let{created_by_id,...restFilters}=filters;setFeatureFlagsFilters({...restFilters,page:1},!0)}},"data-attr":"feature-flag-select-created-by"})]})]});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_10__.C,{productName:"Feature flags",productKey:_types__WEBPACK_IMPORTED_MODULE_29__.Md.FEATURE_FLAGS,thingName:"feature flag",description:"Use feature flags to safely deploy and roll back new features in an easy-to-manage way. Roll variants out to certain groups, a percentage of users, or everyone all at once.",docsURL:"https://posthog.com/docs/feature-flags/manual",action:()=>kea_router__WEBPACK_IMPORTED_MODULE_3__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_25__.j.featureFlag("new")),isEmpty:shouldShowEmptyState,customHog:lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_6__.FeatureFlagHog}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("div",{children:filtersSection}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_14__.p,{className:"my-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("div",{className:"mb-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)("span",{className:"text-secondary ",children:count?`${startCount}${endCount-startCount>1?"-"+endCount:""} of ${count} flag${1===count?"":"s"}`:null})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_15__.g,{dataSource:featureFlags.results,columns:columns,rowKey:"key",defaultSorting:{columnKey:"created_at",order:-1},noSortingCancellation:!0,loading:featureFlagsLoading,pagination:pagination,nouns:nouns,"data-attr":"feature-flag-table",emptyState:"No results for this filter, change filter or create a new flag.",onSort:newSorting=>setFeatureFlagsFilters({order:newSorting?`${-1===newSorting.order?"-":""}${newSorting.columnKey}`:void 0,page:1})})]})}function FeatureFlags(){let{activeTab}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.bP),{setActiveTab}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.bP);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)("div",{className:"feature_flags",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_9__.m,{buttons:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_AccessControlledLemonButton__WEBPACK_IMPORTED_MODULE_4__.o,{type:"primary",to:scenes_urls__WEBPACK_IMPORTED_MODULE_25__.j.featureFlag("new"),"data-attr":"new-feature-flag",resourceType:_types__WEBPACK_IMPORTED_MODULE_29__.qR.FeatureFlag,minAccessLevel:_types__WEBPACK_IMPORTED_MODULE_29__.W$.Editor,userAccessLevel:lib_utils_getAppContext__WEBPACK_IMPORTED_MODULE_22__.Fj()?.resource_access_control?.[_types__WEBPACK_IMPORTED_MODULE_29__.qR.FeatureFlag],children:"New feature flag"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_18__.T,{activeKey:activeTab,onChange:newKey=>setActiveTab(newKey),tabs:[{key:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.id.OVERVIEW,label:"Overview",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(OverViewTab,{})},{key:_featureFlagsLogic__WEBPACK_IMPORTED_MODULE_31__.id.HISTORY,label:"History",content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_ActivityLog_ActivityLog__WEBPACK_IMPORTED_MODULE_5__.DA,{scope:_types__WEBPACK_IMPORTED_MODULE_29__.jc.FEATURE_FLAG})}],"data-attr":"feature-flags-tab-navigation"})]})}function groupFilters(filters,stringOnly,aggregationLabel){let aggregationTargetName=aggregationLabel&&null!=filters.aggregation_group_type_index?aggregationLabel(filters.aggregation_group_type_index).plural:"users",groups=filters.groups||[];if(0===groups.length||!groups.some(group=>0!==group.rollout_percentage))return`No ${aggregationTargetName}`;if(groups.some(group=>!group.properties?.length&&[null,void 0,100].includes(group.rollout_percentage)))return`100% of all ${aggregationTargetName}`;if(1===groups.length){let{properties,rollout_percentage=null}=groups[0];return(properties?.length||0)>0?stringOnly?`${null!=rollout_percentage?rollout_percentage:100}% of one group`:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)("span",{className:"shrink-0 mr-2",children:[null!=rollout_percentage?rollout_percentage:100,"% of"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(lib_components_PropertyFilters_components_PropertyFiltersDisplay__WEBPACK_IMPORTED_MODULE_11__.Z,{filters:properties})]}):null!==rollout_percentage?`${rollout_percentage}% of all ${aggregationTargetName}`:(console.error("A group with full rollout was not detected early"),`100% of all ${aggregationTargetName}`)}return"Multiple groups"}}}]);