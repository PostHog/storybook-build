(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{"./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx":function(ce,P,e){"use strict";e.d(P,"a",function(){return g});var N=e("./node_modules/core-js/modules/es.array.map.js"),F=e.n(N),V=e("./node_modules/react/index.js"),n=e.n(V),Q=e("./node_modules/clsx/dist/clsx.m.js"),B=e("./node_modules/kea/lib/index.esm.js"),X=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),b=e("./frontend/src/lib/components/LemonButton/index.ts"),Z=e("./node_modules/antd/es/popconfirm/index.js"),D=e("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),U=e("./frontend/src/lib/components/LemonRow/index.ts"),I=e("./frontend/src/lib/components/icons.tsx"),k=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),A=e("./node_modules/kea-forms/lib/index.js"),t=e.n(A),w=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),G=e("./frontend/src/lib/forms/Field.tsx");function s(a){var m=a.numberOfResults,i=a.isSearching,o=a.isAddingEntry,E=a.type;return m>0?null:i?n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized ",E===D.a.RECORDING_DOMAINS?"domains":"URLs"," that match your search."):o?null:n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},E===D.a.RECORDING_DOMAINS?"No domains are specified, so recordings will be authorized on all domains.":"There are no authorized urls. Add one to get started.")}function C(a){var m=a.actionId,i=a.type,o=Object(D.c)({actionId:m,type:i}),E=Object(B.useValues)(o),r=E.isProposedUrlSubmitting,c=Object(B.useActions)(o),d=c.cancelProposingUrl;return n.a.createElement(A.Form,{logic:D.c,props:{actionId:m,type:i},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2"},n.a.createElement(G.a,{name:"url"},n.a.createElement(w.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),n.a.createElement("div",{className:"flex justify-end gap-2"},n.a.createElement(b.a,{type:"secondary",onClick:d},"Cancel"),n.a.createElement(b.a,{htmlType:"submit",type:"primary",disabled:r,"data-attr":"url-save"},"Save")))}function g(a){var m=a.actionId,i=a.type,o=a.addText,E=o===void 0?"Add":o,r=Object(D.c)({actionId:m,type:i}),c=Object(B.useValues)(r),d=c.urlsKeyed,T=c.suggestionsLoading,u=c.searchTerm,f=c.launchUrl,h=c.editUrlIndex,p=c.isAddUrlFormVisible,L=c.onlyAllowDomains,O=Object(B.useActions)(r),R=O.addUrl,$=O.removeUrl,se=O.setSearchTerm,oe=O.newUrl,re=O.setEditUrlIndex;return n.a.createElement("div",null,n.a.createElement("div",{className:"flex items-center mb-4 gap-2 justify-between"},n.a.createElement(w.a,{type:"search",placeholder:"Search for authorized ".concat(L?"domains":"URLs"),onChange:se,value:u}),n.a.createElement(b.a,{onClick:oe,type:"secondary",icon:n.a.createElement(I.IconPlus,null),"data-attr":"toolbar-add-url"},E)),T?n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large",key:-1},n.a.createElement(k.a,{className:"text-xl"})):n.a.createElement("div",{className:"space-y-2"},p&&n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large"},n.a.createElement(C,{type:i,actionId:m})),n.a.createElement(s,{numberOfResults:d.length,isSearching:u.length>0,isAddingEntry:p,type:i}),d.map(function(y,Y){return n.a.createElement("div",{key:Y,className:Object(Q.a)("border rounded flex items-center py-2 px-4 min-h-14")},h===Y?n.a.createElement(C,{type:i,actionId:m}):n.a.createElement(n.a.Fragment,null,y.type==="suggestion"&&n.a.createElement(X.a,{type:"highlight",className:"mr-4 uppercase"},"Suggestion"),n.a.createElement("span",{title:y.url,className:"flex-1 truncate"},y.url),n.a.createElement("div",{className:"Actions flex space-x-2 shrink-0"},y.type==="suggestion"?n.a.createElement(b.a,{onClick:function(){return R(y.url)},icon:n.a.createElement(I.IconPlus,null),"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{icon:n.a.createElement(I.IconOpenInApp,null),to:f(y.url),targetBlank:!0,tooltip:i===D.a.TOOLBAR_URLS?"Launch toolbar":"Launch url",center:!0,className:"ActionButton","data-attr":"toolbar-open"},"Launch"),n.a.createElement(b.a,{icon:n.a.createElement(I.IconEdit,null),onClick:function(){return re(y.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),n.a.createElement(Z.a,{placement:"topRight",title:n.a.createElement(n.a.Fragment,null,"Are you sure you want to remove this authorized"," ",L?"domain":"URL","?"),onConfirm:function(){return $(Y)}},n.a.createElement(b.a,{icon:n.a.createElement(I.IconDelete,null),tooltip:"Remove ".concat(L?"domain":"URL"),center:!0,className:"ActionButton"}))))))})))}try{g.displayName="AuthorizedUrlList",g.__docgenInfo={description:"",displayName:"AuthorizedUrlList",props:{actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"TOOLBAR_URLS"'},{value:'"RECORDING_DOMAINS"'}]}},addText:{defaultValue:{value:"Add"},description:"",name:"addText",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"]={docgenInfo:g.__docgenInfo,name:"AuthorizedUrlList",path:"frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"})}catch(a){}},"./frontend/src/scenes/actions/ActionsTable.tsx":function(ce,P,e){"use strict";e.r(P),e.d(P,"scene",function(){return ve}),e.d(P,"ActionsTable",function(){return de});var N=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),F=e.n(N),V=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),n=e.n(V),Q=e("./node_modules/core-js/modules/es.array.map.js"),B=e("./node_modules/core-js/modules/es.regexp.exec.js"),X=e("./node_modules/core-js/modules/es.string.search.js"),b=e("./node_modules/core-js/modules/es.array.concat.js"),Z=e("./node_modules/core-js/modules/es.function.name.js"),D=e("./node_modules/core-js/modules/es.array.slice.js"),U=e("./node_modules/core-js/modules/es.number.constructor.js"),I=e("./node_modules/core-js/modules/es.array.filter.js"),k=e("./node_modules/core-js/modules/es.object.to-string.js"),A=e("./node_modules/react/index.js"),t=e.n(A),w=e("./frontend/src/scenes/actions/Actions.scss"),G=e("./frontend/src/lib/components/Link.tsx"),s=e("./node_modules/antd/es/radio/index.js"),C=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),g=e("./frontend/src/lib/utils.tsx"),a=e("./node_modules/kea/lib/index.esm.js"),m=e("./frontend/src/models/actionsModel.ts"),i=e("./node_modules/kea-router/lib/index.js"),o=e("./frontend/src/scenes/urls.ts"),E=e("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),r=e("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),c=e("./frontend/src/lib/components/icons.tsx"),d=e("./frontend/src/lib/components/LemonButton/index.ts"),T=e("./frontend/@posthog/lemon-ui/src/index.ts");function u(){var ee=Object(A.useState)(!1),_=n()(ee,2),S=_[0],x=_[1],le=Object(A.useState)(!1),te=n()(le,2),ne=te[0],W=te[1];return t.a.createElement(t.a.Fragment,null,t.a.createElement(d.a,{type:"primary",onClick:function(){return x(!0)},"data-attr":"create-action"},"New action"),t.a.createElement(T.LemonModal,{isOpen:S,onClose:function(){x(!1),W(!1)},title:"Create new action",footer:t.a.createElement(t.a.Fragment,null,ne&&t.a.createElement(d.a,{key:"back-button",type:"secondary",onClick:function(){return W(!1)}},"Back"),t.a.createElement(d.a,{key:"cancel-button",type:"secondary",onClick:function(){x(!1),W(!1)}},"Cancel"))},ne?t.a.createElement("div",{style:{maxWidth:"40rem"}},t.a.createElement(E.a,{type:r.a.TOOLBAR_URLS})):t.a.createElement("div",{className:"space-y-2"},t.a.createElement(d.a,{type:"secondary",icon:t.a.createElement(c.IconMagnifier,null),onClick:function(){return W(!0)},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect"},"Inspect element on your site"),t.a.createElement(d.a,{type:"secondary",icon:t.a.createElement(c.IconEdit,null),onClick:function(){i.router.actions.push(o.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview"},"From event or pageview"))))}var f=e("./frontend/src/types.ts"),h=e("./node_modules/fuse.js/dist/fuse.esm.js"),p=e("./frontend/src/scenes/userLogic.ts"),L=e("./frontend/src/scenes/teamLogic.tsx"),O=e("./frontend/src/lib/api.ts"),R=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),$=e("./frontend/src/lib/components/LemonTable/index.ts"),se=e("./frontend/src/lib/components/LemonDivider/index.ts"),oe=e("./frontend/src/lib/components/LemonButton/More.tsx"),re=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),y=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),Y=e("./frontend/src/lib/components/PageHeader.tsx"),q=Object(a.kea)([Object(a.path)(["scenes","actions","actionsLogic"]),Object(a.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Data Management",path:o.a.eventDefinitions()},{name:"Actions",path:o.a.actions()}]}]})]),fe=function(_,S){return new h.a(_,{keys:["name","url"],threshold:.3}).search(S).map(function(x){return x.item})},ve={component:de,logic:q};function de(){var ee=Object(a.useValues)(L.a),_=ee.currentTeam,S=Object(a.useValues)(Object(m.a)({params:"include_count=1"})),x=S.actions,le=S.actionsLoading,te=Object(a.useActions)(m.a),ne=te.loadActions,W=Object(A.useState)(""),M=n()(W,2),ae=M[0],ge=M[1],pe=Object(A.useState)(!1),ue=n()(pe,2),me=ue[0],Oe=ue[1],Ee=Object(a.useValues)(p.a),ie=Ee.user,he=Ee.hasAvailableFeature,ye=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(l,v){return(l.name||"").localeCompare(v.name||"")},render:function(l,v,K){return t.a.createElement(G.a,{"data-attr":"action-link-"+K,to:o.a.action(v.id),className:"row-name"},l||t.a.createElement("i",null,"Unnamed action"))}}].concat(F()(he(f.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(l){return t.a.createElement(re.a,{tags:l,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(l,v){var K;return t.a.createElement("span",null,(K=v.steps)!==null&&K!==void 0&&K.length?v.steps.map(function(J){return t.a.createElement("div",{key:J.id},function(){var z=Object(g.Cb)(J.url||"");switch(z=z.slice(0,40)+(z.length>40?"...":""),J.event){case"$autocapture":return"Autocapture";case"$pageview":switch(J.url_matching){case"regex":return t.a.createElement(t.a.Fragment,null,"Page view URL matches regex ",t.a.createElement("strong",null,z));case"exact":return t.a.createElement(t.a.Fragment,null,"Page view URL matches exactly ",t.a.createElement("strong",null,z));default:return t.a.createElement(t.a.Fragment,null,"Page view URL contains ",t.a.createElement("strong",null,z))}default:return t.a.createElement(t.a.Fragment,null,"Event: ",t.a.createElement("strong",null,J.event))}}())}):t.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(R.b)(),Object(R.a)()],F()(_!=null&&_.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(l,v){return Number(l.post_to_slack)-Number(v.post_to_slack)},render:function(l){return l?t.a.createElement(C.a,null):null}}]:[]),[{width:0,render:function(l,v){return t.a.createElement(oe.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(d.a,{status:"stealth",to:o.a.action(v.id),fullWidth:!0},"Edit"),t.a.createElement(d.a,{status:"stealth",to:Object(i.combineUrl)(o.a.insightNew({insight:f.C.TRENDS,interval:"day",display:f.j.ActionsLineGraph,actions:[{id:v.id,name:v.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),t.a.createElement(se.a,null),t.a.createElement(d.a,{status:"danger",onClick:function(){return Object(g.x)({endpoint:O.b.actions.determineDeleteEndpoint(),object:v,callback:ne})},fullWidth:!0},"Delete action"))})}}]),H=x;return ae&&ae!==""&&(H=fe(H,ae)),me&&(H=H.filter(function(j){var l;return((l=j.created_by)===null||l===void 0?void 0:l.uuid)===(ie==null?void 0:ie.uuid)})),t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement(Y.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0,buttons:t.a.createElement(u,null)}),t.a.createElement(y.a,{tab:y.b.Actions}),t.a.createElement("div",{className:"flex items-center justify-between gap-2 mb-4"},t.a.createElement(T.LemonInput,{type:"search",placeholder:"Search for actions",onChange:ge,value:ae}),t.a.createElement(s.a.Group,{buttonStyle:"solid",value:me,onChange:function(l){return Oe(l.target.value)}},t.a.createElement(s.a.Button,{value:!1},"All actions"),t.a.createElement(s.a.Button,{value:!0},"My actions"))),t.a.createElement($.a,{columns:ye,loading:le,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:H,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(ce,P,e){"use strict";e.d(P,"b",function(){return r}),e.d(P,"a",function(){return T});var N=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=e.n(N),V=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=e.n(V),Q=e("./node_modules/core-js/modules/es.array.iterator.js"),B=e.n(Q),X=e("./node_modules/core-js/modules/es.object.to-string.js"),b=e.n(X),Z=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),D=e.n(Z),U=e("./node_modules/core-js/modules/es.object.from-entries.js"),I=e.n(U),k=e("./node_modules/core-js/modules/es.array.map.js"),A=e.n(k),t=e("./node_modules/core-js/modules/es.object.entries.js"),w=e.n(t),G=e("./node_modules/react/index.js"),s=e.n(G),C=e("./node_modules/kea/lib/index.esm.js"),g=e("./node_modules/antd/es/tabs/index.js"),a=e("./frontend/src/scenes/urls.ts"),m=e("./frontend/src/lib/components/Tooltip.tsx"),i=e("./frontend/src/lib/components/icons.tsx"),o=e("./frontend/src/lib/components/TitleWithIcon.tsx"),E,r;(function(u){u.Actions="actions",u.EventDefinitions="events",u.EventPropertyDefinitions="properties"})(r||(r={}));var c=(E={},n()(E,r.EventPropertyDefinitions,a.a.eventPropertyDefinitions()),n()(E,r.EventDefinitions,a.a.eventDefinitions()),n()(E,r.Actions,a.a.actions()),E),d=Object(C.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(f){return{tab:f}}},reducers:{tab:[r.EventDefinitions,{setTab:function(f,h){var p=h.tab;return p}}]},actionToUrl:function(){return{setTab:function(h){var p=h.tab;return c[p]||a.a.events()}}},urlToAction:function(f){var h=f.actions,p=f.values;return Object.fromEntries(Object.entries(c).map(function(L){var O=F()(L,2),R=O[0],$=O[1];return[$,function(){p.tab!==R&&h.setTab(R)}]}))}});function T(u){var f=u.tab,h=Object(C.useActions)(d),p=h.setTab;return s.a.createElement(g.a,{tabPosition:"top",animated:!1,activeKey:f,onTabClick:function(O){return p(O)}},s.a.createElement(g.a.TabPane,{tab:s.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:r.EventDefinitions}),s.a.createElement(g.a.TabPane,{tab:s.a.createElement(o.a,{icon:s.a.createElement(m.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},s.a.createElement(i.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:r.Actions}),s.a.createElement(g.a.TabPane,{tab:s.a.createElement(o.a,{icon:s.a.createElement(m.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},s.a.createElement(i.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:r.EventPropertyDefinitions}))}try{T.displayName="DataManagementPageTabs",T.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:T.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(u){}}}]);
