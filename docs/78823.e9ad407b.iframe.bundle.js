"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[78823],{"./node_modules/.pnpm/posthog-js-lite@3.0.0/node_modules/posthog-js-lite/lib/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{let defaultGenerator,localStore,sessionStore;async function retriable(fn,props){let lastError=null;for(let i=0;i<props.retryCount+1;i++){i>0&&await new Promise(r=>setTimeout(r,props.retryDelay));try{let res=await fn();return res}catch(e){if(lastError=e,!props.retryCheck(e))throw e}}throw lastError}function currentTimestamp(){return new Date().getTime()}function currentISOTime(){return new Date().toISOString()}__webpack_require__.d(__webpack_exports__,{Z:()=>PostHog}),function(PostHogPersistedProperty){PostHogPersistedProperty.AnonymousId="anonymous_id",PostHogPersistedProperty.DistinctId="distinct_id",PostHogPersistedProperty.Props="props",PostHogPersistedProperty.FeatureFlags="feature_flags",PostHogPersistedProperty.FeatureFlagPayloads="feature_flag_payloads",PostHogPersistedProperty.OverrideFeatureFlags="override_feature_flags",PostHogPersistedProperty.Queue="queue",PostHogPersistedProperty.OptedOut="opted_out",PostHogPersistedProperty.SessionId="session_id",PostHogPersistedProperty.SessionLastTimestamp="session_timestamp",PostHogPersistedProperty.PersonProperties="person_properties",PostHogPersistedProperty.GroupProperties="group_properties",PostHogPersistedProperty.InstalledAppBuild="installed_app_build",PostHogPersistedProperty.InstalledAppVersion="installed_app_version"}(PostHogPersistedProperty||(PostHogPersistedProperty={}));let f=String.fromCharCode,keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",baseReverseDic={},LZString={compressToBase64:function(input){if(null==input)return"";let res=LZString._compress(input,6,function(a){return keyStrBase64.charAt(a)});switch(res.length%4){default:case 0:return res;case 1:return res+"===";case 2:return res+"==";case 3:return res+"="}},decompressFromBase64:function(input){return null==input?"":""==input?null:LZString._decompress(input.length,32,function(index){return function(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(let i=0;i<alphabet.length;i++)baseReverseDic[alphabet][alphabet.charAt(i)]=i}return baseReverseDic[alphabet][character]}(keyStrBase64,input.charAt(index))})},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f(a)})},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(null==uncompressed)return"";let context_dictionary={},context_dictionaryToCreate={},context_data=[],i,value,context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1)if(context_c=uncompressed.charAt(ii),Object.prototype.hasOwnProperty.call(context_dictionary,context_c)||(context_dictionary[context_c]=context_dictSize++,context_dictionaryToCreate[context_c]=!0),context_wc=context_w+context_c,Object.prototype.hasOwnProperty.call(context_dictionary,context_wc))context_w=context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(256>context_w.charCodeAt(0)){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(i=0,value=context_w.charCodeAt(0);i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(i=0,value=1;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(i=0,value=context_w.charCodeAt(0);i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(i=0,value=context_dictionary[context_w];i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),context_dictionary[context_wc]=context_dictSize++,context_w=String(context_c)}if(""!==context_w){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(256>context_w.charCodeAt(0)){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(i=0,value=context_w.charCodeAt(0);i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(i=0,value=1;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(i=0,value=context_w.charCodeAt(0);i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(i=0,value=context_dictionary[context_w];i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++)}for(i=0,value=2;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;for(;;){if(context_data_val<<=1,context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}context_data_position++}return context_data.join("")},decompress:function(compressed){return null==compressed?"":""==compressed?null:LZString._decompress(compressed.length,32768,function(index){return compressed.charCodeAt(index)})},_decompress:function(length,resetValue,getNextValue){let dictionary=[],result=[],data={val:getNextValue(0),position:resetValue,index:1},enlargeIn=4,dictSize=4,numBits=3,entry="",i,w,bits,resb,maxpower,power,c;for(i=0;i<3;i+=1)dictionary[i]=i;for(bits=0,maxpower=4,power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;switch(bits){case 0:for(bits=0,maxpower=256,power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;c=f(bits);break;case 1:for(bits=0,maxpower=65536,power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;c=f(bits);break;case 2:return""}for(dictionary[3]=c,w=c,result.push(c);;){if(data.index>length)return"";for(bits=0,maxpower=Math.pow(2,numBits),power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;switch(c=bits){case 0:for(bits=0,maxpower=256,power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;dictionary[dictSize++]=f(bits),c=dictSize-1,enlargeIn--;break;case 1:for(bits=0,maxpower=65536,power=1;power!=maxpower;)resb=data.val&data.position,data.position>>=1,0==data.position&&(data.position=resetValue,data.val=getNextValue(data.index++)),bits|=(resb>0?1:0)*power,power<<=1;dictionary[dictSize++]=f(bits),c=dictSize-1,enlargeIn--;break;case 2:return result.join("")}if(0==enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++),dictionary[c])entry=dictionary[c];else{if(c!==dictSize)return null;entry=w+w.charAt(0)}result.push(entry),dictionary[dictSize++]=w+entry.charAt(0),enlargeIn--,w=entry,0==enlargeIn&&(enlargeIn=Math.pow(2,numBits),numBits++)}}};class SimpleEventEmitter{constructor(){this.events={},this.events={}}on(event,listener){return this.events[event]||(this.events[event]=[]),this.events[event].push(listener),()=>{this.events[event]=this.events[event].filter(x=>x!==listener)}}emit(event,payload){for(let listener of this.events[event]||[])listener(payload);for(let listener of this.events["*"]||[])listener(event,payload)}}/**
 * uuidv7: An experimental implementation of the proposed UUID Version 7
 *
 * @license Apache-2.0
 * @copyright 2021-2023 LiosK
 * @packageDocumentation
 */let DIGITS="0123456789abcdef";class UUID{constructor(bytes){this.bytes=bytes}static ofInner(bytes){if(16===bytes.length)return new UUID(bytes);throw TypeError("not 128-bit length")}static fromFieldsV7(unixTsMs,randA,randBHi,randBLo){if(!Number.isInteger(unixTsMs)||!Number.isInteger(randA)||!Number.isInteger(randBHi)||!Number.isInteger(randBLo)||unixTsMs<0||randA<0||randBHi<0||randBLo<0||unixTsMs>0xffffffffffff||randA>4095||randBHi>1073741823||randBLo>4294967295)throw RangeError("invalid field value");let bytes=new Uint8Array(16);return bytes[0]=unixTsMs/1099511627776,bytes[1]=unixTsMs/4294967296,bytes[2]=unixTsMs/16777216,bytes[3]=unixTsMs/65536,bytes[4]=unixTsMs/256,bytes[5]=unixTsMs,bytes[6]=112|randA>>>8,bytes[7]=randA,bytes[8]=128|randBHi>>>24,bytes[9]=randBHi>>>16,bytes[10]=randBHi>>>8,bytes[11]=randBHi,bytes[12]=randBLo>>>24,bytes[13]=randBLo>>>16,bytes[14]=randBLo>>>8,bytes[15]=randBLo,new UUID(bytes)}static parse(uuid){let hex;switch(uuid.length){case 32:hex=/^[0-9a-f]{32}$/i.exec(uuid)?.[0];break;case 36:hex=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(uuid)?.slice(1,6).join("");break;case 38:hex=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(uuid)?.slice(1,6).join("");break;case 45:hex=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(uuid)?.slice(1,6).join("")}if(hex){let inner=new Uint8Array(16);for(let i=0;i<16;i+=4){let n=parseInt(hex.substring(2*i,2*i+8),16);inner[i+0]=n>>>24,inner[i+1]=n>>>16,inner[i+2]=n>>>8,inner[i+3]=n}return new UUID(inner)}throw SyntaxError("could not parse UUID string")}toString(){let text="";for(let i=0;i<this.bytes.length;i++)text+=DIGITS.charAt(this.bytes[i]>>>4)+DIGITS.charAt(15&this.bytes[i]),(3===i||5===i||7===i||9===i)&&(text+="-");return text}toHex(){let text="";for(let i=0;i<this.bytes.length;i++)text+=DIGITS.charAt(this.bytes[i]>>>4)+DIGITS.charAt(15&this.bytes[i]);return text}toJSON(){return this.toString()}getVariant(){let n=this.bytes[8]>>>4;if(n<0)throw Error("unreachable");if(n<=7)return this.bytes.every(e=>0===e)?"NIL":"VAR_0";if(n<=11)return"VAR_10";if(n<=13)return"VAR_110";if(n<=15)return this.bytes.every(e=>255===e)?"MAX":"VAR_RESERVED";throw Error("unreachable")}getVersion(){return"VAR_10"===this.getVariant()?this.bytes[6]>>>4:void 0}clone(){return new UUID(this.bytes.slice(0))}equals(other){return 0===this.compareTo(other)}compareTo(other){for(let i=0;i<16;i++){let diff=this.bytes[i]-other.bytes[i];if(0!==diff)return Math.sign(diff)}return 0}}class V7Generator{constructor(randomNumberGenerator){this.timestamp=0,this.counter=0,this.random=randomNumberGenerator??getDefaultRandom()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(unixTsMs,rollbackAllowance){let value=this.generateOrAbortCore(unixTsMs,rollbackAllowance);return void 0===value&&(this.timestamp=0,value=this.generateOrAbortCore(unixTsMs,rollbackAllowance)),value}generateOrAbortCore(unixTsMs,rollbackAllowance){if(!Number.isInteger(unixTsMs)||unixTsMs<1||unixTsMs>0xffffffffffff)throw RangeError("`unixTsMs` must be a 48-bit positive integer");if(rollbackAllowance<0||rollbackAllowance>0xffffffffffff)throw RangeError("`rollbackAllowance` out of reasonable range");if(unixTsMs>this.timestamp)this.timestamp=unixTsMs,this.resetCounter();else{if(!(unixTsMs+rollbackAllowance>=this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return UUID.fromFieldsV7(this.timestamp,Math.trunc(this.counter/1073741824),this.counter&1073741824-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}generateV4(){let bytes=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return bytes[6]=64|bytes[6]>>>4,bytes[8]=128|bytes[8]>>>2,UUID.ofInner(bytes)}}let getDefaultRandom=()=>({nextUint32:()=>65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random())}),uuidv7=()=>uuidv7obj().toString(),uuidv7obj=()=>(defaultGenerator||(defaultGenerator=new V7Generator)).generate();class PostHogFetchHttpError extends Error{constructor(response){super("HTTP error while fetching PostHog: "+response.status),this.response=response,this.name="PostHogFetchHttpError"}}class PostHogFetchNetworkError extends Error{constructor(error){super("Network error while fetching PostHog",error instanceof Error?{cause:error}:{}),this.error=error,this.name="PostHogFetchNetworkError"}}function isPostHogFetchError(err){return"object"==typeof err&&(err instanceof PostHogFetchHttpError||err instanceof PostHogFetchNetworkError)}class PostHogCoreStateless{constructor(apiKey,options){var url;this.flushPromise=null,this.disableGeoip=!0,this.disabled=!1,this.defaultOptIn=!0,this.pendingPromises={},this._events=new SimpleEventEmitter,this._isInitialized=!1,function(truthyValue,message){if(!truthyValue)throw Error(message)}(apiKey,"You must pass your PostHog project's api key."),this.apiKey=apiKey,this.host=(url=options?.host||"https://app.posthog.com",url?.replace(/\/+$/,"")),this.flushAt=options?.flushAt?Math.max(options?.flushAt,1):20,this.maxBatchSize=Math.max(this.flushAt,options?.maxBatchSize??100),this.maxQueueSize=Math.max(this.flushAt,options?.maxQueueSize??1e3),this.flushInterval=options?.flushInterval??1e4,this.captureMode=options?.captureMode||"form",this.defaultOptIn=options?.defaultOptIn??!0,this._retryOptions={retryCount:options?.fetchRetryCount??3,retryDelay:options?.fetchRetryDelay??3e3,retryCheck:isPostHogFetchError},this.requestTimeout=options?.requestTimeout??1e4,this.featureFlagsRequestTimeoutMs=options?.featureFlagsRequestTimeoutMs??3e3,this.disableGeoip=options?.disableGeoip??!0,this.disabled=options?.disabled??!1,this._initPromise=Promise.resolve(),this._isInitialized=!0}wrap(fn){if(this.disabled){this.isDebug&&console.warn("[PostHog] The client is disabled");return}if(this._isInitialized)return fn();this._initPromise.then(()=>fn())}getCommonEventProperties(){return{$lib:this.getLibraryId(),$lib_version:this.getLibraryVersion()}}get optedOut(){return this.getPersistedProperty(PostHogPersistedProperty.OptedOut)??!this.defaultOptIn}async optIn(){this.wrap(()=>{this.setPersistedProperty(PostHogPersistedProperty.OptedOut,!1)})}async optOut(){this.wrap(()=>{this.setPersistedProperty(PostHogPersistedProperty.OptedOut,!0)})}on(event,cb){return this._events.on(event,cb)}debug(enabled=!0){if(this.removeDebugCallback?.(),enabled){let removeDebugCallback=this.on("*",(event,payload)=>console.log("PostHog Debug",event,payload));this.removeDebugCallback=()=>{removeDebugCallback(),this.removeDebugCallback=void 0}}}get isDebug(){return!!this.removeDebugCallback}buildPayload(payload){return{distinct_id:payload.distinct_id,event:payload.event,properties:{...payload.properties||{},...this.getCommonEventProperties()}}}addPendingPromise(promise){let promiseUUID=uuidv7();return this.pendingPromises[promiseUUID]=promise,promise.catch(()=>{}).finally(()=>{delete this.pendingPromises[promiseUUID]}),promise}identifyStateless(distinctId,properties,options){this.wrap(()=>{let payload={...this.buildPayload({distinct_id:distinctId,event:"$identify",properties})};this.enqueue("identify",payload,options)})}captureStateless(distinctId,event,properties,options){this.wrap(()=>{let payload=this.buildPayload({distinct_id:distinctId,event,properties});this.enqueue("capture",payload,options)})}aliasStateless(alias,distinctId,properties,options){this.wrap(()=>{let payload=this.buildPayload({event:"$create_alias",distinct_id:distinctId,properties:{...properties||{},distinct_id:distinctId,alias}});this.enqueue("alias",payload,options)})}groupIdentifyStateless(groupType,groupKey,groupProperties,options,distinctId,eventProperties){this.wrap(()=>{let payload=this.buildPayload({distinct_id:distinctId||`$${groupType}_${groupKey}`,event:"$groupidentify",properties:{$group_type:groupType,$group_key:groupKey,$group_set:groupProperties||{},...eventProperties||{}}});this.enqueue("capture",payload,options)})}async getDecide(distinctId,groups={},personProperties={},groupProperties={},extraPayload={}){await this._initPromise;let url=`${this.host}/decide/?v=3`,fetchOptions={method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"},body:JSON.stringify({token:this.apiKey,distinct_id:distinctId,groups,person_properties:personProperties,group_properties:groupProperties,...extraPayload})};return this.fetchWithRetry(url,fetchOptions,{retryCount:0},this.featureFlagsRequestTimeoutMs).then(response=>response.json()).catch(error=>{this._events.emit("error",error)})}async getFeatureFlagStateless(key,distinctId,groups={},personProperties={},groupProperties={},disableGeoip){await this._initPromise;let featureFlags=await this.getFeatureFlagsStateless(distinctId,groups,personProperties,groupProperties,disableGeoip);if(!featureFlags)return;let response=featureFlags[key];return void 0===response&&(response=!1),response}async getFeatureFlagPayloadStateless(key,distinctId,groups={},personProperties={},groupProperties={},disableGeoip){await this._initPromise;let payloads=await this.getFeatureFlagPayloadsStateless(distinctId,groups,personProperties,groupProperties,disableGeoip);if(!payloads)return;let response=payloads[key];return void 0===response?null:this._parsePayload(response)}async getFeatureFlagPayloadsStateless(distinctId,groups={},personProperties={},groupProperties={},disableGeoip){await this._initPromise;let payloads=(await this.getFeatureFlagsAndPayloadsStateless(distinctId,groups,personProperties,groupProperties,disableGeoip)).payloads;return payloads?Object.fromEntries(Object.entries(payloads).map(([k,v])=>[k,this._parsePayload(v)])):payloads}_parsePayload(response){try{return JSON.parse(response)}catch{return response}}async getFeatureFlagsStateless(distinctId,groups={},personProperties={},groupProperties={},disableGeoip){return await this._initPromise,(await this.getFeatureFlagsAndPayloadsStateless(distinctId,groups,personProperties,groupProperties,disableGeoip)).flags}async getFeatureFlagsAndPayloadsStateless(distinctId,groups={},personProperties={},groupProperties={},disableGeoip){await this._initPromise;let extraPayload={};(disableGeoip??this.disableGeoip)&&(extraPayload.geoip_disable=!0);let decideResponse=await this.getDecide(distinctId,groups,personProperties,groupProperties,extraPayload),flags=decideResponse?.featureFlags,payloads=decideResponse?.featureFlagPayloads;return{flags,payloads}}enqueue(type,_message,options){this.wrap(()=>{if(this.optedOut){this._events.emit(type,"Library is disabled. Not sending event. To re-enable, call posthog.optIn()");return}let message={..._message,type:type,library:this.getLibraryId(),library_version:this.getLibraryVersion(),timestamp:options?.timestamp?options?.timestamp:currentISOTime(),uuid:options?.uuid?options.uuid:uuidv7()},addGeoipDisableProperty=options?.disableGeoip??this.disableGeoip;addGeoipDisableProperty&&(message.properties||(message.properties={}),message.properties.$geoip_disable=!0),message.distinctId&&(message.distinct_id=message.distinctId,delete message.distinctId);let queue=this.getPersistedProperty(PostHogPersistedProperty.Queue)||[];queue.length>=this.maxQueueSize&&(queue.shift(),console.info("Queue is full, the oldest event is dropped.")),queue.push({message}),this.setPersistedProperty(PostHogPersistedProperty.Queue,queue),this._events.emit(type,message),queue.length>=this.flushAt&&this.flushBackground(),this.flushInterval&&!this._flushTimer&&(this._flushTimer=function(fn,timeout){let t=setTimeout(fn,timeout);return t?.unref&&t?.unref(),t}(()=>this.flushBackground(),this.flushInterval))})}clearFlushTimer(){this._flushTimer&&(clearTimeout(this._flushTimer),this._flushTimer=void 0)}flushBackground(){this.flush().catch(()=>{})}async flush(){return this.flushPromise||(this.flushPromise=this._flush().finally(()=>{this.flushPromise=null}),this.addPendingPromise(this.flushPromise)),this.flushPromise}getCustomHeaders(){let customUserAgent=this.getCustomUserAgent(),headers={};return customUserAgent&&""!==customUserAgent&&(headers["User-Agent"]=customUserAgent),headers}async _flush(){this.clearFlushTimer(),await this._initPromise;let queue=this.getPersistedProperty(PostHogPersistedProperty.Queue)||[];if(!queue.length)return[];let items=queue.slice(0,this.maxBatchSize),messages=items.map(item=>item.message),persistQueueChange=()=>{let refreshedQueue=this.getPersistedProperty(PostHogPersistedProperty.Queue)||[];this.setPersistedProperty(PostHogPersistedProperty.Queue,refreshedQueue.slice(items.length))},data={api_key:this.apiKey,batch:messages,sent_at:currentISOTime()},payload=JSON.stringify(data),url="form"===this.captureMode?`${this.host}/e/?ip=1&_=${currentTimestamp()}&v=${this.getLibraryVersion()}`:`${this.host}/batch/`,fetchOptions="form"===this.captureMode?{method:"POST",mode:"no-cors",credentials:"omit",headers:{...this.getCustomHeaders(),"Content-Type":"application/x-www-form-urlencoded"},body:`data=${encodeURIComponent(LZString.compressToBase64(payload))}&compression=lz64`}:{method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"},body:payload};try{await this.fetchWithRetry(url,fetchOptions)}catch(err){throw err instanceof PostHogFetchNetworkError||persistQueueChange(),this._events.emit("error",err),err}return persistQueueChange(),this._events.emit("flush",messages),messages}async fetchWithRetry(url,options,retryOptions,requestTimeout){var _a;return(_a=AbortSignal).timeout??(_a.timeout=function timeout(ms){let ctrl=new AbortController;return setTimeout(()=>ctrl.abort(),ms),ctrl.signal}),await retriable(async()=>{let res=null;try{res=await this.fetch(url,{signal:AbortSignal.timeout(requestTimeout??this.requestTimeout),...options})}catch(e){throw new PostHogFetchNetworkError(e)}let isNoCors="no-cors"===options.mode;if(!isNoCors&&(res.status<200||res.status>=400))throw new PostHogFetchHttpError(res);return res},{...this._retryOptions,...retryOptions})}async shutdown(shutdownTimeoutMs=3e4){await this._initPromise,this.clearFlushTimer();try{await Promise.all(Object.values(this.pendingPromises));let startTimeWithDelay=Date.now()+shutdownTimeoutMs;for(;;){let queue=this.getPersistedProperty(PostHogPersistedProperty.Queue)||[];if(0===queue.length)break;await this.flush();let now=Date.now();if(startTimeWithDelay<now)break}}catch(e){if(!isPostHogFetchError(e))throw e;console.error("Error while shutting down PostHog",e)}}}class PostHogCore extends PostHogCoreStateless{constructor(apiKey,options){let disableGeoipOption=options?.disableGeoip??!1,featureFlagsRequestTimeoutMs=options?.featureFlagsRequestTimeoutMs??1e4;super(apiKey,{...options,disableGeoip:disableGeoipOption,featureFlagsRequestTimeoutMs}),this.flagCallReported={},this.sessionProps={},this.sendFeatureFlagEvent=options?.sendFeatureFlagEvent??!0,this._sessionExpirationTimeSeconds=options?.sessionExpirationTimeSeconds??1800}setupBootstrap(options){if(options?.bootstrap?.distinctId&&(options?.bootstrap?.isIdentifiedId?this.setPersistedProperty(PostHogPersistedProperty.DistinctId,options.bootstrap.distinctId):this.setPersistedProperty(PostHogPersistedProperty.AnonymousId,options.bootstrap.distinctId)),options?.bootstrap?.featureFlags){let activeFlags=Object.keys(options.bootstrap?.featureFlags||{}).filter(flag=>!!options.bootstrap?.featureFlags?.[flag]).reduce((res,key)=>(res[key]=options.bootstrap?.featureFlags?.[key]||!1,res),{});this.setKnownFeatureFlags(activeFlags),options?.bootstrap.featureFlagPayloads&&this.setKnownFeatureFlagPayloads(options?.bootstrap.featureFlagPayloads)}}get props(){return this._props||(this._props=this.getPersistedProperty(PostHogPersistedProperty.Props)),this._props||{}}set props(val){this._props=val}clearProps(){this.props=void 0,this.sessionProps={}}on(event,cb){return this._events.on(event,cb)}reset(propertiesToKeep){this.wrap(()=>{let allPropertiesToKeep=[PostHogPersistedProperty.Queue,...propertiesToKeep||[]];for(let key of(this.clearProps(),Object.keys(PostHogPersistedProperty)))allPropertiesToKeep.includes(PostHogPersistedProperty[key])||this.setPersistedProperty(PostHogPersistedProperty[key],null)})}getCommonEventProperties(){let featureFlags=this.getFeatureFlags(),featureVariantProperties={};if(featureFlags)for(let[feature,variant]of Object.entries(featureFlags))featureVariantProperties[`$feature/${feature}`]=variant;return{$active_feature_flags:featureFlags?Object.keys(featureFlags):void 0,...featureVariantProperties,...super.getCommonEventProperties()}}enrichProperties(properties){return{...this.props,...this.sessionProps,...properties||{},...this.getCommonEventProperties(),$session_id:this.getSessionId()}}getSessionId(){if(!this._isInitialized)return"";let sessionId=this.getPersistedProperty(PostHogPersistedProperty.SessionId),sessionTimestamp=this.getPersistedProperty(PostHogPersistedProperty.SessionLastTimestamp)||0;return(!sessionId||Date.now()-sessionTimestamp>1e3*this._sessionExpirationTimeSeconds)&&(sessionId=uuidv7(),this.setPersistedProperty(PostHogPersistedProperty.SessionId,sessionId)),this.setPersistedProperty(PostHogPersistedProperty.SessionLastTimestamp,Date.now()),sessionId}resetSessionId(){this.wrap(()=>{this.setPersistedProperty(PostHogPersistedProperty.SessionId,null)})}getAnonymousId(){if(!this._isInitialized)return"";let anonId=this.getPersistedProperty(PostHogPersistedProperty.AnonymousId);return anonId||(anonId=uuidv7(),this.setPersistedProperty(PostHogPersistedProperty.AnonymousId,anonId)),anonId}getDistinctId(){return this._isInitialized?this.getPersistedProperty(PostHogPersistedProperty.DistinctId)||this.getAnonymousId():""}async unregister(property){this.wrap(()=>{delete this.props[property],this.setPersistedProperty(PostHogPersistedProperty.Props,this.props)})}async register(properties){this.wrap(()=>{this.props={...this.props,...properties},this.setPersistedProperty(PostHogPersistedProperty.Props,this.props)})}registerForSession(properties){this.sessionProps={...this.sessionProps,...properties}}unregisterForSession(property){delete this.sessionProps[property]}identify(distinctId,properties,options){this.wrap(()=>{let previousDistinctId=this.getDistinctId();distinctId=distinctId||previousDistinctId,properties?.$groups&&this.groups(properties.$groups);let allProperties=this.enrichProperties({...properties,$anon_distinct_id:this.getAnonymousId(),$set:properties});distinctId!==previousDistinctId&&(this.setPersistedProperty(PostHogPersistedProperty.AnonymousId,previousDistinctId),this.setPersistedProperty(PostHogPersistedProperty.DistinctId,distinctId),this.reloadFeatureFlags()),super.identifyStateless(distinctId,allProperties,options)})}capture(event,properties,options){this.wrap(()=>{let distinctId=this.getDistinctId();properties?.$groups&&this.groups(properties.$groups);let allProperties=this.enrichProperties(properties);super.captureStateless(distinctId,event,allProperties,options)})}alias(alias){this.wrap(()=>{let distinctId=this.getDistinctId(),allProperties=this.enrichProperties({});super.aliasStateless(alias,distinctId,allProperties)})}autocapture(eventType,elements,properties={},options){this.wrap(()=>{let distinctId=this.getDistinctId(),payload={distinct_id:distinctId,event:"$autocapture",properties:{...this.enrichProperties(properties),$event_type:eventType,$elements:elements}};this.enqueue("autocapture",payload,options)})}groups(groups){this.wrap(()=>{let existingGroups=this.props.$groups||{};this.register({$groups:{...existingGroups,...groups}}),Object.keys(groups).find(type=>existingGroups[type]!==groups[type])&&this.reloadFeatureFlags()})}group(groupType,groupKey,groupProperties,options){this.wrap(()=>{this.groups({[groupType]:groupKey}),groupProperties&&this.groupIdentify(groupType,groupKey,groupProperties,options)})}groupIdentify(groupType,groupKey,groupProperties,options){this.wrap(()=>{let distinctId=this.getDistinctId(),eventProperties=this.enrichProperties({});super.groupIdentifyStateless(groupType,groupKey,groupProperties,options,distinctId,eventProperties)})}setPersonPropertiesForFlags(properties){this.wrap(()=>{let existingProperties=this.getPersistedProperty(PostHogPersistedProperty.PersonProperties)||{};this.setPersistedProperty(PostHogPersistedProperty.PersonProperties,{...existingProperties,...properties})})}resetPersonPropertiesForFlags(){this.wrap(()=>{this.setPersistedProperty(PostHogPersistedProperty.PersonProperties,{})})}personProperties(properties){return this.setPersonPropertiesForFlags(properties)}setGroupPropertiesForFlags(properties){this.wrap(()=>{let existingProperties=this.getPersistedProperty(PostHogPersistedProperty.GroupProperties)||{};0!==Object.keys(existingProperties).length&&Object.keys(existingProperties).forEach(groupType=>{existingProperties[groupType]={...existingProperties[groupType],...properties[groupType]},delete properties[groupType]}),this.setPersistedProperty(PostHogPersistedProperty.GroupProperties,{...existingProperties,...properties})})}resetGroupPropertiesForFlags(){this.wrap(()=>{this.setPersistedProperty(PostHogPersistedProperty.GroupProperties,{})})}groupProperties(properties){this.wrap(()=>{this.setGroupPropertiesForFlags(properties)})}async decideAsync(sendAnonDistinctId=!0){return(await this._initPromise,this._decideResponsePromise)?this._decideResponsePromise:this._decideAsync(sendAnonDistinctId)}async _decideAsync(sendAnonDistinctId=!0){return this._decideResponsePromise=this._initPromise.then(()=>{let distinctId=this.getDistinctId(),groups=this.props.$groups||{},personProperties=this.getPersistedProperty(PostHogPersistedProperty.PersonProperties)||{},groupProperties=this.getPersistedProperty(PostHogPersistedProperty.GroupProperties)||{},extraProperties={$anon_distinct_id:sendAnonDistinctId?this.getAnonymousId():void 0};return super.getDecide(distinctId,groups,personProperties,groupProperties,extraProperties).then(res=>{if(res?.featureFlags){let newFeatureFlags=res.featureFlags,newFeatureFlagPayloads=res.featureFlagPayloads;if(res.errorsWhileComputingFlags){let currentFlags=this.getPersistedProperty(PostHogPersistedProperty.FeatureFlags),currentFlagPayloads=this.getPersistedProperty(PostHogPersistedProperty.FeatureFlagPayloads);newFeatureFlags={...currentFlags,...res.featureFlags},newFeatureFlagPayloads={...currentFlagPayloads,...res.featureFlagPayloads}}this.setKnownFeatureFlags(newFeatureFlags),this.setKnownFeatureFlagPayloads(newFeatureFlagPayloads)}return res})}).finally(()=>{this._decideResponsePromise=void 0}),this._decideResponsePromise}setKnownFeatureFlags(featureFlags){this.wrap(()=>{this.setPersistedProperty(PostHogPersistedProperty.FeatureFlags,featureFlags),this._events.emit("featureflags",featureFlags)})}setKnownFeatureFlagPayloads(featureFlagPayloads){this.wrap(()=>{this.setPersistedProperty(PostHogPersistedProperty.FeatureFlagPayloads,featureFlagPayloads)})}getFeatureFlag(key){let featureFlags=this.getFeatureFlags();if(!featureFlags)return;let response=featureFlags[key];return void 0===response&&(response=!1),this.sendFeatureFlagEvent&&!this.flagCallReported[key]&&(this.flagCallReported[key]=!0,this.capture("$feature_flag_called",{$feature_flag:key,$feature_flag_response:response})),response}getFeatureFlagPayload(key){let payloads=this.getFeatureFlagPayloads();if(!payloads)return;let response=payloads[key];return void 0===response?null:this._parsePayload(response)}getFeatureFlagPayloads(){let payloads=this.getPersistedProperty(PostHogPersistedProperty.FeatureFlagPayloads);return payloads?Object.fromEntries(Object.entries(payloads).map(([k,v])=>[k,this._parsePayload(v)])):payloads}getFeatureFlags(){let flags=this.getPersistedProperty(PostHogPersistedProperty.FeatureFlags),overriddenFlags=this.getPersistedProperty(PostHogPersistedProperty.OverrideFeatureFlags);if(!overriddenFlags)return flags;for(let key in flags=flags||{},overriddenFlags)overriddenFlags[key]?flags[key]=overriddenFlags[key]:delete flags[key];return flags}getFeatureFlagsAndPayloads(){let flags=this.getFeatureFlags(),payloads=this.getFeatureFlagPayloads();return{flags,payloads}}isFeatureEnabled(key){let response=this.getFeatureFlag(key);if(void 0!==response)return!!response}reloadFeatureFlags(cb){this.decideAsync().then(res=>{cb?.(void 0,res?.featureFlags)}).catch(e=>{cb?.(e,void 0),cb||console.log("[PostHog] Error reloading feature flags",e)})}async reloadFeatureFlagsAsync(sendAnonDistinctId=!0){return(await this.decideAsync(sendAnonDistinctId))?.featureFlags}onFeatureFlags(cb){return this.on("featureflags",async()=>{let flags=this.getFeatureFlags();flags&&cb(flags)})}onFeatureFlag(key,cb){return this.on("featureflags",async()=>{let flagResponse=this.getFeatureFlag(key);void 0!==flagResponse&&cb(flagResponse)})}async overrideFeatureFlag(flags){this.wrap(()=>null===flags?this.setPersistedProperty(PostHogPersistedProperty.OverrideFeatureFlags,null):this.setPersistedProperty(PostHogPersistedProperty.OverrideFeatureFlags,flags))}}var PostHogPersistedProperty,version="3.0.0";function includes(haystack,needle){return haystack.indexOf(needle)>=0}function browser(userAgent,vendor,opera){if(vendor=vendor||"",opera||includes(userAgent," OPR/"))return includes(userAgent,"Mini")?"Opera Mini":"Opera";if(/(BlackBerry|PlayBook|BB10)/i.test(userAgent))return"BlackBerry";if(includes(userAgent,"IEMobile")||includes(userAgent,"WPDesktop"))return"Internet Explorer Mobile";if(includes(userAgent,"SamsungBrowser/"))return"Samsung Internet";if(includes(userAgent,"Edge")||includes(userAgent,"Edg/"))return"Microsoft Edge";if(includes(userAgent,"FBIOS"))return"Facebook Mobile";if(includes(userAgent,"Chrome"))return"Chrome";else if(includes(userAgent,"CriOS"))return"Chrome iOS";else if(includes(userAgent,"UCWEB")||includes(userAgent,"UCBrowser"))return"UC Browser";else if(includes(userAgent,"FxiOS"))return"Firefox iOS";else if(includes(vendor,"Apple"))return includes(userAgent,"Mobile")?"Mobile Safari":"Safari";else if(includes(userAgent,"Android"))return"Android Mobile";else if(includes(userAgent,"Konqueror"))return"Konqueror";else if(includes(userAgent,"Firefox"))return"Firefox";else if(includes(userAgent,"MSIE")||includes(userAgent,"Trident/"))return"Internet Explorer";else if(includes(userAgent,"Gecko"))return"Mozilla";else return""}let cookieStore={getItem(key){try{let nameEQ=key+"=",ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];for(;" "==c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return decodeURIComponent(c.substring(nameEQ.length,c.length))}}catch(err){}return null},setItem(key,value){try{let new_cookie_val=key+"="+encodeURIComponent(value)+"; path=/";document.cookie=new_cookie_val}catch(err){return}},removeItem(name){try{cookieStore.setItem(name,"")}catch(err){return}},clear(){document.cookie=""},getAllKeys(){let ca=document.cookie.split(";"),keys=[];for(let i=0;i<ca.length;i++){let c=ca[i];for(;" "==c.charAt(0);)c=c.substring(1,c.length);keys.push(c.split("=")[0])}return keys}},createStorageLike=store=>({getItem:key=>store.getItem(key),setItem(key,value){store.setItem(key,value)},removeItem(key){store.removeItem(key)},clear(){store.clear()},getAllKeys(){let keys=[];for(let key in localStorage)keys.push(key);return keys}}),checkStoreIsSupported=(storage,key="__mplssupport__")=>{if(!window)return!1;try{if(storage.setItem(key,"xyz"),"xyz"!==storage.getItem(key))return!1;return storage.removeItem(key),!0}catch(err){return!1}},createMemoryStorage=()=>{let _cache={};return{getItem:key=>_cache[key],setItem(key,value){_cache[key]=null!==value?value:void 0},removeItem(key){delete _cache[key]},clear(){for(let key in _cache)delete _cache[key]},getAllKeys(){let keys=[];for(let key in _cache)keys.push(key);return keys}}},getStorage=(type,window1)=>{if(window1){if(!localStorage){let _localStore=createStorageLike(window1.localStorage);localStore=checkStoreIsSupported(_localStore)?_localStore:void 0}if(!sessionStore){let _sessionStore=createStorageLike(window1.sessionStorage);sessionStore=checkStoreIsSupported(_sessionStore)?_sessionStore:void 0}}switch(type){case"cookie":return cookieStore||localStore||sessionStore||createMemoryStorage();case"localStorage":return localStore||sessionStore||createMemoryStorage();case"sessionStorage":return sessionStore||createMemoryStorage();default:return createMemoryStorage()}};class PostHog extends PostHogCore{constructor(apiKey,options){super(apiKey,options),this._storageKey=options?.persistence_name?`ph_${options.persistence_name}`:`ph_${apiKey}_posthog`,this._storage=getStorage(options?.persistence||"localStorage",window),this.setupBootstrap(options),options?.preloadFeatureFlags!==!1&&this.reloadFeatureFlags()}getPersistedProperty(key){return this._storageCache||(this._storageCache=JSON.parse(this._storage.getItem(this._storageKey)||"{}")||{}),this._storageCache[key]}setPersistedProperty(key,value){this._storageCache||(this._storageCache=JSON.parse(this._storage.getItem(this._storageKey)||"{}")||{}),null===value?delete this._storageCache[key]:this._storageCache[key]=value,this._storage.setItem(this._storageKey,JSON.stringify(this._storageCache))}fetch(url,options){return window.fetch(url,options)}getLibraryId(){return"posthog-js-lite"}getLibraryVersion(){return version}getCustomUserAgent(){}getCommonEventProperties(){return{...super.getCommonEventProperties(),...function(window1){let context={};if(window1.navigator){var userAgent;let userAgent1=window1.navigator.userAgent;context={...context,$os:function(window1){let a=window1.navigator.userAgent;if(/Windows/i.test(a))return/Phone/.test(a)||/WPDesktop/.test(a)?"Windows Phone":"Windows";if(/(iPhone|iPad|iPod)/.test(a))return"iOS";if(/Android/.test(a))return"Android";if(/(BlackBerry|PlayBook|BB10)/i.test(a))return"BlackBerry";if(/Mac/i.test(a))return"Mac OS X";if(/Linux/.test(a))return"Linux";if(/CrOS/.test(a))return"Chrome OS";else return""}(window1),$browser:browser(userAgent1,window1.navigator.vendor,!!window1.opera),$referrer:window1.document.referrer,$referring_domain:function(referrer){let split=referrer.split("/");return split.length>=3?split[2]:""}(window1.document.referrer),$device:(userAgent=userAgent1,/Windows Phone/i.test(userAgent)||/WPDesktop/.test(userAgent)?"Windows Phone":/iPad/.test(userAgent)?"iPad":/iPod/.test(userAgent)?"iPod Touch":/iPhone/.test(userAgent)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(userAgent)?"BlackBerry":/Android/.test(userAgent)?"Android":""),$current_url:window1.location.href,$host:window1.location.host,$pathname:window1.location.pathname,$browser_version:function(userAgent,vendor,opera){let browserString=browser(userAgent,vendor,opera),regex={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[browserString]||void 0;if(void 0===regex)return null;let matches=userAgent.match(regex);return matches?parseFloat(matches[matches.length-2]):null}(userAgent1,window1.navigator.vendor,!!window1.opera),$screen_height:window1.screen.height,$screen_width:window1.screen.width,$screen_dpr:window1.devicePixelRatio}}return{...context,$lib:"js",$lib_version:version,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:currentTimestamp()/1e3}}(window)}}}},"./node_modules/.pnpm/query-selector-shadow-dom@1.0.0/node_modules/query-selector-shadow-dom/src/querySelectorDeep.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function querySelectorAllDeep(selector,root=document,allElements=null){return function(selector,findMany,root,allElements=null){selector=function(sel){function saveUnmatched(){unmatched&&(tokens.length>0&&/^[~+>]$/.test(tokens[tokens.length-1])&&tokens.push(" "),tokens.push(unmatched))}var match,unmatched,regex,prev_match_idx,tokens=[],state=[0],next_match_idx=0,not_escaped_pattern=/(?:[^\\]|(?:^|[^\\])(?:\\\\)+)$/,whitespace_pattern=/^\s+$/,state_patterns=[/\s+|\/\*|["'>~+[(]/g,/\s+|\/\*|["'[\]()]/g,/\s+|\/\*|["'[\]()]/g,null,/\*\//g];for(sel=sel.trim();;)if(unmatched="",(regex=state_patterns[state[state.length-1]]).lastIndex=next_match_idx,match=regex.exec(sel)){if((prev_match_idx=next_match_idx)<(next_match_idx=regex.lastIndex)-match[0].length&&(unmatched=sel.substring(prev_match_idx,next_match_idx-match[0].length)),state[state.length-1]<3){if(saveUnmatched(),"["===match[0])state.push(1);else if("("===match[0])state.push(2);else if(/^["']$/.test(match[0]))state.push(3),state_patterns[3]=RegExp(match[0],"g");else if("/*"===match[0])state.push(4);else if(/^[\])]$/.test(match[0])&&state.length>0)state.pop();else if(/^(?:\s+|[~+>])$/.test(match[0])&&(tokens.length>0&&!whitespace_pattern.test(tokens[tokens.length-1])&&0===state[state.length-1]&&tokens.push(" "),1===state[state.length-1]&&5===tokens.length&&"="===tokens[2].charAt(tokens[2].length-1)&&(tokens[4]=" "+tokens[4]),whitespace_pattern.test(match[0])))continue;tokens.push(match[0])}else tokens[tokens.length-1]+=unmatched,not_escaped_pattern.test(tokens[tokens.length-1])&&(4===state[state.length-1]&&(tokens.length<2||whitespace_pattern.test(tokens[tokens.length-2])?tokens.pop():tokens[tokens.length-1]=" ",match[0]=""),state.pop()),tokens[tokens.length-1]+=match[0]}else{unmatched=sel.substr(next_match_idx),saveUnmatched();break}return tokens.join("").trim()}(selector);let lightElement=root.querySelector(selector);if(document.head.createShadowRoot||document.head.attachShadow){if(!findMany&&lightElement)return lightElement;let selectionsToMake=splitByCharacterUnlessQuoted(selector,",");return selectionsToMake.reduce((acc,minimalSelector)=>{if(!findMany&&acc)return acc;let splitSelector=splitByCharacterUnlessQuoted(minimalSelector.replace(/^\s+/g,"").replace(/\s*([>+~]+)\s*/g,"$1")," ").filter(entry=>!!entry).map(entry=>splitByCharacterUnlessQuoted(entry,">")),possibleElementsIndex=splitSelector.length-1,lastSplitPart=splitSelector[possibleElementsIndex][splitSelector[possibleElementsIndex].length-1],possibleElements=collectAllElementsDeep(lastSplitPart,root,allElements),findElements=element=>{var node;let position=possibleElementsIndex,parent=element,foundElement=!1;for(;parent&&!((node=parent).nodeType===Node.DOCUMENT_FRAGMENT_NODE||node.nodeType===Node.DOCUMENT_NODE);){let foundMatch=!0;if(1===splitSelector[position].length)foundMatch=parent.matches(splitSelector[position]);else{let reversedParts=[].concat(splitSelector[position]).reverse(),newParent=parent;for(let part of reversedParts){if(!newParent||!newParent.matches(part)){foundMatch=!1;break}newParent=findParentOrHost(newParent,root)}}if(foundMatch&&0===position){foundElement=!0;break}foundMatch&&position--,parent=findParentOrHost(parent,root)}return foundElement};return findMany?acc=acc.concat(possibleElements.filter(findElements)):(acc=possibleElements.find(findElements))||null},findMany?[]:null)}return findMany?root.querySelectorAll(selector):lightElement}(selector,!0,root,allElements)}function splitByCharacterUnlessQuoted(selector,character){return selector.match(/\\?.|^$/g).reduce((p,c)=>('"'!==c||p.sQuote?"'"!==c||p.quote?p.quote||p.sQuote||c!==character?p.a[p.a.length-1]+=c:p.a.push(""):(p.sQuote^=1,p.a[p.a.length-1]+=c):(p.quote^=1,p.a[p.a.length-1]+=c),p),{a:[""]}).a}function findParentOrHost(element,root){let parentNode=element.parentNode;return parentNode&&parentNode.host&&11===parentNode.nodeType?parentNode.host:parentNode===root?null:parentNode}function collectAllElementsDeep(selector=null,root,cachedElements=null){let allElements=[];if(cachedElements)allElements=cachedElements;else{let findAllElements=function(nodes){for(let i=0;i<nodes.length;i++){let el=nodes[i];allElements.push(el),el.shadowRoot&&findAllElements(el.shadowRoot.querySelectorAll("*"))}};root.shadowRoot&&findAllElements(root.shadowRoot.querySelectorAll("*")),findAllElements(root.querySelectorAll("*"))}return selector?allElements.filter(el=>el.matches(selector)):allElements}__webpack_require__.d(__webpack_exports__,{n8:()=>collectAllElementsDeep,Jp:()=>querySelectorAllDeep})},"./node_modules/.pnpm/@medv+finder@3.1.0/node_modules/@medv/finder/finder.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{let config,rootDocument;function finder(input,options){var rootNode;if(input.nodeType!==Node.ELEMENT_NODE)throw Error("Can't generate CSS selector for non-element node type.");if("html"===input.tagName.toLowerCase())return"html";let defaults={root:document.body,idName:name=>!0,className:name=>!0,tagName:name=>!0,attr:(name,value)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};rootDocument=(rootNode=(config={...defaults,...options}).root).nodeType===Node.DOCUMENT_NODE?rootNode:rootNode===defaults.root?rootNode.ownerDocument:rootNode;let path=bottomUpSearch(input,"all",()=>bottomUpSearch(input,"two",()=>bottomUpSearch(input,"one",()=>bottomUpSearch(input,"none"))));if(path){let optimized=sort(function* optimize(path,input,scope={counter:0,visited:new Map}){if(path.length>2&&path.length>config.optimizedMinLength)for(let i=1;i<path.length-1;i++){if(scope.counter>config.maxNumberOfTries)return;scope.counter+=1;let newPath=[...path];newPath.splice(i,1);let newPathKey=selector(newPath);if(scope.visited.has(newPathKey))return;unique(newPath)&&rootDocument.querySelector(selector(newPath))===input&&(yield newPath,scope.visited.set(newPathKey,!0),yield*optimize(newPath,input,scope))}}(path,input));return optimized.length>0&&(path=optimized[0]),selector(path)}throw Error("Selector was not found.")}function bottomUpSearch(input,limit,fallback){let path=null,stack=[],current=input,i=0;for(;current;){let level=maybe(function(input){let elementId=input.getAttribute("id");return elementId&&config.idName(elementId)?{name:"#"+CSS.escape(elementId),penalty:0}:null}(current))||maybe(...function(input){let attrs=Array.from(input.attributes).filter(attr=>config.attr(attr.name,attr.value));return attrs.map(attr=>({name:`[${CSS.escape(attr.name)}="${CSS.escape(attr.value)}"]`,penalty:.5}))}(current))||maybe(...function(input){let names=Array.from(input.classList).filter(config.className);return names.map(name=>({name:"."+CSS.escape(name),penalty:1}))}(current))||maybe(function(input){let name=input.tagName.toLowerCase();return config.tagName(name)?{name,penalty:2}:null}(current))||[any()],nth=function(input){let parent=input.parentNode;if(!parent)return null;let child=parent.firstChild;if(!child)return null;let i=0;for(;child&&(child.nodeType===Node.ELEMENT_NODE&&i++,child!==input);)child=child.nextSibling;return i}(current);if("all"==limit)nth&&(level=level.concat(level.filter(dispensableNth).map(node=>nthChild(node,nth))));else if("two"==limit)level=level.slice(0,1),nth&&(level=level.concat(level.filter(dispensableNth).map(node=>nthChild(node,nth))));else if("one"==limit){let[node]=level=level.slice(0,1);nth&&dispensableNth(node)&&(level=[nthChild(node,nth)])}else"none"==limit&&(level=[any()],nth&&(level=[nthChild(level[0],nth)]));for(let node of level)node.level=i;if(stack.push(level),stack.length>=config.seedMinLength&&(path=findUniquePath(stack,fallback)))break;current=current.parentElement,i++}return(path||(path=findUniquePath(stack,fallback)),!path&&fallback)?fallback():path}function findUniquePath(stack,fallback){let paths=sort(function* combinations(stack,path=[]){if(stack.length>0)for(let node of stack[0])yield*combinations(stack.slice(1,stack.length),path.concat(node));else yield path}(stack));if(paths.length>config.threshold)return fallback?fallback():null;for(let candidate of paths)if(unique(candidate))return candidate;return null}function selector(path){let node=path[0],query=node.name;for(let i=1;i<path.length;i++){let level=path[i].level||0;query=node.level===level-1?`${path[i].name} > ${query}`:`${path[i].name} ${query}`,node=path[i]}return query}function penalty(path){return path.map(node=>node.penalty).reduce((acc,i)=>acc+i,0)}function unique(path){let css=selector(path);switch(rootDocument.querySelectorAll(css).length){case 0:throw Error(`Can't select any node with this selector: ${css}`);case 1:return!0;default:return!1}}function any(){return{name:"*",penalty:3}}function nthChild(node,i){return{name:node.name+`:nth-child(${i})`,penalty:node.penalty+1}}function dispensableNth(node){return"html"!==node.name&&!node.name.startsWith("#")}function maybe(...level){let list=level.filter(notEmpty);return list.length>0?list:null}function notEmpty(value){return null!=value}function sort(paths){return[...paths].sort((a,b)=>penalty(a)-penalty(b))}__webpack_require__.d(__webpack_exports__,{w:()=>finder})}}]);
//# sourceMappingURL=78823.e9ad407b.iframe.bundle.js.map