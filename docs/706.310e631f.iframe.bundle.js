"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[706],{"./frontend/src/scenes/pipeline/PipelineApp.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PipelineApp:()=>PipelineApp,scene:()=>scene});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),types=__webpack_require__("./frontend/src/types.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js");const pipelineAppLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.key)((_ref=>{let{id}=_ref;return id})),(0,index_esm.path)((id=>["scenes","pipeline","pipelineAppLogic",id])),(0,index_esm.actions)({setCurrentTab:function(){return{tab:arguments.length>0&&void 0!==arguments[0]?arguments[0]:types.YU.Configuration}}}),(0,index_esm.reducers)({currentTab:[types.YU.Configuration,{setCurrentTab:(_,_ref2)=>{let{tab}=_ref2;return tab}}]}),(0,index_esm.selectors)({breadcrumbs:[()=>[],()=>[{name:"Pipeline",path:urls.j.pipeline()},{name:"App name"}]]}),(0,lib.actionToUrl)((_ref3=>{let{values,props}=_ref3;return{setCurrentTab:()=>[urls.j.pipelineApp(props.id,values.currentTab)]}})),(0,lib.urlToAction)((_ref4=>{let{actions,values}=_ref4;return{"/pipeline/:id/:tab":_ref5=>{let{tab}=_ref5;tab!==values.currentTab&&actions.setCurrentTab(tab)}}}))]);var PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/LemonTabs.tsx"),PluginLogs=__webpack_require__("./frontend/src/scenes/plugins/plugin/PluginLogs.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const scene={component:PipelineApp,logic:pipelineAppLogic,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id:id?parseInt(id):"new"}}};function PipelineApp(){let{id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{currentTab}=(0,index_esm.useValues)(pipelineAppLogic),confId=id?parseInt(id):void 0;if(!confId)return(0,jsx_runtime.jsx)(src.Spinner,{});const tab_to_content={[types.YU.Configuration]:(0,jsx_runtime.jsx)("div",{children:"Configuration editing"}),[types.YU.Metrics]:(0,jsx_runtime.jsx)("div",{children:"Metrics page"}),[types.YU.Logs]:(0,jsx_runtime.jsx)(PluginLogs.b,{pluginConfigId:confId})};return(0,jsx_runtime.jsxs)("div",{className:"pipeline-app-scene",children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:"Pipeline App"}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:currentTab,onChange:tab=>lib.router.actions.push(urls.j.pipelineApp(confId,tab)),tabs:Object.values(types.YU).map((tab=>({label:(0,utils.fm)(tab),key:tab,content:tab_to_content[tab]})))})]})}try{PipelineApp.displayName="PipelineApp",PipelineApp.__docgenInfo={description:"",displayName:"PipelineApp",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/pipeline/PipelineApp.tsx#PipelineApp"]={docgenInfo:PipelineApp.__docgenInfo,name:"PipelineApp",path:"frontend/src/scenes/pipeline/PipelineApp.tsx#PipelineApp"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/plugins/plugin/PluginLogs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>PluginLogs});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/utils.tsx"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/types.ts"),_pluginLogsLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/plugins/plugin/pluginLogsLogic.ts"),lib_dayjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/dayjs.ts"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const columns=[{title:"Timestamp",key:"timestamp",dataIndex:"timestamp",render:timestamp=>(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_4__.Bv)(timestamp).format("YYYY-MM-DD HH:mm:ss.SSS UTC")},{title:"Source",dataIndex:"source",key:"source"},{title:"Type",key:"type",dataIndex:"type",render:function PluginLogEntryTypeDisplay(type){let color;switch(type){case _types__WEBPACK_IMPORTED_MODULE_2__.oX.Debug:color="text-muted";break;case _types__WEBPACK_IMPORTED_MODULE_2__.oX.Log:color="text-default";break;case _types__WEBPACK_IMPORTED_MODULE_2__.oX.Info:color="text-primary";break;case _types__WEBPACK_IMPORTED_MODULE_2__.oX.Warn:color="text-warning";break;case _types__WEBPACK_IMPORTED_MODULE_2__.oX.Error:color="text-danger"}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{className:color,children:type})}},{title:"Message",key:"message",dataIndex:"message",render:message=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("code",{className:"whitespace-pre-wrap",children:message})}];function PluginLogs(_ref){let{pluginConfigId}=_ref;const logic=(0,_pluginLogsLogic__WEBPACK_IMPORTED_MODULE_3__.D)({pluginConfigId}),{pluginLogs,pluginLogsLoading,pluginLogsBackground,isThereMoreToLoad,pluginLogsTypes}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(logic),{revealBackground,loadPluginLogsMore,setPluginLogsTypes,setSearchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(logic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"ph-no-capture space-y-2 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_5__.LemonInput,{type:"search",placeholder:"Search for messages containing…",fullWidth:!0,onChange:setSearchTerm,allowClear:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"flex items-center gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{children:"Show logs of type: "}),Object.values(_types__WEBPACK_IMPORTED_MODULE_2__.oX).map((type=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_5__.LemonCheckbox,{label:type,checked:pluginLogsTypes.includes(type),onChange:checked=>{const newPluginLogsTypes=checked?[...pluginLogsTypes,type]:pluginLogsTypes.filter((t=>t!=type));setPluginLogsTypes(newPluginLogsTypes)}},type)))]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_5__.LemonButton,{onClick:revealBackground,loading:pluginLogsLoading,type:"secondary",fullWidth:!0,center:!0,disabledReason:pluginLogsBackground.length?void 0:"There's nothing to load",children:pluginLogsBackground.length?`Load ${(0,lib_utils__WEBPACK_IMPORTED_MODULE_1__._6)(pluginLogsBackground.length,"newer entry","newer entries")}`:"No new entries"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_5__.LemonTable,{dataSource:pluginLogs,columns,loading:pluginLogsLoading,size:"small",className:"ph-no-capture",rowKey:"id",pagination:{pageSize:200,hideOnSinglePage:!0}}),!!pluginLogs.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_5__.LemonButton,{onClick:loadPluginLogsMore,loading:pluginLogsLoading,type:"secondary",fullWidth:!0,center:!0,disabledReason:isThereMoreToLoad?void 0:"There's nothing mote to load",children:isThereMoreToLoad?`Load up to ${_pluginLogsLogic__WEBPACK_IMPORTED_MODULE_3__.F} older entries`:"No older entries"})]})}try{PluginLogs.displayName="PluginLogs",PluginLogs.__docgenInfo={description:"",displayName:"PluginLogs",props:{pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"]={docgenInfo:PluginLogs.__docgenInfo,name:"PluginLogs",path:"frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"})}catch(__react_docgen_typescript_loader_error){}}}]);