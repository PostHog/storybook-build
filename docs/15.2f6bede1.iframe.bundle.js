(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function(V,u,e){"use strict";e.d(u,"a",function(){return U});var M=e("./frontend/@posthog/lemon-ui/src/index.ts"),F=e("./node_modules/react/index.js"),A=e.n(F),d=e("./node_modules/react/jsx-runtime.js"),D=e.n(d);function U(g){var b=g.to,H=g.onClick,Y=g.title,f=g.subtitle,h=g.prefix,C=g.suffix;return Object(d.jsx)(M.LemonButton,{fullWidth:!0,to:b,onClick:H,children:Object(d.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[h?Object(d.jsx)("span",{className:"shrink-0",children:h}):null,Object(d.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(d.jsx)("div",{className:"text-primary font-semibold truncate",children:Y}),Object(d.jsx)("div",{className:"truncate text-default font-normal",children:f})]}),C?Object(d.jsx)("span",{className:"shrink-0",children:C}):null]})})}try{U.displayName="ProjectHomePageCompactListItem",U.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:U.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(g){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(V,u,e){"use strict";var M=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),F=e.n(M),A=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),d=e.n(A),D={};D.insert="head",D.singleton=!1;var U=F()(d.a,D),g=d.a.locals||{}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(V,u,e){"use strict";e.d(u,"a",function(){return _}),e.d(u,"b",function(){return X});var M=e("./node_modules/core-js/modules/es.function.name.js"),F=e.n(M),A=e("./node_modules/core-js/modules/es.array.slice.js"),d=e.n(A),D=e("./node_modules/react/index.js"),U=e.n(D),g=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),b=e("./node_modules/kea/lib/index.esm.js"),H=e("./frontend/src/lib/dayjs.ts"),Y=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),f=e("./frontend/src/scenes/urls.ts"),h=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),C=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),B=e("./frontend/src/lib/utils/eventUsageLogic.ts"),G=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),m=e("./node_modules/react/jsx-runtime.js"),J=e.n(m);function _(R){var a=R.insight,l=Object(b.useActions)(B.e),c=l.reportInsightOpenedFromRecentInsightList;return Object(m.jsx)(G.a,{title:a.name||a.derived_name||"Insight",subtitle:"Last modified ".concat(Object(H.a)(a.last_modified_at).fromNow()),prefix:Object(m.jsx)(h.InsightIcon,{insight:a}),to:f.a.insightView(a.short_id),onClick:function(){c()}})}function X(){var R=Object(b.useValues)(C.a),a=R.recentInsights,l=R.recentInsightsLoading,c=Object(b.useActions)(C.a),E=c.loadRecentInsights;return Object(D.useEffect)(function(){E()},[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Y.a,{title:"Your recently viewed insights",viewAllURL:f.a.savedInsights(),loading:l,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:f.a.savedInsights()},items:a.slice(0,5),renderRow:function(I,N){return Object(m.jsx)(_,{insight:I},N)}})})}try{_.displayName="InsightRow",_.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:_.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(R){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(V,u,e){"use strict";e.d(u,"b",function(){return R}),e.d(u,"a",function(){return a});var M=e("./node_modules/core-js/modules/es.array.slice.js"),F=e.n(M),A=e("./frontend/src/lib/dayjs.ts"),d=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),U=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),g=e("./frontend/src/lib/components/ProfilePicture/index.ts"),b=e("./frontend/src/scenes/persons/PersonHeader.tsx"),H=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),Y=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/lib/utils/eventUsageLogic.ts"),h=e("./frontend/src/lib/utils.tsx"),C=e("./frontend/src/lib/components/icons.tsx"),B=e("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),G=e("./frontend/src/scenes/teamLogic.tsx"),m=e("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),J=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),_=e("./node_modules/react/jsx-runtime.js"),X=e.n(_);function R(l){var c=l.recording,E=Object(d.useActions)(m.a),O=E.openSessionPlayer,I=Object(d.useActions)(f.e),N=I.reportRecordingOpenedFromRecentRecordingList;return Object(_.jsx)(J.a,{title:Object(b.b)(c.person),subtitle:"Recorded ".concat(Object(A.a)(c.start_time).fromNow()),prefix:Object(_.jsx)(g.b,{name:Object(b.b)(c.person)}),suffix:Object(_.jsxs)("div",{className:"flex items-center justify-end text-default",children:[Object(_.jsx)("span",{children:Object(h.O)(c.recording_duration)}),Object(_.jsx)(C.IconPlayCircle,{className:"text-2xl ml-2"})]}),onClick:function(){O({id:c.id,matching_events:c.matching_events}),N()}})}function a(){var l=Object(d.useValues)(G.a),c=l.currentTeam,E=Object(H.c)({key:"projectHomepage"}),O=Object(d.useValues)(E),I=O.sessionRecordings,N=O.sessionRecordingsResponseLoading;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(B.a,{}),Object(_.jsx)(U.a,{title:"Recent recordings",viewAllURL:Y.a.sessionRecordings(),loading:N,emptyMessage:c!=null&&c.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:Y.a.projectSettings()+"#recordings"},items:I.slice(0,5),renderRow:function(k,se){return Object(_.jsx)(R,{recording:k},se)}})]})}try{R.displayName="RecordingRow",R.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:R.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(l){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(V,u,e){"use strict";e.d(u,"a",function(){return R});var M=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),F=e.n(M),A=e("./node_modules/@babel/runtime/regenerator/index.js"),d=e.n(A),D=e("./node_modules/core-js/modules/es.array.iterator.js"),U=e.n(D),g=e("./node_modules/core-js/modules/es.object.to-string.js"),b=e.n(g),H=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Y=e.n(H),f=e("./node_modules/kea/lib/index.esm.js"),h=e("./frontend/src/scenes/teamLogic.tsx"),C=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),B=e("./frontend/src/types.ts"),G=e("./frontend/src/lib/api.ts"),m=e("./node_modules/kea-subscriptions/lib/index.js"),J=e.n(m),_=e("./node_modules/kea-loaders/lib/index.js"),X=e.n(_),R=Object(f.kea)([Object(f.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(f.connect)({values:[h.a,["currentTeamId","currentTeam"]]}),Object(f.selectors)({primaryDashboardId:[function(){return[h.a.selectors.currentTeam]},function(a){return a==null?void 0:a.primary_dashboard}],dashboardLogic:[function(a){return[a.primaryDashboardId]},function(a){return Object(C.c)({id:a!=null?a:void 0,placement:B.m.ProjectHomepage})}]}),Object(_.loaders)(function(a){var l=a.values;return{recentInsights:[[],{loadRecentInsights:function(){var c=F()(d.a.mark(function O(){var I;return d.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,G.b.get("api/projects/".concat(l.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return I=j.sent,j.abrupt("return",I.results);case 4:case"end":return j.stop()}},O)}));function E(){return c.apply(this,arguments)}return E}()}],persons:[[],{loadPersons:function(){var c=F()(d.a.mark(function O(){var I;return d.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,G.b.persons.list();case 2:return I=j.sent,j.abrupt("return",I.results);case 4:case"end":return j.stop()}},O)}));function E(){return c.apply(this,arguments)}return E}()}]}}),Object(m.subscriptions)(function(a){var l=a.cache;return{dashboardLogic:function(E){var O;(O=l.unmount)===null||O===void 0||O.call(l),l.unmount=E?E.mount():null}}}),Object(f.afterMount)(function(a){var l,c=a.cache,E=a.actions;(l=c.unmount)===null||l===void 0||l.call(c),E.loadRecentInsights(),E.loadPersons()})])},"./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts":function(V,u,e){"use strict";e.d(u,"a",function(){return w}),e.d(u,"b",function(){return je}),e.d(u,"c",function(){return ge});var M=e("./node_modules/core-js/modules/es.object.keys.js"),F=e.n(M),A=e("./node_modules/core-js/modules/es.symbol.js"),d=e.n(A),D=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),U=e.n(D),g=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),b=e.n(g),H=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Y=e.n(H),f=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),h=e.n(f),C=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),B=e.n(C),G=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),m=e.n(G),J=e("./node_modules/@babel/runtime/regenerator/index.js"),_=e.n(J),X=e("./node_modules/core-js/modules/es.array.find.js"),R=e.n(X),a=e("./node_modules/core-js/modules/es.object.to-string.js"),l=e.n(a),c=e("./node_modules/core-js/modules/es.function.name.js"),E=e.n(c),O=e("./node_modules/core-js/modules/es.array.map.js"),I=e.n(O),N=e("./node_modules/core-js/modules/es.array.concat.js"),j=e.n(N),k=e("./node_modules/core-js/modules/es.array.filter.js"),se=e.n(k),ae=e("./node_modules/core-js/modules/es.array.iterator.js"),Oe=e.n(ae),ie=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),pe=e.n(ie),_e=e("./node_modules/core-js/modules/es.object.from-entries.js"),Pe=e.n(_e),K=e("./node_modules/kea/lib/index.esm.js"),te=e("./frontend/src/lib/api.ts"),oe=e("./frontend/src/lib/utils.tsx"),Q=e("./frontend/src/types.ts"),Z=e("./node_modules/kea-router/lib/index.js"),ve=e.n(Z),ce=e("./frontend/src/lib/utils/eventUsageLogic.ts"),de=e("./node_modules/fast-deep-equal/index.js"),le=e.n(de),ue=e("./frontend/src/scenes/teamLogic.tsx"),me=e("./frontend/src/lib/dayjs.ts"),ne=e("./node_modules/kea-loaders/lib/index.js"),Re=e.n(ne),q=e("./frontend/src/scenes/urls.ts");function re(s,t){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),o.push.apply(o,n)}return o}function W(s){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?re(Object(o),!0).forEach(function(n){m()(s,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):re(Object(o)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(o,n))})}return s}var w=20,Ee={session_recording_duration:{type:"recording",key:"duration",value:60,operator:Q.N.GreaterThan},properties:[],events:[],actions:[],date_from:Object(me.a)().subtract(21,"days").format("YYYY-MM-DD")},je=function(t,o,n){var r,i,p=(r=t.events)===null||r===void 0?void 0:r.find(function(P){var v=P.name;return v==="$pageview"}),L=(i=t.events)!==null&&i!==void 0?i:[],x=n?{key:o,value:[n],operator:Q.N.Exact,type:"event"}:{key:o,value:Q.N.IsNotSet,operator:Q.N.IsNotSet,type:"event"};return p?{events:L.map(function(P){var v,T;return P.order===p.order?W(W({},P),{},{properties:[].concat(B()((v=(T=P.properties)===null||T===void 0?void 0:T.filter(function(y){var z=y.key;return z!==o}))!==null&&v!==void 0?v:[]),[x])}):P})}:{events:[].concat(B()(L),[{id:"$pageview",name:"$pageview",type:"events",order:L.length,properties:[x]}])}},ge=Object(K.kea)([Object(K.path)(function(s){return["scenes","session-recordings","playlist","sessionRecordingsListLogic",s]}),Object(K.props)({}),Object(K.key)(function(s){var t;return"".concat(s.key,"-").concat((t=s.updateSearchParams)!==null&&t!==void 0?t:"-with-search")}),Object(K.connect)({values:[ue.a,["currentTeamId"]],actions:[ce.e,["reportRecordingsListFetched","reportRecordingsListPropertiesFetched","reportRecordingsListFilterAdded"]]}),Object(K.actions)({getSessionRecordings:!0,setFilters:function(t){return{filters:t}},replaceFilters:function(t){return{filters:t}},setShowFilters:function(t){return{showFilters:t}},setSelectedRecordingId:function(t){return{id:t}},loadNext:!0,loadPrev:!0}),Object(ne.loaders)(function(s){var t=s.props,o=s.values,n=s.actions;return{sessionRecordingsResponse:[{results:[],has_next:!1},{getSessionRecordings:function(){var r=h()(_.a.mark(function p(L,x){var P,v,T,y,z,ee;return _.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return v=W(W({},o.filters),{},{person_uuid:(P=t.personUUID)!==null&&P!==void 0?P:"",limit:w}),T=Object(oe.Fb)(v),$.next=4,x(100);case 4:return y=performance.now(),$.next=7,te.b.recordings.list(T);case 7:return z=$.sent,ee=performance.now()-y,n.reportRecordingsListFetched(ee),x(),$.abrupt("return",z);case 12:case"end":return $.stop()}},p)}));function i(p,L){return r.apply(this,arguments)}return i}()}],sessionRecordingsPropertiesResponse:[{results:[]},{getSessionRecordingsProperties:function(){var r=h()(_.a.mark(function p(L,x){var P,v,T,y,z;return _.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(o.sessionRecordingsResponse.results.length<1)){S.next=2;break}return S.abrupt("return",{results:[]});case 2:return P={session_ids:o.sessionRecordingsResponse.results.map(function($){var fe=$.id;return fe})},v=Object(oe.Fb)(P),S.next=6,x(100);case 6:return T=performance.now(),S.next=9,te.b.recordings.listProperties(v);case 9:return y=S.sent,z=performance.now()-T,n.reportRecordingsListPropertiesFetched(z),x(),S.abrupt("return",y);case 14:case"end":return S.stop()}},p)}));function i(p,L){return r.apply(this,arguments)}return i}()}]}}),Object(K.reducers)(function(s){var t=s.props;return{filters:[t.filters||Ee,{replaceFilters:function(n,r){var i=r.filters;return i},setFilters:function(n,r){var i=r.filters;return W(W({},n),i)}}],showFilters:[!1,{setShowFilters:function(n,r){var i=r.showFilters;return i}}],sessionRecordings:[[],{getSessionRecordingsSuccess:function(n,r){var i=r.sessionRecordingsResponse;return B()(i.results)},setSelectedRecordingId:function(n,r){var i=r.id;return B()(n.map(function(p){return p.id===i?W(W({},p),{},{viewed:!0}):W({},p)}))}}],selectedRecordingId:[null,{setSelectedRecordingId:function(n,r){var i=r.id;return i!=null?i:null}}]}}),Object(K.listeners)(function(s){var t=s.actions,o=s.values;return{setFilters:function(){t.getSessionRecordings()},replaceFilters:function(){t.getSessionRecordings()},loadNext:function(){var r;t.setFilters({offset:(((r=o.filters)===null||r===void 0?void 0:r.offset)||0)+w})},loadPrev:function(){var r;t.setFilters({offset:Math.max((((r=o.filters)===null||r===void 0?void 0:r.offset)||0)-w,0)})},getSessionRecordingsSuccess:function(){t.getSessionRecordingsProperties({})}}}),Object(K.selectors)({sessionRecordingIdToProperties:[function(s){return[s.sessionRecordingsPropertiesResponse]},function(s){var t;return(t=Object.fromEntries(s.results.map(function(o){var n=o.id,r=o.properties;return[n,r]})))!==null&&t!==void 0?t:{}}],activeSessionRecording:[function(s){return[s.selectedRecordingId,s.sessionRecordings]},function(s,t){return s?t.find(function(o){return o.id===s})||{id:s}:t[0]}],hasPrev:[function(s){return[s.filters]},function(s){return(s.offset||0)>0}],hasNext:[function(s){return[s.sessionRecordingsResponse]},function(s){return s.has_next}],totalFiltersCount:[function(s){return[s.filters]},function(s){var t,o,n;return((s==null||(t=s.actions)===null||t===void 0?void 0:t.length)||0)+((s==null||(o=s.events)===null||o===void 0?void 0:o.length)||0)+((s==null||(n=s.properties)===null||n===void 0?void 0:n.length)||0)}]}),Object(K.afterMount)(function(s){var t=s.actions;t.getSessionRecordings()}),Object(Z.actionToUrl)(function(s){var t=s.props,o=s.values;if(!t.updateSearchParams)return{};var n=function(i){var p={filters:o.filters},L=W({},Z.router.values.hashParams);return o.selectedRecordingId?L.sessionRecordingId=o.selectedRecordingId:delete L.sessionRecordingId,[Z.router.values.location.pathname,p,L,{replace:i}]};return{loadSessionRecordings:function(){return n(!0)},setSelectedRecordingId:function(){return n(!1)},setFilters:function(){return n(!0)}}}),Object(Z.urlToAction)(function(s){var t,o=s.actions,n=s.values,r=s.props,i=function(L,x,P){var v;if(!!r.updateSearchParams){var T=(v=P.sessionRecordingId)!==null&&v!==void 0?v:null;T!==n.selectedRecordingId&&o.setSelectedRecordingId(T);var y=x.filters;y&&(le()(y,n.filters)||o.replaceFilters(y))}};return t={},m()(t,q.a.sessionRecordings(),i),m()(t,q.a.sessionRecordings(Q.X.Recent),i),m()(t,q.a.person("*"),i),t})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(V,u,e){var M=e("./node_modules/css-loader/dist/runtime/api.js");u=M(!1),u.push([V.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),V.exports=u}}]);
