(window.webpackJsonp=window.webpackJsonp||[]).push([[300],{"./frontend/src/lib/components/Table/utils.tsx":function(K,u,t){"use strict";t.d(u,"a",function(){return m});var y=t("./frontend/src/lib/hooks/useWindowSize.js"),T=t("./frontend/src/lib/utils/responsiveUtils.tsx"),x=t("./node_modules/react/jsx-runtime.js"),U=t.n(x);function m(O){return Object(x.jsx)("span",{style:{whiteSpace:"nowrap"},children:O})}var p=function(I){var C=Object(y.a)(),L=C.width,r=Object(T.b)(I),a=!!L&&L<=r;return{isTableScrolling:a,tableScrollBreakpoint:r,tableScrollX:a?"max-content":"".concat(r,"px")}};try{m.displayName="normalizeColumnTitle",m.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:m.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(O){}try{p.displayName="useIsTableScrolling",p.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:p.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(O){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(K,u,t){"use strict";t.r(u),t.d(u,"scene",function(){return ee}),t.d(u,"FeatureFlags",function(){return S}),t.d(u,"groupFilters",function(){return h});var y=t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),T=t.n(y),x=t("./node_modules/core-js/modules/es.function.name.js"),U=t.n(x),m=t("./node_modules/core-js/modules/es.number.constructor.js"),p=t.n(m),O=t("./node_modules/core-js/modules/es.object.to-string.js"),I=t.n(O),C=t("./node_modules/core-js/modules/es.array.includes.js"),L=t.n(C),r=t("./node_modules/kea/lib/index.esm.js"),a=t("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),A=t("./node_modules/antd/es/tabs/index.js"),F=t("./frontend/src/lib/components/Link.tsx"),R=t("./frontend/src/lib/utils.tsx"),N=t("./frontend/src/lib/components/PageHeader.tsx"),z=t("./frontend/src/lib/components/Table/utils.tsx"),P=t("./frontend/src/scenes/urls.ts"),V=t("./frontend/src/lib/utils/stringWithWBR.tsx"),Y=t("./frontend/src/scenes/teamLogic.tsx"),f=t("./frontend/src/lib/components/LemonButton/index.ts"),H=t("./frontend/src/lib/components/LemonDivider/index.ts"),J=t("./frontend/src/lib/components/LemonTable/index.ts"),G=t("./frontend/src/lib/components/LemonButton/More.tsx"),W=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),X=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),$=t("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),Q=t("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),j=t("./frontend/@posthog/lemon-ui/src/index.ts"),Z=t("./frontend/src/lib/components/Tooltip.tsx"),k=t("./frontend/src/lib/components/icons.tsx"),B=t("./node_modules/kea-router/lib/index.js"),re=t.n(B),e=t("./node_modules/react/jsx-runtime.js"),ae=t.n(e),w=["active"],q=["created_by"],ee={component:S,logic:a.b};function te(){var l=Object(r.useValues)(Y.a),b=l.currentTeamId,o=Object(r.useValues)(a.b),E=o.featureFlagsLoading,c=o.searchedFeatureFlags,i=o.searchTerm,g=o.uniqueCreators,v=o.filters,D=Object(r.useActions)(a.b),ne=D.updateFeatureFlag,se=D.loadFeatureFlags,oe=D.setSearchTerm,M=D.setFeatureFlagsFilters,le=[{title:Object(z.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:function(s,n){return(s.key||"").localeCompare(n.key||"")},render:function(s,n){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-row items-center",children:[Object(e.jsx)(F.a,{to:n.id?P.a.featureFlag(n.id):void 0,className:"row-name",children:Object(V.a)(n.key,17)}),!n.can_edit&&Object(e.jsx)(Z.a,{title:"You don't have edit permissions for this feature flag.",children:Object(e.jsx)(k.IconLock,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})})]}),n.name&&Object(e.jsx)("span",{className:"row-description",style:{maxWidth:"24rem"},children:n.name})]})}},Object(W.b)(),Object(W.a)(),{title:"Release conditions",width:100,render:function(s,n){return h(n.filters.groups)}},{title:"Status",dataIndex:"active",sorter:function(s,n){return Number(s.active)-Number(n.active)},width:100,render:function(s,n){return Object(e.jsx)(e.Fragment,{children:n.performed_rollback?Object(e.jsx)(j.LemonTag,{type:"warning",className:"uppercase",children:"Rolled Back"}):n.active?Object(e.jsx)(j.LemonTag,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(j.LemonTag,{type:"default",className:"uppercase",children:"Disabled"})})}},{width:0,render:function(s,n){return Object(e.jsx)(G.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(f.a,{status:"stealth",onClick:function(){Object(R.s)(n.key,"feature flag key")},fullWidth:!0,children:"Copy feature flag key"}),Object(e.jsxs)(f.a,{status:"stealth",onClick:function(){n.id&&ne({id:n.id,payload:{active:!n.active}})},id:"feature-flag-".concat(n.id,"-switch"),disabled:!n.can_edit,fullWidth:!0,children:[n.active?"Disable":"Enable"," feature flag"]}),n.id&&Object(e.jsx)(f.a,{status:"stealth",fullWidth:!0,disabled:!n.can_edit,onClick:function(){return n.id&&B.router.actions.push(P.a.featureFlag(n.id))},children:"Edit"}),Object(e.jsx)(f.a,{status:"stealth",to:P.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(n.key)}),"data-attr":"usage",fullWidth:!0,children:"Try out in Insights"}),Object(e.jsx)(H.a,{}),n.id&&Object(e.jsx)(f.a,{status:"danger",onClick:function(){Object(R.x)({endpoint:"projects/".concat(b,"/feature_flags"),object:{name:n.key,id:n.id},callback:se})},disabled:!n.can_edit,fullWidth:!0,children:"Delete feature flag"})]})})}}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{children:Object(e.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(e.jsx)(j.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:oe,value:i}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Status"})}),Object(e.jsx)(j.LemonSelect,{onChange:function(s){if(s)if(s==="all"){if(v){var n=v.active,_=T()(v,w);M(_,!0)}}else M({active:s})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0}),Object(e.jsx)("span",{className:"ml-1",children:Object(e.jsx)("b",{children:"Created by"})}),Object(e.jsx)(j.LemonSelect,{onChange:function(s){if(s)if(s==="any"){if(v){var n=v.created_by,_=T()(v,q);M(_,!0)}}else M({created_by:s})},options:g,value:"any"})]})]})}),Object(e.jsx)(J.a,{dataSource:c,columns:le,rowKey:"key",loading:E,pagination:{pageSize:100},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table"})]})}function S(){var l=Object(r.useValues)(a.b),b=l.activeTab,o=Object(r.useActions)(a.b),E=o.setActiveTab;return Object(e.jsxs)("div",{className:"feature_flags",children:[Object(e.jsx)(N.a,{title:"Feature Flags",buttons:Object(e.jsx)(f.a,{type:"primary",to:P.a.featureFlag("new"),"data-attr":"new-feature-flag",children:"New feature flag"})}),Object(e.jsxs)(A.a,{activeKey:b,destroyInactiveTabPane:!0,onChange:function(i){return E(i)},children:[Object(e.jsx)(A.a.TabPane,{tab:"Overview",children:Object(e.jsx)(te,{})},"overview"),Object(e.jsx)(A.a.TabPane,{tab:"History",children:Object(e.jsx)($.a,{scope:Q.a.FEATURE_FLAG})},"history")]})]})}function h(l){if(l.length===0||!l.some(function(i){return i.rollout_percentage!==0}))return"No users";if(l.some(function(i){var g;return!((g=i.properties)!==null&&g!==void 0&&g.length)&&[null,void 0,100].includes(i.rollout_percentage)}))return"100% of all users";if(l.length===1){var b=l[0],o=b.properties,E=b.rollout_percentage,c=E===void 0?null:E;return(o==null?void 0:o.length)>0?Object(e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"},children:[c!=null&&Object(e.jsxs)("span",{style:{flexShrink:0,marginRight:5},children:[c,"% of"]}),Object(e.jsx)(X.a,{filters:o,style:{margin:0,flexDirection:"column"}})]}):c!==null?"".concat(c,"% of all users"):(console.error("A group with full rollout was not detected early"),"All users")}return"Multiple groups"}try{h.displayName="groupFilters",h.__docgenInfo={description:"",displayName:"groupFilters",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:h.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(l){}}}]);
