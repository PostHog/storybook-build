(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{5760:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createdAtColumn})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createdByColumn}));__webpack_require__(35);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),kea__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(67),_TimezoneAware__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(476),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(873);function createdAtColumn(){return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__.a)("Created"),render:function RenderCreatedAt(_,item){return item.created_at&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:{whiteSpace:"nowrap"}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_TimezoneAware__WEBPACK_IMPORTED_MODULE_5__.b,{time:item.created_at}))},sorter:function sorter(a,b){return new Date(a.created_at)>new Date(b.created_at)?1:-1}}}function createdByColumn(items){var user=Object(kea__WEBPACK_IMPORTED_MODULE_3__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__.a).user;return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__.a)("Created by"),render:function Render(_,item){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:{maxWidth:250,width:"auto"}},item.created_by?item.created_by.first_name||item.created_by.email:"-")},filters:Object(lib_utils__WEBPACK_IMPORTED_MODULE_2__.ub)(items.map((function(item){var _item$created_by,_item$created_by2,_item$created_by3;return item.created_by?{text:(null===(_item$created_by=item.created_by)||void 0===_item$created_by?void 0:_item$created_by.first_name)||(null===(_item$created_by2=item.created_by)||void 0===_item$created_by2?void 0:_item$created_by2.email),value:null===(_item$created_by3=item.created_by)||void 0===_item$created_by3?void 0:_item$created_by3.uuid}:{text:"(none)",value:null}})),(function(item){return null==item?void 0:item.value})).sort((function(a,b){return a.value===(null==user?void 0:user.uuid)?-10:b.value===(null==user?void 0:user.uuid)?10:(a.text+"").localeCompare(b.text+"")})),onFilter:function onFilter(value,item){var _item$created_by4;return null===value&&null===item.created_by||(null===(_item$created_by4=item.created_by)||void 0===_item$created_by4?void 0:_item$created_by4.uuid)===value},sorter:function sorter(a,b){var _a$created_by,_a$created_by2,_b$created_by,_b$created_by2;return((null===(_a$created_by=a.created_by)||void 0===_a$created_by?void 0:_a$created_by.first_name)||(null===(_a$created_by2=a.created_by)||void 0===_a$created_by2?void 0:_a$created_by2.email)||"").localeCompare((null===(_b$created_by=b.created_by)||void 0===_b$created_by?void 0:_b$created_by.first_name)||(null===(_b$created_by2=b.created_by)||void 0===_b$created_by2?void 0:_b$created_by2.email)||"")}}}try{createdByColumn.displayName="createdByColumn",createdByColumn.__docgenInfo={description:"",displayName:"createdByColumn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/Table.tsx#createdByColumn"]={docgenInfo:createdByColumn.__docgenInfo,name:"createdByColumn",path:"frontend/src/lib/components/Table/Table.tsx#createdByColumn"})}catch(__react_docgen_typescript_loader_error){}},6143:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"ActionsTable",(function(){return ActionsTable}));__webpack_require__(38),__webpack_require__(59),__webpack_require__(35),__webpack_require__(168),__webpack_require__(64),__webpack_require__(250),__webpack_require__(79),__webpack_require__(248);var toConsumableArray=__webpack_require__(17),toConsumableArray_default=__webpack_require__.n(toConsumableArray),slicedToArray=__webpack_require__(14),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Link=(__webpack_require__(878),__webpack_require__(56)),input=__webpack_require__(713),es_radio=__webpack_require__(1173),table=__webpack_require__(2639),CheckOutlined=__webpack_require__(879),EditOutlined=__webpack_require__(2632),DeleteOutlined=__webpack_require__(5646),ExportOutlined=__webpack_require__(5729),QuestionCircleOutlined=__webpack_require__(2634),utils=__webpack_require__(11),index_esm=__webpack_require__(1),actionsModel=__webpack_require__(480),es_button=__webpack_require__(108),modal=__webpack_require__(1197),row=__webpack_require__(360),col=__webpack_require__(233),card=__webpack_require__(5669),EditAppUrls=__webpack_require__(1823),SearchOutlined=__webpack_require__(1186),lib=__webpack_require__(20),urls=__webpack_require__(24);function NewActionButton(){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),visible=_useState2[0],setVisible=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),appUrlsVisible=_useState4[0],setAppUrlsVisible=_useState4[1];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(es_button.a,{type:"primary",onClick:function onClick(){return setVisible(!0)},"data-attr":"create-action"},"+ New Action"),react_default.a.createElement(modal.a,{visible:visible,style:{cursor:"pointer"},onCancel:function onCancel(){setVisible(!1),setAppUrlsVisible(!1)},title:"Create new action",footer:[appUrlsVisible&&react_default.a.createElement(es_button.a,{key:"back-button",onClick:function onClick(){return setAppUrlsVisible(!1)}},"Back"),react_default.a.createElement(es_button.a,{key:"cancel-button",onClick:function onClick(){setVisible(!1),setAppUrlsVisible(!1)}},"Cancel")]},!appUrlsVisible&&react_default.a.createElement(row.a,{gutter:2,justify:"space-between"},react_default.a.createElement(col.a,{xs:11},react_default.a.createElement(card.a,{title:"Inspect element on your site",onClick:function onClick(){return setAppUrlsVisible(!0)},size:"small"},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40}},react_default.a.createElement(SearchOutlined.a,null)))),react_default.a.createElement(col.a,{xs:11},react_default.a.createElement(card.a,{title:"From event or pageview",onClick:function onClick(){lib.router.actions.push(urls.a.createAction())},size:"small"},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},react_default.a.createElement(EditOutlined.a,null))))),appUrlsVisible&&react_default.a.createElement(EditAppUrls.a,{allowNavigation:!0})))}var actions_tutorial_grouping=__webpack_require__.p+"images/actions-tutorial-grouping.c9c565ed9cae79997aa714fdf8196aca.svg",actions_tutorial_standardized=__webpack_require__.p+"images/actions-tutorial-standardized.3935760a1606361ee014ad5615d6e22a.svg",actions_tutorial_retroactive=__webpack_require__.p+"images/actions-tutorial-retroactive.8bcf9190e81ba5d434572271b9f632be.svg",types=__webpack_require__(6),fuse_esm=__webpack_require__(327),userLogic=__webpack_require__(67),Table=__webpack_require__(5760),PageHeader=__webpack_require__(325),responsiveUtils=__webpack_require__(296),teamLogic=__webpack_require__(26),events=__webpack_require__(1814),api=__webpack_require__(21),scene={component:ActionsTable,logic:actionsModel.a,paramsToProps:function paramsToProps(){return{params:"include_count=1"}}};function ActionsTable(){var _actions$,currentTeam=Object(index_esm.useValues)(teamLogic.a).currentTeam,_useValues2=Object(index_esm.useValues)(Object(actionsModel.a)({params:"include_count=1"})),actions=_useValues2.actions,actionsLoading=_useValues2.actionsLoading,loadActions=Object(index_esm.useActions)(actionsModel.a).loadActions,_useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),filterByMe=_useState4[0],setFilterByMe=_useState4[1],user=Object(index_esm.useValues)(userLogic.a).user,tableScrollBreakpoint=Object(responsiveUtils.b)("lg"),columns=[{title:"Name",key:"name",sorter:function sorter(a,b){return(""+a.name).localeCompare(b.name)},render:function RenderName(_,action,index){return react_default.a.createElement(Link.a,{"data-attr":"action-link-"+index,to:urls.a.action(action.id)},action.name)}}].concat(toConsumableArray_default()(null!==(null===(_actions$=actions[0])||void 0===_actions$?void 0:_actions$.count)?[{title:"Volume",render:function RenderVolume(action){return react_default.a.createElement("span",null,action.count)},sorter:function sorter(a,b){return(a.count||0)-(b.count||0)}}]:[]),[{title:"Type",render:function RenderType(action){var _action$steps;return react_default.a.createElement("span",null,null===(_action$steps=action.steps)||void 0===_action$steps?void 0:_action$steps.map((function(step){return react_default.a.createElement("div",{key:step.id},function(){var url=Object(utils.nb)(step.url||"");switch(url=url.slice(0,40)+(url.length>40?"...":""),step.event){case"$autocapture":return"Autocapture";case"$pageview":switch(step.url_matching){case"regex":return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL matches regex ",react_default.a.createElement("strong",null,url));case"exact":return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL matches exactly ",react_default.a.createElement("strong",null,url));default:return react_default.a.createElement(react_default.a.Fragment,null,"Page view URL contains ",react_default.a.createElement("strong",null,url))}default:return react_default.a.createElement(react_default.a.Fragment,null,"Event: ",react_default.a.createElement("strong",null,step.event))}}())})))}},Object(Table.a)(),Object(Table.b)(actions)],toConsumableArray_default()((null==currentTeam?void 0:currentTeam.slack_incoming_webhook)?[{title:"Webhook",key:"post_to_slack",sorter:function sorter(a,b){return Number(a.post_to_slack)-Number(b.post_to_slack)},render:function RenderActions(action){return action.post_to_slack?react_default.a.createElement(CheckOutlined.a,null):null}}]:[]),[{title:"",render:function RenderActions(action){var params={insight:types.n.TRENDS,interval:"day",display:"ActionsLineGraph",actions:[{id:action.id,name:action.name,type:"actions",order:0}]},encodedParams=Object(utils.qb)(params),actionsLink="/insights?".concat(encodedParams,"#backTo=Actions&backToURL=").concat(window.location.pathname);return react_default.a.createElement("span",null,react_default.a.createElement(Link.a,{to:urls.a.action(action.id)},react_default.a.createElement(EditOutlined.a,null)),react_default.a.createElement(utils.b,{endpoint:api.a.actions.determineDeleteEndpoint(),object:action,className:"text-danger",style:{marginLeft:8,marginRight:8},callback:loadActions},react_default.a.createElement(DeleteOutlined.a,null)),react_default.a.createElement(Link.a,{to:"".concat(actionsLink),"data-attr":"actions-table-usage"},"Insights ",react_default.a.createElement(ExportOutlined.a,null)))}}]),data=actions;return searchTerm&&""!==searchTerm&&(data=function searchActions(sources,search){return new fuse_esm.a(sources,{keys:["name","url"],threshold:.3}).search(search).map((function(result){return result.item}))}(data,searchTerm)),filterByMe&&(data=data.filter((function(item){var _item$created_by;return(null===(_item$created_by=item.created_by)||void 0===_item$created_by?void 0:_item$created_by.uuid)===(null==user?void 0:user.uuid)}))),react_default.a.createElement("div",{"data-attr":"manage-events-table",style:{paddingTop:32}},react_default.a.createElement(events.d,{tab:events.b.Actions}),react_default.a.createElement(PageHeader.a,{title:"Actions",caption:react_default.a.createElement(react_default.a.Fragment,null,"Actions can retroactively group one or more raw events to help provide consistent analytics."," ",react_default.a.createElement("a",{href:"https://posthog.com/docs/features/actions?utm_medium=in-product&utm_campaign=actions-table",target:"_blank"},react_default.a.createElement(QuestionCircleOutlined.a,null))),style:{marginTop:0}}),react_default.a.createElement("div",null,react_default.a.createElement("div",null),react_default.a.createElement("div",{className:"tutorial-container"},react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_grouping,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Multiple grouping"),react_default.a.createElement("div",{className:"description"},"Group multiple sets of events into a single action."))),react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_standardized,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Clean & standardized data"),react_default.a.createElement("div",{className:"description"},"Keep your actions the same, even if your product or data changes."))),react_default.a.createElement("div",{className:"t-element"},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:actions_tutorial_retroactive,alt:""})),react_default.a.createElement("div",null,react_default.a.createElement("div",{className:"title"},"Retroactive"),react_default.a.createElement("div",{className:"description"},"We'll retroactively update your actions to match any past events."))))),react_default.a.createElement(input.a.Search,{allowClear:!0,enterButton:!0,autoFocus:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function onChange(e){setSearchTerm(e.target.value)}}),react_default.a.createElement(es_radio.a.Group,{buttonStyle:"solid",value:filterByMe,onChange:function onChange(e){return setFilterByMe(e.target.value)}},react_default.a.createElement(es_radio.a.Button,{value:!1},"All actions"),react_default.a.createElement(es_radio.a.Button,{value:!0},"My actions")),react_default.a.createElement("div",{className:"mb float-right"},react_default.a.createElement(NewActionButton,null)),react_default.a.createElement("br",null),react_default.a.createElement(table.a,{size:"small",columns:columns,loading:actionsLoading,rowKey:"id",pagination:{pageSize:100,hideOnSinglePage:!0},"data-attr":"actions-table",dataSource:data,locale:{emptyText:"The first step to standardized analytics is creating your first action."},scroll:{x:"".concat(tableScrollBreakpoint,"px")}}))}}}]);