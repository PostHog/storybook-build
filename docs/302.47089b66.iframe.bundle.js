"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[302],{"../../frontend/src/scenes/data-pipelines/DataPipelinesScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DataPipelinesScene:()=>DataPipelinesScene,dataPipelinesSceneLogic:()=>dataPipelinesSceneLogic,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),ActivityLog=__webpack_require__("../../frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),LemonTabs=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),types=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/types.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),src_types=__webpack_require__("../../frontend/src/types.ts"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),ProductIntroduction=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),hog_function_utils=__webpack_require__("../../frontend/src/scenes/hog-functions/hog-function-utils.ts"),HogFunctionTemplateList=__webpack_require__("../../frontend/src/scenes/hog-functions/list/HogFunctionTemplateList.tsx"),HogFunctionsList=__webpack_require__("../../frontend/src/scenes/hog-functions/list/HogFunctionsList.tsx"),hogFunctionsListLogic=__webpack_require__("../../frontend/src/scenes/hog-functions/list/hogFunctionsListLogic.tsx"),SceneSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneSection.tsx"),nonHogFunctionTemplatesLogic=__webpack_require__("../../frontend/src/scenes/data-pipelines/utils/nonHogFunctionTemplatesLogic.tsx"),kea_loaders_lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),featureFlagLogic=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),sourceWizardLogic=__webpack_require__("../../frontend/src/scenes/data-warehouse/new/sourceWizardLogic.tsx"),userLogic=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),BatchExportIcon=__webpack_require__("../../frontend/src/scenes/data-pipelines/batch-exports/BatchExportIcon.tsx");let nonHogFunctionsLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","data-pipelines","utils","nonHogFunctionsLogic",key]),(0,index_esm.connect)(()=>({values:[sourceWizardLogic.sourceWizardLogic,["connectors"],featureFlagLogic.featureFlagLogic,["featureFlags"],userLogic.userLogic,["user"]]})),(0,kea_loaders_lib.loaders)(()=>({hogFunctionPluginsDestinations:[null,{loadHogFunctionPluginsDestinations:async()=>{let[pluginConfigs,plugins]=await Promise.all([api.ZP.loadPaginatedResults("api/projects/@current/pipeline_destination_configs"),api.ZP.loadPaginatedResults("api/organizations/@current/pipeline_destinations")]),pluginsById=Object.fromEntries(plugins.map(plugin=>[plugin.id,plugin])),hogfunctions=[];for(let pluginConfig of pluginConfigs){var _plugin$icon;let plugin=pluginsById[pluginConfig.plugin],iconUrl=null!==(_plugin$icon=plugin.icon)&&void 0!==_plugin$icon?_plugin$icon:"static/images/plugin-default.png";try{let{user,repo,path}=(0,utils.iw)(plugin.url||"");iconUrl=`https://raw.githubusercontent.com/${user}/${repo}/${path||"main"}/logo.png`}catch{}hogfunctions.push({id:`plugin-${pluginConfig.id}`,name:pluginConfig.name||plugin?.name||"Unknown app",description:pluginConfig.description||plugin?.description||"",type:"destination",created_by:null,created_at:"",updated_at:pluginConfig.updated_at,enabled:pluginConfig.enabled,execution_order:void 0,hog:"",icon_url:iconUrl})}return hogfunctions}}],hogFunctionPluginsSiteApps:[null,{loadHogFunctionPluginsSiteApps:async()=>{let[pluginConfigs,plugins]=await Promise.all([api.ZP.loadPaginatedResults("api/projects/@current/pipeline_frontend_apps_configs"),api.ZP.loadPaginatedResults("api/organizations/@current/pipeline_frontend_apps")]),pluginsById=Object.fromEntries(plugins.map(plugin=>[plugin.id,plugin])),hogfunctions=[];for(let pluginConfig of pluginConfigs){var _plugin$icon2;let plugin=pluginsById[pluginConfig.plugin],iconUrl=null!==(_plugin$icon2=plugin.icon)&&void 0!==_plugin$icon2?_plugin$icon2:"static/images/plugin-default.png";try{let{user,repo,path}=(0,utils.iw)(plugin.url||"");iconUrl=`https://raw.githubusercontent.com/${user}/${repo}/${path||"main"}/logo.png`}catch{}hogfunctions.push({id:`plugin-${pluginConfig.id}`,name:pluginConfig.name||plugin?.name||"Unknown app",description:pluginConfig.description||plugin?.description||"",type:"destination",created_by:null,created_at:"",updated_at:pluginConfig.updated_at,enabled:pluginConfig.enabled,execution_order:void 0,hog:"",icon_url:iconUrl})}return hogfunctions}}],hogFunctionBatchExports:[null,{loadHogFunctionBatchExports:async()=>{let results=(await api.ZP.batchExports.list()).results,hogFunctions=[];for(let batchExport of results)hogFunctions.push({id:`batch-export-${batchExport.id}`,name:batchExport.name,description:`${batchExport.destination.type} batch export`,type:"destination",created_by:null,created_at:batchExport.created_at,updated_at:batchExport.created_at,enabled:!batchExport.paused,hog:"",icon_url:BatchExportIcon.EL[batchExport.destination.type],execution_order:void 0});return hogFunctions}}]}))]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let MAPPING={destination:{key:src_types.Md.PIPELINE_DESTINATIONS,description:"Destinations allow you to send your data to external systems."},transformation:{key:src_types.Md.PIPELINE_TRANSFORMATIONS,description:"Transformations let you modify, filter, and enrich event data to improve data quality, privacy, and consistency."},site_app:{key:src_types.Md.SITE_APPS,description:"Site apps allow you to add custom functionality to your website using PostHog."}};function DataPipelinesHogFunctions(_ref){let{kind,additionalKinds,action}=_ref,humanizedKind=(0,hog_function_utils.S)(kind),logicKey=`data-pipelines-hog-functions-${kind}`,{hogFunctions,loading}=(0,index_esm.useValues)((0,hogFunctionsListLogic.Se)({logicKey,type:kind,additionalTypes:additionalKinds})),{hogFunctionPluginsDestinations,hogFunctionBatchExports,hogFunctionPluginsSiteApps}=(0,index_esm.useValues)(nonHogFunctionsLogic),{loadHogFunctionPluginsDestinations,loadHogFunctionBatchExports,loadHogFunctionPluginsSiteApps}=(0,index_esm.useActions)(nonHogFunctionsLogic),{hogFunctionTemplatesBatchExports}=(0,index_esm.useValues)(nonHogFunctionTemplatesLogic.a);(0,react.useEffect)(()=>{"destination"===kind&&(loadHogFunctionPluginsDestinations(),loadHogFunctionBatchExports()),"site_app"===kind&&loadHogFunctionPluginsSiteApps()},[kind]);let productInfoMapping=MAPPING[kind];return(0,jsx_runtime.jsxs)(SceneContent._,{children:[productInfoMapping?(0,jsx_runtime.jsx)(ProductIntroduction.C,{productName:`Pipeline ${humanizedKind}s`,thingName:humanizedKind,productKey:productInfoMapping.key,description:productInfoMapping.description,docsURL:"https://posthog.com/docs/cdp",actionElementOverride:action,isEmpty:0===hogFunctions.length&&!loading}):null,(0,jsx_runtime.jsx)(SceneSection.S,{children:(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:logicKey,type:kind,additionalTypes:additionalKinds,manualFunctions:"destination"===kind?[...null!=hogFunctionPluginsDestinations?hogFunctionPluginsDestinations:[],...null!=hogFunctionBatchExports?hogFunctionBatchExports:[]]:"site_app"===kind?[...null!=hogFunctionPluginsSiteApps?hogFunctionPluginsSiteApps:[]]:void 0})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:`Create a new ${humanizedKind}`,children:(0,jsx_runtime.jsx)(HogFunctionTemplateList.a,{type:kind,additionalTypes:additionalKinds,manualTemplates:hogFunctionTemplatesBatchExports,hideComingSoonByDefault:!0})})]})}var FlaggedFeature=__webpack_require__("../../frontend/src/lib/components/FlaggedFeature.tsx"),useOnMountEffect=__webpack_require__("../../frontend/src/lib/hooks/useOnMountEffect.ts"),DataWarehouseManagedSourcesTable=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseManagedSourcesTable.tsx"),LemonTableLink=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),DataWarehouseSourceIcon=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseSourceIcon.tsx"),dataWarehouseSettingsLogic=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/dataWarehouseSettingsLogic.ts");function DataWarehouseSelfManagedSourcesTable(){let{filteredSelfManagedTables,searchTerm}=(0,index_esm.useValues)(dataWarehouseSettingsLogic.T),{deleteSelfManagedTable,refreshSelfManagedTableSchema,setSearchTerm}=(0,index_esm.useActions)(dataWarehouseSettingsLogic.T);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"flex gap-2 justify-between items-center mb-4",children:(0,jsx_runtime.jsx)(src.DF,{type:"search",placeholder:"Search...",onChange:setSearchTerm,value:searchTerm})}),(0,jsx_runtime.jsx)(src.g3,{id:"self-managed-sources",dataSource:filteredSelfManagedTables,pagination:{pageSize:10},columns:[{width:0,render:(_,item)=>(0,jsx_runtime.jsx)(DataWarehouseSourceIcon.Ug,{type:(0,DataWarehouseSourceIcon.Zi)(item.url_pattern)})},{title:"Source",dataIndex:"name",key:"name",render:(_,item)=>(0,jsx_runtime.jsx)(LemonTableLink.i,{to:urls.j.dataWarehouseSource(`self-managed-${item.id}`),title:item.name})},{key:"actions",render:(_,item)=>(0,jsx_runtime.jsxs)("div",{className:"flex flex-row justify-end",children:[(0,jsx_runtime.jsx)(src.Jp,{"data-attr":`refresh-data-warehouse-${item.name}`,onClick:()=>refreshSelfManagedTableSchema(item.id),children:"Update schema from source"},`refresh-data-warehouse-${item.name}`),(0,jsx_runtime.jsx)(src.Jp,{status:"danger","data-attr":`delete-data-warehouse-${item.name}`,onClick:()=>{src.dn.open({title:"Delete table?",description:"Table deletion cannot be undone. All views and joins related to this table will be deleted.",primaryButton:{children:"Delete",status:"danger",onClick:()=>{deleteSelfManagedTable(item.id)}},secondaryButton:{children:"Cancel"}})},children:"Delete"},`delete-data-warehouse-${item.name}`)]})}]})]})}function DataPipelinesOverview(){let{hogFunctionPluginsDestinations,hogFunctionBatchExports}=(0,index_esm.useValues)(nonHogFunctionsLogic),{loadHogFunctionPluginsDestinations,loadHogFunctionBatchExports}=(0,index_esm.useActions)(nonHogFunctionsLogic);return(0,useOnMountEffect.x)(()=>{loadHogFunctionPluginsDestinations(),loadHogFunctionBatchExports()}),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,jsx_runtime.jsx)(FlaggedFeature.P,{flag:"cdp-hog-sources",children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneSection.S,{title:"Event sources",actions:(0,jsx_runtime.jsx)(src.rU,{to:urls.j.dataPipelines("sources"),children:"See all"}),children:(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:"overview-data-sources",type:"source_webhook"})}),(0,jsx_runtime.jsx)(SceneDivider.V,{})]})}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Managed data warehouse sources",actions:(0,jsx_runtime.jsx)(src.rU,{to:urls.j.dataPipelines("sources"),children:"See all"}),children:(0,jsx_runtime.jsx)(DataWarehouseManagedSourcesTable.lL,{})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Self-managed data warehouse sources",actions:(0,jsx_runtime.jsx)(src.rU,{to:urls.j.dataPipelines("sources"),children:"See all"}),children:(0,jsx_runtime.jsx)(DataWarehouseSelfManagedSourcesTable,{})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Transformations",description:"Modify and enrich your incoming data. Only active transformations are shown here.",actions:(0,jsx_runtime.jsx)(src.rU,{to:urls.j.dataPipelines("transformations"),children:"See all"}),children:(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:"transformation",type:"transformation",hideFeedback:!0})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Destinations",description:"Send your data to destinations in real time or with batch exports. Only active Destinations are shown here.",actions:(0,jsx_runtime.jsx)(src.rU,{to:urls.j.dataPipelines("destinations"),children:"See all"}),children:(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:"destination",type:"destination",hideFeedback:!0,manualFunctions:[...null!=hogFunctionPluginsDestinations?hogFunctionPluginsDestinations:[],...null!=hogFunctionBatchExports?hogFunctionBatchExports:[]]})})]})})}function DataPipelinesSources(_ref){let{action}=_ref,{dataWarehouseSources,dataWarehouseSourcesLoading}=(0,index_esm.useValues)(dataWarehouseSettingsLogic.T);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-4",children:[dataWarehouseSourcesLoading||dataWarehouseSources?.results.length!==0?null:(0,jsx_runtime.jsx)(ProductIntroduction.C,{productName:"Data Warehouse Source",productKey:src_types.Md.DATA_WAREHOUSE,thingName:"data source",description:"Use data warehouse sources to import data from your external data into PostHog.",isEmpty:0===dataWarehouseSources.results.length&&!dataWarehouseSourcesLoading,docsURL:"https://posthog.com/docs/data-warehouse",actionElementOverride:action}),(0,jsx_runtime.jsx)(FlaggedFeature.P,{flag:"cdp-hog-sources",children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneSection.S,{title:(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-2",children:["Event sources",(0,jsx_runtime.jsx)(src.oe,{type:"primary",size:"small",children:"Experimental"})]}),description:"PostHog can expose a webhook that you can configure however you need to receive data from a 3rd party with no in-between service necessary",children:(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:"data-pipelines-hog-functions-source-webhook",type:"source_webhook"})}),(0,jsx_runtime.jsx)(SceneDivider.V,{})]})}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Managed data warehouse sources",description:"PostHog can connect to external sources and automatically import data from them into the PostHog data warehouse",children:(0,jsx_runtime.jsx)(DataWarehouseManagedSourcesTable.lL,{})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(SceneSection.S,{title:"Self-managed data warehouse sources",description:"Connect to your own data sources, making them queryable in PostHog",children:(0,jsx_runtime.jsx)(DataWarehouseSelfManagedSourcesTable,{})})]})}let DATA_PIPELINES_SCENE_TABS=["overview","sources","transformations","destinations","site_apps","history"],dataPipelinesSceneLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.path)(()=>["scenes","data-pipelines","dataPipelinesSceneLogic"]),(0,index_esm.actions)({setCurrentTab:tab=>({tab})}),(0,index_esm.reducers)(()=>({currentTab:["overview",{setCurrentTab:(_,_ref)=>{let{tab}=_ref;return tab}}]})),(0,index_esm.selectors)({logicProps:[()=>[(_,props)=>props],props=>props],breadcrumbs:[()=>[(_,props)=>props],_ref2=>{let{kind}=_ref2;return[{key:sceneTypes.x.DataPipelines,name:"Data pipelines",path:urls.j.dataPipelines(),iconType:"data_pipeline"},{key:[sceneTypes.x.DataPipelines,kind],name:(0,utils.fm)(kind.replaceAll("_"," ")),iconType:"data_pipeline"}]}],[types.f]:[()=>[],()=>({activity_scope:src_types.jc.HOG_FUNCTION})]}),(0,index_esm.listeners)({setCurrentTab:_ref3=>{let{tab}=_ref3;lib.router.actions.push(urls.j.dataPipelines(tab))}}),(0,lib.urlToAction)(_ref4=>{let{actions,values}=_ref4;return{[urls.j.dataPipelines(":kind")]:_ref5=>{let{kind}=_ref5,possibleTab=null!=kind?kind:"overview",tab=DATA_PIPELINES_SCENE_TABS.includes(possibleTab)?possibleTab:"overview";tab!==values.currentTab&&actions.setCurrentTab(tab)}}})]),scene={component:DataPipelinesScene,logic:dataPipelinesSceneLogic,paramsToProps:_ref7=>{let{params:{kind}}=_ref7;return{kind}}};function DataPipelineTabs(_ref8){let{action}=_ref8,{currentTab}=(0,index_esm.useValues)(dataPipelinesSceneLogic),{setCurrentTab}=(0,index_esm.useActions)(dataPipelinesSceneLogic),tabs=[{label:"Overview",key:"overview",content:(0,jsx_runtime.jsx)(DataPipelinesOverview,{})},{label:"Sources",key:"sources",content:(0,jsx_runtime.jsx)(DataPipelinesSources,{action:action})},{label:"Transformations",key:"transformations",content:(0,jsx_runtime.jsx)(DataPipelinesHogFunctions,{kind:"transformation",action:action})},{label:"Destinations",key:"destinations",content:(0,jsx_runtime.jsx)(DataPipelinesHogFunctions,{kind:"destination",additionalKinds:["site_destination"],action:action})},{label:"Apps",key:"site_apps",content:(0,jsx_runtime.jsx)(DataPipelinesHogFunctions,{kind:"site_app",action:action})},{label:"History",key:"history",content:(0,jsx_runtime.jsx)(ActivityLog.DA,{scope:[src_types.jc.HOG_FUNCTION]})}];return(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:currentTab,tabs:tabs,onChange:setCurrentTab,sceneInset:!0})}function DataPipelinesScene(){let{currentTab}=(0,index_esm.useValues)(dataPipelinesSceneLogic),menuItems=[{label:"Source",to:urls.j.dataPipelinesNew("source"),"data-attr":"data-warehouse-data-pipelines-overview-new-source"},{label:"Transformation",to:urls.j.dataPipelinesNew("transformation")},{label:"Destination",to:urls.j.dataPipelinesNew("destination")}],SceneAction=()=>"overview"===currentTab?(0,jsx_runtime.jsx)(src.d6,{items:menuItems,children:(0,jsx_runtime.jsx)(src.Jp,{"data-attr":"new-pipeline-button",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),size:"small",type:"primary",children:"New"})}):"sources"===currentTab?(0,jsx_runtime.jsx)(src.Jp,{to:urls.j.dataPipelinesNew("source"),type:"primary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),size:"small",children:"New source"}):"transformations"===currentTab?(0,jsx_runtime.jsx)(src.Jp,{to:urls.j.dataPipelinesNew("transformation"),type:"primary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),size:"small",children:"New transformation"}):"destinations"===currentTab?(0,jsx_runtime.jsx)(src.Jp,{to:urls.j.dataPipelinesNew("destination"),type:"primary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),size:"small",children:"New destination"}):(0,jsx_runtime.jsx)(src.Jp,{to:urls.j.dataPipelinesNew("site_app"),type:"primary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),size:"small",children:"New app"});return(0,jsx_runtime.jsxs)(SceneContent._,{children:[(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:"Data pipelines",description:"Ingest, transform, and send data between hundreds of tools.",resourceType:{type:"data_pipeline"},actions:(0,jsx_runtime.jsx)(SceneAction,{})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(DataPipelineTabs,{action:(0,jsx_runtime.jsx)(SceneAction,{})})]})}},"../../frontend/src/scenes/data-pipelines/batch-exports/BatchExportIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EL:()=>BATCH_EXPORT_ICON_MAP,oe:()=>RenderBatchExportIcon});var src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),running_hog=__webpack_require__("../../frontend/public/hedgehog/running-hog.png"),aws_s3=__webpack_require__("../../frontend/public/services/aws-s3.png");let bigquery=__webpack_require__.p+"images/bigquery.1bd7c5187189fe1c78abeab849f5e0ec.png",postgres=__webpack_require__.p+"images/postgres.dc5b1b72f73b1a6c2c9d6d354a204e17.png",redshift=__webpack_require__.p+"images/redshift.943a52a8ba366d75ef13b578c582e1f4.png",snowflake=__webpack_require__.p+"images/snowflake.e08a91548c74ea3172ae2f0c9d22b0f8.png";var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function getBatchExportUrl(service){return`https://posthog.com/docs/cdp/batch-exports/${service.toLowerCase()}`}let BATCH_EXPORT_ICON_MAP={BigQuery:bigquery,Postgres:postgres,Redshift:redshift,S3:aws_s3.Z,Snowflake:snowflake,HTTP:running_hog.Z};function RenderBatchExportIcon(_ref){let{type,size="small"}=_ref,icon=BATCH_EXPORT_ICON_MAP[type],sizePx="small"===size?30:60;return(0,jsx_runtime.jsx)("div",{className:"flex gap-4 items-center",children:(0,jsx_runtime.jsx)(src.u,{title:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[type,(0,jsx_runtime.jsx)("br",{}),"Click to view docs"]}),children:(0,jsx_runtime.jsx)(src.rU,{to:getBatchExportUrl(type),children:(0,jsx_runtime.jsx)("img",{src:icon,alt:type,height:sizePx,width:sizePx})})})})}},"../../frontend/src/scenes/data-pipelines/batch-exports/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>normalizeBatchExportService,x:()=>humanizeBatchExportName});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/types.ts");let humanizeBatchExportName=service=>"HTTP"===service?"PostHog HTTP":service,normalizeBatchExportService=service=>{var _BATCH_EXPORT_SERVICE;return null!==(_BATCH_EXPORT_SERVICE=_types__WEBPACK_IMPORTED_MODULE_0__.e2.find(s=>s.toLowerCase()===service.toLowerCase()))&&void 0!==_BATCH_EXPORT_SERVICE?_BATCH_EXPORT_SERVICE:service}},"../../frontend/src/scenes/data-pipelines/utils/nonHogFunctionTemplatesLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>nonHogFunctionTemplatesLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/constants.tsx"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),scenes_data_pipelines_batch_exports_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/data-pipelines/batch-exports/utils.ts"),scenes_data_warehouse_new_sourceWizardLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/data-warehouse/new/sourceWizardLogic.tsx"),scenes_data_warehouse_settings_DataWarehouseSourceIcon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseSourceIcon.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/types.ts"),_batch_exports_BatchExportIcon__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/scenes/data-pipelines/batch-exports/BatchExportIcon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let nonHogFunctionTemplatesLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["scenes","data-pipelines","utils","nonHogFunctionTemplatesLogic",key]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(_ref=>{let{availableSources}=_ref;return{values:[(0,scenes_data_warehouse_new_sourceWizardLogic__WEBPACK_IMPORTED_MODULE_5__.sourceWizardLogic)({availableSources}),["connectors","manualConnectors"],lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_3__.featureFlagLogic,["featureFlags"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_7__.userLogic,["user"]]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({hogFunctionTemplatesDataWarehouseSources:[s=>[s.connectors,s.manualConnectors],(connectors,manualConnectors)=>[...connectors.map(connector=>{var _connector$label;return{id:`managed-${connector.name}`,type:"source",name:null!==(_connector$label=connector.label)&&void 0!==_connector$label?_connector$label:connector.name,icon_url:connector.iconPath,status:connector.unreleasedSource?"coming_soon":connector.betaSource?"beta":"stable",description:connector.unreleasedSource?"Get notified when this source is available to connect":(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:["Data will be synced to PostHog and regularly refreshed."," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.rU,{to:"https://posthog.com/docs/cdp/sources",children:"Learn more"})]}),code:"",code_language:"hog",inputs_schema:[],filters:null,masking:null,free:!0,flag:connector.featureFlag}}),...manualConnectors.map(source=>({id:`self-managed-${source.type}`,type:"source",name:source.name,icon_url:scenes_data_warehouse_settings_DataWarehouseSourceIcon__WEBPACK_IMPORTED_MODULE_6__.hU[source.type],status:"stable",description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:["Data will be queried directly from your data source that you manage."," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.rU,{to:"https://posthog.com/docs/cdp/sources",children:"Learn more"})]}),code:"",code_language:"hog",inputs_schema:[],filters:null,masking:null,free:!0}))]],hogFunctionTemplatesBatchExports:[s=>[s.featureFlags,s.user],(featureFlags,user)=>{let httpEnabled=featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_2__.y8.BATCH_EXPORTS_POSTHOG_HTTP]||user?.is_impersonated||user?.is_staff;return _types__WEBPACK_IMPORTED_MODULE_8__.e2.filter(service=>!!httpEnabled||"HTTP"!==service).map(service=>({id:`batch-export-${service}`,type:"destination",name:(0,scenes_data_pipelines_batch_exports_utils__WEBPACK_IMPORTED_MODULE_4__.x)(service),icon_url:_batch_exports_BatchExportIcon__WEBPACK_IMPORTED_MODULE_9__.EL[service],status:"stable",code:"",code_language:"hog",inputs_schema:[],filters:null,masking:null,free:!1,description:`${service} batch export`}))}]})])}}]);