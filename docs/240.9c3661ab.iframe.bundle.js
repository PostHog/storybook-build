(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{"./frontend/src/scenes/groups/groupsListLogic.ts":function(D,d,e){"use strict";e.d(d,"a",function(){return G});var l=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=e.n(l),f=e("./node_modules/@babel/runtime/regenerator/index.js"),a=e.n(f),j=e("./node_modules/core-js/modules/es.array.iterator.js"),z=e.n(j),V=e("./node_modules/core-js/modules/es.object.to-string.js"),S=e.n(V),O=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$=e.n(O),M=e("./node_modules/core-js/modules/es.array.concat.js"),K=e.n(M),U=e("./node_modules/kea/lib/index.esm.js"),g=e("./frontend/src/lib/api.ts"),b=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),L=e("./frontend/src/lib/utils.tsx"),u=e("./frontend/src/scenes/teamLogic.ts"),P=e("./frontend/src/scenes/urls.ts"),R=e("./frontend/src/models/groupsModel.ts"),G=Object(U.kea)({path:["groups","groupsListLogic"],connect:{values:[u.a,["currentTeamId"],R.a,["groupTypes","aggregationLabel"],b.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(n){return{url:n}},setTab:function(n){return{tab:n}}}},loaders:function(r){var n=r.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var c=s()(a.a.mark(function x(B){var C;return a.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(C=B.url,!n.groupsEnabled){T.next=6;break}return C=C||"api/projects/".concat(n.currentTeamId,"/groups/?group_type_index=").concat(n.currentTab),T.next=5,g.b.get(C);case 5:return T.abrupt("return",T.sent);case 6:case"end":return T.stop()}},x)}));function p(x){return c.apply(this,arguments)}return p}()}]}},reducers:{currentTab:["-1",{setTab:function(r,n){var c=n.tab;return c}}]},selectors:{currentTabName:[function(o){return[o.currentTab,o.groupTypes,o.aggregationLabel]},function(o,r,n){return o==="-1"?"Persons":r!=null&&r.length?Object(L.i)(n(parseInt(o)).singular):""}],breadcrumbs:[function(o){return[o.currentTabName,o.currentTab]},function(o,r){return[{name:o,path:P.a.groups(r)}]}]},actionToUrl:function(){return{setTab:function(n){var c=n.tab;return c!=="-1"?P.a.groups(c):P.a.persons()}}},urlToAction:function(r){var n=r.actions,c=r.values;return{"/groups/:id":function(x){var B=x.id;B&&(n.setTab(B),n.loadGroups())},"/persons":function(){c.currentTab!=="-1"&&n.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(D,d,e){"use strict";e.d(d,"a",function(){return g});var l=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/lib/components/PageHeader.tsx"),f=e("./node_modules/react/index.js"),a=e.n(f),j=e("./node_modules/core-js/modules/es.array.includes.js"),z=e("./node_modules/core-js/modules/es.string.includes.js"),V=e("./node_modules/core-js/modules/es.array.map.js"),S=e("./node_modules/antd/es/tabs/index.js"),O=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),$=e("./frontend/src/lib/utils.tsx"),M=e("./frontend/src/models/groupsModel.ts"),K=e("./frontend/src/scenes/groups/groupsListLogic.ts");function U(){var b=Object(l.useActions)(K.a),L=b.setTab,u=Object(l.useValues)(K.a),P=u.currentTab,R=Object(l.useValues)(M.a),G=R.groupTypes,o=R.aggregationLabel,r=Object(l.useValues)(O.b),n=r.groupsAccessStatus,c=[O.a.HasAccess,O.a.HasGroupTypes,O.a.NoAccess].includes(n);return a.a.createElement(S.a,{activeKey:P,onChange:function(x){return L(x)}},a.a.createElement(S.a.TabPane,{tab:"Persons",key:"-1"}),c?a.a.createElement(S.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):G.map(function(p){return a.a.createElement(S.a.TabPane,{tab:Object($.i)(o(p.group_type_index).plural),key:p.group_type_index})}))}function g(b){var L=b.hideGroupTabs,u=Object(l.useValues)(M.a),P=u.showGroupsOptions;return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{title:"Persons".concat(P?" & Groups":""),caption:"A catalog of your product's end users".concat(P?" and groups":"",".")}),!L&&P&&a.a.createElement(U,null))}try{g.displayName="PersonPageHeader",g.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:g.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(b){}},"./frontend/src/scenes/persons/Persons.scss":function(D,d,e){"use strict";var l=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(l),f=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),a=e.n(f),j={};j.insert="head",j.singleton=!1;var z=s()(a.a,j),V=a.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(D,d,e){"use strict";e.r(d),e.d(d,"scene",function(){return T}),e.d(d,"Persons",function(){return H}),e.d(d,"PersonsScene",function(){return J});var l=e("./node_modules/react/index.js"),s=e.n(l),f=e("./node_modules/kea/lib/index.esm.js"),a=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),j=e.n(a),z=e("./node_modules/core-js/modules/es.array.concat.js"),V=e("./node_modules/core-js/modules/es.object.keys.js"),S=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),O=e("./frontend/src/lib/components/PropertiesTable.tsx"),$=e("./frontend/src/scenes/persons/Persons.scss"),M=e("./frontend/src/lib/components/CopyToClipboard.tsx"),K=e("./frontend/src/scenes/persons/PersonHeader.tsx"),U=e("./frontend/src/lib/components/LemonTable/index.ts");function g(t){var E=t.people,I=t.loading,F=I===void 0?!1:I,_=t.hasPrevious,A=t.hasNext,i=t.loadPrevious,y=t.loadNext,N=t.compact,W=[{title:"Person",key:"person",render:function(m,v){return s.a.createElement(K.a,{withIcon:!0,person:v})}},{title:"ID",key:"id",render:function(m,v){return s.a.createElement("div",{style:{overflow:"hidden"}},v.distinct_ids.length&&s.a.createElement(M.a,{explicitValue:v.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},v.distinct_ids[0]))}}].concat(j()(N?[]:[{title:"First seen",dataIndex:"created_at",render:function(m){return m?s.a.createElement(S.b,{time:m}):s.a.createElement(s.a.Fragment,null)}}]));return s.a.createElement(U.a,{columns:W,loading:F,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:A?function(){y==null||y(),window.scrollTo(0,0)}:void 0,onBackward:_?function(){i==null||i(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(m){var v=m.properties;return Object.keys(v).length?s.a.createElement(O.a,{properties:v}):"This person has no properties."}},dataSource:E,emptyState:"No persons",nouns:["person","persons"]})}try{g.displayName="PersonsTable",g.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:g.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(t){}var b=e("./node_modules/antd/es/row/index.js"),L=e("./node_modules/antd/es/popconfirm/index.js"),u=e("./frontend/src/scenes/persons/personsLogic.ts"),P=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),R=e.n(P),G=e("./node_modules/core-js/modules/es.regexp.exec.js"),o=e("./node_modules/core-js/modules/es.string.search.js"),r=e("./node_modules/antd/es/input/index.js"),n=e("./frontend/src/lib/components/LemonRow/index.ts"),c=e("./frontend/src/lib/components/icons.tsx"),p=function(E){var I=E.autoFocus,F=I===void 0?!0:I,_=Object(f.useActions)(u.a),A=_.loadPersons,i=_.setListFilters,y=Object(f.useValues)(u.a),N=y.listFilters,W=Object(l.useState)(""),h=R()(W,2),m=h[0],v=h[1];return Object(l.useEffect)(function(){v(N.search||"")},[]),s.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"min(100%, 24rem)"}},s.a.createElement(r.a.Search,{"data-attr":"persons-search",placeholder:"Search for persons",autoFocus:F,value:m,onChange:function(Y){v(Y.target.value),Y.target.value||(i({search:void 0}),A())},enterButton:!0,onPressEnter:function(Y){Y.preventDefault(),i({search:m||void 0}),A()},allowClear:!0,onSearch:function(){i({search:m||void 0}),A()},style:{width:"100%"}}),s.a.createElement(n.a,{className:"ml-05",type:"stealth",tooltip:s.a.createElement(s.a.Fragment,null,"Search by email, name, ID, or even contents of properties. You can also search for persons who just ",s.a.createElement("i",null,"have"),' a property like so: "has:your_property".'),icon:s.a.createElement(c.IconInfo,null)}))};try{p.displayName="PersonsSearch",p.__docgenInfo={description:"",displayName:"PersonsSearch",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"]={docgenInfo:p.__docgenInfo,name:"PersonsSearch",path:"frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"})}catch(t){}var x=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),B=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),C=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Q=e("./frontend/src/lib/components/LemonButton/index.ts"),T={component:J,logic:u.a,paramsToProps:function(){return{syncWithUrl:!0}}};function H(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=t.cohort;return s.a.createElement(f.BindLogic,{logic:u.a,props:{cohort:E,syncWithUrl:!E}},s.a.createElement(J,null))}function J(){var t=Object(f.useActions)(u.a),E=t.loadPersons,I=t.setListFilters,F=t.exportCsv,_=Object(f.useValues)(u.a),A=_.cohortId,i=_.persons,y=_.listFilters,N=_.personsLoading,W=_.exportUrl;return s.a.createElement("div",{className:"persons-list"},!A&&s.a.createElement(x.a,null),s.a.createElement(b.a,{align:"middle",justify:"space-between",className:"mb-05",style:{gap:"0.75rem"}},s.a.createElement(p,{autoFocus:!A}),s.a.createElement("div",null,s.a.createElement(L.a,{placement:"topRight",title:s.a.createElement(s.a.Fragment,null,"Exporting by csv is limited to 10,000 users.",s.a.createElement("br",null),"To return more, please use ",s.a.createElement("a",{href:"https://posthog.com/docs/api/persons"},"the API"),". Do you want to export by CSV?"),onConfirm:F},W&&s.a.createElement(Q.a,{type:"secondary",icon:s.a.createElement(c.IconExport,{style:{color:"var(--primary)"}})},y.properties&&y.properties.length>0?s.a.createElement("div",{style:{display:"block"}},"Export (",s.a.createElement("strong",null,y.properties.length)," filter)"):"Export")))),s.a.createElement(B.a,{pageKey:"persons-list-page",propertyFilters:y.properties,onChange:function(m){I({properties:m}),E()},endpoint:"person",taxonomicGroupTypes:[C.a.PersonProperties,C.a.Cohorts],showConditionBadge:!0}),s.a.createElement(g,{people:i.results,loading:N,hasPrevious:!!i.previous,hasNext:!!i.next,loadPrevious:function(){return E(i.previous)},loadNext:function(){return E(i.next)}}))}try{H.displayName="Persons",H.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:H.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(t){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(D,d,e){var l=e("./node_modules/css-loader/dist/runtime/api.js");d=l(!1),d.push([D.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:#5375ff;cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),D.exports=d}}]);
