var ce=(m,a,e)=>new Promise((r,u)=>{var h=i=>{try{d(e.next(i))}catch(f){u(f)}},p=i=>{try{d(e.throw(i))}catch(f){u(f)}},d=i=>i.done?r(i.value):Promise.resolve(i.value).then(h,p);d((e=e.apply(m,a)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[276,280],{"./frontend/src/scenes/cohorts/Cohort.tsx":function(m,a,e){"use strict";e.r(a),e.d(a,"scene",function(){return ge}),e.d(a,"Cohort",function(){return H});var r=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/scenes/urls.ts"),h=e("./frontend/src/models/cohortsModel.ts");const p=Object(r.kea)([Object(r.props)({}),Object(r.key)(b=>b.id||"new"),Object(r.path)(["scenes","cohorts","cohortLogic"]),Object(r.selectors)({breadcrumbs:[()=>[h.a.selectors.cohortsById,(b,x)=>x.id],(b,x)=>{var A;return[{name:"Cohorts",path:u.a.cohorts()},{name:x!=="new"&&((A=b[x])===null||A===void 0?void 0:A.name)||"Untitled"}]}]})]);var d=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=e.n(d),f=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/dropdown/style/index.css"),c=e.n(f),t={};t.insert="head",t.singleton=!1;var s=i()(c.a,t),j=c.a.locals||{},o=e("./frontend/src/scenes/cohorts/cohortEditLogic.ts"),g=e("./frontend/src/scenes/userLogic.ts"),z=e("./frontend/src/lib/components/PageHeader.tsx"),O=e("./frontend/src/lib/components/LemonButton/index.ts"),U=e("./node_modules/.pnpm/kea-router@3.1.3_kea@3.0.4/node_modules/kea-router/lib/index.js"),T=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/divider/index.js"),F=e("./frontend/src/lib/forms/Field.tsx"),ne=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),oe=e("./frontend/src/lib/components/Tooltip.tsx"),te=e("./frontend/src/lib/components/LemonSelect.tsx"),se=e("./frontend/src/scenes/cohorts/CohortFilters/constants.tsx"),K=e("./frontend/src/lib/constants.tsx"),re=e("./frontend/src/types.ts"),B=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),V=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/upload/Dragger.js"),w=e.n(V),C=e("./frontend/src/lib/components/icons.tsx"),I=e("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx"),y=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss"),P=e.n(y),L={};L.insert="head",L.singleton=!1;var k=i()(P.a,L),J=P.a.locals||{},R=e("./frontend/src/scenes/cohorts/cohortUtils.tsx"),W=e("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.0.4/node_modules/kea-forms/lib/index.js"),G=e("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.0.4/node_modules/kea-forms/lib/components.js"),S=e("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),_=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),le=e("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),ie=e("./frontend/src/lib/utils.tsx"),pe=e("./frontend/src/lib/components/LemonDivider/index.ts"),me=e("./frontend/src/lib/components/AlertMessage/index.ts"),ue=e("./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaRowBuilder.tsx"),n=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function Z(b){const x=Object(o.a)(b),{cohort:A}=Object(r.useValues)(x),{setInnerGroupType:Y,duplicateFilter:q,removeFilter:ae,addFilter:ee}=Object(r.useActions)(x);return Object(n.jsxs)(n.Fragment,{children:[A.filters.properties.values.map((l,v)=>Object(R.i)(l)?Object(n.jsxs)(W.Group,{name:["filters","properties","values",v],children:[v!==0&&Object(n.jsx)("div",{className:"CohortCriteriaGroups__matching-group__logical-divider",children:A.filters.properties.type}),Object(n.jsx)(G.Field,{name:"id",template:N=>{let{error:E,kids:D}=N;return Object(n.jsxs)("div",{className:Object(S.default)("CohortCriteriaGroups__matching-group",E&&"CohortCriteriaGroups__matching-group--error"),children:[Object(n.jsxs)(_.a,{align:"middle",wrap:!1,className:"px-4",children:[Object(n.jsx)(le.a,{name:ie.c[v],color:le.b.Gray}),Object(n.jsx)(I.a,{prefix:"Match persons against",suffix:"criteria",onChange:M=>Y(M,v),value:l.type}),Object(n.jsx)("div",{style:{flex:1,minWidth:"0.5rem"}}),Object(n.jsx)(O.a,{icon:Object(n.jsx)(C.IconCopy,{}),status:"primary-alt",onClick:()=>q(v)}),A.filters.properties.values.length>1&&Object(n.jsx)(O.a,{icon:Object(n.jsx)(C.IconDelete,{}),status:"primary-alt",onClick:()=>ae(v)})]}),Object(n.jsx)(pe.a,{className:"my-4"}),E&&Object(n.jsx)(me.a,{className:"m-2",type:"error",children:E}),D]})},children:Object(n.jsx)(n.Fragment,{children:l.values.map((N,E)=>Object(R.i)(N)?null:Object(n.jsxs)(W.Group,{name:["values",E],children:[Object(n.jsx)(ue.a,{id:b.id,groupIndex:v,index:E,logicalOperator:l.type,criteria:N,type:Object(R.g)(N),hideDeleteIcon:l.values.length<=1}),E===l.values.length-1&&Object(n.jsx)("div",{className:"m-3",children:Object(n.jsx)(O.a,{"data-attr":"cohort-add-filter-group-criteria",type:"secondary",onClick:()=>ee(v),icon:Object(n.jsx)(C.IconPlusMini,{color:"var(--primary)"}),children:"Add criteria"})})]},E))})})]},v):null),Object(n.jsx)(O.a,{"data-attr":"cohort-add-filter-group",className:"mb-4 mt-4",type:"secondary",onClick:()=>ee(),icon:Object(n.jsx)(C.IconPlusMini,{color:"var(--primary)"}),fullWidth:!0,children:"Add criteria group"})]})}try{Z.displayName="CohortCriteriaGroups",Z.__docgenInfo={description:"",displayName:"CohortCriteriaGroups",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"]={docgenInfo:Z.__docgenInfo,name:"CohortCriteriaGroups",path:"frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"})}catch(b){}var he=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),be=e("./frontend/src/scenes/persons/Persons.tsx"),fe=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),je=e("./frontend/src/lib/components/NotFound/index.tsx");function Q(b){var x;let{id:A}=b;const Y={id:A},q=Object(o.a)(Y),{deleteCohort:ae,setOuterGroupsType:ee}=Object(r.useActions)(q),{cohort:l,cohortLoading:v,cohortMissing:N}=Object(r.useValues)(q),{hasAvailableFeature:E}=Object(r.useValues)(g.a),D=l.id==="new"||l.id===void 0;return N?Object(n.jsx)(je.a,{object:"cohort"}):Object(n.jsx)("div",{className:"cohort",children:Object(n.jsxs)(W.Form,{logic:o.a,props:Y,formKey:"cohort",enableFormOnSubmit:!0,children:[Object(n.jsx)(z.a,{title:D?"New cohort":l.name||"Untitled",buttons:Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[D?Object(n.jsx)(O.a,{"data-attr":"cancel-cohort",type:"secondary",onClick:()=>{U.router.actions.push(u.a.cohorts())},disabled:v,children:"Cancel"}):Object(n.jsx)(O.a,{"data-attr":"delete-cohort",status:"danger",type:"secondary",onClick:()=>{ae()},disabled:v,children:"Delete"}),Object(n.jsx)(O.a,{type:"primary","data-attr":"save-cohort",htmlType:"submit",loading:v||l.is_calculating,disabled:v||l.is_calculating,children:"Save"})]})}),Object(n.jsx)(T.a,{}),Object(n.jsxs)("div",{className:"space-y-2",style:{maxWidth:640},children:[Object(n.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[Object(n.jsx)("div",{className:"flex-1",children:Object(n.jsx)(F.a,{name:"name",label:"Name",children:Object(n.jsx)(ne.a,{"data-attr":"cohort-name"})})}),Object(n.jsx)("div",{className:"flex-1",children:Object(n.jsx)(F.a,{name:"is_static",label:"Type",children:M=>{let{value:$,onChange:X}=M;return Object(n.jsx)(oe.a,{title:D?null:"Create a new cohort to use a different type of cohort.",children:Object(n.jsx)("div",{children:Object(n.jsx)(te.a,{disabled:!D,options:se.b,value:$?K.d.Static:K.d.Dynamic,onChange:de=>{X(de===K.d.Static)},fullWidth:!0,"data-attr":"cohort-type"})})})}})})]}),E(re.e.DASHBOARD_COLLABORATION)&&Object(n.jsx)("div",{className:"ph-ignore-input",children:Object(n.jsx)(F.a,{name:"description",label:"Description","data-attr":"cohort-description",children:Object(n.jsx)(B.a,{})})})]}),l.is_static?Object(n.jsx)("div",{className:"mt-4 ph-ignore-input",children:Object(n.jsx)(F.a,{name:"csv",label:D?"Upload users":"Add users","data-attr":"cohort-csv",children:M=>{var $,X;let{onChange:de}=M;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user\u2019s distinct ID. The very first row (the header) will be skipped during import."}),Object(n.jsx)(w.a,{name:"file",multiple:!1,fileList:l.csv?[l.csv]:[],accept:".csv",showUploadList:!1,beforeUpload:xe=>(de(xe),!1),className:"cohort-csv-dragger",children:l.csv?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(C.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),Object(n.jsx)("div",{className:"ant-upload-text",children:($=(X=l.csv)===null||X===void 0?void 0:X.name)!==null&&$!==void 0?$:"File chosen"})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(C.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),Object(n.jsx)("div",{className:"ant-upload-text",children:"Drag a file here or click to browse for a file"})]})})]})}})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T.a,{}),Object(n.jsxs)("div",{className:"flex items-center justify-between my-4",children:[Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)(fe.a,{htmlFor:"groups",children:"Matching criteria"}),Object(n.jsx)("span",{children:"Actors who match the following criteria will be part of the cohort. Continuously updated automatically."})]}),Object(n.jsx)(I.a,{value:l.filters.properties.type,onChange:M=>{ee(M)},topLevelFilter:!0,suffix:"criteria"})]}),Object(n.jsx)(Z,{id:Y.id})]}),!D&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T.a,{}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{className:"l3 mb-4",children:["Persons in this cohort",Object(n.jsx)("span",{className:"text-muted ml-2",children:!l.is_calculating&&`(${l.count} matching ${Object(ie.tb)((x=l.count)!==null&&x!==void 0?x:0,"person","persons",!1)})`})]}),l.is_calculating?Object(n.jsxs)("div",{className:"cohort-recalculating flex items-center",children:[Object(n.jsx)(he.a,{className:"mr-4"}),"We're recalculating who belongs to this cohort. This could take up to a couple of minutes."]}):Object(n.jsx)(be.Persons,{cohort:l.id})]})]})]})})}try{Q.displayName="CohortEdit",Q.__docgenInfo={description:"",displayName:"CohortEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"]={docgenInfo:Q.__docgenInfo,name:"CohortEdit",path:"frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"})}catch(b){}const ge={component:H,logic:p,paramsToProps:b=>{let{params:{id:x}}=b;return{id:x&&x!=="new"?parseInt(x):"new"}}};function H(){let{id:b}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(n.jsx)(Q,{id:b})}try{H.displayName="Cohort",H.__docgenInfo={description:"",displayName:"Cohort",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/Cohort.tsx#Cohort"]={docgenInfo:H.__docgenInfo,name:"Cohort",path:"frontend/src/scenes/cohorts/Cohort.tsx#Cohort"})}catch(b){}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(m,a,e){"use strict";e.d(a,"a",function(){return c});var r=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/lib/api.ts"),h=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),p=e("./frontend/src/lib/utils.tsx"),d=e("./frontend/src/scenes/teamLogic.tsx"),i=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/models/groupsModel.ts");const c=Object(r.kea)({path:["groups","groupsListLogic"],connect:{values:[d.a,["currentTeamId"],f.a,["groupTypes","aggregationLabel"],h.b,["groupsEnabled"]]},actions:()=>({loadGroups:t=>({url:t}),setTab:t=>({tab:t})}),loaders:t=>{let{values:s}=t;return{groups:[{next:null,previous:null,results:[]},{loadGroups:j=>ce(this,null,function*(){let{url:o}=j;if(s.groupsEnabled)return o=o||`api/projects/${s.currentTeamId}/groups/?group_type_index=${s.currentTab}`,yield u.b.get(o)})}]}},reducers:{currentTab:["-1",{setTab:(t,s)=>{let{tab:j}=s;return j}}]},selectors:{currentTabName:[t=>[t.currentTab,t.groupTypes,t.aggregationLabel],(t,s,j)=>t==="-1"?"Persons":s!=null&&s.length?Object(p.i)(j(parseInt(t)).singular):""],groupName:[t=>[t.currentTab,t.aggregationLabel],(t,s)=>t==="-1"?{singular:"person",plural:"persons"}:s(parseInt(t))],breadcrumbs:[t=>[t.currentTabName,t.currentTab],(t,s)=>[{name:t,path:i.a.groups(s)}]]},actionToUrl:()=>({setTab:t=>{let{tab:s}=t;return s!=="-1"?i.a.groups(s):i.a.persons()}}),urlToAction:t=>{let{actions:s,values:j}=t;return{"/groups/:id":o=>{let{id:g}=o;g&&(s.setTab(g),s.loadGroups())},"/persons":()=>{j.currentTab!=="-1"&&s.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(m,a,e){"use strict";e.d(a,"a",function(){return f});var r=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/scenes/persons/personsLogic.tsx"),h=e("./frontend/src/scenes/persons/PersonHeader.tsx"),p=e("./frontend/@posthog/lemon-ui/src/index.ts"),d=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),i=e.n(d);function f(){const{personDeleteModal:c}=Object(r.useValues)(u.a),{deletePerson:t,showPersonDeleteModal:s}=Object(r.useActions)(u.a);return Object(d.jsx)(p.LemonModal,{isOpen:!!c,onClose:()=>s(null),title:`Are you sure you want to delete "${Object(h.b)(c)}"?`,description:Object(d.jsxs)(d.Fragment,{children:["This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",Object(d.jsxs)("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold",children:[" ","Learn more"]})]}),footer:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.LemonButton,{status:"danger",type:"secondary",onClick:()=>{t({person:c,deleteEvents:!0}),s(null)},"data-attr":"delete-person-with-events",children:"Delete person and all corresponding events"}),Object(d.jsx)(p.LemonButton,{type:"secondary",onClick:()=>s(null),"data-attr":"delete-person-cancel",children:"Cancel"}),Object(d.jsx)(p.LemonButton,{type:"primary",status:"danger",onClick:()=>{t({person:c,deleteEvents:!1}),s(null)},"data-attr":"delete-person-no-events",children:"Delete person"})]})})}},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(m,a,e){"use strict";e.d(a,"a",function(){return s});var r=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/lib/components/PageHeader.tsx"),h=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),p=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),d=e("./frontend/src/lib/utils.tsx"),i=e("./frontend/src/models/groupsModel.ts"),f=e("./frontend/src/scenes/groups/groupsListLogic.ts"),c=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function t(){const{setTab:j}=Object(r.useActions)(f.a),{currentTab:o}=Object(r.useValues)(f.a),{groupTypes:g,aggregationLabel:z}=Object(r.useValues)(i.a),{groupsAccessStatus:O}=Object(r.useValues)(p.b),U=[p.a.HasAccess,p.a.HasGroupTypes,p.a.NoAccess].includes(O);return Object(c.jsxs)(h.a,{activeKey:o,onChange:T=>j(T),children:[Object(c.jsx)(h.a.TabPane,{tab:"Persons"},"-1"),U?Object(c.jsx)(h.a.TabPane,{tab:"Introducing Group Analytics"},"0"):g.map(T=>Object(c.jsx)(h.a.TabPane,{tab:Object(d.i)(z(T.group_type_index).plural)},T.group_type_index))]})}function s(j){let{hideGroupTabs:o}=j;const{showGroupsOptions:g}=Object(r.useValues)(i.a);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.a,{title:`Persons${g?" & Groups":""}`,caption:`A catalog of your product's end users${g?" and groups":""}.`}),!o&&g&&Object(c.jsx)(t,{})]})}try{s.displayName="PersonPageHeader",s.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:s.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(j){}},"./frontend/src/scenes/persons/Persons.scss":function(m,a,e){"use strict";var r=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),u=e.n(r),h=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),p=e.n(h),d={};d.insert="head",d.singleton=!1;var i=u()(p.a,d),f=p.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(m,a,e){"use strict";e.r(a),e.d(a,"scene",function(){return re}),e.d(a,"Persons",function(){return B}),e.d(a,"PersonsScene",function(){return V});var r=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/lib/components/TZLabel/index.tsx"),h=e("./frontend/src/lib/components/PropertiesTable.tsx"),p=e("./frontend/src/scenes/persons/Persons.scss"),d=e("./frontend/src/lib/components/CopyToClipboard.tsx"),i=e("./frontend/src/scenes/persons/PersonHeader.tsx"),f=e("./frontend/src/lib/components/LemonTable/index.ts"),c=e("./frontend/@posthog/lemon-ui/src/index.ts"),t=e("./frontend/src/lib/components/icons.tsx"),s=e("./frontend/src/scenes/persons/personsLogic.tsx"),j=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function g(w){let{people:C,loading:I=!1,hasPrevious:y,hasNext:P,loadPrevious:L,loadNext:k,compact:J}=w;const{showPersonDeleteModal:R}=Object(r.useActions)(s.a),W=[{title:"Person",key:"person",render:function(S,_){return Object(o.jsx)(i.a,{withIcon:!0,person:_})}},{title:"ID",key:"id",render:function(S,_){return Object(o.jsx)("div",{className:"overflow-hidden",children:_.distinct_ids.length&&Object(o.jsx)(d.a,{explicitValue:_.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID",children:_.distinct_ids[0]})})}},...J?[]:[{title:"First seen",dataIndex:"created_at",render:function(S){return S?Object(o.jsx)(u.a,{time:S}):Object(o.jsx)(o.Fragment,{})}},{render:function(S,_){return Object(o.jsx)(c.LemonButton,{onClick:()=>R(_),icon:Object(o.jsx)(t.IconDelete,{}),status:"danger",size:"small"})}}]];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f.a,{"data-attr":"persons-table",columns:W,loading:I,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:P?()=>{k==null||k(),window.scrollTo(0,0)}:void 0,onBackward:y?()=>{L==null||L(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(S){let{properties:_}=S;return Object.keys(_).length?Object(o.jsx)(h.a,{properties:_}):"This person has no properties."}},dataSource:C,emptyState:"No persons",nouns:["person","persons"]}),Object(o.jsx)(j.a,{})]})}try{g.displayName="PersonsTable",g.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:g.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(w){}var z=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/popconfirm/index.js"),O=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),U=e("./frontend/src/lib/components/Tooltip.tsx"),T=e("./node_modules/.pnpm/use-debounce@6.0.1_react@16.14.0/node_modules/use-debounce/esm/useDebouncedCallback.js");const F=()=>{const{loadPersons:w,setListFilters:C}=Object(r.useActions)(s.a),{listFilters:I}=Object(r.useValues)(s.a),[y,P]=Object(O.useState)(""),L=Object(T.a)(w,800);return Object(O.useEffect)(()=>{P(I.search||"")},[]),Object(O.useEffect)(()=>{C({search:y||void 0}),L()},[y]),Object(o.jsxs)("div",{className:"flex items-center gap-2",children:[Object(o.jsx)(c.LemonInput,{type:"search",placeholder:"Search for persons",onChange:P,value:y,"data-attr":"persons-search"}),Object(o.jsx)(U.a,{title:Object(o.jsx)(o.Fragment,{children:'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.'}),children:Object(o.jsx)(t.IconInfo,{className:"text-2xl text-muted-alt shrink-0"})})]})};var ne=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),oe=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),te=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),se=e("./frontend/src/lib/components/LemonButton/index.ts"),K=e("./frontend/src/lib/components/ExportButton/exporter.tsx");const re={component:V,logic:s.a,paramsToProps:()=>({syncWithUrl:!0})};function B(){let{cohort:w}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(o.jsx)(r.BindLogic,{logic:s.a,props:{cohort:w,syncWithUrl:!w},children:Object(o.jsx)(V,{})})}function V(){const{loadPersons:w,setListFilters:C}=Object(r.useActions)(s.a),{cohortId:I,persons:y,listFilters:P,personsLoading:L,exporterProps:k,apiDocsURL:J}=Object(r.useValues)(s.a);return Object(o.jsxs)("div",{className:"persons-list",children:[!I&&Object(o.jsx)(ne.a,{}),Object(o.jsxs)("div",{className:"space-y-2",children:[Object(o.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[Object(o.jsx)(F,{}),Object(o.jsx)(z.a,{placement:"topRight",title:Object(o.jsxs)(o.Fragment,{children:["Exporting by CSV is limited to 10,000 users.",Object(o.jsx)("br",{}),"To export more, please use ",Object(o.jsx)("a",{href:J,children:"the API"}),". Do you want to export by CSV?"]}),onConfirm:()=>Object(K.a)(k[0]),children:Object(o.jsx)(se.a,{type:"secondary",icon:Object(o.jsx)(t.IconExport,{style:{color:"var(--primary)"}}),children:P.properties&&P.properties.length>0?Object(o.jsxs)("div",{style:{display:"block"},children:["Export (",Object(o.jsx)("strong",{children:P.properties.length})," filter)"]}):"Export"})})]}),Object(o.jsx)(oe.a,{pageKey:"persons-list-page",propertyFilters:P.properties,onChange:R=>{C({properties:R}),w()},endpoint:"person",taxonomicGroupTypes:[te.a.PersonProperties],showConditionBadge:!0}),Object(o.jsx)(g,{people:y.results,loading:L,hasPrevious:!!y.previous,hasNext:!!y.next,loadPrevious:()=>w(y.previous),loadNext:()=>w(y.next)})]})]})}try{B.displayName="Persons",B.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:B.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(w){}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss":function(m,a,e){var r=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");a=r(!1),a.push([m.i,".CohortCriteriaGroups__matching-group{padding-top:1rem;border:1px solid var(--border);border-radius:4px;width:100%;margin:.5rem 0}.CohortCriteriaGroups__matching-group.CohortCriteriaGroups__matching-group--error{border:1px solid var(--danger)}.CohortCriteriaGroups__matching-group__logical-divider{color:var(--primary-alt);font-weight:600;font-size:12px;text-transform:uppercase;padding:0 1.5rem}",""]),m.exports=a},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(m,a,e){var r=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");a=r(!1),a.push([m.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),m.exports=a},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/dropdown/style/index.css":function(m,a,e){var r=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");a=r(!1),a.push([m.i,'.ant-dropdown-menu-item.ant-dropdown-menu-item-danger{color:#ff4d4f}.ant-dropdown-menu-item.ant-dropdown-menu-item-danger:hover{color:#fff;background-color:#ff4d4f}.ant-dropdown{box-sizing:border-box;margin:0;padding:0;color:rgba(0,0,0,.85);font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";position:absolute;top:-9999px;left:-9999px;z-index:1050;display:block}.ant-dropdown:before{position:absolute;top:-4px;right:0;bottom:-4px;left:-7px;z-index:-9999;opacity:.0001;content:" "}.ant-dropdown-wrap{position:relative}.ant-dropdown-wrap .ant-btn>.anticon-down{font-size:10px}.ant-dropdown-wrap .anticon-down:before{transition:transform .2s}.ant-dropdown-wrap-open .anticon-down:before{transform:rotate(180deg)}.ant-dropdown-hidden,.ant-dropdown-menu-hidden,.ant-dropdown-menu-submenu-hidden{display:none}.ant-dropdown-show-arrow.ant-dropdown-placement-topCenter,.ant-dropdown-show-arrow.ant-dropdown-placement-topLeft,.ant-dropdown-show-arrow.ant-dropdown-placement-topRight{padding-bottom:10px}.ant-dropdown-show-arrow.ant-dropdown-placement-bottomCenter,.ant-dropdown-show-arrow.ant-dropdown-placement-bottomLeft,.ant-dropdown-show-arrow.ant-dropdown-placement-bottomRight{padding-top:10px}.ant-dropdown-arrow{position:absolute;z-index:1;display:block;width:8.48528137px;height:8.48528137px;background:transparent;border-style:solid;border-width:4.24264069px;transform:rotate(45deg)}.ant-dropdown-placement-topCenter>.ant-dropdown-arrow,.ant-dropdown-placement-topLeft>.ant-dropdown-arrow,.ant-dropdown-placement-topRight>.ant-dropdown-arrow{bottom:6.2px;border-color:transparent #fff #fff transparent;box-shadow:3px 3px 7px rgba(0,0,0,.07)}.ant-dropdown-placement-topCenter>.ant-dropdown-arrow{left:50%;transform:translateX(-50%) rotate(45deg)}.ant-dropdown-placement-topLeft>.ant-dropdown-arrow{left:16px}.ant-dropdown-placement-topRight>.ant-dropdown-arrow{right:16px}.ant-dropdown-placement-bottomCenter>.ant-dropdown-arrow,.ant-dropdown-placement-bottomLeft>.ant-dropdown-arrow,.ant-dropdown-placement-bottomRight>.ant-dropdown-arrow{top:6px;border-color:#fff transparent transparent #fff;box-shadow:-2px -2px 5px rgba(0,0,0,.06)}.ant-dropdown-placement-bottomCenter>.ant-dropdown-arrow{left:50%;transform:translateX(-50%) rotate(45deg)}.ant-dropdown-placement-bottomLeft>.ant-dropdown-arrow{left:16px}.ant-dropdown-placement-bottomRight>.ant-dropdown-arrow{right:16px}.ant-dropdown-menu{position:relative;margin:0;padding:4px 0;text-align:left;list-style-type:none;background-color:#fff;background-clip:padding-box;border-radius:2px;outline:none;box-shadow:0 3px 6px -4px rgba(0,0,0,.12),0 6px 16px 0 rgba(0,0,0,.08),0 9px 28px 8px rgba(0,0,0,.05)}.ant-dropdown-menu-item-group-title{padding:5px 12px;color:rgba(0,0,0,.45);transition:all .3s}.ant-dropdown-menu-submenu-popup{position:absolute;z-index:1050;background:transparent;box-shadow:none;transform-origin:0 0}.ant-dropdown-menu-submenu-popup li,.ant-dropdown-menu-submenu-popup ul{list-style:none}.ant-dropdown-menu-submenu-popup ul{margin-right:.3em;margin-left:.3em}.ant-dropdown-menu-item{position:relative;display:flex;align-items:center}.ant-dropdown-menu-item-icon{min-width:12px;margin-right:8px;font-size:12px}.ant-dropdown-menu-title-content{flex:auto}.ant-dropdown-menu-title-content>a{color:inherit;transition:all .3s}.ant-dropdown-menu-title-content>a:hover{color:inherit}.ant-dropdown-menu-title-content>a:after{position:absolute;top:0;right:0;bottom:0;left:0;content:""}.ant-dropdown-menu-item,.ant-dropdown-menu-submenu-title{clear:both;margin:0;padding:5px 12px;color:rgba(0,0,0,.85);font-weight:400;font-size:14px;line-height:22px;white-space:nowrap;cursor:pointer;transition:all .3s}.ant-dropdown-menu-item-selected,.ant-dropdown-menu-submenu-title-selected{color:#1890ff;background-color:#e6f7ff}.ant-dropdown-menu-item:hover,.ant-dropdown-menu-submenu-title:hover{background-color:#f5f5f5}.ant-dropdown-menu-item-disabled,.ant-dropdown-menu-submenu-title-disabled{color:rgba(0,0,0,.25);cursor:not-allowed}.ant-dropdown-menu-item-disabled:hover,.ant-dropdown-menu-submenu-title-disabled:hover{color:rgba(0,0,0,.25);background-color:#fff;cursor:not-allowed}.ant-dropdown-menu-item-disabled a,.ant-dropdown-menu-submenu-title-disabled a{pointer-events:none}.ant-dropdown-menu-item-divider,.ant-dropdown-menu-submenu-title-divider{height:1px;margin:4px 0;overflow:hidden;line-height:0;background-color:#f0f0f0}.ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon,.ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon{position:absolute;right:8px}.ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon,.ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon{margin-right:0!important;color:rgba(0,0,0,.45);font-size:10px;font-style:normal}.ant-dropdown-menu-item-group-list{margin:0 8px;padding:0;list-style:none}.ant-dropdown-menu-submenu-title{padding-right:24px}.ant-dropdown-menu-submenu-vertical{position:relative}.ant-dropdown-menu-submenu-vertical>.ant-dropdown-menu{position:absolute;top:0;left:100%;min-width:100%;margin-left:4px;transform-origin:0 0}.ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title,.ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-arrow-icon{color:rgba(0,0,0,.25);background-color:#fff;cursor:not-allowed}.ant-dropdown-menu-submenu-selected .ant-dropdown-menu-submenu-title{color:#1890ff}.ant-dropdown.ant-slide-down-appear.ant-slide-down-appear-active.ant-dropdown-placement-bottomCenter,.ant-dropdown.ant-slide-down-appear.ant-slide-down-appear-active.ant-dropdown-placement-bottomLeft,.ant-dropdown.ant-slide-down-appear.ant-slide-down-appear-active.ant-dropdown-placement-bottomRight,.ant-dropdown.ant-slide-down-enter.ant-slide-down-enter-active.ant-dropdown-placement-bottomCenter,.ant-dropdown.ant-slide-down-enter.ant-slide-down-enter-active.ant-dropdown-placement-bottomLeft,.ant-dropdown.ant-slide-down-enter.ant-slide-down-enter-active.ant-dropdown-placement-bottomRight{animation-name:antSlideUpIn}.ant-dropdown.ant-slide-up-appear.ant-slide-up-appear-active.ant-dropdown-placement-topCenter,.ant-dropdown.ant-slide-up-appear.ant-slide-up-appear-active.ant-dropdown-placement-topLeft,.ant-dropdown.ant-slide-up-appear.ant-slide-up-appear-active.ant-dropdown-placement-topRight,.ant-dropdown.ant-slide-up-enter.ant-slide-up-enter-active.ant-dropdown-placement-topCenter,.ant-dropdown.ant-slide-up-enter.ant-slide-up-enter-active.ant-dropdown-placement-topLeft,.ant-dropdown.ant-slide-up-enter.ant-slide-up-enter-active.ant-dropdown-placement-topRight{animation-name:antSlideDownIn}.ant-dropdown.ant-slide-down-leave.ant-slide-down-leave-active.ant-dropdown-placement-bottomCenter,.ant-dropdown.ant-slide-down-leave.ant-slide-down-leave-active.ant-dropdown-placement-bottomLeft,.ant-dropdown.ant-slide-down-leave.ant-slide-down-leave-active.ant-dropdown-placement-bottomRight{animation-name:antSlideUpOut}.ant-dropdown.ant-slide-up-leave.ant-slide-up-leave-active.ant-dropdown-placement-topCenter,.ant-dropdown.ant-slide-up-leave.ant-slide-up-leave-active.ant-dropdown-placement-topLeft,.ant-dropdown.ant-slide-up-leave.ant-slide-up-leave-active.ant-dropdown-placement-topRight{animation-name:antSlideDownOut}.ant-dropdown-button>.anticon.anticon-down,.ant-dropdown-link>.anticon.anticon-down,.ant-dropdown-trigger>.anticon.anticon-down{font-size:10px;vertical-align:baseline}.ant-dropdown-button{white-space:nowrap}.ant-dropdown-button.ant-btn-group>.ant-btn:last-child:not(:first-child):not(.ant-btn-icon-only){padding-right:8px;padding-left:8px}.ant-dropdown-menu-dark,.ant-dropdown-menu-dark .ant-dropdown-menu{background:#001529}.ant-dropdown-menu-dark .ant-dropdown-menu-item,.ant-dropdown-menu-dark .ant-dropdown-menu-item .ant-dropdown-menu-submenu-arrow:after,.ant-dropdown-menu-dark .ant-dropdown-menu-item>.anticon+span>a,.ant-dropdown-menu-dark .ant-dropdown-menu-item>.anticon+span>a .ant-dropdown-menu-submenu-arrow:after,.ant-dropdown-menu-dark .ant-dropdown-menu-item>a,.ant-dropdown-menu-dark .ant-dropdown-menu-item>a .ant-dropdown-menu-submenu-arrow:after,.ant-dropdown-menu-dark .ant-dropdown-menu-submenu-title,.ant-dropdown-menu-dark .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-arrow:after{color:hsla(0,0%,100%,.65)}.ant-dropdown-menu-dark .ant-dropdown-menu-item:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-item>.anticon+span>a:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-item>a:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-submenu-title:hover{color:#fff;background:transparent}.ant-dropdown-menu-dark .ant-dropdown-menu-item-selected,.ant-dropdown-menu-dark .ant-dropdown-menu-item-selected:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-item-selected>a{color:#fff;background:#1890ff}.ant-dropdown-rtl{direction:rtl}.ant-dropdown-rtl.ant-dropdown:before{right:-7px;left:0}.ant-dropdown-menu-submenu-rtl .ant-dropdown-menu-item-group-title,.ant-dropdown-menu.ant-dropdown-menu-rtl,.ant-dropdown-rtl .ant-dropdown-menu-item-group-title{direction:rtl;text-align:right}.ant-dropdown-menu-submenu-popup.ant-dropdown-menu-submenu-rtl{transform-origin:100% 0}.ant-dropdown-rtl .ant-dropdown-menu-item,.ant-dropdown-rtl .ant-dropdown-menu-submenu-popup li,.ant-dropdown-rtl .ant-dropdown-menu-submenu-popup ul,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title{text-align:right}.ant-dropdown-rtl .ant-dropdown-menu-item>.anticon:first-child,.ant-dropdown-rtl .ant-dropdown-menu-item>span>.anticon:first-child,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title>.anticon:first-child,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title>span>.anticon:first-child{margin-right:0;margin-left:8px}.ant-dropdown-rtl .ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon{right:auto;left:8px}.ant-dropdown-rtl .ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon{margin-left:0!important;transform:scaleX(-1)}.ant-dropdown-rtl .ant-dropdown-menu-submenu-title{padding-right:12px;padding-left:24px}.ant-dropdown-rtl .ant-dropdown-menu-submenu-vertical>.ant-dropdown-menu{right:100%;left:0;margin-right:4px;margin-left:0}',""]),m.exports=a}}]);
