(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/CopyToClipboard.tsx":function(ue,M,e){"use strict";e.d(M,"a",function(){return X});var H=e("./node_modules/core-js/modules/es.symbol.js"),ae=e.n(H),k=e("./node_modules/core-js/modules/es.symbol.description.js"),Ee=e.n(k),le=e("./node_modules/core-js/modules/es.object.to-string.js"),q=e.n(le),I=e("./node_modules/core-js/modules/es.regexp.to-string.js"),V=e.n(I),Q=e("./node_modules/@babel/runtime/helpers/extends.js"),ee=e.n(Q),U=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),N=e.n(U),t=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),ie=e.n(t),te=e("./node_modules/react/index.js"),J=e.n(te),ne=e("./frontend/src/lib/utils.tsx"),me=e("./frontend/src/lib/components/Tooltip.tsx"),de=e("./frontend/src/lib/components/icons.tsx"),pe=e("./frontend/src/lib/components/LemonButton/index.ts");function ce(m,c){var a=Object.keys(m);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(m);c&&(d=d.filter(function(u){return Object.getOwnPropertyDescriptor(m,u).enumerable})),a.push.apply(a,d)}return a}function re(m){for(var c=1;c<arguments.length;c++){var a=arguments[c]!=null?arguments[c]:{};c%2?ce(Object(a),!0).forEach(function(d){N()(m,d,a[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach(function(d){Object.defineProperty(m,d,Object.getOwnPropertyDescriptor(a,d))})}return m}function X(m){var c=m.children,a=m.explicitValue,d=m.description,u=m.selectable,_=u===void 0?!1:u,W=m.isValueSensitive,oe=W===void 0?!1:W,D=m.tooltipMessage,Z=D===void 0?null:D,G=m.iconStyle,A=G===void 0?{}:G,F=m.iconPosition,ye=F===void 0?"end":F,xe=m.style,ge=ie()(m,["children","explicitValue","description","selectable","isValueSensitive","tooltipMessage","iconStyle","iconPosition","style"]),be=function(){return Object(ne.t)(a!=null?a:c?c.toString():"",d)},je=J.a.createElement("span",ee()({className:oe?"ph-no-capture":"",style:re({cursor:_?"text":"pointer",display:"inline-flex",alignItems:"center",flexDirection:ye==="end"?"row":"row-reverse",flexWrap:"nowrap",width:"fit-content",wordBreak:"break-all"},xe),onClick:_?void 0:be},ge),J.a.createElement("span",{style:ye==="start"?{flexGrow:1}:{}},c),J.a.createElement(pe.a,{compact:!0,icon:J.a.createElement(de.IconCopy,null),className:"copy-icon",onClick:_?be:void 0,style:re(N()({},ye==="end"?"marginLeft":"marginRight",4),A)}));return!_||Z!==null?J.a.createElement(me.a,{title:Z||"Click to copy"},je):J.a.createElement(J.a.Fragment,null,je)}try{X.displayName="CopyToClipboardInline",X.__docgenInfo={description:"",displayName:"CopyToClipboardInline",props:{explicitValue:{defaultValue:null,description:"",name:"explicitValue",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},selectable:{defaultValue:{value:"false"},description:"Makes text selectable instead of copying on click anywhere",name:"selectable",required:!1,type:{name:"boolean"}},isValueSensitive:{defaultValue:{value:"false"},description:"",name:"isValueSensitive",required:!1,type:{name:"boolean"}},tooltipMessage:{defaultValue:{value:"null"},description:"",name:"tooltipMessage",required:!1,type:{name:"string | null"}},iconStyle:{defaultValue:{value:"{}"},description:"",name:"iconStyle",required:!1,type:{name:"Record<string, string | number>"}},iconPosition:{defaultValue:{value:"end"},description:"",name:"iconPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"]={docgenInfo:X.__docgenInfo,name:"CopyToClipboardInline",path:"frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"})}catch(m){}},"./frontend/src/lib/components/PropertiesTable.tsx":function(ue,M,e){"use strict";e.d(M,"a",function(){return Oe});var H=e("./node_modules/core-js/modules/es.array.filter.js"),ae=e("./node_modules/core-js/modules/es.array.includes.js"),k=e("./node_modules/core-js/modules/es.array.map.js"),Ee=e("./node_modules/core-js/modules/es.array.some.js"),le=e("./node_modules/core-js/modules/es.object.entries.js"),q=e("./node_modules/core-js/modules/es.string.includes.js"),I=e("./node_modules/core-js/modules/es.string.starts-with.js"),V=e("./node_modules/@babel/runtime/helpers/typeof.js"),Q=e.n(V),ee=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),U=e.n(ee),N=e("./node_modules/react/index.js"),t=e.n(N),ie=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),te=e("./node_modules/antd/es/input/index.js"),J=e("./node_modules/antd/es/dropdown/index.js"),ne=e("./node_modules/antd/es/menu/index.js"),me=e("./node_modules/antd/es/popconfirm/index.js"),de=e("./frontend/src/lib/utils.tsx"),pe=e("./frontend/src/lib/components/icons.tsx"),ce=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),re=e.n(ce),X=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss"),m=e.n(X),c={};c.insert="head",c.singleton=!1;var a=re()(m.a,c),d=m.a.locals||{},u=e("./frontend/src/lib/components/LemonTable/index.ts"),_=e("./frontend/src/lib/components/CopyToClipboard.tsx"),W=e("./node_modules/kea/lib/index.esm.js"),oe=e("./frontend/src/models/propertyDefinitionsModel.ts"),D=e("./frontend/src/lib/components/LemonButton/index.ts"),Z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),G=e.n(Z),A=e("./node_modules/antd/es/radio/index.js"),F=e("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),ye=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),xe=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),ge=e("./node_modules/@ant-design/icons/es/icons/StopOutlined.js"),be=e("./node_modules/antd/lib/modal/Modal.js"),je=e.n(be);function he(v,g){var s=Object.keys(v);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(v);g&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(v,o).enumerable})),s.push.apply(s,n)}return s}function j(v){for(var g=1;g<arguments.length;g++){var s=arguments[g]!=null?arguments[g]:{};g%2?he(Object(s),!0).forEach(function(n){G()(v,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(s)):he(Object(s)).forEach(function(n){Object.defineProperty(v,n,Object.getOwnPropertyDescriptor(s,n))})}return v}function Ce(v){var g=v.editProperty,s={creating:!1,propertyType:"string"},n=Object(N.useState)(s),o=U()(n,2),r=o[0],i=o[1],h=function(){r.key&&r.value!==void 0&&(g(r.key,r.value),i(s))};return t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"mb"},t.a.createElement("div",{className:"text-right"},t.a.createElement(D.a,{"data-attr":"add-prop-button",onClick:function(){return i(j(j({},r),{},{creating:!0}))},type:"primary"},"New property"))),t.a.createElement(je.a,{visible:r.creating,destroyOnClose:!0,onCancel:function(){return i(s)},title:"Adding new property",okText:t.a.createElement(t.a.Fragment,null,t.a.createElement(F.a,{style:{marginRight:4}}),"Save Property"),okButtonProps:{disabled:!r.key||r.value===void 0},onOk:h},t.a.createElement("div",{className:"input-set"},t.a.createElement("label",{htmlFor:"propertyKey"},"Key"),t.a.createElement(te.a,{id:"propertyKey",autoFocus:!0,placeholder:"try email, first_name, is_verified, membership_level, total_revenue",onChange:function(P){return i(j(j({},r),{},{key:P.target.value}))}})),t.a.createElement("div",{className:"input-set"},t.a.createElement("label",{htmlFor:"propertyType"},"Type of Property"),t.a.createElement("div",null,t.a.createElement(A.a.Group,{value:r.propertyType,onChange:function(P){return i(j(j({},r),{},{propertyType:P.target.value,value:P.target.value==="string"?void 0:"true"}))},id:"propertyType",buttonStyle:"solid"},t.a.createElement(A.a.Button,{value:"string"},"Text or Number"),t.a.createElement(A.a.Button,{value:"boolean"},"Boolean or Null")))),t.a.createElement("div",{className:"input-set"},t.a.createElement("label",{htmlFor:"propertyValue"},"Value"),r.propertyType==="boolean"?t.a.createElement("div",null,t.a.createElement(A.a.Group,{value:r.value,onChange:function(P){return i(j(j({},r),{},{value:P.target.value}))},id:"propertyValue",buttonStyle:"solid"},t.a.createElement(A.a.Button,{value:"true",defaultChecked:!0},t.a.createElement(ye.a,null)," True"),t.a.createElement(A.a.Button,{value:"false"},t.a.createElement(xe.a,null)," False"),t.a.createElement(A.a.Button,{value:"null"},t.a.createElement(ge.a,null)," Null"))):t.a.createElement(te.a,{placeholder:"try email@example.com, gold, 1",onChange:function(P){return i(j(j({},r),{},{value:P.target.value}))},id:"propertyValue",onKeyDown:function(P){return P.key==="Enter"&&h()}}))))}try{Ce.displayName="NewPropertyComponent",Ce.__docgenInfo={description:"",displayName:"NewPropertyComponent",props:{editProperty:{defaultValue:null,description:"",name:"editProperty",required:!0,type:{name:"(key: string, newValue?: string | number | boolean | null | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"]={docgenInfo:Ce.__docgenInfo,name:"NewPropertyComponent",path:"frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"})}catch(v){}function Me(v){var g=v.value,s=v.onChange;return t.a.createElement(te.a,{defaultValue:g,autoFocus:!0,onBlur:function(){return s(null,!1)},onPressEnter:function(o){return s(o.target.value,!0)}})}function Ae(v){var g=v.value,s=v.rootKey,n=v.onEdit,o=v.nestingLevel,r=v.useDetectedPropertyType,i=Object(W.useValues)(oe.a),h=i.describeProperty,O=Object(N.useState)(!1),P=U()(O,2),$=P[0],R=P[1],l=s&&!ie.e.includes(s)&&(!o||o<=1)&&n,E=["string","number","bigint"],y=["boolean","null"],T;s&&r&&(T=h(s));var K=g===null?"null":Q()(g),L=g===null?"null":String(g),se=function(p,C){R(!1),s!==void 0&&C&&n&&p!=g&&n(s,p,g)},S=t.a.createElement("span",{className:l?"editable ph-no-capture":"ph-no-capture",onClick:function(){return l&&E.includes(K)&&R(!0)}},Object(de.eb)(g)?t.a.createElement("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"value-link"},t.a.createElement("span",null,L),t.a.createElement(pe.IconOpenInNew,null)):L);return t.a.createElement("div",{className:"properties-table-value"},$?t.a.createElement(Me,{value:g,onChange:se}):t.a.createElement(t.a.Fragment,null,l&&y.includes(K)?t.a.createElement(J.a,{overlay:t.a.createElement(ne.a,{onClick:function(p){var C=p.key,x=null;C==="t"?x=!0:C==="f"&&(x=!1),se(x,!0)}},t.a.createElement(ne.a.Item,{key:"t"},"true"),t.a.createElement(ne.a.Item,{key:"f"},"false"),t.a.createElement(ne.a.Item,{key:"n",danger:!0},"null"))},S):t.a.createElement(_.a,{description:"property value",explicitValue:L,selectable:!0,isValueSensitive:!0},S),t.a.createElement("div",{className:"property-value-type"},T||K)))}function Oe(v){var g=v.properties,s=v.rootKey,n=v.onEdit,o=v.sortProperties,r=o===void 0?!1:o,i=v.searchable,h=i===void 0?!1:i,O=v.embedded,P=O===void 0?!0:O,$=v.nestingLevel,R=$===void 0?0:$,l=v.onDelete,E=v.className,y=v.useDetectedPropertyType,T=Object(N.useState)(""),K=U()(T,2),L=K[0],se=K[1],S=Object(N.useMemo)(function(){if(!(g instanceof Object))return[];var p=Object.entries(g);if(L){var C=L.toLowerCase();p=p.filter(function(x){var fe=U()(x,2),Pe=fe[0],Te=fe[1];return Pe.toLowerCase().includes(C)||JSON.stringify(Te).toLowerCase().includes(C)})}return r&&p.sort(function(x,fe){var Pe=U()(x,1),Te=Pe[0],Se=U()(fe,1),Le=Se[0];return Te[0]==="$"&&Le[0]!=="$"?1:Te[0]!=="$"&&Le[0]==="$"||Te.toLowerCase()<Le.toLowerCase()?-1:1}),p},[g,r,L]);if(Array.isArray(g))return t.a.createElement("div",null,g.length?g.map(function(p,C){return t.a.createElement(Oe,{key:C,properties:p,nestingLevel:R+1,useDetectedPropertyType:["$set","$set_once"].some(function(x){return x===s})?!1:y})}):t.a.createElement("div",{className:"property-value-type"},"ARRAY (EMPTY)"));var ve=[{key:"key",title:"Key",width:"20rem",render:function(C,x){return t.a.createElement("div",{className:"properties-table-key"},t.a.createElement(ie.a,{value:x[0]}))},sorter:function(C,x){return String(C[0]).localeCompare(String(x[0]))}},{key:"value",title:"Value",render:function(C,x){return t.a.createElement(Oe,{properties:x[1],rootKey:x[0],onEdit:n,nestingLevel:R+1,useDetectedPropertyType:["$set","$set_once"].some(function(fe){return fe===s})?!1:y})}}];return l&&R===0&&ve.push({key:"delete",title:"",width:0,render:function(C,x){return!ie.e.includes(x[0])&&!String(x[0]).startsWith("$initial_")&&t.a.createElement(me.a,{onConfirm:function(){return l(x[0])},okButtonProps:{danger:!0},okText:"Delete",title:t.a.createElement(t.a.Fragment,null,"Are you sure you want to delete property ",t.a.createElement("code",null,x[0]),"?"," ",t.a.createElement("b",null,"This cannot be undone.")),placement:"left"},t.a.createElement(D.a,{icon:t.a.createElement(pe.IconDeleteForever,null),status:"danger",compact:!0}))}}),g instanceof Object?t.a.createElement(t.a.Fragment,null,h&&t.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},t.a.createElement(te.a.Search,{placeholder:"Search for property keys and values",className:"mb",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:L,onChange:function(C){se(C.target.value)}}),n&&t.a.createElement(Ce,{editProperty:n})),t.a.createElement(u.a,{columns:ve,showHeader:!P,size:"small",rowKey:"0",embedded:P,dataSource:S,className:E,emptyState:"This property value is an empty object."})):t.a.createElement(Ae,{value:g,rootKey:s,onEdit:n,nestingLevel:R,useDetectedPropertyType:y})}try{Oe.displayName="PropertiesTable",Oe.__docgenInfo={description:"",displayName:"PropertiesTable",props:{properties:{defaultValue:null,description:"",name:"properties",required:!0,type:{name:"any"}},sortProperties:{defaultValue:{value:"false"},description:"",name:"sortProperties",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"",name:"searchable",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"true"},description:"Whether this table should be style for being embedded. Default: true.",name:"embedded",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((key: string) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},useDetectedPropertyType:{defaultValue:null,description:"",name:"useDetectedPropertyType",required:!1,type:{name:"boolean"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((key: string, newValue: any, oldValue?: any) => void)"}},nestingLevel:{defaultValue:{value:"0"},description:"",name:"nestingLevel",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"]={docgenInfo:Oe.__docgenInfo,name:"PropertiesTable",path:"frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"})}catch(v){}},"./frontend/src/scenes/actions/EventName.tsx":function(ue,M,e){"use strict";e.d(M,"a",function(){return q}),e.d(M,"b",function(){return I});var H=e("./node_modules/react/index.js"),ae=e.n(H),k=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ee=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),le=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function q(V){var Q=V.value,ee=V.onChange;return ae.a.createElement(Ee.c,{groupType:le.a.Events,onChange:ee,value:Q,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(N){return ae.a.createElement(k.a,{value:N,disablePopover:!0})},allowClear:!0})}function I(V){var Q=V.value,ee=V.onChange;return ae.a.createElement(Ee.a,{groupType:le.a.Events,onChange:ee,value:Q,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(N){return ae.a.createElement(k.a,{value:N,disablePopover:!0})},allowClear:!0})}try{q.displayName="EventName",q.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:q.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(V){}try{I.displayName="LemonEventName",I.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:I.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(V){}},"./frontend/src/scenes/events/EventDetails.tsx":function(ue,M,e){"use strict";e.d(M,"a",function(){return m});var H=e("./node_modules/core-js/modules/es.object.keys.js"),ae=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),k=e.n(ae),Ee=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),le=e.n(Ee),q=e("./node_modules/react/index.js"),I=e.n(q),V=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Q=e("./frontend/src/lib/components/PropertiesTable.tsx"),ee=e("./frontend/src/scenes/events/EventElements.tsx"),U=e("./node_modules/antd/es/tabs/index.js"),N=e("./node_modules/antd/es/button/index.js"),t=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),ie=e.n(t),te=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),J=e("./frontend/src/lib/utils.tsx");function ne(c,a){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(c);a&&(u=u.filter(function(_){return Object.getOwnPropertyDescriptor(c,_).enumerable})),d.push.apply(d,u)}return d}function me(c){for(var a=1;a<arguments.length;a++){var d=arguments[a]!=null?arguments[a]:{};a%2?ne(Object(d),!0).forEach(function(u){k()(c,u,d[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):ne(Object(d)).forEach(function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(d,u))})}return c}function de(c){var a=c.event,d=a.event,u=a.id,_=a.uuid,W=a.distinct_id,oe=a.properties,D=a.elements,Z=a.timestamp,G=a.person,A=ie()(a,["event","id","uuid","distinct_id","properties","elements","timestamp","person"]),F=me(me(me(me({},u?{id:u}:null),_?{uuid:_}:null),{},{timestamp:Z,event:d,distinct_id:W,properties:Object(J.wb)(oe)},D&&D.length>0?{elements:D}:null),A);return I.a.createElement(te.a,{language:te.b.JSON},JSON.stringify(F,null,4))}try{de.displayName="EventJSON",de.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:de.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(c){}var pe=e("./frontend/src/lib/dayjs.ts");function ce(c,a){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(c);a&&(u=u.filter(function(_){return Object.getOwnPropertyDescriptor(c,_).enumerable})),d.push.apply(d,u)}return d}function re(c){for(var a=1;a<arguments.length;a++){var d=arguments[a]!=null?arguments[a]:{};a%2?ce(Object(d),!0).forEach(function(u){k()(c,u,d[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):ce(Object(d)).forEach(function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(d,u))})}return c}var X=U.a.TabPane;function m(c){for(var a=c.event,d=Object(q.useState)(!1),u=le()(d,2),_=u[0],W=u[1],oe={},D={},Z=0,G=0,A=Object.keys(a.properties);G<A.length;G++){var F=A[G];V.d.event[F]&&V.d.event[F].hide&&(Z+=1,_&&(D[F]=a.properties[F])),(!V.d.event[F]||!V.d.event[F].hide)&&(oe[F]=a.properties[F])}return I.a.createElement(U.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},I.a.createElement(X,{tab:"Properties",key:"properties"},I.a.createElement(Q.a,{properties:re(re({$timestamp:Object(pe.a)(a.timestamp).toISOString()},oe),D),useDetectedPropertyType:!0}),Z>0&&I.a.createElement("small",null,I.a.createElement(N.a,{style:{margin:"8px 0 0 8px"},type:"link",onClick:function(){return W(!_)}},_?"Showing ":"",Z," hidden properties. Click to ",_?"hide":"show","."))),I.a.createElement(X,{tab:"JSON",key:"json"},I.a.createElement(de,{event:a})),a.elements&&a.elements.length>0&&I.a.createElement(X,{tab:"Elements",key:"elements"},I.a.createElement(ee.a,{event:a})))}try{m.displayName="EventDetails",m.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:m.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(c){}},"./frontend/src/scenes/events/EventElements.tsx":function(ue,M,e){"use strict";e.d(M,"a",function(){return m});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(H),k=e("./node_modules/core-js/modules/es.array.fill.js"),Ee=e.n(k),le=e("./node_modules/core-js/modules/es.array.join.js"),q=e.n(le),I=e("./node_modules/core-js/modules/es.array.map.js"),V=e.n(I),Q=e("./node_modules/core-js/modules/es.array.slice.js"),ee=e.n(Q),U=e("./node_modules/core-js/modules/es.object.entries.js"),N=e.n(U),t=e("./node_modules/core-js/modules/es.regexp.exec.js"),ie=e.n(t),te=e("./node_modules/core-js/modules/es.string.replace.js"),J=e.n(te),ne=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),me=e.n(ne),de=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),pe=e.n(de),ce=e("./node_modules/react/index.js"),re=e.n(ce);function X(c){return Array(c).fill("    ").join("")}function m(c){var a=c.event,d=pe()(a.elements||[]).reverse();return d=d.slice(Math.max(d.length-10,1)),re.a.createElement("div",null,d.map(function(u,_){return re.a.createElement("pre",{className:"code",key:_,style:{margin:0,padding:0,borderRadius:0,backgroundColor:_===d.length-1?"var(--primary)":void 0}},X(_),"<",u.tag_name,u.attr_id&&' id="'.concat(u.attr_id,'"'),Object.entries(u.attributes).map(function(W){var oe=me()(W,2),D=oe[0],Z=oe[1];return re.a.createElement("span",{key:D}," ".concat(D.replace("attr__",""),'="').concat(Z,'"'))}),">",u.text,_===d.length-1&&re.a.createElement("span",null,"</",u.tag_name,">"))}),pe()(d).reverse().slice(1).map(function(u,_){return re.a.createElement("pre",{className:"code",key:_,style:{margin:0,padding:0,borderRadius:0}},X(d.length-_-2),"</",u.tag_name,">")}))}try{m.displayName="EventElements",m.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:m.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(c){}},"./frontend/src/scenes/events/EventsTable.tsx":function(ue,M,e){"use strict";e.d(M,"a",function(){return R});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e("./node_modules/core-js/modules/es.array.find.js"),k=e("./node_modules/core-js/modules/es.array.join.js"),Ee=e("./node_modules/core-js/modules/es.array.map.js"),le=e("./node_modules/core-js/modules/es.array.some.js"),q=e("./node_modules/core-js/modules/es.array.splice.js"),I=e("./node_modules/core-js/modules/es.object.keys.js"),V=e("./node_modules/core-js/modules/es.object.to-string.js"),Q=e("./node_modules/core-js/modules/es.regexp.to-string.js"),ee=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),U=e.n(ee),N=e("./node_modules/react/index.js"),t=e.n(N),ie=e("./node_modules/kea/lib/index.esm.js"),te=e("./frontend/src/scenes/events/EventDetails.tsx"),J=e("./frontend/src/lib/components/Link.tsx"),ne=e("./node_modules/antd/es/button/index.js"),me=e("./node_modules/core-js/modules/es.array.filter.js"),de=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),pe=e.n(de),ce=e("./node_modules/kea-router/lib/index.js"),re=e("./node_modules/core-js/modules/es.regexp.exec.js"),X=e("./node_modules/core-js/modules/es.string.replace.js"),m=e("./node_modules/@babel/runtime/helpers/typeof.js"),c=e.n(m);function a(l){var E=l.value;return t.a.createElement("span",{title:E},c()(E)==="object"?JSON.stringify(E):E&&E.toString().replace(/(^\w+:|^)\/\//,""))}try{a.displayName="Property",a.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:a.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(l){}var d=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function u(l,E){var y=Object.keys(l);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(l);E&&(T=T.filter(function(K){return Object.getOwnPropertyDescriptor(l,K).enumerable})),y.push.apply(y,T)}return y}function _(l){for(var E=1;E<arguments.length;E++){var y=arguments[E]!=null?arguments[E]:{};E%2?u(Object(y),!0).forEach(function(T){pe()(l,T,y[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(y)):u(Object(y)).forEach(function(T){Object.defineProperty(l,T,Object.getOwnPropertyDescriptor(y,T))})}return l}function W(l){var E=l.property,y=l.value,T=l.filters,K=l.onClick,L=l.className,se=Object(d.c)(T.properties),S=se.find(function(C){return C.key===E&&C.value===y&&!C.operator})?se.filter(function(C){return C.key!==E||C.value!==y||C.operator}):[].concat(U()(se),[{key:E,value:y}]),ve=Object(ce.combineUrl)(window.location.pathname,_(_({},T),{},{properties:S}),{}),p=ve.url;return t.a.createElement(J.a,{to:p,className:L,onClick:function(){K&&K(E,y)}},t.a.createElement(a,{value:y}))}try{W.displayName="FilterPropertyLink",W.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:W.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(l){}var oe=e("./frontend/src/lib/utils.tsx"),D=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Z=e.n(D),G=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),A=e.n(G),F={};F.insert="head",F.singleton=!1;var ye=Z()(A.a,F),xe=A.a.locals||{},ge=e("./frontend/src/scenes/events/eventsTableLogic.ts"),be=e("./frontend/src/scenes/persons/PersonHeader.tsx"),je=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),he=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),j=e("./frontend/src/types.ts"),Ce=e("./frontend/src/scenes/actions/EventName.tsx"),Me=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Ae=e("./frontend/src/lib/components/Tooltip.tsx"),Oe=e("./node_modules/clsx/dist/clsx.m.js"),v=e("./frontend/src/lib/components/ResizableTable/tableConfigLogic.ts"),g=e("./frontend/src/scenes/urls.ts"),s=e("./frontend/src/lib/components/LemonTable/index.ts"),n=e("./frontend/src/lib/components/icons.tsx"),o=e("./frontend/src/lib/components/LemonButton/index.ts"),r=e("./frontend/src/lib/components/LemonButton/More.tsx"),i=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),h=e("./frontend/src/scenes/teamLogic.ts"),O=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function P(l){Object(N.useEffect)(function(){var E="hidden",y="visibilitychange";typeof document.msHidden!="undefined"?(E="msHidden",y="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(E="webkitHidden",y="webkitvisibilitychange");var T=function(){l(!document[E])};return document.addEventListener(y,T),function(){document.removeEventListener(y,T)}},[])}var $=e("./frontend/src/lib/components/ResizableTable/TableConfig.tsx");function R(l){var E=l.pageKey,y=l.fixedFilters,T=l.fixedColumns,K=l.sceneUrl,L=l.fetchMonths,se=L===void 0?12:L,S=l.startingColumns,ve=l.showCustomizeColumns,p=ve===void 0?!0:ve,C=l.showExport,x=C===void 0?!0:C,fe=l.showAutoload,Pe=fe===void 0?!0:fe,Te=l.showEventFilter,Se=Te===void 0?!0:Te,Le=l.showRowExpanders,Qe=Le===void 0?!0:Le,Ve=l.showActionsButton,Xe=Ve===void 0?!0:Ve,we=l.showPersonColumn,Ze=we===void 0?!0:we,$e=l.linkPropertiesToFilters,Ne=$e===void 0?!0:$e,ke=Object(ie.useValues)(h.a),Ue=ke.currentTeam,Ye=Object(ge.a)({fixedFilters:y,key:E,sceneUrl:K||g.a.events(),fetchMonths:se}),_e=Object(ie.useValues)(Ye),Ie=_e.properties,qe=_e.eventsFormatted,ze=_e.isLoading,et=_e.hasNext,He=_e.isLoadingNext,Ke=_e.eventFilter,tt=_e.automaticLoadEnabled,nt=_e.exportUrl,rt=_e.highlightEvents,ot=_e.months,Je=Object(ie.useValues)(Object(v.a)({startingColumns:S})),We=Je.tableWidth,Re=Je.selectedColumns,De=Object(ie.useActions)(Ye),st=De.fetchNextEvents,at=De.prependNewEvents,lt=De.setEventFilter,it=De.toggleAutomaticLoad,dt=De.startDownload,ut=De.setPollingActive,ct=De.setProperties,mt=!(y!=null&&y.person_id);P(ut);var Ge=function(f,w){var B=f.date_break,b=f.new_events;return{children:B||(b?t.a.createElement(o.a,{icon:t.a.createElement(n.IconSync,null),style:{borderRadius:0},onClick:function(){return at()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:w+1,style:b?{padding:0}:void 0}}},pt={title:"Person",key:"person",render:function(f,w){var B,b,z=w.event;return z?mt&&((B=z.person)===null||B===void 0||(b=B.distinct_ids)===null||b===void 0?void 0:b.length)?t.a.createElement(J.a,{to:g.a.person(z.person.distinct_ids[0])},t.a.createElement(be.a,{withIcon:!0,person:z.person})):t.a.createElement(be.a,{withIcon:!0,person:z.person}):{props:{colSpan:0}}}},Fe=Object(N.useMemo)(function(){var Y=[{title:"Event",key:"event",width:"16rem",render:function(w,B){if(!B.event)return Ge(B,We);var b=B.event;return t.a.createElement(he.a,{value:Object(oe.g)(b)})},ellipsis:!0},{title:"URL / Screen",key:"url",width:"4rem",render:function(w,B){var b=B.event;if(!b)return{props:{colSpan:0}};var z=b.properties.$current_url?"$current_url":"$screen_name";return Ne?t.a.createElement(W,{className:"ph-no-capture",property:z,value:b.properties[z],filters:{properties:Ie}}):t.a.createElement(a,{value:b.properties[z]})},ellipsis:!0},{title:"Source",key:"source",render:function(w,B){var b=B.event;return b?Ne?t.a.createElement(W,{property:"$lib",value:b.properties.$lib,filters:{properties:Ie}}):t.a.createElement(a,{value:b.properties.$lib}):{props:{colSpan:0}}}}];return Ze&&Y.splice(1,0,pt),Y},[We]),vt=Object(N.useMemo)(function(){var Y=Re==="DEFAULT"?U()(Fe):Re.map(function(f,w){return Fe.find(function(B){return B.key===f})||{title:he.d.event[f]?he.d.event[f].label:f,key:f,render:function(b,z){var Be=z.event;return Be?Ne?t.a.createElement(W,{className:"ph-no-capture ",property:f,value:Be.properties[f],filters:{properties:Ie}}):t.a.createElement(a,{value:Be.properties[f]}):w===0?Ge(z,We):{props:{colSpan:0}}}}});return Y.push({title:"Time",key:"time",render:function(w,B){var b=B.event;return b?t.a.createElement(je.b,{time:b.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),Xe&&Y.push({key:"actions",width:0,render:function(w,B){var b=B.event;if(!b)return{props:{colSpan:0}};var z;return b.event==="$pageview"?z={insight:j.s.TRENDS,interval:"day",display:j.d.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:b.properties.$current_url,type:"event"}]}]}:b.event!=="$autocapture"&&(z={insight:j.s.TRENDS,interval:"day",display:j.d.ActionsLineGraph,actions:[],events:[{id:b.event,name:b.event,type:"events",order:0,properties:[]}]}),t.a.createElement(r.a,{overlay:t.a.createElement(t.a.Fragment,null,Ue&&t.a.createElement(o.a,{type:"stealth",onClick:function(){return Object(O.a)(Ue.id,b,0,Ue.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),z&&t.a.createElement(o.a,{type:"stealth",to:g.a.insightNew(z),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),T?Y.concat(T):Y},[Re]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table",style:{paddingTop:"1rem",borderTop:"1px solid var(--border)"}},t.a.createElement("div",{className:"mb",style:{display:"flex",gap:"1rem",flexWrap:"wrap",justifyContent:"space-between",alignItems:"start"}},t.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",flexDirection:"row",alignItems:"center",width:"100%"}},t.a.createElement(Me.a,{propertyFilters:Ie,onChange:ct,pageKey:E,taxonomicPopoverPlacement:"bottom-start",style:{marginBottom:0,marginTop:0},eventNames:Ke?[Ke]:[],useLemonButton:!0,prefixComponent:Se?t.a.createElement(Ce.b,{value:Ke,onChange:function(f){lt(f||"")}}):t.a.createElement(t.a.Fragment,null)})),t.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:"1rem",borderTop:Pe||p||x?"1px solid var(--border)":0,width:"100%",paddingTop:Pe||p||x?"1rem":0}},Pe&&t.a.createElement(i.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:tt,onChange:it}),t.a.createElement("div",{style:{display:"flex",gap:"0.5rem",flexDirection:"row"}},p&&t.a.createElement($.a,{immutableColumns:["event","person"],defaultColumns:Fe.map(function(Y){return Y.key||""})}),x&&nt&&t.a.createElement(Ae.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(o.a,{type:"secondary",icon:t.a.createElement(n.IconExport,{style:{color:"var(--primary)"}}),onClick:dt},"Export"))))),t.a.createElement(s.a,{dataSource:qe,loading:ze,columns:vt,key:Re==="DEFAULT"?"default":Re.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:ze?void 0:Ie.some(function(Y){return Object.keys(Y).length})||Ke?"No events matching filters found in the last ".concat(ot," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(J.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(f){var w;return f.event?f.event.id+"-"+f.event.event:((w=f.date_break)===null||w===void 0?void 0:w.toString())||""},rowClassName:function(f){return Object(Oe.a)({"event-row":f.event,highlighted:f.event&&rt[f.event.id],"event-row-is-exception":f.event&&f.event.event==="$exception","event-row-date-separator":f.date_break,"event-row-new":f.new_events})},expandable:Qe?{expandedRowRender:function(f){var w=f.event;return w&&t.a.createElement(te.a,{event:w})},rowExpandable:function(f){var w=f.event,B=f.date_break,b=f.new_events;return B||b?-1:!!w}}:void 0}),t.a.createElement(ne.a,{type:"primary",onClick:st,loading:He,style:{display:et||He?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{R.displayName="EventsTable",R.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:R.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(l){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(ue,M,e){"use strict";e.d(M,"a",function(){return g});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(H),k=e("./node_modules/core-js/modules/es.array.filter.js"),Ee=e.n(k),le=e("./node_modules/core-js/modules/es.array.for-each.js"),q=e.n(le),I=e("./node_modules/core-js/modules/es.array.iterator.js"),V=e.n(I),Q=e("./node_modules/core-js/modules/es.array.join.js"),ee=e.n(Q),U=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(U),t=e("./node_modules/core-js/modules/es.array.reduce.js"),ie=e.n(t),te=e("./node_modules/core-js/modules/es.array.splice.js"),J=e.n(te),ne=e("./node_modules/core-js/modules/es.object.to-string.js"),me=e.n(ne),de=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),pe=e.n(de),ce=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),re=e.n(ce),X=e("./node_modules/@babel/runtime/regenerator/index.js"),m=e.n(X),c=e("./node_modules/regenerator-runtime/runtime.js"),a=e.n(c),d=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),u=e.n(d),_=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),W=e.n(_),oe=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),D=e.n(oe),Z=e("./node_modules/kea/lib/index.esm.js"),G=e("./frontend/src/lib/utils.tsx"),A=e("./node_modules/kea-router/lib/index.js"),F=e.n(A),ye=e("./frontend/src/lib/api.ts"),xe=e("./frontend/src/scenes/teamLogic.ts"),ge=e("./frontend/src/lib/dayjs.ts"),be=e("./frontend/src/lib/logic/featureFlagLogic.ts"),je=e("./frontend/src/lib/components/lemonToast.tsx");function he(s,n){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),o.push.apply(o,r)}return o}function j(s){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?he(Object(o),!0).forEach(function(r){W()(s,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):he(Object(o)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(o,r))})}return s}var Ce=5,Me=365,Ae=5e3,Oe=function(n,o){var r=[];return r=n.map(function(i){return{event:i}}),r.forEach(function(i,h){var O=r[h-1];h>0&&i.event&&O.event&&!Object(ge.a)(i.event.timestamp).isSame(O.event.timestamp,"day")&&r.splice(h,0,{date_break:Object(ge.a)(i.event.timestamp).format("LL")})}),o.length>0&&r.splice(0,0,{new_events:!0}),r},v=function(n){return Object(ge.b)().subtract(n,"day").toISOString()},g=Object(Z.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(o){return!!o}).join("-")},connect:{values:[xe.a,["currentTeamId"],be.a,["featureFlags"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:{pollingIsActive:[!0,{setPollingActive:function(n,o){var r=o.pollingActive;return r},pollEventsSuccess:function(n,o){var r=o.events;return r&&r.length?!1:n},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(n,o){var r=o.properties;return Object(G.s)(r)}}],eventFilter:["",{setEventFilter:function(n,o){var r=o.event;return r}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(n,o){var r=o.events,i=o.isNext;return i?[].concat(D()(n),D()(r)):r},prependEvents:function(n,o){var r=o.events;return[].concat(D()(r),D()(n))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(n,o){var r=o.hasNext;return r}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(n,o){var r=o.selectedEvent;return r}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(n,o){var r=o.events;return r||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(n,o){var r=o.events;return r.reduce(function(i,h){return i[h.id]=!0,i},{})}}],pollTimeout:[0,{setPollTimeout:function(n,o){return o.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(n,o){var r=o.automaticLoadEnabled;return r}}]},selectors:function(n){var o=n.selectors,r=n.props;return{eventsFormatted:[function(){return[o.events,o.newEvents]},function(i,h){return Oe(i,h)}],exportUrl:[function(){return[o.currentTeamId,o.eventFilter,o.orderBy,o.properties,o.minimumQueryDate]},function(i,h,O,P,$){var R;return"/api/projects/".concat(i,"/events.csv?").concat(Object(G.zb)(j(j(j({},r.fixedFilters||{}),{},{properties:[].concat(D()(P),D()(((R=r.fixedFilters)===null||R===void 0?void 0:R.properties)||[]))},h?{event:h}:{}),{},{orderBy:[O],after:$})))}],months:[function(){return[function(i,h){return h.fetchMonths}]},function(i){return i||12}],minimumQueryDate:[function(){return[o.months]},function(i){return Object(ge.b)().subtract(i,"months").toISOString()}],pollAfter:[function(){return[o.events]},function(i){return(i==null?void 0:i.length)>0&&i[0].timestamp?i[0].timestamp:v(0)}]}},actionToUrl:function(n){var o=n.values;return{setProperties:function(){return[A.router.values.location.pathname,j(j({},A.router.values.searchParams),{},{properties:o.properties.length===0?void 0:o.properties}),A.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[A.router.values.location.pathname,j(j({},A.router.values.searchParams),{},{eventFilter:o.eventFilter}),A.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var o=n.actions,r=n.values,i=n.props;return W()({},i.sceneUrl,function(h,O){o.setProperties(O.properties||r.properties||{}),O.eventFilter&&o.setEventFilter(O.eventFilter)})},events:function(n){var o=n.values;return{beforeUnmount:function(){return clearTimeout(o.pollTimeout||void 0)}}},listeners:function(n){var o=n.actions,r=n.values,i=n.props;return{startDownload:function(){je.a.success("The export is starting. It should finish soon"),window.location.href=r.exportUrl},setProperties:function(){return o.fetchEvents()},setEventFilter:function(){return o.fetchEvents()},fetchNextEvents:function(){var h=u()(m.a.mark(function P(){var $;return m.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:$=r.events,$.length===0?o.fetchEvents():o.fetchEvents({before:$[$.length-1].timestamp});case 2:case"end":return l.stop()}},P)}));function O(){return h.apply(this,arguments)}return O}(),fetchEvents:function(){var h=u()(m.a.mark(function P($,R){var l,E,y,T,K,L,se,S;return m.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(K=function(){return K=u()(m.a.mark(function x(fe){var Pe;return m.a.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Pe=j(j(j(j({after:fe},i.fixedFilters||{}),{},{properties:y},E||{}),r.eventFilter?{event:r.eventFilter}:{}),{},{orderBy:[r.orderBy]}),Se.abrupt("return",ye.b.get("api/projects/".concat(r.currentTeamId,"/events/?").concat(Object(G.zb)(Pe))));case 2:case"end":return Se.stop()}},x)})),K.apply(this,arguments)},T=function(x){return K.apply(this,arguments)},E=$.nextParams,clearTimeout(r.pollTimeout),!(r.events.length>0)){p.next=9;break}return p.next=7,R(300);case 7:p.next=11;break;case 9:return p.next=11,R(1);case 11:return y=[].concat(D()(r.properties),D()(((l=i.fixedFilters)===null||l===void 0?void 0:l.properties)||[])),L=null,se=!1,p.prev=14,p.next=17,T(v(Ce));case 17:if(L=p.sent,L.results.length!==0){p.next=23;break}return p.next=21,T(v(Me));case 21:L=p.sent,se=!0;case 23:p.next=29;break;case 25:return p.prev=25,p.t0=p.catch(14),o.fetchOrPollFailure(p.t0),p.abrupt("return");case 29:R(),o.fetchEventsSuccess({events:L.results,hasNext:!!L.next||!se,isNext:!!E}),S=window.setTimeout(o.pollEvents,Ae),o.setPollTimeout(S);case 33:case"end":return p.stop()}},P,null,[[14,25]])}));function O(P,$){return h.apply(this,arguments)}return O}(),pollEvents:function(){var h=u()(m.a.mark(function P($,R){var l,E,y,T,K,L;return m.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(E=function(){var p=window.setTimeout(o.pollEvents,Ae);o.setPollTimeout(p)},r.orderBy==="-timestamp"){S.next=3;break}return S.abrupt("return");case 3:if(i.sceneUrl===A.router.values.location.pathname){S.next=5;break}return S.abrupt("return");case 5:if(r.pollingIsActive){S.next=8;break}return E(),S.abrupt("return");case 8:return y=[].concat(D()(r.properties),D()(((l=i.fixedFilters)===null||l===void 0?void 0:l.properties)||[])),T=j(j(j({},i.fixedFilters||{}),{},{properties:y},r.eventFilter?{event:r.eventFilter}:{}),{},{orderBy:[r.orderBy],after:r.pollAfter}),K=Object(G.zb)(T),L=null,S.prev=12,S.next=15,ye.b.get("api/projects/".concat(r.currentTeamId,"/events/?").concat(K));case 15:L=S.sent,S.next=21;break;case 18:return S.prev=18,S.t0=S.catch(12),S.abrupt("return");case 21:R(),r.automaticLoadEnabled?o.prependEvents(L.results):o.pollEventsSuccess(L.results),E();case 24:case"end":return S.stop()}},P,null,[[12,18]])}));function O(P,$){return h.apply(this,arguments)}return O}(),prependNewEvents:function(){r.newEvents.length&&o.prependEvents(r.newEvents)},fetchOrPollFailure:function(O){var P=O.error;je.a.error("There was a problem fetching your events: ".concat(P.statusText))},toggleAutomaticLoad:function(O){var P=O.automaticLoadEnabled;P&&o.prependNewEvents()}}}})},"./node_modules/@ant-design/icons/es/icons/SaveOutlined.js":function(ue,M,e){"use strict";var H=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ae=e("./node_modules/react/index.js"),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},Ee=k,le=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),q=function(Q,ee){return ae.createElement(le.a,Object(H.a)(Object(H.a)({},Q),{},{ref:ee,icon:Ee}))};q.displayName="SaveOutlined";var I=M.a=ae.forwardRef(q)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss":function(ue,M,e){var H=e("./node_modules/css-loader/dist/runtime/api.js");M=H(!1),M.push([ue.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.properties-table-key{min-width:12rem;display:flex;align-items:center;justify-content:space-between}.property-value-type{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;text-transform:uppercase;cursor:default}.property-value-type:not(:first-child){margin-left:.25rem}.properties-table-value{min-width:12rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;display:flex;align-items:center}.properties-table-value .value-link>*{vertical-align:middle}.properties-table-value .value-link>svg{margin-left:.25rem;font-size:1rem}.properties-table-value .editable{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;-webkit-text-decoration-color:#5375ff;text-decoration-color:#5375ff;cursor:pointer}",""]),ue.exports=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(ue,M,e){var H=e("./node_modules/css-loader/dist/runtime/api.js");M=H(!1),M.push([ue.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid #5375ff}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:#fffaf8}.events td{max-width:20rem}",""]),ue.exports=M}}]);
