(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(m,l,e){"use strict";e.r(l),e.d(l,"ProjectHomepage",function(){return T}),e.d(l,"scene",function(){return q});var v=e("./node_modules/core-js/modules/es.function.name.js"),_=e("./node_modules/core-js/modules/es.object.to-string.js"),ee=e("./node_modules/core-js/modules/es.regexp.to-string.js"),w=e("./node_modules/react/index.js"),a=e.n(w),A=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),M=e.n(A),V=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),L=e.n(V),j={};j.insert="head",j.singleton=!1;var ae=M()(L.a,j),oe=L.a.locals||{},R=e("./frontend/src/lib/components/PageHeader.tsx"),B=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),c=e("./node_modules/kea/lib/index.esm.js"),b=e("./frontend/src/scenes/teamLogic.ts"),P=e("./frontend/src/types.ts"),f=e("./node_modules/antd/es/button/index.js"),G=e("./node_modules/antd/es/row/index.js"),N=e("./node_modules/antd/es/typography/index.js"),W=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),$=e("./node_modules/kea-router/lib/index.js"),F=e("./frontend/src/scenes/urls.ts"),C=e("./frontend/src/lib/components/LemonRow/index.ts"),se=e("./node_modules/core-js/modules/es.symbol.js"),re=e("./node_modules/core-js/modules/es.symbol.description.js"),te=e("./node_modules/core-js/modules/es.array.map.js"),J=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/PrimaryDashboardModal.scss"),I=e.n(J),x={};x.insert="head",x.singleton=!1;var ne=M()(I.a,x),de=I.a.locals||{},z=e("./frontend/src/models/dashboardsModel.tsx"),K=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),S=e("./frontend/src/lib/components/LemonButton/index.ts"),Q=e("./node_modules/antd/es/skeleton/index.js"),U=e("./node_modules/@babel/runtime/regenerator/index.js"),H=e.n(U),le=e("./node_modules/regenerator-runtime/runtime.js"),X=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Y=e.n(X),D=Object(c.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{actions:[b.a,["updateCurrentTeam"]],values:[b.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(i){return{dashboardId:i}}},selectors:{primaryDashboardId:[function(o){return[o.currentTeam]},function(o){return o==null?void 0:o.primary_dashboard}]},reducers:{visible:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(i){var d=i.actions;return{setPrimaryDashboard:function(){var r=Y()(H.a.mark(function s(h){var u;return H.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:u=h.dashboardId,d.updateCurrentTeam({primary_dashboard:u});case 2:case"end":return n.stop()}},s)}));function t(s){return r.apply(this,arguments)}return t}()}}}),E=e("./frontend/src/lib/components/icons.tsx");function Z(){var o=Object(c.useValues)(D),i=o.visible,d=o.primaryDashboardId,r=Object(c.useActions)(D),t=r.closePrimaryDashboardModal,s=r.setPrimaryDashboard,h=Object(c.useValues)(z.a),u=h.nameSortedDashboards,g=h.dashboardsLoading;return a.a.createElement(K.a,{className:"primary-dashboard-modal",visible:i,onCancel:function(){t()},title:"Select a default dashboard for the project",destroyOnClose:!0,bodyStyle:{padding:0},footer:a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",style:{marginRight:"0.5rem"},onClick:t},"Close"))},g?a.a.createElement("div",{className:"loading-skeleton-container"},a.a.createElement(Q.a,{active:!0})):a.a.createElement("div",{className:"dashboard-list"},u.map(function(n){var y=n.id===d,p=[a.a.createElement("div",{key:1,className:"dashboard-label-container"},a.a.createElement("strong",null,n.name),a.a.createElement(N.a.Paragraph,{ellipsis:{rows:1},className:"text-small dashboard-description"},n.description)),a.a.createElement("div",{key:2},y?a.a.createElement("div",{className:"default-indicator"},a.a.createElement(E.HomeIcon,{className:"mr-05",style:{width:18}}),a.a.createElement("span",null,"Default")):a.a.createElement("strong",{className:"set-default-text"},"Set as default"))];return y?a.a.createElement(C.a,{key:n.id,fullWidth:!0,status:"muted",className:"dashboard-row"},p):a.a.createElement(S.a,{key:n.id,fullWidth:!0,className:"dashboard-row",onClick:function(){s(n.id),t()}},p)})))}var k=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),O=Object(c.kea)({path:["scenes","project-homepage","projectHomepageLogic"],selectors:{primaryDashboardId:[function(){return[b.a.selectors.currentTeam]},function(o){return o==null?void 0:o.primary_dashboard}],dashboardLogic:[function(o){return[o.primaryDashboardId]},function(o){return k.c.build({id:o!=null?o:void 0,placement:P.f.ProjectHomepage},!1)}]},subscriptions:function(i){var d=i.cache;return{dashboardLogic:function(t){var s;(s=d.unmount)===null||s===void 0||s.call(d),d.unmount=t?t.mount():null}}},events:function(i){var d=i.cache;return{afterMount:function(){var t;(t=d.unmount)===null||t===void 0||t.call(d)}}}});function T(){var o=Object(c.useValues)(O),i=o.dashboardLogic,d=Object(c.useValues)(b.a),r=d.currentTeam,t=Object(c.useValues)(i),s=t.dashboard,h=Object(c.useActions)(W.a),u=h.showInviteModal,g=Object(c.useActions)(D),n=g.showPrimaryDashboardModal,y=a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(f.a,{"data-attr":"project-home-invite-team-members",onClick:function(){u()},className:"mr-05"},"Invite members"),a.a.createElement(f.a,{"data-attr":"project-home-new-insight",onClick:function(){$.router.actions.push(F.a.insightNew({insight:P.s.TRENDS}))}},"New insight"));return a.a.createElement("div",{className:"project-homepage"},a.a.createElement(R.a,{title:(r==null?void 0:r.name)||"",delimited:!0,buttons:y}),r!=null&&r.primary_dashboard?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(G.a,{className:"homepage-dashboard-header"},a.a.createElement("div",{className:"dashboard-title-container"},(s==null?void 0:s.name)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(E.HomeIcon,{className:"mr-05",style:{width:18,height:18}}),a.a.createElement(N.a.Title,{className:"dashboard-name",level:4},s==null?void 0:s.name))),a.a.createElement(f.a,{"data-attr":"project-home-new-insight",onClick:n},"Change dashboard")),a.a.createElement(C.b,{large:!0})),a.a.createElement(B.Dashboard,{id:r.primary_dashboard.toString(),placement:P.f.ProjectHomepage})):a.a.createElement("div",{className:"empty-state-container"},a.a.createElement(E.HomeIcon,{className:"mb"}),a.a.createElement("h1",null,"There isn\u2019t a default dashboard set for this project"),a.a.createElement("p",{className:"mb"},"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."),a.a.createElement(f.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){n()}},"Select a default dashboard")),a.a.createElement(Z,null))}var q={component:T,logic:O}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/PrimaryDashboardModal.scss":function(m,l,e){var v=e("./node_modules/css-loader/dist/runtime/api.js");l=v(!1),l.push([m.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.primary-dashboard-modal .loading-skeleton-container{padding:1rem}.primary-dashboard-modal .dashboard-list{max-height:350px;overflow-y:scroll;padding:.5rem 1rem .25rem}.primary-dashboard-modal .dashboard-list .dashboard-row{display:flex;flex:1;height:60px;padding:.5rem;margin-bottom:.25rem}.primary-dashboard-modal .dashboard-list .dashboard-row .dashboard-label-container{color:#2d2d2d;flex:1}.primary-dashboard-modal .dashboard-list .dashboard-row .dashboard-description{margin-bottom:0;max-width:300px;color:rgba(0,0,0,.5)}.primary-dashboard-modal .dashboard-list .dashboard-row .set-default-text{color:#5375ff}.primary-dashboard-modal .dashboard-list .dashboard-row .default-indicator{color:#2d2d2d;display:flex;align-items:center}",""]),m.exports=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(m,l,e){var v=e("./node_modules/css-loader/dist/runtime/api.js");l=v(!1),l.push([m.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.project-homepage .homepage-dashboard-header{justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .dashboard-name{margin:0}.project-homepage .empty-state-container{background-color:#fafaf9;width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),m.exports=l}}]);
