(window.webpackJsonp=window.webpackJsonp||[]).push([[292],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(K,h,t){"use strict";t.r(h),t.d(h,"scene",function(){return X}),t.d(h,"ActionsTable",function(){return N});var d=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),f=t("./frontend/src/scenes/actions/Actions.scss"),m=t("./frontend/src/lib/components/Link.tsx"),v=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/radio/index.js"),M=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),L=t("./frontend/src/lib/utils.tsx"),l=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),I=t("./frontend/src/models/actionsModel.ts"),s=t("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),u=t("./frontend/src/scenes/urls.ts"),o=t("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),U=t("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),x=t("./frontend/src/lib/components/icons.tsx"),c=t("./frontend/src/lib/components/LemonButton/index.ts"),n=t("./frontend/@posthog/lemon-ui/src/index.ts"),e=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function j(){const[g,O]=Object(d.useState)(!1),[y,T]=Object(d.useState)(!1);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(c.a,{type:"primary",onClick:()=>O(!0),"data-attr":"create-action",children:"New action"}),Object(e.jsx)(n.LemonModal,{isOpen:g,onClose:()=>{O(!1),T(!1)},title:"Create new action",footer:Object(e.jsxs)(e.Fragment,{children:[y&&Object(e.jsx)(c.a,{type:"secondary",onClick:()=>T(!1),children:"Back"},"back-button"),Object(e.jsx)(c.a,{type:"secondary",onClick:()=>{O(!1),T(!1)},children:"Cancel"},"cancel-button")]}),children:y?Object(e.jsx)("div",{style:{maxWidth:"40rem"},children:Object(e.jsx)(o.a,{type:U.a.TOOLBAR_URLS})}):Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(c.a,{type:"secondary",icon:Object(e.jsx)(x.IconMagnifier,{}),onClick:()=>T(!0),size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect",children:"Inspect element on your site"}),Object(e.jsx)(c.a,{type:"secondary",icon:Object(e.jsx)(x.IconEdit,{}),onClick:()=>{s.router.actions.push(u.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview",children:"From event or pageview"})]})})]})}var b=t("./frontend/src/types.ts"),p=t("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),W=t("./frontend/src/scenes/userLogic.ts"),z=t("./frontend/src/scenes/teamLogic.tsx"),V=t("./frontend/src/lib/api.ts"),B=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),G=t("./frontend/src/lib/components/LemonTable/index.ts"),$=t("./frontend/src/lib/components/LemonDivider/index.ts"),H=t("./frontend/src/lib/components/LemonButton/More.tsx"),J=t("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),S=t("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),Y=t("./frontend/src/lib/components/PageHeader.tsx");const k=Object(l.kea)([Object(l.path)(["scenes","actions","actionsLogic"]),Object(l.selectors)({breadcrumbs:[()=>[],()=>[{name:"Data Management",path:u.a.eventDefinitions()},{name:"Actions",path:u.a.actions()}]]})]),Q=(g,O)=>new p.a(g,{keys:["name","url"],threshold:.3}).search(O).map(y=>y.item),X={component:N,logic:k};function N(){const{currentTeam:g}=Object(l.useValues)(z.a),{actions:O,actionsLoading:y}=Object(l.useValues)(Object(I.a)({params:"include_count=1"})),{loadActions:T}=Object(l.useActions)(I.a),[C,Z]=Object(d.useState)(""),[F,w]=Object(d.useState)(!1),{user:R,hasAvailableFeature:q}=Object(l.useValues)(W.a),_=[{title:"Name",dataIndex:"name",width:"25%",sorter:(i,a)=>(i.name||"").localeCompare(a.name||""),render:function(a,r,A){return Object(e.jsx)(m.a,{"data-attr":"action-link-"+A,to:u.a.action(r.id),className:"row-name",children:a||Object(e.jsx)("i",{children:"Unnamed action"})})}},...q(b.e.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(a){return Object(e.jsx)(J.a,{tags:a,staticOnly:!0})}}]:[],{title:"Type",key:"type",render:function(a,r){var A;return Object(e.jsx)("span",{children:(A=r.steps)!==null&&A!==void 0&&A.length?r.steps.map(D=>Object(e.jsx)("div",{children:(()=>{let E=Object(L.Gb)(D.url||"");switch(E=E.slice(0,40)+(E.length>40?"...":""),D.event){case"$autocapture":return"Autocapture";case"$pageview":switch(D.url_matching){case"regex":return Object(e.jsxs)(e.Fragment,{children:["Page view URL matches regex ",Object(e.jsx)("strong",{children:E})]});case"exact":return Object(e.jsxs)(e.Fragment,{children:["Page view URL matches exactly ",Object(e.jsx)("strong",{children:E})]});default:return Object(e.jsxs)(e.Fragment,{children:["Page view URL contains ",Object(e.jsx)("strong",{children:E})]})}default:return Object(e.jsxs)(e.Fragment,{children:["Event: ",Object(e.jsx)("strong",{children:D.event})]})}})()},D.id)):Object(e.jsx)("i",{children:"Empty \u2013 set this action up"})})}},Object(B.b)(),Object(B.a)(),...g!=null&&g.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:(i,a)=>Number(i.post_to_slack)-Number(a.post_to_slack),render:function(a){return a?Object(e.jsx)(M.a,{}):null}}]:[],{width:0,render:function(a,r){return Object(e.jsx)(H.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(c.a,{status:"stealth",to:u.a.action(r.id),fullWidth:!0,children:"Edit"}),Object(e.jsx)(c.a,{status:"stealth",to:Object(s.combineUrl)(u.a.sessionRecordings(),{filters:{actions:[{id:r.id,type:"actions",order:0,name:r.name}]}}).url,sideIcon:Object(e.jsx)(x.IconPlayCircle,{}),fullWidth:!0,"data-attr":"action-table-view-recordings",children:"View recordings"}),Object(e.jsx)(c.a,{status:"stealth",to:Object(s.combineUrl)(u.a.insightNew({insight:b.F.TRENDS,interval:"day",display:b.k.ActionsLineGraph,actions:[{id:r.id,name:r.name,type:"actions",order:0}]})).url,fullWidth:!0,children:"Try out in Insights"}),Object(e.jsx)($.a,{}),Object(e.jsx)(c.a,{status:"danger",onClick:()=>Object(L.x)({endpoint:V.b.actions.determineDeleteEndpoint(),object:r,callback:T}),fullWidth:!0,children:"Delete action"})]})})}}];let P=O;return C&&C!==""&&(P=Q(P,C)),F&&(P=P.filter(i=>{var a;return((a=i.created_by)===null||a===void 0?void 0:a.uuid)===(R==null?void 0:R.uuid)})),Object(e.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(e.jsx)(Y.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0,buttons:Object(e.jsx)(j,{})}),Object(e.jsx)(S.a,{tab:S.b.Actions}),Object(e.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4",children:[Object(e.jsx)(n.LemonInput,{type:"search",placeholder:"Search for actions",onChange:Z,value:C}),Object(e.jsxs)(v.a.Group,{buttonStyle:"solid",value:F,onChange:i=>w(i.target.value),children:[Object(e.jsx)(v.a.Button,{value:!1,children:"All actions"}),Object(e.jsx)(v.a.Button,{value:!0,children:"My actions"})]})]}),Object(e.jsx)(G.a,{columns:_,loading:y,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:P,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."})]})}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(K,h,t){"use strict";t.d(h,"b",function(){return o}),t.d(h,"a",function(){return c});var d=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),f=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),m=t("./frontend/src/scenes/urls.ts"),v=t("./frontend/src/lib/components/Tooltip.tsx"),M=t("./frontend/src/lib/components/icons.tsx"),L=t("./frontend/src/lib/components/TitleWithIcon.tsx"),l=t("./frontend/src/lib/constants.tsx"),I=t("./frontend/src/lib/logic/featureFlagLogic.ts"),s=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),u=t.n(s);let o;(function(n){n.Actions="actions",n.EventDefinitions="events",n.EventPropertyDefinitions="properties",n.IngestionWarnings="warnings"})(o||(o={}));const U={[o.EventPropertyDefinitions]:m.a.eventPropertyDefinitions(),[o.EventDefinitions]:m.a.eventDefinitions(),[o.Actions]:m.a.actions(),[o.IngestionWarnings]:m.a.ingestionWarnings()},x=Object(d.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[I.a,["featureFlags"]]},actions:{setTab:n=>({tab:n})},reducers:{tab:[o.EventDefinitions,{setTab:(n,e)=>{let{tab:j}=e;return j}}]},selectors:{showWarningsTab:[n=>[n.featureFlags],n=>!!n[l.i.INGESTION_WARNINGS_ENABLED]]},actionToUrl:()=>({setTab:n=>{let{tab:e}=n;return U[e]||m.a.events()}}),urlToAction:n=>{let{actions:e,values:j}=n;return Object.fromEntries(Object.entries(U).map(b=>{let[p,W]=b;return[W,()=>{j.tab!==p&&e.setTab(p)}]}))}});function c(n){let{tab:e}=n;const{showWarningsTab:j}=Object(d.useValues)(x),{setTab:b}=Object(d.useActions)(x);return Object(s.jsxs)(f.a,{tabPosition:"top",animated:!1,activeKey:e,onTabClick:p=>b(p),children:[Object(s.jsx)(f.a.TabPane,{tab:Object(s.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},o.EventDefinitions),Object(s.jsx)(f.a.TabPane,{tab:Object(s.jsx)(L.a,{icon:Object(s.jsx)(v.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(s.jsx)(M.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},o.Actions),Object(s.jsx)(f.a.TabPane,{tab:Object(s.jsx)(L.a,{icon:Object(s.jsx)(v.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(s.jsx)(M.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},o.EventPropertyDefinitions),j&&Object(s.jsx)(f.a.TabPane,{tab:Object(s.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},o.IngestionWarnings)]})}try{c.displayName="DataManagementPageTabs",c.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:c.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(n){}}}]);
