(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{"./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx":function(se,I,t){"use strict";t.d(I,"a",function(){return M});var N=t("./node_modules/core-js/modules/es.array.map.js"),A=t.n(N),B=t("./node_modules/react/index.js"),p=t.n(B),U=t("./node_modules/clsx/dist/clsx.m.js"),y=t("./node_modules/kea/lib/index.esm.js"),e=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),i=t("./frontend/src/lib/components/LemonButton/index.ts"),f=t("./node_modules/antd/es/popconfirm/index.js"),m=t("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),F=t("./frontend/src/lib/components/LemonRow/index.ts"),D=t("./frontend/src/lib/components/icons.tsx"),x=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),_=t("./node_modules/kea-forms/lib/index.js"),G=t.n(_),W=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),L=t("./frontend/src/lib/forms/Field.tsx");function z(b){var C=b.numberOfResults,P=b.isSearching,Y=b.isAddingEntry,J=b.type;return C>0?null:P?p.a.createElement(F.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized ",J===m.a.RECORDING_DOMAINS?"domains":"URLs"," that match your search."):Y?null:p.a.createElement(F.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},J===m.a.RECORDING_DOMAINS?"No domains are specified, so recordings will be authorized on all domains.":"There are no authorized urls. Add one to get started.")}function V(b){var C=b.actionId,P=b.type,Y=Object(m.c)({actionId:C,type:P}),J=Object(y.useValues)(Y),X=J.isProposedUrlSubmitting,R=Object(y.useActions)(Y),q=R.cancelProposingUrl;return p.a.createElement(_.Form,{logic:m.c,props:{actionId:C,type:P},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2"},p.a.createElement(L.a,{name:"url"},p.a.createElement(W.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),p.a.createElement("div",{className:"flex justify-end gap-2"},p.a.createElement(i.a,{type:"secondary",onClick:q},"Cancel"),p.a.createElement(i.a,{htmlType:"submit",type:"primary",disabled:X,"data-attr":"url-save"},"Save")))}function M(b){var C=b.actionId,P=b.type,Y=b.addText,J=Y===void 0?"Add":Y,X=Object(m.c)({actionId:C,type:P}),R=Object(y.useValues)(X),q=R.urlsKeyed,le=R.suggestionsLoading,ie=R.searchTerm,Ee=R.launchUrl,ye=R.editUrlIndex,k=R.isAddUrlFormVisible,ne=R.onlyAllowDomains,$=Object(y.useActions)(X),w=$.addUrl,ee=$.removeUrl,te=$.setSearchTerm,be=$.newUrl,ce=$.setEditUrlIndex;return p.a.createElement("div",null,p.a.createElement("div",{className:"flex items-center mb-4 gap-2 justify-between"},p.a.createElement(W.a,{type:"search",placeholder:"Search for authorized ".concat(ne?"domains":"URLs"),onChange:te,value:ie}),p.a.createElement(i.a,{onClick:be,type:"secondary",icon:p.a.createElement(D.IconPlus,null),"data-attr":"toolbar-add-url"},J)),le?p.a.createElement(F.a,{outlined:!0,fullWidth:!0,size:"large",key:-1},p.a.createElement(x.a,{className:"text-xl"})):p.a.createElement("div",{className:"space-y-2"},k&&p.a.createElement(F.a,{outlined:!0,fullWidth:!0,size:"large"},p.a.createElement(V,{type:P,actionId:C})),p.a.createElement(z,{numberOfResults:q.length,isSearching:ie.length>0,isAddingEntry:k,type:P}),q.map(function(K,H){return p.a.createElement("div",{key:H,className:Object(U.a)("border rounded flex items-center py-2 px-4 min-h-14")},ye===H?p.a.createElement(V,{type:P,actionId:C}):p.a.createElement(p.a.Fragment,null,K.type==="suggestion"&&p.a.createElement(e.a,{type:"highlight",className:"mr-4 uppercase"},"Suggestion"),p.a.createElement("span",{title:K.url,className:"flex-1 truncate"},K.url),p.a.createElement("div",{className:"Actions flex space-x-2 shrink-0"},K.type==="suggestion"?p.a.createElement(i.a,{onClick:function(){return w(K.url)},icon:p.a.createElement(D.IconPlus,null),"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):p.a.createElement(p.a.Fragment,null,p.a.createElement(i.a,{icon:p.a.createElement(D.IconOpenInApp,null),to:Ee(K.url),targetBlank:!0,tooltip:P===m.a.TOOLBAR_URLS?"Launch toolbar":"Launch url",center:!0,className:"ActionButton","data-attr":"toolbar-open"},"Launch"),p.a.createElement(i.a,{icon:p.a.createElement(D.IconEdit,null),onClick:function(){return ce(K.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),p.a.createElement(f.a,{placement:"topRight",title:p.a.createElement(p.a.Fragment,null,"Are you sure you want to remove this authorized"," ",ne?"domain":"URL","?"),onConfirm:function(){return ee(H)}},p.a.createElement(i.a,{icon:p.a.createElement(D.IconDelete,null),tooltip:"Remove ".concat(ne?"domain":"URL"),center:!0,className:"ActionButton"}))))))})))}try{M.displayName="AuthorizedUrlList",M.__docgenInfo={description:"",displayName:"AuthorizedUrlList",props:{actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"TOOLBAR_URLS"'},{value:'"RECORDING_DOMAINS"'}]}},addText:{defaultValue:{value:"Add"},description:"",name:"addText",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"]={docgenInfo:M.__docgenInfo,name:"AuthorizedUrlList",path:"frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"})}catch(b){}},"./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx":function(se,I,t){"use strict";t.d(I,"a",function(){return i});var N=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),A=t.n(N),B=t("./node_modules/react/index.js"),p=t.n(B),U=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),y=t("./frontend/src/lib/components/LemonButton/index.ts"),e=t("./frontend/src/lib/components/LemonDivider/index.ts");function i(f){var m=f.item,F=f.onComplete,D=f.onClose,x=Object(B.useState)(m.alias),_=A()(x,2),G=_[0],W=_[1],L=Object(B.useState)(m.regex),z=A()(L,2),V=z[0],M=z[1];return p.a.createElement("div",{className:"px-2"},p.a.createElement("b",null,"New Wildcard"),p.a.createElement(e.a,null),p.a.createElement("div",{className:"space-y-2"},p.a.createElement("div",null,p.a.createElement("span",null,"Alias"),p.a.createElement(U.a,{defaultValue:G,onChange:function(C){return W(C)},onPressEnter:function(){return!1}})),p.a.createElement("div",null,p.a.createElement("span",null,"Regex"),p.a.createElement(U.a,{defaultValue:V,onChange:function(C){return M(C)},onPressEnter:function(){return!1}}),p.a.createElement("div",{className:"text-muted",style:{marginBottom:12}},"For example: ",p.a.createElement("code",null,"\\/merchant\\/\\d+\\/dashboard$")))),p.a.createElement("div",{className:"flex justify-end gap-2"},p.a.createElement(y.a,{type:"secondary",onClick:D},"Cancel"),p.a.createElement(y.a,{type:"primary",onClick:function(){return F({alias:G,regex:V})}},"Save")))}try{i.displayName="PathRegexPopup",i.__docgenInfo={description:"",displayName:"PathRegexPopup",props:{onComplete:{defaultValue:null,description:"",name:"onComplete",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"]={docgenInfo:i.__docgenInfo,name:"PathRegexPopup",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"})}catch(f){}},"./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx":function(se,I,t){"use strict";t.d(I,"a",function(){return i});var N=t("./node_modules/core-js/modules/es.array.map.js"),A=t.n(N),B=t("./node_modules/react/index.js"),p=t.n(B),U=t("./frontend/src/scenes/actions/Actions.scss"),y=t("./frontend/src/lib/components/PropertyFilters/components/FilterRow.tsx"),e=t("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx");function i(f){var m=f.pageKey,F=f.onChange,D=f.onRemove,x=f.pathCleaningFilters,_=f.showConditionBadge,G=_===void 0?!1:_,W=f.disablePopover,L=W===void 0?!1:W;return p.a.createElement("div",{className:"flex items-center gap-2 flex-wrap"},x.length>0&&x.map(function(z,V){return p.a.createElement(y.a,{key:V,item:z,index:V,totalCount:x.length-1,filters:x,pageKey:m,showConditionBadge:G,disablePopover:L,label:"Add rule",onRemove:D,filterComponent:function(b){return p.a.createElement(e.a,{item:z,onClose:b,onComplete:function(P){F(P),b()}})}})}))}try{i.displayName="PathCleanFilters",i.__docgenInfo={description:"",displayName:"PathCleanFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(index: number) => void"}},pathCleaningFilters:{defaultValue:null,description:"",name:"pathCleaningFilters",required:!0,type:{name:"Record<string, any>[]"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},showConditionBadge:{defaultValue:{value:"false"},description:"",name:"showConditionBadge",required:!1,type:{name:"boolean"}},disablePopover:{defaultValue:{value:"false"},description:"",name:"disablePopover",required:!1,type:{name:"boolean"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"]={docgenInfo:i.__docgenInfo,name:"PathCleanFilters",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"})}catch(f){}},"./frontend/src/lib/hooks/useAnchor.ts":function(se,I,t){"use strict";t.d(I,"a",function(){return B});var N=t("./node_modules/react/index.js"),A=t.n(N);function B(p){Object(N.useEffect)(function(){if(p&&document.getElementById(p.substr(1))){var U=document.getElementById(p.substr(1));if(!U)return;U.classList.add("highlighted");var y=U.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:y-50-32,behavior:"smooth"})}},[p])}},"./frontend/src/scenes/project/Settings/index.tsx":function(se,I,t){"use strict";t.r(I),t.d(I,"scene",function(){return Et}),t.d(I,"ProjectSettings",function(){return Be});var N=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),A=t.n(N),B=t("./node_modules/core-js/modules/es.function.name.js"),p=t("./node_modules/core-js/modules/es.array.includes.js"),U=t("./node_modules/core-js/modules/es.string.includes.js"),y=t("./node_modules/react/index.js"),e=t.n(y),i=t("./node_modules/kea/lib/index.esm.js"),f=t("./frontend/src/scenes/teamLogic.tsx"),m=t("./frontend/@posthog/lemon-ui/src/index.ts");function F(){var n=Object(i.useActions)(f.a),a=n.updateCurrentTeam,r=Object(i.useValues)(f.a),o=r.currentTeam,s=r.currentTeamLoading;return e.a.createElement(m.LemonSwitch,{onChange:function(u){a({anonymize_ips:u})},checked:!!(o!=null&&o.anonymize_ips),disabled:s,label:"Discard client IP data",bordered:!0})}var D=t("./frontend/src/lib/components/JSSnippet.tsx"),x=t("./frontend/src/scenes/urls.ts"),_=t("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),G=t("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),W=t("./frontend/src/lib/logic/featureFlagLogic.ts"),L=t("./frontend/src/lib/constants.tsx");function z(){var n=Object(i.useActions)(f.a),a=n.updateCurrentTeam,r=Object(i.useValues)(f.a),o=r.currentTeam,s=Object(i.useValues)(W.a),g=s.featureFlags;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{id:"recordings",className:"subtitle"},"Recordings"),e.a.createElement("p",null,"Watch recordings of how users interact with your web app to see what can be improved. Recordings are found in the ",e.a.createElement(m.Link,{to:x.a.sessionRecordings()},"recordings page"),"."),e.a.createElement("p",null,"Please note ",e.a.createElement("b",null,"your website needs to have")," the ",e.a.createElement("a",{href:"#snippet"},"PostHog snippet")," or the latest version of"," ",e.a.createElement("a",{href:"https://posthog.com/docs/integrations/js-integration?utm_campaign=session-recording&utm_medium=in-product",target:"_blank"},"posthog-js")," ",e.a.createElement("b",null,"directly")," installed. For more details, check out our"," ",e.a.createElement("a",{href:"https://posthog.com/docs/user-guides/recordings?utm_campaign=session-recording&utm_medium=in-product",target:"_blank"},"docs"),"."),e.a.createElement(m.LemonSwitch,{"data-attr":"opt-in-session-recording-switch",onChange:function(l){a({session_recording_opt_in:l})},checked:!!(o!=null&&o.session_recording_opt_in),label:"Record user sessions",bordered:!0}),o!=null&&o.session_recording_opt_in?e.a.createElement(e.a.Fragment,null,g[L.i.SESSION_CONSOLE]?e.a.createElement(e.a.Fragment,null,e.a.createElement("h3",{className:"my-6",id:"urls"},"Capture console logs within recordings"),e.a.createElement("p",null,"This setting controls if browser console logs wil captured as a part of recordings. The console logs will be shown in the recording player to help you debug any issues."),e.a.createElement(m.LemonSwitch,{"data-attr":"opt-in-capture-console-log-switch",onChange:function(l){a({capture_console_log_opt_in:l})},checked:!!(o!=null&&o.capture_console_log_opt_in),label:"Capture console logs",bordered:!0})):null,e.a.createElement("h3",{className:"my-6",id:"urls"},"Authorized domains for recordings"),e.a.createElement("p",null,"Use the settings below to restrict the domains where recordings will be captured. If no domains are selected, then there will be no domain restriction."),e.a.createElement("p",null,e.a.createElement("b",null,"Domains and wilcard subdomains are allowed")," (example: ",e.a.createElement("code",null,"https://*.example.com"),"). However, wildcarded top-level domains cannot be used (for security reasons)."),e.a.createElement(_.a,{type:G.a.RECORDING_DOMAINS})):null)}var V=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),M=t.n(V),b=t("./node_modules/@babel/runtime/regenerator/index.js"),C=t.n(b),P=t("./node_modules/core-js/modules/es.regexp.exec.js"),Y=t("./node_modules/core-js/modules/es.string.replace.js"),J=t("./frontend/src/lib/api.ts"),X=t("./frontend/src/lib/components/lemonToast.tsx"),R=t("./frontend/src/lib/utils.tsx");function q(n){return n.replace(/\/*(?:posthog|slack)?\/?$/,"/slack")}var le=Object(i.kea)({path:["scenes","project","Settings","webhookIntegrationLogic"],loaders:function(a){var r=a.actions;return{testedWebhook:[null,{testWebhook:function(){var o=M()(C.a.mark(function g(u){var l,c;return C.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((l=u)!==null&&l!==void 0&&l.includes("discord.com/")&&(u=q(u)),!u){d.next=16;break}return d.prev=2,d.next=5,J.b.create("api/user/test_slack_webhook",{webhook:u});case 5:if(c=d.sent,!c.success){d.next=10;break}return d.abrupt("return",u);case 10:r.testWebhookFailure(c.error);case 11:d.next=16;break;case 13:d.prev=13,d.t0=d.catch(2),r.testWebhookFailure(d.t0.message);case 16:return d.abrupt("return",null);case 17:case"end":return d.stop()}},g,null,[[2,13]])}));function s(g){return o.apply(this,arguments)}return s}()}],removedWebhook:[null,{removeWebhook:function(){return f.a.actions.updateCurrentTeam({slack_incoming_webhook:""}),null}}]}},listeners:function(){return{testWebhookSuccess:function(){var a=M()(C.a.mark(function o(s){var g;return C.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:g=s.testedWebhook,g&&f.a.actions.updateCurrentTeam({slack_incoming_webhook:g});case 2:case"end":return l.stop()}},o)}));function r(o){return a.apply(this,arguments)}return r}(),testWebhookFailure:function(r){var o=r.error;X.d.error(Object(R.i)(o))}}},selectors:{loading:[function(n){return[n.testedWebhookLoading,f.a.selectors.currentTeamLoading]},function(n,a){return n||a}]}});function ie(){var n=Object(y.useState)(""),a=A()(n,2),r=a[0],o=a[1],s=Object(i.useActions)(le),g=s.testWebhook,u=s.removeWebhook,l=Object(i.useValues)(le),c=l.loading,h=Object(i.useValues)(f.a),d=h.currentTeam;return Object(y.useEffect)(function(){d!=null&&d.slack_incoming_webhook&&o(d==null?void 0:d.slack_incoming_webhook)},[d]),e.a.createElement("div",null,e.a.createElement("p",null,"Send notifications when selected actions are performed by users.",e.a.createElement("br",null),"Guidance on integrating with webhooks available in our docs,"," ",e.a.createElement("a",{href:"https://posthog.com/docs/integrate/third-party/slack"},"for Slack")," and"," ",e.a.createElement("a",{href:"https://posthog.com/docs/integrations/microsoft-teams"},"for Microsoft Teams"),". Discord is also supported."),e.a.createElement("div",{className:"space-y-4",style:{maxWidth:"40rem"}},e.a.createElement(m.LemonInput,{value:r,onChange:o,type:"url",placeholder:d!=null&&d.slack_incoming_webhook?"":"integration disabled - enter URL, then Test & Save",disabled:c,onPressEnter:function(){return g(r)}}),e.a.createElement("div",{className:"flex items-center gap-2"},e.a.createElement(m.LemonButton,{type:"primary",disabled:!r,onClick:function(v){v.preventDefault(),g(r)},loading:c},"Test & Save"),e.a.createElement(m.LemonButton,{status:"danger",type:"secondary",onClick:function(v){v.preventDefault(),u(),o("")},disabled:!(d!=null&&d.slack_incoming_webhook)},"Clear & Disable"))))}var Ee=t("./frontend/src/lib/hooks/useAnchor.ts"),ye=t("./node_modules/kea-router/lib/index.js"),k=t("./frontend/src/scenes/userLogic.ts");function ne(){var n=Object(i.useValues)(k.a),a=n.user,r=n.userLoading,o=Object(i.useActions)(k.a),s=o.updateUser;return e.a.createElement(m.LemonSwitch,{id:"posthog-toolbar-switch",onChange:function(){s({toolbar_mode:(a==null?void 0:a.toolbar_mode)==="disabled"?"toolbar":"disabled"})},checked:(a==null?void 0:a.toolbar_mode)!=="disabled",disabled:r,label:"Enable PostHog Toolbar",bordered:!0})}var $=t("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),w=t("./frontend/src/lib/components/icons.tsx");function ee(n){var a=n.isOpen,r=n.setIsOpen,o=Object(i.useValues)(f.a),s=o.currentTeam,g=o.teamBeingDeleted,u=Object(i.useActions)(f.a),l=u.deleteTeam,c=Object(y.useState)(!1),h=A()(c,2),d=h[0],E=h[1],v=!!s&&(g==null?void 0:g.id)===s.id;return e.a.createElement(m.LemonModal,{title:"Delete the project and its data?",onClose:function(){return r(!1)},footer:e.a.createElement(e.a.Fragment,null,e.a.createElement(m.LemonButton,{disabled:v,type:"secondary",onClick:function(){return r(!1)}},"Cancel"),e.a.createElement(m.LemonButton,{type:"primary",disabled:!d,loading:v,"data-attr":"delete-project-ok",status:"danger",onClick:s?function(){return l(s)}:void 0},"Delete ".concat(s?s.name:"the current project"))),isOpen:a},e.a.createElement("p",null,"Project deletion ",e.a.createElement("b",null,"cannot be undone"),". You will lose all data, ",e.a.createElement("b",null,"including events"),", related to the project."),e.a.createElement("p",null,"Please type ",e.a.createElement("strong",null,s?s.name:"this project's name")," to confirm."),e.a.createElement(m.LemonInput,{type:"text",onChange:function(j){s&&E(j.toLowerCase()===s.name.toLowerCase())}}))}function te(n){var a=n.isRestricted,r=Object(i.useValues)(f.a),o=r.currentTeam,s=Object(y.useState)(!1),g=A()(s,2),u=g[0],l=g[1];return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"text-danger"},e.a.createElement("h2",{className:"text-danger subtitle"},"Danger Zone"),e.a.createElement("div",{className:"mt-4"},!a&&e.a.createElement("p",{className:"text-danger"},"This is ",e.a.createElement("b",null,"irreversible"),". Please be certain."),e.a.createElement(m.LemonButton,{status:"danger",type:"secondary",onClick:function(){return l(!0)},"data-attr":"delete-project-button",icon:e.a.createElement(w.IconDelete,null),disabled:a},"Delete ",(o==null?void 0:o.name)||"the current project"))),e.a.createElement(ee,{isOpen:u,setIsOpen:l}))}try{ee.displayName="DeleteProjectModal",ee.__docgenInfo={description:"",displayName:"DeleteProjectModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/DangerZone.tsx#DeleteProjectModal"]={docgenInfo:ee.__docgenInfo,name:"DeleteProjectModal",path:"frontend/src/scenes/project/Settings/DangerZone.tsx#DeleteProjectModal"})}catch(n){}try{te.displayName="DangerZone",te.__docgenInfo={description:"",displayName:"DangerZone",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/DangerZone.tsx#DangerZone"]={docgenInfo:te.__docgenInfo,name:"DangerZone",path:"frontend/src/scenes/project/Settings/DangerZone.tsx#DangerZone"})}catch(n){}var be=t("./frontend/src/lib/components/PageHeader.tsx"),ce=t("./frontend/src/lib/components/Link.tsx"),K=t("./frontend/src/lib/components/JSBookmarklet.tsx"),H=t("./frontend/src/lib/components/RestrictedArea.tsx"),ue=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Te=t.n(ue),Ct=t("./node_modules/core-js/modules/es.array.concat.js"),Ot=t("./node_modules/core-js/modules/es.object.to-string.js"),jt=t("./node_modules/core-js/modules/es.regexp.to-string.js"),Ue=t("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Fe=t("./frontend/src/lib/utils/eventUsageLogic.ts"),ae=t("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Ce=t("./frontend/src/models/groupsModel.ts");function Ve(){var n=Object(i.useActions)(f.a),a=n.updateCurrentTeam,r=Object(i.useActions)(Fe.e),o=r.reportTestAccountFiltersUpdated,s=Object(i.useValues)(f.a),g=s.currentTeam,u=s.currentTeamLoading,l=Object(i.useValues)(Ce.a),c=l.groupsTaxonomicTypes,h=function(E){a({test_account_filters:E}),o(E)};return e.a.createElement("div",{className:"mb-4 flex flex-col gap-2"},e.a.createElement("div",{className:"mb-4"},g&&e.a.createElement(Ue.a,{pageKey:"testaccountfilters",propertyFilters:g==null?void 0:g.test_account_filters,onChange:h,taxonomicGroupTypes:[ae.a.EventProperties,ae.a.PersonProperties,ae.a.EventFeatureFlags].concat(Te()(c),[ae.a.Cohorts,ae.a.Elements])})),e.a.createElement(m.LemonSwitch,{onChange:function(E){localStorage.setItem("default_filter_test_accounts",E.toString()),a({test_account_filters_default_checked:E})},checked:!!(g!=null&&g.test_account_filters_default_checked),disabled:u,label:"Enable this filter on all new insights",bordered:!0}))}var Tt=t("./node_modules/core-js/modules/es.array.map.js"),At=t("./node_modules/core-js/modules/es.object.entries.js"),we=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),de=t("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx"),Ae=t("./frontend/src/lib/components/LemonDialog/index.ts"),me=t("./frontend/src/lib/components/LemonSkeleton/index.tsx");function We(){var n=Object(i.useValues)(we.a),a=n.preflight,r=Object(i.useValues)(f.a),o=r.currentTeam,s=r.currentTeamLoading,g=Object(i.useActions)(f.a),u=g.updateCurrentTeam;if(!(a!=null&&a.available_timezones)||!o)return e.a.createElement(me.a,{className:"w-1/2"});function l(h){Ae.a.open({title:"Do you want to change the timezone of this project?",description:"This will change how every graph in this project is calculated, which means your data will look different than it did before.",primaryButton:{children:"Change timezone",status:"danger",onClick:function(){return u({timezone:h})}},secondaryButton:{children:"Cancel"}})}var c=Object.entries(a.available_timezones).map(function(h){var d=A()(h,2),E=d[0],v=d[1],O="".concat(E.replace(/\//g," / ").replace(/_/g," ")," (UTC").concat(v===0?"\xB1":v>0?"+":"-").concat(Math.abs(v),")");return{key:E,label:O}});return e.a.createElement(de.a,{mode:"single",placeholder:"Select a timezone",loading:s,disabled:s,value:[o.timezone],onChange:function(d){return l(d)},options:c,"data-attr":"timezone-select"})}var Lt=t("./node_modules/core-js/modules/es.array.filter.js"),St=t("./node_modules/core-js/modules/es.string.trim.js"),ze=t("./node_modules/antd/es/skeleton/index.js");function ke(){var n=Object(i.useValues)(f.a),a=n.currentTeam,r=n.currentTeamLoading,o=Object(i.useActions)(f.a),s=o.updateCurrentTeam,g=Object(y.useState)([]),u=A()(g,2),l=u[0],c=u[1];return Object(y.useEffect)(function(){return c((a==null?void 0:a.data_attributes)||[])},[a]),a?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Specify a comma-separated list of"," ",e.a.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes",rel:"noreferrer noopener"},"data attributes")," ","used in your app. For example: ",e.a.createElement("code",null,"data-attr, data-custom-id, data-myref-*"),". These attributes will be used when using the toolbar and defining actions to match unique elements on your pages. You can use ",e.a.createElement("code",null,"*")," as a wildcard."),e.a.createElement("p",null,"For example, when creating an action on your CTA button, the best selector could be something like:"," ",e.a.createElement("code",null,"div > form > button:nth-child(2)"),". However all buttons in your app have a"," ",e.a.createElement("code",null,"data-custom-id")," attribute. If you whitelist it here, the selector for your button will instead be ",e.a.createElement("code",null,"button[data-custom-id='cta-button']"),"."),e.a.createElement("div",{className:"space-y-4",style:{maxWidth:"40rem"}},e.a.createElement(de.a,{mode:"multiple-custom",onChange:function(d){return c(d||[])},value:l,"data-attr":"data-attribute-select",placeholder:"data-attr, ...",loading:r,disabled:r}),e.a.createElement(m.LemonButton,{type:"primary",onClick:function(){return s({data_attributes:l.map(function(d){return d.trim()}).filter(function(d){return d})||[]})}},"Save"))):e.a.createElement(ze.a,{paragraph:{rows:0},active:!0})}var re=t("./frontend/src/types.ts"),Q=t("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),pe=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zM512 734.2c-62.1 0-112.6-50.5-112.6-112.6S449.9 509 512 509s112.6 50.5 112.6 112.6S574.1 734.2 512 734.2zm0-160.9c-26.6 0-48.2 21.6-48.2 48.3 0 26.6 21.6 48.3 48.2 48.3s48.2-21.6 48.2-48.3c0-26.6-21.6-48.3-48.2-48.3z"}}]},name:"crown",theme:"filled"},He=Ke,Le=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Se=function(a,r){return y.createElement(Le.a,Object(pe.a)(Object(pe.a)({},a),{},{ref:r,icon:He}))};Se.displayName="CrownFilled";var Ge=y.forwardRef(Se),Ye=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),Je=t("./node_modules/@ant-design/icons/es/icons/LogoutOutlined.js"),$e=t("./frontend/src/lib/components/ProfilePicture/index.ts"),Z=t("./frontend/src/lib/utils/permissioning.ts"),Ze=t("./frontend/src/lib/components/UserSelectItem.tsx"),Qe=t("./node_modules/kea-forms/lib/index.js"),Pe=t("./frontend/src/lib/forms/Field.tsx");function ge(n){var a=n.isRestricted,r=Object(i.useValues)(Q.b),o=r.addableMembers,s=r.allMembersLoading,g=Object(i.useValues)(f.a),u=g.currentTeam,l=Object(y.useState)(!1),c=A()(l,2),h=c[0],d=c[1];function E(){d(!1)}return e.a.createElement(e.a.Fragment,null,e.a.createElement(m.LemonButton,{type:"primary","data-attr":"add-project-members-button",onClick:function(){d(!0)},icon:e.a.createElement(w.IconPlus,null),disabled:a},"Add members to project"),e.a.createElement(m.LemonModal,{title:"",onClose:E,isOpen:h,simple:!0},e.a.createElement(Qe.Form,{logic:Q.b,formKey:"addMembers",enableFormOnSubmit:!0},e.a.createElement(m.LemonModal.Header,null,e.a.createElement("h3",null,"Adding members".concat(u!=null&&u.name?" to project ".concat(u.name):""))),e.a.createElement(m.LemonModal.Content,{className:"space-y-2"},e.a.createElement(Pe.a,{name:"userUuids"},e.a.createElement(de.a,{mode:"multiple",placeholder:"Organization members",loading:s,options:Object(Ze.a)(o.map(function(v){return v.user}),"uuid")})),e.a.createElement(Pe.a,{name:"level",label:"With project-specific access level"},e.a.createElement(m.LemonSelect,{fullWidth:!0,options:Z.d.map(function(v){return{value:v,label:Z.b.get(v)}})}))),e.a.createElement(m.LemonModal.Footer,null,e.a.createElement(m.LemonButton,{type:"secondary",onClick:E},"Cancel"),e.a.createElement(m.LemonButton,{type:"primary","data-attr":"add-project-members-submit",htmlType:"submit"},"Add members to project")))))}try{ge.displayName="AddMembersModalWithButton",ge.__docgenInfo={description:"",displayName:"AddMembersModalWithButton",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/AddMembersModal.tsx#AddMembersModalWithButton"]={docgenInfo:ge.__docgenInfo,name:"AddMembersModalWithButton",path:"frontend/src/scenes/project/Settings/AddMembersModal.tsx#AddMembersModalWithButton"})}catch(n){}var Oe=t("./frontend/src/lib/components/Tooltip.tsx");function Xe(n){var a,r=Object(i.useValues)(k.a),o=r.user,s=Object(i.useValues)(f.a),g=s.currentTeam,u=Object(i.useActions)(Q.b),l=u.changeUserAccessLevel,c=g?g.effective_membership_level:null;if(!o)return null;var h=n.organization_level>=L.p.Admin,d=(a=Z.b.get(n.level))!==null&&a!==void 0?a:"unknown (".concat(n.level,")"),E=Z.d.filter(function(T){return!Object(Z.a)(c,o,n,T)}),v=n.explicit_team_level?E.concat([n.explicit_team_level]):E,O=h?"This user is a member of the project implicitly due to being an organization ".concat(d,"."):Object(Z.a)(c,o,n,E),j=O?e.a.createElement("div",{className:"border rounded px-3 py-2 flex inline-flex items-center"},n.level===L.p.Owner&&e.a.createElement(Ge,{className:"mr-2"}),d):e.a.createElement(m.LemonSelect,{dropdownMatchSelectWidth:!1,onChange:function(S){S!==null&&l(n.user,S)},options:v.map(function(T){return{value:T,disabled:T===n.explicit_team_level,label:(T>n.level,Z.b.get(T))}}),value:n.explicit_team_level});return O?e.a.createElement(Oe.a,{title:O},j):j}function qe(n){var a=Object(i.useValues)(k.a),r=a.user,o=Object(i.useValues)(f.a),s=o.currentTeam,g=Object(i.useActions)(Q.b),u=g.removeMember;if(!r)return null;function l(){Ae.a.open({title:"".concat(n.user.uuid==(r==null?void 0:r.uuid)?"Leave":"Remove ".concat(n.user.first_name," (").concat(n.user.email,") from")," project ").concat(s==null?void 0:s.name,"?"),secondaryButton:{children:"Cancel"},primaryButton:{status:"danger",children:n.user.uuid==(r==null?void 0:r.uuid)?"Leave":"Remove",onClick:function(){return u({member:n})}}})}var c=((s==null?void 0:s.effective_membership_level)&&s.effective_membership_level>=L.p.Admin||n.user.uuid===r.uuid)&&n.organization_level<Q.a;return c?e.a.createElement(m.LemonButton,{status:"danger",onClick:l,"data-attr":"delete-team-membership"},n.user.uuid!==r.uuid?e.a.createElement(Ye.a,{title:"Remove from project"}):e.a.createElement(Je.a,{title:"Leave project"})):null}function fe(n){var a=n.user,r=Object(i.useValues)(Q.b),o=r.allMembers,s=r.allMembersLoading,g=[{key:"user_profile_picture",render:function(l,c){return e.a.createElement($e.b,{name:c.user.first_name,email:c.user.email})},width:32},{title:"Name",key:"user_first_name",render:function(l,c){return c.user.uuid==a.uuid?"".concat(c.user.first_name," (me)"):c.user.first_name},sorter:function(l,c){return l.user.first_name.localeCompare(c.user.first_name)}},{title:"Email",key:"user_email",render:function(l,c){return c.user.email},sorter:function(l,c){return l.user.email.localeCompare(c.user.email)}},{title:"Level",key:"level",render:function(l,c){return Xe(c)},sorter:function(l,c){return l.level-c.level}},{title:"Joined\xA0At",dataIndex:"joined_at",key:"joined_at",render:function(l,c){return Object(R.N)(c.joined_at)},sorter:function(l,c){return l.joined_at.localeCompare(c.joined_at)}},{key:"actions",align:"center",render:function(l,c){return qe(c)}}];return e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{className:"subtitle flex justify-between items-center",id:"members-with-project-access"},"Members with Project Access",e.a.createElement(H.a,{Component:ge,minimumAccessLevel:L.p.Admin,scope:H.b.Project})),e.a.createElement(m.LemonTable,{columns:g,dataSource:o,loading:s,"data-attr":"team-members-table"}))}try{fe.displayName="TeamMembers",fe.__docgenInfo={description:"",displayName:"TeamMembers",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserType"}},team:{defaultValue:null,description:"",name:"team",required:!0,type:{name:"TeamType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/TeamMembers.tsx#TeamMembers"]={docgenInfo:fe.__docgenInfo,name:"TeamMembers",path:"frontend/src/scenes/project/Settings/TeamMembers.tsx#TeamMembers"})}catch(n){}var et=t("./frontend/src/scenes/organizationLogic.tsx"),tt=t("./frontend/src/scenes/sceneLogic.ts"),nt=t("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},rt=at,xe=function(a,r){return y.createElement(Le.a,Object(pe.a)(Object(pe.a)({},a),{},{ref:r,icon:rt}))};xe.displayName="UnlockOutlined";var ot=y.forwardRef(xe);function he(n){var a=n.isRestricted,r=Object(i.useValues)(et.a),o=r.currentOrganization,s=r.currentOrganizationLoading,g=Object(i.useValues)(f.a),u=g.currentTeam,l=g.currentTeamLoading,c=Object(i.useActions)(f.a),h=c.updateCurrentTeam,d=Object(i.useActions)(tt.a),E=d.guardAvailableFeature,v=Object(i.useValues)(k.a),O=v.hasAvailableFeature,j=O(re.d.PROJECT_BASED_PERMISSIONING)&&(u==null?void 0:u.access_control);return e.a.createElement("div",null,e.a.createElement("h2",{className:"subtitle",id:"access-control"},"Access Control"),e.a.createElement("p",null,j?e.a.createElement(e.a.Fragment,null,"This project is"," ",e.a.createElement("b",null,e.a.createElement(nt.a,{style:{color:"var(--warning)",marginRight:5}}),"private"),". Only members listed below are allowed to access it."):e.a.createElement(e.a.Fragment,null,"This project is"," ",e.a.createElement("b",null,e.a.createElement(ot,{style:{marginRight:5}}),"open"),". Any member of the organization can access it. To enable granular access control, make it private.")),e.a.createElement(m.LemonSwitch,{onChange:function(S){E(re.d.PROJECT_BASED_PERMISSIONING,"project-based permissioning","Set permissions granularly for each project. Make sure only the right people have access to protected data.",function(){return h({access_control:S})})},checked:!!j,disabled:a||!o||!u||s||l,bordered:!0,label:"Make project private"}))}try{he.displayName="AccessControl",he.__docgenInfo={description:"",displayName:"AccessControl",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/AccessControl.tsx#AccessControl"]={docgenInfo:he.__docgenInfo,name:"AccessControl",path:"frontend/src/scenes/project/Settings/AccessControl.tsx#AccessControl"})}catch(n){}var st=t("./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx");function lt(){var n=Object(i.useActions)(f.a),a=n.updateCurrentTeam,r=Object(i.useValues)(f.a),o=r.currentTeam,s=r.pathCleaningFiltersWithNew,g=function(c){a({path_cleaning_filters:c})},u=function(c){var h=((o==null?void 0:o.path_cleaning_filters)||[]).filter(function(d,E){return E!==c});g(h)};return e.a.createElement("div",null,o&&e.a.createElement(st.a,{pageKey:"pathcleanfilters",pathCleaningFilters:s,onChange:function(c){g([].concat(Te()((o==null?void 0:o.path_cleaning_filters)||[]),[c]))},onRemove:u}))}var Pt=t("./node_modules/core-js/modules/es.object.keys.js"),xt=t("./node_modules/core-js/modules/es.symbol.js"),Rt=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),It=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Dt=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),it=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),ve=t.n(it),Re=t("./frontend/src/lib/components/PersonPropertySelect/PersonPropertySelect.tsx"),ct=t("./frontend/src/lib/components/EventSelect/EventSelect.tsx"),Ie=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),ut=t("./frontend/src/lib/components/AlertMessage/index.ts");function De(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);a&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,o)}return r}function dt(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?De(Object(r),!0).forEach(function(o){ve()(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}function mt(){var n=Object(i.useActions)(f.a),a=n.updateCurrentTeam,r=Object(i.useValues)(f.a),o=r.currentTeam,s=r.funnelCorrelationConfig,g=function(l,c,h){if(o){var d=dt({},s);l!==void 0&&(d.excluded_person_property_names=l),h!==void 0&&(d.excluded_event_property_names=h),c!==void 0&&(d.excluded_event_names=c),d&&JSON.stringify(d)!==JSON.stringify(s)&&a({correlation_config:d})}};return e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{className:"subtitle",id:"internal-users-filtering"},"Correlation analysis exclusions"," ",e.a.createElement(Ie.a,{type:"warning",className:"uppercase ml-2"},"Beta")),e.a.createElement("p",null,"Globally exclude events or properties that do not provide relevant signals for your conversions."),e.a.createElement(ut.a,{type:"info"},"Correlation analysis can automatically surface relevant signals for conversion, and help you understand why your users dropped off and what makes them convert."),o&&e.a.createElement("div",{className:"mt-4 space-y-2"},e.a.createElement("div",null,e.a.createElement("h3",{className:"flex items-center gap-2"},e.a.createElement(w.IconSelectProperties,{className:"text-lg"}),"Excluded person properties"),e.a.createElement(Re.a,{onChange:function(l){return g(l)},selectedProperties:o.correlation_config.excluded_person_property_names||[],addText:"Add exclusion"})),e.a.createElement("div",null,e.a.createElement("h3",{className:"flex items-center gap-2"},e.a.createElement(w.IconSelectEvents,{className:"text-lg"}),"Excluded events"),e.a.createElement(ct.a,{onChange:function(l){return g(void 0,l)},selectedEvents:o.correlation_config.excluded_event_names||[],addElement:e.a.createElement(m.LemonButton,{size:"small",type:"secondary",icon:e.a.createElement(w.IconPlus,null)},"Add exclusion")})),e.a.createElement("div",null,e.a.createElement("h3",{className:"flex items-center gap-2"},e.a.createElement(w.IconSelectEvents,{className:"text-lg"}),"Excluded event properties"),e.a.createElement("div",{style:{maxWidth:"40rem"}},e.a.createElement(de.a,{mode:"multiple-custom",onChange:function(l){return g(void 0,void 0,l)},value:o.correlation_config.excluded_event_property_names||[]})))))}var pt=t("./frontend/src/lib/components/LemonTable/index.ts"),_e=t("./frontend/src/lib/introductions/groupsAccessLogic.ts"),_t=t("./node_modules/core-js/modules/es.array.iterator.js"),Mt=t("./node_modules/core-js/modules/web.dom-collections.iterator.js");function Me(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);a&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,o)}return r}function oe(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Me(Object(r),!0).forEach(function(o){ve()(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}var Ne=Object(i.kea)({path:["scenes","project","Settings","groupAnalyticsConfigLogic"],connect:{values:[Ce.a,["groupTypes","groupTypesLoading"]],actions:[Ce.a,["updateGroupTypesMetadata"]]},actions:{setSingular:function(a,r){return{groupTypeIndex:a,value:r}},setPlural:function(a,r){return{groupTypeIndex:a,value:r}},reset:!0,save:!0},reducers:{singularChanges:[{},{setSingular:function(a,r){var o=r.groupTypeIndex,s=r.value;return oe(oe({},a),{},ve()({},o,s))},reset:function(){return{}},updateGroupTypesMetadataSuccess:function(){return{}}}],pluralChanges:[{},{setPlural:function(a,r){var o=r.groupTypeIndex,s=r.value;return oe(oe({},a),{},ve()({},o,s))},reset:function(){return{}},updateGroupTypesMetadataSuccess:function(){return{}}}]},selectors:{hasChanges:[function(n){return[n.singularChanges,n.pluralChanges]},function(n,a){return Object.keys(n).length>0||Object.keys(a).length>0}]},listeners:function(a){var r=a.values,o=a.actions;return{save:function(){var s=M()(C.a.mark(function u(){var l,c,h,d;return C.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:l=r.groupTypes,c=r.singularChanges,h=r.pluralChanges,d=l.map(function(O){var j=oe({},O);return c[O.group_type_index]&&(j.name_singular=c[O.group_type_index]),h[O.group_type_index]&&(j.name_plural=h[O.group_type_index]),j}),o.updateGroupTypesMetadata(d);case 3:case"end":return v.stop()}},u)}));function g(){return s.apply(this,arguments)}return g}()}}}),gt=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js");function ft(){var n=Object(i.useValues)(Ne),a=n.groupTypes,r=n.groupTypesLoading,o=n.singularChanges,s=n.pluralChanges,g=n.hasChanges,u=Object(i.useActions)(Ne),l=u.setSingular,c=u.setPlural,h=u.reset,d=u.save,E=Object(i.useValues)(_e.b),v=E.groupsAccessStatus;if(v!==_e.a.AlreadyUsing)return null;var O=[{title:e.a.createElement(Oe.a,{title:"As used in code"},"Group type",e.a.createElement(gt.a,{className:"ml-2"})),dataIndex:"group_type",key:"name",render:function(T){return T}},{title:"Singular name",key:"singular",render:function(T,S){return e.a.createElement(m.LemonInput,{value:o[S.group_type_index]||S.name_singular||S.group_type,onChange:function(je){return l(S.group_type_index,je)}})}},{title:"Plural name",key:"plural",render:function(T,S){return e.a.createElement(m.LemonInput,{value:s[S.group_type_index]||S.name_plural||"".concat(S.group_type,"(s)"),onChange:function(je){return c(S.group_type_index,je)}})}}];return e.a.createElement("div",{id:"group-analytics"},e.a.createElement("h2",{className:"subtitle"},"Group Analytics"),e.a.createElement("p",null,"This project has access to group analytics. Below you can configure how various group types are displayed throughout the app."),e.a.createElement(pt.a,{columns:O,dataSource:a,loading:r}),e.a.createElement("div",{className:"flex gap-2 mt-4"},e.a.createElement(m.LemonButton,{type:"primary",disabled:!g,onClick:d},"Save"),e.a.createElement(m.LemonButton,{disabled:!g,onClick:h},"Cancel")),e.a.createElement(m.LemonDivider,{className:"my-6"}))}function ht(){var n=Object(i.useValues)(f.a),a=n.currentTeam,r=Object(i.useActions)(f.a),o=r.updateCurrentTeam,s=Object(y.useState)([]),g=A()(s,2),u=g[0],l=g[1];return Object(y.useEffect)(function(){return l((a==null?void 0:a.person_display_name_properties)||L.q)},[a]),a?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Choose which properties of an identified Person will be used for their ",e.a.createElement("b",null,"Display Name"),". The first property to be found on the Person will be used. Drag the items to re-order the priority."),e.a.createElement("div",{className:"space-y-4"},e.a.createElement(Re.a,{onChange:function(h){return l(h)},selectedProperties:u||[],addText:"Add",sortable:!0}),e.a.createElement(m.LemonButton,{type:"primary",onClick:function(){return o({person_display_name_properties:u.map(function(h){return h.trim()}).filter(function(h){return h})||[]})}},"Save"))):e.a.createElement(me.a,{className:"w-1/2"})}var vt=t("./frontend/src/scenes/project/Settings/SlackIntegration.tsx"),Et={component:Be};function yt(){var n=Object(i.useValues)(f.a),a=n.currentTeam,r=n.currentTeamLoading,o=Object(i.useActions)(f.a),s=o.updateCurrentTeam,g=Object(y.useState)((a==null?void 0:a.name)||""),u=A()(g,2),l=u[0],c=u[1];return a!=null&&a.is_demo?e.a.createElement("p",null,e.a.createElement("i",null,"The demo project cannot be renamed.")):e.a.createElement("div",{className:"space-y-4",style:{maxWidth:"40rem"}},e.a.createElement(m.LemonInput,{value:l,onChange:c,disabled:r}),e.a.createElement(m.LemonButton,{type:"primary",onClick:function(){return s({name:l})},disabled:!l||!a||l===a.name,loading:r},"Rename Project"))}function Be(){var n,a,r,o=Object(i.useValues)(f.a),s=o.currentTeam,g=o.currentTeamLoading,u=o.isTeamTokenResetAvailable,l=Object(i.useActions)(f.a),c=l.resetToken,h=Object(i.useValues)(ye.router),d=h.location,E=Object(i.useValues)(k.a),v=E.user,O=E.hasAvailableFeature,j=v==null||(n=v.organization)===null||n===void 0||(a=n.available_features)===null||a===void 0?void 0:a.includes(re.d.PATHS_ADVANCED);Object(Ee.a)(d.hash);var T=e.a.createElement("div",{className:"space-y-4"},e.a.createElement(me.a,{className:"w-1/2"}),e.a.createElement(me.a,{repeat:3}));return e.a.createElement("div",null,e.a.createElement(be.a,{title:"Project settings",caption:"Organize your analytics within the project. These settings only apply to ".concat((r=s==null?void 0:s.name)!==null&&r!==void 0?r:"the current project",".")}),e.a.createElement("div",{className:"border rounded p-6"},e.a.createElement("h2",{id:"name",className:"subtitle mt-0"},"Display name"),g&&!s?T:e.a.createElement(yt,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{id:"snippet",className:"subtitle"},"Website event autocapture"),"To integrate PostHog into your website and get event autocapture with no additional work, include the following snippet in your\xA0website's\xA0HTML. Ideally, put it just above the\xA0",e.a.createElement("code",null,"</head>"),"\xA0tag.",e.a.createElement("br",null),"For more guidance, including on identifying users,"," ",e.a.createElement("a",{href:"https://posthog.com/docs/integrations/js-integration"},"see PostHog Docs"),".",g&&!s?T:e.a.createElement(D.a,null),e.a.createElement("p",null,"You can even test PostHog out on a live site without changing any code.",e.a.createElement("br",null),"Just drag the bookmarklet below to your bookmarks bar, open the website you want to test PostHog on and click it.",e.a.createElement("br",null),"This will enable our tracking, on the currently loaded page only. The data will show up in this project.",e.a.createElement("br",null)),e.a.createElement("div",null,s&&e.a.createElement(K.a,{team:s})),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{id:"custom-events",className:"subtitle"},"Send custom events"),"To send custom events ",e.a.createElement("a",{href:"https://posthog.com/docs/integrations"},"visit PostHog Docs")," and integrate the library for the specific language or platform you're using. We support Python, Ruby, Node, Go, PHP, iOS, Android, and more.",e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{id:"project-variables",className:"subtitle mb-4"},"Project Variables"),e.a.createElement("h3",{id:"project-api-key",className:"l3"},"Project API Key"),e.a.createElement("p",null,"You can use this write-only key in any one of"," ",e.a.createElement("a",{href:"https://posthog.com/docs/integrations"},"our libraries"),"."),e.a.createElement($.a,{actions:u?[{icon:e.a.createElement(w.IconRefresh,null),title:"Reset project API key",popconfirmProps:{title:e.a.createElement(e.a.Fragment,null,"Reset the project's API key?"," ",e.a.createElement("b",null,"This will invalidate the current API key and cannot be undone.")),okText:"Reset key",okType:"danger",placement:"left"},callback:c}]:[],copyDescription:"project API key"},(s==null?void 0:s.api_token)||""),e.a.createElement("p",null,"Write-only means it can only create new events. It can't read events or any of your other data stored with PostHog, so it's safe to use in public apps."),e.a.createElement("h3",{id:"project-id",className:"l3 mt-4"},"Project ID"),e.a.createElement("p",null,"You can use this ID to reference your project in our ",e.a.createElement("a",{href:"https://posthog.com/docs/api"},"API"),"."),e.a.createElement($.a,{copyDescription:"project ID"},String((s==null?void 0:s.id)||"")),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{className:"subtitle",id:"timezone"},"Timezone"),e.a.createElement("p",null,"Set the timezone for your project. All charts will be based on this timezone, including how PostHog buckets data in day/week/month intervals."),e.a.createElement("div",{style:{maxWidth:"40rem"}},e.a.createElement(We,null)),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{className:"subtitle",id:"internal-users-filtering"},"Filter out internal and test users"," ",e.a.createElement(Oe.a,{title:'Events will still be ingested and saved, but they will be excluded from any queries where the "Filter out internal and test users" toggle is set.'},e.a.createElement(w.IconInfo,{style:{fontSize:"1em",color:"var(--muted-alt)",marginTop:4,marginLeft:5}}))),e.a.createElement("p",null,"Increase the quality of your analytics results by filtering out events from internal sources, such as team members, test accounts, or development environments."," ",e.a.createElement("strong",null,"The filters you apply here are added as extra filters when the toggle is switched on.")," ","So, if you apply a cohort, it means you will only match users in that cohort."),e.a.createElement("strong",null,"Example filters"),e.a.createElement("ul",{className:"list-disc pl-4 mb-2"},e.a.createElement("li",null,'"',e.a.createElement("strong",null,"Email")," does not contain ",e.a.createElement("strong",null,"yourcompany.com"),`" to exclude all events from your company's team members.`),e.a.createElement("li",null,'"',e.a.createElement("strong",null,"Host")," does not contain ",e.a.createElement("strong",null,"localhost"),'" to exclude all events from local development environments.')),e.a.createElement(Ve,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement(mt,null),j&&e.a.createElement(e.a.Fragment,null,e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{className:"subtitle",id:"path_cleaning_filtering"},"Path cleaning rules",e.a.createElement(Ie.a,{type:"warning",className:"uppercase",style:{marginLeft:8}},"Beta")),e.a.createElement("p",null,"Make your ",e.a.createElement(ce.a,{to:x.a.insightNew({insight:re.D.PATHS})},"Paths")," clearer by aliasing one or multiple URLs."," ",e.a.createElement("i",null,"Example: ",e.a.createElement("code",null,"htttp://client1.mydomain.com/accounts")," and"," ",e.a.createElement("code",null,"htttp://tenant2.mydomain.com/accounts")," can become a single"," ",e.a.createElement("code",null,"accounts")," path.")),e.a.createElement("p",null,"Each rule is composed of an alias and a regex pattern. Any pattern in a URL or event name that matches the regex will be replaced with the alias. Rules are applied in the order that they're listed."),e.a.createElement("p",null,e.a.createElement("b",null,"Rules that you set here will be applied before wildcarding and other regex replacement if the toggle is switched on.")),e.a.createElement(lt,null)),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("div",{id:"permitted-domains"})," ",e.a.createElement("div",{id:"authorized-urls"}),e.a.createElement("h2",{className:"subtitle",id:"urls"},"Authorized URLs"),e.a.createElement("p",null,"These are the URLs where the"," ",e.a.createElement("b",null,e.a.createElement(ce.a,{to:x.a.toolbarLaunch()},"Toolbar")," will automatically launch")," ","(if you're logged in) and where we'll ",e.a.createElement("b",null,"record sessions")," (if ",e.a.createElement("a",{href:"#recordings"},"enabled"),")."),e.a.createElement("p",null,e.a.createElement("b",null,"Domains and wilcard subdomains are allowed")," (example: ",e.a.createElement("code",null,"https://*.example.com"),"). However, wildcarded top-level domains cannot be used (for security reasons)."),e.a.createElement(_.a,{type:G.a.TOOLBAR_URLS}),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{className:"subtitle",id:"attributes"},"Data attributes"),e.a.createElement(ke,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{className:"subtitle",id:"person-display-name"},"Person Display Name"),e.a.createElement(ht,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{className:"subtitle",id:"webhook"},"Webhook integration"),e.a.createElement(ie,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{className:"subtitle",id:"slack"},"Slack integration"),e.a.createElement(vt.a,null),e.a.createElement(m.LemonDivider,{className:"my-6"})),e.a.createElement("h2",{className:"subtitle",id:"datacapture"},"Data capture configuration"),e.a.createElement(F,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement("h2",{className:"subtitle"},"PostHog Toolbar"),e.a.createElement("p",null,"Enable PostHog Toolbar, which gives access to heatmaps, stats and allows you to create actions, right there on your website!"),e.a.createElement(ne,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement(z,null),e.a.createElement(m.LemonDivider,{className:"my-6"}),e.a.createElement(ft,null),e.a.createElement(H.a,{Component:he,minimumAccessLevel:L.p.Admin}),e.a.createElement(m.LemonDivider,{className:"my-6"}),(s==null?void 0:s.access_control)&&O(re.d.PROJECT_BASED_PERMISSIONING)&&e.a.createElement(i.BindLogic,{logic:Q.b,props:{team:s}},v&&e.a.createElement(fe,{user:v,team:s}),e.a.createElement(m.LemonDivider,{className:"my-6"})),e.a.createElement(H.a,{Component:te,minimumAccessLevel:L.p.Admin,scope:H.b.Project})))}}}]);
