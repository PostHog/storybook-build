"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[67036],{"../../frontend/src/scenes/experiments/stories/ExperimentWithLegacyTrendsQuery.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExperimentWithLegacyTrendsQuery:()=>ExperimentWithLegacyTrendsQuery,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ExperimentWithLegacyTrendsQuery_stories});var lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),App=__webpack_require__("../../frontend/src/scenes/App.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),browser=__webpack_require__("../../frontend/src/mocks/browser.tsx"),experiment_with_trends_query=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/experiment_with_trends_query.json"),exposure_query_result=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json");let trends_query_result_namespaceObject=JSON.parse('{"cache_key":"cache_207e9fcf39db7c83a4c604f674f011aa","cache_target_age":"2025-06-04T14:01:24.201213Z","calculation_trigger":null,"count_query":{"aggregation_group_type_index":null,"breakdownFilter":{"breakdown":"$feature/experiment-trends-query","breakdown_group_type_index":null,"breakdown_hide_other_aggregation":null,"breakdown_histogram_bin_count":null,"breakdown_limit":null,"breakdown_normalize_url":null,"breakdown_type":"event","breakdowns":null},"compareFilter":null,"conversionGoal":null,"dataColorTheme":null,"dateRange":{"date_from":"2025-05-20T14:01:00+00:00","date_to":null,"explicitDate":true},"filterTestAccounts":true,"interval":"day","kind":"TrendsQuery","modifiers":null,"properties":[{"key":"$feature/experiment-trends-query","label":null,"operator":"exact","type":"event","value":["control","test-1","test-2"]}],"response":null,"samplingFactor":null,"series":[{"custom_name":null,"event":"$pageview","fixedProperties":null,"kind":"EventsNode","limit":null,"math":null,"math_group_type_index":null,"math_hogql":null,"math_property":null,"math_property_revenue_currency":null,"math_property_type":null,"name":"$pageview","orderBy":null,"properties":null,"response":null}],"trendsFilter":{"aggregationAxisFormat":"numeric","aggregationAxisPostfix":null,"aggregationAxisPrefix":null,"breakdown_histogram_bin_count":null,"decimalPlaces":null,"display":"ActionsLineGraphCumulative","formula":null,"formulaNodes":null,"formulas":null,"goalLines":null,"hiddenLegendIndexes":null,"minDecimalPlaces":null,"resultCustomizationBy":"value","resultCustomizations":null,"showAlertThresholdLines":false,"showLabelsOnSeries":null,"showLegend":false,"showMultipleYAxes":false,"showPercentStackView":false,"showValuesOnSeries":false,"smoothingIntervals":1,"yAxisScaleType":"linear"}},"credible_intervals":{"control":[1.1067233758884238,1.3907190022877942],"test-2":[1.640404242512753,1.953524709273948],"test-1":[1.699699479925885,2.050918516814496]},"exposure_query":{"aggregation_group_type_index":null,"breakdownFilter":{"breakdown":"$feature_flag_response","breakdown_group_type_index":null,"breakdown_hide_other_aggregation":null,"breakdown_histogram_bin_count":null,"breakdown_limit":null,"breakdown_normalize_url":null,"breakdown_type":"event","breakdowns":null},"compareFilter":null,"conversionGoal":null,"dataColorTheme":null,"dateRange":{"date_from":"2025-05-20T14:01:00+00:00","date_to":null,"explicitDate":true},"filterTestAccounts":true,"interval":"day","kind":"TrendsQuery","modifiers":null,"properties":[{"key":"$feature_flag_response","label":null,"operator":"exact","type":"event","value":["control","test-1","test-2"]},{"key":"$feature_flag","label":null,"operator":"exact","type":"event","value":["experiment-trends-query"]}],"response":null,"samplingFactor":null,"series":[{"custom_name":null,"event":"$feature_flag_called","fixedProperties":null,"kind":"EventsNode","limit":null,"math":"dau","math_group_type_index":null,"math_hogql":null,"math_property":null,"math_property_revenue_currency":null,"math_property_type":null,"name":null,"orderBy":null,"properties":null,"response":null}],"trendsFilter":{"aggregationAxisFormat":"numeric","aggregationAxisPostfix":null,"aggregationAxisPrefix":null,"breakdown_histogram_bin_count":null,"decimalPlaces":null,"display":"ActionsLineGraphCumulative","formula":null,"formulaNodes":null,"formulas":null,"goalLines":null,"hiddenLegendIndexes":null,"minDecimalPlaces":null,"resultCustomizationBy":"value","resultCustomizations":null,"showAlertThresholdLines":false,"showLabelsOnSeries":null,"showLegend":false,"showMultipleYAxes":false,"showPercentStackView":false,"showValuesOnSeries":false,"smoothingIntervals":1,"yAxisScaleType":"linear"}},"insight":[{"data":[0,0,0,0,0,0,0,36,132,226,277,346,415,482,503],"labels":["20-May-2025","21-May-2025","22-May-2025","23-May-2025","24-May-2025","25-May-2025","26-May-2025","27-May-2025","28-May-2025","29-May-2025","30-May-2025","31-May-2025","1-Jun-2025","2-Jun-2025","3-Jun-2025"],"days":["2025-05-20","2025-05-21","2025-05-22","2025-05-23","2025-05-24","2025-05-25","2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"count":503,"label":"test-2","filter":{"insight":"TRENDS","properties":[{"key":"$feature/experiment-trends-query","label":null,"operator":"exact","type":"event","value":["control","test-1","test-2"]}],"filter_test_accounts":true,"date_to":"2025-06-03T14:01:24.769086Z","date_from":"2025-05-20T14:01:00Z","entity_type":"events","interval":"day","aggregationAxisFormat":"numeric","display":"ActionsLineGraphCumulative","resultCustomizationBy":"value","showAlertThresholdLines":false,"showLegend":false,"showMultipleYAxes":false,"showPercentStackView":false,"showValuesOnSeries":false,"smoothingIntervals":1,"yAxisScaleType":"linear","breakdown":"$feature/experiment-trends-query","breakdown_type":"event"},"action":{"days":["2025-05-20T00:00:00Z","2025-05-21T00:00:00Z","2025-05-22T00:00:00Z","2025-05-23T00:00:00Z","2025-05-24T00:00:00Z","2025-05-25T00:00:00Z","2025-05-26T00:00:00Z","2025-05-27T00:00:00Z","2025-05-28T00:00:00Z","2025-05-29T00:00:00Z","2025-05-30T00:00:00Z","2025-05-31T00:00:00Z","2025-06-01T00:00:00Z","2025-06-02T00:00:00Z","2025-06-03T00:00:00Z"],"id":"$pageview","type":"events","order":0,"name":"$pageview","custom_name":null,"math":null,"math_property":null,"math_hogql":null,"math_group_type_index":null,"properties":{}},"breakdown_value":"test-2"},{"data":[0,0,0,0,0,0,0,23,80,119,211,270,340,399,435],"labels":["20-May-2025","21-May-2025","22-May-2025","23-May-2025","24-May-2025","25-May-2025","26-May-2025","27-May-2025","28-May-2025","29-May-2025","30-May-2025","31-May-2025","1-Jun-2025","2-Jun-2025","3-Jun-2025"],"days":["2025-05-20","2025-05-21","2025-05-22","2025-05-23","2025-05-24","2025-05-25","2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"count":435,"label":"test-1","filter":{"insight":"TRENDS","properties":[{"key":"$feature/experiment-trends-query","label":null,"operator":"exact","type":"event","value":["control","test-1","test-2"]}],"filter_test_accounts":true,"date_to":"2025-06-03T14:01:24.769086Z","date_from":"2025-05-20T14:01:00Z","entity_type":"events","interval":"day","aggregationAxisFormat":"numeric","display":"ActionsLineGraphCumulative","resultCustomizationBy":"value","showAlertThresholdLines":false,"showLegend":false,"showMultipleYAxes":false,"showPercentStackView":false,"showValuesOnSeries":false,"smoothingIntervals":1,"yAxisScaleType":"linear","breakdown":"$feature/experiment-trends-query","breakdown_type":"event"},"action":{"days":["2025-05-20T00:00:00Z","2025-05-21T00:00:00Z","2025-05-22T00:00:00Z","2025-05-23T00:00:00Z","2025-05-24T00:00:00Z","2025-05-25T00:00:00Z","2025-05-26T00:00:00Z","2025-05-27T00:00:00Z","2025-05-28T00:00:00Z","2025-05-29T00:00:00Z","2025-05-30T00:00:00Z","2025-05-31T00:00:00Z","2025-06-01T00:00:00Z","2025-06-02T00:00:00Z","2025-06-03T00:00:00Z"],"id":"$pageview","type":"events","order":0,"name":"$pageview","custom_name":null,"math":null,"math_property":null,"math_hogql":null,"math_group_type_index":null,"properties":{}},"breakdown_value":"test-1"},{"data":[0,0,0,0,0,0,0,21,62,101,142,177,210,270,294],"labels":["20-May-2025","21-May-2025","22-May-2025","23-May-2025","24-May-2025","25-May-2025","26-May-2025","27-May-2025","28-May-2025","29-May-2025","30-May-2025","31-May-2025","1-Jun-2025","2-Jun-2025","3-Jun-2025"],"days":["2025-05-20","2025-05-21","2025-05-22","2025-05-23","2025-05-24","2025-05-25","2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"count":294,"label":"control","filter":{"insight":"TRENDS","properties":[{"key":"$feature/experiment-trends-query","label":null,"operator":"exact","type":"event","value":["control","test-1","test-2"]}],"filter_test_accounts":true,"date_to":"2025-06-03T14:01:24.769086Z","date_from":"2025-05-20T14:01:00Z","entity_type":"events","interval":"day","aggregationAxisFormat":"numeric","display":"ActionsLineGraphCumulative","resultCustomizationBy":"value","showAlertThresholdLines":false,"showLegend":false,"showMultipleYAxes":false,"showPercentStackView":false,"showValuesOnSeries":false,"smoothingIntervals":1,"yAxisScaleType":"linear","breakdown":"$feature/experiment-trends-query","breakdown_type":"event"},"action":{"days":["2025-05-20T00:00:00Z","2025-05-21T00:00:00Z","2025-05-22T00:00:00Z","2025-05-23T00:00:00Z","2025-05-24T00:00:00Z","2025-05-25T00:00:00Z","2025-05-26T00:00:00Z","2025-05-27T00:00:00Z","2025-05-28T00:00:00Z","2025-05-29T00:00:00Z","2025-05-30T00:00:00Z","2025-05-31T00:00:00Z","2025-06-01T00:00:00Z","2025-06-02T00:00:00Z","2025-06-03T00:00:00Z"],"id":"$pageview","type":"events","order":0,"name":"$pageview","custom_name":null,"math":null,"math_property":null,"math_hogql":null,"math_group_type_index":null,"properties":{}},"breakdown_value":"control"}],"is_cached":true,"kind":"ExperimentTrendsQuery","last_refresh":"2025-06-03T14:01:24.201213Z","next_allowed_client_refresh":"2025-06-03T14:02:24.201213Z","p_value":0.01892128132882989,"probability":{"control":0,"test-2":1,"test-1":1},"query_status":null,"significance_code":"high_loss","significant":false,"stats_version":2,"timezone":"UTC","variants":[{"absolute_exposure":236,"count":294,"exposure":1,"key":"control"},{"absolute_exposure":280,"count":503,"exposure":1.1864406779661016,"key":"test-2"},{"absolute_exposure":232,"count":435,"exposure":0.9830508474576272,"key":"test-1"}]}');var schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ExperimentWithLegacyTrendsQuery_stories={title:"Scenes-App/Experiments",parameters:{layout:"fullscreen",viewMode:"story",mockDate:"2025-01-27"},decorators:[(0,browser.x8)({get:{"/api/projects/:team_id/experiments/12/":experiment_with_trends_query,"/api/projects/:team_id/experiment_holdouts":[],"/api/projects/:team_id/experiment_saved_metrics/":[],"/api/projects/:team_id/feature_flags/137/":{},"/api/projects/:team_id/feature_flags/137/status/":{}},post:{"/api/environments/:team_id/query":(req,res,ctx)=>res(req.body.query.kind===schema_general.OH.ExperimentExposureQuery?ctx.json(exposure_query_result):ctx.json(trends_query_result_namespaceObject))}})]},ExperimentWithLegacyTrendsQuery=()=>((0,react.useEffect)(()=>{lib.router.actions.push(urls.j.experiment(experiment_with_trends_query.id))},[]),(0,jsx_runtime.jsx)(App.g,{}));ExperimentWithLegacyTrendsQuery.play=async()=>{await new Promise(resolve=>setTimeout(resolve,500))},ExperimentWithLegacyTrendsQuery.parameters={...ExperimentWithLegacyTrendsQuery.parameters,docs:{...ExperimentWithLegacyTrendsQuery.parameters?.docs,source:{originalSource:"() => {\n  useEffect(() => {\n    router.actions.push(urls.experiment(EXPERIMENT_WITH_TRENDS_QUERY.id));\n  }, []);\n  return <App />;\n}",...ExperimentWithLegacyTrendsQuery.parameters?.docs?.source}}};let __namedExportsOrder=["ExperimentWithLegacyTrendsQuery"]},"../../frontend/src/mocks/fixtures/api/experiments/experiment_with_trends_query.json":module=>{module.exports=JSON.parse('{"id":12,"name":"experiment-trends-query","description":null,"start_date":"2025-05-20T14:01:00Z","end_date":null,"feature_flag_key":"experiment-trends-query","feature_flag":{"id":137,"team_id":1,"name":"Feature Flag for Experiment experiment-trends-query","key":"experiment-trends-query","filters":{"groups":[{"properties":[],"rollout_percentage":100}],"multivariate":{"variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}]},"holdout_groups":null,"aggregation_group_type_index":null},"deleted":false,"active":true,"ensure_experience_continuity":false,"has_encrypted_payloads":false,"version":1},"holdout":null,"holdout_id":null,"exposure_cohort":null,"parameters":{"feature_flag_variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}],"recommended_sample_size":0,"recommended_running_time":0,"minimum_detectable_effect":30},"secondary_metrics":[],"saved_metrics":[],"saved_metrics_ids":null,"filters":{},"archived":false,"deleted":false,"created_by":{"id":1,"uuid":"0196a5e4-1c5d-0000-8b8c-31ae10f6d7d7","distinct_id":"TM2Vy3T9MqY0HHAxgKBj95zZEaZ45MYSpuSxu6MaVNj","first_name":"Juraj","last_name":"","email":"juraj@posthog.com","is_email_verified":false,"hedgehog_config":null,"role_at_organization":"engineering"},"created_at":"2025-06-03T13:58:20.364634Z","updated_at":"2025-06-03T14:01:24.109804Z","type":"product","exposure_criteria":{"filterTestAccounts":true},"metrics":[{"kind":"ExperimentTrendsQuery","count_query":{"kind":"TrendsQuery","series":[{"kind":"EventsNode","name":"$pageview","event":"$pageview"}],"interval":"day","dateRange":{"date_from":"2025-05-20T14:01:00Z","date_to":"","explicitDate":true},"trendsFilter":{"display":"ActionsLineGraph"},"filterTestAccounts":true}}],"metrics_secondary":[],"stats_config":{"version":2},"conclusion":null,"conclusion_comment":null}')},"../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json":module=>{module.exports=JSON.parse('{"cache_key":"cache_bba689ce3132fef5d97b652c6a96e871","cache_target_age":"2025-03-07T18:04:07.837340Z","date_range":{"date_from":"2025-02-23T18:03:00+00:00","date_to":null,"explicitDate":true},"is_cached":true,"kind":"ExperimentExposureQuery","last_refresh":"2025-03-06T18:04:07.837340Z","next_allowed_client_refresh":"2025-03-06T18:05:07.837340Z","timeseries":[{"days":["2025-02-23","2025-02-24","2025-02-25","2025-02-26","2025-02-27","2025-02-28","2025-03-01","2025-03-02","2025-03-03","2025-03-04","2025-03-05","2025-03-06"],"exposure_counts":[0,0,0,0,38,179,317,473,631,756,889,975],"variant":"test"},{"days":["2025-02-23","2025-02-24","2025-02-25","2025-02-26","2025-02-27","2025-02-28","2025-03-01","2025-03-02","2025-03-03","2025-03-04","2025-03-05","2025-03-06"],"exposure_counts":[0,0,0,0,45,182,347,487,625,780,922,1025],"variant":"control"}],"timezone":"UTC","total_exposures":{"test":975,"control":1025}}')}}]);