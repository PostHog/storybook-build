(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[72808],{"./frontend/src/scenes/error-tracking/ErrorTrackingIssueScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingIssueScene:()=>ErrorTrackingIssueScene,scene:()=>scene});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),ErrorTracking=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss"),ErrorTracking_default=__webpack_require__.n(ErrorTracking),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(ErrorTracking_default(),options),ErrorTracking_default().locals;var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),AlphaAccessScenePrompt=__webpack_require__("./frontend/src/scenes/error-tracking/AlphaAccessScenePrompt.tsx"),AssigneeSelect=__webpack_require__("./frontend/src/scenes/error-tracking/AssigneeSelect.tsx"),errorTrackingIssueSceneLogic=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingIssueSceneLogic.ts"),ErrorTrackingFilters=__webpack_require__("./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let EventsTab=()=>{let{eventsQuery}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.H);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ErrorTrackingFilters.ZP.FilterGroup,{}),(0,jsx_runtime.jsx)(src.p2,{className:"my-2"}),(0,jsx_runtime.jsx)(Query.A,{query:eventsQuery,context:{columns:{"recording_button(properties.$session_id)":{title:"Recording",width:"132px"}},showOpenEditorButton:!1,insightProps:{dashboardItemId:"new-ErrorTrackingEventsQuery"}}})]})};var stackFrameLogic=__webpack_require__("./frontend/src/lib/components/Errors/stackFrameLogic.ts"),StackTraces=__webpack_require__("./frontend/src/lib/components/Errors/StackTraces.tsx"),posthog_icons_es=__webpack_require__("./node_modules/.pnpm/@posthog+icons@0.10.0_react-dom@18.2.0_react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),LemonMenu=__webpack_require__("./frontend/src/lib/lemon-ui/LemonMenu/LemonMenu.tsx");function PanelLayout(_ref){let{className,...props}=_ref;return(0,jsx_runtime.jsx)(Container,{className:(0,clsx_m.default)(className,"PanelLayout"),...props,primary:!1})}function Container(_ref2){let{children,primary,className,column}=_ref2;return(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("flex",primary&&"flex-1",column?"flex-col gap-y-4":"gap-x-2",primary?"PanelLayout__container--primary":"PanelLayout__container--secondary",className),children:children})}function SettingsToggle(_ref5){let{tooltip,icon,label,active,...props}=_ref5,button=(0,jsx_runtime.jsx)(src.Jp,{className:"rounded-[0px]",icon:icon,size:"xsmall",status:active?"danger":"default",...props,children:label});return props.disabledReason?button:(0,jsx_runtime.jsx)(src.u,{title:tooltip,children:button})}function SettingsButton(props){return(0,jsx_runtime.jsx)(SettingsToggle,{active:!1,...props})}PanelLayout.Panel=function(_ref3){let{children,primary,className,title,header}=_ref3,[open,setOpen]=(0,react.useState)(!0);return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)(primary&&"flex-1","border bg-bg-light rounded-sm",className),children:[(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("flex flex-row w-full overflow-hidden bg-accent-3000 items-center justify-between",open&&"border-b"),children:[(0,jsx_runtime.jsx)("span",{className:"pl-1 font-medium",children:title}),(0,jsx_runtime.jsxs)("div",{className:"flex font-light text-xs",children:[header,(0,jsx_runtime.jsx)(SettingsButton,{onClick:()=>setOpen(!open),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconMinus,{})})]})]}),open?children:null]})},PanelLayout.Container=Container,PanelLayout.SettingsMenu=function(_ref4){let{label,items,icon,isAvailable=!0,closeOnClickInside=!0,highlightWhenActive=!0,whenUnavailable,...props}=_ref4,active=items.some(cf=>!!cf.active);return(0,jsx_runtime.jsx)(LemonMenu.d6,{buttonSize:"xsmall",closeOnClickInside:closeOnClickInside,items:isAvailable?items:whenUnavailable?[whenUnavailable]:[],...props,children:(0,jsx_runtime.jsx)(src.Jp,{className:"rounded-[0px]",status:highlightWhenActive&&active?"danger":"default",size:"xsmall",icon:icon,children:label})})},PanelLayout.SettingsToggle=SettingsToggle,PanelLayout.SettingsButton=SettingsButton;let PanelLayout_PanelLayout=PanelLayout;var utils=__webpack_require__("./frontend/src/scenes/error-tracking/utils.ts"),SessionRecordingPlayer=__webpack_require__("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),apps_common_src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),lib_utils=__webpack_require__("./frontend/src/lib/utils.tsx");let MetaPanel=()=>{let{issue}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.H);return(0,jsx_runtime.jsxs)("div",{className:"space-y-4 p-2",children:[issue?(0,jsx_runtime.jsx)("div",{className:"italic line-clamp-3",children:issue.description}):(0,jsx_runtime.jsx)(src.yW,{}),(0,jsx_runtime.jsxs)("div",{className:"flex space-x-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"First seen"}),issue?(0,jsx_runtime.jsx)(apps_common_src.w4,{time:issue.first_seen,className:"border-dotted border-b"}):(0,jsx_runtime.jsx)(src.yW,{})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"Last seen"}),issue?(0,jsx_runtime.jsx)(apps_common_src.w4,{time:issue.last_seen,className:"border-dotted border-b"}):(0,jsx_runtime.jsx)(src.yW,{})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex space-x-2 justify-between mr-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"Occurrences"}),(0,jsx_runtime.jsx)("div",{className:"text-2xl font-semibold",children:issue?.occurrences?(0,lib_utils.d$)(issue.occurrences):null})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"Sessions"}),(0,jsx_runtime.jsx)("div",{className:"text-2xl font-semibold",children:issue?.sessions?(0,lib_utils.d$)(issue.sessions):null})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"Users"}),(0,jsx_runtime.jsx)("div",{className:"text-2xl font-semibold",children:issue?.users?(0,lib_utils.d$)(issue.users):null})]})]})]})},OverviewPanel=()=>{let{issueProperties,issueLoading}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.H),{synthetic,level,browser,os,library,unhandled}=(0,utils.OZ)(issueProperties),TableRow=_ref=>{let{label,value}=_ref;return(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-muted",children:label}),(0,jsx_runtime.jsx)("td",{children:null!=value?value:(0,jsx_runtime.jsx)("div",{className:"italic",children:"unknown"})})]})};return issueLoading?(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(src.yW,{}),(0,jsx_runtime.jsx)(src.yW.Row,{repeat:2})]}):(0,jsx_runtime.jsx)("div",{className:"px-1",children:(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsx)("table",{children:[{label:"Level",value:level},{label:"Synthetic",value:synthetic},{label:"Library",value:library},{label:"Unhandled",value:unhandled}].map((row,index)=>(0,jsx_runtime.jsx)(TableRow,{...row},index))}),(0,jsx_runtime.jsx)("table",{children:[{label:"Browser",value:browser},{label:"OS",value:os},{label:"URL",value:issueProperties.$current_url}].map((row,index)=>(0,jsx_runtime.jsx)(TableRow,{...row},index))})]})})},OverviewTab=()=>{let{showAllFrames}=(0,index_esm.useValues)(stackFrameLogic.e),{issueProperties}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.H),{setShowAllFrames}=(0,index_esm.useActions)(stackFrameLogic.e),{exceptionList}=(0,utils.OZ)(issueProperties),exceptionWithStack=(0,utils.mX)(exceptionList),hasAnyInApp=(0,utils.EQ)(exceptionList),hasRecording=issueProperties.$session_id&&"active"===issueProperties.$recording_status;return(0,jsx_runtime.jsxs)(PanelLayout_PanelLayout,{className:"ErrorTrackingPanelLayout",children:[(0,jsx_runtime.jsxs)(PanelLayout_PanelLayout.Container,{primary:!0,column:!0,children:[(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.Panel,{primary:!1,title:"Overview",children:(0,jsx_runtime.jsx)(OverviewPanel,{})}),exceptionWithStack&&(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.Panel,{primary:!1,className:"space-y-2",title:"Stacktrace",header:hasAnyInApp?(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.SettingsToggle,{active:showAllFrames,label:"Full trace",onClick:()=>setShowAllFrames(!showAllFrames)}):null,children:(0,jsx_runtime.jsx)("div",{className:"space-y-6",children:(0,jsx_runtime.jsx)(StackTraces.v,{embedded:!0,showAllFrames:!hasAnyInApp||showAllFrames,exceptionList:exceptionList})})}),hasRecording&&(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.Panel,{primary:!1,title:"Recording",children:(0,jsx_runtime.jsx)(SessionRecordingPlayer.d,{playerKey:"issue",sessionRecordingId:issueProperties.$session_id,noMeta:!0,noBorder:!0,autoPlay:!0,noInspector:!0,matchingEventsMatchType:{matchType:"name",eventNames:["$exception"]}})})]}),(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.Container,{column:!0,primary:!1,className:"h-full",children:(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.Panel,{primary:!1,title:"Meta",children:(0,jsx_runtime.jsx)(MetaPanel,{})})})]})},scene={component:ErrorTrackingIssueScene,logic:errorTrackingIssueSceneLogic.H,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id}}},STATUS_LABEL={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release"};function ErrorTrackingIssueScene(){let{issue,issueLoading,tab}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.H),{updateIssue,loadIssue,setTab}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.H);return(0,react.useEffect)(()=>{issueLoading||loadIssue()},[]),(0,jsx_runtime.jsx)(AlphaAccessScenePrompt._,{children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:!!issue&&("active"===issue.status?(0,jsx_runtime.jsxs)("div",{className:"flex divide-x gap-x-2",children:[(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:issue.assignee,onChange:assignee=>updateIssue({assignee}),type:"secondary",showName:!0}),(0,jsx_runtime.jsxs)("div",{className:"flex pl-2 gap-x-2",children:[(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",onClick:()=>updateIssue({status:"archived"}),children:"Archive"}),(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:()=>updateIssue({status:"resolved"}),children:"Resolve"})]})]}):(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",className:"upcasefirst-letter:uppercase",onClick:()=>updateIssue({status:"active"}),tooltip:"Mark as active",children:STATUS_LABEL[issue.status]}))}),issue?(0,jsx_runtime.jsx)(src.TP,{activeKey:tab,tabs:[{key:errorTrackingIssueSceneLogic.r.Overview,label:"Overview",content:(0,jsx_runtime.jsx)(OverviewTab,{})},{key:errorTrackingIssueSceneLogic.r.Events,label:"Events",content:(0,jsx_runtime.jsx)(EventsTab,{})}],onChange:setTab}):(0,jsx_runtime.jsx)(src.$j,{})]})})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ErrorTracking__issue{height:calc(100vh - 12rem);min-height:25rem}.PanelLayout.ErrorTrackingPanelLayout{--error-tracking-panel-layout-height:calc(100vh - var(--breadcrumbs-height-full) - var(--scene-padding) - var(--scene-padding-bottom));height:var(--error-tracking-panel-layout-height);max-height:var(--error-tracking-panel-layout-height);min-height:var(--error-tracking-panel-layout-height)}.PanelLayout.ErrorTrackingPanelLayout .PanelLayout__container--secondary{max-width:300px;min-width:300px}.PanelLayout.ErrorTrackingPanelLayout .SessionRecordingPlayer{height:24rem}",""]),module.exports=exports}}]);