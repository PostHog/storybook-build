(window.webpackJsonp=window.webpackJsonp||[]).push([[254],{"./frontend/src/scenes/cohorts/Cohorts.tsx":function(h,s,e){"use strict";e.r(s),e.d(s,"Cohorts",function(){return E}),e.d(s,"scene",function(){return $});var j=e("./node_modules/core-js/modules/es.symbol.js"),te=e("./node_modules/core-js/modules/es.symbol.description.js"),ne=e("./node_modules/core-js/modules/es.array.map.js"),oe=e("./node_modules/core-js/modules/es.function.name.js"),se=e("./node_modules/core-js/modules/es.regexp.exec.js"),re=e("./node_modules/core-js/modules/es.string.search.js"),T=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),A=e.n(T),y=e("./node_modules/react/index.js"),t=e.n(y),I=e("./node_modules/antd/es/input/index.js"),R=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),f=e("./frontend/src/models/cohortsModel.ts"),c=e("./node_modules/kea/lib/index.esm.js"),b=e("./frontend/src/lib/components/PageHeader.tsx"),N=e("./frontend/src/types.ts"),P=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),V=e.n(P),B=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss"),x=e.n(B),g={};g.insert="head",g.singleton=!1;var ae=V()(x.a,g),le=x.a.locals||{},U=e("./node_modules/fuse.js/dist/fuse.esm.js"),C=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),F=e("./frontend/src/lib/components/Tooltip.tsx"),M=e("./frontend/src/lib/components/Link.tsx"),W=e("./frontend/src/lib/dayjs.ts"),D=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),d=e("./frontend/src/scenes/urls.ts"),H=e("./frontend/src/lib/components/LemonTable/index.ts"),z=e("./frontend/src/scenes/userLogic.ts"),J=e("./frontend/src/lib/components/LemonButton/More.tsx"),l=e("./frontend/src/lib/components/LemonButton/index.ts"),G=e("./frontend/src/lib/components/LemonRow/index.ts"),i=e("./node_modules/kea-router/lib/index.js"),K=function(m,p){return new U.a(m,{keys:["name"],threshold:.3}).search(p).map(function(u){return u.item})};function E(){var v=Object(c.useValues)(f.a),m=v.cohorts,p=v.cohortsLoading,u=Object(c.useActions)(f.a),Q=u.deleteCohort,X=u.exportCohortPersons,Y=Object(c.useValues)(z.a),Z=Y.hasAvailableFeature,w=Object(c.useValues)(i.router),k=w.searchParams,q=Object(y.useState)(!1),S=A()(q,2),L=S[0],_=S[1],ee=[{title:"Name",dataIndex:"name",className:"ph-no-capture",width:"30%",sorter:function(o,n){return(o.name||"").localeCompare(n.name||"")},render:function(o,n){var a=n.id,O=n.description;return t.a.createElement(t.a.Fragment,null,t.a.createElement(M.a,{to:Object(i.combineUrl)(d.a.cohort(a),k).url,className:"row-name"},o||"Untitled"),Z(N.c.DASHBOARD_COLLABORATION)&&O&&t.a.createElement("span",{className:"row-description"},O))}},{title:"Users in cohort",render:function(o,n){var a;return(a=n.count)===null||a===void 0?void 0:a.toLocaleString()},dataIndex:"count",sorter:function(o,n){return(o.count||0)-(n.count||0)}},Object(C.b)(),Object(C.a)(),{title:t.a.createElement("span",null,t.a.createElement(F.a,{title:"PostHog calculates what users belong to each cohort. This is then used when filtering on cohorts in the Trends page etc. Calculating happens every 15 minutes, or whenever a cohort is updated."},"Last calculated",t.a.createElement(R.a,{style:{marginLeft:6}}))),render:function(o,n){return n.is_static?t.a.createElement(t.a.Fragment,null,"N/A"):n.is_calculating?t.a.createElement("span",{style:{display:"inline-flex",alignItems:"center"}},"in progress ",t.a.createElement(D.a,{size:"sm",style:{marginLeft:6}})):Object(W.a)(n.last_calculation).fromNow()}},{width:0,render:function(o,n){return t.a.createElement(J.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(l.a,{type:"stealth",to:d.a.cohort(n.id),fullWidth:!0},"Edit"),t.a.createElement(l.a,{type:"stealth",to:Object(i.combineUrl)(d.a.sessionRecordings(),{filters:{properties:[{key:"id",label:n.name,type:"cohort",value:n.id}]}}).url,fullWidth:!0},"View session recordings"),t.a.createElement(l.a,{type:"stealth",onClick:function(){return X(n.id)},tooltip:"Export all users belonging to this cohort in CSV format.",fullWidth:!0},"Export users"),t.a.createElement(G.b,null),t.a.createElement(l.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Q(n)},fullWidth:!0},"Delete cohort"))})}}];return t.a.createElement("div",null,t.a.createElement(b.a,{title:"Cohorts",caption:"Create lists of users who have something in common to use in analytics or feature flags."}),t.a.createElement("div",null,t.a.createElement(I.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for cohorts",style:{maxWidth:400,width:"initial",flexGrow:1},onChange:function(o){_(o.target.value)}}),t.a.createElement("div",{className:"mb float-right"},t.a.createElement(l.a,{type:"primary","data-attr":"create-cohort",onClick:function(){return i.router.actions.push(d.a.cohort("new"))}},"New Cohort")),t.a.createElement(H.a,{columns:ee,loading:p,rowKey:"id",pagination:{pageSize:100},dataSource:L?K(m,L):m,nouns:["cohort","cohorts"]})))}var $={component:E,logic:f.a}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss":function(h,s,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");s=j(!1),s.push([h.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.cohorts-drawer .ant-drawer-content-wrapper{max-width:850px!important;width:100%!important}.cohort-recalculating{background-color:#f2f2f2;padding:.5rem 1rem;margin-top:1rem;border-radius:4px}.cohort-recalculating .ant-spin-spinning{margin-right:.375rem}.cohort-csv-dragger .ant-upload-drag-container{display:flex!important;text-align:left}.cohort-csv-dragger .ant-upload-drag-container .ant-upload-drag-icon{margin:0!important;padding-left:1rem;padding-right:1rem}.cohort-csv-dragger .ant-upload-drag-container .ant-upload-text{font-size:1rem!important;margin:0!important}",""]),h.exports=s}}]);
