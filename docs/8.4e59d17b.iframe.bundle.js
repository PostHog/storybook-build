(window.webpackJsonp=window.webpackJsonp||[]).push([[8,9],{"./frontend/src/scenes/apps/appMetricsSceneLogic.ts":function(b,E,e){"use strict";e.r(E),e.d(E,"AppMetricsTab",function(){return l}),e.d(E,"appMetricsSceneLogic",function(){return x});var O=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),v=e.n(O),f=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),c=e.n(f),P=e("./node_modules/@babel/runtime/regenerator/index.js"),p=e.n(P),I=e("./node_modules/core-js/modules/es.array.iterator.js"),F=e.n(I),L=e("./node_modules/core-js/modules/es.object.to-string.js"),H=e.n(L),B=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$=e.n(B),U=e("./node_modules/core-js/modules/es.array.concat.js"),S=e.n(U),y=e("./node_modules/core-js/modules/es.function.name.js"),G=e.n(y),K=e("./node_modules/core-js/modules/es.array.includes.js"),J=e.n(K),R=e("./node_modules/core-js/modules/es.string.includes.js"),N=e.n(R),W=e("./node_modules/core-js/modules/es.array.filter.js"),z=e.n(W),u=e("./node_modules/kea/lib/index.esm.js"),C=e("./node_modules/kea-loaders/lib/index.js"),Q=e.n(C),M=e("./frontend/src/scenes/urls.ts"),g=e("./frontend/src/lib/api.ts"),D=e("./frontend/src/scenes/teamLogic.tsx"),j=e("./node_modules/kea-router/lib/index.js"),V=e.n(j),h=e("./frontend/src/lib/utils.tsx"),l;(function(n){n.ProcessEvent="processEvent",n.OnEvent="onEvent",n.ExportEvents="exportEvents",n.HistoricalExports="historical_exports"})(l||(l={}));var A=[l.ProcessEvent,l.OnEvent,l.ExportEvents],x=Object(u.kea)([Object(u.path)(function(n){return["scenes","apps","appMetricsSceneLogic",n]}),Object(u.props)({}),Object(u.key)(function(n){return n.pluginConfigId}),Object(u.actions)({setActiveTab:function(o){return{tab:o}},setDateFrom:function(o){return{dateFrom:o}}}),Object(u.reducers)({activeTab:[null,{setActiveTab:function(o,s){var r=s.tab;return r}}],dateFrom:["-30d",{setDateFrom:function(o,s){var r=s.dateFrom;return r}}]}),Object(C.loaders)(function(n){var o=n.values,s=n.props;return{pluginConfig:[null,{loadPluginConfig:function(){var r=c()(p.a.mark(function i(){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.b.get("api/projects/".concat(D.a.values.currentTeamId,"/plugin_configs/").concat(s.pluginConfigId));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i)}));function t(){return r.apply(this,arguments)}return t}()}],metrics:[null,{loadMetrics:function(){var r=c()(p.a.mark(function i(){var _,a,T;return p.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return _=Object(h.Eb)({category:o.activeTab,date_from:o.dateFrom}),m.next=3,g.b.get("api/projects/".concat(D.a.values.currentTeamId,"/app_metrics/").concat(s.pluginConfigId,"?").concat(_));case 3:return a=m.sent,T=a.results,m.abrupt("return",T);case 6:case"end":return m.stop()}},i)}));function t(){return r.apply(this,arguments)}return t}()}],historicalExports:[[],{loadHistoricalExports:function(){var r=c()(p.a.mark(function i(){var _,a;return p.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,g.b.get("api/projects/".concat(D.a.values.currentTeamId,"/app_metrics/").concat(s.pluginConfigId,"/historical_exports"));case 2:return _=d.sent,a=_.results,d.abrupt("return",a);case 5:case"end":return d.stop()}},i)}));function t(){return r.apply(this,arguments)}return t}()}]}}),Object(u.selectors)(function(n){var o=n.values;return{breadcrumbs:[function(s){return[s.pluginConfig,function(r,t){return t.pluginConfigId}]},function(s,r){var t;return[{name:"Apps",path:M.a.projectApps()},{name:s==null||(t=s.plugin_info)===null||t===void 0?void 0:t.name,path:M.a.appMetrics(r)}]}],showTab:[function(){return[]},function(){return function(s){var r;if(o.pluginConfigLoading||!o.pluginConfig)return!1;var t=((r=o.pluginConfig.plugin_info.capabilities)===null||r===void 0?void 0:r.methods)||[];return s===l.HistoricalExports?t.includes("exportEvents"):s===l.OnEvent&&t.includes("exportEvents")?!1:t.includes(s)}}]}}),Object(u.listeners)(function(n){var o=n.values,s=n.actions;return{loadPluginConfigSuccess:function(){if(!o.activeTab){var t=A.filter(function(a){return o.showTab(a)}),i=v()(t,1),_=i[0];s.setActiveTab(_)}},setActiveTab:function(t){var i=t.tab;i===l.HistoricalExports?s.loadHistoricalExports():s.loadMetrics()},setDateFrom:function(){s.loadMetrics()}}}),Object(j.actionToUrl)(function(n){var o=n.values,s=n.props;return{setActiveTab:function(){var t;return o.activeTab===l.HistoricalExports?M.a.appHistoricalExports(s.pluginConfigId):M.a.appMetrics(s.pluginConfigId,(t=o.activeTab)!==null&&t!==void 0?t:void 0)}}}),Object(j.urlToAction)(function(n){var o=n.values,s=n.actions;return{"/app/:pluginConfigId/:page":function(t,i){o.pluginConfig||s.loadPluginConfig(),t.page===l.HistoricalExports?s.setActiveTab(l.HistoricalExports):i.tab&&A.includes(i.tab)&&s.setActiveTab(i.tab)}}})])},"./frontend/src/scenes/apps/constants.tsx":function(b,E,e){"use strict";e.r(E),e.d(E,"DescriptionColumns",function(){return P});var O=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=e.n(O),f=e("./frontend/src/scenes/apps/appMetricsSceneLogic.ts"),c,P=(c={},v()(c,f.AppMetricsTab.ProcessEvent,{successes:"Events processed",failures:"Failed events"}),v()(c,f.AppMetricsTab.OnEvent,{successes:"Events processed",successes_on_retry:"Events processed on retry",failures:"Failed events"}),v()(c,f.AppMetricsTab.ExportEvents,{successes:"Events delivered",successes_on_retry:"Events delivered on retry",failures:"Failed events"}),v()(c,f.AppMetricsTab.HistoricalExports,{successes:"Events delivered",successes_on_retry:"Events delivered on retry",failures:"Failed events"}),c)}}]);
