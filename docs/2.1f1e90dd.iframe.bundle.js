(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./frontend/src/lib/components/LemonSelect.tsx":function(te,A,e){"use strict";e.d(A,"a",function(){return F});var J=e("./node_modules/core-js/modules/es.array.map.js"),re=e.n(J),Z=e("./node_modules/core-js/modules/es.object.entries.js"),ae=e.n(Z),w=e("./node_modules/@babel/runtime/helpers/extends.js"),I=e.n(w),X=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=e.n(X),C=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),k=e.n(C),W=e("./node_modules/react/index.js"),$=e.n(W),Q=e("./frontend/src/lib/components/icons.tsx"),ee=e("./frontend/src/lib/components/LemonButton/index.ts");function F(T){var S,H,R=T.value,B=T.onChange,f=T.options,v=T.placeholder,y=T.dropdownMatchSelectWidth,_=y===void 0?!0:y,K=T.allowClear,P=K===void 0?!1:K,G=k()(T,["value","onChange","options","placeholder","dropdownMatchSelectWidth","allowClear"]),q=Object(W.useState)(R),Y=i()(q,2),p=Y[0],x=Y[1],z=Object(W.useState)(!1),V=i()(z,2),j=V[0],g=V[1],O=P&&j&&!!p;return Object(W.useEffect)(function(){G.loading||x(R)},[R,G.loading]),$.a.createElement("div",{className:"LemonButtonWithSideAction",onMouseEnter:function(){return g(!0)},onMouseLeave:function(){return g(!1)}},$.a.createElement(ee.b,I()({popup:{overlay:Object.entries(f).map(function(L){var b=i()(L,2),h=b[0],M=b[1];return $.a.createElement(ee.a,{key:h,icon:M.icon,onClick:function(){h!=p&&(B(h),x(h))},type:h==p?"highlighted":"stealth",disabled:M.disabled,fullWidth:!0,"data-attr":M["data-attr"]},M.label||h)}),sameWidth:_,actionable:!0},icon:p&&((S=f[p])===null||S===void 0?void 0:S.icon),sideIcon:O?$.a.createElement("div",null):void 0},G),p&&(((H=f[p])===null||H===void 0?void 0:H.label)||p)||$.a.createElement("span",{className:"text-muted"},v)),O&&$.a.createElement(ee.a,{className:"side-button",type:"tertiary",icon:$.a.createElement(Q.IconClose,{style:{fontSize:"1rem"}}),tooltip:"Clear selection",onClick:function(){B(null),x(null)}}))}try{F.displayName="LemonSelect",F.__docgenInfo={description:"",displayName:"LemonSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"LemonSelectOptions"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number | symbol | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: keyof O | null) => void"}},dropdownMatchSelectWidth:{defaultValue:{value:"true"},description:"",name:"dropdownMatchSelectWidth",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:{value:"false"},description:"",name:"allowClear",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'},{value:'"stealth"'},{value:'"highlighted"'},{value:'"primary-alt"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLButtonElement>"}},size:{defaultValue:null,description:"Variation on sizes - default is medium. Small looks better inline with text. Large is a chunkier row.",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'}]}},relaxedIconWidth:{defaultValue:null,description:"If icon width is relaxed, width of icon box is set to auto. Default icon width is 1em",name:"relaxedIconWidth",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"warning"'},{value:'"danger"'},{value:'"success"'},{value:'"muted"'},{value:'"highlighted"'}]}},extendedContent:{defaultValue:null,description:"Extended content, e.g. a description, to show in the lower button area.",name:"extendedContent",required:!1,type:{name:"ReactNode"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:null,description:"Tooltip to display on hover.",name:"tooltip",required:!1,type:{name:"any"}},fullWidth:{defaultValue:null,description:"Whether the row should take up the parent's full width.",name:"fullWidth",required:!1,type:{name:"boolean"}},center:{defaultValue:null,description:"Whether the row's contents should be centered.",name:"center",required:!1,type:{name:"boolean"}},outlined:{defaultValue:null,description:"Whether the element should be outlined with a standard border.",name:"outlined",required:!1,type:{name:"any"}},"data-attr":{defaultValue:null,description:"",name:"data-attr",required:!1,type:{name:"string"}},to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},sideIcon:{defaultValue:null,description:"",name:"sideIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | null"}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:"string"}},translucent:{defaultValue:null,description:"Whether the button should have transparent background in its base state (i.e. non-hover).",name:"translucent",required:!1,type:{name:"boolean"}},active:{defaultValue:null,description:"Whether hover style should be applied, signaling that the button is held active in some way.",name:"active",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonSelect.tsx#LemonSelect"]={docgenInfo:F.__docgenInfo,name:"LemonSelect",path:"frontend/src/lib/components/LemonSelect.tsx#LemonSelect"})}catch(T){}},"./frontend/src/lib/components/PayGateMini/PayGateMini.tsx":function(te,A,e){"use strict";e.d(A,"a",function(){return _});var J=e("./node_modules/core-js/modules/es.symbol.js"),re=e("./node_modules/core-js/modules/es.symbol.description.js"),Z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ae=e.n(Z),w=e("./node_modules/react/index.js"),I=e.n(w),X=e("./node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),C=e("./frontend/src/types.ts"),k=e("./frontend/src/scenes/userLogic.ts"),W=e("./frontend/src/lib/components/icons.tsx"),$=e("./frontend/src/lib/components/LemonButton/index.ts"),Q=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ee=e.n(Q),F=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss"),T=e.n(F),S={};S.insert="head",S.singleton=!1;var H=ee()(T.a,S),R=T.a.locals||{},B=e("./frontend/src/lib/constants.tsx"),f=e("./frontend/src/lib/utils.tsx"),v,y=(v={},ae()(v,C.d.DASHBOARD_PERMISSIONING,{icon:I.a.createElement(W.IconEmojiPeople,null),description:"Share insights, collaborate on dashboards, manage permissions, and make decisions with your team.",umbrella:"advanced permissioning"}),ae()(v,C.d.SSO_ENFORCEMENT,{icon:I.a.createElement(W.IconLock,null),description:"Enable SAML single sign-on, enforce login with SSO, automatic user provisioning, and advanced authentication controls.",umbrella:"advanced authentication"}),v);function _(K){var P=K.feature,G=K.style,q=K.children,Y=K.overrideShouldShowGate,p=Object(X.useValues)(i.a),x=p.preflight,z=Object(X.useValues)(k.a),V=z.hasAvailableFeature,j=y[P],g=B.i[P],O=null;return!Y&&!V(P)&&(x!=null&&x.cloud?g===B.o?O="add-card":O="contact-sales":O="check-licensing"),O?I.a.createElement("div",{className:"PayGateMini",style:G},I.a.createElement("div",{className:"PayGateMini__icon"},j.icon),I.a.createElement("div",{className:"PayGateMini__description"},j.description),I.a.createElement("div",{className:"PayGateMini__cta"},"Upgrade to ",O==="add-card"?"a premium":"the ".concat(Object(f.i)(g))," ","plan to gain ",j.umbrella,"."),I.a.createElement($.a,{to:O==="add-card"?"/organization/billing":void 0,href:O==="contact-sales"?"mailto:sales@posthog.com?subject=Inquiring about ".concat(j.umbrella):O==="check-licensing"?"https://posthog.com/pricing":void 0,type:"secondary",fullWidth:!0,center:!0},O==="add-card"?"Upgrade now":O==="contact-sales"?"Contact sales":"Explore license options")):I.a.createElement(I.a.Fragment,null,q)}try{_.displayName="PayGateMini",_.__docgenInfo={description:`A sort of paywall for premium features.

Simply shows its children when the feature is available,
otherwise it presents upsell UI with the call to action that's most relevant for the circumstances.`,displayName:"PayGateMini",props:{feature:{defaultValue:null,description:"",name:"feature",required:!0,type:{name:"enum",value:[{value:'"sso_enforcement"'},{value:'"dashboard_permissioning"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},overrideShouldShowGate:{defaultValue:null,description:"",name:"overrideShouldShowGate",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"]={docgenInfo:_.__docgenInfo,name:"PayGateMini",path:"frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"})}catch(K){}},"./frontend/src/scenes/dashboard/ShareModal.tsx":function(te,A,e){"use strict";e.d(A,"a",function(){return p}),e.d(A,"b",function(){return x});var J=e("./node_modules/core-js/modules/es.array.concat.js"),re=e.n(J),Z=e("./node_modules/core-js/modules/es.array.map.js"),ae=e.n(Z),w=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=e.n(w),X=e("./node_modules/react/index.js"),i=e.n(X),C=e("./node_modules/kea/lib/index.esm.js"),k=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),W=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),$=e("./frontend/src/scenes/urls.ts"),Q=e("./frontend/src/models/dashboardsModel.tsx"),ee=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),F=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),T=e("./frontend/src/lib/components/LemonButton/index.ts"),S=e("./frontend/src/lib/utils.tsx"),H=e("./frontend/src/lib/components/icons.tsx"),R=e("./frontend/src/types.ts"),B=e("./frontend/src/lib/constants.tsx"),f=e("./frontend/src/lib/components/LemonSelect.tsx"),v=e("./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts"),y=e("./frontend/src/lib/components/ProfilePicture/index.ts"),_=e("./node_modules/antd/es/select/index.js"),K=e("./node_modules/antd/es/button/index.js"),P=e("./frontend/src/lib/components/Tooltip.tsx"),G=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),q=e("./frontend/src/lib/components/AlertMessage/index.ts"),Y,p=(Y={},I()(Y,B.e.EveryoneInProjectCanEdit,{label:"Everyone in the project can edit",icon:i.a.createElement(H.IconLockOpen,null)}),I()(Y,B.e.OnlyCollaboratorsCanEdit,{label:"Only those invited to this dashboard can edit",icon:i.a.createElement(H.IconLock,null)}),Y);function x(j){var g=j.visible,O=j.onCancel,L=Object(C.useValues)(Q.a),b=L.dashboardLoading,h=Object(C.useValues)(k.c),M=h.dashboard,U=h.canEditDashboard,t=Object(C.useActions)(k.c),l=t.setIsSharedDashboard,a=M?window.location.origin+$.a.sharedDashboard(M.share_token):"";return M?i.a.createElement(F.a,{visible:g,onCancel:O},i.a.createElement(z,{dashboardId:M.id}),i.a.createElement("section",null,i.a.createElement("h5",null,"External sharing"),i.a.createElement(ee.a,{id:"share-dashboard-switch",label:"Share dashboard publicly",checked:M.is_shared,loading:b,"data-attr":"share-dashboard-switch",onChange:function(d){l(M.id,d)},type:"primary",disabled:!U,style:{width:"100%",height:"3rem",fontWeight:600}}),M.is_shared?i.a.createElement(i.a.Fragment,null,M.share_token&&i.a.createElement(T.a,{"data-attr":"share-dashboard-link-button",onClick:function(){return Object(S.s)(a,"link")},icon:i.a.createElement(H.IconCopy,null),style:{width:"100%",height:"3rem",border:"1px solid var(--border)"}},"Copy shared dashboard link"),i.a.createElement("div",null,"Use this HTML snippet to embed the dashboard on your website:"),i.a.createElement(W.a,{language:W.b.HTML},'<iframe width="100%" height="100%" frameborder="0" src="'.concat(a,'?embedded" />'))):null)):null}function z(j){var g=j.dashboardId,O=Object(C.useValues)(Q.a),L=O.dashboardLoading,b=Object(C.useValues)(k.c),h=b.dashboard,M=b.canEditDashboard,U=b.canRestrictDashboard,t=Object(C.useActions)(k.c),l=t.triggerDashboardUpdate,a=Object(C.useValues)(Object(v.a)({dashboardId:g})),r=a.allCollaborators,d=a.explicitCollaboratorsLoading,s=a.addableMembers,c=a.explicitCollaboratorsToBeAdded,u=Object(C.useActions)(Object(v.a)({dashboardId:g})),o=u.deleteExplicitCollaborator,n=u.setExplicitCollaboratorsToBeAdded,E=u.addExplicitCollaborators;return h&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h5",null,"Collaboration settings"),i.a.createElement(G.a,{feature:R.d.DASHBOARD_PERMISSIONING,style:{marginTop:"0.75rem"}},i.a.createElement("section",null,(!M||!U)&&i.a.createElement(q.a,{type:"info"},M?"You aren't allowed to change the restriction level \u2013 only the dashboard owner and project admins can.":"You aren't allowed to change sharing settings \u2013 only dashboard collaborators with edit settings can."),i.a.createElement(f.a,{value:h.effective_restriction_level,onChange:function(D){return l({restriction_level:D})},options:p,loading:L,type:"stealth",outlined:!0,style:{height:"3rem",width:"100%"},disabled:!U})),h.restriction_level>B.e.EveryoneInProjectCanEdit&&i.a.createElement("section",null,i.a.createElement("h5",null,"Collaborators"),M&&i.a.createElement("div",{style:{display:"flex",marginBottom:"0.75rem"}},i.a.createElement(_.a,{mode:"multiple",placeholder:"Search for team members to add\u2026",loading:d,value:c,onChange:function(D){return n(D)},showArrow:!0,showSearch:!0,style:{flexGrow:1}},s.map(function(m){return i.a.createElement(_.a.Option,{key:m.id,value:m.uuid,title:"".concat(m.first_name," (").concat(m.email,")")},i.a.createElement(y.b,{name:m.first_name,email:m.email,size:"sm",style:{display:"inline-flex",marginRight:8}}),m.first_name," (",m.email,")")})),i.a.createElement(K.a,{type:"primary",style:{flexShrink:0,marginLeft:"0.5rem"},loading:d,disabled:c.length===0,onClick:function(){return E()}},"Add")),r.map(function(m){return i.a.createElement(V,{key:m.user.uuid,collaborator:m,deleteCollaborator:M?o:void 0})}))))}function V(j){var g=j.collaborator,O=j.deleteCollaborator,L=g.user,b=g.level,h=b<=B.d.CanEdit,M=B.C[b];return i.a.createElement("div",{className:"CollaboratorRow"},i.a.createElement(y.b,{email:L.email,name:L.first_name,size:"md",showName:!0}),i.a.createElement(P.a,{title:h?null:"".concat(L.first_name||"This person"," ").concat(b===B.d._Owner?"created the dashboard":"is a project administrator"),placement:"left"},i.a.createElement("div",{className:"CollaboratorRow__details"},i.a.createElement("span",null,h?M:i.a.createElement("b",null,M)),O&&i.a.createElement(T.a,{icon:i.a.createElement(H.IconCancel,null),onClick:function(){return O(L.uuid)},type:"stealth",tooltip:h?"Remove invited collaborator":null,disabled:!h,status:"danger",size:"small"}))))}try{x.displayName="ShareModal",x.__docgenInfo={description:"",displayName:"ShareModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"]={docgenInfo:x.__docgenInfo,name:"ShareModal",path:"frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"})}catch(j){}},"./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts":function(te,A,e){"use strict";e.d(A,"a",function(){return U});var J=e("./node_modules/core-js/modules/es.array.concat.js"),re=e.n(J),Z=e("./node_modules/core-js/modules/es.array.filter.js"),ae=e.n(Z),w=e("./node_modules/core-js/modules/es.array.find.js"),I=e.n(w),X=e("./node_modules/core-js/modules/es.array.iterator.js"),i=e.n(X),C=e("./node_modules/core-js/modules/es.array.map.js"),k=e.n(C),W=e("./node_modules/core-js/modules/es.array.some.js"),$=e.n(W),Q=e("./node_modules/core-js/modules/es.object.to-string.js"),ee=e.n(Q),F=e("./node_modules/core-js/modules/es.promise.js"),T=e.n(F),S=e("./node_modules/core-js/modules/es.string.iterator.js"),H=e.n(S),R=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),B=e.n(R),f=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=e.n(f),y=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_=e.n(y),K=e("./node_modules/@babel/runtime/regenerator/index.js"),P=e.n(K),G=e("./node_modules/regenerator-runtime/runtime.js"),q=e.n(G),Y=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),p=e.n(Y),x=e("./node_modules/kea/lib/index.esm.js"),z=e("./frontend/src/lib/api.ts"),V=e("./frontend/src/lib/constants.tsx"),j=e("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),g=e("./frontend/src/scenes/dashboard/dashboardLogic.ts");function O(t,l){var a;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(a=L(t))||l&&t&&typeof t.length=="number"){a&&(t=a);var r=0,d=function(){};return{s:d,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(n){throw n},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,c=!1,u;return{s:function(){a=t[Symbol.iterator]()},n:function(){var n=a.next();return s=n.done,n},e:function(n){c=!0,u=n},f:function(){try{!s&&a.return!=null&&a.return()}finally{if(c)throw u}}}}function L(t,l){if(!!t){if(typeof t=="string")return b(t,l);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(t,l)}}function b(t,l){(l==null||l>t.length)&&(l=t.length);for(var a=0,r=new Array(l);a<l;a++)r[a]=t[a];return r}function h(t,l){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);l&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,r)}return a}function M(t){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?arguments[l]:{};l%2?h(Object(a),!0).forEach(function(r){v()(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var U=Object(x.kea)({path:function(l){return["scenes","dashboard","dashboardCollaboratorsLogic",l]},props:{},key:function(l){return l.dashboardId},connect:function(l){return{values:[j.b,["admins","plainMembers","allMembers","allMembersLoading"],Object(g.c)({id:l.dashboardId}),["dashboard"]]}},actions:{deleteExplicitCollaborator:function(l){return{userUuid:l}},setExplicitCollaboratorsToBeAdded:function(l){return{userUuids:l}},addExplicitCollaborators:!0},reducers:{explicitCollaboratorsToBeAdded:[[],{setExplicitCollaboratorsToBeAdded:function(l,a){var r=a.userUuids;return r}}]},loaders:function(l){var a=l.values,r=l.props,d=l.actions;return{explicitCollaborators:[[],{loadExplicitCollaborators:function(){var s=p()(P.a.mark(function u(){var o;return P.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,z.b.dashboards.collaborators.list(r.dashboardId);case 2:return o=E.sent,o.sort(function(m,D){return m.user.first_name.localeCompare(D.user.first_name)}),E.abrupt("return",o);case 5:case"end":return E.stop()}},u)}));function c(){return s.apply(this,arguments)}return c}(),addExplicitCollaborators:function(){var s=p()(P.a.mark(function u(){var o,n,E,m;return P.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return o=a.explicitCollaboratorsToBeAdded,n=a.explicitCollaborators,d.setExplicitCollaboratorsToBeAdded([]),N.next=4,Promise.all(o.map(function(){var oe=p()(P.a.mark(function se(le){return P.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,z.b.dashboards.collaborators.create(r.dashboardId,le,V.d.CanEdit);case 2:return ne.abrupt("return",ne.sent);case 3:case"end":return ne.stop()}},se)}));return function(se){return oe.apply(this,arguments)}}()));case 4:return E=N.sent,m=[].concat(_()(n),_()(E)),m.sort(function(oe,se){return oe.user.first_name.localeCompare(se.user.first_name)}),N.abrupt("return",m);case 8:case"end":return N.stop()}},u)}));function c(){return s.apply(this,arguments)}return c}(),deleteExplicitCollaborator:function(){var s=p()(P.a.mark(function u(o){var n;return P.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return n=o.userUuid,m.next=3,z.b.dashboards.collaborators.delete(r.dashboardId,n);case 3:return m.abrupt("return",a.explicitCollaborators.filter(function(D){return D.user.uuid!==n}));case 4:case"end":return m.stop()}},u)}));function c(u){return s.apply(this,arguments)}return c}()}]}},selectors:{allCollaborators:[function(t){return[t.explicitCollaborators,t.admins,t.allMembers,t.dashboard]},function(t,l,a,r){var d,s=[],c=r==null||(d=r.created_by)===null||d===void 0?void 0:d.uuid,u=(r==null?void 0:r.effective_restriction_level)===V.e.EveryoneInProjectCanEdit?a:l;return s.push.apply(s,_()(t.filter(function(o){return!u.find(function(n){return n.user.uuid===o.user.uuid})}).map(function(o){return M(M({},o),{},{level:o.user.uuid===c?V.d._Owner:o.level})}))),s.push.apply(s,_()(u.map(function(o){return{user:o.user,level:o.user.uuid===c?V.d._Owner:V.d._ProjectAdmin}}))),s.sort(function(o,n){return o.level===n.level?o.user.first_name.localeCompare(n.user.first_name):n.level-o.level}),s}],addableMembers:[function(t){return[t.allCollaborators,t.plainMembers]},function(t,l){var a=[],r=O(l),d;try{var s=function(){var u=d.value;t.some(function(o){return o.user.uuid===u.user.uuid})||a.push(u.user)};for(r.s();!(d=r.n()).done;)s()}catch(c){r.e(c)}finally{r.f()}return a.sort(function(c,u){return c.first_name.localeCompare(u.first_name)}),a}],addableMembersLoading:[function(t){return[t.explicitCollaboratorsLoading,t.allMembersLoading]},function(t,l){return t||l}]},events:function(l){var a=l.actions;return{afterMount:function(){a.loadExplicitCollaborators()}}}})},"./frontend/src/scenes/dashboard/dashboardsLogic.ts":function(te,A,e){"use strict";e.d(A,"a",function(){return R}),e.d(A,"b",function(){return B});var J=e("./node_modules/core-js/modules/es.array.filter.js"),re=e.n(J),Z=e("./node_modules/core-js/modules/es.array.flat-map.js"),ae=e.n(Z),w=e("./node_modules/core-js/modules/es.array.map.js"),I=e.n(w),X=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),i=e.n(X),C=e("./node_modules/core-js/modules/es.function.name.js"),k=e.n(C),W=e("./node_modules/core-js/modules/es.regexp.exec.js"),$=e.n(W),Q=e("./node_modules/core-js/modules/es.string.search.js"),ee=e.n(Q),F=e("./node_modules/kea/lib/index.esm.js"),T=e("./node_modules/fuse.js/dist/fuse.esm.js"),S=e("./frontend/src/models/dashboardsModel.tsx"),H=e("./frontend/src/lib/utils.tsx"),R;(function(f){f.All="all",f.Pinned="pinned",f.Shared="shared"})(R||(R={}));var B=Object(F.kea)({path:["scenes","dashboard","dashboardsLogic"],actions:{setSearchTerm:function(v){return{searchTerm:v}},setCurrentTab:function(v){return{tab:v}}},reducers:{searchTerm:{setSearchTerm:function(v,y){var _=y.searchTerm;return _}},currentTab:[R.All,{setCurrentTab:function(v,y){var _=y.tab;return _}}]},selectors:{dashboards:[function(f){return[S.a.selectors.nameSortedDashboards,f.searchTerm,f.currentTab]},function(f,v,y){return f=f.filter(function(_){return!_.deleted}).sort(function(_,K){var P,G;return((P=_.name)!==null&&P!==void 0?P:"Untitled").localeCompare((G=K.name)!==null&&G!==void 0?G:"Untitled")}),y===R.Pinned?f=f.filter(function(_){return _.pinned}):y===R.Shared&&(f=f.filter(function(_){return _.is_shared})),v?new T.a(f,{keys:["key","name"],threshold:.3}).search(v).map(function(_){return _.item}):f}],dashboardTags:[function(){return[S.a.selectors.nameSortedDashboards]},function(f){return Object(H.zb)(f.flatMap(function(v){var y=v.tags;return y||""}),function(v){return v}).sort()}]}})},"./frontend/src/scenes/project/Settings/teamMembersLogic.tsx":function(te,A,e){"use strict";e.d(A,"a",function(){return t}),e.d(A,"b",function(){return l});var J=e("./node_modules/core-js/modules/es.array.concat.js"),re=e.n(J),Z=e("./node_modules/core-js/modules/es.array.filter.js"),ae=e.n(Z),w=e("./node_modules/core-js/modules/es.array.find.js"),I=e.n(w),X=e("./node_modules/core-js/modules/es.array.iterator.js"),i=e.n(X),C=e("./node_modules/core-js/modules/es.array.map.js"),k=e.n(C),W=e("./node_modules/core-js/modules/es.object.to-string.js"),$=e.n(W),Q=e("./node_modules/core-js/modules/es.promise.js"),ee=e.n(Q),F=e("./node_modules/core-js/modules/es.string.iterator.js"),T=e.n(F),S=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),H=e.n(S),R=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),B=e.n(R),f=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),v=e.n(f),y=e("./node_modules/@babel/runtime/regenerator/index.js"),_=e.n(y),K=e("./node_modules/regenerator-runtime/runtime.js"),P=e.n(K),G=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),q=e.n(G),Y=e("./node_modules/react/index.js"),p=e.n(Y),x=e("./node_modules/kea/lib/index.esm.js"),z=e("./frontend/src/lib/api.ts"),V=e("./frontend/src/lib/constants.tsx"),j=e("./frontend/src/types.ts"),g=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),O=e("./frontend/src/lib/utils/permissioning.ts"),L=e("./frontend/src/scenes/userLogic.ts"),b=e("./frontend/src/scenes/teamLogic.ts"),h=e("./frontend/src/lib/components/lemonToast.tsx");function M(a,r){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);r&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),d.push.apply(d,s)}return d}function U(a){for(var r=1;r<arguments.length;r++){var d=arguments[r]!=null?arguments[r]:{};r%2?M(Object(d),!0).forEach(function(s){B()(a,s,d[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):M(Object(d)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(d,s))})}return a}var t=V.m.Admin,l=Object(x.kea)({path:["scenes","project","Settings","teamMembersLogic"],actions:{changeUserAccessLevel:function(r,d){return{user:r,newLevel:d}}},loaders:function(r){var d=r.values;return{explicitMembers:{__default:[],loadMembers:function(){var s=q()(_.a.mark(function u(){return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.b.get("api/projects/".concat(b.a.values.currentTeamId,"/explicit_members/"));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},u)}));function c(){return s.apply(this,arguments)}return c}(),addMembers:function(){var s=q()(_.a.mark(function u(o){var n,E,m;return _.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return n=o.userUuids,E=o.level,N.next=3,Promise.all(n.map(function(oe){return z.b.create("api/projects/".concat(b.a.values.currentTeamId,"/explicit_members/"),{user_uuid:oe,level:E})}));case 3:return m=N.sent,h.a.success("Added ".concat(m.length," members").concat(m.length!==1&&"s"," to the project.")),N.abrupt("return",[].concat(v()(d.explicitMembers),v()(m)));case 6:case"end":return N.stop()}},u)}));function c(u){return s.apply(this,arguments)}return c}(),removeMember:function(){var s=q()(_.a.mark(function u(o){var n,E;return _.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return E=o.member,D.next=3,z.b.delete("api/projects/".concat(b.a.values.currentTeamId,"/explicit_members/").concat(E.user.uuid,"/"));case 3:return h.a.success(p.a.createElement(p.a.Fragment,null,E.user.uuid===((n=L.a.values.user)===null||n===void 0?void 0:n.uuid)?"Left":"Removed ".concat(E.user.first_name," (").concat(E.user.email,") from")," ","the project.")),D.abrupt("return",d.explicitMembers.filter(function(N){return N.user.uuid!==E.user.uuid}));case 5:case"end":return D.stop()}},u)}));function c(u){return s.apply(this,arguments)}return c}()}}},selectors:function(r){var d=r.selectors;return{allMembers:[function(){return[b.a.selectors.currentTeam,L.a.selectors.hasAvailableFeature,d.explicitMembers,g.a.selectors.members]},function(s,c,u,o){return!(s!=null&&s.access_control)||!c(j.d.PROJECT_BASED_PERMISSIONING)?o.map(function(n){return U(U({},n),{},{explicit_team_level:null,organization_level:n.level})}):o.filter(function(n){var E=n.level;return E>=t}).map(function(n){return U(U({},n),{},{explicit_team_level:null,organization_level:n.level})}).concat(u.filter(function(n){var E=n.parent_level;return E<t}).map(function(n){return U(U({},n),{},{level:n.effective_level,explicit_team_level:n.level,organization_level:n.parent_level})}))}],allMembersLoading:[function(){return[d.explicitMembersLoading,g.a.selectors.membersLoading]},function(s,c){return s||c}],admins:[function(){return[d.allMembers]},function(s){return s.filter(function(c){var u=c.level;return u>=V.y.Admin})}],plainMembers:[function(){return[d.allMembers]},function(s){return s.filter(function(c){var u=c.level;return u<V.y.Admin})}],addableMembers:[function(){return[d.explicitMembers,g.a.selectors.members,L.a.selectors.user]},function(s,c,u){return c.filter(function(o){var n=o.user;return n.uuid!==u.uuid}).map(function(o){var n=s.find(function(m){return m.user.uuid===o.user.uuid}),E;return n?E=Math.max(n.effective_level,o.level):E=o.level>=t?o.level:null,U(U({},o),{},{level:E,explicit_team_level:n?n.level:null,organization_level:o.level})})}]}},listeners:function(r){var d=r.actions;return{changeUserAccessLevel:function(){var s=q()(_.a.mark(function u(o){var n,E;return _.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return n=o.user,E=o.newLevel,D.next=3,z.b.update("api/projects/".concat(b.a.values.currentTeamId,"/explicit_members/").concat(n.uuid,"/"),{level:E});case 3:h.a.success(p.a.createElement(p.a.Fragment,null,"Made ",p.a.createElement("b",null,n.first_name)," project ",O.b.get(E))),d.loadMembers();case 5:case"end":return D.stop()}},u)}));function c(u){return s.apply(this,arguments)}return c}()}},events:function(r){var d=r.actions;return{afterMount:d.loadMembers}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss":function(te,A,e){var J=e("./node_modules/css-loader/dist/runtime/api.js");A=J(!1),A.push([te.i,".PayGateMini{display:flex;flex-direction:column;align-items:center;text-align:center;background:var(--bg-side);border-radius:var(--radius);padding:.75rem;font-size:.875rem}.PayGateMini__icon{display:flex;color:var(--warning);font-size:2rem}.PayGateMini__description{margin-top:.75rem;font-weight:600;color:var(--primary-alt)}.PayGateMini__cta{margin-bottom:.75rem}",""]),te.exports=A}}]);
