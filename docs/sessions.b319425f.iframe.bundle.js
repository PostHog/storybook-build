(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{6088:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Sessions",(function(){return Sessions}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),SessionsView=__webpack_require__(5687),defineProperty=(__webpack_require__(58),__webpack_require__(42),__webpack_require__(34),__webpack_require__(62),__webpack_require__(37),__webpack_require__(121),__webpack_require__(47),__webpack_require__(5)),defineProperty_default=__webpack_require__.n(defineProperty),index_esm=__webpack_require__(3),UserOutlined=__webpack_require__(5526),PlaySquareOutlined=__webpack_require__(5874),EyeInvisibleOutlined=__webpack_require__(2558),FilterOutlined=__webpack_require__(5572),EditOutlined=__webpack_require__(2555),sessionsFiltersLogic=__webpack_require__(1162),menu=__webpack_require__(320),skeleton=__webpack_require__(1160),es_button=__webpack_require__(114),Link=__webpack_require__(59),utils=__webpack_require__(12),lib=__webpack_require__(20),Drawer=__webpack_require__(861),slicedToArray=__webpack_require__(14),slicedToArray_default=__webpack_require__.n(slicedToArray),input=__webpack_require__(692),SaveOutlined=__webpack_require__(5575),DeleteOutlined=__webpack_require__(5486);function SaveFilter(_ref){var filter=_ref.filter,_useState=Object(react.useState)(null!==filter.id?filter.name:""),_useState2=slicedToArray_default()(_useState,2),name=_useState2[0],setName=_useState2[1],_useActions=Object(index_esm.useActions)(sessionsFiltersLogic.a),upsertSessionsFilter=_useActions.upsertSessionsFilter,deleteSessionsFilter=_useActions.deleteSessionsFilter,inputRef=Object(react.useRef)(null);return Object(react.useEffect)((function(){setTimeout((function(){inputRef.current&&inputRef.current.focus()}))})),react_default.a.createElement("div",{style:{maxWidth:350},className:"mb"},react_default.a.createElement("form",{onSubmit:function onSubmit(e){e.preventDefault(),upsertSessionsFilter(filter.id,name)}},react_default.a.createElement("div",{className:"mb"},react_default.a.createElement(input.a,{ref:inputRef,required:!0,placeholder:"Name your filter",maxLength:24,value:name,"data-attr":"sessions-filter.name",onChange:function onChange(e){return setName(e.target.value)}})),react_default.a.createElement("div",{className:"mt space-between-items"},react_default.a.createElement(es_button.a,{type:"primary",htmlType:"submit",disabled:name.length<2,"data-attr":"save-sessions-filter",icon:react_default.a.createElement(SaveOutlined.a,null)},"Save"),null!==filter.id&&react_default.a.createElement(es_button.a,{danger:!0,"data-attr":"delete-sessions-filter",icon:react_default.a.createElement(DeleteOutlined.a,null),onClick:function onClick(){return deleteSessionsFilter(filter.id)}},"Delete"))))}try{SaveFilter.displayName="SaveFilter",SaveFilter.__docgenInfo={description:"",displayName:"SaveFilter",props:{filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"SavedFilter | { id: null; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessions/filters/SaveFilter.tsx#SaveFilter"]={docgenInfo:SaveFilter.__docgenInfo,name:"SaveFilter",path:"frontend/src/scenes/sessions/filters/SaveFilter.tsx#SaveFilter"})}catch(__react_docgen_typescript_loader_error){}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var ICONS={all:react_default.a.createElement(UserOutlined.a,null),withrecordings:react_default.a.createElement(PlaySquareOutlined.a,null),unseen:react_default.a.createElement(EyeInvisibleOutlined.a,null)};function SavedFiltersMenu(){var _useValues=Object(index_esm.useValues)(sessionsFiltersLogic.a),activeFilter=_useValues.activeFilter,savedFilters=_useValues.savedFilters,editedFilter=_useValues.editedFilter,customFiltersLoading=_useValues.customFiltersLoading,closeEditFilter=Object(index_esm.useActions)(sessionsFiltersLogic.a).closeEditFilter,globalFilters=savedFilters.filter((function(_ref){return"global"===_ref.type})),customFilters=savedFilters.filter((function(_ref2){return"custom"===_ref2.type}));return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(menu.a,{className:"sessions-filters-menu",selectedKeys:activeFilter?[activeFilter.id.toString()]:void 0},react_default.a.createElement(menu.a.ItemGroup,{title:"Filters"},globalFilters.map((function(savedFilter){return react_default.a.createElement(menu.a.Item,{key:savedFilter.id.toString()},react_default.a.createElement(MenuLink,{key:savedFilter.id,filter:savedFilter,icon:ICONS[savedFilter.id]||react_default.a.createElement(FilterOutlined.a,null)}))}))),customFiltersLoading?react_default.a.createElement(skeleton.a,{paragraph:{rows:1},active:!0}):customFilters.length>0&&react_default.a.createElement(menu.a.ItemGroup,{title:"Custom filters"},customFilters.map((function(savedFilter){return react_default.a.createElement(menu.a.Item,{key:savedFilter.id.toString()},react_default.a.createElement(MenuLink,{filter:savedFilter,icon:react_default.a.createElement(FilterOutlined.a,null),editable:!0}))})))),!!editedFilter&&react_default.a.createElement(Drawer.a,{title:null!==editedFilter.id?"Update filters":"Save filters",onClose:closeEditFilter,visible:!!editedFilter,destroyOnClose:!0},react_default.a.createElement(SaveFilter,{filter:editedFilter})))}function MenuLink(_ref3){var filter=_ref3.filter,icon=_ref3.icon,editable=_ref3.editable,openEditFilter=Object(index_esm.useActions)(sessionsFiltersLogic.a).openEditFilter;return react_default.a.createElement(Link.a,{to:"/sessions?".concat(Object(utils.nb)(_objectSpread(_objectSpread({},lib.router.values.searchParams),{},{filters:filter.filters.properties}))),"data-attr":"sessions-filter-link"},react_default.a.createElement("span",null,icon," ",filter.name),editable&&react_default.a.createElement(es_button.a,{onClick:function handleEdit(event){event.stopPropagation(),event.preventDefault(),openEditFilter(filter)},icon:react_default.a.createElement(EditOutlined.a,null),className:"edit-filter-button"}))}var PageHeader=__webpack_require__(208),divider=__webpack_require__(5468);function Sessions(){return react_default.a.createElement("div",{className:"sessions-wrapper"},react_default.a.createElement("div",{className:"sessions-sidebar"},react_default.a.createElement("div",null,react_default.a.createElement(PageHeader.a,{title:"Sessions"}),react_default.a.createElement(SavedFiltersMenu,null)),react_default.a.createElement(divider.a,{type:"vertical",className:"sessions-divider"})),react_default.a.createElement("div",{className:"sessions-with-filters"},react_default.a.createElement(SessionsView.b,{key:"global"})))}}}]);