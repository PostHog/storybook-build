(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(Y,R,e){"use strict";e.r(R),e.d(R,"SessionsRecordings",function(){return k}),e.d(R,"scene",function(){return ye});var L=e("./node_modules/core-js/modules/es.array.map.js"),T=e("./node_modules/core-js/modules/es.object.values.js"),A=e("./frontend/src/lib/components/PageHeader.tsx"),C=e("./frontend/src/scenes/teamLogic.tsx"),o=e("./node_modules/kea/lib/index.esm.js"),j=e("./frontend/src/scenes/urls.ts"),M=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),$=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),I=e("./frontend/src/lib/components/AlertMessage/index.ts"),p=e("./frontend/@posthog/lemon-ui/src/index.ts"),H=e("./frontend/src/lib/logic/featureFlagLogic.ts"),z=e("./frontend/src/lib/constants.tsx"),J=e("./node_modules/antd/es/tabs/index.js"),b=e("./frontend/src/types.ts"),q=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_=e.n(q),be=e("./node_modules/core-js/modules/es.symbol.js"),pe=e("./node_modules/core-js/modules/es.symbol.description.js"),he=e("./node_modules/core-js/modules/es.function.name.js"),Oe=e("./node_modules/core-js/modules/es.regexp.exec.js"),Pe=e("./node_modules/core-js/modules/es.string.search.js"),Se=e("./node_modules/core-js/modules/es.array.concat.js"),ee=e("./node_modules/react/index.js"),xe=e("./node_modules/core-js/modules/es.object.keys.js"),Re=e("./node_modules/core-js/modules/es.array.filter.js"),Fe=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Le=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Te=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),se=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),B=e.n(se),ne=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),V=e.n(ne),te=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),E=e.n(te),re=e("./node_modules/@babel/runtime/regenerator/index.js"),x=e.n(re),Ne=e("./node_modules/core-js/modules/es.array.iterator.js"),Ae=e("./node_modules/core-js/modules/es.object.to-string.js"),Ce=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ie=e("./node_modules/core-js/modules/es.string.starts-with.js"),Ee=e("./node_modules/core-js/modules/es.array.slice.js"),W=e("./node_modules/kea-loaders/lib/index.js"),Z=e("./frontend/src/lib/api.ts"),F=e("./frontend/src/lib/utils.tsx"),h=e("./node_modules/kea-router/lib/index.js");function Q(n,s){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);s&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,a)}return t}function X(n){for(var s=1;s<arguments.length;s++){var t=arguments[s]!=null?arguments[s]:{};s%2?Q(Object(t),!0).forEach(function(a){V()(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}var U=30,ae={createdBy:"All users",page:1},oe=Object(o.kea)([Object(o.path)(["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic"]),Object(o.props)({}),Object(o.key)(function(n){return n.tab}),Object(o.actions)(function(){return{setSavedPlaylistsFilters:function(s){return{filters:s}},loadPlaylists:!0}}),Object(o.reducers)(function(n){return E()(n),{filters:[ae,{setSavedPlaylistsFilters:function(t,a){var l=a.filters;return Object(F.ob)(X(X(X({},t||{}),l),"page"in l?{}:{page:1}))}}]}}),Object(W.loaders)(function(n){var s=n.values;return{playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:function(){var t=B()(x.a.mark(function l(i,c){var v,u,O,g,y,P,S,f;return x.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s.playlists.filters===null){m.next=3;break}return m.next=3,c(300);case 3:return y=X({},s.filters),P=y.createdBy==="All users"?void 0:y.createdBy,S={limit:U,offset:Math.max(0,(y.page-1)*U),order:(v=y.order)!==null&&v!==void 0?v:"-last_modified_at",created_by:P!=null?P:void 0,search:(u=y.search)!==null&&u!==void 0?u:void 0,date_from:(O=y.dateFrom)!==null&&O!==void 0?O:"all",date_to:(g=y.dateTo)!==null&&g!==void 0?g:void 0,pinned:y.pinned?!0:void 0},m.next=8,Z.b.recordings.listPlaylists(Object(F.Fb)(S));case 8:return f=m.sent,m.abrupt("return",f);case 10:case"end":return m.stop()}},l)}));function a(l,i){return t.apply(this,arguments)}return a}()}}}),Object(o.listeners)(function(n){var s=n.actions;return{setSavedPlaylistsFilters:function(){s.loadPlaylists()}}}),Object(o.selectors)(function(n){var s=n.actions;return{sorting:[function(t){return[t.filters]},function(t){return t.order?t.order.startsWith("-")?{columnKey:t.order.slice(1),order:-1}:{columnKey:t.order,order:1}:{columnKey:"last_modified_at",order:-1}}],pagination:[function(t){return[t.filters,t.playlists]},function(t,a){return{controlled:!0,pageSize:U,currentPage:t.page,entryCount:a.count,onBackward:a.previous?function(){return s.setSavedPlaylistsFilters({page:t.page-1})}:void 0,onForward:a.next?function(){return s.setSavedPlaylistsFilters({page:t.page+1})}:void 0}}]}}),Object(h.actionToUrl)(function(n){var s=n.values,t=function(){if(h.router.values.location.pathname===j.a.sessionRecordings(b.X.Playlists)){var l=s.filters,i=Object(F.ob)(h.router.values.searchParams);if(!Object(F.qb)(l,i))return[j.a.sessionRecordings(b.X.Playlists),l,{},{replace:!1}]}};return{loadPlaylists:t,setSavedPlaylistsFilters:t}}),Object(h.urlToAction)(function(n){var s=n.actions,t=n.values;return V()({},j.a.sessionRecordings(b.X.Playlists),function(){var a=B()(x.a.mark(function l(i,c){var v,u;return x.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:v=t.filters,u=Object(F.ob)(c),Object(F.qb)(v,u)||s.setSavedPlaylistsFilters(u);case 3:case"end":return g.stop()}},l)}));return function(l,i){return a.apply(this,arguments)}}())}),Object(o.afterMount)(function(n){var s=n.actions;s.loadPlaylists()})]),le=e("./node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),ie=e("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),ce=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),de=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),ue=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),me=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),je=e("./frontend/@posthog/apps-common/src/index.ts"),r=e("./node_modules/react/jsx-runtime.js");function K(n){var s=n.tab,t=oe({tab:s}),a=Object(o.useValues)(t),l=a.playlists,i=a.playlistsLoading,c=a.filters,v=a.sorting,u=a.pagination,O=Object(o.useActions)(t),g=O.setSavedPlaylistsFilters,y=Object(o.useValues)(me.a),P=y.meFirstMembers,S=[{title:"Name",dataIndex:"name",render:function(d,m){var D=m.short_id,N=m.description;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(p.Link,{className:"font-semibold",to:j.a.sessionRecordingPlaylist(D),children:d||"Untitled"}),N?Object(r.jsx)("div",{className:"truncate",children:N}):null]})},sorter:function(d,m){var D,N;return((D=d.name)!==null&&D!==void 0?D:"Untitled").localeCompare((N=m.name)!==null&&N!==void 0?N:"Untitled")}},{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",render:function(d){return Object(r.jsx)("div",{children:d&&typeof d=="string"&&Object(r.jsx)(je.TZLabel,{time:d})})}},Object(de.b)()];return Object(r.jsxs)("div",{className:"space-y-4",children:[Object(r.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(r.jsx)(p.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:function(d){return g({search:d})},value:c.search||""}),Object(r.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(r.jsx)("div",{className:"flex items-center gap-2",children:Object(r.jsx)(p.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:c.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:function(){return g({pinned:!c.pinned})},icon:Object(ee.cloneElement)(c.pinned?Object(r.jsx)(le.a,{}):Object(r.jsx)(ie.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(r.jsxs)("div",{className:"flex items-center gap-2",children:[Object(r.jsx)("span",{children:"Last modified:"}),Object(r.jsx)(ue.a,{disabled:!1,dateFrom:c.dateFrom,dateTo:c.dateTo,onChange:function(d,m){return g({dateFrom:d,dateTo:m!=null?m:void 0})},makeLabel:function(d){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ce.a,{}),Object(r.jsxs)("span",{className:"hide-when-small",children:[" ",d]})]})}})]}),Object(r.jsxs)("div",{className:"flex items-center gap-2",children:[Object(r.jsx)("span",{children:"Created by:"}),Object(r.jsx)(p.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"}].concat(_()(P.map(function(f){return{value:f.user.id,label:f.user.first_name}}))),value:c.createdBy,onChange:function(d){g({createdBy:d})},dropdownMatchSelectWidth:!1})]})]})]}),Object(r.jsx)(p.LemonTable,{loading:i,columns:S,dataSource:l.results,pagination:u,noSortingCancellation:!0,sorting:v,onSort:function(d){return g({order:d?"".concat(d.order===-1?"-":"").concat(d.columnKey):void 0})},rowKey:"id",loadingSkeletonRows:U,nouns:["playlist","playlists"]})]})}try{K.displayName="SavedSessionRecordingPlaylists",K.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:K.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(n){}var fe=e("./frontend/src/lib/components/Tooltip.tsx"),De=e("./node_modules/core-js/modules/es.string.replace.js"),w=function(s){switch(s){case b.X.Recent:return"Recent Recordings";case b.X.Playlists:return"Saved Playlists";default:return Object(F.i)(s)}},G=Object(o.kea)([Object(o.path)(function(){return["scenes","session-recordings","root"]}),Object(o.connect)({values:[H.a,["featureFlags"]]}),Object(o.actions)({setTab:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.X.Recent;return{tab:s}},saveNewPlaylist:function(s){return{playlist:s}}}),Object(o.reducers)(function(n){return E()(n),{tab:[b.X.Recent,{setTab:function(t,a){var l=a.tab;return l}}]}}),Object(W.loaders)(function(n){return E()(n),{newPlaylist:[null,{saveNewPlaylist:function(){var s=B()(x.a.mark(function a(l){var i,c;return x.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=l.playlist,u.next=3,Z.b.recordings.createPlaylist(i);case 3:return c=u.sent,u.abrupt("return",c);case 5:case"end":return u.stop()}},a)}));function t(a){return s.apply(this,arguments)}return t}()}]}}),Object(o.listeners)(function(n){return E()(n),{saveNewPlaylistSuccess:function(){var s=B()(x.a.mark(function a(l){var i;return x.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:i=l.newPlaylist,h.router.actions.push(j.a.sessionRecordingPlaylist(i.short_id));case 2:case"end":return v.stop()}},a)}));function t(a){return s.apply(this,arguments)}return t}()}}),Object(h.actionToUrl)(function(n){var s=n.values;return{setTab:function(){return[j.a.sessionRecordings(s.tab),h.router.values.searchParams]}}}),Object(o.selectors)(function(n){return E()(n),{breadcrumbs:[function(s){return[s.tab]},function(s){return[{name:w(s)}]}]}}),Object(h.urlToAction)(function(n){var s,t=n.actions,a=n.values;return s={},V()(s,j.a.sessionRecordings(),function(){!a.featureFlags[z.h.RECORDING_PLAYLISTS]||h.router.actions.replace(j.a.sessionRecordings(b.X.Recent))}),V()(s,"/recordings/:tab",function(i){var c=i.tab;!a.featureFlags[z.h.RECORDING_PLAYLISTS]||c!==a.tab&&t.setTab(c)}),s})]),ve=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),ge=e("./frontend/src/lib/components/icons.tsx");function k(){var n=Object(o.useValues)(C.a),s=n.currentTeam,t=Object(o.useValues)(H.a),a=t.featureFlags,l=Object(o.useValues)(G),i=l.tab,c=l.newPlaylistLoading,v=Object(o.useActions)(G),u=v.saveNewPlaylist,O=!!a[z.h.RECORDING_PLAYLISTS],g=Object(o.useValues)(Object(M.c)({key:"recents",updateSearchParams:!0})),y=g.filters,P=Object(r.jsx)(r.Fragment,{children:Object(r.jsx)($.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0})});return Object(r.jsxs)("div",{children:[Object(r.jsx)(A.a,{title:Object(r.jsx)("div",{children:"Session Recordings"}),buttons:O&&i===b.X.Recent?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(fe.a,{title:"Save the currently filters as a dynamic playlist",placement:"left",children:Object(r.jsx)(p.LemonButton,{type:"primary",onClick:function(){return u({filters:y})},disabled:c,"data-attr":"save-recordings-playlist-button",icon:Object(r.jsx)(ge.IconPlus,{}),children:"Save as playlist"})})}):void 0}),O&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(J.a,{activeKey:i,animated:!1,style:{borderColor:"#D9D9D9"},onChange:function(f){return h.router.actions.push(j.a.sessionRecordings(f))},children:Object.values(b.X).map(function(S){return Object(r.jsx)(J.a.TabPane,{tab:w(S)},S)})})}),s&&!(s!=null&&s.session_recording_opt_in)?Object(r.jsx)("div",{className:"mb-4",children:Object(r.jsxs)(I.a,{type:"info",children:["Session recordings are currently disabled for this project. To use this feature, please go to your ",Object(r.jsx)(p.Link,{to:"".concat(j.a.projectSettings(),"#recordings"),children:"project settings"})," and enable it."]})}):null,O?i?i===b.X.Recent?P:Object(r.jsx)(K,{tab:b.X.Playlists}):Object(r.jsx)(ve.a,{}):P]})}var ye={component:k,logic:G}},"./node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(Y,R,e){"use strict";var L=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),T=e("./node_modules/react/index.js"),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},C=A,o=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),j=function(I,p){return T.createElement(o.a,Object(L.a)(Object(L.a)({},I),{},{ref:p,icon:C}))};j.displayName="PushpinFilled";var M=R.a=T.forwardRef(j)},"./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(Y,R,e){"use strict";var L=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),T=e("./node_modules/react/index.js"),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},C=A,o=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),j=function(I,p){return T.createElement(o.a,Object(L.a)(Object(L.a)({},I),{},{ref:p,icon:C}))};j.displayName="PushpinOutlined";var M=R.a=T.forwardRef(j)}}]);
