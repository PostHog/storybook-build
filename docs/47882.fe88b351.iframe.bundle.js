"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[47882],{"./frontend/src/scenes/plugins/edit/PluginDrawer.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{e:function(){return PluginDrawer}});var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),pluginsLogic=__webpack_require__("./frontend/src/scenes/plugins/pluginsLogic.ts"),es_switch=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/switch/index.js"),es_form=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/form/index.js"),space=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/space/index.js"),popconfirm=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/popconfirm/index.js"),es_button=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/button/index.js"),tag=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/tag/index.js"),LockFilled=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/LockFilled.js"),DeleteOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/DeleteOutlined.js"),RollbackOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/RollbackOutlined.js"),GlobalOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),CodeOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/CodeOutlined.js"),userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),PluginImage=__webpack_require__("./frontend/src/scenes/plugins/plugin/PluginImage.tsx"),Drawer=__webpack_require__("./frontend/src/lib/components/Drawer.tsx"),LocalPluginTag=__webpack_require__("./frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx"),utils=__webpack_require__("./frontend/src/scenes/plugins/utils.ts"),react_markdown=__webpack_require__("./node_modules/.pnpm/react-markdown@5.0.3_@types+react@16.14.34_react@16.14.0/node_modules/react-markdown/lib/react-markdown.js"),react_markdown_default=__webpack_require__.n(react_markdown),SourcePluginTag=__webpack_require__("./frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx"),PluginSource=__webpack_require__("./frontend/src/scenes/plugins/source/PluginSource.tsx"),upload=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/upload/index.js"),UploadOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/UploadOutlined.js"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function UploadField(_ref){let{value:value,onChange:onChange}=_ref;return(0,jsx_runtime.jsx)(upload.Z,{multiple:!1,fileList:value?.size?[value]:[],beforeUpload:file=>(onChange?.(file),!1),onRemove:()=>(onChange?.(null),!1),className:"ph-ignore-input",children:(0,jsx_runtime.jsx)(es_button.Z,{icon:(0,jsx_runtime.jsx)(UploadOutlined.Z,{}),children:"Click to upload"})})}try{UploadField.displayName="UploadField",UploadField.__docgenInfo={description:"",displayName:"UploadField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"UploadFile<any> | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((file?: UploadFile<any> | null) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/UploadField.tsx#UploadField"]={docgenInfo:UploadField.__docgenInfo,name:"UploadField",path:"frontend/src/scenes/plugins/edit/UploadField.tsx#UploadField"})}catch(__react_docgen_typescript_loader_error){}var input=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/input/index.js"),es_select=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/select/index.js"),EditOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/EditOutlined.js"),AutoSizer=__webpack_require__("./node_modules/.pnpm/react-virtualized@9.22.5_react-dom@16.14.0_react@16.14.0/node_modules/react-virtualized/dist/es/AutoSizer/index.js"),CodeEditors=__webpack_require__("./frontend/src/lib/components/CodeEditors.tsx");function JsonConfigField(props){return(0,jsx_runtime.jsx)(AutoSizer.q,{disableWidth:!0,className:"min-h-60",children:_ref=>{let{height:height}=_ref;return(0,jsx_runtime.jsx)(CodeEditors.p,{className:"border",language:"json",value:props.value,onChange:v=>props.onChange(null!=v?v:""),height:height,options:{minimap:{enabled:!1}}})}})}function PluginField(_ref2){let{value:value,onChange:onChange,fieldConfig:fieldConfig}=_ref2;const[editingSecret,setEditingSecret]=(0,react.useState)(!1);return!fieldConfig.secret||editingSecret||!value||value!==utils.ue&&value.name!==utils.ue?"attachment"===fieldConfig.type?(0,jsx_runtime.jsx)(UploadField,{value:value,onChange:onChange}):"string"===fieldConfig.type?(0,jsx_runtime.jsx)(input.Z,{value:value,onChange:onChange,autoFocus:editingSecret,className:"ph-no-capture"}):"json"===fieldConfig.type?(0,jsx_runtime.jsx)(JsonConfigField,{value:value,onChange:onChange,autoFocus:editingSecret,className:"ph-no-capture"}):"choice"===fieldConfig.type?(0,jsx_runtime.jsx)(es_select.Z,{dropdownMatchSelectWidth:!1,value:value,className:"ph-no-capture",onChange:onChange,showSearch:!0,children:fieldConfig.choices.map((choice=>(0,jsx_runtime.jsx)(es_select.Z.Option,{value:choice,children:choice},choice)))}):(0,jsx_runtime.jsxs)("strong",{style:{color:"var(--danger)"},children:['Unknown field type "',(0,jsx_runtime.jsx)("code",{children:fieldConfig.type}),'".',(0,jsx_runtime.jsx)("br",{}),"You may need to upgrade PostHog!"]}):(0,jsx_runtime.jsxs)(es_button.Z,{icon:(0,jsx_runtime.jsx)(EditOutlined.Z,{}),onClick:()=>{onChange(fieldConfig.default||""),setEditingSecret(!0)},children:["Reset secret ","attachment"===fieldConfig.type?"attachment":"field"]})}try{PluginField.displayName="PluginField",PluginField.__docgenInfo={description:"",displayName:"PluginField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: any) => void"}},fieldConfig:{defaultValue:null,description:"",name:"fieldConfig",required:!0,type:{name:"PluginConfigSchema"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/PluginField.tsx#PluginField"]={docgenInfo:PluginField.__docgenInfo,name:"PluginField",path:"frontend/src/scenes/plugins/edit/PluginField.tsx#PluginField"})}catch(__react_docgen_typescript_loader_error){}var lib_utils=__webpack_require__("./frontend/src/lib/utils.tsx"),access=__webpack_require__("./frontend/src/scenes/plugins/access.ts"),preflightLogic=__webpack_require__("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx");const capabilitiesInfo={processEvent:"Read + modify access to events before ingestion",processEventBatch:"Read + modify access to events before ingestion, in batches",onEvent:"Read-only access to events",exportEvents:"Read-only access to events, optimized for export",runEveryMinute:"Runs a task every minute",runEveryHour:"Runs a task every hour",runEveryDay:"Runs a task every day"};var Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),PluginJobConfiguration=__webpack_require__("./frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx"),featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx");function PluginJobOptions(_ref){let{pluginId:pluginId,pluginConfigId:pluginConfigId,capabilities:capabilities,publicJobs:publicJobs,onSubmit:onSubmit}=_ref;const{featureFlags:featureFlags}=(0,index_esm.useValues)(featureFlagLogic.h),jobs=(0,react.useMemo)((()=>(capabilities?.jobs||[]).filter((jobName=>jobName in publicJobs)).filter((jobName=>(jobName!==PluginJobConfiguration.$f||!featureFlags[constants.y8.HISTORICAL_EXPORTS_V2])&&!(jobName===PluginJobConfiguration._F&&!featureFlags[constants.y8.HISTORICAL_EXPORTS_V2])))),[capabilities,publicJobs,featureFlags]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("h3",{className:"l3 mt-8",children:["Jobs",(0,jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase",style:{verticalAlign:"0.125em",marginLeft:6},children:"BETA"})]}),jobs.map((jobName=>(0,jsx_runtime.jsx)("div",{children:jobName.includes("Export historical events")?(0,jsx_runtime.jsxs)("i",{children:["Currently unavailable, see"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://github.com/PostHog/posthog/issues/15997",children:"GitHub issue"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("i",{children:jobName}),(0,jsx_runtime.jsx)(PluginJobConfiguration.QZ,{jobName:jobName,jobSpec:publicJobs[jobName],pluginConfigId:pluginConfigId,pluginId:pluginId,onSubmit:onSubmit})]})},jobName)))]})}try{PluginJobOptions.displayName="PluginJobOptions",PluginJobOptions.__docgenInfo={description:"",displayName:"PluginJobOptions",props:{pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}},pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}},capabilities:{defaultValue:null,description:"",name:"capabilities",required:!0,type:{name:'Record<"jobs" | "methods" | "scheduled_tasks", string[] | undefined>'}},publicJobs:{defaultValue:null,description:"",name:"publicJobs",required:!0,type:{name:"Record<string, JobSpec>"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/interface-jobs/PluginJobOptions.tsx#PluginJobOptions"]={docgenInfo:PluginJobOptions.__docgenInfo,name:"PluginJobOptions",path:"frontend/src/scenes/plugins/edit/interface-jobs/PluginJobOptions.tsx#PluginJobOptions"})}catch(__react_docgen_typescript_loader_error){}function EnabledDisabledSwitch(_ref){let{value:value,onChange:onChange}=_ref;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(es_switch.Z,{checked:value,onChange:onChange}),(0,jsx_runtime.jsx)("strong",{className:"pl-2.5",children:value?"Enabled":"Disabled"})]})}window.process=constants.TH;const SecretFieldIcon=()=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Tooltip.u,{placement:"topLeft",title:"This is a secret write-only field. Its value is not available after saving.",children:(0,jsx_runtime.jsx)(LockFilled.Z,{style:{marginRight:5}})})});function PluginDrawer(){const{user:user}=(0,index_esm.useValues)(userLogic.userLogic),{preflight:preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic),{editingPlugin:editingPlugin,loading:loading,editingSource:editingSource,editingPluginInitialChanges:editingPluginInitialChanges}=(0,index_esm.useValues)(pluginsLogic.C),{editPlugin:editPlugin,savePluginConfig:savePluginConfig,uninstallPlugin:uninstallPlugin,setEditingSource:setEditingSource,generateApiKeysIfNeeded:generateApiKeysIfNeeded,patchPlugin:patchPlugin,showPluginLogs:showPluginLogs}=(0,index_esm.useActions)(pluginsLogic.C),[form]=es_form.Z.useForm(),[invisibleFields,setInvisibleFields]=(0,react.useState)([]),[requiredFields,setRequiredFields]=(0,react.useState)([]);(0,react.useEffect)((()=>{editingPlugin?(form.setFieldsValue({...editingPlugin.pluginConfig.config||(0,utils.NM)(editingPlugin),__enabled:editingPlugin.pluginConfig.enabled,...editingPluginInitialChanges}),generateApiKeysIfNeeded(form)):form.resetFields(),updateInvisibleAndRequiredFields()}),[editingPlugin?.id,editingPlugin?.config_schema]);const updateInvisibleAndRequiredFields=()=>{determineAndSetInvisibleFields(),determineAndSetRequiredFields()},determineAndSetInvisibleFields=()=>{const fieldsToSetAsInvisible=[];for(const field of Object.values((0,utils.fN)(editingPlugin?.config_schema||{}))){if(!field.visible_if||!field.key)continue;field.visible_if.every((_ref2=>{let[targetFieldName,targetFieldValue]=_ref2;return(0,utils.rk)(form,targetFieldName,targetFieldValue)}))||fieldsToSetAsInvisible.push(field.key)}setInvisibleFields(fieldsToSetAsInvisible)},determineAndSetRequiredFields=()=>{const fieldsToSetAsRequired=[];for(const field of Object.values((0,utils.fN)(editingPlugin?.config_schema||{}))){if(!field.required_if||!Array.isArray(field.required_if)||!field.key)continue;field.required_if.every((_ref3=>{let[targetFieldName,targetFieldValue]=_ref3;return(0,utils.rk)(form,targetFieldName,targetFieldValue)}))&&fieldsToSetAsRequired.push(field.key)}setRequiredFields(fieldsToSetAsRequired)},isValidField=fieldConfig=>"choice"!==fieldConfig.type||(fieldConfig=>Array.isArray(fieldConfig.choices)&&!!fieldConfig.choices.length&&!fieldConfig.choices.find((c=>"string"!=typeof c))&&!fieldConfig.secret)(fieldConfig);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Drawer.d,{forceRender:!0,visible:!!editingPlugin,onClose:()=>editPlugin(null),width:"min(90vw, 500px)",title:editingPlugin?.name,"data-attr":"plugin-drawer",footer:(0,jsx_runtime.jsxs)("div",{className:"flex",children:[(0,jsx_runtime.jsxs)(space.Z,{style:{flexGrow:1},children:[editingPlugin&&!editingPlugin.is_global&&(0,access.FZ)(user?.organization,editingPlugin.organization_id)&&(0,jsx_runtime.jsx)(popconfirm.Z,{placement:"topLeft",title:"Are you sure you wish to uninstall this app completely?",onConfirm:()=>uninstallPlugin(editingPlugin.name),okText:"Uninstall",cancelText:"Cancel",className:"plugins-popconfirm",children:(0,jsx_runtime.jsx)(es_button.Z,{style:{color:"var(--danger)",padding:4},type:"text",icon:(0,jsx_runtime.jsx)(DeleteOutlined.Z,{}),"data-attr":"plugin-uninstall",children:"Uninstall"})}),preflight?.cloud&&editingPlugin&&(0,access.YU)(user?.organization)&&(editingPlugin.is_global?(0,jsx_runtime.jsx)(Tooltip.u,{title:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["This app can currently be used by other organizations in this instance of PostHog. This action will ",(0,jsx_runtime.jsx)("b",{children:"disable and hide it"})," for all organizations other than yours."]}),children:(0,jsx_runtime.jsx)(es_button.Z,{type:"text",icon:(0,jsx_runtime.jsx)(RollbackOutlined.Z,{}),onClick:()=>patchPlugin(editingPlugin.id,{is_global:!1}),style:{padding:4},children:"Make local"})}):(0,jsx_runtime.jsx)(Tooltip.u,{title:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["This action will mark this app as installed for ",(0,jsx_runtime.jsx)("b",{children:"all organizations"})," ","in this instance of PostHog."]}),children:(0,jsx_runtime.jsx)(es_button.Z,{type:"text",icon:(0,jsx_runtime.jsx)(GlobalOutlined.Z,{}),onClick:()=>patchPlugin(editingPlugin.id,{is_global:!0}),style:{padding:4},children:"Make global"})}))]}),(0,jsx_runtime.jsxs)(space.Z,{children:[(0,jsx_runtime.jsx)(es_button.Z,{onClick:()=>editPlugin(null),"data-attr":"plugin-drawer-cancel",children:"Cancel"}),(0,jsx_runtime.jsx)(es_button.Z,{type:"primary",loading:loading,onClick:form.submit,"data-attr":"plugin-drawer-save",children:"Save"})]})]}),children:(0,jsx_runtime.jsx)(es_form.Z,{form:form,layout:"vertical",name:"basic",onFinish:savePluginConfig,children:editingPlugin?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"flex mb-4",children:[(0,jsx_runtime.jsx)(PluginImage.c,{pluginType:editingPlugin.plugin_type,url:editingPlugin.url,icon:editingPlugin.icon,size:"large"}),(0,jsx_runtime.jsxs)("div",{className:"grow pl-4",children:[(0,lib_utils.ne)(editingPlugin.description),(0,jsx_runtime.jsxs)("div",{className:"mt-1.5",children:["local"===editingPlugin?.plugin_type&&editingPlugin.url?(0,jsx_runtime.jsx)(LocalPluginTag.e,{url:editingPlugin.url,title:"Installed Locally"}):"source"===editingPlugin.plugin_type?(0,jsx_runtime.jsx)(SourcePluginTag.Q,{}):null,editingPlugin.url&&(0,jsx_runtime.jsx)("a",{href:editingPlugin.url,children:(0,jsx_runtime.jsx)("i",{children:"â¤· Learn more"})})]}),(0,jsx_runtime.jsx)("div",{className:"flex items-center mt-1.5",children:(0,jsx_runtime.jsx)(es_form.Z.Item,{fieldKey:"__enabled",name:"__enabled",style:{display:"inline-block",marginBottom:0},"data-attr":"plugin-enabled-switch",children:(0,jsx_runtime.jsx)(EnabledDisabledSwitch,{})})})]})]}),"source"===editingPlugin.plugin_type&&(0,access.YU)(user?.organization)?(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(es_button.Z,{type:editingSource?"default":"primary",icon:(0,jsx_runtime.jsx)(CodeOutlined.Z,{}),onClick:()=>setEditingSource(!editingSource),"data-attr":"plugin-edit-source",children:"Edit source"})}):null,editingPlugin.capabilities&&Object.keys(editingPlugin.capabilities).length>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h3",{className:"l3 mt-8",children:"Capabilities"}),(0,jsx_runtime.jsxs)("div",{className:"mt-1.5",children:[[...editingPlugin.capabilities.methods||[],...editingPlugin.capabilities.scheduled_tasks||[]].filter((capability=>!["setupPlugin","teardownPlugin"].includes(capability))).map((capability=>(0,jsx_runtime.jsx)(Tooltip.u,{title:capabilitiesInfo[capability]||"",children:(0,jsx_runtime.jsx)(tag.Z,{className:"plugin-capabilities-tag",children:capability})},capability))),(editingPlugin.capabilities?.jobs||[]).map((jobName=>(0,jsx_runtime.jsx)(Tooltip.u,{title:"Custom job",children:(0,jsx_runtime.jsx)(tag.Z,{className:"plugin-capabilities-tag",children:jobName})},jobName)))]})]}):null,!!(editingPlugin.pluginConfig.id&&editingPlugin.capabilities?.jobs?.length&&editingPlugin.public_jobs&&Object.keys(editingPlugin.public_jobs).length)&&(0,jsx_runtime.jsx)(PluginJobOptions,{pluginId:editingPlugin.id,pluginConfigId:editingPlugin.pluginConfig.id,capabilities:editingPlugin.capabilities,publicJobs:editingPlugin.public_jobs,onSubmit:()=>showPluginLogs(editingPlugin.id)}),(0,jsx_runtime.jsx)("h3",{className:"l3 mt-8",children:"Configuration"}),0===(0,utils.fN)(editingPlugin.config_schema).length?(0,jsx_runtime.jsx)("div",{children:"This app is not configurable."}):null,(0,utils.fN)(editingPlugin.config_schema).map(((fieldConfig,index)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[fieldConfig.markdown&&(0,jsx_runtime.jsx)(react_markdown_default(),{source:fieldConfig.markdown,linkTarget:"_blank"}),fieldConfig.type&&isValidField(fieldConfig)?(0,jsx_runtime.jsx)(es_form.Z.Item,{hidden:!!fieldConfig.key&&invisibleFields.includes(fieldConfig.key),label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[fieldConfig.secret&&(0,jsx_runtime.jsx)(SecretFieldIcon,{}),fieldConfig.name||fieldConfig.key]}),extra:fieldConfig.hint&&(0,jsx_runtime.jsxs)("small",{children:[(0,jsx_runtime.jsx)("div",{className:"h-0.5"}),(0,jsx_runtime.jsx)(react_markdown_default(),{source:fieldConfig.hint,linkTarget:"_blank"})]}),name:fieldConfig.key,required:fieldConfig.required||!!fieldConfig.key&&requiredFields.includes(fieldConfig.key),rules:[{required:fieldConfig.required||!!fieldConfig.key&&requiredFields.includes(fieldConfig.key),message:"Please enter a value!"}],children:(0,jsx_runtime.jsx)(PluginField,{fieldConfig:fieldConfig,onChange:updateInvisibleAndRequiredFields})}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:fieldConfig.type?(0,jsx_runtime.jsxs)("p",{className:"text-danger",children:["Invalid config field ",(0,jsx_runtime.jsx)("i",{children:fieldConfig.name||fieldConfig.key}),"."]}):null})]},fieldConfig.key||`__key__${index}`)))]}):null})}),"source"===editingPlugin?.plugin_type&&editingPlugin.id?(0,jsx_runtime.jsx)(PluginSource.n,{visible:editingSource,close:()=>setEditingSource(!1),pluginId:editingPlugin.id,pluginConfigId:editingPlugin.pluginConfig?.id}):null]})}},"./frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{$f:function(){return HISTORICAL_EXPORT_JOB_NAME},CC:function(){return PluginJobModal},QZ:function(){return PluginJobConfiguration},_F:function(){return HISTORICAL_EXPORT_JOB_NAME_V2}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),_ant_design_icons__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),antd__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/tooltip/index.js"),antd__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/input-number/index.js"),antd__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/radio/index.js"),kea_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),lib_forms_Field__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/forms/Field.tsx"),kea__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_interfaceJobsLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/plugins/edit/interface-jobs/interfaceJobsLogic.ts"),lib_lemon_ui_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonModal/index.ts"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonCalendarRange_LemonCalendarRangeInline__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonCalendarRange/LemonCalendarRangeInline.tsx"),lib_dayjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/dayjs.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/utils.tsx"),lib_components_DatePicker__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/components/DatePicker.tsx"),lib_components_CodeEditors__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/components/CodeEditors.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const HISTORICAL_EXPORT_JOB_NAME="Export historical events",HISTORICAL_EXPORT_JOB_NAME_V2="Export historical events V2";function PluginJobConfiguration(props){const{jobName:jobName,jobSpec:jobSpec,pluginConfigId:pluginConfigId,pluginId:pluginId}=props,{playButtonOnClick:playButtonOnClick}=(0,kea__WEBPACK_IMPORTED_MODULE_3__.useActions)((0,_interfaceJobsLogic__WEBPACK_IMPORTED_MODULE_5__.D)(props)),{runJobAvailable:runJobAvailable}=(0,kea__WEBPACK_IMPORTED_MODULE_3__.useValues)((0,_interfaceJobsLogic__WEBPACK_IMPORTED_MODULE_5__.D)(props)),jobHasEmptyPayload=0===Object.keys(jobSpec.payload||{}).length,configureOrRunJobTooltip=runJobAvailable?jobHasEmptyPayload?"Run job":"Configure and run job":"You already ran this job recently.";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{className:"ml-1",onClick:()=>playButtonOnClick(jobHasEmptyPayload),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(antd__WEBPACK_IMPORTED_MODULE_15__.Z,{title:configureOrRunJobTooltip,children:jobHasEmptyPayload?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_16__.Z,{className:runJobAvailable?"plugin-run-job-button":"plugin-run-job-button-disabled"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_17__.Z,{className:runJobAvailable?"plugin-run-job-button":"plugin-run-job-button-disabled"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(PluginJobModal,{jobName:jobName,jobSpec:jobSpec,pluginConfigId:pluginConfigId,pluginId:pluginId})]})}function PluginJobModal(props){const{jobName:jobName,jobSpec:jobSpec}=props,{setIsJobModalOpen:setIsJobModalOpen,submitJobPayload:submitJobPayload}=(0,kea__WEBPACK_IMPORTED_MODULE_3__.useActions)((0,_interfaceJobsLogic__WEBPACK_IMPORTED_MODULE_5__.D)(props)),{isJobModalOpen:isJobModalOpen}=(0,kea__WEBPACK_IMPORTED_MODULE_3__.useValues)((0,_interfaceJobsLogic__WEBPACK_IMPORTED_MODULE_5__.D)(props)),{user:user}=(0,kea__WEBPACK_IMPORTED_MODULE_3__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_4__.userLogic),shownFields=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>Object.entries(jobSpec.payload||{}).filter((_ref=>{let[,options]=_ref;return!options.staff_only||user?.is_staff||user?.is_impersonated})).sort(((a,b)=>a[0].localeCompare(b[0])))),[jobSpec,user]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_7__.f,{isOpen:isJobModalOpen,onClose:()=>setIsJobModalOpen(!1),title:`Configuring job '${jobName}'`,footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_8__.Jp,{type:"secondary",className:"mr-2",onClick:()=>setIsJobModalOpen(!1),children:"Cancel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_8__.Jp,{"data-attr":"run-job",type:"primary",onClick:()=>submitJobPayload(),children:"Run job now"})]}),children:shownFields.length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(kea_forms__WEBPACK_IMPORTED_MODULE_1__.Form,{logic:_interfaceJobsLogic__WEBPACK_IMPORTED_MODULE_5__.D,props:props,formKey:"jobPayload",children:shownFields.map((_ref2=>{let[key,options]=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_forms_Field__WEBPACK_IMPORTED_MODULE_2__.g,{name:key,label:options.title||key,className:"mb-4",children:props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(FieldInput,{options:options,...props})},key)}))}):null})}function FieldInput(_ref3){let{options:options,value:value,onChange:onChange}=_ref3;switch(options.type){case"string":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_lemon_ui_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_6__.D,{value:value||"",onChange:onChange});case"number":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(antd__WEBPACK_IMPORTED_MODULE_18__.Z,{value:value,onChange:onChange});case"json":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_components_CodeEditors__WEBPACK_IMPORTED_MODULE_13__.p,{options:{codeLens:!1,lineNumbers:"off"},className:"plugin-job-json-editor",language:"json",height:200,value:value,onChange:onChange});case"boolean":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_19__.ZP.Group,{id:"propertyValue",buttonStyle:"solid",value:value,onChange:e=>onChange(e.target.value),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_19__.ZP.Button,{value:!0,defaultChecked:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_20__.Z,{})," True"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_19__.ZP.Button,{value:!1,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_21__.Z,{})," False"]})]});case"date":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_components_DatePicker__WEBPACK_IMPORTED_MODULE_12__.M,{popupStyle:{zIndex:1061},allowClear:!0,placeholder:"Choose a date",className:"retention-date-picker",suffixIcon:null,use12Hours:!0,showTime:!0,value:value?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(value):null,onChange:date=>onChange(date?.toISOString())});case"daterange":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"border rounded p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"pb-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(lib_lemon_ui_LemonCalendarRange_LemonCalendarRangeInline__WEBPACK_IMPORTED_MODULE_9__.S,{value:value?[(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(value[0]),(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(value[1])]:null,onChange:_ref4=>{let[rangeStart,rangeEnd]=_ref4;return onChange([rangeStart.format("YYYY-MM-DD"),rangeEnd.format("YYYY-MM-DD")])}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"border-t pt-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{className:"text-muted",children:"Selected period:"})," ",value?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{children:value[0]===value[1]?(0,lib_utils__WEBPACK_IMPORTED_MODULE_11__.p6)((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(value[0])):(0,lib_utils__WEBPACK_IMPORTED_MODULE_11__._Q)((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(value[0]),(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(value[1]))}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{className:"italic",children:"No period selected."})]})]})}}try{PluginJobConfiguration.displayName="PluginJobConfiguration",PluginJobConfiguration.__docgenInfo={description:"",displayName:"PluginJobConfiguration",props:{jobName:{defaultValue:null,description:"",name:"jobName",required:!0,type:{name:"string"}},jobSpec:{defaultValue:null,description:"",name:"jobSpec",required:!0,type:{name:"JobSpec"}},pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobConfiguration"]={docgenInfo:PluginJobConfiguration.__docgenInfo,name:"PluginJobConfiguration",path:"frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobConfiguration"})}catch(__react_docgen_typescript_loader_error){}try{PluginJobModal.displayName="PluginJobModal",PluginJobModal.__docgenInfo={description:"",displayName:"PluginJobModal",props:{jobName:{defaultValue:null,description:"",name:"jobName",required:!0,type:{name:"string"}},jobSpec:{defaultValue:null,description:"",name:"jobSpec",required:!0,type:{name:"JobSpec"}},pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobModal"]={docgenInfo:PluginJobModal.__docgenInfo,name:"PluginJobModal",path:"frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobModal"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/plugins/edit/interface-jobs/interfaceJobsLogic.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{D:function(){return interfaceJobsLogic}});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),kea_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),lib_lemon_ui_lemonToast__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/lemonToast.tsx"),lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/utils.tsx");const interfaceJobsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","plugins","edit","interface-jobs","interfaceJobsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)((props=>`${props.pluginId}_${props.jobName}`)),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setIsJobModalOpen:isOpen=>({isOpen:isOpen}),setRunJobAvailable:isAvailable=>({isAvailable:isAvailable}),runJob:form=>({form:form}),playButtonOnClick:jobHasEmptyPayload=>({jobHasEmptyPayload:jobHasEmptyPayload}),setRunJobAvailableTimeout:timeout=>({timeout:timeout})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({isJobModalOpen:[!1,{setIsJobModalOpen:(_,_ref)=>{let{isOpen:isOpen}=_ref;return isOpen}}],runJobAvailable:[!0,{setRunJobAvailable:(_,_ref2)=>{let{isAvailable:isAvailable}=_ref2;return isAvailable}}],runJobAvailableTimeout:[null,{setRunJobAvailableTimeout:(_,_ref3)=>{let{timeout:timeout}=_ref3;return timeout}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)((_ref4=>{let{actions:actions,values:values}=_ref4;return{playButtonOnClick:_ref5=>{let{jobHasEmptyPayload:jobHasEmptyPayload}=_ref5;values.runJobAvailable&&(jobHasEmptyPayload?actions.submitJobPayload():actions.setIsJobModalOpen(!0))}}})),(0,kea_forms__WEBPACK_IMPORTED_MODULE_1__.forms)((_ref6=>{let{actions:actions,props:props,values:values}=_ref6;return{jobPayload:{defaults:Object.fromEntries(Object.entries(props.jobSpec.payload||{}).filter((_ref7=>{let[,spec]=_ref7;return"default"in spec})).map((_ref8=>{let[key,spec]=_ref8;return[key,spec.default]}))),errors:payload=>{const errors={};for(const key of Object.keys(props.jobSpec.payload||{})){const spec=props.jobSpec.payload?.[key];spec?.required&&null==payload[key]?errors[key]="Please enter a value":"json"!=spec?.type||(0,lib_utils__WEBPACK_IMPORTED_MODULE_4__.XA)(payload[key])||(errors[key]="Please enter valid JSON")}return errors},submit:async payload=>{actions.setIsJobModalOpen(!1);try{await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.create(`api/plugin_config/${props.pluginConfigId}/job`,{job:{type:props.jobName,payload:payload}})}catch(error){return void lib_lemon_ui_lemonToast__WEBPACK_IMPORTED_MODULE_3__.UJ.error(`Enqueuing job "${props.jobName}" failed`)}props.onSubmit?.(),actions.setRunJobAvailable(!1),values.runJobAvailableTimeout&&clearTimeout(values.runJobAvailableTimeout);const timeout=window.setTimeout((()=>{actions.setRunJobAvailable(!0)}),15e3);actions.setRunJobAvailableTimeout(timeout),lib_lemon_ui_lemonToast__WEBPACK_IMPORTED_MODULE_3__.UJ.success("Job has been enqueued")}}}})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.events)((_ref9=>{let{values:values}=_ref9;return{beforeUnmount:()=>{values.runJobAvailableTimeout&&clearTimeout(values.runJobAvailableTimeout)}}}))])},"./frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{e:function(){return LocalPluginTag}});var antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/tag/index.js"),lib_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/utils.tsx"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function LocalPluginTag(_ref){let{url:url,title:title,style:style}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_1__.u,{title:url.substring(5),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(antd__WEBPACK_IMPORTED_MODULE_3__.Z,{color:"purple",onClick:async()=>await(0,lib_utils__WEBPACK_IMPORTED_MODULE_0__.vQ)(url.substring(5)),style:style,children:title||"Local App"})})}try{LocalPluginTag.displayName="LocalPluginTag",LocalPluginTag.__docgenInfo={description:"",displayName:"LocalPluginTag",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx#LocalPluginTag"]={docgenInfo:LocalPluginTag.__docgenInfo,name:"LocalPluginTag",path:"frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx#LocalPluginTag"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/plugins/plugin/PluginImage.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return PluginImage}});var utils=__webpack_require__("./frontend/src/lib/utils.tsx"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),CodeOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/CodeOutlined.js"),plugin_default=__webpack_require__.p+"images/plugin-default.e3e047768d82d1c3fe24fce102eaef18.svg",jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function PluginImage(_ref){let{url:url,icon:icon,pluginType:pluginType,size:size="medium"}=_ref;const[state,setState]=(0,react.useState)({image:plugin_default}),pixelSize="large"===size?100:60;return(0,react.useEffect)((()=>{if(icon)setState((state=>({...state,image:icon})));else if(url?.includes("github.com")){const{user:user,repo:repo,path:path}=(0,utils.iw)(url);setState({...state,image:`https://raw.githubusercontent.com/${user}/${repo}/${path||"main"}/logo.png`})}}),[url]),"source"===pluginType?(0,jsx_runtime.jsx)(CodeOutlined.Z,{style:{fontSize:pixelSize},className:"plugin-image"}):(0,jsx_runtime.jsx)("div",{className:"plugin-image",style:{width:pixelSize,height:pixelSize,backgroundImage:`url(${state.image})`,backgroundSize:"contain",backgroundRepeat:"no-repeat"},onError:()=>setState({...state,image:plugin_default})})}try{PluginImage.displayName="PluginImage",PluginImage.__docgenInfo={description:"",displayName:"PluginImage",props:{url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"string"}},pluginType:{defaultValue:null,description:"",name:"pluginType",required:!1,type:{name:"enum",value:[{value:'"local"'},{value:'"custom"'},{value:'"repository"'},{value:'"source"'}]}},size:{defaultValue:{value:"medium"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"medium"'},{value:'"large"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginImage.tsx#PluginImage"]={docgenInfo:PluginImage.__docgenInfo,name:"PluginImage",path:"frontend/src/scenes/plugins/plugin/PluginImage.tsx#PluginImage"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Q:function(){return SourcePluginTag}});var antd__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/tag/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function SourcePluginTag(_ref){let{title:title="Source Code",style:style}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_1__.Z,{style:style,children:title})}try{SourcePluginTag.displayName="SourcePluginTag",SourcePluginTag.__docgenInfo={description:"",displayName:"SourcePluginTag",props:{title:{defaultValue:{value:"Source Code"},description:"",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx#SourcePluginTag"]={docgenInfo:SourcePluginTag.__docgenInfo,name:"SourcePluginTag",path:"frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx#SourcePluginTag"})}catch(__react_docgen_typescript_loader_error){}}}]);