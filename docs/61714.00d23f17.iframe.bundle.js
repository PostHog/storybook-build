(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[61714],{"./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingFilters});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/UniversalFilters/UniversalFilters.tsx"),lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/components/UniversalFilters/universalFiltersLogic.ts"),scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/insights/filters/TestAccountFilter/index.ts"),_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingSceneLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ErrorTrackingFilters=_ref=>{let{showOrder=!0}=_ref,{dateRange,filterGroup,filterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_7__.H),{setDateRange,setFilterGroup,setFilterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_7__.H),{order}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_8__.D),{setOrder}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_8__.D);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z,{rootKey:"session-recordings",group:filterGroup,taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.Cohorts],onChange:filterGroup=>{setFilterGroup(filterGroup)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"divide-y bg-bg-light rounded border",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex flex-1 items-center space-x-2 px-2 py-1.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(RecordingsUniversalFilterGroup,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.AddFilterButton,{type:"secondary",size:"small"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex space-x-1 justify-between px-2 py-1.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex space-x-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__.f,{dateFrom:dateRange.date_from,dateTo:dateRange.date_to,onChange:(changedDateFrom,changedDateTo)=>{setDateRange({date_from:changedDateFrom,date_to:changedDateTo})},size:"small"}),showOrder&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonSelect,{onSelect:setOrder,onChange:setOrder,value:order,options:[{value:"last_seen",label:"Last seen"},{value:"first_seen",label:"First seen"},{value:"unique_occurrences",label:"Occurrences"},{value:"unique_users",label:"Users"},{value:"unique_sessions",label:"Sessions"}],size:"small"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_6__.z,{filters:{filter_test_accounts:filterTestAccounts},onChange:_ref2=>{let{filter_test_accounts}=_ref2;setFilterTestAccounts(filter_test_accounts||!1)},size:"small"})})]})]})})},RecordingsUniversalFilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),{replaceGroupValue,removeGroupValue}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),values=filterGroup.values;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:values.map((filter,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.Value,{index:index,filter:filter,onRemove:()=>removeGroupValue(index),onChange:value=>replaceGroupValue(index,value)},index))})}},"./frontend/src/scenes/error-tracking/ErrorTrackingGroupScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingGroupScene:()=>ErrorTrackingGroupScene,scene:()=>scene});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),ErrorTracking=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss"),ErrorTracking_default=__webpack_require__.n(ErrorTracking),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(ErrorTracking_default(),options),ErrorTracking_default().locals;var src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),lemon_ui_src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),EmptyMessage=__webpack_require__("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),ErrorDisplay=__webpack_require__("./frontend/src/lib/components/Errors/ErrorDisplay.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),Playlist=__webpack_require__("./frontend/src/lib/components/Playlist/Playlist.tsx"),SessionRecordingPreview=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingPreview.tsx"),ErrorTrackingFilters=__webpack_require__("./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),sceneTypes=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),errorTrackingLogic=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),queries=__webpack_require__("./frontend/src/scenes/error-tracking/queries.ts");let errorTrackingGroupSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","error-tracking","errorTrackingGroupSceneLogic",key]),(0,index_esm.props)({}),(0,index_esm.connect)({values:[errorTrackingLogic.H,["dateRange","filterTestAccounts","filterGroup"]]}),(0,lib.loaders)(_ref=>{let{props,values}=_ref;return{events:[[],{loadEvents:async()=>{let response=await api.ZP.query((0,queries.G)({group:props.id,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,filterGroup:values.filterGroup}));return response.results.map(r=>({id:r[0],properties:JSON.parse(r[1]),timestamp:r[2],person:r[3]}))}}]}}),(0,index_esm.selectors)({breadcrumbs:[(_,p)=>[p.id],id=>[{key:sceneTypes.x.ErrorTracking,name:"Error tracking",path:urls.j.errorTracking()},{key:[sceneTypes.x.ErrorTrackingGroup,id],name:id}]]}),(0,index_esm.afterMount)(_ref2=>{let{actions}=_ref2;actions.loadEvents()})]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:ErrorTrackingGroupScene,logic:errorTrackingGroupSceneLogic,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id}}};function ErrorTrackingGroupScene(){let{events,eventsLoading}=(0,index_esm.useValues)(errorTrackingGroupSceneLogic);return eventsLoading?(0,jsx_runtime.jsx)(lemon_ui_src.Spinner,{className:"self-align-center justify-self-center"}):events&&events.length>0?(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(ErrorTrackingFilters.n,{showOrder:!1}),(0,jsx_runtime.jsx)("div",{className:"ErrorTracking__group",children:(0,jsx_runtime.jsx)("div",{className:"h-full space-y-2",children:(0,jsx_runtime.jsx)(Playlist.g,{title:"Exceptions",sections:[{key:"exceptions",title:"Exceptions",items:events,render:ListItemException}],listEmptyState:(0,jsx_runtime.jsx)("div",{children:"Empty"}),content:_ref2=>{let{activeItem:event}=_ref2;return event?(0,jsx_runtime.jsx)("div",{className:"pl-2",children:(0,jsx_runtime.jsx)(ErrorDisplay.X,{eventProperties:event.properties})}):(0,jsx_runtime.jsx)(EmptyMessage.M,{title:"No exception selected",description:"Please select an exception from the list on the left"})}})})})]}):(0,jsx_runtime.jsx)(NotFound.T,{object:"exception"})}let ListItemException=_ref3=>{let{item:event,isActive}=_ref3,properties=["$browser","$device_type","$os"].flatMap(property=>{let value=event.properties[property],label=value;return"$device_type"===property&&(value=event.properties.$device_type||event.properties.$initial_device_type),{property,value,label}}).filter(property=>!!property.value);return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("cursor-pointer p-2 space-y-1",isActive&&"border-l-4 border-primary-3000"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center",children:[(0,jsx_runtime.jsx)(src.PersonDisplay,{person:event.person,withIcon:!0}),(0,jsx_runtime.jsx)(SessionRecordingPreview.D7,{recordingProperties:properties,iconClassNames:"text-muted"})]}),event.properties.$current_url&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted truncate",children:event.properties.$current_url}),(0,jsx_runtime.jsx)(src.TZLabel,{className:"overflow-hidden text-ellipsis text-xs text-muted shrink-0",time:event.timestamp,placement:"right",showPopover:!1})]})}},"./frontend/src/scenes/error-tracking/errorTrackingLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>errorTrackingLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/types.ts");let errorTrackingLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setDateRange:dateRange=>({dateRange}),setOrder:order=>({order}),setFilterGroup:filterGroup=>({filterGroup}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({dateRange:[{date_from:"-7d",date_to:null},{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],order:["last_seen",{persist:!0},{setOrder:(_,_ref2)=>{let{order}=_ref2;return order}}],filterGroup:[{type:_types__WEBPACK_IMPORTED_MODULE_1__.J2.And,values:[]},{persist:!0},{setFilterGroup:(_,_ref3)=>{let{filterGroup}=_ref3;return filterGroup}}],filterTestAccounts:[!1,{persist:!0},{setFilterTestAccounts:(_,_ref4)=>{let{filterTestAccounts}=_ref4;return filterTestAccounts}}]})])},"./frontend/src/scenes/error-tracking/errorTrackingSceneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>errorTrackingSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js");let errorTrackingSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingSceneLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setOrder:order=>({order})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({order:["last_seen",{persist:!0},{setOrder:(_,_ref)=>{let{order}=_ref;return order}}]})])},"./frontend/src/scenes/error-tracking/queries.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>errorTrackingGroupQuery,m:()=>errorTrackingQuery});var _queries_schema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/queries/schema.ts");let errorTrackingQuery=_ref=>{let{order,dateRange,filterTestAccounts,filterGroup}=_ref;return{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_0__.OH.DataTableNode,source:{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_0__.OH.EventsQuery,select:["any(properties) -- Error","properties.$exception_type","count() as unique_occurrences -- Occurrences","count(distinct $session_id) as unique_sessions -- Sessions","count(distinct distinct_id) as unique_users -- Users","max(timestamp) as last_seen","min(timestamp) as first_seen"],orderBy:[order],...defaultProperties({dateRange,filterTestAccounts,filterGroup})},hiddenColumns:["properties.$exception_type","first_value(properties)","max(timestamp) as last_seen","min(timestamp) as first_seen"],showActions:!1,showTimings:!1}},errorTrackingGroupQuery=_ref2=>{let{group,dateRange,filterTestAccounts,filterGroup}=_ref2;return{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_0__.OH.EventsQuery,select:["uuid","properties","timestamp","person"],where:[`properties.$exception_type = '${group}'`],...defaultProperties({dateRange,filterTestAccounts,filterGroup})}},defaultProperties=_ref3=>{let{dateRange,filterTestAccounts,filterGroup}=_ref3,properties=filterGroup.values;return{event:"$exception",after:dateRange.date_from||void 0,before:dateRange.date_to||void 0,filterTestAccounts,properties}}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ErrorTracking__group{height:calc(100vh - 13rem);min-height:41rem}",""]),module.exports=exports}}]);