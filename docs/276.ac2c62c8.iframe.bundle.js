(window.webpackJsonp=window.webpackJsonp||[]).push([[276,280],{"./frontend/src/scenes/cohorts/Cohort.tsx":function(D,n,e){"use strict";e.r(n),e.d(n,"scene",function(){return je}),e.d(n,"Cohort",function(){return de});var r=e("./node_modules/react/index.js"),t=e.n(r),u=e("./node_modules/core-js/modules/es.function.name.js"),s=e("./node_modules/kea/lib/index.esm.js"),C=e("./frontend/src/scenes/urls.ts"),F=e("./frontend/src/models/cohortsModel.ts"),X=Object(s.kea)([Object(s.props)({}),Object(s.key)(function(h){return h.id||"new"}),Object(s.path)(["scenes","cohorts","cohortLogic"]),Object(s.selectors)({breadcrumbs:[function(){return[F.a.selectors.cohortsById,function(h,j){return j.id}]},function(h,j){var T;return[{name:"Cohorts",path:C.a.cohorts()},{name:j!=="new"&&((T=h[j])===null||T===void 0?void 0:T.name)||"Untitled"}]}]})]),G=e("./node_modules/antd/lib/dropdown/style/index.css"),i=e("./frontend/src/scenes/cohorts/cohortEditLogic.ts"),Z=e("./frontend/src/scenes/userLogic.ts"),S=e("./frontend/src/lib/components/PageHeader.tsx"),d=e("./frontend/src/lib/components/LemonButton/index.ts"),I=e("./node_modules/kea-router/lib/index.js"),P=e("./node_modules/antd/es/divider/index.js"),v=e("./frontend/src/lib/forms/Field.tsx"),g=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),H=e("./frontend/src/lib/components/Tooltip.tsx"),m=e("./frontend/src/lib/components/LemonSelect.tsx"),_=e("./frontend/src/scenes/cohorts/CohortFilters/constants.tsx"),Y=e("./frontend/src/lib/constants.tsx"),o=e("./frontend/src/types.ts"),l=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),a=e("./node_modules/antd/lib/upload/Dragger.js"),E=e.n(a),p=e("./frontend/src/lib/components/icons.tsx"),M=e("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx"),k=e("./node_modules/core-js/modules/es.array.map.js"),q=e("./node_modules/core-js/modules/es.array.iterator.js"),me=e("./node_modules/core-js/modules/es.object.to-string.js"),U=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),pe=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),fe=e.n(pe),oe=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss"),ne=e.n(oe),c={};c.insert="head",c.singleton=!1;var O=fe()(ne.a,c),ee=ne.a.locals||{},y=e("./frontend/src/scenes/cohorts/cohortUtils.tsx"),z=e("./node_modules/kea-forms/lib/index.js"),R=e("./node_modules/kea-forms/lib/components.js"),x=e("./node_modules/clsx/dist/clsx.m.js"),K=e("./node_modules/antd/es/row/index.js"),V=e("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),w=e("./frontend/src/lib/utils.tsx"),$=e("./frontend/src/lib/components/LemonDivider/index.ts"),ce=e("./frontend/src/lib/components/AlertMessage/index.ts"),re=e("./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaRowBuilder.tsx");function b(h){var j=Object(i.a)(h),T=Object(s.useValues)(j),ae=T.cohort,te=Object(s.useActions)(j),ve=te.setInnerGroupType,ge=te.duplicateFilter,ie=te.removeFilter,f=te.addFilter;return t.a.createElement(t.a.Fragment,null,ae.filters.properties.values.map(function(A,N){return Object(y.i)(A)?t.a.createElement(z.Group,{key:N,name:["filters","properties","values",N]},N!==0&&t.a.createElement("div",{className:"CohortCriteriaGroups__matching-group__logical-divider"},ae.filters.properties.type),t.a.createElement(R.Field,{name:"id",template:function(J){var B=J.error,Q=J.kids;return t.a.createElement("div",{className:Object(x.a)("CohortCriteriaGroups__matching-group",B&&"CohortCriteriaGroups__matching-group--error")},t.a.createElement(K.a,{align:"middle",wrap:!1,className:"px-4"},t.a.createElement(V.a,{name:w.c[N],color:V.b.Gray}),t.a.createElement(M.a,{prefix:"Match persons against",suffix:"criteria",onChange:function(se){return ve(se,N)},value:A.type}),t.a.createElement("div",{style:{flex:1,minWidth:"0.5rem"}}),t.a.createElement(d.a,{icon:t.a.createElement(p.IconCopy,null),status:"primary-alt",onClick:function(){return ge(N)}}),ae.filters.properties.values.length>1&&t.a.createElement(d.a,{icon:t.a.createElement(p.IconDelete,null),status:"primary-alt",onClick:function(){return ie(N)}})),t.a.createElement($.a,{className:"my-4"}),B&&t.a.createElement(ce.a,{className:"m-2",type:"error"},B),Q)}},t.a.createElement(t.a.Fragment,null,A.values.map(function(le,J){return Object(y.i)(le)?null:t.a.createElement(z.Group,{key:J,name:["values",J]},t.a.createElement(re.a,{id:h.id,groupIndex:N,index:J,logicalOperator:A.type,criteria:le,type:Object(y.g)(le),hideDeleteIcon:A.values.length<=1}),J===A.values.length-1&&t.a.createElement("div",{className:"m-3"},t.a.createElement(d.a,{"data-attr":"cohort-add-filter-group-criteria",type:"secondary",onClick:function(){return f(N)},icon:t.a.createElement(p.IconPlusMini,{color:"var(--primary)"})},"Add criteria")))})))):null}),t.a.createElement(d.a,{"data-attr":"cohort-add-filter-group",className:"mb-4 mt-4",type:"secondary",onClick:function(){return f()},icon:t.a.createElement(p.IconPlusMini,{color:"var(--primary)"}),fullWidth:!0},"Add criteria group"))}try{b.displayName="CohortCriteriaGroups",b.__docgenInfo={description:"",displayName:"CohortCriteriaGroups",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"]={docgenInfo:b.__docgenInfo,name:"CohortCriteriaGroups",path:"frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"})}catch(h){}var L=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),he=e("./frontend/src/scenes/persons/Persons.tsx"),Ce=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),Pe=e("./frontend/src/lib/components/NotFound/index.tsx");function ue(h){var j=h.id,T={id:j},ae=Object(i.a)(T),te=Object(s.useActions)(ae),ve=te.deleteCohort,ge=te.setOuterGroupsType,ie=Object(s.useValues)(ae),f=ie.cohort,A=ie.cohortLoading,N=ie.cohortMissing,le=Object(s.useValues)(Z.a),J=le.hasAvailableFeature,B=f.id==="new"||f.id===void 0;return N?t.a.createElement(Pe.a,{object:"cohort"}):t.a.createElement("div",{className:"cohort"},t.a.createElement(z.Form,{logic:i.a,props:T,formKey:"cohort",enableFormOnSubmit:!0},t.a.createElement(S.a,{title:B?"New cohort":f.name||"Untitled",buttons:t.a.createElement("div",{className:"flex items-center gap-2"},B?t.a.createElement(d.a,{"data-attr":"cancel-cohort",type:"secondary",onClick:function(){I.router.actions.push(C.a.cohorts())},disabled:A},"Cancel"):t.a.createElement(d.a,{"data-attr":"delete-cohort",status:"danger",type:"secondary",onClick:function(){ve()},disabled:A},"Delete"),t.a.createElement(d.a,{type:"primary","data-attr":"save-cohort",htmlType:"submit",loading:A||f.is_calculating,disabled:A||f.is_calculating},"Save"))}),t.a.createElement(P.a,null),t.a.createElement("div",{className:"space-y-2",style:{maxWidth:640}},t.a.createElement("div",{className:"flex gap-4 flex-wrap"},t.a.createElement("div",{className:"flex-1"},t.a.createElement(v.a,{name:"name",label:"Name"},t.a.createElement(g.a,{"data-attr":"cohort-name"}))),t.a.createElement("div",{className:"flex-1"},t.a.createElement(v.a,{name:"is_static",label:"Type"},function(Q){var W=Q.value,se=Q.onChange;return t.a.createElement(H.a,{title:B?null:"Create a new cohort to use a different type of cohort."},t.a.createElement("div",null,t.a.createElement(m.a,{disabled:!B,options:_.b,value:W?Y.b.Static:Y.b.Dynamic,onChange:function(ye){se(ye===Y.b.Static)},fullWidth:!0,"data-attr":"cohort-type"})))}))),J(o.d.DASHBOARD_COLLABORATION)&&t.a.createElement("div",{className:"ph-ignore-input"},t.a.createElement(v.a,{name:"description",label:"Description","data-attr":"cohort-description"},t.a.createElement(l.a,null)))),f.is_static?t.a.createElement("div",{className:"mt-4 ph-ignore-input"},t.a.createElement(v.a,{name:"csv",label:B?"Upload users":"Add users","data-attr":"cohort-csv"},function(Q){var W,se,Ee=Q.onChange;return t.a.createElement(t.a.Fragment,null,t.a.createElement("span",null,"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user\u2019s distinct ID."),t.a.createElement(E.a,{name:"file",multiple:!1,fileList:f.csv?[f.csv]:[],accept:".csv",showUploadList:!1,beforeUpload:function(Te){return Ee(Te),!1},className:"cohort-csv-dragger"},f.csv?t.a.createElement(t.a.Fragment,null,t.a.createElement(p.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),t.a.createElement("div",{className:"ant-upload-text"},(W=(se=f.csv)===null||se===void 0?void 0:se.name)!==null&&W!==void 0?W:"File chosen")):t.a.createElement(t.a.Fragment,null,t.a.createElement(p.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),t.a.createElement("div",{className:"ant-upload-text"},"Drag a file here or click to browse for a file"))))})):t.a.createElement(t.a.Fragment,null,t.a.createElement(P.a,null),t.a.createElement("div",{className:"flex items-center justify-between my-4"},t.a.createElement("div",{className:"flex flex-col"},t.a.createElement(Ce.a,{htmlFor:"groups"},"Matching criteria"),t.a.createElement("span",null,"Actors who match the following criteria will be part of the cohort. Continuously updated automatically.")),t.a.createElement(M.a,{value:f.filters.properties.type,onChange:function(W){ge(W)},topLevelFilter:!0,suffix:"criteria"})),t.a.createElement(b,{id:T.id})),!B&&t.a.createElement(t.a.Fragment,null,t.a.createElement(P.a,null),t.a.createElement("div",null,t.a.createElement("h3",{className:"l3"},"Persons in this cohort"),f.is_calculating?t.a.createElement("div",{className:"cohort-recalculating flex items-center"},t.a.createElement(L.a,{className:"mr-4"}),"We're recalculating who belongs to this cohort. This could take up to a couple of minutes."):t.a.createElement(he.Persons,{cohort:f.id})))))}try{ue.displayName="CohortEdit",ue.__docgenInfo={description:"",displayName:"CohortEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"]={docgenInfo:ue.__docgenInfo,name:"CohortEdit",path:"frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"})}catch(h){}var je={component:de,logic:X,paramsToProps:function(j){var T=j.params.id;return{id:T&&T!=="new"?parseInt(T):"new"}}};function de(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=h.id;return t.a.createElement(ue,{id:j})}try{de.displayName="Cohort",de.__docgenInfo={description:"",displayName:"Cohort",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/Cohort.tsx#Cohort"]={docgenInfo:de.__docgenInfo,name:"Cohort",path:"frontend/src/scenes/cohorts/Cohort.tsx#Cohort"})}catch(h){}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(D,n,e){"use strict";e.d(n,"a",function(){return Y});var r=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),t=e.n(r),u=e("./node_modules/@babel/runtime/regenerator/index.js"),s=e.n(u),C=e("./node_modules/core-js/modules/es.array.iterator.js"),F=e.n(C),X=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(X),i=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Z=e.n(i),S=e("./node_modules/core-js/modules/es.array.concat.js"),d=e.n(S),I=e("./node_modules/kea/lib/index.esm.js"),P=e("./frontend/src/lib/api.ts"),v=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),g=e("./frontend/src/lib/utils.tsx"),H=e("./frontend/src/scenes/teamLogic.tsx"),m=e("./frontend/src/scenes/urls.ts"),_=e("./frontend/src/models/groupsModel.ts"),Y=Object(I.kea)({path:["groups","groupsListLogic"],connect:{values:[H.a,["currentTeamId"],_.a,["groupTypes","aggregationLabel"],v.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(a){return{url:a}},setTab:function(a){return{tab:a}}}},loaders:function(l){var a=l.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var E=t()(s.a.mark(function M(k){var q;return s.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(q=k.url,!a.groupsEnabled){U.next=6;break}return q=q||"api/projects/".concat(a.currentTeamId,"/groups/?group_type_index=").concat(a.currentTab),U.next=5,P.b.get(q);case 5:return U.abrupt("return",U.sent);case 6:case"end":return U.stop()}},M)}));function p(M){return E.apply(this,arguments)}return p}()}]}},reducers:{currentTab:["-1",{setTab:function(l,a){var E=a.tab;return E}}]},selectors:{currentTabName:[function(o){return[o.currentTab,o.groupTypes,o.aggregationLabel]},function(o,l,a){return o==="-1"?"Persons":l!=null&&l.length?Object(g.i)(a(parseInt(o)).singular):""}],groupName:[function(o){return[o.currentTab,o.aggregationLabel]},function(o,l){return o==="-1"?{singular:"person",plural:"persons"}:l(parseInt(o))}],breadcrumbs:[function(o){return[o.currentTabName,o.currentTab]},function(o,l){return[{name:o,path:m.a.groups(l)}]}]},actionToUrl:function(){return{setTab:function(a){var E=a.tab;return E!=="-1"?m.a.groups(E):m.a.persons()}}},urlToAction:function(l){var a=l.actions,E=l.values;return{"/groups/:id":function(M){var k=M.id;k&&(a.setTab(k),a.loadGroups())},"/persons":function(){E.currentTab!=="-1"&&a.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(D,n,e){"use strict";e.d(n,"a",function(){return X});var r=e("./node_modules/react/index.js"),t=e.n(r),u=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/scenes/persons/personsLogic.tsx"),C=e("./frontend/src/scenes/persons/PersonHeader.tsx"),F=e("./frontend/@posthog/lemon-ui/src/index.ts");function X(){var G=Object(u.useValues)(s.a),i=G.personDeleteModal,Z=Object(u.useActions)(s.a),S=Z.deletePerson,d=Z.showPersonDeleteModal;return t.a.createElement(F.LemonModal,{isOpen:!!i,onClose:function(){return d(null)},title:'Are you sure you want to delete "'.concat(Object(C.b)(i),'"?'),description:t.a.createElement(t.a.Fragment,null,"This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",t.a.createElement("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold"}," ","Learn more")),footer:t.a.createElement(t.a.Fragment,null,t.a.createElement(F.LemonButton,{status:"danger",type:"secondary",onClick:function(){S({person:i,deleteEvents:!0}),d(null)},"data-attr":"delete-person-with-events"},"Delete person and all corresponding events"),t.a.createElement(F.LemonButton,{type:"secondary",onClick:function(){return d(null)},"data-attr":"delete-person-cancel"},"Cancel"),t.a.createElement(F.LemonButton,{type:"primary",status:"danger",onClick:function(){S({person:i,deleteEvents:!1}),d(null)},"data-attr":"delete-person-no-events"},"Delete person"))})}},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(D,n,e){"use strict";e.d(n,"a",function(){return P});var r=e("./node_modules/kea/lib/index.esm.js"),t=e("./frontend/src/lib/components/PageHeader.tsx"),u=e("./node_modules/react/index.js"),s=e.n(u),C=e("./node_modules/core-js/modules/es.array.includes.js"),F=e("./node_modules/core-js/modules/es.string.includes.js"),X=e("./node_modules/core-js/modules/es.array.map.js"),G=e("./node_modules/antd/es/tabs/index.js"),i=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),Z=e("./frontend/src/lib/utils.tsx"),S=e("./frontend/src/models/groupsModel.ts"),d=e("./frontend/src/scenes/groups/groupsListLogic.ts");function I(){var v=Object(r.useActions)(d.a),g=v.setTab,H=Object(r.useValues)(d.a),m=H.currentTab,_=Object(r.useValues)(S.a),Y=_.groupTypes,o=_.aggregationLabel,l=Object(r.useValues)(i.b),a=l.groupsAccessStatus,E=[i.a.HasAccess,i.a.HasGroupTypes,i.a.NoAccess].includes(a);return s.a.createElement(G.a,{activeKey:m,onChange:function(M){return g(M)}},s.a.createElement(G.a.TabPane,{tab:"Persons",key:"-1"}),E?s.a.createElement(G.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):Y.map(function(p){return s.a.createElement(G.a.TabPane,{tab:Object(Z.i)(o(p.group_type_index).plural),key:p.group_type_index})}))}function P(v){var g=v.hideGroupTabs,H=Object(r.useValues)(S.a),m=H.showGroupsOptions;return s.a.createElement(s.a.Fragment,null,s.a.createElement(t.a,{title:"Persons".concat(m?" & Groups":""),caption:"A catalog of your product's end users".concat(m?" and groups":"",".")}),!g&&m&&s.a.createElement(I,null))}try{P.displayName="PersonPageHeader",P.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:P.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(v){}},"./frontend/src/scenes/persons/Persons.scss":function(D,n,e){"use strict";var r=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),t=e.n(r),u=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),s=e.n(u),C={};C.insert="head",C.singleton=!1;var F=t()(s.a,C),X=s.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(D,n,e){"use strict";e.r(n),e.d(n,"scene",function(){return fe}),e.d(n,"Persons",function(){return oe}),e.d(n,"PersonsScene",function(){return ne});var r=e("./node_modules/react/index.js"),t=e.n(r),u=e("./node_modules/kea/lib/index.esm.js"),s=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),C=e.n(s),F=e("./node_modules/core-js/modules/es.array.concat.js"),X=e("./node_modules/core-js/modules/es.object.keys.js"),G=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),i=e("./frontend/src/lib/components/PropertiesTable.tsx"),Z=e("./frontend/src/scenes/persons/Persons.scss"),S=e("./frontend/src/lib/components/CopyToClipboard.tsx"),d=e("./frontend/src/scenes/persons/PersonHeader.tsx"),I=e("./frontend/src/lib/components/LemonTable/index.ts"),P=e("./frontend/@posthog/lemon-ui/src/index.ts"),v=e("./frontend/src/lib/components/icons.tsx"),g=e("./frontend/src/scenes/persons/personsLogic.tsx"),H=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx");function m(c){var O=c.people,ee=c.loading,y=ee===void 0?!1:ee,z=c.hasPrevious,R=c.hasNext,x=c.loadPrevious,K=c.loadNext,V=c.compact,w=Object(u.useActions)(g.a),$=w.showPersonDeleteModal,ce=[{title:"Person",key:"person",render:function(b,L){return t.a.createElement(d.a,{withIcon:!0,person:L})}},{title:"ID",key:"id",render:function(b,L){return t.a.createElement("div",{style:{overflow:"hidden"}},L.distinct_ids.length&&t.a.createElement(S.a,{explicitValue:L.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},L.distinct_ids[0]))}}].concat(C()(V?[]:[{title:"First seen",dataIndex:"created_at",render:function(b){return b?t.a.createElement(G.b,{time:b}):t.a.createElement(t.a.Fragment,null)}},{render:function(b,L){return t.a.createElement(P.LemonButton,{onClick:function(){return $(L)},icon:t.a.createElement(v.IconDelete,null),status:"danger",size:"small"})}}]));return t.a.createElement(t.a.Fragment,null,t.a.createElement(I.a,{"data-attr":"persons-table",columns:ce,loading:y,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:R?function(){K==null||K(),window.scrollTo(0,0)}:void 0,onBackward:z?function(){x==null||x(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(b){var L=b.properties;return Object.keys(L).length?t.a.createElement(i.a,{properties:L}):"This person has no properties."}},dataSource:O,emptyState:"No persons",nouns:["person","persons"]}),t.a.createElement(H.a,null))}try{m.displayName="PersonsTable",m.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:m.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(c){}var _=e("./node_modules/antd/es/popconfirm/index.js"),Y=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=e.n(Y),l=e("./node_modules/core-js/modules/es.regexp.exec.js"),a=e("./node_modules/core-js/modules/es.string.search.js"),E=e("./frontend/src/lib/components/Tooltip.tsx"),p=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),M=function(){var O=Object(u.useActions)(g.a),ee=O.loadPersons,y=O.setListFilters,z=Object(u.useValues)(g.a),R=z.listFilters,x=Object(r.useState)(""),K=o()(x,2),V=K[0],w=K[1],$=Object(p.a)(ee,800);return Object(r.useEffect)(function(){w(R.search||"")},[]),Object(r.useEffect)(function(){y({search:V||void 0}),$()},[V]),t.a.createElement("div",{className:"flex items-center gap-2"},t.a.createElement(P.LemonInput,{type:"search",placeholder:"Search for persons",onChange:w,value:V,"data-attr":"persons-search"}),t.a.createElement(E.a,{title:t.a.createElement(t.a.Fragment,null,'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.')},t.a.createElement(v.IconInfo,{className:"text-2xl text-muted-alt shrink-0"})))},k=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),q=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),me=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),U=e("./frontend/src/lib/components/LemonButton/index.ts"),pe=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),fe={component:ne,logic:g.a,paramsToProps:function(){return{syncWithUrl:!0}}};function oe(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=c.cohort;return t.a.createElement(u.BindLogic,{logic:g.a,props:{cohort:O,syncWithUrl:!O}},t.a.createElement(ne,null))}function ne(){var c=Object(u.useActions)(g.a),O=c.loadPersons,ee=c.setListFilters,y=Object(u.useValues)(g.a),z=y.cohortId,R=y.persons,x=y.listFilters,K=y.personsLoading,V=y.exporterProps,w=y.apiDocsURL;return t.a.createElement("div",{className:"persons-list"},!z&&t.a.createElement(k.a,null),t.a.createElement("div",{className:"space-y-2"},t.a.createElement("div",{className:"flex justify-between items-center gap-2"},t.a.createElement(M,null),t.a.createElement(_.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Exporting by CSV is limited to 10,000 users.",t.a.createElement("br",null),"To export more, please use ",t.a.createElement("a",{href:w},"the API"),". Do you want to export by CSV?"),onConfirm:function(){return Object(pe.a)(V[0])}},t.a.createElement(U.a,{type:"secondary",icon:t.a.createElement(v.IconExport,{style:{color:"var(--primary)"}})},x.properties&&x.properties.length>0?t.a.createElement("div",{style:{display:"block"}},"Export (",t.a.createElement("strong",null,x.properties.length)," filter)"):"Export"))),t.a.createElement(q.a,{pageKey:"persons-list-page",propertyFilters:x.properties,onChange:function(ce){ee({properties:ce}),O()},endpoint:"person",taxonomicGroupTypes:[me.a.PersonProperties],showConditionBadge:!0}),t.a.createElement(m,{people:R.results,loading:K,hasPrevious:!!R.previous,hasNext:!!R.next,loadPrevious:function(){return O(R.previous)},loadNext:function(){return O(R.next)}})))}try{oe.displayName="Persons",oe.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:oe.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(c){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss":function(D,n,e){var r=e("./node_modules/css-loader/dist/runtime/api.js");n=r(!1),n.push([D.i,".CohortCriteriaGroups__matching-group{padding-top:1rem;border:1px solid var(--border);border-radius:4px;width:100%;margin:.5rem 0}.CohortCriteriaGroups__matching-group.CohortCriteriaGroups__matching-group--error{border:1px solid var(--danger)}.CohortCriteriaGroups__matching-group__logical-divider{color:var(--primary-alt);font-weight:600;font-size:12px;text-transform:uppercase;padding:0 1.5rem}",""]),D.exports=n},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(D,n,e){var r=e("./node_modules/css-loader/dist/runtime/api.js");n=r(!1),n.push([D.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),D.exports=n}}]);
