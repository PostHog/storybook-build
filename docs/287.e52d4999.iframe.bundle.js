(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return NewDashboardModal_NewDashboardModal}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),LemonModal=__webpack_require__("./frontend/src/lib/lemon-ui/LemonModal/index.ts"),dashboardTemplatesLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),ActionFilter=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),types=__webpack_require__("./frontend/src/types.ts");const dashboardTemplateVariablesLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","dashboard","DashboardTemplateVariablesLogic"]),Object(index_esm.props)({variables:[]}),Object(index_esm.actions)({setVariables:variables=>({variables:variables}),setVariable:(variableName,filterGroup)=>({variable_name:variableName,filterGroup:filterGroup})}),Object(index_esm.reducers)({variables:[[],{setVariables:(_,_ref)=>{let{variables:variables}=_ref;return variables},setVariable:(state,_ref2)=>{let{variable_name:variableName,filterGroup:filterGroup}=_ref2;return state.map((v=>{var _filterGroup$events;return v.name===variableName&&null!=filterGroup&&null!==(_filterGroup$events=filterGroup.events)&&void 0!==_filterGroup$events&&_filterGroup$events.length&&filterGroup.events[0]?{...v,default:filterGroup.events[0]}:v}))}}]}),Object(index_esm.propsChanged)(((_ref3,oldProps)=>{let{actions:actions,props:props}=_ref3;props.variables!==oldProps.variables&&actions.setVariables(props.variables)}))]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function DashboardTemplateVariables(){const{activeDashboardTemplate:activeDashboardTemplate}=Object(index_esm.useValues)(newDashboardLogic.a),theDashboardTemplateVariablesLogic=dashboardTemplateVariablesLogic({variables:(null==activeDashboardTemplate?void 0:activeDashboardTemplate.variables)||[]}),{variables:variables}=Object(index_esm.useValues)(theDashboardTemplateVariablesLogic),{setVariable:setVariable}=Object(index_esm.useActions)(theDashboardTemplateVariablesLogic),FALLBACK_EVENT={id:"$pageview",math:"dau",type:"events"};return Object(jsx_runtime.jsx)("div",{className:"mb-4 DashboardTemplateVariables max-w-md",children:variables.map(((variable,index)=>Object(jsx_runtime.jsxs)("div",{className:"mb-6",children:[Object(jsx_runtime.jsxs)("div",{className:"mb-2",children:[Object(jsx_runtime.jsx)(src.LemonLabel,{showOptional:!variable.required,children:variable.name}),Object(jsx_runtime.jsx)("p",{className:"text-sm text-muted",children:variable.description})]}),Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(ActionFilter.a,{filters:{insight:types.G.TRENDS,events:variable.default?[variable.default]:[FALLBACK_EVENT]},setFilters:filters=>{setVariable(variable.name,filters)},typeKey:"variable_"+variable.name,buttonCopy:"",hideDeleteBtn:!0,hideRename:!0,hideDuplicate:!0,entitiesLimit:1})})]},index)))})}var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),blank_dashboard_hog=__webpack_require__("./frontend/public/blank-dashboard-hog.png"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),NewDashboardModal=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/NewDashboardModal.scss"),NewDashboardModal_default=__webpack_require__.n(NewDashboardModal),options={insert:"head",singleton:!1},FallbackCoverImage=(injectStylesIntoStyleTag_default()(NewDashboardModal_default.a,options),NewDashboardModal_default.a.locals,__webpack_require__("./frontend/src/lib/components/FallbackCoverImage/FallbackCoverImage.tsx")),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js");function TemplateItem(_ref){var _template$dashboard_d;let{template:template,onClick:onClick,index:index,"data-attr":dataAttr}=_ref;const[isHovering,setIsHovering]=Object(react.useState)(!1);return Object(jsx_runtime.jsxs)("div",{className:"cursor-pointer border rounded TemplateItem flex flex-col transition-all",onClick:onClick,onMouseEnter:()=>setIsHovering(!0),onMouseLeave:()=>setIsHovering(!1),"data-attr":dataAttr,children:[Object(jsx_runtime.jsx)("div",{className:Object(clsx_m.default)("transition-all w-full overflow-hidden",isHovering?"h-4 min-h-4":"h-30 min-h-30"),children:Object(jsx_runtime.jsx)(FallbackCoverImage.a,{src:null==template?void 0:template.image_url,alt:"cover photo",index:index,imageClassName:"h-30"})}),Object(jsx_runtime.jsx)("h5",{className:"px-2 mb-1",children:null==template?void 0:template.template_name}),Object(jsx_runtime.jsx)("div",{className:"px-2 py-1 overflow-y-auto grow",children:Object(jsx_runtime.jsx)("p",{className:Object(clsx_m.default)("text-muted-alt text-xs",isHovering?"":"line-clamp-2"),children:null!==(_template$dashboard_d=null==template?void 0:template.dashboard_description)&&void 0!==_template$dashboard_d?_template$dashboard_d:" "})})]})}function DashboardTemplatePreview(){const{activeDashboardTemplate:activeDashboardTemplate}=Object(index_esm.useValues)(newDashboardLogic.a),{variables:variables}=Object(index_esm.useValues)(dashboardTemplateVariablesLogic),{createDashboardFromTemplate:createDashboardFromTemplate,clearActiveDashboardTemplate:clearActiveDashboardTemplate}=Object(index_esm.useActions)(newDashboardLogic.a);return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(DashboardTemplateVariables,{}),Object(jsx_runtime.jsxs)("div",{className:"flex justify-between my-4",children:[Object(jsx_runtime.jsx)(src.LemonButton,{onClick:clearActiveDashboardTemplate,type:"secondary",children:"Back"}),Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{activeDashboardTemplate&&createDashboardFromTemplate(activeDashboardTemplate,variables)},type:"primary",children:"Create"})]})]})}function DashboardTemplateChooser(){const{allTemplates:allTemplates}=Object(index_esm.useValues)(dashboardTemplatesLogic.a),{isLoading:isLoading}=Object(index_esm.useValues)(newDashboardLogic.a),{setActiveDashboardTemplate:setActiveDashboardTemplate,createDashboardFromTemplate:createDashboardFromTemplate,addDashboard:addDashboard,setIsLoading:setIsLoading}=Object(index_esm.useActions)(newDashboardLogic.a);return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)("div",{className:"DashboardTemplateChooser",children:[Object(jsx_runtime.jsx)(TemplateItem,{template:{template_name:"Blank dashboard",dashboard_description:"Create a blank dashboard",image_url:blank_dashboard_hog.a},onClick:()=>{isLoading||(setIsLoading(!0),addDashboard({name:"New Dashboard",show:!0}))},index:0,"data-attr":"create-dashboard-blank"}),allTemplates.map(((template,index)=>Object(jsx_runtime.jsx)(TemplateItem,{template:template,onClick:()=>{isLoading||(setIsLoading(!0),0===(template.variables||[]).length?(null===template.variables&&(template.variables=[]),createDashboardFromTemplate(template,template.variables||[])):setActiveDashboardTemplate(template))},index:index+1,"data-attr":"create-dashboard-from-template"},index)))]})})}function NewDashboardModal_NewDashboardModal(){const{hideNewDashboardModal:hideNewDashboardModal}=Object(index_esm.useActions)(newDashboardLogic.a),{newDashboardModalVisible:newDashboardModalVisible}=Object(index_esm.useValues)(newDashboardLogic.a),{activeDashboardTemplate:activeDashboardTemplate}=Object(index_esm.useValues)(newDashboardLogic.a);return Object(jsx_runtime.jsx)(LemonModal.a,{onClose:hideNewDashboardModal,isOpen:newDashboardModalVisible,title:activeDashboardTemplate?"Setup your events":"Create a dashboard",description:activeDashboardTemplate?`The dashboard template you selected requires you to set up ${Object(utils.xb)((activeDashboardTemplate.variables||[]).length,"event","events",!0)}.`:"Choose a template or start with a blank slate",children:Object(jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:activeDashboardTemplate?Object(jsx_runtime.jsx)(DashboardTemplatePreview,{}):Object(jsx_runtime.jsx)(DashboardTemplateChooser,{})})})}},"./frontend/src/scenes/dashboard/dashboards/Dashboards.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Dashboards",(function(){return Dashboards}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),dashboardsModel=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),fuse_esm=__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx");let DashboardsTab=function(DashboardsTab){return DashboardsTab.Dashboards="dashboards",DashboardsTab.Notebooks="notebooks",DashboardsTab.Templates="templates",DashboardsTab}({});const dashboardsLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","dashboard","dashboardsLogic"]),Object(index_esm.connect)({values:[userLogic.a,["user"],featureFlagLogic.a,["featureFlags"]]}),Object(index_esm.actions)({setCurrentTab:tab=>({tab:tab}),setFilters:filters=>({filters:filters})}),Object(index_esm.reducers)({currentTab:[DashboardsTab.Dashboards,{setCurrentTab:(_,_ref)=>{let{tab:tab}=_ref;return tab}}],filters:[{search:"",createdBy:"All users",pinned:!1,shared:!1},{setFilters:(state,_ref2)=>{let{filters:filters}=_ref2;return Object(utils.rb)({...state||{},...filters})}}]}),Object(index_esm.selectors)({dashboards:[s=>[dashboardsModel.a.selectors.nameSortedDashboards,s.filters,s.fuse],(dashboards,filters,fuse)=>(dashboards=dashboards.filter((d=>!d.deleted)).sort(((a,b)=>{var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")})),filters.pinned?dashboards=dashboards.filter((d=>d.pinned)):filters.shared?dashboards=dashboards.filter((d=>d.is_shared)):"All users"!==filters.createdBy&&(dashboards=dashboards.filter((d=>d.created_by&&filters.createdBy))),filters.search?fuse.search(filters.search).map((result=>result.item)):dashboards)],fuse:[()=>[dashboardsModel.a.selectors.nameSortedDashboards],dashboards=>new fuse_esm.a(dashboards,{keys:["key","name","description","tags"],threshold:.3})]}),Object(lib.actionToUrl)((_ref3=>{let{values:values}=_ref3;return{setCurrentTab:()=>{const tab=values.currentTab===DashboardsTab.Dashboards?void 0:values.currentTab;lib.router.values.searchParams.tab!==tab&&lib.router.actions.push(lib.router.values.location.pathname,{...lib.router.values.searchParams,tab:tab})}}})),Object(lib.urlToAction)((_ref4=>{let{actions:actions}=_ref4;return{"/dashboard":(_,searchParams)=>{const tab=searchParams.tab||DashboardsTab.Dashboards;actions.setCurrentTab(tab)}}}))]);var NewDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),inAppPromptLogic=__webpack_require__("./frontend/src/lib/logic/inAppPrompt/inAppPromptLogic.tsx"),DeleteDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/DeleteDashboardModal.tsx"),DuplicateDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/DuplicateDashboardModal.tsx"),card=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/card/index.js"),objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_AppstoreAddOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_AppstoreAddOutlined_AppstoreAddOutlined=function AppstoreAddOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_AppstoreAddOutlined}))};icons_AppstoreAddOutlined_AppstoreAddOutlined.displayName="AppstoreAddOutlined";var icons_AppstoreAddOutlined=react.forwardRef(icons_AppstoreAddOutlined_AppstoreAddOutlined),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const NoDashboards=()=>{const{addDashboard:addDashboard}=Object(index_esm.useActions)(newDashboardLogic.a);return Object(jsx_runtime.jsxs)("div",{className:"mt-4",children:[Object(jsx_runtime.jsx)("p",{children:"Create your first dashboard:"}),Object(jsx_runtime.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[Object(jsx_runtime.jsx)(card.a,{title:"Empty",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>addDashboard({name:"New Dashboard",useTemplate:""}),children:Object(jsx_runtime.jsx)("div",{style:{textAlign:"center",fontSize:40},children:Object(jsx_runtime.jsx)(icons_AppstoreAddOutlined,{})})}),Object(jsx_runtime.jsx)(card.a,{title:"App Default",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>addDashboard({name:"Web App Dashboard",useTemplate:"DEFAULT_APP"}),children:Object(jsx_runtime.jsx)("div",{style:{textAlign:"center",fontSize:40},children:Object(jsx_runtime.jsx)(icons_AppstoreAddOutlined,{})})})]})]})};var teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),duplicateDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),deleteDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),types=__webpack_require__("./frontend/src/types.ts"),eventUsageLogic=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),dashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonRow=__webpack_require__("./frontend/src/lib/lemon-ui/LemonRow/index.ts"),DashboardHeader=__webpack_require__("./frontend/src/scenes/dashboard/DashboardHeader.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),membersLogic=__webpack_require__("./frontend/src/scenes/organization/Settings/membersLogic.tsx");function DashboardsTable(){const{dashboardsLoading:dashboardsLoading}=Object(index_esm.useValues)(dashboardsModel.a),{unpinDashboard:unpinDashboard,pinDashboard:pinDashboard}=Object(index_esm.useActions)(dashboardsModel.a),{dashboards:dashboards,filters:filters}=Object(index_esm.useValues)(dashboardsLogic),{setFilters:setFilters}=Object(index_esm.useActions)(dashboardsLogic),{hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),{currentTeam:currentTeam}=Object(index_esm.useValues)(teamLogic.b),{showDuplicateDashboardModal:showDuplicateDashboardModal}=Object(index_esm.useActions)(duplicateDashboardLogic.a),{showDeleteDashboardModal:showDeleteDashboardModal}=Object(index_esm.useActions)(deleteDashboardLogic.a),{meFirstMembers:meFirstMembers}=Object(index_esm.useValues)(membersLogic.a),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref){let{id:id}=_ref;return Object(jsx_runtime.jsx)(LemonButton.a,{size:"small",status:"stealth",onClick:pinned?()=>unpinDashboard(id,eventUsageLogic.a.DashboardsList):()=>pinDashboard(id,eventUsageLogic.a.DashboardsList),tooltip:pinned?"Unpin dashboard":"Pin dashboard",icon:pinned?Object(jsx_runtime.jsx)(icons.oc,{}):Object(jsx_runtime.jsx)(icons.pc,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(name,_ref2){let{id:id,description:description,is_shared:is_shared,effective_privilege_level:effective_privilege_level}=_ref2;const isPrimary=id===(null==currentTeam?void 0:currentTeam.primary_dashboard),canEditDashboard=effective_privilege_level>=constants.f.CanEdit;return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{className:"row-name",children:[Object(jsx_runtime.jsx)(Link.a,{"data-attr":"dashboard-name",to:urls.a.dashboard(id),children:name||"Untitled"}),is_shared&&Object(jsx_runtime.jsx)(Tooltip.a,{title:"This dashboard is shared publicly.",children:Object(jsx_runtime.jsx)(icons.Oc,{className:"ml-1 text-base text-primary"})}),!canEditDashboard&&Object(jsx_runtime.jsx)(Tooltip.a,{title:DashboardHeader.a,children:Object(jsx_runtime.jsx)(icons.Ob,{className:"ml-1 text-base text-muted"})}),isPrimary&&Object(jsx_runtime.jsx)(Tooltip.a,{title:"The primary dashboard is shown on the project home page.",children:Object(jsx_runtime.jsx)(icons.N,{className:"ml-1 text-base text-warning"})})]}),hasAvailableFeature(types.e.DASHBOARD_COLLABORATION)&&description&&Object(jsx_runtime.jsx)("span",{className:"row-description",children:description})]})},sorter:(a,b)=>{var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")}},...hasAvailableFeature(types.e.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?Object(jsx_runtime.jsx)(ObjectTags.a,{tags:tags,staticOnly:!0}):null}}]:[],Object(columnUtils.b)(),Object(columnUtils.a)(),{width:0,render:function RenderActions(_,_ref3){let{id:id,name:name}=_ref3;return Object(jsx_runtime.jsx)(More.a,{overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",to:urls.a.dashboard(id),onClick:()=>{Object(dashboardLogic.f)({id:id}).mount(),Object(dashboardLogic.f)({id:id}).actions.setDashboardMode(null,eventUsageLogic.a.DashboardsList)},fullWidth:!0,children:"View"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",to:urls.a.dashboard(id),onClick:()=>{Object(dashboardLogic.f)({id:id}).mount(),Object(dashboardLogic.f)({id:id}).actions.setDashboardMode(types.m.Edit,eventUsageLogic.a.DashboardsList)},fullWidth:!0,children:"Edit"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>{showDuplicateDashboardModal(id,name)},fullWidth:!0,children:"Duplicate"}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(LemonRow.a,{icon:Object(jsx_runtime.jsx)(icons.N,{className:"text-warning"}),fullWidth:!0,status:"warning",children:Object(jsx_runtime.jsxs)("span",{className:"text-muted",children:["Change the default dashboard",Object(jsx_runtime.jsx)("br",{}),"from the ",Object(jsx_runtime.jsx)(Link.a,{to:urls.a.projectHomepage(),children:"project home page"}),"."]})}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(LemonButton.a,{onClick:()=>{showDeleteDashboardModal(id)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap mb-4",children:[Object(jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:x=>setFilters({search:x}),value:filters.search}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:Object(jsx_runtime.jsx)(LemonButton.a,{active:filters.pinned,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({pinned:!filters.pinned}),icon:Object(jsx_runtime.jsx)(icons.pc,{}),children:"Pinned"})}),Object(jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:Object(jsx_runtime.jsx)(LemonButton.a,{active:filters.shared,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({shared:!filters.shared}),icon:Object(jsx_runtime.jsx)(icons.Oc,{}),children:"Shared"})}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[Object(jsx_runtime.jsx)("span",{children:"Created by:"}),Object(jsx_runtime.jsx)(src.LemonSelect,{options:[{value:"All users",label:"All Users"},...meFirstMembers.map((x=>({value:x.user.uuid,label:x.user.first_name})))],size:"small",value:filters.createdBy,onChange:v=>{setFilters({createdBy:v})},dropdownMatchSelectWidth:!1})]})]})]}),Object(jsx_runtime.jsx)(LemonTable.a,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:dashboards,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns:columns,loading:dashboardsLoading,defaultSorting:{columnKey:"name",order:1},emptyState:"No dashboards matching your filters!",nouns:["dashboard","dashboards"]})]})}var dashboardTemplatesLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),LemonSnack=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSnack/LemonSnack.tsx"),dashboardTemplateEditorLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboardTemplateEditorLogic.ts"),DashboardTemplateEditor=__webpack_require__("./frontend/src/scenes/dashboard/DashboardTemplateEditor.tsx"),LemonDialog=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDialog/index.ts");const DashboardTemplatesTable=()=>{const{allTemplates:allTemplates,allTemplatesLoading:allTemplatesLoading}=Object(index_esm.useValues)(dashboardTemplatesLogic.a),{openDashboardTemplateEditor:openDashboardTemplateEditor,setDashboardTemplateId:setDashboardTemplateId,deleteDashboardTemplate:deleteDashboardTemplate,updateDashboardTemplate:updateDashboardTemplate}=Object(index_esm.useActions)(dashboardTemplateEditorLogic.a),{user:user}=Object(index_esm.useValues)(userLogic.a),columns=[{title:"Name",dataIndex:"template_name",render:(_,_ref)=>{let{template_name:template_name}=_ref;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:template_name})}},{title:"Description",dataIndex:"dashboard_description",render:(_,_ref2)=>{let{dashboard_description:dashboard_description}=_ref2;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:dashboard_description})}},{title:"Type",dataIndex:"team_id",render:(_,_ref3)=>{let{scope:scope}=_ref3;return"global"===scope?Object(jsx_runtime.jsx)(LemonSnack.a,{children:"Official"}):Object(jsx_runtime.jsx)(LemonSnack.a,{children:"Team"})}},{width:0,render:(_,_ref4)=>{let{id:id,scope:scope}=_ref4;return null!=user&&user.is_staff?Object(jsx_runtime.jsx)(More.a,{overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(src.LemonButton,{status:"stealth",onClick:()=>{void 0!==id?(setDashboardTemplateId(id),openDashboardTemplateEditor()):console.error("Dashboard template id not defined")},fullWidth:!0,children:"Edit"}),Object(jsx_runtime.jsxs)(src.LemonButton,{status:"stealth",onClick:()=>{void 0!==id?updateDashboardTemplate({id:id,dashboardTemplateUpdates:{scope:"global"===scope?"team":"global"}}):console.error("Dashboard template id not defined")},fullWidth:!0,children:["Make visible to ","global"===scope?"this team only":"everyone"]}),Object(jsx_runtime.jsx)(src.LemonDivider,{}),Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{void 0!==id?LemonDialog.a.open({title:"Delete dashboard template?",description:"This action cannot be undone.",primaryButton:{status:"danger",children:"Delete",onClick:()=>{deleteDashboardTemplate(id)}}}):console.error("Dashboard template id not defined")},fullWidth:!0,status:"danger",disabledReason:"global"===scope?"Cannot delete global dashboard templates, make them team only first":void 0,children:"Delete dashboard"})]})}):null}}];return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonTable.a,{"data-attr":"dashboards-template-table",pagination:{pageSize:10},dataSource:Object.values(allTemplates),columns:columns,loading:allTemplatesLoading,defaultSorting:{columnKey:"name",order:1},emptyState:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"There are no dashboard templates."}),nouns:["template","templates"]}),Object(jsx_runtime.jsx)(DashboardTemplateEditor.a,{})]})};var LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts");const scene={component:Dashboards,logic:dashboardsLogic};function Dashboards(){const{dashboardsLoading:dashboardsLoading}=Object(index_esm.useValues)(dashboardsModel.a),{setCurrentTab:setCurrentTab}=Object(index_esm.useActions)(dashboardsLogic),{dashboards:dashboards,currentTab:currentTab,filters:filters}=Object(index_esm.useValues)(dashboardsLogic),{showNewDashboardModal:showNewDashboardModal}=Object(index_esm.useActions)(newDashboardLogic.a),{closePrompts:closePrompts}=Object(index_esm.useActions)(inAppPromptLogic.b),{featureFlags:featureFlags}=Object(index_esm.useValues)(featureFlagLogic.a),notebooksEnabled=featureFlags[constants.i.NOTEBOOKS],enabledTabs=[{key:DashboardsTab.Dashboards,label:"Dashboards"},{key:DashboardsTab.Templates,label:"Templates"}];return notebooksEnabled&&enabledTabs.splice(1,0,{key:DashboardsTab.Notebooks,label:"Notebooks"}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(NewDashboardModal.a,{}),Object(jsx_runtime.jsx)(DuplicateDashboardModal.a,{}),Object(jsx_runtime.jsx)(DeleteDashboardModal.a,{}),Object(jsx_runtime.jsx)(PageHeader.a,{title:"Dashboards",buttons:Object(jsx_runtime.jsx)(LemonButton.a,{"data-attr":"new-dashboard",onClick:()=>{closePrompts(),showNewDashboardModal()},type:"primary",children:"New dashboard"})}),Object(jsx_runtime.jsx)(LemonTabs.a,{activeKey:currentTab,onChange:newKey=>setCurrentTab(newKey),tabs:enabledTabs}),currentTab===DashboardsTab.Templates?Object(jsx_runtime.jsx)(DashboardTemplatesTable,{}):currentTab===DashboardsTab.Notebooks?Object(jsx_runtime.jsx)("div",{children:"Coming soon..."}):dashboardsLoading||dashboards.length>0||filters.search?Object(jsx_runtime.jsx)(DashboardsTable,{}):Object(jsx_runtime.jsx)(NoDashboards,{})]})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@4.46.0/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/NewDashboardModal.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".NewDashboardModal .DashboardTemplateChooser{max-width:780px;grid-template-columns:repeat(3,1fr);-moz-column-gap:.5em;column-gap:.5em;row-gap:.5em;display:grid}.NewDashboardModal .TemplateItem{width:240px;height:210px}",""]),module.exports=exports}}]);