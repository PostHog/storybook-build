"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[2707],{"./frontend/src/scenes/annotations/Annotations.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Annotations:()=>Annotations,scene:()=>scene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/scenes/annotations/annotationModalLogic.ts"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/types.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonTag_LemonTag__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip/index.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_organizationLogic__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/scenes/organizationLogic.tsx"),_AnnotationModal__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/scenes/annotations/AnnotationModal.tsx"),lib_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/utils.tsx"),lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/lib/lemon-ui/ProfilePicture/index.ts"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/lib/components/hedgehogs.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:Annotations,logic:_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__.bE};function Annotations(){const{currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_12__.teamLogic),{currentOrganization}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_organizationLogic__WEBPACK_IMPORTED_MODULE_13__.p),{annotations,annotationsLoading,next,loadingNext,timezone,shouldShowEmptyState,shouldShowProductIntroduction}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__.bE),{loadAnnotationsNext,openModalToCreateAnnotation}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__.bE),columns=[{title:"Annotation",key:"annotation",width:"30%",render:function RenderAnnotation(_,annotation){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"ph-no-capture",children:annotation.content})}},{title:`Date and time (${(0,lib_utils__WEBPACK_IMPORTED_MODULE_15__.ig)(timezone)})`,dataIndex:"date_marker",render:function RenderDateMarker(_,annotation){return annotation.date_marker?.format(_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__.yD)||""},sorter:(a,b)=>a.date_marker?.diff(b.date_marker)||1},{title:"Scope",key:"scope",render:function RenderType(_,annotation){const scopeName=_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__.B3[annotation.scope],tooltip=annotation.scope===_types__WEBPACK_IMPORTED_MODULE_3__.dc.Insight?`This annotation only applies to the "${annotation.insight_name}" insight`:annotation.scope===_types__WEBPACK_IMPORTED_MODULE_3__.dc.Project?`This annotation applies to all insights in the ${currentTeam?.name} project`:`This annotation applies to all insights in the ${currentOrganization?.name} organization`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_11__.u,{title:tooltip,placement:"right",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonTag_LemonTag__WEBPACK_IMPORTED_MODULE_7__.o,{className:"uppercase",children:annotation.scope===_types__WEBPACK_IMPORTED_MODULE_3__.dc.Insight?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_9__.Link,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_10__.j.insightView(annotation.insight_short_id),className:"flex items-center",target:"_blank",targetBlankIcon:!0,children:scopeName}):scopeName})})},sorter:(a,b)=>_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__.nO[a.scope]-_annotationModalLogic__WEBPACK_IMPORTED_MODULE_1__.nO[b.scope]},{title:"CreatedÂ by",dataIndex:"created_by",render:function Render(_,item){const{created_by,creation_type}=item;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"flex flex-row items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_16__.Y,{name:"GIT"===creation_type?"GitHub Actions":created_by?.first_name,email:"GIT"===creation_type?void 0:created_by?.email,showName:!0,size:"md",type:"GIT"===creation_type?"bot":"person"})})},sorter:(a,b)=>(a.created_by?.first_name||a.created_by?.email||"").localeCompare(b.created_by?.first_name||b.created_by?.email||"")},(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_5__.r)(),{key:"actions",width:0,render:function RenderActions(_,annotation){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.Jp,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_8__.yl5,{}),size:"small",type:"tertiary",status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_10__.j.annotation(annotation.id)})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__.m,{title:"Annotations",caption:shouldShowEmptyState||shouldShowProductIntroduction?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:"Annotations allow you to mark when certain changes happened so you can easily see how they impacted your metrics."}),buttons:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.Jp,{type:"primary","data-attr":"create-annotation",onClick:()=>openModalToCreateAnnotation(),children:"New annotation"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{"data-attr":"annotations-content",children:[(shouldShowEmptyState||shouldShowProductIntroduction)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"mt-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_17__.C,{productName:"Annotations",productKey:_types__WEBPACK_IMPORTED_MODULE_3__.Md.ANNOTATIONS,thingName:"annotation",description:"Annotations allow you to mark when certain changes happened so you can easily see how they impacted your metrics.",docsURL:"https://posthog.com/docs/data/annotations",action:()=>openModalToCreateAnnotation(),isEmpty:0===annotations.length,customHog:lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_18__.MicrophoneHog})}),!shouldShowEmptyState&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_4__.g,{"data-attr":"annotations-table",rowKey:"id",dataSource:annotations,columns,defaultSorting:{columnKey:"date_marker",order:-1},noSortingCancellation:!0,loading:annotationsLoading,emptyState:"No annotations yet"}),next&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"flex justify-center mt-6",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.Jp,{type:"primary",loading:loadingNext,onClick:()=>{loadAnnotationsNext()},children:"Load more annotations"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_AnnotationModal__WEBPACK_IMPORTED_MODULE_14__.h,{})]})}}}]);