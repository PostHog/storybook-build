(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(J,D,t){"use strict";t.d(D,"a",function(){return De});var V=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=t.n(V),q=t("./node_modules/core-js/modules/es.array.includes.js"),z=t.n(q),Y=t("./node_modules/core-js/modules/es.string.includes.js"),le=t.n(Y),oe=t("./node_modules/core-js/modules/es.object.values.js"),w=t.n(oe),e=t("./node_modules/core-js/modules/es.array.iterator.js"),o=t.n(e),ve=t("./node_modules/core-js/modules/es.object.to-string.js"),Z=t.n(ve),de=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Se=t.n(de),me=t("./node_modules/core-js/modules/es.object.keys.js"),ce=t.n(me),he=t("./node_modules/core-js/modules/es.symbol.js"),He=t.n(he),fe=t("./node_modules/core-js/modules/es.array.filter.js"),Ke=t.n(fe),Le=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),pe=t.n(Le),Oe=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Ie=t.n(Oe),ge=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Fe=t.n(ge),B=t("./node_modules/kea/lib/index.esm.js"),X=t("./frontend/src/lib/utils.tsx"),y=t("./frontend/src/types.ts"),x=t("./frontend/src/scenes/insights/sharedUtils.ts"),k=t("./frontend/src/scenes/insights/insightLogic.ts");function n(S,H){var ee=Object.keys(S);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(S);H&&(ae=ae.filter(function(Ye){return Object.getOwnPropertyDescriptor(S,Ye).enumerable})),ee.push.apply(ee,ae)}return ee}function O(S){for(var H=1;H<arguments.length;H++){var ee=arguments[H]!=null?arguments[H]:{};H%2?n(Object(ee),!0).forEach(function(ae){I()(S,ae,ee[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(ee)):n(Object(ee)).forEach(function(ae){Object.defineProperty(S,ae,Object.getOwnPropertyDescriptor(ee,ae))})}return S}function F(S){return Object.values(y.u).includes(S)}var De=Object(B.kea)({props:{},key:Object(x.c)("new"),path:function(H){return["lib","components","ChartFilter","chartFilterLogic",H]},connect:function(H){return{actions:[Object(k.c)(H),["setFilters"]],values:[Object(k.c)(H),["filters"]]}},actions:function(){return{setChartFilter:function(ee){return{chartFilter:ee}}}},selectors:{chartFilter:[function(S){return[S.filters]},function(S){var H=S.display,ee=S.funnel_viz_type;return(H===y.i.FunnelViz?ee:H)||null}]},listeners:function(H){var ee=H.actions,ae=H.values;return{setChartFilter:function(it){var Ee=it.chartFilter,ct=ae.filters,dt=ct.display,St=ct.funnel_viz_type;F(Ee)?(St!==Ee||dt!==y.i.FunnelViz)&&ee.setFilters(O(O({},ae.filters),{},{display:y.i.FunnelViz,funnel_viz_type:Ee})):Object(X.mb)(dt,Ee)||ee.setFilters(O(O({},ae.filters),{},{display:Ee}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(J,D,t){"use strict";t.d(D,"a",function(){return X});var V=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=t.n(V),q=t("./node_modules/core-js/modules/es.array.iterator.js"),z=t.n(q),Y=t("./node_modules/core-js/modules/es.object.to-string.js"),le=t.n(Y),oe=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),w=t.n(oe),e=t("./node_modules/core-js/modules/es.object.keys.js"),o=t.n(e),ve=t("./node_modules/core-js/modules/es.symbol.js"),Z=t.n(ve),de=t("./node_modules/core-js/modules/es.array.filter.js"),Se=t.n(de),me=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ce=t.n(me),he=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),He=t.n(he),fe=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Ke=t.n(fe),Le=t("./node_modules/kea/lib/index.esm.js"),pe=t("./frontend/src/lib/utils.tsx"),Oe=t("./frontend/src/types.ts"),Ie=t("./frontend/src/scenes/insights/sharedUtils.ts"),ge=t("./frontend/src/scenes/insights/insightLogic.ts");function Fe(y,x){var k=Object.keys(y);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(y);x&&(n=n.filter(function(O){return Object.getOwnPropertyDescriptor(y,O).enumerable})),k.push.apply(k,n)}return k}function B(y){for(var x=1;x<arguments.length;x++){var k=arguments[x]!=null?arguments[x]:{};x%2?Fe(Object(k),!0).forEach(function(n){I()(y,n,k[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(k)):Fe(Object(k)).forEach(function(n){Object.defineProperty(y,n,Object.getOwnPropertyDescriptor(k,n))})}return y}var X=Object(Le.kea)({props:{},key:Object(Ie.c)("new"),path:function(x){return["lib","components","CompareFilter","compareFilterLogic",x]},connect:function(x){return{actions:[Object(ge.c)(x),["setFilters"]],values:[Object(ge.c)(x),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(k){return{compare:k}},toggleCompare:!0}},selectors:{compare:[function(y){return[y.filters]},function(y){return!!(y!=null&&y.compare)}],disabled:[function(y){return[y.filters,y.canEditInsight]},function(y,x){var k=y.insight,n=y.date_from,O=y.display;return!x||k===Oe.y.LIFECYCLE||O===Oe.i.WorldMap||n==="all"}]},listeners:function(x){var k=x.values,n=x.actions;return{setCompare:function(F){var De=F.compare;Object(pe.mb)(De,k.compare)||n.setFilters(B(B({},k.filters),{},{compare:De}))},toggleCompare:function(){n.setCompare(!k.compare)}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(J,D,t){"use strict";t.d(D,"a",function(){return rt});var V=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=t.n(V),q=t("./node_modules/antd/es/card/index.js"),z=t("./node_modules/antd/es/row/index.js"),Y=t("./node_modules/antd/es/col/index.js"),le=t("./node_modules/core-js/modules/es.array.includes.js"),oe=t("./node_modules/core-js/modules/es.string.includes.js"),w=t("./node_modules/react/index.js"),e=t.n(w),o=t("./node_modules/kea/lib/index.esm.js"),ve=t("./node_modules/antd/es/tag/index.js"),Z=t("./node_modules/antd/es/select/index.js"),de=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),Se=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),me=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),ce=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},He=he,fe=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Ke=function(a,r){return w.createElement(fe.a,Object(ce.a)(Object(ce.a)({},a),{},{ref:r,icon:He}))};Ke.displayName="AreaChartOutlined";var Le=w.forwardRef(Ke),pe=t("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Ie=Oe,ge=function(a,r){return w.createElement(fe.a,Object(ce.a)(Object(ce.a)({},a),{},{ref:r,icon:Ie}))};ge.displayName="TableOutlined";var Fe=w.forwardRef(ge),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},X=B,y=function(a,r){return w.createElement(fe.a,Object(ce.a)(Object(ce.a)({},a),{},{ref:r,icon:X}))};y.displayName="PieChartOutlined";var x=w.forwardRef(y),k=t("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),n=t("./frontend/src/types.ts"),O=t("./frontend/src/lib/utils.tsx"),F=t("./frontend/src/scenes/insights/insightLogic.ts"),De=t("./frontend/src/scenes/insights/ActionFilter/entityFilterLogic.ts"),S=t("./frontend/src/lib/components/Tooltip.tsx");function H(s){var a=s.filters,r=s.onChange,l=s.disabled,d=Object(o.useValues)(F.c),i=d.insightProps,c=Object(o.useValues)(Object(de.a)(i)),f=c.chartFilter,m=Object(o.useActions)(Object(de.a)(i)),u=m.setChartFilter,h=a.insight===n.y.STICKINESS||a.insight===n.y.RETENTION,p=a.insight===n.y.RETENTION||a.insight===n.y.STICKINESS,g=a.insight===n.y.RETENTION||a.insight===n.y.STICKINESS||!!a.breakdown&&a.breakdown!=="$geoip_country_code"&&a.breakdown!=="$geoip_country_name"||Object(De.c)(a).length>1,T=a.insight===n.y.RETENTION,v=T||a.insight===n.y.STICKINESS||a.insight===n.y.RETENTION,C=a.insight===n.y.RETENTION?n.i.ActionsTable:a.insight===n.y.FUNNELS?n.i.FunnelViz:n.i.ActionsLineGraph;function E(_){var j=_.icon,A=_.tooltip,P=_.children,L=P===void 0?null:P;return e.a.createElement(S.a,{title:A,placement:"left"},e.a.createElement("div",{style:{width:"100%"}},j," ",L))}function U(_){var j=_.children,A=j===void 0?null:j;return e.a.createElement(ve.a,{color:"orange",style:{marginLeft:8,fontSize:10}},A)}var b=a.insight===n.y.FUNNELS?[{value:n.u.Steps,label:e.a.createElement(E,{icon:e.a.createElement(Se.a,null)},"Steps")},{value:n.u.Trends,label:e.a.createElement(E,{icon:e.a.createElement(me.a,null)},"Trends",e.a.createElement(U,null,"BETA"))}]:[{label:"Line Chart",options:[{value:n.i.ActionsLineGraph,label:e.a.createElement(E,{icon:e.a.createElement(me.a,null)},"Linear")},{value:n.i.ActionsLineGraphCumulative,label:e.a.createElement(E,{icon:e.a.createElement(Le,null)},"Cumulative"),disabled:h}]},{label:"Bar Chart",options:[{value:n.i.ActionsBar,label:e.a.createElement(E,{icon:e.a.createElement(pe.a,null)},"Time"),disabled:T},{value:n.i.ActionsBarValue,label:e.a.createElement(E,{icon:e.a.createElement(pe.a,null)},"Value"),disabled:v}]},{value:n.i.ActionsTable,label:e.a.createElement(E,{icon:e.a.createElement(Fe,null)},"Table")},{value:n.i.ActionsPie,label:e.a.createElement(E,{icon:e.a.createElement(x,null)},"Pie"),disabled:p},{value:n.i.WorldMap,label:e.a.createElement(E,{icon:e.a.createElement(k.a,null),tooltip:"Visualize data by country. Only works with one series at a time."},"World Map"),disabled:g}];return e.a.createElement(Z.a,{key:"2",defaultValue:a.display||C,value:f||C,onChange:function(j){u(j),r==null||r(j)},bordered:!0,dropdownAlign:O.a.bottomRight,dropdownMatchSelectWidth:!1,listHeight:288,"data-attr":"chart-filter",disabled:l,options:b})}try{H.displayName="ChartFilter",H.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:H.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(s){}var ee=t("./node_modules/antd/es/checkbox/index.js"),ae=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Ye(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=Object(o.useValues)(Object(ae.a)(a)),l=r.compare,d=r.disabled,i=Object(o.useActions)(Object(ae.a)(a)),c=i.setCompare;return d?null:e.a.createElement(ee.a,{onChange:function(m){c(m.target.checked)},checked:l,style:{marginLeft:8,marginRight:6},disabled:d},"Compare",e.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var it=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ee=t.n(it),ct=t("./node_modules/core-js/modules/es.array.map.js"),dt=t("./node_modules/core-js/modules/es.object.entries.js"),St=t("./node_modules/core-js/modules/es.array.iterator.js"),_a=t("./node_modules/core-js/modules/es.object.to-string.js"),Oa=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ja=t("./node_modules/core-js/modules/es.object.keys.js"),Ca=t("./node_modules/core-js/modules/es.symbol.js"),Pa=t("./node_modules/core-js/modules/es.array.filter.js"),Ta=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Sa=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),La=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),an=t("./frontend/src/scenes/insights/sharedUtils.ts");function Lt(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function It(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Lt(Object(r),!0).forEach(function(l){I()(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}var Ft=Object(o.kea)({props:{},key:Object(an.c)("new"),path:function(a){return["lib","components","IntervalFilter","intervalFilterLogic",a]},connect:function(a){return{actions:[Object(F.c)(a),["setFilters"]],values:[Object(F.c)(a),["filters"]]}},actions:function(){return{setInterval:function(r){return{interval:r}}}},listeners:function(a){var r=a.values,l=a.actions;return{setInterval:function(i){var c=i.interval;Object(O.mb)(c,r.filters.interval)||l.setFilters(It(It({},r.filters),{},{interval:c}))}}},selectors:{interval:[function(s){return[s.filters]},function(s){return s==null?void 0:s.interval}]}}),ut=t("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),rn={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function $e(s){var a=s.disabled,r=Object(o.useValues)(F.c),l=r.insightProps,d=Object(o.useValues)(Ft(l)),i=d.interval,c=Object(o.useActions)(Ft(l)),f=c.setInterval,m=Object.entries(rn).map(function(u){var h=Ee()(u,2),p=h[0],g=h[1].label;return{key:p,value:p,label:p===i?e.a.createElement(e.a.Fragment,null,e.a.createElement(ut.a,null)," ",g):g}});return e.a.createElement(Z.a,{bordered:!0,disabled:a,defaultValue:i||"day",value:i||void 0,dropdownMatchSelectWidth:!1,onChange:f,"data-attr":"interval-filter",options:m})}try{$e.displayName="IntervalFilter",$e.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:$e.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(s){}var sn=t("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),ln=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function xt(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function At(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?xt(Object(r),!0).forEach(function(l){I()(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}function on(){var s=Object(o.useValues)(F.c),a=s.filters,r=Object(o.useActions)(F.c),l=r.setFilters,d=a.interval,i=a.smoothing_intervals;if(!d)return null;var c=ln.a[d].map(function(f){var m=f.value,u=f.label;return{value:m,label:m===i?e.a.createElement(e.a.Fragment,null,e.a.createElement(sn.a,null)," ",u):u}});return c.length?e.a.createElement(Z.a,{key:d,bordered:!0,value:i||1,dropdownMatchSelectWidth:!1,onChange:function(m){l(At(At({},a),{},{smoothing_intervals:m}))},"data-attr":"smoothing-filter",options:c}):e.a.createElement(e.a.Fragment,null)}var ie=t("./frontend/src/lib/constants.tsx"),cn=t("./node_modules/@babel/runtime/helpers/extends.js"),dn=t.n(cn),Dt=t("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),un=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function Ge(s){var a=Object(o.useValues)(F.c),r=a.insightProps,l=Object(o.useValues)(Object(Dt.a)(r)),d=l.dates,i=d.dateFrom,c=d.dateTo,f=Object(o.useActions)(Object(Dt.a)(r)),m=f.setDates;return e.a.createElement(un.a,dn()({},s,{dateFrom:i!=null?i:void 0,dateTo:c!=null?c:void 0,onChange:function(h,p){var g;m(h,p),(g=s.onChange)===null||g===void 0||g.call(s,h,p)}}))}try{Ge.displayName="InsightDateFilter",Ge.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:Ge.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(s){}var mn=t("./node_modules/rc-picker/lib/generate/dayjs.js"),fn=t.n(mn),pn=t("./node_modules/antd/lib/date-picker/generatePicker/index.js"),gn=t.n(pn),Je=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),Re=t("./frontend/src/lib/dayjs.ts"),vn=gn()(fn.a);function Xe(s){var a=s.disabled,r=Object(o.useValues)(F.c),l=r.insightProps,d=Object(o.useValues)(Object(Je.e)(l)),i=d.filters,c=Object(o.useActions)(Object(Je.e)(l)),f=c.setFilters,m=i.date_to&&Object(Re.a)(i.date_to).year()!==Object(Re.a)().year()?", YYYY":"";return e.a.createElement(e.a.Fragment,null,e.a.createElement(S.a,{title:"Cohorts up to this end date"},e.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},e.a.createElement(ut.a,null),e.a.createElement(vn,{showTime:i.period==="Hour",use12Hours:!0,format:i.period==="Hour"?"MMM D".concat(m,", h a"):"MMM D".concat(m),value:i.date_to?Object(Re.a)(i.date_to):void 0,onChange:function(h){return f({date_to:h&&Object(Re.a)(h).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:a}))))}try{Xe.displayName="RetentionDatePicker",Xe.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:Xe.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(s){}var ne=t("./frontend/src/scenes/funnels/funnelLogic.ts"),hn=t("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function Ze(s){var a=s.disabled,r=Object(o.useValues)(F.c),l=r.insightProps,d=Object(o.useValues)(Object(ne.a)(l)),i=d.barGraphLayout,c=Object(o.useActions)(Object(ne.a)(l)),f=c.setFilters,m=[{value:ie.j.vertical,icon:e.a.createElement(pe.a,null),label:"Left to right"},{value:ie.j.horizontal,icon:e.a.createElement(hn.a,null),label:"Top to bottom"}];return e.a.createElement(Z.a,{defaultValue:ie.j.vertical,value:i||ie.j.vertical,onChange:function(h){return f({layout:h})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:a},e.a.createElement(Z.a.OptGroup,{label:"Graph display options"},m.map(function(u){return e.a.createElement(Z.a.Option,{key:u.value,value:u.value,label:e.a.createElement(e.a.Fragment,null,u.icon," ",u.label)},u.label)})))}try{Ze.displayName="FunnelDisplayLayoutPicker",Ze.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:Ze.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(s){}var Ia=t("./node_modules/core-js/modules/es.array.from.js"),Fa=t("./node_modules/core-js/modules/es.string.iterator.js"),xa=t("./node_modules/core-js/modules/es.array.slice.js"),En=t("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),mt=t("./frontend/src/scenes/paths/pathsLogic.ts"),bn=t("./frontend/src/scenes/userLogic.ts");function Qe(s){var a,r=s.disabled,l=Object(o.useValues)(F.c),d=l.insightProps,i=Object(o.useValues)(Object(mt.b)(d)),c=i.filter,f=Object(o.useActions)(Object(mt.b)(d)),m=f.setFilter,u=Object(o.useValues)(bn.a),h=u.user,p=2,g=h!=null&&(a=h.organization)!==null&&a!==void 0&&a.available_features.includes(n.d.PATHS_ADVANCED)?20:5,T=Array.from(Array.from(Array.from(Array(g+1).keys()).slice(p)),function(v){return{label:"".concat(v," Steps"),value:v}});return e.a.createElement(Z.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:c.step_limit||mt.a,onSelect:function(C){return m({step_limit:C})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:O.a.bottomRight,optionLabelProp:"label",disabled:r},T.map(function(v){return e.a.createElement(Z.a.Option,{key:v.value,value:v.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(En.a,null)," ",v.label)},v.label)}))}try{Qe.displayName="PathStepPicker",Qe.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:Qe.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(s){}var Rt=t("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function qe(s){var a=s.disabled,r=Object(o.useValues)(F.c),l=r.insightProps,d=Object(o.useValues)(Object(Je.e)(l)),i=d.retentionReference,c=Object(o.useActions)(Object(Je.e)(l)),f=c.setRetentionReference;return e.a.createElement(Z.a,{value:i,onChange:f,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:a},[{value:"total",icon:e.a.createElement(Rt.a,null),label:"Overall cohort"},{value:"previous",icon:e.a.createElement(Rt.a,null),label:"Relative to previous period"}].map(function(m){return e.a.createElement(Z.a.Option,{key:m.value,value:m.value,label:e.a.createElement(e.a.Fragment,null,m.icon," ",m.label)},m.label)}))}try{qe.displayName="ReferencePicker",qe.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:qe.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(s){}var Nt=t("./node_modules/antd/es/tooltip/index.js"),be=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),yn=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ye=t.n(yn),Aa=t("./node_modules/core-js/modules/es.set.js"),Da=t("./node_modules/core-js/modules/es.array.concat.js"),_n=t("./node_modules/antd/es/input-number/index.js"),ft=t("./node_modules/clsx/dist/clsx.m.js"),On=0,Mt=90,jn=new Set([5,15,25,50,90]),Cn=[{label:"Auto bins",value:ie.a,display:!0}].concat(ye()(Array.from(Array.from(Array(Mt+1).keys()),function(s){return{label:"".concat(s," bins"),value:s,display:jn.has(s)}})),[{label:"Custom",value:"custom",display:!0}]);function et(s){var a=s.disabled,r=Object(o.useValues)(F.c),l=r.insightProps,d=Object(o.useValues)(Object(ne.a)(l)),i=d.filters,c=d.numericBinCount,f=Object(o.useActions)(Object(ne.a)(l)),m=f.setBinCount;return e.a.createElement(Z.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:ie.a,value:i.bin_count||ie.a,onSelect:function(h){return m(h)},dropdownRender:function(h){return e.a.createElement(e.a.Fragment,null,h,e.a.createElement("div",null,e.a.createElement(_n.a,{className:"funnel-bins-custom-picker",size:"middle",min:On,max:Mt,value:c,onChange:function(g){var T=typeof g=="string"?parseInt(g):g;T&&m(T)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:O.a.bottomRight,optionLabelProp:"label",disabled:a},e.a.createElement(Z.a.OptGroup,{label:"Bin Count"},Cn.map(function(u){return u.value==="custom"?null:e.a.createElement(Z.a.Option,{className:Object(ft.a)({"select-option-hidden":!u.display}),key:u.value,value:u.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(pe.a,null)," ",u.label)},u.label)})))}try{et.displayName="FunnelBinsPicker",et.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:et.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(s){}var pt=t("./frontend/src/lib/logic/featureFlagLogic.ts"),je,Ce,Pn=function(a,r){switch(a){case n.y.FUNNELS:return r.funnel_viz_type===n.u.Trends;case n.y.RETENTION:case n.y.PATHS:return!1;case n.y.TRENDS:case n.y.STICKINESS:case n.y.LIFECYCLE:default:return!r.display||!ie.l.includes(r.display)}},Tn=function(a){switch(a){case n.y.TRENDS:case n.y.STICKINESS:return!0;case n.y.RETENTION:case n.y.FUNNELS:return!1;case n.y.LIFECYCLE:case n.y.PATHS:return!1;default:return!0}},Sn=(je={},I()(je,"".concat(n.y.TRENDS),!0),I()(je,"".concat(n.y.STICKINESS),!0),I()(je,"".concat(n.y.LIFECYCLE),!0),I()(je,"".concat(n.y.FUNNELS),!0),I()(je,"".concat(n.y.RETENTION),!1),I()(je,"".concat(n.y.PATHS),!0),je),Ln=(Ce={},I()(Ce,"".concat(n.y.TRENDS),!0),I()(Ce,"".concat(n.y.STICKINESS),!0),I()(Ce,"".concat(n.y.LIFECYCLE),!1),I()(Ce,"".concat(n.y.FUNNELS),!1),I()(Ce,"".concat(n.y.RETENTION),!1),I()(Ce,"".concat(n.y.PATHS),!1),Ce),In=function(a){var r,l;return!a.actions&&!a.events||((r=a.actions)===null||r===void 0?void 0:r.length)===0&&((l=a.events)===null||l===void 0?void 0:l.length)===0};function tt(s){var a=s.filters,r=s.activeView,l=s.disableTable,d=r===n.y.FUNNELS,i=r===n.y.PATHS,c=Object(o.useValues)(pt.a),f=c.featureFlags;return e.a.createElement("div",{className:"display-config-inner"},e.a.createElement("div",{className:"display-config-inner-row"},Sn[r]&&!l&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Date range"),e.a.createElement(Ge,{defaultValue:"Last 7 days",disabled:d&&In(a),bordered:!0,makeLabel:function(u){return e.a.createElement(e.a.Fragment,null,e.a.createElement(ut.a,null)," ",u,u=="All time"&&e.a.createElement(Nt.a,{title:"Only events dated after 2015 will be shown"},e.a.createElement(be.a,{className:"info-indicator"})))}})),Pn(r,a)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},e.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),e.a.createElement($e,{view:r})),r===n.y.TRENDS&&!a.breakdown_type&&!a.compare&&(!a.display||a.display===n.i.ActionsLineGraph)&&f[ie.h.SMOOTHING_INTERVAL]?e.a.createElement(on,null):null,r===n.y.RETENTION&&e.a.createElement(e.a.Fragment,null,e.a.createElement(Xe,null),e.a.createElement(qe,null)),i&&e.a.createElement("span",{className:"filter"},e.a.createElement(Qe,null)),Ln[r]&&e.a.createElement("span",{className:"filter"},e.a.createElement(Ye,null))),e.a.createElement("div",{className:"display-config-inner-row"},Tn(r)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Chart type"),e.a.createElement(H,{filters:a,disabled:a.insight===n.y.LIFECYCLE})),d&&a.funnel_viz_type===n.u.Steps&&e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"filter"},e.a.createElement(Ze,null))),d&&a.funnel_viz_type===n.u.TimeToConvert&&e.a.createElement("span",{className:"filter"},e.a.createElement(et,null))))}try{tt.displayName="InsightDisplayConfig",tt.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:tt.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(s){}var xe=t("./node_modules/antd/es/button/index.js"),Fn=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),we=t.n(Fn),xn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),Vt=t.n(xn),gt={};gt.insert="head",gt.singleton=!1;var Ra=we()(Vt.a,gt),Na=Vt.a.locals||{},We=t("./frontend/src/scenes/funnels/funnelUtils.ts"),Ma=t("./node_modules/core-js/modules/es.array.find.js"),Bt=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function Kt(){var s,a=Object(o.useValues)(F.c),r=a.insightProps,l=Object(o.useValues)(Object(ne.a)(r)),d=l.filters,i=l.numberOfSeries,c=l.areFiltersValid,f=l.filterSteps,m=Object(o.useActions)(Object(ne.a)(r)),u=m.changeStepRange;if(d.funnel_viz_type===n.u.Steps)return null;var h=function(C,E){u(C,E)},p=c?Array.from(Array(Math.max(i)).keys()).slice(0,-1):[0],g=c?Array.from(Array(Math.max(i)).keys()).slice(((s=d.funnel_from_step)!==null&&s!==void 0?s:0)+1):[1],T=function(C){return C.map(function(E){var U=f.find(function(b){return b.order===E});return U?e.a.createElement(Z.a.Option,{key:E,value:E,label:"Step ".concat(E+1)},e.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.a.createElement("span",{style:{marginRight:4}},"Step ",E+1,":"),e.a.createElement(Bt.a,{filter:U}))):null})};return e.a.createElement(z.a,{className:"funnel-options-inputs"},e.a.createElement("span",{className:"text-muted-alt"},"from"),e.a.createElement(Z.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:O.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:d.funnel_from_step||0,onChange:function(C){return h(C,d.funnel_to_step)},style:{marginLeft:4,marginRight:4}},T(p)),e.a.createElement("span",{className:"text-muted-alt"},"to"),e.a.createElement(Z.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:O.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:d.funnel_to_step||Math.max(i-1,1),onChange:function(C){return h(d.funnel_from_step,C)},style:{marginLeft:4,marginRight:4}},T(g)))}function An(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=s.filters,l=s.activeView,d=Object(o.useValues)(Object(ne.a)(a)),i=d.conversionMetrics,c=d.aggregationTargetLabel,f=Object(o.useActions)(Object(de.a)(a)),m=f.setChartFilter;if(l!==n.y.FUNNELS)return null;var u=[].concat(ye()(r.funnel_viz_type===n.u.Steps?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(S.a,{title:"Overall conversion rate for all ".concat(c.plural," on the entire funnel.")},e.a.createElement(be.a,{className:"info-indicator left"})),"Total conversion rate"),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement("span",{className:"l4"},Object(We.c)(i.totalRate),"%"))]:[]),ye()(r.funnel_viz_type!==n.u.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(S.a,{title:"Average (arithmetic mean) of the total time each ".concat(c.singular," spent in the entire funnel.")},e.a.createElement(be.a,{className:"info-indicator left"})),"Average time to convert"," "),r.funnel_viz_type===n.u.TimeToConvert&&e.a.createElement(Kt,null),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement(xe.a,{type:"link",onClick:function(){return m(n.u.TimeToConvert)},disabled:r.funnel_viz_type===n.u.TimeToConvert},e.a.createElement("span",{className:"l4"},Object(O.N)(i.averageTime))))]:[]),ye()(r.funnel_viz_type===n.u.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),e.a.createElement(Kt,null))]:[]));return e.a.createElement(z.a,{className:"funnel-canvas-label",align:"middle"},u.map(function(h,p){return e.a.createElement(e.a.Fragment,{key:p},p>0&&e.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),h)}))}var Dn=t("./frontend/src/lib/hooks/usePeriodicRerender.ts"),wt=3;function Rn(){var s=Object(o.useValues)(F.c),a=s.lastRefresh,r=Object(o.useActions)(F.c),l=r.loadResults;return Object(Dn.a)(15e3),e.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",a?Object(Re.a)(a).fromNow():"a while ago",e.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),e.a.createElement(Nt.a,{title:e.a.createElement(e.a.Fragment,null,"Insights can be refreshed",e.a.createElement("br",null),"every ",wt," minutes.")},e.a.createElement(xe.a,{size:"small",type:"link",onClick:function(){return l(!0)},disabled:!!a&&Object(Re.a)().subtract(wt-.5,"minutes").isBefore(a),style:{padding:0}},e.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var Wt=t("./frontend/src/scenes/trends/PersonsModal.tsx"),vt=t("./frontend/src/scenes/trends/viz/index.ts"),Nn=t("./frontend/src/scenes/trends/SaveCohortModal.tsx"),Ue=t("./frontend/src/scenes/trends/trendsLogic.ts"),nt=t("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(s){}var Ne=t("./frontend/src/scenes/trends/personsModalLogic.ts"),ht=t("./frontend/src/lib/utils/eventUsageLogic.ts"),Ut=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),Mn=t("./frontend/src/scenes/insights/WorldMap/index.ts");function Me(s){var a=s.view,r=Object(o.useValues)(Ut.a),l=r.insightMode,d=Object(o.useValues)(F.c),i=d.insightProps,c=Object(o.useValues)(Ne.b),f=c.cohortModalVisible,m=Object(o.useActions)(Ne.b),u=m.setCohortModalVisible,h=Object(o.useValues)(Object(Ue.a)(i)),p=h.filters,g=h.loadMoreBreakdownUrl,T=h.breakdownValuesLoading,v=h.showModalActions,C=h.aggregationTargetLabel,E=Object(o.useActions)(Object(Ue.a)(i)),U=E.loadMoreBreakdownValues,b=Object(o.useValues)(Ne.b),_=b.showingPeople,j=Object(o.useActions)(Ne.b),A=j.saveCohortWithUrl,P=Object(o.useActions)(ht.f),L=P.reportCohortCreatedFromPersonsModal,R=function(){if(!p.display||p.display===n.i.ActionsLineGraph||p.display===n.i.ActionsLineGraphCumulative||p.display===n.i.ActionsBar)return e.a.createElement(vt.b,null);if(p.display===n.i.ActionsTable)return e.a.createElement(o.BindLogic,{logic:Ue.a,props:{dashboardItemId:null,view:a,filters:null}},e.a.createElement(nt.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(a),canEditSeriesNameInline:l===n.z.Edit,isMainInsightView:!0}));if(p.display===n.i.ActionsPie)return e.a.createElement(vt.c,null);if(p.display===n.i.ActionsBarValue)return e.a.createElement(vt.a,null);if(p.display===n.i.WorldMap)return e.a.createElement(Mn.a,null)};return e.a.createElement(e.a.Fragment,null,(p.actions||p.events)&&e.a.createElement("div",{className:p.display!==n.i.ActionsTable&&p.display!==n.i.WorldMap?"trends-insights-container":void 0},R()),p.breakdown&&g&&e.a.createElement("div",{className:"mt text-center"},e.a.createElement("div",{className:"text-muted mb"},"For readability, ",e.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),e.a.createElement("div",null,e.a.createElement(xe.a,{style:{textAlign:"center",marginBottom:16},onClick:U,loading:T},"Load more breakdown values"))),e.a.createElement(Wt.a,{visible:_&&!f,view:a,filters:p,onSaveCohort:function(){u(!0)},showModalActions:v,aggregationTargetLabel:C}),e.a.createElement(Nn.a,{visible:f,onOk:function(re){A(re),u(!1),L(p)},onCancel:function(){return u(!1)}}))}try{Me.displayName="TrendInsight",Me.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:Me.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(s){}var Vn=t("./frontend/src/scenes/funnels/Funnel.tsx");function Bn(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=Object(o.useValues)(Object(ne.a)(a)),l=r.isValidFunnel,d=r.insightLoading,i=r.filters,c=r.areFiltersValid,f=r.barGraphLayout,m=r.aggregationTargetLabel,u=Object(o.useValues)(Ne.b),h=u.showingPeople,p=u.cohortModalVisible,g=Object(o.useActions)(Ne.b),T=g.setCohortModalVisible,v=l&&c||d,C=i.funnel_viz_type==n.u.Steps&&f===ie.j.vertical;return e.a.createElement(e.a.Fragment,null,e.a.createElement(Wt.a,{visible:h&&!p,view:n.y.FUNNELS,filters:i,onSaveCohort:function(){T(!0)},showModalActions:i.aggregation_group_type_index==null,aggregationTargetLabel:m}),e.a.createElement("div",{className:Object(ft.a)("funnel-insights-container",{"non-empty-state":v,"no-padding":C})},e.a.createElement(Vn.a,null)))}var Kn=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),wn=t("./frontend/src/scenes/paths/Paths.tsx"),ze=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function Wn(){var s=Object(o.useValues)(F.c),a=s.activeView;return a!==n.y.PATHS?null:e.a.createElement(z.a,{className:"funnel-canvas-label",align:"middle"},e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var Un=t("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),zn=t("./node_modules/antd/lib/input/TextArea.js"),kn=t.n(zn),Hn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),zt=t.n(Hn),Et={};Et.insert="head",Et.singleton=!1;var Va=we()(zt.a,Et),Ba=zt.a.locals||{},Ka=t("./node_modules/core-js/modules/es.number.is-integer.js"),wa=t("./node_modules/core-js/modules/es.number.constructor.js"),Wa=t("./node_modules/core-js/modules/es.number.to-fixed.js"),Ua=t("./node_modules/core-js/modules/es.regexp.exec.js"),za=t("./node_modules/core-js/modules/es.string.split.js"),Yn=t("./node_modules/antd/es/spin/index.js"),bt=t("./node_modules/antd/es/table/index.js"),$n=t("./node_modules/antd/lib/table/Column.js"),ue=t.n($n),kt=t("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},Jn=Gn,Ht=function(a,r){return w.createElement(fe.a,Object(ce.a)(Object(ce.a)({},a),{},{ref:r,icon:Jn}))};Ht.displayName="FallOutlined";var Yt=w.forwardRef(Ht),$t=t("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),_e=t("./frontend/src/lib/components/icons.tsx"),Xn=t("./node_modules/antd/lib/checkbox/Checkbox.js"),at=t.n(Xn),Ve=t("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),Be=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Zn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),Gt=t.n(Zn),yt={};yt.insert="head",yt.singleton=!1;var ka=we()(Gt.a,yt),Ha=Gt.a.locals||{},Qn=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function ke(s){var a=s.id,r=s.offset,l=s.children,d=Object(o.useActions)(Object(Qn.a)({id:a,offset:r})),i=d.scrolling,c=Object(w.useRef)(null);return Object(w.useEffect)(function(){var f=c.current;return document.addEventListener("scroll",function(){return i(f)}),function(){return document.removeEventListener("scroll",function(){return i(f)})}},[c.current]),e.a.createElement("div",{ref:c},l)}try{ke.displayName="VisibilitySensor",ke.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:ke.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(s){}var Ae=t("./frontend/src/lib/components/LemonButton/index.ts"),Jt=t("./frontend/src/lib/components/Popup/Popup.tsx"),qn=t("./node_modules/antd/es/modal/index.js"),ea=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),ta=t("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),na=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),aa=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),Xt=t.n(aa),_t={};_t.insert="head",_t.singleton=!1;var Ya=we()(Xt.a,_t),$a=Xt.a.locals||{},ra=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),Zt=t("./frontend/src/lib/components/Link.tsx"),sa=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function la(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=Object(ne.a)(a),l=Object(o.useValues)(r),d=l.correlationsLoading,i=l.funnelCorrelationDetails,c=l.parseDisplayNameForCorrelation,f=l.correlationMatrixAndScore,m=Object(o.useActions)(r),u=m.setFunnelCorrelationDetails,h=m.openCorrelationPersonsModal,p=(i==null?void 0:i.result_type)===n.q.Events?"event":"property",g=(i==null?void 0:i.result_type)===n.q.Events?"performed event":"have property",T=e.a.createElement(e.a.Fragment,null);if(i){var v=c(i),C=v.first_value,E=v.second_value;T=e.a.createElement(e.a.Fragment,null,e.a.createElement(Be.a,{value:C}),E!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Be.a,{value:E,disablePopover:!0})))}var U=f.correlationScore,b=f.truePositive,_=f.falsePositive,j=f.trueNegative,A=f.falseNegative,P=f.correlationScoreStrength,L=P==="strong"?e.a.createElement(ea.a,{style:{color:"var(--success)"}}):P==="moderate"?e.a.createElement(ta.a,{style:{color:"var(--warning)"}}):e.a.createElement(na.a,{style:{color:"var(--danger)"}}),R=function(){return u(null)};return e.a.createElement(qn.a,{className:"correlation-matrix",visible:!!i,onCancel:R,destroyOnClose:!0,footer:e.a.createElement(xe.a,{onClick:R},"Dismiss"),width:600,title:"Correlation details"},e.a.createElement("div",{className:"correlation-table-wrapper"},d?e.a.createElement("div",{className:"mt text-center"},e.a.createElement(ra.a,{size:"lg"})):i?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",g," ",e.a.createElement("b",null,T),"."),e.a.createElement("table",null,e.a.createElement("thead",null,e.a.createElement("tr",{className:"table-title"},e.a.createElement("td",{colSpan:3},"Results matrix")),e.a.createElement("tr",null,e.a.createElement("td",null,(i==null?void 0:i.result_type)===n.q.Events?"Performed event":"Has property"),e.a.createElement("td",null,"Success"),e.a.createElement("td",null,"Dropped off"))),e.a.createElement("tbody",null,e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"Yes"),e.a.createElement("td",null,e.a.createElement(S.a,{title:"True positive (TP) - Percentage of users who ".concat(g," and completed the funnel.")},e.a.createElement("div",{className:"percentage"},b?Object(O.ob)(b/(b+_)):"0.00%")),b===0?"0 users":e.a.createElement(Zt.a,{onClick:function(){h(i,!0)}},Object(O.qb)(b,"user",void 0,!0))),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(S.a,{title:"False negative (FN) - Percentage of users who ".concat(g," and did not complete the funnel.")},A?Object(O.ob)(A/(A+j)):"0.00%")),A===0?"0 users":e.a.createElement(Zt.a,{onClick:function(){h(i,!1)}},Object(O.qb)(A,"user",void 0,!0)))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"No"),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(S.a,{title:"False positive (FP) - Percentage of users who did not ".concat(g," and completed the funnel.")},_?Object(O.ob)(_/(b+_)):"0.00%")),Object(O.qb)(_,"user",void 0,!0)),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(S.a,{title:"True negative (TN) - Percentage of users who did not ".concat(g," and did not complete the funnel.")},j?Object(O.ob)(j/(A+j)):"0.00%")),Object(O.qb)(j,"user",void 0,!0))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"}),e.a.createElement("td",null,e.a.createElement("b",null,"100%")),e.a.createElement("td",null,e.a.createElement("b",null,"100%"))))),e.a.createElement("div",{className:"mt text-center"},Object(O.j)((i==null?void 0:i.result_type)||"")," ",e.a.createElement("b",null,T)," ","has a"," ",(i==null?void 0:i.correlation_type)===n.r.Success?e.a.createElement("b",{className:"text-success"},"positive"," ",e.a.createElement(S.a,{title:"Positive correlation means this ".concat(p," is correlated with a successful conversion.")},e.a.createElement(be.a,{className:"cursor-pointer"}))):e.a.createElement("b",{className:"text-danger"},"negative"," ",e.a.createElement(S.a,{title:"Negative correlation means this ".concat(p," is correlated with an unsuccessful conversion (user dropped off).")},e.a.createElement(be.a,{className:"cursor-pointer"})))," ","correlation score of"," ",e.a.createElement("b",{style:{color:P==="strong"?"var(--success)":P==="moderate"?"var(--warning)":"var(--danger)"}},e.a.createElement(S.a,{title:"This ".concat(p," has ").concat(P," correlation.")},e.a.createElement("span",{style:{cursor:"pointer"}},L," ",U.toFixed(3)))))):e.a.createElement("div",null,e.a.createElement(sa.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function oa(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=Object(ne.a)(a),l=Object(o.useValues)(r),d=l.stepsWithCount,i=l.correlationValues,c=l.correlationTypes,f=l.eventHasPropertyCorrelations,m=l.eventWithPropertyCorrelationsValues,u=l.parseDisplayNameForCorrelation,h=l.correlationsLoading,p=l.eventWithPropertyCorrelationsLoading,g=l.nestedTableExpandedKeys,T=l.correlationPropKey,v=l.filters,C=l.aggregationTargetLabel,E=Object(o.useActions)(r),U=E.setCorrelationTypes,b=E.loadEventWithPropertyCorrelations,_=E.addNestedTableExpandedKey,j=E.removeNestedTableExpandedKey,A=E.openCorrelationPersonsModal,P=E.loadCorrelations,L=Object(o.useActions)(ht.f),R=L.reportCorrelationInteraction;Object(w.useEffect)(function(){P({})},[v]);var W=function(M){c?c.includes(M)?U(c.filter(function(G){return G!==M})):U([].concat(ye()(c),[M])):U([M])},re=function(M){var G=function(ot){return ot<10&&!Number.isInteger(ot)?ot.toFixed(1):ot.toFixed()},se=M.correlation_type===n.r.Success,Q=u(M),Te=Q.first_value,st=Q.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,se?e.a.createElement(kt.a,{style:{color:"green"}}):e.a.createElement(Yt,{style:{color:"red"}})," ",e.a.createElement(Be.a,{value:Te}),st!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Be.a,{value:st,disablePopover:!0}))),e.a.createElement("div",null,Object(O.j)(C.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,G(M.odds_ratio),"x ",se?"more":"less"," likely"))," ","to"," ",M.result_type===n.q.EventWithProperties?"have this event property":"do this event"),e.a.createElement(la,null))},$=function(M){return e.a.createElement(Ve.c,{onClick:function(){A(M,!0)}},M.success_count)},N=function(M){return e.a.createElement(Ve.c,{onClick:function(){A(M,!1)}},M.failure_count)},K=function(M){return p?e.a.createElement("div",{className:"nested-properties-loading"},e.a.createElement(Yn.a,null),e.a.createElement("h3",null,"Loading correlation results"),e.a.createElement("p",null,"This process can take up to 20 seconds. ")):e.a.createElement("div",null,e.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),e.a.createElement(bt.a,{dataSource:m[M],rowKey:function(se){return se.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(se,Q){return R(n.q.EventWithProperties,"pagination change",{page:se,page_size:Q})}}},e.a.createElement(ue.a,{title:"Property",key:"eventName",render:function(se,Q){return re(Q)},align:"left"}),e.a.createElement(ue.a,{title:"Completed",key:"success_count",render:function(se,Q){return $(Q)},width:90,align:"center"}),e.a.createElement(ue.a,{title:"Dropped off",key:"failure_count",render:function(se,Q){return N(Q)},width:120,align:"center"}),e.a.createElement(ue.a,{title:"",key:"actions",render:function(se,Q){return e.a.createElement(Qt,{record:Q})},align:"center",width:30})))};return d.length>1?e.a.createElement(ke,{id:T,offset:152},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement("span",{className:"funnel-correlation-header"},e.a.createElement("span",{className:"table-header"},e.a.createElement(_e.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),e.a.createElement("span",{className:"table-options"},e.a.createElement("p",{className:"title"},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return W(n.r.Success)}},e.a.createElement(at.a,{checked:c.includes(n.r.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return W(n.r.Failure)}},e.a.createElement(at.a,{checked:c.includes(n.r.Failure),style:{pointerEvents:"none"}},"Dropoff")))),e.a.createElement(bt.a,{dataSource:i,loading:h,size:"small",scroll:{x:"max-content"},rowKey:function(M){return M.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return R(n.q.Events,"load more")}},expandable:{expandedRowRender:function(M){return K(M.event.event)},expandedRowKeys:g,rowExpandable:function(){return v.aggregation_group_type_index===void 0},expandIcon:function(M){var G=M.expanded,se=M.onExpand,Q=M.record,Te=M.expandable;return Te?G?e.a.createElement(S.a,{title:"Collapse"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(lt){j(Q.event.event),se(Q,lt)}},e.a.createElement(_e.IconUnfoldLess,null))):e.a.createElement(S.a,{title:"Expand to see correlated properties for this event"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(lt){!f(Q.event.event)&&b(Q.event.event),_(Q.event.event),se(Q,lt)}},e.a.createElement(_e.IconUnfoldMore,null))):null}}},e.a.createElement(ue.a,{title:"Event",key:"eventName",render:function(M,G){return re(G)},align:"left",ellipsis:!0}),e.a.createElement(ue.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(S.a,{title:"".concat(Object(O.j)(C.plural)," ").concat(v.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},e.a.createElement(be.a,{className:"column-info"}))),key:"success_count",render:function(M,G){return $(G)},width:90,align:"center"}),e.a.createElement(ue.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(S.a,{title:e.a.createElement(e.a.Fragment,null,Object(O.j)(C.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(be.a,{className:"column-info"}))),key:"failure_count",render:function(M,G){return N(G)},width:120,align:"center"}),e.a.createElement(ue.a,{title:"",key:"actions",render:function(M,G){return e.a.createElement(Qt,{record:G})},width:30})))):null}var Qt=function(a){var r=a.record,l=Object(o.useValues)(F.c),d=l.insightProps,i=Object(ne.a)(d),c=Object(o.useActions)(i),f=c.excludeEventPropertyFromProject,m=c.excludeEventFromProject,u=c.setFunnelCorrelationDetails,h=Object(o.useValues)(i),p=h.isEventPropertyExcluded,g=h.isEventExcluded,T=r.event.event.split("::"),v=Object(w.useState)(!1),C=Ee()(v,2),E=C[0],U=C[1];return e.a.createElement(z.a,{style:{justifyContent:"flex-end"}},e.a.createElement(Jt.a,{visible:E,actionable:!0,onClickOutside:function(){return U(!1)},overlay:e.a.createElement(e.a.Fragment,null,r.result_type===n.q.Events&&e.a.createElement(Ae.a,{onClick:function(){return u(r)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Ae.a,{disabled:r.result_type===n.q.EventWithProperties?p(T[1]):g(T[0]),onClick:function(){return r.result_type===n.q.EventWithProperties?f(T[0],T[1]):m(T[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},e.a.createElement(Ae.a,{type:"stealth",onClick:function(){return U(!E)}},e.a.createElement($t.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},ia=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function ca(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=Object(ne.a)(a),l=Object(o.useValues)(r),d=l.stepsWithCount,i=l.propertyCorrelationValues,c=l.propertyCorrelationTypes,f=l.excludedPropertyNames,m=l.parseDisplayNameForCorrelation,u=l.propertyCorrelationsLoading,h=l.inversePropertyNames,p=l.propertyNames,g=l.correlationPropKey,T=l.allProperties,v=l.filters,C=l.aggregationTargetLabel,E=Object(o.useActions)(r),U=E.setPropertyCorrelationTypes,b=E.setPropertyNames,_=E.openCorrelationPersonsModal,j=E.loadPropertyCorrelations,A=Object(o.useActions)(ht.f),P=A.reportCorrelationInteraction;Object(w.useEffect)(function(){p.length===0&&b(T),j({})},[v]);var L=function(N){c?c.includes(N)?U(c.filter(function(K){return K!==N})):U([].concat(ye()(c),[N])):U([N])},R=function(N){return e.a.createElement(Ve.c,{onClick:function(){_(N,!0)}},N.success_count)},W=function(N){return e.a.createElement(Ve.c,{onClick:function(){_(N,!1)}},N.failure_count)},re=function(N){var K=function(Te){return Te<10&&!Number.isInteger(Te)?Te.toFixed(1):Te.toFixed()},te=N.correlation_type===n.r.Success,M=m(N),G=M.first_value,se=M.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,te?e.a.createElement(kt.a,{style:{color:"green"}}):e.a.createElement(Yt,{style:{color:"red"}})," ",e.a.createElement(Be.a,{value:G}),se!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Be.a,{value:se,disablePopover:!0}))),e.a.createElement("div",null,Object(O.j)(C.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,K(N.odds_ratio),"x ",te?"more":"less"," likely"))," ","to have this property value"))};return d.length>1?e.a.createElement(ke,{offset:150,id:"".concat(g,"-properties")},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement(z.a,{className:"funnel-correlation-header"},e.a.createElement(Y.a,{className:"table-header"},e.a.createElement(_e.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),e.a.createElement(Y.a,{className:"table-options"},e.a.createElement(z.a,{style:{display:"contents"}},T.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"title"},"PROPERTIES "),e.a.createElement(ia.a,{value:new Set(p),onChange:function(N){return b(N)},allProperties:h(f||[])}))),e.a.createElement(z.a,{style:{display:"contents"}},e.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return L(n.r.Success)}},e.a.createElement(at.a,{checked:c.includes(n.r.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return L(n.r.Failure)}},e.a.createElement(at.a,{checked:c.includes(n.r.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),e.a.createElement(bt.a,{dataSource:i,loading:u,scroll:{x:"max-content"},size:"small",rowKey:function(N){return N.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(N,K){return P(n.q.Properties,"pagination change",{page:N,page_size:K})}}},e.a.createElement(ue.a,{title:"".concat(Object(O.j)(C.singular)," property"),key:"propertName",render:function(N,K){return re(K)},align:"left"}),e.a.createElement(ue.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(S.a,{title:"".concat(Object(O.j)(C.plural)," ").concat(v.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},e.a.createElement(be.a,{className:"column-info"}))),key:"success_count",render:function(N,K){return R(K)},width:90,align:"center"}),e.a.createElement(ue.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(S.a,{title:e.a.createElement(e.a.Fragment,null,Object(O.j)(C.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," have this property and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(be.a,{className:"column-info"}))),key:"failure_count",render:function(N,K){return W(K)},width:120,align:"center"}),e.a.createElement(ue.a,{title:"",key:"actions",render:function(N,K){return e.a.createElement(da,{record:K})},align:"center",width:30})))):null}var da=function(a){var r=a.record,l=Object(o.useValues)(F.c),d=l.insightProps,i=Object(ne.a)(d),c=Object(o.useActions)(i),f=c.excludePropertyFromProject,m=c.setFunnelCorrelationDetails,u=Object(o.useValues)(i),h=u.isPropertyExcludedFromProject,p=(r.event.event||"").split("::")[0],g=Object(w.useState)(!1),T=Ee()(g,2),v=T[0],C=T[1];return e.a.createElement(z.a,{style:{justifyContent:"flex-end"}},e.a.createElement(Jt.a,{visible:v,actionable:!0,onClickOutside:function(){return C(!1)},overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(Ae.a,{onClick:function(){return m(r)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Ae.a,{disabled:h(p),onClick:function(){return f(p)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},e.a.createElement(Ae.a,{type:"stealth",onClick:function(){return C(!v)}},e.a.createElement($t.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},qt=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),ua=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),ma=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),fa=function(){var a,r=Object(o.useValues)(F.c),l=r.insightProps,d=Object(o.useValues)(Object(ne.a)(l)),i=d.isSkewed,c=d.stepsWithCount,f=d.correlationFeedbackHidden,m=d.correlationDetailedFeedbackVisible,u=d.correlationFeedbackRating,h=d.correlationAnalysisAvailable,p=d.aggregationTargetLabel,g=Object(o.useActions)(Object(ne.a)(l)),T=g.sendCorrelationAnalysisFeedback,v=g.hideSkewWarning,C=g.hideCorrelationAnalysisFeedback,E=g.setCorrelationFeedbackRating,U=g.setCorrelationDetailedFeedback,b=Object(o.useValues)(ma.a),_=b.preflight,j=Object(w.useRef)(null);return c.length<=1?null:!h&&!(_!=null&&(a=_.instance_preferences)!==null&&a!==void 0&&a.disable_paid_fs)?e.a.createElement(ua.a,{identifier:n.d.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(p.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(p.plural," are converting or dropping off.")}):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Correlation analysis"),e.a.createElement("div",{className:"funnel-correlation"},i&&e.a.createElement(q.a,{className:"skew-warning"},e.a.createElement("h4",null,e.a.createElement(_e.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",e.a.createElement(qt.a,{className:"close-button",onClick:v})),e.a.createElement("div",null,e.a.createElement("b",null,"Tips for adjusting your funnel:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),e.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),e.a.createElement(oa,null),!f&&e.a.createElement(q.a,{className:"correlation-feedback"},e.a.createElement(z.a,{className:"row-initial"},e.a.createElement(Y.a,{span:14},e.a.createElement("h4",null,e.a.createElement(Un.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),e.a.createElement(Y.a,{span:9,style:{alignContent:"right"}},!!u&&e.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(A,P){return e.a.createElement(xe.a,{key:P,className:"emoji-button",style:u===A[0]?{background:"#5375FF"}:u?{display:"none"}:{},onClick:function(){u===A[0]?E(0):(E(A[0]),setTimeout(function(){var R;return(R=j.current)===null||R===void 0?void 0:R.focus()},100))}},A[1])})),e.a.createElement(Y.a,{span:1},e.a.createElement(qt.a,{className:"close-button",onClick:C}))),e.a.createElement("div",{style:{display:m?void 0:"none"}},e.a.createElement("form",{onSubmit:T},e.a.createElement(kn.a,{onBlur:function(P){return U(P.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:j,onKeyDown:function(P){if(P.key==="Enter"&&P.metaKey){var L;(L=j.current)===null||L===void 0||L.blur(),T()}}}),e.a.createElement("div",{className:"text-right"},e.a.createElement(xe.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),e.a.createElement(ca,null)))},Ga=t("./node_modules/core-js/modules/es.regexp.to-string.js"),pa=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),en=t.n(pa),Ot={};Ot.insert="head",Ot.singleton=!1;var Ja=we()(en.a,Ot),Xa=en.a.locals||{},ga=t("./frontend/src/lib/components/InsightLabel/index.tsx"),jt=t("./frontend/src/lib/colors.ts"),Ct=t("./frontend/src/lib/components/LemonCheckbox/index.ts");function va(){var s=Object(o.useValues)(F.c),a=s.filters,r=s.activeView,l=Object(o.useActions)(F.c),d=l.toggleInsightLegend,i=Object(o.useValues)(pt.a),c=i.featureFlags;return(r===n.y.TRENDS&&a.display!==n.i.WorldMap&&a.display!==n.i.ActionsTable||r===n.y.STICKINESS)&&c[ie.h.INSIGHT_LEGENDS]?e.a.createElement(xe.a,{className:"insight-legend-button",onClick:d},e.a.createElement(_e.IconLegend,null),e.a.createElement("span",{className:"insight-legend-button-title"},a.show_legend?"Hide":"Show"," legend")):null}function ha(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=s.filters,l=Object(Ue.a)(a),d=Object(o.useValues)(l),i=d.indexedResults,c=d.hiddenLegendKeys,f=Object(o.useActions)(l),m=f.toggleVisibility;return e.a.createElement("div",{className:"insight-legend-menu"},e.a.createElement("div",{className:"insight-legend-menu-scroll"},i&&i.map(function(u){var h,p;return e.a.createElement(z.a,{key:u.id,className:"insight-legend-menu-item",wrap:!1},e.a.createElement(Ct.a,{className:"insight-legend-menu-item-inner",color:Object(jt.c)(u.id,!!r.compare),checked:!c[u.id],onChange:function(){return m(u.id)},rowProps:{fullWidth:!0},label:e.a.createElement(ga.b,{key:u.id,seriesColor:Object(jt.c)(u.id,!!r.compare),action:u.action,fallbackName:u.breakdown_value===""?"None":u.label,hasMultipleSeries:i.length>1,breakdownValue:u.breakdown_value===""?"None":(h=u.breakdown_value)===null||h===void 0?void 0:h.toString(),compareValue:r.compare?Object(nt.d)(u):void 0,pillMidEllipsis:(u==null||(p=u.filter)===null||p===void 0?void 0:p.breakdown)==="$current_url",hideIcon:!0})}))})))}var Za=t("./node_modules/core-js/modules/es.object.from-entries.js"),Qa=t("./node_modules/core-js/modules/es.array.flat-map.js"),qa=t("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),Ea=t("./frontend/src/lib/components/LemonTable/index.ts"),Pt=t("./frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx"),ba=t("./frontend/src/models/cohortsModel.ts"),tn=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Tt=t("./frontend/src/lib/components/LemonRow/index.ts");function ya(){var s=Object(o.useValues)(F.c),a=s.insightProps,r=Object(ne.a)(a),l=Object(o.useValues)(r),d=l.insightLoading,i=l.steps,c=l.flattenedBreakdowns,f=l.hiddenLegendKeys,m=l.visibleStepsWithConversionMetrics,u=Object(o.useActions)(r),h=u.setHiddenById,p=u.toggleVisibilityByBreakdown,g=u.openPersonsModalForSeries,T=Object(o.useValues)(ba.a),v=T.cohorts,C=c.length===1,E=c==null?void 0:c.every(function(b){return!f[Object(We.l)(m==null?void 0:m[0],b.breakdown_value)]}),U=[{children:[{title:C?"Breakdown":e.a.createElement(Ct.a,{checked:E||(c!=null&&c.some(function(b){return!f[Object(We.l)(m==null?void 0:m[0],b.breakdown_value)]})?"indeterminate":!1),onChange:function(){h(Object.fromEntries(m.flatMap(function(_){return c.map(function(j){return[Object(We.l)(_,j.breakdown_value),E]})})))},label:"Breakdown",rowProps:{size:"small",style:{padding:0,marginLeft:"-0.5rem",font:"inherit"}}}),dataIndex:"breakdown_value",render:function(_){var j=Object(nt.c)(v,_);return C?e.a.createElement("span",{style:{fontWeight:500}},j):e.a.createElement(Ct.a,{checked:!f[Object(We.l)(m==null?void 0:m[0],_)],onChange:function(){return p(_)},label:j,rowProps:{size:"small",style:{padding:0,marginLeft:"-0.5rem",maxWidth:"16rem"},title:j}})}},{title:"Total conversion",render:function(_,j){var A,P;return Object(O.ob)((A=j==null||(P=j.conversionRates)===null||P===void 0?void 0:P.total)!==null&&A!==void 0?A:0,1,!0)},align:"right"}]}].concat(ye()(i.map(function(b,_){return{title:e.a.createElement(Tt.a,{icon:e.a.createElement(tn.a,{name:_+1,color:tn.b.Gray}),style:{font:"inherit",padding:0},size:"small"},e.a.createElement(Bt.a,{filter:Object(Pt.b)(b)})),children:[{title:_===0?"Entered":"Converted",render:function(A,P){var L,R,W=(L=P.steps)===null||L===void 0?void 0:L[_];return W&&e.a.createElement(Ve.c,{onClick:function(){return g({step:b,series:W,converted:!0})},style:{padding:0}},Object(O.O)((R=W.count)!==null&&R!==void 0?R:0))},align:"right"}].concat(ye()(_===0?[]:[{title:"Dropped\xA0off",render:function(A,P){var L,R,W=(L=P.steps)===null||L===void 0?void 0:L[_];return W&&e.a.createElement(Ve.c,{onClick:function(){return g({step:b,series:W,converted:!1})},style:{padding:0}},Object(O.O)((R=W.droppedOffFromPrevious)!==null&&R!==void 0?R:0))},align:"right"}]),[{title:"Conversion so\xA0far",render:function(A,P){var L,R,W,re,$,N,K=Object(Pt.c)(P,b.order);return K!=null&&K.total?e.a.createElement(Tt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(_e.IconFlag,null),size:"small"},Object(O.ob)((L=(R=P.steps)===null||R===void 0||(W=R[b.order])===null||W===void 0?void 0:W.conversionRates.total)!==null&&L!==void 0?L:0,1,!0)):Object(O.ob)((re=($=P.steps)===null||$===void 0||(N=$[b.order])===null||N===void 0?void 0:N.conversionRates.total)!==null&&re!==void 0?re:0,1,!0)},align:"right"}],ye()(_===0?[]:[{title:"Conversion from\xA0previous",render:function(A,P){var L,R,W,re,$,N,K=Object(Pt.c)(P,b.order);return!(K!=null&&K.total)&&K!==null&&K!==void 0&&K.fromPrevious?e.a.createElement(Tt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(_e.IconFlag,null),size:"small"},Object(O.ob)((L=(R=P.steps)===null||R===void 0||(W=R[b.order])===null||W===void 0?void 0:W.conversionRates.fromPrevious)!==null&&L!==void 0?L:0,1,!0)):Object(O.ob)((re=($=P.steps)===null||$===void 0||(N=$[b.order])===null||N===void 0?void 0:N.conversionRates.fromPrevious)!==null&&re!==void 0?re:0,1,!0)},align:"right"},{title:"Avg.\xA0time",render:function(A,P){var L,R;return((L=P.steps)===null||L===void 0||(R=L[b.order])===null||R===void 0?void 0:R.average_conversion_time)!=null?Object(O.N)(P.steps[b.order].average_conversion_time,3):"\u2013"},align:"right",width:0,className:"no-wrap"}]))}})));return e.a.createElement(Ea.a,{dataSource:c,columns:U,loading:d,rowKey:"breakdownIndex",rowStatus:function(_){return _.significant?"highlighted":null},rowRibbonColor:function(_){var j;return Object(jt.c)((j=_==null?void 0:_.breakdownIndex)!==null&&j!==void 0?j:0)}})}var Pe,nn=(Pe={},I()(Pe,"".concat(n.y.TRENDS),e.a.createElement(Me,{view:n.y.TRENDS})),I()(Pe,"".concat(n.y.STICKINESS),e.a.createElement(Me,{view:n.y.STICKINESS})),I()(Pe,"".concat(n.y.LIFECYCLE),e.a.createElement(Me,{view:n.y.LIFECYCLE})),I()(Pe,"".concat(n.y.FUNNELS),e.a.createElement(Bn,null)),I()(Pe,"".concat(n.y.RETENTION),e.a.createElement(Kn.a,null)),I()(Pe,"".concat(n.y.PATHS),e.a.createElement(wn.a,null)),Pe);function rt(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1,disableCorrelationTable:!1},a=s.disableHeader,r=s.disableTable,l=s.disableCorrelationTable,d=Object(o.useValues)(pt.a),i=d.featureFlags,c=Object(o.useValues)(Ut.a),f=c.insightMode,m=Object(o.useValues)(F.c),u=m.insightProps,h=m.canEditInsight,p=m.insightLoading,g=m.activeView,T=m.loadedView,v=m.filters,C=m.showTimeoutMessage,E=m.showErrorMessage,U=m.csvExportUrl,b=Object(o.useValues)(Object(ne.a)(u)),_=b.areFiltersValid,j=b.isValidFunnel,A=b.areExclusionFiltersValid,P=b.correlationAnalysisAvailable,L=function(){if(g!==T||p&&!C)return e.a.createElement(e.a.Fragment,null,v.display!==n.i.ActionsTable&&v.display!==n.i.WorldMap&&e.a.createElement("div",{className:"trends-insights-container"}),e.a.createElement(O.b,null));if(T===n.y.FUNNELS){if(!_)return e.a.createElement(ze.b,{actionable:f===n.z.Edit||r});if(!A)return e.a.createElement(ze.a,null);if(!j&&!p)return e.a.createElement(ze.c,null)}return E?e.a.createElement(ze.d,null):C?e.a.createElement(ze.e,{isLoading:p}):null}();function R(){return g===n.y.FUNNELS&&!E&&!C&&_&&j&&v.funnel_viz_type===n.u.Steps&&!r&&(i[ie.h.LEMON_FUNNEL_VIZ]||(v==null?void 0:v.layout)===ie.j.horizontal)?e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Detailed results"),e.a.createElement(ya,null)):(!v.display||(v==null?void 0:v.display)!==n.i.ActionsTable&&(v==null?void 0:v.display)!==n.i.ActionsBarValue)&&g===n.y.TRENDS&&!r?e.a.createElement(e.a.Fragment,null,U&&e.a.createElement("div",{className:"flex-center space-between-items",style:{margin:"1rem 0"}},e.a.createElement("h2",null,"Detailed results"),e.a.createElement(S.a,{title:"Export this table in CSV format",placement:"left"},e.a.createElement(Ae.a,{type:"secondary",icon:e.a.createElement(_e.IconExport,{style:{color:"var(--primary)"}}),href:U},"Export"))),e.a.createElement(o.BindLogic,{logic:Ue.a,props:u},e.a.createElement(nt.b,{isLegend:!0,showTotalCount:!0,filterKey:g===n.y.TRENDS?"trends_".concat(g):"",canEditSeriesNameInline:g===n.y.TRENDS&&f===n.z.Edit,canCheckUncheckSeries:h}))):null}return e.a.createElement(e.a.Fragment,null,e.a.createElement(q.a,{title:a?null:e.a.createElement(tt,{activeView:g,insightMode:f,filters:v,disableTable:!!r}),"data-attr":"insights-graph",className:"insights-graph-container"},e.a.createElement("div",null,e.a.createElement(z.a,{className:Object(ft.a)("insights-graph-header",{funnels:g===n.y.FUNNELS}),align:"middle",justify:"space-between"},e.a.createElement(Y.a,null,e.a.createElement(Rn,null)),e.a.createElement(Y.a,null,g===n.y.FUNNELS?e.a.createElement(An,null):null,g===n.y.PATHS?e.a.createElement(Wn,null):null,e.a.createElement(va,null))),L||(i[ie.h.INSIGHT_LEGENDS]&&(g===n.y.TRENDS||g===n.y.STICKINESS)&&v.show_legend?e.a.createElement(z.a,{className:"insights-graph-container-row",wrap:!1},e.a.createElement(Y.a,{className:"insights-graph-container-row-left"},nn[g]),e.a.createElement(Y.a,{className:"insights-graph-container-row-right"},e.a.createElement(ha,null))):nn[g]))),R(),!l&&P&&g===n.y.FUNNELS&&e.a.createElement(fa,null))}try{rt.displayName="InsightContainer",rt.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}},disableCorrelationTable:{defaultValue:null,description:"",name:"disableCorrelationTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:rt.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(s){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(J,D,t){"use strict";t.d(D,"a",function(){return Fe});var V=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=t.n(V),q=t("./node_modules/core-js/modules/es.array.iterator.js"),z=t.n(q),Y=t("./node_modules/core-js/modules/es.object.to-string.js"),le=t.n(Y),oe=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),w=t.n(oe),e=t("./node_modules/core-js/modules/es.object.keys.js"),o=t.n(e),ve=t("./node_modules/core-js/modules/es.symbol.js"),Z=t.n(ve),de=t("./node_modules/core-js/modules/es.array.filter.js"),Se=t.n(de),me=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ce=t.n(me),he=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),He=t.n(he),fe=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Ke=t.n(fe),Le=t("./node_modules/kea/lib/index.esm.js"),pe=t("./frontend/src/scenes/insights/insightLogic.ts"),Oe=t("./frontend/src/scenes/insights/sharedUtils.ts");function Ie(B,X){var y=Object.keys(B);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(B);X&&(x=x.filter(function(k){return Object.getOwnPropertyDescriptor(B,k).enumerable})),y.push.apply(y,x)}return y}function ge(B){for(var X=1;X<arguments.length;X++){var y=arguments[X]!=null?arguments[X]:{};X%2?Ie(Object(y),!0).forEach(function(x){I()(B,x,y[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(y)):Ie(Object(y)).forEach(function(x){Object.defineProperty(B,x,Object.getOwnPropertyDescriptor(y,x))})}return B}var Fe=Object(Le.kea)({props:{},key:Object(Oe.c)("new"),path:function(X){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",X]},connect:function(X){return{actions:[Object(pe.c)(X),["setFilters"]],values:[Object(pe.c)(X),["filters"]]}},actions:function(){return{setDates:function(y,x){return{dateFrom:y,dateTo:x}}}},selectors:{dates:[function(B){return[B.filters]},function(B){return{dateFrom:(B==null?void 0:B.date_from)||null,dateTo:(B==null?void 0:B.date_to)||null}}]},listeners:function(X){var y=X.actions,x=X.values;return{setDates:function(n){var O=n.dateFrom,F=n.dateTo;y.setFilters(ge(ge({},x.filters),{},{date_from:O||null,date_to:F||null}))}}}})},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(J,D,t){"use strict";t.d(D,"a",function(){return oe});var V=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),I=t.n(V),q=t("./node_modules/react/index.js"),z=t.n(q),Y=t("./node_modules/antd/es/modal/index.js"),le=t("./node_modules/antd/es/input/index.js");function oe(w){var e=w.onOk,o=w.onCancel,ve=w.visible,Z=Object(q.useState)(""),de=I()(Z,2),Se=de[0],me=de[1];return z.a.createElement(Y.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){e(Se),me("")},onCancel:o,visible:ve},z.a.createElement("div",{className:"mb"},z.a.createElement(le.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:Se,"data-attr":"cohort-name",onChange:function(he){return me(he.target.value)}})))}try{oe.displayName="SaveCohortModal",oe.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:oe.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(w){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(J,D,t){"use strict";var V=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),I=t("./node_modules/react/index.js"),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},z=q,Y=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),le=function(e,o){return I.createElement(Y.a,Object(V.a)(Object(V.a)({},e),{},{ref:o,icon:z}))};le.displayName="BarChartOutlined";var oe=D.a=I.forwardRef(le)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(J,D,t){"use strict";var V=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),I=t("./node_modules/react/index.js"),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},z=q,Y=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),le=function(e,o){return I.createElement(Y.a,Object(V.a)(Object(V.a)({},e),{},{ref:o,icon:z}))};le.displayName="OrderedListOutlined";var oe=D.a=I.forwardRef(le)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(J,D,t){"use strict";var V=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),I=t("./node_modules/react/index.js"),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},z=q,Y=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),le=function(e,o){return I.createElement(Y.a,Object(V.a)(Object(V.a)({},e),{},{ref:o,icon:z}))};le.displayName="PercentageOutlined";var oe=D.a=I.forwardRef(le)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(J,D,t){var V=t("./node_modules/css-loader/dist/runtime/api.js");D=V(!1),D.push([J.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{width:100%;font-size:.75rem}",""]),J.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(J,D,t){var V=t("./node_modules/css-loader/dist/runtime/api.js");D=V(!1),D.push([J.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),J.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(J,D,t){var V=t("./node_modules/css-loader/dist/runtime/api.js");D=V(!1),D.push([J.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),J.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(J,D,t){var V=t("./node_modules/css-loader/dist/runtime/api.js");D=V(!1),D.push([J.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),J.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(J,D,t){var V=t("./node_modules/css-loader/dist/runtime/api.js");D=V(!1),D.push([J.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px;overflow:auto}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),J.exports=D}}]);
