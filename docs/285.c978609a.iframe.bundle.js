(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{"./frontend/src/scenes/plugins/Plugins.tsx":function(J,f,t){"use strict";t.r(f),t.d(f,"scene",function(){return Ot}),t.d(f,"Plugins",function(){return Vn});var x=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),U=t.n(x),R=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss"),A=t.n(R),T={};T.insert="head",T.singleton=!1;var ne=U()(A.a,T),oe=A.a.locals||{},V=t("./node_modules/react/index.js"),de=t("./frontend/src/scenes/plugins/edit/PluginDrawer.tsx"),te=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ce=t.n(te),Ze=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ne=t.n(Ze),qe=t("./node_modules/core-js/modules/es.array.filter.js"),hn=t("./node_modules/core-js/modules/es.object.to-string.js"),On=t("./node_modules/core-js/modules/es.array.includes.js"),_e=t("./node_modules/core-js/modules/es.string.includes.js"),fn=t("./node_modules/core-js/modules/es.array.concat.js"),u=t("./node_modules/core-js/modules/es.array.map.js"),M=t("./node_modules/core-js/modules/es.function.name.js"),P=t("./node_modules/core-js/modules/es.symbol.js"),y=t("./node_modules/core-js/modules/es.symbol.description.js"),b=t("./node_modules/antd/es/row/index.js"),h=t("./node_modules/antd/es/col/index.js"),i=t("./node_modules/kea/lib/index.esm.js"),o=t("./frontend/src/scenes/plugins/pluginsLogic.ts"),en=t("./node_modules/core-js/modules/es.string.starts-with.js"),w=t("./node_modules/antd/es/space/index.js"),v=t("./node_modules/antd/es/button/index.js"),ae=t("./node_modules/antd/es/card/index.js"),I=t("./node_modules/antd/es/tag/index.js"),ue=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),xe=t("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),nn=t("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),Ue=t("./node_modules/@ant-design/icons/es/icons/WarningOutlined.js"),ye=t("./node_modules/@ant-design/icons/es/icons/LoadingOutlined.js"),Be=t("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),tn=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),se=t("./node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js"),Ce=t("./node_modules/@ant-design/icons/es/icons/UnorderedListOutlined.js"),an=t("./node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),$=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},re=Pe,Se=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),De=function(a,s){return V.createElement(Se.a,Object($.a)(Object($.a)({},a),{},{ref:s,icon:re}))};De.displayName="CloudDownloadOutlined";var X=V.forwardRef(De),le=t("./frontend/src/scenes/plugins/plugin/PluginImage.tsx"),ge=t("./node_modules/antd/es/popover/index.js"),ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},sn=ze,Ae=function(a,s){return V.createElement(Se.a,Object($.a)(Object($.a)({},a),{},{ref:s,icon:sn}))};Ae.displayName="ClearOutlined";var B=V.forwardRef(Ae),D=t("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),vn=t("./frontend/src/lib/dayjs.ts"),e=t("./node_modules/react/jsx-runtime.js");function Te(n){var a=n.error,s=n.reset;return a?Object(e.jsx)(ge.a,{title:Object(e.jsx)("div",{style:{textAlign:"center"},children:Object(vn.a)(a.time).format("YYYY-MM-DD - HH:mm:ss")}),content:Object(e.jsxs)(e.Fragment,{children:[s?Object(e.jsxs)(v.a,{size:"small",onClick:s,style:{float:"right",marginLeft:10},children:[Object(e.jsx)(B,{})," Delete"]}):null,Object(e.jsxs)("div",{children:[a.name?Object(e.jsxs)("strong",{children:[a.name,": "]}):"",a.message]}),a.stack?Object(e.jsx)(D.a,{wrap:!0,style:{fontSize:10},language:D.b.JavaScript,children:a.stack}):null,a.event?Object(e.jsx)(D.a,{wrap:!0,style:{fontSize:10},language:D.b.JSON,children:JSON.stringify(a.event,null,2)}):null]}),trigger:"click",placement:"top",children:Object(e.jsx)(I.a,{color:"red",style:{cursor:"pointer"},children:"ERROR"})}):null}try{Te.displayName="PluginError",Te.__docgenInfo={description:"",displayName:"PluginError",props:{error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"PluginErrorType"}},reset:{defaultValue:null,description:"",name:"reset",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"]={docgenInfo:Te.__docgenInfo,name:"PluginError",path:"frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"})}catch(n){}var Nn=t("./frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx"),z=t("./frontend/src/scenes/plugins/types.ts"),Un=t("./frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx"),F=t("./frontend/src/lib/components/Tooltip.tsx");function we(n){var a=n.isCommunity;return Object(e.jsx)(F.a,{title:a?"This app was built by a community memeber, not the PostHog team.":"This app was built by the PostHog team.",children:Object(e.jsx)(I.a,{color:a?"cyan":"geekblue",children:a?"Community":"Official"})})}try{we.displayName="CommunityPluginTag",we.__docgenInfo={description:"",displayName:"CommunityPluginTag",props:{isCommunity:{defaultValue:null,description:"",name:"isCommunity",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"]={docgenInfo:we.__docgenInfo,name:"CommunityPluginTag",path:"frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"})}catch(n){}var yt=t("./node_modules/core-js/modules/es.regexp.exec.js"),Ct=t("./node_modules/core-js/modules/es.string.match.js");function xn(n){var a=n.tag;return a.match(/^[a-f0-9]{40}$/)?Object(e.jsx)("code",{children:a.substring(0,7)}):Object(e.jsx)("code",{children:a})}function Fe(n){var a=n.url,s=n.tag,r=n.latestTag,l="";return a.match(/^https:\/\/(www.|)github.com\//)&&(l="".concat(a,"/compare/").concat(s,"...").concat(r)),a.match(/^https:\/\/(www.|)gitlab.com\//)&&(l="".concat(a,"/-/compare/").concat(s,"...").concat(r)),Object(e.jsx)(F.a,{title:Object(e.jsxs)("div",{children:["Installed: ",Object(e.jsx)(xn,{tag:s}),Object(e.jsx)("br",{}),"Latest: ",Object(e.jsx)(xn,{tag:r}),l?Object(e.jsx)("div",{style:{marginTop:10},children:"Click to see the diff"}):null]}),children:l?Object(e.jsx)("a",{href:l,target:"_blank",rel:"noreferrer noopener",children:Object(e.jsxs)(I.a,{color:"volcano",style:{cursor:"pointer"},children:[Object(e.jsx)(X,{})," Update available!"]})}):Object(e.jsxs)(I.a,{color:"volcano",children:[Object(e.jsx)(X,{})," Update available!"]})})}try{Fe.displayName="UpdateAvailable",Fe.__docgenInfo={description:"",displayName:"UpdateAvailable",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},tag:{defaultValue:null,description:"",name:"tag",required:!0,type:{name:"string"}},latestTag:{defaultValue:null,description:"",name:"latestTag",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"]={docgenInfo:Fe.__docgenInfo,name:"UpdateAvailable",path:"frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"})}catch(n){}var Le=t("./frontend/src/scenes/userLogic.ts"),yn=t("./frontend/src/lib/utils.tsx"),Z=t("./frontend/src/scenes/plugins/access.ts"),He=function(a){var s=a.updateStatus,r=a.pluginId,l=a.rearranging,d=Object(i.useActions)(o.b),c=d.editPlugin,j=d.updatePlugin,g=Object(i.useValues)(o.b),p=g.pluginsUpdating;return Object(e.jsx)(v.a,{type:s!=null&&s.updated?"default":"primary",className:"padding-under-500",onClick:function(){return s!=null&&s.updated?c(r):j(r)},loading:p.includes(r),icon:s!=null&&s.updated?Object(e.jsx)(Be.a,{}):Object(e.jsx)(X,{}),disabled:l,"data-attr":"plugin-update",children:Object(e.jsx)("span",{className:"show-over-500",children:s!=null&&s.updated?"Updated":"Update"})})};try{He.displayName="PluginUpdateButton",He.__docgenInfo={description:"",displayName:"PluginUpdateButton",props:{updateStatus:{defaultValue:null,description:"",name:"updateStatus",required:!0,type:{name:"PluginUpdateStatusType | undefined"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"]={docgenInfo:He.__docgenInfo,name:"PluginUpdateButton",path:"frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"})}catch(n){}var je=t("./frontend/@posthog/lemon-ui/src/index.ts"),Bn=t("./frontend/src/scenes/organizationLogic.tsx"),Dn=t("./frontend/src/lib/constants.tsx"),zn=t("./frontend/src/scenes/urls.ts");function Me(n){var a=n.url,s=n.disabled,r=s===void 0?!1:s;return Object(e.jsx)(w.b,{children:Object(e.jsx)(F.a,{title:"About",children:Object(e.jsx)(je.Link,{to:a,target:"_blank",children:Object(e.jsx)(v.a,{disabled:r,children:Object(e.jsx)(ue.a,{})})})})})}function pe(n){var a,s=n.plugin,r=n.error,l=n.maintainer,d=n.showUpdateButton,c=n.order,j=n.maxOrder,g=n.rearranging,p=n.DragColumn,m=p===void 0?function(ve){var xt=ve.children;return Object(e.jsx)(h.a,{className:"order-handle",children:xt})}:p,N=n.unorderedPlugin,L=N===void 0?!1:N,_=s.name,K=s.description,C=s.url,G=s.plugin_type,O=s.pluginConfig,he=s.tag,k=s.latest_tag,Q=s.id,ie=s.updateStatus,cn=s.hasMoved,We=s.is_global,E=s.organization_id,S=s.organization_name,H=Object(i.useActions)(o.b),Re=H.editPlugin,Ke=H.toggleEnabled,un=H.installPlugin,gn=H.resetPluginConfigError,Ge=H.rearrange,Oe=H.showPluginLogs,Je=H.showPluginHistory,ee=Object(i.useValues)(o.b),$e=ee.loading,ke=ee.installingPluginUrl,Qe=ee.checkingForUpdates,Xe=ee.pluginUrlToMaintainer,jn=ee.shouldShowAppMetrics,pn=Object(i.useValues)(Bn.a),fe=pn.currentOrganization,mn=Object(i.useValues)(Le.a),Ve=mn.user,bn=l||s.url&&Xe[s.url],vt=l||Xe[s.url||""];return Object(e.jsx)(h.a,{style:{width:"100%",marginBottom:20},className:"plugins-scene-plugin-card-col".concat(g?" rearranging":""),"data-attr":"plugin-card-".concat(O?"installed":"available"),children:Object(e.jsx)(ae.a,{className:"plugins-scene-plugin-card",children:Object(e.jsxs)(b.a,{align:"middle",className:"plugin-card-row",children:[typeof c=="number"&&typeof j=="number"?Object(e.jsxs)(m,{children:[Object(e.jsx)("div",{className:"arrow".concat(c===1?" hide":""),children:Object(e.jsx)(xe.a,{})}),Object(e.jsx)("div",{children:Object(e.jsx)(I.a,{color:cn?"#bd0225":"#555",onClick:Ge,children:c})}),Object(e.jsx)("div",{className:"arrow".concat(c===j?" hide":""),children:Object(e.jsx)(xe.a,{})})]}):null,L?Object(e.jsx)(F.a,{title:"This app does not do any processing in order.",placement:"topRight",children:Object(e.jsx)(h.a,{children:Object(e.jsx)(I.a,{color:"#555",children:"-"})})}):null,O&&Object(e.jsx)(h.a,{children:O.id?Object(e.jsx)(je.LemonSwitch,{checked:(a=O.enabled)!==null&&a!==void 0?a:!1,disabled:g,onChange:function(){return Ke({id:O.id,enabled:!O.enabled})}}):Object(e.jsx)(F.a,{title:"Please configure this plugin before enabling it",children:Object(e.jsx)(je.LemonSwitch,{checked:!1,disabled:!0})})}),Object(e.jsx)(h.a,{className:O?"hide-plugin-image-below-500":"",children:Object(e.jsx)(le.a,{pluginType:G,url:C})}),Object(e.jsxs)(h.a,{style:{flex:1},children:[Object(e.jsxs)("div",{children:[Object(e.jsx)("strong",{style:{marginRight:8},children:_}),bn&&Object(e.jsx)(we,{isCommunity:vt==="community"}),O!=null&&O.error?Object(e.jsx)(Te,{error:O.error,reset:function(){return gn((O==null?void 0:O.id)||0)}}):r?Object(e.jsx)(Te,{error:r}):null,We&&!!fe&&fe.plugins_access_level>=Dn.v.Install&&Object(e.jsx)(F.a,{title:"This plugin is managed by the ".concat(S," organization"),children:Object(e.jsx)(I.a,{color:"blue",icon:Object(e.jsx)(nn.a,{}),children:"Global"})}),Object(Z.c)(Ve==null?void 0:Ve.organization,E)&&Object(e.jsxs)(e.Fragment,{children:[C!=null&&C.startsWith("file:")?Object(e.jsx)(Nn.a,{url:C,title:"Local"}):null,ie!=null&&ie.error?Object(e.jsxs)(I.a,{color:"red",children:[Object(e.jsx)(Ue.a,{})," Error checking for updates"]}):Qe&&!ie&&G!==z.a.Source&&!(C!=null&&C.startsWith("file:"))?Object(e.jsxs)(I.a,{color:"blue",children:[Object(e.jsx)(ye.a,{})," Checking for updates\u2026"]}):C&&k&&he?he===k?Object(e.jsxs)(I.a,{color:"green",children:[Object(e.jsx)(Be.a,{})," Up to date"]}):Object(e.jsx)(Fe,{url:C,tag:he,latestTag:k}):null,G===z.a.Source?Object(e.jsx)(Un.a,{}):null]})]}),Object(e.jsx)("div",{children:Object(yn.y)(K)})]}),Object(e.jsx)(h.a,{children:Object(e.jsxs)(w.b,{children:[C&&Object(e.jsx)(Me,{url:C,disabled:g}),d&&Q?Object(e.jsx)(He,{updateStatus:ie,pluginId:Q,rearranging:g}):Q?Object(e.jsxs)(e.Fragment,{children:[jn&&O!==null&&O!==void 0&&O.id?Object(e.jsx)(F.a,{title:"App metrics",children:Object(e.jsx)(v.a,{className:"padding-under-500",disabled:g,"data-attr":"app-metrics",children:Object(e.jsx)(je.Link,{to:zn.a.appMetrics(O.id),children:Object(e.jsx)(tn.a,{})})})}):null,Object(e.jsx)(F.a,{title:"Activity history",children:Object(e.jsx)(v.a,{className:"padding-under-500",disabled:g,onClick:function(){return Je(Q)},"data-attr":"plugin-history",children:Object(e.jsx)(se.a,{})})}),Object(e.jsx)(F.a,{title:O!=null&&O.id?"Logs":"Logs \u2013 enable the app for the first time to view them",children:Object(e.jsx)(v.a,{className:"padding-under-500",disabled:g||!(O!=null&&O.id),onClick:function(){return Oe(Q)},"data-attr":"plugin-logs",children:Object(e.jsx)(Ce.a,{})})}),Object(e.jsx)(F.a,{title:"Configure",children:Object(e.jsx)(v.a,{type:"primary",className:"padding-under-500",disabled:g,onClick:function(){return Re(Q)},"data-attr":"plugin-configure",children:Object(e.jsx)(an.a,{})})})]}):Q?null:Object(e.jsx)(v.a,{type:"primary",className:"padding-under-500",loading:$e&&ke===C,disabled:$e&&ke!==C,onClick:C?function(){return un(C,z.a.Repository)}:void 0,icon:Object(e.jsx)(X,{}),"data-attr":"plugin-install",children:Object(e.jsx)("span",{className:"show-over-500",children:"Install"})})]})})]})})})}try{Me.displayName="PluginAboutButton",Me.__docgenInfo={description:"",displayName:"PluginAboutButton",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"]={docgenInfo:Me.__docgenInfo,name:"PluginAboutButton",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"})}catch(n){}try{pe.displayName="PluginCard",pe.__docgenInfo={description:"",displayName:"PluginCard",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"Partial<PluginTypeWithConfig>"}},pluginConfig:{defaultValue:null,description:"",name:"pluginConfig",required:!1,type:{name:"PluginConfigType"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"PluginErrorType"}},maintainer:{defaultValue:null,description:"",name:"maintainer",required:!1,type:{name:"string"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:{value:'({ children }) => <Col className="order-handle">{children}</Col>'},description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"]={docgenInfo:pe.__docgenInfo,name:"PluginCard",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"})}catch(n){}var Y=t("./frontend/src/lib/components/PageHeader.tsx"),Ee=t("./node_modules/antd/es/skeleton/index.js");function Cn(){return Object(e.jsx)(e.Fragment,{children:[1,2,3].map(function(n){return Object(e.jsx)(h.a,{style:{marginBottom:20,width:"100%"},className:"plugins-scene-plugin-card-col",children:Object(e.jsx)(ae.a,{className:"plugins-scene-plugin-card",children:Object(e.jsxs)(b.a,{align:"middle",className:"plugin-card-row",children:[Object(e.jsx)(h.a,{className:"hide-plugin-image-below-500",children:Object(e.jsx)(Ee.a.Avatar,{active:!0,size:"large",shape:"square"})}),Object(e.jsx)(h.a,{style:{flex:1},children:Object(e.jsx)(Ee.a,{title:!1,paragraph:{rows:2},active:!0})}),Object(e.jsxs)(h.a,{children:[Object(e.jsx)("span",{className:"show-over-500",children:Object(e.jsx)(Ee.a.Button,{style:{width:100}})}),Object(e.jsx)("span",{className:"hide-over-500",children:Object(e.jsx)(Ee.a.Button,{style:{width:32}})})]})]})})},n)})})}function Pn(){var n=Object(i.useValues)(o.b),a=n.searchTerm,s=n.rearranging,r=Object(i.useActions)(o.b),l=r.setSearchTerm;return Object(e.jsx)(je.LemonInput,{type:"search","data-attr":"plugins-search",placeholder:"Start typing to search for an app",autoFocus:!0,value:a||"",onChange:l,disabled:s})}var Ie=t("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),wn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},Fn=wn,Sn=function(a,s){return V.createElement(Se.a,Object($.a)(Object($.a)({},a),{},{ref:s,icon:Fn}))};Sn.displayName="CaretRightOutlined";var me=V.forwardRef(Sn),W;(function(n){n.Official="official",n.Community="community"})(W||(W={}));function Hn(){var n=Object(i.useValues)(o.b),a=n.repositoryLoading,s=n.filteredUninstalledPlugins,r=Object(V.useState)([W.Official,W.Community]),l=Ne()(r,2),d=l[0],c=l[1],j=s.filter(function(m){return m.maintainer==="official"}),g=s.filter(function(m){return m.maintainer==="community"}),p=function(N){if(d.includes(N)){c(d.filter(function(L){return N!==L}));return}c([].concat(ce()(d),[N]))};return Object(e.jsxs)("div",{children:[Object(e.jsx)(Y.b,{subtitle:"App Repository"}),Object(e.jsx)(Pn,{}),Object(e.jsx)("div",{children:(!a||s.length>0)&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)(b.a,{gutter:16,style:{marginTop:16,display:"block"},children:[Object(e.jsx)("div",{className:"plugins-repository-tab-section-header",onClick:function(){return p(W.Official)},children:Object(e.jsx)(Y.b,{subtitle:Object(e.jsxs)(e.Fragment,{children:[d.includes(W.Official)?Object(e.jsx)(Ie.a,{}):Object(e.jsx)(me,{})," Official apps (".concat(j.length,")")]})})}),d.includes(W.Official)&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(h.a,{span:24,children:j.length>0?"Official apps are built and maintained by the PostHog team.":"You have already installed all official apps!"}),Object(e.jsx)("br",{}),j.map(function(m){return Object(e.jsx)(pe,{plugin:{name:m.name,url:m.url,description:m.description},maintainer:m.maintainer},m.url)})]})]}),Object(e.jsxs)(b.a,{gutter:16,style:{marginTop:16,display:"block"},children:[Object(e.jsx)("div",{className:"plugins-repository-tab-section-header",onClick:function(){return p(W.Community)},children:Object(e.jsx)(Y.b,{subtitle:Object(e.jsxs)(e.Fragment,{children:[d.includes(W.Community)?Object(e.jsx)(Ie.a,{}):Object(e.jsx)(me,{})," Community apps (".concat(g.length,")")]})})}),d.includes(W.Community)&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(h.a,{span:24,children:g.length>0?Object(e.jsxs)("span",{children:["Community apps are not built nor maintained by the PostHog team."," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/apps/build",target:"_blank",rel:"noopener",children:"Anyone, including you, can build an app."})]}):"You have already installed all community apps!"}),Object(e.jsx)("br",{}),g.map(function(m){return Object(e.jsx)(pe,{plugin:{name:m.name,url:m.url,description:m.description},maintainer:m.maintainer},m.url)})]})]})]})}),a&&s.length===0&&Object(e.jsx)(b.a,{gutter:16,children:Object(e.jsx)(Cn,{})})]})}var Pt=t("./node_modules/core-js/modules/es.object.values.js"),Mn=t("./node_modules/antd/es/checkbox/index.js"),Yn=t("./node_modules/antd/lib/input/Search.js"),Wn=t.n(Yn),Kn=t("./frontend/src/lib/components/ResizableTable/index.tsx"),be=t("./frontend/src/types.ts"),An=t("./frontend/src/scenes/plugins/plugin/pluginLogsLogic.ts");function Gn(n){var a;switch(n){case be.J.Debug:a="var(--muted)";break;case be.J.Log:a="var(--default)";break;case be.J.Info:a="var(--blue)";break;case be.J.Warn:a="var(--warning)";break;case be.J.Error:a="var(--danger)";break;default:break}return Object(e.jsx)("span",{style:{color:a},children:n})}var Jn=[{title:"Timestamp",key:"timestamp",dataIndex:"timestamp",span:3,render:function(a){return Object(vn.a)(a).format("YYYY-MM-DD HH:mm:ss.SSS UTC")}},{title:"Source",key:"source",dataIndex:"source",span:1},{title:"Type",key:"type",dataIndex:"type",span:1,render:Gn},{title:"Message",key:"message",dataIndex:"message",span:6}];function Ye(n){var a=n.pluginConfigId,s=Object(An.b)({pluginConfigId:a}),r=Object(i.useValues)(s),l=r.pluginLogs,d=r.pluginLogsLoading,c=r.pluginLogsBackground,j=r.isThereMoreToLoad,g=r.pluginLogsTypes,p=Object(i.useActions)(s),m=p.revealBackground,N=p.loadPluginLogsMore,L=p.setPluginLogsTypes,_=p.setSearchTerm;return Object(e.jsxs)(w.b,{direction:"vertical",style:{flexGrow:1},className:"ph-no-capture plugin-logs",children:[Object(e.jsx)(b.a,{children:Object(e.jsx)(Wn.a,{loading:d,onSearch:_,placeholder:"Search for messages containing\u2026",allowClear:!0})}),Object(e.jsx)(b.a,{children:Object(e.jsxs)(w.b,{children:[Object(e.jsx)("span",{children:"Show logs of type:\xA0"}),Object(e.jsx)(Mn.a.Group,{options:Object.values(be.J),value:g,onChange:L,style:{marginLeft:"8px"}})]})}),Object(e.jsx)(b.a,{children:Object(e.jsx)(v.a,{onClick:m,loading:d,style:{flexGrow:1},disabled:!c.length,icon:Object(e.jsx)(ye.a,{}),children:c.length?"Load ".concat(Object(yn.sb)(c.length,"newer entry","newer entries")):"No new entries"})}),Object(e.jsx)(Kn.b,{dataSource:l,columns:Jn,loading:d,size:"small",className:"ph-no-capture",rowKey:"id",style:{flexGrow:1,whiteSpace:"pre-wrap",overflowWrap:"anywhere"},pagination:{pageSize:200,hideOnSinglePage:!0}}),!!l.length&&Object(e.jsx)(b.a,{children:Object(e.jsx)(v.a,{onClick:N,loading:d,style:{flexGrow:1},disabled:!j,children:j?"Load up to ".concat(An.a," older entries"):"No older entries"})})]})}try{Ye.displayName="PluginLogs",Ye.__docgenInfo={description:"",displayName:"PluginLogs",props:{pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"]={docgenInfo:Ye.__docgenInfo,name:"PluginLogs",path:"frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"})}catch(n){}var Tn=t("./node_modules/antd/es/drawer/index.js");function $n(){var n=Object(i.useValues)(o.b),a=n.showingLogsPlugin,s=n.lastShownLogsPlugin,r=Object(i.useActions)(o.b),l=r.hidePluginLogs;return Object(e.jsx)(Tn.a,{visible:!!a,onClose:l,width:"min(90vw, 80rem)",title:"Viewing App Logs: ".concat(s==null?void 0:s.name),placement:"left",destroyOnClose:!0,children:!!(s!=null&&s.pluginConfig.id)&&Object(e.jsx)(Ye,{pluginConfigId:s.pluginConfig.id})})}var kn=t("./node_modules/antd/es/empty/index.js");function Qn(){var n=Object(i.useActions)(o.b),a=n.setPluginTab,s=Object(i.useValues)(o.b),r=s.loading,l=Object(i.useValues)(Le.a),d=l.user;return Object(e.jsx)(e.Fragment,{children:r?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Y.b,{subtitle:Object(e.jsxs)(e.Fragment,{children:[" ",Object(e.jsx)(me,{})," ","Enabled apps"," "]}),buttons:Object(e.jsx)(Ee.a.Button,{style:{width:150}})}),Object(e.jsx)(Cn,{})]}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Y.b,{subtitle:"Installed apps"}),Object(e.jsx)(b.a,{gutter:16,style:{marginTop:16},children:Object(e.jsx)(h.a,{span:24,children:Object(e.jsx)(kn.a,{description:Object(e.jsx)("span",{children:"You haven't installed any apps yet"}),children:Object(Z.b)(d==null?void 0:d.organization)&&Object(e.jsx)(v.a,{type:"default",onClick:function(){return a(z.c.Repository)},children:"Open the App Repository"})})})})]})})}function q(n){var a=n.plugin,s=n.showUpdateButton,r=n.order,l=n.maxOrder,d=n.rearranging,c=n.DragColumn,j=n.unorderedPlugin,g=j===void 0?!1:j;return Object(e.jsx)(pe,{plugin:a,showUpdateButton:s,order:r,maxOrder:l,rearranging:d,DragColumn:c,unorderedPlugin:g},a.id)}try{q.displayName="InstalledPlugin",q.__docgenInfo={description:"",displayName:"InstalledPlugin",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"PluginTypeWithConfig"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:null,description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"]={docgenInfo:q.__docgenInfo,name:"InstalledPlugin",path:"frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"})}catch(n){}function Xn(){var n=Object(i.useValues)(o.b),a=n.filteredDisabledPlugins,s=n.sectionsOpen,r=n.disabledPlugins,l=Object(i.useActions)(o.b),d=l.toggleSectionOpen;return r.length===0?Object(e.jsx)(e.Fragment,{}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"plugins-installed-tab-section-header",onClick:function(){return d(o.a.Disabled)},children:Object(e.jsx)(Y.b,{subtitle:Object(e.jsxs)(e.Fragment,{children:[s.includes(o.a.Disabled)?Object(e.jsx)(Ie.a,{}):Object(e.jsx)(me,{})," Installed apps (".concat(a.length,")")]})})}),s.includes(o.a.Disabled)?Object(e.jsx)(e.Fragment,{children:a.length>0?Object(e.jsx)(b.a,{gutter:16,style:{marginTop:16},children:a.map(function(c){return Object(e.jsx)(q,{plugin:c},c.id)})}):Object(e.jsx)("p",{style:{margin:10},children:"No apps match your search."})}):null]})}var St=t("./node_modules/core-js/modules/es.object.keys.js"),Zn=t("./node_modules/@ant-design/icons/es/icons/SyncOutlined.js");function qn(){var n=Object(i.useActions)(o.b),a=n.checkForUpdates,s=n.toggleSectionOpen,r=Object(i.useValues)(o.b),l=r.sectionsOpen,d=Object(i.useValues)(Le.a),c=d.user,j=Object(i.useValues)(o.b),g=j.filteredPluginsNeedingUpdates,p=j.pluginsNeedingUpdates,m=j.checkingForUpdates,N=j.installedPluginUrls,L=j.updateStatus,_=j.rearranging,K=j.hasUpdatablePlugins,C=Object(Z.c)(c==null?void 0:c.organization)&&K&&Object(e.jsx)(v.a,{type:"default",icon:p.length>0?Object(e.jsx)(Zn.a,{}):Object(e.jsx)(X,{}),onClick:function(O){O.stopPropagation(),a(!0)},loading:m,children:m?"Checking app ".concat(Object.keys(L).length+1," out of ").concat(Object.keys(N).length):p.length>0?"Check again for updates":"Check for updates"});return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"plugins-installed-tab-section-header",onClick:function(){return s(o.a.Upgrade)},children:Object(e.jsx)(Y.b,{subtitle:Object(e.jsxs)(e.Fragment,{children:[l.includes(o.a.Upgrade)?Object(e.jsx)(Ie.a,{}):Object(e.jsx)(me,{})," Apps to update (".concat(g.length,")")]}),buttons:!_&&C})}),l.includes(o.a.Upgrade)?Object(e.jsx)(e.Fragment,{children:p.length>0?Object(e.jsx)(b.a,{gutter:16,style:{marginTop:16},children:g.length>0?Object(e.jsx)(e.Fragment,{children:g.map(function(G){return Object(e.jsx)(q,{plugin:G,showUpdateButton:!0},G.id)})}):Object(e.jsx)("p",{style:{margin:10},children:"No apps match your search."})}):Object(e.jsx)("p",{style:{margin:10},children:"All your apps are up to date. Great work!"})}):null]})}var At=t("./node_modules/core-js/modules/es.array.slice.js"),Tt=t("./node_modules/core-js/modules/es.array.from.js"),Lt=t("./node_modules/core-js/modules/es.string.iterator.js"),Et=t("./node_modules/core-js/modules/es.symbol.iterator.js"),It=t("./node_modules/core-js/modules/es.array.iterator.js"),Rt=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Vt=t("./node_modules/core-js/modules/es.array.splice.js"),_n=t("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),et=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),nt=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),rn=t("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js");function tt(n,a){var s=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!s){if(Array.isArray(n)||(s=at(n))||a&&n&&typeof n.length=="number"){s&&(n=s);var r=0,l=function(){};return{s:l,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,c=!1,j;return{s:function(){s=s.call(n)},n:function(){var p=s.next();return d=p.done,p},e:function(p){c=!0,j=p},f:function(){try{!d&&s.return!=null&&s.return()}finally{if(c)throw j}}}}function at(n,a){if(!!n){if(typeof n=="string")return Ln(n,a);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Ln(n,a)}}function Ln(n,a){(a==null||a>n.length)&&(a=n.length);for(var s=0,r=new Array(a);s<a;s++)r[s]=n[s];return r}var st=Object(rn.c)(function(n){var a=n.children;return Object(e.jsx)(h.a,{className:"order-handle",children:a})}),rt=Object(rn.b)(function(n){var a=n.plugin,s=n.order,r=n.maxOrder,l=n.rearranging;return Object(e.jsx)(q,{plugin:a,order:s,maxOrder:r,rearranging:l,DragColumn:st})}),lt=Object(rn.a)(function(n){var a=n.children;return Object(e.jsx)(b.a,{gutter:16,style:{marginTop:16},children:a})});function it(){var n=Object(i.useValues)(Le.a),a=n.user,s=Object(i.useActions)(o.b),r=s.rearrange,l=s.setTemporaryOrder,d=s.cancelRearranging,c=s.savePluginOrders,j=s.makePluginOrderSaveable,g=s.toggleSectionOpen,p=Object(i.useValues)(o.b),m=p.enabledPlugins,N=p.filteredEnabledPlugins,L=p.sortableEnabledPlugins,_=p.unsortableEnabledPlugins,K=p.rearranging,C=p.loading,G=p.temporaryOrder,O=p.pluginOrderSaveable,he=p.searchTerm,k=p.sectionsOpen,Q=Object(Z.a)(a==null?void 0:a.organization)&&L.length>1,ie=K?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(v.a,{type:"primary",icon:Object(e.jsx)(_n.a,{}),loading:C,onClick:function(S){S.stopPropagation(),c(G)},disabled:!O,children:"Save order"}),Object(e.jsx)(v.a,{type:"default",icon:Object(e.jsx)(et.a,{}),onClick:function(S){d(),S.stopPropagation()},children:"Cancel"})]}):Object(e.jsx)(F.a,{title:m.length<=1?"At least two apps need to be enabled for reordering.":Object(e.jsx)(e.Fragment,{children:he?"Editing the order of apps is disabled when searching.":Object(e.jsxs)(e.Fragment,{children:["Order matters because event processing with apps works like a pipe: the event is processed by every enabled app ",Object(e.jsx)("b",{children:"in sequence"}),"."]})}),placement:"top",children:Object(e.jsx)(v.a,{icon:Object(e.jsx)(nt.a,{}),onClick:function(S){S.stopPropagation(),r()},disabled:!!he||L.length<=1,children:"Edit order"})}),cn=function(S){var H,Re=S.oldIndex,Ke=S.newIndex;if(Re!==Ke){var un=function(Xe,jn,pn){var fe=ce()(Xe);return Array.prototype.splice.call(fe,pn,0,Array.prototype.splice.call(fe,jn,1)[0]),fe.map(function(mn,Ve){var bn=mn.id;return{id:bn,order:Ve+1}})},gn=(H=m[Re])===null||H===void 0?void 0:H.id,Ge={},Oe=tt(un(m,Re,Ke)),Je;try{for(Oe.s();!(Je=Oe.n()).done;){var ee=Je.value,$e=ee.id,ke=ee.order;Ge[$e]=ke}}catch(Qe){Oe.e(Qe)}finally{Oe.f()}K||r(),l(Ge,gn)}},We=function(){return Object(e.jsx)("div",{className:"plugins-installed-tab-section-header",onClick:function(){return g(o.a.Enabled)},children:Object(e.jsx)(Y.b,{subtitle:Object(e.jsxs)(e.Fragment,{children:[k.includes(o.a.Enabled)?Object(e.jsx)(Ie.a,{}):Object(e.jsx)(me,{})," Enabled apps (".concat(N.length,")"),K&&k.includes(o.a.Enabled)&&Object(e.jsx)(I.a,{color:"red",style:{fontWeight:"normal",marginLeft:10},children:"Reordering in progress"})]}),buttons:Object(e.jsx)(w.b,{children:k.includes(o.a.Enabled)&&ie})})})};return m.length===0?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(We,{}),k.includes(o.a.Enabled)&&Object(e.jsx)("p",{style:{margin:10},children:"No apps enabled."})]}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(We,{}),k.includes(o.a.Enabled)&&Object(e.jsxs)(e.Fragment,{children:[L.length===0&&_.length===0&&Object(e.jsx)("p",{style:{margin:10},children:"No apps match your search."}),Q||K?Object(e.jsx)(e.Fragment,{children:L.length>0&&Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(lt,{useDragHandle:!0,onSortEnd:cn,onSortOver:j,children:L.map(function(E,S){return Object(e.jsx)(rt,{plugin:E,index:S,order:S+1,maxOrder:m.length,rearranging:K},E.id)})})})}):Object(e.jsx)(b.a,{gutter:16,style:{marginTop:16},children:L.length>0&&Object(e.jsx)(e.Fragment,{children:L.map(function(E,S){return Object(e.jsx)(q,{plugin:E,order:S+1,maxOrder:N.length},E.id)})})}),_.map(function(E){return Object(e.jsx)(q,{plugin:E,maxOrder:m.length,rearranging:K,unorderedPlugin:!0},E.id)})]})]})}var En=t("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),In=t("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx");function ot(){var n=Object(i.useValues)(o.b),a=n.showingHistoryPlugin,s=Object(i.useActions)(o.b),r=s.hidePluginHistory;return Object(e.jsx)(Tn.a,{visible:!!a,onClose:r,width:"min(90vw, 80rem)",title:"Activity History",placement:"left",destroyOnClose:!0,children:Object(e.jsx)(En.a,{scope:In.a.PLUGIN,id:a==null?void 0:a.pluginConfig.id})})}function dt(){var n=Object(i.useValues)(o.b),a=n.installedPlugins;return a.length===0?Object(e.jsx)(Qn,{}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{children:[Object(e.jsx)(Pn,{}),Object(e.jsx)(qn,{}),Object(e.jsx)(it,{}),Object(e.jsx)(Xn,{})]}),Object(e.jsx)($n,{}),Object(e.jsx)(ot,{})]})}var Rn=t("./node_modules/antd/es/tabs/index.js"),ct=t("./node_modules/antd/es/alert/index.js"),ln=t("./node_modules/antd/es/input/index.js"),ut=t("./node_modules/antd/lib/typography/Title.js"),on=t.n(ut),gt=t("./node_modules/antd/lib/typography/Paragraph.js"),dn=t.n(gt);function jt(){var n=Object(i.useValues)(o.b),a=n.sourcePluginName,s=n.pluginError,r=n.loading,l=Object(i.useActions)(o.b),d=l.setSourcePluginName,c=l.installPlugin;return Object(e.jsx)("div",{style:{marginTop:16},children:Object(e.jsxs)(ae.a,{children:[Object(e.jsx)(on.a,{level:5,children:"App editor"}),Object(e.jsxs)(dn.a,{children:["Write your app directly in PostHog."," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/apps",target:"_blank",children:"Read the documentation for more information!"})]}),Object(e.jsxs)(b.a,{style:{width:"100%"},gutter:16,children:[Object(e.jsx)(h.a,{style:{flex:1},children:Object(e.jsx)(ln.a,{value:a,disabled:r,onChange:function(g){return d(g.target.value)},placeholder:'For example: "Hourly Weather Sync App"'})}),Object(e.jsx)(h.a,{children:Object(e.jsx)(v.a,{disabled:r||!a,loading:r,type:"default",onClick:function(){return c(a,z.a.Source)},children:"Start coding"})})]}),s?Object(e.jsx)("p",{style:{color:"var(--red)",marginTop:10},children:s}):null]})})}function pt(){var n=Object(i.useValues)(o.b),a=n.customPluginUrl,s=n.pluginError,r=n.loading,l=Object(i.useActions)(o.b),d=l.setCustomPluginUrl,c=l.installPlugin;return Object(e.jsx)("div",{style:{marginTop:16},children:Object(e.jsxs)(ae.a,{children:[Object(e.jsx)(on.a,{level:5,children:"Install from GitHub, GitLab or npm"}),Object(e.jsxs)(dn.a,{children:["To install a third-party or custom app, paste its URL below. For"," ",Object(e.jsx)("a",{href:"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),", ",Object(e.jsx)("a",{href:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",target:"_blank",rel:"noopener noreferrer",children:"GitLab"})," and ",Object(e.jsx)("a",{href:"https://docs.npmjs.com/creating-and-viewing-access-tokens",target:"_blank",rel:"noopener noreferrer",children:"npm"})," ","private repositories, append ",Object(e.jsx)("code",{children:"?private_token=TOKEN"})," to the end of the URL.",Object(e.jsx)("br",{}),Object(e.jsx)("b",{className:"text-warning",children:"Warning: Only install apps from trusted sources."})]}),Object(e.jsxs)(b.a,{style:{width:"100%"},gutter:16,children:[Object(e.jsx)(h.a,{style:{flex:1},children:Object(e.jsx)(ln.a,{value:a,disabled:r,onChange:function(g){return d(g.target.value)},placeholder:"https://github.com/user/repo"})}),Object(e.jsx)(h.a,{children:Object(e.jsx)(v.a,{disabled:r||!a,loading:r,type:"default",onClick:function(){return c(a,z.a.Custom)},children:"Fetch and install"})})]}),s?Object(e.jsx)("p",{style:{color:"var(--red)",marginTop:10},children:s}):null]})})}function mt(){var n=Object(i.useValues)(o.b),a=n.localPluginUrl,s=n.pluginError,r=n.loading,l=Object(i.useActions)(o.b),d=l.setLocalPluginUrl,c=l.installPlugin;return Object(e.jsx)("div",{style:{marginTop:16},children:Object(e.jsxs)(ae.a,{children:[Object(e.jsx)(on.a,{level:5,children:"Install Local App"}),Object(e.jsx)(dn.a,{children:"To install a local app from this computer/server, give its full path below."}),Object(e.jsxs)(b.a,{style:{width:"100%"},gutter:16,children:[Object(e.jsx)(h.a,{style:{flex:1},children:Object(e.jsx)(ln.a,{value:a,disabled:r,onChange:function(g){return d(g.target.value)},placeholder:"/var/posthog/plugins/helloworldplugin"})}),Object(e.jsx)(h.a,{children:Object(e.jsx)(v.a,{disabled:r||!a,loading:r,type:"default",onClick:function(){return c(a,z.a.Local)},children:"Install"})})]}),s?Object(e.jsx)("p",{style:{color:"var(--red)",marginTop:10},children:s}):null]})})}var bt=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx");function ht(){var n=Object(i.useValues)(bt.a),a=n.preflight,s=Object(i.useActions)(o.b),r=s.setPluginTab;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ct.a,{message:"Advanced features ahead",description:Object(e.jsxs)(e.Fragment,{children:["Create and install your ",Object(e.jsx)("b",{children:"own apps"})," or apps from ",Object(e.jsx)("b",{children:"third-parties"}),". If you're looking for officially supported apps, try the"," ",Object(e.jsx)("a",{href:"#",onClick:function(d){d.preventDefault(),r(z.c.Repository)},children:"App Repository"}),"."]}),type:"warning",showIcon:!0}),Object(e.jsx)(Y.b,{subtitle:"Advanced Options"}),Object(e.jsx)(jt,{}),Object(e.jsx)(pt,{}),a&&!a.cloud&&Object(e.jsx)(mt,{})]})}var Ot={component:Vn,logic:o.b},ft=function(){return Object(e.jsx)(je.LemonTag,{type:"warning",className:"uppercase",style:{verticalAlign:"0.125em",marginLeft:6},children:"BETA"})};function Vn(){var n=Object(i.useValues)(Le.a),a=n.user,s=Object(i.useValues)(o.b),r=s.pluginTab,l=Object(i.useActions)(o.b),d=l.setPluginTab,c=Rn.a.TabPane;return Object(V.useEffect)(function(){Object(Z.d)(a==null?void 0:a.organization)||(window.location.href="/")},[a]),!a||!Object(Z.d)(a==null?void 0:a.organization)?null:Object(e.jsxs)("div",{className:"plugins-scene",children:[Object(e.jsx)(Y.a,{title:"Apps",caption:Object(e.jsxs)(e.Fragment,{children:["Apps enable you to extend PostHog's core data processing functionality.",Object(e.jsx)("br",{}),"Make use of verified apps from the"," ",Object(e.jsx)("a",{href:"https://posthog.com/apps",target:"_blank",children:"App Library"})," ","\u2013 or"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/apps/build",target:"_blank",children:"build your own"}),"."]})}),Object(e.jsxs)(Rn.a,{"data-attr":"apps-tabs",activeKey:r,onChange:function(g){return d(g)},children:[Object(e.jsx)(c,{tab:"Installed",children:Object(e.jsx)(dt,{})},z.c.Installed),Object(Z.b)(a.organization)?Object(e.jsx)(c,{tab:"Repository",children:Object(e.jsx)(Hn,{})},z.c.Repository):null,Object(e.jsx)(c,{tab:Object(e.jsxs)(e.Fragment,{children:["History ",Object(e.jsx)(ft,{})," "]}),children:Object(e.jsx)(En.a,{scope:In.a.PLUGIN})},z.c.History),Object(Z.c)(a.organization)?Object(e.jsx)(c,{tab:"Advanced",children:Object(e.jsx)(ht,{})},z.c.Advanced):null]}),Object(e.jsx)(de.a,{})]})}},"./node_modules/@ant-design/icons-svg/lib/asn/SearchOutlined.js":function(J,f,t){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};f.default=x},"./node_modules/@ant-design/icons/SearchOutlined.js":function(J,f,t){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var x=U(t("./node_modules/@ant-design/icons/lib/icons/SearchOutlined.js"));function U(A){return A&&A.__esModule?A:{default:A}}var R=x;f.default=R,J.exports=R},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(J,f,t){"use strict";var x=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),U=t("./node_modules/react/index.js"),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},A=R,T=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ne=function(de,te){return U.createElement(T.a,Object(x.a)(Object(x.a)({},de),{},{ref:te,icon:A}))};ne.displayName="OrderedListOutlined";var oe=f.a=U.forwardRef(ne)},"./node_modules/@ant-design/icons/lib/icons/SearchOutlined.js":function(J,f,t){"use strict";var x=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),U=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var R=U(t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/objectSpread2.js")),A=x(t("./node_modules/react/index.js")),T=U(t("./node_modules/@ant-design/icons-svg/lib/asn/SearchOutlined.js")),ne=U(t("./node_modules/@ant-design/icons/lib/components/AntdIcon.js")),oe=function(te,ce){return A.createElement(ne.default,(0,R.default)((0,R.default)({},te),{},{ref:ce,icon:T.default}))};oe.displayName="SearchOutlined";var V=A.forwardRef(oe);f.default=V},"./node_modules/antd/lib/input/Search.js":function(J,f,t){"use strict";var x=t("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),U=t("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var R=x(t("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),A=x(t("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),T=hn(t("./node_modules/react/index.js")),ne=x(t("./node_modules/classnames/index.js")),oe=t("./node_modules/antd/node_modules/rc-util/lib/ref.js"),V=x(t("./node_modules/@ant-design/icons/SearchOutlined.js")),de=x(t("./node_modules/antd/lib/input/Input.js")),te=x(t("./node_modules/antd/lib/button/index.js")),ce=x(t("./node_modules/antd/lib/config-provider/SizeContext.js")),Ze=t("./node_modules/antd/lib/config-provider/index.js"),Ne=t("./node_modules/antd/lib/_util/reactNode.js");function qe(u){if(typeof WeakMap!="function")return null;var M=new WeakMap,P=new WeakMap;return(qe=function(b){return b?P:M})(u)}function hn(u,M){if(!M&&u&&u.__esModule)return u;if(u===null||U(u)!=="object"&&typeof u!="function")return{default:u};var P=qe(M);if(P&&P.has(u))return P.get(u);var y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in u)if(h!=="default"&&Object.prototype.hasOwnProperty.call(u,h)){var i=b?Object.getOwnPropertyDescriptor(u,h):null;i&&(i.get||i.set)?Object.defineProperty(y,h,i):y[h]=u[h]}return y.default=u,P&&P.set(u,y),y}var On=function(u,M){var P={};for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&M.indexOf(y)<0&&(P[y]=u[y]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,y=Object.getOwnPropertySymbols(u);b<y.length;b++)M.indexOf(y[b])<0&&Object.prototype.propertyIsEnumerable.call(u,y[b])&&(P[y[b]]=u[y[b]]);return P},_e=T.forwardRef(function(u,M){var P,y=u.prefixCls,b=u.inputPrefixCls,h=u.className,i=u.size,o=u.suffix,en=u.enterButton,w=en===void 0?!1:en,v=u.addonAfter,ae=u.loading,I=u.disabled,ue=u.onSearch,xe=u.onChange,nn=On(u,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange"]),Ue=T.useContext(Ze.ConfigContext),ye=Ue.getPrefixCls,Be=Ue.direction,tn=T.useContext(ce.default),se=i||tn,Ce=T.useRef(null),an=function(B){B&&B.target&&B.type==="click"&&ue&&ue(B.target.value,B),xe&&xe(B)},$=function(B){var D;document.activeElement===((D=Ce.current)===null||D===void 0?void 0:D.input)&&B.preventDefault()},Pe=function(B){var D;ue&&ue((D=Ce.current)===null||D===void 0?void 0:D.input.value,B)},re=ye("input-search",y),Se=ye("input",b),De=typeof w=="boolean"?T.createElement(V.default,null):null,X="".concat(re,"-button"),le,ge=w||{},ze=ge.type&&ge.type.__ANT_BUTTON===!0;ze||ge.type==="button"?le=(0,Ne.cloneElement)(ge,(0,A.default)({onMouseDown:$,onClick:Pe,key:"enterButton"},ze?{className:X,size:se}:{})):le=T.createElement(te.default,{className:X,type:w?"primary":void 0,size:se,disabled:I,key:"enterButton",onMouseDown:$,onClick:Pe,loading:ae,icon:De},w),v&&(le=[le,(0,Ne.cloneElement)(v,{key:"addonAfter"})]);var sn=(0,ne.default)(re,(P={},(0,R.default)(P,"".concat(re,"-rtl"),Be==="rtl"),(0,R.default)(P,"".concat(re,"-").concat(se),!!se),(0,R.default)(P,"".concat(re,"-with-button"),!!w),P),h);return T.createElement(de.default,(0,A.default)({ref:(0,oe.composeRef)(Ce,M),onPressEnter:Pe},nn,{size:se,prefixCls:Se,addonAfter:le,suffix:o,onChange:an,className:sn,disabled:I}))});_e.displayName="Search";var fn=_e;f.default=fn},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss":function(J,f,t){var x=t("./node_modules/css-loader/dist/runtime/api.js");f=x(!1),f.push([J.i,".plugins-scene{padding-bottom:60px}.plugins-installed-tab-section-header:hover,.plugins-repository-tab-section-header:hover{cursor:pointer}.plugins-repository-tab-section-header{margin-left:5px}.plugin-capabilities-tag{cursor:default}.plugins-scene-plugin-card>.ant-card-body{padding:15px}.plugins-scene-plugin-card .plugin-card-row>.ant-col{margin-right:14px}.plugins-scene-plugin-card .plugin-card-row>.ant-col:last-child{margin-right:0}.plugins-scene-plugin-card a.plugin-title-link{color:var(--color-text)}.plugins-scene-plugin-card a.plugin-title-link:hover{text-decoration:underline}.plugins-scene-plugin-card .plugin-image{width:60px;height:60px;display:flex;justify-content:center;align-items:center;margin-left:auto;margin-right:auto;border:none;padding:4px}.plugins-scene-plugin-card .order-handle{cursor:move;text-align:center;height:100%;margin-top:-10px;margin-bottom:-10px}.plugins-scene-plugin-card .order-handle .ant-tag{margin-right:0;cursor:move}.plugins-scene-plugin-card .order-handle .arrow{color:#888;height:19px}.plugins-scene-plugin-card .order-handle .arrow.hide{visibility:hidden}.plugins-scene-plugin-card .hide-over-500{display:none}@media(max-width:500px){.plugins-scene-plugin-card .show-over-500{display:none}.plugins-scene-plugin-card .hide-over-500{display:inline-block}.plugins-scene-plugin-card button.ant-btn.padding-under-500{padding:4px 8px}.plugins-scene-plugin-card .hide-plugin-image-below-500{display:none}}.plugins-popconfirm{z-index:var(--z-plugins-popconfirm)}.plugin-job-json-editor{border:1px solid #efefef}.plugin-run-job-button{color:var(--success);cursor:pointer}.plugin-run-job-button-disabled{color:#9a9a9a;cursor:default}",""]),J.exports=f}}]);
