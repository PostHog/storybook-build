(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(F,m,e){"use strict";var h=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),H=e.n(h),B=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),v=e.n(B),L={};L.insert="head",L.singleton=!1;var G=H()(v.a,L),N=v.a.locals||{}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(F,m,e){"use strict";e.d(m,"a",function(){return i}),e.d(m,"b",function(){return X});var h=e("./node_modules/core-js/modules/es.function.name.js"),H=e.n(h),B=e("./node_modules/core-js/modules/es.array.slice.js"),v=e.n(B),L=e("./node_modules/react/index.js"),G=e.n(L),N=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),$=e("./node_modules/kea/lib/index.esm.js"),S=e("./frontend/src/lib/dayjs.ts"),z=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),p=e("./frontend/src/lib/components/LemonButton/index.ts"),I=e("./frontend/src/scenes/urls.ts"),Y=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),T=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),x=e("./frontend/src/lib/utils/eventUsageLogic.ts"),d=e("./node_modules/react/jsx-runtime.js"),J=e.n(d);function i(P){var _=P.insight,l=Object($.useActions)(x.e),c=l.reportInsightOpenedFromRecentInsightList;return Object(d.jsx)(p.a,{fullWidth:!0,to:I.a.insightView(_.short_id),onClick:function(){c()},children:Object(d.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(d.jsx)(Y.InsightIcon,{insight:_}),Object(d.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(d.jsx)("div",{children:_.name||_.derived_name}),Object(d.jsxs)("div",{children:["Last modified ",Object(S.a)(_.last_modified_at).fromNow()]})]})]})})}function X(){var P=Object($.useValues)(T.a),_=P.recentInsights,l=P.recentInsightsLoading,c=Object($.useActions)(T.a),u=c.loadRecentInsights;return Object(L.useEffect)(function(){u()},[]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(z.a,{title:"Your recently viewed insights",viewAllURL:I.a.savedInsights(),loading:l,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:I.a.savedInsights()},items:_.slice(0,5),renderRow:function(R,K){return Object(d.jsx)(i,{insight:R},K)}})})}try{i.displayName="InsightRow",i.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:i.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(P){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(F,m,e){"use strict";e.d(m,"b",function(){return P}),e.d(m,"a",function(){return _});var h=e("./node_modules/core-js/modules/es.array.slice.js"),H=e.n(h),B=e("./frontend/src/lib/dayjs.ts"),v=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),G=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),N=e("./frontend/src/lib/components/LemonButton/index.ts"),$=e("./frontend/src/lib/components/ProfilePicture/index.ts"),S=e("./frontend/src/scenes/persons/PersonHeader.tsx"),z=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),p=e("./frontend/src/scenes/urls.ts"),I=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Y=e("./frontend/src/lib/utils.tsx"),T=e("./frontend/src/lib/components/icons.tsx"),x=e("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),d=e("./frontend/src/scenes/teamLogic.tsx"),J=e("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),i=e("./node_modules/react/jsx-runtime.js"),X=e.n(i);function P(l){var c=l.recording,u=Object(v.useActions)(J.a),j=u.openSessionPlayer,R=Object(v.useActions)(I.e),K=R.reportRecordingOpenedFromRecentRecordingList;return Object(i.jsx)(N.a,{fullWidth:!0,onClick:function(){j({id:c.id,matching_events:c.matching_events}),K()},children:Object(i.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(i.jsx)($.b,{name:Object(S.b)(c.person)}),Object(i.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(i.jsx)("div",{children:Object(S.b)(c.person)}),Object(i.jsxs)("div",{children:["Recorded ",Object(B.a)(c.start_time).fromNow()]})]}),Object(i.jsx)("span",{children:Object(Y.O)(c.recording_duration)}),Object(i.jsx)(T.IconPlayCircle,{className:"text-2xl ml-2"})]})})}function _(){var l=Object(v.useValues)(d.a),c=l.currentTeam,u=Object(z.c)({key:"projectHomepage"}),j=Object(v.useValues)(u),R=j.sessionRecordings,K=j.sessionRecordingsResponseLoading;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(x.a,{}),Object(i.jsx)(G.a,{title:"Recent recordings",viewAllURL:p.a.sessionRecordings(),loading:K,emptyMessage:c!=null&&c.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:p.a.projectSettings()+"#recordings"},items:R.slice(0,5),renderRow:function(k,se){return Object(i.jsx)(P,{recording:k},se)}})]})}try{P.displayName="RecordingRow",P.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:P.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(l){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(F,m,e){"use strict";e.d(m,"a",function(){return P});var h=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),H=e.n(h),B=e("./node_modules/@babel/runtime/regenerator/index.js"),v=e.n(B),L=e("./node_modules/core-js/modules/es.array.iterator.js"),G=e.n(L),N=e("./node_modules/core-js/modules/es.object.to-string.js"),$=e.n(N),S=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),z=e.n(S),p=e("./node_modules/kea/lib/index.esm.js"),I=e("./frontend/src/scenes/teamLogic.tsx"),Y=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),T=e("./frontend/src/types.ts"),x=e("./frontend/src/lib/api.ts"),d=e("./node_modules/kea-subscriptions/lib/index.js"),J=e.n(d),i=e("./node_modules/kea-loaders/lib/index.js"),X=e.n(i),P=Object(p.kea)([Object(p.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(p.connect)({values:[I.a,["currentTeamId","currentTeam"]]}),Object(p.selectors)({primaryDashboardId:[function(){return[I.a.selectors.currentTeam]},function(_){return _==null?void 0:_.primary_dashboard}],dashboardLogic:[function(_){return[_.primaryDashboardId]},function(_){return Object(Y.c)({id:_!=null?_:void 0,placement:T.m.ProjectHomepage})}]}),Object(i.loaders)(function(_){var l=_.values;return{recentInsights:[[],{loadRecentInsights:function(){var c=H()(v.a.mark(function j(){var R;return v.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,x.b.get("api/projects/".concat(l.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return R=E.sent,E.abrupt("return",R.results);case 4:case"end":return E.stop()}},j)}));function u(){return c.apply(this,arguments)}return u}()}],persons:[[],{loadPersons:function(){var c=H()(v.a.mark(function j(){var R;return v.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,x.b.persons.list();case 2:return R=E.sent,E.abrupt("return",R.results);case 4:case"end":return E.stop()}},j)}));function u(){return c.apply(this,arguments)}return u}()}]}}),Object(d.subscriptions)(function(_){var l=_.cache;return{dashboardLogic:function(u){var j;(j=l.unmount)===null||j===void 0||j.call(l),l.unmount=u?u.mount():null}}}),Object(p.afterMount)(function(_){var l,c=_.cache,u=_.actions;(l=c.unmount)===null||l===void 0||l.call(c),u.loadRecentInsights(),u.loadPersons()})])},"./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts":function(F,m,e){"use strict";e.d(m,"a",function(){return Z}),e.d(m,"b",function(){return je}),e.d(m,"c",function(){return ge});var h=e("./node_modules/core-js/modules/es.object.keys.js"),H=e.n(h),B=e("./node_modules/core-js/modules/es.symbol.js"),v=e.n(B),L=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),G=e.n(L),N=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),$=e.n(N),S=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),z=e.n(S),p=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),I=e.n(p),Y=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),T=e.n(Y),x=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),d=e.n(x),J=e("./node_modules/@babel/runtime/regenerator/index.js"),i=e.n(J),X=e("./node_modules/core-js/modules/es.array.find.js"),P=e.n(X),_=e("./node_modules/core-js/modules/es.object.to-string.js"),l=e.n(_),c=e("./node_modules/core-js/modules/es.function.name.js"),u=e.n(c),j=e("./node_modules/core-js/modules/es.array.map.js"),R=e.n(j),K=e("./node_modules/core-js/modules/es.array.concat.js"),E=e.n(K),k=e("./node_modules/core-js/modules/es.array.filter.js"),se=e.n(k),ie=e("./node_modules/core-js/modules/es.array.iterator.js"),fe=e.n(ie),_e=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ve=e.n(_e),ae=e("./node_modules/core-js/modules/es.object.from-entries.js"),Pe=e.n(ae),A=e("./node_modules/kea/lib/index.esm.js"),oe=e("./frontend/src/lib/api.ts"),te=e("./frontend/src/lib/utils.tsx"),w=e("./frontend/src/types.ts"),Q=e("./node_modules/kea-router/lib/index.js"),pe=e.n(Q),ce=e("./frontend/src/lib/utils/eventUsageLogic.ts"),de=e("./node_modules/fast-deep-equal/index.js"),le=e.n(de),ue=e("./frontend/src/scenes/teamLogic.tsx"),me=e("./frontend/src/lib/dayjs.ts"),ne=e("./node_modules/kea-loaders/lib/index.js"),Re=e.n(ne),q=e("./frontend/src/scenes/urls.ts");function re(s,o){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);o&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function C(s){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?re(Object(t),!0).forEach(function(n){d()(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}var Z=20,Ee={session_recording_duration:{type:"recording",key:"duration",value:60,operator:w.N.GreaterThan},properties:[],events:[],actions:[],date_from:Object(me.a)().subtract(21,"days").format("YYYY-MM-DD")},je=function(o,t,n){var r,a,g=(r=o.events)===null||r===void 0?void 0:r.find(function(O){var f=O.name;return f==="$pageview"}),M=(a=o.events)!==null&&a!==void 0?a:[],U=n?{key:t,value:[n],operator:w.N.Exact,type:"event"}:{key:t,value:w.N.IsNotSet,operator:w.N.IsNotSet,type:"event"};return g?{events:M.map(function(O){var f,D;return O.order===g.order?C(C({},O),{},{properties:[].concat(T()((f=(D=O.properties)===null||D===void 0?void 0:D.filter(function(y){var V=y.key;return V!==t}))!==null&&f!==void 0?f:[]),[U])}):O})}:{events:[].concat(T()(M),[{id:"$pageview",name:"$pageview",type:"events",order:M.length,properties:[U]}])}},ge=Object(A.kea)([Object(A.path)(function(s){return["scenes","session-recordings","playlist","sessionRecordingsListLogic",s]}),Object(A.props)({}),Object(A.key)(function(s){var o;return"".concat(s.key,"-").concat((o=s.updateSearchParams)!==null&&o!==void 0?o:"-with-search")}),Object(A.connect)({values:[ue.a,["currentTeamId"]],actions:[ce.e,["reportRecordingsListFetched","reportRecordingsListPropertiesFetched","reportRecordingsListFilterAdded"]]}),Object(A.actions)({getSessionRecordings:!0,setFilters:function(o){return{filters:o}},replaceFilters:function(o){return{filters:o}},setShowFilters:function(o){return{showFilters:o}},setSelectedRecordingId:function(o){return{id:o}},loadNext:!0,loadPrev:!0}),Object(ne.loaders)(function(s){var o=s.props,t=s.values,n=s.actions;return{sessionRecordingsResponse:[{results:[],has_next:!1},{getSessionRecordings:function(){var r=I()(i.a.mark(function g(M,U){var O,f,D,y,V,ee;return i.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return f=C(C({},t.filters),{},{person_uuid:(O=o.personUUID)!==null&&O!==void 0?O:"",limit:Z}),D=Object(te.Fb)(f),W.next=4,U(100);case 4:return y=performance.now(),W.next=7,oe.b.recordings.list(D);case 7:return V=W.sent,ee=performance.now()-y,n.reportRecordingsListFetched(ee),U(),W.abrupt("return",V);case 12:case"end":return W.stop()}},g)}));function a(g,M){return r.apply(this,arguments)}return a}()}],sessionRecordingsPropertiesResponse:[{results:[]},{getSessionRecordingsProperties:function(){var r=I()(i.a.mark(function g(M,U){var O,f,D,y,V;return i.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(t.sessionRecordingsResponse.results.length<1)){b.next=2;break}return b.abrupt("return",{results:[]});case 2:return O={session_ids:t.sessionRecordingsResponse.results.map(function(W){var Oe=W.id;return Oe})},f=Object(te.Fb)(O),b.next=6,U(100);case 6:return D=performance.now(),b.next=9,oe.b.recordings.listProperties(f);case 9:return y=b.sent,V=performance.now()-D,n.reportRecordingsListPropertiesFetched(V),U(),b.abrupt("return",y);case 14:case"end":return b.stop()}},g)}));function a(g,M){return r.apply(this,arguments)}return a}()}]}}),Object(A.reducers)(function(s){var o=s.props;return{filters:[o.filters||Ee,{replaceFilters:function(n,r){var a=r.filters;return a},setFilters:function(n,r){var a=r.filters;return C(C({},n),a)}}],showFilters:[!1,{setShowFilters:function(n,r){var a=r.showFilters;return a}}],sessionRecordings:[[],{getSessionRecordingsSuccess:function(n,r){var a=r.sessionRecordingsResponse;return T()(a.results)},setSelectedRecordingId:function(n,r){var a=r.id;return T()(n.map(function(g){return g.id===a?C(C({},g),{},{viewed:!0}):C({},g)}))}}],selectedRecordingId:[null,{setSelectedRecordingId:function(n,r){var a=r.id;return a!=null?a:null}}]}}),Object(A.listeners)(function(s){var o=s.actions,t=s.values;return{setFilters:function(){o.getSessionRecordings()},replaceFilters:function(){o.getSessionRecordings()},loadNext:function(){var r;o.setFilters({offset:(((r=t.filters)===null||r===void 0?void 0:r.offset)||0)+Z})},loadPrev:function(){var r;o.setFilters({offset:Math.max((((r=t.filters)===null||r===void 0?void 0:r.offset)||0)-Z,0)})},getSessionRecordingsSuccess:function(){o.getSessionRecordingsProperties({})}}}),Object(A.selectors)({sessionRecordingIdToProperties:[function(s){return[s.sessionRecordingsPropertiesResponse]},function(s){var o;return(o=Object.fromEntries(s.results.map(function(t){var n=t.id,r=t.properties;return[n,r]})))!==null&&o!==void 0?o:{}}],activeSessionRecording:[function(s){return[s.selectedRecordingId,s.sessionRecordings]},function(s,o){return s?o.find(function(t){return t.id===s})||{id:s}:o[0]}],hasPrev:[function(s){return[s.filters]},function(s){return(s.offset||0)>0}],hasNext:[function(s){return[s.sessionRecordingsResponse]},function(s){return s.has_next}],totalFiltersCount:[function(s){return[s.filters]},function(s){var o,t,n;return((s==null||(o=s.actions)===null||o===void 0?void 0:o.length)||0)+((s==null||(t=s.events)===null||t===void 0?void 0:t.length)||0)+((s==null||(n=s.properties)===null||n===void 0?void 0:n.length)||0)}]}),Object(A.afterMount)(function(s){var o=s.actions;o.getSessionRecordings()}),Object(Q.actionToUrl)(function(s){var o=s.props,t=s.values;if(!o.updateSearchParams)return{};var n=function(a){var g={filters:t.filters},M=C({},Q.router.values.hashParams);return t.selectedRecordingId?M.sessionRecordingId=t.selectedRecordingId:delete M.sessionRecordingId,[Q.router.values.location.pathname,g,M,{replace:a}]};return{loadSessionRecordings:function(){return n(!0)},setSelectedRecordingId:function(){return n(!1)},setFilters:function(){return n(!0)}}}),Object(Q.urlToAction)(function(s){var o,t=s.actions,n=s.values,r=s.props,a=function(M,U,O){var f;if(!!r.updateSearchParams){var D=(f=O.sessionRecordingId)!==null&&f!==void 0?f:null;D!==n.selectedRecordingId&&t.setSelectedRecordingId(D);var y=U.filters;y&&(le()(y,n.filters)||t.replaceFilters(y))}};return o={},d()(o,q.a.sessionRecordings(),a),d()(o,q.a.sessionRecordings(w.X.Recent),a),d()(o,q.a.person("*"),a),o})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(F,m,e){var h=e("./node_modules/css-loader/dist/runtime/api.js");m=h(!1),m.push([F.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),F.exports=m}}]);
