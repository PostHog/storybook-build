(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[14630],{"../../frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>SceneDashboardChoiceModal});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonModal/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonRow/index.ts"),lib_lemon_ui_LemonSkeleton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSkeleton/index.ts"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx"),_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneDashboardChoiceModal(_ref){let{scene}=_ref,modalLogic=(0,_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_10__.F)({scene}),{isOpen,currentDashboardId,dashboards,searchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(modalLogic),{closeSceneDashboardChoiceModal,setSceneDashboardChoice,setSearchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(modalLogic),{dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_9__.h);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_5__.f,{isOpen:isOpen,onClose:closeSceneDashboardChoiceModal,title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:["Select a default dashboard for ",_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_10__.o[scene]]}),footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_12__.cn)("flex gap-2 w-full",currentDashboardId?"justify-between":"justify-end"),children:[currentDashboardId?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__.J,{type:"secondary","data-attr":"scene-dashboard-choice-new-tab",onClick:()=>{setSceneDashboardChoice(null),setSearchTerm(""),closeSceneDashboardChoiceModal()},children:'Reset to "new tab"'}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__.J,{type:"secondary","data-attr":"close-scene-dashboard-choice-modal",onClick:closeSceneDashboardChoiceModal,children:"Close"})]}),children:dashboardsLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"deprecated-space-y-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonSkeleton__WEBPACK_IMPORTED_MODULE_7__.y.Row,{repeat:4})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.DF,{type:"search",placeholder:"Search for dashboards",onChange:setSearchTerm,value:null!=searchTerm?searchTerm:void 0,fullWidth:!0,allowClear:!0,className:"mb-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.p2,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"deprecated-space-y-2 min-h-100",children:dashboards.map(dashboard=>{let isCurrentChoice=dashboard.id===currentDashboardId,rowContents=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("strong",{children:dashboard.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span",{className:"text-text-3000 font-normal text-ellipsis",children:dashboard.description})]}),isCurrentChoice?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_3__.m,{scene:scene,size:"small"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span",{children:"Default"})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return isCurrentChoice?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_6__.Q,{fullWidth:!0,status:"muted",className:"dashboard-row",children:rowContents},dashboard.id):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__.J,{fullWidth:!0,className:"dashboard-row",onClick:()=>{setSceneDashboardChoice(dashboard.id),setSearchTerm(""),closeSceneDashboardChoiceModal(),kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.replace(scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.projectHomepage())},children:rowContents},dashboard.id)})})]})})}},"../../frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>SceneIcon});var clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneIcon(props){let className=(0,clsx__WEBPACK_IMPORTED_MODULE_3__.default)("text-warning","small"===props.size?"text-lg":"text-3xl");return props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__.x.ProjectHomepage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconHome,{className:className}):props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__.x.Group||props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__.x.Person?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPerson,{className:className}):null}},"../../frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>sceneDashboardChoiceModalLogic,o:()=>sceneDescription});var fuse_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.268.6_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/utils/eventUsageLogic.ts"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx");let sceneDescription={[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.Person]:"persons",[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.Group]:"groups",[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage]:"this project"},sceneDashboardChoiceModalLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["lib","components","SceneDashboardChoice","sceneDashboardChoiceModalLogic",key||"unknown"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>`${props.scene}`),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({logic:[lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_2__.vx],actions:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.teamLogic,["updateCurrentTeam"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_5__.userLogic,["setUserScenePersonalisation"]],values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.teamLogic,["currentTeam"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_5__.userLogic,["user"],_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_6__.h,["nameSortedDashboards"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!0,setSceneDashboardChoice:dashboardId=>({dashboardId}),setSearchTerm:searchTerm=>({searchTerm})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({searchTerm:[null,{setSearchTerm:(_,_ref)=>{let{searchTerm}=_ref;return searchTerm}}],isOpen:[!1,{showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!1}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)(_ref2=>{let{props}=_ref2;return{currentDashboardId:[s=>[s.currentTeam,s.user],(currentTeam,user)=>{var _ref3;let currentDashboard=user?.scene_personalisation?.find(choice=>choice.scene===props.scene)?.dashboard;return currentDashboard||props.scene!==scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage||(currentDashboard=currentTeam?.primary_dashboard),null!==(_ref3="number"==typeof currentDashboard?currentDashboard:currentDashboard?.id)&&void 0!==_ref3?_ref3:null}],dashboards:[s=>[s.searchTerm,s.nameSortedDashboards],(searchTerm,dashboards)=>(dashboards=dashboards.filter(d=>!d.deleted).sort((a,b)=>{var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")}),searchTerm)?new fuse_js__WEBPACK_IMPORTED_MODULE_7__.Z(dashboards,{keys:["key","name","description","tags"],threshold:.3}).search(searchTerm).map(result=>result.item):dashboards]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref4=>{let{actions,props}=_ref4;return{setSceneDashboardChoice:async _ref5=>{let{dashboardId}=_ref5;props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage?(actions.updateCurrentTeam({primary_dashboard:null!=dashboardId?dashboardId:void 0}),posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("primary dashboard changed")):(actions.setUserScenePersonalisation(props.scene,null!=dashboardId?dashboardId:0),posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("scene dashboard choice set",{scene:props.scene,dashboardId:dashboardId}))},showSceneDashboardChoiceModal:async()=>{props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage?posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("primary dashboard modal opened"):posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("scene dashboard choice modal opened",{scene:props.scene})}}})])},"../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F1:()=>TabsPrimitive_TabsPrimitive_TabsPrimitive,TN:()=>TabsPrimitiveContent,qf:()=>TabsPrimitiveList,Em:()=>TabsPrimitiveTrigger});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),TabsPrimitive=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.scss"),TabsPrimitive_default=__webpack_require__.n(TabsPrimitive),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(TabsPrimitive_default(),options),TabsPrimitive_default().locals;var react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+primitive@1.1.2/node_modules/@radix-ui/primitive/dist/index.mjs"),react_context_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-context/dist/index.mjs"),react_roving_focus_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-roving-focus@1.1.10_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@1_s34sf37ri6vsfee6hgvbnj4c5m/node_modules/@radix-ui/react-roving-focus/dist/index.mjs"),react_presence_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-presence@1.1.4_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@radix-ui/react-presence/dist/index.mjs"),react_primitive_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@18.2._ihqo3gllg2a7btjdwawxemejy4/node_modules/@radix-ui/react-primitive/dist/index.mjs"),react_direction_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-direction@1.1.1_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-direction/dist/index.mjs"),react_use_controllable_state_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-use-controllable-state@1.2.2_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),react_id_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-id@1.1.1_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-id/dist/index.mjs"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),TABS_NAME="Tabs",[createTabsContext,createTabsScope]=(0,react_context_dist.b)(TABS_NAME,[react_roving_focus_dist.Pc]),useRovingFocusGroupScope=(0,react_roving_focus_dist.Pc)(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value:valueProp,onValueChange,defaultValue,orientation="horizontal",dir,activationMode="automatic",...tabsProps}=props,direction=(0,react_direction_dist.gm)(dir),[value,setValue]=(0,react_use_controllable_state_dist.T)({prop:valueProp,onChange:onValueChange,defaultProp:defaultValue??"",caller:TABS_NAME});return(0,jsx_runtime.jsx)(TabsProvider,{scope:__scopeTabs,baseId:(0,react_id_dist.M)(),value,onValueChange:setValue,orientation,dir:direction,activationMode,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{dir:direction,"data-orientation":orientation,...tabsProps,ref:forwardedRef})})});Tabs.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,loop=!0,...listProps}=props,context=useTabsContext(TAB_LIST_NAME,__scopeTabs),rovingFocusGroupScope=useRovingFocusGroupScope(__scopeTabs);return(0,jsx_runtime.jsx)(react_roving_focus_dist.fC,{asChild:!0,...rovingFocusGroupScope,orientation:context.orientation,dir:context.dir,loop,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{role:"tablist","aria-orientation":context.orientation,...listProps,ref:forwardedRef})})});TabsList.displayName=TAB_LIST_NAME;var TRIGGER_NAME="TabsTrigger",TabsTrigger=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value,disabled=!1,...triggerProps}=props,context=useTabsContext(TRIGGER_NAME,__scopeTabs),rovingFocusGroupScope=useRovingFocusGroupScope(__scopeTabs),triggerId=makeTriggerId(context.baseId,value),contentId=makeContentId(context.baseId,value),isSelected=value===context.value;return(0,jsx_runtime.jsx)(react_roving_focus_dist.ck,{asChild:!0,...rovingFocusGroupScope,focusable:!disabled,active:isSelected,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.button,{type:"button",role:"tab","aria-selected":isSelected,"aria-controls":contentId,"data-state":isSelected?"active":"inactive","data-disabled":disabled?"":void 0,disabled,id:triggerId,...triggerProps,ref:forwardedRef,onMouseDown:(0,dist.M)(props.onMouseDown,event=>{disabled||0!==event.button||!1!==event.ctrlKey?event.preventDefault():context.onValueChange(value)}),onKeyDown:(0,dist.M)(props.onKeyDown,event=>{[" ","Enter"].includes(event.key)&&context.onValueChange(value)}),onFocus:(0,dist.M)(props.onFocus,()=>{let isAutomaticActivation="manual"!==context.activationMode;isSelected||disabled||!isAutomaticActivation||context.onValueChange(value)})})})});TabsTrigger.displayName=TRIGGER_NAME;var CONTENT_NAME="TabsContent",TabsContent=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value,forceMount,children,...contentProps}=props,context=useTabsContext(CONTENT_NAME,__scopeTabs),triggerId=makeTriggerId(context.baseId,value),contentId=makeContentId(context.baseId,value),isSelected=value===context.value,isMountAnimationPreventedRef=react.useRef(isSelected);return react.useEffect(()=>{let rAF=requestAnimationFrame(()=>isMountAnimationPreventedRef.current=!1);return()=>cancelAnimationFrame(rAF)},[]),(0,jsx_runtime.jsx)(react_presence_dist.z,{present:forceMount||isSelected,children:({present})=>(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{"data-state":isSelected?"active":"inactive","data-orientation":context.orientation,role:"tabpanel","aria-labelledby":triggerId,hidden:!present,id:contentId,tabIndex:0,...contentProps,ref:forwardedRef,style:{...props.style,animationDuration:isMountAnimationPreventedRef.current?"0s":void 0},children:present&&children})})});function makeTriggerId(baseId,value){return`${baseId}-trigger-${value}`}function makeContentId(baseId,value){return`${baseId}-content-${value}`}TabsContent.displayName=CONTENT_NAME;var css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts");function TabsPrimitive_TabsPrimitive_TabsPrimitive(_ref){let{...props}=_ref;return(0,jsx_runtime.jsx)(Tabs,{...props})}function TabsPrimitiveList(_ref2){let{...props}=_ref2;return(0,jsx_runtime.jsx)(TabsList,{...props})}function TabsPrimitiveContent(_ref3){let{...props}=_ref3;return(0,jsx_runtime.jsx)(TabsContent,{...props})}function TabsPrimitiveTrigger(_ref4){let{className,...props}=_ref4;return(0,jsx_runtime.jsx)(TabsTrigger,{className:(0,css_classes.cn)("tabs-trigger",className),...props})}},"../../frontend/src/scenes/new-tab/NewTabScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NewTabScene:()=>NewTabScene,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),SceneDashboardChoiceModal=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceModal.tsx"),sceneDashboardChoiceModalLogic=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts"),ScrollableShadows=__webpack_require__("../../frontend/src/lib/components/ScrollableShadows/ScrollableShadows.tsx"),Link=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),ButtonPrimitives=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),ListBox=__webpack_require__("../../frontend/src/lib/ui/ListBox/ListBox.tsx"),TabsPrimitive=__webpack_require__("../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),maxLogic=__webpack_require__("../../frontend/src/scenes/max/maxLogic.tsx"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),featureFlagLogic=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),defaultTree=__webpack_require__("../../frontend/src/layout/panel-layout/ProjectTree/defaultTree.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function getIconForFileSystemItem(fs){return"icon"in fs&&fs.icon?(0,jsx_runtime.jsx)(defaultTree.ee,{type:fs.type,colorOverride:fs.iconColor,children:fs.icon}):(0,defaultTree.PO)("iconType"in fs?fs.iconType:fs.type,fs.iconColor)}let newTabSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","new-tab","newTabSceneLogic"]),(0,index_esm.props)({}),(0,index_esm.connect)(()=>({values:[featureFlagLogic.featureFlagLogic,["featureFlags"]]})),(0,index_esm.key)(props=>props.tabId||"default"),(0,index_esm.actions)({setSearch:search=>({search}),selectNext:!0,selectPrevious:!0,onSubmit:!0,setSelectedCategory:category=>({category})}),(0,index_esm.reducers)({search:["",{setSearch:(_,_ref)=>{let{search}=_ref;return search}}],selectedCategory:["all",{setSelectedCategory:(_,_ref2)=>{let{category}=_ref2;return category}}],rawSelectedIndex:[0,{selectNext:state=>state+1,selectPrevious:state=>state-1,setSearch:()=>0,setSelectedCategory:()=>0}]}),(0,index_esm.selectors)({categories:[()=>[],()=>[{key:"all",label:"All"},{key:"create-new",label:"Create new"},{key:"apps",label:"Apps"},{key:"data-management",label:"Data management"}]],itemsGrid:[s=>[s.featureFlags],featureFlags=>{let newInsightItems=(0,defaultTree.eq)().filter(_ref3=>{let{path}=_ref3;return path.startsWith("Insight/")}).map(fs=>({href:fs.href,name:"New "+fs.path.substring(8),icon:getIconForFileSystemItem(fs),flag:fs.flag})).filter(_ref4=>{let{flag}=_ref4;return!flag||featureFlags[flag]}),newDataItems=(0,defaultTree.eq)().filter(_ref5=>{let{path}=_ref5;return path.startsWith("Data/")}).map(fs=>({href:fs.href,name:"Data "+fs.path.substring(5).toLowerCase(),icon:getIconForFileSystemItem(fs),flag:fs.flag})).filter(_ref6=>{let{flag}=_ref6;return!flag||featureFlags[flag]}),newOtherItems=(0,defaultTree.eq)().filter(_ref7=>{let{path}=_ref7;return!path.startsWith("Insight/")&&!path.startsWith("Data/")}).map(fs=>({href:fs.href,name:"New "+fs.path,icon:getIconForFileSystemItem(fs),flag:fs.flag})).filter(_ref8=>{let{flag}=_ref8;return!flag||featureFlags[flag]}),products=[...(0,defaultTree.UC)(),...(0,defaultTree.We)()].map(fs=>({href:fs.href,name:fs.path,icon:getIconForFileSystemItem(fs),flag:fs.flag})).filter(_ref9=>{let{flag}=_ref9;return!flag||featureFlags[flag]}).toSorted((a,b)=>a.name.localeCompare(b.name)),data=(0,defaultTree.T7)().map(fs=>({href:fs.href,name:fs.path,icon:getIconForFileSystemItem(fs),flag:fs.flag})).filter(_ref10=>{let{flag}=_ref10;return!flag||featureFlags[flag]});return[{category:"create-new",types:[{name:"New SQL query",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconDatabase,{}),href:"/sql"},...newInsightItems,...newOtherItems,{name:"New Hog program",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconHogQL,{}),href:"/debug/hog"}]},{category:"apps",types:[...products]},{category:"data-management",types:[...data,...newDataItems]}]}],filteredItemsGrid:[s=>[s.itemsGrid,s.search,s.selectedCategory],(itemsGrid,search,selectedCategory)=>{let filtered=itemsGrid;if("all"!==selectedCategory&&(filtered=filtered.filter(_ref11=>{let{category}=_ref11;return category===selectedCategory})),!search.trim())return filtered;let lowerSearchChunks=search.toLowerCase().split(" ").map(s=>s.trim()).filter(s=>s);return filtered.map(_ref12=>{let{category,types}=_ref12;return{category,types:types.filter(t=>0===lowerSearchChunks.filter(lowerSearch=>!`${category} ${t.name}`.toLowerCase().includes(lowerSearch)).length)}}).filter(_ref13=>{let{types}=_ref13;return types.length>0})}],filteredItemsList:[s=>[s.filteredItemsGrid],filteredItemsGrid=>filteredItemsGrid.flatMap(_ref14=>{let{category,types}=_ref14;return types.map(type=>({category,type}))})],selectedIndex:[s=>[s.rawSelectedIndex,s.filteredItemsList],(rawSelectedIndex,filteredItemsList)=>0===filteredItemsList.length?null:(rawSelectedIndex%filteredItemsList.length+filteredItemsList.length)%filteredItemsList.length],selectedItem:[s=>[s.selectedIndex,s.filteredItemsList],(selectedIndex,filteredItemsList)=>null!==selectedIndex&&selectedIndex<filteredItemsList.length?filteredItemsList[selectedIndex]:null],breadcrumbs:[()=>[],()=>[{key:"new-tab",name:"New tab",iconType:"blank"}]]}),(0,index_esm.listeners)(_ref15=>{let{values}=_ref15;return{onSubmit:()=>{values.selectedItem?.type?.href&&lib.router.actions.push(values.selectedItem.type.href)}}})]);var sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),SearchHighlight=__webpack_require__("../../frontend/src/layout/navigation-3000/components/SearchHighlight.tsx"),sidePanelStateLogic=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/sidePanelStateLogic.tsx"),navigationLogic=__webpack_require__("../../frontend/src/layout/navigation/navigationLogic.ts"),types=__webpack_require__("../../frontend/src/types.ts");let scene={component:NewTabScene,logic:newTabSceneLogic},getCategoryDisplayName=category=>({"create-new":"Create new",apps:"Apps","data-management":"Data management"})[category]||category;function NewTabScene(){let{tabId,source}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},inputRef=(0,react.useRef)(null),listboxRef=(0,react.useRef)(null),{filteredItemsGrid,search,selectedItem,categories,selectedCategory}=(0,index_esm.useValues)(newTabSceneLogic({tabId})),{mobileLayout}=(0,index_esm.useValues)(navigationLogic.f),{setQuestion,focusInput}=(0,index_esm.useActions)(maxLogic.v8),{setSearch,setSelectedCategory}=(0,index_esm.useActions)(newTabSceneLogic({tabId})),{openSidePanel}=(0,index_esm.useActions)(sidePanelStateLogic.f),{showSceneDashboardChoiceModal}=(0,index_esm.useActions)((0,sceneDashboardChoiceModalLogic.F)({scene:sceneTypes.x.ProjectHomepage}));return(0,react.useEffect)(()=>{if(selectedItem){let element=document.querySelector(".selected-new-tab-item");element?.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},[selectedItem]),(0,jsx_runtime.jsxs)(ListBox.w,{ref:listboxRef,className:"w-full grid grid-rows-[auto_1fr] flex-col h-[calc(100vh-var(--scene-layout-header-height))]",virtualFocus:!0,autoSelectFirst:!0,children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"px-1 @lg/main-content:px-8 pt-2 @lg/main-content:pt-8 mx-auto w-full max-w-[1200px] ",children:[(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,virtualFocusIgnore:!0,children:(0,jsx_runtime.jsx)(src.DF,{inputRef:inputRef,value:search,onChange:value=>setSearch(value),prefix:(0,jsx_runtime.jsx)(posthog_icons_es.IconSearch,{}),className:"w-full",placeholder:"Search...",autoFocus:!0,allowClear:!0})}),(0,jsx_runtime.jsx)("div",{className:"mx-1.5",children:(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center relative text-xs font-medium overflow-hidden py-1 px-1.5 border-x border-b rounded-b backdrop-blur-sm bg-[var(--glass-bg-3000)]",children:[(0,jsx_runtime.jsxs)("span",{children:[(0,jsx_runtime.jsx)("span",{className:"text-tertiary",children:"Try:"}),(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xxs",className:"text-xs",onClick:()=>setSearch("New SQL query"),children:"New SQL query"})}),(0,jsx_runtime.jsx)("span",{className:"text-tertiary",children:"or"}),(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xxs",className:"text-xs",onClick:()=>setSearch("Experiment"),children:"Experiment"})})]}),(0,jsx_runtime.jsx)("span",{className:"text-primary flex gap-1 items-center",children:(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,focusFirst:0===filteredItemsGrid.length,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{size:"xxs",onClick:()=>{openSidePanel(types.H$.Max),setSearch(""),setQuestion(search),focusInput()},className:"text-xs",tooltip:"Hit enter to open Max!",children:["Ask Max!",(0,jsx_runtime.jsx)(posthog_icons_es.IconSidePanel,{})]})})})]})})]}),(0,jsx_runtime.jsx)(TabsPrimitive.F1,{value:selectedCategory,onValueChange:setSelectedCategory,children:(0,jsx_runtime.jsx)(TabsPrimitive.qf,{className:"border-b",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-[1200px] mx-auto w-full px-1 @lg/main-content:px-8 flex",children:[categories.map(category=>(0,jsx_runtime.jsx)(TabsPrimitive.Em,{value:category.key,className:"px-2 py-1 cursor-pointer",onClick:()=>{mobileLayout||(inputRef.current?.focus(),listboxRef.current?.focusFirstItem())},children:category.label},category.key)),"homepage"===source?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{type:"tertiary",size:"small","data-attr":"project-home-customize-homepage",className:"ml-auto",onClick:showSceneDashboardChoiceModal,children:"Customize homepage"}),(0,jsx_runtime.jsx)(SceneDashboardChoiceModal.q,{scene:sceneTypes.x.ProjectHomepage})]}):null]})})})]}),(0,jsx_runtime.jsx)(ScrollableShadows.D,{direction:"vertical",className:"flex flex-col gap-4 overflow-auto h-full",innerClassName:"pt-6",children:(0,jsx_runtime.jsx)("div",{className:"flex flex-col flex-1 max-w-[1200px] mx-auto w-full gap-4 px-3 @lg/main-content:px-8",children:0===filteredItemsGrid.length?(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-4",children:(0,jsx_runtime.jsxs)("div",{className:"flex gap-1 items-center",children:["No results found,"," ",(0,jsx_runtime.jsxs)(ListBox.w.Item,{asChild:!0,className:"list-none",children:[(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",onClick:()=>setSearch(""),children:"Clear search"})," "]}),"or"," ",(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",onClick:()=>openSidePanel(types.H$.Max),children:"Ask Max!"})})]})}):(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 @sm/main-content:grid-cols-2 @md/main-content:grid-cols-3 gap-4 group/colorful-product-icons colorful-product-icons-true",children:filteredItemsGrid.map(_ref=>{let{category,types}=_ref;return(0,jsx_runtime.jsxs)("div",{className:"mb-8",children:[(0,jsx_runtime.jsx)("div",{className:"mb-4",children:(0,jsx_runtime.jsx)("h3",{className:"text-lg font-medium text-muted",children:search?(0,jsx_runtime.jsx)(SearchHighlight.r,{string:getCategoryDisplayName(category),substring:search}):getCategoryDisplayName(category)})}),(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-2",children:types.map((qt,index)=>{var _qt$icon;return(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,focusFirst:filteredItemsGrid.length>0&&0===index,children:(0,jsx_runtime.jsxs)(Link.r,{to:qt.href,className:(0,css_classes.cn)("w-full @sm/main-content:w-auto"),buttonProps:{size:"base"},children:[(0,jsx_runtime.jsx)("span",{className:"text-sm",children:null!==(_qt$icon=qt.icon)&&void 0!==_qt$icon?_qt$icon:qt.name[0]}),(0,jsx_runtime.jsx)("span",{className:"text-sm truncate text-primary",children:search?(0,jsx_runtime.jsx)(SearchHighlight.r,{string:qt.name,substring:search}):qt.name})]},qt.name)})})})]},category)})})})})]})}},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".tabs-trigger{border-bottom:2px solid transparent;color:var(--color-text-secondary)}.tabs-trigger:hover,.tabs-trigger[data-state=active]{color:var(--color-accent)}.tabs-trigger[data-state=active]{border-color:var(--color-accent)}",""]),module.exports=exports}}]);