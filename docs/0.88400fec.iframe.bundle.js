(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/ExportButton/exporterLogic.ts":function(Te,D,e){"use strict";e.d(D,"a",function(){return Pe}),e.d(D,"b",function(){return Ne});var Z=e("./node_modules/core-js/modules/es.object.keys.js"),ge=e.n(Z),ie=e("./node_modules/core-js/modules/es.symbol.js"),ye=e.n(ie),k=e("./node_modules/core-js/modules/es.array.filter.js"),ce=e.n(k),ee=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),z=e.n(ee),de=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ue=e.n(de),B=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),J=e.n(B),b=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),M=e.n(b),De=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),$=e.n(De),me=e("./node_modules/@babel/runtime/regenerator/index.js"),te=e.n(me),t=e("./node_modules/core-js/modules/es.array.concat.js"),N=e.n(t),Oe=e("./node_modules/core-js/modules/es.array.iterator.js"),G=e.n(Oe),W=e("./node_modules/core-js/modules/es.object.to-string.js"),he=e.n(W),ne=e("./node_modules/core-js/modules/es.string.iterator.js"),Ve=e.n(ne),re=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ve=e.n(re),S=e("./node_modules/core-js/modules/web.url.js"),Re=e.n(S),pe=e("./node_modules/core-js/modules/web.url-search-params.js"),j=e.n(pe),c=e("./node_modules/kea/lib/index.esm.js"),g=e("./frontend/src/lib/api.ts"),y=e("./frontend/src/lib/utils.tsx"),K=e("./node_modules/posthog-js/dist/es.js"),Y=e("./frontend/src/lib/components/lemonToast.tsx");function Le(_,E){var C=Object.keys(_);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(_);E&&(R=R.filter(function(se){return Object.getOwnPropertyDescriptor(_,se).enumerable})),C.push.apply(C,R)}return C}function oe(_){for(var E=1;E<arguments.length;E++){var C=arguments[E]!=null?arguments[E]:{};E%2?Le(Object(C),!0).forEach(function(R){M()(_,R,C[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(C)):Le(Object(C)).forEach(function(R){Object.defineProperty(_,R,Object.getOwnPropertyDescriptor(C,R))})}return _}var xe=1e3,fe=10,Pe;(function(_){_.PNG="image/png",_.CSV="text/csv",_.PDF="application/pdf"})(Pe||(Pe={}));function X(_){return Ie.apply(this,arguments)}function Ie(){return Ie=$()(te.a.mark(function _(E){var C,R,se,ae,F;return te.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return C=g.b.exports.determineExportUrl(E.id),d.next=3,g.b.getRaw(C);case 3:return R=d.sent,d.next=6,R.blob();case 6:se=d.sent,ae=window.URL.createObjectURL(se),F=document.createElement("a"),F.style.display="none",F.href=ae,F.download=E.filename,document.body.appendChild(F),F.click(),window.URL.revokeObjectURL(ae);case 15:case"end":return d.stop()}},_)})),Ie.apply(this,arguments)}var Ne=Object(c.kea)([Object(c.path)(["lib","components","ExportButton","ExporterLogic"]),Object(c.props)({}),Object(c.key)(function(_){var E=_.dashboardId,C=_.insightId;return"dash:".concat(E,"::insight:").concat(C)}),Object(c.actions)({exportItem:function(E,C,R,se){return{exportFormat:E,exportContext:C,exportParams:R,successCallback:se}},exportItemSuccess:!0,exportItemFailure:!0}),Object(c.reducers)({exportInProgress:[!1,{exportItem:function(){return!0},exportItemSuccess:function(){return!1},exportItemFailure:function(){return!1}}]}),Object(c.listeners)(function(_){var E=_.actions,C=_.props;return{exportItem:function(){var R=$()(te.a.mark(function ae(F){var We,d,n,o,s,v,i,f;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return We=F.exportFormat,d=F.exportContext,n=F.exportParams,o=F.successCallback,Y.d.info("Export started..."),s={export_format:We,dashboard:C.dashboardId,insight:C.insightId,total_time_ms:0},v=performance.now(),a.prev=4,a.next=7,g.b.exports.create(oe({export_format:We,dashboard:C.dashboardId,insight:C.insightId},d||{}),n);case 7:if(i=a.sent,i.id){a.next=10;break}throw new Error("Missing export_id from response");case 10:f=0;case 11:if(!(f<fe)){a.next=29;break}if(f++,!i.has_content){a.next=22;break}return E.exportItemSuccess(),Y.d.success("Export complete."),o==null||o(),a.next=19,X(i);case 19:return s.total_time_ms=performance.now()-v,K.a.capture("export succeeded",s),a.abrupt("return");case 22:return a.next=24,Object(y.w)(xe);case 24:return a.next=26,g.b.exports.get(i.id);case 26:i=a.sent,a.next=11;break;case 29:throw new Error("Content not loaded in time...");case 32:a.prev=32,a.t0=a.catch(4),E.exportItemFailure(),s.total_time_ms=performance.now()-v,K.a.capture("export failed",s),Y.d.error("Export failed: ".concat(JSON.stringify(a.t0)));case 38:case"end":return a.stop()}},ae,null,[[4,32]])}));function se(ae){return R.apply(this,arguments)}return se}()}})])},"./frontend/src/lib/components/RestrictedArea.tsx":function(Te,D,e){"use strict";e.d(D,"b",function(){return B}),e.d(D,"a",function(){return J});var Z=e("./node_modules/core-js/modules/es.array.concat.js"),ge=e.n(Z),ie=e("./node_modules/kea/lib/index.esm.js"),ye=e("./node_modules/react/index.js"),k=e.n(ye),ce=e("./frontend/src/scenes/organizationLogic.tsx"),ee=e("./frontend/src/lib/constants.tsx"),z=e("./frontend/src/lib/components/Tooltip.tsx"),de=e("./frontend/src/lib/utils/permissioning.ts"),ue=e("./frontend/src/scenes/teamLogic.tsx"),B;(function(b){b.Organization="organization",b.Project="project"})(B||(B={}));function J(b){var M=b.Component,De=b.minimumAccessLevel,$=b.scope,me=$===void 0?B.Organization:$,te=Object(ie.useValues)(ce.a),t=te.currentOrganization,N=Object(ie.useValues)(ue.a),Oe=N.currentTeam,G=Object(ye.useMemo)(function(){var W;if(me===B.Project){if(!Oe)return"Loading current project\u2026";W=Oe.effective_membership_level}else{if(!t)return"Loading current organization\u2026";W=t.membership_level}return W===null?"You don't have access to the current ".concat(me,"."):W<De?De===ee.m.Owner?"This area is restricted to the ".concat(me," owner."):"This area is restricted to ".concat(me," ").concat(de.b.get(De),"s and up. Your level is ").concat(de.b.get(W),"."):null},[t]);return G?k.a.createElement(z.a,{title:G,placement:"topLeft",delayMs:0},k.a.createElement("span",null,k.a.createElement(M,{isRestricted:!0,restrictionReason:G}))):k.a.createElement(M,{isRestricted:!1,restrictionReason:null})}try{J.displayName="RestrictedArea",J.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:J.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(b){}try{B.Organization.displayName="RestrictionScope.Organization",B.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:B.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(b){}try{B.Project.displayName="RestrictionScope.Project",B.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:B.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(b){}},"./frontend/src/scenes/actions/EventName.tsx":function(Te,D,e){"use strict";e.d(D,"a",function(){return ce}),e.d(D,"b",function(){return ee});var Z=e("./node_modules/react/index.js"),ge=e.n(Z),ie=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ye=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),k=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function ce(z){var de=z.value,ue=z.onChange;return ge.a.createElement(ye.d,{groupType:k.a.Events,onChange:ue,value:de,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(J){return ge.a.createElement(ie.a,{value:J,disablePopover:!0})},allowClear:!0})}function ee(z){var de=z.value,ue=z.onChange;return ge.a.createElement(ye.b,{groupType:k.a.Events,onChange:ue,value:de,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(J){return ge.a.createElement(ie.a,{value:J,disablePopover:!0})},allowClear:!0})}try{ce.displayName="EventName",ce.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:ce.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(z){}try{ee.displayName="LemonEventName",ee.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:ee.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(z){}},"./frontend/src/scenes/events/EventDetails.tsx":function(Te,D,e){"use strict";e.d(D,"a",function(){return pe});var Z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ge=e.n(Z),ie=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ye=e.n(ie),k=e("./node_modules/core-js/modules/es.object.keys.js"),ce=e("./node_modules/core-js/modules/es.symbol.js"),ee=e("./node_modules/core-js/modules/es.array.filter.js"),z=e("./node_modules/core-js/modules/es.object.to-string.js"),de=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ue=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),B=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),J=e("./node_modules/react/index.js"),b=e.n(J),M=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),De=e("./frontend/src/lib/components/PropertiesTable.tsx"),$=e("./frontend/src/scenes/events/EventElements.tsx"),me=e("./node_modules/antd/es/tabs/index.js"),te=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(te),N=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),Oe=e("./frontend/src/lib/utils.tsx"),G=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function W(j,c){var g=Object.keys(j);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(j);c&&(y=y.filter(function(K){return Object.getOwnPropertyDescriptor(j,K).enumerable})),g.push.apply(g,y)}return g}function he(j){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?W(Object(g),!0).forEach(function(y){ge()(j,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(g)):W(Object(g)).forEach(function(y){Object.defineProperty(j,y,Object.getOwnPropertyDescriptor(g,y))})}return j}function ne(j){var c=j.event,g=c.event,y=c.id,K=c.uuid,Y=c.distinct_id,Le=c.properties,oe=c.elements,xe=c.timestamp,fe=c.person,Pe=t()(c,G),X=he(he(he(he({},y?{id:y}:null),K?{uuid:K}:null),{},{timestamp:xe,event:g,distinct_id:Y,properties:Object(Oe.yb)(Le)},oe&&oe.length>0?{elements:oe}:null),Pe);return b.a.createElement(N.a,{language:N.b.JSON},JSON.stringify(X,null,4))}try{ne.displayName="EventJSON",ne.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:ne.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(j){}var Ve=e("./frontend/src/lib/dayjs.ts"),re=e("./frontend/src/lib/components/LemonButton/index.ts");function ve(j,c){var g=Object.keys(j);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(j);c&&(y=y.filter(function(K){return Object.getOwnPropertyDescriptor(j,K).enumerable})),g.push.apply(g,y)}return g}function S(j){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?ve(Object(g),!0).forEach(function(y){ge()(j,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(g)):ve(Object(g)).forEach(function(y){Object.defineProperty(j,y,Object.getOwnPropertyDescriptor(g,y))})}return j}var Re=me.a.TabPane;function pe(j){for(var c=j.event,g=Object(J.useState)(!1),y=ye()(g,2),K=y[0],Y=y[1],Le={},oe={},xe=0,fe=0,Pe=Object.keys(c.properties);fe<Pe.length;fe++){var X=Pe[fe];M.e.event[X]&&M.e.event[X].hide&&(xe+=1,K&&(oe[X]=c.properties[X])),(!M.e.event[X]||!M.e.event[X].hide)&&(Le[X]=c.properties[X])}return b.a.createElement(me.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},b.a.createElement(Re,{tab:"Properties",key:"properties"},b.a.createElement(De.a,{properties:S(S({$timestamp:Object(Ve.a)(c.timestamp).toISOString()},Le),oe),useDetectedPropertyType:!0}),xe>0&&b.a.createElement(re.a,{className:"mb-05",onClick:function(){return Y(!K)},size:"small"},K?"Hide":"Show"," ",Object(Oe.qb)(xe,"hidden property","hidden properties"))),b.a.createElement(Re,{tab:"JSON",key:"json"},b.a.createElement(ne,{event:c})),c.elements&&c.elements.length>0&&b.a.createElement(Re,{tab:"Elements",key:"elements"},b.a.createElement($.a,{event:c})))}try{pe.displayName="EventDetails",pe.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:pe.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(j){}},"./frontend/src/scenes/events/EventElements.tsx":function(Te,D,e){"use strict";e.d(D,"a",function(){return he});var Z=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ge=e.n(Z),ie=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ye=e.n(ie),k=e("./node_modules/core-js/modules/es.array.join.js"),ce=e.n(k),ee=e("./node_modules/core-js/modules/es.array.fill.js"),z=e.n(ee),de=e("./node_modules/core-js/modules/es.array.slice.js"),ue=e.n(de),B=e("./node_modules/core-js/modules/es.array.map.js"),J=e.n(B),b=e("./node_modules/core-js/modules/es.object.entries.js"),M=e.n(b),De=e("./node_modules/core-js/modules/es.array.concat.js"),$=e.n(De),me=e("./node_modules/core-js/modules/es.regexp.exec.js"),te=e.n(me),t=e("./node_modules/core-js/modules/es.string.replace.js"),N=e.n(t),Oe=e("./node_modules/react/index.js"),G=e.n(Oe);function W(ne){return Array(ne).fill("    ").join("")}function he(ne){var Ve=ne.event,re=ye()(Ve.elements||[]).reverse();return re=re.slice(Math.max(re.length-10,1)),G.a.createElement("div",null,re.map(function(ve,S){return G.a.createElement("pre",{className:"code",key:S,style:{margin:0,padding:0,borderRadius:0,backgroundColor:S===re.length-1?"var(--primary)":void 0}},W(S),"<",ve.tag_name,ve.attr_id&&' id="'.concat(ve.attr_id,'"'),Object.entries(ve.attributes).map(function(Re){var pe=ge()(Re,2),j=pe[0],c=pe[1];return G.a.createElement("span",{key:j}," ".concat(j.replace("attr__",""),'="').concat(c,'"'))}),">",ve.text,S===re.length-1&&G.a.createElement("span",null,"</",ve.tag_name,">"))}),ye()(re).reverse().slice(1).map(function(ve,S){return G.a.createElement("pre",{className:"code",key:S,style:{margin:0,padding:0,borderRadius:0}},W(re.length-S-2),"</",ve.tag_name,">")}))}try{he.displayName="EventElements",he.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:he.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(ne){}},"./frontend/src/scenes/events/EventsTable.tsx":function(Te,D,e){"use strict";e.d(D,"a",function(){return lt});var Z=e("./node_modules/core-js/modules/es.symbol.js"),ge=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ie=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ye=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),k=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ce=e.n(k),ee=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),z=e.n(ee),de=e("./node_modules/core-js/modules/es.array.splice.js"),ue=e("./node_modules/core-js/modules/es.array.filter.js"),B=e("./node_modules/core-js/modules/es.object.to-string.js"),J=e("./node_modules/core-js/modules/es.array.map.js"),b=e("./node_modules/core-js/modules/es.array.find.js"),M=e("./node_modules/core-js/modules/es.array.concat.js"),De=e("./node_modules/core-js/modules/es.array.join.js"),$=e("./node_modules/core-js/modules/es.object.keys.js"),me=e("./node_modules/core-js/modules/es.regexp.to-string.js"),te=e("./node_modules/react/index.js"),t=e.n(te),N=e("./node_modules/kea/lib/index.esm.js"),Oe=e("./frontend/src/scenes/events/EventDetails.tsx"),G=e("./frontend/src/lib/components/Link.tsx"),W=e("./node_modules/antd/es/button/index.js"),he=e("./node_modules/kea-router/lib/index.js"),ne=e("./node_modules/@babel/runtime/helpers/typeof.js"),Ve=e.n(ne),re=e("./node_modules/core-js/modules/es.regexp.exec.js"),ve=e("./node_modules/core-js/modules/es.string.replace.js");function S(r){var l=r.value;return t.a.createElement("span",{title:l},Ve()(l)==="object"?JSON.stringify(l):l&&l.toString().replace(/(^\w+:|^)\/\//,""))}try{S.displayName="Property",S.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:S.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(r){}var Re=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function pe(r,l){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(r);l&&(m=m.filter(function(L){return Object.getOwnPropertyDescriptor(r,L).enumerable})),u.push.apply(u,m)}return u}function j(r){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?pe(Object(u),!0).forEach(function(m){ce()(r,m,u[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):pe(Object(u)).forEach(function(m){Object.defineProperty(r,m,Object.getOwnPropertyDescriptor(u,m))})}return r}function c(r){var l=r.property,u=r.value,m=r.filters,L=r.onClick,q=r.className,V=Object(Re.c)(m.properties),we=V.find(function(_e){return _e.key===l&&_e.value===u&&!_e.operator})?V.filter(function(_e){return _e.key!==l||_e.value!==u||_e.operator}):[].concat(z()(V),[{key:l,value:u}]),Ze=Object(he.combineUrl)(window.location.pathname,j(j({},m),{},{properties:we}),{}),ze=Ze.url;return t.a.createElement(G.a,{to:ze,className:q,onClick:function(){L&&L(l,u)}},t.a.createElement(S,{value:u}))}try{c.displayName="FilterPropertyLink",c.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:c.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(r){}var g=e("./frontend/src/lib/utils.tsx"),y=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),K=e.n(y),Y=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),Le=e.n(Y),oe={};oe.insert="head",oe.singleton=!1;var xe=K()(Le.a,oe),fe=Le.a.locals||{},Pe=e("./frontend/src/scenes/events/eventsTableLogic.ts"),X=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Ie=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),Ne=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),_=e("./frontend/src/types.ts"),E=e("./frontend/src/scenes/actions/EventName.tsx"),C=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),R=e("./frontend/src/lib/components/Tooltip.tsx"),se=e("./node_modules/clsx/dist/clsx.m.js"),ae=Object(N.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(l){return{columnConfig:l}}},reducers:function(l){var u=l.props;return{selectedColumns:[u.startingColumns||"DEFAULT",{setSelectedColumns:function(L,q){var V=q.columnConfig;return V}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(r){return[r.selectedColumns]},function(r){return r==="DEFAULT"?7:r.length+2}]}}),F=e("./frontend/src/scenes/urls.ts"),We=e("./frontend/src/lib/components/LemonTable/index.ts"),d=e("./frontend/src/lib/components/icons.tsx"),n=e("./frontend/src/lib/components/LemonButton/index.ts"),o=e("./frontend/src/lib/components/LemonButton/More.tsx"),s=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),v=e("./frontend/src/scenes/teamLogic.tsx"),i=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function f(r){Object(te.useEffect)(function(){var l="hidden",u="visibilitychange";typeof document.msHidden!="undefined"?(l="msHidden",u="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(l="webkitHidden",u="webkitvisibilitychange");var m=function(){r(!document[l])};return document.addEventListener(u,m),function(){document.removeEventListener(u,m)}},[])}var p=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=e.n(p),Ae=e("./node_modules/core-js/modules/es.array.includes.js"),Ee=e("./node_modules/core-js/modules/es.string.includes.js"),Me=e("./node_modules/antd/es/row/index.js"),Fe=e("./node_modules/antd/es/space/index.js"),Be=e("./node_modules/antd/es/col/index.js"),Ke=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),be=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Je=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),A=e.n(Je),Xe={};Xe.insert="head",Xe.singleton=!1;var I=K()(A.a,Xe),Ct=A.a.locals||{},ot=e("./node_modules/antd/lib/modal/Modal.js"),_t=e.n(ot),st=e("./node_modules/react-virtualized/dist/es/List/index.js"),jt=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),Qe=e("./node_modules/core-js/modules/es.array.from.js"),rn=e("./node_modules/core-js/modules/es.string.iterator.js"),on=e("./node_modules/core-js/modules/es.array.iterator.js"),sn=e("./node_modules/core-js/modules/es.set.js"),an=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),St=Object(N.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[ae],actions:{selectColumn:function(l){return{column:l}},unselectColumn:function(l){return{column:l}},resetColumns:function(l){return{columns:l}},setColumns:function(l){return{columns:l}},toggleSaveAsDefault:!0,save:!0},reducers:function(l){var u=l.props;return{selectedColumns:[u.selectedColumns,{selectColumn:function(L,q){var V=q.column;return Array.from(new Set([].concat(z()(L),[V])))},unselectColumn:function(L,q){var V=q.column;return L.filter(function(we){return we!==V})},resetColumns:function(L,q){var V=q.columns;return V},setColumns:function(L,q){var V=q.columns;return V}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(L){return!L}}]}},listeners:function(l){var u=l.values,m=l.actions;return{save:function(){ae.actions.setSelectedColumns(u.selectedColumns),u.saveAsDefault&&(v.a.actions.updateCurrentTeam({live_events_columns:u.selectedColumns}),m.toggleSaveAsDefault())}}}}),Rt=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Tt=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),It=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),gt=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),Dt=e("./frontend/src/lib/components/RestrictedArea.tsx"),Bt=e("./frontend/src/lib/constants.tsx"),Kt=Object(gt.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(d.SortableDragIcon,null))});function at(r){var l=Object(N.useActions)(ae),u=l.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(n.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:u,icon:t.a.createElement(d.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Ut,{immutableColumns:r.immutableColumns,defaultColumns:r.defaultColumns}))}function Ut(r){var l=r.immutableColumns,u=r.defaultColumns,m=36,L=32,q=Object(N.useValues)(ae),V=q.selectedColumns,we=q.modalVisible,Ze=Object(N.useActions)(ae),ze=Ze.hideModal,_e=St({selectedColumns:V==="DEFAULT"?u:V}),Ue=Object(N.useActions)(_e),it=Ue.selectColumn,ct=Ue.unselectColumn,dt=Ue.resetColumns,ut=Ue.setColumns,ke=Ue.toggleSaveAsDefault,qe=Ue.save,et=Object(N.useValues)(_e),Se=et.selectedColumns;function yt(le){var Q=le.isRestricted;return t.a.createElement(It.a,{label:"Save as default for all project members",className:"save-as-default-button mt","data-attr":"events-table-save-columns-as-default-toggle",onChange:ke,defaultChecked:!1,disabled:Q})}var tt=function(Q){var w=Q.column,Ce=Q.disabled;return t.a.createElement("div",{className:Object(se.a)(["column-display-item",{selected:!Ce,disabled:Ce}]),style:{height:"".concat(L,"px")}},!Ce&&t.a.createElement(Kt,null),t.a.createElement(Ne.a,{value:w}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(R.a,{title:Ce?"Reserved":"Remove"},Ce?t.a.createElement(Ke.a,null):t.a.createElement(be.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return ct(w)}}))))},Ot=Object(gt.b)(tt),mt=function(Q){var w=Q.index,Ce=Q.style,H=Q.key,je=l==null?void 0:l.includes(Se[w]);return t.a.createElement("div",{style:Ce,key:H},je&&t.a.createElement(tt,{column:Se[w],disabled:Boolean(je)}),!je&&t.a.createElement(Ot,{column:Se[w],index:w,collection:"selected-columns"}))},vt=Object(gt.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(jt.a,null,function(le){var Q=le.height,w=le.width;return t.a.createElement(st.b,{height:Q,rowCount:Se.length,rowRenderer:mt,rowHeight:m,width:w})}))}),pt=function(Q){var w=Q.oldIndex,Ce=Q.newIndex,H=z()(Se),je=H.splice(w,1),ht=a()(je,1),ft=ht[0];H.splice(Ce,0,ft),ut(H)};return t.a.createElement(_t.a,{id:"column-configurator-modal",centered:!0,visible:we,title:"Configure columns",onOk:qe,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:ze,footer:t.a.createElement(Me.a,null,t.a.createElement(Fe.b,{style:{flexGrow:1},align:"start"},t.a.createElement(W.a,{className:"text-blue",onClick:function(){return dt(u)}},"Reset to defaults")),t.a.createElement(Fe.b,null,t.a.createElement(W.a,{className:"text-blue",type:"text",onClick:ze},"Close"),t.a.createElement(W.a,{type:"primary",onClick:qe},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(Me.a,{gutter:16,className:"lists"},t.a.createElement(Be.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",Se.length,") - Drag to reorder"),t.a.createElement(vt,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:pt,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(Be.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(jt.a,null,function(le){var Q=le.height,w=le.width;return t.a.createElement(Rt.a,{height:Q,width:w,taxonomicGroupTypes:[Tt.a.EventProperties],value:void 0,onChange:function(H,je){return je&&it(String(je))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:ce()({},Tt.a.EventProperties,Se)})})))),t.a.createElement(Dt.a,{Component:yt,minimumAccessLevel:Bt.m.Owner,scope:Dt.b.Project})))}try{at.displayName="LemonTableConfig",at.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:at.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(r){}var Nt=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Wt=e("./frontend/src/scenes/events/EventBufferNotice.tsx");function At(r,l){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(r);l&&(m=m.filter(function(L){return Object.getOwnPropertyDescriptor(r,L).enumerable})),u.push.apply(u,m)}return u}function Lt(r){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?At(Object(u),!0).forEach(function(m){ce()(r,m,u[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):At(Object(u)).forEach(function(m){Object.defineProperty(r,m,Object.getOwnPropertyDescriptor(u,m))})}return r}function lt(r){var l,u=r.pageKey,m=r.fixedFilters,L=r.fixedColumns,q=r.sceneUrl,V=r.fetchMonths,we=V===void 0?12:V,Ze=r.startingColumns,ze=r.showCustomizeColumns,_e=ze===void 0?!0:ze,Ue=r.showExport,it=Ue===void 0?!0:Ue,ct=r.showAutoload,dt=ct===void 0?!0:ct,ut=r.showEventFilter,ke=ut===void 0?!0:ut,qe=r.showPropertyFilter,et=qe===void 0?!0:qe,Se=r.showRowExpanders,yt=Se===void 0?!0:Se,tt=r.showActionsButton,Ot=tt===void 0?!0:tt,mt=r.showPersonColumn,vt=mt===void 0?!0:mt,pt=r.linkPropertiesToFilters,le=pt===void 0?!0:pt,Q=Object(N.useValues)(v.a),w=Q.currentTeam,Ce=Object(Pe.a)({fixedFilters:m,key:u,sceneUrl:q||F.a.events(),fetchMonths:we}),H=Object(N.useValues)(Ce),je=H.properties,ht=H.eventsFormatted,ft=H.isLoading,Ft=H.hasNext,xt=H.isLoadingNext,Et=H.eventFilter,Vt=H.automaticLoadEnabled,wt=H.exportUrl,zt=H.highlightEvents,$t=H.months,Mt=Object(N.useValues)(ae({startingColumns:(l=w&&w.live_events_columns)!==null&&l!==void 0?l:Ze})),nt=Mt.tableWidth,Ge=Mt.selectedColumns,$e=Object(N.useActions)(Ce),Yt=$e.fetchNextEvents,Ht=$e.prependNewEvents,Jt=$e.setEventFilter,Gt=$e.toggleAutomaticLoad,Xt=$e.startDownload,Qt=$e.setPollingActive,Zt=$e.setProperties,kt=!(m!=null&&m.person_id),qt=Object(N.useActions)(Nt.f),en=qt.reportEventsTablePollingReactedToPageVisibility;f(function(x){Qt(x),en(x)});var Pt=function(O,h){var U=O.date_break,P=O.new_events;return{children:U||(P?t.a.createElement(n.a,{icon:t.a.createElement(d.IconSync,null),style:{borderRadius:0},onClick:function(){return Ht()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:h+1,style:P?{padding:0}:void 0}}},tn={title:"Person",key:"person",render:function(O,h){var U,P,T=h.event;return T?kt&&(U=T.person)!==null&&U!==void 0&&(P=U.distinct_ids)!==null&&P!==void 0&&P.length?t.a.createElement(G.a,{to:F.a.person(T.person.distinct_ids[0])},t.a.createElement(X.a,{noLink:!0,withIcon:!0,person:T.person})):t.a.createElement(X.a,{withIcon:!0,person:T.person}):{props:{colSpan:0}}}},bt=Object(te.useMemo)(function(){var x=[{title:"Event",key:"event",width:"16rem",render:function(h,U){if(!U.event)return Pt(U,nt);var P=U.event;return t.a.createElement(Ne.a,{value:Object(g.f)(P)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(h,U){var P=U.event;if(!P)return{props:{colSpan:0}};var T=P.properties.$current_url?"$current_url":"$screen_name";return le?t.a.createElement(c,{className:"ph-no-capture",property:T,value:P.properties[T],filters:{properties:je}}):t.a.createElement(S,{value:P.properties[T]})}},{title:t.a.createElement(R.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(h,U){var P=U.event;return P?le?t.a.createElement(c,{property:"$lib",value:P.properties.$lib,filters:{properties:je}}):t.a.createElement(S,{value:P.properties.$lib}):{props:{colSpan:0}}}}];return vt&&x.splice(1,0,tn),x},[nt]),nn=Object(te.useMemo)(function(){var x=[];if(Ge==="DEFAULT")x=z()(bt);else{var O=vt?Ge:Ge.filter(function(h){return h!=="person"});x=O.map(function(h,U){var P=bt.find(function(T){return T.key===h});return P?Lt(Lt({},P),{},{render:function(Ye,He){var rt=He.event;return rt?P.render?P.render(Ye,He,U):{props:{colSpan:0}}:U===0?Pt(He,nt):{props:{colSpan:0}}}}):{title:Ne.e.event[h]?Ne.e.event[h].label:h,key:h,render:function(Ye,He){var rt=He.event;return rt?le?t.a.createElement(c,{className:"ph-no-capture ",property:h,value:rt.properties[h],filters:{properties:je}}):t.a.createElement(S,{value:rt.properties[h]}):U===0?Pt(He,nt):{props:{colSpan:0}}}}})}return x.push({title:"Time",key:"time",render:function(U,P){var T=P.event;return T?t.a.createElement(Ie.b,{time:T.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),Ot&&x.push({key:"actions",width:0,render:function(U,P){var T=P.event;if(!T)return{props:{colSpan:0}};var Ye;return T.event==="$pageview"?Ye={insight:_.z.TRENDS,interval:"day",display:_.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:T.properties.$current_url,type:"event"}]}]}:T.event!=="$autocapture"&&(Ye={insight:_.z.TRENDS,interval:"day",display:_.j.ActionsLineGraph,actions:[],events:[{id:T.event,name:T.event,type:"events",order:0,properties:[]}]}),t.a.createElement(o.a,{overlay:t.a.createElement(t.a.Fragment,null,w&&t.a.createElement(n.a,{type:"stealth",onClick:function(){return Object(i.a)(w.id,T,0,w.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),Ye&&t.a.createElement(n.a,{type:"stealth",to:F.a.insightNew(Ye),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),L?x.concat(L):x},[Ge,nt]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(ke||et)&&t.a.createElement("div",{className:"flex pt pb space-x border-top"},ke&&t.a.createElement(E.b,{value:Et,onChange:function(O){Jt(O||"")}}),et&&t.a.createElement(C.a,{propertyFilters:je,onChange:Zt,pageKey:u,style:{marginBottom:0,marginTop:0},eventNames:Et?[Et]:[],useLemonButton:!0})),dt||_e||it?t.a.createElement("div",{className:Object(se.a)("space-between-items pt pb",(ke||et)&&"border-top")},dt&&t.a.createElement(s.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:Vt,onChange:Gt}),t.a.createElement("div",{className:"flex space-x-05"},_e&&t.a.createElement(at,{immutableColumns:["event","person"],defaultColumns:bt.map(function(x){return x.key||""})}),it&&wt&&t.a.createElement(R.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(n.a,{type:"secondary",icon:t.a.createElement(d.IconExport,{style:{color:"var(--primary)"}}),onClick:Xt},"Export")))):null,t.a.createElement(Wt.a,{extended:!0}),t.a.createElement(We.a,{dataSource:ht,loading:ft,columns:nn,key:Ge==="DEFAULT"?"default":Ge.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:ft?void 0:je.some(function(x){return Object.keys(x).length})||Et?"No events matching filters found in the last ".concat($t," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(G.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(O){var h;return O.event?O.event.id+"-"+O.event.event:((h=O.date_break)===null||h===void 0?void 0:h.toString())||""},rowClassName:function(O){return Object(se.a)({"event-row":O.event,highlighted:O.event&&zt[O.event.id],"event-row-is-exception":O.event&&O.event.event==="$exception","event-row-date-separator":O.date_break,"event-row-new":O.new_events})},expandable:yt?{expandedRowRender:function(O){var h=O.event;return h&&t.a.createElement(Oe.a,{event:h})},rowExpandable:function(O){var h=O.event,U=O.date_break,P=O.new_events;return U||P?-1:!!h}}:void 0}),t.a.createElement(W.a,{type:"primary",onClick:Yt,loading:xt,style:{display:Ft||xt?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{lt.displayName="EventsTable",lt.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:lt.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(r){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(Te,D,e){"use strict";e.d(D,"a",function(){return We});var Z=e("./node_modules/core-js/modules/es.object.keys.js"),ge=e.n(Z),ie=e("./node_modules/core-js/modules/es.symbol.js"),ye=e.n(ie),k=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ce=e.n(k),ee=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),z=e.n(ee),de=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ue=e.n(de),B=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),J=e.n(B),b=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),M=e.n(b),De=e("./node_modules/@babel/runtime/regenerator/index.js"),$=e.n(De),me=e("./node_modules/core-js/modules/es.array.map.js"),te=e.n(me),t=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e.n(t),Oe=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),G=e.n(Oe),W=e("./node_modules/core-js/modules/es.array.splice.js"),he=e.n(W),ne=e("./node_modules/core-js/modules/es.array.join.js"),Ve=e.n(ne),re=e("./node_modules/core-js/modules/es.array.filter.js"),ve=e.n(re),S=e("./node_modules/core-js/modules/es.array.concat.js"),Re=e.n(S),pe=e("./node_modules/core-js/modules/es.array.iterator.js"),j=e.n(pe),c=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),g=e.n(c),y=e("./node_modules/kea/lib/index.esm.js"),K=e("./frontend/src/lib/utils.tsx"),Y=e("./node_modules/kea-router/lib/index.js"),Le=e.n(Y),oe=e("./frontend/src/lib/api.ts"),xe=e("./frontend/src/scenes/teamLogic.tsx"),fe=e("./frontend/src/lib/dayjs.ts"),Pe=e("./frontend/src/lib/components/lemonToast.tsx"),X=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Ie=e("./frontend/src/lib/components/ExportButton/exporterLogic.ts"),Ne=e("./frontend/src/lib/constants.tsx");function _(d,n){var o=Object.keys(d);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(d);n&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable})),o.push.apply(o,s)}return o}function E(d){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?_(Object(o),!0).forEach(function(s){J()(d,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach(function(s){Object.defineProperty(d,s,Object.getOwnPropertyDescriptor(o,s))})}return d}var C=5,R=365,se=5e3,ae=function(n,o){var s=[];return s=n.map(function(v){return{event:v}}),s.forEach(function(v,i){var f=s[i-1];i>0&&v.event&&f.event&&!Object(fe.a)(v.event.timestamp).isSame(f.event.timestamp,"day")&&s.splice(i,0,{date_break:Object(fe.a)(v.event.timestamp).format("LL")})}),o.length>0&&s.splice(0,0,{new_events:!0}),s},F=function(n){return Object(fe.b)().subtract(n,"day").toISOString()},We=Object(y.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(o){return!!o}).join("-")},connect:{values:[xe.a,["currentTeamId"],X.a,["featureFlags"]],actions:[Ie.b,["exportItem"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:function(n){var o,s,v=n.props;return{pollingIsActive:[!0,{setPollingActive:function(f,p){var a=p.pollingActive;return a},pollEventsSuccess:function(f,p){var a=p.events;return a&&a.length?!1:f},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(f,p){var a=p.properties;return Object(K.s)(a)}}],eventFilter:[(o=(s=v.fixedFilters)===null||s===void 0?void 0:s.event_filter)!==null&&o!==void 0?o:"",{setEventFilter:function(f,p){var a=p.event;return a}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(f,p){var a=p.events,Ae=p.isNext;return Ae?[].concat(M()(f),M()(a)):a},prependEvents:function(f,p){var a=p.events;return[].concat(M()(a),M()(f))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(f,p){var a=p.hasNext;return a}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(f,p){var a=p.selectedEvent;return a}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(f,p){var a=p.events;return a||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(f,p){var a=p.events;return a.reduce(function(Ae,Ee){return Ae[Ee.id]=!0,Ae},{})}}],pollTimeout:[0,{setPollTimeout:function(f,p){return p.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(f,p){var a=p.automaticLoadEnabled;return a}}]}},selectors:function(n){var o=n.selectors,s=n.props;return{eventsFormatted:[function(){return[o.events,o.newEvents]},function(v,i){return ae(v,i)}],exportParams:[function(){return[o.eventFilter,o.orderBy,o.properties,o.minimumExportDate]},function(v,i,f,p){var a;return E(E(E({},s.fixedFilters||{}),{},{properties:[].concat(M()(f),M()(((a=s.fixedFilters)===null||a===void 0?void 0:a.properties)||[]))},v?{event:v}:{}),{},{orderBy:[i],after:p})}],exportUrl:[function(){return[o.currentTeamId,o.exportParams]},function(v,i){return"/api/projects/".concat(v,"/events.csv?").concat(Object(K.Bb)(i))}],months:[function(){return[function(v,i){return i.fetchMonths}]},function(v){return v||12}],minimumExportDate:[function(){return[o.months]},function(){return Object(fe.b)().subtract(1,"months").toISOString()}],minimumQueryDate:[function(){return[o.months]},function(v){return Object(fe.b)().subtract(v,"months").toISOString()}],pollAfter:[function(){return[o.events]},function(v){return(v==null?void 0:v.length)>0&&v[0].timestamp?v[0].timestamp:F(0)}]}},actionToUrl:function(n){var o=n.values;return{setProperties:function(){return[Y.router.values.location.pathname,E(E({},Y.router.values.searchParams),{},{properties:o.properties.length===0?void 0:o.properties}),Y.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[Y.router.values.location.pathname,E(E({},Y.router.values.searchParams),{},{eventFilter:o.eventFilter}),Y.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var o=n.actions,s=n.values,v=n.props;return J()({},v.sceneUrl,function(i,f){o.setProperties(f.properties||s.properties||{}),f.eventFilter&&o.setEventFilter(f.eventFilter)})},events:function(n){var o=n.values;return{beforeUnmount:function(){return clearTimeout(o.pollTimeout||void 0)}}},listeners:function(n){var o=n.actions,s=n.values,v=n.props;return{startDownload:function(){s.featureFlags[Ne.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS]?o.exportItem(Ie.a.CSV,{},s.exportParams):(Pe.d.success("The export is starting. It should finish soon"),window.location.href=s.exportUrl)},setProperties:function(){return o.fetchEvents()},setEventFilter:function(){return o.fetchEvents()},fetchNextEvents:function(){var i=ue()($.a.mark(function p(){var a;return $.a.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:a=s.events,a.length===0?o.fetchEvents():o.fetchEvents({before:a[a.length-1].timestamp});case 2:case"end":return Ee.stop()}},p)}));function f(){return i.apply(this,arguments)}return f}(),fetchEvents:function(){var i=ue()($.a.mark(function p(a,Ae){var Ee,Me,Fe,Be,Ke,be,Je,A;return $.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(Ke=function(){return Ke=ue()($.a.mark(function ot(_t){var st;return $.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return st=E(E(E(E({after:_t},v.fixedFilters||{}),{},{properties:Fe},Me||{}),s.eventFilter?{event:s.eventFilter}:{}),{},{orderBy:[s.orderBy]}),Qe.abrupt("return",oe.b.get("api/projects/".concat(s.currentTeamId,"/events/?").concat(Object(K.Bb)(st))));case 2:case"end":return Qe.stop()}},ot)})),Ke.apply(this,arguments)},Be=function(ot){return Ke.apply(this,arguments)},Me=a.nextParams,clearTimeout(s.pollTimeout),!(s.events.length>0)){I.next=9;break}return I.next=7,Ae(300);case 7:I.next=11;break;case 9:return I.next=11,Ae(1);case 11:return Fe=[].concat(M()(s.properties),M()(((Ee=v.fixedFilters)===null||Ee===void 0?void 0:Ee.properties)||[])),be=null,Je=!1,I.prev=14,I.next=17,Be(F(C));case 17:if(be=I.sent,be.results.length!==0){I.next=23;break}return I.next=21,Be(F(R));case 21:be=I.sent,Je=!0;case 23:I.next=29;break;case 25:return I.prev=25,I.t0=I.catch(14),o.fetchOrPollFailure(I.t0),I.abrupt("return");case 29:Ae(),o.fetchEventsSuccess({events:be.results,hasNext:!!be.next||!Je,isNext:!!Me}),A=window.setTimeout(o.pollEvents,se),o.setPollTimeout(A);case 33:case"end":return I.stop()}},p,null,[[14,25]])}));function f(p,a){return i.apply(this,arguments)}return f}(),pollEvents:function(){var i=ue()($.a.mark(function p(a,Ae){var Ee,Me,Fe,Be,Ke,be;return $.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(Me=function(){var I=window.setTimeout(o.pollEvents,se);o.setPollTimeout(I)},s.orderBy==="-timestamp"){A.next=3;break}return A.abrupt("return");case 3:if(v.sceneUrl===Y.router.values.location.pathname){A.next=5;break}return A.abrupt("return");case 5:if(s.pollingIsActive){A.next=8;break}return Me(),A.abrupt("return");case 8:return Fe=[].concat(M()(s.properties),M()(((Ee=v.fixedFilters)===null||Ee===void 0?void 0:Ee.properties)||[])),Be=E(E(E({},v.fixedFilters||{}),{},{properties:Fe},s.eventFilter?{event:s.eventFilter}:{}),{},{orderBy:[s.orderBy],after:s.pollAfter}),Ke=Object(K.Bb)(Be),be=null,A.prev=12,A.next=15,oe.b.get("api/projects/".concat(s.currentTeamId,"/events/?").concat(Ke));case 15:be=A.sent,A.next=21;break;case 18:return A.prev=18,A.t0=A.catch(12),A.abrupt("return");case 21:Ae(),s.automaticLoadEnabled?o.prependEvents(be.results):o.pollEventsSuccess(be.results),Me();case 24:case"end":return A.stop()}},p,null,[[12,18]])}));function f(p,a){return i.apply(this,arguments)}return f}(),prependNewEvents:function(){s.newEvents.length&&o.prependEvents(s.newEvents)},fetchOrPollFailure:function(f){var p=f.error;Pe.d.error("There was a problem fetching your events: ".concat(p.statusText))},toggleAutomaticLoad:function(f){var p=f.automaticLoadEnabled;p&&o.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(Te,D,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");D=Z(!1),D.push([Te.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--text-muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--text-default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal .save-as-default-button{border:1px solid var(--dark-grey);border-radius:.25rem}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--text-default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),Te.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(Te,D,e){var Z=e("./node_modules/css-loader/dist/runtime/api.js");D=Z(!1),D.push([Te.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--depr-lighten-danger-40)}.events td{max-width:20rem}",""]),Te.exports=D}}]);
