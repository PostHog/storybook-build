(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[95685],{"../../frontend/src/lib/components/IframedToolbarBrowser/iframedToolbarBrowserLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>UserIntentVerb,R:()=>iframedToolbarBrowserLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.264.1_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/IframedToolbarBrowser/utils.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx");let UserIntentVerb={heatmaps:"view the heatmap","add-action":"add actions","edit-action":"edit the action","add-experiment":"add web experiment","edit-experiment":"edit the experiment"},iframedToolbarBrowserLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["lib","components","iframedToolbarBrowser","iframedToolbarBrowserLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({automaticallyAuthorizeBrowserUrl:!1}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[(0,lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_2__.zl)({...lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_2__.P1,type:lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_2__.uw.TOOLBAR_URLS}),["urlsKeyed","checkUrlIsAuthorized"],scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.teamLogic,["currentTeam"]],actions:[(0,lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_2__.zl)({...lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_2__.P1,type:lib_components_AuthorizedUrlList_authorizedUrlListLogic__WEBPACK_IMPORTED_MODULE_2__.uw.TOOLBAR_URLS}),["addUrl"],scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.teamLogic,["updateCurrentTeamSuccess"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setBrowserUrl:url=>({url}),setProposedBrowserUrl:url=>({url}),onIframeLoad:!0,sendToolbarMessage:(type,payload)=>({type,payload}),setIframeWidth:width=>({width}),setIframeBanner:banner=>({banner}),startTrackingLoading:!0,stopTrackingLoading:!0,enableElementSelector:!0,disableElementSelector:!0,setNewActionName:name=>({name}),toolbarMessageReceived:(type,payload)=>({type,payload}),setCurrentPath:path=>({path}),setInitialPath:path=>({path})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)(_ref=>{let{props}=_ref;return{commonFilters:[{date_from:"-7d"},{setCommonFilters:(_,_ref2)=>{let{filters}=_ref2;return filters}}],heatmapColorPalette:["default",{setHeatmapColorPalette:(_,_ref3)=>{let{Palette}=_ref3;return Palette}}],heatmapFilters:[lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__._f,{patchHeatmapFilters:(state,_ref4)=>{let{filters}=_ref4;return{...state,...filters}}}],heatmapFixedPositionMode:["fixed",{setHeatmapFixedPositionMode:(_,_ref5)=>{let{mode}=_ref5;return mode}}],iframeWidth:[null,{setIframeWidth:(_,_ref6)=>{let{width}=_ref6;return width}}],browserUrl:[null,{persist:"heatmaps"==props.userIntent},{setBrowserUrl:(_,_ref7)=>{let{url}=_ref7;return url}}],currentPath:["",{setCurrentPath:(_,_ref8)=>{let{path}=_ref8;return path}}],initialPath:["",{setInitialPath:(_,_ref9)=>{let{path}=_ref9;return path}}],loading:[!1,{setBrowserUrl:(state,_ref10)=>{let{url}=_ref10;return!!url?.trim().length||state},setIframeBanner:(state,_ref11)=>{let{banner}=_ref11;return banner?.level!="error"&&state},startTrackingLoading:()=>!0,stopTrackingLoading:()=>!1}],iframeBanner:[null,{setIframeBanner:(_,_ref12)=>{let{banner}=_ref12;return banner}}],proposedBrowserUrl:[null,{setProposedBrowserUrl:(_,_ref13)=>{let{url}=_ref13;return url}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({isBrowserUrlAuthorized:[s=>[s.browserUrl,s.checkUrlIsAuthorized],(browserUrl,checkUrlIsAuthorized)=>!!browserUrl&&checkUrlIsAuthorized(browserUrl)],isProposedBrowserUrlAuthorized:[s=>[s.proposedBrowserUrl,s.checkUrlIsAuthorized],(proposedBrowserUrl,checkUrlIsAuthorized)=>!!proposedBrowserUrl&&checkUrlIsAuthorized(proposedBrowserUrl)],viewportRange:[s=>[s.heatmapFilters,s.iframeWidth],(heatmapFilters,iframeWidth)=>iframeWidth?(0,lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.f6)(heatmapFilters,iframeWidth):{min:0,max:1800}],currentFullUrl:[s=>[s.browserUrl,s.currentPath],(browserUrl,currentPath)=>browserUrl?browserUrl+"/"+currentPath:null]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref14=>{let{actions,cache,props,values}=_ref14;return{sendToolbarMessage:_ref15=>{let{type,payload}=_ref15;props.iframeRef?.current?.contentWindow?.postMessage({type,payload},"*")},setProposedBrowserUrl:_ref16=>{let{url}=_ref16;url&&(props.automaticallyAuthorizeBrowserUrl&&!values.isProposedBrowserUrlAuthorized?actions.addUrl(url):actions.setBrowserUrl(url))},enableElementSelector:()=>{actions.sendToolbarMessage(lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_ELEMENT_SELECTOR,{enabled:!0})},disableElementSelector:()=>{actions.sendToolbarMessage(lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_ELEMENT_SELECTOR,{enabled:!1})},setNewActionName:_ref17=>{let{name}=_ref17;actions.sendToolbarMessage(lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_NEW_ACTION_NAME,{name})},onIframeLoad:()=>{let init=()=>{actions.sendToolbarMessage(lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_APP_INIT)};window.addEventListener("message",e=>{let type=e?.data?.type,payload=e?.data?.payload;if(actions.toolbarMessageReceived(type,payload),type&&type.startsWith("ph-")){if(!values.checkUrlIsAuthorized(e.origin)){console.warn("ignoring message from iframe with origin not in authorized toolbar urls",e.origin,e.data);return}switch(type){case lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_TOOLBAR_INIT:return init();case lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_TOOLBAR_READY:if("heatmaps"===props.userIntent)return posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("in-app heatmap frame loaded",{inapp_heatmap_page_url_visited:values.browserUrl,inapp_heatmap_filters:values.heatmapFilters,inapp_heatmap_color_palette:values.heatmapColorPalette,inapp_heatmap_fixed_position_mode:values.heatmapFixedPositionMode}),actions.startTrackingLoading();return;case lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_NEW_ACTION_CREATED:actions.setNewActionName(null),actions.disableElementSelector();return;case lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_3__.TH.PH_TOOLBAR_NAVIGATED:return actions.setCurrentPath(payload.path.replace(/^\/+/,""));default:console.warn(`[PostHog Heatmaps] Received unknown child window message: ${type}`)}}},!1),init()},setBrowserUrl:_ref18=>{let{url}=_ref18;url?.trim().length&&actions.startTrackingLoading()},startTrackingLoading:()=>{actions.setIframeBanner(null),clearTimeout(cache.errorTimeout),cache.errorTimeout=setTimeout(()=>{actions.setIframeBanner({level:"error",message:"The heatmap failed to load (or is very slow)."})},7500),clearTimeout(cache.warnTimeout),cache.warnTimeout=setTimeout(()=>{actions.setIframeBanner({level:"warning",message:"Still waiting for the toolbar to load."})},3e3)},stopTrackingLoading:()=>{actions.setIframeBanner(null),clearTimeout(cache.errorTimeout),clearTimeout(cache.warnTimeout)},setIframeBanner:_ref19=>{let{banner}=_ref19;posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("in-app iFrame banner set",{level:banner?.level,message:banner?.message})},updateCurrentTeamSuccess:()=>{props.automaticallyAuthorizeBrowserUrl&&values.proposedBrowserUrl&&values.currentTeam?.app_urls?.includes(values.proposedBrowserUrl)&&(actions.setBrowserUrl(values.proposedBrowserUrl),actions.setProposedBrowserUrl(null))}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref20=>{let{actions,values}=_ref20;values.browserUrl?.trim().length&&actions.startTrackingLoading()}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.beforeUnmount)(_ref21=>{let{actions,props}=_ref21;props.clearBrowserUrlOnUnmount&&actions.setBrowserUrl("")})])},"../../frontend/src/lib/components/IframedToolbarBrowser/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{PJ:()=>heatmapDateOptions,TH:()=>PostHogAppToolbarEvent,_f:()=>DEFAULT_HEATMAP_FILTERS,f6:()=>calculateViewportRange});var lib_components_DateFilter_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/components/DateFilter/types.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/utils.tsx");let PostHogAppToolbarEvent=function(PostHogAppToolbarEvent){return PostHogAppToolbarEvent.PH_TOOLBAR_INIT="ph-toolbar-init",PostHogAppToolbarEvent.PH_TOOLBAR_READY="ph-toolbar-ready",PostHogAppToolbarEvent.PH_APP_INIT="ph-app-init",PostHogAppToolbarEvent.PH_ELEMENT_SELECTOR="ph-element-selector",PostHogAppToolbarEvent.PH_NEW_ACTION_NAME="ph-new-action-name",PostHogAppToolbarEvent.PH_NEW_ACTION_CREATED="ph-new-action-created",PostHogAppToolbarEvent.PH_TOOLBAR_NAVIGATED="ph-toolbar-navigated",PostHogAppToolbarEvent}({}),DEFAULT_HEATMAP_FILTERS={enabled:!0,type:"click",viewportAccuracy:.9,aggregation:"total_count"},calculateViewportRange=(heatmapFilters,windowWidth)=>{var _heatmapFilters$viewp;let extraPixels=windowWidth-windowWidth*(null!==(_heatmapFilters$viewp=heatmapFilters.viewportAccuracy)&&void 0!==_heatmapFilters$viewp?_heatmapFilters$viewp:.2);return{min:Math.round(Math.max(0,windowWidth-extraPixels)),max:Math.round(windowWidth+extraPixels)}},dateItemDenyList=["Last 180 days","This month","Previous month","Year to date","All time"],heatmapDateOptions=lib_utils__WEBPACK_IMPORTED_MODULE_1__.bE.filter(dm=>dm.key!==lib_components_DateFilter_types__WEBPACK_IMPORTED_MODULE_0__.Q2&&!dateItemDenyList.includes(dm.key))},"../../frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>DashboardTemplateChooser_DashboardTemplateChooser});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),DashboardTemplateChooser=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/dashboard/DashboardTemplateChooser.scss"),DashboardTemplateChooser_default=__webpack_require__.n(DashboardTemplateChooser),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(DashboardTemplateChooser_default(),options),DashboardTemplateChooser_default().locals;var clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),colors=__webpack_require__("../../frontend/src/lib/colors.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function FallbackCoverImage(_ref){let{src,alt,index,className="",imageClassName=""}=_ref,[hasError,setHasError]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:hasError||!src?(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("w-full h-full",className),style:{background:(0,colors._r)(index)}}):(0,jsx_runtime.jsx)("img",{className:(0,clsx_m.default)("object-cover w-full",imageClassName),src:src,alt:alt,onError:()=>{setHasError(!0)}})})}var Spinner=__webpack_require__("../../frontend/src/lib/lemon-ui/Spinner/index.ts"),dashboardTemplatesLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),newDashboardLogic=__webpack_require__("../../frontend/src/scenes/dashboard/newDashboardLogic.ts"),types=__webpack_require__("../../frontend/src/types.ts");let blank_dashboard_hog=__webpack_require__.p+"images/blank-dashboard-hog.be6aa4a293f4321162c6fa6f77094861.png";function DashboardTemplateChooser_DashboardTemplateChooser(_ref){let{scope="default",onItemClick,redirectAfterCreation=!0,availabilityContexts}=_ref,templatesLogic=(0,dashboardTemplatesLogic.R)({scope}),{allTemplates,allTemplatesLoading}=(0,index_esm.useValues)(templatesLogic),{isLoading,newDashboardModalVisible}=(0,index_esm.useValues)(newDashboardLogic.Z),{setActiveDashboardTemplate,createDashboardFromTemplate,addDashboard,setIsLoading,showVariableSelectModal}=(0,index_esm.useActions)(newDashboardLogic.Z);return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("div",{className:"DashboardTemplateChooser",children:[!availabilityContexts||availabilityContexts.includes(types.FB.GENERAL)?(0,jsx_runtime.jsx)(TemplateItem,{template:{template_name:"Blank dashboard",dashboard_description:"Create a blank dashboard",image_url:blank_dashboard_hog},onClick:()=>{!isLoading&&(setIsLoading(!0),addDashboard({name:"New Dashboard",show:!0,_create_in_folder:"Unfiled/Dashboards"}))},index:0,"data-attr":"create-dashboard-blank"}):null,allTemplatesLoading?(0,jsx_runtime.jsx)(Spinner.$,{className:"text-6xl"}):allTemplates.filter(template=>!availabilityContexts||availabilityContexts.some(context=>template.availability_contexts?.includes(context))).map((template,index)=>(0,jsx_runtime.jsx)(TemplateItem,{template:template,onClick:()=>{!isLoading&&(setIsLoading(!0),0===(template.variables||[]).length?(null===template.variables&&(template.variables=[]),createDashboardFromTemplate(template,template.variables||[],redirectAfterCreation)):newDashboardModalVisible?setActiveDashboardTemplate(template):showVariableSelectModal(template),onItemClick?.(template))},index:index+1,"data-attr":"create-dashboard-from-template"},index))]})})}function TemplateItem(_ref2){var _template$dashboard_d;let{template,onClick,index,"data-attr":dataAttr}=_ref2,[isHovering,setIsHovering]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"cursor-pointer border rounded TemplateItem flex flex-col transition-all",onClick:onClick,onMouseEnter:()=>setIsHovering(!0),onMouseLeave:()=>setIsHovering(!1),"data-attr":dataAttr,children:[(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("transition-all w-full overflow-hidden",isHovering?"h-4 min-h-4":"h-30 min-h-30"),children:(0,jsx_runtime.jsx)(FallbackCoverImage,{src:template?.image_url,alt:"cover photo",index:index,imageClassName:"h-30"})}),(0,jsx_runtime.jsx)("h5",{className:"px-2 mb-1",children:template?.template_name}),(0,jsx_runtime.jsx)("div",{className:"flex gap-x-1 px-2 mb-1",children:template.tags?.map((tag,index)=>jsx_runtime.jsx(src.oe,{type:"option",children:tag},index))}),(0,jsx_runtime.jsx)("div",{className:"px-2 py-1 overflow-y-auto grow",children:(0,jsx_runtime.jsx)("p",{className:(0,clsx_m.default)("text-secondary text-xs",isHovering?"":"line-clamp-2"),children:null!==(_template$dashboard_d=template?.dashboard_description)&&void 0!==_template$dashboard_d?_template$dashboard_d:" "})})]})}},"../../frontend/src/scenes/dashboard/dashboardTemplateVariablesLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>dashboardTemplateVariablesLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_IframedToolbarBrowser_iframedToolbarBrowserLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/components/IframedToolbarBrowser/iframedToolbarBrowserLogic.ts"),lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/IframedToolbarBrowser/utils.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/utils.tsx"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/types.ts");let FALLBACK_EVENT={id:"$pageview",math:_types__WEBPACK_IMPORTED_MODULE_4__.vN.UniqueUsers,type:_types__WEBPACK_IMPORTED_MODULE_4__.DC.EVENTS},dashboardTemplateVariablesLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","dashboard","DashboardTemplateVariablesLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({variables:[]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({actions:[lib_components_IframedToolbarBrowser_iframedToolbarBrowserLogic__WEBPACK_IMPORTED_MODULE_1__.R,["toolbarMessageReceived","disableElementSelector"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setVariables:variables=>({variables}),setVariable:(variableName,filterGroup)=>({variable_name:variableName,filterGroup}),setVariableFromAction:(variableName,action)=>({variableName,action}),setVariableForPageview:(variableName,url)=>({variableName,url}),setVariableForScreenview:variableName=>({variableName}),setActiveVariableIndex:index=>({index}),incrementActiveVariableIndex:!0,possiblyIncrementActiveVariableIndex:!0,resetVariable:variableId=>({variableId}),goToNextUntouchedActiveVariableIndex:!0,setIsCurrentlySelectingElement:isSelecting=>({isSelecting}),setActiveVariableCustomEventName:customEventName=>({customEventName}),maybeResetActiveVariableCustomEventName:!0}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({variables:[[],{setVariables:(_,_ref)=>{let{variables}=_ref;return variables.map(v=>v.default&&!(0,lib_utils__WEBPACK_IMPORTED_MODULE_3__.Qr)(v.default)?v:{...v,default:FALLBACK_EVENT})},setVariable:(state,_ref2)=>{let{variable_name:variableName,filterGroup}=_ref2,typeWithContents=Object.keys(filterGroup).filter(group=>(filterGroup[group]||[])?.length>0)?.[0];return typeWithContents?state.map(v=>v.name===variableName&&filterGroup?.[typeWithContents]?.length&&filterGroup?.[typeWithContents]?.[0]?{...v,default:filterGroup[typeWithContents]?.[0]||{},touched:!0}:{...v}):state},resetVariable:(state,_ref3)=>{let{variableId}=_ref3;return state.map(v=>v.id===variableId?{...v,default:FALLBACK_EVENT,touched:!1}:{...v})}}],activeVariableIndex:[0,{setActiveVariableIndex:(_,_ref4)=>{let{index}=_ref4;return index},incrementActiveVariableIndex:state=>state+1}],activeVariableCustomEventName:[null,{setActiveVariableCustomEventName:(_,_ref5)=>{let{customEventName}=_ref5;return customEventName}}],isCurrentlySelectingElement:[!1,{setIsCurrentlySelectingElement:(_,_ref6)=>{let{isSelecting}=_ref6;return isSelecting}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)(()=>({activeVariable:[s=>[s.variables,s.activeVariableIndex],(variables,activeVariableIndex)=>variables[activeVariableIndex]],allVariablesAreTouched:[s=>[s.variables],variables=>variables.every(v=>v.touched)],hasTouchedAnyVariable:[s=>[s.variables],variables=>variables.some(v=>v.touched)]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref7=>{let{actions,props,values}=_ref7;return{possiblyIncrementActiveVariableIndex:()=>{props.variables.length>0&&values.activeVariableIndex<props.variables.length-1&&actions.incrementActiveVariableIndex()},goToNextUntouchedActiveVariableIndex:()=>{let nextIndex=values.variables.findIndex((v,i)=>!v.touched&&i>values.activeVariableIndex);if(-1!==nextIndex){actions.setActiveVariableIndex(nextIndex);return}-1==nextIndex&&-1==(nextIndex=values.variables.findIndex(v=>!v.touched))&&(nextIndex=values.activeVariableIndex),actions.setActiveVariableIndex(nextIndex)},setVariableFromAction:_ref8=>{let{variableName,action}=_ref8,originalVariableName=variableName.replace(/\s-\s\d+/g,""),step={id:action.id.toString(),math:_types__WEBPACK_IMPORTED_MODULE_4__.vN.UniqueUsers,name:action.name,custom_name:originalVariableName,order:0,type:_types__WEBPACK_IMPORTED_MODULE_4__.DC.ACTIONS,selector:action.steps?.[0]?.selector,href:action.steps?.[0]?.href,url:action.steps?.[0]?.url};actions.setVariable(originalVariableName,{actions:[step]}),actions.setIsCurrentlySelectingElement(!1)},setVariableForPageview:_ref9=>{let{variableName,url}=_ref9,step={id:"$pageview",math:_types__WEBPACK_IMPORTED_MODULE_4__.vN.UniqueUsers,type:_types__WEBPACK_IMPORTED_MODULE_4__.DC.EVENTS,order:0,name:"$pageview",custom_name:variableName,properties:[{key:"$current_url",value:url,operator:"icontains",type:"event"}]};actions.setVariable(variableName,{events:[step]}),actions.setIsCurrentlySelectingElement(!1)},setVariableForScreenview:_ref10=>{let{variableName}=_ref10,step={id:"$screenview",math:_types__WEBPACK_IMPORTED_MODULE_4__.vN.UniqueUsers,type:_types__WEBPACK_IMPORTED_MODULE_4__.DC.EVENTS,order:0,name:"$screenview",custom_name:variableName};actions.setVariable(variableName,{events:[step]}),actions.setIsCurrentlySelectingElement(!1)},toolbarMessageReceived:_ref11=>{let{type,payload}=_ref11;type===lib_components_IframedToolbarBrowser_utils__WEBPACK_IMPORTED_MODULE_2__.TH.PH_NEW_ACTION_CREATED&&(actions.setVariableFromAction(payload.action.name,payload.action),actions.disableElementSelector())},maybeResetActiveVariableCustomEventName:()=>{values.activeVariable?.touched&&values.activeVariable?.default?.custom_event?values.activeVariable?.default?.custom_event&&actions.setActiveVariableCustomEventName(values.activeVariable.default.id):actions.setActiveVariableCustomEventName(null)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.propsChanged)((_ref12,oldProps)=>{let{actions,props}=_ref12;props.variables!==oldProps.variables&&actions.setVariables(props.variables)})])},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/dashboard/DashboardTemplateChooser.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".DashboardTemplateChooser{display:grid;gap:.5em;grid-template-columns:repeat(3,1fr);max-width:780px}.DashboardTemplateChooser .TemplateItem{height:210px;width:240px}",""]),module.exports=exports}}]);