"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[51373],{"../../products/tasks/frontend/TaskDetailScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TaskDetailScene:()=>TaskDetailScene,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),NotFound=__webpack_require__("../../frontend/src/lib/components/NotFound/index.tsx"),useFeatureFlag=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.33.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),Link=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),constants=__webpack_require__("../../products/tasks/frontend/constants.ts"),lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts");let taskDetailLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","tasks","taskDetailLogic"]),(0,index_esm.props)({}),(0,index_esm.actions)({updateTask:(taskId,updates)=>({taskId,updates}),runTask:taskId=>({taskId})}),(0,lib.loaders)(_ref=>{let{props}=_ref;return{task:{loadTask:async()=>await api.ZP.tasks.get(props.taskId),updateTask:async _ref2=>{let{taskId,updates}=_ref2;return await api.ZP.tasks.update(taskId,updates)},runTask:async _ref3=>{let{taskId}=_ref3;return await api.ZP.tasks.run(taskId)}}}}),(0,index_esm.reducers)({task:{updateTask:(state,_ref4)=>{let{updates}=_ref4;return state?{...state,...updates}:null}}}),(0,index_esm.selectors)({taskId:[()=>[(_,props)=>props.taskId],taskId=>taskId]}),(0,index_esm.afterMount)(_ref5=>{let{actions}=_ref5;actions.loadTask()}),(0,index_esm.propsChanged)((_ref6,oldProps)=>{let{actions,props}=_ref6;props.taskId!==oldProps.taskId&&actions.loadTask()})]);var tasksLogic=__webpack_require__("../../products/tasks/frontend/tasksLogic.ts"),RepositorySelector=__webpack_require__("../../products/tasks/frontend/components/RepositorySelector.tsx"),LemonProgress=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonProgress/index.tsx"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),types=__webpack_require__("../../products/tasks/frontend/types.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function TaskProgressDisplay(_ref){let{task,className=""}=_ref,[progress,setProgress]=(0,react.useState)(null),[loading,setLoading]=(0,react.useState)(!0),[error,setError]=(0,react.useState)(null),[autoRefresh,setAutoRefresh]=(0,react.useState)(!0),fetchProgress=(0,react.useCallback)(async()=>{try{setError(null);let response=await api.ZP.get(`api/projects/@current/tasks/${task.id}/progress/`);setProgress(response),response.has_progress&&response.status&&[types.m.STARTED,types.m.IN_PROGRESS].includes(response.status)?setAutoRefresh(!0):setAutoRefresh(!1)}catch(err){console.error("Progress fetch error:",err);let errorMessage=err instanceof Error?err.message:"Failed to fetch progress";setError(`API Error: ${errorMessage}`),setAutoRefresh(!1)}finally{setLoading(!1)}},[task]);return((0,react.useEffect)(()=>{fetchProgress()},[task.id,fetchProgress]),(0,react.useEffect)(()=>{if(!autoRefresh)return;let interval=setInterval(fetchProgress,3e3);return()=>clearInterval(interval)},[autoRefresh,fetchProgress]),loading)?(0,jsx_runtime.jsxs)("div",{className:`${className} flex items-center gap-2 p-3 bg-bg-light rounded border`,children:[(0,jsx_runtime.jsx)(src.$j,{className:"w-4 h-4"}),(0,jsx_runtime.jsx)("span",{className:"text-sm text-muted",children:"Loading execution progress..."})]}):error?(0,jsx_runtime.jsx)("div",{className:`${className} p-3 bg-bg-light rounded border`,children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("span",{className:"text-sm text-danger",children:["Error: ",error]}),(0,jsx_runtime.jsx)(src.Jp,{icon:(0,jsx_runtime.jsx)(icons.tr,{}),size:"xsmall",onClick:fetchProgress,children:"Retry"})]})}):progress?.has_progress?(0,jsx_runtime.jsxs)("div",{className:`${className} space-y-3`,children:[(task.github_branch||task.github_pr_url)&&(0,jsx_runtime.jsxs)("div",{className:"p-3 bg-bg-light rounded border",children:[(0,jsx_runtime.jsx)("h4",{className:"text-sm font-medium mb-2",children:"GitHub Integration"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[task.github_branch&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"Branch:"}),(0,jsx_runtime.jsx)("code",{className:"px-2 py-1 bg-bg-dark rounded text-xs",children:task.github_branch})]}),task.github_pr_url&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"Pull Request:"}),(0,jsx_runtime.jsx)(src.Jp,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconExternal,{}),size:"xsmall",type:"primary",to:task.github_pr_url,targetBlank:!0,children:"View PR"})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"p-3 bg-bg-light rounded border",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,jsx_runtime.jsx)("h4",{className:"text-sm font-medium",children:"Claude Code Execution"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsxs)("span",{className:(0,css_classes.cn)("text-sm",(status=>{switch(status){case types.m.STARTED:case types.m.IN_PROGRESS:return"text-primary";case types.m.COMPLETED:return"text-success";case types.m.FAILED:return"text-danger";default:return"text-muted"}})(progress.status)),children:[(status=>{switch(status){case types.m.STARTED:case types.m.IN_PROGRESS:return"⚡";case types.m.COMPLETED:return"✅";case types.m.FAILED:return"❌";default:return"⏸"}})(progress.status)," ",progress.status]}),autoRefresh&&(0,jsx_runtime.jsx)(src.$j,{className:"w-3 h-3"})]})]}),progress.total_steps&&progress.total_steps>0&&(0,jsx_runtime.jsxs)("div",{className:"mb-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between text-xs text-muted mb-1",children:[(0,jsx_runtime.jsx)("span",{children:"Progress"}),(0,jsx_runtime.jsxs)("span",{children:[progress.completed_steps,"/",progress.total_steps," steps"]})]}),progress.progress_percentage&&(0,jsx_runtime.jsx)(LemonProgress.b,{percent:progress.progress_percentage,strokeColor:progress.status===types.m.FAILED?"var(--danger)":void 0})]}),progress.current_step&&(0,jsx_runtime.jsxs)("div",{className:"mb-3",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted",children:"Current step:"}),(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium",children:progress.current_step})]}),progress.error_message&&(0,jsx_runtime.jsxs)("div",{className:"mb-3 p-2 bg-danger-highlight rounded",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs text-danger font-medium",children:"Error:"}),(0,jsx_runtime.jsx)("div",{className:"text-sm text-danger",children:progress.error_message})]}),progress.output_log&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted",children:"Live Output:"}),(0,jsx_runtime.jsx)(src.Jp,{icon:(0,jsx_runtime.jsx)(icons.tr,{}),size:"xsmall",onClick:fetchProgress,loading:loading,children:"Refresh"})]}),(0,jsx_runtime.jsx)("div",{className:"bg-bg-dark rounded p-3 max-h-64 overflow-y-auto",children:(0,jsx_runtime.jsx)("pre",{className:"text-xs text-default font-mono whitespace-pre-wrap",children:progress.output_log.split("\n").filter(line=>line.trim()).map((line,idx)=>(0,jsx_runtime.jsx)("div",{className:"mb-1",children:line},idx))})})]}),(0,jsx_runtime.jsx)("div",{className:"mt-3 pt-3 border-t border-border",children:(0,jsx_runtime.jsxs)("div",{className:"flex justify-between text-xs text-muted",children:[(0,jsx_runtime.jsxs)("span",{children:["Started: ",progress.created_at?new Date(progress.created_at).toLocaleString():"Unknown"]}),progress.completed_at&&(0,jsx_runtime.jsxs)("span",{children:["Completed: ",new Date(progress.completed_at).toLocaleString()]})]})})]})]}):(0,jsx_runtime.jsx)("div",{className:`${className} p-3 bg-bg-light rounded border`,children:(0,jsx_runtime.jsx)("span",{className:"text-sm text-muted",children:"No Claude Code execution found for this task"})})}function TaskDetailPage(_ref){let{task}=_ref,{updateTask,runTask}=(0,index_esm.useActions)(taskDetailLogic),{taskLoading}=(0,index_esm.useValues)(taskDetailLogic),{assignTaskToWorkflow}=(0,index_esm.useActions)(tasksLogic.A),{allWorkflows}=(0,index_esm.useValues)(tasksLogic.A),[isEditingRepository,setIsEditingRepository]=(0,react.useState)(!1),[repositoryConfig,setRepositoryConfig]=(0,react.useState)({integrationId:task?.github_integration||void 0,organization:task?.repository_config?.organization||void 0,repository:task?.repository_config?.repository||void 0}),[savingRepository,setSavingRepository]=(0,react.useState)(!1),[selectedWorkflowId,setSelectedWorkflowId]=(0,react.useState)(""),isInBacklog=!task.workflow||!task.current_stage,currentStage=task.workflow&&task.current_stage?allWorkflows.flatMap(w=>w.stages||[]).find(s=>s.id===task.current_stage):null,stageKey=currentStage?.key||"backlog",formatDate=dateString=>new Date(dateString).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),handleSaveRepository=async()=>{if(repositoryConfig.integrationId&&repositoryConfig.organization&&repositoryConfig.repository){setSavingRepository(!0);try{let updateData={github_integration:repositoryConfig.integrationId,repository_config:{organization:repositoryConfig.organization,repository:repositoryConfig.repository}};updateTask(task.id,updateData),setIsEditingRepository(!1)}catch(error){console.error("Failed to update repository:",error)}finally{setSavingRepository(!1)}}};return(0,jsx_runtime.jsxs)("div",{className:"TaskDetailPage",children:[(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:task.title,resourceType:{type:"task"}}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 px-6 mb-4",children:[(0,jsx_runtime.jsxs)(Link.r,{to:"/tasks",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconArrowLeft,{})," Back to Tasks"]}),(0,jsx_runtime.jsx)("span",{className:"mx-2",children:"·"}),(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",children:stageKey}),(0,jsx_runtime.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${constants.zt[task.origin_product]}`,children:constants.Vn[task.origin_product]})]}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium text-default mb-2",children:"Description"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted leading-relaxed",children:task.description})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium text-default",children:"Repository Configuration"}),!isEditingRepository&&(0,jsx_runtime.jsx)(src.Jp,{size:"small",type:"secondary",onClick:()=>setIsEditingRepository(!0),children:"Edit"})]}),isEditingRepository?(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(RepositorySelector.G,{value:repositoryConfig,onChange:setRepositoryConfig}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(src.Jp,{type:"primary",size:"small",onClick:handleSaveRepository,loading:savingRepository,disabled:!repositoryConfig.integrationId||!repositoryConfig.organization||!repositoryConfig.repository,children:"Save"}),(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",size:"small",onClick:()=>{setRepositoryConfig({integrationId:task?.github_integration||void 0,organization:task?.repository_config?.organization||void 0,repository:task?.repository_config?.repository||void 0}),setIsEditingRepository(!1)},children:"Cancel"})]})]}):(0,jsx_runtime.jsx)("div",{className:"bg-bg-light p-3 rounded border",children:task.repository_config?.organization&&task.repository_config?.repository?(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs font-medium text-muted",children:"Repository:"}),(0,jsx_runtime.jsxs)("span",{className:"text-sm font-mono text-primary",children:[task.repository_config.organization,"/",task.repository_config.repository]})]}):(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted italic",children:"No repository configured - click Edit to add one"})})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-default",children:"Created:"}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:formatDate(task.created_at)})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-default",children:"Last Updated:"}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:formatDate(task.updated_at)})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-default",children:"Position:"}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:task.position})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[task.workflow&&(0,jsx_runtime.jsx)("div",{className:"pt-4 border-t border-border",children:(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:()=>runTask(task.id),loading:taskLoading,fullWidth:!0,children:"Run Task"})}),isInBacklog&&allWorkflows.length>0&&(0,jsx_runtime.jsx)("div",{className:"pt-4 border-t border-border",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[(0,jsx_runtime.jsx)(src.Yv,{value:selectedWorkflowId,onChange:value=>setSelectedWorkflowId(value),options:[{value:"",label:"Select workflow..."},...allWorkflows.map(workflow=>({value:workflow.id,label:workflow.name}))],placeholder:"Select workflow",size:"small",className:"min-w-32"}),(0,jsx_runtime.jsx)(src.Jp,{size:"xsmall",type:"primary",onClick:e=>{e.stopPropagation(),selectedWorkflowId&&assignTaskToWorkflow(task.id,selectedWorkflowId)},disabled:!selectedWorkflowId,children:"Assign"})]})})]})]}),(0,jsx_runtime.jsx)("div",{className:"border-l pl-6 h-full",children:(0,jsx_runtime.jsxs)("div",{className:"h-full",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium text-default mb-4",children:"Agent Output"}),(0,jsx_runtime.jsx)("div",{className:"h-[calc(100vh-300px)] overflow-hidden",children:(0,jsx_runtime.jsx)(TaskProgressDisplay,{task:task})})]})})]})]})}let scene={component:TaskDetailScene,logic:taskDetailLogic,paramsToProps:_ref=>{let{params:{taskId}}=_ref;return{taskId:taskId}}};function TaskDetailScene(){let{task,taskLoading}=(0,index_esm.useValues)(taskDetailLogic);return(0,useFeatureFlag.y)("TASKS")?taskLoading?(0,jsx_runtime.jsx)("div",{children:"Loading..."}):task?(0,jsx_runtime.jsx)(TaskDetailPage,{task:task}):(0,jsx_runtime.jsx)(NotFound.T,{object:"Task"}):(0,jsx_runtime.jsx)(NotFound.T,{object:"Tasks",caption:"This feature is not enabled for your project."})}},"../../products/tasks/frontend/components/RepositorySelector.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>RepositorySelector});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.33.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),integrationsLogic=__webpack_require__("../../frontend/src/lib/integrations/integrationsLogic.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts");let repositorySelectorLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","tasks","frontend","components","repositorySelectorLogic"]),(0,index_esm.connect)(()=>({actions:[integrationsLogic.a,["loadIntegrations","loadGitHubRepositories"]],values:[integrationsLogic.a,["integrations","getGitHubRepositories"]]})),(0,index_esm.actions)({setAvailableRepos:repos=>({repos}),setOnChangeCallback:callback=>({callback}),setCurrentConfig:config=>({config}),tryAutoSelectFirstIntegration:!0}),(0,index_esm.reducers)({availableRepos:[[],{setAvailableRepos:(_,_ref)=>{let{repos}=_ref;return repos}}],onChangeCallback:[null,{setOnChangeCallback:(_,_ref2)=>{let{callback}=_ref2;return callback}}],currentConfig:[{},{setCurrentConfig:(_,_ref3)=>{let{config}=_ref3;return config}}]}),(0,index_esm.selectors)({githubIntegrations:[s=>[s.integrations],integrations=>integrations?.filter(integration=>"github"===integration.kind)||[]]}),(0,index_esm.afterMount)(_ref4=>{let{actions}=_ref4;actions.loadIntegrations()}),(0,index_esm.listeners)(_ref5=>{let{actions,values}=_ref5;return{[integrationsLogic.a.actionTypes.loadIntegrationsSuccess]:()=>{values.githubIntegrations.length>0&&values.githubIntegrations.forEach(integration=>{actions.loadGitHubRepositories(integration.id)})},[integrationsLogic.a.actionTypes.loadGitHubRepositoriesSuccess]:()=>{if(values.githubIntegrations.length>0){let repoData=[];for(let integration of values.githubIntegrations){let repos=values.getGitHubRepositories(integration.id);repoData.push({integration_id:integration.id,organization:integration.config?.account?.name||"GitHub",repositories:repos||[]})}actions.setAvailableRepos(repoData),actions.tryAutoSelectFirstIntegration()}},tryAutoSelectFirstIntegration:()=>{let config=values.currentConfig,onChange=values.onChangeCallback;if(onChange&&!config.integrationId&&values.githubIntegrations.length>0&&values.availableRepos.length>0){let firstIntegration=values.githubIntegrations[0],firstRepoData=values.availableRepos.find(r=>r.integration_id===firstIntegration.id);onChange({...config,integrationId:firstIntegration.id,organization:firstRepoData?.organization||firstIntegration.config?.account?.name||"GitHub",repository:firstRepoData?.repositories[0]||""})}}}})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function RepositorySelector(_ref){let{value,onChange}=_ref,{githubRepositoriesLoading}=(0,index_esm.useValues)(integrationsLogic.a),{availableRepos,githubIntegrations}=(0,index_esm.useValues)(repositorySelectorLogic),{setOnChangeCallback,setCurrentConfig}=(0,index_esm.useActions)(repositorySelectorLogic);(0,react.useEffect)(()=>{setOnChangeCallback(onChange),setCurrentConfig(value)},[onChange,value,setOnChangeCallback,setCurrentConfig]);let selectedRepoData=availableRepos.find(r=>r.integration_id===value.integrationId);return 0===githubIntegrations.length?(0,jsx_runtime.jsx)(src.Mi,{className:"p-6 text-center",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconGear,{className:"mx-auto text-4xl text-muted"}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"font-medium",children:"No GitHub Integration"}),(0,jsx_runtime.jsx)("p",{className:"text-muted text-sm",children:"Connect a GitHub integration to enable repository selection."})]}),(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:()=>window.open(urls.j.currentProject(urls.j.settings("environment-integrations")),"_blank"),children:"Configure GitHub Integration"})]})}):(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-sm font-medium mb-2",children:"GitHub Integration"}),(0,jsx_runtime.jsx)(src.Yv,{value:value.integrationId,onChange:integrationId=>{let integration=githubIntegrations.find(i=>i.id===integrationId),repoData=availableRepos.find(r=>r.integration_id===integrationId);onChange({...value,integrationId,organization:repoData?.organization||integration?.config?.account?.name||"GitHub",repository:repoData?.repositories[0]||""})},options:githubIntegrations.map(integration=>({value:integration.id,label:`${integration.display_name} (${integration.config?.account?.name||"GitHub"})`})),placeholder:"Select GitHub integration..."})]}),selectedRepoData&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Repository"}),(0,jsx_runtime.jsx)(src.Yv,{value:value.repository,onChange:repository=>onChange({...value,repository,organization:selectedRepoData.organization}),options:selectedRepoData.repositories.map(repo=>({value:repo,label:`${selectedRepoData.organization}/${repo}`})),placeholder:"Select repository..."})]}),githubRepositoriesLoading&&0===availableRepos.length&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 text-muted",children:[(0,jsx_runtime.jsx)(src.$j,{})," Loading repositories..."]})]})}},"../../products/tasks/frontend/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Vn:()=>ORIGIN_PRODUCT_LABELS,zt:()=>ORIGIN_PRODUCT_COLORS});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../products/tasks/frontend/types.ts");let ORIGIN_PRODUCT_LABELS={[_types__WEBPACK_IMPORTED_MODULE_0__.A.ERROR_TRACKING]:"Error Tracking",[_types__WEBPACK_IMPORTED_MODULE_0__.A.EVAL_CLUSTERS]:"Eval Clusters",[_types__WEBPACK_IMPORTED_MODULE_0__.A.USER_CREATED]:"User Created",[_types__WEBPACK_IMPORTED_MODULE_0__.A.SUPPORT_QUEUE]:"Support Queue",[_types__WEBPACK_IMPORTED_MODULE_0__.A.SESSION_SUMMARIES]:"Session Summaries"},ORIGIN_PRODUCT_COLORS={[_types__WEBPACK_IMPORTED_MODULE_0__.A.ERROR_TRACKING]:"bg-red-100 text-red-800",[_types__WEBPACK_IMPORTED_MODULE_0__.A.EVAL_CLUSTERS]:"bg-sky-100 text-sky-800",[_types__WEBPACK_IMPORTED_MODULE_0__.A.USER_CREATED]:"bg-emerald-100 text-emerald-800",[_types__WEBPACK_IMPORTED_MODULE_0__.A.SUPPORT_QUEUE]:"bg-orange-100 text-orange-800",[_types__WEBPACK_IMPORTED_MODULE_0__.A.SESSION_SUMMARIES]:"bg-purple-100 text-purple-800"};Object.fromEntries([{id:"code_generation",name:"Code Generation Agent",agent_type:"code_generation",description:"Automated code generation and GitHub integration",config:{},is_active:!0},{id:"triage",name:"Triage Agent",agent_type:"triage",description:"Automatically triages and categorizes tasks based on content",config:{},is_active:!0},{id:"review",name:"Review Agent",agent_type:"review",description:"Reviews code changes and provides automated feedback",config:{},is_active:!0},{id:"testing",name:"Testing Agent",agent_type:"testing",description:"Runs tests and validates implementation",config:{},is_active:!0}].map(agent=>[agent.id,agent]))}}]);