(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{4354:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return normalizeColumnTitle}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),lib_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1129),lib_utils_responsiveUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(475);function normalizeColumnTitle(title){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{style:{whiteSpace:"nowrap"}},title)}var useIsTableScrolling=function useIsTableScrolling(scrollBreakpoint){var width=Object(lib_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_1__.a)().width,tableScrollBreakpoint=Object(lib_utils_responsiveUtils__WEBPACK_IMPORTED_MODULE_2__.b)(scrollBreakpoint),isTableScrolling=!!width&&width<=tableScrollBreakpoint;return{isTableScrolling:isTableScrolling,tableScrollBreakpoint:tableScrollBreakpoint,tableScrollX:isTableScrolling?"max-content":"".concat(tableScrollBreakpoint,"px")}};try{normalizeColumnTitle.displayName="normalizeColumnTitle",normalizeColumnTitle.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:normalizeColumnTitle.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(__react_docgen_typescript_loader_error){}try{useIsTableScrolling.displayName="useIsTableScrolling",useIsTableScrolling.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:useIsTableScrolling.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(__react_docgen_typescript_loader_error){}},4719:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"FeatureFlags",(function(){return FeatureFlags}));__webpack_require__(91),__webpack_require__(398),__webpack_require__(64),__webpack_require__(246);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),featureFlagsLogic=__webpack_require__(1179),input=__webpack_require__(550),Link=__webpack_require__(62),utils=__webpack_require__(10),PlusOutlined=__webpack_require__(1841),PageHeader=__webpack_require__(340),LinkButton=__webpack_require__(386),Table_utils=__webpack_require__(4354),urls=__webpack_require__(16);__webpack_require__(166),__webpack_require__(342),__webpack_require__(82),__webpack_require__(293),__webpack_require__(167);var teamLogic=__webpack_require__(28),LemonButton=__webpack_require__(94),LemonRow=__webpack_require__(193),LemonSwitch=__webpack_require__(865),LemonTable=__webpack_require__(331),More=__webpack_require__(1856),columnUtils=__webpack_require__(1227),PropertyFilterButton=(__webpack_require__(34),__webpack_require__(861)),PropertyFiltersDisplay_PropertyFiltersDisplay=function PropertyFiltersDisplay(_ref){var filters=_ref.filters,style=_ref.style,greyBadges=_ref.greyBadges;return react_default.a.createElement("div",{className:"property-filters mb",style:style},filters&&filters.map((function(item){return react_default.a.createElement(PropertyFilterButton.b,{key:item.key,item:item,greyBadges:greyBadges})})))},components_PropertyFiltersDisplay=PropertyFiltersDisplay_PropertyFiltersDisplay;try{PropertyFiltersDisplay_PropertyFiltersDisplay.displayName="PropertyFiltersDisplay",PropertyFiltersDisplay_PropertyFiltersDisplay.__docgenInfo={description:"",displayName:"PropertyFiltersDisplay",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"AnyPropertyFilter[]"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},greyBadges:{defaultValue:null,description:"",name:"greyBadges",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx#PropertyFiltersDisplay"]={docgenInfo:PropertyFiltersDisplay_PropertyFiltersDisplay.__docgenInfo,name:"PropertyFiltersDisplay",path:"frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx#PropertyFiltersDisplay"})}catch(__react_docgen_typescript_loader_error){}var scene={component:FeatureFlags,logic:featureFlagsLogic.a};function FeatureFlags(){var currentTeamId=Object(index_esm.useValues)(teamLogic.a).currentTeamId,_useValues2=Object(index_esm.useValues)(featureFlagsLogic.a),featureFlagsLoading=_useValues2.featureFlagsLoading,searchedFeatureFlags=_useValues2.searchedFeatureFlags,searchTerm=_useValues2.searchTerm,_useActions=Object(index_esm.useActions)(featureFlagsLogic.a),updateFeatureFlag=_useActions.updateFeatureFlag,loadFeatureFlags=_useActions.loadFeatureFlags,setSearchTerm=_useActions.setSearchTerm,columns=[{title:Object(Table_utils.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:function sorter(a,b){return(a.key||"").localeCompare(b.key||"")},render:function Render(_,featureFlag){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Link.a,{to:featureFlag.id?urls.a.featureFlag(featureFlag.id):void 0},react_default.a.createElement("h4",{className:"row-name"},function stringWithWBR(text){var splitAt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,addWBRAfter=[",",".","/","\\"],naturalSplit=[" ","-"],returnArray=[],final="",sinceSplit=0,i=0;return""===text?react_default.a.createElement("i",null,"(empty string)"):(text.split("").forEach((function(letter){addWBRAfter.indexOf(letter)>=0||sinceSplit>=splitAt?(sinceSplit=0,final+=letter,returnArray.push(react_default.a.createElement("span",{key:i++},final)),returnArray.push(react_default.a.createElement("wbr",{key:i++})),final=""):naturalSplit.indexOf(letter)>=0?(sinceSplit=0,final+=letter):(sinceSplit+=1,final+=letter)})),final&&returnArray.push(react_default.a.createElement("span",{key:i++},final)),react_default.a.createElement("span",null,returnArray))}(featureFlag.key,17))),featureFlag.name&&react_default.a.createElement("span",{className:"row-description"},featureFlag.name))}},Object(columnUtils.b)(),Object(columnUtils.a)(),{title:"Rollout",width:200,render:function Render(_,featureFlag){return function groupFilters(groups){if(0===groups.length||!groups.some((function(group){return 0!==group.rollout_percentage})))return"No users";if(groups.some((function(group){var _group$properties;return!(null===(_group$properties=group.properties)||void 0===_group$properties?void 0:_group$properties.length)&&[null,void 0,100].includes(group.rollout_percentage)})))return"All users";if(1===groups.length){var _groups$=groups[0],properties=_groups$.properties,_groups$$rollout_perc=_groups$.rollout_percentage,rollout_percentage=void 0===_groups$$rollout_perc?null:_groups$$rollout_perc;return(null==properties?void 0:properties.length)>0&&null!=rollout_percentage?react_default.a.createElement("div",{style:{display:"flex",alignItems:"center"}},react_default.a.createElement("span",{style:{flexShrink:0,marginRight:5}},rollout_percentage,"% of"),react_default.a.createElement(components_PropertyFiltersDisplay,{filters:properties,style:{margin:0,width:"100%"},greyBadges:!0})):(null==properties?void 0:properties.length)>0?react_default.a.createElement(components_PropertyFiltersDisplay,{filters:properties,style:{margin:0},greyBadges:!0}):null!==rollout_percentage?"".concat(rollout_percentage,"% of all users"):(console.error("A group with full rollout was not detected early"),"All users")}return"".concat(groups.length," groups")}(featureFlag.filters.groups)}},{title:"Status",dataIndex:"active",sorter:function sorter(a,b){return Number(a.active)-Number(b.active)},width:100,render:function RenderActive(_,featureFlag){var switchId="feature-flag-".concat(featureFlag.id,"-switch");return react_default.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},react_default.a.createElement("label",{htmlFor:switchId},featureFlag.active?"Enabled":"Disabled"),react_default.a.createElement(LemonSwitch.a,{id:switchId,checked:featureFlag.active,onChange:function onChange(active){return featureFlag.id?updateFeatureFlag({id:featureFlag.id,payload:{active:active}}):null},style:{marginLeft:"0.5rem"}}))}},{width:0,render:function Render(_,featureFlag){return react_default.a.createElement(More.a,{overlay:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(LemonButton.a,{type:"stealth",onClick:function onClick(){Object(utils.p)(featureFlag.key,"feature flag key")},fullWidth:!0},"Copy key"),featureFlag.id&&react_default.a.createElement(LemonButton.a,{type:"stealth",to:urls.a.featureFlag(featureFlag.id),fullWidth:!0},"Edit"),react_default.a.createElement(LemonButton.a,{type:"stealth",to:urls.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(featureFlag.key)}),"data-attr":"usage",fullWidth:!0},"Use in Insights"),react_default.a.createElement(LemonRow.b,null),featureFlag.id&&react_default.a.createElement(LemonButton.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function onClick(){Object(utils.t)({endpoint:"projects/".concat(currentTeamId,"/feature_flags"),object:{name:featureFlag.name,id:featureFlag.id},callback:loadFeatureFlags})},fullWidth:!0},"Delete feature flag"))})}}];return react_default.a.createElement("div",{className:"feature_flags"},react_default.a.createElement(PageHeader.a,{title:"Feature Flags",caption:"Feature flags are a way of turning functionality in your app on or off, based on user properties."}),react_default.a.createElement("div",null,react_default.a.createElement(input.a.Search,{placeholder:"Search for feature flags",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value)}}),react_default.a.createElement("div",{className:"mb float-right"},react_default.a.createElement(LinkButton.a,{type:"primary",to:urls.a.featureFlag("new"),"data-attr":"new-feature-flag",icon:react_default.a.createElement(PlusOutlined.a,null)},"New Feature Flag"))),react_default.a.createElement(LemonTable.a,{dataSource:searchedFeatureFlags,columns:columns,rowKey:"key",loading:featureFlagsLoading,defaultSorting:{columnKey:"key",order:1},pagination:{pageSize:20},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table"}))}}}]);