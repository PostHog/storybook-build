(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/RestrictedArea.tsx":function(ye,S,e){"use strict";e.d(S,"b",function(){return R}),e.d(S,"a",function(){return V});var G=e("./node_modules/core-js/modules/es.array.concat.js"),ce=e.n(G),ue=e("./node_modules/kea/lib/index.esm.js"),de=e("./node_modules/react/index.js"),X=e.n(de),ee=e("./frontend/src/scenes/organizationLogic.tsx"),te=e("./frontend/src/lib/constants.tsx"),F=e("./frontend/src/lib/components/Tooltip.tsx"),me=e("./frontend/src/lib/utils/permissioning.ts"),ne=e("./frontend/src/scenes/teamLogic.tsx"),R;(function(b){b.Organization="organization",b.Project="project"})(R||(R={}));function V(b){var x=b.Component,je=b.minimumAccessLevel,Y=b.scope,ve=Y===void 0?R.Organization:Y,he=Object(ue.useValues)(ee.a),t=he.currentOrganization,M=Object(ue.useValues)(ne.a),_e=M.currentTeam,w=Object(de.useMemo)(function(){var K;if(ve===R.Project){if(!_e)return"Loading current project\u2026";K=_e.effective_membership_level}else{if(!t)return"Loading current organization\u2026";K=t.membership_level}return K===null?"You don't have access to the current ".concat(ve,"."):K<je?je===te.m.Owner?"This area is restricted to the ".concat(ve," owner."):"This area is restricted to ".concat(ve," ").concat(me.b.get(je),"s and up. Your level is ").concat(me.b.get(K),"."):null},[t]);return w?X.a.createElement(F.a,{title:w,placement:"topLeft",delayMs:0},X.a.createElement("span",null,X.a.createElement(x,{isRestricted:!0,restrictionReason:w}))):X.a.createElement(x,{isRestricted:!1,restrictionReason:null})}try{V.displayName="RestrictedArea",V.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:V.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(b){}try{R.Organization.displayName="RestrictionScope.Organization",R.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:R.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(b){}try{R.Project.displayName="RestrictionScope.Project",R.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:R.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(b){}},"./frontend/src/scenes/actions/EventName.tsx":function(ye,S,e){"use strict";e.d(S,"a",function(){return ee}),e.d(S,"b",function(){return te});var G=e("./node_modules/react/index.js"),ce=e.n(G),ue=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),de=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),X=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function ee(F){var me=F.value,ne=F.onChange;return ce.a.createElement(de.d,{groupType:X.a.Events,onChange:ne,value:me,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(V){return ce.a.createElement(ue.a,{value:V,disablePopover:!0})},allowClear:!0})}function te(F){var me=F.value,ne=F.onChange;return ce.a.createElement(de.b,{groupType:X.a.Events,onChange:ne,value:me,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(V){return ce.a.createElement(ue.a,{value:V,disablePopover:!0})},allowClear:!0})}try{ee.displayName="EventName",ee.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:ee.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(F){}try{te.displayName="LemonEventName",te.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:te.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(F){}},"./frontend/src/scenes/events/EventDetails.tsx":function(ye,S,e){"use strict";e.d(S,"a",function(){return fe});var G=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ce=e.n(G),ue=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),de=e.n(ue),X=e("./node_modules/core-js/modules/es.object.keys.js"),ee=e("./node_modules/core-js/modules/es.symbol.js"),te=e("./node_modules/core-js/modules/es.array.filter.js"),F=e("./node_modules/core-js/modules/es.object.to-string.js"),me=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ne=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),R=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),V=e("./node_modules/react/index.js"),b=e.n(V),x=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),je=e("./frontend/src/lib/components/PropertiesTable.tsx"),Y=e("./frontend/src/scenes/events/EventElements.tsx"),ve=e("./node_modules/antd/es/tabs/index.js"),he=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(he),M=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),_e=e("./frontend/src/lib/utils.tsx"),w=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function K(E,c){var h=Object.keys(E);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(E);c&&(g=g.filter(function(N){return Object.getOwnPropertyDescriptor(E,N).enumerable})),h.push.apply(h,g)}return h}function pe(E){for(var c=1;c<arguments.length;c++){var h=arguments[c]!=null?arguments[c]:{};c%2?K(Object(h),!0).forEach(function(g){ce()(E,g,h[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(h)):K(Object(h)).forEach(function(g){Object.defineProperty(E,g,Object.getOwnPropertyDescriptor(h,g))})}return E}function re(E){var c=E.event,h=c.event,g=c.id,N=c.uuid,Q=c.distinct_id,De=c.properties,ae=c.elements,xe=c.timestamp,Ee=c.person,Pe=t()(c,w),H=pe(pe(pe(pe({},g?{id:g}:null),N?{uuid:N}:null),{},{timestamp:xe,event:h,distinct_id:Q,properties:Object(_e.yb)(De)},ae&&ae.length>0?{elements:ae}:null),Pe);return b.a.createElement(M.a,{language:M.b.JSON},JSON.stringify(H,null,4))}try{re.displayName="EventJSON",re.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:re.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(E){}var We=e("./frontend/src/lib/dayjs.ts"),oe=e("./frontend/src/lib/components/LemonButton/index.ts");function se(E,c){var h=Object.keys(E);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(E);c&&(g=g.filter(function(N){return Object.getOwnPropertyDescriptor(E,N).enumerable})),h.push.apply(h,g)}return h}function L(E){for(var c=1;c<arguments.length;c++){var h=arguments[c]!=null?arguments[c]:{};c%2?se(Object(h),!0).forEach(function(g){ce()(E,g,h[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(h)):se(Object(h)).forEach(function(g){Object.defineProperty(E,g,Object.getOwnPropertyDescriptor(h,g))})}return E}var Se=ve.a.TabPane;function fe(E){for(var c=E.event,h=Object(V.useState)(!1),g=de()(h,2),N=g[0],Q=g[1],De={},ae={},xe=0,Ee=0,Pe=Object.keys(c.properties);Ee<Pe.length;Ee++){var H=Pe[Ee];x.e.event[H]&&x.e.event[H].hide&&(xe+=1,N&&(ae[H]=c.properties[H])),(!x.e.event[H]||!x.e.event[H].hide)&&(De[H]=c.properties[H])}return b.a.createElement(ve.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},b.a.createElement(Se,{tab:"Properties",key:"properties"},b.a.createElement(je.a,{properties:L(L({$timestamp:Object(We.a)(c.timestamp).toISOString()},De),ae),useDetectedPropertyType:!0}),xe>0&&b.a.createElement(oe.a,{className:"mb-05",onClick:function(){return Q(!N)},size:"small"},N?"Hide":"Show"," ",Object(_e.qb)(xe,"hidden property","hidden properties"))),b.a.createElement(Se,{tab:"JSON",key:"json"},b.a.createElement(re,{event:c})),c.elements&&c.elements.length>0&&b.a.createElement(Se,{tab:"Elements",key:"elements"},b.a.createElement(Y.a,{event:c})))}try{fe.displayName="EventDetails",fe.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:fe.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(E){}},"./frontend/src/scenes/events/EventElements.tsx":function(ye,S,e){"use strict";e.d(S,"a",function(){return pe});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ce=e.n(G),ue=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),de=e.n(ue),X=e("./node_modules/core-js/modules/es.array.join.js"),ee=e.n(X),te=e("./node_modules/core-js/modules/es.array.fill.js"),F=e.n(te),me=e("./node_modules/core-js/modules/es.array.slice.js"),ne=e.n(me),R=e("./node_modules/core-js/modules/es.array.map.js"),V=e.n(R),b=e("./node_modules/core-js/modules/es.object.entries.js"),x=e.n(b),je=e("./node_modules/core-js/modules/es.array.concat.js"),Y=e.n(je),ve=e("./node_modules/core-js/modules/es.regexp.exec.js"),he=e.n(ve),t=e("./node_modules/core-js/modules/es.string.replace.js"),M=e.n(t),_e=e("./node_modules/react/index.js"),w=e.n(_e);function K(re){return Array(re).fill("    ").join("")}function pe(re){var We=re.event,oe=de()(We.elements||[]).reverse();return oe=oe.slice(Math.max(oe.length-10,1)),w.a.createElement("div",null,oe.map(function(se,L){return w.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0,backgroundColor:L===oe.length-1?"var(--primary)":void 0}},K(L),"<",se.tag_name,se.attr_id&&' id="'.concat(se.attr_id,'"'),Object.entries(se.attributes).map(function(Se){var fe=ce()(Se,2),E=fe[0],c=fe[1];return w.a.createElement("span",{key:E}," ".concat(E.replace("attr__",""),'="').concat(c,'"'))}),">",se.text,L===oe.length-1&&w.a.createElement("span",null,"</",se.tag_name,">"))}),de()(oe).reverse().slice(1).map(function(se,L){return w.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0}},K(oe.length-L-2),"</",se.tag_name,">")}))}try{pe.displayName="EventElements",pe.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:pe.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(re){}},"./frontend/src/scenes/events/EventsTable.tsx":function(ye,S,e){"use strict";e.d(S,"a",function(){return st});var G=e("./node_modules/core-js/modules/es.symbol.js"),ce=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ue=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),de=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),X=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ee=e.n(X),te=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),F=e.n(te),me=e("./node_modules/core-js/modules/es.array.splice.js"),ne=e("./node_modules/core-js/modules/es.array.filter.js"),R=e("./node_modules/core-js/modules/es.object.to-string.js"),V=e("./node_modules/core-js/modules/es.array.map.js"),b=e("./node_modules/core-js/modules/es.array.find.js"),x=e("./node_modules/core-js/modules/es.array.concat.js"),je=e("./node_modules/core-js/modules/es.array.join.js"),Y=e("./node_modules/core-js/modules/es.object.keys.js"),ve=e("./node_modules/core-js/modules/es.regexp.to-string.js"),he=e("./node_modules/react/index.js"),t=e.n(he),M=e("./node_modules/kea/lib/index.esm.js"),_e=e("./frontend/src/scenes/events/EventDetails.tsx"),w=e("./frontend/src/lib/components/Link.tsx"),K=e("./node_modules/antd/es/button/index.js"),pe=e("./node_modules/kea-router/lib/index.js"),re=e("./node_modules/@babel/runtime/helpers/typeof.js"),We=e.n(re),oe=e("./node_modules/core-js/modules/es.regexp.exec.js"),se=e("./node_modules/core-js/modules/es.string.replace.js");function L(r){var o=r.value;return t.a.createElement("span",{title:o},We()(o)==="object"?JSON.stringify(o):o&&o.toString().replace(/(^\w+:|^)\/\//,""))}try{L.displayName="Property",L.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:L.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(r){}var Se=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function fe(r,o){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);o&&(u=u.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),i.push.apply(i,u)}return i}function E(r){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?fe(Object(i),!0).forEach(function(u){ee()(r,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):fe(Object(i)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(i,u))})}return r}function c(r){var o=r.property,i=r.value,u=r.filters,C=r.onClick,$=r.className,I=Object(Se.c)(u.properties),Be=I.find(function(k){return k.key===o&&k.value===i&&!k.operator})?I.filter(function(k){return k.key!==o||k.value!==i||k.operator}):[].concat(F()(I),[{key:o,value:i}]),Xe=Object(pe.combineUrl)(window.location.pathname,E(E({},u),{},{properties:Be}),{}),Ke=Xe.url;return t.a.createElement(w.a,{to:Ke,className:$,onClick:function(){C&&C(o,i)}},t.a.createElement(L,{value:i}))}try{c.displayName="FilterPropertyLink",c.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:c.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(r){}var h=e("./frontend/src/lib/utils.tsx"),g=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),N=e.n(g),Q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),De=e.n(Q),ae={};ae.insert="head",ae.singleton=!1;var xe=N()(De.a,ae),Ee=De.a.locals||{},Pe=e("./frontend/src/scenes/events/eventsTableLogic.ts"),H=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Ye=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),Ve=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Me=e("./frontend/src/types.ts"),z=e("./frontend/src/scenes/actions/EventName.tsx"),ft=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),He=e("./frontend/src/lib/components/Tooltip.tsx"),we=e("./node_modules/clsx/dist/clsx.m.js"),Le=Object(M.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(o){return{columnConfig:o}}},reducers:function(o){var i=o.props;return{selectedColumns:[i.startingColumns||"DEFAULT",{setSelectedColumns:function(C,$){var I=$.columnConfig;return I}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(r){return[r.selectedColumns]},function(r){return r==="DEFAULT"?7:r.length+2}]}}),Ie=e("./frontend/src/scenes/urls.ts"),Et=e("./frontend/src/lib/components/LemonTable/index.ts"),p=e("./frontend/src/lib/components/icons.tsx"),n=e("./frontend/src/lib/components/LemonButton/index.ts"),s=e("./frontend/src/lib/components/LemonButton/More.tsx"),a=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),v=e("./frontend/src/scenes/teamLogic.tsx"),l=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function f(r){Object(he.useEffect)(function(){var o="hidden",i="visibilitychange";typeof document.msHidden!="undefined"?(o="msHidden",i="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(o="webkitHidden",i="webkitvisibilitychange");var u=function(){r(!document[o])};return document.addEventListener(i,u),function(){document.removeEventListener(i,u)}},[])}var d=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),m=e.n(d),ge=e("./node_modules/core-js/modules/es.array.includes.js"),Z=e("./node_modules/core-js/modules/es.string.includes.js"),Oe=e("./node_modules/antd/es/row/index.js"),Re=e("./node_modules/antd/es/space/index.js"),Ce=e("./node_modules/antd/es/col/index.js"),Te=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),le=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),ze=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),P=e.n(ze),Je={};Je.insert="head",Je.singleton=!1;var A=N()(P.a,Je),Ct=P.a.locals||{},nt=e("./node_modules/antd/lib/modal/Modal.js"),gt=e.n(nt),rt=e("./node_modules/react-virtualized/dist/es/List/index.js"),yt=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),Ge=e("./node_modules/core-js/modules/es.array.from.js"),nn=e("./node_modules/core-js/modules/es.string.iterator.js"),rn=e("./node_modules/core-js/modules/es.array.iterator.js"),on=e("./node_modules/core-js/modules/es.set.js"),sn=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Rt=Object(M.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[Le],actions:{selectColumn:function(o){return{column:o}},unselectColumn:function(o){return{column:o}},resetColumns:function(o){return{columns:o}},setColumns:function(o){return{columns:o}},toggleSaveAsDefault:!0,save:!0},reducers:function(o){var i=o.props;return{selectedColumns:[i.selectedColumns,{selectColumn:function(C,$){var I=$.column;return Array.from(new Set([].concat(F()(C),[I])))},unselectColumn:function(C,$){var I=$.column;return C.filter(function(Be){return Be!==I})},resetColumns:function(C,$){var I=$.columns;return I},setColumns:function(C,$){var I=$.columns;return I}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(C){return!C}}]}},listeners:function(o){var i=o.values,u=o.actions;return{save:function(){Le.actions.setSelectedColumns(i.selectedColumns),i.saveAsDefault&&(v.a.actions.updateCurrentTeam({live_events_columns:i.selectedColumns}),u.toggleSaveAsDefault())}}}}),Mt=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Tt=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),It=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),_t=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),At=e("./frontend/src/lib/components/RestrictedArea.tsx"),Bt=e("./frontend/src/lib/constants.tsx"),Kt=Object(_t.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(p.SortableDragIcon,null))});function ot(r){var o=Object(M.useActions)(Le),i=o.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(n.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:i,icon:t.a.createElement(p.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Nt,{immutableColumns:r.immutableColumns,defaultColumns:r.defaultColumns}))}function Nt(r){var o=r.immutableColumns,i=r.defaultColumns,u=36,C=32,$=Object(M.useValues)(Le),I=$.selectedColumns,Be=$.modalVisible,Xe=Object(M.useActions)(Le),Ke=Xe.hideModal,k=Rt({selectedColumns:I==="DEFAULT"?i:I}),Ae=Object(M.useActions)(k),at=Ae.selectColumn,lt=Ae.unselectColumn,it=Ae.resetColumns,ct=Ae.setColumns,Qe=Ae.toggleSaveAsDefault,Ze=Ae.save,ke=Object(M.useValues)(k),be=ke.selectedColumns;function jt(J){var W=J.isRestricted;return t.a.createElement(It.a,{label:"Save as default for all project members",className:"save-as-default-button mt","data-attr":"events-table-save-columns-as-default-toggle",onChange:Qe,defaultChecked:!1,disabled:W})}var qe=function(W){var B=W.column,ie=W.disabled;return t.a.createElement("div",{className:Object(we.a)(["column-display-item",{selected:!ie,disabled:ie}]),style:{height:"".concat(C,"px")}},!ie&&t.a.createElement(Kt,null),t.a.createElement(Ve.a,{value:B}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(He.a,{title:ie?"Reserved":"Remove"},ie?t.a.createElement(Te.a,null):t.a.createElement(le.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return lt(B)}}))))},ht=Object(_t.b)(qe),ut=function(W){var B=W.index,ie=W.style,U=W.key,q=o==null?void 0:o.includes(be[B]);return t.a.createElement("div",{style:ie,key:U},q&&t.a.createElement(qe,{column:be[B],disabled:Boolean(q)}),!q&&t.a.createElement(ht,{column:be[B],index:B,collection:"selected-columns"}))},dt=Object(_t.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(yt.a,null,function(J){var W=J.height,B=J.width;return t.a.createElement(rt.b,{height:W,rowCount:be.length,rowRenderer:ut,rowHeight:u,width:B})}))}),mt=function(W){var B=W.oldIndex,ie=W.newIndex,U=F()(be),q=U.splice(B,1),Ot=m()(q,1),vt=Ot[0];U.splice(ie,0,vt),ct(U)};return t.a.createElement(gt.a,{id:"column-configurator-modal",centered:!0,visible:Be,title:"Configure columns",onOk:Ze,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:Ke,footer:t.a.createElement(Oe.a,null,t.a.createElement(Re.b,{style:{flexGrow:1},align:"start"},t.a.createElement(K.a,{className:"text-blue",onClick:function(){return it(i)}},"Reset to defaults")),t.a.createElement(Re.b,null,t.a.createElement(K.a,{className:"text-blue",type:"text",onClick:Ke},"Close"),t.a.createElement(K.a,{type:"primary",onClick:Ze},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(Oe.a,{gutter:16,className:"lists"},t.a.createElement(Ce.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",be.length,") - Drag to reorder"),t.a.createElement(dt,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:mt,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(Ce.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(yt.a,null,function(J){var W=J.height,B=J.width;return t.a.createElement(Mt.a,{height:W,width:B,taxonomicGroupTypes:[Tt.a.EventProperties],value:void 0,onChange:function(U,q){return q&&at(String(q))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:ee()({},Tt.a.EventProperties,be)})})))),t.a.createElement(At.a,{Component:jt,minimumAccessLevel:Bt.m.Owner,scope:At.b.Project})))}try{ot.displayName="LemonTableConfig",ot.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:ot.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(r){}var Ut=e("./frontend/src/lib/utils/eventUsageLogic.ts");function St(r,o){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);o&&(u=u.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),i.push.apply(i,u)}return i}function Dt(r){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?St(Object(i),!0).forEach(function(u){ee()(r,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):St(Object(i)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(i,u))})}return r}function st(r){var o,i=r.pageKey,u=r.fixedFilters,C=r.fixedColumns,$=r.sceneUrl,I=r.fetchMonths,Be=I===void 0?12:I,Xe=r.startingColumns,Ke=r.showCustomizeColumns,k=Ke===void 0?!0:Ke,Ae=r.showExport,at=Ae===void 0?!0:Ae,lt=r.showAutoload,it=lt===void 0?!0:lt,ct=r.showEventFilter,Qe=ct===void 0?!0:ct,Ze=r.showPropertyFilter,ke=Ze===void 0?!0:Ze,be=r.showRowExpanders,jt=be===void 0?!0:be,qe=r.showActionsButton,ht=qe===void 0?!0:qe,ut=r.showPersonColumn,dt=ut===void 0?!0:ut,mt=r.linkPropertiesToFilters,J=mt===void 0?!0:mt,W=Object(M.useValues)(v.a),B=W.currentTeam,ie=Object(Pe.a)({fixedFilters:u,key:i,sceneUrl:$||Ie.a.events(),fetchMonths:Be}),U=Object(M.useValues)(ie),q=U.properties,Ot=U.eventsFormatted,vt=U.isLoading,Ft=U.hasNext,xt=U.isLoadingNext,pt=U.eventFilter,Wt=U.automaticLoadEnabled,Vt=U.exportUrl,wt=U.highlightEvents,zt=U.months,Lt=Object(M.useValues)(Le({startingColumns:(o=B&&B.live_events_columns)!==null&&o!==void 0?o:Xe})),et=Lt.tableWidth,$e=Lt.selectedColumns,Ne=Object(M.useActions)(ie),$t=Ne.fetchNextEvents,Yt=Ne.prependNewEvents,Ht=Ne.setEventFilter,Jt=Ne.toggleAutomaticLoad,Gt=Ne.startDownload,Xt=Ne.setPollingActive,Qt=Ne.setProperties,Zt=!(u!=null&&u.person_id),kt=Object(M.useActions)(Ut.f),qt=kt.reportEventsTablePollingReactedToPageVisibility;f(function(T){Xt(T),qt(T)});var bt=function(y,_){var D=y.date_break,j=y.new_events;return{children:D||(j?t.a.createElement(n.a,{icon:t.a.createElement(p.IconSync,null),style:{borderRadius:0},onClick:function(){return Yt()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:_+1,style:j?{padding:0}:void 0}}},en={title:"Person",key:"person",render:function(y,_){var D,j,O=_.event;return O?Zt&&(D=O.person)!==null&&D!==void 0&&(j=D.distinct_ids)!==null&&j!==void 0&&j.length?t.a.createElement(w.a,{to:Ie.a.person(O.person.distinct_ids[0])},t.a.createElement(H.a,{noLink:!0,withIcon:!0,person:O.person})):t.a.createElement(H.a,{withIcon:!0,person:O.person}):{props:{colSpan:0}}}},Pt=Object(he.useMemo)(function(){var T=[{title:"Event",key:"event",width:"16rem",render:function(_,D){if(!D.event)return bt(D,et);var j=D.event;return t.a.createElement(Ve.a,{value:Object(h.f)(j)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(_,D){var j=D.event;if(!j)return{props:{colSpan:0}};var O=j.properties.$current_url?"$current_url":"$screen_name";return J?t.a.createElement(c,{className:"ph-no-capture",property:O,value:j.properties[O],filters:{properties:q}}):t.a.createElement(L,{value:j.properties[O]})}},{title:t.a.createElement(He.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(_,D){var j=D.event;return j?J?t.a.createElement(c,{property:"$lib",value:j.properties.$lib,filters:{properties:q}}):t.a.createElement(L,{value:j.properties.$lib}):{props:{colSpan:0}}}}];return dt&&T.splice(1,0,en),T},[et]),tn=Object(he.useMemo)(function(){var T=[];if($e==="DEFAULT")T=F()(Pt);else{var y=dt?$e:$e.filter(function(_){return _!=="person"});T=y.map(function(_,D){var j=Pt.find(function(O){return O.key===_});return j?Dt(Dt({},j),{},{render:function(Ue,Fe){var tt=Fe.event;return tt?j.render?j.render(Ue,Fe,D):{props:{colSpan:0}}:D===0?bt(Fe,et):{props:{colSpan:0}}}}):{title:Ve.e.event[_]?Ve.e.event[_].label:_,key:_,render:function(Ue,Fe){var tt=Fe.event;return tt?J?t.a.createElement(c,{className:"ph-no-capture ",property:_,value:tt.properties[_],filters:{properties:q}}):t.a.createElement(L,{value:tt.properties[_]}):D===0?bt(Fe,et):{props:{colSpan:0}}}}})}return T.push({title:"Time",key:"time",render:function(D,j){var O=j.event;return O?t.a.createElement(Ye.b,{time:O.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),ht&&T.push({key:"actions",width:0,render:function(D,j){var O=j.event;if(!O)return{props:{colSpan:0}};var Ue;return O.event==="$pageview"?Ue={insight:Me.z.TRENDS,interval:"day",display:Me.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:O.properties.$current_url,type:"event"}]}]}:O.event!=="$autocapture"&&(Ue={insight:Me.z.TRENDS,interval:"day",display:Me.j.ActionsLineGraph,actions:[],events:[{id:O.event,name:O.event,type:"events",order:0,properties:[]}]}),t.a.createElement(s.a,{overlay:t.a.createElement(t.a.Fragment,null,B&&t.a.createElement(n.a,{type:"stealth",onClick:function(){return Object(l.a)(B.id,O,0,B.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),Ue&&t.a.createElement(n.a,{type:"stealth",to:Ie.a.insightNew(Ue),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),C?T.concat(C):T},[$e,et]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(Qe||ke)&&t.a.createElement("div",{className:"flex pt pb space-x border-top"},Qe&&t.a.createElement(z.b,{value:pt,onChange:function(y){Ht(y||"")}}),ke&&t.a.createElement(ft.a,{propertyFilters:q,onChange:Qt,pageKey:i,style:{marginBottom:0,marginTop:0},eventNames:pt?[pt]:[],useLemonButton:!0})),it||k||at?t.a.createElement("div",{className:Object(we.a)("space-between-items pt pb",(Qe||ke)&&"border-top")},it&&t.a.createElement(a.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:Wt,onChange:Jt}),t.a.createElement("div",{className:"flex space-x-05"},k&&t.a.createElement(ot,{immutableColumns:["event","person"],defaultColumns:Pt.map(function(T){return T.key||""})}),at&&Vt&&t.a.createElement(He.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(n.a,{type:"secondary",icon:t.a.createElement(p.IconExport,{style:{color:"var(--primary)"}}),onClick:Gt},"Export")))):null,t.a.createElement(Et.a,{dataSource:Ot,loading:vt,columns:tn,key:$e==="DEFAULT"?"default":$e.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:vt?void 0:q.some(function(T){return Object.keys(T).length})||pt?"No events matching filters found in the last ".concat(zt," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(w.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(y){var _;return y.event?y.event.id+"-"+y.event.event:((_=y.date_break)===null||_===void 0?void 0:_.toString())||""},rowClassName:function(y){return Object(we.a)({"event-row":y.event,highlighted:y.event&&wt[y.event.id],"event-row-is-exception":y.event&&y.event.event==="$exception","event-row-date-separator":y.date_break,"event-row-new":y.new_events})},expandable:jt?{expandedRowRender:function(y){var _=y.event;return _&&t.a.createElement(_e.a,{event:_})},rowExpandable:function(y){var _=y.event,D=y.date_break,j=y.new_events;return D||j?-1:!!_}}:void 0}),t.a.createElement(K.a,{type:"primary",onClick:$t,loading:xt,style:{display:Ft||xt?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{st.displayName="EventsTable",st.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:st.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(r){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(ye,S,e){"use strict";e.d(S,"a",function(){return Et});var G=e("./node_modules/core-js/modules/es.object.keys.js"),ce=e.n(G),ue=e("./node_modules/core-js/modules/es.symbol.js"),de=e.n(ue),X=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ee=e.n(X),te=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),F=e.n(te),me=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ne=e.n(me),R=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),V=e.n(R),b=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),x=e.n(b),je=e("./node_modules/@babel/runtime/regenerator/index.js"),Y=e.n(je),ve=e("./node_modules/core-js/modules/es.array.map.js"),he=e.n(ve),t=e("./node_modules/core-js/modules/es.object.to-string.js"),M=e.n(t),_e=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),w=e.n(_e),K=e("./node_modules/core-js/modules/es.array.splice.js"),pe=e.n(K),re=e("./node_modules/core-js/modules/es.array.join.js"),We=e.n(re),oe=e("./node_modules/core-js/modules/es.array.filter.js"),se=e.n(oe),L=e("./node_modules/core-js/modules/es.array.concat.js"),Se=e.n(L),fe=e("./node_modules/core-js/modules/es.array.iterator.js"),E=e.n(fe),c=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),h=e.n(c),g=e("./node_modules/kea/lib/index.esm.js"),N=e("./frontend/src/lib/utils.tsx"),Q=e("./node_modules/kea-router/lib/index.js"),De=e.n(Q),ae=e("./frontend/src/lib/api.ts"),xe=e("./frontend/src/scenes/teamLogic.tsx"),Ee=e("./frontend/src/lib/dayjs.ts"),Pe=e("./frontend/src/lib/components/lemonToast.tsx"),H=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Ye=e("./frontend/src/lib/components/ExportButton/exporterLogic.ts"),Ve=e("./frontend/src/lib/constants.tsx");function Me(p,n){var s=Object.keys(p);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(p);n&&(a=a.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),s.push.apply(s,a)}return s}function z(p){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Me(Object(s),!0).forEach(function(a){V()(p,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(s)):Me(Object(s)).forEach(function(a){Object.defineProperty(p,a,Object.getOwnPropertyDescriptor(s,a))})}return p}var ft=5,He=365,we=5e3,Le=function(n,s){var a=[];return a=n.map(function(v){return{event:v}}),a.forEach(function(v,l){var f=a[l-1];l>0&&v.event&&f.event&&!Object(Ee.a)(v.event.timestamp).isSame(f.event.timestamp,"day")&&a.splice(l,0,{date_break:Object(Ee.a)(v.event.timestamp).format("LL")})}),s.length>0&&a.splice(0,0,{new_events:!0}),a},Ie=function(n){return Object(Ee.b)().subtract(n,"day").toISOString()},Et=Object(g.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(s){return!!s}).join("-")},connect:{values:[xe.a,["currentTeamId"],H.a,["featureFlags"]],actions:[Ye.b,["exportItem"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:function(n){var s,a,v=n.props;return{pollingIsActive:[!0,{setPollingActive:function(f,d){var m=d.pollingActive;return m},pollEventsSuccess:function(f,d){var m=d.events;return m&&m.length?!1:f},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(f,d){var m=d.properties;return Object(N.s)(m)}}],eventFilter:[(s=(a=v.fixedFilters)===null||a===void 0?void 0:a.event_filter)!==null&&s!==void 0?s:"",{setEventFilter:function(f,d){var m=d.event;return m}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(f,d){var m=d.events,ge=d.isNext;return ge?[].concat(x()(f),x()(m)):m},prependEvents:function(f,d){var m=d.events;return[].concat(x()(m),x()(f))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(f,d){var m=d.hasNext;return m}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(f,d){var m=d.selectedEvent;return m}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(f,d){var m=d.events;return m||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(f,d){var m=d.events;return m.reduce(function(ge,Z){return ge[Z.id]=!0,ge},{})}}],pollTimeout:[0,{setPollTimeout:function(f,d){return d.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(f,d){var m=d.automaticLoadEnabled;return m}}]}},selectors:function(n){var s=n.selectors,a=n.props;return{eventsFormatted:[function(){return[s.events,s.newEvents]},function(v,l){return Le(v,l)}],exportParams:[function(){return[s.eventFilter,s.orderBy,s.properties,s.minimumExportDate]},function(v,l,f,d){var m;return z(z(z({},a.fixedFilters||{}),{},{properties:[].concat(x()(f),x()(((m=a.fixedFilters)===null||m===void 0?void 0:m.properties)||[]))},v?{event:v}:{}),{},{orderBy:[l],after:d})}],exportUrl:[function(){return[s.currentTeamId,s.exportParams]},function(v,l){return"/api/projects/".concat(v,"/events.csv?").concat(Object(N.Bb)(l))}],months:[function(){return[function(v,l){return l.fetchMonths}]},function(v){return v||12}],minimumExportDate:[function(){return[s.months]},function(){return Object(Ee.b)().subtract(1,"months").toISOString()}],minimumQueryDate:[function(){return[s.months]},function(v){return Object(Ee.b)().subtract(v,"months").toISOString()}],pollAfter:[function(){return[s.events]},function(v){return(v==null?void 0:v.length)>0&&v[0].timestamp?v[0].timestamp:Ie(0)}]}},actionToUrl:function(n){var s=n.values;return{setProperties:function(){return[Q.router.values.location.pathname,z(z({},Q.router.values.searchParams),{},{properties:s.properties.length===0?void 0:s.properties}),Q.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[Q.router.values.location.pathname,z(z({},Q.router.values.searchParams),{},{eventFilter:s.eventFilter}),Q.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var s=n.actions,a=n.values,v=n.props;return V()({},v.sceneUrl,function(l,f){s.setProperties(f.properties||a.properties||{}),f.eventFilter&&s.setEventFilter(f.eventFilter)})},events:function(n){var s=n.values;return{beforeUnmount:function(){return clearTimeout(s.pollTimeout||void 0)}}},listeners:function(n){var s=n.actions,a=n.values,v=n.props;return{startDownload:function(){a.featureFlags[Ve.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS]?s.exportItem(Ye.a.CSV,{},a.exportParams):(Pe.d.success("The export is starting. It should finish soon"),window.location.href=a.exportUrl)},setProperties:function(){return s.fetchEvents()},setEventFilter:function(){return s.fetchEvents()},fetchNextEvents:function(){var l=ne()(Y.a.mark(function d(){var m;return Y.a.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:m=a.events,m.length===0?s.fetchEvents():s.fetchEvents({before:m[m.length-1].timestamp});case 2:case"end":return Z.stop()}},d)}));function f(){return l.apply(this,arguments)}return f}(),fetchEvents:function(){var l=ne()(Y.a.mark(function d(m,ge){var Z,Oe,Re,Ce,Te,le,ze,P;return Y.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(Te=function(){return Te=ne()(Y.a.mark(function nt(gt){var rt;return Y.a.wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return rt=z(z(z(z({after:gt},v.fixedFilters||{}),{},{properties:Re},Oe||{}),a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy]}),Ge.abrupt("return",ae.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(Object(N.Bb)(rt))));case 2:case"end":return Ge.stop()}},nt)})),Te.apply(this,arguments)},Ce=function(nt){return Te.apply(this,arguments)},Oe=m.nextParams,clearTimeout(a.pollTimeout),!(a.events.length>0)){A.next=9;break}return A.next=7,ge(300);case 7:A.next=11;break;case 9:return A.next=11,ge(1);case 11:return Re=[].concat(x()(a.properties),x()(((Z=v.fixedFilters)===null||Z===void 0?void 0:Z.properties)||[])),le=null,ze=!1,A.prev=14,A.next=17,Ce(Ie(ft));case 17:if(le=A.sent,le.results.length!==0){A.next=23;break}return A.next=21,Ce(Ie(He));case 21:le=A.sent,ze=!0;case 23:A.next=29;break;case 25:return A.prev=25,A.t0=A.catch(14),s.fetchOrPollFailure(A.t0),A.abrupt("return");case 29:ge(),s.fetchEventsSuccess({events:le.results,hasNext:!!le.next||!ze,isNext:!!Oe}),P=window.setTimeout(s.pollEvents,we),s.setPollTimeout(P);case 33:case"end":return A.stop()}},d,null,[[14,25]])}));function f(d,m){return l.apply(this,arguments)}return f}(),pollEvents:function(){var l=ne()(Y.a.mark(function d(m,ge){var Z,Oe,Re,Ce,Te,le;return Y.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(Oe=function(){var A=window.setTimeout(s.pollEvents,we);s.setPollTimeout(A)},a.orderBy==="-timestamp"){P.next=3;break}return P.abrupt("return");case 3:if(v.sceneUrl===Q.router.values.location.pathname){P.next=5;break}return P.abrupt("return");case 5:if(a.pollingIsActive){P.next=8;break}return Oe(),P.abrupt("return");case 8:return Re=[].concat(x()(a.properties),x()(((Z=v.fixedFilters)===null||Z===void 0?void 0:Z.properties)||[])),Ce=z(z(z({},v.fixedFilters||{}),{},{properties:Re},a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy],after:a.pollAfter}),Te=Object(N.Bb)(Ce),le=null,P.prev=12,P.next=15,ae.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(Te));case 15:le=P.sent,P.next=21;break;case 18:return P.prev=18,P.t0=P.catch(12),P.abrupt("return");case 21:ge(),a.automaticLoadEnabled?s.prependEvents(le.results):s.pollEventsSuccess(le.results),Oe();case 24:case"end":return P.stop()}},d,null,[[12,18]])}));function f(d,m){return l.apply(this,arguments)}return f}(),prependNewEvents:function(){a.newEvents.length&&s.prependEvents(a.newEvents)},fetchOrPollFailure:function(f){var d=f.error;Pe.d.error("There was a problem fetching your events: ".concat(d.statusText))},toggleAutomaticLoad:function(f){var d=f.automaticLoadEnabled;d&&s.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(ye,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([ye.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--text-muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--text-default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal .save-as-default-button{border:1px solid var(--dark-grey);border-radius:.25rem}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--text-default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),ye.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(ye,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([ye.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--depr-lighten-danger-40)}.events td{max-width:20rem}",""]),ye.exports=S}}]);
