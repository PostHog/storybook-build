"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[19337],{"../../frontend/src/scenes/activity/live/LiveEventsTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LiveEventsTable:()=>LiveEventsTable,scene:()=>scene});var clsx__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.35.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_PropertyKeyInfo__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/PropertyKeyInfo.tsx"),lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),scenes_activity_live_liveEventsTableLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/scenes/activity/live/liveEventsTableLogic.tsx"),scenes_persons_PersonDisplay__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/scenes/persons/PersonDisplay.tsx"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_scenes__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/scenes/scenes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_layout_scenes_components_SceneContent__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),_layout_scenes_components_SceneDivider__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),_layout_scenes_components_SceneTitleSection__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),_queries_nodes_DataTable_EventRowActions__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../frontend/src/queries/nodes/DataTable/EventRowActions.tsx"),_types__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../frontend/src/types.ts"),products_actions_frontend_components_EventName__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../products/actions/frontend/components/EventName.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let columns=[{title:"Event",key:"event",className:"max-w-80",render:function Render(_,event){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(lib_components_PropertyKeyInfo__WEBPACK_IMPORTED_MODULE_3__.T,{value:event.event,type:lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_5__.t.Events})}},{title:"Person distinct ID",tooltip:"Some events may be missing a person profile – this is expected, because live events are streamed before person processing completes",key:"person",className:"max-w-80",render:function Render(_,event){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(scenes_persons_PersonDisplay__WEBPACK_IMPORTED_MODULE_10__.I,{person:{distinct_id:event.distinct_id}})}},{title:"URL / Screen",key:"$current_url",className:"max-w-80",render:function Render(_,event){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("span",{children:event.properties.$current_url||event.properties.$screen_name})}},{title:"Time",key:"timestamp",className:"max-w-80",render:function Render(_,event){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_4__.w,{time:event.timestamp})}},{dataIndex:"__more",render:function Render(_,event){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_6__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.u,{title:"It may take up to a few minutes for the event to show up in the Explore view",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_queries_nodes_DataTable_EventRowActions__WEBPACK_IMPORTED_MODULE_17__.c,{event:event})})})},width:0}];function LiveEventsTable(){var _stats$users_on_produ;let{events,stats,streamPaused,filters}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_activity_live_liveEventsTableLogic__WEBPACK_IMPORTED_MODULE_9__.z),{pauseStream,resumeStream,setFilters,clearEvents}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_activity_live_liveEventsTableLogic__WEBPACK_IMPORTED_MODULE_9__.z);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_layout_scenes_components_SceneContent__WEBPACK_IMPORTED_MODULE_14__._,{"data-attr":"manage-events-table",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.TP,{activeKey:_types__WEBPACK_IMPORTED_MODULE_18__.ZO.LiveEvents,tabs:[{key:_types__WEBPACK_IMPORTED_MODULE_18__.ZO.ExploreEvents,label:"Explore",link:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.j.activity(_types__WEBPACK_IMPORTED_MODULE_18__.ZO.ExploreEvents)},{key:_types__WEBPACK_IMPORTED_MODULE_18__.ZO.LiveEvents,label:"Live",link:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.j.activity(_types__WEBPACK_IMPORTED_MODULE_18__.ZO.LiveEvents)}],sceneInset:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_layout_scenes_components_SceneTitleSection__WEBPACK_IMPORTED_MODULE_16__.s,{name:scenes_scenes__WEBPACK_IMPORTED_MODULE_12__.lc[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_11__.x.LiveEvents].name,description:scenes_scenes__WEBPACK_IMPORTED_MODULE_12__.lc[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_11__.x.LiveEvents].description,resourceType:{type:scenes_scenes__WEBPACK_IMPORTED_MODULE_12__.lc[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_11__.x.LiveEvents].iconType||"default_icon_type"}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_layout_scenes_components_SceneDivider__WEBPACK_IMPORTED_MODULE_15__.V,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"mb-4 flex w-full justify-between items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.u,{title:"Estimate of users active in the last 30 seconds.",placement:"right",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"flex justify-center items-center bg-surface-primary px-3 py-2 rounded border border-primary text-xs font-medium text-secondary gap-x-2.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{className:"relative flex h-2.5 w-2.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("span",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_21__.default)("absolute inline-flex h-full w-full rounded-full bg-danger",stats?.users_on_product!=null&&"animate-ping"),style:{opacity:.75}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-danger"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{className:"text-sm cursor-default",children:["Users active right now: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("b",{children:null!==(_stats$users_on_produ=stats?.users_on_product)&&void 0!==_stats$users_on_produ?_stats$users_on_produ:"0"})]})]})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_8__.tr,{className:"w-4 h-4"}),type:"secondary",onClick:clearEvents,size:"small",tooltip:"Clear events"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(products_actions_frontend_components_EventName__WEBPACK_IMPORTED_MODULE_19__.B,{value:filters.eventType,onChange:value=>setFilters({...filters,eventType:value}),placeholder:"Filter by event",allEventsOption:"clear"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{icon:streamPaused?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPlayFilled,{className:"w-4 h-4"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPauseFilled,{className:"w-4 h-4"}),type:"secondary",onClick:streamPaused?resumeStream:pauseStream,size:"small",children:streamPaused?"Play":"Pause"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_7__.g,{columns:columns,"data-attr":"live-events-table",rowKey:"uuid",dataSource:events,useURLForSorting:!1,emptyState:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"flex flex-col justify-center items-center gap-4 p-6",children:[streamPaused?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconPauseFilled,{className:"text-4xl"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.$j,{className:"text-4xl",textColored:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("span",{className:"text-lg font-title font-semibold leading-tight",children:streamPaused?"Stream paused":"Waiting for events…"})]}),nouns:["event","events"]})]})}let scene={component:LiveEventsTable,logic:scenes_activity_live_liveEventsTableLogic__WEBPACK_IMPORTED_MODULE_9__.z,settingSectionId:"environment-autocapture"}}}]);