(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{4335:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return personsLogic}));__webpack_require__(87),__webpack_require__(374),__webpack_require__(45),__webpack_require__(34),__webpack_require__(250),__webpack_require__(2670),__webpack_require__(111),__webpack_require__(39),__webpack_require__(81),__webpack_require__(106),__webpack_require__(744),__webpack_require__(50);var _babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(104),_babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_12__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(5),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13__),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(37),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(69),__webpack_require__(11)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(7),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_17__),kea__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1),kea_router__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(23),lib_api__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(22),react_toastify__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(68),_types__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(4),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(30),scenes_urls__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(18),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(29),lib_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(10),scenes_persons_PersonHeader__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(389);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_17___default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var personsLogic=Object(kea__WEBPACK_IMPORTED_MODULE_18__.kea)({props:{},key:function key(props){if(!props.cohort&&!props.syncWithUrl)throw new Error("personsLogic must be initialized with props.cohort or props.syncWithUrl");return props.cohort?"cohort_".concat(props.cohort):"scene"},path:function path(key){return["scenes","persons","personsLogic",key]},connect:{actions:[lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_23__.e,["reportPersonDetailViewed"]],values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_25__.a,["currentTeam"]]},actions:{setPerson:function setPerson(person){return{person:person}},loadPerson:function loadPerson(id){return{id:id}},loadPersons:function loadPersons(){var url=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{url:url}},setListFilters:function setListFilters(payload){return{payload:payload}},editProperty:function editProperty(key,newValue){return{key:key,newValue:newValue}},setHasNewKeys:!0,navigateToCohort:function navigateToCohort(cohort){return{cohort:cohort}},navigateToTab:function navigateToTab(tab){return{tab:tab}},setSplitMergeModalShown:function setSplitMergeModalShown(shown){return{shown:shown}}},reducers:{listFilters:[{},{setListFilters:function setListFilters(state,_ref){var _newFilters$propertie,payload=_ref.payload,newFilters=_objectSpread(_objectSpread({},state),payload);return 0===(null===(_newFilters$propertie=newFilters.properties)||void 0===_newFilters$propertie?void 0:_newFilters$propertie.length)&&delete newFilters.properties,newFilters}}],hasNewKeys:[!1,{setHasNewKeys:function setHasNewKeys(){return!0}}],activeTab:[null,{navigateToTab:function navigateToTab(_,_ref2){return _ref2.tab}}],splitMergeModalShown:[!1,{setSplitMergeModalShown:function setSplitMergeModalShown(_,_ref3){return _ref3.shown}}],persons:{setPerson:function setPerson(state,_ref4){var person=_ref4.person;return _objectSpread(_objectSpread({},state),{},{results:state.results.map((function(p){return p.id===person.id?person:p}))})}}},selectors:{showSessionRecordings:[function(s){return[s.currentTeam]},function(currentTeam){return!!(null==currentTeam?void 0:currentTeam.session_recording_opt_in)}],currentTab:[function(s){return[s.activeTab,s.showSessionRecordings]},function(activeTab,showSessionRecordings){return activeTab?activeTab!==_types__WEBPACK_IMPORTED_MODULE_22__.r.SESSION_RECORDINGS||showSessionRecordings?activeTab:_types__WEBPACK_IMPORTED_MODULE_22__.r.EVENTS:showSessionRecordings?_types__WEBPACK_IMPORTED_MODULE_22__.r.SESSION_RECORDINGS:_types__WEBPACK_IMPORTED_MODULE_22__.r.EVENTS}],breadcrumbs:[function(s){return[s.person,kea_router__WEBPACK_IMPORTED_MODULE_19__.router.selectors.location]},function(person,location){var showPerson=person&&location.pathname.match(/\/person\/.+/),breadcrumbs=[{name:"Persons",path:scenes_urls__WEBPACK_IMPORTED_MODULE_24__.a.persons()}];return showPerson&&breadcrumbs.push({name:Object(scenes_persons_PersonHeader__WEBPACK_IMPORTED_MODULE_27__.b)(person)}),breadcrumbs}]},listeners:function listeners(_ref5){var _editProperty,actions=_ref5.actions,values=_ref5.values;return{deletePersonSuccess:function deletePersonSuccess(){Object(react_toastify__WEBPACK_IMPORTED_MODULE_21__.c)("Person deleted successfully"),actions.loadPersons(),kea_router__WEBPACK_IMPORTED_MODULE_19__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_24__.a.persons())},editProperty:(_editProperty=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.mark((function _callee(_ref6){var key,newValue,person,parsedValue,action,oldPropertyType,newPropertyType,attemptedParsedNumber,lowercaseValue,response;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(key=_ref6.key,newValue=_ref6.newValue,!(person=values.person)){_context.next=17;break}return parsedValue=newValue,oldPropertyType=null===person.properties[key]?"null":_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()(person.properties[key]),newPropertyType=_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()(newValue),attemptedParsedNumber=Number(newValue),Number.isNaN(attemptedParsedNumber)||"boolean"==typeof newValue||(parsedValue=attemptedParsedNumber,newPropertyType="number"),"true"!==(lowercaseValue="string"==typeof parsedValue&&parsedValue.toLowerCase())&&"false"!==lowercaseValue&&"null"!==lowercaseValue||(newPropertyType=null!==(parsedValue="true"===lowercaseValue||"null"===lowercaseValue&&null)?"boolean":"null"),Object.keys(person.properties).includes(key)?(person.properties[key]=parsedValue,action=void 0!==parsedValue?"updated":"removed"):(actions.setHasNewKeys(),person.properties=_objectSpread(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_17___default()({},key,parsedValue),person.properties),action="added"),actions.setPerson(person),_context.next=14,lib_api__WEBPACK_IMPORTED_MODULE_20__.a.update("api/person/".concat(person.id),person);case 14:response=_context.sent,actions.setPerson(response),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_23__.e.actions.reportPersonPropertyUpdated(action,Object.keys(person.properties).length,oldPropertyType,newPropertyType);case 17:case"end":return _context.stop()}}),_callee)}))),function editProperty(_x){return _editProperty.apply(this,arguments)}),navigateToCohort:function navigateToCohort(_ref7){var cohort=_ref7.cohort;kea_router__WEBPACK_IMPORTED_MODULE_19__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_24__.a.cohort(cohort.id))}}},loaders:function loaders(_ref8){var _deletePerson,_loadCohorts,_loadPerson,_loadPersons,values=_ref8.values,actions=_ref8.actions;return{persons:[{next:null,previous:null,results:[]},{loadPersons:(_loadPersons=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.mark((function _callee2(_ref9){var url;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return(url=_ref9.url)||(url="api/person/?".concat(Object(lib_utils__WEBPACK_IMPORTED_MODULE_26__.ub)(values.listFilters))),_context2.next=4,lib_api__WEBPACK_IMPORTED_MODULE_20__.a.get(url);case 4:return _context2.abrupt("return",_context2.sent);case 5:case"end":return _context2.stop()}}),_callee2)}))),function loadPersons(_x2){return _loadPersons.apply(this,arguments)})}],person:[null,{loadPerson:(_loadPerson=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.mark((function _callee3(_ref10){var id,response,person;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return id=_ref10.id,_context3.next=3,lib_api__WEBPACK_IMPORTED_MODULE_20__.a.get("api/person/?distinct_id=".concat(id));case 3:return(response=_context3.sent).results.length||kea_router__WEBPACK_IMPORTED_MODULE_19__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_24__.a.notFound()),(person=response.results[0])&&actions.reportPersonDetailViewed(person),_context3.abrupt("return",person);case 8:case"end":return _context3.stop()}}),_callee3)}))),function loadPerson(_x3){return _loadPerson.apply(this,arguments)}),setPerson:function setPerson(_ref11){return _ref11.person}}],cohorts:[null,{loadCohorts:(_loadCohorts=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.mark((function _callee4(){var _values$person,response;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,lib_api__WEBPACK_IMPORTED_MODULE_20__.a.get("api/person/cohorts/?person_id=".concat(null===(_values$person=values.person)||void 0===_values$person?void 0:_values$person.id));case 2:return response=_context4.sent,_context4.abrupt("return",response.results);case 4:case"end":return _context4.stop()}}),_callee4)}))),function loadCohorts(){return _loadCohorts.apply(this,arguments)})}],deletedPerson:[!1,{deletePerson:(_deletePerson=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.mark((function _callee5(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_13___default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(values.person){_context5.next=2;break}return _context5.abrupt("return",!1);case 2:return _context5.next=4,lib_api__WEBPACK_IMPORTED_MODULE_20__.a.delete("api/person/".concat(values.person.id));case 4:return _context5.abrupt("return",!0);case 5:case"end":return _context5.stop()}}),_callee5)}))),function deletePerson(){return _deletePerson.apply(this,arguments)})}]}},actionToUrl:function actionToUrl(_ref12){var values=_ref12.values,props=_ref12.props;return{setListFilters:function setListFilters(){if(props.syncWithUrl&&kea_router__WEBPACK_IMPORTED_MODULE_19__.router.values.location.pathname.indexOf("/persons")>-1)return["/persons",values.listFilters,void 0,{replace:!0}]},navigateToTab:function navigateToTab(){if(props.syncWithUrl&&kea_router__WEBPACK_IMPORTED_MODULE_19__.router.values.location.pathname.indexOf("/person")>-1)return[kea_router__WEBPACK_IMPORTED_MODULE_19__.router.values.location.pathname,kea_router__WEBPACK_IMPORTED_MODULE_19__.router.values.searchParams,_objectSpread(_objectSpread({},kea_router__WEBPACK_IMPORTED_MODULE_19__.router.values.hashParams),{},{activeTab:values.activeTab})]}}},urlToAction:function urlToAction(_ref13){var actions=_ref13.actions,values=_ref13.values,props=_ref13.props;return{"/persons":function persons(_ref14,searchParams){_babel_runtime_helpers_objectDestructuringEmpty__WEBPACK_IMPORTED_MODULE_12___default()(_ref14),props.syncWithUrl&&(actions.setListFilters(searchParams),values.persons.results.length||values.personsLoading||actions.loadPersons())},"/person/*":function person(_ref15,_ref16,_ref17){var _person=_ref15._,sessionRecordingId=_ref16.sessionRecordingId,activeTab=_ref17.activeTab;props.syncWithUrl&&(sessionRecordingId?values.showSessionRecordings?actions.navigateToTab(_types__WEBPACK_IMPORTED_MODULE_22__.r.SESSION_RECORDINGS):actions.navigateToTab(_types__WEBPACK_IMPORTED_MODULE_22__.r.EVENTS):activeTab&&values.activeTab!==activeTab&&actions.navigateToTab(activeTab),_person&&actions.loadPerson(_person))}}},events:function events(_ref18){var props=_ref18.props,actions=_ref18.actions;return{afterMount:function afterMount(){props.cohort&&"number"==typeof props.cohort&&(actions.setListFilters({cohort:props.cohort}),actions.loadPersons())}}}})},4342:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupsListLogic}));__webpack_require__(41),__webpack_require__(45),__webpack_require__(39),__webpack_require__(50);var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(69),__webpack_require__(11)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__),kea__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),lib_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(243),lib_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(29),scenes_urls__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(18),_models_groupsModel__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(147),groupsListLogic=Object(kea__WEBPACK_IMPORTED_MODULE_7__.kea)({path:["groups","groupsListLogic"],connect:{values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_11__.a,["currentTeamId"],_models_groupsModel__WEBPACK_IMPORTED_MODULE_13__.a,["groupTypes"],lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__.b,["groupsEnabled"]]},actions:function actions(){return{loadGroups:function loadGroups(url){return{url:url}},setTab:function setTab(tab){return{tab:tab}}}},loaders:function loaders(_ref){var _loadGroups,values=_ref.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:(_loadGroups=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function _callee(_ref2){var url;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(url=_ref2.url,!values.groupsEnabled){_context.next=6;break}return url=url||"api/projects/".concat(values.currentTeamId,"/groups/?group_type_index=").concat(values.currentTab),_context.next=5,lib_api__WEBPACK_IMPORTED_MODULE_8__.a.get(url);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}),_callee)}))),function loadGroups(_x){return _loadGroups.apply(this,arguments)})}]}},reducers:{currentTab:["-1",{setTab:function setTab(_,_ref3){return _ref3.tab}}]},selectors:{currentTabName:[function(s){return[s.currentTab,s.groupTypes]},function(currentTab,groupTypes){return"-1"===currentTab?"Persons":(null==groupTypes?void 0:groupTypes.length)?Object(lib_utils__WEBPACK_IMPORTED_MODULE_10__.h)(groupTypes[parseInt(currentTab)].group_type):""}],breadcrumbs:[function(s){return[s.currentTabName,s.currentTab]},function(currentTabName,currentTab){return[{name:currentTabName,path:scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.groups(currentTab)}]}]},actionToUrl:function actionToUrl(){return{setTab:function setTab(_ref4){var tab=_ref4.tab;return"-1"!==tab?scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.groups(tab):scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.persons()}}},urlToAction:function urlToAction(_ref5){var actions=_ref5.actions;return{"/groups/:id":function groupsId(_ref6){var id=_ref6.id;id&&(actions.setTab(id),actions.loadGroups())}}}})},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonPageHeader}));var index_esm=__webpack_require__(1),PageHeader=__webpack_require__(341),react=__webpack_require__(0),react_default=__webpack_require__.n(react),tabs=(__webpack_require__(87),__webpack_require__(34),__webpack_require__(106),__webpack_require__(554)),groupsAccessLogic=__webpack_require__(243),utils=__webpack_require__(10),groupsModel=__webpack_require__(147),groupsListLogic=__webpack_require__(4342);function GroupsTabs(){var setTab=Object(index_esm.useActions)(groupsListLogic.a).setTab,currentTab=Object(index_esm.useValues)(groupsListLogic.a).currentTab,groupTypes=Object(index_esm.useValues)(groupsModel.a).groupTypes,groupsAccessStatus=Object(index_esm.useValues)(groupsAccessLogic.b).groupsAccessStatus,showGroupsIntroductionPage=[groupsAccessLogic.a.HasAccess,groupsAccessLogic.a.HasGroupTypes,groupsAccessLogic.a.NoAccess].includes(groupsAccessStatus);return react_default.a.createElement(tabs.a,{activeKey:currentTab,onChange:function onChange(activeKey){return setTab(activeKey)}},react_default.a.createElement(tabs.a.TabPane,{tab:"Persons",key:"-1"}),showGroupsIntroductionPage?react_default.a.createElement(tabs.a.TabPane,{tab:"Introducing group analytics",key:"0"}):groupTypes.map((function(groupType){return react_default.a.createElement(tabs.a.TabPane,{tab:Object(utils.h)(groupType.group_type),key:groupType.group_type_index})})))}function PersonPageHeader(_ref){var hideGroupTabs=_ref.hideGroupTabs,showGroupsOptions=Object(index_esm.useValues)(groupsModel.a).showGroupsOptions;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PageHeader.a,{title:"Persons".concat(showGroupsOptions?" & groups":""),caption:"A catalog of your product's end users".concat(showGroupsOptions?" and groups":"",".")}),!hideGroupTabs&&showGroupsOptions&&react_default.a.createElement(GroupsTabs,null))}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}},4498:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Persons",(function(){return Persons}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),PersonsTable=__webpack_require__(2529),row=__webpack_require__(340),es_button=__webpack_require__(129),ClockCircleFilled=__webpack_require__(4499),ExportOutlined=__webpack_require__(4332),personsLogic=__webpack_require__(4335),slicedToArray=(__webpack_require__(81),__webpack_require__(292),__webpack_require__(13)),slicedToArray_default=__webpack_require__.n(slicedToArray),input=__webpack_require__(555),LemonRow=__webpack_require__(196),icons=__webpack_require__(35),PersonsSearch_PersonsSearch=function PersonsSearch(_ref){var _ref$autoFocus=_ref.autoFocus,autoFocus=void 0===_ref$autoFocus||_ref$autoFocus,_useActions=Object(index_esm.useActions)(personsLogic.a),loadPersons=_useActions.loadPersons,setListFilters=_useActions.setListFilters,listFilters=Object(index_esm.useValues)(personsLogic.a).listFilters,_useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];return Object(react.useEffect)((function(){setSearchTerm(listFilters.search||"")}),[]),react_default.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"min(100%, 24rem)"}},react_default.a.createElement(input.a.Search,{"data-attr":"persons-search",placeholder:"Search for persons",autoFocus:autoFocus,value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value),e.target.value||(setListFilters({search:void 0}),loadPersons())},enterButton:!0,allowClear:!0,onSearch:function onSearch(){setListFilters({search:searchTerm||void 0}),loadPersons()},style:{width:"100%"}}),react_default.a.createElement(LemonRow.a,{type:"stealth",tooltip:react_default.a.createElement(react_default.a.Fragment,null,"Search by email, name, ID, or even contents of properties. You can also search for persons who just ",react_default.a.createElement("i",null,"have"),' a property like so: "has:your_property".'),icon:react_default.a.createElement(icons.IconInfo,null)}))};try{PersonsSearch_PersonsSearch.displayName="PersonsSearch",PersonsSearch_PersonsSearch.__docgenInfo={description:"",displayName:"PersonsSearch",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"]={docgenInfo:PersonsSearch_PersonsSearch.__docgenInfo,name:"PersonsSearch",path:"frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"})}catch(__react_docgen_typescript_loader_error){}var PersonPageHeader=__webpack_require__(4360),PropertyFilters=__webpack_require__(430),types=__webpack_require__(36),LinkButton=__webpack_require__(332),utils=__webpack_require__(10),scene={component:Persons,logic:personsLogic.a,paramsToProps:function paramsToProps(){return{syncWithUrl:!0}}};function Persons(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},cohort=_ref.cohort,personsLogicProps={cohort:null==cohort?void 0:cohort.id,syncWithUrl:!cohort},_useActions=Object(index_esm.useActions)(Object(personsLogic.a)(personsLogicProps)),loadPersons=_useActions.loadPersons,setListFilters=_useActions.setListFilters,_useValues=Object(index_esm.useValues)(Object(personsLogic.a)(personsLogicProps)),persons=_useValues.persons,listFilters=_useValues.listFilters,personsLoading=_useValues.personsLoading;return react_default.a.createElement(index_esm.BindLogic,{logic:personsLogic.a,props:personsLogicProps},react_default.a.createElement("div",{className:"persons-list"},react_default.a.createElement(PersonPageHeader.a,{hideGroupTabs:!!cohort}),react_default.a.createElement(row.a,{align:"middle",justify:"space-between",className:"mb",style:{gap:"0.75rem"}},react_default.a.createElement(PersonsSearch_PersonsSearch,{autoFocus:!cohort}),react_default.a.createElement("div",null,cohort?react_default.a.createElement(LinkButton.a,{to:"/sessions?".concat(Object(utils.ub)({properties:[{key:"id",value:cohort.id,type:"cohort"}]})),target:"_blank"},react_default.a.createElement(ClockCircleFilled.a,null)," View sessions"):null,react_default.a.createElement(es_button.a,{type:"default",icon:react_default.a.createElement(ExportOutlined.a,null),href:"/api/person.csv"+(listFilters.cohort?"?cohort="+listFilters.cohort:""),style:{marginLeft:8}},"Export"))),react_default.a.createElement(PropertyFilters.b,{pageKey:"persons-list-page",propertyFilters:listFilters.properties,onChange:function onChange(properties){setListFilters({properties:properties}),loadPersons()},endpoint:"person",taxonomicGroupTypes:[types.a.PersonProperties,types.a.Cohorts],showConditionBadge:!0}),react_default.a.createElement(PersonsTable.a,{people:persons.results,loading:personsLoading,hasPrevious:!!persons.previous,hasNext:!!persons.next,loadPrevious:function loadPrevious(){return loadPersons(persons.previous)},loadNext:function loadNext(){return loadPersons(persons.next)}})))}try{Persons.displayName="Persons",Persons.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:"CohortType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:Persons.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(__react_docgen_typescript_loader_error){}}}]);