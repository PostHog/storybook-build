"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[5815],{"./frontend/src/lib/components/EventSelect/EventSelect.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>EventSelect});var lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_components_TaxonomicFilter_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),lib_lemon_ui_Popover_Popover__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/lemon-ui/Popover/Popover.tsx"),lib_lemon_ui_LemonSnack_LemonSnack__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSnack/LemonSnack.tsx"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const EventSelect=_ref=>{let{onChange,selectedEvents,addElement}=_ref;const[open,setOpen]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(!1),addElementWithToggle=react__WEBPACK_IMPORTED_MODULE_4__.cloneElement(addElement,{onClick:()=>setOpen(!open)});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"flex items-center flex-wrap gap-2",children:[selectedEvents.map((name=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_lemon_ui_LemonSnack_LemonSnack__WEBPACK_IMPORTED_MODULE_3__.L,{onClose:()=>(name=>{onChange(selectedEvents.filter((p=>p!==name)))})(name),children:name},name))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_lemon_ui_Popover_Popover__WEBPACK_IMPORTED_MODULE_2__.J2,{visible:open,onClickOutside:()=>setOpen(!1),overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_TaxonomicFilter_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_1__.I,{onChange:(_,value)=>{var name;name=value,onChange(Array.from(new Set(selectedEvents.concat([name])))),setOpen(!1)},taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_0__.t.Events]}),children:addElementWithToggle})]})};try{EventSelect.displayName="EventSelect",EventSelect.__docgenInfo={description:"",displayName:"EventSelect",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(names: string[]) => void"}},selectedEvents:{defaultValue:null,description:"",name:"selectedEvents",required:!0,type:{name:"string[]"}},addElement:{defaultValue:null,description:"",name:"addElement",required:!0,type:{name:"Element"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/EventSelect/EventSelect.tsx#EventSelect"]={docgenInfo:EventSelect.__docgenInfo,name:"EventSelect",path:"frontend/src/lib/components/EventSelect/EventSelect.tsx#EventSelect"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/lib/components/JSSnippet.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>JSSnippet});var lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function JSSnippet(){const{currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_2__.teamLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_0__.O,{language:lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_0__.S.HTML,children:`<script>\n    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);\n    posthog.init('${currentTeam?.api_token}',{api_host:'${window.location.origin}'})\n<\/script>`})}},"./frontend/src/lib/hooks/useAnchor.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>useAnchor});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");function useAnchor(hash){(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(hash&&document.getElementById(hash.substr(1))){const element=document.getElementById(hash.substr(1));if(!element)return;element.classList.add("highlighted"),window.requestAnimationFrame((()=>{element.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}))}}),[hash])}},"./frontend/src/scenes/project/Settings/SlackIntegration.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>SlackIntegration});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_integrationsLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/project/Settings/integrationsLogic.ts"),lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.ts"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),lib_components_UserActivityIndicator_UserActivityIndicator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),lib_lemon_ui_LemonDialog__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDialog/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function SlackIntegration(){const{slackIntegration,addToSlackButtonUrl}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_integrationsLogic__WEBPACK_IMPORTED_MODULE_2__.aL),{deleteIntegration}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_integrationsLogic__WEBPACK_IMPORTED_MODULE_2__.aL),[showSlackInstructions,setShowSlackInstructions]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),{user}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_8__.userLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("p",{children:["Integrate with Slack directly to get more advanced options such as"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("b",{children:"subscribing to an Insight or Dashboard"})," for regular reports to Slack channels of your choice. Guidance on integrating with Slack available"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("a",{href:"https://posthog.com/docs/product-analytics/subscriptions#slack-subscriptions",children:"in our docs"}),"."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{children:slackIntegration?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"rounded border flex justify-between items-center p-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"flex items-center gap-4 ml-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_5__.gx4,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:["Connected to ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("strong",{children:slackIntegration.config.team.name})," workspace"]}),slackIntegration.created_by?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_UserActivityIndicator_UserActivityIndicator__WEBPACK_IMPORTED_MODULE_6__.F,{at:slackIntegration.created_at,by:slackIntegration.created_by,prefix:"Updated",className:"text-muted"}):null]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_4__.LemonButton,{type:"secondary",status:"danger",onClick:()=>{lib_lemon_ui_LemonDialog__WEBPACK_IMPORTED_MODULE_9__.d.open({title:"Do you want to disconnect from Slack?",description:"This cannot be undone. PostHog resources configured to use Slack will remain but will stop working.",primaryButton:{children:"Yes, disconnect",status:"danger",onClick:()=>{slackIntegration?.id&&deleteIntegration(slackIntegration.id)}},secondaryButton:{children:"No thanks"}})},icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_5__.Fzz,{}),children:"Disconnect"})]}):addToSlackButtonUrl()?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("a",{href:addToSlackButtonUrl()||"",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("img",{alt:"Add to Slack",height:"40",width:"139",src:"https://platform.slack-edge.com/img/add_to_slack.png",srcSet:"https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x"})}):user?.is_staff?showSlackInstructions?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("h5",{children:"To get started"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("ol",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("li",{children:"Copy the below Slack App Template"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("li",{children:["Go to"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("a",{href:"https://api.slack.com/apps",target:"_blank",children:"Slack Apps"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("li",{children:"Create an App using the provided template"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("li",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_4__.Link,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("code",{children:'"SLACK_"'})," properties using the values from the"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("b",{children:"App Credentials"})," section of your Slack Apps"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_3__.O,{language:lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_3__.S.JSON,children:JSON.stringify((0,_integrationsLogic__WEBPACK_IMPORTED_MODULE_2__.q1)(),null,2)})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_4__.LemonButton,{type:"secondary",onClick:()=>setShowSlackInstructions(!0),children:"Show Instructions"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Slack. Please contact the instance owner to configure it."})})]})}},"./frontend/src/scenes/project/Settings/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProjectSettings:()=>ProjectSettings,scene:()=>scene});var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function IPCapture(){const{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),{currentTeam,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic);return(0,jsx_runtime.jsx)(src.LemonSwitch,{onChange:checked=>{updateCurrentTeam({anonymize_ips:checked})},checked:!!currentTeam?.anonymize_ips,disabled:currentTeamLoading,label:"Discard client IP data",bordered:!0})}var SessionRecording=__webpack_require__("./frontend/src/scenes/project/Settings/SessionRecording.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),lemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/lemonToast.tsx"),utils=__webpack_require__("./frontend/src/lib/utils.tsx");const webhookIntegrationLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","project","Settings","webhookIntegrationLogic"]),(0,lib.loaders)((_ref=>{let{actions}=_ref;return{testedWebhook:[null,{testWebhook:async webhook=>{if(webhook?.includes("discord.com/")&&(webhook=function adjustDiscordWebhook(webhookUrl){return webhookUrl.replace(/\/*(?:posthog|slack)?\/?$/,"/slack")}(webhook)),webhook)try{const response=await api.ZP.create("api/user/test_slack_webhook",{webhook});if(response.success)return webhook;actions.testWebhookFailure(response.error)}catch(error){actions.testWebhookFailure(error.message)}return null}}],removedWebhook:[null,{removeWebhook:()=>(teamLogic.teamLogic.actions.updateCurrentTeam({slack_incoming_webhook:""}),null)}]}})),(0,index_esm.selectors)({loading:[s=>[s.testedWebhookLoading,teamLogic.teamLogic.selectors.currentTeamLoading],(testedWebhookLoading,currentTeamLoading)=>testedWebhookLoading||currentTeamLoading]}),(0,index_esm.listeners)((()=>({testWebhookSuccess:async _ref2=>{let{testedWebhook}=_ref2;testedWebhook&&teamLogic.teamLogic.actions.updateCurrentTeam({slack_incoming_webhook:testedWebhook})},testWebhookFailure:_ref3=>{let{error}=_ref3;lemonToast.UJ.error((0,utils.fm)(error))}})))]);var featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),supportLogic=__webpack_require__("./frontend/src/lib/components/Support/supportLogic.ts");function WebhookIntegration(){const[webhook,setWebhook]=(0,react.useState)(""),{testWebhook,removeWebhook}=(0,index_esm.useActions)(webhookIntegrationLogic),{loading}=(0,index_esm.useValues)(webhookIntegrationLogic),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{featureFlags}=(0,index_esm.useValues)(featureFlagLogic.h),{openSupportForm}=(0,index_esm.useActions)(supportLogic.Pw);(0,react.useEffect)((()=>{currentTeam?.slack_incoming_webhook&&setWebhook(currentTeam?.slack_incoming_webhook)}),[currentTeam]);return featureFlags[constants.y8.WEBHOOKS_DENYLIST]?(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("p",{children:["Webhooks are currently not available for your organization."," ",(0,jsx_runtime.jsx)(src.Link,{onClick:()=>openSupportForm("support","apps"),children:"Contact support"})]})}):(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("p",{children:["Send notifications when selected actions are performed by users.",(0,jsx_runtime.jsx)("br",{}),"Guidance on integrating with webhooks available in our docs,"," ",(0,jsx_runtime.jsx)("a",{href:"https://posthog.com/docs/integrate/third-party/slack",children:"for Slack"})," and"," ",(0,jsx_runtime.jsx)("a",{href:"https://posthog.com/docs/integrations/microsoft-teams",children:"for Microsoft Teams"}),". Discord is also supported."]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4 max-w-160",children:[(0,jsx_runtime.jsx)(src.LemonInput,{value:webhook,onChange:setWebhook,type:"url",placeholder:currentTeam?.slack_incoming_webhook?"":"integration disabled - enter URL, then Test & Save",disabled:loading,onPressEnter:()=>testWebhook(webhook)}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",disabled:!webhook,onClick:e=>{e.preventDefault(),testWebhook(webhook)},loading,children:"Test & Save"}),(0,jsx_runtime.jsx)(src.LemonButton,{status:"danger",type:"secondary",onClick:e=>{e.preventDefault(),removeWebhook(),setWebhook("")},disabled:!currentTeam?.slack_incoming_webhook,children:"Clear & Disable"})]})]})]})}var useAnchor=__webpack_require__("./frontend/src/lib/hooks/useAnchor.ts"),kea_router_lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts");function DeleteProjectModal(_ref){let{isOpen,setIsOpen}=_ref;const{currentTeam,teamBeingDeleted}=(0,index_esm.useValues)(teamLogic.teamLogic),{deleteTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),[isDeletionConfirmed,setIsDeletionConfirmed]=(0,react.useState)(!1),isDeletionInProgress=!!currentTeam&&teamBeingDeleted?.id===currentTeam.id;return(0,jsx_runtime.jsxs)(src.LemonModal,{title:"Delete the project and its data?",onClose:isDeletionInProgress?void 0:()=>setIsOpen(!1),footer:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.LemonButton,{disabled:isDeletionInProgress,type:"secondary",onClick:()=>setIsOpen(!1),children:"Cancel"}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",disabled:!isDeletionConfirmed,loading:isDeletionInProgress,"data-attr":"delete-project-ok",status:"danger",onClick:currentTeam?()=>deleteTeam(currentTeam):void 0,children:`Delete ${currentTeam?currentTeam.name:"the current project"}`})]}),isOpen,children:[(0,jsx_runtime.jsxs)("p",{children:["Project deletion ",(0,jsx_runtime.jsx)("b",{children:"cannot be undone"}),". You will lose all data, ",(0,jsx_runtime.jsx)("b",{children:"including events"}),", related to the project."]}),(0,jsx_runtime.jsxs)("p",{children:["Please type ",(0,jsx_runtime.jsx)("strong",{children:currentTeam?currentTeam.name:"this project's name"})," to confirm."]}),(0,jsx_runtime.jsx)(src.LemonInput,{type:"text",onChange:value=>{currentTeam&&setIsDeletionConfirmed(value.toLowerCase()===currentTeam.name.toLowerCase())}})]})}function DangerZone(_ref2){let{isRestricted}=_ref2;const{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),[isModalVisible,setIsModalVisible]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"text-danger",children:[(0,jsx_runtime.jsx)("h2",{className:"text-danger subtitle",children:"Danger Zone"}),(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[!isRestricted&&(0,jsx_runtime.jsxs)("p",{className:"text-danger",children:["This is ",(0,jsx_runtime.jsx)("b",{children:"irreversible"}),". Please be certain."]}),(0,jsx_runtime.jsxs)(src.LemonButton,{status:"danger",type:"secondary",onClick:()=>setIsModalVisible(!0),"data-attr":"delete-project-button",icon:(0,jsx_runtime.jsx)(icons.Fzz,{}),disabled:isRestricted,children:["Delete ",currentTeam?.name||"the current project"]})]})]}),(0,jsx_runtime.jsx)(DeleteProjectModal,{isOpen:isModalVisible,setIsOpen:setIsModalVisible})]})}try{DeleteProjectModal.displayName="DeleteProjectModal",DeleteProjectModal.__docgenInfo={description:"",displayName:"DeleteProjectModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/DangerZone.tsx#DeleteProjectModal"]={docgenInfo:DeleteProjectModal.__docgenInfo,name:"DeleteProjectModal",path:"frontend/src/scenes/project/Settings/DangerZone.tsx#DeleteProjectModal"})}catch(__react_docgen_typescript_loader_error){}try{DangerZone.displayName="DangerZone",DangerZone.__docgenInfo={description:"",displayName:"DangerZone",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/DangerZone.tsx#DangerZone"]={docgenInfo:DangerZone.__docgenInfo,name:"DangerZone",path:"frontend/src/scenes/project/Settings/DangerZone.tsx#DangerZone"})}catch(__react_docgen_typescript_loader_error){}var PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),RestrictedArea=__webpack_require__("./frontend/src/lib/components/RestrictedArea.tsx"),PropertyFilters=__webpack_require__("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),eventUsageLogic=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),types=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),filterTestAccountDefaultsLogic=__webpack_require__("./frontend/src/scenes/project/Settings/filterTestAccountDefaultsLogic.ts");function TestAccountFiltersConfig(){const{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),{setTeamDefault}=(0,index_esm.useActions)(filterTestAccountDefaultsLogic.V),{reportTestAccountFiltersUpdated}=(0,index_esm.useActions)(eventUsageLogic.vx),{currentTeam,currentTeamLoading,testAccountFilterWarningLabels,testAccountFilterFrequentMistakes}=(0,index_esm.useValues)(teamLogic.teamLogic),{groupsTaxonomicTypes}=(0,index_esm.useValues)(groupsModel.$);return(0,jsx_runtime.jsxs)("div",{className:"mb-4 flex flex-col gap-2",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-4",children:[!!testAccountFilterWarningLabels&&testAccountFilterWarningLabels.length>0&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"warning",className:"m-2",children:[(0,jsx_runtime.jsx)("p",{children:"Positive filters here mean only events or persons matching these filters will be included. Internal and test account filters are normally excluding filters like does not equal or does not contain."}),(0,jsx_runtime.jsx)("p",{children:"Positive filters are currently set for the following properties: "}),(0,jsx_runtime.jsx)("ul",{className:"list-disc",children:testAccountFilterWarningLabels.map(((l,i)=>(0,jsx_runtime.jsx)("li",{className:"ml-4",children:l},i)))})]}),!!testAccountFilterFrequentMistakes&&testAccountFilterFrequentMistakes.length>0&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"warning",className:"m-2",children:[(0,jsx_runtime.jsx)("p",{children:"Your filter contains a setting that is likely to exclude or include unexpected users."}),(0,jsx_runtime.jsx)("ul",{className:"list-disc",children:testAccountFilterFrequentMistakes.map(((_ref,i)=>{let{key,type,fix}=_ref;return(0,jsx_runtime.jsxs)("li",{className:"ml-4",children:[key," is a ",type," property, but ",fix,"."]},i)}))})]}),currentTeam&&(0,jsx_runtime.jsx)(PropertyFilters.t,{pageKey:"testaccountfilters",propertyFilters:currentTeam?.test_account_filters,onChange:filters=>{updateCurrentTeam({test_account_filters:filters}),reportTestAccountFiltersUpdated(filters)},taxonomicGroupTypes:[types.t.EventProperties,types.t.PersonProperties,types.t.EventFeatureFlags,...groupsTaxonomicTypes,types.t.Cohorts,types.t.Elements]})]}),(0,jsx_runtime.jsx)(src.LemonSwitch,{onChange:checked=>{updateCurrentTeam({test_account_filters_default_checked:checked}),setTeamDefault(checked)},checked:!!currentTeam?.test_account_filters_default_checked,disabled:currentTeamLoading,label:"Enable this filter on all new insights",bordered:!0})]})}var preflightLogic=__webpack_require__("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),LemonSelectMultiple=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSelectMultiple/LemonSelectMultiple.tsx"),LemonDialog=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDialog/index.ts"),LemonSkeleton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSkeleton/index.ts");const tzLabel=(tz,offset)=>`${tz.replace(/\//g," / ").replace(/_/g," ")} (UTC${0===offset?"±":offset>0?"+":"-"}${Math.abs(Math.floor(offset))}:${(60*Math.abs(offset%1)).toString().padStart(2,"0")})`;function TimezoneConfig(){const{preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic),{currentTeam,timezone:currentTimezone,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic);if(!preflight?.available_timezones||!currentTeam)return(0,jsx_runtime.jsx)(LemonSkeleton.y,{className:"w-1/2"});const options=Object.entries(preflight.available_timezones).map((_ref=>{let[tz,offset]=_ref;return{key:tz,label:tzLabel(tz,offset)}}));return(0,jsx_runtime.jsx)("div",{className:"max-w-80",children:(0,jsx_runtime.jsx)(LemonSelectMultiple.E,{mode:"single",placeholder:"Select a time zone",loading:currentTeamLoading,disabled:currentTeamLoading,value:[currentTeam.timezone],onChange:newTimezone=>{if(!preflight?.available_timezones)throw new Error("No timezones are available");const currentOffset=preflight.available_timezones[currentTimezone],newOffset=preflight.available_timezones[newTimezone];currentOffset===newOffset?updateCurrentTeam({timezone:newTimezone}):LemonDialog.d.open({title:`Change time zone to ${tzLabel(newTimezone,newOffset)}?`,description:(0,jsx_runtime.jsxs)("p",{className:"max-w-120",children:["This time zone has an offset different from the current"," ",(0,jsx_runtime.jsx)("strong",{children:tzLabel(currentTimezone,currentOffset)}),", so queries will need to be recalculated. There will be a difference in date-based time ranges, and in day/week/month buckets."]}),primaryButton:{children:"Change time zone",onClick:()=>updateCurrentTeam({timezone:newTimezone})},secondaryButton:{children:"Cancel"}})},options,"data-attr":"timezone-select"})})}var skeleton=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/skeleton/index.js");function DataAttributes(){const{currentTeam,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),[value,setValue]=(0,react.useState)([]);return(0,react.useEffect)((()=>setValue(currentTeam?.data_attributes||[])),[currentTeam]),currentTeam?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("p",{children:["Specify a comma-separated list of"," ",(0,jsx_runtime.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes",rel:"noreferrer noopener",children:"data attributes"})," ","used in your app. For example: ",(0,jsx_runtime.jsx)("code",{children:"data-attr, data-custom-id, data-myref-*"}),". These attributes will be used when using the toolbar and defining actions to match unique elements on your pages. You can use ",(0,jsx_runtime.jsx)("code",{children:"*"})," as a wildcard."]}),(0,jsx_runtime.jsxs)("p",{children:["For example, when creating an action on your CTA button, the best selector could be something like:"," ",(0,jsx_runtime.jsx)("code",{children:"div > form > button:nth-child(2)"}),". However all buttons in your app have a"," ",(0,jsx_runtime.jsx)("code",{children:"data-custom-id"})," attribute. If you whitelist it here, the selector for your button will instead be ",(0,jsx_runtime.jsx)("code",{children:"button[data-custom-id='cta-button']"}),"."]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4 max-w-160",children:[(0,jsx_runtime.jsx)(LemonSelectMultiple.E,{mode:"multiple-custom",onChange:values=>setValue(values||[]),value,"data-attr":"data-attribute-select",placeholder:"data-attr, ...",loading:currentTeamLoading,disabled:currentTeamLoading}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:()=>updateCurrentTeam({data_attributes:value.map((s=>s.trim())).filter((a=>a))||[]}),children:"Save"})]})]}):(0,jsx_runtime.jsx)(skeleton.Z,{paragraph:{rows:0},active:!0})}var src_types=__webpack_require__("./frontend/src/types.ts"),teamMembersLogic=__webpack_require__("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectSpread2.js");const asn_CrownFilled={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zM512 734.2c-62.1 0-112.6-50.5-112.6-112.6S449.9 509 512 509s112.6 50.5 112.6 112.6S574.1 734.2 512 734.2zm0-160.9c-26.6 0-48.2 21.6-48.2 48.3 0 26.6 21.6 48.3 48.2 48.3s48.2-21.6 48.2-48.3c0-26.6-21.6-48.3-48.2-48.3z"}}]},name:"crown",theme:"filled"};var AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/components/AntdIcon.js"),CrownFilled_CrownFilled=function CrownFilled(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref,icon:asn_CrownFilled}))};CrownFilled_CrownFilled.displayName="CrownFilled";const icons_CrownFilled=react.forwardRef(CrownFilled_CrownFilled);var CloseCircleOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js");const asn_LogoutOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};var LogoutOutlined_LogoutOutlined=function LogoutOutlined(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref,icon:asn_LogoutOutlined}))};LogoutOutlined_LogoutOutlined.displayName="LogoutOutlined";const icons_LogoutOutlined=react.forwardRef(LogoutOutlined_LogoutOutlined);var userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),ProfilePicture=__webpack_require__("./frontend/src/lib/lemon-ui/ProfilePicture/index.ts"),permissioning=__webpack_require__("./frontend/src/lib/utils/permissioning.ts"),UserSelectItem=__webpack_require__("./frontend/src/lib/components/UserSelectItem.tsx"),kea_forms_lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),Field=__webpack_require__("./frontend/src/lib/forms/Field.tsx");function AddMembersModalWithButton(_ref){let{isRestricted}=_ref;const{addableMembers,allMembersLoading}=(0,index_esm.useValues)(teamMembersLogic.A),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),[isVisible,setIsVisible]=(0,react.useState)(!1);function closeModal(){setIsVisible(!1)}return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary","data-attr":"add-project-members-button",onClick:()=>{setIsVisible(!0)},icon:(0,jsx_runtime.jsx)(icons.SC9,{}),disabled:isRestricted,children:"Add members to project"}),(0,jsx_runtime.jsx)(src.LemonModal,{title:"",onClose:closeModal,isOpen:isVisible,simple:!0,children:(0,jsx_runtime.jsxs)(kea_forms_lib.Form,{logic:teamMembersLogic.A,formKey:"addMembers",enableFormOnSubmit:!0,children:[(0,jsx_runtime.jsx)(src.LemonModal.Header,{children:(0,jsx_runtime.jsx)("h3",{children:"Adding members"+(currentTeam?.name?` to project ${currentTeam.name}`:"")})}),(0,jsx_runtime.jsxs)(src.LemonModal.Content,{className:"space-y-2",children:[(0,jsx_runtime.jsx)(Field.g,{name:"userUuids",children:(0,jsx_runtime.jsx)(LemonSelectMultiple.E,{mode:"multiple",placeholder:"Organization members",loading:allMembersLoading,options:(0,UserSelectItem.W)(addableMembers.map((x=>x.user)),"uuid")})}),(0,jsx_runtime.jsx)(Field.g,{name:"level",label:"With project-specific access level",children:(0,jsx_runtime.jsx)(src.LemonSelect,{fullWidth:!0,options:permissioning.YR.map((teamMembershipLevel=>({value:teamMembershipLevel,label:permissioning.WS.get(teamMembershipLevel)})))})})]}),(0,jsx_runtime.jsxs)(src.LemonModal.Footer,{children:[(0,jsx_runtime.jsx)(src.LemonButton,{type:"secondary",onClick:closeModal,children:"Cancel"}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary","data-attr":"add-project-members-submit",htmlType:"submit",children:"Add members to project"})]})]})})]})}try{AddMembersModalWithButton.displayName="AddMembersModalWithButton",AddMembersModalWithButton.__docgenInfo={description:"",displayName:"AddMembersModalWithButton",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/AddMembersModal.tsx#AddMembersModalWithButton"]={docgenInfo:AddMembersModalWithButton.__docgenInfo,name:"AddMembersModalWithButton",path:"frontend/src/scenes/project/Settings/AddMembersModal.tsx#AddMembersModalWithButton"})}catch(__react_docgen_typescript_loader_error){}var Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip/index.ts");function TeamMembers(_ref){let{user}=_ref;const{allMembers,allMembersLoading}=(0,index_esm.useValues)(teamMembersLogic.A),columns=[{key:"user_profile_picture",render:function ProfilePictureRender(_,member){return(0,jsx_runtime.jsx)(ProfilePicture.Y,{name:member.user.first_name,email:member.user.email})},width:32},{title:"Name",key:"user_first_name",render:(_,member)=>member.user.uuid==user.uuid?`${member.user.first_name} (me)`:member.user.first_name,sorter:(a,b)=>a.user.first_name.localeCompare(b.user.first_name)},{title:"Email",key:"user_email",render:(_,member)=>member.user.email,sorter:(a,b)=>a.user.email.localeCompare(b.user.email)},{title:"Level",key:"level",render:function LevelRender(_,member){return function LevelComponent(member){var _membershipLevelToNam;const{user}=(0,index_esm.useValues)(userLogic.userLogic),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{changeUserAccessLevel}=(0,index_esm.useActions)(teamMembersLogic.A),myMembershipLevel=(0,teamLogic.R)(currentTeam)?currentTeam.effective_membership_level:null;if(!user)return null;const isImplicit=member.organization_level>=constants.Dk.Admin,levelName=null!==(_membershipLevelToNam=permissioning.WS.get(member.level))&&void 0!==_membershipLevelToNam?_membershipLevelToNam:`unknown (${member.level})`,allowedLevels=permissioning.YR.filter((listLevel=>!(0,permissioning.F9)(myMembershipLevel,user,member,listLevel))),possibleOptions=member.explicit_team_level?allowedLevels.concat([member.explicit_team_level]):allowedLevels,disallowedReason=isImplicit?`This user is a member of the project implicitly due to being an organization ${levelName}.`:(0,permissioning.F9)(myMembershipLevel,user,member,allowedLevels),levelButton=disallowedReason?(0,jsx_runtime.jsxs)("div",{className:"border rounded px-3 py-2 flex inline-flex items-center",children:[member.level===constants.Dk.Owner&&(0,jsx_runtime.jsx)(icons_CrownFilled,{className:"mr-2"}),levelName]}):(0,jsx_runtime.jsx)(src.LemonSelect,{dropdownMatchSelectWidth:!1,onChange:listLevel=>{null!==listLevel&&changeUserAccessLevel(member.user,listLevel)},options:possibleOptions.map((listLevel=>({value:listLevel,disabled:listLevel===member.explicit_team_level,label:(member.level,permissioning.WS.get(listLevel))}))),value:member.explicit_team_level});return disallowedReason?(0,jsx_runtime.jsx)(Tooltip.u,{title:disallowedReason,children:levelButton}):levelButton}(member)},sorter:(a,b)=>a.level-b.level},{title:"Joined At",dataIndex:"joined_at",key:"joined_at",render:(_,member)=>(0,utils.bo)(member.joined_at),sorter:(a,b)=>a.joined_at.localeCompare(b.joined_at)},{key:"actions",align:"center",render:function ActionsRender(_,member){return function ActionsComponent(member){const{user}=(0,index_esm.useValues)(userLogic.userLogic),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{removeMember}=(0,index_esm.useActions)(teamMembersLogic.A);return user&&(currentTeam?.effective_membership_level&&currentTeam.effective_membership_level>=constants.Dk.Admin||member.user.uuid===user.uuid)&&member.organization_level<teamMembersLogic.M?(0,jsx_runtime.jsx)(src.LemonButton,{status:"danger",onClick:function handleClick(){LemonDialog.d.open({title:`${member.user.uuid==user?.uuid?"Leave":`Remove ${member.user.first_name} (${member.user.email}) from`} project ${currentTeam?.name}?`,secondaryButton:{children:"Cancel"},primaryButton:{status:"danger",children:member.user.uuid==user?.uuid?"Leave":"Remove",onClick:()=>removeMember({member})}})},"data-attr":"delete-team-membership",children:member.user.uuid!==user.uuid?(0,jsx_runtime.jsx)(CloseCircleOutlined.Z,{title:"Remove from project"}):(0,jsx_runtime.jsx)(icons_LogoutOutlined,{title:"Leave project"})}):null}(member)}}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("h2",{className:"subtitle flex justify-between items-center",id:"members-with-project-access",children:["Members with Project Access",(0,jsx_runtime.jsx)(RestrictedArea.n,{Component:AddMembersModalWithButton,minimumAccessLevel:constants.Dk.Admin,scope:RestrictedArea.C.Project})]}),(0,jsx_runtime.jsx)(src.LemonTable,{columns,dataSource:allMembers,loading:allMembersLoading,"data-attr":"team-members-table"})]})}try{TeamMembers.displayName="TeamMembers",TeamMembers.__docgenInfo={description:"",displayName:"TeamMembers",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserType"}},team:{defaultValue:null,description:"",name:"team",required:!0,type:{name:"TeamType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/TeamMembers.tsx#TeamMembers"]={docgenInfo:TeamMembers.__docgenInfo,name:"TeamMembers",path:"frontend/src/scenes/project/Settings/TeamMembers.tsx#TeamMembers"})}catch(__react_docgen_typescript_loader_error){}var organizationLogic=__webpack_require__("./frontend/src/scenes/organizationLogic.tsx"),sceneLogic=__webpack_require__("./frontend/src/scenes/sceneLogic.ts"),LockOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/icons/LockOutlined.js");const asn_UnlockOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"};var UnlockOutlined_UnlockOutlined=function UnlockOutlined(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref,icon:asn_UnlockOutlined}))};UnlockOutlined_UnlockOutlined.displayName="UnlockOutlined";const icons_UnlockOutlined=react.forwardRef(UnlockOutlined_UnlockOutlined);function AccessControl(_ref){let{isRestricted}=_ref;const{currentOrganization,currentOrganizationLoading}=(0,index_esm.useValues)(organizationLogic.p),{currentTeam,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),{guardAvailableFeature}=(0,index_esm.useActions)(sceneLogic.k),{hasAvailableFeature}=(0,index_esm.useValues)(userLogic.userLogic),projectPermissioningEnabled=hasAvailableFeature(src_types.P$.PROJECT_BASED_PERMISSIONING)&&currentTeam?.access_control;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"access-control",children:"Access Control"}),(0,jsx_runtime.jsx)("p",{children:projectPermissioningEnabled?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["This project is"," ",(0,jsx_runtime.jsxs)("b",{children:[(0,jsx_runtime.jsx)(LockOutlined.Z,{style:{color:"var(--warning)",marginRight:5}}),"private"]}),". Only members listed below are allowed to access it."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["This project is"," ",(0,jsx_runtime.jsxs)("b",{children:[(0,jsx_runtime.jsx)(icons_UnlockOutlined,{style:{marginRight:5}}),"open"]}),". Any member of the organization can access it. To enable granular access control, make it private."]})}),(0,jsx_runtime.jsx)(src.LemonSwitch,{onChange:checked=>{guardAvailableFeature(src_types.P$.PROJECT_BASED_PERMISSIONING,"project-based permissioning","Set permissions granularly for each project. Make sure only the right people have access to protected data.",(()=>updateCurrentTeam({access_control:checked})))},checked:!!projectPermissioningEnabled,disabled:isRestricted||!currentOrganization||!currentTeam||currentOrganizationLoading||currentTeamLoading,bordered:!0,label:"Make project private"})]})}try{AccessControl.displayName="AccessControl",AccessControl.__docgenInfo={description:"",displayName:"AccessControl",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/AccessControl.tsx#AccessControl"]={docgenInfo:AccessControl.__docgenInfo,name:"AccessControl",path:"frontend/src/scenes/project/Settings/AccessControl.tsx#AccessControl"})}catch(__react_docgen_typescript_loader_error){}var PathCleanFilters=__webpack_require__("./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx");function PathCleaningFiltersConfig(){const{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic);return currentTeam?(0,jsx_runtime.jsx)(PathCleanFilters.f,{filters:currentTeam.path_cleaning_filters,setFilters:filters=>{updateCurrentTeam({path_cleaning_filters:filters})}}):null}var PersonPropertySelect=__webpack_require__("./frontend/src/lib/components/PersonPropertySelect/PersonPropertySelect.tsx"),EventSelect=__webpack_require__("./frontend/src/lib/components/EventSelect/EventSelect.tsx");function CorrelationConfig(){const{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),{currentTeam,funnelCorrelationConfig}=(0,index_esm.useValues)(teamLogic.teamLogic),handleChange=(excludedProperties,excludedEvents,excludedEventProperties)=>{if(currentTeam){const updatedConfig={...funnelCorrelationConfig};void 0!==excludedProperties&&(updatedConfig.excluded_person_property_names=excludedProperties),void 0!==excludedEventProperties&&(updatedConfig.excluded_event_property_names=excludedEventProperties),void 0!==excludedEvents&&(updatedConfig.excluded_event_names=excludedEvents),updatedConfig&&JSON.stringify(updatedConfig)!==JSON.stringify(funnelCorrelationConfig)&&updateCurrentTeam({correlation_config:updatedConfig})}};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"internal-users-filtering",children:"Correlation analysis exclusions"}),(0,jsx_runtime.jsx)("p",{children:"Globally exclude events or properties that do not provide relevant signals for your conversions."}),(0,jsx_runtime.jsx)(LemonBanner.V,{type:"info",children:"Correlation analysis can automatically surface relevant signals for conversion, and help you understand why your users dropped off and what makes them convert."}),currentTeam&&(0,jsx_runtime.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(icons.$bh,{className:"text-lg"}),"Excluded person properties"]}),(0,jsx_runtime.jsx)(PersonPropertySelect.N,{onChange:properties=>handleChange(properties),selectedProperties:funnelCorrelationConfig.excluded_person_property_names||[],addText:"Add exclusion"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(icons.CcT,{className:"text-lg"}),"Excluded events"]}),(0,jsx_runtime.jsx)(EventSelect._,{onChange:excludedEvents=>handleChange(void 0,excludedEvents),selectedEvents:funnelCorrelationConfig.excluded_event_names||[],addElement:(0,jsx_runtime.jsx)(src.LemonButton,{size:"small",type:"secondary",icon:(0,jsx_runtime.jsx)(icons.SC9,{}),sideIcon:null,children:"Add exclusion"})})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(icons.CcT,{className:"text-lg"}),"Excluded event properties"]}),(0,jsx_runtime.jsx)("div",{className:"max-w-160",children:(0,jsx_runtime.jsx)(LemonSelectMultiple.E,{mode:"multiple-custom",onChange:properties=>handleChange(void 0,void 0,properties),value:funnelCorrelationConfig.excluded_event_property_names||[]})})]})]})]})}var urls=__webpack_require__("./frontend/src/scenes/urls.ts"),LemonTag=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),AuthorizedUrlList=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts");const groupAnalyticsConfigLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","project","Settings","groupAnalyticsConfigLogic"]),(0,index_esm.connect)({values:[groupsModel.$,["groupTypes","groupTypesLoading"]],actions:[groupsModel.$,["updateGroupTypesMetadata"]]}),(0,index_esm.actions)({setSingular:(groupTypeIndex,value)=>({groupTypeIndex,value}),setPlural:(groupTypeIndex,value)=>({groupTypeIndex,value}),reset:!0,save:!0}),(0,index_esm.reducers)({singularChanges:[{},{setSingular:(state,_ref)=>{let{groupTypeIndex,value}=_ref;return{...state,[groupTypeIndex]:value}},reset:()=>({}),updateGroupTypesMetadataSuccess:()=>({})}],pluralChanges:[{},{setPlural:(state,_ref2)=>{let{groupTypeIndex,value}=_ref2;return{...state,[groupTypeIndex]:value}},reset:()=>({}),updateGroupTypesMetadataSuccess:()=>({})}]}),(0,index_esm.selectors)({hasChanges:[s=>[s.singularChanges,s.pluralChanges],(singularChanges,pluralChanges)=>Object.keys(singularChanges).length>0||Object.keys(pluralChanges).length>0]}),(0,index_esm.listeners)((_ref3=>{let{values,actions}=_ref3;return{save:async()=>{const{groupTypes,singularChanges,pluralChanges}=values,payload=Array.from(groupTypes.values()).map((groupType=>{const result={...groupType};return singularChanges[groupType.group_type_index]&&(result.name_singular=singularChanges[groupType.group_type_index]),pluralChanges[groupType.group_type_index]&&(result.name_plural=pluralChanges[groupType.group_type_index]),result}));actions.updateGroupTypesMetadata(payload)}}}))]);function GroupAnalytics(){const{groupTypes,groupTypesLoading,singularChanges,pluralChanges,hasChanges}=(0,index_esm.useValues)(groupAnalyticsConfigLogic),{setSingular,setPlural,reset,save}=(0,index_esm.useActions)(groupAnalyticsConfigLogic),{groupsAccessStatus}=(0,index_esm.useValues)(groupsAccessLogic.e);if(groupsAccessStatus===groupsAccessLogic.Q.NoAccess)return null;const columns=[{title:"Group type",tooltip:"As used in code",dataIndex:"group_type",key:"name",render:function RenderName(name){return name}},{title:"Singular name",key:"singular",render:function Render(_,groupType){return(0,jsx_runtime.jsx)(src.LemonInput,{value:singularChanges[groupType.group_type_index]||groupType.name_singular||groupType.group_type,onChange:e=>setSingular(groupType.group_type_index,e)})}},{title:"Plural name",key:"plural",render:function Render(_,groupType){return(0,jsx_runtime.jsx)(src.LemonInput,{value:pluralChanges[groupType.group_type_index]||groupType.name_plural||`${groupType.group_type}(s)`,onChange:e=>setPlural(groupType.group_type_index,e)})}}];return(0,jsx_runtime.jsxs)("div",{id:"group-analytics",children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",children:"Group Analytics"}),(0,jsx_runtime.jsx)("p",{children:"This project has access to group analytics. Below you can configure how various group types are displayed throughout the app."}),groupsAccessStatus!==groupsAccessLogic.Q.HasGroupTypes&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",className:"mb-4",children:["Group types will show up here after you send your first event associated with a group. Take a look at"," ",(0,jsx_runtime.jsx)(src.Link,{to:"https://posthog.com/manual/group-analytics",target:"_blank",children:"this guide"}),"for more information on getting started."]}),(0,jsx_runtime.jsx)(LemonTable.g,{columns,dataSource:Array.from(groupTypes.values()),loading:groupTypesLoading}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",disabled:!hasChanges,onClick:save,children:"Save"}),(0,jsx_runtime.jsx)(src.LemonButton,{disabled:!hasChanges,onClick:reset,children:"Cancel"})]}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"})]})}function PersonDisplayNameProperties(){const{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),[value,setValue]=(0,react.useState)([]);return(0,react.useEffect)((()=>setValue(currentTeam?.person_display_name_properties||constants.Z1)),[currentTeam]),currentTeam?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("p",{children:["Choose which properties of an identified Person will be used for their ",(0,jsx_runtime.jsx)("b",{children:"Display Name"}),". The first property to be found on the Person will be used. Drag the items to re-order the priority."]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(PersonPropertySelect.N,{onChange:properties=>setValue(properties),selectedProperties:value||[],addText:"Add",sortable:!0}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:()=>updateCurrentTeam({person_display_name_properties:value.map((s=>s.trim())).filter((a=>a))||[]}),children:"Save"})]})]}):(0,jsx_runtime.jsx)(LemonSkeleton.y,{className:"w-1/2"})}var SlackIntegration=__webpack_require__("./frontend/src/scenes/project/Settings/SlackIntegration.tsx"),authorizedUrlListLogic=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),JSSnippet=__webpack_require__("./frontend/src/lib/components/JSSnippet.tsx");function JSBookmarklet(_ref){let{team}=_ref;const initCall=`posthog.init('${team?.api_token}',{api_host:'${location.origin}', loaded: () => alert('PostHog is now tracking events!')})`,href=`javascript:(function()%7Bif%20(window.posthog)%20%7Balert(%22Error%3A%20PostHog%20already%20is%20installed%20on%20this%20site%22)%7D%20else%20%7B!function(t%2Ce)%7Bvar%20o%2Cn%2Cp%2Cr%3Be.__SV%7C%7C(window.posthog%3De%2Ce._i%3D%5B%5D%2Ce.init%3Dfunction(i%2Cs%2Ca)%7Bfunction%20g(t%2Ce)%7Bvar%20o%3De.split(%22.%22)%3B2%3D%3Do.length%26%26(t%3Dt%5Bo%5B0%5D%5D%2Ce%3Do%5B1%5D)%2Ct%5Be%5D%3Dfunction()%7Bt.push(%5Be%5D.concat(Array.prototype.slice.call(arguments%2C0)))%7D%7D(p%3Dt.createElement(%22script%22)).type%3D%22text%2Fjavascript%22%2Cp.async%3D!0%2Cp.src%3Ds.api_host%2B%22%2Fstatic%2Farray.js%22%2C(r%3Dt.getElementsByTagName(%22script%22)%5B0%5D).parentNode.insertBefore(p%2Cr)%3Bvar%20u%3De%3Bfor(void%200!%3D%3Da%3Fu%3De%5Ba%5D%3D%5B%5D%3Aa%3D%22posthog%22%2Cu.people%3Du.people%7C%7C%5B%5D%2Cu.toString%3Dfunction(t)%7Bvar%20e%3D%22posthog%22%3Breturn%22posthog%22!%3D%3Da%26%26(e%2B%3D%22.%22%2Ba)%2Ct%7C%7C(e%2B%3D%22%20(stub)%22)%2Ce%7D%2Cu.people.toString%3Dfunction()%7Breturn%20u.toString(1)%2B%22.people%20(stub)%22%7D%2Co%3D%22capture%20identify%20alias%20people.set%20people.set_once%20set_config%20register%20register_once%20unregister%20opt_out_capturing%20has_opted_out_capturing%20opt_in_capturing%20reset%20isFeatureEnabled%20onFeatureFlags%22.split(%22%20%22)%2Cn%3D0%3Bn%3Co.length%3Bn%2B%2B)g(u%2Co%5Bn%5D)%3Be._i.push(%5Bi%2Cs%2Ca%5D)%7D%2Ce.__SV%3D1)%7D(document%2Cwindow.posthog%7C%7C%5B%5D)%3B${encodeURIComponent(initCall)}%7D%7D)()`,{reportBookmarkletDragged}=(0,index_esm.useActions)(eventUsageLogic.vx);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("a",{href,className:"w-full text-primary-alt bg-primary-alt-highlight rounded-lg justify-center p-4 flex font-bold gap-2 items-center",onDragStart:reportBookmarkletDragged,children:[(0,jsx_runtime.jsx)(icons.sLA,{fontSize:"1.5rem"}),(0,jsx_runtime.jsx)("span",{className:"text-base",children:"PostHog Bookmarklet"})]}),(0,jsx_runtime.jsx)("p",{className:"text-center text-muted font-medium mt-2",children:"Drag to your bookmarks. Do not click on this link. The bookmarklet only works for the current browser session."})]})}try{JSBookmarklet.displayName="JSBookmarklet",JSBookmarklet.__docgenInfo={description:"",displayName:"JSBookmarklet",props:{team:{defaultValue:null,description:"",name:"team",required:!0,type:{name:"TeamBasicType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/JSBookmarklet.tsx#JSBookmarklet"]={docgenInfo:JSBookmarklet.__docgenInfo,name:"JSBookmarklet",path:"frontend/src/lib/components/JSBookmarklet.tsx#JSBookmarklet"})}catch(__react_docgen_typescript_loader_error){}var LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),CodeSnippet=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.ts"),FlaggedFeature=__webpack_require__("./frontend/src/lib/components/FlaggedFeature.tsx"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js");const autocaptureExceptionsLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","project","Settings","autocaptureExceptionsLogic"]),(0,index_esm.connect)({values:[teamLogic.teamLogic,["currentTeam"]],actions:[teamLogic.teamLogic,["updateCurrentTeam"]]}),(0,index_esm.actions)({setErrorsToIgnoreRules:newRules=>({newRules})}),(0,index_esm.reducers)({errorsToIgnoreRules:[(teamLogic.teamLogic.values.currentTeam?.autocapture_exceptions_errors_to_ignore||[]).join("\n"),{setErrorsToIgnoreRules:(_,_ref)=>{let{newRules}=_ref;return newRules}}]}),(0,index_esm.selectors)({currentTeamErrorsToIgnoreRules:[s=>[s.currentTeam],currentTeam=>(currentTeam?.autocapture_exceptions_errors_to_ignore||[]).join("\n")],rulesCharacters:[s=>[s.errorsToIgnoreRules],errorsToIgnoreRules=>errorsToIgnoreRules.length]}),(0,index_esm.listeners)((_ref2=>{let{actions,values}=_ref2;return{setErrorsToIgnoreRules:async(_ref3,breakpoint)=>{let{newRules}=_ref3;if(values.currentTeamErrorsToIgnoreRules===newRules.trim())return;await breakpoint(300);const updateRules=newRules.trim().split("\n").map((rule=>rule.trim())).filter((rule=>!!rule));actions.updateCurrentTeam({autocapture_exceptions_errors_to_ignore:updateRules})}}})),(0,index_esm.events)((()=>({})))]);var PropertyKeyInfo=__webpack_require__("./frontend/src/lib/components/PropertyKeyInfo.tsx");function AutocaptureSettings(){const{userLoading}=(0,index_esm.useValues)(userLogic.userLogic),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),{reportIngestionAutocaptureToggled,reportIngestionAutocaptureExceptionsToggled}=(0,index_esm.useActions)(eventUsageLogic.vx),{errorsToIgnoreRules,rulesCharacters}=(0,index_esm.useValues)(autocaptureExceptionsLogic),{setErrorsToIgnoreRules}=(0,index_esm.useActions)(autocaptureExceptionsLogic);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",children:"Autocapture"}),(0,jsx_runtime.jsxs)("p",{children:["Automagically capture front-end interactions like pageviews, clicks, and more when using our web JavaScript SDK."," "]}),(0,jsx_runtime.jsxs)("p",{children:["Autocapture is also available for React Native, where it has to be"," ",(0,jsx_runtime.jsx)(src.Link,{to:"https://posthog.com/docs/libraries/react-native#autocapture",target:"_blank",children:"configured directly in code"}),"."]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(src.LemonSwitch,{id:"posthog-autocapture-switch",onChange:checked=>{updateCurrentTeam({autocapture_opt_out:!checked}),reportIngestionAutocaptureToggled(!checked)},checked:!currentTeam?.autocapture_opt_out,disabled:userLoading,label:"Enable autocapture for web",bordered:!0}),(0,jsx_runtime.jsx)(FlaggedFeature.P,{flag:constants.y8.EXCEPTION_AUTOCAPTURE,children:(0,jsx_runtime.jsxs)("div",{className:"mt-4 border rounded px-6 py-4",children:[(0,jsx_runtime.jsx)(src.LemonSwitch,{id:"posthog-autocapture-exceptions-switch",onChange:checked=>{updateCurrentTeam({autocapture_exceptions_opt_in:checked}),reportIngestionAutocaptureExceptionsToggled(checked)},checked:!!currentTeam?.autocapture_exceptions_opt_in,disabled:userLoading,label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Enable exception autocapture ",(0,jsx_runtime.jsx)(src.LemonTag,{children:"ALPHA"})]}),bordered:!0}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",children:"Ignore errors"}),(0,jsx_runtime.jsx)("p",{children:"If you're experiencing a high volume of unhelpful errors, add regular expressions here to ignore them. This will ignore all errors that match, including those that are not autocaptured."}),(0,jsx_runtime.jsxs)("p",{children:["You can enter a regular expression that matches values of"," ",(0,jsx_runtime.jsx)(PropertyKeyInfo.T,{value:"$exception_message"}),' here to ignore them. One per line. For example, if you want to drop all errors that contain the word "bot", or you can enter "bot" here. Or if you want to drop all errors that are exactly "bot", you can enter "^bot$".']}),(0,jsx_runtime.jsx)("p",{children:"Only up to 300 characters of config are allowed here."}),(0,jsx_runtime.jsx)(src.LemonTextArea,{id:"posthog-autocapture-exceptions-dropped",value:errorsToIgnoreRules,onChange:setErrorsToIgnoreRules,disabled:!currentTeam?.autocapture_exceptions_opt_in}),(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("mt-2 text-xs text-right",rulesCharacters>300?"text-danger":"text-muted"),children:[rulesCharacters," / 300 characters"]})]})})]})]})}function IngestionInfo(_ref){let{loadingComponent}=_ref;const{currentTeam,currentTeamLoading,isTeamTokenResetAvailable}=(0,index_esm.useValues)(teamLogic.teamLogic),{resetToken}=(0,index_esm.useActions)(teamLogic.teamLogic);return currentTeam?.is_demo?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{id:"snippet",className:"subtitle",children:"Event ingestion"}),(0,jsx_runtime.jsx)("p",{children:"PostHog can ingest events from almost anywhere - JavaScript, Android, iOS, React Native, Node.js, Ruby, Go, and more."}),(0,jsx_runtime.jsxs)("p",{children:["Demo projects like this one can't ingest events, but you can"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/integrations",target:"_blank",children:"read about ingestion in our Docs"})," ","and use a non-demo project to ingest your own events."]})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{id:"snippet",className:"subtitle",children:"Web snippet"}),(0,jsx_runtime.jsxs)("p",{children:["PostHog's configurable web snippet allows you to (optionally) autocapture events, record user sessions, and more with no extra work. Place the following snippet in your website's HTML, ideally just above the"," ",(0,jsx_runtime.jsx)("code",{children:"</head>"})," tag."]}),(0,jsx_runtime.jsxs)("p",{children:["For more guidance, including on identifying users,"," ",(0,jsx_runtime.jsx)("a",{href:"https://posthog.com/docs/integrations/js-integration",children:"see PostHog Docs"}),"."]}),currentTeamLoading&&!currentTeam?loadingComponent:(0,jsx_runtime.jsx)(JSSnippet.g,{}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-6"}),(0,jsx_runtime.jsx)(AutocaptureSettings,{}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-6"}),(0,jsx_runtime.jsx)("p",{children:"Need to test PostHog on a live site without changing any code?"}),(0,jsx_runtime.jsx)("p",{children:"Just drag the bookmarklet below to your bookmarks bar, open the website you want to test PostHog on and click it. This will enable our tracking, on the currently loaded page only. The data will show up in this project."}),(0,jsx_runtime.jsx)("div",{children:(0,teamLogic.R)(currentTeam)&&(0,jsx_runtime.jsx)(JSBookmarklet,{team:currentTeam})}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-6"}),(0,jsx_runtime.jsx)("h2",{id:"custom-events",className:"subtitle",children:"Send custom events"}),"To send custom events ",(0,jsx_runtime.jsx)("a",{href:"https://posthog.com/docs/integrations",children:"visit PostHog Docs"})," and integrate the library for the specific language or platform you're using. We support Python, Ruby, Node, Go, PHP, iOS, Android, and more.",(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-6"}),(0,jsx_runtime.jsx)("h2",{id:"project-variables",className:"subtitle mb-4",children:"Project Variables"}),(0,jsx_runtime.jsx)("h3",{id:"project-api-key",className:"l3",children:"Project API Key"}),(0,jsx_runtime.jsxs)("p",{children:["You can use this write-only key in any one of"," ",(0,jsx_runtime.jsx)("a",{href:"https://posthog.com/docs/integrations",children:"our libraries"}),"."]}),(0,jsx_runtime.jsx)(CodeSnippet.O,{actions:isTeamTokenResetAvailable?[{icon:(0,jsx_runtime.jsx)(icons.tr8,{}),title:"Reset project API key",popconfirmProps:{title:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Reset the project's API key?"," ",(0,jsx_runtime.jsx)("b",{children:"This will invalidate the current API key and cannot be undone."})]}),okText:"Reset key",okType:"danger",placement:"left"},callback:resetToken}]:[],thing:"project API key",children:currentTeam?.api_token||""}),(0,jsx_runtime.jsx)("p",{children:"Write-only means it can only create new events. It can't read events or any of your other data stored with PostHog, so it's safe to use in public apps."}),(0,jsx_runtime.jsx)("h3",{id:"project-id",className:"l3 mt-4",children:"Project ID"}),(0,jsx_runtime.jsxs)("p",{children:["You can use this ID to reference your project in our ",(0,jsx_runtime.jsx)("a",{href:"https://posthog.com/docs/api",children:"API"}),"."]}),(0,jsx_runtime.jsx)(CodeSnippet.O,{thing:"project ID",children:String(currentTeam?.id||"")})]})}try{IngestionInfo.displayName="IngestionInfo",IngestionInfo.__docgenInfo={description:"",displayName:"IngestionInfo",props:{loadingComponent:{defaultValue:null,description:"",name:"loadingComponent",required:!0,type:{name:"Element"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/IngestionInfo.tsx#IngestionInfo"]={docgenInfo:IngestionInfo.__docgenInfo,name:"IngestionInfo",path:"frontend/src/scenes/project/Settings/IngestionInfo.tsx#IngestionInfo"})}catch(__react_docgen_typescript_loader_error){}let SettingValueType=function(SettingValueType){return SettingValueType.Boolean="boolean",SettingValueType.Text="text",SettingValueType.Number="number",SettingValueType}({});const AVAILABLE_EXTRA_SETTINGS=[{name:"Person on Events (Beta)",description:"We have updated our data model to also store person properties directly on events, making queries significantly faster. This means that person properties will no longer be \"timeless\", but rather point-in-time i.e. on filters we'll consider a person's properties at the time of the event, rather than at present time. This may cause data to change on some of your insights, but will be the default way we handle person properties going forward. For now, you can control whether you want this on or not, and should feel free to let us know of any concerns you might have. If you do enable this, you should see speed improvements of around 3-5x on average on most of your insights.",moreInfo:"https://github.com/PostHog/posthog/blob/75a2111f2c4f9183dd45f85c7b103c7b0524eabf/plugin-server/src/worker/ingestion/PoE.md",key:"poe_v2_enabled",valueType:SettingValueType.Boolean}];function ExtraSettingInput(_ref){let{defaultValue,type,settingKey}=_ref;const{currentTeam,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),[value,setValue]=(0,react.useState)(defaultValue);return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",style:{maxWidth:"40rem"},children:[(0,jsx_runtime.jsx)(src.LemonInput,{value,onChange:setValue,disabled:currentTeamLoading,type}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:()=>updateCurrentTeam({extra_settings:{...currentTeam?.extra_settings,[settingKey]:value}}),loading:currentTeamLoading,children:"Update"})]})}function ExtraTeamSettings(){const{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:AVAILABLE_EXTRA_SETTINGS.map((setting=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:`extra_settings_${setting.key}`,children:setting.name}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("p",{children:[setting.description,setting.moreInfo?(0,jsx_runtime.jsx)(src.Link,{to:setting.moreInfo,children:" More info."}):null]}),setting.valueType===SettingValueType.Boolean?(0,jsx_runtime.jsx)(src.LemonSwitch,{"data-attr":`extra_settings_${setting.key}`,onChange:checked=>{updateCurrentTeam({extra_settings:{...currentTeam?.extra_settings,[setting.key]:checked}})},label:`Enable ${setting.name}`,checked:!!currentTeam?.extra_settings?.[setting.key],bordered:!0}):(0,jsx_runtime.jsx)(ExtraSettingInput,{defaultValue:currentTeam?.extra_settings?.[setting.key],type:setting.valueType,settingKey:setting.key})]}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"})]})))})}function WeekStartConfig(){const{currentTeam,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic);return(0,jsx_runtime.jsx)(src.LemonSelect,{value:currentTeam?.week_start_day||0,onChange:value=>{LemonDialog.d.open({title:`Change the first day of the week to ${0===value?"Sunday":"Monday"}?`,description:"Queries grouped by week will need to be recalculated.",primaryButton:{children:"Change week definition",onClick:()=>updateCurrentTeam({week_start_day:value})},secondaryButton:{children:"Cancel"}})},loading:currentTeamLoading,options:[{value:0,label:"Sunday"},{value:1,label:"Monday"}]})}var SurveySettings=__webpack_require__("./frontend/src/scenes/surveys/SurveySettings.tsx");function Survey_SurveySettings(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{id:"surveys",className:"subtitle",children:"Surveys"}),(0,jsx_runtime.jsxs)("p",{children:["Get qualitative and quantitative data on how your users are doing. Surveys are found in the"," ",(0,jsx_runtime.jsx)(src.Link,{to:urls.j.surveys(),children:"surveys page"}),"."]}),(0,jsx_runtime.jsx)(SurveySettings.N,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"})]})}const scene={component:ProjectSettings};function DisplayName(){const{currentTeam,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic),{updateCurrentTeam}=(0,index_esm.useActions)(teamLogic.teamLogic),[name,setName]=(0,react.useState)(currentTeam?.name||"");return currentTeam?.is_demo?(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)("i",{children:"The demo project cannot be renamed."})}):(0,jsx_runtime.jsxs)("div",{className:"space-y-4",style:{maxWidth:"40rem"},children:[(0,jsx_runtime.jsx)(src.LemonInput,{value:name,onChange:setName,disabled:currentTeamLoading}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:()=>updateCurrentTeam({name}),disabled:!name||!currentTeam||name===currentTeam.name,loading:currentTeamLoading,children:"Rename Project"})]})}function ProjectSettings(){var _currentTeam$name;const{currentTeam,currentTeamLoading}=(0,index_esm.useValues)(teamLogic.teamLogic),{location}=(0,index_esm.useValues)(kea_router_lib.router),{user,hasAvailableFeature}=(0,index_esm.useValues)(userLogic.userLogic),hasAdvancedPaths=user?.organization?.available_features?.includes(src_types.P$.PATHS_ADVANCED);(0,useAnchor.W)(location.hash);const LoadingComponent=()=>(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(LemonSkeleton.y,{className:"w-1/2"}),(0,jsx_runtime.jsx)(LemonSkeleton.y,{repeat:3})]});return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:"Project settings",caption:`Organize your analytics within the project. These settings only apply to ${null!==(_currentTeam$name=currentTeam?.name)&&void 0!==_currentTeam$name?_currentTeam$name:"the current project"}.`}),(0,jsx_runtime.jsxs)("div",{className:"border rounded p-6",children:[(0,jsx_runtime.jsx)("h2",{id:"name",className:"subtitle mt-0",children:"Display name"}),currentTeamLoading&&!currentTeam?(0,jsx_runtime.jsx)(LoadingComponent,{}):(0,jsx_runtime.jsx)(DisplayName,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),currentTeamLoading&&!currentTeam?(0,jsx_runtime.jsx)(LoadingComponent,{}):(0,jsx_runtime.jsx)(IngestionInfo,{loadingComponent:(0,jsx_runtime.jsx)(LoadingComponent,{})}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"date-and-time",children:"Date and time"}),(0,jsx_runtime.jsx)("p",{children:"These settings affect how PostHog displays, buckets, and filters time-series data. You may need to refresh insights for new settings to apply."}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(src.LemonLabel,{id:"timezone",children:"Time zone"}),(0,jsx_runtime.jsx)(TimezoneConfig,{}),(0,jsx_runtime.jsx)(src.LemonLabel,{id:"timezone",children:"Week starts on"}),(0,jsx_runtime.jsx)(WeekStartConfig,{})]}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"internal-users-filtering",children:"Filter out internal and test users"}),(0,jsx_runtime.jsxs)("p",{children:["Increase the quality of your analytics results by filtering out events from internal sources, such as team members, test accounts, or development environments."," ",(0,jsx_runtime.jsx)("strong",{children:"The filters you apply here are added as extra filters when the toggle is switched on."})," ","So, if you apply a cohort, it means you will only match users in that cohort."]}),(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",children:['Events and recordings will still be ingested and saved, but they will be excluded from any queries where the "Filter out internal and test users" toggle is set. You can learn how to'," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/tutorials/fewer-unwanted-events",target:"_blank",children:"capture fewer events"})," ","or how to"," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/tutorials/limit-session-recordings",target:"_blank",children:"capture fewer recordings"})," ","in our docs."]}),(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("strong",{children:"Example filters"}),(0,jsx_runtime.jsxs)("ul",{className:"list-disc pl-4 mb-2",children:[(0,jsx_runtime.jsxs)("li",{children:['"',(0,jsx_runtime.jsx)("strong",{children:"Email"})," does not contain ",(0,jsx_runtime.jsx)("strong",{children:"yourcompany.com"}),"\" to exclude all events from your company's team members."]}),(0,jsx_runtime.jsxs)("li",{children:['"',(0,jsx_runtime.jsx)("strong",{children:"Host"})," does not contain ",(0,jsx_runtime.jsx)("strong",{children:"localhost"}),'" to exclude all events from local development environments.']})]})]}),(0,jsx_runtime.jsx)(TestAccountFiltersConfig,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)(CorrelationConfig,{}),hasAdvancedPaths&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsxs)("h2",{className:"subtitle",id:"path_cleaning_filtering",children:["Path cleaning rules",(0,jsx_runtime.jsx)(LemonTag.o,{type:"warning",className:"uppercase",style:{marginLeft:8},children:"Beta"})]}),(0,jsx_runtime.jsxs)("p",{children:["Make your ",(0,jsx_runtime.jsx)(Link.r,{to:urls.j.insightNew({insight:src_types.dw.PATHS}),children:"Paths"})," clearer by aliasing one or multiple URLs."," ",(0,jsx_runtime.jsxs)("i",{children:["Example: ",(0,jsx_runtime.jsx)("code",{children:"http://tenant-one.mydomain.com/accounts"})," and"," ",(0,jsx_runtime.jsx)("code",{children:"http://tenant-two.mydomain.com/accounts"})," can become a single"," ",(0,jsx_runtime.jsx)("code",{children:"/accounts"})," path."]})]}),(0,jsx_runtime.jsx)("p",{children:"Each rule is composed of an alias and a regex pattern. Any pattern in a URL or event name that matches the regex will be replaced with the alias. Rules are applied in the order that they're listed."}),(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)("b",{children:"Rules that you set here will be applied before wildcarding and other regex replacement if the toggle is switched on."})}),(0,jsx_runtime.jsx)(PathCleaningFiltersConfig,{})]}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)("div",{id:"authorized-urls"}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"urls",children:"Authorized URLs"}),(0,jsx_runtime.jsxs)("p",{children:["These are the URLs where the"," ",(0,jsx_runtime.jsxs)("b",{children:[(0,jsx_runtime.jsx)(Link.r,{to:urls.j.toolbarLaunch(),children:"Toolbar"})," will automatically launch"]})," ","(if you're logged in)."]}),(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("b",{children:"Domains and wildcard subdomains are allowed"})," (example: ",(0,jsx_runtime.jsx)("code",{children:"https://*.example.com"}),"). However, wildcarded top-level domains cannot be used (for security reasons)."]}),(0,jsx_runtime.jsx)(AuthorizedUrlList.t,{type:authorizedUrlListLogic.uw.TOOLBAR_URLS}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"attributes",children:"Data attributes"}),(0,jsx_runtime.jsx)(DataAttributes,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"person-display-name",children:"Person display name"}),(0,jsx_runtime.jsx)(PersonDisplayNameProperties,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"webhook",children:"Webhook integration"}),(0,jsx_runtime.jsx)(WebhookIntegration,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"slack",children:"Slack integration"}),(0,jsx_runtime.jsx)(SlackIntegration.C,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"})]}),(0,jsx_runtime.jsx)("h2",{className:"subtitle",id:"datacapture",children:"Data capture configuration"}),(0,jsx_runtime.jsx)(IPCapture,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)(SessionRecording.N,{}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),(0,jsx_runtime.jsx)(GroupAnalytics,{}),(0,jsx_runtime.jsx)(Survey_SurveySettings,{}),(0,jsx_runtime.jsx)(ExtraTeamSettings,{}),(0,jsx_runtime.jsx)(RestrictedArea.n,{Component:AccessControl,minimumAccessLevel:constants.Dk.Admin}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"}),currentTeam?.access_control&&hasAvailableFeature(src_types.P$.PROJECT_BASED_PERMISSIONING)&&(0,jsx_runtime.jsxs)(index_esm.BindLogic,{logic:teamMembersLogic.A,props:{team:currentTeam},children:[user&&(0,jsx_runtime.jsx)(TeamMembers,{user,team:currentTeam}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-6"})]}),(0,jsx_runtime.jsx)(RestrictedArea.n,{Component:DangerZone,minimumAccessLevel:constants.Dk.Admin,scope:RestrictedArea.C.Project})]})]})}}}]);