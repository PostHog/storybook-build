(window.webpackJsonp=window.webpackJsonp||[]).push([[284],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(H,E,e){"use strict";e.r(E),e.d(E,"SessionsRecordings",function(){return g}),e.d(E,"scene",function(){return X});var K=e("./node_modules/react/index.js"),n=e.n(K),M=e("./frontend/src/lib/components/PageHeader.tsx"),G=e("./frontend/src/scenes/teamLogic.tsx"),P=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),Y=e("./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx"),O=e("./frontend/src/types.ts"),J=e("./node_modules/antd/es/row/index.js"),Q=e("./node_modules/antd/es/space/index.js"),W=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),I=e("./frontend/src/lib/components/Popup/Popup.tsx"),b=e("./node_modules/core-js/modules/es.array.slice.js"),R=e("./node_modules/core-js/modules/es.array.iterator.js"),D=e("./node_modules/core-js/modules/es.object.to-string.js"),A=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),F=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),T;(function(r){r.SECONDS="seconds",r.MINUTES="minutes",r.HOURS="hours"})(T||(T={}));var x=Object(P.kea)({path:function(o){return["scenes","session-recordings","DurationFilterLogic",o]},key:function(o){return o.pageKey||"global"},props:{},actions:{setValue:function(o){return{value:o}},setIsOpen:function(o){return{isOpen:o}},setOperator:function(o){return{operator:o}}},reducers:function(o){var a,i,l=o.props;return{operator:[l==null||(a=l.initialFilter)===null||a===void 0?void 0:a.operator,{setOperator:function(c,t){var m=t.operator;return m}}],value:[l==null||(i=l.initialFilter)===null||i===void 0?void 0:i.value,{setValue:function(c,t){var m=t.value;return m}}],isOpen:[!1,{setIsOpen:function(c,t){var m=t.isOpen;return m}}]}},selectors:{durationString:[function(r){return[r.operator,r.value]},function(r,o){var a="";r===O.M.GreaterThan?a+="> ":a+="< ";var i=Object(F.b)(o||0);return a+=i.timeValue||0,i.timeValue===1?a+=" "+i.unit.slice(0,-1):a+=" "+i.unit,a}]},listeners:function(o){var a=o.props,i=o.values,l=function(c){var t=c.value,m=c.operator;a.onChange({operator:m||i.operator,value:t||i.value||0,type:"recording",key:"duration"})};return{setValue:function(c){var t=c.value;return l({value:t})},setOperator:function(c){var t=c.operator;return l({operator:t})}}}}),v=e("./frontend/@posthog/lemon-ui/src/index.ts");function u(r){var o=r.initialFilter,a=r.onChange,i=r.pageKey,l=x({initialFilter:o,onChange:a,pageKey:i}),d=Object(P.useActions)(l),c=d.setValue,t=d.setIsOpen,m=d.setOperator,S=Object(P.useValues)(l),Z=S.durationString,z=S.value,V=S.operator,j=S.isOpen;return n.a.createElement(I.a,{visible:j,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return t(!1)},overlay:n.a.createElement(J.a,null,n.a.createElement(Q.b,null,n.a.createElement(W.a,{operator:V,operators:[O.M.GreaterThan,O.M.LessThan],onChange:function(C){m(C)}}),n.a.createElement(F.a,{onChange:c,initialValue:z||0})))},n.a.createElement(v.LemonButton,{type:"secondary",status:"stealth",size:"small",onClick:function(){t(!0)}},Z))}try{u.displayName="DurationFilter",u.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"]={docgenInfo:u.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"})}catch(r){}var L=e("./frontend/src/lib/utils/eventUsageLogic.ts"),y=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),B=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),U=e("./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx");function h(r){var o=r.personUUID,a=r.isPersonPage,i=a===void 0?!1:a,l=Object(f.b)({personUUID:o}),d=Object(P.useValues)(l),c=d.fromDate,t=d.toDate,m=d.durationFilter,S=Object(P.useActions)(l),Z=S.setDateRange,z=S.setDurationFilter,V=S.reportRecordingsListFilterAdded;return n.a.createElement("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-4"},n.a.createElement(U.b,{personUUID:o,isPersonPage:i}),n.a.createElement("div",{className:"flex items-center gap-4"},n.a.createElement(y.a,{dateFrom:c!=null?c:"-7d",dateTo:t!=null?t:void 0,onChange:function(N,C){V(L.d.DateRange),Z(N,C!=null?C:void 0)},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]}),n.a.createElement("div",{className:"flex gap-2"},n.a.createElement(B.a,null,"Duration"),n.a.createElement(u,{onChange:function(N){V(L.d.Duration),z(N)},initialFilter:m,pageKey:i?"person-".concat(o):"session-recordings"}))))}try{h.displayName="SessionRecordingsTopBar",h.__docgenInfo={description:"",displayName:"SessionRecordingsTopBar",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsTopBar.tsx#SessionRecordingsTopBar"]={docgenInfo:h.__docgenInfo,name:"SessionRecordingsTopBar",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsTopBar.tsx#SessionRecordingsTopBar"})}catch(r){}var $=e("./frontend/src/lib/components/AlertMessage/index.ts");function g(){var r=Object(P.useValues)(G.a),o=r.currentTeam;return n.a.createElement("div",null,n.a.createElement(M.a,{title:n.a.createElement("div",null,"Recordings")}),o&&!(o!=null&&o.session_recording_opt_in)?n.a.createElement("div",{className:"mb-4"},n.a.createElement($.a,{type:"info"},"Session recordings are currently disabled for this project. To use this feature, please go to your ",n.a.createElement(v.Link,{to:"".concat(s.a.projectSettings(),"#recordings")},"project settings")," and enable it.")):null,n.a.createElement(h,null),n.a.createElement(Y.a,{key:"global"}))}var X={component:g,logic:f.b}},"./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx":function(H,E,e){"use strict";e.d(E,"a",function(){return g});var K=e("./node_modules/core-js/modules/es.regexp.exec.js"),n=e("./node_modules/core-js/modules/es.string.split.js"),M=e("./node_modules/core-js/modules/es.array.concat.js"),G=e("./node_modules/core-js/modules/es.array.map.js"),P=e("./node_modules/react/index.js"),s=e.n(P),f=e("./node_modules/kea/lib/index.esm.js"),Y=e("./frontend/src/lib/utils.tsx"),O=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),J=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Q=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),W=e.n(Q),I=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.scss"),b=e.n(I),R={};R.insert="head",R.singleton=!1;var D=W()(b.a,R),A=b.a.locals||{},F=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),T=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),x=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),v=e("./frontend/@posthog/lemon-ui/src/index.ts"),u=e("./frontend/src/lib/components/icons.tsx"),L=e("./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx"),y=e("./node_modules/clsx/dist/clsx.m.js"),B=e("./frontend/src/lib/components/Tooltip.tsx"),U=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),h=e("./frontend/src/lib/components/LemonTable/LemonTableLoader.tsx"),$=function(r){var o=r.duration,a=Object(Y.n)(o),i=a.split(":");return s.a.createElement("span",{className:"flex items-center gap-1"},s.a.createElement(u.IconSchedule,{className:"text-lg"}),s.a.createElement("span",null,s.a.createElement("span",{className:Object(y.a)(i[0]==="00"&&"opacity-50")},i[0],":"),s.a.createElement("span",{className:Object(y.a)({"opacity-50":i[0]==="00"&&i[1]==="00"})},i[1],":"),i[2]))};function g(X){var r=X.personUUID,o=Object(O.b)({personUUID:r}),a=Object(f.useValues)(o),i=a.sessionRecordings,l=a.sessionRecordingsResponseLoading,d=a.hasNext,c=a.hasPrev,t=a.activeSessionRecording,m=a.offset,S=Object(f.useActions)(o),Z=S.setSelectedRecordingId,z=S.loadNext,V=S.loadPrev,j=Object(P.useRef)(null),N=function(k){var w;Z(k.id);var _=j!=null&&(w=j.current)!==null&&w!==void 0&&w.offsetTop?j.current.offsetTop-8:0;window.scrollY>_&&window.scrollTo({left:0,top:_,behavior:"smooth"})},C=m+(l?O.a:i.length),q=C?s.a.createElement("div",{className:"flex items-center gap-1"},s.a.createElement("span",null,"".concat(m+1," - ").concat(C)),s.a.createElement(v.LemonButton,{icon:s.a.createElement(u.IconChevronLeft,null),status:"stealth",size:"small",disabled:!c,onClick:function(){V(),window.scrollTo(0,0)}}),s.a.createElement(v.LemonButton,{icon:s.a.createElement(u.IconChevronRight,null),status:"stealth",disabled:!d,size:"small",onClick:function(){z(),window.scrollTo(0,0)}})):null;return s.a.createElement("div",{ref:j,className:"SessionRecordingsPlaylist","data-attr":"session-recordings-playlist"},s.a.createElement("div",{className:"SessionRecordingsPlaylist__left-column space-y-4"},s.a.createElement(L.a,{personUUID:r}),s.a.createElement("div",{className:"w-full overflow-hidden border rounded"},s.a.createElement("div",{className:"relative flex justify-between items-center bg-mid py-3 px-4 border-b"},s.a.createElement("span",{className:"font-bold uppercase text-xs my-1 tracking-wide"},"Recent Recordings"),q,s.a.createElement(h.a,{loading:l})),i.length?s.a.createElement("ul",{className:Object(y.a)(l?"opacity-50":"")},i.map(function(p,k){return s.a.createElement("li",{key:p.id,className:Object(y.a)("p-2 px-4 cursor-pointer",(t==null?void 0:t.id)===p.id?"bg-primary-highlight font-semibold":"",k!==0&&"border-t"),onClick:function(){return N(p)}},s.a.createElement("div",{className:"flex justify-between items-center"},s.a.createElement("div",{className:"truncate font-medium text-primary"},Object(J.b)(p.person,25)),!p.viewed&&s.a.createElement(B.a,{title:"Indicates the recording has not been watched yet"},s.a.createElement("div",{className:"w-2 h-2 rounded bg-primary-light","aria-label":"unwatched-recording-label"}))),s.a.createElement("div",{className:"flex justify-between"},s.a.createElement(F.b,{time:p.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"}),s.a.createElement($,{duration:p.recording_duration})))})):l?s.a.createElement(s.a.Fragment,null,Object(Y.ub)(O.a).map(function(p){return s.a.createElement("div",{key:p,className:"p-4 space-y-2 border-b"},s.a.createElement(U.a,{className:"w-1/2"}),s.a.createElement(U.a,{className:"w-1/3"}))})):s.a.createElement("p",{className:"text-muted-alt m-4"},"No matching recordings found")),s.a.createElement("div",{className:"flex justify-between items-center"},s.a.createElement(v.LemonButton,{icon:s.a.createElement(u.IconChevronLeft,null),type:"secondary",disabled:!c,onClick:function(){V(),window.scrollTo(0,0)}},"Previous"),s.a.createElement("span",null,"".concat(m+1," - ").concat(C)),s.a.createElement(v.LemonButton,{icon:s.a.createElement(u.IconChevronRight,null),type:"secondary",disabled:!d,onClick:function(){z(),window.scrollTo(0,0)}},"Next"))),s.a.createElement("div",{className:"SessionRecordingsPlaylist__right-column"},t!=null&&t.id?s.a.createElement("div",{className:"border rounded h-full"},s.a.createElement(T.a,{playerKey:"playlist",sessionRecordingId:t==null?void 0:t.id,matching:t==null?void 0:t.matching_events,recordingStartTime:t?t.start_time:void 0})):s.a.createElement("div",{className:"mt-20"},s.a.createElement(x.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonTo:"https://posthog.com/docs/user-guides/recordings"}))))}try{g.displayName="SessionRecordingsPlaylist",g.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:g.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(X){}},"./frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx":function(H,E,e){"use strict";e.d(E,"a",function(){return I}),e.d(E,"b",function(){return b});var K=e("./node_modules/react/index.js"),n=e.n(K),M=e("./node_modules/kea/lib/index.esm.js"),G=e("./frontend/src/scenes/session-recordings/sessionRecordingsListLogic.ts"),P=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),s=e("./frontend/src/lib/utils/eventUsageLogic.ts"),f=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Y=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),O=e("./frontend/src/lib/components/icons.tsx"),J=e("./frontend/src/lib/components/LemonButton/index.ts"),Q=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),W=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx");function I(R){var D=R.personUUID,A=R.isPersonPage,F=A===void 0?!1:A,T=Object(G.b)({personUUID:D}),x=Object(M.useValues)(T),v=x.entityFilters,u=x.propertyFilters,L=x.filtersEnabled,y=Object(M.useActions)(T),B=y.setEntityFilters,U=y.setPropertyFilters,h=y.reportRecordingsListFilterAdded;return n.a.createElement(n.a.Fragment,null,L?n.a.createElement("div",{className:"flex-1 border rounded p-4"},n.a.createElement("div",{className:"space-y-2"},n.a.createElement(W.a,{info:"Show recordings where all of the events or actions listed below happen."},"Filter by events and actions"),n.a.createElement(P.a,{bordered:!0,filters:v,setFilters:function(g){h(s.d.EventAndAction),B(g)},typeKey:F?"person-".concat(D):"session-recordings",mathAvailability:Q.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[f.a.Actions,f.a.Events],propertiesTaxonomicGroupTypes:[f.a.EventProperties,f.a.EventFeatureFlags,f.a.Elements],propertyFiltersPopover:!0})),!F&&n.a.createElement("div",{className:"mt-4 space-y-2"},n.a.createElement(W.a,{info:"Show recordings by persons who match the set criteria"},"Filter by persons and cohorts"),n.a.createElement(Y.a,{pageKey:F?"person-".concat(D):"session-recordings",taxonomicGroupTypes:[f.a.PersonProperties,f.a.Cohorts],propertyFilters:u,onChange:function(g){h(s.d.PersonAndCohort),U(g)}}))):void 0)}function b(R){var D,A,F=R.personUUID,T=R.isPersonPage,x=Object(G.b)({personUUID:F}),v=Object(M.useValues)(x),u=v.entityFilters,L=v.propertyFilters,y=v.filtersEnabled,B=Object(M.useActions)(x),U=B.setFiltersEnabled,h=(((D=u.actions)===null||D===void 0?void 0:D.length)||0)+(((A=u.events)===null||A===void 0?void 0:A.length)||0)+((L==null?void 0:L.length)||0);return n.a.createElement(J.a,{type:"secondary",size:"small",icon:n.a.createElement(O.IconWithCount,{count:h},n.a.createElement(O.IconFilter,null)),onClick:function(){if(U(!y),T){var g=document.querySelectorAll(".entity-filter-row button");g.length>0&&g[0].click()}}},y?"Hide filters":"Filter recordings")}try{I.displayName="SessionRecordingsFilters",I.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"]={docgenInfo:I.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"})}catch(R){}try{b.displayName="SessionRecordingsFiltersToggle",b.__docgenInfo={description:"",displayName:"SessionRecordingsFiltersToggle",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFiltersToggle"]={docgenInfo:b.__docgenInfo,name:"SessionRecordingsFiltersToggle",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFiltersToggle"})}catch(R){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.scss":function(H,E,e){var K=e("./node_modules/css-loader/dist/runtime/api.js");E=K(!1),E.push([H.i,".SessionRecordingsPlaylist{display:flex;flex-direction:column-reverse;gap:1rem}@media screen and (min-width:768px){.SessionRecordingsPlaylist{flex-direction:row;justify-content:flex-start}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{flex-shrink:0}@media screen and (min-width:768px){.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{width:30%;min-width:350px;max-width:500px}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column{flex:1}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column .SessionRecordingsPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),H.exports=E}}]);
