(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(Y,x,e){"use strict";e.r(x),e.d(x,"SessionsRecordings",function(){return k}),e.d(x,"scene",function(){return pe});var S=e("./node_modules/core-js/modules/es.array.map.js"),F=e("./node_modules/core-js/modules/es.object.values.js"),C=e("./frontend/src/lib/components/PageHeader.tsx"),T=e("./frontend/src/scenes/teamLogic.tsx"),i=e("./node_modules/kea/lib/index.esm.js"),b=e("./frontend/src/scenes/urls.ts"),K=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),M=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),A=e("./frontend/src/lib/components/AlertMessage/index.ts"),p=e("./frontend/@posthog/lemon-ui/src/index.ts"),q=e("./frontend/src/lib/logic/featureFlagLogic.ts"),_=e("./frontend/src/lib/constants.tsx"),$=e("./node_modules/antd/es/tabs/index.js"),h=e("./frontend/src/types.ts"),ee=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),se=e.n(ee),be=e("./node_modules/core-js/modules/es.symbol.js"),he=e("./node_modules/core-js/modules/es.symbol.description.js"),Oe=e("./node_modules/core-js/modules/es.regexp.exec.js"),Pe=e("./node_modules/core-js/modules/es.string.search.js"),xe=e("./node_modules/core-js/modules/es.array.concat.js"),ne=e("./node_modules/react/index.js"),Se=e("./node_modules/core-js/modules/es.object.keys.js"),Fe=e("./node_modules/core-js/modules/es.array.filter.js"),Re=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Le=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Ce=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),te=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),X=e.n(te),re=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),H=e.n(re),oe=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),ae=e.n(oe),ie=e("./node_modules/@babel/runtime/regenerator/index.js"),R=e.n(ie),Te=e("./node_modules/core-js/modules/es.array.iterator.js"),Ae=e("./node_modules/core-js/modules/es.object.to-string.js"),Ie=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ne=e("./node_modules/core-js/modules/es.array.find-index.js"),Ee=e("./node_modules/core-js/modules/es.string.starts-with.js"),Be=e("./node_modules/core-js/modules/es.array.slice.js"),le=e("./node_modules/kea-loaders/lib/index.js"),J=e("./frontend/src/lib/api.ts"),L=e("./frontend/src/lib/utils.tsx"),I=e("./node_modules/kea-router/lib/index.js");function W(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,o)}return n}function N(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(o){H()(r,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(n,o))})}return r}var E=30,de={createdBy:"All users",page:1,dateFrom:"all"},ce=Object(i.kea)([Object(i.path)(["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic"]),Object(i.props)({}),Object(i.key)(function(r){return r.tab}),Object(i.actions)(function(){return{setSavedPlaylistsFilters:function(t){return{filters:t}},loadPlaylists:!0,updatePlaylist:function(t,n){return{shortId:t,playlist:n}}}}),Object(i.reducers)(function(r){return ae()(r),{filters:[de,{setSavedPlaylistsFilters:function(n,o){var l=o.filters;return Object(L.ob)(N(N(N({},n||{}),l),"page"in l?{}:{page:1}))}}]}}),Object(le.loaders)(function(r){var t=r.values;return{playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:function(){var n=X()(R.a.mark(function l(c,u){var v,f,a,m,g,O;return R.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(t.playlists.filters===null){j.next=3;break}return j.next=3,u(300);case 3:return a=N({},t.filters),m=a.createdBy==="All users"?void 0:a.createdBy,g={limit:E,offset:Math.max(0,(a.page-1)*E),order:(v=a.order)!==null&&v!==void 0?v:"-last_modified_at",created_by:m!=null?m:void 0,search:a.search||void 0,date_from:a.dateFrom&&a.dateFrom!="all"?a.dateFrom:void 0,date_to:(f=a.dateTo)!==null&&f!==void 0?f:void 0,pinned:a.pinned?!0:void 0},j.next=8,J.b.recordings.listPlaylists(Object(L.Fb)(g));case 8:return O=j.sent,j.abrupt("return",O);case 10:case"end":return j.stop()}},l)}));function o(l,c){return n.apply(this,arguments)}return o}(),updatePlaylist:function(){var n=X()(R.a.mark(function l(c){var u,v,f,a;return R.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=c.shortId,v=c.playlist,g.next=3,J.b.recordings.updatePlaylist(u,v);case 3:return f=g.sent,a=t.playlists.results.findIndex(function(O){return O.short_id===u}),a>-1&&(t.playlists.results[a]=f),g.abrupt("return",t.playlists);case 7:case"end":return g.stop()}},l)}));function o(l){return n.apply(this,arguments)}return o}()}}}),Object(i.listeners)(function(r){var t=r.actions;return{setSavedPlaylistsFilters:function(){t.loadPlaylists()}}}),Object(i.selectors)(function(r){var t=r.actions;return{sorting:[function(n){return[n.filters]},function(n){return n.order?n.order.startsWith("-")?{columnKey:n.order.slice(1),order:-1}:{columnKey:n.order,order:1}:{columnKey:"last_modified_at",order:-1}}],pagination:[function(n){return[n.filters,n.playlists]},function(n,o){return{controlled:!0,pageSize:E,currentPage:n.page,entryCount:o.count,onBackward:o.previous?function(){return t.setSavedPlaylistsFilters({page:n.page-1})}:void 0,onForward:o.next?function(){return t.setSavedPlaylistsFilters({page:n.page+1})}:void 0}}]}}),Object(I.actionToUrl)(function(r){var t=r.values,n=function(){if(I.router.values.location.pathname===b.a.sessionRecordings(h.X.Playlists)){var l=t.filters,c=Object(L.ob)(I.router.values.searchParams);if(!Object(L.qb)(l,c))return[b.a.sessionRecordings(h.X.Playlists),l,{},{replace:!1}]}};return{loadPlaylists:n,setSavedPlaylistsFilters:n}}),Object(I.urlToAction)(function(r){var t=r.actions,n=r.values;return H()({},b.a.sessionRecordings(h.X.Playlists),function(){var o=X()(R.a.mark(function l(c,u){var v,f;return R.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:v=n.filters,f=Object(L.ob)(u),Object(L.qb)(v,f)||t.setSavedPlaylistsFilters(f);case 3:case"end":return m.stop()}},l)}));return function(l,c){return o.apply(this,arguments)}}())}),Object(i.afterMount)(function(r){var t=r.actions;t.loadPlaylists()})]),Z=e("./node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),Q=e("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),ue=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),me=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),je=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),fe=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),ve=e("./frontend/@posthog/apps-common/src/index.ts"),s=e("./node_modules/react/jsx-runtime.js");function B(r){var t=r.tab,n=ce({tab:t}),o=Object(i.useValues)(n),l=o.playlists,c=o.playlistsLoading,u=o.filters,v=o.sorting,f=o.pagination,a=Object(i.useActions)(n),m=a.setSavedPlaylistsFilters,g=a.updatePlaylist,O=Object(i.useValues)(fe.a),V=O.meFirstMembers,j=[{width:0,dataIndex:"pinned",render:function(d,P){var U=P.short_id;return Object(s.jsx)(p.LemonButton,{size:"small",status:"primary-alt",onClick:function(){return g(U,{pinned:!d})},children:d?Object(s.jsx)(Z.a,{}):Object(s.jsx)(Q.a,{})})}},{title:"Name",dataIndex:"name",render:function(d,P){var U=P.short_id,G=P.description;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(p.Link,{className:"font-semibold",to:b.a.sessionRecordingPlaylist(U),children:d||"Untitled"}),G?Object(s.jsx)("div",{className:"truncate",children:G}):null]})}},Object(me.b)(),{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",render:function(d){return Object(s.jsx)("div",{children:d&&typeof d=="string"&&Object(s.jsx)(ve.TZLabel,{time:d})})}}];return Object(s.jsxs)("div",{className:"space-y-4",children:[Object(s.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(s.jsx)(p.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:function(d){return m({search:d||void 0})},value:u.search||""}),Object(s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(s.jsx)("div",{className:"flex items-center gap-2",children:Object(s.jsx)(p.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:u.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:function(){return m({pinned:!u.pinned})},icon:Object(ne.cloneElement)(u.pinned?Object(s.jsx)(Z.a,{}):Object(s.jsx)(Q.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Last modified:"}),Object(s.jsx)(je.a,{disabled:!1,dateFrom:u.dateFrom,dateTo:u.dateTo,onChange:function(d,P){return m({dateFrom:d,dateTo:P!=null?P:void 0})},makeLabel:function(d){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ue.a,{}),Object(s.jsxs)("span",{className:"hide-when-small",children:[" ",d]})]})}})]}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Created by:"}),Object(s.jsx)(p.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"}].concat(se()(V.map(function(y){return{value:y.user.id,label:y.user.first_name}}))),value:u.createdBy,onChange:function(d){m({createdBy:d})},dropdownMatchSelectWidth:!1})]})]})]}),Object(s.jsx)(p.LemonTable,{loading:c,columns:j,dataSource:l.results,pagination:f,noSortingCancellation:!0,sorting:v,onSort:function(d){return m({order:d?"".concat(d.order===-1?"-":"").concat(d.columnKey):void 0})},rowKey:"id",loadingSkeletonRows:E,nouns:["playlist","playlists"]})]})}try{B.displayName="SavedSessionRecordingPlaylists",B.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:B.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(r){}var ge=e("./frontend/src/lib/components/Tooltip.tsx"),D=e("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts"),ye=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),z=e("./frontend/src/lib/components/icons.tsx"),w=e("./frontend/src/scenes/session-recordings/settings/SessionRecordingSettings.tsx");function k(){var r=Object(i.useValues)(T.a),t=r.currentTeam,n=Object(i.useValues)(q.a),o=n.featureFlags,l=Object(i.useValues)(D.c),c=l.tab,u=l.newPlaylistLoading,v=Object(i.useActions)(D.c),f=v.saveNewPlaylist,a=!!o[_.h.RECORDING_PLAYLISTS],m=Object(i.useValues)(Object(K.c)({key:"recents",updateSearchParams:!0})),g=m.filters,O=Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(M.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0})}),V=t&&!(t!=null&&t.session_recording_opt_in);return Object(s.jsxs)("div",{children:[Object(s.jsx)(C.a,{title:Object(s.jsx)("div",{children:"Session Recordings"}),buttons:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(p.LemonButton,{type:"secondary",icon:Object(s.jsx)(z.IconSettings,{}),onClick:function(){return Object(w.b)()},children:"Configure"}),a?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(ge.a,{placement:"topRight",title:c===h.X.Recent?"Save the currently filters as a dynamic playlist":"Create a new playlist",children:Object(s.jsx)(p.LemonButton,{type:"primary",onClick:function(){return f({filters:c===h.X.Recent?g:void 0})},loading:u,"data-attr":"save-recordings-playlist-button",icon:Object(s.jsx)(z.IconPlus,{}),children:c===h.X.Recent?"Save as playlist":"Create new playlist"})})}):void 0]})}),a&&Object(s.jsx)(s.Fragment,{children:Object(s.jsx)($.a,{activeKey:c,animated:!1,style:{borderColor:"#D9D9D9"},onChange:function(y){return I.router.actions.push(b.a.sessionRecordings(y))},children:Object.values(h.X).map(function(j){return Object(s.jsx)($.a.TabPane,{tab:Object(D.b)(j)},j)})})}),V?Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsx)(A.a,{type:"info",action:{type:"secondary",icon:Object(s.jsx)(z.IconSettings,{}),onClick:function(){return Object(w.b)()},children:"Configure"},children:"Session recordings are currently disabled for this project."})}):null,a?c?c===h.X.Recent?O:Object(s.jsx)(B,{tab:h.X.Playlists}):Object(s.jsx)(ye.a,{}):O]})}var pe={component:k,logic:D.c}},"./node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(Y,x,e){"use strict";var S=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),F=e("./node_modules/react/index.js"),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},T=C,i=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(A,p){return F.createElement(i.a,Object(S.a)(Object(S.a)({},A),{},{ref:p,icon:T}))};b.displayName="PushpinFilled";var K=x.a=F.forwardRef(b)},"./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(Y,x,e){"use strict";var S=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),F=e("./node_modules/react/index.js"),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},T=C,i=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(A,p){return F.createElement(i.a,Object(S.a)(Object(S.a)({},A),{},{ref:p,icon:T}))};b.displayName="PushpinOutlined";var K=x.a=F.forwardRef(b)}}]);
