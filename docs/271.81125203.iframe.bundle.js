(window.webpackJsonp=window.webpackJsonp||[]).push([[271],{"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return NewDashboardModal}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),lib_forms_Field__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/forms/Field.tsx"),lib_components_LemonButton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/LemonButton/index.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/types.ts"),lib_components_LemonSelect__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/LemonSelect.tsx"),lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),lib_components_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),lib_components_LemonTextArea_LemonTextArea__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),_DashboardCollaborators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/dashboard/DashboardCollaborators.tsx"),lib_components_LemonModal__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/components/LemonModal/index.ts"),kea_forms__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/constants.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),scenes_dashboard_dashboards_templates_dashboardTemplatesLogic__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function NewDashboardModal(){const{hideNewDashboardModal:hideNewDashboardModal,createAndGoToDashboard:createAndGoToDashboard}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_6__.a),{isNewDashboardSubmitting:isNewDashboardSubmitting,newDashboardModalVisible:newDashboardModalVisible}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_6__.a),{hasAvailableFeature:hasAvailableFeature}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_14__.a),{templatesList:templatesList}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_dashboards_templates_dashboardTemplatesLogic__WEBPACK_IMPORTED_MODULE_15__.a),{featureFlags:featureFlags}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_12__.a),templates=!!featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_13__.i.DASHBOARD_TEMPLATES]?templatesList:[{value:"DEFAULT_APP",label:"Product analytics","data-attr":"dashboard-select-default-app"}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonModal__WEBPACK_IMPORTED_MODULE_10__.a,{title:"New dashboard",description:"Use dashboards to compose multiple insights into a single view.",onClose:hideNewDashboardModal,isOpen:newDashboardModalVisible,footer:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonButton__WEBPACK_IMPORTED_MODULE_2__.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",disabled:isNewDashboardSubmitting,onClick:hideNewDashboardModal,children:"Cancel"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonButton__WEBPACK_IMPORTED_MODULE_2__.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-submit-and-go",disabled:isNewDashboardSubmitting,onClick:createAndGoToDashboard,children:"Create and go to dashboard"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonButton__WEBPACK_IMPORTED_MODULE_2__.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:isNewDashboardSubmitting,disabled:isNewDashboardSubmitting,children:"Create"})]}),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(kea_forms__WEBPACK_IMPORTED_MODULE_11__.Form,{logic:scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_6__.a,formKey:"newDashboard",id:"new-dashboard-form",enableFormOnSubmit:!0,className:"space-y-2",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_forms_Field__WEBPACK_IMPORTED_MODULE_1__.a,{name:"name",label:"Name",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_7__.a,{autoFocus:!0,"data-attr":"dashboard-name-input",className:"ph-ignore-input"})}),hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_3__.e.DASHBOARD_COLLABORATION)?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_forms_Field__WEBPACK_IMPORTED_MODULE_1__.a,{name:"description",label:"Description",showOptional:!0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonTextArea_LemonTextArea__WEBPACK_IMPORTED_MODULE_8__.a,{"data-attr":"dashboard-description-input",className:"ph-ignore-input"})}):null,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_forms_Field__WEBPACK_IMPORTED_MODULE_1__.a,{name:"useTemplate",label:"Template",showOptional:!0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonSelect__WEBPACK_IMPORTED_MODULE_4__.a,{placeholder:"Optionally start from template",allowClear:!0,options:templates,fullWidth:!0,"data-attr":"copy-from-template"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_forms_Field__WEBPACK_IMPORTED_MODULE_1__.a,{name:"restrictionLevel",label:"Collaboration settings",children:_ref=>{let{value:value,onChange:onChange}=_ref;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_5__.a,{feature:_types__WEBPACK_IMPORTED_MODULE_3__.e.DASHBOARD_PERMISSIONING,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(lib_components_LemonSelect__WEBPACK_IMPORTED_MODULE_4__.a,{value:value,onChange:onChange,options:_DashboardCollaborators__WEBPACK_IMPORTED_MODULE_9__.a,fullWidth:!0})})}})]})})}},"./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return dashboardTemplatesLogic}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts");const dashboardTemplatesLogic=Object(kea__WEBPACK_IMPORTED_MODULE_0__.kea)([Object(kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","dashboard","dashboards","templates","dashboardTemplatesLogic"]),Object(kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)({repository:[{},{loadRepository:async()=>{const results=await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.get("/api/projects/@current/dashboard_templates/repository"),repository={};for(const template of results)template.url&&(repository[template.url.replace(/\/+$/,"")]=template);return repository}}],template:[null,{installTemplate:async payload=>await lib_api__WEBPACK_IMPORTED_MODULE_2__.b.create("api/projects/@current/dashboard_templates/",payload)}]}),Object(kea__WEBPACK_IMPORTED_MODULE_0__.reducers)((()=>({templateBeingSaved:[null,{installTemplateSuccess:()=>null,installTemplate:(_,_ref)=>{let{name:name}=_ref;return name}}],templatesList:[[],{loadRepositorySuccess:(_,_ref2)=>{let{repository:repository}=_ref2;return Object.values(repository).filter((r=>!!r.installed)).map((entry=>({value:entry.name,label:entry.name,"data-attr":`dashboard-select-${entry.name.replace(" ","-")}`})))}}]}))),Object(kea__WEBPACK_IMPORTED_MODULE_0__.listeners)((_ref3=>{let{actions:actions}=_ref3;return{installTemplateSuccess:()=>actions.loadRepository()}})),Object(kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)((_ref4=>{let{actions:actions}=_ref4;actions.loadRepository()}))])},"./frontend/src/scenes/insights/InsightScene.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"InsightScene",(function(){return InsightScene})),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene}));var insightSceneLogic=__webpack_require__("./frontend/src/scenes/insights/insightSceneLogic.tsx"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),Insight=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss"),Insight_default=__webpack_require__.n(Insight),Insight_options={insert:"head",singleton:!1},react=(injectStylesIntoStyleTag_default()(Insight_default.a,Insight_options),Insight_default.a.locals,__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),insightLogic=__webpack_require__("./frontend/src/scenes/insights/insightLogic.ts"),commandPaletteLogic=__webpack_require__("./frontend/src/lib/components/CommandPalette/commandPaletteLogic.tsx"),compareFilterLogic=__webpack_require__("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts"),RiseOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),sharedUtils=__webpack_require__("./frontend/src/scenes/insights/sharedUtils.ts"),insightDateFilterLogic=__webpack_require__("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts");const insightCommandLogic=Object(index_esm.kea)({props:{},key:Object(sharedUtils.l)("new"),path:key=>["scenes","insights","insightCommandLogic",key],connect:props=>[commandPaletteLogic.a,Object(compareFilterLogic.a)(props),Object(insightDateFilterLogic.a)(props)],events:_ref=>{let{props:props}=_ref;return{afterMount:()=>{const funnelCommands=[{key:"insight-graph",resolver:[{icon:RiseOutlined.a,display:'Toggle "Compare Previous" on Graph',executor:()=>{Object(compareFilterLogic.a)(props).actions.toggleCompare()}},...utils.u.map((_ref2=>{let{key:key,values:values}=_ref2;return{icon:RiseOutlined.a,display:`Set Time Range to ${key}`,executor:()=>{Object(insightDateFilterLogic.a)(props).actions.setDates(values[0],values[1])}}}))],scope:"insights"}];for(const command of funnelCommands)commandPaletteLogic.a.actions.registerCommand(command)},beforeUnmount:()=>{commandPaletteLogic.a.actions.deregisterScope("insights")}}}});var insightDataLogic=__webpack_require__("./frontend/src/scenes/insights/insightDataLogic.ts"),types=__webpack_require__("./frontend/src/types.ts"),InsightsNav=__webpack_require__("./frontend/src/scenes/insights/InsightsNav.tsx"),Tooltip=__webpack_require__("./frontend/src/lib/components/Tooltip.tsx"),dashboardsModel=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),eventUsageLogic=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),fuse_esm=__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),lemonToast=__webpack_require__("./frontend/src/lib/components/lemonToast.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),urls=__webpack_require__("./frontend/src/scenes/urls.ts");const addToDashboardModalLogic=Object(index_esm.kea)({path:["lib","components","AddToDashboard","saveToDashboardModalLogic"],props:{},key:_ref=>{let{insight:insight}=_ref;if(!insight.short_id)throw Error("must provide an insight with a short id");return insight.short_id},connect:props=>({logic:[dashboardsModel.a],actions:[Object(insightLogic.c)({dashboardItemId:props.insight.short_id}),["updateInsight","updateInsightSuccess","updateInsightFailure"],eventUsageLogic.e,["reportSavedInsightToDashboard","reportRemovedInsightFromDashboard","reportCreatedDashboardFromModal"],newDashboardLogic.a,["showNewDashboardModal"]]}),actions:{addNewDashboard:!0,setDashboardId:id=>({id:id}),setSearchQuery:query=>({query:query}),setInsight:insight=>({insight:insight}),setScrollIndex:index=>({index:index}),addToDashboard:(insight,dashboardId)=>({insight:insight,dashboardId:dashboardId}),removeFromDashboard:(insight,dashboardId)=>({insight:insight,dashboardId:dashboardId})},reducers:{_dashboardId:[null,{setDashboardId:(_,_ref2)=>{let{id:id}=_ref2;return id}}],searchQuery:["",{setSearchQuery:(_,_ref3)=>{let{query:query}=_ref3;return query}}],scrollIndex:[-1,{setScrollIndex:(_,_ref4)=>{let{index:index}=_ref4;return index}}],dashboardWithActiveAPICall:[null,{addToDashboard:(_,_ref5)=>{let{dashboardId:dashboardId}=_ref5;return dashboardId},removeFromDashboard:(_,_ref6)=>{let{dashboardId:dashboardId}=_ref6;return dashboardId},updateInsightSuccess:()=>null,updateInsightFailure:()=>null}]},selectors:{dashboardId:[s=>[s._dashboardId,dashboardsModel.a.selectors.lastDashboardId,dashboardsModel.a.selectors.nameSortedDashboards,(_,props)=>props.fromDashboard],(_dashboardId,lastDashboardId,dashboards,fromDashboard)=>_dashboardId||fromDashboard||lastDashboardId||(dashboards.length>0?dashboards[0].id:null)],dashboardsFuse:[()=>[dashboardsModel.a.selectors.nameSortedDashboards],nameSortedDashboards=>new fuse_esm.a(nameSortedDashboards||[],{keys:["name","description","tags"],threshold:.3})],filteredDashboards:[s=>[s.searchQuery,s.dashboardsFuse,dashboardsModel.a.selectors.nameSortedDashboards],(searchQuery,dashboardsFuse,nameSortedDashboards)=>searchQuery.length?dashboardsFuse.search(searchQuery).map((r=>r.item)):nameSortedDashboards],currentDashboards:[s=>[s.filteredDashboards,(_,props)=>props.insight],(filteredDashboards,insight)=>filteredDashboards.filter((d=>{var _insight$dashboard_ti,_insight$dashboard_ti2;return null===(_insight$dashboard_ti=insight.dashboard_tiles)||void 0===_insight$dashboard_ti||null===(_insight$dashboard_ti2=_insight$dashboard_ti.map((dt=>dt.dashboard_id)))||void 0===_insight$dashboard_ti2?void 0:_insight$dashboard_ti2.includes(d.id)}))],availableDashboards:[s=>[s.filteredDashboards,s.currentDashboards],(filteredDashboards,currentDashboards)=>filteredDashboards.filter((d=>!(null!=currentDashboards&&currentDashboards.map((cd=>cd.id)).includes(d.id))))],orderedDashboards:[s=>[s.currentDashboards,s.availableDashboards],(currentDashboards,availableDashboards)=>[...currentDashboards,...availableDashboards]]},listeners:_ref7=>{let{actions:actions,values:values,props:props}=_ref7;return{setDashboardId:_ref8=>{let{id:id}=_ref8;dashboardsModel.a.actions.setLastDashboardId(id)},addNewDashboard:async()=>{actions.showNewDashboardModal()},[dashboardsModel.a.actionTypes.addDashboardSuccess]:async _ref9=>{let{dashboard:dashboard}=_ref9;actions.reportCreatedDashboardFromModal(),actions.setDashboardId(dashboard.id),actions.addToDashboard(props.insight,dashboard.id),actions.setScrollIndex(values.orderedDashboards.findIndex((d=>d.id===dashboard.id)))},addToDashboard:async _ref10=>{let{insight:insight,dashboardId:dashboardId}=_ref10;actions.updateInsight({...insight,dashboards:[...insight.dashboards||[],dashboardId]},(()=>{actions.reportSavedInsightToDashboard(),dashboardsModel.a.actions.tileAddedToDashboard(dashboardId),lemonToast.d.success("Insight added to dashboard",{button:{label:"View dashboard",action:()=>lib.router.actions.push(urls.a.dashboard(dashboardId))}})}))},removeFromDashboard:async _ref11=>{let{insight:insight,dashboardId:dashboardId}=_ref11;actions.updateInsight({...insight,dashboards:(insight.dashboards||[]).filter((d=>d!==dashboardId)),dashboard_tiles:(insight.dashboard_tiles||[]).filter((dt=>dt.dashboard_id!==dashboardId))},(()=>{actions.reportRemovedInsightFromDashboard(),lemonToast.d.success("Insight removed from dashboard")}))}}}});var AddToDashboard=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss"),AddToDashboard_default=__webpack_require__.n(AddToDashboard),AddToDashboard_options={insert:"head",singleton:!1},icons=(injectStylesIntoStyleTag_default()(AddToDashboard_default.a,AddToDashboard_options),AddToDashboard_default.a.locals,__webpack_require__("./frontend/src/lib/components/icons.tsx")),LemonInput=__webpack_require__("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),List=__webpack_require__("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/List/index.js"),AutoSizer=__webpack_require__("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/AutoSizer/index.js"),LemonButton=__webpack_require__("./frontend/src/lib/components/LemonButton/index.ts"),Link=__webpack_require__("./frontend/src/lib/components/Link.tsx"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),LemonModal=__webpack_require__("./frontend/src/lib/components/LemonModal/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const DashboardRelationRow=_ref=>{var _insight$dashboards;let{style:style,isHighlighted:isHighlighted,isAlreadyOnDashboard:isAlreadyOnDashboard,dashboard:dashboard,insight:insight,canEditInsight:canEditInsight}=_ref;const logic=addToDashboardModalLogic({insight:insight,fromDashboard:(null===(_insight$dashboards=insight.dashboards)||void 0===_insight$dashboards?void 0:_insight$dashboards[0])||void 0}),{addToDashboard:addToDashboard,removeFromDashboard:removeFromDashboard}=Object(index_esm.useActions)(logic),{dashboardWithActiveAPICall:dashboardWithActiveAPICall}=Object(index_esm.useValues)(logic),{currentTeam:currentTeam}=Object(index_esm.useValues)(teamLogic.a),isPrimary=dashboard.id===(null==currentTeam?void 0:currentTeam.primary_dashboard);return Object(jsx_runtime.jsxs)("div",{"data-attr":"dashboard-list-item",style:style,className:Object(clsx_m.default)("flex items-center space-x-2",isHighlighted&&"highlighted"),children:[Object(jsx_runtime.jsx)(Link.a,{to:urls.a.dashboard(dashboard.id),children:dashboard.name||"Untitled"}),isPrimary&&Object(jsx_runtime.jsx)(Tooltip.a,{title:"Primary dashboards are shown on the project home page",children:Object(jsx_runtime.jsx)(icons.IconCottage,{className:"text-warning text-base"})}),Object(jsx_runtime.jsx)("span",{className:"grow"}),Object(jsx_runtime.jsx)(LemonButton.a,{type:isAlreadyOnDashboard?"primary":"secondary",loading:dashboardWithActiveAPICall===dashboard.id,disabledReason:canEditInsight?dashboardWithActiveAPICall?"Loading...":"":"You don't have permission to edit this dashboard",size:"small",onClick:e=>{e.preventDefault(),isAlreadyOnDashboard?removeFromDashboard(insight,dashboard.id):addToDashboard(insight,dashboard.id)},children:isAlreadyOnDashboard?"Added":"Add to dashboard"})]})};function AddToDashboardModal(_ref2){var _insight$dashboards2,_insight$dashboard_ti,_insight$dashboard_ti2;let{isOpen:isOpen,closeModal:closeModal,insight:insight,canEditInsight:canEditInsight}=_ref2;const logic=addToDashboardModalLogic({insight:insight,fromDashboard:(null===(_insight$dashboards2=insight.dashboards)||void 0===_insight$dashboards2?void 0:_insight$dashboards2[0])||void 0}),{searchQuery:searchQuery,currentDashboards:currentDashboards,orderedDashboards:orderedDashboards,scrollIndex:scrollIndex}=Object(index_esm.useValues)(logic),{setSearchQuery:setSearchQuery,addNewDashboard:addNewDashboard}=Object(index_esm.useActions)(logic),renderItem=_ref3=>{let{index:rowIndex,style:style}=_ref3;return Object(jsx_runtime.jsx)(DashboardRelationRow,{dashboard:orderedDashboards[rowIndex],insight:insight,canEditInsight:canEditInsight,isHighlighted:rowIndex===scrollIndex,isAlreadyOnDashboard:currentDashboards.some((currentDashboard=>currentDashboard.id===orderedDashboards[rowIndex].id)),style:style},rowIndex)};return Object(jsx_runtime.jsx)(LemonModal.a,{onClose:closeModal,isOpen:isOpen,title:"Add to dashboard",footer:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{className:"flex-1",children:Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",onClick:addNewDashboard,disabledReason:canEditInsight?void 0:"You do not have permission to add this Insight to dashboards",children:"Add to a new dashboard"})}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",onClick:closeModal,children:"Close"})]}),children:Object(jsx_runtime.jsxs)("div",{className:"space-y-2",children:[Object(jsx_runtime.jsx)(LemonInput.a,{"data-attr":"dashboard-searchfield",type:"search",fullWidth:!0,placeholder:"Search for dashboards...",value:searchQuery,onChange:newValue=>setSearchQuery(newValue)}),Object(jsx_runtime.jsxs)("div",{className:"text-muted-alt",children:["This insight is referenced on"," ",Object(jsx_runtime.jsx)("strong",{className:"text-default",children:null===(_insight$dashboard_ti=insight.dashboard_tiles)||void 0===_insight$dashboard_ti?void 0:_insight$dashboard_ti.length})," ",Object(utils.wb)((null===(_insight$dashboard_ti2=insight.dashboard_tiles)||void 0===_insight$dashboard_ti2?void 0:_insight$dashboard_ti2.length)||0,"dashboard","dashboards",!1)]}),Object(jsx_runtime.jsx)("div",{style:{minHeight:420},children:Object(jsx_runtime.jsx)(AutoSizer.a,{children:_ref4=>{let{height:height,width:width}=_ref4;return Object(jsx_runtime.jsx)(List.a,{width:width,height:height,rowCount:orderedDashboards.length,overscanRowCount:100,rowHeight:40,rowRenderer:renderItem,scrollToIndex:scrollIndex})}})})]})})}try{AddToDashboardModal.displayName="AddToDashboardModal",AddToDashboardModal.__docgenInfo={description:"",displayName:"AddToDashboardModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},closeModal:{defaultValue:null,description:"",name:"closeModal",required:!0,type:{name:"() => void"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"]={docgenInfo:AddToDashboardModal.__docgenInfo,name:"AddToDashboardModal",path:"frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"})}catch(__react_docgen_typescript_loader_error){}var NewDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/NewDashboardModal.tsx");function AddToDashboard_AddToDashboard_AddToDashboard(_ref){var _insight$dashboard_ti;let{insight:insight,canEditInsight:canEditInsight}=_ref;const[openModal,setOpenModal]=Object(react.useState)(!1),{rawDashboards:rawDashboards}=Object(index_esm.useValues)(dashboardsModel.a),dashboards=(null===(_insight$dashboard_ti=insight.dashboard_tiles)||void 0===_insight$dashboard_ti?void 0:_insight$dashboard_ti.map((tile=>rawDashboards[tile.dashboard_id])).filter((d=>!!d)))||[];return Object(jsx_runtime.jsxs)("span",{className:"save-to-dashboard","data-attr":"save-to-dashboard-button",children:[Object(jsx_runtime.jsx)(AddToDashboardModal,{isOpen:openModal,closeModal:()=>setOpenModal(!1),insight:insight,canEditInsight:canEditInsight}),Object(jsx_runtime.jsx)(NewDashboardModal.a,{}),Object(jsx_runtime.jsx)(LemonButton.a,{onClick:()=>setOpenModal(!0),type:"secondary",icon:Object(jsx_runtime.jsx)(icons.IconWithCount,{count:dashboards.length,showZero:!1,children:Object(jsx_runtime.jsx)(icons.IconGauge,{})}),children:"Add to dashboard"})]})}try{AddToDashboard_AddToDashboard_AddToDashboard.displayName="AddToDashboard",AddToDashboard_AddToDashboard_AddToDashboard.__docgenInfo={description:"",displayName:"AddToDashboard",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"]={docgenInfo:AddToDashboard_AddToDashboard_AddToDashboard.__docgenInfo,name:"AddToDashboard",path:"frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"})}catch(__react_docgen_typescript_loader_error){}var InsightContainer=__webpack_require__("./frontend/src/scenes/insights/InsightContainer.tsx"),EditableField=__webpack_require__("./frontend/src/lib/components/EditableField/EditableField.tsx"),ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx");function InsightSaveButton(_ref){let{saveAs:saveAs,saveInsight:saveInsight,isSaved:isSaved,insightSaving:insightSaving,insightChanged:insightChanged,addingToDashboard:addingToDashboard}=_ref;const disabled=isSaved&&!insightChanged,saveAsAvailable=isSaved&&!addingToDashboard;return Object(jsx_runtime.jsx)(LemonButton.c,{type:"primary",onClick:()=>saveInsight(!0),"data-attr":"insight-save-button",disabled:disabled,loading:!disabled&&insightSaving,sideAction:{popup:{placement:"bottom-end",overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!disabled&&Object(jsx_runtime.jsxs)(LemonButton.a,{onClick:()=>saveInsight(!1),"data-attr":"insight-save-and-continue",status:"stealth",fullWidth:!0,children:[addingToDashboard?"Save, add to dashboard":"Save"," & continue editing"]}),saveAsAvailable&&Object(jsx_runtime.jsx)(LemonButton.a,{onClick:saveAs,"data-attr":"insight-save-as-new-insight",status:"stealth",fullWidth:!0,children:"Save asâ€¦"})]})},disabled:disabled&&!saveAsAvailable,"data-attr":"insight-save-dropdown"},children:disabled?"No changes to be saved":addingToDashboard?"Save & add to dashboard":"Save"})}try{InsightSaveButton.displayName="InsightSaveButton",InsightSaveButton.__docgenInfo={description:"",displayName:"InsightSaveButton",props:{saveAs:{defaultValue:null,description:"",name:"saveAs",required:!0,type:{name:"() => void"}},saveInsight:{defaultValue:null,description:"",name:"saveInsight",required:!0,type:{name:"(redirectToViewMode?: boolean | undefined) => void"}},isSaved:{defaultValue:null,description:"",name:"isSaved",required:!0,type:{name:"boolean | undefined"}},insightSaving:{defaultValue:null,description:"",name:"insightSaving",required:!0,type:{name:"boolean"}},insightChanged:{defaultValue:null,description:"",name:"insightChanged",required:!0,type:{name:"boolean"}},addingToDashboard:{defaultValue:null,description:"",name:"addingToDashboard",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"]={docgenInfo:InsightSaveButton.__docgenInfo,name:"InsightSaveButton",path:"frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"})}catch(__react_docgen_typescript_loader_error){}var userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),insights_utils=__webpack_require__("./frontend/src/scenes/insights/utils.tsx"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),mathsLogic=__webpack_require__("./frontend/src/scenes/trends/mathsLogic.tsx"),LemonSkeleton=__webpack_require__("./frontend/src/lib/components/LemonSkeleton/index.tsx");function InsightSkeleton(){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("div",{className:"my-6 space-y-4",children:[Object(jsx_runtime.jsx)(LemonSkeleton.a,{className:"w-1/4"}),Object(jsx_runtime.jsx)(LemonSkeleton.a,{className:"w-1/2",repeat:3}),Object(jsx_runtime.jsx)(LemonSkeleton.a,{}),Object(jsx_runtime.jsxs)("div",{className:"border rounded p-6 flex items-center gap-4",children:[Object(jsx_runtime.jsx)("div",{className:"flex-1 space-y-2",children:Object(jsx_runtime.jsx)(LemonSkeleton.a.Row,{repeat:3})}),Object(jsx_runtime.jsx)("div",{className:"flex-1 space-y-2",children:Object(jsx_runtime.jsx)(LemonSkeleton.a.Row,{repeat:3})})]}),Object(jsx_runtime.jsx)("div",{className:"border rounded p-6",style:{minHeight:600}})]})})}var featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),CSSTransition=__webpack_require__("./node_modules/.pnpm/react-transition-group@4.4.5_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-transition-group/esm/CSSTransition.js"),trendsLogic=__webpack_require__("./frontend/src/scenes/trends/trendsLogic.ts"),ActionFilter=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),ActionFilterRow=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),TaxonomicFilter_types=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts");function TrendsSeries(_ref){let{insightProps:insightProps}=_ref;const{setFilters:setFilters}=Object(index_esm.useActions)(Object(trendsLogic.a)(insightProps)),{filters:filters,isFormulaOn:isFormulaOn}=Object(index_esm.useValues)(Object(trendsLogic.a)(insightProps)),{groupsTaxonomicTypes:groupsTaxonomicTypes}=Object(index_esm.useValues)(groupsModel.a),propertiesTaxonomicGroupTypes=[TaxonomicFilter_types.a.EventProperties,TaxonomicFilter_types.a.PersonProperties,TaxonomicFilter_types.a.EventFeatureFlags,...groupsTaxonomicTypes,TaxonomicFilter_types.a.Cohorts,TaxonomicFilter_types.a.Elements,...Object(sharedUtils.j)(filters)?[TaxonomicFilter_types.a.Sessions]:[]];return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(sharedUtils.f)(filters)&&Object(jsx_runtime.jsxs)("div",{className:"mb-2",children:["Showing ",Object(jsx_runtime.jsx)("b",{children:"Unique users"})," who did"]}),Object(jsx_runtime.jsx)(ActionFilter.a,{filters:filters,setFilters:payload=>setFilters(payload),typeKey:`trends_${types.F.TRENDS}`,buttonCopy:"Add graph "+(isFormulaOn?"variable":"series"),showSeriesIndicator:!0,showNestedArrow:!0,entitiesLimit:Object(sharedUtils.c)(filters)&&filters.display&&constants.y.includes(filters.display)&&!isFormulaOn||Object(sharedUtils.f)(filters)?1:utils.c.length,mathAvailability:Object(sharedUtils.f)(filters)?ActionFilterRow.b.None:Object(sharedUtils.i)(filters)?ActionFilterRow.b.ActorsOnly:ActionFilterRow.b.All,propertiesTaxonomicGroupTypes:propertiesTaxonomicGroupTypes})]})}function TrendsSeriesLabel(_ref2){let{insightProps:insightProps}=_ref2;const{filters:filters,localFilters:localFilters,isFormulaOn:isFormulaOn}=Object(index_esm.useValues)(Object(trendsLogic.a)(insightProps)),{setIsFormulaOn:setIsFormulaOn}=Object(index_esm.useActions)(Object(trendsLogic.a)(insightProps)),formulaModeButtonDisabled=isFormulaOn&&Object(sharedUtils.j)(filters)&&!!filters.display&&constants.y.includes(filters.display)&&localFilters.length>1;return Object(jsx_runtime.jsxs)("div",{className:"flex items-center justify-between w-full",children:[Object(jsx_runtime.jsx)("span",{children:isFormulaOn?"Variables":"Series"}),Object(jsx_runtime.jsx)(Tooltip.a,{title:formulaModeButtonDisabled?"This chart type does not support multiple series, so in order to disable formula mode, remove variables or switch to a different chart type.":"Make your own formula the output of the insight with formula mode. Use graph series as variables.",children:Object(jsx_runtime.jsx)("div",{className:"-my-1",children:Object(jsx_runtime.jsxs)(src.LemonButton,{size:"small",onClick:()=>setIsFormulaOn(!isFormulaOn),disabled:formulaModeButtonDisabled,icon:Object(jsx_runtime.jsx)(icons.IconCalculate,{}),id:"trends-formula-switch",children:[isFormulaOn?"Disable":"Enable"," formula mode"]})})})]})}try{TrendsSeries.displayName="TrendsSeries",TrendsSeries.__docgenInfo={description:"",displayName:"TrendsSeries",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"]={docgenInfo:TrendsSeries.__docgenInfo,name:"TrendsSeries",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"})}catch(__react_docgen_typescript_loader_error){}try{TrendsSeriesLabel.displayName="TrendsSeriesLabel",TrendsSeriesLabel.__docgenInfo={description:"",displayName:"TrendsSeriesLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"]={docgenInfo:TrendsSeriesLabel.__docgenInfo,name:"TrendsSeriesLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"})}catch(__react_docgen_typescript_loader_error){}var PropertyGroupFilters=__webpack_require__("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx");function GlobalAndOrFilters(_ref){let{filters:filters}=_ref;const{setFiltersMerge:setFiltersMerge}=Object(index_esm.useActions)(insightLogic.c),{allEventNames:allEventNames}=Object(index_esm.useValues)(insightLogic.c),{groupsTaxonomicTypes:groupsTaxonomicTypes}=Object(index_esm.useValues)(groupsModel.a),taxonomicGroupTypes=[TaxonomicFilter_types.a.EventProperties,TaxonomicFilter_types.a.PersonProperties,TaxonomicFilter_types.a.EventFeatureFlags,...groupsTaxonomicTypes,TaxonomicFilter_types.a.Cohorts,TaxonomicFilter_types.a.Elements,...filters.insight===types.F.TRENDS?[TaxonomicFilter_types.a.Sessions]:[]];return Object(jsx_runtime.jsx)(PropertyGroupFilters.b,{noTitle:!0,value:Object(utils.q)(filters.properties),onChange:properties=>setFiltersMerge({properties:properties}),taxonomicGroupTypes:taxonomicGroupTypes,pageKey:"insight-filters",eventNames:allEventNames,filters:filters,setTestFilters:testFilters=>setFiltersMerge(testFilters)})}try{GlobalAndOrFilters.displayName="GlobalAndOrFilters",GlobalAndOrFilters.__docgenInfo={description:"",displayName:"GlobalAndOrFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"]={docgenInfo:GlobalAndOrFilters.__docgenInfo,name:"GlobalAndOrFilters",path:"frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"})}catch(__react_docgen_typescript_loader_error){}const ALLOWED_FORMULA_CHARACTERS=/^[a-zA-Z\ \-\*\^0-9\+\/\(\)\.]+$/;function TrendsFormula(_ref){let{insightProps:insightProps}=_ref;const{isFormulaOn:isFormulaOn,filters:filters}=Object(index_esm.useValues)(Object(trendsLogic.a)(insightProps)),formula=Object(sharedUtils.j)(filters)?filters.formula:null,{setFilters:setFilters}=Object(index_esm.useActions)(Object(trendsLogic.a)(insightProps)),[value,setValue]=Object(react.useState)(formula);return Object(react.useEffect)((()=>{formula&&setValue(formula)}),[formula]),isFormulaOn?Object(jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:Object(jsx_runtime.jsx)(src.LemonInput,{className:"flex-1",placeholder:"Example: (A + B) / 100",autoFocus:!0,value:value,onChange:value=>{let changedValue=value.toLocaleUpperCase();changedValue=changedValue.split("").filter((d=>ALLOWED_FORMULA_CHARACTERS.test(d))).join(""),setValue(changedValue)},onBlur:e=>{var _e$relatedTarget;"trends-formula-switch"!==(null===(_e$relatedTarget=e.relatedTarget)||void 0===_e$relatedTarget?void 0:_e$relatedTarget.id)&&value!==formula&&setFilters({formula:value})},onFocus:()=>{value&&value!==formula&&setFilters({formula:value})},onPressEnter:()=>{value!==formula&&setFilters({formula:value})}})}):null}function TrendsFormulaLabel(_ref2){let{insightProps:insightProps}=_ref2;const{isFormulaOn:isFormulaOn}=Object(index_esm.useValues)(Object(trendsLogic.a)(insightProps));return isFormulaOn?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Formula"}):null}try{TrendsFormula.displayName="TrendsFormula",TrendsFormula.__docgenInfo={description:"",displayName:"TrendsFormula",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"]={docgenInfo:TrendsFormula.__docgenInfo,name:"TrendsFormula",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"})}catch(__react_docgen_typescript_loader_error){}try{TrendsFormulaLabel.displayName="TrendsFormulaLabel",TrendsFormulaLabel.__docgenInfo={description:"",displayName:"TrendsFormulaLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"]={docgenInfo:TrendsFormulaLabel.__docgenInfo,name:"TrendsFormulaLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"})}catch(__react_docgen_typescript_loader_error){}var TaxonomicBreakdownFilter=__webpack_require__("./frontend/src/scenes/insights/filters/BreakdownFilter/TaxonomicBreakdownFilter.tsx");function Breakdown(_ref){let{filters:filters}=_ref;const{setFiltersMerge:setFiltersMerge}=Object(index_esm.useActions)(insightLogic.c),{featureFlags:featureFlags}=Object(index_esm.useValues)(featureFlagLogic.a),useMultiBreakdown=filters.insight!==types.F.TRENDS&&!!featureFlags[constants.i.BREAKDOWN_BY_MULTIPLE_PROPERTIES];return Object(jsx_runtime.jsx)(TaxonomicBreakdownFilter.a,{filters:filters,setFilters:setFiltersMerge,useMultiBreakdown:useMultiBreakdown})}try{Breakdown.displayName="Breakdown",Breakdown.__docgenInfo={description:"",displayName:"Breakdown",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"]={docgenInfo:Breakdown.__docgenInfo,name:"Breakdown",path:"frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"})}catch(__react_docgen_typescript_loader_error){}var es_checkbox=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/checkbox/index.js"),InfoCircleOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),LifecycleToggles=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss"),LifecycleToggles_default=__webpack_require__.n(LifecycleToggles),LifecycleToggles_options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(LifecycleToggles_default.a,LifecycleToggles_options),LifecycleToggles_default.a.locals;const lifecycles=[{name:"new",tooltip:"Users who were first seen on this period and did the activity during the period."},{name:"returning",tooltip:"Users who did activity both this and previous period."},{name:"resurrecting",tooltip:"Users who did the activity this period but did not do the activity on the previous period (i.e. were inactive for 1 or more periods)."},{name:"dormant",tooltip:"Users who went dormant on this period, i.e. users who did not do the activity this period but did the activity on the previous period."}];function LifecycleToggles_LifecycleToggles(_ref){let{insightProps:insightProps}=_ref;const{toggleLifecycle:toggleLifecycle}=Object(index_esm.useActions)(Object(trendsLogic.a)(insightProps));return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)("div",{className:"LifecycleToggles",children:lifecycles.map(((lifecycle,idx)=>Object(jsx_runtime.jsxs)("div",{children:[lifecycle.name," ",Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(es_checkbox.a,{defaultChecked:!0,className:lifecycle.name,onChange:()=>toggleLifecycle(lifecycle.name)}),Object(jsx_runtime.jsx)(Tooltip.a,{title:lifecycle.tooltip,children:Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:"info-indicator"})})]})]},idx)))})})}try{LifecycleToggles_LifecycleToggles.displayName="LifecycleToggles",LifecycleToggles_LifecycleToggles.__docgenInfo={description:"",displayName:"LifecycleToggles",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"]={docgenInfo:LifecycleToggles_LifecycleToggles.__docgenInfo,name:"LifecycleToggles",path:"frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"})}catch(__react_docgen_typescript_loader_error){}var TestAccountFilter=__webpack_require__("./frontend/src/scenes/insights/filters/TestAccountFilter/index.ts");function LifecycleGlobalFilters(_ref){let{filters:filters,insightProps:insightProps}=_ref;const{setFilters:setFilters}=Object(index_esm.useActions)(Object(trendsLogic.a)(insightProps));return Object(jsx_runtime.jsx)(TestAccountFilter.a,{filters:filters,onChange:setFilters})}try{LifecycleGlobalFilters.displayName="LifecycleGlobalFilters",LifecycleGlobalFilters.__docgenInfo={description:"",displayName:"LifecycleGlobalFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"]={docgenInfo:LifecycleGlobalFilters.__docgenInfo,name:"LifecycleGlobalFilters",path:"frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"})}catch(__react_docgen_typescript_loader_error){}var retentionTableLogic=__webpack_require__("./frontend/src/scenes/retention/retentionTableLogic.ts"),es_select=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),input=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input/index.js"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),GroupsIntroduction=__webpack_require__("./frontend/src/scenes/groups/GroupsIntroduction.tsx");function AggregationSelect(_ref){let{aggregationGroupTypeIndex:aggregationGroupTypeIndex,onChange:onChange}=_ref;const{groupTypes:groupTypes,aggregationLabel:aggregationLabel}=Object(index_esm.useValues)(groupsModel.a),{needsUpgradeForGroups:needsUpgradeForGroups,canStartUsingGroups:canStartUsingGroups}=Object(index_esm.useValues)(groupsAccessLogic.b),optionSections=[{title:"Event Aggregation",options:[{value:-1,label:"Unique users"}]}];return needsUpgradeForGroups||canStartUsingGroups?optionSections[0].footer=Object(jsx_runtime.jsx)(GroupsIntroduction.a,{needsUpgrade:needsUpgradeForGroups}):groupTypes.forEach((groupType=>{optionSections[0].options.push({value:groupType.group_type_index,label:`Unique ${aggregationLabel(groupType.group_type_index).plural}`})})),Object(jsx_runtime.jsx)(src.LemonSelect,{value:void 0===aggregationGroupTypeIndex?-1:aggregationGroupTypeIndex,onChange:value=>{if(null!==value){onChange(-1===value?void 0:value)}},"data-attr":"retention-aggregation-selector",dropdownMatchSelectWidth:!1,options:optionSections})}try{AggregationSelect.displayName="AggregationSelect",AggregationSelect.__docgenInfo={description:"",displayName:"AggregationSelect",props:{aggregationGroupTypeIndex:{defaultValue:null,description:"",name:"aggregationGroupTypeIndex",required:!0,type:{name:"number | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(aggregationGroupTypeIndex: number | undefined) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"]={docgenInfo:AggregationSelect.__docgenInfo,name:"AggregationSelect",path:"frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"})}catch(__react_docgen_typescript_loader_error){}function RetentionSummary(_ref){var _filters$total_interv,_filters$period;let{insightProps:insightProps}=_ref;const{showGroupsOptions:showGroupsOptions}=Object(index_esm.useValues)(groupsModel.a),{filters:filters,actionFilterTargetEntity:actionFilterTargetEntity,actionFilterReturningEntity:actionFilterReturningEntity}=Object(index_esm.useValues)(Object(retentionTableLogic.e)(insightProps)),{setFilters:setFilters}=Object(index_esm.useActions)(Object(retentionTableLogic.e)(insightProps));return Object(jsx_runtime.jsxs)("div",{className:"space-y-2","data-attr":"retention-summary",children:[Object(jsx_runtime.jsxs)("div",{children:["Show"," ",showGroupsOptions?Object(jsx_runtime.jsx)(AggregationSelect,{aggregationGroupTypeIndex:filters.aggregation_group_type_index,onChange:groupTypeIndex=>setFilters({aggregation_group_type_index:groupTypeIndex})}):Object(jsx_runtime.jsx)("b",{children:"Unique users"})," ","who performed event or action"]}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center",children:[Object(jsx_runtime.jsx)(ActionFilter.a,{entitiesLimit:1,mathAvailability:ActionFilterRow.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:actionFilterTargetEntity,setFilters:newFilters=>{newFilters.events&&newFilters.events.length>0?setFilters({target_entity:newFilters.events[0]}):newFilters.actions&&newFilters.actions.length>0?setFilters({target_entity:newFilters.actions[0]}):setFilters({target_entity:void 0})},typeKey:"retention-table"}),Object(jsx_runtime.jsx)(es_select.a,{value:filters.retention_type?retentionTableLogic.d[filters.retention_type]:void 0,onChange:value=>setFilters({retention_type:value}),dropdownMatchSelectWidth:!1,children:Object.entries(retentionTableLogic.d).map((_ref2=>{let[key,value]=_ref2;return Object(jsx_runtime.jsxs)(es_select.a.Option,{value:key,children:[value,Object(jsx_runtime.jsx)(Tooltip.a,{placement:"right",title:retentionTableLogic.c[key],children:Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:"info-indicator"})})]},key)}))})]}),Object(jsx_runtime.jsxs)("div",{children:["in the last"," ",Object(jsx_runtime.jsx)(input.a,{type:"tel",style:{width:80},value:String((null!==(_filters$total_interv=filters.total_intervals)&&void 0!==_filters$total_interv?_filters$total_interv:11)-1),onChange:e=>setFilters({total_intervals:parseInt(e.target.value||"0")+1})})," ",Object(jsx_runtime.jsx)(es_select.a,{value:filters.period,onChange:value=>setFilters({period:value}),dropdownMatchSelectWidth:!1,children:retentionTableLogic.b.map((period=>Object(jsx_runtime.jsx)(es_select.a.Option,{value:period,children:retentionTableLogic.a[period]||period},period)))})]}),Object(jsx_runtime.jsxs)("div",{children:["and then came back to perform event or action"," ",Object(jsx_runtime.jsx)("div",{className:"flex",children:Object(jsx_runtime.jsx)(ActionFilter.a,{entitiesLimit:1,mathAvailability:ActionFilterRow.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:actionFilterReturningEntity,setFilters:newFilters=>{newFilters.events&&newFilters.events.length>0?setFilters({returning_entity:newFilters.events[0]}):newFilters.actions&&newFilters.actions.length>0?setFilters({returning_entity:newFilters.actions[0]}):setFilters({returning_entity:void 0})},typeKey:"retention-table-returning"})}),"on any of the next ",retentionTableLogic.a[null!==(_filters$period=filters.period)&&void 0!==_filters$period?_filters$period:"Day"]]}),Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)("p",{className:"text-muted mt-4",children:["Want to learn more about retention?"," ",Object(jsx_runtime.jsxs)("a",{href:"https://posthog.com/docs/features/retention?utm_campaign=learn-more-horizontal&utm_medium=in-product",target:"_blank",rel:"noopener",style:{display:"inline-flex",alignItems:"center"},children:["Go to docs",Object(jsx_runtime.jsx)(icons.IconOpenInNew,{style:{marginLeft:4}})]})]})})]})}try{RetentionSummary.displayName="RetentionSummary",RetentionSummary.__docgenInfo={description:"",displayName:"RetentionSummary",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"]={docgenInfo:RetentionSummary.__docgenInfo,name:"RetentionSummary",path:"frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"})}catch(__react_docgen_typescript_loader_error){}var PathsEventTypes=__webpack_require__("./frontend/src/scenes/insights/EditorFilters/PathsEventTypes.tsx"),PathsWildcardGroups=__webpack_require__("./frontend/src/scenes/insights/EditorFilters/PathsWildcardGroups.tsx"),PathsTarget=__webpack_require__("./frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx"),PathsAdvanced=__webpack_require__("./frontend/src/scenes/insights/EditorFilters/PathsAdvanced.tsx"),funnelLogic=__webpack_require__("./frontend/src/scenes/funnels/funnelLogic.ts"),objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),asn_FunnelPlotOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 607.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V607.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V650h182.9v148zm9.6-226.6l-8.4 14.6H419.3l-8.4-14.6L334.4 438h355.2L613 571.4zM726.3 374H297.7l-85-148h598.6l-85 148z"}}]},name:"funnel-plot",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_FunnelPlotOutlined_FunnelPlotOutlined=function FunnelPlotOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_FunnelPlotOutlined}))};icons_FunnelPlotOutlined_FunnelPlotOutlined.displayName="FunnelPlotOutlined";var icons_FunnelPlotOutlined=react.forwardRef(icons_FunnelPlotOutlined_FunnelPlotOutlined),ClockCircleOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js"),LineChartOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),chartFilterLogic=__webpack_require__("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),es_menu=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/menu/index.js"),dropdown=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/dropdown/index.js"),DropdownSelector=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss"),DropdownSelector_default=__webpack_require__.n(DropdownSelector),DropdownSelector_options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(DropdownSelector_default.a,DropdownSelector_options),DropdownSelector_default.a.locals;function SelectItem(_ref){let{icon:icon,label:label,description:description,onClick:onClick}=_ref;return Object(jsx_runtime.jsxs)("div",{onClick:onClick,children:[Object(jsx_runtime.jsxs)("div",{className:"flex items-center text-sm font-medium gap-2",children:[icon,Object(jsx_runtime.jsx)("div",{children:label})]}),description&&Object(jsx_runtime.jsx)("div",{className:"text-muted text-xs mt-1",children:description})]})}function DropdownSelector_DropdownSelector_DropdownSelector(_ref2){let{label:label,value:value,onValueChange:onValueChange,options:options,hideDescriptionOnDisplay:hideDescriptionOnDisplay,disabled:disabled,compact:compact}=_ref2;const selectedOption=options.find((opt=>opt.key===value)),menu=Object(jsx_runtime.jsx)(es_menu.a,{children:options.map((_ref3=>{let{key:key,hidden:hidden,...props}=_ref3;return hidden?null:Object(jsx_runtime.jsx)(es_menu.a.Item,{children:Object(jsx_runtime.jsx)(SelectItem,{...props,onClick:()=>onValueChange(key)})},key)}))});return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[label&&Object(jsx_runtime.jsx)("label",{className:"ant-form-item-label",children:label}),Object(jsx_runtime.jsx)(dropdown.a,{overlay:menu,trigger:["click"],disabled:disabled,children:Object(jsx_runtime.jsxs)("div",{className:Object(clsx_m.default)("dropdown-selector",disabled&&" disabled",compact&&"compact"),onClick:e=>e.preventDefault(),children:[Object(jsx_runtime.jsx)("div",{className:"grow",children:selectedOption&&Object(jsx_runtime.jsx)(SelectItem,{...selectedOption,onClick:()=>{},description:hideDescriptionOnDisplay?void 0:selectedOption.description})}),Object(jsx_runtime.jsx)("div",{className:"dropdown-arrow",children:Object(jsx_runtime.jsx)(icons.IconArrowDropDown,{})})]})})]})}try{DropdownSelector_DropdownSelector_DropdownSelector.displayName="DropdownSelector",DropdownSelector_DropdownSelector_DropdownSelector.__docgenInfo={description:"",displayName:"DropdownSelector",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | null"}},onValueChange:{defaultValue:null,description:"",name:"onValueChange",required:!0,type:{name:"(value: string) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"DropdownOption[]"}},hideDescriptionOnDisplay:{defaultValue:null,description:"",name:"hideDescriptionOnDisplay",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"]={docgenInfo:DropdownSelector_DropdownSelector_DropdownSelector.__docgenInfo,name:"DropdownSelector",path:"frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"})}catch(__react_docgen_typescript_loader_error){}const noop=()=>{};function ToggleButtonChartFilter(_ref){let{onChange:onChange=noop,disabled:disabled=!1,simpleMode:simpleMode}=_ref;const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{aggregationTargetLabel:aggregationTargetLabel}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{chartFilter:chartFilter}=Object(index_esm.useValues)(Object(chartFilterLogic.a)(insightProps)),{setChartFilter:setChartFilter}=Object(index_esm.useActions)(Object(chartFilterLogic.a)(insightProps)),defaultDisplay=types.B.Steps,options=[{key:types.B.Steps,label:"Conversion steps",description:`Track ${aggregationTargetLabel.plural} progress between steps of the funnel`,icon:Object(jsx_runtime.jsx)(icons_FunnelPlotOutlined,{})},{key:types.B.TimeToConvert,label:"Time to convert",description:`Track how long it takes for ${aggregationTargetLabel.plural} to convert`,icon:Object(jsx_runtime.jsx)(ClockCircleOutlined.a,{}),hidden:!1},{key:types.B.Trends,label:"Historical trends",description:"Track how this funnel's conversion rate is trending over time",icon:Object(jsx_runtime.jsx)(LineChartOutlined.a,{}),hidden:!1}];if(options.filter((option=>!option.hidden)).length<=1)return null;const innerContent=Object(jsx_runtime.jsx)("div",{className:"funnel-chart-filter",children:Object(jsx_runtime.jsx)(DropdownSelector_DropdownSelector_DropdownSelector,{options:options,value:chartFilter||defaultDisplay,onValueChange:val=>{const valueTyped=val;setChartFilter(valueTyped),onChange(valueTyped)},disabled:disabled,hideDescriptionOnDisplay:!0,compact:simpleMode})});return simpleMode?innerContent:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("h4",{className:"secondary",children:"Graph Type"}),innerContent]})}try{ToggleButtonChartFilter.displayName="ToggleButtonChartFilter",ToggleButtonChartFilter.__docgenInfo={description:"",displayName:"ToggleButtonChartFilter",props:{onChange:{defaultValue:{value:"(): void => {}"},description:"",name:"onChange",required:!1,type:{name:"((chartFilter: FunnelVizType) => void)"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},simpleMode:{defaultValue:null,description:"",name:"simpleMode",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"]={docgenInfo:ToggleButtonChartFilter.__docgenInfo,name:"ToggleButtonChartFilter",path:"frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"})}catch(__react_docgen_typescript_loader_error){}const funnelCommandLogic=Object(index_esm.kea)({path:["scenes","insights","InsightTabs","FunnelTab","funnelCommandLogic"],connect:[commandPaletteLogic.a],events:{afterMount:()=>{const funnelCommands=[{key:"funnels",resolver:[{icon:icons_FunnelPlotOutlined,display:"Clear Funnel",executor:()=>{var _funnelLogic$findMoun;null===(_funnelLogic$findMoun=funnelLogic.a.findMounted({syncWithUrl:!0}))||void 0===_funnelLogic$findMoun||_funnelLogic$findMoun.actions.clearFunnel()}}],scope:"funnels"}];for(const command of funnelCommands)commandPaletteLogic.a.actions.registerCommand(command)},beforeUnmount:()=>{commandPaletteLogic.a.actions.deregisterScope("funnels")}}});var useDebouncedCallback=__webpack_require__("./node_modules/.pnpm/use-debounce@6.0.1_react@16.14.0/node_modules/use-debounce/esm/useDebouncedCallback.js");const TIME_INTERVAL_BOUNDS={[types.w.Minute]:[1,1440],[types.w.Hour]:[1,24],[types.w.Day]:[1,365],[types.w.Week]:[1,53],[types.w.Month]:[1,12]};function FunnelConversionWindowFilter(){var _conversionWindow$fun2;const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{conversionWindow:conversionWindow,aggregationTargetLabel:aggregationTargetLabel,filters:filters}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setFilters:setFilters}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps)),[localConversionWindow,setLocalConversionWindow]=Object(react.useState)(conversionWindow),options=Object.keys(TIME_INTERVAL_BOUNDS).map((unit=>{var _conversionWindow$fun;return{label:Object(utils.i)(Object(utils.wb)(null!==(_conversionWindow$fun=conversionWindow.funnel_window_interval)&&void 0!==_conversionWindow$fun?_conversionWindow$fun:7,unit,`${unit}s`,!1)),value:unit}})),intervalBounds=TIME_INTERVAL_BOUNDS[null!==(_conversionWindow$fun2=conversionWindow.funnel_window_interval_unit)&&void 0!==_conversionWindow$fun2?_conversionWindow$fun2:types.w.Day],setConversionWindow=Object(useDebouncedCallback.a)((()=>{localConversionWindow.funnel_window_interval===conversionWindow.funnel_window_interval&&localConversionWindow.funnel_window_interval_unit===conversionWindow.funnel_window_interval_unit||setFilters(localConversionWindow)}),200);return Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 ",children:[Object(jsx_runtime.jsxs)("span",{className:"whitespace-nowrap",children:["Conversion window limit"," ",Object(jsx_runtime.jsx)(Tooltip.a,{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("b",{children:"Recommended!"})," Limit to ",aggregationTargetLabel.plural," ",null!=filters.aggregation_group_type_index?"that":"who"," converted within a specific time frame. ",Object(utils.i)(aggregationTargetLabel.plural)," ",null!=filters.aggregation_group_type_index?"that":"who"," do not convert in this time frame will be considered as drop-offs."]}),children:Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:"info-indicator"})})]}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[Object(jsx_runtime.jsx)(src.LemonInput,{type:"number",className:"max-w-20",fullWidth:!1,min:intervalBounds[0],max:intervalBounds[1],defaultValue:conversionWindow.funnel_window_interval,value:localConversionWindow.funnel_window_interval,onChange:funnel_window_interval=>{setLocalConversionWindow((state=>({...state,funnel_window_interval:Number(funnel_window_interval)}))),setConversionWindow()},onBlur:setConversionWindow,onPressEnter:setConversionWindow}),Object(jsx_runtime.jsx)(src.LemonSelect,{dropdownMatchSelectWidth:!1,value:localConversionWindow.funnel_window_interval_unit,onChange:funnel_window_interval_unit=>{funnel_window_interval_unit&&(setLocalConversionWindow((state=>({...state,funnel_window_interval_unit:funnel_window_interval_unit}))),setConversionWindow())},options:options})]})]})}var LemonLabel=__webpack_require__("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx");function FunnelsQuerySteps(_ref){let{insightProps:insightProps}=_ref;const{isStepsEmpty:isStepsEmpty,filterSteps:filterSteps,filters:filters}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setFilters:setFilters}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps)),{groupsTaxonomicTypes:groupsTaxonomicTypes,showGroupsOptions:showGroupsOptions}=Object(index_esm.useValues)(groupsModel.a);return Object(index_esm.useMountedLogic)(funnelCommandLogic),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"flex justify-between items-center",children:[Object(jsx_runtime.jsx)(LemonLabel.a,{children:"Query Steps"}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[Object(jsx_runtime.jsx)("span",{className:"text-muted",children:"Graph type"}),Object(jsx_runtime.jsx)(ToggleButtonChartFilter,{simpleMode:!0})]})]}),Object(jsx_runtime.jsx)(ActionFilter.a,{bordered:!0,filters:filters,setFilters:setFilters,typeKey:"EditFunnel-action",mathAvailability:ActionFilterRow.b.None,hideDeleteBtn:1===filterSteps.length,buttonCopy:"Add step",showSeriesIndicator:!isStepsEmpty,seriesIndicatorType:"numeric",entitiesLimit:20,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[TaxonomicFilter_types.a.EventProperties,TaxonomicFilter_types.a.PersonProperties,TaxonomicFilter_types.a.EventFeatureFlags,...groupsTaxonomicTypes,TaxonomicFilter_types.a.Cohorts,TaxonomicFilter_types.a.Elements]}),Object(jsx_runtime.jsxs)("div",{className:"mt-4 space-y-4",children:[showGroupsOptions&&Object(jsx_runtime.jsxs)("div",{className:"flex items-center w-full gap-2",children:[Object(jsx_runtime.jsx)("span",{children:"Aggregating by"}),Object(jsx_runtime.jsx)(AggregationSelect,{aggregationGroupTypeIndex:filters.aggregation_group_type_index,onChange:newValue=>setFilters({aggregation_group_type_index:newValue})})]}),Object(jsx_runtime.jsx)(FunnelConversionWindowFilter,{})]})]})}try{FunnelsQuerySteps.displayName="FunnelsQuerySteps",FunnelsQuerySteps.__docgenInfo={description:"",displayName:"FunnelsQuerySteps",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"]={docgenInfo:FunnelsQuerySteps.__docgenInfo,name:"FunnelsQuerySteps",path:"frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"})}catch(__react_docgen_typescript_loader_error){}const FunnelStepOrderPicker_options=[{label:"Sequential",value:types.bb.ORDERED},{label:"Strict order",value:types.bb.STRICT},{label:"Any order",value:types.bb.UNORDERED}];function FunnelStepOrderPicker(){const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{filters:filters}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setFilters:setFilters}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps));return Object(jsx_runtime.jsx)(src.LemonSelect,{id:"funnel-step-order-filter","data-attr":"funnel-step-order-filter",value:filters.funnel_order_type||types.bb.ORDERED,onChange:stepOrder=>stepOrder&&setFilters({funnel_order_type:stepOrder}),dropdownMatchSelectWidth:!1,options:FunnelStepOrderPicker_options})}var row=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),col=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),dist_module=__webpack_require__("./node_modules/.pnpm/@react-hook+size@2.1.2_react@16.14.0/node_modules/@react-hook/size/dist/module/index.js");function ExclusionRowSuffix(_ref){var _filters$exclusions$i,_filters$exclusions,_filters$exclusions$i2,_filters$exclusions$i3,_filters$exclusions2,_filters$exclusions2$,_stepRange$funnel_fro,_stepRange$funnel_fro2;let{filter:filter,index:index,onClose:onClose,isVertical:isVertical}=_ref;const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{filters:filters,areFiltersValid:areFiltersValid,numberOfSeries:numberOfSeries,exclusionDefaultStepRange:exclusionDefaultStepRange}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setOneEventExclusionFilter:setOneEventExclusionFilter}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps)),stepRange={funnel_from_step:null!==(_filters$exclusions$i=null===(_filters$exclusions=filters.exclusions)||void 0===_filters$exclusions||null===(_filters$exclusions$i2=_filters$exclusions[index])||void 0===_filters$exclusions$i2?void 0:_filters$exclusions$i2.funnel_from_step)&&void 0!==_filters$exclusions$i?_filters$exclusions$i:exclusionDefaultStepRange.funnel_from_step,funnel_to_step:null!==(_filters$exclusions$i3=null===(_filters$exclusions2=filters.exclusions)||void 0===_filters$exclusions2||null===(_filters$exclusions2$=_filters$exclusions2[index])||void 0===_filters$exclusions2$?void 0:_filters$exclusions2$.funnel_to_step)&&void 0!==_filters$exclusions$i3?_filters$exclusions$i3:exclusionDefaultStepRange.funnel_to_step},onChange=function(){let funnel_from_step=arguments.length>0&&void 0!==arguments[0]?arguments[0]:stepRange.funnel_from_step,funnel_to_step=arguments.length>1&&void 0!==arguments[1]?arguments[1]:stepRange.funnel_to_step;setOneEventExclusionFilter({...filter,funnel_from_step:funnel_from_step,funnel_to_step:funnel_to_step},index)};return Object(jsx_runtime.jsxs)(row.a,{justify:"space-between",align:"middle",wrap:!1,style:{margin:(isVertical?4:0)+"px 0",paddingLeft:4,width:isVertical?"100%":"auto"},children:["between",Object(jsx_runtime.jsx)(es_select.a,{defaultValue:0,disabled:!areFiltersValid,dropdownMatchSelectWidth:!1,dropdownAlign:utils.a.bottomRight,"data-attr":"funnel-exclusion-funnel_from_step-selector",optionLabelProp:"label",value:stepRange.funnel_from_step,onChange:fromStep=>onChange(fromStep),onBlur:()=>onChange,style:{marginLeft:4,marginRight:4},children:Array.from(Array(numberOfSeries).keys()).slice(0,-1).map((stepIndex=>Object(jsx_runtime.jsxs)(es_select.a.Option,{value:stepIndex,label:`Step ${stepIndex+1}`,children:["Step ",stepIndex+1]},stepIndex)))}),"and",Object(jsx_runtime.jsx)(es_select.a,{defaultValue:(null!==(_stepRange$funnel_fro=stepRange.funnel_from_step)&&void 0!==_stepRange$funnel_fro?_stepRange$funnel_fro:0)+1,disabled:!areFiltersValid,dropdownMatchSelectWidth:!1,dropdownAlign:utils.a.bottomRight,"data-attr":"funnel-exclusion-funnel_to_step-selector",optionLabelProp:"label",value:stepRange.funnel_to_step,onChange:toStep=>onChange(stepRange.funnel_from_step,toStep),onBlur:()=>onChange,style:{marginLeft:4},children:Array.from(Array(numberOfSeries).keys()).slice((null!==(_stepRange$funnel_fro2=stepRange.funnel_from_step)&&void 0!==_stepRange$funnel_fro2?_stepRange$funnel_fro2:0)+1).map((stepIndex=>Object(jsx_runtime.jsxs)(es_select.a.Option,{value:stepIndex,label:`Step ${stepIndex+1}`,children:["Step ",stepIndex+1]},stepIndex)))}),Object(jsx_runtime.jsx)("div",{style:{flex:1}}),Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.IconDelete,{}),status:"primary-alt",onClick:onClose,"data-attr":"delete-prop-exclusion-filter",title:"Delete event exclusion series"})]})}function ExclusionRow(_ref2){let{seriesIndicator:seriesIndicator,filter:filter,suffix:suffix,isVertical:isVertical}=_ref2;return Object(jsx_runtime.jsxs)(row.a,{wrap:!1,align:isVertical?"top":"middle",style:{width:"100%"},children:[Object(jsx_runtime.jsx)(col.a,{style:{padding:(isVertical?5:0)+"px 8px"},children:seriesIndicator}),Object(jsx_runtime.jsx)(col.a,{flex:"auto",children:Object(jsx_runtime.jsxs)(row.a,{align:"middle",wrap:isVertical,children:[filter,suffix]})})]})}function FunnelExclusionsFilter(){const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{exclusionFilters:exclusionFilters,areFiltersValid:areFiltersValid,exclusionDefaultStepRange:exclusionDefaultStepRange}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setEventExclusionFilters:setEventExclusionFilters}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps)),ref=Object(react.useRef)(null),[width]=Object(dist_module.a)(ref),isVerticalLayout=!!width&&width<450;return Object(jsx_runtime.jsx)(ActionFilter.a,{ref:ref,setFilters:setEventExclusionFilters,filters:exclusionFilters,typeKey:"funnel-exclusions-filter",addFilterDefaultOptions:{id:"$pageview",name:"$pageview",type:types.p.EVENTS,...exclusionDefaultStepRange},disabled:!areFiltersValid,buttonCopy:"Add exclusion",actionsTaxonomicGroupTypes:[TaxonomicFilter_types.a.Events],mathAvailability:ActionFilterRow.b.None,hideFilter:!0,hideRename:!0,hideDeleteBtn:!0,seriesIndicatorType:"alpha",renderRow:props=>Object(jsx_runtime.jsx)(ExclusionRow,{...props,isVertical:isVerticalLayout}),customRowSuffix:props=>Object(jsx_runtime.jsx)(ExclusionRowSuffix,{...props,isVertical:isVerticalLayout})})}function FunnelStepReferencePicker(){const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{stepReference:stepReference}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setStepReference:setStepReference}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps)),options=[{value:types.A.total,label:"Overall conversion"},{value:types.A.previous,label:"Relative to previous step"}];return Object(jsx_runtime.jsx)(src.LemonSelect,{value:stepReference||types.A.total,onChange:stepRef=>stepRef&&setStepReference(stepRef),dropdownMatchSelectWidth:!1,"data-attr":"funnel-step-reference-selector",options:options})}var Field=__webpack_require__("./frontend/src/lib/forms/Field.tsx");function FunnelsAdvanced(_ref){let{filters:filters,insightProps:insightProps}=_ref;const{aggregationTargetLabel:aggregationTargetLabel,advancedOptionsUsedCount:advancedOptionsUsedCount}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setFilters:setFilters,setStepReference:setStepReference}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps));return Object(index_esm.useMountedLogic)(funnelCommandLogic),Object(jsx_runtime.jsxs)("div",{className:"space-y-4",children:[Object(jsx_runtime.jsx)(Field.b,{label:"Step order",info:Object(jsx_runtime.jsxs)("ul",{className:"list-disc pl-4",children:[Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("b",{children:"Sequential"})," - Step B must happen after Step A, but any number events can happen between A and B."]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("b",{children:"Strict order"})," - Step B must happen directly after Step A without any events in between."]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("b",{children:"Any order"})," - Steps can be completed in any sequence."]})]}),children:Object(jsx_runtime.jsx)(FunnelStepOrderPicker,{})}),Object(jsx_runtime.jsx)(Field.b,{label:"Conversion rate calculation",children:Object(jsx_runtime.jsx)(FunnelStepReferencePicker,{})}),Object(jsx_runtime.jsx)(Field.b,{label:"Exclusion steps",info:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Exclude ",aggregationTargetLabel.plural," ",null!=filters.aggregation_group_type_index?"that":"who"," completed the specified event between two specific steps. Note that these ",aggregationTargetLabel.plural," will be"," ",Object(jsx_runtime.jsx)("b",{children:"completely excluded from the entire funnel"}),"."]}),children:Object(jsx_runtime.jsx)(FunnelExclusionsFilter,{})}),!!advancedOptionsUsedCount&&Object(jsx_runtime.jsx)("div",{className:"mt-4",children:Object(jsx_runtime.jsx)(LemonButton.a,{status:"danger",onClick:()=>{setStepReference(types.A.total),setFilters({funnel_order_type:types.bb.ORDERED,exclusions:[]})},children:"Reset advanced options"})})]})}try{FunnelsAdvanced.displayName="FunnelsAdvanced",FunnelsAdvanced.__docgenInfo={description:"",displayName:"FunnelsAdvanced",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"]={docgenInfo:FunnelsAdvanced.__docgenInfo,name:"FunnelsAdvanced",path:"frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"})}catch(__react_docgen_typescript_loader_error){}var PathsExclusions=__webpack_require__("./frontend/src/scenes/insights/EditorFilters/PathsExclusions.tsx"),cleanFilters=__webpack_require__("./frontend/src/scenes/insights/utils/cleanFilters.ts"),LemonBadge=(__webpack_require__("./frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.scss"),__webpack_require__("./frontend/src/lib/components/LemonBadge/LemonBadge.tsx"));function EditorFilterGroup_EditorFilterGroup(_ref){let{editorFilterGroup:editorFilterGroup,insight:insight,insightProps:insightProps}=_ref;const{title:title,editorFilters:editorFilters,count:count,defaultExpanded:defaultExpanded=!0}=editorFilterGroup,[isRowExpanded,setIsRowExpanded]=Object(react.useState)(defaultExpanded),{featureFlags:featureFlags}=Object(index_esm.useValues)(featureFlagLogic.a),usingEditorPanels=featureFlags[constants.i.INSIGHT_EDITOR_PANELS];return Object(jsx_runtime.jsxs)("div",{className:Object(clsx_m.default)("EditorFilterGroup",{"EditorFilterGroup--editorpanels":usingEditorPanels}),children:[title&&Object(jsx_runtime.jsx)("div",{className:"EditorFilterGroup__title",children:Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",fullWidth:!0,onClick:()=>setIsRowExpanded(!isRowExpanded),sideIcon:isRowExpanded?Object(jsx_runtime.jsx)(icons.IconUnfoldLess,{}):Object(jsx_runtime.jsx)(icons.IconUnfoldMore,{}),title:isRowExpanded?"Show less":"Show more","data-attr":"editor-filter-group-collapse-"+Object(utils.Fb)(title),children:Object(jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2 font-semibold",children:[Object(jsx_runtime.jsx)("span",{children:title}),Object(jsx_runtime.jsx)(LemonBadge.a.Number,{count:count||0})]})})}),!usingEditorPanels||isRowExpanded?Object(jsx_runtime.jsx)("div",{className:"EditorFilterGroup__content",children:editorFilters.map((_ref2=>{var _insight$filters,_ref3,_insight$filters2;let{label:Label,tooltip:tooltip,showOptional:showOptional,key:key,valueSelector:valueSelector,component:Component}=_ref2;const editorFilterProps="function"==typeof Label||Component?{insight:insight,insightProps:insightProps,filters:null!==(_insight$filters=insight.filters)&&void 0!==_insight$filters?_insight$filters:Object(cleanFilters.a)({}),value:null!==(_ref3=valueSelector?valueSelector(insight):null==insight||null===(_insight$filters2=insight.filters)||void 0===_insight$filters2?void 0:_insight$filters2[key])&&void 0!==_ref3?_ref3:null}:null;return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(Field.b,{label:"function"==typeof Label?Object(jsx_runtime.jsx)(Label,{...editorFilterProps}):Label,info:tooltip,showOptional:showOptional,children:Component?Object(jsx_runtime.jsx)(Component,{...editorFilterProps}):null})},key)}))}):null]},title)}try{EditorFilterGroup_EditorFilterGroup.displayName="EditorFilterGroup",EditorFilterGroup_EditorFilterGroup.__docgenInfo={description:"",displayName:"EditorFilterGroup",props:{editorFilterGroup:{defaultValue:null,description:"",name:"editorFilterGroup",required:!0,type:{name:"InsightEditorFilterGroup<InsightEditorFilter<EditorFilterProps>>"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"]={docgenInfo:EditorFilterGroup_EditorFilterGroup.__docgenInfo,name:"EditorFilterGroup",path:"frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"})}catch(__react_docgen_typescript_loader_error){}var SavedInsights=__webpack_require__("./frontend/src/scenes/saved-insights/SavedInsights.tsx");function InsightTypeSelector(_ref){let{value:value}=_ref;const{setActiveView:setActiveView}=Object(index_esm.useActions)(insightLogic.c);return Object(jsx_runtime.jsx)(src.LemonSelect,{options:SavedInsights.INSIGHT_TYPE_OPTIONS,value:value,onChange:v=>{v&&setActiveView(v)},fullWidth:!0,"data-attr":"insight-type"})}try{InsightTypeSelector.displayName="InsightTypeSelector",InsightTypeSelector.__docgenInfo={description:"",displayName:"InsightTypeSelector",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"]={docgenInfo:InsightTypeSelector.__docgenInfo,name:"InsightTypeSelector",path:"frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"})}catch(__react_docgen_typescript_loader_error){}var EditorFilters=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss"),EditorFilters_default=__webpack_require__.n(EditorFilters),EditorFilters_options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(EditorFilters_default.a,EditorFilters_options),EditorFilters_default.a.locals;function Attribution(_ref){let{insightProps:insightProps}=_ref;const{setFilters:setFilters}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps)),{filters:filters,breakdownAttributionStepOptions:breakdownAttributionStepOptions}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps));return Object(jsx_runtime.jsx)(src.LemonSelect,{value:filters.breakdown_attribution_type||types.j.FirstTouch,placeholder:"Attribution",options:[{value:types.j.FirstTouch,label:"First touchpoint"},{value:types.j.LastTouch,label:"Last touchpoint"},{value:types.j.AllSteps,label:"All steps"},filters.funnel_order_type===types.bb.UNORDERED?{value:types.j.Step,label:"Any step"}:{value:types.j.Step,label:"Specific step",element:Object(jsx_runtime.jsx)(src.LemonSelect,{className:"ml-2",onChange:value=>{null!==value&&setFilters({breakdown_attribution_type:types.j.Step,breakdown_attribution_value:value})},placeholder:`Step ${filters.breakdown_attribution_value?filters.breakdown_attribution_value+1:1}`,options:breakdownAttributionStepOptions})}],onChange:value=>{value&&setFilters({breakdown_attribution_type:value,breakdown_attribution_value:filters.breakdown_attribution_value||0})},dropdownMaxContentWidth:!0,"data-attr":"breakdown-attributions"})}try{Attribution.displayName="Attribution",Attribution.__docgenInfo={description:"",displayName:"Attribution",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"]={docgenInfo:Attribution.__docgenInfo,name:"Attribution",path:"frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"})}catch(__react_docgen_typescript_loader_error){}var PayGateMini=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx");function EditorFilters_EditorFilters_EditorFilters(_ref){var _user$organization,_filters$breakdowns;let{insightProps:insightProps,showing:showing}=_ref;const{user:user}=Object(index_esm.useValues)(userLogic.a),availableFeatures=(null==user||null===(_user$organization=user.organization)||void 0===_user$organization?void 0:_user$organization.available_features)||[],logic=Object(insightLogic.c)(insightProps),{filters:filters,insight:insight,filterPropertiesCount:filterPropertiesCount}=Object(index_esm.useValues)(logic),{advancedOptionsUsedCount:advancedOptionsUsedCount}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{featureFlags:featureFlags}=Object(index_esm.useValues)(featureFlagLogic.a),usingEditorPanels=featureFlags[constants.i.INSIGHT_EDITOR_PANELS],isTrends=Object(sharedUtils.j)(filters),isLifecycle=Object(sharedUtils.f)(filters),isStickiness=Object(sharedUtils.i)(filters),isRetention=Object(sharedUtils.h)(filters),isPaths=Object(sharedUtils.g)(filters),isFunnels=Object(sharedUtils.e)(filters),isTrendsLike=isTrends||isLifecycle||isStickiness,hasBreakdown=isTrends&&!constants.n.includes(filters.display||types.k.ActionsLineGraph)||isRetention&&featureFlags[constants.i.RETENTION_BREAKDOWN]&&filters.display!==types.k.ActionsLineGraph||isFunnels&&filters.funnel_viz_type===types.B.Steps,hasPropertyFilters=isTrends||isStickiness||isRetention||isPaths||isFunnels,hasPathsAdvanced=availableFeatures.includes(types.e.PATHS_ADVANCED),hasAttribution=isFunnels&&filters.funnel_viz_type===types.B.Steps,advancedOptionsCount=advancedOptionsUsedCount+(isTrends&&filters.formula?1:0),advancedOptionsExpanded=!!advancedOptionsCount,editorFilters=[{title:"General",editorFilters:filterFalsy([usingEditorPanels?{key:"insight",label:"Type",component:InsightTypeSelector}:void 0,isRetention&&{key:"retention-summary",label:"Retention Summary",component:RetentionSummary},...isPaths?filterFalsy([{key:"event-types",label:"Event Types",component:PathsEventTypes.a},hasPathsAdvanced&&{key:"wildcard-groups",label:"Wildcard Groups",showOptional:!0,component:PathsWildcardGroups.a,tooltip:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Use wildcard matching to group events by unique values in path item names. Use an asterisk (*) in place of unique values. For example, instead of /merchant/1234/payment, replace the unique value with an asterisk /merchant/*/payment. ",Object(jsx_runtime.jsx)("b",{children:"Use a comma to separate multiple wildcards."})]})},{key:"start-target",label:"Starts at",component:PathsTarget.c},hasPathsAdvanced&&{key:"ends-target",label:"Ends at",component:PathsTarget.a}]):[],...isFunnels?filterFalsy([{key:"query-steps",component:FunnelsQuerySteps}]):[]])},{title:"Series",editorFilters:filterFalsy([isTrendsLike&&{key:"series",label:isTrends?TrendsSeriesLabel:void 0,component:TrendsSeries},isTrends?{key:"formula",label:TrendsFormulaLabel,component:TrendsFormula}:null])},{title:"Filters",count:filterPropertiesCount,editorFilters:filterFalsy([isLifecycle?{key:"properties",label:usingEditorPanels?void 0:"Filters",position:"right",component:LifecycleGlobalFilters}:null,isLifecycle?{key:"toggles",label:"Lifecycle Toggles",position:"right",component:LifecycleToggles_LifecycleToggles}:null,hasPropertyFilters?{key:"properties",label:usingEditorPanels?void 0:"Filters",position:"right",component:GlobalAndOrFilters}:null])},{title:"Breakdown",count:(null===(_filters$breakdowns=filters.breakdowns)||void 0===_filters$breakdowns?void 0:_filters$breakdowns.length)||(filters.breakdown?1:0),position:"right",editorFilters:filterFalsy([hasBreakdown?{key:"breakdown",label:"Breakdown by",position:"right",tooltip:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Use breakdown to see the aggregation (total volume, active users, etc.) for each value of that property. For example, breaking down by Current URL with total volume will give you the event volume for each URL your users have visited."}),component:Breakdown}:null,hasAttribution?{key:"attribution",label:"Attribution type",position:"right",tooltip:Object(jsx_runtime.jsxs)("div",{children:["Attribution type determines which property value to use for the entire funnel.",Object(jsx_runtime.jsxs)("ul",{className:"list-disc pl-4",children:[Object(jsx_runtime.jsx)("li",{children:"First step: the first property value seen from all steps is chosen."}),Object(jsx_runtime.jsx)("li",{children:"Last step: last property value seen from all steps is chosen."}),Object(jsx_runtime.jsx)("li",{children:"Specific step: the property value seen at that specific step is chosen."}),Object(jsx_runtime.jsx)("li",{children:"All steps: the property value must be seen in all steps."}),Object(jsx_runtime.jsx)("li",{children:"Any step: the property value must be seen on at least one step of the funnel."})]})]}),component:Attribution}:null])},{title:"Exclusions",position:"right",editorFilters:filterFalsy([isPaths&&{key:"paths-exclusions",label:"Exclusions",position:"right",tooltip:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Exclude events from Paths visualisation. You can use wildcard groups in exclusions as well."}),component:PathsExclusions.a}])},{title:"Advanced Options",position:"left",defaultExpanded:advancedOptionsExpanded,count:advancedOptionsCount,editorFilters:filterFalsy([isPaths&&{key:"paths-advanced",component:props=>Object(jsx_runtime.jsx)(PayGateMini.a,{feature:types.e.PATHS_ADVANCED,children:Object(jsx_runtime.jsx)(PathsAdvanced.a,{...props})})},isFunnels&&{key:"funnels-advanced",component:FunnelsAdvanced}])}].filter((x=>x.editorFilters.length>0));let legacyEditorFilterGroups=[];if(!usingEditorPanels){legacyEditorFilterGroups=[{title:"Left",editorFilters:editorFilters.reduce(((acc,x)=>acc.concat(x.editorFilters.filter((y=>"right"!==y.position)))),[])},{title:"right",editorFilters:editorFilters.reduce(((acc,x)=>acc.concat(x.editorFilters.filter((y=>"right"===y.position)))),[])}]}return Object(jsx_runtime.jsx)(CSSTransition.a,{in:showing,timeout:250,classNames:"anim-",mountOnEnter:!0,unmountOnExit:!0,children:Object(jsx_runtime.jsx)("div",{className:Object(clsx_m.default)("EditorFiltersWrapper",{"EditorFiltersWrapper--editorpanels":usingEditorPanels,"EditorFiltersWrapper--singlecolumn":usingEditorPanels||isFunnels}),children:Object(jsx_runtime.jsx)("div",{className:"EditorFilters",children:(usingEditorPanels||isFunnels?editorFilters:legacyEditorFilterGroups).map((editorFilterGroup=>Object(jsx_runtime.jsx)(EditorFilterGroup_EditorFilterGroup,{editorFilterGroup:editorFilterGroup,insight:insight,insightProps:insightProps},editorFilterGroup.title)))})})})}function filterFalsy(a){return a.filter((e=>!!e))}try{EditorFilters_EditorFilters_EditorFilters.displayName="EditorFilters",EditorFilters_EditorFilters_EditorFilters.__docgenInfo={description:"",displayName:"EditorFilters",props:{insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},showing:{defaultValue:null,description:"",name:"showing",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"]={docgenInfo:EditorFilters_EditorFilters_EditorFilters.__docgenInfo,name:"EditorFilters",path:"frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"})}catch(__react_docgen_typescript_loader_error){}var More=__webpack_require__("./frontend/src/lib/components/LemonButton/More.tsx"),LemonDivider=__webpack_require__("./frontend/src/lib/components/LemonDivider/index.ts"),savedInsightsLogic=__webpack_require__("./frontend/src/scenes/saved-insights/savedInsightsLogic.ts"),SubscriptionsModal=__webpack_require__("./frontend/src/lib/components/Subscriptions/SubscriptionsModal.tsx"),UserActivityIndicator=__webpack_require__("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),SharingModal=__webpack_require__("./frontend/src/lib/components/Sharing/SharingModal.tsx"),ExportButton=__webpack_require__("./frontend/src/lib/components/ExportButton/ExportButton.tsx"),tagsModel=__webpack_require__("./frontend/src/models/tagsModel.ts"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),InlineEditorButton=__webpack_require__("./frontend/src/queries/nodes/Node/InlineEditorButton.tsx");function Insight_Insight(_ref){var _insight$dashboards,_insight$tags,_insight$tags2;let{insightId:insightId}=_ref;const{insightMode:insightMode,subscriptionId:subscriptionId}=Object(index_esm.useValues)(insightSceneLogic.a),{setInsightMode:setInsightMode}=Object(index_esm.useActions)(insightSceneLogic.a),logic=Object(insightLogic.c)({dashboardItemId:insightId||"new"}),{insightProps:insightProps,insightLoading:insightLoading,filtersKnown:filtersKnown,filters:filters,canEditInsight:canEditInsight,insight:insight,insightChanged:insightChanged,tagLoading:tagLoading,insightSaving:insightSaving,exporterResourceParams:exporterResourceParams,isUsingDataExploration:isUsingDataExploration,erroredQueryId:erroredQueryId}=Object(index_esm.useValues)(logic),{saveInsight:saveInsight,setInsightMetadata:setInsightMetadata,saveAs:saveAs,reportInsightViewedForRecentInsights:reportInsightViewedForRecentInsights,abortAnyRunningQuery:abortAnyRunningQuery,loadResults:loadResults}=Object(index_esm.useActions)(logic),{duplicateInsight:duplicateInsight,loadInsights:loadInsights}=Object(index_esm.useActions)(savedInsightsLogic.b),{query:query}=Object(index_esm.useValues)(Object(insightDataLogic.a)(insightProps)),{setQuery:setQuery}=Object(index_esm.useActions)(Object(insightDataLogic.a)(insightProps));Object(index_esm.useMountedLogic)(insightCommandLogic(insightProps));const{hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),{aggregationLabel:aggregationLabel}=Object(index_esm.useValues)(groupsModel.a),{cohortsById:cohortsById}=Object(index_esm.useValues)(cohortsModel.a),{mathDefinitions:mathDefinitions}=Object(index_esm.useValues)(mathsLogic.g),{featureFlags:featureFlags}=Object(index_esm.useValues)(featureFlagLogic.a),{tags:tags}=Object(index_esm.useValues)(tagsModel.a),{currentTeamId:currentTeamId}=Object(index_esm.useValues)(teamLogic.a),{push:push}=Object(index_esm.useActions)(lib.router);Object(react.useEffect)((()=>{reportInsightViewedForRecentInsights()}),[insightId]),Object(react.useEffect)((()=>(erroredQueryId&&loadResults(),()=>{abortAnyRunningQuery()})),[]);const usingEditorPanels=featureFlags[constants.i.INSIGHT_EDITOR_PANELS];if("new"!==insightId&&insightLoading&&!filtersKnown)return Object(jsx_runtime.jsx)(InsightSkeleton,{});const insightScene=Object(jsx_runtime.jsxs)("div",{className:"insights-page",children:["new"!==insightId&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SubscriptionsModal.b,{isOpen:insightMode===types.G.Subscriptions,closeModal:()=>push(urls.a.insightView(insight.short_id)),insightShortId:insightId,subscriptionId:subscriptionId}),Object(jsx_runtime.jsx)(SharingModal.a,{isOpen:insightMode===types.G.Sharing,closeModal:()=>push(urls.a.insightView(insight.short_id)),insightShortId:insightId,insight:insight})]}),Object(jsx_runtime.jsx)(PageHeader.a,{title:Object(jsx_runtime.jsx)(EditableField.a,{name:"name",value:insight.name||"",placeholder:isUsingDataExploration?Object(insights_utils.k)(query.source,aggregationLabel,cohortsById,mathDefinitions):Object(insights_utils.j)(filters,aggregationLabel,cohortsById,mathDefinitions),onSave:value=>setInsightMetadata({name:value}),saveOnBlur:!0,maxLength:400,mode:canEditInsight?void 0:"view","data-attr":"insight-name",notice:canEditInsight?void 0:{icon:Object(jsx_runtime.jsx)(icons.IconLock,{}),tooltip:"You don't have edit permissions on any of the dashboards this insight belongs to. Ask a dashboard collaborator with edit access to add you."}}),buttons:Object(jsx_runtime.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[insightMode!==types.G.Edit&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(More.a,{overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>duplicateInsight(insight,!0),fullWidth:!0,"data-attr":"duplicate-insight-from-insight-view",children:"Duplicate"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>setInsightMetadata({favorited:!insight.favorited}),fullWidth:!0,children:insight.favorited?"Remove from favorites":"Add to favorites"}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>insight.short_id?push(urls.a.insightSharing(insight.short_id)):null,fullWidth:!0,children:"Share or embed"}),insight.short_id&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(SubscriptionsModal.a,{insightShortId:insight.short_id}),exporterResourceParams?Object(jsx_runtime.jsx)(ExportButton.a,{fullWidth:!0,items:[{export_format:types.t.PNG,insight:insight.id},{export_format:types.t.CSV,export_context:exporterResourceParams}]}):null,Object(jsx_runtime.jsx)(LemonDivider.a,{})]}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"danger",onClick:()=>Object(utils.x)({object:insight,endpoint:`projects/${currentTeamId}/insights`,callback:()=>{loadInsights(),push(urls.a.savedInsights())}}),fullWidth:!0,children:"Delete insight"})]})}),Object(jsx_runtime.jsx)(LemonDivider.a,{vertical:!0})]}),insightMode===types.G.Edit&&insight.saved&&Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",onClick:()=>setInsightMode(types.G.View,null),children:"Cancel"}),insightMode!==types.G.Edit&&insight.short_id&&Object(jsx_runtime.jsx)(AddToDashboard_AddToDashboard_AddToDashboard,{insight:insight,canEditInsight:canEditInsight}),insightMode!==types.G.Edit?canEditInsight&&Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary",onClick:()=>setInsightMode(types.G.Edit,null),"data-attr":"insight-edit-button",children:"Edit"}):Object(jsx_runtime.jsx)(InsightSaveButton,{saveAs:saveAs,saveInsight:saveInsight,isSaved:insight.saved,addingToDashboard:!(null===(_insight$dashboards=insight.dashboards)||void 0===_insight$dashboards||!_insight$dashboards.length||insight.id),insightSaving:insightSaving,insightChanged:insightChanged}),isUsingDataExploration&&Object(jsx_runtime.jsx)(InlineEditorButton.a,{query:query,setQuery:setQuery})]}),caption:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!(!canEditInsight&&!insight.description)&&Object(jsx_runtime.jsx)(EditableField.a,{multiline:!0,name:"description",value:insight.description||"",placeholder:"Description (optional)",onSave:value=>setInsightMetadata({description:value}),saveOnBlur:!0,maxLength:400,mode:canEditInsight?void 0:"view","data-attr":"insight-description",compactButtons:!0,paywall:!hasAvailableFeature(types.e.DASHBOARD_COLLABORATION)}),canEditInsight?Object(jsx_runtime.jsx)(ObjectTags.a,{tags:null!==(_insight$tags=insight.tags)&&void 0!==_insight$tags?_insight$tags:[],onChange:(_,tags)=>setInsightMetadata({tags:null!=tags?tags:[]}),saving:tagLoading,tagsAvailable:tags,className:"insight-metadata-tags","data-attr":"insight-tags"}):null!==(_insight$tags2=insight.tags)&&void 0!==_insight$tags2&&_insight$tags2.length?Object(jsx_runtime.jsx)(ObjectTags.a,{tags:insight.tags,saving:tagLoading,className:"insight-metadata-tags","data-attr":"insight-tags",staticOnly:!0}):null,Object(jsx_runtime.jsx)(UserActivityIndicator.a,{at:insight.last_modified_at,by:insight.last_modified_by,className:"mt-2"})]})}),isUsingDataExploration?Object(jsx_runtime.jsx)(Query.a,{query:query,setQuery:setQuery}):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!usingEditorPanels&&insightMode===types.G.Edit&&Object(jsx_runtime.jsx)(InsightsNav.a,{}),Object(jsx_runtime.jsxs)("div",{className:Object(clsx_m.default)("insight-wrapper",{"insight-wrapper--editorpanels":usingEditorPanels,"insight-wrapper--singlecolumn":!usingEditorPanels&&filters.insight===types.F.FUNNELS}),children:[Object(jsx_runtime.jsx)(EditorFilters_EditorFilters_EditorFilters,{insightProps:insightProps,showing:insightMode===types.G.Edit}),Object(jsx_runtime.jsx)("div",{className:"insights-container","data-attr":"insight-view",children:Object(jsx_runtime.jsx)(InsightContainer.a,{insightMode:insightMode})})]})]})]});return Object(jsx_runtime.jsx)(index_esm.BindLogic,{logic:insightLogic.c,props:insightProps,children:insightScene})}try{Insight_Insight.displayName="Insight",Insight_Insight.__docgenInfo={description:"",displayName:"Insight",props:{insightId:{defaultValue:null,description:"",name:"insightId",required:!0,type:{name:'"new" | InsightShortId'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/Insight.tsx#Insight"]={docgenInfo:Insight_Insight.__docgenInfo,name:"Insight",path:"frontend/src/scenes/insights/Insight.tsx#Insight"})}catch(__react_docgen_typescript_loader_error){}var NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx");function InsightScene(){var _insightCache$logic,_insightCache$logic$v;const{insightId:insightId,insight:insight,insightCache:insightCache}=Object(index_esm.useValues)(insightSceneLogic.a);return"new"===insightId||insightId&&null!=insight&&insight.id&&null!=insight&&insight.short_id?Object(jsx_runtime.jsx)(Insight_Insight,{insightId:insightId}):null!=insightCache&&null!==(_insightCache$logic=insightCache.logic)&&void 0!==_insightCache$logic&&null!==(_insightCache$logic$v=_insightCache$logic.values)&&void 0!==_insightCache$logic$v&&_insightCache$logic$v.insightLoading?Object(jsx_runtime.jsx)(InsightSkeleton,{}):Object(jsx_runtime.jsx)(NotFound.a,{object:"insight"})}const scene={component:InsightScene,logic:insightSceneLogic.a}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_ClockCircleOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_ClockCircleOutlined_ClockCircleOutlined=function ClockCircleOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_ClockCircleOutlined}))};icons_ClockCircleOutlined_ClockCircleOutlined.displayName="ClockCircleOutlined";__webpack_exports__.a=react.forwardRef(icons_ClockCircleOutlined_ClockCircleOutlined)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CommentOutlined.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_CommentOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_CommentOutlined_CommentOutlined=function CommentOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_CommentOutlined}))};icons_CommentOutlined_CommentOutlined.displayName="CommentOutlined";__webpack_exports__.a=react.forwardRef(icons_CommentOutlined_CommentOutlined)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FallOutlined.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_FallOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_FallOutlined_FallOutlined=function FallOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_FallOutlined}))};icons_FallOutlined_FallOutlined.displayName="FallOutlined";__webpack_exports__.a=react.forwardRef(icons_FallOutlined_FallOutlined)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LineChartOutlined.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_LineChartOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_LineChartOutlined_LineChartOutlined=function LineChartOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_LineChartOutlined}))};icons_LineChartOutlined_LineChartOutlined.displayName="LineChartOutlined";__webpack_exports__.a=react.forwardRef(icons_LineChartOutlined_LineChartOutlined)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js":function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_RiseOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),icons_RiseOutlined_RiseOutlined=function RiseOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_RiseOutlined}))};icons_RiseOutlined_RiseOutlined.displayName="RiseOutlined";__webpack_exports__.a=react.forwardRef(icons_RiseOutlined_RiseOutlined)},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),_typeof=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),_extends2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),React=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),_classnames=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),_rcCheckbox=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/rc-checkbox@2.3.2_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-checkbox/es/index.js")),_Group=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js"),_configProvider=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js"),_devWarning=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/_util/devWarning.js"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},InternalCheckbox=function InternalCheckbox(_a,ref){var _classNames,customizePrefixCls=_a.prefixCls,className=_a.className,children=_a.children,_a$indeterminate=_a.indeterminate,indeterminate=void 0!==_a$indeterminate&&_a$indeterminate,style=_a.style,onMouseEnter=_a.onMouseEnter,onMouseLeave=_a.onMouseLeave,_a$skipGroup=_a.skipGroup,skipGroup=void 0!==_a$skipGroup&&_a$skipGroup,restProps=__rest(_a,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),_React$useContext=React.useContext(_configProvider.ConfigContext),getPrefixCls=_React$useContext.getPrefixCls,direction=_React$useContext.direction,checkboxGroup=React.useContext(_Group.GroupContext),prevValue=React.useRef(restProps.value);React.useEffect((function(){null==checkboxGroup||checkboxGroup.registerValue(restProps.value),(0,_devWarning.default)("checked"in restProps||!!checkboxGroup||!("value"in restProps),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),React.useEffect((function(){if(!skipGroup)return restProps.value!==prevValue.current&&(null==checkboxGroup||checkboxGroup.cancelValue(prevValue.current),null==checkboxGroup||checkboxGroup.registerValue(restProps.value)),function(){return null==checkboxGroup?void 0:checkboxGroup.cancelValue(restProps.value)}}),[restProps.value]);var prefixCls=getPrefixCls("checkbox",customizePrefixCls),checkboxProps=(0,_extends2.default)({},restProps);checkboxGroup&&!skipGroup&&(checkboxProps.onChange=function(){restProps.onChange&&restProps.onChange.apply(restProps,arguments),checkboxGroup.toggleOption&&checkboxGroup.toggleOption({label:children,value:restProps.value})},checkboxProps.name=checkboxGroup.name,checkboxProps.checked=-1!==checkboxGroup.value.indexOf(restProps.value),checkboxProps.disabled=restProps.disabled||checkboxGroup.disabled);var classString=(0,_classnames.default)((_classNames={},(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-wrapper"),!0),(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-rtl"),"rtl"===direction),(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-wrapper-checked"),checkboxProps.checked),(0,_defineProperty2.default)(_classNames,"".concat(prefixCls,"-wrapper-disabled"),checkboxProps.disabled),_classNames),className),checkboxClass=(0,_classnames.default)((0,_defineProperty2.default)({},"".concat(prefixCls,"-indeterminate"),indeterminate));return React.createElement("label",{className:classString,style:style,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave},React.createElement(_rcCheckbox.default,(0,_extends2.default)({},checkboxProps,{prefixCls:prefixCls,className:checkboxClass,ref:ref})),void 0!==children&&React.createElement("span",null,children))},Checkbox=React.forwardRef(InternalCheckbox);Checkbox.displayName="Checkbox";var _default=Checkbox;exports.default=_default},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),_typeof=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GroupContext=void 0;var _extends2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),_defineProperty2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),_toConsumableArray2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/toConsumableArray.js")),_slicedToArray2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/slicedToArray.js")),React=function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),_classnames=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),_omit=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/rc-util@5.24.4_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-util/lib/omit.js")),_Checkbox=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js")),_configProvider=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js");function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},GroupContext=React.createContext(null);exports.GroupContext=GroupContext;var InternalCheckboxGroup=function InternalCheckboxGroup(_a,ref){var defaultValue=_a.defaultValue,children=_a.children,_a$options=_a.options,options=void 0===_a$options?[]:_a$options,customizePrefixCls=_a.prefixCls,className=_a.className,style=_a.style,onChange=_a.onChange,restProps=__rest(_a,["defaultValue","children","options","prefixCls","className","style","onChange"]),_React$useContext=React.useContext(_configProvider.ConfigContext),getPrefixCls=_React$useContext.getPrefixCls,direction=_React$useContext.direction,_React$useState=React.useState(restProps.value||defaultValue||[]),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1],_React$useState3=React.useState([]),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),registeredValues=_React$useState4[0],setRegisteredValues=_React$useState4[1];React.useEffect((function(){"value"in restProps&&setValue(restProps.value||[])}),[restProps.value]);var getOptions=function getOptions(){return options.map((function(option){return"string"==typeof option?{label:option,value:option}:option}))},prefixCls=getPrefixCls("checkbox",customizePrefixCls),groupPrefixCls="".concat(prefixCls,"-group"),domProps=(0,_omit.default)(restProps,["value","disabled"]);options&&options.length>0&&(children=getOptions().map((function(option){return React.createElement(_Checkbox.default,{prefixCls:prefixCls,key:option.value.toString(),disabled:"disabled"in option?option.disabled:restProps.disabled,value:option.value,checked:-1!==value.indexOf(option.value),onChange:option.onChange,className:"".concat(groupPrefixCls,"-item"),style:option.style},option.label)})));var context={toggleOption:function toggleOption(option){var optionIndex=value.indexOf(option.value),newValue=(0,_toConsumableArray2.default)(value);-1===optionIndex?newValue.push(option.value):newValue.splice(optionIndex,1),"value"in restProps||setValue(newValue);var opts=getOptions();null==onChange||onChange(newValue.filter((function(val){return-1!==registeredValues.indexOf(val)})).sort((function(a,b){return opts.findIndex((function(opt){return opt.value===a}))-opts.findIndex((function(opt){return opt.value===b}))})))},value:value,disabled:restProps.disabled,name:restProps.name,registerValue:function registerValue(val){setRegisteredValues((function(prevValues){return[].concat((0,_toConsumableArray2.default)(prevValues),[val])}))},cancelValue:function cancelValue(val){setRegisteredValues((function(prevValues){return prevValues.filter((function(v){return v!==val}))}))}},classString=(0,_classnames.default)(groupPrefixCls,(0,_defineProperty2.default)({},"".concat(groupPrefixCls,"-rtl"),"rtl"===direction),className);return React.createElement("div",(0,_extends2.default)({className:classString,style:style},domProps,{ref:ref}),React.createElement(GroupContext.Provider,{value:context},children))},CheckboxGroup=React.forwardRef(InternalCheckboxGroup),_default=React.memo(CheckboxGroup);exports.default=_default},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/table/Column.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function Column(_){return null};exports.default=_default},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,"",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".dropdown-selector{padding:.5rem;border:1px solid var(--border-light);border-radius:var(--radius);display:flex;align-items:center;cursor:pointer}.dropdown-selector.disabled{color:var(--muted);cursor:not-allowed}.dropdown-selector.compact{padding:.333rem .5rem}.dropdown-selector .dropdown-arrow{display:flex;align-items:center;padding-left:4px;font-size:1.2em;color:var(--muted-alt)}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".EditorFiltersWrapper{flex-shrink:0;border:1px solid var(--border);border-radius:var(--radius);padding:1rem;margin-bottom:1rem}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:1rem}@media screen and (min-width:768px){.EditorFiltersWrapper .EditorFilters{display:flex;gap:2rem}.EditorFiltersWrapper .EditorFilters .EditorFilterGroup{flex:1;width:50%}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:0}}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{margin-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{flex-direction:column;gap:0}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters .EditorFilterGroup{width:auto}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters>*+*{margin-top:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{border:none;padding:0}@media screen and (min-width:1200px){.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{--editor-panel-width:max(25vw,28rem)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{width:var(--editor-panel-width);display:block;padding-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter{width:0}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1))}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active{width:var(--editor-panel-width);transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active .EditorFilters{transform:translateX(0);transition:transform .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit{width:var(--editor-panel-width)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit .EditorFilters{transform:translateX(0)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active{width:0;transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1));transition:transform .25s}}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".LifecycleToggles{text-transform:uppercase}.LifecycleToggles div{font-size:12px;display:flex;justify-content:space-between;padding-bottom:4px;align-items:center}.LifecycleToggles .new .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-new);background-color:var(--lifecycle-new)}.LifecycleToggles .returning .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-returning);background-color:var(--lifecycle-returning)}.LifecycleToggles .resurrecting .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-resurrecting);background-color:var(--lifecycle-resurrecting)}.LifecycleToggles .dormant .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-dormant);background-color:var(--lifecycle-dormant)}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".insights-page .ant-card-bordered{border-radius:var(--radius);box-shadow:none;border:1px solid var(--border)}.insights-page h2{font-size:1.125rem;font-weight:600}.insights-page .top-bar,.insights-page .top-bar .ant-tabs,.insights-page .top-bar .ant-tabs-nav-list{width:100%}.insights-page .top-bar .ant-btn-loading-icon{display:none}.insights-page .top-bar .ant-tabs-tab{padding:0}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn,.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{padding-bottom:6px;color:inherit}.insights-page .insight-history-button{padding-right:0;padding-left:0;border-radius:0;border:0;border-bottom:2px solid transparent}.insights-page .insight-history-button.active{border-bottom:2px solid var(--primary)}.insights-page hr{margin:1rem 0}.insights-page .ant-tabs-tab .hotkey{margin-bottom:0;background-color:var(--primary-bg-hover)!important;border-color:var(--primary-bg-hover)!important}.insights-page .ant-tabs-tab .deprecated{color:var(--muted)}.insights-page .ant-tabs-tab .deprecated .hotkey{margin-bottom:0;background-color:var(--light)!important;border-color:var(--border)!important;color:var(--muted)}.insights-page .ant-tabs-tab.ant-tabs-tab-active .deprecated{color:var(--primary)}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .hotkey{background-color:var(--primary-bg-active)!important}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .deprecated .hotkey{background-color:var(--light)!important}.insights-page .insight-controls{overflow:visible;position:relative;margin-bottom:1rem}.insights-page .insight-controls .ant-card-body{padding:.8rem 1rem}.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{position:relative}@media screen and (min-width:1200px){.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{display:flex;overflow:hidden}.insights-page .insight-wrapper.insight-wrapper--editorpanels .insights-container,.insights-page .insight-wrapper.insight-wrapper--singlecolumn .insights-container{flex:1;overflow-x:auto}}.insights-page .insights-graph-container{background:#fff;margin-bottom:1rem}.insights-page .insights-graph-container .ant-card-head{border-bottom:1px solid var(--border);min-height:unset;background-color:var(--bg-light);padding-left:1rem;padding-right:1rem}.insights-page .insights-graph-container .ant-card-body,.insights-page .insights-graph-container .ant-card-head .ant-card-head-title{padding:0}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{height:min(90vh - 16rem,36rem);max-width:300px;width:-moz-fit-content;width:fit-content;padding:0 1rem 1rem 0;display:flex;align-items:center}.insights-page .insights-graph-container .LineGraph{width:calc(100% - 3rem);height:calc(100% - 3rem)}.insights-page .insight-title-container{display:flex;align-items:center}.insights-page .insight-title-container .insight-title-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.insights-page .advanced-options-dropdown{font-size:1.4em;color:var(--primary-alt)}.insights-page .advanced-options-dropdown.expanded{transform:rotateX(180deg)}.insights-page .funnel-advanced-options .funnel-exclusions-filter .mt:first-of-type{margin-top:.5rem}.insights-page .retention-date-picker{background-color:transparent;border:0}.insights-page .retention-date-picker input::-moz-placeholder{color:var(--default)}.insights-page .retention-date-picker input::placeholder{color:var(--default)}.insights-page .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.insight-metadata-tags{margin-top:.5rem}.insight-metadata-tags .ant-tag{margin-top:0}.trends-insights-container{position:relative;min-height:min(90vh - 16rem,36rem);display:flex;justify-content:center}.trends-insights-container .LineGraph{height:calc(100% - 1rem)!important}.funnel-insights-container{background-color:var(--funnel-canvas-background);border-radius:0 0 var(--radius) var(--radius)}.funnel-insights-container.non-empty-state{min-height:26rem;position:relative;margin-bottom:0}.funnel-insights-container .ant-table-wrapper{margin-top:0!important}.funnel-tab-btn-popover .ant-popover-inner-content{padding:4px 15px}.funnel-tab-btn-popover .ant-popover-inner-content button.ant-btn-link{padding:0;margin:0 0 0 4px}.significance-highlight{display:inline-flex;background:var(--primary);color:var(--bg-light)}.significance-highlight .LemonIcon{color:var(--bg-light)}",""]),module.exports=exports}}]);