(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(S,v,e){"use strict";e.d(v,"b",function(){return d}),e.d(v,"a",function(){return n});var P=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),_=e.n(P),$=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),M=e.n($),z=e("./node_modules/core-js/modules/es.array.iterator.js"),X=e.n(z),H=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(H),y=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),J=e.n(y),Z=e("./node_modules/core-js/modules/es.object.from-entries.js"),D=e.n(Z),Y=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(Y),L=e("./node_modules/core-js/modules/es.object.entries.js"),Q=e.n(L),B=e("./node_modules/kea/lib/index.esm.js"),s=e("./node_modules/antd/es/tabs/index.js"),T=e("./frontend/src/scenes/urls.ts"),x=e("./frontend/src/lib/components/Tooltip.tsx"),C=e("./frontend/src/lib/components/icons.tsx"),A=e("./frontend/src/lib/components/TitleWithIcon.tsx"),K=e("./frontend/src/lib/constants.tsx"),I=e("./frontend/src/lib/logic/featureFlagLogic.ts"),r=e("./node_modules/react/jsx-runtime.js"),R=e.n(r),j,d;(function(a){a.Actions="actions",a.EventDefinitions="events",a.EventPropertyDefinitions="properties",a.IngestionWarnings="warnings"})(d||(d={}));var W=(j={},M()(j,d.EventPropertyDefinitions,T.a.eventPropertyDefinitions()),M()(j,d.EventDefinitions,T.a.eventDefinitions()),M()(j,d.Actions,T.a.actions()),M()(j,d.IngestionWarnings,T.a.ingestionWarnings()),j),l=Object(B.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[I.a,["featureFlags"]]},actions:{setTab:function(b){return{tab:b}}},reducers:{tab:[d.EventDefinitions,{setTab:function(b,t){var f=t.tab;return f}}]},selectors:{showWarningsTab:[function(a){return[a.featureFlags]},function(a){return!!a[K.j.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(t){var f=t.tab;return W[f]||T.a.events()}}},urlToAction:function(b){var t=b.actions,f=b.values;return Object.fromEntries(Object.entries(W).map(function(p){var U=_()(p,2),O=U[0],h=U[1];return[h,function(){f.tab!==O&&t.setTab(O)}]}))}});function n(a){var b=a.tab,t=Object(B.useValues)(l),f=t.showWarningsTab,p=Object(B.useActions)(l),U=p.setTab;return Object(r.jsxs)(s.a,{tabPosition:"top",animated:!1,activeKey:b,onTabClick:function(h){return U(h)},children:[Object(r.jsx)(s.a.TabPane,{tab:Object(r.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},d.EventDefinitions),Object(r.jsx)(s.a.TabPane,{tab:Object(r.jsx)(A.a,{icon:Object(r.jsx)(x.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(r.jsx)(C.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},d.Actions),Object(r.jsx)(s.a.TabPane,{tab:Object(r.jsx)(A.a,{icon:Object(r.jsx)(x.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(r.jsx)(C.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},d.EventPropertyDefinitions),f&&Object(r.jsx)(s.a.TabPane,{tab:Object(r.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},d.IngestionWarnings)]})}try{n.displayName="DataManagementPageTabs",n.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:n.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(a){}},"./frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx":function(S,v,e){"use strict";e.d(v,"a",function(){return x});var P=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_=e.n(P),$=e("./node_modules/core-js/modules/es.array.concat.js"),M=e.n($),z=e("./node_modules/core-js/modules/es.array.includes.js"),X=e.n(z),H=e("./node_modules/core-js/modules/es.string.includes.js"),G=e.n(H),y=e("./node_modules/kea/lib/index.esm.js"),J=e("./node_modules/react/index.js"),Z=e.n(J),D=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),Y=e("./frontend/src/lib/components/LemonTable/index.ts"),N=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),L=e("./frontend/src/scenes/organizationLogic.tsx"),Q=e("./frontend/src/lib/utils.tsx"),B=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),s=e("./node_modules/react/jsx-runtime.js"),T=e.n(s);function x(C){var A,K,I,r,R,j,d,W,l=C.definition,n=Object(y.useActions)(D.c),a=n.loadPropertiesForEvent,b=Object(y.useValues)(D.c),t=b.eventPropertiesCacheMap,f=b.eventDefinitionPropertiesLoading,p=Object(y.useValues)(L.a),U=p.hasDashboardCollaboration,O=p.hasIngestionTaxonomy;Object(J.useEffect)(function(){a(l)},[]);var h=[{title:"Property",key:"property",className:"definition-column-name",render:function(V,u){return Object(s.jsx)(B.b,{definition:u,event:l,hideIcon:!0,asLink:!0})}},{title:"Type",key:"type",className:"definition-column-type",render:function(V,u){return u.property_type?Object(s.jsx)("div",{className:"definition-pill-value",style:{textTransform:"uppercase"},children:u.property_type}):Object(s.jsx)("span",{className:"text-muted",children:"\u2014"})}}].concat(_()(U?[{title:"Tags",key:"tags",render:function(V,u){var F;return Object(s.jsx)(N.a,{tags:(F=u.tags)!==null&&F!==void 0?F:[],staticOnly:!0})}}]:[]),_()(O?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(V,u){return u.query_usage_30_day?Object(Q.P)(u.query_usage_30_day):Object(s.jsx)("span",{className:"text-muted",children:"\u2014"})}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(V,u){return u.example?Object(s.jsx)("div",{className:"definition-pill-value",style:{fontFamily:"monospace"},children:u.example}):Object(s.jsx)("span",{className:"text-muted",children:"\u2014"})}}]);return Object(s.jsxs)("div",{className:"event-properties-wrapper",children:[Object(s.jsx)("span",{className:"event-properties-header",children:"Top properties"}),Object(s.jsx)("p",{className:"event-properties-subtext",children:"Please note that description and tags are shared across events. Posthog properties are excluded from this list."}),Object(s.jsx)(Y.a,{id:"event-properties-definition-table-".concat(l.id),"data-attr":"event-properties-definition-nested-table",columns:h,className:"event-properties-definition-table-".concat(l.id),dataSource:(A=t==null||(K=t[l.id])===null||K===void 0?void 0:K.results)!==null&&A!==void 0?A:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:D.b,currentPage:(I=t==null||(r=t[l.id])===null||r===void 0?void 0:r.page)!==null&&I!==void 0?I:1,entryCount:(R=t==null||(j=t[l.id])===null||j===void 0?void 0:j.count)!==null&&R!==void 0?R:0,onForward:t!=null&&(d=t[l.id])!==null&&d!==void 0&&d.next?function(){a(l,t[l.id].next)}:void 0,onBackward:t!=null&&(W=t[l.id])!==null&&W!==void 0&&W.previous?function(){a(l,t[l.id].previous)}:void 0},loading:f.includes(l.id)})]})}try{x.displayName="EventDefinitionProperties",x.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:x.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(C){}},"./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx":function(S,v,e){"use strict";e.r(v),e.d(v,"scene",function(){return b}),e.d(v,"EventDefinitionsTable",function(){return t});var P=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_=e.n(P),$=e("./node_modules/core-js/modules/es.array.concat.js"),M=e("./node_modules/core-js/modules/es.function.name.js"),z=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),X=e.n(z),H=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),G=e.n(H),y={};y.insert="head",y.singleton=!1;var J=X()(G.a,y),Z=G.a.locals||{},D=e("./node_modules/kea/lib/index.esm.js"),Y=e("./frontend/src/lib/components/LemonTable/index.ts"),N=e("./frontend/src/types.ts"),L=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),Q=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),B=e("./frontend/src/scenes/organizationLogic.tsx"),s=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),T=e("./frontend/src/lib/utils.tsx"),x=e("./frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx"),C=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),A=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),K=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),I=e("./frontend/src/lib/components/DefinitionPopup/DefinitionPopupContents.tsx"),r=e("./frontend/src/lib/components/PageHeader.tsx"),R=e("./frontend/@posthog/lemon-ui/src/index.ts"),j=e("./frontend/src/lib/components/LemonButton/More.tsx"),d=e("./frontend/src/scenes/urls.ts"),W=e("./node_modules/kea-router/lib/index.js"),l=e("./frontend/src/lib/components/icons.tsx"),n=e("./node_modules/react/jsx-runtime.js"),a=[{value:N.o.Event,label:"All events","data-attr":"event-type-option-event"},{value:N.o.EventCustom,label:"Custom events","data-attr":"event-type-option-event-custom"},{value:N.o.EventPostHog,label:"PostHog events","data-attr":"event-type-option-event-posthog"}],b={component:t,logic:L.c,paramsToProps:function(){return{syncWithUrl:!0}}};function t(){var f,p,U=Object(D.useValues)(K.a),O=U.preflight,h=Object(D.useValues)(L.c),c=h.eventDefinitions,V=h.eventDefinitionsLoading,u=h.filters,F=Object(D.useActions)(L.c),k=F.loadEventDefinitions,q=F.setFilters,ee=Object(D.useValues)(B.a),ne=ee.hasDashboardCollaboration,te=ee.hasIngestionTaxonomy,oe=[{key:"icon",className:"definition-column-icon",render:function(i,o){return Object(n.jsx)(s.a,{definition:o,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(i,o){return Object(n.jsx)(s.a,{definition:o,hideIcon:!0,asLink:!0})},sorter:function(i,o){var m,E,w;return(m=(E=i.name)===null||E===void 0?void 0:E.localeCompare((w=o.name)!==null&&w!==void 0?w:""))!==null&&m!==void 0?m:0}}].concat(_()(ne?[{title:"Tags",key:"tags",render:function(i,o){var m;return Object(n.jsx)(Q.a,{tags:(m=o.tags)!==null&&m!==void 0?m:[],staticOnly:!0})}}]:[]),_()(te?[{title:Object(n.jsx)(I.c,{tooltipPlacement:"bottom"}),key:"volume_30_day",align:"right",render:function(i,o){return o.volume_30_day?Object(T.P)(o.volume_30_day):Object(n.jsx)("span",{className:"text-muted",children:"\u2014"})},sorter:function(i,o){var m,E;return((m=i==null?void 0:i.volume_30_day)!==null&&m!==void 0?m:0)-((E=o==null?void 0:o.volume_30_day)!==null&&E!==void 0?E:0)}},{title:Object(n.jsx)(I.b,{tooltipPlacement:"bottom"}),key:"query_usage_30_day",align:"right",render:function(i,o){return o.query_usage_30_day?Object(T.P)(o.query_usage_30_day):Object(n.jsx)("span",{className:"text-muted",children:"\u2014"})},sorter:function(i,o){var m,E;return((m=i==null?void 0:i.query_usage_30_day)!==null&&m!==void 0?m:0)-((E=o==null?void 0:o.query_usage_30_day)!==null&&E!==void 0?E:0)}}]:[]),[{key:"actions",width:0,render:function(i,o){return Object(n.jsx)(j.a,{"data-attr":"event-definitions-table-more-button-".concat(o.name),overlay:Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(R.LemonButton,{status:"stealth",to:Object(W.combineUrl)(d.a.sessionRecordings(),{filters:{events:[{id:o.name,type:"events",order:0,name:o.name}]}}).url,fullWidth:!0,sideIcon:Object(n.jsx)(l.IconPlayCircle,{}),"data-attr":"event-definitions-table-view-recordings",children:"View recordings"})})})}}]);return Object(n.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(n.jsx)(r.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),O&&!(O!=null&&O.is_event_property_usage_enabled)&&Object(n.jsx)(A.a,{}),Object(n.jsx)(C.a,{tab:C.b.EventDefinitions}),Object(n.jsxs)("div",{className:"flex justify-between items-center gap-2 mb-4",children:[Object(n.jsx)(R.LemonInput,{type:"search",placeholder:"Search for events",onChange:function(i){return q({event:i||""})},value:u.event}),Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[Object(n.jsx)("span",{children:"Type:"}),Object(n.jsx)(R.LemonSelect,{value:u.event_type,options:a,"data-attr":"event-type-filter",dropdownMatchSelectWidth:!1,onChange:function(i){q({event_type:i})},size:"small"})]})]}),Object(n.jsx)(Y.a,{columns:oe,className:"events-definition-table","data-attr":"events-definition-table",loading:V,rowKey:"id",pagination:{controlled:!0,currentPage:(f=c==null?void 0:c.page)!==null&&f!==void 0?f:1,entryCount:(p=c==null?void 0:c.count)!==null&&p!==void 0?p:0,pageSize:L.a,onForward:c.next?function(){k(c.next)}:void 0,onBackward:c.previous?function(){k(c.previous)}:void 0},expandable:{expandedRowRender:function(i){return Object(n.jsx)(x.a,{definition:i})},rowExpandable:function(){return!0},noIndent:!0},dataSource:c.results,emptyState:"No event definitions",nouns:["event","events"]})]})}},"./frontend/src/scenes/events/UsageDisabledWarning.tsx":function(S,v,e){"use strict";e.d(v,"a",function(){return M});var P=e("./frontend/src/lib/components/AlertMessage/index.ts"),_=e("./node_modules/react/jsx-runtime.js"),$=e.n(_);function M(){return Object(_.jsxs)(P.a,{type:"info",children:[Object(_.jsx)("div",{className:"text-base mb-1",children:"Event usage information is not enabled for your instance."}),Object(_.jsxs)("p",{className:"font-normal",children:["You will still see the list of events and properties, but usage information will be unavailable. If you want to enable event usage please set the follow environment variable:"," ",Object(_.jsx)("pre",{style:{display:"inline"},children:"ASYNC_EVENT_PROPERTY_USAGE=1"}),". Please note, enabling this environment variable ",Object(_.jsx)("b",{children:"may increase load considerably in your infrastructure"}),", particularly if you have a large volume of events."]})]})}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(S,v,e){var P=e("./node_modules/css-loader/dist/runtime/api.js");v=P(!1),v.push([S.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:center;width:30px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted{color:var(--muted-alt)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{color:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),S.exports=v}}]);
