(window.webpackJsonp=window.webpackJsonp||[]).push([[302],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(re,T,e){"use strict";e.r(T),e.d(T,"scene",function(){return ve}),e.d(T,"ActionsTable",function(){return ne});var G=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),_=e.n(G),$=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n($),Q=e("./node_modules/core-js/modules/es.array.map.js"),ie=e("./node_modules/core-js/modules/es.regexp.exec.js"),X=e("./node_modules/core-js/modules/es.string.search.js"),ce=e("./node_modules/core-js/modules/es.array.concat.js"),Z=e("./node_modules/core-js/modules/es.function.name.js"),le=e("./node_modules/core-js/modules/es.array.slice.js"),k=e("./node_modules/core-js/modules/es.number.constructor.js"),de=e("./node_modules/core-js/modules/es.array.filter.js"),w=e("./node_modules/core-js/modules/es.object.to-string.js"),p=e("./node_modules/react/index.js"),q=e("./frontend/src/scenes/actions/Actions.scss"),ee=e("./frontend/src/lib/components/Link.tsx"),h=e("./node_modules/antd/es/radio/index.js"),x=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),v=e("./frontend/src/lib/utils.tsx"),c=e("./node_modules/kea/lib/index.esm.js"),I=e("./frontend/src/models/actionsModel.ts"),y=e("./node_modules/kea-router/lib/index.js"),u=e("./frontend/src/scenes/urls.ts"),H=e("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),a=e("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),K=e("./frontend/src/lib/components/icons.tsx"),o=e("./frontend/src/lib/components/LemonButton/index.ts"),r=e("./frontend/@posthog/lemon-ui/src/index.ts"),t=e("./node_modules/react/jsx-runtime.js");function S(){var N=Object(p.useState)(!1),O=d()(N,2),D=O[0],E=O[1],J=Object(p.useState)(!1),F=d()(J,2),V=F[0],M=F[1];return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(o.a,{type:"primary",onClick:function(){return E(!0)},"data-attr":"create-action",children:"New action"}),Object(t.jsx)(r.LemonModal,{isOpen:D,onClose:function(){E(!1),M(!1)},title:"Create new action",footer:Object(t.jsxs)(t.Fragment,{children:[V&&Object(t.jsx)(o.a,{type:"secondary",onClick:function(){return M(!1)},children:"Back"},"back-button"),Object(t.jsx)(o.a,{type:"secondary",onClick:function(){E(!1),M(!1)},children:"Cancel"},"cancel-button")]}),children:V?Object(t.jsx)("div",{style:{maxWidth:"40rem"},children:Object(t.jsx)(H.a,{type:a.a.TOOLBAR_URLS})}):Object(t.jsxs)("div",{className:"space-y-2",children:[Object(t.jsx)(o.a,{type:"secondary",icon:Object(t.jsx)(K.IconMagnifier,{}),onClick:function(){return M(!0)},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect",children:"Inspect element on your site"}),Object(t.jsx)(o.a,{type:"secondary",icon:Object(t.jsx)(K.IconEdit,{}),onClick:function(){y.router.actions.push(u.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview",children:"From event or pageview"})]})})]})}var f=e("./frontend/src/types.ts"),n=e("./node_modules/fuse.js/dist/fuse.esm.js"),l=e("./frontend/src/scenes/userLogic.ts"),j=e("./frontend/src/scenes/teamLogic.tsx"),m=e("./frontend/src/lib/api.ts"),P=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),A=e("./frontend/src/lib/components/LemonTable/index.ts"),U=e("./frontend/src/lib/components/LemonDivider/index.ts"),W=e("./frontend/src/lib/components/LemonButton/More.tsx"),ue=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),te=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),je=e("./frontend/src/lib/components/PageHeader.tsx"),me=Object(c.kea)([Object(c.path)(["scenes","actions","actionsLogic"]),Object(c.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Data Management",path:u.a.eventDefinitions()},{name:"Actions",path:u.a.actions()}]}]})]),be=function(O,D){return new n.a(O,{keys:["name","url"],threshold:.3}).search(D).map(function(E){return E.item})},ve={component:ne,logic:me};function ne(){var N=Object(c.useValues)(j.a),O=N.currentTeam,D=Object(c.useValues)(Object(I.a)({params:"include_count=1"})),E=D.actions,J=D.actionsLoading,F=Object(c.useActions)(I.a),V=F.loadActions,M=Object(p.useState)(""),g=d()(M,2),z=g[0],fe=g[1],Oe=Object(p.useState)(!1),se=d()(Oe,2),ae=se[0],ge=se[1],oe=Object(c.useValues)(l.a),Y=oe.user,he=oe.hasAvailableFeature,xe=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(s,i){return(s.name||"").localeCompare(i.name||"")},render:function(s,i,L){return Object(t.jsx)(ee.a,{"data-attr":"action-link-"+L,to:u.a.action(i.id),className:"row-name",children:s||Object(t.jsx)("i",{children:"Unnamed action"})})}}].concat(_()(he(f.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(s){return Object(t.jsx)(ue.a,{tags:s,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(s,i){var L;return Object(t.jsx)("span",{children:(L=i.steps)!==null&&L!==void 0&&L.length?i.steps.map(function(B){return Object(t.jsx)("div",{children:function(){var C=Object(v.Db)(B.url||"");switch(C=C.slice(0,40)+(C.length>40?"...":""),B.event){case"$autocapture":return"Autocapture";case"$pageview":switch(B.url_matching){case"regex":return Object(t.jsxs)(t.Fragment,{children:["Page view URL matches regex ",Object(t.jsx)("strong",{children:C})]});case"exact":return Object(t.jsxs)(t.Fragment,{children:["Page view URL matches exactly ",Object(t.jsx)("strong",{children:C})]});default:return Object(t.jsxs)(t.Fragment,{children:["Page view URL contains ",Object(t.jsx)("strong",{children:C})]})}default:return Object(t.jsxs)(t.Fragment,{children:["Event: ",Object(t.jsx)("strong",{children:B.event})]})}}()},B.id)}):Object(t.jsx)("i",{children:"Empty \u2013 set this action up"})})}},Object(P.b)(),Object(P.a)()],_()(O!=null&&O.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(s,i){return Number(s.post_to_slack)-Number(i.post_to_slack)},render:function(s){return s?Object(t.jsx)(x.a,{}):null}}]:[]),[{width:0,render:function(s,i){return Object(t.jsx)(W.a,{overlay:Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(o.a,{status:"stealth",to:u.a.action(i.id),fullWidth:!0,children:"Edit"}),Object(t.jsx)(o.a,{status:"stealth",to:Object(y.combineUrl)(u.a.sessionRecordings(),{filters:{actions:[{id:i.id,type:"actions",order:0,name:i.name}]}}).url,sideIcon:Object(t.jsx)(K.IconPlayCircle,{}),fullWidth:!0,"data-attr":"action-table-view-recordings",children:"View recordings"}),Object(t.jsx)(o.a,{status:"stealth",to:Object(y.combineUrl)(u.a.insightNew({insight:f.E.TRENDS,interval:"day",display:f.j.ActionsLineGraph,actions:[{id:i.id,name:i.name,type:"actions",order:0}]})).url,fullWidth:!0,children:"Try out in Insights"}),Object(t.jsx)(U.a,{}),Object(t.jsx)(o.a,{status:"danger",onClick:function(){return Object(v.x)({endpoint:m.b.actions.determineDeleteEndpoint(),object:i,callback:V})},fullWidth:!0,children:"Delete action"})]})})}}]),R=E;return z&&z!==""&&(R=be(R,z)),ae&&(R=R.filter(function(b){var s;return((s=b.created_by)===null||s===void 0?void 0:s.uuid)===(Y==null?void 0:Y.uuid)})),Object(t.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(t.jsx)(je.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0,buttons:Object(t.jsx)(S,{})}),Object(t.jsx)(te.a,{tab:te.b.Actions}),Object(t.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4",children:[Object(t.jsx)(r.LemonInput,{type:"search",placeholder:"Search for actions",onChange:fe,value:z}),Object(t.jsxs)(h.a.Group,{buttonStyle:"solid",value:ae,onChange:function(s){return ge(s.target.value)},children:[Object(t.jsx)(h.a.Button,{value:!1,children:"All actions"}),Object(t.jsx)(h.a.Button,{value:!0,children:"My actions"})]})]}),Object(t.jsx)(A.a,{columns:xe,loading:J,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:R,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."})]})}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(re,T,e){"use strict";e.d(T,"b",function(){return r}),e.d(T,"a",function(){return f});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),_=e.n(G),$=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),d=e.n($),Q=e("./node_modules/core-js/modules/es.array.iterator.js"),ie=e.n(Q),X=e("./node_modules/core-js/modules/es.object.to-string.js"),ce=e.n(X),Z=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),le=e.n(Z),k=e("./node_modules/core-js/modules/es.object.from-entries.js"),de=e.n(k),w=e("./node_modules/core-js/modules/es.array.map.js"),p=e.n(w),q=e("./node_modules/core-js/modules/es.object.entries.js"),ee=e.n(q),h=e("./node_modules/kea/lib/index.esm.js"),x=e("./node_modules/antd/es/tabs/index.js"),v=e("./frontend/src/scenes/urls.ts"),c=e("./frontend/src/lib/components/Tooltip.tsx"),I=e("./frontend/src/lib/components/icons.tsx"),y=e("./frontend/src/lib/components/TitleWithIcon.tsx"),u=e("./frontend/src/lib/constants.tsx"),H=e("./frontend/src/lib/logic/featureFlagLogic.ts"),a=e("./node_modules/react/jsx-runtime.js"),K=e.n(a),o,r;(function(n){n.Actions="actions",n.EventDefinitions="events",n.EventPropertyDefinitions="properties",n.IngestionWarnings="warnings"})(r||(r={}));var t=(o={},d()(o,r.EventPropertyDefinitions,v.a.eventPropertyDefinitions()),d()(o,r.EventDefinitions,v.a.eventDefinitions()),d()(o,r.Actions,v.a.actions()),d()(o,r.IngestionWarnings,v.a.ingestionWarnings()),o),S=Object(h.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[H.a,["featureFlags"]]},actions:{setTab:function(l){return{tab:l}}},reducers:{tab:[r.EventDefinitions,{setTab:function(l,j){var m=j.tab;return m}}]},selectors:{showWarningsTab:[function(n){return[n.featureFlags]},function(n){return!!n[u.h.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(j){var m=j.tab;return t[m]||v.a.events()}}},urlToAction:function(l){var j=l.actions,m=l.values;return Object.fromEntries(Object.entries(t).map(function(P){var A=_()(P,2),U=A[0],W=A[1];return[W,function(){m.tab!==U&&j.setTab(U)}]}))}});function f(n){var l=n.tab,j=Object(h.useValues)(S),m=j.showWarningsTab,P=Object(h.useActions)(S),A=P.setTab;return Object(a.jsxs)(x.a,{tabPosition:"top",animated:!1,activeKey:l,onTabClick:function(W){return A(W)},children:[Object(a.jsx)(x.a.TabPane,{tab:Object(a.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},r.EventDefinitions),Object(a.jsx)(x.a.TabPane,{tab:Object(a.jsx)(y.a,{icon:Object(a.jsx)(c.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(a.jsx)(I.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},r.Actions),Object(a.jsx)(x.a.TabPane,{tab:Object(a.jsx)(y.a,{icon:Object(a.jsx)(c.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(a.jsx)(I.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},r.EventPropertyDefinitions),m&&Object(a.jsx)(x.a.TabPane,{tab:Object(a.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},r.IngestionWarnings)]})}try{f.displayName="DataManagementPageTabs",f.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:f.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(n){}}}]);
