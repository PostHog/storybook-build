(window.webpackJsonp=window.webpackJsonp||[]).push([[326],{"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(ae,x,s){"use strict";s.r(x),s.d(x,"ProjectHomepage",function(){return M}),s.d(x,"scene",function(){return ee});var S=s("./node_modules/@babel/runtime/helpers/slicedToArray.js"),H=s.n(S),oe=s("./node_modules/core-js/modules/es.function.name.js"),ne=s("./node_modules/core-js/modules/es.object.to-string.js"),re=s("./node_modules/core-js/modules/es.regexp.to-string.js"),R=s("./node_modules/react/index.js"),de=s("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),T=s("./frontend/src/lib/components/PageHeader.tsx"),A=s("./frontend/src/scenes/dashboard/Dashboard.tsx"),c=s("./node_modules/kea/lib/index.esm.js"),p=s("./frontend/src/scenes/teamLogic.tsx"),V=s("./frontend/src/types.ts"),w=s("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),z=s("./frontend/src/lib/components/LemonDivider/index.ts"),ce=s("./node_modules/core-js/modules/es.array.map.js"),ie=s("./node_modules/core-js/modules/es.symbol.js"),le=s("./node_modules/core-js/modules/es.symbol.description.js"),F=s("./frontend/src/models/dashboardsModel.tsx"),j=s("./frontend/src/lib/components/LemonButton/index.ts"),W=s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),D=s.n(W),B=s("./node_modules/@babel/runtime/regenerator/index.js"),u=s.n(B),b=s("./frontend/src/lib/utils/eventUsageLogic.ts"),g=Object(c.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[b.e],actions:[p.a,["updateCurrentTeam"]],values:[p.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(n){return{dashboardId:n}}},selectors:{primaryDashboardId:[function(t){return[t.currentTeam]},function(t){return t==null?void 0:t.primary_dashboard}]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(n){var l=n.actions;return{setPrimaryDashboard:function(){var a=D()(u.a.mark(function o(m){var i;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=m.dashboardId,l.updateCurrentTeam({primary_dashboard:i}),b.e.actions.reportPrimaryDashboardChanged();case 3:case"end":return r.stop()}},o)}));function d(o){return a.apply(this,arguments)}return d}(),showPrimaryDashboardModal:function(){var a=D()(u.a.mark(function o(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:b.e.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return i.stop()}},o)}));function d(){return a.apply(this,arguments)}return d}()}}}),y=s("./frontend/src/lib/components/icons.tsx"),G=s("./frontend/src/lib/components/LemonRow/index.ts"),U=s("./frontend/src/lib/components/LemonModal/index.ts"),L=s("./frontend/src/lib/components/LemonSkeleton/index.tsx"),e=s("./node_modules/react/jsx-runtime.js");function J(){var t=Object(c.useValues)(g),n=t.isOpen,l=t.primaryDashboardId,a=Object(c.useActions)(g),d=a.closePrimaryDashboardModal,o=a.setPrimaryDashboard,m=Object(c.useValues)(F.a),i=m.nameSortedDashboards,v=m.dashboardsLoading;return Object(e.jsx)(U.a,{isOpen:n,onClose:d,title:"Select a default dashboard for the project",footer:Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(j.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:d,children:"Close"})}),children:v?Object(e.jsx)("div",{className:"space-y-2",children:Object(e.jsx)(L.a.Row,{repeat:4})}):Object(e.jsx)("div",{className:"space-y-2",children:i.map(function(r){var h=r.id===l,f=Object(e.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[Object(e.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[Object(e.jsx)("strong",{children:r.name}),Object(e.jsx)("span",{className:"text-default font-normal text-ellipsis",children:r.description})]}),h?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(y.IconCottage,{className:"mr-2 text-warning text-lg"}),Object(e.jsx)("span",{children:"Default"})]}):Object(e.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return h?Object(e.jsx)(G.a,{fullWidth:!0,status:"muted",className:"dashboard-row",children:f},r.id):Object(e.jsx)(j.a,{fullWidth:!0,className:"dashboard-row",onClick:function(){o(r.id),d()},children:f},r.id)})})})}var O=s("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),$=s("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),E=s("./frontend/src/scenes/project-homepage/RecentInsights.tsx"),me=s("./node_modules/core-js/modules/es.array.slice.js"),K=s("./frontend/src/lib/dayjs.ts"),Q=s("./frontend/src/lib/components/CompactList/CompactList.tsx"),P=s("./frontend/src/scenes/urls.ts"),X=s("./frontend/src/lib/components/ProfilePicture/index.ts"),N=s("./frontend/src/scenes/persons/PersonHeader.tsx");function Y(t){var n=t.person,l=Object(c.useActions)(b.e),a=l.reportPersonOpenedFromNewlySeenPersonsList;return Object(e.jsx)(j.a,{fullWidth:!0,to:P.a.person(n.distinct_ids[0]),onClick:function(){a()},children:Object(e.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(e.jsx)(X.b,{name:Object(N.b)(n)}),Object(e.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(e.jsx)("div",{children:Object(N.b)(n)}),Object(e.jsxs)("div",{children:["First seen ",Object(K.a)(n.created_at).fromNow()]})]})]})})}function Z(){var t=Object(c.useValues)(O.a),n=t.persons,l=t.personsLoading;return Object(e.jsx)(Q.a,{title:"Newly seen persons",viewAllURL:P.a.persons(),loading:l,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:n.slice(0,5),renderRow:function(d,o){return Object(e.jsx)(Y,{person:d},o)}})}var k=s("./node_modules/@react-hook/size/dist/module/index.js"),q=s("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),_=s("./frontend/@posthog/lemon-ui/src/index.ts");function M(){var t=Object(c.useValues)(O.a),n=t.dashboardLogic,l=Object(c.useValues)(p.a),a=l.currentTeam,d=Object(c.useValues)(n),o=d.allItems,m=Object(c.useActions)(w.a),i=m.showInviteModal,v=Object(c.useActions)(g),r=v.showPrimaryDashboardModal,h=Object(R.useRef)(null),f=Object(k.a)(h),C=H()(f,1),I=C[0],se=Object(e.jsxs)("div",{className:"flex",children:[Object(e.jsx)(j.a,{"data-attr":"project-home-invite-team-members",onClick:function(){i()},className:"mr-2",type:"secondary",children:"Invite members"}),Object(e.jsx)(q.NewInsightButton,{dataAttr:"project-home-new-insight"})]});return Object(e.jsxs)("div",{className:"project-homepage",children:[Object(e.jsx)(T.a,{title:(a==null?void 0:a.name)||"",delimited:!0,buttons:se}),Object(e.jsxs)("div",{ref:h,className:I&&I<600?"top-list-container-vertical":"top-list-container-horizontal",children:[Object(e.jsx)("div",{className:"top-list",children:Object(e.jsx)(E.b,{})}),Object(e.jsx)("div",{className:"spacer"}),Object(e.jsx)("div",{className:"top-list",children:Object(e.jsx)(Z,{})}),Object(e.jsx)("div",{className:"spacer"}),Object(e.jsx)("div",{className:"top-list",children:Object(e.jsx)($.a,{})})]}),a!=null&&a.primary_dashboard?Object(e.jsxs)("div",{children:[Object(e.jsxs)("div",{className:"homepage-dashboard-header",children:[Object(e.jsxs)("div",{className:"dashboard-title-container",children:[!o&&Object(e.jsx)(L.a,{className:"w-20"}),(o==null?void 0:o.name)&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(y.IconCottage,{className:"mr-2 text-warning text-2xl"}),Object(e.jsx)(_.Link,{className:"font-semibold text-xl text-default",to:P.a.dashboard(o.id),children:o==null?void 0:o.name})]})]}),Object(e.jsx)(j.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:r,children:"Change dashboard"})]}),Object(e.jsx)(z.a,{className:"my-6"}),Object(e.jsx)(A.Dashboard,{id:a.primary_dashboard.toString(),placement:V.m.ProjectHomepage})]}):Object(e.jsxs)("div",{className:"empty-state-container",children:[Object(e.jsx)(y.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),Object(e.jsx)("h1",{children:"There isn\u2019t a default dashboard set for this project"}),Object(e.jsx)("p",{className:"mb-4",children:"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."}),Object(e.jsx)(j.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){r()},children:"Select a default dashboard"})]}),Object(e.jsx)(J,{})]})}var ee={component:M,logic:O.a}}}]);
