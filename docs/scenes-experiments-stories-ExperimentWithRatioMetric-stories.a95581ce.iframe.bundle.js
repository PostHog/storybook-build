"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[75379],{"../../frontend/src/scenes/experiments/stories/ExperimentWithRatioMetric.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExperimentWithRatioMetric:()=>ExperimentWithRatioMetric,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ExperimentWithRatioMetric_stories});var utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),App=__webpack_require__("../../frontend/src/scenes/App.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),browser=__webpack_require__("../../frontend/src/mocks/browser.tsx");let experiment_with_ratio_metric_namespaceObject=JSON.parse('{"id":100,"name":"experiment-with-ratio-metric","description":null,"start_date":"2025-05-20T14:25:00Z","end_date":null,"feature_flag_key":"experiment-with-ratio-metric","feature_flag":{"id":239,"team_id":1,"name":"Feature Flag for Experiment experiment-with-ratio-metric","key":"experiment-with-ratio-metric","filters":{"groups":[{"properties":[],"rollout_percentage":100}],"multivariate":{"variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}]},"holdout_groups":null,"aggregation_group_type_index":null},"deleted":false,"active":true,"ensure_experience_continuity":false,"has_encrypted_payloads":false,"version":1},"holdout":null,"holdout_id":null,"exposure_cohort":null,"parameters":{"feature_flag_variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}],"recommended_sample_size":0,"recommended_running_time":0,"minimum_detectable_effect":30},"secondary_metrics":[],"saved_metrics":[],"saved_metrics_ids":null,"filters":{},"archived":false,"deleted":false,"created_by":{"id":1,"uuid":"0196a5e4-1c5d-0000-8b8c-31ae10f6d7d7","distinct_id":"TM2Vy3T9MqY0HHAxgKBj95zZEaZ45MYSpuSxu6MaVNj","first_name":"Juraj","last_name":"","email":"juraj@posthog.com","is_email_verified":false,"hedgehog_config":null,"role_at_organization":"engineering"},"created_at":"2025-06-03T14:24:53.181636Z","updated_at":"2025-06-03T14:26:41.299279Z","type":"product","exposure_criteria":{"filterTestAccounts":true},"metrics":[{"goal":"increase","kind":"ExperimentMetric","uuid":"d70371c9-c078-4234-a4b3-aaa19316d602","numerator":{"kind":"EventsNode","math":"dau","name":"$pageview","event":"$pageview"},"denominator":{"kind":"EventsNode","math":"total","name":"$pageview","event":"$pageview"},"metric_type":"ratio"}],"metrics_secondary":[],"primary_metrics_ordered_uuids":["d70371c9-c078-4234-a4b3-aaa19316d602"],"secondary_metrics_ordered_uuids":[],"conclusion":null,"conclusion_comment":null}');var exposure_query_result=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json"),ratio_metric_result=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/ratio_metric_result.json"),schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts");let ExperimentWithRatioMetric_stories={component:App.g,title:"Scenes-App/Experiments",parameters:{layout:"fullscreen",viewMode:"story",mockDate:"2025-01-27",pageUrl:urls.j.experiment(experiment_with_ratio_metric_namespaceObject.id)},decorators:[(0,browser.x8)({get:{[`/api/projects/:team_id/experiments/${experiment_with_ratio_metric_namespaceObject.id}/`]:experiment_with_ratio_metric_namespaceObject,"/api/projects/:team_id/experiment_holdouts":[],"/api/projects/:team_id/experiment_saved_metrics/":[],[`/api/projects/:team_id/feature_flags/${experiment_with_ratio_metric_namespaceObject.feature_flag.id}/`]:{},[`/api/projects/:team_id/feature_flags/${experiment_with_ratio_metric_namespaceObject.feature_flag.id}/status/`]:{}},post:{"/api/environments/:team_id/query":(req,res,ctx)=>res(req.body.query.kind===schema_general.OH.ExperimentExposureQuery?ctx.json(exposure_query_result):ctx.json(ratio_metric_result))}})]},ExperimentWithRatioMetric={play:(0,utils.nO)(500)};ExperimentWithRatioMetric.parameters={...ExperimentWithRatioMetric.parameters,docs:{...ExperimentWithRatioMetric.parameters?.docs,source:{originalSource:"{\n  play: makeDelay(500)\n}",...ExperimentWithRatioMetric.parameters?.docs?.source}}};let __namedExportsOrder=["ExperimentWithRatioMetric"]},"../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json":module=>{module.exports=JSON.parse('{"cache_key":"cache_d38d94a2a1e278ca278e3ff3e6a0976d","cache_target_age":"2025-09-05T16:27:20.614099Z","calculation_trigger":null,"date_range":{"date_from":"2025-05-26T12:26:00+00:00","date_to":"2025-06-03T16:27:00+00:00","explicitDate":true},"is_cached":true,"kind":"ExperimentExposureQuery","last_refresh":"2025-09-04T16:27:20.614099Z","next_allowed_client_refresh":"2025-09-04T16:28:20.614099Z","query_metadata":{"events":[],"updated_at":"2025-09-04T16:27:21.815558Z"},"query_status":null,"timeseries":[{"days":["2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"exposure_counts":[0,61,178,325,460,604,755,910,989],"variant":"control"},{"days":["2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"exposure_counts":[0,59,201,300,445,572,685,808,874],"variant":"test-1"},{"days":["2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"exposure_counts":[0,63,241,399,567,733,894,1056,1137],"variant":"test-2"}],"timezone":"UTC","total_exposures":{"test-1":874,"control":989,"test-2":1137}}')},"../../frontend/src/mocks/fixtures/api/experiments/ratio_metric_result.json":module=>{module.exports=JSON.parse('{"baseline":{"denominator_sum":1636,"denominator_sum_squares":3760,"key":"control","number_of_samples":989,"numerator_denominator_sum_product":1636,"sum":859,"sum_squares":859,"validation_failures":[]},"cache_key":"cache_40de1256ea5a2265e4563ccb18687a44","cache_target_age":"2025-09-05T17:03:41.131006Z","calculation_trigger":null,"credible_intervals":null,"insight":null,"is_cached":true,"kind":"ExperimentQuery","last_refresh":"2025-09-04T17:03:41.131006Z","metric":null,"next_allowed_client_refresh":"2025-09-04T17:04:41.131006Z","p_value":null,"probability":null,"query_metadata":{"events":[],"updated_at":"2025-09-04T17:03:45.098248Z"},"query_status":null,"significance_code":null,"significant":null,"stats_version":null,"timezone":"UTC","variant_results":[{"chance_to_win":0.9996603338403114,"credible_interval":[0.03653074985064239,0.13612429044231514],"denominator_sum":1236,"denominator_sum_squares":2634,"key":"test-1","method":"bayesian","number_of_samples":874,"numerator_denominator_sum_product":1236,"significant":true,"sum":705,"sum_squares":705,"validation_failures":[]},{"chance_to_win":6.225433946014957e-9,"credible_interval":[-0.1407071884984351,-0.06863959478972097],"denominator_sum":2174,"denominator_sum_squares":5478,"key":"test-2","method":"bayesian","number_of_samples":1137,"numerator_denominator_sum_product":2174,"significant":true,"sum":1022,"sum_squares":1022,"validation_failures":[]}],"variants":null}')}}]);