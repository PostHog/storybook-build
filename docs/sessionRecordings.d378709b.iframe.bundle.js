(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{5583:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SessionRecordingsTable}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(4),Link=__webpack_require__(59),utils=__webpack_require__(12),card=__webpack_require__(5442),table=__webpack_require__(5404),defineProperty=(__webpack_require__(48),__webpack_require__(36),__webpack_require__(49),__webpack_require__(5)),defineProperty_default=__webpack_require__.n(defineProperty),regenerator=__webpack_require__(8),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(69),__webpack_require__(16)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),api=__webpack_require__(22),lib=__webpack_require__(23),eventUsageLogic=__webpack_require__(64);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var sessionRecordingsTableLogic=Object(index_esm.kea)({key:function key(props){return props.distinctId||"global"},props:{},actions:{getSessionRecordings:!0,openSessionPlayer:function openSessionPlayer(sessionRecordingId,source){return{sessionRecordingId:sessionRecordingId,source:source}},closeSessionPlayer:!0},loaders:function loaders(_ref){var _getSessionRecordings,props=_ref.props;return{sessionRecordings:[[],{getSessionRecordings:(_getSessionRecordings=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var _props$distinctId,params,response;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return params=Object(utils.mb)({distinct_id:null!==(_props$distinctId=props.distinctId)&&void 0!==_props$distinctId?_props$distinctId:""}),_context.next=3,api.a.get("api/projects/@current/session_recordings?".concat(params));case 3:return response=_context.sent,_context.abrupt("return",response.results);case 5:case"end":return _context.stop()}}),_callee)}))),function getSessionRecordings(){return _getSessionRecordings.apply(this,arguments)})}]}},events:function events(_ref2){var actions=_ref2.actions;return{afterMount:function afterMount(){actions.getSessionRecordings()}}},reducers:{sessionRecordingId:[null,{openSessionPlayer:function openSessionPlayer(_,_ref3){return _ref3.sessionRecordingId},closeSessionPlayer:function closeSessionPlayer(){return null}}]},actionToUrl:function actionToUrl(_ref4){var values=_ref4.values,buildURL=function buildURL(){var overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},replace=arguments.length>1&&void 0!==arguments[1]&&arguments[1],properties=lib.router.values.searchParams.properties,params=_objectSpread({properties:properties||void 0,sessionRecordingId:values.sessionRecordingId||void 0},overrides);return[lib.router.values.location.pathname,params,lib.router.values.hashParams,{replace:replace}]};return{loadSessionRecordings:function loadSessionRecordings(){return buildURL({},!0)},openSessionPlayer:function openSessionPlayer(_ref5){var source=_ref5.source;return buildURL({source:source})},closeSessionPlayer:function closeSessionPlayer(){return buildURL({sessionRecordingId:void 0})}}},urlToAction:function urlToAction(_ref6){var actions=_ref6.actions,values=_ref6.values,urlToAction=function urlToAction(_,params){var _params$sessionRecord,nulledSessionRecordingId=null!==(_params$sessionRecord=params.sessionRecordingId)&&void 0!==_params$sessionRecord?_params$sessionRecord:null;nulledSessionRecordingId!==values.sessionRecordingId&&actions.openSessionPlayer(nulledSessionRecordingId,eventUsageLogic.c.Direct)};return{"/session_recordings":urlToAction,"/person/*":urlToAction}},path:function path(key){return["scenes","sessionRecordings","sessionRecordingsTableLogic",key]}}),PlayCircleOutlined=__webpack_require__(5813),Table_utils=__webpack_require__(674),SessionPlayerDrawer=__webpack_require__(5560);function SessionRecordingsTable(_ref){var distinctId=_ref.distinctId,_ref$isPersonPage=_ref.isPersonPage,isPersonPage=void 0!==_ref$isPersonPage&&_ref$isPersonPage,sessionRecordingsTableLogicInstance=sessionRecordingsTableLogic({distinctId:distinctId}),_useValues=Object(index_esm.useValues)(sessionRecordingsTableLogicInstance),sessionRecordings=_useValues.sessionRecordings,sessionRecordingsLoading=_useValues.sessionRecordingsLoading,sessionRecordingId=_useValues.sessionRecordingId,_useActions=Object(index_esm.useActions)(sessionRecordingsTableLogicInstance),openSessionPlayer=_useActions.openSessionPlayer,closeSessionPlayer=_useActions.closeSessionPlayer,tableScrollX=Object(Table_utils.b)("lg").tableScrollX,columns=[{key:"play",render:function RenderPlayButton(){return react_default.a.createElement(PlayCircleOutlined.a,{size:16})},width:32},{title:"Session duration",render:function RenderDuration(sessionRecording){return react_default.a.createElement("span",null,Object(utils.J)(sessionRecording.recording_duration))},span:2},{title:"Person",key:"person",render:function RenderPersonLink(sessionRecording){return react_default.a.createElement(Link.a,{to:"/person/".concat(encodeURIComponent(sessionRecording.distinct_id)),className:"ph-no-capture"},(null==sessionRecording?void 0:sessionRecording.email)||sessionRecording.distinct_id)},ellipsis:!0,span:3},{title:"Start time",render:function RenderStartTime(sessionRecording){return Object(utils.H)(sessionRecording.start_time)},span:2},{title:"End time",render:function RenderStartTime(sessionRecording){return Object(utils.H)(sessionRecording.end_time)},span:2}];return react_default.a.createElement("div",{className:"events","data-attr":"events-table"},react_default.a.createElement(card.a,null,react_default.a.createElement(table.a,{rowKey:"id",dataSource:sessionRecordings,columns:columns,loading:0===sessionRecordings.length&&sessionRecordingsLoading,pagination:{pageSize:99999,hideOnSinglePage:!0},onRow:function onRow(sessionRecording){return{onClick:function onClick(){openSessionPlayer(sessionRecording.id,eventUsageLogic.c.RecordingsList)}}},size:"small",rowClassName:"cursor-pointer","data-attr":"session-recording-table",scroll:{x:tableScrollX}})),react_default.a.createElement("div",{style:{marginTop:"5rem"}}),!!sessionRecordingId&&react_default.a.createElement(SessionPlayerDrawer.a,{isPersonPage:isPersonPage,onClose:closeSessionPlayer}))}try{SessionRecordingsTable.displayName="SessionRecordingsTable",SessionRecordingsTable.__docgenInfo={description:"",displayName:"SessionRecordingsTable",props:{distinctId:{defaultValue:null,description:"",name:"distinctId",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/sessionRecordings/SessionRecordingsTable.tsx#SessionRecordingsTable"]={docgenInfo:SessionRecordingsTable.__docgenInfo,name:"SessionRecordingsTable",path:"frontend/src/scenes/sessionRecordings/SessionRecordingsTable.tsx#SessionRecordingsTable"})}catch(__react_docgen_typescript_loader_error){}},5825:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SessionsRecordings",(function(){return SessionsRecordings}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_SessionRecordingsTable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5583),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(448),antd__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1129),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(826),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(137),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(58),kea__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4),kea_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(23),scenes_sceneLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(46);function SessionsRecordings(){var currentTeam=Object(kea__WEBPACK_IMPORTED_MODULE_8__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__.a).currentTeam;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{style:{alignItems:"center",marginBottom:16}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__.a,{title:"Session Recordings"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__.a,{color:"orange",style:{marginLeft:8,marginTop:16}},"BETA")),currentTeam&&!(null==currentTeam?void 0:currentTeam.session_recording_opt_in)?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__.a,{style:{marginBottom:16},message:"Session recordings are not enabled for this project",description:"To use this feature, please go to your project settings and enable it.",type:"info",showIcon:!0,action:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{size:"large",type:"primary",onClick:function onClick(){kea_router__WEBPACK_IMPORTED_MODULE_9__.router.actions.push(scenes_sceneLogic__WEBPACK_IMPORTED_MODULE_10__.c.projectSettings(),{},"session-recording")}},"Project settings")}):null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SessionRecordingsTable__WEBPACK_IMPORTED_MODULE_1__.a,{key:"global"}))}}}]);