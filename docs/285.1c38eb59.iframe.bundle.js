var xe=Object.defineProperty,Oe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var G=(u,t,s)=>t in u?xe(u,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[t]=s,W=(u,t)=>{for(var s in t||(t={}))Se.call(t,s)&&G(u,s,t[s]);if(M)for(var s of M(t))Pe.call(t,s)&&G(u,s,t[s]);return u},$=(u,t)=>Oe(u,ve(t));var Y=(u,t,s)=>new Promise((h,b)=>{var n=c=>{try{x(s.next(c))}catch(a){b(a)}},f=c=>{try{x(s.throw(c))}catch(a){b(a)}},x=c=>c.done?h(c.value):Promise.resolve(c.value).then(n,f);x((s=s.apply(u,t)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(u,t,s){"use strict";s.r(t),s.d(t,"SessionsRecordings",function(){return U}),s.d(t,"scene",function(){return pe});var h=s("./frontend/src/lib/components/PageHeader.tsx"),b=s("./frontend/src/scenes/teamLogic.tsx"),n=s("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),f=s("./frontend/src/scenes/urls.ts"),x=s("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),c=s("./frontend/src/lib/components/AlertMessage/index.ts"),a=s("./frontend/@posthog/lemon-ui/src/index.ts"),L=s("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),l=s("./frontend/src/types.ts"),P=s("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),F=s("./frontend/src/scenes/session-recordings/saved-playlists/savedSessionRecordingPlaylistsLogic.ts"),A=s("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),w=s("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),J=s("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),H=s("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),X=s("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),Z=s("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),Q=s("./frontend/@posthog/apps-common/src/index.ts"),q=s("./frontend/src/lib/components/LemonButton/index.ts"),N=s("./frontend/src/lib/components/icons.tsx"),e=s("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function C(r){let{tab:o}=r;const{newPlaylistLoading:m}=Object(n.useValues)(Object(F.b)({tab:o})),{createSavedPlaylist:p}=Object(n.useActions)(Object(F.b)({tab:o}));return Object(e.jsx)("div",{className:"flex items-center justify-center",children:Object(e.jsxs)("div",{className:"max-w-lg mt-12 flex flex-col items-center",children:[Object(e.jsx)("h2",{className:"text-xl",children:"There are no playlists that match these filters"}),Object(e.jsx)("p",{className:"text-muted",children:"Once you create a playlist, it will show up here."}),Object(e.jsx)(q.a,{size:"large",type:"primary","data-attr":"add-session-playlist-button-empty-state",icon:Object(e.jsx)(N.IconPlus,{}),loading:m,onClick:()=>{p({},!0)},children:"New Playlist"})]})})}try{C.displayName="SavedSessionRecordingPlaylistsEmptyState",C.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylistsEmptyState",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"recent"'},{value:'"playlists"'},{value:'"file-playback"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"]={docgenInfo:C.__docgenInfo,name:"SavedSessionRecordingPlaylistsEmptyState",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"})}catch(r){}var _=s("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),ee=s("./frontend/src/lib/components/LemonButton/More.tsx");function E(r){let{tab:o}=r;const m=Object(F.b)({tab:o}),{playlists:p,playlistsLoading:g,filters:j,sorting:v,pagination:y,newPlaylistLoading:R}=Object(n.useValues)(m),{setSavedPlaylistsFilters:O,updateSavedPlaylist:je,duplicateSavedPlaylist:ge,deleteSavedPlaylistWithUndo:ye}=Object(n.useActions)(m),{meFirstMembers:be}=Object(n.useValues)(Z.a),he=[{width:0,dataIndex:"pinned",render:function(d,S){let{short_id:I}=S;return Object(e.jsx)(a.LemonButton,{size:"small",status:"primary-alt",onClick:()=>je({short_id:I,pinned:!d}),children:d?Object(e.jsx)(A.a,{}):Object(e.jsx)(w.a,{})})}},{title:"Name",dataIndex:"name",render:function(d,S){let{short_id:I,derived_name:fe,description:V}=S;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(a.Link,{className:Object(_.default)("font-semibold",!d&&"italic"),to:f.a.sessionRecordingPlaylist(I),children:d||fe||"(Untitled)"}),V?Object(e.jsx)("div",{className:"truncate",children:V}):null]})}},{title:"Type",dataIndex:"is_static",width:0,sorter:!0,render:function(d){return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(a.LemonTag,{type:"success",className:"uppercase",children:d?"static":"dynamic"})})}},$(W({},Object(H.b)()),{width:0}),{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",width:0,render:function(d){return Object(e.jsx)("div",{children:d&&typeof d=="string"&&Object(e.jsx)(Q.TZLabel,{time:d})})}},{width:0,render:function(d,S){return Object(e.jsx)(ee.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(a.LemonButton,{status:"stealth",onClick:()=>ge(S,!0),fullWidth:!0,loading:R,"data-attr":"duplicate-playlist",children:"Duplicate"}),Object(e.jsx)(a.LemonDivider,{}),Object(e.jsx)(a.LemonButton,{status:"danger",onClick:()=>ye(S),fullWidth:!0,children:"Delete playlist"})]})})}}];return Object(e.jsxs)("div",{className:"space-y-4",children:[Object(e.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(e.jsx)(a.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:i=>O({search:i||void 0}),value:j.search||""}),Object(e.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(e.jsx)("div",{className:"flex items-center gap-2",children:Object(e.jsx)(a.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:j.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:()=>O({pinned:!j.pinned}),icon:Object(P.cloneElement)(j.pinned?Object(e.jsx)(A.a,{}):Object(e.jsx)(w.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:"Last modified:"}),Object(e.jsx)(X.a,{disabled:!1,dateFrom:j.dateFrom,dateTo:j.dateTo,onChange:(i,d)=>O({dateFrom:i,dateTo:d!=null?d:void 0}),makeLabel:i=>Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(J.a,{}),Object(e.jsxs)("span",{className:"hide-when-small",children:[" ",i]})]})})]}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:"Created by:"}),Object(e.jsx)(a.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"},...be.map(i=>({value:i.user.id,label:i.user.first_name}))],value:j.createdBy,onChange:i=>{O({createdBy:i})},dropdownMatchSelectWidth:!1})]})]})]}),!g&&p.count<1?Object(e.jsx)(C,{tab:o}):Object(e.jsx)(a.LemonTable,{loading:g,columns:he,dataSource:p.results,pagination:y,noSortingCancellation:!0,sorting:v,onSort:i=>O({order:i?`${i.order===-1?"-":""}${i.columnKey}`:void 0}),rowKey:"id",loadingSkeletonRows:F.a,nouns:["playlist","playlists"]})]})}try{E.displayName="SavedSessionRecordingPlaylists",E.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:E.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(r){}var se=s("./frontend/src/lib/components/Tooltip.tsx"),T=s("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts"),B=s("./frontend/src/lib/components/Spinner/Spinner.tsx"),z=s("./node_modules/.pnpm/kea-router@3.1.3_kea@3.0.4/node_modules/kea-router/lib/index.js"),D=s("./frontend/src/scenes/session-recordings/settings/SessionRecordingSettings.tsx"),K=s("./frontend/src/scenes/session-recordings/player/new-playlist/PlayerNewPlaylist.tsx"),ne=s("./frontend/src/lib/logic/featureFlagLogic.ts"),te=s("./frontend/src/lib/constants.tsx"),ae=s("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/upload/Dragger.js"),oe=s.n(ae),ie=s("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),le=s("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.0.4/node_modules/kea-loaders/lib/index.js"),ce=s("./frontend/src/lib/utils/eventUsageLogic.ts"),re=s("./frontend/src/lib/utils.tsx");const k=Object(n.kea)([Object(n.path)(["scenes","session-recordings","detail","sessionRecordingDetailLogic"]),Object(n.connect)({actions:[ce.e,["reportRecordingLoadedFromFile"]]}),Object(le.loaders)(r=>{let{actions:o}=r;return{sessionRecording:{__default:null,loadFromFile:m=>Y(this,null,function*(){try{const p=yield new Promise((j,v)=>{const y=new FileReader;y.onload=R=>{var O;j((O=R.target)===null||O===void 0?void 0:O.result)},y.onerror=R=>{v(R)},y.readAsText(m)}),g=JSON.parse(p);if(!g.version||!g.data)throw new Error("File does not appear to be a valid session recording export");if(g.version==="2022-12-02")return o.reportRecordingLoadedFromFile({success:!0}),g.data;throw new Error("File version is not supported")}catch(p){return o.reportRecordingLoadedFromFile({success:!1,error:`${p}`}),a.lemonToast.error(`File import failed: ${p}`),null}}),resetSessionRecording:()=>null}}}),Object(n.reducers)({playerKey:["file-playback",{loadFromFileSuccess:()=>`file-playback-${Object(re.Jb)()}`,resetSessionRecording:()=>"file-playback"}]}),Object(z.beforeUnload)(r=>{let{values:o,actions:m}=r;return{enabled:()=>!!o.sessionRecording,message:"The loaded session recording will be lost. Are you sure you want to leave?",onConfirm:()=>{m.resetSessionRecording()}}}),Object(n.selectors)({breadcrumbs:[()=>[],()=>[{name:"Recordings",path:f.a.sessionRecordings()},{name:"Import"}]]})]);var de=s("./frontend/src/scenes/userLogic.ts"),ue=s("./frontend/src/lib/components/PayGatePage/PayGatePage.tsx");function me(){const{loadFromFile:r,resetSessionRecording:o}=Object(n.useActions)(k),{sessionRecording:m,sessionRecordingLoading:p,playerKey:g}=Object(n.useValues)(k),{hasAvailableFeature:j}=Object(n.useValues)(de.a);return j(l.e.RECORDINGS_FILE_EXPORT)?Object(e.jsx)("div",{children:p?Object(e.jsx)(B.b,{}):m?Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(c.a,{type:"info",action:{onClick:()=>o(),children:"Load a different recording"},children:"You are viewing a recording loaded from a file."}),Object(e.jsx)(ie.a,{sessionRecordingId:"",sessionRecordingData:m,playerKey:g})]}):Object(e.jsx)(oe.a,{name:"file",multiple:!1,accept:".json",showUploadList:!1,beforeUpload:y=>(r(y),!1),children:Object(e.jsxs)("div",{className:"p-20 flex flex-col items-center justify-center space-y-2 text-muted-alt",children:[Object(e.jsxs)("p",{className:"flex items-center gap-2 font-semibold",children:[Object(e.jsx)(N.IconUploadFile,{className:"text-xl"}),"Load recording"]}),Object(e.jsx)("p",{className:"text-muted-alt ",children:"Drag and drop your exported recording here or click to open the file browser."})]})})}):Object(e.jsx)(ue.a,{featureKey:l.e.RECORDINGS_FILE_EXPORT,featureName:"Recording Exports",header:Object(e.jsxs)(e.Fragment,{children:["Export and playback ",Object(e.jsx)("span",{className:"highlight",children:"Recordings from file"}),"!"]}),caption:"Store your recordings outside of PostHog wherever you like.",docsLink:"https://posthog.com/docs/user-guides/session-recordings"})}function U(){const{currentTeam:r}=Object(n.useValues)(b.a),{tab:o,newPlaylistLoading:m}=Object(n.useValues)(T.c),{saveNewPlaylist:p}=Object(n.useActions)(T.c),g=r&&!(r!=null&&r.session_recording_opt_in),{featureFlags:j}=Object(n.useValues)(ne.a),v=[l.ab.Recent,l.ab.Playlists];return j[te.i.RECORDINGS_EXPORT]||v.push(l.ab.FilePlayback),Object(e.jsxs)("div",{children:[Object(e.jsx)(h.a,{title:Object(e.jsx)("div",{children:"Session Recordings"}),buttons:Object(e.jsxs)(e.Fragment,{children:[!g&&Object(e.jsx)(a.LemonButton,{type:"secondary",icon:Object(e.jsx)(N.IconSettings,{}),onClick:()=>Object(D.b)(),children:"Configure"}),Object(e.jsx)(se.a,{placement:"topRight",title:o===l.ab.Recent?"Save the currently filters as a dynamic playlist":"Create a new playlist",children:o===l.ab.Recent?Object(e.jsx)(a.LemonButtonWithSideAction,{type:"primary",onClick:()=>{p()},loading:m,"data-attr":"save-recordings-playlist-button",sideAction:{popup:{placement:"bottom-end",className:"save-recordings-playlist-overlay",actionable:!0,overlay:Object(e.jsx)(a.LemonButton,{status:"stealth",onClick:()=>{Object(K.a)({sessionRecordingId:"global",playerKey:"recents",defaultStatic:!0})},"data-attr":"create-new-playlist-button",fullWidth:!0,children:"Create new static playlist"})},"data-attr":"saved-recordings-playlists-new-playlist-dropdown"},children:"Save as dynamic playlist"}):o===l.ab.Playlists?Object(e.jsx)(a.LemonButton,{type:"primary",onClick:()=>{Object(K.a)({sessionRecordingId:"global",playerKey:"recents"})},loading:m,"data-attr":"save-recordings-playlist-button",children:"New playlist"}):null})]})}),Object(e.jsx)(L.a,{activeKey:o,animated:!1,style:{borderColor:"#D9D9D9"},onChange:y=>z.router.actions.push(f.a.sessionRecordings(y)),children:Object.values(l.ab).map(y=>Object(e.jsx)(L.a.TabPane,{tab:Object(T.b)(y)},y))}),g?Object(e.jsx)("div",{className:"mb-4",children:Object(e.jsx)(c.a,{type:"info",action:{type:"secondary",icon:Object(e.jsx)(N.IconSettings,{}),onClick:()=>Object(D.b)(),children:"Configure"},children:"Session recordings are currently disabled for this project."})}):null,o?o===l.ab.Recent?Object(e.jsx)(x.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0}):o===l.ab.Playlists?Object(e.jsx)(E,{tab:l.ab.Playlists}):o===l.ab.FilePlayback?Object(e.jsx)(me,{}):null:Object(e.jsx)(B.a,{})]})}const pe={component:U,logic:T.c}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(u,t,s){"use strict";var h=s("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),b=s("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},f=n,x=s("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),c=function(l,P){return b.createElement(x.a,Object(h.a)(Object(h.a)({},l),{},{ref:P,icon:f}))};c.displayName="PushpinFilled";var a=t.a=b.forwardRef(c)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(u,t,s){"use strict";var h=s("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),b=s("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},f=n,x=s("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),c=function(l,P){return b.createElement(x.a,Object(h.a)(Object(h.a)({},l),{},{ref:P,icon:f}))};c.displayName="PushpinOutlined";var a=t.a=b.forwardRef(c)}}]);
