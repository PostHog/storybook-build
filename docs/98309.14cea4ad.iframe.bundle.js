(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[98309],{"../../frontend/src/lib/lemon-ui/ClampedText/ClampedText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>ClampedText});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_Link__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let isCssEllipsisApplied=elem=>elem.scrollHeight>elem.clientHeight,ClampedText=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function ClampedText(_ref,ref){let{lines,text}=_ref,[localLines,setLocalLines]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(lines),[isExpanded,setIsExpanded]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[showMore,setShowMore]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),handleToggleShowMore=show=>{setShowMore(!showMore),setIsExpanded(!isExpanded),setLocalLines(show?void 0:lines)};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>setLocalLines(lines),[lines]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{ref:ref,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TruncatedElement,{lines:localLines,ref:elem=>{elem&&(isCssEllipsisApplied(elem)?showMore&&isExpanded||setShowMore(!0):setShowMore(!1))},text:text}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:isExpanded||showMore?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Link__WEBPACK_IMPORTED_MODULE_1__.r,{onClick:()=>handleToggleShowMore(!isExpanded),children:isExpanded?"Show less":"Show more"}):null})]})}),TruncatedElement=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function TruncatedElement(_ref2,ref){let{text,lines}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{style:lines?{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:lines}:{},ref:ref,children:text})})},"../../frontend/src/scenes/error-tracking/AssigneeSelect.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>AssigneeSelect});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.11.6_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_urls__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_AssigneeDisplay__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/error-tracking/AssigneeDisplay.tsx"),_assigneeSelectLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/error-tracking/assigneeSelectLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let AssigneeSelect=_ref=>{let{assignee,onChange,showName=!1,showIcon=!0,unassignedLabel="Unassigned",...buttonProps}=_ref,{search,groupOptions,memberOptions,userGroupsLoading,membersLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_assigneeSelectLogic__WEBPACK_IMPORTED_MODULE_6__.q),{setSearch,ensureAssigneeTypesLoaded}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_assigneeSelectLogic__WEBPACK_IMPORTED_MODULE_6__.q),[showPopover,setShowPopover]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(!1),_onChange=value=>{setSearch(""),setShowPopover(!1),onChange(value)};return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{ensureAssigneeTypesLoaded()},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Qw,{closeOnClickInside:!1,visible:showPopover,matchWidth:!1,onVisibilityChange:visible=>setShowPopover(visible),overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:"max-w-100 deprecated-space-y-2 overflow-hidden",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.DF,{type:"search",placeholder:"Search",autoFocus:!0,value:search,onChange:setSearch,fullWidth:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("ul",{className:"deprecated-space-y-2",children:[assignee&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("li",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{fullWidth:!0,role:"menuitem",size:"small",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconX,{}),onClick:()=>_onChange(null),children:"Remove assignee"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(Section,{title:"Groups",loading:userGroupsLoading,search:!!search,type:"user_group",items:groupOptions,onSelect:_onChange,activeId:assignee?.id,emptyState:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{fullWidth:!0,size:"small",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPlusSmall,{}),to:scenes_urls__WEBPACK_IMPORTED_MODULE_4__.j.settings("environment-error-tracking","user-groups"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"text-secondary",children:"Create user group"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(Section,{title:"Users",loading:membersLoading,search:!!search,type:"user",items:memberOptions,onSelect:_onChange,activeId:assignee?.id})]})]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_AssigneeDisplay__WEBPACK_IMPORTED_MODULE_5__.p,{assignee:assignee,children:_ref2=>{let{displayAssignee}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{tooltip:displayAssignee.displayName,icon:showIcon?displayAssignee.icon:null,...buttonProps,children:showName?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("span",{className:"pl-1",children:"unassigned"===displayAssignee.id?unassignedLabel:displayAssignee.displayName}):null})}})})})},Section=_ref3=>{let{loading,search,type,items,onSelect,activeId,emptyState,title}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("li",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("section",{className:"deprecated-space-y-px",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("h5",{className:"mx-2 my-0.5",children:title}),items.map(item=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("li",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{fullWidth:!0,role:"menuitem",size:"small",icon:item.icon,onClick:()=>onSelect(activeId===item.id?null:{type,id:item.id}),active:activeId===item.id,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("span",{className:"flex items-center justify-between gap-2 flex-1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("span",{children:item.displayName})})})},item.id)),loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"p-2 text-secondary italic truncate border-t",children:"Loading..."}):0===items.length?search?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"p-2 text-secondary italic truncate border-t",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("span",{children:"No matches"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"border-t pt-1",children:emptyState}):null]})})}},"../../frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingFilters});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/DateFilter/DateFilter.tsx"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/UniversalFilters.tsx"),lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/universalFiltersLogic.ts"),lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/utils.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/utils.tsx"),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/scenes/insights/filters/TestAccountFilter/index.ts"),_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let errorTrackingDateOptions=lib_utils__WEBPACK_IMPORTED_MODULE_7__.bE.filter(dm=>"Yesterday"!=dm.key),ErrorTrackingFilters=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"deprecated-space-y-1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(DateRange,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(FilterGroup,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(UniversalSearch,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(InternalAccounts,{})]})}),FilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT),{setFilterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z,{rootKey:"error-tracking",group:filterGroup,taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.EventProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.Cohorts],onChange:setFilterGroup,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(RecordingsUniversalFilterGroup,{})})},RecordingsUniversalFilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),{replaceGroupValue,removeGroupValue}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),[allowInitiallyOpen,setAllowInitiallyOpen]=(0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)(()=>{setAllowInitiallyOpen(!0)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:filterGroup.values.map((filterOrGroup,index)=>(0,lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_6__.pU)(filterOrGroup)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.Group,{index:index,group:filterOrGroup,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(RecordingsUniversalFilterGroup,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.AddFilterButton,{size:"small",type:"secondary"})]},index):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.Value,{index:index,filter:filterOrGroup,onRemove:()=>removeGroupValue(index),onChange:value=>replaceGroupValue(index,value),initiallyOpen:allowInitiallyOpen},index))})},DateRange=()=>{let{dateRange}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT),{setDateRange}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__.f,{size:"small",dateFrom:dateRange.date_from,dateTo:dateRange.date_to,dateOptions:errorTrackingDateOptions,onChange:(changedDateFrom,changedDateTo)=>setDateRange({date_from:changedDateFrom,date_to:changedDateTo})})},UniversalSearch=()=>{let{searchQuery}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT),{setSearchQuery}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.DF,{type:"search",placeholder:"Search...",value:searchQuery,onChange:setSearchQuery,className:"flex-grow max-w-none",size:"small"})},InternalAccounts=()=>{let{filterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT),{setFilterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_10__.HT);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_9__.z,{size:"small",filters:{filter_test_accounts:filterTestAccounts},onChange:_ref=>{let{filter_test_accounts}=_ref;return setFilterTestAccounts(filter_test_accounts||!1)}})})}},"../../frontend/src/scenes/error-tracking/ErrorTrackingIssueScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingIssueScene:()=>ErrorTrackingIssueScene,STATUS_LABEL:()=>STATUS_LABEL,scene:()=>scene});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),ErrorTracking=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.3_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/error-tracking/ErrorTracking.scss"),ErrorTracking_default=__webpack_require__.n(ErrorTracking),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(ErrorTracking_default(),options),ErrorTracking_default().locals;var src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),LemonMenu=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonMenu/LemonMenu.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function PanelLayout(_ref){let{className,...props}=_ref;return(0,jsx_runtime.jsx)(Container,{className:(0,clsx_m.default)(className,"PanelLayout"),...props,primary:!1})}function Container(_ref2){let{children,primary,className,column}=_ref2;return(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("flex",primary&&"flex-1",column?"flex-col gap-y-4":"gap-x-2",primary?"PanelLayout__container--primary":"PanelLayout__container--secondary",className),children:children})}function PanelSettings(_ref4){let{children,title,border}=_ref4;return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("flex flex-row w-full overflow-hidden bg-surface-primary items-center justify-between","bottom"===border&&"border-b","top"===border&&"border-t"),children:[title&&(0,jsx_runtime.jsx)("span",{className:"pl-1 font-medium",children:title}),(0,jsx_runtime.jsx)("div",{className:"flex font-light text-xs",children:children})]})}function SettingsMenu(_ref5){let{label,items,icon,isAvailable=!0,closeOnClickInside=!0,highlightWhenActive=!0,whenUnavailable,...props}=_ref5,active=items.some(cf=>!!cf.active);return(0,jsx_runtime.jsx)(LemonMenu.d6,{buttonSize:"xsmall",closeOnClickInside:closeOnClickInside,items:isAvailable?items:whenUnavailable?[whenUnavailable]:[],...props,children:(0,jsx_runtime.jsx)(src.Jp,{className:"rounded-[0px]",status:highlightWhenActive&&active?"danger":"default",size:"xsmall",icon:icon,children:label})})}function SettingsToggle(_ref6){let{tooltip,icon,label,active,...props}=_ref6,button=(0,jsx_runtime.jsx)(src.Jp,{className:"rounded-[0px]",icon:icon,size:"xsmall",status:active?"danger":"default",...props,children:label});return props.disabledReason?button:(0,jsx_runtime.jsx)(src.u,{title:tooltip,children:button})}function SettingsButton(props){return(0,jsx_runtime.jsx)(SettingsToggle,{active:!1,...props})}PanelLayout.Panel=function Panel(_ref3){let{children,primary,className}=_ref3;return(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)(primary&&"flex-1","border bg-surface-primary rounded-xs",className),children:children})},PanelLayout.PanelSettings=PanelSettings,PanelLayout.Container=Container,PanelLayout.SettingsMenu=SettingsMenu,PanelLayout.SettingsToggle=SettingsToggle,PanelLayout.SettingsButton=SettingsButton;let PanelLayout_PanelLayout=PanelLayout;var react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),AssigneeSelect=__webpack_require__("../../frontend/src/scenes/error-tracking/AssigneeSelect.tsx"),errorTrackingIssueSceneLogic=__webpack_require__("../../frontend/src/scenes/error-tracking/errorTrackingIssueSceneLogic.ts"),ErrorTrackingSetupPrompt=__webpack_require__("../../frontend/src/scenes/error-tracking/ErrorTrackingSetupPrompt.tsx"),ErrorTrackingFilters=__webpack_require__("../../frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx"),utils=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts");let Overview=()=>{let{issueProperties,issueLoading}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{synthetic,level,browser,os,library,unhandled}=(0,utils.OZ)(issueProperties),TableRow=_ref=>{let{label,value}=_ref;return(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-secondary",children:label}),(0,jsx_runtime.jsx)("td",{children:null!=value?value:(0,jsx_runtime.jsx)("div",{className:"italic",children:"unknown"})})]})};return issueLoading?(0,jsx_runtime.jsxs)("div",{className:"deprecated-space-y-2",children:[(0,jsx_runtime.jsx)(src.yW,{}),(0,jsx_runtime.jsx)(src.yW.Row,{repeat:2})]}):(0,jsx_runtime.jsx)("div",{className:"px-1",children:(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsx)("table",{children:[{label:"Level",value:level},{label:"Synthetic",value:synthetic},{label:"Library",value:library},{label:"Unhandled",value:unhandled}].map((row,index)=>(0,jsx_runtime.jsx)(TableRow,{...row},index))}),(0,jsx_runtime.jsx)("table",{children:[{label:"Browser",value:browser},{label:"OS",value:os},{label:"URL",value:issueProperties.$current_url}].map((row,index)=>(0,jsx_runtime.jsx)(TableRow,{...row},index))})]})})};var SessionRecordingPlayer=__webpack_require__("../../frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),stackFrameLogic=__webpack_require__("../../frontend/src/lib/components/Errors/stackFrameLogic.ts"),StackTraces=__webpack_require__("../../frontend/src/lib/components/Errors/StackTraces.tsx"),Query=__webpack_require__("../../frontend/src/queries/Query/Query.tsx");let EventsTab=()=>{let{eventsQuery}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);return(0,jsx_runtime.jsx)(Query.A,{query:eventsQuery,context:{columns:{"recording_button(properties.$session_id)":{title:"Recording",width:"134px"}},showOpenEditorButton:!1,insightProps:{dashboardItemId:"new-ErrorTrackingEventsQuery"}}})},PANELS=[{key:"stacktrace",Content:_ref=>{let{hasStack,isThirdPartyScript}=_ref,{issueProperties}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{showAllFrames}=(0,index_esm.useValues)(stackFrameLogic.e),{exceptionList}=(0,utils.OZ)(issueProperties),hasAnyInApp=(0,utils.EQ)(exceptionList);return hasStack?(0,jsx_runtime.jsx)(StackTraces.v,{showAllFrames:!hasAnyInApp||showAllFrames,exceptionList:exceptionList}):isThirdPartyScript?(0,jsx_runtime.jsx)(src.Vp,{type:"error",children:(0,jsx_runtime.jsxs)("div",{className:"deprecated-space-y-2",children:[(0,jsx_runtime.jsx)("p",{children:"It looks like this exception was thrown by a JavaScript file served from a different origin to your site. This is most likely from a third party script running on your site. Loading scripts anonymously will add stack traces to thrown exceptions."}),(0,jsx_runtime.jsx)("div",{className:"flex",children:(0,jsx_runtime.jsx)(src.Jp,{type:"primary",status:"danger",to:"https://posthog.com/docs/error-tracking/common-questions#what-is-a-script-error-with-no-stack-traces",children:"Learn more"})})]})}):null},Header:_ref2=>{let{active,hasStack,isThirdPartyScript}=_ref2,{issueProperties}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{showAllFrames}=(0,index_esm.useValues)(stackFrameLogic.e),{setShowAllFrames}=(0,index_esm.useActions)(stackFrameLogic.e),{exceptionList}=(0,utils.OZ)(issueProperties),hasAnyInApp=(0,utils.EQ)(exceptionList);return(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,jsx_runtime.jsx)("span",{children:"Stack trace"}),active&&hasAnyInApp&&(hasStack||!isThirdPartyScript)?(0,jsx_runtime.jsx)(src.P4,{onChange:(value,e)=>{setShowAllFrames("full"===value),e.stopPropagation()},value:showAllFrames?"full":"in-app",options:[{value:"in-app",label:"In app only"},{value:"full",label:"Show full stack"}],size:"xsmall"}):null]})},hasContent:_ref3=>{let{hasStack,isThirdPartyScript}=_ref3;return hasStack||isThirdPartyScript}},{key:"recording",Content:()=>{let{issueProperties}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);return(0,jsx_runtime.jsx)(SessionRecordingPlayer.d,{playerKey:"issue",sessionRecordingId:issueProperties.$session_id,noMeta:!0,noBorder:!0,autoPlay:!0,noInspector:!0,matchingEventsMatchType:{matchType:"name",eventNames:["$exception"]}})},Header:"Recording",hasContent:_ref=>{let{hasRecording}=_ref;return hasRecording},className:"p-0"}],Events=()=>{let{issueProperties,eventsMode}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{setEventsMode}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),[activeKeys,setActiveKeys]=(0,react.useState)(["stacktrace"]),{value,exceptionList}=(0,utils.OZ)(issueProperties),props={hasStack:(0,utils.mX)(exceptionList),hasRecording:issueProperties.$session_id&&"active"===issueProperties.$recording_status,isThirdPartyScript:(0,utils.WS)(value)},panels=PANELS.filter(_ref=>{let{hasContent}=_ref;return hasContent(props)}).map(_ref2=>{let{key,Header,Content,className}=_ref2;return{key,content:(0,jsx_runtime.jsx)(Content,{...props}),header:"string"==typeof Header?Header:(0,jsx_runtime.jsx)(Header,{active:activeKeys.includes(key),...props}),className}});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.PanelSettings,{title:"Events",border:"bottom",children:(0,jsx_runtime.jsx)(SettingsButton,{label:eventsMode===errorTrackingIssueSceneLogic.F.All?"Close":"View all events",active:!0,onClick:()=>setEventsMode(eventsMode===errorTrackingIssueSceneLogic.F.All?errorTrackingIssueSceneLogic.F.Latest:errorTrackingIssueSceneLogic.F.All)})}),eventsMode===errorTrackingIssueSceneLogic.F.All?(0,jsx_runtime.jsxs)("div",{className:"m-4",children:[(0,jsx_runtime.jsx)(ErrorTrackingFilters.n,{}),(0,jsx_runtime.jsx)(src.p2,{thick:!0,className:"mt-2 mb-0"}),(0,jsx_runtime.jsx)(EventsTab,{})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Overview,{}),(0,jsx_runtime.jsx)(src.p2,{className:"mt-2 mb-0"}),panels.length>0&&(0,jsx_runtime.jsx)(src.JL,{embedded:!0,multiple:!0,activeKeys:activeKeys,onChange:setActiveKeys,panels:panels})]})]})};var posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.11.6_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),ClampedText=__webpack_require__("../../frontend/src/lib/lemon-ui/ClampedText/ClampedText.tsx"),lib_utils=__webpack_require__("../../frontend/src/lib/utils.tsx");let Metadata=()=>{let{issue,issueLoading}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),hasSessionCount=issue&&issue.aggregations&&0!==issue.aggregations.sessions,Count=_ref=>{let{value}=_ref;return issue&&issue.aggregations?(0,jsx_runtime.jsx)("div",{className:"text-2xl font-semibold",children:value?(0,lib_utils.d$)(value):"-"}):(0,jsx_runtime.jsx)("div",{className:"flex flex-1 items-center",children:(0,jsx_runtime.jsx)(src.yW,{})})},Sessions=(0,jsx_runtime.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex text-muted text-xs deprecated-space-x-px",children:[(0,jsx_runtime.jsx)("span",{children:"Sessions"}),!hasSessionCount&&(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{className:"mt-0.5"})]}),(0,jsx_runtime.jsx)(Count,{value:issue?.aggregations?.sessions})]});return(0,jsx_runtime.jsxs)("div",{className:"deprecated-space-y-1",children:[issue&&issue.description?(0,jsx_runtime.jsx)(ClampedText.n,{text:issue.description,lines:2}):(0,jsx_runtime.jsx)(src.yW,{}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-1 justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-end deprecated-space-x-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"First seen"}),issue&&!issueLoading?(0,jsx_runtime.jsx)(TZLabel.w,{time:issue.first_seen,className:"border-dotted border-b"}):(0,jsx_runtime.jsx)(src.yW,{})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"Last seen"}),issue&&!issueLoading&&issue.last_seen?(0,jsx_runtime.jsx)(TZLabel.w,{time:issue.last_seen,className:"border-dotted border-b"}):(0,jsx_runtime.jsx)(src.yW,{})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex deprecated-space-x-2 gap-8 items-end",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"Occurrences"}),(0,jsx_runtime.jsx)(Count,{value:issue?.aggregations?.occurrences})]}),hasSessionCount?Sessions:(0,jsx_runtime.jsx)(src.u,{title:"No $session_id was set for any event in this issue",delayMs:0,children:Sessions}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs",children:"Users"}),(0,jsx_runtime.jsx)(Count,{value:issue?.aggregations?.users})]})]})]})]})};var Sparkline=__webpack_require__("../../frontend/src/lib/components/Sparkline.tsx"),errorTrackingLogic=__webpack_require__("../../frontend/src/scenes/error-tracking/errorTrackingLogic.ts");let SparklinePanel=()=>{let{customSparklineConfig}=(0,index_esm.useValues)(errorTrackingLogic.HT),{issue}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);if(!customSparklineConfig)return null;let labels=(0,utils.Gu)(customSparklineConfig),data=issue?.aggregations?.customVolume||Array(labels.length).fill(0);return(0,jsx_runtime.jsx)(Sparkline.b,{loading:!issue?.aggregations?.customVolume,className:"h-16 w-full",data:data,labels:labels})},scene={component:ErrorTrackingIssueScene,logic:errorTrackingIssueSceneLogic.r,paramsToProps:_ref=>{let{params:{id},searchParams:{fingerprint}}=_ref;return{id,fingerprint}}},STATUS_LABEL={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release",suppressed:"Suppressed"};function ErrorTrackingIssueScene(){let{issue}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{updateIssue,initIssue,assignIssue}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r);return(0,react.useEffect)(()=>{initIssue()},[]),(0,jsx_runtime.jsx)(ErrorTrackingSetupPrompt.n,{children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:!!issue&&("active"===issue.status?(0,jsx_runtime.jsxs)("div",{className:"flex divide-x gap-x-2",children:[(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:issue.assignee,onChange:assignIssue,type:"secondary",showName:!0}),(0,jsx_runtime.jsxs)("div",{className:"flex pl-2 gap-x-2",children:[(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",onClick:()=>updateIssue({status:"archived"}),children:"Archive"}),(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:()=>updateIssue({status:"resolved"}),children:"Resolve"}),(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",status:"danger",tooltip:"Stop capturing these errors",onClick:()=>updateIssue({status:"suppressed"}),children:"Suppress"})]})]}):(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",className:"upcasefirst-letter:uppercase",onClick:()=>updateIssue({status:"active"}),tooltip:"Mark as active",children:STATUS_LABEL[issue.status]}))}),issue?(0,jsx_runtime.jsxs)("div",{className:"ErrorTrackingIssue",children:[(0,jsx_runtime.jsx)(Metadata,{}),(0,jsx_runtime.jsx)(src.p2,{className:"my-4"}),(0,jsx_runtime.jsx)(PanelLayout_PanelLayout,{children:(0,jsx_runtime.jsxs)(PanelLayout_PanelLayout.Container,{column:!0,primary:!0,children:[(0,jsx_runtime.jsx)(SparklinePanel,{}),(0,jsx_runtime.jsx)(PanelLayout_PanelLayout.Panel,{primary:!0,children:(0,jsx_runtime.jsx)(Events,{})})]})})]}):(0,jsx_runtime.jsx)(src.$j,{})]})})}},"../../frontend/src/scenes/error-tracking/ErrorTrackingSetupPrompt.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingSetupPrompt});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.11.6_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),posthog_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.231.1_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/types.ts"),_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ErrorTrackingSetupPrompt=_ref=>{let{children}=_ref,{hasSentExceptionEvent,hasSentExceptionEventLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_8__.HT),{currentTeam,currentTeamLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_6__.teamLogic),hasErrorTracking=(0,lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_4__.y)("ERROR_TRACKING"),exceptionAutocaptureEnabled=currentTeam&&currentTeam.autocapture_exceptions_opt_in;return hasSentExceptionEventLoading||currentTeamLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.$j,{})}):hasErrorTracking?hasSentExceptionEvent||exceptionAutocaptureEnabled?children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(IngestionStatusCheck,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(BetaAccessBanner,{})},IngestionStatusCheck=()=>{let{updateCurrentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_6__.teamLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__.C,{productName:"Error tracking",thingName:"issue",titleOverride:"You haven't captured any exceptions",description:"To start capturing exceptions you need to enable exception autocapture. Exception autocapture only applies to the JS SDK. Installation for other platforms are described in the docs.",isEmpty:!0,productKey:_types__WEBPACK_IMPORTED_MODULE_7__.Md.ERROR_TRACKING,actionElementOverride:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"primary",onClick:()=>updateCurrentTeam({autocapture_exceptions_opt_in:!0}),children:"Enable exception autocapture"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{targetBlank:!0,sideIcon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconExternal,{className:"w-5 h-5"}),to:"https://posthog.com/docs/error-tracking/installation",children:"Read the docs"})]})})},BetaAccessBanner=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__.C,{productName:"Error tracking",thingName:"issue",titleOverride:"Welcome to Error Tracking",description:"Error tracking is in beta for our JS, Node and Python SDKs.",isEmpty:!0,docsURL:"https://posthog.com/docs/error-tracking",productKey:_types__WEBPACK_IMPORTED_MODULE_7__.Md.ERROR_TRACKING,actionElementOverride:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"primary",onClick:()=>posthog_js__WEBPACK_IMPORTED_MODULE_5__.ZP.updateEarlyAccessFeatureEnrollment("error-tracking",!0),children:"Get started"})})},"../../frontend/src/scenes/error-tracking/errorTrackingIssueSceneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>EventsMode,r:()=>errorTrackingIssueSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_dayjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/dayjs.ts"),posthog_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.231.1_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/types.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/types.ts"),_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),_queries__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/scenes/error-tracking/queries.ts");let EventsMode=function(EventsMode){return EventsMode.Latest="latest",EventsMode.Earliest="earliest",EventsMode.Recommended="recommended",EventsMode.All="all",EventsMode}({}),errorTrackingIssueSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["scenes","error-tracking","errorTrackingIssueSceneLogic",key]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.id),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__.HT,["dateRange","filterTestAccounts","filterGroup","customSparklineConfig"]],actions:[_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__.HT,["setDateRange","setFilterTestAccounts","setFilterGroup"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({initIssue:!0,setIssue:issue=>({issue}),setEventsMode:mode=>({mode}),updateIssue:issue=>({issue}),assignIssue:assignee=>({assignee})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({eventsMode:[EventsMode.Latest,{setEventsMode:(_,_ref)=>{let{mode}=_ref;return mode}}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref2=>{let{props,values}=_ref2;return{issue:[null,{loadRelationalIssue:async()=>{let response=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.errorTracking.getIssue(props.id,props.fingerprint);return{...values.issue,...response}},loadClickHouseIssue:async first_seen=>{let lastSeen=values.issue&&values.issue.last_seen?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_4__.Bv)(values.issue?.last_seen).endOf("minute"):(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_4__.Bv)(),firstSeen=values.dateRange.date_from?values.dateRange.date_from:first_seen.startOf("minute").toISOString();return(await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_10__.zx)({issueId:props.id,dateRange:{date_from:firstSeen,date_to:lastSeen.toISOString()},customVolume:values.customSparklineConfig}),{},void 0,!0)).results[0]},updateIssue:async _ref3=>{let{issue}=_ref3,response=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.errorTracking.updateIssue(props.id,issue);return posthog_js__WEBPACK_IMPORTED_MODULE_5__.ZP.capture("error_tracking_issue_status_updated",{...issue,issue_id:props.id}),{...values.issue,...response}},assignIssue:async _ref4=>{let{assignee}=_ref4;return await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.errorTracking.assignIssue(props.id,assignee),posthog_js__WEBPACK_IMPORTED_MODULE_5__.ZP.capture("error_tracking_issue_assigned",{issue_id:props.id}),values.issue?{...values.issue,assignee}:values.issue},setIssue:_ref5=>{let{issue}=_ref5;return issue}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({breadcrumbs:[s=>[s.issue],issue=>{let exceptionType=issue?.name||"Unknown Type";return[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__.x.ErrorTracking,name:"Error tracking",path:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.errorTracking()},{key:[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__.x.ErrorTrackingIssue,exceptionType],name:exceptionType}]}],[_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_11__.f]:[(_,p)=>[p.id],issueId=>({activity_scope:_types__WEBPACK_IMPORTED_MODULE_8__.jc.ERROR_TRACKING_ISSUE,activity_item_id:issueId})],eventsQuery:[s=>[s.issue,s.filterTestAccounts,s.filterGroup,s.dateRange],(issue,filterTestAccounts,filterGroup,dateRange)=>(0,_queries__WEBPACK_IMPORTED_MODULE_10__.QT)({issue,filterTestAccounts:filterTestAccounts,filterGroup:filterGroup,dateRange})],issueProperties:[s=>[s.issue],issue=>issue&&issue.earliest?JSON.parse(issue.earliest):{}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref6=>{let{values,actions}=_ref6,loadIssue=()=>{if(!values.issueLoading){let issue=values.issue;issue?actions.loadClickHouseIssue((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_4__.Bv)(issue.first_seen)):actions.loadRelationalIssue()}};return{setIssueSuccess:loadIssue,initIssue:loadIssue,loadRelationalIssueSuccess:loadIssue,loadRelationalIssueFailure:_ref7=>{let{errorObject:{status,data}}=_ref7;308==status&&"issue_id"in data&&kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.replace(scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.errorTrackingIssue(data.issue_id))},setDateRange:loadIssue,setFilterTestAccounts:loadIssue,setFilterGroup:loadIssue}})])},"../../frontend/src/scenes/error-tracking/errorTrackingLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{HT:()=>errorTrackingLogic,Kg:()=>DEFAULT_ERROR_TRACKING_FILTER_GROUP,O3:()=>DEFAULT_ERROR_TRACKING_DATE_RANGE});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.5_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),lib_utils_definitions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/utils/definitions.ts"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/types.ts");let lastHour={value:"1h",label:"1h"},lastDay={value:"24h",label:"24h"},lastMonth={value:"mStart",label:"Month"},lastYear={value:"yStart",label:"Year"},customOptions={dStart:{default:lastDay,custom:lastHour},"-24h":{default:lastDay,custom:lastHour},mStart:{custom:lastMonth,default:lastDay},yStart:{custom:lastYear,default:lastMonth},all:{custom:lastYear,default:lastMonth}},DEFAULT_ERROR_TRACKING_DATE_RANGE={date_from:"-7d",date_to:null},DEFAULT_ERROR_TRACKING_FILTER_GROUP={type:_types__WEBPACK_IMPORTED_MODULE_6__.J2.And,values:[{type:_types__WEBPACK_IMPORTED_MODULE_6__.J2.And,values:[]}]},SPARKLINE_CONFIGURATIONS={"1h":{value:60,interval:"minute"},"24h":{value:24,interval:"hour"},"7d":{value:168,interval:"hour"},"14d":{value:336,interval:"hour"},"90d":{value:90,interval:"day"},"180d":{value:26,interval:"week"},mStart:{value:31,interval:"day"},yStart:{value:52,interval:"week"}};function constructSparklineConfig(selectedPeriod){if(selectedPeriod in SPARKLINE_CONFIGURATIONS)return SPARKLINE_CONFIGURATIONS[selectedPeriod];let[value,unit]=selectedPeriod.match(/\d+|\D+/g);return{value:Number(value)*("y"===unit?12:1),interval:"h"===unit?"hour":"d"===unit?"day":"w"===unit?"week":"month"}}let errorTrackingLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_4__.featureFlagLogic,["featureFlags"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setDateRange:dateRange=>({dateRange}),setAssignee:assignee=>({assignee}),setSearchQuery:searchQuery=>({searchQuery}),setFilterGroup:filterGroup=>({filterGroup}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts}),setSparklineSelectedPeriod:period=>({period})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({dateRange:[DEFAULT_ERROR_TRACKING_DATE_RANGE,{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],assignee:[null,{setAssignee:(_,_ref2)=>{let{assignee}=_ref2;return assignee}}],filterGroup:[DEFAULT_ERROR_TRACKING_FILTER_GROUP,{persist:!0},{setFilterGroup:(_,_ref3)=>{let{filterGroup}=_ref3;return filterGroup}}],filterTestAccounts:[!1,{persist:!0},{setFilterTestAccounts:(_,_ref4)=>{let{filterTestAccounts}=_ref4;return filterTestAccounts}}],searchQuery:["",{setSearchQuery:(_,_ref5)=>{let{searchQuery}=_ref5;return searchQuery}}],sparklineSelectedPeriod:[lastDay.value,{persist:!0},{setSparklineSelectedPeriod:(_,_ref6)=>{let{period}=_ref6;return period}}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)({hasSentExceptionEvent:{__default:void 0,loadExceptionEventDefinition:async()=>{let definition=(await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.eventDefinitions.list({event_type:_types__WEBPACK_IMPORTED_MODULE_6__.uW.Event,search:"$exception"})).results.find(r=>"$exception"===r.name);return!!definition&&!(0,lib_utils_definitions__WEBPACK_IMPORTED_MODULE_5__.U)(definition)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({sparklineOptions:[s=>[s.dateRange],_ref7=>{let{date_from}=_ref7;if(!date_from)return null;let isRelative=date_from.match(/-\d+[hdmy]/);if(date_from in customOptions)return customOptions[date_from];if(isRelative){let value=date_from?.replace("-","");return{custom:{value:value,label:value},default:lastDay}}return null}],customSparklineConfig:[s=>[s.sparklineOptions],sparklineOptions=>sparklineOptions?constructSparklineConfig(sparklineOptions.custom.value):null]}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__.Vt)(_ref8=>{let{values,actions}=_ref8;return{sparklineOptions:sparklineOptions=>{if(sparklineOptions){let options=Object.values(sparklineOptions).map(o=>o.value);values.sparklineSelectedPeriod&&options.includes(values.sparklineSelectedPeriod)||actions.setSparklineSelectedPeriod(sparklineOptions.custom.value)}else actions.setSparklineSelectedPeriod(null)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref9=>{let{actions}=_ref9;actions.loadExceptionEventDefinition()})])},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.3_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/error-tracking/ErrorTracking.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ErrorTracking__issue{height:calc(100vh - 12rem);min-height:25rem}.ErrorTrackingIssue .SessionRecordingPlayer{height:24rem}.ErrorTrackingIssue .LemonCollapsePanel>.LemonButton:hover:has(.LemonSegmentedButton:hover){background-color:inherit}",""]),module.exports=exports}}]);