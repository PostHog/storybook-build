(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(H,x,e){"use strict";e.r(x),e.d(x,"SessionsRecordings",function(){return _}),e.d(x,"scene",function(){return ye});var F=e("./node_modules/core-js/modules/es.array.map.js"),L=e("./node_modules/core-js/modules/es.object.values.js"),N=e("./frontend/src/lib/components/PageHeader.tsx"),A=e("./frontend/src/scenes/teamLogic.tsx"),o=e("./node_modules/kea/lib/index.esm.js"),f=e("./frontend/src/scenes/urls.ts"),M=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),$=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),I=e("./frontend/src/lib/components/AlertMessage/index.ts"),p=e("./frontend/@posthog/lemon-ui/src/index.ts"),J=e("./frontend/src/lib/logic/featureFlagLogic.ts"),z=e("./frontend/src/lib/constants.tsx"),W=e("./node_modules/antd/es/tabs/index.js"),y=e("./frontend/src/types.ts"),ee=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),se=e.n(ee),pe=e("./node_modules/core-js/modules/es.symbol.js"),he=e("./node_modules/core-js/modules/es.symbol.description.js"),Oe=e("./node_modules/core-js/modules/es.function.name.js"),Pe=e("./node_modules/core-js/modules/es.regexp.exec.js"),Se=e("./node_modules/core-js/modules/es.string.search.js"),xe=e("./node_modules/core-js/modules/es.array.concat.js"),ne=e("./node_modules/react/index.js"),Re=e("./node_modules/core-js/modules/es.object.keys.js"),Fe=e("./node_modules/core-js/modules/es.array.filter.js"),Le=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Te=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Ce=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),te=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),B=e.n(te),re=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),V=e.n(re),ae=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),E=e.n(ae),oe=e("./node_modules/@babel/runtime/regenerator/index.js"),S=e.n(oe),Ne=e("./node_modules/core-js/modules/es.array.iterator.js"),Ae=e("./node_modules/core-js/modules/es.object.to-string.js"),Ie=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ee=e("./node_modules/core-js/modules/es.string.starts-with.js"),De=e("./node_modules/core-js/modules/es.array.slice.js"),Z=e("./node_modules/kea-loaders/lib/index.js"),Q=e("./frontend/src/lib/api.ts"),R=e("./frontend/src/lib/utils.tsx"),h=e("./node_modules/kea-router/lib/index.js");function w(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function X(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?w(Object(r),!0).forEach(function(a){V()(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var U=30,ie={createdBy:"All users",page:1},le=Object(o.kea)([Object(o.path)(["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic"]),Object(o.props)({}),Object(o.key)(function(t){return t.tab}),Object(o.actions)(function(){return{setSavedPlaylistsFilters:function(s){return{filters:s}},loadPlaylists:!0}}),Object(o.reducers)(function(t){return E()(t),{filters:[ie,{setSavedPlaylistsFilters:function(r,a){var i=a.filters;return Object(R.ob)(X(X(X({},r||{}),i),"page"in i?{}:{page:1}))}}]}}),Object(Z.loaders)(function(t){var s=t.values;return{playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:function(){var r=B()(S.a.mark(function i(d,u){var v,m,O,g,b,P,T,c;return S.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(s.playlists.filters===null){j.next=3;break}return j.next=3,u(300);case 3:return b=X({},s.filters),P=b.createdBy==="All users"?void 0:b.createdBy,T={limit:U,offset:Math.max(0,(b.page-1)*U),order:(v=b.order)!==null&&v!==void 0?v:"-last_modified_at",created_by:P!=null?P:void 0,search:(m=b.search)!==null&&m!==void 0?m:void 0,date_from:(O=b.dateFrom)!==null&&O!==void 0?O:"all",date_to:(g=b.dateTo)!==null&&g!==void 0?g:void 0,pinned:b.pinned?!0:void 0},j.next=8,Q.b.recordings.listPlaylists(Object(R.Fb)(T));case 8:return c=j.sent,j.abrupt("return",c);case 10:case"end":return j.stop()}},i)}));function a(i,d){return r.apply(this,arguments)}return a}()}}}),Object(o.listeners)(function(t){var s=t.actions;return{setSavedPlaylistsFilters:function(){s.loadPlaylists()}}}),Object(o.selectors)(function(t){var s=t.actions;return{sorting:[function(r){return[r.filters]},function(r){return r.order?r.order.startsWith("-")?{columnKey:r.order.slice(1),order:-1}:{columnKey:r.order,order:1}:{columnKey:"last_modified_at",order:-1}}],pagination:[function(r){return[r.filters,r.playlists]},function(r,a){return{controlled:!0,pageSize:U,currentPage:r.page,entryCount:a.count,onBackward:a.previous?function(){return s.setSavedPlaylistsFilters({page:r.page-1})}:void 0,onForward:a.next?function(){return s.setSavedPlaylistsFilters({page:r.page+1})}:void 0}}]}}),Object(h.actionToUrl)(function(t){var s=t.values,r=function(){if(h.router.values.location.pathname===f.a.sessionRecordings(y.X.Playlists)){var i=s.filters,d=Object(R.ob)(h.router.values.searchParams);if(!Object(R.qb)(i,d))return[f.a.sessionRecordings(y.X.Playlists),i,{},{replace:!1}]}};return{loadPlaylists:r,setSavedPlaylistsFilters:r}}),Object(h.urlToAction)(function(t){var s=t.actions,r=t.values;return V()({},f.a.sessionRecordings(y.X.Playlists),function(){var a=B()(S.a.mark(function i(d,u){var v,m;return S.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:v=r.filters,m=Object(R.ob)(u),Object(R.qb)(v,m)||s.setSavedPlaylistsFilters(m);case 3:case"end":return g.stop()}},i)}));return function(i,d){return a.apply(this,arguments)}}())}),Object(o.afterMount)(function(t){var s=t.actions;s.loadPlaylists()})]),ce=e("./node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),de=e("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),ue=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),me=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),je=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),fe=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),ve=e("./frontend/@posthog/apps-common/src/index.ts"),n=e("./node_modules/react/jsx-runtime.js");function K(t){var s=t.tab,r=le({tab:s}),a=Object(o.useValues)(r),i=a.playlists,d=a.playlistsLoading,u=a.filters,v=a.sorting,m=a.pagination,O=Object(o.useActions)(r),g=O.setSavedPlaylistsFilters,b=Object(o.useValues)(fe.a),P=b.meFirstMembers,T=[{title:"Name",dataIndex:"name",render:function(l,j){var D=j.short_id,C=j.description;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p.Link,{className:"font-semibold",to:f.a.sessionRecordingPlaylist(D),children:l||"Untitled"}),C?Object(n.jsx)("div",{className:"truncate",children:C}):null]})},sorter:function(l,j){var D,C;return((D=l.name)!==null&&D!==void 0?D:"Untitled").localeCompare((C=j.name)!==null&&C!==void 0?C:"Untitled")}},{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",render:function(l){return Object(n.jsx)("div",{children:l&&typeof l=="string"&&Object(n.jsx)(ve.TZLabel,{time:l})})}},Object(me.b)()];return Object(n.jsxs)("div",{className:"space-y-4",children:[Object(n.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(n.jsx)(p.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:function(l){return g({search:l})},value:u.search||""}),Object(n.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(n.jsx)("div",{className:"flex items-center gap-2",children:Object(n.jsx)(p.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:u.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:function(){return g({pinned:!u.pinned})},icon:Object(ne.cloneElement)(u.pinned?Object(n.jsx)(ce.a,{}):Object(n.jsx)(de.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[Object(n.jsx)("span",{children:"Last modified:"}),Object(n.jsx)(je.a,{disabled:!1,dateFrom:u.dateFrom,dateTo:u.dateTo,onChange:function(l,j){return g({dateFrom:l,dateTo:j!=null?j:void 0})},makeLabel:function(l){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ue.a,{}),Object(n.jsxs)("span",{className:"hide-when-small",children:[" ",l]})]})}})]}),Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[Object(n.jsx)("span",{children:"Created by:"}),Object(n.jsx)(p.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"}].concat(se()(P.map(function(c){return{value:c.user.id,label:c.user.first_name}}))),value:u.createdBy,onChange:function(l){g({createdBy:l})},dropdownMatchSelectWidth:!1})]})]})]}),Object(n.jsx)(p.LemonTable,{loading:d,columns:T,dataSource:i.results,pagination:m,noSortingCancellation:!0,sorting:v,onSort:function(l){return g({order:l?"".concat(l.order===-1?"-":"").concat(l.columnKey):void 0})},rowKey:"id",loadingSkeletonRows:U,nouns:["playlist","playlists"]})]})}try{K.displayName="SavedSessionRecordingPlaylists",K.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:K.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(t){}var ge=e("./frontend/src/lib/components/Tooltip.tsx"),Be=e("./node_modules/core-js/modules/es.string.replace.js"),k=function(s){switch(s){case y.X.Recent:return"Recent Recordings";case y.X.Playlists:return"Saved Playlists";default:return Object(R.i)(s)}},G=Object(o.kea)([Object(o.path)(function(){return["scenes","session-recordings","root"]}),Object(o.connect)({values:[J.a,["featureFlags"]]}),Object(o.actions)({setTab:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.X.Recent;return{tab:s}},saveNewPlaylist:function(s){return{playlist:s}}}),Object(o.reducers)(function(t){return E()(t),{tab:[y.X.Recent,{setTab:function(r,a){var i=a.tab;return i}}]}}),Object(Z.loaders)(function(t){return E()(t),{newPlaylist:[null,{saveNewPlaylist:function(){var s=B()(S.a.mark(function a(i){var d,u;return S.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=i.playlist,m.next=3,Q.b.recordings.createPlaylist(d);case 3:return u=m.sent,m.abrupt("return",u);case 5:case"end":return m.stop()}},a)}));function r(a){return s.apply(this,arguments)}return r}()}]}}),Object(o.listeners)(function(t){return E()(t),{saveNewPlaylistSuccess:function(){var s=B()(S.a.mark(function a(i){var d;return S.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:d=i.newPlaylist,h.router.actions.push(f.a.sessionRecordingPlaylist(d.short_id));case 2:case"end":return v.stop()}},a)}));function r(a){return s.apply(this,arguments)}return r}()}}),Object(h.actionToUrl)(function(t){var s=t.values;return{setTab:function(){return[f.a.sessionRecordings(s.tab),h.router.values.searchParams]}}}),Object(o.selectors)(function(t){return E()(t),{breadcrumbs:[function(s){return[s.tab]},function(s){return[{name:k(s)}]}]}}),Object(h.urlToAction)(function(t){var s,r=t.actions,a=t.values;return s={},V()(s,f.a.sessionRecordings(),function(){!a.featureFlags[z.h.RECORDING_PLAYLISTS]||h.router.actions.replace(f.a.sessionRecordings(y.X.Recent))}),V()(s,"/recordings/:tab",function(d){var u=d.tab;!a.featureFlags[z.h.RECORDING_PLAYLISTS]||u!==a.tab&&r.setTab(u)}),s})]),be=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),Y=e("./frontend/src/lib/components/icons.tsx"),q=e("./frontend/src/scenes/session-recordings/settings/SessionRecordingSettings.tsx");function _(){var t=Object(o.useValues)(A.a),s=t.currentTeam,r=Object(o.useValues)(J.a),a=r.featureFlags,i=Object(o.useValues)(G),d=i.tab,u=i.newPlaylistLoading,v=Object(o.useActions)(G),m=v.saveNewPlaylist,O=!!a[z.h.RECORDING_PLAYLISTS],g=Object(o.useValues)(Object(M.c)({key:"recents",updateSearchParams:!0})),b=g.filters,P=Object(n.jsx)(n.Fragment,{children:Object(n.jsx)($.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0})}),T=s&&!(s!=null&&s.session_recording_opt_in);return Object(n.jsxs)("div",{children:[Object(n.jsx)(N.a,{title:Object(n.jsx)("div",{children:"Session Recordings"}),buttons:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p.LemonButton,{type:"secondary",icon:Object(n.jsx)(Y.IconSettings,{}),onClick:function(){return Object(q.b)()},children:"Configure"}),O&&d===y.X.Recent?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(ge.a,{title:"Save the currently filters as a dynamic playlist",placement:"left",children:Object(n.jsx)(p.LemonButton,{type:"primary",onClick:function(){return m({filters:b})},disabled:u,"data-attr":"save-recordings-playlist-button",icon:Object(n.jsx)(Y.IconPlus,{}),children:"Save as playlist"})})}):void 0]})}),O&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(W.a,{activeKey:d,animated:!1,style:{borderColor:"#D9D9D9"},onChange:function(l){return h.router.actions.push(f.a.sessionRecordings(l))},children:Object.values(y.X).map(function(c){return Object(n.jsx)(W.a.TabPane,{tab:k(c)},c)})})}),T?Object(n.jsx)("div",{className:"mb-4",children:Object(n.jsx)(I.a,{type:"info",action:{type:"secondary",icon:Object(n.jsx)(Y.IconSettings,{}),onClick:function(){return Object(q.b)()},children:"Configure"},children:"Session recordings are currently disabled for this project."})}):null,O?d?d===y.X.Recent?P:Object(n.jsx)(K,{tab:y.X.Playlists}):Object(n.jsx)(be.a,{}):P]})}var ye={component:_,logic:G}},"./node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(H,x,e){"use strict";var F=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),L=e("./node_modules/react/index.js"),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},A=N,o=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),f=function(I,p){return L.createElement(o.a,Object(F.a)(Object(F.a)({},I),{},{ref:p,icon:A}))};f.displayName="PushpinFilled";var M=x.a=L.forwardRef(f)},"./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(H,x,e){"use strict";var F=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),L=e("./node_modules/react/index.js"),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},A=N,o=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),f=function(I,p){return L.createElement(o.a,Object(F.a)(Object(F.a)({},I),{},{ref:p,icon:A}))};f.displayName="PushpinOutlined";var M=x.a=L.forwardRef(f)}}]);
