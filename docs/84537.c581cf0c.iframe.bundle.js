"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[84537],{"../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>issueActionsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.268.5_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts");let issueActionsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["products","error_tracking","components","IssueActions","issueActionsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({mergeIssues:ids=>({ids}),splitIssue:function(id,fingerprints){let exclusive=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return{id,fingerprints,exclusive}},resolveIssues:ids=>({ids}),suppressIssues:ids=>({ids}),activateIssues:ids=>({ids}),assignIssues:(ids,assignee)=>({ids,assignee}),updateIssueAssignee:(id,assignee)=>({id,assignee}),updateIssueStatus:(id,status)=>({id,status}),updateIssueName:(id,name)=>({id,name}),updateIssueDescription:(id,description)=>({id,description}),mutationSuccess:()=>{},mutationFailure:error=>({error})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref=>{let{actions}=_ref;async function runMutation(cb){try{await cb(),actions.mutationSuccess()}catch(e){actions.mutationFailure(e)}}return{mergeIssues:async _ref2=>{let{ids}=_ref2,[firstId,...otherIds]=ids;firstId&&otherIds.length>0&&await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_merged",{primary:firstId}),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.mergeInto(firstId,otherIds)})},splitIssue:async _ref3=>{let{id,fingerprints,exclusive}=_ref3;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_split",{issueId:id}),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.split(id,fingerprints,exclusive)})},resolveIssues:async _ref4=>{let{ids}=_ref4;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_resolve"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"resolved")})},suppressIssues:async _ref5=>{let{ids}=_ref5;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_suppress"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"suppressed")})},activateIssues:async _ref6=>{let{ids}=_ref6;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_activate"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"active")})},assignIssues:async _ref7=>{let{ids,assignee}=_ref7;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_assign"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkAssign(ids,assignee)})},updateIssueAssignee:async _ref8=>{let{id,assignee}=_ref8;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_assignee"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.assignIssue(id,assignee)})},updateIssueStatus:async _ref9=>{let{id,status}=_ref9;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_status"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{status})})},updateIssueName:async _ref10=>{let{id,name}=_ref10;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_name"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{name})})},updateIssueDescription:async _ref11=>{let{id,description}=_ref11;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_description"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{description})})}}})])},"../../products/error_tracking/frontend/components/SetupPrompt/SetupPrompt.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingSetupPrompt});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils/product-intents.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/types.ts"),_exceptionIngestionLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/components/SetupPrompt/exceptionIngestionLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ErrorTrackingSetupPrompt=_ref=>{let{children}=_ref,{hasSentExceptionEvent,hasSentExceptionEventLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_exceptionIngestionLogic__WEBPACK_IMPORTED_MODULE_7__.L),{currentTeam,currentTeamLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic),exceptionAutocaptureEnabled=currentTeam&&currentTeam.autocapture_exceptions_opt_in;return hasSentExceptionEventLoading||currentTeamLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.$j,{})}):hasSentExceptionEvent||exceptionAutocaptureEnabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(IngestionStatusCheck,{})},IngestionStatusCheck=()=>{let{addProductIntent,updateCurrentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__.C,{productName:"Error tracking",thingName:"issue",titleOverride:"You haven't captured any exceptions",description:"To start capturing exceptions you need to enable exception autocapture. Exception autocapture only applies to the JS SDK. Installation for other platforms are described in the docs.",isEmpty:!0,productKey:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,actionElementOverride:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{type:"primary",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_EXCEPTION_AUTOCAPTURE_ENABLED}),updateCurrentTeam({autocapture_exceptions_opt_in:!0})},children:"Enable exception autocapture"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{targetBlank:!0,sideIcon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconExternal,{className:"w-5 h-5"}),to:"https://posthog.com/docs/error-tracking/installation",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_DOCS_VIEWED})},children:"Read the docs"})]})})}},"../../products/error_tracking/frontend/components/SetupPrompt/exceptionIngestionLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>exceptionIngestionLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/utils/definitions.ts"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/types.ts");let exceptionIngestionLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["products","error_tracking","components","SetupPrompt","exceptionIngestionLogic"]),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)({hasSentExceptionEvent:{__default:void 0,loadExceptionEventDefinition:async()=>{let definition=(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.eventDefinitions.list({event_type:_types__WEBPACK_IMPORTED_MODULE_4__.uW.Event,search:"$exception"})).results.find(r=>"$exception"===r.name);return!!definition&&!(0,lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__.U)(definition)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref=>{let{actions}=_ref;actions.loadExceptionEventDefinition()})])},"../../products/error_tracking/frontend/scenes/ErrorTrackingFingerprintsScene/ErrorTrackingIssueFingerprintsScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingIssueFingerprintsScene:()=>ErrorTrackingIssueFingerprintsScene,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),SetupPrompt=__webpack_require__("../../products/error_tracking/frontend/components/SetupPrompt/SetupPrompt.tsx"),lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),issueActionsLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),queries=__webpack_require__("../../products/error_tracking/frontend/queries.ts");let errorTrackingIssueFingerprintsSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["products","error_tracking","scenes","ErrorTrackingFingerprintsScene","errorTrackingIssueFingerprintsSceneLogic",key]),(0,index_esm.props)({}),(0,index_esm.key)(_ref=>{let{id}=_ref;return id}),(0,index_esm.actions)({loadIssue:!0,split:exclusive=>({exclusive}),setSelectedFingerprints:fingerprints=>({fingerprints}),loadFingerprintSamples:(issue,fingerprints)=>({issue,fingerprints})}),(0,index_esm.connect)(()=>({actions:[issueActionsLogic.x,["splitIssue"]]})),(0,index_esm.defaults)({issue:null,issueFingerprints:null,fingerprintSamples:[]}),(0,index_esm.reducers)({selectedFingerprints:[[],{setSelectedFingerprints:(_,_ref2)=>{let{fingerprints}=_ref2;return fingerprints}}]}),(0,lib.loaders)(_ref3=>{let{values,props}=_ref3;return{issue:{loadIssue:async()=>await api.ZP.errorTracking.getIssue(props.id)},issueFingerprints:{loadIssueFingerprints:async()=>(await api.ZP.errorTracking.fingerprints.list(props.id)).results,split:()=>(values.issueFingerprints||[]).filter(f=>!values.selectedFingerprints.includes(f.fingerprint))},fingerprintSamples:{loadFingerprintSamples:async _ref4=>{let{issue,fingerprints}=_ref4;if(issue&&fingerprints){let query=(0,queries.FL)(issue.id,issue.first_seen,fingerprints.map(fingerprint=>fingerprint.fingerprint));return(await api.ZP.queryHogQL(query)).results.map(_ref5=>{let[fingerprint,count,samples]=_ref5;return{fingerprint,count,samples}})}return[]}}}}),(0,index_esm.selectors)({isLoading:[s=>[s.fingerprintSamplesLoading,s.issueLoading,s.issueFingerprintsLoading],(fingerprintSamplesLoading,issueLoading,issueFingerprintsLoading)=>fingerprintSamplesLoading||issueLoading||issueFingerprintsLoading],breadcrumbs:[s=>[s.issue],issue=>{let breadcrumbs=[{key:sceneTypes.x.ErrorTracking,name:"Error tracking",path:urls.j.errorTracking(),iconType:"error_tracking"}];if(issue){var _issue$name;let name=null!==(_issue$name=issue.name)&&void 0!==_issue$name?_issue$name:"Issue";breadcrumbs.push({key:[sceneTypes.x.ErrorTrackingIssue,name],path:urls.j.errorTrackingIssue(issue.id),name:name,iconType:"error_tracking"},{key:sceneTypes.x.ErrorTrackingIssueFingerprints,name:"Fingerprints",iconType:"error_tracking"})}else breadcrumbs.push({key:[sceneTypes.x.ErrorTrackingIssue,"Issue"],name:"Issue",iconType:"error_tracking"},{key:sceneTypes.x.ErrorTrackingIssueFingerprints,name:"Fingerprints",iconType:"error_tracking"});return breadcrumbs}]}),(0,index_esm.listeners)(_ref6=>{let{actions,props,values}=_ref6;return{split:_ref7=>{let{exclusive}=_ref7;actions.splitIssue(props.id,values.selectedFingerprints,exclusive),src.UJ.success("Issue split successfully!"),actions.setSelectedFingerprints([])}}}),(0,index_esm.events)(_ref8=>{let{actions}=_ref8;return{afterMount:()=>{actions.loadIssue(),actions.loadIssueFingerprints()}}})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:ErrorTrackingIssueFingerprintsScene,logic:errorTrackingIssueFingerprintsSceneLogic,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id}}};function ErrorTrackingIssueFingerprintsScene(){let{issue,issueFingerprints,selectedFingerprints,fingerprintSamples,isLoading}=(0,index_esm.useValues)(errorTrackingIssueFingerprintsSceneLogic),{loadFingerprintSamples,setSelectedFingerprints,split}=(0,index_esm.useActions)(errorTrackingIssueFingerprintsSceneLogic);(0,react.useEffect)(()=>{issue&&issueFingerprints&&loadFingerprintSamples(issue,issueFingerprints)},[issue,issueFingerprints,loadFingerprintSamples]);let columns=[{key:"actions",dataIndex:"fingerprint",render:fingerprint=>(0,jsx_runtime.jsx)(src.Hw,{checked:selectedFingerprints.includes(fingerprint),onChange:checked=>{setSelectedFingerprints(checked?[...selectedFingerprints,fingerprint]:selectedFingerprints.filter(f=>f!==fingerprint))},disabledReason:1===fingerprintSamples.length?"You cannot split an issue that only has one fingerprint":void 0}),width:"30px",title:(0,jsx_runtime.jsx)(src.Hw,{checked:fingerprintSamples.length>0&&selectedFingerprints.length===fingerprintSamples.length,disabledReason:1===fingerprintSamples.length?"You cannot split an issue that only has one fingerprint":void 0,onChange:checked=>{setSelectedFingerprints(checked?fingerprintSamples.map(f=>f.fingerprint):[])}})},{title:"Example type",key:"type",dataIndex:"samples",width:"200px",render:samples=>samples.length>0?samples[0].type:(0,jsx_runtime.jsx)("span",{className:"text-muted italic",children:"No exception types"})},{title:"Example message",key:"message",dataIndex:"samples",render:messages=>messages.length>0?messages[0].value:(0,jsx_runtime.jsx)("span",{className:"text-muted italic",children:"No exception messages"})},{title:"Count",dataIndex:"count"}],disabledReason=selectedFingerprints.length===fingerprintSamples.length?"You must leave at least one fingerprint associated with the issue":0===selectedFingerprints.length?"Select at least one fingerprint":1===fingerprintSamples.length?"You cannot split an issue that only has one fingerprint":void 0;return(0,jsx_runtime.jsx)(SetupPrompt.n,{children:(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("div",{children:"Select the fingerprints that you want to split out from this issue. An individual issue will be created for each of the fingerprints."}),selectedFingerprints.length<=1?(0,jsx_runtime.jsx)(src.Jp,{size:"small",type:"primary",disabledReason:disabledReason,onClick:()=>split(!0),children:"Split"}):(0,jsx_runtime.jsx)(src.Yv,{size:"small",type:"primary",placeholder:"Split",options:[{value:!1,label:"Split fingerprints into a single issue"},{value:!0,label:"Split fingerprints into individual issues"}],onSelect:value=>split(value),disabledReason:disabledReason}),(0,jsx_runtime.jsx)(src.g3,{className:"w-full",loading:isLoading,dataSource:fingerprintSamples,columns:columns,expandable:{noIndent:!0,rowExpandable:record=>record.samples.length>1,expandedRowRender:record=>(0,jsx_runtime.jsx)(src.g3,{className:"w-full",loading:!1,embedded:!0,showHeader:!0,dataSource:record.samples,columns:[{title:"Type",width:"200px",dataIndex:"type"},{title:"Message",dataIndex:"value"}]})}})]})})}}}]);