(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./frontend/src/lib/components/LemonSelect.tsx":function(ve,g,e){"use strict";e.d(g,"a",function(){return R});var J=e("./node_modules/@babel/runtime/helpers/extends.js"),se=e.n(J),le=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),w=e.n(le),oe=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),y=e.n(oe),k=e("./node_modules/core-js/modules/es.array.map.js"),s=e.n(k),C=e("./node_modules/core-js/modules/es.object.entries.js"),_e=e.n(C),S=e("./node_modules/react/index.js"),N=e.n(S),q=e("./frontend/src/lib/components/icons.tsx"),ee=e("./frontend/src/lib/components/LemonButton/index.ts"),re=["value","onChange","options","placeholder","dropdownMatchSelectWidth","allowClear"];function R(h){var p,te,B=h.value,X=h.onChange,$=h.options,U=h.placeholder,z=h.dropdownMatchSelectWidth,l=z===void 0?!0:z,f=h.allowClear,A=f===void 0?!1:f,v=y()(h,re),H=Object(S.useState)(B),Q=w()(H,2),m=Q[0],ue=Q[1],me=Object(S.useState)(!1),T=w()(me,2),x=T[0],O=T[1],F=A&&x&&!!m;return Object(S.useEffect)(function(){v.loading||ue(B)},[B,v.loading]),N.a.createElement("div",{className:"LemonButtonWithSideAction",onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)}},N.a.createElement(ee.b,se()({popup:{overlay:Object.entries($).map(function(j){var I=w()(j,2),u=I[0],V=I[1];return N.a.createElement(ee.a,{key:u,icon:V.icon,onClick:function(){u!=m&&(X(u),ue(u))},type:u==m?"highlighted":"stealth",disabled:V.disabled,fullWidth:!0,"data-attr":V["data-attr"]},V.label||u)}),sameWidth:l,actionable:!0},icon:m&&((p=$[m])===null||p===void 0?void 0:p.icon),sideIcon:F?N.a.createElement("div",null):void 0},v),m&&(((te=$[m])===null||te===void 0?void 0:te.label)||m)||N.a.createElement("span",{className:"text-muted"},U)),F&&N.a.createElement(ee.a,{className:"side-button",type:"tertiary",icon:N.a.createElement(q.IconClose,{style:{fontSize:"1rem"}}),tooltip:"Clear selection",onClick:function(){X(null),ue(null)}}))}try{R.displayName="LemonSelect",R.__docgenInfo={description:"",displayName:"LemonSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"LemonSelectOptions"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number | symbol | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: keyof O | null) => void"}},dropdownMatchSelectWidth:{defaultValue:{value:"true"},description:"",name:"dropdownMatchSelectWidth",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:{value:"false"},description:"",name:"allowClear",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'},{value:'"stealth"'},{value:'"highlighted"'},{value:'"primary-alt"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLButtonElement>"}},size:{defaultValue:null,description:"Variation on sizes - default is medium. Small looks better inline with text. Large is a chunkier row.",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'}]}},relaxedIconWidth:{defaultValue:null,description:"If icon width is relaxed, width of icon box is set to auto. Default icon width is 1em",name:"relaxedIconWidth",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"warning"'},{value:'"danger"'},{value:'"success"'},{value:'"muted"'},{value:'"highlighted"'}]}},extendedContent:{defaultValue:null,description:"Extended content, e.g. a description, to show in the lower button area.",name:"extendedContent",required:!1,type:{name:"ReactNode"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:null,description:"Tooltip to display on hover.",name:"tooltip",required:!1,type:{name:"any"}},fullWidth:{defaultValue:null,description:"Whether the row should take up the parent's full width.",name:"fullWidth",required:!1,type:{name:"boolean"}},center:{defaultValue:null,description:"Whether the row's contents should be centered.",name:"center",required:!1,type:{name:"boolean"}},outlined:{defaultValue:null,description:"Whether the element should be outlined with a standard border.",name:"outlined",required:!1,type:{name:"any"}},"data-attr":{defaultValue:null,description:"",name:"data-attr",required:!1,type:{name:"string"}},to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},sideIcon:{defaultValue:null,description:"",name:"sideIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | null"}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:"string"}},translucent:{defaultValue:null,description:"Whether the button should have transparent background in its base state (i.e. non-hover).",name:"translucent",required:!1,type:{name:"boolean"}},active:{defaultValue:null,description:"Whether hover style should be applied, signaling that the button is held active in some way.",name:"active",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonSelect.tsx#LemonSelect"]={docgenInfo:R.__docgenInfo,name:"LemonSelect",path:"frontend/src/lib/components/LemonSelect.tsx#LemonSelect"})}catch(h){}},"./frontend/src/lib/components/PayGateMini/PayGateMini.tsx":function(ve,g,e){"use strict";e.d(g,"a",function(){return z});var J=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),se=e.n(J),le=e("./node_modules/core-js/modules/es.symbol.js"),w=e("./node_modules/core-js/modules/es.symbol.description.js"),oe=e("./node_modules/react/index.js"),y=e.n(oe),k=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),C=e("./frontend/src/types.ts"),_e=e("./frontend/src/scenes/userLogic.ts"),S=e("./frontend/src/lib/components/icons.tsx"),N=e("./frontend/src/lib/components/LemonButton/index.ts"),q=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ee=e.n(q),re=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss"),R=e.n(re),h={};h.insert="head",h.singleton=!1;var p=ee()(R.a,h),te=R.a.locals||{},B=e("./frontend/src/lib/constants.tsx"),X=e("./frontend/src/lib/utils.tsx"),$,U=($={},se()($,C.d.DASHBOARD_PERMISSIONING,{icon:y.a.createElement(S.IconEmojiPeople,null),description:"Share insights, collaborate on dashboards, manage permissions, and make decisions with your team.",umbrella:"advanced permissioning"}),se()($,C.d.SSO_ENFORCEMENT,{icon:y.a.createElement(S.IconLock,null),description:"Enable SAML single sign-on, enforce login with SSO, automatic user provisioning, and advanced authentication controls.",umbrella:"advanced authentication"}),$);function z(l){var f=l.feature,A=l.style,v=l.children,H=l.overrideShouldShowGate,Q=Object(k.useValues)(s.a),m=Q.preflight,ue=Object(k.useValues)(_e.a),me=ue.hasAvailableFeature,T=U[f],x=B.i[f],O=null;return!H&&!me(f)&&(m!=null&&m.cloud?x===B.o?O="add-card":O="contact-sales":O="check-licensing"),O?y.a.createElement("div",{className:"PayGateMini",style:A},y.a.createElement("div",{className:"PayGateMini__icon"},T.icon),y.a.createElement("div",{className:"PayGateMini__description"},T.description),y.a.createElement("div",{className:"PayGateMini__cta"},"Upgrade to ",O==="add-card"?"a premium":"the ".concat(Object(X.i)(x))," ","plan to gain ",T.umbrella,"."),y.a.createElement(N.a,{to:O==="add-card"?"/organization/billing":void 0,href:O==="contact-sales"?"mailto:sales@posthog.com?subject=Inquiring about ".concat(T.umbrella):O==="check-licensing"?"https://posthog.com/pricing":void 0,type:"secondary",fullWidth:!0,center:!0},O==="add-card"?"Upgrade now":O==="contact-sales"?"Contact sales":"Explore license options")):y.a.createElement(y.a.Fragment,null,v)}try{z.displayName="PayGateMini",z.__docgenInfo={description:`A sort of paywall for premium features.

Simply shows its children when the feature is available,
otherwise it presents upsell UI with the call to action that's most relevant for the circumstances.`,displayName:"PayGateMini",props:{feature:{defaultValue:null,description:"",name:"feature",required:!0,type:{name:"enum",value:[{value:'"sso_enforcement"'},{value:'"dashboard_permissioning"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},overrideShouldShowGate:{defaultValue:null,description:"",name:"overrideShouldShowGate",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"]={docgenInfo:z.__docgenInfo,name:"PayGateMini",path:"frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"})}catch(l){}},"./frontend/src/scenes/dashboard/ShareModal.tsx":function(ve,g,e){"use strict";e.d(g,"a",function(){return Q}),e.d(g,"b",function(){return m});var J=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),se=e.n(J),le=e("./node_modules/core-js/modules/es.array.map.js"),w=e.n(le),oe=e("./node_modules/core-js/modules/es.array.concat.js"),y=e.n(oe),k=e("./node_modules/react/index.js"),s=e.n(k),C=e("./node_modules/kea/lib/index.esm.js"),_e=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),S=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),N=e("./frontend/src/scenes/urls.ts"),q=e("./frontend/src/models/dashboardsModel.tsx"),ee=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),re=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),R=e("./frontend/src/lib/components/LemonButton/index.ts"),h=e("./frontend/src/lib/utils.tsx"),p=e("./frontend/src/lib/components/icons.tsx"),te=e("./frontend/src/types.ts"),B=e("./frontend/src/lib/constants.tsx"),X=e("./frontend/src/lib/components/LemonSelect.tsx"),$=e("./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts"),U=e("./frontend/src/lib/components/ProfilePicture/index.ts"),z=e("./node_modules/antd/es/select/index.js"),l=e("./node_modules/antd/es/button/index.js"),f=e("./frontend/src/lib/components/Tooltip.tsx"),A=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),v=e("./frontend/src/lib/components/AlertMessage/index.ts"),H,Q=(H={},se()(H,B.e.EveryoneInProjectCanEdit,{label:"Everyone in the project can edit",icon:s.a.createElement(p.IconLockOpen,null)}),se()(H,B.e.OnlyCollaboratorsCanEdit,{label:"Only those invited to this dashboard can edit",icon:s.a.createElement(p.IconLock,null)}),H);function m(T){var x=T.visible,O=T.onCancel,F=Object(C.useValues)(q.a),j=F.dashboardLoading,I=Object(C.useValues)(_e.c),u=I.dashboard,V=I.canEditDashboard,Me=Object(C.useActions)(_e.c),Ee=Me.setIsSharedDashboard,de=u?window.location.origin+N.a.sharedDashboard(u.share_token):"";return u?s.a.createElement(re.a,{visible:x,onCancel:O},s.a.createElement(ue,{dashboardId:u.id}),s.a.createElement("section",null,s.a.createElement("h5",null,"External sharing"),s.a.createElement(ee.a,{id:"share-dashboard-switch",label:"Share dashboard publicly",checked:u.is_shared,loading:j,"data-attr":"share-dashboard-switch",onChange:function(ae){Ee(u.id,ae)},type:"primary",disabled:!V,style:{width:"100%",height:"3rem",fontWeight:600}}),u.is_shared?s.a.createElement(s.a.Fragment,null,u.share_token&&s.a.createElement(R.a,{"data-attr":"share-dashboard-link-button",onClick:function(){return Object(h.s)(de,"link")},icon:s.a.createElement(p.IconCopy,null),style:{width:"100%",height:"3rem",border:"1px solid var(--border)"}},"Copy shared dashboard link"),s.a.createElement("div",null,"Use this HTML snippet to embed the dashboard on your website:"),s.a.createElement(S.a,{language:S.b.HTML},'<iframe width="100%" height="100%" frameborder="0" src="'.concat(de,'?embedded" />'))):null)):null}function ue(T){var x=T.dashboardId,O=Object(C.useValues)(q.a),F=O.dashboardLoading,j=Object(C.useValues)(_e.c),I=j.dashboard,u=j.canEditDashboard,V=j.canRestrictDashboard,Me=Object(C.useActions)(_e.c),Ee=Me.triggerDashboardUpdate,de=Object(C.useValues)(Object($.a)({dashboardId:x})),fe=de.allCollaborators,ae=de.explicitCollaboratorsLoading,Oe=de.addableMembers,Pe=de.explicitCollaboratorsToBeAdded,Y=Object(C.useActions)(Object($.a)({dashboardId:x})),je=Y.deleteExplicitCollaborator,De=Y.setExplicitCollaboratorsToBeAdded,L=Y.addExplicitCollaborators;return I&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h5",null,"Collaboration settings"),s.a.createElement(A.a,{feature:te.d.DASHBOARD_PERMISSIONING,style:{marginTop:"0.75rem"}},s.a.createElement("section",null,(!u||!V)&&s.a.createElement(v.a,{type:"info"},u?"You aren't allowed to change the restriction level \u2013 only the dashboard owner and project admins can.":"You aren't allowed to change sharing settings \u2013 only dashboard collaborators with edit settings can."),s.a.createElement(X.a,{value:I.effective_restriction_level,onChange:function(i){return Ee({restriction_level:i})},options:Q,loading:F,type:"stealth",outlined:!0,style:{height:"3rem",width:"100%"},disabled:!V})),I.restriction_level>B.e.EveryoneInProjectCanEdit&&s.a.createElement("section",null,s.a.createElement("h5",null,"Collaborators"),u&&s.a.createElement("div",{style:{display:"flex",marginBottom:"0.75rem"}},s.a.createElement(z.a,{mode:"multiple",placeholder:"Search for team members to add\u2026",loading:ae,value:Pe,onChange:function(i){return De(i)},showArrow:!0,showSearch:!0,style:{flexGrow:1}},Oe.map(function(n){return s.a.createElement(z.a.Option,{key:n.id,value:n.uuid,title:"".concat(n.first_name," (").concat(n.email,")")},s.a.createElement(U.b,{name:n.first_name,email:n.email,size:"sm",style:{display:"inline-flex",marginRight:8}}),n.first_name," (",n.email,")")})),s.a.createElement(l.a,{type:"primary",style:{flexShrink:0,marginLeft:"0.5rem"},loading:ae,disabled:Pe.length===0,onClick:function(){return L()}},"Add")),fe.map(function(n){return s.a.createElement(me,{key:n.user.uuid,collaborator:n,deleteCollaborator:u?je:void 0})}))))}function me(T){var x=T.collaborator,O=T.deleteCollaborator,F=x.user,j=x.level,I=j<=B.d.CanEdit,u=B.C[j];return s.a.createElement("div",{className:"CollaboratorRow"},s.a.createElement(U.b,{email:F.email,name:F.first_name,size:"md",showName:!0}),s.a.createElement(f.a,{title:I?null:"".concat(F.first_name||"This person"," ").concat(j===B.d._Owner?"created the dashboard":"is a project administrator"),placement:"left"},s.a.createElement("div",{className:"CollaboratorRow__details"},s.a.createElement("span",null,I?u:s.a.createElement("b",null,u)),O&&s.a.createElement(R.a,{icon:s.a.createElement(p.IconCancel,null),onClick:function(){return O(F.uuid)},type:"stealth",tooltip:I?"Remove invited collaborator":null,disabled:!I,status:"danger",size:"small"}))))}try{m.displayName="ShareModal",m.__docgenInfo={description:"",displayName:"ShareModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"]={docgenInfo:m.__docgenInfo,name:"ShareModal",path:"frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"})}catch(T){}},"./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts":function(ve,g,e){"use strict";e.d(g,"a",function(){return ie});var J=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),se=e.n(J),le=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),w=e.n(le),oe=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),y=e.n(oe),k=e("./node_modules/@babel/runtime/regenerator/index.js"),s=e.n(k),C=e("./node_modules/core-js/modules/es.array.iterator.js"),_e=e.n(C),S=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e.n(S),q=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ee=e.n(q),re=e("./node_modules/core-js/modules/es.array.sort.js"),R=e.n(re),h=e("./node_modules/core-js/modules/es.promise.js"),p=e.n(h),te=e("./node_modules/core-js/modules/es.string.iterator.js"),B=e.n(te),X=e("./node_modules/core-js/modules/es.array.map.js"),$=e.n(X),U=e("./node_modules/core-js/modules/es.array.concat.js"),z=e.n(U),l=e("./node_modules/core-js/modules/es.array.filter.js"),f=e.n(l),A=e("./node_modules/core-js/modules/es.array.find.js"),v=e.n(A),H=e("./node_modules/core-js/modules/es.object.keys.js"),Q=e.n(H),m=e("./node_modules/core-js/modules/es.symbol.js"),ue=e.n(m),me=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),T=e.n(me),x=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),O=e.n(x),F=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),j=e.n(F),I=e("./node_modules/core-js/modules/es.array.slice.js"),u=e.n(I),V=e("./node_modules/core-js/modules/es.function.name.js"),Me=e.n(V),Ee=e("./node_modules/core-js/modules/es.array.from.js"),de=e.n(Ee),fe=e("./node_modules/core-js/modules/es.regexp.exec.js"),ae=e.n(fe),Oe=e("./node_modules/core-js/modules/es.symbol.description.js"),Pe=e.n(Oe),Y=e("./node_modules/core-js/modules/es.symbol.iterator.js"),je=e.n(Y),De=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/lib/api.ts"),n=e("./frontend/src/lib/constants.tsx"),i=e("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),d=e("./frontend/src/scenes/dashboard/dashboardLogic.ts");function P(t,o){var r=typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=D(t))||o&&t&&typeof t.length=="number"){r&&(t=r);var _=0,Z=function(){};return{s:Z,n:function(){return _>=t.length?{done:!0}:{done:!1,value:t[_++]}},e:function(b){throw b},f:Z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!0,G=!1,K;return{s:function(){r=r.call(t)},n:function(){var b=r.next();return W=b.done,b},e:function(b){G=!0,K=b},f:function(){try{!W&&r.return!=null&&r.return()}finally{if(G)throw K}}}}function D(t,o){if(!!t){if(typeof t=="string")return M(t,o);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(t,o)}}function M(t,o){(o==null||o>t.length)&&(o=t.length);for(var r=0,_=new Array(o);r<o;r++)_[r]=t[r];return _}function a(t,o){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(t);o&&(_=_.filter(function(Z){return Object.getOwnPropertyDescriptor(t,Z).enumerable})),r.push.apply(r,_)}return r}function E(t){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?a(Object(r),!0).forEach(function(_){se()(t,_,r[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(_){Object.defineProperty(t,_,Object.getOwnPropertyDescriptor(r,_))})}return t}var ie=Object(De.kea)({path:function(o){return["scenes","dashboard","dashboardCollaboratorsLogic",o]},props:{},key:function(o){return o.dashboardId},connect:function(o){return{values:[i.b,["admins","plainMembers","allMembers","allMembersLoading"],Object(d.c)({id:o.dashboardId}),["dashboard"]]}},actions:{deleteExplicitCollaborator:function(o){return{userUuid:o}},setExplicitCollaboratorsToBeAdded:function(o){return{userUuids:o}},addExplicitCollaborators:!0},reducers:{explicitCollaboratorsToBeAdded:[[],{setExplicitCollaboratorsToBeAdded:function(o,r){var _=r.userUuids;return _}}]},loaders:function(o){var r=o.values,_=o.props,Z=o.actions;return{explicitCollaborators:[[],{loadExplicitCollaborators:function(){var W=y()(s.a.mark(function K(){var c;return s.a.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,L.b.dashboards.collaborators.list(_.dashboardId);case 2:return c=ce.sent,c.sort(function(ne,be){return ne.user.first_name.localeCompare(be.user.first_name)}),ce.abrupt("return",c);case 5:case"end":return ce.stop()}},K)}));function G(){return W.apply(this,arguments)}return G}(),addExplicitCollaborators:function(){var W=y()(s.a.mark(function K(){var c,b,ce,ne;return s.a.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return c=r.explicitCollaboratorsToBeAdded,b=r.explicitCollaborators,Z.setExplicitCollaboratorsToBeAdded([]),he.next=4,Promise.all(c.map(function(){var Ce=y()(s.a.mark(function ye(Le){return s.a.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,L.b.dashboards.collaborators.create(_.dashboardId,Le,n.d.CanEdit);case 2:return pe.abrupt("return",pe.sent);case 3:case"end":return pe.stop()}},ye)}));return function(ye){return Ce.apply(this,arguments)}}()));case 4:return ce=he.sent,ne=[].concat(w()(b),w()(ce)),ne.sort(function(Ce,ye){return Ce.user.first_name.localeCompare(ye.user.first_name)}),he.abrupt("return",ne);case 8:case"end":return he.stop()}},K)}));function G(){return W.apply(this,arguments)}return G}(),deleteExplicitCollaborator:function(){var W=y()(s.a.mark(function K(c){var b;return s.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return b=c.userUuid,ne.next=3,L.b.dashboards.collaborators.delete(_.dashboardId,b);case 3:return ne.abrupt("return",r.explicitCollaborators.filter(function(be){return be.user.uuid!==b}));case 4:case"end":return ne.stop()}},K)}));function G(K){return W.apply(this,arguments)}return G}()}]}},selectors:{allCollaborators:[function(t){return[t.explicitCollaborators,t.admins,t.allMembers,t.dashboard]},function(t,o,r,_){var Z,W=[],G=_==null||(Z=_.created_by)===null||Z===void 0?void 0:Z.uuid,K=(_==null?void 0:_.effective_restriction_level)===n.e.EveryoneInProjectCanEdit?r:o;return W.push.apply(W,w()(t.filter(function(c){return!K.find(function(b){return b.user.uuid===c.user.uuid})}).map(function(c){return E(E({},c),{},{level:c.user.uuid===G?n.d._Owner:c.level})}))),W.push.apply(W,w()(K.map(function(c){return{user:c.user,level:c.user.uuid===G?n.d._Owner:n.d._ProjectAdmin}}))),W.sort(function(c,b){return c.level===b.level?c.user.first_name.localeCompare(b.user.first_name):b.level-c.level}),W}],addableMembers:[function(t){return[t.allCollaborators,t.plainMembers]},function(t,o){var r=[],_=P(o),Z;try{var W=function(){var K=Z.value;t.some(function(c){return c.user.uuid===K.user.uuid})||r.push(K.user)};for(_.s();!(Z=_.n()).done;)W()}catch(G){_.e(G)}finally{_.f()}return r.sort(function(G,K){return G.first_name.localeCompare(K.first_name)}),r}],addableMembersLoading:[function(t){return[t.explicitCollaboratorsLoading,t.allMembersLoading]},function(t,o){return t||o}]},events:function(o){var r=o.actions;return{afterMount:function(){r.loadExplicitCollaborators()}}}})},"./frontend/src/scenes/dashboard/dashboardsLogic.ts":function(ve,g,e){"use strict";e.d(g,"a",function(){return U}),e.d(g,"b",function(){return z});var J=e("./node_modules/core-js/modules/es.array.sort.js"),se=e.n(J),le=e("./node_modules/core-js/modules/es.array.filter.js"),w=e.n(le),oe=e("./node_modules/core-js/modules/es.object.to-string.js"),y=e.n(oe),k=e("./node_modules/core-js/modules/es.function.name.js"),s=e.n(k),C=e("./node_modules/core-js/modules/es.array.map.js"),_e=e.n(C),S=e("./node_modules/core-js/modules/es.regexp.exec.js"),N=e.n(S),q=e("./node_modules/core-js/modules/es.string.search.js"),ee=e.n(q),re=e("./node_modules/core-js/modules/es.array.flat-map.js"),R=e.n(re),h=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),p=e.n(h),te=e("./node_modules/kea/lib/index.esm.js"),B=e("./node_modules/fuse.js/dist/fuse.esm.js"),X=e("./frontend/src/models/dashboardsModel.tsx"),$=e("./frontend/src/lib/utils.tsx"),U;(function(l){l.All="all",l.Pinned="pinned",l.Shared="shared"})(U||(U={}));var z=Object(te.kea)({path:["scenes","dashboard","dashboardsLogic"],actions:{setSearchTerm:function(f){return{searchTerm:f}},setCurrentTab:function(f){return{tab:f}}},reducers:{searchTerm:{setSearchTerm:function(f,A){var v=A.searchTerm;return v}},currentTab:[U.All,{setCurrentTab:function(f,A){var v=A.tab;return v}}]},selectors:{dashboards:[function(l){return[X.a.selectors.nameSortedDashboards,l.searchTerm,l.currentTab]},function(l,f,A){return l=l.filter(function(v){return!v.deleted}).sort(function(v,H){var Q,m;return((Q=v.name)!==null&&Q!==void 0?Q:"Untitled").localeCompare((m=H.name)!==null&&m!==void 0?m:"Untitled")}),A===U.Pinned?l=l.filter(function(v){return v.pinned}):A===U.Shared&&(l=l.filter(function(v){return v.is_shared})),f?new B.a(l,{keys:["key","name"],threshold:.3}).search(f).map(function(v){return v.item}):l}],dashboardTags:[function(){return[X.a.selectors.nameSortedDashboards]},function(l){return Object($.Ab)(l.flatMap(function(f){var A=f.tags;return A||""}),function(f){return f}).sort()}]}})},"./frontend/src/scenes/project/Settings/teamMembersLogic.tsx":function(ve,g,e){"use strict";e.d(g,"a",function(){return je}),e.d(g,"b",function(){return De});var J=e("./node_modules/core-js/modules/es.object.keys.js"),se=e.n(J),le=e("./node_modules/core-js/modules/es.symbol.js"),w=e.n(le),oe=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),y=e.n(oe),k=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s=e.n(k),C=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),_e=e.n(C),S=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),N=e.n(S),q=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ee=e.n(q),re=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),R=e.n(re),h=e("./node_modules/@babel/runtime/regenerator/index.js"),p=e.n(h),te=e("./node_modules/core-js/modules/es.array.iterator.js"),B=e.n(te),X=e("./node_modules/core-js/modules/es.object.to-string.js"),$=e.n(X),U=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),z=e.n(U),l=e("./node_modules/core-js/modules/es.promise.js"),f=e.n(l),A=e("./node_modules/core-js/modules/es.string.iterator.js"),v=e.n(A),H=e("./node_modules/core-js/modules/es.array.map.js"),Q=e.n(H),m=e("./node_modules/core-js/modules/es.array.concat.js"),ue=e.n(m),me=e("./node_modules/core-js/modules/es.array.filter.js"),T=e.n(me),x=e("./node_modules/core-js/modules/es.array.find.js"),O=e.n(x),F=e("./node_modules/react/index.js"),j=e.n(F),I=e("./node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/lib/api.ts"),V=e("./frontend/src/lib/constants.tsx"),Me=e("./frontend/src/types.ts"),Ee=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),de=e("./frontend/src/lib/utils/permissioning.ts"),fe=e("./frontend/src/scenes/userLogic.ts"),ae=e("./frontend/src/scenes/teamLogic.ts"),Oe=e("./frontend/src/lib/components/lemonToast.tsx");function Pe(L,n){var i=Object.keys(L);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(L);n&&(d=d.filter(function(P){return Object.getOwnPropertyDescriptor(L,P).enumerable})),i.push.apply(i,d)}return i}function Y(L){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Pe(Object(i),!0).forEach(function(d){N()(L,d,i[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(i)):Pe(Object(i)).forEach(function(d){Object.defineProperty(L,d,Object.getOwnPropertyDescriptor(i,d))})}return L}var je=V.m.Admin,De=Object(I.kea)({path:["scenes","project","Settings","teamMembersLogic"],actions:{changeUserAccessLevel:function(n,i){return{user:n,newLevel:i}}},loaders:function(n){var i=n.values;return{explicitMembers:{__default:[],loadMembers:function(){var d=R()(p.a.mark(function D(){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.b.get("api/projects/".concat(ae.a.values.currentTeamId,"/explicit_members/"));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},D)}));function P(){return d.apply(this,arguments)}return P}(),addMembers:function(){var d=R()(p.a.mark(function D(M){var a,E,ie;return p.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=M.userUuids,E=M.level,o.next=3,Promise.all(a.map(function(r){return u.b.create("api/projects/".concat(ae.a.values.currentTeamId,"/explicit_members/"),{user_uuid:r,level:E})}));case 3:return ie=o.sent,Oe.a.success("Added ".concat(ie.length," members").concat(ie.length!==1&&"s"," to the project.")),o.abrupt("return",[].concat(ee()(i.explicitMembers),ee()(ie)));case 6:case"end":return o.stop()}},D)}));function P(D){return d.apply(this,arguments)}return P}(),removeMember:function(){var d=R()(p.a.mark(function D(M){var a,E;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return E=M.member,t.next=3,u.b.delete("api/projects/".concat(ae.a.values.currentTeamId,"/explicit_members/").concat(E.user.uuid,"/"));case 3:return Oe.a.success(j.a.createElement(j.a.Fragment,null,E.user.uuid===((a=fe.a.values.user)===null||a===void 0?void 0:a.uuid)?"Left":"Removed ".concat(E.user.first_name," (").concat(E.user.email,") from")," ","the project.")),t.abrupt("return",i.explicitMembers.filter(function(o){return o.user.uuid!==E.user.uuid}));case 5:case"end":return t.stop()}},D)}));function P(D){return d.apply(this,arguments)}return P}()}}},selectors:function(n){var i=n.selectors;return{allMembers:[function(){return[ae.a.selectors.currentTeam,fe.a.selectors.hasAvailableFeature,i.explicitMembers,Ee.a.selectors.members]},function(d,P,D,M){return!(d!=null&&d.access_control)||!P(Me.d.PROJECT_BASED_PERMISSIONING)?M.map(function(a){return Y(Y({},a),{},{explicit_team_level:null,organization_level:a.level})}):M.filter(function(a){var E=a.level;return E>=je}).map(function(a){return Y(Y({},a),{},{explicit_team_level:null,organization_level:a.level})}).concat(D.filter(function(a){var E=a.parent_level;return E<je}).map(function(a){return Y(Y({},a),{},{level:a.effective_level,explicit_team_level:a.level,organization_level:a.parent_level})}))}],allMembersLoading:[function(){return[i.explicitMembersLoading,Ee.a.selectors.membersLoading]},function(d,P){return d||P}],admins:[function(){return[i.allMembers]},function(d){return d.filter(function(P){var D=P.level;return D>=V.y.Admin})}],plainMembers:[function(){return[i.allMembers]},function(d){return d.filter(function(P){var D=P.level;return D<V.y.Admin})}],addableMembers:[function(){return[i.explicitMembers,Ee.a.selectors.members,fe.a.selectors.user]},function(d,P,D){return P.filter(function(M){var a=M.user;return a.uuid!==D.uuid}).map(function(M){var a=d.find(function(ie){return ie.user.uuid===M.user.uuid}),E;return a?E=Math.max(a.effective_level,M.level):E=M.level>=je?M.level:null,Y(Y({},M),{},{level:E,explicit_team_level:a?a.level:null,organization_level:M.level})})}]}},listeners:function(n){var i=n.actions;return{changeUserAccessLevel:function(){var d=R()(p.a.mark(function D(M){var a,E;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=M.user,E=M.newLevel,t.next=3,u.b.update("api/projects/".concat(ae.a.values.currentTeamId,"/explicit_members/").concat(a.uuid,"/"),{level:E});case 3:Oe.a.success(j.a.createElement(j.a.Fragment,null,"Made ",j.a.createElement("b",null,a.first_name)," project ",de.b.get(E))),i.loadMembers();case 5:case"end":return t.stop()}},D)}));function P(D){return d.apply(this,arguments)}return P}()}},events:function(n){var i=n.actions;return{afterMount:i.loadMembers}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss":function(ve,g,e){var J=e("./node_modules/css-loader/dist/runtime/api.js");g=J(!1),g.push([ve.i,".PayGateMini{display:flex;flex-direction:column;align-items:center;text-align:center;background:var(--bg-side);border-radius:var(--radius);padding:.75rem;font-size:.875rem}.PayGateMini__icon{display:flex;color:var(--warning);font-size:2rem}.PayGateMini__description{margin-top:.75rem;font-weight:600;color:var(--primary-alt)}.PayGateMini__cta{margin-bottom:.75rem}",""]),ve.exports=g}}]);
