(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(Ee,q,e){"use strict";e.d(q,"a",function(){return ct});var oe=e("./node_modules/core-js/modules/es.array.includes.js"),p=e.n(oe),Ke=e("./node_modules/core-js/modules/es.array.iterator.js"),Ve=e.n(Ke),F=e("./node_modules/core-js/modules/es.object.to-string.js"),Be=e.n(F),Z=e("./node_modules/core-js/modules/es.object.values.js"),ke=e.n(Z),r=e("./node_modules/core-js/modules/es.string.includes.js"),T=e.n(r),vt=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Q=e.n(vt),je=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),wt=e.n(je),Xe=e("./node_modules/kea/lib/index.esm.js"),xe=e("./frontend/src/lib/utils.tsx"),fe=e("./frontend/src/types.ts"),P=e("./frontend/src/scenes/insights/sharedUtils.ts"),$=e("./frontend/src/scenes/insights/insightLogic.ts");function Ye(de,Ze){var Oe=Object.keys(de);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(de);Ze&&(Re=Re.filter(function(It){return Object.getOwnPropertyDescriptor(de,It).enumerable})),Oe.push.apply(Oe,Re)}return Oe}function _e(de){for(var Ze=1;Ze<arguments.length;Ze++){var Oe=arguments[Ze]!=null?arguments[Ze]:{};Ze%2?Ye(Object(Oe),!0).forEach(function(Re){wt()(de,Re,Oe[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Oe)):Ye(Object(Oe)).forEach(function(Re){Object.defineProperty(de,Re,Object.getOwnPropertyDescriptor(Oe,Re))})}return de}function Et(de){return Object.values(fe.o).includes(de)}var ct=Object(Xe.kea)({props:{},key:Object(P.c)("new"),path:function(Ze){return["lib","components","ChartFilter","chartFilterLogic",Ze]},connect:function(Ze){return{actions:[Object($.c)(Ze),["setFilters"]],values:[Object($.c)(Ze),["filters"]]}},actions:function(){return{setChartFilter:function(Oe){return{chartFilter:Oe}}}},selectors:{chartFilter:[function(de){return[de.filters]},function(de){var Ze=de.display,Oe=de.funnel_viz_type;return(Ze===fe.d.FunnelViz?Oe:Ze)||null}]},listeners:function(Ze){var Oe=Ze.actions,Re=Ze.values;return{setChartFilter:function(lt){var pt=lt.chartFilter,D=Re.filters,at=D.display,ce=D.funnel_viz_type;Et(pt)?(ce!==pt||at!==fe.d.FunnelViz)&&Oe.setFilters(_e(_e({},Re.filters),{},{display:fe.d.FunnelViz,funnel_viz_type:pt})):Object(xe.mb)(at,pt)||Oe.setFilters(_e(_e({},Re.filters),{},{display:pt}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(Ee,q,e){"use strict";e.d(q,"a",function(){return xe});var oe=e("./node_modules/core-js/modules/es.array.iterator.js"),p=e.n(oe),Ke=e("./node_modules/core-js/modules/es.object.to-string.js"),Ve=e.n(Ke),F=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Be=e.n(F),Z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ke=e.n(Z),r=e("./node_modules/kea/lib/index.esm.js"),T=e("./frontend/src/lib/utils.tsx"),vt=e("./frontend/src/types.ts"),Q=e("./frontend/src/scenes/insights/sharedUtils.ts"),je=e("./frontend/src/scenes/insights/insightLogic.ts");function wt(fe,P){var $=Object.keys(fe);if(Object.getOwnPropertySymbols){var Ye=Object.getOwnPropertySymbols(fe);P&&(Ye=Ye.filter(function(_e){return Object.getOwnPropertyDescriptor(fe,_e).enumerable})),$.push.apply($,Ye)}return $}function Xe(fe){for(var P=1;P<arguments.length;P++){var $=arguments[P]!=null?arguments[P]:{};P%2?wt(Object($),!0).forEach(function(Ye){ke()(fe,Ye,$[Ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fe,Object.getOwnPropertyDescriptors($)):wt(Object($)).forEach(function(Ye){Object.defineProperty(fe,Ye,Object.getOwnPropertyDescriptor($,Ye))})}return fe}var xe=Object(r.kea)({props:{},key:Object(Q.c)("new"),path:function(P){return["lib","components","CompareFilter","compareFilterLogic",P]},connect:function(P){return{actions:[Object(je.c)(P),["setFilters"]],values:[Object(je.c)(P),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function($){return{compare:$}},toggleCompare:!0}},selectors:{compare:[function(fe){return[fe.filters]},function(fe){return!!(fe!=null&&fe.compare)}],disabled:[function(fe){return[fe.filters,fe.canEditInsight]},function(fe,P){var $=fe.insight,Ye=fe.date_from;return!P||$===vt.s.LIFECYCLE||Ye==="all"}]},listeners:function(P){var $=P.values,Ye=P.actions;return{setCompare:function(Et){var ct=Et.compare;Object(T.mb)(ct,$.compare)||Ye.setFilters(Xe(Xe({},$.filters),{},{compare:ct}))},toggleCompare:function(){Ye.setCompare(!$.compare)}}}})},"./frontend/src/lib/components/CopyToClipboard.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return ct});var oe=e("./node_modules/core-js/modules/es.symbol.js"),p=e.n(oe),Ke=e("./node_modules/core-js/modules/es.symbol.description.js"),Ve=e.n(Ke),F=e("./node_modules/core-js/modules/es.object.to-string.js"),Be=e.n(F),Z=e("./node_modules/core-js/modules/es.regexp.to-string.js"),ke=e.n(Z),r=e("./node_modules/@babel/runtime/helpers/extends.js"),T=e.n(r),vt=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Q=e.n(vt),je=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),wt=e.n(je),Xe=e("./node_modules/react/index.js"),xe=e.n(Xe),fe=e("./frontend/src/lib/utils.tsx"),P=e("./frontend/src/lib/components/Tooltip.tsx"),$=e("./frontend/src/lib/components/icons.tsx"),Ye=e("./frontend/src/lib/components/LemonButton/index.ts");function _e(de,Ze){var Oe=Object.keys(de);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(de);Ze&&(Re=Re.filter(function(It){return Object.getOwnPropertyDescriptor(de,It).enumerable})),Oe.push.apply(Oe,Re)}return Oe}function Et(de){for(var Ze=1;Ze<arguments.length;Ze++){var Oe=arguments[Ze]!=null?arguments[Ze]:{};Ze%2?_e(Object(Oe),!0).forEach(function(Re){Q()(de,Re,Oe[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Oe)):_e(Object(Oe)).forEach(function(Re){Object.defineProperty(de,Re,Object.getOwnPropertyDescriptor(Oe,Re))})}return de}function ct(de){var Ze=de.children,Oe=de.explicitValue,Re=de.description,It=de.selectable,lt=It===void 0?!1:It,pt=de.isValueSensitive,D=pt===void 0?!1:pt,at=de.tooltipMessage,ce=at===void 0?null:at,Dt=de.iconStyle,o=Dt===void 0?{}:Dt,nn=de.iconPosition,Bt=nn===void 0?"end":nn,Wt=de.style,V=wt()(de,["children","explicitValue","description","selectable","isValueSensitive","tooltipMessage","iconStyle","iconPosition","style"]),Jt=function(){return Object(fe.t)(Oe!=null?Oe:Ze?Ze.toString():"",Re)},xn=xe.a.createElement("span",T()({className:D?"ph-no-capture":"",style:Et({cursor:lt?"text":"pointer",display:"inline-flex",alignItems:"center",flexDirection:Bt==="end"?"row":"row-reverse",flexWrap:"nowrap",width:"fit-content",wordBreak:"break-all"},Wt),onClick:lt?void 0:Jt},V),xe.a.createElement("span",{style:Bt==="start"?{flexGrow:1}:{}},Ze),xe.a.createElement(Ye.a,{compact:!0,icon:xe.a.createElement($.IconCopy,null),className:"copy-icon",onClick:lt?Jt:void 0,style:Et(Q()({},Bt==="end"?"marginLeft":"marginRight",4),o)}));return!lt||ce!==null?xe.a.createElement(P.a,{title:ce||"Click to copy"},xn):xe.a.createElement(xe.a.Fragment,null,xn)}try{ct.displayName="CopyToClipboardInline",ct.__docgenInfo={description:"",displayName:"CopyToClipboardInline",props:{explicitValue:{defaultValue:null,description:"",name:"explicitValue",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},selectable:{defaultValue:{value:"false"},description:"Makes text selectable instead of copying on click anywhere",name:"selectable",required:!1,type:{name:"boolean"}},isValueSensitive:{defaultValue:{value:"false"},description:"",name:"isValueSensitive",required:!1,type:{name:"boolean"}},tooltipMessage:{defaultValue:{value:"null"},description:"",name:"tooltipMessage",required:!1,type:{name:"string | null"}},iconStyle:{defaultValue:{value:"{}"},description:"",name:"iconStyle",required:!1,type:{name:"Record<string, string | number>"}},iconPosition:{defaultValue:{value:"end"},description:"",name:"iconPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"]={docgenInfo:ct.__docgenInfo,name:"CopyToClipboardInline",path:"frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"})}catch(de){}},"./frontend/src/lib/components/Drawer.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return Z});var oe=e("./node_modules/@babel/runtime/helpers/extends.js"),p=e.n(oe),Ke=e("./node_modules/react/index.js"),Ve=e.n(Ke),F=e("./node_modules/antd/es/drawer/index.js"),Be=e("./frontend/src/vars.ts");function Z(ke){return Ve.a.createElement(F.a,p()({},ke,{zIndex:Be.a.zDrawer}))}try{Z.displayName="Drawer",Z.__docgenInfo={description:"",displayName:"Drawer",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Drawer.tsx#Drawer"]={docgenInfo:Z.__docgenInfo,name:"Drawer",path:"frontend/src/lib/components/Drawer.tsx#Drawer"})}catch(ke){}},"./frontend/src/lib/components/PropertiesTable.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return Dn});var oe=e("./node_modules/core-js/modules/es.array.filter.js"),p=e("./node_modules/core-js/modules/es.array.includes.js"),Ke=e("./node_modules/core-js/modules/es.array.map.js"),Ve=e("./node_modules/core-js/modules/es.object.entries.js"),F=e("./node_modules/core-js/modules/es.string.includes.js"),Be=e("./node_modules/core-js/modules/es.string.starts-with.js"),Z=e("./node_modules/@babel/runtime/helpers/typeof.js"),ke=e.n(Z),r=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),T=e.n(r),vt=e("./node_modules/react/index.js"),Q=e.n(vt),je=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),wt=e("./node_modules/antd/es/input/index.js"),Xe=e("./node_modules/antd/es/dropdown/index.js"),xe=e("./node_modules/antd/es/menu/index.js"),fe=e("./node_modules/antd/es/popconfirm/index.js"),P=e("./frontend/src/lib/utils.tsx"),$=e("./frontend/src/lib/components/icons.tsx"),Ye=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_e=e.n(Ye),Et=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss"),ct=e.n(Et),de={};de.insert="head",de.singleton=!1;var Ze=_e()(ct.a,de),Oe=ct.a.locals||{},Re=e("./frontend/src/lib/components/LemonTable/index.ts"),It=e("./frontend/src/lib/components/CopyToClipboard.tsx"),lt=e("./node_modules/kea/lib/index.esm.js"),pt=e("./frontend/src/models/propertyDefinitionsModel.ts"),D=e("./frontend/src/lib/components/LemonButton/index.ts"),at=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ce=e.n(at),Dt=e("./node_modules/antd/es/button/index.js"),o=e("./node_modules/antd/es/radio/index.js"),nn=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),Bt=e("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),Wt=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),V=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Jt=e("./node_modules/@ant-design/icons/es/icons/StopOutlined.js"),xn=e("./node_modules/antd/lib/modal/Modal.js"),ca=e.n(xn);function la(We,gt){var rt=Object.keys(We);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(We);gt&&(pe=pe.filter(function(Sn){return Object.getOwnPropertyDescriptor(We,Sn).enumerable})),rt.push.apply(rt,pe)}return rt}function On(We){for(var gt=1;gt<arguments.length;gt++){var rt=arguments[gt]!=null?arguments[gt]:{};gt%2?la(Object(rt),!0).forEach(function(pe){ce()(We,pe,rt[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(We,Object.getOwnPropertyDescriptors(rt)):la(Object(rt)).forEach(function(pe){Object.defineProperty(We,pe,Object.getOwnPropertyDescriptor(rt,pe))})}return We}function Xn(We){var gt=We.editProperty,rt={creating:!1,propertyType:"string"},pe=Object(vt.useState)(rt),Sn=T()(pe,2),Nt=Sn[0],Je=Sn[1],ot=function(){Nt.key&&Nt.value!==void 0&&(gt(Nt.key,Nt.value),Je(rt))};return Q.a.createElement(Q.a.Fragment,null,Q.a.createElement("div",{className:"mb"},Q.a.createElement("div",{className:"text-right"},Q.a.createElement(Dt.a,{"data-attr":"add-prop-button",onClick:function(){return Je(On(On({},Nt),{},{creating:!0}))},type:"primary",icon:Q.a.createElement(nn.a,null)},"New property"))),Q.a.createElement(ca.a,{visible:Nt.creating,destroyOnClose:!0,onCancel:function(){return Je(rt)},title:"Adding new property",okText:Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(Bt.a,{style:{marginRight:4}}),"Save Property"),okButtonProps:{disabled:!Nt.key||Nt.value===void 0},onOk:ot},Q.a.createElement("div",{className:"input-set"},Q.a.createElement("label",{htmlFor:"propertyKey"},"Key"),Q.a.createElement(wt.a,{id:"propertyKey",autoFocus:!0,placeholder:"try email, first_name, is_verified, membership_level, total_revenue",onChange:function(ft){return Je(On(On({},Nt),{},{key:ft.target.value}))}})),Q.a.createElement("div",{className:"input-set"},Q.a.createElement("label",{htmlFor:"propertyType"},"Type of Property"),Q.a.createElement("div",null,Q.a.createElement(o.a.Group,{value:Nt.propertyType,onChange:function(ft){return Je(On(On({},Nt),{},{propertyType:ft.target.value,value:ft.target.value==="string"?void 0:"true"}))},id:"propertyType",buttonStyle:"solid"},Q.a.createElement(o.a.Button,{value:"string"},"Text or Number"),Q.a.createElement(o.a.Button,{value:"boolean"},"Boolean or Null")))),Q.a.createElement("div",{className:"input-set"},Q.a.createElement("label",{htmlFor:"propertyValue"},"Value"),Nt.propertyType==="boolean"?Q.a.createElement("div",null,Q.a.createElement(o.a.Group,{value:Nt.value,onChange:function(ft){return Je(On(On({},Nt),{},{value:ft.target.value}))},id:"propertyValue",buttonStyle:"solid"},Q.a.createElement(o.a.Button,{value:"true",defaultChecked:!0},Q.a.createElement(Wt.a,null)," True"),Q.a.createElement(o.a.Button,{value:"false"},Q.a.createElement(V.a,null)," False"),Q.a.createElement(o.a.Button,{value:"null"},Q.a.createElement(Jt.a,null)," Null"))):Q.a.createElement(wt.a,{placeholder:"try email@example.com, gold, 1",onChange:function(ft){return Je(On(On({},Nt),{},{value:ft.target.value}))},id:"propertyValue",onKeyDown:function(ft){return ft.key==="Enter"&&ot()}}))))}try{Xn.displayName="NewPropertyComponent",Xn.__docgenInfo={description:"",displayName:"NewPropertyComponent",props:{editProperty:{defaultValue:null,description:"",name:"editProperty",required:!0,type:{name:"(key: string, newValue?: string | number | boolean | null | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"]={docgenInfo:Xn.__docgenInfo,name:"NewPropertyComponent",path:"frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"})}catch(We){}function Fn(We){var gt=We.value,rt=We.onChange;return Q.a.createElement(wt.a,{defaultValue:gt,autoFocus:!0,onBlur:function(){return rt(null,!1)},onPressEnter:function(Sn){return rt(Sn.target.value,!0)}})}function Zn(We){var gt=We.value,rt=We.rootKey,pe=We.onEdit,Sn=We.nestingLevel,Nt=Object(lt.useValues)(pt.a),Je=Nt.describeProperty,ot=Object(vt.useState)(!1),Pt=T()(ot,2),ft=Pt[0],ze=Pt[1],qt=rt&&!je.g.includes(rt)&&(!Sn||Sn<=1)&&pe,Qt=["string","number","bigint"],Ct=["boolean","null"],Fe;rt&&(Fe=Je(rt));var Ge=gt===null?"null":ke()(gt),Mt=gt===null?"null":String(gt),zt=function(dt,xt){ze(!1),rt!==void 0&&xt&&pe&&dt!=gt&&pe(rt,dt,gt)},qe=Q.a.createElement("span",{className:qt?"editable ph-no-capture":"ph-no-capture",onClick:function(){return qt&&Qt.includes(Ge)&&ze(!0)}},Object(P.eb)(gt)?Q.a.createElement("a",{href:gt,target:"_blank",rel:"noopener noreferrer",className:"value-link"},Q.a.createElement("span",null,Mt),Q.a.createElement($.IconOpenInNew,null)):Mt);return Q.a.createElement("div",{className:"properties-table-value"},ft?Q.a.createElement(Fn,{value:gt,onChange:zt}):Q.a.createElement(Q.a.Fragment,null,qt&&Ct.includes(Ge)?Q.a.createElement(Xe.a,{overlay:Q.a.createElement(xe.a,{onClick:function(dt){var xt=dt.key,ht=null;xt==="t"?ht=!0:xt==="f"&&(ht=!1),zt(ht,!0)}},Q.a.createElement(xe.a.Item,{key:"t"},"true"),Q.a.createElement(xe.a.Item,{key:"f"},"false"),Q.a.createElement(xe.a.Item,{key:"n",danger:!0},"null"))},qe):Q.a.createElement(It.a,{description:"property value",explicitValue:Mt,selectable:!0,isValueSensitive:!0},qe),Q.a.createElement("div",{className:"property-value-type"},Fe||Ge)))}function Dn(We){var gt=We.properties,rt=We.rootKey,pe=We.onEdit,Sn=We.sortProperties,Nt=Sn===void 0?!1:Sn,Je=We.searchable,ot=Je===void 0?!1:Je,Pt=We.embedded,ft=Pt===void 0?!0:Pt,ze=We.nestingLevel,qt=ze===void 0?0:ze,Qt=We.onDelete,Ct=We.className,Fe=Object(vt.useState)(""),Ge=T()(Fe,2),Mt=Ge[0],zt=Ge[1],qe=Object(vt.useMemo)(function(){if(!(gt instanceof Object))return[];var dt=Object.entries(gt);if(Mt){var xt=Mt.toLowerCase();dt=dt.filter(function(ht){var Yt=T()(ht,2),ue=Yt[0],In=Yt[1];return ue.toLowerCase().includes(xt)||JSON.stringify(In).toLowerCase().includes(xt)})}return Nt&&dt.sort(function(ht,Yt){var ue=T()(ht,1),In=ue[0],Cn=T()(Yt,1),ea=Cn[0];return In[0]==="$"&&ea[0]!=="$"?1:In[0]!=="$"&&ea[0]==="$"||In.toLowerCase()<ea.toLowerCase()?-1:1}),dt},[gt,Nt,Mt]);if(Array.isArray(gt))return Q.a.createElement("div",null,gt.length?gt.map(function(dt,xt){return Q.a.createElement(Dn,{key:xt,properties:dt,nestingLevel:qt+1})}):Q.a.createElement("div",{className:"property-value-type"},"ARRAY (EMPTY)"));var At=[{key:"key",title:"Key",width:"20rem",render:function(xt,ht){return Q.a.createElement("div",{className:"properties-table-key"},Q.a.createElement(je.b,{value:ht[0]}))},sorter:function(xt,ht){return String(xt[0]).localeCompare(String(ht[0]))}},{key:"value",title:"Value",render:function(xt,ht){return Q.a.createElement(Dn,{properties:ht[1],rootKey:ht[0],onEdit:pe,nestingLevel:qt+1})}}];return Qt&&qt===0&&At.push({key:"delete",title:"",width:0,render:function(xt,ht){return!je.g.includes(ht[0])&&!String(ht[0]).startsWith("$initial_")&&Q.a.createElement(fe.a,{onConfirm:function(){return Qt(ht[0])},okButtonProps:{danger:!0},okText:"Delete",title:Q.a.createElement(Q.a.Fragment,null,"Are you sure you want to delete property ",Q.a.createElement("code",null,ht[0]),"?"," ",Q.a.createElement("b",null,"This cannot be undone.")),placement:"left"},Q.a.createElement(D.a,{icon:Q.a.createElement($.IconDeleteForever,null),status:"danger",compact:!0}))}}),gt instanceof Object?Q.a.createElement(Q.a.Fragment,null,ot&&Q.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},Q.a.createElement(wt.a.Search,{placeholder:"Search for property keys and values",className:"mb",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:Mt,onChange:function(xt){zt(xt.target.value)}}),pe&&Q.a.createElement(Xn,{editProperty:pe})),Q.a.createElement(Re.a,{columns:At,showHeader:!ft,size:"small",rowKey:"0",embedded:ft,dataSource:qe,className:Ct,emptyState:"This property value is an empty object."})):Q.a.createElement(Zn,{value:gt,rootKey:rt,onEdit:pe,nestingLevel:qt})}try{Dn.displayName="PropertiesTable",Dn.__docgenInfo={description:"",displayName:"PropertiesTable",props:{properties:{defaultValue:null,description:"",name:"properties",required:!0,type:{name:"any"}},sortProperties:{defaultValue:{value:"false"},description:"",name:"sortProperties",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"",name:"searchable",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"true"},description:"Whether this table should be style for being embedded. Default: true.",name:"embedded",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((key: string) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((key: string, newValue: any, oldValue?: any) => void)"}},nestingLevel:{defaultValue:{value:"0"},description:"",name:"nestingLevel",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"]={docgenInfo:Dn.__docgenInfo,name:"PropertiesTable",path:"frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"})}catch(We){}},"./frontend/src/lib/introductions/GroupsIntroductionOption.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return Q});var oe=e("./node_modules/core-js/modules/es.array.includes.js"),p=e.n(oe),Ke=e("./node_modules/core-js/modules/es.string.includes.js"),Ve=e.n(Ke),F=e("./node_modules/react/index.js"),Be=e.n(F),Z=e("./node_modules/kea/lib/index.esm.js"),ke=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),r=e("./node_modules/rc-select/es/index.js"),T=e("./frontend/src/lib/components/Link.tsx"),vt=e("./frontend/src/lib/introductions/groupsAccessLogic.ts");function Q(je){var wt=je.value,Xe=Object(Z.useValues)(vt.b),xe=Xe.groupsAccessStatus;return[vt.a.HasAccess,vt.a.HasGroupTypes,vt.a.NoAccess].includes(xe)?Be.a.createElement(r.default.Option,{key:"groups",value:wt,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--bg-side)",color:"var(--text-muted)"}},Be.a.createElement(ke.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups \u2013"," ",Be.a.createElement(T.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",style:{fontWeight:600}},"Learn more")):null}try{Q.displayName="GroupsIntroductionOption",Q.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:Q.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(je){}},"./frontend/src/scenes/experiments/Experiment.tsx":function(Ee,q,e){"use strict";e.r(q),e.d(q,"scene",function(){return zn}),e.d(q,"Experiment_",function(){return Mn}),e.d(q,"CodeLanguageSelect",function(){return Yn});var oe=e("./node_modules/core-js/modules/es.symbol.js"),p=e("./node_modules/core-js/modules/es.symbol.description.js"),Ke=e("./node_modules/core-js/modules/es.array.concat.js"),Ve=e("./node_modules/core-js/modules/es.array.filter.js"),F=e("./node_modules/core-js/modules/es.array.map.js"),Be=e("./node_modules/core-js/modules/es.array.reduce.js"),Z=e("./node_modules/core-js/modules/es.function.name.js"),ke=e("./node_modules/core-js/modules/es.number.constructor.js"),r=e("./node_modules/core-js/modules/es.number.to-fixed.js"),T=e("./node_modules/core-js/modules/es.object.keys.js"),vt=e("./node_modules/core-js/modules/es.object.to-string.js"),Q=e("./node_modules/core-js/modules/es.regexp.to-string.js"),je=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),wt=e.n(je),Xe=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),xe=e.n(Xe),fe=e("./node_modules/antd/es/form/index.js"),P=e("./node_modules/antd/es/row/index.js"),$=e("./node_modules/antd/es/col/index.js"),Ye=e("./node_modules/antd/es/input/index.js"),_e=e("./node_modules/antd/es/tooltip/index.js"),Et=e("./node_modules/antd/es/button/index.js"),ct=e("./node_modules/antd/es/select/index.js"),de=e("./node_modules/antd/es/card/index.js"),Ze=e("./node_modules/antd/es/tag/index.js"),Oe=e("./node_modules/antd/es/collapse/index.js"),Re=e("./node_modules/antd/es/progress/index.js"),It=e("./node_modules/antd/es/skeleton/index.js"),lt=e("./node_modules/kea/lib/index.esm.js"),pt=e("./frontend/src/lib/components/PageHeader.tsx"),D=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),at=e("./frontend/src/lib/components/PropertyFilters/utils.ts"),ce=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Dt=e("./node_modules/react/index.js"),o=e.n(Dt),nn=e("./frontend/src/scenes/funnels/funnelLogic.ts"),Bt=e("./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx"),Wt=e("./frontend/src/scenes/insights/insightLogic.ts"),V=e("./frontend/src/types.ts"),Jt=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),xn=e.n(Jt),ca=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),la=e.n(ca),On={};On.insert="head",On.singleton=!1;var Xn=xn()(la.a,On),Fn=la.a.locals||{},Zn=e("./node_modules/core-js/modules/es.array.fill.js"),Dn=e("./node_modules/core-js/modules/es.array.find.js"),We=e("./node_modules/core-js/modules/es.array.find-index.js"),gt=e("./node_modules/core-js/modules/es.array.iterator.js"),rt=e("./node_modules/core-js/modules/es.array.splice.js"),pe=e("./node_modules/core-js/modules/es.number.epsilon.js"),Sn=e("./node_modules/core-js/modules/es.object.values.js"),Nt=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Je=e("./node_modules/@babel/runtime/regenerator/index.js"),ot=e.n(Je),Pt=e("./node_modules/regenerator-runtime/runtime.js"),ft=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ze=e.n(ft),qt=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Qt=e.n(qt),Ct=e("./frontend/src/lib/api.ts"),Fe=e("./frontend/src/lib/dayjs.ts"),Ge=e("./frontend/src/lib/utils.tsx"),Mt=["furry","amusing","charming","tame","swift","clever","pleasant","tiny","wild","herbivorous","admirable","adorable","agile","beautiful","bossy","candid","cold","colorful","cuddly","curious","cute","energetic","fast","feisty","fierce","fluffy","friendly","fuzzy","grumpy","hairy","heavy","large","lazy","loud","lovable","loving","enchanted","maternal","sweet","messy","nocturnal","noisy","nosy","picky","playful","quick","sassy","scaly","short","shy","slow","small","smart","soft","strong","tall","tenacious","glorious","warm","cheerful","gracious"],zt=["aardvark","albatross","alligator","alpaca","ant","anteater","antelope","ape","armadillo","donkey","baboon","badger","barracuda","bat","bear","beaver","bee","bison","boar","buffalo","butterfly","camel","capybara","caribou","cassowary","cat","caterpillar","cattle","chamois","cheetah","chicken","chimpanzee","chinchilla","chough","clam","cobra","cockroach","cod","cormorant","coyote","crab","crane","crocodile","crow","curlew","deer","dinosaur","dog","dogfish","dolphin","dotterel","dove","dragonfly","duck","dugong","dunlin","eagle","echidna","eel","eland","elephant","elk","emu","falcon","ferret","finch","firefox","fish","flamingo","fly","fox","frog","gaur","gazelle","gerbil","giraffe","gnat","gnu","goat","goldfinch","goldfish","goose","gorilla","goshawk","grasshopper","grouse","guanaco","gull","hamster","hare","hawk","hedgehog","heron","herring","hippopotamus","hornet","horse","human","hummingbird","hyena","ibex","ibis","jackal","jaguar","jay","jellyfish","kangaroo","kingfisher","koala","kookabura","kouprey","kudu","lapwing","lark","lemur","leopard","lion","llama","lobster","locust","loris","louse","lyrebird","magpie","mallard","manatee","mandrill","mantis","marten","meerkat","mink","mole","mongoose","monkey","moose","mosquito","mouse","mule","narwhal","newt","nightingale","octopus","okapi","opossum","oryx","ostrich","otter","owl","oyster","panther","parrot","partridge","peafowl","pelican","penguin","pheasant","pig","pigeon","pony","porcupine","porpoise","quail","quelea","quetzal","rabbit","raccoon","rail","ram","rat","raven","reindeer","rhinoceros","rook","salamander","salmon","sandpiper","sardine","scorpion","seahorse","seal","shark","sheep","shrew","skunk","snail","snake","sparrow","spider","spoonbill","squid","squirrel","starling","stingray","stinkbug","stork","swallow","swan","tapir","tarsier","termite","tiger","toad","trout","turkey","turtle","viper","vulture","wallaby","walrus","wasp","weasel","whale","wildcat","wolf","wolverine","wombat","woodcock","woodpecker","worm","wren","yak","zebra"];function qe(){return"".concat(Object(Ge.j)(Object(Ge.ub)(Mt))," ").concat(Object(Ge.j)(Object(Ge.ub)(zt)))}var At=e("./frontend/src/scenes/insights/utils/cleanFilters.ts"),dt=e("./frontend/src/scenes/teamLogic.ts"),xt=e("./frontend/src/scenes/urls.ts"),ht=e("./node_modules/kea-router/lib/index.js"),Yt=e("./frontend/src/scenes/experiments/experimentsLogic.ts"),ue=e("./frontend/src/lib/constants.tsx"),In=e("./frontend/src/scenes/trends/trendsLogic.ts"),Cn=e("./frontend/src/lib/utils/eventUsageLogic.ts"),ea=e("./frontend/src/scenes/userLogic.ts"),$n=e("./frontend/src/lib/components/Tooltip.tsx"),jn=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),ta=e("./frontend/src/models/groupsModel.ts"),Gt=e("./frontend/src/lib/components/lemonToast.tsx");function z(E,x){var I=Object.keys(E);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(E);x&&(R=R.filter(function(U){return Object.getOwnPropertyDescriptor(E,U).enumerable})),I.push.apply(I,R)}return I}function ee(E){for(var x=1;x<arguments.length;x++){var I=arguments[x]!=null?arguments[x]:{};x%2?z(Object(I),!0).forEach(function(R){wt()(E,R,I[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(I)):z(Object(I)).forEach(function(R){Object.defineProperty(E,R,Object.getOwnPropertyDescriptor(I,R))})}return E}var Ae=14,Ce=Object(lt.kea)({props:{},key:function(x){return x.experimentId||"new"},path:function(x){return["scenes","experiment","experimentLogic",x]},connect:{values:[dt.a,["currentTeamId"],ea.a,["hasAvailableFeature"],ta.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[Yt.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:function(x){return{experiment:x}},createExperiment:function(x,I,R){return{draft:x,runningTime:I,sampleSize:R}},setExperimentInsightId:function(x){return{shortId:x}},createNewExperimentInsight:function(x){return{filters:x}},setFilters:function(x){return{filters:x}},setNewExperimentData:function(x){return{experimentData:x}},updateExperimentGroup:function(x,I){return{variant:x,idx:I}},removeExperimentGroup:function(x){return{idx:x}},setExperimentInsightType:function(x){return{insightType:x}},setEditExperiment:function(x){return{editing:x}},setSecondaryMetrics:function(x){return{secondaryMetrics:x}},resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:function(x,I){var R=I.experimentData;if(R.filters){var U=ee(ee({},x==null?void 0:x.filters),R.filters);return ee(ee(ee({},x),R),{},{filters:U})}if(R.parameters){var te=ee(ee({},x==null?void 0:x.parameters),R.parameters);return ee(ee(ee({},x),R),{},{parameters:te})}return ee(ee({},x),R)},updateExperimentGroup:function(x,I){var R,U=I.variant,te=I.idx,J=Qt()((x==null||(R=x.parameters)===null||R===void 0?void 0:R.feature_flag_variants)||[]);return J[te]=ee(ee({},J[te]),U),ee(ee({},x),{},{parameters:ee(ee({},x==null?void 0:x.parameters),{},{feature_flag_variants:J})})},addExperimentGroup:function(x){var I;if(!(x==null||(I=x.parameters)===null||I===void 0)&&I.feature_flag_variants){var R=Rt(x.parameters.feature_flag_variants.length+1),U=x.parameters.feature_flag_variants.map(function(te,J){return ee(ee({},te),{},{rollout_percentage:R[J]})});return ee(ee({},x),{},{parameters:ee(ee({},x.parameters),{},{feature_flag_variants:[].concat(Qt()(U),[{key:"test_group_".concat(x.parameters.feature_flag_variants.length),rollout_percentage:R[R.length-1]}])})})}return x},removeExperimentGroup:function(x,I){var R,U,te=I.idx;if(!x)return x;var J=Qt()(((R=x.parameters)===null||R===void 0?void 0:R.feature_flag_variants)||[]);J.splice(te,1);var L=Rt(((x==null||(U=x.parameters)===null||U===void 0?void 0:U.feature_flag_variants)||[]).length-1),se=J.map(function(Y,He){return ee(ee({},Y),{},{rollout_percentage:L[He]})});return ee(ee({},x),{},{parameters:ee(ee({},x.parameters),{},{feature_flag_variants:se})})},setSecondaryMetrics:function(x,I){var R=I.secondaryMetrics,U=R.map(function(te){return te});return ee(ee({},x),{},{secondary_metrics:U})},resetNewExperiment:function(){return{parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}}}}],experimentInsightType:[V.s.TRENDS,{setExperimentInsightType:function(x,I){var R=I.insightType;return R}}],experimentInsightId:[null,{setExperimentInsightId:function(x,I){var R=I.shortId;return R}}],editingExistingExperiment:[!1,{setEditExperiment:function(x,I){var R=I.editing;return R}}]},listeners:function(x){var I=x.values,R=x.props,U=x.actions;return{createExperiment:function(){var te=ze()(ot.a.mark(function L(se){var Y,He,tt,nt,Le,we,H,mn,Zt,gn;return ot.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(He=se.draft,tt=se.runningTime,nt=se.sampleSize,Le=null,we=!!R.experimentId&&R.experimentId!=="new",be.prev=3,!we){be.next=14;break}return be.next=7,Ct.a.update("api/projects/".concat(I.currentTeamId,"/experiments/").concat(R.experimentId),ee(ee({},I.newExperimentData),{},{parameters:ee(ee({},(H=I.newExperimentData)===null||H===void 0?void 0:H.parameters),{},{recommended_running_time:tt,recommended_sample_size:nt})},!He&&{start_date:Object(Fe.a)()}));case 7:if(Le=be.sent,!(!((mn=Le)===null||mn===void 0)&&mn.id)){be.next=12;break}return U.updateExperiments(Le),ht.router.actions.push(xt.a.experiment(Le.id)),be.abrupt("return");case 12:be.next=18;break;case 14:return be.next=16,Ct.a.create("api/projects/".concat(I.currentTeamId,"/experiments"),ee(ee({},I.newExperimentData),{},{parameters:ee(ee({},(Zt=I.newExperimentData)===null||Zt===void 0?void 0:Zt.parameters),{},{recommended_running_time:tt,recommended_sample_size:nt})},!He&&{start_date:Object(Fe.a)()}));case 16:Le=be.sent,Le&&Cn.f.actions.reportExperimentCreated(Le);case 18:be.next=24;break;case 20:return be.prev=20,be.t0=be.catch(3),Gt.a.error(be.t0.detail||"Failed to create experiment"),be.abrupt("return");case 24:!((Y=Le)===null||Y===void 0)&&Y.id&&(gn=Le.id,ht.router.actions.push(xt.a.experiment(gn)),U.addToExperiments(Le),Gt.a.success("Experiment ".concat(we?"updated":"created"),{button:{label:"View it",action:function(){ht.router.actions.push(xt.a.experiment(gn))}}}));case 25:case"end":return be.stop()}},L,null,[[3,20]])}));function J(L){return te.apply(this,arguments)}return J}(),createNewExperimentInsight:function(){var te=ze()(ot.a.mark(function L(se){var Y,He,tt,nt;return ot.a.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return Y=se.filters,I.experimentInsightType===V.s.FUNNELS?He=Object(At.a)(ee({insight:V.s.FUNNELS,funnel_viz_type:V.o.Steps,display:V.d.FunnelViz,date_from:Object(Fe.a)().subtract(Ae,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Fe.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:ue.p.horizontal},Y)):He=Object(At.a)(ee({insight:V.s.TRENDS,date_from:Object(Fe.a)().subtract(Ae,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Fe.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},Y)),tt={name:qe(),description:"",tags:[],filters:He,result:null},we.next=5,Ct.a.create("api/projects/".concat(I.currentTeamId,"/insights"),tt);case 5:nt=we.sent,U.setExperimentInsightId(nt.short_id),U.setNewExperimentData({filters:ee({},tt.filters)});case 8:case"end":return we.stop()}},L)}));function J(L){return te.apply(this,arguments)}return J}(),setFilters:function(J){var L=J.filters;if(I.experimentInsightType===V.s.FUNNELS){var se;(se=nn.a.findMounted({dashboardItemId:I.experimentInsightId}))===null||se===void 0||se.actions.setFilters(L)}else{var Y;(Y=In.a.findMounted({dashboardItemId:I.experimentInsightId}))===null||Y===void 0||Y.actions.setFilters(L)}},loadExperimentSuccess:function(){var te=ze()(ot.a.mark(function L(se){var Y;return ot.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:Y=se.experimentData,Y&&Cn.f.actions.reportExperimentViewed(Y),U.setExperimentInsightType((Y==null?void 0:Y.filters.insight)||V.s.FUNNELS),Y!=null&&Y.start_date?(U.resetNewExperiment(),U.loadExperimentResults(),U.loadSecondaryMetricResults()):(U.setNewExperimentData(ee({},Y)),U.createNewExperimentInsight(Y==null?void 0:Y.filters));case 4:case"end":return tt.stop()}},L)}));function J(L){return te.apply(this,arguments)}return J}(),launchExperiment:function(){var te=ze()(ot.a.mark(function L(){var se;return ot.a.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:se=Object(Fe.a)(),U.updateExperiment({start_date:se.format("YYYY-MM-DDTHH:mm")}),I.experimentData&&Cn.f.actions.reportExperimentLaunched(I.experimentData,se);case 3:case"end":return He.stop()}},L)}));function J(){return te.apply(this,arguments)}return J}(),endExperiment:function(){var te=ze()(ot.a.mark(function L(){var se,Y,He;return ot.a.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:Y=Object(Fe.a)(),U.updateExperiment({end_date:Y.format("YYYY-MM-DDTHH:mm")}),He=Y.diff((se=I.experimentData)===null||se===void 0?void 0:se.start_date,"second"),I.experimentData&&Cn.f.actions.reportExperimentCompleted(I.experimentData,Y,He,I.areResultsSignificant);case 4:case"end":return nt.stop()}},L)}));function J(){return te.apply(this,arguments)}return J}(),archiveExperiment:function(){var te=ze()(ot.a.mark(function L(){return ot.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:U.updateExperiment({archived:!0}),I.experimentData&&Cn.f.actions.reportExperimentArchived(I.experimentData);case 2:case"end":return Y.stop()}},L)}));function J(){return te.apply(this,arguments)}return J}(),setExperimentInsightType:function(){if(R.experimentId==="new"||I.editingExistingExperiment)U.createNewExperimentInsight();else{var J;U.createNewExperimentInsight((J=I.experimentData)===null||J===void 0?void 0:J.filters)}},updateExperimentSuccess:function(){var te=ze()(ot.a.mark(function L(se){var Y;return ot.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:Y=se.experimentData,U.updateExperiments(Y);case 2:case"end":return tt.stop()}},L)}));function J(L){return te.apply(this,arguments)}return J}()}},loaders:function(x){var I=x.values,R=x.props;return{experimentData:[null,{loadExperiment:function(){var U=ze()(ot.a.mark(function J(){var L;return ot.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!(R.experimentId&&R.experimentId!=="new")){Y.next=16;break}return Y.prev=1,Y.next=4,Ct.a.get("api/projects/".concat(I.currentTeamId,"/experiments/").concat(R.experimentId));case 4:return L=Y.sent,Y.abrupt("return",L);case 8:if(Y.prev=8,Y.t0=Y.catch(1),Y.t0.status!==404){Y.next=14;break}ht.router.actions.push(xt.a.experiments()),Y.next=16;break;case 14:throw Gt.a.error("Failed to load experiment ".concat(R.experimentId)),new Error("Failed to load experiment ".concat(R.experimentId));case 16:return Y.abrupt("return",null);case 17:case"end":return Y.stop()}},J,null,[[1,8]])}));function te(){return U.apply(this,arguments)}return te}(),updateExperiment:function(){var U=ze()(ot.a.mark(function J(L){var se;return ot.a.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:return He.next=2,Ct.a.update("api/projects/".concat(I.currentTeamId,"/experiments/").concat(R.experimentId),L);case 2:return se=He.sent,He.abrupt("return",se);case 4:case"end":return He.stop()}},J)}));function te(J){return U.apply(this,arguments)}return te}()}],experimentResults:[null,{loadExperimentResults:function(){var U=ze()(ot.a.mark(function J(){var L;return ot.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,Ct.a.get("api/projects/".concat(I.currentTeamId,"/experiments/").concat(R.experimentId,"/results"));case 3:return L=Y.sent,Y.abrupt("return",ee(ee({},L),{},{itemID:Math.random().toString(36).substring(2,15)}));case 7:if(Y.prev=7,Y.t0=Y.catch(0),Y.t0.code!=="no_data"){Y.next=11;break}return Y.abrupt("return",null);case 11:return Gt.a.error(Y.t0.detail||"Failed to load experiment results"),Y.abrupt("return",null);case 13:case"end":return Y.stop()}},J,null,[[0,7]])}));function te(){return U.apply(this,arguments)}return te}()}],secondaryMetricResults:[null,{loadSecondaryMetricResults:function(){var U=ze()(ot.a.mark(function J(){var L,se,Y,He;return ot.a.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:L=[],se=0;case 2:if(!(se<(((Y=I.experimentData)===null||Y===void 0?void 0:Y.secondary_metrics.length)||0))){nt.next=10;break}return nt.next=5,Ct.a.get("api/projects/".concat(I.currentTeamId,"/experiments/").concat(R.experimentId,"/secondary_results?id=").concat(se));case 5:He=nt.sent,L.push(He.result);case 7:se++,nt.next=2;break;case 10:return nt.abrupt("return",L);case 11:case"end":return nt.stop()}},J)}));function te(){return U.apply(this,arguments)}return te}()}]}},selectors:{breadcrumbs:[function(E){return[E.experimentData,function(x,I){return I.experimentId}]},function(E,x){return[{name:"Experiments",path:xt.a.experiments()},{name:(E==null?void 0:E.name)||"New Experiment",path:xt.a.experiment(x||"new")}]}],variants:[function(E){return[E.newExperimentData,E.experimentData]},function(E,x){var I,R;if(x!=null&&x.start_date){var U;return(x==null||(U=x.parameters)===null||U===void 0?void 0:U.feature_flag_variants)||[]}return(E==null||(I=E.parameters)===null||I===void 0?void 0:I.feature_flag_variants)||(x==null||(R=x.parameters)===null||R===void 0?void 0:R.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[function(E){return[E.newExperimentData,E.groupsTaxonomicTypes]},function(E,x){var I;return(E==null||(I=E.filters)===null||I===void 0?void 0:I.aggregation_group_type_index)!=null&&x.length>0?[x[E.filters.aggregation_group_type_index]]:[ce.a.PersonProperties,ce.a.Cohorts]}],parsedSecondaryMetrics:[function(E){return[E.newExperimentData,E.experimentData]},function(E,x){var I=(E==null?void 0:E.secondary_metrics)||(x==null?void 0:x.secondary_metrics)||[];return I}],minimumDetectableChange:[function(E){return[E.newExperimentData]},function(E){var x;return(E==null||(x=E.parameters)===null||x===void 0?void 0:x.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[function(E){return[E.minimumDetectableChange]},function(E){return function(x){return Math.ceil(1600*x*(1-x/100)/(E*E))}}],areResultsSignificant:[function(E){return[E.experimentResults]},function(E){return(E==null?void 0:E.significant)||!1}],significanceBannerDetails:[function(E){return[E.experimentResults]},function(E){if((E==null?void 0:E.significance_code)===V.E.HighLoss){var x;return o.a.createElement(o.a.Fragment,null,"This is because the expected loss in conversion is greater than 1%",o.a.createElement($n.a,{placement:"right",title:o.a.createElement(o.a.Fragment,null,"Current value is ",(x=((E==null?void 0:E.expected_loss)||0)*100)===null||x===void 0?void 0:x.toFixed(2),"%")},o.a.createElement(jn.a,{style:{padding:"4px 2px"}})),".")}if((E==null?void 0:E.significance_code)===V.E.HighPValue){var I;return o.a.createElement(o.a.Fragment,null,"This is because the p value is greater than 0.05",o.a.createElement($n.a,{placement:"right",title:o.a.createElement(o.a.Fragment,null,"Current value is ",(E==null||(I=E.p_value)===null||I===void 0?void 0:I.toFixed(3))||1,".")},o.a.createElement(jn.a,{style:{padding:"4px 2px"}})),".")}return(E==null?void 0:E.significance_code)===V.E.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(E==null?void 0:E.significance_code)===V.E.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[function(E){return[E.minimumDetectableChange]},function(E){return function(x){var I=x*E/100,R=x,U=I+x;return parseFloat((4/Math.pow(Math.sqrt(R/Ae)-Math.sqrt(U/Ae),2)).toFixed(1))}}],expectedRunningTime:[function(){return[]},function(){return function(E,x){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ae;return parseFloat((x/(E/I)).toFixed(1))}}],conversionRateForVariant:[function(E){return[E.experimentResults]},function(E){return function(x){var I="Can't find variant";if(!E)return I;var R=(E==null?void 0:E.insight).find(function(U){var te,J;return((te=U[0])===null||te===void 0||(J=te.breakdown_value)===null||J===void 0?void 0:J[0])===x});return R?(R[R.length-1].count/R[0].count*100).toFixed(1):I}}],getIndexForVariant:[function(E){return[E.experimentResults]},function(E){return function(x,I){if(!E)return 0;var R=-1;return I===V.s.FUNNELS?R=Qt()(E==null?void 0:E.insight).sort(function(U,te){var J,L;return((J=te[0])===null||J===void 0?void 0:J.count)-((L=U[0])===null||L===void 0?void 0:L.count)}).findIndex(function(U){var te,J;return((te=U[0])===null||te===void 0||(J=te.breakdown_value)===null||J===void 0?void 0:J[0])===x}):R=(E==null?void 0:E.insight).findIndex(function(U){return U.breakdown_value===x}),R===-1?0:R}}],countDataForVariant:[function(E){return[E.experimentResults]},function(E){return function(x){var I="Can't find variant";if(!E)return I;var R=(E==null?void 0:E.insight).find(function(U){return U.breakdown_value===x});return R?R.count.toString():I}}],highestProbabilityVariant:[function(E){return[E.experimentResults]},function(E){if(E){var x=Math.max.apply(Math,Qt()(Object.values(E.probability)));return Object.keys(E.probability).find(function(I){return Math.abs(E.probability[I]-x)<Number.EPSILON})}}],areTrendResultsConfusing:[function(E){return[E.experimentResults,E.highestProbabilityVariant]},function(E,x){if(!E)return!1;var I=(E==null?void 0:E.insight).reduce(function(R,U){return U.count>R.count?U:R},{count:0,breakdown_value:""});return I.count?I.breakdown_value!==x:!1}]},urlToAction:function(x){var I=x.actions,R=x.values,U=x.props;return{"/experiments/:id":function(J){var L=J.id;if(!R.hasAvailableFeature(V.c.EXPERIMENTATION)){ht.router.actions.push("/experiments");return}if(L){var se=L==="new"?"new":parseInt(L);se==="new"&&(I.createNewExperimentInsight(),I.resetNewExperiment(),I.setSecondaryMetrics([])),I.setEditExperiment(!1),se!=="new"&&se===U.experimentId&&I.loadExperiment()}}}}});function Rt(E){var x=Math.round(100/E),I=x*E,R=I-100,U=new Array(E).fill(x);return U[E-1]=x-R,U}var Pe=e("./frontend/src/scenes/insights/InsightContainer.tsx"),Ue=e("./frontend/src/lib/components/icons.tsx"),Xt=e("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),Lt=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),an=e("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),en=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Tt=e("./frontend/src/lib/components/CopyToClipboard.tsx"),jt=e("./frontend/src/scenes/funnels/funnelUtils.ts"),et=e("./node_modules/antd/es/modal/index.js"),Pn=e("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js");function dn(E,x){var I=Object.keys(E);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(E);x&&(R=R.filter(function(U){return Object.getOwnPropertyDescriptor(E,U).enumerable})),I.push.apply(I,R)}return I}function yt(E){for(var x=1;x<arguments.length;x++){var I=arguments[x]!=null?arguments[x]:{};x%2?dn(Object(I),!0).forEach(function(R){wt()(E,R,I[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(I)):dn(Object(I)).forEach(function(R){Object.defineProperty(E,R,Object.getOwnPropertyDescriptor(I,R))})}return E}var fn=14,it={name:"",filters:{insight:V.s.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},Te={name:"",filters:{insight:V.s.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:ue.p.horizontal}},Ot=Object(lt.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[dt.a,["currentTeamId"]]},actions:{setSecondaryMetrics:function(x){return{secondaryMetrics:x}},createNewMetric:!0,addNewMetric:function(x){return{metric:x}},updateMetricFilters:function(x){return{filters:x}},setFilters:function(x){return{filters:x}},setPreviewInsightId:function(x){return{shortId:x}},createPreviewInsight:function(x){return{filters:x}},showModal:!0,hideModal:!1,changeInsightType:function(x){return{type:x}},setCurrentMetricName:function(x){return{name:x}},deleteMetric:function(x){return{metricId:x}}},loaders:function(x){var I=x.values;return{experiments:[[],{loadExperiments:function(){var R=ze()(ot.a.mark(function te(){var J;return ot.a.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,Ct.a.get("api/projects/".concat(I.currentTeamId,"/experiments"));case 2:return J=se.sent,se.abrupt("return",J.results);case 4:case"end":return se.stop()}},te)}));function U(){return R.apply(this,arguments)}return U}()}]}},reducers:function(x){var I=x.props;return{previewInsightId:[null,{setPreviewInsightId:function(U,te){var J=te.shortId;return J}}],metrics:[I.initialMetrics,{addNewMetric:function(U,te){var J=te.metric;return[].concat(Qt()(U),[yt({},J)])},deleteMetric:function(U,te){var J=te.metricId;return U.filter(function(L,se){return se!==J})}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1}}],currentMetricName:["",{setCurrentMetricName:function(U,te){var J=te.name;return J}}],currentMetric:[it,{changeInsightType:function(U,te){var J=te.type;return J===V.s.TRENDS?it:U.filters.insight===V.s.TRENDS?Te:it},updateMetricFilters:function(U,te){var J=te.filters;return yt(yt({},U),{},{filters:J})}}]}},listeners:function(x){var I=x.actions,R=x.values,U=x.props;return{createPreviewInsight:function(){var te=ze()(ot.a.mark(function L(se){var Y,He,tt,nt;return ot.a.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return Y=se.filters,(Y==null?void 0:Y.insight)===V.s.FUNNELS?He=Object(At.a)(yt({insight:V.s.FUNNELS,funnel_viz_type:V.o.Steps,display:V.d.FunnelViz,date_from:Object(Fe.a)().subtract(fn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Fe.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:ue.p.horizontal},Y)):He=Object(At.a)(yt({insight:V.s.TRENDS,date_from:Object(Fe.a)().subtract(fn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Fe.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},Y)),tt={description:"",tags:[],filters:He,result:null},we.next=5,Ct.a.create("api/projects/".concat(dt.a.values.currentTeamId,"/insights"),tt);case 5:nt=we.sent,I.setPreviewInsightId(nt.short_id);case 7:case"end":return we.stop()}},L)}));function J(L){return te.apply(this,arguments)}return J}(),setFilters:function(J){var L=J.filters;if(L.insight===V.s.FUNNELS){var se;(se=nn.a.findMounted({dashboardItemId:R.previewInsightId}))===null||se===void 0||se.actions.setFilters(L)}else{var Y;(Y=In.a.findMounted({dashboardItemId:R.previewInsightId}))===null||Y===void 0||Y.actions.setFilters(L)}},createNewMetric:function(){I.addNewMetric(yt(yt({},R.currentMetric),{},{name:R.currentMetricName})),U.onMetricsChange(R.metrics),I.changeInsightType(V.s.TRENDS),I.setCurrentMetricName("")},deleteMetric:function(){U.onMetricsChange(R.metrics)},changeInsightType:function(){return I.createPreviewInsight(R.currentMetric.filters)}}},events:function(x){var I=x.actions;return{afterMount:function(){I.createPreviewInsight()}}}}),Ht=e("./frontend/src/lib/components/LemonButton/index.ts");function un(E,x){var I=Object.keys(E);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(E);x&&(R=R.filter(function(U){return Object.getOwnPropertyDescriptor(E,U).enumerable})),I.push.apply(I,R)}return I}function yn(E){for(var x=1;x<arguments.length;x++){var I=arguments[x]!=null?arguments[x]:{};x%2?un(Object(I),!0).forEach(function(R){wt()(E,R,I[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(I)):un(Object(I)).forEach(function(R){Object.defineProperty(E,R,Object.getOwnPropertyDescriptor(I,R))})}return E}function vn(E){var x=E.onMetricsChange,I=E.initialMetrics,R=Ot({onMetricsChange:x,initialMetrics:I}),U=Object(lt.useValues)(R),te=U.previewInsightId,J=U.metrics,L=U.modalVisible,se=U.currentMetric,Y=Object(lt.useActions)(R),He=Y.createNewMetric,tt=Y.updateMetricFilters,nt=Y.setFilters,Le=Y.showModal,we=Y.hideModal,H=Y.changeInsightType,mn=Y.setCurrentMetricName,Zt=Y.deleteMetric,gn=Object(lt.useValues)(Object(Wt.c)({dashboardItemId:te,syncWithUrl:!1})),Tn=gn.insightProps,be=Object(lt.useValues)(Object(nn.a)(Tn)),pn=be.isStepsEmpty,hn=be.filterSteps;return o.a.createElement(o.a.Fragment,null,o.a.createElement(et.a,{title:"Add secondary metric",visible:L,destroyOnClose:!0,onCancel:we,footer:null,style:{minWidth:600}},o.a.createElement(fe.a,{layout:"vertical",initialValues:{type:V.s.TRENDS},onValuesChange:function(Vt){Vt.name&&mn(Vt.name)},onFinish:function(){He(),we()},scrollToFirstError:!0,requiredMark:!1},o.a.createElement(fe.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}]},o.a.createElement(Ye.a,null)),o.a.createElement(fe.a.Item,{name:"type",label:"Type"},o.a.createElement(ct.a,{style:{display:"flex"},value:se.filters.insight,onChange:function(){H()},suffixIcon:o.a.createElement(an.a,null),dropdownMatchSelectWidth:!1},o.a.createElement(ct.a.Option,{value:V.s.TRENDS},o.a.createElement($.a,null,o.a.createElement("span",null,o.a.createElement("b",null,"Trend")))),o.a.createElement(ct.a.Option,{value:V.s.FUNNELS},o.a.createElement($.a,null,o.a.createElement("span",null,o.a.createElement("b",null,"Conversion funnel")))))),o.a.createElement(fe.a.Item,{name:"query",label:"Query"},o.a.createElement(de.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},se.filters.insight===V.s.FUNNELS&&o.a.createElement(Bt.a,{filters:se.filters,setFilters:function(Vt){var bn=yn(yn({},se.filters),{},{insight:V.s.FUNNELS},Vt);tt(bn),nt(bn)},typeKey:"funnel-preview-metric",hideMathSelector:!0,hideDeleteBtn:hn.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!pn,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[ce.a.EventProperties,ce.a.PersonProperties,ce.a.Cohorts,ce.a.Elements],rowClassName:"action-filters-bordered"}),se.filters.insight===V.s.TRENDS&&o.a.createElement(Bt.a,{entitiesLimit:1,horizontalUI:!0,filters:se.filters,setFilters:function(Vt){var bn=yn(yn({},se.filters),{},{insight:V.s.TRENDS},Vt);tt(bn),nt(bn)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,hideMathSelector:!1,propertiesTaxonomicGroupTypes:[ce.a.EventProperties,ce.a.PersonProperties,ce.a.Cohorts,ce.a.Elements]}))),o.a.createElement(fe.a.Item,{name:"metric-preview",label:"Metric preview"},o.a.createElement(lt.BindLogic,{logic:Wt.c,props:Tn},o.a.createElement(Pe.a,{disableHeader:!0,disableTable:!0}))),o.a.createElement(P.a,{justify:"end"},o.a.createElement(Ht.a,{type:"secondary",className:"mr-05",onClick:function(){return we()}},"Cancel"),o.a.createElement(Ht.a,{type:"primary",htmlType:"submit"},"Save")))),o.a.createElement(P.a,null,o.a.createElement($.a,null,J.map(function(st,Vt){return o.a.createElement(P.a,{key:Vt,className:"mt"},o.a.createElement(P.a,{align:"middle",className:"full-width border-all",style:{padding:8}},o.a.createElement("div",{style:{fontWeight:500}},"Name")," ",o.a.createElement("div",{className:"metric-name"},st.name),o.a.createElement(Pn.a,{className:"text-danger",style:{padding:8},onClick:function(){return Zt(Vt)}})),o.a.createElement(de.a,{className:"full-width",style:{borderTop:"none"},bodyStyle:{padding:0}},st.filters.insight===V.s.FUNNELS&&o.a.createElement(Bt.a,{filters:st.filters,setFilters:function(bt){var St=yn(yn({},st.filters),{},{insight:V.s.FUNNELS},bt);tt(St),nt(St)},typeKey:"funnel-preview-".concat(Vt),hideMathSelector:!0,hideDeleteBtn:hn.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!pn,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[ce.a.EventProperties,ce.a.PersonProperties,ce.a.Cohorts,ce.a.Elements],rowClassName:"action-filters-bordered",readOnly:!0}),st.filters.insight===V.s.TRENDS&&o.a.createElement(Bt.a,{horizontalUI:!0,filters:st.filters,setFilters:function(bt){var St=yn(yn({},st.filters),{},{insight:V.s.TRENDS},bt);tt(St),nt(St)},typeKey:"trend-preview-".concat(Vt),buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,hideMathSelector:!1,propertiesTaxonomicGroupTypes:[ce.a.EventProperties,ce.a.PersonProperties,ce.a.Cohorts,ce.a.Elements],readOnly:!0})))}),J&&!(J.length>2)&&o.a.createElement($.a,null,o.a.createElement("div",{className:"mb-05 mt"},o.a.createElement(Et.a,{style:{color:"var(--primary)",minWidth:240},onClick:Le},"Add metric"))))))}try{vn.displayName="SecondaryMetrics",vn.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:vn.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(E){}var Bn=e("./frontend/src/lib/colors.ts"),pa=e("./frontend/src/lib/components/EntityFilterInfo.tsx"),da=e("./frontend/src/lib/components/EditableField/EditableField.tsx"),ra=e("./frontend/src/lib/components/Link.tsx"),ua=e("./frontend/src/lib/logic/featureFlagLogic.ts"),fa=e("./node_modules/antd/es/slider/index.js"),va=e("./node_modules/antd/es/input-number/index.js"),Un=e("./frontend/src/lib/components/InsightLabel/index.tsx"),kn=e("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function oa(){var E=Object(Dt.useState)(!1),x=xe()(E,2),I=x[0],R=x[1],U=Object(Dt.useState)(!1),te=xe()(U,2),J=te[0],L=te[1];return o.a.createElement(de.a,{className:"experiment-workflow",title:o.a.createElement("span",{className:"card-secondary"},"Experiment workflow")},o.a.createElement(P.a,null,o.a.createElement($.a,{className:"exp-workflow-step step-completed full-width"},o.a.createElement(P.a,{align:"middle"},o.a.createElement(Ue.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),o.a.createElement("b",{className:"ml-05"},"Create experiment")),o.a.createElement("div",{className:"ml-2"},"Set variants, select participants, and add secondary metrics"))),o.a.createElement(P.a,null,o.a.createElement($.a,{className:"full-width exp-workflow-step ".concat(I?"step-completed":""),onClick:function(){return R(!I)}},o.a.createElement(P.a,{align:"middle"},I?o.a.createElement(Ue.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):o.a.createElement(Ue.IconRadioButtonUnchecked,null),o.a.createElement("b",{className:"ml-05"},"Validate experiment")),o.a.createElement("div",{className:"ml-2"},"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."))),o.a.createElement(P.a,null,o.a.createElement($.a,{className:"full-width exp-workflow-step ".concat(J?"step-completed":""),onClick:function(){return L(!J)}},o.a.createElement(P.a,{align:"middle"},J?o.a.createElement(Ue.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):o.a.createElement(Ue.IconRadioButtonUnchecked,null),o.a.createElement("b",{className:"ml-05"},"Launch experiment")),o.a.createElement("div",{className:"ml-2"},"Run your experiment, monitor results, and decide when to terminate your experiment."))))}function Kn(E){var x,I,R,U,te,J,L=E.experiment,se=E.trendCount,Y=E.funnelConversionRate,He=E.trendExposure,tt=E.funnelSampleSize,nt=E.funnelEntrants,Le=(L==null?void 0:L.id)||"new",we=Object(lt.useValues)(Ce({experimentId:Le})),H=we.experimentInsightType,mn=we.editingExistingExperiment,Zt=we.minimumDetectableChange,gn=we.expectedRunningTime,Tn=we.aggregationLabel,be=Object(lt.useActions)(Ce({experimentId:Le})),pn=be.setNewExperimentData,hn=H===V.s.FUNNELS&&100-Y<50?100-Y:50,st=Object(Fe.a)().diff(Object(Fe.a)(L==null?void 0:L.start_date),"hour"),Vt=0;L!=null&&L.start_date?Vt=gn(nt||1,tt||0,st):Vt=gn(nt||1,tt||0);var bn=Object(Fe.a)(L==null?void 0:L.start_date).add(Vt,"hour"),bt=!(L!=null&&L.end_date)&&st>=24&&nt&&tt,St=Object(Ge.s)(L==null||(x=L.filters)===null||x===void 0?void 0:x.properties);return o.a.createElement(P.a,null,o.a.createElement($.a,{span:!(L!=null&&L.start_date)&&Le!=="new"&&!mn?12:24},Le==="new"&&o.a.createElement(P.a,{className:"experiment-preview-row"},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("b",null,"Experiment preview")),o.a.createElement("div",{className:"text-muted"},"Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "))),(Le==="new"||mn)&&o.a.createElement(P.a,{className:"mb"},o.a.createElement($.a,{span:24},o.a.createElement("div",null,o.a.createElement("b",null,"Minimum acceptable improvement"),o.a.createElement(_e.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept."},o.a.createElement(jn.a,{style:{marginLeft:4}}))),o.a.createElement(P.a,{className:"mde-slider"},o.a.createElement($.a,{span:8},o.a.createElement(fa.a,{defaultValue:5,value:Zt,min:1,max:hn,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:function(rn){pn({parameters:{minimum_detectable_effect:rn}})},tipFormatter:function(rn){return"".concat(rn,"%")}})),o.a.createElement(va.a,{min:1,max:hn,defaultValue:5,formatter:function(rn){return"".concat(rn,"%")},style:{margin:"0 16px"},value:Zt,onChange:function(rn){pn({parameters:{minimum_detectable_effect:rn}})}})))),o.a.createElement(P.a,{className:"experiment-preview-row ".concat(L!=null&&L.start_date?"mr":"")},H===V.s.TRENDS?o.a.createElement(o.a.Fragment,null,!(L!=null&&L.start_date)&&o.a.createElement(o.a.Fragment,null,o.a.createElement($.a,{span:6},o.a.createElement("div",{className:"card-secondary"},"Baseline Count"),o.a.createElement("div",{className:"l4"},Object(Ge.O)(se||0))),o.a.createElement($.a,{span:6},o.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Count"),o.a.createElement("div",{className:"l4"},Object(Ge.O)(se+Math.ceil(se*(Zt/100))||0)))),o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary"},"Recommended running time"),o.a.createElement("div",null,o.a.createElement("span",{className:"l4"},"~",Object(Ge.O)(He||0))," days"))):o.a.createElement(o.a.Fragment,null,!(L!=null&&L.start_date)&&o.a.createElement(o.a.Fragment,null,o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary"},"Baseline Conversion Rate"),o.a.createElement("div",{className:"l4"},Y.toFixed(1),"%")),o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Conversion Rate"),o.a.createElement("div",{className:"l4"},(Y+Zt).toFixed(1),"%"))),o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary"},"Recommended Sample Size"),o.a.createElement("div",{className:"pb"},o.a.createElement("span",{className:"l4"},"~",Object(Ge.O)(tt||0))," persons")),!(L!=null&&L.start_date)&&o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary"},"Recommended running time"),o.a.createElement("div",null,o.a.createElement("span",{className:"l4"},"~",Object(Ge.O)(Vt||0))," days"))),o.a.createElement(P.a,{className:"full-width mt"},o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary"},"Experiment variants"),o.a.createElement("ul",{className:"variants-list"},L==null||(I=L.parameters)===null||I===void 0||(R=I.feature_flag_variants)===null||R===void 0?void 0:R.map(function(Ut,rn){return o.a.createElement("li",{key:rn},Ut.key)}))),o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary"},"Participants"),o.a.createElement("div",null,St!=null&&St.length?o.a.createElement("div",null,St==null?void 0:St.map(function(Ut){return o.a.createElement(kn.c,{key:Ut.key,item:Ut,style:{margin:2,cursor:"default"}})})):o.a.createElement(o.a.Fragment,null,"100% of"," ",(L==null||(U=L.filters)===null||U===void 0?void 0:U.aggregation_group_type_index)!=null?Object(Ge.j)(Tn(L.filters.aggregation_group_type_index).plural):"users")))),o.a.createElement(P.a,{className:"full-width"},Le!=="new"&&!mn&&o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary mt"},"Start date"),L!=null&&L.start_date?o.a.createElement("span",null,Object(Fe.a)(L==null?void 0:L.start_date).format("D MMM YYYY")):o.a.createElement("span",{className:"description"},"Not started yet")),H===V.s.FUNNELS&&bt?o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary mt"},"Expected end date"),o.a.createElement("span",null,bn.isAfter(Object(Fe.a)())?bn.format("D MMM YYYY"):Object(Fe.a)().format("D MMM YYYY"))):null,(L==null?void 0:L.end_date)&&o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"card-secondary mt"},"Completed date"),o.a.createElement("span",null,Object(Fe.a)(L==null?void 0:L.end_date).format("D MMM YYYY"))))),Le!=="new"&&!mn&&o.a.createElement(P.a,{className:"experiment-preview-row"},o.a.createElement($.a,null,o.a.createElement("div",{className:"card-secondary mb-05"},H===V.s.FUNNELS?"Conversion goal steps":"Trend goal"),[].concat(Qt()((L==null||(te=L.filters)===null||te===void 0?void 0:te.events)||[]),Qt()((L==null||(J=L.filters)===null||J===void 0?void 0:J.actions)||[])).sort(function(Ut,rn){return(Ut.order||0)-(rn.order||0)}).map(function(Ut,rn){var Qn;return o.a.createElement($.a,{key:rn,className:"mb-05"},o.a.createElement(P.a,{style:{marginBottom:4}},o.a.createElement("div",{className:"preview-conversion-goal-num"},H===V.s.FUNNELS?(Ut.order||0)+1:rn+1),o.a.createElement("b",null,o.a.createElement(Un.b,{action:Ut,showCountedByTag:H===V.s.TRENDS,hideIcon:!0}))),(Qn=Ut.properties)===null||Qn===void 0?void 0:Qn.map(function(sa){return o.a.createElement(kn.c,{key:sa.key,item:sa})}))})))),Le!=="new"&&!mn&&!(L!=null&&L.start_date)&&o.a.createElement($.a,{span:12,className:"pl"},o.a.createElement(oa,null)))}try{Kn.displayName="ExperimentPreview",Kn.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:Kn.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(E){}var Wn=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx");function Rn(E){var x,I,R,U=E.experiment,te=Object(Dt.useState)("control"),J=xe()(te,2),L=J[0],se=J[1];return o.a.createElement(de.a,{title:o.a.createElement("span",{className:"card-secondary"},"Feature flag usage and implementation"),className:"experiment-implementation-details"},o.a.createElement(P.a,{justify:"space-between",className:"mb-05"},o.a.createElement("div",null,o.a.createElement("span",{className:"mr-05"},"Variant group"),o.a.createElement(ct.a,{onChange:se,defaultValue:"control",suffixIcon:o.a.createElement(an.a,null)},U==null||(x=U.parameters)===null||x===void 0||(I=x.feature_flag_variants)===null||I===void 0?void 0:I.map(function(Y,He){return o.a.createElement(ct.a.Option,{key:He,value:Y.key},Y.key)}))),o.a.createElement("div",null,o.a.createElement(Yn,null))),o.a.createElement("b",null,"Implement your experiment in code"),o.a.createElement(Wn.a,{language:Wn.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat((R=U==null?void 0:U.feature_flag_key)!==null&&R!==void 0?R:"","') === '").concat(L,`') {
    // where '`).concat(L,`' is the variant, run your code here
}`)),o.a.createElement("b",null,"Test that it works"),o.a.createElement(Wn.a,{language:Wn.b.JavaScript},"posthog.feature_flags.override({'".concat(U==null?void 0:U.feature_flag_key,"': '").concat(L,"'})")),o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://posthog.com/docs/user-guides/feature-flags"},o.a.createElement(P.a,{align:"middle"},"Experiment implementation guide",o.a.createElement(Ue.IconOpenInNew,{className:"ml-05"}))))}try{Rn.displayName="ExperimentImplementationDetails",Rn.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:Rn.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(E){}function ia(E,x){var I=Object.keys(E);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(E);x&&(R=R.filter(function(U){return Object.getOwnPropertyDescriptor(E,U).enumerable})),I.push.apply(I,R)}return I}function _n(E){for(var x=1;x<arguments.length;x++){var I=arguments[x]!=null?arguments[x]:{};x%2?ia(Object(I),!0).forEach(function(R){wt()(E,R,I[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(I)):ia(Object(I)).forEach(function(R){Object.defineProperty(E,R,Object.getOwnPropertyDescriptor(I,R))})}return E}var zn={component:Mn,logic:Ce,paramsToProps:function(x){var I=x.params.id;return{experimentId:I==="new"?"new":parseInt(I)}}};function Mn(){var E,x,I,R,U,te,J,L,se,Y,He,tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt=tt.id,Le=Object(lt.useValues)(Ce({experimentId:nt})),we=Le.newExperimentData,H=Le.experimentData,mn=Le.experimentInsightId,Zt=Le.minimumSampleSizePerVariant,gn=Le.recommendedExposureForCountData,Tn=Le.variants,be=Le.experimentResults,pn=Le.countDataForVariant,hn=Le.editingExistingExperiment,st=Le.experimentInsightType,Vt=Le.experimentResultsLoading,bn=Le.parsedSecondaryMetrics,bt=Le.areResultsSignificant,St=Le.conversionRateForVariant,Ut=Le.getIndexForVariant,rn=Le.significanceBannerDetails,Qn=Le.areTrendResultsConfusing,sa=Le.taxonomicGroupTypesForSelection,ga=Le.groupTypes,Jn=Le.aggregationLabel,Ln=Le.secondaryMetricResults,ha=Le.experimentDataLoading,En=Object(lt.useActions)(Ce({experimentId:nt})),Ft=En.setNewExperimentData,An=En.createExperiment,na=En.launchExperiment,Nn=En.setFilters,wa=En.setEditExperiment,Oa=En.endExperiment,Sa=En.addExperimentGroup,ya=En.updateExperiment,ma=En.updateExperimentGroup,Ca=En.removeExperimentGroup,Pa=En.setSecondaryMetrics,xa=En.setExperimentInsightType,ba=En.archiveExperiment,Ia=Object(lt.useValues)(ua.a),f=Ia.featureFlags,m=fe.a.useForm(),O=xe()(m,1),g=O[0],d=Object(Dt.useState)(!0),v=xe()(d,2),s=v[0],l=v[1],c=Object(lt.useValues)(Object(Wt.c)({dashboardItemId:mn})),y=c.insightProps,w=Object(lt.useValues)(Object(nn.a)(y)),a=w.isStepsEmpty,n=w.filterSteps,t=w.filters,i=w.results,u=w.conversionMetrics,h=Object(lt.useValues)(Object(In.a)(y)),b=h.filters,S=h.results,C=u.totalRate*100,M=Zt(C),K=M*Tn.length,_=(E=S[0])===null||E===void 0?void 0:E.count,B=i==null||(x=i[0])===null||x===void 0?void 0:x.count,re=gn(_),ne=Math.floor(24/(Tn.length+2)),le=st===V.s.FUNNELS&&(be==null?void 0:be.insight)?be.insight.reduce(function(W,j){var N;return((N=j[0])===null||N===void 0?void 0:N.count)+W},0):0,ve=st===V.s.FUNNELS?(le||0)/((H==null||(I=H.parameters)===null||I===void 0?void 0:I.recommended_sample_size)||1)*100:Object(Fe.a)().diff(H==null?void 0:H.start_date,"day")/((H==null||(R=H.parameters)===null||R===void 0?void 0:R.recommended_running_time)||1)*100,Se={running:"green",draft:"default",complete:"purple"},me=function(){if(H!=null&&H.start_date){if(!(H!=null&&H.end_date))return"running"}else return"draft";return"complete"},ye=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return o.a.createElement(o.a.Fragment,null,nt==="new"||hn?o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8}},o.a.createElement(pt.a,{title:"New experiment"}),o.a.createElement(P.a,null,o.a.createElement(Ht.a,{type:"secondary",className:"mr-05",onClick:function(){return ht.router.actions.push(xt.a.experiments())}},"Cancel"),o.a.createElement(Ht.a,{type:"primary",htmlType:"submit",form:"new-experiment"},"Save"))),o.a.createElement(fe.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:g,onValuesChange:function(j){return Ft(j)},initialValues:{name:we==null?void 0:we.name,feature_flag_key:we==null?void 0:we.feature_flag_key,description:we==null?void 0:we.description},onFinish:function(){return An(!0,re,K)},requiredMark:!1,scrollToFirstError:!0},o.a.createElement("div",null,o.a.createElement(lt.BindLogic,{logic:Wt.c,props:y},o.a.createElement(P.a,null,o.a.createElement($.a,{span:12,style:{paddingRight:24}},o.a.createElement(P.a,{className:"full-width"},o.a.createElement(fe.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}]},o.a.createElement(Ye.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})),o.a.createElement(fe.a.Item,{style:{marginBottom:"1rem"},label:o.a.createElement("div",null,"Feature flag key"," ",o.a.createElement(_e.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment."},o.a.createElement(jn.a,null))),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}]},o.a.createElement(Ye.a,{"data-attr":"experiment-feature-flag-key",disabled:hn}))),o.a.createElement(fe.a.Item,{label:o.a.createElement("div",null,"Description ",o.a.createElement("span",{className:"text-muted"},"(optional)")),name:"description"},o.a.createElement(Ye.a.TextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})),(we==null||(U=we.parameters)===null||U===void 0?void 0:U.feature_flag_variants)&&o.a.createElement($.a,null,o.a.createElement("label",null,o.a.createElement("b",null,"Experiment variants")),o.a.createElement("div",{className:"text-muted"},"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."),o.a.createElement($.a,{className:"variants"},we.parameters.feature_flag_variants.map(function(W,j){return o.a.createElement(fe.a,{key:"".concat(W,"-").concat(j),initialValues:{key:W.key},onValuesChange:function(A){ma(A,j)}},o.a.createElement(P.a,{key:"".concat(W,"-").concat(j),className:"feature-flag-variant ".concat(j===0?"border-top":j>=3?"border-bottom":"")},o.a.createElement("div",{className:"variant-label",style:_n({},ye[j])},j===0?"Control":"Test"),o.a.createElement(fe.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:o.a.createElement(o.a.Fragment,null,o.a.createElement(Xt.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores.")}],style:{display:"contents"}},o.a.createElement(Ye.a,{disabled:j===0,"data-attr":"feature-flag-variant-key","data-key-index":j.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(j+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})),o.a.createElement("div",{className:"float-right"},!(j===0||j===1)&&o.a.createElement(_e.a,{title:"Delete this variant",placement:"bottomLeft"},o.a.createElement(Ht.a,{type:"primary-alt",compact:!0,icon:o.a.createElement(Ue.IconDelete,null),onClick:function(){return Ca(j)}})))))}),we.parameters.feature_flag_variants.length<4&&o.a.createElement("div",{className:"feature-flag-variant border-bottom"},o.a.createElement(Et.a,{style:{color:"var(--primary)",border:"none",boxShadow:"none",paddingLeft:0},icon:o.a.createElement(Lt.a,null),onClick:function(){return Sa()}},"Add test variant")))),o.a.createElement(P.a,{className:"person-selection"},o.a.createElement("div",{className:"mb-05"},o.a.createElement("strong",null,"Select participants")),o.a.createElement($.a,null,o.a.createElement("div",{className:"text-muted"},"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."),o.a.createElement("div",{className:"mt mb-05"},o.a.createElement("strong",null,"Participant type")),o.a.createElement(ct.a,{value:(we==null||(te=we.filters)===null||te===void 0?void 0:te.aggregation_group_type_index)!=null?we.filters.aggregation_group_type_index:-1,onChange:function(j){var N,A=j!==-1?j:void 0;A!=(we==null||(N=we.filters)===null||N===void 0?void 0:N.aggregation_group_type_index)&&(Nn({properties:[],aggregation_group_type_index:A}),Ft({filters:{aggregation_group_type_index:A,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1},o.a.createElement(ct.a.Option,{key:-1,value:-1},"Persons"),ga.map(function(W){return o.a.createElement(ct.a.Option,{key:W.group_type_index,value:W.group_type_index},Object(Ge.j)(Jn(W.group_type_index).plural))})),o.a.createElement("div",{className:"mt"},o.a.createElement("strong",null,"Filters")),o.a.createElement(D.a,{pageKey:"experiment-participants-property",propertyFilters:st===V.s.FUNNELS?Object(Ge.s)(t.properties):Object(Ge.s)(b.properties),onChange:function(j){Ft({filters:{properties:j}}),Nn({properties:j.filter(at.b)})},taxonomicGroupTypes:sa})))),o.a.createElement(P.a,{className:"metrics-selection"},o.a.createElement($.a,{span:12},o.a.createElement("div",{className:"mb-05"},o.a.createElement("b",null,"Goal type"),o.a.createElement("div",{className:"text-muted"},st===V.s.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events")),o.a.createElement(ct.a,{style:{display:"flex"},value:st,onChange:xa,suffixIcon:o.a.createElement(an.a,null),dropdownMatchSelectWidth:!1},o.a.createElement(ct.a.Option,{value:V.s.TRENDS},o.a.createElement($.a,null,o.a.createElement("span",null,o.a.createElement("b",null,"Trend")))),o.a.createElement(ct.a.Option,{value:V.s.FUNNELS},o.a.createElement($.a,null,o.a.createElement("span",null,o.a.createElement("b",null,"Conversion funnel"))))),o.a.createElement("div",{className:"mb mt"},o.a.createElement("b",null,"Experiment goal"),st===V.s.TRENDS&&o.a.createElement("div",{className:"text-muted"},"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment.")),o.a.createElement(P.a,null,o.a.createElement(de.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},st===V.s.FUNNELS&&o.a.createElement(Bt.a,{filters:t,setFilters:function(j){Ft({filters:j}),Nn(j)},typeKey:"EditFunnel-action",hideMathSelector:!0,hideDeleteBtn:n.length===1,buttonCopy:"Add funnel step",buttonType:"link",showSeriesIndicator:!a,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[ce.a.EventProperties,ce.a.PersonProperties,ce.a.Cohorts,ce.a.Elements],rowClassName:"action-filters-bordered"}),st===V.s.TRENDS&&o.a.createElement(Bt.a,{horizontalUI:!0,filters:b,setFilters:function(j){Ft({filters:j}),Nn(j)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,hideMathSelector:!1,propertiesTaxonomicGroupTypes:[ce.a.EventProperties,ce.a.PersonProperties,ce.a.Cohorts,ce.a.Elements],customRowPrefix:b.insight===V.s.LIFECYCLE?o.a.createElement(o.a.Fragment,null,"Showing ",o.a.createElement("b",null,"Unique users")," who did"):void 0}))),f[ue.n.EXPERIMENTS_SECONDARY_METRICS]&&o.a.createElement($.a,{className:"secondary-metrics"},o.a.createElement("div",null,o.a.createElement("b",null,"Secondary metrics"),o.a.createElement("span",{className:"text-muted ml-05"},"(optional)")),o.a.createElement("div",{className:"text-muted",style:{marginTop:4}},"Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "),o.a.createElement(vn,{onMetricsChange:function(j){return Pa(j)},initialMetrics:bn}))),o.a.createElement($.a,{span:12,className:"pl"},o.a.createElement("div",{className:"card-secondary mb"},"Goal preview"),o.a.createElement(Pe.a,{disableHeader:st===V.s.TRENDS,disableTable:!0})))),o.a.createElement(P.a,null,o.a.createElement(de.a,{className:"experiment-preview"},o.a.createElement(Kn,{experiment:we,trendCount:_,trendExposure:re,funnelSampleSize:K,funnelEntrants:B,funnelConversionRate:C}))))),o.a.createElement(Ht.a,{className:"float-right",type:"primary",htmlType:"submit"},"Save"))):!ha&&H?o.a.createElement("div",{className:"view-experiment"},o.a.createElement(P.a,{className:"draft-header"},o.a.createElement(P.a,{justify:"space-between",align:"middle",className:"full-width pb"},o.a.createElement($.a,null,o.a.createElement(P.a,null,o.a.createElement(pt.a,{style:{paddingRight:8},title:"".concat(H==null?void 0:H.name),buttons:o.a.createElement(o.a.Fragment,null,o.a.createElement(Tt.a,{explicitValue:H.feature_flag_key,iconStyle:{color:"var(--text-muted-alt)"}},o.a.createElement("span",{className:"text-muted"},H.feature_flag_key)),o.a.createElement(Ze.a,{style:{alignSelf:"center"},color:Se[me()]},o.a.createElement("b",{className:"uppercase"},me())),be&&H.end_date&&o.a.createElement(Ze.a,{style:{alignSelf:"center"},color:bt?"green":"geekblue"},o.a.createElement("b",{className:"uppercase"},bt?"Significant Results":"Results not significant")))})),o.a.createElement("span",{className:"exp-description"},H.start_date?o.a.createElement(da.a,{multiline:!0,name:"description",value:H.description||"",placeholder:"Description (optional)",onSave:function(j){return ya({description:j})},maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):o.a.createElement(o.a.Fragment,null,H.description||"There is no description for this experiment."))),H&&!H.start_date&&o.a.createElement("div",null,o.a.createElement(Et.a,{className:"mr-05",onClick:function(){return wa(!0)}},"Edit"),o.a.createElement(Et.a,{type:"primary",onClick:function(){return na()}},"Launch")),H&&H.start_date&&!H.end_date&&o.a.createElement(Et.a,{className:"stop-experiment",onClick:function(){return Oa()}},"Stop experiment"),(H==null?void 0:H.end_date)&&Object(Fe.a)().isSameOrAfter(Object(Fe.a)(H.end_date),"day")&&!H.archived&&o.a.createElement(Et.a,{className:"archive-experiment",onClick:function(){return ba()}},o.a.createElement("b",null,"Archive experiment")))),o.a.createElement(P.a,null,s&&be&&bt&&!H.end_date&&o.a.createElement(P.a,{align:"middle",className:"significant-results"},o.a.createElement($.a,{span:20,style:{fontWeight:500,color:"#497342"}},o.a.createElement("div",null,"Experiment results are significant."," ",H.end_date?"":"You can end your experiment now or let it run until complete.")),o.a.createElement($.a,{span:4},H.end_date?o.a.createElement(en.a,{className:"close-button",onClick:function(){return l(!1)}}):o.a.createElement(Ht.a,{type:"highlighted",className:"end-experiment-btn",onClick:function(){return Oa()}},"End experiment"))),s&&be&&!bt&&!H.end_date&&o.a.createElement(P.a,{align:"top",className:"not-significant-results"},o.a.createElement($.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"}},o.a.createElement("strong",null,"Your results are not statistically significant"),"."," ",rn," ",H!=null&&H.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",o.a.createElement("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations"}," ","experimentation guide"," "),"for more information."," "),o.a.createElement($.a,{span:1},o.a.createElement(en.a,{className:"close-button",onClick:function(){return l(!1)}}))),s&&H.end_date&&o.a.createElement(P.a,{align:"top",className:"feature-flag-mods"},o.a.createElement($.a,{span:23,style:{fontWeight:500}},o.a.createElement("strong",null,"Your experiment is complete.")," We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",o.a.createElement(ra.a,{to:H.feature_flag?xt.a.featureFlag(H.feature_flag):void 0},o.a.createElement("b",null,"Adjust feature flag distribution"))),o.a.createElement($.a,{span:1},o.a.createElement(en.a,{className:"close-button",onClick:function(){return l(!1)}})))),o.a.createElement(P.a,null,o.a.createElement(Oe.a,{className:"full-width",defaultActiveKey:"experiment-details"},o.a.createElement(Oe.a.Panel,{header:o.a.createElement("b",null,"Experiment details"),key:"experiment-details"},o.a.createElement(P.a,null,o.a.createElement($.a,{span:H!=null&&H.start_date?12:24},o.a.createElement(Kn,{experiment:H,trendCount:_,trendExposure:H==null?void 0:H.parameters.recommended_running_time,funnelSampleSize:H==null?void 0:H.parameters.recommended_sample_size,funnelConversionRate:C,funnelEntrants:H!=null&&H.start_date?le:B})),!Vt&&!be&&H.start_date&&o.a.createElement($.a,{span:12},o.a.createElement(Rn,{experiment:H})),(be||((J=H.secondary_metrics)===null||J===void 0?void 0:J.length)>0)&&o.a.createElement($.a,{className:"secondary-progress",span:H!=null&&H.start_date?12:24},f[ue.n.EXPERIMENTS_SECONDARY_METRICS]&&!!(H!=null&&H.secondary_metrics.length)&&o.a.createElement($.a,{className:"border-bottom"},o.a.createElement(P.a,{align:"middle",justify:"space-between",className:"mb-05"},o.a.createElement($.a,{className:"card-secondary",span:2*ne},"Secondary metrics"),H==null||(L=H.parameters)===null||L===void 0||(se=L.feature_flag_variants)===null||se===void 0?void 0:se.map(function(W,j){return o.a.createElement($.a,{key:j,span:ne,style:{color:"".concat(st===V.s.FUNNELS?Object(jt.k)(Ut(W.key,V.s.FUNNELS)+1):Object(Bn.c)("white")[Ut(W.key,V.s.TRENDS)])}},o.a.createElement("span",{className:"text-default"},Object(Ge.j)(W.key)))})),f[ue.n.EXPERIMENTS_SECONDARY_METRICS]&&(H.start_date?o.a.createElement(o.a.Fragment,null,H.secondary_metrics.map(function(W,j){var N,A;return o.a.createElement(P.a,{className:"border-top",key:j,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},o.a.createElement($.a,{span:2*ne},Object(Ge.j)(W.name)),H==null||(N=H.parameters)===null||N===void 0||(A=N.feature_flag_variants)===null||A===void 0?void 0:A.map(function(k,X){return o.a.createElement($.a,{key:X,span:ne},Ln!=null&&Ln[j][k.key]?W.filters.insight===V.s.FUNNELS?o.a.createElement(o.a.Fragment,null,((Ln==null?void 0:Ln[j][k.key])*100).toFixed(1),"%"):o.a.createElement(o.a.Fragment,null,Ln==null?void 0:Ln[j][k.key]):o.a.createElement(o.a.Fragment,null,"--"))}))})):o.a.createElement(o.a.Fragment,null,H.secondary_metrics.map(function(W,j){var N,A;return o.a.createElement(P.a,{className:"border-top",key:j,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},o.a.createElement($.a,{span:2*ne},Object(Ge.j)(W.name)),H==null||(N=H.parameters)===null||N===void 0||(A=N.feature_flag_variants)===null||A===void 0?void 0:A.map(function(k,X){return o.a.createElement($.a,{key:X,span:ne},"--")}))})))),be&&o.a.createElement($.a,{className:"mt"},o.a.createElement("div",{className:"mb-05"},o.a.createElement("b",null,"Experiment progress")),o.a.createElement(Re.a,{strokeWidth:20,showInfo:!1,percent:ve,strokeColor:"var(--success)"}),st===V.s.TRENDS&&H.start_date&&o.a.createElement(P.a,{justify:"space-between",className:"mt-05"},H.end_date?o.a.createElement("div",null,"Ran for"," ",o.a.createElement("b",null,Object(Fe.a)(H.end_date).diff(H.start_date,"day"))," ","days"):o.a.createElement("div",null,o.a.createElement("b",null,Object(Fe.a)().diff(H.start_date,"day"))," ","days running"),o.a.createElement("div",null,"Goal:"," ",o.a.createElement("b",null,H==null||(Y=H.parameters)===null||Y===void 0?void 0:Y.recommended_running_time)," ","days")),st===V.s.FUNNELS&&o.a.createElement(P.a,{justify:"space-between",className:"mt-05"},H.end_date?o.a.createElement("div",null,"Saw"," ",o.a.createElement("b",null,Object(Ge.O)(le))," ","participants"):o.a.createElement("div",null,o.a.createElement("b",null,Object(Ge.O)(le))," ","participants seen"),o.a.createElement("div",null,"Goal:"," ",o.a.createElement("b",null,Object(Ge.O)((H==null||(He=H.parameters)===null||He===void 0?void 0:He.recommended_sample_size)||0))," ","participants"))))))),!(H!=null&&H.start_date)&&o.a.createElement("div",{className:"mt full-width"},o.a.createElement(Rn,{experiment:H}))),o.a.createElement("div",{className:"experiment-result"},be?o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{justify:"space-around",style:{flexFlow:"nowrap"}},Object.keys(be.probability).sort(function(W,j){return be.probability[j]-be.probability[W]}).map(function(W,j){return o.a.createElement($.a,{key:j,className:"pr"},o.a.createElement("div",null,o.a.createElement("b",null,Object(Ge.j)(W))),st===V.s.TRENDS?o.a.createElement(P.a,null,o.a.createElement("b",{style:{paddingRight:4}},o.a.createElement(P.a,null,"action"in be.insight[0]&&o.a.createElement(pa.a,{filter:be.insight[0].action}),o.a.createElement("span",{style:{paddingLeft:4}},"count:")))," ",pn(W)," ",Qn&&j===0&&o.a.createElement(_e.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher."},o.a.createElement(jn.a,{style:{padding:"4px 2px"}}))):o.a.createElement(P.a,null,o.a.createElement("b",{style:{paddingRight:4}},"Conversion rate:")," ",St(W),"%"),o.a.createElement(Re.a,{percent:Number((be.probability[W]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:st===V.s.FUNNELS?Object(jt.k)(Ut(W,V.s.FUNNELS)+1):Object(Bn.c)("white")[Ut(W,V.s.TRENDS)]}),o.a.createElement("div",null,"Probability that this variant is the best:"," ",o.a.createElement("b",null,(be.probability[W]*100).toFixed(1),"%")))}))):Vt&&o.a.createElement("div",{className:"text-center"},o.a.createElement(It.a,{active:!0})),be?o.a.createElement(lt.BindLogic,{logic:Wt.c,props:{dashboardItemId:be.itemID,cachedInsight:{short_id:be.itemID,filters:_n(_n(_n({},be.filters),{},{insight:st,display:H.filters.display},st===V.s.FUNNELS&&{layout:ue.p.vertical,funnel_viz_type:V.o.Steps}),st===V.s.TRENDS&&{display:V.d.ActionsLineGraphCumulative}),result:be.insight},doNotLoad:!0}},o.a.createElement("div",{className:"mt"},o.a.createElement(Pe.a,{disableHeader:st===V.s.TRENDS,disableTable:st===V.s.FUNNELS}))):H.start_date&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"no-experiment-results"},!Vt&&o.a.createElement("div",{className:"text-center"},o.a.createElement("b",null,"There are no results for this experiment yet."),o.a.createElement("div",{className:"text-default"},"Double check your feature flag implementation if you're still not seeing results.")))))):o.a.createElement(It.a,{active:!0}))}function Yn(){return o.a.createElement(ct.a,{defaultValue:"JavaScript",suffixIcon:o.a.createElement(an.a,null)},o.a.createElement(ct.a.Option,{value:"JavaScript"},o.a.createElement(P.a,{align:"middle"},o.a.createElement(Ue.IconJavascript,{style:{marginRight:6}})," JavaScript")))}try{Mn.displayName="Experiment_",Mn.__docgenInfo={description:"",displayName:"Experiment_",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/Experiment.tsx#Experiment_"]={docgenInfo:Mn.__docgenInfo,name:"Experiment_",path:"frontend/src/scenes/experiments/Experiment.tsx#Experiment_"})}catch(E){}},"./frontend/src/scenes/experiments/experimentsLogic.ts":function(Ee,q,e){"use strict";e.d(q,"a",function(){return It});var oe=e("./node_modules/core-js/modules/es.array.concat.js"),p=e.n(oe),Ke=e("./node_modules/core-js/modules/es.array.filter.js"),Ve=e.n(Ke),F=e("./node_modules/core-js/modules/es.array.iterator.js"),Be=e.n(F),Z=e("./node_modules/core-js/modules/es.array.map.js"),ke=e.n(Z),r=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e.n(r),vt=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Q=e.n(vt),je=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),wt=e.n(je),Xe=e("./node_modules/@babel/runtime/regenerator/index.js"),xe=e.n(Xe),fe=e("./node_modules/regenerator-runtime/runtime.js"),P=e.n(fe),$=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Ye=e.n($),_e=e("./node_modules/kea/lib/index.esm.js"),Et=e("./frontend/src/lib/api.ts"),ct=e("./frontend/src/scenes/teamLogic.ts"),de=e("./frontend/src/types.ts"),Ze=e("./frontend/src/lib/utils.tsx"),Oe=e("./frontend/src/scenes/userLogic.ts"),Re=e("./frontend/src/lib/components/lemonToast.tsx"),It=Object(_e.kea)({path:["scenes","experiments","experimentsLogic"],connect:{values:[ct.a,["currentTeamId"],Oe.a,["hasAvailableFeature"]]},actions:{},loaders:function(pt){var D=pt.values,at=pt.actions;return{experiments:[[],{loadExperiments:function(){var ce=Ye()(xe.a.mark(function o(nn){var Bt;return xe.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(D.hasAvailableFeature(de.c.EXPERIMENTATION)){V.next=2;break}return V.abrupt("return",[]);case 2:return V.next=4,Et.a.get("api/projects/".concat(D.currentTeamId,"/experiments?").concat(nn||""));case 4:return Bt=V.sent,V.abrupt("return",Bt.results);case 6:case"end":return V.stop()}},o)}));function Dt(o){return ce.apply(this,arguments)}return Dt}(),deleteExperiment:function(){var ce=Ye()(xe.a.mark(function o(nn){return xe.a.wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return Wt.next=2,Et.a.delete("api/projects/".concat(D.currentTeamId,"/experiments/").concat(nn));case 2:return Re.a.info("Experiment removed"),Wt.abrupt("return",D.experiments.filter(function(V){return V.id!==nn}));case 4:case"end":return Wt.stop()}},o)}));function Dt(o){return ce.apply(this,arguments)}return Dt}(),addToExperiments:function(Dt){return[].concat(wt()(D.experiments),[Dt])},updateExperiments:function(Dt){return D.experiments.map(function(o){return o.id===Dt.id?Dt:o})}}],tab:[de.h.All,{setExperimentsFilters:function(){var ce=Ye()(xe.a.mark(function o(nn){var Bt,Wt;return xe.a.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Bt=nn.tab,Wt=Bt===de.h.Yours?Object(Ze.Ab)({user:!0}):Object(Ze.Ab)({archived:!0}),Bt===de.h.All?at.loadExperiments(Object(Ze.Ab)({all:!0})):at.loadExperiments(Wt),Jt.abrupt("return",Bt);case 4:case"end":return Jt.stop()}},o)}));function Dt(o){return ce.apply(this,arguments)}return Dt}()}]}},events:function(pt){var D=pt.actions;return{afterMount:function(){D.loadExperiments(Object(Ze.Ab)({all:!0}))}}}})},"./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return Gt});var oe=e("./node_modules/core-js/modules/es.array.concat.js"),p=e("./node_modules/core-js/modules/es.array.map.js"),Ke=e("./node_modules/core-js/modules/es.array.splice.js"),Ve=e("./node_modules/@babel/runtime/helpers/extends.js"),F=e.n(Ve),Be=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Z=e.n(Be),ke=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),r=e.n(ke),T=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),vt=e.n(T),Q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilter.scss"),je=e.n(Q),wt={};wt.insert="head",wt.singleton=!1;var Xe=vt()(je.a,wt),xe=je.a.locals||{},fe=e("./node_modules/react/index.js"),P=e.n(fe),$=e("./node_modules/kea/lib/index.esm.js"),Ye=e("./frontend/src/scenes/insights/ActionFilter/entityFilterLogic.ts"),_e=e("./node_modules/core-js/modules/es.symbol.js"),Et=e("./node_modules/core-js/modules/es.symbol.description.js"),ct=e("./node_modules/core-js/modules/es.array.filter.js"),de=e("./node_modules/core-js/modules/es.function.name.js"),Ze=e("./node_modules/core-js/modules/es.object.keys.js"),Oe=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Re=e.n(Oe),It=e("./node_modules/antd/es/button/index.js"),lt=e("./node_modules/antd/es/row/index.js"),pt=e("./node_modules/antd/es/col/index.js"),D=e("./node_modules/antd/es/select/index.js"),at=e("./frontend/src/lib/components/Tooltip.tsx"),ce=e("./frontend/src/types.ts"),Dt=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),o=e("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),nn=e("./node_modules/@ant-design/icons/es/icons/CloseSquareOutlined.js"),Bt=e("./frontend/src/lib/utils.tsx"),Wt=e("./frontend/src/lib/components/SeriesGlyph.tsx"),V=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/index.scss"),Jt=e.n(V),xn={};xn.insert="head",xn.singleton=!1;var ca=vt()(Jt.a,xn),la=Jt.a.locals||{},On=e("./frontend/src/lib/components/Popup/Popup.tsx"),Xn=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Fn=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Zn=e("./frontend/src/lib/components/EntityFilterInfo.tsx"),Dn=e("./node_modules/clsx/dist/clsx.m.js"),We=e("./frontend/src/scenes/trends/mathsLogic.tsx"),gt=e("./frontend/src/lib/introductions/GroupsIntroductionOption.tsx"),rt=e("./frontend/src/models/actionsModel.ts"),pe=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Sn=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),Nt=e("./frontend/src/lib/components/icons.tsx"),Je;function ot(z,ee){var Ae=Object.keys(z);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(z);ee&&(Ce=Ce.filter(function(Rt){return Object.getOwnPropertyDescriptor(z,Rt).enumerable})),Ae.push.apply(Ae,Ce)}return Ae}function Pt(z){for(var ee=1;ee<arguments.length;ee++){var Ae=arguments[ee]!=null?arguments[ee]:{};ee%2?ot(Object(Ae),!0).forEach(function(Ce){Z()(z,Ce,Ae[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(Ae)):ot(Object(Ae)).forEach(function(Ce){Object.defineProperty(z,Ce,Object.getOwnPropertyDescriptor(Ae,Ce))})}return z}var ft=function(ee,Ae){if(ee)return"Hide filters";if(Ae.properties&&Object.keys(Ae.properties).length>0){var Ce;return Object(Bt.qb)((Ce=Ae.properties)===null||Ce===void 0?void 0:Ce.length,"filter")}return"Add filters"};function ze(z){var ee,Ae,Ce,Rt=z.logic,Pe=z.filter,Ue=z.index,Xt=z.hideMathSelector,Lt=z.hidePropertySelector,an=z.singleFilter,en=z.showOr,Tt=z.hideFilter,jt=z.hideRename,et=z.onRenameClick,Pn=et===void 0?function(){}:et,dn=z.showSeriesIndicator,yt=z.seriesIndicatorType,fn=yt===void 0?"alpha":yt,it=z.horizontalUI,Te=it===void 0?!1:it,Ot=z.fullWidth,Ht=Ot===void 0?!1:Ot,un=z.filterCount,yn=z.customRowPrefix,vn=z.customRowSuffix,Bn=z.rowClassName,pa=z.propertyFilterWrapperClassName,da=z.stripeActionRow,ra=da===void 0?!0:da,ua=z.hasBreakdown,fa=z.showNestedArrow,va=fa===void 0?!1:fa,Un=z.hideDeleteBtn,kn=Un===void 0?!1:Un,oa=z.actionsTaxonomicGroupTypes,Kn=oa===void 0?[Fn.a.Events,Fn.a.Actions]:oa,Wn=z.propertiesTaxonomicGroupTypes,Rn=z.disabled,ia=Rn===void 0?!1:Rn,_n=z.readOnly,zn=_n===void 0?!1:_n,Mn=z.renderRow,Yn=Object($.useValues)(Rt),E=Yn.selectedFilter,x=Yn.entities,I=Yn.entityFilterVisible,R=Object($.useActions)(Rt),U=R.updateFilter,te=R.selectFilter,J=R.updateFilterMath,L=R.removeLocalFilter,se=R.updateFilterProperty,Y=R.setEntityFilterVisibility,He=R.duplicateFilter,tt=Object($.useValues)(rt.a),nt=tt.actions,Le=Object($.useValues)(We.c),we=Le.mathDefinitions,H=typeof Pe.order=="number"?I[Pe.order]:!1,mn,Zt,gn,Tn=Pe.math,be=Pe.math_property,pn=Pe.math_group_type_index,hn=function(){L(Pt(Pt({},Pe),{},{index:Ue}))},st=function(An,na){var Nn;J(Pt(Pt({},Object(We.b)(na)),{},{math_property:!((Nn=we[na])===null||Nn===void 0)&&Nn.onProperty?be!=null?be:"$time":void 0,type:Pe.type,index:Ue}))},Vt=function(An,na){J(Pt(Pt({},Pe),{},{math_property:na,index:Ue}))},bn=Boolean(E&&(E==null?void 0:E.type)===Pe.type&&(E==null?void 0:E.index)===Ue),bt=function(){te(bn?null:Pt(Pt({},Pe),{},{index:Ue}))};if(Pe.type===ce.g.NEW_ENTITY)Zt=null,gn=null;else{var St;mn=((St=x[Pe.type])===null||St===void 0?void 0:St.filter(function(Ft){return Ft.id===Pe.id})[0])||{},Zt=mn.name||Pe.name,gn=mn.id||Pe.id}var Ut=P.a.createElement("div",{className:"stateful-badge or width-locked"},"OR"),rn=fn==="numeric"?P.a.createElement(Wt.a,{style:{borderColor:"var(--border)"}},Ue+1):P.a.createElement(Wt.b,{seriesIndex:Ue,hasBreakdown:ua}),Qn=typeof yn=="function"?yn({filter:Pe,index:Ue,onClose:hn}):yn,sa=P.a.createElement(On.a,{overlay:P.a.createElement(Xn.a,{groupType:Pe.type,value:Pe.type==="actions"&&typeof gn=="string"?parseInt(gn):gn||void 0,onChange:function(An,na,Nn){U({type:Ct(An.type)||void 0,id:"".concat(na),name:Nn==null?void 0:Nn.name,index:Ue})},onClose:function(){return te(null)},taxonomicGroupTypes:Kn}),visible:bn,onClickOutside:function(){return te(null)}},function(Ft){var An=Ft.setRef;return P.a.createElement(It.a,{"data-attr":"trend-element-subject-"+Ue,onClick:bt,block:Ht,ref:An,disabled:ia||zn,style:{maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"}},P.a.createElement("span",{className:"text-overflow",style:{maxWidth:"100%"}},P.a.createElement(Zn.a,{filter:Pe})),P.a.createElement(o.a,{style:{fontSize:10}}))}),ga=typeof vn=="function"?vn({filter:Pe,index:Ue,onClose:hn}):vn,Jn=P.a.createElement(It.a,{type:"link",onClick:function(){typeof Pe.order=="number"&&Y(Pe.order,!H)},className:"row-action-btn show-filters".concat(H?" visible":""),"data-attr":"show-prop-filter-".concat(Ue),title:"Show filters",style:{display:"flex",alignItems:"center"}},P.a.createElement(Nt.IconFilter,{fontSize:"1.25em"}),!((ee=Pe.properties)===null||ee===void 0)&&ee.length?Object(Bt.qb)((Ae=Pe.properties)===null||Ae===void 0?void 0:Ae.length,"filter"):null),Ln=P.a.createElement(It.a,{type:"link",onClick:function(){te(Pe),Pn()},className:"row-action-btn show-rename","data-attr":"show-prop-rename-".concat(Ue),title:"Rename graph series",style:{display:"flex",alignItems:"center"}},P.a.createElement(Nt.IconEdit,{fontSize:"1.25em"})),ha=P.a.createElement(It.a,{type:"link",onClick:function(){He(Pe)},style:{display:"flex",alignItems:"center"},className:"row-action-btn","data-attr":"show-prop-duplicate-".concat(Ue),title:"Duplicate graph series"},P.a.createElement(Nt.IconCopy,{fontSize:"1.25em"})),En=P.a.createElement(It.a,{type:"link",onClick:hn,style:{display:"flex",alignItems:"center"},className:"row-action-btn delete","data-attr":"delete-prop-filter-".concat(Ue),title:"Delete graph series"},P.a.createElement(Nt.IconDelete,{fontSize:"1.25em"}));return P.a.createElement("div",{className:Object(Dn.a)({"action-row-striped":Te&&ra,"action-row":!Te||!ra,"full-width":Ht})},!Te&&Ue>0&&en&&P.a.createElement(lt.a,{align:"middle",style:{marginTop:12}},Ut),P.a.createElement(lt.a,{gutter:8,align:"middle",className:"".concat(Te?"":"mt"," ").concat(Bn),wrap:!Ht},Mn?Mn({seriesIndicator:rn,prefix:Qn,filter:sa,suffix:ga,propertyFiltersButton:Jn,renameRowButton:Ln,deleteButton:En,orLabel:Ut}):P.a.createElement(P.a.Fragment,null,!kn&&Te&&!an&&un>1&&P.a.createElement(pt.a,null,P.a.createElement(It.a,{type:"link",onClick:hn,className:"row-action-btn delete",title:"Remove graph series",danger:!0,icon:P.a.createElement(nn.a,null)})),dn&&P.a.createElement(pt.a,{className:"action-row-letter"},rn),yn!==void 0?P.a.createElement(pt.a,null,Qn):P.a.createElement(P.a.Fragment,null,Te&&P.a.createElement(pt.a,null,"Showing")),P.a.createElement(pt.a,{className:"column-filter",style:Ht?{}:{maxWidth:"calc(".concat(Xt?"100":"50","% - 16px)")},flex:Ht?"auto":void 0},sa),vn!==void 0&&P.a.createElement(pt.a,{className:"column-row-suffix"},ga),!Xt&&P.a.createElement(P.a.Fragment,null,Te&&P.a.createElement(pt.a,null,"counted by"),P.a.createElement(pt.a,{style:{maxWidth:"calc(50% - 16px".concat(dn?" - 32px":"",")")}},P.a.createElement(qt,{math:Tn,mathGroupTypeIndex:pn,index:Ue,onMathSelect:st,style:{maxWidth:"100%",width:"initial"}})),((Ce=we[Tn||""])===null||Ce===void 0?void 0:Ce.onProperty)&&P.a.createElement(P.a.Fragment,null,Te&&P.a.createElement(pt.a,null,"on property"),P.a.createElement(pt.a,{style:{maxWidth:"calc(50% - 16px".concat(dn?" - 32px":"",")")}},P.a.createElement(Sn.c,{groupType:Fn.a.NumericalEventProperties,value:be,onChange:function(An){return Vt(Ue,An)},eventNames:Zt?[Zt]:[],dataAttr:"math-property-select",renderValue:function(An){return P.a.createElement(at.a,{title:P.a.createElement(P.a.Fragment,null,"Calculate"," ",we[Tn!=null?Tn:""].name.toLowerCase()," from property ",P.a.createElement("code",null,An),". Note that only"," ",Zt," occurences where ",P.a.createElement("code",null,An)," is set with a numeric value will be taken into account."),placement:"right"},P.a.createElement("div",null,P.a.createElement(pe.b,{value:An,disablePopover:!0})))}})))),(Te||Ht)&&!Tt&&!zn&&P.a.createElement(pt.a,null,Jn),(Te||Ht)&&!jt&&!zn&&P.a.createElement(pt.a,null,Ln),(Te||Ht)&&!Tt&&!an&&!zn&&P.a.createElement(pt.a,null,ha),!kn&&!Te&&!an&&!zn&&P.a.createElement(pt.a,{className:"column-delete-btn"},En),Te&&un>1&&Ue<un-1&&en&&Ut)),(!Lt||Pe.properties&&Pe.properties.length>0)&&!Te&&!Ht&&P.a.createElement("div",{style:{paddingTop:6}},P.a.createElement("span",{style:{color:"#C4C4C4",fontSize:18,paddingLeft:6,paddingRight:2}},"\u21B3"),P.a.createElement(It.a,{className:"ant-btn-md",onClick:function(){return typeof Pe.order=="number"?Y(Pe.order,!H):void 0},"data-attr":"show-prop-filter-"+Ue},ft(H,Pe))),H&&P.a.createElement("div",{className:"mr property-filter-wrapper ".concat(pa)},P.a.createElement(Dt.a,{pageKey:"".concat(Ue,"-").concat(gn,"-filter"),propertyFilters:Pe.properties,onChange:function(An){return se({properties:An,index:Ue})},disablePopover:Te,style:{marginBottom:0},showNestedArrow:va,taxonomicGroupTypes:Wn,eventNames:Pe.type===Fn.a.Events&&Pe.id?[String(Pe.id)]:Pe.type===Fn.a.Actions&&Pe.id?Object(Bt.I)(parseInt(String(Pe.id)),nt):[]})))}function qt(z){var ee=z.math,Ae=z.mathGroupTypeIndex,Ce=z.index,Rt=z.onMathSelect,Pe=z.style,Ue="This can only be used on properties that have at least one number type occurence in your events.",Xt=Object($.useValues)(We.c),Lt=Xt.eventMathEntries,an=Xt.propertyMathEntries;return P.a.createElement(D.a,{style:Pt({width:150},Pe),value:Object(We.a)(ee,Ae),onChange:function(Tt){return Rt(Ce,Tt)},"data-attr":"math-selector-".concat(Ce),dropdownMatchSelectWidth:!1,dropdownStyle:{maxWidth:320},listHeight:280},P.a.createElement(D.a.OptGroup,{key:"event aggregates",label:"Event aggregation"},Lt.map(function(en){var Tt=Re()(en,2),jt=Tt[0],et=Tt[1],Pn=et.name,dn=et.description,yt=et.onProperty;return P.a.createElement(D.a.Option,{key:jt,value:jt,"data-attr":"math-".concat(jt,"-").concat(Ce)},P.a.createElement(at.a,{title:yt?P.a.createElement(P.a.Fragment,null,dn,P.a.createElement("br",null),Ue):dn,placement:"right"},P.a.createElement("div",{style:{height:"100%",width:"100%",paddingRight:8,overflow:"hidden",textOverflow:"ellipsis"}},Pn)))}),Object(gt.a)({value:""})),P.a.createElement(D.a.OptGroup,{key:"property aggregates",label:"Property aggregation"},an.map(function(en){var Tt=Re()(en,2),jt=Tt[0],et=Tt[1],Pn=et.name,dn=et.description,yt=et.onProperty;return P.a.createElement(D.a.Option,{key:jt,value:jt,"data-attr":"math-".concat(jt,"-").concat(Ce)},P.a.createElement(at.a,{title:yt?P.a.createElement(P.a.Fragment,null,dn,P.a.createElement("br",null),Ue):dn,placement:"right"},P.a.createElement("div",{style:{height:"100%",width:"100%"}},Pn)))})))}var Qt=(Je={},Z()(Je,Fn.a.Events,ce.g.EVENTS),Z()(Je,Fn.a.Actions,ce.g.ACTIONS),Je);function Ct(z){return Qt[z]||null}try{ze.displayName="ActionFilterRow",ze.__docgenInfo={description:"",displayName:"ActionFilterRow",props:{logic:{defaultValue:null,description:"",name:"logic",required:!0,type:{name:"any"}},filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"ActionFilter"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},hideMathSelector:{defaultValue:null,description:"",name:"hideMathSelector",required:!1,type:{name:"boolean"}},hidePropertySelector:{defaultValue:null,description:"",name:"hidePropertySelector",required:!1,type:{name:"boolean"}},singleFilter:{defaultValue:null,description:"",name:"singleFilter",required:!1,type:{name:"boolean"}},showOr:{defaultValue:null,description:"",name:"showOr",required:!1,type:{name:"boolean"}},hideFilter:{defaultValue:null,description:"",name:"hideFilter",required:!1,type:{name:"boolean"}},hideRename:{defaultValue:null,description:"",name:"hideRename",required:!1,type:{name:"boolean"}},onRenameClick:{defaultValue:{value:"() => {}"},description:"",name:"onRenameClick",required:!1,type:{name:"(() => void)"}},showSeriesIndicator:{defaultValue:null,description:"",name:"showSeriesIndicator",required:!1,type:{name:"boolean"}},seriesIndicatorType:{defaultValue:{value:"alpha"},description:"",name:"seriesIndicatorType",required:!1,type:{name:"enum",value:[{value:'"numeric"'},{value:'"alpha"'}]}},horizontalUI:{defaultValue:{value:"false"},description:"",name:"horizontalUI",required:!1,type:{name:"boolean"}},fullWidth:{defaultValue:{value:"false"},description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},filterCount:{defaultValue:null,description:"",name:"filterCount",required:!0,type:{name:"number"}},customRowPrefix:{defaultValue:null,description:"",name:"customRowPrefix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},customRowSuffix:{defaultValue:null,description:"",name:"customRowSuffix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string"}},propertyFilterWrapperClassName:{defaultValue:null,description:"",name:"propertyFilterWrapperClassName",required:!1,type:{name:"string"}},stripeActionRow:{defaultValue:{value:"true"},description:"",name:"stripeActionRow",required:!1,type:{name:"boolean"}},hasBreakdown:{defaultValue:null,description:"",name:"hasBreakdown",required:!0,type:{name:"boolean"}},showNestedArrow:{defaultValue:{value:"false"},description:"",name:"showNestedArrow",required:!1,type:{name:"boolean"}},actionsTaxonomicGroupTypes:{defaultValue:{value:"[TaxonomicFilterGroupType.Events, TaxonomicFilterGroupType.Actions]"},description:"",name:"actionsTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},propertiesTaxonomicGroupTypes:{defaultValue:null,description:"",name:"propertiesTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},hideDeleteBtn:{defaultValue:{value:"false"},description:"",name:"hideDeleteBtn",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},renderRow:{defaultValue:null,description:"",name:"renderRow",required:!1,type:{name:"(({ seriesIndicator, prefix, filter, suffix, propertyFiltersButton, renameRowButton, deleteButton, orLabel, }: Record<string, string | Element>) => Element)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#ActionFilterRow"]={docgenInfo:ze.__docgenInfo,name:"ActionFilterRow",path:"frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#ActionFilterRow"})}catch(z){}try{Ct.displayName="taxonomicFilterGroupTypeToEntityType",Ct.__docgenInfo={description:"",displayName:"taxonomicFilterGroupTypeToEntityType",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#taxonomicFilterGroupTypeToEntityType"]={docgenInfo:Ct.__docgenInfo,name:"taxonomicFilterGroupTypeToEntityType",path:"frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#taxonomicFilterGroupTypeToEntityType"})}catch(z){}var Fe=e("./node_modules/@ant-design/icons/es/icons/PlusCircleOutlined.js"),Ge=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),Mt=e.n(Ge),zt=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),qe=Object(zt.c)(function(){return P.a.createElement("span",{className:"action-filter-drag-handle"},P.a.createElement(Nt.SortableDragIcon,null))}),At=Object(zt.b)(function(z){var ee=z.filterCount,Ae=z.filterIndex,Ce=Mt()(z,["filterCount","filterIndex"]),Rt=ee>1;return P.a.createElement("div",{className:"draggable-action-filter ".concat(Rt?"drag-handle-visible":"")},Rt?P.a.createElement(qe,null):P.a.createElement("span",{style:{marginLeft:4}}),P.a.createElement(ze,F()({},Ce,{filterCount:ee,index:Ae,key:Ae})))}),dt=Object(zt.a)(function(z){var ee=z.children;return P.a.createElement("div",null,ee)});try{At.displayName="SortableActionFilterRow",At.__docgenInfo={description:"",displayName:"SortableActionFilterRow",props:{filterIndex:{defaultValue:null,description:"",name:"filterIndex",required:!0,type:{name:"number"}},logic:{defaultValue:null,description:"",name:"logic",required:!0,type:{name:"any"}},filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"ActionFilter"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},hideMathSelector:{defaultValue:null,description:"",name:"hideMathSelector",required:!1,type:{name:"boolean"}},hidePropertySelector:{defaultValue:null,description:"",name:"hidePropertySelector",required:!1,type:{name:"boolean"}},singleFilter:{defaultValue:null,description:"",name:"singleFilter",required:!1,type:{name:"boolean"}},showOr:{defaultValue:null,description:"",name:"showOr",required:!1,type:{name:"boolean"}},hideFilter:{defaultValue:null,description:"",name:"hideFilter",required:!1,type:{name:"boolean"}},hideRename:{defaultValue:null,description:"",name:"hideRename",required:!1,type:{name:"boolean"}},onRenameClick:{defaultValue:null,description:"",name:"onRenameClick",required:!1,type:{name:"(() => void)"}},showSeriesIndicator:{defaultValue:null,description:"",name:"showSeriesIndicator",required:!1,type:{name:"boolean"}},seriesIndicatorType:{defaultValue:null,description:"",name:"seriesIndicatorType",required:!1,type:{name:"enum",value:[{value:'"numeric"'},{value:'"alpha"'}]}},horizontalUI:{defaultValue:null,description:"",name:"horizontalUI",required:!1,type:{name:"boolean"}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},filterCount:{defaultValue:null,description:"",name:"filterCount",required:!0,type:{name:"number"}},customRowPrefix:{defaultValue:null,description:"",name:"customRowPrefix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},customRowSuffix:{defaultValue:null,description:"",name:"customRowSuffix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string"}},propertyFilterWrapperClassName:{defaultValue:null,description:"",name:"propertyFilterWrapperClassName",required:!1,type:{name:"string"}},stripeActionRow:{defaultValue:null,description:"",name:"stripeActionRow",required:!1,type:{name:"boolean"}},hasBreakdown:{defaultValue:null,description:"",name:"hasBreakdown",required:!0,type:{name:"boolean"}},showNestedArrow:{defaultValue:null,description:"",name:"showNestedArrow",required:!1,type:{name:"boolean"}},actionsTaxonomicGroupTypes:{defaultValue:null,description:"",name:"actionsTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},propertiesTaxonomicGroupTypes:{defaultValue:null,description:"",name:"propertiesTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},hideDeleteBtn:{defaultValue:null,description:"",name:"hideDeleteBtn",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},renderRow:{defaultValue:null,description:"",name:"renderRow",required:!1,type:{name:"(({ seriesIndicator, prefix, filter, suffix, propertyFiltersButton, renameRowButton, deleteButton, orLabel, }: Record<string, string | Element>) => Element)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableActionFilterRow"]={docgenInfo:At.__docgenInfo,name:"SortableActionFilterRow",path:"frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableActionFilterRow"})}catch(z){}try{dt.displayName="SortableContainer",dt.__docgenInfo={description:"",displayName:"SortableContainer",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableContainer"]={docgenInfo:dt.__docgenInfo,name:"SortableContainer",path:"frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableContainer"})}catch(z){}var xt=e("./node_modules/antd/es/modal/index.js"),ht=e("./node_modules/antd/es/input/index.js"),Yt=e("./frontend/src/scenes/insights/utils.ts"),ue=Object($.kea)({props:{},key:function(ee){return ee.typeKey},path:function(ee){return["scenes","insights","ActionFilter","renameModalLogic",ee]},connect:{actions:[Ye.a,["selectFilter"]]},actions:function(){return{setName:function(Ae){return{name:Ae}}}},reducers:function(ee){var Ae,Ce=ee.props;return{name:[(Ae=Object(Yt.c)(Ce.filter))!==null&&Ae!==void 0?Ae:"",{setName:function(Pe,Ue){var Xt=Ue.name;return Xt},selectFilter:function(Pe,Ue){var Xt,Lt=Ue.filter;return(Xt=Object(Yt.c)(Lt))!==null&&Xt!==void 0?Xt:""}}]}}});function In(z){var ee,Ae=z.typeKey,Ce=z.view,Rt=Object($.useValues)(Ye.a),Pe=Rt.selectedFilter,Ue=Rt.modalVisible,Xt=Object($.useActions)(Ye.a),Lt=Xt.renameFilter,an=Xt.hideModal,en=ue({typeKey:Ae,filter:Pe}),Tt=Object($.useValues)(en),jt=Tt.name,et=Object($.useActions)(en),Pn=et.setName,dn=Object(fe.useRef)(null);Cn(dn,{cursor:"all"},[Ue]);var yt="Rename ".concat(Ce===ce.s.FUNNELS?"funnel step":"graph series");return P.a.createElement(xt.a,{"data-attr":"filter-rename-modal",visible:Ue,title:yt,footer:P.a.createElement(P.a.Fragment,null,P.a.createElement(It.a,{type:"link",onClick:an},"Cancel"),P.a.createElement(It.a,{type:"primary",onClick:function(){return Lt(jt)}},yt)),onCancel:an},"Query series/steps can be renamed to provide a more"," ",P.a.createElement("strong",null,"meaningful label for you and your team members"),". Custom names are also shown on dashboards.",P.a.createElement("br",null),P.a.createElement("div",{className:"l4 mt-05 mb-05"},"Name"),P.a.createElement(ht.a,{ref:dn,value:jt,onPressEnter:function(){return Lt(jt)},onChange:function(it){return Pn(it.target.value)},suffix:P.a.createElement("span",{className:"text-muted-alt"},(ee=Object(Yt.c)(Pe,!1))!==null&&ee!==void 0?ee:"")}))}function Cn(z,ee){var Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Object(fe.useEffect)(function(){var Ce=setTimeout(function(){if(z.current){var Rt;(Rt=z.current)===null||Rt===void 0||Rt.focus(ee)}},0);return function(){return clearTimeout(Ce)}},Ae)}try{In.displayName="RenameModal",In.__docgenInfo={description:"",displayName:"RenameModal",props:{typeKey:{defaultValue:null,description:"",name:"typeKey",required:!0,type:{name:"string"}},view:{defaultValue:null,description:"",name:"view",required:!1,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/RenameModal.tsx#RenameModal"]={docgenInfo:In.__docgenInfo,name:"RenameModal",path:"frontend/src/scenes/insights/ActionFilter/RenameModal.tsx#RenameModal"})}catch(z){}var ea=e("./frontend/src/lib/utils/eventUsageLogic.ts"),$n=e("./frontend/src/scenes/teamLogic.ts");function jn(z,ee){var Ae=Object.keys(z);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(z);ee&&(Ce=Ce.filter(function(Rt){return Object.getOwnPropertyDescriptor(z,Rt).enumerable})),Ae.push.apply(Ae,Ce)}return Ae}function ta(z){for(var ee=1;ee<arguments.length;ee++){var Ae=arguments[ee]!=null?arguments[ee]:{};ee%2?jn(Object(Ae),!0).forEach(function(Ce){Z()(z,Ce,Ae[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(Ae)):jn(Object(Ae)).forEach(function(Ce){Object.defineProperty(z,Ce,Object.getOwnPropertyDescriptor(Ae,Ce))})}return z}var Gt=P.a.forwardRef(function(z,ee){var Ae=z.setFilters,Ce=z.filters,Rt=z.typeKey,Pe=z.addFilterDefaultOptions,Ue=Pe===void 0?{}:Pe,Xt=z.hideMathSelector,Lt=z.hidePropertySelector,an=Lt===void 0?!1:Lt,en=z.buttonCopy,Tt=en===void 0?"":en,jt=z.disabled,et=jt===void 0?!1:jt,Pn=z.sortable,dn=Pn===void 0?!1:Pn,yt=z.showSeriesIndicator,fn=yt===void 0?!1:yt,it=z.seriesIndicatorType,Te=it===void 0?"alpha":it,Ot=z.showOr,Ht=Ot===void 0?!1:Ot,un=z.hideFilter,yn=un===void 0?!1:un,vn=z.hideRename,Bn=vn===void 0?!1:vn,pa=z.horizontalUI,da=pa===void 0?!1:pa,ra=z.fullWidth,ua=ra===void 0?!1:ra,fa=z.customRowPrefix,va=z.customRowSuffix,Un=z.rowClassName,kn=z.entitiesLimit,oa=z.propertyFilterWrapperClassName,Kn=z.stripeActionRow,Wn=Kn===void 0?!0:Kn,Rn=z.customActions,ia=z.showNestedArrow,_n=ia===void 0?!1:ia,zn=z.actionsTaxonomicGroupTypes,Mn=z.propertiesTaxonomicGroupTypes,Yn=z.hideDeleteBtn,E=z.renderRow,x=z.buttonType,I=x===void 0?"dashed":x,R=z.readOnly,U=R===void 0?!1:R,te=Object($.useValues)($n.a),J=te.currentTeamId,L=Object(Ye.a)({teamId:J,setFilters:Ae,filters:Ce,typeKey:Rt,addFilterDefaultOptions:Ue}),se=Object($.useActions)(ea.f),Y=se.reportFunnelStepReordered,He=Object($.useValues)(L),tt=He.localFilters,nt=Object($.useActions)(L),Le=nt.addFilter,we=nt.setLocalFilters,H=nt.showModal;Object(fe.useEffect)(function(){we(Ce)},[Ce]);function mn(be){var pn=be.oldIndex,hn=be.newIndex;function st(Vt,bn,bt){var St=r()(Vt);return Array.prototype.splice.call(St,bt,0,Array.prototype.splice.call(St,bn,1)[0]),St.map(function(Ut,rn){return ta(ta({},Ut),{},{order:rn})})}Ae(Object(Ye.b)(st(tt,pn,hn))),pn!==hn&&Y()}var Zt=kn===1,gn={logic:L,showSeriesIndicator:fn,seriesIndicatorType:Te,hideMathSelector:Xt,hidePropertySelector:an,customRowPrefix:fa,customRowSuffix:va,rowClassName:Un,propertyFilterWrapperClassName:oa,stripeActionRow:Wn,hasBreakdown:!!Ce.breakdown,fullWidth:ua,actionsTaxonomicGroupTypes:zn,propertiesTaxonomicGroupTypes:Mn,hideDeleteBtn:Yn,disabled:et,readOnly:U,renderRow:E,hideRename:Bn,onRenameClick:H},Tn=Boolean(kn&&tt.length>=kn);return P.a.createElement("div",{ref:ee},!Bn&&!U&&P.a.createElement($.BindLogic,{logic:Ye.a,props:{setFilters:Ae,filters:Ce,typeKey:Rt,addFilterDefaultOptions:Ue}},P.a.createElement(In,{view:Ce.insight,typeKey:Rt})),tt?dn?P.a.createElement(dt,{onSortEnd:mn,lockAxis:"y",distance:5},tt.map(function(be,pn){return P.a.createElement(At,F()({key:pn,filter:be,index:pn,filterIndex:pn,filterCount:tt.length,showNestedArrow:_n},gn))})):tt.map(function(be,pn){return P.a.createElement(ze,F()({filter:be,index:pn,key:pn,singleFilter:Zt,showOr:Ht,hideFilter:yn||U,horizontalUI:da,filterCount:tt.length,showNestedArrow:_n},gn))}):null,(!Zt||Rn)&&P.a.createElement("div",{className:Object(Dn.a)(I!=="link"?"mt":"mt-05"),style:{display:"flex",alignItems:"center"}},!Zt&&P.a.createElement(It.a,{type:I,onClick:function(){return Le()},"data-attr":"add-action-event-button",icon:P.a.createElement(Fe.a,null),disabled:Tn||et||U,className:"add-action-event-button"},Tn?"Reached limit of ".concat(kn," ").concat(Ce.insight===ce.s.FUNNELS?"steps":"series"):Tt||"Action or event"),Rn))});try{Gt.displayName="ActionFilter",Gt.__docgenInfo={description:"",displayName:"ActionFilter",props:{setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(filters: FilterType) => void"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:'Optional<FilterType, "type">'}},typeKey:{defaultValue:null,description:"",name:"typeKey",required:!0,type:{name:"string"}},addFilterDefaultOptions:{defaultValue:{value:"{}"},description:"",name:"addFilterDefaultOptions",required:!1,type:{name:"Record<string, any>"}},hideMathSelector:{defaultValue:null,description:"",name:"hideMathSelector",required:!1,type:{name:"boolean"}},hidePropertySelector:{defaultValue:{value:"false"},description:"",name:"hidePropertySelector",required:!1,type:{name:"boolean"}},buttonCopy:{defaultValue:{value:""},description:"Text copy for the action button to add more events/actions (graph series)",name:"buttonCopy",required:!1,type:{name:"string"}},buttonType:{defaultValue:{value:"dashed"},description:"",name:"buttonType",required:!1,type:{name:"enum",value:[{value:'"link"'},{value:'"text"'},{value:'"default"'},{value:'"primary"'},{value:'"ghost"'},{value:'"dashed"'}]}},disabled:{defaultValue:{value:"false"},description:"Whether the full control is enabled or not",name:"disabled",required:!1,type:{name:"boolean"}},sortable:{defaultValue:{value:"false"},description:"Whether actions/events can be sorted (used mainly for funnel step reordering)",name:"sortable",required:!1,type:{name:"boolean"}},showSeriesIndicator:{defaultValue:{value:"false"},description:"Whether to show an indicator identifying each graph",name:"showSeriesIndicator",required:!1,type:{name:"boolean"}},seriesIndicatorType:{defaultValue:{value:"alpha"},description:"Series badge shows A, B, C | 1, 2, 3",name:"seriesIndicatorType",required:!1,type:{name:"enum",value:[{value:'"numeric"'},{value:'"alpha"'}]}},showOr:{defaultValue:{value:"false"},description:'Whether to show the "OR" label after each filter',name:"showOr",required:!1,type:{name:"boolean"}},hideFilter:{defaultValue:{value:"false"},description:"Hide local filtering (currently used for retention insight)",name:"hideFilter",required:!1,type:{name:"boolean"}},hideRename:{defaultValue:{value:"false"},description:"Hides the rename option",name:"hideRename",required:!1,type:{name:"boolean"}},entitiesLimit:{defaultValue:null,description:"A limit of entities (series or funnel steps) beyond which more can't be added",name:"entitiesLimit",required:!1,type:{name:"number"}},customRowPrefix:{defaultValue:null,description:"Custom prefix element to show in each ActionFilterRow",name:"customRowPrefix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},customRowSuffix:{defaultValue:null,description:"Custom suffix element to show in each ActionFilterRow",name:"customRowSuffix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string"}},propertyFilterWrapperClassName:{defaultValue:null,description:"",name:"propertyFilterWrapperClassName",required:!1,type:{name:"string"}},stripeActionRow:{defaultValue:{value:"true"},description:"",name:"stripeActionRow",required:!1,type:{name:"boolean"}},customActions:{defaultValue:null,description:"Custom actions to be added next to the add series button",name:"customActions",required:!1,type:{name:"Element"}},horizontalUI:{defaultValue:{value:"false"},description:"",name:"horizontalUI",required:!1,type:{name:"boolean"}},fullWidth:{defaultValue:{value:"false"},description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},showNestedArrow:{defaultValue:{value:"false"},description:"Show nested arrows to the left of property filter buttons",name:"showNestedArrow",required:!1,type:{name:"boolean"}},actionsTaxonomicGroupTypes:{defaultValue:null,description:"Which tabs to show for actions selector",name:"actionsTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},propertiesTaxonomicGroupTypes:{defaultValue:null,description:"Which tabs to show for property filters",name:"propertiesTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},hideDeleteBtn:{defaultValue:null,description:"",name:"hideDeleteBtn",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},renderRow:{defaultValue:null,description:"",name:"renderRow",required:!1,type:{name:"(({ seriesIndicator, prefix, filter, suffix, propertyFiltersButton, deleteButton, orLabel, }: Record<string, string | Element>) => Element)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx#ActionFilter"]={docgenInfo:Gt.__docgenInfo,name:"ActionFilter",path:"frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx#ActionFilter"})}catch(z){}},"./frontend/src/scenes/insights/InsightContainer.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return W});var oe=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),p=e.n(oe),Ke=e("./node_modules/antd/es/card/index.js"),Ve=e("./node_modules/antd/es/row/index.js"),F=e("./node_modules/antd/es/col/index.js"),Be=e("./node_modules/core-js/modules/es.array.includes.js"),Z=e("./node_modules/core-js/modules/es.string.includes.js"),ke=e("./node_modules/react/index.js"),r=e.n(ke),T=e("./node_modules/kea/lib/index.esm.js"),vt=e("./node_modules/antd/es/tag/index.js"),Q=e("./node_modules/antd/es/select/index.js"),je=e("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),wt=e("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),Xe=e("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),xe=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},P=fe,$=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Ye=function(N,A){return ke.createElement($.a,Object(xe.a)(Object(xe.a)({},N),{},{ref:A,icon:P}))};Ye.displayName="AreaChartOutlined";var _e=ke.forwardRef(Ye),Et=e("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},de=ct,Ze=function(N,A){return ke.createElement($.a,Object(xe.a)(Object(xe.a)({},N),{},{ref:A,icon:de}))};Ze.displayName="TableOutlined";var Oe=ke.forwardRef(Ze),Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},It=Re,lt=function(N,A){return ke.createElement($.a,Object(xe.a)(Object(xe.a)({},N),{},{ref:A,icon:It}))};lt.displayName="PieChartOutlined";var pt=ke.forwardRef(lt),D=e("./frontend/src/types.ts"),at=e("./frontend/src/lib/utils.tsx"),ce=e("./frontend/src/scenes/insights/insightLogic.ts");function Dt(j){var N=j.filters,A=j.onChange,k=j.disabled,X=Object(T.useValues)(ce.c),G=X.insightProps,ae=Object(T.useValues)(Object(je.a)(G)),he=ae.chartFilter,Ie=Object(T.useActions)(Object(je.a)(G)),Ne=Ie.setChartFilter,ge=N.insight===D.s.STICKINESS||N.insight===D.s.RETENTION,ie=!1,De=N.insight===D.s.RETENTION||N.insight===D.s.STICKINESS,Me=N.insight===D.s.RETENTION,$e=Me||N.insight===D.s.STICKINESS||N.insight===D.s.RETENTION,ut=N.insight===D.s.RETENTION?D.d.ActionsTable:N.insight===D.s.FUNNELS?D.d.FunnelViz:D.d.ActionsLineGraph;function Qe($t){var ln=$t.icon,Kt=$t.children,mt=Kt===void 0?null:Kt;return r.a.createElement(r.a.Fragment,null,ln," ",mt)}function on($t){var ln=$t.children,Kt=ln===void 0?null:ln;return r.a.createElement(vt.a,{color:"orange",style:{marginLeft:8,fontSize:10}},Kt)}var sn=N.insight===D.s.FUNNELS?[{value:D.o.Steps,label:r.a.createElement(Qe,{icon:r.a.createElement(wt.a,null)},"Steps")},{value:D.o.Trends,label:r.a.createElement(Qe,{icon:r.a.createElement(Xe.a,null)},"Trends",r.a.createElement(on,null,"BETA"))}]:[{label:"Line Chart",options:[{value:D.d.ActionsLineGraph,label:r.a.createElement(Qe,{icon:r.a.createElement(Xe.a,null)},"Linear")},{value:D.d.ActionsLineGraphCumulative,label:r.a.createElement(Qe,{icon:r.a.createElement(_e,null)},"Cumulative"),disabled:ge}]},{label:"Bar Chart",options:[{value:D.d.ActionsBar,label:r.a.createElement(Qe,{icon:r.a.createElement(Et.a,null)},"Time"),disabled:Me},{value:D.d.ActionsBarValue,label:r.a.createElement(Qe,{icon:r.a.createElement(Et.a,null)},"Value"),disabled:$e}]},{value:D.d.ActionsTable,label:r.a.createElement(Qe,{icon:r.a.createElement(Oe,null)},"Table"),disabled:ie},{value:D.d.ActionsPie,label:r.a.createElement(Qe,{icon:r.a.createElement(pt,null)},"Pie"),disabled:De}];return r.a.createElement(Q.a,{key:"2",defaultValue:N.display||ut,value:he||ut,onChange:function(ln){Ne(ln),A==null||A(ln)},bordered:!0,dropdownAlign:at.a.bottomRight,dropdownMatchSelectWidth:!1,"data-attr":"chart-filter",disabled:k,options:sn})}try{Dt.displayName="ChartFilter",Dt.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:Dt.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(j){}var o=e("./node_modules/antd/es/checkbox/index.js"),nn=e("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Bt(){var j=Object(T.useValues)(ce.c),N=j.insightProps,A=Object(T.useValues)(Object(nn.a)(N)),k=A.compare,X=A.disabled,G=Object(T.useActions)(Object(nn.a)(N)),ae=G.setCompare;return X?null:r.a.createElement(o.a,{onChange:function(Ie){ae(Ie.target.checked)},checked:k,style:{marginLeft:8,marginRight:6},disabled:X},"Compare",r.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var Wt=e("./node_modules/core-js/modules/es.array.map.js"),V=e("./node_modules/core-js/modules/es.object.entries.js"),Jt=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),xn=e.n(Jt),ca=e("./node_modules/core-js/modules/es.array.iterator.js"),la=e("./node_modules/core-js/modules/es.object.to-string.js"),On=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Xn=e("./frontend/src/scenes/insights/sharedUtils.ts");function Fn(j,N){var A=Object.keys(j);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(j);N&&(k=k.filter(function(X){return Object.getOwnPropertyDescriptor(j,X).enumerable})),A.push.apply(A,k)}return A}function Zn(j){for(var N=1;N<arguments.length;N++){var A=arguments[N]!=null?arguments[N]:{};N%2?Fn(Object(A),!0).forEach(function(k){p()(j,k,A[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(A)):Fn(Object(A)).forEach(function(k){Object.defineProperty(j,k,Object.getOwnPropertyDescriptor(A,k))})}return j}var Dn=Object(T.kea)({props:{},key:Object(Xn.c)("new"),path:function(N){return["lib","components","IntervalFilter","intervalFilterLogic",N]},connect:function(N){return{actions:[Object(ce.c)(N),["setFilters"]],values:[Object(ce.c)(N),["filters"]]}},actions:function(){return{setInterval:function(A){return{interval:A}}}},listeners:function(N){var A=N.values,k=N.actions;return{setInterval:function(G){var ae=G.interval;Object(at.mb)(ae,A.filters.interval)||k.setFilters(Zn(Zn({},A.filters),{},{interval:ae}))}}},selectors:{interval:[function(j){return[j.filters]},function(j){return j==null?void 0:j.interval}]}}),We=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),gt={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function rt(j){var N=j.disabled,A=Object(T.useValues)(ce.c),k=A.insightProps,X=Object(T.useValues)(Dn(k)),G=X.interval,ae=Object(T.useActions)(Dn(k)),he=ae.setInterval,Ie=Object.entries(gt).map(function(Ne){var ge=xn()(Ne,2),ie=ge[0],De=ge[1].label;return{key:ie,value:ie,label:ie===G?r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,null)," ",De):De}});return r.a.createElement(Q.a,{bordered:!0,disabled:N,defaultValue:G||"day",value:G||void 0,dropdownMatchSelectWidth:!1,onChange:he,"data-attr":"interval-filter",options:Ie})}try{rt.displayName="IntervalFilter",rt.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:rt.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(j){}var pe=e("./frontend/src/lib/constants.tsx"),Sn=e("./node_modules/@babel/runtime/helpers/extends.js"),Nt=e.n(Sn),Je=e("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),ot=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function Pt(j){var N=Object(T.useValues)(ce.c),A=N.insightProps,k=Object(T.useValues)(Object(Je.a)(A)),X=k.dates,G=X.dateFrom,ae=X.dateTo,he=Object(T.useActions)(Object(Je.a)(A)),Ie=he.setDates;return r.a.createElement(ot.a,Nt()({},j,{dateFrom:G!=null?G:void 0,dateTo:ae!=null?ae:void 0,onChange:function(ge,ie){var De;Ie(ge,ie),(De=j.onChange)===null||De===void 0||De.call(j,ge,ie)}}))}try{Pt.displayName="InsightDateFilter",Pt.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:Pt.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(j){}var ft=e("./node_modules/rc-picker/lib/generate/dayjs.js"),ze=e.n(ft),qt=e("./node_modules/antd/lib/date-picker/generatePicker/index.js"),Qt=e.n(qt),Ct=e("./frontend/src/scenes/retention/retentionTableLogic.ts"),Fe=e("./frontend/src/lib/components/Tooltip.tsx"),Ge=e("./frontend/src/lib/dayjs.ts"),Mt=Qt()(ze.a);function zt(j){var N=j.disabled,A=Object(T.useValues)(ce.c),k=A.insightProps,X=Object(T.useValues)(Object(Ct.d)(k)),G=X.filters,ae=Object(T.useActions)(Object(Ct.d)(k)),he=ae.setFilters,Ie=G.date_to&&Object(Ge.a)(G.date_to).year()!==Object(Ge.a)().year()?", YYYY":"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{title:"Cohorts up to this end date"},r.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},r.a.createElement(We.a,null),r.a.createElement(Mt,{showTime:G.period==="Hour",use12Hours:!0,format:G.period==="Hour"?"MMM D".concat(Ie,", h a"):"MMM D".concat(Ie),value:G.date_to?Object(Ge.a)(G.date_to):void 0,onChange:function(ge){return he({date_to:ge&&Object(Ge.a)(ge).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:N}))))}try{zt.displayName="RetentionDatePicker",zt.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:zt.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(j){}var qe=e("./frontend/src/scenes/funnels/funnelLogic.ts"),At=e("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function dt(j){var N=j.disabled,A=Object(T.useValues)(ce.c),k=A.insightProps,X=Object(T.useValues)(Object(qe.a)(k)),G=X.barGraphLayout,ae=Object(T.useActions)(Object(qe.a)(k)),he=ae.setFilters,Ie=[{value:pe.p.vertical,icon:r.a.createElement(Et.a,null),label:"Left to right"},{value:pe.p.horizontal,icon:r.a.createElement(At.a,null),label:"Top to bottom"}];return r.a.createElement(Q.a,{defaultValue:pe.p.vertical,value:G||pe.p.vertical,onChange:function(ge){return he({layout:ge})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:N},r.a.createElement(Q.a.OptGroup,{label:"Graph display options"},Ie.map(function(Ne){return r.a.createElement(Q.a.Option,{key:Ne.value,value:Ne.value,label:r.a.createElement(r.a.Fragment,null,Ne.icon," ",Ne.label)},Ne.label)})))}try{dt.displayName="FunnelDisplayLayoutPicker",dt.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:dt.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(j){}var xt=e("./node_modules/core-js/modules/es.array.concat.js"),ht=e("./node_modules/core-js/modules/es.array.from.js"),Yt=e("./node_modules/core-js/modules/es.set.js"),ue=e("./node_modules/core-js/modules/es.string.iterator.js"),In=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Cn=e.n(In),ea=e("./node_modules/antd/es/input-number/index.js"),$n=e("./node_modules/clsx/dist/clsx.m.js"),jn=0,ta=90,Gt=new Set([5,15,25,50,90]),z=[{label:"Auto bins",value:pe.g,display:!0}].concat(Cn()(Array.from(Array.from(Array(ta+1).keys()),function(j){return{label:"".concat(j," bins"),value:j,display:Gt.has(j)}})),[{label:"Custom",value:"custom",display:!0}]);function ee(j){var N=j.disabled,A=Object(T.useValues)(ce.c),k=A.insightProps,X=Object(T.useValues)(Object(qe.a)(k)),G=X.filters,ae=X.numericBinCount,he=Object(T.useActions)(Object(qe.a)(k)),Ie=he.setBinCount;return r.a.createElement(Q.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:pe.g,value:G.bin_count||pe.g,onSelect:function(ge){return Ie(ge)},dropdownRender:function(ge){return r.a.createElement(r.a.Fragment,null,ge,r.a.createElement("div",null,r.a.createElement(ea.a,{className:"funnel-bins-custom-picker",size:"middle",min:jn,max:ta,value:ae,onChange:function(De){var Me=typeof De=="string"?parseInt(De):De;Me&&Ie(Me)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:at.a.bottomRight,optionLabelProp:"label",disabled:N},r.a.createElement(Q.a.OptGroup,{label:"Bin Count"},z.map(function(Ne){return Ne.value==="custom"?null:r.a.createElement(Q.a.Option,{className:Object($n.a)({"select-option-hidden":!Ne.display}),key:Ne.value,value:Ne.value,label:r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,null)," ",Ne.label)},Ne.label)})))}try{ee.displayName="FunnelBinsPicker",ee.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:ee.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(j){}var Ae=e("./node_modules/core-js/modules/es.array.filter.js"),Ce=e("./node_modules/core-js/modules/es.array.slice.js"),Rt=e("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),Pe=e("./frontend/src/scenes/paths/pathsLogic.ts"),Ue=e("./frontend/src/scenes/userLogic.ts");function Xt(j){var N,A=j.disabled,k=Object(T.useValues)(ce.c),X=k.insightProps,G=Object(T.useValues)(Object(Pe.b)(X)),ae=G.filter,he=Object(T.useActions)(Object(Pe.b)(X)),Ie=he.setFilter,Ne=Object(T.useValues)(Ue.a),ge=Ne.user,ie=2,De=!(ge==null||(N=ge.organization)===null||N===void 0)&&N.available_features.includes(D.c.PATHS_ADVANCED)?20:5,Me=Array.from(Array.from(Array.from(Array(De+1).keys()).slice(ie)),function($e){return{label:"".concat($e," Steps"),value:$e}});return r.a.createElement(Q.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:ae.step_limit||Pe.a,onSelect:function(ut){return Ie({step_limit:ut})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:at.a.bottomRight,optionLabelProp:"label",disabled:A},Me.map(function($e){return r.a.createElement(Q.a.Option,{key:$e.value,value:$e.value,label:r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt.a,null)," ",$e.label)},$e.label)}))}try{Xt.displayName="PathStepPicker",Xt.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:Xt.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(j){}var Lt=e("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function an(j){var N=j.disabled,A=Object(T.useValues)(ce.c),k=A.insightProps,X=Object(T.useValues)(Object(Ct.d)(k)),G=X.retentionReference,ae=Object(T.useActions)(Object(Ct.d)(k)),he=ae.setRetentionReference;return r.a.createElement(Q.a,{value:G,onChange:he,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:N},[{value:"total",icon:r.a.createElement(Lt.a,null),label:"Overall cohort"},{value:"previous",icon:r.a.createElement(Lt.a,null),label:"Relative to previous period"}].map(function(Ie){return r.a.createElement(Q.a.Option,{key:Ie.value,value:Ie.value,label:r.a.createElement(r.a.Fragment,null,Ie.icon," ",Ie.label)},Ie.label)}))}try{an.displayName="ReferencePicker",an.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:an.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(j){}var en=e("./node_modules/antd/es/tooltip/index.js"),Tt=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),jt,et,Pn=function(N,A){switch(N){case D.s.FUNNELS:return A.funnel_viz_type===D.o.Trends;case D.s.RETENTION:case D.s.PATHS:return!1;case D.s.TRENDS:case D.s.STICKINESS:case D.s.LIFECYCLE:default:return![pe.e,pe.f,pe.b].includes(A.display||"")}},dn=function(N){switch(N){case D.s.TRENDS:case D.s.STICKINESS:return!0;case D.s.RETENTION:case D.s.FUNNELS:return!1;case D.s.LIFECYCLE:case D.s.PATHS:return!1;default:return!0}},yt=(jt={},p()(jt,"".concat(D.s.TRENDS),!0),p()(jt,"".concat(D.s.STICKINESS),!0),p()(jt,"".concat(D.s.LIFECYCLE),!0),p()(jt,"".concat(D.s.FUNNELS),!0),p()(jt,"".concat(D.s.RETENTION),!1),p()(jt,"".concat(D.s.PATHS),!0),jt),fn=(et={},p()(et,"".concat(D.s.TRENDS),!0),p()(et,"".concat(D.s.STICKINESS),!0),p()(et,"".concat(D.s.LIFECYCLE),!1),p()(et,"".concat(D.s.FUNNELS),!1),p()(et,"".concat(D.s.RETENTION),!1),p()(et,"".concat(D.s.PATHS),!1),et),it=function(N){var A,k;return!N.actions&&!N.events||((A=N.actions)===null||A===void 0?void 0:A.length)===0&&((k=N.events)===null||k===void 0?void 0:k.length)===0};function Te(j){var N=j.filters,A=j.activeView,k=j.disableTable,X=j.disabled,G=A===D.s.FUNNELS,ae=A===D.s.PATHS;return r.a.createElement("div",{className:"display-config-inner"},r.a.createElement("div",{className:"display-config-inner-row"},yt[A]&&!k&&r.a.createElement("span",{className:"filter"},r.a.createElement("span",{className:"head-title-item"},"Date range"),r.a.createElement(Pt,{defaultValue:"Last 7 days",disabled:X||G&&it(N),bordered:!0,makeLabel:function(Ie){return r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,null)," ",Ie,Ie=="All time"&&r.a.createElement(en.a,{title:"Only events dated after 2015 will be shown"},r.a.createElement(Tt.a,{className:"info-indicator"})))}})),Pn(A,N)&&r.a.createElement("span",{className:"filter"},r.a.createElement("span",{className:"head-title-item"},r.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),r.a.createElement(rt,{view:A,disabled:X})),A===D.s.RETENTION&&r.a.createElement(r.a.Fragment,null,r.a.createElement(zt,{disabled:X}),r.a.createElement(an,{disabled:X})),ae&&r.a.createElement("span",{className:"filter"},r.a.createElement(Xt,{disabled:X})),fn[A]&&r.a.createElement("span",{className:"filter"},r.a.createElement(Bt,null))),r.a.createElement("div",{className:"display-config-inner-row"},dn(A)&&r.a.createElement("span",{className:"filter"},r.a.createElement("span",{className:"head-title-item"},"Chart type"),r.a.createElement(Dt,{filters:N,disabled:X||N.insight===D.s.LIFECYCLE})),G&&N.funnel_viz_type===D.o.Steps&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"filter"},r.a.createElement(dt,{disabled:X}))),G&&N.funnel_viz_type===D.o.TimeToConvert&&r.a.createElement("span",{className:"filter"},r.a.createElement(ee,{disabled:X}))))}try{Te.displayName="InsightDisplayConfig",Te.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:Te.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(j){}var Ot=e("./node_modules/antd/es/button/index.js"),Ht=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),un=e.n(Ht),yn=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),vn=e.n(yn),Bn={};Bn.insert="head",Bn.singleton=!1;var pa=un()(vn.a,Bn),da=vn.a.locals||{},ra=e("./frontend/src/scenes/funnels/funnelUtils.ts"),ua=e("./node_modules/core-js/modules/es.array.find.js"),fa=e("./frontend/src/lib/components/EntityFilterInfo.tsx");function va(){var j,N=Object(T.useValues)(ce.c),A=N.insightProps,k=Object(T.useValues)(Object(qe.a)(A)),X=k.filters,G=k.numberOfSeries,ae=k.areFiltersValid,he=k.filterSteps,Ie=Object(T.useActions)(Object(qe.a)(A)),Ne=Ie.changeStepRange;if(X.funnel_viz_type===D.o.Steps)return null;var ge=function(ut,Qe){Ne(ut,Qe)},ie=ae?Array.from(Array(Math.max(G)).keys()).slice(0,-1):[0],De=ae?Array.from(Array(Math.max(G)).keys()).slice(((j=X.funnel_from_step)!==null&&j!==void 0?j:0)+1):[1],Me=function(ut){return ut.map(function(Qe){var on=he.find(function(sn){return sn.order===Qe});return on?r.a.createElement(Q.a.Option,{key:Qe,value:Qe,label:"Step ".concat(Qe+1)},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("span",{style:{marginRight:4}},"Step ",Qe+1,":"),r.a.createElement(fa.a,{filter:on}))):null})};return r.a.createElement(Ve.a,{className:"funnel-options-inputs"},r.a.createElement("span",{className:"text-muted-alt"},"from"),r.a.createElement(Q.a,{disabled:!ae,dropdownMatchSelectWidth:!1,dropdownAlign:at.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:X.funnel_from_step||0,onChange:function(ut){return ge(ut,X.funnel_to_step)},style:{marginLeft:4,marginRight:4}},Me(ie)),r.a.createElement("span",{className:"text-muted-alt"},"to"),r.a.createElement(Q.a,{disabled:!ae,dropdownMatchSelectWidth:!1,dropdownAlign:at.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:X.funnel_to_step||Math.max(G-1,1),onChange:function(ut){return ge(X.funnel_from_step,ut)},style:{marginLeft:4,marginRight:4}},Me(De)))}function Un(){var j=Object(T.useValues)(ce.c),N=j.insightProps,A=j.filters,k=j.activeView,X=Object(T.useValues)(Object(qe.a)(N)),G=X.conversionMetrics,ae=X.aggregationTargetLabel,he=Object(T.useActions)(Object(je.a)(N)),Ie=he.setChartFilter;if(k!==D.s.FUNNELS)return null;var Ne=[].concat(Cn()(A.funnel_viz_type===D.o.Steps?[r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-muted-alt"},r.a.createElement(Fe.a,{title:"Overall conversion rate for all ".concat(ae.plural," on the entire funnel.")},r.a.createElement(Tt.a,{className:"info-indicator left"})),"Total conversion rate"),r.a.createElement("span",{className:"text-muted-alt mr-025"},":"),r.a.createElement("span",{className:"l4"},Object(ra.c)(G.totalRate),"%"))]:[]),Cn()(A.funnel_viz_type!==D.o.Trends?[r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-muted-alt"},r.a.createElement(Fe.a,{title:"Average (arithmetic mean) of the total time each ".concat(ae.singular," spent in the entire funnel.")},r.a.createElement(Tt.a,{className:"info-indicator left"})),"Average time to convert"," "),A.funnel_viz_type===D.o.TimeToConvert&&r.a.createElement(va,null),r.a.createElement("span",{className:"text-muted-alt mr-025"},":"),r.a.createElement(Ot.a,{type:"link",onClick:function(){return Ie(D.o.TimeToConvert)},disabled:A.funnel_viz_type===D.o.TimeToConvert},r.a.createElement("span",{className:"l4"},Object(at.N)(G.averageTime))))]:[]),Cn()(A.funnel_viz_type===D.o.Trends?[r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),r.a.createElement(va,null))]:[]));return r.a.createElement(Ve.a,{className:"funnel-canvas-label",align:"middle"},Ne.map(function(ge,ie){return r.a.createElement(r.a.Fragment,{key:ie},ie>0&&r.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),ge)}))}function kn(j){var N=Object(ke.useState)(0),A=xn()(N,2),k=A[1];Object(ke.useEffect)(function(){var X=setInterval(function(){return k(function(G){return G+1})},j);return function(){return clearInterval(X)}})}var oa=3;function Kn(){var j=Object(T.useValues)(ce.c),N=j.lastRefresh,A=Object(T.useActions)(ce.c),k=A.loadResults;return kn(15e3),r.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",N?Object(Ge.a)(N).fromNow():"a while ago",r.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),r.a.createElement(en.a,{title:r.a.createElement(r.a.Fragment,null,"Insights can be refreshed",r.a.createElement("br",null),"every ",oa," minutes.")},r.a.createElement(Ot.a,{size:"small",type:"link",onClick:function(){return k(!0)},disabled:!!N&&Object(Ge.a)().subtract(oa-.5,"minutes").isBefore(N),style:{padding:0}},r.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var Wn=e("./frontend/src/scenes/trends/PersonsModal.tsx"),Rn=e("./frontend/src/scenes/trends/viz/index.ts"),ia=e("./frontend/src/scenes/trends/SaveCohortModal.tsx"),_n=e("./frontend/src/scenes/trends/trendsLogic.ts"),zn=e("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(j){}var Mn=e("./frontend/src/scenes/trends/personsModalLogic.ts"),Yn=e("./frontend/src/lib/utils/eventUsageLogic.ts"),E=e("./frontend/src/scenes/insights/insightSceneLogic.tsx");function x(j){var N=j.view,A=Object(T.useValues)(E.a),k=A.insightMode,X=Object(T.useValues)(ce.c),G=X.insightProps,ae=Object(T.useValues)(Mn.b),he=ae.cohortModalVisible,Ie=Object(T.useActions)(Mn.b),Ne=Ie.setCohortModalVisible,ge=Object(T.useValues)(Object(_n.a)(G)),ie=ge.filters,De=ge.loadMoreBreakdownUrl,Me=ge.breakdownValuesLoading,$e=ge.showModalActions,ut=ge.aggregationTargetLabel,Qe=Object(T.useActions)(Object(_n.a)(G)),on=Qe.loadMoreBreakdownValues,sn=Object(T.useValues)(Mn.b),$t=sn.showingPeople,ln=Object(T.useActions)(Mn.b),Kt=ln.saveCohortWithUrl,mt=Object(T.useActions)(Yn.f),kt=mt.reportCohortCreatedFromPersonsModal,tn=function(){if(!ie.display||ie.display===pe.d||ie.display===pe.c||ie.display===pe.a)return r.a.createElement(Rn.b,null);if(ie.display===pe.f)return r.a.createElement(T.BindLogic,{logic:_n.a,props:{dashboardItemId:null,view:N,filters:null}},r.a.createElement(zn.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(N),canEditSeriesNameInline:k===D.t.Edit,isMainInsightView:!0}));if(ie.display===pe.e)return r.a.createElement(Rn.c,null);if(ie.display===pe.b)return r.a.createElement(Rn.a,null)};return r.a.createElement(r.a.Fragment,null,(ie.actions||ie.events)&&r.a.createElement("div",{className:ie.display!==pe.f?"trends-insights-container":void 0},tn()),ie.breakdown&&r.a.createElement("div",{className:"mt text-center"},De?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-muted mb"},"For readability, ",r.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),r.a.createElement("div",null,r.a.createElement(Ot.a,{style:{textAlign:"center",marginBottom:16},onClick:on,loading:Me},"Load more breakdown values"))):r.a.createElement("span",{className:"text-muted"},"Showing ",r.a.createElement("b",null,"all breakdown values"))),r.a.createElement(Wn.a,{visible:$t&&!he,view:N,filters:ie,onSaveCohort:function(){Ne(!0)},showModalActions:$e,aggregationTargetLabel:ut}),r.a.createElement(ia.a,{visible:he,onOk:function(Ta){Kt(Ta),Ne(!1),kt(ie)},onCancel:function(){return Ne(!1)}}))}try{x.displayName="TrendInsight",x.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:x.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(j){}var I=e("./frontend/src/scenes/funnels/Funnel.tsx");function R(){var j=Object(T.useValues)(ce.c),N=j.insightProps,A=Object(T.useValues)(Object(qe.a)(N)),k=A.isValidFunnel,X=A.insightLoading,G=A.filters,ae=A.areFiltersValid,he=A.barGraphLayout,Ie=A.aggregationTargetLabel,Ne=Object(T.useValues)(Mn.b),ge=Ne.showingPeople,ie=Ne.cohortModalVisible,De=Object(T.useActions)(Mn.b),Me=De.setCohortModalVisible;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wn.a,{visible:ge&&!ie,view:D.s.FUNNELS,filters:G,onSaveCohort:function(){Me(!0)},showModalActions:G.aggregation_group_type_index==null,aggregationTargetLabel:Ie}),r.a.createElement("div",{className:Object($n.a)("funnel-insights-container",{"non-empty-state":k&&ae||X,"no-padding":G.funnel_viz_type==D.o.Steps&&he===pe.p.vertical})},r.a.createElement(I.a,null)))}var U=e("./frontend/src/scenes/retention/RetentionContainer.tsx"),te=e("./frontend/src/scenes/paths/Paths.tsx"),J=e("./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepTable.tsx"),L=e("./frontend/src/scenes/insights/EmptyStates/index.ts"),se=e("./frontend/src/lib/logic/featureFlagLogic.ts");function Y(){var j=Object(T.useValues)(ce.c),N=j.activeView;return N!==D.s.PATHS?null:r.a.createElement(Ve.a,{className:"funnel-canvas-label",align:"middle"},r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var He=e("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),tt=e("./node_modules/antd/lib/input/TextArea.js"),nt=e.n(tt),Le=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),we=e.n(Le),H={};H.insert="head",H.singleton=!1;var mn=un()(we.a,H),Zt=we.a.locals||{},gn=e("./node_modules/core-js/modules/es.number.constructor.js"),Tn=e("./node_modules/core-js/modules/es.number.is-integer.js"),be=e("./node_modules/core-js/modules/es.number.to-fixed.js"),pn=e("./node_modules/core-js/modules/es.regexp.exec.js"),hn=e("./node_modules/core-js/modules/es.string.split.js"),st=e("./node_modules/antd/es/spin/index.js"),Vt=e("./node_modules/antd/es/table/index.js"),bn=e("./node_modules/antd/lib/table/Column.js"),bt=e.n(bn),St=e("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},rn=Ut,Qn=function(N,A){return ke.createElement($.a,Object(xe.a)(Object(xe.a)({},N),{},{ref:A,icon:rn}))};Qn.displayName="FallOutlined";var sa=ke.forwardRef(Qn),ga=e("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),Jn=e("./frontend/src/lib/components/icons.tsx"),Ln=e("./node_modules/antd/lib/checkbox/Checkbox.js"),ha=e.n(Ln),En=e("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),Ft=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),An=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),na=e.n(An),Nn={};Nn.insert="head",Nn.singleton=!1;var wa=un()(na.a,Nn),Oa=na.a.locals||{},Sa=e("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function ya(j){var N=j.id,A=j.offset,k=j.children,X=Object(T.useActions)(Object(Sa.a)({id:N,offset:A})),G=X.scrolling,ae=Object(ke.useRef)(null);return Object(ke.useEffect)(function(){var he=ae.current;return document.addEventListener("scroll",function(){return G(he)}),function(){return document.removeEventListener("scroll",function(){return G(he)})}},[ae.current]),r.a.createElement("div",{ref:ae},k)}try{ya.displayName="VisibilitySensor",ya.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:ya.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(j){}var ma=e("./frontend/src/lib/components/LemonButton/index.ts"),Ca=e("./frontend/src/lib/components/Popup/Popup.tsx"),Pa=e("./node_modules/antd/es/modal/index.js"),xa=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),ba=e("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),Ia=e("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),f=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),m=e.n(f),O={};O.insert="head",O.singleton=!1;var g=un()(m.a,O),d=m.a.locals||{},v=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),s=e("./frontend/src/lib/components/Link.tsx"),l=e("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function c(){var j=Object(T.useValues)(ce.c),N=j.insightProps,A=Object(qe.a)(N),k=Object(T.useValues)(A),X=k.correlationsLoading,G=k.funnelCorrelationDetails,ae=k.parseDisplayNameForCorrelation,he=k.correlationMatrixAndScore,Ie=Object(T.useActions)(A),Ne=Ie.setFunnelCorrelationDetails,ge=Ie.openCorrelationPersonsModal,ie=(G==null?void 0:G.result_type)===D.k.Events?"event":"property",De=(G==null?void 0:G.result_type)===D.k.Events?"performed event":"have property",Me=r.a.createElement(r.a.Fragment,null);if(G){var $e=ae(G),ut=$e.first_value,Qe=$e.second_value;Me=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft.b,{value:ut}),Qe!==void 0&&r.a.createElement(r.a.Fragment,null," :: ",r.a.createElement(Ft.b,{value:Qe,disablePopover:!0})))}var on=he.correlationScore,sn=he.truePositive,$t=he.falsePositive,ln=he.trueNegative,Kt=he.falseNegative,mt=he.correlationScoreStrength,kt=mt==="strong"?r.a.createElement(xa.a,{style:{color:"var(--success)"}}):mt==="moderate"?r.a.createElement(ba.a,{style:{color:"var(--warning)"}}):r.a.createElement(Ia.a,{style:{color:"var(--danger)"}}),tn=function(){return Ne(null)};return r.a.createElement(Pa.a,{className:"correlation-matrix",visible:!!G,onCancel:tn,destroyOnClose:!0,footer:r.a.createElement(Ot.a,{onClick:tn},"Dismiss"),width:600,title:"Correlation details"},r.a.createElement("div",{className:"correlation-table-wrapper"},X?r.a.createElement("div",{className:"mt text-center"},r.a.createElement(v.a,{size:"lg"})):G?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",De," ",r.a.createElement("b",null,Me),"."),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-title"},r.a.createElement("td",{colSpan:3},"Results matrix")),r.a.createElement("tr",null,r.a.createElement("td",null,(G==null?void 0:G.result_type)===D.k.Events?"Performed event":"Has property"),r.a.createElement("td",null,"Success"),r.a.createElement("td",null,"Dropped off"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"horizontal-header"},"Yes"),r.a.createElement("td",null,r.a.createElement(Fe.a,{title:"True positive (TP) - Percentage of users who ".concat(De," and completed the funnel.")},r.a.createElement("div",{className:"percentage"},sn?Object(at.ob)(sn/(sn+$t)):"0.00%")),sn===0?"0 users":r.a.createElement(s.a,{onClick:function(){ge(G,!0)}},Object(at.qb)(sn,"user",void 0,!0,!0))),r.a.createElement("td",null,r.a.createElement("div",{className:"percentage"},r.a.createElement(Fe.a,{title:"False negative (FN) - Percentage of users who ".concat(De," and did not complete the funnel.")},Kt?Object(at.ob)(Kt/(Kt+ln)):"0.00%")),Kt===0?"0 users":r.a.createElement(s.a,{onClick:function(){ge(G,!1)}},Object(at.qb)(Kt,"user",void 0,!0,!0)))),r.a.createElement("tr",null,r.a.createElement("td",{className:"horizontal-header"},"No"),r.a.createElement("td",null,r.a.createElement("div",{className:"percentage"},r.a.createElement(Fe.a,{title:"False positive (FP) - Percentage of users who did not ".concat(De," and completed the funnel.")},$t?Object(at.ob)($t/(sn+$t)):"0.00%")),Object(at.qb)($t,"user",void 0,!0,!0)),r.a.createElement("td",null,r.a.createElement("div",{className:"percentage"},r.a.createElement(Fe.a,{title:"True negative (TN) - Percentage of users who did not ".concat(De," and did not complete the funnel.")},ln?Object(at.ob)(ln/(Kt+ln)):"0.00%")),Object(at.qb)(ln,"user",void 0,!0,!0))),r.a.createElement("tr",null,r.a.createElement("td",{className:"horizontal-header"}),r.a.createElement("td",null,r.a.createElement("b",null,"100%")),r.a.createElement("td",null,r.a.createElement("b",null,"100%"))))),r.a.createElement("div",{className:"mt text-center"},Object(at.j)((G==null?void 0:G.result_type)||"")," ",r.a.createElement("b",null,Me)," ","has a"," ",(G==null?void 0:G.correlation_type)===D.l.Success?r.a.createElement("b",{className:"text-success"},"positive"," ",r.a.createElement(Fe.a,{title:"Positive correlation means this ".concat(ie," is correlated with a successful conversion.")},r.a.createElement(Tt.a,{className:"cursor-pointer"}))):r.a.createElement("b",{className:"text-danger"},"negative"," ",r.a.createElement(Fe.a,{title:"Negative correlation means this ".concat(ie," is correlated with an unsuccessful conversion (user dropped off).")},r.a.createElement(Tt.a,{className:"cursor-pointer"})))," ","correlation score of"," ",r.a.createElement("b",{style:{color:mt==="strong"?"var(--success)":mt==="moderate"?"var(--warning)":"var(--danger)"}},r.a.createElement(Fe.a,{title:"This ".concat(ie," has ").concat(mt," correlation.")},r.a.createElement("span",{style:{cursor:"pointer"}},kt," ",on.toFixed(3)))))):r.a.createElement("div",null,r.a.createElement(l.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function y(){var j=Object(T.useValues)(ce.c),N=j.insightProps,A=Object(qe.a)(N),k=Object(T.useValues)(A),X=k.stepsWithCount,G=k.correlationValues,ae=k.correlationTypes,he=k.eventHasPropertyCorrelations,Ie=k.eventWithPropertyCorrelationsValues,Ne=k.parseDisplayNameForCorrelation,ge=k.correlationsLoading,ie=k.eventWithPropertyCorrelationsLoading,De=k.nestedTableExpandedKeys,Me=k.correlationPropKey,$e=k.filters,ut=k.aggregationTargetLabel,Qe=Object(T.useActions)(A),on=Qe.setCorrelationTypes,sn=Qe.loadEventWithPropertyCorrelations,$t=Qe.addNestedTableExpandedKey,ln=Qe.removeNestedTableExpandedKey,Kt=Qe.openCorrelationPersonsModal,mt=Qe.loadCorrelations,kt=Object(T.useActions)(Yn.f),tn=kt.reportCorrelationInteraction;Object(ke.useEffect)(function(){mt({})},[$e]);var Ea=function(_t){ae?ae.includes(_t)?on(ae.filter(function(wn){return wn!==_t})):on([].concat(Cn()(ae),[_t])):on([_t])},Ta=function(_t){var wn=function(Ma){return Ma<10&&!Number.isInteger(Ma)?Ma.toFixed(1):Ma.toFixed()},qn=_t.correlation_type===D.l.Success,Vn=Ne(_t),ja=Vn.first_value,Na=Vn.second_value;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,qn?r.a.createElement(St.a,{style:{color:"green"}}):r.a.createElement(sa,{style:{color:"red"}})," ",r.a.createElement(Ft.b,{value:ja}),Na!==void 0&&r.a.createElement(r.a.Fragment,null," :: ",r.a.createElement(Ft.b,{value:Na,disablePopover:!0}))),r.a.createElement("div",null,Object(at.j)(ut.plural)," ",$e.aggregation_group_type_index!=null?"that":"who"," converted were"," ",r.a.createElement("mark",null,r.a.createElement("b",null,wn(_t.odds_ratio),"x ",qn?"more":"less"," likely"))," ","to"," ",_t.result_type===D.k.EventWithProperties?"have this event property":"do this event"),r.a.createElement(c,null))},aa=function(_t){return r.a.createElement(En.c,{onClick:function(){Kt(_t,!0)}},_t.success_count)},cn=function(_t){return r.a.createElement(En.c,{onClick:function(){Kt(_t,!1)}},_t.failure_count)},Gn=function(_t){return ie?r.a.createElement("div",{className:"nested-properties-loading"},r.a.createElement(st.a,null),r.a.createElement("h3",null,"Loading correlation results"),r.a.createElement("p",null,"This process can take up to 20 seconds. ")):r.a.createElement("div",null,r.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),r.a.createElement(Vt.a,{dataSource:Ie[_t],rowKey:function(qn){return qn.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(qn,Vn){return tn(D.k.EventWithProperties,"pagination change",{page:qn,page_size:Vn})}}},r.a.createElement(bt.a,{title:"Property",key:"eventName",render:function(qn,Vn){return Ta(Vn)},align:"left"}),r.a.createElement(bt.a,{title:"Completed",key:"success_count",render:function(qn,Vn){return aa(Vn)},width:90,align:"center"}),r.a.createElement(bt.a,{title:"Dropped off",key:"failure_count",render:function(qn,Vn){return cn(Vn)},width:120,align:"center"}),r.a.createElement(bt.a,{title:"",key:"actions",render:function(qn,Vn){return r.a.createElement(w,{record:Vn})},align:"center",width:30})))};return X.length>1?r.a.createElement(ya,{id:Me,offset:152},r.a.createElement("div",{className:"funnel-correlation-table"},r.a.createElement("span",{className:"funnel-correlation-header"},r.a.createElement("span",{className:"table-header"},r.a.createElement(Jn.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),r.a.createElement("span",{className:"table-options"},r.a.createElement("p",{className:"title"},"CORRELATION"),r.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return Ea(D.l.Success)}},r.a.createElement(ha.a,{checked:ae.includes(D.l.Success),style:{pointerEvents:"none"}},"Success")),r.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return Ea(D.l.Failure)}},r.a.createElement(ha.a,{checked:ae.includes(D.l.Failure),style:{pointerEvents:"none"}},"Dropoff")))),r.a.createElement(Vt.a,{dataSource:G,loading:ge,size:"small",scroll:{x:"max-content"},rowKey:function(_t){return _t.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return tn(D.k.Events,"load more")}},expandable:{expandedRowRender:function(_t){return Gn(_t.event.event)},expandedRowKeys:De,rowExpandable:function(){return $e.aggregation_group_type_index===void 0},expandIcon:function(_t){var wn=_t.expanded,qn=_t.onExpand,Vn=_t.record,ja=_t.expandable;return ja?wn?r.a.createElement(Fe.a,{title:"Collapse"},r.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Ra){ln(Vn.event.event),qn(Vn,Ra)}},r.a.createElement(Jn.IconUnfoldLess,null))):r.a.createElement(Fe.a,{title:"Expand to see correlated properties for this event"},r.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Ra){!he(Vn.event.event)&&sn(Vn.event.event),$t(Vn.event.event),qn(Vn,Ra)}},r.a.createElement(Jn.IconUnfoldMore,null))):null}}},r.a.createElement(bt.a,{title:"Event",key:"eventName",render:function(_t,wn){return Ta(wn)},align:"left",ellipsis:!0}),r.a.createElement(bt.a,{title:r.a.createElement("div",{className:"flex-center"},"Completed",r.a.createElement(Fe.a,{title:"".concat(Object(at.j)(ut.plural)," ").concat($e.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},r.a.createElement(Tt.a,{className:"column-info"}))),key:"success_count",render:function(_t,wn){return aa(wn)},width:90,align:"center"}),r.a.createElement(bt.a,{title:r.a.createElement("div",{className:"flex-center"},"Dropped off",r.a.createElement(Fe.a,{title:r.a.createElement(r.a.Fragment,null,Object(at.j)(ut.plural)," ",$e.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",r.a.createElement("b",null,"not complete")," the entire funnel.")},r.a.createElement(Tt.a,{className:"column-info"}))),key:"failure_count",render:function(_t,wn){return cn(wn)},width:120,align:"center"}),r.a.createElement(bt.a,{title:"",key:"actions",render:function(_t,wn){return r.a.createElement(w,{record:wn})},width:30})))):null}var w=function(N){var A=N.record,k=Object(T.useValues)(ce.c),X=k.insightProps,G=Object(qe.a)(X),ae=Object(T.useActions)(G),he=ae.excludeEventPropertyFromProject,Ie=ae.excludeEventFromProject,Ne=ae.setFunnelCorrelationDetails,ge=Object(T.useValues)(G),ie=ge.isEventPropertyExcluded,De=ge.isEventExcluded,Me=A.event.event.split("::"),$e=Object(ke.useState)(!1),ut=xn()($e,2),Qe=ut[0],on=ut[1];return r.a.createElement(Ve.a,{style:{justifyContent:"flex-end"}},r.a.createElement(Ca.a,{visible:Qe,actionable:!0,onClickOutside:function(){return on(!1)},overlay:r.a.createElement(r.a.Fragment,null,A.result_type===D.k.Events&&r.a.createElement(ma.a,{onClick:function(){return Ne(A)},fullWidth:!0,type:"stealth"},"View correlation details"),r.a.createElement(ma.a,{disabled:A.result_type===D.k.EventWithProperties?ie(Me[1]):De(Me[0]),onClick:function(){return A.result_type===D.k.EventWithProperties?he(Me[0],Me[1]):Ie(Me[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},r.a.createElement(ma.a,{type:"stealth",onClick:function(){return on(!Qe)}},r.a.createElement(ga.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},a=e("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function n(){var j=Object(T.useValues)(ce.c),N=j.insightProps,A=Object(qe.a)(N),k=Object(T.useValues)(A),X=k.stepsWithCount,G=k.propertyCorrelationValues,ae=k.propertyCorrelationTypes,he=k.excludedPropertyNames,Ie=k.parseDisplayNameForCorrelation,Ne=k.propertyCorrelationsLoading,ge=k.inversePropertyNames,ie=k.propertyNames,De=k.correlationPropKey,Me=k.allProperties,$e=k.filters,ut=k.aggregationTargetLabel,Qe=Object(T.useActions)(A),on=Qe.setPropertyCorrelationTypes,sn=Qe.setPropertyNames,$t=Qe.openCorrelationPersonsModal,ln=Qe.loadPropertyCorrelations,Kt=Object(T.useActions)(Yn.f),mt=Kt.reportCorrelationInteraction;Object(ke.useEffect)(function(){ie.length===0&&sn(Me),ln({})},[$e]);var kt=function(cn){ae?ae.includes(cn)?on(ae.filter(function(Gn){return Gn!==cn})):on([].concat(Cn()(ae),[cn])):on([cn])},tn=function(cn){return r.a.createElement(En.c,{onClick:function(){$t(cn,!0)}},cn.success_count)},Ea=function(cn){return r.a.createElement(En.c,{onClick:function(){$t(cn,!1)}},cn.failure_count)},Ta=function(cn){var Gn=function(ja){return ja<10&&!Number.isInteger(ja)?ja.toFixed(1):ja.toFixed()},Hn=cn.correlation_type===D.l.Success,_t=Ie(cn),wn=_t.first_value,qn=_t.second_value;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,Hn?r.a.createElement(St.a,{style:{color:"green"}}):r.a.createElement(sa,{style:{color:"red"}})," ",r.a.createElement(Ft.b,{value:wn}),qn!==void 0&&r.a.createElement(r.a.Fragment,null," :: ",r.a.createElement(Ft.b,{value:qn,disablePopover:!0}))),r.a.createElement("div",null,Object(at.j)(ut.plural)," ",$e.aggregation_group_type_index!=null?"that":"who"," converted were"," ",r.a.createElement("mark",null,r.a.createElement("b",null,Gn(cn.odds_ratio),"x ",Hn?"more":"less"," likely"))," ","to have this property value"))};return X.length>1?r.a.createElement(ya,{offset:150,id:"".concat(De,"-properties")},r.a.createElement("div",{className:"funnel-correlation-table"},r.a.createElement(Ve.a,{className:"funnel-correlation-header"},r.a.createElement(F.a,{className:"table-header"},r.a.createElement(Jn.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),r.a.createElement(F.a,{className:"table-options"},r.a.createElement(Ve.a,{style:{display:"contents"}},Me.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"title"},"PROPERTIES "),r.a.createElement(a.a,{value:new Set(ie),onChange:function(cn){return sn(cn)},allProperties:ge(he||[])}))),r.a.createElement(Ve.a,{style:{display:"contents"}},r.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),r.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return kt(D.l.Success)}},r.a.createElement(ha.a,{checked:ae.includes(D.l.Success),style:{pointerEvents:"none"}},"Success")),r.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return kt(D.l.Failure)}},r.a.createElement(ha.a,{checked:ae.includes(D.l.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),r.a.createElement(Vt.a,{dataSource:G,loading:Ne,scroll:{x:"max-content"},size:"small",rowKey:function(cn){return cn.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(cn,Gn){return mt(D.k.Properties,"pagination change",{page:cn,page_size:Gn})}}},r.a.createElement(bt.a,{title:"".concat(Object(at.j)(ut.singular)," property"),key:"propertName",render:function(cn,Gn){return Ta(Gn)},align:"left"}),r.a.createElement(bt.a,{title:r.a.createElement("div",{className:"flex-center"},"Completed",r.a.createElement(Fe.a,{title:"".concat(Object(at.j)(ut.plural)," ").concat($e.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},r.a.createElement(Tt.a,{className:"column-info"}))),key:"success_count",render:function(cn,Gn){return tn(Gn)},width:90,align:"center"}),r.a.createElement(bt.a,{title:r.a.createElement("div",{className:"flex-center"},"Dropped off",r.a.createElement(Fe.a,{title:r.a.createElement(r.a.Fragment,null,Object(at.j)(ut.plural)," ",$e.aggregation_group_type_index!=null?"that":"who"," have this property and did ",r.a.createElement("b",null,"not complete")," the entire funnel.")},r.a.createElement(Tt.a,{className:"column-info"}))),key:"failure_count",render:function(cn,Gn){return Ea(Gn)},width:120,align:"center"}),r.a.createElement(bt.a,{title:"",key:"actions",render:function(cn,Gn){return r.a.createElement(t,{record:Gn})},align:"center",width:30})))):null}var t=function(N){var A=N.record,k=Object(T.useValues)(ce.c),X=k.insightProps,G=Object(qe.a)(X),ae=Object(T.useActions)(G),he=ae.excludePropertyFromProject,Ie=ae.setFunnelCorrelationDetails,Ne=Object(T.useValues)(G),ge=Ne.isPropertyExcludedFromProject,ie=(A.event.event||"").split("::")[0],De=Object(ke.useState)(!1),Me=xn()(De,2),$e=Me[0],ut=Me[1];return r.a.createElement(Ve.a,{style:{justifyContent:"flex-end"}},r.a.createElement(Ca.a,{visible:$e,actionable:!0,onClickOutside:function(){return ut(!1)},overlay:r.a.createElement(r.a.Fragment,null,r.a.createElement(ma.a,{onClick:function(){return Ie(A)},fullWidth:!0,type:"stealth"},"View correlation details"),r.a.createElement(ma.a,{disabled:ge(ie),onClick:function(){return he(ie)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},r.a.createElement(ma.a,{type:"stealth",onClick:function(){return ut(!$e)}},r.a.createElement(ga.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},i=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),u=e("./frontend/src/lib/components/PayCard/PayCard.tsx"),h=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),b=function(){var N,A=Object(T.useValues)(ce.c),k=A.insightProps,X=Object(T.useValues)(Object(qe.a)(k)),G=X.isSkewed,ae=X.stepsWithCount,he=X.correlationFeedbackHidden,Ie=X.correlationDetailedFeedbackVisible,Ne=X.correlationFeedbackRating,ge=X.correlationAnalysisAvailable,ie=X.aggregationTargetLabel,De=Object(T.useActions)(Object(qe.a)(k)),Me=De.sendCorrelationAnalysisFeedback,$e=De.hideSkewWarning,ut=De.hideCorrelationAnalysisFeedback,Qe=De.setCorrelationFeedbackRating,on=De.setCorrelationDetailedFeedback,sn=Object(T.useValues)(h.a),$t=sn.preflight,ln=Object(ke.useRef)(null);return ae.length<=1?null:!ge&&!(!($t==null||(N=$t.instance_preferences)===null||N===void 0)&&N.disable_paid_fs)?r.a.createElement(u.a,{identifier:D.c.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(ie.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(ie.plural," are converting or dropping off.")}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"funnel-correlation"},G&&r.a.createElement(Ke.a,{className:"skew-warning"},r.a.createElement("h4",null,r.a.createElement(Jn.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",r.a.createElement(i.a,{className:"close-button",onClick:$e})),r.a.createElement("div",null,r.a.createElement("b",null,"Tips for adjusting your funnel:"),r.a.createElement("ol",null,r.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),r.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),r.a.createElement(y,null),!he&&r.a.createElement(Ke.a,{className:"correlation-feedback"},r.a.createElement(Ve.a,{className:"row-initial"},r.a.createElement(F.a,{span:14},r.a.createElement("h4",null,r.a.createElement(He.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),r.a.createElement(F.a,{span:9,style:{alignContent:"right"}},!!Ne&&r.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(Kt,mt){return r.a.createElement(Ot.a,{key:mt,className:"emoji-button",style:Ne===Kt[0]?{background:"#5375FF"}:Ne?{display:"none"}:{},onClick:function(){Ne===Kt[0]?Qe(0):(Qe(Kt[0]),setTimeout(function(){var tn;return(tn=ln.current)===null||tn===void 0?void 0:tn.focus()},100))}},Kt[1])})),r.a.createElement(F.a,{span:1},r.a.createElement(i.a,{className:"close-button",onClick:ut}))),r.a.createElement("div",{style:{display:Ie?void 0:"none"}},r.a.createElement("form",{onSubmit:Me},r.a.createElement(nt.a,{onBlur:function(mt){return on(mt.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:ln,onKeyDown:function(mt){if(mt.key==="Enter"&&mt.metaKey){var kt;(kt=ln.current)===null||kt===void 0||kt.blur(),Me()}}}),r.a.createElement("div",{className:"text-right"},r.a.createElement(Ot.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),r.a.createElement(n,null)))},S=e("./node_modules/core-js/modules/es.regexp.to-string.js"),C=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),M=e.n(C),K={};K.insert="head",K.singleton=!1;var _=un()(M.a,K),B=M.a.locals||{},re=e("./frontend/src/lib/components/InsightLabel/index.tsx"),ne=e("./frontend/src/lib/colors.ts"),le=e("./frontend/src/lib/components/PHCheckbox.tsx");function ve(){var j=Object(T.useValues)(ce.c),N=j.filters,A=j.activeView,k=Object(T.useActions)(ce.c),X=k.toggleInsightLegend,G=Object(T.useValues)(se.a),ae=G.featureFlags;return(A===D.s.TRENDS||A===D.s.STICKINESS)&&ae[pe.n.INSIGHT_LEGENDS]?r.a.createElement(Ot.a,{className:"insight-legend-button",onClick:X},r.a.createElement(Jn.IconLegend,null),r.a.createElement("span",{className:"insight-legend-button-title"},N.show_legend?"Hide":"Show"," legend")):null}function Se(){var j=Object(T.useValues)(ce.c),N=j.insightProps,A=j.filters,k=Object(_n.a)(N),X=Object(T.useValues)(k),G=X.indexedResults,ae=X.hiddenLegendKeys,he=Object(T.useActions)(k),Ie=he.toggleVisibility,Ne=Object(ne.c)("white",G.length,!!A.compare);return r.a.createElement("div",{className:"insight-legend-menu"},r.a.createElement("div",{className:"insight-legend-menu-scroll"},G&&G.map(function(ge){var ie,De;return r.a.createElement(Ve.a,{key:ge.id,className:"insight-legend-menu-item",wrap:!1},r.a.createElement("div",{className:"insight-legend-menu-item-inner",onClick:function(){return Ie(ge.id)}},r.a.createElement(F.a,null,r.a.createElement(le.a,{color:Ne[ge.id],checked:!ae[ge.id],onChange:function(){}})),r.a.createElement(F.a,null,r.a.createElement(re.b,{key:ge.id,seriesColor:Ne[ge.id],action:ge.action,fallbackName:ge.breakdown_value===""?"None":ge.label,hasMultipleSeries:G.length>1,breakdownValue:ge.breakdown_value===""?"None":(ie=ge.breakdown_value)===null||ie===void 0?void 0:ie.toString(),compareValue:A.compare?Object(zn.d)(ge):void 0,pillMidEllipsis:(ge==null||(De=ge.filter)===null||De===void 0?void 0:De.breakdown)==="$current_url",hideIcon:!0}))))})))}var me,ye=(me={},p()(me,"".concat(D.s.TRENDS),r.a.createElement(x,{view:D.s.TRENDS})),p()(me,"".concat(D.s.STICKINESS),r.a.createElement(x,{view:D.s.STICKINESS})),p()(me,"".concat(D.s.LIFECYCLE),r.a.createElement(x,{view:D.s.LIFECYCLE})),p()(me,"".concat(D.s.FUNNELS),r.a.createElement(R,null)),p()(me,"".concat(D.s.RETENTION),r.a.createElement(U.a,null)),p()(me,"".concat(D.s.PATHS),r.a.createElement(te.a,null)),me);function W(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1},N=j.disableHeader,A=j.disableTable,k=Object(T.useValues)(se.a),X=k.featureFlags,G=Object(T.useValues)(E.a),ae=G.insightMode,he=Object(T.useValues)(ce.c),Ie=he.insightProps,Ne=he.canEditInsight,ge=he.insightLoading,ie=he.activeView,De=he.loadedView,Me=he.filters,$e=he.showTimeoutMessage,ut=he.showErrorMessage,Qe=Object(T.useValues)(Object(qe.a)(Ie)),on=Qe.areFiltersValid,sn=Qe.isValidFunnel,$t=Qe.areExclusionFiltersValid,ln=Qe.correlationAnalysisAvailable,Kt=function(){if(ie!==De||ge&&!$e)return r.a.createElement(r.a.Fragment,null,Me.display!==pe.f&&r.a.createElement("div",{className:"trends-insights-container"}),r.a.createElement(at.b,null));if(De===D.s.FUNNELS){if(!on)return r.a.createElement(L.b,{actionable:ae===D.t.Edit||A});if(!$t)return r.a.createElement(L.a,null);if(!sn&&!ge)return r.a.createElement(L.c,null)}return ut?r.a.createElement(L.d,null):$e?r.a.createElement(L.e,{isLoading:ge}):null}();function mt(){return ie===D.s.FUNNELS&&!ut&&!$e&&on&&Me.funnel_viz_type===D.o.Steps&&(Me==null?void 0:Me.layout)===pe.p.horizontal&&!A?r.a.createElement(J.a,null):(!Me.display||(Me==null?void 0:Me.display)!==pe.f&&(Me==null?void 0:Me.display)!==pe.b)&&ie===D.s.TRENDS&&!A?r.a.createElement(T.BindLogic,{logic:_n.a,props:Ie},r.a.createElement(zn.b,{isLegend:!0,showTotalCount:!0,filterKey:ie===D.s.TRENDS?"trends_".concat(ie):"",canEditSeriesNameInline:ie===D.s.TRENDS&&ae===D.t.Edit,canCheckUncheckSeries:!Ne})):null}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke.a,{title:N?null:r.a.createElement(Te,{activeView:ie,insightMode:ae,filters:Me,disableTable:!!A,disabled:!Ne}),"data-attr":"insights-graph",className:"insights-graph-container"},r.a.createElement("div",null,r.a.createElement(Ve.a,{className:Object($n.a)("insights-graph-header",{funnels:ie===D.s.FUNNELS}),align:"middle",justify:"space-between"},r.a.createElement(F.a,null,r.a.createElement(Kn,null)),r.a.createElement(F.a,null,ie===D.s.FUNNELS?r.a.createElement(Un,null):null,ie===D.s.PATHS?r.a.createElement(Y,null):null,r.a.createElement(ve,null))),Kt||(X[pe.n.INSIGHT_LEGENDS]&&(ie===D.s.TRENDS||ie===D.s.STICKINESS)&&Me.show_legend?r.a.createElement(Ve.a,{className:"insights-graph-container-row",wrap:!1},r.a.createElement(F.a,{className:"insights-graph-container-row-left"},ye[ie]),r.a.createElement(F.a,{className:"insights-graph-container-row-right"},r.a.createElement(Se,null))):ye[ie]))),mt(),!A&&ln&&ie===D.s.FUNNELS&&r.a.createElement(b,null))}try{W.displayName="InsightContainer",W.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:W.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(j){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(Ee,q,e){"use strict";e.d(q,"a",function(){return wt});var oe=e("./node_modules/core-js/modules/es.array.iterator.js"),p=e.n(oe),Ke=e("./node_modules/core-js/modules/es.object.to-string.js"),Ve=e.n(Ke),F=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Be=e.n(F),Z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ke=e.n(Z),r=e("./node_modules/kea/lib/index.esm.js"),T=e("./frontend/src/scenes/insights/insightLogic.ts"),vt=e("./frontend/src/scenes/insights/sharedUtils.ts");function Q(Xe,xe){var fe=Object.keys(Xe);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(Xe);xe&&(P=P.filter(function($){return Object.getOwnPropertyDescriptor(Xe,$).enumerable})),fe.push.apply(fe,P)}return fe}function je(Xe){for(var xe=1;xe<arguments.length;xe++){var fe=arguments[xe]!=null?arguments[xe]:{};xe%2?Q(Object(fe),!0).forEach(function(P){ke()(Xe,P,fe[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Xe,Object.getOwnPropertyDescriptors(fe)):Q(Object(fe)).forEach(function(P){Object.defineProperty(Xe,P,Object.getOwnPropertyDescriptor(fe,P))})}return Xe}var wt=Object(r.kea)({props:{},key:Object(vt.c)("new"),path:function(xe){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",xe]},connect:function(xe){return{actions:[Object(T.c)(xe),["setFilters"]],values:[Object(T.c)(xe),["filters"]]}},actions:function(){return{setDates:function(fe,P){return{dateFrom:fe,dateTo:P}}}},selectors:{dates:[function(Xe){return[Xe.filters]},function(Xe){return{dateFrom:(Xe==null?void 0:Xe.date_from)||null,dateTo:(Xe==null?void 0:Xe.date_to)||null}}]},listeners:function(xe){var fe=xe.actions,P=xe.values;return{setDates:function(Ye){var _e=Ye.dateFrom,Et=Ye.dateTo;fe.setFilters(je(je({},P.filters),{},{date_from:_e||null,date_to:Et||null}))}}}})},"./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return w});var oe=e("./node_modules/react/index.js"),p=e.n(oe),Ke=e("./frontend/src/lib/components/Drawer.tsx"),Ve=e("./node_modules/core-js/modules/es.object.to-string.js"),F=e("./node_modules/core-js/modules/es.regexp.to-string.js"),Be=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Z=e.n(Be),ke=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/styles.scss"),r=e.n(ke),T={};T.insert="head",T.singleton=!1;var vt=Z()(r.a,T),Q=r.a.locals||{},je=e("./node_modules/kea/lib/index.esm.js"),wt=e("./node_modules/core-js/modules/es.array.index-of.js"),Xe=e("./node_modules/core-js/modules/es.array.iterator.js"),xe=e("./node_modules/core-js/modules/es.array.slice.js"),fe=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),P=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),$=e.n(P),Ye=e("./node_modules/@babel/runtime/regenerator/index.js"),_e=e.n(Ye),Et=e("./node_modules/regenerator-runtime/runtime.js"),ct=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),de=e.n(ct),Ze=e("./node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/index.js"),Oe=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Re=e("./frontend/src/types.ts"),It=e("./frontend/src/lib/utils/responsiveUtils.tsx"),lt=e("./node_modules/core-js/modules/es.array.concat.js"),pt=e("./node_modules/core-js/modules/es.array.for-each.js"),D=e("./node_modules/core-js/modules/es.array.includes.js"),at=e("./node_modules/core-js/modules/es.array.join.js"),ce=e("./node_modules/core-js/modules/es.array.map.js"),Dt=e("./node_modules/core-js/modules/es.object.entries.js"),o=e("./node_modules/core-js/modules/es.object.values.js"),nn=e("./node_modules/core-js/modules/es.regexp.exec.js"),Bt=e("./node_modules/core-js/modules/es.string.ends-with.js"),Wt=e("./node_modules/core-js/modules/es.string.includes.js"),V=e("./node_modules/core-js/modules/es.string.iterator.js"),Jt=e("./node_modules/core-js/modules/es.string.replace.js"),xn=e("./node_modules/core-js/modules/es.string.search.js"),ca=e("./node_modules/core-js/modules/es.string.split.js"),la=e("./node_modules/core-js/modules/es.string.starts-with.js"),On=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Xn=e("./node_modules/core-js/modules/web.url.js"),Fn=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Zn=e.n(Fn),Dn=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),We=e.n(Dn),gt=e("./node_modules/fuse.js/dist/fuse.esm.js"),rt=e("./frontend/src/lib/api.ts"),pe=e("./frontend/src/lib/utils.tsx"),Sn=e("./frontend/src/scenes/teamLogic.ts"),Nt=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Je=e("./frontend/src/lib/dayjs.ts"),ot=e("./node_modules/core-js/modules/es.array.from.js"),Pt=e("./node_modules/core-js/modules/es.function.name.js");function ft(a,n){var t;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(t=ze(a))||n&&a&&typeof a.length=="number"){t&&(a=t);var i=0,u=function(){};return{s:u,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(M){throw M},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=!0,b=!1,S;return{s:function(){t=a[Symbol.iterator]()},n:function(){var M=t.next();return h=M.done,M},e:function(M){b=!0,S=M},f:function(){try{!h&&t.return!=null&&t.return()}finally{if(b)throw S}}}}function ze(a,n){if(!!a){if(typeof a=="string")return qt(a,n);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qt(a,n)}}function qt(a,n){(n==null||n>a.length)&&(n=a.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=a[t];return i}var Qt=15,Ct=Qt/2;function Fe(a){return"touches"in a}function Ge(a){return"clientX"in a}var Mt=function(n){if(Fe(n)){var t,i,u,h,b;return(t=n==null||(i=n.touches)===null||i===void 0||(u=i[0])===null||u===void 0?void 0:u.pageX)!==null&&t!==void 0?t:n==null||(h=n.changedTouches)===null||h===void 0||(b=h[0])===null||b===void 0?void 0:b.pageX}return Ge(n)?n==null?void 0:n.clientX:0};function zt(a,n,t){if(a.windowId===n.windowId)return a.time-n.time;var i=ft(t),u;try{for(i.s();!(u=i.n()).done;){var h=u.value;if(a.windowId===h.windowId&&a.time>=h.startPlayerPosition.time&&a.time<=h.endPlayerPosition.time)return-1;if(n.windowId===h.windowId&&n.time>=h.startPlayerPosition.time&&n.time<=h.endPlayerPosition.time)return 1}}catch(b){i.e(b)}finally{i.f()}throw"Could not find player positions in segments"}function qe(a,n){var t=ft(n),i;try{for(t.s();!(i=t.n()).done;){var u=i.value;if(a.windowId===u.windowId&&a.time>=u.startPlayerPosition.time&&a.time<=u.endPlayerPosition.time)return u}}catch(h){t.e(h)}finally{t.f()}return null}function At(a,n){var t=0,i=ft(n),u;try{for(i.s();!(u=i.n()).done;){var h=u.value;if(a.windowId===h.windowId&&a.time>=h.startPlayerPosition.time&&a.time<=h.endPlayerPosition.time)return t+a.time-h.startPlayerPosition.time;t+=h.durationMs}}catch(b){i.e(b)}finally{i.f()}return null}function dt(a,n){var t=0,i=ft(n),u;try{for(i.s();!(u=i.n()).done;){var h=u.value;if(t+h.durationMs>a)return{windowId:h.windowId,time:a-t+h.startPlayerPosition.time};t+=h.durationMs}}catch(b){i.e(b)}finally{i.f()}return a===t&&n.length>0?n.slice(-1)[0].endPlayerPosition:null}function xt(a,n,t){if(t&&n in t){var i=t[n].startTimeEpochMs,u=t[n].endTimeEpochMs;return i>a||u<a?null:{windowId:n,time:a-i}}return null}function ht(a,n){if(a.windowId in n){var t=n[a.windowId].startTimeEpochMs;return t+a.time}return null}var Yt=function(n,t,i,u){var h=n/t*u;return dt(h,i)},ue=function(n,t,i,u){var h=At(n,i);return(h!=null?h:0)/u*t},In=e("./frontend/src/lib/components/lemonToast.tsx"),Cn=e("./node_modules/fast-deep-equal/index.js"),ea=e.n(Cn),$n=e("./frontend/src/lib/logic/featureFlagLogic.ts"),jn=e("./frontend/src/lib/constants.tsx");function ta(a,n){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);n&&(i=i.filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable})),t.push.apply(t,i)}return t}function Gt(a){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?ta(Object(t),!0).forEach(function(i){Zn()(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ta(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function z(a,n){var t;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(t=ee(a))||n&&a&&typeof a.length=="number"){t&&(a=t);var i=0,u=function(){};return{s:u,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(M){throw M},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=!0,b=!1,S;return{s:function(){t=a[Symbol.iterator]()},n:function(){var M=t.next();return h=M.done,M},e:function(M){b=!0,S=M},f:function(){try{!h&&t.return!=null&&t.return()}finally{if(b)throw S}}}}function ee(a,n){if(!!a){if(typeof a=="string")return Ae(a,n);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ae(a,n)}}function Ae(a,n){(n==null||n>a.length)&&(n=a.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=a[t];return i}var Ce=!1,Rt="rrweb/console@1",Pe=function(n){var t=n.segments.map(function(u){var h=+Object(Je.a)(n.start_and_end_times_by_window_id[u.window_id].start_time),b=+Object(Je.a)(u==null?void 0:u.start_time),S=+Object(Je.a)(u==null?void 0:u.end_time),C={windowId:u.window_id,time:b-h},M={windowId:u.window_id,time:S-h},K=S-b;return{startPlayerPosition:C,endPlayerPosition:M,durationMs:K,startTimeEpochMs:b,endTimeEpochMs:S,windowId:u.window_id,isActive:u.is_active}}),i={};return Object.entries(n.start_and_end_times_by_window_id).forEach(function(u){var h=We()(u,2),b=h[0],S=h[1];i[b]={startTimeEpochMs:+Object(Je.a)(S.start_time),endTimeEpochMs:+Object(Je.a)(S.end_time)}}),{segments:t,startAndEndTimesByWindowId:i,recordingDurationMs:Object(pe.zb)(t.map(function(u){return u.durationMs}))}},Ue=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=null;if(n&&t&&i){var h=z(n),b;try{for(h.s();!(b=h.n()).done;){var S,C=b.value,M=((S=t[C.windowId])!==null&&S!==void 0?S:[]).slice(-1).pop();if(M&&M.timestamp>=C.startTimeEpochMs){var K=i[C.windowId].startTimeEpochMs;u={windowId:C.windowId,time:Math.min(M.timestamp-K,C.endPlayerPosition.time)}}else return u}}catch(_){h.e(_)}finally{h.f()}}return u},Xt=function(n){return n.map(function(t){var i,u,h;return Gt(Gt({},t),{},{queryValue:"".concat((i=(u=(h=Object(Nt.d)(t.event,"event"))===null||h===void 0?void 0:h.label)!==null&&u!==void 0?u:t.event)!==null&&i!==void 0?i:""," ").concat(Object(pe.B)(t)).replace(/['"]+/g,"")})})},Lt=Object(je.kea)({path:["scenes","session-recordings","sessionRecordingLogic"],connect:{logic:[Oe.f],values:[Sn.a,["currentTeamId"],$n.a,["featureFlags"]]},actions:{setFilters:function(n){return{filters:n}},setSource:function(n){return{source:n}},reportUsage:function(n,t){return{recordingData:n,loadTime:t}},loadRecordingMeta:function(n){return{sessionRecordingId:n}},loadRecordingSnapshots:function(n,t){return{sessionRecordingId:n,url:t}},loadEvents:function(n){return{url:n}}},reducers:{filters:[{},{setFilters:function(n,t){var i=t.filters;return Gt(Gt({},n),i)}}],sessionRecordingId:[null,{loadRecording:function(n,t){var i=t.sessionRecordingId;return i!=null?i:null}}],chunkPaginationIndex:[0,{loadRecordingSnapshotsSuccess:function(n){return n+1}}],sessionEventsDataLoading:[!1,{loadEventsSuccess:function(n,t){var i=t.sessionEventsData;return!!(i!=null&&i.next)}}],source:[Oe.d.Unknown,{setSource:function(n,t){var i=t.source;return i}}]},listeners:function(n){var t=n.values,i=n.actions,u=n.sharedListeners,h=n.cache;return{loadRecordingMetaSuccess:function(){h.eventsStartTime=performance.now(),i.loadEvents()},loadRecordingSnapshotsSuccess:function(){var S;!((S=t.sessionPlayerData)===null||S===void 0)&&S.next?i.loadRecordingSnapshots(void 0,t.sessionPlayerData.next):Oe.f.actions.reportRecording(t.sessionPlayerData,t.source,performance.now()-h.startTime,Re.D.LOADED,0),t.chunkPaginationIndex===1&&i.reportUsage(t.sessionPlayerData,performance.now()-h.startTime)},loadEventsSuccess:function(){var S;if(!((S=t.sessionEventsData)===null||S===void 0)&&S.next)i.loadEvents(t.sessionEventsData.next);else{var C,M,K;Oe.f.actions.reportRecordingEventsFetched((C=(M=t.sessionEventsData)===null||M===void 0||(K=M.events)===null||K===void 0?void 0:K.length)!==null&&C!==void 0?C:0,performance.now()-h.eventsStartTime),h.eventsStartTime=null}},loadRecordingMetaFailure:u.showErrorToast,loadRecordingSnapshotsFailure:u.showErrorToast,loadEventsFailure:u.showErrorToast,reportUsage:function(){var b=de()(_e.a.mark(function C(M,K){var _,B;return _e.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return _=M.recordingData,B=M.loadTime,ne.next=3,K();case 3:return Oe.f.actions.reportRecording(_,t.source,B,Re.D.VIEWED,0),ne.next=6,K(Ce?1:1e4);case 6:Oe.f.actions.reportRecording(_,t.source,B,Re.D.ANALYZED,10);case 7:case"end":return ne.stop()}},C)}));function S(C,M){return b.apply(this,arguments)}return S}()}},sharedListeners:function(){return{showErrorToast:function(t){var i=t.error;In.a.error(i)}}},loaders:function(n){var t=n.values;return{sessionPlayerData:{loadRecordingMeta:function(){var i=de()(_e.a.mark(function h(b,S){var C,M,K,_,B,re,ne,le,ve,Se,me;return _e.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return re=b.sessionRecordingId,ne=Object(pe.Ab)({save_view:!0}),W.next=4,rt.a.get("api/projects/".concat(t.currentTeamId,"/session_recordings/").concat(re,"?").concat(ne));case 4:return le=W.sent,ve=(C=le.result)===null||C===void 0?void 0:C.session_recording,Se=Pe(ve),me=Ue(Se.segments,(M=t.sessionPlayerData)===null||M===void 0?void 0:M.snapshotsByWindowId,Se.startAndEndTimesByWindowId),S(),W.abrupt("return",Gt(Gt({},t.sessionPlayerData),{},{person:(K=le.result)===null||K===void 0?void 0:K.person,metadata:Se,bufferedTo:me,snapshotsByWindowId:(_=Gt({},(B=t.sessionPlayerData)===null||B===void 0?void 0:B.snapshotsByWindowId))!==null&&_!==void 0?_:{}}));case 10:case"end":return W.stop()}},h)}));function u(h,b){return i.apply(this,arguments)}return u}(),loadRecordingSnapshots:function(){var i=de()(_e.a.mark(function h(b,S){var C,M,K,_,B,re,ne,le,ve,Se,me,ye,W,j,N;return _e.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return ve=b.sessionRecordingId,Se=b.url,me=Se||"api/projects/".concat(t.currentTeamId,"/session_recordings/").concat(ve,"/snapshots?").concat(Object(pe.Ab)({limit:t.featureFlags[jn.n.TUNE_RECORDING_SNAPSHOT_LIMIT]?4:void 0})),k.next=4,rt.a.get(me);case 4:return ye=k.sent,S(),W=Gt({},(C=(M=t.sessionPlayerData)===null||M===void 0?void 0:M.snapshotsByWindowId)!==null&&C!==void 0?C:{}),j=(K=ye.result)===null||K===void 0?void 0:K.snapshot_data_by_window_id,Object.entries(j).forEach(function(X){var G,ae=We()(X,2),he=ae[0],Ie=ae[1];W[he]=[].concat($()((G=W[he])!==null&&G!==void 0?G:[]),$()(Ie))}),N=Ue((_=t.sessionPlayerData)===null||_===void 0||(B=_.metadata)===null||B===void 0?void 0:B.segments,W,(re=t.sessionPlayerData)===null||re===void 0||(ne=re.metadata)===null||ne===void 0?void 0:ne.startAndEndTimesByWindowId),k.abrupt("return",Gt(Gt({},t.sessionPlayerData),{},{bufferedTo:N,snapshotsByWindowId:W,next:(le=ye.result)===null||le===void 0?void 0:le.next}));case 11:case"end":return k.stop()}},h)}));function u(h,b){return i.apply(this,arguments)}return u}()},sessionEventsData:{loadEvents:function(){var i=de()(_e.a.mark(function h(b,S){var C,M,K,_,B,re,ne,le,ve;return _e.a.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(_=b.url,t.eventsApiParams){me.next=3;break}return me.abrupt("return",t.sessionEventsData);case 3:return B=_||"api/projects/".concat(t.currentTeamId,"/events?").concat(Object(pe.Ab)(t.eventsApiParams)),me.next=6,rt.a.get(B);case 6:return re=me.sent,S(),ne=[],le=[],ve=(C=re.results)!==null&&C!==void 0?C:[],ve.forEach(function(ye){var W,j,N,A,k=xt(+Object(Je.a)(ye.timestamp)-1e3,(W=(j=ye.properties)===null||j===void 0?void 0:j.$window_id)!==null&&W!==void 0?W:"",(N=t.sessionPlayerData)===null||N===void 0||(A=N.metadata)===null||A===void 0?void 0:A.startAndEndTimesByWindowId);if(k===null){var X,G,ae,he;k=xt(+Object(Je.a)(ye.timestamp),(X=(G=ye.properties)===null||G===void 0?void 0:G.$window_id)!==null&&X!==void 0?X:"",(ae=t.sessionPlayerData)===null||ae===void 0||(he=ae.metadata)===null||he===void 0?void 0:he.startAndEndTimesByWindowId)}if(k!==null){var Ie=At(k,t.sessionPlayerData.metadata.segments);Ie!==null&&le.push(Gt(Gt({},ye),{},{playerTime:Ie,playerPosition:k,percentageOfRecordingDuration:100*Ie/t.sessionPlayerData.metadata.recordingDurationMs}))}}),ne=[].concat($()((M=(K=t.sessionEventsData)===null||K===void 0?void 0:K.events)!==null&&M!==void 0?M:[]),le).sort(function(ye,W){return ye.playerTime-W.playerTime}),me.abrupt("return",Gt(Gt({},t.sessionEventsData),{},{next:re==null?void 0:re.next,events:ne}));case 14:case"end":return me.stop()}},h)}));function u(h,b){return i.apply(this,arguments)}return u}()}}},selectors:{eventsToShow:[function(a){return[a.filters,a.sessionEventsData]},function(a,n){var t,i=(t=n==null?void 0:n.events)!==null&&t!==void 0?t:[];return a!=null&&a.query?new gt.a(Xt(i),{threshold:.3,keys:["queryValue"],findAllMatches:!0,ignoreLocation:!0,sortFn:function(h,b){return i[h.idx].timestamp-i[b.idx].timestamp||h.score-b.score}}).search(a.query).map(function(u){return u.item}):i}],eventsApiParams:[function(a){return[a.sessionPlayerData]},function(a){var n,t,i,u=(n=a.metadata.segments.slice(0,1).pop())===null||n===void 0?void 0:n.startTimeEpochMs,h=(t=a.metadata.segments.slice(-1).pop())===null||t===void 0?void 0:t.endTimeEpochMs;if(!(!(a==null||(i=a.person)===null||i===void 0)&&i.id)||!u||!h)return null;var b=6e4;return{person_id:a.person.id,after:Je.a.utc(u).subtract(b,"ms").format(),before:Je.a.utc(h).add(b,"ms").format(),orderBy:["timestamp"]}}],orderedConsoleLogs:[function(a){return[a.sessionPlayerData]},function(a){var n,t,i=[];return a==null||(n=a.metadata)===null||n===void 0||(t=n.segments)===null||t===void 0||t.forEach(function(u){var h;a==null||(h=a.snapshotsByWindowId[u.windowId])===null||h===void 0||h.forEach(function(b){if(b.type===6&&b.data.plugin===Rt&&b.timestamp>=u.startTimeEpochMs&&b.timestamp<=u.endTimeEpochMs){var S,C,M=b.data.payload,K=M.level,_=M.payload,B=M.trace,re=_==null||(S=_.map)===null||S===void 0?void 0:S.call(_,function(W){return W.startsWith('"')&&W.endsWith('"')?W.slice(1,-1):W}).join(" "),ne,le;if(B&&B.length>0){var ve=B[0].split("(").slice(-1)[0].replace(")",""),Se=ve.split(":"),me=Se.slice(-2).join(":");if(le=Se.slice(0,-2).join(":"),Se.length>=4)try{var ye=new URL(le).pathname.split("/").slice(-1)[0];ne="".concat(ye,":").concat(me)}catch(W){ne=":".concat(me)}else ne=":".concat(me)}i.push({playerPosition:xt(b.timestamp,u.windowId,a==null||(C=a.metadata)===null||C===void 0?void 0:C.startAndEndTimesByWindowId),parsedTraceURL:le,parsedTraceString:ne,parsedPayload:re,level:K})}})}),i}],areAllSnapshotsLoaded:[function(a){return[a.sessionPlayerData]},function(a){var n,t;return(a==null?void 0:a.bufferedTo)&&(a==null||(n=a.metadata)===null||n===void 0?void 0:n.segments.slice(-1)[0])&&ea()(a==null||(t=a.metadata)===null||t===void 0?void 0:t.segments.slice(-1)[0].endPlayerPosition,a==null?void 0:a.bufferedTo)}]},urlToAction:function(n){var t=n.actions,i=n.values,u=n.cache,h=function(S,C,M){var K=C.source,_=M.sessionRecordingId;K&&Object.values(Oe.d).includes(K)&&t.setSource(K),i&&_&&_!==i.sessionRecordingId&&(u.startTime=performance.now(),t.loadRecordingMeta(_),t.loadRecordingSnapshots(_))};return{"/recordings":h,"/person/*":h,"/insights/*":h}}});function an(a,n){var t;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(t=en(a))||n&&a&&typeof a.length=="number"){t&&(a=t);var i=0,u=function(){};return{s:u,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(M){throw M},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=!0,b=!1,S;return{s:function(){t=a[Symbol.iterator]()},n:function(){var M=t.next();return h=M.done,M},e:function(M){b=!0,S=M},f:function(){try{!h&&t.return!=null&&t.return()}finally{if(b)throw S}}}}function en(a,n){if(!!a){if(typeof a=="string")return Tt(a,n);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Tt(a,n)}}function Tt(a,n){(n==null||n>a.length)&&(n=a.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=a[t];return i}var jt=[.5,1,2,4,8,16],et=Object(je.kea)({path:["scenes","session-recordings","player","sessionRecordingPlayerLogic"],connect:{logic:[Oe.f],values:[Lt,["sessionRecordingId","sessionPlayerData"]],actions:[Lt,["loadRecordingSnapshotsSuccess","loadRecordingMetaSuccess"]]},actions:{tryInitReplayer:function(){return!0},setPlayer:function(n){return{player:n}},setPlay:!0,setPause:!0,startBuffer:!0,endBuffer:!0,startScrub:!0,endScrub:!0,setSkipInactivitySetting:function(n){return{skipInactivitySetting:n}},setSkippingInactivity:function(n){return{isSkippingInactivity:n}},syncPlayerSpeed:!0,setCurrentPlayerPosition:function(n){return{playerPosition:n}},setSpeed:function(n){return{speed:n}},setScale:function(n){return{scale:n}},togglePlayPause:!0,seek:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{playerPosition:n,forcePlay:t}},seekForward:!0,seekBackward:!0,resolvePlayerState:!0,updateAnimation:!0,stopAnimation:!0,setCurrentSegment:function(n){return{segment:n}},setRootFrame:function(n){return{frame:n}},checkBufferingCompleted:!0,initializePlayerFromStart:!0},reducers:function(){return{rootFrame:[null,{setRootFrame:function(t,i){var u=i.frame;return u}}],player:[null,{setPlayer:function(t,i){var u=i.player;return u}}],currentPlayerPosition:[null,{setCurrentPlayerPosition:function(t,i){var u=i.playerPosition;return u}}],currentSegment:[null,{setCurrentSegment:function(t,i){var u=i.segment;return u}}],speed:[1,{persist:!0},{setSpeed:function(t,i){var u=i.speed;return u}}],skipInactivitySetting:[!0,{persist:!0},{setSkipInactivitySetting:function(t,i){var u=i.skipInactivitySetting;return u}}],isSkippingInactivity:[!1,{setSkippingInactivity:function(t,i){var u=i.isSkippingInactivity;return u}}],scale:[1,{setScale:function(t,i){var u=i.scale;return u}}],playingState:[Re.C.PLAY,{setPlay:function(){return Re.C.PLAY},setPause:function(){return Re.C.PAUSE}}],isBuffering:[!0,{startBuffer:function(){return!0},endBuffer:function(){return!1}}],isScrubbing:[!1,{startScrub:function(){return!0},endScrub:function(){return!1}}]}},selectors:{currentPlayerState:[function(a){return[a.playingState,a.isBuffering,a.isScrubbing,a.isSkippingInactivity]},function(a,n,t,i){return t?a:n?Re.C.BUFFER:i&&a!==Re.C.PAUSE?Re.C.SKIP:a}],currentPlayerTime:[function(a){return[a.currentPlayerPosition,a.sessionPlayerData]},function(a,n){var t;if((n==null||(t=n.metadata)===null||t===void 0?void 0:t.segments)&&a){var i;return At(a,n==null||(i=n.metadata)===null||i===void 0?void 0:i.segments)}return 0}],jumpTimeMs:[function(a){return[a.speed]},function(a){return 10*1e3*a}]},listeners:function(n){var t=n.values,i=n.actions,u=n.cache;return{setRootFrame:function(){i.tryInitReplayer()},tryInitReplayer:function(){var b,S,C=(b=(S=t.currentPlayerPosition)===null||S===void 0?void 0:S.windowId)!==null&&b!==void 0?b:null;if(i.setPlayer(null),t.rootFrame&&(t.rootFrame.innerHTML=""),!t.rootFrame||C===null||!t.sessionPlayerData.snapshotsByWindowId[C]||t.sessionPlayerData.snapshotsByWindowId[C].length<2){i.setPlayer(null);return}var M=new Ze.a(t.sessionPlayerData.snapshotsByWindowId[C],{root:t.rootFrame,triggerFocus:!1,insertStyleRules:['.ph-no-capture {   background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg=="); }']});i.setPlayer({replayer:M,windowId:C})},setPlayer:function(b){var S=b.player;S&&(i.seek(t.currentPlayerPosition),i.syncPlayerSpeed())},setCurrentSegment:function(b){var S=b.segment;if(!S.isActive&&t.skipInactivitySetting?i.setSkippingInactivity(!0):i.setSkippingInactivity(!1),t.player&&t.player.windowId!==S.windowId){var C,M;(C=t.player)===null||C===void 0||(M=C.replayer)===null||M===void 0||M.pause(),i.tryInitReplayer()}i.seek(t.currentPlayerPosition)},setSkipInactivitySetting:function(b){var S,C=b.skipInactivitySetting;Oe.f.actions.reportRecordingPlayerSkipInactivityToggled(C),!(!((S=t.currentSegment)===null||S===void 0)&&S.isActive)&&C?i.setSkippingInactivity(!0):i.setSkippingInactivity(!1)},setSkippingInactivity:function(){i.syncPlayerSpeed()},syncPlayerSpeed:function(){if(t.isSkippingInactivity){var b,S,C,M,K,_,B,re=(((b=(S=t.currentSegment)===null||S===void 0||(C=S.endPlayerPosition)===null||C===void 0?void 0:C.time)!==null&&b!==void 0?b:0)-((M=(K=t.currentPlayerPosition)===null||K===void 0?void 0:K.time)!==null&&M!==void 0?M:0))/1e3,ne=Math.max(50,re);(_=t.player)===null||_===void 0||(B=_.replayer)===null||B===void 0||B.setConfig({speed:ne})}else{var le,ve;(le=t.player)===null||le===void 0||(ve=le.replayer)===null||ve===void 0||ve.setConfig({speed:t.speed})}},checkBufferingCompleted:function(){t.currentPlayerPosition&&t.sessionPlayerData.bufferedTo&&t.currentPlayerState===Re.C.BUFFER&&zt(t.currentPlayerPosition,t.sessionPlayerData.bufferedTo,t.sessionPlayerData.metadata.segments)<0&&(i.endBuffer(),i.seek(t.currentPlayerPosition))},initializePlayerFromStart:function(){var b,S,C=(b=t.sessionPlayerData)===null||b===void 0||(S=b.metadata)===null||S===void 0?void 0:S.segments[0];C&&(i.setCurrentSegment(C),i.setCurrentPlayerPosition(C.startPlayerPosition),t.player||i.tryInitReplayer())},loadRecordingMetaSuccess:function(){var h=de()(_e.a.mark(function S(C,M){return _e.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:i.initializePlayerFromStart(),i.checkBufferingCompleted(),M();case 3:case"end":return _.stop()}},S)}));function b(S,C){return h.apply(this,arguments)}return b}(),loadRecordingSnapshotsSuccess:function(){var h=de()(_e.a.mark(function S(C,M){var K,_,B,re,ne,le,ve,Se,me,ye,W,j,N,A;return _e.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(le=(K=(_=t.player)===null||_===void 0||(B=_.replayer)===null||B===void 0?void 0:B.service.state.context.events)!==null&&K!==void 0?K:[],ve=[],((re=t.currentSegment)===null||re===void 0?void 0:re.windowId)!==void 0&&ve.push.apply(ve,$()(((Se=t.sessionPlayerData.snapshotsByWindowId[(me=t.currentSegment)===null||me===void 0?void 0:me.windowId])!==null&&Se!==void 0?Se:[]).slice(le.length))),!(!((ne=t.player)===null||ne===void 0)&&ne.replayer)){X.next=23;break}ye=an(ve),X.prev=5,ye.s();case 7:if((W=ye.n()).done){X.next=13;break}return A=W.value,X.next=11,(j=t.player)===null||j===void 0||(N=j.replayer)===null||N===void 0?void 0:N.addEvent(A);case 11:X.next=7;break;case 13:X.next=18;break;case 15:X.prev=15,X.t0=X.catch(5),ye.e(X.t0);case 18:return X.prev=18,ye.f(),X.finish(18);case 21:X.next=24;break;case 23:i.initializePlayerFromStart();case 24:i.checkBufferingCompleted(),M();case 26:case"end":return X.stop()}},S,null,[[5,15,18,21]])}));function b(S,C){return h.apply(this,arguments)}return b}(),setPlay:function(){var b;i.stopAnimation(),i.syncPlayerSpeed();var S=t.currentPlayerPosition||((b=t.currentSegment)===null||b===void 0?void 0:b.startPlayerPosition);S&&i.seek(S,!0)},setPause:function(){var b,S;i.stopAnimation(),i.syncPlayerSpeed(),(b=t.player)===null||b===void 0||(S=b.replayer)===null||S===void 0||S.pause()},startBuffer:function(){i.stopAnimation()},startScrub:function(){i.stopAnimation()},setSpeed:function(b){var S=b.speed;Oe.f.actions.reportRecordingPlayerSpeedChanged(S),i.syncPlayerSpeed()},seek:function(){var h=de()(_e.a.mark(function S(C,M){var K,_,B,re,ne,le,ve,Se,me,ye,W,j,N;return _e.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:B=C.playerPosition,re=C.forcePlay,i.stopAnimation(),i.setCurrentPlayerPosition(B),ne=null,B&&((K=t.sessionPlayerData)===null||K===void 0?void 0:K.metadata)&&(ne=qe(B,t.sessionPlayerData.metadata.segments),ne&&(ne.windowId!==((le=t.currentSegment)===null||le===void 0?void 0:le.windowId)||ne.startTimeEpochMs!==((ve=t.currentSegment)===null||ve===void 0?void 0:ve.startTimeEpochMs))&&i.setCurrentSegment(ne)),!(!((_=t.sessionPlayerData)===null||_===void 0)&&_.bufferedTo)||!B||!t.currentSegment||zt(B,t.sessionPlayerData.bufferedTo,t.sessionPlayerData.metadata.segments)>0?((Se=t.player)===null||Se===void 0||(me=Se.replayer)===null||me===void 0||me.pause(),i.startBuffer()):!re&&t.currentPlayerState===Re.C.PAUSE?((ye=t.player)===null||ye===void 0||(W=ye.replayer)===null||W===void 0||W.pause(B.time),i.endBuffer()):((j=t.player)===null||j===void 0||(N=j.replayer)===null||N===void 0||N.play(B.time),i.updateAnimation(),i.endBuffer()),M();case 7:case"end":return k.stop()}},S)}));function b(S,C){return h.apply(this,arguments)}return b}(),seekForward:function(){if(t.currentPlayerPosition){var b=At(t.currentPlayerPosition,t.sessionPlayerData.metadata.segments);if(b!==null){var S=b+t.jumpTimeMs,C=dt(S,t.sessionPlayerData.metadata.segments);C||(i.setPause(),C=t.sessionPlayerData.metadata.segments[0].startPlayerPosition),i.seek(C)}}},seekBackward:function(){if(t.currentPlayerPosition){var b=At(t.currentPlayerPosition,t.sessionPlayerData.metadata.segments);if(b!==null){var S=Math.max(b-t.jumpTimeMs,0),C=dt(S,t.sessionPlayerData.metadata.segments);i.seek(C)}}},togglePlayPause:function(){t.currentPlayerState!==Re.C.BUFFER&&(t.currentPlayerState===Re.C.PAUSE?i.setPlay():i.setPause())},updateAnimation:function(){var b,S,C,M,K=(b=t.player)===null||b===void 0||(S=b.replayer)===null||S===void 0?void 0:S.getCurrentTime(),_=null;if(K!==void 0&&t.currentSegment&&(_={windowId:t.currentSegment.windowId,time:Math.min(K,t.currentSegment.endPlayerPosition.time)}),_&&((C=t.currentSegment)===null||C===void 0?void 0:C.endPlayerPosition)&&zt(_,(M=t.currentSegment)===null||M===void 0?void 0:M.endPlayerPosition,t.sessionPlayerData.metadata.segments)>=0){var B=t.sessionPlayerData.metadata.segments.indexOf(t.currentSegment)+1;if(B<t.sessionPlayerData.metadata.segments.length){var re=t.sessionPlayerData.metadata.segments[B];i.setCurrentPlayerPosition(re.startPlayerPosition),i.setCurrentSegment(re)}else i.setPause(),i.setCurrentPlayerPosition(t.sessionPlayerData.metadata.segments[0].startPlayerPosition)}else if(!t.sessionPlayerData.bufferedTo||!_||!t.currentSegment||zt(_,t.sessionPlayerData.bufferedTo,t.sessionPlayerData.metadata.segments)>0){var ne,le;(ne=t.player)===null||ne===void 0||(le=ne.replayer)===null||le===void 0||le.pause(),i.startBuffer()}else i.setCurrentPlayerPosition(_),u.timer=requestAnimationFrame(i.updateAnimation)},stopAnimation:function(){u.timer&&cancelAnimationFrame(u.timer)}}},windowValues:{isSmallScreen:function(n){return n.innerWidth<Object(It.b)("md")}},events:function(n){var t=n.values,i=n.actions;return{beforeUnmount:function(){var h,b;(h=t.player)===null||h===void 0||(b=h.replayer)===null||b===void 0||b.pause(),i.setPlayer(null)}}}}),Pn=e("./node_modules/@ant-design/icons/es/icons/UndoOutlined.js"),dn=e("./node_modules/@ant-design/icons/es/icons/RedoOutlined.js");function yt(a){var n=a.children,t=a.onClick,i=t===void 0?function(){}:t,u=a.className,h=u===void 0?"":u;return p.a.createElement("div",{onClick:i,className:"rrweb-controller-icon ".concat(h)},n)}function fn(a){var n=a.onClick,t=a.time;return p.a.createElement(yt,{onClick:n,className:"rrweb-controller-icon-seek"},p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"seek-seconds"},t),p.a.createElement(Pn.a,{className:"seek-icon",rotate:90})))}function it(a){var n=a.onClick,t=a.time;return p.a.createElement(yt,{onClick:n,className:"rrweb-controller-icon-seek"},p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"seek-seconds"},t),p.a.createElement(dn.a,{className:"seek-icon",rotate:270})))}function Te(a){var n=a.onClick,t=a.className,i=t===void 0?"":t;return p.a.createElement(yt,{onClick:n,className:i},p.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 13 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.a.createElement("path",{d:"M0 16L12.4444 8L0 0V16Z",fill:"currentcolor"})))}function Ot(a){var n=a.onClick,t=a.className,i=t===void 0?"":t;return p.a.createElement(yt,{onClick:n,className:i},p.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 12 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.a.createElement("path",{d:"M0 16H4V0H0V16ZM8 16H12V0H8V16Z",fill:"currentcolor"})))}function Ht(a){var n=a.onClick,t=a.className,i=t===void 0?"":t;return p.a.createElement(yt,{onClick:n,className:i},p.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.a.createElement("path",{d:"M9.06247 7.38754L10.4343 6.01567C10.4674 5.98246 10.4905 5.94064 10.5009 5.89498C10.5114 5.84931 10.5088 5.80163 10.4935 5.75735C10.4782 5.71307 10.4508 5.67397 10.4143 5.64451C10.3779 5.61504 10.334 5.59639 10.2875 5.59067L5.28122 5.00004C5.12184 4.98129 4.98434 5.11567 5.00309 5.27817L5.59372 10.2844C5.61872 10.4907 5.87184 10.5782 6.01872 10.4313L7.38434 9.06567L11.5625 13.2407C11.6593 13.3375 11.8187 13.3375 11.9156 13.2407L13.2406 11.9188C13.3375 11.8219 13.3375 11.6625 13.2406 11.5657L9.06247 7.38754ZM20.0843 13.2407C20.1812 13.3375 20.3406 13.3375 20.4375 13.2407L24.6156 9.06567L25.9812 10.4313C26.0144 10.4643 26.0562 10.4874 26.1019 10.4979C26.1476 10.5083 26.1953 10.5057 26.2395 10.4904C26.2838 10.4751 26.3229 10.4477 26.3524 10.4113C26.3818 10.3749 26.4005 10.3309 26.4062 10.2844L26.9968 5.28129C27.0156 5.12192 26.8812 4.98442 26.7187 5.00317L21.7125 5.59379C21.5062 5.61879 21.4187 5.87192 21.5656 6.01879L22.9375 7.39067L18.7593 11.5625C18.7128 11.6095 18.6867 11.673 18.6867 11.7391C18.6867 11.8052 18.7128 11.8687 18.7593 11.9157L20.0843 13.2407V13.2407ZM26.4062 21.7157C26.3812 21.5094 26.1281 21.4219 25.9812 21.5688L24.6156 22.9344L20.4375 18.7594C20.3905 18.7129 20.327 18.6868 20.2609 18.6868C20.1948 18.6868 20.1313 18.7129 20.0843 18.7594L18.7593 20.0813C18.7128 20.1283 18.6867 20.1917 18.6867 20.2579C18.6867 20.324 18.7128 20.3874 18.7593 20.4344L22.9375 24.6125L21.5656 25.9844C21.5325 26.0176 21.5095 26.0594 21.499 26.1051C21.4886 26.1508 21.4911 26.1985 21.5064 26.2427C21.5217 26.287 21.5492 26.3261 21.5856 26.3556C21.622 26.385 21.666 26.4037 21.7125 26.4094L26.7187 27C26.8781 27.0188 27.0156 26.8844 26.9968 26.7219L26.4062 21.7157ZM11.9156 18.7594C11.8686 18.7129 11.8052 18.6868 11.739 18.6868C11.6729 18.6868 11.6095 18.7129 11.5625 18.7594L7.38434 22.9344L6.01872 21.5688C5.98551 21.5357 5.9437 21.5127 5.89803 21.5022C5.85236 21.4918 5.80468 21.4943 5.7604 21.5096C5.71612 21.5249 5.67702 21.5524 5.64756 21.5888C5.61809 21.6252 5.59944 21.6692 5.59372 21.7157L5.00309 26.7188C4.98434 26.8782 5.11872 27.0157 5.28122 26.9969L10.2875 26.4063C10.4937 26.3813 10.5812 26.1282 10.4343 25.9813L9.06247 24.6125L13.2406 20.4375C13.3375 20.3407 13.3375 20.1813 13.2406 20.0844L11.9156 18.7594V18.7594Z",fill:"currentColor"})))}function un(a){var n=a.onClick,t=a.className,i=t===void 0?"":t;return p.a.createElement(yt,{onClick:n,className:i},p.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.a.createElement("path",{d:"M21.1375 16.5297L9.1625 25.9366C8.71719 26.2866 8.0625 25.9709 8.0625 25.4069V6.59281C8.0625 6.02875 8.71719 5.71344 9.1625 6.06344L21.1375 15.4703C21.2179 15.5333 21.2828 15.6137 21.3275 15.7054C21.3722 15.7972 21.3955 15.8979 21.3955 16C21.3955 16.1021 21.3722 16.2028 21.3275 16.2946C21.2828 16.3864 21.2179 16.4667 21.1375 16.5297V16.5297ZM21.6875 27H23.6875C23.7538 27 23.8174 26.9737 23.8643 26.9268C23.9112 26.8799 23.9375 26.8163 23.9375 26.75V5.25C23.9375 5.1837 23.9112 5.12011 23.8643 5.07322C23.8174 5.02634 23.7538 5 23.6875 5H21.6875C21.6212 5 21.5576 5.02634 21.5107 5.07322C21.4638 5.12011 21.4375 5.1837 21.4375 5.25V26.75C21.4375 26.8163 21.4638 26.8799 21.5107 26.9268C21.5576 26.9737 21.6212 27 21.6875 27Z",fill:"currentColor"})))}function yn(a){var n=a.onClick,t=a.className,i=t===void 0?"":t;return p.a.createElement(yt,{onClick:n,className:i},p.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p.a.createElement("path",{d:"M10.8625 16.5297L22.8375 25.9366C23.2828 26.2866 23.9375 25.9709 23.9375 25.4069V6.59281C23.9375 6.02875 23.2828 5.71344 22.8375 6.06344L10.8625 15.4703C10.7821 15.5333 10.7172 15.6137 10.6725 15.7054C10.6278 15.7972 10.6045 15.8979 10.6045 16C10.6045 16.1021 10.6278 16.2028 10.6725 16.2946C10.7172 16.3864 10.7821 16.4667 10.8625 16.5297V16.5297ZM10.3125 27H8.3125C8.2462 27 8.18261 26.9737 8.13572 26.9268C8.08884 26.8799 8.0625 26.8163 8.0625 26.75V5.25C8.0625 5.1837 8.08884 5.12011 8.13572 5.07322C8.18261 5.02634 8.2462 5 8.3125 5H10.3125C10.3788 5 10.4424 5.02634 10.4893 5.07322C10.5362 5.12011 10.5625 5.1837 10.5625 5.25V26.75C10.5625 26.8163 10.5362 26.8799 10.4893 26.9268C10.4424 26.9737 10.3788 27 10.3125 27Z",fill:"currentColor"})))}try{fn.displayName="IconSeekBack",fn.__docgenInfo={description:"",displayName:"IconSeekBack",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/icons.tsx#IconSeekBack"]={docgenInfo:fn.__docgenInfo,name:"IconSeekBack",path:"frontend/src/scenes/session-recordings/player/icons.tsx#IconSeekBack"})}catch(a){}try{it.displayName="IconSeekForward",it.__docgenInfo={description:"",displayName:"IconSeekForward",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/icons.tsx#IconSeekForward"]={docgenInfo:it.__docgenInfo,name:"IconSeekForward",path:"frontend/src/scenes/session-recordings/player/icons.tsx#IconSeekForward"})}catch(a){}try{Te.displayName="IconPlay",Te.__docgenInfo={description:"",displayName:"IconPlay",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/icons.tsx#IconPlay"]={docgenInfo:Te.__docgenInfo,name:"IconPlay",path:"frontend/src/scenes/session-recordings/player/icons.tsx#IconPlay"})}catch(a){}try{Ot.displayName="IconPause",Ot.__docgenInfo={description:"",displayName:"IconPause",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/icons.tsx#IconPause"]={docgenInfo:Ot.__docgenInfo,name:"IconPause",path:"frontend/src/scenes/session-recordings/player/icons.tsx#IconPause"})}catch(a){}try{Ht.displayName="IconFullscreen",Ht.__docgenInfo={description:"",displayName:"IconFullscreen",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/icons.tsx#IconFullscreen"]={docgenInfo:Ht.__docgenInfo,name:"IconFullscreen",path:"frontend/src/scenes/session-recordings/player/icons.tsx#IconFullscreen"})}catch(a){}try{un.displayName="IconStepForward",un.__docgenInfo={description:"",displayName:"IconStepForward",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/icons.tsx#IconStepForward"]={docgenInfo:un.__docgenInfo,name:"IconStepForward",path:"frontend/src/scenes/session-recordings/player/icons.tsx#IconStepForward"})}catch(a){}try{yn.displayName="IconStepBackward",yn.__docgenInfo={description:"",displayName:"IconStepBackward",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/icons.tsx#IconStepBackward"]={docgenInfo:yn.__docgenInfo,name:"IconStepBackward",path:"frontend/src/scenes/session-recordings/player/icons.tsx#IconStepBackward"})}catch(a){}var vn=p.a.forwardRef(function(n,t){var i=Object(oe.useRef)(),u=Object(je.useValues)(et),h=u.currentPlayerState,b=u.player,S=Object(je.useActions)(et),C=S.togglePlayPause,M=S.setScale,K=t;Object(oe.useEffect)(function(){if(!!b)return b.replayer.on("resize",B),window.addEventListener("resize",_),function(){return window.removeEventListener("resize",_)}},[b==null?void 0:b.replayer]);var _=function(){B(i.current)},B=function(le){var ve;if(!(!le||!(!(K==null||(ve=K.current)===null||ve===void 0)&&ve.parentElement)||!(b!=null&&b.replayer))){i.current=le;var Se=K.current.parentElement.getBoundingClientRect(),me=Se.width,ye=Se.height,W=Math.min(me/le.width,ye/le.height,1);b.replayer.wrapper.style.transform="scale(".concat(W,")"),K.current.style.paddingLeft="".concat((me-le.width*W)/2,"px"),K.current.style.paddingTop="".concat((ye-le.height*W)/2,"px"),K.current.style.marginBottom="-".concat(ye-le.height*W,"px"),M(W)}},re=function(){return h===Re.C.BUFFER?p.a.createElement("div",{className:"rrweb-overlay"},"Buffering..."):h===Re.C.PAUSE?p.a.createElement("div",{className:"rrweb-overlay"},p.a.createElement(Te,{className:"rrweb-overlay-play-icon"})):h===Re.C.SKIP?p.a.createElement("div",{className:"rrweb-overlay"},"Skipping inactivity"):null};return p.a.createElement("div",{className:"rrweb-player",onClick:C},p.a.createElement("div",{ref:t}),p.a.createElement("div",{className:"rrweb-overlay-container"},re()))});try{vn.displayName="PlayerFrame",vn.__docgenInfo={description:"",displayName:"PlayerFrame",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/player/PlayerFrame.tsx#PlayerFrame"]={docgenInfo:vn.__docgenInfo,name:"PlayerFrame",path:"frontend/src/scenes/session-recordings/player/PlayerFrame.tsx#PlayerFrame"})}catch(a){}var Bn=e("./node_modules/antd/es/select/index.js"),pa=e("./node_modules/antd/es/switch/index.js"),da=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/Seekbar.scss"),ra=e.n(da),ua={};ua.insert="head",ua.singleton=!1;var fa=Z()(ra.a,ua),va=ra.a.locals||{},Un=e("./node_modules/clsx/dist/clsx.m.js"),kn=Object(je.kea)({path:["scenes","session-recordings","player","seekbarLogic"],connect:{values:[et,["sessionPlayerData","currentPlayerPosition"],Lt,["eventsToShow"]],actions:[et,["seek","startScrub","endScrub","setCurrentPlayerPosition"]]},actions:{setThumbLeftPos:function(n,t){return{thumbLeftPos:n,shouldSeek:t}},setCursorDiff:function(n){return{cursorDiff:n}},handleSeek:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{newX:n,shouldSeek:t}},handleMove:function(n){return{event:n}},handleUp:function(n){return{event:n}},handleDown:function(n){return{event:n}},handleClick:function(n){return{event:n}},handleTickClick:function(n){return{playerPosition:n}},setSlider:function(n){return{ref:n}},setThumb:function(n){return{ref:n}},debouncedSetTime:function(n){return{time:n}},endSeeking:!0},reducers:{thumbLeftPos:[-Ct,{setThumbLeftPos:function(n,t){var i=t.thumbLeftPos;return i}}],cursorDiff:[0,{setCursorDiff:function(n,t){var i=t.cursorDiff;return i}}],slider:[null,{setSlider:function(n,t){var i=t.ref;return i.current}}],thumb:[null,{setThumb:function(n,t){var i=t.ref;return i.current}}],isSeeking:[!1,{handleSeek:function(){return!0},endSeeking:function(){return!1}}],isScrubbing:[!1,{startScrub:function(){return!0},endScrub:function(){return!1}}]},selectors:{bufferPercent:[function(a){return[a.sessionPlayerData]},function(a){var n,t;if((a==null?void 0:a.bufferedTo)&&(a==null||(n=a.metadata)===null||n===void 0?void 0:n.segments)&&(a==null||(t=a.metadata)===null||t===void 0?void 0:t.recordingDurationMs)){var i,u=(i=At(a.bufferedTo,a.metadata.segments))!==null&&i!==void 0?i:0;return 100*u/a.metadata.recordingDurationMs}return 0}],scrubbingTime:[function(a){return[a.thumbLeftPos,a.slider,a.sessionPlayerData]},function(a,n,t){var i;return a&&n&&(t==null||(i=t.metadata)===null||i===void 0?void 0:i.recordingDurationMs)?(a+Ct)/n.offsetWidth*t.metadata.recordingDurationMs:0}]},listeners:function(n){var t=n.values,i=n.actions;return{setCurrentPlayerPosition:function(){var u=de()(_e.a.mark(function b(){var S,C,M,K;return _e.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(t.slider){B.next=2;break}return B.abrupt("return");case 2:(!t.isSeeking||t.currentPlayerPosition===((S=t.sessionPlayerData)===null||S===void 0||(C=S.metadata)===null||C===void 0||(M=C.segments[0])===null||M===void 0?void 0:M.startPlayerPosition))&&(K=t.currentPlayerPosition?ue(t.currentPlayerPosition,t.slider.offsetWidth,t.sessionPlayerData.metadata.segments,t.sessionPlayerData.metadata.recordingDurationMs):0,i.setThumbLeftPos(K-Ct,!1));case 3:case"end":return B.stop()}},b)}));function h(){return u.apply(this,arguments)}return h}(),setThumbLeftPos:function(h){var b,S=h.thumbLeftPos,C=h.shouldSeek;if(!!t.slider&&C&&((b=t.sessionPlayerData)===null||b===void 0?void 0:b.metadata)){var M=Yt(S+Ct,t.slider.offsetWidth,t.sessionPlayerData.metadata.segments,t.sessionPlayerData.metadata.recordingDurationMs);i.seek(M)}},handleSeek:function(){var u=de()(_e.a.mark(function b(S){var C,M,K,_,B;return _e.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return K=S.newX,_=S.shouldSeek,B=(C=(M=t.slider)===null||M===void 0?void 0:M.offsetWidth)!==null&&C!==void 0?C:0,ne.next=4,i.setThumbLeftPos(Object(pe.m)(K,0,B)-Ct,_);case 4:i.endSeeking();case 5:case"end":return ne.stop()}},b)}));function h(b){return u.apply(this,arguments)}return h}(),handleMove:function(){var u=de()(_e.a.mark(function b(S){var C,M;return _e.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(C=S.event,t.slider){_.next=3;break}return _.abrupt("return");case 3:i.startScrub(),M=Mt(C)-t.cursorDiff-t.slider.getBoundingClientRect().left,i.handleSeek(M,!1);case 6:case"end":return _.stop()}},b)}));function h(b){return u.apply(this,arguments)}return h}(),handleUp:function(h){var b=h.event;if(!!t.slider){var S=Mt(b)-t.cursorDiff-t.slider.getBoundingClientRect().left;i.handleSeek(S),i.endScrub(),document.removeEventListener("touchmove",i.handleMove),document.removeEventListener("touchend",i.handleUp),document.removeEventListener("mousemove",i.handleMove),document.removeEventListener("mouseup",i.handleUp)}},handleDown:function(h){var b=h.event;if(!!t.thumb){i.startScrub();var S=Mt(b),C=S-t.thumb.getBoundingClientRect().left-Ct;Math.abs(C)>Qt&&(C=0),i.setCursorDiff(C),document.addEventListener("touchmove",i.handleMove),document.addEventListener("touchend",i.handleUp),document.addEventListener("mousemove",i.handleMove),document.addEventListener("mouseup",i.handleUp)}},handleTickClick:function(h){var b=h.playerPosition;t.isSeeking||i.handleSeek(ue(b,t.slider.offsetWidth,t.sessionPlayerData.metadata.segments,t.sessionPlayerData.metadata.recordingDurationMs))}}},events:function(n){var t=n.actions,i=n.values,u=n.cache;return{afterMount:function(){u.setCurrentPlayerPosition=function(){t.setCurrentPlayerPosition(i.currentPlayerPosition)},window.addEventListener("resize",u.setCurrentPlayerPosition)},beforeUnmount:function(){window.removeEventListener("resize",u.setCurrentPlayerPosition)}}}});function oa(a){var n=a.event,t=Object(oe.useState)(!1),i=We()(t,2),u=i[0],h=i[1],b=Object(je.useActions)(kn),S=b.handleTickClick,C=Object(je.useActions)(Oe.f),M=C.reportRecordingPlayerSeekbarEventHovered;return p.a.createElement("div",{className:"tick-hover-box",style:{left:"calc(".concat(n.percentageOfRecordingDuration,"% - 2px)")},onClick:function(_){_.stopPropagation(),S(n.playerPosition)},onMouseEnter:function(_){_.stopPropagation(),h(!0),M()},onMouseLeave:function(_){_.stopPropagation(),h(!1)}},p.a.createElement("div",{className:Object(Un.a)("tick-info",{show:u})},n.event),p.a.createElement("div",{className:"tick-marker"}),p.a.createElement("div",{className:Object(Un.a)("tick-thumb",{big:u})}))}function Kn(){var a,n,t=Object(oe.useRef)(null),i=Object(oe.useRef)(null),u=Object(je.useActions)(kn),h=u.handleDown,b=u.setSlider,S=u.setThumb,C=Object(je.useValues)(Lt),M=C.eventsToShow,K=C.sessionPlayerData,_=Object(je.useValues)(kn),B=_.thumbLeftPos,re=_.bufferPercent;return Object(oe.useEffect)(function(){t.current&&i.current&&(b(t),S(i))},[t.current,i.current]),p.a.createElement("div",{className:"rrweb-controller-slider"},p.a.createElement("div",{className:"slider",ref:t,onMouseDown:h,onTouchStart:h},p.a.createElement("div",{className:"inactivity-bar"},K==null||(a=K.metadata)===null||a===void 0||(n=a.segments)===null||n===void 0?void 0:n.map(function(ne){return p.a.createElement("div",{key:"".concat(ne.windowId,"-").concat(ne.startTimeEpochMs),className:Object(Un.a)("activity-section",!ne.isActive&&"inactive-section"),style:{width:"".concat(100*ne.durationMs/K.metadata.recordingDurationMs,"%")}})})),p.a.createElement("div",{className:"slider-bar"}),p.a.createElement("div",{className:"thumb",ref:i,style:{transform:"translateX(".concat(B,"px)")}}),p.a.createElement("div",{className:"current-bar",style:{width:"".concat(Math.max(B,0),"px")}}),p.a.createElement("div",{className:"buffer-bar",style:{width:"calc(".concat(re,"% - 2px)")}})),p.a.createElement("div",{className:"ticks"},M.map(function(ne){return p.a.createElement(oa,{key:ne.id,event:ne})})))}var Wn=e("./node_modules/antd/es/tooltip/index.js");function Rn(){var a,n,t,i=Object(je.useActions)(et),u=i.seekBackward,h=i.seekForward,b=Object(je.useValues)(et),S=b.jumpTimeMs,C=b.currentPlayerTime,M=b.sessionPlayerData,K=Object(je.useValues)(kn),_=K.isScrubbing,B=K.scrubbingTime;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Wn.a,{placement:"top",overlayInnerStyle:{minHeight:"auto"},overlay:"Back ".concat(S/1e3,"s (\u2190 left arrow)")},p.a.createElement("span",null,p.a.createElement(fn,{onClick:u,time:S/1e3}))),p.a.createElement(Wn.a,{placement:"top",overlayInnerStyle:{minHeight:"auto"},overlay:"Forward ".concat(S/1e3,"s (\u2192 right arrow)")},p.a.createElement("span",null,p.a.createElement(it,{onClick:h,time:S/1e3}))),p.a.createElement("div",{className:"rrweb-timestamp"},Object(pe.o)(((a=_?B:C)!==null&&a!==void 0?a:0)/1e3)," /"," ",Object(pe.o)(Math.floor(((n=M==null||(t=M.metadata)===null||t===void 0?void 0:t.recordingDurationMs)!==null&&n!==void 0?n:0)/1e3))))}function ia(){var a=Object(je.useActions)(et),n=a.togglePlayPause,t=a.setSpeed,i=a.setSkipInactivitySetting,u=Object(je.useValues)(et),h=u.currentPlayerState,b=u.speed,S=u.isSmallScreen,C=u.skipInactivitySetting;return p.a.createElement("div",{className:"rrweb-controller"},p.a.createElement("span",null,h===Re.C.PLAY?p.a.createElement(Ot,{onClick:n,className:"rrweb-controller-icon ph-rrweb-controller-icon-play-pause"}):p.a.createElement(Te,{onClick:n,className:"rrweb-controller-icon ph-rrweb-controller-icon-play-pause"})),!S&&p.a.createElement(Rn,null),p.a.createElement("div",{className:"rrweb-progress"},p.a.createElement(Kn,null)),p.a.createElement(Bn.a,{onChange:function(K){return t(K)},value:b,dropdownMatchSelectWidth:!1,size:"small",defaultValue:1,className:"rrweb-speed-toggle"},p.a.createElement(Bn.a.OptGroup,{label:"Speed"},jt.map(function(M){return p.a.createElement(Bn.a.Option,{key:M,value:M},M,"x")}))),p.a.createElement("div",{onClick:function(){i(!C)},className:"rrweb-inactivity-toggle"},p.a.createElement("span",{className:"inactivity-label"},"Skip inactivity"),p.a.createElement(pa.a,{checked:C,size:"small"})))}var _n=e("./node_modules/core-js/modules/es.symbol.js"),zn=e("./node_modules/core-js/modules/es.symbol.description.js"),Mn=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/PlayerEvents.scss"),Yn=e.n(Mn),E={};E.insert="head",E.singleton=!1;var x=Z()(Yn.a,E),I=Yn.a.locals||{},R=e("./node_modules/antd/es/empty/index.js"),U=e("./node_modules/antd/es/row/index.js"),te=e("./node_modules/antd/es/col/index.js"),J=e("./node_modules/antd/es/skeleton/index.js"),L=e("./node_modules/antd/es/input/index.js"),se=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),Y=e("./node_modules/@ant-design/icons/es/icons/ArrowUpOutlined.js"),He=e("./node_modules/@ant-design/icons/es/icons/ArrowDownOutlined.js"),tt=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),nt=e("./node_modules/react-virtualized/dist/es/List/index.js"),Le=e("./node_modules/react-virtualized/dist/es/Grid/index.js"),we=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),H=e("./node_modules/core-js/modules/es.array.find-index.js");function mn(a,n){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);n&&(i=i.filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable})),t.push.apply(t,i)}return t}function Zt(a){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?mn(Object(t),!0).forEach(function(i){Zn()(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):mn(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}var gn=65,Tn=50,be=150*5,pn=Object(je.kea)({path:["scenes","session-recordings","player","eventsListLogic"],connect:{logics:[Oe.f],actions:[Lt,["setFilters","loadEventsSuccess"],et,["seek"]],values:[Lt,["eventsToShow","sessionEventsDataLoading"],et,["currentPlayerTime"]]},actions:{setLocalFilters:function(n){return{filters:n}},setRenderedRows:function(n){return{renderMeta:n}},setList:function(n){return{list:n}},enablePositionFinder:!0,disablePositionFinder:!0,scrollTo:function(n){return{rowIndex:n}},handleEventClick:function(n){return{playerPosition:n}}},reducers:{localFilters:[{},{setLocalFilters:function(n,t){var i=t.filters;return Zt(Zt({},n),i)}}],renderedRows:[{startIndex:0,stopIndex:0,overscanStartIndex:0,overscanStopIndex:0},{setRenderedRows:function(n,t){var i=t.renderMeta;return i}}],list:[null,{setList:function(n,t){var i=t.list;return i}}],shouldHidePositionFinder:[!1,{scrollTo:function(){return!0},enablePositionFinder:function(){return!1},disablePositionFinder:function(){return!0}}]},listeners:function(n){var t=n.actions,i=n.values;return{setLocalFilters:function(){var u=de()(_e.a.mark(function b(S,C){return _e.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,C(250);case 2:t.setFilters(i.localFilters);case 3:case"end":return K.stop()}},b)}));function h(b,S){return u.apply(this,arguments)}return h}(),scrollTo:function(){var u=de()(_e.a.mark(function b(S,C){var M,K;return _e.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return M=S.rowIndex,K=M!=null?M:i.currentEventsIndices.startIndex,i.list&&(i.list.scrollToPosition(i.list.getOffsetForRow({alignment:"center",index:K})),Oe.f.actions.reportRecordingScrollTo(K)),B.next=5,C(be);case 5:t.enablePositionFinder();case 6:case"end":return B.stop()}},b)}));function h(b,S){return u.apply(this,arguments)}return h}(),handleEventClick:function(h){var b=h.playerPosition;b&&t.seek(b)}}},selectors:function(){return{listEvents:[function(n){return[n.eventsToShow]},function(n){return n.map(function(t){var i;return Zt(Zt({},t),{},{colonTimestamp:Object(pe.o)(Math.floor(((i=t.playerTime)!==null&&i!==void 0?i:0)/1e3))})})}],currentEventsTimeRange:[function(n){return[n.listEvents,n.currentPlayerTime]},function(n,t){var i;if(n.length<1)return{start:0,end:0};var u=n.findIndex(function(S){var C;return((C=S.playerTime)!==null&&C!==void 0?C:0)>=Object(pe.k)(t!=null?t:0)}),h=Math.max(Object(pe.k)(t!=null?t:0),1e3),b=Object(pe.E)((i=n[Object(pe.m)(u===-1?n.length-1:u-1,0,n.length-1)].playerTime)!==null&&i!==void 0?i:0);return{start:b,end:h}}],isEventCurrent:[function(n){return[n.currentEventsTimeRange,n.listEvents]},function(n,t){return function(i){var u,h,b,S;return((u=t==null||(h=t[i])===null||h===void 0?void 0:h.playerTime)!==null&&u!==void 0?u:0)>=n.start&&((b=t==null||(S=t[i])===null||S===void 0?void 0:S.playerTime)!==null&&b!==void 0?b:0)<n.end}}],currentEventsIndices:[function(n){return[n.listEvents,n.isEventCurrent]},function(n,t){return{startIndex:Object(pe.m)(n.findIndex(function(i,u){return t(u)}),0,n.length-1),stopIndex:Object(pe.m)(Object(pe.C)(n,function(i,u){return t(u)}),0,n.length-1)}}],currentEventsBoxSizeAndPosition:[function(n){return[n.currentEventsIndices,n.list]},function(n,t){if(!t||!t.Grid||n.startIndex>=t.Grid.props.rowCount||n.stopIndex>t.Grid.props.rowCount||n.startIndex<1&&n.stopIndex<1||n.stopIndex<n.startIndex)return{top:0,height:0};var i=t.Grid.state,u=i.instanceProps.rowSizeAndPositionManager.getSizeAndPositionOfCell(n.startIndex).offset,h=i.instanceProps.rowSizeAndPositionManager.getSizeAndPositionOfCell(n.stopIndex);return{top:u,height:h.offset+h.size-u}}],isRowIndexRendered:[function(n){return[n.renderedRows]},function(n){return function(t){return t>=n.overscanStartIndex&&t<=n.overscanStopIndex}}],showPositionFinder:[function(n){return[n.renderedRows,n.currentEventsIndices,n.shouldHidePositionFinder]},function(n,t,i){return!i&&(n.stopIndex<t.startIndex||n.startIndex>t.stopIndex)}],isDirectionUp:[function(n){return[n.renderedRows,n.currentEventsIndices]},function(n,t){return n.startIndex>t.stopIndex}]}}}),hn=e("./frontend/src/lib/components/icons.tsx");function st(a,n){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);n&&(i=i.filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable})),t.push.apply(t,i)}return t}function Vt(a){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?st(Object(t),!0).forEach(function(i){Zn()(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):st(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function bn(a){var n=a.cellCount,t=a.overscanCellsCount,i=a.startIndex,u=a.stopIndex,h=Math.floor(t/2),b=t-h;return{overscanStartIndex:Math.max(0,i-h),overscanStopIndex:Math.min(n-1,u+b)}}var bt=function(n){return n.event==="$pageview"?p.a.createElement(hn.PageviewIcon,null):n.event==="$pageleave"?p.a.createElement(hn.PageleaveIcon,null):n.event==="$autocapture"?p.a.createElement(hn.AutocaptureIcon,null):p.a.createElement(hn.EventIcon,null)};function St(){return p.a.createElement("div",{className:"event-list-empty-container"},p.a.createElement(R.a,{image:R.a.PRESENTED_IMAGE_SIMPLE,description:"No events fired in this recording."}))}function Ut(a){var n=a.description,t=Object(oe.useRef)(null);return p.a.createElement("span",{className:Object(Un.a)("event-item-content-subtitle",Object(pe.U)(t.current)&&"overflowing"),title:n},p.a.createElement("div",{className:"inner",ref:t},n))}function rn(){var a=Object(oe.useRef)(null),n=Object(je.useValues)(pn),t=n.localFilters,i=n.listEvents,u=n.currentEventsBoxSizeAndPosition,h=n.showPositionFinder,b=n.isRowIndexRendered,S=n.isEventCurrent,C=n.isDirectionUp,M=n.renderedRows,K=Object(je.useValues)(Lt),_=K.sessionEventsDataLoading,B=Object(je.useActions)(pn),re=B.setLocalFilters,ne=B.setRenderedRows,le=B.setList,ve=B.scrollTo,Se=B.disablePositionFinder,me=B.handleEventClick;Object(oe.useEffect)(function(){a!=null&&a.current&&le(a.current)},[a.current]);var ye=Object(oe.useCallback)(function(N){var A=N.index,k=N.style,X=N.key,G=i[A],ae=Object(Nt.d)(G.event,"event"),he=S(A);return p.a.createElement(U.a,{key:X,className:Object(Un.a)("event-list-item",{"current-event":he}),align:"top",style:Vt(Vt({},k),{},{zIndex:i.length-A}),onClick:function(){me(G.playerPosition)}},p.a.createElement(te.a,{className:"event-item-icon"},p.a.createElement("div",{className:"event-item-icon-wrapper"},bt(G))),p.a.createElement(te.a,{className:Object(Un.a)("event-item-content",{rendering:!b(A)})},p.a.createElement(U.a,{className:"event-item-content-top-row"},p.a.createElement(Nt.b,{className:"event-item-content-title",value:G.event,disableIcon:!0,disablePopover:!0,ellipsis:!0}),p.a.createElement("span",{className:"event-item-content-timestamp"},G.colonTimestamp)),ae&&p.a.createElement(Ut,{description:Object(pe.j)(Object(pe.B)(G,!0))}),p.a.createElement(J.a,{active:!0,paragraph:{rows:2,width:["40%","100%"]},title:!1})))},[i.length,M.startIndex,M.stopIndex,u.top,u.height]),W=Object(oe.useCallback)(function(N){var A=Object(Le.c)(N);return i.length>0&&A.push(p.a.createElement("div",{key:"highlight-box",className:"current-events-highlight-box",style:{height:u.height,transform:"translateY(".concat(u.top,"px)")}})),A},[u.top,u.height,_,i.length]);return p.a.createElement(te.a,{className:"player-events-container"},p.a.createElement(L.a,{prefix:p.a.createElement(se.a,null),placeholder:"Search for events",value:t.query,onChange:function(N){return re({query:N.target.value})}}),p.a.createElement(te.a,{className:"event-list"},_?p.a.createElement(pe.b,null):p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:Object(Un.a)("current-events-position-finder",{visible:h})},p.a.createElement(U.a,{className:"left",align:"middle",wrap:!1,onClick:function(){ve()}},C?p.a.createElement(Y.a,null):p.a.createElement(He.a,null),"Jump to current time"),p.a.createElement(U.a,{className:"right",align:"middle",justify:"center",wrap:!1,onClick:function(){Se()}},p.a.createElement(tt.a,null))),p.a.createElement(we.a,null,function(j){var N=j.height,A=j.width;return p.a.createElement(nt.b,{ref:a,className:"event-list-virtual",height:N,width:A,onRowsRendered:ne,noRowsRenderer:St,cellRangeRenderer:W,overscanRowCount:Tn,overscanIndicesGetter:bn,rowCount:i.length,rowRenderer:ye,rowHeight:gn})}))))}var Qn=e("./node_modules/antd/es/tabs/index.js"),sa=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),ga=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/PlayerMeta.scss"),Jn=e.n(ga),Ln={};Ln.insert="head",Ln.singleton=!1;var ha=Z()(Jn.a,Ln),En=Jn.a.locals||{},Ft=e("./node_modules/antd/es/space/index.js"),An=e("./frontend/src/lib/components/ProfilePicture/index.ts"),na=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Nn=e("./node_modules/core-js/modules/es.array.filter.js"),wa=e("./node_modules/core-js/modules/es.array.some.js"),Oa=function(n,t){return t.some(function(i){var u;return!(!(n==null||(u=n.properties)===null||u===void 0)&&u[i])})?null:t.map(function(i){var u;return n==null||(u=n.properties)===null||u===void 0?void 0:u[i]}).join(", ")},Sa=Object(je.kea)({path:["scenes","session-recordings","player","metaLogic"],connect:{values:[Lt,["sessionPlayerData"],et,["currentPlayerPosition","scale"]],actions:[Lt,["loadRecordingMetaSuccess"]]},reducers:{loading:[!0,{loadRecordingMetaSuccess:function(){return!1}}]},selectors:{sessionPerson:[function(a){return[a.sessionPlayerData]},function(a){return a==null?void 0:a.person}],description:[function(a){return[a.sessionPerson]},function(a){var n=Oa(a,["$geoip_city_name","$geoip_country_code"]),t=Oa(a,["$browser","$os"]);return[t,n].filter(function(i){return i}).join(" \xB7 ")}],resolution:[function(a){return[a.sessionPlayerData,a.currentPlayerPosition]},function(a,n){var t,i;if(!n)return null;var u=(t=a.snapshotsByWindowId[n.windowId])!==null&&t!==void 0?t:[],h=(i=ht(n,a.metadata.startAndEndTimesByWindowId))!==null&&i!==void 0?i:0,b=Object(pe.C)(u,function(C){return C.timestamp<h&&"width"in C.data});if(b===-1)return null;var S=u[b];return{width:S.data.width,height:S.data.height}}],recordingStartTime:[function(a){return[a.sessionPlayerData]},function(a){var n,t;return a==null||(n=a.metadata)===null||n===void 0||(t=n.segments[0])===null||t===void 0?void 0:t.startTimeEpochMs}]}}),ya=e("./frontend/src/scenes/funnels/funnelUtils.ts"),ma=e("./frontend/src/lib/components/TimezoneAware/index.tsx");function Ca(){var a,n=Object(je.useValues)(Sa),t=n.sessionPerson,i=n.description,u=n.resolution,h=n.scale,b=n.recordingStartTime,S=n.loading;return p.a.createElement(te.a,{className:"player-meta-container"},p.a.createElement(U.a,{className:"player-meta-person",align:"middle",justify:"space-between",wrap:!1},p.a.createElement(U.a,{className:"player-meta-person-title",align:"middle",wrap:!1},S?p.a.createElement(Ft.b,null,p.a.createElement(J.a.Avatar,{active:!0,size:"small",shape:"circle"}),p.a.createElement(J.a,{title:!1,active:!0,paragraph:{rows:1,width:160}})):p.a.createElement(p.a.Fragment,null,p.a.createElement(An.a,{name:t==null?void 0:t.name,email:t==null||(a=t.properties)===null||a===void 0?void 0:a.$email,size:"md",style:{marginRight:"0.5rem"}}),p.a.createElement("span",{className:"email"},p.a.createElement(na.a,{person:t,withIcon:!1})))),p.a.createElement(te.a,null,S?p.a.createElement(J.a,{title:!1,active:!0,paragraph:{rows:1,width:80}}):p.a.createElement("span",{className:"time text-muted"},b&&p.a.createElement(ma.b,{time:Object(Je.a)(b)})))),p.a.createElement(U.a,{className:"player-meta-other",align:"middle",justify:"start"},p.a.createElement(U.a,{className:"player-meta-other-description"},S?p.a.createElement(J.a,{title:!1,active:!0,paragraph:{rows:1}}):p.a.createElement("span",null,i)),p.a.createElement(U.a,{className:"player-meta-other-resolution mt-05"},S?p.a.createElement(J.a,{title:!1,active:!0,paragraph:{rows:1,width:"100%"}}):p.a.createElement("span",null,u?p.a.createElement(p.a.Fragment,null,"Resolution: ",u.width," x ",u.height," (",Object(ya.c)(h),"%)"):p.a.createElement(p.a.Fragment,null,"Resolution: ...")))))}var Pa=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/Console.scss"),xa=e.n(Pa),ba={};ba.insert="head",ba.singleton=!1;var Ia=Z()(xa.a,ba),f=xa.a.locals||{},m=e("./frontend/src/lib/components/LemonButton/index.ts"),O=e("./frontend/src/lib/components/Spinner/Spinner.tsx");function g(){var a=Object(je.useValues)(Lt),n=a.orderedConsoleLogs,t=a.areAllSnapshotsLoaded,i=Object(je.useActions)(Oe.f),u=i.reportRecordingConsoleFeedback,h=Object(je.useActions)(et),b=h.seek,S=Object(oe.useState)(!1),C=We()(S,2),M=C[0],K=C[1],_=function(re,ne){return p.a.createElement("div",{className:"log-line level-".concat(re.level),key:ne,onClick:function(){b(re.playerPosition)}},p.a.createElement("div",{className:"trace-string"},re.parsedTraceURL?p.a.createElement("a",{className:"text-muted",href:re.parsedTraceURL,target:"_blank"},re.parsedTraceString):p.a.createElement("span",{className:"text-muted"},re.parsedTraceString)),p.a.createElement("p",{className:"log-text"},re.parsedPayload))};return p.a.createElement("div",{className:"console-log-container"},p.a.createElement("div",{className:"console-log"},t?n.length>0?p.a.createElement(we.a,null,function(B){var re=B.height,ne=B.width;return p.a.createElement("div",{style:{height:re,width:ne,overflowY:"scroll",paddingBottom:5}},n.slice(0,150).map(function(le,ve){return _(le,ve)}),p.a.createElement("div",null,n.length>150&&p.a.createElement("div",{className:"more-logs-available"},"While console logs are in beta, only 150 logs are displayed.")))}):p.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center",margin:20}},p.a.createElement("h3",{style:{textAlign:"center"}},"There are no console logs for this recording"),p.a.createElement("p",{className:"text-muted",style:{textAlign:"center"}},"For logs to appear, the feature must first be enabled in ",p.a.createElement("code",null,"posthog-js"),"."),p.a.createElement(m.a,{type:"secondary",style:{margin:"0 8px"},href:"https://posthog.com/docs/user-guides/recordings?utm_campaign=session-recording&utm_medium=in-product"},"Learn more")):p.a.createElement("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"}},p.a.createElement(O.a,{size:"lg"}))),p.a.createElement("div",{className:"console-feedback-container"},p.a.createElement("p",{style:{marginBottom:8,textAlign:"center"}},"Are you finding the console log feature useful?"),M?p.a.createElement("p",{className:"text-muted",style:{marginBottom:8,textAlign:"center"}},"Thanks for the input!"):p.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"center"}},[["Yes","\u{1F44D} Yes!"],["No","\u{1F44E} Not really"]].map(function(B,re){return p.a.createElement(m.a,{type:"secondary",key:re,style:{margin:"0 8px"},onClick:function(){K(!0),u(n.length,B[0],"Are you finding the console log feature useful?")}},B[1])}))))}var d=e("./frontend/src/lib/components/Tooltip.tsx");function v(){var a=Object(je.useActions)(et),n=a.togglePlayPause,t=a.seekForward,i=a.seekBackward,u=a.setSpeed,h=a.setRootFrame,b=Object(je.useValues)(et),S=b.isSmallScreen,C=Object(oe.useRef)(null);Object(oe.useEffect)(function(){C.current&&h(C.current)},[C]);var M=function(_){var B;if(!(!((B=_.target)===null||B===void 0)&&B.matches("input")))if(_.key===" ")n(),_.preventDefault();else if(_.key==="ArrowLeft")i();else if(_.key==="ArrowRight")t();else for(var re=0;re<jt.length;re++)_.key===(re+1).toString()&&u(jt[re])};return p.a.createElement(te.a,{className:"session-player-v2",onKeyDown:M,tabIndex:0,flex:1},p.a.createElement(U.a,{className:"session-player-body",wrap:!1},p.a.createElement("div",{className:"player-container ph-no-capture"},p.a.createElement(vn,{ref:C})),!S&&p.a.createElement(l,null)),p.a.createElement(U.a,{className:"player-controller",align:"middle"},p.a.createElement(ia,null)),S&&p.a.createElement(l,null))}var s=Qn.a.TabPane;function l(){var a=Object(je.useValues)($n.a),n=a.featureFlags,t=Object(je.useValues)(Lt),i=t.orderedConsoleLogs,u=Object(je.useActions)(Oe.f),h=u.reportRecordingConsoleViewed,b=n[jn.n.SESSION_CONSOLE];return p.a.createElement(te.a,{className:"player-sidebar"},p.a.createElement("div",{className:"player-meta"},p.a.createElement(Ca,null)),p.a.createElement("div",{className:"player-events"},b?p.a.createElement(Qn.a,{"data-attr":"event-details",defaultActiveKey:"events",style:{display:"flex",flexDirection:"column",height:"100%"},tabBarStyle:{margin:0,marginBottom:8},onChange:function(C){C==="console"&&h(i.length)}},p.a.createElement(s,{tab:"Events",key:"events"},p.a.createElement(rn,null)),p.a.createElement(s,{tab:p.a.createElement("div",null,"Console (beta)",p.a.createElement(d.a,{title:"While console logs are in beta, only 150 logs are displayed."},p.a.createElement(sa.a,{style:{marginLeft:6}}))),key:"console"},p.a.createElement(g,null))):p.a.createElement(rn,null)))}var c=e("./node_modules/antd/es/button/index.js"),y=e("./node_modules/@ant-design/icons/es/icons/ArrowLeftOutlined.js");function w(a){var n=a.isPersonPage,t=n===void 0?!1:n,i=a.onClose;return p.a.createElement(Ke.a,{destroyOnClose:!0,visible:!0,width:"100%",onClose:i,className:"session-player-drawer-v2",closable:!1,style:{zIndex:1061}},p.a.createElement(te.a,{style:{height:"100vh"}},p.a.createElement(U.a,{style:{height:48,borderBottom:"1px solid var(--border)"},align:"middle",justify:"space-between"},p.a.createElement(c.a,{type:"link",onClick:i},p.a.createElement(y.a,null)," Back to ",t?"persons":"recordings"),p.a.createElement("div",{className:"text-muted cursor-pointer flex-center",style:{fontSize:"1.5em",paddingRight:8},onClick:i},p.a.createElement(hn.IconClose,null))),p.a.createElement(U.a,{className:"session-drawer-body"},p.a.createElement(v,null))))}try{w.displayName="SessionPlayerDrawer",w.__docgenInfo={description:"",displayName:"SessionPlayerDrawer",props:{isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx#SessionPlayerDrawer"]={docgenInfo:w.__docgenInfo,name:"SessionPlayerDrawer",path:"frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx#SessionPlayerDrawer"})}catch(a){}},"./frontend/src/scenes/trends/PersonsModal.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return ot});var oe=e("./node_modules/core-js/modules/es.array.concat.js"),p=e("./node_modules/core-js/modules/es.array.find.js"),Ke=e("./node_modules/core-js/modules/es.array.map.js"),Ve=e("./node_modules/core-js/modules/es.object.keys.js"),F=e("./node_modules/core-js/modules/es.object.to-string.js"),Be=e("./node_modules/core-js/modules/es.regexp.exec.js"),Z=e("./node_modules/core-js/modules/es.regexp.to-string.js"),ke=e("./node_modules/core-js/modules/es.string.replace.js"),r=e("./node_modules/react/index.js"),T=e.n(r),vt=e("./node_modules/kea/lib/index.esm.js"),Q=e("./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js"),je=e("./node_modules/@ant-design/icons/es/icons/UsergroupAddOutlined.js"),wt=e("./node_modules/antd/es/modal/index.js"),Xe=e("./node_modules/antd/es/button/index.js"),xe=e("./node_modules/antd/es/skeleton/index.js"),fe=e("./node_modules/antd/es/input/index.js"),P=e("./node_modules/antd/es/select/index.js"),$=e("./frontend/src/types.ts"),Ye=e("./frontend/src/scenes/trends/personsModalLogic.ts"),_e=e("./frontend/src/lib/components/CopyToClipboard.tsx"),Et=e("./frontend/src/lib/utils.tsx"),ct=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),de=e.n(ct),Ze=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss"),Oe=e.n(Ze),Re={};Re.insert="head",Re.singleton=!1;var It=de()(Oe.a,Re),lt=Oe.a.locals||{},pt=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),D=e("./frontend/src/lib/components/PropertiesTable.tsx"),at=e("./frontend/src/lib/components/DateDisplay/index.tsx"),ce=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Dt=e("./frontend/src/lib/api.ts"),o=e("./frontend/src/lib/components/LemonTable/index.ts"),nn=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),Bt=e("./frontend/src/lib/components/icons.tsx"),Wt=e("./frontend/src/lib/components/InsightLabel/index.tsx"),V=e("./frontend/src/lib/colors.ts"),Jt=e("./frontend/src/lib/logic/featureFlagLogic.ts"),xn=e("./frontend/src/lib/constants.tsx"),ca=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),la=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),On=e.n(la),Xn=e("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),Fn=e("./node_modules/@ant-design/icons/es/icons/ArrowRightOutlined.js"),Zn=e("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),Dn=e("./frontend/src/lib/components/Popup/Popup.tsx"),We=e("./frontend/src/lib/components/Link.tsx"),gt=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.scss"),rt=e.n(gt),pe={};pe.insert="head",pe.singleton=!1;var Sn=de()(rt.a,pe),Nt=rt.a.locals||{};function Je(ft){var ze=ft.sessionRecordings,qt=ft.onOpenRecording,Qt=Object(r.useState)(!1),Ct=On()(Qt,2),Fe=Ct[0],Ge=Ct[1],Mt=ze.length===1,zt=Object(r.useCallback)(function(qe){var At=qe.setRef,dt=qe.children;return Mt?T.a.createElement("div",{ref:At},T.a.createElement(We.a,{onClick:function(ht){ht.stopPropagation(),qt(ze[0])}},dt)):T.a.createElement("div",{ref:At,onClick:function(ht){ht.stopPropagation(),Ge(function(Yt){return!Yt})}},dt)},[ze,Ge]);return T.a.createElement(Dn.a,{visible:Fe,placement:"bottom-end",fallbackPlacements:["top-end"],className:"session-recordings-popup",overlay:ze.map(function(qe,At){return T.a.createElement(We.a,{key:qe.session_id,onClick:function(xt){xt.stopPropagation(),Ge(!1),qt(qe)}},T.a.createElement("div",{className:"session-recordings-popup-row"},T.a.createElement(Xn.a,null),"Recording ",At+1))}),onClickOutside:function(){Ge(!1)}},function(qe){var At=qe.setRef;return T.a.createElement(zt,{setRef:At},T.a.createElement(Xe.a,{className:"session-recordings-button","data-attr":"session-recordings-button",icon:T.a.createElement(Xn.a,null)},"Watch recording",Mt?T.a.createElement(Fn.a,null):T.a.createElement(Zn.a,null)))})}try{Je.displayName="MultiRecordingButton",Je.__docgenInfo={description:"",displayName:"MultiRecordingButton",props:{sessionRecordings:{defaultValue:null,description:"",name:"sessionRecordings",required:!0,type:{name:"MatchedRecording[]"}},onOpenRecording:{defaultValue:null,description:"",name:"onOpenRecording",required:!0,type:{name:"(sessionRecording: MatchedRecording) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.tsx#MultiRecordingButton"]={docgenInfo:Je.__docgenInfo,name:"MultiRecordingButton",path:"frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.tsx#MultiRecordingButton"})}catch(ft){}function ot(ft){var ze,qt,Qt,Ct,Fe,Ge,Mt=ft.visible,zt=ft.view,qe=ft.filters,At=ft.onSaveCohort,dt=ft.showModalActions,xt=dt===void 0?!0:dt,ht=ft.aggregationTargetLabel,Yt=Object(vt.useValues)(Ye.b),ue=Yt.people,In=Yt.loadingMorePeople,Cn=Yt.firstLoadedPeople,ea=Yt.searchTerm,$n=Yt.isInitialLoad,jn=Yt.peopleParams,ta=Yt.actorLabel,Gt=Yt.sessionRecordingId,z=Object(vt.useActions)(Ye.b),ee=z.hidePeople,Ae=z.loadMorePeople,Ce=z.setFirstLoadedActors,Rt=z.setPersonsModalFilters,Pe=z.setSearchTerm,Ue=z.switchToDataPoint,Xt=z.openRecordingModal,Lt=z.closeRecordingModal,an=Object(vt.useValues)(Jt.a),en=an.featureFlags,Tt=Object(r.useMemo)(function(){var it,Te,Ot;return $n?"Loading ".concat(ht.plural,"\u2026"):qe.shown_as==="Stickiness"?T.a.createElement(T.a.Fragment,null,T.a.createElement(pt.b,{value:(ue==null?void 0:ue.label)||"",disablePopover:!0})," stickiness on day ",ue==null?void 0:ue.day):qe.display==="ActionsBarValue"||qe.display==="ActionsPie"?T.a.createElement(pt.b,{value:(ue==null?void 0:ue.label)||"",disablePopover:!0}):qe.insight===$.s.FUNNELS?T.a.createElement(T.a.Fragment,null,((it=ue==null?void 0:ue.funnelStep)!==null&&it!==void 0?it:0)>=0?"Completed":"Dropped off at"," step"," ",Math.abs((Te=ue==null?void 0:ue.funnelStep)!==null&&Te!==void 0?Te:0)," \u2022 ",T.a.createElement(pt.b,{value:(ue==null?void 0:ue.label)||"",disablePopover:!0})," ",ue!=null&&ue.breakdown_value?"\u2022 ".concat(ue.breakdown_value):""):qe.insight===$.s.PATHS?T.a.createElement(T.a.Fragment,null,ue!=null&&ue.pathsDropoff?"Dropped off after":"Completed"," step"," ",T.a.createElement(pt.b,{value:(ue==null?void 0:ue.label.replace(/(^[0-9]+_)/,""))||"",disablePopover:!0})):T.a.createElement(T.a.Fragment,null,Object(Et.j)(ta)," list on"," ",T.a.createElement(at.a,{interval:qe.interval||"day",date:(ue==null||(Ot=ue.day)===null||Ot===void 0?void 0:Ot.toString())||""}))},[qe,ue,$n]),jt=en[xn.n.NEW_INSIGHT_COHORTS],et=!1,Pn=(zt===$.s.TRENDS||zt===$.s.STICKINESS||!!jt&&(zt===$.s.FUNNELS||zt===$.s.PATHS))&&xt,dn=Object(V.c)("white",ue==null||(ze=ue.crossDataset)===null||ze===void 0?void 0:ze.length),yt=!!(!(ue==null||(qt=ue.crossDataset)===null||qt===void 0)&&qt.find(function(it){var Te=it.action;return(Te==null?void 0:Te.math)&&Te.math!=="total"})),fn=!!(!(ue==null||(Qt=ue.crossDataset)===null||Qt===void 0)&&Qt.find(function(it){var Te=it.action;return Te==null?void 0:Te.order}));return T.a.createElement(T.a.Fragment,null,!!Gt&&T.a.createElement(ca.a,{onClose:Lt}),T.a.createElement(wt.a,{title:Tt,visible:Mt,onCancel:ee,footer:ue&&ue.count>0&&(et||Pn)&&T.a.createElement(T.a.Fragment,null,et&&T.a.createElement(Xe.a,{icon:T.a.createElement(Q.a,null),href:Dt.a.actions.determinePeopleCsvUrl({label:ue.label,action:ue.action,date_from:ue.day,date_to:ue.day,breakdown_value:ue.breakdown_value},qe),style:{marginRight:8},"data-attr":"person-modal-download-csv"},"Download CSV"),Pn&&T.a.createElement(Xe.a,{onClick:At,icon:T.a.createElement(je.a,null),"data-attr":"person-modal-save-as-cohort"},"Save as cohort")),width:600,className:"person-modal"},$n?T.a.createElement("div",{style:{padding:16}},T.a.createElement(xe.a,{active:!0})):ue&&T.a.createElement(T.a.Fragment,null,T.a.createElement(fe.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for persons by email, name, or ID",onChange:function(Te){Pe(Te.target.value),Te.target.value||Ce(Cn)},value:ea,onSearch:function(Te){return Te?Rt(Te,ue,qe):Ce(Cn)}}),en[xn.n.MULTI_POINT_PERSON_MODAL]&&!!(!((Ct=ue.crossDataset)===null||Ct===void 0)&&Ct.length)&&ue.seriesId!==void 0&&T.a.createElement("div",{className:"data-point-selector"},T.a.createElement(P.a,{value:ue.seriesId,onChange:function(Te){return Ue(Te)}},ue.crossDataset.map(function(it){var Te,Ot;return T.a.createElement(P.a.Option,{value:it.id,key:"".concat((Te=it.action)===null||Te===void 0?void 0:Te.id).concat(it.breakdown_value)},T.a.createElement(Wt.b,{seriesColor:dn[it.id],action:it.action,breakdownValue:it.breakdown_value===""?"None":(Ot=it.breakdown_value)===null||Ot===void 0?void 0:Ot.toString(),showCountedByTag:yt,hasMultipleSeries:fn}))}))),T.a.createElement("div",{className:"user-count-subheader"},T.a.createElement(Bt.IconPersonFilled,{style:{fontSize:"1.125rem",marginRight:"0.5rem"}}),T.a.createElement("span",null,"This list contains"," ",T.a.createElement("b",null,ue.count," unique ",ht.plural),(jn==null?void 0:jn.pointValue)!==void 0&&(!(!((Fe=jn.action)===null||Fe===void 0)&&Fe.math)||((Ge=jn.action)===null||Ge===void 0?void 0:Ge.math)==="total")&&T.a.createElement(T.a.Fragment,null," ","who performed the event"," ",T.a.createElement("b",null,jn.pointValue," total"," ",Object(Et.qb)(jn.pointValue,"time",void 0,!1))),".")),ue.count>0?T.a.createElement(o.a,{columns:[{title:"Person",key:"person",render:function(Te,Ot){return T.a.createElement(Pt,{actor:Ot})}},{width:0,title:"Recordings",key:"recordings",render:function(Te,Ot){var Ht,un;if(((Ht=Ot.matched_recordings)===null||Ht===void 0?void 0:Ht.length)&&((un=Ot.matched_recordings)===null||un===void 0?void 0:un.length)>0)return T.a.createElement(Je,{sessionRecordings:Ot.matched_recordings,onOpenRecording:function(vn){Xt(vn.session_id)}})}}],className:"persons-table",rowKey:"id",expandable:{expandedRowRender:function(Te){var Ot=Te.properties;return Object.keys(Ot).length?T.a.createElement(D.a,{properties:Ot}):"This person has no properties."}},embedded:!0,showHeader:!1,dataSource:ue.people,nouns:["person","persons"]}):T.a.createElement("div",{className:"person-row-container person-row"},"We couldn't find any matching ",ht.plural," for this data point."),(ue==null?void 0:ue.next)&&T.a.createElement("div",{style:{margin:"1rem",textAlign:"center"}},T.a.createElement(Xe.a,{type:"primary",style:{color:"white"},onClick:Ae,loading:In},"Load more ",ht.plural)))))}function Pt(ft){var ze=ft.actor;return Object(Et.W)(ze)?T.a.createElement("div",{key:ze.id,className:"person-row"},T.a.createElement("div",{className:"person-ids"},T.a.createElement("strong",null,T.a.createElement(nn.a,{actor:ze})))):T.a.createElement("div",{key:ze.id,className:"person-ids"},T.a.createElement("strong",null,T.a.createElement(ce.a,{person:ze,withIcon:!1})),T.a.createElement(_e.a,{explicitValue:ze.distinct_ids[0],iconStyle:{color:"var(--primary)"},iconPosition:"end",className:"text-small text-muted-alt"},Object(Et.kb)(ze.distinct_ids[0],32)))}try{ot.displayName="PersonsModal",ot.__docgenInfo={description:"",displayName:"PersonsModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},onSaveCohort:{defaultValue:null,description:"",name:"onSaveCohort",required:!0,type:{name:"() => void"}},showModalActions:{defaultValue:{value:"true"},description:"",name:"showModalActions",required:!1,type:{name:"boolean"}},aggregationTargetLabel:{defaultValue:null,description:"",name:"aggregationTargetLabel",required:!0,type:{name:"{ singular: string; plural: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"]={docgenInfo:ot.__docgenInfo,name:"PersonsModal",path:"frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"})}catch(ft){}try{Pt.displayName="ActorRow",Pt.__docgenInfo={description:"",displayName:"ActorRow",props:{actor:{defaultValue:null,description:"",name:"actor",required:!0,type:{name:"ActorType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"]={docgenInfo:Pt.__docgenInfo,name:"ActorRow",path:"frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"})}catch(ft){}},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(Ee,q,e){"use strict";e.d(q,"a",function(){return Z});var oe=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),p=e.n(oe),Ke=e("./node_modules/react/index.js"),Ve=e.n(Ke),F=e("./node_modules/antd/es/modal/index.js"),Be=e("./node_modules/antd/es/input/index.js");function Z(ke){var r=ke.onOk,T=ke.onCancel,vt=ke.visible,Q=Object(Ke.useState)(""),je=p()(Q,2),wt=je[0],Xe=je[1];return Ve.a.createElement(F.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){r(wt),Xe("")},onCancel:T,visible:vt},Ve.a.createElement("div",{className:"mb"},Ve.a.createElement(Be.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:wt,"data-attr":"cohort-name",onChange:function(fe){return Xe(fe.target.value)}})))}try{Z.displayName="SaveCohortModal",Z.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:Z.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(ke){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(Ee,q,e){"use strict";var oe=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),p=e("./node_modules/react/index.js"),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},Ve=Ke,F=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Be=function(r,T){return p.createElement(F.a,Object(oe.a)(Object(oe.a)({},r),{},{ref:T,icon:Ve}))};Be.displayName="BarChartOutlined";var Z=q.a=p.forwardRef(Be)},"./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js":function(Ee,q,e){"use strict";var oe=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),p=e("./node_modules/react/index.js"),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Ve=Ke,F=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Be=function(r,T){return p.createElement(F.a,Object(oe.a)(Object(oe.a)({},r),{},{ref:T,icon:Ve}))};Be.displayName="DownloadOutlined";var Z=q.a=p.forwardRef(Be)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(Ee,q,e){"use strict";var oe=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),p=e("./node_modules/react/index.js"),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},Ve=Ke,F=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Be=function(r,T){return p.createElement(F.a,Object(oe.a)(Object(oe.a)({},r),{},{ref:T,icon:Ve}))};Be.displayName="OrderedListOutlined";var Z=q.a=p.forwardRef(Be)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(Ee,q,e){"use strict";var oe=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),p=e("./node_modules/react/index.js"),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},Ve=Ke,F=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Be=function(r,T){return p.createElement(F.a,Object(oe.a)(Object(oe.a)({},r),{},{ref:T,icon:Ve}))};Be.displayName="PercentageOutlined";var Z=q.a=p.forwardRef(Be)},"./node_modules/antd/es/slider/index.js":function(Ee,q,e){"use strict";var oe=e("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),Ke=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),Ve=e("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),F=e("./node_modules/react/index.js"),Be=e.n(F),Z=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ke=e("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=e("./node_modules/@babel/runtime/helpers/esm/createClass.js"),T=e("./node_modules/@babel/runtime/helpers/esm/inherits.js"),vt=e("./node_modules/@babel/runtime/helpers/esm/createSuper.js"),Q={};function je(f,m){}function wt(f,m){}function Xe(){Q={}}function xe(f,m,O){!m&&!Q[O]&&(f(!1,O),Q[O]=!0)}function fe(f,m){xe(je,f,m)}function P(f,m){xe(wt,f,m)}var $=fe,Ye=function(m){var O,g,d=m.className,v=m.included,s=m.vertical,l=m.style,c=m.length,y=m.offset,w=m.reverse;c<0&&(w=!w,c=Math.abs(c),y=100-y);var a=s?(O={},Object(p.a)(O,w?"top":"bottom","".concat(y,"%")),Object(p.a)(O,w?"bottom":"top","auto"),Object(p.a)(O,"height","".concat(c,"%")),O):(g={},Object(p.a)(g,w?"right":"left","".concat(y,"%")),Object(p.a)(g,w?"left":"right","auto"),Object(p.a)(g,"width","".concat(c,"%")),g),n=Object(Z.a)(Object(Z.a)({},l),a);return v?Be.a.createElement("div",{className:d,style:n}):null},_e=Ye,Et=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),ct=e("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),de=e("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");function Ze(f,m){for(;!Object.prototype.hasOwnProperty.call(f,m)&&(f=Object(de.a)(f),f!==null););return f}function Oe(f,m,O){return typeof Reflect!="undefined"&&Reflect.get?Oe=Reflect.get:Oe=function(d,v,s){var l=Ze(d,v);if(!!l){var c=Object.getOwnPropertyDescriptor(l,v);return c.get?c.get.call(s):c.value}},Oe(f,m,O||f)}var Re=e("./node_modules/react-dom/index.js"),It=e.n(Re);function lt(f,m,O,g){var d=It.a.unstable_batchedUpdates?function(s){It.a.unstable_batchedUpdates(O,s)}:O;return f.addEventListener&&f.addEventListener(m,d,g),{remove:function(){f.removeEventListener&&f.removeEventListener(m,d)}}}var pt=e("./node_modules/classnames/index.js"),D=e.n(pt),at=function(m,O,g,d,v,s){$(g?d>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var l=Object.keys(O).map(parseFloat).sort(function(y,w){return y-w});if(g&&d)for(var c=v;c<=s;c+=d)l.indexOf(c)===-1&&l.push(c);return l},ce=function(m){var O=m.prefixCls,g=m.vertical,d=m.reverse,v=m.marks,s=m.dots,l=m.step,c=m.included,y=m.lowerBound,w=m.upperBound,a=m.max,n=m.min,t=m.dotStyle,i=m.activeDotStyle,u=a-n,h=at(g,v,s,l,n,a).map(function(b){var S,C="".concat(Math.abs(b-n)/u*100,"%"),M=!c&&b===w||c&&b<=w&&b>=y,K=g?Object(Z.a)(Object(Z.a)({},t),{},Object(p.a)({},d?"top":"bottom",C)):Object(Z.a)(Object(Z.a)({},t),{},Object(p.a)({},d?"right":"left",C));M&&(K=Object(Z.a)(Object(Z.a)({},K),i));var _=D()((S={},Object(p.a)(S,"".concat(O,"-dot"),!0),Object(p.a)(S,"".concat(O,"-dot-active"),M),Object(p.a)(S,"".concat(O,"-dot-reverse"),d),S));return Be.a.createElement("span",{className:_,style:K,key:b})});return Be.a.createElement("div",{className:"".concat(O,"-step")},h)},Dt=ce,o=function(m){var O=m.className,g=m.vertical,d=m.reverse,v=m.marks,s=m.included,l=m.upperBound,c=m.lowerBound,y=m.max,w=m.min,a=m.onClickLabel,n=Object.keys(v),t=y-w,i=n.map(parseFloat).sort(function(u,h){return u-h}).map(function(u){var h,b=v[u],S=Object(oe.a)(b)==="object"&&!Be.a.isValidElement(b),C=S?b.label:b;if(!C&&C!==0)return null;var M=!s&&u===l||s&&u<=l&&u>=c,K=D()((h={},Object(p.a)(h,"".concat(O,"-text"),!0),Object(p.a)(h,"".concat(O,"-text-active"),M),h)),_=Object(p.a)({marginBottom:"-50%"},d?"top":"bottom","".concat((u-w)/t*100,"%")),B=Object(p.a)({transform:"translateX(".concat(d?"50%":"-50%",")"),msTransform:"translateX(".concat(d?"50%":"-50%",")")},d?"right":"left","".concat((u-w)/t*100,"%")),re=g?_:B,ne=S?Object(Z.a)(Object(Z.a)({},re),b.style):re;return Be.a.createElement("span",{className:K,style:ne,key:u,onMouseDown:function(ve){return a(ve,u)},onTouchStart:function(ve){return a(ve,u)}},C)});return Be.a.createElement("div",{className:O},i)},nn=o,Bt=["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"],Wt=function(f){Object(T.a)(O,f);var m=Object(vt.a)(O);function O(){var g;Object(ke.a)(this,O);for(var d=arguments.length,v=new Array(d),s=0;s<d;s++)v[s]=arguments[s];return g=m.call.apply(m,[this].concat(v)),g.state={clickFocused:!1},g.onMouseUpListener=void 0,g.handle=void 0,g.setHandleRef=function(l){g.handle=l},g.handleMouseUp=function(){document.activeElement===g.handle&&g.setClickFocus(!0)},g.handleMouseDown=function(l){l.preventDefault(),g.focus()},g.handleBlur=function(){g.setClickFocus(!1)},g.handleKeyDown=function(){g.setClickFocus(!1)},g}return Object(r.a)(O,[{key:"componentDidMount",value:function(){this.onMouseUpListener=lt(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(d){this.setState({clickFocused:d})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var d,v,s=this.props,l=s.prefixCls,c=s.vertical,y=s.reverse,w=s.offset,a=s.style,n=s.disabled,t=s.min,i=s.max,u=s.value,h=s.tabIndex,b=s.ariaLabel,S=s.ariaLabelledBy,C=s.ariaValueTextFormatter,M=Object(Et.a)(s,Bt),K=D()(this.props.className,Object(p.a)({},"".concat(l,"-handle-click-focused"),this.state.clickFocused)),_=c?(d={},Object(p.a)(d,y?"top":"bottom","".concat(w,"%")),Object(p.a)(d,y?"bottom":"top","auto"),Object(p.a)(d,"transform",y?null:"translateY(+50%)"),d):(v={},Object(p.a)(v,y?"right":"left","".concat(w,"%")),Object(p.a)(v,y?"left":"right","auto"),Object(p.a)(v,"transform","translateX(".concat(y?"+":"-","50%)")),v),B=Object(Z.a)(Object(Z.a)({},a),_),re=h||0;(n||h===null)&&(re=null);var ne;return C&&(ne=C(u)),Be.a.createElement("div",Object(Ke.a)({ref:this.setHandleRef,tabIndex:re},M,{className:K,style:B,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":t,"aria-valuemax":i,"aria-valuenow":u,"aria-disabled":!!n,"aria-label":b,"aria-labelledby":S,"aria-valuetext":ne}))}}]),O}(Be.a.Component),V={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(m){var O=m.keyCode;if(m.altKey&&!m.ctrlKey||m.metaKey||O>=V.F1&&O<=V.F12)return!1;switch(O){case V.ALT:case V.CAPS_LOCK:case V.CONTEXT_MENU:case V.CTRL:case V.DOWN:case V.END:case V.ESC:case V.HOME:case V.INSERT:case V.LEFT:case V.MAC_FF_META:case V.META:case V.NUMLOCK:case V.NUM_CENTER:case V.PAGE_DOWN:case V.PAGE_UP:case V.PAUSE:case V.PRINT_SCREEN:case V.RIGHT:case V.SHIFT:case V.UP:case V.WIN_KEY:case V.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(m){if(m>=V.ZERO&&m<=V.NINE||m>=V.NUM_ZERO&&m<=V.NUM_MULTIPLY||m>=V.A&&m<=V.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&m===0)return!0;switch(m){case V.SPACE:case V.QUESTION_MARK:case V.NUM_PLUS:case V.NUM_MINUS:case V.NUM_PERIOD:case V.NUM_DIVISION:case V.SEMICOLON:case V.DASH:case V.EQUALS:case V.COMMA:case V.PERIOD:case V.SLASH:case V.APOSTROPHE:case V.SINGLE_QUOTE:case V.OPEN_SQUARE_BRACKET:case V.BACKSLASH:case V.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Jt=V;function xn(f,m){try{return Object.keys(m).some(function(O){return f.target===Object(Re.findDOMNode)(m[O])})}catch(O){return!1}}function ca(f,m){var O=m.min,g=m.max;return f<O||f>g}function la(f){return f.touches.length>1||f.type.toLowerCase()==="touchend"&&f.touches.length>0}function On(f,m){var O=m.marks,g=m.step,d=m.min,v=m.max,s=Object.keys(O).map(parseFloat);if(g!==null){var l=Math.pow(10,Xn(g)),c=Math.floor((v*l-d*l)/(g*l)),y=Math.min((f-d)/g,c),w=Math.round(y)*g+d;s.push(w)}var a=s.map(function(n){return Math.abs(f-n)});return s[a.indexOf(Math.min.apply(Math,Object(ct.a)(a)))]}function Xn(f){var m=f.toString(),O=0;return m.indexOf(".")>=0&&(O=m.length-m.indexOf(".")-1),O}function Fn(f,m){return f?m.clientY:m.pageX}function Zn(f,m){return f?m.touches[0].clientY:m.touches[0].pageX}function Dn(f,m){var O=m.getBoundingClientRect();return f?O.top+O.height*.5:window.pageXOffset+O.left+O.width*.5}function We(f,m){var O=m.max,g=m.min;return f<=g?g:f>=O?O:f}function gt(f,m){var O=m.step,g=isFinite(On(f,m))?On(f,m):0;return O===null?g:parseFloat(g.toFixed(Xn(O)))}function rt(f){f.stopPropagation(),f.preventDefault()}function pe(f,m,O){var g={increase:function(l,c){return l+c},decrease:function(l,c){return l-c}},d=g[f](Object.keys(O.marks).indexOf(JSON.stringify(m)),1),v=Object.keys(O.marks)[d];return O.step?g[f](m,O.step):!!Object.keys(O.marks).length&&!!O.marks[v]?O.marks[v]:m}function Sn(f,m,O){var g="increase",d="decrease",v=g;switch(f.keyCode){case Jt.UP:v=m&&O?d:g;break;case Jt.RIGHT:v=!m&&O?d:g;break;case Jt.DOWN:v=m&&O?g:d;break;case Jt.LEFT:v=!m&&O?g:d;break;case Jt.END:return function(s,l){return l.max};case Jt.HOME:return function(s,l){return l.min};case Jt.PAGE_UP:return function(s,l){return s+l.step*2};case Jt.PAGE_DOWN:return function(s,l){return s-l.step*2};default:return}return function(s,l){return pe(v,s,l)}}var Nt=["index"];function Je(){}function ot(f){var m,O;return O=m=function(g){Object(T.a)(v,g);var d=Object(vt.a)(v);function v(s){var l;Object(ke.a)(this,v),l=d.call(this,s),l.handlesRefs=void 0,l.sliderRef=void 0,l.document=void 0,l.dragOffset=void 0,l.prevMovedHandleIndex=void 0,l.onTouchMoveListener=void 0,l.onTouchUpListener=void 0,l.onMouseMoveListener=void 0,l.onMouseUpListener=void 0,l.dragTrack=void 0,l.startBounds=void 0,l.onDown=function(n,t){var i=t,u=l.props,h=u.draggableTrack,b=u.vertical,S=l.state.bounds,C=h&&l.positionGetValue?l.positionGetValue(i)||[]:[],M=xn(n,l.handlesRefs);if(l.dragTrack=h&&S.length>=2&&!M&&!C.map(function(_,B){var re=B?!0:_>=S[B];return B===C.length-1?_<=S[B]:re}).some(function(_){return!_}),l.dragTrack)l.dragOffset=i,l.startBounds=Object(ct.a)(S);else{if(!M)l.dragOffset=0;else{var K=Dn(b,n.target);l.dragOffset=i-K,i=K}l.onStart(i)}},l.onMouseDown=function(n){if(n.button===0){l.removeDocumentEvents();var t=l.props.vertical,i=Fn(t,n);l.onDown(n,i),l.addDocumentMouseEvents()}},l.onTouchStart=function(n){if(!la(n)){var t=l.props.vertical,i=Zn(t,n);l.onDown(n,i),l.addDocumentTouchEvents(),rt(n)}},l.onFocus=function(n){var t=l.props,i=t.onFocus,u=t.vertical;if(xn(n,l.handlesRefs)&&!l.dragTrack){var h=Dn(u,n.target);l.dragOffset=0,l.onStart(h),rt(n),i&&i(n)}},l.onBlur=function(n){var t=l.props.onBlur;l.dragTrack||l.onEnd(),t&&t(n)},l.onMouseUp=function(){l.handlesRefs[l.prevMovedHandleIndex]&&l.handlesRefs[l.prevMovedHandleIndex].clickFocus()},l.onMouseMove=function(n){if(!l.sliderRef){l.onEnd();return}var t=Fn(l.props.vertical,n);l.onMove(n,t-l.dragOffset,l.dragTrack,l.startBounds)},l.onTouchMove=function(n){if(la(n)||!l.sliderRef){l.onEnd();return}var t=Zn(l.props.vertical,n);l.onMove(n,t-l.dragOffset,l.dragTrack,l.startBounds)},l.onKeyDown=function(n){l.sliderRef&&xn(n,l.handlesRefs)&&l.onKeyboard(n)},l.onClickMarkLabel=function(n,t){n.stopPropagation(),l.onChange({value:t}),l.setState({value:t},function(){return l.onEnd(!0)})},l.saveSlider=function(n){l.sliderRef=n};var c=s.step,y=s.max,w=s.min,a=isFinite(y-w)?(y-w)%c===0:!0;return $(c&&Math.floor(c)===c?a:!0,"Slider[max] - Slider[min] (".concat(y-w,") should be a multiple of Slider[step] (").concat(c,")")),l.handlesRefs={},l}return Object(r.a)(v,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var l=this.props,c=l.autoFocus,y=l.disabled;c&&!y&&this.focus()}},{key:"componentWillUnmount",value:function(){Oe(Object(de.a)(v.prototype),"componentWillUnmount",this)&&Oe(Object(de.a)(v.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var l=this.sliderRef,c=this.props,y=c.vertical,w=c.reverse,a=l.getBoundingClientRect();return y?w?a.bottom:a.top:window.pageXOffset+(w?a.right:a.left)}},{key:"getSliderLength",value:function(){var l=this.sliderRef;if(!l)return 0;var c=l.getBoundingClientRect();return this.props.vertical?c.height:c.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=lt(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=lt(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=lt(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=lt(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var l;this.props.disabled||(l=this.handlesRefs[0])===null||l===void 0||l.focus()}},{key:"blur",value:function(){var l=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(c){var y,w;(y=l.handlesRefs[c])===null||y===void 0||(w=y.blur)===null||w===void 0||w.call(y)})}},{key:"calcValue",value:function(l){var c=this.props,y=c.vertical,w=c.min,a=c.max,n=Math.abs(Math.max(l,0)/this.getSliderLength()),t=y?(1-n)*(a-w)+w:n*(a-w)+w;return t}},{key:"calcValueByPos",value:function(l){var c=this.props.reverse?-1:1,y=c*(l-this.getSliderStart()),w=this.trimAlignValue(this.calcValue(y));return w}},{key:"calcOffset",value:function(l){var c=this.props,y=c.min,w=c.max,a=(l-y)/(w-y);return Math.max(0,a*100)}},{key:"saveHandle",value:function(l,c){this.handlesRefs[l]=c}},{key:"render",value:function(){var l,c=this.props,y=c.prefixCls,w=c.className,a=c.marks,n=c.dots,t=c.step,i=c.included,u=c.disabled,h=c.vertical,b=c.reverse,S=c.min,C=c.max,M=c.children,K=c.maximumTrackStyle,_=c.style,B=c.railStyle,re=c.dotStyle,ne=c.activeDotStyle,le=Oe(Object(de.a)(v.prototype),"render",this).call(this),ve=le.tracks,Se=le.handles,me=D()(y,(l={},Object(p.a)(l,"".concat(y,"-with-marks"),Object.keys(a).length),Object(p.a)(l,"".concat(y,"-disabled"),u),Object(p.a)(l,"".concat(y,"-vertical"),h),Object(p.a)(l,w,w),l));return Be.a.createElement("div",{ref:this.saveSlider,className:me,onTouchStart:u?Je:this.onTouchStart,onMouseDown:u?Je:this.onMouseDown,onMouseUp:u?Je:this.onMouseUp,onKeyDown:u?Je:this.onKeyDown,onFocus:u?Je:this.onFocus,onBlur:u?Je:this.onBlur,style:_},Be.a.createElement("div",{className:"".concat(y,"-rail"),style:Object(Z.a)(Object(Z.a)({},K),B)}),ve,Be.a.createElement(Dt,{prefixCls:y,vertical:h,reverse:b,marks:a,dots:n,step:t,included:i,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:C,min:S,dotStyle:re,activeDotStyle:ne}),Se,Be.a.createElement(nn,{className:"".concat(y,"-mark"),onClickLabel:u?Je:this.onClickMarkLabel,vertical:h,marks:a,included:i,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:C,min:S,reverse:b}),M)}}]),v}(f),m.displayName="ComponentEnhancer(".concat(f.displayName,")"),m.defaultProps=Object(Z.a)(Object(Z.a)({},f.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(d){var v=d.index,s=Object(Et.a)(d,Nt);return delete s.dragging,s.value===null?null:Be.a.createElement(Wt,Object(Ke.a)({},s,{key:v}))},onBeforeChange:Je,onChange:Je,onAfterChange:Je,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),O}var Pt=function(f){Object(T.a)(O,f);var m=Object(vt.a)(O);function O(g){var d;Object(ke.a)(this,O),d=m.call(this,g),d.positionGetValue=function(l){return[]},d.startValue=void 0,d.startPosition=void 0,d.prevMovedHandleIndex=void 0,d.onEnd=function(l){var c=d.state.dragging;d.removeDocumentEvents(),(c||l)&&d.props.onAfterChange(d.getValue()),d.setState({dragging:!1})};var v=g.defaultValue!==void 0?g.defaultValue:g.min,s=g.value!==void 0?g.value:v;return d.state={value:d.trimAlignValue(s),dragging:!1},$(!("minimumTrackStyle"in g),"minimumTrackStyle will be deprecated, please use trackStyle instead."),$(!("maximumTrackStyle"in g),"maximumTrackStyle will be deprecated, please use railStyle instead."),d}return Object(r.a)(O,[{key:"calcValueByPos",value:function(d){return 0}},{key:"calcOffset",value:function(d){return 0}},{key:"saveHandle",value:function(d,v){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(d,v){var s=this.props,l=s.min,c=s.max,y=s.value,w=s.onChange;if("min"in this.props||"max"in this.props){var a=y!==void 0?y:v.value,n=this.trimAlignValue(a,this.props);n!==v.value&&(this.setState({value:n}),!(l===d.min&&c===d.max)&&ca(a,this.props)&&w(n))}}},{key:"onChange",value:function(d){var v=this.props,s=!("value"in v),l=d.value>this.props.max?Object(Z.a)(Object(Z.a)({},d),{},{value:this.props.max}):d;s&&this.setState(l);var c=l.value;v.onChange(c)}},{key:"onStart",value:function(d){this.setState({dragging:!0});var v=this.props,s=this.getValue();v.onBeforeChange(s);var l=this.calcValueByPos(d);this.startValue=l,this.startPosition=d,l!==s&&(this.prevMovedHandleIndex=0,this.onChange({value:l}))}},{key:"onMove",value:function(d,v){rt(d);var s=this.state.value,l=this.calcValueByPos(v);l!==s&&this.onChange({value:l})}},{key:"onKeyboard",value:function(d){var v=this.props,s=v.reverse,l=v.vertical,c=Sn(d,l,s);if(c){rt(d);var y=this.state,w=y.value,a=c(w,this.props),n=this.trimAlignValue(a);if(n===w)return;this.onChange({value:n}),this.props.onAfterChange(n),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var d=this.props.startPoint||this.props.min;return this.state.value>d?d:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(d===null)return null;var s=Object(Z.a)(Object(Z.a)({},this.props),v),l=We(d,s);return gt(l,s)}},{key:"render",value:function(){var d=this,v=this.props,s=v.prefixCls,l=v.vertical,c=v.included,y=v.disabled,w=v.minimumTrackStyle,a=v.trackStyle,n=v.handleStyle,t=v.tabIndex,i=v.ariaLabelForHandle,u=v.ariaLabelledByForHandle,h=v.ariaValueTextFormatterForHandle,b=v.min,S=v.max,C=v.startPoint,M=v.reverse,K=v.handle,_=this.state,B=_.value,re=_.dragging,ne=this.calcOffset(B),le=K({className:"".concat(s,"-handle"),prefixCls:s,vertical:l,offset:ne,value:B,dragging:re,disabled:y,min:b,max:S,reverse:M,index:0,tabIndex:t,ariaLabel:i,ariaLabelledBy:u,ariaValueTextFormatter:h,style:n[0]||n,ref:function(W){return d.saveHandle(0,W)}}),ve=C!==void 0?this.calcOffset(C):0,Se=a[0]||a,me=Be.a.createElement(_e,{className:"".concat(s,"-track"),vertical:l,included:c,offset:ve,reverse:M,length:ne-ve,style:Object(Z.a)(Object(Z.a)({},w),Se)});return{tracks:me,handles:le}}}]),O}(Be.a.Component),ft=ot(Pt),ze=function(m){var O=m.value,g=m.handle,d=m.bounds,v=m.props,s=v.allowCross,l=v.pushable,c=Number(l),y=We(O,v),w=y;return!s&&g!=null&&d!==void 0&&(g>0&&y<=d[g-1]+c&&(w=d[g-1]+c),g<d.length-1&&y>=d[g+1]-c&&(w=d[g+1]-c)),gt(w,v)},qt=function(f){Object(T.a)(O,f);var m=Object(vt.a)(O);function O(g){var d;Object(ke.a)(this,O),d=m.call(this,g),d.startValue=void 0,d.startPosition=void 0,d.prevMovedHandleIndex=void 0,d.internalPointsCache=void 0,d.handlesRefs=void 0,d.dragTrack=void 0,d.positionGetValue=function(t){var i=d.getValue(),u=d.calcValueByPos(t),h=d.getClosestBound(u),b=d.getBoundNeedMoving(u,h),S=i[b];if(u===S)return null;var C=Object(ct.a)(i);return C[b]=u,C},d.onEnd=function(t){var i=d.state.handle;d.removeDocumentEvents(),i||(d.dragTrack=!1),(i!==null||t)&&d.props.onAfterChange(d.getValue()),d.setState({handle:null})};var v=g.count,s=g.min,l=g.max,c=Array.apply(void 0,Object(ct.a)(Array(v+1))).map(function(){return s}),y="defaultValue"in g?g.defaultValue:c,w=g.value!==void 0?g.value:y,a=w.map(function(t,i){return ze({value:t,handle:i,props:g})}),n=a[0]===l?0:a.length-1;return d.state={handle:null,recent:n,bounds:a},d}return Object(r.a)(O,[{key:"calcValueByPos",value:function(d){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(d){return 0}},{key:"saveHandle",value:function(d,v){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(d,v){var s=this,l=this.props,c=l.onChange,y=l.value,w=l.min,a=l.max;if(("min"in this.props||"max"in this.props)&&!(w===d.min&&a===d.max)){var n=y||v.bounds;if(n.some(function(i){return ca(i,s.props)})){var t=n.map(function(i){return We(i,s.props)});c(t)}}}},{key:"onChange",value:function(d){var v=this.props,s=!("value"in v);if(s)this.setState(d);else{var l={};["handle","recent"].forEach(function(w){d[w]!==void 0&&(l[w]=d[w])}),Object.keys(l).length&&this.setState(l)}var c=Object(Z.a)(Object(Z.a)({},this.state),d),y=c.bounds;v.onChange(y)}},{key:"onStart",value:function(d){var v=this.props,s=this.state,l=this.getValue();v.onBeforeChange(l);var c=this.calcValueByPos(d);this.startValue=c,this.startPosition=d;var y=this.getClosestBound(c);this.prevMovedHandleIndex=this.getBoundNeedMoving(c,y),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var w=l[this.prevMovedHandleIndex];if(c!==w){var a=Object(ct.a)(s.bounds);a[this.prevMovedHandleIndex]=c,this.onChange({bounds:a})}}},{key:"onMove",value:function(d,v,s,l){rt(d);var c=this.state,y=this.props,w=y.max||100,a=y.min||0;if(s){var n=y.vertical?-v:v;n=y.reverse?-n:n;var t=w-Math.max.apply(Math,Object(ct.a)(l)),i=a-Math.min.apply(Math,Object(ct.a)(l)),u=Math.min(Math.max(n/(this.getSliderLength()/(w-a)),i),t),h=l.map(function(C){return Math.floor(Math.max(Math.min(C+u,w),a))});c.bounds.map(function(C,M){return C===h[M]}).some(function(C){return!C})&&this.onChange({bounds:h});return}var b=this.calcValueByPos(v),S=c.bounds[c.handle];b!==S&&this.moveTo(b)}},{key:"onKeyboard",value:function(d){var v=this.props,s=v.reverse,l=v.vertical,c=Sn(d,l,s);if(c){rt(d);var y=this.state,w=this.props,a=y.bounds,n=y.handle,t=a[n===null?y.recent:n],i=c(t,w),u=ze({value:i,handle:n,bounds:y.bounds,props:w});if(u===t)return;var h=!0;this.moveTo(u,h)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(d){for(var v=this.state.bounds,s=0,l=1;l<v.length-1;l+=1)d>=v[l]&&(s=l);return Math.abs(v[s+1]-d)<Math.abs(v[s]-d)&&(s+=1),s}},{key:"getBoundNeedMoving",value:function(d,v){var s=this.state,l=s.bounds,c=s.recent,y=v,w=l[v+1]===l[v];return w&&l[c]===l[v]&&(y=c),w&&d!==l[v+1]&&(y=d<l[v+1]?v:v+1),y}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var d=this.state.bounds;return d[d.length-1]}},{key:"getPoints",value:function(){var d=this.props,v=d.marks,s=d.step,l=d.min,c=d.max,y=this.internalPointsCache;if(!y||y.marks!==v||y.step!==s){var w=Object(Z.a)({},v);if(s!==null)for(var a=l;a<=c;a+=s)w[a]=a;var n=Object.keys(w).map(parseFloat);n.sort(function(t,i){return t-i}),this.internalPointsCache={marks:v,step:s,points:n}}return this.internalPointsCache.points}},{key:"moveTo",value:function(d,v){var s=this,l=this.state,c=this.props,y=Object(ct.a)(l.bounds),w=l.handle===null?l.recent:l.handle;y[w]=d;var a=w;c.pushable!==!1?this.pushSurroundingHandles(y,a):c.allowCross&&(y.sort(function(n,t){return n-t}),a=y.indexOf(d)),this.onChange({recent:a,handle:a,bounds:y}),v&&(this.props.onAfterChange(y),this.setState({},function(){s.handlesRefs[a].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(d,v){var s=d[v],l=this.props.pushable,c=Number(l),y=0;if(d[v+1]-s<c&&(y=1),s-d[v-1]<c&&(y=-1),y!==0){var w=v+y,a=y*(d[w]-s);this.pushHandle(d,w,y,c-a)||(d[v]=d[w]-y*c)}}},{key:"pushHandle",value:function(d,v,s,l){for(var c=d[v],y=d[v];s*(y-c)<l;){if(!this.pushHandleOnePoint(d,v,s))return d[v]=c,!1;y=d[v]}return!0}},{key:"pushHandleOnePoint",value:function(d,v,s){var l=this.getPoints(),c=l.indexOf(d[v]),y=c+s;if(y>=l.length||y<0)return!1;var w=v+s,a=l[y],n=this.props.pushable,t=Number(n),i=s*(d[w]-a);return this.pushHandle(d,w,s,t-i)?(d[v]=a,!0):!1}},{key:"trimAlignValue",value:function(d){var v=this.state,s=v.handle,l=v.bounds;return ze({value:d,handle:s,bounds:l,props:this.props})}},{key:"render",value:function(){var d=this,v=this.state,s=v.handle,l=v.bounds,c=this.props,y=c.prefixCls,w=c.vertical,a=c.included,n=c.disabled,t=c.min,i=c.max,u=c.reverse,h=c.handle,b=c.trackStyle,S=c.handleStyle,C=c.tabIndex,M=c.ariaLabelGroupForHandles,K=c.ariaLabelledByGroupForHandles,_=c.ariaValueTextFormatterGroupForHandles,B=l.map(function(ve){return d.calcOffset(ve)}),re="".concat(y,"-handle"),ne=l.map(function(ve,Se){var me,ye=C[Se]||0;(n||C[Se]===null)&&(ye=null);var W=s===Se;return h({className:D()((me={},Object(p.a)(me,re,!0),Object(p.a)(me,"".concat(re,"-").concat(Se+1),!0),Object(p.a)(me,"".concat(re,"-dragging"),W),me)),prefixCls:y,vertical:w,dragging:W,offset:B[Se],value:ve,index:Se,tabIndex:ye,min:t,max:i,reverse:u,disabled:n,style:S[Se],ref:function(N){return d.saveHandle(Se,N)},ariaLabel:M[Se],ariaLabelledBy:K[Se],ariaValueTextFormatter:_[Se]})}),le=l.slice(0,-1).map(function(ve,Se){var me,ye=Se+1,W=D()((me={},Object(p.a)(me,"".concat(y,"-track"),!0),Object(p.a)(me,"".concat(y,"-track-").concat(ye),!0),me));return Be.a.createElement(_e,{className:W,vertical:w,reverse:u,included:a,offset:B[ye-1],length:B[ye]-B[ye-1],style:b[Se],key:ye})});return{tracks:le,handles:ne}}}],[{key:"getDerivedStateFromProps",value:function(d,v){if(!("value"in d||"min"in d||"max"in d))return null;var s=d.value||v.bounds,l=s.map(function(c,y){return ze({value:c,handle:y,bounds:v.bounds,props:d})});if(v.bounds.length===l.length){if(l.every(function(c,y){return c===v.bounds[y]}))return null}else l=s.map(function(c,y){return ze({value:c,handle:y,props:d})});return Object(Z.a)(Object(Z.a)({},v),{},{bounds:l})}}]),O}(Be.a.Component);qt.displayName="Range",qt.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var Qt=ot(qt),Ct=e("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),Fe=function(m){return+setTimeout(m,16)},Ge=function(m){return clearTimeout(m)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(Fe=function(m){return window.requestAnimationFrame(m)},Ge=function(m){return window.cancelAnimationFrame(m)});function Mt(f){return Fe(f)}Mt.cancel=Ge;function zt(f,m){return f?f.contains(m):!1}function qe(f){return f instanceof HTMLElement?f:It.a.findDOMNode(f)}var At=e("./node_modules/react-is/index.js");function dt(f,m){typeof f=="function"?f(m):Object(oe.a)(f)==="object"&&f&&"current"in f&&(f.current=m)}function xt(){for(var f=arguments.length,m=new Array(f),O=0;O<f;O++)m[O]=arguments[O];return function(g){m.forEach(function(d){dt(d,g)})}}function ht(f){var m,O,g=Object(At.isMemo)(f)?f.type.type:f.type;return!(typeof g=="function"&&!(!((m=g.prototype)===null||m===void 0)&&m.render)||typeof f=="function"&&!(!((O=f.prototype)===null||O===void 0)&&O.render))}function Yt(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var ue=Object(F.forwardRef)(function(f,m){var O=f.didUpdate,g=f.getContainer,d=f.children,v=Object(F.useRef)();Object(F.useImperativeHandle)(m,function(){return{}});var s=Object(F.useRef)(!1);return!s.current&&Yt()&&(v.current=g(),s.current=!0),Object(F.useEffect)(function(){O==null||O(f)}),Object(F.useEffect)(function(){return function(){var l,c;(l=v.current)===null||l===void 0||(c=l.parentNode)===null||c===void 0||c.removeChild(v.current)}},[]),v.current?It.a.createPortal(d,v.current):null}),In=ue;function Cn(f,m,O){return O?f[0]===m[0]:f[0]===m[0]&&f[1]===m[1]}function ea(f,m,O){var g=f[m]||{};return Object(Z.a)(Object(Z.a)({},g),O)}function $n(f,m,O,g){for(var d=O.points,v=Object.keys(f),s=0;s<v.length;s+=1){var l=v[s];if(Cn(f[l].points,d,g))return"".concat(m,"-placement-").concat(l)}return""}var jn=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var f=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(f)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(f.substr(0,4)))};function ta(f,m){var O={};return O[f.toLowerCase()]=m.toLowerCase(),O["Webkit".concat(f)]="webkit".concat(m),O["Moz".concat(f)]="moz".concat(m),O["ms".concat(f)]="MS".concat(m),O["O".concat(f)]="o".concat(m.toLowerCase()),O}function Gt(f,m){var O={animationend:ta("Animation","AnimationEnd"),transitionend:ta("Transition","TransitionEnd")};return f&&("AnimationEvent"in m||delete O.animationend.animation,"TransitionEvent"in m||delete O.transitionend.transition),O}var z=Gt(Yt(),typeof window!="undefined"?window:{}),ee={};if(Yt()){var Ae=document.createElement("div");ee=Ae.style}var Ce={};function Rt(f){if(Ce[f])return Ce[f];var m=z[f];if(m)for(var O=Object.keys(m),g=O.length,d=0;d<g;d+=1){var v=O[d];if(Object.prototype.hasOwnProperty.call(m,v)&&v in ee)return Ce[f]=m[v],Ce[f]}return""}var Pe=Rt("animationend"),Ue=Rt("transitionend"),Xt=!!(Pe&&Ue),Lt=Pe||"animationend",an=Ue||"transitionend";function en(f,m){if(!f)return null;if(Object(oe.a)(f)==="object"){var O=m.replace(/-\w/g,function(g){return g[1].toUpperCase()});return f[O]}return"".concat(f,"-").concat(m)}var Tt="none",jt="appear",et="enter",Pn="leave",dn="none",yt="prepare",fn="start",it="active",Te="end";function Ot(f){var m=Object(F.useRef)(!1),O=Object(F.useState)(f),g=Object(Ve.a)(O,2),d=g[0],v=g[1];function s(l){m.current||v(l)}return Object(F.useEffect)(function(){return function(){m.current=!0}},[]),[d,s]}var Ht=Yt()?F.useLayoutEffect:F.useEffect,un=Ht,yn=function(){var f=F.useRef(null);function m(){Mt.cancel(f.current)}function O(g){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;m();var v=Mt(function(){d<=1?g({isCanceled:function(){return v!==f.current}}):O(g,d-1)});f.current=v}return F.useEffect(function(){return function(){m()}},[]),[O,m]},vn=[yt,fn,it,Te],Bn=!1,pa=!0;function da(f){return f===it||f===Te}var ra=function(f,m){var O=F.useState(dn),g=Object(Ve.a)(O,2),d=g[0],v=g[1],s=yn(),l=Object(Ve.a)(s,2),c=l[0],y=l[1];function w(){v(yt)}return un(function(){if(d!==dn&&d!==Te){var a=vn.indexOf(d),n=vn[a+1],t=m(d);t===Bn?v(n):c(function(i){function u(){i.isCanceled()||v(n)}t===!0?u():Promise.resolve(t).then(u)})}},[f,d]),F.useEffect(function(){return function(){y()}},[]),[w,d]},ua=function(f){var m=Object(F.useRef)(),O=Object(F.useRef)(f);O.current=f;var g=F.useCallback(function(s){O.current(s)},[]);function d(s){s&&(s.removeEventListener(an,g),s.removeEventListener(Lt,g))}function v(s){m.current&&m.current!==s&&d(m.current),s&&s!==m.current&&(s.addEventListener(an,g),s.addEventListener(Lt,g),m.current=s)}return F.useEffect(function(){return function(){d(m.current)}},[]),[v,d]};function fa(f,m,O,g){var d=g.motionEnter,v=d===void 0?!0:d,s=g.motionAppear,l=s===void 0?!0:s,c=g.motionLeave,y=c===void 0?!0:c,w=g.motionDeadline,a=g.motionLeaveImmediately,n=g.onAppearPrepare,t=g.onEnterPrepare,i=g.onLeavePrepare,u=g.onAppearStart,h=g.onEnterStart,b=g.onLeaveStart,S=g.onAppearActive,C=g.onEnterActive,M=g.onLeaveActive,K=g.onAppearEnd,_=g.onEnterEnd,B=g.onLeaveEnd,re=g.onVisibleChanged,ne=Ot(),le=Object(Ve.a)(ne,2),ve=le[0],Se=le[1],me=Ot(Tt),ye=Object(Ve.a)(me,2),W=ye[0],j=ye[1],N=Ot(null),A=Object(Ve.a)(N,2),k=A[0],X=A[1],G=Object(F.useRef)(!1),ae=Object(F.useRef)(null),he=Object(F.useRef)(!1),Ie=Object(F.useRef)(null);function Ne(){var mt=O();return mt||Ie.current}var ge=Object(F.useRef)(!1);function ie(mt){var kt=Ne();if(!(mt&&!mt.deadline&&mt.target!==kt)){var tn;W===jt&&ge.current?tn=K==null?void 0:K(kt,mt):W===et&&ge.current?tn=_==null?void 0:_(kt,mt):W===Pn&&ge.current&&(tn=B==null?void 0:B(kt,mt)),tn!==!1&&!he.current&&(j(Tt),X(null))}}var De=ua(ie),Me=Object(Ve.a)(De,1),$e=Me[0],ut=F.useMemo(function(){var mt,kt,tn;switch(W){case"appear":return mt={},Object(p.a)(mt,yt,n),Object(p.a)(mt,fn,u),Object(p.a)(mt,it,S),mt;case"enter":return kt={},Object(p.a)(kt,yt,t),Object(p.a)(kt,fn,h),Object(p.a)(kt,it,C),kt;case"leave":return tn={},Object(p.a)(tn,yt,i),Object(p.a)(tn,fn,b),Object(p.a)(tn,it,M),tn;default:return{}}},[W]),Qe=ra(W,function(mt){if(mt===yt){var kt=ut[yt];return kt?kt(Ne()):Bn}if($t in ut){var tn;X(((tn=ut[$t])===null||tn===void 0?void 0:tn.call(ut,Ne(),null))||null)}return $t===it&&($e(Ne()),w>0&&(clearTimeout(ae.current),ae.current=setTimeout(function(){ie({deadline:!0})},w))),pa}),on=Object(Ve.a)(Qe,2),sn=on[0],$t=on[1],ln=da($t);ge.current=ln,un(function(){if(Se(m),!!f){var mt=G.current;G.current=!0;var kt;!mt&&m&&l&&(kt=jt),mt&&m&&v&&(kt=et),(mt&&!m&&y||!mt&&a&&!m&&y)&&(kt=Pn),kt&&(j(kt),sn())}},[m]),Object(F.useEffect)(function(){(W===jt&&!l||W===et&&!v||W===Pn&&!y)&&j(Tt)},[l,v,y]),Object(F.useEffect)(function(){return function(){clearTimeout(ae.current),he.current=!0}},[]),Object(F.useEffect)(function(){ve!==void 0&&W===Tt&&(re==null||re(ve))},[ve,W]);var Kt=k;return ut[yt]&&$t===fn&&(Kt=Object(Z.a)({transition:"none"},Kt)),[W,$t,Kt,ve!=null?ve:m]}var va=function(f){Object(T.a)(O,f);var m=Object(vt.a)(O);function O(){return Object(ke.a)(this,O),m.apply(this,arguments)}return Object(r.a)(O,[{key:"render",value:function(){return this.props.children}}]),O}(F.Component),Un=va;function kn(f){var m=f;Object(oe.a)(f)==="object"&&(m=f.transitionSupport);function O(d){return!!(d.motionName&&m)}var g=F.forwardRef(function(d,v){var s=d.visible,l=s===void 0?!0:s,c=d.removeOnLeave,y=c===void 0?!0:c,w=d.forceRender,a=d.children,n=d.motionName,t=d.leavedClassName,i=d.eventProps,u=O(d),h=Object(F.useRef)(),b=Object(F.useRef)();function S(){try{return qe(h.current||b.current)}catch(W){return null}}var C=fa(u,l,S,d),M=Object(Ve.a)(C,4),K=M[0],_=M[1],B=M[2],re=M[3],ne=Object(F.useRef)(v);ne.current=v;var le=F.useCallback(function(W){h.current=W,dt(ne.current,W)},[]),ve,Se=Object(Z.a)(Object(Z.a)({},i),{},{visible:l});if(!a)ve=null;else if(K===Tt||!O(d))re?ve=a(Object(Z.a)({},Se),le):y?w?ve=a(Object(Z.a)(Object(Z.a)({},Se),{},{style:{display:"none"}}),le):ve=null:ve=a(Object(Z.a)(Object(Z.a)({},Se),{},{className:t}),le);else{var me,ye;_===yt?ye="prepare":da(_)?ye="active":_===fn&&(ye="start"),ve=a(Object(Z.a)(Object(Z.a)({},Se),{},{className:D()(en(n,K),(me={},Object(p.a)(me,en(n,"".concat(K,"-").concat(ye)),ye),Object(p.a)(me,n,typeof n=="string"),me)),style:B}),le)}return F.createElement(Un,{ref:b},ve)});return g.displayName="CSSMotion",g}var oa=kn(Xt),Kn="add",Wn="keep",Rn="remove",ia="removed";function _n(f){var m;return f&&Object(oe.a)(f)==="object"&&"key"in f?m=f:m={key:f},Object(Z.a)(Object(Z.a)({},m),{},{key:String(m.key)})}function zn(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return f.map(_n)}function Mn(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],O=[],g=0,d=m.length,v=zn(f),s=zn(m);v.forEach(function(y){for(var w=!1,a=g;a<d;a+=1){var n=s[a];if(n.key===y.key){g<a&&(O=O.concat(s.slice(g,a).map(function(t){return Object(Z.a)(Object(Z.a)({},t),{},{status:Kn})})),g=a),O.push(Object(Z.a)(Object(Z.a)({},n),{},{status:Wn})),g+=1,w=!0;break}}w||O.push(Object(Z.a)(Object(Z.a)({},y),{},{status:Rn}))}),g<d&&(O=O.concat(s.slice(g).map(function(y){return Object(Z.a)(Object(Z.a)({},y),{},{status:Kn})})));var l={};O.forEach(function(y){var w=y.key;l[w]=(l[w]||0)+1});var c=Object.keys(l).filter(function(y){return l[y]>1});return c.forEach(function(y){O=O.filter(function(w){var a=w.key,n=w.status;return a!==y||n!==Rn}),O.forEach(function(w){w.key===y&&(w.status=Wn)})}),O}var Yn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function E(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oa,O=function(g){Object(T.a)(v,g);var d=Object(vt.a)(v);function v(){var s;return Object(ke.a)(this,v),s=d.apply(this,arguments),s.state={keyEntities:[]},s.removeKey=function(l){s.setState(function(c){var y=c.keyEntities;return{keyEntities:y.map(function(w){return w.key!==l?w:Object(Z.a)(Object(Z.a)({},w),{},{status:ia})})}})},s}return Object(r.a)(v,[{key:"render",value:function(){var l=this,c=this.state.keyEntities,y=this.props,w=y.component,a=y.children,n=y.onVisibleChanged,t=Object(Et.a)(y,["component","children","onVisibleChanged"]),i=w||F.Fragment,u={};return Yn.forEach(function(h){u[h]=t[h],delete t[h]}),delete t.keys,F.createElement(i,Object.assign({},t),c.map(function(h){var b=h.status,S=Object(Et.a)(h,["status"]),C=b===Kn||b===Wn;return F.createElement(m,Object.assign({},u,{key:S.key,visible:C,eventProps:S,onVisibleChanged:function(K){n==null||n(K,{key:S.key}),K||l.removeKey(S.key)}}),a)}))}}],[{key:"getDerivedStateFromProps",value:function(l,c){var y=l.keys,w=c.keyEntities,a=zn(y),n=Mn(w,a);return{keyEntities:n.filter(function(t){var i=w.find(function(u){var h=u.key;return t.key===h});return!(i&&i.status===ia&&t.status===Rn)})}}}]),v}(F.Component);return O.defaultProps={component:"div"},O}var x=E(Xt),I=oa;function R(f){var m=f.prefixCls,O=f.motion,g=f.animation,d=f.transitionName;return O||(g?{motionName:"".concat(m,"-").concat(g)}:d?{motionName:d}:null)}function U(f){var m=f.prefixCls,O=f.visible,g=f.zIndex,d=f.mask,v=f.maskMotion,s=f.maskAnimation,l=f.maskTransitionName;if(!d)return null;var c={};return(v||l||s)&&(c=Object(Z.a)({motionAppear:!0},R({motion:v,prefixCls:m,transitionName:l,animation:s}))),F.createElement(I,Object(Ke.a)({},c,{visible:O,removeOnLeave:!0}),function(y){var w=y.className;return F.createElement("div",{style:{zIndex:g},className:D()("".concat(m,"-mask"),w)})})}var te=e("./node_modules/rc-align/es/index.js"),J=e("./node_modules/@babel/runtime/regenerator/index.js"),L=e.n(J),se=e("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),Y=["measure","align",null,"motion"],He=function(f,m){var O=Object(F.useState)(null),g=Object(Ve.a)(O,2),d=g[0],v=g[1],s=Object(F.useRef)(),l=Object(F.useRef)(!1);function c(a){l.current||v(a)}function y(){Mt.cancel(s.current)}function w(a){y(),s.current=Mt(function(){c(function(n){switch(d){case"align":return"motion";case"motion":return"stable";default:}return n}),a==null||a()})}return Object(F.useEffect)(function(){c("measure")},[f]),Object(F.useEffect)(function(){switch(d){case"measure":m();break;default:}d&&(s.current=Mt(Object(se.a)(L.a.mark(function a(){var n,t;return L.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=Y.indexOf(d),t=Y[n+1],t&&n!==-1&&c(t);case 3:case"end":return u.stop()}},a)}))))},[d]),Object(F.useEffect)(function(){return function(){l.current=!0,y()}},[]),[d,w]},tt=function(f){var m=F.useState({width:0,height:0}),O=Object(Ve.a)(m,2),g=O[0],d=O[1];function v(l){d({width:l.offsetWidth,height:l.offsetHeight})}var s=F.useMemo(function(){var l={};if(f){var c=g.width,y=g.height;f.indexOf("height")!==-1&&y?l.height=y:f.indexOf("minHeight")!==-1&&y&&(l.minHeight=y),f.indexOf("width")!==-1&&c?l.width=c:f.indexOf("minWidth")!==-1&&c&&(l.minWidth=c)}return l},[f,g]);return[s,v]},nt=F.forwardRef(function(f,m){var O=f.visible,g=f.prefixCls,d=f.className,v=f.style,s=f.children,l=f.zIndex,c=f.stretch,y=f.destroyPopupOnHide,w=f.align,a=f.point,n=f.getRootDomNode,t=f.getClassNameFromAlign,i=f.onAlign,u=f.onMouseEnter,h=f.onMouseLeave,b=f.onMouseDown,S=f.onTouchStart,C=Object(F.useRef)(),M=Object(F.useRef)(),K=Object(F.useState)(),_=Object(Ve.a)(K,2),B=_[0],re=_[1],ne=tt(c),le=Object(Ve.a)(ne,2),ve=le[0],Se=le[1];function me(){c&&Se(n())}var ye=He(O,me),W=Object(Ve.a)(ye,2),j=W[0],N=W[1],A=Object(F.useRef)();function k(){return a||n}function X(){var ie;(ie=C.current)===null||ie===void 0||ie.forceAlign()}function G(ie,De){if(j==="align"){var Me=t(De);re(Me),B!==Me?Promise.resolve().then(function(){X()}):N(function(){var $e;($e=A.current)===null||$e===void 0||$e.call(A)}),i==null||i(ie,De)}}var ae=Object(Z.a)({},R(f));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(ie){var De=ae[ie];ae[ie]=function(Me,$e){return N(),De==null?void 0:De(Me,$e)}});function he(){return new Promise(function(ie){A.current=ie})}F.useEffect(function(){!ae.motionName&&j==="motion"&&N()},[ae.motionName,j]),F.useImperativeHandle(m,function(){return{forceAlign:X,getElement:function(){return M.current}}});var Ie=Object(Z.a)(Object(Z.a)(Object(Z.a)({},ve),{},{zIndex:l},v),{},{opacity:j==="motion"||j==="stable"||!O?void 0:0,pointerEvents:j==="stable"?void 0:"none"}),Ne=!0;(w==null?void 0:w.points)&&(j==="align"||j==="stable")&&(Ne=!1);var ge=s;return F.Children.count(s)>1&&(ge=F.createElement("div",{className:"".concat(g,"-content")},s)),F.createElement(I,Object(Ke.a)({visible:O,ref:M,leavedClassName:"".concat(g,"-hidden")},ae,{onAppearPrepare:he,onEnterPrepare:he,removeOnLeave:y}),function(ie,De){var Me=ie.className,$e=ie.style,ut=D()(g,d,B,Me);return F.createElement(te.a,{target:k(),key:"popup",ref:C,monitorWindowResize:!0,disabled:Ne,align:w,onAlign:G},F.createElement("div",{ref:De,className:ut,onMouseEnter:u,onMouseLeave:h,onMouseDownCapture:b,onTouchStartCapture:S,style:Object(Z.a)(Object(Z.a)({},$e),Ie)},ge))})});nt.displayName="PopupInner";var Le=nt,we=F.forwardRef(function(f,m){var O=f.prefixCls,g=f.visible,d=f.zIndex,v=f.children,s=f.mobile;s=s===void 0?{}:s;var l=s.popupClassName,c=s.popupStyle,y=s.popupMotion,w=y===void 0?{}:y,a=s.popupRender,n=F.useRef();F.useImperativeHandle(m,function(){return{forceAlign:function(){},getElement:function(){return n.current}}});var t=Object(Z.a)({zIndex:d},c),i=v;return F.Children.count(v)>1&&(i=F.createElement("div",{className:"".concat(O,"-content")},v)),a&&(i=a(i)),F.createElement(I,Object(Ke.a)({visible:g,ref:n,removeOnLeave:!0},w),function(u,h){var b=u.className,S=u.style,C=D()(O,l,b);return F.createElement("div",{ref:h,className:C,style:Object(Z.a)(Object(Z.a)({},S),t)},i)})});we.displayName="MobilePopupInner";var H=we,mn=F.forwardRef(function(f,m){var O=f.visible,g=f.mobile,d=Object(Et.a)(f,["visible","mobile"]),v=Object(F.useState)(O),s=Object(Ve.a)(v,2),l=s[0],c=s[1],y=Object(F.useState)(!1),w=Object(Ve.a)(y,2),a=w[0],n=w[1],t=Object(Z.a)(Object(Z.a)({},d),{},{visible:l});Object(F.useEffect)(function(){c(O),O&&g&&n(jn())},[O,g]);var i=a?F.createElement(H,Object(Ke.a)({},t,{mobile:g,ref:m})):F.createElement(Le,Object(Ke.a)({},t,{ref:m}));return F.createElement("div",null,F.createElement(U,t),i)});mn.displayName="Popup";var Zt=mn,gn=F.createContext(null),Tn=gn;function be(){}function pn(){return""}function hn(f){return f?f.ownerDocument:window.document}var st=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Vt(f){var m=function(O){Object(T.a)(d,O);var g=Object(vt.a)(d);function d(v){var s;Object(ke.a)(this,d),s=g.call(this,v),s.popupRef=F.createRef(),s.triggerRef=F.createRef(),s.onMouseEnter=function(c){var y=s.props.mouseEnterDelay;s.fireEvents("onMouseEnter",c),s.delaySetPopupVisible(!0,y,y?null:c)},s.onMouseMove=function(c){s.fireEvents("onMouseMove",c),s.setPoint(c)},s.onMouseLeave=function(c){s.fireEvents("onMouseLeave",c),s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)},s.onPopupMouseEnter=function(){s.clearDelayTimer()},s.onPopupMouseLeave=function(c){var y;c.relatedTarget&&!c.relatedTarget.setTimeout&&zt((y=s.popupRef.current)===null||y===void 0?void 0:y.getElement(),c.relatedTarget)||s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)},s.onFocus=function(c){s.fireEvents("onFocus",c),s.clearDelayTimer(),s.isFocusToShow()&&(s.focusTime=Date.now(),s.delaySetPopupVisible(!0,s.props.focusDelay))},s.onMouseDown=function(c){s.fireEvents("onMouseDown",c),s.preClickTime=Date.now()},s.onTouchStart=function(c){s.fireEvents("onTouchStart",c),s.preTouchTime=Date.now()},s.onBlur=function(c){s.fireEvents("onBlur",c),s.clearDelayTimer(),s.isBlurToHide()&&s.delaySetPopupVisible(!1,s.props.blurDelay)},s.onContextMenu=function(c){c.preventDefault(),s.fireEvents("onContextMenu",c),s.setPopupVisible(!0,c)},s.onContextMenuClose=function(){s.isContextMenuToShow()&&s.close()},s.onClick=function(c){if(s.fireEvents("onClick",c),s.focusTime){var y;if(s.preClickTime&&s.preTouchTime?y=Math.min(s.preClickTime,s.preTouchTime):s.preClickTime?y=s.preClickTime:s.preTouchTime&&(y=s.preTouchTime),Math.abs(y-s.focusTime)<20)return;s.focusTime=0}s.preClickTime=0,s.preTouchTime=0,s.isClickToShow()&&(s.isClickToHide()||s.isBlurToHide())&&c&&c.preventDefault&&c.preventDefault();var w=!s.state.popupVisible;(s.isClickToHide()&&!w||w&&s.isClickToShow())&&s.setPopupVisible(!s.state.popupVisible,c)},s.onPopupMouseDown=function(){if(s.hasPopupMouseDown=!0,clearTimeout(s.mouseDownTimeout),s.mouseDownTimeout=window.setTimeout(function(){s.hasPopupMouseDown=!1},0),s.context){var c;(c=s.context).onPopupMouseDown.apply(c,arguments)}},s.onDocumentClick=function(c){if(!(s.props.mask&&!s.props.maskClosable)){var y=c.target,w=s.getRootDomNode(),a=s.getPopupDomNode();!zt(w,y)&&!zt(a,y)&&!s.hasPopupMouseDown&&s.close()}},s.getRootDomNode=function(){var c=s.props.getTriggerDOMNode;if(c)return c(s.triggerRef.current);try{var y=qe(s.triggerRef.current);if(y)return y}catch(w){}return It.a.findDOMNode(Object(Ct.a)(s))},s.getPopupClassNameFromAlign=function(c){var y=[],w=s.props,a=w.popupPlacement,n=w.builtinPlacements,t=w.prefixCls,i=w.alignPoint,u=w.getPopupClassNameFromAlign;return a&&n&&y.push($n(n,t,c,i)),u&&y.push(u(c)),y.join(" ")},s.getComponent=function(){var c=s.props,y=c.prefixCls,w=c.destroyPopupOnHide,a=c.popupClassName,n=c.onPopupAlign,t=c.popupMotion,i=c.popupAnimation,u=c.popupTransitionName,h=c.popupStyle,b=c.mask,S=c.maskAnimation,C=c.maskTransitionName,M=c.maskMotion,K=c.zIndex,_=c.popup,B=c.stretch,re=c.alignPoint,ne=c.mobile,le=s.state,ve=le.popupVisible,Se=le.point,me=s.getPopupAlign(),ye={};return s.isMouseEnterToShow()&&(ye.onMouseEnter=s.onPopupMouseEnter),s.isMouseLeaveToHide()&&(ye.onMouseLeave=s.onPopupMouseLeave),ye.onMouseDown=s.onPopupMouseDown,ye.onTouchStart=s.onPopupMouseDown,F.createElement(Zt,Object(Ke.a)({prefixCls:y,destroyPopupOnHide:w,visible:ve,point:re&&Se,className:a,align:me,onAlign:n,animation:i,getClassNameFromAlign:s.getPopupClassNameFromAlign},ye,{stretch:B,getRootDomNode:s.getRootDomNode,style:h,mask:b,zIndex:K,transitionName:u,maskAnimation:S,maskTransitionName:C,maskMotion:M,ref:s.popupRef,motion:t,mobile:ne}),typeof _=="function"?_():_)},s.attachParent=function(c){Mt.cancel(s.attachId);var y=s.props,w=y.getPopupContainer,a=y.getDocument,n=s.getRootDomNode(),t;w?(n||w.length===0)&&(t=w(n)):t=a(s.getRootDomNode()).body,t?t.appendChild(c):s.attachId=Mt(function(){s.attachParent(c)})},s.getContainer=function(){var c=s.props.getDocument,y=c(s.getRootDomNode()).createElement("div");return y.style.position="absolute",y.style.top="0",y.style.left="0",y.style.width="100%",s.attachParent(y),y},s.setPoint=function(c){var y=s.props.alignPoint;!y||!c||s.setState({point:{pageX:c.pageX,pageY:c.pageY}})},s.handlePortalUpdate=function(){s.state.prevPopupVisible!==s.state.popupVisible&&s.props.afterPopupVisibleChange(s.state.popupVisible)};var l;return"popupVisible"in v?l=!!v.popupVisible:l=!!v.defaultPopupVisible,s.state={prevPopupVisible:l,popupVisible:l},st.forEach(function(c){s["fire".concat(c)]=function(y){s.fireEvents(c,y)}}),s}return Object(r.a)(d,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var s=this.props,l=this.state;if(l.popupVisible){var c;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(c=s.getDocument(this.getRootDomNode()),this.clickOutsideHandler=lt(c,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(c=c||s.getDocument(this.getRootDomNode()),this.touchOutsideHandler=lt(c,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(c=c||s.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=lt(c,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=lt(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Mt.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var s;return((s=this.popupRef.current)===null||s===void 0?void 0:s.getElement())||null}},{key:"getPopupAlign",value:function(){var s=this.props,l=s.popupPlacement,c=s.popupAlign,y=s.builtinPlacements;return l&&y?ea(y,l,c):c}},{key:"setPopupVisible",value:function(s,l){var c=this.props.alignPoint,y=this.state.popupVisible;this.clearDelayTimer(),y!==s&&("popupVisible"in this.props||this.setState({popupVisible:s,prevPopupVisible:y}),this.props.onPopupVisibleChange(s)),c&&l&&s&&this.setPoint(l)}},{key:"delaySetPopupVisible",value:function(s,l,c){var y=this,w=l*1e3;if(this.clearDelayTimer(),w){var a=c?{pageX:c.pageX,pageY:c.pageY}:null;this.delayTimer=window.setTimeout(function(){y.setPopupVisible(s,a),y.clearDelayTimer()},w)}else this.setPopupVisible(s,c)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(s){var l=this.props.children.props,c=this.props;return l[s]&&c[s]?this["fire".concat(s)]:l[s]||c[s]}},{key:"isClickToShow",value:function(){var s=this.props,l=s.action,c=s.showAction;return l.indexOf("click")!==-1||c.indexOf("click")!==-1}},{key:"isContextMenuToShow",value:function(){var s=this.props,l=s.action,c=s.showAction;return l.indexOf("contextMenu")!==-1||c.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var s=this.props,l=s.action,c=s.hideAction;return l.indexOf("click")!==-1||c.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var s=this.props,l=s.action,c=s.showAction;return l.indexOf("hover")!==-1||c.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var s=this.props,l=s.action,c=s.hideAction;return l.indexOf("hover")!==-1||c.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var s=this.props,l=s.action,c=s.showAction;return l.indexOf("focus")!==-1||c.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var s=this.props,l=s.action,c=s.hideAction;return l.indexOf("focus")!==-1||c.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var s;(s=this.popupRef.current)===null||s===void 0||s.forceAlign()}}},{key:"fireEvents",value:function(s,l){var c=this.props.children.props[s];c&&c(l);var y=this.props[s];y&&y(l)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var s=this.state.popupVisible,l=this.props,c=l.children,y=l.forceRender,w=l.alignPoint,a=l.className,n=l.autoDestroy,t=F.Children.only(c),i={key:"trigger"};this.isContextMenuToShow()?i.onContextMenu=this.onContextMenu:i.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(i.onClick=this.onClick,i.onMouseDown=this.onMouseDown,i.onTouchStart=this.onTouchStart):(i.onClick=this.createTwoChains("onClick"),i.onMouseDown=this.createTwoChains("onMouseDown"),i.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(i.onMouseEnter=this.onMouseEnter,w&&(i.onMouseMove=this.onMouseMove)):i.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?i.onMouseLeave=this.onMouseLeave:i.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(i.onFocus=this.onFocus,i.onBlur=this.onBlur):(i.onFocus=this.createTwoChains("onFocus"),i.onBlur=this.createTwoChains("onBlur"));var u=D()(t&&t.props&&t.props.className,a);u&&(i.className=u);var h=Object(Z.a)({},i);ht(t)&&(h.ref=xt(this.triggerRef,t.ref));var b=F.cloneElement(t,h),S;return(s||this.popupRef.current||y)&&(S=F.createElement(f,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!s&&n&&(S=null),F.createElement(Tn.Provider,{value:{onPopupMouseDown:this.onPopupMouseDown}},b,S)}}],[{key:"getDerivedStateFromProps",value:function(s,l){var c=s.popupVisible,y={};return c!==void 0&&l.popupVisible!==c&&(y.popupVisible=c,y.prevPopupVisible=l.popupVisible),y}}]),d}(F.Component);return m.contextType=Tn,m.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:pn,getDocument:hn,onPopupVisibleChange:be,afterPopupVisibleChange:be,onPopupAlign:be,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},m}var bn=Vt(In),bt={adjustX:1,adjustY:1},St=[0,0],Ut={left:{points:["cr","cl"],overflow:bt,offset:[-4,0],targetOffset:St},right:{points:["cl","cr"],overflow:bt,offset:[4,0],targetOffset:St},top:{points:["bc","tc"],overflow:bt,offset:[0,-4],targetOffset:St},bottom:{points:["tc","bc"],overflow:bt,offset:[0,4],targetOffset:St},topLeft:{points:["bl","tl"],overflow:bt,offset:[0,-4],targetOffset:St},leftTop:{points:["tr","tl"],overflow:bt,offset:[-4,0],targetOffset:St},topRight:{points:["br","tr"],overflow:bt,offset:[0,-4],targetOffset:St},rightTop:{points:["tl","tr"],overflow:bt,offset:[4,0],targetOffset:St},bottomRight:{points:["tr","br"],overflow:bt,offset:[0,4],targetOffset:St},rightBottom:{points:["bl","br"],overflow:bt,offset:[4,0],targetOffset:St},bottomLeft:{points:["tl","bl"],overflow:bt,offset:[0,4],targetOffset:St},leftBottom:{points:["br","bl"],overflow:bt,offset:[-4,0],targetOffset:St}},rn=Ut,Qn=function(m){var O=m.overlay,g=m.prefixCls,d=m.id,v=m.overlayInnerStyle;return F.createElement("div",{className:"".concat(g,"-inner"),id:d,role:"tooltip",style:v},typeof O=="function"?O():O)},sa=Qn,ga=function(m,O){var g=m.overlayClassName,d=m.trigger,v=d===void 0?["hover"]:d,s=m.mouseEnterDelay,l=s===void 0?0:s,c=m.mouseLeaveDelay,y=c===void 0?.1:c,w=m.overlayStyle,a=m.prefixCls,n=a===void 0?"rc-tooltip":a,t=m.children,i=m.onVisibleChange,u=m.afterVisibleChange,h=m.transitionName,b=m.animation,S=m.placement,C=S===void 0?"right":S,M=m.align,K=M===void 0?{}:M,_=m.destroyTooltipOnHide,B=_===void 0?!1:_,re=m.defaultVisible,ne=m.getTooltipContainer,le=m.overlayInnerStyle,ve=Object(Et.a)(m,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),Se=Object(F.useRef)(null);Object(F.useImperativeHandle)(O,function(){return Se.current});var me=Object(Z.a)({},ve);"visible"in m&&(me.popupVisible=m.visible);var ye=function(){var k=m.arrowContent,X=k===void 0?null:k,G=m.overlay,ae=m.id;return[F.createElement("div",{className:"".concat(n,"-arrow"),key:"arrow"},X),F.createElement(sa,{key:"content",prefixCls:n,id:ae,overlay:G,overlayInnerStyle:le})]},W=!1,j=!1;if(typeof B=="boolean")W=B;else if(B&&Object(oe.a)(B)==="object"){var N=B.keepParent;W=N===!0,j=N===!1}return F.createElement(bn,Object.assign({popupClassName:g,prefixCls:n,popup:ye,action:v,builtinPlacements:Ut,popupPlacement:C,ref:Se,popupAlign:K,getPopupContainer:ne,onPopupVisibleChange:i,afterPopupVisibleChange:u,popupTransitionName:h,popupAnimation:b,defaultPopupVisible:re,destroyPopupOnHide:W,autoDestroy:j,mouseLeaveDelay:y,popupStyle:w,mouseEnterDelay:l},me),t)},Jn=Object(F.forwardRef)(ga),Ln=Jn,ha=F.forwardRef(function(f,m){var O=f.visible,g=f.overlay,d=F.useRef(null),v=xt(m,d),s=F.useRef(null);function l(){Mt.cancel(s.current)}function c(){s.current=Mt(function(){var y;(y=d.current)===null||y===void 0||y.forcePopupAlign()})}return F.useEffect(function(){return O?c():l(),l},[O,g]),F.createElement(Ln,Object(Ke.a)({ref:v},f))}),En=ha,Ft=["value","dragging","index","disabled"],An=["prefixCls","overlay","placement","visible"];function na(f){var m,O;return O=m=function(g){Object(T.a)(v,g);var d=Object(vt.a)(v);function v(){var s;Object(ke.a)(this,v);for(var l=arguments.length,c=new Array(l),y=0;y<l;y++)c[y]=arguments[y];return s=d.call.apply(d,[this].concat(c)),s.state={visibles:{}},s.handleTooltipVisibleChange=function(w,a){s.setState(function(n){return{visibles:Object(Z.a)(Object(Z.a)({},n.visibles),{},Object(p.a)({},w,a))}})},s.handleWithTooltip=function(w){var a=w.value,n=w.dragging,t=w.index,i=w.disabled,u=Object(Et.a)(w,Ft),h=s.props,b=h.tipFormatter,S=h.tipProps,C=h.handleStyle,M=h.getTooltipContainer,K=S.prefixCls,_=K===void 0?"rc-slider-tooltip":K,B=S.overlay,re=B===void 0?b(a):B,ne=S.placement,le=ne===void 0?"top":ne,ve=S.visible,Se=ve===void 0?!1:ve,me=Object(Et.a)(S,An),ye;return Array.isArray(C)?ye=C[t]||C[0]:ye=C,Be.a.createElement(En,Object(Ke.a)({},me,{getTooltipContainer:M,prefixCls:_,overlay:re,placement:le,visible:!i&&(s.state.visibles[t]||n)||Se,key:t}),Be.a.createElement(Wt,Object(Ke.a)({},u,{style:Object(Z.a)({},ye),value:a,onMouseEnter:function(){return s.handleTooltipVisibleChange(t,!0)},onMouseLeave:function(){return s.handleTooltipVisibleChange(t,!1)}})))},s}return Object(r.a)(v,[{key:"render",value:function(){return Be.a.createElement(f,Object(Ke.a)({},this.props,{handle:this.handleWithTooltip}))}}]),v}(Be.a.Component),m.defaultProps={tipFormatter:function(d){return d},handleStyle:[{}],tipProps:{},getTooltipContainer:function(d){return d.parentNode}},O}var Nn=ft;Nn.Range=Qt,Nn.Handle=Wt,Nn.createSliderWithTooltip=na;var wa=Nn,Oa=e("./node_modules/antd/node_modules/rc-util/es/ref.js"),Sa=e("./node_modules/antd/node_modules/rc-util/es/raf.js"),ya=e("./node_modules/antd/es/tooltip/index.js"),ma=F.forwardRef(function(f,m){var O=f.visible,g=Object(F.useRef)(null),d=Object(F.useRef)(null);function v(){Sa.a.cancel(d.current),d.current=null}function s(){d.current=Object(Sa.a)(function(){var l;(l=g.current)===null||l===void 0||l.forcePopupAlign(),d.current=null})}return F.useEffect(function(){return O?s():v(),v},[O,f.title]),F.createElement(ya.a,Object(Ke.a)({ref:Object(Oa.a)(g,m)},f))}),Ca=ma,Pa=e("./node_modules/antd/es/config-provider/context.js"),xa=function(f,m){var O={};for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&m.indexOf(g)<0&&(O[g]=f[g]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,g=Object.getOwnPropertySymbols(f);d<g.length;d++)m.indexOf(g[d])<0&&Object.prototype.propertyIsEnumerable.call(f,g[d])&&(O[g[d]]=f[g[d]]);return O},ba=F.forwardRef(function(f,m){var O=F.useContext(Pa.b),g=O.getPrefixCls,d=O.direction,v=O.getPopupContainer,s=F.useState({}),l=Object(Ve.a)(s,2),c=l[0],y=l[1],w=function(B,re){y(function(ne){return Object(Ke.a)(Object(Ke.a)({},ne),Object(p.a)({},B,re))})},a=function(B,re){return B||(re?d==="rtl"?"left":"right":"top")},n=function(B){var re=B.tooltipPrefixCls,ne=B.prefixCls,le=B.info,ve=le.value,Se=le.dragging,me=le.index,ye=xa(le,["value","dragging","index"]),W=f.tipFormatter,j=f.tooltipVisible,N=f.tooltipPlacement,A=f.getTooltipPopupContainer,k=f.vertical,X=W?c[me]||Se:!1,G=j||j===void 0&&X,ae=g();return F.createElement(Ca,{prefixCls:re,title:W?W(ve):"",visible:G,placement:a(N,k),transitionName:"".concat(ae,"-zoom-down"),key:me,overlayClassName:"".concat(ne,"-tooltip"),getPopupContainer:A||v},F.createElement(Wt,Object(Ke.a)({},ye,{value:ve,onMouseEnter:function(){return w(me,!0)},onMouseLeave:function(){return w(me,!1)}})))},t=f.prefixCls,i=f.tooltipPrefixCls,u=f.range,h=f.className,b=xa(f,["prefixCls","tooltipPrefixCls","range","className"]),S=g("slider",t),C=g("tooltip",i),M=D()(h,Object(p.a)({},"".concat(S,"-rtl"),d==="rtl"));d==="rtl"&&!b.vertical&&(b.reverse=!b.reverse);var K;return Object(oe.a)(u)==="object"&&(K=u.draggableTrack),u?F.createElement(Qt,Object(Ke.a)({},b,{step:b.step,draggableTrack:K,className:M,ref:m,handle:function(B){return n({tooltipPrefixCls:C,prefixCls:S,info:B})},prefixCls:S})):F.createElement(wa,Object(Ke.a)({},b,{step:b.step,className:M,ref:m,handle:function(B){return n({tooltipPrefixCls:C,prefixCls:S,info:B})},prefixCls:S}))});ba.displayName="Slider",ba.defaultProps={tipFormatter:function(m){return typeof m=="number"?m.toString():""}};var Ia=q.a=ba},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{padding:1rem!important;box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item:not(:last-child){margin-bottom:.5rem}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{margin-left:.5rem;width:100%;font-size:.75rem}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.properties-table-key{min-width:12rem;display:flex;align-items:center;justify-content:space-between}.property-value-type{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;text-transform:uppercase;cursor:default}.property-value-type:not(:first-child){margin-left:.25rem}.properties-table-value{min-width:12rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;display:flex;align-items:center}.properties-table-value .value-link>*{vertical-align:middle}.properties-table-value .value-link>svg{margin-left:.25rem;font-size:1rem}.properties-table-value .editable{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;-webkit-text-decoration-color:#5375ff;text-decoration-color:#5375ff;cursor:pointer}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,'.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.experiment-form .metrics-selection{border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;width:100%}.experiment-form .metrics-selection .action-filters-bordered .draggable-action-filter{border-bottom:1px solid rgba(0,0,0,.15);padding:1rem .25rem;margin-top:0}.experiment-form .metrics-selection .action-filters-bordered .row-action-btn{color:#35416b}.experiment-form .person-selection{width:100%;border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid rgba(0,0,0,.15);min-height:unset;background-color:#fff;padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(calc(90vh - 16rem),36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .graph-container{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{flex-direction:row;align-items:baseline;padding:12px 8px;background:#fff;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);border-left:1px solid rgba(0,0,0,.15);border-right:1px solid rgba(0,0,0,.15)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:#bf411a}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.15);margin-bottom:1rem}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.view-experiment .stop-experiment{background-color:#f96132;color:#fff}.view-experiment .archive-experiment{color:#f96132}.view-experiment .exp-description{font-style:italic;color:rgba(0,0,0,.5)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list{list-style:none;margin:0;padding:0}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:#fafaf9;border:1px solid rgba(0,0,0,.15);width:100%;min-height:320px;font-size:24px}.view-experiment .end-experiment-btn{background:#77b96c;color:#fff}.view-experiment .end-experiment-btn:hover{color:#000}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:#fafaf9;color:#35416b;font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid rgba(0,0,0,.15);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:#d9d9d9}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid rgba(0,0,0,.15)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilter.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.draggable-action-filter{margin-top:16px;display:flex}.draggable-action-filter .action-filter-drag-handle{cursor:move;padding:4px 2px 0 0;color:#2d2d2d;font-size:1.2em}.draggable-action-filter .action-filter-drag-handle svg{transform:rotate(90deg)}.draggable-action-filter .ant-row.mt{margin-top:0}.add-action-event-button:not(.ant-btn-link){border-color:rgba(0,0,0,.24);color:#5375ff;padding-left:2.5rem;padding-right:2.5rem}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/index.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.property-select{cursor:pointer;width:150px;margin-top:6px}.property-select .ant-select-selector{border-color:#d9d9d9!important;cursor:pointer!important}.property-select .ant-select-arrow{color:#2d2d2d;font-size:10px}.property-select:not(.ant-select-open) input{cursor:pointer!important}.property-select:hover .ant-select-arrow,.property-select:hover .ant-select-selection-item,.property-select:hover .ant-select-selection-placeholder{color:#7d9bff!important}.property-select:hover .ant-select-selector{border-color:#7d9bff!important}.property-select .ant-select-selection-placeholder,.property-select .ant-select-selection-search-input,.property-select .ant-select-selector{font-size:13px;height:28px!important}.property-select .ant-select-selection-item{line-height:26px!important}.property-select .ant-select-selection-placeholder{line-height:24px!important;color:#2d2d2d}.property-select.horizontal-ui{width:unset!important;min-width:120px;margin-top:0}.property-select.horizontal-ui .ant-select-selection-placeholder,.property-select.horizontal-ui .ant-select-selection-search-input,.property-select.horizontal-ui .ant-select-selector{font-size:inherit;height:32px!important}.property-select.horizontal-ui .ant-select-selection-item,.property-select.horizontal-ui .ant-select-selection-placeholder{line-height:30px!important}.row-action-btn{padding:0 4px}.row-action-btn.visible,.row-action-btn:focus,.row-action-btn:hover{border:1px solid #5375ff}.action-row-striped.full-width,.action-row.full-width{flex-basis:100%}.draggable-action-filter.drag-handle-visible .action-row-striped.full-width,.draggable-action-filter.drag-handle-visible .action-row.full-width{width:calc(100% - 16px);flex-basis:calc(100% - 16px)}.action-row-striped{padding:0 .25rem;margin:.25rem 0}.action-row-striped:nth-child(2n){padding:.25rem;background-color:#f6f6f6}.full-width .property-filter-button-label{max-width:300px}.horizontal-ui .row-action-btn.delete{padding:0;width:unset;color:rgba(249,97,50,.6)}.action-row-letter{padding-right:1px}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.session-recordings-popup{z-index:1061}.session-recordings-popup .anticon-play-circle{color:#5375ff}.session-recordings-popup .session-recordings-popup-row{display:flex;align-items:center;padding:.5rem;font-weight:500;color:#2d2d2d}.session-recordings-popup .session-recordings-popup-row:hover{color:#5375ff}.session-recordings-popup .session-recordings-popup-row .anticon{font-size:1.25rem;margin-right:.5rem}.session-recordings-button .anticon-play-circle{color:#5375ff}.session-recordings-button .session-recordings-button__indicator{font-size:12px;color:rgba(0,0,0,.5)}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/Console.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.console-log-container{display:flex;flex-direction:column;height:100%}.console-log{flex:1;border:1px solid rgba(0,0,0,.15);border-radius:4px}.log-line{border-bottom:1px solid rgba(0,0,0,.15);font-size:12px;cursor:pointer;padding:.25rem .5rem;width:100%}.log-line .log-text{margin:0}.log-line .trace-string{float:right;margin-left:.25rem}.log-line .trace-string a{text-decoration:underline}.log-line.level-error{background:#fcf1f0;color:red}.log-line.level-warn{background:#fefbe7}.log-line:hover{background:rgba(83,117,255,.1)}.more-logs-available{text-align:center;margin:.5rem}.console-feedback-container{border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:1rem;margin-top:1rem}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/PlayerEvents.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".player-events-container .event-list .event-list-item .event-item-content .event-item-content-subtitle.overflowing:hover .inner{box-shadow:0 2px 3px rgba(0,0,0,.02),0 5px 7px rgba(0,0,0,.03),0 11px 16px rgba(0,0,0,.03),0 32px 48px rgba(0,0,0,.05)!important}.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.player-events-container{display:flex;flex-direction:column;background-color:#fff;height:100%;border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:.6666666667rem}@media(max-width:768px){.player-events-container{height:100vh}}.player-events-container .event-list{flex:1;margin-top:.6666666667rem}.player-events-container .event-list .event-list-empty-container{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.player-events-container .event-list .event-list-empty-container .ant-empty{margin-bottom:5rem}.player-events-container .event-list .current-events-highlight-box{position:absolute;width:100%;transition:height .2s ease-in-out,transform .3s ease-in-out;top:0;left:0;right:0;height:0;background-color:rgba(83,117,255,.1);border-radius:4px;z-index:0}.player-events-container .event-list .current-events-position-finder{display:none;flex-direction:row;justify-content:space-around;position:absolute;top:.6666666667rem;left:50%;transform:translateX(-50%);height:35px;width:240px;z-index:10;text-align:center;overflow:hidden;border-radius:100px;color:#fff}.player-events-container .event-list .current-events-position-finder.visible{display:flex}.player-events-container .event-list .current-events-position-finder .left{cursor:pointer;flex:1;background-color:#5375ff}.player-events-container .event-list .current-events-position-finder .left:hover{background-color:#869eff}.player-events-container .event-list .current-events-position-finder .left span.anticon{margin:0 .6666666667rem 0 1rem}.player-events-container .event-list .current-events-position-finder .right{cursor:pointer;width:calc(35px + .16667rem);background-color:#6d89ff}.player-events-container .event-list .current-events-position-finder .right:hover{background-color:#a0b2ff}.player-events-container .event-list .current-events-position-finder .right span.anticon{margin-right:.1666666667rem}.player-events-container .event-list .event-list-virtual{scroll-behavior:smooth}.player-events-container .event-list .event-list-item{padding:.6666666667rem;cursor:pointer;border-radius:4px}.player-events-container .event-list .event-list-item.current-event .event-item-icon .event-item-icon-wrapper,.player-events-container .event-list .event-list-item:hover .event-item-icon .event-item-icon-wrapper{background-color:#5375ff}.player-events-container .event-list .event-list-item.current-event .event-item-icon .event-item-icon-wrapper svg path,.player-events-container .event-list .event-list-item:hover .event-item-icon .event-item-icon-wrapper svg path{fill:#fff}.player-events-container .event-list .event-list-item:hover{background-color:rgba(83,117,255,.1)}.player-events-container .event-list .event-list-item.current-event:hover{background-color:rgba(83,117,255,.2)}.player-events-container .event-list .event-list-item .event-item-icon{display:flex;margin-right:.6666666667rem}.player-events-container .event-list .event-list-item .event-item-icon .event-item-icon-wrapper{display:flex;justify-content:center;align-items:center;transition:background-color .1s;background-color:#f2f2f2;border-radius:4px;height:44px;width:44px}.player-events-container .event-list .event-list-item .event-item-icon .event-item-icon-wrapper svg{width:16px;height:16px}.player-events-container .event-list .event-list-item .event-item-icon .event-item-icon-wrapper svg path{transition:fill .1s;fill:#0f0f0f}.player-events-container .event-list .event-list-item .event-item-content{display:flex;flex-direction:column;flex:1;min-width:0}.player-events-container .event-list .event-list-item .event-item-content .event-item-content-top-row{justify-content:space-between;flex-wrap:nowrap}.player-events-container .event-list .event-list-item .event-item-content .event-item-content-top-row .event-item-content-title{font-weight:600;padding-right:.3333333333rem}.player-events-container .event-list .event-list-item .event-item-content .event-item-content-subtitle .inner{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;z-index:2}.player-events-container .event-list .event-list-item .event-item-content .event-item-content-subtitle.overflowing:hover .inner{overflow:visible;white-space:unset;position:relative;background-color:#fff;padding:1px 2px;top:-1px;left:-2px;border-radius:4px}.player-events-container .event-list .event-list-item .event-item-content .ant-skeleton{position:absolute;display:none}.player-events-container .event-list .event-list-item .event-item-content .ant-skeleton .ant-skeleton-paragraph{margin:0}.player-events-container .event-list .event-list-item .event-item-content .ant-skeleton .ant-skeleton-paragraph li:not(:first-child){margin-top:14px}.player-events-container .event-list .event-list-item .event-item-content.rendering .event-item-content-subtitle,.player-events-container .event-list .event-list-item .event-item-content.rendering .event-item-content-title{visibility:hidden}.player-events-container .event-list .event-list-item .event-item-content.rendering .ant-skeleton{display:table}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/PlayerMeta.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.player-meta-container{display:flex;flex-direction:column;background-color:#fff;border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:.6666666667rem}.player-meta-container .player-meta-person{margin-bottom:.5rem}.player-meta-container .player-meta-person .player-meta-person-title{flex:1}.player-meta-container .player-meta-person .player-meta-person-title .email{font-weight:600;width:100%}.player-meta-container .player-meta-person .player-meta-person-title .time{font-weight:600}.player-meta-container .player-meta-other{flex-direction:column}.player-meta-container .player-meta-other .player-meta-other-description,.player-meta-container .player-meta-other .player-meta-other-resolution{width:100%;height:20px}.player-meta-container .ant-skeleton-paragraph{margin:0}.player-meta-container .ant-skeleton-paragraph li{height:12px}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/Seekbar.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.rrweb-controller-slider{width:100%;height:16px;position:relative}.rrweb-controller-slider .slider{z-index:2;position:relative;height:100%}.rrweb-controller-slider .slider .thumb{z-index:5;-webkit-backface-visibility:hidden;backface-visibility:hidden;top:0;position:absolute;border-radius:50%;width:15px;height:15px;border:2px solid #fff;background-color:#f54e00;transform-origin:center;transform:translateX(-7.5px);transition:transform 50ms}.rrweb-controller-slider .slider .buffer-bar,.rrweb-controller-slider .slider .current-bar,.rrweb-controller-slider .slider .slider-bar{width:100%;border-radius:4px;position:absolute}.rrweb-controller-slider .slider .slider-bar{z-index:1;background-color:rgba(0,0,0,.15);height:4px;top:6px}.rrweb-controller-slider .slider .buffer-bar{z-index:2;transition:width .2s;background-color:#faaf8c;position:absolute;height:2px;top:7px;left:1px;width:0}.rrweb-controller-slider .slider .current-bar{z-index:3;background-color:#f54e00;position:absolute;height:2px;top:7px;left:1px;width:0}.rrweb-controller-slider .slider .inactivity-bar{z-index:4;position:absolute;height:2px;top:7px;left:1px;width:100%}.rrweb-controller-slider .slider .inactivity-bar .activity-section{float:left;height:100%}.rrweb-controller-slider .slider .inactivity-bar .inactive-section{background:repeating-linear-gradient(325deg,transparent,transparent 2px,#fff 0,#fff 4px)}.rrweb-controller-slider .ticks{z-index:1;position:relative;width:100%;bottom:100%}.rrweb-controller-slider .ticks .tick-hover-box{cursor:pointer;position:absolute;height:100%;top:-12px;width:5px;background-color:green;right:-3px}.rrweb-controller-slider .ticks .tick-hover-box .tick-marker{position:absolute;width:1px;height:21px;background-color:#797973;right:2px}.rrweb-controller-slider .ticks .tick-hover-box .tick-info{border-radius:4px;padding:.25rem .5rem;position:absolute;top:-36px;background-color:#2d2d2d;display:none;color:hsla(0,0%,100%,.88);white-space:nowrap;left:50%;transform:translate(-50%)}.rrweb-controller-slider .ticks .tick-hover-box .tick-info.show{display:flex}.rrweb-controller-slider .ticks .tick-hover-box .tick-thumb{position:absolute;width:9px;height:9px;border-radius:50%;right:-2px;top:-4px;border:.5px solid #797973;background-color:#fff;transform-origin:center;transition:transform .2s}.rrweb-controller-slider .ticks .tick-hover-box .tick-thumb.big{transform:scale(1.3)}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/player/styles.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.session-drawer-body{height:calc(100vh - 40px)}@media(max-width:768px){.session-drawer-body{height:unset}}.session-player-v2{display:flex;flex-direction:column;height:100%;width:100%}.session-player-v2 .session-player-body{display:flex;flex-wrap:wrap;flex-direction:row;flex:1;background-color:#fff;height:calc(100% - 40px - 1.33333rem)}@media(max-width:768px){.session-player-v2 .session-player-body{flex:unset;height:calc(100vh - 80px - 1.33333rem)}}.session-player-v2 .session-player-body .player-container{height:100%;flex:1;min-width:1px;position:relative;padding:.6666666667rem .6666666667rem 0}@media(max-width:768px){.session-player-v2 .session-player-body .player-container{width:100%}}.session-player-v2 .session-player-body .player-sidebar{display:flex;flex-direction:column;width:350px;padding:.6666666667rem .6666666667rem 0 0}.session-player-v2 .session-player-body .player-sidebar .player-meta{margin-bottom:.6666666667rem}.session-player-v2 .session-player-body .player-sidebar .player-events{width:100%;height:100%;position:relative}.session-player-v2 .player-sidebar{width:100%;min-width:unset;max-width:unset;padding:0 .6666666667rem .6666666667rem}.session-player-v2 .player-controller{padding:.6666666667rem;background-color:#fff}.session-player-v2 .rrweb-player{height:100%;width:100%;overflow:hidden;border:1px solid rgba(0,0,0,.15);border-radius:4px;background-color:#0f0f0f;box-shadow:0 4px 4px 0 rgba(0,0,0,.25);position:relative}.session-player-v2 .rrweb-player .replayer-wrapper{transform-origin:top left}.session-player-v2 .rrweb-player iframe{border:0;background-color:#fff}.session-player-v2 .rrweb-player .rrweb-overlay-container{position:absolute;left:0;right:0;top:0;bottom:0;display:flex;justify-content:center;align-items:center;z-index:10}.session-player-v2 .rrweb-player .rrweb-overlay-container .rrweb-overlay{transition:all .2s;position:absolute;display:flex;justify-content:center;align-items:center;height:100%;width:100%;background-color:#333;opacity:.2;font-size:40px;color:#fff;cursor:pointer}.session-player-v2 .rrweb-player .rrweb-overlay-container .rrweb-overlay:hover{opacity:.5}.session-player-v2 .rrweb-player .rrweb-overlay-container .rrweb-overlay .rrweb-overlay-play-icon svg{width:5rem;height:5rem}.session-player-v2 .rrweb-timestamp{white-space:nowrap;font-size:14px;margin-right:1rem}.session-player-v2 .rrweb-progress{width:100%;cursor:pointer;margin-right:1rem}.session-player-v2 .rrweb-controller{display:flex;width:100%;background-color:#fff;border-radius:4px;border:1px solid rgba(0,0,0,.15);padding:0 1rem;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:40px;color:#000}.session-player-v2 .rrweb-controller>*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.session-player-v2 .rrweb-controller .rrweb-controller-icon{margin-right:1rem;cursor:pointer;display:flex;justify-content:center;align-items:center}.session-player-v2 .rrweb-controller .rrweb-controller-icon.rrweb-controller-icon-play-pause{margin-right:0}.session-player-v2 .rrweb-controller .rrweb-controller-icon.rrweb-controller-icon-seek{height:18px;width:18px}.session-player-v2 .rrweb-controller .rrweb-controller-icon.rrweb-controller-icon-seek span.seek-seconds{position:absolute;font-size:6px}.session-player-v2 .rrweb-controller .rrweb-controller-icon.rrweb-controller-icon-seek .seek-icon{position:absolute;font-size:18px}.session-player-v2 .rrweb-speed-toggle{cursor:pointer;margin-right:1rem}.session-player-v2 .rrweb-inactivity-toggle{display:flex;flex-direction:row;align-items:center;white-space:nowrap;cursor:pointer}.session-player-v2 .rrweb-inactivity-toggle .inactivity-label{font-size:14px;margin-right:.6666666667rem}.ant-drawer.session-player-drawer-v2 .ant-drawer-body{padding:0}.ant-drawer.session-player-drawer-v2 .ant-drawer-close{padding:1rem}.ant-tabs-content,.ant-tabs-tabpane{height:100%}",""]),Ee.exports=q},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss":function(Ee,q,e){var oe=e("./node_modules/css-loader/dist/runtime/api.js");q=oe(!1),q.push([Ee.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.person-modal .ant-modal-header{padding:1rem}.person-modal .ant-modal-title{overflow:hidden;text-overflow:ellipsis}.person-modal .ant-modal-content{overflow:hidden}.person-modal .ant-modal-body{padding:0;max-height:60vh;overflow-y:auto}.person-modal .ant-modal-footer .ant-btn{color:#5375ff}.person-modal .ant-input-search{padding:1rem}.person-modal .persons-table{border-top:1px solid var(--border);border-bottom:1px solid var(--border)}.person-modal .person-ids{display:flex;flex-direction:column}.person-modal .user-count-subheader{padding:.5rem 1rem;color:var(--muted-alt)}.person-modal .user-count-subheader>*{vertical-align:middle}.person-modal .person-row-container{padding:.5rem 1rem}.person-modal .data-point-selector{padding:.5rem 1rem;border-bottom:1px solid var(--border)}.person-modal .data-point-selector .ant-select{display:block;width:100%}",""]),Ee.exports=q}}]);
