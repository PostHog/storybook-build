(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(ge,K,n){"use strict";n.d(K,"a",function(){return Je});var re=n("./node_modules/core-js/modules/es.array.includes.js"),ee=n.n(re),Ne=n("./node_modules/core-js/modules/es.array.iterator.js"),he=n.n(Ne),xe=n("./node_modules/core-js/modules/es.object.to-string.js"),$e=n.n(xe),Ue=n("./node_modules/core-js/modules/es.object.values.js"),oe=n.n(Ue),e=n("./node_modules/core-js/modules/es.string.includes.js"),v=n.n(e),it=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Oe=n.n(it),Ve=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),Be=n.n(Ve),te=n("./node_modules/kea/lib/index.esm.js"),z=n("./frontend/src/lib/utils.tsx"),F=n("./frontend/src/types.ts"),y=n("./frontend/src/scenes/insights/sharedUtils.ts"),O=n("./frontend/src/scenes/insights/insightLogic.ts");function se(fe,ue){var Ce=Object.keys(fe);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(fe);ue&&(Le=Le.filter(function(Se){return Object.getOwnPropertyDescriptor(fe,Se).enumerable})),Ce.push.apply(Ce,Le)}return Ce}function Pe(fe){for(var ue=1;ue<arguments.length;ue++){var Ce=arguments[ue]!=null?arguments[ue]:{};ue%2?se(Object(Ce),!0).forEach(function(Le){Be()(fe,Le,Ce[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fe,Object.getOwnPropertyDescriptors(Ce)):se(Object(Ce)).forEach(function(Le){Object.defineProperty(fe,Le,Object.getOwnPropertyDescriptor(Ce,Le))})}return fe}function Ee(fe){return Object.values(F.o).includes(fe)}var Je=Object(te.kea)({props:{},key:Object(y.c)("new"),path:function(ue){return["lib","components","ChartFilter","chartFilterLogic",ue]},connect:function(ue){return{actions:[Object(O.c)(ue),["setFilters"]],values:[Object(O.c)(ue),["filters"]]}},actions:function(){return{setChartFilter:function(Ce){return{chartFilter:Ce}}}},selectors:{chartFilter:[function(fe){return[fe.filters]},function(fe){var ue=fe.display,Ce=fe.funnel_viz_type;return(ue===F.d.FunnelViz?Ce:ue)||null}]},listeners:function(ue){var Ce=ue.actions,Le=ue.values;return{setChartFilter:function(jt){var nt=jt.chartFilter,Xe=Le.filters,i=Xe.display,$=Xe.funnel_viz_type;Ee(nt)?($!==nt||i!==F.d.FunnelViz)&&Ce.setFilters(Pe(Pe({},Le.filters),{},{display:F.d.FunnelViz,funnel_viz_type:nt})):Object(z.mb)(i,nt)||Ce.setFilters(Pe(Pe({},Le.filters),{},{display:nt}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(ge,K,n){"use strict";n.d(K,"a",function(){return z});var re=n("./node_modules/core-js/modules/es.array.iterator.js"),ee=n.n(re),Ne=n("./node_modules/core-js/modules/es.object.to-string.js"),he=n.n(Ne),xe=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$e=n.n(xe),Ue=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=n.n(Ue),e=n("./node_modules/kea/lib/index.esm.js"),v=n("./frontend/src/lib/utils.tsx"),it=n("./frontend/src/types.ts"),Oe=n("./frontend/src/scenes/insights/sharedUtils.ts"),Ve=n("./frontend/src/scenes/insights/insightLogic.ts");function Be(F,y){var O=Object.keys(F);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(F);y&&(se=se.filter(function(Pe){return Object.getOwnPropertyDescriptor(F,Pe).enumerable})),O.push.apply(O,se)}return O}function te(F){for(var y=1;y<arguments.length;y++){var O=arguments[y]!=null?arguments[y]:{};y%2?Be(Object(O),!0).forEach(function(se){oe()(F,se,O[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(O)):Be(Object(O)).forEach(function(se){Object.defineProperty(F,se,Object.getOwnPropertyDescriptor(O,se))})}return F}var z=Object(e.kea)({props:{},key:Object(Oe.c)("new"),path:function(y){return["lib","components","CompareFilter","compareFilterLogic",y]},connect:function(y){return{actions:[Object(Ve.c)(y),["setFilters"]],values:[Object(Ve.c)(y),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(O){return{compare:O}},toggleCompare:!0}},selectors:{compare:[function(F){return[F.filters]},function(F){return!!(F!=null&&F.compare)}],disabled:[function(F){return[F.filters,F.canEditInsight]},function(F,y){var O=F.insight,se=F.date_from,Pe=F.display;return!y||O===it.s.LIFECYCLE||Pe===it.d.WorldMap||se==="all"}]},listeners:function(y){var O=y.values,se=y.actions;return{setCompare:function(Ee){var Je=Ee.compare;Object(v.mb)(Je,O.compare)||se.setFilters(te(te({},O.filters),{},{compare:Je}))},toggleCompare:function(){se.setCompare(!O.compare)}}}})},"./frontend/src/scenes/experiments/Experiment.tsx":function(ge,K,n){"use strict";n.r(K),n.d(K,"scene",function(){return Mn}),n.d(K,"Experiment_",function(){return Wt}),n.d(K,"CodeLanguageSelect",function(){return wn});var re=n("./node_modules/core-js/modules/es.symbol.js"),ee=n("./node_modules/core-js/modules/es.symbol.description.js"),Ne=n("./node_modules/core-js/modules/es.array.concat.js"),he=n("./node_modules/core-js/modules/es.array.filter.js"),xe=n("./node_modules/core-js/modules/es.array.map.js"),$e=n("./node_modules/core-js/modules/es.array.reduce.js"),Ue=n("./node_modules/core-js/modules/es.function.name.js"),oe=n("./node_modules/core-js/modules/es.number.constructor.js"),e=n("./node_modules/core-js/modules/es.number.to-fixed.js"),v=n("./node_modules/core-js/modules/es.object.keys.js"),it=n("./node_modules/core-js/modules/es.object.to-string.js"),Oe=n("./node_modules/core-js/modules/es.regexp.to-string.js"),Ve=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),Be=n.n(Ve),te=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),z=n.n(te),F=n("./node_modules/antd/es/form/index.js"),y=n("./node_modules/antd/es/row/index.js"),O=n("./node_modules/antd/es/col/index.js"),se=n("./node_modules/antd/es/input/index.js"),Pe=n("./node_modules/antd/es/tooltip/index.js"),Ee=n("./node_modules/antd/es/select/index.js"),Je=n("./node_modules/antd/es/card/index.js"),fe=n("./node_modules/antd/es/tag/index.js"),ue=n("./node_modules/antd/es/collapse/index.js"),Ce=n("./node_modules/antd/es/skeleton/index.js"),Le=n("./node_modules/antd/es/progress/index.js"),Se=n("./node_modules/kea/lib/index.esm.js"),jt=n("./frontend/src/lib/components/PageHeader.tsx"),nt=n("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Xe=n("./frontend/src/lib/components/PropertyFilters/utils.ts"),i=n("./frontend/src/lib/components/TaxonomicFilter/types.ts"),$=n("./node_modules/react/index.js"),t=n.n($),ke=n("./frontend/src/scenes/funnels/funnelLogic.ts"),ie=n("./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx"),Ae=n("./frontend/src/scenes/insights/insightLogic.ts"),C=n("./frontend/src/types.ts"),He=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Ft=n.n(He),Pa=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),Qn=n.n(Pa),dn={};dn.insert="head",dn.singleton=!1;var Fn=Ft()(Qn.a,dn),Ba=Qn.a.locals||{},ka=n("./node_modules/core-js/modules/es.array.fill.js"),Ka=n("./node_modules/core-js/modules/es.array.find.js"),Fa=n("./node_modules/core-js/modules/es.array.find-index.js"),qn=n("./node_modules/core-js/modules/es.array.iterator.js"),ea=n("./node_modules/core-js/modules/es.array.splice.js"),ta=n("./node_modules/core-js/modules/es.number.epsilon.js"),_n=n("./node_modules/core-js/modules/es.object.values.js"),_a=n("./node_modules/core-js/modules/es.promise.js"),un=n("./node_modules/core-js/modules/es.string.iterator.js"),La=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),na=n("./node_modules/@babel/runtime/regenerator/index.js"),ce=n.n(na),aa=n("./node_modules/regenerator-runtime/runtime.js"),ra=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),me=n.n(ra),sa=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),gt=n.n(sa),lt=n("./frontend/src/lib/api.ts"),je=n("./frontend/src/lib/dayjs.ts"),Ct=n("./frontend/src/scenes/insights/utils/cleanFilters.ts"),mn=n("./frontend/src/scenes/teamLogic.ts"),ht=n("./frontend/src/scenes/urls.ts"),_t=n("./node_modules/kea-router/lib/index.js"),ia=n("./frontend/src/scenes/experiments/experimentsLogic.ts"),ot=n("./frontend/src/lib/constants.tsx"),Et=n("./frontend/src/scenes/trends/trendsLogic.ts"),Vt=n("./frontend/src/lib/utils/eventUsageLogic.ts"),Ht=n("./frontend/src/scenes/userLogic.ts"),De=n("./frontend/src/lib/components/Tooltip.tsx"),Bt=n("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Gt=n("./frontend/src/models/groupsModel.ts"),pn=n("./frontend/src/lib/components/lemonToast.tsx");function la(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);r&&(l=l.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,l)}return s}function k(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?la(Object(s),!0).forEach(function(l){Be()(a,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):la(Object(s)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(s,l))})}return a}var Jt=14,kt=Object(Se.kea)({props:{},key:function(r){return r.experimentId||"new"},path:function(r){return["scenes","experiment","experimentLogic",r]},connect:{values:[mn.a,["currentTeamId"],Ht.a,["hasAvailableFeature"],Gt.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[ia.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:function(r){return{experiment:r}},createExperiment:function(r,s,l){return{draft:r,runningTime:s,sampleSize:l}},setExperimentInsightId:function(r){return{shortId:r}},createNewExperimentInsight:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setNewExperimentData:function(r){return{experimentData:r}},updateExperimentGroup:function(r,s){return{variant:r,idx:s}},removeExperimentGroup:function(r){return{idx:r}},setExperimentInsightType:function(r){return{insightType:r}},setEditExperiment:function(r){return{editing:r}},setSecondaryMetrics:function(r){return{secondaryMetrics:r}},resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:function(r,s){var l=s.experimentData;if(l.filters){var g=k(k({},r==null?void 0:r.filters),l.filters);return k(k(k({},r),l),{},{filters:g})}if(l.parameters){var x=k(k({},r==null?void 0:r.parameters),l.parameters);return k(k(k({},r),l),{},{parameters:x})}return k(k({},r),l)},updateExperimentGroup:function(r,s){var l,g=s.variant,x=s.idx,E=gt()((r==null||(l=r.parameters)===null||l===void 0?void 0:l.feature_flag_variants)||[]);return E[x]=k(k({},E[x]),g),k(k({},r),{},{parameters:k(k({},r==null?void 0:r.parameters),{},{feature_flag_variants:E})})},addExperimentGroup:function(r){var s;if(!(r==null||(s=r.parameters)===null||s===void 0)&&s.feature_flag_variants){var l=Xt(r.parameters.feature_flag_variants.length+1),g=r.parameters.feature_flag_variants.map(function(x,E){return k(k({},x),{},{rollout_percentage:l[E]})});return k(k({},r),{},{parameters:k(k({},r.parameters),{},{feature_flag_variants:[].concat(gt()(g),[{key:"test_group_".concat(r.parameters.feature_flag_variants.length),rollout_percentage:l[l.length-1]}])})})}return r},removeExperimentGroup:function(r,s){var l,g,x=s.idx;if(!r)return r;var E=gt()(((l=r.parameters)===null||l===void 0?void 0:l.feature_flag_variants)||[]);E.splice(x,1);var c=Xt(((r==null||(g=r.parameters)===null||g===void 0?void 0:g.feature_flag_variants)||[]).length-1),S=E.map(function(p,Y){return k(k({},p),{},{rollout_percentage:c[Y]})});return k(k({},r),{},{parameters:k(k({},r.parameters),{},{feature_flag_variants:S})})},setSecondaryMetrics:function(r,s){var l=s.secondaryMetrics,g=l.map(function(x){return x});return k(k({},r),{},{secondary_metrics:g})},resetNewExperiment:function(){return{parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}}}}],experimentInsightType:[C.s.TRENDS,{setExperimentInsightType:function(r,s){var l=s.insightType;return l}}],experimentInsightId:[null,{setExperimentInsightId:function(r,s){var l=s.shortId;return l}}],editingExistingExperiment:[!1,{setEditExperiment:function(r,s){var l=s.editing;return l}}]},listeners:function(r){var s=r.values,l=r.props,g=r.actions;return{createExperiment:function(){var x=me()(ce.a.mark(function c(S){var p,Y,H,pe,M,D,f,de,rt,dt;return ce.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(Y=S.draft,H=S.runningTime,pe=S.sampleSize,M=null,D=!!l.experimentId&&l.experimentId!=="new",R.prev=3,!D){R.next=14;break}return R.next=7,lt.b.update("api/projects/".concat(s.currentTeamId,"/experiments/").concat(l.experimentId),k(k({},s.newExperimentData),{},{parameters:k(k({},(f=s.newExperimentData)===null||f===void 0?void 0:f.parameters),{},{recommended_running_time:H,recommended_sample_size:pe})},!Y&&{start_date:Object(je.a)()}));case 7:if(M=R.sent,!(!((de=M)===null||de===void 0)&&de.id)){R.next=12;break}return g.updateExperiments(M),_t.router.actions.push(ht.a.experiment(M.id)),R.abrupt("return");case 12:R.next=18;break;case 14:return R.next=16,lt.b.create("api/projects/".concat(s.currentTeamId,"/experiments"),k(k({},s.newExperimentData),{},{parameters:k(k({},(rt=s.newExperimentData)===null||rt===void 0?void 0:rt.parameters),{},{recommended_running_time:H,recommended_sample_size:pe})},!Y&&{start_date:Object(je.a)()}));case 16:M=R.sent,M&&Vt.f.actions.reportExperimentCreated(M);case 18:R.next=24;break;case 20:return R.prev=20,R.t0=R.catch(3),pn.a.error(R.t0.detail||"Failed to create experiment"),R.abrupt("return");case 24:!((p=M)===null||p===void 0)&&p.id&&(dt=M.id,_t.router.actions.push(ht.a.experiment(dt)),g.addToExperiments(M),pn.a.success("Experiment ".concat(D?"updated":"created"),{button:{label:"View it",action:function(){_t.router.actions.push(ht.a.experiment(dt))}}}));case 25:case"end":return R.stop()}},c,null,[[3,20]])}));function E(c){return x.apply(this,arguments)}return E}(),createNewExperimentInsight:function(){var x=me()(ce.a.mark(function c(S){var p,Y,H,pe;return ce.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=S.filters,s.experimentInsightType===C.s.FUNNELS?Y=Object(Ct.a)(k({insight:C.s.FUNNELS,funnel_viz_type:C.o.Steps,display:C.d.FunnelViz,date_from:Object(je.a)().subtract(Jt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(je.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:ot.k.horizontal},p)):Y=Object(Ct.a)(k({insight:C.s.TRENDS,date_from:Object(je.a)().subtract(Jt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(je.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},p)),H={name:"",description:"",tags:[],filters:Y,result:null},D.next=5,lt.b.create("api/projects/".concat(s.currentTeamId,"/insights"),H);case 5:pe=D.sent,g.setExperimentInsightId(pe.short_id),g.setNewExperimentData({filters:k({},H.filters)});case 8:case"end":return D.stop()}},c)}));function E(c){return x.apply(this,arguments)}return E}(),setFilters:function(E){var c=E.filters;if(s.experimentInsightType===C.s.FUNNELS){var S;(S=ke.a.findMounted({dashboardItemId:s.experimentInsightId}))===null||S===void 0||S.actions.setFilters(c)}else{var p;(p=Et.a.findMounted({dashboardItemId:s.experimentInsightId}))===null||p===void 0||p.actions.setFilters(c)}},loadExperimentSuccess:function(){var x=me()(ce.a.mark(function c(S){var p;return ce.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:p=S.experimentData,p&&Vt.f.actions.reportExperimentViewed(p),g.setExperimentInsightType((p==null?void 0:p.filters.insight)||C.s.FUNNELS),p!=null&&p.start_date?(g.resetNewExperiment(),g.loadExperimentResults(),g.loadSecondaryMetricResults()):(g.setNewExperimentData(k({},p)),g.createNewExperimentInsight(p==null?void 0:p.filters));case 4:case"end":return H.stop()}},c)}));function E(c){return x.apply(this,arguments)}return E}(),launchExperiment:function(){var x=me()(ce.a.mark(function c(){var S;return ce.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:S=Object(je.a)(),g.updateExperiment({start_date:S.format("YYYY-MM-DDTHH:mm")}),s.experimentData&&Vt.f.actions.reportExperimentLaunched(s.experimentData,S);case 3:case"end":return Y.stop()}},c)}));function E(){return x.apply(this,arguments)}return E}(),endExperiment:function(){var x=me()(ce.a.mark(function c(){var S,p,Y;return ce.a.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:p=Object(je.a)(),g.updateExperiment({end_date:p.format("YYYY-MM-DDTHH:mm")}),Y=p.diff((S=s.experimentData)===null||S===void 0?void 0:S.start_date,"second"),s.experimentData&&Vt.f.actions.reportExperimentCompleted(s.experimentData,p,Y,s.areResultsSignificant);case 4:case"end":return pe.stop()}},c)}));function E(){return x.apply(this,arguments)}return E}(),archiveExperiment:function(){var x=me()(ce.a.mark(function c(){return ce.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:g.updateExperiment({archived:!0}),s.experimentData&&Vt.f.actions.reportExperimentArchived(s.experimentData);case 2:case"end":return p.stop()}},c)}));function E(){return x.apply(this,arguments)}return E}(),setExperimentInsightType:function(){if(l.experimentId==="new"||s.editingExistingExperiment)g.createNewExperimentInsight();else{var E;g.createNewExperimentInsight((E=s.experimentData)===null||E===void 0?void 0:E.filters)}},updateExperimentSuccess:function(){var x=me()(ce.a.mark(function c(S){var p;return ce.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:p=S.experimentData,g.updateExperiments(p);case 2:case"end":return H.stop()}},c)}));function E(c){return x.apply(this,arguments)}return E}()}},loaders:function(r){var s=r.values,l=r.props;return{experimentData:[null,{loadExperiment:function(){var g=me()(ce.a.mark(function E(){var c;return ce.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(l.experimentId&&l.experimentId!=="new")){p.next=16;break}return p.prev=1,p.next=4,lt.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(l.experimentId));case 4:return c=p.sent,p.abrupt("return",c);case 8:if(p.prev=8,p.t0=p.catch(1),p.t0.status!==404){p.next=14;break}_t.router.actions.push(ht.a.experiments()),p.next=16;break;case 14:throw pn.a.error("Failed to load experiment ".concat(l.experimentId)),new Error("Failed to load experiment ".concat(l.experimentId));case 16:return p.abrupt("return",null);case 17:case"end":return p.stop()}},E,null,[[1,8]])}));function x(){return g.apply(this,arguments)}return x}(),updateExperiment:function(){var g=me()(ce.a.mark(function E(c){var S;return ce.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,lt.b.update("api/projects/".concat(s.currentTeamId,"/experiments/").concat(l.experimentId),c);case 2:return S=Y.sent,Y.abrupt("return",S);case 4:case"end":return Y.stop()}},E)}));function x(E){return g.apply(this,arguments)}return x}()}],experimentResults:[null,{loadExperimentResults:function(){var g=me()(ce.a.mark(function E(){var c;return ce.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,lt.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(l.experimentId,"/results"));case 3:return c=p.sent,p.abrupt("return",k(k({},c),{},{itemID:Math.random().toString(36).substring(2,15)}));case 7:if(p.prev=7,p.t0=p.catch(0),p.t0.code!=="no_data"){p.next=11;break}return p.abrupt("return",null);case 11:return pn.a.error(p.t0.detail||"Failed to load experiment results"),p.abrupt("return",null);case 13:case"end":return p.stop()}},E,null,[[0,7]])}));function x(){return g.apply(this,arguments)}return x}()}],secondaryMetricResults:[null,{loadSecondaryMetricResults:function(){var g=me()(ce.a.mark(function E(){var c;return ce.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Promise.all((((c=s.experimentData)===null||c===void 0?void 0:c.secondary_metrics)||[]).map(function(){var Y=me()(ce.a.mark(function H(pe,M){var D;return ce.a.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.prev=0,de.next=3,lt.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(l.experimentId,"/secondary_results?id=").concat(M));case 3:return D=de.sent,de.abrupt("return",D.result);case 7:return de.prev=7,de.t0=de.catch(0),de.abrupt("return",{});case 10:case"end":return de.stop()}},H,null,[[0,7]])}));return function(H,pe){return Y.apply(this,arguments)}}()));case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},E)}));function x(){return g.apply(this,arguments)}return x}()}]}},selectors:{breadcrumbs:[function(a){return[a.experimentData,function(r,s){return s.experimentId}]},function(a,r){return[{name:"Experiments",path:ht.a.experiments()},{name:(a==null?void 0:a.name)||"New",path:ht.a.experiment(r||"new")}]}],variants:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var s,l;if(r!=null&&r.start_date){var g;return(r==null||(g=r.parameters)===null||g===void 0?void 0:g.feature_flag_variants)||[]}return(a==null||(s=a.parameters)===null||s===void 0?void 0:s.feature_flag_variants)||(r==null||(l=r.parameters)===null||l===void 0?void 0:l.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[function(a){return[a.newExperimentData,a.groupsTaxonomicTypes]},function(a,r){var s;return(a==null||(s=a.filters)===null||s===void 0?void 0:s.aggregation_group_type_index)!=null&&r.length>0?[r[a.filters.aggregation_group_type_index]]:[i.a.PersonProperties,i.a.Cohorts]}],parsedSecondaryMetrics:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var s=(a==null?void 0:a.secondary_metrics)||(r==null?void 0:r.secondary_metrics)||[];return s}],minimumDetectableChange:[function(a){return[a.newExperimentData]},function(a){var r;return(a==null||(r=a.parameters)===null||r===void 0?void 0:r.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){return Math.ceil(1600*r*(1-r/100)/(a*a))}}],areResultsSignificant:[function(a){return[a.experimentResults]},function(a){return(a==null?void 0:a.significant)||!1}],significanceBannerDetails:[function(a){return[a.experimentResults]},function(a){if((a==null?void 0:a.significance_code)===C.E.HighLoss){var r;return t.a.createElement(t.a.Fragment,null,"This is because the expected loss in conversion is greater than 1%",t.a.createElement(De.a,{placement:"right",title:t.a.createElement(t.a.Fragment,null,"Current value is ",(r=((a==null?void 0:a.expected_loss)||0)*100)===null||r===void 0?void 0:r.toFixed(2),"%")},t.a.createElement(Bt.a,{style:{padding:"4px 2px"}})),".")}if((a==null?void 0:a.significance_code)===C.E.HighPValue){var s;return t.a.createElement(t.a.Fragment,null,"This is because the p value is greater than 0.05",t.a.createElement(De.a,{placement:"right",title:t.a.createElement(t.a.Fragment,null,"Current value is ",(a==null||(s=a.p_value)===null||s===void 0?void 0:s.toFixed(3))||1,".")},t.a.createElement(Bt.a,{style:{padding:"4px 2px"}})),".")}return(a==null?void 0:a.significance_code)===C.E.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(a==null?void 0:a.significance_code)===C.E.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){var s=r*a/100,l=r,g=s+r;return parseFloat((4/Math.pow(Math.sqrt(l/Jt)-Math.sqrt(g/Jt),2)).toFixed(1))}}],expectedRunningTime:[function(){return[]},function(){return function(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jt;return parseFloat((r/(a/s)).toFixed(1))}}],conversionRateForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var s="Can't find variant";if(!a)return s;var l=(a==null?void 0:a.insight).find(function(g){var x,E;return((x=g[0])===null||x===void 0||(E=x.breakdown_value)===null||E===void 0?void 0:E[0])===r});return l?(l[l.length-1].count/l[0].count*100).toFixed(1):s}}],getIndexForVariant:[function(a){return[a.experimentResults]},function(a){return function(r,s){if(!a)return 0;var l=-1;return s===C.s.FUNNELS?l=gt()(a==null?void 0:a.insight).sort(function(g,x){var E,c;return((E=x[0])===null||E===void 0?void 0:E.count)-((c=g[0])===null||c===void 0?void 0:c.count)}).findIndex(function(g){var x,E;return((x=g[0])===null||x===void 0||(E=x.breakdown_value)===null||E===void 0?void 0:E[0])===r}):l=(a==null?void 0:a.insight).findIndex(function(g){return g.breakdown_value===r}),l===-1?0:l}}],countDataForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var s="Can't find variant";if(!a)return s;var l=(a==null?void 0:a.insight).find(function(g){return g.breakdown_value===r});return l?l.count.toString():s}}],highestProbabilityVariant:[function(a){return[a.experimentResults]},function(a){if(a){var r=Math.max.apply(Math,gt()(Object.values(a.probability)));return Object.keys(a.probability).find(function(s){return Math.abs(a.probability[s]-r)<Number.EPSILON})}}],areTrendResultsConfusing:[function(a){return[a.experimentResults,a.highestProbabilityVariant]},function(a,r){if(!a)return!1;var s=(a==null?void 0:a.insight).reduce(function(l,g){return g.count>l.count?g:l},{count:0,breakdown_value:""});return s.count?s.breakdown_value!==r:!1}]},urlToAction:function(r){var s=r.actions,l=r.values,g=r.props;return{"/experiments/:id":function(E){var c=E.id;if(!l.hasAvailableFeature(C.c.EXPERIMENTATION)){_t.router.actions.push("/experiments");return}if(c){var S=c==="new"?"new":parseInt(c);S==="new"&&(s.createNewExperimentInsight(),s.resetNewExperiment(),s.setSecondaryMetrics([])),s.setEditExperiment(!1),S!=="new"&&S===g.experimentId&&s.loadExperiment()}}}}});function Xt(a){var r=Math.round(100/a),s=r*a,l=s-100,g=new Array(a).fill(r);return g[a-1]=r-l,g}var fn=n("./frontend/src/scenes/insights/InsightContainer.tsx"),at=n("./frontend/src/lib/components/icons.tsx"),Ln=n("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),St=n("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),Zt=n("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),mt=n("./frontend/src/lib/components/CopyToClipboard.tsx"),Re=n("./frontend/src/lib/utils.tsx"),oa=n("./frontend/src/scenes/funnels/funnelUtils.ts"),ca=n("./node_modules/antd/es/modal/index.js"),bt=n("./node_modules/antd/es/button/index.js"),da=n("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js");function Qt(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);r&&(l=l.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,l)}return s}function Tt(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Qt(Object(s),!0).forEach(function(l){Be()(a,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Qt(Object(s)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(s,l))})}return a}var vn=14,gn={name:"",filters:{insight:C.s.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},ua={name:"",filters:{insight:C.s.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:ot.k.horizontal}},qt=Object(Se.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[mn.a,["currentTeamId"]]},actions:{setSecondaryMetrics:function(r){return{secondaryMetrics:r}},createNewMetric:!0,addNewMetric:function(r){return{metric:r}},updateMetricFilters:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setPreviewInsightId:function(r){return{shortId:r}},createPreviewInsight:function(r){return{filters:r}},showModal:!0,hideModal:!1,changeInsightType:function(r){return{type:r}},setCurrentMetricName:function(r){return{name:r}},deleteMetric:function(r){return{metricId:r}}},loaders:function(r){var s=r.values;return{experiments:[[],{loadExperiments:function(){var l=me()(ce.a.mark(function x(){var E;return ce.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,lt.b.get("api/projects/".concat(s.currentTeamId,"/experiments"));case 2:return E=S.sent,S.abrupt("return",E.results);case 4:case"end":return S.stop()}},x)}));function g(){return l.apply(this,arguments)}return g}()}]}},reducers:function(r){var s=r.props;return{previewInsightId:[null,{setPreviewInsightId:function(g,x){var E=x.shortId;return E}}],metrics:[s.initialMetrics,{addNewMetric:function(g,x){var E=x.metric;return[].concat(gt()(g),[Tt({},E)])},deleteMetric:function(g,x){var E=x.metricId;return g.filter(function(c,S){return S!==E})}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1}}],currentMetricName:["",{setCurrentMetricName:function(g,x){var E=x.name;return E}}],currentMetric:[gn,{changeInsightType:function(g,x){var E=x.type;return E===C.s.TRENDS?gn:g.filters.insight===C.s.TRENDS?ua:gn},updateMetricFilters:function(g,x){var E=x.filters;return Tt(Tt({},g),{},{filters:E})}}]}},listeners:function(r){var s=r.actions,l=r.values,g=r.props;return{createPreviewInsight:function(){var x=me()(ce.a.mark(function c(S){var p,Y,H,pe;return ce.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=S.filters,(p==null?void 0:p.insight)===C.s.FUNNELS?Y=Object(Ct.a)(Tt({insight:C.s.FUNNELS,funnel_viz_type:C.o.Steps,display:C.d.FunnelViz,date_from:Object(je.a)().subtract(vn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(je.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:ot.k.horizontal},p)):Y=Object(Ct.a)(Tt({insight:C.s.TRENDS,date_from:Object(je.a)().subtract(vn,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(je.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},p)),H={description:"",tags:[],filters:Y,result:null},D.next=5,lt.b.create("api/projects/".concat(mn.a.values.currentTeamId,"/insights"),H);case 5:pe=D.sent,s.setPreviewInsightId(pe.short_id);case 7:case"end":return D.stop()}},c)}));function E(c){return x.apply(this,arguments)}return E}(),setFilters:function(E){var c=E.filters;if(c.insight===C.s.FUNNELS){var S;(S=ke.a.findMounted({dashboardItemId:l.previewInsightId}))===null||S===void 0||S.actions.setFilters(c)}else{var p;(p=Et.a.findMounted({dashboardItemId:l.previewInsightId}))===null||p===void 0||p.actions.setFilters(c)}},createNewMetric:function(){s.addNewMetric(Tt(Tt({},l.currentMetric),{},{name:l.currentMetricName})),g.onMetricsChange(l.metrics),s.changeInsightType(C.s.TRENDS),s.setCurrentMetricName("")},deleteMetric:function(){g.onMetricsChange(l.metrics)},changeInsightType:function(){return s.createPreviewInsight(l.currentMetric.filters)}}},events:function(r){var s=r.actions;return{afterMount:function(){s.createPreviewInsight()}}}}),We=n("./frontend/src/lib/components/LemonButton/index.ts"),ct=n("./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function pt(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);r&&(l=l.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,l)}return s}function yt(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?pt(Object(s),!0).forEach(function(l){Be()(a,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(s,l))})}return a}function en(a){var r=a.onMetricsChange,s=a.initialMetrics,l=qt({onMetricsChange:r,initialMetrics:s}),g=Object(Se.useValues)(l),x=g.previewInsightId,E=g.metrics,c=g.modalVisible,S=g.currentMetric,p=Object(Se.useActions)(l),Y=p.createNewMetric,H=p.updateMetricFilters,pe=p.setFilters,M=p.showModal,D=p.hideModal,f=p.changeInsightType,de=p.setCurrentMetricName,rt=p.deleteMetric,dt=Object(Se.useValues)(Object(Ae.c)({dashboardItemId:x,syncWithUrl:!1})),xt=dt.insightProps,R=Object(Se.useValues)(Object(ke.a)(xt)),Ot=R.isStepsEmpty,ft=R.filterSteps;return t.a.createElement(t.a.Fragment,null,t.a.createElement(ca.a,{title:"Add secondary metric",visible:c,destroyOnClose:!0,onCancel:D,footer:null,style:{minWidth:600}},t.a.createElement(F.a,{layout:"vertical",initialValues:{type:C.s.TRENDS},onValuesChange:function(Fe){Fe.name&&de(Fe.name)},onFinish:function(){Y(),D()},scrollToFirstError:!0,requiredMark:!1},t.a.createElement(F.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}]},t.a.createElement(se.a,null)),t.a.createElement(F.a.Item,{name:"type",label:"Type"},t.a.createElement(Ee.a,{style:{display:"flex"},value:S.filters.insight,onChange:function(){f()},suffixIcon:t.a.createElement(St.a,null),dropdownMatchSelectWidth:!1},t.a.createElement(Ee.a.Option,{value:C.s.TRENDS},t.a.createElement(O.a,null,t.a.createElement("span",null,t.a.createElement("b",null,"Trend")))),t.a.createElement(Ee.a.Option,{value:C.s.FUNNELS},t.a.createElement(O.a,null,t.a.createElement("span",null,t.a.createElement("b",null,"Conversion funnel")))))),t.a.createElement(F.a.Item,{name:"query",label:"Query"},t.a.createElement(Je.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},S.filters.insight===C.s.FUNNELS&&t.a.createElement(ie.a,{filters:S.filters,setFilters:function(Fe){var st=yt(yt({},S.filters),{},{insight:C.s.FUNNELS},Fe);H(st),pe(st)},typeKey:"funnel-preview-metric",mathAvailability:ct.b.None,hideDeleteBtn:ft.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!Ot,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[i.a.EventProperties,i.a.PersonProperties,i.a.Cohorts,i.a.Elements],rowClassName:"action-filters-bordered"}),S.filters.insight===C.s.TRENDS&&t.a.createElement(ie.a,{entitiesLimit:1,horizontalUI:!0,filters:S.filters,setFilters:function(Fe){var st=yt(yt({},S.filters),{},{insight:C.s.TRENDS},Fe);H(st),pe(st)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,propertiesTaxonomicGroupTypes:[i.a.EventProperties,i.a.PersonProperties,i.a.Cohorts,i.a.Elements]}))),t.a.createElement(F.a.Item,{name:"metric-preview",label:"Metric preview"},t.a.createElement(Se.BindLogic,{logic:Ae.c,props:xt},t.a.createElement(fn.a,{disableHeader:!0,disableTable:!0}))),t.a.createElement(y.a,{justify:"end"},t.a.createElement(We.a,{type:"secondary",className:"mr-05",onClick:function(){return D()}},"Cancel"),t.a.createElement(We.a,{type:"primary",htmlType:"submit"},"Save")))),t.a.createElement(y.a,null,t.a.createElement(O.a,null,E.map(function(X,Fe){return t.a.createElement(y.a,{key:Fe,className:"mt"},t.a.createElement(y.a,{align:"middle",className:"full-width border-all",style:{padding:8}},t.a.createElement("div",{style:{fontWeight:500}},"Name")," ",t.a.createElement("div",{className:"metric-name"},X.name),t.a.createElement(da.a,{className:"text-danger",style:{padding:8},onClick:function(){return rt(Fe)}})),t.a.createElement(Je.a,{className:"full-width",style:{borderTop:"none"},bodyStyle:{padding:0}},X.filters.insight===C.s.FUNNELS&&t.a.createElement(ie.a,{filters:X.filters,setFilters:function(vt){var Qe=yt(yt({},X.filters),{},{insight:C.s.FUNNELS},vt);H(Qe),pe(Qe)},typeKey:"funnel-preview-".concat(Fe),mathAvailability:ct.b.None,hideDeleteBtn:ft.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!Ot,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[i.a.EventProperties,i.a.PersonProperties,i.a.Cohorts,i.a.Elements],rowClassName:"action-filters-bordered",readOnly:!0}),X.filters.insight===C.s.TRENDS&&t.a.createElement(ie.a,{horizontalUI:!0,filters:X.filters,setFilters:function(vt){var Qe=yt(yt({},X.filters),{},{insight:C.s.TRENDS},vt);H(Qe),pe(Qe)},typeKey:"trend-preview-".concat(Fe),buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[i.a.EventProperties,i.a.PersonProperties,i.a.Cohorts,i.a.Elements],readOnly:!0})))}),E&&!(E.length>2)&&t.a.createElement(O.a,null,t.a.createElement("div",{className:"mb-05 mt"},t.a.createElement(bt.a,{style:{color:"var(--primary)",minWidth:240},onClick:M},"Add metric"))))))}try{en.displayName="SecondaryMetrics",en.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:en.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(a){}var Dn=n("./frontend/src/lib/colors.ts"),ma=n("./frontend/src/lib/components/EntityFilterInfo.tsx"),pa=n("./frontend/src/lib/components/EditableField/EditableField.tsx"),tn=n("./frontend/src/lib/components/Link.tsx"),It=n("./frontend/src/lib/logic/featureFlagLogic.ts"),fa=n("./node_modules/antd/es/slider/index.js"),Kt=n("./node_modules/antd/es/input-number/index.js"),va=n("./frontend/src/lib/components/InsightLabel/index.tsx"),hn=n("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function En(){var a=Object($.useState)(!1),r=z()(a,2),s=r[0],l=r[1],g=Object($.useState)(!1),x=z()(g,2),E=x[0],c=x[1];return t.a.createElement(Je.a,{className:"experiment-workflow",title:t.a.createElement("span",{className:"card-secondary"},"Experiment workflow")},t.a.createElement(y.a,null,t.a.createElement(O.a,{className:"exp-workflow-step step-completed full-width"},t.a.createElement(y.a,{align:"middle"},t.a.createElement(at.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),t.a.createElement("b",{className:"ml-05"},"Create experiment")),t.a.createElement("div",{className:"ml-2"},"Set variants, select participants, and add secondary metrics"))),t.a.createElement(y.a,null,t.a.createElement(O.a,{className:"full-width exp-workflow-step ".concat(s?"step-completed":""),onClick:function(){return l(!s)}},t.a.createElement(y.a,{align:"middle"},s?t.a.createElement(at.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):t.a.createElement(at.IconRadioButtonUnchecked,null),t.a.createElement("b",{className:"ml-05"},"Validate experiment")),t.a.createElement("div",{className:"ml-2"},"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."))),t.a.createElement(y.a,null,t.a.createElement(O.a,{className:"full-width exp-workflow-step ".concat(E?"step-completed":""),onClick:function(){return c(!E)}},t.a.createElement(y.a,{align:"middle"},E?t.a.createElement(at.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):t.a.createElement(at.IconRadioButtonUnchecked,null),t.a.createElement("b",{className:"ml-05"},"Launch experiment")),t.a.createElement("div",{className:"ml-2"},"Run your experiment, monitor results, and decide when to terminate your experiment."))))}function nn(a){var r,s,l,g,x,E,c=a.experiment,S=a.trendCount,p=a.funnelConversionRate,Y=a.trendExposure,H=a.funnelSampleSize,pe=a.funnelEntrants,M=(c==null?void 0:c.id)||"new",D=Object(Se.useValues)(kt({experimentId:M})),f=D.experimentInsightType,de=D.editingExistingExperiment,rt=D.minimumDetectableChange,dt=D.expectedRunningTime,xt=D.aggregationLabel,R=Object(Se.useActions)(kt({experimentId:M})),Ot=R.setNewExperimentData,ft=f===C.s.FUNNELS&&100-p<50?100-p:50,X=Object(je.a)().diff(Object(je.a)(c==null?void 0:c.start_date),"hour"),Fe=0;c!=null&&c.start_date?Fe=dt(pe||1,H||0,X):Fe=dt(pe||1,H||0);var st=Object(je.a)(c==null?void 0:c.start_date).add(Fe,"hour"),vt=!(c!=null&&c.end_date)&&X>=24&&pe&&H,Qe=Object(Re.s)(c==null||(r=c.filters)===null||r===void 0?void 0:r.properties);return t.a.createElement(y.a,null,t.a.createElement(O.a,{span:!(c!=null&&c.start_date)&&M!=="new"&&!de?12:24},M==="new"&&t.a.createElement(y.a,{className:"experiment-preview-row"},t.a.createElement("div",null,t.a.createElement("div",null,t.a.createElement("b",null,"Experiment preview")),t.a.createElement("div",{className:"text-muted"},"Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "))),(M==="new"||de)&&t.a.createElement(y.a,{className:"mb"},t.a.createElement(O.a,{span:24},t.a.createElement("div",null,t.a.createElement("b",null,"Minimum acceptable improvement"),t.a.createElement(Pe.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept."},t.a.createElement(Bt.a,{style:{marginLeft:4}}))),t.a.createElement(y.a,{className:"mde-slider"},t.a.createElement(O.a,{span:8},t.a.createElement(fa.a,{defaultValue:5,value:rt,min:1,max:ft,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:function(ze){Ot({parameters:{minimum_detectable_effect:ze}})},tipFormatter:function(ze){return"".concat(ze,"%")}})),t.a.createElement(Kt.a,{min:1,max:ft,defaultValue:5,formatter:function(ze){return"".concat(ze,"%")},style:{margin:"0 16px"},value:rt,onChange:function(ze){Ot({parameters:{minimum_detectable_effect:ze}})}})))),t.a.createElement(y.a,{className:"experiment-preview-row ".concat(c!=null&&c.start_date?"mr":"")},f===C.s.TRENDS?t.a.createElement(t.a.Fragment,null,!(c!=null&&c.start_date)&&t.a.createElement(t.a.Fragment,null,t.a.createElement(O.a,{span:6},t.a.createElement("div",{className:"card-secondary"},"Baseline Count"),t.a.createElement("div",{className:"l4"},Object(Re.O)(S||0))),t.a.createElement(O.a,{span:6},t.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Count"),t.a.createElement("div",{className:"l4"},Object(Re.O)(S+Math.ceil(S*(rt/100))||0)))),t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary"},"Recommended running time"),t.a.createElement("div",null,t.a.createElement("span",{className:"l4"},"~",Object(Re.O)(Y||0))," days"))):t.a.createElement(t.a.Fragment,null,!(c!=null&&c.start_date)&&t.a.createElement(t.a.Fragment,null,t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary"},"Baseline Conversion Rate"),t.a.createElement("div",{className:"l4"},p.toFixed(1),"%")),t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Conversion Rate"),t.a.createElement("div",{className:"l4"},(p+rt).toFixed(1),"%"))),t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary"},"Recommended Sample Size"),t.a.createElement("div",{className:"pb"},t.a.createElement("span",{className:"l4"},"~",Object(Re.O)(H||0))," persons")),!(c!=null&&c.start_date)&&t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary"},"Recommended running time"),t.a.createElement("div",null,t.a.createElement("span",{className:"l4"},"~",Object(Re.O)(Fe||0))," days"))),t.a.createElement(y.a,{className:"full-width mt"},t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary"},"Experiment variants"),t.a.createElement("ul",{className:"variants-list"},c==null||(s=c.parameters)===null||s===void 0||(l=s.feature_flag_variants)===null||l===void 0?void 0:l.map(function(Me,ze){return t.a.createElement("li",{key:ze},Me.key)}))),t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary"},"Participants"),t.a.createElement("div",null,Qe!=null&&Qe.length?t.a.createElement("div",null,Qe==null?void 0:Qe.map(function(Me){return t.a.createElement(hn.c,{key:Me.key,item:Me,style:{margin:2,cursor:"default"}})})):t.a.createElement(t.a.Fragment,null,"100% of"," ",(c==null||(g=c.filters)===null||g===void 0?void 0:g.aggregation_group_type_index)!=null?Object(Re.j)(xt(c.filters.aggregation_group_type_index).plural):"users")))),t.a.createElement(y.a,{className:"full-width"},M!=="new"&&!de&&t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary mt"},"Start date"),c!=null&&c.start_date?t.a.createElement("span",null,Object(je.a)(c==null?void 0:c.start_date).format("D MMM YYYY")):t.a.createElement("span",{className:"description"},"Not started yet")),f===C.s.FUNNELS&&vt?t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary mt"},"Expected end date"),t.a.createElement("span",null,st.isAfter(Object(je.a)())?st.format("D MMM YYYY"):Object(je.a)().format("D MMM YYYY"))):null,(c==null?void 0:c.end_date)&&t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"card-secondary mt"},"Completed date"),t.a.createElement("span",null,Object(je.a)(c==null?void 0:c.end_date).format("D MMM YYYY"))))),M!=="new"&&!de&&t.a.createElement(y.a,{className:"experiment-preview-row"},t.a.createElement(O.a,null,t.a.createElement("div",{className:"card-secondary mb-05"},f===C.s.FUNNELS?"Conversion goal steps":"Trend goal"),[].concat(gt()((c==null||(x=c.filters)===null||x===void 0?void 0:x.events)||[]),gt()((c==null||(E=c.filters)===null||E===void 0?void 0:E.actions)||[])).sort(function(Me,ze){return(Me.order||0)-(ze.order||0)}).map(function(Me,ze){var an;return t.a.createElement(O.a,{key:ze,className:"mb-05"},t.a.createElement(y.a,{style:{marginBottom:4}},t.a.createElement("div",{className:"preview-conversion-goal-num"},f===C.s.FUNNELS?(Me.order||0)+1:ze+1),t.a.createElement("b",null,t.a.createElement(va.b,{action:Me,showCountedByTag:f===C.s.TRENDS,hideIcon:!0}))),(an=Me.properties)===null||an===void 0?void 0:an.map(function(rn){return t.a.createElement(hn.c,{key:rn.key,item:rn})}))})))),M!=="new"&&!de&&!(c!=null&&c.start_date)&&t.a.createElement(O.a,{span:12,className:"pl"},t.a.createElement(En,null)))}try{nn.displayName="ExperimentPreview",nn.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:nn.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(a){}var bn=n("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx");function Ze(a){var r,s,l,g=a.experiment,x=Object($.useState)("control"),E=z()(x,2),c=E[0],S=E[1];return t.a.createElement(Je.a,{title:t.a.createElement("span",{className:"card-secondary"},"Feature flag usage and implementation"),className:"experiment-implementation-details"},t.a.createElement(y.a,{justify:"space-between",className:"mb-05"},t.a.createElement("div",null,t.a.createElement("span",{className:"mr-05"},"Variant group"),t.a.createElement(Ee.a,{onChange:S,defaultValue:"control",suffixIcon:t.a.createElement(St.a,null)},g==null||(r=g.parameters)===null||r===void 0||(s=r.feature_flag_variants)===null||s===void 0?void 0:s.map(function(p,Y){return t.a.createElement(Ee.a.Option,{key:Y,value:p.key},p.key)}))),t.a.createElement("div",null,t.a.createElement(wn,null))),t.a.createElement("b",null,"Implement your experiment in code"),t.a.createElement(bn.a,{language:bn.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat((l=g==null?void 0:g.feature_flag_key)!==null&&l!==void 0?l:"","') === '").concat(c,`') {
    // where '`).concat(c,`' is the variant, run your code here
}`)),t.a.createElement("b",null,"Test that it works"),t.a.createElement(bn.a,{language:bn.b.JavaScript},"posthog.feature_flags.override({'".concat(g==null?void 0:g.feature_flag_key,"': '").concat(c,"'})")),t.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://posthog.com/docs/user-guides/feature-flags"},t.a.createElement(y.a,{align:"middle"},"Experiment implementation guide",t.a.createElement(at.IconOpenInNew,{className:"ml-05"}))))}try{Ze.displayName="ExperimentImplementationDetails",Ze.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:Ze.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(a){}function ga(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);r&&(l=l.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,l)}return s}function Ut(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ga(Object(s),!0).forEach(function(l){Be()(a,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ga(Object(s)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(s,l))})}return a}var Mn={component:Wt,logic:kt,paramsToProps:function(r){var s=r.params.id;return{experimentId:s==="new"?"new":parseInt(s)}}};function Wt(){var a,r,s,l,g,x,E,c,S,p,Y,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=H.id,M=Object(Se.useValues)(kt({experimentId:pe})),D=M.newExperimentData,f=M.experimentData,de=M.experimentInsightId,rt=M.minimumSampleSizePerVariant,dt=M.recommendedExposureForCountData,xt=M.variants,R=M.experimentResults,Ot=M.countDataForVariant,ft=M.editingExistingExperiment,X=M.experimentInsightType,Fe=M.experimentResultsLoading,st=M.parsedSecondaryMetrics,vt=M.areResultsSignificant,Qe=M.conversionRateForVariant,Me=M.getIndexForVariant,ze=M.significanceBannerDetails,an=M.areTrendResultsConfusing,rn=M.taxonomicGroupTypesForSelection,yn=M.groupTypes,ha=M.aggregationLabel,Ie=M.secondaryMetricResults,An=M.experimentDataLoading,Ea=M.secondaryMetricResultsLoading,qe=Object(Se.useActions)(kt({experimentId:pe})),Lt=qe.setNewExperimentData,Rn=qe.createExperiment,Vn=qe.launchExperiment,ut=qe.setFilters,ba=qe.setEditExperiment,zt=qe.endExperiment,Dt=qe.addExperimentGroup,Mt=qe.updateExperiment,ya=qe.updateExperimentGroup,Bn=qe.removeExperimentGroup,xn=qe.setSecondaryMetrics,Da=qe.setExperimentInsightType,Ma=qe.archiveExperiment,xa=Object(Se.useValues)(It.a),Nt=xa.featureFlags,Pt=F.a.useForm(),kn=z()(Pt,1),Oa=kn[0],ja=Object($.useState)(!0),Kn=z()(ja,2),On=Kn[0],jn=Kn[1],Un=Object(Se.useValues)(Object(Ae.c)({dashboardItemId:de})),Yt=Un.insightProps,sn=Object(Se.useValues)(Object(ke.a)(Yt)),wa=sn.isStepsEmpty,Ca=sn.filterSteps,Cn=sn.filters,Sn=sn.results,Sa=sn.conversionMetrics,Wn=Object(Se.useValues)(Object(Et.a)(Yt)),ln=Wn.filters,Ta=Wn.results,Tn=Sa.totalRate*100,Ia=rt(Tn),In=Ia*xt.length,Nn=(a=Ta[0])===null||a===void 0?void 0:a.count,zn=Sn==null||(r=Sn[0])===null||r===void 0?void 0:r.count,Yn=dt(Nn),$t=Math.floor(24/(xt.length+2)),on=X===C.s.FUNNELS&&(R==null?void 0:R.insight)?R.insight.reduce(function(V,B){var _e;return((_e=B[0])===null||_e===void 0?void 0:_e.count)+V},0):0,$n=X===C.s.FUNNELS?(on||0)/((f==null||(s=f.parameters)===null||s===void 0?void 0:s.recommended_sample_size)||1)*100:Object(je.a)().diff(f==null?void 0:f.start_date,"day")/((f==null||(l=f.parameters)===null||l===void 0?void 0:l.recommended_running_time)||1)*100,Pn={running:"green",draft:"default",complete:"purple"},Na=function(){if(f!=null&&f.start_date){if(!(f!=null&&f.end_date))return"running"}else return"draft";return"complete"},Aa=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return t.a.createElement(t.a.Fragment,null,pe==="new"||ft?t.a.createElement(t.a.Fragment,null,t.a.createElement(y.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8}},t.a.createElement(jt.a,{title:"New experiment"}),t.a.createElement(y.a,null,t.a.createElement(We.a,{type:"secondary",className:"mr-05",onClick:function(){return _t.router.actions.push(ht.a.experiments())}},"Cancel"),t.a.createElement(We.a,{type:"primary",htmlType:"submit",form:"new-experiment"},"Save"))),t.a.createElement(F.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:Oa,onValuesChange:function(B){return Lt(B)},initialValues:{name:D==null?void 0:D.name,feature_flag_key:D==null?void 0:D.feature_flag_key,description:D==null?void 0:D.description},onFinish:function(){return Rn(!0,Yn,In)},requiredMark:!1,scrollToFirstError:!0},t.a.createElement("div",null,t.a.createElement(Se.BindLogic,{logic:Ae.c,props:Yt},t.a.createElement(y.a,null,t.a.createElement(O.a,{span:12,style:{paddingRight:24}},t.a.createElement(y.a,{className:"full-width"},t.a.createElement(F.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}]},t.a.createElement(se.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})),t.a.createElement(F.a.Item,{style:{marginBottom:"1rem"},label:t.a.createElement("div",null,"Feature flag key"," ",t.a.createElement(Pe.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment."},t.a.createElement(Bt.a,null))),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}]},t.a.createElement(se.a,{"data-attr":"experiment-feature-flag-key",disabled:ft}))),t.a.createElement(F.a.Item,{label:t.a.createElement("div",null,"Description ",t.a.createElement("span",{className:"text-muted"},"(optional)")),name:"description"},t.a.createElement(se.a.TextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})),(D==null||(g=D.parameters)===null||g===void 0?void 0:g.feature_flag_variants)&&t.a.createElement(O.a,null,t.a.createElement("label",null,t.a.createElement("b",null,"Experiment variants")),t.a.createElement("div",{className:"text-muted"},"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."),t.a.createElement(O.a,{className:"variants"},D.parameters.feature_flag_variants.map(function(V,B){return t.a.createElement(F.a,{key:"".concat(V,"-").concat(B),initialValues:{key:V.key},onValuesChange:function(et){ya(et,B)}},t.a.createElement(y.a,{key:"".concat(V,"-").concat(B),className:"feature-flag-variant ".concat(B===0?"border-top":B>=3?"border-bottom":"")},t.a.createElement("div",{className:"variant-label",style:Ut({},Aa[B])},B===0?"Control":"Test"),t.a.createElement(F.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:t.a.createElement(t.a.Fragment,null,t.a.createElement(Ln.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores.")}],style:{display:"contents"}},t.a.createElement(se.a,{disabled:B===0,"data-attr":"feature-flag-variant-key","data-key-index":B.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(B+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})),t.a.createElement("div",{className:"float-right"},!(B===0||B===1)&&t.a.createElement(Pe.a,{title:"Delete this variant",placement:"bottomLeft"},t.a.createElement(We.a,{type:"primary-alt",compact:!0,icon:t.a.createElement(at.IconDelete,null),onClick:function(){return Bn(B)}})))))}),D.parameters.feature_flag_variants.length<4&&t.a.createElement("div",{className:"feature-flag-variant border-bottom"},t.a.createElement(We.a,{onClick:function(){return Dt()},fullWidth:!0,icon:t.a.createElement(at.IconPlusMini,null)},"Add test variant")))),t.a.createElement(y.a,{className:"person-selection"},t.a.createElement("div",{className:"mb-05"},t.a.createElement("strong",null,"Select participants")),t.a.createElement(O.a,null,t.a.createElement("div",{className:"text-muted"},"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."),t.a.createElement("div",{className:"mt mb-05"},t.a.createElement("strong",null,"Participant type")),t.a.createElement(Ee.a,{value:(D==null||(x=D.filters)===null||x===void 0?void 0:x.aggregation_group_type_index)!=null?D.filters.aggregation_group_type_index:-1,onChange:function(B){var _e,et=B!==-1?B:void 0;et!=(D==null||(_e=D.filters)===null||_e===void 0?void 0:_e.aggregation_group_type_index)&&(ut({properties:[],aggregation_group_type_index:et}),Lt({filters:{aggregation_group_type_index:et,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1},t.a.createElement(Ee.a.Option,{key:-1,value:-1},"Persons"),yn.map(function(V){return t.a.createElement(Ee.a.Option,{key:V.group_type_index,value:V.group_type_index},Object(Re.j)(ha(V.group_type_index).plural))})),t.a.createElement("div",{className:"mt"},t.a.createElement("strong",null,"Filters")),t.a.createElement(nt.a,{pageKey:"experiment-participants-property",propertyFilters:X===C.s.FUNNELS?Object(Re.s)(Cn.properties):Object(Re.s)(ln.properties),onChange:function(B){Lt({filters:{properties:B}}),ut({properties:B.filter(Xe.b)})},taxonomicGroupTypes:rn})))),t.a.createElement(y.a,{className:"metrics-selection"},t.a.createElement(O.a,{span:12},t.a.createElement("div",{className:"mb-05"},t.a.createElement("b",null,"Goal type"),t.a.createElement("div",{className:"text-muted"},X===C.s.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events")),t.a.createElement(Ee.a,{style:{display:"flex"},value:X,onChange:Da,suffixIcon:t.a.createElement(St.a,null),dropdownMatchSelectWidth:!1},t.a.createElement(Ee.a.Option,{value:C.s.TRENDS},t.a.createElement(O.a,null,t.a.createElement("span",null,t.a.createElement("b",null,"Trend")))),t.a.createElement(Ee.a.Option,{value:C.s.FUNNELS},t.a.createElement(O.a,null,t.a.createElement("span",null,t.a.createElement("b",null,"Conversion funnel"))))),t.a.createElement("div",{className:"mb mt"},t.a.createElement("b",null,"Experiment goal"),X===C.s.TRENDS&&t.a.createElement("div",{className:"text-muted"},"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment.")),t.a.createElement(y.a,null,t.a.createElement(Je.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},X===C.s.FUNNELS&&t.a.createElement(ie.a,{filters:Cn,setFilters:function(B){Lt({filters:B}),ut(B)},typeKey:"EditFunnel-action",mathAvailability:ct.b.None,hideDeleteBtn:Ca.length===1,buttonCopy:"Add funnel step",buttonType:"link",showSeriesIndicator:!wa,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[i.a.EventProperties,i.a.PersonProperties,i.a.Cohorts,i.a.Elements],rowClassName:"action-filters-bordered"}),X===C.s.TRENDS&&t.a.createElement(ie.a,{horizontalUI:!0,filters:ln,setFilters:function(B){Lt({filters:B}),ut(B)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[i.a.EventProperties,i.a.PersonProperties,i.a.Cohorts,i.a.Elements],customRowPrefix:ln.insight===C.s.LIFECYCLE?t.a.createElement(t.a.Fragment,null,"Showing ",t.a.createElement("b",null,"Unique users")," who did"):void 0}))),Nt[ot.i.EXPERIMENTS_SECONDARY_METRICS]&&t.a.createElement(O.a,{className:"secondary-metrics"},t.a.createElement("div",null,t.a.createElement("b",null,"Secondary metrics"),t.a.createElement("span",{className:"text-muted ml-05"},"(optional)")),t.a.createElement("div",{className:"text-muted",style:{marginTop:4}},"Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "),t.a.createElement(en,{onMetricsChange:function(B){return xn(B)},initialMetrics:st}))),t.a.createElement(O.a,{span:12,className:"pl"},t.a.createElement("div",{className:"card-secondary mb"},"Goal preview"),t.a.createElement(fn.a,{disableHeader:X===C.s.TRENDS,disableTable:!0})))),t.a.createElement(y.a,null,t.a.createElement(Je.a,{className:"experiment-preview"},t.a.createElement(nn,{experiment:D,trendCount:Nn,trendExposure:Yn,funnelSampleSize:In,funnelEntrants:zn,funnelConversionRate:Tn}))))),t.a.createElement(We.a,{className:"float-right",type:"primary",htmlType:"submit"},"Save"))):!An&&f?t.a.createElement("div",{className:"view-experiment"},t.a.createElement(y.a,{className:"draft-header"},t.a.createElement(y.a,{justify:"space-between",align:"middle",className:"full-width pb"},t.a.createElement(O.a,null,t.a.createElement(y.a,null,t.a.createElement(jt.a,{style:{paddingRight:8},title:"".concat(f==null?void 0:f.name),buttons:t.a.createElement(t.a.Fragment,null,t.a.createElement(mt.a,{explicitValue:f.feature_flag_key,iconStyle:{color:"var(--text-muted-alt)"}},t.a.createElement("span",{className:"text-muted"},f.feature_flag_key)),t.a.createElement(fe.a,{style:{alignSelf:"center"},color:Pn[Na()]},t.a.createElement("b",{className:"uppercase"},Na())),R&&f.end_date&&t.a.createElement(fe.a,{style:{alignSelf:"center"},color:vt?"green":"geekblue"},t.a.createElement("b",{className:"uppercase"},vt?"Significant Results":"Results not significant")))})),t.a.createElement("span",{className:"exp-description"},f.start_date?t.a.createElement(pa.a,{multiline:!0,name:"description",value:f.description||"",placeholder:"Description (optional)",onSave:function(B){return Mt({description:B})},maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):t.a.createElement(t.a.Fragment,null,f.description||"There is no description for this experiment."))),f&&!f.start_date&&t.a.createElement("div",{className:"flex-center"},t.a.createElement(We.a,{type:"secondary",className:"mr-05",onClick:function(){return ba(!0)}},"Edit"),t.a.createElement(We.a,{type:"primary",onClick:function(){return Vn()}},"Launch")),f&&f.start_date&&!f.end_date&&t.a.createElement(We.a,{type:"secondary",status:"danger",onClick:function(){return zt()}},"Stop"),(f==null?void 0:f.end_date)&&Object(je.a)().isSameOrAfter(Object(je.a)(f.end_date),"day")&&!f.archived&&t.a.createElement(We.a,{type:"secondary",status:"danger",onClick:function(){return Ma()}},t.a.createElement("b",null,"Archive")))),t.a.createElement(y.a,null,On&&R&&vt&&!f.end_date&&t.a.createElement(y.a,{align:"middle",className:"significant-results"},t.a.createElement(O.a,{span:20,style:{fontWeight:500,color:"#497342"}},t.a.createElement("div",null,"Experiment results are significant."," ",f.end_date?"":"You can end your experiment now or let it run until complete.")),t.a.createElement(O.a,{span:4},f.end_date?t.a.createElement(Zt.a,{className:"close-button",onClick:function(){return jn(!1)}}):t.a.createElement(We.a,{type:"highlighted",className:"end-experiment-btn",onClick:function(){return zt()}},"End experiment"))),On&&R&&!vt&&!f.end_date&&t.a.createElement(y.a,{align:"top",className:"not-significant-results"},t.a.createElement(O.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"}},t.a.createElement("strong",null,"Your results are not statistically significant"),"."," ",ze," ",f!=null&&f.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",t.a.createElement("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations"}," ","experimentation guide"," "),"for more information."," "),t.a.createElement(O.a,{span:1},t.a.createElement(Zt.a,{className:"close-button",onClick:function(){return jn(!1)}}))),On&&f.end_date&&t.a.createElement(y.a,{align:"top",className:"feature-flag-mods"},t.a.createElement(O.a,{span:23,style:{fontWeight:500}},t.a.createElement("strong",null,"Your experiment is complete.")," We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",t.a.createElement(tn.a,{to:f.feature_flag?ht.a.featureFlag(f.feature_flag):void 0},t.a.createElement("b",null,"Adjust feature flag distribution"))),t.a.createElement(O.a,{span:1},t.a.createElement(Zt.a,{className:"close-button",onClick:function(){return jn(!1)}})))),t.a.createElement(y.a,null,t.a.createElement(ue.a,{className:"full-width",defaultActiveKey:"experiment-details"},t.a.createElement(ue.a.Panel,{header:t.a.createElement("b",null,"Experiment details"),key:"experiment-details"},t.a.createElement(y.a,null,t.a.createElement(O.a,{span:f!=null&&f.start_date?12:24},t.a.createElement(nn,{experiment:f,trendCount:Nn,trendExposure:f==null?void 0:f.parameters.recommended_running_time,funnelSampleSize:f==null?void 0:f.parameters.recommended_sample_size,funnelConversionRate:Tn,funnelEntrants:f!=null&&f.start_date?on:zn})),!Fe&&!R&&f.start_date&&t.a.createElement(O.a,{span:12},t.a.createElement(Ze,{experiment:f})),(R||((E=f.secondary_metrics)===null||E===void 0?void 0:E.length)>0)&&t.a.createElement(O.a,{className:"secondary-progress",span:f!=null&&f.start_date?12:24},Nt[ot.i.EXPERIMENTS_SECONDARY_METRICS]&&!!(f!=null&&f.secondary_metrics.length)&&t.a.createElement(O.a,{className:"border-bottom"},t.a.createElement(y.a,{align:"middle",justify:"space-between",className:"mb-05"},t.a.createElement(O.a,{className:"card-secondary",span:2*$t},"Secondary metrics"),f==null||(c=f.parameters)===null||c===void 0||(S=c.feature_flag_variants)===null||S===void 0?void 0:S.map(function(V,B){return t.a.createElement(O.a,{key:B,span:$t,style:{color:"".concat(X===C.s.FUNNELS?Object(oa.k)(Me(V.key,C.s.FUNNELS)+1):Object(Dn.c)("white")[Me(V.key,C.s.TRENDS)])}},t.a.createElement("span",{className:"text-default"},Object(Re.j)(V.key)))})),Nt[ot.i.EXPERIMENTS_SECONDARY_METRICS]&&(f.start_date?Ea?t.a.createElement(Ce.a,{active:!0,paragraph:!1}):t.a.createElement(t.a.Fragment,null,f.secondary_metrics.map(function(V,B){var _e,et;return t.a.createElement(y.a,{className:"border-top",key:B,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},t.a.createElement(O.a,{span:2*$t},Object(Re.j)(V.name)),f==null||(_e=f.parameters)===null||_e===void 0||(et=_e.feature_flag_variants)===null||et===void 0?void 0:et.map(function(cn,Hn){return t.a.createElement(O.a,{key:Hn,span:$t},Ie!=null&&Ie[B][cn.key]?V.filters.insight===C.s.FUNNELS?t.a.createElement(t.a.Fragment,null,((Ie==null?void 0:Ie[B][cn.key])*100).toFixed(1),"%"):t.a.createElement(t.a.Fragment,null,Object(Re.O)(Ie==null?void 0:Ie[B][cn.key])):t.a.createElement(t.a.Fragment,null,"--"))}))})):t.a.createElement(t.a.Fragment,null,f.secondary_metrics.map(function(V,B){var _e,et;return t.a.createElement(y.a,{className:"border-top",key:B,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},t.a.createElement(O.a,{span:2*$t},Object(Re.j)(V.name)),f==null||(_e=f.parameters)===null||_e===void 0||(et=_e.feature_flag_variants)===null||et===void 0?void 0:et.map(function(cn,Hn){return t.a.createElement(O.a,{key:Hn,span:$t},"--")}))})))),R&&t.a.createElement(O.a,{className:"mt"},t.a.createElement("div",{className:"mb-05"},t.a.createElement("b",null,"Experiment progress")),t.a.createElement(Le.a,{strokeWidth:20,showInfo:!1,percent:$n,strokeColor:"var(--success)"}),X===C.s.TRENDS&&f.start_date&&t.a.createElement(y.a,{justify:"space-between",className:"mt-05"},f.end_date?t.a.createElement("div",null,"Ran for"," ",t.a.createElement("b",null,Object(je.a)(f.end_date).diff(f.start_date,"day"))," ","days"):t.a.createElement("div",null,t.a.createElement("b",null,Object(je.a)().diff(f.start_date,"day"))," ","days running"),t.a.createElement("div",null,"Goal:"," ",t.a.createElement("b",null,f==null||(p=f.parameters)===null||p===void 0?void 0:p.recommended_running_time)," ","days")),X===C.s.FUNNELS&&t.a.createElement(y.a,{justify:"space-between",className:"mt-05"},f.end_date?t.a.createElement("div",null,"Saw"," ",t.a.createElement("b",null,Object(Re.O)(on))," ","participants"):t.a.createElement("div",null,t.a.createElement("b",null,Object(Re.O)(on))," ","participants seen"),t.a.createElement("div",null,"Goal:"," ",t.a.createElement("b",null,Object(Re.O)((f==null||(Y=f.parameters)===null||Y===void 0?void 0:Y.recommended_sample_size)||0))," ","participants"))))))),!(f!=null&&f.start_date)&&t.a.createElement("div",{className:"mt full-width"},t.a.createElement(Ze,{experiment:f}))),t.a.createElement("div",{className:"experiment-result"},R?t.a.createElement(t.a.Fragment,null,t.a.createElement(y.a,{justify:"space-around",style:{flexFlow:"nowrap"}},Object.keys(R.probability).sort(function(V,B){return R.probability[B]-R.probability[V]}).map(function(V,B){return t.a.createElement(O.a,{key:B,className:"pr"},t.a.createElement("div",null,t.a.createElement("b",null,Object(Re.j)(V))),X===C.s.TRENDS?t.a.createElement(y.a,null,t.a.createElement("b",{style:{paddingRight:4}},t.a.createElement(y.a,null,"action"in R.insight[0]&&t.a.createElement(ma.a,{filter:R.insight[0].action}),t.a.createElement("span",{style:{paddingLeft:4}},"count:")))," ",Ot(V)," ",an&&B===0&&t.a.createElement(Pe.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher."},t.a.createElement(Bt.a,{style:{padding:"4px 2px"}}))):t.a.createElement(y.a,null,t.a.createElement("b",{style:{paddingRight:4}},"Conversion rate:")," ",Qe(V),"%"),t.a.createElement(Le.a,{percent:Number((R.probability[V]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:X===C.s.FUNNELS?Object(oa.k)(Me(V,C.s.FUNNELS)+1):Object(Dn.c)("white")[Me(V,C.s.TRENDS)]}),t.a.createElement("div",null,"Probability that this variant is the best:"," ",t.a.createElement("b",null,(R.probability[V]*100).toFixed(1),"%")))}))):Fe&&t.a.createElement("div",{className:"text-center"},t.a.createElement(Ce.a,{active:!0})),R?t.a.createElement(Se.BindLogic,{logic:Ae.c,props:{dashboardItemId:R.itemID,cachedInsight:{short_id:R.itemID,filters:Ut(Ut(Ut({},R.filters),{},{insight:X,display:f.filters.display},X===C.s.FUNNELS&&{layout:ot.k.vertical,funnel_viz_type:C.o.Steps}),X===C.s.TRENDS&&{display:C.d.ActionsLineGraphCumulative}),result:R.insight},doNotLoad:!0}},t.a.createElement("div",{className:"mt"},t.a.createElement(fn.a,{disableHeader:X===C.s.TRENDS,disableTable:X===C.s.FUNNELS}))):f.start_date&&t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"no-experiment-results"},!Fe&&t.a.createElement("div",{className:"text-center"},t.a.createElement("b",null,"There are no results for this experiment yet."),t.a.createElement("div",{className:"text-default"},"Double check your feature flag implementation if you're still not seeing results.")))))):t.a.createElement(Ce.a,{active:!0}))}function wn(){return t.a.createElement(Ee.a,{defaultValue:"JavaScript",suffixIcon:t.a.createElement(St.a,null)},t.a.createElement(Ee.a.Option,{value:"JavaScript"},t.a.createElement(y.a,{align:"middle"},t.a.createElement(at.IconJavascript,{style:{marginRight:6}})," JavaScript")))}try{Wt.displayName="Experiment_",Wt.__docgenInfo={description:"",displayName:"Experiment_",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/Experiment.tsx#Experiment_"]={docgenInfo:Wt.__docgenInfo,name:"Experiment_",path:"frontend/src/scenes/experiments/Experiment.tsx#Experiment_"})}catch(a){}},"./frontend/src/scenes/experiments/experimentsLogic.ts":function(ge,K,n){"use strict";n.d(K,"a",function(){return Se});var re=n("./node_modules/core-js/modules/es.array.concat.js"),ee=n.n(re),Ne=n("./node_modules/core-js/modules/es.array.filter.js"),he=n.n(Ne),xe=n("./node_modules/core-js/modules/es.array.iterator.js"),$e=n.n(xe),Ue=n("./node_modules/core-js/modules/es.array.map.js"),oe=n.n(Ue),e=n("./node_modules/core-js/modules/es.object.to-string.js"),v=n.n(e),it=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Oe=n.n(it),Ve=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Be=n.n(Ve),te=n("./node_modules/@babel/runtime/regenerator/index.js"),z=n.n(te),F=n("./node_modules/regenerator-runtime/runtime.js"),y=n.n(F),O=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),se=n.n(O),Pe=n("./node_modules/kea/lib/index.esm.js"),Ee=n("./frontend/src/lib/api.ts"),Je=n("./frontend/src/scenes/teamLogic.ts"),fe=n("./frontend/src/types.ts"),ue=n("./frontend/src/lib/utils.tsx"),Ce=n("./frontend/src/scenes/userLogic.ts"),Le=n("./frontend/src/lib/components/lemonToast.tsx"),Se=Object(Pe.kea)({path:["scenes","experiments","experimentsLogic"],connect:{values:[Je.a,["currentTeamId"],Ce.a,["hasAvailableFeature"]]},actions:{},loaders:function(nt){var Xe=nt.values,i=nt.actions;return{experiments:[[],{loadExperiments:function(){var $=se()(z.a.mark(function ke(ie){var Ae;return z.a.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(Xe.hasAvailableFeature(fe.c.EXPERIMENTATION)){He.next=2;break}return He.abrupt("return",[]);case 2:return He.next=4,Ee.b.get("api/projects/".concat(Xe.currentTeamId,"/experiments?").concat(ie||""));case 4:return Ae=He.sent,He.abrupt("return",Ae.results);case 6:case"end":return He.stop()}},ke)}));function t(ke){return $.apply(this,arguments)}return t}(),deleteExperiment:function(){var $=se()(z.a.mark(function ke(ie){return z.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Ee.b.delete("api/projects/".concat(Xe.currentTeamId,"/experiments/").concat(ie));case 2:return Le.a.info("Experiment removed"),C.abrupt("return",Xe.experiments.filter(function(He){return He.id!==ie}));case 4:case"end":return C.stop()}},ke)}));function t(ke){return $.apply(this,arguments)}return t}(),addToExperiments:function(t){return[].concat(Be()(Xe.experiments),[t])},updateExperiments:function(t){return Xe.experiments.map(function(ke){return ke.id===t.id?t:ke})}}],tab:[fe.h.All,{setExperimentsFilters:function(){var $=se()(z.a.mark(function ke(ie){var Ae,C;return z.a.wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return Ae=ie.tab,C=Ae===fe.h.Yours?Object(ue.yb)({user:!0}):Object(ue.yb)({archived:!0}),Ae===fe.h.All?i.loadExperiments(Object(ue.yb)({all:!0})):i.loadExperiments(C),Ft.abrupt("return",Ae);case 4:case"end":return Ft.stop()}},ke)}));function t(ke){return $.apply(this,arguments)}return t}()}]}},events:function(nt){var Xe=nt.actions;return{afterMount:function(){Xe.loadExperiments(Object(ue.yb)({all:!0}))}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(ge,K,n){"use strict";n.d(K,"a",function(){return Gn});var re=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),ee=n.n(re),Ne=n("./node_modules/antd/es/card/index.js"),he=n("./node_modules/antd/es/row/index.js"),xe=n("./node_modules/antd/es/col/index.js"),$e=n("./node_modules/core-js/modules/es.array.includes.js"),Ue=n("./node_modules/core-js/modules/es.string.includes.js"),oe=n("./node_modules/react/index.js"),e=n.n(oe),v=n("./node_modules/kea/lib/index.esm.js"),it=n("./node_modules/antd/es/tag/index.js"),Oe=n("./node_modules/antd/es/select/index.js"),Ve=n("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),Be=n("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),te=n("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),z=n("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},y=F,O=n("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),se=function(o,d){return oe.createElement(O.a,Object(z.a)(Object(z.a)({},o),{},{ref:d,icon:y}))};se.displayName="AreaChartOutlined";var Pe=oe.forwardRef(se),Ee=n("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},fe=Je,ue=function(o,d){return oe.createElement(O.a,Object(z.a)(Object(z.a)({},o),{},{ref:d,icon:fe}))};ue.displayName="TableOutlined";var Ce=oe.forwardRef(ue),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},Se=Le,jt=function(o,d){return oe.createElement(O.a,Object(z.a)(Object(z.a)({},o),{},{ref:d,icon:Se}))};jt.displayName="PieChartOutlined";var nt=oe.forwardRef(jt),Xe=n("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),i=n("./frontend/src/types.ts"),$=n("./frontend/src/lib/utils.tsx"),t=n("./frontend/src/scenes/insights/insightLogic.ts"),ke=n("./frontend/src/scenes/insights/ActionFilter/entityFilterLogic.ts"),ie=n("./frontend/src/lib/components/Tooltip.tsx");function Ae(u){var o=u.filters,d=u.onChange,m=u.disabled,j=Object(v.useValues)(t.c),h=j.insightProps,b=Object(v.useValues)(Object(Ve.a)(h)),N=b.chartFilter,P=Object(v.useActions)(Object(Ve.a)(h)),_=P.setChartFilter,T=o.insight===i.s.STICKINESS||o.insight===i.s.RETENTION,I=o.insight===i.s.RETENTION||o.insight===i.s.STICKINESS,A=o.insight===i.s.RETENTION||o.insight===i.s.STICKINESS||!!o.breakdown&&o.breakdown!=="$geoip_country_code"&&o.breakdown!=="$geoip_country_name"||Object(ke.c)(o).length>1,L=o.insight===i.s.RETENTION,W=L||o.insight===i.s.STICKINESS||o.insight===i.s.RETENTION,G=o.insight===i.s.RETENTION?i.d.ActionsTable:o.insight===i.s.FUNNELS?i.d.FunnelViz:i.d.ActionsLineGraph;function w(U){var J=U.icon,ne=U.tooltip,Q=U.children,q=Q===void 0?null:Q;return e.a.createElement(ie.a,{title:ne,placement:"left"},e.a.createElement("div",{style:{width:"100%"}},J," ",q))}function be(U){var J=U.children,ne=J===void 0?null:J;return e.a.createElement(it.a,{color:"orange",style:{marginLeft:8,fontSize:10}},ne)}var Z=o.insight===i.s.FUNNELS?[{value:i.o.Steps,label:e.a.createElement(w,{icon:e.a.createElement(Be.a,null)},"Steps")},{value:i.o.Trends,label:e.a.createElement(w,{icon:e.a.createElement(te.a,null)},"Trends",e.a.createElement(be,null,"BETA"))}]:[{label:"Line Chart",options:[{value:i.d.ActionsLineGraph,label:e.a.createElement(w,{icon:e.a.createElement(te.a,null)},"Linear")},{value:i.d.ActionsLineGraphCumulative,label:e.a.createElement(w,{icon:e.a.createElement(Pe,null)},"Cumulative"),disabled:T}]},{label:"Bar Chart",options:[{value:i.d.ActionsBar,label:e.a.createElement(w,{icon:e.a.createElement(Ee.a,null)},"Time"),disabled:L},{value:i.d.ActionsBarValue,label:e.a.createElement(w,{icon:e.a.createElement(Ee.a,null)},"Value"),disabled:W}]},{value:i.d.ActionsTable,label:e.a.createElement(w,{icon:e.a.createElement(Ce,null)},"Table")},{value:i.d.ActionsPie,label:e.a.createElement(w,{icon:e.a.createElement(nt,null)},"Pie"),disabled:I},{value:i.d.WorldMap,label:e.a.createElement(w,{icon:e.a.createElement(Xe.a,null),tooltip:"Visualize data by country. Only works with one series at a time."},"World Map"),disabled:A}];return e.a.createElement(Oe.a,{key:"2",defaultValue:o.display||G,value:N||G,onChange:function(J){_(J),d==null||d(J)},bordered:!0,dropdownAlign:$.a.bottomRight,dropdownMatchSelectWidth:!1,listHeight:288,"data-attr":"chart-filter",disabled:m,options:Z})}try{Ae.displayName="ChartFilter",Ae.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:Ae.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(u){}var C=n("./node_modules/antd/es/checkbox/index.js"),He=n("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Ft(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=Object(v.useValues)(Object(He.a)(o)),m=d.compare,j=d.disabled,h=Object(v.useActions)(Object(He.a)(o)),b=h.setCompare;return j?null:e.a.createElement(C.a,{onChange:function(P){b(P.target.checked)},checked:m,style:{marginLeft:8,marginRight:6},disabled:j},"Compare",e.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var Pa=n("./node_modules/core-js/modules/es.array.map.js"),Qn=n("./node_modules/core-js/modules/es.object.entries.js"),dn=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Fn=n.n(dn),Ba=n("./node_modules/core-js/modules/es.array.iterator.js"),ka=n("./node_modules/core-js/modules/es.object.to-string.js"),Ka=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Fa=n("./frontend/src/scenes/insights/sharedUtils.ts");function qn(u,o){var d=Object.keys(u);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);o&&(m=m.filter(function(j){return Object.getOwnPropertyDescriptor(u,j).enumerable})),d.push.apply(d,m)}return d}function ea(u){for(var o=1;o<arguments.length;o++){var d=arguments[o]!=null?arguments[o]:{};o%2?qn(Object(d),!0).forEach(function(m){ee()(u,m,d[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(d)):qn(Object(d)).forEach(function(m){Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(d,m))})}return u}var ta=Object(v.kea)({props:{},key:Object(Fa.c)("new"),path:function(o){return["lib","components","IntervalFilter","intervalFilterLogic",o]},connect:function(o){return{actions:[Object(t.c)(o),["setFilters"]],values:[Object(t.c)(o),["filters"]]}},actions:function(){return{setInterval:function(d){return{interval:d}}}},listeners:function(o){var d=o.values,m=o.actions;return{setInterval:function(h){var b=h.interval;Object($.mb)(b,d.filters.interval)||m.setFilters(ea(ea({},d.filters),{},{interval:b}))}}},selectors:{interval:[function(u){return[u.filters]},function(u){return u==null?void 0:u.interval}]}}),_n=n("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),_a={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function un(u){var o=u.disabled,d=Object(v.useValues)(t.c),m=d.insightProps,j=Object(v.useValues)(ta(m)),h=j.interval,b=Object(v.useActions)(ta(m)),N=b.setInterval,P=Object.entries(_a).map(function(_){var T=Fn()(_,2),I=T[0],A=T[1].label;return{key:I,value:I,label:I===h?e.a.createElement(e.a.Fragment,null,e.a.createElement(_n.a,null)," ",A):A}});return e.a.createElement(Oe.a,{bordered:!0,disabled:o,defaultValue:h||"day",value:h||void 0,dropdownMatchSelectWidth:!1,onChange:N,"data-attr":"interval-filter",options:P})}try{un.displayName="IntervalFilter",un.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:un.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(u){}var La=n("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),na=n("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function ce(u,o){var d=Object.keys(u);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);o&&(m=m.filter(function(j){return Object.getOwnPropertyDescriptor(u,j).enumerable})),d.push.apply(d,m)}return d}function aa(u){for(var o=1;o<arguments.length;o++){var d=arguments[o]!=null?arguments[o]:{};o%2?ce(Object(d),!0).forEach(function(m){ee()(u,m,d[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(d)):ce(Object(d)).forEach(function(m){Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(d,m))})}return u}function ra(){var u=Object(v.useValues)(t.c),o=u.filters,d=Object(v.useActions)(t.c),m=d.setFilters,j=o.interval,h=o.smoothing_intervals;if(!j)return null;var b=na.a[j].map(function(N){var P=N.value,_=N.label;return{value:P,label:P===h?e.a.createElement(e.a.Fragment,null,e.a.createElement(La.a,null)," ",_):_}});return b.length?e.a.createElement(Oe.a,{key:j,bordered:!0,value:h||1,dropdownMatchSelectWidth:!1,onChange:function(P){m(aa(aa({},o),{},{smoothing_intervals:P}))},"data-attr":"smoothing-filter",options:b}):e.a.createElement(e.a.Fragment,null)}var me=n("./frontend/src/lib/constants.tsx"),sa=n("./node_modules/@babel/runtime/helpers/extends.js"),gt=n.n(sa),lt=n("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),je=n("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function Ct(u){var o=Object(v.useValues)(t.c),d=o.insightProps,m=Object(v.useValues)(Object(lt.a)(d)),j=m.dates,h=j.dateFrom,b=j.dateTo,N=Object(v.useActions)(Object(lt.a)(d)),P=N.setDates;return e.a.createElement(je.a,gt()({},u,{dateFrom:h!=null?h:void 0,dateTo:b!=null?b:void 0,onChange:function(T,I){var A;P(T,I),(A=u.onChange)===null||A===void 0||A.call(u,T,I)}}))}try{Ct.displayName="InsightDateFilter",Ct.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:Ct.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(u){}var mn=n("./node_modules/rc-picker/lib/generate/dayjs.js"),ht=n.n(mn),_t=n("./node_modules/antd/lib/date-picker/generatePicker/index.js"),ia=n.n(_t),ot=n("./frontend/src/scenes/retention/retentionTableLogic.ts"),Et=n("./frontend/src/lib/dayjs.ts"),Vt=ia()(ht.a);function Ht(u){var o=u.disabled,d=Object(v.useValues)(t.c),m=d.insightProps,j=Object(v.useValues)(Object(ot.e)(m)),h=j.filters,b=Object(v.useActions)(Object(ot.e)(m)),N=b.setFilters,P=h.date_to&&Object(Et.a)(h.date_to).year()!==Object(Et.a)().year()?", YYYY":"";return e.a.createElement(e.a.Fragment,null,e.a.createElement(ie.a,{title:"Cohorts up to this end date"},e.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},e.a.createElement(_n.a,null),e.a.createElement(Vt,{showTime:h.period==="Hour",use12Hours:!0,format:h.period==="Hour"?"MMM D".concat(P,", h a"):"MMM D".concat(P),value:h.date_to?Object(Et.a)(h.date_to):void 0,onChange:function(T){return N({date_to:T&&Object(Et.a)(T).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:o}))))}try{Ht.displayName="RetentionDatePicker",Ht.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:Ht.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(u){}var De=n("./frontend/src/scenes/funnels/funnelLogic.ts"),Bt=n("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function Gt(u){var o=u.disabled,d=Object(v.useValues)(t.c),m=d.insightProps,j=Object(v.useValues)(Object(De.a)(m)),h=j.barGraphLayout,b=Object(v.useActions)(Object(De.a)(m)),N=b.setFilters,P=[{value:me.k.vertical,icon:e.a.createElement(Ee.a,null),label:"Left to right"},{value:me.k.horizontal,icon:e.a.createElement(Bt.a,null),label:"Top to bottom"}];return e.a.createElement(Oe.a,{defaultValue:me.k.vertical,value:h||me.k.vertical,onChange:function(T){return N({layout:T})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:o},e.a.createElement(Oe.a.OptGroup,{label:"Graph display options"},P.map(function(_){return e.a.createElement(Oe.a.Option,{key:_.value,value:_.value,label:e.a.createElement(e.a.Fragment,null,_.icon," ",_.label)},_.label)})))}try{Gt.displayName="FunnelDisplayLayoutPicker",Gt.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:Gt.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(u){}var pn=n("./node_modules/core-js/modules/es.array.filter.js"),la=n("./node_modules/core-js/modules/es.array.from.js"),k=n("./node_modules/core-js/modules/es.array.slice.js"),Jt=n("./node_modules/core-js/modules/es.string.iterator.js"),kt=n("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),Xt=n("./frontend/src/scenes/paths/pathsLogic.ts"),fn=n("./frontend/src/scenes/userLogic.ts");function at(u){var o,d=u.disabled,m=Object(v.useValues)(t.c),j=m.insightProps,h=Object(v.useValues)(Object(Xt.b)(j)),b=h.filter,N=Object(v.useActions)(Object(Xt.b)(j)),P=N.setFilter,_=Object(v.useValues)(fn.a),T=_.user,I=2,A=!(T==null||(o=T.organization)===null||o===void 0)&&o.available_features.includes(i.c.PATHS_ADVANCED)?20:5,L=Array.from(Array.from(Array.from(Array(A+1).keys()).slice(I)),function(W){return{label:"".concat(W," Steps"),value:W}});return e.a.createElement(Oe.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:b.step_limit||Xt.a,onSelect:function(G){return P({step_limit:G})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:$.a.bottomRight,optionLabelProp:"label",disabled:d},L.map(function(W){return e.a.createElement(Oe.a.Option,{key:W.value,value:W.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(kt.a,null)," ",W.label)},W.label)}))}try{at.displayName="PathStepPicker",at.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:at.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(u){}var Ln=n("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function St(u){var o=u.disabled,d=Object(v.useValues)(t.c),m=d.insightProps,j=Object(v.useValues)(Object(ot.e)(m)),h=j.retentionReference,b=Object(v.useActions)(Object(ot.e)(m)),N=b.setRetentionReference;return e.a.createElement(Oe.a,{value:h,onChange:N,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:o},[{value:"total",icon:e.a.createElement(Ln.a,null),label:"Overall cohort"},{value:"previous",icon:e.a.createElement(Ln.a,null),label:"Relative to previous period"}].map(function(P){return e.a.createElement(Oe.a.Option,{key:P.value,value:P.value,label:e.a.createElement(e.a.Fragment,null,P.icon," ",P.label)},P.label)}))}try{St.displayName="ReferencePicker",St.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:St.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(u){}var Zt=n("./node_modules/antd/es/tooltip/index.js"),mt=n("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Re=n("./node_modules/core-js/modules/es.array.concat.js"),oa=n("./node_modules/core-js/modules/es.set.js"),ca=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),bt=n.n(ca),da=n("./node_modules/antd/es/input-number/index.js"),Qt=n("./node_modules/clsx/dist/clsx.m.js"),Tt=0,vn=90,gn=new Set([5,15,25,50,90]),ua=[{label:"Auto bins",value:me.a,display:!0}].concat(bt()(Array.from(Array.from(Array(vn+1).keys()),function(u){return{label:"".concat(u," bins"),value:u,display:gn.has(u)}})),[{label:"Custom",value:"custom",display:!0}]);function qt(u){var o=u.disabled,d=Object(v.useValues)(t.c),m=d.insightProps,j=Object(v.useValues)(Object(De.a)(m)),h=j.filters,b=j.numericBinCount,N=Object(v.useActions)(Object(De.a)(m)),P=N.setBinCount;return e.a.createElement(Oe.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:me.a,value:h.bin_count||me.a,onSelect:function(T){return P(T)},dropdownRender:function(T){return e.a.createElement(e.a.Fragment,null,T,e.a.createElement("div",null,e.a.createElement(da.a,{className:"funnel-bins-custom-picker",size:"middle",min:Tt,max:vn,value:b,onChange:function(A){var L=typeof A=="string"?parseInt(A):A;L&&P(L)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:$.a.bottomRight,optionLabelProp:"label",disabled:o},e.a.createElement(Oe.a.OptGroup,{label:"Bin Count"},ua.map(function(_){return _.value==="custom"?null:e.a.createElement(Oe.a.Option,{className:Object(Qt.a)({"select-option-hidden":!_.display}),key:_.value,value:_.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(Ee.a,null)," ",_.label)},_.label)})))}try{qt.displayName="FunnelBinsPicker",qt.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:qt.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(u){}var We=n("./frontend/src/lib/logic/featureFlagLogic.ts"),ct,pt,yt=function(o,d){switch(o){case i.s.FUNNELS:return d.funnel_viz_type===i.o.Trends;case i.s.RETENTION:case i.s.PATHS:return!1;case i.s.TRENDS:case i.s.STICKINESS:case i.s.LIFECYCLE:default:return!d.display||!me.m.includes(d.display)}},en=function(o){switch(o){case i.s.TRENDS:case i.s.STICKINESS:return!0;case i.s.RETENTION:case i.s.FUNNELS:return!1;case i.s.LIFECYCLE:case i.s.PATHS:return!1;default:return!0}},Dn=(ct={},ee()(ct,"".concat(i.s.TRENDS),!0),ee()(ct,"".concat(i.s.STICKINESS),!0),ee()(ct,"".concat(i.s.LIFECYCLE),!0),ee()(ct,"".concat(i.s.FUNNELS),!0),ee()(ct,"".concat(i.s.RETENTION),!1),ee()(ct,"".concat(i.s.PATHS),!0),ct),ma=(pt={},ee()(pt,"".concat(i.s.TRENDS),!0),ee()(pt,"".concat(i.s.STICKINESS),!0),ee()(pt,"".concat(i.s.LIFECYCLE),!1),ee()(pt,"".concat(i.s.FUNNELS),!1),ee()(pt,"".concat(i.s.RETENTION),!1),ee()(pt,"".concat(i.s.PATHS),!1),pt),pa=function(o){var d,m;return!o.actions&&!o.events||((d=o.actions)===null||d===void 0?void 0:d.length)===0&&((m=o.events)===null||m===void 0?void 0:m.length)===0};function tn(u){var o=u.filters,d=u.activeView,m=u.disableTable,j=u.disabled,h=d===i.s.FUNNELS,b=d===i.s.PATHS,N=Object(v.useValues)(We.a),P=N.featureFlags;return e.a.createElement("div",{className:"display-config-inner"},e.a.createElement("div",{className:"display-config-inner-row"},Dn[d]&&!m&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Date range"),e.a.createElement(Ct,{defaultValue:"Last 7 days",disabled:j||h&&pa(o),bordered:!0,makeLabel:function(T){return e.a.createElement(e.a.Fragment,null,e.a.createElement(_n.a,null)," ",T,T=="All time"&&e.a.createElement(Zt.a,{title:"Only events dated after 2015 will be shown"},e.a.createElement(mt.a,{className:"info-indicator"})))}})),yt(d,o)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},e.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),e.a.createElement(un,{view:d,disabled:j})),d===i.s.TRENDS&&!o.breakdown_type&&!o.compare&&(!o.display||o.display===i.d.ActionsLineGraph)&&P[me.i.SMOOTHING_INTERVAL]?e.a.createElement(ra,null):null,d===i.s.RETENTION&&e.a.createElement(e.a.Fragment,null,e.a.createElement(Ht,{disabled:j}),e.a.createElement(St,{disabled:j})),b&&e.a.createElement("span",{className:"filter"},e.a.createElement(at,{disabled:j})),ma[d]&&e.a.createElement("span",{className:"filter"},e.a.createElement(Ft,null))),e.a.createElement("div",{className:"display-config-inner-row"},en(d)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Chart type"),e.a.createElement(Ae,{filters:o,disabled:j||o.insight===i.s.LIFECYCLE})),h&&o.funnel_viz_type===i.o.Steps&&e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"filter"},e.a.createElement(Gt,{disabled:j}))),h&&o.funnel_viz_type===i.o.TimeToConvert&&e.a.createElement("span",{className:"filter"},e.a.createElement(qt,{disabled:j}))))}try{tn.displayName="InsightDisplayConfig",tn.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:tn.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(u){}var It=n("./node_modules/antd/es/button/index.js"),fa=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Kt=n.n(fa),va=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),hn=n.n(va),En={};En.insert="head",En.singleton=!1;var nn=Kt()(hn.a,En),bn=hn.a.locals||{},Ze=n("./frontend/src/scenes/funnels/funnelUtils.ts"),ga=n("./node_modules/core-js/modules/es.array.find.js"),Ut=n("./frontend/src/lib/components/EntityFilterInfo.tsx");function Mn(){var u,o=Object(v.useValues)(t.c),d=o.insightProps,m=Object(v.useValues)(Object(De.a)(d)),j=m.filters,h=m.numberOfSeries,b=m.areFiltersValid,N=m.filterSteps,P=Object(v.useActions)(Object(De.a)(d)),_=P.changeStepRange;if(j.funnel_viz_type===i.o.Steps)return null;var T=function(G,w){_(G,w)},I=b?Array.from(Array(Math.max(h)).keys()).slice(0,-1):[0],A=b?Array.from(Array(Math.max(h)).keys()).slice(((u=j.funnel_from_step)!==null&&u!==void 0?u:0)+1):[1],L=function(G){return G.map(function(w){var be=N.find(function(Z){return Z.order===w});return be?e.a.createElement(Oe.a.Option,{key:w,value:w,label:"Step ".concat(w+1)},e.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.a.createElement("span",{style:{marginRight:4}},"Step ",w+1,":"),e.a.createElement(Ut.a,{filter:be}))):null})};return e.a.createElement(he.a,{className:"funnel-options-inputs"},e.a.createElement("span",{className:"text-muted-alt"},"from"),e.a.createElement(Oe.a,{disabled:!b,dropdownMatchSelectWidth:!1,dropdownAlign:$.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:j.funnel_from_step||0,onChange:function(G){return T(G,j.funnel_to_step)},style:{marginLeft:4,marginRight:4}},L(I)),e.a.createElement("span",{className:"text-muted-alt"},"to"),e.a.createElement(Oe.a,{disabled:!b,dropdownMatchSelectWidth:!1,dropdownAlign:$.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:j.funnel_to_step||Math.max(h-1,1),onChange:function(G){return T(j.funnel_from_step,G)},style:{marginLeft:4,marginRight:4}},L(A)))}function Wt(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=u.filters,m=u.activeView,j=Object(v.useValues)(Object(De.a)(o)),h=j.conversionMetrics,b=j.aggregationTargetLabel,N=Object(v.useActions)(Object(Ve.a)(o)),P=N.setChartFilter;if(m!==i.s.FUNNELS)return null;var _=[].concat(bt()(d.funnel_viz_type===i.o.Steps?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(ie.a,{title:"Overall conversion rate for all ".concat(b.plural," on the entire funnel.")},e.a.createElement(mt.a,{className:"info-indicator left"})),"Total conversion rate"),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement("span",{className:"l4"},Object(Ze.c)(h.totalRate),"%"))]:[]),bt()(d.funnel_viz_type!==i.o.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(ie.a,{title:"Average (arithmetic mean) of the total time each ".concat(b.singular," spent in the entire funnel.")},e.a.createElement(mt.a,{className:"info-indicator left"})),"Average time to convert"," "),d.funnel_viz_type===i.o.TimeToConvert&&e.a.createElement(Mn,null),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement(It.a,{type:"link",onClick:function(){return P(i.o.TimeToConvert)},disabled:d.funnel_viz_type===i.o.TimeToConvert},e.a.createElement("span",{className:"l4"},Object($.N)(h.averageTime))))]:[]),bt()(d.funnel_viz_type===i.o.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),e.a.createElement(Mn,null))]:[]));return e.a.createElement(he.a,{className:"funnel-canvas-label",align:"middle"},_.map(function(T,I){return e.a.createElement(e.a.Fragment,{key:I},I>0&&e.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),T)}))}var wn=n("./frontend/src/lib/hooks/usePeriodicRerender.ts"),a=3;function r(){var u=Object(v.useValues)(t.c),o=u.lastRefresh,d=Object(v.useActions)(t.c),m=d.loadResults;return Object(wn.a)(15e3),e.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",o?Object(Et.a)(o).fromNow():"a while ago",e.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),e.a.createElement(Zt.a,{title:e.a.createElement(e.a.Fragment,null,"Insights can be refreshed",e.a.createElement("br",null),"every ",a," minutes.")},e.a.createElement(It.a,{size:"small",type:"link",onClick:function(){return m(!0)},disabled:!!o&&Object(Et.a)().subtract(a-.5,"minutes").isBefore(o),style:{padding:0}},e.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var s=n("./frontend/src/scenes/trends/PersonsModal.tsx"),l=n("./frontend/src/scenes/trends/viz/index.ts"),g=n("./frontend/src/scenes/trends/SaveCohortModal.tsx"),x=n("./frontend/src/scenes/trends/trendsLogic.ts"),E=n("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(u){}var c=n("./frontend/src/scenes/trends/personsModalLogic.ts"),S=n("./frontend/src/lib/utils/eventUsageLogic.ts"),p=n("./frontend/src/scenes/insights/insightSceneLogic.tsx"),Y=n("./frontend/src/scenes/insights/WorldMap/index.ts");function H(u){var o=u.view,d=Object(v.useValues)(p.a),m=d.insightMode,j=Object(v.useValues)(t.c),h=j.insightProps,b=Object(v.useValues)(c.b),N=b.cohortModalVisible,P=Object(v.useActions)(c.b),_=P.setCohortModalVisible,T=Object(v.useValues)(Object(x.a)(h)),I=T.filters,A=T.loadMoreBreakdownUrl,L=T.breakdownValuesLoading,W=T.showModalActions,G=T.aggregationTargetLabel,w=Object(v.useActions)(Object(x.a)(h)),be=w.loadMoreBreakdownValues,Z=Object(v.useValues)(c.b),U=Z.showingPeople,J=Object(v.useActions)(c.b),ne=J.saveCohortWithUrl,Q=Object(v.useActions)(S.f),q=Q.reportCohortCreatedFromPersonsModal,ae=function(){if(!I.display||I.display===i.d.ActionsLineGraph||I.display===i.d.ActionsLineGraphCumulative||I.display===i.d.ActionsBar)return e.a.createElement(l.b,null);if(I.display===i.d.ActionsTable)return e.a.createElement(v.BindLogic,{logic:x.a,props:{dashboardItemId:null,view:o,filters:null}},e.a.createElement(E.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(o),canEditSeriesNameInline:m===i.t.Edit,isMainInsightView:!0}));if(I.display===i.d.ActionsPie)return e.a.createElement(l.c,null);if(I.display===i.d.ActionsBarValue)return e.a.createElement(l.a,null);if(I.display===i.d.WorldMap)return e.a.createElement(Y.a,null)};return e.a.createElement(e.a.Fragment,null,(I.actions||I.events)&&e.a.createElement("div",{className:I.display!==i.d.ActionsTable&&I.display!==i.d.WorldMap?"trends-insights-container":void 0},ae()),I.breakdown&&A&&e.a.createElement("div",{className:"mt text-center"},e.a.createElement("div",{className:"text-muted mb"},"For readability, ",e.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),e.a.createElement("div",null,e.a.createElement(It.a,{style:{textAlign:"center",marginBottom:16},onClick:be,loading:L},"Load more breakdown values"))),e.a.createElement(s.a,{visible:U&&!N,view:o,filters:I,onSaveCohort:function(){_(!0)},showModalActions:W,aggregationTargetLabel:G}),e.a.createElement(g.a,{visible:N,onOk:function(At){ne(At),_(!1),q(I)},onCancel:function(){return _(!1)}}))}try{H.displayName="TrendInsight",H.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:H.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(u){}var pe=n("./frontend/src/scenes/funnels/Funnel.tsx");function M(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=Object(v.useValues)(Object(De.a)(o)),m=d.isValidFunnel,j=d.insightLoading,h=d.filters,b=d.areFiltersValid,N=d.barGraphLayout,P=d.aggregationTargetLabel,_=Object(v.useValues)(c.b),T=_.showingPeople,I=_.cohortModalVisible,A=Object(v.useActions)(c.b),L=A.setCohortModalVisible,W=Object(v.useValues)(We.a),G=W.featureFlags,w=m&&b||j,be=h.funnel_viz_type==i.o.Steps&&N===me.k.vertical;return e.a.createElement(e.a.Fragment,null,e.a.createElement(s.a,{visible:T&&!I,view:i.s.FUNNELS,filters:h,onSaveCohort:function(){L(!0)},showModalActions:h.aggregation_group_type_index==null,aggregationTargetLabel:P}),e.a.createElement("div",{className:Object(Qt.a)("funnel-insights-container",{"non-empty-state":w,"no-padding":be}),style:G[me.i.LEMON_FUNNEL_VIZ]?{height:"26rem"}:void 0},e.a.createElement(pe.a,null)))}var D=n("./frontend/src/scenes/retention/RetentionContainer.tsx"),f=n("./frontend/src/scenes/paths/Paths.tsx"),de=n("./frontend/src/scenes/insights/EmptyStates/index.ts");function rt(){var u=Object(v.useValues)(t.c),o=u.activeView;return o!==i.s.PATHS?null:e.a.createElement(he.a,{className:"funnel-canvas-label",align:"middle"},e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var dt=n("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),xt=n("./node_modules/antd/lib/input/TextArea.js"),R=n.n(xt),Ot=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),ft=n.n(Ot),X={};X.insert="head",X.singleton=!1;var Fe=Kt()(ft.a,X),st=ft.a.locals||{},vt=n("./node_modules/core-js/modules/es.number.constructor.js"),Qe=n("./node_modules/core-js/modules/es.number.is-integer.js"),Me=n("./node_modules/core-js/modules/es.number.to-fixed.js"),ze=n("./node_modules/core-js/modules/es.regexp.exec.js"),an=n("./node_modules/core-js/modules/es.string.split.js"),rn=n("./node_modules/antd/es/spin/index.js"),yn=n("./node_modules/antd/es/table/index.js"),ha=n("./node_modules/antd/lib/table/Column.js"),Ie=n.n(ha),An=n("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Ea={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},qe=Ea,Lt=function(o,d){return oe.createElement(O.a,Object(z.a)(Object(z.a)({},o),{},{ref:d,icon:qe}))};Lt.displayName="FallOutlined";var Rn=oe.forwardRef(Lt),Vn=n("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),ut=n("./frontend/src/lib/components/icons.tsx"),ba=n("./node_modules/antd/lib/checkbox/Checkbox.js"),zt=n.n(ba),Dt=n("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),Mt=n("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ya=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),Bn=n.n(ya),xn={};xn.insert="head",xn.singleton=!1;var Da=Kt()(Bn.a,xn),Ma=Bn.a.locals||{},xa=n("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function Nt(u){var o=u.id,d=u.offset,m=u.children,j=Object(v.useActions)(Object(xa.a)({id:o,offset:d})),h=j.scrolling,b=Object(oe.useRef)(null);return Object(oe.useEffect)(function(){var N=b.current;return document.addEventListener("scroll",function(){return h(N)}),function(){return document.removeEventListener("scroll",function(){return h(N)})}},[b.current]),e.a.createElement("div",{ref:b},m)}try{Nt.displayName="VisibilitySensor",Nt.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:Nt.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(u){}var Pt=n("./frontend/src/lib/components/LemonButton/index.ts"),kn=n("./frontend/src/lib/components/Popup/Popup.tsx"),Oa=n("./node_modules/antd/es/modal/index.js"),ja=n("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),Kn=n("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),On=n("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),jn=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),Un=n.n(jn),Yt={};Yt.insert="head",Yt.singleton=!1;var sn=Kt()(Un.a,Yt),wa=Un.a.locals||{},Ca=n("./frontend/src/lib/components/Spinner/Spinner.tsx"),Cn=n("./frontend/src/lib/components/Link.tsx"),Sn=n("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function Sa(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=Object(De.a)(o),m=Object(v.useValues)(d),j=m.correlationsLoading,h=m.funnelCorrelationDetails,b=m.parseDisplayNameForCorrelation,N=m.correlationMatrixAndScore,P=Object(v.useActions)(d),_=P.setFunnelCorrelationDetails,T=P.openCorrelationPersonsModal,I=(h==null?void 0:h.result_type)===i.k.Events?"event":"property",A=(h==null?void 0:h.result_type)===i.k.Events?"performed event":"have property",L=e.a.createElement(e.a.Fragment,null);if(h){var W=b(h),G=W.first_value,w=W.second_value;L=e.a.createElement(e.a.Fragment,null,e.a.createElement(Mt.a,{value:G}),w!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Mt.a,{value:w,disablePopover:!0})))}var be=N.correlationScore,Z=N.truePositive,U=N.falsePositive,J=N.trueNegative,ne=N.falseNegative,Q=N.correlationScoreStrength,q=Q==="strong"?e.a.createElement(ja.a,{style:{color:"var(--success)"}}):Q==="moderate"?e.a.createElement(Kn.a,{style:{color:"var(--warning)"}}):e.a.createElement(On.a,{style:{color:"var(--danger)"}}),ae=function(){return _(null)};return e.a.createElement(Oa.a,{className:"correlation-matrix",visible:!!h,onCancel:ae,destroyOnClose:!0,footer:e.a.createElement(It.a,{onClick:ae},"Dismiss"),width:600,title:"Correlation details"},e.a.createElement("div",{className:"correlation-table-wrapper"},j?e.a.createElement("div",{className:"mt text-center"},e.a.createElement(Ca.a,{size:"lg"})):h?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",A," ",e.a.createElement("b",null,L),"."),e.a.createElement("table",null,e.a.createElement("thead",null,e.a.createElement("tr",{className:"table-title"},e.a.createElement("td",{colSpan:3},"Results matrix")),e.a.createElement("tr",null,e.a.createElement("td",null,(h==null?void 0:h.result_type)===i.k.Events?"Performed event":"Has property"),e.a.createElement("td",null,"Success"),e.a.createElement("td",null,"Dropped off"))),e.a.createElement("tbody",null,e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"Yes"),e.a.createElement("td",null,e.a.createElement(ie.a,{title:"True positive (TP) - Percentage of users who ".concat(A," and completed the funnel.")},e.a.createElement("div",{className:"percentage"},Z?Object($.ob)(Z/(Z+U)):"0.00%")),Z===0?"0 users":e.a.createElement(Cn.a,{onClick:function(){T(h,!0)}},Object($.qb)(Z,"user",void 0,!0,!0))),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ie.a,{title:"False negative (FN) - Percentage of users who ".concat(A," and did not complete the funnel.")},ne?Object($.ob)(ne/(ne+J)):"0.00%")),ne===0?"0 users":e.a.createElement(Cn.a,{onClick:function(){T(h,!1)}},Object($.qb)(ne,"user",void 0,!0,!0)))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"No"),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ie.a,{title:"False positive (FP) - Percentage of users who did not ".concat(A," and completed the funnel.")},U?Object($.ob)(U/(Z+U)):"0.00%")),Object($.qb)(U,"user",void 0,!0,!0)),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ie.a,{title:"True negative (TN) - Percentage of users who did not ".concat(A," and did not complete the funnel.")},J?Object($.ob)(J/(ne+J)):"0.00%")),Object($.qb)(J,"user",void 0,!0,!0))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"}),e.a.createElement("td",null,e.a.createElement("b",null,"100%")),e.a.createElement("td",null,e.a.createElement("b",null,"100%"))))),e.a.createElement("div",{className:"mt text-center"},Object($.j)((h==null?void 0:h.result_type)||"")," ",e.a.createElement("b",null,L)," ","has a"," ",(h==null?void 0:h.correlation_type)===i.l.Success?e.a.createElement("b",{className:"text-success"},"positive"," ",e.a.createElement(ie.a,{title:"Positive correlation means this ".concat(I," is correlated with a successful conversion.")},e.a.createElement(mt.a,{className:"cursor-pointer"}))):e.a.createElement("b",{className:"text-danger"},"negative"," ",e.a.createElement(ie.a,{title:"Negative correlation means this ".concat(I," is correlated with an unsuccessful conversion (user dropped off).")},e.a.createElement(mt.a,{className:"cursor-pointer"})))," ","correlation score of"," ",e.a.createElement("b",{style:{color:Q==="strong"?"var(--success)":Q==="moderate"?"var(--warning)":"var(--danger)"}},e.a.createElement(ie.a,{title:"This ".concat(I," has ").concat(Q," correlation.")},e.a.createElement("span",{style:{cursor:"pointer"}},q," ",be.toFixed(3)))))):e.a.createElement("div",null,e.a.createElement(Sn.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function Wn(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=Object(De.a)(o),m=Object(v.useValues)(d),j=m.stepsWithCount,h=m.correlationValues,b=m.correlationTypes,N=m.eventHasPropertyCorrelations,P=m.eventWithPropertyCorrelationsValues,_=m.parseDisplayNameForCorrelation,T=m.correlationsLoading,I=m.eventWithPropertyCorrelationsLoading,A=m.nestedTableExpandedKeys,L=m.correlationPropKey,W=m.filters,G=m.aggregationTargetLabel,w=Object(v.useActions)(d),be=w.setCorrelationTypes,Z=w.loadEventWithPropertyCorrelations,U=w.addNestedTableExpandedKey,J=w.removeNestedTableExpandedKey,ne=w.openCorrelationPersonsModal,Q=w.loadCorrelations,q=Object(v.useActions)(S.f),ae=q.reportCorrelationInteraction;Object(oe.useEffect)(function(){Q({})},[W]);var ve=function(le){b?b.includes(le)?be(b.filter(function(Te){return Te!==le})):be([].concat(bt()(b),[le])):be([le])},At=function(le){var Te=function(Zn){return Zn<10&&!Number.isInteger(Zn)?Zn.toFixed(1):Zn.toFixed()},Ge=le.correlation_type===i.l.Success,we=_(le),Rt=we.first_value,Jn=we.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,Ge?e.a.createElement(An.a,{style:{color:"green"}}):e.a.createElement(Rn,{style:{color:"red"}})," ",e.a.createElement(Mt.a,{value:Rt}),Jn!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Mt.a,{value:Jn,disablePopover:!0}))),e.a.createElement("div",null,Object($.j)(G.plural)," ",W.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,Te(le.odds_ratio),"x ",Ge?"more":"less"," likely"))," ","to"," ",le.result_type===i.k.EventWithProperties?"have this event property":"do this event"),e.a.createElement(Sa,null))},tt=function(le){return e.a.createElement(Dt.c,{onClick:function(){ne(le,!0)}},le.success_count)},ye=function(le){return e.a.createElement(Dt.c,{onClick:function(){ne(le,!1)}},le.failure_count)},Ye=function(le){return I?e.a.createElement("div",{className:"nested-properties-loading"},e.a.createElement(rn.a,null),e.a.createElement("h3",null,"Loading correlation results"),e.a.createElement("p",null,"This process can take up to 20 seconds. ")):e.a.createElement("div",null,e.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),e.a.createElement(yn.a,{dataSource:P[le],rowKey:function(Ge){return Ge.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(Ge,we){return ae(i.k.EventWithProperties,"pagination change",{page:Ge,page_size:we})}}},e.a.createElement(Ie.a,{title:"Property",key:"eventName",render:function(Ge,we){return At(we)},align:"left"}),e.a.createElement(Ie.a,{title:"Completed",key:"success_count",render:function(Ge,we){return tt(we)},width:90,align:"center"}),e.a.createElement(Ie.a,{title:"Dropped off",key:"failure_count",render:function(Ge,we){return ye(we)},width:120,align:"center"}),e.a.createElement(Ie.a,{title:"",key:"actions",render:function(Ge,we){return e.a.createElement(ln,{record:we})},align:"center",width:30})))};return j.length>1?e.a.createElement(Nt,{id:L,offset:152},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement("span",{className:"funnel-correlation-header"},e.a.createElement("span",{className:"table-header"},e.a.createElement(ut.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),e.a.createElement("span",{className:"table-options"},e.a.createElement("p",{className:"title"},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return ve(i.l.Success)}},e.a.createElement(zt.a,{checked:b.includes(i.l.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return ve(i.l.Failure)}},e.a.createElement(zt.a,{checked:b.includes(i.l.Failure),style:{pointerEvents:"none"}},"Dropoff")))),e.a.createElement(yn.a,{dataSource:h,loading:T,size:"small",scroll:{x:"max-content"},rowKey:function(le){return le.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return ae(i.k.Events,"load more")}},expandable:{expandedRowRender:function(le){return Ye(le.event.event)},expandedRowKeys:A,rowExpandable:function(){return W.aggregation_group_type_index===void 0},expandIcon:function(le){var Te=le.expanded,Ge=le.onExpand,we=le.record,Rt=le.expandable;return Rt?Te?e.a.createElement(ie.a,{title:"Collapse"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Xn){J(we.event.event),Ge(we,Xn)}},e.a.createElement(ut.IconUnfoldLess,null))):e.a.createElement(ie.a,{title:"Expand to see correlated properties for this event"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Xn){!N(we.event.event)&&Z(we.event.event),U(we.event.event),Ge(we,Xn)}},e.a.createElement(ut.IconUnfoldMore,null))):null}}},e.a.createElement(Ie.a,{title:"Event",key:"eventName",render:function(le,Te){return At(Te)},align:"left",ellipsis:!0}),e.a.createElement(Ie.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(ie.a,{title:"".concat(Object($.j)(G.plural)," ").concat(W.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},e.a.createElement(mt.a,{className:"column-info"}))),key:"success_count",render:function(le,Te){return tt(Te)},width:90,align:"center"}),e.a.createElement(Ie.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(ie.a,{title:e.a.createElement(e.a.Fragment,null,Object($.j)(G.plural)," ",W.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(mt.a,{className:"column-info"}))),key:"failure_count",render:function(le,Te){return ye(Te)},width:120,align:"center"}),e.a.createElement(Ie.a,{title:"",key:"actions",render:function(le,Te){return e.a.createElement(ln,{record:Te})},width:30})))):null}var ln=function(o){var d=o.record,m=Object(v.useValues)(t.c),j=m.insightProps,h=Object(De.a)(j),b=Object(v.useActions)(h),N=b.excludeEventPropertyFromProject,P=b.excludeEventFromProject,_=b.setFunnelCorrelationDetails,T=Object(v.useValues)(h),I=T.isEventPropertyExcluded,A=T.isEventExcluded,L=d.event.event.split("::"),W=Object(oe.useState)(!1),G=Fn()(W,2),w=G[0],be=G[1];return e.a.createElement(he.a,{style:{justifyContent:"flex-end"}},e.a.createElement(kn.a,{visible:w,actionable:!0,onClickOutside:function(){return be(!1)},overlay:e.a.createElement(e.a.Fragment,null,d.result_type===i.k.Events&&e.a.createElement(Pt.a,{onClick:function(){return _(d)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Pt.a,{disabled:d.result_type===i.k.EventWithProperties?I(L[1]):A(L[0]),onClick:function(){return d.result_type===i.k.EventWithProperties?N(L[0],L[1]):P(L[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},e.a.createElement(Pt.a,{type:"stealth",onClick:function(){return be(!w)}},e.a.createElement(Vn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},Ta=n("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function Tn(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=Object(De.a)(o),m=Object(v.useValues)(d),j=m.stepsWithCount,h=m.propertyCorrelationValues,b=m.propertyCorrelationTypes,N=m.excludedPropertyNames,P=m.parseDisplayNameForCorrelation,_=m.propertyCorrelationsLoading,T=m.inversePropertyNames,I=m.propertyNames,A=m.correlationPropKey,L=m.allProperties,W=m.filters,G=m.aggregationTargetLabel,w=Object(v.useActions)(d),be=w.setPropertyCorrelationTypes,Z=w.setPropertyNames,U=w.openCorrelationPersonsModal,J=w.loadPropertyCorrelations,ne=Object(v.useActions)(S.f),Q=ne.reportCorrelationInteraction;Object(oe.useEffect)(function(){I.length===0&&Z(L),J({})},[W]);var q=function(ye){b?b.includes(ye)?be(b.filter(function(Ye){return Ye!==ye})):be([].concat(bt()(b),[ye])):be([ye])},ae=function(ye){return e.a.createElement(Dt.c,{onClick:function(){U(ye,!0)}},ye.success_count)},ve=function(ye){return e.a.createElement(Dt.c,{onClick:function(){U(ye,!1)}},ye.failure_count)},At=function(ye){var Ye=function(Rt){return Rt<10&&!Number.isInteger(Rt)?Rt.toFixed(1):Rt.toFixed()},Ke=ye.correlation_type===i.l.Success,le=P(ye),Te=le.first_value,Ge=le.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,Ke?e.a.createElement(An.a,{style:{color:"green"}}):e.a.createElement(Rn,{style:{color:"red"}})," ",e.a.createElement(Mt.a,{value:Te}),Ge!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Mt.a,{value:Ge,disablePopover:!0}))),e.a.createElement("div",null,Object($.j)(G.plural)," ",W.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,Ye(ye.odds_ratio),"x ",Ke?"more":"less"," likely"))," ","to have this property value"))};return j.length>1?e.a.createElement(Nt,{offset:150,id:"".concat(A,"-properties")},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement(he.a,{className:"funnel-correlation-header"},e.a.createElement(xe.a,{className:"table-header"},e.a.createElement(ut.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),e.a.createElement(xe.a,{className:"table-options"},e.a.createElement(he.a,{style:{display:"contents"}},L.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"title"},"PROPERTIES "),e.a.createElement(Ta.a,{value:new Set(I),onChange:function(ye){return Z(ye)},allProperties:T(N||[])}))),e.a.createElement(he.a,{style:{display:"contents"}},e.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return q(i.l.Success)}},e.a.createElement(zt.a,{checked:b.includes(i.l.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return q(i.l.Failure)}},e.a.createElement(zt.a,{checked:b.includes(i.l.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),e.a.createElement(yn.a,{dataSource:h,loading:_,scroll:{x:"max-content"},size:"small",rowKey:function(ye){return ye.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(ye,Ye){return Q(i.k.Properties,"pagination change",{page:ye,page_size:Ye})}}},e.a.createElement(Ie.a,{title:"".concat(Object($.j)(G.singular)," property"),key:"propertName",render:function(ye,Ye){return At(Ye)},align:"left"}),e.a.createElement(Ie.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(ie.a,{title:"".concat(Object($.j)(G.plural)," ").concat(W.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},e.a.createElement(mt.a,{className:"column-info"}))),key:"success_count",render:function(ye,Ye){return ae(Ye)},width:90,align:"center"}),e.a.createElement(Ie.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(ie.a,{title:e.a.createElement(e.a.Fragment,null,Object($.j)(G.plural)," ",W.aggregation_group_type_index!=null?"that":"who"," have this property and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(mt.a,{className:"column-info"}))),key:"failure_count",render:function(ye,Ye){return ve(Ye)},width:120,align:"center"}),e.a.createElement(Ie.a,{title:"",key:"actions",render:function(ye,Ye){return e.a.createElement(Ia,{record:Ye})},align:"center",width:30})))):null}var Ia=function(o){var d=o.record,m=Object(v.useValues)(t.c),j=m.insightProps,h=Object(De.a)(j),b=Object(v.useActions)(h),N=b.excludePropertyFromProject,P=b.setFunnelCorrelationDetails,_=Object(v.useValues)(h),T=_.isPropertyExcludedFromProject,I=(d.event.event||"").split("::")[0],A=Object(oe.useState)(!1),L=Fn()(A,2),W=L[0],G=L[1];return e.a.createElement(he.a,{style:{justifyContent:"flex-end"}},e.a.createElement(kn.a,{visible:W,actionable:!0,onClickOutside:function(){return G(!1)},overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(Pt.a,{onClick:function(){return P(d)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Pt.a,{disabled:T(I),onClick:function(){return N(I)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},e.a.createElement(Pt.a,{type:"stealth",onClick:function(){return G(!W)}},e.a.createElement(Vn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},In=n("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Nn=n("./frontend/src/lib/components/PayCard/PayCard.tsx"),zn=n("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),Yn=function(){var o,d=Object(v.useValues)(t.c),m=d.insightProps,j=Object(v.useValues)(Object(De.a)(m)),h=j.isSkewed,b=j.stepsWithCount,N=j.correlationFeedbackHidden,P=j.correlationDetailedFeedbackVisible,_=j.correlationFeedbackRating,T=j.correlationAnalysisAvailable,I=j.aggregationTargetLabel,A=Object(v.useActions)(Object(De.a)(m)),L=A.sendCorrelationAnalysisFeedback,W=A.hideSkewWarning,G=A.hideCorrelationAnalysisFeedback,w=A.setCorrelationFeedbackRating,be=A.setCorrelationDetailedFeedback,Z=Object(v.useValues)(zn.a),U=Z.preflight,J=Object(oe.useRef)(null);return b.length<=1?null:!T&&!(!(U==null||(o=U.instance_preferences)===null||o===void 0)&&o.disable_paid_fs)?e.a.createElement(Nn.a,{identifier:i.c.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(I.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(I.plural," are converting or dropping off.")}):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Correlation analysis"),e.a.createElement("div",{className:"funnel-correlation"},h&&e.a.createElement(Ne.a,{className:"skew-warning"},e.a.createElement("h4",null,e.a.createElement(ut.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",e.a.createElement(In.a,{className:"close-button",onClick:W})),e.a.createElement("div",null,e.a.createElement("b",null,"Tips for adjusting your funnel:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),e.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),e.a.createElement(Wn,null),!N&&e.a.createElement(Ne.a,{className:"correlation-feedback"},e.a.createElement(he.a,{className:"row-initial"},e.a.createElement(xe.a,{span:14},e.a.createElement("h4",null,e.a.createElement(dt.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),e.a.createElement(xe.a,{span:9,style:{alignContent:"right"}},!!_&&e.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(ne,Q){return e.a.createElement(It.a,{key:Q,className:"emoji-button",style:_===ne[0]?{background:"#5375FF"}:_?{display:"none"}:{},onClick:function(){_===ne[0]?w(0):(w(ne[0]),setTimeout(function(){var ae;return(ae=J.current)===null||ae===void 0?void 0:ae.focus()},100))}},ne[1])})),e.a.createElement(xe.a,{span:1},e.a.createElement(In.a,{className:"close-button",onClick:G}))),e.a.createElement("div",{style:{display:P?void 0:"none"}},e.a.createElement("form",{onSubmit:L},e.a.createElement(R.a,{onBlur:function(Q){return be(Q.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:J,onKeyDown:function(Q){if(Q.key==="Enter"&&Q.metaKey){var q;(q=J.current)===null||q===void 0||q.blur(),L()}}}),e.a.createElement("div",{className:"text-right"},e.a.createElement(It.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),e.a.createElement(Tn,null)))},$t=n("./node_modules/core-js/modules/es.regexp.to-string.js"),on=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),$n=n.n(on),Pn={};Pn.insert="head",Pn.singleton=!1;var Na=Kt()($n.a,Pn),Aa=$n.a.locals||{},V=n("./frontend/src/lib/components/InsightLabel/index.tsx"),B=n("./frontend/src/lib/colors.ts"),_e=n("./frontend/src/lib/components/LemonCheckbox/index.ts");function et(){var u=Object(v.useValues)(t.c),o=u.filters,d=u.activeView,m=Object(v.useActions)(t.c),j=m.toggleInsightLegend,h=Object(v.useValues)(We.a),b=h.featureFlags;return(d===i.s.TRENDS&&o.display!==i.d.WorldMap&&o.display!==i.d.ActionsTable||d===i.s.STICKINESS)&&b[me.i.INSIGHT_LEGENDS]?e.a.createElement(It.a,{className:"insight-legend-button",onClick:j},e.a.createElement(ut.IconLegend,null),e.a.createElement("span",{className:"insight-legend-button-title"},o.show_legend?"Hide":"Show"," legend")):null}function cn(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=u.filters,m=Object(x.a)(o),j=Object(v.useValues)(m),h=j.indexedResults,b=j.hiddenLegendKeys,N=Object(v.useActions)(m),P=N.toggleVisibility,_=Object(B.c)("white",h.length,!!d.compare);return e.a.createElement("div",{className:"insight-legend-menu"},e.a.createElement("div",{className:"insight-legend-menu-scroll"},h&&h.map(function(T){var I,A;return e.a.createElement(he.a,{key:T.id,className:"insight-legend-menu-item",wrap:!1},e.a.createElement(_e.a,{className:"insight-legend-menu-item-inner",color:_[T.id],checked:!b[T.id],onChange:function(){return P(T.id)},rowProps:{fullWidth:!0},label:e.a.createElement(V.b,{key:T.id,seriesColor:_[T.id],action:T.action,fallbackName:T.breakdown_value===""?"None":T.label,hasMultipleSeries:h.length>1,breakdownValue:T.breakdown_value===""?"None":(I=T.breakdown_value)===null||I===void 0?void 0:I.toString(),compareValue:d.compare?Object(E.d)(T):void 0,pillMidEllipsis:(T==null||(A=T.filter)===null||A===void 0?void 0:A.breakdown)==="$current_url",hideIcon:!0})}))})))}var Hn=n("./node_modules/core-js/modules/es.array.every.js"),Ha=n("./node_modules/core-js/modules/es.array.flat-map.js"),Ga=n("./node_modules/core-js/modules/es.array.some.js"),Ja=n("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),Xa=n("./node_modules/core-js/modules/es.object.from-entries.js"),Ua=n("./frontend/src/lib/components/LemonTable/index.ts"),Wa=n("./frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx"),za=n("./frontend/src/models/cohortsModel.ts"),Ra=n("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Ya=n("./frontend/src/lib/components/LemonRow/index.ts");function $a(){var u=Object(v.useValues)(t.c),o=u.insightProps,d=Object(De.a)(o),m=Object(v.useValues)(d),j=m.insightLoading,h=m.steps,b=m.flattenedBreakdowns,N=m.hiddenLegendKeys,P=m.visibleStepsWithConversionMetrics,_=Object(v.useActions)(d),T=_.setHiddenById,I=_.toggleVisibilityByBreakdown,A=_.openPersonsModalForStep,L=Object(v.useValues)(za.a),W=L.cohorts,G=b.length===1,w=b==null?void 0:b.every(function(Z){return!N[Object(Ze.m)(P==null?void 0:P[0],Z.breakdown_value)]}),be=[{children:[{title:G?"Breakdown":e.a.createElement(_e.a,{checked:w||(b!=null&&b.some(function(Z){return!N[Object(Ze.m)(P==null?void 0:P[0],Z.breakdown_value)]})?"indeterminate":!1),onChange:function(){T(Object.fromEntries(P.flatMap(function(U){return b.map(function(J){return[Object(Ze.m)(U,J.breakdown_value),w]})})))},label:"Breakdown",rowProps:{compact:!0,style:{padding:0,marginLeft:"-0.5rem",font:"inherit"}}}),dataIndex:"breakdown_value",render:function(U){var J=Object(E.c)(W,U);return G?e.a.createElement("span",{style:{fontWeight:500}},J):e.a.createElement(_e.a,{checked:!N[Object(Ze.m)(P==null?void 0:P[0],U)],onChange:function(){return I(U)},label:J,rowProps:{compact:!0,style:{padding:0,marginLeft:"-0.5rem",maxWidth:"16rem"},title:J}})}},{title:"Total conversion",render:function(U,J){var ne,Q;return Object(Ze.c)((ne=J==null||(Q=J.conversionRates)===null||Q===void 0?void 0:Q.total)!==null&&ne!==void 0?ne:0,!0)},align:"right"}]}].concat(bt()(h.map(function(Z,U){return{title:e.a.createElement(Ya.a,{icon:e.a.createElement(Ra.a,{name:U+1,color:Ra.b.Gray,double:!0}),style:{font:"inherit",padding:0},compact:!0},e.a.createElement(Ut.a,{filter:Object(Wa.b)(Z)})),children:[{title:"Completed",render:function(ne,Q){var q,ae,ve=(q=Q.steps)===null||q===void 0?void 0:q[U];return ve&&e.a.createElement(Dt.c,{onClick:function(){return A({step:ve,converted:!0})},style:{padding:0}},(ae=ve.count)!==null&&ae!==void 0?ae:0)},align:"right"},{title:"Rate",render:function(ne,Q){var q,ae,ve;return Object(Ze.c)((q=(ae=Q.steps)===null||ae===void 0||(ve=ae[U])===null||ve===void 0?void 0:ve.conversionRates.fromPrevious)!==null&&q!==void 0?q:0,!0)},align:"right"}].concat(bt()(U===0?[]:[{title:"Dropped",render:function(ne,Q){var q,ae,ve=(q=Q.steps)===null||q===void 0?void 0:q[U];return ve&&e.a.createElement(Dt.c,{onClick:function(){return A({step:ve,converted:!1})},style:{padding:0}},(ae=ve.droppedOffFromPrevious)!==null&&ae!==void 0?ae:0)},align:"right"},{title:"Rate",render:function(ne,Q){var q,ae,ve;return Object(Ze.c)(1-((q=(ae=Q.steps)===null||ae===void 0||(ve=ae[U])===null||ve===void 0?void 0:ve.conversionRates.fromPrevious)!==null&&q!==void 0?q:0),!0)},align:"right"},{title:"Avg. time",render:function(ne,Q){var q,ae;return((q=Q.steps)===null||q===void 0||(ae=q[Z.order])===null||ae===void 0?void 0:ae.average_conversion_time)!=null?Object($.N)(Q.steps[Z.order].average_conversion_time,3):"\u2013"},align:"right",className:"nowrap"}]))}})));return e.a.createElement(Ua.a,{dataSource:b,columns:be,loading:j,rowRibbonColor:function(U){return Object(Ze.k)(U==null?void 0:U.breakdownIndex,b.length===1,void 0,b.length)},rowKey:"breakdownIndex"})}var wt,Va=(wt={},ee()(wt,"".concat(i.s.TRENDS),e.a.createElement(H,{view:i.s.TRENDS})),ee()(wt,"".concat(i.s.STICKINESS),e.a.createElement(H,{view:i.s.STICKINESS})),ee()(wt,"".concat(i.s.LIFECYCLE),e.a.createElement(H,{view:i.s.LIFECYCLE})),ee()(wt,"".concat(i.s.FUNNELS),e.a.createElement(M,null)),ee()(wt,"".concat(i.s.RETENTION),e.a.createElement(D.a,null)),ee()(wt,"".concat(i.s.PATHS),e.a.createElement(f.a,null)),wt);function Gn(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1},o=u.disableHeader,d=u.disableTable,m=Object(v.useValues)(We.a),j=m.featureFlags,h=Object(v.useValues)(p.a),b=h.insightMode,N=Object(v.useValues)(t.c),P=N.insightProps,_=N.canEditInsight,T=N.insightLoading,I=N.activeView,A=N.loadedView,L=N.filters,W=N.showTimeoutMessage,G=N.showErrorMessage,w=N.csvExportUrl,be=Object(v.useActions)(t.c),Z=be.reportInsightViewedForRecentInsights,U=Object(v.useValues)(Object(De.a)(P)),J=U.areFiltersValid,ne=U.isValidFunnel,Q=U.areExclusionFiltersValid,q=U.correlationAnalysisAvailable;Object(oe.useEffect)(function(){Z()},[]);var ae=function(){if(I!==A||T&&!W)return e.a.createElement(e.a.Fragment,null,L.display!==i.d.ActionsTable&&L.display!==i.d.WorldMap&&e.a.createElement("div",{className:"trends-insights-container"}),e.a.createElement($.b,null));if(A===i.s.FUNNELS){if(!J)return e.a.createElement(de.b,{actionable:b===i.t.Edit||d});if(!Q)return e.a.createElement(de.a,null);if(!ne&&!T)return e.a.createElement(de.c,null)}return G?e.a.createElement(de.d,null):W?e.a.createElement(de.e,{isLoading:T}):null}();function ve(){return I===i.s.FUNNELS&&!G&&!W&&J&&L.funnel_viz_type===i.o.Steps&&!d&&(j[me.i.LEMON_FUNNEL_VIZ]||(L==null?void 0:L.layout)===me.k.horizontal)?e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Detailed results"),e.a.createElement($a,null)):(!L.display||(L==null?void 0:L.display)!==i.d.ActionsTable&&(L==null?void 0:L.display)!==i.d.ActionsBarValue)&&I===i.s.TRENDS&&!d?e.a.createElement(e.a.Fragment,null,w&&e.a.createElement("div",{className:"flex-center space-between-items",style:{margin:"1rem 0"}},e.a.createElement("h2",null,"Detailed results"),e.a.createElement(ie.a,{title:"Export this table in CSV format",placement:"left"},e.a.createElement(Pt.a,{type:"secondary",icon:e.a.createElement(ut.IconExport,{style:{color:"var(--primary)"}}),href:w},"Export"))),e.a.createElement(v.BindLogic,{logic:x.a,props:P},e.a.createElement(E.b,{isLegend:!0,showTotalCount:!0,filterKey:I===i.s.TRENDS?"trends_".concat(I):"",canEditSeriesNameInline:I===i.s.TRENDS&&b===i.t.Edit,canCheckUncheckSeries:_}))):null}return e.a.createElement(e.a.Fragment,null,e.a.createElement(Ne.a,{title:o?null:e.a.createElement(tn,{activeView:I,insightMode:b,filters:L,disableTable:!!d,disabled:!_}),"data-attr":"insights-graph",className:"insights-graph-container"},e.a.createElement("div",null,e.a.createElement(he.a,{className:Object(Qt.a)("insights-graph-header",{funnels:I===i.s.FUNNELS}),align:"middle",justify:"space-between"},e.a.createElement(xe.a,null,e.a.createElement(r,null)),e.a.createElement(xe.a,null,I===i.s.FUNNELS?e.a.createElement(Wt,null):null,I===i.s.PATHS?e.a.createElement(rt,null):null,e.a.createElement(et,null))),ae||(j[me.i.INSIGHT_LEGENDS]&&(I===i.s.TRENDS||I===i.s.STICKINESS)&&L.show_legend?e.a.createElement(he.a,{className:"insights-graph-container-row",wrap:!1},e.a.createElement(xe.a,{className:"insights-graph-container-row-left"},Va[I]),e.a.createElement(xe.a,{className:"insights-graph-container-row-right"},e.a.createElement(cn,null))):Va[I]))),ve(),!d&&q&&I===i.s.FUNNELS&&e.a.createElement(Yn,null))}try{Gn.displayName="InsightContainer",Gn.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:Gn.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(u){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(ge,K,n){"use strict";n.d(K,"a",function(){return Be});var re=n("./node_modules/core-js/modules/es.array.iterator.js"),ee=n.n(re),Ne=n("./node_modules/core-js/modules/es.object.to-string.js"),he=n.n(Ne),xe=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$e=n.n(xe),Ue=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=n.n(Ue),e=n("./node_modules/kea/lib/index.esm.js"),v=n("./frontend/src/scenes/insights/insightLogic.ts"),it=n("./frontend/src/scenes/insights/sharedUtils.ts");function Oe(te,z){var F=Object.keys(te);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(te);z&&(y=y.filter(function(O){return Object.getOwnPropertyDescriptor(te,O).enumerable})),F.push.apply(F,y)}return F}function Ve(te){for(var z=1;z<arguments.length;z++){var F=arguments[z]!=null?arguments[z]:{};z%2?Oe(Object(F),!0).forEach(function(y){oe()(te,y,F[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(F)):Oe(Object(F)).forEach(function(y){Object.defineProperty(te,y,Object.getOwnPropertyDescriptor(F,y))})}return te}var Be=Object(e.kea)({props:{},key:Object(it.c)("new"),path:function(z){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",z]},connect:function(z){return{actions:[Object(v.c)(z),["setFilters"]],values:[Object(v.c)(z),["filters"]]}},actions:function(){return{setDates:function(F,y){return{dateFrom:F,dateTo:y}}}},selectors:{dates:[function(te){return[te.filters]},function(te){return{dateFrom:(te==null?void 0:te.date_from)||null,dateTo:(te==null?void 0:te.date_to)||null}}]},listeners:function(z){var F=z.actions,y=z.values;return{setDates:function(se){var Pe=se.dateFrom,Ee=se.dateTo;F.setFilters(Ve(Ve({},y.filters),{},{date_from:Pe||null,date_to:Ee||null}))}}}})},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(ge,K,n){"use strict";n.d(K,"a",function(){return Ue});var re=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ee=n.n(re),Ne=n("./node_modules/react/index.js"),he=n.n(Ne),xe=n("./node_modules/antd/es/modal/index.js"),$e=n("./node_modules/antd/es/input/index.js");function Ue(oe){var e=oe.onOk,v=oe.onCancel,it=oe.visible,Oe=Object(Ne.useState)(""),Ve=ee()(Oe,2),Be=Ve[0],te=Ve[1];return he.a.createElement(xe.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){e(Be),te("")},onCancel:v,visible:it},he.a.createElement("div",{className:"mb"},he.a.createElement($e.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:Be,"data-attr":"cohort-name",onChange:function(F){return te(F.target.value)}})))}try{Ue.displayName="SaveCohortModal",Ue.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:Ue.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(oe){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(ge,K,n){"use strict";var re=n("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=n("./node_modules/react/index.js"),Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},he=Ne,xe=n("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),$e=function(e,v){return ee.createElement(xe.a,Object(re.a)(Object(re.a)({},e),{},{ref:v,icon:he}))};$e.displayName="BarChartOutlined";var Ue=K.a=ee.forwardRef($e)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(ge,K,n){"use strict";var re=n("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=n("./node_modules/react/index.js"),Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},he=Ne,xe=n("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),$e=function(e,v){return ee.createElement(xe.a,Object(re.a)(Object(re.a)({},e),{},{ref:v,icon:he}))};$e.displayName="OrderedListOutlined";var Ue=K.a=ee.forwardRef($e)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(ge,K,n){"use strict";var re=n("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ee=n("./node_modules/react/index.js"),Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},he=Ne,xe=n("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),$e=function(e,v){return ee.createElement(xe.a,Object(re.a)(Object(re.a)({},e),{},{ref:v,icon:he}))};$e.displayName="PercentageOutlined";var Ue=K.a=ee.forwardRef($e)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(ge,K,n){var re=n("./node_modules/css-loader/dist/runtime/api.js");K=re(!1),K.push([ge.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{width:100%;font-size:.75rem}",""]),ge.exports=K},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(ge,K,n){var re=n("./node_modules/css-loader/dist/runtime/api.js");K=re(!1),K.push([ge.i,'.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.experiment-form .metrics-selection{border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;width:100%}.experiment-form .metrics-selection .action-filters-bordered .draggable-action-filter{border-bottom:1px solid rgba(0,0,0,.15);padding:1rem .25rem;margin-top:0}.experiment-form .metrics-selection .action-filters-bordered .row-action-btn{color:#35416b}.experiment-form .person-selection{width:100%;border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid rgba(0,0,0,.15);min-height:unset;background-color:#fff;padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(calc(90vh - 16rem),36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .graph-container{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{display:flex;align-items:center;height:3.5rem;padding:0 .5rem;background:#fff;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);border-left:1px solid rgba(0,0,0,.15);border-right:1px solid rgba(0,0,0,.15)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:#bf411a}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.15);margin-bottom:1rem}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.view-experiment .exp-description{font-style:italic;color:rgba(0,0,0,.5)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list{list-style:none;margin:0;padding:0}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:#fafaf9;border:1px solid rgba(0,0,0,.15);width:100%;min-height:320px;font-size:24px}.view-experiment .end-experiment-btn{background:#77b96c;color:#fff}.view-experiment .end-experiment-btn:hover{color:#000}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:#fafaf9;color:#35416b;font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid rgba(0,0,0,.15);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:#d9d9d9}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid rgba(0,0,0,.15)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),ge.exports=K},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(ge,K,n){var re=n("./node_modules/css-loader/dist/runtime/api.js");K=re(!1),K.push([ge.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),ge.exports=K},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(ge,K,n){var re=n("./node_modules/css-loader/dist/runtime/api.js");K=re(!1),K.push([ge.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),ge.exports=K},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(ge,K,n){var re=n("./node_modules/css-loader/dist/runtime/api.js");K=re(!1),K.push([ge.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),ge.exports=K},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(ge,K,n){var re=n("./node_modules/css-loader/dist/runtime/api.js");K=re(!1),K.push([ge.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px;overflow:auto}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),ge.exports=K}}]);
