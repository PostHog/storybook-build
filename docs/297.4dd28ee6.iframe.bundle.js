(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{"./frontend/src/scenes/experiments/Experiment.tsx":function(Ue,ne,l){"use strict";l.r(ne),l.d(ne,"scene",function(){return dn}),l.d(ne,"Experiment",function(){return Ct});var dt=l("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Kn=l("./node_modules/core-js/modules/web.dom-collections.for-each.js"),$n=l("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Yt=l("./node_modules/@babel/runtime/helpers/defineProperty.js"),Ie=l.n(Yt),Kt=l("./node_modules/@babel/runtime/helpers/slicedToArray.js"),oe=l.n(Kt),Bn=l("./node_modules/core-js/modules/es.object.to-string.js"),_n=l("./node_modules/core-js/modules/es.function.name.js"),Gn=l("./node_modules/core-js/modules/es.symbol.js"),zn=l("./node_modules/core-js/modules/es.symbol.description.js"),Un=l("./node_modules/core-js/modules/es.array.map.js"),Wn=l("./node_modules/core-js/modules/es.array.concat.js"),Hn=l("./node_modules/core-js/modules/es.regexp.to-string.js"),Jn=l("./node_modules/core-js/modules/es.array.filter.js"),Qn=l("./node_modules/core-js/modules/es.number.to-fixed.js"),Xn=l("./node_modules/core-js/modules/es.array.sort.js"),Zn=l("./node_modules/core-js/modules/es.object.keys.js"),qn=l("./node_modules/core-js/modules/es.number.constructor.js"),J=l("./node_modules/antd/es/form/index.js"),je=l("./node_modules/antd/es/skeleton/index.js"),b=l("./node_modules/antd/es/row/index.js"),E=l("./node_modules/antd/es/col/index.js"),Oe=l("./node_modules/antd/es/input/index.js"),Ce=l("./node_modules/antd/es/tooltip/index.js"),z=l("./node_modules/antd/es/select/index.js"),We=l("./node_modules/antd/es/card/index.js"),ut=l("./node_modules/antd/es/tag/index.js"),pt=l("./node_modules/antd/es/collapse/index.js"),ft=l("./node_modules/antd/es/progress/index.js"),A=l("./node_modules/kea/lib/index.esm.js"),vt=l("./frontend/src/lib/components/PageHeader.tsx"),$t=l("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Bt=l("./frontend/src/lib/components/PropertyFilters/utils.ts"),N=l("./frontend/src/lib/components/TaxonomicFilter/types.ts"),ce=l("./node_modules/react/index.js"),e=l.n(ce),Fe=l("./frontend/src/scenes/funnels/funnelLogic.ts"),me=l("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),pe=l("./frontend/src/scenes/insights/insightLogic.ts"),v=l("./frontend/src/types.ts"),_t=l("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Gt=l.n(_t),zt=l("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),gt=l.n(zt),He={};He.insert="head",He.singleton=!1;var ea=Gt()(gt.a,He),ta=gt.a.locals||{},Ut=l("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),$=l.n(Ut),Wt=l("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ee=l.n(Wt),Ht=l("./node_modules/@babel/runtime/regenerator/index.js"),j=l.n(Ht),na=l("./node_modules/core-js/modules/es.array.splice.js"),aa=l("./node_modules/core-js/modules/es.array.iterator.js"),ra=l("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ia=l("./node_modules/core-js/modules/es.array.find.js"),sa=l("./node_modules/core-js/modules/es.array.includes.js"),la=l("./node_modules/core-js/modules/es.string.includes.js"),oa=l("./node_modules/core-js/modules/es.promise.js"),ca=l("./node_modules/core-js/modules/es.string.iterator.js"),ma=l("./node_modules/core-js/modules/es.array.find-index.js"),da=l("./node_modules/core-js/modules/es.object.values.js"),ua=l("./node_modules/core-js/modules/es.number.epsilon.js"),pa=l("./node_modules/core-js/modules/es.array.fill.js"),X=l("./frontend/src/lib/api.ts"),C=l("./frontend/src/lib/dayjs.ts"),De=l("./frontend/src/scenes/insights/utils/cleanFilters.ts"),Je=l("./frontend/src/scenes/teamLogic.tsx"),Z=l("./frontend/src/scenes/urls.ts"),de=l("./node_modules/kea-router/lib/index.js"),Jt=l("./frontend/src/scenes/experiments/experimentsLogic.ts"),fe=l("./frontend/src/lib/constants.tsx"),Qe=l("./frontend/src/scenes/trends/trendsLogic.ts"),ve=l("./frontend/src/lib/utils/eventUsageLogic.ts"),Qt=l("./frontend/src/scenes/userLogic.ts"),Et=l("./frontend/src/lib/components/Tooltip.tsx"),ge=l("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Xt=l("./frontend/src/models/groupsModel.ts"),Xe=l("./frontend/src/lib/components/lemonToast.tsx"),D=l("./frontend/src/lib/utils.tsx");function ht(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,r)}return a}function S(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?ht(Object(a),!0).forEach(function(r){Ie()(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ht(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var Ee=14,he=Object(A.kea)({props:{},key:function(n){return n.experimentId||"new"},path:function(n){return["scenes","experiment","experimentLogic",n]},connect:{values:[Je.a,["currentTeamId"],Qt.a,["hasAvailableFeature"],Xt.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[Jt.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:function(n){return{experiment:n}},createExperiment:function(n,a,r){return{draft:n,runningTime:a,sampleSize:r}},setExperimentInsightId:function(n){return{shortId:n}},createNewExperimentInsight:function(n){return{filters:n}},setFilters:function(n){return{filters:n}},setNewExperimentData:function(n){return{experimentData:n}},updateExperimentGroup:function(n,a){return{variant:n,idx:a}},removeExperimentGroup:function(n){return{idx:n}},setExperimentInsightType:function(n){return{insightType:n}},setEditExperiment:function(n){return{editing:n}},setSecondaryMetrics:function(n){return{secondaryMetrics:n}},setExperimentResultCalculationError:function(n){return{error:n}},setFlagImplementationWarning:function(n){return{warning:n}},setFlagAvailabilityWarning:function(n){return{warning:n}},resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:function(n,a){var r=a.experimentData;if(r.filters){var o=S(S({},n==null?void 0:n.filters),r.filters);return S(S(S({},n),r),{},{filters:o})}if(r.parameters){var d=S(S({},n==null?void 0:n.parameters),r.parameters);return S(S(S({},n),r),{},{parameters:d})}return S(S({},n),r)},updateExperimentGroup:function(n,a){var r,o=a.variant,d=a.idx,u=ee()((n==null||(r=n.parameters)===null||r===void 0?void 0:r.feature_flag_variants)||[]);return u[d]=S(S({},u[d]),o),S(S({},n),{},{parameters:S(S({},n==null?void 0:n.parameters),{},{feature_flag_variants:u})})},addExperimentGroup:function(n){var a;if(n!=null&&(a=n.parameters)!==null&&a!==void 0&&a.feature_flag_variants){var r=yt(n.parameters.feature_flag_variants.length+1),o=n.parameters.feature_flag_variants.map(function(d,u){return S(S({},d),{},{rollout_percentage:r[u]})});return S(S({},n),{},{parameters:S(S({},n.parameters),{},{feature_flag_variants:[].concat(ee()(o),[{key:"test_group_".concat(n.parameters.feature_flag_variants.length),rollout_percentage:r[r.length-1]}])})})}return n},removeExperimentGroup:function(n,a){var r,o,d=a.idx;if(!n)return n;var u=ee()(((r=n.parameters)===null||r===void 0?void 0:r.feature_flag_variants)||[]);u.splice(d,1);var i=yt(((n==null||(o=n.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]).length-1),c=u.map(function(m,h){return S(S({},m),{},{rollout_percentage:i[h]})});return S(S({},n),{},{parameters:S(S({},n.parameters),{},{feature_flag_variants:c})})},setSecondaryMetrics:function(n,a){var r=a.secondaryMetrics,o=r.map(function(d){return d});return S(S({},n),{},{secondary_metrics:o})},resetNewExperiment:function(){return{parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}}}}],experimentInsightType:[v.D.TRENDS,{setExperimentInsightType:function(n,a){var r=a.insightType;return r}}],experimentInsightId:[null,{setExperimentInsightId:function(n,a){var r=a.shortId;return r}}],editingExistingExperiment:[!1,{setEditExperiment:function(n,a){var r=a.editing;return r}}],experimentResultCalculationError:[null,{setExperimentResultCalculationError:function(n,a){var r=a.error;return r}}],flagImplementationWarning:[!1,{setFlagImplementationWarning:function(n,a){var r=a.warning;return r}}],flagAvailabilityWarning:[!1,{setFlagAvailabilityWarning:function(n,a){var r=a.warning;return r}}]},listeners:function(n){var a=n.values,r=n.actions;return{createExperiment:function(){var o=$()(j.a.mark(function u(i){var c,m,h,f,y,g,s,T,I,M;return j.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(m=i.draft,h=i.runningTime,f=i.sampleSize,y=null,g=!!a.experimentId&&a.experimentId!=="new",p.prev=3,!g){p.next=14;break}return p.next=7,X.b.update("api/projects/".concat(a.currentTeamId,"/experiments/").concat(a.experimentId),S(S({},a.newExperimentData),{},{parameters:S(S({},(s=a.newExperimentData)===null||s===void 0?void 0:s.parameters),{},{recommended_running_time:h,recommended_sample_size:f})},!m&&{start_date:Object(C.a)()}));case 7:if(y=p.sent,!((T=y)!==null&&T!==void 0&&T.id)){p.next=12;break}return r.updateExperiments(y),de.router.actions.push(Z.a.experiment(y.id)),p.abrupt("return");case 12:p.next=18;break;case 14:return p.next=16,X.b.create("api/projects/".concat(a.currentTeamId,"/experiments"),S(S({},a.newExperimentData),{},{parameters:S(S({},(I=a.newExperimentData)===null||I===void 0?void 0:I.parameters),{},{recommended_running_time:h,recommended_sample_size:f})},!m&&{start_date:Object(C.a)()}));case 16:y=p.sent,y&&ve.e.actions.reportExperimentCreated(y);case 18:p.next=24;break;case 20:return p.prev=20,p.t0=p.catch(3),Xe.d.error(p.t0.detail||"Failed to create experiment"),p.abrupt("return");case 24:(c=y)!==null&&c!==void 0&&c.id&&(M=y.id,de.router.actions.push(Z.a.experiment(M)),r.addToExperiments(y),Xe.d.success("Experiment ".concat(g?"updated":"created"),{button:{label:"View it",action:function(){de.router.actions.push(Z.a.experiment(M))}}}));case 25:case"end":return p.stop()}},u,null,[[3,20]])}));function d(u){return o.apply(this,arguments)}return d}(),createNewExperimentInsight:function(){var o=$()(j.a.mark(function u(i){var c,m,h,f;return j.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return c=i.filters,a.experimentInsightType===v.D.FUNNELS?m=Object(De.a)(S({insight:v.D.FUNNELS,funnel_viz_type:v.z.Steps,display:v.j.FunnelViz,date_from:Object(C.a)().subtract(Ee,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(C.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:fe.k.horizontal},c)):m=Object(De.a)(S({insight:v.D.TRENDS,date_from:Object(C.a)().subtract(Ee,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(C.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},c)),h={name:"",description:"",tags:[],filters:m,result:null},g.next=5,X.b.create("api/projects/".concat(a.currentTeamId,"/insights"),h);case 5:f=g.sent,r.setExperimentInsightId(f.short_id),r.setNewExperimentData({filters:S({},h.filters)});case 8:case"end":return g.stop()}},u)}));function d(u){return o.apply(this,arguments)}return d}(),setFilters:function(d){var u=d.filters;if(a.experimentInsightType===v.D.FUNNELS){var i;(i=Fe.a.findMounted({dashboardItemId:a.experimentInsightId}))===null||i===void 0||i.actions.setFilters(u)}else{var c;(c=Qe.a.findMounted({dashboardItemId:a.experimentInsightId}))===null||c===void 0||c.actions.setFilters(u)}},loadExperimentSuccess:function(){var o=$()(j.a.mark(function u(i){var c;return j.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:c=i.experimentData,c&&ve.e.actions.reportExperimentViewed(c),r.setExperimentInsightType((c==null?void 0:c.filters.insight)||v.D.FUNNELS),c!=null&&c.start_date?(r.resetNewExperiment(),r.loadExperimentResults(),r.loadSecondaryMetricResults()):(r.setNewExperimentData(S({},c)),r.createNewExperimentInsight(c==null?void 0:c.filters));case 4:case"end":return h.stop()}},u)}));function d(u){return o.apply(this,arguments)}return d}(),launchExperiment:function(){var o=$()(j.a.mark(function u(){var i;return j.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:i=Object(C.a)(),r.updateExperiment({start_date:i.format("YYYY-MM-DDTHH:mm")}),a.experimentData&&ve.e.actions.reportExperimentLaunched(a.experimentData,i);case 3:case"end":return m.stop()}},u)}));function d(){return o.apply(this,arguments)}return d}(),endExperiment:function(){var o=$()(j.a.mark(function u(){var i,c,m;return j.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:c=Object(C.a)(),r.updateExperiment({end_date:c.format("YYYY-MM-DDTHH:mm")}),m=c.diff((i=a.experimentData)===null||i===void 0?void 0:i.start_date,"second"),a.experimentData&&ve.e.actions.reportExperimentCompleted(a.experimentData,c,m,a.areResultsSignificant);case 4:case"end":return f.stop()}},u)}));function d(){return o.apply(this,arguments)}return d}(),archiveExperiment:function(){var o=$()(j.a.mark(function u(){return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r.updateExperiment({archived:!0}),a.experimentData&&ve.e.actions.reportExperimentArchived(a.experimentData);case 2:case"end":return c.stop()}},u)}));function d(){return o.apply(this,arguments)}return d}(),setExperimentInsightType:function(){if(a.experimentId==="new"||a.editingExistingExperiment)r.createNewExperimentInsight();else{var d;r.createNewExperimentInsight((d=a.experimentData)===null||d===void 0?void 0:d.filters)}},updateExperimentSuccess:function(){var o=$()(j.a.mark(function u(i){var c;return j.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:c=i.experimentData,r.updateExperiments(c);case 2:case"end":return h.stop()}},u)}));function d(u){return o.apply(this,arguments)}return d}(),setNewExperimentData:function(){var o=$()(j.a.mark(function u(i,c){var m,h,f,y,g,s,T,I,M;return j.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(y=i.experimentData,g=((m=y.filters)===null||m===void 0?void 0:m.events)&&y.filters.events.length>0||((h=y.filters)===null||h===void 0?void 0:h.actions)&&y.filters.actions.length>0,!(!y.filters||Object.keys(y.filters).length===0)){p.next=4;break}return p.abrupt("return");case 4:if(!g){p.next=18;break}return s="/api/projects/".concat(a.currentTeamId,"/experiments/requires_flag_implementation?").concat(Object(D.Fb)(y.filters||{})),p.next=8,c(100);case 8:return p.prev=8,p.next=11,X.b.get(s);case 11:T=p.sent,r.setFlagImplementationWarning(T.result),p.next=18;break;case 15:p.prev=15,p.t0=p.catch(8),r.setFlagImplementationWarning(!1);case 18:(f=y.filters)!==null&&f!==void 0&&f.properties&&(I=Object(D.r)(y.filters.properties)||[],I.length>0?(M=!!I.find(function(G){return G.type==="cohort"||!fe.l.includes(G.key||"")}),r.setFlagAvailabilityWarning(M)):r.setFlagAvailabilityWarning(!1));case 19:case"end":return p.stop()}},u,null,[[8,15]])}));function d(u,i){return o.apply(this,arguments)}return d}()}},loaders:function(n){var a=n.actions,r=n.values;return{experimentData:[null,{loadExperiment:function(){var o=$()(j.a.mark(function u(){var i;return j.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(r.experimentId&&r.experimentId!=="new")){m.next=16;break}return m.prev=1,m.next=4,X.b.get("api/projects/".concat(r.currentTeamId,"/experiments/").concat(r.experimentId));case 4:return i=m.sent,m.abrupt("return",i);case 8:if(m.prev=8,m.t0=m.catch(1),m.t0.status!==404){m.next=14;break}throw m.t0;case 14:throw Xe.d.error("Failed to load experiment ".concat(r.experimentId)),new Error("Failed to load experiment ".concat(r.experimentId));case 16:return m.abrupt("return",null);case 17:case"end":return m.stop()}},u,null,[[1,8]])}));function d(){return o.apply(this,arguments)}return d}(),updateExperiment:function(){var o=$()(j.a.mark(function u(i){var c;return j.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,X.b.update("api/projects/".concat(r.currentTeamId,"/experiments/").concat(r.experimentId),i);case 2:return c=h.sent,h.abrupt("return",c);case 4:case"end":return h.stop()}},u)}));function d(u){return o.apply(this,arguments)}return d}()}],experimentResults:[null,{loadExperimentResults:function(){var o=$()(j.a.mark(function u(){var i;return j.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,X.b.get("api/projects/".concat(r.currentTeamId,"/experiments/").concat(r.experimentId,"/results"));case 3:return i=m.sent,m.abrupt("return",S(S({},i),{},{itemID:Math.random().toString(36).substring(2,15)}));case 7:return m.prev=7,m.t0=m.catch(0),a.setExperimentResultCalculationError(m.t0.detail),m.abrupt("return",null);case 11:case"end":return m.stop()}},u,null,[[0,7]])}));function d(){return o.apply(this,arguments)}return d}()}],secondaryMetricResults:[null,{loadSecondaryMetricResults:function(){var o=$()(j.a.mark(function u(){var i;return j.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all((((i=r.experimentData)===null||i===void 0?void 0:i.secondary_metrics)||[]).map(function(){var h=$()(j.a.mark(function f(y,g){var s;return j.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,X.b.get("api/projects/".concat(r.currentTeamId,"/experiments/").concat(r.experimentId,"/secondary_results?id=").concat(g));case 3:return s=I.sent,I.abrupt("return",s.result);case 7:return I.prev=7,I.t0=I.catch(0),I.abrupt("return",{});case 10:case"end":return I.stop()}},f,null,[[0,7]])}));return function(f,y){return h.apply(this,arguments)}}()));case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},u)}));function d(){return o.apply(this,arguments)}return d}()}]}},selectors:{experimentId:[function(){return[function(t,n){var a;return(a=n.experimentId)!==null&&a!==void 0?a:"new"}]},function(t){return t}],breadcrumbs:[function(t){return[t.experimentData,t.experimentId]},function(t,n){return[{name:"Experiments",path:Z.a.experiments()},{name:(t==null?void 0:t.name)||"New",path:Z.a.experiment(n||"new")}]}],variants:[function(t){return[t.newExperimentData,t.experimentData]},function(t,n){var a,r;if(n!=null&&n.start_date){var o;return(n==null||(o=n.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]}return(t==null||(a=t.parameters)===null||a===void 0?void 0:a.feature_flag_variants)||(n==null||(r=n.parameters)===null||r===void 0?void 0:r.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[function(t){return[t.newExperimentData,t.groupsTaxonomicTypes]},function(t,n){var a;return(t==null||(a=t.filters)===null||a===void 0?void 0:a.aggregation_group_type_index)!=null&&n.length>0?[n[t.filters.aggregation_group_type_index]]:[N.a.PersonProperties,N.a.Cohorts]}],parsedSecondaryMetrics:[function(t){return[t.newExperimentData,t.experimentData]},function(t,n){var a=(t==null?void 0:t.secondary_metrics)||(n==null?void 0:n.secondary_metrics)||[];return a}],minimumDetectableChange:[function(t){return[t.newExperimentData]},function(t){var n;return(t==null||(n=t.parameters)===null||n===void 0?void 0:n.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[function(t){return[t.minimumDetectableChange]},function(t){return function(n){return Math.ceil(1600*n*(1-n/100)/(t*t))}}],areResultsSignificant:[function(t){return[t.experimentResults]},function(t){return(t==null?void 0:t.significant)||!1}],significanceBannerDetails:[function(t){return[t.experimentResults]},function(t){if((t==null?void 0:t.significance_code)===v.V.HighLoss){var n;return e.a.createElement(e.a.Fragment,null,"This is because the expected loss in conversion is greater than 1%",e.a.createElement(Et.a,{placement:"right",title:e.a.createElement(e.a.Fragment,null,"Current value is ",(n=((t==null?void 0:t.expected_loss)||0)*100)===null||n===void 0?void 0:n.toFixed(2),"%")},e.a.createElement(ge.a,{style:{padding:"4px 2px"}})),".")}if((t==null?void 0:t.significance_code)===v.V.HighPValue){var a;return e.a.createElement(e.a.Fragment,null,"This is because the p value is greater than 0.05",e.a.createElement(Et.a,{placement:"right",title:e.a.createElement(e.a.Fragment,null,"Current value is ",(t==null||(a=t.p_value)===null||a===void 0?void 0:a.toFixed(3))||1,".")},e.a.createElement(ge.a,{style:{padding:"4px 2px"}})),".")}return(t==null?void 0:t.significance_code)===v.V.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(t==null?void 0:t.significance_code)===v.V.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[function(t){return[t.minimumDetectableChange]},function(t){return function(n){var a=n*t/100,r=n,o=a+n;return parseFloat((4/Math.pow(Math.sqrt(r/Ee)-Math.sqrt(o/Ee),2)).toFixed(1))}}],expectedRunningTime:[function(){return[]},function(){return function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ee;return parseFloat((n/(t/a)).toFixed(1))}}],conversionRateForVariant:[function(t){return[t.experimentResults]},function(t){return function(n){var a="Can't find variant";if(!t)return a;var r=(t==null?void 0:t.insight).find(function(o){var d,u;return((d=o[0])===null||d===void 0||(u=d.breakdown_value)===null||u===void 0?void 0:u[0])===n});return r?(r[r.length-1].count/r[0].count*100).toFixed(1):a}}],getIndexForVariant:[function(t){return[t.experimentResults]},function(t){return function(n,a){var r;if(!t)r=0;else{var o=-1;a===v.D.FUNNELS?o=ee()(t==null?void 0:t.insight).sort(function(d,u){var i,c;return((i=u[0])===null||i===void 0?void 0:i.count)-((c=d[0])===null||c===void 0?void 0:c.count)}).findIndex(function(d){var u,i;return((u=d[0])===null||u===void 0||(i=u.breakdown_value)===null||i===void 0?void 0:i[0])===n}):o=(t==null?void 0:t.insight).findIndex(function(d){return d.breakdown_value===n}),r=o===-1?0:o}return a===v.D.FUNNELS&&r++,r}}],countDataForVariant:[function(t){return[t.experimentResults]},function(t){return function(n){var a="Can't find variant";if(!t)return a;var r=(t==null?void 0:t.insight).find(function(o){return o.breakdown_value===n});return r?r.count.toString():a}}],highestProbabilityVariant:[function(t){return[t.experimentResults]},function(t){if(t){var n=Math.max.apply(Math,ee()(Object.values(t.probability)));return Object.keys(t.probability).find(function(a){return Math.abs(t.probability[a]-n)<Number.EPSILON})}}],areTrendResultsConfusing:[function(t){return[t.experimentResults,t.highestProbabilityVariant]},function(t,n){if(!t)return!1;var a=(t==null?void 0:t.insight).reduce(function(r,o){return o.count>r.count?o:r},{count:0,breakdown_value:""});return a.count?a.breakdown_value!==n:!1}]},urlToAction:function(n){var a=n.actions,r=n.values;return{"/experiments/:id":function(d,u,i,c,m){var h=d.id;if(!r.hasAvailableFeature(v.d.EXPERIMENTATION)){de.router.actions.push("/experiments");return}var f=c.initial||c.pathname!==(m==null?void 0:m.pathname);if(a.setEditExperiment(!1),h&&f){var y=h==="new"?"new":parseInt(h);y==="new"&&(a.createNewExperimentInsight(),a.resetNewExperiment(),a.setSecondaryMetrics([])),y!=="new"&&y===r.experimentId&&a.loadExperiment()}}}}});function yt(t){var n=Math.round(100/t),a=n*t,r=a-100,o=new Array(t).fill(n);return o[t-1]=n-r,o}var Ze=l("./frontend/src/scenes/insights/InsightContainer.tsx"),L=l("./frontend/src/lib/components/icons.tsx"),Zt=l("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),Te=l("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),qe=l("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),qt=l("./frontend/src/lib/components/CopyToClipboard.tsx"),en=l("./node_modules/antd/es/modal/index.js");function xt(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,r)}return a}function ae(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?xt(Object(a),!0).forEach(function(r){Ie()(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xt(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var bt=14,et={name:"",filters:{insight:v.D.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},tn={name:"",filters:{insight:v.D.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:fe.k.horizontal}},nn=Object(A.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[Je.a,["currentTeamId"]]},actions:{setSecondaryMetrics:function(n){return{secondaryMetrics:n}},createNewMetric:!0,addNewMetric:function(n){return{metric:n}},updateMetricFilters:function(n){return{filters:n}},setFilters:function(n){return{filters:n}},setPreviewInsightId:function(n){return{shortId:n}},createPreviewInsight:function(n){return{filters:n}},showModal:!0,hideModal:!0,changeInsightType:function(n){return{type:n}},setCurrentMetricName:function(n){return{name:n}},deleteMetric:function(n){return{metricId:n}}},loaders:function(n){var a=n.values;return{experiments:[[],{loadExperiments:function(){var r=$()(j.a.mark(function d(){var u;return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,X.b.get("api/projects/".concat(a.currentTeamId,"/experiments"));case 2:return u=c.sent,c.abrupt("return",u.results);case 4:case"end":return c.stop()}},d)}));function o(){return r.apply(this,arguments)}return o}()}]}},reducers:function(n){var a=n.props;return{previewInsightId:[null,{setPreviewInsightId:function(o,d){var u=d.shortId;return u}}],metrics:[a.initialMetrics,{addNewMetric:function(o,d){var u=d.metric;return[].concat(ee()(o),[ae({},u)])},deleteMetric:function(o,d){var u=d.metricId;return o.filter(function(i,c){return c!==u})}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1}}],currentMetricName:["",{setCurrentMetricName:function(o,d){var u=d.name;return u}}],currentMetric:[et,{changeInsightType:function(o,d){var u=d.type;return u===v.D.TRENDS?et:o.filters.insight===v.D.TRENDS?tn:et},updateMetricFilters:function(o,d){var u=d.filters;return ae(ae({},o),{},{filters:u})}}]}},listeners:function(n){var a=n.actions,r=n.values,o=n.props;return{createPreviewInsight:function(){var d=$()(j.a.mark(function i(c){var m,h,f,y;return j.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return m=c.filters,(m==null?void 0:m.insight)===v.D.FUNNELS?h=Object(De.a)(ae({insight:v.D.FUNNELS,funnel_viz_type:v.z.Steps,display:v.j.FunnelViz,date_from:Object(C.a)().subtract(bt,"day").format("YYYY-MM-DD"),date_to:Object(C.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:fe.k.horizontal},m)):h=Object(De.a)(ae({insight:v.D.TRENDS,date_from:Object(C.a)().subtract(bt,"day").format("YYYY-MM-DD"),date_to:Object(C.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},m)),f={description:"",tags:[],filters:h,result:null},s.next=5,X.b.create("api/projects/".concat(Je.a.values.currentTeamId,"/insights"),f);case 5:y=s.sent,a.setPreviewInsightId(y.short_id);case 7:case"end":return s.stop()}},i)}));function u(i){return d.apply(this,arguments)}return u}(),setFilters:function(u){var i=u.filters;if(i.insight===v.D.FUNNELS){var c;(c=Fe.a.findMounted({dashboardItemId:r.previewInsightId}))===null||c===void 0||c.actions.setFilters(i)}else{var m;(m=Qe.a.findMounted({dashboardItemId:r.previewInsightId}))===null||m===void 0||m.actions.setFilters(i)}},createNewMetric:function(){a.addNewMetric(ae(ae({},r.currentMetric),{},{name:r.currentMetricName})),o.onMetricsChange(r.metrics),a.changeInsightType(v.D.TRENDS),a.setCurrentMetricName("")},deleteMetric:function(){o.onMetricsChange(r.metrics)},changeInsightType:function(){return a.createPreviewInsight(r.currentMetric.filters)}}},events:function(n){var a=n.actions;return{afterMount:function(){a.createPreviewInsight()}}}}),_=l("./frontend/src/lib/components/LemonButton/index.ts"),tt=l("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function St(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,r)}return a}function te(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?St(Object(a),!0).forEach(function(r){Ie()(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Me(t){var n=t.onMetricsChange,a=t.initialMetrics,r=nn({onMetricsChange:n,initialMetrics:a}),o=Object(A.useValues)(r),d=o.previewInsightId,u=o.metrics,i=o.modalVisible,c=o.currentMetric,m=Object(A.useActions)(r),h=m.createNewMetric,f=m.updateMetricFilters,y=m.setFilters,g=m.showModal,s=m.hideModal,T=m.changeInsightType,I=m.setCurrentMetricName,M=m.deleteMetric,Q=Object(A.useValues)(Object(pe.c)({dashboardItemId:d,syncWithUrl:!1})),p=Q.insightProps,G=Object(A.useValues)(Object(Fe.a)(p)),U=G.isStepsEmpty,O=G.filterSteps;return e.a.createElement(e.a.Fragment,null,e.a.createElement(en.a,{title:"Add secondary metric",visible:i,destroyOnClose:!0,onCancel:s,footer:null,style:{minWidth:600}},e.a.createElement(J.a,{layout:"vertical",initialValues:{type:v.D.TRENDS},onValuesChange:function(P){P.name&&I(P.name)},onFinish:function(){h(),s()},scrollToFirstError:!0,requiredMark:!1},e.a.createElement(J.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}]},e.a.createElement(Oe.a,null)),e.a.createElement(J.a.Item,{name:"type",label:"Type"},e.a.createElement(z.a,{style:{display:"flex"},value:c.filters.insight,onChange:function(){T()},suffixIcon:e.a.createElement(Te.a,null),dropdownMatchSelectWidth:!1},e.a.createElement(z.a.Option,{value:v.D.TRENDS},e.a.createElement(E.a,null,e.a.createElement("span",null,e.a.createElement("b",null,"Trend")))),e.a.createElement(z.a.Option,{value:v.D.FUNNELS},e.a.createElement(E.a,null,e.a.createElement("span",null,e.a.createElement("b",null,"Conversion funnel")))))),e.a.createElement(J.a.Item,{name:"query",label:"Query"},c.filters.insight===v.D.FUNNELS&&e.a.createElement(me.a,{bordered:!0,filters:c.filters,setFilters:function(P){var V=te(te({},c.filters),{},{insight:v.D.FUNNELS},P);f(V),y(V)},typeKey:"funnel-preview-metric",mathAvailability:tt.b.None,hideDeleteBtn:O.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!U,seriesIndicatorType:"numeric",sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[N.a.EventProperties,N.a.PersonProperties,N.a.EventFeatureFlags,N.a.Cohorts,N.a.Elements]}),c.filters.insight===v.D.TRENDS&&e.a.createElement(me.a,{bordered:!0,entitiesLimit:1,filters:c.filters,setFilters:function(P){var V=te(te({},c.filters),{},{insight:v.D.TRENDS},P);f(V),y(V)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,propertiesTaxonomicGroupTypes:[N.a.EventProperties,N.a.PersonProperties,N.a.EventFeatureFlags,N.a.Cohorts,N.a.Elements]})),e.a.createElement(J.a.Item,{name:"metric-preview",label:"Metric preview"},e.a.createElement(A.BindLogic,{logic:pe.c,props:p},e.a.createElement(Ze.a,{disableHeader:!0,disableTable:!0,disableCorrelationTable:!0}))),e.a.createElement(b.a,{justify:"end"},e.a.createElement(_.a,{type:"secondary",className:"mr-2",onClick:function(){return s()}},"Cancel"),e.a.createElement(_.a,{type:"primary",htmlType:"submit"},"Save")))),e.a.createElement(b.a,null,e.a.createElement(E.a,null,u.map(function(F,P){return e.a.createElement(b.a,{key:P,className:"mt-4 border rounded p-4"},e.a.createElement(b.a,{align:"middle",justify:"space-between",className:"w-full mb-3 pb-2 border-b"},e.a.createElement("div",null,e.a.createElement("b",null,F.name)),e.a.createElement(_.a,{icon:e.a.createElement(L.IconDelete,null),size:"small",status:"muted",onClick:function(){return M(P)}})),F.filters.insight===v.D.FUNNELS&&e.a.createElement(me.a,{bordered:!0,filters:F.filters,setFilters:function(le){var B=te(te({},F.filters),{},{insight:v.D.FUNNELS},le);f(B),y(B)},typeKey:"funnel-preview-".concat(P),mathAvailability:tt.b.None,hideDeleteBtn:O.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!U,seriesIndicatorType:"numeric",sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[N.a.EventProperties,N.a.PersonProperties,N.a.EventFeatureFlags,N.a.Cohorts,N.a.Elements],readOnly:!0}),F.filters.insight===v.D.TRENDS&&e.a.createElement(me.a,{bordered:!0,filters:F.filters,setFilters:function(le){var B=te(te({},F.filters),{},{insight:v.D.TRENDS},le);f(B),y(B)},typeKey:"trend-preview-".concat(P),buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[N.a.EventProperties,N.a.PersonProperties,N.a.EventFeatureFlags,N.a.Cohorts,N.a.Elements],readOnly:!0}))}),u&&!(u.length>2)&&e.a.createElement(E.a,null,e.a.createElement("div",{className:"mb-2 mt-4"},e.a.createElement(_.a,{type:"secondary",onClick:g},"Add metric"))))))}try{Me.displayName="SecondaryMetrics",Me.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:Me.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(t){}var wt=l("./frontend/src/lib/colors.ts"),an=l("./frontend/src/lib/components/EntityFilterInfo.tsx"),rn=l("./frontend/src/lib/components/EditableField/EditableField.tsx"),Nt=l("./frontend/src/lib/components/Link.tsx"),sn=l("./node_modules/antd/es/slider/index.js"),ln=l("./node_modules/antd/es/input-number/index.js"),on=l("./frontend/src/lib/components/InsightLabel/index.tsx"),It=l("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function cn(){var t=Object(ce.useState)(!1),n=oe()(t,2),a=n[0],r=n[1],o=Object(ce.useState)(!1),d=oe()(o,2),u=d[0],i=d[1];return e.a.createElement(We.a,{className:"experiment-workflow",title:e.a.createElement("span",{className:"card-secondary"},"Experiment workflow")},e.a.createElement(b.a,null,e.a.createElement(E.a,{className:"exp-workflow-step step-completed w-full"},e.a.createElement(b.a,{align:"middle"},e.a.createElement(L.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),e.a.createElement("b",{className:"ml-2"},"Create experiment")),e.a.createElement("div",{className:"ml-8"},"Set variants, select participants, and add secondary metrics"))),e.a.createElement(b.a,null,e.a.createElement(E.a,{className:"w-full exp-workflow-step ".concat(a?"step-completed":""),onClick:function(){return r(!a)}},e.a.createElement(b.a,{align:"middle"},a?e.a.createElement(L.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):e.a.createElement(L.IconRadioButtonUnchecked,null),e.a.createElement("b",{className:"ml-2"},"Validate experiment")),e.a.createElement("div",{className:"ml-8"},"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."))),e.a.createElement(b.a,null,e.a.createElement(E.a,{className:"w-full exp-workflow-step ".concat(u?"step-completed":""),onClick:function(){return i(!u)}},e.a.createElement(b.a,{align:"middle"},u?e.a.createElement(L.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):e.a.createElement(L.IconRadioButtonUnchecked,null),e.a.createElement("b",{className:"ml-2"},"Launch experiment")),e.a.createElement("div",{className:"ml-8"},"Run your experiment, monitor results, and decide when to terminate your experiment."))))}function ye(t){var n,a,r,o,d,u,i=t.experiment,c=t.trendCount,m=t.funnelConversionRate,h=t.trendExposure,f=t.funnelSampleSize,y=t.funnelEntrants,g=(i==null?void 0:i.id)||"new",s=Object(A.useValues)(he({experimentId:g})),T=s.experimentInsightType,I=s.editingExistingExperiment,M=s.minimumDetectableChange,Q=s.expectedRunningTime,p=s.aggregationLabel,G=Object(A.useActions)(he({experimentId:g})),U=G.setNewExperimentData,O=T===v.D.FUNNELS&&100-m<50?100-m:50,F=Object(C.a)().diff(Object(C.a)(i==null?void 0:i.start_date),"hour"),P=0;i!=null&&i.start_date?P=Q(y||1,f||0,F):P=Q(y||1,f||0);var V=Object(C.a)(i==null?void 0:i.start_date).add(P,"hour"),le=!(i!=null&&i.end_date)&&F>=24&&y&&f,B=Object(D.r)(i==null||(n=i.filters)===null||n===void 0?void 0:n.properties);return e.a.createElement(b.a,null,e.a.createElement(E.a,{span:!(i!=null&&i.start_date)&&g!=="new"&&!I?12:24},g==="new"&&e.a.createElement(b.a,{className:"experiment-preview-row"},e.a.createElement("div",null,e.a.createElement("div",null,e.a.createElement("b",null,"Experiment preview")),e.a.createElement("div",{className:"text-muted"},"Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "))),(g==="new"||I)&&e.a.createElement(b.a,{className:"mb-4"},e.a.createElement(E.a,{span:24},e.a.createElement("div",null,e.a.createElement("b",null,"Minimum acceptable improvement"),e.a.createElement(Ce.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept."},e.a.createElement(ge.a,{style:{marginLeft:4}}))),e.a.createElement(b.a,{className:"mde-slider"},e.a.createElement(E.a,{span:8},e.a.createElement(sn.a,{defaultValue:5,value:M,min:1,max:O,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:function(K){U({parameters:{minimum_detectable_effect:K}})},tipFormatter:function(K){return"".concat(K,"%")}})),e.a.createElement(ln.a,{min:1,max:O,defaultValue:5,formatter:function(K){return"".concat(K,"%")},style:{margin:"0 16px"},value:M,onChange:function(K){U({parameters:{minimum_detectable_effect:K}})}})))),e.a.createElement(b.a,{className:"experiment-preview-row ".concat(i!=null&&i.start_date?"mr":"")},T===v.D.TRENDS?e.a.createElement(e.a.Fragment,null,!(i!=null&&i.start_date)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(E.a,{span:6},e.a.createElement("div",{className:"card-secondary"},"Baseline Count"),e.a.createElement("div",{className:"l4"},Object(D.P)(c||0))),e.a.createElement(E.a,{span:6},e.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Count"),e.a.createElement("div",{className:"l4"},Object(D.P)(c+Math.ceil(c*(M/100))||0)))),e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary"},"Recommended running time"),e.a.createElement("div",null,e.a.createElement("span",{className:"l4"},"~",Object(D.P)(h||0))," days"))):e.a.createElement(e.a.Fragment,null,!(i!=null&&i.start_date)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary"},"Baseline Conversion Rate"),e.a.createElement("div",{className:"l4"},m.toFixed(1),"%")),e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Conversion Rate"),e.a.createElement("div",{className:"l4"},(m+M).toFixed(1),"%"))),e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary"},"Recommended Sample Size"),e.a.createElement("div",{className:"pb-4"},e.a.createElement("span",{className:"l4"},"~",Object(D.P)(f||0))," persons")),!(i!=null&&i.start_date)&&e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary"},"Recommended running time"),e.a.createElement("div",null,e.a.createElement("span",{className:"l4"},"~",Object(D.P)(P||0))," days"))),e.a.createElement(b.a,{className:"w-full mt-4"},e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary"},"Experiment variants"),e.a.createElement("ul",{className:"variants-list"},i==null||(a=i.parameters)===null||a===void 0||(r=a.feature_flag_variants)===null||r===void 0?void 0:r.map(function(Y,K){return e.a.createElement("li",{key:K},Y.key)}))),e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary"},"Participants"),e.a.createElement("div",null,B!=null&&B.length?e.a.createElement("div",null,B==null?void 0:B.map(function(Y){return e.a.createElement(It.a,{key:Y.key,item:Y,style:{margin:2,cursor:"default"}})})):e.a.createElement(e.a.Fragment,null,"100% of"," ",(i==null||(o=i.filters)===null||o===void 0?void 0:o.aggregation_group_type_index)!=null?Object(D.i)(p(i.filters.aggregation_group_type_index).plural):"users")))),e.a.createElement(b.a,{className:"w-full"},g!=="new"&&!I&&e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary mt-4"},"Start date"),i!=null&&i.start_date?e.a.createElement("span",null,Object(C.a)(i==null?void 0:i.start_date).format("D MMM YYYY")):e.a.createElement("span",{className:"description"},"Not started yet")),T===v.D.FUNNELS&&le?e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary mt-4"},"Expected end date"),e.a.createElement("span",null,V.isAfter(Object(C.a)())?V.format("D MMM YYYY"):Object(C.a)().format("D MMM YYYY"))):null,(i==null?void 0:i.end_date)&&e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"card-secondary mt-4"},"Completed date"),e.a.createElement("span",null,Object(C.a)(i==null?void 0:i.end_date).format("D MMM YYYY"))))),g!=="new"&&!I&&e.a.createElement(b.a,{className:"experiment-preview-row"},e.a.createElement(E.a,null,e.a.createElement("div",{className:"card-secondary mb-2"},T===v.D.FUNNELS?"Conversion goal steps":"Trend goal"),[].concat(ee()((i==null||(d=i.filters)===null||d===void 0?void 0:d.events)||[]),ee()((i==null||(u=i.filters)===null||u===void 0?void 0:u.actions)||[])).sort(function(Y,K){return(Y.order||0)-(K.order||0)}).map(function(Y,K){var Se;return e.a.createElement(E.a,{key:K,className:"mb-2"},e.a.createElement(b.a,{style:{marginBottom:4}},e.a.createElement("div",{className:"preview-conversion-goal-num"},T===v.D.FUNNELS?(Y.order||0)+1:K+1),e.a.createElement("b",null,e.a.createElement(on.a,{action:Y,showCountedByTag:T===v.D.TRENDS,hideIcon:!0}))),(Se=Y.properties)===null||Se===void 0?void 0:Se.map(function(Be){return e.a.createElement(It.a,{key:Be.key,item:Be})}))})))),g!=="new"&&!I&&!(i!=null&&i.start_date)&&e.a.createElement(E.a,{span:12,className:"pl-4"},e.a.createElement(cn,null)))}try{ye.displayName="ExperimentPreview",ye.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:ye.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(t){}var nt=l("./frontend/@posthog/lemon-ui/src/index.ts"),k=l("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx");function xe(){return e.a.createElement("div",{className:"warning"},e.a.createElement("p",null,e.a.createElement("b",null,"Warning:")," Server side experiment metrics require you to manually send the feature flag information."," ",e.a.createElement(nt.Link,{to:"https://posthog.com/tutorials/experiments#step-2-sending-the-right-events",target:"_blank"},"See this tutorial for more information.")))}function Pe(t){var n=t.flagKey,a=t.variant;return e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,{language:k.b.JavaScript,wrap:!0},"const experimentFlagValue = await client.getFeatureFlag('".concat(n,`', 'user distinct id')

if (experimentFlagValue === '`).concat(a,`' ) {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`)),e.a.createElement(xe,null))}function Re(t){var n=t.flagKey,a=t.variant;return e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,{language:k.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat(n,"') === '").concat(a,`') {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`)),e.a.createElement("b",null,"Test that it works"),e.a.createElement(k.a,{language:k.b.JavaScript,wrap:!0},"posthog.feature_flags.override({'".concat(n,"': '").concat(a,"'})")))}function Ae(t){var n=t.flagKey,a=t.variant;return e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,{language:k.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat(n,"') === '").concat(a,`') {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`)))}function Le(t){var n=t.flagKey,a=t.variant;return e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,{language:k.b.PHP,wrap:!0},"if (PostHog::getFeatureFlag('".concat(n,"', 'user distinct id') == '").concat(a,`') {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`)),e.a.createElement(xe,null))}function ke(t){var n=t.flagKey,a=t.variant;return e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,{language:k.b.Go,wrap:!0},`experimentFlagValue, err := client.GetFeatureFlag(
                    FeatureFlagPayload{
                        Key:        '`.concat(n,`',
                        DistinctId: "distinct-id",
                    })

if (experimentFlagValue == '`).concat(a,`' ) {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`)),e.a.createElement(xe,null))}function Ve(t){var n=t.flagKey,a=t.variant;return e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,{language:k.b.Ruby,wrap:!0},"experimentFlagValue = posthog.get_feature_flag('".concat(n,`', 'user distinct id')


if experimentFlagValue == '`).concat(a,`'
    # Do something differently for this user
else
    # It's a good idea to let control variant always be the default behaviour,
    # so if something goes wrong with flag evaluation, you don't break your app.
end
`)),e.a.createElement(xe,null))}function Ye(t){var n=t.flagKey,a=t.variant;return e.a.createElement(e.a.Fragment,null,e.a.createElement(k.a,{language:k.b.Python,wrap:!0},'experiment_flag_value = posthog.get_feature_flag("'.concat(n,`", "user_distinct_id"):

if experiment_flag_value == '`).concat(a,`':
    # Do something differently for this user
else:
    # It's a good idea to let control variant always be the default behaviour,
    # so if something goes wrong with flag evaluation, you don't break your app.
`)),e.a.createElement(xe,null))}try{Pe.displayName="NodeJSSnippet",Pe.__docgenInfo={description:"",displayName:"NodeJSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#NodeJSSnippet"]={docgenInfo:Pe.__docgenInfo,name:"NodeJSSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#NodeJSSnippet"})}catch(t){}try{Re.displayName="JSSnippet",Re.__docgenInfo={description:"",displayName:"JSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#JSSnippet"]={docgenInfo:Re.__docgenInfo,name:"JSSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#JSSnippet"})}catch(t){}try{Ae.displayName="RNSnippet",Ae.__docgenInfo={description:"",displayName:"RNSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RNSnippet"]={docgenInfo:Ae.__docgenInfo,name:"RNSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RNSnippet"})}catch(t){}try{Le.displayName="PHPSnippet",Le.__docgenInfo={description:"",displayName:"PHPSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PHPSnippet"]={docgenInfo:Le.__docgenInfo,name:"PHPSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PHPSnippet"})}catch(t){}try{ke.displayName="GolangSnippet",ke.__docgenInfo={description:"",displayName:"GolangSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#GolangSnippet"]={docgenInfo:ke.__docgenInfo,name:"GolangSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#GolangSnippet"})}catch(t){}try{Ve.displayName="RubySnippet",Ve.__docgenInfo={description:"",displayName:"RubySnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RubySnippet"]={docgenInfo:Ve.__docgenInfo,name:"RubySnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RubySnippet"})}catch(t){}try{Ye.displayName="PythonSnippet",Ye.__docgenInfo={description:"",displayName:"PythonSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PythonSnippet"]={docgenInfo:Ye.__docgenInfo,name:"PythonSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PythonSnippet"})}catch(t){}var re="?utm_medium=in-product&utm_campaign=experiment",ie="https://posthog.com/docs/integrate/",se="#feature-flags",at=[{value:"JavaScript",documentationLink:"".concat(ie,"client/js").concat(re).concat(se),Icon:L.IconJavascript,Snippet:Re},{value:"ReactNative",documentationLink:"".concat(ie,"client/react-native").concat(re).concat(se),Icon:L.IconJavascript,Snippet:Ae},{value:"Node.js",documentationLink:"".concat(ie,"server/node").concat(re).concat(se),Icon:L.IconNodeJS,Snippet:Pe},{value:"PHP",documentationLink:"".concat(ie,"server/php").concat(re).concat(se),Icon:L.IconPHP,Snippet:Le},{value:"Ruby",documentationLink:"".concat(ie,"server/ruby").concat(re).concat(se),Icon:L.IconRuby,Snippet:Ve},{value:"Golang",documentationLink:"".concat(ie,"server/go").concat(re).concat(se),Icon:L.IconGolang,Snippet:ke},{value:"Python",documentationLink:"".concat(ie,"server/python").concat(re).concat(se),Icon:L.IconPython,Snippet:Ye}];function Ke(t){var n=t.selectedOptionValue,a=t.selectOption;return e.a.createElement(z.a,{value:n,onChange:a,style:{minWidth:120},suffixIcon:e.a.createElement(Te.a,null)},at.map(function(r,o){var d=r.value,u=r.Icon;return e.a.createElement(z.a.Option,{"data-attr":"experiment-instructions-select-option-"+d,key:o,value:d},e.a.createElement("div",{className:"flex items-center"},e.a.createElement(u,{className:"mr-1"})," ",d))}))}function be(t){var n,a,r,o,d,u,i,c=t.experiment,m=(n=c==null||(a=c.parameters)===null||a===void 0||(r=a.feature_flag_variants)===null||r===void 0||(o=r[1])===null||o===void 0?void 0:o.key)!==null&&n!==void 0?n:"test",h=Object(ce.useState)(m),f=oe()(h,2),y=f[0],g=f[1],s=at[0],T=Object(ce.useState)(s),I=oe()(T,2),M=I[0],Q=I[1],p=function(U){var O=at.find(function(F){return F.value===U});O&&Q(O)};return e.a.createElement(We.a,{title:e.a.createElement("span",{className:"card-secondary"},"Feature flag usage and implementation"),className:"experiment-implementation-details"},e.a.createElement("div",{style:{justifyContent:"space-between"},className:"flex mb-2"},e.a.createElement("div",null,e.a.createElement("span",{className:"mr-2"},"Variant group"),e.a.createElement(z.a,{onChange:g,value:y,style:{minWidth:80},suffixIcon:e.a.createElement(Te.a,null)},c==null||(d=c.parameters)===null||d===void 0||(u=d.feature_flag_variants)===null||u===void 0?void 0:u.map(function(G,U){return e.a.createElement(z.a.Option,{key:U,value:G.key},G.key)}))),e.a.createElement("div",null,e.a.createElement(Ke,{selectOption:p,selectedOptionValue:M.value}))),e.a.createElement("b",null,"Implement your experiment in code"),e.a.createElement(M.Snippet,{variant:y,flagKey:(i=c==null?void 0:c.feature_flag_key)!==null&&i!==void 0?i:""}),e.a.createElement(nt.Link,{to:M.documentationLink,target:"_blank"},e.a.createElement("div",{className:"flex items-center"},"See the docs for more implementation information. ",e.a.createElement(L.IconOpenInNew,{className:"ml-1"}))))}try{Ke.displayName="CodeLanguageSelect",Ke.__docgenInfo={description:"",displayName:"CodeLanguageSelect",props:{selectedOptionValue:{defaultValue:null,description:"",name:"selectedOptionValue",required:!0,type:{name:"string"}},selectOption:{defaultValue:null,description:"",name:"selectOption",required:!0,type:{name:"(selectedValue: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#CodeLanguageSelect"]={docgenInfo:Ke.__docgenInfo,name:"CodeLanguageSelect",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#CodeLanguageSelect"})}catch(t){}try{be.displayName="ExperimentImplementationDetails",be.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:be.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(t){}var mn=l("./frontend/src/lib/components/NotFound/index.tsx"),jt=l("./frontend/src/lib/components/AlertMessage/index.ts");function Ot(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,r)}return a}function $e(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Ot(Object(a),!0).forEach(function(r){Ie()(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ot(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var dn={component:Ct,logic:he,paramsToProps:function(n){var a=n.params.id;return{experimentId:a==="new"?"new":parseInt(a)}}};function Ct(){var t,n,a,r,o,d,u,i,c,m,h,f=Object(A.useValues)(he),y=f.experimentId,g=f.newExperimentData,s=f.experimentData,T=f.experimentInsightId,I=f.minimumSampleSizePerVariant,M=f.recommendedExposureForCountData,Q=f.variants,p=f.experimentResults,G=f.countDataForVariant,U=f.editingExistingExperiment,O=f.experimentInsightType,F=f.experimentResultsLoading,P=f.parsedSecondaryMetrics,V=f.areResultsSignificant,le=f.conversionRateForVariant,B=f.getIndexForVariant,Y=f.significanceBannerDetails,K=f.areTrendResultsConfusing,Se=f.taxonomicGroupTypesForSelection,Be=f.groupTypes,un=f.aggregationLabel,q=f.secondaryMetricResults,pn=f.experimentDataLoading,fn=f.secondaryMetricResultsLoading,Ft=f.experimentResultCalculationError,vn=f.flagImplementationWarning,gn=f.flagAvailabilityWarning,W=Object(A.useActions)(he),we=W.setNewExperimentData,En=W.createExperiment,hn=W.launchExperiment,_e=W.setFilters,yn=W.setEditExperiment,Dt=W.endExperiment,xn=W.addExperimentGroup,bn=W.updateExperiment,Sn=W.updateExperimentGroup,wn=W.removeExperimentGroup,Nn=W.setSecondaryMetrics,In=W.setExperimentInsightType,jn=W.archiveExperiment,On=J.a.useForm(),Cn=oe()(On,1),Fn=Cn[0],Dn=Object(ce.useState)(!0),Tt=oe()(Dn,2),rt=Tt[0],it=Tt[1],Tn=Object(A.useValues)(Object(pe.c)({dashboardItemId:T})),st=Tn.insightProps,Ne=Object(A.useValues)(Object(Fe.a)(st)),Mn=Ne.isStepsEmpty,Pn=Ne.filterSteps,Mt=Ne.filters,lt=Ne.results,Rn=Ne.conversionMetrics,Pt=Object(A.useValues)(Object(Qe.a)(st)),Rt=Pt.filters,An=Pt.results,ot=Rn.totalRate*100,Ln=I(ot),At=Ln*Q.length,ct=(t=An[0])===null||t===void 0?void 0:t.count,Lt=lt==null||(n=lt[0])===null||n===void 0?void 0:n.count,kt=M(ct),ue=Math.floor(24/(Q.length+2)),Ge=O===v.D.FUNNELS&&p!==null&&p!==void 0&&p.insight?p.insight.reduce(function(w,x){var R;return((R=x[0])===null||R===void 0?void 0:R.count)+w},0):0,kn=O===v.D.FUNNELS?(Ge||0)/((s==null||(a=s.parameters)===null||a===void 0?void 0:a.recommended_sample_size)||1)*100:Object(C.a)().diff(s==null?void 0:s.start_date,"day")/((s==null||(r=s.parameters)===null||r===void 0?void 0:r.recommended_running_time)||1)*100,Vn={running:"green",draft:"default",complete:"purple"},Vt=function(){if(s!=null&&s.start_date){if(!(s!=null&&s.end_date))return"running"}else return"draft";return"complete"},Yn=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return pn?e.a.createElement(je.a,{active:!0}):!s&&y!=="new"?e.a.createElement(mn.a,{object:"experiment"}):e.a.createElement(e.a.Fragment,null,y==="new"||U?e.a.createElement(e.a.Fragment,null,e.a.createElement(b.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8}},e.a.createElement(vt.a,{title:U?"Edit experiment":"New experiment"}),e.a.createElement(b.a,null,e.a.createElement(_.a,{type:"secondary",className:"mr-2",onClick:s?function(){return de.router.actions.push(Z.a.experiment(s.id))}:function(){return de.router.actions.push(Z.a.experiments())}},"Cancel"),e.a.createElement(_.a,{type:"primary",htmlType:"submit",form:"new-experiment"},"Save"))),e.a.createElement(J.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:Fn,onValuesChange:function(x){return we(x)},initialValues:{name:g==null?void 0:g.name,feature_flag_key:g==null?void 0:g.feature_flag_key,description:g==null?void 0:g.description},onFinish:function(){return En(!0,kt,At)},requiredMark:!1,scrollToFirstError:!0},e.a.createElement("div",null,e.a.createElement(A.BindLogic,{logic:pe.c,props:st},e.a.createElement(b.a,null,e.a.createElement(E.a,{span:12,style:{paddingRight:24}},e.a.createElement(b.a,{className:"w-full"},e.a.createElement(J.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}]},e.a.createElement(Oe.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})),e.a.createElement(J.a.Item,{style:{marginBottom:"1rem"},label:e.a.createElement("div",null,"Feature flag key"," ",e.a.createElement(Ce.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment."},e.a.createElement(ge.a,null))),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}]},e.a.createElement(Oe.a,{"data-attr":"experiment-feature-flag-key",disabled:U}))),e.a.createElement(J.a.Item,{label:e.a.createElement("div",null,"Description ",e.a.createElement("span",{className:"text-muted"},"(optional)")),name:"description"},e.a.createElement(nt.LemonTextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})),(g==null||(o=g.parameters)===null||o===void 0?void 0:o.feature_flag_variants)&&e.a.createElement(E.a,null,e.a.createElement("label",null,e.a.createElement("b",null,"Experiment variants")),e.a.createElement("div",{className:"text-muted"},"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."),e.a.createElement(E.a,{className:"variants"},g.parameters.feature_flag_variants.map(function(w,x){return e.a.createElement(J.a,{key:"".concat(w,"-").concat(x),initialValues:{key:w.key},onValuesChange:function(H){Sn(H,x)}},e.a.createElement(b.a,{key:"".concat(w,"-").concat(x),className:"feature-flag-variant ".concat(x===0?"border-t":x>=3?"border-b":"")},e.a.createElement("div",{className:"variant-label",style:$e({},Yn[x])},x===0?"Control":"Test"),e.a.createElement(J.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:e.a.createElement(e.a.Fragment,null,e.a.createElement(Zt.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores.")}],style:{display:"contents"}},e.a.createElement(Oe.a,{disabled:x===0,"data-attr":"feature-flag-variant-key","data-key-index":x.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(x+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})),e.a.createElement("div",{className:"float-right"},!(x===0||x===1)&&e.a.createElement(Ce.a,{title:"Delete this variant",placement:"bottomLeft"},e.a.createElement(_.a,{status:"primary-alt",size:"small",icon:e.a.createElement(L.IconDelete,null),onClick:function(){return wn(x)}})))))}),g.parameters.feature_flag_variants.length<4&&e.a.createElement("div",{className:"feature-flag-variant border-b"},e.a.createElement(_.a,{onClick:function(){return xn()},fullWidth:!0,icon:e.a.createElement(L.IconPlusMini,null)},"Add test variant")))),e.a.createElement(b.a,{className:"person-selection"},e.a.createElement("div",{className:"mb-2"},e.a.createElement("strong",null,"Select participants")),e.a.createElement(E.a,null,e.a.createElement("div",{className:"text-muted"},"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."),e.a.createElement("div",{className:"mt-4 mb-2"},e.a.createElement("strong",null,"Participant type")),e.a.createElement(z.a,{value:(g==null||(d=g.filters)===null||d===void 0?void 0:d.aggregation_group_type_index)!=null?g.filters.aggregation_group_type_index:-1,onChange:function(x){var R,H=x!==-1?x:void 0;H!=(g==null||(R=g.filters)===null||R===void 0?void 0:R.aggregation_group_type_index)&&(_e({properties:[],aggregation_group_type_index:H}),we({filters:{aggregation_group_type_index:H,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1},e.a.createElement(z.a.Option,{key:-1,value:-1},"Persons"),Be.map(function(w){return e.a.createElement(z.a.Option,{key:w.group_type_index,value:w.group_type_index},Object(D.i)(un(w.group_type_index).plural))})),e.a.createElement("div",{className:"mt-4 mb-2"},e.a.createElement("strong",null,"Filters")),e.a.createElement("div",{className:"mb-4"},e.a.createElement($t.a,{pageKey:"experiment-participants-property",propertyFilters:O===v.D.FUNNELS?Object(D.r)(Mt.properties):Object(D.r)(Rt.properties),onChange:function(x){we({filters:{properties:x}}),_e({properties:x.filter(Bt.b)})},taxonomicGroupTypes:Se})),gn&&e.a.createElement(jt.a,{type:"info",className:"mt-3 mb-3"},"These properties aren't immediately available on first page load for unidentified persons. This experiment requires that at least one event is sent prior to becoming available to your product or website."," ",e.a.createElement("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank"}," ","Learn more about how to make feature flags available instantly.")),e.a.createElement("div",{className:"mt-4 mb-2"},e.a.createElement("strong",null,"Advanced Options")),e.a.createElement("div",{className:"mb-4"},"For more advanced options like changing the rollout percentage and persisting feature flags, you can"," ",y==="new"?"change settings on the feature flag after creation.":e.a.createElement(Nt.a,{to:g!=null&&g.feature_flag?Z.a.featureFlag(g.feature_flag):void 0},"change settings on the feature flag."))))),e.a.createElement(b.a,{className:"metrics-selection"},e.a.createElement(E.a,{span:12},e.a.createElement("div",{className:"mb-2","data-attr":"experiment-goal-type"},e.a.createElement("b",null,"Goal type"),e.a.createElement("div",{className:"text-muted"},O===v.D.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events")),e.a.createElement(z.a,{style:{display:"flex"},value:O,onChange:In,suffixIcon:e.a.createElement(Te.a,null),dropdownMatchSelectWidth:!1},e.a.createElement(z.a.Option,{value:v.D.TRENDS},e.a.createElement(E.a,null,e.a.createElement("span",null,e.a.createElement("b",null,"Trend")))),e.a.createElement(z.a.Option,{value:v.D.FUNNELS},e.a.createElement(E.a,null,e.a.createElement("span",null,e.a.createElement("b",null,"Conversion funnel"))))),e.a.createElement("div",{className:"my-4"},e.a.createElement("b",null,"Experiment goal"),O===v.D.TRENDS&&e.a.createElement("div",{className:"text-muted"},"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment.")),vn&&e.a.createElement(jt.a,{type:"info",className:"mt-3 mb-3"},"We can't detect any feature flag information for this target metric. Ensure that you're using the latest PostHog client libraries, and make sure you manually send feature flag information for server-side libraries if necessary."," ",e.a.createElement("a",{href:"https://posthog.com/docs/integrate/server/python#capture",target:"_blank"}," ","Read the docs for how to do this for server-side libraries.")),O===v.D.FUNNELS&&e.a.createElement(me.a,{bordered:!0,filters:Mt,setFilters:function(x){we({filters:x}),_e(x)},typeKey:"experiment-funnel-goal",mathAvailability:tt.b.None,hideDeleteBtn:Pn.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!Mn,seriesIndicatorType:"numeric",sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[N.a.EventProperties,N.a.PersonProperties,N.a.EventFeatureFlags,N.a.Cohorts,N.a.Elements]}),O===v.D.TRENDS&&e.a.createElement(me.a,{bordered:!0,filters:Rt,setFilters:function(x){we({filters:x}),_e(x)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,hideDeleteBtn:!0,propertiesTaxonomicGroupTypes:[N.a.EventProperties,N.a.PersonProperties,N.a.EventFeatureFlags,N.a.Cohorts,N.a.Elements]}),e.a.createElement(b.a,{className:"secondary-metrics"},e.a.createElement("div",{className:"flex flex-col"},e.a.createElement("div",null,e.a.createElement("b",null,"Secondary metrics"),e.a.createElement("span",{className:"text-muted ml-2"},"(optional)")),e.a.createElement("div",{className:"text-muted",style:{marginTop:4}},"Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "),e.a.createElement(Me,{onMetricsChange:function(x){return Nn(x)},initialMetrics:P})))),e.a.createElement(E.a,{span:12,className:"pl-4"},e.a.createElement("div",{className:"card-secondary mb-4","data-attr":"experiment-preview"},"Goal preview"),e.a.createElement(Ze.a,{disableHeader:O===v.D.TRENDS,disableTable:!0,disableCorrelationTable:!0})))),e.a.createElement(b.a,null,e.a.createElement(We.a,{className:"experiment-preview"},e.a.createElement(ye,{experiment:g,trendCount:ct,trendExposure:kt,funnelSampleSize:At,funnelEntrants:Lt,funnelConversionRate:ot}))))),e.a.createElement(_.a,{className:"float-right",type:"primary",htmlType:"submit"},"Save"))):s?e.a.createElement("div",{className:"view-experiment"},e.a.createElement(b.a,{className:"draft-header"},e.a.createElement(b.a,{justify:"space-between",align:"middle",className:"w-full pb-4"},e.a.createElement(E.a,null,e.a.createElement(b.a,null,e.a.createElement(vt.a,{style:{paddingRight:8},title:"".concat(s==null?void 0:s.name),buttons:e.a.createElement(e.a.Fragment,null,e.a.createElement(qt.a,{explicitValue:s.feature_flag_key,iconStyle:{color:"var(--muted-alt)"}},e.a.createElement("span",{className:"text-muted"},s.feature_flag_key)),e.a.createElement(ut.a,{style:{alignSelf:"center"},color:Vn[Vt()]},e.a.createElement("b",{className:"uppercase"},Vt())),p&&s.end_date&&e.a.createElement(ut.a,{style:{alignSelf:"center"},color:V?"green":"geekblue"},e.a.createElement("b",{className:"uppercase"},V?"Significant Results":"Results not significant")))})),e.a.createElement("span",{className:"exp-description"},s.start_date?e.a.createElement(rn.a,{multiline:!0,name:"description",value:s.description||"",placeholder:"Description (optional)",onSave:function(x){return bn({description:x})},maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):e.a.createElement(e.a.Fragment,null,s.description||"There is no description for this experiment."))),s&&!s.start_date&&e.a.createElement("div",{className:"flex items-center"},e.a.createElement(_.a,{type:"secondary",className:"mr-2",onClick:function(){return yn(!0)}},"Edit"),e.a.createElement(_.a,{type:"primary",onClick:function(){return hn()}},"Launch")),s&&s.start_date&&!s.end_date&&e.a.createElement(_.a,{type:"secondary",status:"danger",onClick:function(){return Dt()}},"Stop"),(s==null?void 0:s.end_date)&&Object(C.a)().isSameOrAfter(Object(C.a)(s.end_date),"day")&&!s.archived&&e.a.createElement(_.a,{type:"secondary",status:"danger",onClick:function(){return jn()}},e.a.createElement("b",null,"Archive")))),e.a.createElement(b.a,null,rt&&p&&V&&!s.end_date&&e.a.createElement(b.a,{align:"middle",className:"significant-results"},e.a.createElement(E.a,{span:20,style:{fontWeight:500,color:"#497342"}},e.a.createElement("div",null,"Experiment results are significant."," ",s.end_date?"":"You can end your experiment now or let it run until complete.")),e.a.createElement(E.a,{span:4},s.end_date?e.a.createElement(qe.a,{className:"close-button",onClick:function(){return it(!1)}}):e.a.createElement(_.a,{type:"primary",onClick:function(){return Dt()}},"End experiment"))),rt&&p&&!V&&!s.end_date&&e.a.createElement(b.a,{align:"top",className:"not-significant-results"},e.a.createElement(E.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"}},e.a.createElement("strong",null,"Your results are not statistically significant"),"."," ",Y," ",s!=null&&s.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",e.a.createElement("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations"}," ","experimentation guide"," "),"for more information."," "),e.a.createElement(E.a,{span:1},e.a.createElement(qe.a,{className:"close-button",onClick:function(){return it(!1)}}))),rt&&s.end_date&&e.a.createElement(b.a,{align:"top",className:"feature-flag-mods"},e.a.createElement(E.a,{span:23,style:{fontWeight:500}},e.a.createElement("strong",null,"Your experiment is complete, but the feature flag is still enabled.")," ","We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",e.a.createElement(Nt.a,{to:s.feature_flag?Z.a.featureFlag(s.feature_flag):void 0},e.a.createElement("b",null,"Adjust feature flag distribution"))),e.a.createElement(E.a,{span:1},e.a.createElement(qe.a,{className:"close-button",onClick:function(){return it(!1)}})))),e.a.createElement(b.a,null,e.a.createElement(pt.a,{className:"w-full",defaultActiveKey:"experiment-details"},e.a.createElement(pt.a.Panel,{header:e.a.createElement("b",null,"Experiment details"),key:"experiment-details"},e.a.createElement(b.a,null,e.a.createElement(E.a,{span:s!=null&&s.start_date?12:24},e.a.createElement(ye,{experiment:s,trendCount:ct,trendExposure:s==null?void 0:s.parameters.recommended_running_time,funnelSampleSize:s==null?void 0:s.parameters.recommended_sample_size,funnelConversionRate:ot,funnelEntrants:s!=null&&s.start_date?Ge:Lt})),!F&&!p&&s.start_date&&e.a.createElement(E.a,{span:12},e.a.createElement(be,{experiment:s})),(p||((u=s.secondary_metrics)===null||u===void 0?void 0:u.length)>0)&&e.a.createElement(E.a,{className:"secondary-progress",span:s!=null&&s.start_date?12:24},!!(s!=null&&s.secondary_metrics.length)&&e.a.createElement(E.a,{className:"border-b"},e.a.createElement(b.a,{align:"middle",justify:"space-between",className:"mb-2"},e.a.createElement(E.a,{className:"card-secondary",span:2*ue},"Secondary metrics"),s==null||(i=s.parameters)===null||i===void 0||(c=i.feature_flag_variants)===null||c===void 0?void 0:c.map(function(w,x){return e.a.createElement(E.a,{key:x,span:ue,style:{color:Object(wt.c)(B(w.key,O))}},e.a.createElement("span",{className:"text-sm"},Object(D.i)(w.key)))})),s.start_date?fn?e.a.createElement(je.a,{active:!0,paragraph:!1}):e.a.createElement(e.a.Fragment,null,s.secondary_metrics.map(function(w,x){var R,H;return e.a.createElement(b.a,{className:"border-t",key:x,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},e.a.createElement(E.a,{span:2*ue},Object(D.i)(w.name)),s==null||(R=s.parameters)===null||R===void 0||(H=R.feature_flag_variants)===null||H===void 0?void 0:H.map(function(ze,mt){return e.a.createElement(E.a,{key:mt,span:ue},q!=null&&q[x][ze.key]?w.filters.insight===v.D.FUNNELS?e.a.createElement(e.a.Fragment,null,((q==null?void 0:q[x][ze.key])*100).toFixed(1),"%"):e.a.createElement(e.a.Fragment,null,Object(D.P)(q==null?void 0:q[x][ze.key])):e.a.createElement(e.a.Fragment,null,"--"))}))})):e.a.createElement(e.a.Fragment,null,s.secondary_metrics.map(function(w,x){var R,H;return e.a.createElement(b.a,{className:"border-t",key:x,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},e.a.createElement(E.a,{span:2*ue},Object(D.i)(w.name)),s==null||(R=s.parameters)===null||R===void 0||(H=R.feature_flag_variants)===null||H===void 0?void 0:H.map(function(ze,mt){return e.a.createElement(E.a,{key:mt,span:ue},"--")}))}))),p&&e.a.createElement(E.a,{className:"mt-4"},e.a.createElement("div",{className:"mb-2"},e.a.createElement("b",null,"Experiment progress")),e.a.createElement(ft.a,{strokeWidth:20,showInfo:!1,percent:kn,strokeColor:"var(--success)"}),O===v.D.TRENDS&&s.start_date&&e.a.createElement(b.a,{justify:"space-between",className:"mt-2"},s.end_date?e.a.createElement("div",null,"Ran for"," ",e.a.createElement("b",null,Object(C.a)(s.end_date).diff(s.start_date,"day"))," ","days"):e.a.createElement("div",null,e.a.createElement("b",null,Object(C.a)().diff(s.start_date,"day"))," ","days running"),e.a.createElement("div",null,"Goal:"," ",e.a.createElement("b",null,s==null||(m=s.parameters)===null||m===void 0?void 0:m.recommended_running_time)," ","days")),O===v.D.FUNNELS&&e.a.createElement(b.a,{justify:"space-between",className:"mt-2"},s.end_date?e.a.createElement("div",null,"Saw"," ",e.a.createElement("b",null,Object(D.P)(Ge))," ","participants"):e.a.createElement("div",null,e.a.createElement("b",null,Object(D.P)(Ge))," ","participants seen"),e.a.createElement("div",null,"Goal:"," ",e.a.createElement("b",null,Object(D.P)((s==null||(h=s.parameters)===null||h===void 0?void 0:h.recommended_sample_size)||0))," ","participants"))))))),!(s!=null&&s.start_date)&&e.a.createElement("div",{className:"mt-4 w-full"},e.a.createElement(be,{experiment:s}))),e.a.createElement("div",{className:"experiment-result"},p?e.a.createElement(e.a.Fragment,null,e.a.createElement(b.a,{justify:"space-around",style:{flexFlow:"nowrap"}},Object.keys(p.probability).sort(function(w,x){return p.probability[x]-p.probability[w]}).map(function(w,x){return e.a.createElement(E.a,{key:x,className:"pr-4"},e.a.createElement("div",null,e.a.createElement("b",null,Object(D.i)(w))),O===v.D.TRENDS?e.a.createElement(b.a,null,e.a.createElement("b",{style:{paddingRight:4}},e.a.createElement(b.a,null,"action"in p.insight[0]&&e.a.createElement(an.a,{filter:p.insight[0].action}),e.a.createElement("span",{style:{paddingLeft:4}},"count:")))," ",G(w)," ",K&&x===0&&e.a.createElement(Ce.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher."},e.a.createElement(ge.a,{style:{padding:"4px 2px"}}))):e.a.createElement(b.a,null,e.a.createElement("b",{style:{paddingRight:4}},"Conversion rate:")," ",le(w),"%"),e.a.createElement(ft.a,{percent:Number((p.probability[w]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:Object(wt.c)(B(w,O))}),e.a.createElement("div",null,"Probability that this variant is the best:"," ",e.a.createElement("b",null,(p.probability[w]*100).toFixed(1),"%")))}))):F&&e.a.createElement("div",{className:"text-center"},e.a.createElement(je.a,{active:!0})),p?e.a.createElement(A.BindLogic,{logic:pe.c,props:{dashboardItemId:p.itemID,cachedInsight:{short_id:p.itemID,filters:$e($e($e({},p.filters),{},{insight:O,display:s.filters.display},O===v.D.FUNNELS&&{layout:fe.k.vertical,funnel_viz_type:v.z.Steps}),O===v.D.TRENDS&&{display:v.j.ActionsLineGraphCumulative}),result:p.insight,disable_baseline:!0},doNotLoad:!0}},e.a.createElement("div",{className:"mt-4"},e.a.createElement(Ze.a,{disableHeader:!0,disableCorrelationTable:O===v.D.FUNNELS,disableLastComputation:!0}))):s.start_date&&e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"no-experiment-results"},!F&&e.a.createElement("div",{className:"text-center"},e.a.createElement("b",null,"There are no results for this experiment yet."),e.a.createElement("div",{className:"text-sm "},!!Ft&&"".concat(Ft,". ")," ","Wait a bit longer for your users to be exposed to the experiment. Double check your feature flag implementation if you're still not seeing results.")))))):e.a.createElement(je.a,{active:!0}))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(Ue,ne,l){var dt=l("./node_modules/css-loader/dist/runtime/api.js");ne=dt(!1),ne.push([Ue.i,'.experiment-form .metrics-selection,.experiment-form .person-selection{border-top:1px solid var(--border);padding-top:1rem;width:100%}.experiment-form .person-selection{align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid var(--border);min-height:unset;background-color:var(--bg-light);padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(calc(90vh - 16rem),36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .LineGraph{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid var(--border)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{display:flex;align-items:center;height:3.5rem;padding:0 .5rem;background:#fff;border-bottom-width:1px;border-bottom-color:var(--border);border-top:1px solid var(--border);border-left:1px solid var(--border);border-right:1px solid var(--border)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:var(--danger)}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border);margin-bottom:1rem;width:100%}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid var(--border)}.view-experiment .exp-description{font-style:italic;color:var(--muted)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:var(--side);border:1px solid var(--border);width:100%;min-height:320px;font-size:24px}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:var(--side);color:var(--primary-alt);font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid var(--border);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid var(--border);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:var(--dark-grey)}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid var(--border)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),Ue.exports=ne}}]);
