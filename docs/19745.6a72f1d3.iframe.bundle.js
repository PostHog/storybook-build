"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[19745],{"./frontend/src/scenes/pipeline/PipelineNodeNew.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PipelineNodeNew:()=>PipelineNodeNew,scene:()=>scene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_NotFound__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip/index.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/types.ts"),_destinationsLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/pipeline/destinationsLogic.tsx"),_frontendAppsLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/scenes/pipeline/frontendAppsLogic.tsx"),_PipelineBatchExportConfiguration__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/scenes/pipeline/PipelineBatchExportConfiguration.tsx"),_PipelineNode__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/scenes/pipeline/PipelineNode.tsx"),_pipelineNodeNewLogic__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/scenes/pipeline/pipelineNodeNewLogic.tsx"),_PipelinePluginConfiguration__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/scenes/pipeline/PipelinePluginConfiguration.tsx"),_transformationsLogic__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/scenes/pipeline/transformationsLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/scenes/pipeline/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/scenes/pipeline/utils.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let paramsToProps=_ref=>{let{params:{stage,pluginIdOrBatchExportDestination}}=_ref,numericId=pluginIdOrBatchExportDestination&&/^\d+$/.test(pluginIdOrBatchExportDestination)?parseInt(pluginIdOrBatchExportDestination):void 0,pluginId=numericId&&!isNaN(numericId)?numericId:null,batchExportDestination=pluginId?null:null!=pluginIdOrBatchExportDestination?pluginIdOrBatchExportDestination:null;return{stage:_PipelineNode__WEBPACK_IMPORTED_MODULE_12__.PIPELINE_TAB_TO_NODE_STAGE[stage+"s"]||null,pluginId:pluginId,batchExportDestination:batchExportDestination}},scene={component:PipelineNodeNew,logic:_pipelineNodeNewLogic__WEBPACK_IMPORTED_MODULE_13__.Q,paramsToProps};function convertPluginToTableEntry(plugin){return{backend:_types__WEBPACK_IMPORTED_MODULE_16__.b.Plugin,id:plugin.id,name:plugin.name,description:plugin.description||"",plugin:plugin,url:plugin.url}}function convertBatchExportToTableEntry(service){return{backend:_types__WEBPACK_IMPORTED_MODULE_16__.b.BatchExport,id:service,name:service,description:`${service} batch export`,url:(0,_utils__WEBPACK_IMPORTED_MODULE_17__.n1)(service)}}function PipelineNodeNew(){let params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stage,pluginId,batchExportDestination}=paramsToProps({params});if(!stage)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_components_NotFound__WEBPACK_IMPORTED_MODULE_1__.T,{object:"pipeline app stage"});if(pluginId){let res=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_PipelinePluginConfiguration__WEBPACK_IMPORTED_MODULE_14__.s,{stage:stage,pluginId:pluginId});return stage===_types__WEBPACK_IMPORTED_MODULE_8__.We.Destination?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_2__.E,{feature:_types__WEBPACK_IMPORTED_MODULE_8__.P$.DATA_PIPELINES,children:res}):res}return batchExportDestination?stage!==_types__WEBPACK_IMPORTED_MODULE_8__.We.Destination?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_components_NotFound__WEBPACK_IMPORTED_MODULE_1__.T,{object:batchExportDestination}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_2__.E,{feature:_types__WEBPACK_IMPORTED_MODULE_8__.P$.DATA_PIPELINES,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_PipelineBatchExportConfiguration__WEBPACK_IMPORTED_MODULE_11__.B,{service:batchExportDestination})}):stage===_types__WEBPACK_IMPORTED_MODULE_8__.We.Transformation?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(TransformationOptionsTable,{}):stage===_types__WEBPACK_IMPORTED_MODULE_8__.We.Destination?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_2__.E,{feature:_types__WEBPACK_IMPORTED_MODULE_8__.P$.DATA_PIPELINES,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(DestinationOptionsTable,{})}):stage===_types__WEBPACK_IMPORTED_MODULE_8__.We.SiteApp?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(SiteAppOptionsTable,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_components_NotFound__WEBPACK_IMPORTED_MODULE_1__.T,{object:"pipeline new options"})}function TransformationOptionsTable(){let{plugins,loading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_transformationsLogic__WEBPACK_IMPORTED_MODULE_15__.P),targets=Object.values(plugins).map(convertPluginToTableEntry);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(NodeOptionsTable,{stage:_types__WEBPACK_IMPORTED_MODULE_8__.We.Transformation,targets:targets,loading:loading})}function DestinationOptionsTable(){let{batchExportServiceNames}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_pipelineNodeNewLogic__WEBPACK_IMPORTED_MODULE_13__.Q),{plugins,loading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_destinationsLogic__WEBPACK_IMPORTED_MODULE_9__.w),pluginTargets=Object.values(plugins).map(convertPluginToTableEntry),batchExportTargets=Object.values(batchExportServiceNames).map(convertBatchExportToTableEntry),targets=[...batchExportTargets,...pluginTargets];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(NodeOptionsTable,{stage:_types__WEBPACK_IMPORTED_MODULE_8__.We.Destination,targets:targets,loading:loading})}function SiteAppOptionsTable(){let{plugins,loading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_frontendAppsLogic__WEBPACK_IMPORTED_MODULE_10__.$),targets=Object.values(plugins).map(convertPluginToTableEntry);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(NodeOptionsTable,{stage:_types__WEBPACK_IMPORTED_MODULE_8__.We.SiteApp,targets:targets,loading:loading})}function NodeOptionsTable(_ref2){let{stage,targets,loading}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_4__.g,{dataSource:targets,size:"small",loading:loading,columns:[{title:"Name",sticky:!0,render:function RenderName(_,target){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_5__.i,{to:target.url,target:target.backend==_types__WEBPACK_IMPORTED_MODULE_16__.b.Plugin?"_blank":void 0,title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_6__.u,{title:`Click to view ${target.backend==_types__WEBPACK_IMPORTED_MODULE_16__.b.Plugin?"source code":"documentation"}`,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("span",{children:target.name})})}),description:target.description})}},{title:"App",render:function RenderAppInfo(_,target){return target.backend===_types__WEBPACK_IMPORTED_MODULE_16__.b.Plugin?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_utils__WEBPACK_IMPORTED_MODULE_17__.Wf,{plugin:target.plugin}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_utils__WEBPACK_IMPORTED_MODULE_17__.oe,{type:target.id})}},{title:"Actions",width:100,align:"right",render:function RenderActions(_,target){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_3__.J,{type:"primary","data-attr":`new-${stage}-${target.id}`,to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.pipelineNodeNew(stage,target.id),children:"Create"})}}]})})}}}]);