(window.webpackJsonp=window.webpackJsonp||[]).push([[263],{"./frontend/src/scenes/instance/Licenses/index.tsx":function(Q,O,n){"use strict";n.r(O),n.d(O,"scene",function(){return J}),n.d(O,"Licenses",function(){return j});var C=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),A=n.n(C),h=n("./node_modules/core-js/modules/es.array.filter.js"),X=n.n(h),T=n("./node_modules/core-js/modules/es.object.to-string.js"),Z=n.n(T),B=n("./node_modules/core-js/modules/es.array.sort.js"),w=n.n(B),I=n("./node_modules/core-js/modules/es.array.slice.js"),k=n.n(I),W=n("./node_modules/core-js/modules/es.array.map.js"),q=n.n(W),K=n("./node_modules/core-js/modules/es.function.name.js"),ee=n.n(K),U=n("./node_modules/react/index.js"),e=n.n(U),R=n("./frontend/src/lib/components/LemonButton/More.tsx"),u=n("./node_modules/antd/es/form/index.js"),p=n("./node_modules/antd/es/alert/index.js"),x=n("./node_modules/antd/es/input/index.js"),b=n("./node_modules/antd/es/button/index.js"),E=n("./frontend/src/scenes/instance/Licenses/licenseLogic.ts"),v=n("./node_modules/kea/lib/index.esm.js"),y=n("./frontend/src/lib/utils.tsx"),F=n("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),z=n("./frontend/src/lib/components/PageHeader.tsx"),V=n("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),S=n("./frontend/src/lib/components/Tooltip.tsx"),H=n("./frontend/src/lib/components/LemonTable/index.ts"),M=n("./frontend/src/lib/components/LemonButton/index.ts"),N=n("./frontend/src/scenes/organizationLogic.tsx"),Y=n("./frontend/src/lib/components/LemonModal/index.ts"),g=n("./frontend/src/lib/dayjs.ts"),J={component:j,logic:E.b};function $(_){var P=_.licenses,r=_.onCancel,i=_.onOk,f=Object(v.useValues)(N.a),d=f.currentOrganization,m=P.filter(function(s){return Object(g.a)().isBefore(s.valid_until)}).length>1,o=((d==null?void 0:d.teams)||[]).filter(function(s){return!s.is_demo}).sort(function(s,D){return s.id-D.id}),c=!m&&o.slice(1,o.length).length>0;return e.a.createElement(Y.a,{visible:!0,onCancel:r,title:"Are you sure you want to deactivate your license?",footer:e.a.createElement(e.a.Fragment,null,e.a.createElement(M.a,{form:"new-dashboard-form",type:"secondary","data-attr":"deactivate-license-cancel",style:{marginRight:"0.5rem"},onClick:r},"Cancel"),e.a.createElement(M.a,{"data-attr":"deactivate-license-proceed",type:"primary",status:"danger",onClick:i},c?e.a.createElement(e.a.Fragment,null,"Deactivate license & delete ",o.length," project(s)"):"Deactivate license"))},e.a.createElement("ul",{style:{margin:0,paddingLeft:"1.5rem"}},m?e.a.createElement("li",null,"You will ",e.a.createElement("strong",null,"keep")," all premium features available with your other valid license."):e.a.createElement("li",null,"You will ",e.a.createElement("strong",null,"IMMEDIATELY")," lose access to all premium features such as"," ",e.a.createElement("strong",null,"multiple projects"),", ",e.a.createElement("strong",null,"single sign on"),","," ",e.a.createElement("strong",null,"group analytics"),", ",e.a.createElement("strong",null,"multivariate feature flags")," and many more."),c&&e.a.createElement("li",null,"We will ",e.a.createElement("strong",{style:{color:"var(--danger)"}},"DELETE")," the following projects:",e.a.createElement("ul",null,o.map(function(s){return e.a.createElement("li",{key:s.id},e.a.createElement("strong",null,s.name))})),"To keep one of these projects instead, remove all other projects first."),e.a.createElement("li",null,"You will immediately be billed for usage in the current period, if any.")))}function j(){var _=u.a.useForm(),P=A()(_,1),r=P[0],i=Object(v.useValues)(E.b),f=i.licenses,d=i.licensesLoading,m=i.error,o=i.showConfirmCancel,c=Object(v.useActions)(E.b),s=c.createLicense,D=c.deleteLicense,L=c.setShowConfirmCancel,G=[{title:"Active",render:function(l,t){return Object(E.a)(t)?"expired":"active"}},{title:"Valid until",render:function(l,t){return Object(y.N)(t.valid_until)}},{title:"Plan",dataIndex:"plan"},{title:function(){return e.a.createElement(S.a,{placement:"right",title:"Maximum number of team members that you can have across all organizations with your current license."},"Max #\xA0of team members",e.a.createElement(V.a,{className:"info-indicator"}))},render:function(l,t){return t.max_users===null?"Unlimited":t.max_users}},{title:"Key",render:function(l,t){return e.a.createElement(F.a,null,t.key)}},{title:"License added on",render:function(l,t){return Object(y.N)(t.created_at)}},{width:0,render:function(l,t){return Object(g.a)().isAfter(t.valid_until)?null:e.a.createElement(R.a,{overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(M.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return L(t)},fullWidth:!0},"Deactivate license"))})}}];return e.a.createElement("div",null,o&&e.a.createElement($,{licenses:f,onCancel:function(){return L(null)},onOk:function(){return D(o)}}),e.a.createElement(z.a,{title:"Licenses",caption:e.a.createElement(e.a.Fragment,null,"Here you can add and manage your PostHog enterprise licenses. When you activate a license key, enterprise functionality will be enabled immediately. Contact"," ",e.a.createElement("a",{href:"mailto:sales@posthog.com"},"sales@posthog.com")," to buy a license or if you have any issues with a license.")}),m&&e.a.createElement(p.a,{message:m.detail||e.a.createElement("span",null,"Could not validate license key. Please try again or contact us."),type:"error",style:{marginBottom:"1em"}}),e.a.createElement(u.a,{form:r,name:"horizontal_login",layout:"inline",onFinish:function(l){return s({key:l.key})},style:{marginBottom:"1rem"}},e.a.createElement(u.a.Item,{name:"key",rules:[{required:!0,message:"Please input a license key!"}]},e.a.createElement(x.a,{placeholder:"License key",style:{minWidth:400}})),e.a.createElement(u.a.Item,{shouldUpdate:!0},function(){return e.a.createElement(b.a,{type:"primary",htmlType:"submit",disabled:!r.isFieldsTouched(!0)||!!r.getFieldsError().filter(function(a){var l=a.errors;return l.length}).length},"Activate License Key")})),e.a.createElement(H.a,{"data-attr":"license-table",size:"small",rowKey:"id",rowClassName:"cursor-pointer",dataSource:f,columns:G,loading:d}))}}}]);
