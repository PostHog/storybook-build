"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[47124],{"../../frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Actions:()=>Actions,Columnar:()=>Columnar,EventsFree:()=>EventsFree,EventsPremium:()=>EventsPremium,ForceColumnar:()=>ForceColumnar,ForceNonColumnar:()=>ForceNonColumnar,Properties:()=>Properties,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_TaxonomicFilter_mocks_taxonomicFilterMocksDecorator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/__mocks__/taxonomicFilterMocksDecorator.ts"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_mocks_features__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/mocks/features.ts"),_models_actionsModel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/models/actionsModel.ts"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/types.ts"),_infiniteListLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/infiniteListLogic.ts"),_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let __WEBPACK_DEFAULT_EXPORT__={title:"Filters/Taxonomic Filter",component:_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__.I,decorators:[lib_components_TaxonomicFilter_mocks_taxonomicFilterMocksDecorator__WEBPACK_IMPORTED_MODULE_1__.p],parameters:{testOptions:{waitForSelector:".definition-popover"},docs:{description:{component:"Taxonomic Filter allows users to select from various categories of data in PostHog, like events, actions, properties, etc. It supports both horizontal and vertical (columnar) layouts."}}},tags:["autodocs"]},EventsFree=args=>{(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_models_actionsModel__WEBPACK_IMPORTED_MODULE_4__.D);let{setIndex}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)((0,_infiniteListLogic__WEBPACK_IMPORTED_MODULE_6__.N)({...args,taxonomicFilterLogicKey:args.taxonomicFilterLogicKey,listGroupType:lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events}));return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{setIndex(1)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"w-fit border rounded p-2 bg-surface-primary",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__.I,{...args})})};EventsFree.args={taxonomicFilterLogicKey:"events-free",taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Actions]},EventsFree.parameters={docs:{description:{story:"Basic TaxonomicFilter with Events and Actions tabs in the free version of PostHog."}}};let EventsPremium=args=>((0,_mocks_features__WEBPACK_IMPORTED_MODULE_9__.y)([_types__WEBPACK_IMPORTED_MODULE_5__.P$.INGESTION_TAXONOMY]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(EventsFree,{...args}));EventsPremium.args={taxonomicFilterLogicKey:"events-premium",taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Actions]},EventsPremium.parameters={docs:{description:{story:"TaxonomicFilter with Events and Actions tabs in the premium version of PostHog with INGESTION_TAXONOMY feature enabled."}}};let Actions=args=>{(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_models_actionsModel__WEBPACK_IMPORTED_MODULE_4__.D);let{setIndex}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)((0,_infiniteListLogic__WEBPACK_IMPORTED_MODULE_6__.N)({...args,taxonomicFilterLogicKey:args.taxonomicFilterLogicKey,listGroupType:lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Actions}));return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{setIndex(0)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"w-fit border rounded p-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__.I,{...args})})};Actions.args={taxonomicFilterLogicKey:"actions",taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Actions]},Actions.parameters={docs:{description:{story:"TaxonomicFilter showing only Actions tab."}}};let Properties=args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"w-fit border rounded p-2 bg-surface-primary",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__.I,{...args})});Properties.args={taxonomicFilterLogicKey:"properties",taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.EventProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.PersonProperties]},Properties.parameters={docs:{description:{story:"TaxonomicFilter showing Event Properties and Person Properties tabs."}}};let Columnar=args=>{(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_models_actionsModel__WEBPACK_IMPORTED_MODULE_4__.D);let{setIndex}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)((0,_infiniteListLogic__WEBPACK_IMPORTED_MODULE_6__.N)({...args,taxonomicFilterLogicKey:args.taxonomicFilterLogicKey,listGroupType:lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events}));return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{setIndex(1)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"w-fit border rounded p-2 bg-surface-primary",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__.I,{...args})})};Columnar.args={taxonomicFilterLogicKey:"columnar-five-groups",taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Actions,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.EventProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Cohorts]},Columnar.parameters={docs:{description:{story:"Automatically switches to columnar/vertical layout when there are 5 or more group types."}}};let ForceColumnar=args=>{(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_models_actionsModel__WEBPACK_IMPORTED_MODULE_4__.D);let{setIndex}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)((0,_infiniteListLogic__WEBPACK_IMPORTED_MODULE_6__.N)({...args,taxonomicFilterLogicKey:args.taxonomicFilterLogicKey,listGroupType:lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events}));return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{setIndex(1)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"w-fit border rounded p-2 bg-surface-primary",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__.I,{...args})})};ForceColumnar.args={taxonomicFilterLogicKey:"force-columnar-three-groups",taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Actions,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.EventProperties],useVerticalLayout:!0},ForceColumnar.parameters={docs:{description:{story:"Forces columnar/vertical layout even with only 3 group types by setting useVerticalLayout to true."}}};let ForceNonColumnar=args=>{(0,kea__WEBPACK_IMPORTED_MODULE_0__.useMountedLogic)(_models_actionsModel__WEBPACK_IMPORTED_MODULE_4__.D);let{setIndex}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)((0,_infiniteListLogic__WEBPACK_IMPORTED_MODULE_6__.N)({...args,taxonomicFilterLogicKey:args.taxonomicFilterLogicKey,listGroupType:lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events}));return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{setIndex(1)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"w-fit border rounded p-2 bg-surface-primary",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_7__.I,{...args})})};ForceNonColumnar.args={taxonomicFilterLogicKey:"force-non-columnar-six-groups",taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Events,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Actions,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.EventProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Cohorts,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_2__.t.Elements],useVerticalLayout:!1},ForceNonColumnar.parameters={docs:{description:{story:"Forces horizontal layout even with 6 group types by setting useVerticalLayout to false."}}},EventsFree.parameters={...EventsFree.parameters,docs:{...EventsFree.parameters?.docs,source:{originalSource:'args => {\n  useMountedLogic(actionsModel);\n  const {\n    setIndex\n  } = useActions(infiniteListLogic({\n    ...args,\n    taxonomicFilterLogicKey: args.taxonomicFilterLogicKey as string,\n    listGroupType: TaxonomicFilterGroupType.Events\n  }));\n  useEffect(() => {\n    // Highlight the second item, as the first one is "All events", which doesn\'t have a definition to show\n    // - we do want to show the definition popover here too\n    setIndex(1);\n  }, []);\n  return <div className="w-fit border rounded p-2 bg-surface-primary">\n            <TaxonomicFilter {...args} />\n        </div>;\n}',...EventsFree.parameters?.docs?.source}}},EventsPremium.parameters={...EventsPremium.parameters,docs:{...EventsPremium.parameters?.docs,source:{originalSource:"args => {\n  useAvailableFeatures([AvailableFeature.INGESTION_TAXONOMY]);\n  return <EventsFree {...args} />;\n}",...EventsPremium.parameters?.docs?.source}}},Actions.parameters={...Actions.parameters,docs:{...Actions.parameters?.docs,source:{originalSource:'args => {\n  useMountedLogic(actionsModel);\n  const {\n    setIndex\n  } = useActions(infiniteListLogic({\n    ...args,\n    taxonomicFilterLogicKey: args.taxonomicFilterLogicKey as string,\n    listGroupType: TaxonomicFilterGroupType.Actions\n  }));\n  useEffect(() => {\n    // Highlight the second item, as the first one is "All events", which doesn\'t have a definition to show\n    // - we do want to show the definition popover here too\n    setIndex(0);\n  }, []);\n  return <div className="w-fit border rounded p-2">\n            <TaxonomicFilter {...args} />\n        </div>;\n}',...Actions.parameters?.docs?.source}}},Properties.parameters={...Properties.parameters,docs:{...Properties.parameters?.docs,source:{originalSource:'args => {\n  return <div className="w-fit border rounded p-2 bg-surface-primary">\n            <TaxonomicFilter {...args} />\n        </div>;\n}',...Properties.parameters?.docs?.source}}},Columnar.parameters={...Columnar.parameters,docs:{...Columnar.parameters?.docs,source:{originalSource:'args => {\n  useMountedLogic(actionsModel);\n  const {\n    setIndex\n  } = useActions(infiniteListLogic({\n    ...args,\n    taxonomicFilterLogicKey: args.taxonomicFilterLogicKey as string,\n    listGroupType: TaxonomicFilterGroupType.Events\n  }));\n  useEffect(() => {\n    setIndex(1);\n  }, []);\n  return <div className="w-fit border rounded p-2 bg-surface-primary">\n            <TaxonomicFilter {...args} />\n        </div>;\n}',...Columnar.parameters?.docs?.source},description:{story:"This story demonstrates the automatic columnar layout that's triggered when there are more than 4 group types.\nThe layout switches from horizontal tabs to a vertical/columnar layout to better organize the many categories.",...Columnar.parameters?.docs?.description}}},ForceColumnar.parameters={...ForceColumnar.parameters,docs:{...ForceColumnar.parameters?.docs,source:{originalSource:'args => {\n  useMountedLogic(actionsModel);\n  const {\n    setIndex\n  } = useActions(infiniteListLogic({\n    ...args,\n    taxonomicFilterLogicKey: args.taxonomicFilterLogicKey as string,\n    listGroupType: TaxonomicFilterGroupType.Events\n  }));\n  useEffect(() => {\n    setIndex(1);\n  }, []);\n  return <div className="w-fit border rounded p-2 bg-surface-primary">\n            <TaxonomicFilter {...args} />\n        </div>;\n}',...ForceColumnar.parameters?.docs?.source},description:{story:"This story demonstrates forcing the columnar/vertical layout even when there are fewer than 5 group types.\nThis is done by setting the `useVerticalLayout` prop to true.",...ForceColumnar.parameters?.docs?.description}}},ForceNonColumnar.parameters={...ForceNonColumnar.parameters,docs:{...ForceNonColumnar.parameters?.docs,source:{originalSource:'args => {\n  useMountedLogic(actionsModel);\n  const {\n    setIndex\n  } = useActions(infiniteListLogic({\n    ...args,\n    taxonomicFilterLogicKey: args.taxonomicFilterLogicKey as string,\n    listGroupType: TaxonomicFilterGroupType.Events\n  }));\n  useEffect(() => {\n    setIndex(1);\n  }, []);\n  return <div className="w-fit border rounded p-2 bg-surface-primary">\n            <TaxonomicFilter {...args} />\n        </div>;\n}',...ForceNonColumnar.parameters?.docs?.source},description:{story:"This story demonstrates forcing a horizontal layout even when there are many group types.\nThis is done by setting the `useVerticalLayout` prop to false.",...ForceNonColumnar.parameters?.docs?.description}}};let __namedExportsOrder=["EventsFree","EventsPremium","Actions","Properties","Columnar","ForceColumnar","ForceNonColumnar"]},"../../frontend/src/lib/components/TaxonomicFilter/__mocks__/taxonomicFilterMocksDecorator.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>taxonomicFilterMocksDecorator});var _mocks_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/mocks/browser.tsx"),_test_mocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/test/mocks.ts");let taxonomicFilterMocksDecorator=(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_0__.x8)({get:{"/api/projects/:team_id/actions":{results:[_test_mocks__WEBPACK_IMPORTED_MODULE_1__.Jq]},"/api/environments/:team_id/persons/properties":[{id:1,name:"location",count:1},{id:2,name:"role",count:2},{id:3,name:"height",count:3},{id:4,name:"$browser",count:4}],"/api/projects/:team_id/property_definitions":[{name:"file_count",count:205},{name:"industry",count:205},{name:"name",count:205},{name:"plan",count:205},{name:"team_size",count:205},{name:"used_mb",count:205}],"/api/projects/:team_id/event_definitions":[{id:"a",name:"signed up",description:"signed up",count:101},{id:"b",name:"viewed insights",description:"signed up",count:1,verified:!0},{id:"c",name:"logged out",description:"signed up",count:103}],"/api/projects/:team_id/cohorts/":[{id:1,name:"Properties Cohort",count:1,groups:[{id:"a",name:"Properties Group",count:1,matchType:"properties"}]},{id:2,name:"Entities Cohort",count:1,groups:[{id:"b",name:"Entities Group",count:1,matchType:"entities"}]}]}})},"../../frontend/src/test/mocks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Eu:()=>mockIntegration,Jq:()=>mockActionDefinition,lI:()=>createMockSubscription,y5:()=>mockSlackChannels});var lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/constants.tsx"),scenes_cohorts_CohortFilters_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/scenes/cohorts/CohortFilters/types.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/types.ts");["event1","test event","$click","$autocapture","search term","other event",...Array(150)].map((name,index)=>({id:`uuid-${index}-foobar`,name:name||`misc-${index}-generated`,description:`${name||"name generation"} is the best!`,tags:[]}));let mockEventPropertyDefinition={id:"017e8d9e-4241-0000-57ad-3a7237ffdb8e",name:"$active_feature_flags",description:"",tags:[],is_numerical:!1,updated_at:"2022-01-24T21:32:38.359756Z",updated_by:null,is_seen_on_filtered_events:!0,property_type:void 0};["prop1","purchase_value","$click","$browser","browser_no_dollar_not_on_event","is_admin",...Array(50)].map((name,index)=>({...mockEventPropertyDefinition,id:`uuid-${index}-foobar`,name:name||`misc-${index}-generated`,description:`${name||"name generation"} is the best!`,is_seen_on_filtered_events:(name||"").includes("$")})),["$session_duration","$initial_utm_source"].map(name=>({...mockEventPropertyDefinition,id:name,name:name,description:`${name} is the best!`}));let mockActionDefinition={id:3,name:"Action with a moderately long name",post_to_slack:!1,slack_message_format:"",steps:[{id:3,event:"$rageclick",tag_name:"div",text:null,href:null,selector:".buy-now-important-on-sale-button",url:"test",name:"Rage",url_matching:"contains",properties:[]},{id:4,event:null,properties:[{type:"property",key:"$geoip_country_code",value:["US","DE"],operator:"exact"}]}],created_at:"2022-01-24T21:32:38.360176Z",deleted:!1,is_calculating:!1,last_calculated_at:"2022-01-24T21:32:38.359756Z",team_id:1,created_by:null,pinned_at:null};lib_constants__WEBPACK_IMPORTED_MODULE_1__.pt,_types__WEBPACK_IMPORTED_MODULE_3__.FT.Person,_types__WEBPACK_IMPORTED_MODULE_3__.WV.Exact,_types__WEBPACK_IMPORTED_MODULE_3__.J2.Or,_types__WEBPACK_IMPORTED_MODULE_3__.J2.Or,scenes_cohorts_CohortFilters_types__WEBPACK_IMPORTED_MODULE_2__.y4.Behavioral,_types__WEBPACK_IMPORTED_MODULE_3__.G2.PerformEvent,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_0__.t.Events,_types__WEBPACK_IMPORTED_MODULE_3__.Xy.Day;let mockSubscription={id:1,title:"My example subscription",target_type:"email",target_value:"ben@posthog.com,geoff@other-company.com",frequency:"monthly",interval:2,start_date:"2022-01-01T00:09:00",byweekday:["wednesday"],bysetpos:1,summary:"sent every month on the first wednesday",created_at:"2022-01-01T00:09:00",updated_at:"2022-01-01T00:09:00"},createMockSubscription=function(){let args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...mockSubscription,...args}},mockIntegration={id:1,kind:"slack",config:{team:{id:"123",name:"PostHog"}},icon_url:"",display_name:"",created_at:"2022-01-01T00:09:00",created_by:{id:0,uuid:"1234",distinct_id:"1234",first_name:"Tim",email:"tim@posthog.com"}},mockSlackChannels=[{id:"C1",name:"general",is_private:!1,is_ext_shared:!1,is_member:!1},{id:"C2",name:"dev",is_private:!1,is_ext_shared:!1,is_member:!0},{id:"C3",name:"pineapple-conspiracies",is_private:!0,is_ext_shared:!1,is_member:!0},{id:"C4",name:"external-community",is_private:!1,is_ext_shared:!0,is_member:!1}]}}]);