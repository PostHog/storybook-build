"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[60954],{"../../frontend/src/scenes/data-pipelines/DataPipelinesScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DataPipelinesScene:()=>DataPipelinesScene,dataPipelinesSceneLogic:()=>dataPipelinesSceneLogic,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),ActivityLog=__webpack_require__("../../frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),LemonTabs=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),types=__webpack_require__("../../frontend/src/types.ts"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.20.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),ProductIntroduction=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),hog_function_utils=__webpack_require__("../../frontend/src/scenes/hog-functions/hog-function-utils.ts"),hogFunctionListLogic=__webpack_require__("../../frontend/src/scenes/hog-functions/list/hogFunctionListLogic.tsx"),HogFunctionsList=__webpack_require__("../../frontend/src/scenes/hog-functions/list/HogFunctionsList.tsx"),HogFunctionTemplateList=__webpack_require__("../../frontend/src/scenes/hog-functions/list/HogFunctionTemplateList.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let MAPPING={destination:{key:types.Md.PIPELINE_DESTINATIONS,description:"Destinations allow you to send your data to external systems."},transformation:{key:types.Md.PIPELINE_TRANSFORMATIONS,description:"Transformations let you modify, filter, and enrich event data to improve data quality, privacy, and consistency."},site_app:{key:types.Md.SITE_APPS,description:"Site apps allow you to add custom functionality to your website using PostHog."}};function DataPipelinesHogFunctions(_ref){let{kind,additionalKinds}=_ref,humanizedKind=(0,hog_function_utils.S)(kind),logicKey=`data-pipelines-hog-functions-${kind}`,{hogFunctions,loading}=(0,index_esm.useValues)((0,hogFunctionListLogic.aA)({logicKey,type:kind,additionalTypes:additionalKinds})),newButton=(0,jsx_runtime.jsxs)(src.Jp,{to:urls.j.dataPipelinesNew(kind),type:"primary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),size:"small",children:["New ",humanizedKind]}),productInfoMapping=MAPPING[kind];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:newButton}),productInfoMapping?(0,jsx_runtime.jsx)(ProductIntroduction.C,{productName:`Pipeline ${humanizedKind}s`,thingName:humanizedKind,productKey:productInfoMapping.key,description:productInfoMapping.description,docsURL:"https://posthog.com/docs/cdp",actionElementOverride:newButton,isEmpty:0===hogFunctions.length&&!loading}):null,(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:logicKey,type:kind,additionalTypes:additionalKinds}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("h2",{className:"mt-4",children:["Create a new ",humanizedKind]}),(0,jsx_runtime.jsx)(HogFunctionTemplateList.a,{defaultFilters:{},type:kind,additionalTypes:additionalKinds})]})]})]})}var LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonMenu=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonMenu/index.ts"),DataWarehouseManagedSourcesTable=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseManagedSourcesTable.tsx"),DataWarehouseSelfManagedSourcesTable=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseSelfManagedSourcesTable.tsx");function Section(_ref){let{title,to,children}=_ref;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(src.rU,{to:to,children:(0,jsx_runtime.jsx)("h2",{children:title})}),(0,jsx_runtime.jsx)("div",{className:"deprecated-space-y-2",children:children})]})}function DataPipelinesOverview(){let menuItems=[{label:"Source",to:urls.j.dataPipelinesNew("source"),"data-attr":"data-warehouse-data-pipelines-overview-new-source"},{label:"Transformation",to:urls.j.dataPipelinesNew("transformation")},{label:"Destination",to:urls.j.dataPipelinesNew("destination")}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsx)("div",{className:"flex items-center m-2 shrink-0",children:(0,jsx_runtime.jsx)(LemonMenu.d,{items:menuItems,children:(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"new-pipeline-button",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),size:"small",type:"primary",children:"New"})})})}),(0,jsx_runtime.jsxs)("div",{className:"deprecated-space-y-4",children:[(0,jsx_runtime.jsx)(Section,{title:"Managed sources",to:urls.j.pipeline(types.J9.Sources),children:(0,jsx_runtime.jsx)(DataWarehouseManagedSourcesTable.lL,{})}),(0,jsx_runtime.jsx)(Section,{title:"Self-managed sources",to:urls.j.pipeline(types.J9.Sources),children:(0,jsx_runtime.jsx)(DataWarehouseSelfManagedSourcesTable.T,{})}),(0,jsx_runtime.jsxs)(Section,{title:"Transformations",to:urls.j.pipeline(types.J9.Transformations),children:[(0,jsx_runtime.jsx)("p",{children:"Modify and enrich your incoming data. Only active transformations are shown here."}),(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:"transformation",type:"transformation",hideFeedback:!0})]}),(0,jsx_runtime.jsxs)(Section,{title:"Destinations",to:urls.j.pipeline(types.J9.Destinations),children:[(0,jsx_runtime.jsx)("p",{children:"Send your data to destinations in real time or with batch exports. Only active Destinations are shown here."}),(0,jsx_runtime.jsx)(HogFunctionsList.k,{logicKey:"destination",type:"destination",extraControls:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary",size:"small",to:urls.j.dataPipelinesNew("destination"),children:"New destination"})}),hideFeedback:!0})]})]})]})}var DataPipelinesSources=__webpack_require__("../../frontend/src/scenes/data-pipelines/DataPipelinesSources.tsx");let DATA_PIPELINES_SCENE_TABS=["overview","sources","transformations","destinations","site_apps","history"],dataPipelinesSceneLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.path)(()=>["scenes","data-pipelines","dataPipelinesSceneLogic"]),(0,index_esm.actions)({setCurrentTab:tab=>({tab})}),(0,index_esm.reducers)(()=>({currentTab:["overview",{setCurrentTab:(_,_ref)=>{let{tab}=_ref;return tab}}]})),(0,index_esm.selectors)({logicProps:[()=>[(_,props)=>props],props=>props],breadcrumbs:[()=>[(_,props)=>props],_ref2=>{let{kind}=_ref2;return[{key:sceneTypes.x.DataPipelines,name:"Data pipelines"},{key:sceneTypes.x.DataPipelines,name:(0,utils.fm)(kind)}]}]}),(0,index_esm.listeners)({setCurrentTab:_ref3=>{let{tab}=_ref3;lib.router.actions.push(urls.j.dataPipelines(tab))}}),(0,lib.urlToAction)(_ref4=>{let{actions,values}=_ref4;return{[urls.j.dataPipelines(":kind")]:_ref5=>{let{kind}=_ref5,possibleTab=null!=kind?kind:"overview",tab=DATA_PIPELINES_SCENE_TABS.includes(possibleTab)?possibleTab:"overview";tab!==values.currentTab&&actions.setCurrentTab(tab)}}})]),scene={component:DataPipelinesScene,logic:dataPipelinesSceneLogic,paramsToProps:_ref7=>{let{params:{kind}}=_ref7;return{kind}}};function DataPipelinesScene(){let{currentTab}=(0,index_esm.useValues)(dataPipelinesSceneLogic),{setCurrentTab}=(0,index_esm.useActions)(dataPipelinesSceneLogic),tabs=[{label:"Overview",key:"overview",content:(0,jsx_runtime.jsx)(DataPipelinesOverview,{})},{label:"Sources",key:"sources",content:(0,jsx_runtime.jsx)(DataPipelinesSources.J,{})},{label:"Transformations",key:"transformations",content:(0,jsx_runtime.jsx)(DataPipelinesHogFunctions,{kind:"transformation"})},{label:"Destinations",key:"destinations",content:(0,jsx_runtime.jsx)(DataPipelinesHogFunctions,{kind:"destination",additionalKinds:["site_destination"]})},{label:"Apps",key:"site_apps",content:(0,jsx_runtime.jsx)(DataPipelinesHogFunctions,{kind:"site_app"})},{label:"History",key:"history",content:(0,jsx_runtime.jsx)(ActivityLog.DA,{scope:[types.jc.HOG_FUNCTION]})}];return(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:currentTab,tabs:tabs,onChange:setCurrentTab})}},"../../frontend/src/scenes/data-pipelines/DataPipelinesSources.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>DataPipelinesSources});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.20.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),scenes_data_warehouse_settings_DataWarehouseManagedSourcesTable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseManagedSourcesTable.tsx"),scenes_data_warehouse_settings_DataWarehouseSelfManagedSourcesTable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseSelfManagedSourcesTable.tsx"),scenes_data_warehouse_settings_dataWarehouseSettingsLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/dataWarehouseSettingsLogic.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/types.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DataPipelinesSources(){let{dataWarehouseSources,dataWarehouseSourcesLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_data_warehouse_settings_dataWarehouseSettingsLogic__WEBPACK_IMPORTED_MODULE_7__.T),newButton=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.dataPipelinesNew("source"),type:"primary",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPlusSmall,{}),size:"small",children:"New source"});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_3__.m,{buttons:newButton}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"deprecated-space-y-4",children:[dataWarehouseSourcesLoading||dataWarehouseSources?.results.length!==0?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_4__.C,{productName:"Data Warehouse Source",productKey:_types__WEBPACK_IMPORTED_MODULE_9__.Md.DATA_WAREHOUSE,thingName:"data source",description:"Use data warehouse sources to import data from your external data into PostHog.",isEmpty:0===dataWarehouseSources.results.length&&!dataWarehouseSourcesLoading,docsURL:"https://posthog.com/docs/data-warehouse",actionElementOverride:newButton}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("h2",{children:"Managed sources"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{children:"PostHog can connect to external sources and automatically import data from them into the PostHog data warehouse"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_data_warehouse_settings_DataWarehouseManagedSourcesTable__WEBPACK_IMPORTED_MODULE_5__.lL,{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("h2",{children:"Self-managed sources"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{children:"Connect to your own data sources, making them queryable in PostHog"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_data_warehouse_settings_DataWarehouseSelfManagedSourcesTable__WEBPACK_IMPORTED_MODULE_6__.T,{})]})]})]})}},"../../frontend/src/scenes/data-warehouse/settings/DataWarehouseSelfManagedSourcesTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>DataWarehouseSelfManagedSourcesTable});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),scenes_data_warehouse_settings_DataWarehouseSourceIcon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseSourceIcon.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/types.ts"),_dataWarehouseSettingsLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/dataWarehouseSettingsLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DataWarehouseSelfManagedSourcesTable(){let{filteredSelfManagedTables,searchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_dataWarehouseSettingsLogic__WEBPACK_IMPORTED_MODULE_6__.T),{deleteSelfManagedTable,refreshSelfManagedTableSchema,setSearchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_dataWarehouseSettingsLogic__WEBPACK_IMPORTED_MODULE_6__.T);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"flex items-center justify-between gap-2 mb-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.DF,{type:"search",placeholder:"Search...",onChange:setSearchTerm,value:searchTerm})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.g3,{id:"self-managed-sources",dataSource:filteredSelfManagedTables,pagination:{pageSize:10},columns:[{width:0,render:(_,item)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_data_warehouse_settings_DataWarehouseSourceIcon__WEBPACK_IMPORTED_MODULE_3__.U,{type:(0,scenes_data_warehouse_settings_DataWarehouseSourceIcon__WEBPACK_IMPORTED_MODULE_3__.Z)(item.url_pattern)})},{title:"Source",dataIndex:"name",key:"name",render:(_,item)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_2__.i,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_4__.j.pipelineNode(_types__WEBPACK_IMPORTED_MODULE_5__.We.Source,`self-managed-${item.id}`,_types__WEBPACK_IMPORTED_MODULE_5__.il.SourceConfiguration),title:item.name})},{key:"actions",render:(_,item)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:"flex flex-row justify-end",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{"data-attr":`refresh-data-warehouse-${item.name}`,onClick:()=>refreshSelfManagedTableSchema(item.id),children:"Update schema from source"},`refresh-data-warehouse-${item.name}`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{status:"danger","data-attr":`delete-data-warehouse-${item.name}`,onClick:()=>{_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.dn.open({title:"Delete table?",description:"Table deletion cannot be undone. All views and joins related to this table will be deleted.",primaryButton:{children:"Delete",status:"danger",onClick:()=>{deleteSelfManagedTable(item.id)}},secondaryButton:{children:"Cancel"}})},children:"Delete"},`delete-data-warehouse-${item.name}`)]})}]})]})}}}]);