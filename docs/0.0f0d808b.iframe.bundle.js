(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/RestrictedArea.tsx":function(pe,S,e){"use strict";e.d(S,"b",function(){return R}),e.d(S,"a",function(){return K});var G=e("./node_modules/core-js/modules/es.array.concat.js"),ie=e.n(G),ce=e("./node_modules/kea/lib/index.esm.js"),ue=e("./node_modules/react/index.js"),X=e.n(ue),Q=e("./frontend/src/scenes/organizationLogic.tsx"),re=e("./frontend/src/lib/constants.tsx"),I=e("./frontend/src/lib/components/Tooltip.tsx"),de=e("./frontend/src/lib/utils/permissioning.ts"),oe=e("./frontend/src/scenes/teamLogic.tsx"),R;(function(P){P.Organization="organization",P.Project="project"})(R||(R={}));function K(P){var U=P.Component,ye=P.minimumAccessLevel,V=P.scope,me=V===void 0?R.Organization:V,Fe=Object(ce.useValues)(Q.a),_e=Fe.currentOrganization,ve=Object(ce.useValues)(oe.a),t=ve.currentTeam,b=Object(ue.useMemo)(function(){var w;if(me===R.Project){if(!t)return"Loading current project\u2026";w=t.effective_membership_level}else{if(!_e)return"Loading current organization\u2026";w=_e.membership_level}return w===null?"You don't have access to the current ".concat(me,"."):w<ye?ye===re.n.Owner?"This area is restricted to the ".concat(me," owner."):"This area is restricted to ".concat(me," ").concat(de.b.get(ye),"s and up. Your level is ").concat(de.b.get(w),"."):null},[_e]);return b?X.a.createElement(I.a,{title:b,placement:"topLeft",delayMs:0},X.a.createElement("span",null,X.a.createElement(U,{isRestricted:!0,restrictionReason:b}))):X.a.createElement(U,{isRestricted:!1,restrictionReason:null})}try{K.displayName="RestrictedArea",K.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:K.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(P){}try{R.Organization.displayName="RestrictionScope.Organization",R.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:R.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(P){}try{R.Project.displayName="RestrictionScope.Project",R.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:R.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(P){}},"./frontend/src/scenes/actions/EventName.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return Q}),e.d(S,"b",function(){return re});var G=e("./node_modules/react/index.js"),ie=e.n(G),ce=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ue=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),X=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function Q(I){var de=I.value,oe=I.onChange;return ie.a.createElement(ue.d,{groupType:X.a.Events,onChange:oe,value:de,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(K){return ie.a.createElement(ce.a,{value:K,disablePopover:!0})},allowClear:!0})}function re(I){var de=I.value,oe=I.onChange;return ie.a.createElement(ue.b,{groupType:X.a.Events,onChange:oe,value:de,type:"secondary",status:"stealth",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(K){return ie.a.createElement(ce.a,{value:K,disablePopover:!0})},allowClear:!0})}try{Q.displayName="EventName",Q.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:Q.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(I){}try{re.displayName="LemonEventName",re.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:re.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(I){}},"./frontend/src/scenes/events/EventDetails.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return B});var G=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ie=e.n(G),ce=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ue=e.n(ce),X=e("./node_modules/core-js/modules/es.object.keys.js"),Q=e("./node_modules/core-js/modules/es.symbol.js"),re=e("./node_modules/core-js/modules/es.array.filter.js"),I=e("./node_modules/core-js/modules/es.object.to-string.js"),de=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),oe=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),R=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),K=e("./node_modules/react/index.js"),P=e.n(K),U=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ye=e("./frontend/src/lib/components/PropertiesTable.tsx"),V=e("./frontend/src/scenes/events/EventElements.tsx"),me=e("./node_modules/antd/es/tabs/index.js"),Fe=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),_e=e.n(Fe),ve=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),t=e("./frontend/src/lib/utils.tsx"),b=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function w(y,d){var O=Object.keys(y);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(y);d&&(f=f.filter(function(z){return Object.getOwnPropertyDescriptor(y,z).enumerable})),O.push.apply(O,f)}return O}function Z(y){for(var d=1;d<arguments.length;d++){var O=arguments[d]!=null?arguments[d]:{};d%2?w(Object(O),!0).forEach(function(f){ie()(y,f,O[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(O)):w(Object(O)).forEach(function(f){Object.defineProperty(y,f,Object.getOwnPropertyDescriptor(O,f))})}return y}function k(y){var d=y.event,O=d.event,f=d.id,z=d.uuid,te=d.distinct_id,Se=d.properties,fe=d.elements,he=d.timestamp,Ee=d.person,je=_e()(d,b),ae=Z(Z(Z(Z({},f?{id:f}:null),z?{uuid:z}:null),{},{timestamp:he,event:O,distinct_id:te,properties:Object(t.zb)(Se)},fe&&fe.length>0?{elements:fe}:null),je);return P.a.createElement(ve.a,{language:ve.b.JSON},JSON.stringify(ae,null,4))}try{k.displayName="EventJSON",k.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:k.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(y){}var We=e("./frontend/src/lib/dayjs.ts"),q=e("./frontend/src/lib/components/LemonButton/index.ts");function ee(y,d){var O=Object.keys(y);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(y);d&&(f=f.filter(function(z){return Object.getOwnPropertyDescriptor(y,z).enumerable})),O.push.apply(O,f)}return O}function se(y){for(var d=1;d<arguments.length;d++){var O=arguments[d]!=null?arguments[d]:{};d%2?ee(Object(O),!0).forEach(function(f){ie()(y,f,O[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(O)):ee(Object(O)).forEach(function(f){Object.defineProperty(y,f,Object.getOwnPropertyDescriptor(O,f))})}return y}var Le=me.a.TabPane;function B(y){for(var d=y.event,O=Object(K.useState)(!1),f=ue()(O,2),z=f[0],te=f[1],Se={},fe={},he=0,Ee=0,je=Object.keys(d.properties);Ee<je.length;Ee++){var ae=je[Ee];U.e.event[ae]&&U.e.event[ae].hide&&(he+=1,z&&(fe[ae]=d.properties[ae])),(!U.e.event[ae]||!U.e.event[ae].hide)&&(Se[ae]=d.properties[ae])}return P.a.createElement(me.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},P.a.createElement(Le,{tab:"Properties",key:"properties"},P.a.createElement(ye.a,{properties:se(se({$timestamp:Object(We.a)(d.timestamp).toISOString()},Se),fe),useDetectedPropertyType:!0}),he>0&&P.a.createElement(q.a,{className:"mb-2",onClick:function(){return te(!z)},size:"small"},z?"Hide":"Show"," ",Object(t.rb)(he,"hidden property","hidden properties"))),P.a.createElement(Le,{tab:"JSON",key:"json"},P.a.createElement(k,{event:d})),d.elements&&d.elements.length>0&&P.a.createElement(Le,{tab:"Elements",key:"elements"},P.a.createElement(V.a,{event:d})))}try{B.displayName="EventDetails",B.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:B.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(y){}},"./frontend/src/scenes/events/EventElements.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return Z});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ie=e.n(G),ce=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ue=e.n(ce),X=e("./node_modules/core-js/modules/es.array.join.js"),Q=e.n(X),re=e("./node_modules/core-js/modules/es.array.fill.js"),I=e.n(re),de=e("./node_modules/core-js/modules/es.array.slice.js"),oe=e.n(de),R=e("./node_modules/core-js/modules/es.array.map.js"),K=e.n(R),P=e("./node_modules/core-js/modules/es.object.entries.js"),U=e.n(P),ye=e("./node_modules/core-js/modules/es.array.concat.js"),V=e.n(ye),me=e("./node_modules/core-js/modules/es.regexp.exec.js"),Fe=e.n(me),_e=e("./node_modules/core-js/modules/es.string.replace.js"),ve=e.n(_e),t=e("./node_modules/react/index.js"),b=e.n(t);function w(k){return Array(k).fill("    ").join("")}function Z(k){var We=k.event,q=ue()(We.elements||[]).reverse();return q=q.slice(Math.max(q.length-10,1)),b.a.createElement("div",null,q.map(function(ee,se){return b.a.createElement("pre",{className:"code",key:se,style:{margin:0,padding:0,borderRadius:0,backgroundColor:se===q.length-1?"var(--primary)":void 0}},w(se),"<",ee.tag_name,ee.attr_id&&' id="'.concat(ee.attr_id,'"'),Object.entries(ee.attributes).map(function(Le){var B=ie()(Le,2),y=B[0],d=B[1];return b.a.createElement("span",{key:y}," ".concat(y.replace("attr__",""),'="').concat(d,'"'))}),">",ee.text,se===q.length-1&&b.a.createElement("span",null,"</",ee.tag_name,">"))}),ue()(q).reverse().slice(1).map(function(ee,se){return b.a.createElement("pre",{className:"code",key:se,style:{margin:0,padding:0,borderRadius:0}},w(q.length-se-2),"</",ee.tag_name,">")}))}try{Z.displayName="EventElements",Z.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:Z.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(k){}},"./frontend/src/scenes/events/EventsTable.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return at});var G=e("./node_modules/core-js/modules/es.symbol.js"),ie=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ce=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ue=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),X=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Q=e.n(X),re=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),I=e.n(re),de=e("./node_modules/core-js/modules/es.array.splice.js"),oe=e("./node_modules/core-js/modules/es.array.filter.js"),R=e("./node_modules/core-js/modules/es.object.to-string.js"),K=e("./node_modules/core-js/modules/es.array.map.js"),P=e("./node_modules/core-js/modules/es.array.find.js"),U=e("./node_modules/core-js/modules/es.array.concat.js"),ye=e("./node_modules/core-js/modules/es.array.flat-map.js"),V=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),me=e("./node_modules/core-js/modules/es.array.join.js"),Fe=e("./node_modules/core-js/modules/es.object.keys.js"),_e=e("./node_modules/core-js/modules/es.regexp.to-string.js"),ve=e("./node_modules/react/index.js"),t=e.n(ve),b=e("./node_modules/kea/lib/index.esm.js"),w=e("./frontend/src/scenes/events/EventDetails.tsx"),Z=e("./frontend/src/lib/components/Link.tsx"),k=e("./node_modules/antd/es/popconfirm/index.js"),We=e("./node_modules/kea-router/lib/index.js"),q=e("./node_modules/@babel/runtime/helpers/typeof.js"),ee=e.n(q),se=e("./node_modules/core-js/modules/es.regexp.exec.js"),Le=e("./node_modules/core-js/modules/es.string.replace.js");function B(n){var o=n.value;return t.a.createElement("span",{title:o},ee()(o)==="object"?JSON.stringify(o):o&&o.toString().replace(/(^\w+:|^)\/\//,""))}try{B.displayName="Property",B.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:B.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(n){}var y=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function d(n,o){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(A){return Object.getOwnPropertyDescriptor(n,A).enumerable})),i.push.apply(i,u)}return i}function O(n){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?d(Object(i),!0).forEach(function(u){Q()(n,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(i,u))})}return n}function f(n){var o=n.property,i=n.value,u=n.filters,A=n.onClick,F=n.className,M=Object(y.c)(u.properties),Ie=M.find(function(ne){return ne.key===o&&ne.value===i&&!ne.operator})?M.filter(function(ne){return ne.key!==o||ne.value!==i||ne.operator}):[].concat(I()(M),[{key:o,value:i}]),Ye=Object(We.combineUrl)(window.location.pathname,O(O({},u),{},{properties:Ie}),{}),Be=Ye.url;return t.a.createElement(Z.a,{to:Be,className:F,onClick:function(){A&&A(o,i)}},t.a.createElement(B,{value:i}))}try{f.displayName="FilterPropertyLink",f.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:f.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(n){}var z=e("./frontend/src/lib/utils.tsx"),te=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Se=e.n(te),fe=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),he=e.n(fe),Ee={};Ee.insert="head",Ee.singleton=!1;var je=Se()(he.a,Ee),ae=he.a.locals||{},Ze=e("./frontend/src/scenes/events/eventsTableLogic.ts"),ke=e("./frontend/src/scenes/persons/PersonHeader.tsx"),qe=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),$=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ve=e("./frontend/src/types.ts"),gt=e("./frontend/src/scenes/actions/EventName.tsx"),et=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),tt=e("./frontend/src/lib/components/Tooltip.tsx"),xe=e("./node_modules/clsx/dist/clsx.m.js"),De=Object(b.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(o){return{columnConfig:o}}},reducers:function(o){var i=o.props;return{selectedColumns:[i.startingColumns||"DEFAULT",{setSelectedColumns:function(A,F){var M=F.columnConfig;return M}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(n){return[n.selectedColumns]},function(n){return n==="DEFAULT"?7:n.length+2}]}}),p=e("./frontend/src/scenes/urls.ts"),r=e("./frontend/src/lib/components/LemonTable/index.ts"),s=e("./frontend/src/lib/components/icons.tsx"),a=e("./frontend/src/lib/components/LemonButton/index.ts"),g=e("./frontend/src/lib/components/LemonButton/More.tsx"),l=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),m=e("./frontend/src/scenes/teamLogic.tsx"),c=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function v(n){Object(ve.useEffect)(function(){var o="hidden",i="visibilitychange";typeof document.msHidden!="undefined"?(o="msHidden",i="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(o="webkitHidden",i="webkitvisibilitychange");var u=function(){n(!document[o])};return document.addEventListener(i,u),function(){document.removeEventListener(i,u)}},[])}var le=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Y=e.n(le),Re=e("./node_modules/core-js/modules/es.array.includes.js"),Oe=e("./node_modules/core-js/modules/es.string.includes.js"),be=e("./node_modules/antd/es/row/index.js"),T=e("./node_modules/antd/es/space/index.js"),Me=e("./node_modules/antd/es/button/index.js"),ze=e("./node_modules/antd/es/col/index.js"),D=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),yt=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),nt=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),rt=e.n(nt),we={};we.insert="head",we.singleton=!1;var Nt=Se()(rt.a,we),$e=rt.a.locals||{},Kt=e("./node_modules/antd/lib/modal/Modal.js"),Ut=e.n(Kt),Ft=e("./node_modules/react-virtualized/dist/es/List/index.js"),Pt=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),fn=e("./node_modules/core-js/modules/es.array.from.js"),En=e("./node_modules/core-js/modules/es.string.iterator.js"),gn=e("./node_modules/core-js/modules/es.array.iterator.js"),yn=e("./node_modules/core-js/modules/es.set.js"),_n=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Wt=Object(b.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[De],actions:{selectColumn:function(o){return{column:o}},unselectColumn:function(o){return{column:o}},resetColumns:function(o){return{columns:o}},setColumns:function(o){return{columns:o}},toggleSaveAsDefault:!0,save:!0},reducers:function(o){var i=o.props;return{selectedColumns:[i.selectedColumns,{selectColumn:function(A,F){var M=F.column;return Array.from(new Set([].concat(I()(A),[M])))},unselectColumn:function(A,F){var M=F.column;return A.filter(function(Ie){return Ie!==M})},resetColumns:function(A,F){var M=F.columns;return M},setColumns:function(A,F){var M=F.columns;return M}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(A){return!A}}]}},listeners:function(o){var i=o.values,u=o.actions;return{save:function(){De.actions.setSelectedColumns(i.selectedColumns),i.saveAsDefault&&(m.a.actions.updateCurrentTeam({live_events_columns:i.selectedColumns}),u.toggleSaveAsDefault())}}}}),Vt=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),ot=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),wt=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),_t=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),Tt=e("./frontend/src/lib/components/RestrictedArea.tsx"),At=e("./frontend/src/lib/constants.tsx"),zt=Object(_t.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(s.SortableDragIcon,null))});function st(n){var o=Object(b.useActions)(De),i=o.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(a.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:i,icon:t.a.createElement(s.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement($t,{immutableColumns:n.immutableColumns,defaultColumns:n.defaultColumns}))}function $t(n){var o=n.immutableColumns,i=n.defaultColumns,u=36,A=32,F=Object(b.useValues)(De),M=F.selectedColumns,Ie=F.modalVisible,Ye=Object(b.useActions)(De),Be=Ye.hideModal,ne=Wt({selectedColumns:M==="DEFAULT"?i:M}),Te=Object(b.useActions)(ne),lt=Te.selectColumn,it=Te.unselectColumn,ct=Te.resetColumns,ut=Te.setColumns,dt=Te.toggleSaveAsDefault,He=Te.save,mt=Object(b.useValues)(ne),ge=mt.selectedColumns;function ht(H){var x=H.isRestricted;return t.a.createElement(wt.a,{label:"Save as default for all project members",className:"mt-2","data-attr":"events-table-save-columns-as-default-toggle",bordered:!0,onChange:dt,defaultChecked:!1,disabled:x})}var Je=function(x){var J=x.column,N=x.disabled;return t.a.createElement("div",{className:Object(xe.a)(["column-display-item",{selected:!N,disabled:N}]),style:{height:"".concat(A,"px")}},!N&&t.a.createElement(zt,null),t.a.createElement($.a,{value:J}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(tt.a,{title:N?"Reserved":"Remove"},N?t.a.createElement(D.a,null):t.a.createElement(yt.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return it(J)}}))))},jt=Object(_t.b)(Je),vt=function(x){var J=x.index,N=x.style,Ce=x.key,W=o==null?void 0:o.includes(ge[J]);return t.a.createElement("div",{style:N,key:Ce},W&&t.a.createElement(Je,{column:ge[J],disabled:Boolean(W)}),!W&&t.a.createElement(jt,{column:ge[J],index:J,collection:"selected-columns"}))},pt=Object(_t.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(Pt.a,null,function(H){var x=H.height,J=H.width;return t.a.createElement(Ft.b,{height:x,rowCount:ge.length,rowRenderer:vt,rowHeight:u,width:J})}))}),ft=function(x){var J=x.oldIndex,N=x.newIndex,Ce=I()(ge),W=Ce.splice(J,1),Pe=Y()(W,1),Ot=Pe[0];Ce.splice(N,0,Ot),ut(Ce)};return t.a.createElement(Ut.a,{id:"column-configurator-modal",centered:!0,visible:Ie,title:"Configure columns",onOk:He,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:Be,footer:t.a.createElement(be.a,null,t.a.createElement(T.b,{style:{flexGrow:1},align:"start"},t.a.createElement(Me.a,{className:"text-blue",onClick:function(){return ct(i)}},"Reset to defaults")),t.a.createElement(T.b,null,t.a.createElement(Me.a,{className:"text-blue",type:"text",onClick:Be},"Close"),t.a.createElement(Me.a,{type:"primary",onClick:He},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(be.a,{gutter:16,className:"lists"},t.a.createElement(ze.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",ge.length,") - Drag to reorder"),t.a.createElement(pt,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:ft,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(ze.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(Pt.a,null,function(H){var x,J=H.height,N=H.width;return t.a.createElement(Vt.a,{height:J,width:N,taxonomicGroupTypes:[ot.a.EventProperties,ot.a.EventFeatureFlags],value:void 0,onChange:function(W,Pe){return Pe&&lt(String(Pe))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:(x={},Q()(x,ot.a.EventProperties,ge),Q()(x,ot.a.EventFeatureFlags,ge),x)})})))),t.a.createElement(Tt.a,{Component:ht,minimumAccessLevel:At.n.Owner,scope:Tt.b.Project})))}try{st.displayName="LemonTableConfig",st.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:st.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(n){}var Yt=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Ht=e("./frontend/src/scenes/events/EventBufferNotice.tsx"),Jt=e("./frontend/@posthog/lemon-ui/src/index.ts"),Gt=e("./frontend/src/lib/logic/featureFlagLogic.ts");function St(n,o){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(A){return Object.getOwnPropertyDescriptor(n,A).enumerable})),i.push.apply(i,u)}return i}function Dt(n){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?St(Object(i),!0).forEach(function(u){Q()(n,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):St(Object(i)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(i,u))})}return n}function Lt(n){var o=n.placement,i=n.onConfirm,u=n.children;return t.a.createElement(k.a,{placement:o,title:t.a.createElement(t.a.Fragment,null,"Exporting by csv is limited to 3,500 events.",t.a.createElement("br",null),"To return more, please use ",t.a.createElement("a",{href:"https://posthog.com/docs/api/events"},"the API"),". Do you want to export by CSV?"),onConfirm:i},u)}function at(n){var o,i=n.pageKey,u=n.fixedFilters,A=n.fixedColumns,F=n.sceneUrl,M=n.fetchMonths,Ie=M===void 0?12:M,Ye=n.startingColumns,Be=n.showCustomizeColumns,ne=Be===void 0?!0:Be,Te=n.showExport,lt=Te===void 0?!0:Te,it=n.showAutoload,ct=it===void 0?!0:it,ut=n.showEventFilter,dt=ut===void 0?!0:ut,He=n.showPropertyFilter,mt=He===void 0?!0:He,ge=n.showRowExpanders,ht=ge===void 0?!0:ge,Je=n.showActionsButton,jt=Je===void 0?!0:Je,vt=n.showPersonColumn,pt=vt===void 0?!0:vt,ft=n.linkPropertiesToFilters,H=ft===void 0?!0:ft,x=n["data-attr"],J=Object(b.useValues)(m.a),N=J.currentTeam,Ce=Object(Ze.a)({fixedFilters:u,key:i,sceneUrl:F||p.a.events(),fetchMonths:Ie}),W=Object(b.useValues)(Ce),Pe=W.properties,Ot=W.eventsFormatted,xt=W.isLoading,Xt=W.hasNext,Rt=W.isLoadingNext,Et=W.eventFilter,Qt=W.automaticLoadEnabled,Zt=W.highlightEvents,kt=W.months,Mt=Object(b.useValues)(De({startingColumns:(o=N&&N.live_events_columns)!==null&&o!==void 0?o:Ye})),Ge=Mt.tableWidth,Ae=Mt.selectedColumns,Ne=Object(b.useActions)(Ce),qt=Ne.fetchNextEvents,en=Ne.prependNewEvents,tn=Ne.setEventFilter,nn=Ne.toggleAutomaticLoad,bt=Ne.startDownload,rn=Ne.setPollingActive,on=Ne.setProperties,sn=!(u!=null&&u.person_id),an=Object(b.useActions)(Yt.f),ln=an.reportEventsTablePollingReactedToPageVisibility,cn=Object(b.useValues)(Gt.a),un=cn.featureFlags,dn=un[At.h.ALLOW_CSV_EXPORT_COLUMN_CHOICE];v(function(_){rn(_),ln(_)});var Ct=function(E,h){var L=E.date_break,j=E.new_events;return{children:L||(j?t.a.createElement(a.a,{icon:t.a.createElement(s.IconSync,null),onClick:function(){return en()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:h+1,style:j?{padding:0}:void 0}}},mn={title:"Person",key:"person",render:function(E,h){var L,j,C=h.event;return C?sn&&(L=C.person)!==null&&L!==void 0&&(j=L.distinct_ids)!==null&&j!==void 0&&j.length?t.a.createElement(Z.a,{to:p.a.person(C.person.distinct_ids[0])},t.a.createElement(ke.a,{noLink:!0,withIcon:!0,person:C.person})):t.a.createElement(ke.a,{withIcon:!0,person:C.person}):{props:{colSpan:0}}}},Xe=Object(ve.useMemo)(function(){var _=[{title:"Event",key:"event",width:"16rem",render:function(h,L){if(!L.event)return Ct(L,Ge);var j=L.event;return t.a.createElement($.a,{value:Object(z.e)(j)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(h,L){var j=L.event;if(!j)return{props:{colSpan:0}};var C=j.properties.$current_url?"$current_url":"$screen_name";return H?t.a.createElement(f,{className:"ph-no-capture",property:C,value:j.properties[C],filters:{properties:Pe}}):t.a.createElement(B,{value:j.properties[C]})}},{title:t.a.createElement(tt.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(h,L){var j=L.event;return j?H?t.a.createElement(f,{property:"$lib",value:j.properties.$lib,filters:{properties:Pe}}):t.a.createElement(B,{value:j.properties.$lib}):{props:{colSpan:0}}}}];return pt&&_.splice(1,0,mn),_},[Ge]),vn=Object(ve.useMemo)(function(){var _=[];if(Ae==="DEFAULT")_=I()(Xe);else{var E=pt?Ae:Ae.filter(function(h){return h!=="person"});_=E.map(function(h,L){var j=Xe.find(function(C){return C.key===h});return j?Dt(Dt({},j),{},{render:function(Ke,Ue){var Qe=Ue.event;return Qe?j.render?j.render(Ke,Ue,L):{props:{colSpan:0}}:L===0?Ct(Ue,Ge):{props:{colSpan:0}}}}):{title:$.e.event[h]?$.e.event[h].label:h,key:h,render:function(Ke,Ue){var Qe=Ue.event;return Qe?H?t.a.createElement(f,{className:"ph-no-capture ",property:h,value:Qe.properties[h],filters:{properties:Pe}}):t.a.createElement(B,{value:Qe.properties[h]}):L===0?Ct(Ue,Ge):{props:{colSpan:0}}}}})}return _.push({title:"Time",key:"time",render:function(L,j){var C=j.event;return C?t.a.createElement(qe.b,{time:C.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),jt&&_.push({key:"actions",width:0,render:function(L,j){var C=j.event;if(!C)return{props:{colSpan:0}};var Ke;return C.event==="$pageview"?Ke={insight:Ve.B.TRENDS,interval:"day",display:Ve.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:C.properties.$current_url,type:"event"}]}]}:C.event!=="$autocapture"&&(Ke={insight:Ve.B.TRENDS,interval:"day",display:Ve.j.ActionsLineGraph,actions:[],events:[{id:C.event,name:C.event,type:"events",order:0,properties:[]}]}),t.a.createElement(g.a,{overlay:t.a.createElement(t.a.Fragment,null,N&&t.a.createElement(a.a,{status:"stealth",onClick:function(){return Object(c.a)(N.id,C,0,N.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),Ke&&t.a.createElement(a.a,{status:"stealth",to:p.a.insightNew(Ke),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),A?_.concat(A):_},[Ae,Ge]),It=dt||mt,Bt=ct||ne||lt,pn=Object(ve.useMemo)(function(){var _={url:["properties.$current_url","properties.$screen_name"],time:"timestamp",event:"event",source:"properties.$lib",person:["person.distinct_ids.0","person.properties.email"]};return(Ae==="DEFAULT"?Xe.map(function(E){return E.key||""}):Ae).flatMap(function(E){return _[E]||"properties.".concat(E)})},[Xe,Ae]);return t.a.createElement("div",{className:"events","data-attr":"events-table"},It&&t.a.createElement("div",{className:"flex space-x-4 mb-4"},dt&&t.a.createElement(gt.b,{value:Et,onChange:function(E){tn(E||"")}}),mt&&t.a.createElement(et.a,{propertyFilters:Pe,onChange:on,pageKey:i,style:{marginBottom:0,marginTop:0},eventNames:Et?[Et]:[]})),It&&Bt?t.a.createElement("div",{className:"my-4"},t.a.createElement(Jt.LemonDivider,null)):null,Bt?t.a.createElement("div",{className:Object(xe.a)("flex justify-between items-center mb-4")},ct&&t.a.createElement(l.a,{bordered:!0,"data-attr":"live-events-refresh-toggle",id:"autoload-switch",label:"Automatically load new events",checked:Qt,onChange:nn}),t.a.createElement("div",{className:"flex space-x-2"},ne&&t.a.createElement(st,{immutableColumns:["event","person"],defaultColumns:Xe.map(function(_){return _.key||""})}),lt&&dn?t.a.createElement(a.b,{popup:{sameWidth:!1,closeOnClickInside:!1,overlay:[t.a.createElement(Lt,{key:1,placement:"topRight",onConfirm:function(){bt(pn)}},t.a.createElement(a.a,{fullWidth:!0,status:"stealth"},"Export current columns")),t.a.createElement(Lt,{key:0,placement:"bottomRight",onConfirm:function(){return bt()}},t.a.createElement(a.a,{fullWidth:!0,status:"stealth"},"Export all columns"))]},type:"secondary",icon:t.a.createElement(s.IconExport,null)},"Export"):t.a.createElement(k.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Exporting by csv is limited to 3,500 events.",t.a.createElement("br",null),"To return more, please use"," ",t.a.createElement("a",{href:"https://posthog.com/docs/api/events"},"the API"),". Do you want to export by CSV?"),onConfirm:function(){return bt()}},t.a.createElement(a.a,{type:"secondary",icon:t.a.createElement(s.IconExport,{style:{color:"var(--primary)"}})},"Export")))):null,t.a.createElement(Ht.a,{additionalInfo:" - this helps ensure accuracy of insights grouped by unique users",className:"mb-4"}),t.a.createElement(r.a,{"data-attr":x,dataSource:Ot,loading:xt,columns:vn,key:Ae==="DEFAULT"?"default":Ae.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:xt?void 0:Pe.some(function(_){return Object.keys(_).length})||Et?"No events matching filters found in the last ".concat(kt," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(Z.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(E){var h;return E.event?E.event.id+"-"+E.event.event:((h=E.date_break)===null||h===void 0?void 0:h.toString())||""},rowClassName:function(E){return Object(xe.a)({"event-row":E.event,highlighted:E.event&&Zt[E.event.id],"event-row-is-exception":E.event&&E.event.event==="$exception","event-row-date-separator":E.date_break,"event-row-new":E.new_events})},expandable:ht?{expandedRowRender:function(E){var h=E.event;return h&&t.a.createElement(w.a,{event:h})},rowExpandable:function(E){var h=E.event,L=E.date_break,j=E.new_events;return L||j?-1:!!h}}:void 0}),Xt||Rt?t.a.createElement(a.a,{type:"primary",onClick:qt,loading:Rt,className:"my-8 mx-auto"},"Load more events"):null)}try{at.displayName="EventsTable",at.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}},"data-attr":{defaultValue:null,description:"",name:"data-attr",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:at.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(n){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(pe,S,e){"use strict";e.d(S,"a",function(){return De});var G=e("./node_modules/core-js/modules/es.object.keys.js"),ie=e.n(G),ce=e("./node_modules/core-js/modules/es.symbol.js"),ue=e.n(ce),X=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Q=e.n(X),re=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),I=e.n(re),de=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),oe=e.n(de),R=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),K=e.n(R),P=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),U=e.n(P),ye=e("./node_modules/@babel/runtime/regenerator/index.js"),V=e.n(ye),me=e("./node_modules/core-js/modules/es.array.map.js"),Fe=e.n(me),_e=e("./node_modules/core-js/modules/es.object.to-string.js"),ve=e.n(_e),t=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),b=e.n(t),w=e("./node_modules/core-js/modules/es.array.splice.js"),Z=e.n(w),k=e("./node_modules/core-js/modules/es.array.join.js"),We=e.n(k),q=e("./node_modules/core-js/modules/es.array.filter.js"),ee=e.n(q),se=e("./node_modules/core-js/modules/es.array.concat.js"),Le=e.n(se),B=e("./node_modules/core-js/modules/es.array.iterator.js"),y=e.n(B),d=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),O=e.n(d),f=e("./node_modules/kea/lib/index.esm.js"),z=e("./frontend/src/lib/utils.tsx"),te=e("./node_modules/kea-router/lib/index.js"),Se=e.n(te),fe=e("./frontend/src/lib/api.ts"),he=e("./frontend/src/types.ts"),Ee=e("./frontend/src/scenes/teamLogic.tsx"),je=e("./frontend/src/lib/dayjs.ts"),ae=e("./frontend/src/lib/components/lemonToast.tsx"),Ze=e("./frontend/src/lib/logic/featureFlagLogic.ts"),ke=e("./frontend/src/lib/components/ExportButton/exporter.tsx");function qe(p,r){var s=Object.keys(p);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(p);r&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(p,g).enumerable})),s.push.apply(s,a)}return s}function $(p){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?qe(Object(s),!0).forEach(function(a){K()(p,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(s)):qe(Object(s)).forEach(function(a){Object.defineProperty(p,a,Object.getOwnPropertyDescriptor(s,a))})}return p}var Ve=5,gt=365,et=5e3,tt=function(r,s){var a=[];return a=r.map(function(g){return{event:g}}),a.forEach(function(g,l){var m=a[l-1];l>0&&g.event&&m.event&&!Object(je.a)(g.event.timestamp).isSame(m.event.timestamp,"day")&&a.splice(l,0,{date_break:Object(je.a)(g.event.timestamp).format("LL")})}),s.length>0&&a.splice(0,0,{new_events:!0}),a},xe=function(r){return Object(je.b)().subtract(r,"day").toISOString()},De=Object(f.kea)({path:function(r){return["scenes","events","eventsTableLogic",r]},props:{},key:function(r){return[r.fixedFilters?JSON.stringify(r.fixedFilters):"all",r.key,r.sceneUrl].filter(function(s){return!!s}).join("-")},connect:{values:[Ee.a,["currentTeamId"],Ze.a,["featureFlags"]]},actions:{setPollingActive:function(r){return{pollingActive:r}},setProperties:function(r){return Array.isArray(r)?r.length===0?{properties:[{}]}:{properties:r}:{properties:[r]}},fetchEvents:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:r}},fetchEventsSuccess:function(r){return r},fetchNextEvents:!0,fetchOrPollFailure:function(r){return{error:r}},pollEvents:!0,pollEventsSuccess:function(r){return{events:r}},prependEvents:function(r){return{events:r}},prependNewEvents:!0,setSelectedEvent:function(r){return{selectedEvent:r}},setPollTimeout:function(r){return{pollTimeout:r}},setEventFilter:function(r){return{event:r}},toggleAutomaticLoad:function(r){return{automaticLoadEnabled:r}},noop:function(r){return r},startDownload:function(r){return{columns:r}}},reducers:function(r){var s,a,g=r.props;return{pollingIsActive:[!0,{setPollingActive:function(m,c){var v=c.pollingActive;return v},pollEventsSuccess:function(m,c){var v=c.events;return v&&v.length?!1:m},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(m,c){var v=c.properties;return Object(z.r)(v)}}],eventFilter:[(s=(a=g.fixedFilters)===null||a===void 0?void 0:a.event_filter)!==null&&s!==void 0?s:"",{setEventFilter:function(m,c){var v=c.event;return v}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(m,c){var v=c.events,le=c.isNext;return le?[].concat(U()(m),U()(v)):v},prependEvents:function(m,c){var v=c.events;return[].concat(U()(v),U()(m))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(m,c){var v=c.hasNext;return v}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(m,c){var v=c.selectedEvent;return v}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(m,c){var v=c.events;return v||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(m,c){var v=c.events;return v.reduce(function(le,Y){return le[Y.id]=!0,le},{})}}],pollTimeout:[0,{setPollTimeout:function(m,c){return c.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(m,c){var v=c.automaticLoadEnabled;return v}}]}},selectors:function(r){var s=r.selectors,a=r.props;return{eventsFormatted:[function(){return[s.events,s.newEvents]},function(g,l){return tt(g,l)}],listParams:[function(){return[s.eventFilter,s.orderBy,s.properties]},function(g,l,m){var c;return $($($({},a.fixedFilters||{}),{},{properties:[].concat(U()(m),U()(((c=a.fixedFilters)===null||c===void 0?void 0:c.properties)||[]))},g?{event:g}:{}),{},{orderBy:[l]})}],eventsUrl:[function(){return[s.currentTeamId,s.listParams]},function(g,l){return function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return"/api/projects/".concat(g,"/events?").concat(Object(z.Cb)($($({},l),m)))}}],months:[function(){return[function(g,l){return l.fetchMonths}]},function(g){return g||12}],minimumExportDate:[function(){return[s.months]},function(){return Object(je.b)().subtract(1,"months").toISOString()}],pollAfter:[function(){return[s.events]},function(g){return(g==null?void 0:g.length)>0&&g[0].timestamp?g[0].timestamp:xe(0)}]}},actionToUrl:function(r){var s=r.values;return{setProperties:function(){return[te.router.values.location.pathname,$($({},te.router.values.searchParams),{},{properties:s.properties.length===0?void 0:s.properties}),te.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[te.router.values.location.pathname,$($({},te.router.values.searchParams),{},{eventFilter:s.eventFilter}),te.router.values.hashParams,{replace:!0}]}}},urlToAction:function(r){var s=r.actions,a=r.values,g=r.props;return K()({},g.sceneUrl,function(l,m){s.setProperties(m.properties||a.properties||{}),m.eventFilter&&s.setEventFilter(m.eventFilter)})},events:function(r){var s=r.values;return{beforeUnmount:function(){return clearTimeout(s.pollTimeout||void 0)}}},listeners:function(r){var s=r.actions,a=r.values,g=r.props;return{startDownload:function(m){var c=m.columns,v={path:a.eventsUrl(),max_limit:3500};c&&c.length>0&&(v.columns=c),Object(ke.a)({export_format:he.q.CSV,export_context:v})},setProperties:function(){return s.fetchEvents()},setEventFilter:function(){return s.fetchEvents()},fetchNextEvents:function(){var l=oe()(V.a.mark(function c(){var v;return V.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:v=a.events,v.length===0?s.fetchEvents():s.fetchEvents({before:v[v.length-1].timestamp});case 2:case"end":return Y.stop()}},c)}));function m(){return l.apply(this,arguments)}return m}(),fetchEvents:function(){var l=oe()(V.a.mark(function c(v,le){var Y,Re,Oe,be,T,Me;return V.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(Oe=function(){return Oe=oe()(V.a.mark(function nt(rt){var we;return V.a.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return we=a.eventsUrl($({after:rt},Y)),$e.abrupt("return",fe.b.get(we));case 2:case"end":return $e.stop()}},nt)})),Oe.apply(this,arguments)},Re=function(nt){return Oe.apply(this,arguments)},Y=v.nextParams,clearTimeout(a.pollTimeout),!(a.events.length>0)){D.next=9;break}return D.next=7,le(300);case 7:D.next=11;break;case 9:return D.next=11,le(1);case 11:return be=null,T=!1,D.prev=13,D.next=16,Re(xe(Ve));case 16:if(be=D.sent,be.results.length!==0){D.next=22;break}return D.next=20,Re(xe(gt));case 20:be=D.sent,T=!0;case 22:D.next=28;break;case 24:return D.prev=24,D.t0=D.catch(13),s.fetchOrPollFailure(D.t0),D.abrupt("return");case 28:le(),s.fetchEventsSuccess({events:be.results,hasNext:!!be.next||!T,isNext:!!Y}),Me=window.setTimeout(s.pollEvents,et),s.setPollTimeout(Me);case 32:case"end":return D.stop()}},c,null,[[13,24]])}));function m(c,v){return l.apply(this,arguments)}return m}(),pollEvents:function(){var l=oe()(V.a.mark(function c(v,le){var Y,Re,Oe;return V.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(Y=function(){var ze=window.setTimeout(s.pollEvents,et);s.setPollTimeout(ze)},a.orderBy==="-timestamp"){T.next=3;break}return T.abrupt("return");case 3:if(g.sceneUrl===te.router.values.location.pathname){T.next=5;break}return T.abrupt("return");case 5:if(a.pollingIsActive){T.next=8;break}return Y(),T.abrupt("return");case 8:return Re=a.eventsUrl({after:a.pollAfter}),Oe=null,T.prev=10,T.next=13,fe.b.get(Re);case 13:Oe=T.sent,T.next=19;break;case 16:return T.prev=16,T.t0=T.catch(10),T.abrupt("return");case 19:le(),a.automaticLoadEnabled?s.prependEvents(Oe.results):s.pollEventsSuccess(Oe.results),Y();case 22:case"end":return T.stop()}},c,null,[[10,16]])}));function m(c,v){return l.apply(this,arguments)}return m}(),prependNewEvents:function(){a.newEvents.length&&s.prependEvents(a.newEvents)},fetchOrPollFailure:function(m){var c=m.error;ae.d.error("There was a problem fetching your events: ".concat(c.statusText))},toggleAutomaticLoad:function(m){var c=m.automaticLoadEnabled;c&&s.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(pe,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([pe.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem;background-color:var(--primary-bg-hover)}.column-configurator-modal-sortable-container .drag-handle{color:var(--default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),pe.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(pe,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([pe.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--danger-highlight)}.events td{max-width:20rem}",""]),pe.exports=S}}]);
