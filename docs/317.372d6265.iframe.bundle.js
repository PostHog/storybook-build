(window.webpackJsonp=window.webpackJsonp||[]).push([[317],{"./frontend/src/scenes/annotations/Annotations.tsx":function(F,r,n){"use strict";n.r(r),n.d(r,"scene",function(){return b}),n.d(r,"Annotations",function(){return M});var f=n("./node_modules/core-js/modules/es.function.name.js"),H=n.n(f),c=n("./node_modules/kea/lib/index.esm.js"),e=n("./frontend/src/scenes/annotations/annotationModalLogic.ts"),g=n("./frontend/src/lib/components/PageHeader.tsx"),l=n("./frontend/src/types.ts"),x=n("./frontend/src/lib/components/LemonTable/index.ts"),u=n("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),d=n("./frontend/src/lib/components/LemonButton/index.ts"),P=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),j=n("./frontend/src/lib/components/icons.tsx"),D=n("./frontend/@posthog/lemon-ui/src/index.ts"),A=n("./frontend/src/scenes/urls.ts"),L=n("./frontend/src/lib/components/Tooltip.tsx"),T=n("./frontend/src/scenes/teamLogic.tsx"),p=n("./frontend/src/scenes/organizationLogic.tsx"),h=n("./frontend/src/scenes/annotations/AnnotationModal.tsx"),v=n("./frontend/src/lib/utils.tsx"),t=n("./node_modules/react/jsx-runtime.js"),J=n.n(t),b={component:M,logic:e.b};function M(){var C=Object(c.useValues)(T.a),_=C.currentTeam,I=Object(c.useValues)(p.a),m=I.currentOrganization,i=Object(c.useValues)(e.b),R=i.annotations,B=i.annotationsLoading,K=i.next,U=i.loadingNext,W=i.timezone,O=Object(c.useActions)(e.b),y=O.loadAnnotationsNext,N=O.openModalToCreateAnnotation,z=O.openModalToEditAnnotation,V=[{title:"Annotation",key:"annotation",width:"30%",render:function(a,o){return Object(t.jsx)("div",{className:"ph-no-capture",children:o.content})}},{title:"Date\xA0and\xA0time (".concat(Object(v.Ab)(W),")"),dataIndex:"date_marker",render:function(a,o){return o.date_marker.format(e.a)},sorter:function(a,o){return a.date_marker.diff(o.date_marker)}},{title:"Scope",key:"scope",render:function(a,o){var E=e.d[o.scope],S=o.scope===l.c.Insight?'This annotation only applies to the "'.concat(o.insight_name,'" insight'):o.scope===l.c.Project?"This annotation applies to all insights in the ".concat(_==null?void 0:_.name," project"):"This annotation applies to all insights in the ".concat(m==null?void 0:m.name," organization");return Object(t.jsx)(L.a,{title:S,placement:"right",children:Object(t.jsx)(P.a,{className:"uppercase",children:o.scope===l.c.Insight?Object(t.jsxs)(D.Link,{to:A.a.insightView(o.insight_short_id),className:"flex items-center",target:"_blank",children:[E,Object(t.jsx)(j.IconOpenInNew,{className:"ml-1"})]}):E})})},sorter:function(a,o){return e.c[a.scope]-e.c[o.scope]}},Object(u.b)(),Object(u.a)(),{key:"actions",width:0,render:function(a,o){return Object(t.jsx)(d.a,{icon:Object(t.jsx)(j.IconEdit,{}),size:"small",type:"tertiary",status:"stealth",onClick:function(){return z(o)}})}}];return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(g.a,{title:"Annotations",caption:Object(t.jsxs)(t.Fragment,{children:["Annotations add time-specific context to insights and dashboards.",Object(t.jsx)("br",{}),"Manage all of this project's annotations from this page."]}),buttons:Object(t.jsx)(d.a,{type:"primary","data-attr":"create-annotation",onClick:function(){return N()},children:"New annotation"})}),Object(t.jsx)(x.a,{"data-attr":"annotations-table",rowKey:"id",dataSource:R,columns:V,defaultSorting:{columnKey:"date_marker",order:-1},noSortingCancellation:!0,loading:B,emptyState:"No annotations yet"}),K&&Object(t.jsx)("div",{className:"flex justify-center mt-6",children:Object(t.jsx)(d.a,{type:"primary",loading:U,onClick:function(){y()},children:"Load more annotations"})}),Object(t.jsx)(h.a,{})]})}}}]);
