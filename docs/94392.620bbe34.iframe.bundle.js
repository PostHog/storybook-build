(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[94392],{"./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/UniversalFilters/UniversalFilters.tsx"),lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/components/UniversalFilters/universalFiltersLogic.ts"),lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/components/UniversalFilters/utils.ts"),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/insights/filters/TestAccountFilter/index.ts"),_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingSceneLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let RecordingsUniversalFilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),{replaceGroupValue,removeGroupValue}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),[allowInitiallyOpen,setAllowInitiallyOpen]=(0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_7__.useEffect)(()=>{setAllowInitiallyOpen(!0)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:filterGroup.values.map((filterOrGroup,index)=>(0,lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_6__.pU)(filterOrGroup)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.Group,{index:index,group:filterOrGroup,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(RecordingsUniversalFilterGroup,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.AddFilterButton,{size:"small",type:"secondary"})]},index):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.Value,{index:index,filter:filterOrGroup,onRemove:()=>removeGroupValue(index),onChange:value=>replaceGroupValue(index,value),initiallyOpen:allowInitiallyOpen},index))})},__WEBPACK_DEFAULT_EXPORT__={FilterGroup:()=>{let{filterGroup,filterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__.H),{setFilterGroup,setFilterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__.H);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex flex-1 items-center justify-between space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z,{rootKey:"error-tracking",group:filterGroup,taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.Cohorts],onChange:setFilterGroup,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(RecordingsUniversalFilterGroup,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_8__.z,{size:"small",filters:{filter_test_accounts:filterTestAccounts},onChange:_ref=>{let{filter_test_accounts}=_ref;setFilterTestAccounts(filter_test_accounts||!1)}})})]})},Options:_ref2=>{let{showOrder=!0}=_ref2,{dateRange}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__.H),{setDateRange}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_9__.H),{order}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_10__.D),{setOrder}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_10__.D);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex gap-4 py-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex items-center gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span",{children:"Date range:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__.f,{dateFrom:dateRange.date_from,dateTo:dateRange.date_to,onChange:(changedDateFrom,changedDateTo)=>{setDateRange({date_from:changedDateFrom,date_to:changedDateTo})},size:"small"})]}),showOrder&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex items-center gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span",{children:"Sort by:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Yv,{onSelect:setOrder,onChange:setOrder,value:order,options:[{value:"last_seen",label:"Last seen"},{value:"first_seen",label:"First seen"},{value:"occurrences",label:"Occurrences"},{value:"users",label:"Users"},{value:"sessions",label:"Sessions"}],size:"small"})]})]})}}},"./frontend/src/scenes/error-tracking/ErrorTrackingGroupScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingGroupScene:()=>ErrorTrackingGroupScene,scene:()=>scene});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),ErrorTracking=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss"),ErrorTracking_default=__webpack_require__.n(ErrorTracking),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(ErrorTracking_default(),options),ErrorTracking_default().locals;var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),ErrorTrackingFilters=__webpack_require__("./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),kea_router_lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),sceneTypes=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),errorTrackingLogic=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),queries=__webpack_require__("./frontend/src/scenes/error-tracking/queries.ts");let ErrorGroupTab=function(ErrorGroupTab){return ErrorGroupTab.Overview="overview",ErrorGroupTab.Breakdowns="breakdowns",ErrorGroupTab}({}),errorTrackingGroupSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","error-tracking","errorTrackingGroupSceneLogic",key]),(0,index_esm.props)({}),(0,index_esm.connect)({values:[errorTrackingLogic.H,["dateRange","filterTestAccounts","filterGroup"]]}),(0,index_esm.actions)({setErrorGroupTab:tab=>({tab})}),(0,index_esm.reducers)(()=>({errorGroupTab:[ErrorGroupTab.Overview,{setErrorGroupTab:(_,_ref)=>{let{tab}=_ref;return tab}}]})),(0,lib.loaders)(_ref2=>{let{props,values}=_ref2;return{group:[null,{loadGroup:async()=>{let response=await api.ZP.query((0,queries.Ge)({fingerprint:props.fingerprint,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,filterGroup:values.filterGroup}));return response.results[0]}}]}}),(0,index_esm.selectors)({breadcrumbs:[(_,p)=>[p.fingerprint],fingerprint=>[{key:sceneTypes.x.ErrorTracking,name:"Error tracking",path:urls.j.errorTracking()},{key:[sceneTypes.x.ErrorTrackingGroup,fingerprint],name:fingerprint}]],events:[s=>[s.group],group=>group?.events||[]]}),(0,kea_router_lib.actionToUrl)(_ref3=>{let{values}=_ref3;return{setErrorGroupTab:()=>{let searchParams=kea_router_lib.router.values.searchParams;return values.errorGroupTab!=ErrorGroupTab.Overview&&(searchParams.tab=values.errorGroupTab),[kea_router_lib.router.values.location.pathname,searchParams]}}}),(0,kea_router_lib.urlToAction)(_ref4=>{let{actions}=_ref4;return{[urls.j.errorTrackingGroup("*")]:(_,searchParams)=>{searchParams.tab&&actions.setErrorGroupTab(searchParams.tab)}}}),(0,index_esm.afterMount)(_ref5=>{let{actions}=_ref5;actions.loadGroup()})]);var clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),useResizeObserver=__webpack_require__("./frontend/src/lib/hooks/useResizeObserver.ts"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let gridColumnsMap={small:"grid-cols-1",medium:"grid-cols-2",large:"grid-cols-3"},BreakdownsTab=()=>{let{ref,size}=(0,useResizeObserver.S)({0:"small",750:"medium",1200:"large"});return(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("ErrorTracking__breakdowns grid gap-5",gridColumnsMap[size]),ref:ref,children:[{title:"Device",options:[{value:"$browser",label:"Browser"},{value:"$device_type",label:"Device type"},{value:"$os",label:"Operating system"}]},{title:"User",options:[{value:"$user_id",label:"User ID"},{value:"$ip",label:"IP address"}]},{title:"URL",options:[{value:"$pathname",label:"Path"}]}].map((group,index)=>(0,jsx_runtime.jsx)(BreakdownGroup,{group:group},index))})},BreakdownGroup=_ref=>{let{group}=_ref,{dateRange,filterTestAccounts,filterGroup}=(0,index_esm.useValues)(errorTrackingLogic.H),[selectedProperty,setSelectedProperty]=(0,react.useState)(group.options[0].value);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between",children:[(0,jsx_runtime.jsx)("h2",{children:group.title}),group.options.length>1&&(0,jsx_runtime.jsx)(src.P4,{size:"xsmall",value:selectedProperty,options:group.options,onChange:setSelectedProperty})]}),(0,jsx_runtime.jsx)(Query.A,{query:(0,queries.F1)({breakdownProperty:selectedProperty,dateRange:dateRange,filterTestAccounts:filterTestAccounts,filterGroup:filterGroup})})]})};var apps_common_src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),EmptyMessage=__webpack_require__("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),ErrorDisplay=__webpack_require__("./frontend/src/lib/components/Errors/ErrorDisplay.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),Playlist=__webpack_require__("./frontend/src/lib/components/Playlist/Playlist.tsx"),SessionRecordingPreview=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingPreview.tsx");let OverviewTab=()=>{let{group,events,groupLoading}=(0,index_esm.useValues)(errorTrackingGroupSceneLogic);return groupLoading?(0,jsx_runtime.jsx)(src.$j,{className:"self-align-center justify-self-center"}):group?(0,jsx_runtime.jsx)("div",{className:"ErrorTracking__group",children:(0,jsx_runtime.jsx)("div",{className:"h-full space-y-2",children:(0,jsx_runtime.jsx)(Playlist.g,{title:"Exceptions",sections:[{key:"exceptions",title:"Exceptions",items:events.map(e=>({...e,id:e.uuid})),render:ListItemException}],listEmptyState:(0,jsx_runtime.jsx)("div",{className:"flex justify-center p-4",children:"No exceptions found"}),content:_ref=>{let{activeItem:event}=_ref;return event?(0,jsx_runtime.jsx)("div",{className:"h-full overflow-auto pl-2",children:(0,jsx_runtime.jsx)(ErrorDisplay.X,{eventProperties:JSON.parse(event.properties)})}):(0,jsx_runtime.jsx)(EmptyMessage.M,{title:"No exception selected",description:"Please select an exception from the list on the left"})},selectInitialItem:!0})})}):(0,jsx_runtime.jsx)(NotFound.T,{object:"exception"})},ListItemException=_ref2=>{let{item:event,isActive}=_ref2,properties=JSON.parse(event.properties),recordingProperties=["$browser","$device_type","$os"].flatMap(property=>{let value=properties[property],label=value;return"$device_type"===property&&(value=properties.$device_type||properties.$initial_device_type),{property,value,label}}).filter(property=>!!property.value);return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("cursor-pointer p-2 space-y-1",isActive&&"border-l-4 border-primary-3000"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center space-x-3",children:[(0,jsx_runtime.jsx)("div",{className:"line-clamp-1",children:(0,jsx_runtime.jsx)(apps_common_src.IZ,{person:event.person,withIcon:!0,noPopover:!0,noLink:!0})}),(0,jsx_runtime.jsx)(SessionRecordingPreview.D7,{recordingProperties:recordingProperties,iconClassNames:"text-muted"})]}),properties.$current_url&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted truncate",children:properties.$current_url}),(0,jsx_runtime.jsx)(apps_common_src.w4,{className:"overflow-hidden text-ellipsis text-xs text-muted shrink-0",time:event.timestamp,placement:"right",showPopover:!1})]})},scene={component:ErrorTrackingGroupScene,logic:errorTrackingGroupSceneLogic,paramsToProps:_ref=>{let{params:{id:fingerprint}}=_ref;return{fingerprint}}};function ErrorTrackingGroupScene(){let{errorGroupTab}=(0,index_esm.useValues)(errorTrackingGroupSceneLogic),{setErrorGroupTab}=(0,index_esm.useActions)(errorTrackingGroupSceneLogic);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ErrorTrackingFilters.ZP.FilterGroup,{}),(0,jsx_runtime.jsx)(src.p2,{className:"mt-2"}),(0,jsx_runtime.jsx)(ErrorTrackingFilters.ZP.Options,{showOrder:!1}),(0,jsx_runtime.jsx)(src.TP,{activeKey:errorGroupTab,onChange:setErrorGroupTab,tabs:[{key:ErrorGroupTab.Overview,label:"Overview",content:(0,jsx_runtime.jsx)(OverviewTab,{})},{key:ErrorGroupTab.Breakdowns,label:"Breakdowns",content:(0,jsx_runtime.jsx)(BreakdownsTab,{})}]})]})}},"./frontend/src/scenes/error-tracking/errorTrackingLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>errorTrackingLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/types.ts");let lastHour={value:"1h",label:"1h"},lastDay={value:"24h",label:"24h"},lastMonth={value:"mStart",label:"Month"},lastYear={value:"yStart",label:"Year"},customOptions={dStart:[lastDay,lastHour],"-24h":[lastDay,lastHour],"-1dStart":[{value:"-1d24h",label:"24h"},{value:"-1d1h",label:"1h"}],mStart:[lastMonth,lastDay],yStart:[lastYear,lastMonth],all:[lastYear,lastMonth,lastDay]},DEFAULT_FILTER_GROUP={type:_types__WEBPACK_IMPORTED_MODULE_1__.J2.And,values:[{type:_types__WEBPACK_IMPORTED_MODULE_1__.J2.And,values:[]}]},errorTrackingLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setDateRange:dateRange=>({dateRange}),setFilterGroup:filterGroup=>({filterGroup}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts}),setSparklineSelectedPeriod:period=>({period}),_setSparklineOptions:options=>({options})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({dateRange:[{date_from:"-7d",date_to:null},{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],filterGroup:[DEFAULT_FILTER_GROUP,{persist:!0},{setFilterGroup:(_,_ref2)=>{let{filterGroup}=_ref2;return filterGroup}}],filterTestAccounts:[!1,{persist:!0},{setFilterTestAccounts:(_,_ref3)=>{let{filterTestAccounts}=_ref3;return filterTestAccounts}}],sparklineSelectedPeriod:[lastDay.value,{persist:!0},{setSparklineSelectedPeriod:(_,_ref4)=>{let{period}=_ref4;return period}}],sparklineOptions:[[lastDay,lastHour],{persist:!0},{_setSparklineOptions:(_,_ref5)=>{let{options}=_ref5;return options}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref6=>{let{values,actions}=_ref6;return{setDateRange:_ref7=>{let{dateRange:{date_from}}=_ref7;if(date_from){var _customOptions$date_f;let options=null!==(_customOptions$date_f=customOptions[date_from])&&void 0!==_customOptions$date_f?_customOptions$date_f:[];if(0===options.length){let isRelative=date_from.match(/-\d+[hdmy]/);if(isRelative){let value=date_from?.replace("-","");options.push({value:value,label:value},lastDay)}}if(0===options.length)actions.setSparklineSelectedPeriod(null);else{let possibleValues=options.map(o=>o.value);values.sparklineSelectedPeriod&&possibleValues.includes(values.sparklineSelectedPeriod)||actions.setSparklineSelectedPeriod(options[0].value)}actions._setSparklineOptions(options)}else actions.setSparklineSelectedPeriod(null),actions._setSparklineOptions([])}}})])},"./frontend/src/scenes/error-tracking/errorTrackingSceneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>errorTrackingSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.5/node_modules/kea-subscriptions/lib/index.js"),_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),_queries__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/error-tracking/queries.ts");let errorTrackingSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingSceneLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_2__.H,["dateRange","filterTestAccounts","filterGroup","sparklineSelectedPeriod"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setOrder:order=>({order}),setSelectedRows:selectedRows=>({selectedRows})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({order:["last_seen",{persist:!0},{setOrder:(_,_ref)=>{let{order}=_ref;return order}}],selectedRows:[[],{setSelectedRows:(_,_ref2)=>{let{selectedRows}=_ref2;return selectedRows}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({query:[s=>[s.order,s.dateRange,s.filterTestAccounts,s.filterGroup,s.sparklineSelectedPeriod],(order,dateRange,filterTestAccounts,filterGroup,sparklineSelectedPeriod)=>(0,_queries__WEBPACK_IMPORTED_MODULE_3__.mx)({order,dateRange,filterTestAccounts,filterGroup,sparklineSelectedPeriod})]}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_1__.Vt)(_ref3=>{let{actions}=_ref3;return{query:()=>actions.setSelectedRows([])}})])},"./frontend/src/scenes/error-tracking/queries.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F1:()=>errorTrackingGroupBreakdownQuery,Ge:()=>errorTrackingGroupQuery,mx:()=>errorTrackingQuery});var lib_dayjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/dayjs.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/utils.tsx"),_queries_schema__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/queries/schema.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/types.ts");let SPARKLINE_CONFIGURATIONS={"-1d1h":{value:60,displayAs:"minute",offsetHours:24},"-1d24h":{value:24,displayAs:"hour",offsetHours:24},"1h":{value:60,displayAs:"minute"},"24h":{value:24,displayAs:"hour"},"7d":{value:168,displayAs:"hour"},"14d":{value:336,displayAs:"hour"},"90d":{value:90,displayAs:"day"},"180d":{value:26,displayAs:"week"},mStart:{value:31,displayAs:"day"},yStart:{value:52,displayAs:"week"}},toStartOfIntervalFn={minute:"toStartOfMinute",hour:"toStartOfHour",day:"toStartOfDay",week:"toStartOfWeek",month:"toStartOfMonth"},errorTrackingQuery=_ref=>{let{order,dateRange,filterTestAccounts,filterGroup,sparklineSelectedPeriod,columns}=_ref,select=[];if(columns||(columns=["error","occurrences","sessions","users","assignee"]),sparklineSelectedPeriod){let{value,displayAs,offsetHours}=parseSparklineSelection(sparklineSelectedPeriod),{labels,data}=generateSparklineProps({value,displayAs,offsetHours});select.splice(1,0,`<Sparkline data={${data}} labels={[${labels.join(",")}]} /> as volume`),columns.splice(1,0,"volume")}return{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_2__.OH.DataTableNode,source:{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_2__.OH.ErrorTrackingQuery,select:select,order:order,dateRange:dateRange,filterGroup:filterGroup,filterTestAccounts:filterTestAccounts},showActions:!1,showTimings:!1,columns:columns}},parseSparklineSelection=selection=>{if(selection in SPARKLINE_CONFIGURATIONS)return SPARKLINE_CONFIGURATIONS[selection];let result=selection.match(/\d+|\D+/g);if(result){let[value,unit]=result;return{value:Number(value)*("y"===unit?12:1),displayAs:"h"===unit?"hour":"d"===unit?"day":"w"===unit?"week":"month"}}return{value:24,displayAs:"hour"}},generateSparklineProps=_ref2=>{let{value,displayAs,offsetHours}=_ref2,offset=null!=offsetHours?offsetHours:0,now=(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_0__.Bv)().subtract(offset,"hours").startOf(displayAs),dates=(0,lib_utils__WEBPACK_IMPORTED_MODULE_1__.w6)(value).map(idx=>now.subtract(value-(idx+1),displayAs)),labels=dates.map(d=>`'${d.format("D MMM, YYYY HH:mm")} (UTC)'`),toStartOfInterval=toStartOfIntervalFn[displayAs],data=`reverse(arrayMap(x -> countEqual(groupArray(dateDiff('${displayAs}', ${toStartOfInterval}(timestamp), ${toStartOfInterval}(subtractHours(now(), ${offset})))), x), range(${value})))`;return{labels,data}},errorTrackingGroupQuery=_ref3=>{let{fingerprint,dateRange,filterTestAccounts,filterGroup}=_ref3;return{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_2__.OH.ErrorTrackingQuery,eventColumns:["uuid","properties","timestamp","person"],fingerprint:fingerprint,dateRange:dateRange,filterGroup:filterGroup,filterTestAccounts:filterTestAccounts}},errorTrackingGroupBreakdownQuery=_ref4=>{let{breakdownProperty,dateRange,filterTestAccounts,filterGroup}=_ref4;return{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_2__.OH.InsightVizNode,source:{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_2__.OH.TrendsQuery,trendsFilter:{display:_types__WEBPACK_IMPORTED_MODULE_3__.Qb.ActionsBarValue},breakdownFilter:{breakdown_type:"event",breakdown:breakdownProperty,breakdown_limit:10},series:[{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_2__.OH.EventsNode,event:"$exception",math:_types__WEBPACK_IMPORTED_MODULE_3__.vN.TotalCount}],dateRange:dateRange,properties:filterGroup.values,filterTestAccounts}}}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ErrorTracking__group{height:calc(100vh - 16rem);min-height:25rem}",""]),module.exports=exports}}]);