var Ue=Object.defineProperty;var H=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var re=(i,n,e)=>n in i?Ue(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e,K=(i,n)=>{for(var e in n||(n={}))ae.call(n,e)&&re(i,e,n[e]);if(H)for(var e of H(n))le.call(n,e)&&re(i,e,n[e]);return i};var Y=(i,n)=>{var e={};for(var a in i)ae.call(i,a)&&n.indexOf(a)<0&&(e[a]=i[a]);if(i!=null&&H)for(var a of H(i))n.indexOf(a)<0&&le.call(i,a)&&(e[a]=i[a]);return e};var Q=(i,n,e)=>new Promise((a,c)=>{var v=g=>{try{f(e.next(g))}catch(r){c(r)}},S=g=>{try{f(e.throw(g))}catch(r){c(r)}},f=g=>g.done?a(g.value):Promise.resolve(g.value).then(v,S);f((e=e.apply(i,n)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[276],{"./frontend/src/lib/components/Table/utils.tsx":function(i,n,e){"use strict";e.d(n,"a",function(){return f});var a=e("./frontend/src/lib/hooks/useWindowSize.js"),c=e("./frontend/src/lib/utils/responsiveUtils.tsx"),v=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),S=e.n(v);function f(r){return Object(v.jsx)("span",{style:{whiteSpace:"nowrap"},children:r})}const g=r=>{const{width:y}=Object(a.a)(),C=Object(c.b)(r),_=!!y&&y<=C;return{isTableScrolling:_,tableScrollBreakpoint:C,tableScrollX:_?"max-content":`${C}px`}};try{f.displayName="normalizeColumnTitle",f.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:f.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(r){}try{g.displayName="useIsTableScrolling",g.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:g.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(r){}},"./frontend/src/scenes/groups/RelatedGroups.tsx":function(i,n,e){"use strict";e.d(n,"a",function(){return M});var a=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/lib/components/LemonTable/index.ts"),v=e("./frontend/src/models/groupsModel.ts"),S=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/icons/UserOutlined.js"),f=e.n(S),g=e("./frontend/src/lib/utils.tsx"),r=e("./frontend/src/scenes/persons/PersonHeader.tsx"),y=e("./frontend/src/lib/api.ts"),C=e("./frontend/src/scenes/teamLogic.tsx");const _=Object(a.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[C.a,["currentTeamId"]]},props:{},key:l=>{var u;return`${(u=l.groupTypeIndex)!==null&&u!==void 0?u:"person"}-${l.id}`},actions:()=>({loadRelatedActors:!0}),loaders:l=>{let{values:u,props:z}=l;return{relatedActors:[[],{loadRelatedActors:()=>Q(this,null,function*(){const L=`api/projects/${u.currentTeamId}/groups/related?${Object(g.Ib)({group_type_index:z.groupTypeIndex,id:z.id})}`;return yield y.b.get(L)}),setGroup:()=>[]}]}},events:l=>{let{actions:u}=l;return{afterMount:u.loadRelatedActors}}});var N=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),R=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function M(l){let{groupTypeIndex:u,id:z}=l;const{relatedActors:L,relatedActorsLoading:o}=Object(a.useValues)(_({groupTypeIndex:u,id:z})),{aggregationLabel:m}=Object(a.useValues)(v.a),b=[{title:"Type",key:"type",render:function(U,I){return I.type==="group"?Object(R.jsx)(R.Fragment,{children:Object(g.i)(m(I.group_type_index).singular)}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(f.a,{})," Person"]})}},{title:"id",key:"id",render:function(U,I){return I.type=="group"?Object(R.jsx)(N.a,{actor:I}):Object(R.jsx)(r.a,{person:I,withIcon:!1})}}];return Object(R.jsx)(c.a,{dataSource:L,columns:b,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:o,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{M.displayName="RelatedGroups",M.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:M.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(l){}},"./frontend/src/scenes/persons/Person.tsx":function(i,n,e){"use strict";e.r(n),e.d(n,"scene",function(){return Le}),e.d(n,"Person",function(){return ne});var a=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),c=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/dropdown/index.js"),v=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/menu/index.js"),S=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tag/index.js"),f=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/DownOutlined.js"),g=e("./frontend/src/scenes/events/index.ts"),r=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),y=e("./frontend/src/scenes/persons/personsLogic.tsx"),C=e("./frontend/src/scenes/persons/PersonHeader.tsx"),_=e("./frontend/src/scenes/persons/Persons.scss"),N=e("./frontend/src/lib/components/CopyToClipboard.tsx"),R=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/modal/index.js"),M=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),l=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),u=e.n(l),z=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss"),L=e.n(z),o={};o.insert="head",o.singleton=!1;var m=u()(L.a,o),b=L.a.locals||{},x=e("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),U=e("./frontend/src/lib/api.ts"),I=e("./frontend/src/lib/components/lemonToast.tsx"),A=e("./frontend/src/lib/utils/eventUsageLogic.ts");const h=Object(r.kea)({props:{},key:t=>{var d;return(d=t.person.id)!==null&&d!==void 0?d:"new"},path:t=>["scenes","persons","mergeSplitPersonLogic",t],connect:()=>({actions:[Object(y.a)({syncWithUrl:!0}),["setListFilters","loadPersons","setPerson","setSplitMergeModalShown"]],values:[Object(y.a)({syncWithUrl:!0}),["persons"]]}),actions:{setSelectedPersonToAssignSplit:t=>({id:t}),cancel:!0},reducers:t=>{let{props:d}=t;return{person:[d.person,{}],selectedPersonsToAssignSplit:[null,{setSelectedPersonToAssignSplit:(O,T)=>{let{id:W}=T;return W}}]}},listeners:t=>{let{actions:d,values:O}=t;return{setListFilters:()=>{d.loadPersons()},cancel:()=>{O.executedLoading||d.setSplitMergeModalShown(!1)}}},loaders:t=>{let{values:d,actions:O}=t;return{executed:[!1,{execute:()=>Q(this,null,function*(){return(yield U.b.create("api/person/"+d.person.id+"/split/",K({},d.selectedPersonsToAssignSplit?{main_distinct_id:d.selectedPersonsToAssignSplit}:{}))).success?(I.d.success("Person succesfully split. This may take up to a couple of minutes to complete."),A.e.actions.reportPersonSplit(d.person.distinct_ids.length),O.setSplitMergeModalShown(!1),x.router.actions.push("/persons"),!0):!1})}]}},events:t=>{let{actions:d}=t;return{afterMount:[d.loadPersons]}}});var B=e("./frontend/src/lib/utils.tsx"),k=e("./frontend/src/lib/components/AlertMessage/index.ts"),s=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function j(t){let{person:d}=t;const O={person:d},{executedLoading:T}=Object(r.useValues)(h(O)),{execute:W,cancel:F}=Object(r.useActions)(h(O));return Object(s.jsx)(R.a,{visible:!0,title:"Split persons",onCancel:F,className:"merge-split-person",okText:"Split persons",onOk:W,okButtonProps:{loading:T},cancelButtonProps:{disabled:T},children:d.distinct_ids.length<2?"Only persons with more than two distinct IDs can be split.":Object(s.jsx)(r.BindLogic,{logic:h,props:O,children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(p,{})})})})}function p(){const{person:t,executedLoading:d}=Object(r.useValues)(h),{setSelectedPersonToAssignSplit:O}=Object(r.useActions)(h);return t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"This will split all Distinct IDs for this person into unique persons."}),Object(s.jsxs)("p",{children:["You can select a distinct ID for which all the current properties will be assigned (",Object(s.jsx)("i",{children:"optional"}),"). All other new users will start without any properties."]}),Object(s.jsx)(M.a,{allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Select a distinct ID to which to assign all properties (optional)",onChange:T=>O(T),filterOption:!1,disabled:d,children:t==null?void 0:t.distinct_ids.map(T=>Object(s.jsx)(M.a.Option,{value:T,children:T},T))}),Object(s.jsxs)(k.a,{type:"warning",className:"mt-4",children:["This will create ",Object(s.jsx)("strong",{children:t.distinct_ids.length-1})," ",Object(B.vb)(t.distinct_ids.length-1,"new\xA0person",void 0,!1),". This might change the numbers in your charts, even historically. Please be certain."]})]}):null}try{j.displayName="MergeSplitPerson",j.__docgenInfo={description:"",displayName:"MergeSplitPerson",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"PersonType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"]={docgenInfo:j.__docgenInfo,name:"MergeSplitPerson",path:"frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"})}catch(t){}var P=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),J=e("./frontend/src/lib/components/LemonTable/index.ts"),X=e("./frontend/src/scenes/urls.ts"),de=e("./frontend/src/lib/components/Link.tsx");function ie(){const{cohorts:t,cohortsLoading:d,person:O}=Object(r.useValues)(y.a),{loadCohorts:T}=Object(r.useActions)(y.a);Object(P.useEffect)(()=>{T()},[O]);const W=[{title:"Name",dataIndex:"name",key:"name",className:"ph-no-capture",render:function(E,$){return Object(s.jsx)(de.a,{to:X.a.cohort($.id),children:Object(s.jsx)("strong",{children:$.name})})},sorter:(F,E)=>(F.name||"").localeCompare(E.name||"")},{title:"Users in cohort",render:function(E){return E==null?void 0:E.toLocaleString()},dataIndex:"count",sorter:(F,E)=>(F.count||0)-(E.count||0)}];return Object(s.jsx)(J.a,{dataSource:t||[],loading:d,columns:W,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},emptyState:"This person doesn't belong to any cohort"})}var ce=e("./frontend/src/lib/components/PropertiesTable/index.ts"),ue=e("./frontend/src/lib/components/TZLabel/index.tsx"),ee=e("./frontend/src/lib/components/Tooltip.tsx"),G=e("./frontend/src/types.ts"),pe=e("./frontend/src/lib/components/PageHeader.tsx"),me=e("./frontend/src/scenes/groups/RelatedGroups.tsx"),je=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),ge=e("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),fe=e("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),w=e("./frontend/@posthog/lemon-ui/src/index.ts"),be=e("./frontend/src/scenes/teamLogic.tsx"),he=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),xe=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),Oe=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),ve=e("./frontend/src/lib/components/NotFound/index.tsx"),ye=e("./frontend/src/scenes/persons/RelatedFeatureFlags.tsx"),Se=e("./frontend/src/queries/Query/Query.tsx"),Z=e("./frontend/src/queries/schema.ts"),Te=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Pe=e("./frontend/src/lib/constants.tsx"),se=e("./frontend/src/scenes/persons/personDeleteModalLogic.tsx"),Ie=e("./frontend/src/queries/nodes/DataTable/utils.ts"),Re=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),te=e("./frontend/src/lib/components/icons.tsx");const{TabPane:V}=a.a,Le={component:ne,logic:y.a,paramsToProps:t=>{let{params:{_:d}}=t;return{syncWithUrl:!0,urlId:decodeURIComponent(d)}}};function Ae(t){let{person:d}=t;return Object(s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"IDs:"})," ",Object(s.jsx)(N.a,{tooltipMessage:null,description:"person distinct ID",style:{justifyContent:"flex-end"},children:d.distinct_ids[0]}),d.distinct_ids.length>1&&Object(s.jsx)(c.a,{overlay:Object(s.jsx)(v.a,{children:d.distinct_ids.slice(1).map(O=>Object(s.jsx)(v.a.Item,{children:Object(s.jsx)(N.a,{description:"person distinct ID",iconStyle:{color:"var(--primary)"},children:O})},O))}),trigger:["click"],children:Object(s.jsxs)(S.a,{className:"extra-ids",children:["+",d.distinct_ids.length-1,Object(s.jsx)(f.a,{})]})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"First seen:"})," ",d.created_at?Object(s.jsx)(ue.a,{time:d.created_at}):"unknown"]})]})}function ne(){const{person:t,personLoading:d,currentTab:O,splitMergeModalShown:T,urlId:W,distinctId:F}=Object(r.useValues)(y.a),{loadPersons:E,editProperty:$,deleteProperty:Ce,navigateToTab:Me,setSplitMergeModalShown:Ee,setDistinctId:_e}=Object(r.useActions)(y.a),{showPersonDeleteModal:Fe}=Object(r.useActions)(se.a),{deletedPersonLoading:oe}=Object(r.useValues)(se.a),{groupsEnabled:De}=Object(r.useValues)(je.b),{currentTeam:q}=Object(r.useValues)(be.a),{featureFlags:Ne}=Object(r.useValues)(Te.a),ze=Ne[Pe.i.DATA_EXPLORATION_LIVE_EVENTS];return t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(pe.a,{title:Object(C.b)(t),caption:Object(s.jsx)(Ae,{person:t}),buttons:Object(s.jsxs)("div",{className:"flex gap-2",children:[Object(s.jsx)(w.LemonButton,{onClick:()=>Fe(t,()=>E()),disabled:oe,loading:oe,type:"secondary",status:"danger","data-attr":"delete-person",children:"Delete person"}),t.distinct_ids.length>1&&Object(s.jsx)(w.LemonButton,{onClick:()=>Ee(!0),"data-attr":"merge-person-button",type:"secondary",children:"Split IDs"})]})}),Object(s.jsx)(he.a,{}),Object(s.jsxs)(a.a,{activeKey:O,onChange:D=>{Me(D)},destroyInactiveTabPane:!0,"data-attr":"persons-tabs",children:[Object(s.jsx)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-properties-tab",children:"Properties"}),children:Object(s.jsx)(ce.a,{properties:t.properties||{},searchable:!0,onEdit:$,sortProperties:!0,embedded:!1,onDelete:D=>Ce(D)})},G.K.PROPERTIES),Object(s.jsx)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-events-tab",children:"Events"}),children:ze?Object(s.jsx)(Se.a,{query:{kind:Z.a.DataTableNode,full:!0,hiddenColumns:["person"],source:{kind:Z.a.EventsQuery,select:Object(Ie.a)(Z.a.EventsQuery),personId:t.id}}}):Object(s.jsx)(g.b,{pageKey:t.distinct_ids.join("__"),fixedFilters:{person_id:t.id},showPersonColumn:!1,sceneUrl:X.a.person(W||t.distinct_ids[0]||String(t.id))})},G.K.EVENTS),Object(s.jsxs)(V,{tab:Object(s.jsx)("span",{"data-attr":"person-session-recordings-tab",children:"Recordings"}),children:[q!=null&&q.session_recording_opt_in?null:Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsxs)(k.a,{type:"info",children:["Session recordings are currently disabled for this project. To use this feature, please go to your ",Object(s.jsx)(w.Link,{to:`${X.a.projectSettings()}#recordings`,children:"project settings"})," and enable it."]})}),Object(s.jsx)(Oe.a,{personUUID:t.uuid,updateSearchParams:!0,filters:Re.a})]},G.K.SESSION_RECORDINGS),Object(s.jsx)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-cohorts-tab",children:"Cohorts"}),children:Object(s.jsx)(ie,{})},G.K.COHORTS),De&&t.uuid&&Object(s.jsx)(V,{tab:Object(s.jsxs)("span",{className:"flex items-center","data-attr":"persons-related-tab",children:["Related groups",Object(s.jsx)(ee.a,{title:"People and groups that have shared events with this person in the last 90 days.",children:Object(s.jsx)(te.IconInfo,{className:"ml-1 text-base shrink-0"})})]}),children:Object(s.jsx)(me.a,{id:t.uuid,groupTypeIndex:null})},G.K.RELATED),t.uuid&&Object(s.jsxs)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-related-flags-tab",children:"Feature flags"}),children:[Object(s.jsxs)("div",{className:"flex space-x-2 items-center mb-2",children:[Object(s.jsxs)("div",{className:"flex items-center",children:["Choose ID:",Object(s.jsx)(ee.a,{title:"Feature flags values can depend on person distincts IDs. Turn on persistence in feature flag settings if you'd like these to be constant always.",children:Object(s.jsx)(te.IconInfo,{className:"ml-1 text-base"})})]}),Object(s.jsx)(w.LemonSelect,{value:t.distinct_ids[0],onChange:D=>D&&_e(D),options:t.distinct_ids.map(D=>({label:D,value:D})),"data-attr":"person-feature-flags-select"})]}),Object(s.jsx)(w.LemonDivider,{className:"mb-4"}),Object(s.jsx)(ye.b,{distinctId:F||t.distinct_ids[0]})]},G.K.FEATURE_FLAGS),Object(s.jsx)(V,{tab:"History",children:Object(s.jsx)(ge.a,{scope:fe.a.PERSON,id:t.id,caption:Object(s.jsx)(k.a,{type:"info",children:"This page only shows changes made by users in the PostHog site. Automatic changes from the API aren't shown here."})})},"history")]}),T&&t&&Object(s.jsx)(j,{person:t})]}):d?Object(s.jsx)(xe.b,{}):Object(s.jsx)(ve.a,{object:"Person"})}},"./frontend/src/scenes/persons/Persons.scss":function(i,n,e){"use strict";var a=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),c=e.n(a),v=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),S=e.n(v),f={};f.insert="head",f.singleton=!1;var g=c()(S.a,f),r=S.a.locals||{}},"./frontend/src/scenes/persons/RelatedFeatureFlags.tsx":function(i,n,e){"use strict";e.d(n,"a",function(){return u}),e.d(n,"b",function(){return L});var a=e("./frontend/@posthog/lemon-ui/src/index.ts"),c=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/lib/components/Table/utils.tsx"),S=e("./frontend/src/lib/utils.tsx"),f=e("./frontend/src/lib/utils/stringWithWBR.tsx"),g=e("./frontend/src/scenes/urls.ts"),r=e("./frontend/src/types.ts"),y=e("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),C=e("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),_=e("./frontend/src/lib/api.ts"),N=e("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),R=e("./frontend/src/scenes/teamLogic.tsx");const M=Object(c.kea)([Object(c.path)(["scenes","persons","relatedFeatureFlagsLogic"]),Object(c.connect)({values:[R.a,["currentTeamId"],N.b,["featureFlags"]]}),Object(c.props)({}),Object(c.key)(o=>`${o.distinctId}`),Object(c.actions)({setSearchTerm:o=>({searchTerm:o}),setFilters:(o,m)=>({filters:o,replace:m}),loadRelatedFeatureFlags:!0}),Object(C.loaders)(o=>{let{values:m,props:b}=o;return{relatedFeatureFlags:[null,{loadRelatedFeatureFlags:()=>Q(this,null,function*(){return yield _.b.get(`api/projects/${m.currentTeamId}/feature_flags/evaluation_reasons?${Object(S.Ib)(K({distinct_id:b.distinctId},b.groups?{groups:b.groups}:{}))}`)})}]}}),Object(c.reducers)({searchTerm:["",{setSearchTerm:(o,m)=>{let{searchTerm:b}=m;return b}}],filters:[{},{setFilters:(o,m)=>{let{filters:b,replace:x}=m;return K(x?{}:K({},o),b)}}]}),Object(c.selectors)(()=>({mappedRelatedFeatureFlags:[o=>[o.relatedFeatureFlags,o.featureFlags],(o,m)=>o&&m?m.map(b=>K(K({},o[b.key]),b)):[]],filteredMappedFlags:[o=>[o.mappedRelatedFeatureFlags,o.searchTerm,o.filters],(o,m,b)=>{if(!m&&Object.keys(b).length===0)return o;let x=o;m&&(x=new y.a(o,{keys:["key","name"],threshold:.3}).search(m).map(h=>h.item));const{type:U,active:I,reason:A}=b;return U&&(x=x.filter(h=>U===r.u.Variants?h.filters.multivariate:!h.filters.multivariate)),I&&(x=x.filter(h=>I==="true"?h.active:!h.active)),A&&(x=x.filter(h=>A==="not matched"?h.evaluation.reason!==u.ConditionMatch:h.evaluation.reason===u.ConditionMatch)),x}]})),Object(c.events)(o=>{let{actions:m}=o;return{afterMount:m.loadRelatedFeatureFlags}})]);var l=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");let u;(function(o){o.ConditionMatch="condition_match",o.NoConditionMatch="no_condition_match",o.OutOfRolloutBound="out_of_rollout_bound",o.NoGroupType="no_group_type",o.Disabled="disabled"})(u||(u={}));const z={[u.ConditionMatch]:"Matches",[u.NoConditionMatch]:"Doesn't match any conditions",[u.OutOfRolloutBound]:"Out of rollout bound",[u.NoGroupType]:"Missing group type",[u.Disabled]:"Disabled"};function L(o){let{distinctId:m,groups:b}=o;const{filteredMappedFlags:x,relatedFeatureFlagsLoading:U,searchTerm:I,filters:A}=Object(c.useValues)(M({distinctId:m,groups:b})),{setSearchTerm:h,setFilters:B}=Object(c.useActions)(M({distinctId:m,groups:b})),k=[{title:Object(v.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(s,j)=>(s.key||"").localeCompare(j.key||""),render:function(j,p){const P=(p.experiment_set||[]).length>0;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(a.Link,{to:p.id?g.a.featureFlag(p.id):void 0,className:"row-name",children:[Object(f.a)(p.key,17),Object(l.jsx)(a.LemonTag,{type:P?"purple":"default",className:"ml-2",children:P?"Experiment":"Feature flag"})]}),p.name&&Object(l.jsx)("span",{className:"row-description",children:p.name})]})}},{title:"Type",width:100,render:function(j,p){return p.filters.multivariate?r.u.Variants:r.u.ReleaseToggle}},{title:"Value",dataIndex:"value",width:150,render:function(j,p){return Object(l.jsx)("div",{style:{wordBreak:"break-word"},children:p.active?Object(S.i)(p.value.toString()):"--"})}},{title:"Match evaluation",dataIndex:"evaluation",width:150,render:function(j,p){var P;const J=p.evaluation.reason===u.ConditionMatch;return Object(l.jsxs)("div",{children:[p.active?Object(l.jsx)(l.Fragment,{children:z[p.evaluation.reason]}):"--",J&&Object(l.jsxs)("span",{className:"simple-tag ml-2",style:{background:"var(--primary-highlight)"},children:["Set ",((P=p.evaluation.condition_index)!==null&&P!==void 0?P:0)+1]})]})}},{title:"Status",dataIndex:"active",sorter:(s,j)=>Number(s.active)-Number(j.active),width:100,render:function(j,p){return Object(l.jsx)("span",{className:"font-normal",children:p.active?"Enabled":"Disabled"})}}];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(l.jsx)(a.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:h,value:I}),Object(l.jsxs)("div",{className:"flex items-center gap-2",children:[Object(l.jsx)("span",{children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(a.LemonSelect,{options:[{label:"All types",value:"all"},{label:r.u.ReleaseToggle,value:r.u.ReleaseToggle},{label:r.u.Variants,value:r.u.Variants}],onChange:s=>{if(s)if(s==="all"){if(A){const j=A,{type:p}=j,P=Y(j,["type"]);B(P,!0)}}else B({type:s})},value:"all",dropdownMaxContentWidth:!0}),Object(l.jsx)("span",{className:"ml-2",children:Object(l.jsx)("b",{children:"Match evaluation"})}),Object(l.jsx)(a.LemonSelect,{options:[{label:"All",value:"all"},{label:"Matched",value:u.ConditionMatch},{label:"Not matched",value:"not matched"}],onChange:s=>{if(s)if(s==="all"){if(A){const j=A,{reason:p}=j,P=Y(j,["reason"]);B(P,!0)}}else B({reason:s})},value:"all",dropdownMaxContentWidth:!0}),Object(l.jsx)("span",{className:"ml-2",children:Object(l.jsx)("b",{children:"Status"})}),Object(l.jsx)(a.LemonSelect,{onChange:s=>{if(s)if(s==="all"){if(A){const j=A,{active:p}=j,P=Y(j,["active"]);B(P,!0)}}else B({active:s})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0})]})]}),Object(l.jsx)(a.LemonTable,{columns:k,loading:U,dataSource:x})]})}try{L.displayName="RelatedFeatureFlags",L.__docgenInfo={description:"",displayName:"RelatedFeatureFlags",props:{distinctId:{defaultValue:null,description:"",name:"distinctId",required:!0,type:{name:"string"}},groups:{defaultValue:null,description:"",name:"groups",required:!1,type:{name:"{ [key: string]: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"]={docgenInfo:L.__docgenInfo,name:"RelatedFeatureFlags",path:"frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"})}catch(o){}},"./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js":function(i,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};n.default=a},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/icons/UserOutlined.js":function(i,n,e){"use strict";var a=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),c=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var v=c(e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/objectSpread2.js")),S=a(e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),f=c(e("./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js")),g=c(e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/components/AntdIcon.js")),r=function(_,N){return S.createElement(g.default,(0,v.default)((0,v.default)({},_),{},{ref:N,icon:f.default}))};r.displayName="UserOutlined";var y=S.forwardRef(r);n.default=y},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss":function(i,n,e){var a=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");n=a(!1),n.push([i.i,".merge-split-person .activity-header{background-color:var(--bg-mid);border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-left:-24px;margin-right:-24px;padding:8px 0;display:flex;justify-content:center;margin-bottom:1rem}.merge-split-person .ant-modal-header{border-bottom:0}.merge-split-person .ant-modal-body{padding-top:0}.merge-split-person .ant-radio-wrapper{margin-right:2px}.merge-split-person .ant-col{margin-right:1rem}.merge-split-person code{background-color:var(--bg-mid);color:var(--primary-alt);padding:4px 8px;border-radius:var(--radius)}",""]),i.exports=n},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(i,n,e){var a=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");n=a(!1),n.push([i.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),i.exports=n}}]);
