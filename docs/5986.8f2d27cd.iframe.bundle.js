"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[5986],{"./frontend/src/scenes/events/Events.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Events:()=>Events,scene:()=>scene});var PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),fast_deep_equal=__webpack_require__("./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),LemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/LemonToast/LemonToast.tsx"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),defaults=__webpack_require__("./frontend/src/scenes/events/defaults.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),defaultEventsQuery=__webpack_require__("./frontend/src/queries/nodes/DataTable/defaultEventsQuery.ts");const eventsSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","events","eventsSceneLogic"]),(0,index_esm.connect)({values:[teamLogic.teamLogic,["currentTeam"]]}),(0,index_esm.actions)({setQuery:query=>({query})}),(0,index_esm.reducers)({savedQuery:[null,{setQuery:(_,_ref)=>{let{query}=_ref;return query}}]}),(0,index_esm.selectors)({defaultQuery:[s=>[s.currentTeam],currentTeam=>{const defaultSourceForTeam=currentTeam&&(0,defaultEventsQuery.Rr)(currentTeam),defaultForScene=(0,defaults.w)();return defaultSourceForTeam?{...defaultForScene,source:defaultSourceForTeam}:defaultForScene}],query:[s=>[s.savedQuery,s.defaultQuery],(savedQuery,defaultQuery)=>savedQuery||defaultQuery]}),(0,lib.actionToUrl)((_ref2=>{let{values}=_ref2;return{setQuery:()=>[urls.j.events(),{},(0,utils.h0)(values.query,values.defaultQuery)?{}:{q:values.query},{replace:!0}]}})),(0,lib.urlToAction)((_ref3=>{let{actions,values}=_ref3;return{[urls.j.events()]:(_,__,_ref4)=>{let{q:queryParam}=_ref4;fast_deep_equal_default()(queryParam,values.query)||(queryParam?"object"==typeof queryParam?actions.setQuery(queryParam):(LemonToast.UJ.error("Invalid query in URL"),console.error({queryParam})):(0,utils.h0)(values.query,values.defaultQuery)||actions.setQuery(values.defaultQuery))}}}))]);var Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function EventsScene(){const{query}=(0,index_esm.useValues)(eventsSceneLogic),{setQuery}=(0,index_esm.useActions)(eventsSceneLogic);return(0,jsx_runtime.jsx)(Query.A,{query,setQuery,context:{showOpenEditorButton:!0}})}var AndroidRecordingPromptBanner=__webpack_require__("./frontend/src/scenes/session-recordings/mobile-replay/AndroidRecordingPromptBanner.tsx");const scene={component:Events,logic:eventsSceneLogic};function Events(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{}),(0,jsx_runtime.jsx)("div",{className:"non-3000 pt-4 border-t"}),(0,jsx_runtime.jsx)(AndroidRecordingPromptBanner.c,{context:"events"}),(0,jsx_runtime.jsx)(EventsScene,{})]})}},"./frontend/src/scenes/session-recordings/mobile-replay/AndroidRecordingPromptBanner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>AndroidRecordingsPromptBanner});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),FlaggedFeature=__webpack_require__("./frontend/src/lib/components/FlaggedFeature.tsx"),supportLogic=__webpack_require__("./frontend/src/lib/components/Support/supportLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),kea_subscriptions_lib=__webpack_require__("./node_modules/.pnpm/kea-subscriptions@3.0.0_kea@3.1.5/node_modules/kea-subscriptions/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),es=__webpack_require__("./node_modules/.pnpm/posthog-js@1.99.0/node_modules/posthog-js/dist/es.js"),schema=__webpack_require__("./frontend/src/queries/schema.ts"),utils=__webpack_require__("./frontend/src/queries/utils.ts");const androidRecordingPromptBannerLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","session-recordings","SessionRecordings"]),(0,index_esm.key)((props=>props.context)),(0,index_esm.props)({}),(0,lib.loaders)((_ref=>{let{values}=_ref;return{androidVersions:[[],{loadAndroidLibVersions:async()=>{var _res$results$map;if(values.androidVersions&&values.androidVersions.length>0)return values.androidVersions;const query={kind:schema.OH.HogQLQuery,query:utils.zP`SELECT properties.$lib_version AS lib_version,
                                       max(timestamp)          AS latest_timestamp,
                                       count(lib_version) as count
                                FROM events
                                WHERE timestamp >= now() - INTERVAL 30 DAY
                                  AND timestamp <= now()
                                  AND properties.$lib = 'posthog-android'
                                GROUP BY lib_version
                                ORDER BY latest_timestamp DESC
                                    limit 10`},res=await api.ZP.query(query);return null!==(_res$results$map=res.results?.map((x=>({version:x[0],count:x[2]}))))&&void 0!==_res$results$map?_res$results$map:[]}}]}})),(0,index_esm.reducers)({androidVersions:[[],{persist:!0},{loadAndroidLibVersionsSuccess:(_,_ref2)=>{let{androidVersions}=_ref2;return null!=androidVersions?androidVersions:[]}}]}),(0,index_esm.selectors)({shouldPromptUser:[s=>[s.androidVersions],androidVersions=>(androidVersions?.length||0)>0]}),(0,kea_subscriptions_lib.subscriptions)((_ref3=>{let{values,props}=_ref3;return{shouldPromptUser:(value,oldvalue)=>{!0===value&&!1===oldvalue&&es.ZP.capture("visitor has android events",{androidVersions:values.androidVersions,scene:props.context})}}})),(0,index_esm.afterMount)((_ref4=>{let{actions}=_ref4;actions.loadAndroidLibVersions()}))]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function AndroidRecordingsPromptBanner(props){const{shouldPromptUser}=(0,index_esm.useValues)(androidRecordingPromptBannerLogic(props)),{openSupportForm}=(0,index_esm.useActions)(supportLogic.Pw);return shouldPromptUser?(0,jsx_runtime.jsx)(FlaggedFeature.P,{flag:constants.y8.RECRUIT_ANDROID_MOBILE_BETA_TESTERS,match:!0,children:(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",dismissKey:"android-recording-beta-prompt",action:{children:"Learn more",to:"https://github.com/PostHog/posthog-android/blob/main/USAGE.md#android-session-recording",targetBlank:!0},className:"mb-4",children:[(0,jsx_runtime.jsx)("h3",{className:"mb-0 ml-2",children:"Android Session Replay"}),(0,jsx_runtime.jsxs)("div",{className:"ml-2",children:["We're recruiting beta testers for Android Session Replay."," ",(0,jsx_runtime.jsx)(Link.r,{onClick:()=>openSupportForm({kind:"support",target_area:"session_replay"}),children:"Contact support"})," ","to join the test and earn PostHog merch."]})]})}):null}}}]);
//# sourceMappingURL=5986.8f2d27cd.iframe.bundle.js.map