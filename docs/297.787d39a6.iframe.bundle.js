(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(O,g,t){"use strict";t.r(g),t.d(g,"ProjectHomepage",function(){return z}),t.d(g,"scene",function(){return pe});var x=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),U=t.n(x),je=t("./node_modules/core-js/modules/es.function.name.js"),be=t("./node_modules/core-js/modules/es.object.to-string.js"),ye=t("./node_modules/core-js/modules/es.regexp.to-string.js"),R=t("./node_modules/react/index.js"),e=t.n(R),B=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),G=t.n(B),J=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),C=t.n(J),I={};I.insert="head",I.singleton=!1;var Pe=G()(C.a,I),Ee=C.a.locals||{},Y=t("./frontend/src/lib/components/PageHeader.tsx"),K=t("./frontend/src/scenes/dashboard/Dashboard.tsx"),c=t("./node_modules/kea/lib/index.esm.js"),f=t("./frontend/src/scenes/teamLogic.tsx"),S=t("./frontend/src/types.ts"),Q=t("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),X=t("./frontend/src/lib/components/LemonDivider/index.ts"),Le=t("./node_modules/core-js/modules/es.array.map.js"),we=t("./node_modules/core-js/modules/es.symbol.js"),Oe=t("./node_modules/core-js/modules/es.symbol.description.js"),Z=t("./frontend/src/models/dashboardsModel.tsx"),u=t("./frontend/src/lib/components/LemonButton/index.ts"),k=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),P=t.n(k),q=t("./node_modules/@babel/runtime/regenerator/index.js"),h=t.n(q),j=t("./frontend/src/lib/utils/eventUsageLogic.ts"),D=Object(c.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[j.e],actions:[f.a,["updateCurrentTeam"]],values:[f.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(s){return{dashboardId:s}}},selectors:{primaryDashboardId:[function(a){return[a.currentTeam]},function(a){return a==null?void 0:a.primary_dashboard}]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(s){var l=s.actions;return{setPrimaryDashboard:function(){var n=P()(h.a.mark(function i(d){var o;return h.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:o=d.dashboardId,l.updateCurrentTeam({primary_dashboard:o}),j.e.actions.reportPrimaryDashboardChanged();case 3:case"end":return m.stop()}},i)}));function r(i){return n.apply(this,arguments)}return r}(),showPrimaryDashboardModal:function(){var n=P()(h.a.mark(function i(){return h.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:j.e.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return o.stop()}},i)}));function r(){return n.apply(this,arguments)}return r}()}}}),E=t("./frontend/src/lib/components/icons.tsx"),_=t("./frontend/src/lib/components/LemonRow/index.ts"),ee=t("./frontend/src/lib/components/LemonModal/index.ts"),M=t("./frontend/src/lib/components/LemonSkeleton/index.tsx");function te(){var a=Object(c.useValues)(D),s=a.isOpen,l=a.primaryDashboardId,n=Object(c.useActions)(D),r=n.closePrimaryDashboardModal,i=n.setPrimaryDashboard,d=Object(c.useValues)(Z.a),o=d.nameSortedDashboards,y=d.dashboardsLoading;return e.a.createElement(ee.a,{isOpen:s,onClose:r,title:"Select a default dashboard for the project",footer:e.a.createElement(e.a.Fragment,null,e.a.createElement(u.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:r},"Close"))},y?e.a.createElement("div",{className:"space-y-2"},e.a.createElement(M.a.Row,{repeat:4})):e.a.createElement("div",{className:"space-y-2"},o.map(function(m){var v=m.id===l,w=e.a.createElement("div",{className:"flex flex-1 items-center justify-between overflow-hidden"},e.a.createElement("div",{className:"flex-1 flex flex-col justify-center overflow-hidden"},e.a.createElement("strong",null,m.name),e.a.createElement("span",{className:"text-default font-normal text-ellipsis"},m.description)),v?e.a.createElement(e.a.Fragment,null,e.a.createElement(E.IconCottage,{className:"mr-2 text-warning text-lg"}),e.a.createElement("span",null,"Default")):e.a.createElement("strong",{className:"set-default-text"},"Set as default"));return v?e.a.createElement(_.a,{key:m.id,fullWidth:!0,status:"muted",className:"dashboard-row"},w):e.a.createElement(u.a,{key:m.id,fullWidth:!0,className:"dashboard-row",onClick:function(){i(m.id),r()}},w)})))}var xe=t("./node_modules/core-js/modules/es.array.iterator.js"),Re=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ae=t("./frontend/src/scenes/dashboard/dashboardLogic.ts"),H=t("./frontend/src/lib/api.ts"),se=t("./node_modules/kea-subscriptions/lib/index.js"),ne=t("./node_modules/kea-loaders/lib/index.js"),b=Object(c.kea)([Object(c.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(c.connect)({values:[f.a,["currentTeamId","currentTeam"]]}),Object(c.selectors)({primaryDashboardId:[function(){return[f.a.selectors.currentTeam]},function(a){return a==null?void 0:a.primary_dashboard}],dashboardLogic:[function(a){return[a.primaryDashboardId]},function(a){return Object(ae.c)({id:a!=null?a:void 0,placement:S.m.ProjectHomepage})}]}),Object(ne.loaders)(function(a){var s=a.values;return{recentInsights:[[],{loadRecentInsights:function(){var l=P()(h.a.mark(function r(){var i;return h.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,H.b.get("api/projects/".concat(s.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return i=o.sent,o.abrupt("return",i.results);case 4:case"end":return o.stop()}},r)}));function n(){return l.apply(this,arguments)}return n}()}],persons:[[],{loadPersons:function(){var l=P()(h.a.mark(function r(){var i;return h.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,H.b.persons.list();case 2:return i=o.sent,o.abrupt("return",i.results);case 4:case"end":return o.stop()}},r)}));function n(){return l.apply(this,arguments)}return n}()}]}}),Object(se.subscriptions)(function(a){var s=a.cache;return{dashboardLogic:function(n){var r;(r=s.unmount)===null||r===void 0||r.call(s),s.unmount=n?n.mount():null}}}),Object(c.afterMount)(function(a){var s,l=a.cache,n=a.actions;(s=l.unmount)===null||s===void 0||s.call(l),n.loadRecentInsights(),n.loadPersons()})]),Ie=t("./node_modules/core-js/modules/es.array.slice.js"),N=t("./frontend/src/lib/dayjs.ts"),T=t("./frontend/src/lib/components/CompactList/CompactList.tsx"),A=t("./frontend/src/lib/components/ProfilePicture/index.ts"),L=t("./frontend/src/scenes/persons/PersonHeader.tsx"),V=t("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),p=t("./frontend/src/scenes/urls.ts"),oe=t("./frontend/src/lib/utils.tsx"),re=t("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),ie=t("./frontend/src/scenes/session-recordings/sessionPlayerDrawerLogic.ts");function le(a){var s=a.recording,l=Object(V.c)({key:"projectHomepage"}),n=Object(c.useActions)(l),r=n.openSessionPlayer,i=Object(c.useActions)(j.e),d=i.reportRecordingOpenedFromRecentRecordingList;return e.a.createElement(u.a,{fullWidth:!0,onClick:function(){r(s.id),d()}},e.a.createElement("div",{className:"ProjectHomePage__listrow"},e.a.createElement(A.b,{name:Object(L.b)(s.person)}),e.a.createElement("div",{className:"ProjectHomePage__listrow__details"},e.a.createElement("div",null,Object(L.b)(s.person)),e.a.createElement("div",null,"Recorded ",Object(N.a)(s.start_time).fromNow())),e.a.createElement("span",null,Object(oe.P)(s.recording_duration)),e.a.createElement(E.IconPlayCircle,{className:"text-2xl ml-2"})))}function ce(){var a=Object(c.useValues)(f.a),s=a.currentTeam,l=Object(V.c)({key:"projectHomepage"}),n=Object(c.useValues)(l),r=n.sessionRecordings,i=n.sessionRecordingsResponseLoading,d=Object(c.useActions)(ie.a),o=d.closeSessionPlayer;return e.a.createElement(e.a.Fragment,null,e.a.createElement(re.a,{onClose:o}),e.a.createElement(T.a,{title:"Recent recordings",viewAllURL:p.a.sessionRecordings(),loading:i,emptyMessage:s!=null&&s.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:p.a.projectSettings()+"#recordings"},items:r.slice(0,5),renderRow:function(m,v){return e.a.createElement(le,{key:v,recording:m})}}))}var F=t("./frontend/src/scenes/saved-insights/SavedInsights.tsx");function de(a){var s=a.insight,l=Object(c.useActions)(j.e),n=l.reportInsightOpenedFromRecentInsightList;return e.a.createElement(u.a,{fullWidth:!0,to:p.a.insightView(s.short_id),onClick:function(){n()}},e.a.createElement("div",{className:"ProjectHomePage__listrow"},e.a.createElement(F.InsightIcon,{insight:s}),e.a.createElement("div",{className:"ProjectHomePage__listrow__details"},e.a.createElement("div",null,s.name||s.derived_name),e.a.createElement("div",null,"Last modified ",Object(N.a)(s.last_modified_at).fromNow()))))}function me(){var a=Object(c.useValues)(b),s=a.recentInsights,l=a.recentInsightsLoading,n=Object(c.useActions)(b),r=n.loadRecentInsights;return Object(R.useEffect)(function(){r()},[]),e.a.createElement(e.a.Fragment,null,e.a.createElement(T.a,{title:"Your recently viewed insights",viewAllURL:p.a.savedInsights(),loading:l,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:p.a.savedInsights()},items:s.slice(0,5),renderRow:function(d,o){return e.a.createElement(de,{key:o,insight:d})}}))}function ue(a){var s=a.person,l=Object(c.useActions)(j.e),n=l.reportPersonOpenedFromNewlySeenPersonsList;return e.a.createElement(u.a,{fullWidth:!0,to:p.a.person(s.distinct_ids[0]),onClick:function(){n()}},e.a.createElement("div",{className:"ProjectHomePage__listrow"},e.a.createElement(A.b,{name:Object(L.b)(s)}),e.a.createElement("div",{className:"ProjectHomePage__listrow__details"},e.a.createElement("div",null,Object(L.b)(s)),e.a.createElement("div",null,"First seen ",Object(N.a)(s.created_at).fromNow()))))}function he(){var a=Object(c.useValues)(b),s=a.persons,l=a.personsLoading;return e.a.createElement(T.a,{title:"Newly seen persons",viewAllURL:p.a.persons(),loading:l,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:s.slice(0,5),renderRow:function(r,i){return e.a.createElement(ue,{key:i,person:r})}})}var ge=t("./node_modules/@react-hook/size/dist/module/index.js");function z(){var a=Object(c.useValues)(b),s=a.dashboardLogic,l=Object(c.useValues)(f.a),n=l.currentTeam,r=Object(c.useValues)(s),i=r.dashboard,d=Object(c.useActions)(Q.a),o=d.showInviteModal,y=Object(c.useActions)(D),m=y.showPrimaryDashboardModal,v=Object(R.useRef)(null),w=Object(ge.a)(v),W=U()(w,1),$=W[0],ve=e.a.createElement("div",{className:"flex"},e.a.createElement(u.a,{"data-attr":"project-home-invite-team-members",onClick:function(){o()},className:"mr-2",type:"secondary"},"Invite members"),e.a.createElement(F.NewInsightButton,{dataAttr:"project-home-new-insight"}));return e.a.createElement("div",{className:"project-homepage"},e.a.createElement(Y.a,{title:(n==null?void 0:n.name)||"",delimited:!0,buttons:ve}),e.a.createElement("div",{ref:v,className:$&&$<600?"top-list-container-vertical":"top-list-container-horizontal"},e.a.createElement("div",{className:"top-list"},e.a.createElement(me,null)),e.a.createElement("div",{className:"spacer"}),e.a.createElement("div",{className:"top-list"},e.a.createElement(he,null)),e.a.createElement("div",{className:"spacer"}),e.a.createElement("div",{className:"top-list"},e.a.createElement(ce,null))),n!=null&&n.primary_dashboard?e.a.createElement("div",null,e.a.createElement("div",{className:"homepage-dashboard-header"},e.a.createElement("div",{className:"dashboard-title-container"},!i&&e.a.createElement(M.a,{className:"w-20"}),(i==null?void 0:i.name)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(E.IconCottage,{className:"mr-2 text-warning text-2xl"}),e.a.createElement("div",{className:"dashboard-name"},i==null?void 0:i.name))),e.a.createElement(u.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:m},"Change dashboard")),e.a.createElement(X.a,{className:"my-6"}),e.a.createElement(K.Dashboard,{id:n.primary_dashboard.toString(),placement:S.m.ProjectHomepage})):e.a.createElement("div",{className:"empty-state-container"},e.a.createElement(E.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),e.a.createElement("h1",null,"There isn\u2019t a default dashboard set for this project"),e.a.createElement("p",{className:"mb-4"},"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."),e.a.createElement(u.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){m()}},"Select a default dashboard")),e.a.createElement(te,null))}var pe={component:z,logic:b}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(O,g,t){var x=t("./node_modules/css-loader/dist/runtime/api.js");g=x(!1),g.push([O.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .dashboard-name{margin:0;font-weight:600;font-size:1.2rem}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),O.exports=g}}]);
