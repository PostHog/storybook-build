(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/ExportButton/exporterLogic.ts":function(pe,S,e){"use strict";e.d(S,"a",function(){return $}),e.d(S,"b",function(){return Pe});var k=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),re=e.n(k),fe=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Ee=e.n(fe),_e=e("./node_modules/@babel/runtime/regenerator/index.js"),q=e.n(_e),se=e("./node_modules/core-js/modules/es.array.concat.js"),Y=e.n(se),ye=e("./node_modules/core-js/modules/es.array.iterator.js"),ue=e.n(ye),Le=e("./node_modules/core-js/modules/es.object.to-string.js"),de=e.n(Le),H=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),V=e.n(H),Ue=e("./node_modules/core-js/modules/es.object.keys.js"),oe=e.n(Ue),Me=e("./node_modules/core-js/modules/es.symbol.js"),Se=e.n(Me),t=e("./node_modules/core-js/modules/es.array.filter.js"),U=e.n(t),he=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ae=e.n(he),ee=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),le=e.n(ee),X=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),we=e.n(X),I=e("./node_modules/kea/lib/index.esm.js"),z=e("./frontend/src/lib/api.ts"),L=e("./frontend/src/lib/utils.tsx"),je=e("./node_modules/posthog-js/dist/es.js"),Q=e("./frontend/src/scenes/teamLogic.tsx"),_=e("./frontend/src/lib/components/lemonToast.tsx");function i(p,C){var j=Object.keys(p);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(p);C&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(p,N).enumerable})),j.push.apply(j,T)}return j}function O(p){for(var C=1;C<arguments.length;C++){var j=arguments[C]!=null?arguments[C]:{};C%2?i(Object(j),!0).forEach(function(T){re()(p,T,j[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(j)):i(Object(j)).forEach(function(T){Object.defineProperty(p,T,Object.getOwnPropertyDescriptor(j,T))})}return p}var y=1e3,K=10,$;(function(p){p.PNG="image/png",p.CSV="text/csv",p.PDF="application/pdf"})($||($={}));var Pe=Object(I.kea)([Object(I.path)(["lib","components","ExportButton","ExporterLogic"]),Object(I.props)({}),Object(I.key)(function(p){var C=p.dashboardId,j=p.insightId;return"dash:".concat(C,"::insight:").concat(j)}),Object(I.actions)({exportItem:function(C,j,T){return{exportFormat:C,exportContext:j,successCallback:T}},exportItemSuccess:!0,exportItemFailure:!0}),Object(I.reducers)({exportInProgress:[!1,{exportItem:function(){return!0},exportItemSuccess:function(){return!1},exportItemFailure:function(){return!1}}]}),Object(I.listeners)(function(p){var C=p.actions,j=p.props;return{exportItem:function(){var T=Ee()(q.a.mark(function Ne(be){var ge,F,Fe,me,Ce,Z,Te,Ve;return q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ge=be.exportFormat,F=be.exportContext,Fe=be.successCallback,_.d.info("Export started..."),me={export_format:ge,dashboard:j.dashboardId,insight:j.insightId,total_time_ms:0},Ce=performance.now(),n.prev=4,n.next=7,z.b.create("api/projects/".concat(Q.a.values.currentTeamId,"/exports"),O({export_format:ge,dashboard:j.dashboardId,insight:j.insightId},F||{}));case 7:if(Z=n.sent,Z.id){n.next=10;break}throw new Error("Missing export_id from response");case 10:Te=z.b.exports.determineExportUrl(Z.id),Ve=0;case 12:if(!(Ve<K)){n.next=29;break}if(Ve++,!Z.has_content){n.next=22;break}return C.exportItemSuccess(),_.d.success("Export complete."),Fe==null||Fe(),window.open(Te,"_blank"),me.total_time_ms=performance.now()-Ce,je.a.capture("export succeeded",me),n.abrupt("return");case 22:return n.next=24,Object(L.w)(y);case 24:return n.next=26,z.b.get("api/projects/".concat(Q.a.values.currentTeamId,"/exports/").concat(Z.id));case 26:Z=n.sent,n.next=12;break;case 29:throw new Error("Content not loaded in time...");case 32:n.prev=32,n.t0=n.catch(4),C.exportItemFailure(),me.total_time_ms=performance.now()-Ce,je.a.capture("export failed",me),_.d.error("Export failed: ".concat(JSON.stringify(n.t0)));case 38:case"end":return n.stop()}},Ne,null,[[4,32]])}));function N(Ne){return T.apply(this,arguments)}return N}()}})])},"./frontend/src/scenes/actions/EventName.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return q}),e.d(S,"b",function(){return se});var k=e("./node_modules/react/index.js"),re=e.n(k),fe=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ee=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),_e=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function q(Y){var ye=Y.value,ue=Y.onChange;return re.a.createElement(Ee.d,{groupType:_e.a.Events,onChange:ue,value:ye,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(de){return re.a.createElement(fe.a,{value:de,disablePopover:!0})},allowClear:!0})}function se(Y){var ye=Y.value,ue=Y.onChange;return re.a.createElement(Ee.b,{groupType:_e.a.Events,onChange:ue,value:ye,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(de){return re.a.createElement(fe.a,{value:de,disablePopover:!0})},allowClear:!0})}try{q.displayName="EventName",q.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:q.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(Y){}try{se.displayName="LemonEventName",se.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:se.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(Y){}},"./frontend/src/scenes/events/EventDetails.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return Q});var k=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),re=e.n(k),fe=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ee=e.n(fe),_e=e("./node_modules/core-js/modules/es.object.keys.js"),q=e("./node_modules/core-js/modules/es.symbol.js"),se=e("./node_modules/core-js/modules/es.array.filter.js"),Y=e("./node_modules/core-js/modules/es.object.to-string.js"),ye=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ue=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Le=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),de=e("./node_modules/react/index.js"),H=e.n(de),V=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ue=e("./frontend/src/lib/components/PropertiesTable.tsx"),oe=e("./frontend/src/scenes/events/EventElements.tsx"),Me=e("./node_modules/antd/es/tabs/index.js"),Se=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(Se),U=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),he=e("./frontend/src/lib/utils.tsx"),ae=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function ee(_,i){var O=Object.keys(_);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(_);i&&(y=y.filter(function(K){return Object.getOwnPropertyDescriptor(_,K).enumerable})),O.push.apply(O,y)}return O}function le(_){for(var i=1;i<arguments.length;i++){var O=arguments[i]!=null?arguments[i]:{};i%2?ee(Object(O),!0).forEach(function(y){re()(_,y,O[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(O)):ee(Object(O)).forEach(function(y){Object.defineProperty(_,y,Object.getOwnPropertyDescriptor(O,y))})}return _}function X(_){var i=_.event,O=i.event,y=i.id,K=i.uuid,$=i.distinct_id,Pe=i.properties,p=i.elements,C=i.timestamp,j=i.person,T=t()(i,ae),N=le(le(le(le({},y?{id:y}:null),K?{uuid:K}:null),{},{timestamp:C,event:O,distinct_id:$,properties:Object(he.yb)(Pe)},p&&p.length>0?{elements:p}:null),T);return H.a.createElement(U.a,{language:U.b.JSON},JSON.stringify(N,null,4))}try{X.displayName="EventJSON",X.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:X.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(_){}var we=e("./frontend/src/lib/dayjs.ts"),I=e("./frontend/src/lib/components/LemonButton/index.ts");function z(_,i){var O=Object.keys(_);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(_);i&&(y=y.filter(function(K){return Object.getOwnPropertyDescriptor(_,K).enumerable})),O.push.apply(O,y)}return O}function L(_){for(var i=1;i<arguments.length;i++){var O=arguments[i]!=null?arguments[i]:{};i%2?z(Object(O),!0).forEach(function(y){re()(_,y,O[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(O)):z(Object(O)).forEach(function(y){Object.defineProperty(_,y,Object.getOwnPropertyDescriptor(O,y))})}return _}var je=Me.a.TabPane;function Q(_){for(var i=_.event,O=Object(de.useState)(!1),y=Ee()(O,2),K=y[0],$=y[1],Pe={},p={},C=0,j=0,T=Object.keys(i.properties);j<T.length;j++){var N=T[j];V.e.event[N]&&V.e.event[N].hide&&(C+=1,K&&(p[N]=i.properties[N])),(!V.e.event[N]||!V.e.event[N].hide)&&(Pe[N]=i.properties[N])}return H.a.createElement(Me.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},H.a.createElement(je,{tab:"Properties",key:"properties"},H.a.createElement(Ue.a,{properties:L(L({$timestamp:Object(we.a)(i.timestamp).toISOString()},Pe),p),useDetectedPropertyType:!0}),C>0&&H.a.createElement(I.a,{className:"mb-05",onClick:function(){return $(!K)},size:"small"},K?"Hide":"Show"," ",Object(he.qb)(C,"hidden property","hidden properties"))),H.a.createElement(je,{tab:"JSON",key:"json"},H.a.createElement(X,{event:i})),i.elements&&i.elements.length>0&&H.a.createElement(je,{tab:"Elements",key:"elements"},H.a.createElement(oe.a,{event:i})))}try{Q.displayName="EventDetails",Q.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:Q.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(_){}},"./frontend/src/scenes/events/EventElements.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return le});var k=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),re=e.n(k),fe=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Ee=e.n(fe),_e=e("./node_modules/core-js/modules/es.array.join.js"),q=e.n(_e),se=e("./node_modules/core-js/modules/es.array.fill.js"),Y=e.n(se),ye=e("./node_modules/core-js/modules/es.array.slice.js"),ue=e.n(ye),Le=e("./node_modules/core-js/modules/es.array.map.js"),de=e.n(Le),H=e("./node_modules/core-js/modules/es.object.entries.js"),V=e.n(H),Ue=e("./node_modules/core-js/modules/es.array.concat.js"),oe=e.n(Ue),Me=e("./node_modules/core-js/modules/es.regexp.exec.js"),Se=e.n(Me),t=e("./node_modules/core-js/modules/es.string.replace.js"),U=e.n(t),he=e("./node_modules/react/index.js"),ae=e.n(he);function ee(X){return Array(X).fill("    ").join("")}function le(X){var we=X.event,I=Ee()(we.elements||[]).reverse();return I=I.slice(Math.max(I.length-10,1)),ae.a.createElement("div",null,I.map(function(z,L){return ae.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0,backgroundColor:L===I.length-1?"var(--primary)":void 0}},ee(L),"<",z.tag_name,z.attr_id&&' id="'.concat(z.attr_id,'"'),Object.entries(z.attributes).map(function(je){var Q=re()(je,2),_=Q[0],i=Q[1];return ae.a.createElement("span",{key:_}," ".concat(_.replace("attr__",""),'="').concat(i,'"'))}),">",z.text,L===I.length-1&&ae.a.createElement("span",null,"</",z.tag_name,">"))}),Ee()(I).reverse().slice(1).map(function(z,L){return ae.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0}},ee(I.length-L-2),"</",z.tag_name,">")}))}try{le.displayName="EventElements",le.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:le.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(X){}},"./frontend/src/scenes/events/EventsTable.tsx":function(pe,S,e){"use strict";e.d(S,"a",function(){return it});var k=e("./node_modules/core-js/modules/es.symbol.js"),re=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),fe=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Ee=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),_e=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),q=e.n(_e),se=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Y=e.n(se),ye=e("./node_modules/core-js/modules/es.array.splice.js"),ue=e("./node_modules/core-js/modules/es.array.filter.js"),Le=e("./node_modules/core-js/modules/es.object.to-string.js"),de=e("./node_modules/core-js/modules/es.array.map.js"),H=e("./node_modules/core-js/modules/es.array.find.js"),V=e("./node_modules/core-js/modules/es.array.concat.js"),Ue=e("./node_modules/core-js/modules/es.array.join.js"),oe=e("./node_modules/core-js/modules/es.object.keys.js"),Me=e("./node_modules/core-js/modules/es.regexp.to-string.js"),Se=e("./node_modules/react/index.js"),t=e.n(Se),U=e("./node_modules/kea/lib/index.esm.js"),he=e("./frontend/src/scenes/events/EventDetails.tsx"),ae=e("./frontend/src/lib/components/Link.tsx"),ee=e("./node_modules/antd/es/button/index.js"),le=e("./node_modules/kea-router/lib/index.js"),X=e("./node_modules/@babel/runtime/helpers/typeof.js"),we=e.n(X),I=e("./node_modules/core-js/modules/es.regexp.exec.js"),z=e("./node_modules/core-js/modules/es.string.replace.js");function L(r){var s=r.value;return t.a.createElement("span",{title:s},we()(s)==="object"?JSON.stringify(s):s&&s.toString().replace(/(^\w+:|^)\/\//,""))}try{L.displayName="Property",L.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:L.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(r){}var je=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function Q(r,s){var c=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);s&&(u=u.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),c.push.apply(c,u)}return c}function _(r){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?Q(Object(c),!0).forEach(function(u){q()(r,u,c[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):Q(Object(c)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(c,u))})}return r}function i(r){var s=r.property,c=r.value,u=r.filters,x=r.onClick,J=r.className,W=Object(je.c)(u.properties),$e=W.find(function(ne){return ne.key===s&&ne.value===c&&!ne.operator})?W.filter(function(ne){return ne.key!==s||ne.value!==c||ne.operator}):[].concat(Y()(W),[{key:s,value:c}]),ke=Object(le.combineUrl)(window.location.pathname,_(_({},u),{},{properties:$e}),{}),ze=ke.url;return t.a.createElement(ae.a,{to:ze,className:J,onClick:function(){x&&x(s,c)}},t.a.createElement(L,{value:c}))}try{i.displayName="FilterPropertyLink",i.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:i.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(r){}var O=e("./frontend/src/lib/utils.tsx"),y=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),K=e.n(y),$=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),Pe=e.n($),p={};p.insert="head",p.singleton=!1;var C=K()(Pe.a,p),j=Pe.a.locals||{},T=e("./frontend/src/scenes/events/eventsTableLogic.ts"),N=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Ne=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),be=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ge=e("./frontend/src/types.ts"),F=e("./frontend/src/scenes/actions/EventName.tsx"),Fe=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),me=e("./frontend/src/lib/components/Tooltip.tsx"),Ce=e("./node_modules/clsx/dist/clsx.m.js"),Z=Object(U.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(s){return{columnConfig:s}}},reducers:function(s){var c=s.props;return{selectedColumns:[c.startingColumns||"DEFAULT",{setSelectedColumns:function(x,J){var W=J.columnConfig;return W}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(r){return[r.selectedColumns]},function(r){return r==="DEFAULT"?7:r.length+2}]}}),Te=e("./frontend/src/scenes/urls.ts"),Ve=e("./frontend/src/lib/components/LemonTable/index.ts"),f=e("./frontend/src/lib/components/icons.tsx"),n=e("./frontend/src/lib/components/LemonButton/index.ts"),o=e("./frontend/src/lib/components/LemonButton/More.tsx"),a=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),v=e("./frontend/src/scenes/teamLogic.tsx"),l=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function E(r){Object(Se.useEffect)(function(){var s="hidden",c="visibilitychange";typeof document.msHidden!="undefined"?(s="msHidden",c="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(s="webkitHidden",c="webkitvisibilitychange");var u=function(){r(!document[s])};return document.addEventListener(c,u),function(){document.removeEventListener(c,u)}},[])}var d=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),m=e.n(d),ve=e("./node_modules/core-js/modules/es.array.includes.js"),te=e("./node_modules/core-js/modules/es.string.includes.js"),De=e("./node_modules/antd/es/row/index.js"),We=e("./node_modules/antd/es/space/index.js"),Ie=e("./node_modules/antd/es/col/index.js"),Re=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),ie=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Ge=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),D=e.n(Ge),Qe={};Qe.insert="head",Qe.singleton=!1;var M=K()(D.a,Qe),Tt=D.a.locals||{},ot=e("./node_modules/antd/lib/modal/Modal.js"),jt=e.n(ot),at=e("./node_modules/react-virtualized/dist/es/List/index.js"),gt=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),Ze=e("./node_modules/core-js/modules/es.array.from.js"),tn=e("./node_modules/core-js/modules/es.string.iterator.js"),nn=e("./node_modules/core-js/modules/es.array.iterator.js"),rn=e("./node_modules/core-js/modules/es.set.js"),sn=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),St=Object(U.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[Z],actions:{selectColumn:function(s){return{column:s}},unselectColumn:function(s){return{column:s}},resetColumns:function(s){return{columns:s}},setColumns:function(s){return{columns:s}},toggleSaveAsDefault:!0,save:!0},reducers:function(s){var c=s.props;return{selectedColumns:[c.selectedColumns,{selectColumn:function(x,J){var W=J.column;return Array.from(new Set([].concat(Y()(x),[W])))},unselectColumn:function(x,J){var W=J.column;return x.filter(function($e){return $e!==W})},resetColumns:function(x,J){var W=J.columns;return W},setColumns:function(x,J){var W=J.columns;return W}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(x){return!x}}]}},listeners:function(s){var c=s.values,u=s.actions;return{save:function(){Z.actions.setSelectedColumns(c.selectedColumns),c.saveAsDefault&&(v.a.actions.updateCurrentTeam({live_events_columns:c.selectedColumns}),u.toggleSaveAsDefault())}}}}),It=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Dt=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Rt=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),Ot=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),Bt=e("./frontend/src/scenes/userLogic.ts"),Kt=Object(Ot.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(f.SortableDragIcon,null))});function lt(r){var s=Object(U.useActions)(Z),c=s.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(n.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:c,icon:t.a.createElement(f.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Ut,{immutableColumns:r.immutableColumns,defaultColumns:r.defaultColumns}))}function Ut(r){var s=r.immutableColumns,c=r.defaultColumns,u=36,x=32,J=Object(U.useValues)(Z),W=J.selectedColumns,$e=J.modalVisible,ke=Object(U.useActions)(Z),ze=ke.hideModal,ne=St({selectedColumns:W==="DEFAULT"?c:W}),Be=Object(U.useActions)(ne),ct=Be.selectColumn,ut=Be.unselectColumn,dt=Be.resetColumns,mt=Be.setColumns,qe=Be.toggleSaveAsDefault,et=Be.save,tt=Object(U.useValues)(ne),xe=tt.selectedColumns,ht=Object(U.useValues)(Bt.a),Ke=ht.user,vt=function(w){var G=w.column,R=w.disabled;return t.a.createElement("div",{className:Object(Ce.a)(["column-display-item",{selected:!R,disabled:R}]),style:{height:"".concat(x,"px")}},!R&&t.a.createElement(Kt,null),t.a.createElement(be.a,{value:G}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(me.a,{title:R?"Reserved":"Remove"},R?t.a.createElement(Re.a,null):t.a.createElement(ie.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return ut(G)}}))))},pt=Object(Ot.b)(vt),ft=function(w){var G=w.index,R=w.style,ce=w.key,Ae=s==null?void 0:s.includes(xe[G]);return t.a.createElement("div",{style:R,key:ce},Ae&&t.a.createElement(vt,{column:xe[G],disabled:Boolean(Ae)}),!Ae&&t.a.createElement(pt,{column:xe[G],index:G,collection:"selected-columns"}))},Et=Object(Ot.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(gt.a,null,function(Oe){var w=Oe.height,G=Oe.width;return t.a.createElement(at.b,{height:w,rowCount:xe.length,rowRenderer:ft,rowHeight:u,width:G})}))}),nt=function(w){var G=w.oldIndex,R=w.newIndex,ce=Y()(xe),Ae=ce.splice(G,1),_t=m()(Ae,1),Pt=_t[0];ce.splice(R,0,Pt),mt(ce)};return t.a.createElement(jt.a,{id:"column-configurator-modal",centered:!0,visible:$e,title:"Configure columns",onOk:et,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:ze,footer:t.a.createElement(De.a,null,t.a.createElement(We.b,{style:{flexGrow:1},align:"start"},t.a.createElement(ee.a,{className:"text-blue",onClick:function(){return dt(c)}},"Reset to defaults")),t.a.createElement(We.b,null,t.a.createElement(ee.a,{className:"text-blue",type:"text",onClick:ze},"Close"),t.a.createElement(ee.a,{type:"primary",onClick:et},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(De.a,{gutter:16,className:"lists"},t.a.createElement(Ie.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",xe.length,") - Drag to reorder"),t.a.createElement(Et,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:nt,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(Ie.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(gt.a,null,function(Oe){var w=Oe.height,G=Oe.width;return t.a.createElement(It.a,{height:w,width:G,taxonomicGroupTypes:[Dt.a.EventProperties],value:void 0,onChange:function(ce,Ae){return Ae&&ct(String(Ae))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:q()({},Dt.a.EventProperties,xe)})})))),t.a.createElement(Rt.a,{label:t.a.createElement(me.a,{title:Ke!=null&&Ke.is_staff?void 0:"You don't have permission to set default columns for all project members"},"Save as default for all project members"),className:"save-as-default-button mt","data-attr":"events-table-save-columns-as-default-toggle",onChange:qe,defaultChecked:!1,disabled:!(Ke!=null&&Ke.is_staff)})))}try{lt.displayName="LemonTableConfig",lt.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:lt.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(r){}var Nt=e("./frontend/src/lib/utils/eventUsageLogic.ts");function xt(r,s){var c=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);s&&(u=u.filter(function(x){return Object.getOwnPropertyDescriptor(r,x).enumerable})),c.push.apply(c,u)}return c}function At(r){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?xt(Object(c),!0).forEach(function(u){q()(r,u,c[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):xt(Object(c)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(c,u))})}return r}function it(r){var s,c=r.pageKey,u=r.fixedFilters,x=r.fixedColumns,J=r.sceneUrl,W=r.fetchMonths,$e=W===void 0?12:W,ke=r.startingColumns,ze=r.showCustomizeColumns,ne=ze===void 0?!0:ze,Be=r.showExport,ct=Be===void 0?!0:Be,ut=r.showAutoload,dt=ut===void 0?!0:ut,mt=r.showEventFilter,qe=mt===void 0?!0:mt,et=r.showPropertyFilter,tt=et===void 0?!0:et,xe=r.showRowExpanders,ht=xe===void 0?!0:xe,Ke=r.showActionsButton,vt=Ke===void 0?!0:Ke,pt=r.showPersonColumn,ft=pt===void 0?!0:pt,Et=r.linkPropertiesToFilters,nt=Et===void 0?!0:Et,Oe=Object(U.useValues)(v.a),w=Oe.currentTeam,G=Object(T.a)({fixedFilters:u,key:c,sceneUrl:J||Te.a.events(),fetchMonths:$e}),R=Object(U.useValues)(G),ce=R.properties,Ae=R.eventsFormatted,_t=R.isLoading,Pt=R.hasNext,Lt=R.isLoadingNext,yt=R.eventFilter,Ft=R.automaticLoadEnabled,Wt=R.exportUrl,wt=R.highlightEvents,Vt=R.months,Mt=Object(U.useValues)(Z({startingColumns:(s=w&&w.live_events_columns)!==null&&s!==void 0?s:ke})),rt=Mt.tableWidth,Xe=Mt.selectedColumns,Ye=Object(U.useActions)(G),$t=Ye.fetchNextEvents,zt=Ye.prependNewEvents,Yt=Ye.setEventFilter,Ht=Ye.toggleAutomaticLoad,Jt=Ye.startDownload,Gt=Ye.setPollingActive,Xt=Ye.setProperties,Qt=!(u!=null&&u.person_id),Zt=Object(U.useActions)(Nt.f),kt=Zt.reportEventsTablePollingReactedToPageVisibility;E(function(A){Gt(A),kt(A)});var bt=function(g,h){var B=g.date_break,P=g.new_events;return{children:B||(P?t.a.createElement(n.a,{icon:t.a.createElement(f.IconSync,null),style:{borderRadius:0},onClick:function(){return zt()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:h+1,style:P?{padding:0}:void 0}}},qt={title:"Person",key:"person",render:function(g,h){var B,P,b=h.event;return b?Qt&&(B=b.person)!==null&&B!==void 0&&(P=B.distinct_ids)!==null&&P!==void 0&&P.length?t.a.createElement(ae.a,{to:Te.a.person(b.person.distinct_ids[0])},t.a.createElement(N.a,{noLink:!0,withIcon:!0,person:b.person})):t.a.createElement(N.a,{withIcon:!0,person:b.person}):{props:{colSpan:0}}}},Ct=Object(Se.useMemo)(function(){var A=[{title:"Event",key:"event",width:"16rem",render:function(h,B){if(!B.event)return bt(B,rt);var P=B.event;return t.a.createElement(be.a,{value:Object(O.f)(P)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(h,B){var P=B.event;if(!P)return{props:{colSpan:0}};var b=P.properties.$current_url?"$current_url":"$screen_name";return nt?t.a.createElement(i,{className:"ph-no-capture",property:b,value:P.properties[b],filters:{properties:ce}}):t.a.createElement(L,{value:P.properties[b]})}},{title:t.a.createElement(me.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(h,B){var P=B.event;return P?nt?t.a.createElement(i,{property:"$lib",value:P.properties.$lib,filters:{properties:ce}}):t.a.createElement(L,{value:P.properties.$lib}):{props:{colSpan:0}}}}];return ft&&A.splice(1,0,qt),A},[rt]),en=Object(Se.useMemo)(function(){var A=[];if(Xe==="DEFAULT")A=Y()(Ct);else{var g=ft?Xe:Xe.filter(function(h){return h!=="person"});A=g.map(function(h,B){var P=Ct.find(function(b){return b.key===h});return P?At(At({},P),{},{render:function(He,Je){var st=Je.event;return st?P.render?P.render(He,Je,B):{props:{colSpan:0}}:B===0?bt(Je,rt):{props:{colSpan:0}}}}):{title:be.e.event[h]?be.e.event[h].label:h,key:h,render:function(He,Je){var st=Je.event;return st?nt?t.a.createElement(i,{className:"ph-no-capture ",property:h,value:st.properties[h],filters:{properties:ce}}):t.a.createElement(L,{value:st.properties[h]}):B===0?bt(Je,rt):{props:{colSpan:0}}}}})}return A.push({title:"Time",key:"time",render:function(B,P){var b=P.event;return b?t.a.createElement(Ne.b,{time:b.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),vt&&A.push({key:"actions",width:0,render:function(B,P){var b=P.event;if(!b)return{props:{colSpan:0}};var He;return b.event==="$pageview"?He={insight:ge.z.TRENDS,interval:"day",display:ge.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:b.properties.$current_url,type:"event"}]}]}:b.event!=="$autocapture"&&(He={insight:ge.z.TRENDS,interval:"day",display:ge.j.ActionsLineGraph,actions:[],events:[{id:b.event,name:b.event,type:"events",order:0,properties:[]}]}),t.a.createElement(o.a,{overlay:t.a.createElement(t.a.Fragment,null,w&&t.a.createElement(n.a,{type:"stealth",onClick:function(){return Object(l.a)(w.id,b,0,w.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),He&&t.a.createElement(n.a,{type:"stealth",to:Te.a.insightNew(He),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),x?A.concat(x):A},[Xe,rt]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(qe||tt)&&t.a.createElement("div",{className:"flex pt pb space-x border-top"},qe&&t.a.createElement(F.b,{value:yt,onChange:function(g){Yt(g||"")}}),tt&&t.a.createElement(Fe.a,{propertyFilters:ce,onChange:Xt,pageKey:c,style:{marginBottom:0,marginTop:0},eventNames:yt?[yt]:[],useLemonButton:!0})),dt||ne||ct?t.a.createElement("div",{className:Object(Ce.a)("space-between-items pt pb",(qe||tt)&&"border-top")},dt&&t.a.createElement(a.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:Ft,onChange:Ht}),t.a.createElement("div",{className:"flex space-x-05"},ne&&t.a.createElement(lt,{immutableColumns:["event","person"],defaultColumns:Ct.map(function(A){return A.key||""})}),ct&&Wt&&t.a.createElement(me.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(n.a,{type:"secondary",icon:t.a.createElement(f.IconExport,{style:{color:"var(--primary)"}}),onClick:Jt},"Export")))):null,t.a.createElement(Ve.a,{dataSource:Ae,loading:_t,columns:en,key:Xe==="DEFAULT"?"default":Xe.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:_t?void 0:ce.some(function(A){return Object.keys(A).length})||yt?"No events matching filters found in the last ".concat(Vt," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(ae.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(g){var h;return g.event?g.event.id+"-"+g.event.event:((h=g.date_break)===null||h===void 0?void 0:h.toString())||""},rowClassName:function(g){return Object(Ce.a)({"event-row":g.event,highlighted:g.event&&wt[g.event.id],"event-row-is-exception":g.event&&g.event.event==="$exception","event-row-date-separator":g.date_break,"event-row-new":g.new_events})},expandable:ht?{expandedRowRender:function(g){var h=g.event;return h&&t.a.createElement(he.a,{event:h})},rowExpandable:function(g){var h=g.event,B=g.date_break,P=g.new_events;return B||P?-1:!!h}}:void 0}),t.a.createElement(ee.a,{type:"primary",onClick:$t,loading:Lt,style:{display:Pt||Lt?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{it.displayName="EventsTable",it.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:it.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(r){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(pe,S,e){"use strict";e.d(S,"a",function(){return Ve});var k=e("./node_modules/core-js/modules/es.object.keys.js"),re=e.n(k),fe=e("./node_modules/core-js/modules/es.symbol.js"),Ee=e.n(fe),_e=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),q=e.n(_e),se=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Y=e.n(se),ye=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ue=e.n(ye),Le=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),de=e.n(Le),H=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),V=e.n(H),Ue=e("./node_modules/@babel/runtime/regenerator/index.js"),oe=e.n(Ue),Me=e("./node_modules/core-js/modules/es.array.map.js"),Se=e.n(Me),t=e("./node_modules/core-js/modules/es.object.to-string.js"),U=e.n(t),he=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ae=e.n(he),ee=e("./node_modules/core-js/modules/es.array.splice.js"),le=e.n(ee),X=e("./node_modules/core-js/modules/es.array.join.js"),we=e.n(X),I=e("./node_modules/core-js/modules/es.array.filter.js"),z=e.n(I),L=e("./node_modules/core-js/modules/es.array.concat.js"),je=e.n(L),Q=e("./node_modules/core-js/modules/es.array.iterator.js"),_=e.n(Q),i=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),O=e.n(i),y=e("./node_modules/kea/lib/index.esm.js"),K=e("./frontend/src/lib/utils.tsx"),$=e("./node_modules/kea-router/lib/index.js"),Pe=e.n($),p=e("./frontend/src/lib/api.ts"),C=e("./frontend/src/scenes/teamLogic.tsx"),j=e("./frontend/src/lib/dayjs.ts"),T=e("./frontend/src/lib/components/lemonToast.tsx"),N=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Ne=e("./frontend/src/lib/components/ExportButton/exporterLogic.ts"),be=e("./frontend/src/lib/constants.tsx");function ge(f,n){var o=Object.keys(f);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(f);n&&(a=a.filter(function(v){return Object.getOwnPropertyDescriptor(f,v).enumerable})),o.push.apply(o,a)}return o}function F(f){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?ge(Object(o),!0).forEach(function(a){de()(f,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(o)):ge(Object(o)).forEach(function(a){Object.defineProperty(f,a,Object.getOwnPropertyDescriptor(o,a))})}return f}var Fe=5,me=365,Ce=5e3,Z=function(n,o){var a=[];return a=n.map(function(v){return{event:v}}),a.forEach(function(v,l){var E=a[l-1];l>0&&v.event&&E.event&&!Object(j.a)(v.event.timestamp).isSame(E.event.timestamp,"day")&&a.splice(l,0,{date_break:Object(j.a)(v.event.timestamp).format("LL")})}),o.length>0&&a.splice(0,0,{new_events:!0}),a},Te=function(n){return Object(j.b)().subtract(n,"day").toISOString()},Ve=Object(y.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(o){return!!o}).join("-")},connect:{values:[C.a,["currentTeamId"],N.a,["featureFlags"]],actions:[Ne.b,["exportItem"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:function(n){var o,a,v=n.props;return{pollingIsActive:[!0,{setPollingActive:function(E,d){var m=d.pollingActive;return m},pollEventsSuccess:function(E,d){var m=d.events;return m&&m.length?!1:E},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(E,d){var m=d.properties;return Object(K.s)(m)}}],eventFilter:[(o=(a=v.fixedFilters)===null||a===void 0?void 0:a.event_filter)!==null&&o!==void 0?o:"",{setEventFilter:function(E,d){var m=d.event;return m}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(E,d){var m=d.events,ve=d.isNext;return ve?[].concat(V()(E),V()(m)):m},prependEvents:function(E,d){var m=d.events;return[].concat(V()(m),V()(E))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(E,d){var m=d.hasNext;return m}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(E,d){var m=d.selectedEvent;return m}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(E,d){var m=d.events;return m||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(E,d){var m=d.events;return m.reduce(function(ve,te){return ve[te.id]=!0,ve},{})}}],pollTimeout:[0,{setPollTimeout:function(E,d){return d.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(E,d){var m=d.automaticLoadEnabled;return m}}]}},selectors:function(n){var o=n.selectors,a=n.props;return{eventsFormatted:[function(){return[o.events,o.newEvents]},function(v,l){return Z(v,l)}],exportParams:[function(){return[o.eventFilter,o.orderBy,o.properties,o.minimumQueryDate]},function(v,l,E,d){var m;return F(F(F({},a.fixedFilters||{}),{},{properties:[].concat(V()(E),V()(((m=a.fixedFilters)===null||m===void 0?void 0:m.properties)||[]))},v?{event:v}:{}),{},{orderBy:[l],after:d})}],exportUrl:[function(){return[o.currentTeamId,o.exportParams]},function(v,l){return"/api/projects/".concat(v,"/events.csv?").concat(Object(K.Bb)(l))}],months:[function(){return[function(v,l){return l.fetchMonths}]},function(v){return v||12}],minimumQueryDate:[function(){return[o.months]},function(v){return Object(j.b)().subtract(v,"months").toISOString()}],pollAfter:[function(){return[o.events]},function(v){return(v==null?void 0:v.length)>0&&v[0].timestamp?v[0].timestamp:Te(0)}]}},actionToUrl:function(n){var o=n.values;return{setProperties:function(){return[$.router.values.location.pathname,F(F({},$.router.values.searchParams),{},{properties:o.properties.length===0?void 0:o.properties}),$.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[$.router.values.location.pathname,F(F({},$.router.values.searchParams),{},{eventFilter:o.eventFilter}),$.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var o=n.actions,a=n.values,v=n.props;return de()({},v.sceneUrl,function(l,E){o.setProperties(E.properties||a.properties||{}),E.eventFilter&&o.setEventFilter(E.eventFilter)})},events:function(n){var o=n.values;return{beforeUnmount:function(){return clearTimeout(o.pollTimeout||void 0)}}},listeners:function(n){var o=n.actions,a=n.values,v=n.props;return{startDownload:function(){a.featureFlags[be.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS]?o.exportItem(Ne.a.CSV,a.exportParams):(T.d.success("The export is starting. It should finish soon"),window.location.href=a.exportUrl)},setProperties:function(){return o.fetchEvents()},setEventFilter:function(){return o.fetchEvents()},fetchNextEvents:function(){var l=ue()(oe.a.mark(function d(){var m;return oe.a.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:m=a.events,m.length===0?o.fetchEvents():o.fetchEvents({before:m[m.length-1].timestamp});case 2:case"end":return te.stop()}},d)}));function E(){return l.apply(this,arguments)}return E}(),fetchEvents:function(){var l=ue()(oe.a.mark(function d(m,ve){var te,De,We,Ie,Re,ie,Ge,D;return oe.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(Re=function(){return Re=ue()(oe.a.mark(function ot(jt){var at;return oe.a.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return at=F(F(F(F({after:jt},v.fixedFilters||{}),{},{properties:We},De||{}),a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy]}),Ze.abrupt("return",p.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(Object(K.Bb)(at))));case 2:case"end":return Ze.stop()}},ot)})),Re.apply(this,arguments)},Ie=function(ot){return Re.apply(this,arguments)},De=m.nextParams,clearTimeout(a.pollTimeout),!(a.events.length>0)){M.next=9;break}return M.next=7,ve(300);case 7:M.next=11;break;case 9:return M.next=11,ve(1);case 11:return We=[].concat(V()(a.properties),V()(((te=v.fixedFilters)===null||te===void 0?void 0:te.properties)||[])),ie=null,Ge=!1,M.prev=14,M.next=17,Ie(Te(Fe));case 17:if(ie=M.sent,ie.results.length!==0){M.next=23;break}return M.next=21,Ie(Te(me));case 21:ie=M.sent,Ge=!0;case 23:M.next=29;break;case 25:return M.prev=25,M.t0=M.catch(14),o.fetchOrPollFailure(M.t0),M.abrupt("return");case 29:ve(),o.fetchEventsSuccess({events:ie.results,hasNext:!!ie.next||!Ge,isNext:!!De}),D=window.setTimeout(o.pollEvents,Ce),o.setPollTimeout(D);case 33:case"end":return M.stop()}},d,null,[[14,25]])}));function E(d,m){return l.apply(this,arguments)}return E}(),pollEvents:function(){var l=ue()(oe.a.mark(function d(m,ve){var te,De,We,Ie,Re,ie;return oe.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(De=function(){var M=window.setTimeout(o.pollEvents,Ce);o.setPollTimeout(M)},a.orderBy==="-timestamp"){D.next=3;break}return D.abrupt("return");case 3:if(v.sceneUrl===$.router.values.location.pathname){D.next=5;break}return D.abrupt("return");case 5:if(a.pollingIsActive){D.next=8;break}return De(),D.abrupt("return");case 8:return We=[].concat(V()(a.properties),V()(((te=v.fixedFilters)===null||te===void 0?void 0:te.properties)||[])),Ie=F(F(F({},v.fixedFilters||{}),{},{properties:We},a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy],after:a.pollAfter}),Re=Object(K.Bb)(Ie),ie=null,D.prev=12,D.next=15,p.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(Re));case 15:ie=D.sent,D.next=21;break;case 18:return D.prev=18,D.t0=D.catch(12),D.abrupt("return");case 21:ve(),a.automaticLoadEnabled?o.prependEvents(ie.results):o.pollEventsSuccess(ie.results),De();case 24:case"end":return D.stop()}},d,null,[[12,18]])}));function E(d,m){return l.apply(this,arguments)}return E}(),prependNewEvents:function(){a.newEvents.length&&o.prependEvents(a.newEvents)},fetchOrPollFailure:function(E){var d=E.error;T.d.error("There was a problem fetching your events: ".concat(d.statusText))},toggleAutomaticLoad:function(E){var d=E.automaticLoadEnabled;d&&o.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(pe,S,e){var k=e("./node_modules/css-loader/dist/runtime/api.js");S=k(!1),S.push([pe.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--text-muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--text-default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal .save-as-default-button{border:1px solid var(--dark-grey);border-radius:.25rem}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--text-default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),pe.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(pe,S,e){var k=e("./node_modules/css-loader/dist/runtime/api.js");S=k(!1),S.push([pe.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--depr-lighten-danger-40)}.events td{max-width:20rem}",""]),pe.exports=S}}]);
