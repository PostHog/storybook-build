(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{"./frontend/src/scenes/plugins/Plugins.tsx":function(je,Z,o){"use strict";o.r(Z),o.d(Z,"scene",function(){return Ul}),o.d(Z,"Plugins",function(){return Cn});var ne=o("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ie=o.n(ne),ke=o("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss"),$=o.n(ke),q={};q.insert="head",q.singleton=!1;var zl=ie()($.a,q),Bl=$.a.locals||{},D=o("./node_modules/react/index.js"),e=o.n(D),Jl=o("./node_modules/core-js/modules/es.symbol.js"),Dl=o("./node_modules/core-js/modules/es.symbol.description.js"),Yl=o("./node_modules/core-js/modules/es.array.concat.js"),Kl=o("./node_modules/core-js/modules/es.array.every.js"),Ml=o("./node_modules/core-js/modules/es.array.filter.js"),Hl=o("./node_modules/core-js/modules/es.array.find.js"),$l=o("./node_modules/core-js/modules/es.array.includes.js"),Gl=o("./node_modules/core-js/modules/es.array.map.js"),Wl=o("./node_modules/core-js/modules/es.function.name.js"),Xl=o("./node_modules/core-js/modules/es.object.keys.js"),Ql=o("./node_modules/core-js/modules/es.object.values.js"),Zl=o("./node_modules/core-js/modules/es.string.includes.js"),Tn=o("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ve=o.n(Tn),An=o("./node_modules/@babel/runtime/helpers/defineProperty.js"),Je=o.n(An),xn=o("./node_modules/@babel/runtime/helpers/slicedToArray.js"),U=o.n(xn),f=o("./node_modules/kea/lib/index.esm.js"),p=o("./frontend/src/scenes/plugins/pluginsLogic.ts"),We=o("./node_modules/antd/es/switch/index.js"),w=o("./node_modules/antd/es/form/index.js"),le=o("./node_modules/antd/es/space/index.js"),Xe=o("./node_modules/antd/es/popconfirm/index.js"),E=o("./node_modules/antd/es/button/index.js"),F=o("./node_modules/antd/es/tag/index.js"),kn=o("./node_modules/@ant-design/icons/es/icons/LockFilled.js"),In=o("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js"),_n=o("./node_modules/@ant-design/icons/es/icons/RollbackOutlined.js"),Qe=o("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),Ze=o("./node_modules/@ant-design/icons/es/icons/CodeOutlined.js"),ue=o("./frontend/src/scenes/userLogic.ts"),ae=o("./frontend/src/lib/utils.tsx"),qe=o.p+"images/plugin-default.e3e047768d82d1c3fe24fce102eaef18.svg";function en(l,n){var a=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);n&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),a.push.apply(a,t)}return a}function Ie(l){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?en(Object(a),!0).forEach(function(t){Je()(l,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(a)):en(Object(a)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(a,t))})}return l}function be(l){var n=l.url,a=l.pluginType,t=l.size,r=t===void 0?"medium":t,s=Object(D.useState)({image:qe}),i=U()(s,2),c=i[0],d=i[1],u=r==="large"?100:60;return Object(D.useEffect)(function(){if(n!=null&&n.includes("github.com")){var m=Object(ae.mb)(n),y=m.user,v=m.repo;d(Ie(Ie({},c),{},{image:"https://raw.githubusercontent.com/".concat(y,"/").concat(v,"/main/logo.png")}))}},[n]),a==="source"?e.a.createElement(Ze.a,{style:{fontSize:u},className:"plugin-image"}):e.a.createElement("div",{className:"plugin-image",style:{width:u,height:u,backgroundImage:"url(".concat(c.image,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat"},onError:function(){return d(Ie(Ie({},c),{},{image:qe}))}})}try{be.displayName="PluginImage",be.__docgenInfo={description:"",displayName:"PluginImage",props:{url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},pluginType:{defaultValue:null,description:"",name:"pluginType",required:!1,type:{name:"enum",value:[{value:'"local"'},{value:'"custom"'},{value:'"repository"'},{value:'"source"'}]}},size:{defaultValue:{value:"medium"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"medium"'},{value:'"large"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginImage.tsx#PluginImage"]={docgenInfo:be.__docgenInfo,name:"PluginImage",path:"frontend/src/scenes/plugins/plugin/PluginImage.tsx#PluginImage"})}catch(l){}var nn=o("./frontend/src/lib/components/Drawer.tsx"),V=o("./frontend/src/lib/components/Tooltip.tsx");function ye(l){var n=l.url,a=l.title,t=l.style;return e.a.createElement(V.a,{title:n.substring(5)},e.a.createElement(F.a,{color:"purple",onClick:function(){return Object(ae.s)(n.substring(5))},style:t},a||"Local Plugin"))}try{ye.displayName="LocalPluginTag",ye.__docgenInfo={description:"",displayName:"LocalPluginTag",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx#LocalPluginTag"]={docgenInfo:ye.__docgenInfo,name:"LocalPluginTag",path:"frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx#LocalPluginTag"})}catch(l){}var G=o("./frontend/src/scenes/plugins/utils.ts"),Rn=o("./node_modules/react-markdown/lib/react-markdown.js"),ln=o.n(Rn);function he(l){var n=l.title,a=n===void 0?"Source Code":n,t=l.style;return e.a.createElement(F.a,{style:t},a)}try{he.displayName="SourcePluginTag",he.__docgenInfo={description:"",displayName:"SourcePluginTag",props:{title:{defaultValue:{value:"Source Code"},description:"",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx#SourcePluginTag"]={docgenInfo:he.__docgenInfo,name:"SourcePluginTag",path:"frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx#SourcePluginTag"})}catch(l){}var te=o("./node_modules/antd/es/input/index.js"),De=o("./node_modules/@monaco-editor/react/lib/es/index.js");function an(l,n){var a=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);n&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),a.push.apply(a,t)}return a}function tn(l){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?an(Object(a),!0).forEach(function(t){Je()(l,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(a)):an(Object(a)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(a,t))})}return l}var Fn=`// Learn more about plugins at: https://posthog.com/docs/plugins/build/overview

// Processes each event, optionally transforming it
export function processEvent(event, { config }) {
    // Some events (such as $identify) don't have properties
    if (event.properties) {
        event.properties['hello'] = \`Hello \${config.name}\`
    }
    // Return the event to be ingested, or return null to discard
    return event
}

// Runs when the plugin is loaded, allows for preparing it as needed
export function setupPlugin (meta) {
    console.log(\`The date is \${new Date().toDateString()}\`)
}

// Runs every hour on the hour
async function runEveryHour(meta) {
    const response = await fetch('https://palabras-aleatorias-public-api.herokuapp.com/random')
    const data = await response.json()
    const randomSpanishWord = data.body.Word
    console.log(\`\xA1\${randomSpanishWord.toUpperCase()}!\`)
}`,Ln=[{markdown:"Specify your config here"},{key:"name",name:"Person to greet",type:"string",hint:"Used to personalise the property `hello`",default:"world",required:!1}];function Vn(){var l=Object(f.useValues)(p.b),n=l.editingPlugin,a=l.editingSource,t=l.loading,r=Object(f.useActions)(p.b),s=r.setEditingSource,i=r.editPluginSource,c=w.a.useForm(),d=U()(c,1),u=d[0];Object(D.useEffect)(function(){if(n){var v=!n.source&&Object.keys(n.config_schema).length===0;u.setFieldsValue({name:n.name||"Untitled Plugin",source:v?Fn:n.source,configSchema:JSON.stringify(v?Ln:n.config_schema,null,2)})}else u.resetFields()},[n==null?void 0:n.id,a]);function m(v){n&&i(tn(tn({},v),{},{id:n.id,configSchema:JSON.parse(v.configSchema)}))}var y={required:!0,message:"Please enter a value!"};return e.a.createElement(nn.a,{forceRender:!0,visible:a,onClose:function(){u.getFieldValue("source")!==(n==null?void 0:n.source)?confirm("You have unsaved changes in your plugin. Are you sure you want to exit?")&&s(!1):s(!1)},width:"min(90vw, 64rem)",title:"Coding Plugin: ".concat(n==null?void 0:n.name),placement:"left",footer:e.a.createElement("div",{style:{textAlign:"right"}},e.a.createElement(E.a,{onClick:function(){return s(!1)},style:{marginRight:16}},"Cancel"),e.a.createElement(E.a,{type:"primary",loading:t,onClick:u.submit},"Save"))},e.a.createElement(w.a,{form:u,layout:"vertical",onFinish:m},a?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Read our"," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build/overview",target:"_blank"},"plugin building overview in PostHog Docs")," ","for a good grasp of possibilities.",e.a.createElement("br",null),"Once satisfied with your plugin, feel free to"," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build/tutorial#submitting-your-plugin",target:"_blank"},"submit it to the official Plugin Library"),"."),e.a.createElement(w.a.Item,{label:"Name",name:"name",required:!0,rules:[y]},e.a.createElement(te.a,null)),e.a.createElement(w.a.Item,{label:"Source Code",name:"source",required:!0,rules:[y]},e.a.createElement(De.a,{language:"typescript",theme:"vs-dark",height:400,options:{minimap:{enabled:!1}}})),e.a.createElement(w.a.Item,{label:"Config Schema JSON",name:"configSchema",required:!0,rules:[y,{validator:ae.Bb}]},e.a.createElement(De.a,{language:"json",theme:"vs-dark",height:200}))):null))}var Nn=o("./node_modules/antd/es/upload/index.js"),Un=o("./node_modules/@ant-design/icons/es/icons/UploadOutlined.js");function _e(l){var n=l.value,a=l.onChange;return e.a.createElement(Nn.a,{multiple:!1,fileList:n!=null&&n.size?[n]:[],beforeUpload:function(r){return a==null||a(r),!1},onRemove:function(){return a==null||a(null),!1},className:"ph-ignore-input"},e.a.createElement(E.a,{icon:e.a.createElement(Un.a,null)},"Click to upload"))}try{_e.displayName="UploadField",_e.__docgenInfo={description:"",displayName:"UploadField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"UploadFile<any> | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((file?: UploadFile<any> | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/UploadField.tsx#UploadField"]={docgenInfo:_e.__docgenInfo,name:"UploadField",path:"frontend/src/scenes/plugins/edit/UploadField.tsx#UploadField"})}catch(l){}var on=o("./node_modules/antd/es/select/index.js"),wn=o("./node_modules/@ant-design/icons/es/icons/EditOutlined.js");function Re(l){var n=l.value,a=l.onChange,t=l.fieldConfig,r=Object(D.useState)(!1),s=U()(r,2),i=s[0],c=s[1];return t.secret&&!i&&n&&(n===G.a||n.name===G.a)?e.a.createElement(E.a,{icon:e.a.createElement(wn.a,null),onClick:function(){a==null||a(t.default||""),c(!0)}},"Reset secret ",t.type==="attachment"?"attachment":"field"):t.type==="attachment"?e.a.createElement(_e,{value:n,onChange:a}):t.type==="string"?e.a.createElement(te.a,{value:n,onChange:a,autoFocus:i,className:"ph-no-capture"}):t.type==="choice"?e.a.createElement(on.a,{dropdownMatchSelectWidth:!1,value:n,className:"ph-no-capture",onChange:a,showSearch:!0},t.choices.map(function(d){return e.a.createElement(on.a.Option,{value:d,key:d},d)})):e.a.createElement("strong",{style:{color:"var(--danger)"}},'Unknown field type "',e.a.createElement("code",null,t.type),'".',e.a.createElement("br",null),"You may need to upgrade PostHog!")}try{Re.displayName="PluginField",Re.__docgenInfo={description:"",displayName:"PluginField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},fieldConfig:{defaultValue:null,description:"",name:"fieldConfig",required:!0,type:{name:"PluginConfigSchema"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/PluginField.tsx#PluginField"]={docgenInfo:Re.__docgenInfo,name:"PluginField",path:"frontend/src/scenes/plugins/edit/PluginField.tsx#PluginField"})}catch(l){}var Y=o("./frontend/src/scenes/plugins/access.ts"),sn=o("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),zn={processEvent:"Read + modify access to events before ingestion",processEventBatch:"Read + modify access to events before ingestion, in batches",onEvent:"Read-only access to events",onSnapshot:"Read-only access to session recording events",exportEvents:"Read-only access to events, optimized for export",runEveryMinute:"Runs a task every minute",runEveryHour:"Runs a task every hour",runEveryDay:"Runs a task every day"},ql=o("./node_modules/core-js/modules/es.object.entries.js"),Bn=o("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),rn=o("./node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),Ye=o("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),un=o("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Jn=o("./node_modules/antd/es/tooltip/index.js"),Dn=o("./node_modules/antd/es/input-number/index.js"),Ke=o("./node_modules/antd/es/radio/index.js"),Yn=o("./node_modules/antd/es/date-picker/index.js"),Kn=o("./node_modules/antd/lib/modal/Modal.js"),Mn=o.n(Kn),ea=o("./node_modules/core-js/modules/es.array.iterator.js"),na=o("./node_modules/core-js/modules/es.object.to-string.js"),la=o("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Hn=o("./node_modules/@babel/runtime/regenerator/index.js"),dn=o.n(Hn),aa=o("./node_modules/regenerator-runtime/runtime.js"),$n=o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Gn=o.n($n),Wn=o("./frontend/src/lib/api.ts"),cn=o("./frontend/src/lib/components/lemonToast.tsx"),mn=Object(f.kea)({props:{},key:function(n){return"".concat(n.pluginId,"_").concat(n.jobName)},path:function(n){return["scenes","plugins","edit","interface-jobs","interfaceJobsLogic",n]},connect:{actions:[p.b,["showPluginLogs"]]},actions:{setIsJobModalOpen:function(n){return{isOpen:n}},setRunJobAvailable:function(n){return{isAvailable:n}},runJob:function(n){return{form:n}},playButtonOnClick:function(n,a){return{form:n,jobHasEmptyPayload:a}},setRunJobAvailableTimeout:function(n){return{timeout:n}}},reducers:{isJobModalOpen:[!1,{setIsJobModalOpen:function(n,a){var t=a.isOpen;return t}}],runJobAvailable:[!0,{setRunJobAvailable:function(n,a){var t=a.isAvailable;return t}}],runJobAvailableTimeout:[null,{setRunJobAvailableTimeout:function(n,a){var t=a.timeout;return t}}]},listeners:function(n){var a=n.actions,t=n.props,r=n.values;return{runJob:function(){var s=Gn()(dn.a.mark(function c(d){var u,m,y,v,T,A,b,S;return dn.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return u=d.form,j.prev=1,j.next=4,u.validateFields();case 4:j.next=9;break;case 6:return j.prev=6,j.t0=j.catch(1),j.abrupt("return");case 9:for(a.setIsJobModalOpen(!1),m=u.getFieldsValue(),y=0,v=Object.entries(m);y<v.length;y++)A=U()(v[y],2),b=A[0],S=A[1],((T=t.jobSpecPayload)===null||T===void 0?void 0:T[b].type)==="date"&&(m[b]?m[b]=S.toISOString():m[b]=null);return j.prev=12,j.next=15,Wn.b.create("api/plugin_config/".concat(t.pluginConfigId,"/job"),{job:{type:t.jobName,payload:u.getFieldsValue()}});case 15:j.next=21;break;case 17:return j.prev=17,j.t1=j.catch(12),cn.a.error('Enqueuing job "'.concat(t.jobName,'" failed')),j.abrupt("return");case 21:a.showPluginLogs(t.pluginId),a.setRunJobAvailable(!1),r.runJobAvailableTimeout&&clearTimeout(r.runJobAvailableTimeout),setTimeout(function(){var _=a.setRunJobAvailable(!0);a.setRunJobAvailableTimeout(_)},15e3),cn.a.success("Job has been enqueued");case 26:case"end":return j.stop()}},c,null,[[1,6],[12,17]])}));function i(c){return s.apply(this,arguments)}return i}(),playButtonOnClick:function(i){var c=i.form,d=i.jobHasEmptyPayload;if(!!r.runJobAvailable){if(d){a.runJob(c);return}a.setIsJobModalOpen(!0)}}}},events:function(n){var a=n.values;return{beforeUnmount:function(){a.runJobAvailableTimeout&&clearTimeout(a.runJobAvailableTimeout)}}}}),Xn={required:!0,message:"Please enter a value!"},Qn="Export historical events";function Fe(l){var n=l.jobName,a=l.jobSpec,t=l.pluginConfigId,r=l.pluginId;n===Qn&&(a.payload={dateFrom:{type:"date"},dateTo:{type:"date"}});var s={jobName:n,pluginConfigId:t,pluginId:r,jobSpecPayload:a.payload},i=Object(f.useActions)(mn(s)),c=i.setIsJobModalOpen,d=i.runJob,u=i.playButtonOnClick,m=Object(f.useValues)(mn(s)),y=m.runJobAvailable,v=m.isJobModalOpen,T=Object.keys(a.payload||{}).length===0,A=w.a.useForm(),b=U()(A,1),S=b[0],h=y?T?"Run job":"Configure and run job":"You already ran this job recently.";return e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{style:{marginLeft:10,marginRight:5},onClick:function(){return u(S,T)}},e.a.createElement(Jn.a,{title:h},T?e.a.createElement(Bn.a,{className:y?"plugin-run-job-button":"plugin-run-job-button-disabled"}):e.a.createElement(rn.a,{className:y?"plugin-run-job-button":"plugin-run-job-button-disabled"}))),e.a.createElement(Mn.a,{visible:v,onCancel:function(){return c(!1)},onOk:function(){return d(S)},okText:"Run job now",title:"Configuring job '".concat(n,"'")},a.payload?e.a.createElement(w.a,{form:S,layout:"vertical"},Object.entries(a.payload).map(function(j){var _=U()(j,2),R=_[0],x=_[1];return e.a.createElement("span",{key:R},e.a.createElement(w.a.Item,{style:{marginBottom:15},name:R,required:!!x.required,rules:x.required?[Xn].concat(ve()(x.type==="json"?[{validator:ae.Bb}]:[])):[],label:R},x.type==="string"?e.a.createElement(te.a,null):x.type==="number"?e.a.createElement(Dn.a,null):x.type==="json"?e.a.createElement(De.a,{options:{codeLens:!1},className:"plugin-job-json-editor",language:"json",height:200}):x.type==="boolean"?e.a.createElement(Ke.a.Group,{id:"propertyValue",buttonStyle:"solid"},e.a.createElement(Ke.a.Button,{value:!0,defaultChecked:!0},e.a.createElement(Ye.a,null)," True"),e.a.createElement(Ke.a.Button,{value:!1},e.a.createElement(un.a,null)," False")):x.type==="date"?e.a.createElement(Yn.a,{popupStyle:{zIndex:1061},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,use12Hours:!0,showTime:!0}):null))})):null))}try{Fe.displayName="PluginJobConfiguration",Fe.__docgenInfo={description:"",displayName:"PluginJobConfiguration",props:{jobName:{defaultValue:null,description:"",name:"jobName",required:!0,type:{name:"string"}},jobSpec:{defaultValue:null,description:"",name:"jobSpec",required:!0,type:{name:"JobSpec"}},pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobConfiguration"]={docgenInfo:Fe.__docgenInfo,name:"PluginJobConfiguration",path:"frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobConfiguration"})}catch(l){}function Le(l){var n=l.plugin,a=l.pluginConfigId,t=n.capabilities,r=n.public_jobs;return!t||!t.jobs||!r||r.length===0?e.a.createElement(e.a.Fragment,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("h3",{className:"l3",style:{marginTop:32}},"Jobs (Beta)"),t.jobs.map(function(s){if(s in r)return e.a.createElement("div",{key:s},s==="Export historical events"?e.a.createElement(V.a,{title:"Run this plugin on all historical events ingested until now"},e.a.createElement("i",null,"Export historical events")):e.a.createElement("i",null,s),e.a.createElement(Fe,{jobName:s,jobSpec:r[s],pluginConfigId:a,pluginId:n.id}))}))}try{Le.displayName="PluginJobOptions",Le.__docgenInfo={description:"",displayName:"PluginJobOptions",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"PluginTypeWithConfig"}},pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/interface-jobs/PluginJobOptions.tsx#PluginJobOptions"]={docgenInfo:Le.__docgenInfo,name:"PluginJobOptions",path:"frontend/src/scenes/plugins/edit/interface-jobs/PluginJobOptions.tsx#PluginJobOptions"})}catch(l){}var Zn=o("./frontend/src/lib/constants.tsx");function gn(l,n){var a=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);n&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),a.push.apply(a,t)}return a}function pn(l){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?gn(Object(a),!0).forEach(function(t){Je()(l,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(a)):gn(Object(a)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(a,t))})}return l}window.process=Zn.k;function qn(l){var n=l.value,a=l.onChange;return e.a.createElement(e.a.Fragment,null,e.a.createElement(We.a,{checked:n,onChange:a}),e.a.createElement("strong",{style:{paddingLeft:10}},n?"Enabled":"Disabled"))}var el=function(){return e.a.createElement(e.a.Fragment,null,e.a.createElement(V.a,{placement:"topLeft",title:"This is a secret write-only field. Its value is not available after saving."},e.a.createElement(kn.a,{style:{marginRight:5}})))};function nl(){var l=Object(f.useValues)(ue.a),n=l.user,a=Object(f.useValues)(sn.a),t=a.preflight,r=Object(f.useValues)(p.b),s=r.editingPlugin,i=r.loading,c=r.editingSource,d=r.editingPluginInitialChanges,u=Object(f.useActions)(p.b),m=u.editPlugin,y=u.savePluginConfig,v=u.uninstallPlugin,T=u.setEditingSource,A=u.generateApiKeysIfNeeded,b=u.patchPlugin,S=w.a.useForm(),h=U()(S,1),j=h[0],_=Object(D.useState)([]),R=U()(_,2),x=R[0],Te=R[1],ge=Object(D.useState)([]),k=U()(ge,2),C=k[0],z=k[1];Object(D.useEffect)(function(){s?(j.setFieldsValue(pn(pn({},s.pluginConfig.config||Object(G.b)(s)),{},{__enabled:s.pluginConfig.enabled},d)),A(j)):j.resetFields(),W()},[s==null?void 0:s.id,s==null?void 0:s.config_schema]);var W=function(){pe(),Ae()},pe=function(){for(var O=[],L=0,H=Object.values(Object(G.d)((s==null?void 0:s.config_schema)||{}));L<H.length;L++){var N=H[L];if(!(!N.visible_if||!N.key)){var X=N.visible_if.every(function(oe){var J=U()(oe,2),se=J[0],Q=J[1];return Object(G.c)(j,se,Q)});X||O.push(N.key)}}Te(O)},Ae=function(){for(var O=[],L=0,H=Object.values(Object(G.d)((s==null?void 0:s.config_schema)||{}));L<H.length;L++){var N=H[L];if(!(!N.required_if||!Array.isArray(N.required_if)||!N.key)){var X=N.required_if.every(function(oe){var J=U()(oe,2),se=J[0],Q=J[1];return Object(G.c)(j,se,Q)});X&&O.push(N.key)}}z(O)},xe=function(O){return Array.isArray(O.choices)&&!!O.choices.length&&!O.choices.find(function(L){return typeof L!="string"})&&!O.secret},fe=function(O){return O.type!=="choice"||xe(O)};return e.a.createElement(e.a.Fragment,null,e.a.createElement(nn.a,{forceRender:!0,visible:!!s,onClose:function(){return m(null)},width:"min(90vw, 500px)",title:s==null?void 0:s.name,"data-attr":"plugin-drawer",footer:e.a.createElement("div",{style:{display:"flex"}},e.a.createElement(le.b,{style:{flexGrow:1}},s&&!s.is_global&&Object(Y.c)(n==null?void 0:n.organization,s.organization_id)&&e.a.createElement(Xe.a,{placement:"topLeft",title:"Are you sure you wish to uninstall this plugin completely?",onConfirm:function(){return v(s.name)},okText:"Uninstall",cancelText:"Cancel",className:"plugins-popconfirm"},e.a.createElement(E.a,{style:{color:"var(--danger)",padding:4},type:"text",icon:e.a.createElement(In.a,null),"data-attr":"plugin-uninstall"},"Uninstall")),(t==null?void 0:t.cloud)&&s&&Object(Y.b)(n==null?void 0:n.organization)&&(s.is_global?e.a.createElement(V.a,{title:e.a.createElement(e.a.Fragment,null,"This plugin can currently be used by other organizations in this instance of PostHog. This action will ",e.a.createElement("b",null,"disable and hide it")," for all organizations other than yours.")},e.a.createElement(E.a,{type:"text",icon:e.a.createElement(_n.a,null),onClick:function(){return b(s.id,{is_global:!1})},style:{padding:4}},"Make local")):e.a.createElement(V.a,{title:e.a.createElement(e.a.Fragment,null,"This action will mark this plugin as installed for"," ",e.a.createElement("b",null,"all organizations")," in this instance of PostHog.")},e.a.createElement(E.a,{type:"text",icon:e.a.createElement(Qe.a,null),onClick:function(){return b(s.id,{is_global:!0})},style:{padding:4}},"Make global")))),e.a.createElement(le.b,null,e.a.createElement(E.a,{onClick:function(){return m(null)},"data-attr":"plugin-drawer-cancel"},"Cancel"),e.a.createElement(E.a,{type:"primary",loading:i,onClick:j.submit,"data-attr":"plugin-drawer-save"},"Save")))},e.a.createElement(w.a,{form:j,layout:"vertical",name:"basic",onFinish:y},s?e.a.createElement("div",null,e.a.createElement("div",{style:{display:"flex",marginBottom:16}},e.a.createElement(be,{pluginType:s.plugin_type,url:s.url,size:"large"}),e.a.createElement("div",{style:{flexGrow:1,paddingLeft:16}},Object(ae.y)(s.description),e.a.createElement("div",{style:{marginTop:5}},(s==null?void 0:s.plugin_type)==="local"&&s.url?e.a.createElement(ye,{url:s.url,title:"Installed Locally"}):s.plugin_type==="source"?e.a.createElement(he,null):null,s.url&&e.a.createElement("a",{href:s.url},e.a.createElement("i",null,"\u2937 Learn more"))),e.a.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:5}},e.a.createElement(w.a.Item,{fieldKey:"__enabled",name:"__enabled",style:{display:"inline-block",marginBottom:0},"data-attr":"plugin-enabled-switch"},e.a.createElement(qn,null))))),s.plugin_type==="source"?e.a.createElement("div",null,e.a.createElement(E.a,{type:c?"default":"primary",icon:e.a.createElement(Ze.a,null),onClick:function(){return T(!c)},"data-attr":"plugin-edit-source"},"Edit Source")):null,s.capabilities&&Object.keys(s.capabilities).length>0?e.a.createElement(e.a.Fragment,null,e.a.createElement("h3",{className:"l3",style:{marginTop:32}},"Capabilities"),e.a.createElement("div",{style:{marginTop:5}},[].concat(ve()(s.capabilities.methods),ve()(s.capabilities.scheduled_tasks)).filter(function(g){return!["setupPlugin","teardownPlugin"].includes(g)}).map(function(g){return e.a.createElement(V.a,{title:zn[g]||"",key:g},e.a.createElement(F.a,{className:"plugin-capabilities-tag"},g))}),s.capabilities.jobs.map(function(g){return e.a.createElement(V.a,{title:"Custom job",key:g},e.a.createElement(F.a,{className:"plugin-capabilities-tag"},g))}))):null,s.pluginConfig.id&&e.a.createElement(Le,{plugin:s,pluginConfigId:s.pluginConfig.id}),e.a.createElement("h3",{className:"l3",style:{marginTop:32}},"Configuration"),Object(G.d)(s.config_schema).length===0?e.a.createElement("div",null,"This plugin is not configurable."):null,Object(G.d)(s.config_schema).map(function(g,O){return e.a.createElement(e.a.Fragment,{key:g.key||"__key__".concat(O)},g.markdown&&e.a.createElement(ln.a,{source:g.markdown,linkTarget:"_blank"}),g.type&&fe(g)?e.a.createElement(w.a.Item,{hidden:!!g.key&&x.includes(g.key),label:e.a.createElement(e.a.Fragment,null,g.secret&&e.a.createElement(el,null),g.name||g.key),extra:g.hint&&e.a.createElement("small",null,e.a.createElement("div",{style:{height:2}}),e.a.createElement(ln.a,{source:g.hint,linkTarget:"_blank"})),name:g.key,required:g.required||!!g.key&&C.includes(g.key),rules:[{required:g.required||!!g.key&&C.includes(g.key),message:"Please enter a value!"}]},e.a.createElement(Re,{fieldConfig:g,onChange:W})):e.a.createElement(e.a.Fragment,null,g.type?e.a.createElement("p",{style:{color:"var(--danger)"}},"Invalid config field ",e.a.createElement("i",null,g.name||g.key),"."):null))})):null)),(s==null?void 0:s.plugin_type)==="source"?e.a.createElement(Vn,null):null)}var I=o("./node_modules/antd/es/row/index.js"),P=o("./node_modules/antd/es/col/index.js"),ta=o("./node_modules/core-js/modules/es.string.starts-with.js"),Ee=o("./node_modules/antd/es/card/index.js"),ll=o("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),fn=o("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),al=o("./node_modules/@ant-design/icons/es/icons/WarningOutlined.js"),jn=o("./node_modules/@ant-design/icons/es/icons/LoadingOutlined.js"),tl=o("./node_modules/@ant-design/icons/es/icons/UnorderedListOutlined.js"),Oe=o("./node_modules/@ant-design/icons/es/icons/CloudDownloadOutlined.js"),ol=o("./node_modules/antd/es/popover/index.js"),sl=o("./node_modules/@ant-design/icons/es/icons/ClearOutlined.js"),Ve=o("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),vn=o("./frontend/src/lib/dayjs.ts");function Pe(l){var n=l.error,a=l.reset;return n?e.a.createElement(ol.a,{title:e.a.createElement("div",{style:{textAlign:"center"}},Object(vn.a)(n.time).format("YYYY-MM-DD - HH:mm:ss")),content:e.a.createElement(e.a.Fragment,null,a?e.a.createElement(E.a,{size:"small",onClick:a,style:{float:"right",marginLeft:10}},e.a.createElement(sl.a,null)," Delete"):null,e.a.createElement("div",null,n.name?e.a.createElement("strong",null,n.name,": "):"",n.message),n.stack?e.a.createElement(Ve.a,{wrap:!0,style:{fontSize:10},language:Ve.b.JavaScript},n.stack):null,n.event?e.a.createElement(Ve.a,{wrap:!0,style:{fontSize:10},language:Ve.b.JSON},JSON.stringify(n.event,null,2)):null),trigger:"click",placement:"top"},e.a.createElement(F.a,{color:"red",style:{cursor:"pointer"}},"ERROR")):null}try{Pe.displayName="PluginError",Pe.__docgenInfo={description:"",displayName:"PluginError",props:{error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"PluginErrorType"}},reset:{defaultValue:null,description:"",name:"reset",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"]={docgenInfo:Pe.__docgenInfo,name:"PluginError",path:"frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"})}catch(l){}var B=o("./frontend/src/scenes/plugins/types.ts");function Ne(l){var n=l.isCommunity;return e.a.createElement(V.a,{title:n?"This plugin was built by a community memeber, not the PostHog team.":"This plugin was built by the PostHog team."},e.a.createElement(F.a,{color:n?"cyan":"geekblue"},n?"Community":"Official"))}try{Ne.displayName="CommunityPluginTag",Ne.__docgenInfo={description:"",displayName:"CommunityPluginTag",props:{isCommunity:{defaultValue:null,description:"",name:"isCommunity",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"]={docgenInfo:Ne.__docgenInfo,name:"CommunityPluginTag",path:"frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"})}catch(l){}var oa=o("./node_modules/core-js/modules/es.regexp.exec.js"),sa=o("./node_modules/core-js/modules/es.string.match.js");function bn(l){var n=l.tag;return n.match(/^[a-f0-9]{40}$/)?e.a.createElement("code",null,n.substring(0,7)):e.a.createElement("code",null,n)}function Ue(l){var n=l.url,a=l.tag,t=l.latestTag,r="";return n.match(/^https:\/\/(www.|)github.com\//)&&(r="".concat(n,"/compare/").concat(a,"...").concat(t)),n.match(/^https:\/\/(www.|)gitlab.com\//)&&(r="".concat(n,"/-/compare/").concat(a,"...").concat(t)),e.a.createElement(V.a,{title:e.a.createElement("div",null,"Installed: ",e.a.createElement(bn,{tag:a}),e.a.createElement("br",null),"Latest: ",e.a.createElement(bn,{tag:t}),r?e.a.createElement("div",{style:{marginTop:10}},"Click to see the diff"):null)},r?e.a.createElement("a",{href:r,target:"_blank",rel:"noreferrer noopener"},e.a.createElement(F.a,{color:"volcano",style:{cursor:"pointer"}},e.a.createElement(Oe.a,null)," Update available!")):e.a.createElement(F.a,{color:"volcano"},e.a.createElement(Oe.a,null)," Update available!"))}try{Ue.displayName="UpdateAvailable",Ue.__docgenInfo={description:"",displayName:"UpdateAvailable",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},tag:{defaultValue:null,description:"",name:"tag",required:!0,type:{name:"string"}},latestTag:{defaultValue:null,description:"",name:"latestTag",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"]={docgenInfo:Ue.__docgenInfo,name:"UpdateAvailable",path:"frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"})}catch(l){}var rl=o("./frontend/src/lib/components/LinkButton.tsx"),we=function(n){var a=n.updateStatus,t=n.pluginId,r=n.rearranging,s=Object(f.useActions)(p.b),i=s.editPlugin,c=s.updatePlugin,d=Object(f.useValues)(p.b),u=d.pluginsUpdating;return e.a.createElement(E.a,{type:a!=null&&a.updated?"default":"primary",className:"padding-under-500",onClick:function(){return a!=null&&a.updated?i(t):c(t)},loading:u.includes(t),icon:a!=null&&a.updated?e.a.createElement(Ye.a,null):e.a.createElement(Oe.a,null),disabled:r,"data-attr":"plugin-update"},e.a.createElement("span",{className:"show-over-500"},a!=null&&a.updated?"Updated":"Update"))};try{we.displayName="PluginUpdateButton",we.__docgenInfo={description:"",displayName:"PluginUpdateButton",props:{updateStatus:{defaultValue:null,description:"",name:"updateStatus",required:!0,type:{name:"PluginUpdateStatusType | undefined"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"]={docgenInfo:we.__docgenInfo,name:"PluginUpdateButton",path:"frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"})}catch(l){}function ze(l){var n=l.url,a=l.disabled,t=a===void 0?!1:a;return e.a.createElement(le.b,null,e.a.createElement(V.a,{title:"About"},e.a.createElement(rl.a,{to:n,target:"_blank",rel:"noopener noreferrer",disabled:t},e.a.createElement(ll.a,null))))}function de(l){var n,a=l.plugin,t=l.error,r=l.maintainer,s=l.showUpdateButton,i=l.order,c=l.maxOrder,d=l.rearranging,u=l.DragColumn,m=u===void 0?function(re){var Ge=re.children;return e.a.createElement(P.a,{className:"order-handle"},Ge)}:u,y=l.unorderedPlugin,v=y===void 0?!1:y,T=a.name,A=a.description,b=a.url,S=a.plugin_type,h=a.pluginConfig,j=a.tag,_=a.latest_tag,R=a.id,x=a.updateStatus,Te=a.hasMoved,ge=a.is_global,k=a.organization_id,C=a.organization_name,z=Object(f.useActions)(p.b),W=z.editPlugin,pe=z.toggleEnabled,Ae=z.installPlugin,xe=z.resetPluginConfigError,fe=z.rearrange,g=z.showPluginLogs,O=Object(f.useValues)(p.b),L=O.loading,H=O.installingPluginUrl,N=O.checkingForUpdates,X=O.pluginUrlToMaintainer,oe=Object(f.useValues)(ue.a),J=oe.user,se=r||a.url&&X[a.url],Q=r||X[a.url||""];return e.a.createElement(P.a,{style:{width:"100%",marginBottom:20},className:"plugins-scene-plugin-card-col".concat(d?" rearranging":""),"data-attr":"plugin-card-".concat(h?"installed":"available")},e.a.createElement(Ee.a,{className:"plugins-scene-plugin-card"},e.a.createElement(I.a,{align:"middle",className:"plugin-card-row"},typeof i=="number"&&typeof c=="number"?e.a.createElement(m,null,e.a.createElement("div",{className:"arrow".concat(i===1?" hide":"")},e.a.createElement(fn.a,null)),e.a.createElement("div",null,e.a.createElement(F.a,{color:Te?"#bd0225":"#555",onClick:fe},i)),e.a.createElement("div",{className:"arrow".concat(i===c?" hide":"")},e.a.createElement(fn.a,null))):null,v?e.a.createElement(V.a,{title:"This plugin does not do any processing in order.",placement:"topRight"},e.a.createElement(P.a,null,e.a.createElement(F.a,{color:"#555"},"-"))):null,h&&e.a.createElement(P.a,null,e.a.createElement(Xe.a,{placement:"topLeft",title:"Are you sure you wish to ".concat(h.enabled?"disable":"enable"," this plugin?"),onConfirm:function(){return h.id?pe({id:h.id,enabled:!h.enabled}):W(R||null,{__enabled:!0})},okText:"Yes",cancelText:"No",disabled:d},e.a.createElement(We.a,{checked:(n=h.enabled)!==null&&n!==void 0?n:!1,disabled:d}))),e.a.createElement(P.a,{className:h?"hide-plugin-image-below-500":""},e.a.createElement(be,{pluginType:S,url:b})),e.a.createElement(P.a,{style:{flex:1}},e.a.createElement("div",null,e.a.createElement("strong",{style:{marginRight:8}},T),se&&e.a.createElement(Ne,{isCommunity:Q==="community"}),h!=null&&h.error?e.a.createElement(Pe,{error:h.error,reset:function(){return xe((h==null?void 0:h.id)||0)}}):t?e.a.createElement(Pe,{error:t}):null,ge&&e.a.createElement(F.a,{color:"blue"},e.a.createElement(Qe.a,null)," Managed by ",C),Object(Y.c)(J==null?void 0:J.organization,k)&&e.a.createElement(e.a.Fragment,null,b!=null&&b.startsWith("file:")?e.a.createElement(ye,{url:b,title:"Local"}):null,x!=null&&x.error?e.a.createElement(F.a,{color:"red"},e.a.createElement(al.a,null)," Error checking for updates"):N&&!x&&S!==B.a.Source&&!(b!=null&&b.startsWith("file:"))?e.a.createElement(F.a,{color:"blue"},e.a.createElement(jn.a,null)," Checking for updates\u2026"):b&&_&&j?j===_?e.a.createElement(F.a,{color:"green"},e.a.createElement(Ye.a,null)," Up to date"):e.a.createElement(Ue,{url:b,tag:j,latestTag:_}):null,S===B.a.Source?e.a.createElement(he,null):null)),e.a.createElement("div",null,Object(ae.y)(A))),e.a.createElement(P.a,null,e.a.createElement(le.b,null,b&&e.a.createElement(ze,{url:b,disabled:d}),s&&R?e.a.createElement(we,{updateStatus:x,pluginId:R,rearranging:d}):R?e.a.createElement(e.a.Fragment,null,e.a.createElement(V.a,{title:h!=null&&h.id?"Logs":"Logs \u2013 enable the plugin for the first time to view them"},e.a.createElement(E.a,{className:"padding-under-500",disabled:d||!(h!=null&&h.id),onClick:function(){return g(R)},"data-attr":"plugin-logs"},e.a.createElement(tl.a,null))),e.a.createElement(V.a,{title:"Configure"},e.a.createElement(E.a,{type:"primary",className:"padding-under-500",disabled:d,onClick:function(){return W(R)},"data-attr":"plugin-configure"},e.a.createElement(rn.a,null)))):R?null:e.a.createElement(E.a,{type:"primary",className:"padding-under-500",loading:L&&H===b,disabled:L&&H!==b,onClick:b?function(){return Ae(b,B.a.Repository)}:void 0,icon:e.a.createElement(Oe.a,null),"data-attr":"plugin-install"},e.a.createElement("span",{className:"show-over-500"},"Install")))))))}try{ze.displayName="PluginAboutButton",ze.__docgenInfo={description:"",displayName:"PluginAboutButton",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"]={docgenInfo:ze.__docgenInfo,name:"PluginAboutButton",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"})}catch(l){}try{de.displayName="PluginCard",de.__docgenInfo={description:"",displayName:"PluginCard",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"Partial<PluginTypeWithConfig>"}},pluginConfig:{defaultValue:null,description:"",name:"pluginConfig",required:!1,type:{name:"PluginConfigType"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"PluginErrorType"}},maintainer:{defaultValue:null,description:"",name:"maintainer",required:!1,type:{name:"string"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:{value:'({ children }) => <Col className="order-handle">{children}</Col>'},description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"]={docgenInfo:de.__docgenInfo,name:"PluginCard",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"})}catch(l){}var K=o("./frontend/src/lib/components/PageHeader.tsx"),Se=o("./node_modules/antd/es/skeleton/index.js");function yn(){return e.a.createElement(e.a.Fragment,null,[1,2,3].map(function(l){return e.a.createElement(P.a,{key:l,style:{marginBottom:20,width:"100%"},className:"plugins-scene-plugin-card-col"},e.a.createElement(Ee.a,{className:"plugins-scene-plugin-card"},e.a.createElement(I.a,{align:"middle",className:"plugin-card-row"},e.a.createElement(P.a,{className:"hide-plugin-image-below-500"},e.a.createElement(Se.a.Avatar,{active:!0,size:"large",shape:"square"})),e.a.createElement(P.a,{style:{flex:1}},e.a.createElement(Se.a,{title:!1,paragraph:{rows:2},active:!0})),e.a.createElement(P.a,null,e.a.createElement("span",{className:"show-over-500"},e.a.createElement(Se.a.Button,{style:{width:100}})),e.a.createElement("span",{className:"hide-over-500"},e.a.createElement(Se.a.Button,{style:{width:32}}))))))}))}function hn(){var l=Object(f.useValues)(p.b),n=l.searchTerm,a=l.rearranging,t=Object(f.useActions)(p.b),r=t.setSearchTerm;return e.a.createElement(te.a.Search,{"data-attr":"plugins-search",placeholder:"Start typing to search for a plugin",autoFocus:!0,value:n||"",onChange:function(i){return r(i.target.value)},enterButton:!0,allowClear:!0,style:{maxWidth:400,marginTop:5,marginBottom:10},disabled:a})}var Ce=o("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),ce=o("./node_modules/@ant-design/icons/es/icons/CaretRightOutlined.js"),M;(function(l){l.Official="official",l.Community="community"})(M||(M={}));function il(){var l=Object(f.useValues)(p.b),n=l.repositoryLoading,a=l.filteredUninstalledPlugins,t=Object(D.useState)([M.Official,M.Community]),r=U()(t,2),s=r[0],i=r[1],c=a.filter(function(m){return m.maintainer==="official"}),d=a.filter(function(m){return m.maintainer==="community"}),u=function(y){if(s.includes(y)){i(s.filter(function(v){return y!==v}));return}i([].concat(ve()(s),[y]))};return e.a.createElement("div",null,e.a.createElement(K.b,{subtitle:"Plugin Repository"}),e.a.createElement(hn,null),e.a.createElement("div",null,(!n||a.length>0)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(I.a,{gutter:16,style:{marginTop:16,display:"block"}},e.a.createElement("div",{className:"plugins-repository-tab-section-header",onClick:function(){return u(M.Official)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,s.includes(M.Official)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Official Plugins (".concat(c.length,")"))})),s.includes(M.Official)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(P.a,{span:24},c.length>0?"Official plugins are built and maintained by the PostHog team.":"You have already installed all official plugins!"),e.a.createElement("br",null),c.map(function(m){return e.a.createElement(de,{key:m.url,plugin:{name:m.name,url:m.url,description:m.description},maintainer:m.maintainer})}))),e.a.createElement(I.a,{gutter:16,style:{marginTop:16,display:"block"}},e.a.createElement("div",{className:"plugins-repository-tab-section-header",onClick:function(){return u(M.Community)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,s.includes(M.Community)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Community Plugins (".concat(d.length,")"))})),s.includes(M.Community)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(P.a,{span:24},d.length>0?e.a.createElement("span",null,"Community plugins are not built nor maintained by the PostHog team."," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build",target:"_blank",rel:"noopener"},"Anyone, including you, can build a plugin.")):"You have already installed all community plugins!"),e.a.createElement("br",null),d.map(function(m){return e.a.createElement(de,{key:m.url,plugin:{name:m.name,url:m.url,description:m.description},maintainer:m.maintainer})}))))),n&&a.length===0&&e.a.createElement(I.a,{gutter:16},e.a.createElement(yn,null)))}var ul=o("./node_modules/antd/es/checkbox/index.js"),dl=o("./node_modules/antd/lib/input/Search.js"),cl=o.n(dl),ml=o("./frontend/src/lib/components/ResizableTable/index.tsx"),me=o("./frontend/src/types.ts"),En=o("./frontend/src/scenes/plugins/plugin/pluginLogsLogic.ts");function gl(l){var n;switch(l){case me.F.Debug:n="var(--muted)";break;case me.F.Log:n="var(--text-default)";break;case me.F.Info:n="var(--blue)";break;case me.F.Warn:n="var(--warning)";break;case me.F.Error:n="var(--danger)";break;default:break}return e.a.createElement("span",{style:{color:n}},l)}var pl=[{title:"Timestamp",key:"timestamp",dataIndex:"timestamp",span:3,render:function(n){return Object(vn.a)(n).format("YYYY-MM-DD HH:mm:ss.SSS UTC")}},{title:"Source",key:"source",dataIndex:"source",span:1},{title:"Type",key:"type",dataIndex:"type",span:1,render:gl},{title:"Message",key:"message",dataIndex:"message",span:6}];function Be(l){var n=l.pluginConfigId,a=Object(En.b)({pluginConfigId:n}),t=Object(f.useValues)(a),r=t.pluginLogs,s=t.pluginLogsLoading,i=t.pluginLogsBackground,c=t.isThereMoreToLoad,d=t.pluginLogsTypes,u=Object(f.useActions)(a),m=u.revealBackground,y=u.loadPluginLogsMore,v=u.setPluginLogsTypes,T=u.setSearchTerm;return e.a.createElement(le.b,{direction:"vertical",style:{flexGrow:1},className:"ph-no-capture plugin-logs"},e.a.createElement(I.a,null,e.a.createElement(cl.a,{loading:s,onSearch:T,placeholder:"Search for messages containing\u2026",allowClear:!0})),e.a.createElement(I.a,null,e.a.createElement(le.b,null,e.a.createElement("span",null,"Show logs of type:\xA0"),e.a.createElement(ul.a.Group,{options:Object.values(me.F),value:d,onChange:v,style:{marginLeft:"8px"}}))),e.a.createElement(I.a,null,e.a.createElement(E.a,{onClick:m,loading:s,style:{flexGrow:1},disabled:!i.length,icon:e.a.createElement(jn.a,null)},i.length?"Load ".concat(Object(ae.pb)(i.length,"newer entry","newer entries")):"No new entries")),e.a.createElement(ml.b,{dataSource:r,columns:pl,loading:s,size:"small",className:"ph-no-capture",rowKey:"id",style:{flexGrow:1},pagination:{pageSize:200,hideOnSinglePage:!0}}),!!r.length&&e.a.createElement(I.a,null,e.a.createElement(E.a,{onClick:y,loading:s,style:{flexGrow:1},disabled:!c},c?"Load up to ".concat(En.a," older entries"):"No older entries")))}try{Be.displayName="PluginLogs",Be.__docgenInfo={description:"",displayName:"PluginLogs",props:{pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"]={docgenInfo:Be.__docgenInfo,name:"PluginLogs",path:"frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"})}catch(l){}var fl=o("./node_modules/antd/es/drawer/index.js");function jl(){var l=Object(f.useValues)(p.b),n=l.showingLogsPlugin,a=l.lastShownLogsPlugin,t=Object(f.useActions)(p.b),r=t.hidePluginLogs;return e.a.createElement(fl.a,{visible:!!n,onClose:r,width:"min(90vw, 80rem)",title:"Viewing Plugin Logs: ".concat(a==null?void 0:a.name),placement:"left",destroyOnClose:!0},!!a&&e.a.createElement(Be,{pluginConfigId:a.pluginConfig.id}))}var vl=o("./node_modules/antd/es/empty/index.js");function bl(){var l=Object(f.useActions)(p.b),n=l.setPluginTab,a=Object(f.useValues)(p.b),t=a.loading,r=Object(f.useValues)(ue.a),s=r.user;return e.a.createElement(e.a.Fragment,null,t?e.a.createElement(e.a.Fragment,null,e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null," ",e.a.createElement(ce.a,null)," ","Enabled plugins"," "),buttons:e.a.createElement(Se.a.Button,{style:{width:150}})}),e.a.createElement(yn,null)):e.a.createElement(e.a.Fragment,null,e.a.createElement(K.b,{subtitle:"Installed plugins"}),e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},e.a.createElement(P.a,{span:24},e.a.createElement(vl.a,{description:e.a.createElement("span",null,"You haven't installed any plugins yet")},Object(Y.b)(s==null?void 0:s.organization)&&e.a.createElement(E.a,{type:"default",onClick:function(){return n(B.b.Repository)}},"Open the Plugin Repository"))))))}function ee(l){var n=l.plugin,a=l.showUpdateButton,t=l.order,r=l.maxOrder,s=l.rearranging,i=l.DragColumn,c=l.unorderedPlugin,d=c===void 0?!1:c;return e.a.createElement(de,{key:n.id,plugin:n,showUpdateButton:a,order:t,maxOrder:r,rearranging:s,DragColumn:i,unorderedPlugin:d})}try{ee.displayName="InstalledPlugin",ee.__docgenInfo={description:"",displayName:"InstalledPlugin",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"PluginTypeWithConfig"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:null,description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"]={docgenInfo:ee.__docgenInfo,name:"InstalledPlugin",path:"frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"})}catch(l){}function yl(){var l=Object(f.useValues)(p.b),n=l.filteredDisabledPlugins,a=l.sectionsOpen,t=l.disabledPlugins,r=Object(f.useActions)(p.b),s=r.toggleSectionOpen;return t.length===0?e.a.createElement(e.a.Fragment,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return s(p.a.Disabled)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,a.includes(p.a.Disabled)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Installed plugins (".concat(n.length,")"))})),a.includes(p.a.Disabled)?e.a.createElement(e.a.Fragment,null,n.length>0?e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},n.map(function(i){return e.a.createElement(ee,{key:i.id,plugin:i})})):e.a.createElement("p",{style:{margin:10}},"No plugins match your search.")):null)}var hl=o("./node_modules/@ant-design/icons/es/icons/SyncOutlined.js");function El(){var l=Object(f.useActions)(p.b),n=l.checkForUpdates,a=l.toggleSectionOpen,t=Object(f.useValues)(p.b),r=t.sectionsOpen,s=Object(f.useValues)(ue.a),i=s.user,c=Object(f.useValues)(p.b),d=c.filteredPluginsNeedingUpdates,u=c.pluginsNeedingUpdates,m=c.checkingForUpdates,y=c.installedPluginUrls,v=c.updateStatus,T=c.rearranging,A=c.hasUpdatablePlugins,b=Object(Y.c)(i==null?void 0:i.organization)&&A&&e.a.createElement(E.a,{type:"default",icon:u.length>0?e.a.createElement(hl.a,null):e.a.createElement(Oe.a,null),onClick:function(h){h.stopPropagation(),n(!0)},loading:m},m?"Checking plugin ".concat(Object.keys(v).length+1," out of ").concat(Object.keys(y).length):u.length>0?"Check again for updates":"Check for updates");return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return a(p.a.Upgrade)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,r.includes(p.a.Upgrade)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Plugins to update (".concat(d.length,")")),buttons:!T&&r.includes(p.a.Upgrade)&&b})),r.includes(p.a.Upgrade)?e.a.createElement(e.a.Fragment,null,u.length>0?e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},d.length>0?e.a.createElement(e.a.Fragment,null,d.map(function(S){return e.a.createElement(ee,{key:S.id,plugin:S,showUpdateButton:!0})})):e.a.createElement("p",{style:{margin:10}},"No plugins match your search.")):e.a.createElement("p",{style:{margin:10}},"All your plugins are up to date. Great work!")):null)}var ra=o("./node_modules/core-js/modules/es.array.splice.js"),Ol=o("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),Pl=o("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),Me=o("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js");function Sl(l,n){var a;if(typeof Symbol=="undefined"||l[Symbol.iterator]==null){if(Array.isArray(l)||(a=Cl(l))||n&&l&&typeof l.length=="number"){a&&(l=a);var t=0,r=function(){};return{s:r,n:function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,i=!1,c;return{s:function(){a=l[Symbol.iterator]()},n:function(){var u=a.next();return s=u.done,u},e:function(u){i=!0,c=u},f:function(){try{!s&&a.return!=null&&a.return()}finally{if(i)throw c}}}}function Cl(l,n){if(!!l){if(typeof l=="string")return On(l,n);var a=Object.prototype.toString.call(l).slice(8,-1);if(a==="Object"&&l.constructor&&(a=l.constructor.name),a==="Map"||a==="Set")return Array.from(l);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return On(l,n)}}function On(l,n){(n==null||n>l.length)&&(n=l.length);for(var a=0,t=new Array(n);a<n;a++)t[a]=l[a];return t}var Tl=Object(Me.c)(function(l){var n=l.children;return e.a.createElement(P.a,{className:"order-handle"},n)}),Al=Object(Me.b)(function(l){var n=l.plugin,a=l.order,t=l.maxOrder,r=l.rearranging;return e.a.createElement(ee,{plugin:n,order:a,maxOrder:t,rearranging:r,DragColumn:Tl})}),xl=Object(Me.a)(function(l){var n=l.children;return e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},n)});function kl(){var l=Object(f.useValues)(ue.a),n=l.user,a=Object(f.useActions)(p.b),t=a.rearrange,r=a.setTemporaryOrder,s=a.cancelRearranging,i=a.savePluginOrders,c=a.makePluginOrderSaveable,d=a.toggleSectionOpen,u=Object(f.useValues)(p.b),m=u.enabledPlugins,y=u.filteredEnabledPlugins,v=u.sortableEnabledPlugins,T=u.unsortableEnabledPlugins,A=u.rearranging,b=u.loading,S=u.temporaryOrder,h=u.pluginOrderSaveable,j=u.searchTerm,_=u.sectionsOpen,R=Object(Y.a)(n==null?void 0:n.organization)&&v.length>1,x=A?e.a.createElement(e.a.Fragment,null,e.a.createElement(E.a,{type:"primary",icon:e.a.createElement(Ol.a,null),loading:b,onClick:function(C){C.stopPropagation(),i(S)},disabled:!h},"Save order"),e.a.createElement(E.a,{type:"default",icon:e.a.createElement(un.a,null),onClick:function(C){s(),C.stopPropagation()}},"Cancel")):e.a.createElement(V.a,{title:m.length<=1?"At least two plugins need to be enabled for reordering.":e.a.createElement(e.a.Fragment,null,j?"Editing the order of plugins is disabled when searching.":e.a.createElement(e.a.Fragment,null,"Order matters because event processing with plugins works like a pipe: the event is processed by every enabled plugin ",e.a.createElement("b",null,"in sequence"),".")),placement:"top"},e.a.createElement(E.a,{icon:e.a.createElement(Pl.a,null),onClick:function(C){C.stopPropagation(),t()},disabled:!!j||v.length<=1},"Edit order")),Te=function(C){var z,W=C.oldIndex,pe=C.newIndex;if(W!==pe){var Ae=function(oe,J,se){var Q=ve()(oe);return Array.prototype.splice.call(Q,se,0,Array.prototype.splice.call(Q,J,1)[0]),Q.map(function(re,Ge){var wl=re.id;return{id:wl,order:Ge+1}})},xe=(z=m[W])===null||z===void 0?void 0:z.id,fe={},g=Sl(Ae(m,W,pe)),O;try{for(g.s();!(O=g.n()).done;){var L=O.value,H=L.id,N=L.order;fe[H]=N}}catch(X){g.e(X)}finally{g.f()}A||t(),r(fe,xe)}},ge=function(){return e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return d(p.a.Enabled)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,_.includes(p.a.Enabled)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Enabled plugins (".concat(y.length,")"),A&&_.includes(p.a.Enabled)&&e.a.createElement(F.a,{color:"red",style:{fontWeight:"normal",marginLeft:10}},"Reordering in progress")),buttons:e.a.createElement(le.b,null,_.includes(p.a.Enabled)&&x)}))};return m.length===0?e.a.createElement(e.a.Fragment,null,e.a.createElement(ge,null),_.includes(p.a.Enabled)&&e.a.createElement("p",{style:{margin:10}},"No plugins enabled.")):e.a.createElement(e.a.Fragment,null,e.a.createElement(ge,null),_.includes(p.a.Enabled)&&e.a.createElement(e.a.Fragment,null,v.length===0&&T.length===0&&e.a.createElement("p",{style:{margin:10}},"No plugins match your search."),R||A?e.a.createElement(e.a.Fragment,null,v.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement(xl,{useDragHandle:!0,onSortEnd:Te,onSortOver:c},v.map(function(k,C){return e.a.createElement(Al,{key:k.id,plugin:k,index:C,order:C+1,maxOrder:m.length,rearranging:A})})))):e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},v.length>0&&e.a.createElement(e.a.Fragment,null,v.map(function(k,C){return e.a.createElement(ee,{key:k.id,plugin:k,order:C+1,maxOrder:y.length})}))),T.map(function(k){return e.a.createElement(ee,{key:k.id,plugin:k,maxOrder:m.length,rearranging:A,unorderedPlugin:!0})})))}function Pn(){var l=Object(f.useValues)(p.b),n=l.installedPlugins;return n.length===0?e.a.createElement(bl,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("div",null,e.a.createElement(hn,null),e.a.createElement(El,null),e.a.createElement(kl,null),e.a.createElement(yl,null)),e.a.createElement(jl,null))}var Sn=o("./node_modules/antd/es/tabs/index.js"),Il=o("./node_modules/antd/es/alert/index.js"),_l=o("./node_modules/antd/lib/typography/Title.js"),He=o.n(_l),Rl=o("./node_modules/antd/lib/typography/Paragraph.js"),$e=o.n(Rl);function Fl(){var l=Object(f.useValues)(p.b),n=l.sourcePluginName,a=l.pluginError,t=l.loading,r=Object(f.useActions)(p.b),s=r.setSourcePluginName,i=r.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(Ee.a,null,e.a.createElement(He.a,{level:5},"Plugin Editor"),e.a.createElement($e.a,null,"Write your plugin directly in PostHog."," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/overview",target:"_blank"},"Read the documentation for more information!")),e.a.createElement(I.a,{style:{width:"100%"},gutter:16},e.a.createElement(P.a,{style:{flex:1}},e.a.createElement(te.a,{value:n,disabled:t,onChange:function(d){return s(d.target.value)},placeholder:'For example: "Hourly Weather Sync Plugin"'})),e.a.createElement(P.a,null,e.a.createElement(E.a,{disabled:t||!n,loading:t,type:"default",onClick:function(){return i(n,B.a.Source)}},"Start Coding"))),a?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},a):null))}function Ll(){var l=Object(f.useValues)(p.b),n=l.customPluginUrl,a=l.pluginError,t=l.loading,r=Object(f.useActions)(p.b),s=r.setCustomPluginUrl,i=r.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(Ee.a,null,e.a.createElement(He.a,{level:5},"Install from GitHub, GitLab or npm"),e.a.createElement($e.a,null,"To install a third-party or custom plugin, paste its URL below. For"," ",e.a.createElement("a",{href:"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token",target:"_blank",rel:"noopener noreferrer"},"GitHub"),", ",e.a.createElement("a",{href:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",target:"_blank",rel:"noopener noreferrer"},"GitLab")," and ",e.a.createElement("a",{href:"https://docs.npmjs.com/creating-and-viewing-access-tokens",target:"_blank",rel:"noopener noreferrer"},"npm")," ","private repositories, append ",e.a.createElement("code",null,"?private_token=TOKEN")," to the end of the URL.",e.a.createElement("br",null),e.a.createElement("b",{className:"text-warning"},"Warning: Only install plugins from trusted sources.")),e.a.createElement(I.a,{style:{width:"100%"},gutter:16},e.a.createElement(P.a,{style:{flex:1}},e.a.createElement(te.a,{value:n,disabled:t,onChange:function(d){return s(d.target.value)},placeholder:"https://github.com/user/repo"})),e.a.createElement(P.a,null,e.a.createElement(E.a,{disabled:t||!n,loading:t,type:"default",onClick:function(){return i(n,B.a.Custom)}},"Fetch and install"))),a?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},a):null))}function Vl(){var l=Object(f.useValues)(p.b),n=l.localPluginUrl,a=l.pluginError,t=l.loading,r=Object(f.useActions)(p.b),s=r.setLocalPluginUrl,i=r.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(Ee.a,null,e.a.createElement(He.a,{level:5},"Install Local Plugin"),e.a.createElement($e.a,null,"To install a local plugin from this computer/server, give its full path below."),e.a.createElement(I.a,{style:{width:"100%"},gutter:16},e.a.createElement(P.a,{style:{flex:1}},e.a.createElement(te.a,{value:n,disabled:t,onChange:function(d){return s(d.target.value)},placeholder:"/var/posthog/plugins/helloworldplugin"})),e.a.createElement(P.a,null,e.a.createElement(E.a,{disabled:t||!n,loading:t,type:"default",onClick:function(){return i(n,B.a.Local)}},"Install"))),a?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},a):null))}function Nl(){var l=Object(f.useValues)(sn.a),n=l.preflight,a=Object(f.useActions)(p.b),t=a.setPluginTab;return e.a.createElement(e.a.Fragment,null,e.a.createElement(Il.a,{message:"Advanced Features Ahead",description:e.a.createElement(e.a.Fragment,null,"Create and install your ",e.a.createElement("b",null,"own plugins")," or plugins from ",e.a.createElement("b",null,"third-parties"),". If you're looking for officially supported plugins, try the"," ",e.a.createElement("a",{href:"#",onClick:function(s){s.preventDefault(),t(B.b.Repository)}},"Plugin Repository"),"."),type:"warning",showIcon:!0}),e.a.createElement(K.b,{subtitle:"Advanced Options"}),e.a.createElement(Fl,null),e.a.createElement(Ll,null),n&&!n.cloud&&e.a.createElement(Vl,null))}var Ul={component:Cn,logic:p.b};function Cn(){var l=Object(f.useValues)(ue.a),n=l.user,a=Object(f.useValues)(p.b),t=a.pluginTab,r=Object(f.useActions)(p.b),s=r.setPluginTab,i=Sn.a.TabPane;return Object(D.useEffect)(function(){Object(Y.d)(n==null?void 0:n.organization)||(window.location.href="/")},[n]),!n||!Object(Y.d)(n==null?void 0:n.organization)?null:e.a.createElement("div",{className:"plugins-scene"},e.a.createElement(K.a,{title:"Plugins",caption:e.a.createElement(e.a.Fragment,null,"Plugins enable you to extend PostHog's core data processing functionality.",e.a.createElement("br",null),"Make use of verified plugins from the"," ",e.a.createElement("a",{href:"https://posthog.com/plugins",target:"_blank"},"Plugin Library")," ","\u2013 or"," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build",target:"_blank"},"build your own"),".")}),Object(Y.c)(n.organization)?e.a.createElement(Sn.a,{activeKey:t,onChange:function(d){return s(d)}},e.a.createElement(i,{tab:"Installed",key:B.b.Installed},e.a.createElement(Pn,null)),Object(Y.b)(n.organization)&&e.a.createElement(i,{tab:"Repository",key:B.b.Repository},e.a.createElement(il,null)),e.a.createElement(i,{tab:"Advanced",key:B.b.Advanced},e.a.createElement(Nl,null))):e.a.createElement(Pn,null),e.a.createElement(nl,null))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss":function(je,Z,o){var ne=o("./node_modules/css-loader/dist/runtime/api.js");Z=ne(!1),Z.push([je.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.plugins-scene{padding-bottom:60px}.plugins-installed-tab-section-header:hover,.plugins-repository-tab-section-header:hover{cursor:pointer}.plugins-repository-tab-section-header{margin-left:5px}.plugin-capabilities-tag{cursor:default}.plugins-scene-plugin-card>.ant-card-body{padding:15px}.plugins-scene-plugin-card .plugin-card-row>.ant-col{margin-right:14px}.plugins-scene-plugin-card .plugin-card-row>.ant-col:last-child{margin-right:0}.plugins-scene-plugin-card a.plugin-title-link{color:var(--color-text)}.plugins-scene-plugin-card a.plugin-title-link:hover{text-decoration:underline}.plugins-scene-plugin-card .plugin-image{width:60px;height:60px;display:flex;justify-content:center;align-items:center;margin-left:auto;margin-right:auto;border:none;padding:4px}.plugins-scene-plugin-card .order-handle{cursor:move;text-align:center;height:100%;margin-top:-10px;margin-bottom:-10px}.plugins-scene-plugin-card .order-handle .ant-tag{margin-right:0;cursor:move}.plugins-scene-plugin-card .order-handle .arrow{color:#888;height:19px}.plugins-scene-plugin-card .order-handle .arrow.hide{visibility:hidden}.plugins-scene-plugin-card .hide-over-500{display:none}@media(max-width:500px){.plugins-scene-plugin-card .show-over-500{display:none}.plugins-scene-plugin-card .hide-over-500{display:inline-block}.plugins-scene-plugin-card button.ant-btn.padding-under-500{padding:4px 8px}.plugins-scene-plugin-card .hide-plugin-image-below-500{display:none}}.plugins-popconfirm{z-index:1001}.plugin-job-json-editor{border:1px solid #efefef;padding:10px}.plugin-run-job-button{color:#77b96c;cursor:pointer}.plugin-run-job-button-disabled{color:#9a9a9a;cursor:default}",""]),je.exports=Z},"./node_modules/moment/locale sync recursive ^\\.\\/.*$":function(je,Z,o){var ne={"./af":"./node_modules/moment/locale/af.js","./af.js":"./node_modules/moment/locale/af.js","./ar":"./node_modules/moment/locale/ar.js","./ar-dz":"./node_modules/moment/locale/ar-dz.js","./ar-dz.js":"./node_modules/moment/locale/ar-dz.js","./ar-kw":"./node_modules/moment/locale/ar-kw.js","./ar-kw.js":"./node_modules/moment/locale/ar-kw.js","./ar-ly":"./node_modules/moment/locale/ar-ly.js","./ar-ly.js":"./node_modules/moment/locale/ar-ly.js","./ar-ma":"./node_modules/moment/locale/ar-ma.js","./ar-ma.js":"./node_modules/moment/locale/ar-ma.js","./ar-sa":"./node_modules/moment/locale/ar-sa.js","./ar-sa.js":"./node_modules/moment/locale/ar-sa.js","./ar-tn":"./node_modules/moment/locale/ar-tn.js","./ar-tn.js":"./node_modules/moment/locale/ar-tn.js","./ar.js":"./node_modules/moment/locale/ar.js","./az":"./node_modules/moment/locale/az.js","./az.js":"./node_modules/moment/locale/az.js","./be":"./node_modules/moment/locale/be.js","./be.js":"./node_modules/moment/locale/be.js","./bg":"./node_modules/moment/locale/bg.js","./bg.js":"./node_modules/moment/locale/bg.js","./bm":"./node_modules/moment/locale/bm.js","./bm.js":"./node_modules/moment/locale/bm.js","./bn":"./node_modules/moment/locale/bn.js","./bn-bd":"./node_modules/moment/locale/bn-bd.js","./bn-bd.js":"./node_modules/moment/locale/bn-bd.js","./bn.js":"./node_modules/moment/locale/bn.js","./bo":"./node_modules/moment/locale/bo.js","./bo.js":"./node_modules/moment/locale/bo.js","./br":"./node_modules/moment/locale/br.js","./br.js":"./node_modules/moment/locale/br.js","./bs":"./node_modules/moment/locale/bs.js","./bs.js":"./node_modules/moment/locale/bs.js","./ca":"./node_modules/moment/locale/ca.js","./ca.js":"./node_modules/moment/locale/ca.js","./cs":"./node_modules/moment/locale/cs.js","./cs.js":"./node_modules/moment/locale/cs.js","./cv":"./node_modules/moment/locale/cv.js","./cv.js":"./node_modules/moment/locale/cv.js","./cy":"./node_modules/moment/locale/cy.js","./cy.js":"./node_modules/moment/locale/cy.js","./da":"./node_modules/moment/locale/da.js","./da.js":"./node_modules/moment/locale/da.js","./de":"./node_modules/moment/locale/de.js","./de-at":"./node_modules/moment/locale/de-at.js","./de-at.js":"./node_modules/moment/locale/de-at.js","./de-ch":"./node_modules/moment/locale/de-ch.js","./de-ch.js":"./node_modules/moment/locale/de-ch.js","./de.js":"./node_modules/moment/locale/de.js","./dv":"./node_modules/moment/locale/dv.js","./dv.js":"./node_modules/moment/locale/dv.js","./el":"./node_modules/moment/locale/el.js","./el.js":"./node_modules/moment/locale/el.js","./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js","./en-ca":"./node_modules/moment/locale/en-ca.js","./en-ca.js":"./node_modules/moment/locale/en-ca.js","./en-gb":"./node_modules/moment/locale/en-gb.js","./en-gb.js":"./node_modules/moment/locale/en-gb.js","./en-ie":"./node_modules/moment/locale/en-ie.js","./en-ie.js":"./node_modules/moment/locale/en-ie.js","./en-il":"./node_modules/moment/locale/en-il.js","./en-il.js":"./node_modules/moment/locale/en-il.js","./en-in":"./node_modules/moment/locale/en-in.js","./en-in.js":"./node_modules/moment/locale/en-in.js","./en-nz":"./node_modules/moment/locale/en-nz.js","./en-nz.js":"./node_modules/moment/locale/en-nz.js","./en-sg":"./node_modules/moment/locale/en-sg.js","./en-sg.js":"./node_modules/moment/locale/en-sg.js","./eo":"./node_modules/moment/locale/eo.js","./eo.js":"./node_modules/moment/locale/eo.js","./es":"./node_modules/moment/locale/es.js","./es-do":"./node_modules/moment/locale/es-do.js","./es-do.js":"./node_modules/moment/locale/es-do.js","./es-mx":"./node_modules/moment/locale/es-mx.js","./es-mx.js":"./node_modules/moment/locale/es-mx.js","./es-us":"./node_modules/moment/locale/es-us.js","./es-us.js":"./node_modules/moment/locale/es-us.js","./es.js":"./node_modules/moment/locale/es.js","./et":"./node_modules/moment/locale/et.js","./et.js":"./node_modules/moment/locale/et.js","./eu":"./node_modules/moment/locale/eu.js","./eu.js":"./node_modules/moment/locale/eu.js","./fa":"./node_modules/moment/locale/fa.js","./fa.js":"./node_modules/moment/locale/fa.js","./fi":"./node_modules/moment/locale/fi.js","./fi.js":"./node_modules/moment/locale/fi.js","./fil":"./node_modules/moment/locale/fil.js","./fil.js":"./node_modules/moment/locale/fil.js","./fo":"./node_modules/moment/locale/fo.js","./fo.js":"./node_modules/moment/locale/fo.js","./fr":"./node_modules/moment/locale/fr.js","./fr-ca":"./node_modules/moment/locale/fr-ca.js","./fr-ca.js":"./node_modules/moment/locale/fr-ca.js","./fr-ch":"./node_modules/moment/locale/fr-ch.js","./fr-ch.js":"./node_modules/moment/locale/fr-ch.js","./fr.js":"./node_modules/moment/locale/fr.js","./fy":"./node_modules/moment/locale/fy.js","./fy.js":"./node_modules/moment/locale/fy.js","./ga":"./node_modules/moment/locale/ga.js","./ga.js":"./node_modules/moment/locale/ga.js","./gd":"./node_modules/moment/locale/gd.js","./gd.js":"./node_modules/moment/locale/gd.js","./gl":"./node_modules/moment/locale/gl.js","./gl.js":"./node_modules/moment/locale/gl.js","./gom-deva":"./node_modules/moment/locale/gom-deva.js","./gom-deva.js":"./node_modules/moment/locale/gom-deva.js","./gom-latn":"./node_modules/moment/locale/gom-latn.js","./gom-latn.js":"./node_modules/moment/locale/gom-latn.js","./gu":"./node_modules/moment/locale/gu.js","./gu.js":"./node_modules/moment/locale/gu.js","./he":"./node_modules/moment/locale/he.js","./he.js":"./node_modules/moment/locale/he.js","./hi":"./node_modules/moment/locale/hi.js","./hi.js":"./node_modules/moment/locale/hi.js","./hr":"./node_modules/moment/locale/hr.js","./hr.js":"./node_modules/moment/locale/hr.js","./hu":"./node_modules/moment/locale/hu.js","./hu.js":"./node_modules/moment/locale/hu.js","./hy-am":"./node_modules/moment/locale/hy-am.js","./hy-am.js":"./node_modules/moment/locale/hy-am.js","./id":"./node_modules/moment/locale/id.js","./id.js":"./node_modules/moment/locale/id.js","./is":"./node_modules/moment/locale/is.js","./is.js":"./node_modules/moment/locale/is.js","./it":"./node_modules/moment/locale/it.js","./it-ch":"./node_modules/moment/locale/it-ch.js","./it-ch.js":"./node_modules/moment/locale/it-ch.js","./it.js":"./node_modules/moment/locale/it.js","./ja":"./node_modules/moment/locale/ja.js","./ja.js":"./node_modules/moment/locale/ja.js","./jv":"./node_modules/moment/locale/jv.js","./jv.js":"./node_modules/moment/locale/jv.js","./ka":"./node_modules/moment/locale/ka.js","./ka.js":"./node_modules/moment/locale/ka.js","./kk":"./node_modules/moment/locale/kk.js","./kk.js":"./node_modules/moment/locale/kk.js","./km":"./node_modules/moment/locale/km.js","./km.js":"./node_modules/moment/locale/km.js","./kn":"./node_modules/moment/locale/kn.js","./kn.js":"./node_modules/moment/locale/kn.js","./ko":"./node_modules/moment/locale/ko.js","./ko.js":"./node_modules/moment/locale/ko.js","./ku":"./node_modules/moment/locale/ku.js","./ku.js":"./node_modules/moment/locale/ku.js","./ky":"./node_modules/moment/locale/ky.js","./ky.js":"./node_modules/moment/locale/ky.js","./lb":"./node_modules/moment/locale/lb.js","./lb.js":"./node_modules/moment/locale/lb.js","./lo":"./node_modules/moment/locale/lo.js","./lo.js":"./node_modules/moment/locale/lo.js","./lt":"./node_modules/moment/locale/lt.js","./lt.js":"./node_modules/moment/locale/lt.js","./lv":"./node_modules/moment/locale/lv.js","./lv.js":"./node_modules/moment/locale/lv.js","./me":"./node_modules/moment/locale/me.js","./me.js":"./node_modules/moment/locale/me.js","./mi":"./node_modules/moment/locale/mi.js","./mi.js":"./node_modules/moment/locale/mi.js","./mk":"./node_modules/moment/locale/mk.js","./mk.js":"./node_modules/moment/locale/mk.js","./ml":"./node_modules/moment/locale/ml.js","./ml.js":"./node_modules/moment/locale/ml.js","./mn":"./node_modules/moment/locale/mn.js","./mn.js":"./node_modules/moment/locale/mn.js","./mr":"./node_modules/moment/locale/mr.js","./mr.js":"./node_modules/moment/locale/mr.js","./ms":"./node_modules/moment/locale/ms.js","./ms-my":"./node_modules/moment/locale/ms-my.js","./ms-my.js":"./node_modules/moment/locale/ms-my.js","./ms.js":"./node_modules/moment/locale/ms.js","./mt":"./node_modules/moment/locale/mt.js","./mt.js":"./node_modules/moment/locale/mt.js","./my":"./node_modules/moment/locale/my.js","./my.js":"./node_modules/moment/locale/my.js","./nb":"./node_modules/moment/locale/nb.js","./nb.js":"./node_modules/moment/locale/nb.js","./ne":"./node_modules/moment/locale/ne.js","./ne.js":"./node_modules/moment/locale/ne.js","./nl":"./node_modules/moment/locale/nl.js","./nl-be":"./node_modules/moment/locale/nl-be.js","./nl-be.js":"./node_modules/moment/locale/nl-be.js","./nl.js":"./node_modules/moment/locale/nl.js","./nn":"./node_modules/moment/locale/nn.js","./nn.js":"./node_modules/moment/locale/nn.js","./oc-lnc":"./node_modules/moment/locale/oc-lnc.js","./oc-lnc.js":"./node_modules/moment/locale/oc-lnc.js","./pa-in":"./node_modules/moment/locale/pa-in.js","./pa-in.js":"./node_modules/moment/locale/pa-in.js","./pl":"./node_modules/moment/locale/pl.js","./pl.js":"./node_modules/moment/locale/pl.js","./pt":"./node_modules/moment/locale/pt.js","./pt-br":"./node_modules/moment/locale/pt-br.js","./pt-br.js":"./node_modules/moment/locale/pt-br.js","./pt.js":"./node_modules/moment/locale/pt.js","./ro":"./node_modules/moment/locale/ro.js","./ro.js":"./node_modules/moment/locale/ro.js","./ru":"./node_modules/moment/locale/ru.js","./ru.js":"./node_modules/moment/locale/ru.js","./sd":"./node_modules/moment/locale/sd.js","./sd.js":"./node_modules/moment/locale/sd.js","./se":"./node_modules/moment/locale/se.js","./se.js":"./node_modules/moment/locale/se.js","./si":"./node_modules/moment/locale/si.js","./si.js":"./node_modules/moment/locale/si.js","./sk":"./node_modules/moment/locale/sk.js","./sk.js":"./node_modules/moment/locale/sk.js","./sl":"./node_modules/moment/locale/sl.js","./sl.js":"./node_modules/moment/locale/sl.js","./sq":"./node_modules/moment/locale/sq.js","./sq.js":"./node_modules/moment/locale/sq.js","./sr":"./node_modules/moment/locale/sr.js","./sr-cyrl":"./node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"./node_modules/moment/locale/sr-cyrl.js","./sr.js":"./node_modules/moment/locale/sr.js","./ss":"./node_modules/moment/locale/ss.js","./ss.js":"./node_modules/moment/locale/ss.js","./sv":"./node_modules/moment/locale/sv.js","./sv.js":"./node_modules/moment/locale/sv.js","./sw":"./node_modules/moment/locale/sw.js","./sw.js":"./node_modules/moment/locale/sw.js","./ta":"./node_modules/moment/locale/ta.js","./ta.js":"./node_modules/moment/locale/ta.js","./te":"./node_modules/moment/locale/te.js","./te.js":"./node_modules/moment/locale/te.js","./tet":"./node_modules/moment/locale/tet.js","./tet.js":"./node_modules/moment/locale/tet.js","./tg":"./node_modules/moment/locale/tg.js","./tg.js":"./node_modules/moment/locale/tg.js","./th":"./node_modules/moment/locale/th.js","./th.js":"./node_modules/moment/locale/th.js","./tk":"./node_modules/moment/locale/tk.js","./tk.js":"./node_modules/moment/locale/tk.js","./tl-ph":"./node_modules/moment/locale/tl-ph.js","./tl-ph.js":"./node_modules/moment/locale/tl-ph.js","./tlh":"./node_modules/moment/locale/tlh.js","./tlh.js":"./node_modules/moment/locale/tlh.js","./tr":"./node_modules/moment/locale/tr.js","./tr.js":"./node_modules/moment/locale/tr.js","./tzl":"./node_modules/moment/locale/tzl.js","./tzl.js":"./node_modules/moment/locale/tzl.js","./tzm":"./node_modules/moment/locale/tzm.js","./tzm-latn":"./node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"./node_modules/moment/locale/tzm-latn.js","./tzm.js":"./node_modules/moment/locale/tzm.js","./ug-cn":"./node_modules/moment/locale/ug-cn.js","./ug-cn.js":"./node_modules/moment/locale/ug-cn.js","./uk":"./node_modules/moment/locale/uk.js","./uk.js":"./node_modules/moment/locale/uk.js","./ur":"./node_modules/moment/locale/ur.js","./ur.js":"./node_modules/moment/locale/ur.js","./uz":"./node_modules/moment/locale/uz.js","./uz-latn":"./node_modules/moment/locale/uz-latn.js","./uz-latn.js":"./node_modules/moment/locale/uz-latn.js","./uz.js":"./node_modules/moment/locale/uz.js","./vi":"./node_modules/moment/locale/vi.js","./vi.js":"./node_modules/moment/locale/vi.js","./x-pseudo":"./node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"./node_modules/moment/locale/x-pseudo.js","./yo":"./node_modules/moment/locale/yo.js","./yo.js":"./node_modules/moment/locale/yo.js","./zh-cn":"./node_modules/moment/locale/zh-cn.js","./zh-cn.js":"./node_modules/moment/locale/zh-cn.js","./zh-hk":"./node_modules/moment/locale/zh-hk.js","./zh-hk.js":"./node_modules/moment/locale/zh-hk.js","./zh-mo":"./node_modules/moment/locale/zh-mo.js","./zh-mo.js":"./node_modules/moment/locale/zh-mo.js","./zh-tw":"./node_modules/moment/locale/zh-tw.js","./zh-tw.js":"./node_modules/moment/locale/zh-tw.js"};function ie($){var q=ke($);return o(q)}function ke($){if(!o.o(ne,$)){var q=new Error("Cannot find module '"+$+"'");throw q.code="MODULE_NOT_FOUND",q}return ne[$]}ie.keys=function(){return Object.keys(ne)},ie.resolve=ke,je.exports=ie,ie.id="./node_modules/moment/locale sync recursive ^\\.\\/.*$"}}]);
