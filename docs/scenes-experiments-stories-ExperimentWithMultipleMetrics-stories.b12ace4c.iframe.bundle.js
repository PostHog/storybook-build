"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[9143],{"../../frontend/src/scenes/experiments/stories/ExperimentWithMultipleMetrics.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExperimentWithMultipleMetrics:()=>ExperimentWithMultipleMetrics,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var lib_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/utils.tsx"),scenes_App__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/scenes/App.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_mocks_browser__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/mocks/browser.tsx"),_mocks_fixtures_api_experiments_experiment_with_multiple_metrics_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/experiment_with_multiple_metrics.json"),_mocks_fixtures_api_experiments_exposure_query_result_json__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json"),_mocks_fixtures_api_experiments_funnel_metric_result_json__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/funnel_metric_result.json"),_mocks_fixtures_api_experiments_mean_metric_result_json__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/mean_metric_result.json"),_mocks_fixtures_api_experiments_ratio_metric_result_json__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/ratio_metric_result.json"),_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts");let __WEBPACK_DEFAULT_EXPORT__={component:scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,title:"Scenes-App/Experiments",parameters:{layout:"fullscreen",viewMode:"story",mockDate:"2025-01-27",pageUrl:scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.experiment(_mocks_fixtures_api_experiments_experiment_with_multiple_metrics_json__WEBPACK_IMPORTED_MODULE_4__.id)},decorators:[(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_3__.x8)({get:{[`/api/projects/:team_id/experiments/${_mocks_fixtures_api_experiments_experiment_with_multiple_metrics_json__WEBPACK_IMPORTED_MODULE_4__.id}/`]:_mocks_fixtures_api_experiments_experiment_with_multiple_metrics_json__WEBPACK_IMPORTED_MODULE_4__,"/api/projects/:team_id/experiment_holdouts":[],"/api/projects/:team_id/experiment_saved_metrics/":[],[`/api/projects/:team_id/feature_flags/${_mocks_fixtures_api_experiments_experiment_with_multiple_metrics_json__WEBPACK_IMPORTED_MODULE_4__.feature_flag.id}/`]:{},[`/api/projects/:team_id/feature_flags/${_mocks_fixtures_api_experiments_experiment_with_multiple_metrics_json__WEBPACK_IMPORTED_MODULE_4__.feature_flag.id}/status/`]:{}},post:{"/api/environments/:team_id/query":(req,res,ctx)=>{let body=req.body;return body.query.kind===_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_9__.OH.ExperimentExposureQuery?res(ctx.json(_mocks_fixtures_api_experiments_exposure_query_result_json__WEBPACK_IMPORTED_MODULE_5__)):(0,_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_9__.N4)(body.query.metric)?res(ctx.json(_mocks_fixtures_api_experiments_funnel_metric_result_json__WEBPACK_IMPORTED_MODULE_6__)):(0,_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_9__.Gt)(body.query.metric)?res(ctx.json(_mocks_fixtures_api_experiments_mean_metric_result_json__WEBPACK_IMPORTED_MODULE_7__)):(0,_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_9__.FQ)(body.query.metric)?res(ctx.json(_mocks_fixtures_api_experiments_ratio_metric_result_json__WEBPACK_IMPORTED_MODULE_8__)):void 0}}})]},ExperimentWithMultipleMetrics={play:(0,lib_utils__WEBPACK_IMPORTED_MODULE_0__.nO)(500)};ExperimentWithMultipleMetrics.parameters={...ExperimentWithMultipleMetrics.parameters,docs:{...ExperimentWithMultipleMetrics.parameters?.docs,source:{originalSource:"{\n  play: makeDelay(500)\n}",...ExperimentWithMultipleMetrics.parameters?.docs?.source}}};let __namedExportsOrder=["ExperimentWithMultipleMetrics"]},"../../frontend/src/mocks/fixtures/api/experiments/experiment_with_multiple_metrics.json":module=>{module.exports=JSON.parse('{"id":17,"name":"experiment-multiple-metrics","description":null,"start_date":"2025-06-03T14:48:37.594000Z","end_date":null,"feature_flag_key":"experiment-multiple-metrics","feature_flag":{"id":142,"team_id":1,"name":"Feature Flag for Experiment experiment-multiple-metrics","key":"experiment-multiple-metrics","filters":{"groups":[{"properties":[],"rollout_percentage":100}],"multivariate":{"variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}]},"holdout_groups":null,"aggregation_group_type_index":null},"deleted":false,"active":true,"ensure_experience_continuity":false,"has_encrypted_payloads":false,"version":1},"holdout":null,"holdout_id":null,"exposure_cohort":null,"parameters":{"feature_flag_variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}],"recommended_sample_size":0,"recommended_running_time":0,"minimum_detectable_effect":30},"secondary_metrics":[],"saved_metrics":[],"saved_metrics_ids":null,"filters":{},"archived":false,"deleted":false,"created_by":{"id":1,"uuid":"0196a5e4-1c5d-0000-8b8c-31ae10f6d7d7","distinct_id":"TM2Vy3T9MqY0HHAxgKBj95zZEaZ45MYSpuSxu6MaVNj","first_name":"Juraj","last_name":"","email":"juraj@posthog.com","is_email_verified":false,"hedgehog_config":null,"role_at_organization":"engineering"},"created_at":"2025-06-03T14:48:11.882465Z","updated_at":"2025-06-03T14:48:50.754962Z","type":"product","exposure_criteria":{"filterTestAccounts":true},"metrics":[{"kind":"ExperimentMetric","source":{"kind":"EventsNode","math":"total","event":"$pageview"},"metric_type":"mean","uuid":"09a40e22-8190-49f0-9f9c-8f70458b58da"},{"kind":"ExperimentMetric","series":[{"kind":"EventsNode","event":"signup completed"}],"metric_type":"funnel","uuid":"f10233ac-56d9-42d7-b686-78502dd909c9"},{"goal":"increase","kind":"ExperimentMetric","uuid":"d70371c9-c078-4234-a4b3-aaa19316d602","numerator":{"kind":"EventsNode","math":"dau","name":"$pageview","event":"$pageview"},"denominator":{"kind":"EventsNode","math":"total","name":"$pageview","event":"$pageview"},"metric_type":"ratio"}],"metrics_secondary":[],"primary_metrics_ordered_uuids":null,"secondary_metrics_ordered_uuids":null,"conclusion":null,"conclusion_comment":null}')},"../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json":module=>{module.exports=JSON.parse('{"cache_key":"cache_d38d94a2a1e278ca278e3ff3e6a0976d","cache_target_age":"2025-09-05T16:27:20.614099Z","calculation_trigger":null,"date_range":{"date_from":"2025-05-26T12:26:00+00:00","date_to":"2025-06-03T16:27:00+00:00","explicitDate":true},"is_cached":true,"kind":"ExperimentExposureQuery","last_refresh":"2025-09-04T16:27:20.614099Z","next_allowed_client_refresh":"2025-09-04T16:28:20.614099Z","query_metadata":{"events":[],"updated_at":"2025-09-04T16:27:21.815558Z"},"query_status":null,"timeseries":[{"days":["2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"exposure_counts":[0,61,178,325,460,604,755,910,989],"variant":"control"},{"days":["2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"exposure_counts":[0,59,201,300,445,572,685,808,874],"variant":"test-1"},{"days":["2025-05-26","2025-05-27","2025-05-28","2025-05-29","2025-05-30","2025-05-31","2025-06-01","2025-06-02","2025-06-03"],"exposure_counts":[0,63,241,399,567,733,894,1056,1137],"variant":"test-2"}],"timezone":"UTC","total_exposures":{"test-1":874,"control":989,"test-2":1137}}')},"../../frontend/src/mocks/fixtures/api/experiments/funnel_metric_result.json":module=>{module.exports=JSON.parse('{"baseline":{"denominator_sum":null,"denominator_sum_squares":null,"key":"control","number_of_samples":989,"numerator_denominator_sum_product":null,"sum":859,"sum_squares":859,"validation_failures":[]},"cache_key":"cache_08a7b94252174a9400b06680a11683bd","cache_target_age":"2025-09-05T16:14:05.250745Z","calculation_trigger":null,"credible_intervals":null,"insight":null,"is_cached":true,"kind":"ExperimentQuery","last_refresh":"2025-09-04T16:14:05.250745Z","metric":null,"next_allowed_client_refresh":"2025-09-04T16:15:05.250745Z","p_value":null,"probability":null,"query_metadata":{"events":[],"updated_at":"2025-09-04T16:14:11.089132Z"},"query_status":null,"significance_code":null,"significant":null,"stats_version":null,"timezone":"UTC","variant_results":[{"chance_to_win":0.00010223913233654233,"credible_interval":[-0.10891502266388127,-0.03366202531112027],"denominator_sum":null,"denominator_sum_squares":null,"key":"test-1","method":"bayesian","number_of_samples":874,"numerator_denominator_sum_product":null,"significant":true,"sum":705,"sum_squares":705,"validation_failures":[]},{"chance_to_win":0.9831535028773773,"credible_interval":[0.002690288824904803,0.06708670125273555],"denominator_sum":null,"denominator_sum_squares":null,"key":"test-2","method":"bayesian","number_of_samples":1137,"numerator_denominator_sum_product":null,"significant":true,"sum":1022,"sum_squares":1022,"validation_failures":[]}],"variants":null}')},"../../frontend/src/mocks/fixtures/api/experiments/mean_metric_result.json":module=>{module.exports=JSON.parse('{"baseline":{"denominator_sum":null,"denominator_sum_squares":null,"key":"control","number_of_samples":989,"numerator_denominator_sum_product":null,"sum":1636,"sum_squares":3760,"validation_failures":[]},"cache_key":"cache_17925ec0dddf2fa25f9dd34a591743c2","cache_target_age":"2025-09-05T16:14:05.259133Z","calculation_trigger":null,"credible_intervals":null,"insight":null,"is_cached":true,"kind":"ExperimentQuery","last_refresh":"2025-09-04T16:14:05.259133Z","metric":null,"next_allowed_client_refresh":"2025-09-04T16:15:05.259133Z","p_value":null,"probability":null,"query_metadata":{"events":[],"updated_at":"2025-09-04T16:14:11.010108Z"},"query_status":null,"significance_code":null,"significant":null,"stats_version":null,"timezone":"UTC","variant_results":[{"chance_to_win":2.7262704800611193e-8,"credible_interval":[-0.19740467628759228,-0.09277676754203046],"denominator_sum":null,"denominator_sum_squares":null,"key":"test-1","method":"bayesian","number_of_samples":874,"numerator_denominator_sum_product":null,"significant":true,"sum":1236,"sum_squares":2634,"validation_failures":[]},{"chance_to_win":0.9999998975983043,"credible_interval":[0.09706777250053614,0.21468859747750865],"denominator_sum":null,"denominator_sum_squares":null,"key":"test-2","method":"bayesian","number_of_samples":1137,"numerator_denominator_sum_product":null,"significant":true,"sum":2174,"sum_squares":5478,"validation_failures":[]}],"variants":null}')},"../../frontend/src/mocks/fixtures/api/experiments/ratio_metric_result.json":module=>{module.exports=JSON.parse('{"baseline":{"denominator_sum":1636,"denominator_sum_squares":3760,"key":"control","number_of_samples":989,"numerator_denominator_sum_product":1636,"sum":859,"sum_squares":859,"validation_failures":[]},"cache_key":"cache_40de1256ea5a2265e4563ccb18687a44","cache_target_age":"2025-09-05T17:03:41.131006Z","calculation_trigger":null,"credible_intervals":null,"insight":null,"is_cached":true,"kind":"ExperimentQuery","last_refresh":"2025-09-04T17:03:41.131006Z","metric":null,"next_allowed_client_refresh":"2025-09-04T17:04:41.131006Z","p_value":null,"probability":null,"query_metadata":{"events":[],"updated_at":"2025-09-04T17:03:45.098248Z"},"query_status":null,"significance_code":null,"significant":null,"stats_version":null,"timezone":"UTC","variant_results":[{"chance_to_win":0.9996603338403114,"credible_interval":[0.03653074985064239,0.13612429044231514],"denominator_sum":1236,"denominator_sum_squares":2634,"key":"test-1","method":"bayesian","number_of_samples":874,"numerator_denominator_sum_product":1236,"significant":true,"sum":705,"sum_squares":705,"validation_failures":[]},{"chance_to_win":6.225433946014957e-9,"credible_interval":[-0.1407071884984351,-0.06863959478972097],"denominator_sum":2174,"denominator_sum_squares":5478,"key":"test-2","method":"bayesian","number_of_samples":1137,"numerator_denominator_sum_product":2174,"significant":true,"sum":1022,"sum_squares":1022,"validation_failures":[]}],"variants":null}')}}]);