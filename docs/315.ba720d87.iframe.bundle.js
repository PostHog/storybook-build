(window.webpackJsonp=window.webpackJsonp||[]).push([[315],{"./frontend/src/scenes/performance/WebPerformance.tsx":function(L,a,n){"use strict";n.r(a),n.d(a,"webPerformancePropertyFilters",function(){return c}),n.d(a,"WebPerformance",function(){return E}),n.d(a,"scene",function(){return D});var A=n("./frontend/src/scenes/performance/WebPerformance.scss"),O=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),j=n("./frontend/src/lib/components/PageHeader.tsx"),i=n("./frontend/src/types.ts"),t=n("./frontend/src/scenes/performance/webPerformanceLogic.tsx"),d=n("./frontend/src/scenes/urls.ts"),_=n("./frontend/src/scenes/events/index.ts"),l=n("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),p=n("./frontend/src/scenes/performance/WebPerformanceWaterfallChart.tsx"),f=n("./frontend/src/lib/components/icons.tsx"),m=n("./frontend/@posthog/lemon-ui/src/index.ts"),h=n("./frontend/src/lib/logic/featureFlagLogic.ts"),b=n("./frontend/src/lib/constants.tsx"),v=n("./frontend/src/queries/Query/Query.tsx"),u=n("./frontend/src/queries/schema.ts"),e=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),W=n.n(e);const c=[{key:"$performance_raw",value:"is_set",operator:i.P.IsSet,type:i.N.Event}],x=()=>{const{setEventToDisplay:s}=Object(l.useActions)(t.b),{featureFlags:g}=Object(l.useValues)(h.a),M=g[b.i.DATA_EXPLORATION_LIVE_EVENTS];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"pt-4 border-t"}),M?Object(e.jsx)(v.a,{query:{kind:u.a.DataTableNode,source:{kind:u.a.EventsNode,fixedProperties:c},columns:["properties.$current_url","properties.$lib","timestamp","context.columns.waterfallButton"],showReload:!0,showColumnConfigurator:!1,showExport:!0,showEventFilter:!1,showPropertyFilter:!0,showActions:!1,expandable:!1},context:{columns:{waterfallButton:{title:"",render:function(P){let{record:r}=P;return Object(e.jsx)("div",{children:Object(e.jsx)(m.LemonButton,{"data-attr":`view-waterfall-button-${r==null?void 0:r.id}`,icon:Object(e.jsx)(f.IconPlay,{}),type:"secondary",size:"small",onClick:()=>s(r),children:"View waterfall chart"})})}}}}}):Object(e.jsx)(_.b,{fixedFilters:{properties:c},sceneUrl:d.a.webPerformance(),fetchMonths:1,pageKey:`webperformance-${JSON.stringify(c)}`,showPersonColumn:!1,showCustomizeColumns:!1,showExport:!1,showAutoload:!1,showEventFilter:!1,showPropertyFilter:!0,showRowExpanders:!1,showActionsButton:!1,linkPropertiesToFilters:!1,"data-attr":"waterfall-events-table",startingColumns:["$current_url","$performance_page_loaded"],fixedColumns:[{render:function(P,r){let{event:o}=r;return o?Object(e.jsx)("div",{children:Object(e.jsx)(m.LemonButton,{"data-attr":`view-waterfall-button-${o==null?void 0:o.id}`,icon:Object(e.jsx)(f.IconPlay,{}),type:"secondary",size:"small",onClick:()=>{s(o)},children:"View waterfall chart"})}):{props:{colSpan:0}}}}]})]})},E=()=>{const{currentPage:s}=Object(l.useValues)(t.b);return Object(e.jsxs)("div",{className:"web-performance",children:[Object(e.jsx)(j.a,{title:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:["Web Performance",Object(e.jsx)(O.a,{type:"warning",className:"uppercase",children:"Alpha"})]}),caption:s===t.a.TABLE?Object(e.jsxs)("div",{children:[Object(e.jsx)("p",{children:"Shows page view events where performance information has been captured. Not all events have all performance information."}),Object(e.jsxs)("p",{children:["To capture performance information you must be using posthog-js and set"," ",Object(e.jsx)("code",{children:"_capture_performance"})," to true. See the"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/integrate/client/js#config",target:"_blank",children:"config instructions in our handbook"})]})]}):null}),Object(e.jsx)("div",{children:s===t.a.TABLE?Object(e.jsx)(x,{}):s===t.a.WATERFALL_CHART?Object(e.jsx)(p.b,{}):Object(e.jsx)(e.Fragment,{children:"404?"})})]})},D={component:E,logic:t.b,paramsToProps:()=>({sceneUrl:d.a.webPerformance()})}}}]);
