(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1964:function(i,c,t){t(1965),t(3324),t(3333),t(3334),t(3325),t(3328),t(3327),t(3329),t(3326),t(3331),t(3332),i.exports=t(3330)},2069:function(i,c){},2110:function(i,c){},2147:function(i,c){},2201:function(i,c){},2222:function(i,c){},3330:function(i,c,t){"use strict";t.r(c);var m=t(0),e=t.n(m),E=t(362),h=t(1933),A=t(1663),H=t(857),I=t(121),C=t(6);const f="api-selector-v1",d="connection",O="api-storage",g="api-storage-history",J={apiHost:"",apiKey:""},v=[{apiHost:"",apiKey:""},{apiHost:"http://localhost:8000",apiKey:""},{apiHost:"https://app.posthog.com",apiKey:""}];var x=t(1940);function K(n){const a={};for(const o of n)a[JSON.stringify(o)]=!0;return Object.keys(a).map(o=>JSON.parse(o))}const N=({saveApi:n})=>{const a=JSON.parse(window.localStorage.getItem(g)||"[]"),o=K([...a,...v]);return e.a.createElement("div",{style:{margin:10}},e.a.createElement("strong",{style:{display:"block",marginBottom:5}},"History"),o.map(({apiHost:r,apiKey:l})=>e.a.createElement("button",{onClick:()=>n(r,l),style:{display:"block",width:"100%",marginBottom:3,textAlign:"left",cursor:"pointer"}},e.a.createElement("small",{style:{opacity:.8}},"Host:")," ",r||"",e.a.createElement("br",null),e.a.createElement("small",{style:{opacity:.8}},"Key:")," ",l?`${l.substring(0,10)}...`:"")))},j=({saveApi:n,selectedConnection:a})=>{const[o,r]=Object(m.useState)(a.apiHost),[l,u]=Object(m.useState)(a.apiKey);return e.a.createElement("div",null,e.a.createElement("div",{style:{margin:10}},"API Host:",e.a.createElement("br",null),e.a.createElement("input",{value:o,onChange:s=>r(s.target.value),style:{width:"100%"}})),e.a.createElement("div",{style:{margin:10}},"API Key:",e.a.createElement("br",null),e.a.createElement("input",{value:l,onChange:s=>u(s.target.value),style:{width:"100%"}})),e.a.createElement("div",{style:{margin:10}},e.a.createElement(x.a,{primary:!0,onClick:()=>n(o,l)},"Save")),e.a.createElement(N,{saveApi:n}))},L=Object(m.memo)(()=>{const[n,a]=Object(C.m)(),o=n[d]||JSON.parse(window.localStorage.getItem(O)||"false")||J,[r,l]=Object(m.useState)(!1),u=(s,y)=>{let p=JSON.parse(window.localStorage.getItem(g)||"[]");[...v,...p].find(S=>S.apiHost===s&&S.apiKey===y)||(p=[{apiHost:s,apiKey:y},...p],window.localStorage.setItem(g,JSON.stringify(p))),window.localStorage.setItem(O,JSON.stringify({apiHost:s,apiKey:y})),a({[d]:{apiHost:s,apiKey:y}}),l(!1)};return e.a.createElement(A.b,{tooltipShown:r,placement:"bottom",tooltip:e.a.createElement(j,{saveApi:u,selectedConnection:o})},e.a.createElement(H.a,{key:d,title:"Choose API connection",style:o!=null&&o.apiHost?{}:{color:"red"},onClick:()=>l(!r)},e.a.createElement(I.a,{icon:"globe",style:{marginRight:5}}),o!=null&&o.apiHost?o==null?void 0:o.apiHost:"offline"))});E.a.register(f,()=>{E.a.add(f,{title:"Api",type:h.a.TOOL,match:({viewMode:n})=>!!(n&&n.match(/^(story|docs)$/)),render:()=>e.a.createElement(L,null)})})}},[[1964,2,3]]]);
