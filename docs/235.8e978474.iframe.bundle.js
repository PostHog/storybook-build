(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{5802:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createdAtColumn})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createdByColumn}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_TimezoneAware__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(389),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(871),antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(360),_ProfilePicture__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(440);function createdAtColumn(){return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_2__.a)("Created"),render:function RenderCreatedAt(_,item){return item.created_at?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{whiteSpace:"nowrap"}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_TimezoneAware__WEBPACK_IMPORTED_MODULE_1__.b,{time:item.created_at})):"-"},sorter:function sorter(a,b){return new Date(a.created_at||0)>new Date(b.created_at||0)?1:-1}}}function createdByColumn(){return{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_2__.a)("Created by"),render:function Render(_,item){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{align:"middle",wrap:!1},item.created_by&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ProfilePicture__WEBPACK_IMPORTED_MODULE_4__.a,{name:item.created_by.first_name,email:item.created_by.email,size:"md"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{maxWidth:250,width:"auto",verticalAlign:"middle",marginLeft:8}},item.created_by?item.created_by.first_name||item.created_by.email:"-"))},sorter:function sorter(a,b){var _a$created_by,_a$created_by2,_b$created_by,_b$created_by2;return((null===(_a$created_by=a.created_by)||void 0===_a$created_by?void 0:_a$created_by.first_name)||(null===(_a$created_by2=a.created_by)||void 0===_a$created_by2?void 0:_a$created_by2.email)||"").localeCompare((null===(_b$created_by=b.created_by)||void 0===_b$created_by?void 0:_b$created_by.first_name)||(null===(_b$created_by2=b.created_by)||void 0===_b$created_by2?void 0:_b$created_by2.email)||"")}}}},5803:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return More}));var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(119),_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43);function More(_ref){var overlay=_ref.overlay,_useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState,2),visible=_useState2[0],setVisible=_useState2[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(___WEBPACK_IMPORTED_MODULE_2__.a,{compact:!0,"data-attr":"more-button",icon:react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_icons__WEBPACK_IMPORTED_MODULE_3__.IconEllipsis,null),type:"stealth",onClick:function onClick(e){setVisible((function(state){return!state})),e.stopPropagation()},popup:{visible:visible,onClickOutside:function onClickOutside(){return setVisible(!1)},onClickInside:function onClickInside(){return setVisible(!1)},placement:"bottom-end",actionable:!0,overlay:overlay}})}try{More.displayName="More",More.__docgenInfo={description:"",displayName:"More",props:{overlay:{defaultValue:null,description:"Content of the overlay.",name:"overlay",required:!0,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonButton/More.tsx#More"]={docgenInfo:More.__docgenInfo,name:"More",path:"frontend/src/lib/components/LemonButton/More.tsx#More"})}catch(__react_docgen_typescript_loader_error){}},6153:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Dashboards",(function(){return Dashboards}));__webpack_require__(254),__webpack_require__(275),__webpack_require__(38),__webpack_require__(64);var toConsumableArray=__webpack_require__(17),toConsumableArray_default=__webpack_require__.n(toConsumableArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),dashboardsModel=__webpack_require__(73),es_button=__webpack_require__(113),tabs=__webpack_require__(535),input=__webpack_require__(712),drawer=__webpack_require__(5655),row=__webpack_require__(360),col=__webpack_require__(238),card=__webpack_require__(5693),dashboardsLogic=__webpack_require__(2517),Link=__webpack_require__(63),PushpinFilled=__webpack_require__(5768),PushpinOutlined=__webpack_require__(5705),PlusOutlined=__webpack_require__(1805),asn_AppstoreAddOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},AntdIcon=__webpack_require__(18),icons_AppstoreAddOutlined_AppstoreAddOutlined=function AppstoreAddOutlined(props,ref){return react.createElement(AntdIcon.a,Object.assign({},props,{ref:ref,icon:asn_AppstoreAddOutlined}))};icons_AppstoreAddOutlined_AppstoreAddOutlined.displayName="AppstoreAddOutlined";var icons_AppstoreAddOutlined=react.forwardRef(icons_AppstoreAddOutlined_AppstoreAddOutlined),slicedToArray=__webpack_require__(14),slicedToArray_default=__webpack_require__.n(slicedToArray),es_form=__webpack_require__(439),es_select=__webpack_require__(212),utils=__webpack_require__(11),SaveOutlined=__webpack_require__(5742);function NewDashboard(){var _Form$useForm=es_form.a.useForm(),form=slicedToArray_default()(_Form$useForm,1)[0],addDashboard=Object(index_esm.useActions)(dashboardsModel.a).addDashboard;return react_default.a.createElement(es_form.a,{layout:"vertical",form:form,onFinish:function onFinish(values){addDashboard(values)}},react_default.a.createElement(es_form.a.Item,{name:"name",label:"Dashboard name",rules:[{required:!0,message:"Please give your dashboard a name."}]},react_default.a.createElement(input.a,{autoFocus:!0,onChange:function onChange(e){return form.setFieldsValue({key:Object(utils.qb)(e.target.value)})},"data-attr":"dashboard-name-input",className:"ph-ignore-input"})),react_default.a.createElement(es_form.a.Item,{name:"useTemplate",label:"Start from"},react_default.a.createElement(es_select.a,{"data-attr":"copy-from-template",style:{width:"100%"}},react_default.a.createElement(es_select.a.Option,{"data-attr":"dashboard-select-empty",value:""},"Empty Dashboard"),react_default.a.createElement(es_select.a.Option,{"data-attr":"dashboard-select-default-app",value:"DEFAULT_APP"},"Default Dashboard - Web App"))),react_default.a.createElement("br",null),react_default.a.createElement(es_form.a.Item,null,react_default.a.createElement(es_button.a,{icon:react_default.a.createElement(SaveOutlined.a,null),htmlType:"submit",type:"primary","data-attr":"dashboard-submit"},"Create")))}var PageHeader=__webpack_require__(326),types=__webpack_require__(5),ObjectTags=__webpack_require__(615),userLogic=__webpack_require__(68),eventUsageLogic=__webpack_require__(30),urls=__webpack_require__(25),Spinner=__webpack_require__(171),LemonTable=__webpack_require__(1682),columnUtils=__webpack_require__(5802),LemonButton=__webpack_require__(119),More=__webpack_require__(5803),dashboardLogic=__webpack_require__(173),LemonRow=__webpack_require__(211),scene={component:Dashboards,logic:dashboardsLogic.b};function Dashboards(){var dashboardsLoading=Object(index_esm.useValues)(dashboardsModel.a).dashboardsLoading,_useActions=Object(index_esm.useActions)(dashboardsModel.a),deleteDashboard=_useActions.deleteDashboard,unpinDashboard=_useActions.unpinDashboard,pinDashboard=_useActions.pinDashboard,addDashboard=_useActions.addDashboard,duplicateDashboard=_useActions.duplicateDashboard,_useActions2=Object(index_esm.useActions)(dashboardsLogic.b),setNewDashboardDrawer=_useActions2.setNewDashboardDrawer,setSearchTerm=_useActions2.setSearchTerm,setCurrentTab=_useActions2.setCurrentTab,_useValues2=Object(index_esm.useValues)(dashboardsLogic.b),dashboards=_useValues2.dashboards,newDashboardDrawer=_useValues2.newDashboardDrawer,searchTerm=_useValues2.searchTerm,currentTab=_useValues2.currentTab,hasAvailableFeature=Object(index_esm.useValues)(userLogic.a).hasAvailableFeature,columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref){var id=_ref.id;return pinned?react_default.a.createElement(PushpinFilled.a,{onClick:function onClick(){return unpinDashboard(id,eventUsageLogic.a.DashboardsList)},style:{cursor:"pointer"}}):react_default.a.createElement(PushpinOutlined.a,{onClick:function onClick(){return pinDashboard(id,eventUsageLogic.a.DashboardsList)},style:{cursor:"pointer"}})}},{title:"Name",dataIndex:"name",render:function Render(name,_ref2){var id=_ref2.id,description=_ref2.description,_highlight=_ref2._highlight;return react_default.a.createElement("div",{className:_highlight?"highlighted":void 0,style:{display:"inline-block"}},react_default.a.createElement(Link.a,{"data-attr":"dashboard-name",to:urls.a.dashboard(id)},react_default.a.createElement("h4",{className:"row-name"},name||"Untitled")),hasAvailableFeature(types.c.DASHBOARD_COLLABORATION)&&description&&react_default.a.createElement("span",{className:"row-description"},description))},sorter:function sorter(a,b){var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")}}].concat(toConsumableArray_default()(hasAvailableFeature(types.c.DASHBOARD_COLLABORATION)?[{title:"Tags",dataIndex:"tags",key:"tags",render:function Render(tags){return tags.length?react_default.a.createElement(ObjectTags.a,{tags:tags,staticOnly:!0}):react_default.a.createElement("span",{style:{color:"var(--muted)"}},"-")}}]:[]),[Object(columnUtils.b)(),Object(columnUtils.a)(),{width:0,render:function RenderActions(_,_ref3){var id=_ref3.id,name=_ref3.name;return react_default.a.createElement(More.a,{overlay:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(LemonButton.a,{type:"stealth",to:urls.a.dashboard(id),onClick:function onClick(){Object(dashboardLogic.a)({id:id}).mount(),Object(dashboardLogic.a)({id:id}).actions.setDashboardMode(null,eventUsageLogic.a.DashboardsList)},fullWidth:!0},"View"),react_default.a.createElement(LemonButton.a,{type:"stealth",to:urls.a.dashboard(id),onClick:function onClick(){Object(dashboardLogic.a)({id:id}).mount(),Object(dashboardLogic.a)({id:id}).actions.setDashboardMode(types.e.Edit,eventUsageLogic.a.DashboardsList)},fullWidth:!0},"Edit"),react_default.a.createElement(LemonButton.a,{type:"stealth",onClick:function onClick(){return duplicateDashboard({id:id,name:name})},fullWidth:!0},"Duplicate"),react_default.a.createElement(LemonRow.b,null),react_default.a.createElement(LemonButton.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function onClick(){return deleteDashboard({id:id,redirect:!1})},fullWidth:!0},"Delete dashboard"))})}}]);return react_default.a.createElement("div",null,react_default.a.createElement(PageHeader.a,{title:"Dashboards",buttons:react_default.a.createElement(es_button.a,{"data-attr":"new-dashboard",onClick:function onClick(){return setNewDashboardDrawer(!0)},type:"primary",icon:react_default.a.createElement(PlusOutlined.a,null)},"New Dashboard")}),react_default.a.createElement(tabs.a,{activeKey:currentTab,style:{borderColor:"#D9D9D9"},onChange:function onChange(tab){return setCurrentTab(tab)}},react_default.a.createElement(tabs.a.TabPane,{tab:"All Dashboards",key:dashboardsLogic.a.All}),react_default.a.createElement(tabs.a.TabPane,{tab:"Pinned",key:dashboardsLogic.a.Pinned})),react_default.a.createElement("div",null,react_default.a.createElement(input.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for dashboards",style:{width:240},value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value)}})),react_default.a.createElement(LemonRow.b,{large:!0}),react_default.a.createElement(drawer.a,{title:"New Dashboard",width:400,onClose:function onClose(){return setNewDashboardDrawer(!1)},destroyOnClose:!0,visible:newDashboardDrawer},react_default.a.createElement(NewDashboard,null)),dashboardsLoading?react_default.a.createElement("div",{className:"flex-center",style:{flexDirection:"column"}},react_default.a.createElement(Spinner.a,null),react_default.a.createElement("div",{className:"mt"},react_default.a.createElement("b",null,"Loading dashboards"))):dashboards.length>0||searchTerm||currentTab!==dashboardsLogic.a.All?react_default.a.createElement(LemonTable.a,{dataSource:dashboards,rowKey:"id",pagination:{pageSize:100},columns:columns,defaultSorting:{columnIndex:0,order:1},emptyState:searchTerm?"No ".concat(currentTab===dashboardsLogic.a.Pinned?"pinned ":"",'dashboards matching "').concat(searchTerm,'"!'):currentTab===dashboardsLogic.a.Pinned?react_default.a.createElement(react_default.a.Fragment,null,"No dashboards have been pinned for quick access yet."," ",react_default.a.createElement(Link.a,{onClick:function onClick(){return setCurrentTab(dashboardsLogic.a.All)}},"Go to All Dashboards to pin one now.")):void 0}):react_default.a.createElement("div",{className:"mt"},react_default.a.createElement("p",null,"Create your first dashboard:"),react_default.a.createElement(row.a,{gutter:[16,16]},react_default.a.createElement(col.a,{xs:24,xl:6},react_default.a.createElement(card.a,{title:"Empty",size:"small",style:{cursor:"pointer"},onClick:function onClick(){return addDashboard({name:"New Dashboard",show:!0,useTemplate:""})}},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40}},react_default.a.createElement(icons_AppstoreAddOutlined,null)))),react_default.a.createElement(col.a,{xs:24,xl:6},react_default.a.createElement(card.a,{title:"App Default",size:"small",style:{cursor:"pointer"},onClick:function onClick(){return addDashboard({name:"Web App Dashboard",show:!0,useTemplate:"DEFAULT_APP"})}},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40}},react_default.a.createElement(icons_AppstoreAddOutlined,null)))))))}}}]);