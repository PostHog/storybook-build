"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[73693],{"../../frontend/src/scenes/experiments/stories/ExperimentWithLegacyFunnelsQuery.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExperimentWithLegacyFunnelsQuery:()=>ExperimentWithLegacyFunnelsQuery,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ExperimentWithLegacyFunnelsQuery_stories});var lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),App=__webpack_require__("../../frontend/src/scenes/App.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),browser=__webpack_require__("../../frontend/src/mocks/browser.tsx"),experiment_with_funnels_query=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/experiment_with_funnels_query.json"),exposure_query_result=__webpack_require__("../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json");let funnels_query_result_namespaceObject=JSON.parse('{"cache_key":"cache_d595959a405bf8002f791577a6806453","cache_target_age":"2025-06-04T14:20:11.819746Z","calculation_trigger":null,"credible_intervals":{"control":[0.10385703759823513,0.14632977457890145],"test-1":[0.15399819805182086,0.20513822790568542],"test-2":[0.21266251721549914,0.26028822153768866]},"expected_loss":0.00010051784352294164,"funnels_query":{"aggregation_group_type_index":null,"breakdownFilter":{"breakdown":"$feature/experiment-funnels-query","breakdown_group_type_index":null,"breakdown_hide_other_aggregation":null,"breakdown_histogram_bin_count":null,"breakdown_limit":null,"breakdown_normalize_url":null,"breakdown_type":"event","breakdowns":null},"dataColorTheme":null,"dateRange":{"date_from":"2025-05-20T14:16:00+00:00","date_to":null,"explicitDate":true},"filterTestAccounts":true,"funnelsFilter":{"binCount":null,"breakdownAttributionType":"first_touch","breakdownAttributionValue":null,"exclusions":[],"funnelAggregateByHogQL":null,"funnelFromStep":null,"funnelOrderType":"ordered","funnelStepReference":"total","funnelToStep":null,"funnelVizType":"steps","funnelWindowInterval":14,"funnelWindowIntervalUnit":"day","hiddenLegendBreakdowns":null,"layout":"vertical","resultCustomizations":null,"useUdf":null},"interval":null,"kind":"FunnelsQuery","modifiers":null,"properties":[],"response":null,"samplingFactor":null,"series":[{"custom_name":null,"event":"signup started","fixedProperties":null,"kind":"EventsNode","limit":null,"math":null,"math_group_type_index":null,"math_hogql":null,"math_property":null,"math_property_revenue_currency":null,"math_property_type":null,"name":"signup started","orderBy":null,"properties":null,"response":null},{"custom_name":null,"event":"signup completed","fixedProperties":null,"kind":"EventsNode","limit":null,"math":null,"math_group_type_index":null,"math_hogql":null,"math_property":null,"math_property_revenue_currency":null,"math_property_type":null,"name":"signup completed","orderBy":null,"properties":null,"response":null}]},"insight":[[{"action_id":"signup started","name":"signup started","custom_name":null,"order":0,"people":[],"count":859,"type":"events","average_conversion_time":null,"median_conversion_time":null,"breakdown":["test-1"],"breakdown_value":["test-1"]},{"action_id":"signup completed","name":"signup completed","custom_name":null,"order":1,"people":[],"count":153,"type":"events","average_conversion_time":0,"median_conversion_time":0,"breakdown":["test-1"],"breakdown_value":["test-1"]}],[{"action_id":"signup started","name":"signup started","custom_name":null,"order":0,"people":[],"count":1218,"type":"events","average_conversion_time":null,"median_conversion_time":null,"breakdown":["test-2"],"breakdown_value":["test-2"]},{"action_id":"signup completed","name":"signup completed","custom_name":null,"order":1,"people":[],"count":287,"type":"events","average_conversion_time":0,"median_conversion_time":0,"breakdown":["test-2"],"breakdown_value":["test-2"]}],[{"action_id":"signup started","name":"signup started","custom_name":null,"order":0,"people":[],"count":923,"type":"events","average_conversion_time":null,"median_conversion_time":null,"breakdown":["control"],"breakdown_value":["control"]},{"action_id":"signup completed","name":"signup completed","custom_name":null,"order":1,"people":[],"count":114,"type":"events","average_conversion_time":0,"median_conversion_time":0,"breakdown":["control"],"breakdown_value":["control"]}]],"is_cached":true,"kind":"ExperimentFunnelsQuery","last_refresh":"2025-06-03T14:20:11.819746Z","next_allowed_client_refresh":"2025-06-03T14:21:11.819746Z","probability":{"control":0,"test-1":0.9996,"test-2":1},"query_status":null,"significance_code":"significant","significant":true,"stats_version":2,"timezone":"UTC","variants":[{"failure_count":809,"key":"control","success_count":114},{"failure_count":706,"key":"test-1","success_count":153},{"failure_count":931,"key":"test-2","success_count":287}]}');var schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ExperimentWithLegacyFunnelsQuery_stories={title:"Scenes-App/Experiments",parameters:{layout:"fullscreen",viewMode:"story",mockDate:"2025-01-27"},decorators:[(0,browser.x8)({get:{"/api/projects/:team_id/experiments/13/":experiment_with_funnels_query,"/api/projects/:team_id/experiment_holdouts":[],"/api/projects/:team_id/experiment_saved_metrics/":[],"/api/projects/:team_id/feature_flags/138/":{},"/api/projects/:team_id/feature_flags/138/status/":{}},post:{"/api/environments/:team_id/query":(req,res,ctx)=>res(req.body.query.kind===schema_general.OH.ExperimentExposureQuery?ctx.json(exposure_query_result):ctx.json(funnels_query_result_namespaceObject))}})]},ExperimentWithLegacyFunnelsQuery=()=>((0,react.useEffect)(()=>{lib.router.actions.push(urls.j.experiment(experiment_with_funnels_query.id))},[]),(0,jsx_runtime.jsx)(App.g,{}));ExperimentWithLegacyFunnelsQuery.play=async()=>{await new Promise(resolve=>setTimeout(resolve,500))},ExperimentWithLegacyFunnelsQuery.parameters={...ExperimentWithLegacyFunnelsQuery.parameters,docs:{...ExperimentWithLegacyFunnelsQuery.parameters?.docs,source:{originalSource:"() => {\n  useEffect(() => {\n    router.actions.push(urls.experiment(EXPERIMENT_WITH_FUNNELS_QUERY.id));\n  }, []);\n  return <App />;\n}",...ExperimentWithLegacyFunnelsQuery.parameters?.docs?.source}}};let __namedExportsOrder=["ExperimentWithLegacyFunnelsQuery"]},"../../frontend/src/mocks/fixtures/api/experiments/experiment_with_funnels_query.json":module=>{module.exports=JSON.parse('{"id":13,"name":"experiment-funnels-query","description":null,"start_date":"2025-05-20T14:16:00Z","end_date":null,"feature_flag_key":"experiment-funnels-query","feature_flag":{"id":138,"team_id":1,"name":"Feature Flag for Experiment experiment-funnels-query","key":"experiment-funnels-query","filters":{"groups":[{"properties":[],"rollout_percentage":100}],"multivariate":{"variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}]},"holdout_groups":null,"aggregation_group_type_index":null},"deleted":false,"active":true,"ensure_experience_continuity":false,"has_encrypted_payloads":false,"version":1},"holdout":null,"holdout_id":null,"exposure_cohort":null,"parameters":{"feature_flag_variants":[{"key":"control","rollout_percentage":34},{"key":"test-1","rollout_percentage":33},{"key":"test-2","rollout_percentage":33}],"recommended_sample_size":0,"recommended_running_time":0,"minimum_detectable_effect":30},"secondary_metrics":[],"saved_metrics":[],"saved_metrics_ids":null,"filters":{},"archived":false,"deleted":false,"created_by":{"id":1,"uuid":"0196a5e4-1c5d-0000-8b8c-31ae10f6d7d7","distinct_id":"TM2Vy3T9MqY0HHAxgKBj95zZEaZ45MYSpuSxu6MaVNj","first_name":"Juraj","last_name":"","email":"juraj@posthog.com","is_email_verified":false,"hedgehog_config":null,"role_at_organization":"engineering"},"created_at":"2025-06-03T14:12:23.497968Z","updated_at":"2025-06-03T14:20:11.663877Z","type":"product","exposure_criteria":{"filterTestAccounts":true},"metrics":[{"kind":"ExperimentFunnelsQuery","funnels_query":{"kind":"FunnelsQuery","series":[{"kind":"EventsNode","name":"signup started","event":"signup started"},{"kind":"EventsNode","name":"signup completed","event":"signup completed"}],"dateRange":{"date_from":"2025-05-20T14:16:00Z","date_to":"","explicitDate":true},"funnelsFilter":{"layout":"horizontal","funnelVizType":"steps","funnelWindowInterval":14,"funnelWindowIntervalUnit":"day"},"filterTestAccounts":true}}],"metrics_secondary":[],"conclusion":null,"conclusion_comment":null}')},"../../frontend/src/mocks/fixtures/api/experiments/exposure_query_result.json":module=>{module.exports=JSON.parse('{"cache_key":"cache_bba689ce3132fef5d97b652c6a96e871","cache_target_age":"2025-03-07T18:04:07.837340Z","date_range":{"date_from":"2025-02-23T18:03:00+00:00","date_to":null,"explicitDate":true},"is_cached":true,"kind":"ExperimentExposureQuery","last_refresh":"2025-03-06T18:04:07.837340Z","next_allowed_client_refresh":"2025-03-06T18:05:07.837340Z","timeseries":[{"days":["2025-02-23","2025-02-24","2025-02-25","2025-02-26","2025-02-27","2025-02-28","2025-03-01","2025-03-02","2025-03-03","2025-03-04","2025-03-05","2025-03-06"],"exposure_counts":[0,0,0,0,38,179,317,473,631,756,889,975],"variant":"test"},{"days":["2025-02-23","2025-02-24","2025-02-25","2025-02-26","2025-02-27","2025-02-28","2025-03-01","2025-03-02","2025-03-03","2025-03-04","2025-03-05","2025-03-06"],"exposure_counts":[0,0,0,0,45,182,347,487,625,780,922,1025],"variant":"control"}],"timezone":"UTC","total_exposures":{"test":975,"control":1025}}')}}]);