var zs=Object.defineProperty,Us=Object.defineProperties;var Ys=Object.getOwnPropertyDescriptors;var Vt=Object.getOwnPropertySymbols;var Cn=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable;var Fn=(v,h,t)=>h in v?zs(v,h,{enumerable:!0,configurable:!0,writable:!0,value:t}):v[h]=t,Y=(v,h)=>{for(var t in h||(h={}))Cn.call(h,t)&&Fn(v,t,h[t]);if(Vt)for(var t of Vt(h))Tn.call(h,t)&&Fn(v,t,h[t]);return v},re=(v,h)=>Us(v,Ys(h));var An=(v,h)=>{var t={};for(var g in v)Cn.call(v,g)&&h.indexOf(g)<0&&(t[g]=v[g]);if(v!=null&&Vt)for(var g of Vt(v))h.indexOf(g)<0&&Tn.call(v,g)&&(t[g]=v[g]);return t};var De=(v,h,t)=>new Promise((g,o)=>{var D=b=>{try{L(t.next(b))}catch(_){o(_)}},A=b=>{try{L(t.throw(b))}catch(_){o(_)}},L=b=>b.done?g(b.value):Promise.resolve(b.value).then(D,A);L((t=t.apply(v,h)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[272],{"./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx":function(v,h,t){"use strict";t.d(h,"a",function(){return B});var g=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),o=t.n(g),D=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),A=t("./frontend/src/lib/components/LemonButton/index.ts"),L=t("./frontend/src/lib/components/LemonDivider/index.ts"),b=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),_=t.n(b);function B(W){let{item:I,onComplete:N,onClose:Z}=W;const[ce,le]=Object(g.useState)(I.alias),[V,k]=Object(g.useState)(I.regex);return Object(b.jsxs)("div",{className:"px-2",children:[Object(b.jsx)("b",{children:"New Wildcard"}),Object(b.jsx)(L.a,{}),Object(b.jsxs)("div",{className:"space-y-2",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"Alias"}),Object(b.jsx)(D.a,{defaultValue:ce,onChange:F=>le(F),onPressEnter:()=>!1})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"Regex"}),Object(b.jsx)(D.a,{defaultValue:V,onChange:F=>k(F),onPressEnter:()=>!1}),Object(b.jsxs)("div",{className:"text-muted",style:{marginBottom:12},children:["For example: ",Object(b.jsx)("code",{children:"\\/merchant\\/\\d+\\/dashboard$"})]})]})]}),Object(b.jsxs)("div",{className:"flex justify-end gap-2",children:[Object(b.jsx)(A.a,{type:"secondary",onClick:Z,children:"Cancel"}),Object(b.jsx)(A.a,{type:"primary",onClick:()=>N({alias:ce,regex:V}),children:"Save"})]})]})}try{B.displayName="PathRegexPopup",B.__docgenInfo={description:"",displayName:"PathRegexPopup",props:{onComplete:{defaultValue:null,description:"",name:"onComplete",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"]={docgenInfo:B.__docgenInfo,name:"PathRegexPopup",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"})}catch(W){}},"./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx":function(v,h,t){"use strict";t.d(h,"a",function(){return b});var g=t("./frontend/src/scenes/actions/Actions.scss"),o=t("./frontend/src/lib/components/PropertyFilters/components/FilterRow.tsx"),D=t("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx"),A=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),L=t.n(A);function b(_){let{pageKey:B,onChange:W,onRemove:I,pathCleaningFilters:N,showConditionBadge:Z=!1,disablePopover:ce=!1}=_;return Object(A.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:N.length>0&&N.map((le,V)=>Object(A.jsx)(o.a,{item:le,index:V,totalCount:N.length-1,filters:N,pageKey:B,showConditionBadge:Z,disablePopover:ce,label:"Add rule",onRemove:I,filterComponent:k=>Object(A.jsx)(D.a,{item:le,onClose:k,onComplete:F=>{W(F),k()}})},V))})}try{b.displayName="PathCleanFilters",b.__docgenInfo={description:"",displayName:"PathCleanFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(index: number) => void"}},pathCleaningFilters:{defaultValue:null,description:"",name:"pathCleaningFilters",required:!0,type:{name:"Record<string, any>[]"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},showConditionBadge:{defaultValue:{value:"false"},description:"",name:"showConditionBadge",required:!1,type:{name:"boolean"}},disablePopover:{defaultValue:{value:"false"},description:"",name:"disablePopover",required:!1,type:{name:"boolean"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"]={docgenInfo:b.__docgenInfo,name:"PathCleanFilters",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"})}catch(_){}},"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(v,h,t){"use strict";t.d(h,"a",function(){return y});var g=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),o=t("./frontend/src/lib/forms/Field.tsx"),D=t("./frontend/src/lib/components/LemonButton/index.ts"),A=t("./frontend/src/types.ts"),L=t("./frontend/src/lib/components/LemonSelect.tsx"),b=t("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),_=t("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),B=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),W=t("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),I=t("./frontend/src/scenes/dashboard/DashboardCollaborators.tsx"),N=t("./frontend/src/lib/components/LemonModal/index.ts"),Z=t("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),ce=t.n(Z),le=t("./frontend/src/lib/logic/featureFlagLogic.ts"),V=t("./frontend/src/lib/constants.tsx"),k=t("./frontend/src/scenes/userLogic.ts"),F=t("./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),E=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),x=t.n(E);function y(){const{hideNewDashboardModal:c,createAndGoToDashboard:P}=Object(g.useActions)(_.a),{isNewDashboardSubmitting:T,newDashboardModalVisible:$}=Object(g.useValues)(_.a),{hasAvailableFeature:te}=Object(g.useValues)(k.a),{templatesList:Ce}=Object(g.useValues)(F.a),{featureFlags:Te}=Object(g.useValues)(le.a),pe=!!Te[V.i.DASHBOARD_TEMPLATES]?Ce:[{value:"DEFAULT_APP",label:"Product analytics","data-attr":"dashboard-select-default-app"}];return Object(E.jsx)(N.a,{title:"New dashboard",description:"Use dashboards to compose multiple insights into a single view.",onClose:c,isOpen:$,footer:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(D.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",disabled:T,onClick:c,children:"Cancel"}),Object(E.jsx)(D.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-submit-and-go",disabled:T,onClick:P,children:"Create and go to dashboard"}),Object(E.jsx)(D.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:T,disabled:T,children:"Create"})]}),children:Object(E.jsxs)(Z.Form,{logic:_.a,formKey:"newDashboard",id:"new-dashboard-form",enableFormOnSubmit:!0,className:"space-y-2",children:[Object(E.jsx)(o.a,{name:"name",label:"Name",children:Object(E.jsx)(B.a,{autoFocus:!0,"data-attr":"dashboard-name-input",className:"ph-ignore-input"})}),te(A.e.DASHBOARD_COLLABORATION)?Object(E.jsx)(o.a,{name:"description",label:"Description",showOptional:!0,children:Object(E.jsx)(W.a,{"data-attr":"dashboard-description-input",className:"ph-ignore-input"})}):null,Object(E.jsx)(o.a,{name:"useTemplate",label:"Template",showOptional:!0,children:Object(E.jsx)(L.a,{placeholder:"Optionally start from template",allowClear:!0,options:pe,fullWidth:!0,"data-attr":"copy-from-template"})}),Object(E.jsx)(o.a,{name:"restrictionLevel",label:"Collaboration settings",children:ne=>{let{value:G,onChange:je}=ne;return Object(E.jsx)(b.a,{feature:A.e.DASHBOARD_PERMISSIONING,children:Object(E.jsx)(L.a,{value:G,onChange:je,options:I.a,fullWidth:!0})})}})]})})}},"./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx":function(v,h,t){"use strict";t.d(h,"a",function(){return L});var g=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),o=t("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),D=t.n(o),A=t("./frontend/src/lib/api.ts");const L=Object(g.kea)([Object(g.path)(["scenes","dashboard","dashboards","templates","dashboardTemplatesLogic"]),Object(o.loaders)({repository:[{},{loadRepository:()=>De(this,null,function*(){const b=yield A.b.get("api/projects/@current/dashboard_templates/repository"),_={};for(const B of b)B.url&&(_[B.url.replace(/\/+$/,"")]=B);return _})}],template:[null,{installTemplate:b=>De(this,null,function*(){return yield A.b.create("api/projects/@current/dashboard_templates/",b)})}]}),Object(g.reducers)(()=>({templatesList:[[],{loadRepositorySuccess:(b,_)=>{let{repository:B}=_;return Object.values(B).map(W=>({value:W.name,label:W.name,"data-attr":`dashboard-select-${W.name.replace(" ","-")}`}))}}]})),Object(g.listeners)(b=>{let{actions:_}=b;return{installTemplateSuccess:()=>_.loadRepository()}}),Object(g.afterMount)(b=>{let{actions:_}=b;_.loadRepository()})])},"./frontend/src/scenes/insights/InsightScene.tsx":function(v,h,t){"use strict";t.r(h),t.d(h,"InsightScene",function(){return Pn}),t.d(h,"scene",function(){return Bs});var g=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),o=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),D=t("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=t.n(D),L=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss"),b=t.n(L),_={};_.insert="head",_.singleton=!1;var B=A()(b.a,_),W=b.a.locals||{},I=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),N=t("./frontend/src/scenes/insights/insightLogic.ts"),Z=t("./frontend/src/lib/components/CommandPalette/commandPaletteLogic.tsx"),ce=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts"),le=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),V=t("./frontend/src/lib/utils.tsx"),k=t("./frontend/src/scenes/insights/sharedUtils.ts"),F=t("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts");const E="insights",x=Object(o.kea)({props:{},key:Object(k.l)("new"),path:n=>["scenes","insights","insightCommandLogic",n],connect:n=>[Z.a,Object(ce.a)(n),Object(F.a)(n)],events:n=>{let{props:s}=n;return{afterMount:()=>{const a=[{key:"insight-graph",resolver:[{icon:le.a,display:'Toggle "Compare Previous" on Graph',executor:()=>{Object(ce.a)(s).actions.toggleCompare()}},...V.u.map(i=>{let{key:r,values:l}=i;return{icon:le.a,display:`Set Time Range to ${r}`,executor:()=>{Object(F.a)(s).actions.setDates(l[0],l[1])}}})],scope:E}];for(const i of a)Z.a.actions.registerCommand(i)},beforeUnmount:()=>{Z.a.actions.deregisterScope(E)}}}});var y=t("./frontend/src/scenes/insights/insightDataLogic.ts"),c=t("./frontend/src/types.ts"),P=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/button/index.js"),T=t("./frontend/src/lib/constants.tsx"),$=t("./frontend/src/lib/logic/featureFlagLogic.ts"),te=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Te=Ce,Ae=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),pe=function(s,a){return I.createElement(Ae.a,Object(te.a)(Object(te.a)({},s),{},{ref:a,icon:Te}))};pe.displayName="ArrowLeftOutlined";var ne=I.forwardRef(pe),G=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),je=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/experimental/NPSPrompt.scss"),Ne=t.n(je),Ie={};Ie.insert="head",Ie.singleton=!1;var K=A()(Ne.a,Ie),ve=Ne.a.locals||{},ae=t("./node_modules/.pnpm/posthog-js@1.39.4/node_modules/posthog-js/dist/es.js"),me=t.p+"images/nps.01f8251908e72335482be26ee661ccc7.svg",Oe=t("./frontend/src/scenes/userLogic.ts"),Ve=t("./frontend/src/lib/dayjs.ts"),Q=t("./frontend/@posthog/lemon-ui/src/index.ts"),e=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const Mt=1e4,kt=3500,Xe="experimental-nps-v8",Be=Object(o.kea)({path:["lib","experimental","NPSPrompt"],selectors:{featureFlagEnabled:[()=>[$.a.selectors.featureFlags],n=>n[T.i.NPS_PROMPT]],userIsOldEnough:[()=>[Oe.a.selectors.user],n=>n&&Object(Ve.a)(n.date_joined).isBefore(Object(Ve.a)().add(-15,"day"))],npsPromptEnabled:[n=>[n.featureFlagEnabled,n.userIsOldEnough],(n,s)=>n&&s]},actions:{show:!0,hide:!0,setStep:n=>({step:n}),stepBack:!0,setPayload:n=>({payload:n}),submit:n=>({completed:n}),dismiss:!0,send:n=>({result:n})},reducers:{step:[0,{setStep:(n,s)=>{let{step:a}=s;return a},stepBack:n=>Math.max(n-1,0),submit:()=>3,setPayload:(n,s)=>{let{payload:a}=s;return n===0&&typeof(a==null?void 0:a.score)!="undefined"?1:n}}],hidden:[!0,{show:()=>!1,hide:()=>!0}],payload:[null,{setPayload:(n,s)=>{let{payload:a}=s;return Y(Y({},n),a)}}]},listeners:n=>{let{values:s,actions:a,cache:i}=n;return{stepBack:()=>{s.step===1&&a.setPayload(null)},dismiss:()=>{var r;const l=typeof((r=s.payload)===null||r===void 0?void 0:r.score)!="undefined"?"partial":"dismissed";a.hide(),a.send(l)},submit:r=>{let{completed:l}=r;const d=l?"completed":"partial";a.send(d),i.timeout=window.setTimeout(()=>a.hide(),kt)},send:r=>{let{result:l}=r;ae.a.capture("nps feedback",re(Y({},s.payload),{result:l})),ae.a.people.set({nps_2106:!0}),localStorage.setItem(Xe,"true")},show:()=>{ae.a.capture("nps modal shown")}}},events:n=>{let{actions:s,values:a,cache:i}=n;return{afterMount:()=>{a.npsPromptEnabled&&!localStorage.getItem(Xe)&&(i.timeout=window.setTimeout(()=>s.show(),Mt))},beforeUnmount:()=>{window.clearTimeout(i.timeout)}}}});function We(){const{setStep:n,setPayload:s,stepBack:a,submit:i,dismiss:r}=Object(o.useActions)(Be),{step:l,payload:d,hidden:m,npsPromptEnabled:u}=Object(o.useValues)(Be);if(!u)return null;const p=Object(e.jsxs)("div",{className:"nps-header",children:[Object(e.jsx)("div",{className:"cursor-pointer",onClick:a,children:Object(e.jsx)(ne,{})}),Object(e.jsx)("div",{className:"nps-progress",children:[0,1,2].map(f=>Object(e.jsx)("div",{className:`pg-item${f<=l?" completed":""}`},f))})]});return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:`nps-prompt${m?" hide":""}`,children:[Object(e.jsx)("span",{className:"nps-dismiss",onClick:r,children:Object(e.jsx)(G.a,{})}),Object(e.jsxs)("div",{className:"prompt-inner",children:[l===0&&Object(e.jsxs)("div",{"data-attr":"nps-step-0",children:[Object(e.jsx)("div",{className:"prompt-title",children:"Help us improve PostHog in less than 60 seconds \u{1F64F}"}),Object(e.jsx)("div",{className:"question",children:"How would you feel if you could no longer use PostHog?"}),Object(e.jsxs)("div",{className:"action-buttons",children:[Object(e.jsx)(P.a,{className:"prompt-button",onClick:()=>s({score:1}),children:"Not disappointed"}),Object(e.jsx)(P.a,{className:"prompt-button",onClick:()=>s({score:3}),children:"Somewhat disappointed"}),Object(e.jsx)(P.a,{className:"prompt-button",onClick:()=>s({score:5}),children:"Very disappointed"})]})]}),l===1&&Object(e.jsxs)("div",{"data-attr":"nps-step-1",children:[p,Object(e.jsx)("div",{className:"question",children:"What's the main reason behind this score?"}),Object(e.jsx)(Q.LemonTextArea,{autoFocus:!0,placeholder:"You can describe the key benefits you get from PostHog, shortcomings or anything else...",value:(d==null?void 0:d.feedback_score)||"",onChange:f=>s({feedback_score:f}),onKeyDown:f=>f.key==="Enter"&&f.metaKey&&n(2)}),Object(e.jsxs)("div",{style:{textAlign:"left"},className:"mt-4",children:[Object(e.jsx)(P.a,{type:"link",style:{paddingLeft:0},onClick:()=>i(!1),children:"Finish"}),Object(e.jsx)(P.a,{style:{float:"right"},onClick:()=>n(2),children:"Continue"})]})]}),l===2&&Object(e.jsxs)("div",{"data-attr":"nps-step-2",children:[p,Object(e.jsx)("div",{className:"question",children:"Last one. What type of person or company do you think could benefit most from PostHog?"}),Object(e.jsx)(Q.LemonTextArea,{autoFocus:!0,placeholder:"You can describe their role, background, company or team size, ...",value:(d==null?void 0:d.feedback_persona)||"",onChange:f=>s({feedback_persona:f}),onKeyDown:f=>f.key==="Enter"&&f.metaKey&&i(!0)}),Object(e.jsx)("div",{style:{textAlign:"left"},className:"mt-4",children:Object(e.jsx)(P.a,{style:{float:"right"},onClick:()=>i(!0),children:"Finish"})})]}),l===3&&Object(e.jsxs)("div",{"data-attr":"nps-step-2",style:{display:"flex",alignItems:"center"},children:[Object(e.jsx)("img",{src:me,alt:"",height:40}),Object(e.jsx)("div",{className:"prompt-title",style:{margin:0},children:"Thanks for helping us improve PostHog!"})]})]})]})})}var Bt=t("./frontend/src/scenes/insights/InsightsNav.tsx"),ye=t("./frontend/src/lib/components/Tooltip.tsx"),he=t("./frontend/src/models/dashboardsModel.tsx"),ie=t("./frontend/src/lib/utils/eventUsageLogic.ts"),de=t("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),xe=t("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),ge=t("./frontend/src/lib/components/lemonToast.tsx"),_e=t("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),fe=t("./frontend/src/scenes/urls.ts");const Ze=Object(o.kea)({path:["lib","components","AddToDashboard","saveToDashboardModalLogic"],props:{},key:n=>{let{insight:s}=n;if(!s.short_id)throw Error("must provide an insight with a short id");return s.short_id},connect:n=>({logic:[he.a],actions:[Object(N.c)({dashboardItemId:n.insight.short_id}),["updateInsight","updateInsightSuccess","updateInsightFailure"],ie.e,["reportSavedInsightToDashboard","reportRemovedInsightFromDashboard","reportCreatedDashboardFromModal"],de.a,["showNewDashboardModal"]]}),actions:{addNewDashboard:!0,setDashboardId:n=>({id:n}),setSearchQuery:n=>({query:n}),setInsight:n=>({insight:n}),setScrollIndex:n=>({index:n}),addToDashboard:(n,s)=>({insight:n,dashboardId:s}),removeFromDashboard:(n,s)=>({insight:n,dashboardId:s})},reducers:{_dashboardId:[null,{setDashboardId:(n,s)=>{let{id:a}=s;return a}}],searchQuery:["",{setSearchQuery:(n,s)=>{let{query:a}=s;return a}}],scrollIndex:[-1,{setScrollIndex:(n,s)=>{let{index:a}=s;return a}}],dashboardWithActiveAPICall:[null,{addToDashboard:(n,s)=>{let{dashboardId:a}=s;return a},removeFromDashboard:(n,s)=>{let{dashboardId:a}=s;return a},updateInsightSuccess:()=>null,updateInsightFailure:()=>null}]},selectors:{dashboardId:[n=>[n._dashboardId,he.a.selectors.lastDashboardId,he.a.selectors.nameSortedDashboards,(s,a)=>a.fromDashboard],(n,s,a,i)=>n||i||s||(a.length>0?a[0].id:null)],dashboardsFuse:[()=>[he.a.selectors.nameSortedDashboards],n=>new xe.a(n||[],{keys:["name","description","tags"],threshold:.3})],filteredDashboards:[n=>[n.searchQuery,n.dashboardsFuse,he.a.selectors.nameSortedDashboards],(n,s,a)=>n.length?s.search(n).map(i=>i.item):a],currentDashboards:[n=>[n.filteredDashboards,(s,a)=>a.insight],(n,s)=>n.filter(a=>{var i;return(i=s.dashboards)===null||i===void 0?void 0:i.includes(a.id)})],availableDashboards:[n=>[n.filteredDashboards,(s,a)=>a.insight],(n,s)=>n.filter(a=>{var i;return!((i=s.dashboards)!==null&&i!==void 0&&i.includes(a.id))})],orderedDashboards:[n=>[n.currentDashboards,n.availableDashboards],(n,s)=>[...n,...s]]},listeners:n=>{let{actions:s,values:a,props:i}=n;return{setDashboardId:r=>{let{id:l}=r;he.a.actions.setLastDashboardId(l)},addNewDashboard:()=>De(this,null,function*(){s.showNewDashboardModal()}),[he.a.actionTypes.addDashboardSuccess]:r=>De(this,null,function*(){let{dashboard:l}=r;s.reportCreatedDashboardFromModal(),s.setDashboardId(l.id),s.addToDashboard(i.insight,l.id),s.setScrollIndex(a.orderedDashboards.findIndex(d=>d.id===l.id))}),addToDashboard:r=>De(this,null,function*(){let{insight:l,dashboardId:d}=r;s.updateInsight(re(Y({},l),{dashboards:[...l.dashboards||[],d]}),()=>{s.reportSavedInsightToDashboard(),he.a.actions.tileAddedToDashboard(d),ge.d.success("Insight added to dashboard",{button:{label:"View dashboard",action:()=>_e.router.actions.push(fe.a.dashboard(d))}})})}),removeFromDashboard:r=>De(this,null,function*(){let{insight:l,dashboardId:d}=r;s.updateInsight(re(Y({},l),{dashboards:(l.dashboards||[]).filter(m=>m!==d)}),()=>{s.reportRemovedInsightFromDashboard(),ge.d.success("Insight removed from dashboard")})})}}});var Wt=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss"),et=t.n(Wt),Le={};Le.insert="head",Le.singleton=!1;var $s=A()(et.a,Le),qs=et.a.locals||{},oe=t("./frontend/src/lib/components/icons.tsx"),In=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),Ln=t("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/List/index.js"),wn=t("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/AutoSizer/index.js"),J=t("./frontend/src/lib/components/LemonButton/index.ts"),ln=t("./frontend/src/lib/components/Link.tsx"),Ge=t("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),Gt=t("./frontend/src/scenes/teamLogic.tsx"),Rn=t("./frontend/src/lib/components/LemonModal/index.ts");const Dn=n=>{var s;let{style:a,isHighlighted:i,isAlreadyOnDashboard:r,dashboard:l,insight:d,canEditInsight:m}=n;const u=Ze({insight:d,fromDashboard:((s=d.dashboards)===null||s===void 0?void 0:s[0])||void 0}),{addToDashboard:p,removeFromDashboard:f}=Object(o.useActions)(u),{dashboardWithActiveAPICall:O}=Object(o.useValues)(u),{currentTeam:C}=Object(o.useValues)(Gt.a),M=l.id===(C==null?void 0:C.primary_dashboard);return Object(e.jsxs)("div",{"data-attr":"dashboard-list-item",style:a,className:Object(Ge.default)("flex items-center space-x-2",i&&"highlighted"),children:[Object(e.jsx)(ln.a,{to:fe.a.dashboard(l.id),children:l.name||"Untitled"}),M&&Object(e.jsx)(ye.a,{title:"Primary dashboards are shown on the project home page",children:Object(e.jsx)(oe.IconCottage,{className:"text-warning text-base"})}),Object(e.jsx)("span",{className:"grow"}),Object(e.jsx)(J.a,{type:r?"primary":"secondary",loading:O===l.id,disabled:!!O||!m,size:"small",onClick:j=>{j.preventDefault(),r?f(d,l.id):p(d,l.id)},children:r?"Added":"Add to dashboard"})]})};function tt(n){var s,a,i;let{isOpen:r,closeModal:l,insight:d,canEditInsight:m}=n;const u=Ze({insight:d,fromDashboard:((s=d.dashboards)===null||s===void 0?void 0:s[0])||void 0}),{searchQuery:p,currentDashboards:f,orderedDashboards:O,scrollIndex:C}=Object(o.useValues)(u),{setSearchQuery:M,addNewDashboard:j}=Object(o.useActions)(u),q=S=>{let{index:R,style:H}=S;return Object(e.jsx)(Dn,{dashboard:O[R],insight:d,canEditInsight:m,isHighlighted:R===C,isAlreadyOnDashboard:f.some(U=>U.id===O[R].id),style:H},R)};return Object(e.jsx)(Rn.a,{onClose:l,isOpen:r,title:"Add to dashboard",footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"flex-1",children:Object(e.jsx)(J.a,{type:"secondary",onClick:j,disabled:!m,children:"Add to a new dashboard"})}),Object(e.jsx)(J.a,{type:"secondary",onClick:l,children:"Close"})]}),children:Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(In.a,{"data-attr":"dashboard-searchfield",type:"search",fullWidth:!0,placeholder:"Search for dashboards...",value:p,onChange:S=>M(S)}),Object(e.jsxs)("div",{className:"text-muted-alt",children:["This insight is referenced on ",Object(e.jsx)("strong",{className:"text-default",children:(a=d.dashboards)===null||a===void 0?void 0:a.length})," ",Object(V.vb)(((i=d.dashboards)===null||i===void 0?void 0:i.length)||0,"dashboard","dashboards",!1)]}),Object(e.jsx)("div",{style:{minHeight:420},children:Object(e.jsx)(wn.a,{children:S=>{let{height:R,width:H}=S;return Object(e.jsx)(Ln.a,{width:H,height:R,rowCount:O.length,overscanRowCount:100,rowHeight:40,rowRenderer:q,scrollToIndex:C})}})})]})})}try{tt.displayName="AddToDashboardModal",tt.__docgenInfo={description:"",displayName:"AddToDashboardModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},closeModal:{defaultValue:null,description:"",name:"closeModal",required:!0,type:{name:"() => void"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"]={docgenInfo:tt.__docgenInfo,name:"AddToDashboardModal",path:"frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"})}catch(n){}var Nn=t("./frontend/src/scenes/dashboard/NewDashboardModal.tsx");function nt(n){var s;let{insight:a,canEditInsight:i}=n;const[r,l]=Object(I.useState)(!1),{rawDashboards:d}=Object(o.useValues)(he.a),m=((s=a.dashboards)===null||s===void 0?void 0:s.map(u=>d[u]).filter(u=>!!u))||[];return Object(e.jsxs)("span",{className:"save-to-dashboard","data-attr":"save-to-dashboard-button",children:[Object(e.jsx)(tt,{isOpen:r,closeModal:()=>l(!1),insight:a,canEditInsight:i}),Object(e.jsx)(Nn.a,{}),Object(e.jsx)(J.a,{onClick:()=>l(!0),type:"secondary",icon:Object(e.jsx)(oe.IconWithCount,{count:m.length,showZero:!1,children:Object(e.jsx)(oe.IconGauge,{})}),children:"Add to dashboard"})]})}try{nt.displayName="AddToDashboard",nt.__docgenInfo={description:"",displayName:"AddToDashboard",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"]={docgenInfo:nt.__docgenInfo,name:"AddToDashboard",path:"frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"})}catch(n){}var Vn=t("./frontend/src/scenes/insights/InsightContainer.tsx"),dn=t("./frontend/src/lib/components/EditableField/EditableField.tsx"),cn=t("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx");function st(n){let{saveAs:s,saveInsight:a,isSaved:i,insightSaving:r,insightChanged:l,addingToDashboard:d}=n;const m=i&&!l,u=i&&!d;return Object(e.jsx)(J.c,{type:"primary",onClick:()=>a(!0),"data-attr":"insight-save-button",disabled:m,loading:!m&&r,sideAction:{popup:{placement:"bottom-end",overlay:Object(e.jsxs)(e.Fragment,{children:[!m&&Object(e.jsxs)(J.a,{onClick:()=>a(!1),"data-attr":"insight-save-and-continue",status:"stealth",fullWidth:!0,children:[d?"Save, add to dashboard":"Save"," & continue editing"]}),u&&Object(e.jsx)(J.a,{onClick:s,"data-attr":"insight-save-as-new-insight",status:"stealth",fullWidth:!0,children:"Save as\u2026"})]})},disabled:m&&!u,"data-attr":"insight-save-dropdown"},children:m?"No changes to be saved":d?"Save & add to dashboard":"Save"})}try{st.displayName="InsightSaveButton",st.__docgenInfo={description:"",displayName:"InsightSaveButton",props:{saveAs:{defaultValue:null,description:"",name:"saveAs",required:!0,type:{name:"() => void"}},saveInsight:{defaultValue:null,description:"",name:"saveInsight",required:!0,type:{name:"(redirectToViewMode?: boolean | undefined) => void"}},isSaved:{defaultValue:null,description:"",name:"isSaved",required:!0,type:{name:"boolean | undefined"}},insightSaving:{defaultValue:null,description:"",name:"insightSaving",required:!0,type:{name:"boolean"}},insightChanged:{defaultValue:null,description:"",name:"insightChanged",required:!0,type:{name:"boolean"}},addingToDashboard:{defaultValue:null,description:"",name:"addingToDashboard",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"]={docgenInfo:st.__docgenInfo,name:"InsightSaveButton",path:"frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"})}catch(n){}const Kt="<this_should_be_changed_when_in_use>",Mn=15e3,kn=!0,zt=[{title:"Experimentation is launching!",description:"Experimentation can help you test which product changes optimize your metrics. Give us feedback on your needs!"},{title:"Want to test product changes before shipping? \u{1F9EA}",description:"Our new A/B testing feature is launching soon and will let you seamlessly run experiments on your product. Interested?"},{title:"Introducing A/B testing \u{1F680}",description:"We are launching our A/B testing suite soon! Share your feedback, help us shape this new feature."}],un=Object(o.kea)({path:["lib","experimental","FeedbackCallCTA"],selectors:{featureFlagGroup:[()=>[$.a.selectors.featureFlags],n=>n[Kt]],copy:[n=>[n.featureFlagGroup],n=>n==="control"?zt[0]:n==="variant-0"?zt[1]:n==="variant-1"?zt[2]:null]},actions:{reportAndDismiss:n=>({result:n}),show:!0,hide:!0},reducers:{hidden:[!0,{show:()=>!1,hide:()=>!0}]},listeners:n=>{let{actions:s}=n;return{reportAndDismiss:a=>{let{result:i}=a;ae.a.capture("experimentation call prompt action",{result:i}),localStorage.setItem(Kt,"true"),s.hide(),i==="more-info"&&ge.d.success("We'll be in touch via email in the next few days!")}}},events:n=>{let{actions:s,values:a,cache:i}=n;return{afterMount:()=>{a.featureFlagGroup&&!localStorage.getItem(Kt)&&(i.timeout=window.setTimeout(()=>s.show(),Mn))},beforeUnmount:()=>{window.clearTimeout(i.timeout)}}}});function Bn(){const{hidden:n,copy:s}=Object(o.useValues)(un),{reportAndDismiss:a}=Object(o.useActions)(un);return kn?null:Object(e.jsxs)("div",{className:`nps-prompt${n?" hide":""}`,children:[Object(e.jsx)("span",{className:"nps-dismiss",onClick:()=>a("dismiss"),children:Object(e.jsx)(G.a,{})}),s&&Object(e.jsxs)("div",{className:"prompt-inner",children:[Object(e.jsx)("div",{className:"prompt-title",children:s.title}),Object(e.jsx)("div",{className:"question",children:s.description}),Object(e.jsxs)("div",{className:"action-buttons",style:{width:240},children:[Object(e.jsx)("a",{href:"https://calendly.com/posthog-feedback",target:"_blank",rel:"noreferrer",onClick:()=>a("call"),children:Object(e.jsx)(P.a,{className:"prompt-button",children:"Schedule call with Eng Team"})}),Object(e.jsx)(P.a,{className:"prompt-button",onClick:()=>a("more-info"),children:"Send me more info"}),Object(e.jsx)(P.a,{className:"prompt-button",onClick:()=>a("not-interested"),children:"Not interested"})]})]})]})}var Wn=t("./frontend/src/lib/components/PageHeader.tsx"),Ut=t("./frontend/src/scenes/insights/utils.tsx"),Me=t("./frontend/src/models/groupsModel.ts"),Gn=t("./frontend/src/models/cohortsModel.ts"),Kn=t("./frontend/src/scenes/trends/mathsLogic.tsx"),Ke=t("./frontend/src/lib/components/LemonSkeleton/index.tsx");function pn(){return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"my-6 space-y-4",children:[Object(e.jsx)(Ke.a,{className:"w-1/4"}),Object(e.jsx)(Ke.a,{className:"w-1/2",repeat:3}),Object(e.jsx)(Ke.a,{}),Object(e.jsxs)("div",{className:"border rounded p-6 flex items-center gap-4",children:[Object(e.jsx)("div",{className:"flex-1 space-y-2",children:Object(e.jsx)(Ke.a.Row,{repeat:3})}),Object(e.jsx)("div",{className:"flex-1 space-y-2",children:Object(e.jsx)(Ke.a.Row,{repeat:3})})]}),Object(e.jsx)("div",{className:"border rounded p-6",style:{minHeight:600}})]})})}var zn=t("./node_modules/.pnpm/react-transition-group@4.4.5_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-transition-group/esm/CSSTransition.js"),be=t("./frontend/src/scenes/trends/trendsLogic.ts"),ze=t("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),we=t("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),z=t("./frontend/src/lib/components/TaxonomicFilter/types.ts");function at(n){let{insightProps:s}=n;const{setFilters:a}=Object(o.useActions)(Object(be.a)(s)),{filters:i,isFormulaOn:r}=Object(o.useValues)(Object(be.a)(s)),{groupsTaxonomicTypes:l}=Object(o.useValues)(Me.a),d=[z.a.EventProperties,z.a.PersonProperties,z.a.EventFeatureFlags,...l,z.a.Cohorts,z.a.Elements,...Object(k.j)(i)?[z.a.Sessions]:[]];return Object(e.jsxs)(e.Fragment,{children:[Object(k.f)(i)&&Object(e.jsxs)("div",{className:"mb-2",children:["Showing ",Object(e.jsx)("b",{children:"Unique users"})," who did"]}),Object(e.jsx)(ze.a,{filters:i,setFilters:m=>a(m),typeKey:`trends_${c.F.TRENDS}`,buttonCopy:`Add graph ${r?"variable":"series"}`,showSeriesIndicator:!0,showNestedArrow:!0,entitiesLimit:Object(k.c)(i)&&i.display&&T.y.includes(i.display)&&!r||Object(k.f)(i)?1:V.c.length,mathAvailability:Object(k.f)(i)?we.b.None:Object(k.i)(i)?we.b.ActorsOnly:we.b.All,propertiesTaxonomicGroupTypes:d})]})}function it(n){let{insightProps:s}=n;const{filters:a,localFilters:i,isFormulaOn:r}=Object(o.useValues)(Object(be.a)(s)),{setIsFormulaOn:l}=Object(o.useActions)(Object(be.a)(s)),d=r&&Object(k.j)(a)&&!!a.display&&T.y.includes(a.display)&&i.length>1;return Object(e.jsxs)("div",{className:"flex items-center justify-between w-full",children:[Object(e.jsx)("span",{children:r?"Variables":"Series"}),Object(e.jsx)(ye.a,{title:d?"This chart type does not support multiple series, so in order to disable formula mode, remove variables or switch to a different chart type.":"Make your own formula the output of the insight with formula mode. Use graph series as variables.",children:Object(e.jsx)("div",{style:{margin:"-0.25rem 0"},children:Object(e.jsxs)(Q.LemonButton,{size:"small",onClick:()=>l(!r),disabled:d,icon:Object(e.jsx)(oe.IconCalculate,{}),id:"trends-formula-switch",children:[r?"Disable":"Enable"," formula mode"]})})})]})}try{at.displayName="TrendsSeries",at.__docgenInfo={description:"",displayName:"TrendsSeries",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"]={docgenInfo:at.__docgenInfo,name:"TrendsSeries",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"})}catch(n){}try{it.displayName="TrendsSeriesLabel",it.__docgenInfo={description:"",displayName:"TrendsSeriesLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"]={docgenInfo:it.__docgenInfo,name:"TrendsSeriesLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"})}catch(n){}var Un=t("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx");function ot(n){let{filters:s}=n;const{setFiltersMerge:a}=Object(o.useActions)(N.c),{allEventNames:i}=Object(o.useValues)(N.c),{groupsTaxonomicTypes:r}=Object(o.useValues)(Me.a),l=[z.a.EventProperties,z.a.PersonProperties,z.a.EventFeatureFlags,...r,z.a.Cohorts,z.a.Elements,...s.insight===c.F.TRENDS?[z.a.Sessions]:[]];return Object(e.jsx)(Un.b,{noTitle:!0,value:Object(V.q)(s.properties),onChange:d=>a({properties:d}),taxonomicGroupTypes:l,pageKey:"insight-filters",eventNames:i,filters:s,setTestFilters:d=>a(d)})}try{ot.displayName="GlobalAndOrFilters",ot.__docgenInfo={description:"",displayName:"GlobalAndOrFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"]={docgenInfo:ot.__docgenInfo,name:"GlobalAndOrFilters",path:"frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"})}catch(n){}const Yn=/^[a-zA-Z\ \-\*\^0-9\+\/\(\)\.]+$/;function rt(n){let{insightProps:s}=n;const{isFormulaOn:a,filters:i}=Object(o.useValues)(Object(be.a)(s)),r=Object(k.j)(i)?i.formula:null,{setFilters:l}=Object(o.useActions)(Object(be.a)(s)),[d,m]=Object(I.useState)(r);return Object(I.useEffect)(()=>{r&&m(r)},[r]),a?Object(e.jsx)("div",{className:"flex items-center gap-2",children:Object(e.jsx)(Q.LemonInput,{className:"flex-1",placeholder:"Example: (A + B) / 100",autoFocus:!0,value:d,onChange:u=>{let p=u.toLocaleUpperCase();p=p.split("").filter(f=>Yn.test(f)).join(""),m(p)},onBlur:u=>{var p;((p=u.relatedTarget)===null||p===void 0?void 0:p.id)!=="trends-formula-switch"&&d!==r&&l({formula:d})},onFocus:()=>{d&&d!==r&&l({formula:d})},onPressEnter:()=>{d!==r&&l({formula:d})}})}):null}function lt(n){let{insightProps:s}=n;const{isFormulaOn:a}=Object(o.useValues)(Object(be.a)(s));return a?Object(e.jsx)(e.Fragment,{children:"Formula"}):null}try{rt.displayName="TrendsFormula",rt.__docgenInfo={description:"",displayName:"TrendsFormula",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"]={docgenInfo:rt.__docgenInfo,name:"TrendsFormula",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"})}catch(n){}try{lt.displayName="TrendsFormulaLabel",lt.__docgenInfo={description:"",displayName:"TrendsFormulaLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"]={docgenInfo:lt.__docgenInfo,name:"TrendsFormulaLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"})}catch(n){}var $n=t("./frontend/src/scenes/insights/filters/BreakdownFilter/index.ts");function dt(n){let{filters:s}=n;const{setFiltersMerge:a}=Object(o.useActions)(N.c),{featureFlags:i}=Object(o.useValues)($.a),r=s.insight!==c.F.TRENDS&&!!i[T.i.BREAKDOWN_BY_MULTIPLE_PROPERTIES];return Object(e.jsx)($n.a,{filters:s,setFilters:a,useMultiBreakdown:r})}try{dt.displayName="Breakdown",dt.__docgenInfo={description:"",displayName:"Breakdown",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"]={docgenInfo:dt.__docgenInfo,name:"Breakdown",path:"frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"})}catch(n){}var qn=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/checkbox/index.js"),Yt=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Hn=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss"),mn=t.n(Hn),$t={};$t.insert="head",$t.singleton=!1;var Hs=A()(mn.a,$t),Qs=mn.a.locals||{};const Qn=[{name:"new",tooltip:"Users who were first seen on this period and did the activity during the period."},{name:"returning",tooltip:"Users who did activity both this and previous period."},{name:"resurrecting",tooltip:"Users who did the activity this period but did not do the activity on the previous period (i.e. were inactive for 1 or more periods)."},{name:"dormant",tooltip:"Users who went dormant on this period, i.e. users who did not do the activity this period but did the activity on the previous period."}];function ct(n){let{insightProps:s}=n;const{toggleLifecycle:a}=Object(o.useActions)(Object(be.a)(s));return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:"LifecycleToggles",children:Qn.map((i,r)=>Object(e.jsxs)("div",{children:[i.name," ",Object(e.jsxs)("div",{children:[Object(e.jsx)(qn.a,{defaultChecked:!0,className:i.name,onChange:()=>a(i.name)}),Object(e.jsx)(ye.a,{title:i.tooltip,children:Object(e.jsx)(Yt.a,{className:"info-indicator"})})]})]},r))})})}try{ct.displayName="LifecycleToggles",ct.__docgenInfo={description:"",displayName:"LifecycleToggles",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"]={docgenInfo:ct.__docgenInfo,name:"LifecycleToggles",path:"frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"})}catch(n){}var Jn=t("./frontend/src/scenes/insights/filters/TestAccountFilter/index.ts");function ut(n){let{filters:s,insightProps:a}=n;const{setFilters:i}=Object(o.useActions)(Object(be.a)(a));return Object(e.jsx)(Jn.a,{filters:s,onChange:i})}try{ut.displayName="LifecycleGlobalFilters",ut.__docgenInfo={description:"",displayName:"LifecycleGlobalFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"]={docgenInfo:ut.__docgenInfo,name:"LifecycleGlobalFilters",path:"frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"})}catch(n){}var Se=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),Ee=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),Xn=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input/index.js"),Zn=t("./frontend/src/lib/introductions/groupsAccessLogic.ts"),es=t("./frontend/src/scenes/groups/GroupsIntroduction.tsx");const qt=-1;function Ue(n){let{aggregationGroupTypeIndex:s,onChange:a}=n;const{groupTypes:i,aggregationLabel:r}=Object(o.useValues)(Me.a),{needsUpgradeForGroups:l,canStartUsingGroups:d}=Object(o.useValues)(Zn.b),m=[{title:"Event Aggregation",options:[{value:qt,label:"Unique users"}]}];return l||d?m[0].footer=Object(e.jsx)(es.a,{needsUpgrade:l}):i.forEach(u=>{m[0].options.push({value:u.group_type_index,label:`Unique ${r(u.group_type_index).plural}`})}),Object(e.jsx)(Q.LemonSelect,{value:s===void 0?qt:s,onChange:u=>{u!==null&&a(u===qt?void 0:u)},"data-attr":"retention-aggregation-selector",dropdownMatchSelectWidth:!1,options:m})}try{Ue.displayName="AggregationSelect",Ue.__docgenInfo={description:"",displayName:"AggregationSelect",props:{aggregationGroupTypeIndex:{defaultValue:null,description:"",name:"aggregationGroupTypeIndex",required:!0,type:{name:"number | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(aggregationGroupTypeIndex: number | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"]={docgenInfo:Ue.__docgenInfo,name:"AggregationSelect",path:"frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"})}catch(n){}function pt(n){var s,a;let{insightProps:i}=n;const{showGroupsOptions:r}=Object(o.useValues)(Me.a),{filters:l,actionFilterTargetEntity:d,actionFilterReturningEntity:m}=Object(o.useValues)(Object(Se.e)(i)),{setFilters:u}=Object(o.useActions)(Object(Se.e)(i));return Object(e.jsxs)("div",{className:"space-y-2","data-attr":"retention-summary",children:[Object(e.jsxs)("div",{children:["Show"," ",r?Object(e.jsx)(Ue,{aggregationGroupTypeIndex:l.aggregation_group_type_index,onChange:p=>u({aggregation_group_type_index:p})}):Object(e.jsx)("b",{children:"Unique users"})," ","who performed event or action"]}),Object(e.jsxs)("div",{className:"flex items-center",children:[Object(e.jsx)(ze.a,{entitiesLimit:1,mathAvailability:we.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:d,setFilters:p=>{p.events&&p.events.length>0?u({target_entity:p.events[0]}):p.actions&&p.actions.length>0?u({target_entity:p.actions[0]}):u({target_entity:void 0})},typeKey:"retention-table"}),Object(e.jsx)(Ee.a,{value:l.retention_type?Se.d[l.retention_type]:void 0,onChange:p=>u({retention_type:p}),dropdownMatchSelectWidth:!1,children:Object.entries(Se.d).map(p=>{let[f,O]=p;return Object(e.jsxs)(Ee.a.Option,{value:f,children:[O,Object(e.jsx)(ye.a,{placement:"right",title:Se.c[f],children:Object(e.jsx)(Yt.a,{className:"info-indicator"})})]},f)})})]}),Object(e.jsxs)("div",{children:["in the last"," ",Object(e.jsx)(Xn.a,{type:"tel",style:{width:80},value:String(((s=l.total_intervals)!==null&&s!==void 0?s:11)-1),onChange:p=>u({total_intervals:parseInt(p.target.value||"0")+1})})," ",Object(e.jsx)(Ee.a,{value:l.period,onChange:p=>u({period:p}),dropdownMatchSelectWidth:!1,children:Se.b.map(p=>Object(e.jsx)(Ee.a.Option,{value:p,children:Se.a[p]||p},p))})]}),Object(e.jsxs)("div",{children:["and then came back to perform event or action"," ",Object(e.jsx)("div",{className:"flex",children:Object(e.jsx)(ze.a,{entitiesLimit:1,mathAvailability:we.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:m,setFilters:p=>{p.events&&p.events.length>0?u({returning_entity:p.events[0]}):p.actions&&p.actions.length>0?u({returning_entity:p.actions[0]}):u({returning_entity:void 0})},typeKey:"retention-table-returning"})}),"on any of the next ",Se.a[(a=l.period)!==null&&a!==void 0?a:"Day"]]}),Object(e.jsx)("div",{children:Object(e.jsxs)("p",{className:"text-muted mt-4",children:["Want to learn more about retention?"," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/features/retention?utm_campaign=learn-more-horizontal&utm_medium=in-product",target:"_blank",rel:"noopener",style:{display:"inline-flex",alignItems:"center"},children:["Go to docs",Object(e.jsx)(oe.IconOpenInNew,{style:{marginLeft:4}})]})]})})]})}try{pt.displayName="RetentionSummary",pt.__docgenInfo={description:"",displayName:"RetentionSummary",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"]={docgenInfo:pt.__docgenInfo,name:"RetentionSummary",path:"frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"})}catch(n){}var ue=t("./frontend/src/scenes/paths/pathsLogic.ts"),ts=t("./frontend/src/lib/components/LemonCheckbox/index.ts");function mt(n){var s,a,i;let{insightProps:r}=n;const{filter:l}=Object(o.useValues)(Object(ue.b)(r)),{setFilter:d}=Object(o.useActions)(Object(ue.b)(r)),m=[{type:c.J.PageView,label:"Page views",selected:(s=l.include_event_types)===null||s===void 0?void 0:s.includes(c.J.PageView)},{type:c.J.Screen,label:"Screen views",selected:(a=l.include_event_types)===null||a===void 0?void 0:a.includes(c.J.Screen)},{type:c.J.CustomEvent,label:"Custom events",selected:(i=l.include_event_types)===null||i===void 0?void 0:i.includes(c.J.CustomEvent)}],u=f=>{l.include_event_types?l.include_event_types.includes(f)?d({include_event_types:l.include_event_types.filter(O=>O!==f)}):d({include_event_types:l.include_event_types?[...l.include_event_types,f]:[f]}):d({include_event_types:[f]})},p=Object(V.i)(Object(Ut.h)(l).join(" & "));return Object(e.jsx)(J.b,{status:"stealth",fullWidth:!0,type:"secondary",popup:{sameWidth:!0,closeOnClickInside:!1,overlay:m.map(f=>{var O;return Object(e.jsxs)(J.a,{onClick:()=>u(f.type),status:"stealth",disabled:f.selected&&((O=l.include_event_types)===null||O===void 0?void 0:O.length)===1,fullWidth:!0,"data-attr":f["data-attr"],children:[Object(e.jsx)("span",{className:"pointer-events-none mr-2",children:Object(e.jsx)(ts.a,{checked:f.selected})}),f.label]},f.type)}),actionable:!0},children:p})}try{mt.displayName="PathsEventTypes",mt.__docgenInfo={description:"",displayName:"PathsEventTypes",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsEventTypes.tsx#PathsEventTypes"]={docgenInfo:mt.__docgenInfo,name:"PathsEventTypes",path:"frontend/src/scenes/insights/EditorFilters/PathsEventTypes.tsx#PathsEventTypes"})}catch(n){}var ns=t("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx");function ht(n){let{insightProps:s}=n;const{filter:a}=Object(o.useValues)(Object(ue.b)(s)),{setFilter:i}=Object(o.useActions)(Object(ue.b)(s));return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ns.a,{onChange:r=>i({path_groupings:r}),value:a.path_groupings||[],filterOption:!1,mode:"multiple-custom"})})}try{ht.displayName="PathsWildcardGroups",ht.__docgenInfo={description:"",displayName:"PathsWildcardGroups",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsWildcardGroups.tsx#PathsWildcardGroups"]={docgenInfo:ht.__docgenInfo,name:"PathsWildcardGroups",path:"frontend/src/scenes/insights/EditorFilters/PathsWildcardGroups.tsx#PathsWildcardGroups"})}catch(n){}var hn=t("./frontend/src/lib/components/Popup/Popup.tsx"),ss=t("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx");function Ye(n){let{pathItem:s,onChange:a,children:i,taxonomicGroupTypes:r,disabled:l,wildcardOptions:d}=n;const[m,u]=Object(I.useState)(!1);return Object(e.jsx)(hn.a,{visible:m,placement:"bottom-end",onClickOutside:()=>u(!1),overlay:Object(e.jsx)(ss.a,{value:s,onChange:(p,f)=>{a(f),u(!1)},taxonomicGroupTypes:r,optionsFromProp:{wildcard:d}}),children:Object(e.jsx)("div",{onClick:l?()=>{}:()=>u(!m),children:i})})}try{Ye.displayName="PathItemSelector",Ye.__docgenInfo={description:"",displayName:"PathItemSelector",props:{pathItem:{defaultValue:null,description:"",name:"pathItem",required:!0,type:{name:"TaxonomicFilterValue | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(item: string) => void"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!0,type:{name:"TaxonomicFilterGroupType[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},wildcardOptions:{defaultValue:null,description:"",name:"wildcardOptions",required:!1,type:{name:"SimpleOption[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/components/PathItemSelector.tsx#PathItemSelector"]={docgenInfo:Ye.__docgenInfo,name:"PathItemSelector",path:"frontend/src/lib/components/PropertyFilters/components/PathItemSelector.tsx#PathItemSelector"})}catch(n){}function gt(n){return Object(e.jsx)($e,Y({position:"start"},n))}function ft(n){return Object(e.jsx)($e,Y({position:"end"},n))}function $e(n){let{insightProps:s,position:a}=n;const{filter:i,wildcards:r,taxonomicGroupTypes:l}=Object(o.useValues)(Object(ue.b)(s)),{setFilter:d}=Object(o.useActions)(Object(ue.b)(s)),m=i.funnel_paths&&[c.z.between,c.z.after].includes(i.funnel_paths),u=i.funnel_paths&&[c.z.between,c.z.before].includes(i.funnel_paths),p=m||u;function f(S,R){var H,U,ee,w;const se=((H=S.events)===null||H===void 0||(U=H.filter(Re=>Re.order===R-1))===null||U===void 0?void 0:U[0])||((ee=S.actions)===null||ee===void 0||(w=ee.filter(Re=>Re.order===R-1))===null||w===void 0?void 0:w[0]);return(se==null?void 0:se.name)||""}function O(S,R){let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return S&&R?Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(oe.IconFunnelVertical,{className:"text-2xl"}),Object(e.jsx)("span",{className:"label",children:`${R>0?"Funnel step "+(R+H):"Funnel dropoff "+R*-1}: ${f(S,R>0?R+H:R*-1)}`})]}):Object(e.jsx)("span",{})}function C(){if(i.funnel_paths)if(i.funnel_paths===c.z.after){var S;return O(i.funnel_filter,(S=i.funnel_filter)===null||S===void 0?void 0:S.funnel_step)}else if(i.funnel_paths===c.z.between){var R;return O(i.funnel_filter,(R=i.funnel_filter)===null||R===void 0?void 0:R.funnel_step,-1)}else return Object(e.jsx)("span",{});else return i.start_point?Object(e.jsx)("span",{className:"label",children:i.start_point}):Object(e.jsx)("span",{className:"label",style:{color:"var(--muted)"},children:"Add start point"})}function M(){if(i.funnel_paths)if(i.funnel_paths===c.z.before||i.funnel_paths===c.z.between){var S;return O(i.funnel_filter,(S=i.funnel_filter)===null||S===void 0?void 0:S.funnel_step)}else return Object(e.jsx)("span",{});else return i.end_point?Object(e.jsx)("span",{className:"label",children:i.end_point}):Object(e.jsx)("span",{className:"label",style:{color:"var(--muted)"},children:"Add end point"})}const j={start:{index:0,getLabel:C,setFilterKey:"start_point",pathItem:i.start_point,closeButtonEnabled:i.start_point||m,disabled:u&&!m,funnelFilterLink:i.funnel_filter&&m},end:{index:1,getLabel:M,setFilterKey:"end_point",pathItem:i.end_point,closeButtonEnabled:i.end_point||u,disabled:m&&!u,funnelFilterLink:i.funnel_filter&&u}}[a],q=j.closeButtonEnabled?J.c:J.a;return Object(e.jsx)(Ye,{pathItem:j.pathItem,index:j.index,onChange:S=>d({[j.setFilterKey]:S}),taxonomicGroupTypes:l,disabled:p,wildcardOptions:r,children:Object(e.jsx)(q,{"data-attr":"new-prop-filter-"+j.index,status:j.funnelFilterLink?"primary":"stealth",fullWidth:!0,className:"paths-endpoint-field",type:"secondary",active:p,disabled:j.disabled,onClick:j.funnelFilterLink?()=>{_e.router.actions.push(Object(_e.combineUrl)("/insights",Object(_e.encodeParams)(i.funnel_filter,"?")).url)}:()=>{},sideAction:{icon:Object(e.jsx)(oe.IconClose,{}),type:"tertiary",onClick:S=>{d({[j.setFilterKey]:void 0,funnel_filter:void 0,funnel_paths:void 0}),S.stopPropagation()}},children:j.getLabel()})})}try{gt.displayName="PathsTargetStart",gt.__docgenInfo={description:"",displayName:"PathsTargetStart",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetStart"]={docgenInfo:gt.__docgenInfo,name:"PathsTargetStart",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetStart"})}catch(n){}try{ft.displayName="PathsTargetEnd",ft.__docgenInfo={description:"",displayName:"PathsTargetEnd",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetEnd"]={docgenInfo:ft.__docgenInfo,name:"PathsTargetEnd",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetEnd"})}catch(n){}try{$e.displayName="PathsTarget",$e.__docgenInfo={description:"",displayName:"PathsTarget",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTarget"]={docgenInfo:$e.__docgenInfo,name:"PathsTarget",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTarget"})}catch(n){}var as=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),Ht=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),is=t("./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx"),os=t("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx");function rs(){const[n,s]=Object(I.useState)(!1),{insightProps:a}=Object(o.useValues)(N.c),{filter:i}=Object(o.useValues)(Object(ue.b)(a)),{setFilter:r}=Object(o.useActions)(Object(ue.b)(a)),{currentTeam:l}=Object(o.useValues)(Gt.a),d=((l==null?void 0:l.path_cleaning_filters)||[]).length>0;return Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(is.a,{pageKey:"pathcleanfilters-local",pathCleaningFilters:i.local_path_cleaning_filters||[],onChange:m=>{r({local_path_cleaning_filters:[...i.local_path_cleaning_filters||[],m]})},onRemove:m=>{const u=(i.local_path_cleaning_filters||[]).filter((p,f)=>f!==m);r({local_path_cleaning_filters:u})}}),Object(e.jsx)(hn.a,{visible:n,placement:"top-end",fallbackPlacements:["top-start"],onClickOutside:()=>s(!1),overlay:Object(e.jsx)(os.a,{item:{},onClose:()=>s(!1),onComplete:m=>{r({local_path_cleaning_filters:[...i.local_path_cleaning_filters||[],m]}),s(!1)}}),children:Object(e.jsx)(Q.LemonButton,{onClick:()=>s(!n),className:"new-prop-filter","data-attr":"new-prop-filter-pathcleanfilters-local",type:"secondary",icon:Object(e.jsx)(oe.IconPlus,{}),size:"small",children:"Add Rule"})}),Object(e.jsx)(ye.a,{title:d?"Clean paths based using regex replacement.":"You don't have path cleaning filters. Click the gear icon to configure it.",children:Object(e.jsx)(Q.LemonSwitch,{disabled:!d,checked:d&&i.path_replacements||!1,onChange:m=>{localStorage.setItem("default_path_clean_filters",m.toString()),r({path_replacements:m})},label:"Apply global path URL cleaning",bordered:!0})})]})}var bt=t("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx");function jt(n){let{insightProps:s}=n;const{filter:a}=Object(o.useValues)(Object(ue.b)(s)),{setFilter:i}=Object(o.useActions)(Object(ue.b)(s)),[r,l]=Object(I.useState)({edge_limit:a.edge_limit,min_edge_weight:a.min_edge_weight,max_edge_weight:a.max_edge_weight}),d=()=>{(r.edge_limit!==a.edge_limit||r.min_edge_weight!==a.min_edge_weight||r.max_edge_weight!==a.max_edge_weight)&&i(Y({},r))};return Object(e.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(e.jsx)(bt.a,{info:"Determines the maximum number of path nodes that can be generated. If necessary certain items will be grouped.",children:"Maximum number of paths"}),Object(e.jsx)(Ht.a,{min:0,max:1e3,defaultValue:50,onChange:m=>l(u=>re(Y({},u),{edge_limit:Number(m)})),onBlur:d,onPressEnter:d}),Object(e.jsx)(bt.a,{info:"Determines the minimum and maximum number of persons in each path. Helps adjust the density of the visualization.",children:"Number of people on each path"}),Object(e.jsxs)("div",{children:["between"," ",Object(e.jsx)(Ht.a,{min:0,max:1e5,onChange:m=>l(u=>re(Y({},u),{min_edge_weight:Number(m)})),onBlur:d,onPressEnter:d})," ","and"," ",Object(e.jsx)(Ht.a,{onChange:m=>l(u=>re(Y({},u),{max_edge_weight:Number(m)})),min:0,max:1e5,onBlur:d,onPressEnter:d})]}),Object(e.jsxs)("div",{children:[Object(e.jsxs)("div",{className:"flex mb-2",children:[Object(e.jsx)(bt.a,{showOptional:!0,info:Object(e.jsx)(e.Fragment,{children:"Cleaning rules are an advanced feature that uses regex to normalize URLS for paths visualization. Rules can be set for all insights in the project settings, or they can be defined specifically for an insight."}),children:"Path Cleaning Rules"}),Object(e.jsxs)(ln.a,{className:"grow-1 text-right",to:"/project/settings#path_cleaning_filtering",children:[Object(e.jsx)(as.a,{})," Configure Project Rules"]})]}),Object(e.jsx)(rs,{})]})]})}try{jt.displayName="PathsAdvanced",jt.__docgenInfo={description:"",displayName:"PathsAdvanced",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsAdvanced.tsx#PathsAdvanced"]={docgenInfo:jt.__docgenInfo,name:"PathsAdvanced",path:"frontend/src/scenes/insights/EditorFilters/PathsAdvanced.tsx#PathsAdvanced"})}catch(n){}var X=t("./frontend/src/scenes/funnels/funnelLogic.ts"),ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 607.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V607.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V650h182.9v148zm9.6-226.6l-8.4 14.6H419.3l-8.4-14.6L334.4 438h355.2L613 571.4zM726.3 374H297.7l-85-148h598.6l-85 148z"}}]},name:"funnel-plot",theme:"outlined"},ds=ls,gn=function(s,a){return I.createElement(Ae.a,Object(te.a)(Object(te.a)({},s),{},{ref:a,icon:ds}))};gn.displayName="FunnelPlotOutlined";var fn=I.forwardRef(gn),cs=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js"),us=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),bn=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),jn=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/menu/index.js"),ps=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/dropdown/index.js"),ms=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss"),vn=t.n(ms),Qt={};Qt.insert="head",Qt.singleton=!1;var Js=A()(vn.a,Qt),Xs=vn.a.locals||{};function On(n){let{icon:s,label:a,description:i,onClick:r}=n;return Object(e.jsxs)("div",{onClick:r,children:[Object(e.jsxs)("div",{className:"flex items-center text-sm font-medium gap-2",children:[s,Object(e.jsx)("div",{children:a})]}),i&&Object(e.jsx)("div",{className:"text-muted text-xs mt-1",children:i})]})}function vt(n){let{label:s,value:a,onValueChange:i,options:r,hideDescriptionOnDisplay:l,disabled:d,compact:m}=n;const u=r.find(f=>f.key===a),p=Object(e.jsx)(jn.a,{children:r.map(f=>{let j=f,{key:O,hidden:C}=j,M=An(j,["key","hidden"]);return C?null:Object(e.jsx)(jn.a.Item,{children:Object(e.jsx)(On,re(Y({},M),{onClick:()=>i(O)}))},O)})});return Object(e.jsxs)(e.Fragment,{children:[s&&Object(e.jsx)("label",{className:"ant-form-item-label",children:s}),Object(e.jsx)(ps.a,{overlay:p,trigger:["click"],disabled:d,children:Object(e.jsxs)("div",{className:Object(Ge.default)("dropdown-selector",d&&" disabled",m&&"compact"),onClick:f=>f.preventDefault(),children:[Object(e.jsx)("div",{className:"grow",children:u&&Object(e.jsx)(On,re(Y({},u),{onClick:()=>{},description:l?void 0:u.description}))}),Object(e.jsx)("div",{className:"dropdown-arrow",children:Object(e.jsx)(oe.IconArrowDropDown,{})})]})})]})}try{vt.displayName="DropdownSelector",vt.__docgenInfo={description:"",displayName:"DropdownSelector",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | null"}},onValueChange:{defaultValue:null,description:"",name:"onValueChange",required:!0,type:{name:"(value: string) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"DropdownOption[]"}},hideDescriptionOnDisplay:{defaultValue:null,description:"",name:"hideDescriptionOnDisplay",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"]={docgenInfo:vt.__docgenInfo,name:"DropdownSelector",path:"frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"})}catch(n){}const hs=()=>{};function Ot(n){let{onChange:s=hs,disabled:a=!1,simpleMode:i}=n;const{insightProps:r}=Object(o.useValues)(N.c),{aggregationTargetLabel:l}=Object(o.useValues)(Object(X.a)(r)),{chartFilter:d}=Object(o.useValues)(Object(bn.a)(r)),{setChartFilter:m}=Object(o.useActions)(Object(bn.a)(r)),u=c.B.Steps,p=[{key:c.B.Steps,label:"Conversion steps",description:`Track ${l.plural} progress between steps of the funnel`,icon:Object(e.jsx)(fn,{})},{key:c.B.TimeToConvert,label:"Time to convert",description:`Track how long it takes for ${l.plural} to convert`,icon:Object(e.jsx)(cs.a,{}),hidden:!1},{key:c.B.Trends,label:"Historical trends",description:"Track how this funnel's conversion rate is trending over time",icon:Object(e.jsx)(us.a,{}),hidden:!1}];if(p.filter(O=>!O.hidden).length<=1)return null;const f=Object(e.jsx)("div",{className:"funnel-chart-filter",children:Object(e.jsx)(vt,{options:p,value:d||u,onValueChange:O=>{const C=O;m(C),s(C)},disabled:a,hideDescriptionOnDisplay:!0,compact:i})});return i?f:Object(e.jsxs)("div",{children:[Object(e.jsx)("h4",{className:"secondary",children:"Graph Type"}),f]})}try{Ot.displayName="ToggleButtonChartFilter",Ot.__docgenInfo={description:"",displayName:"ToggleButtonChartFilter",props:{onChange:{defaultValue:{value:"(): void => {}"},description:"",name:"onChange",required:!1,type:{name:"((chartFilter: FunnelVizType) => void)"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},simpleMode:{defaultValue:null,description:"",name:"simpleMode",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"]={docgenInfo:Ot.__docgenInfo,name:"ToggleButtonChartFilter",path:"frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"})}catch(n){}const Jt="funnels",yn=Object(o.kea)({path:["scenes","insights","InsightTabs","FunnelTab","funnelCommandLogic"],connect:[Z.a],events:{afterMount:()=>{const s=[{key:Jt,resolver:[{icon:fn,display:"Clear Funnel",executor:()=>{var a;(a=X.a.findMounted({syncWithUrl:!0}))===null||a===void 0||a.actions.clearFunnel()}}],scope:Jt}];for(const a of s)Z.a.actions.registerCommand(a)},beforeUnmount:()=>{Z.a.actions.deregisterScope(Jt)}}});var gs=t("./node_modules/.pnpm/use-debounce@6.0.1_react@16.14.0/node_modules/use-debounce/esm/useDebouncedCallback.js");const xn={[c.w.Minute]:[1,1440],[c.w.Hour]:[1,24],[c.w.Day]:[1,365],[c.w.Week]:[1,53],[c.w.Month]:[1,12]};function fs(){var n;const{insightProps:s}=Object(o.useValues)(N.c),{conversionWindow:a,aggregationTargetLabel:i,filters:r}=Object(o.useValues)(Object(X.a)(s)),{setFilters:l}=Object(o.useActions)(Object(X.a)(s)),[d,m]=Object(I.useState)(a),u=Object.keys(xn).map(O=>{var C;return{label:Object(V.i)(Object(V.vb)((C=a.funnel_window_interval)!==null&&C!==void 0?C:7,O,`${O}s`,!1)),value:O}}),p=xn[(n=a.funnel_window_interval_unit)!==null&&n!==void 0?n:c.w.Day],f=Object(gs.a)(()=>{(d.funnel_window_interval!==a.funnel_window_interval||d.funnel_window_interval_unit!==a.funnel_window_interval_unit)&&l(d)},200);return Object(e.jsxs)("div",{className:"flex items-center gap-2 ",children:[Object(e.jsxs)("span",{className:"whitespace-nowrap",children:["Conversion window limit"," ",Object(e.jsx)(ye.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("b",{children:"Recommended!"})," Limit to ",i.plural," ",r.aggregation_group_type_index!=null?"that":"who"," converted within a specific time frame. ",Object(V.i)(i.plural)," ",r.aggregation_group_type_index!=null?"that":"who"," do not convert in this time frame will be considered as drop-offs."]}),children:Object(e.jsx)(Yt.a,{className:"info-indicator"})})]}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(Q.LemonInput,{type:"number",className:"max-w-20",fullWidth:!1,min:p[0],max:p[1],defaultValue:a.funnel_window_interval,value:d.funnel_window_interval,onChange:O=>{m(C=>re(Y({},C),{funnel_window_interval:Number(O)})),f()},onBlur:f,onPressEnter:f}),Object(e.jsx)(Q.LemonSelect,{dropdownMatchSelectWidth:!1,value:d.funnel_window_interval_unit,onChange:O=>{O&&(m(C=>re(Y({},C),{funnel_window_interval_unit:O})),f())},options:u})]})]})}const bs=20;function yt(n){let{insightProps:s}=n;const{isStepsEmpty:a,filterSteps:i,filters:r}=Object(o.useValues)(Object(X.a)(s)),{setFilters:l}=Object(o.useActions)(Object(X.a)(s)),{groupsTaxonomicTypes:d,showGroupsOptions:m}=Object(o.useValues)(Me.a);return Object(o.useMountedLogic)(yn),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex justify-between items-center",children:[Object(e.jsx)(bt.a,{children:"Query Steps"}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{className:"text-muted",children:"Graph type"}),Object(e.jsx)(Ot,{simpleMode:!0})]})]}),Object(e.jsx)(ze.a,{bordered:!0,filters:r,setFilters:l,typeKey:"EditFunnel-action",mathAvailability:we.b.None,hideDeleteBtn:i.length===1,buttonCopy:"Add step",showSeriesIndicator:!a,seriesIndicatorType:"numeric",entitiesLimit:bs,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[z.a.EventProperties,z.a.PersonProperties,z.a.EventFeatureFlags,...d,z.a.Cohorts,z.a.Elements]}),Object(e.jsxs)("div",{className:"mt-4 space-y-4",children:[m&&Object(e.jsxs)("div",{className:"flex items-center w-full gap-2",children:[Object(e.jsx)("span",{children:"Aggregating by"}),Object(e.jsx)(Ue,{aggregationGroupTypeIndex:r.aggregation_group_type_index,onChange:u=>l({aggregation_group_type_index:u})})]}),Object(e.jsx)(fs,{})]})]})}try{yt.displayName="FunnelsQuerySteps",yt.__docgenInfo={description:"",displayName:"FunnelsQuerySteps",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"]={docgenInfo:yt.__docgenInfo,name:"FunnelsQuerySteps",path:"frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"})}catch(n){}const js=[{label:"Sequential",value:c.bb.ORDERED},{label:"Strict order",value:c.bb.STRICT},{label:"Any order",value:c.bb.UNORDERED}];function vs(){const{insightProps:n}=Object(o.useValues)(N.c),{filters:s}=Object(o.useValues)(Object(X.a)(n)),{setFilters:a}=Object(o.useActions)(Object(X.a)(n));return Object(e.jsx)(Q.LemonSelect,{id:"funnel-step-order-filter","data-attr":"funnel-step-order-filter",value:s.funnel_order_type||c.bb.ORDERED,onChange:i=>i&&a({funnel_order_type:i}),dropdownMatchSelectWidth:!1,options:js})}var Xt=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),_n=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),Os=t("./node_modules/.pnpm/@react-hook+size@2.1.2_react@16.14.0/node_modules/@react-hook/size/dist/module/index.js");function ys(n){var s,a,i,r,l,d,m,u;let{filter:p,index:f,onClose:O,isVertical:C}=n;const{insightProps:M}=Object(o.useValues)(N.c),{filters:j,areFiltersValid:q,numberOfSeries:S,exclusionDefaultStepRange:R}=Object(o.useValues)(Object(X.a)(M)),{setOneEventExclusionFilter:H}=Object(o.useActions)(Object(X.a)(M)),U={funnel_from_step:(s=(a=j.exclusions)===null||a===void 0||(i=a[f])===null||i===void 0?void 0:i.funnel_from_step)!==null&&s!==void 0?s:R.funnel_from_step,funnel_to_step:(r=(l=j.exclusions)===null||l===void 0||(d=l[f])===null||d===void 0?void 0:d.funnel_to_step)!==null&&r!==void 0?r:R.funnel_to_step},ee=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:U.funnel_from_step,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U.funnel_to_step;H(re(Y({},p),{funnel_from_step:w,funnel_to_step:se}),f)};return Object(e.jsxs)(Xt.a,{justify:"space-between",align:"middle",wrap:!1,style:{margin:`${C?4:0}px 0`,paddingLeft:4,width:C?"100%":"auto"},children:["between",Object(e.jsx)(Ee.a,{defaultValue:0,disabled:!q,dropdownMatchSelectWidth:!1,dropdownAlign:V.a.bottomRight,"data-attr":"funnel-exclusion-funnel_from_step-selector",optionLabelProp:"label",value:U.funnel_from_step,onChange:w=>ee(w),onBlur:()=>ee,style:{marginLeft:4,marginRight:4},children:Array.from(Array(S).keys()).slice(0,-1).map(w=>Object(e.jsxs)(Ee.a.Option,{value:w,label:`Step ${w+1}`,children:["Step ",w+1]},w))}),"and",Object(e.jsx)(Ee.a,{defaultValue:((m=U.funnel_from_step)!==null&&m!==void 0?m:0)+1,disabled:!q,dropdownMatchSelectWidth:!1,dropdownAlign:V.a.bottomRight,"data-attr":"funnel-exclusion-funnel_to_step-selector",optionLabelProp:"label",value:U.funnel_to_step,onChange:w=>ee(U.funnel_from_step,w),onBlur:()=>ee,style:{marginLeft:4},children:Array.from(Array(S).keys()).slice(((u=U.funnel_from_step)!==null&&u!==void 0?u:0)+1).map(w=>Object(e.jsxs)(Ee.a.Option,{value:w,label:`Step ${w+1}`,children:["Step ",w+1]},w))}),Object(e.jsx)("div",{style:{flex:1}}),Object(e.jsx)(Q.LemonButton,{icon:Object(e.jsx)(oe.IconDelete,{}),status:"primary-alt",onClick:O,"data-attr":"delete-prop-exclusion-filter",title:"Delete event exclusion series"})]})}function xs(n){let{seriesIndicator:s,filter:a,suffix:i,isVertical:r}=n;return Object(e.jsxs)(Xt.a,{wrap:!1,align:r?"top":"middle",style:{width:"100%"},children:[Object(e.jsx)(_n.a,{style:{padding:`${r?5:0}px 8px`},children:s}),Object(e.jsx)(_n.a,{flex:"auto",children:Object(e.jsxs)(Xt.a,{align:"middle",wrap:r,children:[a,i]})})]})}function _s(){const{insightProps:n}=Object(o.useValues)(N.c),{exclusionFilters:s,areFiltersValid:a,exclusionDefaultStepRange:i}=Object(o.useValues)(Object(X.a)(n)),{setEventExclusionFilters:r}=Object(o.useActions)(Object(X.a)(n)),l=Object(I.useRef)(null),[d]=Object(Os.a)(l),m=!!d&&d<450;return Object(e.jsx)(ze.a,{ref:l,setFilters:r,filters:s,typeKey:"funnel-exclusions-filter",addFilterDefaultOptions:Y({id:"$pageview",name:"$pageview",type:c.p.EVENTS},i),disabled:!a,buttonCopy:"Add exclusion",actionsTaxonomicGroupTypes:[z.a.Events],mathAvailability:we.b.None,hideFilter:!0,hideRename:!0,hideDeleteBtn:!0,seriesIndicatorType:"alpha",renderRow:u=>Object(e.jsx)(xs,re(Y({},u),{isVertical:m})),customRowSuffix:u=>Object(e.jsx)(ys,re(Y({},u),{isVertical:m}))})}function Ss(){const{insightProps:n}=Object(o.useValues)(N.c),{stepReference:s}=Object(o.useValues)(Object(X.a)(n)),{setStepReference:a}=Object(o.useActions)(Object(X.a)(n)),i=[{value:c.A.total,label:"Overall conversion"},{value:c.A.previous,label:"Relative to previous step"}];return Object(e.jsx)(Q.LemonSelect,{value:s||c.A.total,onChange:r=>r&&a(r),dropdownMatchSelectWidth:!1,"data-attr":"funnel-step-reference-selector",options:i})}var xt=t("./frontend/src/lib/forms/Field.tsx");function _t(n){let{filters:s,insightProps:a}=n;const{aggregationTargetLabel:i,advancedOptionsUsedCount:r}=Object(o.useValues)(Object(X.a)(a)),{setFilters:l,setStepReference:d}=Object(o.useActions)(Object(X.a)(a));return Object(o.useMountedLogic)(yn),Object(e.jsxs)("div",{className:"space-y-4",children:[Object(e.jsx)(xt.b,{label:"Step order",info:Object(e.jsxs)("ul",{className:"list-disc pl-4",children:[Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Sequential"})," - Step B must happen after Step A, but any number events can happen between A and B."]}),Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Strict order"})," - Step B must happen directly after Step A without any events in between."]}),Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Any order"})," - Steps can be completed in any sequence."]})]}),children:Object(e.jsx)(vs,{})}),Object(e.jsx)(xt.b,{label:"Conversion rate calculation",children:Object(e.jsx)(Ss,{})}),Object(e.jsx)(xt.b,{label:"Exclusion steps",info:Object(e.jsxs)(e.Fragment,{children:["Exclude ",i.plural," ",s.aggregation_group_type_index!=null?"that":"who"," completed the specified event between two specific steps. Note that these ",i.plural," will be"," ",Object(e.jsx)("b",{children:"completely excluded from the entire funnel"}),"."]}),children:Object(e.jsx)(_s,{})}),!!r&&Object(e.jsx)("div",{className:"mt-4",children:Object(e.jsx)(J.a,{status:"danger",onClick:()=>{d(c.A.total),l({funnel_order_type:c.bb.ORDERED,exclusions:[]})},children:"Reset advanced options"})})]})}try{_t.displayName="FunnelsAdvanced",_t.__docgenInfo={description:"",displayName:"FunnelsAdvanced",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"]={docgenInfo:_t.__docgenInfo,name:"FunnelsAdvanced",path:"frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"})}catch(n){}var Zt=t("./frontend/src/lib/components/PropertyFilters/propertyFilterLogic.ts"),Zs=t("./frontend/src/scenes/actions/Actions.scss"),Es=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function St(n){let{propertyFilters:s,onChange:a,pageKey:i,taxonomicGroupTypes:r,wildcardOptions:l}=n;const d={propertyFilters:s,onChange:a,pageKey:i},{filtersWithNew:m}=Object(o.useValues)(Object(Zt.a)(d)),{setFilter:u,remove:p,setFilters:f}=Object(o.useActions)(Object(Zt.a)(d));return Object(I.useEffect)(()=>{s&&!Object(V.sb)(s,m)&&f([...s,{}])},[s]),Object(e.jsx)(o.BindLogic,{logic:Zt.a,props:d,children:m==null?void 0:m.map((O,C)=>Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(Ye,{pathItem:O.value,onChange:M=>u(C,{key:M,value:M,type:c.N.Event}),index:C,taxonomicGroupTypes:r,wildcardOptions:l,children:O.value?Object(e.jsx)(Es.a,{item:O,onClose:()=>{p(C)},children:O.value.toString()}):Object(e.jsx)(Q.LemonButton,{className:"new-prop-filter","data-attr":"new-prop-filter-"+i,type:"secondary",icon:Object(e.jsx)(oe.IconPlusMini,{color:"var(--primary)"}),children:"Add exclusion"})})},C))})}try{St.displayName="PathItemFilters",St.__docgenInfo={description:"",displayName:"PathItemFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},propertyFilters:{defaultValue:null,description:"",name:"propertyFilters",required:!1,type:{name:"AnyPropertyFilter[] | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(filters: AnyPropertyFilter[]) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!0,type:{name:"TaxonomicFilterGroupType[]"}},wildcardOptions:{defaultValue:null,description:"",name:"wildcardOptions",required:!1,type:{name:"SimpleOption[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/PathItemFilters.tsx#PathItemFilters"]={docgenInfo:St.__docgenInfo,name:"PathItemFilters",path:"frontend/src/lib/components/PropertyFilters/PathItemFilters.tsx#PathItemFilters"})}catch(n){}function Et(n){let{insightProps:s}=n;const{filter:a,wildcards:i}=Object(o.useValues)(Object(ue.b)(s)),{updateExclusions:r}=Object(o.useActions)(Object(ue.b)(s)),l=a.include_event_types?[...a.include_event_types.map(d=>d===c.J.Screen?z.a.Screens:d===c.J.CustomEvent?z.a.CustomEvents:z.a.PageviewUrls),z.a.Wildcards]:[z.a.Wildcards];return Object(e.jsx)(St,{taxonomicGroupTypes:l,pageKey:"exclusion",propertyFilters:a.exclude_events&&a.exclude_events.map(d=>({key:d,value:d,operator:void 0,type:c.N.Event})),onChange:d=>{const m=d.length>0?d.map(u=>u.value):d;r(m)},wildcardOptions:i})}try{Et.displayName="PathsExclusions",Et.__docgenInfo={description:"",displayName:"PathsExclusions",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsExclusions.tsx#PathsExclusions"]={docgenInfo:Et.__docgenInfo,name:"PathsExclusions",path:"frontend/src/scenes/insights/EditorFilters/PathsExclusions.tsx#PathsExclusions"})}catch(n){}var Ps=t("./frontend/src/scenes/insights/utils/cleanFilters.ts"),ea=t("./frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.scss"),Fs=t("./frontend/src/lib/components/LemonBadge/LemonBadge.tsx");function Pt(n){let{editorFilterGroup:s,insight:a,insightProps:i}=n;const{title:r,editorFilters:l,count:d,defaultExpanded:m=!0}=s,[u,p]=Object(I.useState)(m),{featureFlags:f}=Object(o.useValues)($.a),O=f[T.i.INSIGHT_EDITOR_PANELS];return Object(e.jsxs)("div",{className:Object(Ge.default)("EditorFilterGroup",{"EditorFilterGroup--editorpanels":O}),children:[r&&Object(e.jsx)("div",{className:"EditorFilterGroup__title",children:Object(e.jsx)(J.a,{status:"stealth",fullWidth:!0,onClick:()=>p(!u),sideIcon:u?Object(e.jsx)(oe.IconUnfoldLess,{}):Object(e.jsx)(oe.IconUnfoldMore,{}),title:u?"Show less":"Show more","data-attr":"editor-filter-group-collapse-"+Object(V.Eb)(r),children:Object(e.jsxs)("div",{className:"flex items-center space-x-2 font-semibold",children:[Object(e.jsx)("span",{children:r}),Object(e.jsx)(Fs.a.Number,{count:d||0})]})})}),!O||u?Object(e.jsx)("div",{className:"EditorFilterGroup__content",children:l.map(C=>{var M,j,q;let{label:S,tooltip:R,showOptional:H,key:U,valueSelector:ee,component:w}=C;const se=typeof S=="function"||w?{insight:a,insightProps:i,filters:(M=a.filters)!==null&&M!==void 0?M:Object(Ps.a)({}),value:(j=ee?ee(a):a==null||(q=a.filters)===null||q===void 0?void 0:q[U])!==null&&j!==void 0?j:null}:null;return Object(e.jsx)("div",{children:Object(e.jsx)(xt.b,{label:typeof S=="function"?Object(e.jsx)(S,Y({},se)):S,info:R,showOptional:H,children:w?Object(e.jsx)(w,Y({},se)):null})},U)})}):null]},r)}try{Pt.displayName="EditorFilterGroup",Pt.__docgenInfo={description:"",displayName:"EditorFilterGroup",props:{editorFilterGroup:{defaultValue:null,description:"",name:"editorFilterGroup",required:!0,type:{name:"InsightEditorFilterGroup<InsightEditorFilter<EditorFilterProps>>"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"]={docgenInfo:Pt.__docgenInfo,name:"EditorFilterGroup",path:"frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"})}catch(n){}var Cs=t("./frontend/src/lib/components/PayCard/PayCard.tsx");function Ft(n){let{}=n;return Object(e.jsx)(Cs.a,{identifier:c.e.PATHS_ADVANCED,title:"Get a deeper understanding of your users",caption:"Advanced features such as interconnection with funnels, grouping & wildcarding and exclusions can help you gain deeper insights.",docsLink:"https://posthog.com/docs/user-guides/paths",dismissable:!1})}try{Ft.displayName="PathsAdvancedPaywall",Ft.__docgenInfo={description:"",displayName:"PathsAdvancedPaywall",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsAdvancedPaywall.tsx#PathsAdvancedPaywall"]={docgenInfo:Ft.__docgenInfo,name:"PathsAdvancedPaywall",path:"frontend/src/scenes/insights/EditorFilters/PathsAdvancedPaywall.tsx#PathsAdvancedPaywall"})}catch(n){}var Ts=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),As=t("./frontend/src/scenes/saved-insights/SavedInsights.tsx");function Ct(n){let{value:s}=n;const{setActiveView:a}=Object(o.useActions)(N.c);return Object(e.jsx)(Q.LemonSelect,{options:As.INSIGHT_TYPE_OPTIONS,value:s,onChange:i=>{i&&a(i)},fullWidth:!0,"data-attr":"insight-type"})}try{Ct.displayName="InsightTypeSelector",Ct.__docgenInfo={description:"",displayName:"InsightTypeSelector",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"]={docgenInfo:Ct.__docgenInfo,name:"InsightTypeSelector",path:"frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"})}catch(n){}var Is=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss"),Sn=t.n(Is),en={};en.insert="head",en.singleton=!1;var ta=A()(Sn.a,en),na=Sn.a.locals||{};function Tt(n){let{insightProps:s}=n;const{setFilters:a}=Object(o.useActions)(Object(X.a)(s)),{filters:i,breakdownAttributionStepOptions:r}=Object(o.useValues)(Object(X.a)(s));return Object(e.jsx)(Q.LemonSelect,{value:i.breakdown_attribution_type||c.j.FirstTouch,placeholder:"Attribution",options:[{value:c.j.FirstTouch,label:"First touchpoint"},{value:c.j.LastTouch,label:"Last touchpoint"},{value:c.j.AllSteps,label:"All steps"},i.funnel_order_type===c.bb.UNORDERED?{value:c.j.Step,label:"Any step"}:{value:c.j.Step,label:"Specific step",element:Object(e.jsx)(Q.LemonSelect,{className:"ml-2",onChange:l=>{l!==null&&a({breakdown_attribution_type:c.j.Step,breakdown_attribution_value:l})},placeholder:`Step ${i.breakdown_attribution_value?i.breakdown_attribution_value+1:1}`,options:r})}],onChange:l=>{l&&a({breakdown_attribution_type:l,breakdown_attribution_value:i.breakdown_attribution_value||0})},dropdownMaxContentWidth:!0,"data-attr":"breakdown-attributions"})}try{Tt.displayName="Attribution",Tt.__docgenInfo={description:"",displayName:"Attribution",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"]={docgenInfo:Tt.__docgenInfo,name:"Attribution",path:"frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"})}catch(n){}function At(n){var s,a,i;let{insightProps:r,showing:l}=n;const{user:d}=Object(o.useValues)(Oe.a),m=(d==null||(s=d.organization)===null||s===void 0?void 0:s.available_features)||[],u=Object(N.c)(r),{filters:p,insight:f,filterPropertiesCount:O}=Object(o.useValues)(u),{preflight:C}=Object(o.useValues)(Ts.a),{advancedOptionsUsedCount:M}=Object(o.useValues)(Object(X.a)(r)),{featureFlags:j}=Object(o.useValues)($.a),q=j[T.i.INSIGHT_EDITOR_PANELS],S=Object(k.j)(p),R=Object(k.f)(p),H=Object(k.i)(p),U=Object(k.h)(p),ee=Object(k.g)(p),w=Object(k.e)(p),se=S||R||H,Re=S&&!T.n.includes(p.display||c.k.ActionsLineGraph)||U&&j[T.i.RETENTION_BREAKDOWN]&&p.display!==c.k.ActionsLineGraph||w&&p.funnel_viz_type===c.B.Steps,nn=S||H||U||ee||w,qe=m.includes(c.e.PATHS_ADVANCED),sn=w&&p.funnel_viz_type===c.B.Steps,Lt=M+(S&&p.formula?1:0),an=!!Lt,ke=[{title:"General",editorFilters:Pe([q?{key:"insight",label:"Type",component:Ct}:void 0,U&&{key:"retention-summary",label:"Retention Summary",component:pt},...ee?Pe([{key:"event-types",label:"Event Types",component:mt},qe&&{key:"wildcard-groups",label:"Wildcard Groups",showOptional:!0,component:ht,tooltip:Object(e.jsxs)(e.Fragment,{children:["Use wildcard matching to group events by unique values in path item names. Use an asterisk (*) in place of unique values. For example, instead of /merchant/1234/payment, replace the unique value with an asterisk /merchant/*/payment. ",Object(e.jsx)("b",{children:"Use a comma to separate multiple wildcards."})]})},{key:"start-target",label:"Starts at",component:gt},qe&&{key:"ends-target",label:"Ends at",component:ft}]):[],...w?Pe([{key:"query-steps",component:yt}]):[]])},{title:"Series",editorFilters:Pe([se&&{key:"series",label:S?it:void 0,component:at},S?{key:"formula",label:lt,component:rt}:null])},{title:"Filters",count:O,editorFilters:Pe([R?{key:"properties",label:q?void 0:"Filters",position:"right",component:ut}:null,R?{key:"toggles",label:"Lifecycle Toggles",position:"right",component:ct}:null,nn?{key:"properties",label:q?void 0:"Filters",position:"right",component:ot}:null])},{title:"Breakdown",count:((a=p.breakdowns)===null||a===void 0?void 0:a.length)||(p.breakdown?1:0),position:"right",editorFilters:Pe([Re?{key:"breakdown",label:"Breakdown by",position:"right",tooltip:Object(e.jsx)(e.Fragment,{children:"Use breakdown to see the aggregation (total volume, active users, etc.) for each value of that property. For example, breaking down by Current URL with total volume will give you the event volume for each URL your users have visited."}),component:dt}:null,sn?{key:"attribution",label:"Attribution type",position:"right",tooltip:Object(e.jsxs)("div",{children:["Attribution type determines which property value to use for the entire funnel.",Object(e.jsxs)("ul",{className:"list-disc pl-4",children:[Object(e.jsx)("li",{children:"First step: the first property value seen from all steps is chosen."}),Object(e.jsx)("li",{children:"Last step: last property value seen from all steps is chosen."}),Object(e.jsx)("li",{children:"Specific step: the property value seen at that specific step is chosen."}),Object(e.jsx)("li",{children:"All steps: the property value must be seen in all steps."}),Object(e.jsx)("li",{children:"Any step: the property value must be seen on at least one step of the funnel."})]})]}),component:Tt}:null])},{title:"Exclusions",position:"right",editorFilters:Pe([ee&&{key:"paths-exclusions",label:"Exclusions",position:"right",tooltip:Object(e.jsx)(e.Fragment,{children:"Exclude events from Paths visualisation. You can use wildcard groups in exclusions as well."}),component:Et}])},{title:"Advanced Options",position:"left",defaultExpanded:an,count:Lt,editorFilters:Pe([ee&&(qe?{key:"paths-advanced",component:jt}:C!=null&&(i=C.instance_preferences)!==null&&i!==void 0&&i.disable_paid_fs?void 0:{key:"paths-paywall",component:Ft}),w&&{key:"funnels-advanced",component:_t}])}].filter(Fe=>Fe.editorFilters.length>0);let wt=[];if(!q){const Fe=ke.reduce((He,Qe)=>He.concat(Qe.editorFilters.filter(Je=>Je.position!=="right")),[]),Rt=ke.reduce((He,Qe)=>He.concat(Qe.editorFilters.filter(Je=>Je.position==="right")),[]);wt=[{title:"Left",editorFilters:Fe},{title:"right",editorFilters:Rt}]}return Object(e.jsx)(zn.a,{in:l,timeout:250,classNames:"anim-",mountOnEnter:!0,unmountOnExit:!0,children:Object(e.jsx)("div",{className:Object(Ge.default)("EditorFiltersWrapper",{"EditorFiltersWrapper--editorpanels":q,"EditorFiltersWrapper--singlecolumn":q||w}),children:Object(e.jsx)("div",{className:"EditorFilters",children:(q||w?ke:wt).map(Fe=>Object(e.jsx)(Pt,{editorFilterGroup:Fe,insight:f,insightProps:r},Fe.title))})})})}function Pe(n){return n.filter(s=>!!s)}try{At.displayName="EditorFilters",At.__docgenInfo={description:"",displayName:"EditorFilters",props:{insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},showing:{defaultValue:null,description:"",name:"showing",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"]={docgenInfo:At.__docgenInfo,name:"EditorFilters",path:"frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"})}catch(n){}var Ls=t("./frontend/src/lib/components/LemonButton/More.tsx"),tn=t("./frontend/src/lib/components/LemonDivider/index.ts"),ws=t("./frontend/src/scenes/saved-insights/savedInsightsLogic.ts"),En=t("./frontend/src/lib/components/Subscriptions/SubscriptionsModal.tsx"),Rs=t("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),Ds=t("./frontend/src/lib/components/Sharing/SharingModal.tsx"),Ns=t("./frontend/src/lib/components/ExportButton/ExportButton.tsx"),Vs=t("./frontend/src/models/tagsModel.ts"),Ms=t("./frontend/src/queries/Query/Query.tsx");function It(n){var s,a,i;let{insightId:r}=n;const{insightMode:l,subscriptionId:d}=Object(o.useValues)(g.a),{setInsightMode:m}=Object(o.useActions)(g.a),u=Object(N.c)({dashboardItemId:r||"new"}),{insightProps:p,insightLoading:f,filtersKnown:O,filters:C,canEditInsight:M,insight:j,insightChanged:q,tagLoading:S,insightSaving:R,exporterResourceParams:H,isUsingDataExploration:U,erroredQueryId:ee}=Object(o.useValues)(u),{saveInsight:w,setInsightMetadata:se,saveAs:Re,reportInsightViewedForRecentInsights:nn,abortAnyRunningQuery:qe,loadResults:sn}=Object(o.useActions)(u),{duplicateInsight:Lt,loadInsights:an}=Object(o.useActions)(ws.b),{query:ke}=Object(o.useValues)(Object(y.a)(p)),{setQuery:wt}=Object(o.useActions)(Object(y.a)(p));Object(o.useMountedLogic)(x(p));const{hasAvailableFeature:Fe}=Object(o.useValues)(Oe.a),{aggregationLabel:Rt}=Object(o.useValues)(Me.a),{cohortsById:He}=Object(o.useValues)(Gn.a),{mathDefinitions:Qe}=Object(o.useValues)(Kn.g),{featureFlags:Je}=Object(o.useValues)($.a),{tags:Ws}=Object(o.useValues)(Vs.a),{currentTeamId:Gs}=Object(o.useValues)(Gt.a),{push:Dt}=Object(o.useActions)(_e.router);Object(I.useEffect)(()=>{nn()},[r]),Object(I.useEffect)(()=>(ee&&sn(),()=>{qe()}),[]);const on=Je[T.i.INSIGHT_EDITOR_PANELS];if(r!=="new"&&f&&!O)return Object(e.jsx)(pn,{});const Ks=Object(e.jsxs)("div",{className:"insights-page",children:[r!=="new"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(En.b,{isOpen:l===c.G.Subscriptions,closeModal:()=>Dt(fe.a.insightView(j.short_id)),insightShortId:r,subscriptionId:d}),Object(e.jsx)(Ds.a,{isOpen:l===c.G.Sharing,closeModal:()=>Dt(fe.a.insightView(j.short_id)),insightShortId:r,insight:j})]}),Object(e.jsx)(Wn.a,{title:Object(e.jsx)(dn.a,{name:"name",value:j.name||"",placeholder:U?Object(Ut.k)(ke.source,Rt):Object(Ut.j)(C,Rt,He,Qe),onSave:Nt=>se({name:Nt}),saveOnBlur:!0,maxLength:400,mode:M?void 0:"view","data-attr":"insight-name",notice:M?void 0:{icon:Object(e.jsx)(oe.IconLock,{}),tooltip:"You don't have edit permissions on any of the dashboards this insight belongs to. Ask a dashboard collaborator with edit access to add you."}}),buttons:Object(e.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[l!==c.G.Edit&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Ls.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(J.a,{status:"stealth",onClick:()=>Lt(j,!0),fullWidth:!0,"data-attr":"duplicate-insight-from-insight-view",children:"Duplicate"}),Object(e.jsx)(J.a,{status:"stealth",onClick:()=>se({favorited:!j.favorited}),fullWidth:!0,children:j.favorited?"Remove from favorites":"Add to favorites"}),Object(e.jsx)(tn.a,{}),Object(e.jsx)(J.a,{status:"stealth",onClick:()=>j.short_id?Dt(fe.a.insightSharing(j.short_id)):null,fullWidth:!0,children:"Share or embed"}),j.short_id&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(En.a,{insightShortId:j.short_id}),H?Object(e.jsx)(Ns.a,{fullWidth:!0,items:[{export_format:c.t.PNG,insight:j.id},{export_format:c.t.CSV,export_context:H}]}):null,Object(e.jsx)(tn.a,{})]}),Object(e.jsx)(J.a,{status:"danger",onClick:()=>Object(V.x)({object:j,endpoint:`projects/${Gs}/insights`,callback:()=>{an(),Dt(fe.a.savedInsights())}}),fullWidth:!0,children:"Delete insight"})]})}),Object(e.jsx)(tn.a,{vertical:!0})]}),l===c.G.Edit&&j.saved&&Object(e.jsx)(J.a,{type:"secondary",onClick:()=>m(c.G.View,null),children:"Cancel"}),l!==c.G.Edit&&j.short_id&&Object(e.jsx)(nt,{insight:j,canEditInsight:M}),l!==c.G.Edit?M&&Object(e.jsx)(J.a,{type:"primary",onClick:()=>m(c.G.Edit,null),"data-attr":"insight-edit-button",children:"Edit"}):Object(e.jsx)(st,{saveAs:Re,saveInsight:w,isSaved:j.saved,addingToDashboard:!!((s=j.dashboards)!==null&&s!==void 0&&s.length)&&!j.id,insightSaving:R,insightChanged:q})]}),caption:Object(e.jsxs)(e.Fragment,{children:[!!(M||j.description)&&Object(e.jsx)(dn.a,{multiline:!0,name:"description",value:j.description||"",placeholder:"Description (optional)",onSave:Nt=>se({description:Nt}),saveOnBlur:!0,maxLength:400,mode:M?void 0:"view","data-attr":"insight-description",compactButtons:!0,paywall:!Fe(c.e.DASHBOARD_COLLABORATION)}),M?Object(e.jsx)(cn.a,{tags:(a=j.tags)!==null&&a!==void 0?a:[],onChange:(Nt,rn)=>se({tags:rn!=null?rn:[]}),saving:S,tagsAvailable:Ws,className:"insight-metadata-tags","data-attr":"insight-tags"}):(i=j.tags)!==null&&i!==void 0&&i.length?Object(e.jsx)(cn.a,{tags:j.tags,saving:S,className:"insight-metadata-tags","data-attr":"insight-tags",staticOnly:!0}):null,Object(e.jsx)(Rs.a,{at:j.last_modified_at,by:j.last_modified_by,className:"mt-2"})]})}),U?Object(e.jsx)(Ms.a,{query:ke,setQuery:wt}):Object(e.jsxs)(e.Fragment,{children:[!on&&l===c.G.Edit&&Object(e.jsx)(Bt.a,{}),Object(e.jsxs)("div",{className:Object(Ge.default)("insight-wrapper",{"insight-wrapper--editorpanels":on,"insight-wrapper--singlecolumn":!on&&C.insight===c.F.FUNNELS}),children:[Object(e.jsx)(At,{insightProps:p,showing:l===c.G.Edit}),Object(e.jsx)("div",{className:"insights-container","data-attr":"insight-view",children:Object(e.jsx)(Vn.a,{insightMode:l})})]})]}),l!==c.G.View?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(We,{}),Object(e.jsx)(Bn,{})]}):null]});return Object(e.jsx)(o.BindLogic,{logic:N.c,props:p,children:Ks})}try{It.displayName="Insight",It.__docgenInfo={description:"",displayName:"Insight",props:{insightId:{defaultValue:null,description:"",name:"insightId",required:!0,type:{name:'"new" | InsightShortId'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/Insight.tsx#Insight"]={docgenInfo:It.__docgenInfo,name:"Insight",path:"frontend/src/scenes/insights/Insight.tsx#Insight"})}catch(n){}var ks=t("./frontend/src/lib/components/NotFound/index.tsx");function Pn(){var n,s;const{insightId:a,insight:i,insightCache:r}=Object(o.useValues)(g.a);return a==="new"||a&&i!==null&&i!==void 0&&i.id&&i!==null&&i!==void 0&&i.short_id?Object(e.jsx)(It,{insightId:a}):r!=null&&(n=r.logic)!==null&&n!==void 0&&(s=n.values)!==null&&s!==void 0&&s.insightLoading?Object(e.jsx)(pn,{}):Object(e.jsx)(ks.a,{object:"insight"})}const Bs={component:Pn,logic:g.a}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CommentOutlined.js":function(v,h,t){"use strict";var g=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},A=D,L=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(W,I){return o.createElement(L.a,Object(g.a)(Object(g.a)({},W),{},{ref:I,icon:A}))};b.displayName="CommentOutlined";var _=h.a=o.forwardRef(b)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FallOutlined.js":function(v,h,t){"use strict";var g=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},A=D,L=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(W,I){return o.createElement(L.a,Object(g.a)(Object(g.a)({},W),{},{ref:I,icon:A}))};b.displayName="FallOutlined";var _=h.a=o.forwardRef(b)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LineChartOutlined.js":function(v,h,t){"use strict";var g=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"},A=D,L=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(W,I){return o.createElement(L.a,Object(g.a)(Object(g.a)({},W),{},{ref:I,icon:A}))};b.displayName="LineChartOutlined";var _=h.a=o.forwardRef(b)},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js":function(v,h,t){"use strict";var g=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"},A=D,L=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(W,I){return o.createElement(L.a,Object(g.a)(Object(g.a)({},W),{},{ref:I,icon:A}))};b.displayName="RiseOutlined";var _=h.a=o.forwardRef(b)},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js":function(v,h,t){"use strict";var g=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var D=g(t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),A=g(t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),L=Z(t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),b=g(t("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),_=g(t("./node_modules/.pnpm/rc-checkbox@2.3.2_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-checkbox/es/index.js")),B=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js"),W=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js"),I=g(t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/_util/devWarning.js"));function N(F){if(typeof WeakMap!="function")return null;var E=new WeakMap,x=new WeakMap;return(N=function(c){return c?x:E})(F)}function Z(F,E){if(!E&&F&&F.__esModule)return F;if(F===null||o(F)!=="object"&&typeof F!="function")return{default:F};var x=N(E);if(x&&x.has(F))return x.get(F);var y={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in F)if(P!=="default"&&Object.prototype.hasOwnProperty.call(F,P)){var T=c?Object.getOwnPropertyDescriptor(F,P):null;T&&(T.get||T.set)?Object.defineProperty(y,P,T):y[P]=F[P]}return y.default=F,x&&x.set(F,y),y}var ce=function(F,E){var x={};for(var y in F)Object.prototype.hasOwnProperty.call(F,y)&&E.indexOf(y)<0&&(x[y]=F[y]);if(F!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,y=Object.getOwnPropertySymbols(F);c<y.length;c++)E.indexOf(y[c])<0&&Object.prototype.propertyIsEnumerable.call(F,y[c])&&(x[y[c]]=F[y[c]]);return x},le=function(E,x){var y,c=E.prefixCls,P=E.className,T=E.children,$=E.indeterminate,te=$===void 0?!1:$,Ce=E.style,Te=E.onMouseEnter,Ae=E.onMouseLeave,pe=E.skipGroup,ne=pe===void 0?!1:pe,G=ce(E,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),je=L.useContext(W.ConfigContext),Ne=je.getPrefixCls,Ie=je.direction,K=L.useContext(B.GroupContext),ve=L.useRef(G.value);L.useEffect(function(){K==null||K.registerValue(G.value),(0,I.default)("checked"in G||!!K||!("value"in G),"Checkbox","`value` is not a valid prop, do you mean `checked`?")},[]),L.useEffect(function(){if(!ne)return G.value!==ve.current&&(K==null||K.cancelValue(ve.current),K==null||K.registerValue(G.value)),function(){return K==null?void 0:K.cancelValue(G.value)}},[G.value]);var ae=Ne("checkbox",c),me=(0,A.default)({},G);K&&!ne&&(me.onChange=function(){G.onChange&&G.onChange.apply(G,arguments),K.toggleOption&&K.toggleOption({label:T,value:G.value})},me.name=K.name,me.checked=K.value.indexOf(G.value)!==-1,me.disabled=G.disabled||K.disabled);var Oe=(0,b.default)((y={},(0,D.default)(y,"".concat(ae,"-wrapper"),!0),(0,D.default)(y,"".concat(ae,"-rtl"),Ie==="rtl"),(0,D.default)(y,"".concat(ae,"-wrapper-checked"),me.checked),(0,D.default)(y,"".concat(ae,"-wrapper-disabled"),me.disabled),y),P),Ve=(0,b.default)((0,D.default)({},"".concat(ae,"-indeterminate"),te));return L.createElement("label",{className:Oe,style:Ce,onMouseEnter:Te,onMouseLeave:Ae},L.createElement(_.default,(0,A.default)({},me,{prefixCls:ae,className:Ve,ref:x})),T!==void 0&&L.createElement("span",null,T))},V=L.forwardRef(le);V.displayName="Checkbox";var k=V;h.default=k},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js":function(v,h,t){"use strict";var g=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(h,"__esModule",{value:!0}),h.default=h.GroupContext=void 0;var D=g(t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),A=g(t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),L=g(t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/toConsumableArray.js")),b=g(t("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/slicedToArray.js")),_=ce(t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),B=g(t("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),W=g(t("./node_modules/.pnpm/rc-util@5.24.4_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-util/lib/omit.js")),I=g(t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js")),N=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js");function Z(x){if(typeof WeakMap!="function")return null;var y=new WeakMap,c=new WeakMap;return(Z=function(T){return T?c:y})(x)}function ce(x,y){if(!y&&x&&x.__esModule)return x;if(x===null||o(x)!=="object"&&typeof x!="function")return{default:x};var c=Z(y);if(c&&c.has(x))return c.get(x);var P={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in x)if($!=="default"&&Object.prototype.hasOwnProperty.call(x,$)){var te=T?Object.getOwnPropertyDescriptor(x,$):null;te&&(te.get||te.set)?Object.defineProperty(P,$,te):P[$]=x[$]}return P.default=x,c&&c.set(x,P),P}var le=function(x,y){var c={};for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&y.indexOf(P)<0&&(c[P]=x[P]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,P=Object.getOwnPropertySymbols(x);T<P.length;T++)y.indexOf(P[T])<0&&Object.prototype.propertyIsEnumerable.call(x,P[T])&&(c[P[T]]=x[P[T]]);return c},V=_.createContext(null);h.GroupContext=V;var k=function(y,c){var P=y.defaultValue,T=y.children,$=y.options,te=$===void 0?[]:$,Ce=y.prefixCls,Te=y.className,Ae=y.style,pe=y.onChange,ne=le(y,["defaultValue","children","options","prefixCls","className","style","onChange"]),G=_.useContext(N.ConfigContext),je=G.getPrefixCls,Ne=G.direction,Ie=_.useState(ne.value||P||[]),K=(0,b.default)(Ie,2),ve=K[0],ae=K[1],me=_.useState([]),Oe=(0,b.default)(me,2),Ve=Oe[0],Q=Oe[1];_.useEffect(function(){"value"in ne&&ae(ne.value||[])},[ne.value]);var e=function(){return te.map(function(de){return typeof de=="string"?{label:de,value:de}:de})},Mt=function(de){Q(function(xe){return xe.filter(function(ge){return ge!==de})})},kt=function(de){Q(function(xe){return[].concat((0,L.default)(xe),[de])})},Xe=function(de){var xe=ve.indexOf(de.value),ge=(0,L.default)(ve);xe===-1?ge.push(de.value):ge.splice(xe,1),"value"in ne||ae(ge);var _e=e();pe==null||pe(ge.filter(function(fe){return Ve.indexOf(fe)!==-1}).sort(function(fe,Ze){var Wt=_e.findIndex(function(Le){return Le.value===fe}),et=_e.findIndex(function(Le){return Le.value===Ze});return Wt-et}))},Be=je("checkbox",Ce),We="".concat(Be,"-group"),Bt=(0,W.default)(ne,["value","disabled"]);te&&te.length>0&&(T=e().map(function(ie){return _.createElement(I.default,{prefixCls:Be,key:ie.value.toString(),disabled:"disabled"in ie?ie.disabled:ne.disabled,value:ie.value,checked:ve.indexOf(ie.value)!==-1,onChange:ie.onChange,className:"".concat(We,"-item"),style:ie.style},ie.label)}));var ye={toggleOption:Xe,value:ve,disabled:ne.disabled,name:ne.name,registerValue:kt,cancelValue:Mt},he=(0,B.default)(We,(0,A.default)({},"".concat(We,"-rtl"),Ne==="rtl"),Te);return _.createElement("div",(0,D.default)({className:he,style:Ae},Bt,{ref:c}),_.createElement(V.Provider,{value:ye},T))},F=_.forwardRef(k),E=_.memo(F);h.default=E},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/table/Column.js":function(v,h,t){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;function g(D){return null}var o=g;h.default=o},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss":function(v,h,t){var g=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=g(!1),h.push([v.i,"",""]),v.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss":function(v,h,t){var g=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=g(!1),h.push([v.i,".dropdown-selector{padding:.5rem;border:1px solid var(--border-light);border-radius:var(--radius);display:flex;align-items:center;cursor:pointer}.dropdown-selector.disabled{color:var(--muted);cursor:not-allowed}.dropdown-selector.compact{padding:.333rem .5rem}.dropdown-selector .dropdown-arrow{display:flex;align-items:center;padding-left:4px;font-size:1.2em;color:var(--muted-alt)}",""]),v.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/experimental/NPSPrompt.scss":function(v,h,t){var g=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=g(!1),h.push([v.i,".nps-prompt{background-color:var(--default);border-radius:var(--radius);padding:6px 1rem 1rem;color:var(--light);position:fixed;bottom:16px;right:16px;width:calc(100% - 32px);max-width:360px;z-index:var(--z-nps-overlay);font-size:.85rem;text-align:center;transition:transform 1s ease-in-out;transform:translateY(0)}.nps-prompt.hide{transform:translateY(150%)}.nps-prompt .prompt-title{font-size:1rem;font-weight:700;margin-bottom:1rem;max-width:90%;margin-left:auto;margin-right:auto;padding-top:10px}.nps-prompt .nps-dismiss{position:absolute;top:6px;right:6px;cursor:pointer}.nps-prompt .nps-header{display:flex;align-items:center;margin-bottom:.5rem}.nps-prompt .nps-progress{flex-grow:1;display:flex;justify-content:center}.nps-prompt .nps-progress .pg-item{width:12px;height:12px;border-radius:50%;background-color:var(--border);margin-right:.5rem}.nps-prompt .nps-progress .pg-item:last-of-type{margin-right:0}.nps-prompt .nps-progress .pg-item.completed{background-color:var(--success)}.nps-prompt .question{text-align:left;padding-bottom:.5rem}.nps-prompt .action-buttons{width:200px;margin:0 auto;padding-top:.5rem}.nps-prompt .action-buttons .ant-btn{margin-bottom:.5rem;width:100%}.nps-prompt .ant-btn:not(.ant-btn-link){background-color:var(--bg-depth);border:1px solid #000;color:var(--light)}.nps-prompt textarea{color:var(--light);background-color:var(--bg-depth);border-color:#000}.nps-prompt .ant-btn-link span{color:var(--light);text-decoration:underline!important}",""]),v.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss":function(v,h,t){var g=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=g(!1),h.push([v.i,".EditorFiltersWrapper{flex-shrink:0;border:1px solid var(--border);border-radius:var(--radius);padding:1rem;margin-bottom:1rem}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:1rem}@media screen and (min-width:768px){.EditorFiltersWrapper .EditorFilters{display:flex;gap:2rem}.EditorFiltersWrapper .EditorFilters .EditorFilterGroup{flex:1;width:50%}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:0}}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{margin-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{flex-direction:column;gap:0}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters .EditorFilterGroup{width:auto}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters>*+*{margin-top:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{border:none;padding:0}@media screen and (min-width:1200px){.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{--editor-panel-width:max(25vw,28rem)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{width:var(--editor-panel-width);display:block;padding-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter{width:0}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1))}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active{width:var(--editor-panel-width);transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active .EditorFilters{transform:translateX(0);transition:transform .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit{width:var(--editor-panel-width)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit .EditorFilters{transform:translateX(0)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active{width:0;transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1));transition:transform .25s}}",""]),v.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss":function(v,h,t){var g=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=g(!1),h.push([v.i,".LifecycleToggles{text-transform:uppercase}.LifecycleToggles div{font-size:12px;display:flex;justify-content:space-between;padding-bottom:4px;align-items:center}.LifecycleToggles .new .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-new);background-color:var(--lifecycle-new)}.LifecycleToggles .returning .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-returning);background-color:var(--lifecycle-returning)}.LifecycleToggles .resurrecting .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-resurrecting);background-color:var(--lifecycle-resurrecting)}.LifecycleToggles .dormant .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-dormant);background-color:var(--lifecycle-dormant)}",""]),v.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss":function(v,h,t){var g=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=g(!1),h.push([v.i,".insights-page .ant-card-bordered{border-radius:var(--radius);box-shadow:none;border:1px solid var(--border)}.insights-page h2{font-size:1.125rem;font-weight:600}.insights-page .top-bar,.insights-page .top-bar .ant-tabs,.insights-page .top-bar .ant-tabs-nav-list{width:100%}.insights-page .top-bar .ant-btn-loading-icon{display:none}.insights-page .top-bar .ant-tabs-tab{padding:0}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn,.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{padding-bottom:6px;color:inherit}.insights-page .insight-history-button{padding-right:0;padding-left:0;border-radius:0;border:0;border-bottom:2px solid transparent}.insights-page .insight-history-button.active{border-bottom:2px solid var(--primary)}.insights-page hr{margin:1rem 0}.insights-page .ant-tabs-tab .hotkey{margin-bottom:0;background-color:var(--primary-bg-hover)!important;border-color:var(--primary-bg-hover)!important}.insights-page .ant-tabs-tab .deprecated{color:var(--muted)}.insights-page .ant-tabs-tab .deprecated .hotkey{margin-bottom:0;background-color:var(--light)!important;border-color:var(--border)!important;color:var(--muted)}.insights-page .ant-tabs-tab.ant-tabs-tab-active .deprecated{color:var(--primary)}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .hotkey{background-color:var(--primary-bg-active)!important}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .deprecated .hotkey{background-color:var(--light)!important}.insights-page .insight-controls{overflow:visible;position:relative;margin-bottom:1rem}.insights-page .insight-controls .ant-card-body{padding:.8rem 1rem}.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{position:relative}@media screen and (min-width:1200px){.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{display:flex;overflow:hidden}.insights-page .insight-wrapper.insight-wrapper--editorpanels .insights-container,.insights-page .insight-wrapper.insight-wrapper--singlecolumn .insights-container{flex:1;overflow-x:auto}}.insights-page .insights-graph-container{background:#fff;margin-bottom:1rem}.insights-page .insights-graph-container .ant-card-head{border-bottom:1px solid var(--border);min-height:unset;background-color:var(--bg-light);padding-left:1rem;padding-right:1rem}.insights-page .insights-graph-container .ant-card-body,.insights-page .insights-graph-container .ant-card-head .ant-card-head-title{padding:0}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{height:min(90vh - 16rem,36rem);max-width:300px;width:-moz-fit-content;width:fit-content;padding:0 1rem 1rem 0;display:flex;align-items:center}.insights-page .insights-graph-container .LineGraph{width:calc(100% - 3rem);height:calc(100% - 3rem)}.insights-page .insight-title-container{display:flex;align-items:center}.insights-page .insight-title-container .insight-title-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.insights-page .advanced-options-dropdown{font-size:1.4em;color:var(--primary-alt)}.insights-page .advanced-options-dropdown.expanded{transform:rotateX(180deg)}.insights-page .funnel-advanced-options .funnel-exclusions-filter .mt:first-of-type{margin-top:.5rem}.insights-page .retention-date-picker{background-color:transparent;border:0}.insights-page .retention-date-picker input::-moz-placeholder{color:var(--default)}.insights-page .retention-date-picker input::placeholder{color:var(--default)}.insights-page .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.insight-metadata-tags{margin-top:.5rem}.insight-metadata-tags .ant-tag{margin-top:0}.trends-insights-container{position:relative;min-height:min(90vh - 16rem,36rem);display:flex;justify-content:center}.trends-insights-container .LineGraph{height:calc(100% - 1rem)!important}.funnel-insights-container{background-color:var(--funnel-canvas-background);border-radius:0 0 var(--radius) var(--radius)}.funnel-insights-container.non-empty-state{min-height:26rem;position:relative;margin-bottom:0}.funnel-insights-container .ant-table-wrapper{margin-top:0!important}.funnel-tab-btn-popover .ant-popover-inner-content{padding:4px 15px}.funnel-tab-btn-popover .ant-popover-inner-content button.ant-btn-link{padding:0;margin:0 0 0 4px}.significance-highlight{display:inline-flex;background:var(--primary);color:var(--bg-light)}.significance-highlight .LemonIcon{color:var(--bg-light)}",""]),v.exports=h}}]);
