(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(R,i,e){"use strict";e.r(i),e.d(i,"SessionsRecordings",function(){return ge}),e.d(i,"scene",function(){return ve});var j=e("./node_modules/react/index.js"),s=e.n(j),o=e("./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx"),M=e("./frontend/src/lib/components/PageHeader.tsx"),N=e("./frontend/src/scenes/teamLogic.tsx"),v=e("./node_modules/kea/lib/index.esm.js"),G=e("./frontend/src/scenes/urls.ts"),Y=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),z=e("./frontend/src/lib/logic/featureFlagLogic.ts"),$=e("./frontend/src/lib/constants.tsx"),J=e("./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx"),E=e("./node_modules/antd/es/row/index.js"),O=e("./node_modules/antd/es/typography/index.js"),W=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),ee=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),Q=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),C=e("./frontend/src/types.ts"),U=e("./node_modules/antd/es/space/index.js"),se=e("./node_modules/antd/es/button/index.js"),ne=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),B=e("./frontend/src/lib/components/Popup/Popup.tsx"),X=e("./node_modules/core-js/modules/es.array.slice.js"),x=e("./node_modules/core-js/modules/es.array.iterator.js"),V=e("./node_modules/core-js/modules/es.object.to-string.js"),te=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),I=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),P;(function(t){t.SECONDS="seconds",t.MINUTES="minutes",t.HOURS="hours"})(P||(P={}));var K=Object(v.kea)({path:function(n){return["scenes","session-recordings","DurationFilterLogic",n]},key:function(n){return n.pageKey||"global"},props:{},actions:{setValue:function(n){return{value:n}},setIsOpen:function(n){return{isOpen:n}},setOperator:function(n){return{operator:n}}},reducers:function(n){var a,r,c=n.props;return{operator:[c==null||(a=c.initialFilter)===null||a===void 0?void 0:a.operator,{setOperator:function(f,d){var p=d.operator;return p}}],value:[c==null||(r=c.initialFilter)===null||r===void 0?void 0:r.value,{setValue:function(f,d){var p=d.value;return p}}],isOpen:[!1,{setIsOpen:function(f,d){var p=d.isOpen;return p}}]}},selectors:{durationString:[function(t){return[t.operator,t.value]},function(t,n){var a="";t===C.K.GreaterThan?a+="> ":a+="< ";var r=Object(I.b)(n||0);return a+=r.timeValue||0,r.timeValue===1?a+=" "+r.unit.slice(0,-1):a+=" "+r.unit,a}]},listeners:function(n){var a=n.props,r=n.values,c=function(f){var d=f.value,p=f.operator;a.onChange({operator:p||r.operator,value:d||r.value||0,type:"recording",key:"duration"})};return{setValue:function(f){var d=f.value;return c({value:d})},setOperator:function(f){var d=f.operator;return c({operator:d})}}}});function u(t){var n=t.initialFilter,a=t.onChange,r=t.pageKey,c=K({initialFilter:n,onChange:a,pageKey:r}),l=Object(v.useActions)(c),f=l.setValue,d=l.setIsOpen,p=l.setOperator,D=Object(v.useValues)(c),de=D.durationString,re=D.value,A=D.operator,ce=D.isOpen;return s.a.createElement(B.a,{visible:ce,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return d(!1)},overlay:s.a.createElement(E.a,null,s.a.createElement(U.b,null,s.a.createElement(ne.a,{operator:A,operators:[C.K.GreaterThan,C.K.LessThan],onChange:function(ue){p(ue)}}),s.a.createElement(I.a,{onChange:f,initialValue:re||0})))},s.a.createElement(se.a,{onClick:function(){d(!0)}},de))}try{u.displayName="DurationFilter",u.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"]={docgenInfo:u.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"})}catch(t){}var L=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Z=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),b=e("./frontend/src/lib/components/Tooltip.tsx"),g=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),F=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),w=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),k=e.n(w),q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingFilters.scss"),H=e.n(q),T={};T.insert="head",T.singleton=!1;var m=k()(H.a,T),h=H.a.locals||{},y=e("./frontend/src/lib/components/icons.tsx"),le=e("./frontend/src/lib/components/LemonButton/index.ts"),me=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function oe(t){var n=t.personUUID,a=t.isPersonPage,r=a===void 0?!1:a,c=Object(Y.b)({personUUID:n}),l=Object(v.useValues)(c),f=l.entityFilters,d=l.propertyFilters,p=l.fromDate,D=l.toDate,de=l.durationFilter,re=l.showFilters,A=Object(v.useActions)(c),ce=A.setEntityFilters,ie=A.setPropertyFilters,ue=A.setDateRange,ye=A.setDurationFilter,Se=A.enableFilter,ae=A.reportRecordingsListFilterAdded;return s.a.createElement("div",{className:"SessionRecordingFilters"},s.a.createElement(E.a,{className:"filter-row"},s.a.createElement("div",{className:"filter-container",style:{display:re?void 0:"none"}},s.a.createElement("div",{className:"space-y-2"},s.a.createElement(O.a.Text,{strong:!0},"Filter by events and actions ",s.a.createElement(b.a,{title:"Show recordings where all of the events or actions listed below happen."},s.a.createElement(W.a,{className:"info-icon"}))),s.a.createElement(Q.a,{bordered:!0,filters:f,setFilters:function(S){ae(L.e.EventAndAction),ce(S)},typeKey:r?"person-".concat(n):"session-recordings",mathAvailability:me.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[g.a.Actions,g.a.Events],propertiesTaxonomicGroupTypes:[g.a.EventProperties,g.a.EventFeatureFlags,g.a.Elements]})),!r&&s.a.createElement("div",{className:"mt-8 space-y-2"},s.a.createElement(O.a.Text,{strong:!0},"Filter by persons and cohorts ",s.a.createElement(b.a,{title:"Show recordings by persons who match the set criteria"},s.a.createElement(W.a,{className:"info-icon"}))),s.a.createElement(F.a,{pageKey:r?"person-".concat(n):"session-recordings",taxonomicGroupTypes:[g.a.PersonProperties,g.a.Cohorts],propertyFilters:d,onChange:function(S){ae(L.e.PersonAndCohort),ie(S)}}))),!re&&s.a.createElement(le.a,{type:"secondary",size:"small",icon:s.a.createElement(y.IconFilter,null),onClick:function(){if(Se(),r){var S=document.querySelectorAll(".entity-filter-row button");S.length>0&&S[0].click()}}},"Filter recordings"),s.a.createElement(E.a,{className:"time-filter-row"},s.a.createElement(E.a,{className:"time-filter"},s.a.createElement(Z.a,{makeLabel:function(S){return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee.a,null),s.a.createElement("span",null," ",S))},defaultValue:"Last 7 days",dateFrom:p!=null?p:void 0,dateTo:D!=null?D:void 0,onChange:function(S,Re){ae(L.e.DateRange),ue(S,Re)},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]})),s.a.createElement(E.a,{className:"time-filter"},s.a.createElement(O.a.Text,{className:"filter-label"},"Duration"),s.a.createElement(u,{onChange:function(S){ae(L.e.Duration),ye(S)},initialFilter:de,pageKey:r?"person-".concat(n):"session-recordings"})))))}try{oe.displayName="SessionRecordingsFilters",oe.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"]={docgenInfo:oe.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"})}catch(t){}var fe=e("./frontend/src/lib/components/AlertMessage/index.ts"),pe=e("./frontend/@posthog/lemon-ui/src/index.ts");function ge(){var t=Object(v.useValues)(N.a),n=t.currentTeam,a=Object(v.useValues)(z.a),r=a.featureFlags;return s.a.createElement("div",null,s.a.createElement(M.a,{title:s.a.createElement("div",null,"Recordings")}),n&&!(n!=null&&n.session_recording_opt_in)?s.a.createElement("div",{className:"mb-4"},s.a.createElement(fe.a,{type:"info"},"Session recordings are currently disabled for this project. To use this feature, please go to your ",s.a.createElement(pe.Link,{to:"".concat(G.a.projectSettings(),"#recordings")},"project settings")," and enable it.")):null,s.a.createElement(oe,null),r[$.h.SESSION_RECORDINGS_PLAYLIST]?s.a.createElement(J.a,{key:"global"}):s.a.createElement(o.a,{key:"global"}))}var ve={component:ge,logic:Y.b}},"./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx":function(R,i,e){"use strict";e.d(i,"a",function(){return x});var j=e("./node_modules/core-js/modules/es.array.concat.js"),s=e("./node_modules/react/index.js"),o=e.n(s),M=e("./node_modules/kea/lib/index.esm.js"),N=e("./frontend/src/lib/utils.tsx"),v=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),G=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Y=e("./frontend/src/lib/utils/eventUsageLogic.ts"),z=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),$=e.n(z),J=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss"),E=e.n(J),O={};O.insert="head",O.singleton=!1;var W=$()(E.a,O),ee=E.a.locals||{},Q=e("./frontend/src/lib/components/LemonTable/index.ts"),C=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),U=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),se=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),ne=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),B=e("./frontend/@posthog/lemon-ui/src/index.ts"),X=e("./frontend/src/lib/components/icons.tsx");function x(V){var te=V.personUUID,I=Object(v.b)({personUUID:te,isPlaylist:!0}),P=Object(M.useValues)(I),K=P.sessionRecordings,u=P.sessionRecordingsResponseLoading,L=P.hasNext,Z=P.hasPrev,b=P.activeSessionRecordingId,g=P.offset,F=Object(M.useActions)(I),w=F.openSessionPlayer,k=F.loadNext,q=F.loadPrev,H=[{title:"Recordings",render:function(m,h){return o.a.createElement("div",null,Object(G.b)(h.person,25),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement(C.b,{time:h.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})," \xB7 ",Object(N.n)(h.recording_duration))))}}];return o.a.createElement("div",{className:"SessionRecordingPlaylist","data-attr":"session-recordings-playlist"},o.a.createElement("div",{className:"SessionRecordingPlaylist__left-column mr-4"},o.a.createElement(Q.a,{dataSource:K,columns:H,loading:u,onRow:function(m){return{onClick:function(y){y.target.closest("a")||(console.log("clicked on row",m),w(m.id,Y.d.RecordingsList))}}},rowStatus:function(m){return b===m.id?"highlighted":null},rowClassName:"cursor-pointer","data-attr":"session-recording-table","data-tooltip":"session-recording-table",emptyState:"No matching recordings found"}),o.a.createElement("div",{className:"SessionRecordingPlaylist__pagination-control"},o.a.createElement("span",null,"".concat(g+1," - ").concat(g+(u?Object(v.a)(!0):K.length))),o.a.createElement(B.LemonButton,{icon:o.a.createElement(X.IconChevronLeft,null),status:"stealth",disabled:!Z,onClick:function(){q(),window.scrollTo(0,0)}}),o.a.createElement(B.LemonButton,{icon:o.a.createElement(X.IconChevronRight,null),status:"stealth",disabled:!L,onClick:function(){k(),window.scrollTo(0,0)}}))),o.a.createElement("div",{className:"SessionRecordingPlaylist__right-column"},b?o.a.createElement("div",{className:"border rounded"},o.a.createElement(U.b,{playerKey:"playlist",sessionRecordingId:b})):u?o.a.createElement("div",{className:"SessionRecordingPlaylist__loading"},o.a.createElement(ne.a,null)):o.a.createElement(se.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonHref:"https://posthog.com/docs/user-guides/recordings"})))}try{x.displayName="SessionRecordingsPlaylist",x.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:x.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(V){}},"./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx":function(R,i,e){"use strict";e.d(i,"a",function(){return x});var j=e("./node_modules/react/index.js"),s=e.n(j),o=e("./node_modules/kea/lib/index.esm.js"),M=e("./frontend/src/lib/utils.tsx"),N=e("./node_modules/antd/es/button/index.js"),v=e("./node_modules/antd/es/row/index.js"),G=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),Y=e("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),z=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),$=e("./node_modules/@ant-design/icons/es/icons/LeftOutlined.js"),J=e("./node_modules/@ant-design/icons/es/icons/RightOutlined.js"),E=e("./frontend/src/scenes/persons/PersonHeader.tsx"),O=e("./frontend/src/lib/utils/eventUsageLogic.ts"),W=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ee=e.n(W),Q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss"),C=e.n(Q),U={};U.insert="head",U.singleton=!1;var se=ee()(C.a,U),ne=C.a.locals||{},B=e("./frontend/src/lib/components/LemonTable/index.ts"),X=e("./frontend/src/lib/components/TimezoneAware/index.tsx");function x(V){var te=V.personUUID,I=V.isPersonPage,P=I===void 0?!1:I,K=Object(G.b)({personUUID:te}),u=Object(o.useValues)(K),L=u.sessionRecordings,Z=u.sessionRecordingsResponseLoading,b=u.hasNext,g=u.hasPrev,F=Object(o.useActions)(K),w=F.openSessionPlayer,k=F.closeSessionPlayer,q=F.loadNext,H=F.loadPrev,T=[{title:"Start time",render:function(h,y){return s.a.createElement(X.b,{time:y.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})}},{title:"Duration",render:function(h,y){return s.a.createElement("span",null,Object(M.N)(y.recording_duration))}},{title:"Person",key:"person",render:function(h,y){return s.a.createElement(E.a,{withIcon:!0,person:y.person})}},{render:function(h,y){return s.a.createElement("div",{className:"play-button-container"},s.a.createElement(N.a,{className:y.viewed?"play-button viewed":"play-button","data-attr":"session-recordings-button",icon:s.a.createElement(Y.a,null)},"Watch recording"))}}];return s.a.createElement("div",{className:"session-recordings-table","data-attr":"session-recordings-table"},s.a.createElement(B.a,{dataSource:L,columns:T,loading:Z,onRow:function(h){return{onClick:function(le){le.target.closest("a")||w(h.id,O.d.RecordingsList)}}},rowClassName:"cursor-pointer","data-attr":"session-recording-table",emptyState:"No matching recordings found"}),(g||b)&&s.a.createElement(v.a,{className:"pagination-control"},s.a.createElement(N.a,{type:"link",disabled:!g,onClick:function(){H(),window.scrollTo(0,0)}},s.a.createElement($.a,null)," Previous"),s.a.createElement(N.a,{type:"link",disabled:!b,onClick:function(){q(),window.scrollTo(0,0)}},"Next ",s.a.createElement(J.a,null))),s.a.createElement("div",{style:{marginBottom:64}}),s.a.createElement(z.a,{isPersonPage:P,onClose:k}))}try{x.displayName="SessionRecordingsTable",x.__docgenInfo={description:"",displayName:"SessionRecordingsTable",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"]={docgenInfo:x.__docgenInfo,name:"SessionRecordingsTable",path:"frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"})}catch(V){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingFilters.scss":function(R,i,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");i=j(!1),i.push([R.i,".SessionRecordingFilters .filter-row{width:100%;justify-content:space-between;margin-bottom:1rem;align-items:flex-end}.SessionRecordingFilters .filter-container{max-width:700px;padding:1rem;border:1px solid var(--border);flex:1;border-radius:var(--radius)}.SessionRecordingFilters .filter-section{padding-bottom:1rem}.SessionRecordingFilters .session-recording-action-property-filter{margin:0 0 0 68px;background-color:var(--antd-table-background-dark);border-top-width:1px;border:1px solid var(--border);border-top:0 solid var(--border);padding:.25rem 1rem}.SessionRecordingFilters .entity-filter-row{width:100%;padding:1rem;border:1px solid var(--border);margin-top:1rem;border-radius:var(--radius)}.SessionRecordingFilters .time-filter-row{justify-content:flex-end;align-items:flex-end}.SessionRecordingFilters .time-filter-row .time-filter{align-items:center;margin-left:1rem}.SessionRecordingFilters .time-filter-row .time-filter .filter-label{margin-right:4px}",""]),R.exports=i},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss":function(R,i,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");i=j(!1),i.push([R.i,'.SessionRecordingPlaylist{display:flex;flex-direction:"row"}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column{width:300px;flex-shrink:0}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column .SessionRecordingPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column{flex:1}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column .SessionRecordingPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}',""]),R.exports=i},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss":function(R,i,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");i=j(!1),i.push([R.i,".session-recordings-table .pagination-control{margin:1rem;justify-content:center}.session-recordings-table .play-button-container{display:flex;justify-content:flex-end}.session-recordings-table .play-button-container .play-button .anticon-play-circle{color:var(--primary)}.session-recordings-table .play-button-container .play-button.viewed .anticon-play-circle{color:var(--muted)}.session-recordings-table .info-icon{color:var(--primary)}",""]),R.exports=i}}]);
