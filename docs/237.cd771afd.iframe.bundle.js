(window.webpackJsonp=window.webpackJsonp||[]).push([[237],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(Y,i,e){"use strict";e.r(i),e.d(i,"scene",function(){return F}),e.d(i,"ActionsTable",function(){return f});var p=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),P=e.n(p),x=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),E=e.n(x),m=e("./node_modules/core-js/modules/es.array.map.js"),a=e("./node_modules/core-js/modules/es.regexp.exec.js"),$=e("./node_modules/core-js/modules/es.string.search.js"),k=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e("./node_modules/core-js/modules/es.function.name.js"),ne=e("./node_modules/core-js/modules/es.array.slice.js"),J=e("./node_modules/core-js/modules/es.number.constructor.js"),Ee=e("./node_modules/core-js/modules/es.array.filter.js"),le=e("./node_modules/core-js/modules/es.object.to-string.js"),S=e("./node_modules/react/index.js"),t=e.n(S),de=e("./frontend/src/scenes/actions/Actions.scss"),w=e("./frontend/src/lib/components/Link.tsx"),l=e("./node_modules/antd/es/input/index.js"),v=e("./node_modules/antd/es/radio/index.js"),D=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),U=e("./frontend/src/lib/utils.tsx"),h=e("./node_modules/kea/lib/index.esm.js"),I=e("./frontend/src/models/actionsModel.ts"),X=e("./node_modules/antd/es/modal/index.js"),c=e("./node_modules/antd/es/button/index.js"),r=e("./node_modules/antd/es/row/index.js"),R=e("./node_modules/antd/es/col/index.js"),Q=e("./node_modules/antd/es/card/index.js"),M=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),s=e("./node_modules/kea-router/lib/index.js"),d=e("./frontend/src/scenes/urls.ts"),y=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx"),g=e("./frontend/src/lib/components/icons.tsx"),C=e("./frontend/src/lib/components/LemonButton/index.ts");function T(){var V=Object(S.useState)(!1),b=E()(V,2),L=b[0],O=b[1],z=Object(S.useState)(!1),H=E()(z,2),G=H[0],K=H[1];return t.a.createElement(t.a.Fragment,null,t.a.createElement(C.a,{type:"primary",onClick:function(){return O(!0)},"data-attr":"create-action"},"New Action"),t.a.createElement(X.a,{visible:L,style:{cursor:"pointer"},onCancel:function(){O(!1),K(!1)},title:"Create new action",footer:[G&&t.a.createElement(c.a,{key:"back-button",onClick:function(){return K(!1)}},"Back"),t.a.createElement(c.a,{key:"cancel-button",onClick:function(){O(!1),K(!1)}},"Cancel")]},!G&&t.a.createElement(r.a,{gutter:2,justify:"space-between"},t.a.createElement(R.a,{xs:11},t.a.createElement(Q.a,{title:"Inspect element on your site",onClick:function(){return K(!0)},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40}},t.a.createElement(M.a,null)))),t.a.createElement(R.a,{xs:11},t.a.createElement(Q.a,{title:"From event or pageview",onClick:function(){s.router.actions.push(d.a.createAction())},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},t.a.createElement(g.IconEdit,null))))),G&&t.a.createElement(y.a,null)))}var B=e("./frontend/src/types.ts"),j=e("./node_modules/fuse.js/dist/fuse.esm.js"),ie=e("./frontend/src/scenes/userLogic.ts"),se=e("./frontend/src/scenes/teamLogic.tsx"),ce=e("./frontend/src/lib/api.ts"),oe=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),ue=e("./frontend/src/lib/components/LemonTable/index.ts"),me=e("./frontend/src/lib/components/LemonDivider/index.ts"),ve=e("./frontend/src/lib/components/LemonButton/More.tsx"),re=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),N=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),n=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),q=function(b,L){return new j.a(b,{keys:["name","url"],threshold:.3}).search(L).map(function(O){return O.item})},F={component:f};function f(){var V=Object(h.useValues)(se.a),b=V.currentTeam,L=Object(h.useValues)(Object(I.a)({params:"include_count=1"})),O=L.actions,z=L.actionsLoading,H=Object(h.useActions)(I.a),G=H.loadActions,K=Object(S.useState)(""),W=E()(K,2),ge=W[0],je=W[1],be=Object(S.useState)(!1),he=E()(be,2),ye=he[0],Oe=he[1],Te=Object(h.useValues)(ie.a),fe=Te.user,Ae=Te.hasAvailableFeature,pe=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(o,u){return(o.name||"").localeCompare(u.name||"")},render:function(o,u,Z){return t.a.createElement(w.a,{"data-attr":"action-link-"+Z,to:d.a.action(u.id),className:"row-name"},o||t.a.createElement("i",null,"Unnamed action"))}}].concat(P()(Ae(B.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(o){return t.a.createElement(re.a,{tags:o,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(o,u){var Z;return t.a.createElement("span",null,(Z=u.steps)!==null&&Z!==void 0&&Z.length?u.steps.map(function(te){return t.a.createElement("div",{key:te.id},function(){var _=Object(U.yb)(te.url||"");switch(_=_.slice(0,40)+(_.length>40?"...":""),te.event){case"$autocapture":return"Autocapture";case"$pageview":switch(te.url_matching){case"regex":return t.a.createElement(t.a.Fragment,null,"Page view URL matches regex ",t.a.createElement("strong",null,_));case"exact":return t.a.createElement(t.a.Fragment,null,"Page view URL matches exactly ",t.a.createElement("strong",null,_));default:return t.a.createElement(t.a.Fragment,null,"Page view URL contains ",t.a.createElement("strong",null,_))}default:return t.a.createElement(t.a.Fragment,null,"Event: ",t.a.createElement("strong",null,te.event))}}())}):t.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(oe.b)(),Object(oe.a)()],P()(b!=null&&b.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(o,u){return Number(o.post_to_slack)-Number(u.post_to_slack)},render:function(o){return o?t.a.createElement(D.a,null):null}}]:[]),[{width:0,render:function(o,u){return t.a.createElement(ve.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(C.a,{type:"stealth",to:d.a.action(u.id),fullWidth:!0},"Edit"),t.a.createElement(C.a,{type:"stealth",to:Object(s.combineUrl)(d.a.insightNew({insight:B.z.TRENDS,interval:"day",display:B.j.ActionsLineGraph,actions:[{id:u.id,name:u.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),t.a.createElement(me.a,null),t.a.createElement(C.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Object(U.x)({endpoint:ce.b.actions.determineDeleteEndpoint(),object:u,callback:G})},fullWidth:!0},"Delete action"))})}}]),ee=O;return ge&&ge!==""&&(ee=q(ee,ge)),ye&&(ee=ee.filter(function(A){var o;return((o=A.created_by)===null||o===void 0?void 0:o.uuid)===(fe==null?void 0:fe.uuid)})),t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement(n.a,{activeTab:N.b.Actions}),t.a.createElement(l.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(o){je(o.target.value)}}),t.a.createElement(v.a.Group,{buttonStyle:"solid",value:ye,onChange:function(o){return Oe(o.target.value)}},t.a.createElement(v.a.Button,{value:!1},"All actions"),t.a.createElement(v.a.Button,{value:!0},"My actions")),t.a.createElement("div",{className:"mb float-right"},t.a.createElement(T,null)),t.a.createElement(ue.a,{columns:pe,loading:z,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:ee,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(Y,i,e){"use strict";e.d(i,"a",function(){return m});var p=e("./frontend/src/lib/components/PageHeader.tsx"),P=e("./node_modules/react/index.js"),x=e.n(P),E=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx");function m(a){var $=a.activeTab,k=a.hideTabs;return x.a.createElement(x.a.Fragment,null,x.a.createElement(p.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!k&&x.a.createElement(E.a,{tab:$}))}try{m.displayName="DataManagementPageHeader",m.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:m.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(a){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(Y,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"a",function(){return M});var p=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),P=e.n(p),x=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=e.n(x),m=e("./node_modules/core-js/modules/es.array.iterator.js"),a=e.n(m),$=e("./node_modules/core-js/modules/es.object.to-string.js"),k=e.n($),ae=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ne=e.n(ae),J=e("./node_modules/core-js/modules/es.object.from-entries.js"),Ee=e.n(J),le=e("./node_modules/core-js/modules/es.array.map.js"),S=e.n(le),t=e("./node_modules/core-js/modules/es.object.entries.js"),de=e.n(t),w=e("./node_modules/react/index.js"),l=e.n(w),v=e("./node_modules/kea/lib/index.esm.js"),D=e("./node_modules/antd/es/tabs/index.js"),U=e("./frontend/src/scenes/urls.ts"),h=e("./frontend/src/lib/components/Tooltip.tsx"),I=e("./frontend/src/lib/components/icons.tsx"),X=e("./frontend/src/lib/components/TitleWithIcon.tsx"),c,r;(function(s){s.Actions="actions",s.EventDefinitions="events",s.EventPropertyDefinitions="properties"})(r||(r={}));var R=(c={},E()(c,r.EventPropertyDefinitions,U.a.eventPropertyDefinitions()),E()(c,r.EventDefinitions,U.a.eventDefinitions()),E()(c,r.Actions,U.a.actions()),c),Q=Object(v.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(d){return{tab:d}}},reducers:{tab:[r.EventDefinitions,{setTab:function(d,y){var g=y.tab;return g}}]},actionToUrl:function(){return{setTab:function(y){var g=y.tab;return R[g]||U.a.events()}}},urlToAction:function(d){var y=d.actions,g=d.values;return Object.fromEntries(Object.entries(R).map(function(C){var T=P()(C,2),B=T[0],j=T[1];return[j,function(){g.tab!==B&&y.setTab(B)}]}))}});function M(s){var d=s.tab,y=Object(v.useActions)(Q),g=y.setTab;return l.a.createElement(D.a,{tabPosition:"top",animated:!1,activeKey:d,onTabClick:function(T){return g(T)}},l.a.createElement(D.a.TabPane,{tab:l.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:r.EventDefinitions}),l.a.createElement(D.a.TabPane,{tab:l.a.createElement(X.a,{icon:l.a.createElement(h.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},l.a.createElement(I.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:r.Actions}),l.a.createElement(D.a.TabPane,{tab:l.a.createElement(X.a,{icon:l.a.createElement(h.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},l.a.createElement(I.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Properties"),key:r.EventPropertyDefinitions}))}try{M.displayName="DataManagementPageTabs",M.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:M.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(s){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx":function(Y,i,e){"use strict";e.d(i,"a",function(){return c});var p=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),P=e.n(p),x=e("./node_modules/core-js/modules/es.regexp.exec.js"),E=e("./node_modules/core-js/modules/es.string.match.js"),m=e("./node_modules/react/index.js"),a=e.n(m),$=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),k=e.n($),ae=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss"),ne=e.n(ae),J={};J.insert="head",J.singleton=!1;var Ee=k()(ne.a,J),le=ne.a.locals||{},S=e("./node_modules/clsx/dist/clsx.m.js"),t=e("./node_modules/kea/lib/index.esm.js"),de=e("./frontend/src/lib/components/LemonTable/index.ts"),w=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),l=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),v=e("./frontend/src/lib/components/LemonButton/index.ts"),D=e("./node_modules/antd/es/input/index.js"),U=e("./node_modules/antd/es/button/index.js"),h=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),I=e("./frontend/src/lib/utils.tsx"),X=e("./frontend/src/lib/components/LemonButton/More.tsx");function c(r){var R=r.pageKey,Q=r.actionId,M=Object(h.c)({actionId:Q}),s=Object(t.useValues)(M),d=s.appUrlsKeyed,y=s.suggestionsLoading,g=s.searchTerm,C=s.launchUrl,T=s.appUrls,B=s.editUrlIndex,j=Object(t.useActions)(M),ie=j.addUrl,se=j.removeUrl,ce=j.setSearchTerm,oe=j.updateUrl,ue=j.newUrl,me=j.setEditUrlIndex,ve=[{title:"URLs",dataIndex:"url",key:"url",render:function(N,n){var q=Object(m.useState)(n.url),F=P()(q,2),f=F[0],V=F[1],b=Object(m.useState)(""),L=P()(b,2),O=L[0],z=L[1];Object(m.useEffect)(function(){return V(n.url)},[n]);var H=function(){if(z(""),f===h.a&&se(n.originalIndex),f.indexOf("*")>-1&&!f.match(/^(.*)\*[^\*]*\.[^\*]+\.[^\*]+$/)){z("You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.");return}if(!Object(I.fb)(f)){z("Please type a valid URL or domain.");return}if(T.indexOf(f)>-1&&T.indexOf(f,n.originalIndex)!==n.originalIndex&&T.indexOf(f,n.originalIndex+1)!==n.originalIndex){z("This URL is already registered.");return}oe(n.originalIndex,f)};return n.type==="suggestion"||N!==h.a&&B!==n.originalIndex?a.a.createElement("div",{className:Object(S.a)("authorized-url-col",n.type)},n.type==="authorized"&&a.a.createElement(l.a,{style:{marginRight:4}}),N,n.type==="suggestion"&&a.a.createElement(w.a,null,"Suggestion")):a.a.createElement("div",null,a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(D.a,{value:f,onChange:function(K){return V(K.target.value)},onPressEnter:H,autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)"}),a.a.createElement(U.a,{type:"primary",onClick:H},"Save")),O&&a.a.createElement("span",{className:"text-small text-danger"},O))}},{title:"",key:"actions",render:function(N,n,q){return a.a.createElement("div",{className:"actions-col"},n.type==="suggestion"?a.a.createElement(v.a,{type:"secondary",onClick:function(){return ie(n.url)}},"Apply suggestion"):a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{type:"highlighted",href:C(n.url),className:"mr"},"Open with Toolbar"),a.a.createElement(X.a,{overlay:a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{fullWidth:!0,type:"stealth",onClick:function(){return me(n.originalIndex)}},"Edit authorized URL"),a.a.createElement(v.a,{fullWidth:!0,style:{color:"var(--danger)"},type:"stealth",onClick:function(){return se(q)}},"Remove authorized URL"))})))}}];return a.a.createElement("div",null,a.a.createElement("div",{className:"flex-center mb"},a.a.createElement("div",{style:{flexGrow:1}},a.a.createElement(D.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:g,onChange:function(N){ce(N.target.value)},autoFocus:R==="toolbar-launch"&&!Object(I.X)()})),a.a.createElement(v.a,{type:"primary",onClick:ue},"Add",R==="toolbar-launch"&&" authorized domain")),a.a.createElement(de.a,{className:"authorized-urls-table",columns:ve,dataSource:d,emptyState:g?"There are no authorized URLs that match your search.":"There are no authorized URLs or domains. Add one to get started.",loading:y}))}try{c.displayName="AuthorizedUrlsTable",c.__docgenInfo={description:"",displayName:"AuthorizedUrlsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"]={docgenInfo:c.__docgenInfo,name:"AuthorizedUrlsTable",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"})}catch(r){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss":function(Y,i,e){var p=e("./node_modules/css-loader/dist/runtime/api.js");i=p(!1),i.push([Y.i,".authorized-urls-table .authorized-url-col{display:flex;align-items:center}.authorized-urls-table .authorized-url-col .lemon-tag{margin-left:6px}.authorized-urls-table .authorized-url-col.suggestion{color:var(--text-muted-alt)}.authorized-urls-table .authorized-url-col.authorized{color:var(--success)}.authorized-urls-table .actions-col{display:flex;align-items:center;justify-content:flex-end}",""]),Y.exports=i}}]);
