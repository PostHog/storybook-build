(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(ne,v,e){"use strict";e.r(v),e.d(v,"scene",function(){return D}),e.d(v,"ActionsTable",function(){return ae});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ye=e("./node_modules/core-js/modules/es.array.filter.js"),R=e("./node_modules/core-js/modules/es.array.map.js"),ue=e("./node_modules/core-js/modules/es.array.slice.js"),A=e("./node_modules/core-js/modules/es.function.name.js"),C=e("./node_modules/core-js/modules/es.number.constructor.js"),r=e("./node_modules/core-js/modules/es.regexp.exec.js"),me=e("./node_modules/core-js/modules/es.string.search.js"),se=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Ee=e.n(se),Z=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),B=e.n(Z),K=e("./node_modules/react/index.js"),t=e.n(K),ve=e("./frontend/src/scenes/actions/Actions.scss"),G=e("./frontend/src/lib/components/Link.tsx"),re=e("./node_modules/antd/es/input/index.js"),f=e("./node_modules/antd/es/radio/index.js"),w=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),x=e("./frontend/src/lib/utils.tsx"),y=e("./node_modules/kea/lib/index.esm.js"),k=e("./frontend/src/models/actionsModel.ts"),U=e("./node_modules/antd/es/button/index.js"),I=e("./node_modules/antd/es/modal/index.js"),g=e("./node_modules/antd/es/row/index.js"),S=e("./node_modules/antd/es/col/index.js"),$=e("./node_modules/antd/es/card/index.js"),Y=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),m=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),h=e("./node_modules/@ant-design/icons/es/icons/EditOutlined.js"),j=e("./node_modules/kea-router/lib/index.js"),P=e("./frontend/src/scenes/urls.ts"),J=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx");function T(){var N=Object(K.useState)(!1),p=B()(N,2),l=p[0],n=p[1],a=Object(K.useState)(!1),s=B()(a,2),o=s[0],i=s[1];return t.a.createElement(t.a.Fragment,null,t.a.createElement(U.a,{type:"primary",icon:t.a.createElement(Y.a,null),onClick:function(){return n(!0)},"data-attr":"create-action"},"New Action"),t.a.createElement(I.a,{visible:l,style:{cursor:"pointer"},onCancel:function(){n(!1),i(!1)},title:"Create new action",footer:[o&&t.a.createElement(U.a,{key:"back-button",onClick:function(){return i(!1)}},"Back"),t.a.createElement(U.a,{key:"cancel-button",onClick:function(){n(!1),i(!1)}},"Cancel")]},!o&&t.a.createElement(g.a,{gutter:2,justify:"space-between"},t.a.createElement(S.a,{xs:11},t.a.createElement($.a,{title:"Inspect element on your site",onClick:function(){return i(!0)},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40}},t.a.createElement(m.a,null)))),t.a.createElement(S.a,{xs:11},t.a.createElement($.a,{title:"From event or pageview",onClick:function(){j.router.actions.push(P.a.createAction())},size:"small"},t.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},t.a.createElement(h.a,null))))),o&&t.a.createElement(J.a,null)))}var q=e.p+"images/actions-tutorial-grouping.c9c565ed9cae79997aa714fdf8196aca.svg",X=e.p+"images/actions-tutorial-standardized.3935760a1606361ee014ad5615d6e22a.svg",fe=e.p+"images/actions-tutorial-retroactive.8bcf9190e81ba5d434572271b9f632be.svg",b=e("./frontend/src/types.ts"),oe=e("./node_modules/fuse.js/dist/fuse.esm.js"),Me=e("./frontend/src/scenes/userLogic.ts"),W=e("./frontend/src/scenes/teamLogic.ts"),le=e("./frontend/src/lib/api.ts"),de=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),ee=e("./frontend/src/lib/components/LemonTable/index.ts"),ie=e("./frontend/src/lib/components/LemonButton/index.ts"),Te=e("./frontend/src/lib/components/LemonRow/index.ts"),De=e("./frontend/src/lib/components/LemonButton/More.tsx"),te=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),ge=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Q=e("./frontend/src/lib/constants.tsx"),d=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),_e=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),z=function(p,l){return new oe.a(p,{keys:["name","url"],threshold:.3}).search(l).map(function(n){return n.item})},D={component:ae};function ae(){var N=Object(y.useValues)(W.a),p=N.currentTeam,l=Object(y.useValues)(Object(k.a)({params:"include_count=1"})),n=l.actions,a=l.actionsLoading,s=Object(y.useActions)(k.a),o=s.loadActions,i=Object(K.useState)(""),c=B()(i,2),u=c[0],_=c[1],L=Object(K.useState)(!1),ce=B()(L,2),O=ce[0],F=ce[1],Oe=Object(y.useValues)(Me.a),he=Oe.user,Ae=Oe.hasAvailableFeature,be=Object(y.useValues)(ge.a),Le=be.featureFlags,Ce=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(E,M){return(E.name||"").localeCompare(M.name||"")},render:function(E,M,je){return t.a.createElement(G.a,{"data-attr":"action-link-"+je,to:P.a.action(M.id),className:"row-name"},E||t.a.createElement("i",null,"Unnnamed action"))}}].concat(Ee()(Ae(b.c.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(E){return t.a.createElement(te.a,{tags:E,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(E,M){var je;return t.a.createElement("span",null,!((je=M.steps)===null||je===void 0)&&je.length?M.steps.map(function(pe){return t.a.createElement("div",{key:pe.id},function(){var Pe=Object(x.zb)(pe.url||"");switch(Pe=Pe.slice(0,40)+(Pe.length>40?"...":""),pe.event){case"$autocapture":return"Autocapture";case"$pageview":switch(pe.url_matching){case"regex":return t.a.createElement(t.a.Fragment,null,"Page view URL matches regex ",t.a.createElement("strong",null,Pe));case"exact":return t.a.createElement(t.a.Fragment,null,"Page view URL matches exactly ",t.a.createElement("strong",null,Pe));default:return t.a.createElement(t.a.Fragment,null,"Page view URL contains ",t.a.createElement("strong",null,Pe))}default:return t.a.createElement(t.a.Fragment,null,"Event: ",t.a.createElement("strong",null,pe.event))}}())}):t.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(de.b)(),Object(de.a)()],Ee()(p!=null&&p.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(E,M){return Number(E.post_to_slack)-Number(M.post_to_slack)},render:function(E){return E?t.a.createElement(w.a,null):null}}]:[]),[{width:0,render:function(E,M){return t.a.createElement(De.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(ie.a,{type:"stealth",to:P.a.action(M.id),fullWidth:!0},"Edit"),t.a.createElement(ie.a,{type:"stealth",to:Object(j.combineUrl)(P.a.insightNew({insight:b.s.TRENDS,interval:"day",display:b.d.ActionsLineGraph,actions:[{id:M.id,name:M.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),t.a.createElement(Te.b,null),t.a.createElement(ie.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Object(x.x)({endpoint:le.a.actions.determineDeleteEndpoint(),object:M,callback:o})},fullWidth:!0},"Delete action"))})}}]),Ue=n;return u&&u!==""&&(Ue=z(Ue,u)),O&&(Ue=Ue.filter(function(V){var E;return((E=V.created_by)===null||E===void 0?void 0:E.uuid)===(he==null?void 0:he.uuid)})),t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement(_e.a,{activeTab:d.b.Actions}),!Le[Q.o.DATA_MANAGEMENT]&&t.a.createElement("div",null,t.a.createElement("div",{className:"tutorial-container"},t.a.createElement("div",{className:"t-element"},t.a.createElement("div",null,t.a.createElement("img",{src:q,alt:""})),t.a.createElement("div",null,t.a.createElement("div",{className:"title"},"Multiple grouping"),t.a.createElement("div",{className:"description"},"Group multiple sets of events into a single action."))),t.a.createElement("div",{className:"t-element"},t.a.createElement("div",null,t.a.createElement("img",{src:X,alt:""})),t.a.createElement("div",null,t.a.createElement("div",{className:"title"},"Clean & standardized data"),t.a.createElement("div",{className:"description"},"Keep your actions the same, even if your product or data changes."))),t.a.createElement("div",{className:"t-element"},t.a.createElement("div",null,t.a.createElement("img",{src:fe,alt:""})),t.a.createElement("div",null,t.a.createElement("div",{className:"title"},"Retroactive"),t.a.createElement("div",{className:"description"},"We'll retroactively update your actions to match any past events."))))),t.a.createElement(re.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(E){_(E.target.value)}}),t.a.createElement(f.a.Group,{buttonStyle:"solid",value:O,onChange:function(E){return F(E.target.value)}},t.a.createElement(f.a.Button,{value:!1},"All actions"),t.a.createElement(f.a.Button,{value:!0},"My actions")),t.a.createElement("div",{className:"mb float-right"},t.a.createElement(T,null)),t.a.createElement(ee.a,{columns:Ce,loading:a,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:Ue,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(ne,v,e){"use strict";e.d(v,"a",function(){return A});var H=e("./frontend/src/lib/components/PageHeader.tsx"),ye=e("./node_modules/react/index.js"),R=e.n(ye),ue=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx");function A(C){var r=C.activeTab,me=C.hideTabs;return R.a.createElement(R.a.Fragment,null,R.a.createElement(H.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!me&&R.a.createElement(ue.a,{tab:r}))}try{A.displayName="DataManagementPageHeader",A.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:A.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(C){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(ne,v,e){"use strict";e.d(v,"b",function(){return g}),e.d(v,"a",function(){return Y});var H=e("./node_modules/core-js/modules/es.array.iterator.js"),ye=e.n(H),R=e("./node_modules/core-js/modules/es.array.map.js"),ue=e.n(R),A=e("./node_modules/core-js/modules/es.object.entries.js"),C=e.n(A),r=e("./node_modules/core-js/modules/es.object.from-entries.js"),me=e.n(r),se=e("./node_modules/core-js/modules/es.object.to-string.js"),Ee=e.n(se),Z=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),B=e.n(Z),K=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),t=e.n(K),ve=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),G=e.n(ve),re=e("./node_modules/react/index.js"),f=e.n(re),w=e("./node_modules/kea/lib/index.esm.js"),x=e("./node_modules/antd/es/tabs/index.js"),y=e("./frontend/src/scenes/urls.ts"),k=e("./frontend/src/lib/components/Tooltip.tsx"),U=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),I,g;(function(m){m.Actions="actions",m.EventDefinitions="events",m.EventPropertyDefinitions="properties"})(g||(g={}));var S=(I={},G()(I,g.EventPropertyDefinitions,y.a.eventPropertyDefinitions()),G()(I,g.EventDefinitions,y.a.eventDefinitions()),G()(I,g.Actions,y.a.actions()),I),$=Object(w.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(h){return{tab:h}}},reducers:{tab:[g.EventDefinitions,{setTab:function(h,j){var P=j.tab;return P}}]},actionToUrl:function(){return{setTab:function(j){var P=j.tab;return S[P]||y.a.events()}}},urlToAction:function(h){var j=h.actions,P=h.values;return Object.fromEntries(Object.entries(S).map(function(J){var T=t()(J,2),q=T[0],X=T[1];return[X,function(){P.tab!==q&&j.setTab(q)}]}))}});function Y(m){var h=m.tab,j=Object(w.useActions)($),P=j.setTab;return f.a.createElement(x.a,{tabPosition:"top",animated:!1,activeKey:h,onTabClick:function(T){return P(T)}},f.a.createElement(x.a.TabPane,{tab:f.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:g.EventDefinitions}),f.a.createElement(x.a.TabPane,{tab:f.a.createElement("span",{"data-attr":"data-management-actions-tab"},"Actions",f.a.createElement(k.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},f.a.createElement(U.a,{style:{marginLeft:8,marginRight:0}}))),key:g.Actions}),f.a.createElement(x.a.TabPane,{tab:f.a.createElement("span",{"data-attr":"data-management-event-properties-tab"},"Properties",f.a.createElement(k.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},f.a.createElement(U.a,{style:{marginLeft:8,marginRight:0}}))),key:g.EventPropertyDefinitions}))}try{Y.displayName="DataManagementPageTabs",Y.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:Y.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(m){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx":function(ne,v,e){"use strict";e.d(v,"a",function(){return m});var H=e("./node_modules/core-js/modules/es.array.index-of.js"),ye=e("./node_modules/core-js/modules/es.regexp.exec.js"),R=e("./node_modules/core-js/modules/es.string.match.js"),ue=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),A=e.n(ue),C=e("./node_modules/react/index.js"),r=e.n(C),me=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),se=e.n(me),Ee=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss"),Z=e.n(Ee),B={};B.insert="head",B.singleton=!1;var K=se()(Z.a,B),t=Z.a.locals||{},ve=e("./node_modules/clsx/dist/clsx.m.js"),G=e("./node_modules/kea/lib/index.esm.js"),re=e("./frontend/src/lib/components/LemonTable/index.ts"),f=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),w=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),x=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),y=e("./node_modules/@ant-design/icons/es/icons/EditOutlined.js"),k=e("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js"),U=e("./frontend/src/lib/components/LemonButton/index.ts"),I=e("./node_modules/antd/es/input/index.js"),g=e("./node_modules/antd/es/button/index.js"),S=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),$=e("./frontend/src/lib/utils.tsx"),Y=e("./frontend/src/lib/components/LemonButton/More.tsx");function m(h){var j=h.pageKey,P=h.actionId,J=Object(S.c)({actionId:P}),T=Object(G.useValues)(J),q=T.appUrlsKeyed,X=T.suggestionsLoading,fe=T.searchTerm,b=T.launchUrl,oe=T.appUrls,Me=T.editUrlIndex,W=Object(G.useActions)(J),le=W.addUrl,de=W.removeUrl,ee=W.setSearchTerm,ie=W.updateUrl,Te=W.newUrl,De=W.setEditUrlIndex,te=[{title:"URLs",dataIndex:"url",key:"url",render:function(Q,d){var _e=Object(C.useState)(d.url),z=A()(_e,2),D=z[0],ae=z[1],N=Object(C.useState)(""),p=A()(N,2),l=p[0],n=p[1];Object(C.useEffect)(function(){return ae(d.url)},[d]);var a=function(){if(n(""),D===S.a&&de(d.originalIndex),D.indexOf("*")>-1&&!D.match(/^(.*)\*[^\*]*\.[^\*]+\.[^\*]+$/)){n("You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.");return}if(!Object($.eb)(D)){n("Please type a valid URL or domain.");return}if(oe.indexOf(D)>-1&&oe.indexOf(D,d.originalIndex)!==d.originalIndex&&oe.indexOf(D,d.originalIndex+1)!==d.originalIndex){n("This URL is already registered.");return}ie(d.originalIndex,D)};return d.type==="suggestion"||Q!==S.a&&Me!==d.originalIndex?r.a.createElement("div",{className:Object(ve.a)("authorized-url-col",d.type)},d.type==="authorized"&&r.a.createElement(w.a,{style:{marginRight:4}}),Q,d.type==="suggestion"&&r.a.createElement(f.a,null,"Suggestion")):r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(I.a,{value:D,onChange:function(o){return ae(o.target.value)},onPressEnter:a,autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)"}),r.a.createElement(g.a,{type:"primary",onClick:a},"Save")),l&&r.a.createElement("span",{className:"text-small text-danger"},l))}},{title:"",key:"actions",render:function(Q,d,_e){return r.a.createElement("div",{className:"actions-col"},d.type==="suggestion"?r.a.createElement(U.a,{type:"default",onClick:function(){return le(d.url)}},r.a.createElement(x.a,null)," Add as authorized"):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:b(d.url),style:{marginRight:4}},r.a.createElement(U.a,{type:"highlighted"},"Launch toolbar")),r.a.createElement(Y.a,{overlay:r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{fullWidth:!0,type:"stealth",onClick:function(){return De(d.originalIndex)}},r.a.createElement(y.a,{style:{marginRight:4}}),"Edit authorized URL"),r.a.createElement(U.a,{fullWidth:!0,style:{color:"var(--danger)"},type:"stealth",onClick:function(){return de(_e)}},r.a.createElement(k.a,{style:{marginRight:4}}),"Remove authorized URL"))})))}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"flex-center mb"},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(I.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:fe,onChange:function(Q){ee(Q.target.value)},autoFocus:j==="toolbar-launch"&&!Object($.X)()})),r.a.createElement(g.a,{type:"primary",icon:r.a.createElement(x.a,null),onClick:Te},"Add",j==="toolbar-launch"&&" authorized domain")),r.a.createElement(re.a,{className:"authorized-urls-table",columns:te,dataSource:q,emptyState:fe?"There are no authorized URLs that match your search.":"There are no authorized URLs or domains. Add one to get started.",loading:X}))}try{m.displayName="AuthorizedUrlsTable",m.__docgenInfo={description:"",displayName:"AuthorizedUrlsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"]={docgenInfo:m.__docgenInfo,name:"AuthorizedUrlsTable",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"})}catch(h){}},"./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts":function(ne,v,e){"use strict";e.d(v,"b",function(){return ae}),e.d(v,"a",function(){return N}),e.d(v,"c",function(){return p});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ye=e.n(H),R=e("./node_modules/core-js/modules/es.array.filter.js"),ue=e.n(R),A=e("./node_modules/core-js/modules/es.array.includes.js"),C=e.n(A),r=e("./node_modules/core-js/modules/es.array.index-of.js"),me=e.n(r),se=e("./node_modules/core-js/modules/es.array.iterator.js"),Ee=e.n(se),Z=e("./node_modules/core-js/modules/es.array.map.js"),B=e.n(Z),K=e("./node_modules/core-js/modules/es.array.slice.js"),t=e.n(K),ve=e("./node_modules/core-js/modules/es.array.splice.js"),G=e.n(ve),re=e("./node_modules/core-js/modules/es.object.assign.js"),f=e.n(re),w=e("./node_modules/core-js/modules/es.object.to-string.js"),x=e.n(w),y=e("./node_modules/core-js/modules/es.regexp.exec.js"),k=e.n(y),U=e("./node_modules/core-js/modules/es.regexp.to-string.js"),I=e.n(U),g=e("./node_modules/core-js/modules/es.string.includes.js"),S=e.n(g),$=e("./node_modules/core-js/modules/es.string.iterator.js"),Y=e.n($),m=e("./node_modules/core-js/modules/es.string.search.js"),h=e.n(m),j=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),P=e.n(j),J=e("./node_modules/core-js/modules/web.url.js"),T=e.n(J),q=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),X=e.n(q),fe=e("./node_modules/@babel/runtime/regenerator/index.js"),b=e.n(fe),oe=e("./node_modules/regenerator-runtime/runtime.js"),Me=e.n(oe),W=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),le=e.n(W),de=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ee=e.n(de),ie=e("./node_modules/kea/lib/index.esm.js"),Te=e("./frontend/src/lib/api.ts"),De=e("./frontend/src/lib/utils.tsx"),te=e("./frontend/src/scenes/teamLogic.ts"),ge=e("./frontend/src/lib/dayjs.ts"),Q=e("./node_modules/fuse.js/dist/fuse.esm.js"),d=e("./node_modules/kea-router/lib/index.js"),_e=e.n(d);function z(l,n){var a=Object.keys(l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(l);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(l,o).enumerable})),a.push.apply(a,s)}return a}function D(l){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?z(Object(a),!0).forEach(function(s){ee()(l,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach(function(s){Object.defineProperty(l,s,Object.getOwnPropertyDescriptor(a,s))})}return l}function ae(l,n,a){var s=D(D({userIntent:a?void 0:n?"edit-action":"add-action"},n?{actionId:n}:{}),l?{appUrl:l}:{});return"/api/user/redirect_to_site/"+Object(d.encodeParams)(s,"?")}var N="https://",p=Object(ie.kea)({path:function(n){return["lib","components","AppEditorLink","appUrlsLogic",n]},key:function(n){return"".concat(n.pageKey).concat(n.actionId)||"global"},props:{},connect:{values:[te.a,["currentTeam","currentTeamId"]],actions:[te.a,["updateCurrentTeam"]]},actions:function(){return{setAppUrls:function(a){return{appUrls:a}},addUrl:function(a,s){return{url:a,launch:s}},newUrl:!0,removeUrl:function(a){return{index:a}},updateUrl:function(a,s){return{index:a,url:s}},launchAtUrl:function(a){return{url:a}},setSearchTerm:function(a){return{term:a}},setEditUrlIndex:function(a){return{originalIndex:a}}}},loaders:function(n){var a=n.values;return{suggestions:{__default:[],loadSuggestions:function(){var s=le()(b.a.mark(function i(){var c,u,_,L;return b.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return u={events:[{id:"$pageview",name:"$pageview",type:"events"}],breakdown:"$current_url",date_from:Object(ge.a)().subtract(3,"days").toISOString()},O.next=3,Te.a.get("api/projects/".concat(a.currentTeamId,"/insights/trend/?").concat(Object(De.Bb)(u)));case 3:if(_=O.sent.result,!(_&&((c=_[0])===null||c===void 0?void 0:c.count)===0)){O.next=6;break}return O.abrupt("return",[]);case 6:return L=[],O.abrupt("return",(_||[]).filter(function(F){if(!F.breakdown_value)return!1;try{var Oe=new URL(F.breakdown_value.toString()).hostname;return L.indexOf(Oe)>-1||a.appUrls.filter(function(he){return he.indexOf(Oe)>-1}).length>0?void 0:(L.push(Oe),!0)}catch(he){return!1}}).map(function(F){return F.breakdown_value}).slice(0,20));case 8:case"end":return O.stop()}},i)}));function o(){return s.apply(this,arguments)}return o}()}}},events:function(n){var a=n.actions,s=n.values;return{afterMount:function(){a.loadSuggestions(),s.currentTeam&&a.setAppUrls(s.currentTeam.app_urls)}}},reducers:function(){return{appUrls:[[],{setAppUrls:function(a,s){var o=s.appUrls;return o},addUrl:function(a,s){var o=s.url;return a.concat([o])},newUrl:function(a){return a.includes(N)?a:[N].concat(a)},updateUrl:function(a,s){var o=s.index,i=s.url;return Object.assign(X()(a),ee()({},o,i))},removeUrl:function(a,s){var o=s.index,i=X()(a);return i.splice(o,1),i}}],suggestions:[[],{addUrl:function(a,s){var o=s.url;return X()(a).filter(function(i){return o!==i})}}],searchTerm:["",{setSearchTerm:function(a,s){var o=s.term;return o}}],editUrlIndex:[null,{setEditUrlIndex:function(a,s){var o=s.originalIndex;return o},removeUrl:function(a,s){var o=s.index;return a&&o<a?a-1:o===a?null:a}}]}},listeners:function(n){var a,s=n.sharedListeners,o=n.values,i=n.actions;return a={addUrl:[s.saveAppUrls,function(){var c=le()(b.a.mark(function u(_){var L,ce;return b.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:L=_.url,ce=_.launch,ce&&i.launchAtUrl(L);case 2:case"end":return F.stop()}},u)}));return function(u){return c.apply(this,arguments)}}()],removeUrl:s.saveAppUrls,updateUrl:[s.saveAppUrls,function(){return i.setEditUrlIndex(null)}]},ee()(a,te.a.actionTypes.loadCurrentTeamSuccess,function(){var c=le()(b.a.mark(function u(_){var L;return b.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:L=_.currentTeam,L&&i.setAppUrls(L.app_urls);case 2:case"end":return O.stop()}},u)}));return function(u){return c.apply(this,arguments)}}()),ee()(a,"launchAtUrl",function(u){var _=u.url;window.location.href=o.launchUrl(_)}),a},sharedListeners:function(n){var a=n.values;return{saveAppUrls:function(){te.a.actions.updateCurrentTeam({app_urls:a.appUrls})}}},selectors:function(n){var a=n.props;return{appUrlsKeyed:[function(s){return[s.appUrls,s.suggestions,s.searchTerm]},function(s,o,i){var c=s.map(function(u,_){return{url:u,type:"authorized",originalIndex:_}}).concat(o.map(function(u,_){return{url:u,type:"suggestion",originalIndex:_}}));return i?new Q.a(c,{keys:["url"],threshold:.3}).search(i).map(function(u){return u.item}):c}],launchUrl:[function(){return[]},function(){return function(s){return ae(s,a.actionId,!a.actionId)}}]}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss":function(ne,v,e){var H=e("./node_modules/css-loader/dist/runtime/api.js");v=H(!1),v.push([ne.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.authorized-urls-table .authorized-url-col{display:flex;align-items:center}.authorized-urls-table .authorized-url-col .lemon-tag{margin-left:4px}.authorized-urls-table .authorized-url-col.suggestion{color:#747ea1}.authorized-urls-table .authorized-url-col.authorized{color:var(--success)}.authorized-urls-table .actions-col{display:flex;align-items:center;justify-content:flex-end}",""]),ne.exports=v}}]);
