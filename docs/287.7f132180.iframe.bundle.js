(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(B,g,e){"use strict";e.d(g,"b",function(){return u}),e.d(g,"a",function(){return R});var m=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=e.n(m),E=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=e.n(E),N=e("./node_modules/core-js/modules/es.array.iterator.js"),V=e.n(N),Y=e("./node_modules/core-js/modules/es.object.to-string.js"),q=e.n(Y),F=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),z=e.n(F),ee=e("./node_modules/core-js/modules/es.object.from-entries.js"),ue=e.n(ee),te=e("./node_modules/core-js/modules/es.array.map.js"),ne=e.n(te),$=e("./node_modules/core-js/modules/es.object.entries.js"),H=e.n($),U=e("./node_modules/react/index.js"),i=e.n(U),I=e("./node_modules/kea/lib/index.esm.js"),p=e("./node_modules/antd/es/tabs/index.js"),T=e("./frontend/src/scenes/urls.ts"),W=e("./frontend/src/lib/components/Tooltip.tsx"),J=e("./frontend/src/lib/components/icons.tsx"),Z=e("./frontend/src/lib/components/TitleWithIcon.tsx"),ae=e("./frontend/src/lib/constants.tsx"),se=e("./frontend/src/lib/logic/featureFlagLogic.ts"),P,u;(function(l){l.Actions="actions",l.EventDefinitions="events",l.EventPropertyDefinitions="properties",l.IngestionWarnings="warnings"})(u||(u={}));var Q=(P={},j()(P,u.EventPropertyDefinitions,T.a.eventPropertyDefinitions()),j()(P,u.EventDefinitions,T.a.eventDefinitions()),j()(P,u.Actions,T.a.actions()),j()(P,u.IngestionWarnings,T.a.ingestionWarnings()),P),X=Object(I.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[se.a,["featureFlags"]]},actions:{setTab:function(v){return{tab:v}}},reducers:{tab:[u.EventDefinitions,{setTab:function(v,y){var f=y.tab;return f}}]},selectors:{showWarningsTab:[function(l){return[l.featureFlags]},function(l){return!!l[ae.i.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(y){var f=y.tab;return Q[f]||T.a.events()}}},urlToAction:function(v){var y=v.actions,f=v.values;return Object.fromEntries(Object.entries(Q).map(function(S){var M=a()(S,2),L=M[0],C=M[1];return[C,function(){f.tab!==L&&y.setTab(L)}]}))}});function R(l){var v=l.tab,y=Object(I.useValues)(X),f=y.showWarningsTab,S=Object(I.useActions)(X),M=S.setTab;return i.a.createElement(p.a,{tabPosition:"top",animated:!1,activeKey:v,onTabClick:function(C){return M(C)}},i.a.createElement(p.a.TabPane,{tab:i.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:u.EventDefinitions}),i.a.createElement(p.a.TabPane,{tab:i.a.createElement(Z.a,{icon:i.a.createElement(W.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},i.a.createElement(J.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:u.Actions}),i.a.createElement(p.a.TabPane,{tab:i.a.createElement(Z.a,{icon:i.a.createElement(W.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},i.a.createElement(J.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:u.EventPropertyDefinitions}),f&&i.a.createElement(p.a.TabPane,{tab:i.a.createElement("span",{"data-attr":"data-management-warnings-tab"},"Ingestion Warnings"),key:u.IngestionWarnings}))}try{R.displayName="DataManagementPageTabs",R.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:R.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(l){}},"./frontend/src/scenes/data-management/ingestion-warnings/IngestionWarningsView.tsx":function(B,g,e){"use strict";e.r(g),e.d(g,"scene",function(){return ve}),e.d(g,"IngestionWarningsView",function(){return ie});var m=e("./node_modules/react/index.js"),a=e.n(m),E=e("./node_modules/kea/lib/index.esm.js"),j=e("./frontend/src/scenes/urls.ts"),N=e("./frontend/src/lib/components/PageHeader.tsx"),V=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),Y=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),q=e.n(Y),F=e("./node_modules/@babel/runtime/regenerator/index.js"),z=e.n(F),ee=e("./node_modules/core-js/modules/es.array.iterator.js"),ue=e("./node_modules/core-js/modules/es.object.to-string.js"),te=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ne=e("./node_modules/kea-loaders/lib/index.js"),$=e("./frontend/src/lib/api.ts"),H=e("./frontend/src/scenes/teamLogic.tsx"),U=Object(E.kea)([Object(E.path)(["scenes","data-management","ingestion-warnings","ingestionWarningsLogic"]),Object(E.connect)({values:[H.a,["currentTeamId"]]}),Object(ne.loaders)(function(n){var s=n.values;return{data:[[],{loadData:function(){var t=q()(z.a.mark(function d(){var o,D;return z.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,$.b.get("api/projects/".concat(s.currentTeamId,"/ingestion_warnings"));case 2:return o=c.sent,D=o.results,c.abrupt("return",D);case 5:case"end":return c.stop()}},d)}));function r(){return t.apply(this,arguments)}return r}()}]}}),Object(E.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Data Management",path:j.a.eventDefinitions()},{name:"Ingestion Warnings",path:j.a.ingestionWarnings()}]}]}),Object(E.events)(function(n){var s=n.actions;return{afterMount:function(){s.loadData()}}})]),i=e("./frontend/src/lib/components/LemonTable/index.ts"),I=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),p=e("./frontend/src/lib/components/Link.tsx"),T=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),W=e.n(T),J=e("./node_modules/core-js/modules/es.array.map.js"),Z=e("./node_modules/core-js/modules/es.array.fill.js"),ae=e("./node_modules/core-js/modules/es.array.slice.js"),se=e("./node_modules/core-js/modules/es.function.name.js"),P=e("./node_modules/core-js/modules/es.array.from.js"),u=e("./node_modules/core-js/modules/es.string.iterator.js"),Q=e("./node_modules/core-js/modules/es.regexp.exec.js"),X=e("./node_modules/core-js/modules/es.symbol.js"),R=e("./node_modules/core-js/modules/es.symbol.description.js"),l=e("./node_modules/core-js/modules/es.symbol.iterator.js"),v=e("./node_modules/chart.js/dist/chart.mjs"),y=e("./frontend/src/lib/utils.tsx"),f=e("./frontend/src/lib/dayjs.ts"),S=e("./frontend/src/lib/components/Popup/Popup.tsx"),M=e("./node_modules/@floating-ui/core/dist/floating-ui.core.esm.js"),L=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),C=e.n(L),me=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss"),re=e.n(me),w={};w.insert="head",w.singleton=!1;var Te=C()(re.a,w),Pe=re.a.locals||{};function fe(n,s){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=ge(n))||s&&n&&typeof n.length=="number"){t&&(n=t);var r=0,d=function(){};return{s:d,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(b){throw b},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,D=!1,A;return{s:function(){t=t.call(n)},n:function(){var b=t.next();return o=b.done,b},e:function(b){D=!0,A=b},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(D)throw A}}}}function ge(n,s){if(!!n){if(typeof n=="string")return oe(n,s);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oe(n,s)}}function oe(n,s){(s==null||s>n.length)&&(s=n.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=n[t];return r}function K(n){var s=n.summary,t=Object(m.useRef)(null),r=Object(m.useRef)(null),d=Object(E.useValues)(H.a),o=d.timezone,D=Object(m.useState)(null),A=W()(D,2),c=A[0],b=A[1],be=Object(m.useState)(0),le=W()(be,2),pe=le[0],Oe=le[1],de=Object(m.useMemo)(function(){return Object(y.vb)(0,30).map(function(_){return Object(f.a)().subtract(_,"days").format("D MMM YYYY")}).reverse()},[]),ce=Object(m.useMemo)(function(){var _=new Array(30).fill(0),O=fe(s.warnings),h;try{for(O.s();!(h=O.n()).done;){var k=h.value,x=Object(f.c)(k.timestamp,o);_[Object(f.a)().diff(x,"days")]+=1}}catch(G){O.e(G)}finally{O.f()}return _.reverse()},[s]);return Object(m.useEffect)(function(){var _;if(t.current){var O;_=new v.a((O=t.current)===null||O===void 0?void 0:O.getContext("2d"),{type:"bar",data:{labels:de,datasets:[{data:ce,minBarLength:3,hoverBackgroundColor:"brand-blue"}]},options:{scales:{x:{display:!1},y:{beginAtZero:!0,display:!1}},plugins:{crosshair:!1,legend:{display:!1},tooltip:{enabled:!1,external:function(k){var x=k.tooltip;if(x.opacity===0){b(null);return}var G=x.dataPoints[0];b(a.a.createElement(a.a.Fragment,null,G.label,": ",G.formattedValue)),Oe(x.x)}}},maintainAspectRatio:!1,interaction:{mode:"index",axis:"x",intersect:!1}}})}return function(){var h;(h=_)===null||h===void 0||h.destroy()}},[s,de,ce]),a.a.createElement("div",{className:"warning-events-graph"},a.a.createElement("canvas",{ref:t}),a.a.createElement(S.a,{visible:!!c,overlay:c,placement:"bottom-start",middleware:[Object(M.d)({crossAxis:pe})]},a.a.createElement("div",{ref:r})))}try{K.displayName="WarningEventsGraph",K.__docgenInfo={description:"",displayName:"WarningEventsGraph",props:{summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"IngestionWarningSummary"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"]={docgenInfo:K.__docgenInfo,name:"WarningEventsGraph",path:"frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"})}catch(n){}var ve={component:ie,logic:U},Ee={cannot_merge_already_identified:"Refused to merge an already identified user via $identify or $create_alias call"},je={cannot_merge_already_identified:function(s){var t=s.details;return a.a.createElement(a.a.Fragment,null,"Refused to merge already identified person"," ",a.a.createElement(p.a,{to:j.a.person(t.sourcePersonDistinctId)},t.sourcePersonDistinctId)," into"," ",a.a.createElement(p.a,{to:j.a.person(t.targetPersonDistinctId)},t.targetPersonDistinctId)," via an $identify or $create_alias call")}};function ie(){var n=Object(E.useValues)(U),s=n.data,t=n.dataLoading;return a.a.createElement("div",{"data-attr":"manage-events-table"},a.a.createElement(N.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),a.a.createElement(V.a,{tab:V.b.IngestionWarnings}),a.a.createElement("div",{className:"mb-4"},"Data ingestion related warnings from past 30 days."),a.a.createElement(i.a,{dataSource:s,loading:t,columns:[{title:"Warning",dataIndex:"type",render:function(d,o){return a.a.createElement(a.a.Fragment,null,Ee[o.type]||o.type)}},{title:"Graph",render:function(d,o){return a.a.createElement(K,{summary:o})}},{title:"Events",dataIndex:"count",align:"right",sorter:function(d,o){return d.count-o.count}},{title:"Last Seen",dataIndex:"lastSeen",render:function(d,o){return a.a.createElement(I.b,{time:o.lastSeen,showSeconds:!0})},align:"right",sorter:function(d,o){return new Date(d.lastSeen)>new Date(o.lastSeen)?1:-1}}],expandable:{expandedRowRender:ye},defaultSorting:{columnKey:"lastSeen",order:-1},noSortingCancellation:!0}))}function ye(n){return a.a.createElement(i.a,{dataSource:n.warnings,columns:[{title:"Description",key:"description",render:function(t,r){var d=je[r.type];return d?d(r):a.a.createElement("pre",null,JSON.stringify(r.details,null,2))}},{title:"Time",dataIndex:"timestamp",render:function(t,r){return a.a.createElement(I.b,{time:r.timestamp,showSeconds:!0})},align:"right"}],embedded:!0,size:"small",showHeader:!1})}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss":function(B,g,e){var m=e("./node_modules/css-loader/dist/runtime/api.js");g=m(!1),g.push([B.i,".warning-events-graph{width:150px}.warning-events-graph canvas{height:36px}",""]),B.exports=g}}]);
