"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[73705],{"./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingFilters});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/UniversalFilters/UniversalFilters.tsx"),lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/components/UniversalFilters/universalFiltersLogic.ts"),scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/insights/filters/TestAccountFilter/index.ts"),_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingSceneLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ErrorTrackingFilters=_ref=>{let{showOrder=!0}=_ref,{dateRange,filterGroup,filterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_7__.H),{setDateRange,setFilterGroup,setFilterTestAccounts}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingLogic__WEBPACK_IMPORTED_MODULE_7__.H),{order}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_8__.D),{setOrder}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingSceneLogic__WEBPACK_IMPORTED_MODULE_8__.D);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z,{rootKey:"session-recordings",group:filterGroup,taxonomicGroupTypes:[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_3__.t.Cohorts],onChange:filterGroup=>{setFilterGroup(filterGroup)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"divide-y bg-bg-light rounded border",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex flex-1 items-center space-x-2 px-2 py-1.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(RecordingsUniversalFilterGroup,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.AddFilterButton,{type:"secondary",size:"small"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex space-x-1 justify-between px-2 py-1.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex space-x-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_DateFilter_DateFilter__WEBPACK_IMPORTED_MODULE_2__.f,{dateFrom:dateRange.date_from,dateTo:dateRange.date_to,onChange:(changedDateFrom,changedDateTo)=>{setDateRange({date_from:changedDateFrom,date_to:changedDateTo})},size:"small"}),showOrder&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonSelect,{onSelect:setOrder,onChange:setOrder,value:order,options:[{value:"last_seen",label:"Last seen"},{value:"first_seen",label:"First seen"},{value:"unique_occurrences",label:"Occurrences"},{value:"unique_users",label:"Users"},{value:"unique_sessions",label:"Sessions"}],size:"small"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(scenes_insights_filters_TestAccountFilter__WEBPACK_IMPORTED_MODULE_6__.z,{filters:{filter_test_accounts:filterTestAccounts},onChange:_ref2=>{let{filter_test_accounts}=_ref2;setFilterTestAccounts(filter_test_accounts||!1)},size:"small"})})]})]})})},RecordingsUniversalFilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),{replaceGroupValue,removeGroupValue}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_5__.d),values=filterGroup.values;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:values.map((filter,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_4__.Z.Value,{index:index,filter:filter,onRemove:()=>removeGroupValue(index),onChange:value=>replaceGroupValue(index,value)},index))})}},"./frontend/src/scenes/error-tracking/ErrorTrackingGroupScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingGroupScene:()=>ErrorTrackingGroupScene,scene:()=>scene});var src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),lemon_ui_src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),ErrorDisplay=__webpack_require__("./frontend/src/lib/components/Errors/ErrorDisplay.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),SessionRecordingsPlaylist=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),ErrorTrackingFilters=__webpack_require__("./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),sceneTypes=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),errorTrackingLogic=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingLogic.ts"),queries=__webpack_require__("./frontend/src/scenes/error-tracking/queries.ts");let errorTrackingGroupSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","error-tracking","errorTrackingGroupSceneLogic",key]),(0,index_esm.props)({}),(0,index_esm.connect)({values:[errorTrackingLogic.H,["dateRange","filterTestAccounts","filterGroup"]]}),(0,lib.loaders)(_ref=>{let{props,values}=_ref;return{events:[[],{loadEvents:async()=>{let response=await api.ZP.query((0,queries.G)({group:props.id,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,filterGroup:values.filterGroup}));return response.results.map(r=>({properties:JSON.parse(r[0]),timestamp:r[1],person:r[2]}))}}]}}),(0,index_esm.selectors)({breadcrumbs:[(_,p)=>[p.id],id=>[{key:sceneTypes.x.ErrorTracking,name:"Error tracking",path:urls.j.errorTracking()},{key:[sceneTypes.x.ErrorTrackingGroup,id],name:id}]]}),(0,index_esm.afterMount)(_ref2=>{let{actions}=_ref2;actions.loadEvents()})]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:ErrorTrackingGroupScene,logic:errorTrackingGroupSceneLogic,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id}}};function ErrorTrackingGroupScene(){let{events,eventsLoading}=(0,index_esm.useValues)(errorTrackingGroupSceneLogic),[activeTab,setActiveTab]=(0,react.useState)("details");return eventsLoading?(0,jsx_runtime.jsx)(lemon_ui_src.Spinner,{className:"self-align-center justify-self-center"}):events&&events.length>0?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(ErrorTrackingFilters.n,{showOrder:!1}),(0,jsx_runtime.jsx)(lemon_ui_src.LemonTabs,{tabs:[{key:"details",label:"Details",content:(0,jsx_runtime.jsx)(ExceptionDetails,{events:events})},{key:"recordings",label:"Recordings",content:(0,jsx_runtime.jsx)(ExceptionRecordings,{sessionIds:events.map(e=>e.properties.$session_id).filter(Boolean)})}],activeKey:activeTab,onChange:setActiveTab})]}):(0,jsx_runtime.jsx)(NotFound.T,{object:"exception"})}let ExceptionDetails=_ref2=>{let{events}=_ref2,[activeEventId,setActiveEventId]=(0,react.useState)(events.length-1),event=events[activeEventId];return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[events.length>1&&(0,jsx_runtime.jsxs)("div",{className:"flex space-x-1 items-center",children:[(0,jsx_runtime.jsx)(lemon_ui_src.LemonButton,{size:"xsmall",type:"secondary",icon:(0,jsx_runtime.jsx)(icons.ed,{}),onClick:()=>setActiveEventId(activeEventId-1),disabledReason:activeEventId<=0&&"No earlier examples"}),(0,jsx_runtime.jsx)(lemon_ui_src.LemonButton,{size:"xsmall",type:"secondary",icon:(0,jsx_runtime.jsx)(icons.VG,{}),onClick:()=>setActiveEventId(activeEventId+1),disabledReason:activeEventId>=events.length-1&&"No newer examples"}),(0,jsx_runtime.jsxs)("span",{children:[activeEventId+1," of ",events.length]})]}),(0,jsx_runtime.jsx)("div",{className:"bg-bg-light border rounded p-2",children:(0,jsx_runtime.jsx)(src.PersonDisplay,{person:event.person,withIcon:!0})}),(0,jsx_runtime.jsx)(ErrorDisplay.X,{eventProperties:event.properties})]})},ExceptionRecordings=_ref3=>{let{sessionIds}=_ref3;return(0,jsx_runtime.jsx)("div",{className:"SessionRecordingPlaylistHeightWrapper",children:(0,jsx_runtime.jsx)(SessionRecordingsPlaylist.m,{pinnedRecordings:sessionIds})})}},"./frontend/src/scenes/error-tracking/errorTrackingLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>errorTrackingLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/types.ts");let errorTrackingLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setDateRange:dateRange=>({dateRange}),setOrder:order=>({order}),setFilterGroup:filterGroup=>({filterGroup}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({dateRange:[{date_from:"-7d",date_to:null},{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],order:["last_seen",{persist:!0},{setOrder:(_,_ref2)=>{let{order}=_ref2;return order}}],filterGroup:[{type:_types__WEBPACK_IMPORTED_MODULE_1__.J2.And,values:[]},{persist:!0},{setFilterGroup:(_,_ref3)=>{let{filterGroup}=_ref3;return filterGroup}}],filterTestAccounts:[!1,{persist:!0},{setFilterTestAccounts:(_,_ref4)=>{let{filterTestAccounts}=_ref4;return filterTestAccounts}}]})])},"./frontend/src/scenes/error-tracking/errorTrackingSceneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>errorTrackingSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js");let errorTrackingSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingSceneLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setOrder:order=>({order})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({order:["last_seen",{persist:!0},{setOrder:(_,_ref)=>{let{order}=_ref;return order}}]})])},"./frontend/src/scenes/error-tracking/queries.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>errorTrackingGroupQuery,m:()=>errorTrackingQuery});var _queries_schema__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/queries/schema.ts");let errorTrackingQuery=_ref=>{let{order,dateRange,filterTestAccounts,filterGroup}=_ref;return{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_0__.OH.DataTableNode,source:{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_0__.OH.EventsQuery,select:["any(properties) -- Error","properties.$exception_type","count() as unique_occurrences -- Occurrences","count(distinct $session_id) as unique_sessions -- Sessions","count(distinct distinct_id) as unique_users -- Users","max(timestamp) as last_seen","min(timestamp) as first_seen"],orderBy:[order],...defaultProperties({dateRange,filterTestAccounts,filterGroup})},hiddenColumns:["properties.$exception_type","first_value(properties)","max(timestamp) as last_seen","min(timestamp) as first_seen"],showActions:!1,showTimings:!1}},errorTrackingGroupQuery=_ref2=>{let{group,dateRange,filterTestAccounts,filterGroup}=_ref2;return{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_0__.OH.EventsQuery,select:["properties","timestamp","person"],where:[`properties.$exception_type = '${group}'`],...defaultProperties({dateRange,filterTestAccounts,filterGroup})}},defaultProperties=_ref3=>{let{dateRange,filterTestAccounts,filterGroup}=_ref3,properties=filterGroup.values;return{event:"$exception",after:dateRange.date_from||void 0,before:dateRange.date_to||void 0,filterTestAccounts,properties}}}}]);