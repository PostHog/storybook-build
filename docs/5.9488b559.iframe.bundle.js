(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(le,b,t){"use strict";t.d(b,"a",function(){return Z});var S=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=t.n(S),X=t("./node_modules/core-js/modules/es.array.includes.js"),U=t.n(X),z=t("./node_modules/core-js/modules/es.string.includes.js"),fe=t.n(z),Q=t("./node_modules/core-js/modules/es.object.values.js"),he=t.n(Q),ve=t("./node_modules/core-js/modules/es.array.iterator.js"),ye=t.n(ve),_e=t("./node_modules/core-js/modules/es.object.to-string.js"),Te=t.n(_e),Ce=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),xe=t.n(Ce),N=t("./node_modules/core-js/modules/es.object.keys.js"),e=t.n(N),o=t("./node_modules/core-js/modules/es.symbol.js"),te=t.n(o),y=t("./node_modules/core-js/modules/es.array.filter.js"),C=t.n(y),x=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),V=t.n(x),k=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ne=t.n(k),de=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Pe=t.n(de),K=t("./node_modules/kea/lib/index.esm.js"),ae=t("./frontend/src/lib/utils.tsx"),h=t("./frontend/src/types.ts"),O=t("./frontend/src/scenes/insights/sharedUtils.ts"),F=t("./frontend/src/scenes/insights/insightLogic.ts");function se(q,$){var ee=Object.keys(q);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(q);$&&(pe=pe.filter(function(Be){return Object.getOwnPropertyDescriptor(q,Be).enumerable})),ee.push.apply(ee,pe)}return ee}function Ee(q){for(var $=1;$<arguments.length;$++){var ee=arguments[$]!=null?arguments[$]:{};$%2?se(Object(ee),!0).forEach(function(pe){T()(q,pe,ee[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(ee)):se(Object(ee)).forEach(function(pe){Object.defineProperty(q,pe,Object.getOwnPropertyDescriptor(ee,pe))})}return q}function Ie(q){return Object.values(h.x).includes(q)}var Z=Object(K.kea)({props:{},key:Object(O.c)("new"),path:function($){return["lib","components","ChartFilter","chartFilterLogic",$]},connect:function($){return{actions:[Object(F.c)($),["setFilters"]],values:[Object(F.c)($),["filters"]]}},actions:function(){return{setChartFilter:function(ee){return{chartFilter:ee}}}},selectors:{chartFilter:[function(q){return[q.filters]},function(q){var $=q.display,ee=q.funnel_viz_type;return($===h.j.FunnelViz?ee:$)||null}]},listeners:function($){var ee=$.actions,pe=$.values;return{setChartFilter:function(s){var B=s.chartFilter,Ye=pe.filters,ue=Ye.display,qe=Ye.funnel_viz_type;Ie(B)?(qe!==B||ue!==h.j.FunnelViz)&&ee.setFilters(Ee(Ee({},pe.filters),{},{display:h.j.FunnelViz,funnel_viz_type:B})):Object(ae.nb)(ue,B)||ee.setFilters(Ee(Ee({},pe.filters),{},{display:B}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(le,b,t){"use strict";t.d(b,"a",function(){return ae});var S=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=t.n(S),X=t("./node_modules/core-js/modules/es.array.iterator.js"),U=t.n(X),z=t("./node_modules/core-js/modules/es.object.to-string.js"),fe=t.n(z),Q=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),he=t.n(Q),ve=t("./node_modules/core-js/modules/es.object.keys.js"),ye=t.n(ve),_e=t("./node_modules/core-js/modules/es.symbol.js"),Te=t.n(_e),Ce=t("./node_modules/core-js/modules/es.array.filter.js"),xe=t.n(Ce),N=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),e=t.n(N),o=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),te=t.n(o),y=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),C=t.n(y),x=t("./node_modules/kea/lib/index.esm.js"),V=t("./frontend/src/lib/utils.tsx"),k=t("./frontend/src/types.ts"),ne=t("./frontend/src/scenes/insights/sharedUtils.ts"),de=t("./frontend/src/scenes/insights/insightLogic.ts");function Pe(h,O){var F=Object.keys(h);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(h);O&&(se=se.filter(function(Ee){return Object.getOwnPropertyDescriptor(h,Ee).enumerable})),F.push.apply(F,se)}return F}function K(h){for(var O=1;O<arguments.length;O++){var F=arguments[O]!=null?arguments[O]:{};O%2?Pe(Object(F),!0).forEach(function(se){T()(h,se,F[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(F)):Pe(Object(F)).forEach(function(se){Object.defineProperty(h,se,Object.getOwnPropertyDescriptor(F,se))})}return h}var ae=Object(x.kea)({props:{},key:Object(ne.c)("new"),path:function(O){return["lib","components","CompareFilter","compareFilterLogic",O]},connect:function(O){return{actions:[Object(de.c)(O),["setFilters"]],values:[Object(de.c)(O),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(F){return{compare:F}},toggleCompare:!0}},selectors:{compare:[function(h){return[h.filters]},function(h){return!!(h!=null&&h.compare)}],disabled:[function(h){return[h.filters,h.canEditInsight]},function(h,O){var F=h.insight,se=h.date_from,Ee=h.display;return!O||F===k.B.LIFECYCLE||Ee===k.j.WorldMap||se==="all"}]},listeners:function(O){var F=O.values,se=O.actions;return{setCompare:function(Ie){var Z=Ie.compare;Object(V.nb)(Z,F.compare)||se.setFilters(K(K({},F.filters),{},{compare:Z}))},toggleCompare:function(){se.setCompare(!F.compare)}}}})},"./frontend/src/lib/components/InlineMessage/InlineMessage.tsx":function(le,b,t){"use strict";t.d(b,"a",function(){return N});var S=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),T=t.n(S),X=t("./node_modules/react/index.js"),U=t.n(X),z=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),fe=t.n(z),Q=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss"),he=t.n(Q),ve={};ve.insert="head",ve.singleton=!1;var ye=fe()(he.a,ve),_e=he.a.locals||{},Te=t("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),Ce=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),xe=t("./node_modules/clsx/dist/clsx.m.js");function N(e){var o=e.children,te=e.style,y=e.icon,C=y===void 0?U.a.createElement(Te.a,null):y,x=e.type,V=x===void 0?"info":x,k=e.closable,ne=e.onClose,de=Object(X.useState)(!0),Pe=T()(de,2),K=Pe[0],ae=Pe[1],h=function(){ae(!1),ne==null||ne()};return U.a.createElement("div",{className:Object(xe.a)("inline-message",V,k&&"closable",!K&&"hidden"),style:te},U.a.createElement("div",{className:"inline-icon"},C),U.a.createElement("div",{className:"inline-main"},o),k&&U.a.createElement("div",{className:"closable",onClick:h},U.a.createElement(Ce.a,null)))}try{N.displayName="InlineMessage",N.__docgenInfo={description:"",displayName:"InlineMessage",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:{value:"<ExclamationCircleFilled />"},description:"",name:"icon",required:!1,type:{name:"Element"}},type:{defaultValue:{value:"info"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"danger"'},{value:'"info"'},{value:'"warning"'}]}},closable:{defaultValue:null,description:"",name:"closable",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"]={docgenInfo:N.__docgenInfo,name:"InlineMessage",path:"frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"})}catch(e){}},"./frontend/src/scenes/insights/InsightContainer.tsx":function(le,b,t){"use strict";t.d(b,"a",function(){return Et});var S=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=t.n(S),X=t("./node_modules/antd/es/card/index.js"),U=t("./node_modules/antd/es/row/index.js"),z=t("./node_modules/antd/es/col/index.js"),fe=t("./node_modules/core-js/modules/es.array.includes.js"),Q=t("./node_modules/core-js/modules/es.string.includes.js"),he=t("./node_modules/core-js/modules/es.object.keys.js"),ve=t("./node_modules/core-js/modules/es.symbol.js"),ye=t("./node_modules/core-js/modules/es.array.filter.js"),_e=t("./node_modules/core-js/modules/es.object.to-string.js"),Te=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Ce=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),xe=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),N=t("./node_modules/react/index.js"),e=t.n(N),o=t("./node_modules/kea/lib/index.esm.js"),te=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),y=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),C=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),x=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},k=V,ne=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),de=function(a,n){return N.createElement(ne.a,Object(x.a)(Object(x.a)({},a),{},{ref:n,icon:k}))};de.displayName="AreaChartOutlined";var Pe=N.forwardRef(de),K=t("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"},h=ae,O=function(a,n){return N.createElement(ne.a,Object(x.a)(Object(x.a)({},a),{},{ref:n,icon:h}))};O.displayName="NumberOutlined";var F=N.forwardRef(O),se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Ee=se,Ie=function(a,n){return N.createElement(ne.a,Object(x.a)(Object(x.a)({},a),{},{ref:n,icon:Ee}))};Ie.displayName="TableOutlined";var Z=N.forwardRef(Ie),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},$=q,ee=function(a,n){return N.createElement(ne.a,Object(x.a)(Object(x.a)({},a),{},{ref:n,icon:$}))};ee.displayName="PieChartOutlined";var pe=N.forwardRef(ee),Be=t("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),s=t("./frontend/src/types.ts"),B=t("./frontend/src/scenes/insights/insightLogic.ts"),Ye=t("./frontend/src/scenes/insights/filters/ActionFilter/entityFilterLogic.ts"),ue=t("./frontend/src/lib/components/Tooltip.tsx"),qe=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),Me=t("./frontend/@posthog/lemon-ui/src/index.ts");function Ke(r){var a=r.filters,n=r.onChange,l=r.disabled,u=Object(o.useValues)(B.c),i=u.insightProps,c=Object(o.useValues)(Object(te.a)(i)),v=c.chartFilter,d=Object(o.useActions)(Object(te.a)(i)),m=d.setChartFilter,g=Object(Ye.c)(a).length,f=a.insight===s.B.STICKINESS||a.insight===s.B.RETENTION,p=a.insight===s.B.STICKINESS||a.insight===s.B.RETENTION,A=a.insight===s.B.STICKINESS||a.insight===s.B.RETENTION&&!!a.breakdown&&a.breakdown!=="$geoip_country_code"&&a.breakdown!=="$geoip_country_name"||g>1,E=a.insight===s.B.STICKINESS||a.insight===s.B.RETENTION||g>1,P=a.insight===s.B.RETENTION,I=P||a.insight===s.B.STICKINESS||a.insight===s.B.RETENTION,Y=a.insight===s.B.RETENTION?s.j.ActionsTable:a.insight===s.B.FUNNELS?s.j.FunnelViz:s.j.ActionsLineGraph;function D(_){var j=_.icon,M=_.tooltip,ie=_.children,R=ie===void 0?null:ie;return e.a.createElement(ue.a,{title:M,placement:"left"},e.a.createElement("div",{className:"w-full"},j," ",R))}var re=a.insight===s.B.FUNNELS?[{value:s.x.Steps,label:e.a.createElement(D,{icon:e.a.createElement(y.a,null)},"Steps")},{value:s.x.Trends,label:e.a.createElement(D,{icon:e.a.createElement(C.a,null)},"Trends",e.a.createElement(qe.a,{type:"warning",style:{marginLeft:6,lineHeight:"1.4em"}},"BETA"))}]:[{title:"Line Chart",options:[{value:s.j.ActionsLineGraph,label:e.a.createElement(D,{icon:e.a.createElement(C.a,null)},"Linear")},{value:s.j.ActionsLineGraphCumulative,label:e.a.createElement(D,{icon:e.a.createElement(Pe,null)},"Cumulative"),disabled:f}]},{title:"Bar Chart",options:[{value:s.j.ActionsBar,label:e.a.createElement(D,{icon:e.a.createElement(K.a,null)},"Time"),disabled:P},{value:s.j.ActionsBarValue,label:e.a.createElement(D,{icon:e.a.createElement(K.a,null)},"Value"),disabled:I}]},{options:[{value:s.j.BoldNumber,label:e.a.createElement(D,{icon:e.a.createElement(F,null),tooltip:"Big and bold. Only works with one series at a time."},"Number"),disabled:E},{value:s.j.ActionsTable,label:e.a.createElement(D,{icon:e.a.createElement(Z,null)},"Table")},{value:s.j.ActionsPie,label:e.a.createElement(D,{icon:e.a.createElement(pe,null)},"Pie"),disabled:p},{value:s.j.WorldMap,label:e.a.createElement(D,{icon:e.a.createElement(Be.a,null),tooltip:"Visualize data by country. Only works with one series at a time."},"World Map"),disabled:A}]}];return e.a.createElement(Me.LemonSelect,{key:"2",value:v||Y||a.display,onChange:function(j){m(j),n==null||n(j)},dropdownPlacement:"bottom-end",dropdownMatchSelectWidth:!1,"data-attr":"chart-filter",disabled:l,options:re,size:"small"})}try{Ke.displayName="ChartFilter",Ke.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:Ke.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(r){}var nt=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function jt(){var r=Object(o.useValues)(B.c),a=r.insightProps,n=Object(o.useValues)(Object(nt.a)(a)),l=n.compare,u=n.disabled,i=Object(o.useActions)(Object(nt.a)(a)),c=i.setCompare;return u?null:e.a.createElement(Me.LemonCheckbox,{onChange:c,checked:l,disabled:u,label:e.a.createElement("span",{className:"font-normal"},"Compare to previous time period"),bordered:!0,size:"small"})}var Ct=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Oe=t.n(Ct),Fe=t("./node_modules/core-js/modules/es.array.map.js"),ke=t("./node_modules/core-js/modules/es.object.entries.js"),$e=t("./node_modules/core-js/modules/es.array.iterator.js"),_t=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),at=t("./node_modules/core-js/modules/es.array.slice.js"),Bt=t("./node_modules/core-js/modules/es.function.name.js"),Kt=t("./node_modules/core-js/modules/es.array.from.js"),Wt=t("./node_modules/core-js/modules/es.string.iterator.js"),rt=t("./node_modules/core-js/modules/es.regexp.exec.js"),Ua=t("./node_modules/core-js/modules/es.symbol.description.js"),za=t("./node_modules/core-js/modules/es.symbol.iterator.js"),H=t("./frontend/src/lib/utils.tsx"),Cn=t("./frontend/src/scenes/insights/sharedUtils.ts"),Le=t("./frontend/src/lib/dayjs.ts"),Pt=t("./frontend/src/lib/logic/featureFlagLogic.ts");function _n(r,a){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=Pn(r))||a&&r&&typeof r.length=="number"){n&&(r=n);var l=0,u=function(){};return{s:u,n:function(){return l>=r.length?{done:!0}:{done:!1,value:r[l++]}},e:function(m){throw m},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,c=!1,v;return{s:function(){n=n.call(r)},n:function(){var m=n.next();return i=m.done,m},e:function(m){c=!0,v=m},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(c)throw v}}}}function Pn(r,a){if(!!r){if(typeof r=="string")return wt(r,a);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(r,a)}}function wt(r,a){(a==null||a>r.length)&&(a=r.length);for(var n=0,l=new Array(a);n<a;n++)l[n]=r[n];return l}function Ut(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);a&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),n.push.apply(n,l)}return n}function zt(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Ut(Object(n),!0).forEach(function(l){T()(r,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(n,l))})}return r}var Ht=Object(o.kea)({props:{},key:Object(Cn.c)("new"),path:function(a){return["lib","components","IntervalFilter","intervalFilterLogic",a]},connect:function(a){return{actions:[Object(B.c)(a),["setFilters"]],values:[Object(B.c)(a),["filters"],Pt.a,["featureFlags"]]}},actions:function(){return{setInterval:function(n){return{interval:n}}}},listeners:function(a){var n=a.values,l=a.actions,u=a.selectors;return{setInterval:function(c){var v=c.interval;Object(H.nb)(v,n.filters.interval)||l.setFilters(zt(zt({},n.filters),{},{interval:v}))},setFilters:function(c,v,d,m){var g=c.filters,f=g.date_from,p=g.date_to,A=u.filters(m);if(!(!f||Object(H.nb)(f,A.date_from)&&Object(H.nb)(p,A.date_to))){if(f&&p&&Object(Le.a)(g.date_from).isValid()&&Object(Le.a)(g.date_to).isValid()){Object(Le.a)(p).diff(Object(Le.a)(f),"day")<=3?l.setInterval("hour"):Object(Le.a)(p).diff(Object(Le.a)(f),"month")<=3?l.setInterval("day"):l.setInterval("month");return}var E="day",P=_n(H.u),I;try{for(P.s();!(I=P.n()).done;){var Y=I.value,D=Y.key,re=Y.values,_=Y.defaultInterval;if(re[0]===f&&re[1]===(p||void 0)&&D!=="Custom"&&_){E=_;break}}}catch(j){P.e(j)}finally{P.f()}l.setInterval(E)}}}},selectors:{interval:[function(r){return[r.filters]},function(r){return r==null?void 0:r.interval}]}}),Sn={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function st(r){var a=r.disabled,n=Object(o.useValues)(B.c),l=n.insightProps,u=Object(o.useValues)(Ht(l)),i=u.interval,c=Object(o.useActions)(Ht(l)),v=c.setInterval;return e.a.createElement(Me.LemonSelect,{size:"small",disabled:a,value:i||void 0,dropdownMatchSelectWidth:!1,onChange:function(m){m&&v(String(m))},"data-attr":"interval-filter",options:Object.entries(Sn).map(function(d){var m=Oe()(d,2),g=m[0],f=m[1].label;return{value:g,label:f}})})}try{st.displayName="IntervalFilter",st.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:st.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(r){}var Se=t("./node_modules/antd/es/select/index.js"),Tn=t("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),xn=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function kt(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);a&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),n.push.apply(n,l)}return n}function $t(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?kt(Object(n),!0).forEach(function(l){T()(r,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(n,l))})}return r}function In(){var r=Object(o.useValues)(B.c),a=r.filters,n=Object(o.useActions)(B.c),l=n.setFilters,u=a.interval,i=a.smoothing_intervals;if(!u)return null;var c=xn.a[u].map(function(v){var d=v.value,m=v.label;return{value:d,label:d===i?e.a.createElement(e.a.Fragment,null,e.a.createElement(Tn.a,null)," ",m):m}});return c.length?e.a.createElement(Se.a,{key:u,bordered:!0,value:i||1,dropdownMatchSelectWidth:!1,onChange:function(d){l($t($t({},a),{},{smoothing_intervals:d}))},"data-attr":"smoothing-filter",options:c}):e.a.createElement(e.a.Fragment,null)}var Re=t("./frontend/src/lib/constants.tsx"),Fn=t("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),Ln=t("./node_modules/@babel/runtime/helpers/extends.js"),An=t.n(Ln),Yt=t("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts"),Mn=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function lt(r){var a=Object(o.useValues)(B.c),n=a.insightProps,l=Object(o.useValues)(Object(Yt.a)(n)),u=l.dates,i=u.dateFrom,c=u.dateTo,v=Object(o.useActions)(Object(Yt.a)(n)),d=v.setDates;return e.a.createElement(Mn.a,An()({},r,{dateFrom:i!=null?i:void 0,dateTo:c!=null?c:void 0,onChange:function(g,f){var p;d(g,f),(p=r.onChange)===null||p===void 0||p.call(r,g,f)}}))}try{lt.displayName="InsightDateFilter",lt.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},showRollingRangePicker:{defaultValue:null,description:"",name:"showRollingRangePicker",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"(() => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"dateMappingOption[]"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:lt.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(r){}var ot=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),Rn=t("./frontend/src/lib/components/DatePicker.tsx");function it(r){var a=r.disabled,n=Object(o.useValues)(B.c),l=n.insightProps,u=Object(o.useValues)(Object(ot.e)(l)),i=u.filters,c=Object(o.useActions)(Object(ot.e)(l)),v=c.setFilters,d=i.date_to&&Object(Le.a)(i.date_to).year()!==Object(Le.a)().year()?", YYYY":"";return e.a.createElement(e.a.Fragment,null,e.a.createElement(ue.a,{title:"Cohorts up to this end date"},e.a.createElement("span",{style:{maxWidth:100},className:"flex inline-flex items-center pl-2"},e.a.createElement(Rn.a,{showTime:i.period==="Hour",use12Hours:!0,format:i.period==="Hour"?"MMM D".concat(d,", h a"):"MMM D".concat(d),value:i.date_to?Object(Le.a)(i.date_to):void 0,onChange:function(g){return v({date_to:g&&Object(Le.a)(g).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",disabled:a}))))}try{it.displayName="RetentionDatePicker",it.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:it.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(r){}var be=t("./frontend/src/scenes/funnels/funnelLogic.ts"),Dn=t("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function ct(r){var a=r.disabled,n=Object(o.useValues)(B.c),l=n.insightProps,u=Object(o.useValues)(Object(be.a)(l)),i=u.barGraphLayout,c=Object(o.useActions)(Object(be.a)(l)),v=c.setFilters,d=[{value:Re.j.vertical,icon:e.a.createElement(K.a,null),label:"Left to right"},{value:Re.j.horizontal,icon:e.a.createElement(Dn.a,null),label:"Top to bottom"}];return e.a.createElement(Se.a,{defaultValue:Re.j.vertical,value:i||Re.j.vertical,onChange:function(g){return v({layout:g})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:a},e.a.createElement(Se.a.OptGroup,{label:"Graph display options"},d.map(function(m){return e.a.createElement(Se.a.Option,{key:m.value,value:m.value,label:e.a.createElement(e.a.Fragment,null,m.icon," ",m.label)},m.label)})))}try{ct.displayName="FunnelDisplayLayoutPicker",ct.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:ct.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(r){}var Nn=t("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),St=t("./frontend/src/scenes/paths/pathsLogic.ts"),Vn=t("./frontend/src/scenes/userLogic.ts");function dt(r){var a,n=r.disabled,l=Object(o.useValues)(B.c),u=l.insightProps,i=Object(o.useValues)(Object(St.b)(u)),c=i.filter,v=Object(o.useActions)(Object(St.b)(u)),d=v.setFilter,m=Object(o.useValues)(Vn.a),g=m.user,f=2,p=g!=null&&(a=g.organization)!==null&&a!==void 0&&a.available_features.includes(s.d.PATHS_ADVANCED)?20:5,A=Array.from(Array.from(Array.from(Array(p+1).keys()).slice(f)),function(E){return{label:"".concat(E," Steps"),value:E}});return e.a.createElement(Se.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:c.step_limit||St.a,onSelect:function(P){return d({step_limit:P})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:H.a.bottomRight,optionLabelProp:"label",disabled:n},A.map(function(E){return e.a.createElement(Se.a.Option,{key:E.value,value:E.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(Nn.a,null)," ",E.label)},E.label)}))}try{dt.displayName="PathStepPicker",dt.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:dt.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"})}catch(r){}var Gt=t("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function ut(r){var a=r.disabled,n=Object(o.useValues)(B.c),l=n.insightProps,u=Object(o.useValues)(Object(ot.e)(l)),i=u.retentionReference,c=Object(o.useActions)(Object(ot.e)(l)),v=c.setRetentionReference;return e.a.createElement(Se.a,{value:i,onChange:v,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:a},[{value:"total",icon:e.a.createElement(Gt.a,null),label:"Overall cohort"},{value:"previous",icon:e.a.createElement(Gt.a,null),label:"Relative to previous period"}].map(function(d){return e.a.createElement(Se.a.Option,{key:d.value,value:d.value,label:e.a.createElement(e.a.Fragment,null,d.icon," ",d.label)},d.label)}))}try{ut.displayName="ReferencePicker",ut.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:ut.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"})}catch(r){}var Jt=t("./node_modules/antd/es/tooltip/index.js"),Ne=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Bn=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Ve=t.n(Bn),Ha=t("./node_modules/core-js/modules/es.set.js"),ka=t("./node_modules/core-js/modules/es.array.concat.js"),Kn=t("./node_modules/antd/es/input-number/index.js"),Tt=t("./node_modules/clsx/dist/clsx.m.js"),Wn=0,Xt=90,wn=new Set([5,15,25,50,90]),Un=[{label:"Auto bins",value:Re.a,display:!0}].concat(Ve()(Array.from(Array.from(Array(Xt+1).keys()),function(r){return{label:"".concat(r," bins"),value:r,display:wn.has(r)}})),[{label:"Custom",value:"custom",display:!0}]);function mt(r){var a=r.disabled,n=Object(o.useValues)(B.c),l=n.insightProps,u=Object(o.useValues)(Object(be.a)(l)),i=u.filters,c=u.numericBinCount,v=Object(o.useActions)(Object(be.a)(l)),d=v.setBinCount;return e.a.createElement(Se.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:Re.a,value:i.bin_count||Re.a,onSelect:function(g){return d(g)},dropdownRender:function(g){return e.a.createElement(e.a.Fragment,null,g,e.a.createElement("div",null,e.a.createElement(Kn.a,{className:"funnel-bins-custom-picker",size:"middle",min:Wn,max:Xt,value:c,onChange:function(p){var A=typeof p=="string"?parseInt(p):p;A&&d(A)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:H.a.bottomRight,optionLabelProp:"label",disabled:a},e.a.createElement(Se.a.OptGroup,{label:"Bin Count"},Un.map(function(m){return m.value==="custom"?null:e.a.createElement(Se.a.Option,{className:Object(Tt.a)({"select-option-hidden":!m.display}),key:m.value,value:m.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(K.a,null)," ",m.label)},m.label)})))}try{mt.displayName="FunnelBinsPicker",mt.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:mt.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(r){}var zn=t("./frontend/src/lib/components/LemonSelect.tsx"),Qt=t("./frontend/src/scenes/insights/aggregationAxisFormat.ts"),We,we;function Zt(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);a&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),n.push.apply(n,l)}return n}function qt(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Zt(Object(n),!0).forEach(function(l){T()(r,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(n,l))})}return r}var Hn=function(a,n){switch(a){case s.B.FUNNELS:return n.funnel_viz_type===s.x.Trends;case s.B.RETENTION:case s.B.PATHS:return!1;case s.B.TRENDS:case s.B.STICKINESS:case s.B.LIFECYCLE:default:return!n.display||!Re.m.includes(n.display)}},kn=function(a){switch(a){case s.B.TRENDS:case s.B.STICKINESS:return!0;case s.B.RETENTION:case s.B.FUNNELS:return!1;case s.B.LIFECYCLE:case s.B.PATHS:return!1;default:return!0}},$n=(We={},T()(We,"".concat(s.B.TRENDS),!0),T()(We,"".concat(s.B.STICKINESS),!0),T()(We,"".concat(s.B.LIFECYCLE),!0),T()(We,"".concat(s.B.FUNNELS),!0),T()(We,"".concat(s.B.RETENTION),!1),T()(We,"".concat(s.B.PATHS),!0),We),Yn=(we={},T()(we,"".concat(s.B.TRENDS),!0),T()(we,"".concat(s.B.STICKINESS),!0),T()(we,"".concat(s.B.LIFECYCLE),!1),T()(we,"".concat(s.B.FUNNELS),!1),T()(we,"".concat(s.B.RETENTION),!1),T()(we,"".concat(s.B.PATHS),!1),we),Gn=function(a){var n,l;return!a.actions&&!a.events||((n=a.actions)===null||n===void 0?void 0:n.length)===0&&((l=a.events)===null||l===void 0?void 0:l.length)===0};function De(r){return e.a.createElement("span",{className:"space-x-2 flex items-center text-sm"},r.children)}function ft(r){var a=r.filters,n=r.activeView,l=r.disableTable,u=n===s.B.FUNNELS,i=n===s.B.PATHS,c=Object(o.useValues)(Pt.a),v=c.featureFlags,d=Object(o.useActions)(B.c),m=d.setFilters;return e.a.createElement("div",{className:"flex justify-between items-center flex-wrap","data-attr":"insight-filters"},e.a.createElement("div",{className:"flex items-center space-x-2 flex-wrap my-2"},$n[n]&&!l&&e.a.createElement(De,null,e.a.createElement("span",null,"Date range"),e.a.createElement(lt,{defaultValue:"Last 7 days",disabled:u&&Gn(a),makeLabel:function(f){return e.a.createElement(e.a.Fragment,null,e.a.createElement(Fn.a,null)," ",f,f=="All time"&&e.a.createElement(Jt.a,{title:"Only events dated after 2015 will be shown"},e.a.createElement(Ne.a,{className:"info-indicator"})))}})),Hn(n,a)&&e.a.createElement(De,null,e.a.createElement("span",null,e.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),e.a.createElement(st,{view:n})),n===s.B.TRENDS&&!a.breakdown_type&&!a.compare&&(!a.display||a.display===s.j.ActionsLineGraph)&&v[Re.h.SMOOTHING_INTERVAL]?e.a.createElement(De,null,e.a.createElement(In,null)):null,n===s.B.RETENTION&&e.a.createElement(De,null,e.a.createElement(it,null),e.a.createElement(ut,null)),i&&e.a.createElement(De,null,e.a.createElement(dt,null)),Yn[n]&&e.a.createElement(De,null,e.a.createElement(jt,null))),e.a.createElement("div",{className:"flex items-center space-x-4 flex-wrap my-2"},kn(n)&&e.a.createElement(e.a.Fragment,null,n===s.B.TRENDS&&e.a.createElement(De,null,e.a.createElement("span",null,Object(Qt.b)(a.display)),e.a.createElement(zn.a,{value:a.aggregation_axis_format||"numeric",onChange:function(f){f&&m(qt(qt({},a),{},{aggregation_axis_format:f}))},dropdownPlacement:"bottom-end",dropdownMatchSelectWidth:!1,"data-attr":"chart-aggregation-axis-format",options:Qt.a,size:"small"})),e.a.createElement(De,null,e.a.createElement("span",null,"Chart type"),e.a.createElement(Ke,{filters:a}))),u&&a.funnel_viz_type===s.x.Steps&&e.a.createElement(e.a.Fragment,null,e.a.createElement(De,null,e.a.createElement(ct,null))),u&&a.funnel_viz_type===s.x.TimeToConvert&&e.a.createElement(De,null,e.a.createElement(mt,null))))}try{ft.displayName="InsightDisplayConfig",ft.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'},{value:'"subscriptions"'},{value:'"sharing"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:ft.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(r){}var xt=t("./node_modules/antd/es/button/index.js"),Jn=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),vt=t.n(Jn),Xn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),en=t.n(Xn),It={};It.insert="head",It.singleton=!1;var $a=vt()(en.a,It),Ya=en.a.locals||{},Ga=t("./node_modules/core-js/modules/es.array.find.js"),tn=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function nn(){var r,a=Object(o.useValues)(B.c),n=a.insightProps,l=Object(o.useValues)(Object(be.a)(n)),u=l.filters,i=l.numberOfSeries,c=l.areFiltersValid,v=l.filterSteps,d=Object(o.useActions)(Object(be.a)(n)),m=d.changeStepRange;if(u.funnel_viz_type===s.x.Steps)return null;var g=function(P,I){m(P,I)},f=c?Array.from(Array(Math.max(i)).keys()).slice(0,-1):[0],p=c?Array.from(Array(Math.max(i)).keys()).slice(((r=u.funnel_from_step)!==null&&r!==void 0?r:0)+1):[1],A=function(P){return P.map(function(I){var Y=v.find(function(D){return D.order===I});return Y?e.a.createElement(Se.a.Option,{key:I,value:I,label:"Step ".concat(I+1)},e.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.a.createElement("span",{style:{marginRight:4}},"Step ",I+1,":"),e.a.createElement(tn.a,{filter:Y}))):null})};return e.a.createElement(U.a,{className:"funnel-options-inputs"},e.a.createElement("span",{className:"text-muted-alt"},"from"),e.a.createElement(Se.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:H.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:u.funnel_from_step||0,onChange:function(P){return g(P,u.funnel_to_step)},style:{marginLeft:4,marginRight:4}},A(f)),e.a.createElement("span",{className:"text-muted-alt"},"to"),e.a.createElement(Se.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:H.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:u.funnel_to_step||Math.max(i-1,1),onChange:function(P){return g(u.funnel_from_step,P)},style:{marginLeft:4,marginRight:4}},A(p)))}function Qn(){var r=Object(o.useValues)(B.c),a=r.insightProps,n=r.filters,l=r.activeView,u=Object(o.useValues)(Object(be.a)(a)),i=u.conversionMetrics,c=u.aggregationTargetLabel,v=Object(o.useActions)(Object(te.a)(a)),d=v.setChartFilter;if(l!==s.B.FUNNELS)return null;var m=[].concat(Ve()(n.funnel_viz_type===s.x.Steps?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(ue.a,{title:"Overall conversion rate for all ".concat(c.plural," on the entire funnel.")},e.a.createElement(Ne.a,{className:"info-indicator left"})),"Total conversion rate"),e.a.createElement("span",{className:"text-muted-alt mr-1"},":"),e.a.createElement("span",{className:"l4"},Object(H.pb)(i.totalRate,2,!0)))]:[]),Ve()(n.funnel_viz_type!==s.x.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(ue.a,{title:"Average (arithmetic mean) of the total time each ".concat(c.singular," spent in the entire funnel.")},e.a.createElement(Ne.a,{className:"info-indicator left"})),"Average time to convert"," "),n.funnel_viz_type===s.x.TimeToConvert&&e.a.createElement(nn,null),e.a.createElement("span",{className:"text-muted-alt mr-1"},":"),e.a.createElement(xt.a,{type:"link",onClick:function(){return d(s.x.TimeToConvert)},disabled:n.funnel_viz_type===s.x.TimeToConvert},e.a.createElement("span",{className:"l4"},Object(H.M)(i.averageTime))))]:[]),Ve()(n.funnel_viz_type===s.x.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),e.a.createElement(nn,null))]:[]));return e.a.createElement(U.a,{className:"funnel-canvas-label",align:"middle"},m.map(function(g,f){return e.a.createElement(e.a.Fragment,{key:f},f>0&&e.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),g)}))}var Zn=t("./frontend/src/lib/hooks/usePeriodicRerender.ts"),an=3;function qn(){var r=Object(o.useValues)(B.c),a=r.lastRefresh,n=Object(o.useActions)(B.c),l=n.loadResults;return Object(Zn.a)(15e3),e.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",a?Object(Le.a)(a).fromNow():"a while ago",e.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),e.a.createElement(Jt.a,{title:e.a.createElement(e.a.Fragment,null,"Insights can be refreshed",e.a.createElement("br",null),"every ",an," minutes.")},e.a.createElement(xt.a,{size:"small",type:"link",onClick:function(){return l(!0)},disabled:!!a&&Object(Le.a)().subtract(an-.5,"minutes").isBefore(a),style:{padding:0}},e.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var rn=t("./frontend/src/scenes/trends/PersonsModal.tsx"),Ft=t("./frontend/src/scenes/trends/viz/index.ts"),sn=t("./frontend/src/scenes/trends/SaveCohortModal.tsx"),pt=t("./frontend/src/scenes/trends/trendsLogic.ts"),ln=t("./frontend/src/scenes/insights/views/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"})}catch(r){}var Ge=t("./frontend/src/scenes/trends/personsModalLogic.ts"),Lt=t("./frontend/src/lib/utils/eventUsageLogic.ts"),on=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),ea=t("./frontend/src/scenes/insights/views/WorldMap/index.ts"),ta=t("./frontend/src/scenes/insights/views/BoldNumber/index.ts");function Je(r){var a=r.view,n=Object(o.useValues)(on.a),l=n.insightMode,u=Object(o.useValues)(B.c),i=u.insightProps,c=Object(o.useValues)(Ge.b),v=c.cohortModalVisible,d=Object(o.useActions)(Ge.b),m=d.setCohortModalVisible,g=Object(o.useValues)(Object(pt.a)(i)),f=g.filters,p=g.loadMoreBreakdownUrl,A=g.breakdownValuesLoading,E=g.showModalActions,P=g.aggregationTargetLabel,I=Object(o.useActions)(Object(pt.a)(i)),Y=I.loadMoreBreakdownValues,D=Object(o.useValues)(Ge.b),re=D.showingPeople,_=Object(o.useActions)(Ge.b),j=_.saveCohortWithUrl,M=Object(o.useActions)(Lt.f),ie=M.reportCohortCreatedFromPersonsModal,R=function(){if(!f.display||f.display===s.j.ActionsLineGraph||f.display===s.j.ActionsLineGraphCumulative||f.display===s.j.ActionsBar)return e.a.createElement(Ft.b,null);if(f.display===s.j.BoldNumber)return e.a.createElement(ta.a,null);if(f.display===s.j.ActionsTable)return e.a.createElement(o.BindLogic,{logic:pt.a,props:{dashboardItemId:null,view:a,filters:null}},e.a.createElement(ln.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(a),canEditSeriesNameInline:l===s.C.Edit,isMainInsightView:!0}));if(f.display===s.j.ActionsPie)return e.a.createElement(Ft.c,null);if(f.display===s.j.ActionsBarValue)return e.a.createElement(Ft.a,null);if(f.display===s.j.WorldMap)return e.a.createElement(ea.a,null)};return e.a.createElement(e.a.Fragment,null,(f.actions||f.events)&&e.a.createElement("div",{className:f.display!==s.j.ActionsTable&&f.display!==s.j.WorldMap&&f.display!==s.j.BoldNumber?"trends-insights-container":void 0},R()),f.breakdown&&p&&e.a.createElement("div",{className:"my-4 flex flex-col items-center"},e.a.createElement("div",{className:"text-muted mb-2"},"For readability, ",e.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),e.a.createElement(Me.LemonButton,{onClick:Y,loading:A,size:"small",type:"secondary"},"Load more breakdown values")),e.a.createElement(rn.a,{isOpen:re&&!v,view:a,filters:f,onSaveCohort:function(){m(!0)},showModalActions:E,aggregationTargetLabel:P}),e.a.createElement(sn.a,{visible:v,onOk:function(J){j(J),m(!1),ie(f)},onCancel:function(){return m(!1)}}))}try{Je.displayName="TrendInsight",Je.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:Je.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(r){}var na=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),aa=t("./frontend/src/scenes/paths/Paths.tsx"),et=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function ra(){var r=Object(o.useValues)(B.c),a=r.activeView;return a!==s.B.PATHS?null:e.a.createElement(U.a,{className:"funnel-canvas-label",align:"middle"},e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var cn=t("./frontend/src/lib/components/InsightLegend/InsightLegend.tsx"),Ja=t("./node_modules/core-js/modules/es.object.from-entries.js"),Xa=t("./node_modules/core-js/modules/es.array.flat-map.js"),Qa=t("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),sa=t("./frontend/src/lib/components/LemonTable/index.ts"),gt=t("./frontend/src/scenes/funnels/funnelUtils.ts"),At=t("./frontend/src/scenes/insights/views/Funnels/funnelStepTableUtils.tsx"),la=t("./frontend/src/models/cohortsModel.ts"),dn=t("./frontend/src/lib/components/LemonCheckbox/index.ts"),un=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Mt=t("./frontend/src/lib/components/LemonRow/index.ts"),Xe=t("./frontend/src/scenes/funnels/ValueInspectorButton.tsx"),oa=t("./frontend/src/lib/colors.ts"),Ue=t("./frontend/src/lib/components/icons.tsx"),ia=t("./frontend/src/models/propertyDefinitionsModel.ts"),ca=t("./frontend/src/scenes/insights/utils.tsx");function da(){var r=Object(o.useValues)(B.c),a=r.insightProps,n=Object(be.a)(a),l=Object(o.useValues)(n),u=l.insightLoading,i=l.steps,c=l.flattenedBreakdowns,v=l.hiddenLegendKeys,d=l.visibleStepsWithConversionMetrics,m=Object(o.useActions)(n),g=m.setHiddenById,f=m.toggleVisibilityByBreakdown,p=m.openPersonsModalForSeries,A=Object(o.useValues)(la.a),E=A.cohorts,P=Object(o.useValues)(ia.a),I=P.formatPropertyValueForDisplay,Y=c.length===1,D=c==null?void 0:c.every(function(_){return!v[Object(gt.l)(d==null?void 0:d[0],_.breakdown_value)]}),re=[{children:[{title:Y?"Breakdown":e.a.createElement(dn.a,{checked:D||(c!=null&&c.some(function(_){return!v[Object(gt.l)(d==null?void 0:d[0],_.breakdown_value)]})?"indeterminate":!1),onChange:function(){g(Object.fromEntries(d.flatMap(function(j){return c.map(function(M){return[Object(gt.l)(j,M.breakdown_value),D]})})))},label:e.a.createElement("span",{className:"font-bold"},"Breakdown"),size:"small"}),dataIndex:"breakdown_value",render:function(j){var M=Object(ca.d)(E,I,j);return Y?e.a.createElement("span",{className:"font-medium"},M):e.a.createElement(dn.a,{checked:!v[Object(gt.l)(d==null?void 0:d[0],j)],onChange:function(){return f(j)},label:M})}},{title:e.a.createElement(e.a.Fragment,null,"Total",e.a.createElement("br",null),"conversion"),render:function(j,M){var ie,R;return Object(H.pb)((ie=M==null||(R=M.conversionRates)===null||R===void 0?void 0:R.total)!==null&&ie!==void 0?ie:0,2,!0)},align:"right"}]}].concat(Ve()(i.map(function(_,j){return{title:e.a.createElement(Mt.a,{icon:e.a.createElement(un.a,{name:j+1,color:un.b.Gray}),style:{font:"inherit",padding:0},size:"small"},e.a.createElement(tn.a,{filter:Object(At.a)(_)})),children:[{title:j===0?"Entered":"Converted",render:function(ie,R){var W,J,G=(W=R.steps)===null||W===void 0?void 0:W[j];return G&&e.a.createElement(Xe.a,{onClick:function(){return p({step:_,series:G,converted:!0})},style:{padding:0}},Object(H.N)((J=G.count)!==null&&J!==void 0?J:0))},align:"right"}].concat(Ve()(j===0?[]:[{title:"Dropped\xA0off",render:function(ie,R){var W,J,G=(W=R.steps)===null||W===void 0?void 0:W[j];return G&&e.a.createElement(Xe.a,{onClick:function(){return p({step:_,series:G,converted:!1})},style:{padding:0}},Object(H.N)((J=G.droppedOffFromPrevious)!==null&&J!==void 0?J:0))},align:"right"}]),[{title:e.a.createElement(e.a.Fragment,null,"Conversion",e.a.createElement("br",null),"so\xA0far"),render:function(ie,R){var W,J,G,w,ce,oe,L=Object(At.b)(R,_.order);return L!=null&&L.total?e.a.createElement(Mt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(Ue.IconFlag,null),size:"small"},Object(H.pb)((W=(J=R.steps)===null||J===void 0||(G=J[_.order])===null||G===void 0?void 0:G.conversionRates.total)!==null&&W!==void 0?W:0,2,!0)):Object(H.pb)((w=(ce=R.steps)===null||ce===void 0||(oe=ce[_.order])===null||oe===void 0?void 0:oe.conversionRates.total)!==null&&w!==void 0?w:0,2,!0)},align:"right"}],Ve()(j===0?[]:[{title:e.a.createElement(e.a.Fragment,null,"Conversion",e.a.createElement("br",null),"from\xA0previous"),render:function(ie,R){var W,J,G,w,ce,oe,L=Object(At.b)(R,_.order);return!(L!=null&&L.total)&&L!==null&&L!==void 0&&L.fromPrevious?e.a.createElement(Mt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(Ue.IconFlag,null),size:"small"},Object(H.pb)((W=(J=R.steps)===null||J===void 0||(G=J[_.order])===null||G===void 0?void 0:G.conversionRates.fromPrevious)!==null&&W!==void 0?W:0,2,!0)):Object(H.pb)((w=(ce=R.steps)===null||ce===void 0||(oe=ce[_.order])===null||oe===void 0?void 0:oe.conversionRates.fromPrevious)!==null&&w!==void 0?w:0,2,!0)},align:"right"},{title:e.a.createElement(e.a.Fragment,null,"Median",e.a.createElement("br",null),"time"),render:function(ie,R){var W,J;return((W=R.steps)===null||W===void 0||(J=W[_.order])===null||J===void 0?void 0:J.median_conversion_time)!=null?Object(H.M)(R.steps[_.order].median_conversion_time,3):"\u2013"},align:"right",width:0,className:"whitespace-nowrap"},{title:e.a.createElement(e.a.Fragment,null,"Average",e.a.createElement("br",null),"time"),render:function(ie,R){var W,J;return((W=R.steps)===null||W===void 0||(J=W[_.order])===null||J===void 0?void 0:J.average_conversion_time)!=null?Object(H.M)(R.steps[_.order].average_conversion_time,3):"\u2013"},align:"right",width:0,className:"whitespace-nowrap"}]))}})));return e.a.createElement(sa.a,{dataSource:c,columns:re,loading:u,rowKey:"breakdownIndex",rowStatus:function(j){return j.significant?"highlighted":null},rowRibbonColor:function(j){var M;return Object(oa.c)((M=j==null?void 0:j.breakdownIndex)!==null&&M!==void 0?M:0)}})}var ua=t("./frontend/src/lib/components/Animation/Animation.tsx"),ma=t("./frontend/src/lib/animations/animations.ts"),fa=t("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),va=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss"),mn=t.n(va),Rt={};Rt.insert="head",Rt.singleton=!1;var Za=vt()(mn.a,Rt),qa=mn.a.locals||{},pa=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),ga=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),ha=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),er=t("./node_modules/core-js/modules/es.number.is-integer.js"),tr=t("./node_modules/core-js/modules/es.number.constructor.js"),nr=t("./node_modules/core-js/modules/es.number.to-fixed.js"),ar=t("./node_modules/core-js/modules/es.string.split.js"),Ea=t("./node_modules/antd/es/spin/index.js"),Dt=t("./node_modules/antd/es/table/index.js"),ba=t("./node_modules/antd/lib/table/Column.js"),Ae=t.n(ba),fn=t("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),ya={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},Oa=ya,vn=function(a,n){return N.createElement(ne.a,Object(x.a)(Object(x.a)({},a),{},{ref:n,icon:Oa}))};vn.displayName="FallOutlined";var pn=N.forwardRef(vn),gn=t("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),ja=t("./node_modules/antd/lib/checkbox/Checkbox.js"),ht=t.n(ja),Qe=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ca=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss"),hn=t.n(Ca),Nt={};Nt.insert="head",Nt.singleton=!1;var rr=vt()(hn.a,Nt),sr=hn.a.locals||{},_a=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function tt(r){var a=r.id,n=r.offset,l=r.children,u=Object(o.useActions)(Object(_a.a)({id:a,offset:n})),i=u.scrolling,c=Object(N.useRef)(null);return Object(N.useEffect)(function(){var v=c.current;return document.addEventListener("scroll",function(){return v&&i(v)}),function(){return document.removeEventListener("scroll",function(){return v&&i(v)})}},[c.current]),e.a.createElement("div",{ref:c},l)}try{tt.displayName="VisibilitySensor",tt.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:tt.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(r){}var Ze=t("./frontend/src/lib/components/LemonButton/index.ts"),En=t("./frontend/src/lib/components/Popup/Popup.tsx"),Pa=t("./node_modules/antd/es/modal/index.js"),Sa=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),Ta=t("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),xa=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),Ia=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss"),bn=t.n(Ia),Vt={};Vt.insert="head",Vt.singleton=!1;var lr=vt()(bn.a,Vt),or=bn.a.locals||{},Fa=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),yn=t("./frontend/src/lib/components/Link.tsx"),La=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function Aa(){var r=Object(o.useValues)(B.c),a=r.insightProps,n=Object(be.a)(a),l=Object(o.useValues)(n),u=l.correlationsLoading,i=l.funnelCorrelationDetails,c=l.parseDisplayNameForCorrelation,v=l.correlationMatrixAndScore,d=Object(o.useActions)(n),m=d.setFunnelCorrelationDetails,g=d.openCorrelationPersonsModal,f=(i==null?void 0:i.result_type)===s.t.Events?"event":"property",p=(i==null?void 0:i.result_type)===s.t.Events?"performed event":"have property",A=e.a.createElement(e.a.Fragment,null);if(i){var E=c(i),P=E.first_value,I=E.second_value;A=e.a.createElement(e.a.Fragment,null,e.a.createElement(Qe.a,{value:P}),I!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Qe.a,{value:I,disablePopover:!0})))}var Y=v.correlationScore,D=v.truePositive,re=v.falsePositive,_=v.trueNegative,j=v.falseNegative,M=v.correlationScoreStrength,ie=M==="strong"?e.a.createElement(Sa.a,{style:{color:"var(--success)"}}):M==="moderate"?e.a.createElement(Ta.a,{style:{color:"var(--warning)"}}):e.a.createElement(xa.a,{style:{color:"var(--danger)"}}),R=function(){return m(null)};return e.a.createElement(Pa.a,{className:"correlation-matrix",visible:!!i,onCancel:R,destroyOnClose:!0,footer:e.a.createElement(xt.a,{onClick:R},"Dismiss"),width:600,title:"Correlation details"},e.a.createElement("div",{className:"correlation-table-wrapper"},u?e.a.createElement("div",{className:"mt-4 text-center"},e.a.createElement(Fa.a,{className:"text-4xl"})):i?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"text-muted-alt mb-4"},"The table below displays the correlation details for users who ",p," ",e.a.createElement("b",null,A),"."),e.a.createElement("table",null,e.a.createElement("thead",null,e.a.createElement("tr",{className:"table-title"},e.a.createElement("td",{colSpan:3},"Results matrix")),e.a.createElement("tr",null,e.a.createElement("td",null,(i==null?void 0:i.result_type)===s.t.Events?"Performed event":"Has property"),e.a.createElement("td",null,"Success"),e.a.createElement("td",null,"Dropped off"))),e.a.createElement("tbody",null,e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"Yes"),e.a.createElement("td",null,e.a.createElement(ue.a,{title:"True positive (TP) - Percentage of users who ".concat(p," and completed the funnel.")},e.a.createElement("div",{className:"percentage"},D?Object(H.pb)(D/(D+re)):"0.00%")),D===0?"0 users":e.a.createElement(yn.a,{onClick:function(){g(i,!0)}},Object(H.qb)(D,"user",void 0,!0))),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ue.a,{title:"False negative (FN) - Percentage of users who ".concat(p," and did not complete the funnel.")},j?Object(H.pb)(j/(j+_)):"0.00%")),j===0?"0 users":e.a.createElement(yn.a,{onClick:function(){g(i,!1)}},Object(H.qb)(j,"user",void 0,!0)))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"No"),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ue.a,{title:"False positive (FP) - Percentage of users who did not ".concat(p," and completed the funnel.")},re?Object(H.pb)(re/(D+re)):"0.00%")),Object(H.qb)(re,"user",void 0,!0)),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(ue.a,{title:"True negative (TN) - Percentage of users who did not ".concat(p," and did not complete the funnel.")},_?Object(H.pb)(_/(j+_)):"0.00%")),Object(H.qb)(_,"user",void 0,!0))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"}),e.a.createElement("td",null,e.a.createElement("b",null,"100%")),e.a.createElement("td",null,e.a.createElement("b",null,"100%"))))),e.a.createElement("div",{className:"mt-4 text-center"},Object(H.i)((i==null?void 0:i.result_type)||"")," ",e.a.createElement("b",null,A)," ","has a"," ",(i==null?void 0:i.correlation_type)===s.u.Success?e.a.createElement("b",{className:"text-success"},"positive"," ",e.a.createElement(ue.a,{title:"Positive correlation means this ".concat(f," is correlated with a successful conversion.")},e.a.createElement(Ne.a,{className:"cursor-pointer"}))):e.a.createElement("b",{className:"text-danger"},"negative"," ",e.a.createElement(ue.a,{title:"Negative correlation means this ".concat(f," is correlated with an unsuccessful conversion (user dropped off).")},e.a.createElement(Ne.a,{className:"cursor-pointer"})))," ","correlation score of"," ",e.a.createElement("b",{style:{color:M==="strong"?"var(--success)":M==="moderate"?"var(--warning)":"var(--danger)"}},e.a.createElement(ue.a,{title:"This ".concat(f," has ").concat(M," correlation.")},e.a.createElement("span",{style:{cursor:"pointer"}},ie," ",Y.toFixed(3)))))):e.a.createElement("div",null,e.a.createElement(La.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function Ma(){var r=Object(o.useValues)(B.c),a=r.insightProps,n=Object(be.a)(a),l=Object(o.useValues)(n),u=l.stepsWithCount,i=l.correlationValues,c=l.correlationTypes,v=l.eventHasPropertyCorrelations,d=l.eventWithPropertyCorrelationsValues,m=l.parseDisplayNameForCorrelation,g=l.correlationsLoading,f=l.eventWithPropertyCorrelationsLoading,p=l.nestedTableExpandedKeys,A=l.correlationPropKey,E=l.filters,P=l.aggregationTargetLabel,I=Object(o.useActions)(n),Y=I.setCorrelationTypes,D=I.loadEventWithPropertyCorrelations,re=I.addNestedTableExpandedKey,_=I.removeNestedTableExpandedKey,j=I.openCorrelationPersonsModal,M=I.loadCorrelations,ie=Object(o.useActions)(Lt.f),R=ie.reportCorrelationInteraction;Object(N.useEffect)(function(){M({})},[E]);var W=function(L){c?c.includes(L)?Y(c.filter(function(me){return me!==L})):Y([].concat(Ve()(c),[L])):Y([L])},J=function(L){var me=function(Ot){return Ot<10&&!Number.isInteger(Ot)?Ot.toFixed(1):Ot.toFixed()},je=L.correlation_type===s.u.Success,ge=m(L),He=ge.first_value,bt=ge.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,je?e.a.createElement(fn.a,{style:{color:"green"}}):e.a.createElement(pn,{style:{color:"red"}})," ",e.a.createElement(Qe.a,{value:He}),bt!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Qe.a,{value:bt,disablePopover:!0}))),e.a.createElement("div",null,Object(H.i)(P.plural)," ",E.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,me(L.odds_ratio),"x ",je?"more":"less"," likely"))," ","to"," ",L.result_type===s.t.EventWithProperties?"have this event property":"do this event"),e.a.createElement(Aa,null))},G=function(L){return e.a.createElement(Xe.a,{onClick:function(){j(L,!0)}},L.success_count)},w=function(L){return e.a.createElement(Xe.a,{onClick:function(){j(L,!1)}},L.failure_count)},ce=function(L){return f?e.a.createElement("div",{className:"nested-properties-loading"},e.a.createElement(Ea.a,null),e.a.createElement("h3",null,"Loading correlation results"),e.a.createElement("p",null,"This process can take up to 20 seconds. ")):e.a.createElement("div",null,e.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),e.a.createElement(Dt.a,{dataSource:d[L],rowKey:function(je){return je.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(je,ge){return R(s.t.EventWithProperties,"pagination change",{page:je,page_size:ge})}}},e.a.createElement(Ae.a,{title:"Property",key:"eventName",render:function(je,ge){return J(ge)},align:"left"}),e.a.createElement(Ae.a,{title:"Completed",key:"success_count",render:function(je,ge){return G(ge)},width:90,align:"center"}),e.a.createElement(Ae.a,{title:"Dropped off",key:"failure_count",render:function(je,ge){return w(ge)},width:120,align:"center"}),e.a.createElement(Ae.a,{title:"",key:"actions",render:function(je,ge){return e.a.createElement(On,{record:ge})},align:"center",width:30})))};return u.length>1?e.a.createElement(tt,{id:A,offset:152},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement("span",{className:"funnel-correlation-header"},e.a.createElement("span",{className:"table-header"},e.a.createElement(Ue.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),e.a.createElement("span",{className:"table-options"},e.a.createElement("p",{className:"title"},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return W(s.u.Success)}},e.a.createElement(ht.a,{checked:c.includes(s.u.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return W(s.u.Failure)}},e.a.createElement(ht.a,{checked:c.includes(s.u.Failure),style:{pointerEvents:"none"}},"Dropoff")))),e.a.createElement(Dt.a,{dataSource:i,loading:g,size:"small",scroll:{x:"max-content"},rowKey:function(L){return L.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return R(s.t.Events,"load more")}},expandable:{expandedRowRender:function(L){return ce(L.event.event)},expandedRowKeys:p,rowExpandable:function(){return E.aggregation_group_type_index===void 0},expandIcon:function(L){var me=L.expanded,je=L.onExpand,ge=L.record,He=L.expandable;return He?me?e.a.createElement(ue.a,{title:"Collapse"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(yt){_(ge.event.event),je(ge,yt)}},e.a.createElement(Ue.IconUnfoldLess,null))):e.a.createElement(ue.a,{title:"Expand to see correlated properties for this event"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(yt){!v(ge.event.event)&&D(ge.event.event),re(ge.event.event),je(ge,yt)}},e.a.createElement(Ue.IconUnfoldMore,null))):null}}},e.a.createElement(Ae.a,{title:"Event",key:"eventName",render:function(L,me){return J(me)},align:"left",ellipsis:!0}),e.a.createElement(Ae.a,{title:e.a.createElement("div",{className:"flex items-center"},"Completed",e.a.createElement(ue.a,{title:"".concat(Object(H.i)(P.plural)," ").concat(E.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},e.a.createElement(Ne.a,{className:"column-info"}))),key:"success_count",render:function(L,me){return G(me)},width:90,align:"center"}),e.a.createElement(Ae.a,{title:e.a.createElement("div",{className:"flex items-center"},"Dropped off",e.a.createElement(ue.a,{title:e.a.createElement(e.a.Fragment,null,Object(H.i)(P.plural)," ",E.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(Ne.a,{className:"column-info"}))),key:"failure_count",render:function(L,me){return w(me)},width:120,align:"center"}),e.a.createElement(Ae.a,{title:"",key:"actions",render:function(L,me){return e.a.createElement(On,{record:me})},width:30})))):null}var On=function(a){var n=a.record,l=Object(o.useValues)(B.c),u=l.insightProps,i=Object(be.a)(u),c=Object(o.useActions)(i),v=c.excludeEventPropertyFromProject,d=c.excludeEventFromProject,m=c.setFunnelCorrelationDetails,g=Object(o.useValues)(i),f=g.isEventPropertyExcluded,p=g.isEventExcluded,A=n.event.event.split("::"),E=Object(N.useState)(!1),P=Oe()(E,2),I=P[0],Y=P[1];return e.a.createElement(U.a,{style:{justifyContent:"flex-end"}},e.a.createElement(En.a,{visible:I,actionable:!0,onClickOutside:function(){return Y(!1)},overlay:e.a.createElement(e.a.Fragment,null,n.result_type===s.t.Events&&e.a.createElement(Ze.a,{onClick:function(){return m(n)},fullWidth:!0,status:"stealth"},"View correlation details"),e.a.createElement(Ze.a,{disabled:n.result_type===s.t.EventWithProperties?f(A[1]):p(A[0]),onClick:function(){return n.result_type===s.t.EventWithProperties?v(A[0],A[1]):d(A[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",status:"stealth"},"Exclude event from project"))},e.a.createElement(Ze.a,{status:"stealth",onClick:function(){return Y(!I)}},e.a.createElement(gn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},Ra=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function Da(){var r=Object(o.useValues)(B.c),a=r.insightProps,n=Object(be.a)(a),l=Object(o.useValues)(n),u=l.stepsWithCount,i=l.propertyCorrelationValues,c=l.propertyCorrelationTypes,v=l.excludedPropertyNames,d=l.parseDisplayNameForCorrelation,m=l.propertyCorrelationsLoading,g=l.inversePropertyNames,f=l.propertyNames,p=l.correlationPropKey,A=l.allProperties,E=l.filters,P=l.aggregationTargetLabel,I=Object(o.useActions)(n),Y=I.setPropertyCorrelationTypes,D=I.setPropertyNames,re=I.openCorrelationPersonsModal,_=I.loadPropertyCorrelations,j=Object(o.useActions)(Lt.f),M=j.reportCorrelationInteraction;Object(N.useEffect)(function(){f.length===0&&D(A),_({})},[E]);var ie=function(w){c?c.includes(w)?Y(c.filter(function(ce){return ce!==w})):Y([].concat(Ve()(c),[w])):Y([w])},R=function(w){return e.a.createElement(Xe.a,{onClick:function(){re(w,!0)}},w.success_count)},W=function(w){return e.a.createElement(Xe.a,{onClick:function(){re(w,!1)}},w.failure_count)},J=function(w){var ce=function(He){return He<10&&!Number.isInteger(He)?He.toFixed(1):He.toFixed()},oe=w.correlation_type===s.u.Success,L=d(w),me=L.first_value,je=L.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,oe?e.a.createElement(fn.a,{style:{color:"green"}}):e.a.createElement(pn,{style:{color:"red"}})," ",e.a.createElement(Qe.a,{value:me}),je!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Qe.a,{value:je,disablePopover:!0}))),e.a.createElement("div",null,Object(H.i)(P.plural)," ",E.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,ce(w.odds_ratio),"x ",oe?"more":"less"," likely"))," ","to have this property value"))};return u.length>1?e.a.createElement(tt,{offset:150,id:"".concat(p,"-properties")},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement(U.a,{className:"funnel-correlation-header"},e.a.createElement(z.a,{className:"table-header"},e.a.createElement(Ue.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),e.a.createElement(z.a,{className:"table-options"},e.a.createElement(U.a,{style:{display:"contents"}},A.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"title"},"PROPERTIES "),e.a.createElement(Ra.a,{value:new Set(f),onChange:function(w){return D(w)},allProperties:g(v||[])}))),e.a.createElement(U.a,{style:{display:"contents"}},e.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return ie(s.u.Success)}},e.a.createElement(ht.a,{checked:c.includes(s.u.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return ie(s.u.Failure)}},e.a.createElement(ht.a,{checked:c.includes(s.u.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),e.a.createElement(Dt.a,{dataSource:i,loading:m,scroll:{x:"max-content"},size:"small",rowKey:function(w){return w.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(w,ce){return M(s.t.Properties,"pagination change",{page:w,page_size:ce})}}},e.a.createElement(Ae.a,{title:"".concat(Object(H.i)(P.singular)," property"),key:"propertName",render:function(w,ce){return J(ce)},align:"left"}),e.a.createElement(Ae.a,{title:e.a.createElement("div",{className:"flex items-center"},"Completed",e.a.createElement(ue.a,{title:"".concat(Object(H.i)(P.plural)," ").concat(E.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},e.a.createElement(Ne.a,{className:"column-info"}))),key:"success_count",render:function(w,ce){return R(ce)},width:90,align:"center"}),e.a.createElement(Ae.a,{title:e.a.createElement("div",{className:"flex items-center"},"Dropped off",e.a.createElement(ue.a,{title:e.a.createElement(e.a.Fragment,null,Object(H.i)(P.plural)," ",E.aggregation_group_type_index!=null?"that":"who"," have this property and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(Ne.a,{className:"column-info"}))),key:"failure_count",render:function(w,ce){return W(ce)},width:120,align:"center"}),e.a.createElement(Ae.a,{title:"",key:"actions",render:function(w,ce){return e.a.createElement(Na,{record:ce})},align:"center",width:30})))):null}var Na=function(a){var n=a.record,l=Object(o.useValues)(B.c),u=l.insightProps,i=Object(be.a)(u),c=Object(o.useActions)(i),v=c.excludePropertyFromProject,d=c.setFunnelCorrelationDetails,m=Object(o.useValues)(i),g=m.isPropertyExcludedFromProject,f=(n.event.event||"").split("::")[0],p=Object(N.useState)(!1),A=Oe()(p,2),E=A[0],P=A[1];return e.a.createElement(U.a,{style:{justifyContent:"flex-end"}},e.a.createElement(En.a,{visible:E,actionable:!0,onClickOutside:function(){return P(!1)},overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(Ze.a,{onClick:function(){return d(n)},fullWidth:!0,status:"stealth"},"View correlation details"),e.a.createElement(Ze.a,{disabled:g(f),onClick:function(){return v(f)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",status:"stealth"},"Exclude property from project"))},e.a.createElement(Ze.a,{status:"stealth",onClick:function(){return P(!E)}},e.a.createElement(gn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},Va=function(){var a,n=Object(o.useValues)(B.c),l=n.insightProps,u=Object(o.useValues)(Object(be.a)(l)),i=u.isSkewed,c=u.stepsWithCount,v=u.correlationFeedbackHidden,d=u.correlationDetailedFeedbackVisible,m=u.correlationFeedbackRating,g=u.correlationAnalysisAvailable,f=u.aggregationTargetLabel,p=Object(o.useActions)(Object(be.a)(l)),A=p.sendCorrelationAnalysisFeedback,E=p.hideSkewWarning,P=p.hideCorrelationAnalysisFeedback,I=p.setCorrelationFeedbackRating,Y=p.setCorrelationDetailedFeedback,D=Object(o.useValues)(ha.a),re=D.preflight,_=Object(N.useRef)(null);return c.length<=1?null:!g&&!(re!=null&&(a=re.instance_preferences)!==null&&a!==void 0&&a.disable_paid_fs)?e.a.createElement(ga.a,{identifier:s.d.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(f.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(f.plural," are converting or dropping off.")}):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Correlation analysis"),e.a.createElement("div",{className:"funnel-correlation"},i&&e.a.createElement(X.a,{className:"skew-warning"},e.a.createElement("h4",null,e.a.createElement(Ue.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",e.a.createElement(pa.a,{className:"close-button",onClick:E})),e.a.createElement("div",null,e.a.createElement("b",null,"Tips for adjusting your funnel:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),e.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),e.a.createElement(Ma,null),!v&&e.a.createElement("div",{className:"border rounded p-4 space-y-2 mt-4"},e.a.createElement("div",{className:"flex items-center justify-between"},e.a.createElement("h4",{className:"text-muted-alt"},e.a.createElement(fa.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?"),e.a.createElement("div",{className:"flex items-center gap-2"},!!m&&e.a.createElement("i",{className:"text-success mr-2"},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(j,M){return e.a.createElement(Me.LemonButton,{key:M,active:m===j[0],onClick:function(){m===j[0]?I(0):(I(j[0]),setTimeout(function(){var R;return(R=_.current)===null||R===void 0?void 0:R.focus()},100))}},j[1])}),e.a.createElement(Me.LemonButton,{icon:e.a.createElement(Ue.IconClose,null),onClick:P,status:"stealth"}))),d?e.a.createElement(e.a.Fragment,null,e.a.createElement("form",{onSubmit:A,className:"space-y-2"},e.a.createElement(Me.LemonTextArea,{onBlur:function(M){return Y(M.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",ref:_,onPressEnter:function(){var M;(M=_.current)===null||M===void 0||M.blur(),A()}}),e.a.createElement("div",{className:"flex justify-end"},e.a.createElement(Me.LemonButton,{"data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback")))):null),e.a.createElement(Da,null)))},Ba=t("./frontend/src/scenes/funnels/Funnel.tsx");function Ka(){var r=Object(o.useValues)(B.c),a=r.insightProps,n=Object(o.useValues)(Object(be.a)(a)),l=n.isValidFunnel,u=n.insightLoading,i=n.filters,c=n.areFiltersValid,v=n.aggregationTargetLabel,d=Object(o.useValues)(Ge.b),m=d.showingPeople,g=d.cohortModalVisible,f=Object(o.useActions)(Ge.b),p=f.setCohortModalVisible,A=f.saveCohortWithUrl,E=l&&c||u;return e.a.createElement(e.a.Fragment,null,e.a.createElement(rn.a,{isOpen:m&&!g,view:s.B.FUNNELS,filters:i,onSaveCohort:function(){p(!0)},showModalActions:i.aggregation_group_type_index==null,aggregationTargetLabel:v}),e.a.createElement("div",{className:Object(Tt.a)("funnel-insights-container",{"non-empty-state":E})},e.a.createElement(Ba.a,null)),e.a.createElement(sn.a,{visible:g,onOk:function(I){A(I),p(!1)},onCancel:function(){return p(!1)}}))}var Wa=t("./frontend/src/lib/components/ExportButton/ExportButton.tsx"),wa=t("./frontend/src/lib/components/AlertMessage/index.ts"),ze,jn=(ze={},T()(ze,"".concat(s.B.TRENDS),e.a.createElement(Je,{view:s.B.TRENDS})),T()(ze,"".concat(s.B.STICKINESS),e.a.createElement(Je,{view:s.B.STICKINESS})),T()(ze,"".concat(s.B.LIFECYCLE),e.a.createElement(Je,{view:s.B.LIFECYCLE})),T()(ze,"".concat(s.B.FUNNELS),e.a.createElement(Ka,null)),T()(ze,"".concat(s.B.RETENTION),e.a.createElement(na.a,null)),T()(ze,"".concat(s.B.PATHS),e.a.createElement(aa.a,null)),ze);function Et(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1,disableCorrelationTable:!1},a=r.disableHeader,n=r.disableTable,l=r.disableCorrelationTable,u=Object(o.useValues)(Pt.a),i=u.featureFlags,c=Object(o.useValues)(on.a),v=c.insightMode,d=Object(o.useValues)(B.c),m=d.insightProps,g=d.canEditInsight,f=d.insightLoading,p=d.activeView,A=d.loadedView,E=d.filters,P=d.showTimeoutMessage,I=d.showErrorMessage,Y=d.exporterResourceParams,D=d.isUsingSessionAnalysis,re=Object(o.useValues)(Object(be.a)(m)),_=re.areFiltersValid,j=re.isValidFunnel,M=re.areExclusionFiltersValid,ie=re.correlationAnalysisAvailable,R=function(){if(p!==A||f&&!P)return e.a.createElement("div",{className:"text-center"},e.a.createElement(ua.a,{type:ma.a.LaptopHog}));if(A===s.B.FUNNELS){if(!_)return e.a.createElement(et.b,{actionable:v===s.C.Edit||n});if(!M)return e.a.createElement(et.a,null);if(!j&&!f)return e.a.createElement(et.c,null)}return I?e.a.createElement(et.d,null):P?e.a.createElement(et.e,{isLoading:f}):null}();function W(){return p===s.B.FUNNELS&&!I&&!P&&_&&j&&E.funnel_viz_type===s.x.Steps&&!n?e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{className:"my-4 mx-0"},"Detailed results"),e.a.createElement(da,null)):(!E.display||(E==null?void 0:E.display)!==s.j.ActionsTable&&(E==null?void 0:E.display)!==s.j.ActionsBarValue)&&p===s.B.TRENDS&&!n?e.a.createElement(e.a.Fragment,null,Y&&e.a.createElement("div",{className:"flex items-center justify-between my-4 mx-0"},e.a.createElement("h2",null,"Detailed results"),e.a.createElement(ue.a,{title:"Export this table in CSV format",placement:"left"},e.a.createElement(Wa.a,{type:"secondary",status:"primary",items:[{export_format:s.q.CSV,export_context:Y}]}))),e.a.createElement(o.BindLogic,{logic:pt.a,props:m},e.a.createElement(ln.b,{isLegend:!0,showTotalCount:!0,filterKey:p===s.B.TRENDS?"trends_".concat(p):"",canEditSeriesNameInline:p===s.B.TRENDS&&v===s.C.Edit,canCheckUncheckSeries:g}))):null}return e.a.createElement(e.a.Fragment,null,D?e.a.createElement("div",{className:"mb-4"},e.a.createElement(wa.a,{type:"info"},"When using sessions and session properties, events without session IDs will be excluded from the set of results."," ",e.a.createElement("a",{href:"https://posthog.com/docs/user-guides/sessions"},"Learn more about sessions."))):null,e.a.createElement(X.a,{title:a?null:e.a.createElement(ft,{activeView:p,insightMode:v,filters:E,disableTable:!!n}),"data-attr":"insights-graph",className:"insights-graph-container"},e.a.createElement("div",null,e.a.createElement(U.a,{className:Object(Tt.a)("insights-graph-header",{funnels:p===s.B.FUNNELS}),align:"middle",justify:"space-between"},e.a.createElement(z.a,null,e.a.createElement(qn,null)),e.a.createElement(z.a,null,p===s.B.FUNNELS?e.a.createElement(Qn,null):null,p===s.B.PATHS?e.a.createElement(ra,null):null,e.a.createElement(cn.b,null))),R||(i[Re.h.INSIGHT_LEGENDS]&&(p===s.B.TRENDS||p===s.B.STICKINESS)&&E.show_legend?e.a.createElement(U.a,{className:"insights-graph-container-row",wrap:!1},e.a.createElement(z.a,{className:"insights-graph-container-row-left"},jn[p]),e.a.createElement(z.a,{className:"insights-graph-container-row-right"},e.a.createElement(cn.a,null))):jn[p]))),W(),!l&&ie&&p===s.B.FUNNELS&&e.a.createElement(Va,null))}try{Et.displayName="InsightContainer",Et.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}},disableCorrelationTable:{defaultValue:null,description:"",name:"disableCorrelationTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:Et.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(r){}},"./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts":function(le,b,t){"use strict";t.d(b,"a",function(){return Pe});var S=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=t.n(S),X=t("./node_modules/core-js/modules/es.array.iterator.js"),U=t.n(X),z=t("./node_modules/core-js/modules/es.object.to-string.js"),fe=t.n(z),Q=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),he=t.n(Q),ve=t("./node_modules/core-js/modules/es.object.keys.js"),ye=t.n(ve),_e=t("./node_modules/core-js/modules/es.symbol.js"),Te=t.n(_e),Ce=t("./node_modules/core-js/modules/es.array.filter.js"),xe=t.n(Ce),N=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),e=t.n(N),o=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),te=t.n(o),y=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),C=t.n(y),x=t("./node_modules/kea/lib/index.esm.js"),V=t("./frontend/src/scenes/insights/insightLogic.ts"),k=t("./frontend/src/scenes/insights/sharedUtils.ts");function ne(K,ae){var h=Object.keys(K);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(K);ae&&(O=O.filter(function(F){return Object.getOwnPropertyDescriptor(K,F).enumerable})),h.push.apply(h,O)}return h}function de(K){for(var ae=1;ae<arguments.length;ae++){var h=arguments[ae]!=null?arguments[ae]:{};ae%2?ne(Object(h),!0).forEach(function(O){T()(K,O,h[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(h)):ne(Object(h)).forEach(function(O){Object.defineProperty(K,O,Object.getOwnPropertyDescriptor(h,O))})}return K}var Pe=Object(x.kea)({props:{},key:Object(k.c)("new"),path:function(ae){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",ae]},connect:function(ae){return{actions:[Object(V.c)(ae),["setFilters"]],values:[Object(V.c)(ae),["filters"]]}},actions:function(){return{setDates:function(h,O){return{dateFrom:h,dateTo:O}}}},selectors:{dates:[function(K){return[K.filters]},function(K){return{dateFrom:(K==null?void 0:K.date_from)||null,dateTo:(K==null?void 0:K.date_to)||null}}]},listeners:function(ae){var h=ae.actions,O=ae.values;return{setDates:function(se){var Ee=se.dateFrom,Ie=se.dateTo;h.setFilters(de(de({},O.filters),{},{date_from:Ee||null,date_to:Ie||null}))}}}})},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(le,b,t){"use strict";t.d(b,"a",function(){return Q});var S=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),T=t.n(S),X=t("./node_modules/react/index.js"),U=t.n(X),z=t("./node_modules/antd/es/modal/index.js"),fe=t("./node_modules/antd/es/input/index.js");function Q(he){var ve=he.onOk,ye=he.onCancel,_e=he.visible,Te=Object(X.useState)(""),Ce=T()(Te,2),xe=Ce[0],N=Ce[1];return U.a.createElement(z.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){ve(xe),N("")},onCancel:ye,visible:_e},U.a.createElement("div",{className:"mb-4"},U.a.createElement(fe.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:xe,"data-attr":"cohort-name",onChange:function(o){return N(o.target.value)}})))}try{Q.displayName="SaveCohortModal",Q.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:Q.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(he){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(le,b,t){"use strict";var S=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),T=t("./node_modules/react/index.js"),X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},U=X,z=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),fe=function(ve,ye){return T.createElement(z.a,Object(S.a)(Object(S.a)({},ve),{},{ref:ye,icon:U}))};fe.displayName="BarChartOutlined";var Q=b.a=T.forwardRef(fe)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(le,b,t){"use strict";var S=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),T=t("./node_modules/react/index.js"),X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},U=X,z=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),fe=function(ve,ye){return T.createElement(z.a,Object(S.a)(Object(S.a)({},ve),{},{ref:ye,icon:U}))};fe.displayName="OrderedListOutlined";var Q=b.a=T.forwardRef(fe)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(le,b,t){"use strict";var S=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),T=t("./node_modules/react/index.js"),X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},U=X,z=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),fe=function(ve,ye){return T.createElement(z.a,Object(S.a)(Object(S.a)({},ve),{},{ref:ye,icon:U}))};fe.displayName="PercentageOutlined";var Q=b.a=T.forwardRef(fe)},"./node_modules/antd/lib/checkbox/Checkbox.js":function(le,b,t){"use strict";var S=t("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),T=t("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var X=S(t("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),U=S(t("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),z=Te(t("./node_modules/react/index.js")),fe=S(t("./node_modules/classnames/index.js")),Q=S(t("./node_modules/rc-checkbox/es/index.js")),he=t("./node_modules/antd/lib/checkbox/Group.js"),ve=t("./node_modules/antd/lib/config-provider/index.js"),ye=S(t("./node_modules/antd/lib/_util/devWarning.js"));function _e(o){if(typeof WeakMap!="function")return null;var te=new WeakMap,y=new WeakMap;return(_e=function(x){return x?y:te})(o)}function Te(o,te){if(!te&&o&&o.__esModule)return o;if(o===null||T(o)!=="object"&&typeof o!="function")return{default:o};var y=_e(te);if(y&&y.has(o))return y.get(o);var C={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in o)if(V!=="default"&&Object.prototype.hasOwnProperty.call(o,V)){var k=x?Object.getOwnPropertyDescriptor(o,V):null;k&&(k.get||k.set)?Object.defineProperty(C,V,k):C[V]=o[V]}return C.default=o,y&&y.set(o,C),C}var Ce=function(o,te){var y={};for(var C in o)Object.prototype.hasOwnProperty.call(o,C)&&te.indexOf(C)<0&&(y[C]=o[C]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,C=Object.getOwnPropertySymbols(o);x<C.length;x++)te.indexOf(C[x])<0&&Object.prototype.propertyIsEnumerable.call(o,C[x])&&(y[C[x]]=o[C[x]]);return y},xe=function(te,y){var C,x=te.prefixCls,V=te.className,k=te.children,ne=te.indeterminate,de=ne===void 0?!1:ne,Pe=te.style,K=te.onMouseEnter,ae=te.onMouseLeave,h=te.skipGroup,O=h===void 0?!1:h,F=Ce(te,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),se=z.useContext(ve.ConfigContext),Ee=se.getPrefixCls,Ie=se.direction,Z=z.useContext(he.GroupContext),q=z.useRef(F.value);z.useEffect(function(){Z==null||Z.registerValue(F.value),(0,ye.default)("checked"in F||!!Z||!("value"in F),"Checkbox","`value` is not a valid prop, do you mean `checked`?")},[]),z.useEffect(function(){if(!O)return F.value!==q.current&&(Z==null||Z.cancelValue(q.current),Z==null||Z.registerValue(F.value)),function(){return Z==null?void 0:Z.cancelValue(F.value)}},[F.value]);var $=Ee("checkbox",x),ee=(0,U.default)({},F);Z&&!O&&(ee.onChange=function(){F.onChange&&F.onChange.apply(F,arguments),Z.toggleOption&&Z.toggleOption({label:k,value:F.value})},ee.name=Z.name,ee.checked=Z.value.indexOf(F.value)!==-1,ee.disabled=F.disabled||Z.disabled);var pe=(0,fe.default)((C={},(0,X.default)(C,"".concat($,"-wrapper"),!0),(0,X.default)(C,"".concat($,"-rtl"),Ie==="rtl"),(0,X.default)(C,"".concat($,"-wrapper-checked"),ee.checked),(0,X.default)(C,"".concat($,"-wrapper-disabled"),ee.disabled),C),V),Be=(0,fe.default)((0,X.default)({},"".concat($,"-indeterminate"),de));return z.createElement("label",{className:pe,style:Pe,onMouseEnter:K,onMouseLeave:ae},z.createElement(Q.default,(0,U.default)({},ee,{prefixCls:$,className:Be,ref:y})),k!==void 0&&z.createElement("span",null,k))},N=z.forwardRef(xe);N.displayName="Checkbox";var e=N;b.default=e},"./node_modules/antd/lib/checkbox/Group.js":function(le,b,t){"use strict";var S=t("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),T=t("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(b,"__esModule",{value:!0}),b.default=b.GroupContext=void 0;var X=S(t("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),U=S(t("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),z=S(t("./node_modules/antd/node_modules/@babel/runtime/helpers/toConsumableArray.js")),fe=S(t("./node_modules/antd/node_modules/@babel/runtime/helpers/slicedToArray.js")),Q=Ce(t("./node_modules/react/index.js")),he=S(t("./node_modules/classnames/index.js")),ve=S(t("./node_modules/antd/node_modules/rc-util/lib/omit.js")),ye=S(t("./node_modules/antd/lib/checkbox/Checkbox.js")),_e=t("./node_modules/antd/lib/config-provider/index.js");function Te(y){if(typeof WeakMap!="function")return null;var C=new WeakMap,x=new WeakMap;return(Te=function(k){return k?x:C})(y)}function Ce(y,C){if(!C&&y&&y.__esModule)return y;if(y===null||T(y)!=="object"&&typeof y!="function")return{default:y};var x=Te(C);if(x&&x.has(y))return x.get(y);var V={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in y)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(y,ne)){var de=k?Object.getOwnPropertyDescriptor(y,ne):null;de&&(de.get||de.set)?Object.defineProperty(V,ne,de):V[ne]=y[ne]}return V.default=y,x&&x.set(y,V),V}var xe=function(y,C){var x={};for(var V in y)Object.prototype.hasOwnProperty.call(y,V)&&C.indexOf(V)<0&&(x[V]=y[V]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,V=Object.getOwnPropertySymbols(y);k<V.length;k++)C.indexOf(V[k])<0&&Object.prototype.propertyIsEnumerable.call(y,V[k])&&(x[V[k]]=y[V[k]]);return x},N=Q.createContext(null);b.GroupContext=N;var e=function(C,x){var V=C.defaultValue,k=C.children,ne=C.options,de=ne===void 0?[]:ne,Pe=C.prefixCls,K=C.className,ae=C.style,h=C.onChange,O=xe(C,["defaultValue","children","options","prefixCls","className","style","onChange"]),F=Q.useContext(_e.ConfigContext),se=F.getPrefixCls,Ee=F.direction,Ie=Q.useState(O.value||V||[]),Z=(0,fe.default)(Ie,2),q=Z[0],$=Z[1],ee=Q.useState([]),pe=(0,fe.default)(ee,2),Be=pe[0],s=pe[1];Q.useEffect(function(){"value"in O&&$(O.value||[])},[O.value]);var B=function(){return de.map(function(Fe){return typeof Fe=="string"?{label:Fe,value:Fe}:Fe})},Ye=function(Fe){s(function(ke){return ke.filter(function($e){return $e!==Fe})})},ue=function(Fe){s(function(ke){return[].concat((0,z.default)(ke),[Fe])})},qe=function(Fe){var ke=q.indexOf(Fe.value),$e=(0,z.default)(q);ke===-1?$e.push(Fe.value):$e.splice(ke,1),"value"in O||$($e);var _t=B();h==null||h($e.filter(function(at){return Be.indexOf(at)!==-1}).sort(function(at,Bt){var Kt=_t.findIndex(function(rt){return rt.value===at}),Wt=_t.findIndex(function(rt){return rt.value===Bt});return Kt-Wt}))},Me=se("checkbox",Pe),Ke="".concat(Me,"-group"),nt=(0,ve.default)(O,["value","disabled"]);de&&de.length>0&&(k=B().map(function(Oe){return Q.createElement(ye.default,{prefixCls:Me,key:Oe.value.toString(),disabled:"disabled"in Oe?Oe.disabled:O.disabled,value:Oe.value,checked:q.indexOf(Oe.value)!==-1,onChange:Oe.onChange,className:"".concat(Ke,"-item"),style:Oe.style},Oe.label)}));var jt={toggleOption:qe,value:q,disabled:O.disabled,name:O.name,registerValue:ue,cancelValue:Ye},Ct=(0,he.default)(Ke,(0,U.default)({},"".concat(Ke,"-rtl"),Ee==="rtl"),K);return Q.createElement("div",(0,X.default)({className:Ct,style:ae},nt,{ref:x}),Q.createElement(N.Provider,{value:jt},k))},o=Q.forwardRef(e),te=Q.memo(o);b.default=te},"./node_modules/antd/lib/table/Column.js":function(le,b,t){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;function S(X){return null}var T=S;b.default=T},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss":function(le,b,t){var S=t("./node_modules/css-loader/dist/runtime/api.js");b=S(!1),b.push([le.i,".inline-message{background-color:var(--bg-mid);border-radius:var(--radius);padding:.5rem 1rem;font-weight:var(--font-medium);display:flex;align-items:center;color:var(--primary-alt)}.inline-message.danger{background-color:var(--danger-highlight);color:var(--danger)}.inline-message.closable{padding-right:.5rem}.inline-message.hidden{display:none}.inline-message .inline-icon{margin-right:6px;display:flex;align-items:center}.inline-message .inline-main{flex-grow:1}.inline-message .closable{color:var(--muted);align-self:flex-start;padding-left:1rem;cursor:pointer}",""]),le.exports=b},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(le,b,t){var S=t("./node_modules/css-loader/dist/runtime/api.js");b=S(!1),b.push([le.i,".insights-graph-header.funnels{border-bottom:1px solid var(--border)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:var(--default)}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),le.exports=b},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss":function(le,b,t){var S=t("./node_modules/css-loader/dist/runtime/api.js");b=S(!1),b.push([le.i,".correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:var(--radius);border:1px solid var(--border);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid var(--border);border-top:1px solid var(--border);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:var(--muted-alt)}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:var(--antd-table-background-dark);text-transform:uppercase;color:var(--muted)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),le.exports=b},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss":function(le,b,t){var S=t("./node_modules/css-loader/dist/runtime/api.js");b=S(!1),b.push([le.i,".funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid var(--warning)}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid var(--border);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:var(--muted)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:var(--font-medium)}",""]),le.exports=b},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss":function(le,b,t){var S=t("./node_modules/css-loader/dist/runtime/api.js");b=S(!1),b.push([le.i,".funnel-correlation-table{margin-top:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius);padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:var(--default);margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:var(--muted-alt);cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:var(--muted-alt)}",""]),le.exports=b}}]);
