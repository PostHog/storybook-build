(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{"./frontend/src/scenes/groups/groupsListLogic.ts":function(I,l,e){"use strict";e.d(l,"a",function(){return V});var a=e("./node_modules/core-js/modules/es.array.concat.js"),s=e.n(a),p=e("./node_modules/core-js/modules/es.array.iterator.js"),d=e.n(p),x=e("./node_modules/core-js/modules/es.object.to-string.js"),J=e.n(x),B=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),b=e.n(B),T=e("./node_modules/@babel/runtime/regenerator/index.js"),K=e.n(T),D=e("./node_modules/regenerator-runtime/runtime.js"),U=e.n(D),W=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),f=e.n(W),h=e("./node_modules/kea/lib/index.esm.js"),A=e("./frontend/src/lib/api.ts"),i=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),j=e("./frontend/src/lib/utils.tsx"),F=e("./frontend/src/scenes/teamLogic.ts"),L=e("./frontend/src/scenes/urls.ts"),N=e("./frontend/src/models/groupsModel.ts"),V=Object(h.kea)({path:["groups","groupsListLogic"],connect:{values:[F.a,["currentTeamId"],N.a,["groupTypes","aggregationLabel"],i.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(n){return{url:n}},setTab:function(n){return{tab:n}}}},loaders:function(r){var n=r.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var u=f()(K.a.mark(function S(M){var R;return K.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(R=M.url,!n.groupsEnabled){g.next=6;break}return R=R||"api/projects/".concat(n.currentTeamId,"/groups/?group_type_index=").concat(n.currentTab),g.next=5,A.b.get(R);case 5:return g.abrupt("return",g.sent);case 6:case"end":return g.stop()}},S)}));function G(S){return u.apply(this,arguments)}return G}()}]}},reducers:{currentTab:["-1",{setTab:function(r,n){var u=n.tab;return u}}]},selectors:{currentTabName:[function(o){return[o.currentTab,o.groupTypes,o.aggregationLabel]},function(o,r,n){return o==="-1"?"Persons":r!=null&&r.length?Object(j.i)(n(parseInt(o)).singular):""}],breadcrumbs:[function(o){return[o.currentTabName,o.currentTab]},function(o,r){return[{name:o,path:L.a.groups(r)}]}]},actionToUrl:function(){return{setTab:function(n){var u=n.tab;return u!=="-1"?L.a.groups(u):L.a.persons()}}},urlToAction:function(r){var n=r.actions,u=r.values;return{"/groups/:id":function(S){var M=S.id;M&&(n.setTab(M),n.loadGroups())},"/persons":function(){u.currentTab!=="-1"&&n.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(I,l,e){"use strict";e.d(l,"a",function(){return f});var a=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/lib/components/PageHeader.tsx"),p=e("./node_modules/react/index.js"),d=e.n(p),x=e("./node_modules/core-js/modules/es.array.includes.js"),J=e("./node_modules/core-js/modules/es.array.map.js"),B=e("./node_modules/core-js/modules/es.string.includes.js"),b=e("./node_modules/antd/es/tabs/index.js"),T=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),K=e("./frontend/src/lib/utils.tsx"),D=e("./frontend/src/models/groupsModel.ts"),U=e("./frontend/src/scenes/groups/groupsListLogic.ts");function W(){var h=Object(a.useActions)(U.a),A=h.setTab,i=Object(a.useValues)(U.a),j=i.currentTab,F=Object(a.useValues)(D.a),L=F.groupTypes,N=F.aggregationLabel,V=Object(a.useValues)(T.b),o=V.groupsAccessStatus,r=[T.a.HasAccess,T.a.HasGroupTypes,T.a.NoAccess].includes(o);return d.a.createElement(b.a,{activeKey:j,onChange:function(u){return A(u)}},d.a.createElement(b.a.TabPane,{tab:"Persons",key:"-1"}),r?d.a.createElement(b.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):L.map(function(n){return d.a.createElement(b.a.TabPane,{tab:Object(K.i)(N(n.group_type_index).plural),key:n.group_type_index})}))}function f(h){var A=h.hideGroupTabs,i=Object(a.useValues)(D.a),j=i.showGroupsOptions;return d.a.createElement(d.a.Fragment,null,d.a.createElement(s.a,{title:"Persons".concat(j?" & Groups":""),caption:"A catalog of your product's end users".concat(j?" and groups":"",".")}),!A&&j&&d.a.createElement(W,null))}try{f.displayName="PersonPageHeader",f.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:f.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(h){}},"./frontend/src/scenes/persons/Persons.scss":function(I,l,e){"use strict";var a=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(a),p=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),d=e.n(p),x={};x.insert="head",x.singleton=!1;var J=s()(d.a,x),B=d.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(I,l,e){"use strict";e.r(l),e.d(l,"scene",function(){return R}),e.d(l,"Persons",function(){return H}),e.d(l,"PersonsScene",function(){return g});var a=e("./node_modules/react/index.js"),s=e.n(a),p=e("./node_modules/kea/lib/index.esm.js"),d=e("./node_modules/core-js/modules/es.array.concat.js"),x=e("./node_modules/core-js/modules/es.object.keys.js"),J=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),B=e.n(J),b=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),T=e("./frontend/src/lib/components/PropertiesTable.tsx"),K=e("./frontend/src/scenes/persons/Persons.scss"),D=e("./frontend/src/lib/components/CopyToClipboard.tsx"),U=e("./frontend/src/scenes/persons/PersonHeader.tsx"),W=e("./frontend/src/lib/components/LemonTable/index.ts");function f(t){var v=t.people,C=t.loading,Y=C===void 0?!1:C,E=t.hasPrevious,O=t.hasNext,c=t.loadPrevious,_=t.loadNext,z=t.compact,$=[{title:"Person",key:"person",render:function(m,P){return s.a.createElement(U.a,{withIcon:!0,person:P})}},{title:"ID",key:"id",render:function(m,P){return s.a.createElement("div",{style:{overflow:"hidden"}},P.distinct_ids.length&&s.a.createElement(D.a,{explicitValue:P.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},P.distinct_ids[0]))}}].concat(B()(z?[]:[{title:"First seen",dataIndex:"created_at",render:function(m){return m?s.a.createElement(b.b,{time:m}):s.a.createElement(s.a.Fragment,null)}}]));return s.a.createElement(W.a,{columns:$,loading:Y,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:O?function(){_==null||_(),window.scrollTo(0,0)}:void 0,onBackward:E?function(){c==null||c(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(m){var P=m.properties;return Object.keys(P).length?s.a.createElement(T.a,{properties:P}):"This person has no properties."}},dataSource:v,emptyState:"No persons",nouns:["person","persons"]})}try{f.displayName="PersonsTable",f.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:f.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(t){}var h=e("./node_modules/antd/es/row/index.js"),A=e("./node_modules/antd/es/popconfirm/index.js"),i=e("./frontend/src/scenes/persons/personsLogic.ts"),j=e("./node_modules/core-js/modules/es.regexp.exec.js"),F=e("./node_modules/core-js/modules/es.string.search.js"),L=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),N=e.n(L),V=e("./node_modules/antd/es/input/index.js"),o=e("./frontend/src/lib/components/LemonRow/index.ts"),r=e("./frontend/src/lib/components/icons.tsx"),n=function(v){var C=v.autoFocus,Y=C===void 0?!0:C,E=Object(p.useActions)(i.a),O=E.loadPersons,c=E.setListFilters,_=Object(p.useValues)(i.a),z=_.listFilters,$=Object(a.useState)(""),y=N()($,2),m=y[0],P=y[1];return Object(a.useEffect)(function(){P(z.search||"")},[]),s.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"min(100%, 24rem)"}},s.a.createElement(V.a.Search,{"data-attr":"persons-search",placeholder:"Search for persons",autoFocus:Y,value:m,onChange:function(Q){P(Q.target.value),Q.target.value||(c({search:void 0}),O())},enterButton:!0,onPressEnter:function(Q){Q.preventDefault(),c({search:m||void 0}),O()},allowClear:!0,onSearch:function(){c({search:m||void 0}),O()},style:{width:"100%"}}),s.a.createElement(o.a,{className:"ml-05",type:"stealth",tooltip:s.a.createElement(s.a.Fragment,null,"Search by email, name, ID, or even contents of properties. You can also search for persons who just ",s.a.createElement("i",null,"have"),' a property like so: "has:your_property".'),icon:s.a.createElement(r.IconInfo,null)}))};try{n.displayName="PersonsSearch",n.__docgenInfo={description:"",displayName:"PersonsSearch",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"]={docgenInfo:n.__docgenInfo,name:"PersonsSearch",path:"frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"})}catch(t){}var u=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),G=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),S=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),M=e("./frontend/src/lib/components/LemonButton/index.ts"),R={component:g,logic:i.a,paramsToProps:function(){return{syncWithUrl:!0}}};function H(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=t.cohort;return s.a.createElement(p.BindLogic,{logic:i.a,props:{cohort:v,syncWithUrl:!v}},s.a.createElement(g,null))}function g(){var t=Object(p.useActions)(i.a),v=t.loadPersons,C=t.setListFilters,Y=t.exportCsv,E=Object(p.useValues)(i.a),O=E.cohortId,c=E.persons,_=E.listFilters,z=E.personsLoading,$=E.exportUrl;return s.a.createElement("div",{className:"persons-list"},!O&&s.a.createElement(u.a,null),s.a.createElement(h.a,{align:"middle",justify:"space-between",className:"mb-05",style:{gap:"0.75rem"}},s.a.createElement(n,{autoFocus:!O}),s.a.createElement("div",null,s.a.createElement(A.a,{placement:"topRight",title:s.a.createElement(s.a.Fragment,null,"Exporting by csv is limited to 10,000 users.",s.a.createElement("br",null),"To return more, please use ",s.a.createElement("a",{href:"https://posthog.com/docs/api/persons"},"the API"),". Do you want to export by CSV?"),onConfirm:Y},$&&s.a.createElement(M.a,{type:"secondary",icon:s.a.createElement(r.IconExport,{style:{color:"var(--primary)"}})},_.properties&&_.properties.length>0?s.a.createElement("div",{style:{display:"block"}},"Export (",s.a.createElement("strong",null,_.properties.length)," filter)"):"Export")))),s.a.createElement(G.a,{pageKey:"persons-list-page",propertyFilters:_.properties,onChange:function(m){C({properties:m}),v()},endpoint:"person",taxonomicGroupTypes:[S.a.PersonProperties,S.a.Cohorts],showConditionBadge:!0}),s.a.createElement(f,{people:c.results,loading:z,hasPrevious:!!c.previous,hasNext:!!c.next,loadPrevious:function(){return v(c.previous)},loadNext:function(){return v(c.next)}}))}try{H.displayName="Persons",H.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:H.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(t){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(I,l,e){var a=e("./node_modules/css-loader/dist/runtime/api.js");l=a(!1),l.push([I.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:#5375ff;cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),I.exports=l}}]);
