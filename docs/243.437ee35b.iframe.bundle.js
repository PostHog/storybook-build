(window.webpackJsonp=window.webpackJsonp||[]).push([[243],{"./frontend/src/scenes/billing/Billing.tsx":function(h,d,n){"use strict";n.r(d),n.d(d,"scene",function(){return le}),n.d(d,"Billing",function(){return A});var c=n("./node_modules/react/index.js"),e=n.n(c),V=n("./frontend/src/lib/components/PageHeader.tsx"),oe=n("./node_modules/core-js/modules/es.array.concat.js"),ce=n("./node_modules/core-js/modules/es.function.name.js"),M=n("./node_modules/antd/es/alert/index.js"),E=n("./node_modules/antd/es/button/index.js"),g=n("./node_modules/antd/es/card/index.js"),p=n("./node_modules/kea/lib/index.esm.js"),O=n.p+"images/plan-default.64d2c4930c12267ba45d77bebf37405c.svg",R=n("./frontend/src/lib/components/Link.tsx"),D=n("./frontend/src/lib/components/icons.tsx"),x=n("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},G=Y,W=n("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),T=function(t,r){return c.createElement(W.a,Object(x.a)(Object(x.a)({},t),{},{ref:r,icon:G}))};T.displayName="ToolOutlined";var C=c.forwardRef(T),H=n("./node_modules/@ant-design/icons/es/icons/WarningOutlined.js"),u=n("./frontend/src/scenes/billing/billingLogic.ts");function f(l){var t=l.plan,r=Object(p.useValues)(u.c),s=r.billing;return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"space-top"}),s!=null&&s.should_setup_billing?e.a.createElement(M.a,{type:"warning",message:e.a.createElement(e.a.Fragment,null,"Your plan is ",e.a.createElement("b",null,"currently inactive")," as you haven't finished setting up your billing information."),action:s.subscription_url&&e.a.createElement(E.a,{href:s.subscription_url,icon:e.a.createElement(C,null)},"Finish setup"),showIcon:!0,icon:e.a.createElement(H.a,null)}):e.a.createElement(g.a,{title:"Organization billing plan"},e.a.createElement("div",{style:{display:"flex",alignItems:"center"}},e.a.createElement("div",null,e.a.createElement("img",{src:t.image_url||O,alt:"",height:100,width:100})),e.a.createElement("div",{style:{flexGrow:1,paddingLeft:16}},e.a.createElement("h3",{className:"l3",style:{marginBottom:8}},t.name),e.a.createElement(R.a,{target:"_blank",to:"https://posthog.com/pricing#plan-".concat(t.key,"?").concat(u.b)},"More plan details ",e.a.createElement(D.IconOpenInNew,null)),e.a.createElement("div",{style:{marginTop:4}},t.price_string),e.a.createElement("div",{className:"text-muted mt"},"Click on ",e.a.createElement("b",null,"manage subscription")," to cancel your billing agreement,"," ",e.a.createElement("b",null,"update your card")," or other billing information,")),e.a.createElement("div",null,e.a.createElement(E.a,{type:"primary",href:"/billing/manage",icon:e.a.createElement(C,null)},"Manage subscription"),e.a.createElement("div",{className:"text-muted text-center"},"Get past invoices too")))))}try{f.displayName="CurrentPlan",f.__docgenInfo={description:"",displayName:"CurrentPlan",props:{plan:{defaultValue:null,description:"",name:"plan",required:!0,type:{name:"PlanInterface"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/billing/CurrentPlan.tsx#CurrentPlan"]={docgenInfo:f.__docgenInfo,name:"CurrentPlan",path:"frontend/src/scenes/billing/CurrentPlan.tsx#CurrentPlan"})}catch(l){}var $=n("./node_modules/antd/es/progress/index.js"),B=n("./frontend/src/lib/utils.tsx"),J=n("./frontend/src/lib/components/Tooltip.tsx");function K(){var l,t=Object(p.useValues)(u.c),r=t.eventAllocation,s=t.percentage,m=t.strokeColor,a=t.billing,o=a==null?void 0:a.plan;return a?e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"space-top"}),e.a.createElement(g.a,{title:"Current monthly usage"},a.should_display_current_bill&&e.a.createElement(e.a.Fragment,null,e.a.createElement("h3",{className:"l3"},"Current bill amount"),(a==null?void 0:a.current_bill_amount)!==void 0&&(a==null?void 0:a.current_bill_amount)!==null?e.a.createElement(e.a.Fragment,null,"This is the amount (in dollars) of the bill for the currently ongoing period. The final amount will be billed a few days after the end of the month. Please note this number is reported on a daily basis,"," ",e.a.createElement("b",null,"so events ingested in the last 24 hours may not be reflected yet."),e.a.createElement("div",{className:"bill-amount"},"$".concat(a==null||(l=a.current_bill_amount)===null||l===void 0?void 0:l.toLocaleString()))):e.a.createElement(e.a.Fragment,null,"We can't show your current bill amount right now. Please check back again in a few minutes or"," ",e.a.createElement("a",{href:"https://posthog.com/support/",target:"_blank"},"contact us")," ","if this message does not disappear.")),e.a.createElement("h3",{className:"l3 mt"},"Current event usage"),a.current_usage!==null?e.a.createElement(e.a.Fragment,null,"Your organization has used"," ",e.a.createElement(J.a,{title:"".concat(a.current_usage.toLocaleString()," events")},e.a.createElement("b",null,Object(B.q)(a.current_usage)))," ","events this month (calculated roughly every hour)."," ",r&&e.a.createElement(e.a.Fragment,null,"You can use up to ",e.a.createElement("b",null,Object(B.q)(r))," events per month."),o&&!o.event_allowance&&!o.is_metered_billing&&"Your current plan has an unlimited event allocation.",e.a.createElement($.a,{type:"line",percent:s!==null?Math.floor(s*100):100,strokeColor:m,status:s!==null?"normal":"success"}),(o==null?void 0:o.is_metered_billing)&&e.a.createElement("div",{className:"mt text-muted"},"This is the number of events that your organization has ingested across all your projects for the ",e.a.createElement("b",null,"current month")," and that ",e.a.createElement("b",null,"will be billed")," a few days after the end of the month.")):e.a.createElement("div",null,"Currently we do not have information about the number of billed events. Please check back again in a few minutes or"," ",e.a.createElement("a",{href:"https://posthog.com/support/",target:"_blank"},"contact us")," ","if this message does not disappear."))):null}var de=n("./node_modules/core-js/modules/es.array.map.js"),ue=n("./node_modules/core-js/modules/es.object.to-string.js"),me=n("./node_modules/core-js/modules/es.promise.js"),U=n("./node_modules/@babel/runtime/regenerator/index.js"),L=n.n(U),ge=n("./node_modules/regenerator-runtime/runtime.js"),Q=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),X=n.n(Q),Z=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),N=n.n(Z),P=n("./node_modules/antd/es/skeleton/index.js"),w=n("./node_modules/antd/es/row/index.js"),k=n("./node_modules/antd/es/col/index.js"),q=n("./frontend/src/lib/components/Spinner/Spinner.tsx");function _(l){var t=l.plan,r=l.onSubscribe,s=Object(c.useState)(""),m=N()(s,2),a=m[0],o=m[1],v=Object(c.useState)(!0),b=N()(v,2),se=b[0],re=b[1],ie=function(){var j=X()(L.a.mark(function z(F){var S;return L.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch("/api/plans/".concat(F,"/template/"));case 2:if(S=i.sent,!S.ok){i.next=9;break}return i.t0=o,i.next=7,S.text();case 7:i.t1=i.sent,(0,i.t0)(i.t1);case 9:re(!1);case 10:case"end":return i.stop()}},z)}));return function(F){return j.apply(this,arguments)}}();return Object(c.useEffect)(function(){ie(t.key)},[t.key]),e.a.createElement(g.a,null,e.a.createElement("div",{className:"cursor-pointer",onClick:function(){return r(t)}},e.a.createElement("img",{src:t.image_url||O,alt:"",height:100,width:100}),e.a.createElement("h3",{style:{fontSize:22}},t.name),e.a.createElement("div",{style:{fontWeight:"bold",marginBottom:16,fontSize:16}},t.price_string)),e.a.createElement("div",null,e.a.createElement(E.a,{"data-attr":"btn-subscribe-now","data-plan":t.key,type:"primary",onClick:function(){return r(t)}},"Subscribe now")),se?e.a.createElement(P.a,{paragraph:{rows:6},title:!1,className:"mt",active:!0}):e.a.createElement("div",{className:"plan-description",dangerouslySetInnerHTML:{__html:a}}))}function ee(){var l=Object(p.useValues)(u.c),t=l.plans,r=l.plansLoading,s=l.billingSubscriptionLoading,m=Object(p.useActions)(u.c),a=m.subscribe,o=function(b){a(b.key)};return!t.length&&!r?null:e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"space-top"}),r?e.a.createElement(g.a,null,e.a.createElement(P.a,{active:!0})):e.a.createElement(g.a,{title:"Billing Plan Enrollment"},e.a.createElement(w.a,{gutter:16,className:"space-top",style:{display:"flex",justifyContent:"center"}},t.map(function(v){return e.a.createElement(k.a,{sm:8,key:v.key,className:"text-center"},s?e.a.createElement(q.a,null):e.a.createElement(_,{plan:v,onSubscribe:o}))}))))}var ne=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),te=n.n(ne),ae=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/billing/Billing.scss"),I=n.n(ae),y={};y.insert="head",y.singleton=!1;var pe=te()(I.a,y),ve=I.a.locals||{},le={component:A,logic:u.c};function A(){var l=Object(p.useValues)(u.c),t=l.billing;return e.a.createElement("div",{className:"billing-page"},e.a.createElement(V.a,{title:"Billing & usage information"}),e.a.createElement(K,null),t!=null&&t.plan?e.a.createElement(f,{plan:t.plan}):e.a.createElement(ee,null),e.a.createElement("div",{style:{marginBottom:128}}))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/billing/Billing.scss":function(h,d,n){var c=n("./node_modules/css-loader/dist/runtime/api.js");d=c(!1),d.push([h.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.billing-page .plan-description ol,.billing-page .plan-description ul{margin-top:1rem;padding-left:0;list-style:none;text-align:center}.billing-page .plan-description ol li,.billing-page .plan-description ul li{line-height:1.2rem;margin-bottom:1rem}.billing-page .plan-description ol .disclaimer,.billing-page .plan-description ul .disclaimer{font-size:10px;font-weight:700;vertical-align:top;padding-left:1px}.billing-page .plan-description .disclaimer-details{font-size:.75rem;color:rgba(0,0,0,.5);margin-top:1rem}.billing-page .bill-amount{margin-top:.5rem;font-size:1.2rem;font-weight:700;text-align:center}",""]),h.exports=d}}]);
