(window.webpackJsonp=window.webpackJsonp||[]).push([[6,8,12],{"./frontend/src/scenes/apps/HistoricalExport.tsx":function(I,c,s){"use strict";s.r(c),s.d(c,"HistoricalExport",function(){return a});var u=s("./node_modules/antd/es/card/index.js"),D=s("./node_modules/kea/lib/index.esm.js"),v=s("./frontend/src/scenes/apps/AppMetricsGraph.tsx"),p=s("./frontend/src/scenes/apps/appMetricsSceneLogic.ts"),P=s("./frontend/src/scenes/apps/historicalExportLogic.ts"),x=s("./frontend/src/scenes/apps/MetricsTab.tsx"),e=s("./node_modules/react/jsx-runtime.js"),g=s.n(e);function a(O){var m,o,r,l,_,j=Object(D.useValues)(Object(P.historicalExportLogic)(O)),t=j.data,d=j.dataLoading;return Object(e.jsxs)("div",{className:"mt-4 mb-4 mr-8",children:[Object(e.jsx)(u.a,{title:"Overview",children:Object(e.jsx)(x.MetricsOverview,{tab:p.AppMetricsTab.HistoricalExports,metrics:(m=t==null?void 0:t.metrics)!==null&&m!==void 0?m:null,metricsLoading:d,exportDuration:t==null||(o=t.summary)===null||o===void 0?void 0:o.duration,exportFailureReason:t==null||(r=t.summary)===null||r===void 0?void 0:r.failure_reason})}),Object(e.jsx)(u.a,{title:"Delivery trends",className:"mt-4",children:Object(e.jsx)(v.AppMetricsGraph,{tab:p.AppMetricsTab.HistoricalExports,metrics:(l=t==null?void 0:t.metrics)!==null&&l!==void 0?l:null,metricsLoading:d})}),Object(e.jsx)(u.a,{title:"Errors",className:"mt-4",children:Object(e.jsx)(x.ErrorsOverview,{errors:(t==null?void 0:t.errors)||[],loading:d,category:"exportEvents",jobId:t==null||(_=t.summary)===null||_===void 0?void 0:_.job_id})})]})}try{a.displayName="HistoricalExport",a.__docgenInfo={description:"",displayName:"HistoricalExport",props:{pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}},jobId:{defaultValue:null,description:"",name:"jobId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/apps/HistoricalExport.tsx#HistoricalExport"]={docgenInfo:a.__docgenInfo,name:"HistoricalExport",path:"frontend/src/scenes/apps/HistoricalExport.tsx#HistoricalExport"})}catch(O){}},"./frontend/src/scenes/apps/HistoricalExportsTab.tsx":function(I,c,s){"use strict";s.r(c),s.d(c,"HistoricalExportsTab",function(){return l});var u=s("./node_modules/@babel/runtime/helpers/slicedToArray.js"),D=s.n(u),v=s("./node_modules/core-js/modules/es.array.concat.js"),p=s.n(v),P=s("./node_modules/kea/lib/index.esm.js"),x=s("./frontend/src/scenes/apps/appMetricsSceneLogic.ts"),e=s("./frontend/src/lib/components/LemonTable/index.ts"),g=s("./frontend/src/scenes/apps/HistoricalExport.tsx"),a=s("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),O=s("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),m=s("./node_modules/antd/es/progress/index.js"),o=s("./node_modules/react/jsx-runtime.js"),r=s.n(o);function l(){var _=Object(P.useValues)(x.appMetricsSceneLogic),j=_.historicalExports,t=_.historicalExportsLoading,d=_.pluginConfig;return Object(o.jsx)(e.a,{dataSource:j,loading:t,columns:[{title:"Dates exported",render:function(n,E){var f=D()(E.payload.dateRange,2),L=f[0],T=f[1];return L===T?L:"".concat(L," - ").concat(T)}},{title:"Progress",width:130,render:function(n,E){switch(E.status){case"success":return Object(o.jsx)(O.a,{type:"success",className:"uppercase",children:"Success"});case"fail":return Object(o.jsx)(O.a,{type:"danger",className:"uppercase",children:"Failed"});case"not_finished":return Object(o.jsx)(m.a,{percent:Math.floor((E.progress||0)*100)})}},align:"right"},Object(a.b)(),Object(a.a)()],expandable:{expandedRowRender:function(n){if(!!d)return Object(o.jsx)(g.HistoricalExport,{pluginConfigId:d.id,jobId:n.job_id})}},useURLForSorting:!1,noSortingCancellation:!0})}},"./frontend/src/scenes/apps/historicalExportLogic.ts":function(I,c,s){"use strict";s.r(c),s.d(c,"historicalExportLogic",function(){return d});var u=s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),D=s.n(u),v=s("./node_modules/@babel/runtime/regenerator/index.js"),p=s.n(v),P=s("./node_modules/core-js/modules/es.array.concat.js"),x=s.n(P),e=s("./node_modules/core-js/modules/es.array.iterator.js"),g=s.n(e),a=s("./node_modules/core-js/modules/es.object.to-string.js"),O=s.n(a),m=s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),o=s.n(m),r=s("./node_modules/kea/lib/index.esm.js"),l=s("./node_modules/kea-loaders/lib/index.js"),_=s.n(l),j=s("./frontend/src/lib/api.ts"),t=s("./frontend/src/scenes/teamLogic.tsx"),d=Object(r.kea)([Object(r.path)(["scenes","apps","historicalExportLogic"]),Object(r.props)({}),Object(r.key)(function(i){var n=i.pluginConfigId,E=i.jobId;return"".concat(n,"_").concat(E)}),Object(l.loaders)(function(i){var n=i.props;return{data:[null,{loadExportData:function(){var E=D()(p.a.mark(function L(){return p.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,j.b.get("api/projects/".concat(t.a.values.currentTeamId,"/app_metrics/").concat(n.pluginConfigId,"/historical_exports/").concat(n.jobId));case 2:return M.abrupt("return",M.sent);case 3:case"end":return M.stop()}},L)}));function f(){return E.apply(this,arguments)}return f}()}]}}),Object(r.events)(function(i){var n=i.actions;return{afterMount:n.loadExportData}})])}}]);
