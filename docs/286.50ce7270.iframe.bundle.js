(window.webpackJsonp=window.webpackJsonp||[]).push([[286],{"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":function($,I,n){"use strict";n.r(I),n.d(I,"scene",function(){return gn}),n.d(I,"FeatureFlag",function(){return Ae});var K=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),A=n.n(K),ae=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=n.n(ae),ee=n("./node_modules/core-js/modules/es.function.name.js"),se=n("./node_modules/core-js/modules/es.array.map.js"),G=n("./node_modules/core-js/modules/es.object.to-string.js"),re=n("./node_modules/core-js/modules/es.regexp.to-string.js"),ge=n("./node_modules/core-js/modules/es.array.find.js"),fe=n("./node_modules/core-js/modules/es.array.includes.js"),Y=n("./node_modules/core-js/modules/es.string.includes.js"),oe=n("./node_modules/core-js/modules/es.array.concat.js"),k=n("./node_modules/react/index.js"),ie=n("./node_modules/kea-forms/lib/index.js"),te=n("./node_modules/antd/es/divider/index.js"),h=n("./node_modules/antd/es/row/index.js"),S=n("./node_modules/antd/es/col/index.js"),C=n("./node_modules/antd/es/skeleton/index.js"),pe=n("./node_modules/antd/es/tabs/index.js"),W=n("./node_modules/antd/es/popconfirm/index.js"),O=n("./node_modules/antd/es/radio/index.js"),P=n("./node_modules/antd/es/input-number/index.js"),b=n("./node_modules/antd/es/select/index.js"),p=n("./node_modules/kea/lib/index.esm.js"),_=n("./frontend/src/lib/utils.tsx"),z=n("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),le=n("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),V=n("./node_modules/core-js/modules/es.object.keys.js"),nt=n("./node_modules/core-js/modules/es.symbol.js"),at=n("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),jn=n("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Ft=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),_t=n.n(Ft),Et=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),je=n.n(Et),It=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),Te=n.n(It),St=n("./node_modules/@babel/runtime/regenerator/index.js"),U=n.n(St),mn=n("./node_modules/core-js/modules/es.regexp.exec.js"),hn=n("./node_modules/core-js/modules/es.string.match.js"),vn=n("./node_modules/core-js/modules/es.array.splice.js"),On=n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),bn=n("./node_modules/core-js/modules/es.array.iterator.js"),yn=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),xn=n("./node_modules/core-js/modules/es.string.replace.js"),Fn=n("./node_modules/core-js/modules/es.array.slice.js"),_n=n("./node_modules/core-js/modules/es.array.filter.js"),X=n("./frontend/src/types.ts"),Fe=n("./frontend/src/lib/api.ts"),Se=n("./node_modules/kea-router/lib/index.js"),q=n("./frontend/src/scenes/urls.ts"),ze=n("./frontend/src/scenes/teamLogic.tsx"),Re=n("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),st=n("./frontend/src/models/groupsModel.ts"),be=n("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Rt=n("./frontend/src/lib/components/lemonToast.tsx"),Ct=n("./frontend/src/lib/utils/eventUsageLogic.ts"),Pt=n("./node_modules/kea-loaders/lib/index.js"),At=n("./frontend/src/scenes/insights/utils/cleanFilters.ts"),rt=n("./frontend/src/lib/dayjs.ts"),Lt=n("./frontend/src/scenes/insights/sharedUtils.ts"),Tt=["created_at","id"];function ot(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),r.push.apply(r,s)}return r}function l(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ot(Object(r),!0).forEach(function(s){Te()(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Mt=function(){return{operator:"gt",threshold_type:X.T.Sentry,threshold:50,threshold_metric:l({},Object(At.a)({insight:X.E.TRENDS,date_from:Object(rt.a)().subtract(7,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(rt.a)().endOf("d").format("YYYY-MM-DDTHH:mm")}))}},Xe={id:null,created_at:null,key:"",name:"",filters:{groups:[{properties:[],rollout_percentage:null,variant:void 0}],multivariate:null},deleted:!1,active:!0,created_by:null,is_simple_flag:!1,rollout_percentage:null,ensure_experience_continuity:!1,experiment_set:null,rollback_conditions:[],performed_rollback:!1},Nt={key:"",name:"",rollout_percentage:0},Dt={variants:[{key:"",name:"",rollout_percentage:100}]},Kt=function(t){return{events:[{id:"$feature_flag_called",name:"$feature_flag_called",type:"events",properties:it(t)}]}},it=function(t){return[{key:"$feature/"+t,type:X.M.Event,value:["false"],operator:X.O.IsNot},{key:"$feature/"+t,type:X.M.Event,value:"is_set",operator:X.O.IsSet},{key:"$feature_flag",type:X.M.Event,value:t,operator:X.O.Exact}]},ne=Object(p.kea)([Object(p.path)(["scenes","feature-flags","featureFlagLogic"]),Object(p.props)({}),Object(p.key)(function(a){var t=a.id;return t!=null?t:"unknown"}),Object(p.connect)({values:[ze.a,["currentTeamId","sentryIntegrationEnabled"],st.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]]}),Object(p.actions)({setFeatureFlag:function(t){return{featureFlag:t}},setFeatureFlagMissing:!0,addConditionSet:!0,addRollbackCondition:!0,setAggregationGroupTypeIndex:function(t){return{value:t}},removeConditionSet:function(t){return{index:t}},removeRollbackCondition:function(t){return{index:t}},duplicateConditionSet:function(t){return{index:t}},updateConditionSet:function(t,r,s,i){return{index:t,newRolloutPercentage:r,newProperties:s,newVariant:i}},deleteFeatureFlag:function(t){return{featureFlag:t}},setMultivariateEnabled:function(t){return{enabled:t}},setMultivariateOptions:function(t){return{multivariateOptions:t}},addVariant:!0,duplicateVariant:function(t){return{index:t}},removeVariant:function(t){return{index:t}},editFeatureFlag:function(t){return{editing:t}},distributeVariantsEqually:!0,setFilters:function(t){return{filters:t}},loadInsightAtIndex:function(t,r){return{index:t,filters:r}},setInsightResultAtIndex:function(t,r){return{index:t,average:r}},loadAllInsightsForFlag:!0}),Object(ie.forms)(function(a){var t=a.actions;return{featureFlag:{defaults:l({},Xe),errors:function(s){var i,o,d,c=s.key,u=s.filters;return{key:c?(i=c.match)!==null&&i!==void 0&&i.call(c,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key",filters:{multivariate:{variants:u==null||(o=u.multivariate)===null||o===void 0||(d=o.variants)===null||d===void 0?void 0:d.map(function(g){var v,y=g.key;return{key:y?(v=y.match)!==null&&v!==void 0&&v.call(y,/^([A-z]|[a-z]|[0-9]|-|_)+$/)?void 0:"Only letters, numbers, hyphens (-) & underscores (_) are allowed.":"You need to set a key"}})}}}},submit:function(s){t.saveFeatureFlag(s)}}}}),Object(p.reducers)({featureFlag:[l({},Xe),{setFeatureFlag:function(t,r){var s=r.featureFlag;if(s.filters.groups){var i=s.filters.groups.map(function(o){return o.properties?l(l({},o),{},{properties:Object(_.r)(o.properties)}):o});return l(l({},s),{},{filters:l(l({},s==null?void 0:s.filters),{},{groups:i})})}return s},addConditionSet:function(t){if(!t)return t;var r=[].concat(A()(t==null?void 0:t.filters.groups),[{properties:[],rollout_percentage:null}]);return l(l({},t),{},{filters:l(l({},t.filters),{},{groups:r})})},addRollbackCondition:function(t){return t&&l(l({},t),{},{rollback_conditions:[].concat(A()(t.rollback_conditions),[Mt()])})},removeRollbackCondition:function(t,r){var s=r.index;if(!t)return t;var i=A()(t.rollback_conditions);return i.splice(s,1),l(l({},t),{},{rollback_conditions:i})},updateConditionSet:function(t,r){var s=r.index,i=r.newRolloutPercentage,o=r.newProperties,d=r.newVariant;if(!t)return t;var c=A()(t==null?void 0:t.filters.groups);return i!==void 0&&(c[s]=l(l({},c[s]),{},{rollout_percentage:i})),o!==void 0&&(c[s]=l(l({},c[s]),{},{properties:o})),d!==void 0&&(c[s]=l(l({},c[s]),{},{variant:d})),l(l({},t),{},{filters:l(l({},t.filters),{},{groups:c})})},removeConditionSet:function(t,r){var s=r.index;if(!t)return t;var i=A()(t.filters.groups);return i.splice(s,1),l(l({},t),{},{filters:l(l({},t.filters),{},{groups:i})})},duplicateConditionSet:function(t,r){var s=r.index;if(!t)return t;var i=t.filters.groups.concat([t.filters.groups[s]]);return l(l({},t),{},{filters:l(l({},t.filters),{},{groups:i})})},setMultivariateOptions:function(t,r){var s=r.multivariateOptions;return t&&l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:s})})},addVariant:function(t){var r;if(!t)return t;var s=A()(((r=t.filters.multivariate)===null||r===void 0?void 0:r.variants)||[]);return l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:l(l({},t.filters.multivariate||{}),{},{variants:[].concat(A()(s),[Nt])})})})},removeVariant:function(t,r){var s,i=r.index;if(!t)return t;var o=A()(((s=t.filters.multivariate)===null||s===void 0?void 0:s.variants)||[]);return o.splice(i,1),l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:l(l({},t.filters.multivariate),{},{variants:o})})})},distributeVariantsEqually:function(t){var r;if(!t)return t;var s=A()(((r=t.filters.multivariate)===null||r===void 0?void 0:r.variants)||[]),i=s.length;if(i>0&&i<=100){var o=Math.round(100/i),d=o*i,c=d-100;s.forEach(function(u,g){s[g]=l(l({},u),{},{rollout_percentage:o})}),s[i-1]=l(l({},s[i-1]),{},{rollout_percentage:o-c})}return l(l({},t),{},{filters:l(l({},t.filters),{},{multivariate:l(l({},t.filters.multivariate),{},{variants:s})})})},setAggregationGroupTypeIndex:function(t,r){var s=r.value;return!t||t.filters.aggregation_group_type_index==s?t:l(l({},t),{},{filters:l(l({},t.filters),{},{aggregation_group_type_index:s,groups:[{properties:[],rollout_percentage:null}]})})}}],featureFlagMissing:[!1,{setFeatureFlagMissing:function(){return!0}}],isEditingFlag:[!1,{editFeatureFlag:function(t,r){var s=r.editing;return s}}],insightRollingAverages:[{},{setInsightResultAtIndex:function(t,r){var s=r.index,i=r.average;return l(l({},t),{},Te()({},"".concat(s),i))}}]}),Object(Pt.loaders)(function(a){var t=a.values,r=a.props,s=a.actions;return{featureFlag:{loadFeatureFlag:function(){var i=je()(U.a.mark(function d(){return U.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(r.id&&r.id!=="new")){u.next=11;break}return u.prev=1,u.next=4,Fe.b.get("api/projects/".concat(t.currentTeamId,"/feature_flags/").concat(r.id));case 4:return u.abrupt("return",u.sent);case 7:throw u.prev=7,u.t0=u.catch(1),s.setFeatureFlagMissing(),u.t0;case 11:return u.abrupt("return",Xe);case 12:case"end":return u.stop()}},d,null,[[1,7]])}));function o(){return i.apply(this,arguments)}return o}(),saveFeatureFlag:function(){var i=je()(U.a.mark(function d(c){var u,g,v;return U.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(u=c.created_at,g=c.id,v=_t()(c,Tt),j.prev=1,c.id){j.next=8;break}return j.next=5,Fe.b.create("api/projects/".concat(t.currentTeamId,"/feature_flags"),v);case 5:return j.abrupt("return",j.sent);case 8:return j.next=10,Fe.b.update("api/projects/".concat(t.currentTeamId,"/feature_flags/").concat(c.id),v);case 10:return j.abrupt("return",j.sent);case 11:j.next=17;break;case 13:throw j.prev=13,j.t0=j.catch(1),(j.t0.code==="behavioral_cohort_found"||j.t0.code==="cohort_does_not_exist")&&Ct.e.actions.reportFailedToCreateFeatureFlagWithCohort(j.t0.code,j.t0.detail),j.t0;case 17:case"end":return j.stop()}},d,null,[[1,13]])}));function o(d){return i.apply(this,arguments)}return o}()},recentInsights:[[],{loadRecentInsights:function(){var i=je()(U.a.mark(function d(){var c;return U.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(r.id&&r.id!=="new"&&t.featureFlag.key)){g.next=5;break}return g.next=3,Fe.b.get("api/projects/".concat(t.currentTeamId,"/insights/?feature_flag=").concat(t.featureFlag.key,"&order=-created_at"));case 3:return c=g.sent,g.abrupt("return",c.results);case 5:return g.abrupt("return",[]);case 6:case"end":return g.stop()}},d)}));function o(){return i.apply(this,arguments)}return o}()}],sentryErrorCount:[void 0,{loadSentryErrorCount:function(){var i=je()(U.a.mark(function d(){var c;return U.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Fe.b.get("api/sentry_errors/");case 2:return c=g.sent,g.abrupt("return",c.total_count);case 4:case"end":return g.stop()}},d)}));function o(){return i.apply(this,arguments)}return o}()}]}}),Object(p.listeners)(function(a){var t=a.actions,r=a.values;return{saveFeatureFlagSuccess:function(i){var o,d=i.featureFlag;Rt.d.success("Feature flag saved"),(o=Re.b.findMounted())===null||o===void 0||o.actions.updateFlag(d),Se.router.actions.replace(q.a.featureFlag(d.id)),t.editFeatureFlag(!1)},deleteFeatureFlag:function(){var s=je()(U.a.mark(function o(d){var c;return U.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:c=d.featureFlag,Object(_.x)({endpoint:"projects/".concat(r.currentTeamId,"/feature_flags"),object:{name:c.name,id:c.id},callback:function(){var y,j;c.id&&((y=Re.b.findMounted())===null||y===void 0||y.actions.deleteFlag(c.id)),(j=Re.b.findMounted())===null||j===void 0||j.actions.loadFeatureFlags(),Se.router.actions.push(q.a.featureFlags())}});case 2:case"end":return g.stop()}},o)}));function i(o){return s.apply(this,arguments)}return i}(),setMultivariateEnabled:function(){var s=je()(U.a.mark(function o(d){var c;return U.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:c=d.enabled,c?t.setMultivariateOptions(Dt):t.setMultivariateOptions(null);case 2:case"end":return g.stop()}},o)}));function i(o){return s.apply(this,arguments)}return i}(),loadFeatureFlagSuccess:function(){var s=je()(U.a.mark(function o(){return U.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t.loadRecentInsights(),t.loadAllInsightsForFlag();case 2:case"end":return c.stop()}},o)}));function i(){return s.apply(this,arguments)}return i}(),loadInsightAtIndex:function(){var s=je()(U.a.mark(function o(d){var c,u,g,v,y,j,E,R;return U.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c=d.index,u=d.filters,!u){m.next=9;break}return m.next=4,Fe.b.get("api/projects/".concat(r.currentTeamId,"/insights/trend/?").concat(Object(_.Fb)(Object(Lt.a)(u))));case 4:y=m.sent,j=(g=y.result)===null||g===void 0||(v=g[0])===null||v===void 0?void 0:v.data,E=j.slice(0,7),R=Math.round(Object(_.Eb)(E)/7),t.setInsightResultAtIndex(c,R);case 9:case"end":return m.stop()}},o)}));function i(o){return s.apply(this,arguments)}return i}(),loadAllInsightsForFlag:function(){var i;(i=r.featureFlag.rollback_conditions)===null||i===void 0||i.forEach(function(o,d){o.threshold_metric&&t.loadInsightAtIndex(d,o.threshold_metric)})},addRollbackCondition:function(){var i=r.featureFlag.rollback_conditions.length-1;t.loadInsightAtIndex(i,r.featureFlag.rollback_conditions[i].threshold_metric)}}}),Object(p.selectors)({props:[function(){return[function(a,t){return t}]},function(a){return a}],multivariateEnabled:[function(a){return[a.featureFlag]},function(a){return!!(a!=null&&a.filters.multivariate)}],variants:[function(a){return[a.featureFlag]},function(a){var t;return(a==null||(t=a.filters.multivariate)===null||t===void 0?void 0:t.variants)||[]}],nonEmptyVariants:[function(a){return[a.variants]},function(a){return a.filter(function(t){var r=t.key;return!!r})}],variantRolloutSum:[function(a){return[a.variants]},function(a){return a.reduce(function(t,r){var s=r.rollout_percentage;return t+s},0)}],areVariantRolloutsValid:[function(a){return[a.variants,a.variantRolloutSum]},function(a,t){return a.every(function(r){var s=r.rollout_percentage;return s>=0&&s<=100})&&t===100}],aggregationTargetName:[function(a){return[a.featureFlag,a.groupTypes,a.aggregationLabel]},function(a,t,r){return a&&a.filters.aggregation_group_type_index!=null&&t.length>0?r(a.filters.aggregation_group_type_index).plural:"users"}],taxonomicGroupTypes:[function(a){return[a.featureFlag,a.groupsTaxonomicTypes]},function(a,t){return a&&a.filters.aggregation_group_type_index!=null&&t.length>0?[t[a.filters.aggregation_group_type_index]]:[be.a.PersonProperties,be.a.Cohorts]}],breadcrumbs:[function(a){return[a.featureFlag]},function(a){return[{name:"Feature Flags",path:q.a.featureFlags()}].concat(A()(a?[{name:a.key||"Unnamed"}]:[]))}]}),Object(Se.urlToAction)(function(a){var t,r=a.actions,s=a.props;return Te()({},q.a.featureFlag((t=s.id)!==null&&t!==void 0?t:"new"),function(i,o,d,c){var u=c.method;u==="PUSH"&&(s.id?r.loadFeatureFlag():r.resetFeatureFlag())})}),Object(p.afterMount)(function(a){var t,r=a.props,s=a.actions,i=(t=Re.b.findMounted())===null||t===void 0?void 0:t.values.featureFlags.find(function(o){return o.id===r.id});i?(s.setFeatureFlag(i),s.loadRecentInsights(),s.loadAllInsightsForFlag()):r.id!=="new"&&s.loadFeatureFlag(),s.loadSentryErrorCount()})]),lt=n("./frontend/src/lib/logic/featureFlagLogic.ts"),Bt=n("./node_modules/antd/es/card/index.js"),M=n("./frontend/src/lib/components/icons.tsx"),de=n("./frontend/src/lib/components/LemonDivider/index.ts"),J=n("./frontend/src/lib/components/CodeSnippet/index.tsx"),e=n("./node_modules/react/jsx-runtime.js"),me="?utm_medium=in-product&utm_campaign=feature-flag";function Me(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(J.a,{language:J.b.JavaScript,wrap:!0,children:"const isMyFlagEnabledForUser = await client.isFeatureEnabled('".concat(t,`', 'user distinct id')

if (isMyFlagEnabledForUser) {
    // Do something differently for this user
}`)})})}function Ne(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(J.a,{language:J.b.JavaScript,wrap:!0,children:"if\xA0(posthog.isFeatureEnabled('".concat(t!=null?t:"",`')) {
    // run your activation code here
}`)})})}function De(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(J.a,{language:J.b.PHP,wrap:!0,children:"if (PostHog::isFeatureEnabled('".concat(t,`', 'some distinct id')) {
    // do something here
}`)})})}function Ke(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(J.a,{language:J.b.Go,wrap:!0,children:`isFlagEnabledForUser, err := client.IsFeatureEnabled(
                    FeatureFlagPayload{
                        Key:        '`.concat(t,`',
                        DistinctId: "distinct-id",
                    })

if (isFlagEnabledForUser) {
  // Do something differently for this user
}`)})})}function Be(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(J.a,{language:J.b.Ruby,wrap:!0,children:"is_my_flag_enabled = posthog.is_feature_enabled('".concat(t,`', 'user distinct id')

if is_my_flag_enabled
  # Do something differently for this user
end`)})})}function Ve(a){var t=a.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(J.a,{language:J.b.Python,wrap:!0,children:'if\xA0posthog.feature_enabled("'.concat(t,`", "user_distinct_id"):
    runAwesomeFeature()
`)})})}function Vt(){var a=Object(p.useValues)(ze.a),t=a.currentTeam;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(J.a,{language:J.b.Bash,wrap:!0,children:"curl ".concat(window.location.origin,`/decide/ \\
-X POST -H 'Content-Type: application/json' \\
-d '{
    "api_key": "`).concat(t?t.api_token:"[project_api_key]",`",
    "distinct_id": "[user distinct id]"
}'
                `)})})}try{Me.displayName="NodeJSSnippet",Me.__docgenInfo={description:"",displayName:"NodeJSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"]={docgenInfo:Me.__docgenInfo,name:"NodeJSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"})}catch(a){}try{Ne.displayName="JSSnippet",Ne.__docgenInfo={description:"",displayName:"JSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"]={docgenInfo:Ne.__docgenInfo,name:"JSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"})}catch(a){}try{De.displayName="PHPSnippet",De.__docgenInfo={description:"",displayName:"PHPSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"]={docgenInfo:De.__docgenInfo,name:"PHPSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"})}catch(a){}try{Ke.displayName="GolangSnippet",Ke.__docgenInfo={description:"",displayName:"GolangSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"]={docgenInfo:Ke.__docgenInfo,name:"GolangSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"})}catch(a){}try{Be.displayName="RubySnippet",Be.__docgenInfo={description:"",displayName:"RubySnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"]={docgenInfo:Be.__docgenInfo,name:"RubySnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"})}catch(a){}try{Ve.displayName="PythonSnippet",Ve.__docgenInfo={description:"",displayName:"PythonSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"]={docgenInfo:Ve.__docgenInfo,name:"PythonSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"})}catch(a){}var Ut=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ct=n.n(Ut),Wt=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss"),dt=n.n(Wt),Qe={};Qe.insert="head",Qe.singleton=!1;var En=ct()(dt.a,Qe),In=dt.a.locals||{},ye="https://posthog.com/docs/",_e="#feature-flags",Ze=[{value:"JavaScript",documentationLink:"".concat(ye,"integrations/js-integration").concat(me).concat(_e),Icon:M.IconJavascript,Snippet:Ne},{value:"Node.js",documentationLink:"".concat(ye,"integrations/node-integration").concat(me).concat(_e),Icon:M.IconNodeJS,Snippet:Me},{value:"PHP",documentationLink:"".concat(ye,"integrations/php-integration").concat(me).concat(_e),Icon:M.IconPHP,Snippet:De},{value:"Ruby",documentationLink:"".concat(ye,"integrations/ruby-integration").concat(me).concat(_e),Icon:M.IconRuby,Snippet:Be},{value:"Golang",documentationLink:"".concat(ye,"integrations/go-integration").concat(me).concat(_e),Icon:M.IconGolang,Snippet:Ke},{value:"Python",documentationLink:"".concat(ye,"integrations/python-integration").concat(me).concat(_e),Icon:M.IconPython,Snippet:Ve},{value:"API",documentationLink:"".concat(ye,"api/feature-flags").concat(me),Icon:M.IconOpenInNew,Snippet:Vt}];function Ht(a){var t=a.selectedOptionValue,r=a.selectOption;return Object(e.jsxs)(h.a,{className:"FeatureFlagInstructionsHeader",justify:"space-between",align:"middle",children:[Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__header-title",children:[Object(e.jsx)(M.IconFlag,{className:"FeatureFlagInstructionsHeader__header-title__icon"}),Object(e.jsx)("b",{children:"Learn how to use feature flags in your code"})]}),Object(e.jsx)(b.a,{"data-attr":"feature-flag-instructions-select",value:t,style:{width:140},onChange:r,children:Ze.map(function(s,i){var o=s.value,d=s.Icon;return Object(e.jsx)(b.a.Option,{"data-attr":"feature-flag-instructions-select-option-"+o,value:o,children:Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__option",children:[Object(e.jsx)("div",{className:"FeatureFlagInstructionsHeader__option__icon",children:Object(e.jsx)(d,{})}),Object(e.jsx)("div",{children:o})]})},i)})})]})}function wt(a){var t=a.documenrationLink;return Object(e.jsxs)("div",{className:"mt-4",children:["Need more information?"," ",Object(e.jsxs)("a",{"data-attr":"feature-flag-doc-link",target:"_blank",rel:"noopener",href:t,children:["Check the docs ",Object(e.jsx)(M.IconOpenInNew,{})]})]})}function Ce(a){var t=a.featureFlagKey,r=Ze[0],s=Object(k.useState)(r),i=F()(s,2),o=i[0],d=i[1],c=function(g){var v=Ze.find(function(y){return y.value===g});v&&d(v)};return Object(e.jsxs)(Bt.a,{size:"small",children:[Object(e.jsx)(Ht,{selectedOptionValue:o.value,selectOption:c}),Object(e.jsx)(de.a,{}),Object(e.jsx)("div",{className:"mt mb",children:Object(e.jsx)(o.Snippet,{"data-attr":"feature-flag-instructions-snippet",flagKey:t})}),Object(e.jsx)(de.a,{}),Object(e.jsx)(wt,{documenrationLink:o.documentationLink})]})}try{Ce.displayName="FeatureFlagInstructions",Ce.__docgenInfo={description:"",displayName:"FeatureFlagInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"]={docgenInfo:Ce.__docgenInfo,name:"FeatureFlagInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"})}catch(a){}var ut=n("./frontend/src/lib/components/PageHeader.tsx"),$t=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss"),gt=n.n($t),qe={};qe.insert="head",qe.singleton=!1;var Sn=ct()(gt.a,qe),Rn=gt.a.locals||{},Gt=n("./frontend/src/lib/components/Tooltip.tsx"),Yt=n("./node_modules/rc-select/es/index.js"),Ue=n("./frontend/src/lib/components/Link.tsx"),We=n("./frontend/src/lib/introductions/groupsAccessLogic.ts");function He(a){var t=a.value,r=Object(p.useValues)(We.b),s=r.groupsAccessStatus;return[We.a.HasAccess,We.a.HasGroupTypes,We.a.NoAccess].includes(s)?Object(e.jsxs)(Yt.c.Option,{value:t,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--side)",color:"var(--muted)"},children:[Object(e.jsx)(le.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups \u2013"," ",Object(e.jsx)(Ue.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",className:"font-semibold",children:"Learn more"})]},"groups"):null}try{He.displayName="GroupsIntroductionOption",He.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:He.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(a){}var ft=n("./frontend/src/scenes/userLogic.ts"),H=n("./frontend/src/lib/components/LemonButton/index.ts"),Q=n("./frontend/src/lib/forms/Field.tsx"),kt=n("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),et=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),pt=n("./frontend/src/lib/components/LemonCheckbox/index.ts"),Jt=n("./frontend/src/scenes/events/EventBufferNotice.tsx"),jt=n("./frontend/src/lib/components/AlertMessage/index.ts"),we=n("./frontend/src/lib/components/Spinner/Spinner.tsx"),mt=n("./frontend/src/lib/components/CopyToClipboard.tsx"),$e=n("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Ee=n("./frontend/src/lib/constants.tsx"),ht=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),zt=n("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),Xt=n("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),Qt=n("./frontend/src/lib/components/DefinitionPopup/utils.ts"),vt=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),Zt=n("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function qt(){var a=Object(p.useValues)(ne),t=a.recentInsights,r=a.recentInsightsLoading,s=a.featureFlag;return Object(e.jsx)(vt.a,{title:"Insights that use this feature flag",loading:r,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:q.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(s.key)})},items:t.slice(0,5),renderRow:function(o,d){return Object(e.jsx)(Zt.a,{insight:o},d)}})}var en=n("./frontend/src/lib/components/NotFound/index.tsx"),tn=n("./frontend/src/models/cohortsModel.ts"),Z=n("./frontend/@posthog/lemon-ui/src/index.ts"),nn=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),an=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function Ot(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),r.push.apply(r,s)}return r}function sn(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(r),!0).forEach(function(s){Te()(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Pe(a){var t=a.readOnly,r=Object(p.useValues)(ne),s=r.featureFlag,i=r.sentryIntegrationEnabled,o=r.sentryErrorCount,d=r.insightRollingAverages,c=Object(p.useActions)(ne),u=c.addRollbackCondition,g=c.removeRollbackCondition,v=c.loadInsightAtIndex,y=Object(p.useValues)(ft.a),j=y.user;return Object(e.jsxs)("div",{children:[Object(e.jsxs)("div",{className:"mb-2",children:[Object(e.jsx)("b",{children:"Auto rollback"}),Object(e.jsx)(Z.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"}),!t&&Object(e.jsx)("div",{className:"mt-2",children:"Specify the conditions in which this feature flag will automatically roll back."})]}),t&&s.rollback_conditions&&s.rollback_conditions.map(function(E,R){var N,m,L;return Object(e.jsxs)(e.Fragment,{children:[R>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),E.threshold_type==="insight"&&(N=E.threshold_metric)!==null&&N!==void 0&&(m=N.events)!==null&&m!==void 0&&(L=m[0])!==null&&L!==void 0&&L.name?Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsx)("b",{children:"".concat(Object(_.i)(E.threshold_type)," based rollback")}),Object(e.jsx)(Z.LemonDivider,{className:"my-3"}),Object(e.jsxs)(h.a,{align:"middle",children:[d[R]&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("b",{children:E.threshold_metric.events[0].name}),"\xA0 trailing average is ",d[R],"."]}),"\xA0Trigger when trailing average of \xA0",Object(e.jsx)("b",{children:E.threshold_metric.events[0].name}),"\xA0 is\xA0",E.operator&&_.I[E.operator]," ",E.threshold]})]}):Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsx)("b",{children:"".concat(Object(_.i)(E.threshold_type)," based rollback")}),Object(e.jsx)(Z.LemonDivider,{className:"my-3"}),Object(e.jsxs)(h.a,{align:"middle",children:["Trigger when there is a\xA0",Object(e.jsxs)("b",{children:[E.threshold,"%"]}),"\xA0increase in errors"]})]})]})}),!t&&s.rollback_conditions&&s.rollback_conditions.map(function(E,R){return Object(e.jsxs)(e.Fragment,{children:[R>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(e.jsx)("div",{className:"mb-4 border rounded p-4",children:Object(e.jsxs)(ie.Group,{name:["rollback_conditions",R],children:[Object(e.jsxs)(h.a,{align:"middle",justify:"space-between",children:[Object(e.jsxs)(h.a,{children:[Object(e.jsx)("div",{className:"mt-3 mr-3",children:Object(e.jsx)("b",{children:"Rollback Condition Type"})}),Object(e.jsx)(Q.a,{name:"threshold_type",children:function(m){var L=m.value,w=m.onChange;return Object(e.jsx)(Z.LemonSelect,{value:L,onChange:w,options:[{value:X.T.Sentry,label:"Error Based"},{value:X.T.Insight,label:"Metric Based"}]})}})]}),Object(e.jsx)(Z.LemonButton,{icon:Object(e.jsx)(M.IconDelete,{}),status:"muted",noPadding:!0,onClick:function(){g(R)}})]}),Object(e.jsx)(Z.LemonDivider,{className:"my-3"}),s.rollback_conditions[R].threshold_type=="insight"?Object(e.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[Object(e.jsx)(Q.a,{name:"threshold_metric",children:function(m){var L=m.value,w=m.onChange;return Object(e.jsx)(nn.a,{filters:L,setFilters:function(ue){w(sn({},ue)),v(R,ue)},typeKey:"feature-flag-rollback-trends-"+R,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:an.b.None,propertiesTaxonomicGroupTypes:[be.a.EventProperties,be.a.PersonProperties,be.a.EventFeatureFlags,be.a.Cohorts,be.a.Elements]})}}),Object(e.jsxs)("span",{children:["trailing 7 day average is\xA0",d[R]!==void 0?Object(e.jsx)("b",{children:d[R]}):Object(e.jsx)(we.a,{}),". Trigger when trailing average is"]}),Object(e.jsx)(Q.a,{name:"operator",children:function(m){var L=m.value,w=m.onChange;return Object(e.jsx)(Z.LemonSelect,{value:L,onChange:w,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),Object(e.jsx)(Q.a,{name:"threshold",children:Object(e.jsx)(Z.LemonInput,{min:0,type:"number"})})]}):i?Object(e.jsx)("div",{children:Object(e.jsxs)(h.a,{align:"middle",children:[o?Object(e.jsxs)("span",{children:[Object(e.jsxs)("b",{children:[Object(_.P)(o)," "]})," sentry errors in the past 24 hours."," "]}):Object(e.jsx)(we.a,{}),Object(e.jsx)("span",{children:"\xA0Trigger when there is a"}),Object(e.jsx)(Q.a,{name:"threshold",className:"ml-3 mr-3",children:function(m){var L=m.value,w=m.onChange;return Object(e.jsx)(Z.LemonInput,{value:L,suffix:Object(e.jsx)(e.Fragment,{children:"%"}),type:"number",min:0,onChange:w})}}),Object(e.jsx)(Q.a,{name:"operator",className:"mr-3",children:function(m){var L=m.value,w=m.onChange;return Object(e.jsx)(Z.LemonSelect,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value:L,onChange:w})}}),Object(e.jsxs)("span",{children:["to"," ",o?Object(e.jsx)("b",{children:Object(_.P)(Math.round(o*(1+(s.rollback_conditions[R].threshold||0)/100)))}):Object(e.jsx)(we.a,{})," ","errors."]}),Object(e.jsx)("div",{})]})}):j!=null&&j.is_staff?Object(e.jsxs)("div",{className:"mt-4",children:[Object(e.jsx)("b",{children:"This feature requires an active Sentry integration."}),Object(e.jsx)("br",{}),Object(e.jsx)(Z.Link,{to:q.a.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",Object(e.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):Object(e.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]})}),!t&&Object(e.jsx)(Z.LemonButton,{type:"secondary",onClick:function(){u()},children:"Add condition"})]})}try{Pe.displayName="FeatureFlagAutoRollback",Pe.__docgenInfo={description:"",displayName:"FeatureFlagAutoRollback",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"]={docgenInfo:Pe.__docgenInfo,name:"FeatureFlagAutoRollback",path:"frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"})}catch(a){}var rn=n("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),on=n("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),ln=n("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),Ge=function(t){return{events:Kt(t).events}};function Ye(a){var t=a.flagKey,r=Object(p.useValues)(ze.a),s=r.currentTeam,i=Object(ln.d)({key:"feature-flag-".concat(t),filters:Ge(t)}),o=Object(p.useValues)(i),d=o.sessionRecordings,c=o.sessionRecordingsResponseLoading,u=o.filters;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(on.a,{}),Object(e.jsx)(vt.a,{title:"Recordings with current feature flag",viewAllURL:q.a.sessionRecordings(void 0,u),loading:c,emptyMessage:s!=null&&s.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:q.a.projectSettings()+"#recordings"},items:d.slice(0,5),renderRow:function(v,y){return Object(e.jsx)(rn.b,{recording:v},y)}})]})}try{Ye.displayName="FeatureFlagRecordings",Ye.__docgenInfo={description:"",displayName:"FeatureFlagRecordings",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"]={docgenInfo:Ye.__docgenInfo,name:"FeatureFlagRecordings",path:"frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"})}catch(a){}try{Ge.displayName="filtersForFlag",Ge.__docgenInfo={description:"",displayName:"filtersForFlag",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#filtersForFlag"]={docgenInfo:Ge.__docgenInfo,name:"filtersForFlag",path:"frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#filtersForFlag"})}catch(a){}var cn=n("./frontend/src/scenes/billing/billingLogic.ts"),dn=n("./frontend/src/scenes/events/index.ts"),un=n("./frontend/src/lib/components/PropertyFilters/utils.ts"),gn={component:Ae,logic:ne,paramsToProps:function(t){var r=t.params.id;return{id:r&&r!=="new"?parseInt(r):"new"}}};function bt(a){setTimeout(function(){var t;return(t=document.querySelector('.variant-form-list input[data-key-index="'.concat(a,'"]')))===null||t===void 0?void 0:t.focus()},50)}function Ae(){var a,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.id,s=Object(p.useValues)(ne),i=s.props,o=s.featureFlag,d=s.featureFlagLoading,c=s.featureFlagMissing,u=s.isEditingFlag,g=Object(p.useValues)(lt.a),v=g.featureFlags,y=Object(p.useActions)(ne),j=y.deleteFeatureFlag,E=y.editFeatureFlag,R=y.loadFeatureFlag,N=Object(k.useState)(!1),m=F()(N,2),L=m[0],w=m[1],he=Object(k.useState)(Re.a.OVERVIEW),ue=F()(he,2),xe=ue[0],Le=ue[1],Ie=r==="new"||r===void 0;return c?Object(e.jsx)(en.a,{object:"feature flag"}):d?Object(e.jsx)(we.b,{}):Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:"feature-flag",children:Ie||u?Object(e.jsxs)(ie.Form,{logic:ne,props:i,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(e.jsx)(ut.a,{title:Ie?"New feature flag":o.key||"Untitled",buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(H.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:function(){u?(E(!1),R()):Se.router.actions.push(q.a.featureFlags())},disabled:d,children:"Cancel"}),Object(e.jsx)(H.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:d,disabled:d,children:"Save"})]})}),Object(e.jsx)(te.a,{}),o.experiment_set&&((a=o.experiment_set)===null||a===void 0?void 0:a.length)>0&&Object(e.jsxs)(jt.a,{type:"warning",children:["This feature flag is linked to an experiment. It's recommended to only make changes to this flag"," ",Object(e.jsx)(Ue.a,{to:q.a.experiment(o.experiment_set[0]),children:"using the experiment creation screen."})]}),Object(e.jsx)(Jt.a,{additionalInfo:", meaning it can take around 60 seconds for some flags to update for recently-identified persons. To sidestep this, you can choose to override server properties when requesting the feature flag"}),Object(e.jsxs)(h.a,{gutter:16,style:{marginBottom:32},children:[Object(e.jsxs)(S.a,{span:12,className:"space-y-4",children:[Object(e.jsx)(Q.a,{name:"key",label:"Key",help:L&&r!=="new"?Object(e.jsxs)("span",{className:"text-warning",children:[Object(e.jsx)("b",{children:"Warning! "}),"Changing this key will",Object(e.jsxs)("a",{href:"https://posthog.com/docs/features/feature-flags".concat(me,"#feature-flag-persistence"),target:"_blank",rel:"noopener",children:[" ","affect the persistence of your flag ",Object(e.jsx)(M.IconOpenInNew,{})]})]}):void 0,children:function(f){var x=f.value,B=f.onChange;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(et.a,{value:x,onChange:function(Oe){Oe!==x&&w(!0),B(Oe)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),Object(e.jsx)("span",{style:{fontSize:13},className:"text-muted",children:"Feature flag keys must be unique"})]})}}),Object(e.jsx)(Q.a,{name:"name",label:"Description",children:Object(e.jsx)(kt.a,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:o.name||""})}),Object(e.jsx)(Q.a,{name:"ensure_experience_continuity",children:function(f){var x=f.value,B=f.onChange;return Object(e.jsxs)("div",{className:"border rounded p-4",children:[Object(e.jsx)(pt.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:function(){return B(!x)},fullWidth:!0,checked:x}),Object(e.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",Object(e.jsxs)(Ue.a,{to:"https://posthog.com/manual/feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:["Learn more ",Object(e.jsx)(M.IconOpenInNew,{})]})]})]})}}),Object(e.jsx)(Q.a,{name:"active",children:function(f){var x=f.value,B=f.onChange;return Object(e.jsx)("div",{className:"border rounded p-4",children:Object(e.jsx)(pt.a,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:function(){return B(!x)},checked:x})})}})]}),Object(e.jsx)(S.a,{span:12,children:Object(e.jsx)(Ce,{featureFlagKey:o.key||"my-flag"})})]}),Object(e.jsx)(te.a,{}),Object(e.jsx)(yt,{}),Object(e.jsx)(te.a,{}),Object(e.jsx)(xt,{}),Object(e.jsx)(te.a,{}),v[Ee.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(e.jsx)(Pe,{}),Object(e.jsx)(de.a,{className:"mt-8"}),Object(e.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[Object(e.jsx)(H.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:function(){u?(E(!1),R()):Se.router.actions.push(q.a.featureFlags())},disabled:d,children:"Cancel"}),Object(e.jsx)(H.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:d,disabled:d,children:"Save"})]})]}):Object(e.jsx)(e.Fragment,{children:d?Object(e.jsx)(C.a,{active:!0}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ut.a,{title:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[o.key||"Untitled",Object(e.jsx)(mt.a,{explicitValue:o.key,iconStyle:{color:"var(--muted-alt)"}}),Object(e.jsx)("div",{className:"flex",children:o.active?Object(e.jsx)(ht.a,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(ht.a,{type:"default",className:"uppercase",children:"Disabled"})})]}),description:Object(e.jsx)(e.Fragment,{children:o.name?Object(e.jsx)("span",{style:{fontStyle:"normal"},children:o.name}):"There is no description for this feature flag."}),buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[Object(e.jsx)(H.a,{"data-attr":"delete-feature-flag",status:"danger",type:"secondary",onClick:function(){j(o)},disabled:d,children:"Delete feature flag"}),Object(e.jsx)(H.a,{"data-attr":"edit-feature-flag",type:"secondary",onClick:function(){E(!0)},disabled:d,children:"Edit"})]})}),Object(e.jsxs)(pe.a,{activeKey:xe,destroyInactiveTabPane:!0,onChange:function(f){return Le(f)},children:[Object(e.jsx)(pe.a.TabPane,{tab:"Overview",children:Object(e.jsxs)(h.a,{children:[Object(e.jsxs)(S.a,{span:13,children:[Object(e.jsx)(yt,{readOnly:!0}),Object(e.jsx)(xt,{readOnly:!0}),v[Ee.i.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(e.jsx)(Pe,{readOnly:!0})]}),Object(e.jsxs)(S.a,{span:11,className:"pl-4",children:[Object(e.jsx)(qt,{}),Object(e.jsx)("div",{className:"my-4"}),v[Ee.i.RECORDINGS_ON_FEATURE_FLAGS]?Object(e.jsx)(Ye,{flagKey:o.key||"my-flag"}):Object(e.jsx)(Ce,{featureFlagKey:o.key||"my-flag"})]})]})},"overview"),v[Ee.i.EXPOSURES_ON_FEATURE_FLAGS]&&o.key&&r&&Object(e.jsx)(pe.a.TabPane,{tab:"Exposures",children:Object(e.jsx)(fn,{id:r,featureFlagKey:o.key})},"exposure"),o.id&&Object(e.jsx)(pe.a.TabPane,{tab:"History",children:Object(e.jsx)(zt.a,{scope:Xt.a.FEATURE_FLAG,id:o.id})},"history")]})]})})})})}function fn(a){var t=a.id,r=a.featureFlagKey;return Object(e.jsx)(dn.b,{fixedFilters:{event_filter:"$feature_flag_called",properties:it(r)},sceneUrl:q.a.featureFlag(t),fetchMonths:3,pageKey:"feature-flag-".concat(r,"}"),showEventFilter:!1,showPropertyFilter:!1})}function yt(a){var t=a.readOnly,r=Object(p.useValues)(ne),s=r.multivariateEnabled,i=r.variants,o=r.areVariantRolloutsValid,d=r.featureFlagLoading,c=r.variantRolloutSum,u=r.nonEmptyVariants,g=r.aggregationTargetName,v=r.featureFlag,y=Object(p.useActions)(ne),j=y.distributeVariantsEqually,E=y.addVariant,R=y.removeVariant,N=y.setMultivariateEnabled,m=Object(k.useState)(!1),L=F()(m,2),w=L[0],he=L[1],ue=Object(p.useValues)(ft.a),xe=ue.hasAvailableFeature,Le=Object(p.useValues)(cn.b),Ie=Le.upgradeLink;return Object(e.jsxs)(e.Fragment,{children:[t?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(e.jsx)("span",{className:"card-secondary",children:"Type"}),Object(e.jsx)("span",{children:v.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),Object(e.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),Object(e.jsxs)("span",{children:["This flag"," ",Object(e.jsxs)("b",{children:[v.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),Object(e.jsx)(de.a,{className:"my-3"}),v.filters.multivariate&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Variant keys"})}),Object(e.jsxs)("div",{className:"border rounded p-4 mb-4",children:[Object(e.jsxs)(h.a,{className:"font-semibold",children:[Object(e.jsx)(S.a,{span:10,children:"Key"}),Object(e.jsx)(S.a,{span:11,children:"Description"}),Object(e.jsx)(S.a,{span:3,children:"Rollout"})]}),Object(e.jsx)(de.a,{className:"my-3"}),i.map(function(D,f){return Object(e.jsxs)("div",{children:[Object(e.jsxs)(h.a,{children:[Object(e.jsxs)(S.a,{span:10,children:[Object(e.jsx)($e.a,{name:_.c[f],color:$e.b.Gray}),Object(e.jsx)(mt.a,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:D.key})]}),Object(e.jsx)(S.a,{span:12,children:D.name||"There is no description for this variant key"}),Object(e.jsxs)(S.a,{span:2,children:[D.rollout_percentage,"%"]})]}),f!==i.length-1&&Object(e.jsx)(de.a,{className:"my-3"})]},f)})]})]})]}):Object(e.jsxs)("div",{className:"mb-8",children:[Object(e.jsx)("h3",{className:"l4",children:"Served value"}),Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(W.a,{placement:"top",title:"Change value type? The variants below will be lost.",disabled:d,visible:w,onConfirm:function(){N(!1),he(!1)},onCancel:function(){return he(!1)},okText:"OK",cancelText:"Cancel",children:Object(e.jsx)(O.a.Group,{options:[{label:"Release toggle (boolean)",value:!1},{label:Object(e.jsx)(Gt.a,{title:xe(X.d.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:Object(e.jsxs)("div",{children:[!xe(X.d.MULTIVARIATE_FLAGS)&&Object(e.jsx)(Ue.a,{to:Ie,target:"_blank",children:Object(e.jsx)(le.a,{style:{marginRight:4,color:"var(--warning)"}})}),"Multiple variants with rollout percentages (A/B test)"]})}),value:!0,disabled:!xe(X.d.MULTIVARIATE_FLAGS)}],onChange:function(f){var x=f.target.value;x===!1&&u.length?he(!0):(N(x),bt(0))},value:s,optionType:"button"})})}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:[Object(_.i)(g)," will be served"," ",s?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):Object(e.jsx)("strong",{children:Object(e.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),!t&&s&&Object(e.jsxs)("div",{className:"feature-flag-variants",children:[Object(e.jsx)("h3",{className:"l4",children:"Variant keys"}),Object(e.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),Object(e.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(e.jsxs)(h.a,{gutter:8,className:"label-row",children:[Object(e.jsx)(S.a,{span:1}),Object(e.jsx)(S.a,{span:6,children:"Variant key"}),Object(e.jsx)(S.a,{span:12,children:"Description"}),Object(e.jsxs)(S.a,{span:4,children:["Rollout",Object(e.jsx)(H.a,{type:"tertiary",onClick:j,children:"(Redistribute)"})]})]}),i.map(function(D,f){return Object(e.jsx)(ie.Group,{name:["filters","multivariate","variants",f],children:Object(e.jsxs)(h.a,{gutter:8,align:"middle",children:[Object(e.jsx)(S.a,{span:1,children:Object(e.jsx)($e.a,{name:_.c[f],color:$e.b.Gray})}),Object(e.jsx)(S.a,{span:6,children:Object(e.jsx)(Q.a,{name:"key",children:Object(e.jsx)(et.a,{"data-attr":"feature-flag-variant-key","data-key-index":f.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(f+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(e.jsx)(S.a,{span:12,children:Object(e.jsx)(Q.a,{name:"name",children:Object(e.jsx)(et.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(e.jsx)(S.a,{span:3,children:Object(e.jsx)(Q.a,{name:"rollout_percentage",children:function(B){var ve=B.value,Oe=B.onChange;return Object(e.jsx)(P.a,{min:0,max:100,value:ve,onChange:function(T){if(T!=null){var ce=parseInt(T.toString());isNaN(ce)||Oe(ce)}},style:{width:"100%",borderColor:o?void 0:"var(--danger)"}})}})}),Object(e.jsx)(S.a,{span:2,children:Object(e.jsx)(h.a,{children:i.length>1&&Object(e.jsx)(H.a,{icon:Object(e.jsx)(M.IconDelete,{}),status:"primary-alt","data-attr":"delete-prop-filter-".concat(f),noPadding:!0,onClick:function(){return R(f)}})})})]})},f)}),i.length>0&&!o&&Object(e.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",c,")."]}),Object(e.jsx)(H.a,{type:"secondary",onClick:function(){var f=i.length;E(),bt(f)},icon:Object(e.jsx)(M.IconPlus,{}),center:!0,children:"Add variant"})]})]})]})}function xt(a){var t,r,s=a.readOnly,i=Object(p.useValues)(st.a),o=i.showGroupsOptions,d=i.aggregationLabel,c=Object(p.useValues)(ne),u=c.aggregationTargetName,g=c.featureFlag,v=c.groupTypes,y=c.taxonomicGroupTypes,j=c.nonEmptyVariants,E=Object(p.useActions)(ne),R=E.setAggregationGroupTypeIndex,N=E.updateConditionSet,m=E.duplicateConditionSet,L=E.removeConditionSet,w=E.addConditionSet,he=Object(p.useValues)(tn.a),ue=he.cohortsById,xe=Object(p.useValues)(lt.a),Le=xe.featureFlags,Ie=He({value:-2}),D=function(x){return!!x.find(function(B){return B.type==="cohort"||!Ee.l.includes(B.key||"")})};return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"feature-flag-form-row",children:[Object(e.jsx)("div",{"data-attr":"feature-flag-release-conditions",children:s?Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Release conditions"})}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h3",{className:"l4",children:"Release conditions"}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:["Specify the ",u," to which you want to release this flag. Note that condition sets are rolled out independently of each other."]})]})}),!s&&o&&Object(e.jsxs)("div",{className:"centered",children:["Match by",Object(e.jsxs)(b.a,{value:((t=g.filters)===null||t===void 0?void 0:t.aggregation_group_type_index)!=null?(r=g.filters)===null||r===void 0?void 0:r.aggregation_group_type_index:-1,onChange:function(x){var B=x!==-1?x:null;R(B)},style:{marginLeft:8},"data-attr":"feature-flag-aggregation-filter",dropdownMatchSelectWidth:!1,dropdownAlign:{points:["tr","br"]},children:[Object(e.jsx)(b.a.Option,{value:-1,children:"Users"},-1),v.map(function(f){return Object(e.jsx)(b.a.Option,{value:f.group_type_index,children:Object(_.i)(d(f.group_type_index).plural)},f.group_type_index)}),Ie]})]})]}),Object(e.jsx)(h.a,{gutter:16,children:g.filters.groups.map(function(f,x){var B,ve,Oe,ke;return Object(e.jsxs)(S.a,{span:24,md:24,children:[x>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsxs)(h.a,{align:"middle",justify:"space-between",children:[Object(e.jsxs)(h.a,{align:"middle",children:[Object(e.jsxs)("span",{className:"simple-tag tag-light-blue font-medium mr-2",children:["Set ",x+1]}),Object(e.jsx)("div",{children:(B=f.properties)!==null&&B!==void 0&&B.length?Object(e.jsx)(e.Fragment,{children:s?Object(e.jsxs)(e.Fragment,{children:["Match ",Object(e.jsx)("b",{children:u})," against ",Object(e.jsx)("b",{children:"all"})," criteria"]}):Object(e.jsxs)(e.Fragment,{children:["Matching ",Object(e.jsx)("b",{children:u})," against the criteria"]})}):Object(e.jsxs)(e.Fragment,{children:["Condition set will match ",Object(e.jsxs)("b",{children:["all ",u]})]})})]}),!s&&Object(e.jsxs)(h.a,{children:[Object(e.jsx)(H.a,{icon:Object(e.jsx)(M.IconCopy,{}),status:"muted",noPadding:!0,onClick:function(){return m(x)}}),g.filters.groups.length>1&&Object(e.jsx)(H.a,{icon:Object(e.jsx)(M.IconDelete,{}),status:"muted",noPadding:!0,onClick:function(){return L(x)}})]})]}),Object(e.jsx)(de.a,{className:"my-3"}),!s&&D(f.properties)&&Object(e.jsxs)(jt.a,{type:"info",className:"mt-3 mb-3",children:["These properties aren't immediately available on first page load for unidentified persons. This feature flag requires that at least one event is sent prior to becoming available to your product or website."," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank",children:[" ","Learn more about how to make feature flags available instantly."]})]}),s?Object(e.jsx)(e.Fragment,{children:f.properties.map(function(T,ce){return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"feature-flag-property-display",children:[ce===0?Object(e.jsx)(H.a,{icon:Object(e.jsx)(M.IconSubArrowRight,{className:"arrow-right"}),status:"muted",size:"small"}):Object(e.jsx)(H.a,{icon:Object(e.jsx)("span",{className:"text-sm",children:"&"}),status:"muted",size:"small"}),Object(e.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt",children:[T.type==="cohort"?"Cohort":T.key," "]}),Object(un.d)(T)?Object(e.jsxs)("span",{children:[Object(Qt.a)(T.operator)," "]}):null,A()(Array.isArray(T.value)?T.value:[T.value]).map(function(Je,pn){var tt;return Object(e.jsx)("span",{className:"simple-tag tag-light-blue text-primary-alt display-value",children:T.type==="cohort"?Je&&((tt=ue[Je])===null||tt===void 0?void 0:tt.name)||"ID ".concat(Je):Je},pn)})]})})})}):Object(e.jsx)("div",{children:Object(e.jsx)(z.a,{orFiltering:!0,pageKey:"feature-flag-".concat(g.id,"-").concat(x,"-").concat(g.filters.groups.length,"-").concat((ve=g.filters.aggregation_group_type_index)!==null&&ve!==void 0?ve:""),propertyFilters:f==null?void 0:f.properties,logicalRowDivider:!0,addButton:Object(e.jsx)(H.a,{icon:Object(e.jsx)(M.IconPlusMini,{}),noPadding:!0,children:"Add condition"}),onChange:function(ce){return N(x,void 0,ce)},taxonomicGroupTypes:y,hasRowOperator:!1})}),(!s||s&&((Oe=f.properties)===null||Oe===void 0?void 0:Oe.length)>0)&&Object(e.jsx)(de.a,{className:"my-3"}),s?Object(e.jsxs)("div",{children:["Rolled out to"," ",Object(e.jsxs)("b",{children:[f.rollout_percentage!=null?f.rollout_percentage:100,"%"]})," of"," ",Object(e.jsx)("b",{children:u})," in this set"]}):Object(e.jsx)("div",{className:"feature-flag-form-row",children:Object(e.jsxs)("div",{className:"centered",children:["Roll out to"," ",Object(e.jsx)(P.a,{style:{width:100,marginLeft:8,marginRight:8},onChange:function(ce){N(x,ce)},value:f.rollout_percentage!=null?f.rollout_percentage:100,min:0,max:100,addonAfter:"%"})," ","of ",Object(e.jsx)("b",{children:u})," in this set"]})}),Le[Ee.i.VARIANT_OVERRIDES]&&j.length>0&&Object(e.jsxs)(e.Fragment,{children:[(!s||s&&((ke=f.properties)===null||ke===void 0?void 0:ke.length)>0)&&Object(e.jsx)(de.a,{className:"my-3"}),s?Object(e.jsxs)("div",{children:["All ",Object(e.jsx)("b",{children:u})," in this set"," ",f.variant?Object(e.jsxs)(e.Fragment,{children:[" ","will be in variant ",Object(e.jsx)("b",{children:f.variant})]}):Object(e.jsx)(e.Fragment,{children:"have no variant override"})]}):Object(e.jsx)("div",{className:"feature-flag-form-row",children:Object(e.jsxs)("div",{className:"centered",children:[Object(e.jsx)("b",{children:"Optional override:"})," Set variant for all"," ",Object(e.jsx)("b",{children:u})," in this set to"," ",Object(e.jsx)(Z.LemonSelect,{placeholder:"Select variant",allowClear:!0,value:f.variant,onChange:function(ce){return N(x,void 0,void 0,ce||void 0)},options:j.map(function(T){return{label:T.key,value:T.key}}),"data-attr":"feature-flags-variant-override-select"})]})})]})]})]},"".concat(x,"-").concat(g.filters.groups.length))})}),!s&&Object(e.jsx)(H.a,{type:"secondary",className:"mt-0",onClick:w,icon:Object(e.jsx)(M.IconPlus,{}),children:"Add condition set"})]})}try{Ae.displayName="FeatureFlag",Ae.__docgenInfo={description:"",displayName:"FeatureFlag",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"]={docgenInfo:Ae.__docgenInfo,name:"FeatureFlag",path:"frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"})}catch(a){}},"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function($,I,n){"use strict";n.d(I,"a",function(){return se});var K=n("./frontend/@posthog/lemon-ui/src/index.ts"),A=n("./node_modules/react/index.js"),ae=n.n(A),F=n("./node_modules/react/jsx-runtime.js"),ee=n.n(F);function se(G){var re=G.to,ge=G.onClick,fe=G.title,Y=G.subtitle,oe=G.prefix,k=G.suffix;return Object(F.jsx)(K.LemonButton,{fullWidth:!0,to:re,onClick:ge,children:Object(F.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[oe?Object(F.jsx)("span",{className:"shrink-0",children:oe}):null,Object(F.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(F.jsx)("div",{className:"text-primary font-semibold truncate",children:fe}),Object(F.jsx)("div",{className:"truncate text-default font-normal",children:Y})]}),k?Object(F.jsx)("span",{className:"shrink-0",children:k}):null]})})}try{se.displayName="ProjectHomePageCompactListItem",se.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:se.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(G){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function($,I,n){"use strict";var K=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=n.n(K),ae=n("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),F=n.n(ae),ee={};ee.insert="head",ee.singleton=!1;var se=A()(F.a,ee),G=F.a.locals||{}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function($,I,n){"use strict";n.d(I,"a",function(){return C}),n.d(I,"b",function(){return pe});var K=n("./node_modules/core-js/modules/es.function.name.js"),A=n.n(K),ae=n("./node_modules/core-js/modules/es.array.slice.js"),F=n.n(ae),ee=n("./node_modules/react/index.js"),se=n.n(ee),G=n("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),re=n("./node_modules/kea/lib/index.esm.js"),ge=n("./frontend/src/lib/dayjs.ts"),fe=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),Y=n("./frontend/src/scenes/urls.ts"),oe=n("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),k=n("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),ie=n("./frontend/src/lib/utils/eventUsageLogic.ts"),te=n("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),h=n("./node_modules/react/jsx-runtime.js"),S=n.n(h);function C(W){var O=W.insight,P=Object(re.useActions)(ie.e),b=P.reportInsightOpenedFromRecentInsightList;return Object(h.jsx)(te.a,{title:O.name||O.derived_name||"Insight",subtitle:"Last modified ".concat(Object(ge.a)(O.last_modified_at).fromNow()),prefix:Object(h.jsx)(oe.InsightIcon,{insight:O}),to:Y.a.insightView(O.short_id),onClick:function(){b()}})}function pe(){var W=Object(re.useValues)(k.a),O=W.recentInsights,P=W.recentInsightsLoading,b=Object(re.useActions)(k.a),p=b.loadRecentInsights;return Object(ee.useEffect)(function(){p()},[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(fe.a,{title:"Your recently viewed insights",viewAllURL:Y.a.savedInsights(),loading:P,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:Y.a.savedInsights()},items:O.slice(0,5),renderRow:function(z,le){return Object(h.jsx)(C,{insight:z},le)}})})}try{C.displayName="InsightRow",C.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:C.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(W){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function($,I,n){"use strict";n.d(I,"b",function(){return W}),n.d(I,"a",function(){return O});var K=n("./node_modules/core-js/modules/es.array.slice.js"),A=n.n(K),ae=n("./frontend/src/lib/dayjs.ts"),F=n("./node_modules/kea/lib/index.esm.js"),ee=n("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),se=n("./frontend/src/lib/components/CompactList/CompactList.tsx"),G=n("./frontend/src/lib/components/ProfilePicture/index.ts"),re=n("./frontend/src/scenes/persons/PersonHeader.tsx"),ge=n("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),fe=n("./frontend/src/scenes/urls.ts"),Y=n("./frontend/src/lib/utils/eventUsageLogic.ts"),oe=n("./frontend/src/lib/utils.tsx"),k=n("./frontend/src/lib/components/icons.tsx"),ie=n("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),te=n("./frontend/src/scenes/teamLogic.tsx"),h=n("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),S=n("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),C=n("./node_modules/react/jsx-runtime.js"),pe=n.n(C);function W(P){var b=P.recording,p=Object(F.useActions)(h.a),_=p.openSessionPlayer,z=Object(F.useActions)(Y.e),le=z.reportRecordingOpenedFromRecentRecordingList;return Object(C.jsx)(S.a,{title:Object(re.b)(b.person),subtitle:"Recorded ".concat(Object(ae.a)(b.start_time).fromNow()),prefix:Object(C.jsx)(G.b,{name:Object(re.b)(b.person)}),suffix:Object(C.jsxs)("div",{className:"flex items-center justify-end text-default",children:[Object(C.jsx)("span",{children:Object(oe.O)(b.recording_duration)}),Object(C.jsx)(k.IconPlayCircle,{className:"text-2xl ml-2"})]}),onClick:function(){_({id:b.id,matching_events:b.matching_events}),le()}})}function O(){var P=Object(F.useValues)(te.a),b=P.currentTeam,p=Object(ge.d)({key:"projectHomepage"}),_=Object(F.useValues)(p),z=_.sessionRecordings,le=_.sessionRecordingsResponseLoading;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ie.a,{}),Object(C.jsx)(se.a,{title:"Recent recordings",viewAllURL:fe.a.sessionRecordings(),loading:le,emptyMessage:b!=null&&b.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:fe.a.projectSettings()+"#recordings"},items:z.slice(0,5),renderRow:function(nt,at){return Object(C.jsx)(W,{recording:nt},at)}})]})}try{W.displayName="RecordingRow",W.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:W.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(P){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function($,I,n){"use strict";n.d(I,"a",function(){return W});var K=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),A=n.n(K),ae=n("./node_modules/@babel/runtime/regenerator/index.js"),F=n.n(ae),ee=n("./node_modules/core-js/modules/es.array.iterator.js"),se=n.n(ee),G=n("./node_modules/core-js/modules/es.object.to-string.js"),re=n.n(G),ge=n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),fe=n.n(ge),Y=n("./node_modules/kea/lib/index.esm.js"),oe=n("./frontend/src/scenes/teamLogic.tsx"),k=n("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),ie=n("./frontend/src/types.ts"),te=n("./frontend/src/lib/api.ts"),h=n("./node_modules/kea-subscriptions/lib/index.js"),S=n.n(h),C=n("./node_modules/kea-loaders/lib/index.js"),pe=n.n(C),W=Object(Y.kea)([Object(Y.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(Y.connect)({values:[oe.a,["currentTeamId","currentTeam"]]}),Object(Y.selectors)({primaryDashboardId:[function(){return[oe.a.selectors.currentTeam]},function(O){return O==null?void 0:O.primary_dashboard}],dashboardLogic:[function(O){return[O.primaryDashboardId]},function(O){return Object(k.c)({id:O!=null?O:void 0,placement:ie.m.ProjectHomepage})}]}),Object(C.loaders)(function(O){var P=O.values;return{recentInsights:[[],{loadRecentInsights:function(){var b=A()(F.a.mark(function _(){var z;return F.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,te.b.get("api/projects/".concat(P.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return z=V.sent,V.abrupt("return",z.results);case 4:case"end":return V.stop()}},_)}));function p(){return b.apply(this,arguments)}return p}()}],persons:[[],{loadPersons:function(){var b=A()(F.a.mark(function _(){var z;return F.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,te.b.persons.list();case 2:return z=V.sent,V.abrupt("return",z.results);case 4:case"end":return V.stop()}},_)}));function p(){return b.apply(this,arguments)}return p}()}]}}),Object(h.subscriptions)(function(O){var P=O.cache;return{dashboardLogic:function(p){var _;(_=P.unmount)===null||_===void 0||_.call(P),P.unmount=p?p.mount():null}}}),Object(Y.afterMount)(function(O){var P,b=O.cache,p=O.actions;(P=b.unmount)===null||P===void 0||P.call(b),p.loadRecentInsights(),p.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss":function($,I,n){var K=n("./node_modules/css-loader/dist/runtime/api.js");I=K(!1),I.push([$.i,".variant-form-list{font-size:13px;border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-top:16px}.variant-form-list .ant-form-item{min-height:32px}.variant-form-list .label-row{font-weight:700}.variant-form-list .label-row .ant-col{min-height:32px;display:flex;justify-content:space-between;align-items:center}.feature-flag-property-display{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.feature-flag-property-display .arrow-right{margin-right:-8px;margin-top:.25rem}.feature-flag-property-display .display-value{word-break:break-all}.condition-set-separator{color:var(--primary-alt);font-size:12px;font-weight:var(--font-semibold);margin-left:.5rem;margin-bottom:.5rem}.feature-flag-form-row{display:flex;justify-content:space-between;align-items:center;width:100%}.feature-flag-form-row .centered{display:flex;align-items:center;white-space:pre-wrap}",""]),$.exports=I},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss":function($,I,n){var K=n("./node_modules/css-loader/dist/runtime/api.js");I=K(!1),I.push([$.i,".FeatureFlagInstructionsHeader{flex-wrap:nowrap}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title{display:flex;justify-items:center}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title .FeatureFlagInstructionsHeader__header-title__icon{color:var(--text-muted-alt);margin-right:12px;font-size:1.6em}.FeatureFlagInstructionsHeader__option{display:flex;justify-items:center}.FeatureFlagInstructionsHeader__option .FeatureFlagInstructionsHeader__option__icon{margin-top:2px;margin-right:8px}",""]),$.exports=I},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function($,I,n){var K=n("./node_modules/css-loader/dist/runtime/api.js");I=K(!1),I.push([$.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),$.exports=I}}]);
