(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[45419],{"./frontend/src/scenes/error-tracking/ErrorTrackingIssueScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingIssueScene:()=>ErrorTrackingIssueScene,scene:()=>scene});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),ErrorTracking=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss"),ErrorTracking_default=__webpack_require__.n(ErrorTracking),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(ErrorTracking_default(),options),ErrorTracking_default().locals;var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),AlphaAccessScenePrompt=__webpack_require__("./frontend/src/scenes/error-tracking/AlphaAccessScenePrompt.tsx"),AssigneeSelect=__webpack_require__("./frontend/src/scenes/error-tracking/AssigneeSelect.tsx"),ErrorTrackingFilters=__webpack_require__("./frontend/src/scenes/error-tracking/ErrorTrackingFilters.tsx"),errorTrackingIssueSceneLogic=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingIssueSceneLogic.ts"),apps_common_src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),EmptyMessage=__webpack_require__("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),ErrorDisplay=__webpack_require__("./frontend/src/lib/components/Errors/ErrorDisplay.tsx"),Playlist=__webpack_require__("./frontend/src/lib/components/Playlist/Playlist.tsx"),ViewRecordingButton=__webpack_require__("./frontend/src/lib/components/ViewRecordingButton.tsx"),SessionRecordingPreview=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingPreview.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let OverviewTab=()=>{let{events,issueLoading,eventsLoading,activeEventUUID}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.H),{loadEvents,setActiveEventUUID}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.H);return(0,jsx_runtime.jsx)("div",{className:"ErrorTracking__issue",children:(0,jsx_runtime.jsx)("div",{className:"h-full space-y-2",children:(0,jsx_runtime.jsx)(Playlist.g,{loading:issueLoading||eventsLoading,title:"Exceptions",sections:[{key:"exceptions",title:"Exceptions",items:events.map(e=>({...e,id:e.uuid})),render:ListItemException}],onSelect:_ref=>{let{uuid}=_ref;setActiveEventUUID(uuid)},activeItemId:activeEventUUID,listEmptyState:(0,jsx_runtime.jsx)("div",{className:"flex justify-center p-4",children:"No exceptions found"}),content:_ref2=>{let{activeItem:event}=_ref2;return event?(0,jsx_runtime.jsxs)("div",{className:"h-full overflow-auto",children:[(0,jsx_runtime.jsx)("div",{className:"bg-bg-light p-1 flex justify-end border-b min-h-[42px]",children:(0,jsx_runtime.jsx)(ViewRecordingButton.Z,{size:"small",sessionId:event.properties.$session_id,timestamp:event.timestamp,disabledReason:(0,ViewRecordingButton.k)(event.properties)?void 0:"Replay was not active when capturing this event"})}),(0,jsx_runtime.jsx)("div",{className:"pl-2",children:(0,jsx_runtime.jsx)(ErrorDisplay.X,{eventProperties:event.properties})})]}):(0,jsx_runtime.jsx)(EmptyMessage.M,{title:"No exception selected",description:"Please select an exception from the list on the left"})},onScrollListEdge:edge=>{"bottom"!==edge||eventsLoading||loadEvents()}})})})},ListItemException=_ref3=>{let{item:{timestamp,properties,person},isActive}=_ref3,recordingProperties=["$browser","$device_type","$os"].flatMap(property=>{let value=properties[property],label=value;return"$device_type"===property&&(value=properties.$device_type||properties.$initial_device_type),{property,value,label}}).filter(property=>!!property.value);return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("cursor-pointer p-2 space-y-1 border-l-4",isActive?"border-primary-3000":"border-transparent"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center space-x-3",children:[(0,jsx_runtime.jsx)("div",{className:"line-clamp-1",children:(0,jsx_runtime.jsx)(apps_common_src.IZ,{person:person,withIcon:!0,noPopover:!0,noLink:!0})}),(0,jsx_runtime.jsx)(SessionRecordingPreview.D7,{recordingProperties:recordingProperties,iconClassNames:"text-muted"})]}),properties.$current_url&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted truncate",children:properties.$current_url}),(0,jsx_runtime.jsx)(apps_common_src.w4,{className:"overflow-hidden text-ellipsis text-xs text-muted shrink-0",time:timestamp,placement:"right",showPopover:!1})]})};var SymbolSetUploadModal=__webpack_require__("./frontend/src/scenes/error-tracking/SymbolSetUploadModal.tsx");let scene={component:ErrorTrackingIssueScene,logic:errorTrackingIssueSceneLogic.H,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id}}},STATUS_LABEL={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release"};function ErrorTrackingIssueScene(){let{issue,issueLoading,hasGroupActions}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.H),{updateIssue,loadIssue}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.H);return(0,react.useEffect)(()=>{issueLoading||loadIssue()},[]),(0,jsx_runtime.jsx)(AlphaAccessScenePrompt._,{children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:!!issue&&!!hasGroupActions&&("active"===issue.status?(0,jsx_runtime.jsxs)("div",{className:"flex divide-x gap-x-2",children:[(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:issue.assignee,onChange:assignee=>updateIssue({assignee}),type:"secondary",showName:!0}),(0,jsx_runtime.jsxs)("div",{className:"flex pl-2 gap-x-2",children:[(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",onClick:()=>updateIssue({status:"archived"}),children:"Archive"}),(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:()=>updateIssue({status:"resolved"}),children:"Resolve"})]})]}):(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",className:"upcasefirst-letter:uppercase",onClick:()=>updateIssue({status:"active"}),tooltip:"Mark as active",children:STATUS_LABEL[issue.status]}))}),(0,jsx_runtime.jsx)(ErrorTrackingFilters.ZP.FilterGroup,{}),(0,jsx_runtime.jsx)(src.p2,{className:"mt-2"}),(0,jsx_runtime.jsx)(ErrorTrackingFilters.ZP.Options,{isGroup:!0}),(0,jsx_runtime.jsx)(OverviewTab,{}),(0,jsx_runtime.jsx)(SymbolSetUploadModal.M,{})]})})}},"./frontend/src/scenes/error-tracking/SymbolSetUploadModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>SymbolSetUploadModal});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_forms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.5/node_modules/kea-forms/lib/index.js"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonField/index.ts"),_errorTrackingSymbolSetLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/error-tracking/errorTrackingSymbolSetLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let SymbolSetUploadModal=()=>{let{setUploadSymbolSetId}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_errorTrackingSymbolSetLogic__WEBPACK_IMPORTED_MODULE_5__._),{uploadSymbolSetId,isUploadSymbolSetSubmitting,uploadSymbolSet}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_errorTrackingSymbolSetLogic__WEBPACK_IMPORTED_MODULE_5__._),onClose=()=>setUploadSymbolSetId(null);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.fQ,{title:"",onClose:onClose,isOpen:!!uploadSymbolSetId,simple:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(kea_forms__WEBPACK_IMPORTED_MODULE_2__.Form,{logic:_errorTrackingSymbolSetLogic__WEBPACK_IMPORTED_MODULE_5__._,formKey:"uploadSymbolSet",className:"gap-1",enableFormOnSubmit:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.fQ.Header,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("h3",{children:"Upload javscript symbol set"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.fQ.Content,{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_4__.D,{name:"minified",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.mH,{accept:"text/javascript",multiple:!1,callToAction:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2 border border-dashed rounded p-4 w-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("span",{className:"flex items-center gap-2 font-semibold",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_3__.bn,{className:"text-2xl"})," Add minified source"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:"Drag and drop your minified source file here or click to open the file browser."})]})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(lib_lemon_ui_LemonField__WEBPACK_IMPORTED_MODULE_4__.D,{name:"sourcemap",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.mH,{accept:"*",multiple:!1,callToAction:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2 border border-dashed rounded p-4 w-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("span",{className:"flex items-center gap-2 font-semibold",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_3__.bn,{className:"text-2xl"})," Add source map"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:"Drag and drop your source map here or click to open the file browser."})]})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.fQ.Footer,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{type:"secondary",onClick:onClose,children:"Cancel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Jp,{disabledReason:uploadSymbolSet.minified.length<1?"Upload a minified source":uploadSymbolSet.sourceMap.length<1?"Upload a source map":void 0,type:"primary",status:"alt",htmlType:"submit",loading:isUploadSymbolSetSubmitting,children:"Upload"})]})]})})}},"./frontend/src/scenes/error-tracking/errorTrackingSymbolSetLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>errorTrackingSymbolSetLogic});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_forms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.5/node_modules/kea-forms/lib/index.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/api.ts"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/urls.ts");let errorTrackingSymbolSetLogic=(0,kea__WEBPACK_IMPORTED_MODULE_1__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_1__.path)(["scenes","error-tracking","errorTrackingSymbolSetLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_1__.actions)({setUploadSymbolSetId:id=>({id})}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.reducers)({uploadSymbolSetId:[null,{setUploadSymbolSetId:(_,_ref)=>{let{id}=_ref;return id}}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_3__.loaders)(_ref2=>{let{values}=_ref2;return{symbolSets:[[],{loadSymbolSets:async()=>{let response=await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.symbolSets();return response.results},deleteSymbolSet:async id=>{await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.deleteSymbolSet(id);let newValues=[...values.symbolSets];return newValues.filter(v=>v.id!==id)}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.selectors)({breadcrumbs:[()=>[],()=>[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.ErrorTracking,name:"Error tracking",path:scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.errorTracking()},{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_5__.x.ErrorTrackingConfiguration,name:"Configuration"}]],validSymbolSets:[s=>[s.symbolSets],symbolSets=>symbolSets.filter(s=>!!s.storage_ptr)],missingSymbolSets:[s=>[s.symbolSets],symbolSets=>symbolSets.filter(s=>!s.storage_ptr)]}),(0,kea_forms__WEBPACK_IMPORTED_MODULE_2__.forms)(_ref3=>{let{values,actions}=_ref3;return{uploadSymbolSet:{defaults:{minified:[],sourceMap:[]},submit:async _ref4=>{let{minified,sourceMap}=_ref4;if(minified.length<1||sourceMap.length<1){_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.UJ.error("Please select both a minified file and a source map file");return}let minifiedSrc=minified[0],sourceMapSrc=sourceMap[0],id=values.uploadSymbolSetId;if(null==id)return;let formData=new FormData;formData.append("minified",minifiedSrc),formData.append("source_map",sourceMapSrc),await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.updateSymbolSet(id,formData),actions.setUploadSymbolSetId(null),actions.loadSymbolSets(),actions.resetUploadSymbolSet(),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.UJ.success("Source map uploaded")}}}})])},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/error-tracking/ErrorTracking.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ErrorTracking__issue{height:calc(100vh - 12rem);min-height:25rem}",""]),module.exports=exports}}]);