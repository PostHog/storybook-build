(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx":function(Oe,I,e){"use strict";e.r(I),e.d(I,"scene",function(){return cs}),e.d(I,"SessionRecordingsPlaylistScene",function(){return qe}),e.d(I,"SessionRecordingsPlaylist",function(){return Se});var ce=e("./node_modules/core-js/modules/es.function.name.js"),Le=e("./node_modules/core-js/modules/es.regexp.exec.js"),Te=e("./node_modules/core-js/modules/es.string.replace.js"),de=e("./node_modules/core-js/modules/es.symbol.js"),De=e("./node_modules/core-js/modules/es.symbol.description.js"),he=e("./node_modules/core-js/modules/es.array.concat.js"),Be=e("./node_modules/core-js/modules/es.array.map.js"),ie=e("./node_modules/react/index.js"),x=e("./node_modules/kea/lib/index.esm.js"),Pe=e("./frontend/src/lib/utils.tsx"),q=e("./frontend/src/types.ts"),ee=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),Q=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),N=e.n(Q),se=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss"),G=e.n(se),z={};z.insert="head",z.singleton=!1;var ae=N()(G.a,z),ue=G.a.locals||{},Fe=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),be=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),T=e("./frontend/@posthog/lemon-ui/src/index.ts"),Z=e("./frontend/src/lib/components/icons.tsx"),Ue=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Re=e.n(Ue),Ie=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),K=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),le=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),me=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),fe=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),xe=e("./node_modules/fast-deep-equal/index.js"),te=e.n(xe),s=e("./node_modules/react/jsx-runtime.js"),h=function(t){var a,i;return(a=t.actions)!==null&&a!==void 0&&a.length||(i=t.events)!==null&&i!==void 0&&i.length?{actions:t.actions,events:t.events}:{actions:[],events:[],new_entity:[{id:"empty",type:q.o.NEW_ENTITY,order:0,name:"empty"}]}};function p(r){var t=r.filters,a=r.setFilters,i=r.showPropertyFilters,m=Object(ie.useState)(h(t)),j=Re()(m,2),l=j[0],v=j[1];return Object(ie.useEffect)(function(){(!te()(t.actions,l.actions)||!te()(t.events,l.events))&&a({actions:l.actions,events:l.events})},[l]),Object(ie.useEffect)(function(){(!te()(t.actions,l.actions)||!te()(t.events,l.events))&&v(h(t))},[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"flex-1 border rounded p-4",children:[Object(s.jsxs)("div",{className:"space-y-2",children:[Object(s.jsx)(fe.a,{info:"Show recordings where all of the events or actions listed below happen.",children:"Filter by events and actions"}),Object(s.jsx)(Ie.a,{bordered:!0,filters:l,setFilters:function(g){v(g)},typeKey:"session-recordings",mathAvailability:me.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[K.a.Actions,K.a.Events],propertiesTaxonomicGroupTypes:[K.a.EventProperties,K.a.EventFeatureFlags,K.a.Elements],propertyFiltersPopover:!0})]}),i&&Object(s.jsxs)("div",{className:"mt-4 space-y-2",children:[Object(s.jsx)(fe.a,{info:"Show recordings by persons who match the set criteria",children:"Filter by persons and cohorts"}),Object(s.jsx)(le.a,{pageKey:"session-recordings",taxonomicGroupTypes:[K.a.PersonProperties,K.a.Cohorts],propertyFilters:t.properties,onChange:function(g){a({properties:g})}})]})]})})}try{p.displayName="SessionRecordingsFilters",p.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"RecordingFilters"}},setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(filters: RecordingFilters) => void"}},showPropertyFilters:{defaultValue:null,description:"",name:"showPropertyFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"]={docgenInfo:p.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"})}catch(r){}var L=e("./node_modules/clsx/dist/clsx.m.js"),f=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),P=e("./frontend/src/lib/components/LemonTable/LemonTableLoader.tsx"),w=e("./node_modules/core-js/modules/es.string.split.js"),J=e("./node_modules/core-js/modules/es.object.keys.js"),E=e("./frontend/src/lib/components/PropertyIcon.tsx"),Je=e("./frontend/src/lib/components/Tooltip.tsx"),Ke=e("./frontend/src/scenes/persons/PersonHeader.tsx"),We=e("./frontend/src/lib/components/TimezoneAware/index.tsx");function pe(r){var t,a=r.recording,i=r.isActive,m=r.onClick,j=r.onPropertyClick,l=r.recordingProperties,v=r.recordingPropertiesLoading,b=Object(Pe.n)(a.recording_duration),g=b.split(":"),R=Object(L.a)("SessionRecordingsPlaylist__list-item__property-icon text-base text-muted-alt",!i&&"opacity-75"),V=["$browser","$device_type","$os","$geoip_country_code"],O=l&&Object.keys(l).length>0?l:((t=a.person)===null||t===void 0?void 0:t.properties)||{},re=Object(s.jsx)("div",{className:"flex flex-row flex-nowrap shrink-0 gap-1 h-6 ph-no-capture",children:v?Object(s.jsx)(f.a,{className:"w-18 my-1"}):V.map(function(k){var je=k==="$device_type"?(O==null?void 0:O.$device_type)||(O==null?void 0:O.$initial_device_type):O==null?void 0:O[k];return Object(s.jsx)(E.b,{onClick:j,className:R,property:k,value:je,tooltipTitle:function(A,Y){return Object(s.jsxs)("div",{className:"text-center",children:["Click to filter for",Object(s.jsx)("br",{}),Object(s.jsx)("span",{className:"font-medium",children:Y!=null?Y:"N/A"})]})}},k)})});return Object(s.jsxs)("li",{className:Object(L.a)("SessionRecordingsPlaylist__list-item","flex flex-row py-2 pr-4 pl-0 cursor-pointer relative overflow-hidden",i&&"bg-primary-highlight font-semibold"),onClick:function(){return m()},children:[Object(s.jsx)("div",{className:"w-2 h-2 mx-2",children:a.viewed?null:Object(s.jsx)(Je.a,{title:"Indicates the recording has not been watched yet",children:Object(s.jsx)("div",{className:"w-2 h-2 mt-2 rounded-full bg-primary-light","aria-label":"unwatched-recording-label"})})}),Object(s.jsxs)("div",{className:"grow",children:[Object(s.jsxs)("div",{className:"flex items-center justify-between",children:[Object(s.jsx)("div",{className:"truncate font-medium text-primary ph-no-capture",children:Object(Ke.b)(a.person,25)}),Object(s.jsx)("div",{className:"flex-1"}),re]}),Object(s.jsxs)("div",{className:"flex items-center justify-between",children:[Object(s.jsx)(We.b,{className:"overflow-hidden text-ellipsis",time:a.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"}),Object(s.jsxs)("div",{className:"flex items-center flex-1 justify-end font-semibold",children:[Object(s.jsx)(Z.IconSchedule,{className:R}),Object(s.jsxs)("span",{children:[Object(s.jsxs)("span",{className:Object(L.a)(g[0]==="00"&&"opacity-50 font-normal"),children:[g[0],":"]}),Object(s.jsxs)("span",{className:Object(L.a)({"opacity-50 font-normal":g[0]==="00"&&g[1]==="00"}),children:[g[1],":"]}),g[2]]})]})]})]})]},a.id)}try{pe.displayName="SessionRecordingPlaylistItem",pe.__docgenInfo={description:"",displayName:"SessionRecordingPlaylistItem",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}},recordingProperties:{defaultValue:null,description:"",name:"recordingProperties",required:!1,type:{name:"Record<string, any>"}},recordingPropertiesLoading:{defaultValue:null,description:"",name:"recordingPropertiesLoading",required:!0,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},onPropertyClick:{defaultValue:null,description:"",name:"onPropertyClick",required:!0,type:{name:"(property: string, value?: string | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylistItem.tsx#SessionRecordingPlaylistItem"]={docgenInfo:pe.__docgenInfo,name:"SessionRecordingPlaylistItem",path:"frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylistItem.tsx#SessionRecordingPlaylistItem"})}catch(r){}var Me=e("./frontend/src/lib/components/EditableField/EditableField.tsx"),$e=e("./frontend/src/lib/components/PageHeader.tsx"),_e=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),Ve=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Ee=e("./node_modules/antd/es/row/index.js"),Ae=e("./node_modules/antd/es/space/index.js"),X=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),ve=e("./frontend/src/lib/components/Popup/Popup.tsx"),Qe=e("./node_modules/core-js/modules/es.array.slice.js"),Ze=e("./node_modules/core-js/modules/es.array.iterator.js"),ke=e("./node_modules/core-js/modules/es.object.to-string.js"),n=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),o=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),c;(function(r){r.SECONDS="seconds",r.MINUTES="minutes",r.HOURS="hours"})(c||(c={}));var d=Object(x.kea)({path:function(t){return["scenes","session-recordings","DurationFilterLogic",t]},key:function(t){return t.pageKey||"global"},props:{},actions:{setValue:function(t){return{value:t}},setIsOpen:function(t){return{isOpen:t}},setOperator:function(t){return{operator:t}}},reducers:function(t){var a,i,m=t.props;return{operator:[m==null||(a=m.initialFilter)===null||a===void 0?void 0:a.operator,{setOperator:function(l,v){var b=v.operator;return b}}],value:[m==null||(i=m.initialFilter)===null||i===void 0?void 0:i.value,{setValue:function(l,v){var b=v.value;return b}}],isOpen:[!1,{setIsOpen:function(l,v){var b=v.isOpen;return b}}]}},selectors:{durationString:[function(r){return[r.operator,r.value]},function(r,t){var a="";r===q.N.GreaterThan?a+="> ":a+="< ";var i=Object(o.b)(t||0);return a+=i.timeValue||0,i.timeValue===1?a+=" "+i.unit.slice(0,-1):a+=" "+i.unit,a}]},listeners:function(t){var a=t.props,i=t.values,m=function(l){var v=l.value,b=l.operator;a.onChange({operator:b||i.operator,value:v||i.value||0,type:"recording",key:"duration"})};return{setValue:function(l){var v=l.value;return m({value:v})},setOperator:function(l){var v=l.operator;return m({operator:v})}}}});function u(r){var t=r.initialFilter,a=r.onChange,i=r.pageKey,m=d({initialFilter:t,onChange:a,pageKey:i}),j=Object(x.useActions)(m),l=j.setValue,v=j.setIsOpen,b=j.setOperator,g=Object(x.useValues)(m),R=g.durationString,V=g.value,O=g.operator,re=g.isOpen;return Object(s.jsx)(ve.a,{visible:re,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return v(!1)},overlay:Object(s.jsx)(Ee.a,{children:Object(s.jsxs)(Ae.b,{children:[Object(s.jsx)(X.a,{operator:O,operators:[q.N.GreaterThan,q.N.LessThan],onChange:function(je){b(je)}}),Object(s.jsx)(o.a,{onChange:l,initialValue:V||0})]})}),children:Object(s.jsx)(T.LemonButton,{type:"secondary",status:"stealth",size:"small",onClick:function(){v(!0)},children:R})})}try{u.displayName="DurationFilter",u.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"]={docgenInfo:u.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"})}catch(r){}var y=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),D=e.n(y),B=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),W=e.n(B),F=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),S=e.n(F),U=e("./node_modules/@babel/runtime/regenerator/index.js"),C=e.n(U),ne=e("./node_modules/kea-loaders/lib/index.js"),ge=e("./frontend/src/lib/api.ts"),_=e("./frontend/src/scenes/urls.ts"),$=e("./node_modules/kea-router/lib/index.js"),Ye=e("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts"),rs=["id","short_id"],Ge=Object(x.kea)([Object(x.path)(function(r){return["scenes","session-recordings","playlist","sessionRecordingsPlaylistLogic",r]}),Object(x.props)({}),Object(x.key)(function(r){return r.shortId}),Object(x.actions)({loadPlaylist:!0,setFilters:function(t){return{filters:t}},saveChanges:!0,duplicatePlaylist:!0}),Object(ne.loaders)(function(r){var t=r.props;return{playlist:[null,{loadPlaylist:function(){var a=S()(C.a.mark(function m(){return C.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",ge.b.recordings.getPlaylist(t.shortId));case 1:case"end":return l.stop()}},m)}));function i(){return a.apply(this,arguments)}return i}(),updatePlaylist:function(){var a=S()(C.a.mark(function m(j,l){var v;return C.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,l(100);case 2:return v=ge.b.recordings.updatePlaylist(t.shortId,j),l(),T.lemonToast.success("Playlist updated successfully"),g.abrupt("return",v);case 6:case"end":return g.stop()}},m)}));function i(m,j){return a.apply(this,arguments)}return i}()}]}}),Object(x.reducers)(function(r){return W()(r),{filters:[null,{loadPlaylistSuccess:function(a,i){var m=i.playlist;return m.filters||null},setFilters:function(a,i){var m=i.filters;return m}}]}}),Object(x.listeners)(function(r){var t=r.actions,a=r.values;return{saveChanges:function(){var i=S()(C.a.mark(function j(){return C.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:t.updatePlaylist({filters:a.filters||void 0});case 1:case"end":return v.stop()}},j)}));function m(){return i.apply(this,arguments)}return m}(),duplicatePlaylist:function(){var i=S()(C.a.mark(function j(){var l,v,b,g,R;return C.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(a.playlist){O.next=2;break}return O.abrupt("return");case 2:return l=a.playlist,v=l.id,b=l.short_id,g=D()(l,rs),g.name=g.name?g.name+" (copy)":"",O.next=6,Object(Ye.a)(g);case 6:if(R=O.sent,R){O.next=9;break}return O.abrupt("return");case 9:T.lemonToast.success("Playlist duplicated successfully"),$.router.actions.push(_.a.sessionRecordingPlaylist(R.short_id));case 11:case"end":return O.stop()}},j)}));function m(){return i.apply(this,arguments)}return m}()}}),Object($.beforeUnload)(function(r){var t=r.values,a=r.actions;return{enabled:function(){return t.hasChanges},message:"Leave playlist? Changes you made will be discarded.",onConfirm:function(){var m;a.setFilters(((m=t.playlist)===null||m===void 0?void 0:m.filters)||null)}}}),Object(x.selectors)(function(r){return W()(r),{breadcrumbs:[function(t){return[t.playlist]},function(t){return[{name:"Saved Playlists",path:_.a.sessionRecordings(q.X.Playlists)},{name:(t==null?void 0:t.name)||"Untitled Playlist",path:_.a.sessionRecordingPlaylist((t==null?void 0:t.short_id)||"")}]}],hasChanges:[function(t){return[t.playlist,t.filters]},function(t,a){return!te()(t==null?void 0:t.filters,a)}]}}),Object(x.afterMount)(function(r){var t=r.actions;t.loadPlaylist()})]),os=e("./frontend/src/lib/components/NotFound/index.tsx"),is=e("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),as=e("./frontend/src/lib/components/LemonButton/More.tsx"),ls=e("./frontend/src/scenes/teamLogic.tsx"),cs={component:qe,logic:Ge,paramsToProps:function(t){var a=t.params.id;return{shortId:a}}};function qe(){var r=Object(x.useValues)(ls.a),t=r.currentTeamId,a=Object(x.useValues)(Ge),i=a.playlist,m=a.playlistLoading,j=a.hasChanges,l=Object(x.useActions)(Ge),v=l.updatePlaylist,b=l.setFilters,g=l.saveChanges,R=l.duplicatePlaylist;return!i&&m?Object(s.jsxs)("div",{className:"space-y-4 mt-6",children:[Object(s.jsx)(f.a,{className:"h-10 w-1/4"}),Object(s.jsx)(f.a,{className:" w-1/3"}),Object(s.jsx)(f.a,{className:" w-1/4"}),Object(s.jsxs)("div",{className:"flex justify-between mt-4",children:[Object(s.jsx)(f.a.Button,{}),Object(s.jsxs)("div",{className:"flex gap-4",children:[Object(s.jsx)(f.a.Button,{}),Object(s.jsx)(f.a.Button,{})]})]}),Object(s.jsxs)("div",{className:"flex justify-between gap-4 mt-8",children:[Object(s.jsx)("div",{className:"space-y-8 w-1/4",children:Object(s.jsx)(f.a,{className:"h-10",repeat:10})}),Object(s.jsx)("div",{className:"flex-1"})]})]}):i?Object(s.jsxs)("div",{children:[Object(s.jsx)($e.a,{title:Object(s.jsx)(Me.a,{name:"name",value:i.name||"",placeholder:"Untitled Playlist",onSave:function(O){return v({name:O})},saveOnBlur:!0,maxLength:400,mode:void 0,"data-attr":"playlist-name"}),buttons:Object(s.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[Object(s.jsx)(as.a,{overlay:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(T.LemonButton,{status:"stealth",onClick:function(){return R()},fullWidth:!0,"data-attr":"duplicate-playlist",children:"Duplicate"}),Object(s.jsx)(T.LemonButton,{status:"stealth",onClick:function(){return v({pinned:!i.pinned})},fullWidth:!0,children:i.pinned?"Unpin playlist":"Pin playlist"}),Object(s.jsx)(T.LemonDivider,{}),Object(s.jsx)(T.LemonButton,{status:"danger",onClick:function(){return Object(Pe.x)({object:i,idField:"short_id",endpoint:"projects/".concat(t,"/session_recording_playlists"),callback:function(){$.router.actions.replace(_.a.sessionRecordings(q.X.Playlists))}})},fullWidth:!0,children:"Delete playlist"})]})}),Object(s.jsx)(T.LemonDivider,{vertical:!0}),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(T.LemonButton,{type:"primary",disabled:!j,loading:j&&m,onClick:g,children:"Save changes"})})]}),caption:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Me.a,{multiline:!0,name:"description",value:i.description||"",placeholder:"Description (optional)",onSave:function(O){return v({description:O})},saveOnBlur:!0,maxLength:400,"data-attr":"playlist-description",compactButtons:!0}),Object(s.jsx)(is.a,{at:i.last_modified_at,by:i.last_modified_by,className:"mt-2"})]})}),i.short_id?Object(s.jsx)(Se,{logicKey:i.short_id,filters:i.filters,onFiltersChange:b}):null]}):Object(s.jsx)(os.a,{object:"Recording Playlist"})}function Se(r){var t,a,i,m=r.logicKey,j=r.personUUID,l=r.filters,v=r.updateSearchParams,b=r.onFiltersChange,g=Object(ee.c)({key:m,personUUID:j,filters:l,updateSearchParams:v}),R=Object(x.useValues)(g),V=R.sessionRecordings,O=R.sessionRecordingIdToProperties,re=R.sessionRecordingsResponseLoading,k=R.sessionRecordingsPropertiesResponseLoading,je=R.hasNext,we=R.hasPrev,A=R.activeSessionRecording,Y=R.filters,ds=R.totalFiltersCount,Xe=R.showFilters,ye=Object(x.useActions)(g),us=ye.setSelectedRecordingId,es=ye.loadNext,ss=ye.loadPrev,Ne=ye.setFilters,ts=ye.reportRecordingsListFilterAdded,ms=ye.setShowFilters,Ce=Object(ie.useRef)(null);Object(ie.useEffect)(function(){Y!==l&&(b==null||b(Y))},[Y]);var fs=function(H){var oe;us(H.id);var ns=Ce!=null&&(oe=Ce.current)!==null&&oe!==void 0&&oe.offsetTop?Ce.current.offsetTop-8:0;window.scrollY>ns&&window.scrollTo({left:0,top:ns,behavior:"smooth"})},ps=function(H,oe){Ne(Object(ee.b)(Y,H,oe))},He=(t=Y.offset)!==null&&t!==void 0?t:0,ze=He+(re?ee.a:V.length),vs=ze?Object(s.jsxs)("div",{className:"flex items-center gap-1",children:[Object(s.jsx)("span",{children:"".concat(He+1," - ").concat(ze)}),Object(s.jsx)(T.LemonButton,{icon:Object(s.jsx)(Z.IconChevronLeft,{}),status:"stealth",size:"small",disabled:!we,onClick:function(){ss(),window.scrollTo(0,0)}}),Object(s.jsx)(T.LemonButton,{icon:Object(s.jsx)(Z.IconChevronRight,{}),status:"stealth",disabled:!je,size:"small",onClick:function(){es(),window.scrollTo(0,0)}})]}):null;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-4",children:[Object(s.jsx)(T.LemonButton,{type:"secondary",size:"small",icon:Object(s.jsx)(Z.IconWithCount,{count:ds,children:Object(s.jsx)(Z.IconFilter,{})}),onClick:function(){if(ms(!Xe),j){var H=document.querySelectorAll(".entity-filter-row button");H.length>0&&H[0].click()}},children:Xe?"Hide filters":"Filter recordings"}),Object(s.jsxs)("div",{className:"flex items-center gap-4",children:[Object(s.jsx)(_e.a,{dateFrom:(a=Y.date_from)!==null&&a!==void 0?a:"-7d",dateTo:(i=Y.date_to)!==null&&i!==void 0?i:void 0,onChange:function(H,oe){ts(Ve.d.DateRange),Ne({date_from:H,date_to:oe})},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]}),Object(s.jsxs)("div",{className:"flex gap-2",children:[Object(s.jsx)(fe.a,{children:"Duration"}),Object(s.jsx)(u,{onChange:function(H){ts(Ve.d.Duration),Ne({session_recording_duration:H})},initialFilter:Y.session_recording_duration,pageKey:j?"person-".concat(j):"session-recordings"})]})]})]}),Object(s.jsxs)("div",{ref:Ce,className:"SessionRecordingsPlaylist","data-attr":"session-recordings-playlist",children:[Object(s.jsxs)("div",{className:"SessionRecordingsPlaylist__left-column space-y-4",children:[Xe?Object(s.jsx)(p,{filters:Y,setFilters:Ne,showPropertyFilters:!j}):null,Object(s.jsxs)("div",{className:"w-full overflow-hidden border rounded",children:[Object(s.jsxs)("div",{className:"relative flex justify-between items-center bg-mid py-3 px-4 border-b",children:[Object(s.jsx)("span",{className:"font-bold uppercase text-xs my-1 tracking-wide",children:"Recent Recordings"}),vs,Object(s.jsx)(P.a,{loading:re})]}),V.length?Object(s.jsx)("ul",{className:Object(L.a)(re?"opacity-50":""),children:V.map(function(M,H){return Object(s.jsxs)(s.Fragment,{children:[H>0&&Object(s.jsx)("div",{className:"border-t"}),Object(s.jsx)(pe,{recording:M,recordingProperties:O[M.id],recordingPropertiesLoading:k,onClick:function(){return fs(M)},onPropertyClick:ps,isActive:(A==null?void 0:A.id)===M.id},M.id)]})})}):re?Object(s.jsx)(s.Fragment,{children:Object(Pe.vb)(ee.a).map(function(M){return Object(s.jsxs)("div",{className:"p-4 space-y-2 border-b",children:[Object(s.jsx)(f.a,{className:"w-1/2"}),Object(s.jsx)(f.a,{className:"w-1/3"})]},M)})}):Object(s.jsx)("p",{className:"text-muted-alt m-4",children:"No matching recordings found"})]}),Object(s.jsxs)("div",{className:"flex justify-between items-center",children:[Object(s.jsx)(T.LemonButton,{icon:Object(s.jsx)(Z.IconChevronLeft,{}),type:"secondary",disabled:!we,onClick:function(){ss(),window.scrollTo(0,0)},children:"Previous"}),Object(s.jsx)("span",{children:"".concat(He+1," - ").concat(ze)}),Object(s.jsx)(T.LemonButton,{icon:Object(s.jsx)(Z.IconChevronRight,{}),type:"secondary",disabled:!je,onClick:function(){es(),window.scrollTo(0,0)},children:"Next"})]})]}),Object(s.jsx)("div",{className:"SessionRecordingsPlaylist__right-column",children:A!=null&&A.id?Object(s.jsx)(Fe.a,{playerKey:"playlist",sessionRecordingId:A==null?void 0:A.id,matching:A==null?void 0:A.matching_events,recordingStartTime:A?A.start_time:void 0}):Object(s.jsx)("div",{className:"mt-20",children:Object(s.jsx)(be.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonTo:"https://posthog.com/docs/user-guides/recordings"})})})]})]})}try{Se.displayName="SessionRecordingsPlaylist",Se.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{logicKey:{defaultValue:null,description:"",name:"logicKey",required:!0,type:{name:"string"}},personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},filters:{defaultValue:null,description:"",name:"filters",required:!1,type:{name:"RecordingFilters"}},updateSearchParams:{defaultValue:null,description:"",name:"updateSearchParams",required:!1,type:{name:"boolean"}},onFiltersChange:{defaultValue:null,description:"",name:"onFiltersChange",required:!1,type:{name:"((filters: RecordingFilters) => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:Se.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(r){}},"./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts":function(Oe,I,e){"use strict";e.d(I,"a",function(){return ve}),e.d(I,"b",function(){return Ze}),e.d(I,"c",function(){return ke});var ce=e("./node_modules/core-js/modules/es.object.keys.js"),Le=e.n(ce),Te=e("./node_modules/core-js/modules/es.symbol.js"),de=e.n(Te),De=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),he=e.n(De),Be=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ie=e.n(Be),x=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Pe=e.n(x),q=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ee=e.n(q),Q=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),N=e.n(Q),se=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),G=e.n(se),z=e("./node_modules/@babel/runtime/regenerator/index.js"),ae=e.n(z),ue=e("./node_modules/core-js/modules/es.array.find.js"),Fe=e.n(ue),be=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e.n(be),Z=e("./node_modules/core-js/modules/es.function.name.js"),Ue=e.n(Z),Re=e("./node_modules/core-js/modules/es.array.map.js"),Ie=e.n(Re),K=e("./node_modules/core-js/modules/es.array.concat.js"),le=e.n(K),me=e("./node_modules/core-js/modules/es.array.filter.js"),fe=e.n(me),xe=e("./node_modules/core-js/modules/es.array.iterator.js"),te=e.n(xe),s=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),h=e.n(s),p=e("./node_modules/core-js/modules/es.object.from-entries.js"),L=e.n(p),f=e("./node_modules/kea/lib/index.esm.js"),P=e("./frontend/src/lib/api.ts"),w=e("./frontend/src/lib/utils.tsx"),J=e("./frontend/src/types.ts"),E=e("./node_modules/kea-router/lib/index.js"),Je=e.n(E),Ke=e("./frontend/src/lib/utils/eventUsageLogic.ts"),We=e("./node_modules/fast-deep-equal/index.js"),pe=e.n(We),Me=e("./frontend/src/scenes/teamLogic.tsx"),$e=e("./frontend/src/lib/dayjs.ts"),_e=e("./node_modules/kea-loaders/lib/index.js"),Ve=e.n(_e),Ee=e("./frontend/src/scenes/urls.ts");function Ae(n,o){var c=Object.keys(n);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(n);o&&(d=d.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),c.push.apply(c,d)}return c}function X(n){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?Ae(Object(c),!0).forEach(function(d){G()(n,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):Ae(Object(c)).forEach(function(d){Object.defineProperty(n,d,Object.getOwnPropertyDescriptor(c,d))})}return n}var ve=20,Qe={session_recording_duration:{type:"recording",key:"duration",value:60,operator:J.N.GreaterThan},properties:[],events:[],actions:[],date_from:Object($e.a)().subtract(21,"days").format("YYYY-MM-DD")},Ze=function(o,c,d){var u,y,D=(u=o.events)===null||u===void 0?void 0:u.find(function(F){var S=F.name;return S==="$pageview"}),B=(y=o.events)!==null&&y!==void 0?y:[],W=d?{key:c,value:[d],operator:J.N.Exact,type:"event"}:{key:c,value:J.N.IsNotSet,operator:J.N.IsNotSet,type:"event"};return D?{events:B.map(function(F){var S,U;return F.order===D.order?X(X({},F),{},{properties:[].concat(N()((S=(U=F.properties)===null||U===void 0?void 0:U.filter(function(C){var ne=C.key;return ne!==c}))!==null&&S!==void 0?S:[]),[W])}):F})}:{events:[].concat(N()(B),[{id:"$pageview",name:"$pageview",type:"events",order:B.length,properties:[W]}])}},ke=Object(f.kea)([Object(f.path)(function(n){return["scenes","session-recordings","playlist","sessionRecordingsListLogic",n]}),Object(f.props)({}),Object(f.key)(function(n){var o;return"".concat(n.key,"-").concat((o=n.updateSearchParams)!==null&&o!==void 0?o:"-with-search")}),Object(f.connect)({values:[Me.a,["currentTeamId"]],actions:[Ke.e,["reportRecordingsListFetched","reportRecordingsListPropertiesFetched","reportRecordingsListFilterAdded"]]}),Object(f.actions)({getSessionRecordings:!0,setFilters:function(o){return{filters:o}},replaceFilters:function(o){return{filters:o}},setShowFilters:function(o){return{showFilters:o}},setSelectedRecordingId:function(o){return{id:o}},loadNext:!0,loadPrev:!0}),Object(_e.loaders)(function(n){var o=n.props,c=n.values,d=n.actions;return{sessionRecordingsResponse:[{results:[],has_next:!1},{getSessionRecordings:function(){var u=ee()(ae.a.mark(function D(B,W){var F,S,U,C,ne,ge;return ae.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return S=X(X({},c.filters),{},{person_uuid:(F=o.personUUID)!==null&&F!==void 0?F:"",limit:ve}),U=Object(w.Gb)(S),$.next=4,W(100);case 4:return C=performance.now(),$.next=7,P.b.recordings.list(U);case 7:return ne=$.sent,ge=performance.now()-C,d.reportRecordingsListFetched(ge),W(),$.abrupt("return",ne);case 12:case"end":return $.stop()}},D)}));function y(D,B){return u.apply(this,arguments)}return y}()}],sessionRecordingsPropertiesResponse:[{results:[]},{getSessionRecordingsProperties:function(){var u=ee()(ae.a.mark(function D(B,W){var F,S,U,C,ne;return ae.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(c.sessionRecordingsResponse.results.length<1)){_.next=2;break}return _.abrupt("return",{results:[]});case 2:return F={session_ids:c.sessionRecordingsResponse.results.map(function($){var Ye=$.id;return Ye})},S=Object(w.Gb)(F),_.next=6,W(100);case 6:return U=performance.now(),_.next=9,P.b.recordings.listProperties(S);case 9:return C=_.sent,ne=performance.now()-U,d.reportRecordingsListPropertiesFetched(ne),W(),_.abrupt("return",C);case 14:case"end":return _.stop()}},D)}));function y(D,B){return u.apply(this,arguments)}return y}()}]}}),Object(f.reducers)(function(n){var o=n.props;return{filters:[o.filters||Qe,{replaceFilters:function(d,u){var y=u.filters;return y},setFilters:function(d,u){var y=u.filters;return X(X({},d),y)}}],showFilters:[!1,{setShowFilters:function(d,u){var y=u.showFilters;return y}}],sessionRecordings:[[],{getSessionRecordingsSuccess:function(d,u){var y=u.sessionRecordingsResponse;return N()(y.results)},setSelectedRecordingId:function(d,u){var y=u.id;return N()(d.map(function(D){return D.id===y?X(X({},D),{},{viewed:!0}):X({},D)}))}}],selectedRecordingId:[null,{setSelectedRecordingId:function(d,u){var y=u.id;return y!=null?y:null}}]}}),Object(f.listeners)(function(n){var o=n.actions,c=n.values;return{setFilters:function(){o.getSessionRecordings()},replaceFilters:function(){o.getSessionRecordings()},loadNext:function(){var u;o.setFilters({offset:(((u=c.filters)===null||u===void 0?void 0:u.offset)||0)+ve})},loadPrev:function(){var u;o.setFilters({offset:Math.max((((u=c.filters)===null||u===void 0?void 0:u.offset)||0)-ve,0)})},getSessionRecordingsSuccess:function(){o.getSessionRecordingsProperties({})}}}),Object(f.selectors)({sessionRecordingIdToProperties:[function(n){return[n.sessionRecordingsPropertiesResponse]},function(n){var o;return(o=Object.fromEntries(n.results.map(function(c){var d=c.id,u=c.properties;return[d,u]})))!==null&&o!==void 0?o:{}}],activeSessionRecording:[function(n){return[n.selectedRecordingId,n.sessionRecordings]},function(n,o){return n?o.find(function(c){return c.id===n})||{id:n}:o[0]}],hasPrev:[function(n){return[n.filters]},function(n){return(n.offset||0)>0}],hasNext:[function(n){return[n.sessionRecordingsResponse]},function(n){return n.has_next}],totalFiltersCount:[function(n){return[n.filters]},function(n){var o,c,d;return((n==null||(o=n.actions)===null||o===void 0?void 0:o.length)||0)+((n==null||(c=n.events)===null||c===void 0?void 0:c.length)||0)+((n==null||(d=n.properties)===null||d===void 0?void 0:d.length)||0)}]}),Object(f.afterMount)(function(n){var o=n.actions;o.getSessionRecordings()}),Object(E.actionToUrl)(function(n){var o=n.props,c=n.values;if(!o.updateSearchParams)return{};var d=function(y){var D={filters:c.filters},B=X({},E.router.values.hashParams);return c.selectedRecordingId?B.sessionRecordingId=c.selectedRecordingId:delete B.sessionRecordingId,[E.router.values.location.pathname,D,B,{replace:y}]};return{loadSessionRecordings:function(){return d(!0)},setSelectedRecordingId:function(){return d(!1)},setFilters:function(){return d(!0)}}}),Object(E.urlToAction)(function(n){var o,c=n.actions,d=n.values,u=n.props,y=function(B,W,F){var S;if(!!u.updateSearchParams){var U=(S=F.sessionRecordingId)!==null&&S!==void 0?S:null;U!==d.selectedRecordingId&&c.setSelectedRecordingId(U);var C=W.filters;C&&(pe()(C,d.filters)||c.replaceFilters(C))}};return o={},G()(o,Ee.a.sessionRecordings(),y),G()(o,Ee.a.sessionRecordings(J.X.Recent),y),G()(o,Ee.a.person("*"),y),o})])},"./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts":function(Oe,I,e){"use strict";e.d(I,"b",function(){return me}),e.d(I,"a",function(){return te}),e.d(I,"c",function(){return s});var ce=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Le=e.n(ce),Te=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),de=e.n(Te),De=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),he=e.n(De),Be=e("./node_modules/core-js/modules/es.array.iterator.js"),ie=e("./node_modules/core-js/modules/es.object.to-string.js"),x=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Pe=e("./node_modules/core-js/modules/es.regexp.exec.js"),q=e("./node_modules/core-js/modules/es.string.replace.js"),ee=e("./node_modules/@babel/runtime/regenerator/index.js"),Q=e.n(ee),N=e("./node_modules/kea/lib/index.esm.js"),se=e("./frontend/src/types.ts"),G=e("./frontend/src/scenes/urls.ts"),z=e("./node_modules/kea-router/lib/index.js"),ae=e("./frontend/src/lib/logic/featureFlagLogic.ts"),ue=e("./frontend/src/lib/constants.tsx"),Fe=e("./node_modules/kea-loaders/lib/index.js"),be=e("./frontend/src/lib/api.ts"),T=e("./frontend/src/lib/utils.tsx"),Z=e("./node_modules/core-js/modules/es.symbol.js"),Ue=e("./node_modules/core-js/modules/es.symbol.description.js"),Re=e("./frontend/src/lib/components/LemonDialog/index.ts"),Ie=e("./frontend/src/scenes/billing/v2/Billing.tsx"),K=e("./node_modules/react/jsx-runtime.js");function le(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.title,L=p===void 0?"Unlock premium features":p,f=h.description;Re.a.open({title:L,description:f,content:Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(Ie.a,{})}),width:800,primaryButton:{children:"Maybe later...",type:"secondary"}})}try{le.displayName="openBillingPopupModal",le.__docgenInfo={description:"",displayName:"openBillingPopupModal",props:{title:{defaultValue:{value:"Unlock premium features"},description:"",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/billing/v2/BillingPopup.tsx#openBillingPopupModal"]={docgenInfo:le.__docgenInfo,name:"openBillingPopupModal",path:"frontend/src/scenes/billing/v2/BillingPopup.tsx#openBillingPopupModal"})}catch(h){}var me=function(p){switch(p){case se.X.Recent:return"Recent Recordings";case se.X.Playlists:return"Saved Playlists";default:return Object(T.i)(p)}},fe="You have reached the free limit of ".concat(ue.w," saved playlists"),xe=function(){le({title:"Upgrade now to unlock unlimited playlists",description:fe})},te=function(){var h=he()(Q.a.mark(function p(L){return Q.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,be.b.recordings.createPlaylist(L);case 3:return P.abrupt("return",P.sent);case 6:P.prev=6,P.t0=P.catch(0),P.t0.status===403&&xe();case 9:return P.abrupt("return",null);case 10:case"end":return P.stop()}},p,null,[[0,6]])}));return function(L){return h.apply(this,arguments)}}(),s=Object(N.kea)([Object(N.path)(function(){return["scenes","session-recordings","root"]}),Object(N.connect)({values:[ae.a,["featureFlags"]]}),Object(N.actions)({setTab:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:se.X.Recent;return{tab:p}},saveNewPlaylist:function(p){return{playlist:p}}}),Object(N.reducers)(function(h){return de()(h),{tab:[se.X.Recent,{setTab:function(L,f){var P=f.tab;return P}}]}}),Object(Fe.loaders)(function(h){return de()(h),{newPlaylist:[null,{saveNewPlaylist:function(){var p=he()(Q.a.mark(function f(P){var w;return Q.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return w=P.playlist,E.next=3,te(w);case 3:return E.abrupt("return",E.sent);case 4:case"end":return E.stop()}},f)}));function L(f){return p.apply(this,arguments)}return L}()}]}}),Object(N.listeners)(function(h){return de()(h),{saveNewPlaylistSuccess:function(){var p=he()(Q.a.mark(function f(P){var w;return Q.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(w=P.newPlaylist,w){E.next=3;break}return E.abrupt("return");case 3:z.router.actions.push(G.a.sessionRecordingPlaylist(w.short_id));case 4:case"end":return E.stop()}},f)}));function L(f){return p.apply(this,arguments)}return L}()}}),Object(z.actionToUrl)(function(h){var p=h.values;return{setTab:function(){return[G.a.sessionRecordings(p.tab),z.router.values.searchParams]}}}),Object(N.selectors)(function(h){return de()(h),{breadcrumbs:[function(p){return[p.tab]},function(p){return[{name:me(p)}]}]}}),Object(z.urlToAction)(function(h){var p,L=h.actions,f=h.values;return p={},Le()(p,G.a.sessionRecordings(),function(){!f.featureFlags[ue.h.RECORDING_PLAYLISTS]||z.router.actions.replace(G.a.sessionRecordings(se.X.Recent))}),Le()(p,"/recordings/:tab",function(w){var J=w.tab;!f.featureFlags[ue.h.RECORDING_PLAYLISTS]||J!==f.tab&&L.setTab(J)}),p})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss":function(Oe,I,e){var ce=e("./node_modules/css-loader/dist/runtime/api.js");I=ce(!1),I.push([Oe.i,".SessionRecordingsPlaylist{display:flex;flex-direction:column-reverse;align-items:flex-start;gap:1rem;overflow:hidden}@media screen and (min-width:768px){.SessionRecordingsPlaylist{flex-direction:row;justify-content:flex-start}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{flex-shrink:0}@media screen and (min-width:768px){.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{width:30%;min-width:350px;max-width:400px}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__list-item .SessionRecordingsPlaylist__list-item__property-icon:hover{transition:opacity .2s;opacity:1}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column{flex:1;overflow:hidden}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column .SessionRecordingsPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),Oe.exports=I}}]);
