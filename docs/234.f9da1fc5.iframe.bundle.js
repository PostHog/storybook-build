(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(Q,O,e){"use strict";e.r(O),e.d(O,"scene",function(){return ae}),e.d(O,"ActionsTable",function(){return ue});var R=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),B=e.n(R),t=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),c=e.n(t),S=e("./node_modules/core-js/modules/es.array.map.js"),X=e.n(S),K=e("./node_modules/core-js/modules/es.regexp.exec.js"),W=e.n(K),z=e("./node_modules/core-js/modules/es.string.search.js"),le=e.n(z),T=e("./node_modules/core-js/modules/es.array.concat.js"),N=e.n(T),F=e("./node_modules/core-js/modules/es.function.name.js"),P=e.n(F),V=e("./node_modules/core-js/modules/es.array.slice.js"),h=e.n(V),U=e("./node_modules/core-js/modules/es.number.constructor.js"),te=e.n(U),j=e("./node_modules/core-js/modules/es.array.filter.js"),I=e.n(j),Y=e("./node_modules/core-js/modules/es.object.to-string.js"),Z=e.n(Y),y=e("./node_modules/react/index.js"),n=e.n(y),w=e("./frontend/src/scenes/actions/Actions.scss"),G=e("./frontend/src/lib/components/Link.tsx"),b=e("./node_modules/antd/es/input/index.js"),D=e("./node_modules/antd/es/radio/index.js"),g=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),s=e("./frontend/src/lib/utils.tsx"),d=e("./node_modules/kea/lib/index.esm.js"),m=e("./frontend/src/models/actionsModel.ts"),f=e("./frontend/src/scenes/actions/NewActionButton.tsx"),E=e("./frontend/src/types.ts"),C=e("./node_modules/fuse.js/dist/fuse.esm.js"),p=e("./frontend/src/scenes/userLogic.ts"),$=e("./frontend/src/scenes/teamLogic.tsx"),k=e("./frontend/src/lib/api.ts"),L=e("./frontend/src/scenes/urls.ts"),H=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),i=e("./frontend/src/lib/components/LemonTable/index.ts"),J=e("./frontend/src/lib/components/LemonButton/index.ts"),x=e("./frontend/src/lib/components/LemonDivider/index.ts"),r=e("./frontend/src/lib/components/LemonButton/More.tsx"),l=e("./node_modules/kea-router/lib/index.js"),o=e.n(l),a=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),u=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),M=e("./frontend/src/lib/components/PageHeader.tsx"),ne=function(se,ce){return new C.a(se,{keys:["name","url"],threshold:.3}).search(ce).map(function(de){return de.item})},ae={component:ue};function ue(){var me=Object(d.useValues)($.a),se=me.currentTeam,ce=Object(d.useValues)(Object(m.a)({params:"include_count=1"})),de=ce.actions,Pe=ce.actionsLoading,je=Object(d.useActions)(m.a),De=je.loadActions,Me=Object(y.useState)(""),Ee=c()(Me,2),_e=Ee[0],ge=Ee[1],Ae=Object(y.useState)(!1),Oe=c()(Ae,2),fe=Oe[0],Te=Oe[1],ve=Object(d.useValues)(p.a),ie=ve.user,he=ve.hasAvailableFeature,Ue=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(_,v){return(_.name||"").localeCompare(v.name||"")},render:function(_,v,q){return n.a.createElement(G.a,{"data-attr":"action-link-"+q,to:L.a.action(v.id),className:"row-name"},_||n.a.createElement("i",null,"Unnamed action"))}}].concat(B()(he(E.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(_){return n.a.createElement(a.a,{tags:_,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(_,v){var q;return n.a.createElement("span",null,(q=v.steps)!==null&&q!==void 0&&q.length?v.steps.map(function(re){return n.a.createElement("div",{key:re.id},function(){var ee=Object(s.Ab)(re.url||"");switch(ee=ee.slice(0,40)+(ee.length>40?"...":""),re.event){case"$autocapture":return"Autocapture";case"$pageview":switch(re.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,ee));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,ee));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,ee))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,re.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(H.b)(),Object(H.a)()],B()(se!=null&&se.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(_,v){return Number(_.post_to_slack)-Number(v.post_to_slack)},render:function(_){return _?n.a.createElement(g.a,null):null}}]:[]),[{width:0,render:function(_,v){return n.a.createElement(r.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(J.a,{type:"stealth",to:L.a.action(v.id),fullWidth:!0},"Edit"),n.a.createElement(J.a,{type:"stealth",to:Object(l.combineUrl)(L.a.insightNew({insight:E.B.TRENDS,interval:"day",display:E.j.ActionsLineGraph,actions:[{id:v.id,name:v.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(x.a,null),n.a.createElement(J.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Object(s.x)({endpoint:k.b.actions.determineDeleteEndpoint(),object:v,callback:De})},fullWidth:!0},"Delete action"))})}}]),oe=de;return _e&&_e!==""&&(oe=ne(oe,_e)),fe&&(oe=oe.filter(function(A){var _;return((_=A.created_by)===null||_===void 0?void 0:_.uuid)===(ie==null?void 0:ie.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(M.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),n.a.createElement(u.a,{tab:u.b.Actions}),n.a.createElement(b.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(_){ge(_.target.value)}}),n.a.createElement(D.a.Group,{buttonStyle:"solid",value:fe,onChange:function(_){return Te(_.target.value)}},n.a.createElement(D.a.Button,{value:!1},"All actions"),n.a.createElement(D.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb-4 float-right"},n.a.createElement(f.a,null)),n.a.createElement(i.a,{columns:Ue,loading:Pe,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:oe,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/actions/NewActionButton.tsx":function(Q,O,e){"use strict";e.d(O,"a",function(){return I});var R=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),B=e.n(R),t=e("./node_modules/react/index.js"),c=e.n(t),S=e("./node_modules/antd/es/modal/index.js"),X=e("./node_modules/antd/es/button/index.js"),K=e("./node_modules/antd/es/row/index.js"),W=e("./node_modules/antd/es/col/index.js"),z=e("./node_modules/antd/es/card/index.js"),le=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),T=e("./node_modules/kea-router/lib/index.js"),N=e.n(T),F=e("./frontend/src/scenes/urls.ts"),P=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx"),V=e("./frontend/src/lib/components/icons.tsx"),h=e("./frontend/src/lib/components/LemonButton/index.ts"),U=e("./node_modules/kea/lib/index.esm.js"),te=e("./frontend/src/lib/logic/featureFlagLogic.ts"),j=e("./frontend/src/lib/constants.tsx");function I(){var Y=Object(t.useState)(!1),Z=B()(Y,2),y=Z[0],n=Z[1],w=Object(t.useState)(!1),G=B()(w,2),b=G[0],D=G[1],g=Object(U.useValues)(te.a),s=g.featureFlags;return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{type:"primary",onClick:function(){return n(!0)},"data-attr":"create-action"},"New ",s[j.h.SIMPLIFY_ACTIONS]?"Calculated Event":"Action"),c.a.createElement(S.a,{visible:y,style:{cursor:"pointer"},onCancel:function(){n(!1),D(!1)},title:"Create new ".concat(s[j.h.SIMPLIFY_ACTIONS]?"calculated event":"action"),footer:[b&&c.a.createElement(X.a,{key:"back-button",onClick:function(){return D(!1)}},"Back"),c.a.createElement(X.a,{key:"cancel-button",onClick:function(){n(!1),D(!1)}},"Cancel")]},!b&&c.a.createElement(K.a,{gutter:2,justify:"space-between"},c.a.createElement(W.a,{xs:11},c.a.createElement(z.a,{title:"Inspect element on your site",onClick:function(){return D(!0)},size:"small"},c.a.createElement("div",{style:{textAlign:"center",fontSize:40}},c.a.createElement(le.a,null)))),c.a.createElement(W.a,{xs:11},c.a.createElement(z.a,{title:"From event or pageview",onClick:function(){T.router.actions.push(F.a.createAction())},size:"small"},c.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},c.a.createElement(V.IconEdit,null))))),b&&c.a.createElement(P.a,null)))}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(Q,O,e){"use strict";e.d(O,"b",function(){return i}),e.d(O,"a",function(){return x});var R=e("./node_modules/core-js/modules/es.object.keys.js"),B=e.n(R),t=e("./node_modules/core-js/modules/es.symbol.js"),c=e.n(t),S=e("./node_modules/core-js/modules/es.array.filter.js"),X=e.n(S),K=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),W=e.n(K),z=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),le=e.n(z),T=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),N=e.n(T),F=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),P=e.n(F),V=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),h=e.n(V),U=e("./node_modules/core-js/modules/es.array.iterator.js"),te=e.n(U),j=e("./node_modules/core-js/modules/es.object.to-string.js"),I=e.n(j),Y=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Z=e.n(Y),y=e("./node_modules/core-js/modules/es.object.from-entries.js"),n=e.n(y),w=e("./node_modules/core-js/modules/es.array.map.js"),G=e.n(w),b=e("./node_modules/core-js/modules/es.object.entries.js"),D=e.n(b),g=e("./node_modules/react/index.js"),s=e.n(g),d=e("./node_modules/kea/lib/index.esm.js"),m=e("./node_modules/antd/es/tabs/index.js"),f=e("./frontend/src/scenes/urls.ts"),E=e("./frontend/src/lib/components/Tooltip.tsx"),C=e("./frontend/src/lib/components/icons.tsx"),p=e("./frontend/src/lib/components/TitleWithIcon.tsx"),$=e("./frontend/src/lib/logic/featureFlagLogic.ts"),k=e("./frontend/src/lib/constants.tsx");function L(r,l){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);l&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),o.push.apply(o,a)}return o}function H(r){for(var l=1;l<arguments.length;l++){var o=arguments[l]!=null?arguments[l]:{};l%2?L(Object(o),!0).forEach(function(a){h()(r,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):L(Object(o)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(o,a))})}return r}var i;(function(r){r.Actions="actions",r.EventDefinitions="events",r.EventPropertyDefinitions="properties"})(i||(i={}));var J=Object(d.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(l){return{tab:l}}},reducers:{tab:[i.EventDefinitions,{setTab:function(l,o){var a=o.tab;return a}}]},selectors:function(){return{tabUrls:[function(){return[$.a.selectors.featureFlags]},function(l){var o;return H((o={},h()(o,i.EventPropertyDefinitions,f.a.eventPropertyDefinitions()),h()(o,i.EventDefinitions,f.a.eventDefinitions()),o),l[k.h.SIMPLIFY_ACTIONS]?{}:h()({},i.Actions,f.a.actions()))}]}},actionToUrl:function(l){var o=l.values;return{setTab:function(u){var M=u.tab;return o.tabUrls[M]||f.a.events()}}},urlToAction:function(l){var o=l.actions,a=l.values;return Object.fromEntries(Object.entries(a.tabUrls).map(function(u){var M=P()(u,2),ne=M[0],ae=M[1];return[ae,function(){a.tab!==ne&&o.setTab(ne)}]}))}});function x(r){var l=r.tab,o=Object(d.useActions)(J),a=o.setTab,u=Object(d.useValues)($.a),M=u.featureFlags;return s.a.createElement(m.a,{tabPosition:"top",animated:!1,activeKey:l,onTabClick:function(ae){return a(ae)}},s.a.createElement(m.a.TabPane,{tab:s.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:i.EventDefinitions}),!M[k.h.SIMPLIFY_ACTIONS]&&s.a.createElement(m.a.TabPane,{tab:s.a.createElement(p.a,{icon:s.a.createElement(E.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},s.a.createElement(C.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:i.Actions}),s.a.createElement(m.a.TabPane,{tab:s.a.createElement(p.a,{icon:s.a.createElement(E.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},s.a.createElement(C.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Properties"),key:i.EventPropertyDefinitions}))}try{x.displayName="DataManagementPageTabs",x.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:x.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(r){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx":function(Q,O,e){"use strict";e.d(O,"a",function(){return g});var R=e("./node_modules/core-js/modules/es.array.map.js"),B=e("./node_modules/react/index.js"),t=e.n(B),c=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),S=e.n(c),X=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrls.scss"),K=e.n(X),W={};W.insert="head",W.singleton=!1;var z=S()(K.a,W),le=K.a.locals||{},T=e("./node_modules/clsx/dist/clsx.m.js"),N=e("./node_modules/kea/lib/index.esm.js"),F=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),P=e("./frontend/src/lib/components/LemonButton/index.ts"),V=e("./node_modules/antd/es/input/index.js"),h=e("./node_modules/antd/es/popconfirm/index.js"),U=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),te=e("./frontend/src/lib/utils.tsx"),j=e("./frontend/src/lib/components/LemonRow/index.ts"),I=e("./frontend/src/lib/components/icons.tsx"),Y=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),Z=e("./node_modules/kea-forms/lib/index.js"),y=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),n=e("./frontend/src/lib/forms/Field.tsx"),w=e("./node_modules/antd/lib/typography/index.js"),G=e.n(w);function b(s){var d=s.numberOfResults,m=s.isSearching,f=s.isAddingEntry;return d>0?null:m?t.a.createElement(j.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs that match your search."):f?null:t.a.createElement(j.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs or domains. Add one to get started.")}function D(s){var d=s.actionId,m=Object(U.b)({actionId:d}),f=Object(N.useValues)(m),E=f.isProposedUrlSubmitting,C=Object(N.useActions)(m),p=C.cancelProposingUrl;return t.a.createElement(Z.Form,{logic:U.b,props:{actionId:d},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"AuthorizedURLForm w-full"},t.a.createElement(n.a,{name:"url"},t.a.createElement(y.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),t.a.createElement("div",{className:"flex justify-end"},t.a.createElement(P.a,{type:"secondary",onClick:p},"Cancel"),t.a.createElement(P.a,{htmlType:"submit",type:"primary",className:"form-submit ml-4",disabled:E,"data-attr":"url-save"},"Save")))}function g(s){var d=s.pageKey,m=s.actionId,f=Object(U.b)({actionId:m}),E=Object(N.useValues)(f),C=E.appUrlsKeyed,p=E.suggestionsLoading,$=E.searchTerm,k=E.launchUrl,L=E.editUrlIndex,H=E.isAddUrlFormVisible,i=Object(N.useActions)(f),J=i.addUrl,x=i.removeUrl,r=i.setSearchTerm,l=i.newUrl,o=i.setEditUrlIndex;return t.a.createElement("div",null,t.a.createElement("div",{className:"flex items-center mb-4 gap-2"},t.a.createElement("div",{className:"flex grow"},t.a.createElement(V.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:$,onChange:function(u){r(u.target.value)},autoFocus:d==="toolbar-launch"&&!Object(te.Y)()})),t.a.createElement(P.a,{onClick:l,outlined:!0,icon:t.a.createElement(I.IconPlus,null),"data-attr":"toolbar-add-url"},"Add",d==="toolbar-launch"&&" authorized URL")),p?t.a.createElement(j.a,{outlined:!0,fullWidth:!0,size:"large",key:-1,className:Object(T.a)("AuthorizedUrlRow")},t.a.createElement(Y.a,{size:"md"})):t.a.createElement("div",{className:"space-y-2"},H&&t.a.createElement(j.a,{outlined:!0,fullWidth:!0,size:"large"},t.a.createElement(D,{actionId:m})),t.a.createElement(b,{numberOfResults:C.length,isSearching:$.length>0,isAddingEntry:H}),C.map(function(a,u){return t.a.createElement(j.a,{outlined:!0,fullWidth:!0,size:"tall",key:u,className:Object(T.a)("AuthorizedUrlRow",a.type,"flex items-center","mr",L!==u&&"highlight-on-hover")},L===u?t.a.createElement(D,{actionId:m}):t.a.createElement(t.a.Fragment,null,a.type==="suggestion"&&t.a.createElement(F.a,{type:"highlight",className:"mr-4"},"Suggestion"),t.a.createElement(G.a.Text,{ellipsis:{tooltip:a.url},className:"text-muted-alt flex-1"},a.url),t.a.createElement("div",{className:"Actions flex space-x-4 shrink-0"},a.type==="suggestion"?t.a.createElement(P.a,{onClick:function(){return J(a.url)},icon:t.a.createElement(I.IconPlus,null),outlined:!1,"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):t.a.createElement(t.a.Fragment,null,t.a.createElement(P.a,{icon:t.a.createElement(I.IconOpenInApp,null),href:k(a.url),tooltip:"Launch toolbar",center:!0,className:"ActionButton","data-attr":"toolbar-open"}),t.a.createElement(P.a,{icon:t.a.createElement(I.IconEdit,null),onClick:function(){return o(a.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),t.a.createElement(h.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Are you sure you want to remove this authorized url?"),onConfirm:function(){return x(u)}},t.a.createElement(P.a,{icon:t.a.createElement(I.IconDelete,null),tooltip:"Remove URL",center:!0,className:"ActionButton"}))))))})))}try{g.displayName="AuthorizedUrls",g.__docgenInfo={description:"",displayName:"AuthorizedUrls",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"]={docgenInfo:g.__docgenInfo,name:"AuthorizedUrls",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"})}catch(s){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrls.scss":function(Q,O,e){var R=e("./node_modules/css-loader/dist/runtime/api.js");O=R(!1),O.push([Q.i,".AuthorizedUrlRow.highlight-on-hover:hover{background:var(--primary-bg-hover)}",""]),Q.exports=O}}]);
