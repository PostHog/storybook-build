(window.webpackJsonp=window.webpackJsonp||[]).push([[303],{"./frontend/src/scenes/cohorts/Cohorts.tsx":function(h,r,t){"use strict";t.r(r),t.d(r,"Cohorts",function(){return C}),t.d(r,"scene",function(){return G});var j=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),T=t.n(j),tt=t("./node_modules/core-js/modules/es.array.map.js"),st=t("./node_modules/core-js/modules/es.regexp.exec.js"),et=t("./node_modules/core-js/modules/es.string.search.js"),ot=t("./node_modules/core-js/modules/es.function.name.js"),nt=t("./node_modules/core-js/modules/es.symbol.js"),rt=t("./node_modules/core-js/modules/es.symbol.description.js"),A=t("./node_modules/react/index.js"),I=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),f=t("./frontend/src/models/cohortsModel.ts"),c=t("./node_modules/kea/lib/index.esm.js"),N=t("./frontend/src/lib/components/PageHeader.tsx"),P=t("./frontend/src/types.ts"),R=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),V=t.n(R),D=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss"),O=t.n(D),g={};g.insert="head",g.singleton=!1;var at=V()(O.a,g),it=O.a.locals||{},E=t("./node_modules/fuse.js/dist/fuse.esm.js"),b=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),U=t("./frontend/src/lib/components/Tooltip.tsx"),B=t("./frontend/src/lib/components/Link.tsx"),F=t("./frontend/src/lib/dayjs.ts"),M=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),l=t("./frontend/src/scenes/urls.ts"),W=t("./frontend/src/lib/components/LemonTable/index.ts"),H=t("./frontend/src/scenes/userLogic.ts"),z=t("./frontend/src/lib/components/LemonButton/More.tsx"),a=t("./frontend/src/lib/components/LemonButton/index.ts"),J=t("./frontend/src/lib/components/LemonDivider/index.ts"),d=t("./node_modules/kea-router/lib/index.js"),K=t("./frontend/@posthog/lemon-ui/src/index.ts"),s=t("./node_modules/react/jsx-runtime.js"),$=function(u,p){return new E.a(u,{keys:["name"],threshold:.3}).search(p).map(function(m){return m.item})};function C(){var v=Object(c.useValues)(f.a),u=v.cohorts,p=v.cohortsLoading,m=Object(c.useActions)(f.a),Q=m.deleteCohort,y=m.exportCohortPersons,X=Object(c.useValues)(H.a),Y=X.hasAvailableFeature,Z=Object(c.useValues)(d.router),w=Z.searchParams,k=Object(A.useState)(""),S=T()(k,2),x=S[0],q=S[1],_=[{title:"Name",dataIndex:"name",className:"ph-no-capture",width:"30%",sorter:function(o,e){return(o.name||"").localeCompare(e.name||"")},render:function(o,e){var n=e.id,L=e.description;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(B.a,{to:Object(d.combineUrl)(l.a.cohort(n),w).url,className:"row-name",children:o||"Untitled"}),Y(P.d.DASHBOARD_COLLABORATION)&&L&&Object(s.jsx)("span",{className:"row-description",children:L})]})}},{title:"Users in cohort",align:"right",render:function(o,e){var n;return(n=e.count)===null||n===void 0?void 0:n.toLocaleString()},dataIndex:"count",sorter:function(o,e){return(o.count||0)-(e.count||0)}},Object(b.b)(),Object(b.a)(),{title:Object(s.jsx)("span",{children:Object(s.jsxs)(U.a,{title:"PostHog calculates what users belong to each cohort. This is then used when filtering on cohorts in the Trends page etc. Calculating happens every 15 minutes, or whenever a cohort is updated.",children:["Last calculated",Object(s.jsx)(I.a,{style:{marginLeft:6}})]})}),render:function(o,e){return e.is_static?Object(s.jsx)(s.Fragment,{children:"N/A"}):e.is_calculating?Object(s.jsxs)("span",{className:"flex items-center",children:["in progress ",Object(s.jsx)(M.a,{className:"ml-2"})]}):Object(F.a)(e.last_calculation).fromNow()}},{width:0,render:function(o,e){return Object(s.jsx)(z.a,{overlay:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(a.a,{status:"stealth",to:l.a.cohort(e.id),fullWidth:!0,children:"Edit"}),Object(s.jsx)(a.a,{status:"stealth",to:Object(d.combineUrl)(l.a.sessionRecordings(),{filters:{properties:[{key:"id",label:e.name,type:"cohort",value:e.id}]}}).url,fullWidth:!0,children:"View session recordings"}),Object(s.jsx)(a.a,{status:"stealth",onClick:function(){return y(e.id,["distinct_ids.0","id","name","properties.email"])},tooltip:"Export specific columns for users belonging to this cohort in CSV format. Includes distinct id, internal id, email, and name",fullWidth:!0,children:"Export important columns for users"}),Object(s.jsx)(a.a,{status:"stealth",onClick:function(){return y(e.id)},tooltip:"Export all users belonging to this cohort in CSV format.",fullWidth:!0,children:"Export all columns for users"}),Object(s.jsx)(J.a,{}),Object(s.jsx)(a.a,{status:"danger",onClick:function(){return Q(e)},fullWidth:!0,children:"Delete cohort"})]})})}}];return Object(s.jsxs)("div",{children:[Object(s.jsx)(N.a,{title:"Cohorts",caption:"Create lists of users who have something in common to use in analytics or feature flags."}),Object(s.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-2",children:[Object(s.jsx)(K.LemonInput,{type:"search",placeholder:"Search for cohorts",onChange:q,value:x}),Object(s.jsx)(a.a,{type:"primary","data-attr":"create-cohort",onClick:function(){return d.router.actions.push(l.a.cohort("new"))},children:"New Cohort"})]}),Object(s.jsx)(W.a,{columns:_,loading:p,rowKey:"id",pagination:{pageSize:100},dataSource:x?$(u,x):u,nouns:["cohort","cohorts"],"data-attr":"cohorts-table"})]})}var G={component:C,logic:f.a}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss":function(h,r,t){var j=t("./node_modules/css-loader/dist/runtime/api.js");r=j(!1),r.push([h.i,".cohorts-drawer .ant-drawer-content-wrapper{max-width:850px!important;width:100%!important}.cohort-recalculating{background-color:var(--bg-mid);padding:.5rem 1rem;margin-top:1rem;border-radius:var(--radius)}.cohort-recalculating .ant-spin-spinning{margin-right:.375rem}.cohort-csv-dragger{height:155px!important;background-color:transparent!important;margin-top:1rem;border:2px dashed var(--primary)!important;border-radius:4px!important}.cohort-csv-dragger:hover{border-color:var(--primary-light)!important}.cohort-csv-dragger .ant-upload-drag-container{display:flex!important;justify-content:center;flex-direction:column;align-items:center;height:100%;padding:0 1rem}.cohort-csv-dragger .ant-upload-drag-container .ant-upload-text{font-weight:600;font-size:1rem!important;margin:8px 0 0!important}",""]),h.exports=r}}]);
