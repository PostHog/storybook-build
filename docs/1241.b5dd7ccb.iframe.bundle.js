"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[1241],{"./frontend/src/scenes/groups/Groups.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Groups:()=>Groups,scene:()=>scene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/types.ts"),_groupsListLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/groups/groupsListLogic.ts"),lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/PropertiesTable/index.ts"),scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/persons/PersonPageHeader.tsx"),lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/components/TZLabel/index.tsx"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_groups_GroupsIntroduction__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/groups/GroupsIntroduction.tsx"),lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),scenes_persons_GroupActorDisplay__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/scenes/persons/GroupActorDisplay.tsx"),lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.ts"),lib_lemon_ui_LemonBanner__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),lib_lemon_ui_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/lib/utils.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:Groups,logic:_groupsListLogic__WEBPACK_IMPORTED_MODULE_2__.z,paramsToProps:_ref=>{let{params:{groupTypeIndex}}=_ref;return{groupTypeIndex:parseInt(groupTypeIndex)}}};function Groups(){let{groupTypeIndex}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{groupTypeName:{singular,plural},groups,groupsLoading,search}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_2__.z),{loadGroups,setSearch}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_groupsListLogic__WEBPACK_IMPORTED_MODULE_2__.z),{groupsAccessStatus}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_10__.e);if(void 0===groupTypeIndex)throw new Error("groupTypeIndex is undefined");if(groupsAccessStatus==lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_10__.Q.HasAccess||groupsAccessStatus==lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_10__.Q.HasGroupTypes||groupsAccessStatus==lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_10__.Q.NoAccess)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_4__.l,{activeGroupTypeIndex:parseInt(groupTypeIndex)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(scenes_groups_GroupsIntroduction__WEBPACK_IMPORTED_MODULE_9__.S,{access:groupsAccessStatus})]});const columns=[{title:(0,lib_utils__WEBPACK_IMPORTED_MODULE_16__.fm)(plural),key:"group_key",render:function Render(_,group){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_7__.r,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.group(group.group_type_index.toString(),group.group_key),children:(0,scenes_persons_GroupActorDisplay__WEBPACK_IMPORTED_MODULE_11__.O)(group.group_key,group.group_properties)})}},{title:"First seen",key:"created_at",render:function Render(_,group){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_5__.w,{time:group.created_at})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(scenes_persons_PersonPageHeader__WEBPACK_IMPORTED_MODULE_4__.l,{activeGroupTypeIndex:parseInt(groupTypeIndex)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(lib_lemon_ui_LemonInput_LemonInput__WEBPACK_IMPORTED_MODULE_14__.D,{type:"search",placeholder:`Search for ${plural}`,onChange:setSearch,value:search,"data-attr":"group-search",className:"mb-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_15__.p,{className:"mb-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_6__.g,{columns,rowKey:"group_key",loading:groupsLoading,dataSource:groups.results,expandable:{expandedRowRender:function RenderPropertiesTable(_ref2){let{group_properties}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(lib_components_PropertiesTable__WEBPACK_IMPORTED_MODULE_3__.V,{type:_types__WEBPACK_IMPORTED_MODULE_1__.ll.Group,properties:group_properties})},rowExpandable:_ref3=>{let{group_properties}=_ref3;return!!group_properties&&Object.keys(group_properties).length>0}},pagination:{controlled:!0,onBackward:groups.previous?()=>{loadGroups(groups.previous),window.scrollTo(0,0)}:void 0,onForward:groups.next?()=>{loadGroups(groups.next),window.scrollTo(0,0)}:void 0},emptyState:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(lib_lemon_ui_LemonBanner__WEBPACK_IMPORTED_MODULE_13__.V,{type:"info",children:["No ",plural," found. Make sure to send properties with your ",singular," for them to show up in the list."," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)("a",{href:"https://posthog.com/docs/user-guides/group-analytics",rel:"noopener",target:"_blank",children:"Read more here."})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_12__.O,{language:lib_components_CodeSnippet__WEBPACK_IMPORTED_MODULE_12__.S.JavaScript,wrap:!0,children:`posthog.group('${singular}', 'id:5', {\n    name: 'Awesome ${singular}',\n    value: 11\n});`})]})})]})}try{Groups.displayName="Groups",Groups.__docgenInfo={description:"",displayName:"Groups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/Groups.tsx#Groups"]={docgenInfo:Groups.__docgenInfo,name:"Groups",path:"frontend/src/scenes/groups/Groups.tsx#Groups"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/persons/PersonPageHeader.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>PersonPageHeader});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function GroupsTabs(_ref){let{activeGroupTypeIndex}=_ref;const{groupTypes,aggregationLabel}=(0,index_esm.useValues)(groupsModel.$),{groupsAccessStatus}=(0,index_esm.useValues)(groupsAccessLogic.e),showGroupsIntroductionPage=[groupsAccessLogic.Q.HasAccess,groupsAccessLogic.Q.HasGroupTypes,groupsAccessLogic.Q.NoAccess].includes(groupsAccessStatus);return(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:activeGroupTypeIndex,tabs:[{key:-1,label:"Persons",link:urls.j.persons()},...showGroupsIntroductionPage?[{key:0,label:"Groups",link:urls.j.groups(0)}]:Array.from(groupTypes.values()).map((groupType=>({label:(0,utils.fm)(aggregationLabel(groupType.group_type_index).plural),key:groupType.group_type_index,link:urls.j.groups(groupType.group_type_index)})))]})}try{GroupsTabs.displayName="GroupsTabs",GroupsTabs.__docgenInfo={description:"",displayName:"GroupsTabs",props:{activeGroupTypeIndex:{defaultValue:null,description:"",name:"activeGroupTypeIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/GroupsTabs.tsx#GroupsTabs"]={docgenInfo:GroupsTabs.__docgenInfo,name:"GroupsTabs",path:"frontend/src/scenes/groups/GroupsTabs.tsx#GroupsTabs"})}catch(__react_docgen_typescript_loader_error){}function PersonPageHeader(_ref){let{activeGroupTypeIndex}=_ref;const{showGroupsOptions}=(0,index_esm.useValues)(groupsModel.$);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:"Persons"+(showGroupsOptions?" & Groups":""),caption:`A catalog of your product's end users${showGroupsOptions?" and groups":""}.`}),showGroupsOptions&&(0,jsx_runtime.jsx)(GroupsTabs,{activeGroupTypeIndex})]})}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{activeGroupTypeIndex:{defaultValue:null,description:"",name:"activeGroupTypeIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}}}]);