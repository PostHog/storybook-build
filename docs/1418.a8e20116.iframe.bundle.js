"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[1418],{"./frontend/src/lib/hooks/useAsyncHandler.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>useAsyncHandler});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");function useAsyncHandler(onEvent){let[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),onEventWrapper=onEvent?e=>{if(onEvent){let result=onEvent(e);result instanceof Promise&&(setLoading(!0),result.finally(()=>setLoading(!1)))}}:void 0;return{loading:loading,onEvent:onEventWrapper}}},"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SessionsRecordings:()=>SessionsRecordings,scene:()=>scene});var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),authorizedUrlListLogic=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),VersionCheckerBanner=__webpack_require__("./frontend/src/lib/components/VersionChecker/VersionCheckerBanner.tsx"),useAsyncHandler=__webpack_require__("./frontend/src/lib/hooks/useAsyncHandler.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),eventUsageLogic=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),NotebookSelectButton=__webpack_require__("./frontend/src/scenes/notebooks/NotebookSelectButton/NotebookSelectButton.tsx"),sceneLogic=__webpack_require__("./frontend/src/scenes/sceneLogic.ts"),AndroidRecordingPromptBanner=__webpack_require__("./frontend/src/scenes/session-recordings/mobile-replay/AndroidRecordingPromptBanner.tsx"),sessionRecordingsPlaylistLogic=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsPlaylistLogic.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),sidePanelSettingsLogic=__webpack_require__("./frontend/src/layout/navigation-3000/sidepanel/panels/sidePanelSettingsLogic.tsx"),types=__webpack_require__("./frontend/src/types.ts"),PayGatePage=__webpack_require__("./frontend/src/lib/components/PayGatePage/PayGatePage.tsx"),LemonFileInput=__webpack_require__("./frontend/src/lib/lemon-ui/LemonFileInput/index.ts"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),SessionRecordingPlayer=__webpack_require__("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),sessionRecordingFilePlaybackLogic=__webpack_require__("./frontend/src/scenes/session-recordings/file-playback/sessionRecordingFilePlaybackLogic.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SessionRecordingFilePlayback(){let{loadFromFile,resetSessionRecording}=(0,index_esm.useActions)(sessionRecordingFilePlaybackLogic.ie),{sessionRecording,sessionRecordingLoading,playerKey}=(0,index_esm.useValues)(sessionRecordingFilePlaybackLogic.ie),{hasAvailableFeature}=(0,index_esm.useValues)(userLogic.userLogic),filePlaybackEnabled=hasAvailableFeature(types.P$.RECORDINGS_FILE_EXPORT),dropRef=(0,react.useRef)(null);return filePlaybackEnabled?(0,jsx_runtime.jsx)("div",{children:sessionRecordingLoading?(0,jsx_runtime.jsx)(Spinner.t,{}):sessionRecording?(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2 h-screen pb-4",children:[(0,jsx_runtime.jsx)(LemonBanner.V,{type:"info",action:{onClick:()=>resetSessionRecording(),children:"Load a different recording"},children:"You are viewing a recording loaded from a file."}),(0,jsx_runtime.jsx)(SessionRecordingPlayer.d,{sessionRecordingId:"",playerKey:playerKey})]}):(0,jsx_runtime.jsx)("div",{ref:dropRef,className:"w-full border rounded p-20 text-muted-alt flex flex-col items-center justify-center",children:(0,jsx_runtime.jsx)(LemonFileInput.m,{accept:"application/json",multiple:!1,onChange:files=>loadFromFile(files[0]),alternativeDropTargetRef:dropRef,callToAction:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-2 font-semibold",children:[(0,jsx_runtime.jsx)(icons.bn5,{className:"text-2xl"})," Load recording"]}),(0,jsx_runtime.jsx)("div",{children:"Drag and drop your exported recording here or click to open the file browser."})]})})})}):(0,jsx_runtime.jsx)(PayGatePage.s,{featureKey:types.P$.RECORDINGS_FILE_EXPORT,featureName:"Recording Exports",header:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Export and playback ",(0,jsx_runtime.jsx)("span",{className:"highlight",children:"Recordings from file"}),"!"]}),caption:"Store your recordings outside of PostHog wherever you like.",docsLink:"https://posthog.com/docs/user-guides/session-recordings"})}var playlistUtils=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/playlistUtils.ts"),SessionRecordingsPlaylist=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),apps_common_src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),DateFilter=__webpack_require__("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),MemberSelect=__webpack_require__("./frontend/src/lib/components/MemberSelect.tsx"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),kea_loaders_lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),router_utils=__webpack_require__("./frontend/src/lib/utils/router-utils.ts");let DEFAULT_PLAYLIST_FILTERS={createdBy:"All users",page:1,dateFrom:"all"},savedSessionRecordingPlaylistsLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic",key]),(0,index_esm.props)({}),(0,index_esm.key)(props=>props.tab),(0,index_esm.connect)({actions:[eventUsageLogic.vx,["reportRecordingPlaylistCreated"]]}),(0,index_esm.actions)(()=>({setSavedPlaylistsFilters:filters=>({filters}),loadPlaylists:!0,updatePlaylist:(shortId,properties)=>({shortId,properties}),deletePlaylist:playlist=>({playlist}),duplicatePlaylist:playlist=>({playlist})})),(0,index_esm.reducers)(()=>({filters:[DEFAULT_PLAYLIST_FILTERS,{setSavedPlaylistsFilters:(state,_ref)=>{let{filters}=_ref;return(0,utils.hO)({...state||{},...filters,..."page"in filters?{}:{page:1}})}}],loadPlaylistsFailed:[!1,{loadPlaylists:()=>!1,loadPlaylistsSuccess:()=>!1,loadPlaylistsFailure:()=>!0}]})),(0,kea_loaders_lib.loaders)(_ref2=>{let{values,actions}=_ref2;return{playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:async(_,breakpoint)=>{var _filters$order,_filters$dateTo;null!==values.playlists.filters&&await breakpoint(300);let filters={...values.filters},createdBy="All users"===filters.createdBy?void 0:filters.createdBy,params={limit:30,offset:Math.max(0,(filters.page-1)*30),order:null!==(_filters$order=filters.order)&&void 0!==_filters$order?_filters$order:"-last_modified_at",created_by:null!=createdBy?createdBy:void 0,search:filters.search||void 0,date_from:filters.dateFrom&&"all"!=filters.dateFrom?filters.dateFrom:void 0,date_to:null!==(_filters$dateTo=filters.dateTo)&&void 0!==_filters$dateTo?_filters$dateTo:void 0,pinned:!!filters.pinned||void 0},response=await api.ZP.recordings.listPlaylists((0,utils.oZ)(params));return breakpoint(),response},updatePlaylist:async(_ref3,breakpoint)=>{let{shortId,properties}=_ref3;await breakpoint(100);let updatedPlaylist=await api.ZP.recordings.updatePlaylist(shortId,properties);breakpoint();let index=values.playlists.results.findIndex(x=>x.short_id===updatedPlaylist.short_id);return index>-1&&(values.playlists.results[index]=updatedPlaylist),{...values.playlists,results:[...values.playlists.results]}},deletePlaylist:async _ref4=>{let{playlist}=_ref4;return await (0,playlistUtils.l8)(playlist,()=>actions.loadPlaylists()),values.playlists.results=values.playlists.results.filter(x=>x.short_id!==playlist.short_id),values.playlists},duplicatePlaylist:async(_ref5,breakpoint)=>{let{playlist}=_ref5;await breakpoint(100);let{id,short_id,...partialPlaylist}=playlist;partialPlaylist.name=partialPlaylist.name?partialPlaylist.name+" (copy)":"";let newPlaylist=await (0,playlistUtils.cg)(partialPlaylist);return actions.reportRecordingPlaylistCreated("duplicate"),breakpoint(),newPlaylist&&(src.lemonToast.success("Playlist duplicated successfully"),values.playlists.results=[newPlaylist,...values.playlists.results]),values.playlists}}}}),(0,index_esm.listeners)(_ref6=>{let{actions}=_ref6;return{setSavedPlaylistsFilters:()=>{actions.loadPlaylists()}}}),(0,index_esm.selectors)(_ref7=>{let{actions}=_ref7;return{sorting:[s=>[s.filters],filters=>filters.order?filters.order.startsWith("-")?{columnKey:filters.order.slice(1),order:-1}:{columnKey:filters.order,order:1}:{columnKey:"last_modified_at",order:-1}],pagination:[s=>[s.filters,s.playlists],(filters,playlists)=>({controlled:!0,pageSize:30,currentPage:filters.page,entryCount:playlists.count,onBackward:playlists.previous?()=>actions.setSavedPlaylistsFilters({page:filters.page-1}):void 0,onForward:playlists.next?()=>actions.setSavedPlaylistsFilters({page:filters.page+1}):void 0})]}}),(0,lib.actionToUrl)(_ref8=>{let{values}=_ref8,changeUrl=()=>{if((0,router_utils.s)(lib.router.values.location.pathname)===urls.j.replay(types.yd.Playlists)){let nextValues=values.filters,urlValues=(0,utils.hO)(lib.router.values.searchParams);if(!(0,utils.h0)(nextValues,urlValues))return[urls.j.replay(types.yd.Playlists),nextValues,{},{replace:!1}]}};return{loadPlaylists:changeUrl,setSavedPlaylistsFilters:changeUrl}}),(0,lib.urlToAction)(_ref9=>{let{actions,values}=_ref9;return{[urls.j.replay(types.yd.Playlists)]:(_,searchParams)=>{let currentFilters=values.filters,nextFilters=(0,utils.hO)(searchParams);(0,utils.h0)(currentFilters,nextFilters)||actions.setSavedPlaylistsFilters(nextFilters)}}}),(0,index_esm.afterMount)(_ref10=>{let{actions}=_ref10;actions.loadPlaylists()})]);function SavedSessionRecordingPlaylistsEmptyState(){let{guardAvailableFeature}=(0,index_esm.useActions)(sceneLogic.k),playlistsLogic=savedSessionRecordingPlaylistsLogic({tab:types.yd.Recent}),{playlists,loadPlaylistsFailed}=(0,index_esm.useValues)(playlistsLogic);return loadPlaylistsFailed?(0,jsx_runtime.jsx)(LemonBanner.V,{type:"error",children:"Error while trying to load playlist."}):(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-248 mt-12 flex flex-col items-center",children:[(0,jsx_runtime.jsx)("h2",{className:"text-xl",children:"There are no playlists that match these filters"}),(0,jsx_runtime.jsx)("p",{className:"text-muted",children:"Once you create a playlist, it will show up here."}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"add-session-playlist-button-empty-state",icon:(0,jsx_runtime.jsx)(icons.SC9,{}),onClick:()=>guardAvailableFeature(types.P$.RECORDINGS_PLAYLISTS,"recording playlists","Playlists allow you to save certain session recordings as a group to easily find and watch them again in the future. You've unfortunately run out of playlists on your current subscription plan.",()=>void(0,playlistUtils.cg)({},!0),void 0,playlists.count),children:"New playlist"})]})})}function SavedSessionRecordingPlaylists(_ref2){let{tab}=_ref2,logic=savedSessionRecordingPlaylistsLogic({tab}),{playlists,playlistsLoading,filters,sorting,pagination}=(0,index_esm.useValues)(logic),{setSavedPlaylistsFilters,updatePlaylist,duplicatePlaylist,deletePlaylist}=(0,index_esm.useActions)(logic),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref3){let{short_id}=_ref3;return(0,jsx_runtime.jsx)(src.LemonButton,{size:"small",onClick:()=>updatePlaylist(short_id,{pinned:!pinned}),icon:pinned?(0,jsx_runtime.jsx)(icons.YW7,{}):(0,jsx_runtime.jsx)(icons.eY2,{})})}},{title:"Name",dataIndex:"name",render:function Render(name,_ref){let{short_id,derived_name,description}=_ref;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Link,{className:(0,clsx_m.default)("font-semibold",!name&&"italic"),to:urls.j.replayPlaylist(short_id),children:name||derived_name||"Unnamed"}),description?(0,jsx_runtime.jsx)("div",{className:"truncate",children:description}):null]})}},{...(0,columnUtils.JB)(),width:0},{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",width:0,render:function Render(last_modified_at){return(0,jsx_runtime.jsx)("div",{children:last_modified_at&&"string"==typeof last_modified_at&&(0,jsx_runtime.jsx)(apps_common_src.TZLabel,{time:last_modified_at})})}},{width:0,render:function Render(_,playlist){return(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.LemonButton,{onClick:()=>duplicatePlaylist(playlist),fullWidth:!0,"data-attr":"duplicate-playlist",loading:playlistsLoading,children:"Duplicate"}),(0,jsx_runtime.jsx)(src.LemonDivider,{}),(0,jsx_runtime.jsx)(src.LemonButton,{status:"danger",onClick:()=>deletePlaylist(playlist),fullWidth:!0,loading:playlistsLoading,children:"Delete playlist"})]})})}}];return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[(0,jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:value=>setSavedPlaylistsFilters({search:value||void 0}),value:filters.search||""}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)(src.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:filters.pinned,size:"small",type:"secondary",status:"alt",center:!0,onClick:()=>setSavedPlaylistsFilters({pinned:!filters.pinned}),icon:filters.pinned?(0,jsx_runtime.jsx)(icons.YW7,{}):(0,jsx_runtime.jsx)(icons.eY2,{}),children:"Pinned"})}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"Last modified:"}),(0,jsx_runtime.jsx)(DateFilter.f,{disabled:!1,dateFrom:filters.dateFrom,dateTo:filters.dateTo,onChange:(fromDate,toDate)=>setSavedPlaylistsFilters({dateFrom:fromDate,dateTo:null!=toDate?toDate:void 0}),makeLabel:key=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(icons.jt6,{}),(0,jsx_runtime.jsxs)("span",{className:"hide-when-small",children:[" ",key]})]}),max:21})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"Created by:"}),(0,jsx_runtime.jsx)(MemberSelect.a,{value:"All users"===filters.createdBy?null:filters.createdBy,onChange:user=>setSavedPlaylistsFilters({createdBy:user?.id||"All users"})})]})]})]}),!playlistsLoading&&playlists.count<1?(0,jsx_runtime.jsx)(SavedSessionRecordingPlaylistsEmptyState,{}):(0,jsx_runtime.jsx)(src.LemonTable,{loading:playlistsLoading,columns:columns,dataSource:playlists.results,pagination:pagination,noSortingCancellation:!0,sorting:sorting,onSort:newSorting=>setSavedPlaylistsFilters({order:newSorting?`${-1===newSorting.order?"-":""}${newSorting.columnKey}`:void 0}),rowKey:"id",loadingSkeletonRows:30,nouns:["playlist","playlists"]})]})}var sessionRecordingsLogic=__webpack_require__("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts");function SessionsRecordings(){let{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{tab}=(0,index_esm.useValues)(sessionRecordingsLogic.Jp),recordingsDisabled=currentTeam&&!currentTeam?.session_recording_opt_in,{reportRecordingPlaylistCreated}=(0,index_esm.useActions)(eventUsageLogic.vx),{guardAvailableFeature}=(0,index_esm.useActions)(sceneLogic.k),playlistsLogic=savedSessionRecordingPlaylistsLogic({tab:types.yd.Recent}),{playlists}=(0,index_esm.useValues)(playlistsLogic),{openSettingsPanel}=(0,index_esm.useActions)(sidePanelSettingsLogic.A),theAuthorizedUrlsLogic=(0,authorizedUrlListLogic.zl)({actionId:null,type:authorizedUrlListLogic.uw.RECORDING_DOMAINS}),{suggestions,authorizedUrls}=(0,index_esm.useValues)(theAuthorizedUrlsLogic),mightBeRefusingRecordings=suggestions.length>0&&authorizedUrls.length>0,newPlaylistHandler=(0,useAsyncHandler.N)(async()=>{await (0,playlistUtils.cg)({},!0),reportRecordingPlaylistCreated("new")}),{filters,totalFiltersCount}=(0,index_esm.useValues)((0,sessionRecordingsPlaylistLogic.YV)({updateSearchParams:!0})),saveFiltersPlaylistHandler=(0,useAsyncHandler.N)(async()=>{await (0,playlistUtils.cg)({filters},!0),reportRecordingPlaylistCreated("filters")});return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[tab===types.yd.Recent&&!recordingsDisabled&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(NotebookSelectButton.R,{resource:{type:types.Cz.RecordingPlaylist,attrs:{filters:filters}},type:"secondary"}),(0,jsx_runtime.jsx)(src.LemonButton,{fullWidth:!1,"data-attr":"session-recordings-filters-save-as-playlist",type:"primary",onClick:e=>guardAvailableFeature(types.P$.RECORDINGS_PLAYLISTS,"recording playlists","Playlists allow you to save certain session recordings as a group to easily find and watch them again in the future. You've unfortunately run out of playlists on your current subscription plan.",()=>{0===totalFiltersCount?newPlaylistHandler.onEvent?.(e):saveFiltersPlaylistHandler.onEvent?.(e)},void 0,playlists.count),children:"Save as playlist"}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"secondary",icon:(0,jsx_runtime.jsx)(icons.iCC,{}),onClick:()=>openSettingsPanel({sectionId:"project-replay"}),children:"Configure"})]}),tab===types.yd.Playlists&&(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:e=>guardAvailableFeature(types.P$.RECORDINGS_PLAYLISTS,"recording playlists","Playlists allow you to save certain session recordings as a group to easily find and watch them again in the future. You've unfortunately run out of playlists on your current subscription plan.",()=>newPlaylistHandler.onEvent?.(e),void 0,playlists.count),"data-attr":"save-recordings-playlist-button",loading:newPlaylistHandler.loading,children:"New playlist"})]})}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:tab,onChange:t=>lib.router.actions.push(urls.j.replay(t)),tabs:Object.values(types.yd).map(replayTab=>({label:(0,sessionRecordingsLogic.$Y)(replayTab),key:replayTab}))}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(VersionCheckerBanner.o,{}),(0,jsx_runtime.jsx)(AndroidRecordingPromptBanner.c,{context:"replay"}),recordingsDisabled?(0,jsx_runtime.jsx)(LemonBanner.V,{type:"info",action:{type:"secondary",icon:(0,jsx_runtime.jsx)(icons.iCC,{}),onClick:()=>openSettingsPanel({sectionId:"project-replay"}),children:"Configure"},children:"Session recordings are currently disabled for this project."}):null,!recordingsDisabled&&mightBeRefusingRecordings?(0,jsx_runtime.jsx)(LemonBanner.V,{type:"warning",action:{type:"secondary",icon:(0,jsx_runtime.jsx)(icons.iCC,{}),onClick:()=>openSettingsPanel({sectionId:"project-replay"}),children:"Configure"},dismissKey:`session-recordings-authorized-domains-warning/${suggestions.join(",")}`,children:"You have unauthorized domains trying to send recordings. To accept recordings from these domains, please check your config."}):null,tab?tab===types.yd.Recent?(0,jsx_runtime.jsx)("div",{className:"SessionRecordingPlaylistHeightWrapper",children:(0,jsx_runtime.jsx)(SessionRecordingsPlaylist.m,{updateSearchParams:!0})}):tab===types.yd.Playlists?(0,jsx_runtime.jsx)(SavedSessionRecordingPlaylists,{tab:types.yd.Playlists}):tab===types.yd.FilePlayback?(0,jsx_runtime.jsx)(SessionRecordingFilePlayback,{}):null:(0,jsx_runtime.jsx)(Spinner.$,{})]})]})}let scene={component:SessionsRecordings,logic:sessionRecordingsLogic.Jp}},"./frontend/src/scenes/session-recordings/mobile-replay/AndroidRecordingPromptBanner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>AndroidRecordingsPromptBanner});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),FlaggedFeature=__webpack_require__("./frontend/src/lib/components/FlaggedFeature.tsx"),supportLogic=__webpack_require__("./frontend/src/lib/components/Support/supportLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),kea_subscriptions_lib=__webpack_require__("./node_modules/.pnpm/kea-subscriptions@3.0.0_kea@3.1.5/node_modules/kea-subscriptions/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),es=__webpack_require__("./node_modules/.pnpm/posthog-js@1.104.2/node_modules/posthog-js/dist/es.js"),schema=__webpack_require__("./frontend/src/queries/schema.ts"),utils=__webpack_require__("./frontend/src/queries/utils.ts");let androidRecordingPromptBannerLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","session-recordings","SessionRecordings"]),(0,index_esm.key)(props=>props.context),(0,index_esm.props)({}),(0,lib.loaders)(_ref=>{let{values}=_ref;return{androidVersions:[[],{loadAndroidLibVersions:async()=>{var _res$results$map;if(values.androidVersions&&values.androidVersions.length>0)return values.androidVersions;let query={kind:schema.OH.HogQLQuery,query:(0,utils.zP)`SELECT properties.$lib_version AS lib_version,
                                       max(timestamp)          AS latest_timestamp,
                                       count(lib_version) as count
                                FROM events
                                WHERE timestamp >= now() - INTERVAL 30 DAY
                                  AND timestamp <= now()
                                  AND properties.$lib = 'posthog-android'
                                GROUP BY lib_version
                                ORDER BY latest_timestamp DESC
                                    limit 10`},res=await api.ZP.query(query);return null!==(_res$results$map=res.results?.map(x=>({version:x[0],count:x[2]})))&&void 0!==_res$results$map?_res$results$map:[]}}]}}),(0,index_esm.reducers)({androidVersions:[[],{persist:!0},{loadAndroidLibVersionsSuccess:(_,_ref2)=>{let{androidVersions}=_ref2;return null!=androidVersions?androidVersions:[]}}]}),(0,index_esm.selectors)({shouldPromptUser:[s=>[s.androidVersions],androidVersions=>(androidVersions?.length||0)>0]}),(0,kea_subscriptions_lib.subscriptions)(_ref3=>{let{values,props}=_ref3;return{shouldPromptUser:(value,oldvalue)=>{!0===value&&!1===oldvalue&&es.ZP.capture("visitor has android events",{androidVersions:values.androidVersions,scene:props.context})}}}),(0,index_esm.afterMount)(_ref4=>{let{actions}=_ref4;actions.loadAndroidLibVersions()})]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function AndroidRecordingsPromptBanner(props){let{shouldPromptUser}=(0,index_esm.useValues)(androidRecordingPromptBannerLogic(props)),{openSupportForm}=(0,index_esm.useActions)(supportLogic.Pw);return shouldPromptUser?(0,jsx_runtime.jsx)(FlaggedFeature.P,{flag:constants.y8.RECRUIT_ANDROID_MOBILE_BETA_TESTERS,match:!0,children:(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",dismissKey:"android-recording-beta-prompt",action:{children:"Learn more",to:"https://github.com/PostHog/posthog-android/blob/main/USAGE.md#android-session-recording",targetBlank:!0},className:"mb-4",children:[(0,jsx_runtime.jsx)("h3",{className:"mb-0 ml-2",children:"Android Session Replay"}),(0,jsx_runtime.jsxs)("div",{className:"ml-2",children:["We're recruiting beta testers for Android Session Replay."," ",(0,jsx_runtime.jsx)(Link.r,{onClick:()=>openSupportForm({kind:"support",target_area:"session_replay"}),children:"Contact support"})," ","to join the test and earn PostHog merch."]})]})}):null}}}]);
//# sourceMappingURL=1418.a8e20116.iframe.bundle.js.map