(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx":function(fe,F,e){"use strict";e.r(F),e.d(F,"scene",function(){return ns}),e.d(F,"SessionRecordingsPlaylistScene",function(){return Qe}),e.d(F,"SessionRecordingsPlaylist",function(){return ue});var pe=e("./node_modules/core-js/modules/es.function.name.js"),ss=e("./node_modules/core-js/modules/es.symbol.js"),Ke=e("./node_modules/core-js/modules/es.symbol.description.js"),ts=e("./node_modules/core-js/modules/es.array.concat.js"),Be=e("./node_modules/core-js/modules/es.array.map.js"),X=e("./node_modules/react/index.js"),O=e("./node_modules/kea/lib/index.esm.js"),he=e("./frontend/src/lib/utils.tsx"),Q=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),We=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Pe=e.n(We),ve=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss"),ge=e.n(ve),W={};W.insert="head",W.singleton=!1;var $e=Pe()(ge.a,W),oe=ge.a.locals||{},Re=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),Z=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),U=e("./frontend/@posthog/lemon-ui/src/index.ts"),$=e("./frontend/src/lib/components/icons.tsx"),_e=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ve=e.n(_e),be=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),V=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),xe=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Ye=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),ie=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),k=e("./frontend/src/types.ts"),Ee=e("./node_modules/fast-deep-equal/index.js"),q=e.n(Ee),s=e("./node_modules/react/jsx-runtime.js"),Se=function(t){var i,c;return(i=t.actions)!==null&&i!==void 0&&i.length||(c=t.events)!==null&&c!==void 0&&c.length?{actions:t.actions,events:t.events}:{actions:[],events:[],new_entity:[{id:"empty",type:k.o.NEW_ENTITY,order:0,name:"empty"}]}};function ee(r){var t=r.filters,i=r.setFilters,c=r.showPropertyFilters,m=Object(X.useState)(Se(t)),v=Ve()(m,2),u=v[0],p=v[1];return Object(X.useEffect)(function(){(!q()(t.actions,u.actions)||!q()(t.events,u.events))&&i({actions:u.actions,events:u.events})},[u]),Object(X.useEffect)(function(){(!q()(t.actions,u.actions)||!q()(t.events,u.events))&&p(Se(t))},[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"flex-1 border rounded p-4",children:[Object(s.jsxs)("div",{className:"space-y-2",children:[Object(s.jsx)(ie.a,{info:"Show recordings where all of the events or actions listed below happen.",children:"Filter by events and actions"}),Object(s.jsx)(be.a,{bordered:!0,filters:u,setFilters:function(g){p(g)},typeKey:"session-recordings",mathAvailability:Ye.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[V.a.Actions,V.a.Events],propertiesTaxonomicGroupTypes:[V.a.EventProperties,V.a.EventFeatureFlags,V.a.Elements],propertyFiltersPopover:!0})]}),c&&Object(s.jsxs)("div",{className:"mt-4 space-y-2",children:[Object(s.jsx)(ie.a,{info:"Show recordings by persons who match the set criteria",children:"Filter by persons and cohorts"}),Object(s.jsx)(xe.a,{pageKey:"session-recordings",taxonomicGroupTypes:[V.a.PersonProperties,V.a.Cohorts],propertyFilters:t.properties,onChange:function(g){i({properties:g})}})]})]})})}try{ee.displayName="SessionRecordingsFilters",ee.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"RecordingFilters"}},setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(filters: RecordingFilters) => void"}},showPropertyFilters:{defaultValue:null,description:"",name:"showPropertyFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"]={docgenInfo:ee.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"})}catch(r){}var se=e("./node_modules/clsx/dist/clsx.m.js"),le=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),Ge=e("./frontend/src/lib/components/LemonTable/LemonTableLoader.tsx"),A=e("./node_modules/core-js/modules/es.regexp.exec.js"),Ce=e("./node_modules/core-js/modules/es.string.split.js"),De=e("./node_modules/core-js/modules/es.object.keys.js"),w=e("./frontend/src/lib/components/PropertyIcon.tsx"),z=e("./frontend/src/lib/components/Tooltip.tsx"),we=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Fe=e("./frontend/src/lib/components/TimezoneAware/index.tsx");function te(r){var t,i=r.recording,c=r.isActive,m=r.onClick,v=r.onPropertyClick,u=r.recordingProperties,p=r.recordingPropertiesLoading,y=Object(he.n)(i.recording_duration),g=y.split(":"),x=Object(se.a)("SessionRecordingsPlaylist__list-item__property-icon text-base text-muted-alt",!c&&"opacity-75"),J=["$browser","$device_type","$os","$geoip_country_code"],C=u&&Object.keys(u).length>0?u:((t=i.person)===null||t===void 0?void 0:t.properties)||{},Y=Object(s.jsx)("div",{className:"flex flex-row flex-nowrap shrink-0 gap-1 h-6",children:p?Object(s.jsx)(le.a,{className:"w-18 my-1"}):J.map(function(K){var ne=K==="$device_type"?(C==null?void 0:C.$device_type)||(C==null?void 0:C.$initial_device_type):C==null?void 0:C[K];return Object(s.jsx)(w.b,{onClick:v,className:x,property:K,value:ne,tooltipTitle:function(E,D){return Object(s.jsxs)("div",{className:"text-center",children:["Click to filter for",Object(s.jsx)("br",{}),Object(s.jsx)("span",{className:"font-medium",children:D!=null?D:"N/A"})]})}},K)})});return Object(s.jsxs)("li",{className:Object(se.a)("SessionRecordingsPlaylist__list-item","flex flex-row py-2 pr-4 pl-0 cursor-pointer relative overflow-hidden",c&&"bg-primary-highlight font-semibold"),onClick:function(){return m()},children:[Object(s.jsx)("div",{className:"w-2 h-2 mx-2",children:i.viewed?null:Object(s.jsx)(z.a,{title:"Indicates the recording has not been watched yet",children:Object(s.jsx)("div",{className:"w-2 h-2 mt-2 rounded-full bg-primary-light","aria-label":"unwatched-recording-label"})})}),Object(s.jsxs)("div",{className:"grow",children:[Object(s.jsxs)("div",{className:"flex items-center justify-between",children:[Object(s.jsx)("div",{className:"truncate font-medium text-primary ph-no-capture",children:Object(we.b)(i.person,25)}),Object(s.jsx)("div",{className:"flex-1"}),Y]}),Object(s.jsxs)("div",{className:"flex items-center justify-between",children:[Object(s.jsx)(Fe.b,{className:"overflow-hidden text-ellipsis",time:i.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"}),Object(s.jsxs)("div",{className:"flex items-center flex-1 justify-end font-semibold",children:[Object(s.jsx)($.IconSchedule,{className:x}),Object(s.jsxs)("span",{children:[Object(s.jsxs)("span",{className:Object(se.a)(g[0]==="00"&&"opacity-50 font-normal"),children:[g[0],":"]}),Object(s.jsxs)("span",{className:Object(se.a)({"opacity-50 font-normal":g[0]==="00"&&g[1]==="00"}),children:[g[1],":"]}),g[2]]})]})]})]})]},i.id)}try{te.displayName="SessionRecordingPlaylistItem",te.__docgenInfo={description:"",displayName:"SessionRecordingPlaylistItem",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}},recordingProperties:{defaultValue:null,description:"",name:"recordingProperties",required:!1,type:{name:"Record<string, any>"}},recordingPropertiesLoading:{defaultValue:null,description:"",name:"recordingPropertiesLoading",required:!0,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},onPropertyClick:{defaultValue:null,description:"",name:"onPropertyClick",required:!0,type:{name:"(property: string, value?: string | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylistItem.tsx#SessionRecordingPlaylistItem"]={docgenInfo:te.__docgenInfo,name:"SessionRecordingPlaylistItem",path:"frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylistItem.tsx#SessionRecordingPlaylistItem"})}catch(r){}var je=e("./frontend/src/lib/components/EditableField/EditableField.tsx"),Ie=e("./frontend/src/lib/components/PageHeader.tsx"),Le=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),ae=e("./frontend/src/lib/utils/eventUsageLogic.ts"),ze=e("./node_modules/antd/es/row/index.js"),ce=e("./node_modules/antd/es/space/index.js"),ye=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),I=e("./frontend/src/lib/components/Popup/Popup.tsx"),de=e("./node_modules/core-js/modules/es.array.slice.js"),He=e("./node_modules/core-js/modules/es.array.iterator.js"),Je=e("./node_modules/core-js/modules/es.object.to-string.js"),Xe=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),n=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),o;(function(r){r.SECONDS="seconds",r.MINUTES="minutes",r.HOURS="hours"})(o||(o={}));var a=Object(O.kea)({path:function(t){return["scenes","session-recordings","DurationFilterLogic",t]},key:function(t){return t.pageKey||"global"},props:{},actions:{setValue:function(t){return{value:t}},setIsOpen:function(t){return{isOpen:t}},setOperator:function(t){return{operator:t}}},reducers:function(t){var i,c,m=t.props;return{operator:[m==null||(i=m.initialFilter)===null||i===void 0?void 0:i.operator,{setOperator:function(u,p){var y=p.operator;return y}}],value:[m==null||(c=m.initialFilter)===null||c===void 0?void 0:c.value,{setValue:function(u,p){var y=p.value;return y}}],isOpen:[!1,{setIsOpen:function(u,p){var y=p.isOpen;return y}}]}},selectors:{durationString:[function(r){return[r.operator,r.value]},function(r,t){var i="";r===k.N.GreaterThan?i+="> ":i+="< ";var c=Object(n.b)(t||0);return i+=c.timeValue||0,c.timeValue===1?i+=" "+c.unit.slice(0,-1):i+=" "+c.unit,i}]},listeners:function(t){var i=t.props,c=t.values,m=function(u){var p=u.value,y=u.operator;i.onChange({operator:y||c.operator,value:p||c.value||0,type:"recording",key:"duration"})};return{setValue:function(u){var p=u.value;return m({value:p})},setOperator:function(u){var p=u.operator;return m({operator:p})}}}});function l(r){var t=r.initialFilter,i=r.onChange,c=r.pageKey,m=a({initialFilter:t,onChange:i,pageKey:c}),v=Object(O.useActions)(m),u=v.setValue,p=v.setIsOpen,y=v.setOperator,g=Object(O.useValues)(m),x=g.durationString,J=g.value,C=g.operator,Y=g.isOpen;return Object(s.jsx)(I.a,{visible:Y,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return p(!1)},overlay:Object(s.jsx)(ze.a,{children:Object(s.jsxs)(ce.b,{children:[Object(s.jsx)(ye.a,{operator:C,operators:[k.N.GreaterThan,k.N.LessThan],onChange:function(ne){y(ne)}}),Object(s.jsx)(n.a,{onChange:u,initialValue:J||0})]})}),children:Object(s.jsx)(U.LemonButton,{type:"secondary",status:"stealth",size:"small",onClick:function(){p(!0)},children:x})})}try{l.displayName="DurationFilter",l.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"]={docgenInfo:l.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"})}catch(r){}var d=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),f=e.n(d),h=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),R=e.n(h),L=e("./node_modules/@babel/runtime/regenerator/index.js"),j=e.n(L),P=e("./node_modules/kea-loaders/lib/index.js"),b=e("./frontend/src/lib/api.ts"),S=e("./frontend/src/scenes/urls.ts"),B=e("./node_modules/kea-router/lib/index.js"),H=Object(O.kea)([Object(O.path)(function(r){return["scenes","session-recordings","playlist","sessionRecordingsPlaylistLogic",r]}),Object(O.props)({}),Object(O.key)(function(r){return r.shortId}),Object(O.actions)({loadPlaylist:!0,setFilters:function(t){return{filters:t}},saveChanges:!0}),Object(P.loaders)(function(r){var t=r.props;return{playlist:[null,{loadPlaylist:function(){var i=R()(j.a.mark(function m(){return j.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",b.b.recordings.getPlaylist(t.shortId));case 1:case"end":return u.stop()}},m)}));function c(){return i.apply(this,arguments)}return c}(),updatePlaylist:function(){var i=R()(j.a.mark(function m(v,u){var p;return j.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,u(100);case 2:return p=b.b.recordings.updatePlaylist(t.shortId,v),u(),U.lemonToast.success("Playlist updated successfully"),g.abrupt("return",p);case 6:case"end":return g.stop()}},m)}));function c(m,v){return i.apply(this,arguments)}return c}()}]}}),Object(O.reducers)(function(r){return f()(r),{filters:[null,{loadPlaylistSuccess:function(i,c){var m=c.playlist;return m.filters||null},setFilters:function(i,c){var m=c.filters;return m}}]}}),Object(O.listeners)(function(r){var t=r.actions,i=r.values;return{saveChanges:function(){var c=R()(j.a.mark(function v(){return j.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:t.updatePlaylist({filters:i.filters||void 0});case 1:case"end":return p.stop()}},v)}));function m(){return c.apply(this,arguments)}return m}()}}),Object(B.beforeUnload)(function(r){var t=r.values,i=r.actions;return{enabled:function(){return t.hasChanges},message:"Leave playlist? Changes you made will be discarded.",onConfirm:function(){var m;i.setFilters(((m=t.playlist)===null||m===void 0?void 0:m.filters)||null)}}}),Object(O.selectors)(function(r){return f()(r),{breadcrumbs:[function(t){return[t.playlist]},function(t){return[{name:"Recording Playlists",path:S.a.sessionRecordings(k.X.Playlists)},{name:(t==null?void 0:t.name)||"Untitled Playlist",path:S.a.sessionRecordingPlaylist((t==null?void 0:t.short_id)||"")}]}],hasChanges:[function(t){return[t.playlist,t.filters]},function(t,i){return!q()(t==null?void 0:t.filters,i)}]}}),Object(O.afterMount)(function(r){var t=r.actions;t.loadPlaylist()})]),T=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),N=e("./frontend/src/lib/components/NotFound/index.tsx"),Te=e("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),ns={component:Qe,logic:H,paramsToProps:function(t){var i=t.params.id;return{shortId:i}}};function Qe(){var r=Object(O.useValues)(H),t=r.playlist,i=r.playlistLoading,c=r.hasChanges,m=Object(O.useActions)(H),v=m.updatePlaylist,u=m.setFilters,p=m.saveChanges;return!t&&i?Object(s.jsx)(T.a,{}):t?Object(s.jsxs)("div",{children:[Object(s.jsx)(Ie.a,{title:Object(s.jsx)(je.a,{name:"name",value:t.name||"",placeholder:"Untitled Playlist",onSave:function(g){return v({name:g})},saveOnBlur:!0,maxLength:400,mode:void 0,"data-attr":"playlist-name"}),buttons:Object(s.jsx)("div",{className:"flex justify-between items-center gap-2",children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(U.LemonButton,{type:"primary",disabled:!c,loading:c&&i,onClick:p,children:"Save changes"})})}),caption:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(je.a,{multiline:!0,name:"description",value:t.description||"",placeholder:"Description (optional)",onSave:function(g){return v({description:g})},saveOnBlur:!0,maxLength:400,"data-attr":"playlist-description",compactButtons:!0}),Object(s.jsx)(Te.a,{at:t.last_modified_at,by:t.last_modified_by,className:"mt-2"})]})}),t.short_id?Object(s.jsx)(ue,{logicKey:t.short_id,filters:t.filters,onFiltersChange:u}):null]}):Object(s.jsx)(N.a,{object:"Recording Playlist"})}function ue(r){var t,i,c,m=r.logicKey,v=r.personUUID,u=r.filters,p=r.updateSearchParams,y=r.onFiltersChange,g=Object(Q.c)({key:m,personUUID:v,filters:u,updateSearchParams:p}),x=Object(O.useValues)(g),J=x.sessionRecordings,C=x.sessionRecordingIdToProperties,Y=x.sessionRecordingsResponseLoading,K=x.sessionRecordingsPropertiesResponseLoading,ne=x.hasNext,Me=x.hasPrev,E=x.activeSessionRecording,D=x.filters,rs=x.totalFiltersCount,Ae=x.showFilters,re=Object(O.useActions)(g),os=re.setSelectedRecordingId,Ze=re.loadNext,ke=re.loadPrev,Oe=re.setFilters,qe=re.reportRecordingsListFilterAdded,is=re.setShowFilters,me=Object(X.useRef)(null);Object(X.useEffect)(function(){D!==u&&(y==null||y(D))},[D]);var ls=function(M){var G;os(M.id);var es=me!=null&&(G=me.current)!==null&&G!==void 0&&G.offsetTop?me.current.offsetTop-8:0;window.scrollY>es&&window.scrollTo({left:0,top:es,behavior:"smooth"})},as=function(M,G){Oe(Object(Q.b)(D,M,G))},Ne=(t=D.offset)!==null&&t!==void 0?t:0,Ue=Ne+(Y?Q.a:J.length),cs=Ue?Object(s.jsxs)("div",{className:"flex items-center gap-1",children:[Object(s.jsx)("span",{children:"".concat(Ne+1," - ").concat(Ue)}),Object(s.jsx)(U.LemonButton,{icon:Object(s.jsx)($.IconChevronLeft,{}),status:"stealth",size:"small",disabled:!Me,onClick:function(){ke(),window.scrollTo(0,0)}}),Object(s.jsx)(U.LemonButton,{icon:Object(s.jsx)($.IconChevronRight,{}),status:"stealth",disabled:!ne,size:"small",onClick:function(){Ze(),window.scrollTo(0,0)}})]}):null;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-4",children:[Object(s.jsx)(U.LemonButton,{type:"secondary",size:"small",icon:Object(s.jsx)($.IconWithCount,{count:rs,children:Object(s.jsx)($.IconFilter,{})}),onClick:function(){if(is(!Ae),v){var M=document.querySelectorAll(".entity-filter-row button");M.length>0&&M[0].click()}},children:Ae?"Hide filters":"Filter recordings"}),Object(s.jsxs)("div",{className:"flex items-center gap-4",children:[Object(s.jsx)(Le.a,{dateFrom:(i=D.date_from)!==null&&i!==void 0?i:"-7d",dateTo:(c=D.date_to)!==null&&c!==void 0?c:void 0,onChange:function(M,G){qe(ae.d.DateRange),Oe({date_from:M,date_to:G})},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]}),Object(s.jsxs)("div",{className:"flex gap-2",children:[Object(s.jsx)(ie.a,{children:"Duration"}),Object(s.jsx)(l,{onChange:function(M){qe(ae.d.Duration),Oe({session_recording_duration:M})},initialFilter:D.session_recording_duration,pageKey:v?"person-".concat(v):"session-recordings"})]})]})]}),Object(s.jsxs)("div",{ref:me,className:"SessionRecordingsPlaylist","data-attr":"session-recordings-playlist",children:[Object(s.jsxs)("div",{className:"SessionRecordingsPlaylist__left-column space-y-4",children:[Ae?Object(s.jsx)(ee,{filters:D,setFilters:Oe,showPropertyFilters:!v}):null,Object(s.jsxs)("div",{className:"w-full overflow-hidden border rounded",children:[Object(s.jsxs)("div",{className:"relative flex justify-between items-center bg-mid py-3 px-4 border-b",children:[Object(s.jsx)("span",{className:"font-bold uppercase text-xs my-1 tracking-wide",children:"Recent Recordings"}),cs,Object(s.jsx)(Ge.a,{loading:Y})]}),J.length?Object(s.jsx)("ul",{className:Object(se.a)(Y?"opacity-50":""),children:J.map(function(_,M){return Object(s.jsxs)(s.Fragment,{children:[M>0&&Object(s.jsx)("div",{className:"border-t"}),Object(s.jsx)(te,{recording:_,recordingProperties:C[_.id],recordingPropertiesLoading:K,onClick:function(){return ls(_)},onPropertyClick:as,isActive:(E==null?void 0:E.id)===_.id},_.id)]})})}):Y?Object(s.jsx)(s.Fragment,{children:Object(he.vb)(Q.a).map(function(_){return Object(s.jsxs)("div",{className:"p-4 space-y-2 border-b",children:[Object(s.jsx)(le.a,{className:"w-1/2"}),Object(s.jsx)(le.a,{className:"w-1/3"})]},_)})}):Object(s.jsx)("p",{className:"text-muted-alt m-4",children:"No matching recordings found"})]}),Object(s.jsxs)("div",{className:"flex justify-between items-center",children:[Object(s.jsx)(U.LemonButton,{icon:Object(s.jsx)($.IconChevronLeft,{}),type:"secondary",disabled:!Me,onClick:function(){ke(),window.scrollTo(0,0)},children:"Previous"}),Object(s.jsx)("span",{children:"".concat(Ne+1," - ").concat(Ue)}),Object(s.jsx)(U.LemonButton,{icon:Object(s.jsx)($.IconChevronRight,{}),type:"secondary",disabled:!ne,onClick:function(){Ze(),window.scrollTo(0,0)},children:"Next"})]})]}),Object(s.jsx)("div",{className:"SessionRecordingsPlaylist__right-column",children:E!=null&&E.id?Object(s.jsx)("div",{className:"border rounded h-full",children:Object(s.jsx)(Re.a,{playerKey:"playlist",sessionRecordingId:E==null?void 0:E.id,matching:E==null?void 0:E.matching_events,recordingStartTime:E?E.start_time:void 0})}):Object(s.jsx)("div",{className:"mt-20",children:Object(s.jsx)(Z.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonTo:"https://posthog.com/docs/user-guides/recordings"})})})]})]})}try{ue.displayName="SessionRecordingsPlaylist",ue.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{logicKey:{defaultValue:null,description:"",name:"logicKey",required:!0,type:{name:"string"}},personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},filters:{defaultValue:null,description:"",name:"filters",required:!1,type:{name:"RecordingFilters"}},updateSearchParams:{defaultValue:null,description:"",name:"updateSearchParams",required:!1,type:{name:"boolean"}},onFiltersChange:{defaultValue:null,description:"",name:"onFiltersChange",required:!1,type:{name:"((filters: RecordingFilters) => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:ue.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(r){}},"./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts":function(fe,F,e){"use strict";e.d(F,"a",function(){return de}),e.d(F,"b",function(){return Je}),e.d(F,"c",function(){return Xe});var pe=e("./node_modules/core-js/modules/es.object.keys.js"),ss=e.n(pe),Ke=e("./node_modules/core-js/modules/es.symbol.js"),ts=e.n(Ke),Be=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),X=e.n(Be),O=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),he=e.n(O),Q=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),We=e.n(Q),Pe=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ve=e.n(Pe),ge=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),W=e.n(ge),$e=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=e.n($e),Re=e("./node_modules/@babel/runtime/regenerator/index.js"),Z=e.n(Re),U=e("./node_modules/core-js/modules/es.array.find.js"),$=e.n(U),_e=e("./node_modules/core-js/modules/es.object.to-string.js"),Ve=e.n(_e),be=e("./node_modules/core-js/modules/es.function.name.js"),V=e.n(be),xe=e("./node_modules/core-js/modules/es.array.map.js"),Ye=e.n(xe),ie=e("./node_modules/core-js/modules/es.array.concat.js"),k=e.n(ie),Ee=e("./node_modules/core-js/modules/es.array.filter.js"),q=e.n(Ee),s=e("./node_modules/core-js/modules/es.array.iterator.js"),Se=e.n(s),ee=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),se=e.n(ee),le=e("./node_modules/core-js/modules/es.object.from-entries.js"),Ge=e.n(le),A=e("./node_modules/kea/lib/index.esm.js"),Ce=e("./frontend/src/lib/api.ts"),De=e("./frontend/src/lib/utils.tsx"),w=e("./frontend/src/types.ts"),z=e("./node_modules/kea-router/lib/index.js"),we=e.n(z),Fe=e("./frontend/src/lib/utils/eventUsageLogic.ts"),te=e("./node_modules/fast-deep-equal/index.js"),je=e.n(te),Ie=e("./frontend/src/scenes/teamLogic.tsx"),Le=e("./frontend/src/lib/dayjs.ts"),ae=e("./node_modules/kea-loaders/lib/index.js"),ze=e.n(ae),ce=e("./frontend/src/scenes/urls.ts");function ye(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);o&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,l)}return a}function I(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ye(Object(a),!0).forEach(function(l){oe()(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}var de=20,He={session_recording_duration:{type:"recording",key:"duration",value:60,operator:w.N.GreaterThan},properties:[],events:[],actions:[],date_from:Object(Le.a)().subtract(21,"days").format("YYYY-MM-DD")},Je=function(o,a,l){var d,f,h=(d=o.events)===null||d===void 0?void 0:d.find(function(j){var P=j.name;return P==="$pageview"}),R=(f=o.events)!==null&&f!==void 0?f:[],L=l?{key:a,value:[l],operator:w.N.Exact,type:"event"}:{key:a,value:w.N.IsNotSet,operator:w.N.IsNotSet,type:"event"};return h?{events:R.map(function(j){var P,b;return j.order===h.order?I(I({},j),{},{properties:[].concat(W()((P=(b=j.properties)===null||b===void 0?void 0:b.filter(function(S){var B=S.key;return B!==a}))!==null&&P!==void 0?P:[]),[L])}):j})}:{events:[].concat(W()(R),[{id:"$pageview",name:"$pageview",type:"events",order:R.length,properties:[L]}])}},Xe=Object(A.kea)([Object(A.path)(function(n){return["scenes","session-recordings","playlist","sessionRecordingsListLogic",n]}),Object(A.props)({}),Object(A.key)(function(n){var o;return"".concat(n.key,"-").concat((o=n.updateSearchParams)!==null&&o!==void 0?o:"-with-search")}),Object(A.connect)({values:[Ie.a,["currentTeamId"]],actions:[Fe.e,["reportRecordingsListFetched","reportRecordingsListPropertiesFetched","reportRecordingsListFilterAdded"]]}),Object(A.actions)({getSessionRecordings:!0,setFilters:function(o){return{filters:o}},replaceFilters:function(o){return{filters:o}},setShowFilters:function(o){return{showFilters:o}},setSelectedRecordingId:function(o){return{id:o}},loadNext:!0,loadPrev:!0}),Object(ae.loaders)(function(n){var o=n.props,a=n.values,l=n.actions;return{sessionRecordingsResponse:[{results:[],has_next:!1},{getSessionRecordings:function(){var d=ve()(Z.a.mark(function h(R,L){var j,P,b,S,B,H;return Z.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return P=I(I({},a.filters),{},{person_uuid:(j=o.personUUID)!==null&&j!==void 0?j:"",limit:de}),b=Object(De.Fb)(P),N.next=4,L(100);case 4:return S=performance.now(),N.next=7,Ce.b.recordings.list(b);case 7:return B=N.sent,H=performance.now()-S,l.reportRecordingsListFetched(H),L(),N.abrupt("return",B);case 12:case"end":return N.stop()}},h)}));function f(h,R){return d.apply(this,arguments)}return f}()}],sessionRecordingsPropertiesResponse:[{results:[]},{getSessionRecordingsProperties:function(){var d=ve()(Z.a.mark(function h(R,L){var j,P,b,S,B;return Z.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(a.sessionRecordingsResponse.results.length<1)){T.next=2;break}return T.abrupt("return",{results:[]});case 2:return j={session_ids:a.sessionRecordingsResponse.results.map(function(N){var Te=N.id;return Te})},P=Object(De.Fb)(j),T.next=6,L(100);case 6:return b=performance.now(),T.next=9,Ce.b.recordings.listProperties(P);case 9:return S=T.sent,B=performance.now()-b,l.reportRecordingsListPropertiesFetched(B),L(),T.abrupt("return",S);case 14:case"end":return T.stop()}},h)}));function f(h,R){return d.apply(this,arguments)}return f}()}]}}),Object(A.reducers)(function(n){var o=n.props;return{filters:[o.filters||He,{replaceFilters:function(l,d){var f=d.filters;return f},setFilters:function(l,d){var f=d.filters;return I(I({},l),f)}}],showFilters:[!1,{setShowFilters:function(l,d){var f=d.showFilters;return f}}],sessionRecordings:[[],{getSessionRecordingsSuccess:function(l,d){var f=d.sessionRecordingsResponse;return W()(f.results)},setSelectedRecordingId:function(l,d){var f=d.id;return W()(l.map(function(h){return h.id===f?I(I({},h),{},{viewed:!0}):I({},h)}))}}],selectedRecordingId:[null,{setSelectedRecordingId:function(l,d){var f=d.id;return f!=null?f:null}}]}}),Object(A.listeners)(function(n){var o=n.actions,a=n.values;return{setFilters:function(){o.getSessionRecordings()},replaceFilters:function(){o.getSessionRecordings()},loadNext:function(){var d;o.setFilters({offset:(((d=a.filters)===null||d===void 0?void 0:d.offset)||0)+de})},loadPrev:function(){var d;o.setFilters({offset:Math.max((((d=a.filters)===null||d===void 0?void 0:d.offset)||0)-de,0)})},getSessionRecordingsSuccess:function(){o.getSessionRecordingsProperties({})}}}),Object(A.selectors)({sessionRecordingIdToProperties:[function(n){return[n.sessionRecordingsPropertiesResponse]},function(n){var o;return(o=Object.fromEntries(n.results.map(function(a){var l=a.id,d=a.properties;return[l,d]})))!==null&&o!==void 0?o:{}}],activeSessionRecording:[function(n){return[n.selectedRecordingId,n.sessionRecordings]},function(n,o){return n?o.find(function(a){return a.id===n})||{id:n}:o[0]}],hasPrev:[function(n){return[n.filters]},function(n){return(n.offset||0)>0}],hasNext:[function(n){return[n.sessionRecordingsResponse]},function(n){return n.has_next}],totalFiltersCount:[function(n){return[n.filters]},function(n){var o,a,l;return((n==null||(o=n.actions)===null||o===void 0?void 0:o.length)||0)+((n==null||(a=n.events)===null||a===void 0?void 0:a.length)||0)+((n==null||(l=n.properties)===null||l===void 0?void 0:l.length)||0)}]}),Object(A.afterMount)(function(n){var o=n.actions;o.getSessionRecordings()}),Object(z.actionToUrl)(function(n){var o=n.props,a=n.values;if(!o.updateSearchParams)return{};var l=function(f){var h={filters:a.filters},R=I({},z.router.values.hashParams);return a.selectedRecordingId?R.sessionRecordingId=a.selectedRecordingId:delete R.sessionRecordingId,[z.router.values.location.pathname,h,R,{replace:f}]};return{loadSessionRecordings:function(){return l(!0)},setSelectedRecordingId:function(){return l(!1)},setFilters:function(){return l(!0)}}}),Object(z.urlToAction)(function(n){var o,a=n.actions,l=n.values,d=n.props,f=function(R,L,j){var P;if(!!d.updateSearchParams){var b=(P=j.sessionRecordingId)!==null&&P!==void 0?P:null;b!==l.selectedRecordingId&&a.setSelectedRecordingId(b);var S=L.filters;S&&(je()(S,l.filters)||a.replaceFilters(S))}};return o={},oe()(o,ce.a.sessionRecordings(),f),oe()(o,ce.a.sessionRecordings(w.X.Recent),f),oe()(o,ce.a.person("*"),f),o})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss":function(fe,F,e){var pe=e("./node_modules/css-loader/dist/runtime/api.js");F=pe(!1),F.push([fe.i,".SessionRecordingsPlaylist{display:flex;flex-direction:column-reverse;gap:1rem;overflow:hidden}@media screen and (min-width:768px){.SessionRecordingsPlaylist{flex-direction:row;justify-content:flex-start}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{flex-shrink:0}@media screen and (min-width:768px){.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{width:30%;min-width:350px;max-width:500px}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__list-item .SessionRecordingsPlaylist__list-item__property-icon:hover{transition:opacity .2s;opacity:1}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column{flex:1;overflow:hidden}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column .SessionRecordingsPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),fe.exports=F}}]);
