(window.webpackJsonp=window.webpackJsonp||[]).push([[292],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"ActionsTable",(function(){return ActionsTable}));var react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),es_radio=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/radio/index.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),actionsModel=__webpack_require__("./frontend/src/models/actionsModel.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),AuthorizedUrlList=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),authorizedUrlListLogic=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function NewActionButton(){const[visible,setVisible]=Object(react.useState)(!1),[appUrlsVisible,setAppUrlsVisible]=Object(react.useState)(!1);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{type:"primary",onClick:()=>setVisible(!0),"data-attr":"create-action",children:"New action"}),Object(jsx_runtime.jsx)(src.LemonModal,{isOpen:visible,onClose:()=>{setVisible(!1),setAppUrlsVisible(!1)},title:"Create new action",footer:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[appUrlsVisible&&Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",onClick:()=>setAppUrlsVisible(!1),children:"Back"},"back-button"),Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",onClick:()=>{setVisible(!1),setAppUrlsVisible(!1)},children:"Cancel"},"cancel-button")]}),children:appUrlsVisible?Object(jsx_runtime.jsx)("div",{style:{maxWidth:"40rem"},children:Object(jsx_runtime.jsx)(AuthorizedUrlList.a,{type:authorizedUrlListLogic.a.TOOLBAR_URLS})}):Object(jsx_runtime.jsxs)("div",{className:"space-y-2",children:[Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",icon:Object(jsx_runtime.jsx)(icons.Ib,{}),onClick:()=>setAppUrlsVisible(!0),size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect",children:"Inspect element on your site"}),Object(jsx_runtime.jsx)(LemonButton.a,{type:"secondary",icon:Object(jsx_runtime.jsx)(icons.Q,{}),onClick:()=>{lib.router.actions.push(urls.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview",children:"From event or pageview"})]})})]})}var types=__webpack_require__("./frontend/src/types.ts"),fuse_esm=__webpack_require__("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),api=__webpack_require__("./frontend/src/lib/api.ts"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),DataManagementPageTabs=__webpack_require__("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx");const actionsLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","actions","actionsLogic"]),Object(index_esm.selectors)({breadcrumbs:[()=>[],()=>[{name:"Data Management",path:urls.a.eventDefinitions()},{name:"Actions",path:urls.a.actions()}]]})]),scene={component:ActionsTable,logic:actionsLogic};function ActionsTable(){const{currentTeam:currentTeam}=Object(index_esm.useValues)(teamLogic.a),{actions:actions,actionsLoading:actionsLoading}=Object(index_esm.useValues)(Object(actionsModel.a)({params:"include_count=1"})),{loadActions:loadActions}=Object(index_esm.useActions)(actionsModel.a),[searchTerm,setSearchTerm]=Object(react.useState)(""),[filterByMe,setFilterByMe]=Object(react.useState)(!1),{user:user,hasAvailableFeature:hasAvailableFeature}=Object(index_esm.useValues)(userLogic.a),columns=[{title:"Name",dataIndex:"name",width:"25%",sorter:(a,b)=>(a.name||"").localeCompare(b.name||""),render:function RenderName(name,action,index){return Object(jsx_runtime.jsx)(Link.a,{"data-attr":"action-link-"+index,to:urls.a.action(action.id),className:"row-name",children:name||Object(jsx_runtime.jsx)("i",{children:"Unnamed action"})})}},...hasAvailableFeature(types.e.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function renderTags(tags){return Object(jsx_runtime.jsx)(ObjectTags.a,{tags:tags,staticOnly:!0})}}]:[],{title:"Type",key:"type",render:function RenderType(_,action){var _action$steps;return Object(jsx_runtime.jsx)("span",{children:null!==(_action$steps=action.steps)&&void 0!==_action$steps&&_action$steps.length?action.steps.map((step=>Object(jsx_runtime.jsx)("div",{children:(()=>{let url=Object(utils.Hb)(step.url||"");switch(url=url.slice(0,40)+(url.length>40?"...":""),step.event){case"$autocapture":return"Autocapture";case"$pageview":switch(step.url_matching){case"regex":return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Page view URL matches regex ",Object(jsx_runtime.jsx)("strong",{children:url})]});case"exact":return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Page view URL matches exactly ",Object(jsx_runtime.jsx)("strong",{children:url})]});default:return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Page view URL contains ",Object(jsx_runtime.jsx)("strong",{children:url})]})}default:return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Event: ",Object(jsx_runtime.jsx)("strong",{children:step.event})]})}})()},step.id))):Object(jsx_runtime.jsx)("i",{children:"Empty â€“ set this action up"})})}},Object(columnUtils.b)(),Object(columnUtils.a)(),...null!=currentTeam&&currentTeam.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:(a,b)=>Number(a.post_to_slack)-Number(b.post_to_slack),render:function RenderActions(post_to_slack){return post_to_slack?Object(jsx_runtime.jsx)(icons.y,{}):null}}]:[],{width:0,render:function RenderActions(_,action){return Object(jsx_runtime.jsx)(More.a,{overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",to:urls.a.action(action.id),fullWidth:!0,children:"Edit"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",to:Object(lib.combineUrl)(urls.a.sessionRecordings(),{filters:{actions:[{id:action.id,type:"actions",order:0,name:action.name}]}}).url,sideIcon:Object(jsx_runtime.jsx)(icons.hc,{}),fullWidth:!0,"data-attr":"action-table-view-recordings",children:"View recordings"}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",to:Object(lib.combineUrl)(urls.a.insightNew({insight:types.F.TRENDS,interval:"day",display:types.k.ActionsLineGraph,actions:[{id:action.id,name:action.name,type:"actions",order:0}]})).url,fullWidth:!0,children:"Try out in Insights"}),Object(jsx_runtime.jsx)(LemonDivider.a,{}),Object(jsx_runtime.jsx)(LemonButton.a,{status:"danger",onClick:()=>Object(utils.x)({endpoint:api.b.actions.determineDeleteEndpoint(),object:action,callback:loadActions}),fullWidth:!0,children:"Delete action"})]})})}}];let data=actions;var sources,search;return searchTerm&&""!==searchTerm&&(sources=data,search=searchTerm,data=new fuse_esm.a(sources,{keys:["name","url"],threshold:.3}).search(search).map((result=>result.item))),filterByMe&&(data=data.filter((item=>{var _item$created_by;return(null===(_item$created_by=item.created_by)||void 0===_item$created_by?void 0:_item$created_by.uuid)===(null==user?void 0:user.uuid)}))),Object(jsx_runtime.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0,buttons:Object(jsx_runtime.jsx)(NewActionButton,{})}),Object(jsx_runtime.jsx)(DataManagementPageTabs.a,{tab:DataManagementPageTabs.b.Actions}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4",children:[Object(jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for actions",onChange:setSearchTerm,value:searchTerm}),Object(jsx_runtime.jsxs)(es_radio.a.Group,{buttonStyle:"solid",value:filterByMe,onChange:e=>setFilterByMe(e.target.value),children:[Object(jsx_runtime.jsx)(es_radio.a.Button,{value:!1,children:"All actions"}),Object(jsx_runtime.jsx)(es_radio.a.Button,{value:!0,children:"My actions"})]})]}),Object(jsx_runtime.jsx)(LemonTable.a,{columns:columns,loading:actionsLoading,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:data,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."})]})}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DataManagementTab})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DataManagementPageTabs}));var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),antd__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),scenes_urls__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),lib_components_TitleWithIcon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/components/TitleWithIcon.tsx"),lib_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/constants.tsx"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");let DataManagementTab;!function(DataManagementTab){DataManagementTab.Actions="actions",DataManagementTab.EventDefinitions="events",DataManagementTab.PropertyDefinitions="properties",DataManagementTab.IngestionWarnings="warnings"}(DataManagementTab||(DataManagementTab={}));const tabUrls={[DataManagementTab.PropertyDefinitions]:scenes_urls__WEBPACK_IMPORTED_MODULE_2__.a.propertyDefinitions(),[DataManagementTab.EventDefinitions]:scenes_urls__WEBPACK_IMPORTED_MODULE_2__.a.eventDefinitions(),[DataManagementTab.Actions]:scenes_urls__WEBPACK_IMPORTED_MODULE_2__.a.actions(),[DataManagementTab.IngestionWarnings]:scenes_urls__WEBPACK_IMPORTED_MODULE_2__.a.ingestionWarnings()},eventsTabsLogic=Object(kea__WEBPACK_IMPORTED_MODULE_0__.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_7__.a,["featureFlags"]]},actions:{setTab:tab=>({tab:tab})},reducers:{tab:[DataManagementTab.EventDefinitions,{setTab:(_,_ref)=>{let{tab:tab}=_ref;return tab}}]},selectors:{showWarningsTab:[s=>[s.featureFlags],featureFlags=>!!featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_6__.i.INGESTION_WARNINGS_ENABLED]]},actionToUrl:()=>({setTab:_ref2=>{let{tab:tab}=_ref2;return tabUrls[tab]||scenes_urls__WEBPACK_IMPORTED_MODULE_2__.a.events()}}),urlToAction:_ref3=>{let{actions:actions,values:values}=_ref3;return Object.fromEntries(Object.entries(tabUrls).map((_ref4=>{let[key,url]=_ref4;return[url,()=>{values.tab!==key&&actions.setTab(key)}]})))}});function DataManagementPageTabs(_ref5){let{tab:tab}=_ref5;const{showWarningsTab:showWarningsTab}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(eventsTabsLogic),{setTab:setTab}=Object(kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(eventsTabsLogic);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_1__.a,{tabPosition:"top",animated:!1,activeKey:tab,onTabClick:t=>setTab(t),children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(antd__WEBPACK_IMPORTED_MODULE_1__.a.TabPane,{tab:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},DataManagementTab.EventDefinitions),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(antd__WEBPACK_IMPORTED_MODULE_1__.a.TabPane,{tab:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_components_TitleWithIcon__WEBPACK_IMPORTED_MODULE_5__.a,{icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_3__.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_4__.tb,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},DataManagementTab.Actions),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(antd__WEBPACK_IMPORTED_MODULE_1__.a.TabPane,{tab:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_components_TitleWithIcon__WEBPACK_IMPORTED_MODULE_5__.a,{icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_3__.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_4__.tb,{})}),"data-attr":"data-management-event-properties-tab",children:"Properties"})},DataManagementTab.PropertyDefinitions),showWarningsTab&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(antd__WEBPACK_IMPORTED_MODULE_1__.a.TabPane,{tab:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},DataManagementTab.IngestionWarnings)]})}try{DataManagementPageTabs.displayName="DataManagementPageTabs",DataManagementPageTabs.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:DataManagementPageTabs.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(__react_docgen_typescript_loader_error){}}}]);