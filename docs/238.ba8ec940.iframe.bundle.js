(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(oe,c,e){"use strict";e.r(c),e.d(c,"scene",function(){return d}),e.d(c,"ActionsTable",function(){return re});var J=e("./node_modules/core-js/modules/es.array.concat.js"),he=e("./node_modules/core-js/modules/es.array.filter.js"),V=e("./node_modules/core-js/modules/es.array.map.js"),ue=e("./node_modules/core-js/modules/es.array.slice.js"),b=e("./node_modules/core-js/modules/es.function.name.js"),B=e("./node_modules/core-js/modules/es.number.constructor.js"),r=e("./node_modules/core-js/modules/es.regexp.exec.js"),ce=e("./node_modules/core-js/modules/es.string.search.js"),le=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),me=e.n(le),ee=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),H=e.n(ee),$=e("./node_modules/react/index.js"),n=e.n($),Ee=e("./frontend/src/scenes/actions/Actions.scss"),X=e("./frontend/src/lib/components/Link.tsx"),de=e("./node_modules/antd/es/input/index.js"),m=e("./node_modules/antd/es/radio/index.js"),te=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),K=e("./frontend/src/lib/utils.tsx"),j=e("./node_modules/kea/lib/index.esm.js"),Q=e("./frontend/src/models/actionsModel.ts"),S=e("./node_modules/antd/es/button/index.js"),C=e("./node_modules/antd/es/modal/index.js"),_=e("./node_modules/antd/es/row/index.js"),ne=e("./node_modules/antd/es/col/index.js"),W=e("./node_modules/antd/es/card/index.js"),z=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),g=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),T=e("./node_modules/kea-router/lib/index.js"),O=e("./frontend/src/scenes/urls.ts"),h=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx"),ae=e("./frontend/src/lib/components/icons.tsx");function Z(){var p=Object($.useState)(!1),u=H()(p,2),x=u[0],I=u[1],q=Object($.useState)(!1),F=H()(q,2),R=F[0],o=F[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{type:"primary",icon:n.a.createElement(z.a,null),onClick:function(){return I(!0)},"data-attr":"create-action"},"New Action"),n.a.createElement(C.a,{visible:x,style:{cursor:"pointer"},onCancel:function(){I(!1),o(!1)},title:"Create new action",footer:[R&&n.a.createElement(S.a,{key:"back-button",onClick:function(){return o(!1)}},"Back"),n.a.createElement(S.a,{key:"cancel-button",onClick:function(){I(!1),o(!1)}},"Cancel")]},!R&&n.a.createElement(_.a,{gutter:2,justify:"space-between"},n.a.createElement(ne.a,{xs:11},n.a.createElement(W.a,{title:"Inspect element on your site",onClick:function(){return o(!0)},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40}},n.a.createElement(g.a,null)))),n.a.createElement(ne.a,{xs:11},n.a.createElement(W.a,{title:"From event or pageview",onClick:function(){T.router.actions.push(O.a.createAction())},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},n.a.createElement(ae.IconEdit,null))))),R&&n.a.createElement(h.a,null)))}var N=e("./frontend/src/types.ts"),w=e("./node_modules/fuse.js/dist/fuse.esm.js"),ie=e("./frontend/src/scenes/userLogic.ts"),G=e("./frontend/src/scenes/teamLogic.ts"),Y=e("./frontend/src/lib/api.ts"),je=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),fe=e("./frontend/src/lib/components/LemonTable/index.ts"),k=e("./frontend/src/lib/components/LemonButton/index.ts"),Pe=e("./frontend/src/lib/components/LemonRow/index.ts"),se=e("./frontend/src/lib/components/LemonButton/More.tsx"),Te=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),ye=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),ve=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),L=function(u,x){return new w.a(u,{keys:["name","url"],threshold:.3}).search(x).map(function(I){return I.item})},d={component:re};function re(){var p=Object(j.useValues)(G.a),u=p.currentTeam,x=Object(j.useValues)(Object(Q.a)({params:"include_count=1"})),I=x.actions,q=x.actionsLoading,F=Object(j.useActions)(Q.a),R=F.loadActions,o=Object($.useState)(""),a=H()(o,2),t=a[0],s=a[1],l=Object($.useState)(!1),E=H()(l,2),y=E[0],f=E[1],v=Object(j.useValues)(ie.a),D=v.user,_e=v.hasAvailableFeature,P=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(i,A){return(i.name||"").localeCompare(A.name||"")},render:function(i,A,ge){return n.a.createElement(X.a,{"data-attr":"action-link-"+ge,to:O.a.action(A.id),className:"row-name"},i||n.a.createElement("i",null,"Unnamed action"))}}].concat(me()(_e(N.c.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(i){return n.a.createElement(Te.a,{tags:i,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(i,A){var ge;return n.a.createElement("span",null,!((ge=A.steps)===null||ge===void 0)&&ge.length?A.steps.map(function(De){return n.a.createElement("div",{key:De.id},function(){var Oe=Object(K.yb)(De.url||"");switch(Oe=Oe.slice(0,40)+(Oe.length>40?"...":""),De.event){case"$autocapture":return"Autocapture";case"$pageview":switch(De.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,Oe));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,Oe));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,Oe))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,De.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(je.b)(),Object(je.a)()],me()(u!=null&&u.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(i,A){return Number(i.post_to_slack)-Number(A.post_to_slack)},render:function(i){return i?n.a.createElement(te.a,null):null}}]:[]),[{width:0,render:function(i,A){return n.a.createElement(se.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{type:"stealth",to:O.a.action(A.id),fullWidth:!0},"Edit"),n.a.createElement(k.a,{type:"stealth",to:Object(T.combineUrl)(O.a.insightNew({insight:N.s.TRENDS,interval:"day",display:N.d.ActionsLineGraph,actions:[{id:A.id,name:A.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(Pe.b,null),n.a.createElement(k.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Object(K.x)({endpoint:Y.b.actions.determineDeleteEndpoint(),object:A,callback:R})},fullWidth:!0},"Delete action"))})}}]),U=I;return t&&t!==""&&(U=L(U,t)),y&&(U=U.filter(function(M){var i;return((i=M.created_by)===null||i===void 0?void 0:i.uuid)===(D==null?void 0:D.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(ve.a,{activeTab:ye.b.Actions}),n.a.createElement(de.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(i){s(i.target.value)}}),n.a.createElement(m.a.Group,{buttonStyle:"solid",value:y,onChange:function(i){return f(i.target.value)}},n.a.createElement(m.a.Button,{value:!1},"All actions"),n.a.createElement(m.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb float-right"},n.a.createElement(Z,null)),n.a.createElement(fe.a,{columns:P,loading:q,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:U,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(oe,c,e){"use strict";e.d(c,"a",function(){return b});var J=e("./frontend/src/lib/components/PageHeader.tsx"),he=e("./node_modules/react/index.js"),V=e.n(he),ue=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx");function b(B){var r=B.activeTab,ce=B.hideTabs;return V.a.createElement(V.a.Fragment,null,V.a.createElement(J.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!ce&&V.a.createElement(ue.a,{tab:r}))}try{b.displayName="DataManagementPageHeader",b.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:b.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(B){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(oe,c,e){"use strict";e.d(c,"b",function(){return _}),e.d(c,"a",function(){return z});var J=e("./node_modules/core-js/modules/es.array.iterator.js"),he=e.n(J),V=e("./node_modules/core-js/modules/es.array.map.js"),ue=e.n(V),b=e("./node_modules/core-js/modules/es.object.entries.js"),B=e.n(b),r=e("./node_modules/core-js/modules/es.object.from-entries.js"),ce=e.n(r),le=e("./node_modules/core-js/modules/es.object.to-string.js"),me=e.n(le),ee=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),H=e.n(ee),$=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),n=e.n($),Ee=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),X=e.n(Ee),de=e("./node_modules/react/index.js"),m=e.n(de),te=e("./node_modules/kea/lib/index.esm.js"),K=e("./node_modules/antd/es/tabs/index.js"),j=e("./frontend/src/scenes/urls.ts"),Q=e("./frontend/src/lib/components/Tooltip.tsx"),S=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),C,_;(function(g){g.Actions="actions",g.EventDefinitions="events",g.EventPropertyDefinitions="properties"})(_||(_={}));var ne=(C={},X()(C,_.EventPropertyDefinitions,j.a.eventPropertyDefinitions()),X()(C,_.EventDefinitions,j.a.eventDefinitions()),X()(C,_.Actions,j.a.actions()),C),W=Object(te.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(T){return{tab:T}}},reducers:{tab:[_.EventDefinitions,{setTab:function(T,O){var h=O.tab;return h}}]},actionToUrl:function(){return{setTab:function(O){var h=O.tab;return ne[h]||j.a.events()}}},urlToAction:function(T){var O=T.actions,h=T.values;return Object.fromEntries(Object.entries(ne).map(function(ae){var Z=n()(ae,2),N=Z[0],w=Z[1];return[w,function(){h.tab!==N&&O.setTab(N)}]}))}});function z(g){var T=g.tab,O=Object(te.useActions)(W),h=O.setTab;return m.a.createElement(K.a,{tabPosition:"top",animated:!1,activeKey:T,onTabClick:function(Z){return h(Z)}},m.a.createElement(K.a.TabPane,{tab:m.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:_.EventDefinitions}),m.a.createElement(K.a.TabPane,{tab:m.a.createElement("span",{"data-attr":"data-management-actions-tab"},"Actions",m.a.createElement(Q.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},m.a.createElement(S.a,{style:{marginLeft:8,marginRight:0}}))),key:_.Actions}),m.a.createElement(K.a.TabPane,{tab:m.a.createElement("span",{"data-attr":"data-management-event-properties-tab"},"Properties",m.a.createElement(Q.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},m.a.createElement(S.a,{style:{marginLeft:8,marginRight:0}}))),key:_.EventPropertyDefinitions}))}try{z.displayName="DataManagementPageTabs",z.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:z.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(g){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx":function(oe,c,e){"use strict";e.d(c,"a",function(){return W});var J=e("./node_modules/core-js/modules/es.array.index-of.js"),he=e("./node_modules/core-js/modules/es.regexp.exec.js"),V=e("./node_modules/core-js/modules/es.string.match.js"),ue=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),b=e.n(ue),B=e("./node_modules/react/index.js"),r=e.n(B),ce=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),le=e.n(ce),me=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss"),ee=e.n(me),H={};H.insert="head",H.singleton=!1;var $=le()(ee.a,H),n=ee.a.locals||{},Ee=e("./node_modules/clsx/dist/clsx.m.js"),X=e("./node_modules/kea/lib/index.esm.js"),de=e("./frontend/src/lib/components/LemonTable/index.ts"),m=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),te=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),K=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),j=e("./frontend/src/lib/components/LemonButton/index.ts"),Q=e("./node_modules/antd/es/input/index.js"),S=e("./node_modules/antd/es/button/index.js"),C=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),_=e("./frontend/src/lib/utils.tsx"),ne=e("./frontend/src/lib/components/LemonButton/More.tsx");function W(z){var g=z.pageKey,T=z.actionId,O=Object(C.c)({actionId:T}),h=Object(X.useValues)(O),ae=h.appUrlsKeyed,Z=h.suggestionsLoading,N=h.searchTerm,w=h.launchUrl,ie=h.appUrls,G=h.editUrlIndex,Y=Object(X.useActions)(O),je=Y.addUrl,fe=Y.removeUrl,k=Y.setSearchTerm,Pe=Y.updateUrl,se=Y.newUrl,Te=Y.setEditUrlIndex,ye=[{title:"URLs",dataIndex:"url",key:"url",render:function(L,d){var re=Object(B.useState)(d.url),p=b()(re,2),u=p[0],x=p[1],I=Object(B.useState)(""),q=b()(I,2),F=q[0],R=q[1];Object(B.useEffect)(function(){return x(d.url)},[d]);var o=function(){if(R(""),u===C.a&&fe(d.originalIndex),u.indexOf("*")>-1&&!u.match(/^(.*)\*[^\*]*\.[^\*]+\.[^\*]+$/)){R("You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.");return}if(!Object(_.eb)(u)){R("Please type a valid URL or domain.");return}if(ie.indexOf(u)>-1&&ie.indexOf(u,d.originalIndex)!==d.originalIndex&&ie.indexOf(u,d.originalIndex+1)!==d.originalIndex){R("This URL is already registered.");return}Pe(d.originalIndex,u)};return d.type==="suggestion"||L!==C.a&&G!==d.originalIndex?r.a.createElement("div",{className:Object(Ee.a)("authorized-url-col",d.type)},d.type==="authorized"&&r.a.createElement(te.a,{style:{marginRight:4}}),L,d.type==="suggestion"&&r.a.createElement(m.a,null,"Suggestion")):r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Q.a,{value:u,onChange:function(t){return x(t.target.value)},onPressEnter:o,autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)"}),r.a.createElement(S.a,{type:"primary",onClick:o},"Save")),F&&r.a.createElement("span",{className:"text-small text-danger"},F))}},{title:"",key:"actions",render:function(L,d,re){return r.a.createElement("div",{className:"actions-col"},d.type==="suggestion"?r.a.createElement(j.a,{type:"default",onClick:function(){return je(d.url)}},r.a.createElement(K.a,null)," Add as authorized"):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:w(d.url),style:{marginRight:4}},r.a.createElement(j.a,{type:"highlighted"},"Launch toolbar")),r.a.createElement(ne.a,{overlay:r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{fullWidth:!0,type:"stealth",onClick:function(){return Te(d.originalIndex)}},"Edit authorized URL"),r.a.createElement(j.a,{fullWidth:!0,style:{color:"var(--danger)"},type:"stealth",onClick:function(){return fe(re)}},"Remove authorized URL"))})))}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"flex-center mb"},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(Q.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:N,onChange:function(L){k(L.target.value)},autoFocus:g==="toolbar-launch"&&!Object(_.X)()})),r.a.createElement(S.a,{type:"primary",icon:r.a.createElement(K.a,null),onClick:se},"Add",g==="toolbar-launch"&&" authorized domain")),r.a.createElement(de.a,{className:"authorized-urls-table",columns:ye,dataSource:ae,emptyState:N?"There are no authorized URLs that match your search.":"There are no authorized URLs or domains. Add one to get started.",loading:Z}))}try{W.displayName="AuthorizedUrlsTable",W.__docgenInfo={description:"",displayName:"AuthorizedUrlsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"]={docgenInfo:W.__docgenInfo,name:"AuthorizedUrlsTable",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"})}catch(z){}},"./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts":function(oe,c,e){"use strict";e.d(c,"b",function(){return q}),e.d(c,"a",function(){return F}),e.d(c,"c",function(){return R});var J=e("./node_modules/core-js/modules/es.array.concat.js"),he=e.n(J),V=e("./node_modules/core-js/modules/es.array.filter.js"),ue=e.n(V),b=e("./node_modules/core-js/modules/es.array.includes.js"),B=e.n(b),r=e("./node_modules/core-js/modules/es.array.index-of.js"),ce=e.n(r),le=e("./node_modules/core-js/modules/es.array.iterator.js"),me=e.n(le),ee=e("./node_modules/core-js/modules/es.array.map.js"),H=e.n(ee),$=e("./node_modules/core-js/modules/es.array.slice.js"),n=e.n($),Ee=e("./node_modules/core-js/modules/es.array.splice.js"),X=e.n(Ee),de=e("./node_modules/core-js/modules/es.object.assign.js"),m=e.n(de),te=e("./node_modules/core-js/modules/es.object.to-string.js"),K=e.n(te),j=e("./node_modules/core-js/modules/es.regexp.exec.js"),Q=e.n(j),S=e("./node_modules/core-js/modules/es.regexp.to-string.js"),C=e.n(S),_=e("./node_modules/core-js/modules/es.string.includes.js"),ne=e.n(_),W=e("./node_modules/core-js/modules/es.string.iterator.js"),z=e.n(W),g=e("./node_modules/core-js/modules/es.string.search.js"),T=e.n(g),O=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),h=e.n(O),ae=e("./node_modules/core-js/modules/web.url.js"),Z=e.n(ae),N=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),w=e.n(N),ie=e("./node_modules/@babel/runtime/regenerator/index.js"),G=e.n(ie),Y=e("./node_modules/regenerator-runtime/runtime.js"),je=e.n(Y),fe=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),k=e.n(fe),Pe=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),se=e.n(Pe),Te=e("./node_modules/kea/lib/index.esm.js"),ye=e("./frontend/src/lib/api.ts"),ve=e("./frontend/src/lib/utils.tsx"),L=e("./frontend/src/scenes/teamLogic.ts"),d=e("./frontend/src/lib/dayjs.ts"),re=e("./node_modules/fuse.js/dist/fuse.esm.js"),p=e("./node_modules/kea-router/lib/index.js"),u=e.n(p);function x(o,a){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);a&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),t.push.apply(t,s)}return t}function I(o){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?x(Object(t),!0).forEach(function(s){se()(o,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(s){Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(t,s))})}return o}function q(o,a,t){var s=I(I({userIntent:t?void 0:a?"edit-action":"add-action"},a?{actionId:a}:{}),o?{appUrl:o}:{});return"/api/user/redirect_to_site/"+Object(p.encodeParams)(s,"?")}var F="https://",R=Object(Te.kea)({path:function(a){return["lib","components","AppEditorLink","appUrlsLogic",a]},key:function(a){return"".concat(a.pageKey).concat(a.actionId)||"global"},props:{},connect:{values:[L.a,["currentTeam","currentTeamId"]],actions:[L.a,["updateCurrentTeam"]]},actions:function(){return{setAppUrls:function(t){return{appUrls:t}},addUrl:function(t,s){return{url:t,launch:s}},newUrl:!0,removeUrl:function(t){return{index:t}},updateUrl:function(t,s){return{index:t,url:s}},launchAtUrl:function(t){return{url:t}},setSearchTerm:function(t){return{term:t}},setEditUrlIndex:function(t){return{originalIndex:t}}}},loaders:function(a){var t=a.values;return{suggestions:{__default:[],loadSuggestions:function(){var s=k()(G.a.mark(function E(){var y,f,v,D;return G.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return f={events:[{id:"$pageview",name:"$pageview",type:"events"}],breakdown:"$current_url",date_from:Object(d.a)().subtract(3,"days").toISOString()},P.next=3,ye.b.get("api/projects/".concat(t.currentTeamId,"/insights/trend/?").concat(Object(ve.Ab)(f)));case 3:if(v=P.sent.result,!(v&&((y=v[0])===null||y===void 0?void 0:y.count)===0)){P.next=6;break}return P.abrupt("return",[]);case 6:return D=[],P.abrupt("return",(v||[]).filter(function(U){if(!U.breakdown_value)return!1;try{var M=new URL(U.breakdown_value.toString()).hostname;return D.indexOf(M)>-1||t.appUrls.filter(function(i){return i.indexOf(M)>-1}).length>0?void 0:(D.push(M),!0)}catch(i){return!1}}).map(function(U){return U.breakdown_value}).slice(0,20));case 8:case"end":return P.stop()}},E)}));function l(){return s.apply(this,arguments)}return l}()}}},events:function(a){var t=a.actions,s=a.values;return{afterMount:function(){t.loadSuggestions(),s.currentTeam&&t.setAppUrls(s.currentTeam.app_urls)}}},reducers:function(){return{appUrls:[[],{setAppUrls:function(t,s){var l=s.appUrls;return l},addUrl:function(t,s){var l=s.url;return t.concat([l])},newUrl:function(t){return t.includes(F)?t:[F].concat(t)},updateUrl:function(t,s){var l=s.index,E=s.url;return Object.assign(w()(t),se()({},l,E))},removeUrl:function(t,s){var l=s.index,E=w()(t);return E.splice(l,1),E}}],suggestions:[[],{addUrl:function(t,s){var l=s.url;return w()(t).filter(function(E){return l!==E})}}],searchTerm:["",{setSearchTerm:function(t,s){var l=s.term;return l}}],editUrlIndex:[null,{setEditUrlIndex:function(t,s){var l=s.originalIndex;return l},removeUrl:function(t,s){var l=s.index;return t&&l<t?t-1:l===t?null:t}}]}},listeners:function(a){var t,s=a.sharedListeners,l=a.values,E=a.actions;return t={addUrl:[s.saveAppUrls,function(){var y=k()(G.a.mark(function f(v){var D,_e;return G.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:D=v.url,_e=v.launch,_e&&E.launchAtUrl(D);case 2:case"end":return U.stop()}},f)}));return function(f){return y.apply(this,arguments)}}()],removeUrl:s.saveAppUrls,updateUrl:[s.saveAppUrls,function(){return E.setEditUrlIndex(null)}]},se()(t,L.a.actionTypes.loadCurrentTeamSuccess,function(){var y=k()(G.a.mark(function f(v){var D;return G.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:D=v.currentTeam,D&&E.setAppUrls(D.app_urls);case 2:case"end":return P.stop()}},f)}));return function(f){return y.apply(this,arguments)}}()),se()(t,"launchAtUrl",function(f){var v=f.url;window.location.href=l.launchUrl(v)}),t},sharedListeners:function(a){var t=a.values;return{saveAppUrls:function(){L.a.actions.updateCurrentTeam({app_urls:t.appUrls})}}},selectors:function(a){var t=a.props;return{appUrlsKeyed:[function(s){return[s.appUrls,s.suggestions,s.searchTerm]},function(s,l,E){var y=s.map(function(f,v){return{url:f,type:"authorized",originalIndex:v}}).concat(l.map(function(f,v){return{url:f,type:"suggestion",originalIndex:v}}));return E?new re.a(y,{keys:["url"],threshold:.3}).search(E).map(function(f){return f.item}):y}],launchUrl:[function(){return[]},function(){return function(s){return q(s,t.actionId,!t.actionId)}}]}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss":function(oe,c,e){var J=e("./node_modules/css-loader/dist/runtime/api.js");c=J(!1),c.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.authorized-urls-table .authorized-url-col{display:flex;align-items:center}.authorized-urls-table .authorized-url-col .lemon-tag{margin-left:4px}.authorized-urls-table .authorized-url-col.suggestion{color:#747ea1}.authorized-urls-table .authorized-url-col.authorized{color:var(--success)}.authorized-urls-table .actions-col{display:flex;align-items:center;justify-content:flex-end}",""]),oe.exports=c}}]);
