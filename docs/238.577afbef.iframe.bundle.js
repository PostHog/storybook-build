(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(se,v,e){"use strict";e.r(v),e.d(v,"scene",function(){return d}),e.d(v,"ActionsTable",function(){return ae});var Q=e("./node_modules/core-js/modules/es.array.concat.js"),ge=e("./node_modules/core-js/modules/es.array.filter.js"),z=e("./node_modules/core-js/modules/es.array.map.js"),de=e("./node_modules/core-js/modules/es.array.slice.js"),A=e("./node_modules/core-js/modules/es.function.name.js"),R=e("./node_modules/core-js/modules/es.number.constructor.js"),r=e("./node_modules/core-js/modules/es.regexp.exec.js"),ie=e("./node_modules/core-js/modules/es.string.search.js"),re=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ue=e.n(re),q=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),N=e.n(q),F=e("./node_modules/react/index.js"),n=e.n(F),ce=e("./frontend/src/scenes/actions/Actions.scss"),Z=e("./frontend/src/lib/components/Link.tsx"),oe=e("./node_modules/antd/es/input/index.js"),_=e("./node_modules/antd/es/radio/index.js"),ee=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),D=e("./frontend/src/lib/utils.tsx"),U=e("./node_modules/kea/lib/index.esm.js"),te=e("./frontend/src/models/actionsModel.ts"),V=e("./node_modules/antd/es/modal/index.js"),b=e("./node_modules/antd/es/button/index.js"),T=e("./node_modules/antd/es/row/index.js"),B=e("./node_modules/antd/es/col/index.js"),H=e("./node_modules/antd/es/card/index.js"),$=e("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),h=e("./node_modules/kea-router/lib/index.js"),j=e("./frontend/src/scenes/urls.ts"),g=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx"),C=e("./frontend/src/lib/components/icons.tsx"),K=e("./frontend/src/lib/components/LemonButton/index.ts");function G(){var L=Object(F.useState)(!1),u=N()(L,2),J=u[0],x=u[1],k=Object(F.useState)(!1),X=N()(k,2),p=X[0],W=X[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{type:"primary",onClick:function(){return x(!0)},"data-attr":"create-action"},"New Action"),n.a.createElement(V.a,{visible:J,style:{cursor:"pointer"},onCancel:function(){x(!1),W(!1)},title:"Create new action",footer:[p&&n.a.createElement(b.a,{key:"back-button",onClick:function(){return W(!1)}},"Back"),n.a.createElement(b.a,{key:"cancel-button",onClick:function(){x(!1),W(!1)}},"Cancel")]},!p&&n.a.createElement(T.a,{gutter:2,justify:"space-between"},n.a.createElement(B.a,{xs:11},n.a.createElement(H.a,{title:"Inspect element on your site",onClick:function(){return W(!0)},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40}},n.a.createElement($.a,null)))),n.a.createElement(B.a,{xs:11},n.a.createElement(H.a,{title:"From event or pageview",onClick:function(){h.router.actions.push(j.a.createAction())},size:"small"},n.a.createElement("div",{style:{textAlign:"center",fontSize:40},"data-attr":"new-action-pageview"},n.a.createElement(C.IconEdit,null))))),p&&n.a.createElement(g.a,null)))}var Y=e("./frontend/src/types.ts"),S=e("./node_modules/fuse.js/dist/fuse.esm.js"),Oe=e("./frontend/src/scenes/userLogic.ts"),y=e("./frontend/src/scenes/teamLogic.ts"),he=e("./frontend/src/lib/api.ts"),me=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),je=e("./frontend/src/lib/components/LemonTable/index.ts"),le=e("./frontend/src/lib/components/LemonRow/index.ts"),Te=e("./frontend/src/lib/components/LemonButton/More.tsx"),ne=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),Pe=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),Ee=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),w=function(u,J){return new S.a(u,{keys:["name","url"],threshold:.3}).search(J).map(function(x){return x.item})},d={component:ae};function ae(){var L=Object(U.useValues)(y.a),u=L.currentTeam,J=Object(U.useValues)(Object(te.a)({params:"include_count=1"})),x=J.actions,k=J.actionsLoading,X=Object(U.useActions)(te.a),p=X.loadActions,W=Object(F.useState)(""),o=N()(W,2),s=o[0],t=o[1],a=Object(F.useState)(!1),l=N()(a,2),O=l[0],M=l[1],c=Object(U.useValues)(Oe.a),m=c.user,I=c.hasAvailableFeature,fe=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(i,P){return(i.name||"").localeCompare(P.name||"")},render:function(i,P,ve){return n.a.createElement(Z.a,{"data-attr":"action-link-"+ve,to:j.a.action(P.id),className:"row-name"},i||n.a.createElement("i",null,"Unnamed action"))}}].concat(ue()(I(Y.c.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(i){return n.a.createElement(ne.a,{tags:i,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(i,P){var ve;return n.a.createElement("span",null,!((ve=P.steps)===null||ve===void 0)&&ve.length?P.steps.map(function(ye){return n.a.createElement("div",{key:ye.id},function(){var _e=Object(D.wb)(ye.url||"");switch(_e=_e.slice(0,40)+(_e.length>40?"...":""),ye.event){case"$autocapture":return"Autocapture";case"$pageview":switch(ye.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,_e));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,_e));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,_e))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,ye.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(me.b)(),Object(me.a)()],ue()(u!=null&&u.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(i,P){return Number(i.post_to_slack)-Number(P.post_to_slack)},render:function(i){return i?n.a.createElement(ee.a,null):null}}]:[]),[{width:0,render:function(i,P){return n.a.createElement(Te.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{type:"stealth",to:j.a.action(P.id),fullWidth:!0},"Edit"),n.a.createElement(K.a,{type:"stealth",to:Object(h.combineUrl)(j.a.insightNew({insight:Y.s.TRENDS,interval:"day",display:Y.d.ActionsLineGraph,actions:[{id:P.id,name:P.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(le.b,null),n.a.createElement(K.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function(){return Object(D.x)({endpoint:he.b.actions.determineDeleteEndpoint(),object:P,callback:p})},fullWidth:!0},"Delete action"))})}}]),E=x;return s&&s!==""&&(E=w(E,s)),O&&(E=E.filter(function(f){var i;return((i=f.created_by)===null||i===void 0?void 0:i.uuid)===(m==null?void 0:m.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(Ee.a,{activeTab:Pe.b.Actions}),n.a.createElement(oe.a.Search,{placeholder:"Search for actions",allowClear:!0,enterButton:!0,style:{maxWidth:600,width:"initial",flexGrow:1,marginRight:12},onChange:function(i){t(i.target.value)}}),n.a.createElement(_.a.Group,{buttonStyle:"solid",value:O,onChange:function(i){return M(i.target.value)}},n.a.createElement(_.a.Button,{value:!1},"All actions"),n.a.createElement(_.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb float-right"},n.a.createElement(G,null)),n.a.createElement(je.a,{columns:fe,loading:k,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:E,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(se,v,e){"use strict";e.d(v,"a",function(){return A});var Q=e("./frontend/src/lib/components/PageHeader.tsx"),ge=e("./node_modules/react/index.js"),z=e.n(ge),de=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx");function A(R){var r=R.activeTab,ie=R.hideTabs;return z.a.createElement(z.a.Fragment,null,z.a.createElement(Q.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!ie&&z.a.createElement(de.a,{tab:r}))}try{A.displayName="DataManagementPageHeader",A.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:A.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(R){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(se,v,e){"use strict";e.d(v,"b",function(){return T}),e.d(v,"a",function(){return $});var Q=e("./node_modules/core-js/modules/es.array.iterator.js"),ge=e.n(Q),z=e("./node_modules/core-js/modules/es.array.map.js"),de=e.n(z),A=e("./node_modules/core-js/modules/es.object.entries.js"),R=e.n(A),r=e("./node_modules/core-js/modules/es.object.from-entries.js"),ie=e.n(r),re=e("./node_modules/core-js/modules/es.object.to-string.js"),ue=e.n(re),q=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),N=e.n(q),F=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),n=e.n(F),ce=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Z=e.n(ce),oe=e("./node_modules/react/index.js"),_=e.n(oe),ee=e("./node_modules/kea/lib/index.esm.js"),D=e("./node_modules/antd/es/tabs/index.js"),U=e("./frontend/src/scenes/urls.ts"),te=e("./frontend/src/lib/components/Tooltip.tsx"),V=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),b,T;(function(h){h.Actions="actions",h.EventDefinitions="events",h.EventPropertyDefinitions="properties"})(T||(T={}));var B=(b={},Z()(b,T.EventPropertyDefinitions,U.a.eventPropertyDefinitions()),Z()(b,T.EventDefinitions,U.a.eventDefinitions()),Z()(b,T.Actions,U.a.actions()),b),H=Object(ee.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(j){return{tab:j}}},reducers:{tab:[T.EventDefinitions,{setTab:function(j,g){var C=g.tab;return C}}]},actionToUrl:function(){return{setTab:function(g){var C=g.tab;return B[C]||U.a.events()}}},urlToAction:function(j){var g=j.actions,C=j.values;return Object.fromEntries(Object.entries(B).map(function(K){var G=n()(K,2),Y=G[0],S=G[1];return[S,function(){C.tab!==Y&&g.setTab(Y)}]}))}});function $(h){var j=h.tab,g=Object(ee.useActions)(H),C=g.setTab;return _.a.createElement(D.a,{tabPosition:"top",animated:!1,activeKey:j,onTabClick:function(G){return C(G)}},_.a.createElement(D.a.TabPane,{tab:_.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:T.EventDefinitions}),_.a.createElement(D.a.TabPane,{tab:_.a.createElement("span",{"data-attr":"data-management-actions-tab"},"Actions",_.a.createElement(te.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},_.a.createElement(V.a,{style:{marginLeft:8,marginRight:0}}))),key:T.Actions}),_.a.createElement(D.a.TabPane,{tab:_.a.createElement("span",{"data-attr":"data-management-event-properties-tab"},"Properties",_.a.createElement(te.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},_.a.createElement(V.a,{style:{marginLeft:8,marginRight:0}}))),key:T.EventPropertyDefinitions}))}try{$.displayName="DataManagementPageTabs",$.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:$.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(h){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx":function(se,v,e){"use strict";e.d(v,"a",function(){return B});var Q=e("./node_modules/core-js/modules/es.array.index-of.js"),ge=e("./node_modules/core-js/modules/es.regexp.exec.js"),z=e("./node_modules/core-js/modules/es.string.match.js"),de=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),A=e.n(de),R=e("./node_modules/react/index.js"),r=e.n(R),ie=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),re=e.n(ie),ue=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss"),q=e.n(ue),N={};N.insert="head",N.singleton=!1;var F=re()(q.a,N),n=q.a.locals||{},ce=e("./node_modules/clsx/dist/clsx.m.js"),Z=e("./node_modules/kea/lib/index.esm.js"),oe=e("./frontend/src/lib/components/LemonTable/index.ts"),_=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),ee=e("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),D=e("./frontend/src/lib/components/LemonButton/index.ts"),U=e("./node_modules/antd/es/input/index.js"),te=e("./node_modules/antd/es/button/index.js"),V=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),b=e("./frontend/src/lib/utils.tsx"),T=e("./frontend/src/lib/components/LemonButton/More.tsx");function B(H){var $=H.pageKey,h=H.actionId,j=Object(V.c)({actionId:h}),g=Object(Z.useValues)(j),C=g.appUrlsKeyed,K=g.suggestionsLoading,G=g.searchTerm,Y=g.launchUrl,S=g.appUrls,Oe=g.editUrlIndex,y=Object(Z.useActions)(j),he=y.addUrl,me=y.removeUrl,je=y.setSearchTerm,le=y.updateUrl,Te=y.newUrl,ne=y.setEditUrlIndex,Pe=[{title:"URLs",dataIndex:"url",key:"url",render:function(w,d){var ae=Object(R.useState)(d.url),L=A()(ae,2),u=L[0],J=L[1],x=Object(R.useState)(""),k=A()(x,2),X=k[0],p=k[1];Object(R.useEffect)(function(){return J(d.url)},[d]);var W=function(){if(p(""),u===V.a&&me(d.originalIndex),u.indexOf("*")>-1&&!u.match(/^(.*)\*[^\*]*\.[^\*]+\.[^\*]+$/)){p("You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.");return}if(!Object(b.eb)(u)){p("Please type a valid URL or domain.");return}if(S.indexOf(u)>-1&&S.indexOf(u,d.originalIndex)!==d.originalIndex&&S.indexOf(u,d.originalIndex+1)!==d.originalIndex){p("This URL is already registered.");return}le(d.originalIndex,u)};return d.type==="suggestion"||w!==V.a&&Oe!==d.originalIndex?r.a.createElement("div",{className:Object(ce.a)("authorized-url-col",d.type)},d.type==="authorized"&&r.a.createElement(ee.a,{style:{marginRight:4}}),w,d.type==="suggestion"&&r.a.createElement(_.a,null,"Suggestion")):r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(U.a,{value:u,onChange:function(s){return J(s.target.value)},onPressEnter:W,autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)"}),r.a.createElement(te.a,{type:"primary",onClick:W},"Save")),X&&r.a.createElement("span",{className:"text-small text-danger"},X))}},{title:"",key:"actions",render:function(w,d,ae){return r.a.createElement("div",{className:"actions-col"},d.type==="suggestion"?r.a.createElement(D.a,{type:"secondary",onClick:function(){return he(d.url)}},"Apply suggestion"):r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{type:"highlighted",href:Y(d.url),className:"mr"},"Open with Toolbar"),r.a.createElement(T.a,{overlay:r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{fullWidth:!0,type:"stealth",onClick:function(){return ne(d.originalIndex)}},"Edit authorized URL"),r.a.createElement(D.a,{fullWidth:!0,style:{color:"var(--danger)"},type:"stealth",onClick:function(){return me(ae)}},"Remove authorized URL"))})))}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"flex-center mb"},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(U.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for authorized URLs",style:{maxWidth:480},value:G,onChange:function(w){je(w.target.value)},autoFocus:$==="toolbar-launch"&&!Object(b.X)()})),r.a.createElement(D.a,{type:"primary",onClick:Te},"Add",$==="toolbar-launch"&&" authorized domain")),r.a.createElement(oe.a,{className:"authorized-urls-table",columns:Pe,dataSource:C,emptyState:G?"There are no authorized URLs that match your search.":"There are no authorized URLs or domains. Add one to get started.",loading:K}))}try{B.displayName="AuthorizedUrlsTable",B.__docgenInfo={description:"",displayName:"AuthorizedUrlsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"]={docgenInfo:B.__docgenInfo,name:"AuthorizedUrlsTable",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx#AuthorizedUrlsTable"})}catch(H){}},"./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts":function(se,v,e){"use strict";e.d(v,"b",function(){return X}),e.d(v,"a",function(){return p}),e.d(v,"c",function(){return W});var Q=e("./node_modules/core-js/modules/es.array.concat.js"),ge=e.n(Q),z=e("./node_modules/core-js/modules/es.array.filter.js"),de=e.n(z),A=e("./node_modules/core-js/modules/es.array.includes.js"),R=e.n(A),r=e("./node_modules/core-js/modules/es.array.index-of.js"),ie=e.n(r),re=e("./node_modules/core-js/modules/es.array.iterator.js"),ue=e.n(re),q=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(q),F=e("./node_modules/core-js/modules/es.array.slice.js"),n=e.n(F),ce=e("./node_modules/core-js/modules/es.array.splice.js"),Z=e.n(ce),oe=e("./node_modules/core-js/modules/es.object.assign.js"),_=e.n(oe),ee=e("./node_modules/core-js/modules/es.object.to-string.js"),D=e.n(ee),U=e("./node_modules/core-js/modules/es.regexp.exec.js"),te=e.n(U),V=e("./node_modules/core-js/modules/es.regexp.to-string.js"),b=e.n(V),T=e("./node_modules/core-js/modules/es.string.includes.js"),B=e.n(T),H=e("./node_modules/core-js/modules/es.string.iterator.js"),$=e.n(H),h=e("./node_modules/core-js/modules/es.string.search.js"),j=e.n(h),g=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),C=e.n(g),K=e("./node_modules/core-js/modules/web.url.js"),G=e.n(K),Y=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),S=e.n(Y),Oe=e("./node_modules/@babel/runtime/regenerator/index.js"),y=e.n(Oe),he=e("./node_modules/regenerator-runtime/runtime.js"),me=e.n(he),je=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),le=e.n(je),Te=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ne=e.n(Te),Pe=e("./node_modules/kea/lib/index.esm.js"),Ee=e("./frontend/src/lib/api.ts"),w=e("./frontend/src/lib/utils.tsx"),d=e("./frontend/src/scenes/teamLogic.ts"),ae=e("./frontend/src/lib/dayjs.ts"),L=e("./node_modules/fuse.js/dist/fuse.esm.js"),u=e("./node_modules/kea-router/lib/index.js"),J=e.n(u);function x(o,s){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),t.push.apply(t,a)}return t}function k(o){for(var s=1;s<arguments.length;s++){var t=arguments[s]!=null?arguments[s]:{};s%2?x(Object(t),!0).forEach(function(a){ne()(o,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(t,a))})}return o}function X(o,s,t){var a=k(k({userIntent:t?void 0:s?"edit-action":"add-action"},s?{actionId:s}:{}),o?{appUrl:o}:{});return"/api/user/redirect_to_site/"+Object(u.encodeParams)(a,"?")}var p="https://",W=Object(Pe.kea)({path:function(s){return["lib","components","AppEditorLink","appUrlsLogic",s]},key:function(s){return"".concat(s.pageKey).concat(s.actionId)||"global"},props:{},connect:{values:[d.a,["currentTeam","currentTeamId"]],actions:[d.a,["updateCurrentTeam"]]},actions:function(){return{setAppUrls:function(t){return{appUrls:t}},addUrl:function(t,a){return{url:t,launch:a}},newUrl:!0,removeUrl:function(t){return{index:t}},updateUrl:function(t,a){return{index:t,url:a}},launchAtUrl:function(t){return{url:t}},setSearchTerm:function(t){return{term:t}},setEditUrlIndex:function(t){return{originalIndex:t}}}},loaders:function(s){var t=s.values;return{suggestions:{__default:[],loadSuggestions:function(){var a=le()(y.a.mark(function O(){var M,c,m,I;return y.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c={events:[{id:"$pageview",name:"$pageview",type:"events"}],breakdown:"$current_url",date_from:Object(ae.a)().subtract(3,"days").toISOString()},E.next=3,Ee.b.get("api/projects/".concat(t.currentTeamId,"/insights/trend/?").concat(Object(w.yb)(c)));case 3:if(m=E.sent.result,!(m&&((M=m[0])===null||M===void 0?void 0:M.count)===0)){E.next=6;break}return E.abrupt("return",[]);case 6:return I=[],E.abrupt("return",(m||[]).filter(function(f){if(!f.breakdown_value)return!1;try{var i=new URL(f.breakdown_value.toString()).hostname;return I.indexOf(i)>-1||t.appUrls.filter(function(P){return P.indexOf(i)>-1}).length>0?void 0:(I.push(i),!0)}catch(P){return!1}}).map(function(f){return f.breakdown_value}).slice(0,20));case 8:case"end":return E.stop()}},O)}));function l(){return a.apply(this,arguments)}return l}()}}},events:function(s){var t=s.actions,a=s.values;return{afterMount:function(){t.loadSuggestions(),a.currentTeam&&t.setAppUrls(a.currentTeam.app_urls)}}},reducers:function(){return{appUrls:[[],{setAppUrls:function(t,a){var l=a.appUrls;return l},addUrl:function(t,a){var l=a.url;return t.concat([l])},newUrl:function(t){return t.includes(p)?t:[p].concat(t)},updateUrl:function(t,a){var l=a.index,O=a.url;return Object.assign(S()(t),ne()({},l,O))},removeUrl:function(t,a){var l=a.index,O=S()(t);return O.splice(l,1),O}}],suggestions:[[],{addUrl:function(t,a){var l=a.url;return S()(t).filter(function(O){return l!==O})}}],searchTerm:["",{setSearchTerm:function(t,a){var l=a.term;return l}}],editUrlIndex:[null,{setEditUrlIndex:function(t,a){var l=a.originalIndex;return l},removeUrl:function(t,a){var l=a.index;return t&&l<t?t-1:l===t?null:t}}]}},listeners:function(s){var t,a=s.sharedListeners,l=s.values,O=s.actions;return t={addUrl:[a.saveAppUrls,function(){var M=le()(y.a.mark(function c(m){var I,fe;return y.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:I=m.url,fe=m.launch,fe&&O.launchAtUrl(I);case 2:case"end":return f.stop()}},c)}));return function(c){return M.apply(this,arguments)}}()],removeUrl:a.saveAppUrls,updateUrl:[a.saveAppUrls,function(){return O.setEditUrlIndex(null)}]},ne()(t,d.a.actionTypes.loadCurrentTeamSuccess,function(){var M=le()(y.a.mark(function c(m){var I;return y.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:I=m.currentTeam,I&&O.setAppUrls(I.app_urls);case 2:case"end":return E.stop()}},c)}));return function(c){return M.apply(this,arguments)}}()),ne()(t,"launchAtUrl",function(c){var m=c.url;window.location.href=l.launchUrl(m)}),t},sharedListeners:function(s){var t=s.values;return{saveAppUrls:function(){d.a.actions.updateCurrentTeam({app_urls:t.appUrls})}}},selectors:function(s){var t=s.props;return{appUrlsKeyed:[function(a){return[a.appUrls,a.suggestions,a.searchTerm]},function(a,l,O){var M=a.map(function(c,m){return{url:c,type:"authorized",originalIndex:m}}).concat(l.map(function(c,m){return{url:c,type:"suggestion",originalIndex:m}}));return O?new L.a(M,{keys:["url"],threshold:.3}).search(O).map(function(c){return c.item}):M}],launchUrl:[function(){return[]},function(){return function(a){return X(a,t.actionId,!t.actionId)}}]}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.scss":function(se,v,e){var Q=e("./node_modules/css-loader/dist/runtime/api.js");v=Q(!1),v.push([se.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.authorized-urls-table .authorized-url-col{display:flex;align-items:center}.authorized-urls-table .authorized-url-col .lemon-tag{margin-left:6px}.authorized-urls-table .authorized-url-col.suggestion{color:#747ea1}.authorized-urls-table .authorized-url-col.authorized{color:var(--success)}.authorized-urls-table .actions-col{display:flex;align-items:center;justify-content:flex-end}",""]),se.exports=v}}]);
