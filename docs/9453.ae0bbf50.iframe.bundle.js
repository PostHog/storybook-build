(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[9453],{"./frontend/src/lib/components/BridgePage/BridgePage.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{N:function(){return BridgePage_BridgePage_BridgePage}});var clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),posthog_logo_cloud=__webpack_require__.p+"images/posthog-logo-cloud.ff39f38d10e1d8769248bd773fc42a24.svg",posthog_logo_demo=__webpack_require__.p+"images/posthog-logo-demo.a5b7691e421e187226625869bf85673a.svg",posthog_logo=__webpack_require__.p+"images/posthog-logo.1e8f704e9f5c893139d4ad8dcb7e2954.svg",preflightLogic=__webpack_require__("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function WelcomeLogo(_ref){let{view:view}=_ref;const UTM_TAGS=`utm_campaign=in-product&utm_tag=${view||"welcome"}-header`,{preflight:preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,jsx_runtime.jsx)("a",{href:`https://posthog.com?${UTM_TAGS}`,children:(0,jsx_runtime.jsx)("div",{className:"header-logo",children:(0,jsx_runtime.jsx)("img",{src:preflight?.demo?posthog_logo_demo:preflight?.cloud?posthog_logo_cloud:posthog_logo,alt:"PostHog"+(preflight?.cloud?" Cloud":"")})})})}try{WelcomeLogo.displayName="WelcomeLogo",WelcomeLogo.__docgenInfo={description:"",displayName:"WelcomeLogo",props:{view:{defaultValue:null,description:"",name:"view",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/authentication/WelcomeLogo.tsx#WelcomeLogo"]={docgenInfo:WelcomeLogo.__docgenInfo,name:"WelcomeLogo",path:"frontend/src/scenes/authentication/WelcomeLogo.tsx#WelcomeLogo"})}catch(__react_docgen_typescript_loader_error){}var CSSTransition=__webpack_require__("./node_modules/.pnpm/react-transition-group@4.4.5_react-dom@16.14.0_react@16.14.0/node_modules/react-transition-group/esm/CSSTransition.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),BridgePage=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/BridgePage/BridgePage.scss"),BridgePage_default=__webpack_require__.n(BridgePage),options={insert:"head",singleton:!1},hedgehogs=(injectStylesIntoStyleTag_default()(BridgePage_default(),options),BridgePage_default().locals,__webpack_require__("./frontend/src/lib/components/hedgehogs.tsx")),types=__webpack_require__("./frontend/src/types.ts");function BridgePage_BridgePage_BridgePage(_ref){let{children:children,className:className,header:header,footer:footer,view:view,message:message,noLogo:noLogo=!1,sideLogo:sideLogo=!1,fixedWidth:fixedWidth=!0,leftContainerContent:leftContainerContent,hedgehog:hedgehog=!1,fullScreen:fullScreen=!0}=_ref;const[messageShowing,setMessageShowing]=(0,react.useState)(!1),{preflight:preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,react.useEffect)((()=>{const t=setTimeout((()=>{setMessageShowing(!0)}),200);return()=>clearTimeout(t)}),[]),(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("BridgePage",fixedWidth&&"BridgePage--fixed-width",fullScreen&&"h-screen overflow-hidden",className),children:[(0,jsx_runtime.jsxs)("div",{className:"BridgePage__main",children:[leftContainerContent||hedgehog?(0,jsx_runtime.jsx)("div",{className:"BridgePage__left-wrapper",children:(0,jsx_runtime.jsxs)("div",{className:"BridgePage__left",children:[!noLogo&&sideLogo&&(0,jsx_runtime.jsx)("div",{className:"BridgePage__header-logo mb-4",children:(0,jsx_runtime.jsx)(WelcomeLogo,{view:view})}),leftContainerContent&&leftContainerContent,hedgehog&&(0,jsx_runtime.jsxs)("div",{className:"BridgePage__left__art",children:[preflight?.region===types.yp.EU?(0,jsx_runtime.jsx)(hedgehogs.LaptopHogEU,{alt:"",draggable:"false"}):(0,jsx_runtime.jsx)(hedgehogs.LaptopHog4,{alt:"",draggable:"false"}),message?(0,jsx_runtime.jsx)(CSSTransition.Z,{in:messageShowing,timeout:200,classNames:"BridgePage__left__message-",children:(0,jsx_runtime.jsx)("div",{className:"BridgePage__left__message",children:message})}):null]})]})}):null,(0,jsx_runtime.jsxs)("div",{className:"BridgePage__content-wrapper",children:[!noLogo&&(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("BridgePage__header-logo",{mobile:sideLogo}),children:(0,jsx_runtime.jsx)(WelcomeLogo,{view:view})}),(0,jsx_runtime.jsx)("div",{className:"BridgePage__header",children:header}),(0,jsx_runtime.jsx)("div",{className:"BridgePage__content",children:children})]})]}),(0,jsx_runtime.jsx)("div",{className:"BridgePage__footer",children:footer})]})}try{BridgePage_BridgePage_BridgePage.displayName="BridgePage",BridgePage_BridgePage_BridgePage.__docgenInfo={description:"",displayName:"BridgePage",props:{hedgehog:{defaultValue:{value:"false"},description:"",name:"hedgehog",required:!1,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},footer:{defaultValue:null,description:"",name:"footer",required:!1,type:{name:"ReactNode"}},header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"ReactNode"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"string"}},noLogo:{defaultValue:{value:"false"},description:"",name:"noLogo",required:!1,type:{name:"boolean"}},sideLogo:{defaultValue:{value:"false"},description:"",name:"sideLogo",required:!1,type:{name:"boolean"}},fixedWidth:{defaultValue:{value:"true"},description:"",name:"fixedWidth",required:!1,type:{name:"boolean"}},leftContainerContent:{defaultValue:null,description:"",name:"leftContainerContent",required:!1,type:{name:"Element"}},fullScreen:{defaultValue:{value:"true"},description:"",name:"fullScreen",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/BridgePage/BridgePage.tsx#BridgePage"]={docgenInfo:BridgePage_BridgePage_BridgePage.__docgenInfo,name:"BridgePage",path:"frontend/src/lib/components/BridgePage/BridgePage.tsx#BridgePage"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/authentication/Login2FA.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Login2FA:function(){return Login2FA}});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),preflightLogic=__webpack_require__("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),loginLogic=__webpack_require__("./frontend/src/scenes/authentication/loginLogic.ts");const login2FALogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","authentication","login2FALogic"]),(0,index_esm.connect)({values:[preflightLogic.preflightLogic,["preflight"],featureFlagLogic.h,["featureFlags"]]}),(0,index_esm.actions)({setGeneralError:(code,detail)=>({code:code,detail:detail}),setLoginStep:step=>({step:step}),clearGeneralError:!0}),(0,index_esm.reducers)({generalError:[null,{setGeneralError:(_,error)=>error,clearGeneralError:()=>null}]}),(0,lib.forms)((_ref=>{let{actions:actions}=_ref;return{twofactortoken:{defaults:{token:""},errors:_ref2=>{let{token:token}=_ref2;return{token:token?6!==token.length||isNaN(parseInt(token))?"A token must consist of 6 digits":null:"Please enter a token to continue"}},submit:async(_ref3,breakpoint)=>{let{token:token}=_ref3;await breakpoint();try{return await api.ZP.create("api/login/token",{token:token})}catch(e){const{code:code}=e,{detail:detail}=e;throw actions.setGeneralError(code,detail),e}}}}})),(0,index_esm.listeners)({submitTwofactortokenSuccess:()=>{(0,loginLogic.w)(),window.location.reload()}})]);var Field=__webpack_require__("./frontend/src/lib/forms/Field.tsx"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),BridgePage=__webpack_require__("./frontend/src/lib/components/BridgePage/BridgePage.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function Login2FA(){const{isTwofactortokenSubmitting:isTwofactortokenSubmitting,generalError:generalError}=(0,index_esm.useValues)(login2FALogic),{preflight:preflight}=(0,index_esm.useValues)(preflightLogic.preflightLogic);return(0,jsx_runtime.jsx)(BridgePage.N,{view:"login",hedgehog:!0,message:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Welcome to",(0,jsx_runtime.jsx)("br",{})," PostHog",preflight?.cloud?" Cloud":"","!"]}),children:(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h2",{children:"Two-Factor Authentication"}),(0,jsx_runtime.jsx)("p",{children:"Enter a token from your authenticator app."}),(0,jsx_runtime.jsxs)(lib.Form,{logic:login2FALogic,formKey:"twofactortoken",enableFormOnSubmit:!0,className:"space-y-4",children:[generalError&&(0,jsx_runtime.jsx)(LemonBanner.V,{type:"error",children:generalError.detail}),(0,jsx_runtime.jsx)(Field.g,{name:"token",label:"Authenticator token",children:(0,jsx_runtime.jsx)(src.LemonInput,{className:"ph-ignore-input",autoFocus:!0,"data-attr":"token",placeholder:"123456",inputMode:"numeric",autoComplete:"one-time-code"})}),(0,jsx_runtime.jsx)(src.LemonButton,{htmlType:"submit","data-attr":"2fa-login",fullWidth:!0,type:"primary",center:!0,loading:isTwofactortokenSubmitting,children:"Login"})]})]})})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/BridgePage/BridgePage.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,'.BridgePage{background-color:var(--bg-bridge);position:relative;display:flex;flex-direction:column;flex:1;overflow:scroll;-ms-overflow-style:none}.BridgePage::-webkit-scrollbar{width:0!important}.BridgePage .BridgePage__main{display:flex;justify-content:center;align-items:center;flex:1;padding:1rem}.BridgePage .BridgePage__content-wrapper{max-width:100%}.BridgePage .BridgePage__left-wrapper{margin-right:60px;display:none}@media screen and (min-width:768px){.BridgePage .BridgePage__left-wrapper{display:block;visibility:visible}}.BridgePage .BridgePage__content{position:relative;box-shadow:var(--shadow-elevation);width:100%;padding:2rem;background-color:#fff;border-radius:var(--radius)}.BridgePage .BridgePage__content h2{font-weight:700;text-align:center}.BridgePage .BridgePage__footer{display:flex;justify-content:center;gap:10%;margin:1rem 0;color:var(--muted);font-weight:500;width:100%}.BridgePage .BridgePage__left{position:relative;visibility:none;display:none}.BridgePage .BridgePage__left img{height:300px}.BridgePage .BridgePage__left .BridgePage__left__art{margin-top:50px}.BridgePage .BridgePage__left .BridgePage__left__message{position:absolute;left:265px;bottom:220px;max-width:150px;background-color:var(--default);border-radius:.75rem;padding:.5rem .75rem;color:#fff;font-size:.8em;font-weight:600;opacity:0;transition-timing-function:cubic-bezier(.455,.03,.31,1.585)}.BridgePage .BridgePage__left .BridgePage__left__message:after{position:absolute;top:100%;left:20px;margin-top:-10px;content:" ";border:10px solid transparent;border-left:10px solid var(--default)}.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter{opacity:0;transform:translateY(50px) rotate(0deg) scale(.5)}.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter-active,.BridgePage .BridgePage__left .BridgePage__left__message.BridgePage__left__message--enter-done{opacity:1;transform:translateY(0) rotate(5deg) scale(1);transition:opacity .2s,transform .2s}@media(prefers-reduced-motion){.BridgePage .BridgePage__left .BridgePage__left__message{transition:none}}@media screen and (min-width:768px){.BridgePage .BridgePage__left{display:block;visibility:visible}}.BridgePage .BridgePage__cta{max-width:400px}.BridgePage .BridgePage__header-logo.mobile{display:block}@media screen and (min-width:768px){.BridgePage .BridgePage__header-logo.mobile{display:none}}.BridgePage .BridgePage__header-logo .header-logo{padding-bottom:3rem;text-align:center}.BridgePage .BridgePage__header-logo .header-logo img{height:24px}@media screen and (min-width:768px){.BridgePage.BridgePage--fixed-width .BridgePage__content{max-width:400px;width:400px}}',""]),module.exports=exports}}]);