"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[11427],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ActionsTable:function(){return ActionsTable},scene:function(){return scene}});var Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),es_radio=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/radio/index.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),actionsModel=__webpack_require__("./frontend/src/models/actionsModel.ts"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),AuthorizedUrlList=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),authorizedUrlListLogic=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function NewActionButton(_ref){let{onSelectOption:onSelectOption}=_ref;const[visible,setVisible]=(0,react.useState)(!1),[appUrlsVisible,setAppUrlsVisible]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonButton.Jp,{type:"primary",onClick:()=>setVisible(!0),"data-attr":"create-action",children:"New action"}),(0,jsx_runtime.jsx)(src.LemonModal,{isOpen:visible,onClose:()=>{setVisible(!1),setAppUrlsVisible(!1)},title:"Create new action",footer:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[appUrlsVisible&&(0,jsx_runtime.jsx)(LemonButton.Jp,{type:"secondary",onClick:()=>setAppUrlsVisible(!1),children:"Back"},"back-button"),(0,jsx_runtime.jsx)(LemonButton.Jp,{type:"secondary",onClick:()=>{setVisible(!1),setAppUrlsVisible(!1)},children:"Cancel"},"cancel-button")]}),children:appUrlsVisible?(0,jsx_runtime.jsx)("div",{className:"max-w-160",children:(0,jsx_runtime.jsx)(AuthorizedUrlList.t,{type:authorizedUrlListLogic.uw.TOOLBAR_URLS})}):(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(LemonButton.Jp,{type:"secondary",icon:(0,jsx_runtime.jsx)(icons.j$p,{}),onClick:()=>setAppUrlsVisible(!0),size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect",children:"Inspect element on your site"}),(0,jsx_runtime.jsx)(LemonButton.Jp,{type:"secondary",icon:(0,jsx_runtime.jsx)(icons.yl5,{}),onClick:()=>{onSelectOption?.(),lib.router.actions.push(urls.j.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview",children:"From event or pageview"})]})})]})}try{NewActionButton.displayName="NewActionButton",NewActionButton.__docgenInfo={description:"",displayName:"NewActionButton",props:{onSelectOption:{defaultValue:null,description:"",name:"onSelectOption",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/NewActionButton.tsx#NewActionButton"]={docgenInfo:NewActionButton.__docgenInfo,name:"NewActionButton",path:"frontend/src/scenes/actions/NewActionButton.tsx#NewActionButton"})}catch(__react_docgen_typescript_loader_error){}var types=__webpack_require__("./frontend/src/types.ts"),userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),api=__webpack_require__("./frontend/src/lib/api.ts"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),DataManagementPageTabs=__webpack_require__("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),actionsLogic=__webpack_require__("./frontend/src/scenes/actions/actionsLogic.ts"),ProductIntroduction=__webpack_require__("./frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx");const scene={component:ActionsTable,logic:actionsLogic.M};function ActionsTable(){const{currentTeam:currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),{actionsLoading:actionsLoading}=(0,index_esm.useValues)((0,actionsModel.D)({params:"include_count=1"})),{loadActions:loadActions}=(0,index_esm.useActions)(actionsModel.D),{filterByMe:filterByMe,searchTerm:searchTerm,actionsFiltered:actionsFiltered,shouldShowProductIntroduction:shouldShowProductIntroduction,shouldShowEmptyState:shouldShowEmptyState}=(0,index_esm.useValues)(actionsLogic.M),{setFilterByMe:setFilterByMe,setSearchTerm:setSearchTerm}=(0,index_esm.useActions)(actionsLogic.M),{hasAvailableFeature:hasAvailableFeature}=(0,index_esm.useValues)(userLogic.userLogic),{updateHasSeenProductIntroFor:updateHasSeenProductIntroFor}=(0,index_esm.useActions)(userLogic.userLogic),columns=[{title:"Name",dataIndex:"name",width:"25%",sorter:(a,b)=>(a.name||"").localeCompare(b.name||""),render:function RenderName(name,action,index){return(0,jsx_runtime.jsx)(Link.r,{"data-attr":"action-link-"+index,to:urls.j.action(action.id),className:"row-name",children:name||(0,jsx_runtime.jsx)("i",{children:"Unnamed action"})})}},{title:"Type",key:"type",render:function RenderType(_,action){return(0,jsx_runtime.jsx)("span",{children:action.steps?.length?action.steps.map((step=>(0,jsx_runtime.jsx)("div",{children:(()=>{let url=(0,utils.VV)(step.url||"");switch(url=url.slice(0,40)+(url.length>40?"...":""),step.event){case"$autocapture":return"Autocapture";case"$pageview":switch(step.url_matching){case"regex":return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Page view URL matches regex ",(0,jsx_runtime.jsx)("strong",{children:url})]});case"exact":return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Page view URL matches exactly ",(0,jsx_runtime.jsx)("strong",{children:url})]});default:return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Page view URL contains ",(0,jsx_runtime.jsx)("strong",{children:url})]})}case"":case null:case void 0:return"Any event";default:return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Event: ",(0,jsx_runtime.jsx)("strong",{children:step.event})]})}})()},step.id))):(0,jsx_runtime.jsx)("i",{children:"Empty â€“ set this action up"})})}},...hasAvailableFeature(types.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function renderTags(tags){return(0,jsx_runtime.jsx)(ObjectTags.D,{tags:tags,staticOnly:!0})}}]:[],(0,columnUtils.J)(),(0,columnUtils.r)(),...currentTeam?.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:(a,b)=>Number(a.post_to_slack)-Number(b.post_to_slack),render:function RenderActions(post_to_slack){return post_to_slack?(0,jsx_runtime.jsx)(icons.DLh,{}):null}}]:[],{width:0,render:function RenderActions(_,action){return(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonButton.Jp,{status:"stealth",to:urls.j.action(action.id),fullWidth:!0,children:"Edit"}),(0,jsx_runtime.jsx)(LemonButton.Jp,{status:"stealth",to:urls.j.copyAction(action),fullWidth:!0,children:"Copy"}),(0,jsx_runtime.jsx)(LemonButton.Jp,{status:"stealth",to:(0,lib.combineUrl)(urls.j.replay(),{filters:{actions:[{id:action.id,type:"actions",order:0,name:action.name}]}}).url,sideIcon:(0,jsx_runtime.jsx)(icons.UdX,{}),fullWidth:!0,"data-attr":"action-table-view-recordings",children:"View recordings"}),(0,jsx_runtime.jsx)(LemonButton.Jp,{status:"stealth",to:(0,lib.combineUrl)(urls.j.insightNew({insight:types.dw.TRENDS,interval:"day",display:types.Qb.ActionsLineGraph,actions:[{id:action.id,name:action.name,type:"actions",order:0}]})).url,fullWidth:!0,children:"Try out in Insights"}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(LemonButton.Jp,{status:"danger",onClick:()=>(0,utils.S5)({endpoint:api.ZP.actions.determineDeleteEndpoint(),object:action,callback:loadActions}),fullWidth:!0,children:"Delete action"})]})})}}];return(0,jsx_runtime.jsxs)("div",{"data-attr":"manage-events-table",children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0,buttons:(0,jsx_runtime.jsx)(NewActionButton,{})}),(0,jsx_runtime.jsx)(DataManagementPageTabs.q,{tab:DataManagementPageTabs.H.Actions}),(shouldShowEmptyState||shouldShowProductIntroduction)&&(0,jsx_runtime.jsx)(ProductIntroduction.C,{productName:"Actions",productKey:types.Md.ACTIONS,thingName:"action",isEmpty:shouldShowEmptyState,description:"Use actions to combine events that you want to have tracked together or to make detailed Autocapture events easier to reuse.",docsURL:"https://posthog.com/docs/data/actions",actionElementOverride:(0,jsx_runtime.jsx)(NewActionButton,{onSelectOption:()=>updateHasSeenProductIntroFor(types.Md.ACTIONS,!0)})}),shouldShowEmptyState&&filterByMe||!shouldShowEmptyState?(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4",children:[(0,jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for actions",onChange:setSearchTerm,value:searchTerm}),(0,jsx_runtime.jsxs)(es_radio.ZP.Group,{buttonStyle:"solid",value:filterByMe,onChange:e=>setFilterByMe(e.target.value),children:[(0,jsx_runtime.jsx)(es_radio.ZP.Button,{value:!1,children:"All actions"}),(0,jsx_runtime.jsx)(es_radio.ZP.Button,{value:!0,children:"My actions"})]})]}):null,(!shouldShowEmptyState||filterByMe)&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(LemonTable.g,{columns:columns,loading:actionsLoading,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:actionsFiltered,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"No results. Create a new action?"})})]})}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{H:function(){return DataManagementTab},q:function(){return DataManagementPageTabs}});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),scenes_urls__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),lib_components_TitleWithIcon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/TitleWithIcon.tsx"),lib_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/constants.tsx"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_lemon_ui_LemonTag_LemonTag__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");let DataManagementTab=function(DataManagementTab){return DataManagementTab.Actions="actions",DataManagementTab.EventDefinitions="events",DataManagementTab.PropertyDefinitions="properties",DataManagementTab.History="history",DataManagementTab.IngestionWarnings="warnings",DataManagementTab.Database="database",DataManagementTab}({});const tabUrls={[DataManagementTab.PropertyDefinitions]:scenes_urls__WEBPACK_IMPORTED_MODULE_1__.j.propertyDefinitions(),[DataManagementTab.EventDefinitions]:scenes_urls__WEBPACK_IMPORTED_MODULE_1__.j.eventDefinitions(),[DataManagementTab.Actions]:scenes_urls__WEBPACK_IMPORTED_MODULE_1__.j.actions(),[DataManagementTab.History]:scenes_urls__WEBPACK_IMPORTED_MODULE_1__.j.dataManagementHistory(),[DataManagementTab.IngestionWarnings]:scenes_urls__WEBPACK_IMPORTED_MODULE_1__.j.ingestionWarnings(),[DataManagementTab.Database]:scenes_urls__WEBPACK_IMPORTED_MODULE_1__.j.database()},eventsTabsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_6__.h,["featureFlags"]]},actions:{setTab:tab=>({tab:tab})},reducers:{tab:[DataManagementTab.EventDefinitions,{setTab:(_,_ref)=>{let{tab:tab}=_ref;return tab}}]},selectors:{showWarningsTab:[s=>[s.featureFlags],featureFlags=>!!featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_5__.y8.INGESTION_WARNINGS_ENABLED]]},actionToUrl:()=>({setTab:_ref2=>{let{tab:tab}=_ref2;return tabUrls[tab]||scenes_urls__WEBPACK_IMPORTED_MODULE_1__.j.events()}}),urlToAction:_ref3=>{let{actions:actions,values:values}=_ref3;return Object.fromEntries(Object.entries(tabUrls).map((_ref4=>{let[key,url]=_ref4;return[url,()=>{values.tab!==key&&actions.setTab(key)}]})))}});function DataManagementPageTabs(_ref5){let{tab:tab}=_ref5;const{showWarningsTab:showWarningsTab}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(eventsTabsLogic),{setTab:setTab}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(eventsTabsLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_8__.T,{activeKey:tab,onChange:t=>setTab(t),tabs:[{key:DataManagementTab.EventDefinitions,label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},{key:DataManagementTab.Actions,label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_TitleWithIcon__WEBPACK_IMPORTED_MODULE_4__.H,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_3__.aUG,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},{key:DataManagementTab.PropertyDefinitions,label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_components_TitleWithIcon__WEBPACK_IMPORTED_MODULE_4__.H,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_3__.aUG,{})}),"data-attr":"data-management-event-properties-tab",children:"Properties"})},{key:DataManagementTab.History,label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{"data-attr":"data-management-history-tab",children:"History"})},showWarningsTab&&{key:DataManagementTab.IngestionWarnings,label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},{key:DataManagementTab.Database,label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("span",{"data-attr":"data-management-database-tab",children:["Database",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(lib_lemon_ui_LemonTag_LemonTag__WEBPACK_IMPORTED_MODULE_7__.o,{type:"warning",className:"uppercase ml-2",children:"Beta"})]})}]})})}try{DataManagementPageTabs.displayName="DataManagementPageTabs",DataManagementPageTabs.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"history"'},{value:'"warnings"'},{value:'"database"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:DataManagementPageTabs.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(__react_docgen_typescript_loader_error){}}}]);