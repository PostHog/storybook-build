var te=(R,j,n)=>new Promise((g,p)=>{var C=O=>{try{P(n.next(O))}catch(h){p(h)}},V=O=>{try{P(n.throw(O))}catch(h){p(h)}},P=O=>O.done?g(O.value):Promise.resolve(O.value).then(C,V);P((n=n.apply(R,j)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss":function(R,j,n){"use strict";var g=n("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),p=n.n(g),C=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss"),V=n.n(C),P={};P.insert="head",P.singleton=!1;var O=p()(V.a,P),h=V.a.locals||{}},"./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx":function(R,j,n){"use strict";n.d(j,"a",function(){return W});var g=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),p=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),C=n("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),V=n("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss"),P=n("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),O=n("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),h=n("./frontend/@posthog/lemon-ui/src/index.ts"),_=n("./frontend/src/lib/components/icons.tsx"),me=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),N=n("./frontend/src/lib/components/TaxonomicFilter/types.ts"),ge=n("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),fe=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),J=n("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),E=n("./frontend/src/types.ts"),ye=n("./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),A=n.n(ye),e=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const ne=t=>{var o,i;return(o=t.actions)!==null&&o!==void 0&&o.length||(i=t.events)!==null&&i!==void 0&&i.length?{actions:t.actions,events:t.events}:{actions:[],events:[],new_entity:[{id:"empty",type:E.p.NEW_ENTITY,order:0,name:"empty"}]}};function z(t){let{filters:o,setFilters:i,showPropertyFilters:r}=t;const[s,l]=Object(g.useState)(ne(o));return Object(g.useEffect)(()=>{(!A()(o.actions,s.actions)||!A()(o.events,s.events))&&i({actions:s.actions,events:s.events})},[s]),Object(g.useEffect)(()=>{(!A()(o.actions,s.actions)||!A()(o.events,s.events))&&l(ne(o))},[o]),Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"border rounded p-4",children:[Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(J.a,{info:"Show recordings where all of the events or actions listed below happen.",children:"Filter by events and actions"}),Object(e.jsx)(me.a,{bordered:!0,filters:s,setFilters:d=>{l(d)},typeKey:"session-recordings",mathAvailability:fe.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[N.a.Actions,N.a.Events],propertiesTaxonomicGroupTypes:[N.a.EventProperties,N.a.EventFeatureFlags,N.a.Elements],propertyFiltersPopover:!0})]}),r&&Object(e.jsxs)("div",{className:"mt-4 space-y-2",children:[Object(e.jsx)(J.a,{info:"Show recordings by persons who match the set criteria",children:"Filter by persons and cohorts"}),Object(e.jsx)(ge.a,{pageKey:"session-recordings",taxonomicGroupTypes:[N.a.PersonProperties,N.a.Cohorts],propertyFilters:o.properties,onChange:d=>{i({properties:d})}})]})]})})}try{z.displayName="SessionRecordingsFilters",z.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"RecordingFilters"}},setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(filters: RecordingFilters) => void"}},showPropertyFilters:{defaultValue:null,description:"",name:"showPropertyFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"]={docgenInfo:z.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/filters/SessionRecordingsFilters.tsx#SessionRecordingsFilters"})}catch(t){}var je=n("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),D=n("./frontend/src/lib/utils/eventUsageLogic.ts"),_e=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),be=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/space/index.js"),xe=n("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),he=n("./frontend/src/lib/components/Popup/Popup.tsx"),oe=n("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx");let ie;(function(t){t.SECONDS="seconds",t.MINUTES="minutes",t.HOURS="hours"})(ie||(ie={}));const ve=Object(p.kea)({path:t=>["scenes","session-recordings","DurationFilterLogic",t],key:t=>t.pageKey||"global",props:{},actions:{setValue:t=>({value:t}),setIsOpen:t=>({isOpen:t}),setOperator:t=>({operator:t})},reducers:t=>{var o,i;let{props:r}=t;return{operator:[r==null||(o=r.initialFilter)===null||o===void 0?void 0:o.operator,{setOperator:(s,l)=>{let{operator:d}=l;return d}}],value:[r==null||(i=r.initialFilter)===null||i===void 0?void 0:i.value,{setValue:(s,l)=>{let{value:d}=l;return d}}],isOpen:[!1,{setIsOpen:(s,l)=>{let{isOpen:d}=l;return d}}]}},selectors:{durationString:[t=>[t.operator,t.value],(t,o)=>{let i="";t===E.P.GreaterThan?i+="> ":i+="< ";const r=Object(oe.b)(o||0);return i+=r.timeValue||0,r.timeValue===1?i+=" "+r.unit.slice(0,-1):i+=" "+r.unit,i}]},listeners:t=>{let{props:o,values:i}=t;const r=s=>{let{value:l,operator:d}=s;o.onChange({operator:d||i.operator,value:l||i.value||0,type:E.N.Recording,key:"duration"})};return{setValue:s=>{let{value:l}=s;return r({value:l})},setOperator:s=>{let{operator:l}=s;return r({operator:l})}}}});function M(t){let{initialFilter:o,onChange:i,pageKey:r}=t;const s=ve({initialFilter:o,onChange:i,pageKey:r}),{setValue:l,setIsOpen:d,setOperator:m}=Object(p.useActions)(s),{durationString:y,value:b,operator:v,isOpen:x}=Object(p.useValues)(s);return Object(e.jsx)(he.a,{visible:x,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:()=>d(!1),overlay:Object(e.jsx)(_e.a,{children:Object(e.jsxs)(be.b,{children:[Object(e.jsx)(xe.a,{operator:v,operators:[E.P.GreaterThan,E.P.LessThan],onChange:I=>{m(I)}}),Object(e.jsx)(oe.a,{onChange:l,initialValue:b||0})]})}),children:Object(e.jsx)(h.LemonButton,{type:"secondary",status:"stealth",size:"small",onClick:()=>{d(!0)},children:y})})}try{M.displayName="DurationFilter",M.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"]={docgenInfo:M.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/filters/DurationFilter.tsx#DurationFilter"})}catch(t){}var L=n("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),U=n("./frontend/src/lib/components/Tooltip.tsx"),Z=n("./frontend/src/lib/utils.tsx"),Oe=n("./frontend/src/lib/components/PropertyIcon.tsx"),Se=n("./frontend/src/scenes/persons/PersonHeader.tsx"),Re=n("./frontend/src/lib/components/TZLabel/index.tsx"),Q=n("./frontend/src/lib/components/LemonSkeleton/index.tsx"),Pe=n("./frontend/src/lib/constants.tsx"),Ie=n("./frontend/src/lib/logic/featureFlagLogic.ts");function Y(t){let{recording:o,className:i}=t;const{featureFlags:r}=Object(p.useValues)(Ie.a);return!r[Pe.i.RECORDING_DEBUGGING]?null:Object(e.jsx)(U.a,{title:Object(e.jsxs)("ul",{children:[Object(e.jsxs)("li",{children:["ID: ",Object(e.jsx)("b",{children:o.id})]}),Object(e.jsxs)("li",{children:["Storage: ",Object(e.jsx)("b",{children:o.storage})]})]}),children:Object(e.jsx)(_.IconInfo,{className:Object(L.default)("text-sm",i)})})}try{Y.displayName="RecordingDebugInfo",Y.__docgenInfo={description:"",displayName:"RecordingDebugInfo",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/debug/RecordingDebugInfo.tsx#RecordingDebugInfo"]={docgenInfo:Y.__docgenInfo,name:"RecordingDebugInfo",path:"frontend/src/scenes/session-recordings/debug/RecordingDebugInfo.tsx#RecordingDebugInfo"})}catch(t){}function G(t){var o,i,r;let{recording:s,isActive:l,onClick:d,onPropertyClick:m,recordingProperties:y,recordingPropertiesLoading:b}=t;const x=Object(Z.n)(s.recording_duration).split(":"),I=Object(L.default)("SessionRecordingsPlaylist__list-item__property-icon text-base text-muted-alt",!l&&"opacity-75"),w=["$browser","$device_type","$os","$geoip_country_code"],u=y&&Object.keys(y).length>0?y:((o=s.person)===null||o===void 0?void 0:o.properties)||{},$=Object(e.jsx)("div",{className:"flex flex-row flex-nowrap shrink-0 gap-1 h-6 ph-no-capture",children:b?Object(e.jsx)(Q.a,{className:"w-18 my-1"}):w.map(a=>{let k=u==null?void 0:u[a];a==="$device_type"&&(k=(u==null?void 0:u.$device_type)||(u==null?void 0:u.$initial_device_type));let f=k;return a==="$geoip_country_code"&&(f=`${u==null?void 0:u.$geoip_country_name} (${k})`),Object(e.jsx)(Oe.b,{onClick:m,className:I,property:a,value:k,tooltipTitle:()=>{var F;return Object(e.jsxs)("div",{className:"text-center",children:["Click to filter for",Object(e.jsx)("br",{}),Object(e.jsx)("span",{className:"font-medium",children:(F=f)!==null&&F!==void 0?F:"N/A"})]})}},a)})}),B=(i=s.start_url)===null||i===void 0?void 0:i.replace(/https?:\/\//g,"").split(/[?|#]/)[0];return Object(e.jsxs)("li",{className:Object(L.default)("SessionRecordingsPlaylist__list-item","flex flex-row py-2 pr-4 pl-0 cursor-pointer relative overflow-hidden",l&&"bg-primary-highlight"),onClick:()=>d(),children:[Object(e.jsx)("div",{className:"w-2 h-2 mx-2",children:s.viewed?null:Object(e.jsx)(U.a,{title:"Indicates the recording has not been watched yet",children:Object(e.jsx)("div",{className:"w-2 h-2 mt-2 rounded-full bg-primary-light","aria-label":"unwatched-recording-label"})})}),Object(e.jsxs)("div",{className:"grow overflow-hidden space-y-px",children:[Object(e.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[Object(e.jsxs)("div",{className:"flex items-center gap-1 shrink overflow-hidden",children:[((r=s.pinned_count)!==null&&r!==void 0?r:0)>0&&Object(e.jsx)(U.a,{placement:"topRight",title:`This recording is pinned on ${s.pinned_count} playlists`,children:Object(e.jsx)(_.IconPin,{className:"text-sm text-orange shrink-0"})}),Object(e.jsx)("div",{className:"truncate font-medium text-primary ph-no-capture",children:Object(Se.b)(s.person)})]}),Object(e.jsx)("div",{className:"flex-1"}),Object(e.jsxs)("div",{className:"flex items-center flex-1 justify-end font-semibold",children:[Object(e.jsx)(_.IconSchedule,{className:I}),Object(e.jsxs)("span",{children:[Object(e.jsxs)("span",{className:Object(L.default)(x[0]==="00"&&"opacity-50 font-normal"),children:[x[0],":"]}),Object(e.jsxs)("span",{className:Object(L.default)({"opacity-50 font-normal":x[0]==="00"&&x[1]==="00"}),children:[x[1],":"]}),x[2]]})]})]}),Object(e.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[Object(e.jsxs)("div",{className:"flex iems-center gap-2 text-xs text-muted-alt",children:[$,Object(e.jsxs)("span",{title:`Click count: ${s.click_count}`,className:"flex items-center gap-1  overflow-hidden shrink-0",children:[Object(e.jsx)(_.IconAutocapture,{}),s.click_count]}),Object(e.jsxs)("span",{title:`Keyboard inputs: ${s.keypress_count}`,className:"flex items-center gap-1  overflow-hidden shrink-0",children:[Object(e.jsx)(_.IconKeyboard,{}),s.keypress_count]})]}),Object(e.jsx)(Re.a,{className:"overflow-hidden text-ellipsis text-xs",time:s.start_time})]}),Object(e.jsx)("div",{className:"flex items-center justify-between gap-4 w-2/3",children:Object(e.jsx)("span",{className:"flex items-center gap-1 overflow-hidden text-muted text-xs",children:Object(e.jsx)("span",{title:`First URL: ${s.start_url}`,className:"truncate",children:B})})})]}),Object(e.jsx)(Y,{recording:s,className:"absolute right-0 bottom-0 m-2"})]},s.id)}function Ce(){return Object(e.jsxs)("div",{className:"p-4 space-y-2",children:[Object(e.jsx)(Q.a,{className:"w-1/2"}),Object(e.jsx)(Q.a,{className:"w-1/3"})]})}try{G.displayName="SessionRecordingPlaylistItem",G.__docgenInfo={description:"",displayName:"SessionRecordingPlaylistItem",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}},recordingProperties:{defaultValue:null,description:"",name:"recordingProperties",required:!1,type:{name:"Record<string, any>"}},recordingPropertiesLoading:{defaultValue:null,description:"",name:"recordingPropertiesLoading",required:!0,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},onPropertyClick:{defaultValue:null,description:"",name:"onPropertyClick",required:!0,type:{name:"(property: string, value?: string | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylistItem.tsx#SessionRecordingPlaylistItem"]={docgenInfo:G.__docgenInfo,name:"SessionRecordingPlaylistItem",path:"frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylistItem.tsx#SessionRecordingPlaylistItem"})}catch(t){}var ke=n("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),Fe=n("./frontend/src/lib/api.ts");const Ne=Object(p.kea)([Object(p.path)(t=>["scenes","session-recordings","playlist","sessionRecordingsListPropertiesLogic",t]),Object(p.props)({}),Object(p.key)(t=>t.key),Object(p.connect)(()=>({actions:[D.e,["reportRecordingsListPropertiesFetched"]]})),Object(p.propsChanged)((t,o)=>{let{actions:i,props:{sessionIds:r}}=t,{sessionIds:s}=o;A()(r,s)||i.getSessionRecordingsProperties(r!=null?r:[])}),Object(ke.loaders)(t=>{let{actions:o}=t;return{sessionRecordingsPropertiesResponse:[{results:[]},{getSessionRecordingsProperties:(i,r)=>te(this,null,function*(){if(i.length<1)return{results:[]};const s={session_ids:i},l=Object(Z.Ib)(s);yield r(100);const d=performance.now(),m=yield Fe.b.recordings.listProperties(l),y=performance.now()-d;return o.reportRecordingsListPropertiesFetched(y),r(),m})}]}}),Object(p.selectors)(()=>({sessionRecordingIdToProperties:[t=>[t.sessionRecordingsPropertiesResponse],t=>{var o;return(o=Object.fromEntries(t.results.map(i=>{let{id:r,properties:s}=i;return[r,s]})))!==null&&o!==void 0?o:{}}]}))]);var Le=n("./frontend/src/lib/components/LemonTable/LemonTableLoader.tsx");function K(t){var o;let{listKey:i,titleRight:r,recordings:s,collapsable:l,title:d,loading:m,loadingSkeletonCount:y=1,info:b,empty:v,onRecordingClick:x,onPropertyClick:I,activeRecordingId:w}=t;const[u,$]=Object(g.useState)(!1),{reportRecordingListVisibilityToggled:B}=Object(p.useActions)(D.e),a=Ne({key:i,sessionIds:(o=s==null?void 0:s.map(c=>c.id))!==null&&o!==void 0?o:[]}),{sessionRecordingIdToProperties:k,sessionRecordingsPropertiesResponseLoading:f}=Object(p.useValues)(a),F=Object(e.jsxs)("span",{className:"font-bold uppercase text-xs my-1 tracking-wide flex-1 flex gap-1 items-center",children:[d,b?Object(e.jsx)(U.a,{title:b,children:Object(e.jsx)(_.IconInfo,{className:"text-muted-alt"})}):null]}),T=c=>{$(c),B(i,!c)};return Object(e.jsxs)("div",{className:Object(L.default)("flex flex-col w-full border rounded bg-light",{"border-dashed":!(s!=null&&s.length),"flex-1":!u&&(s==null?void 0:s.length),"flex-0":u,"overflow-hidden":s==null?void 0:s.length}),children:[Object(e.jsxs)("div",{className:"shrink-0 relative flex justify-between items-center p-1 gap-1",children:[l?Object(e.jsx)(h.LemonButton,{className:"flex-1",status:"stealth",icon:u?Object(e.jsx)(_.IconUnfoldMore,{}):Object(e.jsx)(_.IconUnfoldLess,{}),size:"small",onClick:()=>T(!u),children:F}):Object(e.jsx)("span",{className:"px-2 py-1",children:F}),r,Object(e.jsx)(Le.a,{loading:m})]}),u?null:s!=null&&s.length?Object(e.jsx)("ul",{className:"overflow-y-auto border-t",children:s.map((c,ee)=>Object(e.jsxs)(g.Fragment,{children:[ee>0&&Object(e.jsx)("div",{className:"border-t"}),Object(e.jsx)(G,{recording:c,recordingProperties:k[c.id],recordingPropertiesLoading:f,onClick:()=>x(c),onPropertyClick:I,isActive:w===c.id})]},c.id))}):m?Object(e.jsx)(e.Fragment,{children:Object(Z.xb)(y).map(c=>Object(e.jsx)(Ce,{},c))}):Object(e.jsx)("div",{className:"p-3 text-sm text-muted-alt border-t border-dashed",children:v||b})]})}try{K.displayName="SessionRecordingsList",K.__docgenInfo={description:"",displayName:"SessionRecordingsList",props:{listKey:{defaultValue:null,description:"",name:"listKey",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},titleRight:{defaultValue:null,description:"",name:"titleRight",required:!1,type:{name:"ReactNode"}},info:{defaultValue:null,description:"",name:"info",required:!1,type:{name:"ReactNode"}},recordings:{defaultValue:null,description:"",name:"recordings",required:!1,type:{name:"SessionRecordingType[]"}},onRecordingClick:{defaultValue:null,description:"",name:"onRecordingClick",required:!0,type:{name:"(recording: SessionRecordingType) => void"}},onPropertyClick:{defaultValue:null,description:"",name:"onPropertyClick",required:!0,type:{name:"(property: string, value?: string | undefined) => void"}},activeRecordingId:{defaultValue:null,description:"",name:"activeRecordingId",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},loadingSkeletonCount:{defaultValue:{value:"1"},description:"",name:"loadingSkeletonCount",required:!1,type:{name:"number"}},collapsable:{defaultValue:null,description:"",name:"collapsable",required:!1,type:{name:"boolean"}},empty:{defaultValue:null,description:"",name:"empty",required:!1,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/playlist/SessionRecordingsList.tsx#SessionRecordingsList"]={docgenInfo:K.__docgenInfo,name:"SessionRecordingsList",path:"frontend/src/scenes/session-recordings/playlist/SessionRecordingsList.tsx#SessionRecordingsList"})}catch(t){}var we=n("./frontend/src/lib/hooks/useResizeObserver.ts"),Te=n("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Ve=n.n(Te),Ee=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/StickyView/StickyView.scss"),re=n.n(Ee),X={};X.insert="head",X.singleton=!1;var He=Ve()(re.a,X),We=re.a.locals||{};function H(t){let{children:o,top:i="0px",marginTop:r=0}=t;const s=Object(g.useRef)(null),{height:l,width:d}=Object(we.b)({ref:s}),[m,y]=Object(g.useState)(!1);return Object(g.useEffect)(()=>{const b=()=>{const v=!!s.current&&s.current.offsetTop-r<window.scrollY;v!==m&&y(v)};return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[m]),Object(e.jsx)("div",{className:"StickyView",ref:s,style:{height:`calc(100vh - ${i} - ${r}px)`},children:Object(e.jsx)("div",{className:"StickyView__sticker",style:{width:d,height:l,top:i,position:m?"fixed":void 0,marginTop:m?r:void 0},children:o})})}try{H.displayName="StickyView",H.__docgenInfo={description:"",displayName:"StickyView",props:{top:{defaultValue:{value:"0px"},description:"",name:"top",required:!1,type:{name:"string"}},marginTop:{defaultValue:{value:"0"},description:"",name:"marginTop",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/StickyView/StickyView.tsx#StickyView"]={docgenInfo:H.__docgenInfo,name:"StickyView",path:"frontend/src/lib/components/StickyView/StickyView.tsx#StickyView"})}catch(t){}var Ae=n("./frontend/src/scenes/session-recordings/playlist/playlistUtils.ts"),De=n("./frontend/src/lib/hooks/useAsyncHandler.ts");const Ke=16;function W(t){var o,i,r,s,l;let{playlistShortId:d,personUUID:m,filters:y,updateSearchParams:b,onFiltersChange:v}=t;const x={playlistShortId:d,personUUID:m,filters:y,updateSearchParams:b},I=Object(C.e)(x),{sessionRecordings:w,sessionRecordingsResponseLoading:u,hasNext:$,hasPrev:B,activeSessionRecording:a,nextSessionRecording:k,filters:f,totalFiltersCount:F,showFilters:T,pinnedRecordingsResponse:c,pinnedRecordingsResponseLoading:ee}=Object(p.useValues)(I),{setSelectedRecordingId:$e,loadNext:Be,loadPrev:ze,setFilters:q,reportRecordingsListFilterAdded:le,setShowFilters:Me}=Object(p.useActions)(I),{reportRecordingPlaylistCreated:Ue}=Object(p.useActions)(D.e),Ye=Object(g.useRef)(null);Object(g.useEffect)(()=>{f!==y&&(v==null||v(f))},[f]);const de=S=>{$e(S.id)},ae=(S,se)=>{q(Object(C.d)(f,S,se))},ce=Object(De.a)(()=>te(this,null,function*(){yield Object(Ae.a)({filters:f},!0),Ue("filters")})),pe=(o=f.offset)!==null&&o!==void 0?o:0,ue=pe+(u?C.c:w.length),Ge=ue?Object(e.jsxs)("div",{className:"flex items-center gap-1 mx-2",children:[Object(e.jsx)("span",{children:`${pe+1} - ${ue}`}),Object(e.jsx)(h.LemonButton,{icon:Object(e.jsx)(_.IconChevronLeft,{}),status:"stealth",size:"small",disabled:!B,onClick:()=>ze()}),Object(e.jsx)(h.LemonButton,{icon:Object(e.jsx)(_.IconChevronRight,{}),status:"stealth",disabled:!$,size:"small",onClick:()=>Be()})]}):null;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-4",children:[Object(e.jsx)("div",{className:"flex items-center gap-4",children:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(h.LemonButton,{type:"secondary",size:"small",icon:Object(e.jsx)(_.IconWithCount,{count:F,children:Object(e.jsx)(_.IconFilter,{})}),onClick:()=>{if(Me(!T),m){const S=document.querySelectorAll(".entity-filter-row button");S.length>0&&S[0].click()}},children:T?"Hide filters":"Filters"}),d?null:Object(e.jsx)(h.LemonButton,{type:"secondary",size:"small",onClick:ce.onEvent,loading:ce.loading,"data-attr":"save-recordings-playlist-button",children:"Save as playlist"})]})}),Object(e.jsxs)("div",{className:"flex items-center gap-4",children:[Object(e.jsx)(je.a,{dateFrom:(i=f.date_from)!==null&&i!==void 0?i:"-7d",dateTo:(r=f.date_to)!==null&&r!==void 0?r:void 0,onChange:(S,se)=>{le(D.d.DateRange),q({date_from:S,date_to:se})},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]}),Object(e.jsxs)("div",{className:"flex gap-2",children:[Object(e.jsx)(J.a,{children:"Duration"}),Object(e.jsx)(M,{onChange:S=>{le(D.d.Duration),q({session_recording_duration:S})},initialFilter:f.session_recording_duration,pageKey:m?`person-${m}`:"session-recordings"})]})]})]}),Object(e.jsxs)("div",{ref:Ye,className:"SessionRecordingsPlaylist","data-attr":"session-recordings-playlist",children:[Object(e.jsx)("div",{className:"SessionRecordingsPlaylist__left-column space-y-4",children:Object(e.jsx)(H,{top:"3.5rem",marginTop:Ke,children:Object(e.jsxs)("div",{className:"SessionRecordingsPlaylist__lists",children:[T?Object(e.jsx)(z,{filters:f,setFilters:q,showPropertyFilters:!m}):null,!!d&&!T?Object(e.jsx)(K,{listKey:"pinned",title:"Pinned Recordings",titleRight:c!=null&&(s=c.results)!==null&&s!==void 0&&s.length?Object(e.jsx)("span",{className:"rounded py-1 px-2 mr-1 text-xs bg-border-light font-semibold",children:c==null||(l=c.results)===null||l===void 0?void 0:l.length}):null,onRecordingClick:de,onPropertyClick:ae,collapsable:!0,recordings:c==null?void 0:c.results,loading:ee,info:Object(e.jsx)(e.Fragment,{children:"You can pin recordings to a playlist to easily keep track of relevant recordings for the task at hand. Pinned recordings are always shown, regardless of filters."}),activeRecordingId:a==null?void 0:a.id}):null,Object(e.jsx)(K,{listKey:"other",title:d?"Other recordings":"Recent recordings",titleRight:Ge,onRecordingClick:de,onPropertyClick:ae,collapsable:!!d,recordings:w,loading:u,loadingSkeletonCount:C.c,empty:Object(e.jsx)(e.Fragment,{children:"No matching recordings found"}),activeRecordingId:a==null?void 0:a.id})]})})}),Object(e.jsx)("div",{className:"SessionRecordingsPlaylist__right-column",children:a!=null&&a.id?Object(e.jsx)(P.a,{playerKey:"playlist",playlistShortId:d,sessionRecordingId:a==null?void 0:a.id,matching:a==null?void 0:a.matching_events,recordingStartTime:a?a.start_time:void 0,nextSessionRecording:k}):Object(e.jsx)("div",{className:"mt-20",children:Object(e.jsx)(O.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonTo:"https://posthog.com/docs/user-guides/recordings"})})})]})]})}try{W.displayName="SessionRecordingsPlaylist",W.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{playlistShortId:{defaultValue:null,description:"",name:"playlistShortId",required:!1,type:{name:"string"}},personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},filters:{defaultValue:null,description:"",name:"filters",required:!1,type:{name:"RecordingFilters"}},updateSearchParams:{defaultValue:null,description:"",name:"updateSearchParams",required:!1,type:{name:"boolean"}},onFiltersChange:{defaultValue:null,description:"",name:"onFiltersChange",required:!1,type:{name:"((filters: RecordingFilters) => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:W.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(t){}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/StickyView/StickyView.scss":function(R,j,n){var g=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");j=g(!1),j.push([R.i,".StickyView{display:flex}.StickyView .StickyView__sticker{display:flex;flex-direction:column;flex:1}",""]),R.exports=j},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.scss":function(R,j,n){var g=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");j=g(!1),j.push([R.i,".SessionRecordingsPlaylist{display:flex;flex-direction:column-reverse;align-items:flex-start;gap:1rem;overflow:hidden}@media screen and (min-width:768px){.SessionRecordingsPlaylist{flex-direction:row;justify-content:flex-start}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{flex-shrink:0;width:100%}@media screen and (min-width:768px){.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column{width:350px;overflow:hidden}}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__lists{display:flex;flex-direction:column;flex:1;overflow:hidden;padding-bottom:1rem;gap:.5rem}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__list-item .SessionRecordingsPlaylist__list-item__property-icon:hover{transition:opacity .2s;opacity:1}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__left-column .SessionRecordingsPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column{flex:1;overflow:hidden;width:100%}.SessionRecordingsPlaylist .SessionRecordingsPlaylist__right-column .SessionRecordingsPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),R.exports=j}}]);
