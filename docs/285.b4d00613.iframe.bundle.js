(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{"./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx":function(ce,T,e){"use strict";e.d(T,"a",function(){return E});var G=e("./node_modules/core-js/modules/es.array.map.js"),$=e.n(G),Y=e("./node_modules/react/index.js"),n=e.n(Y),Z=e("./node_modules/clsx/dist/clsx.m.js"),K=e("./node_modules/kea/lib/index.esm.js"),k=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),p=e("./frontend/src/lib/components/LemonButton/index.ts"),w=e("./node_modules/antd/es/popconfirm/index.js"),j=e("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),U=e("./frontend/src/lib/components/LemonRow/index.ts"),C=e("./frontend/src/lib/components/icons.tsx"),q=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),y=e("./node_modules/kea-forms/lib/index.js"),t=e.n(y),ee=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),H=e("./frontend/src/lib/forms/Field.tsx");function o(a){var m=a.numberOfResults,d=a.isSearching,i=a.isAddingEntry,O=a.type;return m>0?null:d?n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized ",O===j.a.RECORDING_DOMAINS?"domains":"URLs"," that match your search."):i?null:n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},O===j.a.RECORDING_DOMAINS?"No domains are specified, so recordings will be authorized on all domains.":"There are no authorized urls. Add one to get started.")}function _(a){var m=a.actionId,d=a.type,i=Object(j.c)({actionId:m,type:d}),O=Object(K.useValues)(i),P=O.isProposedUrlSubmitting,r=Object(K.useActions)(i),s=r.cancelProposingUrl;return n.a.createElement(y.Form,{logic:j.c,props:{actionId:m,type:d},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2"},n.a.createElement(H.a,{name:"url"},n.a.createElement(ee.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),n.a.createElement("div",{className:"flex justify-end gap-2"},n.a.createElement(p.a,{type:"secondary",onClick:s},"Cancel"),n.a.createElement(p.a,{htmlType:"submit",type:"primary",disabled:P,"data-attr":"url-save"},"Save")))}function E(a){var m=a.actionId,d=a.type,i=a.addText,O=i===void 0?"Add":i,P=Object(j.c)({actionId:m,type:d}),r=Object(K.useValues)(P),s=r.urlsKeyed,R=r.suggestionsLoading,x=r.searchTerm,h=r.launchUrl,l=r.editUrlIndex,f=r.isAddUrlFormVisible,v=r.onlyAllowDomains,u=Object(K.useActions)(P),D=u.addUrl,L=u.removeUrl,B=u.setSearchTerm,W=u.newUrl,re=u.setEditUrlIndex;return n.a.createElement("div",null,n.a.createElement("div",{className:"flex items-center mb-4 gap-2 justify-between"},n.a.createElement(ee.a,{type:"search",placeholder:"Search for authorized ".concat(v?"domains":"URLs"),onChange:B,value:x}),n.a.createElement(p.a,{onClick:W,type:"secondary",icon:n.a.createElement(C.IconPlus,null),"data-attr":"toolbar-add-url"},O)),R?n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large",key:-1},n.a.createElement(q.a,{className:"text-xl"})):n.a.createElement("div",{className:"space-y-2"},f&&n.a.createElement(U.a,{outlined:!0,fullWidth:!0,size:"large"},n.a.createElement(_,{type:d,actionId:m})),n.a.createElement(o,{numberOfResults:s.length,isSearching:x.length>0,isAddingEntry:f,type:d}),s.map(function(b,J){return n.a.createElement("div",{key:J,className:Object(Z.a)("border rounded flex items-center py-2 px-4 min-h-14")},l===J?n.a.createElement(_,{type:d,actionId:m}):n.a.createElement(n.a.Fragment,null,b.type==="suggestion"&&n.a.createElement(k.a,{type:"highlight",className:"mr-4 uppercase"},"Suggestion"),n.a.createElement("span",{title:b.url,className:"flex-1 truncate"},b.url),n.a.createElement("div",{className:"Actions flex space-x-2 shrink-0"},b.type==="suggestion"?n.a.createElement(p.a,{onClick:function(){return D(b.url)},icon:n.a.createElement(C.IconPlus,null),"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{icon:n.a.createElement(C.IconOpenInApp,null),to:h(b.url),targetBlank:!0,tooltip:d===j.a.TOOLBAR_URLS?"Launch toolbar":"Launch url",center:!0,className:"ActionButton","data-attr":"toolbar-open"},"Launch"),n.a.createElement(p.a,{icon:n.a.createElement(C.IconEdit,null),onClick:function(){return re(b.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),n.a.createElement(w.a,{placement:"topRight",title:n.a.createElement(n.a.Fragment,null,"Are you sure you want to remove this authorized"," ",v?"domain":"URL","?"),onConfirm:function(){return L(J)}},n.a.createElement(p.a,{icon:n.a.createElement(C.IconDelete,null),tooltip:"Remove ".concat(v?"domain":"URL"),center:!0,className:"ActionButton"}))))))})))}try{E.displayName="AuthorizedUrlList",E.__docgenInfo={description:"",displayName:"AuthorizedUrlList",props:{actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"TOOLBAR_URLS"'},{value:'"RECORDING_DOMAINS"'}]}},addText:{defaultValue:{value:"Add"},description:"",name:"addText",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"]={docgenInfo:E.__docgenInfo,name:"AuthorizedUrlList",path:"frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"})}catch(a){}},"./frontend/src/scenes/actions/ActionsTable.tsx":function(ce,T,e){"use strict";e.r(T),e.d(T,"scene",function(){return ve}),e.d(T,"ActionsTable",function(){return de});var G=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),$=e.n(G),Y=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),n=e.n(Y),Z=e("./node_modules/core-js/modules/es.array.map.js"),K=e("./node_modules/core-js/modules/es.regexp.exec.js"),k=e("./node_modules/core-js/modules/es.string.search.js"),p=e("./node_modules/core-js/modules/es.array.concat.js"),w=e("./node_modules/core-js/modules/es.function.name.js"),j=e("./node_modules/core-js/modules/es.array.slice.js"),U=e("./node_modules/core-js/modules/es.number.constructor.js"),C=e("./node_modules/core-js/modules/es.array.filter.js"),q=e("./node_modules/core-js/modules/es.object.to-string.js"),y=e("./node_modules/react/index.js"),t=e.n(y),ee=e("./frontend/src/scenes/actions/Actions.scss"),H=e("./frontend/src/lib/components/Link.tsx"),o=e("./node_modules/antd/es/radio/index.js"),_=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),E=e("./frontend/src/lib/utils.tsx"),a=e("./node_modules/kea/lib/index.esm.js"),m=e("./frontend/src/models/actionsModel.ts"),d=e("./node_modules/kea-router/lib/index.js"),i=e("./frontend/src/scenes/urls.ts"),O=e("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),P=e("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),r=e("./frontend/src/lib/components/icons.tsx"),s=e("./frontend/src/lib/components/LemonButton/index.ts"),R=e("./frontend/@posthog/lemon-ui/src/index.ts");function x(){var ne=Object(y.useState)(!1),M=n()(ne,2),N=M[0],S=M[1],le=Object(y.useState)(!1),ae=n()(le,2),se=ae[0],z=ae[1];return t.a.createElement(t.a.Fragment,null,t.a.createElement(s.a,{type:"primary",onClick:function(){return S(!0)},"data-attr":"create-action"},"New action"),t.a.createElement(R.LemonModal,{isOpen:N,onClose:function(){S(!1),z(!1)},title:"Create new action",footer:t.a.createElement(t.a.Fragment,null,se&&t.a.createElement(s.a,{key:"back-button",type:"secondary",onClick:function(){return z(!1)}},"Back"),t.a.createElement(s.a,{key:"cancel-button",type:"secondary",onClick:function(){S(!1),z(!1)}},"Cancel"))},se?t.a.createElement("div",{style:{maxWidth:"40rem"}},t.a.createElement(O.a,{type:P.a.TOOLBAR_URLS})):t.a.createElement("div",{className:"space-y-2"},t.a.createElement(s.a,{type:"secondary",icon:t.a.createElement(r.IconMagnifier,null),onClick:function(){return z(!0)},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect"},"Inspect element on your site"),t.a.createElement(s.a,{type:"secondary",icon:t.a.createElement(r.IconEdit,null),onClick:function(){d.router.actions.push(i.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview"},"From event or pageview"))))}var h=e("./frontend/src/types.ts"),l=e("./node_modules/fuse.js/dist/fuse.esm.js"),f=e("./frontend/src/scenes/userLogic.ts"),v=e("./frontend/src/scenes/teamLogic.tsx"),u=e("./frontend/src/lib/api.ts"),D=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),L=e("./frontend/src/lib/components/LemonTable/index.ts"),B=e("./frontend/src/lib/components/LemonDivider/index.ts"),W=e("./frontend/src/lib/components/LemonButton/More.tsx"),re=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),b=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),J=e("./frontend/src/lib/components/PageHeader.tsx"),te=Object(a.kea)([Object(a.path)(["scenes","actions","actionsLogic"]),Object(a.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Data Management",path:i.a.eventDefinitions()},{name:"Actions",path:i.a.actions()}]}]})]),fe=function(M,N){return new l.a(M,{keys:["name","url"],threshold:.3}).search(N).map(function(S){return S.item})},ve={component:de,logic:te};function de(){var ne=Object(a.useValues)(v.a),M=ne.currentTeam,N=Object(a.useValues)(Object(m.a)({params:"include_count=1"})),S=N.actions,le=N.actionsLoading,ae=Object(a.useActions)(m.a),se=ae.loadActions,z=Object(y.useState)(""),I=n()(z,2),oe=I[0],ge=I[1],Oe=Object(y.useState)(!1),ue=n()(Oe,2),me=ue[0],he=ue[1],Ee=Object(a.useValues)(f.a),ie=Ee.user,be=Ee.hasAvailableFeature,pe=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(c,g){return(c.name||"").localeCompare(g.name||"")},render:function(c,g,F){return t.a.createElement(H.a,{"data-attr":"action-link-"+F,to:i.a.action(g.id),className:"row-name"},c||t.a.createElement("i",null,"Unnamed action"))}}].concat($()(be(h.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(c){return t.a.createElement(re.a,{tags:c,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(c,g){var F;return t.a.createElement("span",null,(F=g.steps)!==null&&F!==void 0&&F.length?g.steps.map(function(X){return t.a.createElement("div",{key:X.id},function(){var V=Object(E.Db)(X.url||"");switch(V=V.slice(0,40)+(V.length>40?"...":""),X.event){case"$autocapture":return"Autocapture";case"$pageview":switch(X.url_matching){case"regex":return t.a.createElement(t.a.Fragment,null,"Page view URL matches regex ",t.a.createElement("strong",null,V));case"exact":return t.a.createElement(t.a.Fragment,null,"Page view URL matches exactly ",t.a.createElement("strong",null,V));default:return t.a.createElement(t.a.Fragment,null,"Page view URL contains ",t.a.createElement("strong",null,V))}default:return t.a.createElement(t.a.Fragment,null,"Event: ",t.a.createElement("strong",null,X.event))}}())}):t.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(D.b)(),Object(D.a)()],$()(M!=null&&M.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(c,g){return Number(c.post_to_slack)-Number(g.post_to_slack)},render:function(c){return c?t.a.createElement(_.a,null):null}}]:[]),[{width:0,render:function(c,g){return t.a.createElement(W.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(s.a,{status:"stealth",to:i.a.action(g.id),fullWidth:!0},"Edit"),t.a.createElement(s.a,{status:"stealth",to:Object(d.combineUrl)(i.a.insightNew({insight:h.C.TRENDS,interval:"day",display:h.j.ActionsLineGraph,actions:[{id:g.id,name:g.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),t.a.createElement(B.a,null),t.a.createElement(s.a,{status:"danger",onClick:function(){return Object(E.x)({endpoint:u.b.actions.determineDeleteEndpoint(),object:g,callback:se})},fullWidth:!0},"Delete action"))})}}]),Q=S;return oe&&oe!==""&&(Q=fe(Q,oe)),me&&(Q=Q.filter(function(A){var c;return((c=A.created_by)===null||c===void 0?void 0:c.uuid)===(ie==null?void 0:ie.uuid)})),t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement(J.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0,buttons:t.a.createElement(x,null)}),t.a.createElement(b.a,{tab:b.b.Actions}),t.a.createElement("div",{className:"flex items-center justify-between gap-2 mb-4"},t.a.createElement(R.LemonInput,{type:"search",placeholder:"Search for actions",onChange:ge,value:oe}),t.a.createElement(o.a.Group,{buttonStyle:"solid",value:me,onChange:function(c){return he(c.target.value)}},t.a.createElement(o.a.Button,{value:!1},"All actions"),t.a.createElement(o.a.Button,{value:!0},"My actions"))),t.a.createElement(L.a,{columns:pe,loading:le,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:Q,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(ce,T,e){"use strict";e.d(T,"b",function(){return s}),e.d(T,"a",function(){return h});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),$=e.n(G),Y=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=e.n(Y),Z=e("./node_modules/core-js/modules/es.array.iterator.js"),K=e.n(Z),k=e("./node_modules/core-js/modules/es.object.to-string.js"),p=e.n(k),w=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),j=e.n(w),U=e("./node_modules/core-js/modules/es.object.from-entries.js"),C=e.n(U),q=e("./node_modules/core-js/modules/es.array.map.js"),y=e.n(q),t=e("./node_modules/core-js/modules/es.object.entries.js"),ee=e.n(t),H=e("./node_modules/react/index.js"),o=e.n(H),_=e("./node_modules/kea/lib/index.esm.js"),E=e("./node_modules/antd/es/tabs/index.js"),a=e("./frontend/src/scenes/urls.ts"),m=e("./frontend/src/lib/components/Tooltip.tsx"),d=e("./frontend/src/lib/components/icons.tsx"),i=e("./frontend/src/lib/components/TitleWithIcon.tsx"),O=e("./frontend/src/lib/constants.tsx"),P=e("./frontend/src/lib/logic/featureFlagLogic.ts"),r,s;(function(l){l.Actions="actions",l.EventDefinitions="events",l.EventPropertyDefinitions="properties",l.IngestionWarnings="warnings"})(s||(s={}));var R=(r={},n()(r,s.EventPropertyDefinitions,a.a.eventPropertyDefinitions()),n()(r,s.EventDefinitions,a.a.eventDefinitions()),n()(r,s.Actions,a.a.actions()),n()(r,s.IngestionWarnings,a.a.ingestionWarnings()),r),x=Object(_.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[P.a,["featureFlags"]]},actions:{setTab:function(f){return{tab:f}}},reducers:{tab:[s.EventDefinitions,{setTab:function(f,v){var u=v.tab;return u}}]},selectors:{showWarningsTab:[function(l){return[l.featureFlags]},function(l){return!!l[O.i.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(v){var u=v.tab;return R[u]||a.a.events()}}},urlToAction:function(f){var v=f.actions,u=f.values;return Object.fromEntries(Object.entries(R).map(function(D){var L=$()(D,2),B=L[0],W=L[1];return[W,function(){u.tab!==B&&v.setTab(B)}]}))}});function h(l){var f=l.tab,v=Object(_.useValues)(x),u=v.showWarningsTab,D=Object(_.useActions)(x),L=D.setTab;return o.a.createElement(E.a,{tabPosition:"top",animated:!1,activeKey:f,onTabClick:function(W){return L(W)}},o.a.createElement(E.a.TabPane,{tab:o.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:s.EventDefinitions}),o.a.createElement(E.a.TabPane,{tab:o.a.createElement(i.a,{icon:o.a.createElement(m.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},o.a.createElement(d.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:s.Actions}),o.a.createElement(E.a.TabPane,{tab:o.a.createElement(i.a,{icon:o.a.createElement(m.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},o.a.createElement(d.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:s.EventPropertyDefinitions}),u&&o.a.createElement(E.a.TabPane,{tab:o.a.createElement("span",{"data-attr":"data-management-warnings-tab"},"Ingestion Warnings"),key:s.IngestionWarnings}))}try{h.displayName="DataManagementPageTabs",h.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:h.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(l){}}}]);
