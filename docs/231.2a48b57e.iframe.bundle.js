(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/scenes/events/index.ts":function(y,p,e){"use strict";var g=e("./frontend/src/scenes/events/EventDetails.tsx"),f=e("./frontend/src/scenes/events/EventElements.tsx"),j=e("./frontend/src/scenes/events/EventsTable.tsx");e.d(p,"a",function(){return j.a});var E=e("./frontend/src/scenes/events/eventsTableLogic.ts")},"./frontend/src/scenes/groups/RelatedGroups.tsx":function(y,p,e){"use strict";e.d(p,"a",function(){return B});var g=e("./node_modules/react/index.js"),f=e.n(g),j=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/lib/components/LemonTable/index.ts"),t=e("./frontend/src/models/groupsModel.ts"),A=e("./node_modules/@ant-design/icons/lib/icons/UserOutlined.js"),M=e.n(A),R=e("./frontend/src/lib/utils.tsx"),Q=e("./frontend/src/scenes/persons/PersonHeader.tsx"),G=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),I=e.n(G),_=e("./node_modules/@babel/runtime/regenerator/index.js"),V=e.n(_),se=e("./node_modules/core-js/modules/es.array.concat.js"),re=e("./node_modules/core-js/modules/es.array.iterator.js"),v=e("./node_modules/core-js/modules/es.object.to-string.js"),O=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),K=e("./frontend/src/lib/api.ts"),oe=e("./frontend/src/scenes/teamLogic.tsx"),X=Object(j.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[oe.a,["currentTeamId"]]},props:{},key:function(h){var P;return"".concat((P=h.groupTypeIndex)!==null&&P!==void 0?P:"person","-").concat(h.id)},actions:function(){return{loadRelatedActors:!0}},loaders:function(h){var P=h.values,b=h.props;return{relatedActors:[[],{loadRelatedActors:function(){var L=I()(V.a.mark(function F(){var N;return V.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return N="api/projects/".concat(P.currentTeamId,"/groups/related?").concat(Object(R.yb)({group_type_index:b.groupTypeIndex,id:b.id})),S.next=3,K.b.get(N);case 3:return S.abrupt("return",S.sent);case 4:case"end":return S.stop()}},F)}));function x(){return L.apply(this,arguments)}return x}(),setGroup:function(){return[]}}]}},events:function(h){var P=h.actions;return{afterMount:P.loadRelatedActors}}}),ae=e("./frontend/src/scenes/persons/GroupActorHeader.tsx");function B(T){var h=T.groupTypeIndex,P=T.id,b=Object(j.useValues)(X({groupTypeIndex:h,id:P})),L=b.relatedActors,x=b.relatedActorsLoading,F=Object(j.useValues)(t.a),N=F.aggregationLabel,Z=[{title:"Type",key:"type",render:function(W,C){return C.type==="group"?f.a.createElement(f.a.Fragment,null,Object(R.j)(N(C.group_type_index).singular)):f.a.createElement(f.a.Fragment,null,f.a.createElement(M.a,null)," Person")}},{title:"id",key:"id",render:function(W,C){return C.type=="group"?f.a.createElement(ae.a,{actor:C}):f.a.createElement(Q.a,{person:C,withIcon:!1})}}];return f.a.createElement(E.a,{dataSource:L,columns:Z,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:x,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{B.displayName="RelatedGroups",B.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:B.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(T){}},"./frontend/src/scenes/persons/Person.tsx":function(y,p,e){"use strict";e.r(p),e.d(p,"scene",function(){return He}),e.d(p,"Person",function(){return J});var g=e("./node_modules/core-js/modules/es.array.map.js"),f=e("./node_modules/core-js/modules/es.array.slice.js"),j=e("./node_modules/core-js/modules/es.array.join.js"),E=e("./node_modules/react/index.js"),t=e.n(E),A=e("./node_modules/antd/es/tabs/index.js"),M=e("./node_modules/antd/es/dropdown/index.js"),R=e("./node_modules/antd/es/menu/index.js"),Q=e("./node_modules/antd/es/tag/index.js"),G=e("./node_modules/antd/es/popconfirm/index.js"),I=e("./node_modules/antd/es/button/index.js"),_=e("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),V=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),se=e("./frontend/src/scenes/events/index.ts"),re=e("./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx"),v=e("./node_modules/kea/lib/index.esm.js"),O=e("./frontend/src/scenes/persons/personsLogic.ts"),K=e("./frontend/src/scenes/persons/PersonHeader.tsx"),oe=e("./frontend/src/scenes/persons/Persons.scss"),X=e("./frontend/src/lib/components/CopyToClipboard.tsx"),ae=e("./node_modules/core-js/modules/es.function.name.js"),B=e("./node_modules/core-js/modules/es.array.filter.js"),T=e("./node_modules/core-js/modules/es.object.to-string.js"),h=e("./node_modules/antd/es/modal/index.js"),P=e("./node_modules/antd/es/row/index.js"),b=e("./node_modules/antd/es/radio/index.js"),L=e("./node_modules/antd/es/col/index.js"),x=e("./node_modules/antd/es/select/index.js"),F=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),N=e.n(F),Z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss"),S=e.n(Z),W={};W.insert="head",W.singleton=!1;var C=N()(S.a,W),$e=S.a.locals||{},Ee=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),$=e.n(Ee),he=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Pe=e.n(he),Se=e("./node_modules/@babel/runtime/regenerator/index.js"),le=e.n(Se),we=e("./node_modules/core-js/modules/es.array.iterator.js"),ke=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),qe=e("./node_modules/core-js/modules/es.object.keys.js"),_e=e("./node_modules/core-js/modules/es.symbol.js"),et=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),tt=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),nt=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),be=e("./node_modules/kea-router/lib/index.js"),ie=e("./frontend/src/lib/api.ts"),de=e("./frontend/src/lib/components/lemonToast.tsx"),ce=e("./frontend/src/lib/utils/eventUsageLogic.ts");function ue(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);r&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),n.push.apply(n,o)}return n}function Oe(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ue(Object(n),!0).forEach(function(o){$()(s,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(n,o))})}return s}var H;(function(s){s.SPLIT="split",s.MERGE="merge"})(H||(H={}));var D=Object(v.kea)({props:{},key:function(r){var n;return(n=r.person.id)!==null&&n!==void 0?n:"new"},path:function(r){return["scenes","persons","mergeSplitPersonLogic",r]},connect:function(){return{actions:[Object(O.a)({syncWithUrl:!0}),["setListFilters","loadPersons","setPerson","setSplitMergeModalShown"]],values:[Object(O.a)({syncWithUrl:!0}),["persons"]]}},actions:{setActivity:function(r){return{activity:r}},setSelectedPersonsToMerge:function(r){return{persons:r}},setSelectedPersonToAssignSplit:function(r){return{id:r}},cancel:!0},reducers:function(r){var n=r.props;return{activity:[H.MERGE,{setActivity:function(a,l){var c=l.activity;return c}}],person:[n.person,{}],selectedPersonsToMerge:[[],{setSelectedPersonsToMerge:function(a,l){var c=l.persons;return c}}],selectedPersonsToAssignSplit:[null,{setSelectedPersonToAssignSplit:function(a,l){var c=l.id;return c}}]}},listeners:function(r){var n=r.actions,o=r.values;return{setListFilters:function(){n.loadPersons()},cancel:function(){o.executedLoading||n.setSplitMergeModalShown(!1)}}},loaders:function(r){var n=r.values,o=r.actions;return{executed:[!1,{execute:function(){var a=Pe()(le.a.mark(function c(){var u,i;return le.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(n.activity!==H.MERGE){m.next=12;break}return m.next=3,ie.b.create("api/person/"+n.person.id+"/merge/",{ids:n.selectedPersonsToMerge});case 3:if(u=m.sent,!u.id){m.next=10;break}return de.d.success("Persons have been merged"),ce.f.actions.reportPersonMerged(n.selectedPersonsToMerge.length),o.setSplitMergeModalShown(!1),o.setPerson(u),m.abrupt("return",!0);case 10:m.next=21;break;case 12:return m.next=14,ie.b.create("api/person/"+n.person.id+"/split/",Oe({},n.selectedPersonsToAssignSplit?{main_distinct_id:n.selectedPersonsToAssignSplit}:{}));case 14:if(i=m.sent,!i.success){m.next=21;break}return de.d.success("Person succesfully split. This may take up to a couple of minutes to complete"),ce.f.actions.reportPersonSplit(n.person.distinct_ids.length),o.setSplitMergeModalShown(!1),be.router.actions.push("/persons"),m.abrupt("return",!0);case 21:return m.abrupt("return",!1);case 22:case"end":return m.stop()}},c)}));function l(){return a.apply(this,arguments)}return l}()}]}},events:function(r){var n=r.actions;return{afterMount:[n.loadPersons]}}}),w=e("./frontend/src/lib/utils.tsx"),pe=e("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx"),me=e("./frontend/src/lib/components/Tooltip.tsx");function k(s){var r=s.person,n={person:r},o=Object(v.useValues)(D(n)),a=o.activity,l=o.executedLoading,c=Object(v.useActions)(D(n)),u=c.setActivity,i=c.execute,d=c.cancel;return t.a.createElement(h.a,{visible:!0,title:"Merge/split persons",onCancel:d,className:"merge-split-person",okText:"".concat(Object(w.j)(a)," persons"),onOk:i,okButtonProps:{loading:l},cancelButtonProps:{disabled:l}},t.a.createElement("div",{className:"activity-header"},t.a.createElement(P.a,{align:"middle"},t.a.createElement(b.a.Group,{onChange:function(te){return u(te.target.value)},value:a},t.a.createElement(L.a,{className:"tab-btn ant-btn"},t.a.createElement(b.a,{value:"merge"},"Merge")),t.a.createElement(L.a,{className:"tab-btn ant-btn"},t.a.createElement(b.a,{value:"split",disabled:r.distinct_ids.length<2},r.distinct_ids.length<2?t.a.createElement(me.a,{title:"Only persons with more than two distinct IDs can be split.",delayMs:0},"Split"):t.a.createElement(t.a.Fragment,null,"Split")))))),t.a.createElement(v.BindLogic,{logic:D,props:n},t.a.createElement(t.a.Fragment,null,a===H.MERGE?t.a.createElement(Te,null):t.a.createElement(xe,null))))}function Te(){var s=Object(v.useValues)(D),r=s.persons,n=s.person,o=s.executedLoading,a=Object(v.useActions)(D),l=a.setListFilters,c=a.setSelectedPersonsToMerge;return t.a.createElement(t.a.Fragment,null,t.a.createElement("p",{className:"mb"},"Merge all properties and events of the selected persons into ",t.a.createElement("strong",null,n.name)," ",t.a.createElement("span",{style:{fontSize:"1.2em"}},"("),t.a.createElement("code",{title:n.distinct_ids[0]},Object(w.kb)(n.distinct_ids[0],20)),t.a.createElement("span",{style:{fontSize:"1.2em"}},")"),". Properties get merged based on timestamps, see more details on"," ",t.a.createElement("a",{href:"https://posthog.com/docs/integrate/user-properties#how-do-values-get-overridden"},"PostHog Docs"),"."),t.a.createElement(x.a,{mode:"multiple",allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Please select persons to merge",onChange:function(i){return c(i)},filterOption:!1,onSearch:function(i){l({search:i})},className:"mt",disabled:o},r.results&&r.results.filter(function(u){return u.uuid!==n.uuid}).map(function(u){return u.id?t.a.createElement(x.a.Option,{value:u.id,key:u.id},u.name):void 0})),t.a.createElement(pe.a,{style:{marginTop:16},type:"danger"},"This action is not reversible. Please be sure before continuing."))}function xe(){var s=Object(v.useValues)(D),r=s.person,n=s.executedLoading,o=Object(v.useActions)(D),a=o.setSelectedPersonToAssignSplit;return r?t.a.createElement(t.a.Fragment,null,t.a.createElement("p",null,"This will split all Distinct IDs for this person into unique persons."),t.a.createElement("p",null,"You can select a distinct ID for which all the current properties will be assigned (",t.a.createElement("i",null,"optional"),"). All other new users will start without any properties."),t.a.createElement(x.a,{allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Select a distinct ID to which to assign all properties (optional)",onChange:function(c){return a(c)},filterOption:!1,disabled:n},r==null?void 0:r.distinct_ids.map(function(l){return t.a.createElement(x.a.Option,{value:l,key:l},l)})),t.a.createElement(pe.a,{style:{marginTop:16},type:"danger"},t.a.createElement("div",null,"This will create ",t.a.createElement("strong",null,r.distinct_ids.length-1)," new"," ",Object(w.pb)(r.distinct_ids.length,"person",void 0,!1),". This might change the numbers in your charts, even historically. Please be certain."))):null}try{k.displayName="MergeSplitPerson",k.__docgenInfo={description:"",displayName:"MergeSplitPerson",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"PersonType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"]={docgenInfo:k.__docgenInfo,name:"MergeSplitPerson",path:"frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"})}catch(s){}var Ae=e("./frontend/src/lib/components/LemonTable/index.ts"),fe=e("./frontend/src/scenes/urls.ts"),Me=e("./frontend/src/lib/components/Link.tsx");function Re(){var s=Object(v.useValues)(O.a),r=s.cohorts,n=s.cohortsLoading,o=s.person,a=Object(v.useActions)(O.a),l=a.loadCohorts;Object(E.useEffect)(function(){l()},[o]);var c=[{title:"Name",dataIndex:"name",key:"name",className:"ph-no-capture",render:function(i,d){return t.a.createElement(Me.a,{to:fe.a.cohort(d.id)},t.a.createElement("strong",null,d.name))},sorter:function(i,d){return(i.name||"").localeCompare(d.name||"")}},{title:"Users in cohort",render:function(i){return i==null?void 0:i.toLocaleString()},dataIndex:"count",sorter:function(i,d){return(i.count||0)-(d.count||0)}}];return t.a.createElement(Ae.a,{dataSource:r||[],loading:n,columns:c,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},emptyState:"This person doesn't belong to any cohort"})}var Le=e("./frontend/src/lib/components/PropertiesTable.tsx"),Ce=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),z=e("./frontend/src/types.ts"),ve=e("./frontend/src/lib/components/PageHeader.tsx"),De=e("./frontend/src/scenes/groups/RelatedGroups.tsx"),Ie=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),Ne=e("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),st=e("./node_modules/core-js/modules/es.array.from.js"),rt=e("./node_modules/core-js/modules/es.string.iterator.js"),ot=e("./node_modules/core-js/modules/es.regexp.exec.js"),at=e("./node_modules/core-js/modules/es.symbol.description.js"),lt=e("./node_modules/core-js/modules/es.symbol.iterator.js"),Ue=e("./node_modules/@babel/runtime/helpers/typeof.js"),Ge=e.n(Ue),it=e("./node_modules/core-js/modules/es.array.concat.js"),dt=e("./node_modules/core-js/modules/es.array.flat-map.js"),ct=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),Ve=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ee=e("./frontend/src/scenes/feature-flags/activityDescriptions.tsx"),Y;function Ke(s,r){var n=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!n){if(Array.isArray(s)||(n=Be(s))||r&&s&&typeof s.length=="number"){n&&(s=n);var o=0,a=function(){};return{s:a,n:function(){return o>=s.length?{done:!0}:{done:!1,value:s[o++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,c=!1,u;return{s:function(){n=n.call(s)},n:function(){var d=n.next();return l=d.done,d},e:function(d){c=!0,u=d},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(c)throw u}}}}function Be(s,r){if(!!s){if(typeof s=="string")return ge(s,r);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(s,r)}}function ge(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=s[n];return o}var ye=function(r){return Ge()(r)==="object"},Fe=(Y={properties:function(r,n){var o=n==null?void 0:n.before,a=n==null?void 0:n.after;if(!a||!ye(a))return null;var l=Object.keys(a).filter(function(c){return ye(o)&&!(c in o)});return l[0]?t.a.createElement(t.a.Fragment,null,"added property"," ",t.a.createElement("strong",null,t.a.createElement(Ve.a,{value:l[0]}))," ","with value:"," ",t.a.createElement("strong",null,a[l[0]]===null?"null":String(a[l[0]]))):null},id:function(){return null},uuid:function(){return null},distinct_ids:function(){return null}},$()(Y,"name",function(){return null}),$()(Y,"created_at",function(){return null}),$()(Y,"is_identified",function(){return null}),Y);function q(s){if(s.scope!="Person")return console.error("person describer received a non-person activity"),null;if(s.activity==="deleted")return t.a.createElement(t.a.Fragment,null,"deleted the person: ",s.detail.name);if(s.activity==="updated"){var r=[],n=Ke(s.detail.changes||[]),o;try{for(n.s();!(o=n.n()).done;){var a=o.value;!(a!=null&&a.field)||(r=r.concat(Fe[a.field](s,a)))}}catch(d){n.e(d)}finally{n.f()}if(r.length)return t.a.createElement(ee.a,{listParts:r})}if(s.activity==="people_merged_into"){var l;if((l=s.detail.merge)!==null&&l!==void 0&&l.source)return t.a.createElement(ee.a,{prefix:"merged into this person:",listParts:s.detail.merge.source.flatMap(function(d){return t.a.createElement("div",{className:"highlighted-activity"},t.a.createElement(K.a,{person:d}))})})}if(s.activity==="split_person"){var c,u,i=(c=s.detail.changes)===null||c===void 0||(u=c[0].after)===null||u===void 0?void 0:u.distinct_ids;if(i)return t.a.createElement(ee.a,{prefix:"split this person into",listParts:i.map(function(d){return t.a.createElement("div",{key:d,className:"highlighted-activity"},d)})})}return null}try{q.displayName="personActivityDescriber",q.__docgenInfo={description:"",displayName:"personActivityDescriber",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"ActivityUser"}},activity:{defaultValue:null,description:"",name:"activity",required:!0,type:{name:"string"}},created_at:{defaultValue:null,description:"",name:"created_at",required:!0,type:{name:"string"}},scope:{defaultValue:null,description:"",name:"scope",required:!0,type:{name:"enum",value:[{value:'"FeatureFlag"'},{value:'"Person"'},{value:'"Insight"'}]}},item_id:{defaultValue:null,description:"",name:"item_id",required:!1,type:{name:"string"}},detail:{defaultValue:null,description:"",name:"detail",required:!0,type:{name:"ActivityLogDetail"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/activityDescriptions.tsx#personActivityDescriber"]={docgenInfo:q.__docgenInfo,name:"personActivityDescriber",path:"frontend/src/scenes/persons/activityDescriptions.tsx#personActivityDescriber"})}catch(s){}var We=e("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),U=A.a.TabPane,He={component:J,logic:O.a,paramsToProps:function(r){var n=r.params;return{syncWithUrl:!0,urlId:n._}}};function ze(s){var r=s.person;return t.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},t.a.createElement("div",{className:"mr"},t.a.createElement("span",{className:"text-muted"},"IDs:")," ",t.a.createElement(X.a,{tooltipMessage:null,description:"person distinct ID",style:{justifyContent:"flex-end"}},r.distinct_ids[0]),r.distinct_ids.length>1&&t.a.createElement(M.a,{overlay:t.a.createElement(R.a,null,r.distinct_ids.slice(1).map(function(n){return t.a.createElement(R.a.Item,{key:n},t.a.createElement(X.a,{description:"person distinct ID",iconStyle:{color:"var(--primary)"}},n))})),trigger:["click"]},t.a.createElement(Q.a,{className:"extra-ids"},"+",r.distinct_ids.length-1,t.a.createElement(_.a,null)))),t.a.createElement("div",null,t.a.createElement("span",{className:"text-muted"},"First seen:")," ",r.created_at?t.a.createElement(Ce.b,{time:r.created_at}):"unknown"))}function J(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=s._,n=Object(v.useValues)(O.a),o=n.person,a=n.personLoading,l=n.deletedPersonLoading,c=n.currentTab,u=n.showSessionRecordings,i=n.splitMergeModalShown,d=Object(v.useActions)(O.a),m=d.deletePerson,te=d.editProperty,Ye=d.deleteProperty,Je=d.navigateToTab,Qe=d.setSplitMergeModalShown,Xe=Object(v.useValues)(Ie.b),Ze=Xe.groupsEnabled;return o?t.a.createElement(t.a.Fragment,null,t.a.createElement(ve.a,{title:Object(K.b)(o),caption:t.a.createElement(ze,{person:o}),buttons:t.a.createElement("div",null,t.a.createElement(G.a,{title:"Are you sure you want to delete this person?",onConfirm:m,okText:"Yes, delete ".concat(Object(K.b)(o)),cancelText:"No, cancel"},t.a.createElement(I.a,{className:"text-danger",disabled:l,loading:l,"data-attr":"delete-person"},"Delete person")),t.a.createElement(I.a,{onClick:function(){return Qe(!0)},"data-attr":"merge-person-button",style:{marginLeft:8}},"Split or merge IDs"))}),t.a.createElement(A.a,{activeKey:c,onChange:function(ne){Je(ne)},destroyInactiveTabPane:!0},t.a.createElement(U,{tab:t.a.createElement("span",{"data-attr":"persons-properties-tab"},"Properties"),key:z.D.PROPERTIES},t.a.createElement(Le.a,{properties:o.properties||{},searchable:!0,onEdit:te,sortProperties:!0,embedded:!1,onDelete:function(ne){return Ye(ne)}})),t.a.createElement(U,{tab:t.a.createElement("span",{"data-attr":"persons-events-tab"},"Events"),key:z.D.EVENTS},t.a.createElement(se.a,{pageKey:o.distinct_ids.join("__"),fixedFilters:{person_id:o.id},showPersonColumn:!1,sceneUrl:fe.a.person(r||o.distinct_ids[0]||String(o.id),!1)})),u&&t.a.createElement(U,{tab:t.a.createElement("span",{"data-attr":"person-session-recordings-tab"},"Recordings"),key:z.D.SESSION_RECORDINGS},t.a.createElement(re.a,{key:o.uuid,personUUID:o.uuid,isPersonPage:!0})),t.a.createElement(U,{tab:t.a.createElement("span",{"data-attr":"persons-cohorts-tab"},"Cohorts"),key:z.D.COHORTS},t.a.createElement(Re,null)),Ze&&o.uuid&&t.a.createElement(U,{tab:t.a.createElement("span",{"data-attr":"persons-related-tab"},"Related groups",t.a.createElement(me.a,{title:"People and groups that have shared events with this person in the last 90 days."},t.a.createElement(V.a,{style:{marginLeft:6,marginRight:0}}))),key:z.D.RELATED},t.a.createElement(De.a,{id:o.uuid,groupTypeIndex:null})),t.a.createElement(U,{tab:"History",key:"history"},t.a.createElement(Ne.a,{scope:We.a.PERSON,id:o.id,describer:q,caption:t.a.createElement("div",null,t.a.createElement(V.a,{style:{marginRight:".25rem"}}),t.a.createElement("span",null,"This page only shows changes made by users in the PostHog site. Automatic changes from the API aren't shown here."))}))),i&&o&&t.a.createElement(k,{person:o})):a?t.a.createElement(w.b,null):t.a.createElement(ve.a,{title:"Person not found",caption:r?`There's no person matching distinct ID "`.concat(r,'".'):void 0})}try{J.displayName="Person",J.__docgenInfo={description:"",displayName:"Person",props:{_:{defaultValue:null,description:"",name:"_",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Person.tsx#Person"]={docgenInfo:J.__docgenInfo,name:"Person",path:"frontend/src/scenes/persons/Person.tsx#Person"})}catch(s){}},"./frontend/src/scenes/persons/Persons.scss":function(y,p,e){"use strict";var g=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),f=e.n(g),j=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),E=e.n(j),t={};t.insert="head",t.singleton=!1;var A=f()(E.a,t),M=E.a.locals||{}},"./node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js":function(y,p,e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};p.default=g},"./node_modules/@ant-design/icons/lib/icons/UserOutlined.js":function(y,p,e){"use strict";var g=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),f=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var j=f(e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/objectSpread2.js")),E=g(e("./node_modules/react/index.js")),t=f(e("./node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js")),A=f(e("./node_modules/@ant-design/icons/lib/components/AntdIcon.js")),M=function(G,I){return E.createElement(A.default,(0,j.default)((0,j.default)({},G),{},{ref:I,icon:t.default}))};M.displayName="UserOutlined";var R=E.forwardRef(M);p.default=R},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss":function(y,p,e){var g=e("./node_modules/css-loader/dist/runtime/api.js");p=g(!1),p.push([y.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.merge-split-person .activity-header{background-color:#f2f2f2;border-top:1px solid rgba(0,0,0,.15);border-bottom:1px solid rgba(0,0,0,.15);margin-left:-24px;margin-right:-24px;padding:8px 0;display:flex;justify-content:center;margin-bottom:1rem}.merge-split-person .ant-modal-header{border-bottom:0}.merge-split-person .ant-modal-body{padding-top:0}.merge-split-person .ant-radio-wrapper{margin-right:2px}.merge-split-person .ant-col{margin-right:1rem}.merge-split-person code{background-color:#f2f2f2;color:#35416b;padding:4px 8px;border-radius:4px}",""]),y.exports=p},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(y,p,e){var g=e("./node_modules/css-loader/dist/runtime/api.js");p=g(!1),p.push([y.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:#5375ff;cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),y.exports=p}}]);
