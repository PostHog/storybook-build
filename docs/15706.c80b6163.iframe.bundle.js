"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[15706],{"../../frontend/src/scenes/onboarding/FlappyHog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>FlappyHog,r:()=>FlappyHogGame});var react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),LemonModal=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonModal/index.ts");let flappy_hog_splash=__webpack_require__.p+"images/flappy-hog-splash.4233194f679562fb078ba17c69e72cdf.png";var robot_hog=__webpack_require__("../../frontend/public/hedgehog/robot-hog.png"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let HIGH_SCORE_KEY="flappyHogHighScore",COLORS={background:"#1d1f27",pipe:"#f54e00",titleGlow:"#f54e00",titleMain:"#ffeb3b",textWhite:"#ffffff",textGray:"#cccccc",gameOverRed:"#ff0000",shadowBlack:"rgba(0, 0, 0, 0.5)",overlayBlack:"rgba(0, 0, 0, 0.6)",instructionShadow:"rgba(0, 0, 0, 0.7)",fallbackHog:"#ffc107"},FONTS={title:'bold 44px "Comic Sans MS", "Chalkboard SE", cursive',tagline:'italic 14px "Comic Sans MS", "Chalkboard SE", cursive',instruction:'bold 20px "Comic Sans MS", "Chalkboard SE", cursive',gameOver:'bold 36px "Comic Sans MS", "Chalkboard SE", cursive',score:'bold 28px "Comic Sans MS", "Chalkboard SE", cursive',scoreLarge:'bold 24px "Comic Sans MS", "Chalkboard SE", cursive',scoreSmall:'14px "Comic Sans MS", "Chalkboard SE", cursive',playAgain:'18px "Comic Sans MS", "Chalkboard SE", cursive'};function createInitialState(){return{hogY:225,hogVelocity:0,pipes:[],distance:0,gameOver:!1,started:!1}}function getHighScore(){try{return parseInt(localStorage.getItem(HIGH_SCORE_KEY)||"0",10)}catch{return 0}}function saveHighScore(score){try{localStorage.setItem(HIGH_SCORE_KEY,String(score))}catch{}}function clearHighScore(){try{localStorage.removeItem(HIGH_SCORE_KEY)}catch{}}function calculateScore(distance){return Math.floor(distance/10)}function getHogBounds(hogY){return{left:87.5,right:137.5,top:hogY-25,bottom:hogY+25}}function checkCollision(hogY,pipes){let hog=getHogBounds(hogY);return hog.top<0||hog.bottom>450||pipes.some(pipe=>hog.right>pipe.x&&hog.left<pipe.x+50&&(hog.top<pipe.gapY||hog.bottom>pipe.gapY+180))}function updatePhysics(state){if(!state.started||state.gameOver)return state;let newHogY=state.hogY+state.hogVelocity,newVelocity=state.hogVelocity+.4,newDistance=state.distance+1,newPipes=state.pipes.map(pipe=>({...pipe,x:pipe.x-3})).filter(pipe=>pipe.x>-50);(0===newPipes.length||newPipes[newPipes.length-1].x<250)&&(newPipes=[...newPipes,{x:450,gapY:170*Math.random()+50}]);let gameOver=checkCollision(newHogY,newPipes);return{hogY:newHogY,hogVelocity:newVelocity,pipes:newPipes,distance:newDistance,gameOver,started:!0}}function drawBackground(ctx){ctx.fillStyle=COLORS.background,ctx.fillRect(0,0,450,450)}function drawPipes(ctx,pipes){for(let pipe of(ctx.fillStyle=COLORS.pipe,pipes))ctx.fillRect(pipe.x,0,50,pipe.gapY),ctx.fillRect(pipe.x,pipe.gapY+180,50,450-pipe.gapY-180)}function drawHog(ctx,hogY,hogImage){hogImage?.complete?ctx.drawImage(hogImage,87.5,hogY-25,50,50):(ctx.fillStyle=COLORS.fallbackHog,ctx.beginPath(),ctx.arc(112.5,hogY,25,0,2*Math.PI),ctx.fill())}function drawTextWithShadow(ctx,text,x,y,color,shadowColor){let offsetX=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,offsetY=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2;ctx.fillStyle=shadowColor,ctx.fillText(text,x+offsetX,y+offsetY),ctx.fillStyle=color,ctx.fillText(text,x,y)}function drawTitleGlow(ctx,text,x,y){ctx.fillStyle=COLORS.titleGlow,ctx.fillText(text,x+3,y),ctx.fillText(text,x-3,y),ctx.fillText(text,x,y-3),ctx.fillText(text,x,y+3),ctx.fillStyle=COLORS.titleMain,ctx.fillText(text,x,y)}function drawSplashScreen(ctx,splashImage){splashImage?.complete&&ctx.drawImage(splashImage,0,0,450,450),ctx.textAlign="center",ctx.font=FONTS.title,drawTitleGlow(ctx,"FLAPPY HOG",225,55),ctx.font=FONTS.tagline,ctx.fillStyle=COLORS.textWhite,ctx.fillText("★ Fly towards business-critical insights! ★",225,80),ctx.font=FONTS.instruction,drawTextWithShadow(ctx,"~ Click or Press Space ~",225,425,COLORS.textWhite,COLORS.instructionShadow)}function drawGameOverScreen(ctx,score,highScore){ctx.fillStyle=COLORS.overlayBlack,ctx.fillRect(0,0,450,450),ctx.textAlign="center",ctx.font=FONTS.gameOver,score>=highScore&&score>0&&drawTextWithShadow(ctx,"NEW HIGH SCORE!",225,171,COLORS.titleMain,COLORS.titleGlow),drawTextWithShadow(ctx,"GAME OVER",225,215,COLORS.textWhite,COLORS.gameOverRed),ctx.font=FONTS.scoreLarge,ctx.fillStyle=COLORS.titleMain,ctx.fillText(`Score: ${score}`,225,255),ctx.font=FONTS.playAgain,ctx.fillStyle=COLORS.textGray,ctx.fillText("~ Click to Play Again ~",225,290)}function drawScoreHUD(ctx,score,highScore){ctx.textAlign="center",ctx.font=FONTS.score,drawTextWithShadow(ctx,String(score),225,40,COLORS.textWhite,COLORS.shadowBlack),highScore>0&&(ctx.font=FONTS.scoreSmall,ctx.fillStyle=COLORS.textGray,ctx.fillText(`Best: ${highScore}`,225,60))}function drawGame(ctx,state,highScore,hogImage,splashImage){drawBackground(ctx),drawPipes(ctx,state.pipes),drawHog(ctx,state.hogY,hogImage);let score=calculateScore(state.distance);state.started?state.gameOver?drawGameOverScreen(ctx,score,highScore):drawScoreHUD(ctx,score,highScore):drawSplashScreen(ctx,splashImage)}function FlappyHogGame(_ref){let{isActive=!0}=_ref,canvasRef=(0,react.useRef)(null),gameLoopRef=(0,react.useRef)(null),gameStateRef=(0,react.useRef)(createInitialState()),highScoreRef=(0,react.useRef)(getHighScore()),hogImageRef=(0,react.useRef)(null),splashImageRef=(0,react.useRef)(null),[highScore,setHighScore]=(0,react.useState)(getHighScore);(0,react.useEffect)(()=>{let hog=new Image;hog.src=robot_hog.Z,hogImageRef.current=hog;let splash=new Image;splash.src=flappy_hog_splash,splashImageRef.current=splash},[]);let resetGame=(0,react.useCallback)(()=>{gameStateRef.current=createInitialState()},[]),handleClearHighScore=(0,react.useCallback)(()=>{clearHighScore(),setHighScore(0),highScoreRef.current=0},[]),flap=(0,react.useCallback)(()=>{let state=gameStateRef.current;if(state.gameOver){resetGame();return}gameStateRef.current={...state,started:!0,hogVelocity:-5}},[resetGame]);return(0,react.useEffect)(()=>{if(!isActive){resetGame(),gameLoopRef.current&&(cancelAnimationFrame(gameLoopRef.current),gameLoopRef.current=null);return}let startTimeout=setTimeout(()=>{let canvas=canvasRef.current,ctx=canvas?.getContext("2d");if(!canvas||!ctx)return;let gameLoop=()=>{let currentCanvas=canvasRef.current,currentCtx=currentCanvas?.getContext("2d");if(!currentCanvas||!currentCtx)return;let prevState=gameStateRef.current,newState=updatePhysics(prevState);if(newState.gameOver&&!prevState.gameOver){let finalScore=calculateScore(newState.distance);finalScore>highScoreRef.current&&(saveHighScore(finalScore),setHighScore(finalScore),highScoreRef.current=finalScore)}gameStateRef.current=newState,drawGame(currentCtx,newState,highScoreRef.current,hogImageRef.current,splashImageRef.current),gameLoopRef.current=requestAnimationFrame(gameLoop)};gameLoopRef.current=requestAnimationFrame(gameLoop)},50);return()=>{clearTimeout(startTimeout),gameLoopRef.current&&cancelAnimationFrame(gameLoopRef.current)}},[isActive,resetGame]),(0,react.useEffect)(()=>{let handleKeyDown=e=>{isActive&&("Space"===e.code||"ArrowUp"===e.code)&&(e.preventDefault(),flap())};return window.addEventListener("keydown",handleKeyDown),()=>window.removeEventListener("keydown",handleKeyDown)},[isActive,flap]),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center",children:[(0,jsx_runtime.jsx)("canvas",{ref:canvasRef,width:450,height:450,onClick:flap,className:"cursor-pointer rounded border border-border"}),highScore>0&&(0,jsx_runtime.jsx)("div",{className:"mt-4",children:(0,jsx_runtime.jsx)(src.Jp,{type:"tertiary",size:"small",onClick:handleClearHighScore,children:"Clear high score"})})]})}function FlappyHog(_ref2){let{isOpen,onClose}=_ref2;return(0,jsx_runtime.jsx)(LemonModal.f,{isOpen:isOpen,onClose:onClose,title:"Flappy Hog",simple:!0,children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,jsx_runtime.jsx)(FlappyHogGame,{isActive:isOpen}),(0,jsx_runtime.jsx)("div",{className:"mt-4",children:(0,jsx_runtime.jsx)(src.Jp,{onClick:onClose,children:"Close"})})]})})}},"../../products/games/FlappyHog/FlappyHog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var scenes_onboarding_FlappyHog__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/scenes/onboarding/FlappyHog.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let __WEBPACK_DEFAULT_EXPORT__=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"flex flex-col items-center p-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(scenes_onboarding_FlappyHog__WEBPACK_IMPORTED_MODULE_0__.r,{})})}}]);