(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(h,c,e){"use strict";e.r(c),e.d(c,"SessionsRecordings",function(){return W}),e.d(c,"scene",function(){return b});var E=e("./node_modules/react/index.js"),s=e.n(E),a=e("./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx"),Y=e("./frontend/src/lib/components/PageHeader.tsx"),I=e("./frontend/src/scenes/teamLogic.tsx"),u=e("./node_modules/kea/lib/index.esm.js"),J=e("./frontend/src/scenes/urls.ts"),B=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),$=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Q=e("./frontend/src/lib/constants.tsx"),M=e("./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx"),D=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),H=e("./frontend/src/types.ts"),w=e("./node_modules/antd/es/row/index.js"),X=e("./node_modules/antd/es/space/index.js"),z=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),A=e("./frontend/src/lib/components/Popup/Popup.tsx"),se=e("./node_modules/core-js/modules/es.array.slice.js"),k=e("./node_modules/core-js/modules/es.array.iterator.js"),Z=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),v=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),j;(function(t){t.SECONDS="seconds",t.MINUTES="minutes",t.HOURS="hours"})(j||(j={}));var G=Object(u.kea)({path:function(n){return["scenes","session-recordings","DurationFilterLogic",n]},key:function(n){return n.pageKey||"global"},props:{},actions:{setValue:function(n){return{value:n}},setIsOpen:function(n){return{isOpen:n}},setOperator:function(n){return{operator:n}}},reducers:function(n){var o,r,d=n.props;return{operator:[d==null||(o=d.initialFilter)===null||o===void 0?void 0:o.operator,{setOperator:function(g,l){var m=l.operator;return m}}],value:[d==null||(r=d.initialFilter)===null||r===void 0?void 0:r.value,{setValue:function(g,l){var m=l.value;return m}}],isOpen:[!1,{setIsOpen:function(g,l){var m=l.isOpen;return m}}]}},selectors:{durationString:[function(t){return[t.operator,t.value]},function(t,n){var o="";t===H.K.GreaterThan?o+="> ":o+="< ";var r=Object(v.b)(n||0);return o+=r.timeValue||0,r.timeValue===1?o+=" "+r.unit.slice(0,-1):o+=" "+r.unit,o}]},listeners:function(n){var o=n.props,r=n.values,d=function(g){var l=g.value,m=g.operator;o.onChange({operator:m||r.operator,value:l||r.value||0,type:"recording",key:"duration"})};return{setValue:function(g){var l=g.value;return d({value:l})},setOperator:function(g){var l=g.operator;return d({operator:l})}}}}),f=e("./frontend/@posthog/lemon-ui/src/index.ts");function R(t){var n=t.initialFilter,o=t.onChange,r=t.pageKey,d=G({initialFilter:n,onChange:o,pageKey:r}),i=Object(u.useActions)(d),g=i.setValue,l=i.setIsOpen,m=i.setOperator,C=Object(u.useValues)(d),ne=C.durationString,te=C.value,L=C.operator,oe=C.isOpen;return s.a.createElement(A.a,{visible:oe,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return l(!1)},overlay:s.a.createElement(w.a,null,s.a.createElement(X.b,null,s.a.createElement(z.a,{operator:L,operators:[H.K.GreaterThan,H.K.LessThan],onChange:function(re){m(re)}}),s.a.createElement(v.a,{onChange:g,initialValue:te||0})))},s.a.createElement(f.LemonButton,{type:"secondary",status:"stealth",size:"small",onClick:function(){l(!0)}},ne))}try{R.displayName="DurationFilter",R.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"]={docgenInfo:R.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"})}catch(t){}var y=e("./frontend/src/lib/utils/eventUsageLogic.ts"),x=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),p=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),V=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),U=e("./frontend/src/lib/components/icons.tsx"),O=e("./frontend/src/lib/components/LemonButton/index.ts"),T=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),K=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx");function F(t){var n=t.personUUID,o=t.isPersonPage,r=o===void 0?!1:o,d=Object(B.c)({personUUID:n}),i=Object(u.useValues)(d),g=i.entityFilters,l=i.propertyFilters,m=i.fromDate,C=i.toDate,ne=i.durationFilter,te=i.showFilters,L=Object(u.useActions)(d),oe=L.setEntityFilters,q=L.setPropertyFilters,re=L.setDateRange,ie=L.setDurationFilter,le=L.enableFilter,_=L.reportRecordingsListFilterAdded;return s.a.createElement("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-4"},te?s.a.createElement("div",{className:"flex-1 border rounded p-4",style:{minWidth:"400px",maxWidth:"700px"}},s.a.createElement("div",{className:"space-y-2"},s.a.createElement(K.a,{info:"Show recordings where all of the events or actions listed below happen."},"Filter by events and actions"),s.a.createElement(D.a,{bordered:!0,filters:g,setFilters:function(S){_(y.d.EventAndAction),oe(S)},typeKey:r?"person-".concat(n):"session-recordings",mathAvailability:T.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[p.a.Actions,p.a.Events],propertiesTaxonomicGroupTypes:[p.a.EventProperties,p.a.EventFeatureFlags,p.a.Elements]})),!r&&s.a.createElement("div",{className:"mt-8 space-y-2"},s.a.createElement(K.a,{info:"Show recordings by persons who match the set criteria"},"Filter by persons and cohorts"),s.a.createElement(V.a,{pageKey:r?"person-".concat(n):"session-recordings",taxonomicGroupTypes:[p.a.PersonProperties,p.a.Cohorts],propertyFilters:l,onChange:function(S){_(y.d.PersonAndCohort),q(S)}}))):s.a.createElement(O.a,{type:"secondary",size:"small",icon:s.a.createElement(U.IconFilter,null),onClick:function(){if(le(),r){var S=document.querySelectorAll(".entity-filter-row button");S.length>0&&S[0].click()}}},"Filter recordings"),s.a.createElement("div",{className:"flex items-center gap-4"},s.a.createElement(x.a,{dateFrom:m!=null?m:"-7d",dateTo:C!=null?C:void 0,onChange:function(S,ae){_(y.d.DateRange),re(S,ae!=null?ae:void 0)},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]}),s.a.createElement("div",{className:"flex gap-2"},s.a.createElement(K.a,null,"Duration"),s.a.createElement(R,{onChange:function(S){_(y.d.Duration),ie(S)},initialFilter:ne,pageKey:r?"person-".concat(n):"session-recordings"}))))}try{F.displayName="SessionRecordingsFilters",F.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"]={docgenInfo:F.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"})}catch(t){}var P=e("./frontend/src/lib/components/AlertMessage/index.ts");function W(){var t=Object(u.useValues)(I.a),n=t.currentTeam,o=Object(u.useValues)($.a),r=o.featureFlags;return s.a.createElement("div",null,s.a.createElement(Y.a,{title:s.a.createElement("div",null,"Recordings")}),n&&!(n!=null&&n.session_recording_opt_in)?s.a.createElement("div",{className:"mb-4"},s.a.createElement(P.a,{type:"info"},"Session recordings are currently disabled for this project. To use this feature, please go to your ",s.a.createElement(f.Link,{to:"".concat(J.a.projectSettings(),"#recordings")},"project settings")," and enable it.")):null,s.a.createElement(F,null),r[Q.h.SESSION_RECORDINGS_PLAYLIST]?s.a.createElement(M.a,{key:"global"}):s.a.createElement(a.a,{key:"global"}))}var b={component:W,logic:B.c}},"./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx":function(h,c,e){"use strict";e.d(c,"a",function(){return N});var E=e("./node_modules/core-js/modules/es.array.concat.js"),s=e("./node_modules/react/index.js"),a=e.n(s),Y=e("./node_modules/kea/lib/index.esm.js"),I=e("./frontend/src/lib/utils.tsx"),u=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),J=e("./frontend/src/scenes/persons/PersonHeader.tsx"),B=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),$=e.n(B),Q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss"),M=e.n(Q),D={};D.insert="head",D.singleton=!1;var H=$()(M.a,D),w=M.a.locals||{},X=e("./frontend/src/lib/components/LemonTable/index.ts"),z=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),A=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),se=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),k=e("./frontend/@posthog/lemon-ui/src/index.ts"),Z=e("./frontend/src/lib/components/icons.tsx");function N(v){var j=v.personUUID,G=Object(u.c)({personUUID:j,isPlaylist:!0}),f=Object(Y.useValues)(G),R=f.sessionRecordings,y=f.sessionRecordingsResponseLoading,x=f.hasNext,p=f.hasPrev,V=f.activeSessionRecordingId,U=f.offset,O=Object(Y.useActions)(G),T=O.openSessionPlayer,K=O.loadNext,F=O.loadPrev,P=Object(s.useRef)(null),W=[{title:"Recordings",render:function(t,n){return a.a.createElement("div",null,Object(J.b)(n.person,25),a.a.createElement("div",null,a.a.createElement("span",null,a.a.createElement(z.b,{time:n.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})," \xB7 ",Object(I.n)(n.recording_duration))))}}];return a.a.createElement("div",{ref:P,className:"SessionRecordingPlaylist","data-attr":"session-recordings-playlist"},a.a.createElement("div",{className:"SessionRecordingPlaylist__left-column mr-4"},a.a.createElement(X.a,{dataSource:R,columns:W,loading:y,onRow:function(t){return{onClick:function(o){if(!o.target.closest("a")){var r;T(t.id),window.scrollTo({left:0,top:P!=null&&(r=P.current)!==null&&r!==void 0&&r.offsetTop?P.current.offsetTop-8:0,behavior:"smooth"})}}}},rowStatus:function(t){return V===t.id?"highlighted":null},rowClassName:"cursor-pointer","data-attr":"session-recording-table","data-tooltip":"session-recording-table",emptyState:"No matching recordings found",loadingSkeletonRows:u.a}),a.a.createElement("div",{className:"SessionRecordingPlaylist__pagination-control"},a.a.createElement("span",null,"".concat(U+1," - ").concat(U+(y?Object(u.b)(!0):R.length))),a.a.createElement(k.LemonButton,{icon:a.a.createElement(Z.IconChevronLeft,null),status:"stealth",disabled:!p,onClick:function(){F(),window.scrollTo(0,0)}}),a.a.createElement(k.LemonButton,{icon:a.a.createElement(Z.IconChevronRight,null),status:"stealth",disabled:!x,onClick:function(){K(),window.scrollTo(0,0)}}))),a.a.createElement("div",{className:"SessionRecordingPlaylist__right-column"},V?a.a.createElement("div",{className:"border rounded h-full"},a.a.createElement(A.b,{playerKey:"playlist",sessionRecordingId:V})):a.a.createElement(se.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonTo:"https://posthog.com/docs/user-guides/recordings"})))}try{N.displayName="SessionRecordingsPlaylist",N.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:N.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(v){}},"./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx":function(h,c,e){"use strict";e.d(c,"a",function(){return v});var E=e("./node_modules/react/index.js"),s=e.n(E),a=e("./node_modules/kea/lib/index.esm.js"),Y=e("./frontend/src/lib/utils.tsx"),I=e("./node_modules/antd/es/button/index.js"),u=e("./node_modules/antd/es/row/index.js"),J=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),B=e("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),$=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),Q=e("./node_modules/@ant-design/icons/es/icons/LeftOutlined.js"),M=e("./node_modules/@ant-design/icons/es/icons/RightOutlined.js"),D=e("./frontend/src/scenes/persons/PersonHeader.tsx"),H=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),w=e.n(H),X=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss"),z=e.n(X),A={};A.insert="head",A.singleton=!1;var se=w()(z.a,A),k=z.a.locals||{},Z=e("./frontend/src/lib/components/LemonTable/index.ts"),N=e("./frontend/src/lib/components/TimezoneAware/index.tsx");function v(j){var G=j.personUUID,f=j.isPersonPage,R=f===void 0?!1:f,y=Object(J.c)({personUUID:G}),x=Object(a.useValues)(y),p=x.sessionRecordings,V=x.sessionRecordingsResponseLoading,U=x.hasNext,O=x.hasPrev,T=Object(a.useActions)(y),K=T.openSessionPlayer,F=T.closeSessionPlayer,P=T.loadNext,W=T.loadPrev,b=[{title:"Start time",render:function(n,o){return s.a.createElement(N.b,{time:o.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})}},{title:"Duration",render:function(n,o){return s.a.createElement("span",null,Object(Y.P)(o.recording_duration))}},{title:"Person",key:"person",render:function(n,o){return s.a.createElement(D.a,{withIcon:!0,person:o.person})}},{render:function(n,o){return s.a.createElement("div",{className:"play-button-container"},s.a.createElement(I.a,{className:o.viewed?"play-button viewed":"play-button","data-attr":"session-recordings-button",icon:s.a.createElement(B.a,null)},"Watch recording"))}}];return s.a.createElement("div",{className:"session-recordings-table","data-attr":"session-recordings-table"},s.a.createElement(Z.a,{dataSource:p,columns:b,loading:V,onRow:function(n){return{onClick:function(r){r.target.closest("a")||K(n.id)}}},rowClassName:"cursor-pointer","data-attr":"session-recording-table",emptyState:"No matching recordings found"}),(O||U)&&s.a.createElement(u.a,{className:"pagination-control"},s.a.createElement(I.a,{type:"link",disabled:!O,onClick:function(){W(),window.scrollTo(0,0)}},s.a.createElement(Q.a,null)," Previous"),s.a.createElement(I.a,{type:"link",disabled:!U,onClick:function(){P(),window.scrollTo(0,0)}},"Next ",s.a.createElement(M.a,null))),s.a.createElement("div",{style:{marginBottom:64}}),s.a.createElement($.a,{isPersonPage:R,onClose:F}))}try{v.displayName="SessionRecordingsTable",v.__docgenInfo={description:"",displayName:"SessionRecordingsTable",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"]={docgenInfo:v.__docgenInfo,name:"SessionRecordingsTable",path:"frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"})}catch(j){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss":function(h,c,e){var E=e("./node_modules/css-loader/dist/runtime/api.js");c=E(!1),c.push([h.i,".SessionRecordingPlaylist{display:flex;flex-direction:row}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column{width:300px;flex-shrink:0}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column .SessionRecordingPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column{flex:1}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column .SessionRecordingPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),h.exports=c},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss":function(h,c,e){var E=e("./node_modules/css-loader/dist/runtime/api.js");c=E(!1),c.push([h.i,".session-recordings-table .pagination-control{margin:1rem;justify-content:center}.session-recordings-table .play-button-container{display:flex;justify-content:flex-end}.session-recordings-table .play-button-container .play-button .anticon-play-circle{color:var(--primary)}.session-recordings-table .play-button-container .play-button.viewed .anticon-play-circle{color:var(--muted)}.session-recordings-table .info-icon{color:var(--primary)}",""]),h.exports=c}}]);
