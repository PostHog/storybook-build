(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{5786:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(3),_interopRequireDefault=__webpack_require__(2);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(23)),React=_interopRequireWildcard(__webpack_require__(0)),_Base=_interopRequireDefault(__webpack_require__(5792)),_default=function Paragraph(props){return React.createElement(_Base.default,(0,_extends2.default)({},props,{component:"div"}))};exports.default=_default},5797:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return RestrictionScope})),__webpack_require__.d(__webpack_exports__,"a",(function(){return RestrictedArea}));__webpack_require__(37);var RestrictionScope,kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_scenes_organizationLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(98),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),lib_components_Tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(54),_utils_permissioning__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(873),_scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(29);function RestrictedArea(_ref){var Component=_ref.Component,minimumAccessLevel=_ref.minimumAccessLevel,_ref$scope=_ref.scope,scope=void 0===_ref$scope?RestrictionScope.Organization:_ref$scope,currentOrganization=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_scenes_organizationLogic__WEBPACK_IMPORTED_MODULE_3__.a).currentOrganization,currentTeam=Object(kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_scenes_teamLogic__WEBPACK_IMPORTED_MODULE_7__.a).currentTeam,restrictionReason=Object(react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((function(){var scopeAccessLevel;if(scope===RestrictionScope.Project){if(!currentTeam)return"Loading current project…";scopeAccessLevel=currentTeam.effective_membership_level}else{if(!currentOrganization)return"Loading current organization…";scopeAccessLevel=currentOrganization.membership_level}return null===scopeAccessLevel?"You don't have access to the current ".concat(scope,"."):scopeAccessLevel<minimumAccessLevel?minimumAccessLevel===_constants__WEBPACK_IMPORTED_MODULE_4__.s.Owner?"This area is restricted to the ".concat(scope," owner."):"This area is restricted to ".concat(scope," ").concat(_utils_permissioning__WEBPACK_IMPORTED_MODULE_6__.b.get(minimumAccessLevel),"s and up. Your level is ").concat(_utils_permissioning__WEBPACK_IMPORTED_MODULE_6__.b.get(scopeAccessLevel),"."):null}),[currentOrganization]);return restrictionReason?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(lib_components_Tooltip__WEBPACK_IMPORTED_MODULE_5__.a,{title:restrictionReason,placement:"topLeft",delayMs:0},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Component,{isRestricted:!0,restrictionReason:restrictionReason}))):react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Component,{isRestricted:!1,restrictionReason:null})}!function(RestrictionScope){RestrictionScope.Organization="organization",RestrictionScope.Project="project"}(RestrictionScope||(RestrictionScope={}));try{RestrictedArea.displayName="RestrictedArea",RestrictedArea.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:RestrictedArea.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(__react_docgen_typescript_loader_error){}try{RestrictionScope.Organization.displayName="RestrictionScope.Organization",RestrictionScope.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:RestrictionScope.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(__react_docgen_typescript_loader_error){}try{RestrictionScope.Project.displayName="RestrictionScope.Project",RestrictionScope.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:RestrictionScope.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(__react_docgen_typescript_loader_error){}},5939:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),asn_CrownFilled={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zM512 734.2c-62.1 0-112.6-50.5-112.6-112.6S449.9 509 512 509s112.6 50.5 112.6 112.6S574.1 734.2 512 734.2zm0-160.9c-26.6 0-48.2 21.6-48.2 48.3 0 26.6 21.6 48.3 48.2 48.3s48.2-21.6 48.2-48.3c0-26.6-21.6-48.3-48.2-48.3z"}}]},name:"crown",theme:"filled"},AntdIcon=__webpack_require__(18),icons_CrownFilled_CrownFilled=function CrownFilled(props,ref){return react.createElement(AntdIcon.a,Object.assign({},props,{ref:ref,icon:asn_CrownFilled}))};icons_CrownFilled_CrownFilled.displayName="CrownFilled";__webpack_exports__.a=react.forwardRef(icons_CrownFilled_CrownFilled)},6148:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"OrganizationSettings",(function(){return OrganizationSettings}));__webpack_require__(34),__webpack_require__(64);var slicedToArray=__webpack_require__(14),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),input=__webpack_require__(713),es_button=__webpack_require__(114),es_select=__webpack_require__(213),skeleton=__webpack_require__(1187),es_switch=__webpack_require__(5660),card=__webpack_require__(5697),divider=__webpack_require__(5655),PageHeader=__webpack_require__(329),modal=(__webpack_require__(37),__webpack_require__(42),__webpack_require__(36),__webpack_require__(107),__webpack_require__(46),__webpack_require__(616),__webpack_require__(1808)),table=__webpack_require__(2657),index_esm=__webpack_require__(1),invitesLogic=__webpack_require__(1121),DeleteOutlined=__webpack_require__(5674),ExclamationCircleOutlined=__webpack_require__(476),utils=__webpack_require__(11),CopyToClipboard=__webpack_require__(676),CreateInviteModal=__webpack_require__(2513),ProfilePicture=__webpack_require__(441);function makeActionsComponent(deleteInvite){return function ActionsComponent(_,invite){return react_default.a.createElement(DeleteOutlined.a,{className:"text-danger",onClick:function onClick(){invite.is_expired?deleteInvite(invite):modal.a.confirm({title:"Delete invite for ".concat(invite.target_email,"?"),icon:react_default.a.createElement(ExclamationCircleOutlined.a,null),okText:"Delete",okType:"danger",onOk:function onOk(){deleteInvite(invite)}})}})}}function Invites(){var _useValues=Object(index_esm.useValues)(invitesLogic.a),invites=_useValues.invites,invitesLoading=_useValues.invitesLoading,columns=[{dataIndex:"target_email",key:"target_email",render:function ProfilePictureRender(_,invite){return react_default.a.createElement(ProfilePicture.a,{name:invite.first_name,email:invite.target_email})},width:32},{title:"Target Email",dataIndex:"target_email",key:"target_email",render:function TargetEmail(target_email){return null!=target_email?target_email:react_default.a.createElement("i",null,"none")}},{title:"Created At",dataIndex:"created_at",key:"created_at",render:function render(created_at){return Object(utils.K)(created_at)}},{title:"Created By",dataIndex:"created_by",key:"created_by",render:function render(createdBy){return createdBy?"".concat(createdBy.first_name," (").concat(createdBy.email,")"):"–"}},{title:"Invite Link",dataIndex:"id",key:"link",render:function render(id,invite){return function InviteLinkComponent(id,invite){var url=new URL("/signup/".concat(id),document.baseURI).href;return invite.is_expired?react_default.a.createElement("b",null,"Expired! Delete and recreate"):react_default.a.createElement(CopyToClipboard.a,{"data-attr":"invite-link",description:"invite link"},url)}(id,invite)}},{title:"",dataIndex:"actions",key:"actions",render:makeActionsComponent(Object(index_esm.useActions)(invitesLogic.a).deleteInvite)}];return react_default.a.createElement("div",null,react_default.a.createElement("h2",{className:"subtitle",style:{justifyContent:"space-between"}},"Pending Invites",!!invites.length&&react_default.a.createElement(CreateInviteModal.a,null)),react_default.a.createElement(table.a,{dataSource:invites,columns:columns,rowKey:"id",pagination:!1,loading:invitesLoading,style:{marginTop:"1rem"},"data-attr":"invites-table",locale:{emptyText:function InvitesTableCTA(){return react_default.a.createElement(CreateInviteModal.a,null)}}}))}__webpack_require__(59);var dropdown=__webpack_require__(865),menu=__webpack_require__(328),membersLogic=__webpack_require__(1816),asn_SwapOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},AntdIcon=__webpack_require__(18),icons_SwapOutlined_SwapOutlined=function SwapOutlined(props,ref){return react.createElement(AntdIcon.a,Object.assign({},props,{ref:ref,icon:asn_SwapOutlined}))};icons_SwapOutlined_SwapOutlined.displayName="SwapOutlined";var icons_SwapOutlined=react.forwardRef(icons_SwapOutlined_SwapOutlined),CrownFilled=__webpack_require__(5939),UpOutlined=__webpack_require__(2649),DownOutlined=__webpack_require__(602),LogoutOutlined=__webpack_require__(5727),constants=__webpack_require__(20),organizationLogic=__webpack_require__(98),userLogic=__webpack_require__(68),Tooltip=__webpack_require__(54),permissioning=__webpack_require__(873);function Members(_ref){var user=_ref.user,_useValues5=Object(index_esm.useValues)(membersLogic.a),members=_useValues5.members,membersLoading=_useValues5.membersLoading,columns=[{key:"user_profile_picture",render:function ProfilePictureRender(_,member){return react_default.a.createElement(ProfilePicture.a,{name:member.user.first_name,email:member.user.email})},width:32},{title:"Name",key:"user_first_name",render:function render(_,member){return member.user.uuid==user.uuid?"".concat(member.user.first_name," (me)"):member.user.first_name},sorter:function sorter(a,b){return a.user.first_name.localeCompare(b.user.first_name)}},{title:"Email",key:"user_email",render:function render(_,member){return member.user.email},sorter:function sorter(a,b){return a.user.email.localeCompare(b.user.email)}},{title:"Level",dataIndex:"level",key:"level",render:function LevelRender(_,member){return function LevelComponent(member){var _membershipLevelToNam,user=Object(index_esm.useValues)(userLogic.a).user,currentOrganization=Object(index_esm.useValues)(organizationLogic.a).currentOrganization,changeMemberAccessLevel=Object(index_esm.useActions)(membersLogic.a).changeMemberAccessLevel,myMembershipLevel=currentOrganization?currentOrganization.membership_level:null;if(!user)return null;function generateHandleClick(listLevel){return function handleClick(event){if(event.preventDefault(),!user)throw Error;var _user$organization;listLevel===constants.s.Owner?modal.a.confirm({centered:!0,title:"Transfer organization ownership to ".concat(member.user.first_name,"?"),content:"You will no longer be the owner of ".concat(null===(_user$organization=user.organization)||void 0===_user$organization?void 0:_user$organization.name,". After the transfer you will become an administrator."),icon:react_default.a.createElement(icons_SwapOutlined,null),okType:"danger",okText:"Transfer Ownership",onOk:function onOk(){changeMemberAccessLevel(member,listLevel)}}):changeMemberAccessLevel(member,listLevel)}}var levelButton=react_default.a.createElement(es_button.a,{"data-attr":"change-membership-level",icon:member.level===constants.s.Owner?react_default.a.createElement(CrownFilled.a,null):void 0},null!==(_membershipLevelToNam=permissioning.b.get(member.level))&&void 0!==_membershipLevelToNam?_membershipLevelToNam:"unknown (".concat(member.level,")")),allowedLevels=permissioning.c.filter((function(listLevel){return!Object(permissioning.a)(myMembershipLevel,user,member,listLevel)})),disallowedReason=Object(permissioning.a)(myMembershipLevel,user,member,allowedLevels);return disallowedReason?react_default.a.createElement(Tooltip.a,{title:disallowedReason},levelButton):react_default.a.createElement(dropdown.a,{overlay:react_default.a.createElement(menu.a,null,allowedLevels.map((function(listLevel){return react_default.a.createElement(menu.a.Item,{key:"".concat(member.user.uuid,"-level-").concat(listLevel)},react_default.a.createElement("a",{href:"#",onClick:generateHandleClick(listLevel),"data-test-level":listLevel},listLevel===constants.s.Owner?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(CrownFilled.a,{style:{marginRight:"0.5rem"}}),"Transfer organization ownership"):listLevel>member.level?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(UpOutlined.a,{style:{marginRight:"0.5rem"}}),"Upgrade to ",permissioning.b.get(listLevel)):react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(DownOutlined.a,{style:{marginRight:"0.5rem"}}),"Downgrade to ",permissioning.b.get(listLevel))))})))},levelButton)}(member)},sorter:function sorter(a,b){return a.level-b.level},defaultSortOrder:"descend"},{title:"Joined At",dataIndex:"joined_at",key:"joined_at",render:function render(joinedAt){return Object(utils.K)(joinedAt)},sorter:function sorter(a,b){return a.joined_at.localeCompare(b.joined_at)},defaultSortOrder:"ascend"},{dataIndex:"actions",key:"actions",align:"center",render:function ActionsRender(_,member){return function Members_ActionsComponent(member){var _currentOrganization$,user=Object(index_esm.useValues)(userLogic.a).user,currentOrganization=Object(index_esm.useValues)(organizationLogic.a).currentOrganization,removeMember=Object(index_esm.useActions)(membersLogic.a).removeMember;if(!user)return null;var currentMembershipLevel=null!==(_currentOrganization$=null==currentOrganization?void 0:currentOrganization.membership_level)&&void 0!==_currentOrganization$?_currentOrganization$:-1,allowDeletion=(currentMembershipLevel>=constants.s.Admin&&member.level<=currentMembershipLevel||member.user.uuid===user.uuid)&&member.level!==constants.s.Owner;return react_default.a.createElement("div",null,allowDeletion&&react_default.a.createElement("a",{className:"text-danger",onClick:function handleClick(){var _user$organization2;if(!user)throw Error;modal.a.confirm({title:"".concat(member.user.uuid==user.uuid?"Leave":"Remove ".concat(member.user.first_name," from")," organization ").concat(null===(_user$organization2=user.organization)||void 0===_user$organization2?void 0:_user$organization2.name,"?"),icon:react_default.a.createElement(ExclamationCircleOutlined.a,null),okText:member.user.uuid==user.uuid?"Leave":"Remove",okType:"danger",cancelText:"Cancel",onOk:function onOk(){removeMember(member)}})},"data-attr":"delete-org-membership"},member.user.uuid!==user.uuid?react_default.a.createElement(DeleteOutlined.a,{title:"Remove from organization"}):react_default.a.createElement(LogoutOutlined.a,{title:"Leave organization"})))}(member)}}];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("h2",{className:"subtitle"},"Members"),react_default.a.createElement(table.a,{dataSource:members,columns:columns,rowKey:"id",pagination:!1,style:{marginTop:"1rem"},loading:membersLoading,"data-attr":"org-members-table"}))}try{Members.displayName="Members",Members.__docgenInfo={description:"",displayName:"Members",props:{user:{defaultValue:null,description:"Currently logged-in user.",name:"user",required:!0,type:{name:"UserType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/organization/Settings/Members.tsx#Members"]={docgenInfo:Members.__docgenInfo,name:"Members",path:"frontend/src/scenes/organization/Settings/Members.tsx#Members"})}catch(__react_docgen_typescript_loader_error){}var Paragraph=__webpack_require__(5786),Paragraph_default=__webpack_require__.n(Paragraph);function DeleteOrganizationModal(_ref){var isVisible=_ref.isVisible,setIsVisible=_ref.setIsVisible,_useValues=Object(index_esm.useValues)(organizationLogic.a),currentOrganization=_useValues.currentOrganization,organizationBeingDeleted=_useValues.organizationBeingDeleted,deleteOrganization=Object(index_esm.useActions)(organizationLogic.a).deleteOrganization,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),isDeletionConfirmed=_useState2[0],setIsDeletionConfirmed=_useState2[1],isDeletionInProgress=!!currentOrganization&&(null==organizationBeingDeleted?void 0:organizationBeingDeleted.id)===currentOrganization.id;return react_default.a.createElement(modal.a,{title:"Delete the entire organization?",okText:"Delete ".concat(currentOrganization?currentOrganization.name:"the current organization"),okType:"danger",onOk:currentOrganization?function(){return deleteOrganization(currentOrganization)}:void 0,okButtonProps:{"data-attr":"delete-organization-ok",loading:isDeletionInProgress,disabled:!isDeletionConfirmed},onCancel:function onCancel(){return setIsVisible(!1)},cancelButtonProps:{disabled:isDeletionInProgress},visible:isVisible},react_default.a.createElement("p",null,"Organization deletion ",react_default.a.createElement("b",null,"cannot be undone"),". You will lose all data, ",react_default.a.createElement("b",null,"including all events"),", related to all projects within this organization."),react_default.a.createElement("p",null,"Please type"," ",react_default.a.createElement("strong",null,currentOrganization?currentOrganization.name:"this organization's name")," to confirm."),react_default.a.createElement(input.a,{type:"text",onChange:function onChange(e){if(currentOrganization){var value=e.target.value;setIsDeletionConfirmed(value.toLowerCase()===currentOrganization.name.toLowerCase())}}}))}function DangerZone(_ref2){var isRestricted=_ref2.isRestricted,currentOrganization=Object(index_esm.useValues)(organizationLogic.a).currentOrganization,_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),isModalVisible=_useState4[0],setIsModalVisible=_useState4[1];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{style:{color:"var(--danger)"}},react_default.a.createElement("h2",{style:{color:"var(--danger)"},className:"subtitle"},"Danger Zone"),react_default.a.createElement("div",{className:"mt"},!isRestricted&&react_default.a.createElement(Paragraph_default.a,{type:"danger"},"This is ",react_default.a.createElement("b",null,"irreversible"),". Please be certain."),react_default.a.createElement(es_button.a,{type:"default",danger:!0,onClick:function onClick(){return setIsModalVisible(!0)},className:"mr-05","data-attr":"delete-project-button",icon:react_default.a.createElement(DeleteOutlined.a,null),disabled:isRestricted},"Delete ",(null==currentOrganization?void 0:currentOrganization.name)||"the current organization"))),react_default.a.createElement(DeleteOrganizationModal,{isVisible:isModalVisible,setIsVisible:setIsModalVisible}))}try{DeleteOrganizationModal.displayName="DeleteOrganizationModal",DeleteOrganizationModal.__docgenInfo={description:"",displayName:"DeleteOrganizationModal",props:{isVisible:{defaultValue:null,description:"",name:"isVisible",required:!0,type:{name:"boolean"}},setIsVisible:{defaultValue:null,description:"",name:"setIsVisible",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/organization/Settings/DangerZone.tsx#DeleteOrganizationModal"]={docgenInfo:DeleteOrganizationModal.__docgenInfo,name:"DeleteOrganizationModal",path:"frontend/src/scenes/organization/Settings/DangerZone.tsx#DeleteOrganizationModal"})}catch(__react_docgen_typescript_loader_error){}try{DangerZone.displayName="DangerZone",DangerZone.__docgenInfo={description:"",displayName:"DangerZone",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/organization/Settings/DangerZone.tsx#DangerZone"]={docgenInfo:DangerZone.__docgenInfo,name:"DangerZone",path:"frontend/src/scenes/organization/Settings/DangerZone.tsx#DangerZone"})}catch(__react_docgen_typescript_loader_error){}var RestrictedArea=__webpack_require__(5797),logic=__webpack_require__(56),icons=__webpack_require__(44),scene={component:OrganizationSettings,logic:organizationLogic.a};function DisplayName(_ref){var isRestricted=_ref.isRestricted,_useValues=Object(index_esm.useValues)(organizationLogic.a),currentOrganization=_useValues.currentOrganization,currentOrganizationLoading=_useValues.currentOrganizationLoading,updateOrganization=Object(index_esm.useActions)(organizationLogic.a).updateOrganization,_useState=Object(react.useState)((null==currentOrganization?void 0:currentOrganization.name)||""),_useState2=slicedToArray_default()(_useState,2),name=_useState2[0],setName=_useState2[1];return react_default.a.createElement("div",null,react_default.a.createElement("h2",{id:"name",className:"subtitle"},"Display Name"),react_default.a.createElement(input.a,{value:name,onChange:function onChange(event){setName(event.target.value)},style:{maxWidth:"40rem",marginBottom:"1rem",display:"block"},disabled:isRestricted}),react_default.a.createElement(es_button.a,{type:"primary",onClick:function onClick(e){e.preventDefault(),updateOrganization({name:name})},disabled:isRestricted||!name||!currentOrganization||name===currentOrganization.name,loading:currentOrganizationLoading},"Rename Organization"))}function DomainWhitelist(_ref2){var isRestricted=_ref2.isRestricted,socialAuthAvailable=Object(index_esm.useValues)(logic.a).socialAuthAvailable,_useValues3=Object(index_esm.useValues)(organizationLogic.a),currentOrganization=_useValues3.currentOrganization,currentOrganizationLoading=_useValues3.currentOrganizationLoading,updateOrganization=Object(index_esm.useActions)(organizationLogic.a).updateOrganization,_useState3=Object(react.useState)([]),_useState4=slicedToArray_default()(_useState3,2),localList=_useState4[0],setLocalList=_useState4[1];return Object(react.useEffect)((function(){return setLocalList((null==currentOrganization?void 0:currentOrganization.domain_whitelist)||[])}),[null==currentOrganization?void 0:currentOrganization.domain_whitelist]),react_default.a.createElement("div",null,react_default.a.createElement("h2",{id:"domain-whitelist",className:"subtitle"},"Domain Whitelist"),socialAuthAvailable?react_default.a.createElement("div",null,"Trusted domains for authentication. When ",react_default.a.createElement("b",null,"new users")," log in through a social provider (e.g. Google) using an email address on any of your whitelisted domains, they'll be"," ",react_default.a.createElement("b",null,"automatically added to this organization."),react_default.a.createElement("div",{className:"mt-05"},currentOrganization?react_default.a.createElement(es_select.a,{mode:"tags",placeholder:"Add whitelisted domains (e.g. hogflix.com or movies.hogflix.com)",onChange:function onChange(val){return setLocalList(val)},loading:currentOrganizationLoading,style:{width:"40rem",maxWidth:"100%"},onBlur:function onBlur(){return updateOrganization({domain_whitelist:localList})},value:localList,disabled:isRestricted},currentOrganization.domain_whitelist.map((function(domain){return react_default.a.createElement(es_select.a.Option,{key:domain,value:domain},domain)}))):react_default.a.createElement(skeleton.a,{active:!0}))):react_default.a.createElement("div",{className:"text-muted"},"This feature is only available when social authentication is enabled."," ",react_default.a.createElement("a",{href:"https://posthog.com/docs/features/sso?utm_campaign=domain-whitelist&utm_medium=in-product",target:"_blank",rel:"noopener"},"Learn more ",react_default.a.createElement(icons.IconExternalLink,null))))}function EmailPreferences(_ref3){var isRestricted=_ref3.isRestricted,_useValues4=Object(index_esm.useValues)(organizationLogic.a),currentOrganization=_useValues4.currentOrganization,currentOrganizationLoading=_useValues4.currentOrganizationLoading,updateOrganization=Object(index_esm.useActions)(organizationLogic.a).updateOrganization;return react_default.a.createElement("div",null,react_default.a.createElement("h2",{id:"notification-preferences",className:"subtitle"},"Notification Preferences"),react_default.a.createElement("div",null,react_default.a.createElement(es_switch.a,{id:"is-member-join-email-enabled-switch","data-attr":"is-member-join-email-enabled-switch",onChange:function onChange(checked){updateOrganization({is_member_join_email_enabled:checked})},checked:null==currentOrganization?void 0:currentOrganization.is_member_join_email_enabled,loading:currentOrganizationLoading,disabled:isRestricted||!currentOrganization}),react_default.a.createElement("label",{style:{marginLeft:"10px"},htmlFor:"is-member-join-email-enabled-switch"},"Email all current members when a new member joins")))}function OrganizationSettings(){var user=Object(index_esm.useValues)(userLogic.a).user,preflight=Object(index_esm.useValues)(logic.a).preflight;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PageHeader.a,{title:"Organization Settings",caption:"View and manage your organization here. Build an even better product together."}),react_default.a.createElement(card.a,null,react_default.a.createElement(RestrictedArea.a,{Component:DisplayName,minimumAccessLevel:constants.s.Admin}),react_default.a.createElement(divider.a,null),!(null==preflight?void 0:preflight.cloud)&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(RestrictedArea.a,{Component:DomainWhitelist,minimumAccessLevel:constants.s.Admin}),react_default.a.createElement(divider.a,null)),react_default.a.createElement(Invites,null),react_default.a.createElement(divider.a,null),user&&react_default.a.createElement(Members,{user:user}),react_default.a.createElement(divider.a,null),react_default.a.createElement(RestrictedArea.a,{Component:EmailPreferences,minimumAccessLevel:constants.s.Admin}),react_default.a.createElement(divider.a,null),react_default.a.createElement(RestrictedArea.a,{Component:DangerZone,minimumAccessLevel:constants.s.Owner})))}}}]);