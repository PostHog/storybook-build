(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{"./frontend/src/scenes/events/EventsVolumeTable.tsx":function(N,b,e){"use strict";e.r(b),e.d(b,"scene",function(){return ie}),e.d(b,"EventsVolumeTable",function(){return K});var j=e("./node_modules/react/index.js"),n=e.n(j),m=e("./node_modules/kea/lib/index.esm.js"),W=e("./node_modules/antd/es/alert/index.js"),H=e("./node_modules/antd/es/skeleton/index.js"),U=e("./frontend/src/scenes/PreflightCheck/logic.tsx"),_=e("./frontend/src/models/eventDefinitionsModel.ts"),w=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),J=e("./frontend/src/scenes/events/VolumeTable.tsx"),X=e("./frontend/src/scenes/events/definitions/DefinitionDrawer.tsx"),G=e("./frontend/src/scenes/events/EventsTabs.tsx"),Q=e("./frontend/src/scenes/events/EventPageHeader.tsx"),Z=e("./frontend/src/lib/logic/featureFlagLogic.ts"),F=e("./frontend/src/lib/constants.tsx"),ae=e("./node_modules/core-js/modules/es.array.concat.js"),se=e("./node_modules/core-js/modules/es.function.name.js"),k=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),O=e.n(k),q=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),ee=e.n(q),ne=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),te=e.n(ne),oe=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),B=e.n(oe),V={};V.insert="head",V.singleton=!1;var le=te()(B.a,V),re=B.a.locals||{},$=e("./frontend/src/lib/components/LemonTable/index.ts"),g=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),z=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),M=e("./frontend/src/scenes/organizationLogic.tsx"),Y=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),A=e("./frontend/src/lib/utils.tsx"),de=e("./node_modules/core-js/modules/es.array.includes.js"),ce=e("./node_modules/core-js/modules/es.string.includes.js");function L(v){var r,y,c,a,E,f,x,T,s=v.definition,P=Object(m.useActions)(g.d),D=P.loadPropertiesForEvent,C=Object(m.useValues)(g.d),i=C.eventPropertiesCacheMap,u=C.eventDefinitionPropertiesLoading,t=Object(m.useValues)(M.a),o=t.hasDashboardCollaboration,l=t.hasIngestionTaxonomy;Object(j.useEffect)(function(){D(s)},[]);var p=[{title:"Property",key:"property",className:"definition-column-name",render:function(R,d){return n.a.createElement(Y.b,{definition:d,event:s,hideIcon:!0,hideView:!0})}},{title:"Type",key:"type",className:"definition-column-type",render:function(R,d){return d.property_type?n.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},d.property_type):n.a.createElement("span",{className:"text-muted"},"\u2014")}}].concat(O()(o?[{title:"Tags",key:"tags",render:function(R,d){var I;return n.a.createElement(z.a,{tags:(I=d.tags)!==null&&I!==void 0?I:[],staticOnly:!0})}}]:[]),O()(l?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(R,d){return d.query_usage_30_day?Object(A.O)(d.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(R,d){return d.example?n.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},d.example):n.a.createElement("span",{className:"text-muted"},"\u2014")}}]);return n.a.createElement("div",{className:"event-properties-wrapper"},n.a.createElement("span",{className:"event-properties-header"},"Top properties"),n.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),n.a.createElement($.a,{id:"event-properties-definition-table-".concat(s.id),columns:p,className:"event-properties-definition-table-".concat(s.id),dataSource:(r=i==null||(y=i[s.id])===null||y===void 0?void 0:y.results)!==null&&r!==void 0?r:[],emptyState:"This event has no properties",nouns:["definition","definitions"],pagination:{controlled:!0,pageSize:g.b,currentPage:(c=i==null||(a=i[s.id])===null||a===void 0?void 0:a.page)!==null&&c!==void 0?c:1,entryCount:(E=i==null||(f=i[s.id])===null||f===void 0?void 0:f.count)!==null&&E!==void 0?E:0,onForward:!(i==null||(x=i[s.id])===null||x===void 0)&&x.next?function(){D(s,i[s.id].next)}:void 0,onBackward:!(i==null||(T=i[s.id])===null||T===void 0)&&T.previous?function(){D(s,i[s.id].previous)}:void 0},loading:u.includes(s.id)}))}try{L.displayName="EventDefinitionProperties",L.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:L.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(v){}var ue={component:h,logic:g.d,paramsToProps:function(){return{syncWithUrl:!0}}};function h(){var v,r,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ee()(y);var c=Object(m.useValues)(g.d),a=c.eventDefinitions,E=c.eventDefinitionsLoading,f=c.openedDefinitionId,x=Object(m.useActions)(g.d),T=x.loadEventDefinitions,s=x.setOpenedDefinition,P=Object(m.useValues)(M.a),D=P.hasDashboardCollaboration,C=P.hasIngestionTaxonomy,i=[{title:"Name",key:"name",className:"definition-column-name",render:function(t,o){return n.a.createElement(Y.a,{definition:o,hideView:!0})},sorter:function(t,o){return t.name.localeCompare(o.name)}}].concat(O()(D?[{title:"Tags",key:"tags",render:function(t,o){var l;return n.a.createElement(z.a,{tags:(l=o.tags)!==null&&l!==void 0?l:[],staticOnly:!0})}}]:[]),O()(C?[{title:"30 day volume",key:"volume_30_day",align:"right",render:function(t,o){return o.volume_30_day?Object(A.O)(o.volume_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(t,o){var l,p;return((l=t==null?void 0:t.volume_30_day)!==null&&l!==void 0?l:0)-((p=o==null?void 0:o.volume_30_day)!==null&&p!==void 0?p:0)}},{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(t,o){return o.query_usage_30_day?Object(A.O)(o.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(t,o){var l,p;return((l=t==null?void 0:t.query_usage_30_day)!==null&&l!==void 0?l:0)-((p=o==null?void 0:o.query_usage_30_day)!==null&&p!==void 0?p:0)}}]:[]));return n.a.createElement($.a,{columns:i,className:"events-definition-table","data-attr":"events-definition-table",loading:E,rowKey:"id",pagination:{controlled:!0,currentPage:(v=a==null?void 0:a.page)!==null&&v!==void 0?v:1,entryCount:(r=a==null?void 0:a.count)!==null&&r!==void 0?r:0,pageSize:g.a,onForward:a.next?function(){T(a.next),window.scrollTo(0,0)}:void 0,onBackward:a.previous?function(){T(a.previous),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(t){return n.a.createElement(L,{definition:t})},noIndent:!0,isRowExpanded:function(t){return t.id===f?!0:-1},onRowCollapse:function(t){return t.id===f&&s(null)}},dataSource:a.results,emptyState:"No event definitions",nouns:["definition","definitions"]})}try{h.displayName="EventDefinitionsTable",h.__docgenInfo={description:"",displayName:"EventDefinitionsTable",props:{compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx#EventDefinitionsTable"]={docgenInfo:h.__docgenInfo,name:"EventDefinitionsTable",path:"frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx#EventDefinitionsTable"})}catch(v){}var ie={component:K,logic:_.a};function K(){var v=Object(m.useValues)(U.a),r=v.preflight,y=Object(m.useValues)(_.a),c=y.eventDefinitions,a=y.loaded,E=Object(m.useValues)(Z.a),f=E.featureFlags;return n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(Q.a,{activeTab:G.a.EventStats}),a?n.a.createElement(n.a.Fragment,null,r&&!(r!=null&&r.is_event_property_usage_enabled)?n.a.createElement(w.a,{tab:"Events Stats"}):(c.length===0||c[0].volume_30_day===null)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(W.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later."})),f[F.o.COLLABORATIONS_TAXONOMY]?n.a.createElement(m.BindLogic,{logic:g.d,props:{syncWithUrl:!0}},n.a.createElement(h,null)):n.a.createElement(J.a,{data:c,type:"event"})):n.a.createElement(H.a,{active:!0,paragraph:{rows:5}}),!f[F.o.COLLABORATIONS_TAXONOMY]&&n.a.createElement(X.a,null))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(N,b,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");b=j(!1),b.push([N.i,'.events-definition-table{margin-top:1rem}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon{display:flex;align-items:center;justify-content:flex-start;width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted path{fill:var(--taxonomy-icon-muted)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{height:28px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified path{fill:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified:not(.taxonomy-icon-ph){margin-bottom:-4px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-style:italic;font-size:13px;color:var(--text-muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;cursor:default}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),N.exports=b}}]);
