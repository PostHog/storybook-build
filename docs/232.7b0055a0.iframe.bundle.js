(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{"./frontend/src/scenes/plugins/Plugins.tsx":function(Q,E,l){"use strict";l.r(E),l.d(E,"scene",function(){return Ct}),l.d(E,"Plugins",function(){return Bn});var b=l("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),B=l.n(b),N=l("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss"),T=l.n(N),L={};L.insert="head",L.singleton=!1;var le=B()(T.a,L),ue=T.a.locals||{},R=l("./node_modules/react/index.js"),e=l.n(R),re=l("./frontend/src/scenes/plugins/edit/PluginDrawer.tsx"),be=l("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Ie=l.n(be),Re=l("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ve=l.n(Re),hn=l("./node_modules/core-js/modules/es.array.filter.js"),En=l("./node_modules/core-js/modules/es.object.to-string.js"),en=l("./node_modules/core-js/modules/es.array.includes.js"),bn=l("./node_modules/core-js/modules/es.string.includes.js"),p=l("./node_modules/core-js/modules/es.array.concat.js"),M=l("./node_modules/core-js/modules/es.array.map.js"),P=l("./node_modules/core-js/modules/es.function.name.js"),O=l("./node_modules/core-js/modules/es.symbol.js"),U=l("./node_modules/core-js/modules/es.symbol.description.js"),y=l("./node_modules/antd/es/row/index.js"),v=l("./node_modules/antd/es/col/index.js"),m=l("./node_modules/kea/lib/index.esm.js"),c=l("./frontend/src/scenes/plugins/pluginsLogic.ts"),de=l("./node_modules/core-js/modules/es.string.starts-with.js"),Z=l("./node_modules/antd/es/space/index.js"),ie=l("./node_modules/antd/es/card/index.js"),V=l("./node_modules/antd/es/tag/index.js"),ce=l("./node_modules/antd/es/popconfirm/index.js"),Ne=l("./node_modules/antd/es/switch/index.js"),j=l("./node_modules/antd/es/button/index.js"),Ue=l("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Oe=l("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),nn=l("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),tn=l("./node_modules/@ant-design/icons/es/icons/WarningOutlined.js"),q=l("./node_modules/@ant-design/icons/es/icons/LoadingOutlined.js"),ge=l("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),an=l("./node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js"),Be=l("./node_modules/@ant-design/icons/es/icons/UnorderedListOutlined.js"),Ce=l("./node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),D=l("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ln={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},rn=ln,me=l("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),_=function(a,t){return R.createElement(me.a,Object(D.a)(Object(D.a)({},a),{},{ref:t,icon:rn}))};_.displayName="CloudDownloadOutlined";var Y=R.forwardRef(_),De=l("./frontend/src/scenes/plugins/plugin/PluginImage.tsx"),on=l("./node_modules/antd/es/popover/index.js"),Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},F=Fe,G=function(a,t){return R.createElement(me.a,Object(D.a)(Object(D.a)({},a),{},{ref:t,icon:F}))};G.displayName="ClearOutlined";var Dn=R.forwardRef(G),we=l("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),On=l("./frontend/src/lib/dayjs.ts");function Pe(n){var a=n.error,t=n.reset;return a?e.a.createElement(on.a,{title:e.a.createElement("div",{style:{textAlign:"center"}},Object(On.a)(a.time).format("YYYY-MM-DD - HH:mm:ss")),content:e.a.createElement(e.a.Fragment,null,t?e.a.createElement(j.a,{size:"small",onClick:t,style:{float:"right",marginLeft:10}},e.a.createElement(Dn,null)," Delete"):null,e.a.createElement("div",null,a.name?e.a.createElement("strong",null,a.name,": "):"",a.message),a.stack?e.a.createElement(we.a,{wrap:!0,style:{fontSize:10},language:we.b.JavaScript},a.stack):null,a.event?e.a.createElement(we.a,{wrap:!0,style:{fontSize:10},language:we.b.JSON},JSON.stringify(a.event,null,2)):null),trigger:"click",placement:"top"},e.a.createElement(V.a,{color:"red",style:{cursor:"pointer"}},"ERROR")):null}try{Pe.displayName="PluginError",Pe.__docgenInfo={description:"",displayName:"PluginError",props:{error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"PluginErrorType"}},reset:{defaultValue:null,description:"",name:"reset",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"]={docgenInfo:Pe.__docgenInfo,name:"PluginError",path:"frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"})}catch(n){}var Fn=l("./frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx"),w=l("./frontend/src/scenes/plugins/types.ts"),wn=l("./frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx"),ee=l("./frontend/src/lib/components/Tooltip.tsx");function ze(n){var a=n.isCommunity;return e.a.createElement(ee.a,{title:a?"This app was built by a community memeber, not the PostHog team.":"This app was built by the PostHog team."},e.a.createElement(V.a,{color:a?"cyan":"geekblue"},a?"Community":"Official"))}try{ze.displayName="CommunityPluginTag",ze.__docgenInfo={description:"",displayName:"CommunityPluginTag",props:{isCommunity:{defaultValue:null,description:"",name:"isCommunity",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"]={docgenInfo:ze.__docgenInfo,name:"CommunityPluginTag",path:"frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"})}catch(n){}var jt=l("./node_modules/core-js/modules/es.regexp.exec.js"),St=l("./node_modules/core-js/modules/es.string.match.js");function Cn(n){var a=n.tag;return a.match(/^[a-f0-9]{40}$/)?e.a.createElement("code",null,a.substring(0,7)):e.a.createElement("code",null,a)}function He(n){var a=n.url,t=n.tag,r=n.latestTag,i="";return a.match(/^https:\/\/(www.|)github.com\//)&&(i="".concat(a,"/compare/").concat(t,"...").concat(r)),a.match(/^https:\/\/(www.|)gitlab.com\//)&&(i="".concat(a,"/-/compare/").concat(t,"...").concat(r)),e.a.createElement(ee.a,{title:e.a.createElement("div",null,"Installed: ",e.a.createElement(Cn,{tag:t}),e.a.createElement("br",null),"Latest: ",e.a.createElement(Cn,{tag:r}),i?e.a.createElement("div",{style:{marginTop:10}},"Click to see the diff"):null)},i?e.a.createElement("a",{href:i,target:"_blank",rel:"noreferrer noopener"},e.a.createElement(V.a,{color:"volcano",style:{cursor:"pointer"}},e.a.createElement(Y,null)," Update available!")):e.a.createElement(V.a,{color:"volcano"},e.a.createElement(Y,null)," Update available!"))}try{He.displayName="UpdateAvailable",He.__docgenInfo={description:"",displayName:"UpdateAvailable",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},tag:{defaultValue:null,description:"",name:"tag",required:!0,type:{name:"string"}},latestTag:{defaultValue:null,description:"",name:"latestTag",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"]={docgenInfo:He.__docgenInfo,name:"UpdateAvailable",path:"frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"})}catch(n){}var je=l("./frontend/src/scenes/userLogic.ts"),Pn=l("./frontend/src/lib/utils.tsx"),ne=l("./frontend/src/scenes/plugins/access.ts"),zn=l("./frontend/src/lib/components/LinkButton.tsx"),Me=function(a){var t=a.updateStatus,r=a.pluginId,i=a.rearranging,u=Object(m.useActions)(c.b),d=u.editPlugin,g=u.updatePlugin,s=Object(m.useValues)(c.b),o=s.pluginsUpdating;return e.a.createElement(j.a,{type:t!=null&&t.updated?"default":"primary",className:"padding-under-500",onClick:function(){return t!=null&&t.updated?d(r):g(r)},loading:o.includes(r),icon:t!=null&&t.updated?e.a.createElement(ge.a,null):e.a.createElement(Y,null),disabled:i,"data-attr":"plugin-update"},e.a.createElement("span",{className:"show-over-500"},t!=null&&t.updated?"Updated":"Update"))};try{Me.displayName="PluginUpdateButton",Me.__docgenInfo={description:"",displayName:"PluginUpdateButton",props:{updateStatus:{defaultValue:null,description:"",name:"updateStatus",required:!0,type:{name:"PluginUpdateStatusType | undefined"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"]={docgenInfo:Me.__docgenInfo,name:"PluginUpdateButton",path:"frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"})}catch(n){}function Ye(n){var a=n.url,t=n.disabled,r=t===void 0?!1:t;return e.a.createElement(Z.b,null,e.a.createElement(ee.a,{title:"About"},e.a.createElement(zn.a,{to:a,target:"_blank",rel:"noopener noreferrer",disabled:r},e.a.createElement(Ue.a,null))))}function pe(n){var a,t=n.plugin,r=n.error,i=n.maintainer,u=n.showUpdateButton,d=n.order,g=n.maxOrder,s=n.rearranging,o=n.DragColumn,f=o===void 0?function(ae){var yn=ae.children;return e.a.createElement(v.a,{className:"order-handle"},yn)}:o,A=n.unorderedPlugin,S=A===void 0?!1:A,z=t.name,W=t.description,C=t.url,$=t.plugin_type,h=t.pluginConfig,ye=t.tag,X=t.latest_tag,J=t.id,oe=t.updateStatus,gn=t.hasMoved,We=t.is_global,I=t.organization_id,x=t.organization_name,H=Object(m.useActions)(c.b),he=H.editPlugin,$e=H.toggleEnabled,mn=H.installPlugin,pn=H.resetPluginConfigError,Je=H.rearrange,Ee=H.showPluginLogs,Qe=H.showPluginHistory,se=Object(m.useValues)(c.b),Xe=se.loading,Ze=se.installingPluginUrl,qe=se.checkingForUpdates,_e=se.pluginUrlToMaintainer,fn=Object(m.useValues)(je.a),Te=fn.user,Le=i||t.url&&_e[t.url],vn=i||_e[t.url||""];return e.a.createElement(v.a,{style:{width:"100%",marginBottom:20},className:"plugins-scene-plugin-card-col".concat(s?" rearranging":""),"data-attr":"plugin-card-".concat(h?"installed":"available")},e.a.createElement(ie.a,{className:"plugins-scene-plugin-card"},e.a.createElement(y.a,{align:"middle",className:"plugin-card-row"},typeof d=="number"&&typeof g=="number"?e.a.createElement(f,null,e.a.createElement("div",{className:"arrow".concat(d===1?" hide":"")},e.a.createElement(Oe.a,null)),e.a.createElement("div",null,e.a.createElement(V.a,{color:gn?"#bd0225":"#555",onClick:Je},d)),e.a.createElement("div",{className:"arrow".concat(d===g?" hide":"")},e.a.createElement(Oe.a,null))):null,S?e.a.createElement(ee.a,{title:"This app does not do any processing in order.",placement:"topRight"},e.a.createElement(v.a,null,e.a.createElement(V.a,{color:"#555"},"-"))):null,h&&e.a.createElement(v.a,null,e.a.createElement(ce.a,{placement:"topLeft",title:"Are you sure you wish to ".concat(h.enabled?"disable":"enable"," this plugin?"),onConfirm:function(){return h.id?$e({id:h.id,enabled:!h.enabled}):he(J||null,{__enabled:!0})},okText:"Yes",cancelText:"No",disabled:s},e.a.createElement(Ne.a,{checked:(a=h.enabled)!==null&&a!==void 0?a:!1,disabled:s}))),e.a.createElement(v.a,{className:h?"hide-plugin-image-below-500":""},e.a.createElement(De.a,{pluginType:$,url:C})),e.a.createElement(v.a,{style:{flex:1}},e.a.createElement("div",null,e.a.createElement("strong",{style:{marginRight:8}},z),Le&&e.a.createElement(ze,{isCommunity:vn==="community"}),h!=null&&h.error?e.a.createElement(Pe,{error:h.error,reset:function(){return pn((h==null?void 0:h.id)||0)}}):r?e.a.createElement(Pe,{error:r}):null,We&&e.a.createElement(V.a,{color:"blue"},e.a.createElement(nn.a,null)," Managed by ",x),Object(ne.c)(Te==null?void 0:Te.organization,I)&&e.a.createElement(e.a.Fragment,null,C!=null&&C.startsWith("file:")?e.a.createElement(Fn.a,{url:C,title:"Local"}):null,oe!=null&&oe.error?e.a.createElement(V.a,{color:"red"},e.a.createElement(tn.a,null)," Error checking for updates"):qe&&!oe&&$!==w.a.Source&&!(C!=null&&C.startsWith("file:"))?e.a.createElement(V.a,{color:"blue"},e.a.createElement(q.a,null)," Checking for updates\u2026"):C&&X&&ye?ye===X?e.a.createElement(V.a,{color:"green"},e.a.createElement(ge.a,null)," Up to date"):e.a.createElement(He,{url:C,tag:ye,latestTag:X}):null,$===w.a.Source?e.a.createElement(wn.a,null):null)),e.a.createElement("div",null,Object(Pn.A)(W))),e.a.createElement(v.a,null,e.a.createElement(Z.b,null,C&&e.a.createElement(Ye,{url:C,disabled:s}),u&&J?e.a.createElement(Me,{updateStatus:oe,pluginId:J,rearranging:s}):J?e.a.createElement(e.a.Fragment,null,e.a.createElement(ee.a,{title:"Activity history"},e.a.createElement(j.a,{className:"padding-under-500",disabled:s,onClick:function(){return Qe(J)},"data-attr":"plugin-history"},e.a.createElement(an.a,null))),e.a.createElement(ee.a,{title:h!=null&&h.id?"Logs":"Logs \u2013 enable the app for the first time to view them"},e.a.createElement(j.a,{className:"padding-under-500",disabled:s||!(h!=null&&h.id),onClick:function(){return Ee(J)},"data-attr":"plugin-logs"},e.a.createElement(Be.a,null))),e.a.createElement(ee.a,{title:"Configure"},e.a.createElement(j.a,{type:"primary",className:"padding-under-500",disabled:s,onClick:function(){return he(J)},"data-attr":"plugin-configure"},e.a.createElement(Ce.a,null)))):J?null:e.a.createElement(j.a,{type:"primary",className:"padding-under-500",loading:Xe&&Ze===C,disabled:Xe&&Ze!==C,onClick:C?function(){return mn(C,w.a.Repository)}:void 0,icon:e.a.createElement(Y,null),"data-attr":"plugin-install"},e.a.createElement("span",{className:"show-over-500"},"Install")))))))}try{Ye.displayName="PluginAboutButton",Ye.__docgenInfo={description:"",displayName:"PluginAboutButton",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"]={docgenInfo:Ye.__docgenInfo,name:"PluginAboutButton",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"})}catch(n){}try{pe.displayName="PluginCard",pe.__docgenInfo={description:"",displayName:"PluginCard",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"Partial<PluginTypeWithConfig>"}},pluginConfig:{defaultValue:null,description:"",name:"pluginConfig",required:!1,type:{name:"PluginConfigType"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"PluginErrorType"}},maintainer:{defaultValue:null,description:"",name:"maintainer",required:!1,type:{name:"string"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:{value:'({ children }) => <Col className="order-handle">{children}</Col>'},description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"]={docgenInfo:pe.__docgenInfo,name:"PluginCard",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"})}catch(n){}var K=l("./frontend/src/lib/components/PageHeader.tsx"),Se=l("./node_modules/antd/es/skeleton/index.js");function jn(){return e.a.createElement(e.a.Fragment,null,[1,2,3].map(function(n){return e.a.createElement(v.a,{key:n,style:{marginBottom:20,width:"100%"},className:"plugins-scene-plugin-card-col"},e.a.createElement(ie.a,{className:"plugins-scene-plugin-card"},e.a.createElement(y.a,{align:"middle",className:"plugin-card-row"},e.a.createElement(v.a,{className:"hide-plugin-image-below-500"},e.a.createElement(Se.a.Avatar,{active:!0,size:"large",shape:"square"})),e.a.createElement(v.a,{style:{flex:1}},e.a.createElement(Se.a,{title:!1,paragraph:{rows:2},active:!0})),e.a.createElement(v.a,null,e.a.createElement("span",{className:"show-over-500"},e.a.createElement(Se.a.Button,{style:{width:100}})),e.a.createElement("span",{className:"hide-over-500"},e.a.createElement(Se.a.Button,{style:{width:32}}))))))}))}var Ge=l("./node_modules/antd/es/input/index.js");function Sn(){var n=Object(m.useValues)(c.b),a=n.searchTerm,t=n.rearranging,r=Object(m.useActions)(c.b),i=r.setSearchTerm;return e.a.createElement(Ge.a.Search,{"data-attr":"plugins-search",placeholder:"Start typing to search for an app",autoFocus:!0,value:a||"",onChange:function(d){return i(d.target.value)},enterButton:!0,allowClear:!0,style:{maxWidth:400,marginTop:5,marginBottom:10},disabled:t})}var Ae=l("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),Hn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},Mn=Hn,An=function(a,t){return R.createElement(me.a,Object(D.a)(Object(D.a)({},a),{},{ref:t,icon:Mn}))};An.displayName="CaretRightOutlined";var fe=R.forwardRef(An),k;(function(n){n.Official="official",n.Community="community"})(k||(k={}));function Yn(){var n=Object(m.useValues)(c.b),a=n.repositoryLoading,t=n.filteredUninstalledPlugins,r=Object(R.useState)([k.Official,k.Community]),i=Ve()(r,2),u=i[0],d=i[1],g=t.filter(function(f){return f.maintainer==="official"}),s=t.filter(function(f){return f.maintainer==="community"}),o=function(A){if(u.includes(A)){d(u.filter(function(S){return A!==S}));return}d([].concat(Ie()(u),[A]))};return e.a.createElement("div",null,e.a.createElement(K.b,{subtitle:"App Repository"}),e.a.createElement(Sn,null),e.a.createElement("div",null,(!a||t.length>0)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(y.a,{gutter:16,style:{marginTop:16,display:"block"}},e.a.createElement("div",{className:"plugins-repository-tab-section-header",onClick:function(){return o(k.Official)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,u.includes(k.Official)?e.a.createElement(Ae.a,null):e.a.createElement(fe,null)," Official apps (".concat(g.length,")"))})),u.includes(k.Official)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(v.a,{span:24},g.length>0?"Official apps are built and maintained by the PostHog team.":"You have already installed all official apps!"),e.a.createElement("br",null),g.map(function(f){return e.a.createElement(pe,{key:f.url,plugin:{name:f.name,url:f.url,description:f.description},maintainer:f.maintainer})}))),e.a.createElement(y.a,{gutter:16,style:{marginTop:16,display:"block"}},e.a.createElement("div",{className:"plugins-repository-tab-section-header",onClick:function(){return o(k.Community)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,u.includes(k.Community)?e.a.createElement(Ae.a,null):e.a.createElement(fe,null)," Community apps (".concat(s.length,")"))})),u.includes(k.Community)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(v.a,{span:24},s.length>0?e.a.createElement("span",null,"Community apps are not built nor maintained by the PostHog team."," ",e.a.createElement("a",{href:"https://posthog.com/docs/apps/build",target:"_blank",rel:"noopener"},"Anyone, including you, can build an app.")):"You have already installed all community apps!"),e.a.createElement("br",null),s.map(function(f){return e.a.createElement(pe,{key:f.url,plugin:{name:f.name,url:f.url,description:f.description},maintainer:f.maintainer})}))))),a&&t.length===0&&e.a.createElement(y.a,{gutter:16},e.a.createElement(jn,null)))}var At=l("./node_modules/core-js/modules/es.object.values.js"),Gn=l("./node_modules/antd/es/checkbox/index.js"),Kn=l("./node_modules/antd/lib/input/Search.js"),kn=l.n(Kn),Wn=l("./frontend/src/lib/components/ResizableTable/index.tsx"),ve=l("./frontend/src/types.ts"),xn=l("./frontend/src/scenes/plugins/plugin/pluginLogsLogic.ts");function $n(n){var a;switch(n){case ve.G.Debug:a="var(--muted)";break;case ve.G.Log:a="var(--text-default)";break;case ve.G.Info:a="var(--blue)";break;case ve.G.Warn:a="var(--warning)";break;case ve.G.Error:a="var(--danger)";break;default:break}return e.a.createElement("span",{style:{color:a}},n)}var Jn=[{title:"Timestamp",key:"timestamp",dataIndex:"timestamp",span:3,render:function(a){return Object(On.a)(a).format("YYYY-MM-DD HH:mm:ss.SSS UTC")}},{title:"Source",key:"source",dataIndex:"source",span:1},{title:"Type",key:"type",dataIndex:"type",span:1,render:$n},{title:"Message",key:"message",dataIndex:"message",span:6}];function Ke(n){var a=n.pluginConfigId,t=Object(xn.b)({pluginConfigId:a}),r=Object(m.useValues)(t),i=r.pluginLogs,u=r.pluginLogsLoading,d=r.pluginLogsBackground,g=r.isThereMoreToLoad,s=r.pluginLogsTypes,o=Object(m.useActions)(t),f=o.revealBackground,A=o.loadPluginLogsMore,S=o.setPluginLogsTypes,z=o.setSearchTerm;return e.a.createElement(Z.b,{direction:"vertical",style:{flexGrow:1},className:"ph-no-capture plugin-logs"},e.a.createElement(y.a,null,e.a.createElement(kn.a,{loading:u,onSearch:z,placeholder:"Search for messages containing\u2026",allowClear:!0})),e.a.createElement(y.a,null,e.a.createElement(Z.b,null,e.a.createElement("span",null,"Show logs of type:\xA0"),e.a.createElement(Gn.a.Group,{options:Object.values(ve.G),value:s,onChange:S,style:{marginLeft:"8px"}}))),e.a.createElement(y.a,null,e.a.createElement(j.a,{onClick:f,loading:u,style:{flexGrow:1},disabled:!d.length,icon:e.a.createElement(q.a,null)},d.length?"Load ".concat(Object(Pn.rb)(d.length,"newer entry","newer entries")):"No new entries")),e.a.createElement(Wn.b,{dataSource:i,columns:Jn,loading:u,size:"small",className:"ph-no-capture",rowKey:"id",style:{flexGrow:1,whiteSpace:"pre-wrap",overflowWrap:"anywhere"},pagination:{pageSize:200,hideOnSinglePage:!0}}),!!i.length&&e.a.createElement(y.a,null,e.a.createElement(j.a,{onClick:A,loading:u,style:{flexGrow:1},disabled:!g},g?"Load up to ".concat(xn.a," older entries"):"No older entries")))}try{Ke.displayName="PluginLogs",Ke.__docgenInfo={description:"",displayName:"PluginLogs",props:{pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"]={docgenInfo:Ke.__docgenInfo,name:"PluginLogs",path:"frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"})}catch(n){}var Tn=l("./node_modules/antd/es/drawer/index.js");function Qn(){var n=Object(m.useValues)(c.b),a=n.showingLogsPlugin,t=n.lastShownLogsPlugin,r=Object(m.useActions)(c.b),i=r.hidePluginLogs;return e.a.createElement(Tn.a,{visible:!!a,onClose:i,width:"min(90vw, 80rem)",title:"Viewing App Logs: ".concat(t==null?void 0:t.name),placement:"left",destroyOnClose:!0},!!(t!=null&&t.pluginConfig.id)&&e.a.createElement(Ke,{pluginConfigId:t.pluginConfig.id}))}var Xn=l("./node_modules/antd/es/empty/index.js");function Zn(){var n=Object(m.useActions)(c.b),a=n.setPluginTab,t=Object(m.useValues)(c.b),r=t.loading,i=Object(m.useValues)(je.a),u=i.user;return e.a.createElement(e.a.Fragment,null,r?e.a.createElement(e.a.Fragment,null,e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null," ",e.a.createElement(fe,null)," ","Enabled apps"," "),buttons:e.a.createElement(Se.a.Button,{style:{width:150}})}),e.a.createElement(jn,null)):e.a.createElement(e.a.Fragment,null,e.a.createElement(K.b,{subtitle:"Installed apps"}),e.a.createElement(y.a,{gutter:16,style:{marginTop:16}},e.a.createElement(v.a,{span:24},e.a.createElement(Xn.a,{description:e.a.createElement("span",null,"You haven't installed any apps yet")},Object(ne.b)(u==null?void 0:u.organization)&&e.a.createElement(j.a,{type:"default",onClick:function(){return a(w.c.Repository)}},"Open the App Repository"))))))}function te(n){var a=n.plugin,t=n.showUpdateButton,r=n.order,i=n.maxOrder,u=n.rearranging,d=n.DragColumn,g=n.unorderedPlugin,s=g===void 0?!1:g;return e.a.createElement(pe,{key:a.id,plugin:a,showUpdateButton:t,order:r,maxOrder:i,rearranging:u,DragColumn:d,unorderedPlugin:s})}try{te.displayName="InstalledPlugin",te.__docgenInfo={description:"",displayName:"InstalledPlugin",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"PluginTypeWithConfig"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:null,description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"]={docgenInfo:te.__docgenInfo,name:"InstalledPlugin",path:"frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"})}catch(n){}function qn(){var n=Object(m.useValues)(c.b),a=n.filteredDisabledPlugins,t=n.sectionsOpen,r=n.disabledPlugins,i=Object(m.useActions)(c.b),u=i.toggleSectionOpen;return r.length===0?e.a.createElement(e.a.Fragment,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return u(c.a.Disabled)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,t.includes(c.a.Disabled)?e.a.createElement(Ae.a,null):e.a.createElement(fe,null)," Installed apps (".concat(a.length,")"))})),t.includes(c.a.Disabled)?e.a.createElement(e.a.Fragment,null,a.length>0?e.a.createElement(y.a,{gutter:16,style:{marginTop:16}},a.map(function(d){return e.a.createElement(te,{key:d.id,plugin:d})})):e.a.createElement("p",{style:{margin:10}},"No apps match your search.")):null)}var xt=l("./node_modules/core-js/modules/es.object.keys.js"),_n=l("./node_modules/@ant-design/icons/es/icons/SyncOutlined.js");function et(){var n=Object(m.useActions)(c.b),a=n.checkForUpdates,t=n.toggleSectionOpen,r=Object(m.useValues)(c.b),i=r.sectionsOpen,u=Object(m.useValues)(je.a),d=u.user,g=Object(m.useValues)(c.b),s=g.filteredPluginsNeedingUpdates,o=g.pluginsNeedingUpdates,f=g.checkingForUpdates,A=g.installedPluginUrls,S=g.updateStatus,z=g.rearranging,W=g.hasUpdatablePlugins,C=Object(ne.c)(d==null?void 0:d.organization)&&W&&e.a.createElement(j.a,{type:"default",icon:o.length>0?e.a.createElement(_n.a,null):e.a.createElement(Y,null),onClick:function(h){h.stopPropagation(),a(!0)},loading:f},f?"Checking app ".concat(Object.keys(S).length+1," out of ").concat(Object.keys(A).length):o.length>0?"Check again for updates":"Check for updates");return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return t(c.a.Upgrade)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,i.includes(c.a.Upgrade)?e.a.createElement(Ae.a,null):e.a.createElement(fe,null)," Apps to update (".concat(s.length,")")),buttons:!z&&C})),i.includes(c.a.Upgrade)?e.a.createElement(e.a.Fragment,null,o.length>0?e.a.createElement(y.a,{gutter:16,style:{marginTop:16}},s.length>0?e.a.createElement(e.a.Fragment,null,s.map(function($){return e.a.createElement(te,{key:$.id,plugin:$,showUpdateButton:!0})})):e.a.createElement("p",{style:{margin:10}},"No apps match your search.")):e.a.createElement("p",{style:{margin:10}},"All your apps are up to date. Great work!")):null)}var Tt=l("./node_modules/core-js/modules/es.array.slice.js"),Lt=l("./node_modules/core-js/modules/es.array.from.js"),It=l("./node_modules/core-js/modules/es.string.iterator.js"),Rt=l("./node_modules/core-js/modules/es.symbol.iterator.js"),Vt=l("./node_modules/core-js/modules/es.array.iterator.js"),Nt=l("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ut=l("./node_modules/core-js/modules/es.array.splice.js"),nt=l("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),tt=l("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),at=l("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),sn=l("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js");function lt(n,a){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=rt(n))||a&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,d=!1,g;return{s:function(){t=t.call(n)},n:function(){var o=t.next();return u=o.done,o},e:function(o){d=!0,g=o},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(d)throw g}}}}function rt(n,a){if(!!n){if(typeof n=="string")return Ln(n,a);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ln(n,a)}}function Ln(n,a){(a==null||a>n.length)&&(a=n.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=n[t];return r}var it=Object(sn.c)(function(n){var a=n.children;return e.a.createElement(v.a,{className:"order-handle"},a)}),ot=Object(sn.b)(function(n){var a=n.plugin,t=n.order,r=n.maxOrder,i=n.rearranging;return e.a.createElement(te,{plugin:a,order:t,maxOrder:r,rearranging:i,DragColumn:it})}),st=Object(sn.a)(function(n){var a=n.children;return e.a.createElement(y.a,{gutter:16,style:{marginTop:16}},a)});function ut(){var n=Object(m.useValues)(je.a),a=n.user,t=Object(m.useActions)(c.b),r=t.rearrange,i=t.setTemporaryOrder,u=t.cancelRearranging,d=t.savePluginOrders,g=t.makePluginOrderSaveable,s=t.toggleSectionOpen,o=Object(m.useValues)(c.b),f=o.enabledPlugins,A=o.filteredEnabledPlugins,S=o.sortableEnabledPlugins,z=o.unsortableEnabledPlugins,W=o.rearranging,C=o.loading,$=o.temporaryOrder,h=o.pluginOrderSaveable,ye=o.searchTerm,X=o.sectionsOpen,J=Object(ne.a)(a==null?void 0:a.organization)&&S.length>1,oe=W?e.a.createElement(e.a.Fragment,null,e.a.createElement(j.a,{type:"primary",icon:e.a.createElement(nt.a,null),loading:C,onClick:function(x){x.stopPropagation(),d($)},disabled:!h},"Save order"),e.a.createElement(j.a,{type:"default",icon:e.a.createElement(tt.a,null),onClick:function(x){u(),x.stopPropagation()}},"Cancel")):e.a.createElement(ee.a,{title:f.length<=1?"At least two apps need to be enabled for reordering.":e.a.createElement(e.a.Fragment,null,ye?"Editing the order of apps is disabled when searching.":e.a.createElement(e.a.Fragment,null,"Order matters because event processing with apps works like a pipe: the event is processed by every enabled app ",e.a.createElement("b",null,"in sequence"),".")),placement:"top"},e.a.createElement(j.a,{icon:e.a.createElement(at.a,null),onClick:function(x){x.stopPropagation(),r()},disabled:!!ye||S.length<=1},"Edit order")),gn=function(x){var H,he=x.oldIndex,$e=x.newIndex;if(he!==$e){var mn=function(_e,fn,Te){var Le=Ie()(_e);return Array.prototype.splice.call(Le,Te,0,Array.prototype.splice.call(Le,fn,1)[0]),Le.map(function(vn,ae){var yn=vn.id;return{id:yn,order:ae+1}})},pn=(H=f[he])===null||H===void 0?void 0:H.id,Je={},Ee=lt(mn(f,he,$e)),Qe;try{for(Ee.s();!(Qe=Ee.n()).done;){var se=Qe.value,Xe=se.id,Ze=se.order;Je[Xe]=Ze}}catch(qe){Ee.e(qe)}finally{Ee.f()}W||r(),i(Je,pn)}},We=function(){return e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return s(c.a.Enabled)}},e.a.createElement(K.b,{subtitle:e.a.createElement(e.a.Fragment,null,X.includes(c.a.Enabled)?e.a.createElement(Ae.a,null):e.a.createElement(fe,null)," Enabled apps (".concat(A.length,")"),W&&X.includes(c.a.Enabled)&&e.a.createElement(V.a,{color:"red",style:{fontWeight:"normal",marginLeft:10}},"Reordering in progress")),buttons:e.a.createElement(Z.b,null,X.includes(c.a.Enabled)&&oe)}))};return f.length===0?e.a.createElement(e.a.Fragment,null,e.a.createElement(We,null),X.includes(c.a.Enabled)&&e.a.createElement("p",{style:{margin:10}},"No apps enabled.")):e.a.createElement(e.a.Fragment,null,e.a.createElement(We,null),X.includes(c.a.Enabled)&&e.a.createElement(e.a.Fragment,null,S.length===0&&z.length===0&&e.a.createElement("p",{style:{margin:10}},"No apps match your search."),J||W?e.a.createElement(e.a.Fragment,null,S.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement(st,{useDragHandle:!0,onSortEnd:gn,onSortOver:g},S.map(function(I,x){return e.a.createElement(ot,{key:I.id,plugin:I,index:x,order:x+1,maxOrder:f.length,rearranging:W})})))):e.a.createElement(y.a,{gutter:16,style:{marginTop:16}},S.length>0&&e.a.createElement(e.a.Fragment,null,S.map(function(I,x){return e.a.createElement(te,{key:I.id,plugin:I,order:x+1,maxOrder:A.length})}))),z.map(function(I){return e.a.createElement(te,{key:I.id,plugin:I,maxOrder:f.length,rearranging:W,unorderedPlugin:!0})})))}var In=l("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),ke=l("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),Rn=l("./frontend/src/lib/components/ActivityLog/SentenceList.tsx"),un=l("./frontend/src/scenes/plugins/utils.ts");function Vn(n,a){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=dt(n))||a&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,d=!1,g;return{s:function(){t=t.call(n)},n:function(){var o=t.next();return u=o.done,o},e:function(o){d=!0,g=o},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(d)throw g}}}}function dt(n,a){if(!!n){if(typeof n=="string")return Nn(n,a);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Nn(n,a)}}function Nn(n,a){(a==null||a>n.length)&&(a=n.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=n[t];return r}function xe(n){if(n.scope!==ke.a.PLUGIN&&n.scope!==ke.a.PLUGIN_CONFIG)return console.error("plugin describer received a non-plugin activity"),null;if(n.activity=="installed")return e.a.createElement(e.a.Fragment,null,"installed the app: ",e.a.createElement("b",null,n.detail.name));if(n.activity=="uninstalled")return e.a.createElement(e.a.Fragment,null,"uninstalled the app: ",e.a.createElement("b",null,n.detail.name));if(n.activity=="enabled"){var a=[],t=Vn(n.detail.changes||[]),r;try{for(t.s();!(r=t.n()).done;){var i=r.value,u=i.after===un.a?"<secret_value>":i.after;a.push(e.a.createElement(e.a.Fragment,null,"field ",e.a.createElement("code",null,i.field)," set to ",e.a.createElement("code",null,u)))}}catch(z){t.e(z)}finally{t.f()}return e.a.createElement(Rn.a,{listParts:a,prefix:e.a.createElement(e.a.Fragment,null,"enabled the app: ",e.a.createElement("b",null,n.detail.name)," with config ID ",n.item_id,a.length>0?", with":".")})}if(n.activity=="disabled")return e.a.createElement(e.a.Fragment,null,"disabled the app: ",e.a.createElement("b",null,n.detail.name)," with config ID ",n.item_id,".");if(n.activity=="config_updated"){var d=[],g=Vn(n.detail.changes||[]),s;try{for(g.s();!(s=g.n()).done;){var o=s.value,f="",A=o.before===un.a?"<secret_value>":o.before,S=o.after===un.a?"<secret_value>":o.after;o.action==="created"?f=e.a.createElement(e.a.Fragment,null,"added new field ",e.a.createElement("code",null,o.field),'" with value ',e.a.createElement("code",null,S)):o.action==="deleted"?f=e.a.createElement(e.a.Fragment,null,"removed field ",e.a.createElement("code",null,o.field),", which had value ",e.a.createElement("code",null,A)):o.action==="changed"&&(f=e.a.createElement(e.a.Fragment,null,"updated field ",e.a.createElement("code",null,o.field)," from value ",e.a.createElement("code",null,A)," to value"," ",e.a.createElement("code",null,S)," ")),d.push(f)}}catch(z){g.e(z)}finally{g.f()}return e.a.createElement(Rn.a,{listParts:d,suffix:e.a.createElement(e.a.Fragment,null,"on app ",e.a.createElement("b",null,n.detail.name)," with config ID ",n.item_id,".")})}return null}try{xe.displayName="pluginActivityDescriber",xe.__docgenInfo={description:"",displayName:"pluginActivityDescriber",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"ActivityUser"}},activity:{defaultValue:null,description:"",name:"activity",required:!0,type:{name:"string"}},created_at:{defaultValue:null,description:"",name:"created_at",required:!0,type:{name:"string"}},scope:{defaultValue:null,description:"",name:"scope",required:!0,type:{name:"enum",value:[{value:'"FeatureFlag"'},{value:'"Person"'},{value:'"Insight"'},{value:'"Plugin"'},{value:'"PluginConfig"'}]}},item_id:{defaultValue:null,description:"",name:"item_id",required:!1,type:{name:"string"}},detail:{defaultValue:null,description:"",name:"detail",required:!0,type:{name:"ActivityLogDetail"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/pluginActivityDescriptions.tsx#pluginActivityDescriber"]={docgenInfo:xe.__docgenInfo,name:"pluginActivityDescriber",path:"frontend/src/scenes/plugins/pluginActivityDescriptions.tsx#pluginActivityDescriber"})}catch(n){}function ct(){var n=Object(m.useValues)(c.b),a=n.showingHistoryPlugin,t=Object(m.useActions)(c.b),r=t.hidePluginHistory;return e.a.createElement(Tn.a,{visible:!!a,onClose:r,width:"min(90vw, 80rem)",title:"Activity History",placement:"left",destroyOnClose:!0},e.a.createElement(In.a,{scope:ke.a.PLUGIN,id:a==null?void 0:a.pluginConfig.id,describer:xe}))}function gt(){var n=Object(m.useValues)(c.b),a=n.installedPlugins;return a.length===0?e.a.createElement(Zn,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("div",null,e.a.createElement(Sn,null),e.a.createElement(et,null),e.a.createElement(ut,null),e.a.createElement(qn,null)),e.a.createElement(Qn,null),e.a.createElement(ct,null))}var Un=l("./node_modules/antd/es/tabs/index.js"),mt=l("./node_modules/antd/es/alert/index.js"),pt=l("./node_modules/antd/lib/typography/Title.js"),dn=l.n(pt),ft=l("./node_modules/antd/lib/typography/Paragraph.js"),cn=l.n(ft);function vt(){var n=Object(m.useValues)(c.b),a=n.sourcePluginName,t=n.pluginError,r=n.loading,i=Object(m.useActions)(c.b),u=i.setSourcePluginName,d=i.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(ie.a,null,e.a.createElement(dn.a,{level:5},"App Editor"),e.a.createElement(cn.a,null,"Write your app directly in PostHog."," ",e.a.createElement("a",{href:"https://posthog.com/docs/apps",target:"_blank"},"Read the documentation for more information!")),e.a.createElement(y.a,{style:{width:"100%"},gutter:16},e.a.createElement(v.a,{style:{flex:1}},e.a.createElement(Ge.a,{value:a,disabled:r,onChange:function(s){return u(s.target.value)},placeholder:'For example: "Hourly Weather Sync App"'})),e.a.createElement(v.a,null,e.a.createElement(j.a,{disabled:r||!a,loading:r,type:"default",onClick:function(){return d(a,w.a.Source)}},"Start Coding"))),t?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},t):null))}function yt(){var n=Object(m.useValues)(c.b),a=n.customPluginUrl,t=n.pluginError,r=n.loading,i=Object(m.useActions)(c.b),u=i.setCustomPluginUrl,d=i.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(ie.a,null,e.a.createElement(dn.a,{level:5},"Install from GitHub, GitLab or npm"),e.a.createElement(cn.a,null,"To install a third-party or custom app, paste its URL below. For"," ",e.a.createElement("a",{href:"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token",target:"_blank",rel:"noopener noreferrer"},"GitHub"),", ",e.a.createElement("a",{href:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",target:"_blank",rel:"noopener noreferrer"},"GitLab")," and ",e.a.createElement("a",{href:"https://docs.npmjs.com/creating-and-viewing-access-tokens",target:"_blank",rel:"noopener noreferrer"},"npm")," ","private repositories, append ",e.a.createElement("code",null,"?private_token=TOKEN")," to the end of the URL.",e.a.createElement("br",null),e.a.createElement("b",{className:"text-warning"},"Warning: Only install apps from trusted sources.")),e.a.createElement(y.a,{style:{width:"100%"},gutter:16},e.a.createElement(v.a,{style:{flex:1}},e.a.createElement(Ge.a,{value:a,disabled:r,onChange:function(s){return u(s.target.value)},placeholder:"https://github.com/user/repo"})),e.a.createElement(v.a,null,e.a.createElement(j.a,{disabled:r||!a,loading:r,type:"default",onClick:function(){return d(a,w.a.Custom)}},"Fetch and install"))),t?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},t):null))}function ht(){var n=Object(m.useValues)(c.b),a=n.localPluginUrl,t=n.pluginError,r=n.loading,i=Object(m.useActions)(c.b),u=i.setLocalPluginUrl,d=i.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(ie.a,null,e.a.createElement(dn.a,{level:5},"Install Local App"),e.a.createElement(cn.a,null,"To install a local app from this computer/server, give its full path below."),e.a.createElement(y.a,{style:{width:"100%"},gutter:16},e.a.createElement(v.a,{style:{flex:1}},e.a.createElement(Ge.a,{value:a,disabled:r,onChange:function(s){return u(s.target.value)},placeholder:"/var/posthog/plugins/helloworldplugin"})),e.a.createElement(v.a,null,e.a.createElement(j.a,{disabled:r||!a,loading:r,type:"default",onClick:function(){return d(a,w.a.Local)}},"Install"))),t?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},t):null))}var Et=l("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx");function bt(){var n=Object(m.useValues)(Et.a),a=n.preflight,t=Object(m.useActions)(c.b),r=t.setPluginTab;return e.a.createElement(e.a.Fragment,null,e.a.createElement(mt.a,{message:"Advanced Features Ahead",description:e.a.createElement(e.a.Fragment,null,"Create and install your ",e.a.createElement("b",null,"own apps")," or apps from ",e.a.createElement("b",null,"third-parties"),". If you're looking for officially supported apps, try the"," ",e.a.createElement("a",{href:"#",onClick:function(u){u.preventDefault(),r(w.c.Repository)}},"App Repository"),"."),type:"warning",showIcon:!0}),e.a.createElement(K.b,{subtitle:"Advanced Options"}),e.a.createElement(vt,null),e.a.createElement(yt,null),a&&!a.cloud&&e.a.createElement(ht,null))}var Ot=l("./frontend/@posthog/lemon-ui/src/index.ts"),Ct={component:Bn,logic:c.b},Pt=function(){return e.a.createElement(Ot.LemonTag,{type:"warning",style:{verticalAlign:"0.125em",marginLeft:6}},"BETA")};function Bn(){var n=Object(m.useValues)(je.a),a=n.user,t=Object(m.useValues)(c.b),r=t.pluginTab,i=Object(m.useActions)(c.b),u=i.setPluginTab,d=Un.a.TabPane;return Object(R.useEffect)(function(){Object(ne.d)(a==null?void 0:a.organization)||(window.location.href="/")},[a]),!a||!Object(ne.d)(a==null?void 0:a.organization)?null:e.a.createElement("div",{className:"plugins-scene"},e.a.createElement(K.a,{title:"Apps",caption:e.a.createElement(e.a.Fragment,null,"Apps enable you to extend PostHog's core data processing functionality.",e.a.createElement("br",null),"Make use of verified apps from the"," ",e.a.createElement("a",{href:"https://posthog.com/apps",target:"_blank"},"App Library")," ","\u2013 or"," ",e.a.createElement("a",{href:"https://posthog.com/docs/apps/build",target:"_blank"},"build your own"),".")}),e.a.createElement(Un.a,{activeKey:r,onChange:function(s){return u(s)}},e.a.createElement(d,{tab:"Installed",key:w.c.Installed},e.a.createElement(gt,null)),Object(ne.b)(a.organization)?e.a.createElement(d,{tab:"Repository",key:w.c.Repository},e.a.createElement(Yn,null)):null,e.a.createElement(d,{tab:e.a.createElement(e.a.Fragment,null,"History ",e.a.createElement(Pt,null)," "),key:w.c.History},e.a.createElement(In.a,{scope:ke.a.PLUGIN,describer:xe})),Object(ne.c)(a.organization)?e.a.createElement(d,{tab:"Advanced",key:w.c.Advanced},e.a.createElement(bt,null)):null),e.a.createElement(re.a,null))}},"./node_modules/@ant-design/icons-svg/lib/asn/SearchOutlined.js":function(Q,E,l){"use strict";Object.defineProperty(E,"__esModule",{value:!0});var b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};E.default=b},"./node_modules/@ant-design/icons/SearchOutlined.js":function(Q,E,l){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;var b=B(l("./node_modules/@ant-design/icons/lib/icons/SearchOutlined.js"));function B(T){return T&&T.__esModule?T:{default:T}}var N=b;E.default=N,Q.exports=N},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(Q,E,l){"use strict";var b=l("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),B=l("./node_modules/react/index.js"),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},T=N,L=l("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),le=function(e,re){return B.createElement(L.a,Object(b.a)(Object(b.a)({},e),{},{ref:re,icon:T}))};le.displayName="OrderedListOutlined";var ue=E.a=B.forwardRef(le)},"./node_modules/@ant-design/icons/lib/icons/SearchOutlined.js":function(Q,E,l){"use strict";var b=l("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),B=l("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;var N=B(l("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/objectSpread2.js")),T=b(l("./node_modules/react/index.js")),L=B(l("./node_modules/@ant-design/icons-svg/lib/asn/SearchOutlined.js")),le=B(l("./node_modules/@ant-design/icons/lib/components/AntdIcon.js")),ue=function(re,be){return T.createElement(le.default,(0,N.default)((0,N.default)({},re),{},{ref:be,icon:L.default}))};ue.displayName="SearchOutlined";var R=T.forwardRef(ue);E.default=R},"./node_modules/antd/lib/input/Search.js":function(Q,E,l){"use strict";var b=l("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),B=l("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;var N=b(l("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),T=b(l("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),L=hn(l("./node_modules/react/index.js")),le=b(l("./node_modules/classnames/index.js")),ue=l("./node_modules/antd/node_modules/rc-util/lib/ref.js"),R=b(l("./node_modules/@ant-design/icons/SearchOutlined.js")),e=b(l("./node_modules/antd/lib/input/Input.js")),re=b(l("./node_modules/antd/lib/button/index.js")),be=b(l("./node_modules/antd/lib/config-provider/SizeContext.js")),Ie=l("./node_modules/antd/lib/config-provider/index.js"),Re=l("./node_modules/antd/lib/_util/reactNode.js");function Ve(p){if(typeof WeakMap!="function")return null;var M=new WeakMap,P=new WeakMap;return(Ve=function(U){return U?P:M})(p)}function hn(p,M){if(!M&&p&&p.__esModule)return p;if(p===null||B(p)!=="object"&&typeof p!="function")return{default:p};var P=Ve(M);if(P&&P.has(p))return P.get(p);var O={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in p)if(y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)){var v=U?Object.getOwnPropertyDescriptor(p,y):null;v&&(v.get||v.set)?Object.defineProperty(O,y,v):O[y]=p[y]}return O.default=p,P&&P.set(p,O),O}var En=function(p,M){var P={};for(var O in p)Object.prototype.hasOwnProperty.call(p,O)&&M.indexOf(O)<0&&(P[O]=p[O]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var U=0,O=Object.getOwnPropertySymbols(p);U<O.length;U++)M.indexOf(O[U])<0&&Object.prototype.propertyIsEnumerable.call(p,O[U])&&(P[O[U]]=p[O[U]]);return P},en=L.forwardRef(function(p,M){var P,O=p.prefixCls,U=p.inputPrefixCls,y=p.className,v=p.size,m=p.suffix,c=p.enterButton,de=c===void 0?!1:c,Z=p.addonAfter,ie=p.loading,V=p.disabled,ce=p.onSearch,Ne=p.onChange,j=En(p,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange"]),Ue=L.useContext(Ie.ConfigContext),Oe=Ue.getPrefixCls,nn=Ue.direction,tn=L.useContext(be.default),q=v||tn,ge=L.useRef(null),an=function(F){F&&F.target&&F.type==="click"&&ce&&ce(F.target.value,F),Ne&&Ne(F)},Be=function(F){var G;document.activeElement===((G=ge.current)===null||G===void 0?void 0:G.input)&&F.preventDefault()},Ce=function(F){var G;ce&&ce((G=ge.current)===null||G===void 0?void 0:G.input.value,F)},D=Oe("input-search",O),ln=Oe("input",U),rn=typeof de=="boolean"?L.createElement(R.default,null):null,me="".concat(D,"-button"),_,Y=de||{},De=Y.type&&Y.type.__ANT_BUTTON===!0;De||Y.type==="button"?_=(0,Re.cloneElement)(Y,(0,T.default)({onMouseDown:Be,onClick:Ce,key:"enterButton"},De?{className:me,size:q}:{})):_=L.createElement(re.default,{className:me,type:de?"primary":void 0,size:q,disabled:V,key:"enterButton",onMouseDown:Be,onClick:Ce,loading:ie,icon:rn},de),Z&&(_=[_,(0,Re.cloneElement)(Z,{key:"addonAfter"})]);var on=(0,le.default)(D,(P={},(0,N.default)(P,"".concat(D,"-rtl"),nn==="rtl"),(0,N.default)(P,"".concat(D,"-").concat(q),!!q),(0,N.default)(P,"".concat(D,"-with-button"),!!de),P),y);return L.createElement(e.default,(0,T.default)({ref:(0,ue.composeRef)(ge,M),onPressEnter:Ce},j,{size:q,prefixCls:ln,addonAfter:_,suffix:m,onChange:an,className:on,disabled:V}))});en.displayName="Search";var bn=en;E.default=bn},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss":function(Q,E,l){var b=l("./node_modules/css-loader/dist/runtime/api.js");E=b(!1),E.push([Q.i,".plugins-scene{padding-bottom:60px}.plugins-installed-tab-section-header:hover,.plugins-repository-tab-section-header:hover{cursor:pointer}.plugins-repository-tab-section-header{margin-left:5px}.plugin-capabilities-tag{cursor:default}.plugins-scene-plugin-card>.ant-card-body{padding:15px}.plugins-scene-plugin-card .plugin-card-row>.ant-col{margin-right:14px}.plugins-scene-plugin-card .plugin-card-row>.ant-col:last-child{margin-right:0}.plugins-scene-plugin-card a.plugin-title-link{color:var(--color-text)}.plugins-scene-plugin-card a.plugin-title-link:hover{text-decoration:underline}.plugins-scene-plugin-card .plugin-image{width:60px;height:60px;display:flex;justify-content:center;align-items:center;margin-left:auto;margin-right:auto;border:none;padding:4px}.plugins-scene-plugin-card .order-handle{cursor:move;text-align:center;height:100%;margin-top:-10px;margin-bottom:-10px}.plugins-scene-plugin-card .order-handle .ant-tag{margin-right:0;cursor:move}.plugins-scene-plugin-card .order-handle .arrow{color:#888;height:19px}.plugins-scene-plugin-card .order-handle .arrow.hide{visibility:hidden}.plugins-scene-plugin-card .hide-over-500{display:none}@media(max-width:500px){.plugins-scene-plugin-card .show-over-500{display:none}.plugins-scene-plugin-card .hide-over-500{display:inline-block}.plugins-scene-plugin-card button.ant-btn.padding-under-500{padding:4px 8px}.plugins-scene-plugin-card .hide-plugin-image-below-500{display:none}}.plugins-popconfirm{z-index:var(--z-plugins-popconfirm)}.plugin-job-json-editor{border:1px solid #efefef;padding:10px}.plugin-run-job-button{color:var(--success);cursor:pointer}.plugin-run-job-button-disabled{color:#9a9a9a;cursor:default}",""]),Q.exports=E}}]);
