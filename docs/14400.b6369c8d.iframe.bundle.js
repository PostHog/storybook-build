"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[14400],{"../../frontend/src/scenes/error-tracking/components/ErrorFilters/errorFiltersLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>errorFiltersLogic});var fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),scenes_error_tracking_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/types.ts");let DEFAULT_DATE_RANGE={date_from:"-7d",date_to:null},DEFAULT_FILTER_GROUP={type:_types__WEBPACK_IMPORTED_MODULE_4__.J2.And,values:[{type:_types__WEBPACK_IMPORTED_MODULE_4__.J2.And,values:[]}]},errorFiltersLogic=(0,kea__WEBPACK_IMPORTED_MODULE_1__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_1__.path)(["scenes","error-tracking","errorFiltersLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_1__.actions)({setDateRange:dateRange=>({dateRange}),setSearchQuery:searchQuery=>({searchQuery}),setFilterGroup:filterGroup=>({filterGroup}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts})}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.reducers)({dateRange:[DEFAULT_DATE_RANGE,{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],filterGroup:[DEFAULT_FILTER_GROUP,{persist:!0},{setFilterGroup:(_,_ref2)=>{let{filterGroup}=_ref2;return filterGroup}}],filterTestAccounts:[!1,{persist:!0},{setFilterTestAccounts:(_,_ref3)=>{let{filterTestAccounts}=_ref3;return filterTestAccounts}}],searchQuery:["",{setSearchQuery:(_,_ref4)=>{let{searchQuery}=_ref4;return searchQuery}}]}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.urlToAction)(_ref5=>{let{actions,values}=_ref5;return{"*":(_,params)=>{params.dateRange&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.dateRange,values.dateRange)&&actions.setDateRange(params.dateRange),params.filterGroup&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.filterGroup,values.filterGroup)&&actions.setFilterGroup(params.filterGroup),params.filterTestAccounts&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.filterTestAccounts,values.filterTestAccounts)&&actions.setFilterTestAccounts(params.filterTestAccounts),params.searchQuery&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.searchQuery,values.searchQuery)&&actions.setSearchQuery(params.searchQuery)}}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.actionToUrl)(_ref6=>{let{values}=_ref6,buildURL=()=>(0,scenes_error_tracking_utils__WEBPACK_IMPORTED_MODULE_3__.qI)(kea_router__WEBPACK_IMPORTED_MODULE_2__.router,params=>((0,scenes_error_tracking_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"filterTestAccounts",values.filterTestAccounts,!1),(0,scenes_error_tracking_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"searchQuery",values.searchQuery,""),(0,scenes_error_tracking_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"filterGroup",values.filterGroup,DEFAULT_FILTER_GROUP),(0,scenes_error_tracking_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"dateRange",values.dateRange,DEFAULT_DATE_RANGE),params));return{setDateRange:()=>buildURL(),setFilterGroup:()=>buildURL(),setSearchQuery:()=>buildURL(),setFilterTestAccounts:()=>buildURL()}})])},"../../frontend/src/scenes/error-tracking/components/ErrorFilters/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>ErrorFilters});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),DateFilter=__webpack_require__("../../frontend/src/lib/components/DateFilter/DateFilter.tsx"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),errorFiltersLogic=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ErrorFilters/errorFiltersLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let errorTrackingDateOptions=utils.bE.filter(dm=>"Yesterday"!=dm.key);var src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),InfiniteSelectResults=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/InfiniteSelectResults.tsx"),TaxonomicFilter=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),taxonomicFilterLogic=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx"),types=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),UniversalFilters=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/UniversalFilters.tsx"),universalFiltersLogic=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/universalFiltersLogic.ts"),UniversalFilters_utils=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/utils.ts"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src_types=__webpack_require__("../../frontend/src/types.ts");let taxonomicFilterLogicKey="error-tracking",taxonomicGroupTypes=[types.t.EventProperties,types.t.PersonProperties,types.t.ErrorTrackingIssues,types.t.Cohorts,types.t.HogQLExpression],UniversalSearch=()=>{let[visible,setVisible]=(0,react.useState)(!1),{searchQuery}=(0,index_esm.useValues)(errorFiltersLogic.U),{setSearchQuery}=(0,index_esm.useActions)(errorFiltersLogic.U),{addGroupFilter}=(0,index_esm.useActions)(universalFiltersLogic.d),searchInputRef=(0,react.useRef)(null),floatingRef=(0,react.useRef)(null),onClose=query=>{searchInputRef.current?.blur(),setVisible(!1),setSearchQuery(query)},taxonomicFilterLogicProps={taxonomicFilterLogicKey,taxonomicGroupTypes,onChange:(taxonomicGroup,value,item,originalQuery)=>{searchInputRef.current?.blur(),setVisible(!1),setSearchQuery(""),addGroupFilter(taxonomicGroup,value,item,originalQuery)},onEnter:onClose,autoSelectItem:!1,initialSearchQuery:searchQuery,excludedProperties:{[types.t.ErrorTrackingIssues]:["assignee"]}};return(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:taxonomicFilterLogic.aS,props:taxonomicFilterLogicProps,children:(0,jsx_runtime.jsx)(src.Qw,{overlay:(0,jsx_runtime.jsx)(InfiniteSelectResults.Q,{focusInput:()=>searchInputRef.current?.focus(),taxonomicFilterLogicProps:taxonomicFilterLogicProps,popupAnchorElement:floatingRef.current,useVerticalLayout:!0}),matchWidth:!0,visible:visible,closeOnClickInside:!1,floatingRef:floatingRef,onClickOutside:()=>onClose(""),children:(0,jsx_runtime.jsx)(TaxonomicFilter.N,{prefix:(0,jsx_runtime.jsx)(RecordingsUniversalFilterGroup,{}),onClick:()=>setVisible(!0),searchInputRef:searchInputRef,onClose:()=>onClose(""),onChange:setSearchQuery,size:"small",fullWidth:!0})})})},RecordingsUniversalFilterGroup=()=>{let{filterGroup}=(0,index_esm.useValues)(universalFiltersLogic.d),{replaceGroupValue,removeGroupValue}=(0,index_esm.useActions)(universalFiltersLogic.d),[allowInitiallyOpen,setAllowInitiallyOpen]=(0,react.useState)(!1);return(0,react.useEffect)(()=>{setAllowInitiallyOpen(!0)},[]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filterGroup.values.map((filterOrGroup,index)=>(0,UniversalFilters_utils.pU)(filterOrGroup)?(0,jsx_runtime.jsx)(UniversalFilters.Z.Group,{index:index,group:filterOrGroup,children:(0,jsx_runtime.jsx)(UniversalSearch,{})},index):(0,jsx_runtime.jsx)(UniversalFilters.Z.Value,{index:index,filter:filterOrGroup,onRemove:()=>removeGroupValue(index),onChange:value=>replaceGroupValue(index,value),initiallyOpen:allowInitiallyOpen},index))})};var TestAccountFilter=__webpack_require__("../../frontend/src/scenes/insights/filters/TestAccountFilter/index.ts");let ErrorFilters={Root:_ref=>{let{children}=_ref;return(0,jsx_runtime.jsx)("div",{className:"space-y-1",children:(0,jsx_runtime.jsx)("div",{className:"flex gap-2 items-center",children:children})})},DateRange:_ref=>{let{className,fullWidth=!1,size="small"}=_ref,{dateRange}=(0,index_esm.useValues)(errorFiltersLogic.U),{setDateRange}=(0,index_esm.useActions)(errorFiltersLogic.U);return(0,jsx_runtime.jsx)("span",{className:(0,css_classes.cn)("rounded bg-surface-primary",className),children:(0,jsx_runtime.jsx)(DateFilter.f,{size:size,dateFrom:dateRange.date_from,dateTo:dateRange.date_to,fullWidth:fullWidth,dateOptions:errorTrackingDateOptions,onChange:(changedDateFrom,changedDateTo)=>setDateRange({date_from:changedDateFrom,date_to:changedDateTo}),allowedRollingDateOptions:["hours","days","weeks","months","years"]})})},FilterGroup:()=>{let{filterGroup}=(0,index_esm.useValues)(errorFiltersLogic.U),{setFilterGroup}=(0,index_esm.useActions)(errorFiltersLogic.U);return(0,jsx_runtime.jsx)(UniversalFilters.Z,{rootKey:taxonomicFilterLogicKey,group:filterGroup.values[0],taxonomicGroupTypes:taxonomicGroupTypes,onChange:group=>setFilterGroup({type:src_types.J2.And,values:[group]}),children:(0,jsx_runtime.jsx)(UniversalSearch,{})})},InternalAccounts:()=>{let{filterTestAccounts}=(0,index_esm.useValues)(errorFiltersLogic.U),{setFilterTestAccounts}=(0,index_esm.useActions)(errorFiltersLogic.U);return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(TestAccountFilter.z,{size:"small",filters:{filter_test_accounts:filterTestAccounts},onChange:_ref=>{let{filter_test_accounts}=_ref;return setFilterTestAccounts(filter_test_accounts||!1)}})})}}},"../../frontend/src/scenes/error-tracking/components/ErrorTrackingSetupPrompt/ErrorTrackingSetupPrompt.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingSetupPrompt});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.14.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils/product-intents.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/types.ts"),_errorIngestionLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ErrorTrackingSetupPrompt/errorIngestionLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ErrorTrackingSetupPrompt=_ref=>{let{children}=_ref,{hasSentExceptionEvent,hasSentExceptionEventLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_errorIngestionLogic__WEBPACK_IMPORTED_MODULE_7__.T),{currentTeam,currentTeamLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic),exceptionAutocaptureEnabled=currentTeam&&currentTeam.autocapture_exceptions_opt_in;return hasSentExceptionEventLoading||currentTeamLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.$j,{})}):hasSentExceptionEvent||exceptionAutocaptureEnabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(IngestionStatusCheck,{})},IngestionStatusCheck=()=>{let{addProductIntent,updateCurrentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__.C,{productName:"Error tracking",thingName:"issue",titleOverride:"You haven't captured any exceptions",description:"To start capturing exceptions you need to enable exception autocapture. Exception autocapture only applies to the JS SDK. Installation for other platforms are described in the docs.",isEmpty:!0,productKey:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,actionElementOverride:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"primary",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_EXCEPTION_AUTOCAPTURE_ENABLED}),updateCurrentTeam({autocapture_exceptions_opt_in:!0})},children:"Enable exception autocapture"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{targetBlank:!0,sideIcon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconExternal,{className:"w-5 h-5"}),to:"https://posthog.com/docs/error-tracking/installation",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_DOCS_VIEWED})},children:"Read the docs"})]})})}},"../../frontend/src/scenes/error-tracking/components/ErrorTrackingSetupPrompt/errorIngestionLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>errorIngestionLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/utils/definitions.ts"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/types.ts");let errorIngestionLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorIngestionLogic"]),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)({hasSentExceptionEvent:{__default:void 0,loadExceptionEventDefinition:async()=>{let definition=(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.eventDefinitions.list({event_type:_types__WEBPACK_IMPORTED_MODULE_4__.uW.Event,search:"$exception"})).results.find(r=>"$exception"===r.name);return!!definition&&!(0,lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__.U)(definition)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref=>{let{actions}=_ref;actions.loadExceptionEventDefinition()})])},"../../frontend/src/scenes/error-tracking/components/GenericSelect.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>GenericSelect});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function GenericSelect(_ref){let{current,size,onChange,values,placeholder,renderValue}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Yv,{onChange:onChange,value:current,placeholder:placeholder,options:values.map(key=>({value:key,label:renderValue(key)})),size:size})}},"../../frontend/src/scenes/error-tracking/components/Indicator.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Eg:()=>StatusIndicator,VO:()=>LabelIndicator});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let sizeVariants={xsmall:"gap-1 text-xs",small:"gap-2 text-sm",medium:"gap-3 text-base",large:"gap-3 text-lg"};function LabelIndicator(_ref){let{intent,label,size,tooltip,className}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.u,{title:tooltip,placement:"right",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.default)("flex items-center",className,sizeVariants[size]),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Mo,{status:intent,size:"small"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{children:label})]})})}let STATUS_LABEL={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release",suppressed:"Suppressed"},STATUS_INTENT={active:"warning",archived:"muted",resolved:"success",pending_release:"muted",suppressed:"danger"},STATUS_TOOLTIP={suppressed:"Stop capturing this issue",active:"Ongoing issue",archived:void 0,resolved:"Will become active again on next occurrence",pending_release:void 0};function StatusIndicator(_ref2){let{status,size="small",className,withTooltip}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(LabelIndicator,{intent:STATUS_INTENT[status],size:size,label:STATUS_LABEL[status],tooltip:withTooltip?STATUS_TOOLTIP[status]:void 0,className:className})}},"../../frontend/src/scenes/error-tracking/components/RuntimeIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>RuntimeIcon});var lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let RuntimeIconMap={python:lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_0__.Bm,web:lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_0__.RQ,node:lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_0__.fS,unknown:react__WEBPACK_IMPORTED_MODULE_1__.Fragment};function RuntimeIcon(_ref){let{runtime,...props}=_ref,Icon=RuntimeIconMap[runtime];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon,{...props})}},"../../frontend/src/scenes/error-tracking/errorTrackingIssueSceneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>errorTrackingIssueSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_dayjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/dayjs.ts"),posthog_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.245.0_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/types.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/types.ts"),_components_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ErrorFilters/errorFiltersLogic.ts"),_queries__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/scenes/error-tracking/queries.ts"),_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts");let errorTrackingIssueSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["scenes","error-tracking","errorTrackingIssueSceneLogic",key]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.id),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[_components_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_9__.U,["dateRange","filterTestAccounts","filterGroup","searchQuery"]],actions:[_components_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_9__.U,["setDateRange","setFilterTestAccounts","setFilterGroup","setSearchQuery"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({loadIssue:!0,loadSummary:!0,loadProperties:timestamp=>({timestamp}),setIssue:issue=>({issue}),updateStatus:status=>({status}),updateAssignee:assignee=>({assignee}),setLastSeen:lastSeen=>({lastSeen})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.defaults)({issue:null,summary:null,properties:null,lastSeen:null}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({issue:{setIssue:(_,_ref)=>{let{issue}=_ref;return issue},updateAssignee:(state,_ref2)=>{let{assignee}=_ref2;return state?{...state,assignee}:null},updateStatus:(state,_ref3)=>{let{status}=_ref3;return state?{...state,status}:null}},summary:{},lastSeen:{setLastSeen:(prevLastSeen,_ref4)=>{let{lastSeen}=_ref4;return!prevLastSeen||prevLastSeen.isBefore(lastSeen)?lastSeen:prevLastSeen}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({breadcrumbs:[s=>[s.issue],issue=>{let exceptionType=issue?.name||"Issue";return[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__.x.ErrorTracking,name:"Error tracking",path:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.errorTracking()},{key:[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__.x.ErrorTrackingIssue,exceptionType],name:exceptionType}]}],[_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_12__.f]:[(_,p)=>[p.id],issueId=>({activity_scope:_types__WEBPACK_IMPORTED_MODULE_8__.jc.ERROR_TRACKING_ISSUE,activity_item_id:issueId})],eventsQuery:[s=>[(_,props)=>props.id,s.filterTestAccounts,s.searchQuery,s.filterGroup,s.dateRange],(issueId,filterTestAccounts,searchQuery,filterGroup,dateRange)=>(0,_queries__WEBPACK_IMPORTED_MODULE_10__.QT)({issueId,filterTestAccounts,filterGroup,searchQuery,dateRange:(0,_utils__WEBPACK_IMPORTED_MODULE_11__.v$)(dateRange).toDateRange()})],firstSeen:[s=>[s.issue],issue=>issue?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_4__.Bv)(issue.first_seen):null],aggregations:[s=>[s.summary],summary=>summary?.aggregations]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref5=>{let{values,actions,props}=_ref5;return{issue:{loadIssue:async()=>await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.errorTracking.getIssue(props.id,props.fingerprint)},properties:{loadProperties:async _ref6=>{let{timestamp}=_ref6,issue=(await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_10__.zx)({issueId:props.id,dateRange:getNarrowDateRange(timestamp),filterTestAccounts:!1}),{},void 0,"blocking")).results[0];return issue.earliest?JSON.parse(issue.earliest):null}},summary:{loadSummary:async()=>{let response=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_10__.zx)({issueId:props.id,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,filterGroup:values.filterGroup,searchQuery:values.searchQuery,volumeResolution:_utils__WEBPACK_IMPORTED_MODULE_11__.q7}),{},void 0,"blocking");return response.results.length?(actions.setLastSeen((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_4__.Bv)(response.results[0].last_seen)),{aggregations:response.results[0].aggregations}):null}}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref7=>{let{props,actions}=_ref7;return{setDateRange:actions.loadSummary,setFilterGroup:actions.loadSummary,setFilterTestAccounts:actions.loadSummary,setSearchQuery:actions.loadSummary,loadIssue:actions.loadSummary,loadIssueSuccess:[_ref8=>{let{issue}=_ref8;return actions.loadProperties(issue.first_seen)}],loadIssueFailure:_ref9=>{let{errorObject:{status,data}}=_ref9;308==status&&"issue_id"in data&&kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.replace(scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.errorTrackingIssue(data.issue_id))},updateStatus:async _ref10=>{let{status}=_ref10;posthog_js__WEBPACK_IMPORTED_MODULE_5__.LJ.capture("error_tracking_issue_status_updated",{status,issue_id:props.id}),await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.errorTracking.updateIssue(props.id,{status})},updateAssignee:async _ref11=>{let{assignee}=_ref11;posthog_js__WEBPACK_IMPORTED_MODULE_5__.LJ.capture("error_tracking_issue_assigned",{issue_id:props.id}),await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.errorTracking.assignIssue(props.id,assignee)}}})]);function getNarrowDateRange(timestamp){let firstSeen=(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_4__.Bv)(timestamp);return{date_from:firstSeen.subtract(1,"hour").toISOString(),date_to:firstSeen.add(1,"hour").toISOString()}}},"../../frontend/src/scenes/error-tracking/hooks/use-sparkline-data.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>useSparklineData,U:()=>useSparklineDataIssueScene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_errorTrackingIssueSceneLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/scenes/error-tracking/errorTrackingIssueSceneLogic.ts"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts");function useSparklineData(occurrences,dateRange,volumeResolution){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{let labels=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.r0)(dateRange,volumeResolution),values=occurrences;return values||(values=Array(volumeResolution).fill(0)),values.map((value,index)=>({value,date:labels[index].toDate()}))},[occurrences,dateRange,volumeResolution])}function useSparklineDataIssueScene(){let{aggregations,dateRange}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorTrackingIssueSceneLogic__WEBPACK_IMPORTED_MODULE_2__.r);return useSparklineData(aggregations?.volumeRange,dateRange,_utils__WEBPACK_IMPORTED_MODULE_3__.q7)}},"../../frontend/src/scenes/error-tracking/hooks/use-sparkline-options.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>useSparklineOptions,z:()=>useDefaultSparklineColorVars});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_layout_navigation_3000_themeLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/layout/navigation-3000/themeLogic.ts");function useSparklineOptions(){let overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},deps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],colorVars=useDefaultSparklineColorVars();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({backgroundColor:`var(--${colorVars[0]})`,hoverBackgroundColor:`var(--${colorVars[1]})`,axisColor:`var(--${colorVars[0]})`,borderRadius:5,eventLabelHeight:20,eventLabelPaddingX:5,eventLabelPaddingY:3,eventMinSpace:2,...overrides}),[colorVars,...deps])}let DARK_MODE_COLORS=["color-zinc-400","color-zinc-200"],LIGHT_MODE_COLORS=["color-zinc-400","color-zinc-600"];function useDefaultSparklineColorVars(){let{isDarkModeOn}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_layout_navigation_3000_themeLogic__WEBPACK_IMPORTED_MODULE_2__.b);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>isDarkModeOn?DARK_MODE_COLORS:LIGHT_MODE_COLORS,[isDarkModeOn])}}}]);