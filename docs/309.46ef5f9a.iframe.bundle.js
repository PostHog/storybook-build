(window.webpackJsonp=window.webpackJsonp||[]).push([[309],{"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonPageHeader}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function GroupsTabs(_ref){let{activeGroupTypeIndex:activeGroupTypeIndex}=_ref;const{groupTypes:groupTypes,aggregationLabel:aggregationLabel}=Object(index_esm.useValues)(groupsModel.a),{groupsAccessStatus:groupsAccessStatus}=Object(index_esm.useValues)(groupsAccessLogic.b),showGroupsIntroductionPage=[groupsAccessLogic.a.HasAccess,groupsAccessLogic.a.HasGroupTypes,groupsAccessLogic.a.NoAccess].includes(groupsAccessStatus);return Object(jsx_runtime.jsx)(LemonTabs.a,{activeKey:activeGroupTypeIndex,tabs:[{key:-1,label:"Persons",link:urls.a.persons()},...showGroupsIntroductionPage?[{key:0,label:"Groups",link:urls.a.groups(0)}]:groupTypes.map((groupType=>({label:Object(utils.i)(aggregationLabel(groupType.group_type_index).plural),key:groupType.group_type_index,link:urls.a.groups(groupType.group_type_index)})))]})}try{GroupsTabs.displayName="GroupsTabs",GroupsTabs.__docgenInfo={description:"",displayName:"GroupsTabs",props:{activeGroupTypeIndex:{defaultValue:null,description:"",name:"activeGroupTypeIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/GroupsTabs.tsx#GroupsTabs"]={docgenInfo:GroupsTabs.__docgenInfo,name:"GroupsTabs",path:"frontend/src/scenes/groups/GroupsTabs.tsx#GroupsTabs"})}catch(__react_docgen_typescript_loader_error){}function PersonPageHeader(_ref){let{activeGroupTypeIndex:activeGroupTypeIndex}=_ref;const{showGroupsOptions:showGroupsOptions}=Object(index_esm.useValues)(groupsModel.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:"Persons"+(showGroupsOptions?" & Groups":""),caption:`A catalog of your product's end users${showGroupsOptions?" and groups":""}.`}),showGroupsOptions&&Object(jsx_runtime.jsx)(GroupsTabs,{activeGroupTypeIndex:activeGroupTypeIndex})]})}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{activeGroupTypeIndex:{defaultValue:null,description:"",name:"activeGroupTypeIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/persons/PersonsScene.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"PersonsScene",(function(){return PersonsScene}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),PersonPageHeader=__webpack_require__("./frontend/src/scenes/persons/PersonPageHeader.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),fast_deep_equal=__webpack_require__("./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),schema=__webpack_require__("./frontend/src/queries/schema.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),lemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/lemonToast.tsx");const getDefaultQuery=()=>({kind:schema.a.DataTableNode,source:{kind:schema.a.PersonsNode},full:!0,propertiesViaUrl:!0}),personsSceneLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","persons","personsSceneLogic"]),Object(index_esm.actions)({setQuery:query=>({query:query})}),Object(index_esm.reducers)({query:[getDefaultQuery(),{setQuery:(_,_ref)=>{let{query:query}=_ref;return query}}]}),Object(lib.actionToUrl)((_ref2=>{let{values:values}=_ref2;return{setQuery:()=>[urls.a.persons(),{},Object(utils.vb)(values.query,getDefaultQuery())?{}:{q:values.query},{replace:!0}]}})),Object(lib.urlToAction)((_ref3=>{let{actions:actions,values:values}=_ref3;return{[urls.a.persons()]:(_,__,_ref4)=>{let{q:queryParam}=_ref4;fast_deep_equal_default()(queryParam,values.query)||(queryParam?"object"==typeof queryParam?actions.setQuery(queryParam):(lemonToast.d.error("Invalid query in URL"),console.error({queryParam:queryParam})):Object(utils.vb)(values.query,getDefaultQuery())||actions.setQuery(getDefaultQuery()))}}}))]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:PersonsScene};function PersonsScene(){const{query:query}=Object(index_esm.useValues)(personsSceneLogic),{setQuery:setQuery}=Object(index_esm.useActions)(personsSceneLogic);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(PersonPageHeader.a,{activeGroupTypeIndex:-1}),Object(jsx_runtime.jsx)(Query.a,{query:query,setQuery:setQuery})]})}}}]);