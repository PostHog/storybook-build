(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{"./frontend/src/scenes/plugins/Plugins.tsx":function(je,Z,o){"use strict";o.r(Z),o.d(Z,"scene",function(){return zl}),o.d(Z,"Plugins",function(){return Tn});var oe=o("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ie=o.n(oe),ke=o("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss"),H=o.n(ke),q={};q.insert="head",q.singleton=!1;var Bl=ie()(H.a,q),Jl=H.a.locals||{},J=o("./node_modules/react/index.js"),e=o.n(J),Dl=o("./node_modules/core-js/modules/es.symbol.js"),Yl=o("./node_modules/core-js/modules/es.symbol.description.js"),Ml=o("./node_modules/core-js/modules/es.array.concat.js"),Kl=o("./node_modules/core-js/modules/es.array.every.js"),Hl=o("./node_modules/core-js/modules/es.array.filter.js"),$l=o("./node_modules/core-js/modules/es.array.find.js"),Gl=o("./node_modules/core-js/modules/es.array.includes.js"),Wl=o("./node_modules/core-js/modules/es.array.map.js"),Xl=o("./node_modules/core-js/modules/es.function.name.js"),Ql=o("./node_modules/core-js/modules/es.object.keys.js"),Zl=o("./node_modules/core-js/modules/es.object.values.js"),ql=o("./node_modules/core-js/modules/es.string.includes.js"),An=o("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ve=o.n(An),xn=o("./node_modules/@babel/runtime/helpers/defineProperty.js"),Je=o.n(xn),kn=o("./node_modules/@babel/runtime/helpers/slicedToArray.js"),w=o.n(kn),f=o("./node_modules/kea/lib/index.esm.js"),p=o("./frontend/src/scenes/plugins/pluginsLogic.ts"),Xe=o("./node_modules/antd/es/switch/index.js"),z=o("./node_modules/antd/es/form/index.js"),ee=o("./node_modules/antd/es/space/index.js"),Qe=o("./node_modules/antd/es/popconfirm/index.js"),E=o("./node_modules/antd/es/button/index.js"),F=o("./node_modules/antd/es/tag/index.js"),In=o("./node_modules/@ant-design/icons/es/icons/LockFilled.js"),_n=o("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js"),Ln=o("./node_modules/@ant-design/icons/es/icons/RollbackOutlined.js"),Ze=o("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),qe=o("./node_modules/@ant-design/icons/es/icons/CodeOutlined.js"),ue=o("./frontend/src/scenes/userLogic.ts"),se=o("./frontend/src/lib/utils.tsx"),en=o.p+"images/plugin-default.e3e047768d82d1c3fe24fce102eaef18.svg";function nn(l,n){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(l);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,a)}return t}function Ie(l){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?nn(Object(t),!0).forEach(function(a){Je()(l,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):nn(Object(t)).forEach(function(a){Object.defineProperty(l,a,Object.getOwnPropertyDescriptor(t,a))})}return l}function be(l){var n=l.url,t=l.pluginType,a=l.size,r=a===void 0?"medium":a,s=Object(J.useState)({image:en}),i=w()(s,2),c=i[0],d=i[1],u=r==="large"?100:60;return Object(J.useEffect)(function(){if(n!=null&&n.includes("github.com")){var m=Object(se.mb)(n),y=m.user,v=m.repo;d(Ie(Ie({},c),{},{image:"https://raw.githubusercontent.com/".concat(y,"/").concat(v,"/main/logo.png")}))}},[n]),t==="source"?e.a.createElement(qe.a,{style:{fontSize:u},className:"plugin-image"}):e.a.createElement("div",{className:"plugin-image",style:{width:u,height:u,backgroundImage:"url(".concat(c.image,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat"},onError:function(){return d(Ie(Ie({},c),{},{image:en}))}})}try{be.displayName="PluginImage",be.__docgenInfo={description:"",displayName:"PluginImage",props:{url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},pluginType:{defaultValue:null,description:"",name:"pluginType",required:!1,type:{name:"enum",value:[{value:'"local"'},{value:'"custom"'},{value:'"repository"'},{value:'"source"'}]}},size:{defaultValue:{value:"medium"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"medium"'},{value:'"large"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginImage.tsx#PluginImage"]={docgenInfo:be.__docgenInfo,name:"PluginImage",path:"frontend/src/scenes/plugins/plugin/PluginImage.tsx#PluginImage"})}catch(l){}var ln=o("./frontend/src/lib/components/Drawer.tsx"),V=o("./frontend/src/lib/components/Tooltip.tsx");function ye(l){var n=l.url,t=l.title,a=l.style;return e.a.createElement(V.a,{title:n.substring(5)},e.a.createElement(F.a,{color:"purple",onClick:function(){return Object(se.s)(n.substring(5))},style:a},t||"Local Plugin"))}try{ye.displayName="LocalPluginTag",ye.__docgenInfo={description:"",displayName:"LocalPluginTag",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx#LocalPluginTag"]={docgenInfo:ye.__docgenInfo,name:"LocalPluginTag",path:"frontend/src/scenes/plugins/plugin/LocalPluginTag.tsx#LocalPluginTag"})}catch(l){}var $=o("./frontend/src/scenes/plugins/utils.ts"),Rn=o("./node_modules/react-markdown/lib/react-markdown.js"),tn=o.n(Rn);function he(l){var n=l.title,t=n===void 0?"Source Code":n,a=l.style;return e.a.createElement(F.a,{style:a},t)}try{he.displayName="SourcePluginTag",he.__docgenInfo={description:"",displayName:"SourcePluginTag",props:{title:{defaultValue:{value:"Source Code"},description:"",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx#SourcePluginTag"]={docgenInfo:he.__docgenInfo,name:"SourcePluginTag",path:"frontend/src/scenes/plugins/plugin/SourcePluginTag.tsx#SourcePluginTag"})}catch(l){}var re=o("./node_modules/antd/es/input/index.js"),De=o("./node_modules/@monaco-editor/react/lib/es/index.js");function an(l,n){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(l);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,a)}return t}function on(l){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?an(Object(t),!0).forEach(function(a){Je()(l,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):an(Object(t)).forEach(function(a){Object.defineProperty(l,a,Object.getOwnPropertyDescriptor(t,a))})}return l}var Fn=`// Learn more about plugins at: https://posthog.com/docs/plugins/build/overview

// Processes each event, optionally transforming it
export function processEvent(event, { config }) {
    // Some events (such as $identify) don't have properties
    if (event.properties) {
        event.properties['hello'] = \`Hello \${config.name}\`
    }
    // Return the event to be ingested, or return null to discard
    return event
}

// Runs when the plugin is loaded, allows for preparing it as needed
export function setupPlugin (meta) {
    console.log(\`The date is \${new Date().toDateString()}\`)
}

// Runs every hour on the hour
async function runEveryHour(meta) {
    const response = await fetch('https://palabras-aleatorias-public-api.herokuapp.com/random')
    const data = await response.json()
    const randomSpanishWord = data.body.Word
    console.log(\`\xA1\${randomSpanishWord.toUpperCase()}!\`)
}`,Vn=[{markdown:"Specify your config here"},{key:"name",name:"Person to greet",type:"string",hint:"Used to personalise the property `hello`",default:"world",required:!1}];function Nn(){var l=Object(f.useValues)(p.b),n=l.editingPlugin,t=l.editingSource,a=l.loading,r=Object(f.useActions)(p.b),s=r.setEditingSource,i=r.editPluginSource,c=z.a.useForm(),d=w()(c,1),u=d[0];Object(J.useEffect)(function(){if(n){var v=!n.source&&Object.keys(n.config_schema).length===0;u.setFieldsValue({name:n.name||"Untitled Plugin",source:v?Fn:n.source,configSchema:JSON.stringify(v?Vn:n.config_schema,null,2)})}else u.resetFields()},[n==null?void 0:n.id,t]);function m(v){n&&i(on(on({},v),{},{id:n.id,configSchema:JSON.parse(v.configSchema)}))}var y={required:!0,message:"Please enter a value!"};return e.a.createElement(ln.a,{forceRender:!0,visible:t,onClose:function(){u.getFieldValue("source")!==(n==null?void 0:n.source)?confirm("You have unsaved changes in your plugin. Are you sure you want to exit?")&&s(!1):s(!1)},width:"min(90vw, 64rem)",title:"Coding Plugin: ".concat(n==null?void 0:n.name),placement:"left",footer:e.a.createElement("div",{style:{textAlign:"right"}},e.a.createElement(E.a,{onClick:function(){return s(!1)},style:{marginRight:16}},"Cancel"),e.a.createElement(E.a,{type:"primary",loading:a,onClick:u.submit},"Save"))},e.a.createElement(z.a,{form:u,layout:"vertical",onFinish:m},t?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",null,"Read our"," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build/overview",target:"_blank"},"plugin building overview in PostHog Docs")," ","for a good grasp of possibilities.",e.a.createElement("br",null),"Once satisfied with your plugin, feel free to"," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build/tutorial#submitting-your-plugin",target:"_blank"},"submit it to the official Plugin Library"),"."),e.a.createElement(z.a.Item,{label:"Name",name:"name",required:!0,rules:[y]},e.a.createElement(re.a,null)),e.a.createElement(z.a.Item,{label:"Source Code",name:"source",required:!0,rules:[y]},e.a.createElement(De.a,{language:"typescript",theme:"vs-dark",height:400,options:{minimap:{enabled:!1}}})),e.a.createElement(z.a.Item,{label:"Config Schema JSON",name:"configSchema",required:!0,rules:[y,{validator:se.Bb}]},e.a.createElement(De.a,{language:"json",theme:"vs-dark",height:200}))):null))}var Un=o("./node_modules/antd/es/upload/index.js"),wn=o("./node_modules/@ant-design/icons/es/icons/UploadOutlined.js");function _e(l){var n=l.value,t=l.onChange;return e.a.createElement(Un.a,{multiple:!1,fileList:n!=null&&n.size?[n]:[],beforeUpload:function(r){return t==null||t(r),!1},onRemove:function(){return t==null||t(null),!1},className:"ph-ignore-input"},e.a.createElement(E.a,{icon:e.a.createElement(wn.a,null)},"Click to upload"))}try{_e.displayName="UploadField",_e.__docgenInfo={description:"",displayName:"UploadField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"UploadFile<any> | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((file?: UploadFile<any> | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/UploadField.tsx#UploadField"]={docgenInfo:_e.__docgenInfo,name:"UploadField",path:"frontend/src/scenes/plugins/edit/UploadField.tsx#UploadField"})}catch(l){}var sn=o("./node_modules/antd/es/select/index.js"),zn=o("./node_modules/@ant-design/icons/es/icons/EditOutlined.js");function Le(l){var n=l.value,t=l.onChange,a=l.fieldConfig,r=Object(J.useState)(!1),s=w()(r,2),i=s[0],c=s[1];return a.secret&&!i&&n&&(n===$.a||n.name===$.a)?e.a.createElement(E.a,{icon:e.a.createElement(zn.a,null),onClick:function(){t==null||t(a.default||""),c(!0)}},"Reset secret ",a.type==="attachment"?"attachment":"field"):a.type==="attachment"?e.a.createElement(_e,{value:n,onChange:t}):a.type==="string"?e.a.createElement(re.a,{value:n,onChange:t,autoFocus:i,className:"ph-no-capture"}):a.type==="choice"?e.a.createElement(sn.a,{dropdownMatchSelectWidth:!1,value:n,className:"ph-no-capture",onChange:t,showSearch:!0},a.choices.map(function(d){return e.a.createElement(sn.a.Option,{value:d,key:d},d)})):e.a.createElement("strong",{style:{color:"var(--danger)"}},'Unknown field type "',e.a.createElement("code",null,a.type),'".',e.a.createElement("br",null),"You may need to upgrade PostHog!")}try{Le.displayName="PluginField",Le.__docgenInfo={description:"",displayName:"PluginField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},fieldConfig:{defaultValue:null,description:"",name:"fieldConfig",required:!0,type:{name:"PluginConfigSchema"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/PluginField.tsx#PluginField"]={docgenInfo:Le.__docgenInfo,name:"PluginField",path:"frontend/src/scenes/plugins/edit/PluginField.tsx#PluginField"})}catch(l){}var D=o("./frontend/src/scenes/plugins/access.ts"),rn=o("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),Bn={processEvent:"Read + modify access to events before ingestion",processEventBatch:"Read + modify access to events before ingestion, in batches",onEvent:"Read-only access to events",onSnapshot:"Read-only access to session recording events",exportEvents:"Read-only access to events, optimized for export",runEveryMinute:"Runs a task every minute",runEveryHour:"Runs a task every hour",runEveryDay:"Runs a task every day"},et=o("./node_modules/core-js/modules/es.object.entries.js"),Jn=o("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),un=o("./node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),Ye=o("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),dn=o("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Dn=o("./node_modules/antd/es/tooltip/index.js"),Yn=o("./node_modules/antd/es/input-number/index.js"),Me=o("./node_modules/antd/es/radio/index.js"),Mn=o("./node_modules/antd/es/date-picker/index.js"),Kn=o("./node_modules/antd/lib/modal/Modal.js"),Hn=o.n(Kn),nt=o("./node_modules/core-js/modules/es.array.iterator.js"),lt=o("./node_modules/core-js/modules/es.object.to-string.js"),tt=o("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$n=o("./node_modules/@babel/runtime/regenerator/index.js"),cn=o.n($n),at=o("./node_modules/regenerator-runtime/runtime.js"),Gn=o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Wn=o.n(Gn),Xn=o("./frontend/src/lib/api.ts"),mn=o("./frontend/src/lib/components/lemonToast.tsx"),gn=Object(f.kea)({props:{},key:function(n){return"".concat(n.pluginId,"_").concat(n.jobName)},path:function(n){return["scenes","plugins","edit","interface-jobs","interfaceJobsLogic",n]},connect:{actions:[p.b,["showPluginLogs"]]},actions:{setIsJobModalOpen:function(n){return{isOpen:n}},setRunJobAvailable:function(n){return{isAvailable:n}},runJob:function(n){return{form:n}},playButtonOnClick:function(n,t){return{form:n,jobHasEmptyPayload:t}},setRunJobAvailableTimeout:function(n){return{timeout:n}}},reducers:{isJobModalOpen:[!1,{setIsJobModalOpen:function(n,t){var a=t.isOpen;return a}}],runJobAvailable:[!0,{setRunJobAvailable:function(n,t){var a=t.isAvailable;return a}}],runJobAvailableTimeout:[null,{setRunJobAvailableTimeout:function(n,t){var a=t.timeout;return a}}]},listeners:function(n){var t=n.actions,a=n.props,r=n.values;return{runJob:function(){var s=Wn()(cn.a.mark(function c(d){var u,m,y,v,T,A,b,S;return cn.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return u=d.form,j.prev=1,j.next=4,u.validateFields();case 4:j.next=9;break;case 6:return j.prev=6,j.t0=j.catch(1),j.abrupt("return");case 9:for(t.setIsJobModalOpen(!1),m=u.getFieldsValue(),y=0,v=Object.entries(m);y<v.length;y++)A=w()(v[y],2),b=A[0],S=A[1],((T=a.jobSpecPayload)===null||T===void 0?void 0:T[b].type)==="date"&&(m[b]?m[b]=S.toISOString():m[b]=null);return j.prev=12,j.next=15,Xn.b.create("api/plugin_config/".concat(a.pluginConfigId,"/job"),{job:{type:a.jobName,payload:u.getFieldsValue()}});case 15:j.next=21;break;case 17:return j.prev=17,j.t1=j.catch(12),mn.a.error('Enqueuing job "'.concat(a.jobName,'" failed')),j.abrupt("return");case 21:t.showPluginLogs(a.pluginId),t.setRunJobAvailable(!1),r.runJobAvailableTimeout&&clearTimeout(r.runJobAvailableTimeout),setTimeout(function(){var R=t.setRunJobAvailable(!0);t.setRunJobAvailableTimeout(R)},15e3),mn.a.success("Job has been enqueued");case 26:case"end":return j.stop()}},c,null,[[1,6],[12,17]])}));function i(c){return s.apply(this,arguments)}return i}(),playButtonOnClick:function(i){var c=i.form,d=i.jobHasEmptyPayload;if(!!r.runJobAvailable){if(d){t.runJob(c);return}t.setIsJobModalOpen(!0)}}}},events:function(n){var t=n.values;return{beforeUnmount:function(){t.runJobAvailableTimeout&&clearTimeout(t.runJobAvailableTimeout)}}}}),Qn={required:!0,message:"Please enter a value!"},Zn="Export historical events";function Re(l){var n=l.jobName,t=l.jobSpec,a=l.pluginConfigId,r=l.pluginId;n===Zn&&(t.payload={dateFrom:{type:"date"},dateTo:{type:"date"}});var s={jobName:n,pluginConfigId:a,pluginId:r,jobSpecPayload:t.payload},i=Object(f.useActions)(gn(s)),c=i.setIsJobModalOpen,d=i.runJob,u=i.playButtonOnClick,m=Object(f.useValues)(gn(s)),y=m.runJobAvailable,v=m.isJobModalOpen,T=Object.keys(t.payload||{}).length===0,A=z.a.useForm(),b=w()(A,1),S=b[0],h=y?T?"Run job":"Configure and run job":"You already ran this job recently.";return e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{style:{marginLeft:10,marginRight:5},onClick:function(){return u(S,T)}},e.a.createElement(Dn.a,{title:h},T?e.a.createElement(Jn.a,{className:y?"plugin-run-job-button":"plugin-run-job-button-disabled"}):e.a.createElement(un.a,{className:y?"plugin-run-job-button":"plugin-run-job-button-disabled"}))),e.a.createElement(Hn.a,{visible:v,onCancel:function(){return c(!1)},onOk:function(){return d(S)},okText:"Run job now",title:"Configuring job '".concat(n,"'")},t.payload?e.a.createElement(z.a,{form:S,layout:"vertical"},Object.entries(t.payload).map(function(j){var R=w()(j,2),_=R[0],x=R[1];return e.a.createElement("span",{key:_},e.a.createElement(z.a.Item,{style:{marginBottom:15},name:_,required:!!x.required,rules:x.required?[Qn].concat(ve()(x.type==="json"?[{validator:se.Bb}]:[])):[],label:_},x.type==="string"?e.a.createElement(re.a,null):x.type==="number"?e.a.createElement(Yn.a,null):x.type==="json"?e.a.createElement(De.a,{options:{codeLens:!1},className:"plugin-job-json-editor",language:"json",height:200}):x.type==="boolean"?e.a.createElement(Me.a.Group,{id:"propertyValue",buttonStyle:"solid"},e.a.createElement(Me.a.Button,{value:!0,defaultChecked:!0},e.a.createElement(Ye.a,null)," True"),e.a.createElement(Me.a.Button,{value:!1},e.a.createElement(dn.a,null)," False")):x.type==="date"?e.a.createElement(Mn.a,{popupStyle:{zIndex:1061},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,use12Hours:!0,showTime:!0}):null))})):null))}try{Re.displayName="PluginJobConfiguration",Re.__docgenInfo={description:"",displayName:"PluginJobConfiguration",props:{jobName:{defaultValue:null,description:"",name:"jobName",required:!0,type:{name:"string"}},jobSpec:{defaultValue:null,description:"",name:"jobSpec",required:!0,type:{name:"JobSpec"}},pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobConfiguration"]={docgenInfo:Re.__docgenInfo,name:"PluginJobConfiguration",path:"frontend/src/scenes/plugins/edit/interface-jobs/PluginJobConfiguration.tsx#PluginJobConfiguration"})}catch(l){}function Fe(l){var n=l.plugin,t=l.pluginConfigId,a=n.capabilities,r=n.public_jobs;return!a||!a.jobs||!r||r.length===0?e.a.createElement(e.a.Fragment,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("h3",{className:"l3",style:{marginTop:32}},"Jobs (Beta)"),a.jobs.map(function(s){if(s in r)return e.a.createElement("div",{key:s},s==="Export historical events"?e.a.createElement(V.a,{title:"Run this plugin on all historical events ingested until now"},e.a.createElement("i",null,"Export historical events")):e.a.createElement("i",null,s),e.a.createElement(Re,{jobName:s,jobSpec:r[s],pluginConfigId:t,pluginId:n.id}))}))}try{Fe.displayName="PluginJobOptions",Fe.__docgenInfo={description:"",displayName:"PluginJobOptions",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"PluginTypeWithConfig"}},pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/edit/interface-jobs/PluginJobOptions.tsx#PluginJobOptions"]={docgenInfo:Fe.__docgenInfo,name:"PluginJobOptions",path:"frontend/src/scenes/plugins/edit/interface-jobs/PluginJobOptions.tsx#PluginJobOptions"})}catch(l){}var qn=o("./frontend/src/lib/constants.tsx");function pn(l,n){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(l);n&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,a)}return t}function fn(l){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?pn(Object(t),!0).forEach(function(a){Je()(l,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach(function(a){Object.defineProperty(l,a,Object.getOwnPropertyDescriptor(t,a))})}return l}window.process=qn.k;function el(l){var n=l.value,t=l.onChange;return e.a.createElement(e.a.Fragment,null,e.a.createElement(Xe.a,{checked:n,onChange:t}),e.a.createElement("strong",{style:{paddingLeft:10}},n?"Enabled":"Disabled"))}var nl=function(){return e.a.createElement(e.a.Fragment,null,e.a.createElement(V.a,{placement:"topLeft",title:"This is a secret write-only field. Its value is not available after saving."},e.a.createElement(In.a,{style:{marginRight:5}})))};function ll(){var l=Object(f.useValues)(ue.a),n=l.user,t=Object(f.useValues)(rn.a),a=t.preflight,r=Object(f.useValues)(p.b),s=r.editingPlugin,i=r.loading,c=r.editingSource,d=r.editingPluginInitialChanges,u=Object(f.useActions)(p.b),m=u.editPlugin,y=u.savePluginConfig,v=u.uninstallPlugin,T=u.setEditingSource,A=u.generateApiKeysIfNeeded,b=u.patchPlugin,S=z.a.useForm(),h=w()(S,1),j=h[0],R=Object(J.useState)([]),_=w()(R,2),x=_[0],Te=_[1],ge=Object(J.useState)([]),k=w()(ge,2),C=k[0],U=k[1];Object(J.useEffect)(function(){s?(j.setFieldsValue(fn(fn({},s.pluginConfig.config||Object($.b)(s)),{},{__enabled:s.pluginConfig.enabled},d)),A(j)):j.resetFields(),G()},[s==null?void 0:s.id,s==null?void 0:s.config_schema]);var G=function(){pe(),Ae()},pe=function(){for(var P=[],L=0,K=Object.values(Object($.d)((s==null?void 0:s.config_schema)||{}));L<K.length;L++){var N=K[L];if(!(!N.visible_if||!N.key)){var le=N.visible_if.every(function(te){var W=w()(te,2),X=W[0],Q=W[1];return Object($.c)(j,X,Q)});le||P.push(N.key)}}Te(P)},Ae=function(){for(var P=[],L=0,K=Object.values(Object($.d)((s==null?void 0:s.config_schema)||{}));L<K.length;L++){var N=K[L];if(!(!N.required_if||!Array.isArray(N.required_if)||!N.key)){var le=N.required_if.every(function(te){var W=w()(te,2),X=W[0],Q=W[1];return Object($.c)(j,X,Q)});le&&P.push(N.key)}}U(P)},xe=function(P){return Array.isArray(P.choices)&&!!P.choices.length&&!P.choices.find(function(L){return typeof L!="string"})&&!P.secret},fe=function(P){return P.type!=="choice"||xe(P)};return e.a.createElement(e.a.Fragment,null,e.a.createElement(ln.a,{forceRender:!0,visible:!!s,onClose:function(){return m(null)},width:"min(90vw, 500px)",title:s==null?void 0:s.name,"data-attr":"plugin-drawer",footer:e.a.createElement("div",{style:{display:"flex"}},e.a.createElement(ee.b,{style:{flexGrow:1}},s&&!s.is_global&&Object(D.c)(n==null?void 0:n.organization,s.organization_id)&&e.a.createElement(Qe.a,{placement:"topLeft",title:"Are you sure you wish to uninstall this plugin completely?",onConfirm:function(){return v(s.name)},okText:"Uninstall",cancelText:"Cancel",className:"plugins-popconfirm"},e.a.createElement(E.a,{style:{color:"var(--danger)",padding:4},type:"text",icon:e.a.createElement(_n.a,null),"data-attr":"plugin-uninstall"},"Uninstall")),(a==null?void 0:a.cloud)&&s&&Object(D.b)(n==null?void 0:n.organization)&&(s.is_global?e.a.createElement(V.a,{title:e.a.createElement(e.a.Fragment,null,"This plugin can currently be used by other organizations in this instance of PostHog. This action will ",e.a.createElement("b",null,"disable and hide it")," for all organizations other than yours.")},e.a.createElement(E.a,{type:"text",icon:e.a.createElement(Ln.a,null),onClick:function(){return b(s.id,{is_global:!1})},style:{padding:4}},"Make local")):e.a.createElement(V.a,{title:e.a.createElement(e.a.Fragment,null,"This action will mark this plugin as installed for"," ",e.a.createElement("b",null,"all organizations")," in this instance of PostHog.")},e.a.createElement(E.a,{type:"text",icon:e.a.createElement(Ze.a,null),onClick:function(){return b(s.id,{is_global:!0})},style:{padding:4}},"Make global")))),e.a.createElement(ee.b,null,e.a.createElement(E.a,{onClick:function(){return m(null)},"data-attr":"plugin-drawer-cancel"},"Cancel"),e.a.createElement(E.a,{type:"primary",loading:i,onClick:j.submit,"data-attr":"plugin-drawer-save"},"Save")))},e.a.createElement(z.a,{form:j,layout:"vertical",name:"basic",onFinish:y},s?e.a.createElement("div",null,e.a.createElement("div",{style:{display:"flex",marginBottom:16}},e.a.createElement(be,{pluginType:s.plugin_type,url:s.url,size:"large"}),e.a.createElement("div",{style:{flexGrow:1,paddingLeft:16}},Object(se.y)(s.description),e.a.createElement("div",{style:{marginTop:5}},(s==null?void 0:s.plugin_type)==="local"&&s.url?e.a.createElement(ye,{url:s.url,title:"Installed Locally"}):s.plugin_type==="source"?e.a.createElement(he,null):null,s.url&&e.a.createElement("a",{href:s.url},e.a.createElement("i",null,"\u2937 Learn more"))),e.a.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:5}},e.a.createElement(z.a.Item,{fieldKey:"__enabled",name:"__enabled",style:{display:"inline-block",marginBottom:0},"data-attr":"plugin-enabled-switch"},e.a.createElement(el,null))))),s.plugin_type==="source"?e.a.createElement("div",null,e.a.createElement(E.a,{type:c?"default":"primary",icon:e.a.createElement(qe.a,null),onClick:function(){return T(!c)},"data-attr":"plugin-edit-source"},"Edit Source")):null,s.capabilities&&Object.keys(s.capabilities).length>0?e.a.createElement(e.a.Fragment,null,e.a.createElement("h3",{className:"l3",style:{marginTop:32}},"Capabilities"),e.a.createElement("div",{style:{marginTop:5}},[].concat(ve()(s.capabilities.methods),ve()(s.capabilities.scheduled_tasks)).filter(function(g){return!["setupPlugin","teardownPlugin"].includes(g)}).map(function(g){return e.a.createElement(V.a,{title:Bn[g]||"",key:g},e.a.createElement(F.a,{className:"plugin-capabilities-tag"},g))}),s.capabilities.jobs.map(function(g){return e.a.createElement(V.a,{title:"Custom job",key:g},e.a.createElement(F.a,{className:"plugin-capabilities-tag"},g))}))):null,s.pluginConfig.id&&e.a.createElement(Fe,{plugin:s,pluginConfigId:s.pluginConfig.id}),e.a.createElement("h3",{className:"l3",style:{marginTop:32}},"Configuration"),Object($.d)(s.config_schema).length===0?e.a.createElement("div",null,"This plugin is not configurable."):null,Object($.d)(s.config_schema).map(function(g,P){return e.a.createElement(e.a.Fragment,{key:g.key||"__key__".concat(P)},g.markdown&&e.a.createElement(tn.a,{source:g.markdown,linkTarget:"_blank"}),g.type&&fe(g)?e.a.createElement(z.a.Item,{hidden:!!g.key&&x.includes(g.key),label:e.a.createElement(e.a.Fragment,null,g.secret&&e.a.createElement(nl,null),g.name||g.key),extra:g.hint&&e.a.createElement("small",null,e.a.createElement("div",{style:{height:2}}),e.a.createElement(tn.a,{source:g.hint,linkTarget:"_blank"})),name:g.key,required:g.required||!!g.key&&C.includes(g.key),rules:[{required:g.required||!!g.key&&C.includes(g.key),message:"Please enter a value!"}]},e.a.createElement(Le,{fieldConfig:g,onChange:G})):e.a.createElement(e.a.Fragment,null,g.type?e.a.createElement("p",{style:{color:"var(--danger)"}},"Invalid config field ",e.a.createElement("i",null,g.name||g.key),"."):null))})):null)),(s==null?void 0:s.plugin_type)==="source"?e.a.createElement(Nn,null):null)}var I=o("./node_modules/antd/es/row/index.js"),O=o("./node_modules/antd/es/col/index.js"),ot=o("./node_modules/core-js/modules/es.string.starts-with.js"),Ee=o("./node_modules/antd/es/card/index.js"),tl=o("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),jn=o("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),al=o("./node_modules/@ant-design/icons/es/icons/WarningOutlined.js"),vn=o("./node_modules/@ant-design/icons/es/icons/LoadingOutlined.js"),ol=o("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),sl=o("./node_modules/@ant-design/icons/es/icons/UnorderedListOutlined.js"),Oe=o("./node_modules/@ant-design/icons/es/icons/CloudDownloadOutlined.js"),rl=o("./node_modules/antd/es/popover/index.js"),il=o("./node_modules/@ant-design/icons/es/icons/ClearOutlined.js"),Ve=o("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),bn=o("./frontend/src/lib/dayjs.ts");function Pe(l){var n=l.error,t=l.reset;return n?e.a.createElement(rl.a,{title:e.a.createElement("div",{style:{textAlign:"center"}},Object(bn.a)(n.time).format("YYYY-MM-DD - HH:mm:ss")),content:e.a.createElement(e.a.Fragment,null,t?e.a.createElement(E.a,{size:"small",onClick:t,style:{float:"right",marginLeft:10}},e.a.createElement(il.a,null)," Delete"):null,e.a.createElement("div",null,n.name?e.a.createElement("strong",null,n.name,": "):"",n.message),n.stack?e.a.createElement(Ve.a,{wrap:!0,style:{fontSize:10},language:Ve.b.JavaScript},n.stack):null,n.event?e.a.createElement(Ve.a,{wrap:!0,style:{fontSize:10},language:Ve.b.JSON},JSON.stringify(n.event,null,2)):null),trigger:"click",placement:"top"},e.a.createElement(F.a,{color:"red",style:{cursor:"pointer"}},"ERROR")):null}try{Pe.displayName="PluginError",Pe.__docgenInfo={description:"",displayName:"PluginError",props:{error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"PluginErrorType"}},reset:{defaultValue:null,description:"",name:"reset",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"]={docgenInfo:Pe.__docgenInfo,name:"PluginError",path:"frontend/src/scenes/plugins/plugin/PluginError.tsx#PluginError"})}catch(l){}var B=o("./frontend/src/scenes/plugins/types.ts");function Ne(l){var n=l.isCommunity;return e.a.createElement(V.a,{title:n?"This plugin was built by a community memeber, not the PostHog team.":"This plugin was built by the PostHog team."},e.a.createElement(F.a,{color:n?"cyan":"geekblue"},n?"Community":"Official"))}try{Ne.displayName="CommunityPluginTag",Ne.__docgenInfo={description:"",displayName:"CommunityPluginTag",props:{isCommunity:{defaultValue:null,description:"",name:"isCommunity",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"]={docgenInfo:Ne.__docgenInfo,name:"CommunityPluginTag",path:"frontend/src/scenes/plugins/plugin/CommunityPluginTag.tsx#CommunityPluginTag"})}catch(l){}var st=o("./node_modules/core-js/modules/es.regexp.exec.js"),rt=o("./node_modules/core-js/modules/es.string.match.js");function yn(l){var n=l.tag;return n.match(/^[a-f0-9]{40}$/)?e.a.createElement("code",null,n.substring(0,7)):e.a.createElement("code",null,n)}function Ue(l){var n=l.url,t=l.tag,a=l.latestTag,r="";return n.match(/^https:\/\/(www.|)github.com\//)&&(r="".concat(n,"/compare/").concat(t,"...").concat(a)),n.match(/^https:\/\/(www.|)gitlab.com\//)&&(r="".concat(n,"/-/compare/").concat(t,"...").concat(a)),e.a.createElement(V.a,{title:e.a.createElement("div",null,"Installed: ",e.a.createElement(yn,{tag:t}),e.a.createElement("br",null),"Latest: ",e.a.createElement(yn,{tag:a}),r?e.a.createElement("div",{style:{marginTop:10}},"Click to see the diff"):null)},r?e.a.createElement("a",{href:r,target:"_blank",rel:"noreferrer noopener"},e.a.createElement(F.a,{color:"volcano",style:{cursor:"pointer"}},e.a.createElement(Oe.a,null)," Update available!")):e.a.createElement(F.a,{color:"volcano"},e.a.createElement(Oe.a,null)," Update available!"))}try{Ue.displayName="UpdateAvailable",Ue.__docgenInfo={description:"",displayName:"UpdateAvailable",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},tag:{defaultValue:null,description:"",name:"tag",required:!0,type:{name:"string"}},latestTag:{defaultValue:null,description:"",name:"latestTag",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"]={docgenInfo:Ue.__docgenInfo,name:"UpdateAvailable",path:"frontend/src/scenes/plugins/plugin/UpdateAvailable.tsx#UpdateAvailable"})}catch(l){}var ul=o("./frontend/src/lib/components/LinkButton.tsx"),we=function(n){var t=n.updateStatus,a=n.pluginId,r=n.rearranging,s=Object(f.useActions)(p.b),i=s.editPlugin,c=s.updatePlugin,d=Object(f.useValues)(p.b),u=d.pluginsUpdating;return e.a.createElement(E.a,{type:t!=null&&t.updated?"default":"primary",className:"padding-under-500",onClick:function(){return t!=null&&t.updated?i(a):c(a)},loading:u.includes(a),icon:t!=null&&t.updated?e.a.createElement(Ye.a,null):e.a.createElement(Oe.a,null),disabled:r,"data-attr":"plugin-update"},e.a.createElement("span",{className:"show-over-500"},t!=null&&t.updated?"Updated":"Update"))};try{we.displayName="PluginUpdateButton",we.__docgenInfo={description:"",displayName:"PluginUpdateButton",props:{updateStatus:{defaultValue:null,description:"",name:"updateStatus",required:!0,type:{name:"PluginUpdateStatusType | undefined"}},pluginId:{defaultValue:null,description:"",name:"pluginId",required:!0,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"]={docgenInfo:we.__docgenInfo,name:"PluginUpdateButton",path:"frontend/src/scenes/plugins/plugin/PluginUpdateButton.tsx#PluginUpdateButton"})}catch(l){}function ze(l){var n=l.url,t=l.disabled,a=t===void 0?!1:t;return e.a.createElement(ee.b,null,e.a.createElement(V.a,{title:"About"},e.a.createElement(ul.a,{to:n,target:"_blank",rel:"noopener noreferrer",disabled:a},e.a.createElement(tl.a,null))))}function de(l){var n,t=l.plugin,a=l.error,r=l.maintainer,s=l.showUpdateButton,i=l.order,c=l.maxOrder,d=l.rearranging,u=l.DragColumn,m=u===void 0?function(ae){var We=ae.children;return e.a.createElement(O.a,{className:"order-handle"},We)}:u,y=l.unorderedPlugin,v=y===void 0?!1:y,T=t.name,A=t.description,b=t.url,S=t.plugin_type,h=t.pluginConfig,j=t.tag,R=t.latest_tag,_=t.id,x=t.updateStatus,Te=t.hasMoved,ge=t.is_global,k=t.organization_id,C=t.organization_name,U=Object(f.useActions)(p.b),G=U.editPlugin,pe=U.toggleEnabled,Ae=U.installPlugin,xe=U.resetPluginConfigError,fe=U.rearrange,g=U.showPluginLogs,P=U.showPluginMetrics,L=Object(f.useValues)(p.b),K=L.loading,N=L.installingPluginUrl,le=L.checkingForUpdates,te=L.pluginUrlToMaintainer,W=Object(f.useValues)(ue.a),X=W.user,Q=r||t.url&&te[t.url],Ge=r||te[t.url||""];return e.a.createElement(O.a,{style:{width:"100%",marginBottom:20},className:"plugins-scene-plugin-card-col".concat(d?" rearranging":""),"data-attr":"plugin-card-".concat(h?"installed":"available")},e.a.createElement(Ee.a,{className:"plugins-scene-plugin-card"},e.a.createElement(I.a,{align:"middle",className:"plugin-card-row"},typeof i=="number"&&typeof c=="number"?e.a.createElement(m,null,e.a.createElement("div",{className:"arrow".concat(i===1?" hide":"")},e.a.createElement(jn.a,null)),e.a.createElement("div",null,e.a.createElement(F.a,{color:Te?"#bd0225":"#555",onClick:fe},i)),e.a.createElement("div",{className:"arrow".concat(i===c?" hide":"")},e.a.createElement(jn.a,null))):null,v?e.a.createElement(V.a,{title:"This plugin does not do any processing in order.",placement:"topRight"},e.a.createElement(O.a,null,e.a.createElement(F.a,{color:"#555"},"-"))):null,h&&e.a.createElement(O.a,null,e.a.createElement(Qe.a,{placement:"topLeft",title:"Are you sure you wish to ".concat(h.enabled?"disable":"enable"," this plugin?"),onConfirm:function(){return h.id?pe({id:h.id,enabled:!h.enabled}):G(_||null,{__enabled:!0})},okText:"Yes",cancelText:"No",disabled:d},e.a.createElement(Xe.a,{checked:(n=h.enabled)!==null&&n!==void 0?n:!1,disabled:d}))),e.a.createElement(O.a,{className:h?"hide-plugin-image-below-500":""},e.a.createElement(be,{pluginType:S,url:b})),e.a.createElement(O.a,{style:{flex:1}},e.a.createElement("div",null,e.a.createElement("strong",{style:{marginRight:8}},T),Q&&e.a.createElement(Ne,{isCommunity:Ge==="community"}),h!=null&&h.error?e.a.createElement(Pe,{error:h.error,reset:function(){return xe((h==null?void 0:h.id)||0)}}):a?e.a.createElement(Pe,{error:a}):null,ge&&e.a.createElement(F.a,{color:"blue"},e.a.createElement(Ze.a,null)," Managed by ",C),Object(D.c)(X==null?void 0:X.organization,k)&&e.a.createElement(e.a.Fragment,null,b!=null&&b.startsWith("file:")?e.a.createElement(ye,{url:b,title:"Local"}):null,x!=null&&x.error?e.a.createElement(F.a,{color:"red"},e.a.createElement(al.a,null)," Error checking for updates"):le&&!x&&S!==B.a.Source&&!(b!=null&&b.startsWith("file:"))?e.a.createElement(F.a,{color:"blue"},e.a.createElement(vn.a,null)," Checking for updates\u2026"):b&&R&&j?j===R?e.a.createElement(F.a,{color:"green"},e.a.createElement(Ye.a,null)," Up to date"):e.a.createElement(Ue,{url:b,tag:j,latestTag:R}):null,S===B.a.Source?e.a.createElement(he,null):null)),e.a.createElement("div",null,Object(se.y)(A))),e.a.createElement(O.a,null,e.a.createElement(ee.b,null,b&&e.a.createElement(ze,{url:b,disabled:d}),s&&_?e.a.createElement(we,{updateStatus:x,pluginId:_,rearranging:d}):_?e.a.createElement(e.a.Fragment,null,Object.keys(t.metrics||{}).length>0?e.a.createElement(ee.b,null,e.a.createElement(V.a,{title:"Metrics"},e.a.createElement(E.a,{onClick:function(){return P(_)}},e.a.createElement(ol.a,null)))):null,e.a.createElement(V.a,{title:h!=null&&h.id?"Logs":"Logs \u2013 enable the plugin for the first time to view them"},e.a.createElement(E.a,{className:"padding-under-500",disabled:d||!(h!=null&&h.id),onClick:function(){return g(_)},"data-attr":"plugin-logs"},e.a.createElement(sl.a,null))),e.a.createElement(V.a,{title:"Configure"},e.a.createElement(E.a,{type:"primary",className:"padding-under-500",disabled:d,onClick:function(){return G(_)},"data-attr":"plugin-configure"},e.a.createElement(un.a,null)))):_?null:e.a.createElement(E.a,{type:"primary",className:"padding-under-500",loading:K&&N===b,disabled:K&&N!==b,onClick:b?function(){return Ae(b,B.a.Repository)}:void 0,icon:e.a.createElement(Oe.a,null),"data-attr":"plugin-install"},e.a.createElement("span",{className:"show-over-500"},"Install")))))))}try{ze.displayName="PluginAboutButton",ze.__docgenInfo={description:"",displayName:"PluginAboutButton",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"]={docgenInfo:ze.__docgenInfo,name:"PluginAboutButton",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginAboutButton"})}catch(l){}try{de.displayName="PluginCard",de.__docgenInfo={description:"",displayName:"PluginCard",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"Partial<PluginTypeWithConfig>"}},pluginConfig:{defaultValue:null,description:"",name:"pluginConfig",required:!1,type:{name:"PluginConfigType"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"PluginErrorType"}},maintainer:{defaultValue:null,description:"",name:"maintainer",required:!1,type:{name:"string"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:{value:'({ children }) => <Col className="order-handle">{children}</Col>'},description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"]={docgenInfo:de.__docgenInfo,name:"PluginCard",path:"frontend/src/scenes/plugins/plugin/PluginCard.tsx#PluginCard"})}catch(l){}var Y=o("./frontend/src/lib/components/PageHeader.tsx"),Se=o("./node_modules/antd/es/skeleton/index.js");function hn(){return e.a.createElement(e.a.Fragment,null,[1,2,3].map(function(l){return e.a.createElement(O.a,{key:l,style:{marginBottom:20,width:"100%"},className:"plugins-scene-plugin-card-col"},e.a.createElement(Ee.a,{className:"plugins-scene-plugin-card"},e.a.createElement(I.a,{align:"middle",className:"plugin-card-row"},e.a.createElement(O.a,{className:"hide-plugin-image-below-500"},e.a.createElement(Se.a.Avatar,{active:!0,size:"large",shape:"square"})),e.a.createElement(O.a,{style:{flex:1}},e.a.createElement(Se.a,{title:!1,paragraph:{rows:2},active:!0})),e.a.createElement(O.a,null,e.a.createElement("span",{className:"show-over-500"},e.a.createElement(Se.a.Button,{style:{width:100}})),e.a.createElement("span",{className:"hide-over-500"},e.a.createElement(Se.a.Button,{style:{width:32}}))))))}))}function En(){var l=Object(f.useValues)(p.b),n=l.searchTerm,t=l.rearranging,a=Object(f.useActions)(p.b),r=a.setSearchTerm;return e.a.createElement(re.a.Search,{"data-attr":"plugins-search",placeholder:"Start typing to search for a plugin",autoFocus:!0,value:n||"",onChange:function(i){return r(i.target.value)},enterButton:!0,allowClear:!0,style:{maxWidth:400,marginTop:5,marginBottom:10},disabled:t})}var Ce=o("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),ce=o("./node_modules/@ant-design/icons/es/icons/CaretRightOutlined.js"),M;(function(l){l.Official="official",l.Community="community"})(M||(M={}));function dl(){var l=Object(f.useValues)(p.b),n=l.repositoryLoading,t=l.filteredUninstalledPlugins,a=Object(J.useState)([M.Official,M.Community]),r=w()(a,2),s=r[0],i=r[1],c=t.filter(function(m){return m.maintainer==="official"}),d=t.filter(function(m){return m.maintainer==="community"}),u=function(y){if(s.includes(y)){i(s.filter(function(v){return y!==v}));return}i([].concat(ve()(s),[y]))};return e.a.createElement("div",null,e.a.createElement(Y.b,{subtitle:"Plugin Repository"}),e.a.createElement(En,null),e.a.createElement("div",null,(!n||t.length>0)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(I.a,{gutter:16,style:{marginTop:16,display:"block"}},e.a.createElement("div",{className:"plugins-repository-tab-section-header",onClick:function(){return u(M.Official)}},e.a.createElement(Y.b,{subtitle:e.a.createElement(e.a.Fragment,null,s.includes(M.Official)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Official Plugins (".concat(c.length,")"))})),s.includes(M.Official)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(O.a,{span:24},c.length>0?"Official plugins are built and maintained by the PostHog team.":"You have already installed all official plugins!"),e.a.createElement("br",null),c.map(function(m){return e.a.createElement(de,{key:m.url,plugin:{name:m.name,url:m.url,description:m.description},maintainer:m.maintainer})}))),e.a.createElement(I.a,{gutter:16,style:{marginTop:16,display:"block"}},e.a.createElement("div",{className:"plugins-repository-tab-section-header",onClick:function(){return u(M.Community)}},e.a.createElement(Y.b,{subtitle:e.a.createElement(e.a.Fragment,null,s.includes(M.Community)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Community Plugins (".concat(d.length,")"))})),s.includes(M.Community)&&e.a.createElement(e.a.Fragment,null,e.a.createElement(O.a,{span:24},d.length>0?e.a.createElement("span",null,"Community plugins are not built nor maintained by the PostHog team."," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build",target:"_blank",rel:"noopener"},"Anyone, including you, can build a plugin.")):"You have already installed all community plugins!"),e.a.createElement("br",null),d.map(function(m){return e.a.createElement(de,{key:m.url,plugin:{name:m.name,url:m.url,description:m.description},maintainer:m.maintainer})}))))),n&&t.length===0&&e.a.createElement(I.a,{gutter:16},e.a.createElement(hn,null)))}var cl=o("./node_modules/antd/es/checkbox/index.js"),ml=o("./node_modules/antd/lib/input/Search.js"),gl=o.n(ml),pl=o("./frontend/src/lib/components/ResizableTable/index.tsx"),me=o("./frontend/src/types.ts"),On=o("./frontend/src/scenes/plugins/plugin/pluginLogsLogic.ts");function fl(l){var n;switch(l){case me.F.Debug:n="var(--muted)";break;case me.F.Log:n="var(--text-default)";break;case me.F.Info:n="var(--blue)";break;case me.F.Warn:n="var(--warning)";break;case me.F.Error:n="var(--danger)";break;default:break}return e.a.createElement("span",{style:{color:n}},l)}var jl=[{title:"Timestamp",key:"timestamp",dataIndex:"timestamp",span:3,render:function(n){return Object(bn.a)(n).format("YYYY-MM-DD HH:mm:ss.SSS UTC")}},{title:"Source",key:"source",dataIndex:"source",span:1},{title:"Type",key:"type",dataIndex:"type",span:1,render:fl},{title:"Message",key:"message",dataIndex:"message",span:6}];function Be(l){var n=l.pluginConfigId,t=Object(On.b)({pluginConfigId:n}),a=Object(f.useValues)(t),r=a.pluginLogs,s=a.pluginLogsLoading,i=a.pluginLogsBackground,c=a.isThereMoreToLoad,d=a.pluginLogsTypes,u=Object(f.useActions)(t),m=u.revealBackground,y=u.loadPluginLogsMore,v=u.setPluginLogsTypes,T=u.setSearchTerm;return e.a.createElement(ee.b,{direction:"vertical",style:{flexGrow:1},className:"ph-no-capture plugin-logs"},e.a.createElement(I.a,null,e.a.createElement(gl.a,{loading:s,onSearch:T,placeholder:"Search for messages containing\u2026",allowClear:!0})),e.a.createElement(I.a,null,e.a.createElement(ee.b,null,e.a.createElement("span",null,"Show logs of type:\xA0"),e.a.createElement(cl.a.Group,{options:Object.values(me.F),value:d,onChange:v,style:{marginLeft:"8px"}}))),e.a.createElement(I.a,null,e.a.createElement(E.a,{onClick:m,loading:s,style:{flexGrow:1},disabled:!i.length,icon:e.a.createElement(vn.a,null)},i.length?"Load ".concat(Object(se.pb)(i.length,"newer entry","newer entries")):"No new entries")),e.a.createElement(pl.b,{dataSource:r,columns:jl,loading:s,size:"small",className:"ph-no-capture",rowKey:"id",style:{flexGrow:1},pagination:{pageSize:200,hideOnSinglePage:!0}}),!!r.length&&e.a.createElement(I.a,null,e.a.createElement(E.a,{onClick:y,loading:s,style:{flexGrow:1},disabled:!c},c?"Load up to ".concat(On.a," older entries"):"No older entries")))}try{Be.displayName="PluginLogs",Be.__docgenInfo={description:"",displayName:"PluginLogs",props:{pluginConfigId:{defaultValue:null,description:"",name:"pluginConfigId",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"]={docgenInfo:Be.__docgenInfo,name:"PluginLogs",path:"frontend/src/scenes/plugins/plugin/PluginLogs.tsx#PluginLogs"})}catch(l){}var vl=o("./node_modules/antd/es/drawer/index.js");function bl(){var l=Object(f.useValues)(p.b),n=l.showingLogsPlugin,t=l.lastShownLogsPlugin,a=Object(f.useActions)(p.b),r=a.hidePluginLogs;return e.a.createElement(vl.a,{visible:!!n,onClose:r,width:"min(90vw, 80rem)",title:"Viewing Plugin Logs: ".concat(t==null?void 0:t.name),placement:"left",destroyOnClose:!0},!!t&&e.a.createElement(Be,{pluginConfigId:t.pluginConfig.id}))}var yl=o("./node_modules/antd/es/empty/index.js");function hl(){var l=Object(f.useActions)(p.b),n=l.setPluginTab,t=Object(f.useValues)(p.b),a=t.loading,r=Object(f.useValues)(ue.a),s=r.user;return e.a.createElement(e.a.Fragment,null,a?e.a.createElement(e.a.Fragment,null,e.a.createElement(Y.b,{subtitle:e.a.createElement(e.a.Fragment,null," ",e.a.createElement(ce.a,null)," ","Enabled plugins"," "),buttons:e.a.createElement(Se.a.Button,{style:{width:150}})}),e.a.createElement(hn,null)):e.a.createElement(e.a.Fragment,null,e.a.createElement(Y.b,{subtitle:"Installed plugins"}),e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},e.a.createElement(O.a,{span:24},e.a.createElement(yl.a,{description:e.a.createElement("span",null,"You haven't installed any plugins yet")},Object(D.b)(s==null?void 0:s.organization)&&e.a.createElement(E.a,{type:"default",onClick:function(){return n(B.b.Repository)}},"Open the Plugin Repository"))))))}function ne(l){var n=l.plugin,t=l.showUpdateButton,a=l.order,r=l.maxOrder,s=l.rearranging,i=l.DragColumn,c=l.unorderedPlugin,d=c===void 0?!1:c;return e.a.createElement(de,{key:n.id,plugin:n,showUpdateButton:t,order:a,maxOrder:r,rearranging:s,DragColumn:i,unorderedPlugin:d})}try{ne.displayName="InstalledPlugin",ne.__docgenInfo={description:"",displayName:"InstalledPlugin",props:{plugin:{defaultValue:null,description:"",name:"plugin",required:!0,type:{name:"PluginTypeWithConfig"}},showUpdateButton:{defaultValue:null,description:"",name:"showUpdateButton",required:!1,type:{name:"boolean"}},order:{defaultValue:null,description:"",name:"order",required:!1,type:{name:"number"}},maxOrder:{defaultValue:null,description:"",name:"maxOrder",required:!1,type:{name:"number"}},rearranging:{defaultValue:null,description:"",name:"rearranging",required:!1,type:{name:"boolean"}},DragColumn:{defaultValue:null,description:"",name:"DragColumn",required:!1,type:{name:"ComponentClass<{}, any> | FC<{}>"}},unorderedPlugin:{defaultValue:{value:"false"},description:"",name:"unorderedPlugin",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"]={docgenInfo:ne.__docgenInfo,name:"InstalledPlugin",path:"frontend/src/scenes/plugins/tabs/installed/InstalledPlugin.tsx#InstalledPlugin"})}catch(l){}function El(){var l=Object(f.useValues)(p.b),n=l.filteredDisabledPlugins,t=l.sectionsOpen,a=l.disabledPlugins,r=Object(f.useActions)(p.b),s=r.toggleSectionOpen;return a.length===0?e.a.createElement(e.a.Fragment,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return s(p.a.Disabled)}},e.a.createElement(Y.b,{subtitle:e.a.createElement(e.a.Fragment,null,t.includes(p.a.Disabled)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Installed plugins (".concat(n.length,")"))})),t.includes(p.a.Disabled)?e.a.createElement(e.a.Fragment,null,n.length>0?e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},n.map(function(i){return e.a.createElement(ne,{key:i.id,plugin:i})})):e.a.createElement("p",{style:{margin:10}},"No plugins match your search.")):null)}var Ol=o("./node_modules/@ant-design/icons/es/icons/SyncOutlined.js");function Pl(){var l=Object(f.useActions)(p.b),n=l.checkForUpdates,t=l.toggleSectionOpen,a=Object(f.useValues)(p.b),r=a.sectionsOpen,s=Object(f.useValues)(ue.a),i=s.user,c=Object(f.useValues)(p.b),d=c.filteredPluginsNeedingUpdates,u=c.pluginsNeedingUpdates,m=c.checkingForUpdates,y=c.installedPluginUrls,v=c.updateStatus,T=c.rearranging,A=c.hasUpdatablePlugins,b=Object(D.c)(i==null?void 0:i.organization)&&A&&e.a.createElement(E.a,{type:"default",icon:u.length>0?e.a.createElement(Ol.a,null):e.a.createElement(Oe.a,null),onClick:function(h){h.stopPropagation(),n(!0)},loading:m},m?"Checking plugin ".concat(Object.keys(v).length+1," out of ").concat(Object.keys(y).length):u.length>0?"Check again for updates":"Check for updates");return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return t(p.a.Upgrade)}},e.a.createElement(Y.b,{subtitle:e.a.createElement(e.a.Fragment,null,r.includes(p.a.Upgrade)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Plugins to update (".concat(d.length,")")),buttons:!T&&r.includes(p.a.Upgrade)&&b})),r.includes(p.a.Upgrade)?e.a.createElement(e.a.Fragment,null,u.length>0?e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},d.length>0?e.a.createElement(e.a.Fragment,null,d.map(function(S){return e.a.createElement(ne,{key:S.id,plugin:S,showUpdateButton:!0})})):e.a.createElement("p",{style:{margin:10}},"No plugins match your search.")):e.a.createElement("p",{style:{margin:10}},"All your plugins are up to date. Great work!")):null)}var it=o("./node_modules/core-js/modules/es.array.splice.js"),Sl=o("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),Cl=o("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),Ke=o("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js");function Tl(l,n){var t;if(typeof Symbol=="undefined"||l[Symbol.iterator]==null){if(Array.isArray(l)||(t=Al(l))||n&&l&&typeof l.length=="number"){t&&(l=t);var a=0,r=function(){};return{s:r,n:function(){return a>=l.length?{done:!0}:{done:!1,value:l[a++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,i=!1,c;return{s:function(){t=l[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){i=!0,c=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(i)throw c}}}}function Al(l,n){if(!!l){if(typeof l=="string")return Pn(l,n);var t=Object.prototype.toString.call(l).slice(8,-1);if(t==="Object"&&l.constructor&&(t=l.constructor.name),t==="Map"||t==="Set")return Array.from(l);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pn(l,n)}}function Pn(l,n){(n==null||n>l.length)&&(n=l.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=l[t];return a}var xl=Object(Ke.c)(function(l){var n=l.children;return e.a.createElement(O.a,{className:"order-handle"},n)}),kl=Object(Ke.b)(function(l){var n=l.plugin,t=l.order,a=l.maxOrder,r=l.rearranging;return e.a.createElement(ne,{plugin:n,order:t,maxOrder:a,rearranging:r,DragColumn:xl})}),Il=Object(Ke.a)(function(l){var n=l.children;return e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},n)});function _l(){var l=Object(f.useValues)(ue.a),n=l.user,t=Object(f.useActions)(p.b),a=t.rearrange,r=t.setTemporaryOrder,s=t.cancelRearranging,i=t.savePluginOrders,c=t.makePluginOrderSaveable,d=t.toggleSectionOpen,u=Object(f.useValues)(p.b),m=u.enabledPlugins,y=u.filteredEnabledPlugins,v=u.sortableEnabledPlugins,T=u.unsortableEnabledPlugins,A=u.rearranging,b=u.loading,S=u.temporaryOrder,h=u.pluginOrderSaveable,j=u.searchTerm,R=u.sectionsOpen,_=Object(D.a)(n==null?void 0:n.organization)&&v.length>1,x=A?e.a.createElement(e.a.Fragment,null,e.a.createElement(E.a,{type:"primary",icon:e.a.createElement(Sl.a,null),loading:b,onClick:function(C){C.stopPropagation(),i(S)},disabled:!h},"Save order"),e.a.createElement(E.a,{type:"default",icon:e.a.createElement(dn.a,null),onClick:function(C){s(),C.stopPropagation()}},"Cancel")):e.a.createElement(V.a,{title:m.length<=1?"At least two plugins need to be enabled for reordering.":e.a.createElement(e.a.Fragment,null,j?"Editing the order of plugins is disabled when searching.":e.a.createElement(e.a.Fragment,null,"Order matters because event processing with plugins works like a pipe: the event is processed by every enabled plugin ",e.a.createElement("b",null,"in sequence"),".")),placement:"top"},e.a.createElement(E.a,{icon:e.a.createElement(Cl.a,null),onClick:function(C){C.stopPropagation(),a()},disabled:!!j||v.length<=1},"Edit order")),Te=function(C){var U,G=C.oldIndex,pe=C.newIndex;if(G!==pe){var Ae=function(te,W,X){var Q=ve()(te);return Array.prototype.splice.call(Q,X,0,Array.prototype.splice.call(Q,W,1)[0]),Q.map(function(Ge,ae){var We=Ge.id;return{id:We,order:ae+1}})},xe=(U=m[G])===null||U===void 0?void 0:U.id,fe={},g=Tl(Ae(m,G,pe)),P;try{for(g.s();!(P=g.n()).done;){var L=P.value,K=L.id,N=L.order;fe[K]=N}}catch(le){g.e(le)}finally{g.f()}A||a(),r(fe,xe)}},ge=function(){return e.a.createElement("div",{className:"plugins-installed-tab-section-header",onClick:function(){return d(p.a.Enabled)}},e.a.createElement(Y.b,{subtitle:e.a.createElement(e.a.Fragment,null,R.includes(p.a.Enabled)?e.a.createElement(Ce.a,null):e.a.createElement(ce.a,null)," Enabled plugins (".concat(y.length,")"),A&&R.includes(p.a.Enabled)&&e.a.createElement(F.a,{color:"red",style:{fontWeight:"normal",marginLeft:10}},"Reordering in progress")),buttons:e.a.createElement(ee.b,null,R.includes(p.a.Enabled)&&x)}))};return m.length===0?e.a.createElement(e.a.Fragment,null,e.a.createElement(ge,null),R.includes(p.a.Enabled)&&e.a.createElement("p",{style:{margin:10}},"No plugins enabled.")):e.a.createElement(e.a.Fragment,null,e.a.createElement(ge,null),R.includes(p.a.Enabled)&&e.a.createElement(e.a.Fragment,null,v.length===0&&T.length===0&&e.a.createElement("p",{style:{margin:10}},"No plugins match your search."),_||A?e.a.createElement(e.a.Fragment,null,v.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement(Il,{useDragHandle:!0,onSortEnd:Te,onSortOver:c},v.map(function(k,C){return e.a.createElement(kl,{key:k.id,plugin:k,index:C,order:C+1,maxOrder:m.length,rearranging:A})})))):e.a.createElement(I.a,{gutter:16,style:{marginTop:16}},v.length>0&&e.a.createElement(e.a.Fragment,null,v.map(function(k,C){return e.a.createElement(ne,{key:k.id,plugin:k,order:C+1,maxOrder:y.length})}))),T.map(function(k){return e.a.createElement(ne,{key:k.id,plugin:k,maxOrder:m.length,rearranging:A,unorderedPlugin:!0})})))}function Sn(){var l=Object(f.useValues)(p.b),n=l.installedPlugins;return n.length===0?e.a.createElement(hl,null):e.a.createElement(e.a.Fragment,null,e.a.createElement("div",null,e.a.createElement(En,null),e.a.createElement(Pl,null),e.a.createElement(_l,null),e.a.createElement(El,null)),e.a.createElement(bl,null))}var Cn=o("./node_modules/antd/es/tabs/index.js"),Ll=o("./node_modules/antd/es/alert/index.js"),Rl=o("./node_modules/antd/lib/typography/Title.js"),He=o.n(Rl),Fl=o("./node_modules/antd/lib/typography/Paragraph.js"),$e=o.n(Fl);function Vl(){var l=Object(f.useValues)(p.b),n=l.sourcePluginName,t=l.pluginError,a=l.loading,r=Object(f.useActions)(p.b),s=r.setSourcePluginName,i=r.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(Ee.a,null,e.a.createElement(He.a,{level:5},"Plugin Editor"),e.a.createElement($e.a,null,"Write your plugin directly in PostHog."," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/overview",target:"_blank"},"Read the documentation for more information!")),e.a.createElement(I.a,{style:{width:"100%"},gutter:16},e.a.createElement(O.a,{style:{flex:1}},e.a.createElement(re.a,{value:n,disabled:a,onChange:function(d){return s(d.target.value)},placeholder:'For example: "Hourly Weather Sync Plugin"'})),e.a.createElement(O.a,null,e.a.createElement(E.a,{disabled:a||!n,loading:a,type:"default",onClick:function(){return i(n,B.a.Source)}},"Start Coding"))),t?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},t):null))}function Nl(){var l=Object(f.useValues)(p.b),n=l.customPluginUrl,t=l.pluginError,a=l.loading,r=Object(f.useActions)(p.b),s=r.setCustomPluginUrl,i=r.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(Ee.a,null,e.a.createElement(He.a,{level:5},"Install from GitHub, GitLab or npm"),e.a.createElement($e.a,null,"To install a third-party or custom plugin, paste its URL below. For"," ",e.a.createElement("a",{href:"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token",target:"_blank",rel:"noopener noreferrer"},"GitHub"),", ",e.a.createElement("a",{href:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",target:"_blank",rel:"noopener noreferrer"},"GitLab")," and ",e.a.createElement("a",{href:"https://docs.npmjs.com/creating-and-viewing-access-tokens",target:"_blank",rel:"noopener noreferrer"},"npm")," ","private repositories, append ",e.a.createElement("code",null,"?private_token=TOKEN")," to the end of the URL.",e.a.createElement("br",null),e.a.createElement("b",{className:"text-warning"},"Warning: Only install plugins from trusted sources.")),e.a.createElement(I.a,{style:{width:"100%"},gutter:16},e.a.createElement(O.a,{style:{flex:1}},e.a.createElement(re.a,{value:n,disabled:a,onChange:function(d){return s(d.target.value)},placeholder:"https://github.com/user/repo"})),e.a.createElement(O.a,null,e.a.createElement(E.a,{disabled:a||!n,loading:a,type:"default",onClick:function(){return i(n,B.a.Custom)}},"Fetch and install"))),t?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},t):null))}function Ul(){var l=Object(f.useValues)(p.b),n=l.localPluginUrl,t=l.pluginError,a=l.loading,r=Object(f.useActions)(p.b),s=r.setLocalPluginUrl,i=r.installPlugin;return e.a.createElement("div",{style:{marginTop:16}},e.a.createElement(Ee.a,null,e.a.createElement(He.a,{level:5},"Install Local Plugin"),e.a.createElement($e.a,null,"To install a local plugin from this computer/server, give its full path below."),e.a.createElement(I.a,{style:{width:"100%"},gutter:16},e.a.createElement(O.a,{style:{flex:1}},e.a.createElement(re.a,{value:n,disabled:a,onChange:function(d){return s(d.target.value)},placeholder:"/var/posthog/plugins/helloworldplugin"})),e.a.createElement(O.a,null,e.a.createElement(E.a,{disabled:a||!n,loading:a,type:"default",onClick:function(){return i(n,B.a.Local)}},"Install"))),t?e.a.createElement("p",{style:{color:"var(--red)",marginTop:10}},t):null))}function wl(){var l=Object(f.useValues)(rn.a),n=l.preflight,t=Object(f.useActions)(p.b),a=t.setPluginTab;return e.a.createElement(e.a.Fragment,null,e.a.createElement(Ll.a,{message:"Advanced Features Ahead",description:e.a.createElement(e.a.Fragment,null,"Create and install your ",e.a.createElement("b",null,"own plugins")," or plugins from ",e.a.createElement("b",null,"third-parties"),". If you're looking for officially supported plugins, try the"," ",e.a.createElement("a",{href:"#",onClick:function(s){s.preventDefault(),a(B.b.Repository)}},"Plugin Repository"),"."),type:"warning",showIcon:!0}),e.a.createElement(Y.b,{subtitle:"Advanced Options"}),e.a.createElement(Vl,null),e.a.createElement(Nl,null),n&&!n.cloud&&e.a.createElement(Ul,null))}var zl={component:Tn,logic:p.b};function Tn(){var l=Object(f.useValues)(ue.a),n=l.user,t=Object(f.useValues)(p.b),a=t.pluginTab,r=Object(f.useActions)(p.b),s=r.setPluginTab,i=Cn.a.TabPane;return Object(J.useEffect)(function(){Object(D.d)(n==null?void 0:n.organization)||(window.location.href="/")},[n]),!n||!Object(D.d)(n==null?void 0:n.organization)?null:e.a.createElement("div",{className:"plugins-scene"},e.a.createElement(Y.a,{title:"Plugins",caption:e.a.createElement(e.a.Fragment,null,"Plugins enable you to extend PostHog's core data processing functionality.",e.a.createElement("br",null),"Make use of verified plugins from the"," ",e.a.createElement("a",{href:"https://posthog.com/plugins",target:"_blank"},"Plugin Library")," ","\u2013 or"," ",e.a.createElement("a",{href:"https://posthog.com/docs/plugins/build",target:"_blank"},"build your own"),".")}),Object(D.c)(n.organization)?e.a.createElement(Cn.a,{activeKey:a,onChange:function(d){return s(d)}},e.a.createElement(i,{tab:"Installed",key:B.b.Installed},e.a.createElement(Sn,null)),Object(D.b)(n.organization)&&e.a.createElement(i,{tab:"Repository",key:B.b.Repository},e.a.createElement(dl,null)),e.a.createElement(i,{tab:"Advanced",key:B.b.Advanced},e.a.createElement(wl,null))):e.a.createElement(Sn,null),e.a.createElement(ll,null))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/plugins/Plugins.scss":function(je,Z,o){var oe=o("./node_modules/css-loader/dist/runtime/api.js");Z=oe(!1),Z.push([je.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.plugins-scene{padding-bottom:60px}.plugins-installed-tab-section-header:hover,.plugins-repository-tab-section-header:hover{cursor:pointer}.plugins-repository-tab-section-header{margin-left:5px}.plugin-capabilities-tag{cursor:default}.plugins-scene-plugin-card>.ant-card-body{padding:15px}.plugins-scene-plugin-card .plugin-card-row>.ant-col{margin-right:14px}.plugins-scene-plugin-card .plugin-card-row>.ant-col:last-child{margin-right:0}.plugins-scene-plugin-card a.plugin-title-link{color:var(--color-text)}.plugins-scene-plugin-card a.plugin-title-link:hover{text-decoration:underline}.plugins-scene-plugin-card .plugin-image{width:60px;height:60px;display:flex;justify-content:center;align-items:center;margin-left:auto;margin-right:auto;border:none;padding:4px}.plugins-scene-plugin-card .order-handle{cursor:move;text-align:center;height:100%;margin-top:-10px;margin-bottom:-10px}.plugins-scene-plugin-card .order-handle .ant-tag{margin-right:0;cursor:move}.plugins-scene-plugin-card .order-handle .arrow{color:#888;height:19px}.plugins-scene-plugin-card .order-handle .arrow.hide{visibility:hidden}.plugins-scene-plugin-card .hide-over-500{display:none}@media(max-width:500px){.plugins-scene-plugin-card .show-over-500{display:none}.plugins-scene-plugin-card .hide-over-500{display:inline-block}.plugins-scene-plugin-card button.ant-btn.padding-under-500{padding:4px 8px}.plugins-scene-plugin-card .hide-plugin-image-below-500{display:none}}.plugins-popconfirm{z-index:1001}.plugin-job-json-editor{border:1px solid #efefef;padding:10px}.plugin-run-job-button{color:#77b96c;cursor:pointer}.plugin-run-job-button-disabled{color:#9a9a9a;cursor:default}",""]),je.exports=Z},"./node_modules/moment/locale sync recursive ^\\.\\/.*$":function(je,Z,o){var oe={"./af":"./node_modules/moment/locale/af.js","./af.js":"./node_modules/moment/locale/af.js","./ar":"./node_modules/moment/locale/ar.js","./ar-dz":"./node_modules/moment/locale/ar-dz.js","./ar-dz.js":"./node_modules/moment/locale/ar-dz.js","./ar-kw":"./node_modules/moment/locale/ar-kw.js","./ar-kw.js":"./node_modules/moment/locale/ar-kw.js","./ar-ly":"./node_modules/moment/locale/ar-ly.js","./ar-ly.js":"./node_modules/moment/locale/ar-ly.js","./ar-ma":"./node_modules/moment/locale/ar-ma.js","./ar-ma.js":"./node_modules/moment/locale/ar-ma.js","./ar-sa":"./node_modules/moment/locale/ar-sa.js","./ar-sa.js":"./node_modules/moment/locale/ar-sa.js","./ar-tn":"./node_modules/moment/locale/ar-tn.js","./ar-tn.js":"./node_modules/moment/locale/ar-tn.js","./ar.js":"./node_modules/moment/locale/ar.js","./az":"./node_modules/moment/locale/az.js","./az.js":"./node_modules/moment/locale/az.js","./be":"./node_modules/moment/locale/be.js","./be.js":"./node_modules/moment/locale/be.js","./bg":"./node_modules/moment/locale/bg.js","./bg.js":"./node_modules/moment/locale/bg.js","./bm":"./node_modules/moment/locale/bm.js","./bm.js":"./node_modules/moment/locale/bm.js","./bn":"./node_modules/moment/locale/bn.js","./bn-bd":"./node_modules/moment/locale/bn-bd.js","./bn-bd.js":"./node_modules/moment/locale/bn-bd.js","./bn.js":"./node_modules/moment/locale/bn.js","./bo":"./node_modules/moment/locale/bo.js","./bo.js":"./node_modules/moment/locale/bo.js","./br":"./node_modules/moment/locale/br.js","./br.js":"./node_modules/moment/locale/br.js","./bs":"./node_modules/moment/locale/bs.js","./bs.js":"./node_modules/moment/locale/bs.js","./ca":"./node_modules/moment/locale/ca.js","./ca.js":"./node_modules/moment/locale/ca.js","./cs":"./node_modules/moment/locale/cs.js","./cs.js":"./node_modules/moment/locale/cs.js","./cv":"./node_modules/moment/locale/cv.js","./cv.js":"./node_modules/moment/locale/cv.js","./cy":"./node_modules/moment/locale/cy.js","./cy.js":"./node_modules/moment/locale/cy.js","./da":"./node_modules/moment/locale/da.js","./da.js":"./node_modules/moment/locale/da.js","./de":"./node_modules/moment/locale/de.js","./de-at":"./node_modules/moment/locale/de-at.js","./de-at.js":"./node_modules/moment/locale/de-at.js","./de-ch":"./node_modules/moment/locale/de-ch.js","./de-ch.js":"./node_modules/moment/locale/de-ch.js","./de.js":"./node_modules/moment/locale/de.js","./dv":"./node_modules/moment/locale/dv.js","./dv.js":"./node_modules/moment/locale/dv.js","./el":"./node_modules/moment/locale/el.js","./el.js":"./node_modules/moment/locale/el.js","./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js","./en-ca":"./node_modules/moment/locale/en-ca.js","./en-ca.js":"./node_modules/moment/locale/en-ca.js","./en-gb":"./node_modules/moment/locale/en-gb.js","./en-gb.js":"./node_modules/moment/locale/en-gb.js","./en-ie":"./node_modules/moment/locale/en-ie.js","./en-ie.js":"./node_modules/moment/locale/en-ie.js","./en-il":"./node_modules/moment/locale/en-il.js","./en-il.js":"./node_modules/moment/locale/en-il.js","./en-in":"./node_modules/moment/locale/en-in.js","./en-in.js":"./node_modules/moment/locale/en-in.js","./en-nz":"./node_modules/moment/locale/en-nz.js","./en-nz.js":"./node_modules/moment/locale/en-nz.js","./en-sg":"./node_modules/moment/locale/en-sg.js","./en-sg.js":"./node_modules/moment/locale/en-sg.js","./eo":"./node_modules/moment/locale/eo.js","./eo.js":"./node_modules/moment/locale/eo.js","./es":"./node_modules/moment/locale/es.js","./es-do":"./node_modules/moment/locale/es-do.js","./es-do.js":"./node_modules/moment/locale/es-do.js","./es-mx":"./node_modules/moment/locale/es-mx.js","./es-mx.js":"./node_modules/moment/locale/es-mx.js","./es-us":"./node_modules/moment/locale/es-us.js","./es-us.js":"./node_modules/moment/locale/es-us.js","./es.js":"./node_modules/moment/locale/es.js","./et":"./node_modules/moment/locale/et.js","./et.js":"./node_modules/moment/locale/et.js","./eu":"./node_modules/moment/locale/eu.js","./eu.js":"./node_modules/moment/locale/eu.js","./fa":"./node_modules/moment/locale/fa.js","./fa.js":"./node_modules/moment/locale/fa.js","./fi":"./node_modules/moment/locale/fi.js","./fi.js":"./node_modules/moment/locale/fi.js","./fil":"./node_modules/moment/locale/fil.js","./fil.js":"./node_modules/moment/locale/fil.js","./fo":"./node_modules/moment/locale/fo.js","./fo.js":"./node_modules/moment/locale/fo.js","./fr":"./node_modules/moment/locale/fr.js","./fr-ca":"./node_modules/moment/locale/fr-ca.js","./fr-ca.js":"./node_modules/moment/locale/fr-ca.js","./fr-ch":"./node_modules/moment/locale/fr-ch.js","./fr-ch.js":"./node_modules/moment/locale/fr-ch.js","./fr.js":"./node_modules/moment/locale/fr.js","./fy":"./node_modules/moment/locale/fy.js","./fy.js":"./node_modules/moment/locale/fy.js","./ga":"./node_modules/moment/locale/ga.js","./ga.js":"./node_modules/moment/locale/ga.js","./gd":"./node_modules/moment/locale/gd.js","./gd.js":"./node_modules/moment/locale/gd.js","./gl":"./node_modules/moment/locale/gl.js","./gl.js":"./node_modules/moment/locale/gl.js","./gom-deva":"./node_modules/moment/locale/gom-deva.js","./gom-deva.js":"./node_modules/moment/locale/gom-deva.js","./gom-latn":"./node_modules/moment/locale/gom-latn.js","./gom-latn.js":"./node_modules/moment/locale/gom-latn.js","./gu":"./node_modules/moment/locale/gu.js","./gu.js":"./node_modules/moment/locale/gu.js","./he":"./node_modules/moment/locale/he.js","./he.js":"./node_modules/moment/locale/he.js","./hi":"./node_modules/moment/locale/hi.js","./hi.js":"./node_modules/moment/locale/hi.js","./hr":"./node_modules/moment/locale/hr.js","./hr.js":"./node_modules/moment/locale/hr.js","./hu":"./node_modules/moment/locale/hu.js","./hu.js":"./node_modules/moment/locale/hu.js","./hy-am":"./node_modules/moment/locale/hy-am.js","./hy-am.js":"./node_modules/moment/locale/hy-am.js","./id":"./node_modules/moment/locale/id.js","./id.js":"./node_modules/moment/locale/id.js","./is":"./node_modules/moment/locale/is.js","./is.js":"./node_modules/moment/locale/is.js","./it":"./node_modules/moment/locale/it.js","./it-ch":"./node_modules/moment/locale/it-ch.js","./it-ch.js":"./node_modules/moment/locale/it-ch.js","./it.js":"./node_modules/moment/locale/it.js","./ja":"./node_modules/moment/locale/ja.js","./ja.js":"./node_modules/moment/locale/ja.js","./jv":"./node_modules/moment/locale/jv.js","./jv.js":"./node_modules/moment/locale/jv.js","./ka":"./node_modules/moment/locale/ka.js","./ka.js":"./node_modules/moment/locale/ka.js","./kk":"./node_modules/moment/locale/kk.js","./kk.js":"./node_modules/moment/locale/kk.js","./km":"./node_modules/moment/locale/km.js","./km.js":"./node_modules/moment/locale/km.js","./kn":"./node_modules/moment/locale/kn.js","./kn.js":"./node_modules/moment/locale/kn.js","./ko":"./node_modules/moment/locale/ko.js","./ko.js":"./node_modules/moment/locale/ko.js","./ku":"./node_modules/moment/locale/ku.js","./ku.js":"./node_modules/moment/locale/ku.js","./ky":"./node_modules/moment/locale/ky.js","./ky.js":"./node_modules/moment/locale/ky.js","./lb":"./node_modules/moment/locale/lb.js","./lb.js":"./node_modules/moment/locale/lb.js","./lo":"./node_modules/moment/locale/lo.js","./lo.js":"./node_modules/moment/locale/lo.js","./lt":"./node_modules/moment/locale/lt.js","./lt.js":"./node_modules/moment/locale/lt.js","./lv":"./node_modules/moment/locale/lv.js","./lv.js":"./node_modules/moment/locale/lv.js","./me":"./node_modules/moment/locale/me.js","./me.js":"./node_modules/moment/locale/me.js","./mi":"./node_modules/moment/locale/mi.js","./mi.js":"./node_modules/moment/locale/mi.js","./mk":"./node_modules/moment/locale/mk.js","./mk.js":"./node_modules/moment/locale/mk.js","./ml":"./node_modules/moment/locale/ml.js","./ml.js":"./node_modules/moment/locale/ml.js","./mn":"./node_modules/moment/locale/mn.js","./mn.js":"./node_modules/moment/locale/mn.js","./mr":"./node_modules/moment/locale/mr.js","./mr.js":"./node_modules/moment/locale/mr.js","./ms":"./node_modules/moment/locale/ms.js","./ms-my":"./node_modules/moment/locale/ms-my.js","./ms-my.js":"./node_modules/moment/locale/ms-my.js","./ms.js":"./node_modules/moment/locale/ms.js","./mt":"./node_modules/moment/locale/mt.js","./mt.js":"./node_modules/moment/locale/mt.js","./my":"./node_modules/moment/locale/my.js","./my.js":"./node_modules/moment/locale/my.js","./nb":"./node_modules/moment/locale/nb.js","./nb.js":"./node_modules/moment/locale/nb.js","./ne":"./node_modules/moment/locale/ne.js","./ne.js":"./node_modules/moment/locale/ne.js","./nl":"./node_modules/moment/locale/nl.js","./nl-be":"./node_modules/moment/locale/nl-be.js","./nl-be.js":"./node_modules/moment/locale/nl-be.js","./nl.js":"./node_modules/moment/locale/nl.js","./nn":"./node_modules/moment/locale/nn.js","./nn.js":"./node_modules/moment/locale/nn.js","./oc-lnc":"./node_modules/moment/locale/oc-lnc.js","./oc-lnc.js":"./node_modules/moment/locale/oc-lnc.js","./pa-in":"./node_modules/moment/locale/pa-in.js","./pa-in.js":"./node_modules/moment/locale/pa-in.js","./pl":"./node_modules/moment/locale/pl.js","./pl.js":"./node_modules/moment/locale/pl.js","./pt":"./node_modules/moment/locale/pt.js","./pt-br":"./node_modules/moment/locale/pt-br.js","./pt-br.js":"./node_modules/moment/locale/pt-br.js","./pt.js":"./node_modules/moment/locale/pt.js","./ro":"./node_modules/moment/locale/ro.js","./ro.js":"./node_modules/moment/locale/ro.js","./ru":"./node_modules/moment/locale/ru.js","./ru.js":"./node_modules/moment/locale/ru.js","./sd":"./node_modules/moment/locale/sd.js","./sd.js":"./node_modules/moment/locale/sd.js","./se":"./node_modules/moment/locale/se.js","./se.js":"./node_modules/moment/locale/se.js","./si":"./node_modules/moment/locale/si.js","./si.js":"./node_modules/moment/locale/si.js","./sk":"./node_modules/moment/locale/sk.js","./sk.js":"./node_modules/moment/locale/sk.js","./sl":"./node_modules/moment/locale/sl.js","./sl.js":"./node_modules/moment/locale/sl.js","./sq":"./node_modules/moment/locale/sq.js","./sq.js":"./node_modules/moment/locale/sq.js","./sr":"./node_modules/moment/locale/sr.js","./sr-cyrl":"./node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"./node_modules/moment/locale/sr-cyrl.js","./sr.js":"./node_modules/moment/locale/sr.js","./ss":"./node_modules/moment/locale/ss.js","./ss.js":"./node_modules/moment/locale/ss.js","./sv":"./node_modules/moment/locale/sv.js","./sv.js":"./node_modules/moment/locale/sv.js","./sw":"./node_modules/moment/locale/sw.js","./sw.js":"./node_modules/moment/locale/sw.js","./ta":"./node_modules/moment/locale/ta.js","./ta.js":"./node_modules/moment/locale/ta.js","./te":"./node_modules/moment/locale/te.js","./te.js":"./node_modules/moment/locale/te.js","./tet":"./node_modules/moment/locale/tet.js","./tet.js":"./node_modules/moment/locale/tet.js","./tg":"./node_modules/moment/locale/tg.js","./tg.js":"./node_modules/moment/locale/tg.js","./th":"./node_modules/moment/locale/th.js","./th.js":"./node_modules/moment/locale/th.js","./tk":"./node_modules/moment/locale/tk.js","./tk.js":"./node_modules/moment/locale/tk.js","./tl-ph":"./node_modules/moment/locale/tl-ph.js","./tl-ph.js":"./node_modules/moment/locale/tl-ph.js","./tlh":"./node_modules/moment/locale/tlh.js","./tlh.js":"./node_modules/moment/locale/tlh.js","./tr":"./node_modules/moment/locale/tr.js","./tr.js":"./node_modules/moment/locale/tr.js","./tzl":"./node_modules/moment/locale/tzl.js","./tzl.js":"./node_modules/moment/locale/tzl.js","./tzm":"./node_modules/moment/locale/tzm.js","./tzm-latn":"./node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"./node_modules/moment/locale/tzm-latn.js","./tzm.js":"./node_modules/moment/locale/tzm.js","./ug-cn":"./node_modules/moment/locale/ug-cn.js","./ug-cn.js":"./node_modules/moment/locale/ug-cn.js","./uk":"./node_modules/moment/locale/uk.js","./uk.js":"./node_modules/moment/locale/uk.js","./ur":"./node_modules/moment/locale/ur.js","./ur.js":"./node_modules/moment/locale/ur.js","./uz":"./node_modules/moment/locale/uz.js","./uz-latn":"./node_modules/moment/locale/uz-latn.js","./uz-latn.js":"./node_modules/moment/locale/uz-latn.js","./uz.js":"./node_modules/moment/locale/uz.js","./vi":"./node_modules/moment/locale/vi.js","./vi.js":"./node_modules/moment/locale/vi.js","./x-pseudo":"./node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"./node_modules/moment/locale/x-pseudo.js","./yo":"./node_modules/moment/locale/yo.js","./yo.js":"./node_modules/moment/locale/yo.js","./zh-cn":"./node_modules/moment/locale/zh-cn.js","./zh-cn.js":"./node_modules/moment/locale/zh-cn.js","./zh-hk":"./node_modules/moment/locale/zh-hk.js","./zh-hk.js":"./node_modules/moment/locale/zh-hk.js","./zh-mo":"./node_modules/moment/locale/zh-mo.js","./zh-mo.js":"./node_modules/moment/locale/zh-mo.js","./zh-tw":"./node_modules/moment/locale/zh-tw.js","./zh-tw.js":"./node_modules/moment/locale/zh-tw.js"};function ie(H){var q=ke(H);return o(q)}function ke(H){if(!o.o(oe,H)){var q=new Error("Cannot find module '"+H+"'");throw q.code="MODULE_NOT_FOUND",q}return oe[H]}ie.keys=function(){return Object.keys(oe)},ie.resolve=ke,je.exports=ie,ie.id="./node_modules/moment/locale sync recursive ^\\.\\/.*$"}}]);
