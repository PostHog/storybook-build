(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":function($,l,e){"use strict";e.d(l,"a",function(){return A});var M=e("./frontend/@posthog/lemon-ui/src/index.ts"),S=e("./node_modules/react/index.js"),y=e.n(S),d=e("./node_modules/react/jsx-runtime.js"),I=e.n(d);function A(g){var U=g.to,F=g.onClick,V=g.title,f=g.subtitle,L=g.prefix,C=g.suffix;return Object(d.jsx)(M.LemonButton,{fullWidth:!0,to:U,onClick:F,children:Object(d.jsxs)("div",{className:"flex items-center justify-between h-10 overflow-hidden gap-2 flex-1",children:[L?Object(d.jsx)("span",{className:"shrink-0",children:L}):null,Object(d.jsxs)("div",{className:"truncate space-y-1 flex-1",children:[Object(d.jsx)("div",{className:"text-primary font-semibold truncate",children:V}),Object(d.jsx)("div",{className:"truncate text-default font-normal",children:f})]}),C?Object(d.jsx)("span",{className:"shrink-0",children:C}):null]})})}try{A.displayName="ProjectHomePageCompactListItem",A.__docgenInfo={description:"",displayName:"ProjectHomePageCompactListItem",props:{to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subtitle:{defaultValue:null,description:"",name:"subtitle",required:!0,type:{name:"string"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"ReactNode"}},suffix:{defaultValue:null,description:"",name:"suffix",required:!1,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"]={docgenInfo:A.__docgenInfo,name:"ProjectHomePageCompactListItem",path:"frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx#ProjectHomePageCompactListItem"})}catch(g){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function($,l,e){"use strict";var M=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),S=e.n(M),y=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),d=e.n(y),I={};I.insert="head",I.singleton=!1;var A=S()(d.a,I),g=d.a.locals||{}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function($,l,e){"use strict";e.d(l,"a",function(){return a}),e.d(l,"b",function(){return Q});var M=e("./node_modules/core-js/modules/es.function.name.js"),S=e.n(M),y=e("./node_modules/core-js/modules/es.array.slice.js"),d=e.n(y),I=e("./node_modules/react/index.js"),A=e.n(I),g=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),U=e("./node_modules/kea/lib/index.esm.js"),F=e("./frontend/src/lib/dayjs.ts"),V=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),f=e("./frontend/src/scenes/urls.ts"),L=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),C=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),B=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Y=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),p=e("./node_modules/react/jsx-runtime.js"),J=e.n(p);function a(v){var i=v.insight,u=Object(U.useActions)(B.e),_=u.reportInsightOpenedFromRecentInsightList;return Object(p.jsx)(Y.a,{title:i.name||i.derived_name||"Insight",subtitle:"Last modified ".concat(Object(F.a)(i.last_modified_at).fromNow()),prefix:Object(p.jsx)(L.InsightIcon,{insight:i}),to:f.a.insightView(i.short_id),onClick:function(){_()}})}function Q(){var v=Object(U.useValues)(C.a),i=v.recentInsights,u=v.recentInsightsLoading,_=Object(U.useActions)(C.a),m=_.loadRecentInsights;return Object(I.useEffect)(function(){m()},[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(V.a,{title:"Your recently viewed insights",viewAllURL:f.a.savedInsights(),loading:u,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:f.a.savedInsights()},items:i.slice(0,5),renderRow:function(T,H){return Object(p.jsx)(a,{insight:T},H)}})})}try{a.displayName="InsightRow",a.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:a.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(v){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function($,l,e){"use strict";e.d(l,"b",function(){return v}),e.d(l,"a",function(){return i});var M=e("./node_modules/core-js/modules/es.array.slice.js"),S=e.n(M),y=e("./frontend/src/lib/dayjs.ts"),d=e("./node_modules/kea/lib/index.esm.js"),I=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),A=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),g=e("./frontend/src/lib/components/ProfilePicture/index.ts"),U=e("./frontend/src/scenes/persons/PersonHeader.tsx"),F=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),V=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/lib/utils/eventUsageLogic.ts"),L=e("./frontend/src/lib/utils.tsx"),C=e("./frontend/src/lib/components/icons.tsx"),B=e("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),Y=e("./frontend/src/scenes/teamLogic.tsx"),p=e("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),J=e("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),a=e("./node_modules/react/jsx-runtime.js"),Q=e.n(a);function v(u){var _=u.recording,m=Object(d.useActions)(p.a),O=m.openSessionPlayer,T=Object(d.useActions)(f.e),H=T.reportRecordingOpenedFromRecentRecordingList;return Object(a.jsx)(J.a,{title:Object(U.b)(_.person),subtitle:"Recorded ".concat(Object(y.a)(_.start_time).fromNow()),prefix:Object(a.jsx)(g.b,{name:Object(U.b)(_.person)}),suffix:Object(a.jsxs)("div",{className:"flex items-center justify-end text-default",children:[Object(a.jsx)("span",{children:Object(L.O)(_.recording_duration)}),Object(a.jsx)(C.IconPlayCircle,{className:"text-2xl ml-2"})]}),onClick:function(){O({id:_.id,matching_events:_.matching_events}),H()}})}function i(){var u=Object(d.useValues)(Y.a),_=u.currentTeam,m=Object(F.d)({key:"projectHomepage"}),O=Object(d.useValues)(m),T=O.sessionRecordings,H=O.sessionRecordingsResponseLoading;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B.a,{}),Object(a.jsx)(A.a,{title:"Recent recordings",viewAllURL:V.a.sessionRecordings(),loading:H,emptyMessage:_!=null&&_.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:V.a.projectSettings()+"#recordings"},items:T.slice(0,5),renderRow:function(k,ee){return Object(a.jsx)(v,{recording:k},ee)}})]})}try{v.displayName="RecordingRow",v.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:v.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(u){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function($,l,e){"use strict";e.d(l,"a",function(){return v});var M=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),S=e.n(M),y=e("./node_modules/@babel/runtime/regenerator/index.js"),d=e.n(y),I=e("./node_modules/core-js/modules/es.array.iterator.js"),A=e.n(I),g=e("./node_modules/core-js/modules/es.object.to-string.js"),U=e.n(g),F=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),V=e.n(F),f=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/scenes/teamLogic.tsx"),C=e("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),B=e("./frontend/src/types.ts"),Y=e("./frontend/src/lib/api.ts"),p=e("./node_modules/kea-subscriptions/lib/index.js"),J=e.n(p),a=e("./node_modules/kea-loaders/lib/index.js"),Q=e.n(a),v=Object(f.kea)([Object(f.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(f.connect)({values:[L.a,["currentTeamId","currentTeam"]]}),Object(f.selectors)({primaryDashboardId:[function(){return[L.a.selectors.currentTeam]},function(i){return i==null?void 0:i.primary_dashboard}],dashboardLogic:[function(i){return[i.primaryDashboardId]},function(i){return Object(C.c)({id:i!=null?i:void 0,placement:B.m.ProjectHomepage})}]}),Object(a.loaders)(function(i){var u=i.values;return{recentInsights:[[],{loadRecentInsights:function(){var _=S()(d.a.mark(function O(){var T;return d.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Y.b.get("api/projects/".concat(u.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return T=E.sent,E.abrupt("return",T.results);case 4:case"end":return E.stop()}},O)}));function m(){return _.apply(this,arguments)}return m}()}],persons:[[],{loadPersons:function(){var _=S()(d.a.mark(function O(){var T;return d.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Y.b.persons.list();case 2:return T=E.sent,E.abrupt("return",T.results);case 4:case"end":return E.stop()}},O)}));function m(){return _.apply(this,arguments)}return m}()}]}}),Object(p.subscriptions)(function(i){var u=i.cache;return{dashboardLogic:function(m){var O;(O=u.unmount)===null||O===void 0||O.call(u),u.unmount=m?m.mount():null}}}),Object(f.afterMount)(function(i){var u,_=i.cache,m=i.actions;(u=_.unmount)===null||u===void 0||u.call(_),m.loadRecentInsights(),m.loadPersons()})])},"./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts":function($,l,e){"use strict";e.d(l,"b",function(){return w}),e.d(l,"a",function(){return re}),e.d(l,"c",function(){return je}),e.d(l,"d",function(){return Ee});var M=e("./node_modules/core-js/modules/es.object.keys.js"),S=e.n(M),y=e("./node_modules/core-js/modules/es.symbol.js"),d=e.n(y),I=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),A=e.n(I),g=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),U=e.n(g),F=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),V=e.n(F),f=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),L=e.n(f),C=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),B=e.n(C),Y=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),p=e.n(Y),J=e("./node_modules/@babel/runtime/regenerator/index.js"),a=e.n(J),Q=e("./node_modules/core-js/modules/es.array.find.js"),v=e.n(Q),i=e("./node_modules/core-js/modules/es.object.to-string.js"),u=e.n(i),_=e("./node_modules/core-js/modules/es.function.name.js"),m=e.n(_),O=e("./node_modules/core-js/modules/es.array.map.js"),T=e.n(O),H=e("./node_modules/core-js/modules/es.array.concat.js"),E=e.n(H),k=e("./node_modules/core-js/modules/es.array.filter.js"),ee=e.n(k),ie=e("./node_modules/core-js/modules/es.array.iterator.js"),fe=e.n(ie),ae=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Oe=e.n(ae),_e=e("./node_modules/core-js/modules/es.object.from-entries.js"),Pe=e.n(_e),ce=e("./node_modules/core-js/modules/es.array.find-index.js"),pe=e.n(ce),K=e("./node_modules/kea/lib/index.esm.js"),se=e("./frontend/src/lib/api.ts"),te=e("./frontend/src/lib/utils.tsx"),X=e("./frontend/src/types.ts"),Z=e("./node_modules/kea-router/lib/index.js"),ve=e.n(Z),de=e("./frontend/src/lib/utils/eventUsageLogic.ts"),le=e("./node_modules/fast-deep-equal/index.js"),ue=e.n(le),me=e("./frontend/src/lib/dayjs.ts"),oe=e("./node_modules/kea-loaders/lib/index.js"),Re=e.n(oe);function ne(s,t){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),o.push.apply(o,n)}return o}function b(s){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?ne(Object(o),!0).forEach(function(n){p()(s,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):ne(Object(o)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(o,n))})}return s}var w=20,re={session_recording_duration:{type:X.M.Recording,key:"duration",value:60,operator:X.O.GreaterThan},properties:[],events:[],actions:[],date_from:Object(me.a)().subtract(21,"days").format("YYYY-MM-DD")},je=function(t,o,n){var r,c,P=(r=t.events)===null||r===void 0?void 0:r.find(function(j){var R=j.name;return R==="$pageview"}),D=(c=t.events)!==null&&c!==void 0?c:[],W=n?{key:o,value:[n],operator:X.O.Exact,type:"event"}:{key:o,value:X.O.IsNotSet,operator:X.O.IsNotSet,type:"event"};return P?{events:D.map(function(j){var R,h;return j.order===P.order?b(b({},j),{},{properties:[].concat(B()((R=(h=j.properties)===null||h===void 0?void 0:h.filter(function(G){var z=G.key;return z!==o}))!==null&&R!==void 0?R:[]),[W])}):j})}:{events:[].concat(B()(D),[{id:"$pageview",name:"$pageview",type:"events",order:D.length,properties:[W]}])}},Ee=Object(K.kea)([Object(K.path)(function(s){return["scenes","session-recordings","playlist","sessionRecordingsListLogic",s]}),Object(K.props)({}),Object(K.key)(function(s){var t;return"".concat(s.key,"-").concat((t=s.updateSearchParams)!==null&&t!==void 0?t:"-with-search")}),Object(K.connect)({actions:[de.e,["reportRecordingsListFetched","reportRecordingsListPropertiesFetched","reportRecordingsListFilterAdded"]]}),Object(K.actions)({getSessionRecordings:!0,setFilters:function(t){return{filters:t}},replaceFilters:function(t){return{filters:t}},setShowFilters:function(t){return{showFilters:t}},setSelectedRecordingId:function(t){return{id:t}},loadNext:!0,loadPrev:!0}),Object(oe.loaders)(function(s){var t=s.props,o=s.values,n=s.actions;return{sessionRecordingsResponse:[{results:[],has_next:!1},{getSessionRecordings:function(){var r=L()(a.a.mark(function P(D,W){var j,R,h,G,z,q;return a.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return R=b(b({},o.filters),{},{person_uuid:(j=t.personUUID)!==null&&j!==void 0?j:"",limit:w}),h=Object(te.Fb)(R),N.next=4,W(100);case 4:return G=performance.now(),N.next=7,se.b.recordings.list(h);case 7:return z=N.sent,q=performance.now()-G,n.reportRecordingsListFetched(q),W(),N.abrupt("return",z);case 12:case"end":return N.stop()}},P)}));function c(P,D){return r.apply(this,arguments)}return c}()}],sessionRecordingsPropertiesResponse:[{results:[]},{getSessionRecordingsProperties:function(){var r=L()(a.a.mark(function P(D,W){var j,R,h,G,z;return a.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!(o.sessionRecordingsResponse.results.length<1)){x.next=2;break}return x.abrupt("return",{results:[]});case 2:return j={session_ids:o.sessionRecordingsResponse.results.map(function(N){var ge=N.id;return ge})},R=Object(te.Fb)(j),x.next=6,W(100);case 6:return h=performance.now(),x.next=9,se.b.recordings.listProperties(R);case 9:return G=x.sent,z=performance.now()-h,n.reportRecordingsListPropertiesFetched(z),W(),x.abrupt("return",G);case 14:case"end":return x.stop()}},P)}));function c(P,D){return r.apply(this,arguments)}return c}()}]}}),Object(K.reducers)(function(s){var t=s.props;return{filters:[t.filters||re,{replaceFilters:function(n,r){var c=r.filters;return c},setFilters:function(n,r){var c=r.filters;return b(b({},n),c)}}],showFilters:[!1,{setShowFilters:function(n,r){var c=r.showFilters;return c}}],sessionRecordings:[[],{getSessionRecordingsSuccess:function(n,r){var c=r.sessionRecordingsResponse;return B()(c.results)},setSelectedRecordingId:function(n,r){var c=r.id;return B()(n.map(function(P){return P.id===c?b(b({},P),{},{viewed:!0}):b({},P)}))}}],selectedRecordingId:[null,{setSelectedRecordingId:function(n,r){var c=r.id;return c!=null?c:null}}]}}),Object(K.listeners)(function(s){var t=s.actions,o=s.values;return{setFilters:function(){t.getSessionRecordings()},replaceFilters:function(){t.getSessionRecordings()},loadNext:function(){var r;t.setFilters({offset:(((r=o.filters)===null||r===void 0?void 0:r.offset)||0)+w})},loadPrev:function(){var r;t.setFilters({offset:Math.max((((r=o.filters)===null||r===void 0?void 0:r.offset)||0)-w,0)})},getSessionRecordingsSuccess:function(){t.getSessionRecordingsProperties({})}}}),Object(K.selectors)({sessionRecordingIdToProperties:[function(s){return[s.sessionRecordingsPropertiesResponse]},function(s){var t;return(t=Object.fromEntries(s.results.map(function(o){var n=o.id,r=o.properties;return[n,r]})))!==null&&t!==void 0?t:{}}],activeSessionRecording:[function(s){return[s.selectedRecordingId,s.sessionRecordings]},function(s,t){return s?t.find(function(o){return o.id===s})||{id:s}:t[0]}],nextSessionRecording:[function(s){return[s.activeSessionRecording,s.sessionRecordings]},function(s,t){if(!!s){var o=t.findIndex(function(n){return n.id===s.id});return t[o+1]}}],hasPrev:[function(s){return[s.filters]},function(s){return(s.offset||0)>0}],hasNext:[function(s){return[s.sessionRecordingsResponse]},function(s){return s.has_next}],totalFiltersCount:[function(s){return[s.filters]},function(s){var t,o,n;return((s==null||(t=s.actions)===null||t===void 0?void 0:t.length)||0)+((s==null||(o=s.events)===null||o===void 0?void 0:o.length)||0)+((s==null||(n=s.properties)===null||n===void 0?void 0:n.length)||0)}]}),Object(K.afterMount)(function(s){var t=s.actions;t.getSessionRecordings()}),Object(Z.actionToUrl)(function(s){var t=s.props,o=s.values,n=function(c){var P=t.updateSearchParams?{filters:o.filters}:{},D=b({},Z.router.values.hashParams);return o.selectedRecordingId?D.sessionRecordingId=o.selectedRecordingId:delete D.sessionRecordingId,[Z.router.values.location.pathname,P,D,{replace:c}]};return{loadSessionRecordings:function(){return n(!0)},setSelectedRecordingId:function(){return n(!1)},setFilters:function(){return n(!0)}}}),Object(Z.urlToAction)(function(s){var t=s.actions,o=s.values,n=s.props,r=function(P,D,W){var j,R=(j=W.sessionRecordingId)!==null&&j!==void 0?j:null;R!==o.selectedRecordingId&&t.setSelectedRecordingId(R);var h=D.filters;h&&n.updateSearchParams&&(ue()(h,o.filters)||t.replaceFilters(h))};return{"*":r}})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function($,l,e){var M=e("./node_modules/css-loader/dist/runtime/api.js");l=M(!1),l.push([$.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}",""]),$.exports=l}}]);
