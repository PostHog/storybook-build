(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(oe,L,t){"use strict";t.d(L,"a",function(){return We});var J=t("./node_modules/core-js/modules/es.array.includes.js"),Z=t.n(J),Ie=t("./node_modules/core-js/modules/es.array.iterator.js"),ye=t.n(Ie),ge=t("./node_modules/core-js/modules/es.object.to-string.js"),_e=t.n(ge),Je=t("./node_modules/core-js/modules/es.object.values.js"),ie=t.n(Je),e=t("./node_modules/core-js/modules/es.string.includes.js"),l=t.n(e),Ve=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ce=t.n(Ve),O=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),Le=t.n(O),X=t("./node_modules/kea/lib/index.esm.js"),R=t("./frontend/src/lib/utils.tsx"),T=t("./frontend/src/types.ts"),y=t("./frontend/src/scenes/insights/sharedUtils.ts"),E=t("./frontend/src/scenes/insights/insightLogic.ts");function ne(B,H){var ee=Object.keys(B);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(B);H&&(ue=ue.filter(function(Ce){return Object.getOwnPropertyDescriptor(B,Ce).enumerable})),ee.push.apply(ee,ue)}return ee}function Ae(B){for(var H=1;H<arguments.length;H++){var ee=arguments[H]!=null?arguments[H]:{};H%2?ne(Object(ee),!0).forEach(function(ue){Le()(B,ue,ee[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(ee)):ne(Object(ee)).forEach(function(ue){Object.defineProperty(B,ue,Object.getOwnPropertyDescriptor(ee,ue))})}return B}function de(B){return Object.values(T.o).includes(B)}var We=Object(X.kea)({props:{},key:Object(y.c)("new"),path:function(H){return["lib","components","ChartFilter","chartFilterLogic",H]},connect:function(H){return{actions:[Object(E.c)(H),["setFilters"]],values:[Object(E.c)(H),["filters"]]}},actions:function(){return{setChartFilter:function(ee){return{chartFilter:ee}}}},selectors:{chartFilter:[function(B){return[B.filters]},function(B){var H=B.display,ee=B.funnel_viz_type;return(H===T.d.FunnelViz?ee:H)||null}]},listeners:function(H){var ee=H.actions,ue=H.values;return{setChartFilter:function(ft){var ke=ft.chartFilter,i=ue.filters,M=i.display,K=i.funnel_viz_type;de(ke)?(K!==ke||M!==T.d.FunnelViz)&&ee.setFilters(Ae(Ae({},ue.filters),{},{display:T.d.FunnelViz,funnel_viz_type:ke})):Object(R.mb)(M,ke)||ee.setFilters(Ae(Ae({},ue.filters),{},{display:ke}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(oe,L,t){"use strict";t.d(L,"a",function(){return R});var J=t("./node_modules/core-js/modules/es.array.iterator.js"),Z=t.n(J),Ie=t("./node_modules/core-js/modules/es.object.to-string.js"),ye=t.n(Ie),ge=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),_e=t.n(ge),Je=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),ie=t.n(Je),e=t("./node_modules/kea/lib/index.esm.js"),l=t("./frontend/src/lib/utils.tsx"),Ve=t("./frontend/src/types.ts"),ce=t("./frontend/src/scenes/insights/sharedUtils.ts"),O=t("./frontend/src/scenes/insights/insightLogic.ts");function Le(T,y){var E=Object.keys(T);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(T);y&&(ne=ne.filter(function(Ae){return Object.getOwnPropertyDescriptor(T,Ae).enumerable})),E.push.apply(E,ne)}return E}function X(T){for(var y=1;y<arguments.length;y++){var E=arguments[y]!=null?arguments[y]:{};y%2?Le(Object(E),!0).forEach(function(ne){ie()(T,ne,E[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(E)):Le(Object(E)).forEach(function(ne){Object.defineProperty(T,ne,Object.getOwnPropertyDescriptor(E,ne))})}return T}var R=Object(e.kea)({props:{},key:Object(ce.c)("new"),path:function(y){return["lib","components","CompareFilter","compareFilterLogic",y]},connect:function(y){return{actions:[Object(O.c)(y),["setFilters"]],values:[Object(O.c)(y),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(E){return{compare:E}},toggleCompare:!0}},selectors:{compare:[function(T){return[T.filters]},function(T){return!!(T!=null&&T.compare)}],disabled:[function(T){return[T.filters,T.canEditInsight]},function(T,y){var E=T.insight,ne=T.date_from;return!y||E===Ve.s.LIFECYCLE||ne==="all"}]},listeners:function(y){var E=y.values,ne=y.actions;return{setCompare:function(de){var We=de.compare;Object(l.mb)(We,E.compare)||ne.setFilters(X(X({},E.filters),{},{compare:We}))},toggleCompare:function(){ne.setCompare(!E.compare)}}}})},"./frontend/src/lib/components/CopyToClipboard.tsx":function(oe,L,t){"use strict";t.d(L,"a",function(){return We});var J=t("./node_modules/core-js/modules/es.symbol.js"),Z=t.n(J),Ie=t("./node_modules/core-js/modules/es.symbol.description.js"),ye=t.n(Ie),ge=t("./node_modules/core-js/modules/es.object.to-string.js"),_e=t.n(ge),Je=t("./node_modules/core-js/modules/es.regexp.to-string.js"),ie=t.n(Je),e=t("./node_modules/@babel/runtime/helpers/extends.js"),l=t.n(e),Ve=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),ce=t.n(Ve),O=t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),Le=t.n(O),X=t("./node_modules/react/index.js"),R=t.n(X),T=t("./frontend/src/lib/utils.tsx"),y=t("./frontend/src/lib/components/Tooltip.tsx"),E=t("./frontend/src/lib/components/icons.tsx"),ne=t("./frontend/src/lib/components/LemonButton/index.ts");function Ae(B,H){var ee=Object.keys(B);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(B);H&&(ue=ue.filter(function(Ce){return Object.getOwnPropertyDescriptor(B,Ce).enumerable})),ee.push.apply(ee,ue)}return ee}function de(B){for(var H=1;H<arguments.length;H++){var ee=arguments[H]!=null?arguments[H]:{};H%2?Ae(Object(ee),!0).forEach(function(ue){ce()(B,ue,ee[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(ee)):Ae(Object(ee)).forEach(function(ue){Object.defineProperty(B,ue,Object.getOwnPropertyDescriptor(ee,ue))})}return B}function We(B){var H=B.children,ee=B.explicitValue,ue=B.description,Ce=B.selectable,ft=Ce===void 0?!1:Ce,ke=B.isValueSensitive,i=ke===void 0?!1:ke,M=B.tooltipMessage,K=M===void 0?null:M,n=B.iconStyle,Pe=n===void 0?{}:n,ze=B.iconPosition,Ye=ze===void 0?"end":ze,j=B.style,rt=Le()(B,["children","explicitValue","description","selectable","isValueSensitive","tooltipMessage","iconStyle","iconPosition","style"]),Ot=function(){return Object(T.t)(ee!=null?ee:H?H.toString():"",ue)},Ft=R.a.createElement("span",l()({className:i?"ph-no-capture":"",style:de({cursor:ft?"text":"pointer",display:"inline-flex",alignItems:"center",flexDirection:Ye==="end"?"row":"row-reverse",flexWrap:"nowrap",width:"fit-content",wordBreak:"break-all"},j),onClick:ft?void 0:Ot},rt),R.a.createElement("span",{style:Ye==="start"?{flexGrow:1}:{}},H),R.a.createElement(ne.a,{compact:!0,icon:R.a.createElement(E.IconCopy,null),className:"copy-icon",onClick:ft?Ot:void 0,style:de(ce()({},Ye==="end"?"marginLeft":"marginRight",4),Pe)}));return!ft||K!==null?R.a.createElement(y.a,{title:K||"Click to copy"},Ft):R.a.createElement(R.a.Fragment,null,Ft)}try{We.displayName="CopyToClipboardInline",We.__docgenInfo={description:"",displayName:"CopyToClipboardInline",props:{explicitValue:{defaultValue:null,description:"",name:"explicitValue",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},selectable:{defaultValue:{value:"false"},description:"Makes text selectable instead of copying on click anywhere",name:"selectable",required:!1,type:{name:"boolean"}},isValueSensitive:{defaultValue:{value:"false"},description:"",name:"isValueSensitive",required:!1,type:{name:"boolean"}},tooltipMessage:{defaultValue:{value:"null"},description:"",name:"tooltipMessage",required:!1,type:{name:"string | null"}},iconStyle:{defaultValue:{value:"{}"},description:"",name:"iconStyle",required:!1,type:{name:"Record<string, string | number>"}},iconPosition:{defaultValue:{value:"end"},description:"",name:"iconPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"]={docgenInfo:We.__docgenInfo,name:"CopyToClipboardInline",path:"frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"})}catch(B){}},"./frontend/src/lib/components/PropertiesTable.tsx":function(oe,L,t){"use strict";t.d(L,"a",function(){return Qe});var J=t("./node_modules/core-js/modules/es.array.filter.js"),Z=t("./node_modules/core-js/modules/es.array.includes.js"),Ie=t("./node_modules/core-js/modules/es.array.map.js"),ye=t("./node_modules/core-js/modules/es.array.some.js"),ge=t("./node_modules/core-js/modules/es.object.entries.js"),_e=t("./node_modules/core-js/modules/es.string.includes.js"),Je=t("./node_modules/core-js/modules/es.string.starts-with.js"),ie=t("./node_modules/@babel/runtime/helpers/typeof.js"),e=t.n(ie),l=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ve=t.n(l),ce=t("./node_modules/react/index.js"),O=t.n(ce),Le=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),X=t("./node_modules/antd/es/input/index.js"),R=t("./node_modules/antd/es/dropdown/index.js"),T=t("./node_modules/antd/es/menu/index.js"),y=t("./node_modules/antd/es/popconfirm/index.js"),E=t("./frontend/src/lib/utils.tsx"),ne=t("./frontend/src/lib/components/icons.tsx"),Ae=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),de=t.n(Ae),We=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss"),B=t.n(We),H={};H.insert="head",H.singleton=!1;var ee=de()(B.a,H),ue=B.a.locals||{},Ce=t("./frontend/src/lib/components/LemonTable/index.ts"),ft=t("./frontend/src/lib/components/CopyToClipboard.tsx"),ke=t("./node_modules/kea/lib/index.esm.js"),i=t("./frontend/src/models/propertyDefinitionsModel.ts"),M=t("./frontend/src/lib/components/LemonButton/index.ts"),K=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=t.n(K),Pe=t("./node_modules/antd/es/radio/index.js"),ze=t("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),Ye=t("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),j=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),rt=t("./node_modules/@ant-design/icons/es/icons/StopOutlined.js"),Ot=t("./node_modules/antd/lib/modal/Modal.js"),Ft=t.n(Ot);function Jt(ae,se){var be=Object.keys(ae);if(Object.getOwnPropertySymbols){var Se=Object.getOwnPropertySymbols(ae);se&&(Se=Se.filter(function(ct){return Object.getOwnPropertyDescriptor(ae,ct).enumerable})),be.push.apply(be,Se)}return be}function vt(ae){for(var se=1;se<arguments.length;se++){var be=arguments[se]!=null?arguments[se]:{};se%2?Jt(Object(be),!0).forEach(function(Se){n()(ae,Se,be[Se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(be)):Jt(Object(be)).forEach(function(Se){Object.defineProperty(ae,Se,Object.getOwnPropertyDescriptor(be,Se))})}return ae}function Ut(ae){var se=ae.editProperty,be={creating:!1,propertyType:"string"},Se=Object(ce.useState)(be),ct=Ve()(Se,2),Be=ct[0],et=ct[1],st=function(){Be.key&&Be.value!==void 0&&(se(Be.key,Be.value),et(be))};return O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"mb"},O.a.createElement("div",{className:"text-right"},O.a.createElement(M.a,{"data-attr":"add-prop-button",onClick:function(){return et(vt(vt({},Be),{},{creating:!0}))},type:"primary"},"New property"))),O.a.createElement(Ft.a,{visible:Be.creating,destroyOnClose:!0,onCancel:function(){return et(be)},title:"Adding new property",okText:O.a.createElement(O.a.Fragment,null,O.a.createElement(ze.a,{style:{marginRight:4}}),"Save Property"),okButtonProps:{disabled:!Be.key||Be.value===void 0},onOk:st},O.a.createElement("div",{className:"input-set"},O.a.createElement("label",{htmlFor:"propertyKey"},"Key"),O.a.createElement(X.a,{id:"propertyKey",autoFocus:!0,placeholder:"try email, first_name, is_verified, membership_level, total_revenue",onChange:function(P){return et(vt(vt({},Be),{},{key:P.target.value}))}})),O.a.createElement("div",{className:"input-set"},O.a.createElement("label",{htmlFor:"propertyType"},"Type of Property"),O.a.createElement("div",null,O.a.createElement(Pe.a.Group,{value:Be.propertyType,onChange:function(P){return et(vt(vt({},Be),{},{propertyType:P.target.value,value:P.target.value==="string"?void 0:"true"}))},id:"propertyType",buttonStyle:"solid"},O.a.createElement(Pe.a.Button,{value:"string"},"Text or Number"),O.a.createElement(Pe.a.Button,{value:"boolean"},"Boolean or Null")))),O.a.createElement("div",{className:"input-set"},O.a.createElement("label",{htmlFor:"propertyValue"},"Value"),Be.propertyType==="boolean"?O.a.createElement("div",null,O.a.createElement(Pe.a.Group,{value:Be.value,onChange:function(P){return et(vt(vt({},Be),{},{value:P.target.value}))},id:"propertyValue",buttonStyle:"solid"},O.a.createElement(Pe.a.Button,{value:"true",defaultChecked:!0},O.a.createElement(Ye.a,null)," True"),O.a.createElement(Pe.a.Button,{value:"false"},O.a.createElement(j.a,null)," False"),O.a.createElement(Pe.a.Button,{value:"null"},O.a.createElement(rt.a,null)," Null"))):O.a.createElement(X.a,{placeholder:"try email@example.com, gold, 1",onChange:function(P){return et(vt(vt({},Be),{},{value:P.target.value}))},id:"propertyValue",onKeyDown:function(P){return P.key==="Enter"&&st()}}))))}try{Ut.displayName="NewPropertyComponent",Ut.__docgenInfo={description:"",displayName:"NewPropertyComponent",props:{editProperty:{defaultValue:null,description:"",name:"editProperty",required:!0,type:{name:"(key: string, newValue?: string | number | boolean | null | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"]={docgenInfo:Ut.__docgenInfo,name:"NewPropertyComponent",path:"frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"})}catch(ae){}function Xt(ae){var se=ae.value,be=ae.onChange;return O.a.createElement(X.a,{defaultValue:se,autoFocus:!0,onBlur:function(){return be(null,!1)},onPressEnter:function(ct){return be(ct.target.value,!0)}})}function ht(ae){var se=ae.value,be=ae.rootKey,Se=ae.onEdit,ct=ae.nestingLevel,Be=ae.useDetectedPropertyType,et=Object(ke.useValues)(i.a),st=et.describeProperty,ut=Object(ce.useState)(!1),P=Ve()(ut,2),Qt=P[0],Et=P[1],xe=be&&!Le.e.includes(be)&&(!ct||ct<=1)&&Se,D=["string","number","bigint"],tt=["boolean","null"],dt;be&&Be&&(dt=st(be));var Ee=se===null?"null":e()(se),me=se===null?"null":String(se),yt=function(pe,He){Et(!1),be!==void 0&&He&&Se&&pe!=se&&Se(be,pe,se)},Dt=O.a.createElement("span",{className:xe?"editable ph-no-capture":"ph-no-capture",onClick:function(){return xe&&D.includes(Ee)&&Et(!0)}},Object(E.eb)(se)?O.a.createElement("a",{href:se,target:"_blank",rel:"noopener noreferrer",className:"value-link"},O.a.createElement("span",null,me),O.a.createElement(ne.IconOpenInNew,null)):me);return O.a.createElement("div",{className:"properties-table-value"},Qt?O.a.createElement(Xt,{value:se,onChange:yt}):O.a.createElement(O.a.Fragment,null,xe&&tt.includes(Ee)?O.a.createElement(R.a,{overlay:O.a.createElement(T.a,{onClick:function(pe){var He=pe.key,fe=null;He==="t"?fe=!0:He==="f"&&(fe=!1),yt(fe,!0)}},O.a.createElement(T.a.Item,{key:"t"},"true"),O.a.createElement(T.a.Item,{key:"f"},"false"),O.a.createElement(T.a.Item,{key:"n",danger:!0},"null"))},Dt):O.a.createElement(ft.a,{description:"property value",explicitValue:me,selectable:!0,isValueSensitive:!0},Dt),O.a.createElement("div",{className:"property-value-type"},dt||Ee)))}function Qe(ae){var se=ae.properties,be=ae.rootKey,Se=ae.onEdit,ct=ae.sortProperties,Be=ct===void 0?!1:ct,et=ae.searchable,st=et===void 0?!1:et,ut=ae.embedded,P=ut===void 0?!0:ut,Qt=ae.nestingLevel,Et=Qt===void 0?0:Qt,xe=ae.onDelete,D=ae.className,tt=ae.useDetectedPropertyType,dt=Object(ce.useState)(""),Ee=Ve()(dt,2),me=Ee[0],yt=Ee[1],Dt=Object(ce.useMemo)(function(){if(!(se instanceof Object))return[];var pe=Object.entries(se);if(me){var He=me.toLowerCase();pe=pe.filter(function(fe){var Oe=Ve()(fe,2),Zt=Oe[0],lt=Oe[1];return Zt.toLowerCase().includes(He)||JSON.stringify(lt).toLowerCase().includes(He)})}return Be&&pe.sort(function(fe,Oe){var Zt=Ve()(fe,1),lt=Zt[0],rn=Ve()(Oe,1),wt=rn[0];return lt[0]==="$"&&wt[0]!=="$"?1:lt[0]!=="$"&&wt[0]==="$"||lt.toLowerCase()<wt.toLowerCase()?-1:1}),pe},[se,Be,me]);if(Array.isArray(se))return O.a.createElement("div",null,se.length?se.map(function(pe,He){return O.a.createElement(Qe,{key:He,properties:pe,nestingLevel:Et+1,useDetectedPropertyType:["$set","$set_once"].some(function(fe){return fe===be})?!1:tt})}):O.a.createElement("div",{className:"property-value-type"},"ARRAY (EMPTY)"));var we=[{key:"key",title:"Key",width:"20rem",render:function(He,fe){return O.a.createElement("div",{className:"properties-table-key"},O.a.createElement(Le.a,{value:fe[0]}))},sorter:function(He,fe){return String(He[0]).localeCompare(String(fe[0]))}},{key:"value",title:"Value",render:function(He,fe){return O.a.createElement(Qe,{properties:fe[1],rootKey:fe[0],onEdit:Se,nestingLevel:Et+1,useDetectedPropertyType:["$set","$set_once"].some(function(Oe){return Oe===be})?!1:tt})}}];return xe&&Et===0&&we.push({key:"delete",title:"",width:0,render:function(He,fe){return!Le.e.includes(fe[0])&&!String(fe[0]).startsWith("$initial_")&&O.a.createElement(y.a,{onConfirm:function(){return xe(fe[0])},okButtonProps:{danger:!0},okText:"Delete",title:O.a.createElement(O.a.Fragment,null,"Are you sure you want to delete property ",O.a.createElement("code",null,fe[0]),"?"," ",O.a.createElement("b",null,"This cannot be undone.")),placement:"left"},O.a.createElement(M.a,{icon:O.a.createElement(ne.IconDeleteForever,null),status:"danger",compact:!0}))}}),se instanceof Object?O.a.createElement(O.a.Fragment,null,st&&O.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},O.a.createElement(X.a.Search,{placeholder:"Search for property keys and values",className:"mb",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:me,onChange:function(He){yt(He.target.value)}}),Se&&O.a.createElement(Ut,{editProperty:Se})),O.a.createElement(Ce.a,{columns:we,showHeader:!P,size:"small",rowKey:"0",embedded:P,dataSource:Dt,className:D,emptyState:"This property value is an empty object."})):O.a.createElement(ht,{value:se,rootKey:be,onEdit:Se,nestingLevel:Et,useDetectedPropertyType:tt})}try{Qe.displayName="PropertiesTable",Qe.__docgenInfo={description:"",displayName:"PropertiesTable",props:{properties:{defaultValue:null,description:"",name:"properties",required:!0,type:{name:"any"}},sortProperties:{defaultValue:{value:"false"},description:"",name:"sortProperties",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"",name:"searchable",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"true"},description:"Whether this table should be style for being embedded. Default: true.",name:"embedded",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((key: string) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},useDetectedPropertyType:{defaultValue:null,description:"",name:"useDetectedPropertyType",required:!1,type:{name:"boolean"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((key: string, newValue: any, oldValue?: any) => void)"}},nestingLevel:{defaultValue:{value:"0"},description:"",name:"nestingLevel",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"]={docgenInfo:Qe.__docgenInfo,name:"PropertiesTable",path:"frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"})}catch(ae){}},"./frontend/src/scenes/experiments/Experiment.tsx":function(oe,L,t){"use strict";t.r(L),t.d(L,"scene",function(){return Jn}),t.d(L,"Experiment_",function(){return en}),t.d(L,"CodeLanguageSelect",function(){return Xn});var J=t("./node_modules/core-js/modules/es.symbol.js"),Z=t("./node_modules/core-js/modules/es.symbol.description.js"),Ie=t("./node_modules/core-js/modules/es.array.concat.js"),ye=t("./node_modules/core-js/modules/es.array.filter.js"),ge=t("./node_modules/core-js/modules/es.array.map.js"),_e=t("./node_modules/core-js/modules/es.array.reduce.js"),Je=t("./node_modules/core-js/modules/es.function.name.js"),ie=t("./node_modules/core-js/modules/es.number.constructor.js"),e=t("./node_modules/core-js/modules/es.number.to-fixed.js"),l=t("./node_modules/core-js/modules/es.object.keys.js"),Ve=t("./node_modules/core-js/modules/es.object.to-string.js"),ce=t("./node_modules/core-js/modules/es.regexp.to-string.js"),O=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),Le=t.n(O),X=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),R=t.n(X),T=t("./node_modules/antd/es/form/index.js"),y=t("./node_modules/antd/es/row/index.js"),E=t("./node_modules/antd/es/col/index.js"),ne=t("./node_modules/antd/es/input/index.js"),Ae=t("./node_modules/antd/es/tooltip/index.js"),de=t("./node_modules/antd/es/select/index.js"),We=t("./node_modules/antd/es/card/index.js"),B=t("./node_modules/antd/es/tag/index.js"),H=t("./node_modules/antd/es/collapse/index.js"),ee=t("./node_modules/antd/es/skeleton/index.js"),ue=t("./node_modules/antd/es/progress/index.js"),Ce=t("./node_modules/kea/lib/index.esm.js"),ft=t("./frontend/src/lib/components/PageHeader.tsx"),ke=t("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),i=t("./frontend/src/lib/components/PropertyFilters/utils.ts"),M=t("./frontend/src/lib/components/TaxonomicFilter/types.ts"),K=t("./node_modules/react/index.js"),n=t.n(K),Pe=t("./frontend/src/scenes/funnels/funnelLogic.ts"),ze=t("./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx"),Ye=t("./frontend/src/scenes/insights/insightLogic.ts"),j=t("./frontend/src/types.ts"),rt=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Ot=t.n(rt),Ft=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),Jt=t.n(Ft),vt={};vt.insert="head",vt.singleton=!1;var Ut=Ot()(Jt.a,vt),Xt=Jt.a.locals||{},ht=t("./node_modules/core-js/modules/es.array.fill.js"),Qe=t("./node_modules/core-js/modules/es.array.find.js"),ae=t("./node_modules/core-js/modules/es.array.find-index.js"),se=t("./node_modules/core-js/modules/es.array.iterator.js"),be=t("./node_modules/core-js/modules/es.array.splice.js"),Se=t("./node_modules/core-js/modules/es.number.epsilon.js"),ct=t("./node_modules/core-js/modules/es.object.values.js"),Be=t("./node_modules/core-js/modules/es.promise.js"),et=t("./node_modules/core-js/modules/es.string.iterator.js"),st=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ut=t("./node_modules/@babel/runtime/regenerator/index.js"),P=t.n(ut),Qt=t("./node_modules/regenerator-runtime/runtime.js"),Et=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),xe=t.n(Et),D=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),tt=t.n(D),dt=t("./frontend/src/lib/api.ts"),Ee=t("./frontend/src/lib/dayjs.ts"),me=t("./frontend/src/lib/utils.tsx"),yt=["furry","amusing","charming","tame","swift","clever","pleasant","tiny","wild","herbivorous","admirable","adorable","agile","beautiful","bossy","candid","cold","colorful","cuddly","curious","cute","energetic","fast","feisty","fierce","fluffy","friendly","fuzzy","grumpy","hairy","heavy","large","lazy","loud","lovable","loving","enchanted","maternal","sweet","messy","nocturnal","noisy","nosy","picky","playful","quick","sassy","scaly","short","shy","slow","small","smart","soft","strong","tall","tenacious","glorious","warm","cheerful","gracious"],Dt=["aardvark","albatross","alligator","alpaca","ant","anteater","antelope","ape","armadillo","donkey","baboon","badger","barracuda","bat","bear","beaver","bee","bison","boar","buffalo","butterfly","camel","capybara","caribou","cassowary","cat","caterpillar","cattle","chamois","cheetah","chicken","chimpanzee","chinchilla","chough","clam","cobra","cockroach","cod","cormorant","coyote","crab","crane","crocodile","crow","curlew","deer","dinosaur","dog","dogfish","dolphin","dotterel","dove","dragonfly","duck","dugong","dunlin","eagle","echidna","eel","eland","elephant","elk","emu","falcon","ferret","finch","firefox","fish","flamingo","fly","fox","frog","gaur","gazelle","gerbil","giraffe","gnat","gnu","goat","goldfinch","goldfish","goose","gorilla","goshawk","grasshopper","grouse","guanaco","gull","hamster","hare","hawk","hedgehog","heron","herring","hippopotamus","hornet","horse","human","hummingbird","hyena","ibex","ibis","jackal","jaguar","jay","jellyfish","kangaroo","kingfisher","koala","kookabura","kouprey","kudu","lapwing","lark","lemur","leopard","lion","llama","lobster","locust","loris","louse","lyrebird","magpie","mallard","manatee","mandrill","mantis","marten","meerkat","mink","mole","mongoose","monkey","moose","mosquito","mouse","mule","narwhal","newt","nightingale","octopus","okapi","opossum","oryx","ostrich","otter","owl","oyster","panther","parrot","partridge","peafowl","pelican","penguin","pheasant","pig","pigeon","pony","porcupine","porpoise","quail","quelea","quetzal","rabbit","raccoon","rail","ram","rat","raven","reindeer","rhinoceros","rook","salamander","salmon","sandpiper","sardine","scorpion","seahorse","seal","shark","sheep","shrew","skunk","snail","snake","sparrow","spider","spoonbill","squid","squirrel","starling","stingray","stinkbug","stork","swallow","swan","tapir","tarsier","termite","tiger","toad","trout","turkey","turtle","viper","vulture","wallaby","walrus","wasp","weasel","whale","wildcat","wolf","wolverine","wombat","woodcock","woodpecker","worm","wren","yak","zebra"];function we(){return"".concat(Object(me.j)(Object(me.ub)(yt))," ").concat(Object(me.j)(Object(me.ub)(Dt)))}var pe=t("./frontend/src/scenes/insights/utils/cleanFilters.ts"),He=t("./frontend/src/scenes/teamLogic.ts"),fe=t("./frontend/src/scenes/urls.ts"),Oe=t("./node_modules/kea-router/lib/index.js"),Zt=t("./frontend/src/scenes/experiments/experimentsLogic.ts"),lt=t("./frontend/src/lib/constants.tsx"),rn=t("./frontend/src/scenes/trends/trendsLogic.ts"),wt=t("./frontend/src/lib/utils/eventUsageLogic.ts"),zn=t("./frontend/src/scenes/userLogic.ts"),Mn=t("./frontend/src/lib/components/Tooltip.tsx"),Yt=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),pn=t("./frontend/src/models/groupsModel.ts"),sn=t("./frontend/src/lib/components/lemonToast.tsx");function Ht(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,o)}return s}function W(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Ht(Object(s),!0).forEach(function(o){Le()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Ht(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}var Rt=14,$t=Object(Ce.kea)({props:{},key:function(r){return r.experimentId||"new"},path:function(r){return["scenes","experiment","experimentLogic",r]},connect:{values:[He.a,["currentTeamId"],zn.a,["hasAvailableFeature"],pn.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[Zt.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:function(r){return{experiment:r}},createExperiment:function(r,s,o){return{draft:r,runningTime:s,sampleSize:o}},setExperimentInsightId:function(r){return{shortId:r}},createNewExperimentInsight:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setNewExperimentData:function(r){return{experimentData:r}},updateExperimentGroup:function(r,s){return{variant:r,idx:s}},removeExperimentGroup:function(r){return{idx:r}},setExperimentInsightType:function(r){return{insightType:r}},setEditExperiment:function(r){return{editing:r}},setSecondaryMetrics:function(r){return{secondaryMetrics:r}},resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:function(r,s){var o=s.experimentData;if(o.filters){var g=W(W({},r==null?void 0:r.filters),o.filters);return W(W(W({},r),o),{},{filters:g})}if(o.parameters){var x=W(W({},r==null?void 0:r.parameters),o.parameters);return W(W(W({},r),o),{},{parameters:x})}return W(W({},r),o)},updateExperimentGroup:function(r,s){var o,g=s.variant,x=s.idx,b=tt()((r==null||(o=r.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]);return b[x]=W(W({},b[x]),g),W(W({},r),{},{parameters:W(W({},r==null?void 0:r.parameters),{},{feature_flag_variants:b})})},addExperimentGroup:function(r){var s;if(!(r==null||(s=r.parameters)===null||s===void 0)&&s.feature_flag_variants){var o=Pt(r.parameters.feature_flag_variants.length+1),g=r.parameters.feature_flag_variants.map(function(x,b){return W(W({},x),{},{rollout_percentage:o[b]})});return W(W({},r),{},{parameters:W(W({},r.parameters),{},{feature_flag_variants:[].concat(tt()(g),[{key:"test_group_".concat(r.parameters.feature_flag_variants.length),rollout_percentage:o[o.length-1]}])})})}return r},removeExperimentGroup:function(r,s){var o,g,x=s.idx;if(!r)return r;var b=tt()(((o=r.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]);b.splice(x,1);var m=Pt(((r==null||(g=r.parameters)===null||g===void 0?void 0:g.feature_flag_variants)||[]).length-1),I=b.map(function(p,q){return W(W({},p),{},{rollout_percentage:m[q]})});return W(W({},r),{},{parameters:W(W({},r.parameters),{},{feature_flag_variants:I})})},setSecondaryMetrics:function(r,s){var o=s.secondaryMetrics,g=o.map(function(x){return x});return W(W({},r),{},{secondary_metrics:g})},resetNewExperiment:function(){return{parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}}}}],experimentInsightType:[j.s.TRENDS,{setExperimentInsightType:function(r,s){var o=s.insightType;return o}}],experimentInsightId:[null,{setExperimentInsightId:function(r,s){var o=s.shortId;return o}}],editingExistingExperiment:[!1,{setEditExperiment:function(r,s){var o=s.editing;return o}}]},listeners:function(r){var s=r.values,o=r.props,g=r.actions;return{createExperiment:function(){var x=xe()(P.a.mark(function m(I){var p,q,re,Te,k,U,f,De,jt,It;return P.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:if(q=I.draft,re=I.runningTime,Te=I.sampleSize,k=null,U=!!o.experimentId&&o.experimentId!=="new",$.prev=3,!U){$.next=14;break}return $.next=7,dt.b.update("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId),W(W({},s.newExperimentData),{},{parameters:W(W({},(f=s.newExperimentData)===null||f===void 0?void 0:f.parameters),{},{recommended_running_time:re,recommended_sample_size:Te})},!q&&{start_date:Object(Ee.a)()}));case 7:if(k=$.sent,!(!((De=k)===null||De===void 0)&&De.id)){$.next=12;break}return g.updateExperiments(k),Oe.router.actions.push(fe.a.experiment(k.id)),$.abrupt("return");case 12:$.next=18;break;case 14:return $.next=16,dt.b.create("api/projects/".concat(s.currentTeamId,"/experiments"),W(W({},s.newExperimentData),{},{parameters:W(W({},(jt=s.newExperimentData)===null||jt===void 0?void 0:jt.parameters),{},{recommended_running_time:re,recommended_sample_size:Te})},!q&&{start_date:Object(Ee.a)()}));case 16:k=$.sent,k&&wt.f.actions.reportExperimentCreated(k);case 18:$.next=24;break;case 20:return $.prev=20,$.t0=$.catch(3),sn.a.error($.t0.detail||"Failed to create experiment"),$.abrupt("return");case 24:!((p=k)===null||p===void 0)&&p.id&&(It=k.id,Oe.router.actions.push(fe.a.experiment(It)),g.addToExperiments(k),sn.a.success("Experiment ".concat(U?"updated":"created"),{button:{label:"View it",action:function(){Oe.router.actions.push(fe.a.experiment(It))}}}));case 25:case"end":return $.stop()}},m,null,[[3,20]])}));function b(m){return x.apply(this,arguments)}return b}(),createNewExperimentInsight:function(){var x=xe()(P.a.mark(function m(I){var p,q,re,Te;return P.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return p=I.filters,s.experimentInsightType===j.s.FUNNELS?q=Object(pe.a)(W({insight:j.s.FUNNELS,funnel_viz_type:j.o.Steps,display:j.d.FunnelViz,date_from:Object(Ee.a)().subtract(Rt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Ee.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:lt.q.horizontal},p)):q=Object(pe.a)(W({insight:j.s.TRENDS,date_from:Object(Ee.a)().subtract(Rt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Ee.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},p)),re={name:we(),description:"",tags:[],filters:q,result:null},U.next=5,dt.b.create("api/projects/".concat(s.currentTeamId,"/insights"),re);case 5:Te=U.sent,g.setExperimentInsightId(Te.short_id),g.setNewExperimentData({filters:W({},re.filters)});case 8:case"end":return U.stop()}},m)}));function b(m){return x.apply(this,arguments)}return b}(),setFilters:function(b){var m=b.filters;if(s.experimentInsightType===j.s.FUNNELS){var I;(I=Pe.a.findMounted({dashboardItemId:s.experimentInsightId}))===null||I===void 0||I.actions.setFilters(m)}else{var p;(p=rn.a.findMounted({dashboardItemId:s.experimentInsightId}))===null||p===void 0||p.actions.setFilters(m)}},loadExperimentSuccess:function(){var x=xe()(P.a.mark(function m(I){var p;return P.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:p=I.experimentData,p&&wt.f.actions.reportExperimentViewed(p),g.setExperimentInsightType((p==null?void 0:p.filters.insight)||j.s.FUNNELS),p!=null&&p.start_date?(g.resetNewExperiment(),g.loadExperimentResults(),g.loadSecondaryMetricResults()):(g.setNewExperimentData(W({},p)),g.createNewExperimentInsight(p==null?void 0:p.filters));case 4:case"end":return re.stop()}},m)}));function b(m){return x.apply(this,arguments)}return b}(),launchExperiment:function(){var x=xe()(P.a.mark(function m(){var I;return P.a.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:I=Object(Ee.a)(),g.updateExperiment({start_date:I.format("YYYY-MM-DDTHH:mm")}),s.experimentData&&wt.f.actions.reportExperimentLaunched(s.experimentData,I);case 3:case"end":return q.stop()}},m)}));function b(){return x.apply(this,arguments)}return b}(),endExperiment:function(){var x=xe()(P.a.mark(function m(){var I,p,q;return P.a.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:p=Object(Ee.a)(),g.updateExperiment({end_date:p.format("YYYY-MM-DDTHH:mm")}),q=p.diff((I=s.experimentData)===null||I===void 0?void 0:I.start_date,"second"),s.experimentData&&wt.f.actions.reportExperimentCompleted(s.experimentData,p,q,s.areResultsSignificant);case 4:case"end":return Te.stop()}},m)}));function b(){return x.apply(this,arguments)}return b}(),archiveExperiment:function(){var x=xe()(P.a.mark(function m(){return P.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:g.updateExperiment({archived:!0}),s.experimentData&&wt.f.actions.reportExperimentArchived(s.experimentData);case 2:case"end":return p.stop()}},m)}));function b(){return x.apply(this,arguments)}return b}(),setExperimentInsightType:function(){if(o.experimentId==="new"||s.editingExistingExperiment)g.createNewExperimentInsight();else{var b;g.createNewExperimentInsight((b=s.experimentData)===null||b===void 0?void 0:b.filters)}},updateExperimentSuccess:function(){var x=xe()(P.a.mark(function m(I){var p;return P.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:p=I.experimentData,g.updateExperiments(p);case 2:case"end":return re.stop()}},m)}));function b(m){return x.apply(this,arguments)}return b}()}},loaders:function(r){var s=r.values,o=r.props;return{experimentData:[null,{loadExperiment:function(){var g=xe()(P.a.mark(function b(){var m;return P.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(o.experimentId&&o.experimentId!=="new")){p.next=16;break}return p.prev=1,p.next=4,dt.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId));case 4:return m=p.sent,p.abrupt("return",m);case 8:if(p.prev=8,p.t0=p.catch(1),p.t0.status!==404){p.next=14;break}Oe.router.actions.push(fe.a.experiments()),p.next=16;break;case 14:throw sn.a.error("Failed to load experiment ".concat(o.experimentId)),new Error("Failed to load experiment ".concat(o.experimentId));case 16:return p.abrupt("return",null);case 17:case"end":return p.stop()}},b,null,[[1,8]])}));function x(){return g.apply(this,arguments)}return x}(),updateExperiment:function(){var g=xe()(P.a.mark(function b(m){var I;return P.a.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,dt.b.update("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId),m);case 2:return I=q.sent,q.abrupt("return",I);case 4:case"end":return q.stop()}},b)}));function x(b){return g.apply(this,arguments)}return x}()}],experimentResults:[null,{loadExperimentResults:function(){var g=xe()(P.a.mark(function b(){var m;return P.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,dt.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId,"/results"));case 3:return m=p.sent,p.abrupt("return",W(W({},m),{},{itemID:Math.random().toString(36).substring(2,15)}));case 7:if(p.prev=7,p.t0=p.catch(0),p.t0.code!=="no_data"){p.next=11;break}return p.abrupt("return",null);case 11:return sn.a.error(p.t0.detail||"Failed to load experiment results"),p.abrupt("return",null);case 13:case"end":return p.stop()}},b,null,[[0,7]])}));function x(){return g.apply(this,arguments)}return x}()}],secondaryMetricResults:[null,{loadSecondaryMetricResults:function(){var g=xe()(P.a.mark(function b(){var m;return P.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Promise.all((((m=s.experimentData)===null||m===void 0?void 0:m.secondary_metrics)||[]).map(function(){var q=xe()(P.a.mark(function re(Te,k){var U;return P.a.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=3,dt.b.get("api/projects/".concat(s.currentTeamId,"/experiments/").concat(o.experimentId,"/secondary_results?id=").concat(k));case 3:return U=De.sent,De.abrupt("return",U.result);case 7:return De.prev=7,De.t0=De.catch(0),De.abrupt("return",{});case 10:case"end":return De.stop()}},re,null,[[0,7]])}));return function(re,Te){return q.apply(this,arguments)}}()));case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},b)}));function x(){return g.apply(this,arguments)}return x}()}]}},selectors:{breadcrumbs:[function(a){return[a.experimentData,function(r,s){return s.experimentId}]},function(a,r){return[{name:"Experiments",path:fe.a.experiments()},{name:(a==null?void 0:a.name)||"New",path:fe.a.experiment(r||"new")}]}],variants:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var s,o;if(r!=null&&r.start_date){var g;return(r==null||(g=r.parameters)===null||g===void 0?void 0:g.feature_flag_variants)||[]}return(a==null||(s=a.parameters)===null||s===void 0?void 0:s.feature_flag_variants)||(r==null||(o=r.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[function(a){return[a.newExperimentData,a.groupsTaxonomicTypes]},function(a,r){var s;return(a==null||(s=a.filters)===null||s===void 0?void 0:s.aggregation_group_type_index)!=null&&r.length>0?[r[a.filters.aggregation_group_type_index]]:[M.a.PersonProperties,M.a.Cohorts]}],parsedSecondaryMetrics:[function(a){return[a.newExperimentData,a.experimentData]},function(a,r){var s=(a==null?void 0:a.secondary_metrics)||(r==null?void 0:r.secondary_metrics)||[];return s}],minimumDetectableChange:[function(a){return[a.newExperimentData]},function(a){var r;return(a==null||(r=a.parameters)===null||r===void 0?void 0:r.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){return Math.ceil(1600*r*(1-r/100)/(a*a))}}],areResultsSignificant:[function(a){return[a.experimentResults]},function(a){return(a==null?void 0:a.significant)||!1}],significanceBannerDetails:[function(a){return[a.experimentResults]},function(a){if((a==null?void 0:a.significance_code)===j.E.HighLoss){var r;return n.a.createElement(n.a.Fragment,null,"This is because the expected loss in conversion is greater than 1%",n.a.createElement(Mn.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(r=((a==null?void 0:a.expected_loss)||0)*100)===null||r===void 0?void 0:r.toFixed(2),"%")},n.a.createElement(Yt.a,{style:{padding:"4px 2px"}})),".")}if((a==null?void 0:a.significance_code)===j.E.HighPValue){var s;return n.a.createElement(n.a.Fragment,null,"This is because the p value is greater than 0.05",n.a.createElement(Mn.a,{placement:"right",title:n.a.createElement(n.a.Fragment,null,"Current value is ",(a==null||(s=a.p_value)===null||s===void 0?void 0:s.toFixed(3))||1,".")},n.a.createElement(Yt.a,{style:{padding:"4px 2px"}})),".")}return(a==null?void 0:a.significance_code)===j.E.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(a==null?void 0:a.significance_code)===j.E.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[function(a){return[a.minimumDetectableChange]},function(a){return function(r){var s=r*a/100,o=r,g=s+r;return parseFloat((4/Math.pow(Math.sqrt(o/Rt)-Math.sqrt(g/Rt),2)).toFixed(1))}}],expectedRunningTime:[function(){return[]},function(){return function(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rt;return parseFloat((r/(a/s)).toFixed(1))}}],conversionRateForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var s="Can't find variant";if(!a)return s;var o=(a==null?void 0:a.insight).find(function(g){var x,b;return((x=g[0])===null||x===void 0||(b=x.breakdown_value)===null||b===void 0?void 0:b[0])===r});return o?(o[o.length-1].count/o[0].count*100).toFixed(1):s}}],getIndexForVariant:[function(a){return[a.experimentResults]},function(a){return function(r,s){if(!a)return 0;var o=-1;return s===j.s.FUNNELS?o=tt()(a==null?void 0:a.insight).sort(function(g,x){var b,m;return((b=x[0])===null||b===void 0?void 0:b.count)-((m=g[0])===null||m===void 0?void 0:m.count)}).findIndex(function(g){var x,b;return((x=g[0])===null||x===void 0||(b=x.breakdown_value)===null||b===void 0?void 0:b[0])===r}):o=(a==null?void 0:a.insight).findIndex(function(g){return g.breakdown_value===r}),o===-1?0:o}}],countDataForVariant:[function(a){return[a.experimentResults]},function(a){return function(r){var s="Can't find variant";if(!a)return s;var o=(a==null?void 0:a.insight).find(function(g){return g.breakdown_value===r});return o?o.count.toString():s}}],highestProbabilityVariant:[function(a){return[a.experimentResults]},function(a){if(a){var r=Math.max.apply(Math,tt()(Object.values(a.probability)));return Object.keys(a.probability).find(function(s){return Math.abs(a.probability[s]-r)<Number.EPSILON})}}],areTrendResultsConfusing:[function(a){return[a.experimentResults,a.highestProbabilityVariant]},function(a,r){if(!a)return!1;var s=(a==null?void 0:a.insight).reduce(function(o,g){return g.count>o.count?g:o},{count:0,breakdown_value:""});return s.count?s.breakdown_value!==r:!1}]},urlToAction:function(r){var s=r.actions,o=r.values,g=r.props;return{"/experiments/:id":function(b){var m=b.id;if(!o.hasAvailableFeature(j.c.EXPERIMENTATION)){Oe.router.actions.push("/experiments");return}if(m){var I=m==="new"?"new":parseInt(m);I==="new"&&(s.createNewExperimentInsight(),s.resetNewExperiment(),s.setSecondaryMetrics([])),s.setEditExperiment(!1),I!=="new"&&I===g.experimentId&&s.loadExperiment()}}}}});function Pt(a){var r=Math.round(100/a),s=r*a,o=s-100,g=new Array(a).fill(r);return g[a-1]=r-o,g}var Re=t("./frontend/src/scenes/insights/InsightContainer.tsx"),le=t("./frontend/src/lib/components/icons.tsx"),ot=t("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),xt=t("./node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),qt=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),bn=t("./frontend/src/lib/components/CopyToClipboard.tsx"),On=t("./frontend/src/scenes/funnels/funnelUtils.ts"),Yn=t("./node_modules/antd/es/modal/index.js"),ua=t("./node_modules/antd/es/button/index.js"),ma=t("./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js");function fn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,o)}return s}function Wt(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?fn(Object(s),!0).forEach(function(o){Le()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):fn(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}var kt=14,_t={name:"",filters:{insight:j.s.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},pa={name:"",filters:{insight:j.s.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:lt.q.horizontal}},fa=Object(Ce.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[He.a,["currentTeamId"]]},actions:{setSecondaryMetrics:function(r){return{secondaryMetrics:r}},createNewMetric:!0,addNewMetric:function(r){return{metric:r}},updateMetricFilters:function(r){return{filters:r}},setFilters:function(r){return{filters:r}},setPreviewInsightId:function(r){return{shortId:r}},createPreviewInsight:function(r){return{filters:r}},showModal:!0,hideModal:!1,changeInsightType:function(r){return{type:r}},setCurrentMetricName:function(r){return{name:r}},deleteMetric:function(r){return{metricId:r}}},loaders:function(r){var s=r.values;return{experiments:[[],{loadExperiments:function(){var o=xe()(P.a.mark(function x(){var b;return P.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,dt.b.get("api/projects/".concat(s.currentTeamId,"/experiments"));case 2:return b=I.sent,I.abrupt("return",b.results);case 4:case"end":return I.stop()}},x)}));function g(){return o.apply(this,arguments)}return g}()}]}},reducers:function(r){var s=r.props;return{previewInsightId:[null,{setPreviewInsightId:function(g,x){var b=x.shortId;return b}}],metrics:[s.initialMetrics,{addNewMetric:function(g,x){var b=x.metric;return[].concat(tt()(g),[Wt({},b)])},deleteMetric:function(g,x){var b=x.metricId;return g.filter(function(m,I){return I!==b})}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1}}],currentMetricName:["",{setCurrentMetricName:function(g,x){var b=x.name;return b}}],currentMetric:[_t,{changeInsightType:function(g,x){var b=x.type;return b===j.s.TRENDS?_t:g.filters.insight===j.s.TRENDS?pa:_t},updateMetricFilters:function(g,x){var b=x.filters;return Wt(Wt({},g),{},{filters:b})}}]}},listeners:function(r){var s=r.actions,o=r.values,g=r.props;return{createPreviewInsight:function(){var x=xe()(P.a.mark(function m(I){var p,q,re,Te;return P.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return p=I.filters,(p==null?void 0:p.insight)===j.s.FUNNELS?q=Object(pe.a)(Wt({insight:j.s.FUNNELS,funnel_viz_type:j.o.Steps,display:j.d.FunnelViz,date_from:Object(Ee.a)().subtract(kt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Ee.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:lt.q.horizontal},p)):q=Object(pe.a)(Wt({insight:j.s.TRENDS,date_from:Object(Ee.a)().subtract(kt,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(Ee.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},p)),re={description:"",tags:[],filters:q,result:null},U.next=5,dt.b.create("api/projects/".concat(He.a.values.currentTeamId,"/insights"),re);case 5:Te=U.sent,s.setPreviewInsightId(Te.short_id);case 7:case"end":return U.stop()}},m)}));function b(m){return x.apply(this,arguments)}return b}(),setFilters:function(b){var m=b.filters;if(m.insight===j.s.FUNNELS){var I;(I=Pe.a.findMounted({dashboardItemId:o.previewInsightId}))===null||I===void 0||I.actions.setFilters(m)}else{var p;(p=rn.a.findMounted({dashboardItemId:o.previewInsightId}))===null||p===void 0||p.actions.setFilters(m)}},createNewMetric:function(){s.addNewMetric(Wt(Wt({},o.currentMetric),{},{name:o.currentMetricName})),g.onMetricsChange(o.metrics),s.changeInsightType(j.s.TRENDS),s.setCurrentMetricName("")},deleteMetric:function(){g.onMetricsChange(o.metrics)},changeInsightType:function(){return s.createPreviewInsight(o.currentMetric.filters)}}},events:function(r){var s=r.actions;return{afterMount:function(){s.createPreviewInsight()}}}}),Tt=t("./frontend/src/lib/components/LemonButton/index.ts"),Ln=t("./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function Hn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,o)}return s}function Mt(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Hn(Object(s),!0).forEach(function(o){Le()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Hn(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}function Vt(a){var r=a.onMetricsChange,s=a.initialMetrics,o=fa({onMetricsChange:r,initialMetrics:s}),g=Object(Ce.useValues)(o),x=g.previewInsightId,b=g.metrics,m=g.modalVisible,I=g.currentMetric,p=Object(Ce.useActions)(o),q=p.createNewMetric,re=p.updateMetricFilters,Te=p.setFilters,k=p.showModal,U=p.hideModal,f=p.changeInsightType,De=p.setCurrentMetricName,jt=p.deleteMetric,It=Object(Ce.useValues)(Object(Ye.c)({dashboardItemId:x,syncWithUrl:!1})),tn=It.insightProps,$=Object(Ce.useValues)(Object(Pe.a)(tn)),nn=$.isStepsEmpty,an=$.filterSteps;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Yn.a,{title:"Add secondary metric",visible:m,destroyOnClose:!0,onCancel:U,footer:null,style:{minWidth:600}},n.a.createElement(T.a,{layout:"vertical",initialValues:{type:j.s.TRENDS},onValuesChange:function(nt){nt.name&&De(nt.name)},onFinish:function(){q(),U()},scrollToFirstError:!0,requiredMark:!1},n.a.createElement(T.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(ne.a,null)),n.a.createElement(T.a.Item,{name:"type",label:"Type"},n.a.createElement(de.a,{style:{display:"flex"},value:I.filters.insight,onChange:function(){f()},suffixIcon:n.a.createElement(xt.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(de.a.Option,{value:j.s.TRENDS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(de.a.Option,{value:j.s.FUNNELS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel")))))),n.a.createElement(T.a.Item,{name:"query",label:"Query"},n.a.createElement(We.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},I.filters.insight===j.s.FUNNELS&&n.a.createElement(ze.a,{filters:I.filters,setFilters:function(nt){var Nt=Mt(Mt({},I.filters),{},{insight:j.s.FUNNELS},nt);re(Nt),Te(Nt)},typeKey:"funnel-preview-metric",mathAvailability:Ln.b.None,hideDeleteBtn:an.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!nn,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[M.a.EventProperties,M.a.PersonProperties,M.a.Cohorts,M.a.Elements],rowClassName:"action-filters-bordered"}),I.filters.insight===j.s.TRENDS&&n.a.createElement(ze.a,{entitiesLimit:1,horizontalUI:!0,filters:I.filters,setFilters:function(nt){var Nt=Mt(Mt({},I.filters),{},{insight:j.s.TRENDS},nt);re(Nt),Te(Nt)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,propertiesTaxonomicGroupTypes:[M.a.EventProperties,M.a.PersonProperties,M.a.Cohorts,M.a.Elements]}))),n.a.createElement(T.a.Item,{name:"metric-preview",label:"Metric preview"},n.a.createElement(Ce.BindLogic,{logic:Ye.c,props:tn},n.a.createElement(Re.a,{disableHeader:!0,disableTable:!0}))),n.a.createElement(y.a,{justify:"end"},n.a.createElement(Tt.a,{type:"secondary",className:"mr-05",onClick:function(){return U()}},"Cancel"),n.a.createElement(Tt.a,{type:"primary",htmlType:"submit"},"Save")))),n.a.createElement(y.a,null,n.a.createElement(E.a,null,b.map(function(ve,nt){return n.a.createElement(y.a,{key:nt,className:"mt"},n.a.createElement(y.a,{align:"middle",className:"full-width border-all",style:{padding:8}},n.a.createElement("div",{style:{fontWeight:500}},"Name")," ",n.a.createElement("div",{className:"metric-name"},ve.name),n.a.createElement(ma.a,{className:"text-danger",style:{padding:8},onClick:function(){return jt(nt)}})),n.a.createElement(We.a,{className:"full-width",style:{borderTop:"none"},bodyStyle:{padding:0}},ve.filters.insight===j.s.FUNNELS&&n.a.createElement(ze.a,{filters:ve.filters,setFilters:function(Bt){var mt=Mt(Mt({},ve.filters),{},{insight:j.s.FUNNELS},Bt);re(mt),Te(mt)},typeKey:"funnel-preview-".concat(nt),mathAvailability:Ln.b.None,hideDeleteBtn:an.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!nn,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[M.a.EventProperties,M.a.PersonProperties,M.a.Cohorts,M.a.Elements],rowClassName:"action-filters-bordered",readOnly:!0}),ve.filters.insight===j.s.TRENDS&&n.a.createElement(ze.a,{horizontalUI:!0,filters:ve.filters,setFilters:function(Bt){var mt=Mt(Mt({},ve.filters),{},{insight:j.s.TRENDS},Bt);re(mt),Te(mt)},typeKey:"trend-preview-".concat(nt),buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[M.a.EventProperties,M.a.PersonProperties,M.a.Cohorts,M.a.Elements],readOnly:!0})))}),b&&!(b.length>2)&&n.a.createElement(E.a,null,n.a.createElement("div",{className:"mb-05 mt"},n.a.createElement(ua.a,{style:{color:"var(--primary)",minWidth:240},onClick:k},"Add metric"))))))}try{Vt.displayName="SecondaryMetrics",Vt.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:Vt.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(a){}var $n=t("./frontend/src/lib/colors.ts"),vn=t("./frontend/src/lib/components/EntityFilterInfo.tsx"),va=t("./frontend/src/lib/components/EditableField/EditableField.tsx"),Gn=t("./frontend/src/lib/components/Link.tsx"),An=t("./frontend/src/lib/logic/featureFlagLogic.ts"),La=t("./node_modules/antd/es/slider/index.js"),Aa=t("./node_modules/antd/es/input-number/index.js"),ga=t("./frontend/src/lib/components/InsightLabel/index.tsx"),ha=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function Ea(){var a=Object(K.useState)(!1),r=R()(a,2),s=r[0],o=r[1],g=Object(K.useState)(!1),x=R()(g,2),b=x[0],m=x[1];return n.a.createElement(We.a,{className:"experiment-workflow",title:n.a.createElement("span",{className:"card-secondary"},"Experiment workflow")},n.a.createElement(y.a,null,n.a.createElement(E.a,{className:"exp-workflow-step step-completed full-width"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(le.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),n.a.createElement("b",{className:"ml-05"},"Create experiment")),n.a.createElement("div",{className:"ml-2"},"Set variants, select participants, and add secondary metrics"))),n.a.createElement(y.a,null,n.a.createElement(E.a,{className:"full-width exp-workflow-step ".concat(s?"step-completed":""),onClick:function(){return o(!s)}},n.a.createElement(y.a,{align:"middle"},s?n.a.createElement(le.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(le.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Validate experiment")),n.a.createElement("div",{className:"ml-2"},"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."))),n.a.createElement(y.a,null,n.a.createElement(E.a,{className:"full-width exp-workflow-step ".concat(b?"step-completed":""),onClick:function(){return m(!b)}},n.a.createElement(y.a,{align:"middle"},b?n.a.createElement(le.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):n.a.createElement(le.IconRadioButtonUnchecked,null),n.a.createElement("b",{className:"ml-05"},"Launch experiment")),n.a.createElement("div",{className:"ml-2"},"Run your experiment, monitor results, and decide when to terminate your experiment."))))}function ln(a){var r,s,o,g,x,b,m=a.experiment,I=a.trendCount,p=a.funnelConversionRate,q=a.trendExposure,re=a.funnelSampleSize,Te=a.funnelEntrants,k=(m==null?void 0:m.id)||"new",U=Object(Ce.useValues)($t({experimentId:k})),f=U.experimentInsightType,De=U.editingExistingExperiment,jt=U.minimumDetectableChange,It=U.expectedRunningTime,tn=U.aggregationLabel,$=Object(Ce.useActions)($t({experimentId:k})),nn=$.setNewExperimentData,an=f===j.s.FUNNELS&&100-p<50?100-p:50,ve=Object(Ee.a)().diff(Object(Ee.a)(m==null?void 0:m.start_date),"hour"),nt=0;m!=null&&m.start_date?nt=It(Te||1,re||0,ve):nt=It(Te||1,re||0);var Nt=Object(Ee.a)(m==null?void 0:m.start_date).add(nt,"hour"),Bt=!(m!=null&&m.end_date)&&ve>=24&&Te&&re,mt=Object(me.s)(m==null||(r=m.filters)===null||r===void 0?void 0:r.properties);return n.a.createElement(y.a,null,n.a.createElement(E.a,{span:!(m!=null&&m.start_date)&&k!=="new"&&!De?12:24},k==="new"&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("b",null,"Experiment preview")),n.a.createElement("div",{className:"text-muted"},"Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "))),(k==="new"||De)&&n.a.createElement(y.a,{className:"mb"},n.a.createElement(E.a,{span:24},n.a.createElement("div",null,n.a.createElement("b",null,"Minimum acceptable improvement"),n.a.createElement(Ae.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept."},n.a.createElement(Yt.a,{style:{marginLeft:4}}))),n.a.createElement(y.a,{className:"mde-slider"},n.a.createElement(E.a,{span:8},n.a.createElement(La.a,{defaultValue:5,value:jt,min:1,max:an,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:function(Ne){nn({parameters:{minimum_detectable_effect:Ne}})},tipFormatter:function(Ne){return"".concat(Ne,"%")}})),n.a.createElement(Aa.a,{min:1,max:an,defaultValue:5,formatter:function(Ne){return"".concat(Ne,"%")},style:{margin:"0 16px"},value:jt,onChange:function(Ne){nn({parameters:{minimum_detectable_effect:Ne}})}})))),n.a.createElement(y.a,{className:"experiment-preview-row ".concat(m!=null&&m.start_date?"mr":"")},f===j.s.TRENDS?n.a.createElement(n.a.Fragment,null,!(m!=null&&m.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Baseline Count"),n.a.createElement("div",{className:"l4"},Object(me.O)(I||0))),n.a.createElement(E.a,{span:6},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Count"),n.a.createElement("div",{className:"l4"},Object(me.O)(I+Math.ceil(I*(jt/100))||0)))),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(me.O)(q||0))," days"))):n.a.createElement(n.a.Fragment,null,!(m!=null&&m.start_date)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Baseline Conversion Rate"),n.a.createElement("div",{className:"l4"},p.toFixed(1),"%")),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Minimum Acceptable Conversion Rate"),n.a.createElement("div",{className:"l4"},(p+jt).toFixed(1),"%"))),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended Sample Size"),n.a.createElement("div",{className:"pb"},n.a.createElement("span",{className:"l4"},"~",Object(me.O)(re||0))," persons")),!(m!=null&&m.start_date)&&n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Recommended running time"),n.a.createElement("div",null,n.a.createElement("span",{className:"l4"},"~",Object(me.O)(nt||0))," days"))),n.a.createElement(y.a,{className:"full-width mt"},n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Experiment variants"),n.a.createElement("ul",{className:"variants-list"},m==null||(s=m.parameters)===null||s===void 0||(o=s.feature_flag_variants)===null||o===void 0?void 0:o.map(function(at,Ne){return n.a.createElement("li",{key:Ne},at.key)}))),n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary"},"Participants"),n.a.createElement("div",null,mt!=null&&mt.length?n.a.createElement("div",null,mt==null?void 0:mt.map(function(at){return n.a.createElement(ha.c,{key:at.key,item:at,style:{margin:2,cursor:"default"}})})):n.a.createElement(n.a.Fragment,null,"100% of"," ",(m==null||(g=m.filters)===null||g===void 0?void 0:g.aggregation_group_type_index)!=null?Object(me.j)(tn(m.filters.aggregation_group_type_index).plural):"users")))),n.a.createElement(y.a,{className:"full-width"},k!=="new"&&!De&&n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Start date"),m!=null&&m.start_date?n.a.createElement("span",null,Object(Ee.a)(m==null?void 0:m.start_date).format("D MMM YYYY")):n.a.createElement("span",{className:"description"},"Not started yet")),f===j.s.FUNNELS&&Bt?n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Expected end date"),n.a.createElement("span",null,Nt.isAfter(Object(Ee.a)())?Nt.format("D MMM YYYY"):Object(Ee.a)().format("D MMM YYYY"))):null,(m==null?void 0:m.end_date)&&n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"card-secondary mt"},"Completed date"),n.a.createElement("span",null,Object(Ee.a)(m==null?void 0:m.end_date).format("D MMM YYYY"))))),k!=="new"&&!De&&n.a.createElement(y.a,{className:"experiment-preview-row"},n.a.createElement(E.a,null,n.a.createElement("div",{className:"card-secondary mb-05"},f===j.s.FUNNELS?"Conversion goal steps":"Trend goal"),[].concat(tt()((m==null||(x=m.filters)===null||x===void 0?void 0:x.events)||[]),tt()((m==null||(b=m.filters)===null||b===void 0?void 0:b.actions)||[])).sort(function(at,Ne){return(at.order||0)-(Ne.order||0)}).map(function(at,Ne){var on;return n.a.createElement(E.a,{key:Ne,className:"mb-05"},n.a.createElement(y.a,{style:{marginBottom:4}},n.a.createElement("div",{className:"preview-conversion-goal-num"},f===j.s.FUNNELS?(at.order||0)+1:Ne+1),n.a.createElement("b",null,n.a.createElement(ga.b,{action:at,showCountedByTag:f===j.s.TRENDS,hideIcon:!0}))),(on=at.properties)===null||on===void 0?void 0:on.map(function(Cn){return n.a.createElement(ha.c,{key:Cn.key,item:Cn})}))})))),k!=="new"&&!De&&!(m!=null&&m.start_date)&&n.a.createElement(E.a,{span:12,className:"pl"},n.a.createElement(Ea,null)))}try{ln.displayName="ExperimentPreview",ln.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:ln.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(a){}var xn=t("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx");function gn(a){var r,s,o,g=a.experiment,x=Object(K.useState)("control"),b=R()(x,2),m=b[0],I=b[1];return n.a.createElement(We.a,{title:n.a.createElement("span",{className:"card-secondary"},"Feature flag usage and implementation"),className:"experiment-implementation-details"},n.a.createElement(y.a,{justify:"space-between",className:"mb-05"},n.a.createElement("div",null,n.a.createElement("span",{className:"mr-05"},"Variant group"),n.a.createElement(de.a,{onChange:I,defaultValue:"control",suffixIcon:n.a.createElement(xt.a,null)},g==null||(r=g.parameters)===null||r===void 0||(s=r.feature_flag_variants)===null||s===void 0?void 0:s.map(function(p,q){return n.a.createElement(de.a.Option,{key:q,value:p.key},p.key)}))),n.a.createElement("div",null,n.a.createElement(Xn,null))),n.a.createElement("b",null,"Implement your experiment in code"),n.a.createElement(xn.a,{language:xn.b.JavaScript,wrap:!0},"if (posthog.getFeatureFlag('".concat((o=g==null?void 0:g.feature_flag_key)!==null&&o!==void 0?o:"","') === '").concat(m,`') {
    // where '`).concat(m,`' is the variant, run your code here
}`)),n.a.createElement("b",null,"Test that it works"),n.a.createElement(xn.a,{language:xn.b.JavaScript},"posthog.feature_flags.override({'".concat(g==null?void 0:g.feature_flag_key,"': '").concat(m,"'})")),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://posthog.com/docs/user-guides/feature-flags"},n.a.createElement(y.a,{align:"middle"},"Experiment implementation guide",n.a.createElement(le.IconOpenInNew,{className:"ml-05"}))))}try{gn.displayName="ExperimentImplementationDetails",gn.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:gn.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(a){}function wn(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);r&&(o=o.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable})),s.push.apply(s,o)}return s}function jn(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?wn(Object(s),!0).forEach(function(o){Le()(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):wn(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}var Jn={component:en,logic:$t,paramsToProps:function(r){var s=r.params.id;return{experimentId:s==="new"?"new":parseInt(s)}}};function en(){var a,r,s,o,g,x,b,m,I,p,q,re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Te=re.id,k=Object(Ce.useValues)($t({experimentId:Te})),U=k.newExperimentData,f=k.experimentData,De=k.experimentInsightId,jt=k.minimumSampleSizePerVariant,It=k.recommendedExposureForCountData,tn=k.variants,$=k.experimentResults,nn=k.countDataForVariant,an=k.editingExistingExperiment,ve=k.experimentInsightType,nt=k.experimentResultsLoading,Nt=k.parsedSecondaryMetrics,Bt=k.areResultsSignificant,mt=k.conversionRateForVariant,at=k.getIndexForVariant,Ne=k.significanceBannerDetails,on=k.areTrendResultsConfusing,Cn=k.taxonomicGroupTypesForSelection,ya=k.groupTypes,Qn=k.aggregationLabel,Kt=k.secondaryMetricResults,Zn=k.experimentDataLoading,cn=k.secondaryMetricResultsLoading,Ct=Object(Ce.useActions)($t({experimentId:Te})),Gt=Ct.setNewExperimentData,Sn=Ct.createExperiment,dn=Ct.launchExperiment,Pn=Ct.setFilters,qn=Ct.setEditExperiment,Tn=Ct.endExperiment,wa=Ct.addExperimentGroup,Ra=Ct.updateExperiment,ba=Ct.updateExperimentGroup,hn=Ct.removeExperimentGroup,un=Ct.setSecondaryMetrics,ea=Ct.setExperimentInsightType,Oa=Ct.archiveExperiment,xa=Object(Ce.useValues)(An.a),Rn=xa.featureFlags,ja=T.a.useForm(),Ca=R()(ja,1),ta=Ca[0],_n=Object(K.useState)(!0),Sa=R()(_n,2),na=Sa[0],Vn=Sa[1],aa=Object(Ce.useValues)(Object(Ye.c)({dashboardItemId:De})),Bn=aa.insightProps,En=Object(Ce.useValues)(Object(Pe.a)(Bn)),Pa=En.isStepsEmpty,ra=En.filterSteps,sa=En.filters,Kn=En.results,Ta=En.conversionMetrics,Un=Object(Ce.useValues)(Object(rn.a)(Bn)),Wn=Un.filters,Ia=Un.results,kn=Ta.totalRate*100,_a=jt(kn),la=_a*tn.length,In=(a=Ia[0])===null||a===void 0?void 0:a.count,Nn=Kn==null||(r=Kn[0])===null||r===void 0?void 0:r.count,Na=It(In),yn=Math.floor(24/(tn.length+2)),Fn=ve===j.s.FUNNELS&&($==null?void 0:$.insight)?$.insight.reduce(function(_,Y){var Ze;return((Ze=Y[0])===null||Ze===void 0?void 0:Ze.count)+_},0):0,Fa=ve===j.s.FUNNELS?(Fn||0)/((f==null||(s=f.parameters)===null||s===void 0?void 0:s.recommended_sample_size)||1)*100:Object(Ee.a)().diff(f==null?void 0:f.start_date,"day")/((f==null||(o=f.parameters)===null||o===void 0?void 0:o.recommended_running_time)||1)*100,Da={running:"green",draft:"default",complete:"purple"},oa=function(){if(f!=null&&f.start_date){if(!(f!=null&&f.end_date))return"running"}else return"draft";return"complete"},Ma=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return n.a.createElement(n.a.Fragment,null,Te==="new"||an?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8}},n.a.createElement(ft.a,{title:"New experiment"}),n.a.createElement(y.a,null,n.a.createElement(Tt.a,{type:"secondary",className:"mr-05",onClick:function(){return Oe.router.actions.push(fe.a.experiments())}},"Cancel"),n.a.createElement(Tt.a,{type:"primary",htmlType:"submit",form:"new-experiment"},"Save"))),n.a.createElement(T.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:ta,onValuesChange:function(Y){return Gt(Y)},initialValues:{name:U==null?void 0:U.name,feature_flag_key:U==null?void 0:U.feature_flag_key,description:U==null?void 0:U.description},onFinish:function(){return Sn(!0,Na,la)},requiredMark:!1,scrollToFirstError:!0},n.a.createElement("div",null,n.a.createElement(Ce.BindLogic,{logic:Ye.c,props:Bn},n.a.createElement(y.a,null,n.a.createElement(E.a,{span:12,style:{paddingRight:24}},n.a.createElement(y.a,{className:"full-width"},n.a.createElement(T.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}]},n.a.createElement(ne.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})),n.a.createElement(T.a.Item,{style:{marginBottom:"1rem"},label:n.a.createElement("div",null,"Feature flag key"," ",n.a.createElement(Ae.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment."},n.a.createElement(Yt.a,null))),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}]},n.a.createElement(ne.a,{"data-attr":"experiment-feature-flag-key",disabled:an}))),n.a.createElement(T.a.Item,{label:n.a.createElement("div",null,"Description ",n.a.createElement("span",{className:"text-muted"},"(optional)")),name:"description"},n.a.createElement(ne.a.TextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})),(U==null||(g=U.parameters)===null||g===void 0?void 0:g.feature_flag_variants)&&n.a.createElement(E.a,null,n.a.createElement("label",null,n.a.createElement("b",null,"Experiment variants")),n.a.createElement("div",{className:"text-muted"},"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."),n.a.createElement(E.a,{className:"variants"},U.parameters.feature_flag_variants.map(function(_,Y){return n.a.createElement(T.a,{key:"".concat(_,"-").concat(Y),initialValues:{key:_.key},onValuesChange:function(c){ba(c,Y)}},n.a.createElement(y.a,{key:"".concat(_,"-").concat(Y),className:"feature-flag-variant ".concat(Y===0?"border-top":Y>=3?"border-bottom":"")},n.a.createElement("div",{className:"variant-label",style:jn({},Ma[Y])},Y===0?"Control":"Test"),n.a.createElement(T.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:n.a.createElement(n.a.Fragment,null,n.a.createElement(ot.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores.")}],style:{display:"contents"}},n.a.createElement(ne.a,{disabled:Y===0,"data-attr":"feature-flag-variant-key","data-key-index":Y.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(Y+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})),n.a.createElement("div",{className:"float-right"},!(Y===0||Y===1)&&n.a.createElement(Ae.a,{title:"Delete this variant",placement:"bottomLeft"},n.a.createElement(Tt.a,{type:"primary-alt",compact:!0,icon:n.a.createElement(le.IconDelete,null),onClick:function(){return hn(Y)}})))))}),U.parameters.feature_flag_variants.length<4&&n.a.createElement("div",{className:"feature-flag-variant border-bottom"},n.a.createElement(Tt.a,{onClick:function(){return wa()},fullWidth:!0,icon:n.a.createElement(le.IconPlusMini,null)},"Add test variant")))),n.a.createElement(y.a,{className:"person-selection"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("strong",null,"Select participants")),n.a.createElement(E.a,null,n.a.createElement("div",{className:"text-muted"},"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."),n.a.createElement("div",{className:"mt mb-05"},n.a.createElement("strong",null,"Participant type")),n.a.createElement(de.a,{value:(U==null||(x=U.filters)===null||x===void 0?void 0:x.aggregation_group_type_index)!=null?U.filters.aggregation_group_type_index:-1,onChange:function(Y){var Ze,c=Y!==-1?Y:void 0;c!=(U==null||(Ze=U.filters)===null||Ze===void 0?void 0:Ze.aggregation_group_type_index)&&(Pn({properties:[],aggregation_group_type_index:c}),Gt({filters:{aggregation_group_type_index:c,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1},n.a.createElement(de.a.Option,{key:-1,value:-1},"Persons"),ya.map(function(_){return n.a.createElement(de.a.Option,{key:_.group_type_index,value:_.group_type_index},Object(me.j)(Qn(_.group_type_index).plural))})),n.a.createElement("div",{className:"mt"},n.a.createElement("strong",null,"Filters")),n.a.createElement(ke.a,{pageKey:"experiment-participants-property",propertyFilters:ve===j.s.FUNNELS?Object(me.s)(sa.properties):Object(me.s)(Wn.properties),onChange:function(Y){Gt({filters:{properties:Y}}),Pn({properties:Y.filter(i.b)})},taxonomicGroupTypes:Cn})))),n.a.createElement(y.a,{className:"metrics-selection"},n.a.createElement(E.a,{span:12},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Goal type"),n.a.createElement("div",{className:"text-muted"},ve===j.s.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events")),n.a.createElement(de.a,{style:{display:"flex"},value:ve,onChange:ea,suffixIcon:n.a.createElement(xt.a,null),dropdownMatchSelectWidth:!1},n.a.createElement(de.a.Option,{value:j.s.TRENDS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Trend")))),n.a.createElement(de.a.Option,{value:j.s.FUNNELS},n.a.createElement(E.a,null,n.a.createElement("span",null,n.a.createElement("b",null,"Conversion funnel"))))),n.a.createElement("div",{className:"mb mt"},n.a.createElement("b",null,"Experiment goal"),ve===j.s.TRENDS&&n.a.createElement("div",{className:"text-muted"},"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment.")),n.a.createElement(y.a,null,n.a.createElement(We.a,{className:"action-filters-bordered",style:{width:"100%",marginRight:8},bodyStyle:{padding:0}},ve===j.s.FUNNELS&&n.a.createElement(ze.a,{filters:sa,setFilters:function(Y){Gt({filters:Y}),Pn(Y)},typeKey:"EditFunnel-action",mathAvailability:Ln.b.None,hideDeleteBtn:ra.length===1,buttonCopy:"Add funnel step",buttonType:"link",showSeriesIndicator:!Pa,seriesIndicatorType:"numeric",fullWidth:!0,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[M.a.EventProperties,M.a.PersonProperties,M.a.Cohorts,M.a.Elements],rowClassName:"action-filters-bordered"}),ve===j.s.TRENDS&&n.a.createElement(ze.a,{horizontalUI:!0,filters:Wn,setFilters:function(Y){Gt({filters:Y}),Pn(Y)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[M.a.EventProperties,M.a.PersonProperties,M.a.Cohorts,M.a.Elements],customRowPrefix:Wn.insight===j.s.LIFECYCLE?n.a.createElement(n.a.Fragment,null,"Showing ",n.a.createElement("b",null,"Unique users")," who did"):void 0}))),Rn[lt.o.EXPERIMENTS_SECONDARY_METRICS]&&n.a.createElement(E.a,{className:"secondary-metrics"},n.a.createElement("div",null,n.a.createElement("b",null,"Secondary metrics"),n.a.createElement("span",{className:"text-muted ml-05"},"(optional)")),n.a.createElement("div",{className:"text-muted",style:{marginTop:4}},"Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "),n.a.createElement(Vt,{onMetricsChange:function(Y){return un(Y)},initialMetrics:Nt}))),n.a.createElement(E.a,{span:12,className:"pl"},n.a.createElement("div",{className:"card-secondary mb"},"Goal preview"),n.a.createElement(Re.a,{disableHeader:ve===j.s.TRENDS,disableTable:!0})))),n.a.createElement(y.a,null,n.a.createElement(We.a,{className:"experiment-preview"},n.a.createElement(ln,{experiment:U,trendCount:In,trendExposure:Na,funnelSampleSize:la,funnelEntrants:Nn,funnelConversionRate:kn}))))),n.a.createElement(Tt.a,{className:"float-right",type:"primary",htmlType:"submit"},"Save"))):!Zn&&f?n.a.createElement("div",{className:"view-experiment"},n.a.createElement(y.a,{className:"draft-header"},n.a.createElement(y.a,{justify:"space-between",align:"middle",className:"full-width pb"},n.a.createElement(E.a,null,n.a.createElement(y.a,null,n.a.createElement(ft.a,{style:{paddingRight:8},title:"".concat(f==null?void 0:f.name),buttons:n.a.createElement(n.a.Fragment,null,n.a.createElement(bn.a,{explicitValue:f.feature_flag_key,iconStyle:{color:"var(--text-muted-alt)"}},n.a.createElement("span",{className:"text-muted"},f.feature_flag_key)),n.a.createElement(B.a,{style:{alignSelf:"center"},color:Da[oa()]},n.a.createElement("b",{className:"uppercase"},oa())),$&&f.end_date&&n.a.createElement(B.a,{style:{alignSelf:"center"},color:Bt?"green":"geekblue"},n.a.createElement("b",{className:"uppercase"},Bt?"Significant Results":"Results not significant")))})),n.a.createElement("span",{className:"exp-description"},f.start_date?n.a.createElement(va.a,{multiline:!0,name:"description",value:f.description||"",placeholder:"Description (optional)",onSave:function(Y){return Ra({description:Y})},maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):n.a.createElement(n.a.Fragment,null,f.description||"There is no description for this experiment."))),f&&!f.start_date&&n.a.createElement("div",{className:"flex-center"},n.a.createElement(Tt.a,{type:"secondary",className:"mr-05",onClick:function(){return qn(!0)}},"Edit"),n.a.createElement(Tt.a,{type:"primary",onClick:function(){return dn()}},"Launch")),f&&f.start_date&&!f.end_date&&n.a.createElement(Tt.a,{type:"secondary",status:"danger",onClick:function(){return Tn()}},"Stop"),(f==null?void 0:f.end_date)&&Object(Ee.a)().isSameOrAfter(Object(Ee.a)(f.end_date),"day")&&!f.archived&&n.a.createElement(Tt.a,{type:"secondary",status:"danger",onClick:function(){return Oa()}},n.a.createElement("b",null,"Archive")))),n.a.createElement(y.a,null,na&&$&&Bt&&!f.end_date&&n.a.createElement(y.a,{align:"middle",className:"significant-results"},n.a.createElement(E.a,{span:20,style:{fontWeight:500,color:"#497342"}},n.a.createElement("div",null,"Experiment results are significant."," ",f.end_date?"":"You can end your experiment now or let it run until complete.")),n.a.createElement(E.a,{span:4},f.end_date?n.a.createElement(qt.a,{className:"close-button",onClick:function(){return Vn(!1)}}):n.a.createElement(Tt.a,{type:"highlighted",className:"end-experiment-btn",onClick:function(){return Tn()}},"End experiment"))),na&&$&&!Bt&&!f.end_date&&n.a.createElement(y.a,{align:"top",className:"not-significant-results"},n.a.createElement(E.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"}},n.a.createElement("strong",null,"Your results are not statistically significant"),"."," ",Ne," ",f!=null&&f.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",n.a.createElement("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations"}," ","experimentation guide"," "),"for more information."," "),n.a.createElement(E.a,{span:1},n.a.createElement(qt.a,{className:"close-button",onClick:function(){return Vn(!1)}}))),na&&f.end_date&&n.a.createElement(y.a,{align:"top",className:"feature-flag-mods"},n.a.createElement(E.a,{span:23,style:{fontWeight:500}},n.a.createElement("strong",null,"Your experiment is complete.")," We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",n.a.createElement(Gn.a,{to:f.feature_flag?fe.a.featureFlag(f.feature_flag):void 0},n.a.createElement("b",null,"Adjust feature flag distribution"))),n.a.createElement(E.a,{span:1},n.a.createElement(qt.a,{className:"close-button",onClick:function(){return Vn(!1)}})))),n.a.createElement(y.a,null,n.a.createElement(H.a,{className:"full-width",defaultActiveKey:"experiment-details"},n.a.createElement(H.a.Panel,{header:n.a.createElement("b",null,"Experiment details"),key:"experiment-details"},n.a.createElement(y.a,null,n.a.createElement(E.a,{span:f!=null&&f.start_date?12:24},n.a.createElement(ln,{experiment:f,trendCount:In,trendExposure:f==null?void 0:f.parameters.recommended_running_time,funnelSampleSize:f==null?void 0:f.parameters.recommended_sample_size,funnelConversionRate:kn,funnelEntrants:f!=null&&f.start_date?Fn:Nn})),!nt&&!$&&f.start_date&&n.a.createElement(E.a,{span:12},n.a.createElement(gn,{experiment:f})),($||((b=f.secondary_metrics)===null||b===void 0?void 0:b.length)>0)&&n.a.createElement(E.a,{className:"secondary-progress",span:f!=null&&f.start_date?12:24},Rn[lt.o.EXPERIMENTS_SECONDARY_METRICS]&&!!(f!=null&&f.secondary_metrics.length)&&n.a.createElement(E.a,{className:"border-bottom"},n.a.createElement(y.a,{align:"middle",justify:"space-between",className:"mb-05"},n.a.createElement(E.a,{className:"card-secondary",span:2*yn},"Secondary metrics"),f==null||(m=f.parameters)===null||m===void 0||(I=m.feature_flag_variants)===null||I===void 0?void 0:I.map(function(_,Y){return n.a.createElement(E.a,{key:Y,span:yn,style:{color:"".concat(ve===j.s.FUNNELS?Object(On.k)(at(_.key,j.s.FUNNELS)+1):Object($n.c)("white")[at(_.key,j.s.TRENDS)])}},n.a.createElement("span",{className:"text-default"},Object(me.j)(_.key)))})),Rn[lt.o.EXPERIMENTS_SECONDARY_METRICS]&&(f.start_date?cn?n.a.createElement(ee.a,{active:!0,paragraph:!1}):n.a.createElement(n.a.Fragment,null,f.secondary_metrics.map(function(_,Y){var Ze,c;return n.a.createElement(y.a,{className:"border-top",key:Y,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(E.a,{span:2*yn},Object(me.j)(_.name)),f==null||(Ze=f.parameters)===null||Ze===void 0||(c=Ze.feature_flag_variants)===null||c===void 0?void 0:c.map(function(d,u){return n.a.createElement(E.a,{key:u,span:yn},Kt!=null&&Kt[Y][d.key]?_.filters.insight===j.s.FUNNELS?n.a.createElement(n.a.Fragment,null,((Kt==null?void 0:Kt[Y][d.key])*100).toFixed(1),"%"):n.a.createElement(n.a.Fragment,null,Object(me.O)(Kt==null?void 0:Kt[Y][d.key])):n.a.createElement(n.a.Fragment,null,"--"))}))})):n.a.createElement(n.a.Fragment,null,f.secondary_metrics.map(function(_,Y){var Ze,c;return n.a.createElement(y.a,{className:"border-top",key:Y,justify:"space-between",style:{paddingTop:8,paddingBottom:8}},n.a.createElement(E.a,{span:2*yn},Object(me.j)(_.name)),f==null||(Ze=f.parameters)===null||Ze===void 0||(c=Ze.feature_flag_variants)===null||c===void 0?void 0:c.map(function(d,u){return n.a.createElement(E.a,{key:u,span:yn},"--")}))})))),$&&n.a.createElement(E.a,{className:"mt"},n.a.createElement("div",{className:"mb-05"},n.a.createElement("b",null,"Experiment progress")),n.a.createElement(ue.a,{strokeWidth:20,showInfo:!1,percent:Fa,strokeColor:"var(--success)"}),ve===j.s.TRENDS&&f.start_date&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},f.end_date?n.a.createElement("div",null,"Ran for"," ",n.a.createElement("b",null,Object(Ee.a)(f.end_date).diff(f.start_date,"day"))," ","days"):n.a.createElement("div",null,n.a.createElement("b",null,Object(Ee.a)().diff(f.start_date,"day"))," ","days running"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,f==null||(p=f.parameters)===null||p===void 0?void 0:p.recommended_running_time)," ","days")),ve===j.s.FUNNELS&&n.a.createElement(y.a,{justify:"space-between",className:"mt-05"},f.end_date?n.a.createElement("div",null,"Saw"," ",n.a.createElement("b",null,Object(me.O)(Fn))," ","participants"):n.a.createElement("div",null,n.a.createElement("b",null,Object(me.O)(Fn))," ","participants seen"),n.a.createElement("div",null,"Goal:"," ",n.a.createElement("b",null,Object(me.O)((f==null||(q=f.parameters)===null||q===void 0?void 0:q.recommended_sample_size)||0))," ","participants"))))))),!(f!=null&&f.start_date)&&n.a.createElement("div",{className:"mt full-width"},n.a.createElement(gn,{experiment:f}))),n.a.createElement("div",{className:"experiment-result"},$?n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{justify:"space-around",style:{flexFlow:"nowrap"}},Object.keys($.probability).sort(function(_,Y){return $.probability[Y]-$.probability[_]}).map(function(_,Y){return n.a.createElement(E.a,{key:Y,className:"pr"},n.a.createElement("div",null,n.a.createElement("b",null,Object(me.j)(_))),ve===j.s.TRENDS?n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},n.a.createElement(y.a,null,"action"in $.insight[0]&&n.a.createElement(vn.a,{filter:$.insight[0].action}),n.a.createElement("span",{style:{paddingLeft:4}},"count:")))," ",nn(_)," ",on&&Y===0&&n.a.createElement(Ae.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher."},n.a.createElement(Yt.a,{style:{padding:"4px 2px"}}))):n.a.createElement(y.a,null,n.a.createElement("b",{style:{paddingRight:4}},"Conversion rate:")," ",mt(_),"%"),n.a.createElement(ue.a,{percent:Number(($.probability[_]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:ve===j.s.FUNNELS?Object(On.k)(at(_,j.s.FUNNELS)+1):Object($n.c)("white")[at(_,j.s.TRENDS)]}),n.a.createElement("div",null,"Probability that this variant is the best:"," ",n.a.createElement("b",null,($.probability[_]*100).toFixed(1),"%")))}))):nt&&n.a.createElement("div",{className:"text-center"},n.a.createElement(ee.a,{active:!0})),$?n.a.createElement(Ce.BindLogic,{logic:Ye.c,props:{dashboardItemId:$.itemID,cachedInsight:{short_id:$.itemID,filters:jn(jn(jn({},$.filters),{},{insight:ve,display:f.filters.display},ve===j.s.FUNNELS&&{layout:lt.q.vertical,funnel_viz_type:j.o.Steps}),ve===j.s.TRENDS&&{display:j.d.ActionsLineGraphCumulative}),result:$.insight},doNotLoad:!0}},n.a.createElement("div",{className:"mt"},n.a.createElement(Re.a,{disableHeader:ve===j.s.TRENDS,disableTable:ve===j.s.FUNNELS}))):f.start_date&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"no-experiment-results"},!nt&&n.a.createElement("div",{className:"text-center"},n.a.createElement("b",null,"There are no results for this experiment yet."),n.a.createElement("div",{className:"text-default"},"Double check your feature flag implementation if you're still not seeing results.")))))):n.a.createElement(ee.a,{active:!0}))}function Xn(){return n.a.createElement(de.a,{defaultValue:"JavaScript",suffixIcon:n.a.createElement(xt.a,null)},n.a.createElement(de.a.Option,{value:"JavaScript"},n.a.createElement(y.a,{align:"middle"},n.a.createElement(le.IconJavascript,{style:{marginRight:6}})," JavaScript")))}try{en.displayName="Experiment_",en.__docgenInfo={description:"",displayName:"Experiment_",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/Experiment.tsx#Experiment_"]={docgenInfo:en.__docgenInfo,name:"Experiment_",path:"frontend/src/scenes/experiments/Experiment.tsx#Experiment_"})}catch(a){}},"./frontend/src/scenes/experiments/experimentsLogic.ts":function(oe,L,t){"use strict";t.d(L,"a",function(){return Ce});var J=t("./node_modules/core-js/modules/es.array.concat.js"),Z=t.n(J),Ie=t("./node_modules/core-js/modules/es.array.filter.js"),ye=t.n(Ie),ge=t("./node_modules/core-js/modules/es.array.iterator.js"),_e=t.n(ge),Je=t("./node_modules/core-js/modules/es.array.map.js"),ie=t.n(Je),e=t("./node_modules/core-js/modules/es.object.to-string.js"),l=t.n(e),Ve=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ce=t.n(Ve),O=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Le=t.n(O),X=t("./node_modules/@babel/runtime/regenerator/index.js"),R=t.n(X),T=t("./node_modules/regenerator-runtime/runtime.js"),y=t.n(T),E=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ne=t.n(E),Ae=t("./node_modules/kea/lib/index.esm.js"),de=t("./frontend/src/lib/api.ts"),We=t("./frontend/src/scenes/teamLogic.ts"),B=t("./frontend/src/types.ts"),H=t("./frontend/src/lib/utils.tsx"),ee=t("./frontend/src/scenes/userLogic.ts"),ue=t("./frontend/src/lib/components/lemonToast.tsx"),Ce=Object(Ae.kea)({path:["scenes","experiments","experimentsLogic"],connect:{values:[We.a,["currentTeamId"],ee.a,["hasAvailableFeature"]]},actions:{},loaders:function(ke){var i=ke.values,M=ke.actions;return{experiments:[[],{loadExperiments:function(){var K=ne()(R.a.mark(function Pe(ze){var Ye;return R.a.wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(i.hasAvailableFeature(B.c.EXPERIMENTATION)){rt.next=2;break}return rt.abrupt("return",[]);case 2:return rt.next=4,de.b.get("api/projects/".concat(i.currentTeamId,"/experiments?").concat(ze||""));case 4:return Ye=rt.sent,rt.abrupt("return",Ye.results);case 6:case"end":return rt.stop()}},Pe)}));function n(Pe){return K.apply(this,arguments)}return n}(),deleteExperiment:function(){var K=ne()(R.a.mark(function Pe(ze){return R.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,de.b.delete("api/projects/".concat(i.currentTeamId,"/experiments/").concat(ze));case 2:return ue.a.info("Experiment removed"),j.abrupt("return",i.experiments.filter(function(rt){return rt.id!==ze}));case 4:case"end":return j.stop()}},Pe)}));function n(Pe){return K.apply(this,arguments)}return n}(),addToExperiments:function(n){return[].concat(Le()(i.experiments),[n])},updateExperiments:function(n){return i.experiments.map(function(Pe){return Pe.id===n.id?n:Pe})}}],tab:[B.h.All,{setExperimentsFilters:function(){var K=ne()(R.a.mark(function Pe(ze){var Ye,j;return R.a.wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return Ye=ze.tab,j=Ye===B.h.Yours?Object(H.Ab)({user:!0}):Object(H.Ab)({archived:!0}),Ye===B.h.All?M.loadExperiments(Object(H.Ab)({all:!0})):M.loadExperiments(j),Ot.abrupt("return",Ye);case 4:case"end":return Ot.stop()}},Pe)}));function n(Pe){return K.apply(this,arguments)}return n}()}]}},events:function(ke){var i=ke.actions;return{afterMount:function(){i.loadExperiments(Object(H.Ab)({all:!0}))}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(oe,L,t){"use strict";t.d(L,"a",function(){return Ze});var J=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),Z=t.n(J),Ie=t("./node_modules/antd/es/card/index.js"),ye=t("./node_modules/antd/es/row/index.js"),ge=t("./node_modules/antd/es/col/index.js"),_e=t("./node_modules/core-js/modules/es.array.includes.js"),Je=t("./node_modules/core-js/modules/es.string.includes.js"),ie=t("./node_modules/react/index.js"),e=t.n(ie),l=t("./node_modules/kea/lib/index.esm.js"),Ve=t("./node_modules/antd/es/tag/index.js"),ce=t("./node_modules/antd/es/select/index.js"),O=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),Le=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),X=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),R=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},y=T,E=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ne=function(d,u){return ie.createElement(E.a,Object(R.a)(Object(R.a)({},d),{},{ref:u,icon:y}))};ne.displayName="AreaChartOutlined";var Ae=ie.forwardRef(ne),de=t("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},B=We,H=function(d,u){return ie.createElement(E.a,Object(R.a)(Object(R.a)({},d),{},{ref:u,icon:B}))};H.displayName="TableOutlined";var ee=ie.forwardRef(H),ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},Ce=ue,ft=function(d,u){return ie.createElement(E.a,Object(R.a)(Object(R.a)({},d),{},{ref:u,icon:Ce}))};ft.displayName="PieChartOutlined";var ke=ie.forwardRef(ft),i=t("./frontend/src/types.ts"),M=t("./frontend/src/lib/utils.tsx"),K=t("./frontend/src/scenes/insights/insightLogic.ts");function n(c){var d=c.filters,u=c.onChange,v=c.disabled,C=Object(l.useValues)(K.c),h=C.insightProps,S=Object(l.useValues)(Object(O.a)(h)),A=S.chartFilter,V=Object(l.useActions)(Object(O.a)(h)),w=V.setChartFilter,N=d.insight===i.s.STICKINESS||d.insight===i.s.RETENTION,F=!1,Q=d.insight===i.s.RETENTION||d.insight===i.s.STICKINESS,z=d.insight===i.s.RETENTION,te=z||d.insight===i.s.STICKINESS||d.insight===i.s.RETENTION,he=d.insight===i.s.RETENTION?i.d.ActionsTable:d.insight===i.s.FUNNELS?i.d.FunnelViz:i.d.ActionsLineGraph;function G(Ge){var Ue=Ge.icon,Fe=Ge.children,qe=Fe===void 0?null:Fe;return e.a.createElement(e.a.Fragment,null,Ue," ",qe)}function $e(Ge){var Ue=Ge.children,Fe=Ue===void 0?null:Ue;return e.a.createElement(Ve.a,{color:"orange",style:{marginLeft:8,fontSize:10}},Fe)}var Ke=d.insight===i.s.FUNNELS?[{value:i.o.Steps,label:e.a.createElement(G,{icon:e.a.createElement(Le.a,null)},"Steps")},{value:i.o.Trends,label:e.a.createElement(G,{icon:e.a.createElement(X.a,null)},"Trends",e.a.createElement($e,null,"BETA"))}]:[{label:"Line Chart",options:[{value:i.d.ActionsLineGraph,label:e.a.createElement(G,{icon:e.a.createElement(X.a,null)},"Linear")},{value:i.d.ActionsLineGraphCumulative,label:e.a.createElement(G,{icon:e.a.createElement(Ae,null)},"Cumulative"),disabled:N}]},{label:"Bar Chart",options:[{value:i.d.ActionsBar,label:e.a.createElement(G,{icon:e.a.createElement(de.a,null)},"Time"),disabled:z},{value:i.d.ActionsBarValue,label:e.a.createElement(G,{icon:e.a.createElement(de.a,null)},"Value"),disabled:te}]},{value:i.d.ActionsTable,label:e.a.createElement(G,{icon:e.a.createElement(ee,null)},"Table"),disabled:F},{value:i.d.ActionsPie,label:e.a.createElement(G,{icon:e.a.createElement(ke,null)},"Pie"),disabled:Q}];return e.a.createElement(ce.a,{key:"2",defaultValue:d.display||he,value:A||he,onChange:function(Ue){w(Ue),u==null||u(Ue)},bordered:!0,dropdownAlign:M.a.bottomRight,dropdownMatchSelectWidth:!1,"data-attr":"chart-filter",disabled:v,options:Ke})}try{n.displayName="ChartFilter",n.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:n.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(c){}var Pe=t("./node_modules/antd/es/checkbox/index.js"),ze=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Ye(){var c=Object(l.useValues)(K.c),d=c.insightProps,u=Object(l.useValues)(Object(ze.a)(d)),v=u.compare,C=u.disabled,h=Object(l.useActions)(Object(ze.a)(d)),S=h.setCompare;return C?null:e.a.createElement(Pe.a,{onChange:function(V){S(V.target.checked)},checked:v,style:{marginLeft:8,marginRight:6},disabled:C},"Compare",e.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var j=t("./node_modules/core-js/modules/es.array.map.js"),rt=t("./node_modules/core-js/modules/es.object.entries.js"),Ot=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ft=t.n(Ot),Jt=t("./node_modules/core-js/modules/es.array.iterator.js"),vt=t("./node_modules/core-js/modules/es.object.to-string.js"),Ut=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Xt=t("./frontend/src/scenes/insights/sharedUtils.ts");function ht(c,d){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(c);d&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(c,C).enumerable})),u.push.apply(u,v)}return u}function Qe(c){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?ht(Object(u),!0).forEach(function(v){Z()(c,v,u[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):ht(Object(u)).forEach(function(v){Object.defineProperty(c,v,Object.getOwnPropertyDescriptor(u,v))})}return c}var ae=Object(l.kea)({props:{},key:Object(Xt.c)("new"),path:function(d){return["lib","components","IntervalFilter","intervalFilterLogic",d]},connect:function(d){return{actions:[Object(K.c)(d),["setFilters"]],values:[Object(K.c)(d),["filters"]]}},actions:function(){return{setInterval:function(u){return{interval:u}}}},listeners:function(d){var u=d.values,v=d.actions;return{setInterval:function(h){var S=h.interval;Object(M.mb)(S,u.filters.interval)||v.setFilters(Qe(Qe({},u.filters),{},{interval:S}))}}},selectors:{interval:[function(c){return[c.filters]},function(c){return c==null?void 0:c.interval}]}}),se=t("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),be={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function Se(c){var d=c.disabled,u=Object(l.useValues)(K.c),v=u.insightProps,C=Object(l.useValues)(ae(v)),h=C.interval,S=Object(l.useActions)(ae(v)),A=S.setInterval,V=Object.entries(be).map(function(w){var N=Ft()(w,2),F=N[0],Q=N[1].label;return{key:F,value:F,label:F===h?e.a.createElement(e.a.Fragment,null,e.a.createElement(se.a,null)," ",Q):Q}});return e.a.createElement(ce.a,{bordered:!0,disabled:d,defaultValue:h||"day",value:h||void 0,dropdownMatchSelectWidth:!1,onChange:A,"data-attr":"interval-filter",options:V})}try{Se.displayName="IntervalFilter",Se.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:Se.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(c){}var ct=t("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),Be=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function et(c,d){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(c);d&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(c,C).enumerable})),u.push.apply(u,v)}return u}function st(c){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?et(Object(u),!0).forEach(function(v){Z()(c,v,u[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):et(Object(u)).forEach(function(v){Object.defineProperty(c,v,Object.getOwnPropertyDescriptor(u,v))})}return c}function ut(){var c=Object(l.useValues)(K.c),d=c.filters,u=Object(l.useActions)(K.c),v=u.setFilters,C=d.interval,h=d.smoothing_intervals;if(!C)return null;var S=Be.a[C].map(function(A){var V=A.value,w=A.label;return{value:V,label:V===h?e.a.createElement(e.a.Fragment,null,e.a.createElement(ct.a,null)," ",w):w}});return S.length?e.a.createElement(ce.a,{key:C,bordered:!0,value:h||1,dropdownMatchSelectWidth:!1,onChange:function(V){v(st(st({},d),{},{smoothing_intervals:V}))},"data-attr":"smoothing-filter",options:S}):e.a.createElement(e.a.Fragment,null)}var P=t("./frontend/src/lib/constants.tsx"),Qt=t("./node_modules/@babel/runtime/helpers/extends.js"),Et=t.n(Qt),xe=t("./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts"),D=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function tt(c){var d=Object(l.useValues)(K.c),u=d.insightProps,v=Object(l.useValues)(Object(xe.a)(u)),C=v.dates,h=C.dateFrom,S=C.dateTo,A=Object(l.useActions)(Object(xe.a)(u)),V=A.setDates;return e.a.createElement(D.a,Et()({},c,{dateFrom:h!=null?h:void 0,dateTo:S!=null?S:void 0,onChange:function(N,F){var Q;V(N,F),(Q=c.onChange)===null||Q===void 0||Q.call(c,N,F)}}))}try{tt.displayName="InsightDateFilter",tt.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:tt.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(c){}var dt=t("./node_modules/rc-picker/lib/generate/dayjs.js"),Ee=t.n(dt),me=t("./node_modules/antd/lib/date-picker/generatePicker/index.js"),yt=t.n(me),Dt=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),we=t("./frontend/src/lib/components/Tooltip.tsx"),pe=t("./frontend/src/lib/dayjs.ts"),He=yt()(Ee.a);function fe(c){var d=c.disabled,u=Object(l.useValues)(K.c),v=u.insightProps,C=Object(l.useValues)(Object(Dt.d)(v)),h=C.filters,S=Object(l.useActions)(Object(Dt.d)(v)),A=S.setFilters,V=h.date_to&&Object(pe.a)(h.date_to).year()!==Object(pe.a)().year()?", YYYY":"";return e.a.createElement(e.a.Fragment,null,e.a.createElement(we.a,{title:"Cohorts up to this end date"},e.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},e.a.createElement(se.a,null),e.a.createElement(He,{showTime:h.period==="Hour",use12Hours:!0,format:h.period==="Hour"?"MMM D".concat(V,", h a"):"MMM D".concat(V),value:h.date_to?Object(pe.a)(h.date_to):void 0,onChange:function(N){return A({date_to:N&&Object(pe.a)(N).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:d}))))}try{fe.displayName="RetentionDatePicker",fe.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:fe.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(c){}var Oe=t("./frontend/src/scenes/funnels/funnelLogic.ts"),Zt=t("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function lt(c){var d=c.disabled,u=Object(l.useValues)(K.c),v=u.insightProps,C=Object(l.useValues)(Object(Oe.a)(v)),h=C.barGraphLayout,S=Object(l.useActions)(Object(Oe.a)(v)),A=S.setFilters,V=[{value:P.q.vertical,icon:e.a.createElement(de.a,null),label:"Left to right"},{value:P.q.horizontal,icon:e.a.createElement(Zt.a,null),label:"Top to bottom"}];return e.a.createElement(ce.a,{defaultValue:P.q.vertical,value:h||P.q.vertical,onChange:function(N){return A({layout:N})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:d},e.a.createElement(ce.a.OptGroup,{label:"Graph display options"},V.map(function(w){return e.a.createElement(ce.a.Option,{key:w.value,value:w.value,label:e.a.createElement(e.a.Fragment,null,w.icon," ",w.label)},w.label)})))}try{lt.displayName="FunnelDisplayLayoutPicker",lt.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:lt.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(c){}var rn=t("./node_modules/core-js/modules/es.array.filter.js"),wt=t("./node_modules/core-js/modules/es.array.from.js"),zn=t("./node_modules/core-js/modules/es.array.slice.js"),Mn=t("./node_modules/core-js/modules/es.string.iterator.js"),Yt=t("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),pn=t("./frontend/src/scenes/paths/pathsLogic.ts"),sn=t("./frontend/src/scenes/userLogic.ts");function Ht(c){var d,u=c.disabled,v=Object(l.useValues)(K.c),C=v.insightProps,h=Object(l.useValues)(Object(pn.b)(C)),S=h.filter,A=Object(l.useActions)(Object(pn.b)(C)),V=A.setFilter,w=Object(l.useValues)(sn.a),N=w.user,F=2,Q=!(N==null||(d=N.organization)===null||d===void 0)&&d.available_features.includes(i.c.PATHS_ADVANCED)?20:5,z=Array.from(Array.from(Array.from(Array(Q+1).keys()).slice(F)),function(te){return{label:"".concat(te," Steps"),value:te}});return e.a.createElement(ce.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:S.step_limit||pn.a,onSelect:function(he){return V({step_limit:he})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:M.a.bottomRight,optionLabelProp:"label",disabled:u},z.map(function(te){return e.a.createElement(ce.a.Option,{key:te.value,value:te.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(Yt.a,null)," ",te.label)},te.label)}))}try{Ht.displayName="PathStepPicker",Ht.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:Ht.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/InsightTabs/PathTab/PathStepPicker.tsx#PathStepPicker"})}catch(c){}var W=t("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function Rt(c){var d=c.disabled,u=Object(l.useValues)(K.c),v=u.insightProps,C=Object(l.useValues)(Object(Dt.d)(v)),h=C.retentionReference,S=Object(l.useActions)(Object(Dt.d)(v)),A=S.setRetentionReference;return e.a.createElement(ce.a,{value:h,onChange:A,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:d},[{value:"total",icon:e.a.createElement(W.a,null),label:"Overall cohort"},{value:"previous",icon:e.a.createElement(W.a,null),label:"Relative to previous period"}].map(function(V){return e.a.createElement(ce.a.Option,{key:V.value,value:V.value,label:e.a.createElement(e.a.Fragment,null,V.icon," ",V.label)},V.label)}))}try{Rt.displayName="ReferencePicker",Rt.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:Rt.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/InsightTabs/RetentionTab/ReferencePicker.tsx#ReferencePicker"})}catch(c){}var $t=t("./node_modules/antd/es/tooltip/index.js"),Pt=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Re=t("./node_modules/core-js/modules/es.array.concat.js"),le=t("./node_modules/core-js/modules/es.set.js"),ot=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),xt=t.n(ot),qt=t("./node_modules/antd/es/input-number/index.js"),bn=t("./node_modules/clsx/dist/clsx.m.js"),On=0,Yn=90,ua=new Set([5,15,25,50,90]),ma=[{label:"Auto bins",value:P.g,display:!0}].concat(xt()(Array.from(Array.from(Array(Yn+1).keys()),function(c){return{label:"".concat(c," bins"),value:c,display:ua.has(c)}})),[{label:"Custom",value:"custom",display:!0}]);function fn(c){var d=c.disabled,u=Object(l.useValues)(K.c),v=u.insightProps,C=Object(l.useValues)(Object(Oe.a)(v)),h=C.filters,S=C.numericBinCount,A=Object(l.useActions)(Object(Oe.a)(v)),V=A.setBinCount;return e.a.createElement(ce.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:P.g,value:h.bin_count||P.g,onSelect:function(N){return V(N)},dropdownRender:function(N){return e.a.createElement(e.a.Fragment,null,N,e.a.createElement("div",null,e.a.createElement(qt.a,{className:"funnel-bins-custom-picker",size:"middle",min:On,max:Yn,value:S,onChange:function(Q){var z=typeof Q=="string"?parseInt(Q):Q;z&&V(z)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:M.a.bottomRight,optionLabelProp:"label",disabled:d},e.a.createElement(ce.a.OptGroup,{label:"Bin Count"},ma.map(function(w){return w.value==="custom"?null:e.a.createElement(ce.a.Option,{className:Object(bn.a)({"select-option-hidden":!w.display}),key:w.value,value:w.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(de.a,null)," ",w.label)},w.label)})))}try{fn.displayName="FunnelBinsPicker",fn.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:fn.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(c){}var Wt=t("./frontend/src/lib/logic/featureFlagLogic.ts"),kt,_t,pa=function(d,u){switch(d){case i.s.FUNNELS:return u.funnel_viz_type===i.o.Trends;case i.s.RETENTION:case i.s.PATHS:return!1;case i.s.TRENDS:case i.s.STICKINESS:case i.s.LIFECYCLE:default:return![P.e,P.f,P.b].includes(u.display||"")}},fa=function(d){switch(d){case i.s.TRENDS:case i.s.STICKINESS:return!0;case i.s.RETENTION:case i.s.FUNNELS:return!1;case i.s.LIFECYCLE:case i.s.PATHS:return!1;default:return!0}},Tt=(kt={},Z()(kt,"".concat(i.s.TRENDS),!0),Z()(kt,"".concat(i.s.STICKINESS),!0),Z()(kt,"".concat(i.s.LIFECYCLE),!0),Z()(kt,"".concat(i.s.FUNNELS),!0),Z()(kt,"".concat(i.s.RETENTION),!1),Z()(kt,"".concat(i.s.PATHS),!0),kt),Ln=(_t={},Z()(_t,"".concat(i.s.TRENDS),!0),Z()(_t,"".concat(i.s.STICKINESS),!0),Z()(_t,"".concat(i.s.LIFECYCLE),!1),Z()(_t,"".concat(i.s.FUNNELS),!1),Z()(_t,"".concat(i.s.RETENTION),!1),Z()(_t,"".concat(i.s.PATHS),!1),_t),Hn=function(d){var u,v;return!d.actions&&!d.events||((u=d.actions)===null||u===void 0?void 0:u.length)===0&&((v=d.events)===null||v===void 0?void 0:v.length)===0};function Mt(c){var d=c.filters,u=c.activeView,v=c.disableTable,C=c.disabled,h=u===i.s.FUNNELS,S=u===i.s.PATHS,A=Object(l.useValues)(Wt.a),V=A.featureFlags;return e.a.createElement("div",{className:"display-config-inner"},e.a.createElement("div",{className:"display-config-inner-row"},Tt[u]&&!v&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Date range"),e.a.createElement(tt,{defaultValue:"Last 7 days",disabled:C||h&&Hn(d),bordered:!0,makeLabel:function(N){return e.a.createElement(e.a.Fragment,null,e.a.createElement(se.a,null)," ",N,N=="All time"&&e.a.createElement($t.a,{title:"Only events dated after 2015 will be shown"},e.a.createElement(Pt.a,{className:"info-indicator"})))}})),pa(u,d)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},e.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),e.a.createElement(Se,{view:u,disabled:C})),u===i.s.TRENDS&&!d.breakdown_type&&!d.compare&&(!d.display||d.display===P.d)&&V[P.o.SMOOTHING_INTERVAL]?e.a.createElement(ut,null):null,u===i.s.RETENTION&&e.a.createElement(e.a.Fragment,null,e.a.createElement(fe,{disabled:C}),e.a.createElement(Rt,{disabled:C})),S&&e.a.createElement("span",{className:"filter"},e.a.createElement(Ht,{disabled:C})),Ln[u]&&e.a.createElement("span",{className:"filter"},e.a.createElement(Ye,null))),e.a.createElement("div",{className:"display-config-inner-row"},fa(u)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Chart type"),e.a.createElement(n,{filters:d,disabled:C||d.insight===i.s.LIFECYCLE})),h&&d.funnel_viz_type===i.o.Steps&&e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"filter"},e.a.createElement(lt,{disabled:C}))),h&&d.funnel_viz_type===i.o.TimeToConvert&&e.a.createElement("span",{className:"filter"},e.a.createElement(fn,{disabled:C}))))}try{Mt.displayName="InsightDisplayConfig",Mt.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:Mt.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(c){}var Vt=t("./node_modules/antd/es/button/index.js"),$n=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),vn=t.n($n),va=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),Gn=t.n(va),An={};An.insert="head",An.singleton=!1;var La=vn()(Gn.a,An),Aa=Gn.a.locals||{},ga=t("./frontend/src/scenes/funnels/funnelUtils.ts"),ha=t("./node_modules/core-js/modules/es.array.find.js"),Ea=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function ln(){var c,d=Object(l.useValues)(K.c),u=d.insightProps,v=Object(l.useValues)(Object(Oe.a)(u)),C=v.filters,h=v.numberOfSeries,S=v.areFiltersValid,A=v.filterSteps,V=Object(l.useActions)(Object(Oe.a)(u)),w=V.changeStepRange;if(C.funnel_viz_type===i.o.Steps)return null;var N=function(he,G){w(he,G)},F=S?Array.from(Array(Math.max(h)).keys()).slice(0,-1):[0],Q=S?Array.from(Array(Math.max(h)).keys()).slice(((c=C.funnel_from_step)!==null&&c!==void 0?c:0)+1):[1],z=function(he){return he.map(function(G){var $e=A.find(function(Ke){return Ke.order===G});return $e?e.a.createElement(ce.a.Option,{key:G,value:G,label:"Step ".concat(G+1)},e.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.a.createElement("span",{style:{marginRight:4}},"Step ",G+1,":"),e.a.createElement(Ea.a,{filter:$e}))):null})};return e.a.createElement(ye.a,{className:"funnel-options-inputs"},e.a.createElement("span",{className:"text-muted-alt"},"from"),e.a.createElement(ce.a,{disabled:!S,dropdownMatchSelectWidth:!1,dropdownAlign:M.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:C.funnel_from_step||0,onChange:function(he){return N(he,C.funnel_to_step)},style:{marginLeft:4,marginRight:4}},z(F)),e.a.createElement("span",{className:"text-muted-alt"},"to"),e.a.createElement(ce.a,{disabled:!S,dropdownMatchSelectWidth:!1,dropdownAlign:M.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:C.funnel_to_step||Math.max(h-1,1),onChange:function(he){return N(C.funnel_from_step,he)},style:{marginLeft:4,marginRight:4}},z(Q)))}function xn(){var c=Object(l.useValues)(K.c),d=c.insightProps,u=c.filters,v=c.activeView,C=Object(l.useValues)(Object(Oe.a)(d)),h=C.conversionMetrics,S=C.aggregationTargetLabel,A=Object(l.useActions)(Object(O.a)(d)),V=A.setChartFilter;if(v!==i.s.FUNNELS)return null;var w=[].concat(xt()(u.funnel_viz_type===i.o.Steps?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(we.a,{title:"Overall conversion rate for all ".concat(S.plural," on the entire funnel.")},e.a.createElement(Pt.a,{className:"info-indicator left"})),"Total conversion rate"),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement("span",{className:"l4"},Object(ga.c)(h.totalRate),"%"))]:[]),xt()(u.funnel_viz_type!==i.o.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(we.a,{title:"Average (arithmetic mean) of the total time each ".concat(S.singular," spent in the entire funnel.")},e.a.createElement(Pt.a,{className:"info-indicator left"})),"Average time to convert"," "),u.funnel_viz_type===i.o.TimeToConvert&&e.a.createElement(ln,null),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement(Vt.a,{type:"link",onClick:function(){return V(i.o.TimeToConvert)},disabled:u.funnel_viz_type===i.o.TimeToConvert},e.a.createElement("span",{className:"l4"},Object(M.N)(h.averageTime))))]:[]),xt()(u.funnel_viz_type===i.o.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),e.a.createElement(ln,null))]:[]));return e.a.createElement(ye.a,{className:"funnel-canvas-label",align:"middle"},w.map(function(N,F){return e.a.createElement(e.a.Fragment,{key:F},F>0&&e.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),N)}))}var gn=t("./frontend/src/lib/hooks/usePeriodicRerender.ts"),wn=3;function jn(){var c=Object(l.useValues)(K.c),d=c.lastRefresh,u=Object(l.useActions)(K.c),v=u.loadResults;return Object(gn.a)(15e3),e.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",d?Object(pe.a)(d).fromNow():"a while ago",e.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),e.a.createElement($t.a,{title:e.a.createElement(e.a.Fragment,null,"Insights can be refreshed",e.a.createElement("br",null),"every ",wn," minutes.")},e.a.createElement(Vt.a,{size:"small",type:"link",onClick:function(){return v(!0)},disabled:!!d&&Object(pe.a)().subtract(wn-.5,"minutes").isBefore(d),style:{padding:0}},e.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var Jn=t("./frontend/src/scenes/trends/PersonsModal.tsx"),en=t("./frontend/src/scenes/trends/viz/index.ts"),Xn=t("./frontend/src/scenes/trends/SaveCohortModal.tsx"),a=t("./frontend/src/scenes/trends/trendsLogic.ts"),r=t("./frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/InsightsTable/index.tsx#InsightsTable"})}catch(c){}var s=t("./frontend/src/scenes/trends/personsModalLogic.ts"),o=t("./frontend/src/lib/utils/eventUsageLogic.ts"),g=t("./frontend/src/scenes/insights/insightSceneLogic.tsx");function x(c){var d=c.view,u=Object(l.useValues)(g.a),v=u.insightMode,C=Object(l.useValues)(K.c),h=C.insightProps,S=Object(l.useValues)(s.b),A=S.cohortModalVisible,V=Object(l.useActions)(s.b),w=V.setCohortModalVisible,N=Object(l.useValues)(Object(a.a)(h)),F=N.filters,Q=N.loadMoreBreakdownUrl,z=N.breakdownValuesLoading,te=N.showModalActions,he=N.aggregationTargetLabel,G=Object(l.useActions)(Object(a.a)(h)),$e=G.loadMoreBreakdownValues,Ke=Object(l.useValues)(s.b),Ge=Ke.showingPeople,Ue=Object(l.useActions)(s.b),Fe=Ue.saveCohortWithUrl,qe=Object(l.useActions)(o.f),Lt=qe.reportCohortCreatedFromPersonsModal,At=function(){if(!F.display||F.display===P.d||F.display===P.c||F.display===P.a)return e.a.createElement(en.b,null);if(F.display===P.f)return e.a.createElement(l.BindLogic,{logic:a.a,props:{dashboardItemId:null,view:d,filters:null}},e.a.createElement(r.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(d),canEditSeriesNameInline:v===i.t.Edit,isMainInsightView:!0}));if(F.display===P.e)return e.a.createElement(en.c,null);if(F.display===P.b)return e.a.createElement(en.a,null)};return e.a.createElement(e.a.Fragment,null,(F.actions||F.events)&&e.a.createElement("div",{className:F.display!==P.f?"trends-insights-container":void 0},At()),F.breakdown&&e.a.createElement("div",{className:"mt text-center"},Q?e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"text-muted mb"},"For readability, ",e.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),e.a.createElement("div",null,e.a.createElement(Vt.a,{style:{textAlign:"center",marginBottom:16},onClick:$e,loading:z},"Load more breakdown values"))):e.a.createElement("span",{className:"text-muted"},"Showing ",e.a.createElement("b",null,"all breakdown values"))),e.a.createElement(Jn.a,{visible:Ge&&!A,view:d,filters:F,onSaveCohort:function(){w(!0)},showModalActions:te,aggregationTargetLabel:he}),e.a.createElement(Xn.a,{visible:A,onOk:function(Dn){Fe(Dn),w(!1),Lt(F)},onCancel:function(){return w(!1)}}))}try{x.displayName="TrendInsight",x.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:x.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(c){}var b=t("./frontend/src/scenes/funnels/Funnel.tsx");function m(){var c=Object(l.useValues)(K.c),d=c.insightProps,u=Object(l.useValues)(Object(Oe.a)(d)),v=u.isValidFunnel,C=u.insightLoading,h=u.filters,S=u.areFiltersValid,A=u.barGraphLayout,V=u.aggregationTargetLabel,w=Object(l.useValues)(s.b),N=w.showingPeople,F=w.cohortModalVisible,Q=Object(l.useActions)(s.b),z=Q.setCohortModalVisible;return e.a.createElement(e.a.Fragment,null,e.a.createElement(Jn.a,{visible:N&&!F,view:i.s.FUNNELS,filters:h,onSaveCohort:function(){z(!0)},showModalActions:h.aggregation_group_type_index==null,aggregationTargetLabel:V}),e.a.createElement("div",{className:Object(bn.a)("funnel-insights-container",{"non-empty-state":v&&S||C,"no-padding":h.funnel_viz_type==i.o.Steps&&A===P.q.vertical})},e.a.createElement(b.a,null)))}var I=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),p=t("./frontend/src/scenes/paths/Paths.tsx"),q=t("./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepTable.tsx"),re=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function Te(){var c=Object(l.useValues)(K.c),d=c.activeView;return d!==i.s.PATHS?null:e.a.createElement(ye.a,{className:"funnel-canvas-label",align:"middle"},e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var k=t("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),U=t("./node_modules/antd/lib/input/TextArea.js"),f=t.n(U),De=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss"),jt=t.n(De),It={};It.insert="head",It.singleton=!1;var tn=vn()(jt.a,It),$=jt.a.locals||{},nn=t("./node_modules/core-js/modules/es.number.constructor.js"),an=t("./node_modules/core-js/modules/es.number.is-integer.js"),ve=t("./node_modules/core-js/modules/es.number.to-fixed.js"),nt=t("./node_modules/core-js/modules/es.regexp.exec.js"),Nt=t("./node_modules/core-js/modules/es.string.split.js"),Bt=t("./node_modules/antd/es/spin/index.js"),mt=t("./node_modules/antd/es/table/index.js"),at=t("./node_modules/antd/lib/table/Column.js"),Ne=t.n(at),on=t("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Cn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},ya=Cn,Qn=function(d,u){return ie.createElement(E.a,Object(R.a)(Object(R.a)({},d),{},{ref:u,icon:ya}))};Qn.displayName="FallOutlined";var Kt=ie.forwardRef(Qn),Zn=t("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),cn=t("./frontend/src/lib/components/icons.tsx"),Ct=t("./node_modules/antd/lib/checkbox/Checkbox.js"),Gt=t.n(Ct),Sn=t("./frontend/src/scenes/funnels/FunnelBarGraph.tsx"),dn=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Pn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss"),qn=t.n(Pn),Tn={};Tn.insert="head",Tn.singleton=!1;var wa=vn()(qn.a,Tn),Ra=qn.a.locals||{},ba=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function hn(c){var d=c.id,u=c.offset,v=c.children,C=Object(l.useActions)(Object(ba.a)({id:d,offset:u})),h=C.scrolling,S=Object(ie.useRef)(null);return Object(ie.useEffect)(function(){var A=S.current;return document.addEventListener("scroll",function(){return h(A)}),function(){return document.removeEventListener("scroll",function(){return h(A)})}},[S.current]),e.a.createElement("div",{ref:S},v)}try{hn.displayName="VisibilitySensor",hn.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:hn.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(c){}var un=t("./frontend/src/lib/components/LemonButton/index.ts"),ea=t("./frontend/src/lib/components/Popup/Popup.tsx"),Oa=t("./node_modules/antd/es/modal/index.js"),xa=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),Rn=t("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),ja=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),Ca=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss"),ta=t.n(Ca),_n={};_n.insert="head",_n.singleton=!1;var Sa=vn()(ta.a,_n),na=ta.a.locals||{},Vn=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),aa=t("./frontend/src/lib/components/Link.tsx"),Bn=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function En(){var c=Object(l.useValues)(K.c),d=c.insightProps,u=Object(Oe.a)(d),v=Object(l.useValues)(u),C=v.correlationsLoading,h=v.funnelCorrelationDetails,S=v.parseDisplayNameForCorrelation,A=v.correlationMatrixAndScore,V=Object(l.useActions)(u),w=V.setFunnelCorrelationDetails,N=V.openCorrelationPersonsModal,F=(h==null?void 0:h.result_type)===i.k.Events?"event":"property",Q=(h==null?void 0:h.result_type)===i.k.Events?"performed event":"have property",z=e.a.createElement(e.a.Fragment,null);if(h){var te=S(h),he=te.first_value,G=te.second_value;z=e.a.createElement(e.a.Fragment,null,e.a.createElement(dn.a,{value:he}),G!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(dn.a,{value:G,disablePopover:!0})))}var $e=A.correlationScore,Ke=A.truePositive,Ge=A.falsePositive,Ue=A.trueNegative,Fe=A.falseNegative,qe=A.correlationScoreStrength,Lt=qe==="strong"?e.a.createElement(xa.a,{style:{color:"var(--success)"}}):qe==="moderate"?e.a.createElement(Rn.a,{style:{color:"var(--warning)"}}):e.a.createElement(ja.a,{style:{color:"var(--danger)"}}),At=function(){return w(null)};return e.a.createElement(Oa.a,{className:"correlation-matrix",visible:!!h,onCancel:At,destroyOnClose:!0,footer:e.a.createElement(Vt.a,{onClick:At},"Dismiss"),width:600,title:"Correlation details"},e.a.createElement("div",{className:"correlation-table-wrapper"},C?e.a.createElement("div",{className:"mt text-center"},e.a.createElement(Vn.a,{size:"lg"})):h?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",Q," ",e.a.createElement("b",null,z),"."),e.a.createElement("table",null,e.a.createElement("thead",null,e.a.createElement("tr",{className:"table-title"},e.a.createElement("td",{colSpan:3},"Results matrix")),e.a.createElement("tr",null,e.a.createElement("td",null,(h==null?void 0:h.result_type)===i.k.Events?"Performed event":"Has property"),e.a.createElement("td",null,"Success"),e.a.createElement("td",null,"Dropped off"))),e.a.createElement("tbody",null,e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"Yes"),e.a.createElement("td",null,e.a.createElement(we.a,{title:"True positive (TP) - Percentage of users who ".concat(Q," and completed the funnel.")},e.a.createElement("div",{className:"percentage"},Ke?Object(M.ob)(Ke/(Ke+Ge)):"0.00%")),Ke===0?"0 users":e.a.createElement(aa.a,{onClick:function(){N(h,!0)}},Object(M.qb)(Ke,"user",void 0,!0,!0))),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(we.a,{title:"False negative (FN) - Percentage of users who ".concat(Q," and did not complete the funnel.")},Fe?Object(M.ob)(Fe/(Fe+Ue)):"0.00%")),Fe===0?"0 users":e.a.createElement(aa.a,{onClick:function(){N(h,!1)}},Object(M.qb)(Fe,"user",void 0,!0,!0)))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"No"),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(we.a,{title:"False positive (FP) - Percentage of users who did not ".concat(Q," and completed the funnel.")},Ge?Object(M.ob)(Ge/(Ke+Ge)):"0.00%")),Object(M.qb)(Ge,"user",void 0,!0,!0)),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(we.a,{title:"True negative (TN) - Percentage of users who did not ".concat(Q," and did not complete the funnel.")},Ue?Object(M.ob)(Ue/(Fe+Ue)):"0.00%")),Object(M.qb)(Ue,"user",void 0,!0,!0))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"}),e.a.createElement("td",null,e.a.createElement("b",null,"100%")),e.a.createElement("td",null,e.a.createElement("b",null,"100%"))))),e.a.createElement("div",{className:"mt text-center"},Object(M.j)((h==null?void 0:h.result_type)||"")," ",e.a.createElement("b",null,z)," ","has a"," ",(h==null?void 0:h.correlation_type)===i.l.Success?e.a.createElement("b",{className:"text-success"},"positive"," ",e.a.createElement(we.a,{title:"Positive correlation means this ".concat(F," is correlated with a successful conversion.")},e.a.createElement(Pt.a,{className:"cursor-pointer"}))):e.a.createElement("b",{className:"text-danger"},"negative"," ",e.a.createElement(we.a,{title:"Negative correlation means this ".concat(F," is correlated with an unsuccessful conversion (user dropped off).")},e.a.createElement(Pt.a,{className:"cursor-pointer"})))," ","correlation score of"," ",e.a.createElement("b",{style:{color:qe==="strong"?"var(--success)":qe==="moderate"?"var(--warning)":"var(--danger)"}},e.a.createElement(we.a,{title:"This ".concat(F," has ").concat(qe," correlation.")},e.a.createElement("span",{style:{cursor:"pointer"}},Lt," ",$e.toFixed(3)))))):e.a.createElement("div",null,e.a.createElement(Bn.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function Pa(){var c=Object(l.useValues)(K.c),d=c.insightProps,u=Object(Oe.a)(d),v=Object(l.useValues)(u),C=v.stepsWithCount,h=v.correlationValues,S=v.correlationTypes,A=v.eventHasPropertyCorrelations,V=v.eventWithPropertyCorrelationsValues,w=v.parseDisplayNameForCorrelation,N=v.correlationsLoading,F=v.eventWithPropertyCorrelationsLoading,Q=v.nestedTableExpandedKeys,z=v.correlationPropKey,te=v.filters,he=v.aggregationTargetLabel,G=Object(l.useActions)(u),$e=G.setCorrelationTypes,Ke=G.loadEventWithPropertyCorrelations,Ge=G.addNestedTableExpandedKey,Ue=G.removeNestedTableExpandedKey,Fe=G.openCorrelationPersonsModal,qe=G.loadCorrelations,Lt=Object(l.useActions)(o.f),At=Lt.reportCorrelationInteraction;Object(ie.useEffect)(function(){qe({})},[te]);var zt=function(je){S?S.includes(je)?$e(S.filter(function(Xe){return Xe!==je})):$e([].concat(xt()(S),[je])):$e([je])},Dn=function(je){var Xe=function(da){return da<10&&!Number.isInteger(da)?da.toFixed(1):da.toFixed()},bt=je.correlation_type===i.l.Success,it=w(je),mn=it.first_value,ia=it.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,bt?e.a.createElement(on.a,{style:{color:"green"}}):e.a.createElement(Kt,{style:{color:"red"}})," ",e.a.createElement(dn.a,{value:mn}),ia!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(dn.a,{value:ia,disablePopover:!0}))),e.a.createElement("div",null,Object(M.j)(he.plural)," ",te.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,Xe(je.odds_ratio),"x ",bt?"more":"less"," likely"))," ","to"," ",je.result_type===i.k.EventWithProperties?"have this event property":"do this event"),e.a.createElement(En,null))},St=function(je){return e.a.createElement(Sn.c,{onClick:function(){Fe(je,!0)}},je.success_count)},Me=function(je){return e.a.createElement(Sn.c,{onClick:function(){Fe(je,!1)}},je.failure_count)},gt=function(je){return F?e.a.createElement("div",{className:"nested-properties-loading"},e.a.createElement(Bt.a,null),e.a.createElement("h3",null,"Loading correlation results"),e.a.createElement("p",null,"This process can take up to 20 seconds. ")):e.a.createElement("div",null,e.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),e.a.createElement(mt.a,{dataSource:V[je],rowKey:function(bt){return bt.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(bt,it){return At(i.k.EventWithProperties,"pagination change",{page:bt,page_size:it})}}},e.a.createElement(Ne.a,{title:"Property",key:"eventName",render:function(bt,it){return Dn(it)},align:"left"}),e.a.createElement(Ne.a,{title:"Completed",key:"success_count",render:function(bt,it){return St(it)},width:90,align:"center"}),e.a.createElement(Ne.a,{title:"Dropped off",key:"failure_count",render:function(bt,it){return Me(it)},width:120,align:"center"}),e.a.createElement(Ne.a,{title:"",key:"actions",render:function(bt,it){return e.a.createElement(ra,{record:it})},align:"center",width:30})))};return C.length>1?e.a.createElement(hn,{id:z,offset:152},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement("span",{className:"funnel-correlation-header"},e.a.createElement("span",{className:"table-header"},e.a.createElement(cn.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),e.a.createElement("span",{className:"table-options"},e.a.createElement("p",{className:"title"},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return zt(i.l.Success)}},e.a.createElement(Gt.a,{checked:S.includes(i.l.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return zt(i.l.Failure)}},e.a.createElement(Gt.a,{checked:S.includes(i.l.Failure),style:{pointerEvents:"none"}},"Dropoff")))),e.a.createElement(mt.a,{dataSource:h,loading:N,size:"small",scroll:{x:"max-content"},rowKey:function(je){return je.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return At(i.k.Events,"load more")}},expandable:{expandedRowRender:function(je){return gt(je.event.event)},expandedRowKeys:Q,rowExpandable:function(){return te.aggregation_group_type_index===void 0},expandIcon:function(je){var Xe=je.expanded,bt=je.onExpand,it=je.record,mn=je.expandable;return mn?Xe?e.a.createElement(we.a,{title:"Collapse"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(ca){Ue(it.event.event),bt(it,ca)}},e.a.createElement(cn.IconUnfoldLess,null))):e.a.createElement(we.a,{title:"Expand to see correlated properties for this event"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(ca){!A(it.event.event)&&Ke(it.event.event),Ge(it.event.event),bt(it,ca)}},e.a.createElement(cn.IconUnfoldMore,null))):null}}},e.a.createElement(Ne.a,{title:"Event",key:"eventName",render:function(je,Xe){return Dn(Xe)},align:"left",ellipsis:!0}),e.a.createElement(Ne.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(we.a,{title:"".concat(Object(M.j)(he.plural)," ").concat(te.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},e.a.createElement(Pt.a,{className:"column-info"}))),key:"success_count",render:function(je,Xe){return St(Xe)},width:90,align:"center"}),e.a.createElement(Ne.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(we.a,{title:e.a.createElement(e.a.Fragment,null,Object(M.j)(he.plural)," ",te.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(Pt.a,{className:"column-info"}))),key:"failure_count",render:function(je,Xe){return Me(Xe)},width:120,align:"center"}),e.a.createElement(Ne.a,{title:"",key:"actions",render:function(je,Xe){return e.a.createElement(ra,{record:Xe})},width:30})))):null}var ra=function(d){var u=d.record,v=Object(l.useValues)(K.c),C=v.insightProps,h=Object(Oe.a)(C),S=Object(l.useActions)(h),A=S.excludeEventPropertyFromProject,V=S.excludeEventFromProject,w=S.setFunnelCorrelationDetails,N=Object(l.useValues)(h),F=N.isEventPropertyExcluded,Q=N.isEventExcluded,z=u.event.event.split("::"),te=Object(ie.useState)(!1),he=Ft()(te,2),G=he[0],$e=he[1];return e.a.createElement(ye.a,{style:{justifyContent:"flex-end"}},e.a.createElement(ea.a,{visible:G,actionable:!0,onClickOutside:function(){return $e(!1)},overlay:e.a.createElement(e.a.Fragment,null,u.result_type===i.k.Events&&e.a.createElement(un.a,{onClick:function(){return w(u)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(un.a,{disabled:u.result_type===i.k.EventWithProperties?F(z[1]):Q(z[0]),onClick:function(){return u.result_type===i.k.EventWithProperties?A(z[0],z[1]):V(z[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},e.a.createElement(un.a,{type:"stealth",onClick:function(){return $e(!G)}},e.a.createElement(Zn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},sa=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function Kn(){var c=Object(l.useValues)(K.c),d=c.insightProps,u=Object(Oe.a)(d),v=Object(l.useValues)(u),C=v.stepsWithCount,h=v.propertyCorrelationValues,S=v.propertyCorrelationTypes,A=v.excludedPropertyNames,V=v.parseDisplayNameForCorrelation,w=v.propertyCorrelationsLoading,N=v.inversePropertyNames,F=v.propertyNames,Q=v.correlationPropKey,z=v.allProperties,te=v.filters,he=v.aggregationTargetLabel,G=Object(l.useActions)(u),$e=G.setPropertyCorrelationTypes,Ke=G.setPropertyNames,Ge=G.openCorrelationPersonsModal,Ue=G.loadPropertyCorrelations,Fe=Object(l.useActions)(o.f),qe=Fe.reportCorrelationInteraction;Object(ie.useEffect)(function(){F.length===0&&Ke(z),Ue({})},[te]);var Lt=function(Me){S?S.includes(Me)?$e(S.filter(function(gt){return gt!==Me})):$e([].concat(xt()(S),[Me])):$e([Me])},At=function(Me){return e.a.createElement(Sn.c,{onClick:function(){Ge(Me,!0)}},Me.success_count)},zt=function(Me){return e.a.createElement(Sn.c,{onClick:function(){Ge(Me,!1)}},Me.failure_count)},Dn=function(Me){var gt=function(mn){return mn<10&&!Number.isInteger(mn)?mn.toFixed(1):mn.toFixed()},pt=Me.correlation_type===i.l.Success,je=V(Me),Xe=je.first_value,bt=je.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,pt?e.a.createElement(on.a,{style:{color:"green"}}):e.a.createElement(Kt,{style:{color:"red"}})," ",e.a.createElement(dn.a,{value:Xe}),bt!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(dn.a,{value:bt,disablePopover:!0}))),e.a.createElement("div",null,Object(M.j)(he.plural)," ",te.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,gt(Me.odds_ratio),"x ",pt?"more":"less"," likely"))," ","to have this property value"))};return C.length>1?e.a.createElement(hn,{offset:150,id:"".concat(Q,"-properties")},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement(ye.a,{className:"funnel-correlation-header"},e.a.createElement(ge.a,{className:"table-header"},e.a.createElement(cn.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),e.a.createElement(ge.a,{className:"table-options"},e.a.createElement(ye.a,{style:{display:"contents"}},z.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"title"},"PROPERTIES "),e.a.createElement(sa.a,{value:new Set(F),onChange:function(Me){return Ke(Me)},allProperties:N(A||[])}))),e.a.createElement(ye.a,{style:{display:"contents"}},e.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return Lt(i.l.Success)}},e.a.createElement(Gt.a,{checked:S.includes(i.l.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return Lt(i.l.Failure)}},e.a.createElement(Gt.a,{checked:S.includes(i.l.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),e.a.createElement(mt.a,{dataSource:h,loading:w,scroll:{x:"max-content"},size:"small",rowKey:function(Me){return Me.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(Me,gt){return qe(i.k.Properties,"pagination change",{page:Me,page_size:gt})}}},e.a.createElement(Ne.a,{title:"".concat(Object(M.j)(he.singular)," property"),key:"propertName",render:function(Me,gt){return Dn(gt)},align:"left"}),e.a.createElement(Ne.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(we.a,{title:"".concat(Object(M.j)(he.plural)," ").concat(te.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},e.a.createElement(Pt.a,{className:"column-info"}))),key:"success_count",render:function(Me,gt){return At(gt)},width:90,align:"center"}),e.a.createElement(Ne.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(we.a,{title:e.a.createElement(e.a.Fragment,null,Object(M.j)(he.plural)," ",te.aggregation_group_type_index!=null?"that":"who"," have this property and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(Pt.a,{className:"column-info"}))),key:"failure_count",render:function(Me,gt){return zt(gt)},width:120,align:"center"}),e.a.createElement(Ne.a,{title:"",key:"actions",render:function(Me,gt){return e.a.createElement(Ta,{record:gt})},align:"center",width:30})))):null}var Ta=function(d){var u=d.record,v=Object(l.useValues)(K.c),C=v.insightProps,h=Object(Oe.a)(C),S=Object(l.useActions)(h),A=S.excludePropertyFromProject,V=S.setFunnelCorrelationDetails,w=Object(l.useValues)(h),N=w.isPropertyExcludedFromProject,F=(u.event.event||"").split("::")[0],Q=Object(ie.useState)(!1),z=Ft()(Q,2),te=z[0],he=z[1];return e.a.createElement(ye.a,{style:{justifyContent:"flex-end"}},e.a.createElement(ea.a,{visible:te,actionable:!0,onClickOutside:function(){return he(!1)},overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(un.a,{onClick:function(){return V(u)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(un.a,{disabled:N(F),onClick:function(){return A(F)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},e.a.createElement(un.a,{type:"stealth",onClick:function(){return he(!te)}},e.a.createElement(Zn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},Un=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Wn=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),Ia=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),kn=function(){var d,u=Object(l.useValues)(K.c),v=u.insightProps,C=Object(l.useValues)(Object(Oe.a)(v)),h=C.isSkewed,S=C.stepsWithCount,A=C.correlationFeedbackHidden,V=C.correlationDetailedFeedbackVisible,w=C.correlationFeedbackRating,N=C.correlationAnalysisAvailable,F=C.aggregationTargetLabel,Q=Object(l.useActions)(Object(Oe.a)(v)),z=Q.sendCorrelationAnalysisFeedback,te=Q.hideSkewWarning,he=Q.hideCorrelationAnalysisFeedback,G=Q.setCorrelationFeedbackRating,$e=Q.setCorrelationDetailedFeedback,Ke=Object(l.useValues)(Ia.a),Ge=Ke.preflight,Ue=Object(ie.useRef)(null);return S.length<=1?null:!N&&!(!(Ge==null||(d=Ge.instance_preferences)===null||d===void 0)&&d.disable_paid_fs)?e.a.createElement(Wn.a,{identifier:i.c.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(F.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(F.plural," are converting or dropping off.")}):e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"funnel-correlation"},h&&e.a.createElement(Ie.a,{className:"skew-warning"},e.a.createElement("h4",null,e.a.createElement(cn.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",e.a.createElement(Un.a,{className:"close-button",onClick:te})),e.a.createElement("div",null,e.a.createElement("b",null,"Tips for adjusting your funnel:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),e.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),e.a.createElement(Pa,null),!A&&e.a.createElement(Ie.a,{className:"correlation-feedback"},e.a.createElement(ye.a,{className:"row-initial"},e.a.createElement(ge.a,{span:14},e.a.createElement("h4",null,e.a.createElement(k.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),e.a.createElement(ge.a,{span:9,style:{alignContent:"right"}},!!w&&e.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(Fe,qe){return e.a.createElement(Vt.a,{key:qe,className:"emoji-button",style:w===Fe[0]?{background:"#5375FF"}:w?{display:"none"}:{},onClick:function(){w===Fe[0]?G(0):(G(Fe[0]),setTimeout(function(){var At;return(At=Ue.current)===null||At===void 0?void 0:At.focus()},100))}},Fe[1])})),e.a.createElement(ge.a,{span:1},e.a.createElement(Un.a,{className:"close-button",onClick:he}))),e.a.createElement("div",{style:{display:V?void 0:"none"}},e.a.createElement("form",{onSubmit:z},e.a.createElement(f.a,{onBlur:function(qe){return $e(qe.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:Ue,onKeyDown:function(qe){if(qe.key==="Enter"&&qe.metaKey){var Lt;(Lt=Ue.current)===null||Lt===void 0||Lt.blur(),z()}}}),e.a.createElement("div",{className:"text-right"},e.a.createElement(Vt.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),e.a.createElement(Kn,null)))},_a=t("./node_modules/core-js/modules/es.regexp.to-string.js"),la=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss"),In=t.n(la),Nn={};Nn.insert="head",Nn.singleton=!1;var Na=vn()(In.a,Nn),yn=In.a.locals||{},Fn=t("./frontend/src/lib/components/InsightLabel/index.tsx"),Fa=t("./frontend/src/lib/colors.ts"),Da=t("./frontend/src/lib/components/PHCheckbox.tsx");function oa(){var c=Object(l.useValues)(K.c),d=c.filters,u=c.activeView,v=Object(l.useActions)(K.c),C=v.toggleInsightLegend,h=Object(l.useValues)(Wt.a),S=h.featureFlags;return(u===i.s.TRENDS||u===i.s.STICKINESS)&&S[P.o.INSIGHT_LEGENDS]?e.a.createElement(Vt.a,{className:"insight-legend-button",onClick:C},e.a.createElement(cn.IconLegend,null),e.a.createElement("span",{className:"insight-legend-button-title"},d.show_legend?"Hide":"Show"," legend")):null}function Ma(){var c=Object(l.useValues)(K.c),d=c.insightProps,u=c.filters,v=Object(a.a)(d),C=Object(l.useValues)(v),h=C.indexedResults,S=C.hiddenLegendKeys,A=Object(l.useActions)(v),V=A.toggleVisibility,w=Object(Fa.c)("white",h.length,!!u.compare);return e.a.createElement("div",{className:"insight-legend-menu"},e.a.createElement("div",{className:"insight-legend-menu-scroll"},h&&h.map(function(N){var F,Q;return e.a.createElement(ye.a,{key:N.id,className:"insight-legend-menu-item",wrap:!1},e.a.createElement("div",{className:"insight-legend-menu-item-inner",onClick:function(){return V(N.id)}},e.a.createElement(ge.a,null,e.a.createElement(Da.a,{color:w[N.id],checked:!S[N.id],onChange:function(){}})),e.a.createElement(ge.a,null,e.a.createElement(Fn.b,{key:N.id,seriesColor:w[N.id],action:N.action,fallbackName:N.breakdown_value===""?"None":N.label,hasMultipleSeries:h.length>1,breakdownValue:N.breakdown_value===""?"None":(F=N.breakdown_value)===null||F===void 0?void 0:F.toString(),compareValue:u.compare?Object(r.d)(N):void 0,pillMidEllipsis:(N==null||(Q=N.filter)===null||Q===void 0?void 0:Q.breakdown)==="$current_url",hideIcon:!0}))))})))}var _,Y=(_={},Z()(_,"".concat(i.s.TRENDS),e.a.createElement(x,{view:i.s.TRENDS})),Z()(_,"".concat(i.s.STICKINESS),e.a.createElement(x,{view:i.s.STICKINESS})),Z()(_,"".concat(i.s.LIFECYCLE),e.a.createElement(x,{view:i.s.LIFECYCLE})),Z()(_,"".concat(i.s.FUNNELS),e.a.createElement(m,null)),Z()(_,"".concat(i.s.RETENTION),e.a.createElement(I.a,null)),Z()(_,"".concat(i.s.PATHS),e.a.createElement(p.a,null)),_);function Ze(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1},d=c.disableHeader,u=c.disableTable,v=Object(l.useValues)(Wt.a),C=v.featureFlags,h=Object(l.useValues)(g.a),S=h.insightMode,A=Object(l.useValues)(K.c),V=A.insightProps,w=A.canEditInsight,N=A.insightLoading,F=A.activeView,Q=A.loadedView,z=A.filters,te=A.showTimeoutMessage,he=A.showErrorMessage,G=Object(l.useValues)(Object(Oe.a)(V)),$e=G.areFiltersValid,Ke=G.isValidFunnel,Ge=G.areExclusionFiltersValid,Ue=G.correlationAnalysisAvailable,Fe=function(){if(F!==Q||N&&!te)return e.a.createElement(e.a.Fragment,null,z.display!==P.f&&e.a.createElement("div",{className:"trends-insights-container"}),e.a.createElement(M.b,null));if(Q===i.s.FUNNELS){if(!$e)return e.a.createElement(re.b,{actionable:S===i.t.Edit||u});if(!Ge)return e.a.createElement(re.a,null);if(!Ke&&!N)return e.a.createElement(re.c,null)}return he?e.a.createElement(re.d,null):te?e.a.createElement(re.e,{isLoading:N}):null}();function qe(){return F===i.s.FUNNELS&&!he&&!te&&$e&&z.funnel_viz_type===i.o.Steps&&(z==null?void 0:z.layout)===P.q.horizontal&&!u?e.a.createElement(q.a,null):(!z.display||(z==null?void 0:z.display)!==P.f&&(z==null?void 0:z.display)!==P.b)&&F===i.s.TRENDS&&!u?e.a.createElement(l.BindLogic,{logic:a.a,props:V},e.a.createElement(r.b,{isLegend:!0,showTotalCount:!0,filterKey:F===i.s.TRENDS?"trends_".concat(F):"",canEditSeriesNameInline:F===i.s.TRENDS&&S===i.t.Edit,canCheckUncheckSeries:!w})):null}return e.a.createElement(e.a.Fragment,null,e.a.createElement(Ie.a,{title:d?null:e.a.createElement(Mt,{activeView:F,insightMode:S,filters:z,disableTable:!!u,disabled:!w}),"data-attr":"insights-graph",className:"insights-graph-container"},e.a.createElement("div",null,e.a.createElement(ye.a,{className:Object(bn.a)("insights-graph-header",{funnels:F===i.s.FUNNELS}),align:"middle",justify:"space-between"},e.a.createElement(ge.a,null,e.a.createElement(jn,null)),e.a.createElement(ge.a,null,F===i.s.FUNNELS?e.a.createElement(xn,null):null,F===i.s.PATHS?e.a.createElement(Te,null):null,e.a.createElement(oa,null))),Fe||(C[P.o.INSIGHT_LEGENDS]&&(F===i.s.TRENDS||F===i.s.STICKINESS)&&z.show_legend?e.a.createElement(ye.a,{className:"insights-graph-container-row",wrap:!1},e.a.createElement(ge.a,{className:"insights-graph-container-row-left"},Y[F]),e.a.createElement(ge.a,{className:"insights-graph-container-row-right"},e.a.createElement(Ma,null))):Y[F]))),qe(),!u&&Ue&&F===i.s.FUNNELS&&e.a.createElement(kn,null))}try{Ze.displayName="InsightContainer",Ze.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:Ze.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(c){}},"./frontend/src/scenes/insights/InsightDateFilter/insightDateFilterLogic.ts":function(oe,L,t){"use strict";t.d(L,"a",function(){return Le});var J=t("./node_modules/core-js/modules/es.array.iterator.js"),Z=t.n(J),Ie=t("./node_modules/core-js/modules/es.object.to-string.js"),ye=t.n(Ie),ge=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),_e=t.n(ge),Je=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),ie=t.n(Je),e=t("./node_modules/kea/lib/index.esm.js"),l=t("./frontend/src/scenes/insights/insightLogic.ts"),Ve=t("./frontend/src/scenes/insights/sharedUtils.ts");function ce(X,R){var T=Object.keys(X);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(X);R&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(X,E).enumerable})),T.push.apply(T,y)}return T}function O(X){for(var R=1;R<arguments.length;R++){var T=arguments[R]!=null?arguments[R]:{};R%2?ce(Object(T),!0).forEach(function(y){ie()(X,y,T[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(T)):ce(Object(T)).forEach(function(y){Object.defineProperty(X,y,Object.getOwnPropertyDescriptor(T,y))})}return X}var Le=Object(e.kea)({props:{},key:Object(Ve.c)("new"),path:function(R){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",R]},connect:function(R){return{actions:[Object(l.c)(R),["setFilters"]],values:[Object(l.c)(R),["filters"]]}},actions:function(){return{setDates:function(T,y){return{dateFrom:T,dateTo:y}}}},selectors:{dates:[function(X){return[X.filters]},function(X){return{dateFrom:(X==null?void 0:X.date_from)||null,dateTo:(X==null?void 0:X.date_to)||null}}]},listeners:function(R){var T=R.actions,y=R.values;return{setDates:function(ne){var Ae=ne.dateFrom,de=ne.dateTo;T.setFilters(O(O({},y.filters),{},{date_from:Ae||null,date_to:de||null}))}}}})},"./frontend/src/scenes/trends/PersonsModal.tsx":function(oe,L,t){"use strict";t.d(L,"a",function(){return Ut});var J=t("./node_modules/core-js/modules/es.array.concat.js"),Z=t("./node_modules/core-js/modules/es.array.find.js"),Ie=t("./node_modules/core-js/modules/es.array.map.js"),ye=t("./node_modules/core-js/modules/es.object.keys.js"),ge=t("./node_modules/core-js/modules/es.object.to-string.js"),_e=t("./node_modules/core-js/modules/es.regexp.exec.js"),Je=t("./node_modules/core-js/modules/es.regexp.to-string.js"),ie=t("./node_modules/core-js/modules/es.string.replace.js"),e=t("./node_modules/react/index.js"),l=t.n(e),Ve=t("./node_modules/kea/lib/index.esm.js"),ce=t("./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js"),O=t("./node_modules/@ant-design/icons/es/icons/UsergroupAddOutlined.js"),Le=t("./node_modules/antd/es/modal/index.js"),X=t("./node_modules/antd/es/button/index.js"),R=t("./node_modules/antd/es/skeleton/index.js"),T=t("./node_modules/antd/es/input/index.js"),y=t("./node_modules/antd/es/select/index.js"),E=t("./frontend/src/types.ts"),ne=t("./frontend/src/scenes/trends/personsModalLogic.ts"),Ae=t("./frontend/src/lib/components/CopyToClipboard.tsx"),de=t("./frontend/src/lib/utils.tsx"),We=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),B=t.n(We),H=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss"),ee=t.n(H),ue={};ue.insert="head",ue.singleton=!1;var Ce=B()(ee.a,ue),ft=ee.a.locals||{},ke=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),i=t("./frontend/src/lib/components/PropertiesTable.tsx"),M=t("./frontend/src/lib/components/DateDisplay/index.tsx"),K=t("./frontend/src/scenes/persons/PersonHeader.tsx"),n=t("./frontend/src/lib/api.ts"),Pe=t("./frontend/src/lib/components/LemonTable/index.ts"),ze=t("./frontend/src/scenes/persons/GroupActorHeader.tsx"),Ye=t("./frontend/src/lib/components/icons.tsx"),j=t("./frontend/src/lib/components/InsightLabel/index.tsx"),rt=t("./frontend/src/lib/colors.ts"),Ot=t("./frontend/src/lib/logic/featureFlagLogic.ts"),Ft=t("./frontend/src/lib/constants.tsx"),Jt=t("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),vt=t("./frontend/src/scenes/session-recordings/multiRecordingButton/multiRecordingButton.tsx");function Ut(ht){var Qe,ae,se,be,Se,ct,Be=ht.visible,et=ht.view,st=ht.filters,ut=ht.onSaveCohort,P=ht.showModalActions,Qt=P===void 0?!0:P,Et=ht.aggregationTargetLabel,xe=Object(Ve.useValues)(ne.b),D=xe.people,tt=xe.loadingMorePeople,dt=xe.firstLoadedPeople,Ee=xe.searchTerm,me=xe.isInitialLoad,yt=xe.peopleParams,Dt=xe.actorLabel,we=xe.sessionRecordingId,pe=Object(Ve.useActions)(ne.b),He=pe.hidePeople,fe=pe.loadMorePeople,Oe=pe.setFirstLoadedActors,Zt=pe.setPersonsModalFilters,lt=pe.setSearchTerm,rn=pe.switchToDataPoint,wt=pe.openRecordingModal,zn=pe.closeRecordingModal,Mn=Object(Ve.useValues)(Ot.a),Yt=Mn.featureFlags,pn=Object(e.useMemo)(function(){var Re,le,ot;return me?"Loading ".concat(Et.plural,"\u2026"):st.shown_as==="Stickiness"?l.a.createElement(l.a.Fragment,null,l.a.createElement(ke.a,{value:(D==null?void 0:D.label)||"",disablePopover:!0})," stickiness on day ",D==null?void 0:D.day):st.display==="ActionsBarValue"||st.display==="ActionsPie"?l.a.createElement(ke.a,{value:(D==null?void 0:D.label)||"",disablePopover:!0}):st.insight===E.s.FUNNELS?l.a.createElement(l.a.Fragment,null,((Re=D==null?void 0:D.funnelStep)!==null&&Re!==void 0?Re:0)>=0?"Completed":"Dropped off at"," step"," ",Math.abs((le=D==null?void 0:D.funnelStep)!==null&&le!==void 0?le:0)," \u2022 ",l.a.createElement(ke.a,{value:(D==null?void 0:D.label)||"",disablePopover:!0})," ",D!=null&&D.breakdown_value?"\u2022 ".concat(D.breakdown_value):""):st.insight===E.s.PATHS?l.a.createElement(l.a.Fragment,null,D!=null&&D.pathsDropoff?"Dropped off after":"Completed"," step"," ",l.a.createElement(ke.a,{value:(D==null?void 0:D.label.replace(/(^[0-9]+_)/,""))||"",disablePopover:!0})):l.a.createElement(l.a.Fragment,null,Object(de.j)(Dt)," list on"," ",l.a.createElement(M.a,{interval:st.interval||"day",date:(D==null||(ot=D.day)===null||ot===void 0?void 0:ot.toString())||""}))},[st,D,me]),sn=Yt[Ft.o.NEW_INSIGHT_COHORTS],Ht=!1,W=(et===E.s.TRENDS||et===E.s.STICKINESS||!!sn&&(et===E.s.FUNNELS||et===E.s.PATHS))&&Qt,Rt=Object(rt.c)("white",D==null||(Qe=D.crossDataset)===null||Qe===void 0?void 0:Qe.length),$t=!!(!(D==null||(ae=D.crossDataset)===null||ae===void 0)&&ae.find(function(Re){var le=Re.action;return(le==null?void 0:le.math)&&le.math!=="total"})),Pt=!!(!(D==null||(se=D.crossDataset)===null||se===void 0)&&se.find(function(Re){var le=Re.action;return le==null?void 0:le.order}));return l.a.createElement(l.a.Fragment,null,!!we&&l.a.createElement(Jt.a,{onClose:zn}),l.a.createElement(Le.a,{title:pn,visible:Be,onCancel:He,footer:D&&D.count>0&&(Ht||W)&&l.a.createElement(l.a.Fragment,null,Ht&&l.a.createElement(X.a,{icon:l.a.createElement(ce.a,null),href:n.b.actions.determinePeopleCsvUrl({label:D.label,action:D.action,date_from:D.day,date_to:D.day,breakdown_value:D.breakdown_value},st),style:{marginRight:8},"data-attr":"person-modal-download-csv"},"Download CSV"),W&&l.a.createElement(X.a,{onClick:ut,icon:l.a.createElement(O.a,null),"data-attr":"person-modal-save-as-cohort"},"Save as cohort")),width:600,className:"person-modal"},me?l.a.createElement("div",{style:{padding:16}},l.a.createElement(R.a,{active:!0})):D&&l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for persons by email, name, or ID",onChange:function(le){lt(le.target.value),le.target.value||Oe(dt)},value:Ee,onSearch:function(le){return le?Zt(le,D,st):Oe(dt)}}),Yt[Ft.o.MULTI_POINT_PERSON_MODAL]&&!!(!((be=D.crossDataset)===null||be===void 0)&&be.length)&&D.seriesId!==void 0&&l.a.createElement("div",{className:"data-point-selector"},l.a.createElement(y.a,{value:D.seriesId,onChange:function(le){return rn(le)}},D.crossDataset.map(function(Re){var le,ot;return l.a.createElement(y.a.Option,{value:Re.id,key:"".concat((le=Re.action)===null||le===void 0?void 0:le.id).concat(Re.breakdown_value)},l.a.createElement(j.b,{seriesColor:Rt[Re.id],action:Re.action,breakdownValue:Re.breakdown_value===""?"None":(ot=Re.breakdown_value)===null||ot===void 0?void 0:ot.toString(),showCountedByTag:$t,hasMultipleSeries:Pt}))}))),l.a.createElement("div",{className:"user-count-subheader"},l.a.createElement(Ye.IconPersonFilled,{style:{fontSize:"1.125rem",marginRight:"0.5rem"}}),l.a.createElement("span",null,"This list contains"," ",l.a.createElement("b",null,D.count," unique ",Et.plural),(yt==null?void 0:yt.pointValue)!==void 0&&(!(!((Se=yt.action)===null||Se===void 0)&&Se.math)||((ct=yt.action)===null||ct===void 0?void 0:ct.math)==="total")&&l.a.createElement(l.a.Fragment,null," ","who performed the event"," ",l.a.createElement("b",null,yt.pointValue," total"," ",Object(de.qb)(yt.pointValue,"time",void 0,!1))),".")),D.count>0?l.a.createElement(Pe.a,{columns:[{title:"Person",key:"person",render:function(le,ot){return l.a.createElement(Xt,{actor:ot})}},{width:0,title:"Recordings",key:"recordings",render:function(le,ot){var xt,qt;if(((xt=ot.matched_recordings)===null||xt===void 0?void 0:xt.length)&&((qt=ot.matched_recordings)===null||qt===void 0?void 0:qt.length)>0)return l.a.createElement(vt.a,{sessionRecordings:ot.matched_recordings,onOpenRecording:function(On){wt(On.session_id)}})}}],className:"persons-table",rowKey:"id",expandable:{expandedRowRender:function(le){var ot=le.properties;return Object.keys(ot).length?l.a.createElement(i.a,{properties:ot}):"This person has no properties."}},embedded:!0,showHeader:!1,dataSource:D.people,nouns:["person","persons"]}):l.a.createElement("div",{className:"person-row-container person-row"},"We couldn't find any matching ",Et.plural," for this data point."),(D==null?void 0:D.next)&&l.a.createElement("div",{style:{margin:"1rem",textAlign:"center"}},l.a.createElement(X.a,{type:"primary",style:{color:"white"},onClick:fe,loading:tt},"Load more ",Et.plural)))))}function Xt(ht){var Qe=ht.actor;return Object(de.W)(Qe)?l.a.createElement("div",{key:Qe.id,className:"person-row"},l.a.createElement("div",{className:"person-ids"},l.a.createElement("strong",null,l.a.createElement(ze.a,{actor:Qe})))):l.a.createElement("div",{key:Qe.id,className:"person-ids"},l.a.createElement("strong",null,l.a.createElement(K.a,{person:Qe,withIcon:!1})),l.a.createElement(Ae.a,{explicitValue:Qe.distinct_ids[0],iconStyle:{color:"var(--primary)"},iconPosition:"end",className:"text-small text-muted-alt"},Object(de.kb)(Qe.distinct_ids[0],32)))}try{Ut.displayName="PersonsModal",Ut.__docgenInfo={description:"",displayName:"PersonsModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},onSaveCohort:{defaultValue:null,description:"",name:"onSaveCohort",required:!0,type:{name:"() => void"}},showModalActions:{defaultValue:{value:"true"},description:"",name:"showModalActions",required:!1,type:{name:"boolean"}},aggregationTargetLabel:{defaultValue:null,description:"",name:"aggregationTargetLabel",required:!0,type:{name:"{ singular: string; plural: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"]={docgenInfo:Ut.__docgenInfo,name:"PersonsModal",path:"frontend/src/scenes/trends/PersonsModal.tsx#PersonsModal"})}catch(ht){}try{Xt.displayName="ActorRow",Xt.__docgenInfo={description:"",displayName:"ActorRow",props:{actor:{defaultValue:null,description:"",name:"actor",required:!0,type:{name:"ActorType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"]={docgenInfo:Xt.__docgenInfo,name:"ActorRow",path:"frontend/src/scenes/trends/PersonsModal.tsx#ActorRow"})}catch(ht){}},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(oe,L,t){"use strict";t.d(L,"a",function(){return Je});var J=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Z=t.n(J),Ie=t("./node_modules/react/index.js"),ye=t.n(Ie),ge=t("./node_modules/antd/es/modal/index.js"),_e=t("./node_modules/antd/es/input/index.js");function Je(ie){var e=ie.onOk,l=ie.onCancel,Ve=ie.visible,ce=Object(Ie.useState)(""),O=Z()(ce,2),Le=O[0],X=O[1];return ye.a.createElement(ge.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){e(Le),X("")},onCancel:l,visible:Ve},ye.a.createElement("div",{className:"mb"},ye.a.createElement(_e.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:Le,"data-attr":"cohort-name",onChange:function(T){return X(T.target.value)}})))}try{Je.displayName="SaveCohortModal",Je.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:Je.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch(ie){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(oe,L,t){"use strict";var J=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=t("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},ye=Ie,ge=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),_e=function(e,l){return Z.createElement(ge.a,Object(J.a)(Object(J.a)({},e),{},{ref:l,icon:ye}))};_e.displayName="BarChartOutlined";var Je=L.a=Z.forwardRef(_e)},"./node_modules/@ant-design/icons/es/icons/DownloadOutlined.js":function(oe,L,t){"use strict";var J=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=t("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},ye=Ie,ge=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),_e=function(e,l){return Z.createElement(ge.a,Object(J.a)(Object(J.a)({},e),{},{ref:l,icon:ye}))};_e.displayName="DownloadOutlined";var Je=L.a=Z.forwardRef(_e)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(oe,L,t){"use strict";var J=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=t("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},ye=Ie,ge=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),_e=function(e,l){return Z.createElement(ge.a,Object(J.a)(Object(J.a)({},e),{},{ref:l,icon:ye}))};_e.displayName="OrderedListOutlined";var Je=L.a=Z.forwardRef(_e)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(oe,L,t){"use strict";var J=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=t("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},ye=Ie,ge=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),_e=function(e,l){return Z.createElement(ge.a,Object(J.a)(Object(J.a)({},e),{},{ref:l,icon:ye}))};_e.displayName="PercentageOutlined";var Je=L.a=Z.forwardRef(_e)},"./node_modules/@ant-design/icons/es/icons/SaveOutlined.js":function(oe,L,t){"use strict";var J=t("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Z=t("./node_modules/react/index.js"),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},ye=Ie,ge=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),_e=function(e,l){return Z.createElement(ge.a,Object(J.a)(Object(J.a)({},e),{},{ref:l,icon:ye}))};_e.displayName="SaveOutlined";var Je=L.a=Z.forwardRef(_e)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InsightLegend/InsightLegend.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insight-legend-button{display:flex;align-items:center}.insight-legend-button .insight-legend-button-title{margin-left:.5rem;font-size:14px;font-weight:500}.insight-legend-menu{padding:1rem!important;box-shadow:none!important;border:1px solid rgba(0,0,0,.15);background-color:#fff;border-radius:4px;max-width:300px;width:100%;max-height:100%;overflow-y:auto;overflow-x:auto;display:flex;flex-direction:column}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item{width:100%}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item:not(:last-child){margin-bottom:.5rem}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner{cursor:pointer;display:flex;align-items:center}.insight-legend-menu .insight-legend-menu-scroll .insight-legend-menu-item .insight-legend-menu-item-inner .insights-label{margin-left:.5rem;width:100%;font-size:.75rem}",""]),oe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.properties-table-key{min-width:12rem;display:flex;align-items:center;justify-content:space-between}.property-value-type{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;text-transform:uppercase;cursor:default}.property-value-type:not(:first-child){margin-left:.25rem}.properties-table-value{min-width:12rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;display:flex;align-items:center}.properties-table-value .value-link>*{vertical-align:middle}.properties-table-value .value-link>svg{margin-left:.25rem;font-size:1rem}.properties-table-value .editable{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;-webkit-text-decoration-color:#5375ff;text-decoration-color:#5375ff;cursor:pointer}",""]),oe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,'.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.experiment-form .metrics-selection{border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;width:100%}.experiment-form .metrics-selection .action-filters-bordered .draggable-action-filter{border-bottom:1px solid rgba(0,0,0,.15);padding:1rem .25rem;margin-top:0}.experiment-form .metrics-selection .action-filters-bordered .row-action-btn{color:#35416b}.experiment-form .person-selection{width:100%;border-top:1px solid rgba(0,0,0,.15);padding-top:1rem;align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid rgba(0,0,0,.15);min-height:unset;background-color:#fff;padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(calc(90vh - 16rem),36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .graph-container{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{display:flex;align-items:center;height:3.5rem;padding:0 .5rem;background:#fff;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);border-left:1px solid rgba(0,0,0,.15);border-right:1px solid rgba(0,0,0,.15)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:#bf411a}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.15);margin-bottom:1rem}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.15)}.view-experiment .exp-description{font-style:italic;color:rgba(0,0,0,.5)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list{list-style:none;margin:0;padding:0}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:#fafaf9;border:1px solid rgba(0,0,0,.15);width:100%;min-height:320px;font-size:24px}.view-experiment .end-experiment-btn{background:#77b96c;color:#fff}.view-experiment .end-experiment-btn:hover{color:#000}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:#fafaf9;color:#35416b;font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid rgba(0,0,0,.15);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid rgba(0,0,0,.15);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:#d9d9d9}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid rgba(0,0,0,.15)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),oe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.insights-graph-header.funnels{border-bottom:1px solid rgba(0,0,0,.15)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:#2d2d2d}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),oe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/FunnelCorrelation.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid #f7a501}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:rgba(0,0,0,.5)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:500}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:#747ea1}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:rgba(0,0,0,.5)!important;cursor:pointer;z-index:5}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),oe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/CorrelationMatrix.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:4px;border:1px solid rgba(0,0,0,.15);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid rgba(0,0,0,.15);border-top:1px solid rgba(0,0,0,.15);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:#747ea1}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:#fafafa;text-transform:uppercase;color:rgba(0,0,0,.5)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),oe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelCorrelationTable.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.funnel-correlation-table{margin-top:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:#2d2d2d;margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:#747ea1;cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid rgba(0,0,0,.15);border-radius:4px}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid rgba(0,0,0,.15)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:#747ea1}",""]),oe.exports=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/trends/PersonsModal.scss":function(oe,L,t){var J=t("./node_modules/css-loader/dist/runtime/api.js");L=J(!1),L.push([oe.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.person-modal .ant-modal-header{padding:1rem}.person-modal .ant-modal-title{overflow:hidden;text-overflow:ellipsis}.person-modal .ant-modal-content{overflow:hidden}.person-modal .ant-modal-body{padding:0;max-height:60vh;overflow-y:auto}.person-modal .ant-modal-footer .ant-btn{color:#5375ff}.person-modal .ant-input-search{padding:1rem}.person-modal .persons-table{border-top:1px solid var(--border);border-bottom:1px solid var(--border)}.person-modal .person-ids{display:flex;flex-direction:column}.person-modal .user-count-subheader{padding:.5rem 1rem;color:var(--muted-alt)}.person-modal .user-count-subheader>*{vertical-align:middle}.person-modal .person-row-container{padding:.5rem 1rem}.person-modal .data-point-selector{padding:.5rem 1rem;border-bottom:1px solid var(--border)}.person-modal .data-point-selector .ant-select{display:block;width:100%}",""]),oe.exports=L}}]);
