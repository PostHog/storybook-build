"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[73705],{"./frontend/src/scenes/error-tracking/ErrorTrackingGroupScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingGroupScene:()=>ErrorTrackingGroupScene,scene:()=>scene});var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),ErrorDisplay=__webpack_require__("./frontend/src/lib/components/Errors/ErrorDisplay.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),SessionRecordingsPlaylist=__webpack_require__("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),sceneTypes=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),schema=__webpack_require__("./frontend/src/queries/schema.ts"),queries_utils=__webpack_require__("./frontend/src/queries/utils.ts");let errorTrackingGroupSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","error-tracking","errorTrackingGroupSceneLogic",key]),(0,index_esm.props)({}),(0,lib.loaders)(_ref=>{let{props}=_ref;return{group:[null,{loadGroup:async()=>({id:(0,utils.Vj)(),title:"Placeholder title",description:"This is an error message",occurrences:0,uniqueSessions:0,uniqueUsers:0})}],eventProperties:[[],{loadGroupEvents:async()=>{let query={kind:schema.OH.HogQLQuery,query:(0,queries_utils.zP)`SELECT properties
                                FROM events e
                                WHERE event = '$exception' AND properties.$exception_type = ${props.id}`},res=await api.ZP.query(query);return res.results.map(r=>JSON.parse(r[0]))}}]}}),(0,index_esm.selectors)({breadcrumbs:[s=>[s.group],group=>[{key:sceneTypes.x.ErrorTracking,name:"Error tracking",path:urls.j.errorTracking()},{key:[sceneTypes.x.ErrorTrackingGroup,group?.id||"unknown"],name:group?.title}]]}),(0,index_esm.afterMount)(_ref2=>{let{actions}=_ref2;actions.loadGroup(),actions.loadGroupEvents()})]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:ErrorTrackingGroupScene,logic:errorTrackingGroupSceneLogic,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id}}};function ErrorTrackingGroupScene(){let{eventProperties,eventPropertiesLoading}=(0,index_esm.useValues)(errorTrackingGroupSceneLogic),[activeTab,setActiveTab]=(0,react.useState)("details");return eventPropertiesLoading?(0,jsx_runtime.jsx)(src.Spinner,{}):eventProperties&&eventProperties.length>0?(0,jsx_runtime.jsx)(src.LemonTabs,{tabs:[{key:"details",label:"Details",content:(0,jsx_runtime.jsx)(ExceptionDetails,{eventProperties:eventProperties})},{key:"recordings",label:"Recordings",content:(0,jsx_runtime.jsx)(ExceptionRecordings,{sessionIds:eventProperties.map(p=>p.$session_id).filter(Boolean)})}],activeKey:activeTab,onChange:setActiveTab}):(0,jsx_runtime.jsx)(NotFound.T,{object:"exception"})}let ExceptionDetails=_ref2=>{let{eventProperties}=_ref2,[activeEventId,setActiveEventId]=(0,react.useState)(eventProperties.length-1);return(0,jsx_runtime.jsxs)("div",{children:[eventProperties.length>1&&(0,jsx_runtime.jsxs)("div",{className:"flex justify-end space-x-1",children:[(0,jsx_runtime.jsx)(src.LemonButton,{size:"small",type:"secondary",icon:(0,jsx_runtime.jsx)(icons.ed,{}),onClick:()=>setActiveEventId(activeEventId-1),disabledReason:activeEventId<=0&&"No earlier examples"}),(0,jsx_runtime.jsx)(src.LemonButton,{size:"small",type:"secondary",icon:(0,jsx_runtime.jsx)(icons.VG,{}),onClick:()=>setActiveEventId(activeEventId+1),disabledReason:activeEventId>=eventProperties.length-1&&"No newer examples"})]}),(0,jsx_runtime.jsx)(ErrorDisplay.X,{eventProperties:eventProperties[activeEventId]})]})},ExceptionRecordings=_ref3=>{let{sessionIds}=_ref3;return(0,jsx_runtime.jsx)("div",{className:"SessionRecordingPlaylistHeightWrapper",children:(0,jsx_runtime.jsx)(SessionRecordingsPlaylist.m,{pinnedRecordings:sessionIds})})}}}]);
//# sourceMappingURL=73705.e96ebaa7.iframe.bundle.js.map