var Fe=Object.defineProperty;var $=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var ne=(l,t,e)=>t in l?Fe(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,K=(l,t)=>{for(var e in t||(t={}))te.call(t,e)&&ne(l,e,t[e]);if($)for(var e of $(t))oe.call(t,e)&&ne(l,e,t[e]);return l};var H=(l,t)=>{var e={};for(var o in l)te.call(l,o)&&t.indexOf(o)<0&&(e[o]=l[o]);if(l!=null&&$)for(var o of $(l))t.indexOf(o)<0&&oe.call(l,o)&&(e[o]=l[o]);return e};var Y=(l,t,e)=>new Promise((o,c)=>{var O=u=>{try{d(e.next(u))}catch(p){c(p)}},b=u=>{try{d(e.throw(u))}catch(p){c(p)}},d=u=>u.done?o(u.value):Promise.resolve(u.value).then(O,b);d((e=e.apply(l,t)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[273],{"./frontend/src/lib/components/InlineMessage/InlineMessage.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return M});var o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),c=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),O=e.n(c),b=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss"),d=e.n(b),u={};u.insert="head",u.singleton=!1;var p=O()(d.a,u),m=d.a.locals||{},v=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),I=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),U=e("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),y=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function M(r){let{children:g,style:D,icon:E=Object(y.jsx)(v.a,{}),type:a="info",closable:j,onClose:h}=r;const[S,F]=Object(o.useState)(!0),P=()=>{F(!1),h==null||h()};return Object(y.jsxs)("div",{className:Object(U.default)("inline-message",a,j&&"closable",!S&&"hidden"),style:D,children:[Object(y.jsx)("div",{className:"inline-icon",children:E}),Object(y.jsx)("div",{className:"inline-main",children:g}),j&&Object(y.jsx)("div",{className:"closable",onClick:P,children:Object(y.jsx)(I.a,{})})]})}try{M.displayName="InlineMessage",M.__docgenInfo={description:"",displayName:"InlineMessage",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:{value:"<ExclamationCircleFilled />"},description:"",name:"icon",required:!1,type:{name:"Element"}},type:{defaultValue:{value:"info"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"warning"'},{value:'"danger"'}]}},closable:{defaultValue:null,description:"",name:"closable",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"]={docgenInfo:M.__docgenInfo,name:"InlineMessage",path:"frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"})}catch(r){}},"./frontend/src/lib/components/Table/utils.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return d});var o=e("./frontend/src/lib/hooks/useWindowSize.js"),c=e("./frontend/src/lib/utils/responsiveUtils.tsx"),O=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),b=e.n(O);function d(p){return Object(O.jsx)("span",{style:{whiteSpace:"nowrap"},children:p})}const u=p=>{const{width:m}=Object(o.a)(),v=Object(c.b)(p),I=!!m&&m<=v;return{isTableScrolling:I,tableScrollBreakpoint:v,tableScrollX:I?"max-content":`${v}px`}};try{d.displayName="normalizeColumnTitle",d.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:d.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(p){}try{u.displayName="useIsTableScrolling",u.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:u.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(p){}},"./frontend/src/scenes/groups/RelatedGroups.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return M});var o=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/lib/components/LemonTable/index.ts"),O=e("./frontend/src/models/groupsModel.ts"),b=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/icons/UserOutlined.js"),d=e.n(b),u=e("./frontend/src/lib/utils.tsx"),p=e("./frontend/src/scenes/persons/PersonHeader.tsx"),m=e("./frontend/src/lib/api.ts"),v=e("./frontend/src/scenes/teamLogic.tsx");const I=Object(o.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[v.a,["currentTeamId"]]},props:{},key:r=>{var g;return`${(g=r.groupTypeIndex)!==null&&g!==void 0?g:"person"}-${r.id}`},actions:()=>({loadRelatedActors:!0}),loaders:r=>{let{values:g,props:D}=r;return{relatedActors:[[],{loadRelatedActors:()=>Y(this,null,function*(){const E=`api/projects/${g.currentTeamId}/groups/related?${Object(u.Gb)({group_type_index:D.groupTypeIndex,id:D.id})}`;return yield m.b.get(E)}),setGroup:()=>[]}]}},events:r=>{let{actions:g}=r;return{afterMount:g.loadRelatedActors}}});var U=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),y=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function M(r){let{groupTypeIndex:g,id:D}=r;const{relatedActors:E,relatedActorsLoading:a}=Object(o.useValues)(I({groupTypeIndex:g,id:D})),{aggregationLabel:j}=Object(o.useValues)(O.a),h=[{title:"Type",key:"type",render:function(F,P){return P.type==="group"?Object(y.jsx)(y.Fragment,{children:Object(u.i)(j(P.group_type_index).singular)}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(d.a,{})," Person"]})}},{title:"id",key:"id",render:function(F,P){return P.type=="group"?Object(y.jsx)(U.a,{actor:P}):Object(y.jsx)(p.a,{person:P,withIcon:!1})}}];return Object(y.jsx)(c.a,{dataSource:E,columns:h,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:a,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{M.displayName="RelatedGroups",M.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:M.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(r){}},"./frontend/src/scenes/persons/Person.tsx":function(l,t,e){"use strict";e.r(t),e.d(t,"scene",function(){return Ie}),e.d(t,"Person",function(){return se});var o=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),c=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/dropdown/index.js"),O=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/menu/index.js"),b=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tag/index.js"),d=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/DownOutlined.js"),u=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),p=e("./frontend/src/scenes/events/index.ts"),m=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/scenes/persons/personsLogic.tsx"),I=e("./frontend/src/scenes/persons/PersonHeader.tsx"),U=e("./frontend/src/scenes/persons/Persons.scss"),y=e("./frontend/src/lib/components/CopyToClipboard.tsx"),M=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/modal/index.js"),r=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),g=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),D=e.n(g),E=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss"),a=e.n(E),j={};j.insert="head",j.singleton=!1;var h=D()(a.a,j),S=a.a.locals||{},F=e("./node_modules/.pnpm/kea-router@3.1.3_kea@3.0.4/node_modules/kea-router/lib/index.js"),P=e("./frontend/src/lib/api.ts"),A=e("./frontend/src/lib/components/lemonToast.tsx"),R=e("./frontend/src/lib/utils/eventUsageLogic.ts");const L=Object(m.kea)({props:{},key:n=>{var i;return(i=n.person.id)!==null&&i!==void 0?i:"new"},path:n=>["scenes","persons","mergeSplitPersonLogic",n],connect:()=>({actions:[Object(v.a)({syncWithUrl:!0}),["setListFilters","loadPersons","setPerson","setSplitMergeModalShown"]],values:[Object(v.a)({syncWithUrl:!0}),["persons"]]}),actions:{setSelectedPersonToAssignSplit:n=>({id:n}),cancel:!0},reducers:n=>{let{props:i}=n;return{person:[i.person,{}],selectedPersonsToAssignSplit:[null,{setSelectedPersonToAssignSplit:(T,_)=>{let{id:V}=_;return V}}]}},listeners:n=>{let{actions:i,values:T}=n;return{setListFilters:()=>{i.loadPersons()},cancel:()=>{T.executedLoading||i.setSplitMergeModalShown(!1)}}},loaders:n=>{let{values:i,actions:T}=n;return{executed:[!1,{execute:()=>Y(this,null,function*(){return(yield P.b.create("api/person/"+i.person.id+"/split/",K({},i.selectedPersonsToAssignSplit?{main_distinct_id:i.selectedPersonsToAssignSplit}:{}))).success?(A.d.success("Person succesfully split. This may take up to a couple of minutes to complete."),R.e.actions.reportPersonSplit(i.person.distinct_ids.length),T.setSplitMergeModalShown(!1),F.router.actions.push("/persons"),!0):!1})}]}},events:n=>{let{actions:i}=n;return{afterMount:[i.loadPersons]}}});var Q=e("./frontend/src/lib/utils.tsx"),x=e("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx"),s=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function f(n){let{person:i}=n;const T={person:i},{executedLoading:_}=Object(m.useValues)(L(T)),{execute:V,cancel:z}=Object(m.useActions)(L(T));return Object(s.jsx)(M.a,{visible:!0,title:"Split persons",onCancel:z,className:"merge-split-person",okText:"Split persons",onOk:V,okButtonProps:{loading:_},cancelButtonProps:{disabled:_},children:i.distinct_ids.length<2?"Only persons with more than two distinct IDs can be split.":Object(s.jsx)(m.BindLogic,{logic:L,props:T,children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(C,{})})})})}function C(){const{person:n,executedLoading:i}=Object(m.useValues)(L),{setSelectedPersonToAssignSplit:T}=Object(m.useActions)(L);return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"This will split all Distinct IDs for this person into unique persons."}),Object(s.jsxs)("p",{children:["You can select a distinct ID for which all the current properties will be assigned (",Object(s.jsx)("i",{children:"optional"}),"). All other new users will start without any properties."]}),Object(s.jsx)(r.a,{allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Select a distinct ID to which to assign all properties (optional)",onChange:_=>T(_),filterOption:!1,disabled:i,children:n==null?void 0:n.distinct_ids.map(_=>Object(s.jsx)(r.a.Option,{value:_,children:_},_))}),Object(s.jsx)(x.a,{style:{marginTop:16},type:"danger",children:Object(s.jsxs)("div",{children:["This will create ",Object(s.jsx)("strong",{children:n.distinct_ids.length-1})," new"," ",Object(Q.tb)(n.distinct_ids.length,"person",void 0,!1),". This might change the numbers in your charts, even historically. Please be certain."]})})]}):null}try{f.displayName="MergeSplitPerson",f.__docgenInfo={description:"",displayName:"MergeSplitPerson",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"PersonType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"]={docgenInfo:f.__docgenInfo,name:"MergeSplitPerson",path:"frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"})}catch(n){}var J=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),re=e("./frontend/src/lib/components/LemonTable/index.ts"),X=e("./frontend/src/scenes/urls.ts"),ae=e("./frontend/src/lib/components/Link.tsx");function le(){const{cohorts:n,cohortsLoading:i,person:T}=Object(m.useValues)(v.a),{loadCohorts:_}=Object(m.useActions)(v.a);Object(J.useEffect)(()=>{_()},[T]);const V=[{title:"Name",dataIndex:"name",key:"name",className:"ph-no-capture",render:function(N,G){return Object(s.jsx)(ae.a,{to:X.a.cohort(G.id),children:Object(s.jsx)("strong",{children:G.name})})},sorter:(z,N)=>(z.name||"").localeCompare(N.name||"")},{title:"Users in cohort",render:function(N){return N==null?void 0:N.toLocaleString()},dataIndex:"count",sorter:(z,N)=>(z.count||0)-(N.count||0)}];return Object(s.jsx)(re.a,{dataSource:n||[],loading:i,columns:V,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},emptyState:"This person doesn't belong to any cohort"})}var de=e("./frontend/src/lib/components/PropertiesTable.tsx"),ie=e("./frontend/src/lib/components/TZLabel/index.tsx"),q=e("./frontend/src/lib/components/Tooltip.tsx"),w=e("./frontend/src/types.ts"),ce=e("./frontend/src/lib/components/PageHeader.tsx"),ue=e("./frontend/src/scenes/groups/RelatedGroups.tsx"),pe=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),me=e("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),je=e("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),W=e("./frontend/@posthog/lemon-ui/src/index.ts"),ge=e("./frontend/src/scenes/teamLogic.tsx"),fe=e("./frontend/src/lib/components/AlertMessage/index.ts"),he=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),be=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),xe=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),ve=e("./frontend/src/lib/components/NotFound/index.tsx"),Oe=e("./frontend/src/scenes/persons/RelatedFeatureFlags.tsx"),ye=e("./frontend/src/queries/Query/Query.tsx"),ee=e("./frontend/src/queries/schema.ts"),Se=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Te=e("./frontend/src/lib/constants.tsx");const{TabPane:k}=o.a,Ie={component:se,logic:v.a,paramsToProps:n=>{let{params:{_:i}}=n;return{syncWithUrl:!0,urlId:decodeURIComponent(i)}}};function Pe(n){let{person:i}=n;return Object(s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"IDs:"})," ",Object(s.jsx)(y.a,{tooltipMessage:null,description:"person distinct ID",style:{justifyContent:"flex-end"},children:i.distinct_ids[0]}),i.distinct_ids.length>1&&Object(s.jsx)(c.a,{overlay:Object(s.jsx)(O.a,{children:i.distinct_ids.slice(1).map(T=>Object(s.jsx)(O.a.Item,{children:Object(s.jsx)(y.a,{description:"person distinct ID",iconStyle:{color:"var(--primary)"},children:T})},T))}),trigger:["click"],children:Object(s.jsxs)(b.a,{className:"extra-ids",children:["+",i.distinct_ids.length-1,Object(s.jsx)(d.a,{})]})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"First seen:"})," ",i.created_at?Object(s.jsx)(ie.a,{time:i.created_at}):"unknown"]})]})}function se(){const{person:n,personLoading:i,deletedPersonLoading:T,currentTab:_,splitMergeModalShown:V,urlId:z,distinctId:N}=Object(m.useValues)(v.a),{editProperty:G,deleteProperty:_e,navigateToTab:Me,setSplitMergeModalShown:Re,showPersonDeleteModal:Ce,setDistinctId:Ee}=Object(m.useActions)(v.a),{groupsEnabled:Le}=Object(m.useValues)(pe.b),{currentTeam:Z}=Object(m.useValues)(ge.a),{featureFlags:Ae}=Object(m.useValues)(Se.a),De=Ae[Te.i.DATA_EXPLORATION_LIVE_EVENTS];return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ce.a,{title:Object(I.b)(n),caption:Object(s.jsx)(Pe,{person:n}),buttons:Object(s.jsxs)("div",{className:"flex gap-2",children:[Object(s.jsx)(W.LemonButton,{onClick:()=>Ce(n),disabled:T,loading:T,type:"secondary",status:"danger","data-attr":"delete-person",children:"Delete person"}),n.distinct_ids.length>1&&Object(s.jsx)(W.LemonButton,{onClick:()=>Re(!0),"data-attr":"merge-person-button",type:"secondary",children:"Split IDs"})]})}),Object(s.jsx)(he.a,{}),Object(s.jsxs)(o.a,{activeKey:_,onChange:B=>{Me(B)},destroyInactiveTabPane:!0,"data-attr":"persons-tabs",children:[Object(s.jsx)(k,{tab:Object(s.jsx)("span",{"data-attr":"persons-properties-tab",children:"Properties"}),children:Object(s.jsx)(de.a,{properties:n.properties||{},searchable:!0,onEdit:G,sortProperties:!0,embedded:!1,onDelete:B=>_e(B)})},w.K.PROPERTIES),Object(s.jsx)(k,{tab:Object(s.jsx)("span",{"data-attr":"persons-events-tab",children:"Events"}),children:De?Object(s.jsx)(ye.a,{query:{kind:ee.a.DataTableNode,source:{kind:ee.a.EventsNode,personId:n.id},showReload:!0,showColumnConfigurator:!0,showExport:!0,showEventFilter:!0,showPropertyFilter:!0}}):Object(s.jsx)(p.b,{pageKey:n.distinct_ids.join("__"),fixedFilters:{person_id:n.id},showPersonColumn:!1,sceneUrl:X.a.person(z||n.distinct_ids[0]||String(n.id))})},w.K.EVENTS),Object(s.jsxs)(k,{tab:Object(s.jsx)("span",{"data-attr":"person-session-recordings-tab",children:"Recordings"}),children:[Z!=null&&Z.session_recording_opt_in?null:Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsxs)(fe.a,{type:"info",children:["Session recordings are currently disabled for this project. To use this feature, please go to your ",Object(s.jsx)(W.Link,{to:`${X.a.projectSettings()}#recordings`,children:"project settings"})," and enable it."]})}),Object(s.jsx)(xe.SessionRecordingsPlaylist,{logicKey:n.uuid||"persons",personUUID:n.uuid,updateSearchParams:!0})]},w.K.SESSION_RECORDINGS),Object(s.jsx)(k,{tab:Object(s.jsx)("span",{"data-attr":"persons-cohorts-tab",children:"Cohorts"}),children:Object(s.jsx)(le,{})},w.K.COHORTS),Le&&n.uuid&&Object(s.jsx)(k,{tab:Object(s.jsxs)("span",{"data-attr":"persons-related-tab",children:["Related groups",Object(s.jsx)(q.a,{title:"People and groups that have shared events with this person in the last 90 days.",children:Object(s.jsx)(u.a,{style:{marginLeft:6,marginRight:0}})})]}),children:Object(s.jsx)(ue.a,{id:n.uuid,groupTypeIndex:null})},w.K.RELATED),n.uuid&&Object(s.jsxs)(k,{tab:Object(s.jsx)("span",{"data-attr":"persons-related-flags-tab",children:"Feature flags"}),children:[Object(s.jsxs)("div",{className:"flex space-x-4 items-center mb-2",children:[Object(s.jsxs)("div",{children:["Choose ID:",Object(s.jsx)(q.a,{title:"Feature flags can have different values based on the persons IDs. Turn on persistence in feature flag settings if you'd like these to be constant always.",children:Object(s.jsx)(u.a,{style:{marginLeft:6,marginRight:0}})})]}),Object(s.jsx)(W.LemonSelect,{value:n.distinct_ids[0],onChange:B=>B&&Ee(B),options:n.distinct_ids.map(B=>({label:B,value:B})),"data-attr":"person-feature-flags-select"})]}),Object(s.jsx)(W.LemonDivider,{className:"mb-4"}),Object(s.jsx)(Oe.b,{distinctId:N||n.distinct_ids[0]})]},w.K.FEATURE_FLAGS),Object(s.jsx)(k,{tab:"History",children:Object(s.jsx)(me.a,{scope:je.a.PERSON,id:n.id,caption:Object(s.jsxs)("div",{children:[Object(s.jsx)(u.a,{style:{marginRight:".25rem"}}),Object(s.jsx)("span",{children:"This page only shows changes made by users in the PostHog site. Automatic changes from the API aren't shown here."})]})})},"history")]}),V&&n&&Object(s.jsx)(f,{person:n})]}):i?Object(s.jsx)(be.b,{}):Object(s.jsx)(ve.a,{object:"Person"})}},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return p});var o=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/scenes/persons/personsLogic.tsx"),O=e("./frontend/src/scenes/persons/PersonHeader.tsx"),b=e("./frontend/@posthog/lemon-ui/src/index.ts"),d=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),u=e.n(d);function p(){const{personDeleteModal:m}=Object(o.useValues)(c.a),{deletePerson:v,showPersonDeleteModal:I}=Object(o.useActions)(c.a);return Object(d.jsx)(b.LemonModal,{isOpen:!!m,onClose:()=>I(null),title:`Are you sure you want to delete "${Object(O.b)(m)}"?`,description:Object(d.jsxs)(d.Fragment,{children:["This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",Object(d.jsxs)("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold",children:[" ","Learn more"]})]}),footer:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b.LemonButton,{status:"danger",type:"secondary",onClick:()=>{v({person:m,deleteEvents:!0}),I(null)},"data-attr":"delete-person-with-events",children:"Delete person and all corresponding events"}),Object(d.jsx)(b.LemonButton,{type:"secondary",onClick:()=>I(null),"data-attr":"delete-person-cancel",children:"Cancel"}),Object(d.jsx)(b.LemonButton,{type:"primary",status:"danger",onClick:()=>{v({person:m,deleteEvents:!1}),I(null)},"data-attr":"delete-person-no-events",children:"Delete person"})]})})}},"./frontend/src/scenes/persons/Persons.scss":function(l,t,e){"use strict";var o=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),c=e.n(o),O=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),b=e.n(O),d={};d.insert="head",d.singleton=!1;var u=c()(b.a,d),p=b.a.locals||{}},"./frontend/src/scenes/persons/RelatedFeatureFlags.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return g}),e.d(t,"b",function(){return E});var o=e("./frontend/@posthog/lemon-ui/src/index.ts"),c=e("./node_modules/.pnpm/kea@3.0.4_react@16.14.0/node_modules/kea/lib/index.esm.js"),O=e("./frontend/src/lib/components/Table/utils.tsx"),b=e("./frontend/src/lib/utils.tsx"),d=e("./frontend/src/lib/utils/stringWithWBR.tsx"),u=e("./frontend/src/scenes/urls.ts"),p=e("./frontend/src/types.ts"),m=e("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),v=e("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.0.4/node_modules/kea-loaders/lib/index.js"),I=e("./frontend/src/lib/api.ts"),U=e("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),y=e("./frontend/src/scenes/teamLogic.tsx");const M=Object(c.kea)([Object(c.path)(["scenes","persons","relatedFeatureFlagsLogic"]),Object(c.connect)({values:[y.a,["currentTeamId"],U.b,["featureFlags"]]}),Object(c.props)({}),Object(c.key)(a=>`${a.distinctId}`),Object(c.actions)({setSearchTerm:a=>({searchTerm:a}),setFilters:(a,j)=>({filters:a,replace:j}),loadRelatedFeatureFlags:!0}),Object(v.loaders)(a=>{let{values:j,props:h}=a;return{relatedFeatureFlags:[null,{loadRelatedFeatureFlags:()=>Y(this,null,function*(){return yield I.b.get(`api/projects/${j.currentTeamId}/feature_flags/evaluation_reasons?${Object(b.Gb)(K({distinct_id:h.distinctId},h.groups?{groups:h.groups}:{}))}`)})}]}}),Object(c.reducers)({searchTerm:["",{setSearchTerm:(a,j)=>{let{searchTerm:h}=j;return h}}],filters:[{},{setFilters:(a,j)=>{let{filters:h,replace:S}=j;return K(S?{}:K({},a),h)}}]}),Object(c.selectors)(()=>({mappedRelatedFeatureFlags:[a=>[a.relatedFeatureFlags,a.featureFlags],(a,j)=>a&&j?j.map(h=>K(K({},a[h.key]),h)):[]],filteredMappedFlags:[a=>[a.mappedRelatedFeatureFlags,a.searchTerm,a.filters],(a,j,h)=>{if(!j&&Object.keys(h).length===0)return a;let S=a;j&&(S=new m.a(a,{keys:["key","name"],threshold:.3}).search(j).map(R=>R.item));const{type:F,active:P,reason:A}=h;return F&&(S=S.filter(R=>F===p.u.Variants?R.filters.multivariate:!R.filters.multivariate)),P&&(S=S.filter(R=>P==="true"?R.active:!R.active)),A&&(S=S.filter(R=>A==="not matched"?R.evaluation.reason!==g.ConditionMatch:R.evaluation.reason===g.ConditionMatch)),S}]})),Object(c.events)(a=>{let{actions:j}=a;return{afterMount:j.loadRelatedFeatureFlags}})]);var r=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");let g;(function(a){a.ConditionMatch="condition_match",a.NoConditionMatch="no_condition_match",a.OutOfRolloutBound="out_of_rollout_bound",a.NoGroupType="no_group_type",a.Disabled="disabled"})(g||(g={}));const D={[g.ConditionMatch]:"Matches",[g.NoConditionMatch]:"Doesn't match any conditions",[g.OutOfRolloutBound]:"Out of rollout bound",[g.NoGroupType]:"Missing group type",[g.Disabled]:"Disabled"};function E(a){let{distinctId:j,groups:h}=a;const{filteredMappedFlags:S,relatedFeatureFlagsLoading:F,searchTerm:P,filters:A}=Object(c.useValues)(M({distinctId:j,groups:h})),{setSearchTerm:R,setFilters:L}=Object(c.useActions)(M({distinctId:j,groups:h})),Q=[{title:Object(O.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(x,s)=>(x.key||"").localeCompare(s.key||""),render:function(s,f){const C=(f.experiment_set||[]).length>0;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(o.Link,{to:f.id?u.a.featureFlag(f.id):void 0,className:"row-name",children:[Object(d.a)(f.key,17),Object(r.jsx)(o.LemonTag,{type:C?"purple":"default",className:"ml-2",children:C?"Experiment":"Feature flag"})]}),f.name&&Object(r.jsx)("span",{className:"row-description",children:f.name})]})}},{title:"Type",width:100,render:function(s,f){return f.filters.multivariate?p.u.Variants:p.u.ReleaseToggle}},{title:"Value",dataIndex:"value",width:150,render:function(s,f){return Object(r.jsx)("div",{style:{wordBreak:"break-word"},children:f.active?Object(b.i)(f.value.toString()):"--"})}},{title:"Match evaluation",dataIndex:"evaluation",width:150,render:function(s,f){var C;const J=f.evaluation.reason===g.ConditionMatch;return Object(r.jsxs)("div",{children:[f.active?Object(r.jsx)(r.Fragment,{children:D[f.evaluation.reason]}):"--",J&&Object(r.jsxs)("span",{className:"simple-tag ml-2",style:{background:"var(--primary-highlight)"},children:["Set ",((C=f.evaluation.condition_index)!==null&&C!==void 0?C:0)+1]})]})}},{title:"Status",dataIndex:"active",sorter:(x,s)=>Number(x.active)-Number(s.active),width:100,render:function(s,f){return Object(r.jsx)("span",{className:"font-normal",children:f.active?"Enabled":"Disabled"})}}];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(r.jsx)(o.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:R,value:P}),Object(r.jsxs)("div",{className:"flex items-center gap-2",children:[Object(r.jsx)("span",{children:Object(r.jsx)("b",{children:"Type"})}),Object(r.jsx)(o.LemonSelect,{options:[{label:"All types",value:"all"},{label:p.u.ReleaseToggle,value:p.u.ReleaseToggle},{label:p.u.Variants,value:p.u.Variants}],onChange:x=>{if(x)if(x==="all"){if(A){const s=A,{type:f}=s,C=H(s,["type"]);L(C,!0)}}else L({type:x})},value:"all",dropdownMaxContentWidth:!0}),Object(r.jsx)("span",{className:"ml-2",children:Object(r.jsx)("b",{children:"Match evaluation"})}),Object(r.jsx)(o.LemonSelect,{options:[{label:"All",value:"all"},{label:"Matched",value:g.ConditionMatch},{label:"Not matched",value:"not matched"}],onChange:x=>{if(x)if(x==="all"){if(A){const s=A,{reason:f}=s,C=H(s,["reason"]);L(C,!0)}}else L({reason:x})},value:"all",dropdownMaxContentWidth:!0}),Object(r.jsx)("span",{className:"ml-2",children:Object(r.jsx)("b",{children:"Status"})}),Object(r.jsx)(o.LemonSelect,{onChange:x=>{if(x)if(x==="all"){if(A){const s=A,{active:f}=s,C=H(s,["active"]);L(C,!0)}}else L({active:x})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0})]})]}),Object(r.jsx)(o.LemonTable,{columns:Q,loading:F,dataSource:S})]})}try{E.displayName="RelatedFeatureFlags",E.__docgenInfo={description:"",displayName:"RelatedFeatureFlags",props:{distinctId:{defaultValue:null,description:"",name:"distinctId",required:!0,type:{name:"string"}},groups:{defaultValue:null,description:"",name:"groups",required:!1,type:{name:"{ [key: string]: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"]={docgenInfo:E.__docgenInfo,name:"RelatedFeatureFlags",path:"frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"})}catch(a){}},"./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js":function(l,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};t.default=o},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/icons/UserOutlined.js":function(l,t,e){"use strict";var o=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),c=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var O=c(e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/objectSpread2.js")),b=o(e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),d=c(e("./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js")),u=c(e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/components/AntdIcon.js")),p=function(I,U){return b.createElement(u.default,(0,O.default)((0,O.default)({},I),{},{ref:U,icon:d.default}))};p.displayName="UserOutlined";var m=b.forwardRef(p);t.default=m},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss":function(l,t,e){var o=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");t=o(!1),t.push([l.i,".inline-message{background-color:var(--bg-mid);border-radius:var(--radius);padding:.5rem 1rem;font-weight:var(--font-medium);display:flex;align-items:center;color:var(--primary-alt)}.inline-message.danger{background-color:var(--danger-highlight);color:var(--danger)}.inline-message.closable{padding-right:.5rem}.inline-message.hidden{display:none}.inline-message .inline-icon{margin-right:6px;display:flex;align-items:center}.inline-message .inline-main{flex-grow:1}.inline-message .closable{color:var(--muted);align-self:flex-start;padding-left:1rem;cursor:pointer}",""]),l.exports=t},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss":function(l,t,e){var o=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");t=o(!1),t.push([l.i,".merge-split-person .activity-header{background-color:var(--bg-mid);border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-left:-24px;margin-right:-24px;padding:8px 0;display:flex;justify-content:center;margin-bottom:1rem}.merge-split-person .ant-modal-header{border-bottom:0}.merge-split-person .ant-modal-body{padding-top:0}.merge-split-person .ant-radio-wrapper{margin-right:2px}.merge-split-person .ant-col{margin-right:1rem}.merge-split-person code{background-color:var(--bg-mid);color:var(--primary-alt);padding:4px 8px;border-radius:var(--radius)}",""]),l.exports=t},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(l,t,e){var o=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");t=o(!1),t.push([l.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),l.exports=t}}]);
