(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./frontend/src/lib/components/PayGateMini/PayGateMini.tsx":function(me,C,e){"use strict";e.d(C,"a",function(){return k});var $=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.symbol.js"),ie=e("./node_modules/core-js/modules/es.symbol.description.js"),te=e("./node_modules/react/index.js"),b=e.n(te),X=e("./node_modules/kea/lib/index.esm.js"),r=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),h=e("./frontend/src/types.ts"),ae=e("./frontend/src/scenes/userLogic.ts"),F=e("./frontend/src/lib/components/icons.tsx"),Ee=e("./frontend/src/lib/components/LemonButton/index.ts"),Z=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ce=e.n(Z),ne=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss"),S=e.n(ne),H={};H.insert="head",H.singleton=!1;var L=ce()(S.a,H),ue=S.a.locals||{},x=e("./frontend/src/lib/constants.tsx"),w=e("./frontend/src/lib/utils.tsx"),Y,B=(Y={},oe()(Y,h.d.DASHBOARD_PERMISSIONING,{icon:b.a.createElement(F.IconEmojiPeople,null),description:"Share insights, collaborate on dashboards, manage permissions, and make decisions with your team.",umbrella:"advanced permissioning"}),oe()(Y,h.d.SSO_ENFORCEMENT,{icon:b.a.createElement(F.IconLock,null),description:"Enable SAML single sign-on, enforce login with SSO, automatic user provisioning, and advanced authentication controls.",umbrella:"advanced authentication"}),Y);function k(l){var M=l.feature,A=l.style,O=l.children,N=l.overrideShouldShowGate,q=Object(X.useValues)(r.a),g=q.preflight,be=Object(X.useValues)(ae.a),fe=be.hasAvailableFeature,R=B[M],K=x.i[M],P=null;return!N&&!fe(M)&&(g!=null&&g.cloud?K===x.o?P="add-card":P="contact-sales":P="check-licensing"),P?b.a.createElement("div",{className:"PayGateMini",style:A},b.a.createElement("div",{className:"PayGateMini__icon"},R.icon),b.a.createElement("div",{className:"PayGateMini__description"},R.description),b.a.createElement("div",{className:"PayGateMini__cta"},"Upgrade to ",P==="add-card"?"a premium":"the ".concat(Object(w.j)(K))," ","plan to gain ",R.umbrella,"."),b.a.createElement(Ee.a,{to:P==="add-card"?"/organization/billing":void 0,href:P==="contact-sales"?"mailto:sales@posthog.com?subject=Inquiring about ".concat(R.umbrella):P==="check-licensing"?"https://posthog.com/pricing":void 0,type:"secondary",fullWidth:!0,center:!0},P==="add-card"?"Upgrade now":P==="contact-sales"?"Contact sales":"Explore license options")):b.a.createElement(b.a.Fragment,null,O)}try{k.displayName="PayGateMini",k.__docgenInfo={description:`A sort of paywall for premium features.

Simply shows its children when the feature is available,
otherwise it presents upsell UI with the call to action that's most relevant for the circumstances.`,displayName:"PayGateMini",props:{feature:{defaultValue:null,description:"",name:"feature",required:!0,type:{name:"enum",value:[{value:'"sso_enforcement"'},{value:'"dashboard_permissioning"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},overrideShouldShowGate:{defaultValue:null,description:"",name:"overrideShouldShowGate",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"]={docgenInfo:k.__docgenInfo,name:"PayGateMini",path:"frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"})}catch(l){}},"./frontend/src/scenes/dashboard/ShareModal.tsx":function(me,C,e){"use strict";e.d(C,"a",function(){return q}),e.d(C,"b",function(){return g});var $=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.array.map.js"),ie=e.n(de),te=e("./node_modules/core-js/modules/es.array.concat.js"),b=e.n(te),X=e("./node_modules/react/index.js"),r=e.n(X),h=e("./node_modules/kea/lib/index.esm.js"),ae=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),F=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),Ee=e("./frontend/src/scenes/urls.ts"),Z=e("./frontend/src/models/dashboardsModel.tsx"),ce=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),ne=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),S=e("./frontend/src/lib/components/LemonButton/index.ts"),H=e("./frontend/src/lib/utils.tsx"),L=e("./frontend/src/lib/components/icons.tsx"),ue=e("./frontend/src/types.ts"),x=e("./frontend/src/lib/constants.tsx"),w=e("./frontend/src/lib/components/LemonSelect.tsx"),Y=e("./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts"),B=e("./frontend/src/lib/components/ProfilePicture/index.ts"),k=e("./frontend/src/lib/components/Tooltip.tsx"),l=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),M=e("./frontend/src/lib/components/AlertMessage/index.ts"),A=e("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx"),O=e("./frontend/src/lib/components/UserSelectItem.tsx"),N,q=(N={},oe()(N,x.e.EveryoneInProjectCanEdit,{label:"Everyone in the project can edit",icon:r.a.createElement(L.IconLockOpen,null)}),oe()(N,x.e.OnlyCollaboratorsCanEdit,{label:"Only those invited to this dashboard can edit",icon:r.a.createElement(L.IconLock,null)}),N);function g(R){var K=R.visible,P=R.onCancel,V=Object(h.useValues)(Z.a),I=V.dashboardLoading,U=Object(h.useValues)(ae.c),E=U.dashboard,z=U.canEditDashboard,je=Object(h.useActions)(ae.c),le=je.setIsSharedDashboard,ee=E?window.location.origin+Ee.a.sharedDashboard(E.share_token):"";return E?r.a.createElement(ne.a,{visible:K,onCancel:P},r.a.createElement(be,{dashboardId:E.id}),r.a.createElement("section",null,r.a.createElement("h5",null,"External sharing"),r.a.createElement(ce.a,{id:"share-dashboard-switch",label:"Share dashboard publicly",checked:E.is_shared,loading:I,"data-attr":"share-dashboard-switch",onChange:function(J){le(E.id,J)},type:"primary",disabled:!z,style:{width:"100%",height:"3rem",fontWeight:600}}),E.is_shared?r.a.createElement(r.a.Fragment,null,E.share_token&&r.a.createElement(S.a,{"data-attr":"share-dashboard-link-button",onClick:function(){return Object(H.t)(ee,"link")},icon:r.a.createElement(L.IconCopy,null),style:{width:"100%",height:"3rem",border:"1px solid var(--border)"}},"Copy shared dashboard link"),r.a.createElement("div",null,"Use this HTML snippet to embed the dashboard on your website:"),r.a.createElement(F.a,{language:F.b.HTML},'<iframe width="100%" height="100%" frameborder="0" src="'.concat(ee,'?embedded" />'))):null)):null}function be(R){var K=R.dashboardId,P=Object(h.useValues)(Z.a),V=P.dashboardLoading,I=Object(h.useValues)(ae.c),U=I.dashboard,E=I.canEditDashboard,z=I.canRestrictDashboard,je=Object(h.useActions)(ae.c),le=je.triggerDashboardUpdate,ee=Object(h.useValues)(Object(Y.a)({dashboardId:K})),_e=ee.allCollaborators,J=ee.explicitCollaboratorsLoading,Me=ee.addableMembers,Oe=ee.explicitCollaboratorsToBeAdded,W=Object(h.useActions)(Object(Y.a)({dashboardId:K})),ve=W.deleteExplicitCollaborator,he=W.setExplicitCollaboratorsToBeAdded,D=W.addExplicitCollaborators;return U&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"Collaboration settings"),r.a.createElement(l.a,{feature:ue.d.DASHBOARD_PERMISSIONING,style:{marginTop:"0.75rem"}},r.a.createElement("section",null,(!E||!z)&&r.a.createElement(M.a,{type:"info"},E?"You aren't allowed to change the restriction level \u2013 only the dashboard owner and project admins can.":"You aren't allowed to change sharing settings \u2013 only dashboard collaborators with edit settings can."),r.a.createElement(w.a,{value:U.effective_restriction_level,onChange:function(d){return le({restriction_level:d})},options:q,loading:V,type:"stealth",outlined:!0,style:{height:"3rem",width:"100%"},disabled:!z})),U.restriction_level>x.e.EveryoneInProjectCanEdit&&r.a.createElement("section",null,r.a.createElement("h5",null,"Collaborators"),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex gap-05"},r.a.createElement("div",{style:{flex:1}},r.a.createElement(A.a,{placeholder:"Search for team members to add\u2026",value:Oe,loading:J,onChange:function(d){return he(d)},filterOption:!1,mode:"multiple","data-attr":"subscribed-emails",options:Object(O.a)(Me)})),r.a.createElement(S.a,{type:"primary",loading:J,disabled:Oe.length===0,onClick:function(){return D()}},"Add"))),_e.map(function(c){return r.a.createElement(fe,{key:c.user.uuid,collaborator:c,deleteCollaborator:E?ve:void 0})}))))}function fe(R){var K=R.collaborator,P=R.deleteCollaborator,V=K.user,I=K.level,U=I<=x.d.CanEdit,E=x.C[I];return r.a.createElement("div",{className:"CollaboratorRow"},r.a.createElement(B.b,{email:V.email,name:V.first_name,size:"md",showName:!0}),r.a.createElement(k.a,{title:U?null:"".concat(V.first_name||"This person"," ").concat(I===x.d._Owner?"created the dashboard":"is a project administrator"),placement:"left"},r.a.createElement("div",{className:"CollaboratorRow__details"},r.a.createElement("span",null,U?E:r.a.createElement("b",null,E)),P&&r.a.createElement(S.a,{icon:r.a.createElement(L.IconCancel,null),onClick:function(){return P(V.uuid)},type:"stealth",tooltip:U?"Remove invited collaborator":null,disabled:!U,status:"danger",size:"small"}))))}try{g.displayName="ShareModal",g.__docgenInfo={description:"",displayName:"ShareModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"]={docgenInfo:g.__docgenInfo,name:"ShareModal",path:"frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"})}catch(R){}},"./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts":function(me,C,e){"use strict";e.d(C,"a",function(){return se});var $=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=e.n($),de=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ie=e.n(de),te=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),b=e.n(te),X=e("./node_modules/@babel/runtime/regenerator/index.js"),r=e.n(X),h=e("./node_modules/core-js/modules/es.array.iterator.js"),ae=e.n(h),F=e("./node_modules/core-js/modules/es.object.to-string.js"),Ee=e.n(F),Z=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ce=e.n(Z),ne=e("./node_modules/core-js/modules/es.array.sort.js"),S=e.n(ne),H=e("./node_modules/core-js/modules/es.promise.js"),L=e.n(H),ue=e("./node_modules/core-js/modules/es.string.iterator.js"),x=e.n(ue),w=e("./node_modules/core-js/modules/es.array.map.js"),Y=e.n(w),B=e("./node_modules/core-js/modules/es.array.concat.js"),k=e.n(B),l=e("./node_modules/core-js/modules/es.array.filter.js"),M=e.n(l),A=e("./node_modules/core-js/modules/es.array.find.js"),O=e.n(A),N=e("./node_modules/core-js/modules/es.object.keys.js"),q=e.n(N),g=e("./node_modules/core-js/modules/es.symbol.js"),be=e.n(g),fe=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),R=e.n(fe),K=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),P=e.n(K),V=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),I=e.n(V),U=e("./node_modules/core-js/modules/es.array.slice.js"),E=e.n(U),z=e("./node_modules/core-js/modules/es.function.name.js"),je=e.n(z),le=e("./node_modules/core-js/modules/es.array.from.js"),ee=e.n(le),_e=e("./node_modules/core-js/modules/es.regexp.exec.js"),J=e.n(_e),Me=e("./node_modules/core-js/modules/es.symbol.description.js"),Oe=e.n(Me),W=e("./node_modules/core-js/modules/es.symbol.iterator.js"),ve=e.n(W),he=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/lib/api.ts"),c=e("./frontend/src/lib/constants.tsx"),d=e("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),_=e("./frontend/src/scenes/dashboard/dashboardLogic.ts");function f(s,o){var t=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!t){if(Array.isArray(s)||(t=v(s))||o&&s&&typeof s.length=="number"){t&&(s=t);var n=0,G=function(){};return{s:G,n:function(){return n>=s.length?{done:!0}:{done:!1,value:s[n++]}},e:function(j){throw j},f:G}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,T=!1,y;return{s:function(){t=t.call(s)},n:function(){var j=t.next();return p=j.done,j},e:function(j){T=!0,y=j},f:function(){try{!p&&t.return!=null&&t.return()}finally{if(T)throw y}}}}function v(s,o){if(!!s){if(typeof s=="string")return m(s,o);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(s,o)}}function m(s,o){(o==null||o>s.length)&&(o=s.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=s[t];return n}function a(s,o){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);o&&(n=n.filter(function(G){return Object.getOwnPropertyDescriptor(s,G).enumerable})),t.push.apply(t,n)}return t}function u(s){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?a(Object(t),!0).forEach(function(n){oe()(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}var se=Object(he.kea)({path:function(o){return["scenes","dashboard","dashboardCollaboratorsLogic",o]},props:{},key:function(o){return o.dashboardId},connect:function(o){return{values:[d.b,["admins","plainMembers","allMembers","allMembersLoading"],Object(_.c)({id:o.dashboardId}),["dashboard"]]}},actions:{deleteExplicitCollaborator:function(o){return{userUuid:o}},setExplicitCollaboratorsToBeAdded:function(o){return{userUuids:o}},addExplicitCollaborators:!0},reducers:{explicitCollaboratorsToBeAdded:[[],{setExplicitCollaboratorsToBeAdded:function(o,t){var n=t.userUuids;return n}}]},loaders:function(o){var t=o.values,n=o.props,G=o.actions;return{explicitCollaborators:[[],{loadExplicitCollaborators:function(){var p=b()(r.a.mark(function y(){var i;return r.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,D.b.dashboards.collaborators.list(n.dashboardId);case 2:return i=re.sent,i.sort(function(Q,pe){return Q.user.first_name.localeCompare(pe.user.first_name)}),re.abrupt("return",i);case 5:case"end":return re.stop()}},y)}));function T(){return p.apply(this,arguments)}return T}(),addExplicitCollaborators:function(){var p=b()(r.a.mark(function y(){var i,j,re,Q;return r.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return i=t.explicitCollaboratorsToBeAdded,j=t.explicitCollaborators,G.setExplicitCollaboratorsToBeAdded([]),Pe.next=4,Promise.all(i.map(function(){var Ce=b()(r.a.mark(function ye(Le){return r.a.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,D.b.dashboards.collaborators.create(n.dashboardId,Le,c.d.CanEdit);case 2:return De.abrupt("return",De.sent);case 3:case"end":return De.stop()}},ye)}));return function(ye){return Ce.apply(this,arguments)}}()));case 4:return re=Pe.sent,Q=[].concat(ie()(j),ie()(re)),Q.sort(function(Ce,ye){return Ce.user.first_name.localeCompare(ye.user.first_name)}),Pe.abrupt("return",Q);case 8:case"end":return Pe.stop()}},y)}));function T(){return p.apply(this,arguments)}return T}(),deleteExplicitCollaborator:function(){var p=b()(r.a.mark(function y(i){var j;return r.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return j=i.userUuid,Q.next=3,D.b.dashboards.collaborators.delete(n.dashboardId,j);case 3:return Q.abrupt("return",t.explicitCollaborators.filter(function(pe){return pe.user.uuid!==j}));case 4:case"end":return Q.stop()}},y)}));function T(y){return p.apply(this,arguments)}return T}()}]}},selectors:{allCollaborators:[function(s){return[s.explicitCollaborators,s.admins,s.allMembers,s.dashboard]},function(s,o,t,n){var G,p=[],T=n==null||(G=n.created_by)===null||G===void 0?void 0:G.uuid,y=(n==null?void 0:n.effective_restriction_level)===c.e.EveryoneInProjectCanEdit?t:o;return p.push.apply(p,ie()(s.filter(function(i){return!y.find(function(j){return j.user.uuid===i.user.uuid})}).map(function(i){return u(u({},i),{},{level:i.user.uuid===T?c.d._Owner:i.level})}))),p.push.apply(p,ie()(y.map(function(i){return{user:i.user,level:i.user.uuid===T?c.d._Owner:c.d._ProjectAdmin}}))),p.sort(function(i,j){return i.level===j.level?i.user.first_name.localeCompare(j.user.first_name):j.level-i.level}),p}],addableMembers:[function(s){return[s.allCollaborators,s.plainMembers]},function(s,o){var t=[],n=f(o),G;try{var p=function(){var y=G.value;s.some(function(i){return i.user.uuid===y.user.uuid})||t.push(y.user)};for(n.s();!(G=n.n()).done;)p()}catch(T){n.e(T)}finally{n.f()}return t.sort(function(T,y){return T.first_name.localeCompare(y.first_name)}),t}],addableMembersLoading:[function(s){return[s.explicitCollaboratorsLoading,s.allMembersLoading]},function(s,o){return s||o}]},events:function(o){var t=o.actions;return{afterMount:function(){t.loadExplicitCollaborators()}}}})},"./frontend/src/scenes/dashboard/dashboardsLogic.ts":function(me,C,e){"use strict";e.d(C,"a",function(){return B}),e.d(C,"b",function(){return k});var $=e("./node_modules/core-js/modules/es.array.sort.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.array.filter.js"),ie=e.n(de),te=e("./node_modules/core-js/modules/es.object.to-string.js"),b=e.n(te),X=e("./node_modules/core-js/modules/es.function.name.js"),r=e.n(X),h=e("./node_modules/core-js/modules/es.array.map.js"),ae=e.n(h),F=e("./node_modules/core-js/modules/es.regexp.exec.js"),Ee=e.n(F),Z=e("./node_modules/core-js/modules/es.string.search.js"),ce=e.n(Z),ne=e("./node_modules/core-js/modules/es.array.flat-map.js"),S=e.n(ne),H=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),L=e.n(H),ue=e("./node_modules/kea/lib/index.esm.js"),x=e("./node_modules/fuse.js/dist/fuse.esm.js"),w=e("./frontend/src/models/dashboardsModel.tsx"),Y=e("./frontend/src/lib/utils.tsx"),B;(function(l){l.All="all",l.Pinned="pinned",l.Shared="shared"})(B||(B={}));var k=Object(ue.kea)({path:["scenes","dashboard","dashboardsLogic"],actions:{setSearchTerm:function(M){return{searchTerm:M}},setCurrentTab:function(M){return{tab:M}}},reducers:{searchTerm:{setSearchTerm:function(M,A){var O=A.searchTerm;return O}},currentTab:[B.All,{setCurrentTab:function(M,A){var O=A.tab;return O}}]},selectors:{dashboards:[function(l){return[w.a.selectors.nameSortedDashboards,l.searchTerm,l.currentTab]},function(l,M,A){return l=l.filter(function(O){return!O.deleted}).sort(function(O,N){var q,g;return((q=O.name)!==null&&q!==void 0?q:"Untitled").localeCompare((g=N.name)!==null&&g!==void 0?g:"Untitled")}),A===B.Pinned?l=l.filter(function(O){return O.pinned}):A===B.Shared&&(l=l.filter(function(O){return O.is_shared})),M?new x.a(l,{keys:["key","name"],threshold:.3}).search(M).map(function(O){return O.item}):l}],dashboardTags:[function(){return[w.a.selectors.nameSortedDashboards]},function(l){return Object(Y.Db)(l.flatMap(function(M){var A=M.tags;return A||""}),function(M){return M}).sort()}]}})},"./frontend/src/scenes/project/Settings/teamMembersLogic.tsx":function(me,C,e){"use strict";e.d(C,"a",function(){return ve}),e.d(C,"b",function(){return he});var $=e("./node_modules/core-js/modules/es.object.keys.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.symbol.js"),ie=e.n(de),te=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),b=e.n(te),X=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r=e.n(X),h=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),ae=e.n(h),F=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Ee=e.n(F),Z=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ce=e.n(Z),ne=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),S=e.n(ne),H=e("./node_modules/@babel/runtime/regenerator/index.js"),L=e.n(H),ue=e("./node_modules/core-js/modules/es.array.iterator.js"),x=e.n(ue),w=e("./node_modules/core-js/modules/es.object.to-string.js"),Y=e.n(w),B=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),k=e.n(B),l=e("./node_modules/core-js/modules/es.promise.js"),M=e.n(l),A=e("./node_modules/core-js/modules/es.string.iterator.js"),O=e.n(A),N=e("./node_modules/core-js/modules/es.array.map.js"),q=e.n(N),g=e("./node_modules/core-js/modules/es.array.concat.js"),be=e.n(g),fe=e("./node_modules/core-js/modules/es.array.filter.js"),R=e.n(fe),K=e("./node_modules/core-js/modules/es.array.find.js"),P=e.n(K),V=e("./node_modules/react/index.js"),I=e.n(V),U=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/lib/api.ts"),z=e("./frontend/src/lib/constants.tsx"),je=e("./frontend/src/types.ts"),le=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),ee=e("./frontend/src/lib/utils/permissioning.ts"),_e=e("./frontend/src/scenes/userLogic.ts"),J=e("./frontend/src/scenes/teamLogic.tsx"),Me=e("./frontend/src/lib/components/lemonToast.tsx");function Oe(D,c){var d=Object.keys(D);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(D);c&&(_=_.filter(function(f){return Object.getOwnPropertyDescriptor(D,f).enumerable})),d.push.apply(d,_)}return d}function W(D){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?Oe(Object(d),!0).forEach(function(_){Ee()(D,_,d[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(d)):Oe(Object(d)).forEach(function(_){Object.defineProperty(D,_,Object.getOwnPropertyDescriptor(d,_))})}return D}var ve=z.m.Admin,he=Object(U.kea)({path:["scenes","project","Settings","teamMembersLogic"],actions:{changeUserAccessLevel:function(c,d){return{user:c,newLevel:d}}},loaders:function(c){var d=c.values;return{explicitMembers:{__default:[],loadMembers:function(){var _=S()(L.a.mark(function v(){return L.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.b.get("api/projects/".concat(J.a.values.currentTeamId,"/explicit_members/"));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},v)}));function f(){return _.apply(this,arguments)}return f}(),addMembers:function(){var _=S()(L.a.mark(function v(m){var a,u,se;return L.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=m.userUuids,u=m.level,o.next=3,Promise.all(a.map(function(t){return E.b.create("api/projects/".concat(J.a.values.currentTeamId,"/explicit_members/"),{user_uuid:t,level:u})}));case 3:return se=o.sent,Me.d.success("Added ".concat(se.length," members").concat(se.length!==1&&"s"," to the project.")),o.abrupt("return",[].concat(ce()(d.explicitMembers),ce()(se)));case 6:case"end":return o.stop()}},v)}));function f(v){return _.apply(this,arguments)}return f}(),removeMember:function(){var _=S()(L.a.mark(function v(m){var a,u;return L.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=m.member,s.next=3,E.b.delete("api/projects/".concat(J.a.values.currentTeamId,"/explicit_members/").concat(u.user.uuid,"/"));case 3:return Me.d.success(I.a.createElement(I.a.Fragment,null,u.user.uuid===((a=_e.a.values.user)===null||a===void 0?void 0:a.uuid)?"Left":"Removed ".concat(u.user.first_name," (").concat(u.user.email,") from")," ","the project.")),s.abrupt("return",d.explicitMembers.filter(function(o){return o.user.uuid!==u.user.uuid}));case 5:case"end":return s.stop()}},v)}));function f(v){return _.apply(this,arguments)}return f}()}}},selectors:function(c){var d=c.selectors;return{allMembers:[function(){return[J.a.selectors.currentTeam,_e.a.selectors.hasAvailableFeature,d.explicitMembers,le.a.selectors.members]},function(_,f,v,m){return!(_!=null&&_.access_control)||!f(je.d.PROJECT_BASED_PERMISSIONING)?m.map(function(a){return W(W({},a),{},{explicit_team_level:null,organization_level:a.level})}):m.filter(function(a){var u=a.level;return u>=ve}).map(function(a){return W(W({},a),{},{explicit_team_level:null,organization_level:a.level})}).concat(v.filter(function(a){var u=a.parent_level;return u<ve}).map(function(a){return W(W({},a),{},{level:a.effective_level,explicit_team_level:a.level,organization_level:a.parent_level})}))}],allMembersLoading:[function(){return[d.explicitMembersLoading,le.a.selectors.membersLoading]},function(_,f){return _||f}],admins:[function(){return[d.allMembers]},function(_){return _.filter(function(f){var v=f.level;return v>=z.y.Admin})}],plainMembers:[function(){return[d.allMembers]},function(_){return _.filter(function(f){var v=f.level;return v<z.y.Admin})}],addableMembers:[function(){return[d.explicitMembers,le.a.selectors.members,_e.a.selectors.user]},function(_,f,v){return f.filter(function(m){var a=m.user;return a.uuid!==v.uuid}).map(function(m){var a=_.find(function(se){return se.user.uuid===m.user.uuid}),u;return a?u=Math.max(a.effective_level,m.level):u=m.level>=ve?m.level:null,W(W({},m),{},{level:u,explicit_team_level:a?a.level:null,organization_level:m.level})})}]}},listeners:function(c){var d=c.actions;return{changeUserAccessLevel:function(){var _=S()(L.a.mark(function v(m){var a,u;return L.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=m.user,u=m.newLevel,s.next=3,E.b.update("api/projects/".concat(J.a.values.currentTeamId,"/explicit_members/").concat(a.uuid,"/"),{level:u});case 3:Me.d.success(I.a.createElement(I.a.Fragment,null,"Made ",I.a.createElement("b",null,a.first_name)," project ",ee.b.get(u))),d.loadMembers();case 5:case"end":return s.stop()}},v)}));function f(v){return _.apply(this,arguments)}return f}()}},events:function(c){var d=c.actions;return{afterMount:d.loadMembers}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss":function(me,C,e){var $=e("./node_modules/css-loader/dist/runtime/api.js");C=$(!1),C.push([me.i,".PayGateMini{display:flex;flex-direction:column;align-items:center;text-align:center;background:var(--bg-side);border-radius:var(--radius);padding:.75rem;font-size:.875rem}.PayGateMini__icon{display:flex;color:var(--warning);font-size:2rem}.PayGateMini__description{margin-top:.75rem;font-weight:600;color:var(--primary-alt)}.PayGateMini__cta{margin-bottom:.75rem}",""]),me.exports=C}}]);
