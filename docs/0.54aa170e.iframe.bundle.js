(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/RestrictedArea.tsx":function(ge,S,e){"use strict";e.d(S,"b",function(){return x}),e.d(S,"a",function(){return N});var G=e("./node_modules/core-js/modules/es.array.concat.js"),ie=e.n(G),ce=e("./node_modules/kea/lib/index.esm.js"),ue=e("./node_modules/react/index.js"),X=e.n(ue),te=e("./frontend/src/scenes/organizationLogic.tsx"),ne=e("./frontend/src/lib/constants.tsx"),B=e("./frontend/src/lib/components/Tooltip.tsx"),de=e("./frontend/src/lib/utils/permissioning.ts"),re=e("./frontend/src/scenes/teamLogic.tsx"),x;(function(b){b.Organization="organization",b.Project="project"})(x||(x={}));function N(b){var U=b.Component,je=b.minimumAccessLevel,w=b.scope,me=w===void 0?x.Organization:w,Oe=Object(ce.useValues)(te.a),t=Oe.currentOrganization,L=Object(ce.useValues)(re.a),ye=L.currentTeam,F=Object(ue.useMemo)(function(){var z;if(me===x.Project){if(!ye)return"Loading current project\u2026";z=ye.effective_membership_level}else{if(!t)return"Loading current organization\u2026";z=t.membership_level}return z===null?"You don't have access to the current ".concat(me,"."):z<je?je===ne.m.Owner?"This area is restricted to the ".concat(me," owner."):"This area is restricted to ".concat(me," ").concat(de.b.get(je),"s and up. Your level is ").concat(de.b.get(z),"."):null},[t]);return F?X.a.createElement(B.a,{title:F,placement:"topLeft",delayMs:0},X.a.createElement("span",null,X.a.createElement(U,{isRestricted:!0,restrictionReason:F}))):X.a.createElement(U,{isRestricted:!1,restrictionReason:null})}try{N.displayName="RestrictedArea",N.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:N.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(b){}try{x.Organization.displayName="RestrictionScope.Organization",x.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:x.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(b){}try{x.Project.displayName="RestrictionScope.Project",x.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:x.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(b){}},"./frontend/src/scenes/actions/EventName.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return te}),e.d(S,"b",function(){return ne});var G=e("./node_modules/react/index.js"),ie=e.n(G),ce=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ue=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),X=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function te(B){var de=B.value,re=B.onChange;return ie.a.createElement(ue.d,{groupType:X.a.Events,onChange:re,value:de,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(N){return ie.a.createElement(ce.a,{value:N,disablePopover:!0})},allowClear:!0})}function ne(B){var de=B.value,re=B.onChange;return ie.a.createElement(ue.b,{groupType:X.a.Events,onChange:re,value:de,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(N){return ie.a.createElement(ce.a,{value:N,disablePopover:!0})},allowClear:!0})}try{te.displayName="EventName",te.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:te.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(B){}try{ne.displayName="LemonEventName",ne.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:ne.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(B){}},"./frontend/src/scenes/events/EventDetails.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return _e});var G=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ie=e.n(G),ce=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ue=e.n(ce),X=e("./node_modules/core-js/modules/es.object.keys.js"),te=e("./node_modules/core-js/modules/es.symbol.js"),ne=e("./node_modules/core-js/modules/es.array.filter.js"),B=e("./node_modules/core-js/modules/es.object.to-string.js"),de=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),re=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),x=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),N=e("./node_modules/react/index.js"),b=e.n(N),U=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),je=e("./frontend/src/lib/components/PropertiesTable.tsx"),w=e("./frontend/src/scenes/events/EventElements.tsx"),me=e("./node_modules/antd/es/tabs/index.js"),Oe=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(Oe),L=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),ye=e("./frontend/src/lib/utils.tsx"),F=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function z(g,d){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);d&&(y=y.filter(function(W){return Object.getOwnPropertyDescriptor(g,W).enumerable})),E.push.apply(E,y)}return E}function $(g){for(var d=1;d<arguments.length;d++){var E=arguments[d]!=null?arguments[d]:{};d%2?z(Object(E),!0).forEach(function(y){ie()(g,y,E[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):z(Object(E)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(E,y))})}return g}function oe(g){var d=g.event,E=d.event,y=d.id,W=d.uuid,Y=d.distinct_id,xe=d.properties,ve=d.elements,he=d.timestamp,Se=d.person,be=t()(d,F),H=$($($($({},y?{id:y}:null),W?{uuid:W}:null),{},{timestamp:he,event:E,distinct_id:Y,properties:Object(ye.yb)(xe)},ve&&ve.length>0?{elements:ve}:null),be);return b.a.createElement(L.a,{language:L.b.JSON},JSON.stringify(H,null,4))}try{oe.displayName="EventJSON",oe.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:oe.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(g){}var Ue=e("./frontend/src/lib/dayjs.ts"),Q=e("./frontend/src/lib/components/LemonButton/index.ts");function se(g,d){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);d&&(y=y.filter(function(W){return Object.getOwnPropertyDescriptor(g,W).enumerable})),E.push.apply(E,y)}return E}function ae(g){for(var d=1;d<arguments.length;d++){var E=arguments[d]!=null?arguments[d]:{};d%2?se(Object(E),!0).forEach(function(y){ie()(g,y,E[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):se(Object(E)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(E,y))})}return g}var Z=me.a.TabPane;function _e(g){for(var d=g.event,E=Object(N.useState)(!1),y=ue()(E,2),W=y[0],Y=y[1],xe={},ve={},he=0,Se=0,be=Object.keys(d.properties);Se<be.length;Se++){var H=be[Se];U.e.event[H]&&U.e.event[H].hide&&(he+=1,W&&(ve[H]=d.properties[H])),(!U.e.event[H]||!U.e.event[H].hide)&&(xe[H]=d.properties[H])}return b.a.createElement(me.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},b.a.createElement(Z,{tab:"Properties",key:"properties"},b.a.createElement(je.a,{properties:ae(ae({$timestamp:Object(Ue.a)(d.timestamp).toISOString()},xe),ve),useDetectedPropertyType:!0}),he>0&&b.a.createElement(Q.a,{className:"mb-05",onClick:function(){return Y(!W)},size:"small"},W?"Hide":"Show"," ",Object(ye.qb)(he,"hidden property","hidden properties"))),b.a.createElement(Z,{tab:"JSON",key:"json"},b.a.createElement(oe,{event:d})),d.elements&&d.elements.length>0&&b.a.createElement(Z,{tab:"Elements",key:"elements"},b.a.createElement(w.a,{event:d})))}try{_e.displayName="EventDetails",_e.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:_e.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(g){}},"./frontend/src/scenes/events/EventElements.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return $});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ie=e.n(G),ce=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ue=e.n(ce),X=e("./node_modules/core-js/modules/es.array.join.js"),te=e.n(X),ne=e("./node_modules/core-js/modules/es.array.fill.js"),B=e.n(ne),de=e("./node_modules/core-js/modules/es.array.slice.js"),re=e.n(de),x=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(x),b=e("./node_modules/core-js/modules/es.object.entries.js"),U=e.n(b),je=e("./node_modules/core-js/modules/es.array.concat.js"),w=e.n(je),me=e("./node_modules/core-js/modules/es.regexp.exec.js"),Oe=e.n(me),t=e("./node_modules/core-js/modules/es.string.replace.js"),L=e.n(t),ye=e("./node_modules/react/index.js"),F=e.n(ye);function z(oe){return Array(oe).fill("    ").join("")}function $(oe){var Ue=oe.event,Q=ue()(Ue.elements||[]).reverse();return Q=Q.slice(Math.max(Q.length-10,1)),F.a.createElement("div",null,Q.map(function(se,ae){return F.a.createElement("pre",{className:"code",key:ae,style:{margin:0,padding:0,borderRadius:0,backgroundColor:ae===Q.length-1?"var(--primary)":void 0}},z(ae),"<",se.tag_name,se.attr_id&&' id="'.concat(se.attr_id,'"'),Object.entries(se.attributes).map(function(Z){var _e=ie()(Z,2),g=_e[0],d=_e[1];return F.a.createElement("span",{key:g}," ".concat(g.replace("attr__",""),'="').concat(d,'"'))}),">",se.text,ae===Q.length-1&&F.a.createElement("span",null,"</",se.tag_name,">"))}),ue()(Q).reverse().slice(1).map(function(se,ae){return F.a.createElement("pre",{className:"code",key:ae,style:{margin:0,padding:0,borderRadius:0}},z(Q.length-ae-2),"</",se.tag_name,">")}))}try{$.displayName="EventElements",$.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:$.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(oe){}},"./frontend/src/scenes/events/EventsTable.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return rt});var G=e("./node_modules/core-js/modules/es.symbol.js"),ie=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ce=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ue=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),X=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),te=e.n(X),ne=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),B=e.n(ne),de=e("./node_modules/core-js/modules/es.array.splice.js"),re=e("./node_modules/core-js/modules/es.array.filter.js"),x=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e("./node_modules/core-js/modules/es.array.map.js"),b=e("./node_modules/core-js/modules/es.array.find.js"),U=e("./node_modules/core-js/modules/es.array.concat.js"),je=e("./node_modules/core-js/modules/es.array.join.js"),w=e("./node_modules/core-js/modules/es.object.keys.js"),me=e("./node_modules/core-js/modules/es.regexp.to-string.js"),Oe=e("./node_modules/react/index.js"),t=e.n(Oe),L=e("./node_modules/kea/lib/index.esm.js"),ye=e("./frontend/src/scenes/events/EventDetails.tsx"),F=e("./frontend/src/lib/components/Link.tsx"),z=e("./node_modules/antd/es/popconfirm/index.js"),$=e("./node_modules/antd/es/button/index.js"),oe=e("./node_modules/kea-router/lib/index.js"),Ue=e("./node_modules/@babel/runtime/helpers/typeof.js"),Q=e.n(Ue),se=e("./node_modules/core-js/modules/es.regexp.exec.js"),ae=e("./node_modules/core-js/modules/es.string.replace.js");function Z(r){var o=r.value;return t.a.createElement("span",{title:o},Q()(o)==="object"?JSON.stringify(o):o&&o.toString().replace(/(^\w+:|^)\/\//,""))}try{Z.displayName="Property",Z.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:Z.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(r){}var _e=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function g(r,o){var l=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),l.push.apply(l,c)}return l}function d(r){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?g(Object(l),!0).forEach(function(c){te()(r,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):g(Object(l)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(l,c))})}return r}function E(r){var o=r.property,l=r.value,c=r.filters,C=r.onClick,V=r.className,R=Object(_e.c)(c.properties),Me=R.find(function(q){return q.key===o&&q.value===l&&!q.operator})?R.filter(function(q){return q.key!==o||q.value!==l||q.operator}):[].concat(B()(R),[{key:o,value:l}]),He=Object(oe.combineUrl)(window.location.pathname,d(d({},c),{},{properties:Me}),{}),Ie=He.url;return t.a.createElement(F.a,{to:Ie,className:V,onClick:function(){C&&C(o,l)}},t.a.createElement(Z,{value:l}))}try{E.displayName="FilterPropertyLink",E.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:E.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(r){}var y=e("./frontend/src/lib/utils.tsx"),W=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Y=e.n(W),xe=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),ve=e.n(xe),he={};he.insert="head",he.singleton=!1;var Se=Y()(ve.a,he),be=ve.a.locals||{},H=e("./frontend/src/scenes/events/eventsTableLogic.ts"),ze=e("./frontend/src/scenes/persons/PersonHeader.tsx"),vt=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),Fe=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Le=e("./frontend/src/types.ts"),pe=e("./frontend/src/scenes/actions/EventName.tsx"),pt=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),qe=e("./frontend/src/lib/components/Tooltip.tsx"),We=e("./node_modules/clsx/dist/clsx.m.js"),De=Object(L.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(o){return{columnConfig:o}}},reducers:function(o){var l=o.props;return{selectedColumns:[l.startingColumns||"DEFAULT",{setSelectedColumns:function(C,V){var R=V.columnConfig;return R}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(r){return[r.selectedColumns]},function(r){return r==="DEFAULT"?7:r.length+2}]}}),Re=e("./frontend/src/scenes/urls.ts"),ft=e("./frontend/src/lib/components/LemonTable/index.ts"),v=e("./frontend/src/lib/components/icons.tsx"),n=e("./frontend/src/lib/components/LemonButton/index.ts"),s=e("./frontend/src/lib/components/LemonButton/More.tsx"),i=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),f=e("./frontend/src/scenes/teamLogic.tsx"),a=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function m(r){Object(Oe.useEffect)(function(){var o="hidden",l="visibilitychange";typeof document.msHidden!="undefined"?(o="msHidden",l="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(o="webkitHidden",l="webkitvisibilitychange");var c=function(){r(!document[o])};return document.addEventListener(l,c),function(){document.removeEventListener(l,c)}},[])}var u=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),p=e.n(u),fe=e("./node_modules/core-js/modules/es.array.includes.js"),k=e("./node_modules/core-js/modules/es.string.includes.js"),Te=e("./node_modules/antd/es/row/index.js"),Ee=e("./node_modules/antd/es/space/index.js"),Pe=e("./node_modules/antd/es/col/index.js"),P=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),$e=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),et=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),A=e.n(et),Ye={};Ye.insert="head",Ye.singleton=!1;var Et=Y()(A.a,Ye),bt=A.a.locals||{},tt=e("./node_modules/antd/lib/modal/Modal.js"),Pt=e.n(tt),Ve=e("./node_modules/react-virtualized/dist/es/List/index.js"),Ct=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),rn=e("./node_modules/core-js/modules/es.array.from.js"),on=e("./node_modules/core-js/modules/es.string.iterator.js"),sn=e("./node_modules/core-js/modules/es.array.iterator.js"),an=e("./node_modules/core-js/modules/es.set.js"),ln=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Rt=Object(L.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[De],actions:{selectColumn:function(o){return{column:o}},unselectColumn:function(o){return{column:o}},resetColumns:function(o){return{columns:o}},setColumns:function(o){return{columns:o}},toggleSaveAsDefault:!0,save:!0},reducers:function(o){var l=o.props;return{selectedColumns:[l.selectedColumns,{selectColumn:function(C,V){var R=V.column;return Array.from(new Set([].concat(B()(C),[R])))},unselectColumn:function(C,V){var R=V.column;return C.filter(function(Me){return Me!==R})},resetColumns:function(C,V){var R=V.columns;return R},setColumns:function(C,V){var R=V.columns;return R}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(C){return!C}}]}},listeners:function(o){var l=o.values,c=o.actions;return{save:function(){De.actions.setSelectedColumns(l.selectedColumns),l.saveAsDefault&&(f.a.actions.updateCurrentTeam({live_events_columns:l.selectedColumns}),c.toggleSaveAsDefault())}}}}),Mt=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Tt=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),It=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),gt=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),At=e("./frontend/src/lib/components/RestrictedArea.tsx"),Bt=e("./frontend/src/lib/constants.tsx"),Kt=Object(gt.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(v.SortableDragIcon,null))});function nt(r){var o=Object(L.useActions)(De),l=o.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(n.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:l,icon:t.a.createElement(v.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Nt,{immutableColumns:r.immutableColumns,defaultColumns:r.defaultColumns}))}function Nt(r){var o=r.immutableColumns,l=r.defaultColumns,c=36,C=32,V=Object(L.useValues)(De),R=V.selectedColumns,Me=V.modalVisible,He=Object(L.useActions)(De),Ie=He.hideModal,q=Rt({selectedColumns:R==="DEFAULT"?l:R}),Ae=Object(L.useActions)(q),ot=Ae.selectColumn,st=Ae.unselectColumn,at=Ae.resetColumns,lt=Ae.setColumns,Je=Ae.toggleSaveAsDefault,Ge=Ae.save,Xe=Object(L.useValues)(q),Ce=Xe.selectedColumns;function yt(J){var K=J.isRestricted;return t.a.createElement(It.a,{label:"Save as default for all project members",className:"save-as-default-button mt","data-attr":"events-table-save-columns-as-default-toggle",onChange:Je,defaultChecked:!1,disabled:K})}var Qe=function(K){var M=K.column,le=K.disabled;return t.a.createElement("div",{className:Object(We.a)(["column-display-item",{selected:!le,disabled:le}]),style:{height:"".concat(C,"px")}},!le&&t.a.createElement(Kt,null),t.a.createElement(Fe.a,{value:M}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(qe.a,{title:le?"Reserved":"Remove"},le?t.a.createElement(P.a,null):t.a.createElement($e.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return st(M)}}))))},_t=Object(gt.b)(Qe),it=function(K){var M=K.index,le=K.style,I=K.key,ee=o==null?void 0:o.includes(Ce[M]);return t.a.createElement("div",{style:le,key:I},ee&&t.a.createElement(Qe,{column:Ce[M],disabled:Boolean(ee)}),!ee&&t.a.createElement(_t,{column:Ce[M],index:M,collection:"selected-columns"}))},ct=Object(gt.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(Ct.a,null,function(J){var K=J.height,M=J.width;return t.a.createElement(Ve.b,{height:K,rowCount:Ce.length,rowRenderer:it,rowHeight:c,width:M})}))}),ut=function(K){var M=K.oldIndex,le=K.newIndex,I=B()(Ce),ee=I.splice(M,1),ht=p()(ee,1),dt=ht[0];I.splice(le,0,dt),lt(I)};return t.a.createElement(Pt.a,{id:"column-configurator-modal",centered:!0,visible:Me,title:"Configure columns",onOk:Ge,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:Ie,footer:t.a.createElement(Te.a,null,t.a.createElement(Ee.b,{style:{flexGrow:1},align:"start"},t.a.createElement($.a,{className:"text-blue",onClick:function(){return at(l)}},"Reset to defaults")),t.a.createElement(Ee.b,null,t.a.createElement($.a,{className:"text-blue",type:"text",onClick:Ie},"Close"),t.a.createElement($.a,{type:"primary",onClick:Ge},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(Te.a,{gutter:16,className:"lists"},t.a.createElement(Pe.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",Ce.length,") - Drag to reorder"),t.a.createElement(ct,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:ut,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(Pe.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(Ct.a,null,function(J){var K=J.height,M=J.width;return t.a.createElement(Mt.a,{height:K,width:M,taxonomicGroupTypes:[Tt.a.EventProperties],value:void 0,onChange:function(I,ee){return ee&&ot(String(ee))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:te()({},Tt.a.EventProperties,Ce)})})))),t.a.createElement(At.a,{Component:yt,minimumAccessLevel:Bt.m.Owner,scope:At.b.Project})))}try{nt.displayName="LemonTableConfig",nt.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:nt.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(r){}var Ut=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Ft=e("./frontend/src/scenes/events/EventBufferNotice.tsx");function St(r,o){var l=Object.keys(r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);o&&(c=c.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),l.push.apply(l,c)}return l}function Dt(r){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?St(Object(l),!0).forEach(function(c){te()(r,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):St(Object(l)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(l,c))})}return r}function rt(r){var o,l=r.pageKey,c=r.fixedFilters,C=r.fixedColumns,V=r.sceneUrl,R=r.fetchMonths,Me=R===void 0?12:R,He=r.startingColumns,Ie=r.showCustomizeColumns,q=Ie===void 0?!0:Ie,Ae=r.showExport,ot=Ae===void 0?!0:Ae,st=r.showAutoload,at=st===void 0?!0:st,lt=r.showEventFilter,Je=lt===void 0?!0:lt,Ge=r.showPropertyFilter,Xe=Ge===void 0?!0:Ge,Ce=r.showRowExpanders,yt=Ce===void 0?!0:Ce,Qe=r.showActionsButton,_t=Qe===void 0?!0:Qe,it=r.showPersonColumn,ct=it===void 0?!0:it,ut=r.linkPropertiesToFilters,J=ut===void 0?!0:ut,K=Object(L.useValues)(f.a),M=K.currentTeam,le=Object(H.a)({fixedFilters:c,key:l,sceneUrl:V||Re.a.events(),fetchMonths:Me}),I=Object(L.useValues)(le),ee=I.properties,ht=I.eventsFormatted,dt=I.isLoading,Wt=I.hasNext,xt=I.isLoadingNext,mt=I.eventFilter,Vt=I.automaticLoadEnabled,wt=I.exportUrl,zt=I.highlightEvents,$t=I.months,Lt=Object(L.useValues)(De({startingColumns:(o=M&&M.live_events_columns)!==null&&o!==void 0?o:He})),Ze=Lt.tableWidth,we=Lt.selectedColumns,Be=Object(L.useActions)(le),Yt=Be.fetchNextEvents,Ht=Be.prependNewEvents,Jt=Be.setEventFilter,Gt=Be.toggleAutomaticLoad,Xt=Be.startDownload,Qt=Be.setPollingActive,Zt=Be.setProperties,kt=!(c!=null&&c.person_id),qt=Object(L.useActions)(Ut.f),en=qt.reportEventsTablePollingReactedToPageVisibility;m(function(T){Qt(T),en(T)});var jt=function(_,h){var D=_.date_break,j=_.new_events;return{children:D||(j?t.a.createElement(n.a,{icon:t.a.createElement(v.IconSync,null),style:{borderRadius:0},onClick:function(){return Ht()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:h+1,style:j?{padding:0}:void 0}}},tn={title:"Person",key:"person",render:function(_,h){var D,j,O=h.event;return O?kt&&(D=O.person)!==null&&D!==void 0&&(j=D.distinct_ids)!==null&&j!==void 0&&j.length?t.a.createElement(F.a,{to:Re.a.person(O.person.distinct_ids[0])},t.a.createElement(ze.a,{noLink:!0,withIcon:!0,person:O.person})):t.a.createElement(ze.a,{withIcon:!0,person:O.person}):{props:{colSpan:0}}}},Ot=Object(Oe.useMemo)(function(){var T=[{title:"Event",key:"event",width:"16rem",render:function(h,D){if(!D.event)return jt(D,Ze);var j=D.event;return t.a.createElement(Fe.a,{value:Object(y.f)(j)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(h,D){var j=D.event;if(!j)return{props:{colSpan:0}};var O=j.properties.$current_url?"$current_url":"$screen_name";return J?t.a.createElement(E,{className:"ph-no-capture",property:O,value:j.properties[O],filters:{properties:ee}}):t.a.createElement(Z,{value:j.properties[O]})}},{title:t.a.createElement(qe.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(h,D){var j=D.event;return j?J?t.a.createElement(E,{property:"$lib",value:j.properties.$lib,filters:{properties:ee}}):t.a.createElement(Z,{value:j.properties.$lib}):{props:{colSpan:0}}}}];return ct&&T.splice(1,0,tn),T},[Ze]),nn=Object(Oe.useMemo)(function(){var T=[];if(we==="DEFAULT")T=B()(Ot);else{var _=ct?we:we.filter(function(h){return h!=="person"});T=_.map(function(h,D){var j=Ot.find(function(O){return O.key===h});return j?Dt(Dt({},j),{},{render:function(Ke,Ne){var ke=Ne.event;return ke?j.render?j.render(Ke,Ne,D):{props:{colSpan:0}}:D===0?jt(Ne,Ze):{props:{colSpan:0}}}}):{title:Fe.e.event[h]?Fe.e.event[h].label:h,key:h,render:function(Ke,Ne){var ke=Ne.event;return ke?J?t.a.createElement(E,{className:"ph-no-capture ",property:h,value:ke.properties[h],filters:{properties:ee}}):t.a.createElement(Z,{value:ke.properties[h]}):D===0?jt(Ne,Ze):{props:{colSpan:0}}}}})}return T.push({title:"Time",key:"time",render:function(D,j){var O=j.event;return O?t.a.createElement(vt.b,{time:O.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),_t&&T.push({key:"actions",width:0,render:function(D,j){var O=j.event;if(!O)return{props:{colSpan:0}};var Ke;return O.event==="$pageview"?Ke={insight:Le.A.TRENDS,interval:"day",display:Le.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:O.properties.$current_url,type:"event"}]}]}:O.event!=="$autocapture"&&(Ke={insight:Le.A.TRENDS,interval:"day",display:Le.j.ActionsLineGraph,actions:[],events:[{id:O.event,name:O.event,type:"events",order:0,properties:[]}]}),t.a.createElement(s.a,{overlay:t.a.createElement(t.a.Fragment,null,M&&t.a.createElement(n.a,{type:"stealth",onClick:function(){return Object(a.a)(M.id,O,0,M.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),Ke&&t.a.createElement(n.a,{type:"stealth",to:Re.a.insightNew(Ke),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),C?T.concat(C):T},[we,Ze]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(Je||Xe)&&t.a.createElement("div",{className:"flex pt pb space-x border-top"},Je&&t.a.createElement(pe.b,{value:mt,onChange:function(_){Jt(_||"")}}),Xe&&t.a.createElement(pt.a,{propertyFilters:ee,onChange:Zt,pageKey:l,style:{marginBottom:0,marginTop:0},eventNames:mt?[mt]:[],useLemonButton:!0})),at||q||ot?t.a.createElement("div",{className:Object(We.a)("space-between-items pt mb",(Je||Xe)&&"border-top")},at&&t.a.createElement(i.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:Vt,onChange:Gt}),t.a.createElement("div",{className:"flex space-x-05"},q&&t.a.createElement(nt,{immutableColumns:["event","person"],defaultColumns:Ot.map(function(T){return T.key||""})}),ot&&wt&&t.a.createElement(z.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Exporting by csv is limited to 3,500 events.",t.a.createElement("br",null),"To return more, please use"," ",t.a.createElement("a",{href:"https://posthog.com/docs/api/events"},"the API"),". Do you want to export by CSV?"),onConfirm:Xt},t.a.createElement(n.a,{type:"secondary",icon:t.a.createElement(v.IconExport,{style:{color:"var(--primary)"}})},"Export")))):null,t.a.createElement(Ft.a,{additionalInfo:" \u2013 this helps ensure accuracy of insights grouped by unique users"}),t.a.createElement(ft.a,{dataSource:ht,loading:dt,columns:nn,key:we==="DEFAULT"?"default":we.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:dt?void 0:ee.some(function(T){return Object.keys(T).length})||mt?"No events matching filters found in the last ".concat($t," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(F.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(_){var h;return _.event?_.event.id+"-"+_.event.event:((h=_.date_break)===null||h===void 0?void 0:h.toString())||""},rowClassName:function(_){return Object(We.a)({"event-row":_.event,highlighted:_.event&&zt[_.event.id],"event-row-is-exception":_.event&&_.event.event==="$exception","event-row-date-separator":_.date_break,"event-row-new":_.new_events})},expandable:yt?{expandedRowRender:function(_){var h=_.event;return h&&t.a.createElement(ye.a,{event:h})},rowExpandable:function(_){var h=_.event,D=_.date_break,j=_.new_events;return D||j?-1:!!h}}:void 0}),t.a.createElement($.a,{type:"primary",onClick:Yt,loading:xt,style:{display:Wt||xt?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{rt.displayName="EventsTable",rt.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:rt.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(r){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(ge,S,e){"use strict";e.d(S,"a",function(){return ft});var G=e("./node_modules/core-js/modules/es.object.keys.js"),ie=e.n(G),ce=e("./node_modules/core-js/modules/es.symbol.js"),ue=e.n(ce),X=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),te=e.n(X),ne=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),B=e.n(ne),de=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),re=e.n(de),x=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),N=e.n(x),b=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),U=e.n(b),je=e("./node_modules/@babel/runtime/regenerator/index.js"),w=e.n(je),me=e("./node_modules/core-js/modules/es.array.map.js"),Oe=e.n(me),t=e("./node_modules/core-js/modules/es.object.to-string.js"),L=e.n(t),ye=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),F=e.n(ye),z=e("./node_modules/core-js/modules/es.array.splice.js"),$=e.n(z),oe=e("./node_modules/core-js/modules/es.array.join.js"),Ue=e.n(oe),Q=e("./node_modules/core-js/modules/es.array.filter.js"),se=e.n(Q),ae=e("./node_modules/core-js/modules/es.array.concat.js"),Z=e.n(ae),_e=e("./node_modules/core-js/modules/es.array.iterator.js"),g=e.n(_e),d=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),E=e.n(d),y=e("./node_modules/kea/lib/index.esm.js"),W=e("./frontend/src/lib/utils.tsx"),Y=e("./node_modules/kea-router/lib/index.js"),xe=e.n(Y),ve=e("./frontend/src/lib/api.ts"),he=e("./frontend/src/types.ts"),Se=e("./frontend/src/scenes/teamLogic.tsx"),be=e("./frontend/src/lib/dayjs.ts"),H=e("./frontend/src/lib/components/lemonToast.tsx"),ze=e("./frontend/src/lib/logic/featureFlagLogic.ts"),vt=e("./frontend/src/lib/constants.tsx"),Fe=e("./frontend/src/lib/components/ExportButton/exporter.tsx");function Le(v,n){var s=Object.keys(v);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(v);n&&(i=i.filter(function(f){return Object.getOwnPropertyDescriptor(v,f).enumerable})),s.push.apply(s,i)}return s}function pe(v){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Le(Object(s),!0).forEach(function(i){N()(v,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(s)):Le(Object(s)).forEach(function(i){Object.defineProperty(v,i,Object.getOwnPropertyDescriptor(s,i))})}return v}var pt=5,qe=365,We=5e3,De=function(n,s){var i=[];return i=n.map(function(f){return{event:f}}),i.forEach(function(f,a){var m=i[a-1];a>0&&f.event&&m.event&&!Object(be.a)(f.event.timestamp).isSame(m.event.timestamp,"day")&&i.splice(a,0,{date_break:Object(be.a)(f.event.timestamp).format("LL")})}),s.length>0&&i.splice(0,0,{new_events:!0}),i},Re=function(n){return Object(be.b)().subtract(n,"day").toISOString()},ft=Object(y.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(s){return!!s}).join("-")},connect:{values:[Se.a,["currentTeamId"],ze.a,["featureFlags"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:function(n){var s,i,f=n.props;return{pollingIsActive:[!0,{setPollingActive:function(m,u){var p=u.pollingActive;return p},pollEventsSuccess:function(m,u){var p=u.events;return p&&p.length?!1:m},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(m,u){var p=u.properties;return Object(W.s)(p)}}],eventFilter:[(s=(i=f.fixedFilters)===null||i===void 0?void 0:i.event_filter)!==null&&s!==void 0?s:"",{setEventFilter:function(m,u){var p=u.event;return p}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(m,u){var p=u.events,fe=u.isNext;return fe?[].concat(U()(m),U()(p)):p},prependEvents:function(m,u){var p=u.events;return[].concat(U()(p),U()(m))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(m,u){var p=u.hasNext;return p}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(m,u){var p=u.selectedEvent;return p}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(m,u){var p=u.events;return p||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(m,u){var p=u.events;return p.reduce(function(fe,k){return fe[k.id]=!0,fe},{})}}],pollTimeout:[0,{setPollTimeout:function(m,u){return u.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(m,u){var p=u.automaticLoadEnabled;return p}}]}},selectors:function(n){var s=n.selectors,i=n.props;return{eventsFormatted:[function(){return[s.events,s.newEvents]},function(f,a){return De(f,a)}],listParams:[function(){return[s.eventFilter,s.orderBy,s.properties]},function(f,a,m){var u;return pe(pe(pe({},i.fixedFilters||{}),{},{properties:[].concat(U()(m),U()(((u=i.fixedFilters)===null||u===void 0?void 0:u.properties)||[]))},f?{event:f}:{}),{},{orderBy:[a]})}],exportUrl:[function(){return[s.currentTeamId,s.listParams]},function(f,a){return"/api/projects/".concat(f,"/events.csv?").concat(Object(W.Bb)(a))}],eventsUrl:[function(){return[s.currentTeamId,s.listParams]},function(f,a){return function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return"/api/projects/".concat(f,"/events?").concat(Object(W.Bb)(pe(pe({},a),m)))}}],months:[function(){return[function(f,a){return a.fetchMonths}]},function(f){return f||12}],minimumExportDate:[function(){return[s.months]},function(){return Object(be.b)().subtract(1,"months").toISOString()}],pollAfter:[function(){return[s.events]},function(f){return(f==null?void 0:f.length)>0&&f[0].timestamp?f[0].timestamp:Re(0)}]}},actionToUrl:function(n){var s=n.values;return{setProperties:function(){return[Y.router.values.location.pathname,pe(pe({},Y.router.values.searchParams),{},{properties:s.properties.length===0?void 0:s.properties}),Y.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[Y.router.values.location.pathname,pe(pe({},Y.router.values.searchParams),{},{eventFilter:s.eventFilter}),Y.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var s=n.actions,i=n.values,f=n.props;return N()({},f.sceneUrl,function(a,m){s.setProperties(m.properties||i.properties||{}),m.eventFilter&&s.setEventFilter(m.eventFilter)})},events:function(n){var s=n.values;return{beforeUnmount:function(){return clearTimeout(s.pollTimeout||void 0)}}},listeners:function(n){var s=n.actions,i=n.values,f=n.props;return{startDownload:function(){i.featureFlags[vt.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS]?Object(Fe.a)({export_format:he.p.CSV,export_context:{path:i.eventsUrl(),max_limit:3500}}):(H.d.success("The export is starting. It should finish soon"),window.location.href=i.exportUrl)},setProperties:function(){return s.fetchEvents()},setEventFilter:function(){return s.fetchEvents()},fetchNextEvents:function(){var a=re()(w.a.mark(function u(){var p;return w.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:p=i.events,p.length===0?s.fetchEvents():s.fetchEvents({before:p[p.length-1].timestamp});case 2:case"end":return k.stop()}},u)}));function m(){return a.apply(this,arguments)}return m}(),fetchEvents:function(){var a=re()(w.a.mark(function u(p,fe){var k,Te,Ee,Pe,P,$e;return w.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(Ee=function(){return Ee=re()(w.a.mark(function Et(bt){var tt;return w.a.wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return tt=i.eventsUrl(pe({after:bt},k)),Ve.abrupt("return",ve.b.get(tt));case 2:case"end":return Ve.stop()}},Et)})),Ee.apply(this,arguments)},Te=function(Et){return Ee.apply(this,arguments)},k=p.nextParams,clearTimeout(i.pollTimeout),!(i.events.length>0)){A.next=9;break}return A.next=7,fe(300);case 7:A.next=11;break;case 9:return A.next=11,fe(1);case 11:return Pe=null,P=!1,A.prev=13,A.next=16,Te(Re(pt));case 16:if(Pe=A.sent,Pe.results.length!==0){A.next=22;break}return A.next=20,Te(Re(qe));case 20:Pe=A.sent,P=!0;case 22:A.next=28;break;case 24:return A.prev=24,A.t0=A.catch(13),s.fetchOrPollFailure(A.t0),A.abrupt("return");case 28:fe(),s.fetchEventsSuccess({events:Pe.results,hasNext:!!Pe.next||!P,isNext:!!k}),$e=window.setTimeout(s.pollEvents,We),s.setPollTimeout($e);case 32:case"end":return A.stop()}},u,null,[[13,24]])}));function m(u,p){return a.apply(this,arguments)}return m}(),pollEvents:function(){var a=re()(w.a.mark(function u(p,fe){var k,Te,Ee;return w.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(k=function(){var et=window.setTimeout(s.pollEvents,We);s.setPollTimeout(et)},i.orderBy==="-timestamp"){P.next=3;break}return P.abrupt("return");case 3:if(f.sceneUrl===Y.router.values.location.pathname){P.next=5;break}return P.abrupt("return");case 5:if(i.pollingIsActive){P.next=8;break}return k(),P.abrupt("return");case 8:return Te=i.eventsUrl({after:i.pollAfter}),Ee=null,P.prev=10,P.next=13,ve.b.get(Te);case 13:Ee=P.sent,P.next=19;break;case 16:return P.prev=16,P.t0=P.catch(10),P.abrupt("return");case 19:fe(),i.automaticLoadEnabled?s.prependEvents(Ee.results):s.pollEventsSuccess(Ee.results),k();case 22:case"end":return P.stop()}},u,null,[[10,16]])}));function m(u,p){return a.apply(this,arguments)}return m}(),prependNewEvents:function(){i.newEvents.length&&s.prependEvents(i.newEvents)},fetchOrPollFailure:function(m){var u=m.error;H.d.error("There was a problem fetching your events: ".concat(u.statusText))},toggleAutomaticLoad:function(m){var u=m.automaticLoadEnabled;u&&s.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(ge,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([ge.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--text-muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--text-default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal .save-as-default-button{border:1px solid var(--dark-grey);border-radius:.25rem}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--text-default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),ge.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(ge,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([ge.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--depr-lighten-danger-40)}.events td{max-width:20rem}",""]),ge.exports=S}}]);
