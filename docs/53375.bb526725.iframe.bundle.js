"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[53375],{"../../frontend/src/scenes/data-pipelines/DataPipelinesNewScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DataPipelinesNewScene:()=>DataPipelinesNewScene,dataPipelinesNewSceneLogic:()=>dataPipelinesNewSceneLogic,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.6_react@18.2.0/node_modules/kea/lib/index.esm.js"),NotFound=__webpack_require__("../../frontend/src/lib/components/NotFound/index.tsx"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),HogFunctionTemplateList=__webpack_require__("../../frontend/src/scenes/hog-functions/list/HogFunctionTemplateList.tsx"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),constants=__webpack_require__("../../frontend/src/lib/constants.tsx"),featureFlagLogic=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),batch_exports_utils=__webpack_require__("../../frontend/src/scenes/data-pipelines/batch-exports/utils.ts"),sourceWizardLogic=__webpack_require__("../../frontend/src/scenes/data-warehouse/new/sourceWizardLogic.tsx"),DataWarehouseSourceIcon=__webpack_require__("../../frontend/src/scenes/data-warehouse/settings/DataWarehouseSourceIcon.tsx"),userLogic=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),types=__webpack_require__("../../frontend/src/types.ts"),BatchExportIcon=__webpack_require__("../../frontend/src/scenes/data-pipelines/batch-exports/BatchExportIcon.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let nonHogFunctionTemplatesLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.path)(key=>["scenes","data-pipelines","utils","nonHogFunctionTemplatesLogic",key]),(0,index_esm.connect)(_ref=>{let{availableSources}=_ref;return{values:[(0,sourceWizardLogic.So)({availableSources}),["connectors","manualConnectors"],featureFlagLogic.featureFlagLogic,["featureFlags"],userLogic.userLogic,["user"]]}}),(0,index_esm.selectors)({hogFunctionTemplatesDataWarehouseSources:[s=>[s.connectors,s.manualConnectors],(connectors,manualConnectors)=>[...connectors.map(connector=>({id:`managed-${connector.name}`,type:"source",name:connector.name,icon_url:DataWarehouseSourceIcon.hU[connector.name],status:connector.unreleasedSource?"coming_soon":"stable",description:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Data will be synced to PostHog and regularly refreshed."," ",(0,jsx_runtime.jsx)(src.rU,{to:"https://posthog.com/docs/cdp/sources",children:"Learn more"})]}),code:"",code_language:"hog",inputs_schema:[],filters:null,masking:null,free:!0})),...manualConnectors.map(source=>({id:`self-managed-${source.type}`,type:"source",name:source.name,icon_url:DataWarehouseSourceIcon.hU[source.type],status:"stable",description:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Data will be queried directly from your data source that you manage."," ",(0,jsx_runtime.jsx)(src.rU,{to:"https://posthog.com/docs/cdp/sources",children:"Learn more"})]}),code:"",code_language:"hog",inputs_schema:[],filters:null,masking:null,free:!0}))]],hogFunctionTemplatesBatchExports:[s=>[s.featureFlags,s.user],(featureFlags,user)=>{let httpEnabled=featureFlags[constants.y8.BATCH_EXPORTS_POSTHOG_HTTP]||user?.is_impersonated||user?.is_staff;return types.e2.filter(service=>!!httpEnabled||"HTTP"!==service).map(service=>({id:`batch-export-${service}`,type:"destination",name:(0,batch_exports_utils.x)(service),icon_url:BatchExportIcon.EL[service],status:"stable",code:"",code_language:"hog",inputs_schema:[],filters:null,masking:null,free:!1,description:`${service} batch export`}))}]})]);var availableSourcesDataLogic=__webpack_require__("../../frontend/src/scenes/data-warehouse/new/availableSourcesDataLogic.ts");let dataPipelinesNewSceneLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.path)(()=>["scenes","data-pipelines","dataPipelinesNewSceneLogic"]),(0,index_esm.selectors)({logicProps:[()=>[(_,props)=>props],props=>props],breadcrumbs:[()=>[(_,props)=>props],_ref=>{let{kind}=_ref;return[{key:sceneTypes.x.DataPipelines,name:"Data pipelines",path:urls.j.dataPipelines("overview")},{key:[sceneTypes.x.DataPipelines,kind],name:(0,utils.fm)(kind)+"s",path:urls.j.dataPipelines(kind)},{key:sceneTypes.x.DataPipelinesNew,name:"New"}]}]})]),scene={component:DataPipelinesNewScene,logic:dataPipelinesNewSceneLogic,paramsToProps:_ref2=>{let{params:{kind}}=_ref2;return{kind}}};function DataPipelinesNewScene(){let{logicProps}=(0,index_esm.useValues)(dataPipelinesNewSceneLogic),{kind}=logicProps,{availableSources}=(0,index_esm.useValues)(availableSourcesDataLogic.t),{hogFunctionTemplatesDataWarehouseSources,hogFunctionTemplatesBatchExports}=(0,index_esm.useValues)(nonHogFunctionTemplatesLogic({availableSources:null!=availableSources?availableSources:{}}));return"transformation"===kind?(0,jsx_runtime.jsx)(HogFunctionTemplateList.a,{type:"transformation"}):"destination"===kind?(0,jsx_runtime.jsx)(HogFunctionTemplateList.a,{type:"destination",manualTemplates:hogFunctionTemplatesBatchExports}):"site_app"===kind?(0,jsx_runtime.jsx)(HogFunctionTemplateList.a,{type:"site_app"}):"source"===kind?(0,jsx_runtime.jsx)(HogFunctionTemplateList.a,{type:"source_webhook",manualTemplates:hogFunctionTemplatesDataWarehouseSources}):(0,jsx_runtime.jsx)(NotFound.T,{object:"Data pipeline new options"})}},"../../frontend/src/scenes/data-pipelines/batch-exports/BatchExportIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EL:()=>BATCH_EXPORT_ICON_MAP,oe:()=>RenderBatchExportIcon});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),public_hedgehog_running_hog_png__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/public/hedgehog/running-hog.png"),public_services_aws_s3_png__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/public/services/aws-s3.png"),public_services_bigquery_png__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/public/services/bigquery.png"),public_services_postgres_png__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/public/services/postgres.png"),public_services_redshift_png__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/public/services/redshift.png"),public_services_snowflake_png__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/public/services/snowflake.png"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function getBatchExportUrl(service){return`https://posthog.com/docs/cdp/batch-exports/${service.toLowerCase()}`}let BATCH_EXPORT_ICON_MAP={BigQuery:public_services_bigquery_png__WEBPACK_IMPORTED_MODULE_3__.Z,Postgres:public_services_postgres_png__WEBPACK_IMPORTED_MODULE_4__.Z,Redshift:public_services_redshift_png__WEBPACK_IMPORTED_MODULE_5__.Z,S3:public_services_aws_s3_png__WEBPACK_IMPORTED_MODULE_2__.Z,Snowflake:public_services_snowflake_png__WEBPACK_IMPORTED_MODULE_6__.Z,HTTP:public_hedgehog_running_hog_png__WEBPACK_IMPORTED_MODULE_1__.Z};function RenderBatchExportIcon(_ref){let{type,size="small"}=_ref,icon=BATCH_EXPORT_ICON_MAP[type],sizePx="small"===size?30:60;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"flex gap-4 items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.u,{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[type,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("br",{}),"Click to view docs"]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.rU,{to:getBatchExportUrl(type),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("img",{src:icon,alt:type,height:sizePx,width:sizePx})})})})}},"../../frontend/src/scenes/data-pipelines/batch-exports/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>normalizeBatchExportService,x:()=>humanizeBatchExportName});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/types.ts");let humanizeBatchExportName=service=>"HTTP"===service?"PostHog HTTP":service,normalizeBatchExportService=service=>{var _BATCH_EXPORT_SERVICE;return null!==(_BATCH_EXPORT_SERVICE=_types__WEBPACK_IMPORTED_MODULE_0__.e2.find(s=>s.toLowerCase()===service.toLowerCase()))&&void 0!==_BATCH_EXPORT_SERVICE?_BATCH_EXPORT_SERVICE:service}}}]);