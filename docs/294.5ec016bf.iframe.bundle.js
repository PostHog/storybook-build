(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(W,x,e){"use strict";e.r(x),e.d(x,"SessionsRecordings",function(){return ee}),e.d(x,"scene",function(){return xe});var R=e("./node_modules/core-js/modules/es.array.map.js"),L=e("./node_modules/core-js/modules/es.object.values.js"),E=e("./frontend/src/lib/components/PageHeader.tsx"),I=e("./frontend/src/scenes/teamLogic.tsx"),y=e("./node_modules/kea/lib/index.esm.js"),b=e("./frontend/src/scenes/urls.ts"),z=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),X=e("./frontend/src/lib/components/AlertMessage/index.ts"),j=e("./frontend/@posthog/lemon-ui/src/index.ts"),C=e("./node_modules/antd/es/tabs/index.js"),S=e("./frontend/src/types.ts"),Ce=e("./node_modules/core-js/modules/es.object.keys.js"),Fe=e("./node_modules/core-js/modules/es.array.filter.js"),Ae=e("./node_modules/core-js/modules/es.object.to-string.js"),Te=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Ee=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Ie=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),re=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ae=e.n(re),le=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),$=e.n(le),Ne=e("./node_modules/core-js/modules/es.symbol.js"),Be=e("./node_modules/core-js/modules/es.symbol.description.js"),De=e("./node_modules/core-js/modules/es.regexp.exec.js"),Ke=e("./node_modules/core-js/modules/es.string.search.js"),Me=e("./node_modules/core-js/modules/es.array.concat.js"),ie=e("./node_modules/react/index.js"),oe=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),F=e.n(oe),ce=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),de=e.n(ce),ue=e("./node_modules/@babel/runtime/regenerator/index.js"),f=e.n(ue),we=e("./node_modules/core-js/modules/es.array.iterator.js"),Ve=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ue=e("./node_modules/core-js/modules/es.array.find-index.js"),ze=e("./node_modules/core-js/modules/es.string.starts-with.js"),Xe=e("./node_modules/core-js/modules/es.array.slice.js"),me=e("./node_modules/kea-loaders/lib/index.js"),H=e("./frontend/src/lib/api.ts"),A=e("./frontend/src/lib/utils.tsx"),N=e("./node_modules/kea-router/lib/index.js"),Y=e("./frontend/src/scenes/session-recordings/playlist/playlistUtils.ts");function J(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),n.push.apply(n,r)}return n}function D(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(r){$()(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}var K=30,ye={createdBy:"All users",page:1,dateFrom:"all"},G=Object(y.kea)([Object(y.path)(["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic"]),Object(y.props)({}),Object(y.key)(function(a){return a.tab}),Object(y.actions)(function(){return{setSavedPlaylistsFilters:function(t){return{filters:t}},loadPlaylists:!0,createPlaylist:!0,updatePlaylist:function(t,n){return{shortId:t,playlist:n}},deletePlaylist:function(t){return{playlist:t}},duplicatePlaylist:function(t){return{playlist:t}}}}),Object(y.reducers)(function(a){return de()(a),{filters:[ye,{setSavedPlaylistsFilters:function(n,r){var i=r.filters;return Object(A.ob)(D(D(D({},n||{}),i),"page"in i?{}:{page:1}))}}]}}),Object(me.loaders)(function(a){var t=a.values,n=a.actions;return{playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:function(){var r=F()(f.a.mark(function c(d,u){var p,o,l,h,O,T;return f.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(t.playlists.filters===null){P.next=3;break}return P.next=3,u(300);case 3:return l=D({},t.filters),h=l.createdBy==="All users"?void 0:l.createdBy,O={limit:K,offset:Math.max(0,(l.page-1)*K),order:(p=l.order)!==null&&p!==void 0?p:"-last_modified_at",created_by:h!=null?h:void 0,search:l.search||void 0,date_from:l.dateFrom&&l.dateFrom!="all"?l.dateFrom:void 0,date_to:(o=l.dateTo)!==null&&o!==void 0?o:void 0,pinned:l.pinned?!0:void 0},P.next=8,H.b.recordings.listPlaylists(Object(A.Gb)(O));case 8:return T=P.sent,P.abrupt("return",T);case 10:case"end":return P.stop()}},c)}));function i(c,d){return r.apply(this,arguments)}return i}(),updatePlaylist:function(){var r=F()(f.a.mark(function c(d){var u,p,o,l;return f.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return u=d.shortId,p=d.playlist,O.next=3,H.b.recordings.updatePlaylist(u,p);case 3:return o=O.sent,l=t.playlists.results.findIndex(function(T){return T.short_id===u}),l>-1&&(t.playlists.results[l]=o),O.abrupt("return",t.playlists);case 7:case"end":return O.stop()}},c)}));function i(c){return r.apply(this,arguments)}return i}(),deletePlaylist:function(){var r=F()(f.a.mark(function c(d){var u;return f.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=d.playlist,o.next=3,Object(Y.b)(u,function(){n.loadPlaylists()});case 3:return t.playlists.results=t.playlists.results.filter(function(l){return l.short_id!==u.short_id}),o.abrupt("return",t.playlists);case 5:case"end":return o.stop()}},c)}));function i(c){return r.apply(this,arguments)}return i}()},newPlaylist:{createPlaylist:function(){var r=F()(f.a.mark(function c(d,u){var p;return f.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,u(100);case 2:return l.next=4,Object(Y.a)({});case 4:return p=l.sent,l.next=7,u(1e3);case 7:return l.abrupt("return",p);case 8:case"end":return l.stop()}},c)}));function i(c,d){return r.apply(this,arguments)}return i}(),duplicatePlaylist:function(){var r=F()(f.a.mark(function c(d){var u;return f.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=d.playlist,o.next=3,Object(Y.c)(u);case 3:return o.abrupt("return",t.playlists);case 4:case"end":return o.stop()}},c)}));function i(c){return r.apply(this,arguments)}return i}()}}}),Object(y.listeners)(function(a){var t=a.actions;return{setSavedPlaylistsFilters:function(){t.loadPlaylists()}}}),Object(y.selectors)(function(a){var t=a.actions;return{sorting:[function(n){return[n.filters]},function(n){return n.order?n.order.startsWith("-")?{columnKey:n.order.slice(1),order:-1}:{columnKey:n.order,order:1}:{columnKey:"last_modified_at",order:-1}}],pagination:[function(n){return[n.filters,n.playlists]},function(n,r){return{controlled:!0,pageSize:K,currentPage:n.page,entryCount:r.count,onBackward:r.previous?function(){return t.setSavedPlaylistsFilters({page:n.page-1})}:void 0,onForward:r.next?function(){return t.setSavedPlaylistsFilters({page:n.page+1})}:void 0}}]}}),Object(N.actionToUrl)(function(a){var t=a.values,n=function(){if(N.router.values.location.pathname===b.a.sessionRecordings(S.X.Playlists)){var i=t.filters,c=Object(A.ob)(N.router.values.searchParams);if(!Object(A.qb)(i,c))return[b.a.sessionRecordings(S.X.Playlists),i,{},{replace:!1}]}};return{loadPlaylists:n,setSavedPlaylistsFilters:n}}),Object(N.urlToAction)(function(a){var t=a.actions,n=a.values;return $()({},b.a.sessionRecordings(S.X.Playlists),function(){var r=F()(f.a.mark(function i(c,d){var u,p;return f.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:u=n.filters,p=Object(A.ob)(d),Object(A.qb)(u,p)||t.setSavedPlaylistsFilters(p);case 3:case"end":return l.stop()}},i)}));return function(i,c){return r.apply(this,arguments)}}())}),Object(y.afterMount)(function(a){var t=a.actions;t.loadPlaylists()})]),Z=e("./node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),Q=e("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),pe=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),je=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),fe=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),ve=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),ge=e("./frontend/@posthog/apps-common/src/index.ts"),be=e("./frontend/src/lib/components/LemonButton/index.ts"),M=e("./frontend/src/lib/components/icons.tsx"),s=e("./node_modules/react/jsx-runtime.js");function w(a){var t=a.tab,n=Object(y.useValues)(G({tab:t})),r=n.newPlaylistLoading,i=Object(y.useActions)(G({tab:t})),c=i.createPlaylist;return Object(s.jsx)("div",{className:"flex items-center justify-center",children:Object(s.jsxs)("div",{className:"max-w-lg mt-12 flex flex-col items-center",children:[Object(s.jsx)("h2",{className:"text-xl",children:"There are no playlists that match these filters"}),Object(s.jsx)("p",{className:"text-muted",children:"Once you create a playlist, it will show up here."}),Object(s.jsx)(be.a,{size:"large",type:"primary","data-attr":"add-session-playlist-button-empty-state",icon:Object(s.jsx)(M.IconPlus,{}),loading:r,onClick:function(){c()},children:"New Playlist"})]})})}try{w.displayName="SavedSessionRecordingPlaylistsEmptyState",w.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylistsEmptyState",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"recent"'},{value:'"playlists"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"]={docgenInfo:w.__docgenInfo,name:"SavedSessionRecordingPlaylistsEmptyState",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"})}catch(a){}var he=e("./node_modules/clsx/dist/clsx.m.js"),Oe=e("./frontend/src/lib/components/LemonButton/More.tsx");function k(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),n.push.apply(n,r)}return n}function q(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(r){$()(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}function V(a){var t=a.tab,n=G({tab:t}),r=Object(y.useValues)(n),i=r.playlists,c=r.playlistsLoading,d=r.filters,u=r.sorting,p=r.pagination,o=r.newPlaylistLoading,l=Object(y.useActions)(n),h=l.setSavedPlaylistsFilters,O=l.updatePlaylist,T=l.deletePlaylist,se=l.duplicatePlaylist,P=Object(y.useValues)(ve.a),Re=P.meFirstMembers,Le=[{width:0,dataIndex:"pinned",render:function(m,g){var B=g.short_id;return Object(s.jsx)(j.LemonButton,{size:"small",status:"primary-alt",onClick:function(){return O(B,{pinned:!m})},children:m?Object(s.jsx)(Z.a,{}):Object(s.jsx)(Q.a,{})})}},{title:"Name",dataIndex:"name",render:function(m,g){var B=g.short_id,te=g.derived_name,ne=g.description;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(j.Link,{className:Object(he.a)("font-semibold",!m&&"italic"),to:b.a.sessionRecordingPlaylist(B),children:m||te||"(Untitled)"}),ne?Object(s.jsx)("div",{className:"truncate",children:ne}):null]})}},q(q({},Object(je.b)()),{},{width:0}),{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",width:0,render:function(m){return Object(s.jsx)("div",{children:m&&typeof m=="string"&&Object(s.jsx)(ge.TZLabel,{time:m})})}},{width:0,render:function(m,g){return Object(s.jsx)(Oe.a,{overlay:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(j.LemonButton,{status:"stealth",onClick:function(){return se(g)},fullWidth:!0,loading:o,"data-attr":"duplicate-playlist",children:"Duplicate"}),Object(s.jsx)(j.LemonDivider,{}),Object(s.jsx)(j.LemonButton,{status:"danger",onClick:function(){return T(g)},fullWidth:!0,children:"Delete playlist"})]})})}}];return Object(s.jsxs)("div",{className:"space-y-4",children:[Object(s.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(s.jsx)(j.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:function(m){return h({search:m||void 0})},value:d.search||""}),Object(s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(s.jsx)("div",{className:"flex items-center gap-2",children:Object(s.jsx)(j.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:d.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:function(){return h({pinned:!d.pinned})},icon:Object(ie.cloneElement)(d.pinned?Object(s.jsx)(Z.a,{}):Object(s.jsx)(Q.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Last modified:"}),Object(s.jsx)(fe.a,{disabled:!1,dateFrom:d.dateFrom,dateTo:d.dateTo,onChange:function(m,g){return h({dateFrom:m,dateTo:g!=null?g:void 0})},makeLabel:function(m){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(pe.a,{}),Object(s.jsxs)("span",{className:"hide-when-small",children:[" ",m]})]})}})]}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Created by:"}),Object(s.jsx)(j.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"}].concat(ae()(Re.map(function(v){return{value:v.user.id,label:v.user.first_name}}))),value:d.createdBy,onChange:function(m){h({createdBy:m})},dropdownMatchSelectWidth:!1})]})]})]}),!c&&i.count<1?Object(s.jsx)(w,{tab:t}):Object(s.jsx)(j.LemonTable,{loading:c,columns:Le,dataSource:i.results,pagination:p,noSortingCancellation:!0,sorting:u,onSort:function(m){return h({order:m?"".concat(m.order===-1?"-":"").concat(m.columnKey):void 0})},rowKey:"id",loadingSkeletonRows:K,nouns:["playlist","playlists"]})]})}try{V.displayName="SavedSessionRecordingPlaylists",V.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:V.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(a){}var Pe=e("./frontend/src/lib/components/Tooltip.tsx"),U=e("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts"),Se=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),_=e("./frontend/src/scenes/session-recordings/settings/SessionRecordingSettings.tsx");function ee(){var a=Object(y.useValues)(I.a),t=a.currentTeam,n=Object(y.useValues)(U.c),r=n.tab,i=n.newPlaylistLoading,c=Object(y.useActions)(U.c),d=c.saveNewPlaylist,u=Object(s.jsx)(z.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0}),p=t&&!(t!=null&&t.session_recording_opt_in);return Object(s.jsxs)("div",{children:[Object(s.jsx)(E.a,{title:Object(s.jsx)("div",{children:"Session Recordings"}),buttons:Object(s.jsxs)(s.Fragment,{children:[!p&&Object(s.jsx)(j.LemonButton,{type:"secondary",icon:Object(s.jsx)(M.IconSettings,{}),onClick:function(){return Object(_.b)()},children:"Configure"}),Object(s.jsx)(Pe.a,{placement:"topRight",title:r===S.X.Recent?"Save the currently filters as a dynamic playlist":"Create a new playlist",children:Object(s.jsx)(j.LemonButton,{type:"primary",onClick:function(){return d()},loading:i,"data-attr":"save-recordings-playlist-button",icon:Object(s.jsx)(M.IconPlus,{}),children:r===S.X.Recent?"Save as playlist":"Create new playlist"})})]})}),Object(s.jsx)(C.a,{activeKey:r,animated:!1,style:{borderColor:"#D9D9D9"},onChange:function(l){return N.router.actions.push(b.a.sessionRecordings(l))},children:Object.values(S.X).map(function(o){return Object(s.jsx)(C.a.TabPane,{tab:Object(U.b)(o)},o)})}),p?Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsx)(X.a,{type:"info",action:{type:"secondary",icon:Object(s.jsx)(M.IconSettings,{}),onClick:function(){return Object(_.b)()},children:"Configure"},children:"Session recordings are currently disabled for this project."})}):null,r?r===S.X.Recent?u:Object(s.jsx)(V,{tab:S.X.Playlists}):Object(s.jsx)(Se.a,{})]})}var xe={component:ee,logic:U.c}},"./node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(W,x,e){"use strict";var R=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),L=e("./node_modules/react/index.js"),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},I=E,y=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(j,C){return L.createElement(y.a,Object(R.a)(Object(R.a)({},j),{},{ref:C,icon:I}))};b.displayName="PushpinFilled";var z=x.a=L.forwardRef(b)},"./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(W,x,e){"use strict";var R=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),L=e("./node_modules/react/index.js"),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},I=E,y=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(j,C){return L.createElement(y.a,Object(R.a)(Object(R.a)({},j),{},{ref:C,icon:I}))};b.displayName="PushpinOutlined";var z=x.a=L.forwardRef(b)}}]);
