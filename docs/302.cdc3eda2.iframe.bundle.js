(window.webpackJsonp=window.webpackJsonp||[]).push([[302],{"./frontend/src/lib/components/Table/utils.tsx":function(S,_,t){"use strict";t.d(_,"a",function(){return u});var M=t("./frontend/src/lib/hooks/useWindowSize.js"),T=t("./frontend/src/lib/utils/responsiveUtils.tsx"),p=t("./node_modules/react/jsx-runtime.js"),K=t.n(p);function u(m){return Object(p.jsx)("span",{style:{whiteSpace:"nowrap"},children:m})}var x=function(I){var C=Object(M.a)(),L=C.width,r=Object(T.b)(I),a=!!L&&L<=r;return{isTableScrolling:a,tableScrollBreakpoint:r,tableScrollX:a?"max-content":"".concat(r,"px")}};try{u.displayName="normalizeColumnTitle",u.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:u.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(m){}try{x.displayName="useIsTableScrolling",x.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:x.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(m){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(S,_,t){"use strict";t.r(_),t.d(_,"scene",function(){return w}),t.d(_,"FeatureFlags",function(){return B}),t.d(_,"groupFilters",function(){return g});var M=t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),T=t.n(M),p=t("./node_modules/core-js/modules/es.function.name.js"),K=t.n(p),u=t("./node_modules/core-js/modules/es.number.constructor.js"),x=t.n(u),m=t("./node_modules/core-js/modules/es.object.to-string.js"),I=t.n(m),C=t("./node_modules/core-js/modules/es.array.includes.js"),L=t.n(C),r=t("./node_modules/kea/lib/index.esm.js"),a=t("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),A=t("./node_modules/antd/es/tabs/index.js"),U=t("./frontend/src/lib/components/Link.tsx"),R=t("./frontend/src/lib/utils.tsx"),F=t("./frontend/src/lib/components/PageHeader.tsx"),N=t("./frontend/src/lib/components/Table/utils.tsx"),P=t("./frontend/src/scenes/urls.ts"),z=t("./frontend/src/lib/utils/stringWithWBR.tsx"),V=t("./frontend/src/scenes/teamLogic.tsx"),f=t("./frontend/src/lib/components/LemonButton/index.ts"),Y=t("./frontend/src/lib/components/LemonDivider/index.ts"),H=t("./frontend/src/lib/components/LemonTable/index.ts"),J=t("./frontend/src/lib/components/LemonButton/More.tsx"),W=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),G=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),X=t("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),$=t("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),O=t("./frontend/@posthog/lemon-ui/src/index.ts"),e=t("./node_modules/react/jsx-runtime.js"),se=t.n(e),Q=["active"],Z=["created_by"],w={component:B,logic:a.b};function k(){var l=Object(r.useValues)(V.a),j=l.currentTeamId,o=Object(r.useValues)(a.b),b=o.featureFlagsLoading,c=o.searchedFeatureFlags,i=o.searchTerm,h=o.uniqueCreators,E=o.filters,D=Object(r.useActions)(a.b),q=D.updateFeatureFlag,ee=D.loadFeatureFlags,te=D.setSearchTerm,y=D.setFeatureFlagsFilters,ne=[{title:Object(N.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:function(s,n){return(s.key||"").localeCompare(n.key||"")},render:function(s,n){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(U.a,{to:n.id?P.a.featureFlag(n.id):void 0,className:"row-name",children:Object(z.a)(n.key,17)}),n.name&&Object(e.jsx)("span",{className:"row-description",style:{maxWidth:"24rem"},children:n.name})]})}},Object(W.b)(),Object(W.a)(),{title:"Release conditions",width:100,render:function(s,n){return g(n.filters.groups)}},{title:"Status",dataIndex:"active",sorter:function(s,n){return Number(s.active)-Number(n.active)},width:100,render:function(s,n){return Object(e.jsx)(e.Fragment,{children:n.performed_rollback?Object(e.jsx)(O.LemonTag,{type:"warning",className:"uppercase",children:"Rolled Back"}):n.active?Object(e.jsx)(O.LemonTag,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(O.LemonTag,{type:"default",className:"uppercase",children:"Disabled"})})}},{width:0,render:function(s,n){return Object(e.jsx)(J.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(f.a,{status:"stealth",onClick:function(){Object(R.s)(n.key,"feature flag key")},fullWidth:!0,children:"Copy feature flag key"}),Object(e.jsxs)(f.a,{status:"stealth",onClick:function(){n.id&&q({id:n.id,payload:{active:!n.active}})},id:"feature-flag-".concat(n.id,"-switch"),fullWidth:!0,children:[n.active?"Disable":"Enable"," feature flag"]}),n.id&&Object(e.jsx)(f.a,{status:"stealth",to:P.a.featureFlag(n.id),fullWidth:!0,children:"Edit"}),Object(e.jsx)(f.a,{status:"stealth",to:P.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(n.key)}),"data-attr":"usage",fullWidth:!0,children:"Try out in Insights"}),Object(e.jsx)(Y.a,{}),n.id&&Object(e.jsx)(f.a,{status:"danger",onClick:function(){Object(R.x)({endpoint:"projects/".concat(j,"/feature_flags"),object:{name:n.key,id:n.id},callback:ee})},fullWidth:!0,children:"Delete feature flag"})]})})}}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{children:Object(e.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(e.jsx)(O.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:te,value:i}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Status"})}),Object(e.jsx)(O.LemonSelect,{onChange:function(s){if(s)if(s==="all"){if(E){var n=E.active,v=T()(E,Q);y(v,!0)}}else y({active:s})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0}),Object(e.jsx)("span",{className:"ml-1",children:Object(e.jsx)("b",{children:"Created by"})}),Object(e.jsx)(O.LemonSelect,{onChange:function(s){if(s)if(s==="any"){if(E){var n=E.created_by,v=T()(E,Z);y(v,!0)}}else y({created_by:s})},options:h,value:"any"})]})]})}),Object(e.jsx)(H.a,{dataSource:c,columns:ne,rowKey:"key",loading:b,pagination:{pageSize:100},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table"})]})}function B(){var l=Object(r.useValues)(a.b),j=l.activeTab,o=Object(r.useActions)(a.b),b=o.setActiveTab;return Object(e.jsxs)("div",{className:"feature_flags",children:[Object(e.jsx)(F.a,{title:"Feature Flags",buttons:Object(e.jsx)(f.a,{type:"primary",to:P.a.featureFlag("new"),"data-attr":"new-feature-flag",children:"New feature flag"})}),Object(e.jsxs)(A.a,{activeKey:j,destroyInactiveTabPane:!0,onChange:function(i){return b(i)},children:[Object(e.jsx)(A.a.TabPane,{tab:"Overview",children:Object(e.jsx)(k,{})},"overview"),Object(e.jsx)(A.a.TabPane,{tab:"History",children:Object(e.jsx)(X.a,{scope:$.a.FEATURE_FLAG})},"history")]})]})}function g(l){if(l.length===0||!l.some(function(i){return i.rollout_percentage!==0}))return"No users";if(l.some(function(i){var h;return!((h=i.properties)!==null&&h!==void 0&&h.length)&&[null,void 0,100].includes(i.rollout_percentage)}))return"100% of all users";if(l.length===1){var j=l[0],o=j.properties,b=j.rollout_percentage,c=b===void 0?null:b;return(o==null?void 0:o.length)>0?Object(e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"},children:[c!=null&&Object(e.jsxs)("span",{style:{flexShrink:0,marginRight:5},children:[c,"% of"]}),Object(e.jsx)(G.a,{filters:o,style:{margin:0,flexDirection:"column"}})]}):c!==null?"".concat(c,"% of all users"):(console.error("A group with full rollout was not detected early"),"All users")}return"Multiple groups"}try{g.displayName="groupFilters",g.__docgenInfo={description:"",displayName:"groupFilters",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:g.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(l){}}}]);
