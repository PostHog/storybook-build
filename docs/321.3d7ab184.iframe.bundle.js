(window.webpackJsonp=window.webpackJsonp||[]).push([[321],{"./frontend/src/scenes/performance/WebPerformance.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WebPerformance",(function(){return WebPerformance})),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene}));__webpack_require__("./frontend/src/scenes/performance/WebPerformance.scss");var lib_lemon_ui_LemonTag_LemonTag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),scenes_performance_webPerformanceLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/performance/webPerformanceLogic.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/urls.ts"),kea__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),scenes_performance_WebPerformanceWaterfallChart__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/performance/WebPerformanceWaterfallChart.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/constants.tsx"),_queries_Query_Query__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),_queries_schema__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/queries/schema.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/utils.tsx"),lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/components/TZLabel/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function WaterfallButton(props){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_8__.LemonButton,{"data-attr":`view-waterfall-button-${props.record.pageview_id}`,icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_7__.pc,{}),type:"secondary",size:"small",to:scenes_urls__WEBPACK_IMPORTED_MODULE_4__.a.webPerformanceWaterfall(props.record),children:"View waterfall chart"})})}const EventsWithPerformanceTable=()=>{const{recentPageViews:recentPageViews,recentPageViewsLoading:recentPageViewsLoading}=Object(kea__WEBPACK_IMPORTED_MODULE_5__.useValues)(scenes_performance_webPerformanceLogic__WEBPACK_IMPORTED_MODULE_3__.b),{featureFlags:featureFlags}=Object(kea__WEBPACK_IMPORTED_MODULE_5__.useValues)(lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_9__.a),featureDataExploration=featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_10__.i.HOGQL],oldFashionedColumns=[{title:"Page",key:"page_url",width:"45%",render:function render(_,item){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"max-w-100 overflow-auto",children:item.page_url})}},{title:"Page load",key:"duration",render:function render(_,item){return item.duration?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:Object(lib_utils__WEBPACK_IMPORTED_MODULE_13__.O)(item.duration/1e3)}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"-"})}},{title:"timestamp",key:"timestamp",render:function render(_,item){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_components_TZLabel__WEBPACK_IMPORTED_MODULE_14__.a,{time:item.timestamp})}},{title:"",render:function render(_,item){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(WaterfallButton,{record:item,onClick:()=>console.log(item)})}}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"pt-4 border-t"}),featureDataExploration?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_queries_Query_Query__WEBPACK_IMPORTED_MODULE_11__.a,{query:{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_12__.a.DataTableNode,source:{kind:_queries_schema__WEBPACK_IMPORTED_MODULE_12__.a.RecentPerformancePageViewNode,dateRange:{date_from:null,date_to:null}},columns:["context.columns.page_url","context.columns.duration","timestamp","context.columns.waterfallButton"],showReload:!0,showColumnConfigurator:!1,showExport:!1,showEventFilter:!1,showPropertyFilter:!1,showActions:!1,expandable:!1},context:{columns:{page_url:{title:"Page",render:function RenderPageURL(_ref){let{record:record}=_ref;return record.page_url?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"max-w-100 overflow-auto",children:record.page_url}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"-"})}},duration:{title:"Page load",render:function RenderPageLoad(_ref2){let{record:record}=_ref2;return record.duration?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:Object(lib_utils__WEBPACK_IMPORTED_MODULE_13__.O)(record.duration/1e3)}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"-"})}},waterfallButton:{title:"",render:function RenderWaterfallButton(_ref3){let{record:record}=_ref3;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(WaterfallButton,{record:record,onClick:()=>console.log(record)})}}},showOpenEditorButton:!!featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_10__.i.HOGQL]}}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_8__.LemonTable,{"data-attr":"web-performance-table",dataSource:recentPageViews,loading:recentPageViewsLoading,columns:oldFashionedColumns,loadingSkeletonRows:20,emptyState:recentPageViewsLoading?void 0:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"Did not load any performance events"}),rowKey:row=>row.pageview_id})]})},WebPerformance=()=>{const{currentPage:currentPage}=Object(kea__WEBPACK_IMPORTED_MODULE_5__.useValues)(scenes_performance_webPerformanceLogic__WEBPACK_IMPORTED_MODULE_3__.b);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"web-performance",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__.a,{title:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"flex items-center gap-2",children:["Web Performance",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(lib_lemon_ui_LemonTag_LemonTag__WEBPACK_IMPORTED_MODULE_1__.a,{type:"warning",className:"uppercase",children:"Alpha"})]}),caption:currentPage===scenes_performance_webPerformanceLogic__WEBPACK_IMPORTED_MODULE_3__.a.TABLE?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("p",{children:"Shows page view events where performance information has been captured. Not all events have all performance information."}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("p",{children:["To capture performance information you must be using posthog-js and set"," ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("code",{children:"_capture_performance"})," to true. See the"," ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_8__.Link,{to:"https://posthog.com/docs/integrate/client/js#config",disableClientSideRouting:!0,children:"config instructions in our handbook"})]})]}):null}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{children:currentPage===scenes_performance_webPerformanceLogic__WEBPACK_IMPORTED_MODULE_3__.a.TABLE?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(EventsWithPerformanceTable,{}):currentPage===scenes_performance_webPerformanceLogic__WEBPACK_IMPORTED_MODULE_3__.a.WATERFALL_CHART?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(scenes_performance_WebPerformanceWaterfallChart__WEBPACK_IMPORTED_MODULE_6__.b,{}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"404?"})})]})},scene={component:WebPerformance,logic:scenes_performance_webPerformanceLogic__WEBPACK_IMPORTED_MODULE_3__.b,paramsToProps:()=>({sceneUrl:scenes_urls__WEBPACK_IMPORTED_MODULE_4__.a.webPerformance()})}}}]);