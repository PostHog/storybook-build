(window.webpackJsonp=window.webpackJsonp||[]).push([[231,240],{"./frontend/src/scenes/cohorts/Cohort.tsx":function(P,r,e){"use strict";e.r(r),e.d(r,"scene",function(){return He}),e.d(r,"Cohort",function(){return de});var d=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=e.n(d),O=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohort.scss"),f=e.n(O),I={};I.insert="head",I.singleton=!1;var ie=o()(f.a,I),ae=f.a.locals||{},K=e("./node_modules/react/index.js"),t=e.n(K),ue=e("./node_modules/core-js/modules/es.function.name.js"),v=e("./node_modules/kea/lib/index.esm.js"),$=e("./frontend/src/scenes/urls.ts"),w=e("./frontend/src/models/cohortsModel.ts"),T=Object(v.kea)([Object(v.props)({}),Object(v.key)(function(n){return n.id||"new"}),Object(v.path)(["scenes","cohorts","cohortLogic"]),Object(v.selectors)({breadcrumbs:[function(){return[w.a.selectors.cohortsById,function(n,u){return u.id}]},function(n,u){var l;return[{name:"Cohorts",path:$.a.cohorts()},{name:u!=="new"&&((l=n[u])===null||l===void 0?void 0:l.name)||"Untitled"}]}]})]),U=e("./node_modules/antd/lib/dropdown/style/index.css"),J=e("./node_modules/core-js/modules/es.object.keys.js"),x=e("./node_modules/core-js/modules/es.symbol.js"),R=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),k=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),le=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),i=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),m=e.n(i),a=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),C=e.n(a),b=e("./node_modules/core-js/modules/es.array.map.js"),V=e("./node_modules/core-js/modules/es.array.filter.js"),q=e("./node_modules/core-js/modules/es.object.to-string.js"),Q=e("./node_modules/core-js/modules/es.array.concat.js"),Ee=e("./node_modules/core-js/modules/es.regexp.to-string.js"),S=e("./frontend/src/scenes/cohorts/cohortEditLogic.ts"),oe=e("./frontend/src/scenes/userLogic.ts"),ce=e("./frontend/src/lib/forms/VerticalForm.tsx"),p=e("./frontend/src/lib/components/PageHeader.tsx"),h=e("./frontend/src/lib/components/LemonButton/index.ts"),W=e("./node_modules/kea-router/lib/index.js"),H=e("./node_modules/antd/es/divider/index.js"),c=e("./node_modules/antd/es/row/index.js"),j=e("./node_modules/antd/es/col/index.js"),g=e("./frontend/src/lib/forms/Field.tsx"),D=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),ee=e("./frontend/src/lib/components/Tooltip.tsx"),te=e("./frontend/src/lib/components/LemonSelect.tsx"),M=e("./frontend/src/scenes/cohorts/CohortFilters/constants.tsx"),E=e("./frontend/src/lib/constants.tsx"),A=e("./frontend/src/types.ts"),me=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),se=e("./node_modules/antd/lib/upload/Dragger.js"),Re=e.n(se),re=e("./frontend/src/lib/components/icons.tsx"),be=e("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx"),Ye=e("./node_modules/core-js/modules/es.array.iterator.js"),ze=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),De=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss"),Se=e.n(De),ye={};ye.insert="head",ye.singleton=!1;var $e=o()(Se.a,ye),Je=Se.a.locals||{},Ce=e("./frontend/src/scenes/cohorts/cohortUtils.ts"),je=e("./node_modules/kea-forms/lib/index.js"),Ae=e("./node_modules/kea-forms/lib/components.js"),Fe=e("./node_modules/clsx/dist/clsx.m.js"),Le=e("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Me=e("./frontend/src/lib/utils.tsx"),Ne=e("./frontend/src/lib/components/LemonDivider/index.ts"),Ge=e("./frontend/src/lib/components/AlertMessage/index.ts"),Be=e("./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaRowBuilder.tsx");function pe(n){var u=Object(S.a)(n),l=Object(v.useValues)(u),y=l.cohort,N=Object(v.useActions)(u),Pe=N.setInnerGroupType,ge=N.duplicateFilter,Oe=N.removeFilter,ve=N.addFilter;return t.a.createElement(t.a.Fragment,null,y.filters.properties.values.map(function(G,s){return Object(Ce.g)(G)?t.a.createElement(je.Group,{key:s,name:["filters","properties","values",s]},s!==0&&t.a.createElement("div",{className:"CohortCriteriaGroups__matching-group__logical-divider"},y.filters.properties.type),t.a.createElement(Ae.Field,{name:"id",template:function(B){var ne=B.error,Te=B.kids;return t.a.createElement("div",{className:Object(Fe.a)("CohortCriteriaGroups__matching-group",ne&&"CohortCriteriaGroups__matching-group--error")},t.a.createElement(c.a,{align:"middle",wrap:!1,className:"pl pr"},t.a.createElement(Le.a,{name:Me.d[s],color:Le.b.Gray}),t.a.createElement(be.a,{prefix:"Match persons against",suffix:"criteria",onChange:function(L){return Pe(L,s)},value:G.type}),t.a.createElement("div",{style:{flex:1,minWidth:"0.5rem"}}),t.a.createElement(h.a,{icon:t.a.createElement(re.IconCopy,null),type:"alt",onClick:function(){return ge(s)}}),y.filters.properties.values.length>1&&t.a.createElement(h.a,{icon:t.a.createElement(re.IconDelete,null),type:"alt",onClick:function(){return Oe(s)}})),t.a.createElement(Ne.a,{large:!0}),ne&&t.a.createElement(c.a,{className:"CohortCriteriaGroups__matching-group__error-row"},t.a.createElement(Ge.a,{type:"error",style:{width:"100%"}},t.a.createElement(t.a.Fragment,null,ne))),Te)}},t.a.createElement(t.a.Fragment,null,G.values.map(function(Y,B){return Object(Ce.g)(Y)?null:t.a.createElement(je.Group,{key:B,name:["values",B]},t.a.createElement(Be.a,{id:n.id,groupIndex:s,index:B,logicalOperator:G.type,criteria:Y,type:Object(Ce.f)(Y),hideDeleteIcon:G.values.length<=1}),B===G.values.length-1&&t.a.createElement(c.a,null,t.a.createElement(h.a,{"data-attr":"cohort-add-filter-group-criteria",style:{margin:"0.75rem"},type:"secondary",onClick:function(){return ve(s)},icon:t.a.createElement(re.IconPlusMini,{color:"var(--primary)"})},"Add criteria")))})))):null}),t.a.createElement(h.a,{"data-attr":"cohort-add-filter-group",className:"mb mt",type:"secondary",onClick:function(){return ve()},icon:t.a.createElement(re.IconPlusMini,{color:"var(--primary)"}),fullWidth:!0},"Add criteria group"))}try{pe.displayName="CohortCriteriaGroups",pe.__docgenInfo={description:"",displayName:"CohortCriteriaGroups",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"]={docgenInfo:pe.__docgenInfo,name:"CohortCriteriaGroups",path:"frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"})}catch(n){}var Ke=e("./frontend/src/scenes/cohorts/MatchCriteriaSelector.tsx"),Ue=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),Ve=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),We=e("./frontend/src/scenes/persons/Persons.tsx");function Ie(n,u){var l=Object.keys(n);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(n);u&&(y=y.filter(function(N){return Object.getOwnPropertyDescriptor(n,N).enumerable})),l.push.apply(l,y)}return l}function fe(n){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?Ie(Object(l),!0).forEach(function(y){C()(n,y,l[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):Ie(Object(l)).forEach(function(y){Object.defineProperty(n,y,Object.getOwnPropertyDescriptor(l,y))})}return n}function he(n){var u=n.id,l={id:u},y=Object(S.a)(l),N=Object(v.useActions)(y),Pe=N.deleteCohort,ge=N.setCohort,Oe=N.onCriteriaChange,ve=N.setOuterGroupsType,G=Object(v.useValues)(y),s=G.cohort,Y=G.cohortLoading,B=G.newCohortFiltersEnabled,ne=Object(v.useValues)(oe.a),Te=ne.hasAvailableFeature,z=s.id==="new"||s.id===void 0;return t.a.createElement("div",{className:"cohort"},t.a.createElement(ce.a,{logic:S.a,props:l,formKey:"cohort",enableFormOnSubmit:!0},t.a.createElement(p.a,{title:z?"New cohort":s.name||"Untitled",buttons:t.a.createElement("div",{className:"flex-center"},z?t.a.createElement(h.a,{"data-attr":"cancel-cohort",type:"secondary",onClick:function(){W.router.actions.push($.a.cohorts())},style:{marginRight:8},disabled:Y},"Cancel"):t.a.createElement(h.a,{"data-attr":"delete-cohort",status:"danger",type:"secondary",onClick:function(){Pe()},style:{marginRight:8},disabled:Y},"Delete"),t.a.createElement(h.a,{type:"primary","data-attr":"save-cohort",htmlType:"submit",loading:Y||s.is_calculating,disabled:Y||s.is_calculating},"Save"))}),t.a.createElement(H.a,null),t.a.createElement(c.a,{gutter:[16,24],style:{maxWidth:640}},t.a.createElement(j.a,{xs:24,sm:12},t.a.createElement(g.a,{name:"name",label:"Name",className:"Cohort__Name"},t.a.createElement(D.a,{"data-attr":"cohort-name"}))),t.a.createElement(j.a,{xs:24,sm:12},t.a.createElement(g.a,{name:"is_static",label:"Type"},function(L){var F=L.value,X=L.onChange;return t.a.createElement(ee.a,{title:z?null:"Create a new cohort to use a different type of cohort."},t.a.createElement("div",null,t.a.createElement(te.a,{disabled:!z,options:M.b,value:F?E.b.Static:E.b.Dynamic,onChange:function(_){X(_===E.b.Static)},type:"stealth",outlined:!0,style:{width:"100%"},"data-attr":"cohort-type"})))}))),Te(A.d.DASHBOARD_COLLABORATION)&&t.a.createElement(c.a,{gutter:[16,24],className:"mt ph-ignore-input",style:{maxWidth:640}},t.a.createElement(j.a,{span:24},t.a.createElement(g.a,{name:"description",label:"Description","data-attr":"cohort-description"},t.a.createElement(me.a,null)))),s.is_static?t.a.createElement(c.a,{gutter:24,className:"mt ph-ignore-input"},t.a.createElement(j.a,{span:24},t.a.createElement(g.a,{name:"csv",label:z?"Upload users":"Add users","data-attr":"cohort-csv"},function(L){var F,X,Z=L.onChange;return t.a.createElement(t.a.Fragment,null,t.a.createElement("span",{className:"mb"},"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user\u2019s distinct ID."),t.a.createElement(Re.a,{name:"file",multiple:!1,fileList:s.csv?[s.csv]:[],accept:".csv",showUploadList:!1,beforeUpload:function(xe){return Z(xe),!1},className:"cohort-csv-dragger"},s.csv?t.a.createElement(t.a.Fragment,null,t.a.createElement(re.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),t.a.createElement("div",{className:"ant-upload-text"},(F=(X=s.csv)===null||X===void 0?void 0:X.name)!==null&&F!==void 0?F:"File chosen")):t.a.createElement(t.a.Fragment,null,t.a.createElement(re.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),t.a.createElement("div",{className:"ant-upload-text"},"Drag a file here or click to browse for a file"))))}))):t.a.createElement(t.a.Fragment,null,t.a.createElement(H.a,null),t.a.createElement(c.a,{gutter:24,className:"mt"},t.a.createElement(j.a,{span:24},t.a.createElement(t.a.Fragment,null,t.a.createElement(c.a,{align:"middle",justify:"space-between",wrap:!1},t.a.createElement(c.a,{className:"ant-form-item ant-form-item-label",style:{marginBottom:0}},t.a.createElement("label",{htmlFor:"groups",title:"Matching criteria"},"Matching criteria"),t.a.createElement("span",null,"Actors who match the following criteria will be part of the cohort. Continuously updated automatically.")),B&&t.a.createElement(c.a,{align:"middle",wrap:!1,justify:"space-between",className:"pl"},t.a.createElement(be.a,{value:s.filters.properties.type,onChange:function(F){ve(F)},topLevelFilter:!0,suffix:"criteria"}))),B?t.a.createElement(pe,{id:l.id}):t.a.createElement(t.a.Fragment,null,s.groups.map(function(L,F){return t.a.createElement(je.Group,{key:F,name:["groups",F]},t.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}},t.a.createElement(Ae.Field,{name:"id",template:function(Z){var _=Z.error,xe=Z.kids;return t.a.createElement("div",{style:{padding:15,border:_?"1px solid var(--danger)":"1px solid rgba(0, 0, 0, 0.1)",borderRadius:4,width:"100%"}},xe,t.a.createElement(c.a,null,_&&t.a.createElement("div",{style:{color:"var(--danger)",marginTop:16}},_)))}},t.a.createElement(Ke.b,{onCriteriaChange:function(Z){return Oe(Z,L.id)},onRemove:function(){ge(fe(fe({},s),{},{groups:s.groups.filter(function(Z,_){return _!==F})}))},group:L,hideRemove:s.groups.length===1})),F<s.groups.length-1&&t.a.createElement("div",{className:"stateful-badge or mt mb"},"OR")))}),t.a.createElement("span",{id:"add"}),t.a.createElement("div",{style:{marginTop:8,marginBottom:8}},t.a.createElement("a",{href:"#add",style:{padding:0},onClick:function(){ge(fe(fe({},s),{},{groups:[].concat(m()(s.groups),[{id:Math.random().toString().substr(2,5),matchType:E.p,properties:[]}])}))},"data-attr":"add-match-criteria"},t.a.createElement(Ue.a,null)," Add matching criteria"))))))),!z&&t.a.createElement(t.a.Fragment,null,t.a.createElement(H.a,null),t.a.createElement("div",null,t.a.createElement("h3",{className:"l3"},"Persons in this cohort"),s.is_calculating?t.a.createElement("div",{className:"cohort-recalculating flex-center"},t.a.createElement(Ve.a,{size:"sm",style:{marginRight:4}}),"We're recalculating who belongs to this cohort. This could take up to a couple of minutes."):t.a.createElement("div",{style:{marginTop:15}},t.a.createElement(We.Persons,{cohort:s.id}))))))}try{he.displayName="CohortEdit",he.__docgenInfo={description:"",displayName:"CohortEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"]={docgenInfo:he.__docgenInfo,name:"CohortEdit",path:"frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"})}catch(n){}var He={component:de,logic:T,paramsToProps:function(u){var l=u.params.id;return{id:l&&l!=="new"?parseInt(l):"new"}}};function de(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=n.id;return t.a.createElement(he,{id:u})}try{de.displayName="Cohort",de.__docgenInfo={description:"",displayName:"Cohort",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/Cohort.tsx#Cohort"]={docgenInfo:de.__docgenInfo,name:"Cohort",path:"frontend/src/scenes/cohorts/Cohort.tsx#Cohort"})}catch(n){}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(P,r,e){"use strict";e.d(r,"a",function(){return le});var d=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),o=e.n(d),O=e("./node_modules/@babel/runtime/regenerator/index.js"),f=e.n(O),I=e("./node_modules/core-js/modules/es.array.iterator.js"),ie=e.n(I),ae=e("./node_modules/core-js/modules/es.object.to-string.js"),K=e.n(ae),t=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ue=e.n(t),v=e("./node_modules/core-js/modules/es.array.concat.js"),$=e.n(v),w=e("./node_modules/kea/lib/index.esm.js"),T=e("./frontend/src/lib/api.ts"),U=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),J=e("./frontend/src/lib/utils.tsx"),x=e("./frontend/src/scenes/teamLogic.tsx"),R=e("./frontend/src/scenes/urls.ts"),k=e("./frontend/src/models/groupsModel.ts"),le=Object(w.kea)({path:["groups","groupsListLogic"],connect:{values:[x.a,["currentTeamId"],k.a,["groupTypes","aggregationLabel"],U.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(a){return{url:a}},setTab:function(a){return{tab:a}}}},loaders:function(m){var a=m.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var C=o()(f.a.mark(function V(q){var Q;return f.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(Q=q.url,!a.groupsEnabled){S.next=6;break}return Q=Q||"api/projects/".concat(a.currentTeamId,"/groups/?group_type_index=").concat(a.currentTab),S.next=5,T.b.get(Q);case 5:return S.abrupt("return",S.sent);case 6:case"end":return S.stop()}},V)}));function b(V){return C.apply(this,arguments)}return b}()}]}},reducers:{currentTab:["-1",{setTab:function(m,a){var C=a.tab;return C}}]},selectors:{currentTabName:[function(i){return[i.currentTab,i.groupTypes,i.aggregationLabel]},function(i,m,a){return i==="-1"?"Persons":m!=null&&m.length?Object(J.j)(a(parseInt(i)).singular):""}],breadcrumbs:[function(i){return[i.currentTabName,i.currentTab]},function(i,m){return[{name:i,path:R.a.groups(m)}]}]},actionToUrl:function(){return{setTab:function(a){var C=a.tab;return C!=="-1"?R.a.groups(C):R.a.persons()}}},urlToAction:function(m){var a=m.actions,C=m.values;return{"/groups/:id":function(V){var q=V.id;q&&(a.setTab(q),a.loadGroups())},"/persons":function(){C.currentTab!=="-1"&&a.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(P,r,e){"use strict";e.d(r,"a",function(){return T});var d=e("./node_modules/kea/lib/index.esm.js"),o=e("./frontend/src/lib/components/PageHeader.tsx"),O=e("./node_modules/react/index.js"),f=e.n(O),I=e("./node_modules/core-js/modules/es.array.includes.js"),ie=e("./node_modules/core-js/modules/es.string.includes.js"),ae=e("./node_modules/core-js/modules/es.array.map.js"),K=e("./node_modules/antd/es/tabs/index.js"),t=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),ue=e("./frontend/src/lib/utils.tsx"),v=e("./frontend/src/models/groupsModel.ts"),$=e("./frontend/src/scenes/groups/groupsListLogic.ts");function w(){var U=Object(d.useActions)($.a),J=U.setTab,x=Object(d.useValues)($.a),R=x.currentTab,k=Object(d.useValues)(v.a),le=k.groupTypes,i=k.aggregationLabel,m=Object(d.useValues)(t.b),a=m.groupsAccessStatus,C=[t.a.HasAccess,t.a.HasGroupTypes,t.a.NoAccess].includes(a);return f.a.createElement(K.a,{activeKey:R,onChange:function(V){return J(V)}},f.a.createElement(K.a.TabPane,{tab:"Persons",key:"-1"}),C?f.a.createElement(K.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):le.map(function(b){return f.a.createElement(K.a.TabPane,{tab:Object(ue.j)(i(b.group_type_index).plural),key:b.group_type_index})}))}function T(U){var J=U.hideGroupTabs,x=Object(d.useValues)(v.a),R=x.showGroupsOptions;return f.a.createElement(f.a.Fragment,null,f.a.createElement(o.a,{title:"Persons".concat(R?" & Groups":""),caption:"A catalog of your product's end users".concat(R?" and groups":"",".")}),!J&&R&&f.a.createElement(w,null))}try{T.displayName="PersonPageHeader",T.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:T.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(U){}},"./frontend/src/scenes/persons/Persons.scss":function(P,r,e){"use strict";var d=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=e.n(d),O=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),f=e.n(O),I={};I.insert="head",I.singleton=!1;var ie=o()(f.a,I),ae=f.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(P,r,e){"use strict";e.r(r),e.d(r,"scene",function(){return S}),e.d(r,"Persons",function(){return oe}),e.d(r,"PersonsScene",function(){return ce});var d=e("./node_modules/react/index.js"),o=e.n(d),O=e("./node_modules/kea/lib/index.esm.js"),f=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),I=e.n(f),ie=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e("./node_modules/core-js/modules/es.object.keys.js"),K=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),t=e("./frontend/src/lib/components/PropertiesTable.tsx"),ue=e("./frontend/src/scenes/persons/Persons.scss"),v=e("./frontend/src/lib/components/CopyToClipboard.tsx"),$=e("./frontend/src/scenes/persons/PersonHeader.tsx"),w=e("./frontend/src/lib/components/LemonTable/index.ts");function T(p){var h=p.people,W=p.loading,H=W===void 0?!1:W,c=p.hasPrevious,j=p.hasNext,g=p.loadPrevious,D=p.loadNext,ee=p.compact,te=[{title:"Person",key:"person",render:function(E,A){return o.a.createElement($.a,{withIcon:!0,person:A})}},{title:"ID",key:"id",render:function(E,A){return o.a.createElement("div",{style:{overflow:"hidden"}},A.distinct_ids.length&&o.a.createElement(v.a,{explicitValue:A.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},A.distinct_ids[0]))}}].concat(I()(ee?[]:[{title:"First seen",dataIndex:"created_at",render:function(E){return E?o.a.createElement(K.b,{time:E}):o.a.createElement(o.a.Fragment,null)}}]));return o.a.createElement(w.a,{columns:te,loading:H,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:j?function(){D==null||D(),window.scrollTo(0,0)}:void 0,onBackward:c?function(){g==null||g(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(E){var A=E.properties;return Object.keys(A).length?o.a.createElement(t.a,{properties:A}):"This person has no properties."}},dataSource:h,emptyState:"No persons",nouns:["person","persons"]})}try{T.displayName="PersonsTable",T.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:T.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(p){}var U=e("./node_modules/antd/es/row/index.js"),J=e("./node_modules/antd/es/popconfirm/index.js"),x=e("./frontend/src/scenes/persons/personsLogic.ts"),R=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),k=e.n(R),le=e("./node_modules/core-js/modules/es.regexp.exec.js"),i=e("./node_modules/core-js/modules/es.string.search.js"),m=e("./node_modules/antd/es/input/index.js"),a=e("./frontend/src/lib/components/LemonRow/index.ts"),C=e("./frontend/src/lib/components/icons.tsx"),b=function(h){var W=h.autoFocus,H=W===void 0?!0:W,c=Object(O.useActions)(x.a),j=c.loadPersons,g=c.setListFilters,D=Object(O.useValues)(x.a),ee=D.listFilters,te=Object(d.useState)(""),M=k()(te,2),E=M[0],A=M[1];return Object(d.useEffect)(function(){A(ee.search||"")},[]),o.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"min(100%, 24rem)"}},o.a.createElement(m.a.Search,{"data-attr":"persons-search",placeholder:"Search for persons",autoFocus:H,value:E,onChange:function(se){A(se.target.value),se.target.value||(g({search:void 0}),j())},enterButton:!0,onPressEnter:function(se){se.preventDefault(),g({search:E||void 0}),j()},allowClear:!0,onSearch:function(){g({search:E||void 0}),j()},style:{width:"100%"}}),o.a.createElement(a.a,{className:"ml-05",type:"stealth",tooltip:o.a.createElement(o.a.Fragment,null,"Search by email, name, ID, or even contents of properties. You can also search for persons who just ",o.a.createElement("i",null,"have"),' a property like so: "has:your_property".'),icon:o.a.createElement(C.IconInfo,null)}))};try{b.displayName="PersonsSearch",b.__docgenInfo={description:"",displayName:"PersonsSearch",props:{autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"]={docgenInfo:b.__docgenInfo,name:"PersonsSearch",path:"frontend/src/scenes/persons/PersonsSearch.tsx#PersonsSearch"})}catch(p){}var V=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),q=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Q=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Ee=e("./frontend/src/lib/components/LemonButton/index.ts"),S={component:ce,logic:x.a,paramsToProps:function(){return{syncWithUrl:!0}}};function oe(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=p.cohort;return o.a.createElement(O.BindLogic,{logic:x.a,props:{cohort:h,syncWithUrl:!h}},o.a.createElement(ce,null))}function ce(){var p=Object(O.useActions)(x.a),h=p.loadPersons,W=p.setListFilters,H=p.exportCsv,c=Object(O.useValues)(x.a),j=c.cohortId,g=c.persons,D=c.listFilters,ee=c.personsLoading,te=c.exportUrl;return o.a.createElement("div",{className:"persons-list"},!j&&o.a.createElement(V.a,null),o.a.createElement(U.a,{align:"middle",justify:"space-between",className:"mb-05",style:{gap:"0.75rem"}},o.a.createElement(b,{autoFocus:!j}),o.a.createElement("div",null,o.a.createElement(J.a,{placement:"topRight",title:o.a.createElement(o.a.Fragment,null,"Exporting by csv is limited to 10,000 users.",o.a.createElement("br",null),"To return more, please use ",o.a.createElement("a",{href:"https://posthog.com/docs/api/persons"},"the API"),". Do you want to export by CSV?"),onConfirm:H},te&&o.a.createElement(Ee.a,{type:"secondary",icon:o.a.createElement(C.IconExport,{style:{color:"var(--primary)"}})},D.properties&&D.properties.length>0?o.a.createElement("div",{style:{display:"block"}},"Export (",o.a.createElement("strong",null,D.properties.length)," filter)"):"Export")))),o.a.createElement(q.a,{pageKey:"persons-list-page",propertyFilters:D.properties,onChange:function(E){W({properties:E}),h()},endpoint:"person",taxonomicGroupTypes:[Q.a.PersonProperties,Q.a.Cohorts],showConditionBadge:!0}),o.a.createElement(T,{people:g.results,loading:ee,hasPrevious:!!g.previous,hasNext:!!g.next,loadPrevious:function(){return h(g.previous)},loadNext:function(){return h(g.next)}}))}try{oe.displayName="Persons",oe.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:oe.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(p){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohort.scss":function(P,r,e){var d=e("./node_modules/css-loader/dist/runtime/api.js");r=d(!1),r.push([P.i,".Cohort__Name.ant-form-item-has-error .ant-form-item-explain-error{font-weight:500;margin:.25rem 0}.Cohort__Name.ant-form-item-has-error .LemonInput{border:1px solid var(--danger)}",""]),P.exports=r},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss":function(P,r,e){var d=e("./node_modules/css-loader/dist/runtime/api.js");r=d(!1),r.push([P.i,".CohortCriteriaGroups__matching-group{padding-top:1rem;border:1px solid var(--border);border-radius:4px;width:100%;margin:.5rem 0}.CohortCriteriaGroups__matching-group.CohortCriteriaGroups__matching-group--error{border:1px solid var(--danger)}.CohortCriteriaGroups__matching-group .CohortCriteriaGroups__matching-group__error-row{padding:0 1rem 1rem}.CohortCriteriaGroups__matching-group__logical-divider{color:var(--primary-alt);font-weight:600;font-size:12px;text-transform:uppercase;padding:0 1.5rem}",""]),P.exports=r},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(P,r,e){var d=e("./node_modules/css-loader/dist/runtime/api.js");r=d(!1),r.push([P.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:#5375ff;cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),P.exports=r}}]);
