(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(W,R,e){"use strict";e.r(R),e.d(R,"SessionsRecordings",function(){return se}),e.d(R,"scene",function(){return Le});var L=e("./node_modules/core-js/modules/es.array.map.js"),F=e("./node_modules/core-js/modules/es.object.values.js"),T=e("./frontend/src/lib/components/PageHeader.tsx"),E=e("./frontend/src/scenes/teamLogic.tsx"),u=e("./node_modules/kea/lib/index.esm.js"),O=e("./frontend/src/scenes/urls.ts"),z=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),X=e("./frontend/src/lib/components/AlertMessage/index.ts"),f=e("./frontend/@posthog/lemon-ui/src/index.ts"),I=e("./frontend/src/lib/logic/featureFlagLogic.ts"),ae=e("./frontend/src/lib/constants.tsx"),H=e("./node_modules/antd/es/tabs/index.js"),S=e("./frontend/src/types.ts"),Ae=e("./node_modules/core-js/modules/es.object.keys.js"),Te=e("./node_modules/core-js/modules/es.array.filter.js"),Ee=e("./node_modules/core-js/modules/es.object.to-string.js"),Ie=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Ne=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Be=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),le=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ie=e.n(le),oe=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),$=e.n(oe),De=e("./node_modules/core-js/modules/es.symbol.js"),Ke=e("./node_modules/core-js/modules/es.symbol.description.js"),Ve=e("./node_modules/core-js/modules/es.regexp.exec.js"),Me=e("./node_modules/core-js/modules/es.string.search.js"),we=e("./node_modules/core-js/modules/es.array.concat.js"),ce=e("./node_modules/react/index.js"),de=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),C=e.n(de),ue=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),me=e.n(ue),je=e("./node_modules/@babel/runtime/regenerator/index.js"),g=e.n(je),Ue=e("./node_modules/core-js/modules/es.array.iterator.js"),ze=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Xe=e("./node_modules/core-js/modules/es.array.find-index.js"),$e=e("./node_modules/core-js/modules/es.string.starts-with.js"),Ye=e("./node_modules/core-js/modules/es.array.slice.js"),ye=e("./node_modules/kea-loaders/lib/index.js"),J=e("./frontend/src/lib/api.ts"),A=e("./frontend/src/lib/utils.tsx"),N=e("./node_modules/kea-router/lib/index.js"),Y=e("./frontend/src/scenes/session-recordings/playlist/playlistUtils.ts");function Z(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),n.push.apply(n,r)}return n}function D(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(r){$()(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}var K=30,pe={createdBy:"All users",page:1,dateFrom:"all"},G=Object(u.kea)([Object(u.path)(["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic"]),Object(u.props)({}),Object(u.key)(function(a){return a.tab}),Object(u.actions)(function(){return{setSavedPlaylistsFilters:function(t){return{filters:t}},loadPlaylists:!0,createPlaylist:!0,updatePlaylist:function(t,n){return{shortId:t,playlist:n}},deletePlaylist:function(t){return{playlist:t}},duplicatePlaylist:function(t){return{playlist:t}}}}),Object(u.reducers)(function(a){return me()(a),{filters:[pe,{setSavedPlaylistsFilters:function(n,r){var i=r.filters;return Object(A.ob)(D(D(D({},n||{}),i),"page"in i?{}:{page:1}))}}]}}),Object(ye.loaders)(function(a){var t=a.values,n=a.actions;return{playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:function(){var r=C()(g.a.mark(function o(d,m){var y,c,l,v,p,x;return g.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(t.playlists.filters===null){P.next=3;break}return P.next=3,m(300);case 3:return l=D({},t.filters),v=l.createdBy==="All users"?void 0:l.createdBy,p={limit:K,offset:Math.max(0,(l.page-1)*K),order:(y=l.order)!==null&&y!==void 0?y:"-last_modified_at",created_by:v!=null?v:void 0,search:l.search||void 0,date_from:l.dateFrom&&l.dateFrom!="all"?l.dateFrom:void 0,date_to:(c=l.dateTo)!==null&&c!==void 0?c:void 0,pinned:l.pinned?!0:void 0},P.next=8,J.b.recordings.listPlaylists(Object(A.Gb)(p));case 8:return x=P.sent,P.abrupt("return",x);case 10:case"end":return P.stop()}},o)}));function i(o,d){return r.apply(this,arguments)}return i}(),updatePlaylist:function(){var r=C()(g.a.mark(function o(d){var m,y,c,l;return g.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return m=d.shortId,y=d.playlist,p.next=3,J.b.recordings.updatePlaylist(m,y);case 3:return c=p.sent,l=t.playlists.results.findIndex(function(x){return x.short_id===m}),l>-1&&(t.playlists.results[l]=c),p.abrupt("return",t.playlists);case 7:case"end":return p.stop()}},o)}));function i(o){return r.apply(this,arguments)}return i}(),deletePlaylist:function(){var r=C()(g.a.mark(function o(d){var m;return g.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=d.playlist,c.next=3,Object(Y.b)(m,function(){n.loadPlaylists()});case 3:return t.playlists.results=t.playlists.results.filter(function(l){return l.short_id!==m.short_id}),c.abrupt("return",t.playlists);case 5:case"end":return c.stop()}},o)}));function i(o){return r.apply(this,arguments)}return i}()},newPlaylist:{createPlaylist:function(){var r=C()(g.a.mark(function o(d,m){var y;return g.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,m(100);case 2:return l.next=4,Object(Y.a)({});case 4:return y=l.sent,l.next=7,m(1e3);case 7:return l.abrupt("return",y);case 8:case"end":return l.stop()}},o)}));function i(o,d){return r.apply(this,arguments)}return i}(),duplicatePlaylist:function(){var r=C()(g.a.mark(function o(d){var m;return g.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=d.playlist,c.next=3,Object(Y.c)(m);case 3:return c.abrupt("return",t.playlists);case 4:case"end":return c.stop()}},o)}));function i(o){return r.apply(this,arguments)}return i}()}}}),Object(u.listeners)(function(a){var t=a.actions;return{setSavedPlaylistsFilters:function(){t.loadPlaylists()}}}),Object(u.selectors)(function(a){var t=a.actions;return{sorting:[function(n){return[n.filters]},function(n){return n.order?n.order.startsWith("-")?{columnKey:n.order.slice(1),order:-1}:{columnKey:n.order,order:1}:{columnKey:"last_modified_at",order:-1}}],pagination:[function(n){return[n.filters,n.playlists]},function(n,r){return{controlled:!0,pageSize:K,currentPage:n.page,entryCount:r.count,onBackward:r.previous?function(){return t.setSavedPlaylistsFilters({page:n.page-1})}:void 0,onForward:r.next?function(){return t.setSavedPlaylistsFilters({page:n.page+1})}:void 0}}]}}),Object(N.actionToUrl)(function(a){var t=a.values,n=function(){if(N.router.values.location.pathname===O.a.sessionRecordings(S.X.Playlists)){var i=t.filters,o=Object(A.ob)(N.router.values.searchParams);if(!Object(A.qb)(i,o))return[O.a.sessionRecordings(S.X.Playlists),i,{},{replace:!1}]}};return{loadPlaylists:n,setSavedPlaylistsFilters:n}}),Object(N.urlToAction)(function(a){var t=a.actions,n=a.values;return $()({},O.a.sessionRecordings(S.X.Playlists),function(){var r=C()(g.a.mark(function i(o,d){var m,y;return g.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:m=n.filters,y=Object(A.ob)(d),Object(A.qb)(m,y)||t.setSavedPlaylistsFilters(y);case 3:case"end":return l.stop()}},i)}));return function(i,o){return r.apply(this,arguments)}}())}),Object(u.afterMount)(function(a){var t=a.actions;t.loadPlaylists()})]),Q=e("./node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),k=e("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),fe=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),ve=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),ge=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),be=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),he=e("./frontend/@posthog/apps-common/src/index.ts"),Oe=e("./frontend/src/lib/components/LemonButton/index.ts"),V=e("./frontend/src/lib/components/icons.tsx"),s=e("./node_modules/react/jsx-runtime.js");function M(a){var t=a.tab,n=Object(u.useValues)(G({tab:t})),r=n.newPlaylistLoading,i=Object(u.useActions)(G({tab:t})),o=i.createPlaylist;return Object(s.jsx)("div",{className:"flex items-center justify-center",children:Object(s.jsxs)("div",{className:"max-w-lg mt-12 flex flex-col items-center",children:[Object(s.jsx)("h2",{className:"text-xl",children:"There are no playlists that match these filters"}),Object(s.jsx)("p",{className:"text-muted",children:"Once you create a playlist, it will show up here."}),Object(s.jsx)(Oe.a,{size:"large",type:"primary","data-attr":"add-session-playlist-button-empty-state",icon:Object(s.jsx)(V.IconPlus,{}),loading:r,onClick:function(){o()},children:"New Playlist"})]})})}try{M.displayName="SavedSessionRecordingPlaylistsEmptyState",M.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylistsEmptyState",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"recent"'},{value:'"playlists"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"]={docgenInfo:M.__docgenInfo,name:"SavedSessionRecordingPlaylistsEmptyState",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylistsEmptyState.tsx#SavedSessionRecordingPlaylistsEmptyState"})}catch(a){}var Pe=e("./node_modules/clsx/dist/clsx.m.js"),Se=e("./frontend/src/lib/components/LemonButton/More.tsx");function q(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),n.push.apply(n,r)}return n}function _(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(r){$()(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}function w(a){var t=a.tab,n=G({tab:t}),r=Object(u.useValues)(n),i=r.playlists,o=r.playlistsLoading,d=r.filters,m=r.sorting,y=r.pagination,c=r.newPlaylistLoading,l=Object(u.useActions)(n),v=l.setSavedPlaylistsFilters,p=l.updatePlaylist,x=l.deletePlaylist,te=l.duplicatePlaylist,P=Object(u.useValues)(be.a),Fe=P.meFirstMembers,Ce=[{width:0,dataIndex:"pinned",render:function(j,h){var B=h.short_id;return Object(s.jsx)(f.LemonButton,{size:"small",status:"primary-alt",onClick:function(){return p(B,{pinned:!j})},children:j?Object(s.jsx)(Q.a,{}):Object(s.jsx)(k.a,{})})}},{title:"Name",dataIndex:"name",render:function(j,h){var B=h.short_id,ne=h.derived_name,re=h.description;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(f.Link,{className:Object(Pe.a)("font-semibold",!j&&"italic"),to:O.a.sessionRecordingPlaylist(B),children:j||ne||"(Untitled)"}),re?Object(s.jsx)("div",{className:"truncate",children:re}):null]})}},_(_({},Object(ve.b)()),{},{width:0}),{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",width:0,render:function(j){return Object(s.jsx)("div",{children:j&&typeof j=="string"&&Object(s.jsx)(he.TZLabel,{time:j})})}},{width:0,render:function(j,h){return Object(s.jsx)(Se.a,{overlay:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(f.LemonButton,{status:"stealth",onClick:function(){return te(h)},fullWidth:!0,loading:c,"data-attr":"duplicate-playlist",children:"Duplicate"}),Object(s.jsx)(f.LemonDivider,{}),Object(s.jsx)(f.LemonButton,{status:"danger",onClick:function(){return x(h)},fullWidth:!0,children:"Delete playlist"})]})})}}];return Object(s.jsxs)("div",{className:"space-y-4",children:[Object(s.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(s.jsx)(f.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:function(j){return v({search:j||void 0})},value:d.search||""}),Object(s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(s.jsx)("div",{className:"flex items-center gap-2",children:Object(s.jsx)(f.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:d.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:function(){return v({pinned:!d.pinned})},icon:Object(ce.cloneElement)(d.pinned?Object(s.jsx)(Q.a,{}):Object(s.jsx)(k.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Last modified:"}),Object(s.jsx)(ge.a,{disabled:!1,dateFrom:d.dateFrom,dateTo:d.dateTo,onChange:function(j,h){return v({dateFrom:j,dateTo:h!=null?h:void 0})},makeLabel:function(j){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(fe.a,{}),Object(s.jsxs)("span",{className:"hide-when-small",children:[" ",j]})]})}})]}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Created by:"}),Object(s.jsx)(f.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"}].concat(ie()(Fe.map(function(b){return{value:b.user.id,label:b.user.first_name}}))),value:d.createdBy,onChange:function(j){v({createdBy:j})},dropdownMatchSelectWidth:!1})]})]})]}),!o&&i.count<1?Object(s.jsx)(M,{tab:t}):Object(s.jsx)(f.LemonTable,{loading:o,columns:Ce,dataSource:i.results,pagination:y,noSortingCancellation:!0,sorting:m,onSort:function(j){return v({order:j?"".concat(j.order===-1?"-":"").concat(j.columnKey):void 0})},rowKey:"id",loadingSkeletonRows:K,nouns:["playlist","playlists"]})]})}try{w.displayName="SavedSessionRecordingPlaylists",w.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:w.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(a){}var xe=e("./frontend/src/lib/components/Tooltip.tsx"),U=e("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts"),Re=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),ee=e("./frontend/src/scenes/session-recordings/settings/SessionRecordingSettings.tsx");function se(){var a=Object(u.useValues)(E.a),t=a.currentTeam,n=Object(u.useValues)(I.a),r=n.featureFlags,i=Object(u.useValues)(U.c),o=i.tab,d=i.newPlaylistLoading,m=Object(u.useActions)(U.c),y=m.saveNewPlaylist,c=!!r[ae.h.RECORDING_PLAYLISTS],l=Object(s.jsx)(z.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0}),v=t&&!(t!=null&&t.session_recording_opt_in);return Object(s.jsxs)("div",{children:[Object(s.jsx)(T.a,{title:Object(s.jsx)("div",{children:"Session Recordings"}),buttons:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(f.LemonButton,{type:"secondary",icon:Object(s.jsx)(V.IconSettings,{}),onClick:function(){return Object(ee.b)()},children:"Configure"}),c?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(xe.a,{placement:"topRight",title:o===S.X.Recent?"Save the currently filters as a dynamic playlist":"Create a new playlist",children:Object(s.jsx)(f.LemonButton,{type:"primary",onClick:function(){return y()},loading:d,"data-attr":"save-recordings-playlist-button",icon:Object(s.jsx)(V.IconPlus,{}),children:o===S.X.Recent?"Save as playlist":"Create new playlist"})})}):void 0]})}),c&&Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(H.a,{activeKey:o,animated:!1,style:{borderColor:"#D9D9D9"},onChange:function(x){return N.router.actions.push(O.a.sessionRecordings(x))},children:Object.values(S.X).map(function(p){return Object(s.jsx)(H.a.TabPane,{tab:Object(U.b)(p)},p)})})}),v?Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsx)(X.a,{type:"info",action:{type:"secondary",icon:Object(s.jsx)(V.IconSettings,{}),onClick:function(){return Object(ee.b)()},children:"Configure"},children:"Session recordings are currently disabled for this project."})}):null,c?o?o===S.X.Recent?l:Object(s.jsx)(w,{tab:S.X.Playlists}):Object(s.jsx)(Re.a,{}):l]})}var Le={component:se,logic:U.c}},"./node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(W,R,e){"use strict";var L=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),F=e("./node_modules/react/index.js"),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},E=T,u=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),O=function(f,I){return F.createElement(u.a,Object(L.a)(Object(L.a)({},f),{},{ref:I,icon:E}))};O.displayName="PushpinFilled";var z=R.a=F.forwardRef(O)},"./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(W,R,e){"use strict";var L=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),F=e("./node_modules/react/index.js"),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},E=T,u=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),O=function(f,I){return F.createElement(u.a,Object(L.a)(Object(L.a)({},f),{},{ref:I,icon:E}))};O.displayName="PushpinOutlined";var z=R.a=F.forwardRef(O)}}]);
