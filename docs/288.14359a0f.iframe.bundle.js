var F=(y,m,e)=>new Promise((r,d)=>{var j=u=>{try{b(e.next(u))}catch(v){d(v)}},h=u=>{try{b(e.throw(u))}catch(v){d(v)}},b=u=>u.done?r(u.value):Promise.resolve(u.value).then(j,h);b((e=e.apply(y,m)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(y,m,e){"use strict";e.d(m,"b",function(){return i}),e.d(m,"a",function(){return T});var r=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),d=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),j=e("./frontend/src/scenes/urls.ts"),h=e("./frontend/src/lib/components/Tooltip.tsx"),b=e("./frontend/src/lib/components/icons.tsx"),u=e("./frontend/src/lib/components/TitleWithIcon.tsx"),v=e("./frontend/src/lib/constants.tsx"),W=e("./frontend/src/lib/logic/featureFlagLogic.ts"),o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),A=e.n(o);let i;(function(s){s.Actions="actions",s.EventDefinitions="events",s.EventPropertyDefinitions="properties",s.IngestionWarnings="warnings"})(i||(i={}));const p={[i.EventPropertyDefinitions]:j.a.eventPropertyDefinitions(),[i.EventDefinitions]:j.a.eventDefinitions(),[i.Actions]:j.a.actions(),[i.IngestionWarnings]:j.a.ingestionWarnings()},S=Object(r.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[W.a,["featureFlags"]]},actions:{setTab:s=>({tab:s})},reducers:{tab:[i.EventDefinitions,{setTab:(s,f)=>{let{tab:O}=f;return O}}]},selectors:{showWarningsTab:[s=>[s.featureFlags],s=>!!s[v.i.INGESTION_WARNINGS_ENABLED]]},actionToUrl:()=>({setTab:s=>{let{tab:f}=s;return p[f]||j.a.events()}}),urlToAction:s=>{let{actions:f,values:O}=s;return Object.fromEntries(Object.entries(p).map(D=>{let[P,M]=D;return[M,()=>{O.tab!==P&&f.setTab(P)}]}))}});function T(s){let{tab:f}=s;const{showWarningsTab:O}=Object(r.useValues)(S),{setTab:D}=Object(r.useActions)(S);return Object(o.jsxs)(d.a,{tabPosition:"top",animated:!1,activeKey:f,onTabClick:P=>D(P),children:[Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)("span",{"data-attr":"data-management-events-tab",children:"Events"})},i.EventDefinitions),Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)(u.a,{icon:Object(o.jsx)(h.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards.",children:Object(o.jsx)(b.IconInfo,{})}),"data-attr":"data-management-actions-tab",children:"Actions"})},i.Actions),Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)(u.a,{icon:Object(o.jsx)(h.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them.",children:Object(o.jsx)(b.IconInfo,{})}),"data-attr":"data-management-event-properties-tab",children:"Event Properties"})},i.EventPropertyDefinitions),O&&Object(o.jsx)(d.a.TabPane,{tab:Object(o.jsx)("span",{"data-attr":"data-management-warnings-tab",children:"Ingestion Warnings"})},i.IngestionWarnings)]})}try{T.displayName="DataManagementPageTabs",T.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:T.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(s){}},"./frontend/src/scenes/data-management/ingestion-warnings/IngestionWarningsView.tsx":function(y,m,e){"use strict";e.r(m),e.d(m,"scene",function(){return Y}),e.d(m,"IngestionWarningsView",function(){return G});var r=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),d=e("./frontend/src/scenes/urls.ts"),j=e("./frontend/src/lib/components/PageHeader.tsx"),h=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),b=e("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),u=e("./frontend/src/lib/api.ts"),v=e("./frontend/src/scenes/teamLogic.tsx");const W=Object(r.kea)([Object(r.path)(["scenes","data-management","ingestion-warnings","ingestionWarningsLogic"]),Object(r.connect)({values:[v.a,["currentTeamId"]]}),Object(b.loaders)(c=>{let{values:a}=c;return{data:[[],{loadData:()=>F(this,null,function*(){const{results:t}=yield u.b.get(`api/projects/${a.currentTeamId}/ingestion_warnings`);return t})}]}}),Object(r.selectors)({breadcrumbs:[()=>[],()=>[{name:"Data Management",path:d.a.eventDefinitions()},{name:"Ingestion Warnings",path:d.a.ingestionWarnings()}]]}),Object(r.events)(c=>{let{actions:a}=c;return{afterMount:()=>{a.loadData()}}})]);var o=e("./frontend/src/lib/components/LemonTable/index.ts"),A=e("./frontend/src/lib/components/TZLabel/index.tsx"),i=e("./frontend/src/lib/components/Link.tsx"),p=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),S=e("./node_modules/.pnpm/chart.js@3.9.1/node_modules/chart.js/dist/chart.mjs"),T=e("./frontend/src/lib/utils.tsx"),s=e("./frontend/src/lib/dayjs.ts"),f=e("./frontend/src/lib/components/Popup/Popup.tsx"),O=e("./node_modules/.pnpm/@floating-ui+core@0.7.3/node_modules/@floating-ui/core/dist/floating-ui.core.esm.js"),D=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),P=e.n(D),M=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss"),w=e.n(M),L={};L.insert="head",L.singleton=!1;var Z=P()(w.a,L),Q=w.a.locals||{},n=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function _(c){let{summary:a}=c;const t=Object(p.useRef)(null),l=Object(p.useRef)(null),{timezone:g}=Object(r.useValues)(v.a),[I,N]=Object(p.useState)(null),[$,J]=Object(p.useState)(0),B=Object(p.useMemo)(()=>Object(T.xb)(0,30).map(x=>Object(s.a)().subtract(x,"days").format("D MMM YYYY")).reverse(),[]),K=Object(p.useMemo)(()=>{const x=new Array(30).fill(0);for(const R of a.warnings){const E=Object(s.c)(R.timestamp,g);x[Object(s.a)().diff(E,"days")]+=1}return x.reverse()},[a]);return Object(p.useEffect)(()=>{let x;if(t.current){var R;x=new S.a((R=t.current)===null||R===void 0?void 0:R.getContext("2d"),{type:"bar",data:{labels:B,datasets:[{data:K,minBarLength:3,hoverBackgroundColor:"brand-blue"}]},options:{scales:{x:{display:!1},y:{beginAtZero:!0,display:!1}},plugins:{crosshair:!1,legend:{display:!1},tooltip:{enabled:!1,external(E){let{tooltip:C}=E;if(C.opacity===0){N(null);return}const U=C.dataPoints[0];N(Object(n.jsxs)(n.Fragment,{children:[U.label,": ",U.formattedValue]})),J(C.x)}}},maintainAspectRatio:!1,interaction:{mode:"index",axis:"x",intersect:!1}}})}return()=>{var E;(E=x)===null||E===void 0||E.destroy()}},[a,B,K]),Object(n.jsxs)("div",{className:"warning-events-graph",children:[Object(n.jsx)("canvas",{ref:t}),Object(n.jsx)(f.a,{visible:!!I,overlay:I,placement:"bottom-start",middleware:[Object(O.d)({crossAxis:$})],children:Object(n.jsx)("div",{ref:l})})]})}try{_.displayName="WarningEventsGraph",_.__docgenInfo={description:"",displayName:"WarningEventsGraph",props:{summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"IngestionWarningSummary"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"]={docgenInfo:_.__docgenInfo,name:"WarningEventsGraph",path:"frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"})}catch(c){}const Y={component:G,logic:W},V={cannot_merge_already_identified:"Refused to merge an already identified user",cannot_merge_with_illegal_distinct_id:"Refused to merge with an illegal distinct id",skipping_event_invalid_uuid:"Refused to process event with invalid uuid",ignored_invalid_timestamp:"Ignored an invalid timestamp, event was still ingested",event_timestamp_in_future:"An event was sent more than 23 hours in the future"},z={cannot_merge_already_identified:function(a){const t=a.details;return Object(n.jsxs)(n.Fragment,{children:["Refused to merge already identified person"," ",Object(n.jsx)(i.a,{to:d.a.person(t.sourcePersonDistinctId),children:t.sourcePersonDistinctId})," into"," ",Object(n.jsx)(i.a,{to:d.a.person(t.targetPersonDistinctId),children:t.targetPersonDistinctId})," via an $identify or $create_alias call"]})},cannot_merge_with_illegal_distinct_id:function(a){const t=a.details;return Object(n.jsxs)(n.Fragment,{children:["Refused to merge an illegal distinct_id"," ",Object(n.jsx)(i.a,{to:d.a.person(t.illegalDistinctId),children:t.illegalDistinctId})," with"," ",Object(n.jsx)(i.a,{to:d.a.person(t.otherDistinctId),children:t.otherDistinctId})," via an $identify or $create_alias call"]})},skipping_event_invalid_uuid:function(a){const t=a.details;return Object(n.jsxs)(n.Fragment,{children:["Refused to process event with invalid uuid: ",Object(n.jsx)("code",{children:t.eventUuid}),"."]})},ignored_invalid_timestamp:function(a){const t=a.details;return Object(n.jsxs)(n.Fragment,{children:["Used server timestamp when ingesting event due to invalid value ",Object(n.jsx)("code",{children:t.value})," in field"," ",Object(n.jsx)("code",{children:t.field}),": ",t.reason]})},event_timestamp_in_future:function(a){const t=a.details;return Object(n.jsxs)(n.Fragment,{children:["Timestamp computed to ",Object(n.jsx)("code",{children:t.result})," from the following input:",Object(n.jsxs)("ul",{children:[t.timestamp?Object(n.jsxs)("li",{children:["Client provided timestamp: ",t.timestamp]}):"",t.sentAt?Object(n.jsxs)("li",{children:["Client provided sent_at: ",t.sentAt]}):"",t.offset?Object(n.jsxs)("li",{children:["Client provided time offset: ",t.offset]}):"",Object(n.jsxs)("li",{children:["PostHog server capture time: ",t.now]})]})]})}};function G(){const{data:c,dataLoading:a}=Object(r.useValues)(W);return Object(n.jsxs)("div",{"data-attr":"manage-events-table",children:[Object(n.jsx)(j.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),Object(n.jsx)(h.a,{tab:h.b.IngestionWarnings}),Object(n.jsx)("div",{className:"mb-4",children:"Data ingestion related warnings from past 30 days."}),Object(n.jsx)(o.a,{dataSource:c,loading:a,columns:[{title:"Warning",dataIndex:"type",render:function(l,g){const I=V[g.type]||g.type;return Object(n.jsxs)(n.Fragment,{children:[I," (",Object(n.jsxs)(i.a,{to:`https://posthog.com/manual/data-management#${I.toLowerCase().replace(",","").split(" ").join("-")}`,children:["docs",")"]})]})}},{title:"Graph",render:function(l,g){return Object(n.jsx)(_,{summary:g})}},{title:"Events",dataIndex:"count",align:"right",sorter:(t,l)=>t.count-l.count},{title:"Last Seen",dataIndex:"lastSeen",render:function(l,g){return Object(n.jsx)(A.a,{time:g.lastSeen,showSeconds:!0})},align:"right",sorter:(t,l)=>new Date(t.lastSeen)>new Date(l.lastSeen)?1:-1}],expandable:{expandedRowRender:H},defaultSorting:{columnKey:"lastSeen",order:-1},noSortingCancellation:!0})]})}function H(c){return Object(n.jsx)(o.a,{dataSource:c.warnings,columns:[{title:"Description",key:"description",render:function(t,l){const g=z[l.type];return g?g(l):Object(n.jsx)("pre",{children:JSON.stringify(l.details,null,2)})}},{title:"Time",dataIndex:"timestamp",render:function(t,l){return Object(n.jsx)(A.a,{time:l.timestamp,showSeconds:!0})},align:"right"}],embedded:!0,size:"small",showHeader:!1})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss":function(y,m,e){var r=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");m=r(!1),m.push([y.i,".warning-events-graph{width:150px}.warning-events-graph canvas{height:36px}",""]),y.exports=m}}]);
