"use strict";(self.webpackChunk_posthog_frontend=self.webpackChunk_posthog_frontend||[]).push([[68987],{"./src/lib/components/TZLabel/TZLabel.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MoreThanADayAgo:()=>MoreThanADayAgo,MoreThanADayAgoWithPopover:()=>MoreThanADayAgoWithPopover,Recent:()=>Recent,WithMoreThanOne:()=>WithMoreThanOne,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/lib/components/TZLabel/index.tsx"),lib_dayjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/dayjs.ts"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/lemon-ui/LemonDivider/index.ts"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_mocks_browser__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/mocks/browser.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let __WEBPACK_DEFAULT_EXPORT__={title:"Components/TZ Label",component:lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__.w,parameters:{mockDate:"2023-02-01"},decorators:[(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_4__.x8)({})]};function Recent(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__.w,{time:(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_1__.zO)()})}function MoreThanADayAgo(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__.w,{time:(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_1__.zO)().subtract(2,"day")})}function MoreThanADayAgoWithPopover(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__.w,{time:(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_1__.zO)().subtract(2,"day"),showPopover:!1})}function WithMoreThanOne(){let[portalCount,setPortalCount]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{setPortalCount(document.querySelectorAll("[data-floating-ui-portal]").length)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("h1",{children:"This is a regression test"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("p",{children:"it checks we don't add a floating portal to the DOM for every TZLabel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_2__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__.w,{time:(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_1__.zO)().subtract(0,"day")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__.w,{time:(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_1__.zO)().subtract(1,"day")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_TZLabel_index__WEBPACK_IMPORTED_MODULE_0__.w,{time:(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_1__.zO)().subtract(2,"day")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_2__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{children:"there are"}),portalCount,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{children:"floating-ui portals in the DOM"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{children:"there should be 0!"})]})}Recent.parameters={...Recent.parameters,docs:{...Recent.parameters?.docs,source:{originalSource:"function Recent(): JSX.Element {\n  return <TZLabel time={now()} />;\n}",...Recent.parameters?.docs?.source}}},MoreThanADayAgo.parameters={...MoreThanADayAgo.parameters,docs:{...MoreThanADayAgo.parameters?.docs,source:{originalSource:"function MoreThanADayAgo(): JSX.Element {\n  return <TZLabel time={now().subtract(2, 'day')} />;\n}",...MoreThanADayAgo.parameters?.docs?.source}}},MoreThanADayAgoWithPopover.parameters={...MoreThanADayAgoWithPopover.parameters,docs:{...MoreThanADayAgoWithPopover.parameters?.docs,source:{originalSource:"function MoreThanADayAgoWithPopover(): JSX.Element {\n  return <TZLabel time={now().subtract(2, 'day')} showPopover={false} />;\n}",...MoreThanADayAgoWithPopover.parameters?.docs?.source}}},WithMoreThanOne.parameters={...WithMoreThanOne.parameters,docs:{...WithMoreThanOne.parameters?.docs,source:{originalSource:"function WithMoreThanOne(): JSX.Element {\n  /**\n   * really exists as a regression test...\n   * each TZLabel was causing its own `<div id=\":rn:\" data-floating-ui-portal=\"\"></div>` to be added to the DOM\n   * with enough of these, the browser would slow down\n   * */\n\n  const [portalCount, setPortalCount] = useState(0);\n  useEffect(() => {\n    // Run this effect after the component has mounted\n    const count = document.querySelectorAll('[data-floating-ui-portal]').length;\n    setPortalCount(count);\n  }, []);\n  return <div className=\"flex flex-col gap-2\">\n            <h1>This is a regression test</h1>\n            <p>it checks we don't add a floating portal to the DOM for every TZLabel</p>\n            <LemonDivider />\n            <TZLabel time={now().subtract(0, 'day')} />\n            <TZLabel time={now().subtract(1, 'day')} />\n            <TZLabel time={now().subtract(2, 'day')} />\n            <LemonDivider />\n            <div className=\"flex flex-row gap-1\">\n                <span>there are</span>\n                {portalCount}\n                <span>floating-ui portals in the DOM</span>\n            </div>\n            <div>there should be 0!</div>\n        </div>;\n}",...WithMoreThanOne.parameters?.docs?.source}}};let __namedExportsOrder=["Recent","MoreThanADayAgo","MoreThanADayAgoWithPopover","WithMoreThanOne"]}}]);