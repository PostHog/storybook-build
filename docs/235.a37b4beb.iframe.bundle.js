(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{4361:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return normalizeColumnTitle}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),lib_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(713),lib_utils_responsiveUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(488);function normalizeColumnTitle(title){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{style:{whiteSpace:"nowrap"}},title)}var useIsTableScrolling=function useIsTableScrolling(scrollBreakpoint){var width=Object(lib_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_1__.a)().width,tableScrollBreakpoint=Object(lib_utils_responsiveUtils__WEBPACK_IMPORTED_MODULE_2__.b)(scrollBreakpoint),isTableScrolling=!!width&&width<=tableScrollBreakpoint;return{isTableScrolling:isTableScrolling,tableScrollBreakpoint:tableScrollBreakpoint,tableScrollX:isTableScrolling?"max-content":"".concat(tableScrollBreakpoint,"px")}};try{normalizeColumnTitle.displayName="normalizeColumnTitle",normalizeColumnTitle.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:normalizeColumnTitle.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(__react_docgen_typescript_loader_error){}try{useIsTableScrolling.displayName="useIsTableScrolling",useIsTableScrolling.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:useIsTableScrolling.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(__react_docgen_typescript_loader_error){}},4362:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return stringWithWBR}));__webpack_require__(186),__webpack_require__(350),__webpack_require__(82),__webpack_require__(255),__webpack_require__(187);var react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);function stringWithWBR(text){var splitAt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,addWBRAfter=[",",".","/","\\"],naturalSplit=[" ","-"],returnArray=[],final="",sinceSplit=0,i=0;return""===text?react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("i",null,"(empty string)"):(text.split("").forEach((function(letter){addWBRAfter.indexOf(letter)>=0||sinceSplit>=splitAt?(sinceSplit=0,final+=letter,returnArray.push(react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("span",{key:i++},final)),returnArray.push(react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("wbr",{key:i++})),final=""):naturalSplit.indexOf(letter)>=0?(sinceSplit=0,final+=letter):(sinceSplit+=1,final+=letter)})),final&&returnArray.push(react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("span",{key:i++},final)),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("span",null,returnArray))}},4369:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return experimentsLogic}));__webpack_require__(42),__webpack_require__(63),__webpack_require__(47),__webpack_require__(41),__webpack_require__(52);var regenerator=__webpack_require__(7),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(68),__webpack_require__(13)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),index_esm=__webpack_require__(1),api=(__webpack_require__(89),__webpack_require__(4),__webpack_require__(21)),constants=(__webpack_require__(24),__webpack_require__(23));var api_mock_api=api.a;constants.s.Admin,constants.s.Admin;var teamLogic=__webpack_require__(31),CheckCircleOutlined=__webpack_require__(454),react_toastify=__webpack_require__(71),react=__webpack_require__(0),react_default=__webpack_require__.n(react),experimentsLogic=Object(index_esm.kea)({path:["scenes","experiments","experimentsLogic"],connect:{values:[teamLogic.a,["currentTeamId"]]},actions:{},loaders:function loaders(_ref){var _deleteExperiment,_loadExperiments,values=_ref.values;return{experiments:[[],{loadExperiments:(_loadExperiments=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var response;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,api_mock_api.get("api/projects/".concat(values.currentTeamId,"/experiments"));case 2:return response=_context.sent,_context.abrupt("return",response.results);case 4:case"end":return _context.stop()}}),_callee)}))),function loadExperiments(){return _loadExperiments.apply(this,arguments)}),deleteExperiment:(_deleteExperiment=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(id){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,api_mock_api.delete("api/projects/".concat(values.currentTeamId,"/experiments/").concat(id));case 2:return Object(react_toastify.c)(react_default.a.createElement("div",null,react_default.a.createElement("h1",{className:"text-success"},react_default.a.createElement(CheckCircleOutlined.a,null)," Experiment removed"))),_context2.abrupt("return",values.experiments.filter((function(experiment){return experiment.id!==id})));case 4:case"end":return _context2.stop()}}),_callee2)}))),function deleteExperiment(_x){return _deleteExperiment.apply(this,arguments)})}]}},events:function events(_ref2){var actions=_ref2.actions;return{afterMount:function afterMount(){actions.loadExperiments()}}}})},4513:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Experiments",(function(){return Experiments}));__webpack_require__(225),__webpack_require__(235),__webpack_require__(42),__webpack_require__(64);var lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(296),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_experimentsLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4369),_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1863),kea__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1),_lib_components_LemonTable__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(351),_lib_components_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1244),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4361),scenes_urls__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(19),lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(4362),lib_components_Link__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(56),lib_components_LinkButton__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(338),dayjs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(155),dayjs__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_16__),antd__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(1241),scene={component:Experiments,logic:_experimentsLogic__WEBPACK_IMPORTED_MODULE_6__.a};function Experiments(){var _useValues=Object(kea__WEBPACK_IMPORTED_MODULE_8__.useValues)(_experimentsLogic__WEBPACK_IMPORTED_MODULE_6__.a),experiments=_useValues.experiments,experimentsLoading=_useValues.experimentsLoading,columns=[{title:Object(lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_11__.a)("Name"),dataIndex:"name",className:"ph-no-capture",sticky:!0,width:"40%",render:function Render(_,experiment){return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_5___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(lib_components_Link__WEBPACK_IMPORTED_MODULE_14__.a,{to:experiment.id?scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.experiment(experiment.id):void 0},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("h4",{className:"row-name"},Object(lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_13__.a)(experiment.name,17))),experiment.description&&react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("span",{className:"row-description"},experiment.description))}},Object(_lib_components_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_10__.b)(),Object(_lib_components_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_10__.a)(),{title:"Duration",render:function Render(_,experiment){var duration=experiment.end_date?dayjs__WEBPACK_IMPORTED_MODULE_16___default()(experiment.end_date).diff(dayjs__WEBPACK_IMPORTED_MODULE_16___default()(experiment.start_date),"day"):experiment.start_date?dayjs__WEBPACK_IMPORTED_MODULE_16___default()().diff(dayjs__WEBPACK_IMPORTED_MODULE_16___default()(experiment.start_date),"day"):void 0;return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",null,void 0!==duration?"".concat(duration," day").concat(duration>1?"s":""):"N.A")}},{title:"Status",render:function Render(_,experiment){var status=function status(){return experiment.start_date?experiment.end_date?"complete":"running":"draft"};return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_17__.a,{color:{running:"green",draft:"default",complete:"purple"}[status()],style:{fontWeight:600}},status().toUpperCase())}}];return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_4__.a,{title:"Experiments",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem"},buttons:react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(lib_components_LinkButton__WEBPACK_IMPORTED_MODULE_15__.a,{type:"primary","data-attr":"create-experiment",to:scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.experiment("new"),icon:react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__.a,null)},"New Experiment")}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_lib_components_LemonTable__WEBPACK_IMPORTED_MODULE_9__.a,{dataSource:experiments,columns:columns,rowKey:"id",loading:experimentsLoading,defaultSorting:{columnKey:"id",order:1},pagination:{pageSize:20},nouns:["Experiment","Experiments"],"data-attr":"experiment-table"}))}}}]);