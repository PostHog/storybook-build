var ze=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var oe=(l,t,e)=>t in l?ze(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,K=(l,t)=>{for(var e in t||(t={}))ae.call(t,e)&&oe(l,e,t[e]);if(Y)for(var e of Y(t))re.call(t,e)&&oe(l,e,t[e]);return l};var $=(l,t)=>{var e={};for(var o in l)ae.call(l,o)&&t.indexOf(o)<0&&(e[o]=l[o]);if(l!=null&&Y)for(var o of Y(l))t.indexOf(o)<0&&re.call(l,o)&&(e[o]=l[o]);return e};var H=(l,t,e)=>new Promise((o,i)=>{var v=u=>{try{b(e.next(u))}catch(p){i(p)}},S=u=>{try{b(e.throw(u))}catch(p){i(p)}},b=u=>u.done?o(u.value):Promise.resolve(u.value).then(v,S);b((e=e.apply(l,t)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[273],{"./frontend/src/lib/components/InlineMessage/InlineMessage.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return R});var o=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),i=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),v=e.n(i),S=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss"),b=e.n(S),u={};u.insert="head",u.singleton=!1;var p=v()(b.a,u),j=b.a.locals||{},O=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),_=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),B=e("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),x=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function R(a){let{children:m,style:F,icon:L=Object(x.jsx)(O.a,{}),type:r="info",closable:c,onClose:f}=a;const[y,N]=Object(o.useState)(!0),I=()=>{N(!1),f==null||f()};return Object(x.jsxs)("div",{className:Object(B.default)("inline-message",r,c&&"closable",!y&&"hidden"),style:F,children:[Object(x.jsx)("div",{className:"inline-icon",children:L}),Object(x.jsx)("div",{className:"inline-main",children:m}),c&&Object(x.jsx)("div",{className:"closable",onClick:I,children:Object(x.jsx)(_.a,{})})]})}try{R.displayName="InlineMessage",R.__docgenInfo={description:"",displayName:"InlineMessage",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:{value:"<ExclamationCircleFilled />"},description:"",name:"icon",required:!1,type:{name:"Element"}},type:{defaultValue:{value:"info"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"danger"'},{value:'"info"'},{value:'"warning"'}]}},closable:{defaultValue:null,description:"",name:"closable",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"]={docgenInfo:R.__docgenInfo,name:"InlineMessage",path:"frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"})}catch(a){}},"./frontend/src/lib/components/Table/utils.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return b});var o=e("./frontend/src/lib/hooks/useWindowSize.js"),i=e("./frontend/src/lib/utils/responsiveUtils.tsx"),v=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),S=e.n(v);function b(p){return Object(v.jsx)("span",{style:{whiteSpace:"nowrap"},children:p})}const u=p=>{const{width:j}=Object(o.a)(),O=Object(i.b)(p),_=!!j&&j<=O;return{isTableScrolling:_,tableScrollBreakpoint:O,tableScrollX:_?"max-content":`${O}px`}};try{b.displayName="normalizeColumnTitle",b.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:b.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(p){}try{u.displayName="useIsTableScrolling",u.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:u.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(p){}},"./frontend/src/scenes/groups/RelatedGroups.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return R});var o=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/lib/components/LemonTable/index.ts"),v=e("./frontend/src/models/groupsModel.ts"),S=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/icons/UserOutlined.js"),b=e.n(S),u=e("./frontend/src/lib/utils.tsx"),p=e("./frontend/src/scenes/persons/PersonHeader.tsx"),j=e("./frontend/src/lib/api.ts"),O=e("./frontend/src/scenes/teamLogic.tsx");const _=Object(o.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[O.a,["currentTeamId"]]},props:{},key:a=>{var m;return`${(m=a.groupTypeIndex)!==null&&m!==void 0?m:"person"}-${a.id}`},actions:()=>({loadRelatedActors:!0}),loaders:a=>{let{values:m,props:F}=a;return{relatedActors:[[],{loadRelatedActors:()=>H(this,null,function*(){const L=`api/projects/${m.currentTeamId}/groups/related?${Object(u.Gb)({group_type_index:F.groupTypeIndex,id:F.id})}`;return yield j.b.get(L)}),setGroup:()=>[]}]}},events:a=>{let{actions:m}=a;return{afterMount:m.loadRelatedActors}}});var B=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),x=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function R(a){let{groupTypeIndex:m,id:F}=a;const{relatedActors:L,relatedActorsLoading:r}=Object(o.useValues)(_({groupTypeIndex:m,id:F})),{aggregationLabel:c}=Object(o.useValues)(v.a),f=[{title:"Type",key:"type",render:function(N,I){return I.type==="group"?Object(x.jsx)(x.Fragment,{children:Object(u.i)(c(I.group_type_index).singular)}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.a,{})," Person"]})}},{title:"id",key:"id",render:function(N,I){return I.type=="group"?Object(x.jsx)(B.a,{actor:I}):Object(x.jsx)(p.a,{person:I,withIcon:!1})}}];return Object(x.jsx)(i.a,{dataSource:L,columns:f,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:r,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{R.displayName="RelatedGroups",R.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:R.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(a){}},"./frontend/src/scenes/persons/Person.tsx":function(l,t,e){"use strict";e.r(t),e.d(t,"scene",function(){return Re}),e.d(t,"Person",function(){return ne});var o=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),i=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/dropdown/index.js"),v=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/menu/index.js"),S=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tag/index.js"),b=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/DownOutlined.js"),u=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),p=e("./frontend/src/scenes/events/index.ts"),j=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),O=e("./frontend/src/scenes/persons/personsLogic.tsx"),_=e("./frontend/src/scenes/persons/PersonHeader.tsx"),B=e("./frontend/src/scenes/persons/Persons.scss"),x=e("./frontend/src/lib/components/CopyToClipboard.tsx"),R=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/modal/index.js"),a=e("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),m=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),F=e.n(m),L=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss"),r=e.n(L),c={};c.insert="head",c.singleton=!1;var f=F()(r.a,c),y=r.a.locals||{},N=e("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),I=e("./frontend/src/lib/api.ts"),E=e("./frontend/src/lib/components/lemonToast.tsx"),M=e("./frontend/src/lib/utils/eventUsageLogic.ts");const A=Object(j.kea)({props:{},key:n=>{var d;return(d=n.person.id)!==null&&d!==void 0?d:"new"},path:n=>["scenes","persons","mergeSplitPersonLogic",n],connect:()=>({actions:[Object(O.a)({syncWithUrl:!0}),["setListFilters","loadPersons","setPerson","setSplitMergeModalShown"]],values:[Object(O.a)({syncWithUrl:!0}),["persons"]]}),actions:{setSelectedPersonToAssignSplit:n=>({id:n}),cancel:!0},reducers:n=>{let{props:d}=n;return{person:[d.person,{}],selectedPersonsToAssignSplit:[null,{setSelectedPersonToAssignSplit:(T,P)=>{let{id:w}=P;return w}}]}},listeners:n=>{let{actions:d,values:T}=n;return{setListFilters:()=>{d.loadPersons()},cancel:()=>{T.executedLoading||d.setSplitMergeModalShown(!1)}}},loaders:n=>{let{values:d,actions:T}=n;return{executed:[!1,{execute:()=>H(this,null,function*(){return(yield I.b.create("api/person/"+d.person.id+"/split/",K({},d.selectedPersonsToAssignSplit?{main_distinct_id:d.selectedPersonsToAssignSplit}:{}))).success?(E.d.success("Person succesfully split. This may take up to a couple of minutes to complete."),M.e.actions.reportPersonSplit(d.person.distinct_ids.length),T.setSplitMergeModalShown(!1),N.router.actions.push("/persons"),!0):!1})}]}},events:n=>{let{actions:d}=n;return{afterMount:[d.loadPersons]}}});var Q=e("./frontend/src/lib/utils.tsx"),h=e("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx"),s=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function g(n){let{person:d}=n;const T={person:d},{executedLoading:P}=Object(j.useValues)(A(T)),{execute:w,cancel:z}=Object(j.useActions)(A(T));return Object(s.jsx)(R.a,{visible:!0,title:"Split persons",onCancel:z,className:"merge-split-person",okText:"Split persons",onOk:w,okButtonProps:{loading:P},cancelButtonProps:{disabled:P},children:d.distinct_ids.length<2?"Only persons with more than two distinct IDs can be split.":Object(s.jsx)(j.BindLogic,{logic:A,props:T,children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(C,{})})})})}function C(){const{person:n,executedLoading:d}=Object(j.useValues)(A),{setSelectedPersonToAssignSplit:T}=Object(j.useActions)(A);return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"This will split all Distinct IDs for this person into unique persons."}),Object(s.jsxs)("p",{children:["You can select a distinct ID for which all the current properties will be assigned (",Object(s.jsx)("i",{children:"optional"}),"). All other new users will start without any properties."]}),Object(s.jsx)(a.a,{allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Select a distinct ID to which to assign all properties (optional)",onChange:P=>T(P),filterOption:!1,disabled:d,children:n==null?void 0:n.distinct_ids.map(P=>Object(s.jsx)(a.a.Option,{value:P,children:P},P))}),Object(s.jsx)(h.a,{style:{marginTop:16},type:"danger",children:Object(s.jsxs)("div",{children:["This will create ",Object(s.jsx)("strong",{children:n.distinct_ids.length-1})," new"," ",Object(Q.tb)(n.distinct_ids.length,"person",void 0,!1),". This might change the numbers in your charts, even historically. Please be certain."]})})]}):null}try{g.displayName="MergeSplitPerson",g.__docgenInfo={description:"",displayName:"MergeSplitPerson",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"PersonType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"]={docgenInfo:g.__docgenInfo,name:"MergeSplitPerson",path:"frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"})}catch(n){}var J=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),le=e("./frontend/src/lib/components/LemonTable/index.ts"),X=e("./frontend/src/scenes/urls.ts"),de=e("./frontend/src/lib/components/Link.tsx");function ie(){const{cohorts:n,cohortsLoading:d,person:T}=Object(j.useValues)(O.a),{loadCohorts:P}=Object(j.useActions)(O.a);Object(J.useEffect)(()=>{P()},[T]);const w=[{title:"Name",dataIndex:"name",key:"name",className:"ph-no-capture",render:function(D,W){return Object(s.jsx)(de.a,{to:X.a.cohort(W.id),children:Object(s.jsx)("strong",{children:W.name})})},sorter:(z,D)=>(z.name||"").localeCompare(D.name||"")},{title:"Users in cohort",render:function(D){return D==null?void 0:D.toLocaleString()},dataIndex:"count",sorter:(z,D)=>(z.count||0)-(D.count||0)}];return Object(s.jsx)(le.a,{dataSource:n||[],loading:d,columns:w,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},emptyState:"This person doesn't belong to any cohort"})}var ce=e("./frontend/src/lib/components/PropertiesTable/index.ts"),ue=e("./frontend/src/lib/components/TZLabel/index.tsx"),q=e("./frontend/src/lib/components/Tooltip.tsx"),k=e("./frontend/src/types.ts"),pe=e("./frontend/src/lib/components/PageHeader.tsx"),me=e("./frontend/src/scenes/groups/RelatedGroups.tsx"),ge=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),je=e("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),fe=e("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),G=e("./frontend/@posthog/lemon-ui/src/index.ts"),be=e("./frontend/src/scenes/teamLogic.tsx"),he=e("./frontend/src/lib/components/AlertMessage/index.ts"),xe=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),ve=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),Oe=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),ye=e("./frontend/src/lib/components/NotFound/index.tsx"),Se=e("./frontend/src/scenes/persons/RelatedFeatureFlags.tsx"),Te=e("./frontend/src/queries/Query/Query.tsx"),ee=e("./frontend/src/queries/schema.ts"),Ie=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Pe=e("./frontend/src/lib/constants.tsx"),se=e("./frontend/src/scenes/persons/personDeleteModalLogic.tsx");const{TabPane:V}=o.a,Re={component:ne,logic:O.a,paramsToProps:n=>{let{params:{_:d}}=n;return{syncWithUrl:!0,urlId:decodeURIComponent(d)}}};function Me(n){let{person:d}=n;return Object(s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"IDs:"})," ",Object(s.jsx)(x.a,{tooltipMessage:null,description:"person distinct ID",style:{justifyContent:"flex-end"},children:d.distinct_ids[0]}),d.distinct_ids.length>1&&Object(s.jsx)(i.a,{overlay:Object(s.jsx)(v.a,{children:d.distinct_ids.slice(1).map(T=>Object(s.jsx)(v.a.Item,{children:Object(s.jsx)(x.a,{description:"person distinct ID",iconStyle:{color:"var(--primary)"},children:T})},T))}),trigger:["click"],children:Object(s.jsxs)(S.a,{className:"extra-ids",children:["+",d.distinct_ids.length-1,Object(s.jsx)(b.a,{})]})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"First seen:"})," ",d.created_at?Object(s.jsx)(ue.a,{time:d.created_at}):"unknown"]})]})}function ne(){const{person:n,personLoading:d,currentTab:T,splitMergeModalShown:P,urlId:w,distinctId:z}=Object(j.useValues)(O.a),{loadPersons:D,editProperty:W,deleteProperty:Ce,navigateToTab:_e,setSplitMergeModalShown:Le,setDistinctId:Ae}=Object(j.useActions)(O.a),{showPersonDeleteModal:Ee}=Object(j.useActions)(se.a),{deletedPersonLoading:te}=Object(j.useValues)(se.a),{groupsEnabled:Fe}=Object(j.useValues)(ge.b),{currentTeam:Z}=Object(j.useValues)(be.a),{featureFlags:Ne}=Object(j.useValues)(Ie.a),De=Ne[Pe.i.DATA_EXPLORATION_LIVE_EVENTS];return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(pe.a,{title:Object(_.b)(n),caption:Object(s.jsx)(Me,{person:n}),buttons:Object(s.jsxs)("div",{className:"flex gap-2",children:[Object(s.jsx)(G.LemonButton,{onClick:()=>Ee(n,()=>D()),disabled:te,loading:te,type:"secondary",status:"danger","data-attr":"delete-person",children:"Delete person"}),n.distinct_ids.length>1&&Object(s.jsx)(G.LemonButton,{onClick:()=>Le(!0),"data-attr":"merge-person-button",type:"secondary",children:"Split IDs"})]})}),Object(s.jsx)(xe.a,{}),Object(s.jsxs)(o.a,{activeKey:T,onChange:U=>{_e(U)},destroyInactiveTabPane:!0,"data-attr":"persons-tabs",children:[Object(s.jsx)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-properties-tab",children:"Properties"}),children:Object(s.jsx)(ce.a,{properties:n.properties||{},searchable:!0,onEdit:W,sortProperties:!0,embedded:!1,onDelete:U=>Ce(U)})},k.K.PROPERTIES),Object(s.jsx)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-events-tab",children:"Events"}),children:De?Object(s.jsx)(Te.a,{query:{kind:ee.a.DataTableNode,hiddenColumns:["person"],source:{kind:ee.a.EventsNode,personId:n.id},showReload:!0,showColumnConfigurator:!0,showExport:!0,showEventFilter:!0,showPropertyFilter:!0}}):Object(s.jsx)(p.b,{pageKey:n.distinct_ids.join("__"),fixedFilters:{person_id:n.id},showPersonColumn:!1,sceneUrl:X.a.person(w||n.distinct_ids[0]||String(n.id))})},k.K.EVENTS),Object(s.jsxs)(V,{tab:Object(s.jsx)("span",{"data-attr":"person-session-recordings-tab",children:"Recordings"}),children:[Z!=null&&Z.session_recording_opt_in?null:Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsxs)(he.a,{type:"info",children:["Session recordings are currently disabled for this project. To use this feature, please go to your ",Object(s.jsx)(G.Link,{to:`${X.a.projectSettings()}#recordings`,children:"project settings"})," and enable it."]})}),Object(s.jsx)(Oe.a,{personUUID:n.uuid,updateSearchParams:!0})]},k.K.SESSION_RECORDINGS),Object(s.jsx)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-cohorts-tab",children:"Cohorts"}),children:Object(s.jsx)(ie,{})},k.K.COHORTS),Fe&&n.uuid&&Object(s.jsx)(V,{tab:Object(s.jsxs)("span",{"data-attr":"persons-related-tab",children:["Related groups",Object(s.jsx)(q.a,{title:"People and groups that have shared events with this person in the last 90 days.",children:Object(s.jsx)(u.a,{style:{marginLeft:6,marginRight:0}})})]}),children:Object(s.jsx)(me.a,{id:n.uuid,groupTypeIndex:null})},k.K.RELATED),n.uuid&&Object(s.jsxs)(V,{tab:Object(s.jsx)("span",{"data-attr":"persons-related-flags-tab",children:"Feature flags"}),children:[Object(s.jsxs)("div",{className:"flex space-x-4 items-center mb-2",children:[Object(s.jsxs)("div",{children:["Choose ID:",Object(s.jsx)(q.a,{title:"Feature flags can have different values based on the persons IDs. Turn on persistence in feature flag settings if you'd like these to be constant always.",children:Object(s.jsx)(u.a,{style:{marginLeft:6,marginRight:0}})})]}),Object(s.jsx)(G.LemonSelect,{value:n.distinct_ids[0],onChange:U=>U&&Ae(U),options:n.distinct_ids.map(U=>({label:U,value:U})),"data-attr":"person-feature-flags-select"})]}),Object(s.jsx)(G.LemonDivider,{className:"mb-4"}),Object(s.jsx)(Se.b,{distinctId:z||n.distinct_ids[0]})]},k.K.FEATURE_FLAGS),Object(s.jsx)(V,{tab:"History",children:Object(s.jsx)(je.a,{scope:fe.a.PERSON,id:n.id,caption:Object(s.jsxs)("div",{children:[Object(s.jsx)(u.a,{style:{marginRight:".25rem"}}),Object(s.jsx)("span",{children:"This page only shows changes made by users in the PostHog site. Automatic changes from the API aren't shown here."})]})})},"history")]}),P&&n&&Object(s.jsx)(g,{person:n})]}):d?Object(s.jsx)(ve.b,{}):Object(s.jsx)(ye.a,{object:"Person"})}},"./frontend/src/scenes/persons/Persons.scss":function(l,t,e){"use strict";var o=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=e.n(o),v=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),S=e.n(v),b={};b.insert="head",b.singleton=!1;var u=i()(S.a,b),p=S.a.locals||{}},"./frontend/src/scenes/persons/RelatedFeatureFlags.tsx":function(l,t,e){"use strict";e.d(t,"a",function(){return m}),e.d(t,"b",function(){return L});var o=e("./frontend/@posthog/lemon-ui/src/index.ts"),i=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/lib/components/Table/utils.tsx"),S=e("./frontend/src/lib/utils.tsx"),b=e("./frontend/src/lib/utils/stringWithWBR.tsx"),u=e("./frontend/src/scenes/urls.ts"),p=e("./frontend/src/types.ts"),j=e("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),O=e("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),_=e("./frontend/src/lib/api.ts"),B=e("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),x=e("./frontend/src/scenes/teamLogic.tsx");const R=Object(i.kea)([Object(i.path)(["scenes","persons","relatedFeatureFlagsLogic"]),Object(i.connect)({values:[x.a,["currentTeamId"],B.b,["featureFlags"]]}),Object(i.props)({}),Object(i.key)(r=>`${r.distinctId}`),Object(i.actions)({setSearchTerm:r=>({searchTerm:r}),setFilters:(r,c)=>({filters:r,replace:c}),loadRelatedFeatureFlags:!0}),Object(O.loaders)(r=>{let{values:c,props:f}=r;return{relatedFeatureFlags:[null,{loadRelatedFeatureFlags:()=>H(this,null,function*(){return yield _.b.get(`api/projects/${c.currentTeamId}/feature_flags/evaluation_reasons?${Object(S.Gb)(K({distinct_id:f.distinctId},f.groups?{groups:f.groups}:{}))}`)})}]}}),Object(i.reducers)({searchTerm:["",{setSearchTerm:(r,c)=>{let{searchTerm:f}=c;return f}}],filters:[{},{setFilters:(r,c)=>{let{filters:f,replace:y}=c;return K(y?{}:K({},r),f)}}]}),Object(i.selectors)(()=>({mappedRelatedFeatureFlags:[r=>[r.relatedFeatureFlags,r.featureFlags],(r,c)=>r&&c?c.map(f=>K(K({},r[f.key]),f)):[]],filteredMappedFlags:[r=>[r.mappedRelatedFeatureFlags,r.searchTerm,r.filters],(r,c,f)=>{if(!c&&Object.keys(f).length===0)return r;let y=r;c&&(y=new j.a(r,{keys:["key","name"],threshold:.3}).search(c).map(M=>M.item));const{type:N,active:I,reason:E}=f;return N&&(y=y.filter(M=>N===p.u.Variants?M.filters.multivariate:!M.filters.multivariate)),I&&(y=y.filter(M=>I==="true"?M.active:!M.active)),E&&(y=y.filter(M=>E==="not matched"?M.evaluation.reason!==m.ConditionMatch:M.evaluation.reason===m.ConditionMatch)),y}]})),Object(i.events)(r=>{let{actions:c}=r;return{afterMount:c.loadRelatedFeatureFlags}})]);var a=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");let m;(function(r){r.ConditionMatch="condition_match",r.NoConditionMatch="no_condition_match",r.OutOfRolloutBound="out_of_rollout_bound",r.NoGroupType="no_group_type",r.Disabled="disabled"})(m||(m={}));const F={[m.ConditionMatch]:"Matches",[m.NoConditionMatch]:"Doesn't match any conditions",[m.OutOfRolloutBound]:"Out of rollout bound",[m.NoGroupType]:"Missing group type",[m.Disabled]:"Disabled"};function L(r){let{distinctId:c,groups:f}=r;const{filteredMappedFlags:y,relatedFeatureFlagsLoading:N,searchTerm:I,filters:E}=Object(i.useValues)(R({distinctId:c,groups:f})),{setSearchTerm:M,setFilters:A}=Object(i.useActions)(R({distinctId:c,groups:f})),Q=[{title:Object(v.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(h,s)=>(h.key||"").localeCompare(s.key||""),render:function(s,g){const C=(g.experiment_set||[]).length>0;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(o.Link,{to:g.id?u.a.featureFlag(g.id):void 0,className:"row-name",children:[Object(b.a)(g.key,17),Object(a.jsx)(o.LemonTag,{type:C?"purple":"default",className:"ml-2",children:C?"Experiment":"Feature flag"})]}),g.name&&Object(a.jsx)("span",{className:"row-description",children:g.name})]})}},{title:"Type",width:100,render:function(s,g){return g.filters.multivariate?p.u.Variants:p.u.ReleaseToggle}},{title:"Value",dataIndex:"value",width:150,render:function(s,g){return Object(a.jsx)("div",{style:{wordBreak:"break-word"},children:g.active?Object(S.i)(g.value.toString()):"--"})}},{title:"Match evaluation",dataIndex:"evaluation",width:150,render:function(s,g){var C;const J=g.evaluation.reason===m.ConditionMatch;return Object(a.jsxs)("div",{children:[g.active?Object(a.jsx)(a.Fragment,{children:F[g.evaluation.reason]}):"--",J&&Object(a.jsxs)("span",{className:"simple-tag ml-2",style:{background:"var(--primary-highlight)"},children:["Set ",((C=g.evaluation.condition_index)!==null&&C!==void 0?C:0)+1]})]})}},{title:"Status",dataIndex:"active",sorter:(h,s)=>Number(h.active)-Number(s.active),width:100,render:function(s,g){return Object(a.jsx)("span",{className:"font-normal",children:g.active?"Enabled":"Disabled"})}}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(a.jsx)(o.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:M,value:I}),Object(a.jsxs)("div",{className:"flex items-center gap-2",children:[Object(a.jsx)("span",{children:Object(a.jsx)("b",{children:"Type"})}),Object(a.jsx)(o.LemonSelect,{options:[{label:"All types",value:"all"},{label:p.u.ReleaseToggle,value:p.u.ReleaseToggle},{label:p.u.Variants,value:p.u.Variants}],onChange:h=>{if(h)if(h==="all"){if(E){const s=E,{type:g}=s,C=$(s,["type"]);A(C,!0)}}else A({type:h})},value:"all",dropdownMaxContentWidth:!0}),Object(a.jsx)("span",{className:"ml-2",children:Object(a.jsx)("b",{children:"Match evaluation"})}),Object(a.jsx)(o.LemonSelect,{options:[{label:"All",value:"all"},{label:"Matched",value:m.ConditionMatch},{label:"Not matched",value:"not matched"}],onChange:h=>{if(h)if(h==="all"){if(E){const s=E,{reason:g}=s,C=$(s,["reason"]);A(C,!0)}}else A({reason:h})},value:"all",dropdownMaxContentWidth:!0}),Object(a.jsx)("span",{className:"ml-2",children:Object(a.jsx)("b",{children:"Status"})}),Object(a.jsx)(o.LemonSelect,{onChange:h=>{if(h)if(h==="all"){if(E){const s=E,{active:g}=s,C=$(s,["active"]);A(C,!0)}}else A({active:h})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0})]})]}),Object(a.jsx)(o.LemonTable,{columns:Q,loading:N,dataSource:y})]})}try{L.displayName="RelatedFeatureFlags",L.__docgenInfo={description:"",displayName:"RelatedFeatureFlags",props:{distinctId:{defaultValue:null,description:"",name:"distinctId",required:!0,type:{name:"string"}},groups:{defaultValue:null,description:"",name:"groups",required:!1,type:{name:"{ [key: string]: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"]={docgenInfo:L.__docgenInfo,name:"RelatedFeatureFlags",path:"frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"})}catch(r){}},"./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js":function(l,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};t.default=o},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/icons/UserOutlined.js":function(l,t,e){"use strict";var o=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),i=e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var v=i(e("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/objectSpread2.js")),S=o(e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),b=i(e("./node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js")),u=i(e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/lib/components/AntdIcon.js")),p=function(_,B){return S.createElement(u.default,(0,v.default)((0,v.default)({},_),{},{ref:B,icon:b.default}))};p.displayName="UserOutlined";var j=S.forwardRef(p);t.default=j},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss":function(l,t,e){var o=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");t=o(!1),t.push([l.i,".inline-message{background-color:var(--bg-mid);border-radius:var(--radius);padding:.5rem 1rem;font-weight:var(--font-medium);display:flex;align-items:center;color:var(--primary-alt)}.inline-message.danger{background-color:var(--danger-highlight);color:var(--danger)}.inline-message.closable{padding-right:.5rem}.inline-message.hidden{display:none}.inline-message .inline-icon{margin-right:6px;display:flex;align-items:center}.inline-message .inline-main{flex-grow:1}.inline-message .closable{color:var(--muted);align-self:flex-start;padding-left:1rem;cursor:pointer}",""]),l.exports=t},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss":function(l,t,e){var o=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");t=o(!1),t.push([l.i,".merge-split-person .activity-header{background-color:var(--bg-mid);border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-left:-24px;margin-right:-24px;padding:8px 0;display:flex;justify-content:center;margin-bottom:1rem}.merge-split-person .ant-modal-header{border-bottom:0}.merge-split-person .ant-modal-body{padding-top:0}.merge-split-person .ant-radio-wrapper{margin-right:2px}.merge-split-person .ant-col{margin-right:1rem}.merge-split-person code{background-color:var(--bg-mid);color:var(--primary-alt);padding:4px 8px;border-radius:var(--radius)}",""]),l.exports=t},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(l,t,e){var o=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");t=o(!1),t.push([l.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),l.exports=t}}]);
