(window.webpackJsonp=window.webpackJsonp||[]).push([[242],{4512:function(module,exports,__webpack_require__){(exports=__webpack_require__(48)(!1)).push([module.i,'.events-definition-table{margin-top:1rem}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon{display:flex;align-items:center;justify-content:flex-start;width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted path{fill:var(--taxonomy-icon-muted)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{height:28px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified path{fill:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-style:italic;font-size:13px;color:var(--text-muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;cursor:default}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),module.exports=exports},4752:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return EventsVolumeTable_scene})),__webpack_require__.d(__webpack_exports__,"EventsVolumeTable",(function(){return EventsVolumeTable}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),es_alert=__webpack_require__(1252),skeleton=__webpack_require__(1248),logic=__webpack_require__(66),eventDefinitionsModel=__webpack_require__(448),UsageDisabledWarning=__webpack_require__(4270),VolumeTable=__webpack_require__(4440),DefinitionDrawer=__webpack_require__(4438),EventsTabs=__webpack_require__(1755),EventPageHeader=__webpack_require__(4250),featureFlagLogic=__webpack_require__(74),constants=__webpack_require__(18),toConsumableArray=(__webpack_require__(41),__webpack_require__(60),__webpack_require__(15)),toConsumableArray_default=__webpack_require__.n(toConsumableArray),objectDestructuringEmpty=__webpack_require__(121),objectDestructuringEmpty_default=__webpack_require__.n(objectDestructuringEmpty),injectStylesIntoStyleTag=__webpack_require__(20),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),EventDefinitionsTable=__webpack_require__(4512),EventDefinitionsTable_default=__webpack_require__.n(EventDefinitionsTable),options={insert:"head",singleton:!1},LemonTable=(injectStylesIntoStyleTag_default()(EventDefinitionsTable_default.a,options),EventDefinitionsTable_default.a.locals,__webpack_require__(244)),eventDefinitionsTableLogic=__webpack_require__(388),ObjectTags=__webpack_require__(347),organizationLogic=__webpack_require__(118),DefinitionHeader=__webpack_require__(886),utils=__webpack_require__(10);function EventDefinitionProperties(_ref){var _eventPropertiesCache,_eventPropertiesCache2,_eventPropertiesCache3,_eventPropertiesCache4,_eventPropertiesCache5,_eventPropertiesCache6,_eventPropertiesCache7,_eventPropertiesCache8,definition=_ref.definition,loadPropertiesForEvent=Object(index_esm.useActions)(eventDefinitionsTableLogic.d).loadPropertiesForEvent,_useValues=Object(index_esm.useValues)(eventDefinitionsTableLogic.d),eventPropertiesCacheMap=_useValues.eventPropertiesCacheMap,eventPropertiesCacheMapLoading=_useValues.eventPropertiesCacheMapLoading,_useValues2=Object(index_esm.useValues)(organizationLogic.a),hasDashboardCollaboration=_useValues2.hasDashboardCollaboration,hasIngestionTaxonomy=_useValues2.hasIngestionTaxonomy;Object(react.useEffect)((function(){loadPropertiesForEvent(definition)}),[]);var columns=[{title:"Property",key:"property",className:"definition-column-name",render:function Render(_,_definition){return react_default.a.createElement(DefinitionHeader.b,{definition:_definition,event:definition,hideIcon:!0,hideView:!0})}},{title:"Type",key:"type",className:"definition-column-type",render:function Render(_,_definition){return _definition.property_type?react_default.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},_definition.property_type):react_default.a.createElement("span",{className:"text-muted"},"—")}}].concat(toConsumableArray_default()(hasDashboardCollaboration?[{title:"Tags",key:"tags",render:function Render(_,_definition){var _definition$tags;return react_default.a.createElement(ObjectTags.a,{tags:null!==(_definition$tags=_definition.tags)&&void 0!==_definition$tags?_definition$tags:[],staticOnly:!0})}}]:[]),toConsumableArray_default()(hasIngestionTaxonomy?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function Render(_,_definition){return _definition.query_usage_30_day?Object(utils.M)(_definition.query_usage_30_day):react_default.a.createElement("span",{className:"text-muted"},"—")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function Render(_,_definition){return _definition.example?react_default.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},_definition.example):react_default.a.createElement("span",{className:"text-muted"},"—")}}]);return react_default.a.createElement("div",{className:"event-properties-wrapper"},react_default.a.createElement("span",{className:"event-properties-header"},"Top properties"),react_default.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),react_default.a.createElement(LemonTable.a,{id:"event-properties-definition-table-".concat(definition.id),columns:columns,className:"event-properties-definition-table-".concat(definition.id),dataSource:null!==(_eventPropertiesCache=null==eventPropertiesCacheMap||null===(_eventPropertiesCache2=eventPropertiesCacheMap[definition.id])||void 0===_eventPropertiesCache2?void 0:_eventPropertiesCache2.results)&&void 0!==_eventPropertiesCache?_eventPropertiesCache:[],emptyState:"This event has no properties",nouns:["definition","definitions"],pagination:{controlled:!0,pageSize:eventDefinitionsTableLogic.b,currentPage:null!==(_eventPropertiesCache3=null==eventPropertiesCacheMap||null===(_eventPropertiesCache4=eventPropertiesCacheMap[definition.id])||void 0===_eventPropertiesCache4?void 0:_eventPropertiesCache4.page)&&void 0!==_eventPropertiesCache3?_eventPropertiesCache3:1,entryCount:null!==(_eventPropertiesCache5=null==eventPropertiesCacheMap||null===(_eventPropertiesCache6=eventPropertiesCacheMap[definition.id])||void 0===_eventPropertiesCache6?void 0:_eventPropertiesCache6.count)&&void 0!==_eventPropertiesCache5?_eventPropertiesCache5:0,onForward:(null==eventPropertiesCacheMap||null===(_eventPropertiesCache7=eventPropertiesCacheMap[definition.id])||void 0===_eventPropertiesCache7?void 0:_eventPropertiesCache7.next)?function(){loadPropertiesForEvent(definition,eventPropertiesCacheMap[definition.id].next)}:void 0,onBackward:(null==eventPropertiesCacheMap||null===(_eventPropertiesCache8=eventPropertiesCacheMap[definition.id])||void 0===_eventPropertiesCache8?void 0:_eventPropertiesCache8.previous)?function(){loadPropertiesForEvent(definition,eventPropertiesCacheMap[definition.id].previous)}:void 0},loading:eventPropertiesCacheMapLoading}))}try{EventDefinitionProperties.displayName="EventDefinitionProperties",EventDefinitionProperties.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:EventDefinitionProperties.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(__react_docgen_typescript_loader_error){}eventDefinitionsTableLogic.d;function EventDefinitionsTable_EventDefinitionsTable(){var _eventDefinitions$pag,_eventDefinitions$cou,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};objectDestructuringEmpty_default()(_ref);var _useValues=Object(index_esm.useValues)(eventDefinitionsTableLogic.d),eventDefinitions=_useValues.eventDefinitions,eventDefinitionsLoading=_useValues.eventDefinitionsLoading,_useActions=Object(index_esm.useActions)(eventDefinitionsTableLogic.d),loadEventDefinitions=_useActions.loadEventDefinitions,_useValues2=Object(index_esm.useValues)(organizationLogic.a),hasDashboardCollaboration=_useValues2.hasDashboardCollaboration,hasIngestionTaxonomy=_useValues2.hasIngestionTaxonomy,columns=[{title:"Name",key:"name",className:"definition-column-name",render:function Render(_,definition){return react_default.a.createElement(DefinitionHeader.a,{definition:definition,hideView:!0})},sorter:function sorter(a,b){return a.name.localeCompare(b.name)}}].concat(toConsumableArray_default()(hasDashboardCollaboration?[{title:"Tags",key:"tags",render:function Render(_,definition){var _definition$tags;return react_default.a.createElement(ObjectTags.a,{tags:null!==(_definition$tags=definition.tags)&&void 0!==_definition$tags?_definition$tags:[],staticOnly:!0})}}]:[]),toConsumableArray_default()(hasIngestionTaxonomy?[{title:"30 day volume",key:"volume_30_day",align:"right",render:function Render(_,definition){return definition.volume_30_day?Object(utils.M)(definition.volume_30_day):react_default.a.createElement("span",{className:"text-muted"},"—")}},{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function Render(_,definition){return definition.query_usage_30_day?Object(utils.M)(definition.query_usage_30_day):react_default.a.createElement("span",{className:"text-muted"},"—")}}]:[]));return react_default.a.createElement(LemonTable.a,{columns:columns,className:"events-definition-table","data-attr":"events-definition-table",loading:eventDefinitionsLoading,rowKey:"id",pagination:{controlled:!0,currentPage:null!==(_eventDefinitions$pag=null==eventDefinitions?void 0:eventDefinitions.page)&&void 0!==_eventDefinitions$pag?_eventDefinitions$pag:1,entryCount:null!==(_eventDefinitions$cou=null==eventDefinitions?void 0:eventDefinitions.count)&&void 0!==_eventDefinitions$cou?_eventDefinitions$cou:0,pageSize:eventDefinitionsTableLogic.a,onForward:eventDefinitions.next?function(){loadEventDefinitions(eventDefinitions.next),window.scrollTo(0,0)}:void 0,onBackward:eventDefinitions.previous?function(){loadEventDefinitions(eventDefinitions.previous),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function RenderPropertiesTable(definition){return react_default.a.createElement(EventDefinitionProperties,{definition:definition})},noIndent:!0},dataSource:eventDefinitions.results,emptyState:"No event definitions",nouns:["definition","definitions"]})}try{EventDefinitionsTable_EventDefinitionsTable.displayName="EventDefinitionsTable",EventDefinitionsTable_EventDefinitionsTable.__docgenInfo={description:"",displayName:"EventDefinitionsTable",props:{compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx#EventDefinitionsTable"]={docgenInfo:EventDefinitionsTable_EventDefinitionsTable.__docgenInfo,name:"EventDefinitionsTable",path:"frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx#EventDefinitionsTable"})}catch(__react_docgen_typescript_loader_error){}var EventsVolumeTable_scene={component:EventsVolumeTable,logic:eventDefinitionsModel.a};function EventsVolumeTable(){var preflight=Object(index_esm.useValues)(logic.a).preflight,_useValues2=Object(index_esm.useValues)(eventDefinitionsModel.a),eventDefinitions=_useValues2.eventDefinitions,loaded=_useValues2.loaded,featureFlags=Object(index_esm.useValues)(featureFlagLogic.a).featureFlags;return react_default.a.createElement("div",{"data-attr":"manage-events-table"},react_default.a.createElement(EventPageHeader.a,{activeTab:EventsTabs.a.EventStats}),loaded?react_default.a.createElement(react_default.a.Fragment,null,preflight&&!(null==preflight?void 0:preflight.is_event_property_usage_enabled)?react_default.a.createElement(UsageDisabledWarning.a,{tab:"Events Stats"}):(0===eventDefinitions.length||null===eventDefinitions[0].volume_30_day)&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(es_alert.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later."})),featureFlags[constants.o.COLLABORATIONS_TAXONOMY]?react_default.a.createElement(EventDefinitionsTable_EventDefinitionsTable,null):react_default.a.createElement(VolumeTable.a,{data:eventDefinitions,type:"event"})):react_default.a.createElement(skeleton.a,{active:!0,paragraph:{rows:5}}),!featureFlags[constants.o.COLLABORATIONS_TAXONOMY]&&react_default.a.createElement(DefinitionDrawer.a,null))}}}]);