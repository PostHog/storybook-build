(window.webpackJsonp=window.webpackJsonp||[]).push([[238,244],{"./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx":function(S,c,e){"use strict";e.r(c),e.d(c,"scene",function(){return ee}),e.d(c,"EventDefinitionsTable",function(){return k});var B=e("./node_modules/core-js/modules/es.array.concat.js"),l=e("./node_modules/core-js/modules/es.function.name.js"),D=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),T=e.n(D),H=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Y=e.n(H),N=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),V=e.n(N),_={};_.insert="head",_.singleton=!1;var Z=Y()(V.a,_),w=V.a.locals||{},h=e("./node_modules/react/index.js"),t=e.n(h),v=e("./node_modules/kea/lib/index.esm.js"),W=e("./frontend/src/lib/components/LemonTable/index.ts"),m=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),K=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),P=e("./frontend/src/scenes/organizationLogic.tsx"),O=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),f=e("./frontend/src/lib/utils.tsx"),J=e("./node_modules/core-js/modules/es.array.includes.js"),U=e("./node_modules/core-js/modules/es.string.includes.js"),X=e("./frontend/src/lib/components/LemonButton/More.tsx"),G=e("./frontend/src/lib/components/LemonButton/index.ts"),F=e("./frontend/src/scenes/urls.ts"),q=e("./node_modules/kea-router/lib/index.js");function $(p){var g,y,s,L,E,b,x,C,a=p.definition,j=Object(v.useActions)(m.d),R=j.loadPropertiesForEvent,Q=j.setLocalPropertyDefinition,z=Object(v.useValues)(m.d),n=z.eventPropertiesCacheMap,o=z.eventDefinitionPropertiesLoading,i=Object(v.useValues)(P.a),r=i.hasDashboardCollaboration,u=i.hasIngestionTaxonomy;Object(h.useEffect)(function(){R(a)},[]);var ne=[{title:"Property",key:"property",className:"definition-column-name",render:function(I,d){return t.a.createElement(O.b,{definition:d,event:a,hideIcon:!0,openDetailInNewTab:!1,updateRemoteItem:function(te){Q(a,te)}})}},{title:"Type",key:"type",className:"definition-column-type",render:function(I,d){return d.property_type?t.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},d.property_type):t.a.createElement("span",{className:"text-muted"},"\u2014")}}].concat(T()(r?[{title:"Tags",key:"tags",render:function(I,d){var A;return t.a.createElement(K.a,{tags:(A=d.tags)!==null&&A!==void 0?A:[],staticOnly:!0})}}]:[]),T()(u?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(I,d){return d.query_usage_30_day?Object(f.O)(d.query_usage_30_day):t.a.createElement("span",{className:"text-muted"},"\u2014")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(I,d){return d.example?t.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},d.example):t.a.createElement("span",{className:"text-muted"},"\u2014")}},{key:"actions",width:0,render:function(I,d){return t.a.createElement(X.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(G.a,{type:"stealth",onClick:function(){q.router.actions.push(F.a.eventPropertyDefinition(d.id))},fullWidth:!0,"data-attr":"event-properties-definition-property-detail"},"Show property in list"))})}}]);return t.a.createElement("div",{className:"event-properties-wrapper"},t.a.createElement("span",{className:"event-properties-header"},"Top properties"),t.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),t.a.createElement(W.a,{id:"event-properties-definition-table-".concat(a.id),"data-attr":"event-properties-definition-nested-table",columns:ne,className:"event-properties-definition-table-".concat(a.id),dataSource:(g=n==null||(y=n[a.id])===null||y===void 0?void 0:y.results)!==null&&g!==void 0?g:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:m.b,currentPage:(s=n==null||(L=n[a.id])===null||L===void 0?void 0:L.page)!==null&&s!==void 0?s:1,entryCount:(E=n==null||(b=n[a.id])===null||b===void 0?void 0:b.count)!==null&&E!==void 0?E:0,onForward:!(n==null||(x=n[a.id])===null||x===void 0)&&x.next?function(){R(a,n[a.id].next)}:void 0,onBackward:!(n==null||(C=n[a.id])===null||C===void 0)&&C.previous?function(){R(a,n[a.id].previous)}:void 0},loading:o.includes(a.id)}))}try{$.displayName="EventDefinitionProperties",$.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:$.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(p){}var ee={component:k,logic:m.d,paramsToProps:function(){return{syncWithUrl:!0}}};function k(){var p,g,y=Object(v.useValues)(m.d),s=y.eventDefinitions,L=y.eventDefinitionsLoading,E=y.openedDefinitionId,b=Object(v.useActions)(m.d),x=b.loadEventDefinitions,C=b.setOpenedDefinition,a=b.setLocalEventDefinition,j=Object(v.useValues)(P.a),R=j.hasDashboardCollaboration,Q=j.hasIngestionTaxonomy,z=[{key:"icon",className:"definition-column-icon",render:function(o,i){return t.a.createElement(O.a,{definition:i,hideView:!0,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(o,i){return t.a.createElement(O.a,{definition:i,hideView:!0,hideIcon:!0,updateRemoteItem:function(u){return a(u)}})},sorter:function(o,i){return o.name.localeCompare(i.name)}}].concat(T()(R?[{title:"Tags",key:"tags",render:function(o,i){var r;return t.a.createElement(K.a,{tags:(r=i.tags)!==null&&r!==void 0?r:[],staticOnly:!0})}}]:[]),T()(Q?[{title:"30 day volume",key:"volume_30_day",align:"right",render:function(o,i){return i.volume_30_day?Object(f.O)(i.volume_30_day):t.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(o,i){var r,u;return((r=o==null?void 0:o.volume_30_day)!==null&&r!==void 0?r:0)-((u=i==null?void 0:i.volume_30_day)!==null&&u!==void 0?u:0)}},{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(o,i){return i.query_usage_30_day?Object(f.O)(i.query_usage_30_day):t.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(o,i){var r,u;return((r=o==null?void 0:o.query_usage_30_day)!==null&&r!==void 0?r:0)-((u=i==null?void 0:i.query_usage_30_day)!==null&&u!==void 0?u:0)}}]:[]));return t.a.createElement(W.a,{columns:z,className:"events-definition-table","data-attr":"events-definition-table",loading:L,rowKey:"id",rowStatus:function(o){return o.id===E?"highlighted":void 0},pagination:{controlled:!0,currentPage:(p=s==null?void 0:s.page)!==null&&p!==void 0?p:1,entryCount:(g=s==null?void 0:s.count)!==null&&g!==void 0?g:0,pageSize:m.a,onForward:s.next?function(){x(s.next)}:void 0,onBackward:s.previous?function(){x(s.previous)}:void 0},expandable:{expandedRowRender:function(o){return t.a.createElement($,{definition:o})},noIndent:!0,isRowExpanded:function(o){return o.id===E?!0:-1},onRowCollapse:function(o){return o.id===E&&C(null)}},dataSource:s.results,emptyState:"No event definitions",nouns:["event","events"]})}},"./frontend/src/scenes/events/EventsVolumeTable.tsx":function(S,c,e){"use strict";e.r(c),e.d(c,"scene",function(){return K}),e.d(c,"EventsVolumeTable",function(){return P});var B=e("./node_modules/react/index.js"),l=e.n(B),D=e("./node_modules/kea/lib/index.esm.js"),T=e("./node_modules/antd/es/alert/index.js"),H=e("./node_modules/antd/es/skeleton/index.js"),Y=e("./frontend/src/scenes/PreflightCheck/logic.tsx"),N=e("./frontend/src/models/eventDefinitionsModel.ts"),V=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),_=e("./frontend/src/scenes/events/VolumeTable.tsx"),Z=e("./frontend/src/scenes/events/definitions/DefinitionDrawer.tsx"),w=e("./frontend/src/lib/logic/featureFlagLogic.ts"),h=e("./frontend/src/lib/constants.tsx"),t=e("./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx"),v=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),W=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),m=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),K={component:P,logic:N.a};function P(){var O=Object(D.useValues)(Y.a),f=O.preflight,J=Object(D.useValues)(N.a),U=J.eventDefinitions,X=J.loaded,G=Object(D.useValues)(w.a),F=G.featureFlags;return l.a.createElement("div",{"data-attr":"manage-events-table"},l.a.createElement(m.a,{activeTab:W.b.EventDefinitions}),X?l.a.createElement(l.a.Fragment,null,f&&!(f!=null&&f.is_event_property_usage_enabled)?l.a.createElement(V.a,{tab:"Events Stats"}):(U.length===0||U[0].volume_30_day===null)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later.",style:{marginBottom:"1rem"}})),F[h.o.COLLABORATIONS_TAXONOMY]?l.a.createElement(D.BindLogic,{logic:v.d,props:{}},l.a.createElement(t.EventDefinitionsTable,null)):l.a.createElement(_.a,{data:U,type:"event"})):l.a.createElement(H.a,{active:!0,paragraph:{rows:5}}),!F[h.o.COLLABORATIONS_TAXONOMY]&&l.a.createElement(Z.a,null))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(S,c,e){var B=e("./node_modules/css-loader/dist/runtime/api.js");c=B(!1),c.push([S.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:flex-start}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted path{fill:var(--taxonomy-icon-muted)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{height:28px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified path{fill:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified:not(.taxonomy-icon-ph){margin-bottom:-4px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--text-muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),S.exports=c}}]);
