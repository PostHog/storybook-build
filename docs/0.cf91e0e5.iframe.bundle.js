(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/ExportButton/exporterLogic.ts":function(Le,A,e){"use strict";e.d(A,"a",function(){return We}),e.d(A,"b",function(){return z});var q=e("./node_modules/core-js/modules/es.object.keys.js"),Pe=e.n(q),ue=e("./node_modules/core-js/modules/es.symbol.js"),be=e.n(ue),ee=e("./node_modules/core-js/modules/es.array.filter.js"),me=e.n(ee),se=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),$=e.n(se),ve=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),pe=e.n(ve),K=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),H=e.n(K),C=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),R=e.n(C),xe=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),F=e.n(xe),fe=e("./node_modules/@babel/runtime/regenerator/index.js"),J=e.n(fe),t=e("./node_modules/core-js/modules/es.array.concat.js"),W=e.n(t),Ce=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(Ce),N=e("./node_modules/core-js/modules/es.promise.js"),Te=e.n(N),ae=e("./node_modules/core-js/modules/es.array.iterator.js"),Ve=e.n(ae),le=e("./node_modules/core-js/modules/es.string.iterator.js"),_e=e.n(le),I=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Ue=e.n(I),Ee=e("./node_modules/core-js/modules/web.url.js"),j=e.n(Ee),i=e("./node_modules/core-js/modules/web.url-search-params.js"),b=e.n(i),_=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/lib/api.ts"),te=e("./frontend/src/lib/utils.tsx"),Me=e("./node_modules/posthog-js/dist/es.js"),ie=e("./frontend/src/lib/components/lemonToast.tsx");function Se(g,x){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(g);x&&(T=T.filter(function(ne){return Object.getOwnPropertyDescriptor(g,ne).enumerable})),O.push.apply(O,T)}return O}function je(g){for(var x=1;x<arguments.length;x++){var O=arguments[x]!=null?arguments[x]:{};x%2?Se(Object(O),!0).forEach(function(T){R()(g,T,O[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):Se(Object(O)).forEach(function(T){Object.defineProperty(g,T,Object.getOwnPropertyDescriptor(O,T))})}return g}var Re=1e3,X=10,We;(function(g){g.PNG="image/png",g.CSV="text/csv",g.PDF="application/pdf"})(We||(We={}));function Fe(g){return Ie.apply(this,arguments)}function Ie(){return Ie=F()(J.a.mark(function g(x){var O,T,ne,Be,c;return J.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return O=L.b.exports.determineExportUrl(x.id),r.next=3,L.b.getRaw(O);case 3:return T=r.sent,r.next=6,T.blob();case 6:ne=r.sent,Be=window.URL.createObjectURL(ne),c=document.createElement("a"),c.style.display="none",c.href=Be,c.download=x.filename,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(Be);case 15:case"end":return r.stop()}},g)})),Ie.apply(this,arguments)}var z=Object(_.kea)([Object(_.path)(["lib","components","ExportButton","ExporterLogic"]),Object(_.props)({}),Object(_.key)(function(g){var x=g.dashboardId,O=g.insightId;return"dash:".concat(x,"::insight:").concat(O)}),Object(_.actions)({exportItem:function(x,O,T,ne){return{exportFormat:x,exportContext:O,exportParams:T,successCallback:ne}},exportItemSuccess:!0,exportItemFailure:!0}),Object(_.reducers)({exportInProgress:[!1,{exportItem:function(){return!0},exportItemSuccess:function(){return!1},exportItemFailure:function(){return!1}}]}),Object(_.listeners)(function(g){var x=g.actions,O=g.props;return{exportItem:function(){var T=F()(J.a.mark(function Be(c){var n,r,a,v,l;return J.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=c.exportFormat,r=c.exportContext,a=c.exportParams,v=c.successCallback,l=new Promise(function(){var f=F()(J.a.mark(function ce(Q,ge){var ye,De,re,Z;return J.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return ye={export_format:n,dashboard:O.dashboardId,insight:O.insightId,total_time_ms:0},De=performance.now(),m.prev=2,m.next=5,L.b.exports.create(je({export_format:n,dashboard:O.dashboardId,insight:O.insightId},r||{}),a);case 5:if(re=m.sent,re.id){m.next=9;break}return ge("Missing export_id from response"),m.abrupt("return");case 9:Z=0;case 10:if(!(Z<X)){m.next=28;break}if(Z++,!re.has_content){m.next=21;break}return x.exportItemSuccess(),v==null||v(),m.next=17,Fe(re);case 17:return ye.total_time_ms=performance.now()-De,Me.a.capture("export succeeded",ye),Q("Export complete"),m.abrupt("return");case 21:return m.next=23,Object(te.w)(Re);case 23:return m.next=25,L.b.exports.get(re.id);case 25:re=m.sent,m.next=10;break;case 28:ge("Content not loaded in time..."),m.next=37;break;case 31:m.prev=31,m.t0=m.catch(2),x.exportItemFailure(),ye.total_time_ms=performance.now()-De,Me.a.capture("export failed",ye),ge("Export failed: ".concat(JSON.stringify(m.t0)));case 37:case"end":return m.stop()}},ce,null,[[2,31]])}));return function(ce,Q){return f.apply(this,arguments)}}()),u.next=4,ie.d.promise(l,{pending:"Export started...",success:"Export complete!",error:"Export failed!"});case 4:case"end":return u.stop()}},Be)}));function ne(Be){return T.apply(this,arguments)}return ne}()}})])},"./frontend/src/lib/components/RestrictedArea.tsx":function(Le,A,e){"use strict";e.d(A,"b",function(){return K}),e.d(A,"a",function(){return H});var q=e("./node_modules/core-js/modules/es.array.concat.js"),Pe=e.n(q),ue=e("./node_modules/kea/lib/index.esm.js"),be=e("./node_modules/react/index.js"),ee=e.n(be),me=e("./frontend/src/scenes/organizationLogic.tsx"),se=e("./frontend/src/lib/constants.tsx"),$=e("./frontend/src/lib/components/Tooltip.tsx"),ve=e("./frontend/src/lib/utils/permissioning.ts"),pe=e("./frontend/src/scenes/teamLogic.tsx"),K;(function(C){C.Organization="organization",C.Project="project"})(K||(K={}));function H(C){var R=C.Component,xe=C.minimumAccessLevel,F=C.scope,fe=F===void 0?K.Organization:F,J=Object(ue.useValues)(me.a),t=J.currentOrganization,W=Object(ue.useValues)(pe.a),Ce=W.currentTeam,G=Object(be.useMemo)(function(){var N;if(fe===K.Project){if(!Ce)return"Loading current project\u2026";N=Ce.effective_membership_level}else{if(!t)return"Loading current organization\u2026";N=t.membership_level}return N===null?"You don't have access to the current ".concat(fe,"."):N<xe?xe===se.m.Owner?"This area is restricted to the ".concat(fe," owner."):"This area is restricted to ".concat(fe," ").concat(ve.b.get(xe),"s and up. Your level is ").concat(ve.b.get(N),"."):null},[t]);return G?ee.a.createElement($.a,{title:G,placement:"topLeft",delayMs:0},ee.a.createElement("span",null,ee.a.createElement(R,{isRestricted:!0,restrictionReason:G}))):ee.a.createElement(R,{isRestricted:!1,restrictionReason:null})}try{H.displayName="RestrictedArea",H.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:H.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(C){}try{K.Organization.displayName="RestrictionScope.Organization",K.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:K.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(C){}try{K.Project.displayName="RestrictionScope.Project",K.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:K.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(C){}},"./frontend/src/scenes/actions/EventName.tsx":function(Le,A,e){"use strict";e.d(A,"a",function(){return me}),e.d(A,"b",function(){return se});var q=e("./node_modules/react/index.js"),Pe=e.n(q),ue=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),be=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),ee=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function me($){var ve=$.value,pe=$.onChange;return Pe.a.createElement(be.d,{groupType:ee.a.Events,onChange:pe,value:ve,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(H){return Pe.a.createElement(ue.a,{value:H,disablePopover:!0})},allowClear:!0})}function se($){var ve=$.value,pe=$.onChange;return Pe.a.createElement(be.b,{groupType:ee.a.Events,onChange:pe,value:ve,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(H){return Pe.a.createElement(ue.a,{value:H,disablePopover:!0})},allowClear:!0})}try{me.displayName="EventName",me.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:me.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch($){}try{se.displayName="LemonEventName",se.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:se.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch($){}},"./frontend/src/scenes/events/EventDetails.tsx":function(Le,A,e){"use strict";e.d(A,"a",function(){return Ee});var q=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Pe=e.n(q),ue=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),be=e.n(ue),ee=e("./node_modules/core-js/modules/es.object.keys.js"),me=e("./node_modules/core-js/modules/es.symbol.js"),se=e("./node_modules/core-js/modules/es.array.filter.js"),$=e("./node_modules/core-js/modules/es.object.to-string.js"),ve=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),pe=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),K=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),H=e("./node_modules/react/index.js"),C=e.n(H),R=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),xe=e("./frontend/src/lib/components/PropertiesTable.tsx"),F=e("./frontend/src/scenes/events/EventElements.tsx"),fe=e("./node_modules/antd/es/tabs/index.js"),J=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(J),W=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),Ce=e("./frontend/src/lib/utils.tsx"),G=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function N(j,i){var b=Object.keys(j);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(j);i&&(_=_.filter(function(L){return Object.getOwnPropertyDescriptor(j,L).enumerable})),b.push.apply(b,_)}return b}function Te(j){for(var i=1;i<arguments.length;i++){var b=arguments[i]!=null?arguments[i]:{};i%2?N(Object(b),!0).forEach(function(_){Pe()(j,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(b)):N(Object(b)).forEach(function(_){Object.defineProperty(j,_,Object.getOwnPropertyDescriptor(b,_))})}return j}function ae(j){var i=j.event,b=i.event,_=i.id,L=i.uuid,te=i.distinct_id,Me=i.properties,ie=i.elements,Se=i.timestamp,je=i.person,Re=t()(i,G),X=Te(Te(Te(Te({},_?{id:_}:null),L?{uuid:L}:null),{},{timestamp:Se,event:b,distinct_id:te,properties:Object(Ce.yb)(Me)},ie&&ie.length>0?{elements:ie}:null),Re);return C.a.createElement(W.a,{language:W.b.JSON},JSON.stringify(X,null,4))}try{ae.displayName="EventJSON",ae.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:ae.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(j){}var Ve=e("./frontend/src/lib/dayjs.ts"),le=e("./frontend/src/lib/components/LemonButton/index.ts");function _e(j,i){var b=Object.keys(j);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(j);i&&(_=_.filter(function(L){return Object.getOwnPropertyDescriptor(j,L).enumerable})),b.push.apply(b,_)}return b}function I(j){for(var i=1;i<arguments.length;i++){var b=arguments[i]!=null?arguments[i]:{};i%2?_e(Object(b),!0).forEach(function(_){Pe()(j,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(b)):_e(Object(b)).forEach(function(_){Object.defineProperty(j,_,Object.getOwnPropertyDescriptor(b,_))})}return j}var Ue=fe.a.TabPane;function Ee(j){for(var i=j.event,b=Object(H.useState)(!1),_=be()(b,2),L=_[0],te=_[1],Me={},ie={},Se=0,je=0,Re=Object.keys(i.properties);je<Re.length;je++){var X=Re[je];R.e.event[X]&&R.e.event[X].hide&&(Se+=1,L&&(ie[X]=i.properties[X])),(!R.e.event[X]||!R.e.event[X].hide)&&(Me[X]=i.properties[X])}return C.a.createElement(fe.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},C.a.createElement(Ue,{tab:"Properties",key:"properties"},C.a.createElement(xe.a,{properties:I(I({$timestamp:Object(Ve.a)(i.timestamp).toISOString()},Me),ie),useDetectedPropertyType:!0}),Se>0&&C.a.createElement(le.a,{className:"mb-05",onClick:function(){return te(!L)},size:"small"},L?"Hide":"Show"," ",Object(Ce.qb)(Se,"hidden property","hidden properties"))),C.a.createElement(Ue,{tab:"JSON",key:"json"},C.a.createElement(ae,{event:i})),i.elements&&i.elements.length>0&&C.a.createElement(Ue,{tab:"Elements",key:"elements"},C.a.createElement(F.a,{event:i})))}try{Ee.displayName="EventDetails",Ee.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:Ee.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(j){}},"./frontend/src/scenes/events/EventElements.tsx":function(Le,A,e){"use strict";e.d(A,"a",function(){return Te});var q=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Pe=e.n(q),ue=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),be=e.n(ue),ee=e("./node_modules/core-js/modules/es.array.join.js"),me=e.n(ee),se=e("./node_modules/core-js/modules/es.array.fill.js"),$=e.n(se),ve=e("./node_modules/core-js/modules/es.array.slice.js"),pe=e.n(ve),K=e("./node_modules/core-js/modules/es.array.map.js"),H=e.n(K),C=e("./node_modules/core-js/modules/es.object.entries.js"),R=e.n(C),xe=e("./node_modules/core-js/modules/es.array.concat.js"),F=e.n(xe),fe=e("./node_modules/core-js/modules/es.regexp.exec.js"),J=e.n(fe),t=e("./node_modules/core-js/modules/es.string.replace.js"),W=e.n(t),Ce=e("./node_modules/react/index.js"),G=e.n(Ce);function N(ae){return Array(ae).fill("    ").join("")}function Te(ae){var Ve=ae.event,le=be()(Ve.elements||[]).reverse();return le=le.slice(Math.max(le.length-10,1)),G.a.createElement("div",null,le.map(function(_e,I){return G.a.createElement("pre",{className:"code",key:I,style:{margin:0,padding:0,borderRadius:0,backgroundColor:I===le.length-1?"var(--primary)":void 0}},N(I),"<",_e.tag_name,_e.attr_id&&' id="'.concat(_e.attr_id,'"'),Object.entries(_e.attributes).map(function(Ue){var Ee=Pe()(Ue,2),j=Ee[0],i=Ee[1];return G.a.createElement("span",{key:j}," ".concat(j.replace("attr__",""),'="').concat(i,'"'))}),">",_e.text,I===le.length-1&&G.a.createElement("span",null,"</",_e.tag_name,">"))}),be()(le).reverse().slice(1).map(function(_e,I){return G.a.createElement("pre",{className:"code",key:I,style:{margin:0,padding:0,borderRadius:0}},N(le.length-I-2),"</",_e.tag_name,">")}))}try{Te.displayName="EventElements",Te.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:Te.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(ae){}},"./frontend/src/scenes/events/EventsTable.tsx":function(Le,A,e){"use strict";e.d(A,"a",function(){return lt});var q=e("./node_modules/core-js/modules/es.symbol.js"),Pe=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ue=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),be=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),ee=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),me=e.n(ee),se=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),$=e.n(se),ve=e("./node_modules/core-js/modules/es.array.splice.js"),pe=e("./node_modules/core-js/modules/es.array.filter.js"),K=e("./node_modules/core-js/modules/es.object.to-string.js"),H=e("./node_modules/core-js/modules/es.array.map.js"),C=e("./node_modules/core-js/modules/es.array.find.js"),R=e("./node_modules/core-js/modules/es.array.concat.js"),xe=e("./node_modules/core-js/modules/es.array.join.js"),F=e("./node_modules/core-js/modules/es.object.keys.js"),fe=e("./node_modules/core-js/modules/es.regexp.to-string.js"),J=e("./node_modules/react/index.js"),t=e.n(J),W=e("./node_modules/kea/lib/index.esm.js"),Ce=e("./frontend/src/scenes/events/EventDetails.tsx"),G=e("./frontend/src/lib/components/Link.tsx"),N=e("./node_modules/antd/es/button/index.js"),Te=e("./node_modules/kea-router/lib/index.js"),ae=e("./node_modules/@babel/runtime/helpers/typeof.js"),Ve=e.n(ae),le=e("./node_modules/core-js/modules/es.regexp.exec.js"),_e=e("./node_modules/core-js/modules/es.string.replace.js");function I(o){var s=o.value;return t.a.createElement("span",{title:s},Ve()(s)==="object"?JSON.stringify(s):s&&s.toString().replace(/(^\w+:|^)\/\//,""))}try{I.displayName="Property",I.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:I.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(o){}var Ue=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function Ee(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(o);s&&(p=p.filter(function(M){return Object.getOwnPropertyDescriptor(o,M).enumerable})),d.push.apply(d,p)}return d}function j(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Ee(Object(d),!0).forEach(function(p){me()(o,p,d[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Ee(Object(d)).forEach(function(p){Object.defineProperty(o,p,Object.getOwnPropertyDescriptor(d,p))})}return o}function i(o){var s=o.property,d=o.value,p=o.filters,M=o.onClick,oe=o.className,V=Object(Ue.c)(p.properties),$e=V.find(function(Oe){return Oe.key===s&&Oe.value===d&&!Oe.operator})?V.filter(function(Oe){return Oe.key!==s||Oe.value!==d||Oe.operator}):[].concat($()(V),[{key:s,value:d}]),Ze=Object(Te.combineUrl)(window.location.pathname,j(j({},p),{},{properties:$e}),{}),ze=Ze.url;return t.a.createElement(G.a,{to:ze,className:oe,onClick:function(){M&&M(s,d)}},t.a.createElement(I,{value:d}))}try{i.displayName="FilterPropertyLink",i.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:i.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(o){}var b=e("./frontend/src/lib/utils.tsx"),_=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),L=e.n(_),te=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),Me=e.n(te),ie={};ie.insert="head",ie.singleton=!1;var Se=L()(Me.a,ie),je=Me.a.locals||{},Re=e("./frontend/src/scenes/events/eventsTableLogic.ts"),X=e("./frontend/src/scenes/persons/PersonHeader.tsx"),We=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),Fe=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ie=e("./frontend/src/types.ts"),z=e("./frontend/src/scenes/actions/EventName.tsx"),g=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),x=e("./frontend/src/lib/components/Tooltip.tsx"),O=e("./node_modules/clsx/dist/clsx.m.js"),T=Object(W.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(s){return{columnConfig:s}}},reducers:function(s){var d=s.props;return{selectedColumns:[d.startingColumns||"DEFAULT",{setSelectedColumns:function(M,oe){var V=oe.columnConfig;return V}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(o){return[o.selectedColumns]},function(o){return o==="DEFAULT"?7:o.length+2}]}}),ne=e("./frontend/src/scenes/urls.ts"),Be=e("./frontend/src/lib/components/LemonTable/index.ts"),c=e("./frontend/src/lib/components/icons.tsx"),n=e("./frontend/src/lib/components/LemonButton/index.ts"),r=e("./frontend/src/lib/components/LemonButton/More.tsx"),a=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),v=e("./frontend/src/scenes/teamLogic.tsx"),l=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function E(o){Object(J.useEffect)(function(){var s="hidden",d="visibilitychange";typeof document.msHidden!="undefined"?(s="msHidden",d="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(s="webkitHidden",d="webkitvisibilitychange");var p=function(){o(!document[s])};return document.addEventListener(d,p),function(){document.removeEventListener(d,p)}},[])}var u=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),f=e.n(u),ce=e("./node_modules/core-js/modules/es.array.includes.js"),Q=e("./node_modules/core-js/modules/es.string.includes.js"),ge=e("./node_modules/antd/es/row/index.js"),ye=e("./node_modules/antd/es/space/index.js"),De=e("./node_modules/antd/es/col/index.js"),re=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),Z=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),we=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),m=e.n(we),Xe={};Xe.insert="head",Xe.singleton=!1;var B=L()(m.a,Xe),Ct=m.a.locals||{},ot=e("./node_modules/antd/lib/modal/Modal.js"),Et=e.n(ot),st=e("./node_modules/react-virtualized/dist/es/List/index.js"),jt=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),Qe=e("./node_modules/core-js/modules/es.array.from.js"),nn=e("./node_modules/core-js/modules/es.string.iterator.js"),rn=e("./node_modules/core-js/modules/es.array.iterator.js"),on=e("./node_modules/core-js/modules/es.set.js"),sn=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),St=Object(W.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[T],actions:{selectColumn:function(s){return{column:s}},unselectColumn:function(s){return{column:s}},resetColumns:function(s){return{columns:s}},setColumns:function(s){return{columns:s}},toggleSaveAsDefault:!0,save:!0},reducers:function(s){var d=s.props;return{selectedColumns:[d.selectedColumns,{selectColumn:function(M,oe){var V=oe.column;return Array.from(new Set([].concat($()(M),[V])))},unselectColumn:function(M,oe){var V=oe.column;return M.filter(function($e){return $e!==V})},resetColumns:function(M,oe){var V=oe.columns;return V},setColumns:function(M,oe){var V=oe.columns;return V}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(M){return!M}}]}},listeners:function(s){var d=s.values,p=s.actions;return{save:function(){T.actions.setSelectedColumns(d.selectedColumns),d.saveAsDefault&&(v.a.actions.updateCurrentTeam({live_events_columns:d.selectedColumns}),p.toggleSaveAsDefault())}}}}),Rt=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Tt=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),It=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),gt=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),Dt=e("./frontend/src/lib/components/RestrictedArea.tsx"),Bt=e("./frontend/src/lib/constants.tsx"),Kt=Object(gt.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(c.SortableDragIcon,null))});function at(o){var s=Object(W.useActions)(T),d=s.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(n.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:d,icon:t.a.createElement(c.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Ut,{immutableColumns:o.immutableColumns,defaultColumns:o.defaultColumns}))}function Ut(o){var s=o.immutableColumns,d=o.defaultColumns,p=36,M=32,oe=Object(W.useValues)(T),V=oe.selectedColumns,$e=oe.modalVisible,Ze=Object(W.useActions)(T),ze=Ze.hideModal,Oe=St({selectedColumns:V==="DEFAULT"?d:V}),Ne=Object(W.useActions)(Oe),it=Ne.selectColumn,ct=Ne.unselectColumn,dt=Ne.resetColumns,ut=Ne.setColumns,ke=Ne.toggleSaveAsDefault,qe=Ne.save,et=Object(W.useValues)(Oe),Ke=et.selectedColumns;function yt(de){var k=de.isRestricted;return t.a.createElement(It.a,{label:"Save as default for all project members",className:"save-as-default-button mt","data-attr":"events-table-save-columns-as-default-toggle",onChange:ke,defaultChecked:!1,disabled:k})}var tt=function(k){var w=k.column,Ae=k.disabled;return t.a.createElement("div",{className:Object(O.a)(["column-display-item",{selected:!Ae,disabled:Ae}]),style:{height:"".concat(M,"px")}},!Ae&&t.a.createElement(Kt,null),t.a.createElement(Fe.a,{value:w}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(x.a,{title:Ae?"Reserved":"Remove"},Ae?t.a.createElement(re.a,null):t.a.createElement(Z.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return ct(w)}}))))},Ot=Object(gt.b)(tt),mt=function(k){var w=k.index,Ae=k.style,Y=k.key,he=s==null?void 0:s.includes(Ke[w]);return t.a.createElement("div",{style:Ae,key:Y},he&&t.a.createElement(tt,{column:Ke[w],disabled:Boolean(he)}),!he&&t.a.createElement(Ot,{column:Ke[w],index:w,collection:"selected-columns"}))},vt=Object(gt.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(jt.a,null,function(de){var k=de.height,w=de.width;return t.a.createElement(st.b,{height:k,rowCount:Ke.length,rowRenderer:mt,rowHeight:p,width:w})}))}),pt=function(k){var w=k.oldIndex,Ae=k.newIndex,Y=$()(Ke),he=Y.splice(w,1),ht=f()(he,1),ft=ht[0];Y.splice(Ae,0,ft),ut(Y)};return t.a.createElement(Et.a,{id:"column-configurator-modal",centered:!0,visible:$e,title:"Configure columns",onOk:qe,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:ze,footer:t.a.createElement(ge.a,null,t.a.createElement(ye.b,{style:{flexGrow:1},align:"start"},t.a.createElement(N.a,{className:"text-blue",onClick:function(){return dt(d)}},"Reset to defaults")),t.a.createElement(ye.b,null,t.a.createElement(N.a,{className:"text-blue",type:"text",onClick:ze},"Close"),t.a.createElement(N.a,{type:"primary",onClick:qe},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(ge.a,{gutter:16,className:"lists"},t.a.createElement(De.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",Ke.length,") - Drag to reorder"),t.a.createElement(vt,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:pt,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(De.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(jt.a,null,function(de){var k=de.height,w=de.width;return t.a.createElement(Rt.a,{height:k,width:w,taxonomicGroupTypes:[Tt.a.EventProperties],value:void 0,onChange:function(Y,he){return he&&it(String(he))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:me()({},Tt.a.EventProperties,Ke)})})))),t.a.createElement(Dt.a,{Component:yt,minimumAccessLevel:Bt.m.Owner,scope:Dt.b.Project})))}try{at.displayName="LemonTableConfig",at.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:at.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(o){}var Wt=e("./frontend/src/lib/utils/eventUsageLogic.ts");function At(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(o);s&&(p=p.filter(function(M){return Object.getOwnPropertyDescriptor(o,M).enumerable})),d.push.apply(d,p)}return d}function Lt(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?At(Object(d),!0).forEach(function(p){me()(o,p,d[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):At(Object(d)).forEach(function(p){Object.defineProperty(o,p,Object.getOwnPropertyDescriptor(d,p))})}return o}function lt(o){var s,d=o.pageKey,p=o.fixedFilters,M=o.fixedColumns,oe=o.sceneUrl,V=o.fetchMonths,$e=V===void 0?12:V,Ze=o.startingColumns,ze=o.showCustomizeColumns,Oe=ze===void 0?!0:ze,Ne=o.showExport,it=Ne===void 0?!0:Ne,ct=o.showAutoload,dt=ct===void 0?!0:ct,ut=o.showEventFilter,ke=ut===void 0?!0:ut,qe=o.showPropertyFilter,et=qe===void 0?!0:qe,Ke=o.showRowExpanders,yt=Ke===void 0?!0:Ke,tt=o.showActionsButton,Ot=tt===void 0?!0:tt,mt=o.showPersonColumn,vt=mt===void 0?!0:mt,pt=o.linkPropertiesToFilters,de=pt===void 0?!0:pt,k=Object(W.useValues)(v.a),w=k.currentTeam,Ae=Object(Re.a)({fixedFilters:p,key:d,sceneUrl:oe||ne.a.events(),fetchMonths:$e}),Y=Object(W.useValues)(Ae),he=Y.properties,ht=Y.eventsFormatted,ft=Y.isLoading,Nt=Y.hasNext,xt=Y.isLoadingNext,_t=Y.eventFilter,Ft=Y.automaticLoadEnabled,Vt=Y.exportUrl,wt=Y.highlightEvents,$t=Y.months,Mt=Object(W.useValues)(T({startingColumns:(s=w&&w.live_events_columns)!==null&&s!==void 0?s:Ze})),nt=Mt.tableWidth,Ge=Mt.selectedColumns,Ye=Object(W.useActions)(Ae),zt=Ye.fetchNextEvents,Yt=Ye.prependNewEvents,Ht=Ye.setEventFilter,Jt=Ye.toggleAutomaticLoad,Gt=Ye.startDownload,Xt=Ye.setPollingActive,Qt=Ye.setProperties,Zt=!(p!=null&&p.person_id),kt=Object(W.useActions)(Wt.f),qt=kt.reportEventsTablePollingReactedToPageVisibility;E(function(S){Xt(S),qt(S)});var Pt=function(y,h){var U=y.date_break,P=y.new_events;return{children:U||(P?t.a.createElement(n.a,{icon:t.a.createElement(c.IconSync,null),style:{borderRadius:0},onClick:function(){return Yt()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:h+1,style:P?{padding:0}:void 0}}},en={title:"Person",key:"person",render:function(y,h){var U,P,D=h.event;return D?Zt&&(U=D.person)!==null&&U!==void 0&&(P=U.distinct_ids)!==null&&P!==void 0&&P.length?t.a.createElement(G.a,{to:ne.a.person(D.person.distinct_ids[0])},t.a.createElement(X.a,{noLink:!0,withIcon:!0,person:D.person})):t.a.createElement(X.a,{withIcon:!0,person:D.person}):{props:{colSpan:0}}}},bt=Object(J.useMemo)(function(){var S=[{title:"Event",key:"event",width:"16rem",render:function(h,U){if(!U.event)return Pt(U,nt);var P=U.event;return t.a.createElement(Fe.a,{value:Object(b.f)(P)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(h,U){var P=U.event;if(!P)return{props:{colSpan:0}};var D=P.properties.$current_url?"$current_url":"$screen_name";return de?t.a.createElement(i,{className:"ph-no-capture",property:D,value:P.properties[D],filters:{properties:he}}):t.a.createElement(I,{value:P.properties[D]})}},{title:t.a.createElement(x.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(h,U){var P=U.event;return P?de?t.a.createElement(i,{property:"$lib",value:P.properties.$lib,filters:{properties:he}}):t.a.createElement(I,{value:P.properties.$lib}):{props:{colSpan:0}}}}];return vt&&S.splice(1,0,en),S},[nt]),tn=Object(J.useMemo)(function(){var S=[];if(Ge==="DEFAULT")S=$()(bt);else{var y=vt?Ge:Ge.filter(function(h){return h!=="person"});S=y.map(function(h,U){var P=bt.find(function(D){return D.key===h});return P?Lt(Lt({},P),{},{render:function(He,Je){var rt=Je.event;return rt?P.render?P.render(He,Je,U):{props:{colSpan:0}}:U===0?Pt(Je,nt):{props:{colSpan:0}}}}):{title:Fe.e.event[h]?Fe.e.event[h].label:h,key:h,render:function(He,Je){var rt=Je.event;return rt?de?t.a.createElement(i,{className:"ph-no-capture ",property:h,value:rt.properties[h],filters:{properties:he}}):t.a.createElement(I,{value:rt.properties[h]}):U===0?Pt(Je,nt):{props:{colSpan:0}}}}})}return S.push({title:"Time",key:"time",render:function(U,P){var D=P.event;return D?t.a.createElement(We.b,{time:D.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),Ot&&S.push({key:"actions",width:0,render:function(U,P){var D=P.event;if(!D)return{props:{colSpan:0}};var He;return D.event==="$pageview"?He={insight:Ie.z.TRENDS,interval:"day",display:Ie.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:D.properties.$current_url,type:"event"}]}]}:D.event!=="$autocapture"&&(He={insight:Ie.z.TRENDS,interval:"day",display:Ie.j.ActionsLineGraph,actions:[],events:[{id:D.event,name:D.event,type:"events",order:0,properties:[]}]}),t.a.createElement(r.a,{overlay:t.a.createElement(t.a.Fragment,null,w&&t.a.createElement(n.a,{type:"stealth",onClick:function(){return Object(l.a)(w.id,D,0,w.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),He&&t.a.createElement(n.a,{type:"stealth",to:ne.a.insightNew(He),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),M?S.concat(M):S},[Ge,nt]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(ke||et)&&t.a.createElement("div",{className:"flex pt pb space-x border-top"},ke&&t.a.createElement(z.b,{value:_t,onChange:function(y){Ht(y||"")}}),et&&t.a.createElement(g.a,{propertyFilters:he,onChange:Qt,pageKey:d,style:{marginBottom:0,marginTop:0},eventNames:_t?[_t]:[],useLemonButton:!0})),dt||Oe||it?t.a.createElement("div",{className:Object(O.a)("space-between-items pt pb",(ke||et)&&"border-top")},dt&&t.a.createElement(a.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:Ft,onChange:Jt}),t.a.createElement("div",{className:"flex space-x-05"},Oe&&t.a.createElement(at,{immutableColumns:["event","person"],defaultColumns:bt.map(function(S){return S.key||""})}),it&&Vt&&t.a.createElement(x.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(n.a,{type:"secondary",icon:t.a.createElement(c.IconExport,{style:{color:"var(--primary)"}}),onClick:Gt},"Export")))):null,t.a.createElement(Be.a,{dataSource:ht,loading:ft,columns:tn,key:Ge==="DEFAULT"?"default":Ge.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:ft?void 0:he.some(function(S){return Object.keys(S).length})||_t?"No events matching filters found in the last ".concat($t," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(G.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(y){var h;return y.event?y.event.id+"-"+y.event.event:((h=y.date_break)===null||h===void 0?void 0:h.toString())||""},rowClassName:function(y){return Object(O.a)({"event-row":y.event,highlighted:y.event&&wt[y.event.id],"event-row-is-exception":y.event&&y.event.event==="$exception","event-row-date-separator":y.date_break,"event-row-new":y.new_events})},expandable:yt?{expandedRowRender:function(y){var h=y.event;return h&&t.a.createElement(Ce.a,{event:h})},rowExpandable:function(y){var h=y.event,U=y.date_break,P=y.new_events;return U||P?-1:!!h}}:void 0}),t.a.createElement(N.a,{type:"primary",onClick:zt,loading:xt,style:{display:Nt||xt?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{lt.displayName="EventsTable",lt.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:lt.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(o){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(Le,A,e){"use strict";e.d(A,"a",function(){return Be});var q=e("./node_modules/core-js/modules/es.object.keys.js"),Pe=e.n(q),ue=e("./node_modules/core-js/modules/es.symbol.js"),be=e.n(ue),ee=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),me=e.n(ee),se=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),$=e.n(se),ve=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),pe=e.n(ve),K=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),H=e.n(K),C=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),R=e.n(C),xe=e("./node_modules/@babel/runtime/regenerator/index.js"),F=e.n(xe),fe=e("./node_modules/core-js/modules/es.array.map.js"),J=e.n(fe),t=e("./node_modules/core-js/modules/es.object.to-string.js"),W=e.n(t),Ce=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),G=e.n(Ce),N=e("./node_modules/core-js/modules/es.array.splice.js"),Te=e.n(N),ae=e("./node_modules/core-js/modules/es.array.join.js"),Ve=e.n(ae),le=e("./node_modules/core-js/modules/es.array.filter.js"),_e=e.n(le),I=e("./node_modules/core-js/modules/es.array.concat.js"),Ue=e.n(I),Ee=e("./node_modules/core-js/modules/es.array.iterator.js"),j=e.n(Ee),i=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),b=e.n(i),_=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/lib/utils.tsx"),te=e("./node_modules/kea-router/lib/index.js"),Me=e.n(te),ie=e("./frontend/src/lib/api.ts"),Se=e("./frontend/src/scenes/teamLogic.tsx"),je=e("./frontend/src/lib/dayjs.ts"),Re=e("./frontend/src/lib/components/lemonToast.tsx"),X=e("./frontend/src/lib/logic/featureFlagLogic.ts"),We=e("./frontend/src/lib/components/ExportButton/exporterLogic.ts"),Fe=e("./frontend/src/lib/constants.tsx");function Ie(c,n){var r=Object.keys(c);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(c);n&&(a=a.filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable})),r.push.apply(r,a)}return r}function z(c){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ie(Object(r),!0).forEach(function(a){H()(c,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(r,a))})}return c}var g=5,x=365,O=5e3,T=function(n,r){var a=[];return a=n.map(function(v){return{event:v}}),a.forEach(function(v,l){var E=a[l-1];l>0&&v.event&&E.event&&!Object(je.a)(v.event.timestamp).isSame(E.event.timestamp,"day")&&a.splice(l,0,{date_break:Object(je.a)(v.event.timestamp).format("LL")})}),r.length>0&&a.splice(0,0,{new_events:!0}),a},ne=function(n){return Object(je.b)().subtract(n,"day").toISOString()},Be=Object(_.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(r){return!!r}).join("-")},connect:{values:[Se.a,["currentTeamId"],X.a,["featureFlags"]],actions:[We.b,["exportItem"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:function(n){var r,a,v=n.props;return{pollingIsActive:[!0,{setPollingActive:function(E,u){var f=u.pollingActive;return f},pollEventsSuccess:function(E,u){var f=u.events;return f&&f.length?!1:E},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(E,u){var f=u.properties;return Object(L.s)(f)}}],eventFilter:[(r=(a=v.fixedFilters)===null||a===void 0?void 0:a.event_filter)!==null&&r!==void 0?r:"",{setEventFilter:function(E,u){var f=u.event;return f}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(E,u){var f=u.events,ce=u.isNext;return ce?[].concat(R()(E),R()(f)):f},prependEvents:function(E,u){var f=u.events;return[].concat(R()(f),R()(E))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(E,u){var f=u.hasNext;return f}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(E,u){var f=u.selectedEvent;return f}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(E,u){var f=u.events;return f||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(E,u){var f=u.events;return f.reduce(function(ce,Q){return ce[Q.id]=!0,ce},{})}}],pollTimeout:[0,{setPollTimeout:function(E,u){return u.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(E,u){var f=u.automaticLoadEnabled;return f}}]}},selectors:function(n){var r=n.selectors,a=n.props;return{eventsFormatted:[function(){return[r.events,r.newEvents]},function(v,l){return T(v,l)}],exportParams:[function(){return[r.eventFilter,r.orderBy,r.properties,r.minimumExportDate]},function(v,l,E,u){var f;return z(z(z({},a.fixedFilters||{}),{},{properties:[].concat(R()(E),R()(((f=a.fixedFilters)===null||f===void 0?void 0:f.properties)||[]))},v?{event:v}:{}),{},{orderBy:[l],after:u})}],exportUrl:[function(){return[r.currentTeamId,r.exportParams]},function(v,l){return"/api/projects/".concat(v,"/events.csv?").concat(Object(L.Bb)(l))}],months:[function(){return[function(v,l){return l.fetchMonths}]},function(v){return v||12}],minimumExportDate:[function(){return[]},function(){return Object(je.b)().subtract(2,"days").toISOString()}],minimumQueryDate:[function(){return[r.months]},function(v){return Object(je.b)().subtract(v,"months").toISOString()}],pollAfter:[function(){return[r.events]},function(v){return(v==null?void 0:v.length)>0&&v[0].timestamp?v[0].timestamp:ne(0)}]}},actionToUrl:function(n){var r=n.values;return{setProperties:function(){return[te.router.values.location.pathname,z(z({},te.router.values.searchParams),{},{properties:r.properties.length===0?void 0:r.properties}),te.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[te.router.values.location.pathname,z(z({},te.router.values.searchParams),{},{eventFilter:r.eventFilter}),te.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var r=n.actions,a=n.values,v=n.props;return H()({},v.sceneUrl,function(l,E){r.setProperties(E.properties||a.properties||{}),E.eventFilter&&r.setEventFilter(E.eventFilter)})},events:function(n){var r=n.values;return{beforeUnmount:function(){return clearTimeout(r.pollTimeout||void 0)}}},listeners:function(n){var r=n.actions,a=n.values,v=n.props;return{startDownload:function(){a.featureFlags[Fe.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS]?r.exportItem(We.a.CSV,{},a.exportParams):(Re.d.success("The export is starting. It should finish soon"),window.location.href=a.exportUrl)},setProperties:function(){return r.fetchEvents()},setEventFilter:function(){return r.fetchEvents()},fetchNextEvents:function(){var l=pe()(F.a.mark(function u(){var f;return F.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:f=a.events,f.length===0?r.fetchEvents():r.fetchEvents({before:f[f.length-1].timestamp});case 2:case"end":return Q.stop()}},u)}));function E(){return l.apply(this,arguments)}return E}(),fetchEvents:function(){var l=pe()(F.a.mark(function u(f,ce){var Q,ge,ye,De,re,Z,we,m;return F.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(re=function(){return re=pe()(F.a.mark(function ot(Et){var st;return F.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return st=z(z(z(z({after:Et},v.fixedFilters||{}),{},{properties:ye},ge||{}),a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy]}),Qe.abrupt("return",ie.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(Object(L.Bb)(st))));case 2:case"end":return Qe.stop()}},ot)})),re.apply(this,arguments)},De=function(ot){return re.apply(this,arguments)},ge=f.nextParams,clearTimeout(a.pollTimeout),!(a.events.length>0)){B.next=9;break}return B.next=7,ce(300);case 7:B.next=11;break;case 9:return B.next=11,ce(1);case 11:return ye=[].concat(R()(a.properties),R()(((Q=v.fixedFilters)===null||Q===void 0?void 0:Q.properties)||[])),Z=null,we=!1,B.prev=14,B.next=17,De(ne(g));case 17:if(Z=B.sent,Z.results.length!==0){B.next=23;break}return B.next=21,De(ne(x));case 21:Z=B.sent,we=!0;case 23:B.next=29;break;case 25:return B.prev=25,B.t0=B.catch(14),r.fetchOrPollFailure(B.t0),B.abrupt("return");case 29:ce(),r.fetchEventsSuccess({events:Z.results,hasNext:!!Z.next||!we,isNext:!!ge}),m=window.setTimeout(r.pollEvents,O),r.setPollTimeout(m);case 33:case"end":return B.stop()}},u,null,[[14,25]])}));function E(u,f){return l.apply(this,arguments)}return E}(),pollEvents:function(){var l=pe()(F.a.mark(function u(f,ce){var Q,ge,ye,De,re,Z;return F.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(ge=function(){var B=window.setTimeout(r.pollEvents,O);r.setPollTimeout(B)},a.orderBy==="-timestamp"){m.next=3;break}return m.abrupt("return");case 3:if(v.sceneUrl===te.router.values.location.pathname){m.next=5;break}return m.abrupt("return");case 5:if(a.pollingIsActive){m.next=8;break}return ge(),m.abrupt("return");case 8:return ye=[].concat(R()(a.properties),R()(((Q=v.fixedFilters)===null||Q===void 0?void 0:Q.properties)||[])),De=z(z(z({},v.fixedFilters||{}),{},{properties:ye},a.eventFilter?{event:a.eventFilter}:{}),{},{orderBy:[a.orderBy],after:a.pollAfter}),re=Object(L.Bb)(De),Z=null,m.prev=12,m.next=15,ie.b.get("api/projects/".concat(a.currentTeamId,"/events/?").concat(re));case 15:Z=m.sent,m.next=21;break;case 18:return m.prev=18,m.t0=m.catch(12),m.abrupt("return");case 21:ce(),a.automaticLoadEnabled?r.prependEvents(Z.results):r.pollEventsSuccess(Z.results),ge();case 24:case"end":return m.stop()}},u,null,[[12,18]])}));function E(u,f){return l.apply(this,arguments)}return E}(),prependNewEvents:function(){a.newEvents.length&&r.prependEvents(a.newEvents)},fetchOrPollFailure:function(E){var u=E.error;Re.d.error("There was a problem fetching your events: ".concat(u.statusText))},toggleAutomaticLoad:function(E){var u=E.automaticLoadEnabled;u&&r.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(Le,A,e){var q=e("./node_modules/css-loader/dist/runtime/api.js");A=q(!1),A.push([Le.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--text-muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--text-default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal .save-as-default-button{border:1px solid var(--dark-grey);border-radius:.25rem}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--text-default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),Le.exports=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(Le,A,e){var q=e("./node_modules/css-loader/dist/runtime/api.js");A=q(!1),A.push([Le.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--depr-lighten-danger-40)}.events td{max-width:20rem}",""]),Le.exports=A}}]);
