(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(S,c,e){"use strict";e.d(c,"b",function(){return t}),e.d(c,"a",function(){return x});var j=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),u=e.n(j),N=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),L=e.n(N),z=e("./node_modules/core-js/modules/es.array.iterator.js"),Q=e.n(z),H=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(H),h=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),J=e.n(h),m=e("./node_modules/core-js/modules/es.object.from-entries.js"),V=e.n(m),a=e("./node_modules/core-js/modules/es.array.map.js"),B=e.n(a),Y=e("./node_modules/core-js/modules/es.object.entries.js"),F=e.n(Y),C=e("./node_modules/react/index.js"),i=e.n(C),A=e("./node_modules/kea/lib/index.esm.js"),f=e("./node_modules/antd/es/tabs/index.js"),_=e("./frontend/src/scenes/urls.ts"),I=e("./frontend/src/lib/components/Tooltip.tsx"),M=e("./frontend/src/lib/components/icons.tsx"),R=e("./frontend/src/lib/components/TitleWithIcon.tsx"),K=e("./frontend/src/lib/constants.tsx"),W=e("./frontend/src/lib/logic/featureFlagLogic.ts"),E,t;(function(n){n.Actions="actions",n.EventDefinitions="events",n.EventPropertyDefinitions="properties",n.IngestionWarnings="warnings"})(t||(t={}));var $=(E={},L()(E,t.EventPropertyDefinitions,_.a.eventPropertyDefinitions()),L()(E,t.EventDefinitions,_.a.eventDefinitions()),L()(E,t.Actions,_.a.actions()),L()(E,t.IngestionWarnings,_.a.ingestionWarnings()),E),U=Object(A.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[W.a,["featureFlags"]]},actions:{setTab:function(g){return{tab:g}}},reducers:{tab:[t.EventDefinitions,{setTab:function(g,b){var p=b.tab;return p}}]},selectors:{showWarningsTab:[function(n){return[n.featureFlags]},function(n){return!!n[K.j.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(b){var p=b.tab;return $[p]||_.a.events()}}},urlToAction:function(g){var b=g.actions,p=g.values;return Object.fromEntries(Object.entries($).map(function(D){var T=u()(D,2),O=T[0],v=T[1];return[v,function(){p.tab!==O&&b.setTab(O)}]}))}});function x(n){var g=n.tab,b=Object(A.useValues)(U),p=b.showWarningsTab,D=Object(A.useActions)(U),T=D.setTab;return i.a.createElement(f.a,{tabPosition:"top",animated:!1,activeKey:g,onTabClick:function(v){return T(v)}},i.a.createElement(f.a.TabPane,{tab:i.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:t.EventDefinitions}),i.a.createElement(f.a.TabPane,{tab:i.a.createElement(R.a,{icon:i.a.createElement(I.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},i.a.createElement(M.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:t.Actions}),i.a.createElement(f.a.TabPane,{tab:i.a.createElement(R.a,{icon:i.a.createElement(I.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},i.a.createElement(M.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:t.EventPropertyDefinitions}),p&&i.a.createElement(f.a.TabPane,{tab:i.a.createElement("span",{"data-attr":"data-management-warnings-tab"},"Ingestion Warnings"),key:t.IngestionWarnings}))}try{x.displayName="DataManagementPageTabs",x.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:x.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(n){}},"./frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx":function(S,c,e){"use strict";e.d(c,"a",function(){return i});var j=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),u=e.n(j),N=e("./node_modules/core-js/modules/es.array.concat.js"),L=e.n(N),z=e("./node_modules/core-js/modules/es.array.includes.js"),Q=e.n(z),H=e("./node_modules/core-js/modules/es.string.includes.js"),G=e.n(H),h=e("./node_modules/kea/lib/index.esm.js"),J=e("./node_modules/react/index.js"),m=e.n(J),V=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),a=e("./frontend/src/lib/components/LemonTable/index.ts"),B=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),Y=e("./frontend/src/scenes/organizationLogic.tsx"),F=e("./frontend/src/lib/utils.tsx"),C=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx");function i(A){var f,_,I,M,R,K,W,E,t=A.definition,$=Object(h.useActions)(V.c),U=$.loadPropertiesForEvent,x=Object(h.useValues)(V.c),n=x.eventPropertiesCacheMap,g=x.eventDefinitionPropertiesLoading,b=Object(h.useValues)(Y.a),p=b.hasDashboardCollaboration,D=b.hasIngestionTaxonomy;Object(J.useEffect)(function(){U(t)},[]);var T=[{title:"Property",key:"property",className:"definition-column-name",render:function(v,r){return m.a.createElement(C.b,{definition:r,event:t,hideIcon:!0,asLink:!0})}},{title:"Type",key:"type",className:"definition-column-type",render:function(v,r){return r.property_type?m.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},r.property_type):m.a.createElement("span",{className:"text-muted"},"\u2014")}}].concat(u()(p?[{title:"Tags",key:"tags",render:function(v,r){var l;return m.a.createElement(B.a,{tags:(l=r.tags)!==null&&l!==void 0?l:[],staticOnly:!0})}}]:[]),u()(D?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(v,r){return r.query_usage_30_day?Object(F.P)(r.query_usage_30_day):m.a.createElement("span",{className:"text-muted"},"\u2014")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(v,r){return r.example?m.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},r.example):m.a.createElement("span",{className:"text-muted"},"\u2014")}}]);return m.a.createElement("div",{className:"event-properties-wrapper"},m.a.createElement("span",{className:"event-properties-header"},"Top properties"),m.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),m.a.createElement(a.a,{id:"event-properties-definition-table-".concat(t.id),"data-attr":"event-properties-definition-nested-table",columns:T,className:"event-properties-definition-table-".concat(t.id),dataSource:(f=n==null||(_=n[t.id])===null||_===void 0?void 0:_.results)!==null&&f!==void 0?f:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:V.b,currentPage:(I=n==null||(M=n[t.id])===null||M===void 0?void 0:M.page)!==null&&I!==void 0?I:1,entryCount:(R=n==null||(K=n[t.id])===null||K===void 0?void 0:K.count)!==null&&R!==void 0?R:0,onForward:n!=null&&(W=n[t.id])!==null&&W!==void 0&&W.next?function(){U(t,n[t.id].next)}:void 0,onBackward:n!=null&&(E=n[t.id])!==null&&E!==void 0&&E.previous?function(){U(t,n[t.id].previous)}:void 0},loading:g.includes(t.id)}))}try{i.displayName="EventDefinitionProperties",i.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:i.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(A){}},"./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx":function(S,c,e){"use strict";e.r(c),e.d(c,"scene",function(){return b}),e.d(c,"EventDefinitionsTable",function(){return p});var j=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),u=e.n(j),N=e("./node_modules/core-js/modules/es.array.concat.js"),L=e("./node_modules/core-js/modules/es.function.name.js"),z=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Q=e.n(z),H=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),G=e.n(H),h={};h.insert="head",h.singleton=!1;var J=Q()(G.a,h),m=G.a.locals||{},V=e("./node_modules/react/index.js"),a=e.n(V),B=e("./node_modules/kea/lib/index.esm.js"),Y=e("./frontend/src/lib/components/LemonTable/index.ts"),F=e("./frontend/src/types.ts"),C=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),i=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),A=e("./frontend/src/scenes/organizationLogic.tsx"),f=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),_=e("./frontend/src/lib/utils.tsx"),I=e("./frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx"),M=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),R=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),K=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),W=e("./frontend/src/lib/components/DefinitionPopup/DefinitionPopupContents.tsx"),E=e("./frontend/src/lib/components/PageHeader.tsx"),t=e("./frontend/@posthog/lemon-ui/src/index.ts"),$=e("./frontend/src/lib/components/LemonButton/More.tsx"),U=e("./frontend/src/scenes/urls.ts"),x=e("./node_modules/kea-router/lib/index.js"),n=e("./frontend/src/lib/components/icons.tsx"),g=[{value:F.o.Event,label:"All events","data-attr":"event-type-option-event"},{value:F.o.EventCustom,label:"Custom events","data-attr":"event-type-option-event-custom"},{value:F.o.EventPostHog,label:"PostHog events","data-attr":"event-type-option-event-posthog"}],b={component:p,logic:C.c,paramsToProps:function(){return{syncWithUrl:!0}}};function p(){var D,T,O=Object(B.useValues)(K.a),v=O.preflight,r=Object(B.useValues)(C.c),l=r.eventDefinitions,ne=r.eventDefinitionsLoading,Z=r.filters,w=Object(B.useActions)(C.c),k=w.loadEventDefinitions,q=w.setFilters,ee=Object(B.useValues)(A.a),te=ee.hasDashboardCollaboration,ae=ee.hasIngestionTaxonomy,oe=[{key:"icon",className:"definition-column-icon",render:function(s,o){return a.a.createElement(f.a,{definition:o,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(s,o){return a.a.createElement(f.a,{definition:o,hideIcon:!0,asLink:!0})},sorter:function(s,o){var d,P,X;return(d=(P=s.name)===null||P===void 0?void 0:P.localeCompare((X=o.name)!==null&&X!==void 0?X:""))!==null&&d!==void 0?d:0}}].concat(u()(te?[{title:"Tags",key:"tags",render:function(s,o){var d;return a.a.createElement(i.a,{tags:(d=o.tags)!==null&&d!==void 0?d:[],staticOnly:!0})}}]:[]),u()(ae?[{title:a.a.createElement(W.c,{tooltipPlacement:"bottom"}),key:"volume_30_day",align:"right",render:function(s,o){return o.volume_30_day?Object(_.P)(o.volume_30_day):a.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(s,o){var d,P;return((d=s==null?void 0:s.volume_30_day)!==null&&d!==void 0?d:0)-((P=o==null?void 0:o.volume_30_day)!==null&&P!==void 0?P:0)}},{title:a.a.createElement(W.b,{tooltipPlacement:"bottom"}),key:"query_usage_30_day",align:"right",render:function(s,o){return o.query_usage_30_day?Object(_.P)(o.query_usage_30_day):a.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(s,o){var d,P;return((d=s==null?void 0:s.query_usage_30_day)!==null&&d!==void 0?d:0)-((P=o==null?void 0:o.query_usage_30_day)!==null&&P!==void 0?P:0)}}]:[]),[{key:"actions",width:0,render:function(s,o){return a.a.createElement($.a,{"data-attr":"event-definitions-table-more-button-".concat(o.name),overlay:a.a.createElement(a.a.Fragment,null,a.a.createElement(t.LemonButton,{status:"stealth",to:Object(x.combineUrl)(U.a.sessionRecordings(),{filters:{events:[{id:o.name,type:"events",order:0,name:o.name}]}}).url,fullWidth:!0,sideIcon:a.a.createElement(n.IconPlayCircle,null),"data-attr":"event-definitions-table-view-recordings"},"View recordings"))})}}]);return a.a.createElement("div",{"data-attr":"manage-events-table"},a.a.createElement(E.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),v&&!(v!=null&&v.is_event_property_usage_enabled)&&a.a.createElement(R.a,null),a.a.createElement(M.a,{tab:M.b.EventDefinitions}),a.a.createElement("div",{className:"flex justify-between items-center gap-2 mb-4"},a.a.createElement(t.LemonInput,{type:"search",placeholder:"Search for events",onChange:function(s){return q({event:s||""})},value:Z.event}),a.a.createElement("div",{className:"flex items-center gap-2"},a.a.createElement("span",null,"Type:"),a.a.createElement(t.LemonSelect,{value:Z.event_type,options:g,"data-attr":"event-type-filter",dropdownMatchSelectWidth:!1,onChange:function(s){q({event_type:s})},size:"small"}))),a.a.createElement(Y.a,{columns:oe,className:"events-definition-table","data-attr":"events-definition-table",loading:ne,rowKey:"id",pagination:{controlled:!0,currentPage:(D=l==null?void 0:l.page)!==null&&D!==void 0?D:1,entryCount:(T=l==null?void 0:l.count)!==null&&T!==void 0?T:0,pageSize:C.a,onForward:l.next?function(){k(l.next)}:void 0,onBackward:l.previous?function(){k(l.previous)}:void 0},expandable:{expandedRowRender:function(s){return a.a.createElement(I.a,{definition:s})},rowExpandable:function(){return!0},noIndent:!0},dataSource:l.results,emptyState:"No event definitions",nouns:["event","events"]}))}},"./frontend/src/scenes/events/UsageDisabledWarning.tsx":function(S,c,e){"use strict";e.d(c,"a",function(){return L});var j=e("./node_modules/react/index.js"),u=e.n(j),N=e("./frontend/src/lib/components/AlertMessage/index.ts");function L(){return u.a.createElement(N.a,{type:"info"},u.a.createElement("div",{className:"text-base mb-1"},"Event usage information is not enabled for your instance."),u.a.createElement("p",{className:"font-normal"},"You will still see the list of events and properties, but usage information will be unavailable. If you want to enable event usage please set the follow environment variable:"," ",u.a.createElement("pre",{style:{display:"inline"}},"ASYNC_EVENT_PROPERTY_USAGE=1"),". Please note, enabling this environment variable ",u.a.createElement("b",null,"may increase load considerably in your infrastructure"),", particularly if you have a large volume of events."))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(S,c,e){var j=e("./node_modules/css-loader/dist/runtime/api.js");c=j(!1),c.push([S.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:center;width:30px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted{color:var(--muted-alt)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{color:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),S.exports=c}}]);
