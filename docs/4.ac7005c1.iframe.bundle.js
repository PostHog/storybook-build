(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./frontend/src/lib/components/LemonModal/LemonModal.tsx":function(k,O,e){"use strict";e.d(O,"a",function(){return W});var V=e("./node_modules/@babel/runtime/helpers/extends.js"),oe=e.n(V),z=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),te=e.n(z),J=e("./node_modules/react/index.js"),C=e.n(J),Y=e("./node_modules/antd/es/modal/index.js"),s=e("./frontend/src/lib/components/icons.tsx"),L=e("./frontend/src/lib/components/LemonButton/index.ts"),X=e("./node_modules/clsx/dist/clsx.m.js"),U=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),N=e.n(U),H=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/LemonModal/LemonModal.scss"),Q=e.n(H),S={};S.insert="head",S.singleton=!1;var g=N()(Q.a,S),x=Q.a.locals||{};function W(b){var A=b.className,_=b.footer,E=_===void 0?null:_,y=b.width,i=y===void 0?480:y,K=te()(b,["className","footer","width"]);return C.a.createElement(Y.a,oe()({},K,{footer:E,width:i,closeIcon:C.a.createElement(L.a,{icon:C.a.createElement(s.IconClose,null),type:"stealth"}),className:Object(X.a)("LemonModal",A)}))}try{W.displayName="LemonModal",W.__docgenInfo={description:"A lightweight wrapper over Ant's Modal for matching Lemon style.",displayName:"LemonModal",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonModal/LemonModal.tsx#LemonModal"]={docgenInfo:W.__docgenInfo,name:"LemonModal",path:"frontend/src/lib/components/LemonModal/LemonModal.tsx#LemonModal"})}catch(b){}},"./frontend/src/lib/components/LemonSelect.tsx":function(k,O,e){"use strict";e.d(O,"a",function(){return S});var V=e("./node_modules/core-js/modules/es.array.map.js"),oe=e.n(V),z=e("./node_modules/core-js/modules/es.object.entries.js"),te=e.n(z),J=e("./node_modules/@babel/runtime/helpers/extends.js"),C=e.n(J),Y=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=e.n(Y),L=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),X=e.n(L),U=e("./node_modules/react/index.js"),N=e.n(U),H=e("./frontend/src/lib/components/icons.tsx"),Q=e("./frontend/src/lib/components/LemonButton/index.ts");function S(g){var x,W,b=g.value,A=g.onChange,_=g.options,E=g.placeholder,y=g.dropdownMatchSelectWidth,i=y===void 0?!0:y,K=g.allowClear,Z=K===void 0?!1:K,$=X()(g,["value","onChange","options","placeholder","dropdownMatchSelectWidth","allowClear"]),F=Object(U.useState)(b),w=s()(F,2),D=w[0],I=w[1],q=Object(U.useState)(!1),ee=s()(q,2),T=ee[0],R=ee[1],p=Z&&T&&!!D;return Object(U.useEffect)(function(){$.loading||I(b)},[b,$.loading]),N.a.createElement("div",{className:"LemonButtonWithSideAction",onMouseEnter:function(){return R(!0)},onMouseLeave:function(){return R(!1)}},N.a.createElement(Q.b,C()({popup:{overlay:Object.entries(_).map(function(B){var t=s()(B,2),n=t[0],a=t[1];return N.a.createElement(Q.a,{key:n,icon:a.icon,onClick:function(){n!=D&&(A(n),I(n))},type:n==D?"highlighted":"stealth",disabled:a.disabled,fullWidth:!0,"data-attr":a["data-attr"]},a.label||n)}),sameWidth:i,actionable:!0},icon:D&&((x=_[D])===null||x===void 0?void 0:x.icon),sideIcon:p?N.a.createElement("div",null):void 0},$),D&&(((W=_[D])===null||W===void 0?void 0:W.label)||D)||N.a.createElement("span",{className:"text-muted"},E)),p&&N.a.createElement(Q.a,{className:"side-button",type:"tertiary",icon:N.a.createElement(H.IconClose,null),tooltip:"Clear selection",onClick:function(){A(null),I(null)}}))}try{S.displayName="LemonSelect",S.__docgenInfo={description:"",displayName:"LemonSelect",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"LemonSelectOptions"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number | symbol | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: keyof O | null) => void"}},dropdownMatchSelectWidth:{defaultValue:{value:"true"},description:"",name:"dropdownMatchSelectWidth",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:{value:"false"},description:"",name:"allowClear",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'},{value:'"stealth"'},{value:'"highlighted"'},{value:'"primary-alt"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLButtonElement>"}},relaxedIconWidth:{defaultValue:null,description:"If icon width is relaxed, width of icon box is set to auto. Default icon width is 1em",name:"relaxedIconWidth",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"enum",value:[{value:'"muted"'},{value:'"highlighted"'},{value:'"success"'},{value:'"warning"'},{value:'"danger"'}]}},extendedContent:{defaultValue:null,description:"Extended content, e.g. a description, to show in the lower button area.",name:"extendedContent",required:!1,type:{name:"ReactNode"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},tooltip:{defaultValue:null,description:"Tooltip to display on hover.",name:"tooltip",required:!1,type:{name:"any"}},fullWidth:{defaultValue:null,description:"Whether the row should take up the parent's full width.",name:"fullWidth",required:!1,type:{name:"boolean"}},center:{defaultValue:null,description:"Whether the row's contents should be centered.",name:"center",required:!1,type:{name:"boolean"}},outlined:{defaultValue:null,description:"Whether the element should be outlined with a standard border.",name:"outlined",required:!1,type:{name:"any"}},compact:{defaultValue:null,description:"A compact row is slightly smaller than normal to better look inline with text.",name:"compact",required:!1,type:{name:"boolean"}},"data-attr":{defaultValue:null,description:"",name:"data-attr",required:!1,type:{name:"string"}},to:{defaultValue:null,description:"URL to link to.",name:"to",required:!1,type:{name:"string"}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:"string"}},sideIcon:{defaultValue:null,description:"",name:"sideIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | null"}},active:{defaultValue:null,description:"Whether hover style should be applied, signaling that the button is held active in some way.",name:"active",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/LemonSelect.tsx#LemonSelect"]={docgenInfo:S.__docgenInfo,name:"LemonSelect",path:"frontend/src/lib/components/LemonSelect.tsx#LemonSelect"})}catch(g){}},"./frontend/src/lib/components/PayGateMini/PayGateMini.tsx":function(k,O,e){"use strict";e.d(O,"a",function(){return i});var V=e("./node_modules/core-js/modules/es.symbol.js"),oe=e("./node_modules/core-js/modules/es.symbol.description.js"),z=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),te=e.n(z),J=e("./node_modules/react/index.js"),C=e.n(J),Y=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),L=e("./frontend/src/types.ts"),X=e("./frontend/src/scenes/userLogic.ts"),U=e("./frontend/src/lib/components/icons.tsx"),N=e("./frontend/src/lib/components/LemonButton/index.ts"),H=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Q=e.n(H),S=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss"),g=e.n(S),x={};x.insert="head",x.singleton=!1;var W=Q()(g.a,x),b=g.a.locals||{},A=e("./frontend/src/lib/constants.tsx"),_=e("./frontend/src/lib/utils.tsx"),E,y=(E={},te()(E,L.c.DASHBOARD_PERMISSIONING,{icon:C.a.createElement(U.IconEmojiPeople,null),description:"Share insights, collaborate on dashboards, manage permissions, and make decisions with your team.",umbrella:"advanced permissioning"}),te()(E,L.c.SSO_ENFORCEMENT,{icon:C.a.createElement(U.IconLock,null),description:"Enable SAML single sign-on, enforce login with SSO, automatic user provisioning, and advanced authentication controls.",umbrella:"advanced authentication"}),E);function i(K){var Z=K.feature,$=K.style,F=K.children,w=K.overrideShouldShowGate,D=Object(Y.useValues)(s.a),I=D.preflight,q=Object(Y.useValues)(X.a),ee=q.hasAvailableFeature,T=y[Z],R=A.o[Z],p=null;return!w&&!ee(Z)&&(I!=null&&I.cloud?R===A.t?p="add-card":p="contact-sales":p="check-licensing"),p?C.a.createElement("div",{className:"PayGateMini",style:$},C.a.createElement("div",{className:"PayGateMini__icon"},T.icon),C.a.createElement("div",{className:"PayGateMini__description"},T.description),C.a.createElement("div",{className:"PayGateMini__cta"},"Upgrade to ",p==="add-card"?"a premium":"the ".concat(Object(_.j)(R))," ","plan to gain ",T.umbrella,"."),C.a.createElement(N.a,{to:p==="add-card"?"/organization/billing":void 0,href:p==="contact-sales"?"mailto:sales@posthog.com?subject=Inquiring about ".concat(T.umbrella):p==="check-licensing"?"https://posthog.com/pricing":void 0,type:"secondary",fullWidth:!0,center:!0},p==="add-card"?"Upgrade now":p==="contact-sales"?"Contact sales":"Explore license options")):C.a.createElement(C.a.Fragment,null,F)}try{i.displayName="PayGateMini",i.__docgenInfo={description:`A sort of paywall for premium features.

Simply shows its children when the feature is available,
otherwise it presents upsell UI with the call to action that's most relevant for the circumstances.`,displayName:"PayGateMini",props:{feature:{defaultValue:null,description:"",name:"feature",required:!0,type:{name:"enum",value:[{value:'"sso_enforcement"'},{value:'"dashboard_permissioning"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},overrideShouldShowGate:{defaultValue:null,description:"",name:"overrideShouldShowGate",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"]={docgenInfo:i.__docgenInfo,name:"PayGateMini",path:"frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"})}catch(K){}},"./frontend/src/scenes/dashboard/ShareModal.tsx":function(k,O,e){"use strict";e.d(O,"a",function(){return D}),e.d(O,"b",function(){return I});var V=e("./node_modules/core-js/modules/es.array.concat.js"),oe=e.n(V),z=e("./node_modules/core-js/modules/es.array.map.js"),te=e.n(z),J=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),C=e.n(J),Y=e("./node_modules/react/index.js"),s=e.n(Y),L=e("./node_modules/kea/lib/index.esm.js"),X=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),U=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),N=e("./frontend/src/scenes/urls.ts"),H=e("./frontend/src/models/dashboardsModel.tsx"),Q=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),S=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),g=e("./frontend/src/lib/components/LemonButton/index.ts"),x=e("./frontend/src/lib/utils.tsx"),W=e("./frontend/src/lib/components/icons.tsx"),b=e("./frontend/src/types.ts"),A=e("./frontend/src/lib/constants.tsx"),_=e("./frontend/src/lib/components/LemonSelect.tsx"),E=e("./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts"),y=e("./frontend/src/lib/components/ProfilePicture/index.ts"),i=e("./node_modules/antd/es/select/index.js"),K=e("./node_modules/antd/es/button/index.js"),Z=e("./frontend/src/lib/components/Tooltip.tsx"),$=e("./frontend/src/lib/components/InfoMessage/InfoMessage.tsx"),F=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),w,D=(w={},C()(w,A.k.EveryoneInProjectCanEdit,{label:"Everyone in the project can edit",icon:s.a.createElement(W.IconLockOpen,null)}),C()(w,A.k.OnlyCollaboratorsCanEdit,{label:"Only those invited to this dashboard can edit",icon:s.a.createElement(W.IconLock,null)}),w);function I(T){var R=T.visible,p=T.onCancel,B=Object(L.useValues)(H.a),t=B.dashboardLoading,n=Object(L.useValues)(X.c),a=n.dashboard,c=n.canEditDashboard,P=Object(L.useActions)(X.c),j=P.setIsSharedDashboard,u=a?window.location.origin+N.a.sharedDashboard(a.share_token):"";return a?s.a.createElement(S.a,{visible:R,onCancel:p},s.a.createElement(q,{dashboardId:a.id}),s.a.createElement("section",null,s.a.createElement("h5",null,"External sharing"),s.a.createElement(Q.a,{id:"share-dashboard-switch",label:"Share dashboard publicly",checked:a.is_shared,loading:t,"data-attr":"share-dashboard-switch",onChange:function(o){j(a.id,o)},type:"primary",disabled:!c,rowStyle:{height:"3rem",fontWeight:600}}),a.is_shared?s.a.createElement(s.a.Fragment,null,a.share_token&&s.a.createElement(g.a,{"data-attr":"share-dashboard-link-button",onClick:function(){return Object(x.t)(u,"link")},icon:s.a.createElement(W.IconCopy,null),style:{width:"100%",height:"3rem",border:"1px solid var(--border)"}},"Copy shared dashboard link"),s.a.createElement("div",null,"Use this HTML snippet to embed the dashboard on your website:"),s.a.createElement(U.a,{language:U.b.HTML},'<iframe width="100%" height="100%" frameborder="0" src="'.concat(u,'?embedded" />'))):null)):null}function q(T){var R=T.dashboardId,p=Object(L.useValues)(H.a),B=p.dashboardLoading,t=Object(L.useValues)(X.c),n=t.dashboard,a=t.canEditDashboard,c=t.canRestrictDashboard,P=Object(L.useActions)(X.c),j=P.triggerDashboardUpdate,u=Object(L.useValues)(Object(E.a)({dashboardId:R})),l=u.allCollaborators,o=u.explicitCollaboratorsLoading,d=u.addableMembers,f=u.explicitCollaboratorsToBeAdded,m=Object(L.useActions)(Object(E.a)({dashboardId:R})),M=m.deleteExplicitCollaborator,r=m.setExplicitCollaboratorsToBeAdded,h=m.addExplicitCollaborators;return n&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h5",null,"Collaboration settings"),s.a.createElement(F.a,{feature:b.c.DASHBOARD_PERMISSIONING,style:{marginTop:"0.75rem"}},s.a.createElement("section",null,(!a||!c)&&s.a.createElement($.a,null,a?"You aren't allowed to change the restriction level \u2013 only the dashboard owner and project admins can.":"You aren't allowed to change sharing settings \u2013 only dashboard collaborators with edit settings can."),s.a.createElement(_.a,{value:n.effective_restriction_level,onChange:function(G){return j({restriction_level:G})},options:D,loading:B,type:"stealth",outlined:!0,style:{height:"3rem",width:"100%"},disabled:!c})),n.restriction_level>A.k.EveryoneInProjectCanEdit&&s.a.createElement("section",null,s.a.createElement("h5",null,"Collaborators"),a&&s.a.createElement("div",{style:{display:"flex",marginBottom:"0.75rem"}},s.a.createElement(i.a,{mode:"multiple",placeholder:"Search for team members to add\u2026",loading:o,value:f,onChange:function(G){return r(G)},showArrow:!0,showSearch:!0,style:{flexGrow:1}},d.map(function(v){return s.a.createElement(i.a.Option,{key:v.id,value:v.uuid,title:"".concat(v.first_name," (").concat(v.email,")")},s.a.createElement(y.a,{name:v.first_name,email:v.email,size:"sm",style:{display:"inline-flex",marginRight:8}}),v.first_name," (",v.email,")")})),s.a.createElement(K.a,{type:"primary",style:{flexShrink:0,marginLeft:"0.5rem"},loading:o,disabled:f.length===0,onClick:function(){return h()}},"Add")),l.map(function(v){return s.a.createElement(ee,{key:v.user.uuid,collaborator:v,deleteCollaborator:a?M:void 0})}))))}function ee(T){var R=T.collaborator,p=T.deleteCollaborator,B=R.user,t=R.level,n=t<=A.j.CanEdit,a=A.F[t];return s.a.createElement("div",{className:"CollaboratorRow"},s.a.createElement(y.a,{email:B.email,name:B.first_name,size:"md",showName:!0}),s.a.createElement(Z.a,{title:n?null:"".concat(B.first_name||"This person"," ").concat(t===A.j._Owner?"created the dashboard":"is a project administrator"),placement:"left"},s.a.createElement("div",{className:"CollaboratorRow__details"},s.a.createElement("span",null,n?a:s.a.createElement("b",null,a)),p&&s.a.createElement(g.a,{icon:s.a.createElement(W.IconCancel,null),onClick:function(){return p(B.uuid)},type:"stealth",tooltip:n?"Remove invited collaborator":null,disabled:!n,status:"danger",compact:!0}))))}try{I.displayName="ShareModal",I.__docgenInfo={description:"",displayName:"ShareModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"]={docgenInfo:I.__docgenInfo,name:"ShareModal",path:"frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"})}catch(T){}},"./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts":function(k,O,e){"use strict";e.d(O,"a",function(){return B});var V=e("./node_modules/core-js/modules/es.array.concat.js"),oe=e.n(V),z=e("./node_modules/core-js/modules/es.array.filter.js"),te=e.n(z),J=e("./node_modules/core-js/modules/es.array.find.js"),C=e.n(J),Y=e("./node_modules/core-js/modules/es.array.iterator.js"),s=e.n(Y),L=e("./node_modules/core-js/modules/es.array.map.js"),X=e.n(L),U=e("./node_modules/core-js/modules/es.array.some.js"),N=e.n(U),H=e("./node_modules/core-js/modules/es.object.to-string.js"),Q=e.n(H),S=e("./node_modules/core-js/modules/es.promise.js"),g=e.n(S),x=e("./node_modules/core-js/modules/es.string.iterator.js"),W=e.n(x),b=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),A=e.n(b),_=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),E=e.n(_),y=e("./node_modules/@babel/runtime/regenerator/index.js"),i=e.n(y),K=e("./node_modules/regenerator-runtime/runtime.js"),Z=e.n(K),$=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),F=e.n($),w=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/lib/api.ts"),I=e("./frontend/src/lib/constants.tsx"),q=e("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),ee=e("./frontend/src/scenes/dashboard/dashboardLogic.ts");function T(t,n){var a;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(a=R(t))||n&&t&&typeof t.length=="number"){a&&(t=a);var c=0,P=function(){};return{s:P,n:function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}},e:function(d){throw d},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j=!0,u=!1,l;return{s:function(){a=t[Symbol.iterator]()},n:function(){var d=a.next();return j=d.done,d},e:function(d){u=!0,l=d},f:function(){try{!j&&a.return!=null&&a.return()}finally{if(u)throw l}}}}function R(t,n){if(!!t){if(typeof t=="string")return p(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(t,n)}}function p(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,c=new Array(n);a<n;a++)c[a]=t[a];return c}var B=Object(w.kea)({path:function(n){return["scenes","dashboard","dashboardCollaboratorsLogic",n]},props:{},key:function(n){return n.dashboardId},connect:function(n){return{values:[q.b,["admins","plainMembers","allMembers","allMembersLoading"],Object(ee.c)({id:n.dashboardId}),["dashboard"]]}},actions:{deleteExplicitCollaborator:function(n){return{userUuid:n}},setExplicitCollaboratorsToBeAdded:function(n){return{userUuids:n}},addExplicitCollaborators:!0},reducers:{explicitCollaboratorsToBeAdded:[[],{setExplicitCollaboratorsToBeAdded:function(n,a){var c=a.userUuids;return c}}]},loaders:function(n){var a=n.values,c=n.props,P=n.actions;return{explicitCollaborators:[[],{loadExplicitCollaborators:function(){var j=F()(i.a.mark(function l(){var o;return i.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,D.a.dashboards.collaborators.list(c.dashboardId);case 2:return o=f.sent,o.sort(function(m,M){return m.user.first_name.localeCompare(M.user.first_name)}),f.abrupt("return",o);case 5:case"end":return f.stop()}},l)}));function u(){return j.apply(this,arguments)}return u}(),addExplicitCollaborators:function(){var j=F()(i.a.mark(function l(){var o,d,f,m;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=a.explicitCollaboratorsToBeAdded,d=a.explicitCollaborators,P.setExplicitCollaboratorsToBeAdded([]),r.next=4,Promise.all(o.map(function(){var h=F()(i.a.mark(function v(G){return i.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,D.a.dashboards.collaborators.create(c.dashboardId,G,I.j.CanEdit);case 2:return ne.abrupt("return",ne.sent);case 3:case"end":return ne.stop()}},v)}));return function(v){return h.apply(this,arguments)}}()));case 4:return f=r.sent,m=[].concat(E()(d),E()(f)),m.sort(function(h,v){return h.user.first_name.localeCompare(v.user.first_name)}),r.abrupt("return",m);case 8:case"end":return r.stop()}},l)}));function u(){return j.apply(this,arguments)}return u}(),deleteExplicitCollaborator:function(){var j=F()(i.a.mark(function l(o){var d;return i.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=o.userUuid,m.next=3,D.a.dashboards.collaborators.delete(c.dashboardId,d);case 3:return m.abrupt("return",a.explicitCollaborators.filter(function(M){return M.user.uuid!==d}));case 4:case"end":return m.stop()}},l)}));function u(l){return j.apply(this,arguments)}return u}()}]}},selectors:{allCollaborators:[function(t){return[t.explicitCollaborators,t.admins,t.allMembers,t.dashboard]},function(t,n,a,c){var P=[],j;c!=null&&c.created_by&&(j=c.created_by.uuid,P.push({user:c.created_by,level:I.j._Owner}));var u=(c==null?void 0:c.effective_restriction_level)===I.k.EveryoneInProjectCanEdit?a:n;return P.push.apply(P,E()(t.filter(function(l){return!u.find(function(o){return o.user.uuid===l.user.uuid})&&l.user.uuid!==j}))),P.push.apply(P,E()(u.filter(function(l){return l.user.uuid!==j}).map(function(l){return{user:l.user,level:I.j._ProjectAdmin}}))),P.sort(function(l,o){return l.level===o.level?l.user.first_name.localeCompare(o.user.first_name):o.level-l.level}),P}],addableMembers:[function(t){return[t.allCollaborators,t.plainMembers]},function(t,n){var a=[],c=T(n),P;try{var j=function(){var l=P.value;t.some(function(o){return o.user.uuid===l.user.uuid})||a.push(l.user)};for(c.s();!(P=c.n()).done;)j()}catch(u){c.e(u)}finally{c.f()}return a.sort(function(u,l){return u.first_name.localeCompare(l.first_name)}),a}],addableMembersLoading:[function(t){return[t.explicitCollaboratorsLoading,t.allMembersLoading]},function(t,n){return t||n}]},events:function(n){var a=n.actions;return{afterMount:function(){a.loadExplicitCollaborators()}}}})},"./frontend/src/scenes/dashboard/dashboardsLogic.ts":function(k,O,e){"use strict";e.d(O,"a",function(){return b}),e.d(O,"b",function(){return A});var V=e("./node_modules/core-js/modules/es.array.filter.js"),oe=e.n(V),z=e("./node_modules/core-js/modules/es.array.flat-map.js"),te=e.n(z),J=e("./node_modules/core-js/modules/es.array.map.js"),C=e.n(J),Y=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),s=e.n(Y),L=e("./node_modules/core-js/modules/es.function.name.js"),X=e.n(L),U=e("./node_modules/core-js/modules/es.regexp.exec.js"),N=e.n(U),H=e("./node_modules/core-js/modules/es.string.search.js"),Q=e.n(H),S=e("./node_modules/kea/lib/index.esm.js"),g=e("./node_modules/fuse.js/dist/fuse.esm.js"),x=e("./frontend/src/models/dashboardsModel.tsx"),W=e("./frontend/src/lib/utils.tsx"),b;(function(_){_.All="all",_.Pinned="pinned",_.Shared="shared"})(b||(b={}));var A=Object(S.kea)({path:["scenes","dashboard","dashboardsLogic"],actions:{setSearchTerm:function(E){return{searchTerm:E}},setCurrentTab:function(E){return{tab:E}}},reducers:{searchTerm:{setSearchTerm:function(E,y){var i=y.searchTerm;return i}},currentTab:[b.All,{setCurrentTab:function(E,y){var i=y.tab;return i}}]},selectors:{dashboards:[function(_){return[x.a.selectors.nameSortedDashboards,_.searchTerm,_.currentTab]},function(_,E,y){return _=_.filter(function(i){return!i.deleted}).sort(function(i,K){var Z,$;return((Z=i.name)!==null&&Z!==void 0?Z:"Untitled").localeCompare(($=K.name)!==null&&$!==void 0?$:"Untitled")}),y===b.Pinned?_=_.filter(function(i){return i.pinned}):y===b.Shared&&(_=_.filter(function(i){return i.is_shared})),E?new g.a(_,{keys:["key","name"],threshold:.3}).search(E).map(function(i){return i.item}):_}],dashboardTags:[function(){return[x.a.selectors.nameSortedDashboards]},function(_){return Object(W.Cb)(_.flatMap(function(E){var y=E.tags;return y||""}),function(E){return E}).sort()}]}})},"./frontend/src/scenes/project/Settings/teamMembersLogic.tsx":function(k,O,e){"use strict";e.d(O,"a",function(){return P}),e.d(O,"b",function(){return j});var V=e("./node_modules/core-js/modules/es.array.concat.js"),oe=e.n(V),z=e("./node_modules/core-js/modules/es.array.filter.js"),te=e.n(z),J=e("./node_modules/core-js/modules/es.array.find.js"),C=e.n(J),Y=e("./node_modules/core-js/modules/es.array.iterator.js"),s=e.n(Y),L=e("./node_modules/core-js/modules/es.array.map.js"),X=e.n(L),U=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e.n(U),H=e("./node_modules/core-js/modules/es.promise.js"),Q=e.n(H),S=e("./node_modules/core-js/modules/es.string.iterator.js"),g=e.n(S),x=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),W=e.n(x),b=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),A=e.n(b),_=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),E=e.n(_),y=e("./node_modules/@babel/runtime/regenerator/index.js"),i=e.n(y),K=e("./node_modules/regenerator-runtime/runtime.js"),Z=e.n(K),$=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),F=e.n($),w=e("./node_modules/react/index.js"),D=e.n(w),I=e("./node_modules/kea/lib/index.esm.js"),q=e("./frontend/src/lib/api.ts"),ee=e("./frontend/src/lib/constants.tsx"),T=e("./frontend/src/types.ts"),R=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),p=e("./frontend/src/lib/utils/permissioning.ts"),B=e("./frontend/src/scenes/userLogic.ts"),t=e("./frontend/src/scenes/teamLogic.ts"),n=e("./frontend/src/lib/components/lemonToast.tsx");function a(u,l){var o=Object.keys(u);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(u);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(u,f).enumerable})),o.push.apply(o,d)}return o}function c(u){for(var l=1;l<arguments.length;l++){var o=arguments[l]!=null?arguments[l]:{};l%2?a(Object(o),!0).forEach(function(d){A()(u,d,o[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(d){Object.defineProperty(u,d,Object.getOwnPropertyDescriptor(o,d))})}return u}var P=ee.r.Admin,j=Object(I.kea)({path:["scenes","project","Settings","teamMembersLogic"],actions:{changeUserAccessLevel:function(l,o){return{user:l,newLevel:o}}},loaders:function(l){var o=l.values;return{explicitMembers:{__default:[],loadMembers:function(){var d=F()(i.a.mark(function m(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q.a.get("api/projects/".concat(t.a.values.currentTeamId,"/explicit_members/"));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},m)}));function f(){return d.apply(this,arguments)}return f}(),addMembers:function(){var d=F()(i.a.mark(function m(M){var r,h,v;return i.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return r=M.userUuids,h=M.level,ae.next=3,Promise.all(r.map(function(ne){return q.a.create("api/projects/".concat(t.a.values.currentTeamId,"/explicit_members/"),{user_uuid:ne,level:h})}));case 3:return v=ae.sent,n.a.success("Added ".concat(v.length," members").concat(v.length!==1&&"s"," to the project.")),ae.abrupt("return",[].concat(E()(o.explicitMembers),E()(v)));case 6:case"end":return ae.stop()}},m)}));function f(m){return d.apply(this,arguments)}return f}(),removeMember:function(){var d=F()(i.a.mark(function m(M){var r,h;return i.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return h=M.member,G.next=3,q.a.delete("api/projects/".concat(t.a.values.currentTeamId,"/explicit_members/").concat(h.user.uuid,"/"));case 3:return n.a.success(D.a.createElement(D.a.Fragment,null,h.user.uuid===((r=B.a.values.user)===null||r===void 0?void 0:r.uuid)?"Left":"Removed ".concat(h.user.first_name," (").concat(h.user.email,") from")," ","the project.")),G.abrupt("return",o.explicitMembers.filter(function(ae){return ae.user.uuid!==h.user.uuid}));case 5:case"end":return G.stop()}},m)}));function f(m){return d.apply(this,arguments)}return f}()}}},selectors:function(l){var o=l.selectors;return{allMembers:[function(){return[t.a.selectors.currentTeam,B.a.selectors.hasAvailableFeature,o.explicitMembers,R.a.selectors.members]},function(d,f,m,M){return!(d!=null&&d.access_control)||!f(T.c.PROJECT_BASED_PERMISSIONING)?M.map(function(r){return c(c({},r),{},{explicit_team_level:null,organization_level:r.level})}):M.filter(function(r){var h=r.level;return h>=P}).map(function(r){return c(c({},r),{},{explicit_team_level:null,organization_level:r.level})}).concat(m.filter(function(r){var h=r.parent_level;return h<P}).map(function(r){return c(c({},r),{},{level:r.effective_level,explicit_team_level:r.level,organization_level:r.parent_level})}))}],allMembersLoading:[function(){return[o.explicitMembersLoading,R.a.selectors.membersLoading]},function(d,f){return d||f}],admins:[function(){return[o.allMembers]},function(d){return d.filter(function(f){var m=f.level;return m>=ee.C.Admin})}],plainMembers:[function(){return[o.allMembers]},function(d){return d.filter(function(f){var m=f.level;return m<ee.C.Admin})}],addableMembers:[function(){return[o.explicitMembers,R.a.selectors.members,B.a.selectors.user]},function(d,f,m){return f.filter(function(M){var r=M.user;return r.uuid!==m.uuid}).map(function(M){var r=d.find(function(v){return v.user.uuid===M.user.uuid}),h;return r?h=Math.max(r.effective_level,M.level):h=M.level>=P?M.level:null,c(c({},M),{},{level:h,explicit_team_level:r?r.level:null,organization_level:M.level})})}]}},listeners:function(l){var o=l.actions;return{changeUserAccessLevel:function(){var d=F()(i.a.mark(function m(M){var r,h;return i.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return r=M.user,h=M.newLevel,G.next=3,q.a.update("api/projects/".concat(t.a.values.currentTeamId,"/explicit_members/").concat(r.uuid,"/"),{level:h});case 3:n.a.success(D.a.createElement(D.a.Fragment,null,"Made ",D.a.createElement("b",null,r.first_name)," project ",p.b.get(h))),o.loadMembers();case 5:case"end":return G.stop()}},m)}));function f(m){return d.apply(this,arguments)}return f}()}},events:function(l){var o=l.actions;return{afterMount:o.loadMembers}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/LemonModal/LemonModal.scss":function(k,O,e){var V=e("./node_modules/css-loader/dist/runtime/api.js");O=V(!1),O.push([k.i,".LemonModal .ant-modal-close-x{position:absolute;top:1rem;right:1rem;height:1.5rem;width:1.5rem}.LemonModal .ant-modal-body,.LemonModal .ant-modal-footer,.LemonModal .ant-modal-header{padding:1rem}.LemonModal .ant-modal-footer,.LemonModal .ant-modal-header{display:flex;align-items:center;line-height:1.5rem;border-color:var(--border)}.LemonModal .ant-modal-title{font-weight:600}.LemonModal .ant-modal-footer{justify-content:flex-end}.LemonModal section{width:100%}.LemonModal section:not(:first-child){padding-top:.75rem}.LemonModal section:not(:last-child){padding-bottom:.75rem;border-bottom:1px solid var(--border)}.LemonModal section>:not(:first-child){margin-top:.5rem}.LemonModal h5{line-height:1.5rem;margin:0;color:var(--muted)}",""]),k.exports=O},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss":function(k,O,e){var V=e("./node_modules/css-loader/dist/runtime/api.js");O=V(!1),O.push([k.i,".PayGateMini{display:flex;flex-direction:column;align-items:center;text-align:center;background:var(--bg-side);border-radius:var(--radius);padding:.75rem;font-size:.875rem}.PayGateMini__icon{display:flex;color:var(--warning);font-size:2rem}.PayGateMini__description{margin-top:.75rem;font-weight:600;color:var(--primary-alt)}.PayGateMini__cta{margin-bottom:.75rem}",""]),k.exports=O}}]);
