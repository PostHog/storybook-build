"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[88807],{"../../frontend/src/scenes/data-warehouse/editor/outputPaneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>OutputTab,o:()=>outputPaneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js");let OutputTab=function(OutputTab){return OutputTab.Results="results",OutputTab.Visualization="visualization",OutputTab.Variables="variables",OutputTab.Materialization="materialization",OutputTab.Endpoint="endpoint",OutputTab}({}),outputPaneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["data-warehouse","editor","outputPaneLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.tabId),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setActiveTab:tab=>({tab})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({activeTab:[OutputTab.Results,{setActiveTab:(_,_ref)=>{let{tab}=_ref;return tab}}]})])},"../../products/endpoints/frontend/EndpointsScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EndpointsScene:()=>EndpointsScene,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),ProductIntroduction=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),hedgehogs=__webpack_require__("../../frontend/src/lib/components/hedgehogs.tsx"),LemonBanner=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonTabs=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),outputPaneLogic=__webpack_require__("../../frontend/src/scenes/data-warehouse/editor/outputPaneLogic.ts"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes=__webpack_require__("../../frontend/src/scenes/scenes.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneDivider=__webpack_require__("../../frontend/src/layout/scenes/components/SceneDivider.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),types=__webpack_require__("../../frontend/src/types.ts"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.34.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),More=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonDivider=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonInput=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonInput/index.ts"),LemonTable=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),LemonTableLink=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),columnUtils=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),LemonTag=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTag/index.ts"),LemonToast=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonToast/LemonToast.tsx"),endpointLogic=__webpack_require__("../../products/endpoints/frontend/endpointLogic.tsx"),endpointsLogic=__webpack_require__("../../products/endpoints/frontend/endpointsLogic.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function Endpoints(_ref){let{tabId}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(EndpointsTable,{tabId:tabId})})}let EndpointsTable=_ref2=>{let{tabId}=_ref2,{setFilters,loadEndpoints}=(0,index_esm.useActions)((0,endpointsLogic.S)({tabId})),{endpoints,allEndpointsLoading,filters}=(0,index_esm.useValues)((0,endpointsLogic.S)({tabId})),{deleteEndpoint,updateEndpoint}=(0,index_esm.useActions)((0,endpointLogic.U)({tabId})),handleDelete=endpointName=>{src.dn.open({title:"Delete endpoint?",content:(0,jsx_runtime.jsx)("div",{className:"text-sm text-secondary",children:"Are you sure you want to delete this endpoint? This action cannot be undone."}),primaryButton:{children:"Delete",type:"primary",status:"danger",onClick:()=>{deleteEndpoint(endpointName)},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},handleDeactivate=endpointName=>{src.dn.open({title:"Deactivate endpoint?",content:(0,jsx_runtime.jsx)("div",{className:"text-sm text-secondary",children:"Are you sure you want to deactivate this endpoint? It will no longer be accessible via the API."}),primaryButton:{children:"Deactivate",type:"primary",status:"danger",onClick:()=>{updateEndpoint(endpointName,{is_active:!1})},size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})},columns=[{title:"Name",key:"name",dataIndex:"name",width:"25%",render:function Render(_,record){return(0,jsx_runtime.jsx)(LemonTableLink.i,{to:urls.j.endpoint(record.name),title:record.name,description:record.description})},sorter:(a,b)=>a.name.localeCompare(b.name)},(0,columnUtils.rw)(),(0,columnUtils.JB)(),(0,columnUtils.pD)("last_executed_at","Last executed at"),{title:"Endpoint path",key:"endpoint_path",dataIndex:"endpoint_path",render:(_,record)=>(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",size:"xsmall",onClick:()=>{navigator.clipboard.writeText(record.endpoint_path),LemonToast.UJ.success("Endpoint URL copied to clipboard")},className:"font-mono text-xs",children:record.endpoint_path})},{title:"Query type",key:"query_type",render:function Render(_,record){return(0,jsx_runtime.jsx)(LemonTag.o,{type:"option",children:record.query?.kind})},sorter:(a,b)=>a.query?.kind.localeCompare(b.query?.kind)},{title:"Status",key:"is_active",dataIndex:"is_active",align:"center",render:(_,record)=>(0,jsx_runtime.jsx)("span",{children:record.is_active?(0,jsx_runtime.jsx)(LemonTag.o,{type:"success",children:"Active"}):(0,jsx_runtime.jsx)(LemonTag.o,{type:"danger",children:"Inactive"})}),sorter:(a,b)=>Number(b.is_active)-Number(a.is_active)},{key:"actions",width:0,render:(_,record)=>(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{lib.router.actions.push(urls.j.endpointsUsage({requestNameFilter:[record.name]}))},fullWidth:!0,children:"View usage"}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{handleDeactivate(record.name)},fullWidth:!0,status:"alt",children:"Deactivate endpoint"}),(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{handleDelete(record.name)},fullWidth:!0,status:"danger",children:"Delete endpoint"})]})})}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap",children:[(0,jsx_runtime.jsx)(LemonInput.D,{type:"search",className:"w-1/3",placeholder:"Search for endpoints",onChange:x=>setFilters({search:x}),value:filters.search}),(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconRefresh,{}),onClick:()=>loadEndpoints(),loading:allEndpointsLoading,children:"Reload"})]}),(0,jsx_runtime.jsx)(LemonTable.g,{"data-attr":"endpoints-table",pagination:{pageSize:20},dataSource:endpoints,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns:columns,loading:allEndpointsLoading,defaultSorting:{columnKey:"last_executed_at",order:-1},emptyState:"No endpoints matching your filters!",nouns:["endpoint","endpoints"]})]})};var EndpointsUsage=__webpack_require__("../../products/endpoints/frontend/EndpointsUsage.tsx"),endpointsUsageLogic=__webpack_require__("../../products/endpoints/frontend/endpointsUsageLogic.tsx");let scene={component:EndpointsScene,logic:endpointsUsageLogic.u};function EndpointsScene(_ref){let{tabId}=_ref,{activeTab}=(0,index_esm.useValues)((0,endpointsUsageLogic.u)({tabId:tabId||""})),tabs=[{key:"endpoints",label:"Endpoints",content:(0,jsx_runtime.jsx)(Endpoints,{tabId:tabId||""}),link:urls.j.endpoints()},{key:"usage",label:"API usage",content:(0,jsx_runtime.jsx)(EndpointsUsage.EndpointsUsage,{tabId:tabId||""}),link:urls.j.endpointsUsage()}];return(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:endpointsUsageLogic.u,props:{key:"endpointsUsageScene",tabId:tabId||""},children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:endpointsLogic.S,props:{key:"endpointsLogic",tabId:tabId||""},children:(0,jsx_runtime.jsxs)(SceneContent._,{children:[(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:scenes.lc[sceneTypes.x.EndpointsScene].name,description:scenes.lc[sceneTypes.x.EndpointsScene].description,resourceType:{type:scenes.lc[sceneTypes.x.EndpointsScene].iconType||"default_icon_type"},actions:(0,jsx_runtime.jsx)(LemonButton.J,{size:"small","data-attr":"new-endpoint",onClick:()=>{lib.router.actions.push(urls.j.sqlEditor(void 0,void 0,void 0,void 0,outputPaneLogic.R.Endpoint))},type:"primary",tooltip:"Redirects you to the SQL Editor.",children:"New endpoint"})}),(0,jsx_runtime.jsx)(LemonBanner.V,{type:"warning",dismissKey:"endpoints-beta-banner",action:{children:"Send feedback",id:"endpoints-feedback-button"},children:(0,jsx_runtime.jsx)("p",{children:"Endpoints is in alpha and it may not be fully reliable. We are actively working on it and it may change while we work with you on what works best. Please let us know what you'd like to see here and/or report any issues directly to us!"})}),(0,jsx_runtime.jsx)(SceneDivider.V,{}),(0,jsx_runtime.jsx)(ProductIntroduction.C,{productName:"endpoints",productKey:types.Md.ENDPOINTS,thingName:"endpoint",description:"endpoints"===activeTab?"Endpoints help you create pre-built SQL queries that you can easily use in your application via our API. Please note that endpoints is in alpha and may not be fully reliable or set in stone.":"Monitor your API usage and cost. Please note that endpoints is in alpha and may not be fully reliable. Things will change as we learn what you need.",docsURL:"https://posthog.com/docs/endpoints",customHog:hedgehogs.BigLeaguesHog,isEmpty:!1,action:()=>lib.router.actions.push(urls.j.sqlEditor(void 0,void 0,void 0,void 0,outputPaneLogic.R.Endpoint))}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:activeTab,"data-attr":"endpoints-tabs",tabs:tabs,sceneInset:!0})]})})})}},"../../products/endpoints/frontend/endpointLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>endpointLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonToast/LemonToast.tsx"),lib_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/utils.tsx"),lib_utils_kea_logic_builders__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/utils/kea-logic-builders.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts"),_endpointsLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../products/endpoints/frontend/endpointsLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let NEW_ENDPOINT={name:"new-endpoint",description:"New endpoint returns this and that",query:{kind:_queries_schema_schema_general__WEBPACK_IMPORTED_MODULE_8__.OH.HogQLQuery,query:"select * from events limit 1"}},endpointLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["products","endpoints","frontend","endpointLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.tabId),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({actions:[_endpointsLogic__WEBPACK_IMPORTED_MODULE_9__.S,["loadEndpoints"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setEndpointName:endpointName=>({endpointName}),setEndpointDescription:endpointDescription=>({endpointDescription}),setActiveCodeExampleTab:tab=>({tab}),setIsUpdateMode:isUpdateMode=>({isUpdateMode}),setSelectedEndpointName:selectedEndpointName=>({selectedEndpointName}),setCacheAge:cacheAge=>({cacheAge}),createEndpoint:request=>({request}),createEndpointSuccess:response=>({response}),createEndpointFailure:error=>({error}),updateEndpoint:(name,request)=>({name,request}),updateEndpointSuccess:response=>({response}),updateEndpointFailure:error=>({error}),deleteEndpoint:name=>({name}),deleteEndpointSuccess:response=>({response}),deleteEndpointFailure:error=>({error}),deactivateEndpoint:name=>({name}),deactivateEndpointSuccess:response=>({response}),deactivateEndpointFailure:error=>({error})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({endpointName:[null,{setEndpointName:(_,_ref)=>{let{endpointName}=_ref;return endpointName}}],endpointDescription:[null,{setEndpointDescription:(_,_ref2)=>{let{endpointDescription}=_ref2;return endpointDescription}}],activeCodeExampleTab:["terminal",{setActiveCodeExampleTab:(_,_ref3)=>{let{tab}=_ref3;return tab}}],isUpdateMode:[!1,{setIsUpdateMode:(_,_ref4)=>{let{isUpdateMode}=_ref4;return isUpdateMode}}],selectedEndpointName:[null,{setSelectedEndpointName:(_,_ref5)=>{let{selectedEndpointName}=_ref5;return selectedEndpointName}}],cacheAge:[null,{setCacheAge:(_,_ref6)=>{let{cacheAge}=_ref6;return cacheAge}}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref7=>{let{actions}=_ref7;return{endpoint:[null,{loadEndpoint:async name=>{var _endpoint$cache_age_s;if(!name||"new"===name)return{...NEW_ENDPOINT};let endpoint=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.endpoint.get(name);try{let executionTimes=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.endpoint.getLastExecutionTimes({names:[name]});executionTimes[name]&&(endpoint.last_executed_at=executionTimes[name])}catch(error){console.error("Failed to fetch last execution time:",error)}return actions.setCacheAge(null!==(_endpoint$cache_age_s=endpoint.cache_age_seconds)&&void 0!==_endpoint$cache_age_s?_endpoint$cache_age_s:null),endpoint}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref8=>{let{actions}=_ref8;return{createEndpoint:async _ref9=>{let{request}=_ref9;try{request.name&&(request.name=(0,lib_utils__WEBPACK_IMPORTED_MODULE_5__.lV)(request.name));let response=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.endpoint.create(request);actions.createEndpointSuccess(response)}catch(error){console.error("Failed to create endpoint:",error),actions.createEndpointFailure(error)}},createEndpointSuccess:_ref10=>{let{response}=_ref10;actions.setEndpointName(""),actions.setEndpointDescription(""),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.success((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:["Endpoint created successfully!",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("br",{}),"You will be redirected to the endpoint page."]}),{onClose:()=>{kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.endpoint(response.name))}})},createEndpointFailure:_ref11=>{let{error}=_ref11;console.error("Failed to create endpoint:",error),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.error("Failed to create endpoint")},updateEndpoint:async _ref12=>{let{name,request}=_ref12;try{let response=await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.endpoint.update(name,request);actions.updateEndpointSuccess(response)}catch(error){console.error("Failed to update endpoint:",error),actions.updateEndpointFailure(error)}},updateEndpointSuccess:_ref13=>{let{response}=_ref13;lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.success("Endpoint updated successfully"),actions.loadEndpoint(response.name)},updateEndpointFailure:_ref14=>{let{error}=_ref14;console.error("Failed to update endpoint:",error),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.error("Failed to update endpoint")},deleteEndpoint:async _ref15=>{let{name}=_ref15;try{await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.endpoint.delete(name),actions.deleteEndpointSuccess(name)}catch(error){console.error("Failed to delete endpoint:",error),actions.deleteEndpointFailure(error)}},deleteEndpointSuccess:()=>{lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.success("Endpoint deleted successfully"),actions.loadEndpoints()},deleteEndpointFailure:_ref16=>{let{error}=_ref16;console.error("Failed to delete endpoint:",error),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.error("Failed to delete endpoint")},deactivateEndpoint:async _ref17=>{let{name}=_ref17;try{await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.endpoint.update(name,{is_active:!1}),actions.deactivateEndpointSuccess({})}catch(error){console.error("Failed to deactivate endpoint:",error),actions.deactivateEndpointFailure(error)}},deactivateEndpointSuccess:()=>{lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.success("Endpoint deactivated successfully"),actions.loadEndpoints()},deactivateEndpointFailure:_ref18=>{let{error}=_ref18;console.error("Failed to deactivate endpoint:",error),lib_lemon_ui_LemonToast_LemonToast__WEBPACK_IMPORTED_MODULE_4__.UJ.error("Failed to deactivate endpoint")}}}),(0,lib_utils_kea_logic_builders__WEBPACK_IMPORTED_MODULE_6__.Y)()])},"../../products/endpoints/frontend/endpointsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>endpointsLogic});var fuse_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts");let endpointsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["products","endpoints","frontend","endpointsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.tabId),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setFilters:filters=>({filters})}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(()=>({allEndpoints:[[],{loadEndpoints:async()=>{let haystack=(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.endpoint.list()).results||[];if(haystack.length>0){let names={names:haystack.map(endpoint=>endpoint.name)},lastExecutionTimes=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.endpoint.getLastExecutionTimes(names);haystack=haystack.map(endpoint=>({...endpoint,last_executed_at:lastExecutionTimes[endpoint.name]}))}return haystack}}]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({filters:[{search:""},{setFilters:(state,_ref)=>{let{filters}=_ref;return{...state,...filters}}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({endpoints:[s=>[s.allEndpoints,s.filters],(allEndpoints,filters)=>filters.search?new fuse_js__WEBPACK_IMPORTED_MODULE_3__.Z(allEndpoints,{keys:["name","description","query.query"],threshold:.3}).search(filters.search).map(result=>result.item):allEndpoints]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref2=>{let{actions}=_ref2;actions.loadEndpoints()})])}}]);