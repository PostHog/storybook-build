(window.webpackJsonp=window.webpackJsonp||[]).push([[313],{"./frontend/src/scenes/performance/WebPerformance.tsx":function(W,c,n){"use strict";n.r(c),n.d(c,"WebPerformance",function(){return j}),n.d(c,"scene",function(){return D});var R=n("./frontend/src/scenes/performance/WebPerformance.scss"),_=n("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),P=n("./frontend/src/lib/components/PageHeader.tsx"),a=n("./frontend/src/scenes/performance/webPerformanceLogic.tsx"),d=n("./frontend/src/scenes/urls.ts"),l=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),b=n("./frontend/src/scenes/performance/WebPerformanceWaterfallChart.tsx"),E=n("./frontend/src/lib/components/icons.tsx"),i=n("./frontend/@posthog/lemon-ui/src/index.ts"),g=n("./frontend/src/lib/logic/featureFlagLogic.ts"),x=n("./frontend/src/lib/constants.tsx"),h=n("./frontend/src/queries/Query/Query.tsx"),m=n("./frontend/src/queries/schema.ts"),u=n("./frontend/src/lib/utils.tsx"),p=n("./frontend/src/lib/components/TZLabel/index.tsx"),e=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),A=n.n(e);function f(o){return Object(e.jsx)("div",{children:Object(e.jsx)(i.LemonButton,{"data-attr":`view-waterfall-button-${o.record.pageview_id}`,icon:Object(e.jsx)(E.IconPlay,{}),type:"secondary",size:"small",to:d.a.webPerformanceWaterfall(o.record),children:"View waterfall chart"})})}const L=()=>{const{recentPageViews:o,recentPageViewsLoading:O}=Object(l.useValues)(a.b),{featureFlags:v}=Object(l.useValues)(g.a),T=v[x.i.DATA_EXPLORATION_LIVE_EVENTS],M=[{title:"Page",key:"page_url",width:"45%",render:function(r,t){return Object(e.jsx)("div",{className:"max-w-100 overflow-auto",children:t.page_url})}},{title:"Page load",key:"duration",render:function(r,t){return t.duration?Object(e.jsx)(e.Fragment,{children:Object(u.P)(t.duration/1e3)}):Object(e.jsx)(e.Fragment,{children:"-"})}},{title:"timestamp",key:"timestamp",render:function(r,t){return Object(e.jsx)(p.a,{time:t.timestamp})}},{title:"",render:function(r,t){return Object(e.jsx)(f,{record:t,onClick:()=>console.log(t)})}}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"pt-4 border-t"}),T?Object(e.jsx)(h.a,{query:{kind:m.a.DataTableNode,source:{kind:m.a.RecentPerformancePageViewNode},columns:["context.columns.page_url","context.columns.duration","timestamp","context.columns.waterfallButton"],showReload:!0,showColumnConfigurator:!1,showExport:!1,showEventFilter:!1,showPropertyFilter:!1,showActions:!1,expandable:!1},context:{columns:{page_url:{title:"Page",render:function(r){let{record:t}=r;return t.page_url?Object(e.jsx)("div",{className:"max-w-100 overflow-auto",children:t.page_url}):Object(e.jsx)(e.Fragment,{children:"-"})}},duration:{title:"Page load",render:function(r){let{record:t}=r;return t.duration?Object(e.jsx)(e.Fragment,{children:Object(u.P)(t.duration/1e3)}):Object(e.jsx)(e.Fragment,{children:"-"})}},waterfallButton:{title:"",render:function(r){let{record:t}=r;return Object(e.jsx)(f,{record:t,onClick:()=>console.log(t)})}}}}}):Object(e.jsx)(i.LemonTable,{"data-attr":"web-performance-table",dataSource:o,loading:O,columns:M,loadingSkeletonRows:20,emptyState:O?void 0:Object(e.jsx)(e.Fragment,{children:"Did not load any performance events"}),rowKey:s=>s.pageview_id})]})},j=()=>{const{currentPage:o}=Object(l.useValues)(a.b);return Object(e.jsxs)("div",{className:"web-performance",children:[Object(e.jsx)(P.a,{title:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:["Web Performance",Object(e.jsx)(_.a,{type:"warning",className:"uppercase",children:"Alpha"})]}),caption:o===a.a.TABLE?Object(e.jsxs)("div",{children:[Object(e.jsx)("p",{children:"Shows page view events where performance information has been captured. Not all events have all performance information."}),Object(e.jsxs)("p",{children:["To capture performance information you must be using posthog-js and set"," ",Object(e.jsx)("code",{children:"_capture_performance"})," to true. See the"," ",Object(e.jsx)(i.Link,{to:"https://posthog.com/docs/integrate/client/js#config",disableClientSideRouting:!0,children:"config instructions in our handbook"})]})]}):null}),Object(e.jsx)("div",{children:o===a.a.TABLE?Object(e.jsx)(L,{}):o===a.a.WATERFALL_CHART?Object(e.jsx)(b.b,{}):Object(e.jsx)(e.Fragment,{children:"404?"})})]})},D={component:j,logic:a.b,paramsToProps:()=>({sceneUrl:d.a.webPerformance()})}}}]);
