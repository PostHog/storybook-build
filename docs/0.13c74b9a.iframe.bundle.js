(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/RestrictedArea.tsx":function(Ee,A,e){"use strict";e.d(A,"b",function(){return R}),e.d(A,"a",function(){return N});var G=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(G),le=e("./node_modules/kea/lib/index.esm.js"),ie=e("./node_modules/react/index.js"),X=e.n(ie),Q=e("./frontend/src/scenes/organizationLogic.tsx"),ee=e("./frontend/src/lib/constants.tsx"),B=e("./frontend/src/lib/components/Tooltip.tsx"),ce=e("./frontend/src/lib/utils/permissioning.ts"),te=e("./frontend/src/scenes/teamLogic.tsx"),R;(function(P){P.Organization="organization",P.Project="project"})(R||(R={}));function N(P){var U=P.Component,je=P.minimumAccessLevel,z=P.scope,ue=z===void 0?R.Organization:z,Oe=Object(le.useValues)(Q.a),t=Oe.currentOrganization,M=Object(le.useValues)(te.a),ge=M.currentTeam,F=Object(ie.useMemo)(function(){var $;if(ue===R.Project){if(!ge)return"Loading current project\u2026";$=ge.effective_membership_level}else{if(!t)return"Loading current organization\u2026";$=t.membership_level}return $===null?"You don't have access to the current ".concat(ue,"."):$<je?je===ee.n.Owner?"This area is restricted to the ".concat(ue," owner."):"This area is restricted to ".concat(ue," ").concat(ce.b.get(je),"s and up. Your level is ").concat(ce.b.get($),"."):null},[t]);return F?X.a.createElement(B.a,{title:F,placement:"topLeft",delayMs:0},X.a.createElement("span",null,X.a.createElement(U,{isRestricted:!0,restrictionReason:F}))):X.a.createElement(U,{isRestricted:!1,restrictionReason:null})}try{N.displayName="RestrictedArea",N.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:N.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(P){}try{R.Organization.displayName="RestrictionScope.Organization",R.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:R.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(P){}try{R.Project.displayName="RestrictionScope.Project",R.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:R.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(P){}},"./frontend/src/scenes/actions/EventName.tsx":function(Ee,A,e){"use strict";e.d(A,"a",function(){return Q}),e.d(A,"b",function(){return ee});var G=e("./node_modules/react/index.js"),ae=e.n(G),le=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ie=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),X=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function Q(B){var ce=B.value,te=B.onChange;return ae.a.createElement(ie.d,{groupType:X.a.Events,onChange:te,value:ce,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(N){return ae.a.createElement(le.a,{value:N,disablePopover:!0})},allowClear:!0})}function ee(B){var ce=B.value,te=B.onChange;return ae.a.createElement(ie.b,{groupType:X.a.Events,onChange:te,value:ce,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(N){return ae.a.createElement(le.a,{value:N,disablePopover:!0})},allowClear:!0})}try{Q.displayName="EventName",Q.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:Q.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(B){}try{ee.displayName="LemonEventName",ee.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:ee.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(B){}},"./frontend/src/scenes/events/EventDetails.tsx":function(Ee,A,e){"use strict";e.d(A,"a",function(){return me});var G=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ae=e.n(G),le=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ie=e.n(le),X=e("./node_modules/core-js/modules/es.object.keys.js"),Q=e("./node_modules/core-js/modules/es.symbol.js"),ee=e("./node_modules/core-js/modules/es.array.filter.js"),B=e("./node_modules/core-js/modules/es.object.to-string.js"),ce=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),te=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),R=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),N=e("./node_modules/react/index.js"),P=e.n(N),U=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),je=e("./frontend/src/lib/components/PropertiesTable.tsx"),z=e("./frontend/src/scenes/events/EventElements.tsx"),ue=e("./node_modules/antd/es/tabs/index.js"),Oe=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(Oe),M=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),ge=e("./frontend/src/lib/utils.tsx"),F=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function $(E,i){var j=Object.keys(E);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(E);i&&(g=g.filter(function(W){return Object.getOwnPropertyDescriptor(E,W).enumerable})),j.push.apply(j,g)}return j}function de(E){for(var i=1;i<arguments.length;i++){var j=arguments[i]!=null?arguments[i]:{};i%2?$(Object(j),!0).forEach(function(g){ae()(E,g,j[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(j)):$(Object(j)).forEach(function(g){Object.defineProperty(E,g,Object.getOwnPropertyDescriptor(j,g))})}return E}function ne(E){var i=E.event,j=i.event,g=i.id,W=i.uuid,Z=i.distinct_id,Se=i.properties,se=i.elements,De=i.timestamp,Le=i.person,ye=t()(i,F),Y=de(de(de(de({},g?{id:g}:null),W?{uuid:W}:null),{},{timestamp:De,event:j,distinct_id:Z,properties:Object(ge.zb)(Se)},se&&se.length>0?{elements:se}:null),ye);return P.a.createElement(M.a,{language:M.b.JSON},JSON.stringify(Y,null,4))}try{ne.displayName="EventJSON",ne.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:ne.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(E){}var Fe=e("./frontend/src/lib/dayjs.ts"),re=e("./frontend/src/lib/components/LemonButton/index.ts");function oe(E,i){var j=Object.keys(E);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(E);i&&(g=g.filter(function(W){return Object.getOwnPropertyDescriptor(E,W).enumerable})),j.push.apply(j,g)}return j}function L(E){for(var i=1;i<arguments.length;i++){var j=arguments[i]!=null?arguments[i]:{};i%2?oe(Object(j),!0).forEach(function(g){ae()(E,g,j[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(j)):oe(Object(j)).forEach(function(g){Object.defineProperty(E,g,Object.getOwnPropertyDescriptor(j,g))})}return E}var Ae=ue.a.TabPane;function me(E){for(var i=E.event,j=Object(N.useState)(!1),g=ie()(j,2),W=g[0],Z=g[1],Se={},se={},De=0,Le=0,ye=Object.keys(i.properties);Le<ye.length;Le++){var Y=ye[Le];U.e.event[Y]&&U.e.event[Y].hide&&(De+=1,W&&(se[Y]=i.properties[Y])),(!U.e.event[Y]||!U.e.event[Y].hide)&&(Se[Y]=i.properties[Y])}return P.a.createElement(ue.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},P.a.createElement(Ae,{tab:"Properties",key:"properties"},P.a.createElement(je.a,{properties:L(L({$timestamp:Object(Fe.a)(i.timestamp).toISOString()},Se),se),useDetectedPropertyType:!0}),De>0&&P.a.createElement(re.a,{className:"mb-2",onClick:function(){return Z(!W)},size:"small"},W?"Hide":"Show"," ",Object(ge.rb)(De,"hidden property","hidden properties"))),P.a.createElement(Ae,{tab:"JSON",key:"json"},P.a.createElement(ne,{event:i})),i.elements&&i.elements.length>0&&P.a.createElement(Ae,{tab:"Elements",key:"elements"},P.a.createElement(z.a,{event:i})))}try{me.displayName="EventDetails",me.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:me.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(E){}},"./frontend/src/scenes/events/EventElements.tsx":function(Ee,A,e){"use strict";e.d(A,"a",function(){return de});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ae=e.n(G),le=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ie=e.n(le),X=e("./node_modules/core-js/modules/es.array.join.js"),Q=e.n(X),ee=e("./node_modules/core-js/modules/es.array.fill.js"),B=e.n(ee),ce=e("./node_modules/core-js/modules/es.array.slice.js"),te=e.n(ce),R=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(R),P=e("./node_modules/core-js/modules/es.object.entries.js"),U=e.n(P),je=e("./node_modules/core-js/modules/es.array.concat.js"),z=e.n(je),ue=e("./node_modules/core-js/modules/es.regexp.exec.js"),Oe=e.n(ue),t=e("./node_modules/core-js/modules/es.string.replace.js"),M=e.n(t),ge=e("./node_modules/react/index.js"),F=e.n(ge);function $(ne){return Array(ne).fill("    ").join("")}function de(ne){var Fe=ne.event,re=ie()(Fe.elements||[]).reverse();return re=re.slice(Math.max(re.length-10,1)),F.a.createElement("div",null,re.map(function(oe,L){return F.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0,backgroundColor:L===re.length-1?"var(--primary)":void 0}},$(L),"<",oe.tag_name,oe.attr_id&&' id="'.concat(oe.attr_id,'"'),Object.entries(oe.attributes).map(function(Ae){var me=ae()(Ae,2),E=me[0],i=me[1];return F.a.createElement("span",{key:E}," ".concat(E.replace("attr__",""),'="').concat(i,'"'))}),">",oe.text,L===re.length-1&&F.a.createElement("span",null,"</",oe.tag_name,">"))}),ie()(re).reverse().slice(1).map(function(oe,L){return F.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0}},$(re.length-L-2),"</",oe.tag_name,">")}))}try{de.displayName="EventElements",de.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:de.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(ne){}},"./frontend/src/scenes/events/EventsTable.tsx":function(Ee,A,e){"use strict";e.d(A,"a",function(){return st});var G=e("./node_modules/core-js/modules/es.symbol.js"),ae=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),le=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ie=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),X=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Q=e.n(X),ee=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),B=e.n(ee),ce=e("./node_modules/core-js/modules/es.array.splice.js"),te=e("./node_modules/core-js/modules/es.array.filter.js"),R=e("./node_modules/core-js/modules/es.object.to-string.js"),N=e("./node_modules/core-js/modules/es.array.map.js"),P=e("./node_modules/core-js/modules/es.array.find.js"),U=e("./node_modules/core-js/modules/es.array.concat.js"),je=e("./node_modules/core-js/modules/es.array.join.js"),z=e("./node_modules/core-js/modules/es.object.keys.js"),ue=e("./node_modules/core-js/modules/es.regexp.to-string.js"),Oe=e("./node_modules/react/index.js"),t=e.n(Oe),M=e("./node_modules/kea/lib/index.esm.js"),ge=e("./frontend/src/scenes/events/EventDetails.tsx"),F=e("./frontend/src/lib/components/Link.tsx"),$=e("./node_modules/antd/es/popconfirm/index.js"),de=e("./node_modules/kea-router/lib/index.js"),ne=e("./node_modules/@babel/runtime/helpers/typeof.js"),Fe=e.n(ne),re=e("./node_modules/core-js/modules/es.regexp.exec.js"),oe=e("./node_modules/core-js/modules/es.string.replace.js");function L(r){var o=r.value;return t.a.createElement("span",{title:o},Fe()(o)==="object"?JSON.stringify(o):o&&o.toString().replace(/(^\w+:|^)\/\//,""))}try{L.displayName="Property",L.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:L.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(r){}var Ae=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function me(r,o){var l=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);o&&(u=u.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),l.push.apply(l,u)}return l}function E(r){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?me(Object(l),!0).forEach(function(u){Q()(r,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):me(Object(l)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(l,u))})}return r}function i(r){var o=r.property,l=r.value,u=r.filters,C=r.onClick,V=r.className,I=Object(Ae.c)(u.properties),Ie=I.find(function(q){return q.key===o&&q.value===l&&!q.operator})?I.filter(function(q){return q.key!==o||q.value!==l||q.operator}):[].concat(B()(I),[{key:o,value:l}]),He=Object(de.combineUrl)(window.location.pathname,E(E({},u),{},{properties:Ie}),{}),Be=He.url;return t.a.createElement(F.a,{to:Be,className:V,onClick:function(){C&&C(o,l)}},t.a.createElement(L,{value:l}))}try{i.displayName="FilterPropertyLink",i.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:i.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(r){}var j=e("./frontend/src/lib/utils.tsx"),g=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),W=e.n(g),Z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),Se=e.n(Z),se={};se.insert="head",se.singleton=!1;var De=W()(Se.a,se),Le=Se.a.locals||{},ye=e("./frontend/src/scenes/events/eventsTableLogic.ts"),Y=e("./frontend/src/scenes/persons/PersonHeader.tsx"),qe=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),We=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Re=e("./frontend/src/types.ts"),ve=e("./frontend/src/scenes/actions/EventName.tsx"),pt=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),et=e("./frontend/src/lib/components/Tooltip.tsx"),Ve=e("./node_modules/clsx/dist/clsx.m.js"),xe=Object(M.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(o){return{columnConfig:o}}},reducers:function(o){var l=o.props;return{selectedColumns:[l.startingColumns||"DEFAULT",{setSelectedColumns:function(C,V){var I=V.columnConfig;return I}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(r){return[r.selectedColumns]},function(r){return r==="DEFAULT"?7:r.length+2}]}}),Me=e("./frontend/src/scenes/urls.ts"),ft=e("./frontend/src/lib/components/LemonTable/index.ts"),v=e("./frontend/src/lib/components/icons.tsx"),n=e("./frontend/src/lib/components/LemonButton/index.ts"),s=e("./frontend/src/lib/components/LemonButton/More.tsx"),c=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),f=e("./frontend/src/scenes/teamLogic.tsx"),a=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function m(r){Object(Oe.useEffect)(function(){var o="hidden",l="visibilitychange";typeof document.msHidden!="undefined"?(o="msHidden",l="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(o="webkitHidden",l="webkitvisibilitychange");var u=function(){r(!document[o])};return document.addEventListener(l,u),function(){document.removeEventListener(l,u)}},[])}var d=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),p=e.n(d),pe=e("./node_modules/core-js/modules/es.array.includes.js"),k=e("./node_modules/core-js/modules/es.string.includes.js"),Ce=e("./node_modules/antd/es/row/index.js"),fe=e("./node_modules/antd/es/space/index.js"),_e=e("./node_modules/antd/es/button/index.js"),b=e("./node_modules/antd/es/col/index.js"),Ye=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),tt=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),S=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),nt=e.n(S),we={};we.insert="head",we.singleton=!1;var Pt=W()(nt.a,we),Et=nt.a.locals||{},bt=e("./node_modules/antd/lib/modal/Modal.js"),ze=e.n(bt),Rt=e("./node_modules/react-virtualized/dist/es/List/index.js"),Ct=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),rn=e("./node_modules/core-js/modules/es.array.from.js"),on=e("./node_modules/core-js/modules/es.string.iterator.js"),sn=e("./node_modules/core-js/modules/es.array.iterator.js"),an=e("./node_modules/core-js/modules/es.set.js"),ln=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Mt=Object(M.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[xe],actions:{selectColumn:function(o){return{column:o}},unselectColumn:function(o){return{column:o}},resetColumns:function(o){return{columns:o}},setColumns:function(o){return{columns:o}},toggleSaveAsDefault:!0,save:!0},reducers:function(o){var l=o.props;return{selectedColumns:[l.selectedColumns,{selectColumn:function(C,V){var I=V.column;return Array.from(new Set([].concat(B()(C),[I])))},unselectColumn:function(C,V){var I=V.column;return C.filter(function(Ie){return Ie!==I})},resetColumns:function(C,V){var I=V.columns;return I},setColumns:function(C,V){var I=V.columns;return I}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(C){return!C}}]}},listeners:function(o){var l=o.values,u=o.actions;return{save:function(){xe.actions.setSelectedColumns(l.selectedColumns),l.saveAsDefault&&(f.a.actions.updateCurrentTeam({live_events_columns:l.selectedColumns}),u.toggleSaveAsDefault())}}}}),It=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),rt=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Bt=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),gt=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),Tt=e("./frontend/src/lib/components/RestrictedArea.tsx"),Kt=e("./frontend/src/lib/constants.tsx"),Nt=Object(gt.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(v.SortableDragIcon,null))});function ot(r){var o=Object(M.useActions)(xe),l=o.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(n.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:l,icon:t.a.createElement(v.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Ut,{immutableColumns:r.immutableColumns,defaultColumns:r.defaultColumns}))}function Ut(r){var o=r.immutableColumns,l=r.defaultColumns,u=36,C=32,V=Object(M.useValues)(xe),I=V.selectedColumns,Ie=V.modalVisible,He=Object(M.useActions)(xe),Be=He.hideModal,q=Mt({selectedColumns:I==="DEFAULT"?l:I}),Te=Object(M.useActions)(q),at=Te.selectColumn,lt=Te.unselectColumn,it=Te.resetColumns,ct=Te.setColumns,Je=Te.toggleSaveAsDefault,Ge=Te.save,Xe=Object(M.useValues)(q),he=Xe.selectedColumns;function yt(H){var x=H.isRestricted;return t.a.createElement(Bt.a,{label:"Save as default for all project members",className:"mt-2","data-attr":"events-table-save-columns-as-default-toggle",bordered:!0,onChange:Je,defaultChecked:!1,disabled:x})}var Qe=function(x){var J=x.column,K=x.disabled;return t.a.createElement("div",{className:Object(Ve.a)(["column-display-item",{selected:!K,disabled:K}]),style:{height:"".concat(C,"px")}},!K&&t.a.createElement(Nt,null),t.a.createElement(We.a,{value:J}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(et.a,{title:K?"Reserved":"Remove"},K?t.a.createElement(Ye.a,null):t.a.createElement(tt.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return lt(J)}}))))},_t=Object(gt.b)(Qe),ut=function(x){var J=x.index,K=x.style,Pe=x.key,w=o==null?void 0:o.includes(he[J]);return t.a.createElement("div",{style:K,key:Pe},w&&t.a.createElement(Qe,{column:he[J],disabled:Boolean(w)}),!w&&t.a.createElement(_t,{column:he[J],index:J,collection:"selected-columns"}))},dt=Object(gt.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(Ct.a,null,function(H){var x=H.height,J=H.width;return t.a.createElement(Rt.b,{height:x,rowCount:he.length,rowRenderer:ut,rowHeight:u,width:J})}))}),mt=function(x){var J=x.oldIndex,K=x.newIndex,Pe=B()(he),w=Pe.splice(J,1),be=p()(w,1),ht=be[0];Pe.splice(K,0,ht),ct(Pe)};return t.a.createElement(ze.a,{id:"column-configurator-modal",centered:!0,visible:Ie,title:"Configure columns",onOk:Ge,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:Be,footer:t.a.createElement(Ce.a,null,t.a.createElement(fe.b,{style:{flexGrow:1},align:"start"},t.a.createElement(_e.a,{className:"text-blue",onClick:function(){return it(l)}},"Reset to defaults")),t.a.createElement(fe.b,null,t.a.createElement(_e.a,{className:"text-blue",type:"text",onClick:Be},"Close"),t.a.createElement(_e.a,{type:"primary",onClick:Ge},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement(Ce.a,{gutter:16,className:"lists"},t.a.createElement(b.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",he.length,") - Drag to reorder"),t.a.createElement(dt,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:mt,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(b.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(Ct.a,null,function(H){var x,J=H.height,K=H.width;return t.a.createElement(It.a,{height:J,width:K,taxonomicGroupTypes:[rt.a.EventProperties,rt.a.EventFeatureFlags],value:void 0,onChange:function(w,be){return be&&at(String(be))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:(x={},Q()(x,rt.a.EventProperties,he),Q()(x,rt.a.EventFeatureFlags,he),x)})})))),t.a.createElement(Tt.a,{Component:yt,minimumAccessLevel:Kt.n.Owner,scope:Tt.b.Project})))}try{ot.displayName="LemonTableConfig",ot.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:ot.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(r){}var Ft=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Wt=e("./frontend/src/scenes/events/EventBufferNotice.tsx");function At(r,o){var l=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);o&&(u=u.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),l.push.apply(l,u)}return l}function St(r){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?At(Object(l),!0).forEach(function(u){Q()(r,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):At(Object(l)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(l,u))})}return r}function st(r){var o,l=r.pageKey,u=r.fixedFilters,C=r.fixedColumns,V=r.sceneUrl,I=r.fetchMonths,Ie=I===void 0?12:I,He=r.startingColumns,Be=r.showCustomizeColumns,q=Be===void 0?!0:Be,Te=r.showExport,at=Te===void 0?!0:Te,lt=r.showAutoload,it=lt===void 0?!0:lt,ct=r.showEventFilter,Je=ct===void 0?!0:ct,Ge=r.showPropertyFilter,Xe=Ge===void 0?!0:Ge,he=r.showRowExpanders,yt=he===void 0?!0:he,Qe=r.showActionsButton,_t=Qe===void 0?!0:Qe,ut=r.showPersonColumn,dt=ut===void 0?!0:ut,mt=r.linkPropertiesToFilters,H=mt===void 0?!0:mt,x=r["data-tooltip"],J=Object(M.useValues)(f.a),K=J.currentTeam,Pe=Object(ye.a)({fixedFilters:u,key:l,sceneUrl:V||Me.a.events(),fetchMonths:Ie}),w=Object(M.useValues)(Pe),be=w.properties,ht=w.eventsFormatted,Dt=w.isLoading,Vt=w.hasNext,Lt=w.isLoadingNext,vt=w.eventFilter,wt=w.automaticLoadEnabled,zt=w.highlightEvents,$t=w.months,xt=Object(M.useValues)(xe({startingColumns:(o=K&&K.live_events_columns)!==null&&o!==void 0?o:He})),Ze=xt.tableWidth,$e=xt.selectedColumns,Ke=Object(M.useActions)(Pe),Yt=Ke.fetchNextEvents,Ht=Ke.prependNewEvents,Jt=Ke.setEventFilter,Gt=Ke.toggleAutomaticLoad,Xt=Ke.startDownload,Qt=Ke.setPollingActive,Zt=Ke.setProperties,kt=!(u!=null&&u.person_id),qt=Object(M.useActions)(Ft.f),en=qt.reportEventsTablePollingReactedToPageVisibility;m(function(T){Qt(T),en(T)});var jt=function(y,_){var D=y.date_break,h=y.new_events;return{children:D||(h?t.a.createElement(n.a,{icon:t.a.createElement(v.IconSync,null),onClick:function(){return Ht()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:_+1,style:h?{padding:0}:void 0}}},tn={title:"Person",key:"person",render:function(y,_){var D,h,O=_.event;return O?kt&&(D=O.person)!==null&&D!==void 0&&(h=D.distinct_ids)!==null&&h!==void 0&&h.length?t.a.createElement(F.a,{to:Me.a.person(O.person.distinct_ids[0])},t.a.createElement(Y.a,{noLink:!0,withIcon:!0,person:O.person})):t.a.createElement(Y.a,{withIcon:!0,person:O.person}):{props:{colSpan:0}}}},Ot=Object(Oe.useMemo)(function(){var T=[{title:"Event",key:"event",width:"16rem",render:function(_,D){if(!D.event)return jt(D,Ze);var h=D.event;return t.a.createElement(We.a,{value:Object(j.f)(h)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(_,D){var h=D.event;if(!h)return{props:{colSpan:0}};var O=h.properties.$current_url?"$current_url":"$screen_name";return H?t.a.createElement(i,{className:"ph-no-capture",property:O,value:h.properties[O],filters:{properties:be}}):t.a.createElement(L,{value:h.properties[O]})}},{title:t.a.createElement(et.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(_,D){var h=D.event;return h?H?t.a.createElement(i,{property:"$lib",value:h.properties.$lib,filters:{properties:be}}):t.a.createElement(L,{value:h.properties.$lib}):{props:{colSpan:0}}}}];return dt&&T.splice(1,0,tn),T},[Ze]),nn=Object(Oe.useMemo)(function(){var T=[];if($e==="DEFAULT")T=B()(Ot);else{var y=dt?$e:$e.filter(function(_){return _!=="person"});T=y.map(function(_,D){var h=Ot.find(function(O){return O.key===_});return h?St(St({},h),{},{render:function(Ne,Ue){var ke=Ue.event;return ke?h.render?h.render(Ne,Ue,D):{props:{colSpan:0}}:D===0?jt(Ue,Ze):{props:{colSpan:0}}}}):{title:We.e.event[_]?We.e.event[_].label:_,key:_,render:function(Ne,Ue){var ke=Ue.event;return ke?H?t.a.createElement(i,{className:"ph-no-capture ",property:_,value:ke.properties[_],filters:{properties:be}}):t.a.createElement(L,{value:ke.properties[_]}):D===0?jt(Ue,Ze):{props:{colSpan:0}}}}})}return T.push({title:"Time",key:"time",render:function(D,h){var O=h.event;return O?t.a.createElement(qe.b,{time:O.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),_t&&T.push({key:"actions",width:0,render:function(D,h){var O=h.event;if(!O)return{props:{colSpan:0}};var Ne;return O.event==="$pageview"?Ne={insight:Re.B.TRENDS,interval:"day",display:Re.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:O.properties.$current_url,type:"event"}]}]}:O.event!=="$autocapture"&&(Ne={insight:Re.B.TRENDS,interval:"day",display:Re.j.ActionsLineGraph,actions:[],events:[{id:O.event,name:O.event,type:"events",order:0,properties:[]}]}),t.a.createElement(s.a,{overlay:t.a.createElement(t.a.Fragment,null,K&&t.a.createElement(n.a,{status:"stealth",onClick:function(){return Object(a.a)(K.id,O,0,K.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),Ne&&t.a.createElement(n.a,{status:"stealth",to:Me.a.insightNew(Ne),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),C?T.concat(C):T},[$e,Ze]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(Je||Xe)&&t.a.createElement("div",{className:"flex py-4 space-x-4 border-t"},Je&&t.a.createElement(ve.b,{value:vt,onChange:function(y){Jt(y||"")}}),Xe&&t.a.createElement(pt.a,{propertyFilters:be,onChange:Zt,pageKey:l,style:{marginBottom:0,marginTop:0},eventNames:vt?[vt]:[]})),it||q||at?t.a.createElement("div",{className:Object(Ve.a)("flex justify-between pt-4 mb-4 items-center",(Je||Xe)&&"border-t")},it&&t.a.createElement(c.a,{bordered:!0,"data-tooltip":"live-events-refresh-toggle",id:"autoload-switch",label:"Automatically load new events",checked:wt,onChange:Gt}),t.a.createElement("div",{className:"flex space-x-2"},q&&t.a.createElement(ot,{immutableColumns:["event","person"],defaultColumns:Ot.map(function(T){return T.key||""})}),at&&t.a.createElement($.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Exporting by csv is limited to 3,500 events.",t.a.createElement("br",null),"To return more, please use"," ",t.a.createElement("a",{href:"https://posthog.com/docs/api/events"},"the API"),". Do you want to export by CSV?"),onConfirm:Xt},t.a.createElement(n.a,{type:"secondary",icon:t.a.createElement(v.IconExport,{style:{color:"var(--primary)"}})},"Export")))):null,t.a.createElement(Wt.a,{additionalInfo:" \u2013 this helps ensure accuracy of insights grouped by unique users"}),t.a.createElement(ft.a,{"data-tooltip":x,dataSource:ht,loading:Dt,columns:nn,key:$e==="DEFAULT"?"default":$e.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:Dt?void 0:be.some(function(T){return Object.keys(T).length})||vt?"No events matching filters found in the last ".concat($t," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(F.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(y){var _;return y.event?y.event.id+"-"+y.event.event:((_=y.date_break)===null||_===void 0?void 0:_.toString())||""},rowClassName:function(y){return Object(Ve.a)({"event-row":y.event,highlighted:y.event&&zt[y.event.id],"event-row-is-exception":y.event&&y.event.event==="$exception","event-row-date-separator":y.date_break,"event-row-new":y.new_events})},expandable:yt?{expandedRowRender:function(y){var _=y.event;return _&&t.a.createElement(ge.a,{event:_})},rowExpandable:function(y){var _=y.event,D=y.date_break,h=y.new_events;return D||h?-1:!!_}}:void 0}),Vt||Lt?t.a.createElement(n.a,{type:"primary",onClick:Yt,loading:Lt,className:"my-8 mx-auto"},"Load more events"):null))}try{st.displayName="EventsTable",st.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}},"data-tooltip":{defaultValue:null,description:"",name:"data-tooltip",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:st.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(r){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(Ee,A,e){"use strict";e.d(A,"a",function(){return ft});var G=e("./node_modules/core-js/modules/es.object.keys.js"),ae=e.n(G),le=e("./node_modules/core-js/modules/es.symbol.js"),ie=e.n(le),X=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Q=e.n(X),ee=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),B=e.n(ee),ce=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),te=e.n(ce),R=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),N=e.n(R),P=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),U=e.n(P),je=e("./node_modules/@babel/runtime/regenerator/index.js"),z=e.n(je),ue=e("./node_modules/core-js/modules/es.array.map.js"),Oe=e.n(ue),t=e("./node_modules/core-js/modules/es.object.to-string.js"),M=e.n(t),ge=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),F=e.n(ge),$=e("./node_modules/core-js/modules/es.array.splice.js"),de=e.n($),ne=e("./node_modules/core-js/modules/es.array.join.js"),Fe=e.n(ne),re=e("./node_modules/core-js/modules/es.array.filter.js"),oe=e.n(re),L=e("./node_modules/core-js/modules/es.array.concat.js"),Ae=e.n(L),me=e("./node_modules/core-js/modules/es.array.iterator.js"),E=e.n(me),i=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),j=e.n(i),g=e("./node_modules/kea/lib/index.esm.js"),W=e("./frontend/src/lib/utils.tsx"),Z=e("./node_modules/kea-router/lib/index.js"),Se=e.n(Z),se=e("./frontend/src/lib/api.ts"),De=e("./frontend/src/types.ts"),Le=e("./frontend/src/scenes/teamLogic.tsx"),ye=e("./frontend/src/lib/dayjs.ts"),Y=e("./frontend/src/lib/components/lemonToast.tsx"),qe=e("./frontend/src/lib/logic/featureFlagLogic.ts"),We=e("./frontend/src/lib/components/ExportButton/exporter.tsx");function Re(v,n){var s=Object.keys(v);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(v);n&&(c=c.filter(function(f){return Object.getOwnPropertyDescriptor(v,f).enumerable})),s.push.apply(s,c)}return s}function ve(v){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Re(Object(s),!0).forEach(function(c){N()(v,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(s)):Re(Object(s)).forEach(function(c){Object.defineProperty(v,c,Object.getOwnPropertyDescriptor(s,c))})}return v}var pt=5,et=365,Ve=5e3,xe=function(n,s){var c=[];return c=n.map(function(f){return{event:f}}),c.forEach(function(f,a){var m=c[a-1];a>0&&f.event&&m.event&&!Object(ye.a)(f.event.timestamp).isSame(m.event.timestamp,"day")&&c.splice(a,0,{date_break:Object(ye.a)(f.event.timestamp).format("LL")})}),s.length>0&&c.splice(0,0,{new_events:!0}),c},Me=function(n){return Object(ye.b)().subtract(n,"day").toISOString()},ft=Object(g.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(s){return!!s}).join("-")},connect:{values:[Le.a,["currentTeamId"],qe.a,["featureFlags"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:function(n){var s,c,f=n.props;return{pollingIsActive:[!0,{setPollingActive:function(m,d){var p=d.pollingActive;return p},pollEventsSuccess:function(m,d){var p=d.events;return p&&p.length?!1:m},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(m,d){var p=d.properties;return Object(W.s)(p)}}],eventFilter:[(s=(c=f.fixedFilters)===null||c===void 0?void 0:c.event_filter)!==null&&s!==void 0?s:"",{setEventFilter:function(m,d){var p=d.event;return p}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(m,d){var p=d.events,pe=d.isNext;return pe?[].concat(U()(m),U()(p)):p},prependEvents:function(m,d){var p=d.events;return[].concat(U()(p),U()(m))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(m,d){var p=d.hasNext;return p}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(m,d){var p=d.selectedEvent;return p}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(m,d){var p=d.events;return p||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(m,d){var p=d.events;return p.reduce(function(pe,k){return pe[k.id]=!0,pe},{})}}],pollTimeout:[0,{setPollTimeout:function(m,d){return d.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(m,d){var p=d.automaticLoadEnabled;return p}}]}},selectors:function(n){var s=n.selectors,c=n.props;return{eventsFormatted:[function(){return[s.events,s.newEvents]},function(f,a){return xe(f,a)}],listParams:[function(){return[s.eventFilter,s.orderBy,s.properties]},function(f,a,m){var d;return ve(ve(ve({},c.fixedFilters||{}),{},{properties:[].concat(U()(m),U()(((d=c.fixedFilters)===null||d===void 0?void 0:d.properties)||[]))},f?{event:f}:{}),{},{orderBy:[a]})}],eventsUrl:[function(){return[s.currentTeamId,s.listParams]},function(f,a){return function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return"/api/projects/".concat(f,"/events?").concat(Object(W.Cb)(ve(ve({},a),m)))}}],months:[function(){return[function(f,a){return a.fetchMonths}]},function(f){return f||12}],minimumExportDate:[function(){return[s.months]},function(){return Object(ye.b)().subtract(1,"months").toISOString()}],pollAfter:[function(){return[s.events]},function(f){return(f==null?void 0:f.length)>0&&f[0].timestamp?f[0].timestamp:Me(0)}]}},actionToUrl:function(n){var s=n.values;return{setProperties:function(){return[Z.router.values.location.pathname,ve(ve({},Z.router.values.searchParams),{},{properties:s.properties.length===0?void 0:s.properties}),Z.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[Z.router.values.location.pathname,ve(ve({},Z.router.values.searchParams),{},{eventFilter:s.eventFilter}),Z.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var s=n.actions,c=n.values,f=n.props;return N()({},f.sceneUrl,function(a,m){s.setProperties(m.properties||c.properties||{}),m.eventFilter&&s.setEventFilter(m.eventFilter)})},events:function(n){var s=n.values;return{beforeUnmount:function(){return clearTimeout(s.pollTimeout||void 0)}}},listeners:function(n){var s=n.actions,c=n.values,f=n.props;return{startDownload:function(){Object(We.a)({export_format:De.q.CSV,export_context:{path:c.eventsUrl(),max_limit:3500}})},setProperties:function(){return s.fetchEvents()},setEventFilter:function(){return s.fetchEvents()},fetchNextEvents:function(){var a=te()(z.a.mark(function d(){var p;return z.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:p=c.events,p.length===0?s.fetchEvents():s.fetchEvents({before:p[p.length-1].timestamp});case 2:case"end":return k.stop()}},d)}));function m(){return a.apply(this,arguments)}return m}(),fetchEvents:function(){var a=te()(z.a.mark(function d(p,pe){var k,Ce,fe,_e,b,Ye;return z.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(fe=function(){return fe=te()(z.a.mark(function we(Pt){var Et;return z.a.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Et=c.eventsUrl(ve({after:Pt},k)),ze.abrupt("return",se.b.get(Et));case 2:case"end":return ze.stop()}},we)})),fe.apply(this,arguments)},Ce=function(we){return fe.apply(this,arguments)},k=p.nextParams,clearTimeout(c.pollTimeout),!(c.events.length>0)){S.next=9;break}return S.next=7,pe(300);case 7:S.next=11;break;case 9:return S.next=11,pe(1);case 11:return _e=null,b=!1,S.prev=13,S.next=16,Ce(Me(pt));case 16:if(_e=S.sent,_e.results.length!==0){S.next=22;break}return S.next=20,Ce(Me(et));case 20:_e=S.sent,b=!0;case 22:S.next=28;break;case 24:return S.prev=24,S.t0=S.catch(13),s.fetchOrPollFailure(S.t0),S.abrupt("return");case 28:pe(),s.fetchEventsSuccess({events:_e.results,hasNext:!!_e.next||!b,isNext:!!k}),Ye=window.setTimeout(s.pollEvents,Ve),s.setPollTimeout(Ye);case 32:case"end":return S.stop()}},d,null,[[13,24]])}));function m(d,p){return a.apply(this,arguments)}return m}(),pollEvents:function(){var a=te()(z.a.mark(function d(p,pe){var k,Ce,fe;return z.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(k=function(){var tt=window.setTimeout(s.pollEvents,Ve);s.setPollTimeout(tt)},c.orderBy==="-timestamp"){b.next=3;break}return b.abrupt("return");case 3:if(f.sceneUrl===Z.router.values.location.pathname){b.next=5;break}return b.abrupt("return");case 5:if(c.pollingIsActive){b.next=8;break}return k(),b.abrupt("return");case 8:return Ce=c.eventsUrl({after:c.pollAfter}),fe=null,b.prev=10,b.next=13,se.b.get(Ce);case 13:fe=b.sent,b.next=19;break;case 16:return b.prev=16,b.t0=b.catch(10),b.abrupt("return");case 19:pe(),c.automaticLoadEnabled?s.prependEvents(fe.results):s.pollEventsSuccess(fe.results),k();case 22:case"end":return b.stop()}},d,null,[[10,16]])}));function m(d,p){return a.apply(this,arguments)}return m}(),prependNewEvents:function(){c.newEvents.length&&s.prependEvents(c.newEvents)},fetchOrPollFailure:function(m){var d=m.error;Y.d.error("There was a problem fetching your events: ".concat(d.statusText))},toggleAutomaticLoad:function(m){var d=m.automaticLoadEnabled;d&&s.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(Ee,A,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");A=G(!1),A.push([Ee.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),Ee.exports=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(Ee,A,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");A=G(!1),A.push([Ee.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--danger-highlight)}.events td{max-width:20rem}",""]),Ee.exports=A}}]);
