(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":function(H,h,t){"use strict";t.r(h),t.d(h,"scene",function(){return Dt}),t.d(h,"FeatureFlag",function(){return Fe});var K=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ae=t.n(K),ee=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),I=t.n(ee),X=t("./node_modules/core-js/modules/es.function.name.js"),he=t("./node_modules/core-js/modules/es.array.map.js"),pe=t("./node_modules/core-js/modules/es.object.to-string.js"),de=t("./node_modules/core-js/modules/es.regexp.to-string.js"),ue=t("./node_modules/core-js/modules/es.array.find.js"),Oe=t("./node_modules/core-js/modules/es.array.includes.js"),J=t("./node_modules/core-js/modules/es.string.includes.js"),te=t("./node_modules/core-js/modules/es.array.concat.js"),Q=t("./node_modules/react/index.js"),Z=t("./node_modules/kea-forms/lib/index.js"),z=t("./node_modules/antd/es/divider/index.js"),c=t("./node_modules/antd/es/row/index.js"),O=t("./node_modules/antd/es/col/index.js"),m=t("./node_modules/antd/es/skeleton/index.js"),re=t("./node_modules/antd/es/tabs/index.js"),B=t("./node_modules/antd/es/popconfirm/index.js"),d=t("./node_modules/antd/es/radio/index.js"),x=t("./node_modules/antd/es/input-number/index.js"),u=t("./node_modules/antd/es/select/index.js"),i=t("./node_modules/kea/lib/index.esm.js"),b=t("./frontend/src/lib/utils.tsx"),w=t("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),k=t("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),g=t("./frontend/src/scenes/feature-flags/featureFlagLogic.ts"),Ke=t("./frontend/src/lib/logic/featureFlagLogic.ts"),Be=t("./node_modules/antd/es/card/index.js"),R=t("./frontend/src/lib/components/icons.tsx"),oe=t("./frontend/src/lib/components/LemonDivider/index.ts"),W=t("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),we=t("./frontend/src/scenes/teamLogic.tsx"),e=t("./node_modules/react/jsx-runtime.js"),ie="?utm_medium=in-product&utm_campaign=feature-flag";function Ee(n){var s=n.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(W.a,{language:W.b.JavaScript,wrap:!0,children:"const isMyFlagEnabledForUser = await client.isFeatureEnabled('".concat(s,`', 'user distinct id')

if (isMyFlagEnabledForUser) {
    // Do something differently for this user
}`)})})}function Se(n){var s=n.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(W.a,{language:W.b.JavaScript,wrap:!0,children:"if\xA0(posthog.isFeatureEnabled('".concat(s!=null?s:"",`')) {
    // run your activation code here
}`)})})}function Re(n){var s=n.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(W.a,{language:W.b.PHP,wrap:!0,children:"if (PostHog::isFeatureEnabled('".concat(s,`', 'some distinct id')) {
    // do something here
}`)})})}function Ie(n){var s=n.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(W.a,{language:W.b.Go,wrap:!0,children:`isFlagEnabledForUser, err := client.IsFeatureEnabled(
                    FeatureFlagPayload{
                        Key:        '`.concat(s,`',
                        DistinctId: "distinct-id",
                    })

if (isFlagEnabledForUser) {
  // Do something differently for this user
}`)})})}function Ce(n){var s=n.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(W.a,{language:W.b.Ruby,wrap:!0,children:"is_my_flag_enabled = posthog.is_feature_enabled('".concat(s,`', 'user distinct id')

if is_my_flag_enabled
  # Do something differently for this user
end`)})})}function Pe(n){var s=n.flagKey;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(W.a,{language:W.b.Python,wrap:!0,children:'if\xA0posthog.feature_enabled("'.concat(s,`", "user_distinct_id"):
    runAwesomeFeature()
`)})})}function it(){var n=Object(i.useValues)(we.a),s=n.currentTeam;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(W.a,{language:W.b.Bash,wrap:!0,children:"curl ".concat(window.location.origin,`/decide/ \\
-X POST -H 'Content-Type: application/json' \\
-d '{
    "api_key": "`).concat(s?s.api_token:"[project_api_key]",`",
    "distinct_id": "[user distinct id]"
}'
                `)})})}try{Ee.displayName="NodeJSSnippet",Ee.__docgenInfo={description:"",displayName:"NodeJSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"]={docgenInfo:Ee.__docgenInfo,name:"NodeJSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#NodeJSSnippet"})}catch(n){}try{Se.displayName="JSSnippet",Se.__docgenInfo={description:"",displayName:"JSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"]={docgenInfo:Se.__docgenInfo,name:"JSSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#JSSnippet"})}catch(n){}try{Re.displayName="PHPSnippet",Re.__docgenInfo={description:"",displayName:"PHPSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"]={docgenInfo:Re.__docgenInfo,name:"PHPSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PHPSnippet"})}catch(n){}try{Ie.displayName="GolangSnippet",Ie.__docgenInfo={description:"",displayName:"GolangSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"]={docgenInfo:Ie.__docgenInfo,name:"GolangSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#GolangSnippet"})}catch(n){}try{Ce.displayName="RubySnippet",Ce.__docgenInfo={description:"",displayName:"RubySnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"]={docgenInfo:Ce.__docgenInfo,name:"RubySnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#RubySnippet"})}catch(n){}try{Pe.displayName="PythonSnippet",Pe.__docgenInfo={description:"",displayName:"PythonSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"]={docgenInfo:Pe.__docgenInfo,name:"PythonSnippet",path:"frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx#PythonSnippet"})}catch(n){}var ct=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Ge=t.n(ct),lt=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss"),Ye=t.n(lt),Ue={};Ue.insert="head",Ue.singleton=!1;var Bt=Ge()(Ye.a,Ue),Ut=Ye.a.locals||{},ge="https://posthog.com/docs/",fe="#feature-flags",Ve=[{value:"JavaScript",documentationLink:"".concat(ge,"integrations/js-integration").concat(ie).concat(fe),Icon:R.IconJavascript,Snippet:Se},{value:"Node.js",documentationLink:"".concat(ge,"integrations/node-integration").concat(ie).concat(fe),Icon:R.IconNodeJS,Snippet:Ee},{value:"PHP",documentationLink:"".concat(ge,"integrations/php-integration").concat(ie).concat(fe),Icon:R.IconPHP,Snippet:Re},{value:"Ruby",documentationLink:"".concat(ge,"integrations/ruby-integration").concat(ie).concat(fe),Icon:R.IconRuby,Snippet:Ce},{value:"Golang",documentationLink:"".concat(ge,"integrations/go-integration").concat(ie).concat(fe),Icon:R.IconGolang,Snippet:Ie},{value:"Python",documentationLink:"".concat(ge,"integrations/python-integration").concat(ie).concat(fe),Icon:R.IconPython,Snippet:Pe},{value:"API",documentationLink:"".concat(ge,"api/feature-flags").concat(ie),Icon:R.IconOpenInNew,Snippet:it}];function dt(n){var s=n.selectedOptionValue,a=n.selectOption;return Object(e.jsxs)(c.a,{className:"FeatureFlagInstructionsHeader",justify:"space-between",align:"middle",children:[Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__header-title",children:[Object(e.jsx)(R.IconFlag,{className:"FeatureFlagInstructionsHeader__header-title__icon"}),Object(e.jsx)("b",{children:"Learn how to use feature flags in your code"})]}),Object(e.jsx)(u.a,{"data-attr":"feature-flag-instructions-select",value:s,style:{width:140},onChange:a,children:Ve.map(function(r,v){var o=r.value,j=r.Icon;return Object(e.jsx)(u.a.Option,{"data-attr":"feature-flag-instructions-select-option-"+o,value:o,children:Object(e.jsxs)("div",{className:"FeatureFlagInstructionsHeader__option",children:[Object(e.jsx)("div",{className:"FeatureFlagInstructionsHeader__option__icon",children:Object(e.jsx)(j,{})}),Object(e.jsx)("div",{children:o})]})},v)})})]})}function ut(n){var s=n.documenrationLink;return Object(e.jsxs)("div",{className:"mt-4",children:["Need more information?"," ",Object(e.jsxs)("a",{"data-attr":"feature-flag-doc-link",target:"_blank",rel:"noopener",href:s,children:["Check the docs ",Object(e.jsx)(R.IconOpenInNew,{})]})]})}function be(n){var s=n.featureFlagKey,a=Ve[0],r=Object(Q.useState)(a),v=I()(r,2),o=v[0],j=v[1],M=function(L){var A=Ve.find(function(N){return N.value===L});A&&j(A)};return Object(e.jsxs)(Be.a,{size:"small",children:[Object(e.jsx)(dt,{selectedOptionValue:o.value,selectOption:M}),Object(e.jsx)(oe.a,{}),Object(e.jsx)("div",{className:"mt mb",children:Object(e.jsx)(o.Snippet,{"data-attr":"feature-flag-instructions-snippet",flagKey:s})}),Object(e.jsx)(oe.a,{}),Object(e.jsx)(ut,{documenrationLink:o.documentationLink})]})}try{be.displayName="FeatureFlagInstructions",be.__docgenInfo={description:"",displayName:"FeatureFlagInstructions",props:{featureFlagKey:{defaultValue:null,description:"",name:"featureFlagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"]={docgenInfo:be.__docgenInfo,name:"FeatureFlagInstructions",path:"frontend/src/scenes/feature-flags/FeatureFlagInstructions.tsx#FeatureFlagInstructions"})}catch(n){}var $e=t("./frontend/src/lib/components/PageHeader.tsx"),gt=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss"),Je=t.n(gt),We={};We.insert="head",We.singleton=!1;var Vt=Ge()(Je.a,We),Wt=Je.a.locals||{},jt=t("./frontend/src/lib/components/Tooltip.tsx"),mt=t("./frontend/src/models/groupsModel.ts"),pt=t("./node_modules/rc-select/es/index.js"),Le=t("./frontend/src/lib/components/Link.tsx"),Ae=t("./frontend/src/lib/introductions/groupsAccessLogic.ts");function Te(n){var s=n.value,a=Object(i.useValues)(Ae.b),r=a.groupsAccessStatus;return[Ae.a.HasAccess,Ae.a.HasGroupTypes,Ae.a.NoAccess].includes(r)?Object(e.jsxs)(pt.c.Option,{value:s,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--side)",color:"var(--muted)"},children:[Object(e.jsx)(k.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups \u2013"," ",Object(e.jsx)(Le.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",className:"font-semibold",children:"Learn more"})]},"groups"):null}try{Te.displayName="GroupsIntroductionOption",Te.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:Te.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(n){}var ze=t("./frontend/src/scenes/userLogic.ts"),ve=t("./frontend/src/types.ts"),U=t("./frontend/src/lib/components/LemonButton/index.ts"),G=t("./frontend/src/lib/forms/Field.tsx"),ft=t("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),He=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),Xe=t("./frontend/src/lib/components/LemonCheckbox/index.ts"),ht=t("./frontend/src/scenes/events/EventBufferNotice.tsx"),Qe=t("./frontend/src/lib/components/AlertMessage/index.ts"),ce=t("./frontend/src/scenes/urls.ts"),Me=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),Ze=t("./node_modules/kea-router/lib/index.js"),ke=t("./frontend/src/lib/components/CopyToClipboard.tsx"),Ne=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),xe=t("./frontend/src/lib/constants.tsx"),qe=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),Ot=t("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),bt=t("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),vt=t("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),xt=t("./frontend/src/lib/components/DefinitionPopup/utils.ts"),Ht=t("./node_modules/core-js/modules/es.array.slice.js"),et=t("./frontend/src/lib/components/CompactList/CompactList.tsx"),yt=t("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function _t(){var n=Object(i.useValues)(g.c),s=n.recentInsights,a=n.recentInsightsLoading,r=n.featureFlag;return Object(e.jsx)(et.a,{title:"Insights that use this feature flag",loading:a,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:ce.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(r.key)})},items:s.slice(0,5),renderRow:function(o,j){return Object(e.jsx)(yt.a,{insight:o},j)}})}var Ft=t("./frontend/src/lib/components/NotFound/index.tsx"),Et=t("./frontend/src/models/cohortsModel.ts"),St=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),Rt=t.n(St),wt=t("./node_modules/core-js/modules/es.object.keys.js"),Gt=t("./node_modules/core-js/modules/es.symbol.js"),Yt=t("./node_modules/core-js/modules/es.array.filter.js"),$t=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Jt=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),zt=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),$=t("./frontend/@posthog/lemon-ui/src/index.ts"),ye=t("./frontend/src/lib/components/TaxonomicFilter/types.ts"),It=t("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),Ct=t("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function tt(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);s&&(r=r.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),a.push.apply(a,r)}return a}function Pt(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?tt(Object(a),!0).forEach(function(r){Rt()(n,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(a,r))})}return n}function _e(n){var s=n.readOnly,a=Object(i.useValues)(g.c),r=a.featureFlag,v=a.sentryIntegrationEnabled,o=a.sentryErrorCount,j=a.insightRollingAverages,M=Object(i.useActions)(g.c),P=M.addRollbackCondition,L=M.removeRollbackCondition,A=M.loadInsightAtIndex,N=Object(i.useValues)(ze.a),Y=N.user;return Object(e.jsxs)("div",{children:[Object(e.jsxs)("div",{className:"mb-2",children:[Object(e.jsx)("b",{children:"Auto rollback"}),Object(e.jsx)($.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"}),!s&&Object(e.jsx)("div",{className:"mt-2",children:"Specify the conditions in which this feature flag will automatically roll back."})]}),s&&r.rollback_conditions.map(function(F,y){var D,p,E;return Object(e.jsxs)(e.Fragment,{children:[y>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),F.threshold_type==="insight"&&(D=F.threshold_metric)!==null&&D!==void 0&&(p=D.events)!==null&&p!==void 0&&(E=p[0])!==null&&E!==void 0&&E.name?Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsx)("b",{children:"".concat(Object(b.i)(F.threshold_type)," based rollback")}),Object(e.jsx)($.LemonDivider,{className:"my-3"}),Object(e.jsxs)(c.a,{align:"middle",children:[j[y]&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("b",{children:F.threshold_metric.events[0].name}),"\xA0 trailing average is ",j[y],"."]}),"\xA0Trigger when trailing average of \xA0",Object(e.jsx)("b",{children:F.threshold_metric.events[0].name}),"\xA0 is\xA0",F.operator&&b.I[F.operator]," ",F.threshold]})]}):Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsx)("b",{children:"".concat(Object(b.i)(F.threshold_type)," based rollback")}),Object(e.jsx)($.LemonDivider,{className:"my-3"}),Object(e.jsxs)(c.a,{align:"middle",children:["Trigger when there is a\xA0",Object(e.jsxs)("b",{children:[F.threshold,"%"]}),"\xA0increase in errors"]})]})]})}),!s&&r.rollback_conditions.map(function(F,y){return Object(e.jsxs)(e.Fragment,{children:[y>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(e.jsx)("div",{className:"mb-4 border rounded p-4",children:Object(e.jsxs)(Z.Group,{name:["rollback_conditions",y],children:[Object(e.jsxs)(c.a,{align:"middle",justify:"space-between",children:[Object(e.jsxs)(c.a,{children:[Object(e.jsx)("div",{className:"mt-3 mr-3",children:Object(e.jsx)("b",{children:"Rollback Condition Type"})}),Object(e.jsx)(G.a,{name:"threshold_type",children:function(p){var E=p.value,V=p.onChange;return Object(e.jsx)($.LemonSelect,{value:E,onChange:V,options:[{value:ve.S.Sentry,label:"Error Based"},{value:ve.S.Insight,label:"Metric Based"}]})}})]}),Object(e.jsx)($.LemonButton,{icon:Object(e.jsx)(R.IconDelete,{}),status:"muted",noPadding:!0,onClick:function(){L(y)}})]}),Object(e.jsx)($.LemonDivider,{className:"my-3"}),r.rollback_conditions[y].threshold_type=="insight"?Object(e.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[Object(e.jsx)(G.a,{name:"threshold_metric",children:function(p){var E=p.value,V=p.onChange;return Object(e.jsx)(It.a,{filters:E,setFilters:function(ne){V(Pt({},ne)),A(y,ne)},typeKey:"feature-flag-rollback-trends-"+y,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:Ct.b.None,propertiesTaxonomicGroupTypes:[ye.a.EventProperties,ye.a.PersonProperties,ye.a.EventFeatureFlags,ye.a.Cohorts,ye.a.Elements]})}}),Object(e.jsxs)("span",{children:["trailing 7 day average is\xA0",j[y]!==void 0?Object(e.jsx)("b",{children:j[y]}):Object(e.jsx)(Me.a,{}),". Trigger when trailing average is"]}),Object(e.jsx)(G.a,{name:"operator",children:function(p){var E=p.value,V=p.onChange;return Object(e.jsx)($.LemonSelect,{value:E,onChange:V,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),Object(e.jsx)(G.a,{name:"threshold",children:Object(e.jsx)($.LemonInput,{min:0,type:"number"})})]}):v?Object(e.jsx)("div",{children:Object(e.jsxs)(c.a,{align:"middle",children:[o?Object(e.jsxs)("span",{children:[Object(e.jsxs)("b",{children:[Object(b.P)(o)," "]})," sentry errors in the past 24 hours."," "]}):Object(e.jsx)(Me.a,{}),Object(e.jsx)("span",{children:"\xA0Trigger when there is a"}),Object(e.jsx)(G.a,{name:"threshold",className:"ml-3 mr-3",children:function(p){var E=p.value,V=p.onChange;return Object(e.jsx)($.LemonInput,{value:E,suffix:Object(e.jsx)(e.Fragment,{children:"%"}),type:"number",min:0,onChange:V})}}),Object(e.jsx)(G.a,{name:"operator",className:"mr-3",children:function(p){var E=p.value,V=p.onChange;return Object(e.jsx)($.LemonSelect,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value:E,onChange:V})}}),Object(e.jsxs)("span",{children:["to"," ",o?Object(e.jsx)("b",{children:Object(b.P)(Math.round(o*(1+(r.rollback_conditions[y].threshold||0)/100)))}):Object(e.jsx)(Me.a,{})," ","errors."]}),Object(e.jsx)("div",{})]})}):Y!=null&&Y.is_staff?Object(e.jsxs)("div",{className:"mt-4",children:[Object(e.jsx)("b",{children:"This feature requires an active Sentry integration."}),Object(e.jsx)("br",{}),Object(e.jsx)($.Link,{to:ce.a.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",Object(e.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):Object(e.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]})}),!s&&Object(e.jsx)($.LemonButton,{type:"secondary",onClick:function(){P()},children:"Add condition"})]})}try{_e.displayName="FeatureFlagAutoRollback",_e.__docgenInfo={description:"",displayName:"FeatureFlagAutoRollback",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"]={docgenInfo:_e.__docgenInfo,name:"FeatureFlagAutoRollback",path:"frontend/src/scenes/feature-flags/FeatureFlagAutoRollout.tsx#FeatureFlagAutoRollback"})}catch(n){}var Lt=t("./frontend/src/scenes/project-homepage/RecentRecordings.tsx"),At=t("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),Tt=t("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts");function De(n){var s=n.flagKey,a=Object(i.useValues)(we.a),r=a.currentTeam,v=Object(Tt.c)({key:"feature-flag",flagKey:s}),o=Object(i.useValues)(v),j=o.sessionRecordings,M=o.sessionRecordingsResponseLoading,P=o.entityFilters;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(At.a,{}),Object(e.jsx)(et.a,{title:"Recordings with current feature flag",viewAllURL:ce.a.sessionRecordings(P),loading:M,emptyMessage:r!=null&&r.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:ce.a.projectSettings()+"#recordings"},items:j.slice(0,5),renderRow:function(A,N){return Object(e.jsx)(Lt.b,{recording:A},N)}})]})}try{De.displayName="FeatureFlagRecordings",De.__docgenInfo={description:"",displayName:"FeatureFlagRecordings",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"]={docgenInfo:De.__docgenInfo,name:"FeatureFlagRecordings",path:"frontend/src/scenes/feature-flags/FeatureFlagRecordingsCard.tsx#FeatureFlagRecordings"})}catch(n){}var Mt=t("./frontend/src/scenes/billing/billingLogic.ts"),Nt=t("./frontend/src/scenes/events/index.ts"),Dt={component:Fe,logic:g.c,paramsToProps:function(s){var a=s.params.id;return{id:a&&a!=="new"?parseInt(a):"new"}}};function nt(n){setTimeout(function(){var s;return(s=document.querySelector('.variant-form-list input[data-key-index="'.concat(n,'"]')))===null||s===void 0?void 0:s.focus()},50)}function Fe(){var n,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=s.id,r=Object(i.useValues)(g.c),v=r.props,o=r.featureFlag,j=r.featureFlagLoading,M=r.featureFlagMissing,P=r.isEditingFlag,L=Object(i.useValues)(Ke.a),A=L.featureFlags,N=Object(i.useActions)(g.c),Y=N.deleteFeatureFlag,F=N.editFeatureFlag,y=N.loadFeatureFlag,D=Object(Q.useState)(!1),p=I()(D,2),E=p[0],V=p[1],le=Object(Q.useState)(vt.a.OVERVIEW),ne=I()(le,2),je=ne[0],_=ne[1],C=a==="new"||a===void 0;return M?Object(e.jsx)(Ft.a,{object:"feature flag"}):j?Object(e.jsx)(Me.b,{}):Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:"feature-flag",children:C||P?Object(e.jsxs)(Z.Form,{logic:g.c,props:v,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(e.jsx)($e.a,{title:C?"New feature flag":o.key||"Untitled",buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(U.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:function(){P?(F(!1),y()):Ze.router.actions.push(ce.a.featureFlags())},disabled:j,children:"Cancel"}),Object(e.jsx)(U.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:j,disabled:j,children:"Save"})]})}),Object(e.jsx)(z.a,{}),o.experiment_set&&((n=o.experiment_set)===null||n===void 0?void 0:n.length)>0&&Object(e.jsxs)(Qe.a,{type:"warning",children:["This feature flag is linked to an experiment. It's recommended to only make changes to this flag"," ",Object(e.jsx)(Le.a,{to:ce.a.experiment(o.experiment_set[0]),children:"using the experiment creation screen."})]}),Object(e.jsx)(ht.a,{additionalInfo:", meaning it can take around 60 seconds for some flags to update for recently-identified persons. To sidestep this, you can choose to override server properties when requesting the feature flag."}),Object(e.jsxs)(c.a,{gutter:16,style:{marginBottom:32},children:[Object(e.jsxs)(O.a,{span:12,className:"space-y-4",children:[Object(e.jsx)(G.a,{name:"key",label:"Key",help:E&&a!=="new"?Object(e.jsxs)("span",{className:"text-warning",children:[Object(e.jsx)("b",{children:"Warning! "}),"Changing this key will",Object(e.jsxs)("a",{href:"https://posthog.com/docs/features/feature-flags".concat(ie,"#feature-flag-persistence"),target:"_blank",rel:"noopener",children:[" ","affect the persistence of your flag ",Object(e.jsx)(R.IconOpenInNew,{})]})]}):void 0,children:function(l){var T=l.value,S=l.onChange;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(He.a,{value:T,onChange:function(se){se!==T&&V(!0),S(se)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),Object(e.jsx)("span",{style:{fontSize:13},className:"text-muted",children:"Feature flag keys must be unique"})]})}}),Object(e.jsx)(G.a,{name:"name",label:"Description",children:Object(e.jsx)(ft.a,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:o.name||""})}),Object(e.jsx)(G.a,{name:"ensure_experience_continuity",children:function(l){var T=l.value,S=l.onChange;return Object(e.jsxs)("div",{className:"border rounded p-4",children:[Object(e.jsx)(Xe.a,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:function(){return S(!T)},fullWidth:!0,checked:T}),Object(e.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",Object(e.jsxs)(Le.a,{to:"https://posthog.com/manual/feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:["Learn more ",Object(e.jsx)(R.IconOpenInNew,{})]})]})]})}}),Object(e.jsx)(G.a,{name:"active",children:function(l){var T=l.value,S=l.onChange;return Object(e.jsx)("div",{className:"border rounded p-4",children:Object(e.jsx)(Xe.a,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:function(){return S(!T)},checked:T})})}})]}),Object(e.jsx)(O.a,{span:12,children:Object(e.jsx)(be,{featureFlagKey:o.key||"my-flag"})})]}),Object(e.jsx)(z.a,{}),Object(e.jsx)(st,{}),Object(e.jsx)(z.a,{}),Object(e.jsx)(at,{}),Object(e.jsx)(z.a,{}),A[xe.h.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(e.jsx)(_e,{}),Object(e.jsx)(oe.a,{className:"mt-8"}),Object(e.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[Object(e.jsx)(U.a,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:function(){P?(F(!1),y()):Ze.router.actions.push(ce.a.featureFlags())},disabled:j,children:"Cancel"}),Object(e.jsx)(U.a,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",loading:j,disabled:j,children:"Save"})]})]}):Object(e.jsx)(e.Fragment,{children:j?Object(e.jsx)(m.a,{active:!0}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)($e.a,{title:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[o.key||"Untitled",Object(e.jsx)(ke.a,{explicitValue:o.key,iconStyle:{color:"var(--muted-alt)"}}),Object(e.jsx)("div",{className:"flex",children:o.active?Object(e.jsx)(qe.a,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(qe.a,{type:"default",className:"uppercase",children:"Disabled"})})]}),description:Object(e.jsx)(e.Fragment,{children:o.name?Object(e.jsx)("span",{style:{fontStyle:"normal"},children:o.name}):"There is no description for this feature flag."}),buttons:Object(e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[Object(e.jsx)(U.a,{"data-attr":"delete-feature-flag",status:"danger",type:"secondary",onClick:function(){Y(o)},disabled:j,children:"Delete feature flag"}),Object(e.jsx)(U.a,{"data-attr":"edit-feature-flag",type:"secondary",onClick:function(){F(!0)},disabled:j,children:"Edit"})]})}),Object(e.jsxs)(re.a,{activeKey:je,destroyInactiveTabPane:!0,onChange:function(l){return _(l)},children:[Object(e.jsx)(re.a.TabPane,{tab:"Overview",children:Object(e.jsxs)(c.a,{children:[Object(e.jsxs)(O.a,{span:13,children:[Object(e.jsx)(st,{readOnly:!0}),Object(e.jsx)(at,{readOnly:!0}),A[xe.h.AUTO_ROLLBACK_FEATURE_FLAGS]&&Object(e.jsx)(_e,{readOnly:!0})]}),Object(e.jsxs)(O.a,{span:11,className:"pl-4",children:[Object(e.jsx)(_t,{}),Object(e.jsx)("div",{className:"my-4"}),A[xe.h.RECORDINGS_ON_FEATURE_FLAGS]?Object(e.jsx)(De,{flagKey:o.key||"my-flag"}):Object(e.jsx)(be,{featureFlagKey:o.key||"my-flag"})]})]})},"overview"),A[xe.h.EXPOSURES_ON_FEATURE_FLAGS]&&o.key&&a&&Object(e.jsx)(re.a.TabPane,{tab:"Exposures",children:Object(e.jsx)(Kt,{id:a,featureFlagKey:o.key})},"exposure"),o.id&&Object(e.jsx)(re.a.TabPane,{tab:"History",children:Object(e.jsx)(Ot.a,{scope:bt.a.FEATURE_FLAG,id:o.id})},"history")]})]})})})})}function Kt(n){var s=n.id,a=n.featureFlagKey;return Object(e.jsx)(Nt.b,{fixedFilters:{event_filter:"$feature_flag_called",properties:Object(g.b)(a)},sceneUrl:ce.a.featureFlag(s),fetchMonths:3,pageKey:"feature-flag-".concat(a,"}"),showEventFilter:!1,showPropertyFilter:!1})}function st(n){var s=n.readOnly,a=Object(i.useValues)(g.c),r=a.multivariateEnabled,v=a.variants,o=a.areVariantRolloutsValid,j=a.featureFlagLoading,M=a.variantRolloutSum,P=a.nonEmptyVariants,L=a.aggregationTargetName,A=a.featureFlag,N=Object(i.useActions)(g.c),Y=N.distributeVariantsEqually,F=N.addVariant,y=N.removeVariant,D=N.setMultivariateEnabled,p=Object(Q.useState)(!1),E=I()(p,2),V=E[0],le=E[1],ne=Object(i.useValues)(ze.a),je=ne.hasAvailableFeature,_=Object(i.useValues)(Mt.b),C=_.upgradeLink;return Object(e.jsxs)(e.Fragment,{children:[s?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-col mb-4",children:[Object(e.jsx)("span",{className:"card-secondary",children:"Type"}),Object(e.jsx)("span",{children:A.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),Object(e.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),Object(e.jsxs)("span",{children:["This flag"," ",Object(e.jsxs)("b",{children:[A.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),Object(e.jsx)(oe.a,{className:"my-3"}),A.filters.multivariate&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Variant keys"})}),Object(e.jsxs)("div",{className:"border rounded p-4 mb-4",children:[Object(e.jsxs)(c.a,{className:"font-semibold",children:[Object(e.jsx)(O.a,{span:10,children:"Key"}),Object(e.jsx)(O.a,{span:11,children:"Description"}),Object(e.jsx)(O.a,{span:3,children:"Rollout"})]}),Object(e.jsx)(oe.a,{className:"my-3"}),v.map(function(f,l){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)(c.a,{children:[Object(e.jsxs)(O.a,{span:10,children:[Object(e.jsx)(Ne.a,{name:b.c[l],color:Ne.b.Gray}),Object(e.jsx)(ke.a,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:f.key})]}),Object(e.jsx)(O.a,{span:12,children:f.name||"There is no description for this variant key"}),Object(e.jsxs)(O.a,{span:2,children:[f.rollout_percentage,"%"]})]}),l!==v.length-1&&Object(e.jsx)(oe.a,{className:"my-3"})]})})]})]})]}):Object(e.jsxs)("div",{className:"mb-8",children:[Object(e.jsx)("h3",{className:"l4",children:"Served value"}),Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(B.a,{placement:"top",title:"Change value type? The variants below will be lost.",disabled:j,visible:V,onConfirm:function(){D(!1),le(!1)},onCancel:function(){return le(!1)},okText:"OK",cancelText:"Cancel",children:Object(e.jsx)(d.a.Group,{options:[{label:"Release toggle (boolean)",value:!1},{label:Object(e.jsx)(jt.a,{title:je(ve.d.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:Object(e.jsxs)("div",{children:[!je(ve.d.MULTIVARIATE_FLAGS)&&Object(e.jsx)(Le.a,{to:C,target:"_blank",children:Object(e.jsx)(k.a,{style:{marginRight:4,color:"var(--warning)"}})}),"Multiple variants with rollout percentages (A/B test)"]})}),value:!0,disabled:!je(ve.d.MULTIVARIATE_FLAGS)}],onChange:function(l){var T=l.target.value;T===!1&&P.length?le(!0):(D(T),nt(0))},value:r,optionType:"button"})})}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:[Object(b.i)(L)," will be served"," ",r?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):Object(e.jsx)("strong",{children:Object(e.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),!s&&r&&Object(e.jsxs)("div",{className:"feature-flag-variants",children:[Object(e.jsx)("h3",{className:"l4",children:"Variant keys"}),Object(e.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),Object(e.jsxs)("div",{className:"variant-form-list space-y-2",children:[Object(e.jsxs)(c.a,{gutter:8,className:"label-row",children:[Object(e.jsx)(O.a,{span:1}),Object(e.jsx)(O.a,{span:6,children:"Variant key"}),Object(e.jsx)(O.a,{span:12,children:"Description"}),Object(e.jsxs)(O.a,{span:4,children:["Rollout",Object(e.jsx)(U.a,{type:"tertiary",onClick:Y,children:"(Redistribute)"})]})]}),v.map(function(f,l){return Object(e.jsx)(Z.Group,{name:["filters","multivariate","variants",l],children:Object(e.jsxs)(c.a,{gutter:8,align:"middle",children:[Object(e.jsx)(O.a,{span:1,children:Object(e.jsx)(Ne.a,{name:b.c[l],color:Ne.b.Gray})}),Object(e.jsx)(O.a,{span:6,children:Object(e.jsx)(G.a,{name:"key",children:Object(e.jsx)(He.a,{"data-attr":"feature-flag-variant-key","data-key-index":l.toString(),className:"ph-ignore-input",placeholder:"example-variant-".concat(l+1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})})}),Object(e.jsx)(O.a,{span:12,children:Object(e.jsx)(G.a,{name:"name",children:Object(e.jsx)(He.a,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),Object(e.jsx)(O.a,{span:3,children:Object(e.jsx)(G.a,{name:"rollout_percentage",children:function(S){var q=S.value,se=S.onChange;return Object(e.jsx)(x.a,{min:0,max:100,value:q,onChange:function(me){if(me!=null){var ot=parseInt(me.toString());isNaN(ot)||se(ot)}},style:{width:"100%",borderColor:o?void 0:"var(--danger)"}})}})}),Object(e.jsx)(O.a,{span:2,children:Object(e.jsx)(c.a,{children:v.length>1&&Object(e.jsx)(U.a,{icon:Object(e.jsx)(R.IconDelete,{}),status:"primary-alt","data-attr":"delete-prop-filter-".concat(l),noPadding:!0,onClick:function(){return y(l)}})})})]})},l)}),v.length>0&&!o&&Object(e.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",M,")."]}),Object(e.jsx)(U.a,{type:"secondary",onClick:function(){var l=v.length;F(),nt(l)},icon:Object(e.jsx)(R.IconPlus,{}),center:!0,children:"Add variant"})]})]})]})}function at(n){var s,a,r=n.readOnly,v=Object(i.useValues)(mt.a),o=v.showGroupsOptions,j=v.aggregationLabel,M=Object(i.useValues)(g.c),P=M.aggregationTargetName,L=M.featureFlag,A=M.groupTypes,N=M.taxonomicGroupTypes,Y=Object(i.useActions)(g.c),F=Y.setAggregationGroupTypeIndex,y=Y.updateConditionSet,D=Y.duplicateConditionSet,p=Y.removeConditionSet,E=Y.addConditionSet,V=Object(i.useValues)(Et.a),le=V.cohortsById,ne=Te({value:-2}),je=function(C){return!!C.find(function(f){return f.type==="cohort"||!xe.k.includes(f.key||"")})};return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"feature-flag-form-row",children:[Object(e.jsx)("div",{"data-attr":"feature-flag-release-conditions",children:r?Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Release conditions"})}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h3",{className:"l4",children:"Release conditions"}),Object(e.jsxs)("div",{className:"text-muted mb-4",children:["Specify the ",P," to which you want to release this flag. Note that condition sets are rolled out independently of each other."]})]})}),!r&&o&&Object(e.jsxs)("div",{className:"centered",children:["Match by",Object(e.jsxs)(u.a,{value:((s=L.filters)===null||s===void 0?void 0:s.aggregation_group_type_index)!=null?(a=L.filters)===null||a===void 0?void 0:a.aggregation_group_type_index:-1,onChange:function(C){var f=C!==-1?C:null;F(f)},style:{marginLeft:8},"data-attr":"feature-flag-aggregation-filter",dropdownMatchSelectWidth:!1,dropdownAlign:{points:["tr","br"]},children:[Object(e.jsx)(u.a.Option,{value:-1,children:"Users"},-1),A.map(function(_){return Object(e.jsx)(u.a.Option,{value:_.group_type_index,children:Object(b.i)(j(_.group_type_index).plural)},_.group_type_index)}),ne]})]})]}),Object(e.jsx)(c.a,{gutter:16,children:L.filters.groups.map(function(_,C){var f,l,T;return Object(e.jsxs)(O.a,{span:24,md:24,children:[C>0&&Object(e.jsx)("div",{className:"condition-set-separator",children:"OR"}),Object(e.jsxs)("div",{className:"mb-4 border rounded p-4",children:[Object(e.jsxs)(c.a,{align:"middle",justify:"space-between",children:[Object(e.jsxs)(c.a,{align:"middle",children:[Object(e.jsxs)("span",{className:"simple-tag tag-light-blue font-medium mr-2",children:["Set ",C+1]}),Object(e.jsx)("div",{children:(f=_.properties)!==null&&f!==void 0&&f.length?Object(e.jsx)(e.Fragment,{children:r?Object(e.jsxs)(e.Fragment,{children:["Match ",Object(e.jsx)("b",{children:P})," against ",Object(e.jsx)("b",{children:"all"})," criteria"]}):Object(e.jsxs)(e.Fragment,{children:["Matching ",Object(e.jsx)("b",{children:P})," against the criteria"]})}):Object(e.jsxs)(e.Fragment,{children:["Condition set will match ",Object(e.jsxs)("b",{children:["all ",P]})]})})]}),!r&&Object(e.jsxs)(c.a,{children:[Object(e.jsx)(U.a,{icon:Object(e.jsx)(R.IconCopy,{}),status:"muted",noPadding:!0,onClick:function(){return D(C)}}),L.filters.groups.length>1&&Object(e.jsx)(U.a,{icon:Object(e.jsx)(R.IconDelete,{}),status:"muted",noPadding:!0,onClick:function(){return p(C)}})]})]}),Object(e.jsx)(oe.a,{className:"my-3"}),!r&&je(_.properties)&&Object(e.jsxs)(Qe.a,{type:"info",className:"mt-3 mb-3",children:["These properties aren't immediately available on first page load for unidentified persons. This feature flag requires that at least one event is sent prior to becoming available to your product or website."," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank",children:[" ","Learn more about how to make feature flags available instantly."]})]}),r?Object(e.jsx)(e.Fragment,{children:_.properties.map(function(S,q){return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"feature-flag-property-display",children:[q===0?Object(e.jsx)(U.a,{icon:Object(e.jsx)(R.IconSubArrowRight,{className:"arrow-right"}),status:"muted",size:"small"}):Object(e.jsx)(U.a,{icon:Object(e.jsx)("span",{className:"text-sm",children:"&"}),status:"muted",size:"small"}),Object(e.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt",children:[S.type==="cohort"?"Cohort":S.key," "]}),Object(e.jsxs)("span",{children:[Object(xt.a)(S.operator)," "]}),ae()(Array.isArray(S.value)?S.value:[S.value]).map(function(se,rt){var me;return Object(e.jsx)("span",{className:"simple-tag tag-light-blue text-primary-alt display-value",children:S.type==="cohort"?se&&((me=le[se])===null||me===void 0?void 0:me.name)||"ID ".concat(se):se},rt)})]})})})}):Object(e.jsx)("div",{children:Object(e.jsx)(w.a,{orFiltering:!0,pageKey:"feature-flag-".concat(L.id,"-").concat(C,"-").concat(L.filters.groups.length,"-").concat((l=L.filters.aggregation_group_type_index)!==null&&l!==void 0?l:""),propertyFilters:_==null?void 0:_.properties,logicalRowDivider:!0,addButton:Object(e.jsx)(U.a,{icon:Object(e.jsx)(R.IconPlusMini,{}),noPadding:!0,children:"Add condition"}),onChange:function(q){return y(C,void 0,q)},taxonomicGroupTypes:N,hasRowOperator:!1})}),(!r||r&&((T=_.properties)===null||T===void 0?void 0:T.length)>0)&&Object(e.jsx)(oe.a,{className:"my-3"}),r?Object(e.jsxs)("div",{children:["Rolled out to"," ",Object(e.jsxs)("b",{children:[_.rollout_percentage!=null?_.rollout_percentage:100,"%"]})," of"," ",Object(e.jsx)("b",{children:P})," in this set"]}):Object(e.jsx)("div",{className:"feature-flag-form-row",children:Object(e.jsxs)("div",{className:"centered",children:["Roll out to"," ",Object(e.jsx)(x.a,{style:{width:100,marginLeft:8,marginRight:8},onChange:function(q){y(C,q)},value:_.rollout_percentage!=null?_.rollout_percentage:100,min:0,max:100,addonAfter:"%"})," ","of ",Object(e.jsx)("b",{children:P})," in this set"]})})]})]},"".concat(C,"-").concat(L.filters.groups.length))})}),!r&&Object(e.jsx)(U.a,{type:"secondary",className:"mt-0",onClick:E,icon:Object(e.jsx)(R.IconPlus,{}),children:"Add condition set"})]})}try{Fe.displayName="FeatureFlag",Fe.__docgenInfo={description:"",displayName:"FeatureFlag",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"]={docgenInfo:Fe.__docgenInfo,name:"FeatureFlag",path:"frontend/src/scenes/feature-flags/FeatureFlag.tsx#FeatureFlag"})}catch(n){}},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(H,h,t){"use strict";var K=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ae=t.n(K),ee=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),I=t.n(ee),X={};X.insert="head",X.singleton=!1;var he=ae()(I.a,X),pe=I.a.locals||{}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(H,h,t){"use strict";t.d(h,"a",function(){return m}),t.d(h,"b",function(){return re});var K=t("./node_modules/core-js/modules/es.function.name.js"),ae=t.n(K),ee=t("./node_modules/core-js/modules/es.array.slice.js"),I=t.n(ee),X=t("./node_modules/react/index.js"),he=t.n(X),pe=t("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),de=t("./node_modules/kea/lib/index.esm.js"),ue=t("./frontend/src/lib/dayjs.ts"),Oe=t("./frontend/src/lib/components/CompactList/CompactList.tsx"),J=t("./frontend/src/lib/components/LemonButton/index.ts"),te=t("./frontend/src/scenes/urls.ts"),Q=t("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),Z=t("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),z=t("./frontend/src/lib/utils/eventUsageLogic.ts"),c=t("./node_modules/react/jsx-runtime.js"),O=t.n(c);function m(B){var d=B.insight,x=Object(de.useActions)(z.e),u=x.reportInsightOpenedFromRecentInsightList;return Object(c.jsx)(J.a,{fullWidth:!0,to:te.a.insightView(d.short_id),onClick:function(){u()},children:Object(c.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(c.jsx)(Q.InsightIcon,{insight:d}),Object(c.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(c.jsx)("div",{children:d.name||d.derived_name}),Object(c.jsxs)("div",{children:["Last modified ",Object(ue.a)(d.last_modified_at).fromNow()]})]})]})})}function re(){var B=Object(de.useValues)(Z.a),d=B.recentInsights,x=B.recentInsightsLoading,u=Object(de.useActions)(Z.a),i=u.loadRecentInsights;return Object(X.useEffect)(function(){i()},[]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(Oe.a,{title:"Your recently viewed insights",viewAllURL:te.a.savedInsights(),loading:x,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:te.a.savedInsights()},items:d.slice(0,5),renderRow:function(w,k){return Object(c.jsx)(m,{insight:w},k)}})})}try{m.displayName="InsightRow",m.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:m.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(B){}},"./frontend/src/scenes/project-homepage/RecentRecordings.tsx":function(H,h,t){"use strict";t.d(h,"b",function(){return B}),t.d(h,"a",function(){return d});var K=t("./node_modules/core-js/modules/es.array.slice.js"),ae=t.n(K),ee=t("./frontend/src/lib/dayjs.ts"),I=t("./node_modules/kea/lib/index.esm.js"),X=t("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),he=t("./frontend/src/lib/components/CompactList/CompactList.tsx"),pe=t("./frontend/src/lib/components/LemonButton/index.ts"),de=t("./frontend/src/lib/components/ProfilePicture/index.ts"),ue=t("./frontend/src/scenes/persons/PersonHeader.tsx"),Oe=t("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),J=t("./frontend/src/scenes/urls.ts"),te=t("./frontend/src/lib/utils/eventUsageLogic.ts"),Q=t("./frontend/src/lib/utils.tsx"),Z=t("./frontend/src/lib/components/icons.tsx"),z=t("./frontend/src/scenes/session-recordings/player/modal/SessionPlayerModal.tsx"),c=t("./frontend/src/scenes/teamLogic.tsx"),O=t("./frontend/src/scenes/session-recordings/player/modal/sessionPlayerModalLogic.ts"),m=t("./node_modules/react/jsx-runtime.js"),re=t.n(m);function B(x){var u=x.recording,i=Object(I.useActions)(O.a),b=i.openSessionPlayer,w=Object(I.useActions)(te.e),k=w.reportRecordingOpenedFromRecentRecordingList;return Object(m.jsx)(pe.a,{fullWidth:!0,onClick:function(){b({id:u.id,matching_events:u.matching_events}),k()},children:Object(m.jsxs)("div",{className:"ProjectHomePage__listrow",children:[Object(m.jsx)(de.b,{name:Object(ue.b)(u.person)}),Object(m.jsxs)("div",{className:"ProjectHomePage__listrow__details",children:[Object(m.jsx)("div",{children:Object(ue.b)(u.person)}),Object(m.jsxs)("div",{children:["Recorded ",Object(ee.a)(u.start_time).fromNow()]})]}),Object(m.jsx)("span",{children:Object(Q.O)(u.recording_duration)}),Object(m.jsx)(Z.IconPlayCircle,{className:"text-2xl ml-2"})]})})}function d(){var x=Object(I.useValues)(c.a),u=x.currentTeam,i=Object(Oe.c)({key:"projectHomepage"}),b=Object(I.useValues)(i),w=b.sessionRecordings,k=b.sessionRecordingsResponseLoading;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(z.a,{}),Object(m.jsx)(he.a,{title:"Recent recordings",viewAllURL:J.a.sessionRecordings(),loading:k,emptyMessage:u!=null&&u.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:J.a.projectSettings()+"#recordings"},items:w.slice(0,5),renderRow:function(Ke,Be){return Object(m.jsx)(B,{recording:Ke},Be)}})]})}try{B.displayName="RecordingRow",B.__docgenInfo={description:"",displayName:"RecordingRow",props:{recording:{defaultValue:null,description:"",name:"recording",required:!0,type:{name:"SessionRecordingType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"]={docgenInfo:B.__docgenInfo,name:"RecordingRow",path:"frontend/src/scenes/project-homepage/RecentRecordings.tsx#RecordingRow"})}catch(x){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(H,h,t){"use strict";t.d(h,"a",function(){return B});var K=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ae=t.n(K),ee=t("./node_modules/@babel/runtime/regenerator/index.js"),I=t.n(ee),X=t("./node_modules/core-js/modules/es.array.iterator.js"),he=t.n(X),pe=t("./node_modules/core-js/modules/es.object.to-string.js"),de=t.n(pe),ue=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Oe=t.n(ue),J=t("./node_modules/kea/lib/index.esm.js"),te=t("./frontend/src/scenes/teamLogic.tsx"),Q=t("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),Z=t("./frontend/src/types.ts"),z=t("./frontend/src/lib/api.ts"),c=t("./node_modules/kea-subscriptions/lib/index.js"),O=t.n(c),m=t("./node_modules/kea-loaders/lib/index.js"),re=t.n(m),B=Object(J.kea)([Object(J.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(J.connect)({values:[te.a,["currentTeamId","currentTeam"]]}),Object(J.selectors)({primaryDashboardId:[function(){return[te.a.selectors.currentTeam]},function(d){return d==null?void 0:d.primary_dashboard}],dashboardLogic:[function(d){return[d.primaryDashboardId]},function(d){return Object(Q.c)({id:d!=null?d:void 0,placement:Z.m.ProjectHomepage})}]}),Object(m.loaders)(function(d){var x=d.values;return{recentInsights:[[],{loadRecentInsights:function(){var u=ae()(I.a.mark(function b(){var w;return I.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,z.b.get("api/projects/".concat(x.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return w=g.sent,g.abrupt("return",w.results);case 4:case"end":return g.stop()}},b)}));function i(){return u.apply(this,arguments)}return i}()}],persons:[[],{loadPersons:function(){var u=ae()(I.a.mark(function b(){var w;return I.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,z.b.persons.list();case 2:return w=g.sent,g.abrupt("return",w.results);case 4:case"end":return g.stop()}},b)}));function i(){return u.apply(this,arguments)}return i}()}]}}),Object(c.subscriptions)(function(d){var x=d.cache;return{dashboardLogic:function(i){var b;(b=x.unmount)===null||b===void 0||b.call(x),x.unmount=i?i.mount():null}}}),Object(J.afterMount)(function(d){var x,u=d.cache,i=d.actions;(x=u.unmount)===null||x===void 0||x.call(u),i.loadRecentInsights(),i.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlag.scss":function(H,h,t){var K=t("./node_modules/css-loader/dist/runtime/api.js");h=K(!1),h.push([H.i,".variant-form-list{font-size:13px;border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-top:16px}.variant-form-list .ant-form-item{min-height:32px}.variant-form-list .label-row{font-weight:700}.variant-form-list .label-row .ant-col{min-height:32px;display:flex;justify-content:space-between;align-items:center}.feature-flag-property-display{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.feature-flag-property-display .arrow-right{margin-right:-8px;margin-top:.25rem}.feature-flag-property-display .display-value{word-break:break-all}.condition-set-separator{color:var(--primary-alt);font-size:12px;font-weight:var(--font-semibold);margin-left:.5rem;margin-bottom:.5rem}.feature-flag-form-row{display:flex;justify-content:space-between;align-items:center;width:100%}.feature-flag-form-row .centered{display:flex;align-items:center;white-space:pre-wrap}",""]),H.exports=h},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feature-flags/FeatureFlagInstructions.scss":function(H,h,t){var K=t("./node_modules/css-loader/dist/runtime/api.js");h=K(!1),h.push([H.i,".FeatureFlagInstructionsHeader{flex-wrap:nowrap}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title{display:flex;justify-items:center}.FeatureFlagInstructionsHeader .FeatureFlagInstructionsHeader__header-title .FeatureFlagInstructionsHeader__header-title__icon{color:var(--text-muted-alt);margin-right:12px;font-size:1.6em}.FeatureFlagInstructionsHeader__option{display:flex;justify-items:center}.FeatureFlagInstructionsHeader__option .FeatureFlagInstructionsHeader__option__icon{margin-top:2px;margin-right:8px}",""]),H.exports=h},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(H,h,t){var K=t("./node_modules/css-loader/dist/runtime/api.js");h=K(!1),h.push([H.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),H.exports=h}}]);
