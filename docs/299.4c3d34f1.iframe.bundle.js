(window.webpackJsonp=window.webpackJsonp||[]).push([[299],{"./frontend/src/scenes/feedback/Feedback.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ExpandableSection",(function(){return ExpandableSection})),__webpack_require__.d(__webpack_exports__,"FeedbackInstructions",(function(){return FeedbackInstructions})),__webpack_require__.d(__webpack_exports__,"Feedback",(function(){return Feedback_Feedback})),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene}));var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),apps_common_src=__webpack_require__("./frontend/@posthog/apps-common/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),feedbackLogic=__webpack_require__("./frontend/src/scenes/feedback/feedbackLogic.ts"),CodeSnippet=__webpack_require__("./frontend/src/lib/components/CodeSnippet/index.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),Feedback=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feedback/Feedback.scss"),Feedback_default=__webpack_require__.n(Feedback),options={insert:"head",singleton:!1},icons=(injectStylesIntoStyleTag_default()(Feedback_default.a,options),Feedback_default.a.locals,__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts")),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function ExpandableSection(_ref){let{header:header,children:children,expanded:expanded,setExpanded:setExpanded}=_ref;return Object(jsx_runtime.jsxs)("div",{className:"rounded border p-4 my-4",children:[Object(jsx_runtime.jsxs)("div",{className:"flex cursor-pointer",onClick:()=>{setExpanded(!expanded)},children:[Object(jsx_runtime.jsx)(src.LemonButton,{className:"inline-flex items-center justify-center mr-2 mb-2",status:"stealth",noPadding:!0,onClick:()=>setExpanded(!expanded),icon:expanded?Object(jsx_runtime.jsx)(icons.bd,{}):Object(jsx_runtime.jsx)(icons.cd,{}),title:expanded?"Collapse":"Expand"}),Object(jsx_runtime.jsx)("div",{className:"inline-flex",children:header})]}),Object(jsx_runtime.jsx)("div",{children:expanded&&children})]})}function FeedbackInstructions(){const{expandedSection:expandedSection}=Object(index_esm.useValues)(feedbackLogic.a),{setExpandedSection:setExpandedSection}=Object(index_esm.useActions)(feedbackLogic.a);return Object(jsx_runtime.jsxs)("div",{className:"max-w-200",children:[Object(jsx_runtime.jsx)(ExpandableSection,{header:Object(jsx_runtime.jsx)("h2",{className:"text-xl",children:"Set up the feedback widget"}),expanded:expandedSection(0),setExpanded:expanded=>setExpandedSection(0,expanded),children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("p",{className:"text-sm italic",children:"The feedback widget is the quickest way to collect feedback from your users."}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:"text-lg",children:"1. Turn on the feedback widget"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{window.open(apps_common_src.urls.projectAppSearch("Feedback Widget"),"_blank")},type:"primary",children:"Feedback widget"})})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:"text-lg",children:"2. Enable site apps"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:"posthog.init('YOUR_PROJECT_API_KEY', {\n    api_host: 'YOUR API HOST',\n    opt_in_site_apps: true // <--- Add this line\n})"})})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:"text-lg",children:"3. Configure the feedback widget"}),Object(jsx_runtime.jsxs)("div",{className:"ml-4 my-4 text-base",children:[Object(jsx_runtime.jsx)("p",{children:"Configure the feedback widget one of the following ways:"}),Object(jsx_runtime.jsxs)("ul",{className:"list-disc ml-4",children:[Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Floating feedback button:"})," Select show feedback button on the page to have a floating feedback button on your website."]}),Object(jsx_runtime.jsxs)("li",{children:[Object(jsx_runtime.jsx)("strong",{children:"Custom button:"})," Add a button with a corresponding data attribute e.g. data-attr='posthog-feedback-button'. When clicked this will open the feedback widget"]})]})]})]})]})]})}),Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsxs)("div",{className:"flex justify-center items-center",children:[Object(jsx_runtime.jsx)(src.LemonDivider,{dashed:!0,className:"flex-1"}),Object(jsx_runtime.jsx)("h4",{className:"text-lg mx-4 text-muted mt-auto mb-auto",children:"OR"}),Object(jsx_runtime.jsx)(src.LemonDivider,{dashed:!0,className:"flex-1"})]})}),Object(jsx_runtime.jsx)(ExpandableSection,{header:Object(jsx_runtime.jsx)("h2",{className:"text-xl",children:"Create a custom feedback form"}),expanded:expandedSection(1),setExpanded:expanded=>setExpandedSection(1,expanded),children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("p",{className:"text-sm italic",children:"Create a custom form styled to your app and then send the feedback to PostHog."}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("div",{className:"text-lg",children:"1. Create the form"})}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:"text-lg",children:"2. Send the feedback to PostHog"}),Object(jsx_runtime.jsx)("div",{className:"ml-4 my-4",children:Object(jsx_runtime.jsx)(CodeSnippet.a,{language:CodeSnippet.b.JavaScript,wrap:!0,children:"posthog.capture('Feedback Sent', { '$feedback': 'Can you make the logo bigger?' })"})})]})]})]})})]})}function InAppFeedback(_ref2){let{config:config}=_ref2;const{eventName:eventName}=config,filters=function getFilters(eventName){return{insight:"TRENDS",events:[{id:eventName,name:eventName,type:"events",order:0}],actions:[],display:"ActionsLineGraph",interval:"day",new_entity:[],properties:[],filter_test_accounts:!1,date_from:"-30d"}}(eventName),{events:events}=Object(index_esm.useValues)(feedbackLogic.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h2",{children:"Feedback received in the last 30 days"}),Object(jsx_runtime.jsx)(apps_common_src.AdHocInsight,{filters:filters,style:{height:200}}),Object(jsx_runtime.jsx)(src.LemonTable,{dataSource:events,columns:[{key:"feedback",title:"Feedback",render:(_,event)=>Object(jsx_runtime.jsx)("div",{children:event.properties[config.feedbackProperty||"$feedback"]})},{key:"distinct_id",title:"Author",render:(_,event)=>(console.log({event:event}),event.person?Object(jsx_runtime.jsx)(apps_common_src.Link,{to:apps_common_src.urls.person(event.person.distinct_ids[0]),children:Object(jsx_runtime.jsx)(apps_common_src.PersonHeader,{noLink:!0,withIcon:!0,person:event.person})}):"Unknown user")},{key:"timestamp",title:"Sent",render:(_,event)=>Object(jsx_runtime.jsx)(apps_common_src.TZLabel,{time:event.timestamp,showSeconds:!0})}]})]})}function FeedbackWidgetTab(_ref3){let{config:config}=_ref3;const{events:events,eventsLoading:eventsLoading}=Object(index_esm.useValues)(feedbackLogic.a),{inAppFeedbackInstructions:inAppFeedbackInstructions}=Object(index_esm.useValues)(feedbackLogic.a),{toggleInAppFeedbackInstructions:toggleInAppFeedbackInstructions}=Object(index_esm.useActions)(feedbackLogic.a);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{className:"flex justify-end",children:events&&events.length>0&&Object(jsx_runtime.jsxs)(src.LemonButton,{onClick:()=>{toggleInAppFeedbackInstructions()},sideIcon:inAppFeedbackInstructions?Object(jsx_runtime.jsx)(icons.D,{}):Object(jsx_runtime.jsx)(icons.qb,{}),children:[inAppFeedbackInstructions?"Hide":"Show"," instructions"]})}),eventsLoading?Object(jsx_runtime.jsx)("div",{children:"Loading..."}):events&&0===events.length?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",{className:"mb-8",children:[Object(jsx_runtime.jsx)("h3",{className:"text-2xl",children:"No feedback received in the last 14 days."}),Object(jsx_runtime.jsx)("p",{className:"text-sm italic",children:"Starting sending feedback to use this feature. "})]}),Object(jsx_runtime.jsx)(FeedbackInstructions,{})]}):inAppFeedbackInstructions?Object(jsx_runtime.jsx)(FeedbackInstructions,{}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(InAppFeedback,{config:config})})]})}const Feedback_Feedback=()=>Object(jsx_runtime.jsxs)("div",{className:"Feedback",children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:["Feedback",Object(jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase",children:"Alpha"})]}),caption:Object(jsx_runtime.jsx)("p",{children:"Hear what your users have to say about your product."})}),Object(jsx_runtime.jsx)(FeedbackWidgetTab,{config:{eventName:"Feedback Sent",feedbackProperty:"$feedback"}})]}),scene={component:Feedback_Feedback,logic:feedbackLogic.a};try{ExpandableSection.displayName="ExpandableSection",ExpandableSection.__docgenInfo={description:"",displayName:"ExpandableSection",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"Element"}},expanded:{defaultValue:null,description:"",name:"expanded",required:!0,type:{name:"boolean"}},setExpanded:{defaultValue:null,description:"",name:"setExpanded",required:!0,type:{name:"(expanded: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feedback/Feedback.tsx#ExpandableSection"]={docgenInfo:ExpandableSection.__docgenInfo,name:"ExpandableSection",path:"frontend/src/scenes/feedback/Feedback.tsx#ExpandableSection"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/feedback/Feedback.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,"",""]),module.exports=exports}}]);