"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[56291],{"../../frontend/src/scenes/heatmaps/components/HeatmapsWarnings.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>HeatmapsWarnings});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.35.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),_layout_navigation_3000_sidepanel_panels_sidePanelSettingsLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/panels/sidePanelSettingsLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function HeatmapsWarnings(){let{currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.teamLogic),heatmapsEnabled=currentTeam?.heatmaps_opt_in,{openSettingsPanel}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_layout_navigation_3000_sidepanel_panels_sidePanelSettingsLogic__WEBPACK_IMPORTED_MODULE_4__.A);return heatmapsEnabled?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Vp,{type:"warning",action:{type:"secondary",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconGear,{}),onClick:()=>openSettingsPanel({sectionId:"environment-autocapture",settingId:"heatmaps"}),children:"Configure"},dismissKey:"heatmaps-might-be-disabled-warning",children:"You aren't collecting heatmaps data. Enable heatmaps in your project."})}},"../../frontend/src/scenes/heatmaps/scenes/heatmap/HeatmapRecordingScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{HeatmapRecordingScene:()=>HeatmapRecordingScene,scene:()=>scene});var LemonBanner=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonBanner/index.ts"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),HeatmapCanvas=__webpack_require__("../../frontend/src/lib/components/heatmaps/HeatmapCanvas.tsx"),heatmapDataLogic=__webpack_require__("../../frontend/src/lib/components/heatmaps/heatmapDataLogic.ts"),useResizeObserver=__webpack_require__("../../frontend/src/lib/hooks/useResizeObserver.ts"),heatmapsBrowserLogic=__webpack_require__("../../frontend/src/scenes/heatmaps/components/heatmapsBrowserLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function FixedReplayHeatmapBrowser(_ref){let{iframeRef}=_ref,logic=(0,heatmapsBrowserLogic.p)(),{replayIframeData,hasValidReplayIframeData,widthOverride}=(0,index_esm.useValues)(logic),{onIframeLoad,setIframeWidth}=(0,index_esm.useActions)(logic),{setWindowWidthOverride}=(0,index_esm.useActions)((0,heatmapDataLogic.y)({context:"in-app"})),{width:iframeWidth}=(0,useResizeObserver.y)({ref:iframeRef});return(0,react.useEffect)(()=>{null===widthOverride&&setIframeWidth(null!=iframeWidth?iframeWidth:null),setWindowWidthOverride(widthOverride)},[iframeWidth,setIframeWidth,widthOverride,setWindowWidthOverride]),hasValidReplayIframeData?(0,jsx_runtime.jsx)("div",{className:"flex flex-row gap-x-2 w-full",children:(0,jsx_runtime.jsx)("div",{className:"relative flex-1 w-full h-full",children:(0,jsx_runtime.jsx)("div",{className:"flex justify-center h-full w-full overflow-scroll",children:(0,jsx_runtime.jsxs)("div",{className:"relative h-full overflow-scroll",style:{width:null!=widthOverride?widthOverride:"100%"},children:[(0,jsx_runtime.jsx)(HeatmapCanvas.F,{positioning:"absolute",widthOverride:widthOverride,context:"in-app"}),(0,jsx_runtime.jsx)("iframe",{id:"heatmap-iframe",ref:iframeRef,className:"w-full h-full bg-white",srcDoc:replayIframeData?.html,onLoad:onIframeLoad,allow:""})]})})})}):null}var HeatmapsWarnings=__webpack_require__("../../frontend/src/scenes/heatmaps/components/HeatmapsWarnings.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),FilterPanel=__webpack_require__("../../frontend/src/scenes/heatmaps/components/FilterPanel.tsx");function UrlSearchHeader(){let logic=(0,heatmapsBrowserLogic.p)(),{replayIframeData}=(0,index_esm.useValues)(logic),{setReplayIframeDataURL}=(0,index_esm.useActions)(logic);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("div",{className:"flex-none md:flex justify-between items-end gap-2 w-full",children:(0,jsx_runtime.jsx)("div",{className:"flex gap-2 flex-1 min-w-0",children:(0,jsx_runtime.jsx)("div",{className:"flex-1",children:(0,jsx_runtime.jsxs)("div",{className:"mt-2",children:[(0,jsx_runtime.jsx)(src.HQ,{children:"Heatmap data URL"}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted mb-1",children:"Add * for wildcards to aggregate data from multiple pages"}),(0,jsx_runtime.jsx)(src.DF,{value:replayIframeData?.url,onChange:s=>setReplayIframeDataURL(s),className:"truncate",size:"small"})]})})})})})}function HeatmapRecording(){let iframeRef=(0,react.useRef)(null),logic=(0,heatmapsBrowserLogic.p)({iframeRef}),{hasValidReplayIframeData}=(0,index_esm.useValues)(logic);return hasValidReplayIframeData?(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:heatmapsBrowserLogic.p,props:{ref:iframeRef},children:(0,jsx_runtime.jsxs)(SceneContent._,{children:[(0,jsx_runtime.jsx)(HeatmapsWarnings.X,{}),(0,jsx_runtime.jsxs)("div",{className:"overflow-hidden w-full min-h-screen",children:[(0,jsx_runtime.jsx)(UrlSearchHeader,{}),(0,jsx_runtime.jsx)(src.p2,{className:"my-4"}),(0,jsx_runtime.jsx)(FilterPanel.h,{}),(0,jsx_runtime.jsx)(src.p2,{className:"my-4"}),(0,jsx_runtime.jsx)("div",{className:"relative flex flex-1 overflow-hidden min-h-screen",children:(0,jsx_runtime.jsx)(FixedReplayHeatmapBrowser,{iframeRef:iframeRef})})]})]})}):(0,jsx_runtime.jsx)(src.Vp,{type:"warning",action:{type:"secondary",icon:(0,jsx_runtime.jsx)(icons.pF,{}),to:urls.j.replay(),children:"Open session recording"},dismissKey:"heatmaps-no-replay-iframe-data-warning",children:"This view is based on session recording data. Please open a session recording to view it."})}var sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes=__webpack_require__("../../frontend/src/scenes/scenes.ts");let scene={component:HeatmapRecordingScene,logic:(0,index_esm.kea)([(0,index_esm.path)(["scenes","heatmaps","scenes","heatmap","heatmapRecordingLogic"]),(0,index_esm.selectors)(()=>({breadcrumbs:[()=>[],()=>[{key:sceneTypes.x.Heatmaps,name:scenes.lc[sceneTypes.x.Heatmaps].name||"Heatmaps",path:urls.j.heatmaps(),iconType:scenes.lc[sceneTypes.x.Heatmaps].iconType||"default_icon_type"}]]}))]),settingSectionId:"environment-autocapture"};function HeatmapRecordingScene(){return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(LemonBanner.V,{type:"info",dismissKey:"heatmaps-beta-banner",className:"mb-4",action:{children:"Send feedback",id:"heatmaps-feedback-button"},children:(0,jsx_runtime.jsx)("p",{children:"Heatmaps is in beta. Please let us know what you'd like to see here and/or report any issues directly to us!"})}),(0,jsx_runtime.jsx)(HeatmapRecording,{})]})}}}]);