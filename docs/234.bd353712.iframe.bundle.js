(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{"./frontend/src/scenes/groups/groupsListLogic.ts":function(C,d,e){"use strict";e.d(d,"a",function(){return F});var t=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=e.n(t),u=e("./node_modules/@babel/runtime/regenerator/index.js"),a=e.n(u),y=e("./node_modules/core-js/modules/es.array.iterator.js"),Y=e.n(y),G=e("./node_modules/core-js/modules/es.object.to-string.js"),A=e.n(G),_=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),z=e.n(_),M=e("./node_modules/core-js/modules/es.array.concat.js"),U=e.n(M),N=e("./node_modules/kea/lib/index.esm.js"),m=e("./frontend/src/lib/api.ts"),b=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),c=e("./frontend/src/lib/utils.tsx"),D=e("./frontend/src/scenes/teamLogic.tsx"),p=e("./frontend/src/scenes/urls.ts"),W=e("./frontend/src/models/groupsModel.ts"),F=Object(N.kea)({path:["groups","groupsListLogic"],connect:{values:[D.a,["currentTeamId"],W.a,["groupTypes","aggregationLabel"],b.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(o){return{url:o}},setTab:function(o){return{tab:o}}}},loaders:function(r){var o=r.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var i=s()(a.a.mark(function h(S){var R;return a.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(R=S.url,!o.groupsEnabled){E.next=6;break}return R=R||"api/projects/".concat(o.currentTeamId,"/groups/?group_type_index=").concat(o.currentTab),E.next=5,m.b.get(R);case 5:return E.abrupt("return",E.sent);case 6:case"end":return E.stop()}},h)}));function v(h){return i.apply(this,arguments)}return v}()}]}},reducers:{currentTab:["-1",{setTab:function(r,o){var i=o.tab;return i}}]},selectors:{currentTabName:[function(n){return[n.currentTab,n.groupTypes,n.aggregationLabel]},function(n,r,o){return n==="-1"?"Persons":r!=null&&r.length?Object(c.j)(o(parseInt(n)).singular):""}],groupName:[function(n){return[n.currentTab,n.aggregationLabel]},function(n,r){return n==="-1"?{singular:"person",plural:"persons"}:r(parseInt(n))}],breadcrumbs:[function(n){return[n.currentTabName,n.currentTab]},function(n,r){return[{name:n,path:p.a.groups(r)}]}]},actionToUrl:function(){return{setTab:function(o){var i=o.tab;return i!=="-1"?p.a.groups(i):p.a.persons()}}},urlToAction:function(r){var o=r.actions,i=r.values;return{"/groups/:id":function(h){var S=h.id;S&&(o.setTab(S),o.loadGroups())},"/persons":function(){i.currentTab!=="-1"&&o.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(C,d,e){"use strict";e.d(d,"a",function(){return m});var t=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/lib/components/PageHeader.tsx"),u=e("./node_modules/react/index.js"),a=e.n(u),y=e("./node_modules/core-js/modules/es.array.includes.js"),Y=e("./node_modules/core-js/modules/es.string.includes.js"),G=e("./node_modules/core-js/modules/es.array.map.js"),A=e("./node_modules/antd/es/tabs/index.js"),_=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),z=e("./frontend/src/lib/utils.tsx"),M=e("./frontend/src/models/groupsModel.ts"),U=e("./frontend/src/scenes/groups/groupsListLogic.ts");function N(){var b=Object(t.useActions)(U.a),c=b.setTab,D=Object(t.useValues)(U.a),p=D.currentTab,W=Object(t.useValues)(M.a),F=W.groupTypes,n=W.aggregationLabel,r=Object(t.useValues)(_.b),o=r.groupsAccessStatus,i=[_.a.HasAccess,_.a.HasGroupTypes,_.a.NoAccess].includes(o);return a.a.createElement(A.a,{activeKey:p,onChange:function(h){return c(h)}},a.a.createElement(A.a.TabPane,{tab:"Persons",key:"-1"}),i?a.a.createElement(A.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):F.map(function(v){return a.a.createElement(A.a.TabPane,{tab:Object(z.j)(n(v.group_type_index).plural),key:v.group_type_index})}))}function m(b){var c=b.hideGroupTabs,D=Object(t.useValues)(M.a),p=D.showGroupsOptions;return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{title:"Persons".concat(p?" & Groups":""),caption:"A catalog of your product's end users".concat(p?" and groups":"",".")}),!c&&p&&a.a.createElement(N,null))}try{m.displayName="PersonPageHeader",m.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:m.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(b){}},"./frontend/src/scenes/persons/Persons.scss":function(C,d,e){"use strict";var t=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(t),u=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),a=e.n(u),y={};y.insert="head",y.singleton=!1;var Y=s()(a.a,y),G=a.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(C,d,e){"use strict";e.r(d),e.d(d,"scene",function(){return Q}),e.d(d,"Persons",function(){return H}),e.d(d,"PersonsScene",function(){return J});var t=e("./node_modules/react/index.js"),s=e.n(t),u=e("./node_modules/kea/lib/index.esm.js"),a=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),y=e.n(a),Y=e("./node_modules/core-js/modules/es.array.concat.js"),G=e("./node_modules/core-js/modules/es.object.keys.js"),A=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),_=e("./frontend/src/lib/components/PropertiesTable.tsx"),z=e("./frontend/src/scenes/persons/Persons.scss"),M=e("./frontend/src/lib/components/CopyToClipboard.tsx"),U=e("./frontend/src/scenes/persons/PersonHeader.tsx"),N=e("./frontend/src/lib/components/LemonTable/index.ts");function m(l){var f=l.people,B=l.loading,g=B===void 0?!1:B,V=l.hasPrevious,T=l.hasNext,P=l.loadPrevious,O=l.loadNext,I=l.compact,K=[{title:"Person",key:"person",render:function(x,L){return s.a.createElement(U.a,{withIcon:!0,person:L})}},{title:"ID",key:"id",render:function(x,L){return s.a.createElement("div",{style:{overflow:"hidden"}},L.distinct_ids.length&&s.a.createElement(M.a,{explicitValue:L.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},L.distinct_ids[0]))}}].concat(y()(I?[]:[{title:"First seen",dataIndex:"created_at",render:function(x){return x?s.a.createElement(A.b,{time:x}):s.a.createElement(s.a.Fragment,null)}}]));return s.a.createElement(N.a,{"data-tooltip":"persons-table",columns:K,loading:g,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:T?function(){O==null||O(),window.scrollTo(0,0)}:void 0,onBackward:V?function(){P==null||P(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(x){var L=x.properties;return Object.keys(L).length?s.a.createElement(_.a,{properties:L}):"This person has no properties."}},dataSource:f,emptyState:"No persons",nouns:["person","persons"]})}try{m.displayName="PersonsTable",m.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:m.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(l){}var b=e("./node_modules/antd/es/popconfirm/index.js"),c=e("./frontend/src/scenes/persons/personsLogic.ts"),D=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),p=e.n(D),W=e("./node_modules/core-js/modules/es.regexp.exec.js"),F=e("./node_modules/core-js/modules/es.string.search.js"),n=e("./frontend/src/lib/components/icons.tsx"),r=e("./frontend/src/lib/components/Tooltip.tsx"),o=e("./frontend/@posthog/lemon-ui/src/index.ts"),i=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),v=function(){var f=Object(u.useActions)(c.a),B=f.loadPersons,g=f.setListFilters,V=Object(u.useValues)(c.a),T=V.listFilters,P=Object(t.useState)(""),O=p()(P,2),I=O[0],K=O[1],j=Object(i.a)(B,800);return Object(t.useEffect)(function(){K(T.search||"")},[]),Object(t.useEffect)(function(){g({search:I||void 0}),j()},[I]),s.a.createElement("div",{className:"flex items-center gap-2"},s.a.createElement(o.LemonInput,{type:"search",placeholder:"Search for persons",onChange:K,value:I,"data-attr":"persons-search"}),s.a.createElement(r.a,{title:s.a.createElement(s.a.Fragment,null,'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.')},s.a.createElement(n.IconInfo,{className:"text-2xl text-muted-alt shrink-0"})))},h=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),S=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),R=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),$=e("./frontend/src/lib/components/LemonButton/index.ts"),E=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),Q={component:J,logic:c.a,paramsToProps:function(){return{syncWithUrl:!0}}};function H(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=l.cohort;return s.a.createElement(u.BindLogic,{logic:c.a,props:{cohort:f,syncWithUrl:!f}},s.a.createElement(J,null))}function J(){var l=Object(u.useActions)(c.a),f=l.loadPersons,B=l.setListFilters,g=Object(u.useValues)(c.a),V=g.cohortId,T=g.persons,P=g.listFilters,O=g.personsLoading,I=g.exporterProps,K=g.apiDocsURL;return s.a.createElement("div",{className:"persons-list"},!V&&s.a.createElement(h.a,null),s.a.createElement("div",{className:"space-y-2"},s.a.createElement("div",{className:"flex justify-between items-center gap-2"},s.a.createElement(v,null),s.a.createElement(b.a,{placement:"topRight",title:s.a.createElement(s.a.Fragment,null,"Exporting by csv is limited to 10,000 users.",s.a.createElement("br",null),"To return more, please use ",s.a.createElement("a",{href:K},"the API"),". Do you want to export by CSV?"),onConfirm:function(){return Object(E.a)(I[0])}},s.a.createElement($.a,{type:"secondary",icon:s.a.createElement(n.IconExport,{style:{color:"var(--primary)"}})},P.properties&&P.properties.length>0?s.a.createElement("div",{style:{display:"block"}},"Export (",s.a.createElement("strong",null,P.properties.length)," filter)"):"Export"))),s.a.createElement(S.a,{pageKey:"persons-list-page",propertyFilters:P.properties,onChange:function(x){B({properties:x}),f()},endpoint:"person",taxonomicGroupTypes:[R.a.PersonProperties],showConditionBadge:!0}),s.a.createElement(m,{people:T.results,loading:O,hasPrevious:!!T.previous,hasNext:!!T.next,loadPrevious:function(){return f(T.previous)},loadNext:function(){return f(T.next)}})))}try{H.displayName="Persons",H.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:H.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(l){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(C,d,e){var t=e("./node_modules/css-loader/dist/runtime/api.js");d=t(!1),d.push([C.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),C.exports=d}}]);
