var Nn=Object.defineProperty,Rn=Object.defineProperties;var An=Object.getOwnPropertyDescriptors;var ht=Object.getOwnPropertySymbols;var wn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable;var gt=(N,O,t)=>O in N?Nn(N,O,{enumerable:!0,configurable:!0,writable:!0,value:t}):N[O]=t,te=(N,O)=>{for(var t in O||(O={}))wn.call(O,t)&&gt(N,t,O[t]);if(ht)for(var t of ht(O))Vn.call(O,t)&&gt(N,t,O[t]);return N},ne=(N,O)=>Rn(N,An(O));(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(N,O,t){"use strict";t.d(O,"a",function(){return a});var M=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),z=t("./frontend/src/lib/utils.tsx"),W=t("./frontend/src/types.ts"),l=t("./frontend/src/scenes/insights/sharedUtils.ts"),_=t("./frontend/src/scenes/insights/insightLogic.ts");function P(b){return Object.values(W.B).includes(b)}const a=Object(M.kea)({props:{},key:Object(l.l)("new"),path:b=>["lib","components","ChartFilter","chartFilterLogic",b],connect:b=>({actions:[Object(_.c)(b),["setFilters"]],values:[Object(_.c)(b),["filters"]]}),actions:()=>({setChartFilter:b=>({chartFilter:b})}),selectors:{chartFilter:[b=>[b.filters],b=>(Object(l.e)(b)?b.funnel_viz_type:Object(l.c)(b)?b.display:null)||null]},listeners:b=>{let{actions:V,values:h}=b;return{setChartFilter:e=>{let{chartFilter:$}=e;if(P($)){if((Object(l.e)(h.filters)?h.filters.funnel_viz_type:null)!==$){const oe=ne(te({},h.filters),{funnel_viz_type:$});V.setFilters(oe)}}else if((Object(l.j)(h.filters)||Object(l.i)(h.filters))&&!Object(z.qb)(h.filters.display,$)){const Z=ne(te({},h.filters),{display:$});V.setFilters(Z)}}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(N,O,t){"use strict";t.d(O,"a",function(){return P});var M=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),z=t("./frontend/src/lib/utils.tsx"),W=t("./frontend/src/types.ts"),l=t("./frontend/src/scenes/insights/sharedUtils.ts"),_=t("./frontend/src/scenes/insights/insightLogic.ts");const P=Object(M.kea)({props:{},key:Object(l.l)("new"),path:a=>["lib","components","CompareFilter","compareFilterLogic",a],connect:a=>({actions:[Object(_.c)(a),["setFilters"]],values:[Object(_.c)(a),["filters as inflightFilters","canEditInsight"]]}),actions:()=>({setCompare:a=>({compare:a}),toggleCompare:!0}),selectors:{filters:[a=>[a.inflightFilters],a=>a&&(Object(l.j)(a)||Object(l.i)(a))?a:{}],compare:[a=>[a.filters],a=>a&&(Object(l.j)(a)||Object(l.i)(a))&&!!a.compare],disabled:[a=>[a.filters,a.canEditInsight],(a,b)=>{let{insight:V,date_from:h,display:e}=a;return!b||V===W.F.LIFECYCLE||e===W.k.WorldMap||h==="all"}]},listeners:a=>{let{values:b,actions:V}=a;return{setCompare:h=>{let{compare:e}=h;if(!Object(z.qb)(e,b.compare)){const $=ne(te({},b.filters),{compare:e});V.setFilters($)}},toggleCompare:()=>{V.setCompare(!b.compare)}}}})},"./frontend/src/lib/components/InlineMessage/InlineMessage.tsx":function(N,O,t){"use strict";t.d(O,"a",function(){return Z});var M=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),z=t("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),W=t.n(z),l=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss"),_=t.n(l),P={};P.insert="head",P.singleton=!1;var a=W()(_.a,P),b=_.a.locals||{},V=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),h=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),e=t("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),$=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function Z(oe){let{children:C,style:H,icon:be=Object($.jsx)(V.a,{}),type:me="info",closable:fe,onClose:se}=oe;const[G,Le]=Object(M.useState)(!0),Ne=()=>{Le(!1),se==null||se()};return Object($.jsxs)("div",{className:Object(e.default)("inline-message",me,fe&&"closable",!G&&"hidden"),style:H,children:[Object($.jsx)("div",{className:"inline-icon",children:be}),Object($.jsx)("div",{className:"inline-main",children:C}),fe&&Object($.jsx)("div",{className:"closable",onClick:Ne,children:Object($.jsx)(h.a,{})})]})}try{Z.displayName="InlineMessage",Z.__docgenInfo={description:"",displayName:"InlineMessage",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:{value:"<ExclamationCircleFilled />"},description:"",name:"icon",required:!1,type:{name:"Element"}},type:{defaultValue:{value:"info"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"danger"'},{value:'"info"'},{value:'"warning"'}]}},closable:{defaultValue:null,description:"",name:"closable",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"]={docgenInfo:Z.__docgenInfo,name:"InlineMessage",path:"frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"})}catch(oe){}},"./frontend/src/scenes/insights/InsightContainer.tsx":function(N,O,t){"use strict";t.d(O,"a",function(){return Pe});var M=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/card/index.js"),z=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),W=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),l=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),_=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),P=t("./frontend/src/lib/components/icons.tsx"),a=t("./frontend/src/types.ts"),b=t("./frontend/src/scenes/insights/insightLogic.ts"),V=t("./frontend/@posthog/lemon-ui/src/index.ts"),h=t("./frontend/src/scenes/insights/sharedUtils.ts"),e=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function $(n){let{filters:s,onChange:o,disabled:i}=n;const{insightProps:r,isSingleSeries:c}=Object(l.useValues)(b.c),{chartFilter:d}=Object(l.useValues)(Object(_.a)(r)),{setChartFilter:m}=Object(l.useActions)(Object(_.a)(r)),u=Object(h.j)(s),j=u?void 0:"This type isn't available for this insight type.",x=c?void 0:"This type isn't available, because there are multiple trend series.",f=[{title:"Time Series",options:[{value:a.k.ActionsLineGraph,icon:Object(e.jsx)(P.IconShowChart,{}),label:"Line"},{value:a.k.ActionsBar,icon:Object(e.jsx)(P.IconBarChart,{}),label:"Bar"},{value:a.k.ActionsAreaGraph,icon:Object(e.jsx)(P.IconAreaChart,{}),label:"Area"}]},{title:"Cumulative Time Series",options:[{value:a.k.ActionsLineGraphCumulative,icon:Object(e.jsx)(P.IconCumulativeChart,{}),label:"Line",disabledReason:j}]},{title:"Total Value",options:[{value:a.k.BoldNumber,icon:Object(e.jsx)(P.Icon123,{}),label:"Number",disabledReason:j||x},{value:a.k.ActionsPie,icon:Object(e.jsx)(P.IconPieChart,{}),label:"Pie",disabledReason:j},{value:a.k.ActionsBarValue,icon:Object(e.jsx)(P.IconBarChart,{className:"rotate-90"}),label:"Bar",disabledReason:j},{value:a.k.ActionsTable,icon:Object(e.jsx)(P.IconTableChart,{}),label:"Table"},{value:a.k.WorldMap,icon:Object(e.jsx)(P.IconPublic,{}),label:"World Map",tooltip:"Visualize data by country.",disabledReason:j||x||(u&&s.formula?"This type isn't available, because it doesn't support formulas.":!!s.breakdown&&s.breakdown!=="$geoip_country_code"&&s.breakdown!=="$geoip_country_name"?"This type isn't available, because there's a breakdown other than by Country Code or Country Name properties.":void 0)}]}];return Object(e.jsx)(V.LemonSelect,{value:d||a.k.ActionsLineGraph,onChange:v=>{m(v),o==null||o(v)},dropdownPlacement:"bottom-end",optionTooltipPlacement:"left",dropdownMatchSelectWidth:!1,"data-attr":"chart-filter",disabled:i,options:f,size:"small"},"2")}try{$.displayName="ChartFilter",$.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:$.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(n){}var Z=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function oe(){const{insightProps:n}=Object(l.useValues)(b.c),{compare:s,disabled:o}=Object(l.useValues)(Object(Z.a)(n)),{setCompare:i}=Object(l.useActions)(Object(Z.a)(n));return o?null:Object(e.jsx)(V.LemonCheckbox,{onChange:i,checked:s,disabled:o,label:Object(e.jsx)("span",{className:"font-normal",children:"Compare to previous time period"}),bordered:!0,size:"small"})}var C=t("./frontend/src/lib/utils.tsx"),H=t("./frontend/src/lib/dayjs.ts"),be=t("./frontend/src/lib/logic/featureFlagLogic.ts");const me=Object(l.kea)({props:{},key:Object(h.l)("new"),path:n=>["lib","components","IntervalFilter","intervalFilterLogic",n],connect:n=>({actions:[Object(b.c)(n),["setFilters"]],values:[Object(b.c)(n),["filters"],be.a,["featureFlags"]]}),actions:()=>({setInterval:n=>({interval:n})}),listeners:n=>{let{values:s,actions:o,selectors:i}=n;return{setInterval:r=>{let{interval:c}=r;Object(C.qb)(c,s.filters.interval)||o.setFilters(ne(te({},s.filters),{interval:c}))},setFilters:(r,c,d,m)=>{let{filters:u}=r;const{date_from:j,date_to:x}=u,f=i.filters(m);if(!j||Object(C.qb)(j,f.date_from)&&Object(C.qb)(x,f.date_to))return;if(j&&x&&Object(H.a)(u.date_from).isValid()&&Object(H.a)(u.date_to).isValid()){Object(H.a)(x).diff(Object(H.a)(j),"day")<=3?o.setInterval("hour"):Object(H.a)(x).diff(Object(H.a)(j),"month")<=3?o.setInterval("day"):o.setInterval("month");return}let v="day";for(const{key:F,values:y,defaultInterval:T}of C.u)if(y[0]===j&&y[1]===(x||void 0)&&F!=="Custom"&&T){v=T;break}o.setInterval(v)}}},selectors:{interval:[n=>[n.filters],n=>n==null?void 0:n.interval]}}),fe={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function se(n){let{disabled:s}=n;const{insightProps:o}=Object(l.useValues)(b.c),{interval:i}=Object(l.useValues)(me(o)),{setInterval:r}=Object(l.useActions)(me(o));return Object(e.jsx)(V.LemonSelect,{size:"small",disabled:s,value:i||void 0,dropdownMatchSelectWidth:!1,onChange:c=>{c&&r(String(c))},"data-attr":"interval-filter",options:Object.entries(fe).map(c=>{let[d,{label:m}]=c;return{value:d,label:m}})})}try{se.displayName="IntervalFilter",se.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:se.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(n){}var G=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),Le=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FundOutlined.js"),Ne=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts"),re=t("./frontend/src/scenes/trends/trendsLogic.ts");function Ot(){const{insightProps:n}=Object(l.useValues)(b.c),{filters:s}=Object(l.useValues)(Object(re.a)(n)),{setFilters:o}=Object(l.useActions)(Object(re.a)(n));if(!s.interval||!Object(h.j)(s))return null;const{interval:i,smoothing_intervals:r}=s,c=Ne.a[i].map(d=>{let{value:m,label:u}=d;return{value:m,label:m===r?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Le.a,{})," ",u]}):u}});return c.length?Object(e.jsx)(G.a,{bordered:!0,value:r||1,dropdownMatchSelectWidth:!1,onChange:d=>{o(ne(te({},s),{smoothing_intervals:d}))},"data-attr":"smoothing-filter",options:c},i):Object(e.jsx)(e.Fragment,{})}var ae=t("./frontend/src/lib/constants.tsx"),xt=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),ee=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),He=t("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts"),vt=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function he(n){var s;const{insightProps:o}=Object(l.useValues)(b.c),{dates:{dateFrom:i,dateTo:r}}=Object(l.useValues)(Object(He.a)(o)),{setDates:c}=Object(l.useActions)(Object(He.a)(o));return Object(e.jsx)(vt.a,ne(te({},n),{dateFrom:(s=i!=null?i:"-7d")!==null&&s!==void 0?s:void 0,dateTo:r!=null?r:void 0,onChange:(d,m)=>{var u;c(d,m),(u=n.onChange)===null||u===void 0||u.call(n,d,m)}}))}try{he.displayName="InsightDateFilter",he.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},showRollingRangePicker:{defaultValue:null,description:"",name:"showRollingRangePicker",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string | null, toDate: string | null) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"(() => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"DateMappingOption[]"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:he.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(n){}var ge=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),K=t("./frontend/src/lib/components/Tooltip.tsx"),yt=t("./frontend/src/lib/components/DatePicker.tsx");function Oe(n){let{disabled:s}=n;const{insightProps:o}=Object(l.useValues)(b.c),{filters:i}=Object(l.useValues)(Object(ge.e)(o)),{setFilters:r}=Object(l.useActions)(Object(ge.e)(o)),c=i.date_to&&Object(H.a)(i.date_to).year()!==Object(H.a)().year()?", YYYY":"";return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(K.a,{title:"Cohorts up to this end date",children:Object(e.jsx)("span",{style:{maxWidth:100},className:"flex inline-flex items-center pl-2",children:Object(e.jsx)(yt.a,{showTime:i.period==="Hour",use12Hours:!0,format:i.period==="Hour"?`MMM D${c}, h a`:`MMM D${c}`,value:i.date_to?Object(H.a)(i.date_to):void 0,onChange:d=>r({date_to:d&&Object(H.a)(d).toISOString()}),allowClear:!0,placeholder:"Today",className:"retention-date-picker",disabled:s})})})})}try{Oe.displayName="RetentionDatePicker",Oe.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:Oe.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(n){}var U=t("./frontend/src/scenes/funnels/funnelLogic.ts");function xe(n){let{disabled:s}=n;const{insightProps:o}=Object(l.useValues)(b.c),{barGraphLayout:i}=Object(l.useValues)(Object(U.a)(o)),{setFilters:r}=Object(l.useActions)(Object(U.a)(o)),c=[{title:"Graph Display Options",options:[{value:ae.k.vertical,icon:Object(e.jsx)(P.IconFunnelVertical,{}),label:"Left to right"},{value:ae.k.horizontal,icon:Object(e.jsx)(P.IconFunnelHorizontal,{}),label:"Top to bottom"}]}];return Object(e.jsx)(V.LemonSelect,{value:i||ae.k.vertical,onChange:d=>d&&r({layout:d}),dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",disabled:s,options:c,size:"small"})}try{xe.displayName="FunnelDisplayLayoutPicker",xe.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:xe.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(n){}var Ct=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),Re=t("./frontend/src/scenes/paths/pathsLogic.ts"),St=t("./frontend/src/scenes/userLogic.ts");function ve(n){var s;let{disabled:o}=n;const{insightProps:i}=Object(l.useValues)(b.c),{filter:r}=Object(l.useValues)(Object(Re.b)(i)),{setFilter:c}=Object(l.useActions)(Object(Re.b)(i)),{user:d}=Object(l.useValues)(St.a),m=2,u=d!=null&&(s=d.organization)!==null&&s!==void 0&&s.available_features.includes(a.e.PATHS_ADVANCED)?20:5,j=Array.from(Array.from(Array.from(Array(u+1).keys()).slice(m)),x=>({label:`${x} Steps`,value:x}));return Object(e.jsx)(G.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:r.step_limit||Re.a,onSelect:x=>c({step_limit:x}),listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:C.a.bottomRight,optionLabelProp:"label",disabled:o,children:j.map(x=>Object(e.jsx)(G.a.Option,{value:x.value,label:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Ct.a,{})," ",x.label]}),children:x.label},x.value))})}try{ve.displayName="PathStepPicker",ve.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:ve.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"})}catch(n){}var Ge=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function ye(n){let{disabled:s}=n;const{insightProps:o}=Object(l.useValues)(b.c),{retentionReference:i}=Object(l.useValues)(Object(ge.e)(o)),{setRetentionReference:r}=Object(l.useActions)(Object(ge.e)(o));return Object(e.jsx)(G.a,{value:i,onChange:r,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:s,children:[{value:"total",icon:Object(e.jsx)(Ge.a,{}),label:"Overall cohort"},{value:"previous",icon:Object(e.jsx)(Ge.a,{}),label:"Relative to previous period"}].map(c=>Object(e.jsx)(G.a.Option,{value:c.value,label:Object(e.jsxs)(e.Fragment,{children:[c.icon," ",c.label]}),children:c.label},c.value))})}try{ye.displayName="ReferencePicker",ye.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:ye.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"})}catch(n){}var Je=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tooltip/index.js"),Ft=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),It=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),Ae=t("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js");const Tt=1,Qe=90,Et=new Set([5,15,25,50,90]),kt=[{label:"Auto bins",value:ae.b,display:!0},...Array.from(Array.from(Array(Qe+1).keys()),n=>({label:`${n} bins`,value:n,display:Et.has(n)})),{label:"Custom",value:"custom",display:!0}];function Ce(n){let{disabled:s}=n;const{insightProps:o}=Object(l.useValues)(b.c),{filters:i,numericBinCount:r}=Object(l.useValues)(Object(U.a)(o)),{setBinCount:c}=Object(l.useActions)(Object(U.a)(o));return Object(e.jsx)(G.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:ae.b,value:i.bin_count||ae.b,onSelect:d=>c(d),dropdownRender:d=>Object(e.jsxs)(e.Fragment,{children:[d,Object(e.jsxs)("div",{children:[Object(e.jsx)(Ft.a,{className:"funnel-bins-custom-picker",size:"middle",min:Tt,max:Qe,value:r,onChange:m=>{const u=typeof m=="string"?parseInt(m):m;u&&c(u)}})," ","bins"]})]}),listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:C.a.bottomRight,optionLabelProp:"label",disabled:s,children:Object(e.jsx)(G.a.OptGroup,{label:"Bin Count",children:kt.map(d=>d.value==="custom"?null:Object(e.jsx)(G.a.Option,{className:Object(Ae.default)({hidden:!d.display}),value:d.value,label:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(It.a,{})," ",d.label]}),children:d.label},d.value))})})}try{Ce.displayName="FunnelBinsPicker",Ce.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:Ce.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(n){}var we=t("./frontend/src/scenes/insights/aggregationAxisFormat.ts"),J=t("./frontend/src/lib/components/LemonButton/index.ts"),Pt=t("./frontend/src/lib/components/LemonDivider/index.ts"),Y=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),Xe=t.n(Y),_t=t("./frontend/src/lib/hooks/useKeyboardHotkeys.tsx"),Ve=t("./frontend/src/lib/utils/eventUsageLogic.ts"),Lt=t("./frontend/src/lib/components/LemonModal/index.ts"),Nt=t("./frontend/src/lib/forms/Field.tsx"),Rt=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx");function Ze(n,s){return n==="prefix"?s.aggregation_axis_prefix||"":n==="postfix"&&s.aggregation_axis_postfix||""}function Se(n){let{isOpen:s,onSave:o,formativeElement:i,filters:r,onClose:c,overlayRef:d}=n;const[m,u]=Object(Y.useState)(Ze(i,r));return Object(Y.useEffect)(()=>{u(Ze(i,r))},[i]),i===null?null:Object(e.jsx)(Lt.a,{overlayRef:d,isOpen:s,onClose:c,forceAbovePopups:!0,title:`Custom ${i}`,footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(J.a,{type:"secondary","data-attr":"custom-prefix-cancel",onClick:c,children:"Cancel"}),Object(e.jsx)(J.a,{type:"primary",onClick:()=>o({[i]:m}),children:"Apply"})]}),children:Object(e.jsx)(Nt.b,{label:`${Object(C.i)(i)}:`,help:Object(e.jsxs)(e.Fragment,{children:["With a ",i,' of "',Object(e.jsx)("strong",{children:m||"$"}),'", 123.45 will be displayed as "',Object(e.jsxs)("strong",{children:[i==="prefix"?m||"$":"","123.45",i==="postfix"?m||"$":""]}),'"']}),children:Object(e.jsx)(Rt.a,{value:m,onChange:u,autoFocus:!0})})})}try{Se.displayName="CustomUnitModal",Se.__docgenInfo={description:"",displayName:"CustomUnitModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(hx: HandleUnitChange) => void"}},formativeElement:{defaultValue:null,description:"",name:"formativeElement",required:!0,type:{name:'"prefix" | "postfix" | null'}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},overlayRef:{defaultValue:null,description:"",name:"overlayRef",required:!0,type:{name:"(instance: HTMLDivElement | null) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/UnitPicker/CustomUnitModal.tsx#CustomUnitModal"]={docgenInfo:Se.__docgenInfo,name:"CustomUnitModal",path:"frontend/src/lib/components/UnitPicker/CustomUnitModal.tsx#CustomUnitModal"})}catch(n){}const At=we.a.reduce((n,s)=>(n[s.value]=s.label,n),{});function Fe(n){let{filters:s,setFilters:o}=n;const{reportAxisUnitsChanged:i}=Object(l.useActions)(Ve.e),[r,c]=Object(Y.useState)(!1),[d,m]=Object(Y.useState)(s.aggregation_axis_format||void 0),[u,j]=Object(Y.useState)(null),x=Object(Y.useRef)(null);Object(_t.a)({escape:{action:function(){j(null),c(!1)}}},[]);const f=F=>{let{format:y,prefix:T,postfix:p}=F;m(y),o(ne(te({},s),{aggregation_axis_format:y,aggregation_axis_prefix:T,aggregation_axis_postfix:p})),i({format:y,prefix:T,postfix:p,display:s.display,unitIsSet:!!T||!!p||y&&y!=="numeric"}),c(!1),j(null)},v=Object(Y.useMemo)(()=>{var F,y;let T="None";return d&&(T=At[d]),(F=s.aggregation_axis_prefix)!==null&&F!==void 0&&F.length&&(T=`Prefix: ${s.aggregation_axis_prefix}`),(y=s.aggregation_axis_postfix)!==null&&y!==void 0&&y.length&&(T=`Postfix: ${s.aggregation_axis_postfix}`),T},[d,s]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("span",{children:Object(we.b)(s.display)}),Object(e.jsx)(Se,{formativeElement:u,isOpen:u!==null,onSave:f,filters:s,onClose:()=>j(null),overlayRef:F=>x.current=F}),Object(e.jsx)(J.b,{onClick:()=>c(!r),size:"small",type:"secondary",status:"stealth","data-attr":"chart-aggregation-axis-format",popup:{onClickOutside:()=>c(!1),additionalRefs:[x],visible:r,overlay:Object(e.jsxs)(e.Fragment,{children:[we.a.map((F,y)=>{let{value:T,label:p}=F;return Object(e.jsx)(J.a,{onClick:()=>f({format:T}),status:"stealth",active:T===d,fullWidth:!0,children:p},y)}),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Pt.a,{}),Object(e.jsxs)(J.a,{onClick:()=>j("prefix"),status:"stealth",active:!!s.aggregation_axis_prefix,fullWidth:!0,children:["Custom prefix",s.aggregation_axis_prefix?`: ${s.aggregation_axis_prefix}...`:"..."]}),Object(e.jsxs)(J.a,{onClick:()=>j("postfix"),status:"stealth",active:!!s.aggregation_axis_postfix,fullWidth:!0,children:["Custom postfix",s.aggregation_axis_postfix?`: ${s.aggregation_axis_postfix}...`:"..."]})]})]}),placement:"bottom-start",actionable:!0,closeOnClickInside:!1},children:v})]})}try{Fe.displayName="UnitPicker",Fe.__docgenInfo={description:"",displayName:"UnitPicker",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"TrendsFilterType"}},setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(filters: Partial<TrendsFilterType>, insightMode?: ItemMode | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/UnitPicker/UnitPicker.tsx#UnitPicker"]={docgenInfo:Fe.__docgenInfo,name:"UnitPicker",path:"frontend/src/lib/components/UnitPicker/UnitPicker.tsx#UnitPicker"})}catch(n){}const wt=function(n){return Object(h.e)(n)?n.funnel_viz_type===a.B.Trends:Object(h.h)(n)||Object(h.g)(n)?!1:Object(h.f)(n)?!0:(Object(h.j)(n)||Object(h.i)(n))&&(!n.display||!ae.o.includes(n.display))},Vt={[`${a.F.TRENDS}`]:!0,[`${a.F.STICKINESS}`]:!0,[`${a.F.LIFECYCLE}`]:!0,[`${a.F.FUNNELS}`]:!0,[`${a.F.RETENTION}`]:!1,[`${a.F.PATHS}`]:!0},Mt=function(n){return Object(h.j)(n)?!Object(h.b)(n):!!Object(h.i)(n)},Dt=n=>{var s,o;return!n.actions&&!n.events||((s=n.actions)===null||s===void 0?void 0:s.length)===0&&((o=n.events)===null||o===void 0?void 0:o.length)===0};function q(n){return Object(e.jsx)("span",{className:"space-x-2 flex items-center text-sm",children:n.children})}function Ie(n){let{filters:s,disableTable:o}=n;const i=Object(h.e)(s),r=Object(h.g)(s),{featureFlags:c}=Object(l.useValues)(be.a),{setFilters:d}=Object(l.useActions)(b.c);return Object(e.jsxs)("div",{className:"flex justify-between items-center flex-wrap","data-attr":"insight-filters",children:[Object(e.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap my-2",children:[s.insight&&Vt[s.insight]&&!o&&Object(e.jsxs)(q,{children:[Object(e.jsx)("span",{children:"Date range"}),Object(e.jsx)(he,{disabled:i&&Dt(s),makeLabel:m=>Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(xt.a,{})," ",m,m=="All time"&&Object(e.jsx)(Je.a,{title:"Only events dated after 2015 will be shown",children:Object(e.jsx)(ee.a,{className:"info-indicator"})})]})})]}),wt(s)&&Object(e.jsxs)(q,{children:[Object(e.jsxs)("span",{children:[Object(e.jsx)("span",{className:"hide-lte-md",children:"grouped "}),"by"]}),Object(e.jsx)(se,{view:s.insight||a.F.TRENDS})]}),Object(h.j)(s)&&!s.breakdown_type&&!s.compare&&(!s.display||s.display===a.k.ActionsLineGraph)&&c[ae.i.SMOOTHING_INTERVAL]?Object(e.jsx)(q,{children:Object(e.jsx)(Ot,{})}):null,Object(h.h)(s)&&Object(e.jsxs)(q,{children:[Object(e.jsx)(Oe,{}),Object(e.jsx)(ye,{})]}),r&&Object(e.jsx)(q,{children:Object(e.jsx)(ve,{})}),Mt(s)&&Object(e.jsx)(q,{children:Object(e.jsx)(oe,{})})]}),Object(e.jsxs)("div",{className:"flex items-center space-x-4 flex-wrap my-2",children:[Object(h.c)(s)&&Object(e.jsxs)(e.Fragment,{children:[Object(h.j)(s)&&Object(e.jsx)(q,{children:Object(e.jsx)(Fe,{filters:s,setFilters:d})}),Object(e.jsxs)(q,{children:[Object(e.jsx)("span",{children:"Chart type"}),Object(e.jsx)($,{filters:s})]})]}),i&&s.funnel_viz_type===a.B.Steps&&Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(q,{children:Object(e.jsx)(xe,{})})}),i&&s.funnel_viz_type===a.B.TimeToConvert&&Object(e.jsx)(q,{children:Object(e.jsx)(Ce,{})})]})]})}try{Ie.displayName="InsightDisplayConfig",Ie.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'},{value:'"subscriptions"'},{value:'"sharing"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:Ie.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(n){}var Me=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/button/index.js"),Bt=t("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Te=t.n(Bt),zt=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),qe=t.n(zt),De={};De.insert="head",De.singleton=!1;var Mn=Te()(qe.a,De),Dn=qe.a.locals||{},et=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function tt(){var n;const{insightProps:s}=Object(l.useValues)(b.c),{filters:o,numberOfSeries:i,areFiltersValid:r,filterSteps:c}=Object(l.useValues)(Object(U.a)(s)),{changeStepRange:d}=Object(l.useActions)(Object(U.a)(s));if(o.funnel_viz_type===a.B.Steps)return null;const m=(f,v)=>{d(f,v)},u=r?Array.from(Array(Math.max(i)).keys()).slice(0,-1):[0],j=r?Array.from(Array(Math.max(i)).keys()).slice(((n=o.funnel_from_step)!==null&&n!==void 0?n:0)+1):[1],x=f=>f.map(v=>{const F=c.find(y=>y.order===v);return F?Object(e.jsx)(G.a.Option,{value:v,label:`Step ${v+1}`,children:Object(e.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(e.jsxs)("span",{style:{marginRight:4},children:["Step ",v+1,":"]}),Object(e.jsx)(et.a,{filter:F})]})},v):null});return Object(e.jsxs)(z.a,{className:"funnel-options-inputs",children:[Object(e.jsx)("span",{className:"text-muted-alt",children:"from"}),Object(e.jsx)(G.a,{disabled:!r,dropdownMatchSelectWidth:!1,dropdownAlign:C.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:o.funnel_from_step||0,onChange:f=>m(f,o.funnel_to_step),style:{marginLeft:4,marginRight:4},children:x(u)}),Object(e.jsx)("span",{className:"text-muted-alt",children:"to"}),Object(e.jsx)(G.a,{disabled:!r,dropdownMatchSelectWidth:!1,dropdownAlign:C.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:o.funnel_to_step||Math.max(i-1,1),onChange:f=>m(o.funnel_from_step,f),style:{marginLeft:4,marginRight:4},children:x(j)})]})}function $t(){const{insightProps:n,activeView:s}=Object(l.useValues)(b.c),{conversionMetrics:o,filters:i,aggregationTargetLabel:r}=Object(l.useValues)(Object(U.a)(n)),{setChartFilter:c}=Object(l.useActions)(Object(_.a)(n));if(s!==a.F.FUNNELS)return null;const d=[...i.funnel_viz_type===a.B.Steps?[Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("span",{className:"text-muted-alt mr-1",children:[Object(e.jsx)(K.a,{title:`Overall conversion rate for all ${r.plural} on the entire funnel.`,children:Object(e.jsx)(ee.a,{className:"info-indicator left"})}),"Total conversion rate:"]}),Object(e.jsx)("span",{className:"l4",children:Object(C.sb)(o.totalRate,2,!0)})]})]:[],...i.funnel_viz_type!==a.B.Trends?[Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("span",{className:"text-muted-alt",children:[Object(e.jsx)(K.a,{title:`Average (arithmetic mean) of the total time each ${r.singular} spent in the entire funnel.`,children:Object(e.jsx)(ee.a,{className:"info-indicator left"})}),"Average time to convert"," "]}),i.funnel_viz_type===a.B.TimeToConvert&&Object(e.jsx)(tt,{}),Object(e.jsx)("span",{className:"text-muted-alt mr-1",children:":"}),Object(e.jsx)(Me.a,{type:"link",onClick:()=>c(a.B.TimeToConvert),disabled:i.funnel_viz_type===a.B.TimeToConvert,children:Object(e.jsx)("span",{className:"l4",children:Object(C.P)(o.averageTime)})})]})]:[],...i.funnel_viz_type===a.B.Trends?[Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("span",{className:"text-muted-alt",children:"Conversion rate "}),Object(e.jsx)(tt,{})]})]:[]];return Object(e.jsx)(z.a,{className:"funnel-canvas-label",align:"middle",children:d.map((m,u)=>Object(e.jsxs)(Xe.a.Fragment,{children:[u>0&&Object(e.jsx)("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),m]},u))})}var Kt=t("./frontend/src/lib/hooks/usePeriodicRerender.ts");const nt=3;function Ut(){const{lastRefresh:n}=Object(l.useValues)(b.c),{loadResults:s}=Object(l.useActions)(b.c);return Object(Kt.a)(15e3),Object(e.jsxs)("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"},children:["Computed ",n?Object(H.a)(n).fromNow():"a while ago",Object(e.jsx)("span",{style:{padding:"0 4px"},children:"\u2022"}),Object(e.jsx)(Je.a,{title:Object(e.jsxs)(e.Fragment,{children:["Insights can be refreshed",Object(e.jsx)("br",{}),"every ",nt," minutes."]}),children:Object(e.jsx)(Me.a,{size:"small",type:"link",onClick:()=>s(!0),disabled:!!n&&Object(H.a)().subtract(nt-.5,"minutes").isBefore(n),style:{padding:0},children:Object(e.jsx)("span",{style:{fontSize:14},children:"Refresh"})})})]})}var Be=t("./frontend/src/scenes/trends/viz/index.ts"),st=t("./frontend/src/scenes/insights/views/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"})}catch(n){}var Wt=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),Yt=t("./frontend/src/scenes/insights/views/WorldMap/index.ts"),Ht=t("./frontend/src/scenes/insights/views/BoldNumber/index.ts");function ce(n){let{view:s}=n;const{insightMode:o}=Object(l.useValues)(Wt.a),{insightProps:i}=Object(l.useValues)(b.c),{filters:r,loadMoreBreakdownUrl:c,breakdownValuesLoading:d}=Object(l.useValues)(Object(re.a)(i)),{loadMoreBreakdownValues:m}=Object(l.useActions)(Object(re.a)(i)),u=Object(h.j)(r)||Object(h.i)(r)?r.display:null,j=()=>{if(!u||u===a.k.ActionsLineGraph||u===a.k.ActionsLineGraphCumulative||u===a.k.ActionsAreaGraph||u===a.k.ActionsBar)return Object(e.jsx)(Be.b,{});if(u===a.k.BoldNumber)return Object(e.jsx)(Ht.a,{});if(u===a.k.ActionsTable)return Object(e.jsx)(l.BindLogic,{logic:re.a,props:{dashboardItemId:null,view:s,filters:null},children:Object(e.jsx)(st.b,{embedded:!0,filterKey:`trends_${s}`,canEditSeriesNameInline:o===a.G.Edit,isMainInsightView:!0})});if(u===a.k.ActionsPie)return Object(e.jsx)(Be.c,{});if(u===a.k.ActionsBarValue)return Object(e.jsx)(Be.a,{});if(u===a.k.WorldMap)return Object(e.jsx)(Yt.a,{})};return Object(e.jsxs)(e.Fragment,{children:[(r.actions||r.events)&&Object(e.jsx)("div",{className:u!==a.k.ActionsTable&&u!==a.k.WorldMap&&u!==a.k.BoldNumber?"trends-insights-container":void 0,children:j()}),r.breakdown&&c&&Object(e.jsxs)("div",{className:"my-4 flex flex-col items-center",children:[Object(e.jsxs)("div",{className:"text-muted mb-2",children:["For readability, ",Object(e.jsx)("b",{children:"not all breakdown values are displayed"}),". Click below to load them."]}),Object(e.jsx)(V.LemonButton,{onClick:m,loading:d,size:"small",type:"secondary",children:"Load more breakdown values"})]})]})}try{ce.displayName="TrendInsight",ce.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:ce.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(n){}var Gt=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),Jt=t("./frontend/src/scenes/paths/Paths.tsx"),pe=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function Qt(){const{activeView:n}=Object(l.useValues)(b.c);return n!==a.F.PATHS?null:Object(e.jsx)(z.a,{className:"funnel-canvas-label",align:"middle",children:Object(e.jsx)(Xe.a.Fragment,{children:Object(e.jsx)("span",{className:"text-muted-alt",children:"Large path items are shown by default. View smaller items by hovering over a node"})})})}var at=t("./frontend/src/lib/components/InsightLegend/InsightLegend.tsx"),Xt=t("./frontend/src/lib/components/LemonTable/index.ts"),Ee=t("./frontend/src/scenes/funnels/funnelUtils.ts"),ze=t("./frontend/src/scenes/insights/views/Funnels/funnelStepTableUtils.tsx"),Zt=t("./frontend/src/models/cohortsModel.ts"),it=t("./frontend/src/lib/components/LemonCheckbox/index.ts"),lt=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),$e=t("./frontend/src/lib/components/LemonRow/index.ts"),de=t("./frontend/src/scenes/funnels/ValueInspectorButton.tsx"),qt=t("./frontend/src/lib/colors.ts"),en=t("./frontend/src/models/propertyDefinitionsModel.ts"),tn=t("./frontend/src/scenes/insights/utils.tsx");function nn(){const{insightProps:n}=Object(l.useValues)(b.c),s=Object(U.a)(n),{insightLoading:o,filters:i,steps:r,flattenedBreakdowns:c,hiddenLegendKeys:d,visibleStepsWithConversionMetrics:m,isOnlySeries:u}=Object(l.useValues)(s),{setHiddenById:j,toggleVisibilityByBreakdown:x,openPersonsModalForSeries:f}=Object(l.useActions)(s),{cohorts:v}=Object(l.useValues)(Zt.a),{formatPropertyValueForDisplay:F}=Object(l.useValues)(en.a),y=c==null?void 0:c.every(p=>!d[Object(Ee.l)(p.breakdown_value)]),T=[{children:[{title:u?"Breakdown":Object(e.jsx)(it.a,{checked:y||(c!=null&&c.some(p=>!d[Object(Ee.l)(p.breakdown_value)])?"indeterminate":!1),onChange:()=>{j(Object.fromEntries(m.flatMap(()=>c.map(p=>[Object(Ee.l)(p.breakdown_value),y]))))},label:Object(e.jsx)("span",{className:"font-bold",children:"Breakdown"}),size:"small"}),dataIndex:"breakdown_value",render:function(R,L){var A;const k=((A=L.breakdown_value)===null||A===void 0?void 0:A.length)==1?L.breakdown_value[0]:L.breakdown_value,E=Object(tn.d)(v,F,k,L.breakdown,i.breakdown_type);return u?Object(e.jsx)("span",{className:"font-medium",children:E}):Object(e.jsx)(it.a,{checked:!d[Object(Ee.l)(L.breakdown_value)],onChange:()=>x(L.breakdown_value),label:E})}},{title:Object(e.jsxs)(e.Fragment,{children:["Total",Object(e.jsx)("br",{}),"conversion"]}),render:(p,R)=>{var L,A;return Object(C.sb)((L=R==null||(A=R.conversionRates)===null||A===void 0?void 0:A.total)!==null&&L!==void 0?L:0,2,!0)},align:"right"}]},...r.map((p,R)=>({title:Object(e.jsx)($e.a,{icon:Object(e.jsx)(lt.a,{name:R+1,color:lt.b.Gray}),style:{font:"inherit",padding:0},size:"small",children:Object(e.jsx)(et.a,{filter:Object(ze.a)(p)})}),children:[{title:R===0?"Entered":"Converted",render:function(A,k){var E,D;const g=(E=k.steps)===null||E===void 0?void 0:E[R];return g&&Object(e.jsx)(de.a,{onClick:()=>f({step:p,series:g,converted:!0}),style:{padding:0},children:Object(C.Q)((D=g.count)!==null&&D!==void 0?D:0)})},align:"right"},...R===0?[]:[{title:"Dropped\xA0off",render:function(A,k){var E,D;const g=(E=k.steps)===null||E===void 0?void 0:E[R];return g&&Object(e.jsx)(de.a,{onClick:()=>f({step:p,series:g,converted:!1}),style:{padding:0},children:Object(C.Q)((D=g.droppedOffFromPrevious)!==null&&D!==void 0?D:0)})},align:"right"}],{title:Object(e.jsxs)(e.Fragment,{children:["Conversion",Object(e.jsx)("br",{}),"so\xA0far"]}),render:function(A,k){var E,D,g,w,X,S;const I=Object(ze.b)(k,p.order);return I!=null&&I.total?Object(e.jsx)($e.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:Object(e.jsx)(P.IconFlag,{}),size:"small",children:Object(C.sb)((E=(D=k.steps)===null||D===void 0||(g=D[p.order])===null||g===void 0?void 0:g.conversionRates.total)!==null&&E!==void 0?E:0,2,!0)}):Object(C.sb)((w=(X=k.steps)===null||X===void 0||(S=X[p.order])===null||S===void 0?void 0:S.conversionRates.total)!==null&&w!==void 0?w:0,2,!0)},align:"right"},...R===0?[]:[{title:Object(e.jsxs)(e.Fragment,{children:["Conversion",Object(e.jsx)("br",{}),"from\xA0previous"]}),render:function(A,k){var E,D,g,w,X,S;const I=Object(ze.b)(k,p.order);return!(I!=null&&I.total)&&I!==null&&I!==void 0&&I.fromPrevious?Object(e.jsx)($e.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:Object(e.jsx)(P.IconFlag,{}),size:"small",children:Object(C.sb)((E=(D=k.steps)===null||D===void 0||(g=D[p.order])===null||g===void 0?void 0:g.conversionRates.fromPrevious)!==null&&E!==void 0?E:0,2,!0)}):Object(C.sb)((w=(X=k.steps)===null||X===void 0||(S=X[p.order])===null||S===void 0?void 0:S.conversionRates.fromPrevious)!==null&&w!==void 0?w:0,2,!0)},align:"right"},{title:Object(e.jsxs)(e.Fragment,{children:["Median",Object(e.jsx)("br",{}),"time"]}),render:(L,A)=>{var k,E;return((k=A.steps)===null||k===void 0||(E=k[p.order])===null||E===void 0?void 0:E.median_conversion_time)!=null?Object(C.P)(A.steps[p.order].median_conversion_time,3):"\u2013"},align:"right",width:0,className:"whitespace-nowrap"},{title:Object(e.jsxs)(e.Fragment,{children:["Average",Object(e.jsx)("br",{}),"time"]}),render:(L,A)=>{var k,E;return((k=A.steps)===null||k===void 0||(E=k[p.order])===null||E===void 0?void 0:E.average_conversion_time)!=null?Object(C.P)(A.steps[p.order].average_conversion_time,3):"\u2013"},align:"right",width:0,className:"whitespace-nowrap"}]]}))];return Object(e.jsx)(Xt.a,{dataSource:c,columns:T,loading:o,rowKey:"breakdownIndex",rowStatus:p=>p.significant?"highlighted":null,rowRibbonColor:p=>{var R;return Object(qt.d)((R=p==null?void 0:p.breakdownIndex)!==null&&R!==void 0?R:0)}})}var sn=t("./frontend/src/lib/components/Animation/Animation.tsx"),an=t("./frontend/src/lib/animations/animations.ts"),ln=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),on=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss"),ot=t.n(on),Ke={};Ke.insert="head",Ke.singleton=!1;var Bn=Te()(ot.a,Ke),zn=ot.a.locals||{},rn=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),cn=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),dn=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),un=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/spin/index.js"),Ue=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/table/index.js"),pn=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/table/Column.js"),Q=t.n(pn),rt=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),ct=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FallOutlined.js"),dt=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),jn=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js"),ke=t.n(jn),ue=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),bn=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss"),ut=t.n(bn),We={};We.insert="head",We.singleton=!1;var $n=Te()(ut.a,We),Kn=ut.a.locals||{},mn=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function je(n){let{id:s,offset:o,children:i}=n;const{scrolling:r}=Object(l.useActions)(Object(mn.a)({id:s,offset:o})),c=Object(Y.useRef)(null);return Object(Y.useEffect)(()=>{const d=c.current;return document.addEventListener("scroll",()=>d&&r(d)),()=>document.removeEventListener("scroll",()=>d&&r(d))},[c.current]),Object(e.jsx)("div",{ref:c,children:i})}try{je.displayName="VisibilitySensor",je.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:je.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(n){}var pt=t("./frontend/src/lib/components/Popup/Popup.tsx"),fn=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/modal/index.js"),hn=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),gn=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),On=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),xn=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss"),jt=t.n(xn),Ye={};Ye.insert="head",Ye.singleton=!1;var Un=Te()(jt.a,Ye),Wn=jt.a.locals||{},vn=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),bt=t("./frontend/src/lib/components/Link.tsx"),yn=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function Cn(){const{insightProps:n}=Object(l.useValues)(b.c),s=Object(U.a)(n),{correlationsLoading:o,funnelCorrelationDetails:i,parseDisplayNameForCorrelation:r,correlationMatrixAndScore:c}=Object(l.useValues)(s),{setFunnelCorrelationDetails:d,openCorrelationPersonsModal:m}=Object(l.useActions)(s),u=(i==null?void 0:i.result_type)===a.x.Events?"event":"property",j=(i==null?void 0:i.result_type)===a.x.Events?"performed event":"have property";let x=Object(e.jsx)(e.Fragment,{});if(i){const{first_value:A,second_value:k}=r(i);x=Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ue.a,{value:A}),k!==void 0&&Object(e.jsxs)(e.Fragment,{children:[" :: ",Object(e.jsx)(ue.a,{value:k,disablePopover:!0})]})]})}const{correlationScore:f,truePositive:v,falsePositive:F,trueNegative:y,falseNegative:T,correlationScoreStrength:p}=c,R=p==="strong"?Object(e.jsx)(hn.a,{style:{color:"var(--success)"}}):p==="moderate"?Object(e.jsx)(gn.a,{style:{color:"var(--warning)"}}):Object(e.jsx)(On.a,{style:{color:"var(--danger)"}}),L=()=>d(null);return Object(e.jsx)(fn.a,{className:"correlation-matrix",visible:!!i,onCancel:L,destroyOnClose:!0,footer:Object(e.jsx)(Me.a,{onClick:L,children:"Dismiss"}),width:600,title:"Correlation details",children:Object(e.jsx)("div",{className:"correlation-table-wrapper",children:o?Object(e.jsx)("div",{className:"mt-4 text-center",children:Object(e.jsx)(vn.a,{className:"text-4xl"})}):i?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("p",{className:"text-muted-alt mb-4",children:["The table below displays the correlation details for users who ",j," ",Object(e.jsx)("b",{children:x}),"."]}),Object(e.jsxs)("table",{children:[Object(e.jsxs)("thead",{children:[Object(e.jsx)("tr",{className:"table-title",children:Object(e.jsx)("td",{colSpan:3,children:"Results matrix"})}),Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{children:(i==null?void 0:i.result_type)===a.x.Events?"Performed event":"Has property"}),Object(e.jsx)("td",{children:"Success"}),Object(e.jsx)("td",{children:"Dropped off"})]})]}),Object(e.jsxs)("tbody",{children:[Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{className:"horizontal-header",children:"Yes"}),Object(e.jsxs)("td",{children:[Object(e.jsx)(K.a,{title:`True positive (TP) - Percentage of users who ${j} and completed the funnel.`,children:Object(e.jsx)("div",{className:"percentage",children:v?Object(C.sb)(v/(v+F)):"0.00%"})}),v===0?"0 users":Object(e.jsx)(bt.a,{onClick:()=>{m(i,!0)},children:Object(C.tb)(v,"user",void 0,!0)})]}),Object(e.jsxs)("td",{children:[Object(e.jsx)("div",{className:"percentage",children:Object(e.jsx)(K.a,{title:`False negative (FN) - Percentage of users who ${j} and did not complete the funnel.`,children:T?Object(C.sb)(T/(T+y)):"0.00%"})}),T===0?"0 users":Object(e.jsx)(bt.a,{onClick:()=>{m(i,!1)},children:Object(C.tb)(T,"user",void 0,!0)})]})]}),Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{className:"horizontal-header",children:"No"}),Object(e.jsxs)("td",{children:[Object(e.jsx)("div",{className:"percentage",children:Object(e.jsx)(K.a,{title:`False positive (FP) - Percentage of users who did not ${j} and completed the funnel.`,children:F?Object(C.sb)(F/(v+F)):"0.00%"})}),Object(C.tb)(F,"user",void 0,!0)]}),Object(e.jsxs)("td",{children:[Object(e.jsx)("div",{className:"percentage",children:Object(e.jsx)(K.a,{title:`True negative (TN) - Percentage of users who did not ${j} and did not complete the funnel.`,children:y?Object(C.sb)(y/(T+y)):"0.00%"})}),Object(C.tb)(y,"user",void 0,!0)]})]}),Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{className:"horizontal-header"}),Object(e.jsx)("td",{children:Object(e.jsx)("b",{children:"100%"})}),Object(e.jsx)("td",{children:Object(e.jsx)("b",{children:"100%"})})]})]})]}),Object(e.jsxs)("div",{className:"mt-4 text-center",children:[Object(C.i)((i==null?void 0:i.result_type)||"")," ",Object(e.jsx)("b",{children:x})," ","has a"," ",(i==null?void 0:i.correlation_type)===a.y.Success?Object(e.jsxs)("b",{className:"text-success",children:["positive"," ",Object(e.jsx)(K.a,{title:`Positive correlation means this ${u} is correlated with a successful conversion.`,children:Object(e.jsx)(ee.a,{className:"cursor-pointer"})})]}):Object(e.jsxs)("b",{className:"text-danger",children:["negative"," ",Object(e.jsx)(K.a,{title:`Negative correlation means this ${u} is correlated with an unsuccessful conversion (user dropped off).`,children:Object(e.jsx)(ee.a,{className:"cursor-pointer"})})]})," ","correlation score of"," ",Object(e.jsx)("b",{style:{color:p==="strong"?"var(--success)":p==="moderate"?"var(--warning)":"var(--danger)"},children:Object(e.jsx)(K.a,{title:`This ${u} has ${p} correlation.`,children:Object(e.jsxs)("span",{style:{cursor:"pointer"},children:[R," ",f.toFixed(3)]})})})]})]}):Object(e.jsx)("div",{children:Object(e.jsx)(yn.a,{type:"danger",children:"We could not load the details for this correlation value. Please recreate your funnel and try again."})})})})}function Sn(){const{insightProps:n}=Object(l.useValues)(b.c),s=Object(U.a)(n),{steps:o,correlationValues:i,correlationTypes:r,eventHasPropertyCorrelations:c,eventWithPropertyCorrelationsValues:d,parseDisplayNameForCorrelation:m,correlationsLoading:u,eventWithPropertyCorrelationsLoading:j,nestedTableExpandedKeys:x,correlationPropKey:f,filters:v,aggregationTargetLabel:F}=Object(l.useValues)(s),{setCorrelationTypes:y,loadEventWithPropertyCorrelations:T,addNestedTableExpandedKey:p,removeNestedTableExpandedKey:R,openCorrelationPersonsModal:L,loadCorrelations:A}=Object(l.useActions)(s),{reportCorrelationInteraction:k}=Object(l.useActions)(Ve.e);Object(Y.useEffect)(()=>{A({})},[v]);const E=S=>{r?r.includes(S)?y(r.filter(I=>I!==S)):y([...r,S]):y([S])},D=S=>{const I=le=>le<10&&!Number.isInteger(le)?le.toFixed(1):le.toFixed(),B=S.correlation_type===a.y.Success,{first_value:ie,second_value:_e}=m(S);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("h4",{children:[B?Object(e.jsx)(rt.a,{style:{color:"green"}}):Object(e.jsx)(ct.a,{style:{color:"red"}})," ",Object(e.jsx)(ue.a,{value:ie}),_e!==void 0&&Object(e.jsxs)(e.Fragment,{children:[" :: ",Object(e.jsx)(ue.a,{value:_e,disablePopover:!0})]})]}),Object(e.jsxs)("div",{children:[Object(C.i)(F.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," converted were"," ",Object(e.jsx)("mark",{children:Object(e.jsxs)("b",{children:[I(S.odds_ratio),"x ",B?"more":"less"," likely"]})})," ","to"," ",S.result_type===a.x.EventWithProperties?"have this event property":"do this event"]}),Object(e.jsx)(Cn,{})]})},g=S=>Object(e.jsx)(de.a,{onClick:()=>{L(S,!0)},children:S.success_count}),w=S=>Object(e.jsx)(de.a,{onClick:()=>{L(S,!1)},children:S.failure_count}),X=S=>j?Object(e.jsxs)("div",{className:"nested-properties-loading",children:[Object(e.jsx)(un.a,{}),Object(e.jsx)("h3",{children:"Loading correlation results"}),Object(e.jsx)("p",{children:"This process can take up to 20 seconds. "})]}):Object(e.jsxs)("div",{children:[Object(e.jsx)("h4",{style:{paddingLeft:16},children:"Correlated properties"}),Object(e.jsxs)(Ue.a,{dataSource:d[S],rowKey:I=>I.event.event,className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:(I,B)=>k(a.x.EventWithProperties,"pagination change",{page:I,page_size:B})},children:[Object(e.jsx)(Q.a,{title:"Property",render:(I,B)=>D(B),align:"left"},"eventName"),Object(e.jsx)(Q.a,{title:"Completed",render:(I,B)=>g(B),width:90,align:"center"},"success_count"),Object(e.jsx)(Q.a,{title:"Dropped off",render:(I,B)=>w(B),width:120,align:"center"},"failure_count"),Object(e.jsx)(Q.a,{title:"",render:(I,B)=>Object(e.jsx)(mt,{record:B}),align:"center",width:30},"actions")]})]});return o.length>1?Object(e.jsx)(je,{id:f,offset:152,children:Object(e.jsxs)("div",{className:"funnel-correlation-table",children:[Object(e.jsxs)("span",{className:"funnel-correlation-header",children:[Object(e.jsxs)("span",{className:"table-header",children:[Object(e.jsx)(P.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"]}),Object(e.jsxs)("span",{className:"table-options",children:[Object(e.jsx)("p",{className:"title",children:"CORRELATION"}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:()=>E(a.y.Success),children:Object(e.jsx)(ke.a,{checked:r.includes(a.y.Success),style:{pointerEvents:"none"},children:"Success"})}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>E(a.y.Failure),children:Object(e.jsx)(ke.a,{checked:r.includes(a.y.Failure),style:{pointerEvents:"none"},children:"Dropoff"})})]})]}),Object(e.jsxs)(Ue.a,{dataSource:i,loading:u,size:"small",scroll:{x:"max-content"},rowKey:S=>S.event.event,pagination:{pageSize:5,hideOnSinglePage:!0,onChange:()=>k(a.x.Events,"load more")},expandable:{expandedRowRender:S=>X(S.event.event),expandedRowKeys:x,rowExpandable:()=>v.aggregation_group_type_index===void 0,expandIcon:S=>{let{expanded:I,onExpand:B,record:ie,expandable:_e}=S;return _e?I?Object(e.jsx)(K.a,{title:"Collapse",children:Object(e.jsx)("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:le=>{R(ie.event.event),B(ie,le)},children:Object(e.jsx)(P.IconUnfoldLess,{})})}):Object(e.jsx)(K.a,{title:"Expand to see correlated properties for this event",children:Object(e.jsx)("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:le=>{!c(ie.event.event)&&T(ie.event.event),p(ie.event.event),B(ie,le)},children:Object(e.jsx)(P.IconUnfoldMore,{})})}):null}},children:[Object(e.jsx)(Q.a,{title:"Event",render:(S,I)=>D(I),align:"left",ellipsis:!0},"eventName"),Object(e.jsx)(Q.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Completed",Object(e.jsx)(K.a,{title:`${Object(C.i)(F.plural)} ${v.aggregation_group_type_index!=null?"that":"who"} performed the event and completed the entire funnel.`,children:Object(e.jsx)(ee.a,{className:"column-info"})})]}),render:(S,I)=>g(I),width:90,align:"center"},"success_count"),Object(e.jsx)(Q.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Dropped off",Object(e.jsx)(K.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object(C.i)(F.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",Object(e.jsx)("b",{children:"not complete"})," the entire funnel."]}),children:Object(e.jsx)(ee.a,{className:"column-info"})})]}),render:(S,I)=>w(I),width:120,align:"center"},"failure_count"),Object(e.jsx)(Q.a,{title:"",render:(S,I)=>Object(e.jsx)(mt,{record:I}),width:30},"actions")]})]})}):null}const mt=n=>{let{record:s}=n;const{insightProps:o}=Object(l.useValues)(b.c),i=Object(U.a)(o),{excludeEventPropertyFromProject:r,excludeEventFromProject:c,setFunnelCorrelationDetails:d}=Object(l.useActions)(i),{isEventPropertyExcluded:m,isEventExcluded:u}=Object(l.useValues)(i),j=s.event.event.split("::"),[x,f]=Object(Y.useState)(!1);return Object(e.jsx)(z.a,{style:{justifyContent:"flex-end"},children:Object(e.jsx)(pt.a,{visible:x,actionable:!0,onClickOutside:()=>f(!1),overlay:Object(e.jsxs)(e.Fragment,{children:[s.result_type===a.x.Events&&Object(e.jsx)(J.a,{onClick:()=>d(s),fullWidth:!0,status:"stealth",children:"View correlation details"}),Object(e.jsx)(J.a,{disabled:s.result_type===a.x.EventWithProperties?m(j[1]):u(j[0]),onClick:()=>s.result_type===a.x.EventWithProperties?r(j[0],j[1]):c(j[0]),fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",status:"stealth",children:"Exclude event from project"})]}),children:Object(e.jsx)(J.a,{status:"stealth",onClick:()=>f(!x),children:Object(e.jsx)(dt.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"})})})})};var Fn=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function In(){const{insightProps:n}=Object(l.useValues)(b.c),s=Object(U.a)(n),{steps:o,propertyCorrelationValues:i,propertyCorrelationTypes:r,excludedPropertyNames:c,parseDisplayNameForCorrelation:d,propertyCorrelationsLoading:m,inversePropertyNames:u,propertyNames:j,correlationPropKey:x,allProperties:f,filters:v,aggregationTargetLabel:F}=Object(l.useValues)(s),{setPropertyCorrelationTypes:y,setPropertyNames:T,openCorrelationPersonsModal:p,loadPropertyCorrelations:R}=Object(l.useActions)(s),{reportCorrelationInteraction:L}=Object(l.useActions)(Ve.e);Object(Y.useEffect)(()=>{j.length===0&&T(f),R({})},[v]);const A=g=>{r?r.includes(g)?y(r.filter(w=>w!==g)):y([...r,g]):y([g])},k=g=>Object(e.jsx)(de.a,{onClick:()=>{p(g,!0)},children:g.success_count}),E=g=>Object(e.jsx)(de.a,{onClick:()=>{p(g,!1)},children:g.failure_count}),D=g=>{const w=B=>B<10&&!Number.isInteger(B)?B.toFixed(1):B.toFixed(),X=g.correlation_type===a.y.Success,{first_value:S,second_value:I}=d(g);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("h4",{children:[X?Object(e.jsx)(rt.a,{style:{color:"green"}}):Object(e.jsx)(ct.a,{style:{color:"red"}})," ",Object(e.jsx)(ue.a,{value:S}),I!==void 0&&Object(e.jsxs)(e.Fragment,{children:[" :: ",Object(e.jsx)(ue.a,{value:I,disablePopover:!0})]})]}),Object(e.jsxs)("div",{children:[Object(C.i)(F.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," converted were"," ",Object(e.jsx)("mark",{children:Object(e.jsxs)("b",{children:[w(g.odds_ratio),"x ",X?"more":"less"," likely"]})})," ","to have this property value"]})]})};return o.length>1?Object(e.jsx)(je,{offset:150,id:`${x}-properties`,children:Object(e.jsxs)("div",{className:"funnel-correlation-table",children:[Object(e.jsxs)(z.a,{className:"funnel-correlation-header",children:[Object(e.jsxs)(W.a,{className:"table-header",children:[Object(e.jsx)(P.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"]}),Object(e.jsxs)(W.a,{className:"table-options",children:[Object(e.jsx)(z.a,{style:{display:"contents"},children:f.length>0&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("p",{className:"title",children:"PROPERTIES "}),Object(e.jsx)(Fn.a,{value:new Set(j),onChange:g=>T(g),allProperties:u(c||[])})]})}),Object(e.jsxs)(z.a,{style:{display:"contents"},children:[Object(e.jsx)("p",{className:"title",style:{marginLeft:8},children:"CORRELATION"}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:()=>A(a.y.Success),children:Object(e.jsx)(ke.a,{checked:r.includes(a.y.Success),style:{pointerEvents:"none"},children:"Success"})}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>A(a.y.Failure),children:Object(e.jsx)(ke.a,{checked:r.includes(a.y.Failure),style:{pointerEvents:"none"},children:"Dropoff"})})]})]})]}),Object(e.jsxs)(Ue.a,{dataSource:i,loading:m,scroll:{x:"max-content"},size:"small",rowKey:g=>g.event.event,pagination:{pageSize:5,hideOnSinglePage:!0,onChange:(g,w)=>L(a.x.Properties,"pagination change",{page:g,page_size:w})},children:[Object(e.jsx)(Q.a,{title:`${Object(C.i)(F.singular)} property`,render:(g,w)=>D(w),align:"left"},"propertName"),Object(e.jsx)(Q.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Completed",Object(e.jsx)(K.a,{title:`${Object(C.i)(F.plural)} ${v.aggregation_group_type_index!=null?"that":"who"} have this property and completed the entire funnel.`,children:Object(e.jsx)(ee.a,{className:"column-info"})})]}),render:(g,w)=>k(w),width:90,align:"center"},"success_count"),Object(e.jsx)(Q.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Dropped off",Object(e.jsx)(K.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object(C.i)(F.plural)," ",v.aggregation_group_type_index!=null?"that":"who"," have this property and did ",Object(e.jsx)("b",{children:"not complete"})," the entire funnel."]}),children:Object(e.jsx)(ee.a,{className:"column-info"})})]}),render:(g,w)=>E(w),width:120,align:"center"},"failure_count"),Object(e.jsx)(Q.a,{title:"",render:(g,w)=>Object(e.jsx)(Tn,{record:w}),align:"center",width:30},"actions")]})]})}):null}const Tn=n=>{let{record:s}=n;const{insightProps:o}=Object(l.useValues)(b.c),i=Object(U.a)(o),{excludePropertyFromProject:r,setFunnelCorrelationDetails:c}=Object(l.useActions)(i),{isPropertyExcludedFromProject:d}=Object(l.useValues)(i),m=(s.event.event||"").split("::")[0],[u,j]=Object(Y.useState)(!1);return Object(e.jsx)(z.a,{style:{justifyContent:"flex-end"},children:Object(e.jsx)(pt.a,{visible:u,actionable:!0,onClickOutside:()=>j(!1),overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(J.a,{onClick:()=>c(s),fullWidth:!0,status:"stealth",children:"View correlation details"}),Object(e.jsx)(J.a,{disabled:d(m),onClick:()=>r(m),fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",status:"stealth",children:"Exclude property from project"})]}),children:Object(e.jsx)(J.a,{status:"stealth",onClick:()=>j(!u),children:Object(e.jsx)(dt.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"})})})})},En=()=>{var n;const{insightProps:s}=Object(l.useValues)(b.c),{isSkewed:o,steps:i,correlationFeedbackHidden:r,correlationDetailedFeedbackVisible:c,correlationFeedbackRating:d,correlationAnalysisAvailable:m,aggregationTargetLabel:u}=Object(l.useValues)(Object(U.a)(s)),{sendCorrelationAnalysisFeedback:j,hideSkewWarning:x,hideCorrelationAnalysisFeedback:f,setCorrelationFeedbackRating:v,setCorrelationDetailedFeedback:F}=Object(l.useActions)(Object(U.a)(s)),{preflight:y}=Object(l.useValues)(dn.a),T=Object(Y.useRef)(null);return i.length<=1?null:!m&&!(y!=null&&(n=y.instance_preferences)!==null&&n!==void 0&&n.disable_paid_fs)?Object(e.jsx)(cn.a,{identifier:a.e.CORRELATION_ANALYSIS,title:`Get a deeper understanding of why your ${u.plural} are not converting`,caption:`Correlation analysis automatically finds signals for why ${u.plural} are converting or dropping off.`}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h2",{style:{margin:"1rem 0"},children:"Correlation analysis"}),Object(e.jsxs)("div",{className:"funnel-correlation",children:[o&&Object(e.jsxs)(M.a,{className:"skew-warning",children:[Object(e.jsxs)("h4",{children:[Object(e.jsx)(P.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",Object(e.jsx)(rn.a,{className:"close-button",onClick:x})]}),Object(e.jsxs)("div",{children:[Object(e.jsx)("b",{children:"Tips for adjusting your funnel:"}),Object(e.jsxs)("ol",{children:[Object(e.jsx)("li",{children:"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."}),Object(e.jsx)("li",{children:"Choose an event that happens more frequently for subsequent funnels steps."})]})]})]}),Object(e.jsx)(Sn,{}),!r&&Object(e.jsxs)("div",{className:"border rounded p-4 space-y-2 mt-4",children:[Object(e.jsxs)("div",{className:"flex items-center justify-between",children:[Object(e.jsxs)("h4",{className:"text-muted-alt",children:[Object(e.jsx)(ln.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?"]}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[!!d&&Object(e.jsx)("i",{className:"text-success mr-2",children:"Thanks for your feedback!"}),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map((p,R)=>Object(e.jsx)(V.LemonButton,{active:d===p[0],onClick:()=>{d===p[0]?v(0):(v(p[0]),setTimeout(()=>{var L;return(L=T.current)===null||L===void 0?void 0:L.focus()},100))},children:p[1]},R)),Object(e.jsx)(V.LemonButton,{icon:Object(e.jsx)(P.IconClose,{}),onClick:f,status:"stealth"})]})]}),c?Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("form",{onSubmit:j,className:"space-y-2",children:[Object(e.jsx)(V.LemonTextArea,{onBlur:p=>F(p.target.value),placeholder:"Optional. Help us by sharing details around your experience...",ref:T,onPressCmdEnter:()=>{var p;(p=T.current)===null||p===void 0||p.blur(),j()}}),Object(e.jsx)("div",{className:"flex justify-end",children:Object(e.jsx)(V.LemonButton,{"data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit",children:"Share feedback"})})]})}):null]}),Object(e.jsx)(In,{})]})]})};var kn=t("./frontend/src/scenes/funnels/Funnel.tsx");function Pn(){const{insightProps:n}=Object(l.useValues)(b.c),{isValidFunnel:s,insightLoading:o,areFiltersValid:i}=Object(l.useValues)(Object(U.a)(n)),r=s&&i||o;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:Object(Ae.default)("funnel-insights-container",{"non-empty-state":r}),children:Object(e.jsx)(kn.a,{})})})}var _n=t("./frontend/src/lib/components/ExportButton/ExportButton.tsx"),Ln=t("./frontend/src/lib/components/AlertMessage/index.ts");const ft={[`${a.F.TRENDS}`]:Object(e.jsx)(ce,{view:a.F.TRENDS}),[`${a.F.STICKINESS}`]:Object(e.jsx)(ce,{view:a.F.STICKINESS}),[`${a.F.LIFECYCLE}`]:Object(e.jsx)(ce,{view:a.F.LIFECYCLE}),[`${a.F.FUNNELS}`]:Object(e.jsx)(Pn,{}),[`${a.F.RETENTION}`]:Object(e.jsx)(Gt.a,{}),[`${a.F.PATHS}`]:Object(e.jsx)(Jt.a,{})};function Pe(n){let{disableHeader:s,disableTable:o,disableCorrelationTable:i,disableLastComputation:r,insightMode:c}=n;const{insightProps:d,canEditInsight:m,insightLoading:u,activeView:j,loadedView:x,filters:f,showTimeoutMessage:v,showErrorMessage:F,exporterResourceParams:y,isUsingSessionAnalysis:T}=Object(l.useValues)(b.c),{areFiltersValid:p,isValidFunnel:R,areExclusionFiltersValid:L,correlationAnalysisAvailable:A}=Object(l.useValues)(Object(U.a)(d)),k=(()=>{if(j!==x||u&&!v)return Object(e.jsx)("div",{className:"text-center",children:Object(e.jsx)(sn.a,{type:an.a.LaptopHog})});if(x===a.F.FUNNELS){if(!p)return Object(e.jsx)(pe.b,{actionable:c===a.G.Edit||o});if(!L)return Object(e.jsx)(pe.a,{});if(!R&&!u)return Object(e.jsx)(pe.c,{})}return F?Object(e.jsx)(pe.d,{}):v?Object(e.jsx)(pe.e,{isLoading:u}):null})();function E(){return Object(h.e)(f)&&!F&&!v&&p&&R&&f.funnel_viz_type===a.B.Steps&&!o?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h2",{className:"my-4 mx-0",children:"Detailed results"}),Object(e.jsx)(nn,{})]}):Object(h.j)(f)&&(!f.display||(f==null?void 0:f.display)!==a.k.ActionsTable&&(f==null?void 0:f.display)!==a.k.ActionsBarValue)&&!o?Object(e.jsxs)(e.Fragment,{children:[y&&Object(e.jsxs)("div",{className:"flex items-center justify-between my-4 mx-0",children:[Object(e.jsx)("h2",{className:"m-0",children:"Detailed results"}),Object(e.jsx)(K.a,{title:"Export this table in CSV format",placement:"left",children:Object(e.jsx)(_n.a,{type:"secondary",status:"primary",items:[{export_format:a.t.CSV,export_context:y}]})})]}),Object(e.jsx)(l.BindLogic,{logic:re.a,props:d,children:Object(e.jsx)(st.b,{isLegend:!0,filterKey:Object(h.j)(f)?`trends_${j}`:"",canEditSeriesNameInline:Object(h.j)(f)&&!f.formula&&c===a.G.Edit,canCheckUncheckSeries:m})})]}):null}return Object(e.jsxs)(e.Fragment,{children:[T?Object(e.jsx)("div",{className:"mb-4",children:Object(e.jsxs)(Ln.a,{type:"info",children:["When using sessions and session properties, events without session IDs will be excluded from the set of results."," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/user-guides/sessions",children:"Learn more about sessions."})]})}):null,Object(e.jsx)(M.a,{title:s?null:Object(e.jsx)(Ie,{activeView:j,insightMode:c||a.G.View,filters:f,disableTable:!!o}),"data-attr":"insights-graph",className:"insights-graph-container",children:Object(e.jsxs)("div",{children:[Object(e.jsxs)(z.a,{className:Object(Ae.default)("insights-graph-header",{funnels:Object(h.e)(f)}),align:"middle",justify:"space-between",children:[!r&&Object(e.jsx)(W.a,{children:Object(e.jsx)(Ut,{})}),Object(e.jsxs)(W.a,{children:[Object(h.e)(f)?Object(e.jsx)($t,{}):null,Object(h.g)(f)?Object(e.jsx)(Qt,{}):null,Object(e.jsx)(at.b,{})]})]}),k||(Object(h.c)(f)&&f.show_legend?Object(e.jsxs)(z.a,{className:"insights-graph-container-row",wrap:!1,children:[Object(e.jsx)(W.a,{className:"insights-graph-container-row-left",children:ft[j]}),Object(e.jsx)(W.a,{className:"insights-graph-container-row-right",children:Object(e.jsx)(at.a,{})})]}):ft[j])]})}),E(),!i&&A&&j===a.F.FUNNELS&&Object(e.jsx)(En,{})]})}try{Pe.displayName="InsightContainer",Pe.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}},disableCorrelationTable:{defaultValue:null,description:"",name:"disableCorrelationTable",required:!1,type:{name:"boolean"}},disableLastComputation:{defaultValue:null,description:"",name:"disableLastComputation",required:!1,type:{name:"boolean"}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!1,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'},{value:'"subscriptions"'},{value:'"sharing"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:Pe.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(n){}},"./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts":function(N,O,t){"use strict";t.d(O,"a",function(){return l});var M=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),z=t("./frontend/src/scenes/insights/insightLogic.ts"),W=t("./frontend/src/scenes/insights/sharedUtils.ts");const l=Object(M.kea)({props:{},key:Object(W.l)("new"),path:_=>["scenes","insights","InsightDateFilter","insightDateFilterLogic",_],connect:_=>({actions:[Object(z.c)(_),["setFilters"]],values:[Object(z.c)(_),["filters"]]}),actions:()=>({setDates:(_,P)=>({dateFrom:_,dateTo:P})}),selectors:{dates:[_=>[_.filters],_=>({dateFrom:(_==null?void 0:_.date_from)||null,dateTo:(_==null?void 0:_.date_to)||null})]},listeners:_=>{let{actions:P,values:a}=_;return{setDates:b=>{let{dateFrom:V,dateTo:h}=b;P.setFilters(ne(te({},a.filters),{date_from:V||null,date_to:h||null}))}}}})},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss":function(N,O,t){var M=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");O=M(!1),O.push([N.i,".inline-message{background-color:var(--bg-mid);border-radius:var(--radius);padding:.5rem 1rem;font-weight:var(--font-medium);display:flex;align-items:center;color:var(--primary-alt)}.inline-message.danger{background-color:var(--danger-highlight);color:var(--danger)}.inline-message.closable{padding-right:.5rem}.inline-message.hidden{display:none}.inline-message .inline-icon{margin-right:6px;display:flex;align-items:center}.inline-message .inline-main{flex-grow:1}.inline-message .closable{color:var(--muted);align-self:flex-start;padding-left:1rem;cursor:pointer}",""]),N.exports=O},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(N,O,t){var M=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");O=M(!1),O.push([N.i,".insights-graph-header.funnels{border-bottom:1px solid var(--border)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:var(--default)}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),N.exports=O},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss":function(N,O,t){var M=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");O=M(!1),O.push([N.i,".correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:var(--radius);border:1px solid var(--border);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid var(--border);border-top:1px solid var(--border);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:var(--muted-alt)}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:var(--antd-table-background-dark);text-transform:uppercase;color:var(--muted)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),N.exports=O},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss":function(N,O,t){var M=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");O=M(!1),O.push([N.i,".funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid var(--warning)}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid var(--border);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:var(--muted)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:var(--font-medium)}",""]),N.exports=O},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss":function(N,O,t){var M=t("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");O=M(!1),O.push([N.i,".funnel-correlation-table{margin-top:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius);padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:var(--default);margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:var(--muted-alt);cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:var(--muted-alt)}",""]),N.exports=O}}]);
