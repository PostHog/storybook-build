"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[11952],{"../../products/messaging/frontend/Campaigns/Campaigns.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Campaigns:()=>Campaigns,scene:()=>scene});var posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.22.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),MessagingTabs=__webpack_require__("../../products/messaging/frontend/MessagingTabs.tsx"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts");let campaignsLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","messaging","frontend","campaignsLogic"]),(0,index_esm.actions)({deleteCampaign:campaign=>({campaign}),loadCampaigns:()=>({})}),(0,lib.loaders)(_ref=>{let{values}=_ref;return{campaigns:[[],{loadCampaigns:async()=>(await api.ZP.hogFlows.getHogFlows()).results,deleteCampaign:async _ref2=>{let{campaign}=_ref2;return await api.ZP.hogFlows.deleteHogFlow(campaign.id),values.campaigns.filter(c=>c.id!==campaign.id)}}]}}),(0,index_esm.selectors)({breadcrumbs:[()=>[],()=>[{key:sceneTypes.x.MessagingCampaigns,name:"Messaging",path:urls.j.messagingCampaigns()},{key:"campaigns",name:"Campaigns",path:urls.j.messagingCampaigns()}]]}),(0,index_esm.afterMount)(_ref3=>{let{actions}=_ref3;actions.loadCampaigns()})]);var More=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonTable=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),LemonTableLink=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function CampaignsTable(){(0,index_esm.useMountedLogic)(campaignsLogic);let{campaigns,campaignsLoading}=(0,index_esm.useValues)(campaignsLogic),{deleteCampaign}=(0,index_esm.useActions)(campaignsLogic),columns=[{title:"Name",render:(_,item)=>(0,jsx_runtime.jsx)(LemonTableLink.i,{to:urls.j.messagingCampaign(item.id),title:item.name,description:item.status})},{width:0,render:function Render(_,campaign){return(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"campaign-delete",fullWidth:!0,status:"danger",onClick:()=>deleteCampaign(campaign),children:"Delete"})})})}}];return(0,jsx_runtime.jsx)("div",{className:"campaigns-section",children:(0,jsx_runtime.jsx)(LemonTable.g,{dataSource:campaigns,loading:campaignsLoading,columns:columns})})}function Campaigns(){return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(MessagingTabs.J,{},"campaigns-tabs"),(0,jsx_runtime.jsx)(PageHeader.m,{caption:"Create automated messaging campaigns triggered by events",buttons:(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"new-campaign",to:urls.j.messagingCampaignNew(),type:"primary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),children:"New campaign"})}),(0,jsx_runtime.jsx)(CampaignsTable,{})]})}let scene={component:Campaigns,logic:campaignsLogic}},"../../products/messaging/frontend/MessagingTabs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>MessagingTabs});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),LemonTabs=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts");let messagingTabsLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","messaging","frontend","messagingTabsLogic"]),(0,index_esm.actions)({setTab:function(tab){let fromUrl=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tab,fromUrl}}}),(0,index_esm.reducers)({currentTab:["broadcasts",{setTab:(_,_ref)=>{let{tab}=_ref;return tab}}]}),(0,lib.actionToUrl)(_ref2=>{let{values}=_ref2;return{setTab:_ref3=>{let{fromUrl}=_ref3;if(!fromUrl){var _campaigns$broadcasts;return null!==(_campaigns$broadcasts=({campaigns:urls.j.messagingCampaigns(),broadcasts:urls.j.messagingBroadcasts(),library:urls.j.messagingLibrary(),senders:urls.j.messagingSenders()})[values.currentTab])&&void 0!==_campaigns$broadcasts?_campaigns$broadcasts:urls.j.messagingBroadcasts()}}}}),(0,lib.urlToAction)(_ref4=>{let{actions,values}=_ref4;return{"/messaging/:tab":_ref5=>{let{tab}=_ref5;tab!==values.currentTab&&actions.setTab(tab,!0)},"/messaging/:tab/*":_ref6=>{let{tab}=_ref6;tab!==values.currentTab&&actions.setTab(tab,!0)}}})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function MessagingTabs(){let{currentTab}=(0,index_esm.useValues)(messagingTabsLogic),{setTab}=(0,index_esm.useActions)(messagingTabsLogic);return(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:currentTab,onChange:tab=>setTab(tab),tabs:[{key:"broadcasts",label:"Broadcasts"},{key:"campaigns",label:"Campaigns"},{key:"library",label:"Templates"},{key:"senders",label:"Senders"}]})}}}]);