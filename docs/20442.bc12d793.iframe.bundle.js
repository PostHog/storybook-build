"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[20442],{"./frontend/src/scenes/llm-observability/LLMObservabilityScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LLMObservabilityScene:()=>LLMObservabilityScene,scene:()=>scene});var clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),DateFilter=__webpack_require__("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),navigationLogic=__webpack_require__("./frontend/src/layout/navigation/navigationLogic.ts"),dataNodeCollectionLogic=__webpack_require__("./frontend/src/queries/nodes/DataNode/dataNodeCollectionLogic.ts"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),schema_general=__webpack_require__("./frontend/src/queries/schema/schema-general.ts"),types=__webpack_require__("./frontend/src/types.ts");let llmObservabilityLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","llm-observability","llmObservabilityLogic"]),(0,index_esm.actions)({setDates:(dateFrom,dateTo)=>({dateFrom,dateTo})}),(0,index_esm.reducers)({dateFilter:[{dateFrom:"-30d",dateTo:null},{setDates:(_,_ref)=>{let{dateFrom,dateTo}=_ref;return{dateFrom,dateTo}}}]}),(0,index_esm.selectors)({tiles:[s=>[s.dateFilter],dateFilter=>[{title:"LLM generations",query:{kind:schema_general.OH.TrendsQuery,series:[{event:"$ai_generation",kind:schema_general.OH.EventsNode}],dateRange:{date_from:dateFilter.dateFrom,date_to:dateFilter.dateTo}}},{title:"LLM costs (USD)",query:{kind:schema_general.OH.TrendsQuery,series:[{event:"$ai_generation",math:types.O4.Sum,kind:schema_general.OH.EventsNode,math_property:"$ai_total_cost_usd"}],dateRange:{date_from:dateFilter.dateFrom,date_to:dateFilter.dateTo}}},{title:"Average latency (ms)",query:{kind:schema_general.OH.TrendsQuery,series:[{event:"$ai_generation",math:types.O4.Average,kind:schema_general.OH.EventsNode,math_property:"$ai_latency"}],breakdownFilter:{breakdown:"$ai_model"},dateRange:{date_from:dateFilter.dateFrom,date_to:dateFilter.dateTo}}}]]})]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:LLMObservabilityScene},Filters=()=>{let{dateFilter:{dateTo,dateFrom}}=(0,index_esm.useValues)(llmObservabilityLogic),{setDates}=(0,index_esm.useActions)(llmObservabilityLogic),{mobileLayout}=(0,index_esm.useValues)(navigationLogic.f);return(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.default)("sticky z-20 bg-bg-3000",mobileLayout?"top-[var(--breadcrumbs-height-full)]":"top-[var(--breadcrumbs-height-compact)]"),children:(0,jsx_runtime.jsx)("div",{className:"border-b py-2 flex flex-row flex-wrap gap-2 md:[&>*]:grow-0 [&>*]:grow",children:(0,jsx_runtime.jsx)(DateFilter.f,{dateFrom:dateFrom,dateTo:dateTo,onChange:setDates})})})},Tiles=()=>{let{tiles}=(0,index_esm.useValues)(llmObservabilityLogic);return(0,jsx_runtime.jsx)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 xxl:grid-cols-3 gap-4",children:tiles.map((tile,i)=>(0,jsx_runtime.jsx)(QueryTileItem,{tile:tile},i))})},QueryTileItem=_ref=>{let{tile}=_ref,{query,title,layout}=tile;return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("col-span-1 row-span-1 flex flex-col",layout?.className),children:[title&&(0,jsx_runtime.jsx)("h2",{className:"mb-1 flex flex-row ml-1",children:title}),(0,jsx_runtime.jsx)(Query.A,{query:{kind:schema_general.OH.InsightVizNode,source:query},readOnly:!0})]})};function LLMObservabilityScene(){return(0,jsx_runtime.jsxs)(index_esm.BindLogic,{logic:dataNodeCollectionLogic.y,props:{key:"llm-observability-data"},children:[(0,jsx_runtime.jsx)(Filters,{}),(0,jsx_runtime.jsx)(Tiles,{})]})}}}]);