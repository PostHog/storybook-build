"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[61121],{"./frontend/src/scenes/actions/Action.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Action:()=>Action,scene:()=>scene});var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),DataManagementScene=__webpack_require__("./frontend/src/scenes/data-management/DataManagementScene.tsx"),sceneTypes=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),kea_forms_lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.1.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),kea_router_lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),LemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/LemonToast/LemonToast.tsx"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),deleteWithUndo=__webpack_require__("./frontend/src/lib/utils/deleteWithUndo.tsx"),eventDefinitionsTableLogic=__webpack_require__("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),sceneLogic=__webpack_require__("./frontend/src/scenes/sceneLogic.ts"),actionsModel=__webpack_require__("./frontend/src/models/actionsModel.ts"),tagsModel=__webpack_require__("./frontend/src/models/tagsModel.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let DEFAULT_ACTION_STEP={event:"$pageview",href_matching:"contains"},actionEditLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","actions","actionEditLogic",key]),(0,index_esm.props)({}),(0,index_esm.key)(props=>props.id||"new"),(0,index_esm.connect)({actions:[actionsModel.D,["loadActions"],eventDefinitionsTableLogic.qh,["loadEventDefinitions"],tagsModel.x,["loadTags"]],values:[sceneLogic.k,["activeScene"]]}),(0,index_esm.actions)({setAction:function(action){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{merge:!0};return{action,options}},setCreateNew:createNew=>({createNew}),actionAlreadyExists:actionId=>({actionId}),deleteAction:!0}),(0,index_esm.reducers)({createNew:[!1,{setCreateNew:(_,_ref)=>{let{createNew}=_ref;return createNew}}]}),(0,kea_forms_lib.forms)(_ref2=>{var _props$action;let{actions,props}=_ref2;return{action:{defaults:null!==(_props$action=props.action)&&void 0!==_props$action?_props$action:{name:"",steps:[DEFAULT_ACTION_STEP]},submit:async(updatedAction,breakpoint)=>{let action;try{action=updatedAction.id?await api.ZP.actions.update(updatedAction.id,updatedAction):await api.ZP.actions.create(updatedAction),breakpoint()}catch(response){if("unique"===response.code){let dupeId=response.detail.split(" ").pop();return LemonToast.UJ.error((0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Action with this name already exists."," ",(0,jsx_runtime.jsx)(Link.r,{to:urls.j.action(dupeId),target:"_blank",children:"Edit it here"})]})),{...updatedAction}}throw response}if(LemonToast.UJ.success("Action saved"),actions.resetAction(updatedAction),props.id){let id=parseInt(props.id.toString()),logic=actionLogic.findMounted(id);logic?.actions.loadActionSuccess(action)}else kea_router_lib.router.actions.push(urls.j.action(action.id));return actions.loadEventDefinitions(),actions.loadActions(),actions.loadTags(),action}}}}),(0,lib.loaders)(_ref3=>{let{props,values}=_ref3;return{action:[{...props.action},{setAction:_ref4=>{let{action,options:{merge}}=_ref4;return merge?{...values.action,...action}:action}}]}}),(0,index_esm.listeners)(_ref5=>{let{values,actions}=_ref5;return{deleteAction:async()=>{let actionId=values.action.id;if(actionId)try{await (0,deleteWithUndo.S)({endpoint:api.ZP.actions.determineDeleteEndpoint(),object:values.action,callback:undo=>{undo?kea_router_lib.router.actions.push(urls.j.action(actionId)):(actions.resetAction(),kea_router_lib.router.actions.push(urls.j.actions()),actions.loadActions())}})}catch(e){LemonToast.UJ.error(`Error deleting action: ${e.detail}`)}}}}),(0,index_esm.afterMount)(_ref6=>{let{actions,props}=_ref6;props.id||actions.setActionValue("steps",[{...DEFAULT_ACTION_STEP}])}),(0,kea_router_lib.urlToAction)(_ref7=>{let{actions}=_ref7;return{[urls.j.createAction()]:(_,searchParams)=>{try{if(searchParams.copy){let{id:_id,created_at:_created_at,created_by:_created_by,last_calculated_at:_last_calculated_at,...actionToCopy}=searchParams.copy;actions.setAction({...actionToCopy,steps:actionToCopy.steps,name:`${actionToCopy.name} (copy)`},{merge:!1})}}catch(e){throw Error("Could not parse action to copy from URL")}}}}),(0,kea_router_lib.beforeUnload)(_ref8=>{let{actions,values}=_ref8;return{enabled:()=>values.actionChanged,message:"Leave action?\nChanges you made will be discarded.",onConfirm:()=>{actions.resetAction()}}})]),actionLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.key)(props=>props.id||"new"),(0,index_esm.path)(key=>["scenes","actions","actionLogic",key]),(0,index_esm.actions)(()=>({checkIsFinished:action=>({action}),setPollTimeout:pollTimeout=>({pollTimeout}),setIsComplete:isComplete=>({isComplete})})),(0,lib.loaders)(_ref=>{let{props}=_ref;return{action:[null,{loadAction:async()=>{if(!props.id)throw Error("Cannot fetch an unsaved action from the API.");return await api.ZP.actions.get(props.id)}}],matchingHogFunctions:[null,{loadMatchingHogFunctions:async()=>{let res=await api.ZP.hogFunctions.list({filters:{actions:[{id:`${props.id}`}]}});return res.results}}]}}),(0,index_esm.reducers)(()=>({pollTimeout:[null,{setPollTimeout:(_,_ref2)=>{let{pollTimeout}=_ref2;return pollTimeout}}],isComplete:[!1,{setIsComplete:(_,_ref3)=>{let{isComplete}=_ref3;return isComplete}}]})),(0,index_esm.selectors)({breadcrumbs:[s=>[s.action,(state,props)=>actionEditLogic.findMounted(String(props?.id||"new"))?.selectors.action(state).name||null],(action,inProgressName)=>[{key:sceneTypes.x.DataManagement,name:"Data Management",path:urls.j.eventDefinitions()},{key:DataManagementScene.DataManagementTab.Actions,name:"Actions",path:urls.j.actions()},{key:[sceneTypes.x.Action,action?.id||"new"],name:null!=inProgressName?inProgressName:action?.name||"",onRename:async name=>{let id=action?.id,actionEditLogicActions=actionEditLogic.find(String(id||"new"));actionEditLogicActions.actions.setActionValue("name",name),id&&await actionEditLogicActions.asyncActions.submitAction()},forceEditMode:!action?.id}]]}),(0,index_esm.listeners)(_ref4=>{let{actions,values}=_ref4;return{checkIsFinished:_ref5=>{let{action}=_ref5;action.is_calculating?actions.setPollTimeout(setTimeout(()=>actions.loadAction(),1e3)):(actions.setIsComplete(new Date),values.pollTimeout&&clearTimeout(values.pollTimeout))},loadActionSuccess:_ref6=>{let{action}=_ref6;actions.setIsComplete(!1),actions.checkIsFinished(action)}}}),(0,index_esm.events)(_ref7=>{let{values,actions,props}=_ref7;return{afterMount:()=>{props.id&&actions.loadAction()},beforeUnmount:()=>{values.pollTimeout&&clearTimeout(values.pollTimeout)}}})]);var utils=__webpack_require__("./frontend/src/queries/nodes/DataTable/utils.ts"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),schema=__webpack_require__("./frontend/src/queries/schema.ts"),posthog_icons_es=__webpack_require__("./node_modules/.pnpm/@posthog+icons@0.7.3_react-dom@18.2.0_react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),EditableField=__webpack_require__("./frontend/src/lib/components/EditableField/EditableField.tsx"),ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),useFeatureFlag=__webpack_require__("./frontend/src/lib/hooks/useFeatureFlag.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonField=__webpack_require__("./frontend/src/lib/lemon-ui/LemonField/index.ts"),LemonLabel=__webpack_require__("./frontend/src/lib/lemon-ui/LemonLabel/LemonLabel.tsx"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),types=__webpack_require__("./frontend/src/types.ts"),AuthorizedUrlList=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),authorizedUrlListLogic=__webpack_require__("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),OperandTag=__webpack_require__("./frontend/src/lib/components/PropertyFilters/components/OperandTag.tsx"),PropertyFilters=__webpack_require__("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonDialog=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDialog/index.ts"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),hints=__webpack_require__("./frontend/src/scenes/actions/hints.tsx"),EventName=__webpack_require__("./frontend/src/scenes/actions/EventName.tsx");let learnMoreLink="https://posthog.com/docs/user-guides/actions?utm_medium=in-product&utm_campaign=action-page";function ActionStep(_ref){let{step,actionId,isOnlyStep,index,identifier,onDelete,onChange}=_ref,sendStep=stepToSend=>{onChange(stepToSend)};return(0,jsx_runtime.jsxs)("div",{className:"bg-bg-light rounded border p-3 relative",children:[index>0&&index%2!=0&&(0,jsx_runtime.jsx)("div",{className:"absolute top-1/2 -left-5",children:(0,jsx_runtime.jsx)(OperandTag.g,{operand:"or"})}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("b",{children:["Match Group #",index+1]}),!isOnlyStep&&(0,jsx_runtime.jsx)(src.Jp,{className:"absolute top-2 right-2",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconX,{}),size:"small","aria-label":"delete",onClick:onDelete})]}),(0,jsx_runtime.jsx)(TypeSwitcher,{step:step,sendStep:sendStep}),"$autocapture"===step.event&&(0,jsx_runtime.jsx)(AutocaptureFields,{step:step,sendStep:sendStep,actionId:actionId}),void 0!==step.event&&"$autocapture"!==step.event&&"$pageview"!==step.event&&(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)(LemonLabel.H,{children:"Event name"}),(0,jsx_runtime.jsx)(EventName.C,{value:step.event,onChange:value=>sendStep({...step,event:value}),placeholder:"All events",allEventsOption:"explicit"}),(0,jsx_runtime.jsxs)("small",{children:[(0,jsx_runtime.jsx)(src.rU,{to:"https://posthog.com/docs/libraries",target:"_blank",children:"See documentation"})," ","on how to send custom events in lots of languages."]})]}),"$pageview"===step.event&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(Option,{step:step,sendStep:sendStep,item:"url",labelExtra:(0,jsx_runtime.jsx)(StringMatchingSelection,{field:"url",step:step,sendStep:sendStep}),label:"URL"}),step.url_matching&&step.url_matching in hints.i&&(0,jsx_runtime.jsx)("small",{children:hints.i[step.url_matching]})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,jsx_runtime.jsx)(LemonLabel.H,{children:"Filters"}),(0,jsx_runtime.jsx)(PropertyFilters.t,{propertyFilters:step.properties,pageKey:identifier,eventNames:step.event?[step.event]:[],onChange:properties=>{sendStep({...step,properties:properties})},showConditionBadge:!0})]})]})]})}let validateSelector=(val,selectorPrompts)=>{selectorPrompts(val.includes("#")?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["PostHog actions don't support the ",(0,jsx_runtime.jsx)("code",{children:"#example"})," syntax.",(0,jsx_runtime.jsx)("br",{}),"Use the equivalent ",(0,jsx_runtime.jsx)("code",{children:'[id="example"]'})," instead."]}):null)};function Option(_ref2){let{step,sendStep,item,label,placeholder="Specify a value to match on this",caption,labelExtra:extra_options}=_ref2,[selectorPrompt,setSelectorPrompt]=(0,react.useState)(null);return(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,jsx_runtime.jsx)(LemonLabel.H,{children:label}),extra_options]}),caption&&(0,jsx_runtime.jsx)("div",{className:"action-step-caption",children:caption}),(0,jsx_runtime.jsx)(src.DF,{"data-attr":"edit-action-url-input",allowClear:!0,onChange:val=>{"selector"===item&&validateSelector(val,setSelectorPrompt),sendStep({...step,[item]:val||null})},value:step[item]||"",placeholder:placeholder}),"selector"===item&&selectorPrompt&&(0,jsx_runtime.jsx)(LemonBanner.V,{type:"warning",children:selectorPrompt})]})}let AndSeparator=()=>(0,jsx_runtime.jsx)("div",{className:"flex w-full justify-center",children:(0,jsx_runtime.jsx)(OperandTag.g,{operand:"and"})});function AutocaptureFields(_ref3){let{step,actionId,sendStep}=_ref3;return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(src.Jp,{size:"small",type:"secondary",onClick:()=>{LemonDialog.d.open({title:"Select an element",description:actionId?"Choose the domain on which to edit this action":"Choose the domain on which to create this action",content:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(AuthorizedUrlList.t,{actionId:actionId,type:authorizedUrlListLogic.uw.TOOLBAR_URLS})}),primaryButton:{children:"Close",type:"secondary"}})},sideIcon:(0,jsx_runtime.jsx)(icons.UE,{}),children:"Select element on site"}),(0,jsx_runtime.jsx)(src.rU,{to:`${learnMoreLink}#autocapture-based-actions`,target:"_blank",children:"See documentation."})]}),(0,jsx_runtime.jsx)(Option,{step:step,sendStep:sendStep,item:"text",labelExtra:(0,jsx_runtime.jsx)(StringMatchingSelection,{field:"text",step:step,sendStep:sendStep}),label:"Element text"}),(0,jsx_runtime.jsx)(AndSeparator,{}),(0,jsx_runtime.jsx)(Option,{step:step,sendStep:sendStep,item:"href",labelExtra:(0,jsx_runtime.jsx)(StringMatchingSelection,{field:"href",step:step,sendStep:sendStep}),label:"Element link target",caption:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Filtering by the ",(0,jsx_runtime.jsx)("code",{children:"href"})," attribute. Only ",(0,jsx_runtime.jsx)("code",{children:"<a/>"})," elements will be matched."]})}),(0,jsx_runtime.jsx)(AndSeparator,{}),(0,jsx_runtime.jsx)(Option,{step:step,sendStep:sendStep,item:"selector",label:"Element matches HTML selector",caption:(0,jsx_runtime.jsxs)("span",{children:["The selector can be a tag name, class, HTML attribute, or all of those combined. Example:"," ",(0,jsx_runtime.jsx)("code",{children:'button[data-attr="signup"]'}),"."," ",(0,jsx_runtime.jsx)(src.rU,{to:`${learnMoreLink}#matching-selectors`,children:"Learn more in Docs."})]})}),(0,jsx_runtime.jsx)(AndSeparator,{}),(0,jsx_runtime.jsx)(Option,{step:step,sendStep:sendStep,item:"url",labelExtra:(0,jsx_runtime.jsx)(StringMatchingSelection,{field:"url",step:step,sendStep:sendStep}),label:"Page URL",caption:"The page on which the interaction occurred."}),step?.url_matching&&step.url_matching in hints.i&&(0,jsx_runtime.jsx)("small",{children:hints.i[step.url_matching]})]})}function TypeSwitcher(_ref4){let{step,sendStep}=_ref4;return(0,jsx_runtime.jsx)("div",{"data-attr":"action-type-switcher",children:(0,jsx_runtime.jsx)(src.P4,{onChange:type=>{"$autocapture"===type?sendStep({...step,event:"$autocapture"}):"event"===type?sendStep({...step,event:null}):"$pageview"===type&&sendStep({...step,event:"$pageview",url:step.url})},value:"$autocapture"===step.event||"$pageview"===step.event||void 0===step.event?step.event:"event",options:[{value:"$pageview",label:"Pageview","data-attr":"action-type-pageview"},{value:"$autocapture",label:"Autocapture","data-attr":"action-type-autocapture"},{value:"event",label:"Other events","data-attr":"action-type-other"}],fullWidth:!0,size:"small"})})}function StringMatchingSelection(_ref5){let{field,step,sendStep}=_ref5,key=`${field}_matching`;return(0,jsx_runtime.jsx)("div",{className:"flex flex-1 justify-end",children:(0,jsx_runtime.jsx)(src.P4,{onChange:value=>{sendStep({...step,[key]:value})},value:step[key]||("url"===field?"contains":"exact"),options:[{value:"exact",label:"matches exactly"},{value:"regex",label:"matches regex"},{value:"contains",label:"contains"}],size:"xsmall"})})}function ActionEdit(_ref){let{action:loadedAction,id}=_ref,logicProps={id:id,action:loadedAction},logic=actionEditLogic(logicProps),{action,actionLoading,actionChanged}=(0,index_esm.useValues)(logic),{submitAction,deleteAction}=(0,index_esm.useActions)(logic),{currentTeam}=(0,index_esm.useValues)(teamLogic.H),{tags}=(0,index_esm.useValues)(tagsModel.x),slackEnabled=currentTeam?.slack_incoming_webhook,hogFunctionsEnabled=(0,useFeatureFlag.y)("HOG_FUNCTIONS");return(0,jsx_runtime.jsx)("div",{className:"action-edit-container",children:(0,jsx_runtime.jsxs)(kea_forms_lib.Form,{logic:actionEditLogic,props:logicProps,formKey:"action",enableFormOnSubmit:!0,children:[(0,jsx_runtime.jsx)(PageHeader.m,{caption:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"description",children:_ref2=>{let{value,onChange}=_ref2;return(0,jsx_runtime.jsx)(EditableField.f,{multiline:!0,name:"description",markdown:!0,value:value||"",placeholder:"Description (optional)",onChange:id?void 0:onChange,onSave:value=>{onChange(value),submitAction()},mode:id?void 0:"edit","data-attr":"action-description",className:"action-description",compactButtons:!0,maxLength:600})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"tags",className:"mt-2",children:_ref3=>{let{value,onChange}=_ref3;return(0,jsx_runtime.jsx)(ObjectTags.D,{tags:null!=value?value:[],onChange:tags=>onChange(tags),className:"action-tags",saving:actionLoading,tagsAvailable:tags.filter(tag=>!action.tags?.includes(tag))})}})]}),buttons:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[id?(0,jsx_runtime.jsx)(LemonButton.J,{type:"secondary",to:urls.j.replay(types.yd.Recent,{filter_group:{type:types.J2.And,values:[{type:types.J2.And,values:[{id:id,type:"actions",order:0,name:action.name}]}]}}),sideIcon:(0,jsx_runtime.jsx)(icons.Ud,{}),"data-attr":"action-view-recordings",children:"View recordings"}):null,id?(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"delete-action-bottom",status:"danger",type:"secondary",onClick:()=>{deleteAction()},children:"Delete"}):(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-action-bottom",status:"danger",type:"secondary",onClick:()=>{kea_router_lib.router.actions.push(urls.j.actions())},children:"Cancel"}),actionChanged||!id?(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"save-action-button",type:"primary",htmlType:"submit",loading:actionLoading,onClick:submitAction,disabledReason:actionChanged||id?void 0:"No changes to save",children:"Save"}):null]})}),(0,jsx_runtime.jsxs)("div",{className:"@container",children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",children:"Match groups"}),(0,jsx_runtime.jsxs)("p",{children:["Your action will be triggered whenever ",(0,jsx_runtime.jsx)("b",{children:"any of your match groups"})," are received.",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/features/actions",target:"_blank",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{className:"ml-1 text-muted text-xl"})})]}),(0,jsx_runtime.jsx)(LemonField.D,{name:"steps",children:_ref4=>{let{value:stepsValue,onChange}=_ref4;return(0,jsx_runtime.jsxs)("div",{className:"grid @4xl:grid-cols-2 gap-3",children:[stepsValue.map((step,index)=>{let identifier=String(JSON.stringify(step));return(0,jsx_runtime.jsx)(ActionStep,{identifier:identifier,index:index,step:step,actionId:action.id||0,isOnlyStep:!!stepsValue&&1===stepsValue.length,onDelete:()=>{let newSteps=[...stepsValue];newSteps.splice(index,1),onChange(newSteps)},onChange:newStep=>{let newSteps=[...stepsValue];newSteps.splice(index,1,newStep),onChange(newSteps)}},index)}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(LemonButton.J,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),type:"secondary",onClick:()=>{onChange([...action.steps||[],DEFAULT_ACTION_STEP])},center:!0,className:"w-full h-full",children:"Add match group"})})]})}})]}),!hogFunctionsEnabled||action.post_to_slack?(0,jsx_runtime.jsxs)("div",{className:"my-4 space-y-2",children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",children:"Webhook delivery"}),hogFunctionsEnabled&&(0,jsx_runtime.jsxs)(src.Vp,{type:"warning",children:["The Webhook integration has been replaced with our new ",(0,jsx_runtime.jsx)("b",{children:"Pipeline Destinations"}),"allowing for much greater customization and visibility into their execution."]}),(0,jsx_runtime.jsx)(LemonField.D,{name:"post_to_slack",children:_ref5=>{var _action$bytecode_erro;let{value,onChange}=_ref5;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,jsx_runtime.jsx)(src.Hw,{id:"webhook-checkbox",bordered:!0,checked:!action.bytecode_error&&!!value,onChange:onChange,disabledReason:slackEnabled?null!==(_action$bytecode_erro=action.bytecode_error)&&void 0!==_action$bytecode_erro?_action$bytecode_erro:null:"Configure webhooks in project settings",label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{children:"Post to webhook when this action is triggered."}),action.bytecode_error?(0,jsx_runtime.jsx)(posthog_icons_es.IconWarning,{className:"text-warning text-xl ml-1"}):null]})}),(0,jsx_runtime.jsxs)(Link.r,{to:urls.j.settings("project-integrations","integration-webhooks"),children:[slackEnabled?"Configure":"Enable"," webhooks in project settings."]})]})}}),action.post_to_slack&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:!action.bytecode_error&&action.post_to_slack&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(LemonField.D,{name:"slack_message_format",children:_ref6=>{let{value,onChange}=_ref6;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonLabel.H,{showOptional:!0,children:"Slack message format"}),(0,jsx_runtime.jsx)(src._V,{placeholder:"Default: [action.name] triggered by [person]",value:value,onChange:onChange,disabled:!slackEnabled||!action.post_to_slack,"data-attr":"edit-slack-message-format",maxLength:1200}),(0,jsx_runtime.jsx)("small",{children:(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/webhooks#message-formatting",target:"_blank",children:"See documentation on how to format webhook messages."})})]})}})})})]}):void 0]})})}var Destinations=__webpack_require__("./frontend/src/scenes/pipeline/destinations/Destinations.tsx"),pipeline_types=__webpack_require__("./frontend/src/scenes/pipeline/types.ts");function ActionHogFunctions(){let{action}=(0,index_esm.useValues)(actionLogic),hogFunctionsEnabled=(0,useFeatureFlag.y)("HOG_FUNCTIONS");return action&&hogFunctionsEnabled?(0,jsx_runtime.jsxs)("div",{className:"my-4 space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("h2",{className:"flex-1 subtitle",children:"Connected destinations"}),(0,jsx_runtime.jsx)(src.Jp,{type:"primary",size:"small",to:urls.j.pipelineNodeNew(types.We.Destination)+`?kind=hog_function#configuration=${JSON.stringify({filters:{actions:[{id:`${action?.id}`,name:`${action?.name}`,type:"actions"}]}})}`,children:"New destination"})]}),(0,jsx_runtime.jsx)("p",{children:"Actions can be used a filters for destinations such as Slack or Webhook delivery"}),(0,jsx_runtime.jsx)(Destinations.h,{defaultFilters:{onlyActive:!0},forceFilters:{kind:pipeline_types.b.HogFunction,filters:{actions:[{id:`${action.id}`}]}}})]}):null}let scene={logic:actionLogic,component:Action,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id:id?parseInt(id):void 0}}};function Action(){let{id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{action,actionLoading,isComplete}=(0,index_esm.useValues)(actionLogic);return actionLoading?(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(src.yW,{className:"w-1/4 h-6"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-1/3 h-10"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-1/2 h-6"}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(src.yW,{className:"w-1/2 h-120"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-1/2 h-120"})]})]}):id&&!action?(0,jsx_runtime.jsx)(NotFound.T,{object:"action"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ActionEdit,{id:id,action:action}),(0,jsx_runtime.jsx)(ActionHogFunctions,{}),id&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isComplete?(0,jsx_runtime.jsxs)("div",{className:"mt-8",children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",children:"Matching events"}),(0,jsx_runtime.jsxs)("p",{children:["This is the list of ",(0,jsx_runtime.jsx)("strong",{children:"recent"})," events that match this action."]}),(0,jsx_runtime.jsx)("div",{className:"pt-4 border-t"}),(0,jsx_runtime.jsx)(Query.A,{query:{kind:schema.OH.DataTableNode,source:{kind:schema.OH.EventsQuery,select:(0,utils.Qi)(schema.OH.EventsQuery),actionId:id},full:!0,showEventFilter:!1,showPropertyFilter:!1}})]}):(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h2",{className:"subtitle",children:"Matching events"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)(Spinner.$,{className:"mr-4"}),"Calculating action, please hold on."]})]})})]})}},"./frontend/src/scenes/actions/hints.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>URL_MATCHING_HINTS});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let URL_MATCHING_HINTS={exact:void 0,contains:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:["Use ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("code",{children:"%"})," for wildcard, for example: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("code",{children:"/user/%/edit"}),"."]}),regex:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.rU,{to:"https://github.com/google/re2/wiki/Syntax",target:"_blank",children:"RE2 syntax applies."})}},"./frontend/src/scenes/pipeline/AppMetricSparkLine.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AppMetricSparkLineV2,k:()=>AppMetricSparkLine});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_Sparkline__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/components/Sparkline.tsx"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_pipelineNodeMetricsLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/pipeline/pipelineNodeMetricsLogic.tsx"),_pipelineNodeMetricsV2Logic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/pipeline/pipelineNodeMetricsV2Logic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function AppMetricSparkLine(_ref){let{pipelineNode}=_ref,logic=(0,_pipelineNodeMetricsLogic__WEBPACK_IMPORTED_MODULE_3__.j)({id:pipelineNode.id}),{appMetricsResponse}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(logic),successes=appMetricsResponse?appMetricsResponse.metrics.successes.slice(-7):[],failures=appMetricsResponse?appMetricsResponse.metrics.failures.slice(-7):[],dates=appMetricsResponse?appMetricsResponse.metrics.dates.slice(-7):[],displayData=[{color:"success",name:"Success",values:successes}];return appMetricsResponse?.metrics.failures.some(failure=>failure>0)&&displayData.push({color:"danger",name:"Failure",values:failures}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_Sparkline__WEBPACK_IMPORTED_MODULE_1__.b,{loading:null===appMetricsResponse,labels:dates,data:displayData,className:"max-w-24 h-8",maximumIndicator:!1})}function AppMetricSparkLineV2(_ref2){let{pipelineNode}=_ref2,logic=(0,_pipelineNodeMetricsV2Logic__WEBPACK_IMPORTED_MODULE_4__.K)({id:`${pipelineNode.id}`.replace("hog-","")}),{appMetrics,appMetricsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(logic),{loadMetrics}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(logic);(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{loadMetrics()},[]);let displayData=[{color:"success",name:"Success",values:appMetrics?.series.find(s=>"succeeded"===s.name)?.values||[]},{color:"danger",name:"Failures",values:appMetrics?.series.find(s=>"failed"===s.name)?.values||[]}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(lib_components_Sparkline__WEBPACK_IMPORTED_MODULE_1__.b,{loading:appMetricsLoading,labels:appMetrics?.labels,data:displayData,className:"max-w-24 h-8",maximumIndicator:!1})}},"./frontend/src/scenes/pipeline/NewButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>NewButton});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@posthog+icons@0.7.3_react-dom@18.2.0_react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/urls.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function NewButton(_ref){let{stage}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_1__.J,{"data-attr":`new-${stage}`,to:scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.pipelineNodeNew(stage),type:"primary",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPlusSmall,{}),children:["New ",stage]})}},"./frontend/src/scenes/pipeline/destinations/Destinations.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>Destinations,h:()=>DestinationsTable});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/hooks/useFeatureFlag.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonMenu_LemonMenu__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonMenu/LemonMenu.tsx"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/scenes/urls.ts"),_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/types.ts"),_AppMetricSparkLine__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/scenes/pipeline/AppMetricSparkLine.tsx"),_hogfunctions_HogFunctionIcon__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/scenes/pipeline/hogfunctions/HogFunctionIcon.tsx"),_NewButton__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/scenes/pipeline/NewButton.tsx"),_pipelineAccessLogic__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/scenes/pipeline/pipelineAccessLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/scenes/pipeline/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/scenes/pipeline/utils.tsx"),_destinationsLogic__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/scenes/pipeline/destinations/destinationsLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function Destinations(){let{destinations,loading}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)((0,_destinationsLogic__WEBPACK_IMPORTED_MODULE_18__.w)({syncFiltersWithUrl:!0}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_2__.m,{caption:"Send your data in real time or in batches to destinations outside of PostHog.",buttons:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_NewButton__WEBPACK_IMPORTED_MODULE_14__.R,{stage:_types__WEBPACK_IMPORTED_MODULE_11__.We.Destination})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_PayGateMini_PayGateMini__WEBPACK_IMPORTED_MODULE_3__.E,{feature:_types__WEBPACK_IMPORTED_MODULE_11__.P$.DATA_PIPELINES,className:"mb-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_4__.C,{productName:"Pipeline destinations",thingName:"destination",productKey:_types__WEBPACK_IMPORTED_MODULE_11__.Md.PIPELINE_DESTINATIONS,description:"Pipeline destinations allow you to export data outside of PostHog, such as webhooks to Slack.",docsURL:"https://posthog.com/docs/cdp",actionElementOverride:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_NewButton__WEBPACK_IMPORTED_MODULE_14__.R,{stage:_types__WEBPACK_IMPORTED_MODULE_11__.We.Destination}),isEmpty:0===destinations.length&&!loading})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(DestinationsTable,{syncFiltersWithUrl:!0})]})}function DestinationsTable(_ref){var _filters$search;let{...props}=_ref,{loading,filteredDestinations,filters,destinations}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)((0,_destinationsLogic__WEBPACK_IMPORTED_MODULE_18__.w)(props)),{setFilters,resetFilters}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)((0,_destinationsLogic__WEBPACK_IMPORTED_MODULE_18__.w)(props)),hasHogFunctions=!!(0,lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_5__.y)("HOG_FUNCTIONS");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{className:"flex items-center mb-2 gap-2",children:[!props.forceFilters?.search&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.DF,{type:"search",placeholder:"Search...",value:null!==(_filters$search=filters.search)&&void 0!==_filters$search?_filters$search:"",onChange:e=>setFilters({search:e})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("div",{className:"flex-1"}),"boolean"!=typeof props.forceFilters?.onlyActive&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Hw,{label:"Only active",bordered:!0,size:"small",checked:filters.onlyActive,onChange:e=>setFilters({onlyActive:null!=e?e:void 0})}),!props.forceFilters?.kind&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Yv,{type:"secondary",size:"small",options:[{label:"All kinds",value:null},hasHogFunctions?{label:"Realtime (new)",value:_types__WEBPACK_IMPORTED_MODULE_16__.b.HogFunction}:void 0,{label:"Realtime",value:_types__WEBPACK_IMPORTED_MODULE_16__.b.Plugin},{label:"Batch exports",value:_types__WEBPACK_IMPORTED_MODULE_16__.b.BatchExport}].filter(Boolean),value:filters.kind,onChange:e=>setFilters({kind:null!=e?e:void 0})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(kea__WEBPACK_IMPORTED_MODULE_1__.BindLogic,{logic:_destinationsLogic__WEBPACK_IMPORTED_MODULE_18__.w,props:props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.g3,{dataSource:filteredDestinations,size:"small",loading:loading,columns:[{title:"App",width:0,render:function RenderAppInfo(_,destination){switch(destination.backend){case"plugin":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_utils__WEBPACK_IMPORTED_MODULE_17__.Wf,{plugin:destination.plugin});case"hog_function":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_hogfunctions_HogFunctionIcon__WEBPACK_IMPORTED_MODULE_13__._,{src:destination.hog_function.icon_url,size:"small"});case"batch_export":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_utils__WEBPACK_IMPORTED_MODULE_17__.oe,{type:destination.service.type});default:return null}}},{title:"Name",sticky:!0,sorter:!0,key:"name",dataIndex:"name",render:function RenderPluginName(_,destination){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_9__.i,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_10__.j.pipelineNode(_types__WEBPACK_IMPORTED_MODULE_11__.We.Destination,destination.id,_types__WEBPACK_IMPORTED_MODULE_11__.il.Configuration),title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.u,{title:"Click to update configuration, view metrics, and more",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("span",{children:destination.name})})}),description:destination.description})}},{title:"Frequency",key:"interval",render:function RenderFrequency(_,destination){return destination.interval}},{title:"Weekly volume",render:function RenderSuccessRate(_,destination){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.rU,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_10__.j.pipelineNode(_types__WEBPACK_IMPORTED_MODULE_11__.We.Destination,destination.id,_types__WEBPACK_IMPORTED_MODULE_11__.il.Metrics),children:destination.backend===_types__WEBPACK_IMPORTED_MODULE_16__.b.HogFunction?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_AppMetricSparkLine__WEBPACK_IMPORTED_MODULE_12__.A,{pipelineNode:destination}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_AppMetricSparkLine__WEBPACK_IMPORTED_MODULE_12__.k,{pipelineNode:destination})})}},(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_8__.yI)(),{title:"Status",key:"enabled",sorter:a=>a.enabled?1:-1,width:0,render:function RenderStatus(_,destination){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:destination.enabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.oe,{type:"success",className:"uppercase",children:"Active"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.oe,{type:"default",className:"uppercase",children:"Paused"})})}},{width:0,render:function Render(_,destination){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_6__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(DestinationMoreOverlay,{destination:destination})})}}],emptyState:0!==destinations.length||loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:["No destinations matching filters."," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.rU,{onClick:()=>resetFilters(),children:"Clear filters"})," "]}):"No destinations found"})})]})}let DestinationMoreOverlay=_ref2=>{let{destination}=_ref2,{canConfigurePlugins,canEnableDestination}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_pipelineAccessLogic__WEBPACK_IMPORTED_MODULE_15__.g),{toggleNode,deleteNode}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_destinationsLogic__WEBPACK_IMPORTED_MODULE_18__.w);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(lib_lemon_ui_LemonMenu_LemonMenu__WEBPACK_IMPORTED_MODULE_7__.iy,{items:[{label:destination.enabled?"Pause destination":"Unpause destination",onClick:()=>toggleNode(destination,!destination.enabled),disabledReason:canConfigurePlugins?canEnableDestination(destination)||destination.enabled?void 0:"Data pipelines add-on is required for enabling new destinations":"You do not have permission to toggle destinations."},...(0,_utils__WEBPACK_IMPORTED_MODULE_17__.PU)(destination),{label:"Delete destination",status:"danger",onClick:()=>deleteNode(destination),disabledReason:canConfigurePlugins?void 0:"You do not have permission to delete destinations."}]})}}}]);