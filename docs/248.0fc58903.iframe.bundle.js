(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(I,p,e){"use strict";e.r(p),e.d(p,"ProjectHomepage",function(){return g}),e.d(p,"scene",function(){return z});var U=e("./node_modules/core-js/modules/es.array.slice.js"),be=e("./node_modules/core-js/modules/es.function.name.js"),pe=e("./node_modules/core-js/modules/es.object.to-string.js"),je=e("./node_modules/core-js/modules/es.regexp.to-string.js"),re=e("./node_modules/react/index.js"),a=e.n(re),te=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),se=e.n(te),oe=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),ae=e.n(oe),H={};H.insert="head",H.singleton=!1;var G=se()(ae.a,H),he=ae.a.locals||{},Y=e("./frontend/src/lib/components/PageHeader.tsx"),ne=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),c=e("./node_modules/kea/lib/index.esm.js"),x=e("./frontend/src/scenes/teamLogic.ts"),ie=e("./frontend/src/types.ts"),de=e("./node_modules/antd/es/row/index.js"),Q=e("./node_modules/antd/es/skeleton/index.js"),J=e("./node_modules/antd/es/typography/index.js"),le=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),ce=e("./node_modules/kea-router/lib/index.js"),N=e("./frontend/src/scenes/urls.ts"),W=e("./frontend/src/lib/components/LemonRow/index.ts"),De=e("./node_modules/core-js/modules/es.symbol.js"),ue=e("./node_modules/core-js/modules/es.symbol.description.js"),ve=e("./node_modules/core-js/modules/es.array.map.js"),B=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/PrimaryDashboardModal.scss"),X=e.n(B),V={};V.insert="head",V.singleton=!1;var ye=se()(X.a,V),Pe=X.a.locals||{},Z=e("./frontend/src/models/dashboardsModel.tsx"),b=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),y=e("./frontend/src/lib/components/LemonButton/index.ts"),$=e("./node_modules/@babel/runtime/regenerator/index.js"),S=e.n($),me=e("./node_modules/regenerator-runtime/runtime.js"),ge=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),t=e.n(ge),s=e("./frontend/src/lib/utils/eventUsageLogic.ts"),o=Object(c.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[s.f],actions:[x.a,["updateCurrentTeam"]],values:[x.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(u){return{dashboardId:u}}},selectors:{primaryDashboardId:[function(n){return[n.currentTeam]},function(n){return n==null?void 0:n.primary_dashboard}]},reducers:{visible:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(u){var m=u.actions;return{setPrimaryDashboard:function(){var f=t()(S.a.mark(function h(_){var D;return S.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:D=_.dashboardId,m.updateCurrentTeam({primary_dashboard:D}),s.f.actions.reportPrimaryDashboardChanged();case 3:case"end":return v.stop()}},h)}));function l(h){return f.apply(this,arguments)}return l}(),showPrimaryDashboardModal:function(){var f=t()(S.a.mark(function h(){return S.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:s.f.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return D.stop()}},h)}));function l(){return f.apply(this,arguments)}return l}()}}}),r=e("./frontend/src/lib/components/icons.tsx");function i(){var n=Object(c.useValues)(o),u=n.visible,m=n.primaryDashboardId,f=Object(c.useActions)(o),l=f.closePrimaryDashboardModal,h=f.setPrimaryDashboard,_=Object(c.useValues)(Z.a),D=_.nameSortedDashboards,k=_.dashboardsLoading;return a.a.createElement(b.a,{className:"primary-dashboard-modal",visible:u,onCancel:function(){l()},title:"Select a default dashboard for the project",destroyOnClose:!0,bodyStyle:{padding:0},footer:a.a.createElement(a.a.Fragment,null,a.a.createElement(y.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",style:{marginRight:"0.5rem"},onClick:l},"Close"))},k?a.a.createElement("div",{className:"loading-skeleton-container"},a.a.createElement(Q.a,{active:!0})):a.a.createElement("div",{className:"dashboard-list"},D.map(function(v){var q=v.id===m,ee=a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"dashboard-label-container"},a.a.createElement("strong",null,v.name),a.a.createElement(J.a.Paragraph,{ellipsis:{rows:1},className:"text-small dashboard-description"},v.description)),q?a.a.createElement("div",{className:"default-indicator"},a.a.createElement(r.IconCottage,{className:"mr-05 text-warning",style:{fontSize:"1.5rem"}}),a.a.createElement("span",null,"Default")):a.a.createElement("strong",{className:"set-default-text"},"Set as default"));return q?a.a.createElement(W.a,{key:v.id,fullWidth:!0,status:"muted",className:"dashboard-row"},ee):a.a.createElement(y.a,{key:v.id,fullWidth:!0,className:"dashboard-row",onClick:function(){h(v.id),l()}},ee)})))}var P=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),j=Object(c.kea)({path:["scenes","project-homepage","projectHomepageLogic"],connect:{values:[x.a,["currentTeamId"]]},selectors:{primaryDashboardId:[function(){return[x.a.selectors.currentTeam]},function(n){return n==null?void 0:n.primary_dashboard}],dashboardLogic:[function(n){return[n.primaryDashboardId]},function(n){return P.c.build({id:n!=null?n:void 0,placement:ie.f.ProjectHomepage},!1)}]},subscriptions:function(u){var m=u.cache;return{dashboardLogic:function(l){var h;(h=m.unmount)===null||h===void 0||h.call(m),m.unmount=l?l.mount():null}}},events:function(u){var m=u.cache;return{afterMount:function(){var l;(l=m.unmount)===null||l===void 0||l.call(m)}}}}),C=e("./frontend/src/lib/logic/featureFlagLogic.ts"),O=e("./frontend/src/lib/constants.tsx"),K=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),M=e("./frontend/src/scenes/persons/PersonHeader.tsx"),L=e("./frontend/src/lib/components/ProfilePicture/index.ts"),F=e("./frontend/src/lib/utils.tsx"),d=e("./frontend/src/lib/dayjs.ts"),T=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),R=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts");function w(n){var u=n.recording,m=Object(R.a)({key:"projectHomepage"}),f=Object(c.useActions)(m),l=f.openSessionPlayer;return a.a.createElement(y.a,{fullWidth:!0,className:"recording-row",onClick:function(){l(u.id,s.d.ProjectHomepage)}},a.a.createElement(L.a,{name:Object(M.b)(u.person)}),a.a.createElement("div",{className:"recording-person-text-container",style:{flexDirection:"column",display:"flex"}},a.a.createElement("p",{className:"recording-person-text"},Object(M.b)(u.person)),a.a.createElement("p",{className:"recording-start-time"},Object(d.a)(u.start_time).fromNow())),a.a.createElement("span",{className:"recording-duration"},Object(F.N)(u.recording_duration)),a.a.createElement(r.IconPlayCircle,{style:{fontSize:"1.25rem"}}))}function g(){var n=Object(c.useValues)(j),u=n.dashboardLogic,m=Object(R.a)({key:"projectHomepage"}),f=Object(c.useValues)(m),l=f.sessionRecordingId,h=f.sessionRecordings,_=f.sessionRecordingsResponseLoading,D=Object(c.useActions)(m),k=D.closeSessionPlayer,v=Object(c.useValues)(C.a),q=v.featureFlags,ee=Object(c.useValues)(x.a),E=ee.currentTeam,Re=Object(c.useValues)(u),A=Re.dashboard,Oe=Object(c.useActions)(le.a),Me=Oe.showInviteModal,Le=Object(c.useActions)(o),Ee=Le.showPrimaryDashboardModal,Te=a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(y.a,{"data-attr":"project-home-invite-team-members",onClick:function(){Me()},className:"mr-05",type:"secondary"},"Invite members"),a.a.createElement(y.a,{"data-attr":"project-home-new-insight",onClick:function(){ce.router.actions.push(N.a.insightNew())},type:"secondary"},"New insight"));return a.a.createElement("div",{className:"project-homepage"},!!l&&a.a.createElement(T.a,{onClose:k}),a.a.createElement(Y.a,{title:(E==null?void 0:E.name)||"",delimited:!0,buttons:Te}),q[O.n.HOMEPAGE_LISTS]&&a.a.createElement("div",{className:"top-list-container-horizontal"},a.a.createElement("div",{className:"top-list"},a.a.createElement(K.a,{title:"Recent recordings",viewAllURL:N.a.sessionRecordings(),loading:_,emptyMessage:E!=null&&E.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonHref:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:N.a.projectSettings()+"#recordings"},items:h.slice(0,5),renderRow:function(Ie,xe){return a.a.createElement(w,{key:xe,recording:Ie})}})),a.a.createElement("div",{className:"spacer"})),E!=null&&E.primary_dashboard?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(de.a,{className:"homepage-dashboard-header"},a.a.createElement("div",{className:"dashboard-title-container"},!A&&a.a.createElement(Q.a,{active:!0,paragraph:!1}),(A==null?void 0:A.name)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.IconCottage,{className:"mr-05 text-warning",style:{fontSize:"1.5rem"}}),a.a.createElement(J.a.Title,{className:"dashboard-name",level:4},A==null?void 0:A.name))),a.a.createElement(y.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:Ee},"Change dashboard")),a.a.createElement(W.b,{large:!0})),a.a.createElement(ne.Dashboard,{id:E.primary_dashboard.toString(),placement:ie.f.ProjectHomepage})):a.a.createElement("div",{className:"empty-state-container"},a.a.createElement(r.IconCottage,{className:"mb-05 text-warning",style:{fontSize:"2rem"}}),a.a.createElement("h1",null,"There isn\u2019t a default dashboard set for this project"),a.a.createElement("p",{className:"mb"},"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."),a.a.createElement(y.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){Ee()}},"Select a default dashboard")),a.a.createElement(i,null))}var z={component:g,logic:j}},"./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts":function(I,p,e){"use strict";e.d(p,"a",function(){return ge});var U=e("./node_modules/core-js/modules/es.array.concat.js"),be=e.n(U),pe=e("./node_modules/core-js/modules/es.array.iterator.js"),je=e.n(pe),re=e("./node_modules/core-js/modules/es.array.map.js"),a=e.n(re),te=e("./node_modules/core-js/modules/es.object.to-string.js"),se=e.n(te),oe=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ae=e.n(oe),H=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),G=e.n(H),he=e("./node_modules/@babel/runtime/regenerator/index.js"),Y=e.n(he),ne=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),c=e.n(ne),x=e("./node_modules/regenerator-runtime/runtime.js"),ie=e.n(x),de=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),Q=e.n(de),J=e("./node_modules/kea/lib/index.esm.js"),le=e("./frontend/src/lib/api.ts"),ce=e("./frontend/src/lib/utils.tsx"),N=e("./frontend/src/types.ts"),W=e("./node_modules/kea-router/lib/index.js"),De=e.n(W),ue=e("./frontend/src/lib/utils/eventUsageLogic.ts"),ve=e("./node_modules/fast-deep-equal/index.js"),B=e.n(ve),X=e("./frontend/src/scenes/teamLogic.ts"),V=e("./frontend/src/lib/dayjs.ts"),ye=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Pe=e("./frontend/src/lib/constants.tsx");function Z(t,s){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),o.push.apply(o,r)}return o}function b(t){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?Z(Object(o),!0).forEach(function(r){c()(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Z(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}var y=50,$={type:"recording",key:"duration",value:60,operator:N.z.GreaterThan},S=[],me={events:[],actions:[],new_entity:[{id:null,type:N.g.EVENTS,order:0,name:null}]},ge=Object(J.kea)({path:function(s){return["scenes","session-recordings","sessionRecordingsTableLogic",s]},key:function(s){return s.key||s.personUUID||"global"},props:{},connect:{values:[X.a,["currentTeamId"]],actions:[ue.f,["reportRecordingsListFetched","reportRecordingsListFilterAdded"]]},actions:{getSessionRecordings:!0,openSessionPlayer:function(s,o){return{sessionRecordingId:s,source:o}},closeSessionPlayer:!0,setEntityFilters:function(s){return{filters:s}},setPropertyFilters:function(s){return{filters:s}},loadNext:!0,loadPrev:!0,enableFilter:!0,setOffset:function(s){return{offset:s}},setDateRange:function(s,o){return{incomingFromDate:s,incomingToDate:o}},setDurationFilter:function(s){return{durationFilter:s}}},loaders:function(s){var o=s.props,r=s.values,i=s.actions;return{sessionRecordingsResponse:[{results:[],has_next:!1},{getSessionRecordings:function(){var P=Q()(Y.a.mark(function C(O,K){var M,L,F,d,T,R;return Y.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return L=b(b({},r.filterQueryParams),{},{person_uuid:(M=o.personUUID)!==null&&M!==void 0?M:"",limit:y}),F=Object(ce.zb)(L),g.next=4,K(100);case 4:return d=performance.now(),g.next=7,le.b.get("api/projects/".concat(r.currentTeamId,"/session_recordings?").concat(F));case 7:return T=g.sent,R=performance.now()-d,i.reportRecordingsListFetched(R),K(),g.abrupt("return",T);case 12:case"end":return g.stop()}},C)}));function j(C,O){return P.apply(this,arguments)}return j}()}]}},events:function(s){var o=s.actions;return{afterMount:function(){o.getSessionRecordings()}}},reducers:{filterEnabled:[!1,{enableFilter:function(){return!0}}],sessionRecordings:[[],{getSessionRecordingsSuccess:function(s,o){var r=o.sessionRecordingsResponse;return G()(r.results)},openSessionPlayer:function(s,o){var r=o.sessionRecordingId;return G()(s.map(function(i){return i.id===r?b(b({},i),{},{viewed:!0}):b({},i)}))}}],sessionRecordingId:[null,{openSessionPlayer:function(s,o){var r=o.sessionRecordingId;return r},closeSessionPlayer:function(){return null}}],entityFilters:[me,{setEntityFilters:function(s,o){var r=o.filters;return b({},r)}}],propertyFilters:[S,{setPropertyFilters:function(s,o){var r=o.filters;return G()(r)}}],durationFilter:[$,{setDurationFilter:function(s,o){var r=o.durationFilter;return r}}],offset:[0,{loadNext:function(s){return s+y},loadPrev:function(s){return Math.max(s-y)},setOffset:function(s,o){var r=o.offset;return r}}],fromDate:[Object(V.a)().subtract(7,"days").format("YYYY-MM-DD"),{setDateRange:function(s,o){var r=o.incomingFromDate;return r!=null?r:null}}],toDate:[null,{setDateRange:function(s,o){var r=o.incomingToDate;return r!=null?r:null}}]},listeners:function(s){var o=s.actions;return{setEntityFilters:function(){o.getSessionRecordings()},setPropertyFilters:function(){o.getSessionRecordings()},setDateRange:function(){o.getSessionRecordings()},setDurationFilter:function(){o.getSessionRecordings()},loadNext:function(){o.getSessionRecordings()},loadPrev:function(){o.getSessionRecordings()}}},selectors:{hasPrev:[function(t){return[t.offset]},function(t){return t>0}],hasNext:[function(t){return[t.sessionRecordingsResponse]},function(t){return t.has_next}],showFilters:[function(t){return[t.filterEnabled,t.entityFilters,t.propertyFilters,ye.a.selectors.featureFlags]},function(t,s,o,r){return r[Pe.n.RECORDINGS_FILTER_EXPERIMENT]==="test"||t||s!==me||o!==S}],filterQueryParams:[function(t){return[t.entityFilters,t.fromDate,t.toDate,t.offset,t.durationFilter,t.propertyFilters]},function(t,s,o,r,i,P){return{actions:t.actions,events:t.events,properties:P,date_from:s,date_to:o,offset:r,session_recording_duration:i}}]},actionToUrl:function(s){var o=s.values,r=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=arguments.length>1?arguments[1]:void 0,C=b({filters:o.filterQueryParams},P),O=b({},W.router.values.hashParams);return o.sessionRecordingId?O.sessionRecordingId=o.sessionRecordingId:delete O.sessionRecordingId,[W.router.values.location.pathname,C,O,{replace:j}]};return{loadSessionRecordings:function(){return r({},!0)},openSessionPlayer:function(P){var j=P.source;return r({source:j},!1)},closeSessionPlayer:function(){return r({},!1)},setEntityFilters:function(){return r({},!0)},setPropertyFilters:function(){return r({},!0)},setDateRange:function(){return r({},!0)},setDurationFilter:function(){return r({},!0)},loadNext:function(){return r({},!0)},loadPrev:function(){return r({},!0)}}},urlToAction:function(s){var o=s.actions,r=s.values,i=s.props,P=function(O,K,M){var L,F=(L=M.sessionRecordingId)!==null&&L!==void 0?L:null;F!==r.sessionRecordingId&&o.openSessionPlayer(F,ue.d.Direct);var d=K.filters;if(d){if((!B()(d.actions,r.entityFilters.actions)||!B()(d.events,r.entityFilters.events))&&o.setEntityFilters({events:d.events||[],actions:d.actions||[]}),!B()(d.properties,r.propertyFilters)){var T;o.setPropertyFilters((T=d.properties)!==null&&T!==void 0?T:[])}if(d.date_from!==r.fromDate||d.date_to!==r.toDate){var R,w;o.setDateRange((R=d.date_from)!==null&&R!==void 0?R:void 0,(w=d.date_to)!==null&&w!==void 0?w:void 0)}if(d.offset!==r.offset){var g;o.setOffset((g=d.offset)!==null&&g!==void 0?g:0)}if(!B()(d.session_recording_duration,r.durationFilter)){var z;o.setDurationFilter((z=d.session_recording_duration)!==null&&z!==void 0?z:$)}}},j=i.personUUID?"/person/*":"/recordings";return c()({},j,P)}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/PrimaryDashboardModal.scss":function(I,p,e){var U=e("./node_modules/css-loader/dist/runtime/api.js");p=U(!1),p.push([I.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.primary-dashboard-modal .loading-skeleton-container{padding:1rem}.primary-dashboard-modal .dashboard-list{max-height:350px;overflow-y:scroll;padding:.5rem 1rem .25rem}.primary-dashboard-modal .dashboard-list .dashboard-row{display:flex;flex:1;height:60px;padding:.5rem;margin-bottom:.25rem}.primary-dashboard-modal .dashboard-list .dashboard-row .dashboard-label-container{color:#2d2d2d;flex:1}.primary-dashboard-modal .dashboard-list .dashboard-row .dashboard-description{margin-bottom:0;max-width:300px;color:rgba(0,0,0,.5)}.primary-dashboard-modal .dashboard-list .dashboard-row .set-default-text{color:#5375ff}.primary-dashboard-modal .dashboard-list .dashboard-row .default-indicator{color:#2d2d2d;display:flex;align-items:center}",""]),I.exports=p},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(I,p,e){var U=e("./node_modules/css-loader/dist/runtime/api.js");p=U(!1),p.push([I.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.project-homepage .homepage-dashboard-header{justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .dashboard-name{margin:0}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .empty-state-container{background-color:#fafaf9;width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.project-homepage .recording-row{display:flex;flex-direction:row;width:100%;align-items:center;justify-content:center;margin-bottom:.25rem;color:#2d2d2d;font-weight:400}.project-homepage .recording-row .recording-person-text-container{flex:1;margin:0 .5rem}.project-homepage .recording-row .recording-person-text-container p{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin:0;width:160px}.project-homepage .recording-row .recording-person-text-container p.recording-person-text{font-weight:600;font-size:1rem}.project-homepage .recording-row .recording-duration{text-align:right;margin:0 .5rem 0 0}",""]),I.exports=p}}]);
