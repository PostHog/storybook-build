(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(Y,P,e){"use strict";e.r(P),e.d(P,"SessionsRecordings",function(){return k}),e.d(P,"scene",function(){return he});var S=e("./node_modules/core-js/modules/es.array.map.js"),F=e("./node_modules/core-js/modules/es.object.values.js"),C=e("./frontend/src/lib/components/PageHeader.tsx"),A=e("./frontend/src/scenes/teamLogic.tsx"),i=e("./node_modules/kea/lib/index.esm.js"),b=e("./frontend/src/scenes/urls.ts"),M=e("./frontend/src/scenes/session-recordings/playlist/sessionRecordingsListLogic.ts"),z=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),T=e("./frontend/src/lib/components/AlertMessage/index.ts"),p=e("./frontend/@posthog/lemon-ui/src/index.ts"),q=e("./frontend/src/lib/logic/featureFlagLogic.ts"),_=e("./frontend/src/lib/constants.tsx"),$=e("./node_modules/antd/es/tabs/index.js"),h=e("./frontend/src/types.ts"),ee=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),se=e.n(ee),Oe=e("./node_modules/core-js/modules/es.symbol.js"),xe=e("./node_modules/core-js/modules/es.symbol.description.js"),Pe=e("./node_modules/core-js/modules/es.regexp.exec.js"),Se=e("./node_modules/core-js/modules/es.string.search.js"),Fe=e("./node_modules/core-js/modules/es.array.concat.js"),ne=e("./node_modules/react/index.js"),Re=e("./node_modules/core-js/modules/es.object.keys.js"),Le=e("./node_modules/core-js/modules/es.array.filter.js"),Ce=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Ae=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Te=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),te=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),X=e.n(te),re=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),H=e.n(re),ae=e("./node_modules/@babel/runtime/helpers/objectDestructuringEmpty.js"),oe=e.n(ae),ie=e("./node_modules/@babel/runtime/regenerator/index.js"),R=e.n(ie),Ne=e("./node_modules/core-js/modules/es.array.iterator.js"),Ie=e("./node_modules/core-js/modules/es.object.to-string.js"),Ee=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Be=e("./node_modules/core-js/modules/es.array.find-index.js"),De=e("./node_modules/core-js/modules/es.string.starts-with.js"),Ve=e("./node_modules/core-js/modules/es.array.slice.js"),le=e("./node_modules/kea-loaders/lib/index.js"),J=e("./frontend/src/lib/api.ts"),L=e("./frontend/src/lib/utils.tsx"),N=e("./node_modules/kea-router/lib/index.js");function W(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,a)}return n}function E(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(a){H()(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}var B=30,ce={createdBy:"All users",page:1,dateFrom:"all"},de=Object(i.kea)([Object(i.path)(["scenes","session-recordings","saved-playlists","savedSessionRecordingPlaylistsLogic"]),Object(i.props)({}),Object(i.key)(function(r){return r.tab}),Object(i.actions)(function(){return{setSavedPlaylistsFilters:function(t){return{filters:t}},loadPlaylists:!0,updatePlaylist:function(t,n){return{shortId:t,playlist:n}}}}),Object(i.reducers)(function(r){return oe()(r),{filters:[ce,{setSavedPlaylistsFilters:function(n,a){var l=a.filters;return Object(L.ob)(E(E(E({},n||{}),l),"page"in l?{}:{page:1}))}}]}}),Object(le.loaders)(function(r){var t=r.values;return{playlists:{__default:{results:[],count:0,filters:null},loadPlaylists:function(){var n=X()(R.a.mark(function l(d,u){var v,f,o,m,y,O;return R.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(t.playlists.filters===null){j.next=3;break}return j.next=3,u(300);case 3:return o=E({},t.filters),m=o.createdBy==="All users"?void 0:o.createdBy,y={limit:B,offset:Math.max(0,(o.page-1)*B),order:(v=o.order)!==null&&v!==void 0?v:"-last_modified_at",created_by:m!=null?m:void 0,search:o.search||void 0,date_from:o.dateFrom&&o.dateFrom!="all"?o.dateFrom:void 0,date_to:(f=o.dateTo)!==null&&f!==void 0?f:void 0,pinned:o.pinned?!0:void 0},j.next=8,J.b.recordings.listPlaylists(Object(L.Fb)(y));case 8:return O=j.sent,j.abrupt("return",O);case 10:case"end":return j.stop()}},l)}));function a(l,d){return n.apply(this,arguments)}return a}(),updatePlaylist:function(){var n=X()(R.a.mark(function l(d){var u,v,f,o;return R.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return u=d.shortId,v=d.playlist,y.next=3,J.b.recordings.updatePlaylist(u,v);case 3:return f=y.sent,o=t.playlists.results.findIndex(function(O){return O.short_id===u}),o>-1&&(t.playlists.results[o]=f),y.abrupt("return",t.playlists);case 7:case"end":return y.stop()}},l)}));function a(l){return n.apply(this,arguments)}return a}()}}}),Object(i.listeners)(function(r){var t=r.actions;return{setSavedPlaylistsFilters:function(){t.loadPlaylists()}}}),Object(i.selectors)(function(r){var t=r.actions;return{sorting:[function(n){return[n.filters]},function(n){return n.order?n.order.startsWith("-")?{columnKey:n.order.slice(1),order:-1}:{columnKey:n.order,order:1}:{columnKey:"last_modified_at",order:-1}}],pagination:[function(n){return[n.filters,n.playlists]},function(n,a){return{controlled:!0,pageSize:B,currentPage:n.page,entryCount:a.count,onBackward:a.previous?function(){return t.setSavedPlaylistsFilters({page:n.page-1})}:void 0,onForward:a.next?function(){return t.setSavedPlaylistsFilters({page:n.page+1})}:void 0}}]}}),Object(N.actionToUrl)(function(r){var t=r.values,n=function(){if(N.router.values.location.pathname===b.a.sessionRecordings(h.X.Playlists)){var l=t.filters,d=Object(L.ob)(N.router.values.searchParams);if(!Object(L.qb)(l,d))return[b.a.sessionRecordings(h.X.Playlists),l,{},{replace:!1}]}};return{loadPlaylists:n,setSavedPlaylistsFilters:n}}),Object(N.urlToAction)(function(r){var t=r.actions,n=r.values;return H()({},b.a.sessionRecordings(h.X.Playlists),function(){var a=X()(R.a.mark(function l(d,u){var v,f;return R.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:v=n.filters,f=Object(L.ob)(u),Object(L.qb)(v,f)||t.setSavedPlaylistsFilters(f);case 3:case"end":return m.stop()}},l)}));return function(l,d){return a.apply(this,arguments)}}())}),Object(i.afterMount)(function(r){var t=r.actions;t.loadPlaylists()})]),Z=e("./node_modules/@ant-design/icons/es/icons/PushpinFilled.js"),Q=e("./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js"),ue=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),me=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),je=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),fe=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),ve=e("./frontend/@posthog/apps-common/src/index.ts"),ye=e("./frontend/src/lib/components/LemonButton/index.ts"),D=e("./frontend/src/lib/components/icons.tsx"),I=e("./frontend/src/scenes/session-recordings/sessionRecordingsLogic.ts"),s=e("./node_modules/react/jsx-runtime.js");function ge(){var r=Object(i.useActions)(I.c),t=r.saveNewPlaylist;return Object(s.jsx)("div",{className:"flex items-center justify-center",children:Object(s.jsxs)("div",{className:"max-w-lg mt-12 flex flex-col items-center",children:[Object(s.jsx)("h2",{className:"text-xl",children:"There are no playlists that match these filters"}),Object(s.jsx)("p",{className:"text-muted",children:"Once you create a playlist, it will show up here."}),Object(s.jsx)(ye.a,{size:"large",type:"primary","data-attr":"add-session-playlist-button-empty-state",icon:Object(s.jsx)(D.IconPlus,{}),onClick:function(){t({})},children:"New Playlist"})]})})}function V(r){var t=r.tab,n=de({tab:t}),a=Object(i.useValues)(n),l=a.playlists,d=a.playlistsLoading,u=a.filters,v=a.sorting,f=a.pagination,o=Object(i.useActions)(n),m=o.setSavedPlaylistsFilters,y=o.updatePlaylist,O=Object(i.useValues)(fe.a),K=O.meFirstMembers,j=[{width:0,dataIndex:"pinned",render:function(c,x){var U=x.short_id;return Object(s.jsx)(p.LemonButton,{size:"small",status:"primary-alt",onClick:function(){return y(U,{pinned:!c})},children:c?Object(s.jsx)(Z.a,{}):Object(s.jsx)(Q.a,{})})}},{title:"Name",dataIndex:"name",render:function(c,x){var U=x.short_id,G=x.description;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(p.Link,{className:"font-semibold",to:b.a.sessionRecordingPlaylist(U),children:c||"Untitled"}),G?Object(s.jsx)("div",{className:"truncate",children:G}):null]})}},Object(me.b)(),{title:"Last modified",sorter:!0,dataIndex:"last_modified_at",render:function(c){return Object(s.jsx)("div",{children:c&&typeof c=="string"&&Object(s.jsx)(ve.TZLabel,{time:c})})}}];return Object(s.jsxs)("div",{className:"space-y-4",children:[Object(s.jsxs)("div",{className:"flex justify-between gap-2 mb-2 items-center flex-wrap",children:[Object(s.jsx)(p.LemonInput,{type:"search",placeholder:"Search for playlists",onChange:function(c){return m({search:c||void 0})},value:u.search||""}),Object(s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[Object(s.jsx)("div",{className:"flex items-center gap-2",children:Object(s.jsx)(p.LemonButton,{"data-attr":"session-recording-playlist-pinned-filter",active:u.pinned,size:"small",type:"secondary",status:"stealth",center:!0,onClick:function(){return m({pinned:!u.pinned})},icon:Object(ne.cloneElement)(u.pinned?Object(s.jsx)(Z.a,{}):Object(s.jsx)(Q.a,{}),{className:"text-base flex items-center"}),children:"Pinned"})}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Last modified:"}),Object(s.jsx)(je.a,{disabled:!1,dateFrom:u.dateFrom,dateTo:u.dateTo,onChange:function(c,x){return m({dateFrom:c,dateTo:x!=null?x:void 0})},makeLabel:function(c){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ue.a,{}),Object(s.jsxs)("span",{className:"hide-when-small",children:[" ",c]})]})}})]}),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)("span",{children:"Created by:"}),Object(s.jsx)(p.LemonSelect,{size:"small",options:[{value:"All users",label:"All Users"}].concat(se()(K.map(function(g){return{value:g.user.id,label:g.user.first_name}}))),value:u.createdBy,onChange:function(c){m({createdBy:c})},dropdownMatchSelectWidth:!1})]})]})]}),!d&&l.count<1?Object(s.jsx)(ge,{}):Object(s.jsx)(p.LemonTable,{loading:d,columns:j,dataSource:l.results,pagination:f,noSortingCancellation:!0,sorting:v,onSort:function(c){return m({order:c?"".concat(c.order===-1?"-":"").concat(c.columnKey):void 0})},rowKey:"id",loadingSkeletonRows:B,nouns:["playlist","playlists"]})]})}try{V.displayName="SavedSessionRecordingPlaylists",V.__docgenInfo={description:"",displayName:"SavedSessionRecordingPlaylists",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"SessionRecordingsTabs.Playlists"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"]={docgenInfo:V.__docgenInfo,name:"SavedSessionRecordingPlaylists",path:"frontend/src/scenes/session-recordings/saved-playlists/SavedSessionRecordingPlaylists.tsx#SavedSessionRecordingPlaylists"})}catch(r){}var pe=e("./frontend/src/lib/components/Tooltip.tsx"),be=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),w=e("./frontend/src/scenes/session-recordings/settings/SessionRecordingSettings.tsx");function k(){var r=Object(i.useValues)(A.a),t=r.currentTeam,n=Object(i.useValues)(q.a),a=n.featureFlags,l=Object(i.useValues)(I.c),d=l.tab,u=l.newPlaylistLoading,v=Object(i.useActions)(I.c),f=v.saveNewPlaylist,o=!!a[_.h.RECORDING_PLAYLISTS],m=Object(i.useValues)(Object(M.c)({key:"recents",updateSearchParams:!0})),y=m.filters,O=Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(z.SessionRecordingsPlaylist,{logicKey:"recents",updateSearchParams:!0})}),K=t&&!(t!=null&&t.session_recording_opt_in);return Object(s.jsxs)("div",{children:[Object(s.jsx)(C.a,{title:Object(s.jsx)("div",{children:"Session Recordings"}),buttons:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(p.LemonButton,{type:"secondary",icon:Object(s.jsx)(D.IconSettings,{}),onClick:function(){return Object(w.b)()},children:"Configure"}),o?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(pe.a,{placement:"topRight",title:d===h.X.Recent?"Save the currently filters as a dynamic playlist":"Create a new playlist",children:Object(s.jsx)(p.LemonButton,{type:"primary",onClick:function(){return f({filters:d===h.X.Recent?y:void 0})},loading:u,"data-attr":"save-recordings-playlist-button",icon:Object(s.jsx)(D.IconPlus,{}),children:d===h.X.Recent?"Save as playlist":"Create new playlist"})})}):void 0]})}),o&&Object(s.jsx)(s.Fragment,{children:Object(s.jsx)($.a,{activeKey:d,animated:!1,style:{borderColor:"#D9D9D9"},onChange:function(g){return N.router.actions.push(b.a.sessionRecordings(g))},children:Object.values(h.X).map(function(j){return Object(s.jsx)($.a.TabPane,{tab:Object(I.b)(j)},j)})})}),K?Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsx)(T.a,{type:"info",action:{type:"secondary",icon:Object(s.jsx)(D.IconSettings,{}),onClick:function(){return Object(w.b)()},children:"Configure"},children:"Session recordings are currently disabled for this project."})}):null,o?d?d===h.X.Recent?O:Object(s.jsx)(V,{tab:h.X.Playlists}):Object(s.jsx)(be.a,{}):O]})}var he={component:k,logic:I.c}},"./node_modules/@ant-design/icons/es/icons/PushpinFilled.js":function(Y,P,e){"use strict";var S=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),F=e("./node_modules/react/index.js"),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},A=C,i=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(T,p){return F.createElement(i.a,Object(S.a)(Object(S.a)({},T),{},{ref:p,icon:A}))};b.displayName="PushpinFilled";var M=P.a=F.forwardRef(b)},"./node_modules/@ant-design/icons/es/icons/PushpinOutlined.js":function(Y,P,e){"use strict";var S=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),F=e("./node_modules/react/index.js"),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},A=C,i=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),b=function(T,p){return F.createElement(i.a,Object(S.a)(Object(S.a)({},T),{},{ref:p,icon:A}))};b.displayName="PushpinOutlined";var M=P.a=F.forwardRef(b)}}]);
