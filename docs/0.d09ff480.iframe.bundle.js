(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/RestrictedArea.tsx":function(ge,S,e){"use strict";e.d(S,"b",function(){return x}),e.d(S,"a",function(){return W});var G=e("./node_modules/core-js/modules/es.array.concat.js"),le=e.n(G),ie=e("./node_modules/kea/lib/index.esm.js"),ce=e("./node_modules/react/index.js"),X=e.n(ce),q=e("./frontend/src/scenes/organizationLogic.tsx"),ee=e("./frontend/src/lib/constants.tsx"),N=e("./frontend/src/lib/components/Tooltip.tsx"),ue=e("./frontend/src/lib/utils/permissioning.ts"),te=e("./frontend/src/scenes/teamLogic.tsx"),x;(function(b){b.Organization="organization",b.Project="project"})(x||(x={}));function W(b){var V=b.Component,he=b.minimumAccessLevel,H=b.scope,de=H===void 0?x.Organization:H,je=Object(ie.useValues)(q.a),t=je.currentOrganization,R=Object(ie.useValues)(te.a),ye=R.currentTeam,w=Object(ce.useMemo)(function(){var B;if(de===x.Project){if(!ye)return"Loading current project\u2026";B=ye.effective_membership_level}else{if(!t)return"Loading current organization\u2026";B=t.membership_level}return B===null?"You don't have access to the current ".concat(de,"."):B<he?he===ee.m.Owner?"This area is restricted to the ".concat(de," owner."):"This area is restricted to ".concat(de," ").concat(ue.b.get(he),"s and up. Your level is ").concat(ue.b.get(B),"."):null},[t]);return w?X.a.createElement(N.a,{title:w,placement:"topLeft",delayMs:0},X.a.createElement("span",null,X.a.createElement(V,{isRestricted:!0,restrictionReason:w}))):X.a.createElement(V,{isRestricted:!1,restrictionReason:null})}try{W.displayName="RestrictedArea",W.__docgenInfo={description:"",displayName:"RestrictedArea",props:{Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"(props: RestrictedComponentProps) => Element"}},minimumAccessLevel:{defaultValue:null,description:"",name:"minimumAccessLevel",required:!0,type:{name:"enum",value:[{value:"1"},{value:"8"},{value:"15"},{value:"1"},{value:"8"}]}},scope:{defaultValue:{value:"RestrictionScope.Organization"},description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"organization"'},{value:'"project"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"]={docgenInfo:W.__docgenInfo,name:"RestrictedArea",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictedArea"})}catch(b){}try{x.Organization.displayName="RestrictionScope.Organization",x.Organization.__docgenInfo={description:"Current organization-wide membership level will be used.",displayName:"RestrictionScope.Organization",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"]={docgenInfo:x.Organization.__docgenInfo,name:"RestrictionScope.Organization",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Organization"})}catch(b){}try{x.Project.displayName="RestrictionScope.Project",x.Project.__docgenInfo={description:"Effective level for the current project will be used.",displayName:"RestrictionScope.Project",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"]={docgenInfo:x.Project.__docgenInfo,name:"RestrictionScope.Project",path:"frontend/src/lib/components/RestrictedArea.tsx#RestrictionScope.Project"})}catch(b){}},"./frontend/src/scenes/actions/EventName.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return q}),e.d(S,"b",function(){return ee});var G=e("./node_modules/react/index.js"),le=e.n(G),ie=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ce=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),X=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function q(N){var ue=N.value,te=N.onChange;return le.a.createElement(ce.d,{groupType:X.a.Events,onChange:te,value:ue,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(W){return le.a.createElement(ie.a,{value:W,disablePopover:!0})},allowClear:!0})}function ee(N){var ue=N.value,te=N.onChange;return le.a.createElement(ce.b,{groupType:X.a.Events,onChange:te,value:ue,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(W){return le.a.createElement(ie.a,{value:W,disablePopover:!0})},allowClear:!0})}try{q.displayName="EventName",q.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:q.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(N){}try{ee.displayName="LemonEventName",ee.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:ee.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(N){}},"./frontend/src/scenes/events/EventDetails.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return ve});var G=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),le=e.n(G),ie=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ce=e.n(ie),X=e("./node_modules/core-js/modules/es.object.keys.js"),q=e("./node_modules/core-js/modules/es.symbol.js"),ee=e("./node_modules/core-js/modules/es.array.filter.js"),N=e("./node_modules/core-js/modules/es.object.to-string.js"),ue=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),te=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),x=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),W=e("./node_modules/react/index.js"),b=e.n(W),V=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),he=e("./frontend/src/lib/components/PropertiesTable.tsx"),H=e("./frontend/src/scenes/events/EventElements.tsx"),de=e("./node_modules/antd/es/tabs/index.js"),je=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),t=e.n(je),R=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),ye=e("./frontend/src/lib/utils.tsx"),w=["event","id","uuid","distinct_id","properties","elements","timestamp","person"];function B(E,c){var j=Object.keys(E);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(E);c&&(g=g.filter(function(U){return Object.getOwnPropertyDescriptor(E,U).enumerable})),j.push.apply(j,g)}return j}function me(E){for(var c=1;c<arguments.length;c++){var j=arguments[c]!=null?arguments[c]:{};c%2?B(Object(j),!0).forEach(function(g){le()(E,g,j[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(j)):B(Object(j)).forEach(function(g){Object.defineProperty(E,g,Object.getOwnPropertyDescriptor(j,g))})}return E}function ne(E){var c=E.event,j=c.event,g=c.id,U=c.uuid,Q=c.distinct_id,Se=c.properties,se=c.elements,De=c.timestamp,Le=c.person,_e=t()(c,w),z=me(me(me(me({},g?{id:g}:null),U?{uuid:U}:null),{},{timestamp:De,event:j,distinct_id:Q,properties:Object(ye.zb)(Se)},se&&se.length>0?{elements:se}:null),_e);return b.a.createElement(R.a,{language:R.b.JSON},JSON.stringify(z,null,4))}try{ne.displayName="EventJSON",ne.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:ne.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(E){}var Ne=e("./frontend/src/lib/dayjs.ts"),re=e("./frontend/src/lib/components/LemonButton/index.ts");function oe(E,c){var j=Object.keys(E);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(E);c&&(g=g.filter(function(U){return Object.getOwnPropertyDescriptor(E,U).enumerable})),j.push.apply(j,g)}return j}function L(E){for(var c=1;c<arguments.length;c++){var j=arguments[c]!=null?arguments[c]:{};c%2?oe(Object(j),!0).forEach(function(g){le()(E,g,j[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(j)):oe(Object(j)).forEach(function(g){Object.defineProperty(E,g,Object.getOwnPropertyDescriptor(j,g))})}return E}var Ae=de.a.TabPane;function ve(E){for(var c=E.event,j=Object(W.useState)(!1),g=ce()(j,2),U=g[0],Q=g[1],Se={},se={},De=0,Le=0,_e=Object.keys(c.properties);Le<_e.length;Le++){var z=_e[Le];V.e.event[z]&&V.e.event[z].hide&&(De+=1,U&&(se[z]=c.properties[z])),(!V.e.event[z]||!V.e.event[z].hide)&&(Se[z]=c.properties[z])}return b.a.createElement(de.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},b.a.createElement(Ae,{tab:"Properties",key:"properties"},b.a.createElement(he.a,{properties:L(L({$timestamp:Object(Ne.a)(c.timestamp).toISOString()},Se),se),useDetectedPropertyType:!0}),De>0&&b.a.createElement(re.a,{className:"mb-05",onClick:function(){return Q(!U)},size:"small"},U?"Hide":"Show"," ",Object(ye.rb)(De,"hidden property","hidden properties"))),b.a.createElement(Ae,{tab:"JSON",key:"json"},b.a.createElement(ne,{event:c})),c.elements&&c.elements.length>0&&b.a.createElement(Ae,{tab:"Elements",key:"elements"},b.a.createElement(H.a,{event:c})))}try{ve.displayName="EventDetails",ve.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:ve.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(E){}},"./frontend/src/scenes/events/EventElements.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return me});var G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),le=e.n(G),ie=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ce=e.n(ie),X=e("./node_modules/core-js/modules/es.array.join.js"),q=e.n(X),ee=e("./node_modules/core-js/modules/es.array.fill.js"),N=e.n(ee),ue=e("./node_modules/core-js/modules/es.array.slice.js"),te=e.n(ue),x=e("./node_modules/core-js/modules/es.array.map.js"),W=e.n(x),b=e("./node_modules/core-js/modules/es.object.entries.js"),V=e.n(b),he=e("./node_modules/core-js/modules/es.array.concat.js"),H=e.n(he),de=e("./node_modules/core-js/modules/es.regexp.exec.js"),je=e.n(de),t=e("./node_modules/core-js/modules/es.string.replace.js"),R=e.n(t),ye=e("./node_modules/react/index.js"),w=e.n(ye);function B(ne){return Array(ne).fill("    ").join("")}function me(ne){var Ne=ne.event,re=ce()(Ne.elements||[]).reverse();return re=re.slice(Math.max(re.length-10,1)),w.a.createElement("div",null,re.map(function(oe,L){return w.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0,backgroundColor:L===re.length-1?"var(--primary)":void 0}},B(L),"<",oe.tag_name,oe.attr_id&&' id="'.concat(oe.attr_id,'"'),Object.entries(oe.attributes).map(function(Ae){var ve=le()(Ae,2),E=ve[0],c=ve[1];return w.a.createElement("span",{key:E}," ".concat(E.replace("attr__",""),'="').concat(c,'"'))}),">",oe.text,L===re.length-1&&w.a.createElement("span",null,"</",oe.tag_name,">"))}),ce()(re).reverse().slice(1).map(function(oe,L){return w.a.createElement("pre",{className:"code",key:L,style:{margin:0,padding:0,borderRadius:0}},B(re.length-L-2),"</",oe.tag_name,">")}))}try{me.displayName="EventElements",me.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:me.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(ne){}},"./frontend/src/scenes/events/EventsTable.tsx":function(ge,S,e){"use strict";e.d(S,"a",function(){return st});var G=e("./node_modules/core-js/modules/es.symbol.js"),le=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ie=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ce=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),X=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),q=e.n(X),ee=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),N=e.n(ee),ue=e("./node_modules/core-js/modules/es.array.splice.js"),te=e("./node_modules/core-js/modules/es.array.filter.js"),x=e("./node_modules/core-js/modules/es.object.to-string.js"),W=e("./node_modules/core-js/modules/es.array.map.js"),b=e("./node_modules/core-js/modules/es.array.find.js"),V=e("./node_modules/core-js/modules/es.array.concat.js"),he=e("./node_modules/core-js/modules/es.array.join.js"),H=e("./node_modules/core-js/modules/es.object.keys.js"),de=e("./node_modules/core-js/modules/es.regexp.to-string.js"),je=e("./node_modules/react/index.js"),t=e.n(je),R=e("./node_modules/kea/lib/index.esm.js"),ye=e("./frontend/src/scenes/events/EventDetails.tsx"),w=e("./frontend/src/lib/components/Link.tsx"),B=e("./node_modules/antd/es/button/index.js"),me=e("./node_modules/kea-router/lib/index.js"),ne=e("./node_modules/@babel/runtime/helpers/typeof.js"),Ne=e.n(ne),re=e("./node_modules/core-js/modules/es.regexp.exec.js"),oe=e("./node_modules/core-js/modules/es.string.replace.js");function L(n){var o=n.value;return t.a.createElement("span",{title:o},Ne()(o)==="object"?JSON.stringify(o):o&&o.toString().replace(/(^\w+:|^)\/\//,""))}try{L.displayName="Property",L.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:L.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(n){}var Ae=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function ve(n,o){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(T){return Object.getOwnPropertyDescriptor(n,T).enumerable})),i.push.apply(i,u)}return i}function E(n){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?ve(Object(i),!0).forEach(function(u){q()(n,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ve(Object(i)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(i,u))})}return n}function c(n){var o=n.property,i=n.value,u=n.filters,T=n.onClick,Y=n.className,M=Object(Ae.c)(u.properties),Re=M.find(function(Z){return Z.key===o&&Z.value===i&&!Z.operator})?M.filter(function(Z){return Z.key!==o||Z.value!==i||Z.operator}):[].concat(N()(M),[{key:o,value:i}]),Ge=Object(me.combineUrl)(window.location.pathname,E(E({},u),{},{properties:Re}),{}),Me=Ge.url;return t.a.createElement(w.a,{to:Me,className:Y,onClick:function(){T&&T(o,i)}},t.a.createElement(L,{value:i}))}try{c.displayName="FilterPropertyLink",c.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:c.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(n){}var j=e("./frontend/src/lib/utils.tsx"),g=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),U=e.n(g),Q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),Se=e.n(Q),se={};se.insert="head",se.singleton=!1;var De=U()(Se.a,se),Le=Se.a.locals||{},_e=e("./frontend/src/scenes/events/eventsTableLogic.ts"),z=e("./frontend/src/scenes/persons/PersonHeader.tsx"),tt=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),Ue=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Fe=e("./frontend/src/types.ts"),nt=e("./frontend/src/scenes/actions/EventName.tsx"),pe=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),we=e("./frontend/src/lib/components/Tooltip.tsx"),ze=e("./node_modules/clsx/dist/clsx.m.js"),be=Object(R.kea)({path:["lib","components","ResizableTable","tableConfigLogic"],props:{startingColumns:"DEFAULT"},actions:{showModal:!0,hideModal:!0,setSelectedColumns:function(o){return{columnConfig:o}}},reducers:function(o){var i=o.props;return{selectedColumns:[i.startingColumns||"DEFAULT",{setSelectedColumns:function(T,Y){var M=Y.columnConfig;return M}}],modalVisible:[!1,{showModal:function(){return!0},hideModal:function(){return!1},setSelectedColumns:function(){return!1}}]}},selectors:{tableWidth:[function(n){return[n.selectedColumns]},function(n){return n==="DEFAULT"?7:n.length+2}]}}),$e=e("./frontend/src/scenes/urls.ts"),Ye=e("./frontend/src/lib/components/LemonTable/index.ts"),We=e("./frontend/src/lib/components/icons.tsx"),v=e("./frontend/src/lib/components/LemonButton/index.ts"),r=e("./frontend/src/lib/components/LemonButton/More.tsx"),s=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),l=e("./frontend/src/scenes/teamLogic.tsx"),f=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function a(n){Object(je.useEffect)(function(){var o="hidden",i="visibilitychange";typeof document.msHidden!="undefined"?(o="msHidden",i="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(o="webkitHidden",i="webkitvisibilitychange");var u=function(){n(!document[o])};return document.addEventListener(i,u),function(){document.removeEventListener(i,u)}},[])}var m=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),d=e.n(m),p=e("./node_modules/core-js/modules/es.array.includes.js"),fe=e("./node_modules/core-js/modules/es.string.includes.js"),$=e("./node_modules/antd/es/row/index.js"),Pe=e("./node_modules/antd/es/space/index.js"),Ee=e("./node_modules/antd/es/col/index.js"),Ce=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),P=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),He=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss"),Je=e.n(He),C={};C.insert="head",C.singleton=!1;var bt=U()(Je.a,C),ft=Je.a.locals||{},Et=e("./node_modules/antd/lib/modal/Modal.js"),rt=e.n(Et),Pt=e("./node_modules/react-virtualized/dist/es/List/index.js"),xe=e("./node_modules/react-virtualized/dist/es/AutoSizer/index.js"),nn=e("./node_modules/core-js/modules/es.array.from.js"),rn=e("./node_modules/core-js/modules/es.string.iterator.js"),on=e("./node_modules/core-js/modules/es.array.iterator.js"),sn=e("./node_modules/core-js/modules/es.set.js"),an=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),xt=Object(R.kea)({path:["lib","components","ResizableTable","columnConfiguratorLogic"],props:{selectedColumns:[]},connect:[be],actions:{selectColumn:function(o){return{column:o}},unselectColumn:function(o){return{column:o}},resetColumns:function(o){return{columns:o}},setColumns:function(o){return{columns:o}},toggleSaveAsDefault:!0,save:!0},reducers:function(o){var i=o.props;return{selectedColumns:[i.selectedColumns,{selectColumn:function(T,Y){var M=Y.column;return Array.from(new Set([].concat(N()(T),[M])))},unselectColumn:function(T,Y){var M=Y.column;return T.filter(function(Re){return Re!==M})},resetColumns:function(T,Y){var M=Y.columns;return M},setColumns:function(T,Y){var M=Y.columns;return M}}],saveAsDefault:[!1,{toggleSaveAsDefault:function(T){return!T}}]}},listeners:function(o){var i=o.values,u=o.actions;return{save:function(){be.actions.setSelectedColumns(i.selectedColumns),i.saveAsDefault&&(l.a.actions.updateCurrentTeam({live_events_columns:i.selectedColumns}),u.toggleSaveAsDefault())}}}}),Rt=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),Ct=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Mt=e("./frontend/src/lib/components/LemonCheckbox/index.ts"),gt=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),Tt=e("./frontend/src/lib/components/RestrictedArea.tsx"),It=e("./frontend/src/lib/constants.tsx"),Bt=Object(gt.c)(function(){return t.a.createElement("span",{className:"drag-handle"},t.a.createElement(We.SortableDragIcon,null))});function ot(n){var o=Object(R.useActions)(be),i=o.showModal;return t.a.createElement(t.a.Fragment,null,t.a.createElement(v.a,{type:"secondary","data-attr":"events-table-column-selector",onClick:i,icon:t.a.createElement(We.IconTuning,{style:{color:"var(--primary)"}})},"Configure columns"),t.a.createElement(Kt,{immutableColumns:n.immutableColumns,defaultColumns:n.defaultColumns}))}function Kt(n){var o=n.immutableColumns,i=n.defaultColumns,u=36,T=32,Y=Object(R.useValues)(be),M=Y.selectedColumns,Re=Y.modalVisible,Ge=Object(R.useActions)(be),Me=Ge.hideModal,Z=xt({selectedColumns:M==="DEFAULT"?i:M}),Te=Object(R.useActions)(Z),at=Te.selectColumn,lt=Te.unselectColumn,it=Te.resetColumns,ct=Te.setColumns,Xe=Te.toggleSaveAsDefault,Qe=Te.save,Ze=Object(R.useValues)(Z),Oe=Ze.selectedColumns;function yt(J){var F=J.isRestricted;return t.a.createElement(Mt.a,{label:"Save as default for all project members",className:"save-as-default-button mt","data-attr":"events-table-save-columns-as-default-toggle",onChange:Xe,defaultChecked:!1,disabled:F})}var ke=function(F){var I=F.column,ae=F.disabled;return t.a.createElement("div",{className:Object(ze.a)(["column-display-item",{selected:!ae,disabled:ae}]),style:{height:"".concat(T,"px")}},!ae&&t.a.createElement(Bt,null),t.a.createElement(Ue.a,{value:I}),t.a.createElement("div",{className:"text-right",style:{flex:1}},t.a.createElement(we.a,{title:ae?"Reserved":"Remove"},ae?t.a.createElement(Ce.a,null):t.a.createElement(P.a,{"data-attr":"column-display-item-remove-icon",style:{color:"var(--danger)"},onClick:function(){return lt(I)}}))))},_t=Object(gt.b)(ke),ut=function(F){var I=F.index,ae=F.style,K=F.key,k=o==null?void 0:o.includes(Oe[I]);return t.a.createElement("div",{style:ae,key:K},k&&t.a.createElement(ke,{column:Oe[I],disabled:Boolean(k)}),!k&&t.a.createElement(_t,{column:Oe[I],index:I,collection:"selected-columns"}))},dt=Object(gt.a)(function(){return t.a.createElement("div",{style:{height:320},className:"selected-columns-col"},t.a.createElement(xe.a,null,function(J){var F=J.height,I=J.width;return t.a.createElement(Pt.b,{height:F,rowCount:Oe.length,rowRenderer:ut,rowHeight:u,width:I})}))}),mt=function(F){var I=F.oldIndex,ae=F.newIndex,K=N()(Oe),k=K.splice(I,1),ht=d()(k,1),vt=ht[0];K.splice(ae,0,vt),ct(K)};return t.a.createElement(rt.a,{id:"column-configurator-modal",centered:!0,visible:Re,title:"Configure columns",onOk:Qe,width:700,bodyStyle:{padding:"16px 16px 0 16px"},className:"column-configurator-modal",okButtonProps:{"data-attr":"items-selector-confirm"},okText:"Save",onCancel:Me,footer:t.a.createElement($.a,null,t.a.createElement(Pe.b,{style:{flexGrow:1},align:"start"},t.a.createElement(B.a,{className:"text-blue",onClick:function(){return it(i)}},"Reset to defaults")),t.a.createElement(Pe.b,null,t.a.createElement(B.a,{className:"text-blue",type:"text",onClick:Me},"Close"),t.a.createElement(B.a,{type:"primary",onClick:Qe},"Save")))},t.a.createElement("div",{className:"main-content"},t.a.createElement($.a,{gutter:16,className:"lists"},t.a.createElement(Ee.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Visible columns (",Oe.length,") - Drag to reorder"),t.a.createElement(dt,{helperClass:"column-configurator-modal-sortable-container",onSortEnd:mt,distance:5,useDragHandle:!0,lockAxis:"y"})),t.a.createElement(Ee.a,{xs:24,sm:12},t.a.createElement("h4",{className:"secondary uppercase text-muted"},"Available columns"),t.a.createElement("div",{style:{height:320}},t.a.createElement(xe.a,null,function(J){var F=J.height,I=J.width;return t.a.createElement(Rt.a,{height:F,width:I,taxonomicGroupTypes:[Ct.a.EventProperties],value:void 0,onChange:function(K,k){return k&&at(String(k))},popoverEnabled:!1,selectFirstItem:!1,excludedProperties:q()({},Ct.a.EventProperties,Oe)})})))),t.a.createElement(Tt.a,{Component:yt,minimumAccessLevel:It.m.Owner,scope:Tt.b.Project})))}try{ot.displayName="LemonTableConfig",ot.__docgenInfo={description:"",displayName:"LemonTableConfig",props:{immutableColumns:{defaultValue:null,description:"",name:"immutableColumns",required:!1,type:{name:"string[]"}},defaultColumns:{defaultValue:null,description:"",name:"defaultColumns",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"]={docgenInfo:ot.__docgenInfo,name:"LemonTableConfig",path:"frontend/src/lib/components/ResizableTable/TableConfig.tsx#LemonTableConfig"})}catch(n){}var Nt=e("./frontend/src/lib/utils/eventUsageLogic.ts"),Ut=e("./frontend/src/scenes/events/EventBufferNotice.tsx");function At(n,o){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(T){return Object.getOwnPropertyDescriptor(n,T).enumerable})),i.push.apply(i,u)}return i}function St(n){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?At(Object(i),!0).forEach(function(u){q()(n,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):At(Object(i)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(i,u))})}return n}function st(n){var o,i=n.pageKey,u=n.fixedFilters,T=n.fixedColumns,Y=n.sceneUrl,M=n.fetchMonths,Re=M===void 0?12:M,Ge=n.startingColumns,Me=n.showCustomizeColumns,Z=Me===void 0?!0:Me,Te=n.showExport,at=Te===void 0?!0:Te,lt=n.showAutoload,it=lt===void 0?!0:lt,ct=n.showEventFilter,Xe=ct===void 0?!0:ct,Qe=n.showPropertyFilter,Ze=Qe===void 0?!0:Qe,Oe=n.showRowExpanders,yt=Oe===void 0?!0:Oe,ke=n.showActionsButton,_t=ke===void 0?!0:ke,ut=n.showPersonColumn,dt=ut===void 0?!0:ut,mt=n.linkPropertiesToFilters,J=mt===void 0?!0:mt,F=Object(R.useValues)(l.a),I=F.currentTeam,ae=Object(_e.a)({fixedFilters:u,key:i,sceneUrl:Y||$e.a.events(),fetchMonths:Re}),K=Object(R.useValues)(ae),k=K.properties,ht=K.eventsFormatted,vt=K.isLoading,Ft=K.hasNext,Dt=K.isLoadingNext,pt=K.eventFilter,Wt=K.automaticLoadEnabled,Vt=K.exportUrl,wt=K.highlightEvents,zt=K.months,Lt=Object(R.useValues)(be({startingColumns:(o=I&&I.live_events_columns)!==null&&o!==void 0?o:Ge})),qe=Lt.tableWidth,Ve=Lt.selectedColumns,Ie=Object(R.useActions)(ae),$t=Ie.fetchNextEvents,Yt=Ie.prependNewEvents,Ht=Ie.setEventFilter,Jt=Ie.toggleAutomaticLoad,Gt=Ie.startDownload,Xt=Ie.setPollingActive,Qt=Ie.setProperties,Zt=!(u!=null&&u.person_id),kt=Object(R.useActions)(Nt.f),qt=kt.reportEventsTablePollingReactedToPageVisibility;a(function(A){Xt(A),qt(A)});var jt=function(y,_){var D=y.date_break,h=y.new_events;return{children:D||(h?t.a.createElement(v.a,{icon:t.a.createElement(We.IconSync,null),style:{borderRadius:0},onClick:function(){return Yt()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:_+1,style:h?{padding:0}:void 0}}},en={title:"Person",key:"person",render:function(y,_){var D,h,O=_.event;return O?Zt&&(D=O.person)!==null&&D!==void 0&&(h=D.distinct_ids)!==null&&h!==void 0&&h.length?t.a.createElement(w.a,{to:$e.a.person(O.person.distinct_ids[0])},t.a.createElement(z.a,{noLink:!0,withIcon:!0,person:O.person})):t.a.createElement(z.a,{withIcon:!0,person:O.person}):{props:{colSpan:0}}}},Ot=Object(je.useMemo)(function(){var A=[{title:"Event",key:"event",width:"16rem",render:function(_,D){if(!D.event)return jt(D,qe);var h=D.event;return t.a.createElement(Ue.a,{value:Object(j.f)(h)})}},{title:"URL / Screen",key:"url",width:"4rem",render:function(_,D){var h=D.event;if(!h)return{props:{colSpan:0}};var O=h.properties.$current_url?"$current_url":"$screen_name";return J?t.a.createElement(c,{className:"ph-no-capture",property:O,value:h.properties[O],filters:{properties:k}}):t.a.createElement(L,{value:h.properties[O]})}},{title:t.a.createElement(we.a,{title:'This is the "Library" property on events. Sent by the SDK as "$lib"'},"Source"),key:"source",render:function(_,D){var h=D.event;return h?J?t.a.createElement(c,{property:"$lib",value:h.properties.$lib,filters:{properties:k}}):t.a.createElement(L,{value:h.properties.$lib}):{props:{colSpan:0}}}}];return dt&&A.splice(1,0,en),A},[qe]),tn=Object(je.useMemo)(function(){var A=[];if(Ve==="DEFAULT")A=N()(Ot);else{var y=dt?Ve:Ve.filter(function(_){return _!=="person"});A=y.map(function(_,D){var h=Ot.find(function(O){return O.key===_});return h?St(St({},h),{},{render:function(Be,Ke){var et=Ke.event;return et?h.render?h.render(Be,Ke,D):{props:{colSpan:0}}:D===0?jt(Ke,qe):{props:{colSpan:0}}}}):{title:Ue.e.event[_]?Ue.e.event[_].label:_,key:_,render:function(Be,Ke){var et=Ke.event;return et?J?t.a.createElement(c,{className:"ph-no-capture ",property:_,value:et.properties[_],filters:{properties:k}}):t.a.createElement(L,{value:et.properties[_]}):D===0?jt(Ke,qe):{props:{colSpan:0}}}}})}return A.push({title:"Time",key:"time",render:function(D,h){var O=h.event;return O?t.a.createElement(tt.b,{time:O.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),_t&&A.push({key:"actions",width:0,render:function(D,h){var O=h.event;if(!O)return{props:{colSpan:0}};var Be;return O.event==="$pageview"?Be={insight:Fe.A.TRENDS,interval:"day",display:Fe.j.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:O.properties.$current_url,type:"event"}]}]}:O.event!=="$autocapture"&&(Be={insight:Fe.A.TRENDS,interval:"day",display:Fe.j.ActionsLineGraph,actions:[],events:[{id:O.event,name:O.event,type:"events",order:0,properties:[]}]}),t.a.createElement(r.a,{overlay:t.a.createElement(t.a.Fragment,null,I&&t.a.createElement(v.a,{type:"stealth",onClick:function(){return Object(f.a)(I.id,O,0,I.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),Be&&t.a.createElement(v.a,{type:"stealth",to:$e.a.insightNew(Be),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),T?A.concat(T):A},[Ve,qe]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table"},(Xe||Ze)&&t.a.createElement("div",{className:"flex pt pb space-x border-top"},Xe&&t.a.createElement(nt.b,{value:pt,onChange:function(y){Ht(y||"")}}),Ze&&t.a.createElement(pe.a,{propertyFilters:k,onChange:Qt,pageKey:i,style:{marginBottom:0,marginTop:0},eventNames:pt?[pt]:[],useLemonButton:!0})),it||Z||at?t.a.createElement("div",{className:Object(ze.a)("space-between-items pt mb",(Xe||Ze)&&"border-top")},it&&t.a.createElement(s.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:Wt,onChange:Jt}),t.a.createElement("div",{className:"flex space-x-05"},Z&&t.a.createElement(ot,{immutableColumns:["event","person"],defaultColumns:Ot.map(function(A){return A.key||""})}),at&&Vt&&t.a.createElement(we.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(v.a,{type:"secondary",icon:t.a.createElement(We.IconExport,{style:{color:"var(--primary)"}}),onClick:Gt},"Export")))):null,t.a.createElement(Ut.a,{additionalInfo:" \u2013 this helps ensure accuracy of insights grouped by unique users"}),t.a.createElement(Ye.a,{dataSource:ht,loading:vt,columns:tn,key:Ve==="DEFAULT"?"default":Ve.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:vt?void 0:k.some(function(A){return Object.keys(A).length})||pt?"No events matching filters found in the last ".concat(zt," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(w.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(y){var _;return y.event?y.event.id+"-"+y.event.event:((_=y.date_break)===null||_===void 0?void 0:_.toString())||""},rowClassName:function(y){return Object(ze.a)({"event-row":y.event,highlighted:y.event&&wt[y.event.id],"event-row-is-exception":y.event&&y.event.event==="$exception","event-row-date-separator":y.date_break,"event-row-new":y.new_events})},expandable:yt?{expandedRowRender:function(y){var _=y.event;return _&&t.a.createElement(ye.a,{event:_})},rowExpandable:function(y){var _=y.event,D=y.date_break,h=y.new_events;return D||h?-1:!!_}}:void 0}),t.a.createElement(B.a,{type:"primary",onClick:$t,loading:Dt,style:{display:Ft||Dt?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{st.displayName="EventsTable",st.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showPropertyFilter:{defaultValue:{value:"true"},description:"",name:"showPropertyFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:st.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(n){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(ge,S,e){"use strict";e.d(S,"a",function(){return We});var G=e("./node_modules/core-js/modules/es.object.keys.js"),le=e.n(G),ie=e("./node_modules/core-js/modules/es.symbol.js"),ce=e.n(ie),X=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),q=e.n(X),ee=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),N=e.n(ee),ue=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),te=e.n(ue),x=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),W=e.n(x),b=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),V=e.n(b),he=e("./node_modules/@babel/runtime/regenerator/index.js"),H=e.n(he),de=e("./node_modules/core-js/modules/es.array.map.js"),je=e.n(de),t=e("./node_modules/core-js/modules/es.object.to-string.js"),R=e.n(t),ye=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),w=e.n(ye),B=e("./node_modules/core-js/modules/es.array.splice.js"),me=e.n(B),ne=e("./node_modules/core-js/modules/es.array.join.js"),Ne=e.n(ne),re=e("./node_modules/core-js/modules/es.array.filter.js"),oe=e.n(re),L=e("./node_modules/core-js/modules/es.array.concat.js"),Ae=e.n(L),ve=e("./node_modules/core-js/modules/es.array.iterator.js"),E=e.n(ve),c=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),j=e.n(c),g=e("./node_modules/kea/lib/index.esm.js"),U=e("./frontend/src/lib/utils.tsx"),Q=e("./node_modules/kea-router/lib/index.js"),Se=e.n(Q),se=e("./frontend/src/lib/api.ts"),De=e("./frontend/src/types.ts"),Le=e("./frontend/src/scenes/teamLogic.tsx"),_e=e("./frontend/src/lib/dayjs.ts"),z=e("./frontend/src/lib/components/lemonToast.tsx"),tt=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Ue=e("./frontend/src/lib/constants.tsx"),Fe=e("./frontend/src/lib/components/ExportButton/exporter.ts");function nt(v,r){var s=Object.keys(v);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(v);r&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(v,f).enumerable})),s.push.apply(s,l)}return s}function pe(v){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?nt(Object(s),!0).forEach(function(l){W()(v,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(s)):nt(Object(s)).forEach(function(l){Object.defineProperty(v,l,Object.getOwnPropertyDescriptor(s,l))})}return v}var we=5,ze=365,be=5e3,$e=function(r,s){var l=[];return l=r.map(function(f){return{event:f}}),l.forEach(function(f,a){var m=l[a-1];a>0&&f.event&&m.event&&!Object(_e.a)(f.event.timestamp).isSame(m.event.timestamp,"day")&&l.splice(a,0,{date_break:Object(_e.a)(f.event.timestamp).format("LL")})}),s.length>0&&l.splice(0,0,{new_events:!0}),l},Ye=function(r){return Object(_e.b)().subtract(r,"day").toISOString()},We=Object(g.kea)({path:function(r){return["scenes","events","eventsTableLogic",r]},props:{},key:function(r){return[r.fixedFilters?JSON.stringify(r.fixedFilters):"all",r.key,r.sceneUrl].filter(function(s){return!!s}).join("-")},connect:{values:[Le.a,["currentTeamId"],tt.a,["featureFlags"]]},actions:{setPollingActive:function(r){return{pollingActive:r}},setProperties:function(r){return Array.isArray(r)?r.length===0?{properties:[{}]}:{properties:r}:{properties:[r]}},fetchEvents:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:r}},fetchEventsSuccess:function(r){return r},fetchNextEvents:!0,fetchOrPollFailure:function(r){return{error:r}},pollEvents:!0,pollEventsSuccess:function(r){return{events:r}},prependEvents:function(r){return{events:r}},prependNewEvents:!0,setSelectedEvent:function(r){return{selectedEvent:r}},setPollTimeout:function(r){return{pollTimeout:r}},setEventFilter:function(r){return{event:r}},toggleAutomaticLoad:function(r){return{automaticLoadEnabled:r}},noop:function(r){return r},startDownload:!0},reducers:function(r){var s,l,f=r.props;return{pollingIsActive:[!0,{setPollingActive:function(m,d){var p=d.pollingActive;return p},pollEventsSuccess:function(m,d){var p=d.events;return p&&p.length?!1:m},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(m,d){var p=d.properties;return Object(U.s)(p)}}],eventFilter:[(s=(l=f.fixedFilters)===null||l===void 0?void 0:l.event_filter)!==null&&s!==void 0?s:"",{setEventFilter:function(m,d){var p=d.event;return p}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(m,d){var p=d.events,fe=d.isNext;return fe?[].concat(V()(m),V()(p)):p},prependEvents:function(m,d){var p=d.events;return[].concat(V()(p),V()(m))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(m,d){var p=d.hasNext;return p}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(m,d){var p=d.selectedEvent;return p}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(m,d){var p=d.events;return p||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(m,d){var p=d.events;return p.reduce(function(fe,$){return fe[$.id]=!0,fe},{})}}],pollTimeout:[0,{setPollTimeout:function(m,d){return d.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(m,d){var p=d.automaticLoadEnabled;return p}}]}},selectors:function(r){var s=r.selectors,l=r.props;return{eventsFormatted:[function(){return[s.events,s.newEvents]},function(f,a){return $e(f,a)}],listParams:[function(){return[s.eventFilter,s.orderBy,s.properties]},function(f,a,m){var d;return pe(pe(pe({},l.fixedFilters||{}),{},{properties:[].concat(V()(m),V()(((d=l.fixedFilters)===null||d===void 0?void 0:d.properties)||[]))},f?{event:f}:{}),{},{orderBy:[a]})}],exportUrl:[function(){return[s.currentTeamId,s.listParams]},function(f,a){return"/api/projects/".concat(f,"/events.csv?").concat(Object(U.Cb)(a))}],eventsUrl:[function(){return[s.currentTeamId,s.listParams]},function(f,a){return function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return"/api/projects/".concat(f,"/events?").concat(Object(U.Cb)(pe(pe({},a),m)))}}],months:[function(){return[function(f,a){return a.fetchMonths}]},function(f){return f||12}],minimumExportDate:[function(){return[s.months]},function(){return Object(_e.b)().subtract(1,"months").toISOString()}],pollAfter:[function(){return[s.events]},function(f){return(f==null?void 0:f.length)>0&&f[0].timestamp?f[0].timestamp:Ye(0)}]}},actionToUrl:function(r){var s=r.values;return{setProperties:function(){return[Q.router.values.location.pathname,pe(pe({},Q.router.values.searchParams),{},{properties:s.properties.length===0?void 0:s.properties}),Q.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[Q.router.values.location.pathname,pe(pe({},Q.router.values.searchParams),{},{eventFilter:s.eventFilter}),Q.router.values.hashParams,{replace:!0}]}}},urlToAction:function(r){var s=r.actions,l=r.values,f=r.props;return W()({},f.sceneUrl,function(a,m){s.setProperties(m.properties||l.properties||{}),m.eventFilter&&s.setEventFilter(m.eventFilter)})},events:function(r){var s=r.values;return{beforeUnmount:function(){return clearTimeout(s.pollTimeout||void 0)}}},listeners:function(r){var s=r.actions,l=r.values,f=r.props;return{startDownload:function(){l.featureFlags[Ue.h.ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS]?Object(Fe.a)({export_format:De.p.CSV,export_context:{path:l.eventsUrl()}}):(z.d.success("The export is starting. It should finish soon"),window.location.href=l.exportUrl)},setProperties:function(){return s.fetchEvents()},setEventFilter:function(){return s.fetchEvents()},fetchNextEvents:function(){var a=te()(H.a.mark(function d(){var p;return H.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:p=l.events,p.length===0?s.fetchEvents():s.fetchEvents({before:p[p.length-1].timestamp});case 2:case"end":return $.stop()}},d)}));function m(){return a.apply(this,arguments)}return m}(),fetchEvents:function(){var a=te()(H.a.mark(function d(p,fe){var $,Pe,Ee,Ce,P,He;return H.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(Ee=function(){return Ee=te()(H.a.mark(function ft(Et){var rt;return H.a.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return rt=l.eventsUrl(pe({after:Et},$)),xe.abrupt("return",se.b.get(rt));case 2:case"end":return xe.stop()}},ft)})),Ee.apply(this,arguments)},Pe=function(ft){return Ee.apply(this,arguments)},$=p.nextParams,clearTimeout(l.pollTimeout),!(l.events.length>0)){C.next=9;break}return C.next=7,fe(300);case 7:C.next=11;break;case 9:return C.next=11,fe(1);case 11:return Ce=null,P=!1,C.prev=13,C.next=16,Pe(Ye(we));case 16:if(Ce=C.sent,Ce.results.length!==0){C.next=22;break}return C.next=20,Pe(Ye(ze));case 20:Ce=C.sent,P=!0;case 22:C.next=28;break;case 24:return C.prev=24,C.t0=C.catch(13),s.fetchOrPollFailure(C.t0),C.abrupt("return");case 28:fe(),s.fetchEventsSuccess({events:Ce.results,hasNext:!!Ce.next||!P,isNext:!!$}),He=window.setTimeout(s.pollEvents,be),s.setPollTimeout(He);case 32:case"end":return C.stop()}},d,null,[[13,24]])}));function m(d,p){return a.apply(this,arguments)}return m}(),pollEvents:function(){var a=te()(H.a.mark(function d(p,fe){var $,Pe,Ee;return H.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if($=function(){var Je=window.setTimeout(s.pollEvents,be);s.setPollTimeout(Je)},l.orderBy==="-timestamp"){P.next=3;break}return P.abrupt("return");case 3:if(f.sceneUrl===Q.router.values.location.pathname){P.next=5;break}return P.abrupt("return");case 5:if(l.pollingIsActive){P.next=8;break}return $(),P.abrupt("return");case 8:return Pe=l.eventsUrl({after:l.pollAfter}),Ee=null,P.prev=10,P.next=13,se.b.get(Pe);case 13:Ee=P.sent,P.next=19;break;case 16:return P.prev=16,P.t0=P.catch(10),P.abrupt("return");case 19:fe(),l.automaticLoadEnabled?s.prependEvents(Ee.results):s.pollEventsSuccess(Ee.results),$();case 22:case"end":return P.stop()}},d,null,[[10,16]])}));function m(d,p){return a.apply(this,arguments)}return m}(),prependNewEvents:function(){l.newEvents.length&&s.prependEvents(l.newEvents)},fetchOrPollFailure:function(m){var d=m.error;z.d.error("There was a problem fetching your events: ".concat(d.statusText))},toggleAutomaticLoad:function(m){var d=m.automaticLoadEnabled;d&&s.prependNewEvents()}}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/ResizableTable/TableConfig.scss":function(ge,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([ge.i,".column-configurator-modal .text-blue{color:var(--primary)}.column-configurator-modal .column-display-item{display:flex;align-items:center;justify-content:flex-start;padding:.5rem;overflow:hidden;border-radius:var(--radius);margin:calc(var(--radius)/2) 0}.column-configurator-modal .column-display-item:hover{background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.disabled{cursor:not-allowed;color:var(--text-muted);background-color:var(--bg-mid)}.column-configurator-modal .column-display-item.selected{background-color:var(--primary-bg-hover)}.column-configurator-modal .column-display-item .property-key-info{flex-grow:0;overflow:hidden;text-overflow:ellipsis}.column-configurator-modal .main-content{margin-bottom:.5rem}.column-configurator-modal .main-content .lists{background-color:var(--bg-side);border-radius:.25rem;padding:.5rem;margin-left:0!important;margin-right:0!important}.column-configurator-modal .selected-column-col{display:flex;flex-direction:column}.column-configurator-modal .drag-handle{cursor:move;color:var(--text-default);font-size:1.2em;padding-right:.25rem}.column-configurator-modal .drag-handle svg{transform:rotate(90deg) translateX(2px)}.column-configurator-modal .save-as-default-button{border:1px solid var(--dark-grey);border-radius:.25rem}.column-configurator-modal-sortable-container{z-index:9999;display:flex;align-items:center;justify-content:flex-start;padding:.5rem}.column-configurator-modal-sortable-container .drag-handle{color:var(--text-default);font-size:1.2em;padding-right:.25rem;transform:rotate(90deg) translateX(2px)}",""]),ge.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(ge,S,e){var G=e("./node_modules/css-loader/dist/runtime/api.js");S=G(!1),S.push([ge.i,".events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid var(--primary)}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:var(--depr-lighten-danger-40)}.events td{max-width:20rem}",""]),ge.exports=S}}]);
