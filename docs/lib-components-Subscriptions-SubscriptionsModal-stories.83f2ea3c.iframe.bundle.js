"use strict";(self.webpackChunk_posthog_frontend=self.webpackChunk_posthog_frontend||[]).push([[25733],{"./src/lib/components/Subscriptions/SubscriptionsModal.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubscriptionNoIntegrations:()=>SubscriptionNoIntegrations,SubscriptionsEdit:()=>SubscriptionsEdit,SubscriptionsEmpty:()=>SubscriptionsEmpty,SubscriptionsNew:()=>SubscriptionsNew,SubscriptionsUnavailable:()=>SubscriptionsUnavailable,Subscriptions_:()=>Subscriptions_,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/lib/lemon-ui/LemonButton/index.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/utils.tsx"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_mocks_browser__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/mocks/browser.tsx"),_mocks_features__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/mocks/features.ts"),_mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/mocks/fixtures/_preflight.json"),_test_mocks__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/test/mocks.ts"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/types.ts"),_SubscriptionsModal__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/lib/components/Subscriptions/SubscriptionsModal.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let __WEBPACK_DEFAULT_EXPORT__={title:"Components/Subscriptions",component:_SubscriptionsModal__WEBPACK_IMPORTED_MODULE_7__.r,parameters:{layout:"fullscreen",viewMode:"story",mockDate:"2023-01-31 12:00:00"}},Template=args=>{let{noIntegrations=!1,featureAvailable=!0,...props}=args,insightShortIdRef=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(props.insightShortId||(0,lib_utils__WEBPACK_IMPORTED_MODULE_1__.Vj)()),[modalOpen,setModalOpen]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1);return(0,_mocks_features__WEBPACK_IMPORTED_MODULE_9__.y)(featureAvailable?[_types__WEBPACK_IMPORTED_MODULE_6__.P$.SUBSCRIPTIONS]:[]),(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_3__.ok)({get:{"/_preflight":{..._mocks_fixtures_preflight_json__WEBPACK_IMPORTED_MODULE_4__,realm:_types__WEBPACK_IMPORTED_MODULE_6__.B_.Cloud,email_service_available:!noIntegrations,slack_service:noIntegrations?{available:!1}:{available:!0,client_id:"test-client-id"},site_url:noIntegrations?"bad-value":window.location.origin},"/api/environments/:id/subscriptions":{results:"empty"===insightShortIdRef.current?[]:[(0,_test_mocks__WEBPACK_IMPORTED_MODULE_5__.lI)(),(0,_test_mocks__WEBPACK_IMPORTED_MODULE_5__.lI)({title:"Weekly C-level report",target_value:"james@posthog.com",frequency:"weekly",interval:1}),(0,_test_mocks__WEBPACK_IMPORTED_MODULE_5__.lI)({title:"Daily Slack report",target_type:"slack",target_value:"C123|#general",frequency:"weekly",interval:1})]},"/api/environments/:id/subscriptions/:subId":(0,_test_mocks__WEBPACK_IMPORTED_MODULE_5__.lI)(),"/api/projects/:id/integrations":{results:noIntegrations?[]:[_test_mocks__WEBPACK_IMPORTED_MODULE_5__.Eu]},"/api/projects/:id/integrations/:intId/channels":{channels:_test_mocks__WEBPACK_IMPORTED_MODULE_5__.y5}}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"p-4 bg-border",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_SubscriptionsModal__WEBPACK_IMPORTED_MODULE_7__.r,{...props,closeModal:()=>{console.log("close")},insightShortId:insightShortIdRef.current,isOpen:!0,inline:!0})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"flex justify-center mt-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_0__.J,{onClick:()=>setModalOpen(!0),type:"primary",children:"Open as Modal"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_SubscriptionsModal__WEBPACK_IMPORTED_MODULE_7__.r,{...props,closeModal:()=>setModalOpen(!1),insightShortId:insightShortIdRef.current,isOpen:modalOpen})]})},Subscriptions_=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Template,{}),SubscriptionsEmpty=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Template,{insightShortId:"empty"}),SubscriptionsNew=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Template,{subscriptionId:"new"}),SubscriptionNoIntegrations=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Template,{subscriptionId:"new",noIntegrations:!0}),SubscriptionsEdit=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Template,{subscriptionId:1}),SubscriptionsUnavailable=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(Template,{featureAvailable:!1});Subscriptions_.parameters={...Subscriptions_.parameters,docs:{...Subscriptions_.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  return <Template />;\n}",...Subscriptions_.parameters?.docs?.source}}},SubscriptionsEmpty.parameters={...SubscriptionsEmpty.parameters,docs:{...SubscriptionsEmpty.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  return <Template insightShortId={'empty' as InsightShortId} />;\n}",...SubscriptionsEmpty.parameters?.docs?.source}}},SubscriptionsNew.parameters={...SubscriptionsNew.parameters,docs:{...SubscriptionsNew.parameters?.docs,source:{originalSource:'(): JSX.Element => {\n  return <Template subscriptionId="new" />;\n}',...SubscriptionsNew.parameters?.docs?.source}}},SubscriptionNoIntegrations.parameters={...SubscriptionNoIntegrations.parameters,docs:{...SubscriptionNoIntegrations.parameters?.docs,source:{originalSource:'(): JSX.Element => {\n  return <Template subscriptionId="new" noIntegrations={true} />;\n}',...SubscriptionNoIntegrations.parameters?.docs?.source}}},SubscriptionsEdit.parameters={...SubscriptionsEdit.parameters,docs:{...SubscriptionsEdit.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  return <Template subscriptionId={1} />;\n}",...SubscriptionsEdit.parameters?.docs?.source}}},SubscriptionsUnavailable.parameters={...SubscriptionsUnavailable.parameters,docs:{...SubscriptionsUnavailable.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  return <Template featureAvailable={false} />;\n}",...SubscriptionsUnavailable.parameters?.docs?.source}}};let __namedExportsOrder=["Subscriptions_","SubscriptionsEmpty","SubscriptionsNew","SubscriptionNoIntegrations","SubscriptionsEdit","SubscriptionsUnavailable"]},"./src/test/mocks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Eu:()=>mockIntegration,Jq:()=>mockActionDefinition,lI:()=>createMockSubscription,y5:()=>mockSlackChannels});var lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/lib/components/TaxonomicFilter/types.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/constants.tsx"),scenes_cohorts_CohortFilters_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/scenes/cohorts/CohortFilters/types.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/types.ts");["event1","test event","$click","$autocapture","search term","other event",...Array(150)].map((name,index)=>({id:`uuid-${index}-foobar`,name:name||`misc-${index}-generated`,description:`${name||"name generation"} is the best!`,tags:[]}));let mockEventPropertyDefinition={id:"017e8d9e-4241-0000-57ad-3a7237ffdb8e",name:"$active_feature_flags",description:"",tags:[],is_numerical:!1,updated_at:"2022-01-24T21:32:38.359756Z",updated_by:null,is_seen_on_filtered_events:!0,property_type:void 0};["prop1","purchase_value","$click","$browser","browser_no_dollar_not_on_event","is_admin",...Array(50)].map((name,index)=>({...mockEventPropertyDefinition,id:`uuid-${index}-foobar`,name:name||`misc-${index}-generated`,description:`${name||"name generation"} is the best!`,is_seen_on_filtered_events:(name||"").includes("$")})),["$session_duration","$initial_utm_source"].map(name=>({...mockEventPropertyDefinition,id:name,name:name,description:`${name} is the best!`}));let mockActionDefinition={id:3,name:"Action with a moderately long name",post_to_slack:!1,slack_message_format:"",steps:[{id:3,event:"$rageclick",tag_name:"div",text:null,href:null,selector:".buy-now-important-on-sale-button",url:"test",name:"Rage",url_matching:"contains",properties:[]},{id:4,event:null,properties:[{type:"property",key:"$geoip_country_code",value:["US","DE"],operator:"exact"}]}],created_at:"2022-01-24T21:32:38.360176Z",deleted:!1,is_calculating:!1,last_calculated_at:"2022-01-24T21:32:38.359756Z",team_id:1,created_by:null,pinned_at:null};lib_constants__WEBPACK_IMPORTED_MODULE_1__.pt,_types__WEBPACK_IMPORTED_MODULE_3__.FT.Person,_types__WEBPACK_IMPORTED_MODULE_3__.WV.Exact,_types__WEBPACK_IMPORTED_MODULE_3__.J2.Or,_types__WEBPACK_IMPORTED_MODULE_3__.J2.Or,scenes_cohorts_CohortFilters_types__WEBPACK_IMPORTED_MODULE_2__.y4.Behavioral,_types__WEBPACK_IMPORTED_MODULE_3__.G2.PerformEvent,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_0__.t.Events,_types__WEBPACK_IMPORTED_MODULE_3__.Xy.Day;let mockSubscription={id:1,title:"My example subscription",target_type:"email",target_value:"ben@posthog.com,geoff@other-company.com",frequency:"monthly",interval:2,start_date:"2022-01-01T00:09:00",byweekday:["wednesday"],bysetpos:1,summary:"sent every month on the first wednesday",created_at:"2022-01-01T00:09:00",updated_at:"2022-01-01T00:09:00"},createMockSubscription=function(){let args=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...mockSubscription,...args}},mockIntegration={id:1,kind:"slack",config:{team:{id:"123",name:"PostHog"}},icon_url:"",display_name:"",created_at:"2022-01-01T00:09:00",created_by:{id:0,uuid:"1234",distinct_id:"1234",first_name:"Tim",email:"tim@posthog.com"}},mockSlackChannels=[{id:"C1",name:"general",is_private:!1,is_ext_shared:!1,is_member:!1},{id:"C2",name:"dev",is_private:!1,is_ext_shared:!1,is_member:!0},{id:"C3",name:"pineapple-conspiracies",is_private:!0,is_ext_shared:!1,is_member:!0},{id:"C4",name:"external-community",is_private:!1,is_ext_shared:!0,is_member:!1}]}}]);