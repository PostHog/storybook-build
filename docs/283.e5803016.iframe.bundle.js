(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(T,p,e){"use strict";var O=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),I=e.n(O),x=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),b=e.n(x),D={};D.insert="head",D.singleton=!1;var d=I()(b.a,D),s=b.a.locals||{}},"./frontend/src/scenes/project-homepage/ProjectHomepage.tsx":function(T,p,e){"use strict";e.r(p),e.d(p,"ProjectHomepage",function(){return Z}),e.d(p,"scene",function(){return ge});var O=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),I=e.n(O),x=e("./node_modules/core-js/modules/es.function.name.js"),b=e("./node_modules/core-js/modules/es.object.to-string.js"),D=e("./node_modules/core-js/modules/es.regexp.to-string.js"),d=e("./node_modules/react/index.js"),s=e.n(d),W=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),N=e("./frontend/src/lib/components/PageHeader.tsx"),w=e("./frontend/src/scenes/dashboard/Dashboard.tsx"),o=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/scenes/teamLogic.tsx"),S=e("./frontend/src/types.ts"),A=e("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),B=e("./frontend/src/lib/components/LemonDivider/index.ts"),L=e("./node_modules/core-js/modules/es.array.map.js"),z=e("./node_modules/core-js/modules/es.symbol.js"),M=e("./node_modules/core-js/modules/es.symbol.description.js"),P=e("./frontend/src/models/dashboardsModel.tsx"),v=e("./frontend/src/lib/components/LemonButton/index.ts"),a=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),m=e.n(a),y=e("./node_modules/@babel/runtime/regenerator/index.js"),c=e.n(y),u=e("./frontend/src/lib/utils/eventUsageLogic.ts"),R=Object(o.kea)({path:["scenes","project-homepage","primaryDashboardModalLogic"],connect:{logic:[u.e],actions:[E.a,["updateCurrentTeam"]],values:[E.a,["currentTeam"]]},actions:{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!0},setPrimaryDashboard:function(n){return{dashboardId:n}}},selectors:{primaryDashboardId:[function(t){return[t.currentTeam]},function(t){return t==null?void 0:t.primary_dashboard}]},reducers:{isOpen:[!1,{showPrimaryDashboardModal:function(){return!0},closePrimaryDashboardModal:function(){return!1}}]},listeners:function(n){var j=n.actions;return{setPrimaryDashboard:function(){var r=m()(c.a.mark(function i(_){var f;return c.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:f=_.dashboardId,j.updateCurrentTeam({primary_dashboard:f}),u.e.actions.reportPrimaryDashboardChanged();case 3:case"end":return h.stop()}},i)}));function l(i){return r.apply(this,arguments)}return l}(),showPrimaryDashboardModal:function(){var r=m()(c.a.mark(function i(){return c.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:u.e.actions.reportPrimaryDashboardModalOpened();case 1:case"end":return f.stop()}},i)}));function l(){return r.apply(this,arguments)}return l}()}}}),U=e("./frontend/src/lib/components/icons.tsx"),g=e("./frontend/src/lib/components/LemonRow/index.ts"),ee=e("./frontend/src/lib/components/LemonModal/index.ts"),$=e("./frontend/src/lib/components/LemonSkeleton/index.tsx");function se(){var t=Object(o.useValues)(R),n=t.isOpen,j=t.primaryDashboardId,r=Object(o.useActions)(R),l=r.closePrimaryDashboardModal,i=r.setPrimaryDashboard,_=Object(o.useValues)(P.a),f=_.nameSortedDashboards,H=_.dashboardsLoading;return s.a.createElement(ee.a,{isOpen:n,onClose:l,title:"Select a default dashboard for the project",footer:s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,{type:"secondary","data-attr":"close-primary-dashboard-modal",onClick:l},"Close"))},H?s.a.createElement("div",{className:"space-y-2"},s.a.createElement($.a.Row,{repeat:4})):s.a.createElement("div",{className:"space-y-2"},f.map(function(h){var C=h.id===j,F=s.a.createElement("div",{className:"flex flex-1 items-center justify-between overflow-hidden"},s.a.createElement("div",{className:"flex-1 flex flex-col justify-center overflow-hidden"},s.a.createElement("strong",null,h.name),s.a.createElement("span",{className:"text-default font-normal text-ellipsis"},h.description)),C?s.a.createElement(s.a.Fragment,null,s.a.createElement(U.IconCottage,{className:"mr-2 text-warning text-lg"}),s.a.createElement("span",null,"Default")):s.a.createElement("strong",{className:"set-default-text"},"Set as default"));return C?s.a.createElement(g.a,{key:h.id,fullWidth:!0,status:"muted",className:"dashboard-row"},F):s.a.createElement(v.a,{key:h.id,fullWidth:!0,className:"dashboard-row",onClick:function(){i(h.id),l()}},F)})))}var G=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),ve=e("./node_modules/core-js/modules/es.array.slice.js"),Y=e("./frontend/src/lib/dayjs.ts"),J=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),Q=e("./frontend/src/lib/components/ProfilePicture/index.ts"),V=e("./frontend/src/scenes/persons/PersonHeader.tsx"),X=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),K=e("./frontend/src/scenes/urls.ts"),te=e("./frontend/src/lib/utils.tsx"),oe=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),ne=e("./frontend/src/scenes/session-recordings/sessionPlayerDrawerLogic.ts");function ae(t){var n=t.recording,j=Object(X.c)({key:"projectHomepage"}),r=Object(o.useActions)(j),l=r.openSessionPlayer,i=Object(o.useActions)(u.e),_=i.reportRecordingOpenedFromRecentRecordingList;return s.a.createElement(v.a,{fullWidth:!0,onClick:function(){l(n.id),_()}},s.a.createElement("div",{className:"ProjectHomePage__listrow"},s.a.createElement(Q.b,{name:Object(V.b)(n.person)}),s.a.createElement("div",{className:"ProjectHomePage__listrow__details"},s.a.createElement("div",null,Object(V.b)(n.person)),s.a.createElement("div",null,"Recorded ",Object(Y.a)(n.start_time).fromNow())),s.a.createElement("span",null,Object(te.O)(n.recording_duration)),s.a.createElement(U.IconPlayCircle,{className:"text-2xl ml-2"})))}function re(){var t=Object(o.useValues)(E.a),n=t.currentTeam,j=Object(X.c)({key:"projectHomepage"}),r=Object(o.useValues)(j),l=r.sessionRecordings,i=r.sessionRecordingsResponseLoading,_=Object(o.useActions)(ne.a),f=_.closeSessionPlayer;return s.a.createElement(s.a.Fragment,null,s.a.createElement(oe.a,{onClose:f}),s.a.createElement(J.a,{title:"Recent recordings",viewAllURL:K.a.sessionRecordings(),loading:i,emptyMessage:n!=null&&n.session_recording_opt_in?{title:"There are no recordings for this project",description:"Make sure you have the javascript snippet setup in your website.",buttonText:"Learn more",buttonTo:"https://posthog.com/docs/user-guides/recordings"}:{title:"Recordings are not enabled for this project",description:"Once recordings are enabled, new recordings will display here.",buttonText:"Enable recordings",buttonTo:K.a.projectSettings()+"#recordings"},items:l.slice(0,5),renderRow:function(h,C){return s.a.createElement(ae,{key:C,recording:h})}}))}var ie=e("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function ce(t){var n=t.person,j=Object(o.useActions)(u.e),r=j.reportPersonOpenedFromNewlySeenPersonsList;return s.a.createElement(v.a,{fullWidth:!0,to:K.a.person(n.distinct_ids[0]),onClick:function(){r()}},s.a.createElement("div",{className:"ProjectHomePage__listrow"},s.a.createElement(Q.b,{name:Object(V.b)(n)}),s.a.createElement("div",{className:"ProjectHomePage__listrow__details"},s.a.createElement("div",null,Object(V.b)(n)),s.a.createElement("div",null,"First seen ",Object(Y.a)(n.created_at).fromNow()))))}function le(){var t=Object(o.useValues)(G.a),n=t.persons,j=t.personsLoading;return s.a.createElement(J.a,{title:"Newly seen persons",viewAllURL:K.a.persons(),loading:j,emptyMessage:{title:"There are no newly seen persons",description:"Learn more about identifying persons and ingesting data in the documentation.",buttonText:"Documentation",buttonTo:"https://posthog.com/docs/integrate/identifying-users"},items:n.slice(0,5),renderRow:function(l,i){return s.a.createElement(ce,{key:i,person:l})}})}var de=e("./node_modules/@react-hook/size/dist/module/index.js"),me=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),ue=e("./frontend/@posthog/lemon-ui/src/index.ts");function Z(){var t=Object(o.useValues)(G.a),n=t.dashboardLogic,j=Object(o.useValues)(E.a),r=j.currentTeam,l=Object(o.useValues)(n),i=l.dashboard,_=Object(o.useActions)(A.a),f=_.showInviteModal,H=Object(o.useActions)(R),h=H.showPrimaryDashboardModal,C=Object(d.useRef)(null),F=Object(de.a)(C),k=I()(F,1),q=k[0],he=s.a.createElement("div",{className:"flex"},s.a.createElement(v.a,{"data-attr":"project-home-invite-team-members",onClick:function(){f()},className:"mr-2",type:"secondary"},"Invite members"),s.a.createElement(me.NewInsightButton,{dataAttr:"project-home-new-insight"}));return s.a.createElement("div",{className:"project-homepage"},s.a.createElement(N.a,{title:(r==null?void 0:r.name)||"",delimited:!0,buttons:he}),s.a.createElement("div",{ref:C,className:q&&q<600?"top-list-container-vertical":"top-list-container-horizontal"},s.a.createElement("div",{className:"top-list"},s.a.createElement(ie.b,null)),s.a.createElement("div",{className:"spacer"}),s.a.createElement("div",{className:"top-list"},s.a.createElement(le,null)),s.a.createElement("div",{className:"spacer"}),s.a.createElement("div",{className:"top-list"},s.a.createElement(re,null))),r!=null&&r.primary_dashboard?s.a.createElement("div",null,s.a.createElement("div",{className:"homepage-dashboard-header"},s.a.createElement("div",{className:"dashboard-title-container"},!i&&s.a.createElement($.a,{className:"w-20"}),(i==null?void 0:i.name)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(U.IconCottage,{className:"mr-2 text-warning text-2xl"}),s.a.createElement(ue.Link,{className:"font-semibold text-xl text-default",to:K.a.dashboard(i.id)},i==null?void 0:i.name))),s.a.createElement(v.a,{type:"secondary","data-attr":"project-home-new-insight",onClick:h},"Change dashboard")),s.a.createElement(B.a,{className:"my-6"}),s.a.createElement(w.Dashboard,{id:r.primary_dashboard.toString(),placement:S.l.ProjectHomepage})):s.a.createElement("div",{className:"empty-state-container"},s.a.createElement(U.IconCottage,{className:"mb-2 text-warning",style:{fontSize:"2rem"}}),s.a.createElement("h1",null,"There isn\u2019t a default dashboard set for this project"),s.a.createElement("p",{className:"mb-4"},"Default dashboards are shown to everyone in the project. When you set a default, it\u2019ll show up here."),s.a.createElement(v.a,{type:"primary","data-attr":"project-home-new-insight",onClick:function(){h()}},"Select a default dashboard")),s.a.createElement(se,null))}var ge={component:Z,logic:G.a}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":function(T,p,e){"use strict";e.d(p,"a",function(){return L}),e.d(p,"b",function(){return z});var O=e("./node_modules/core-js/modules/es.function.name.js"),I=e.n(O),x=e("./node_modules/core-js/modules/es.array.slice.js"),b=e.n(x),D=e("./node_modules/react/index.js"),d=e.n(D),s=e("./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),W=e("./node_modules/kea/lib/index.esm.js"),N=e("./frontend/src/lib/dayjs.ts"),w=e("./frontend/src/lib/components/CompactList/CompactList.tsx"),o=e("./frontend/src/lib/components/LemonButton/index.ts"),E=e("./frontend/src/scenes/urls.ts"),S=e("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),A=e("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),B=e("./frontend/src/lib/utils/eventUsageLogic.ts");function L(M){var P=M.insight,v=Object(W.useActions)(B.e),a=v.reportInsightOpenedFromRecentInsightList;return d.a.createElement(o.a,{fullWidth:!0,to:E.a.insightView(P.short_id),onClick:function(){a()}},d.a.createElement("div",{className:"ProjectHomePage__listrow"},d.a.createElement(S.InsightIcon,{insight:P}),d.a.createElement("div",{className:"ProjectHomePage__listrow__details"},d.a.createElement("div",null,P.name||P.derived_name),d.a.createElement("div",null,"Last modified ",Object(N.a)(P.last_modified_at).fromNow()))))}function z(){var M=Object(W.useValues)(A.a),P=M.recentInsights,v=M.recentInsightsLoading,a=Object(W.useActions)(A.a),m=a.loadRecentInsights;return Object(D.useEffect)(function(){m()},[]),d.a.createElement(d.a.Fragment,null,d.a.createElement(w.a,{title:"Your recently viewed insights",viewAllURL:E.a.savedInsights(),loading:v,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:E.a.savedInsights()},items:P.slice(0,5),renderRow:function(c,u){return d.a.createElement(L,{key:u,insight:c})}}))}try{L.displayName="InsightRow",L.__docgenInfo={description:"",displayName:"InsightRow",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"InsightModel"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"]={docgenInfo:L.__docgenInfo,name:"InsightRow",path:"frontend/src/scenes/project-homepage/RecentInsights.tsx#InsightRow"})}catch(M){}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":function(T,p,e){"use strict";e.d(p,"a",function(){return v});var O=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),I=e.n(O),x=e("./node_modules/@babel/runtime/regenerator/index.js"),b=e.n(x),D=e("./node_modules/core-js/modules/es.array.iterator.js"),d=e.n(D),s=e("./node_modules/core-js/modules/es.object.to-string.js"),W=e.n(s),N=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),w=e.n(N),o=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/scenes/teamLogic.tsx"),S=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),A=e("./frontend/src/types.ts"),B=e("./frontend/src/lib/api.ts"),L=e("./node_modules/kea-subscriptions/lib/index.js"),z=e.n(L),M=e("./node_modules/kea-loaders/lib/index.js"),P=e.n(M),v=Object(o.kea)([Object(o.path)(["scenes","project-homepage","projectHomepageLogic"]),Object(o.connect)({values:[E.a,["currentTeamId","currentTeam"]]}),Object(o.selectors)({primaryDashboardId:[function(){return[E.a.selectors.currentTeam]},function(a){return a==null?void 0:a.primary_dashboard}],dashboardLogic:[function(a){return[a.primaryDashboardId]},function(a){return Object(S.c)({id:a!=null?a:void 0,placement:A.l.ProjectHomepage})}]}),Object(M.loaders)(function(a){var m=a.values;return{recentInsights:[[],{loadRecentInsights:function(){var y=I()(b.a.mark(function u(){var R;return b.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,B.b.get("api/projects/".concat(m.currentTeamId,"/insights/?my_last_viewed=true&order=-my_last_viewed_at"));case 2:return R=g.sent,g.abrupt("return",R.results);case 4:case"end":return g.stop()}},u)}));function c(){return y.apply(this,arguments)}return c}()}],persons:[[],{loadPersons:function(){var y=I()(b.a.mark(function u(){var R;return b.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,B.b.persons.list();case 2:return R=g.sent,g.abrupt("return",R.results);case 4:case"end":return g.stop()}},u)}));function c(){return y.apply(this,arguments)}return c}()}]}}),Object(L.subscriptions)(function(a){var m=a.cache;return{dashboardLogic:function(c){var u;(u=m.unmount)===null||u===void 0||u.call(m),m.unmount=c?c.mount():null}}}),Object(o.afterMount)(function(a){var m,y=a.cache,c=a.actions;(m=y.unmount)===null||m===void 0||m.call(y),c.loadRecentInsights(),c.loadPersons()})])},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":function(T,p,e){var O=e("./node_modules/css-loader/dist/runtime/api.js");p=O(!1),p.push([T.i,".project-homepage .homepage-dashboard-header{display:flex;justify-content:space-between;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container{display:flex;flex-direction:row;align-items:center}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton{width:300px}.project-homepage .homepage-dashboard-header .dashboard-title-container .ant-skeleton h3{margin:0}.project-homepage .top-list-container-horizontal{display:flex}.project-homepage .top-list-container-horizontal .top-list{margin-bottom:1.5rem;width:33%}.project-homepage .top-list-container-horizontal .spacer{width:1rem}.project-homepage .top-list-container-vertical{margin-bottom:1.5rem}.project-homepage .top-list-container-vertical .spacer{height:1rem}.project-homepage .empty-state-container{background-color:var(--side);width:100%;justify-content:center;align-items:center;padding:4rem;display:flex;flex-direction:column}.ProjectHomePage__listrow{display:flex;flex-direction:row;flex:1;gap:.5rem;height:2.5rem;align-items:center;font-weight:400;color:var(--default);overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details{flex:1;overflow:hidden}.ProjectHomePage__listrow .ProjectHomePage__listrow__details div:first-child{color:var(--primary);font-weight:600;margin-bottom:.25rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),T.exports=p}}]);
