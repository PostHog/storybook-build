(window.webpackJsonp=window.webpackJsonp||[]).push([[323],{"./frontend/src/scenes/organization/ConfirmOrganization/ConfirmOrganization.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"ConfirmOrganization",(function(){return ConfirmOrganization}));var organizationLogic=__webpack_require__("./frontend/src/scenes/organizationLogic.tsx"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonInput=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),kea_forms_lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),lemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/lemonToast.tsx");const confirmOrganizationLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","organization","confirmOrganizationLogic"]),Object(index_esm.actions)({setEmail:email=>({email:email}),setShowNewOrgWarning:show=>({show:show})}),Object(index_esm.reducers)({showNewOrgWarning:[!1,{setShowNewOrgWarning:(_,_ref)=>{let{show:show}=_ref;return show}}],email:["",{setEmail:(_,_ref2)=>{let{email:email}=_ref2;return email}}]}),Object(kea_forms_lib.forms)((()=>({confirmOrganization:{defaults:{},errors:_ref3=>{let{organization_name:organization_name,first_name:first_name}=_ref3;return{first_name:first_name?void 0:"Please enter your name",organization_name:organization_name?void 0:"Please enter your organization name"}},submit:async formValues=>{try{const response=await api.b.create("api/social_signup/",{...formValues});location.href=response.success_url||"/"}catch(error){lemonToast.d.error(error.detail||"Failed to create organization")}}}}))),Object(lib.urlToAction)((_ref4=>{let{actions:actions}=_ref4;return{"/organization/confirm-creation":(_,_ref5)=>{let{email:email,organization_name:organization_name,first_name:first_name}=_ref5;actions.setConfirmOrganizationValues({organization_name:organization_name,first_name:first_name}),actions.setEmail(email)}}}))]);var Field=__webpack_require__("./frontend/src/lib/forms/Field.tsx"),AnimatedCollapsible=__webpack_require__("./frontend/src/lib/components/AnimatedCollapsible.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),BridgePage=__webpack_require__("./frontend/src/lib/components/BridgePage/BridgePage.tsx"),SignupRoleSelect=__webpack_require__("./frontend/src/lib/components/SignupRoleSelect.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:ConfirmOrganization,logic:organizationLogic.a};function ConfirmOrganization(){const{isConfirmOrganizationSubmitting:isConfirmOrganizationSubmitting,email:email,showNewOrgWarning:showNewOrgWarning}=Object(index_esm.useValues)(confirmOrganizationLogic),{setShowNewOrgWarning:setShowNewOrgWarning}=Object(index_esm.useActions)(confirmOrganizationLogic);return Object(jsx_runtime.jsxs)(BridgePage.a,{view:"org-creation-confirmation",hedgehog:!0,children:[Object(jsx_runtime.jsx)("h2",{children:"Create a new organization"}),Object(jsx_runtime.jsxs)("div",{className:"flex-1",children:[Object(jsx_runtime.jsx)("p",{className:"text-center",children:Object(jsx_runtime.jsxs)("strong",{children:["Trying to join an existing organization? ",Object(jsx_runtime.jsx)("br",{}),!showNewOrgWarning&&Object(jsx_runtime.jsx)("a",{onClick:()=>{setShowNewOrgWarning(!0)},children:"Read more"})]})}),Object(jsx_runtime.jsx)(AnimatedCollapsible.a,{collapsed:!showNewOrgWarning,children:Object(jsx_runtime.jsxs)("div",{className:"py-2",children:[Object(jsx_runtime.jsx)("p",{children:"If you're trying to join an existing organization, you should not create a new one. Some reasons that you may accidentally end up here are:"}),Object(jsx_runtime.jsxs)("ul",{className:"list-disc pl-4",children:[Object(jsx_runtime.jsx)("li",{children:"You're logging in with the wrong email address"}),Object(jsx_runtime.jsx)("li",{children:"Your PostHog account is at a different URL"}),Object(jsx_runtime.jsx)("li",{children:"You need an invitation from a colleague"})]})]})})]}),Object(jsx_runtime.jsxs)(kea_forms_lib.Form,{logic:confirmOrganizationLogic,formKey:"confirmOrganization",enableFormOnSubmit:!0,className:"space-y-4",children:[Object(jsx_runtime.jsx)(Field.a,{name:"email",label:"Email",children:Object(jsx_runtime.jsx)(LemonInput.a,{className:"ph-ignore-input",value:email,disabled:!0})}),Object(jsx_runtime.jsx)(Field.a,{name:"first_name",label:"Your name",children:Object(jsx_runtime.jsx)(LemonInput.a,{className:"ph-ignore-input",placeholder:"Jane Doe"})}),Object(jsx_runtime.jsx)(Field.a,{name:"organization_name",label:"Organization name",help:"You can always rename your organization later",children:Object(jsx_runtime.jsx)(LemonInput.a,{className:"ph-ignore-input",placeholder:"Hogflix Movies"})}),Object(jsx_runtime.jsx)(SignupRoleSelect.a,{}),Object(jsx_runtime.jsx)(LemonButton.a,{htmlType:"submit",fullWidth:!0,center:!0,type:"primary",loading:isConfirmOrganizationSubmitting,children:"Create organization"}),Object(jsx_runtime.jsx)(LemonButton.a,{fullWidth:!0,center:!0,type:"secondary",disabled:isConfirmOrganizationSubmitting,to:urls.a.signup(),children:"Cancel"})]}),Object(jsx_runtime.jsxs)("div",{className:"text-center terms-and-conditions-text mt-4 text-muted",children:["By creating an account, you agree to our"," ",Object(jsx_runtime.jsx)("a",{href:"https://posthog.com/terms",target:"_blank",rel:"noopener",children:"Terms of Service"})," ","and"," ",Object(jsx_runtime.jsx)("a",{href:"https://posthog.com/privacy",target:"_blank",rel:"noopener",children:"Privacy Policy"}),"."]}),Object(jsx_runtime.jsx)(LemonDivider.a,{thick:!0,dashed:!0,className:"my-6"}),Object(jsx_runtime.jsxs)("div",{className:"text-center terms-and-conditions-text mt-4 text-muted",children:["Have questions?"," ",Object(jsx_runtime.jsx)("a",{href:"https://posthog.com/support",target:"_blank",rel:"noopener",children:"Visit support"})," ","or"," ",Object(jsx_runtime.jsx)("a",{href:"https://posthog.com/docs",target:"_blank",rel:"noopener",children:"read our documentation"}),"."]})]})}}}]);