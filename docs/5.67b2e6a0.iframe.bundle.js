(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(ie,S,t){"use strict";t.d(S,"a",function(){return P});var A=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),L=t.n(A),q=t("./node_modules/core-js/modules/es.array.includes.js"),G=t.n(q),z=t("./node_modules/core-js/modules/es.string.includes.js"),ue=t.n(z),ee=t("./node_modules/core-js/modules/es.object.values.js"),$=t.n(ee),e=t("./node_modules/core-js/modules/es.array.iterator.js"),o=t.n(e),J=t("./node_modules/core-js/modules/es.object.to-string.js"),be=t.n(J),Ee=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Oe=t.n(Ee),le=t("./node_modules/core-js/modules/es.object.keys.js"),Te=t.n(le),V=t("./node_modules/core-js/modules/es.symbol.js"),te=t.n(V),j=t("./node_modules/core-js/modules/es.array.filter.js"),C=t.n(j),B=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),K=t.n(B),Y=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ce=t.n(Y),me=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Pe=t.n(me),H=t("./node_modules/kea/lib/index.esm.js"),ne=t("./frontend/src/lib/utils.tsx"),E=t("./frontend/src/types.ts"),_=t("./frontend/src/scenes/insights/sharedUtils.ts"),n=t("./frontend/src/scenes/insights/insightLogic.ts");function p(X,U){var Q=Object.keys(X);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(X);U&&(de=de.filter(function(Ie){return Object.getOwnPropertyDescriptor(X,Ie).enumerable})),Q.push.apply(Q,de)}return Q}function T(X){for(var U=1;U<arguments.length;U++){var Q=arguments[U]!=null?arguments[U]:{};U%2?p(Object(Q),!0).forEach(function(de){L()(X,de,Q[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(Q)):p(Object(Q)).forEach(function(de){Object.defineProperty(X,de,Object.getOwnPropertyDescriptor(Q,de))})}return X}function Se(X){return Object.values(E.v).includes(X)}var P=Object(H.kea)({props:{},key:Object(_.c)("new"),path:function(U){return["lib","components","ChartFilter","chartFilterLogic",U]},connect:function(U){return{actions:[Object(n.c)(U),["setFilters"]],values:[Object(n.c)(U),["filters"]]}},actions:function(){return{setChartFilter:function(Q){return{chartFilter:Q}}}},selectors:{chartFilter:[function(X){return[X.filters]},function(X){var U=X.display,Q=X.funnel_viz_type;return(U===E.j.FunnelViz?Q:U)||null}]},listeners:function(U){var Q=U.actions,de=U.values;return{setChartFilter:function(We){var je=We.chartFilter,Je=de.filters,Xe=Je.display,tt=Je.funnel_viz_type;Se(je)?(tt!==je||Xe!==E.j.FunnelViz)&&Q.setFilters(T(T({},de.filters),{},{display:E.j.FunnelViz,funnel_viz_type:je})):Object(ne.nb)(Xe,je)||Q.setFilters(T(T({},de.filters),{},{display:je}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(ie,S,t){"use strict";t.d(S,"a",function(){return ne});var A=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),L=t.n(A),q=t("./node_modules/core-js/modules/es.array.iterator.js"),G=t.n(q),z=t("./node_modules/core-js/modules/es.object.to-string.js"),ue=t.n(z),ee=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$=t.n(ee),e=t("./node_modules/core-js/modules/es.object.keys.js"),o=t.n(e),J=t("./node_modules/core-js/modules/es.symbol.js"),be=t.n(J),Ee=t("./node_modules/core-js/modules/es.array.filter.js"),Oe=t.n(Ee),le=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Te=t.n(le),V=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),te=t.n(V),j=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),C=t.n(j),B=t("./node_modules/kea/lib/index.esm.js"),K=t("./frontend/src/lib/utils.tsx"),Y=t("./frontend/src/types.ts"),ce=t("./frontend/src/scenes/insights/sharedUtils.ts"),me=t("./frontend/src/scenes/insights/insightLogic.ts");function Pe(E,_){var n=Object.keys(E);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(E);_&&(p=p.filter(function(T){return Object.getOwnPropertyDescriptor(E,T).enumerable})),n.push.apply(n,p)}return n}function H(E){for(var _=1;_<arguments.length;_++){var n=arguments[_]!=null?arguments[_]:{};_%2?Pe(Object(n),!0).forEach(function(p){L()(E,p,n[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach(function(p){Object.defineProperty(E,p,Object.getOwnPropertyDescriptor(n,p))})}return E}var ne=Object(B.kea)({props:{},key:Object(ce.c)("new"),path:function(_){return["lib","components","CompareFilter","compareFilterLogic",_]},connect:function(_){return{actions:[Object(me.c)(_),["setFilters"]],values:[Object(me.c)(_),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(n){return{compare:n}},toggleCompare:!0}},selectors:{compare:[function(E){return[E.filters]},function(E){return!!(E!=null&&E.compare)}],disabled:[function(E){return[E.filters,E.canEditInsight]},function(E,_){var n=E.insight,p=E.date_from,T=E.display;return!_||n===Y.z.LIFECYCLE||T===Y.j.WorldMap||p==="all"}]},listeners:function(_){var n=_.values,p=_.actions;return{setCompare:function(Se){var P=Se.compare;Object(K.nb)(P,n.compare)||p.setFilters(H(H({},n.filters),{},{compare:P}))},toggleCompare:function(){p.setCompare(!n.compare)}}}})},"./frontend/src/scenes/insights/InsightContainer.tsx":function(ie,S,t){"use strict";t.d(S,"a",function(){return gt});var A=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),L=t.n(A),q=t("./node_modules/antd/es/card/index.js"),G=t("./node_modules/antd/es/row/index.js"),z=t("./node_modules/antd/es/col/index.js"),ue=t("./node_modules/core-js/modules/es.array.includes.js"),ee=t("./node_modules/core-js/modules/es.string.includes.js"),$=t("./node_modules/react/index.js"),e=t.n($),o=t("./node_modules/kea/lib/index.esm.js"),J=t("./node_modules/antd/es/select/index.js"),be=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),Ee=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),Oe=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),le=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},V=Te,te=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),j=function(a,r){return $.createElement(te.a,Object(le.a)(Object(le.a)({},a),{},{ref:r,icon:V}))};j.displayName="AreaChartOutlined";var C=$.forwardRef(j),B=t("./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Y=K,ce=function(a,r){return $.createElement(te.a,Object(le.a)(Object(le.a)({},a),{},{ref:r,icon:Y}))};ce.displayName="TableOutlined";var me=$.forwardRef(ce),Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},H=Pe,ne=function(a,r){return $.createElement(te.a,Object(le.a)(Object(le.a)({},a),{},{ref:r,icon:H}))};ne.displayName="PieChartOutlined";var E=$.forwardRef(ne),_=t("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),n=t("./frontend/src/types.ts"),p=t("./frontend/src/lib/utils.tsx"),T=t("./frontend/src/scenes/insights/insightLogic.ts"),Se=t("./frontend/src/scenes/insights/filters/ActionFilter/entityFilterLogic.ts"),P=t("./frontend/src/lib/components/Tooltip.tsx"),X=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx");function U(l){var a=l.filters,r=l.onChange,s=l.disabled,d=Object(o.useValues)(T.c),i=d.insightProps,c=Object(o.useValues)(Object(be.a)(i)),m=c.chartFilter,u=Object(o.useActions)(Object(be.a)(i)),f=u.setChartFilter,b=a.insight===n.z.STICKINESS||a.insight===n.z.RETENTION,g=a.insight===n.z.RETENTION||a.insight===n.z.STICKINESS,v=a.insight===n.z.RETENTION||a.insight===n.z.STICKINESS||!!a.breakdown&&a.breakdown!=="$geoip_country_code"&&a.breakdown!=="$geoip_country_name"||Object(Se.c)(a).length>1,R=a.insight===n.z.RETENTION,y=R||a.insight===n.z.STICKINESS||a.insight===n.z.RETENTION,I=a.insight===n.z.RETENTION?n.j.ActionsTable:a.insight===n.z.FUNNELS?n.j.FunnelViz:n.j.ActionsLineGraph;function O(h){var x=h.icon,D=h.tooltip,W=h.children,F=W===void 0?null:W;return e.a.createElement(P.a,{title:D,placement:"left"},e.a.createElement("div",{style:{width:"100%"}},x," ",F))}var re=a.insight===n.z.FUNNELS?[{value:n.v.Steps,label:e.a.createElement(O,{icon:e.a.createElement(Ee.a,null)},"Steps")},{value:n.v.Trends,label:e.a.createElement(O,{icon:e.a.createElement(Oe.a,null)},"Trends",e.a.createElement(X.a,{type:"warning",style:{marginLeft:6,lineHeight:"1.4em"}},"BETA"))}]:[{label:"Line Chart",options:[{value:n.j.ActionsLineGraph,label:e.a.createElement(O,{icon:e.a.createElement(Oe.a,null)},"Linear")},{value:n.j.ActionsLineGraphCumulative,label:e.a.createElement(O,{icon:e.a.createElement(C,null)},"Cumulative"),disabled:b}]},{label:"Bar Chart",options:[{value:n.j.ActionsBar,label:e.a.createElement(O,{icon:e.a.createElement(B.a,null)},"Time"),disabled:R},{value:n.j.ActionsBarValue,label:e.a.createElement(O,{icon:e.a.createElement(B.a,null)},"Value"),disabled:y}]},{value:n.j.ActionsTable,label:e.a.createElement(O,{icon:e.a.createElement(me,null)},"Table")},{value:n.j.ActionsPie,label:e.a.createElement(O,{icon:e.a.createElement(E,null)},"Pie"),disabled:g},{value:n.j.WorldMap,label:e.a.createElement(O,{icon:e.a.createElement(_.a,null),tooltip:"Visualize data by country. Only works with one series at a time."},"World Map"),disabled:v}];return e.a.createElement(J.a,{key:"2",defaultValue:a.display||I,value:m||I,onChange:function(x){f(x),r==null||r(x)},bordered:!0,dropdownAlign:p.a.bottomRight,dropdownMatchSelectWidth:!1,listHeight:288,"data-attr":"chart-filter",disabled:s,options:re})}try{U.displayName="ChartFilter",U.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:U.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(l){}var Q=t("./node_modules/antd/es/checkbox/index.js"),de=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Ie(){var l=Object(o.useValues)(T.c),a=l.insightProps,r=Object(o.useValues)(Object(de.a)(a)),s=r.compare,d=r.disabled,i=Object(o.useActions)(Object(de.a)(a)),c=i.setCompare;return d?null:e.a.createElement(Q.a,{onChange:function(u){c(u.target.checked)},checked:s,style:{marginLeft:8,marginRight:6},disabled:d},"Compare",e.a.createElement("span",{className:"hide-lte-md"}," to previous"))}var We=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),je=t.n(We),Je=t("./node_modules/core-js/modules/es.array.map.js"),Xe=t("./node_modules/core-js/modules/es.object.entries.js"),tt=t("./node_modules/core-js/modules/es.array.iterator.js"),yt=t("./node_modules/core-js/modules/es.object.to-string.js"),nt=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Dt=t("./node_modules/core-js/modules/es.object.keys.js"),Mt=t("./node_modules/core-js/modules/es.symbol.js"),Nt=t("./node_modules/core-js/modules/es.array.filter.js"),ye=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),_e=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ze=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Ae=t("./frontend/src/scenes/insights/sharedUtils.ts");function Qe(l,a){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(l);a&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),r.push.apply(r,s)}return r}function we(l){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Qe(Object(r),!0).forEach(function(s){L()(l,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach(function(s){Object.defineProperty(l,s,Object.getOwnPropertyDescriptor(r,s))})}return l}var at=Object(o.kea)({props:{},key:Object(Ae.c)("new"),path:function(a){return["lib","components","IntervalFilter","intervalFilterLogic",a]},connect:function(a){return{actions:[Object(T.c)(a),["setFilters"]],values:[Object(T.c)(a),["filters"]]}},actions:function(){return{setInterval:function(r){return{interval:r}}}},listeners:function(a){var r=a.values,s=a.actions;return{setInterval:function(i){var c=i.interval;Object(p.nb)(c,r.filters.interval)||s.setFilters(we(we({},r.filters),{},{interval:c}))}}},selectors:{interval:[function(l){return[l.filters]},function(l){return l==null?void 0:l.interval}]}}),Ze=t("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),Ot={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function Re(l){var a=l.disabled,r=Object(o.useValues)(T.c),s=r.insightProps,d=Object(o.useValues)(at(s)),i=d.interval,c=Object(o.useActions)(at(s)),m=c.setInterval,u=Object.entries(Ot).map(function(f){var b=je()(f,2),g=b[0],v=b[1].label;return{key:g,value:g,label:g===i?e.a.createElement(e.a.Fragment,null,e.a.createElement(Ze.a,null)," ",v):v}});return e.a.createElement(J.a,{bordered:!0,disabled:a,defaultValue:i||"day",value:i||void 0,dropdownMatchSelectWidth:!1,onChange:m,"data-attr":"interval-filter",options:u})}try{Re.displayName="IntervalFilter",Re.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:Re.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(l){}var fn=t("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),vn=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function Vt(l,a){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(l);a&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),r.push.apply(r,s)}return r}function Bt(l){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Vt(Object(r),!0).forEach(function(s){L()(l,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach(function(s){Object.defineProperty(l,s,Object.getOwnPropertyDescriptor(r,s))})}return l}function pn(){var l=Object(o.useValues)(T.c),a=l.filters,r=Object(o.useActions)(T.c),s=r.setFilters,d=a.interval,i=a.smoothing_intervals;if(!d)return null;var c=vn.a[d].map(function(m){var u=m.value,f=m.label;return{value:u,label:u===i?e.a.createElement(e.a.Fragment,null,e.a.createElement(fn.a,null)," ",f):f}});return c.length?e.a.createElement(J.a,{key:d,bordered:!0,value:i||1,dropdownMatchSelectWidth:!1,onChange:function(u){s(Bt(Bt({},a),{},{smoothing_intervals:u}))},"data-attr":"smoothing-filter",options:c}):e.a.createElement(e.a.Fragment,null)}var xe=t("./frontend/src/lib/constants.tsx"),gn=t("./node_modules/@babel/runtime/helpers/extends.js"),hn=t.n(gn),zt=t("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts"),En=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function rt(l){var a=Object(o.useValues)(T.c),r=a.insightProps,s=Object(o.useValues)(Object(zt.a)(r)),d=s.dates,i=d.dateFrom,c=d.dateTo,m=Object(o.useActions)(Object(zt.a)(r)),u=m.setDates;return e.a.createElement(En.a,hn()({},l,{dateFrom:i!=null?i:void 0,dateTo:c!=null?c:void 0,onChange:function(b,g){var v;u(b,g),(v=l.onChange)===null||v===void 0||v.call(l,b,g)}}))}try{rt.displayName="InsightDateFilter",rt.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},bordered:{defaultValue:null,description:"",name:"bordered",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string, toDate: string) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((props: any) => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"Record<string, dateMappingOption>"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}},selectProps:{defaultValue:null,description:"",name:"selectProps",required:!1,type:{name:"SelectProps<any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:rt.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(l){}var lt=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),Ue=t("./frontend/src/lib/dayjs.ts"),bn=t("./frontend/src/lib/components/DatePicker.tsx");function st(l){var a=l.disabled,r=Object(o.useValues)(T.c),s=r.insightProps,d=Object(o.useValues)(Object(lt.e)(s)),i=d.filters,c=Object(o.useActions)(Object(lt.e)(s)),m=c.setFilters,u=i.date_to&&Object(Ue.a)(i.date_to).year()!==Object(Ue.a)().year()?", YYYY":"";return e.a.createElement(e.a.Fragment,null,e.a.createElement(P.a,{title:"Cohorts up to this end date"},e.a.createElement("span",{style:{maxWidth:100,display:"inline-flex",alignItems:"center"}},e.a.createElement(Ze.a,null),e.a.createElement(bn.a,{showTime:i.period==="Hour",use12Hours:!0,format:i.period==="Hour"?"MMM D".concat(u,", h a"):"MMM D".concat(u),value:i.date_to?Object(Ue.a)(i.date_to):void 0,onChange:function(b){return m({date_to:b&&Object(Ue.a)(b).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",suffixIcon:null,disabled:a}))))}try{st.displayName="RetentionDatePicker",st.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:st.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(l){}var pe=t("./frontend/src/scenes/funnels/funnelLogic.ts"),yn=t("./node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js");function ot(l){var a=l.disabled,r=Object(o.useValues)(T.c),s=r.insightProps,d=Object(o.useValues)(Object(pe.a)(s)),i=d.barGraphLayout,c=Object(o.useActions)(Object(pe.a)(s)),m=c.setFilters,u=[{value:xe.j.vertical,icon:e.a.createElement(B.a,null),label:"Left to right"},{value:xe.j.horizontal,icon:e.a.createElement(yn.a,null),label:"Top to bottom"}];return e.a.createElement(J.a,{defaultValue:xe.j.vertical,value:i||xe.j.vertical,onChange:function(b){return m({layout:b})},bordered:!0,dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",optionLabelProp:"label",disabled:a},e.a.createElement(J.a.OptGroup,{label:"Graph display options"},u.map(function(f){return e.a.createElement(J.a.Option,{key:f.value,value:f.value,label:e.a.createElement(e.a.Fragment,null,f.icon," ",f.label)},f.label)})))}try{ot.displayName="FunnelDisplayLayoutPicker",ot.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:ot.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(l){}var ja=t("./node_modules/core-js/modules/es.array.from.js"),_a=t("./node_modules/core-js/modules/es.string.iterator.js"),Ca=t("./node_modules/core-js/modules/es.array.slice.js"),On=t("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),jt=t("./frontend/src/scenes/paths/pathsLogic.ts"),jn=t("./frontend/src/scenes/userLogic.ts");function it(l){var a,r=l.disabled,s=Object(o.useValues)(T.c),d=s.insightProps,i=Object(o.useValues)(Object(jt.b)(d)),c=i.filter,m=Object(o.useActions)(Object(jt.b)(d)),u=m.setFilter,f=Object(o.useValues)(jn.a),b=f.user,g=2,v=b!=null&&(a=b.organization)!==null&&a!==void 0&&a.available_features.includes(n.d.PATHS_ADVANCED)?20:5,R=Array.from(Array.from(Array.from(Array(v+1).keys()).slice(g)),function(y){return{label:"".concat(y," Steps"),value:y}});return e.a.createElement(J.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:c.step_limit||jt.a,onSelect:function(I){return u({step_limit:I})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:p.a.bottomRight,optionLabelProp:"label",disabled:r},R.map(function(y){return e.a.createElement(J.a.Option,{key:y.value,value:y.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(On.a,null)," ",y.label)},y.label)}))}try{it.displayName="PathStepPicker",it.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:it.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"})}catch(l){}var Kt=t("./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js");function ct(l){var a=l.disabled,r=Object(o.useValues)(T.c),s=r.insightProps,d=Object(o.useValues)(Object(lt.e)(s)),i=d.retentionReference,c=Object(o.useActions)(Object(lt.e)(s)),m=c.setRetentionReference;return e.a.createElement(J.a,{value:i,onChange:m,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:a},[{value:"total",icon:e.a.createElement(Kt.a,null),label:"Overall cohort"},{value:"previous",icon:e.a.createElement(Kt.a,null),label:"Relative to previous period"}].map(function(u){return e.a.createElement(J.a.Option,{key:u.value,value:u.value,label:e.a.createElement(e.a.Fragment,null,u.icon," ",u.label)},u.label)}))}try{ct.displayName="ReferencePicker",ct.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:ct.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"})}catch(l){}var Wt=t("./node_modules/antd/es/tooltip/index.js"),Fe=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),_n=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Le=t.n(_n),Pa=t("./node_modules/core-js/modules/es.set.js"),Sa=t("./node_modules/core-js/modules/es.array.concat.js"),Cn=t("./node_modules/antd/es/input-number/index.js"),_t=t("./node_modules/clsx/dist/clsx.m.js"),Pn=0,wt=90,Sn=new Set([5,15,25,50,90]),Tn=[{label:"Auto bins",value:xe.a,display:!0}].concat(Le()(Array.from(Array.from(Array(wt+1).keys()),function(l){return{label:"".concat(l," bins"),value:l,display:Sn.has(l)}})),[{label:"Custom",value:"custom",display:!0}]);function dt(l){var a=l.disabled,r=Object(o.useValues)(T.c),s=r.insightProps,d=Object(o.useValues)(Object(pe.a)(s)),i=d.filters,c=d.numericBinCount,m=Object(o.useActions)(Object(pe.a)(s)),u=m.setBinCount;return e.a.createElement(J.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:xe.a,value:i.bin_count||xe.a,onSelect:function(b){return u(b)},dropdownRender:function(b){return e.a.createElement(e.a.Fragment,null,b,e.a.createElement("div",null,e.a.createElement(Cn.a,{className:"funnel-bins-custom-picker",size:"middle",min:Pn,max:wt,value:c,onChange:function(v){var R=typeof v=="string"?parseInt(v):v;R&&u(R)}})," ","bins"))},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:p.a.bottomRight,optionLabelProp:"label",disabled:a},e.a.createElement(J.a.OptGroup,{label:"Bin Count"},Tn.map(function(f){return f.value==="custom"?null:e.a.createElement(J.a.Option,{className:Object(_t.a)({"select-option-hidden":!f.display}),key:f.value,value:f.value,label:e.a.createElement(e.a.Fragment,null,e.a.createElement(B.a,null)," ",f.label)},f.label)})))}try{dt.displayName="FunnelBinsPicker",dt.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:dt.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(l){}var Ut=t("./frontend/src/lib/logic/featureFlagLogic.ts"),De,Me,xn=function(a,r){switch(a){case n.z.FUNNELS:return r.funnel_viz_type===n.v.Trends;case n.z.RETENTION:case n.z.PATHS:return!1;case n.z.TRENDS:case n.z.STICKINESS:case n.z.LIFECYCLE:default:return!r.display||!xe.l.includes(r.display)}},Fn=function(a){switch(a){case n.z.TRENDS:case n.z.STICKINESS:return!0;case n.z.RETENTION:case n.z.FUNNELS:return!1;case n.z.LIFECYCLE:case n.z.PATHS:return!1;default:return!0}},Ln=(De={},L()(De,"".concat(n.z.TRENDS),!0),L()(De,"".concat(n.z.STICKINESS),!0),L()(De,"".concat(n.z.LIFECYCLE),!0),L()(De,"".concat(n.z.FUNNELS),!0),L()(De,"".concat(n.z.RETENTION),!1),L()(De,"".concat(n.z.PATHS),!0),De),In=(Me={},L()(Me,"".concat(n.z.TRENDS),!0),L()(Me,"".concat(n.z.STICKINESS),!0),L()(Me,"".concat(n.z.LIFECYCLE),!1),L()(Me,"".concat(n.z.FUNNELS),!1),L()(Me,"".concat(n.z.RETENTION),!1),L()(Me,"".concat(n.z.PATHS),!1),Me),An=function(a){var r,s;return!a.actions&&!a.events||((r=a.actions)===null||r===void 0?void 0:r.length)===0&&((s=a.events)===null||s===void 0?void 0:s.length)===0};function ut(l){var a=l.filters,r=l.activeView,s=l.disableTable,d=r===n.z.FUNNELS,i=r===n.z.PATHS,c=Object(o.useValues)(Ut.a),m=c.featureFlags;return e.a.createElement("div",{className:"display-config-inner"},e.a.createElement("div",{className:"display-config-inner-row"},Ln[r]&&!s&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Date range"),e.a.createElement(rt,{defaultValue:"Last 7 days",disabled:d&&An(a),bordered:!0,makeLabel:function(f){return e.a.createElement(e.a.Fragment,null,e.a.createElement(Ze.a,null)," ",f,f=="All time"&&e.a.createElement(Wt.a,{title:"Only events dated after 2015 will be shown"},e.a.createElement(Fe.a,{className:"info-indicator"})))}})),xn(r,a)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},e.a.createElement("span",{className:"hide-lte-md"},"grouped "),"by"),e.a.createElement(Re,{view:r})),r===n.z.TRENDS&&!a.breakdown_type&&!a.compare&&(!a.display||a.display===n.j.ActionsLineGraph)&&m[xe.h.SMOOTHING_INTERVAL]?e.a.createElement(pn,null):null,r===n.z.RETENTION&&e.a.createElement(e.a.Fragment,null,e.a.createElement(st,null),e.a.createElement(ct,null)),i&&e.a.createElement("span",{className:"filter"},e.a.createElement(it,null)),In[r]&&e.a.createElement("span",{className:"filter"},e.a.createElement(Ie,null))),e.a.createElement("div",{className:"display-config-inner-row"},Fn(r)&&e.a.createElement("span",{className:"filter"},e.a.createElement("span",{className:"head-title-item"},"Chart type"),e.a.createElement(U,{filters:a,disabled:a.insight===n.z.LIFECYCLE})),d&&a.funnel_viz_type===n.v.Steps&&e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"filter"},e.a.createElement(ot,null))),d&&a.funnel_viz_type===n.v.TimeToConvert&&e.a.createElement("span",{className:"filter"},e.a.createElement(dt,null))))}try{ut.displayName="InsightDisplayConfig",ut.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'},{value:'"subscriptions"'},{value:'"sharing"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:ut.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(l){}var ke=t("./node_modules/antd/es/button/index.js"),Rn=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),mt=t.n(Rn),Dn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),kt=t.n(Dn),Ct={};Ct.insert="head",Ct.singleton=!1;var Ta=mt()(kt.a,Ct),xa=kt.a.locals||{},Fa=t("./node_modules/core-js/modules/es.array.find.js"),Ht=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function $t(){var l,a=Object(o.useValues)(T.c),r=a.insightProps,s=Object(o.useValues)(Object(pe.a)(r)),d=s.filters,i=s.numberOfSeries,c=s.areFiltersValid,m=s.filterSteps,u=Object(o.useActions)(Object(pe.a)(r)),f=u.changeStepRange;if(d.funnel_viz_type===n.v.Steps)return null;var b=function(I,O){f(I,O)},g=c?Array.from(Array(Math.max(i)).keys()).slice(0,-1):[0],v=c?Array.from(Array(Math.max(i)).keys()).slice(((l=d.funnel_from_step)!==null&&l!==void 0?l:0)+1):[1],R=function(I){return I.map(function(O){var re=m.find(function(h){return h.order===O});return re?e.a.createElement(J.a.Option,{key:O,value:O,label:"Step ".concat(O+1)},e.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.a.createElement("span",{style:{marginRight:4}},"Step ",O+1,":"),e.a.createElement(Ht.a,{filter:re}))):null})};return e.a.createElement(G.a,{className:"funnel-options-inputs"},e.a.createElement("span",{className:"text-muted-alt"},"from"),e.a.createElement(J.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:p.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:d.funnel_from_step||0,onChange:function(I){return b(I,d.funnel_to_step)},style:{marginLeft:4,marginRight:4}},R(g)),e.a.createElement("span",{className:"text-muted-alt"},"to"),e.a.createElement(J.a,{disabled:!c,dropdownMatchSelectWidth:!1,dropdownAlign:p.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:d.funnel_to_step||Math.max(i-1,1),onChange:function(I){return b(d.funnel_from_step,I)},style:{marginLeft:4,marginRight:4}},R(v)))}function Mn(){var l=Object(o.useValues)(T.c),a=l.insightProps,r=l.filters,s=l.activeView,d=Object(o.useValues)(Object(pe.a)(a)),i=d.conversionMetrics,c=d.aggregationTargetLabel,m=Object(o.useActions)(Object(be.a)(a)),u=m.setChartFilter;if(s!==n.z.FUNNELS)return null;var f=[].concat(Le()(r.funnel_viz_type===n.v.Steps?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(P.a,{title:"Overall conversion rate for all ".concat(c.plural," on the entire funnel.")},e.a.createElement(Fe.a,{className:"info-indicator left"})),"Total conversion rate"),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement("span",{className:"l4"},Object(p.pb)(i.totalRate,1,!0)))]:[]),Le()(r.funnel_viz_type!==n.v.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},e.a.createElement(P.a,{title:"Average (arithmetic mean) of the total time each ".concat(c.singular," spent in the entire funnel.")},e.a.createElement(Fe.a,{className:"info-indicator left"})),"Average time to convert"," "),r.funnel_viz_type===n.v.TimeToConvert&&e.a.createElement($t,null),e.a.createElement("span",{className:"text-muted-alt mr-025"},":"),e.a.createElement(ke.a,{type:"link",onClick:function(){return u(n.v.TimeToConvert)},disabled:r.funnel_viz_type===n.v.TimeToConvert},e.a.createElement("span",{className:"l4"},Object(p.N)(i.averageTime))))]:[]),Le()(r.funnel_viz_type===n.v.Trends?[e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Conversion rate "),e.a.createElement($t,null))]:[]));return e.a.createElement(G.a,{className:"funnel-canvas-label",align:"middle"},f.map(function(b,g){return e.a.createElement(e.a.Fragment,{key:g},g>0&&e.a.createElement("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),b)}))}var Nn=t("./frontend/src/lib/hooks/usePeriodicRerender.ts"),Yt=3;function Vn(){var l=Object(o.useValues)(T.c),a=l.lastRefresh,r=Object(o.useActions)(T.c),s=r.loadResults;return Object(Nn.a)(15e3),e.a.createElement("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"}},"Computed ",a?Object(Ue.a)(a).fromNow():"a while ago",e.a.createElement("span",{style:{padding:"0 4px"}},"\u2022"),e.a.createElement(Wt.a,{title:e.a.createElement(e.a.Fragment,null,"Insights can be refreshed",e.a.createElement("br",null),"every ",Yt," minutes.")},e.a.createElement(ke.a,{size:"small",type:"link",onClick:function(){return s(!0)},disabled:!!a&&Object(Ue.a)().subtract(Yt-.5,"minutes").isBefore(a),style:{padding:0}},e.a.createElement("span",{style:{fontSize:14}},"Refresh"))))}var Gt=t("./frontend/src/scenes/trends/PersonsModal.tsx"),Pt=t("./frontend/src/scenes/trends/viz/index.ts"),Jt=t("./frontend/src/scenes/trends/SaveCohortModal.tsx"),ft=t("./frontend/src/scenes/trends/trendsLogic.ts"),St=t("./frontend/src/scenes/insights/views/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},showTotalCount:{defaultValue:{value:"false"},description:"",name:"showTotalCount",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"})}catch(l){}var He=t("./frontend/src/scenes/trends/personsModalLogic.ts"),Tt=t("./frontend/src/lib/utils/eventUsageLogic.ts"),Xt=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),Bn=t("./frontend/src/scenes/insights/views/WorldMap/index.ts");function $e(l){var a=l.view,r=Object(o.useValues)(Xt.a),s=r.insightMode,d=Object(o.useValues)(T.c),i=d.insightProps,c=Object(o.useValues)(He.b),m=c.cohortModalVisible,u=Object(o.useActions)(He.b),f=u.setCohortModalVisible,b=Object(o.useValues)(Object(ft.a)(i)),g=b.filters,v=b.loadMoreBreakdownUrl,R=b.breakdownValuesLoading,y=b.showModalActions,I=b.aggregationTargetLabel,O=Object(o.useActions)(Object(ft.a)(i)),re=O.loadMoreBreakdownValues,h=Object(o.useValues)(He.b),x=h.showingPeople,D=Object(o.useActions)(He.b),W=D.saveCohortWithUrl,F=Object(o.useActions)(Tt.f),M=F.reportCohortCreatedFromPersonsModal,N=function(){if(!g.display||g.display===n.j.ActionsLineGraph||g.display===n.j.ActionsLineGraphCumulative||g.display===n.j.ActionsBar)return e.a.createElement(Pt.b,null);if(g.display===n.j.ActionsTable)return e.a.createElement(o.BindLogic,{logic:ft.a,props:{dashboardItemId:null,view:a,filters:null}},e.a.createElement(St.b,{embedded:!0,showTotalCount:!0,filterKey:"trends_".concat(a),canEditSeriesNameInline:s===n.A.Edit,isMainInsightView:!0}));if(g.display===n.j.ActionsPie)return e.a.createElement(Pt.c,null);if(g.display===n.j.ActionsBarValue)return e.a.createElement(Pt.a,null);if(g.display===n.j.WorldMap)return e.a.createElement(Bn.a,null)};return e.a.createElement(e.a.Fragment,null,(g.actions||g.events)&&e.a.createElement("div",{className:g.display!==n.j.ActionsTable&&g.display!==n.j.WorldMap?"trends-insights-container":void 0},N()),g.breakdown&&v&&e.a.createElement("div",{className:"mt text-center"},e.a.createElement("div",{className:"text-muted mb"},"For readability, ",e.a.createElement("b",null,"not all breakdown values are displayed"),". Click below to load them."),e.a.createElement("div",null,e.a.createElement(ke.a,{style:{textAlign:"center",marginBottom:16},onClick:re,loading:R},"Load more breakdown values"))),e.a.createElement(Gt.a,{visible:x&&!m,view:a,filters:g,onSaveCohort:function(){f(!0)},showModalActions:y,aggregationTargetLabel:I}),e.a.createElement(Jt.a,{visible:m,onOk:function(ge){W(ge),f(!1),M(g)},onCancel:function(){return f(!1)}}))}try{$e.displayName="TrendInsight",$e.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:$e.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(l){}var zn=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),Kn=t("./frontend/src/scenes/paths/Paths.tsx"),qe=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function Wn(){var l=Object(o.useValues)(T.c),a=l.activeView;return a!==n.z.PATHS?null:e.a.createElement(G.a,{className:"funnel-canvas-label",align:"middle"},e.a.createElement(e.a.Fragment,null,e.a.createElement("span",{className:"text-muted-alt"},"Large path items are shown by default. View smaller items by hovering over a node")))}var Qt=t("./frontend/src/lib/components/InsightLegend/InsightLegend.tsx"),Ke=t("./frontend/src/lib/components/LemonButton/index.ts"),Ne=t("./frontend/src/lib/components/icons.tsx"),La=t("./node_modules/core-js/modules/es.object.from-entries.js"),Ia=t("./node_modules/core-js/modules/es.array.flat-map.js"),Aa=t("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),wn=t("./frontend/src/lib/components/LemonTable/index.ts"),vt=t("./frontend/src/scenes/funnels/funnelUtils.ts"),xt=t("./frontend/src/scenes/insights/views/Funnels/funnelStepTableUtils.tsx"),Un=t("./frontend/src/models/cohortsModel.ts"),Zt=t("./frontend/src/lib/components/LemonCheckbox/index.ts"),qt=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Ft=t("./frontend/src/lib/components/LemonRow/index.ts"),Ye=t("./frontend/src/scenes/funnels/ValueInspectorButton.tsx"),kn=t("./frontend/src/lib/colors.ts");function Hn(){var l=Object(o.useValues)(T.c),a=l.insightProps,r=Object(pe.a)(a),s=Object(o.useValues)(r),d=s.insightLoading,i=s.steps,c=s.flattenedBreakdowns,m=s.hiddenLegendKeys,u=s.visibleStepsWithConversionMetrics,f=Object(o.useActions)(r),b=f.setHiddenById,g=f.toggleVisibilityByBreakdown,v=f.openPersonsModalForSeries,R=Object(o.useValues)(Un.a),y=R.cohorts,I=c.length===1,O=c==null?void 0:c.every(function(h){return!m[Object(vt.l)(u==null?void 0:u[0],h.breakdown_value)]}),re=[{children:[{title:I?"Breakdown":e.a.createElement(Zt.a,{checked:O||(c!=null&&c.some(function(h){return!m[Object(vt.l)(u==null?void 0:u[0],h.breakdown_value)]})?"indeterminate":!1),onChange:function(){b(Object.fromEntries(u.flatMap(function(x){return c.map(function(D){return[Object(vt.l)(x,D.breakdown_value),O]})})))},label:"Breakdown",rowProps:{size:"small",style:{padding:0,marginLeft:"-0.5rem",font:"inherit"}}}),dataIndex:"breakdown_value",render:function(x){var D=Object(St.c)(y,x);return I?e.a.createElement("span",{style:{fontWeight:500}},D):e.a.createElement(Zt.a,{checked:!m[Object(vt.l)(u==null?void 0:u[0],x)],onChange:function(){return g(x)},label:D,rowProps:{size:"small",style:{padding:0,marginLeft:"-0.5rem",maxWidth:"16rem"},title:D}})}},{title:e.a.createElement(e.a.Fragment,null,"Total",e.a.createElement("br",null),"conversion"),render:function(x,D){var W,F;return Object(p.pb)((W=D==null||(F=D.conversionRates)===null||F===void 0?void 0:F.total)!==null&&W!==void 0?W:0,1,!0)},align:"right"}]}].concat(Le()(i.map(function(h,x){return{title:e.a.createElement(Ft.a,{icon:e.a.createElement(qt.a,{name:x+1,color:qt.b.Gray}),style:{font:"inherit",padding:0},size:"small"},e.a.createElement(Ht.a,{filter:Object(xt.a)(h)})),children:[{title:x===0?"Entered":"Converted",render:function(W,F){var M,N,ae=(M=F.steps)===null||M===void 0?void 0:M[x];return ae&&e.a.createElement(Ye.a,{onClick:function(){return v({step:h,series:ae,converted:!0})},style:{padding:0}},Object(p.O)((N=ae.count)!==null&&N!==void 0?N:0))},align:"right"}].concat(Le()(x===0?[]:[{title:"Dropped\xA0off",render:function(W,F){var M,N,ae=(M=F.steps)===null||M===void 0?void 0:M[x];return ae&&e.a.createElement(Ye.a,{onClick:function(){return v({step:h,series:ae,converted:!1})},style:{padding:0}},Object(p.O)((N=ae.droppedOffFromPrevious)!==null&&N!==void 0?N:0))},align:"right"}]),[{title:e.a.createElement(e.a.Fragment,null,"Conversion",e.a.createElement("br",null),"so\xA0far"),render:function(W,F){var M,N,ae,ge,se,w,Z=Object(xt.b)(F,h.order);return Z!=null&&Z.total?e.a.createElement(Ft.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(Ne.IconFlag,null),size:"small"},Object(p.pb)((M=(N=F.steps)===null||N===void 0||(ae=N[h.order])===null||ae===void 0?void 0:ae.conversionRates.total)!==null&&M!==void 0?M:0,1,!0)):Object(p.pb)((ge=(se=F.steps)===null||se===void 0||(w=se[h.order])===null||w===void 0?void 0:w.conversionRates.total)!==null&&ge!==void 0?ge:0,1,!0)},align:"right"}],Le()(x===0?[]:[{title:e.a.createElement(e.a.Fragment,null,"Conversion",e.a.createElement("br",null),"from\xA0previous"),render:function(W,F){var M,N,ae,ge,se,w,Z=Object(xt.b)(F,h.order);return!(Z!=null&&Z.total)&&Z!==null&&Z!==void 0&&Z.fromPrevious?e.a.createElement(Ft.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:e.a.createElement(Ne.IconFlag,null),size:"small"},Object(p.pb)((M=(N=F.steps)===null||N===void 0||(ae=N[h.order])===null||ae===void 0?void 0:ae.conversionRates.fromPrevious)!==null&&M!==void 0?M:0,1,!0)):Object(p.pb)((ge=(se=F.steps)===null||se===void 0||(w=se[h.order])===null||w===void 0?void 0:w.conversionRates.fromPrevious)!==null&&ge!==void 0?ge:0,1,!0)},align:"right"},{title:e.a.createElement(e.a.Fragment,null,"Median",e.a.createElement("br",null),"time"),render:function(W,F){var M,N;return((M=F.steps)===null||M===void 0||(N=M[h.order])===null||N===void 0?void 0:N.median_conversion_time)!=null?Object(p.N)(F.steps[h.order].median_conversion_time,3):"\u2013"},align:"right",width:0,className:"no-wrap"},{title:e.a.createElement(e.a.Fragment,null,"Average",e.a.createElement("br",null),"time"),render:function(W,F){var M,N;return((M=F.steps)===null||M===void 0||(N=M[h.order])===null||N===void 0?void 0:N.average_conversion_time)!=null?Object(p.N)(F.steps[h.order].average_conversion_time,3):"\u2013"},align:"right",width:0,className:"no-wrap"}]))}})));return e.a.createElement(wn.a,{dataSource:c,columns:re,loading:d,rowKey:"breakdownIndex",rowStatus:function(x){return x.significant?"highlighted":null},rowRibbonColor:function(x){var D;return Object(kn.c)((D=x==null?void 0:x.breakdownIndex)!==null&&D!==void 0?D:0)}})}var $n=t("./frontend/src/lib/components/Animation/Animation.tsx"),Yn=t("./frontend/src/lib/animations/animations.ts"),Gn=t("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),Jn=t("./node_modules/antd/lib/input/TextArea.js"),Xn=t.n(Jn),Qn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss"),en=t.n(Qn),Lt={};Lt.insert="head",Lt.singleton=!1;var Ra=mt()(en.a,Lt),Da=en.a.locals||{},tn=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Zn=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),qn=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),Ma=t("./node_modules/core-js/modules/es.number.is-integer.js"),Na=t("./node_modules/core-js/modules/es.number.constructor.js"),Va=t("./node_modules/core-js/modules/es.number.to-fixed.js"),Ba=t("./node_modules/core-js/modules/es.regexp.exec.js"),za=t("./node_modules/core-js/modules/es.string.split.js"),ea=t("./node_modules/antd/es/spin/index.js"),It=t("./node_modules/antd/es/table/index.js"),ta=t("./node_modules/antd/lib/table/Column.js"),Ce=t.n(ta),nn=t("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},aa=na,an=function(a,r){return $.createElement(te.a,Object(le.a)(Object(le.a)({},a),{},{ref:r,icon:aa}))};an.displayName="FallOutlined";var rn=$.forwardRef(an),ln=t("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),ra=t("./node_modules/antd/lib/checkbox/Checkbox.js"),pt=t.n(ra),Ge=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),la=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss"),sn=t.n(la),At={};At.insert="head",At.singleton=!1;var Ka=mt()(sn.a,At),Wa=sn.a.locals||{},sa=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function et(l){var a=l.id,r=l.offset,s=l.children,d=Object(o.useActions)(Object(sa.a)({id:a,offset:r})),i=d.scrolling,c=Object($.useRef)(null);return Object($.useEffect)(function(){var m=c.current;return document.addEventListener("scroll",function(){return m&&i(m)}),function(){return document.removeEventListener("scroll",function(){return m&&i(m)})}},[c.current]),e.a.createElement("div",{ref:c},s)}try{et.displayName="VisibilitySensor",et.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:et.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(l){}var on=t("./frontend/src/lib/components/Popup/Popup.tsx"),oa=t("./node_modules/antd/es/modal/index.js"),ia=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),ca=t("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),da=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),ua=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss"),cn=t.n(ua),Rt={};Rt.insert="head",Rt.singleton=!1;var wa=mt()(cn.a,Rt),Ua=cn.a.locals||{},ma=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),dn=t("./frontend/src/lib/components/Link.tsx"),fa=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function va(){var l=Object(o.useValues)(T.c),a=l.insightProps,r=Object(pe.a)(a),s=Object(o.useValues)(r),d=s.correlationsLoading,i=s.funnelCorrelationDetails,c=s.parseDisplayNameForCorrelation,m=s.correlationMatrixAndScore,u=Object(o.useActions)(r),f=u.setFunnelCorrelationDetails,b=u.openCorrelationPersonsModal,g=(i==null?void 0:i.result_type)===n.r.Events?"event":"property",v=(i==null?void 0:i.result_type)===n.r.Events?"performed event":"have property",R=e.a.createElement(e.a.Fragment,null);if(i){var y=c(i),I=y.first_value,O=y.second_value;R=e.a.createElement(e.a.Fragment,null,e.a.createElement(Ge.a,{value:I}),O!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Ge.a,{value:O,disablePopover:!0})))}var re=m.correlationScore,h=m.truePositive,x=m.falsePositive,D=m.trueNegative,W=m.falseNegative,F=m.correlationScoreStrength,M=F==="strong"?e.a.createElement(ia.a,{style:{color:"var(--success)"}}):F==="moderate"?e.a.createElement(ca.a,{style:{color:"var(--warning)"}}):e.a.createElement(da.a,{style:{color:"var(--danger)"}}),N=function(){return f(null)};return e.a.createElement(oa.a,{className:"correlation-matrix",visible:!!i,onCancel:N,destroyOnClose:!0,footer:e.a.createElement(ke.a,{onClick:N},"Dismiss"),width:600,title:"Correlation details"},e.a.createElement("div",{className:"correlation-table-wrapper"},d?e.a.createElement("div",{className:"mt text-center"},e.a.createElement(ma.a,{size:"lg"})):i?e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"text-muted-alt mb"},"The table below displays the correlation details for users who ",v," ",e.a.createElement("b",null,R),"."),e.a.createElement("table",null,e.a.createElement("thead",null,e.a.createElement("tr",{className:"table-title"},e.a.createElement("td",{colSpan:3},"Results matrix")),e.a.createElement("tr",null,e.a.createElement("td",null,(i==null?void 0:i.result_type)===n.r.Events?"Performed event":"Has property"),e.a.createElement("td",null,"Success"),e.a.createElement("td",null,"Dropped off"))),e.a.createElement("tbody",null,e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"Yes"),e.a.createElement("td",null,e.a.createElement(P.a,{title:"True positive (TP) - Percentage of users who ".concat(v," and completed the funnel.")},e.a.createElement("div",{className:"percentage"},h?Object(p.pb)(h/(h+x)):"0.00%")),h===0?"0 users":e.a.createElement(dn.a,{onClick:function(){b(i,!0)}},Object(p.qb)(h,"user",void 0,!0))),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(P.a,{title:"False negative (FN) - Percentage of users who ".concat(v," and did not complete the funnel.")},W?Object(p.pb)(W/(W+D)):"0.00%")),W===0?"0 users":e.a.createElement(dn.a,{onClick:function(){b(i,!1)}},Object(p.qb)(W,"user",void 0,!0)))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"},"No"),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(P.a,{title:"False positive (FP) - Percentage of users who did not ".concat(v," and completed the funnel.")},x?Object(p.pb)(x/(h+x)):"0.00%")),Object(p.qb)(x,"user",void 0,!0)),e.a.createElement("td",null,e.a.createElement("div",{className:"percentage"},e.a.createElement(P.a,{title:"True negative (TN) - Percentage of users who did not ".concat(v," and did not complete the funnel.")},D?Object(p.pb)(D/(W+D)):"0.00%")),Object(p.qb)(D,"user",void 0,!0))),e.a.createElement("tr",null,e.a.createElement("td",{className:"horizontal-header"}),e.a.createElement("td",null,e.a.createElement("b",null,"100%")),e.a.createElement("td",null,e.a.createElement("b",null,"100%"))))),e.a.createElement("div",{className:"mt text-center"},Object(p.j)((i==null?void 0:i.result_type)||"")," ",e.a.createElement("b",null,R)," ","has a"," ",(i==null?void 0:i.correlation_type)===n.s.Success?e.a.createElement("b",{className:"text-success"},"positive"," ",e.a.createElement(P.a,{title:"Positive correlation means this ".concat(g," is correlated with a successful conversion.")},e.a.createElement(Fe.a,{className:"cursor-pointer"}))):e.a.createElement("b",{className:"text-danger"},"negative"," ",e.a.createElement(P.a,{title:"Negative correlation means this ".concat(g," is correlated with an unsuccessful conversion (user dropped off).")},e.a.createElement(Fe.a,{className:"cursor-pointer"})))," ","correlation score of"," ",e.a.createElement("b",{style:{color:F==="strong"?"var(--success)":F==="moderate"?"var(--warning)":"var(--danger)"}},e.a.createElement(P.a,{title:"This ".concat(g," has ").concat(F," correlation.")},e.a.createElement("span",{style:{cursor:"pointer"}},M," ",re.toFixed(3)))))):e.a.createElement("div",null,e.a.createElement(fa.a,{type:"danger"},"We could not load the details for this correlation value. Please recreate your funnel and try again."))))}function pa(){var l=Object(o.useValues)(T.c),a=l.insightProps,r=Object(pe.a)(a),s=Object(o.useValues)(r),d=s.stepsWithCount,i=s.correlationValues,c=s.correlationTypes,m=s.eventHasPropertyCorrelations,u=s.eventWithPropertyCorrelationsValues,f=s.parseDisplayNameForCorrelation,b=s.correlationsLoading,g=s.eventWithPropertyCorrelationsLoading,v=s.nestedTableExpandedKeys,R=s.correlationPropKey,y=s.filters,I=s.aggregationTargetLabel,O=Object(o.useActions)(r),re=O.setCorrelationTypes,h=O.loadEventWithPropertyCorrelations,x=O.addNestedTableExpandedKey,D=O.removeNestedTableExpandedKey,W=O.openCorrelationPersonsModal,F=O.loadCorrelations,M=Object(o.useActions)(Tt.f),N=M.reportCorrelationInteraction;Object($.useEffect)(function(){F({})},[y]);var ae=function(k){c?c.includes(k)?re(c.filter(function(oe){return oe!==k})):re([].concat(Le()(c),[k])):re([k])},ge=function(k){var oe=function(bt){return bt<10&&!Number.isInteger(bt)?bt.toFixed(1):bt.toFixed()},he=k.correlation_type===n.s.Success,fe=f(k),Be=fe.first_value,ht=fe.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,he?e.a.createElement(nn.a,{style:{color:"green"}}):e.a.createElement(rn,{style:{color:"red"}})," ",e.a.createElement(Ge.a,{value:Be}),ht!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Ge.a,{value:ht,disablePopover:!0}))),e.a.createElement("div",null,Object(p.j)(I.plural)," ",y.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,oe(k.odds_ratio),"x ",he?"more":"less"," likely"))," ","to"," ",k.result_type===n.r.EventWithProperties?"have this event property":"do this event"),e.a.createElement(va,null))},se=function(k){return e.a.createElement(Ye.a,{onClick:function(){W(k,!0)}},k.success_count)},w=function(k){return e.a.createElement(Ye.a,{onClick:function(){W(k,!1)}},k.failure_count)},Z=function(k){return g?e.a.createElement("div",{className:"nested-properties-loading"},e.a.createElement(ea.a,null),e.a.createElement("h3",null,"Loading correlation results"),e.a.createElement("p",null,"This process can take up to 20 seconds. ")):e.a.createElement("div",null,e.a.createElement("h4",{style:{paddingLeft:16}},"Correlated properties"),e.a.createElement(It.a,{dataSource:u[k],rowKey:function(he){return he.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(he,fe){return N(n.r.EventWithProperties,"pagination change",{page:he,page_size:fe})}}},e.a.createElement(Ce.a,{title:"Property",key:"eventName",render:function(he,fe){return ge(fe)},align:"left"}),e.a.createElement(Ce.a,{title:"Completed",key:"success_count",render:function(he,fe){return se(fe)},width:90,align:"center"}),e.a.createElement(Ce.a,{title:"Dropped off",key:"failure_count",render:function(he,fe){return w(fe)},width:120,align:"center"}),e.a.createElement(Ce.a,{title:"",key:"actions",render:function(he,fe){return e.a.createElement(un,{record:fe})},align:"center",width:30})))};return d.length>1?e.a.createElement(et,{id:R,offset:152},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement("span",{className:"funnel-correlation-header"},e.a.createElement("span",{className:"table-header"},e.a.createElement(Ne.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"),e.a.createElement("span",{className:"table-options"},e.a.createElement("p",{className:"title"},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return ae(n.s.Success)}},e.a.createElement(pt.a,{checked:c.includes(n.s.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return ae(n.s.Failure)}},e.a.createElement(pt.a,{checked:c.includes(n.s.Failure),style:{pointerEvents:"none"}},"Dropoff")))),e.a.createElement(It.a,{dataSource:i,loading:b,size:"small",scroll:{x:"max-content"},rowKey:function(k){return k.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return N(n.r.Events,"load more")}},expandable:{expandedRowRender:function(k){return Z(k.event.event)},expandedRowKeys:v,rowExpandable:function(){return y.aggregation_group_type_index===void 0},expandIcon:function(k){var oe=k.expanded,he=k.onExpand,fe=k.record,Be=k.expandable;return Be?oe?e.a.createElement(P.a,{title:"Collapse"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Et){D(fe.event.event),he(fe,Et)}},e.a.createElement(Ne.IconUnfoldLess,null))):e.a.createElement(P.a,{title:"Expand to see correlated properties for this event"},e.a.createElement("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Et){!m(fe.event.event)&&h(fe.event.event),x(fe.event.event),he(fe,Et)}},e.a.createElement(Ne.IconUnfoldMore,null))):null}}},e.a.createElement(Ce.a,{title:"Event",key:"eventName",render:function(k,oe){return ge(oe)},align:"left",ellipsis:!0}),e.a.createElement(Ce.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(P.a,{title:"".concat(Object(p.j)(I.plural)," ").concat(y.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel.")},e.a.createElement(Fe.a,{className:"column-info"}))),key:"success_count",render:function(k,oe){return se(oe)},width:90,align:"center"}),e.a.createElement(Ce.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(P.a,{title:e.a.createElement(e.a.Fragment,null,Object(p.j)(I.plural)," ",y.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(Fe.a,{className:"column-info"}))),key:"failure_count",render:function(k,oe){return w(oe)},width:120,align:"center"}),e.a.createElement(Ce.a,{title:"",key:"actions",render:function(k,oe){return e.a.createElement(un,{record:oe})},width:30})))):null}var un=function(a){var r=a.record,s=Object(o.useValues)(T.c),d=s.insightProps,i=Object(pe.a)(d),c=Object(o.useActions)(i),m=c.excludeEventPropertyFromProject,u=c.excludeEventFromProject,f=c.setFunnelCorrelationDetails,b=Object(o.useValues)(i),g=b.isEventPropertyExcluded,v=b.isEventExcluded,R=r.event.event.split("::"),y=Object($.useState)(!1),I=je()(y,2),O=I[0],re=I[1];return e.a.createElement(G.a,{style:{justifyContent:"flex-end"}},e.a.createElement(on.a,{visible:O,actionable:!0,onClickOutside:function(){return re(!1)},overlay:e.a.createElement(e.a.Fragment,null,r.result_type===n.r.Events&&e.a.createElement(Ke.a,{onClick:function(){return f(r)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Ke.a,{disabled:r.result_type===n.r.EventWithProperties?g(R[1]):v(R[0]),onClick:function(){return r.result_type===n.r.EventWithProperties?m(R[0],R[1]):u(R[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",type:"stealth"},"Exclude event from project"))},e.a.createElement(Ke.a,{type:"stealth",onClick:function(){return re(!O)}},e.a.createElement(ln.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},ga=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function ha(){var l=Object(o.useValues)(T.c),a=l.insightProps,r=Object(pe.a)(a),s=Object(o.useValues)(r),d=s.stepsWithCount,i=s.propertyCorrelationValues,c=s.propertyCorrelationTypes,m=s.excludedPropertyNames,u=s.parseDisplayNameForCorrelation,f=s.propertyCorrelationsLoading,b=s.inversePropertyNames,g=s.propertyNames,v=s.correlationPropKey,R=s.allProperties,y=s.filters,I=s.aggregationTargetLabel,O=Object(o.useActions)(r),re=O.setPropertyCorrelationTypes,h=O.setPropertyNames,x=O.openCorrelationPersonsModal,D=O.loadPropertyCorrelations,W=Object(o.useActions)(Tt.f),F=W.reportCorrelationInteraction;Object($.useEffect)(function(){g.length===0&&h(R),D({})},[y]);var M=function(w){c?c.includes(w)?re(c.filter(function(Z){return Z!==w})):re([].concat(Le()(c),[w])):re([w])},N=function(w){return e.a.createElement(Ye.a,{onClick:function(){x(w,!0)}},w.success_count)},ae=function(w){return e.a.createElement(Ye.a,{onClick:function(){x(w,!1)}},w.failure_count)},ge=function(w){var Z=function(Be){return Be<10&&!Number.isInteger(Be)?Be.toFixed(1):Be.toFixed()},ve=w.correlation_type===n.s.Success,k=u(w),oe=k.first_value,he=k.second_value;return e.a.createElement(e.a.Fragment,null,e.a.createElement("h4",null,ve?e.a.createElement(nn.a,{style:{color:"green"}}):e.a.createElement(rn,{style:{color:"red"}})," ",e.a.createElement(Ge.a,{value:oe}),he!==void 0&&e.a.createElement(e.a.Fragment,null," :: ",e.a.createElement(Ge.a,{value:he,disablePopover:!0}))),e.a.createElement("div",null,Object(p.j)(I.plural)," ",y.aggregation_group_type_index!=null?"that":"who"," converted were"," ",e.a.createElement("mark",null,e.a.createElement("b",null,Z(w.odds_ratio),"x ",ve?"more":"less"," likely"))," ","to have this property value"))};return d.length>1?e.a.createElement(et,{offset:150,id:"".concat(v,"-properties")},e.a.createElement("div",{className:"funnel-correlation-table"},e.a.createElement(G.a,{className:"funnel-correlation-header"},e.a.createElement(z.a,{className:"table-header"},e.a.createElement(Ne.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"),e.a.createElement(z.a,{className:"table-options"},e.a.createElement(G.a,{style:{display:"contents"}},R.length>0&&e.a.createElement(e.a.Fragment,null,e.a.createElement("p",{className:"title"},"PROPERTIES "),e.a.createElement(ga.a,{value:new Set(g),onChange:function(w){return h(w)},allProperties:b(m||[])}))),e.a.createElement(G.a,{style:{display:"contents"}},e.a.createElement("p",{className:"title",style:{marginLeft:8}},"CORRELATION"),e.a.createElement("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return M(n.s.Success)}},e.a.createElement(pt.a,{checked:c.includes(n.s.Success),style:{pointerEvents:"none"}},"Success")),e.a.createElement("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return M(n.s.Failure)}},e.a.createElement(pt.a,{checked:c.includes(n.s.Failure),style:{pointerEvents:"none"}},"Dropoff"))))),e.a.createElement(It.a,{dataSource:i,loading:f,scroll:{x:"max-content"},size:"small",rowKey:function(w){return w.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(w,Z){return F(n.r.Properties,"pagination change",{page:w,page_size:Z})}}},e.a.createElement(Ce.a,{title:"".concat(Object(p.j)(I.singular)," property"),key:"propertName",render:function(w,Z){return ge(Z)},align:"left"}),e.a.createElement(Ce.a,{title:e.a.createElement("div",{className:"flex-center"},"Completed",e.a.createElement(P.a,{title:"".concat(Object(p.j)(I.plural)," ").concat(y.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel.")},e.a.createElement(Fe.a,{className:"column-info"}))),key:"success_count",render:function(w,Z){return N(Z)},width:90,align:"center"}),e.a.createElement(Ce.a,{title:e.a.createElement("div",{className:"flex-center"},"Dropped off",e.a.createElement(P.a,{title:e.a.createElement(e.a.Fragment,null,Object(p.j)(I.plural)," ",y.aggregation_group_type_index!=null?"that":"who"," have this property and did ",e.a.createElement("b",null,"not complete")," the entire funnel.")},e.a.createElement(Fe.a,{className:"column-info"}))),key:"failure_count",render:function(w,Z){return ae(Z)},width:120,align:"center"}),e.a.createElement(Ce.a,{title:"",key:"actions",render:function(w,Z){return e.a.createElement(Ea,{record:Z})},align:"center",width:30})))):null}var Ea=function(a){var r=a.record,s=Object(o.useValues)(T.c),d=s.insightProps,i=Object(pe.a)(d),c=Object(o.useActions)(i),m=c.excludePropertyFromProject,u=c.setFunnelCorrelationDetails,f=Object(o.useValues)(i),b=f.isPropertyExcludedFromProject,g=(r.event.event||"").split("::")[0],v=Object($.useState)(!1),R=je()(v,2),y=R[0],I=R[1];return e.a.createElement(G.a,{style:{justifyContent:"flex-end"}},e.a.createElement(on.a,{visible:y,actionable:!0,onClickOutside:function(){return I(!1)},overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(Ke.a,{onClick:function(){return u(r)},fullWidth:!0,type:"stealth"},"View correlation details"),e.a.createElement(Ke.a,{disabled:b(g),onClick:function(){return m(g)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",type:"stealth"},"Exclude property from project"))},e.a.createElement(Ke.a,{type:"stealth",onClick:function(){return I(!y)}},e.a.createElement(ln.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"}))))},ba=function(){var a,r=Object(o.useValues)(T.c),s=r.insightProps,d=Object(o.useValues)(Object(pe.a)(s)),i=d.isSkewed,c=d.stepsWithCount,m=d.correlationFeedbackHidden,u=d.correlationDetailedFeedbackVisible,f=d.correlationFeedbackRating,b=d.correlationAnalysisAvailable,g=d.aggregationTargetLabel,v=Object(o.useActions)(Object(pe.a)(s)),R=v.sendCorrelationAnalysisFeedback,y=v.hideSkewWarning,I=v.hideCorrelationAnalysisFeedback,O=v.setCorrelationFeedbackRating,re=v.setCorrelationDetailedFeedback,h=Object(o.useValues)(qn.a),x=h.preflight,D=Object($.useRef)(null);return c.length<=1?null:!b&&!(x!=null&&(a=x.instance_preferences)!==null&&a!==void 0&&a.disable_paid_fs)?e.a.createElement(Zn.a,{identifier:n.d.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(g.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(g.plural," are converting or dropping off.")}):e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Correlation analysis"),e.a.createElement("div",{className:"funnel-correlation"},i&&e.a.createElement(q.a,{className:"skew-warning"},e.a.createElement("h4",null,e.a.createElement(Ne.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",e.a.createElement(tn.a,{className:"close-button",onClick:y})),e.a.createElement("div",null,e.a.createElement("b",null,"Tips for adjusting your funnel:"),e.a.createElement("ol",null,e.a.createElement("li",null,"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."),e.a.createElement("li",null,"Choose an event that happens more frequently for subsequent funnels steps.")))),e.a.createElement(pa,null),!m&&e.a.createElement(q.a,{className:"correlation-feedback"},e.a.createElement(G.a,{className:"row-initial"},e.a.createElement(z.a,{span:14},e.a.createElement("h4",null,e.a.createElement(Gn.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?")),e.a.createElement(z.a,{span:9,style:{alignContent:"right"}},!!f&&e.a.createElement("i",{style:{color:"var(--success)",marginRight:8}},"Thanks for your feedback!"),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(W,F){return e.a.createElement(ke.a,{key:F,className:"emoji-button",style:f===W[0]?{background:"#5375FF"}:f?{display:"none"}:{},onClick:function(){f===W[0]?O(0):(O(W[0]),setTimeout(function(){var N;return(N=D.current)===null||N===void 0?void 0:N.focus()},100))}},W[1])})),e.a.createElement(z.a,{span:1},e.a.createElement(tn.a,{className:"close-button",onClick:I}))),e.a.createElement("div",{style:{display:u?void 0:"none"}},e.a.createElement("form",{onSubmit:R},e.a.createElement(Xn.a,{onBlur:function(F){return re(F.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",style:{marginTop:16},ref:D,onKeyDown:function(F){if(F.key==="Enter"&&F.metaKey){var M;(M=D.current)===null||M===void 0||M.blur(),R()}}}),e.a.createElement("div",{className:"text-right"},e.a.createElement(ke.a,{className:"feedback-button","data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit"},"Share feedback"))))),e.a.createElement(ha,null)))},ya=t("./frontend/src/scenes/funnels/Funnel.tsx");function Oa(){var l=Object(o.useValues)(T.c),a=l.insightProps,r=Object(o.useValues)(Object(pe.a)(a)),s=r.isValidFunnel,d=r.insightLoading,i=r.filters,c=r.areFiltersValid,m=r.aggregationTargetLabel,u=Object(o.useValues)(He.b),f=u.showingPeople,b=u.cohortModalVisible,g=Object(o.useActions)(He.b),v=g.setCohortModalVisible,R=g.saveCohortWithUrl,y=s&&c||d;return e.a.createElement(e.a.Fragment,null,e.a.createElement(Gt.a,{visible:f&&!b,view:n.z.FUNNELS,filters:i,onSaveCohort:function(){v(!0)},showModalActions:i.aggregation_group_type_index==null,aggregationTargetLabel:m}),e.a.createElement("div",{className:Object(_t.a)("funnel-insights-container",{"non-empty-state":y})},e.a.createElement(ya.a,null)),e.a.createElement(Jt.a,{visible:b,onOk:function(O){R(O),v(!1)},onCancel:function(){return v(!1)}}))}var Ve,mn=(Ve={},L()(Ve,"".concat(n.z.TRENDS),e.a.createElement($e,{view:n.z.TRENDS})),L()(Ve,"".concat(n.z.STICKINESS),e.a.createElement($e,{view:n.z.STICKINESS})),L()(Ve,"".concat(n.z.LIFECYCLE),e.a.createElement($e,{view:n.z.LIFECYCLE})),L()(Ve,"".concat(n.z.FUNNELS),e.a.createElement(Oa,null)),L()(Ve,"".concat(n.z.RETENTION),e.a.createElement(zn.a,null)),L()(Ve,"".concat(n.z.PATHS),e.a.createElement(Kn.a,null)),Ve);function gt(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1,disableCorrelationTable:!1},a=l.disableHeader,r=l.disableTable,s=l.disableCorrelationTable,d=Object(o.useValues)(Ut.a),i=d.featureFlags,c=Object(o.useValues)(Xt.a),m=c.insightMode,u=Object(o.useValues)(T.c),f=u.insightProps,b=u.canEditInsight,g=u.insightLoading,v=u.activeView,R=u.loadedView,y=u.filters,I=u.showTimeoutMessage,O=u.showErrorMessage,re=u.csvExportUrl,h=Object(o.useValues)(Object(pe.a)(f)),x=h.areFiltersValid,D=h.isValidFunnel,W=h.areExclusionFiltersValid,F=h.correlationAnalysisAvailable,M=function(){if(v!==R||g&&!I)return e.a.createElement("div",{className:"text-center"},e.a.createElement($n.a,{type:Yn.a.LaptopHog}));if(R===n.z.FUNNELS){if(!x)return e.a.createElement(qe.b,{actionable:m===n.A.Edit||r});if(!W)return e.a.createElement(qe.a,null);if(!D&&!g)return e.a.createElement(qe.c,null)}return O?e.a.createElement(qe.d,null):I?e.a.createElement(qe.e,{isLoading:g}):null}();function N(){return v===n.z.FUNNELS&&!O&&!I&&x&&D&&y.funnel_viz_type===n.v.Steps&&!r?e.a.createElement(e.a.Fragment,null,e.a.createElement("h2",{style:{margin:"1rem 0"}},"Detailed results"),e.a.createElement(Hn,null)):(!y.display||(y==null?void 0:y.display)!==n.j.ActionsTable&&(y==null?void 0:y.display)!==n.j.ActionsBarValue)&&v===n.z.TRENDS&&!r?e.a.createElement(e.a.Fragment,null,re&&e.a.createElement("div",{className:"flex-center space-between-items",style:{margin:"1rem 0"}},e.a.createElement("h2",null,"Detailed results"),e.a.createElement(P.a,{title:"Export this table in CSV format",placement:"left"},e.a.createElement(Ke.a,{type:"secondary",icon:e.a.createElement(Ne.IconExport,{style:{color:"var(--primary)"}}),href:re},"Export"))),e.a.createElement(o.BindLogic,{logic:ft.a,props:f},e.a.createElement(St.b,{isLegend:!0,showTotalCount:!0,filterKey:v===n.z.TRENDS?"trends_".concat(v):"",canEditSeriesNameInline:v===n.z.TRENDS&&m===n.A.Edit,canCheckUncheckSeries:b}))):null}return e.a.createElement(e.a.Fragment,null,e.a.createElement(q.a,{title:a?null:e.a.createElement(ut,{activeView:v,insightMode:m,filters:y,disableTable:!!r}),"data-attr":"insights-graph",className:"insights-graph-container"},e.a.createElement("div",null,e.a.createElement(G.a,{className:Object(_t.a)("insights-graph-header",{funnels:v===n.z.FUNNELS}),align:"middle",justify:"space-between"},e.a.createElement(z.a,null,e.a.createElement(Vn,null)),e.a.createElement(z.a,null,v===n.z.FUNNELS?e.a.createElement(Mn,null):null,v===n.z.PATHS?e.a.createElement(Wn,null):null,e.a.createElement(Qt.b,null))),M||(i[xe.h.INSIGHT_LEGENDS]&&(v===n.z.TRENDS||v===n.z.STICKINESS)&&y.show_legend?e.a.createElement(G.a,{className:"insights-graph-container-row",wrap:!1},e.a.createElement(z.a,{className:"insights-graph-container-row-left"},mn[v]),e.a.createElement(z.a,{className:"insights-graph-container-row-right"},e.a.createElement(Qt.a,null))):mn[v]))),N(),!s&&F&&v===n.z.FUNNELS&&e.a.createElement(ba,null))}try{gt.displayName="InsightContainer",gt.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}},disableCorrelationTable:{defaultValue:null,description:"",name:"disableCorrelationTable",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:gt.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(l){}},"./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts":function(ie,S,t){"use strict";t.d(S,"a",function(){return Pe});var A=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),L=t.n(A),q=t("./node_modules/core-js/modules/es.array.iterator.js"),G=t.n(q),z=t("./node_modules/core-js/modules/es.object.to-string.js"),ue=t.n(z),ee=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$=t.n(ee),e=t("./node_modules/core-js/modules/es.object.keys.js"),o=t.n(e),J=t("./node_modules/core-js/modules/es.symbol.js"),be=t.n(J),Ee=t("./node_modules/core-js/modules/es.array.filter.js"),Oe=t.n(Ee),le=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Te=t.n(le),V=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),te=t.n(V),j=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),C=t.n(j),B=t("./node_modules/kea/lib/index.esm.js"),K=t("./frontend/src/scenes/insights/insightLogic.ts"),Y=t("./frontend/src/scenes/insights/sharedUtils.ts");function ce(H,ne){var E=Object.keys(H);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(H);ne&&(_=_.filter(function(n){return Object.getOwnPropertyDescriptor(H,n).enumerable})),E.push.apply(E,_)}return E}function me(H){for(var ne=1;ne<arguments.length;ne++){var E=arguments[ne]!=null?arguments[ne]:{};ne%2?ce(Object(E),!0).forEach(function(_){L()(H,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(E)):ce(Object(E)).forEach(function(_){Object.defineProperty(H,_,Object.getOwnPropertyDescriptor(E,_))})}return H}var Pe=Object(B.kea)({props:{},key:Object(Y.c)("new"),path:function(ne){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",ne]},connect:function(ne){return{actions:[Object(K.c)(ne),["setFilters"]],values:[Object(K.c)(ne),["filters"]]}},actions:function(){return{setDates:function(E,_){return{dateFrom:E,dateTo:_}}}},selectors:{dates:[function(H){return[H.filters]},function(H){return{dateFrom:(H==null?void 0:H.date_from)||null,dateTo:(H==null?void 0:H.date_to)||null}}]},listeners:function(ne){var E=ne.actions,_=ne.values;return{setDates:function(p){var T=p.dateFrom,Se=p.dateTo;E.setFilters(me(me({},_.filters),{},{date_from:T||null,date_to:Se||null}))}}}})},"./frontend/src/scenes/trends/SaveCohortModal.tsx":function(ie,S,t){"use strict";t.d(S,"a",function(){return ee});var A=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),L=t.n(A),q=t("./node_modules/react/index.js"),G=t.n(q),z=t("./node_modules/antd/es/modal/index.js"),ue=t("./node_modules/antd/es/input/index.js");function ee($){var e=$.onOk,o=$.onCancel,J=$.visible,be=Object(q.useState)(""),Ee=L()(be,2),Oe=Ee[0],le=Ee[1];return G.a.createElement(z.a,{title:"New Cohort",okText:"Save",cancelText:"Cancel",onOk:function(){e(Oe),le("")},onCancel:o,visible:J},G.a.createElement("div",{className:"mb"},G.a.createElement(ue.a,{required:!0,autoFocus:!0,placeholder:"Cohort name...",value:Oe,"data-attr":"cohort-name",onChange:function(V){return le(V.target.value)}})))}try{ee.displayName="SaveCohortModal",ee.__docgenInfo={description:"",displayName:"SaveCohortModal",props:{onOk:{defaultValue:null,description:"",name:"onOk",required:!0,type:{name:"(title: string) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"]={docgenInfo:ee.__docgenInfo,name:"SaveCohortModal",path:"frontend/src/scenes/trends/SaveCohortModal.tsx#SaveCohortModal"})}catch($){}},"./node_modules/@ant-design/icons/es/icons/BarChartOutlined.js":function(ie,S,t){"use strict";var A=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),L=t("./node_modules/react/index.js"),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},G=q,z=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ue=function(e,o){return L.createElement(z.a,Object(A.a)(Object(A.a)({},e),{},{ref:o,icon:G}))};ue.displayName="BarChartOutlined";var ee=S.a=L.forwardRef(ue)},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(ie,S,t){"use strict";var A=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),L=t("./node_modules/react/index.js"),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},G=q,z=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ue=function(e,o){return L.createElement(z.a,Object(A.a)(Object(A.a)({},e),{},{ref:o,icon:G}))};ue.displayName="OrderedListOutlined";var ee=S.a=L.forwardRef(ue)},"./node_modules/@ant-design/icons/es/icons/PercentageOutlined.js":function(ie,S,t){"use strict";var A=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),L=t("./node_modules/react/index.js"),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},G=q,z=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ue=function(e,o){return L.createElement(z.a,Object(A.a)(Object(A.a)({},e),{},{ref:o,icon:G}))};ue.displayName="PercentageOutlined";var ee=S.a=L.forwardRef(ue)},"./node_modules/antd/lib/checkbox/Checkbox.js":function(ie,S,t){"use strict";var A=t("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),L=t("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var q=A(t("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),G=A(t("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),z=be(t("./node_modules/react/index.js")),ue=A(t("./node_modules/classnames/index.js")),ee=A(t("./node_modules/rc-checkbox/es/index.js")),$=t("./node_modules/antd/lib/checkbox/Group.js"),e=t("./node_modules/antd/lib/config-provider/index.js"),o=A(t("./node_modules/antd/lib/_util/devWarning.js"));function J(V){if(typeof WeakMap!="function")return null;var te=new WeakMap,j=new WeakMap;return(J=function(B){return B?j:te})(V)}function be(V,te){if(!te&&V&&V.__esModule)return V;if(V===null||L(V)!=="object"&&typeof V!="function")return{default:V};var j=J(te);if(j&&j.has(V))return j.get(V);var C={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in V)if(K!=="default"&&Object.prototype.hasOwnProperty.call(V,K)){var Y=B?Object.getOwnPropertyDescriptor(V,K):null;Y&&(Y.get||Y.set)?Object.defineProperty(C,K,Y):C[K]=V[K]}return C.default=V,j&&j.set(V,C),C}var Ee=function(V,te){var j={};for(var C in V)Object.prototype.hasOwnProperty.call(V,C)&&te.indexOf(C)<0&&(j[C]=V[C]);if(V!=null&&typeof Object.getOwnPropertySymbols=="function")for(var B=0,C=Object.getOwnPropertySymbols(V);B<C.length;B++)te.indexOf(C[B])<0&&Object.prototype.propertyIsEnumerable.call(V,C[B])&&(j[C[B]]=V[C[B]]);return j},Oe=function(te,j){var C,B=te.prefixCls,K=te.className,Y=te.children,ce=te.indeterminate,me=ce===void 0?!1:ce,Pe=te.style,H=te.onMouseEnter,ne=te.onMouseLeave,E=te.skipGroup,_=E===void 0?!1:E,n=Ee(te,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),p=z.useContext(e.ConfigContext),T=p.getPrefixCls,Se=p.direction,P=z.useContext($.GroupContext),X=z.useRef(n.value);z.useEffect(function(){P==null||P.registerValue(n.value),(0,o.default)("checked"in n||!!P||!("value"in n),"Checkbox","`value` is not a valid prop, do you mean `checked`?")},[]),z.useEffect(function(){if(!_)return n.value!==X.current&&(P==null||P.cancelValue(X.current),P==null||P.registerValue(n.value)),function(){return P==null?void 0:P.cancelValue(n.value)}},[n.value]);var U=T("checkbox",B),Q=(0,G.default)({},n);P&&!_&&(Q.onChange=function(){n.onChange&&n.onChange.apply(n,arguments),P.toggleOption&&P.toggleOption({label:Y,value:n.value})},Q.name=P.name,Q.checked=P.value.indexOf(n.value)!==-1,Q.disabled=n.disabled||P.disabled);var de=(0,ue.default)((C={},(0,q.default)(C,"".concat(U,"-wrapper"),!0),(0,q.default)(C,"".concat(U,"-rtl"),Se==="rtl"),(0,q.default)(C,"".concat(U,"-wrapper-checked"),Q.checked),(0,q.default)(C,"".concat(U,"-wrapper-disabled"),Q.disabled),C),K),Ie=(0,ue.default)((0,q.default)({},"".concat(U,"-indeterminate"),me));return z.createElement("label",{className:de,style:Pe,onMouseEnter:H,onMouseLeave:ne},z.createElement(ee.default,(0,G.default)({},Q,{prefixCls:U,className:Ie,ref:j})),Y!==void 0&&z.createElement("span",null,Y))},le=z.forwardRef(Oe);le.displayName="Checkbox";var Te=le;S.default=Te},"./node_modules/antd/lib/checkbox/Group.js":function(ie,S,t){"use strict";var A=t("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),L=t("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(S,"__esModule",{value:!0}),S.default=S.GroupContext=void 0;var q=A(t("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),G=A(t("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),z=A(t("./node_modules/antd/node_modules/@babel/runtime/helpers/toConsumableArray.js")),ue=A(t("./node_modules/antd/node_modules/@babel/runtime/helpers/slicedToArray.js")),ee=Ee(t("./node_modules/react/index.js")),$=A(t("./node_modules/classnames/index.js")),e=A(t("./node_modules/antd/node_modules/rc-util/lib/omit.js")),o=A(t("./node_modules/antd/lib/checkbox/Checkbox.js")),J=t("./node_modules/antd/lib/config-provider/index.js");function be(j){if(typeof WeakMap!="function")return null;var C=new WeakMap,B=new WeakMap;return(be=function(Y){return Y?B:C})(j)}function Ee(j,C){if(!C&&j&&j.__esModule)return j;if(j===null||L(j)!=="object"&&typeof j!="function")return{default:j};var B=be(C);if(B&&B.has(j))return B.get(j);var K={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ce in j)if(ce!=="default"&&Object.prototype.hasOwnProperty.call(j,ce)){var me=Y?Object.getOwnPropertyDescriptor(j,ce):null;me&&(me.get||me.set)?Object.defineProperty(K,ce,me):K[ce]=j[ce]}return K.default=j,B&&B.set(j,K),K}var Oe=function(j,C){var B={};for(var K in j)Object.prototype.hasOwnProperty.call(j,K)&&C.indexOf(K)<0&&(B[K]=j[K]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,K=Object.getOwnPropertySymbols(j);Y<K.length;Y++)C.indexOf(K[Y])<0&&Object.prototype.propertyIsEnumerable.call(j,K[Y])&&(B[K[Y]]=j[K[Y]]);return B},le=ee.createContext(null);S.GroupContext=le;var Te=function(C,B){var K=C.defaultValue,Y=C.children,ce=C.options,me=ce===void 0?[]:ce,Pe=C.prefixCls,H=C.className,ne=C.style,E=C.onChange,_=Oe(C,["defaultValue","children","options","prefixCls","className","style","onChange"]),n=ee.useContext(J.ConfigContext),p=n.getPrefixCls,T=n.direction,Se=ee.useState(_.value||K||[]),P=(0,ue.default)(Se,2),X=P[0],U=P[1],Q=ee.useState([]),de=(0,ue.default)(Q,2),Ie=de[0],We=de[1];ee.useEffect(function(){"value"in _&&U(_.value||[])},[_.value]);var je=function(){return me.map(function(_e){return typeof _e=="string"?{label:_e,value:_e}:_e})},Je=function(_e){We(function(ze){return ze.filter(function(Ae){return Ae!==_e})})},Xe=function(_e){We(function(ze){return[].concat((0,z.default)(ze),[_e])})},tt=function(_e){var ze=X.indexOf(_e.value),Ae=(0,z.default)(X);ze===-1?Ae.push(_e.value):Ae.splice(ze,1),"value"in _||U(Ae);var Qe=je();E==null||E(Ae.filter(function(we){return Ie.indexOf(we)!==-1}).sort(function(we,at){var Ze=Qe.findIndex(function(Re){return Re.value===we}),Ot=Qe.findIndex(function(Re){return Re.value===at});return Ze-Ot}))},yt=p("checkbox",Pe),nt="".concat(yt,"-group"),Dt=(0,e.default)(_,["value","disabled"]);me&&me.length>0&&(Y=je().map(function(ye){return ee.createElement(o.default,{prefixCls:yt,key:ye.value.toString(),disabled:"disabled"in ye?ye.disabled:_.disabled,value:ye.value,checked:X.indexOf(ye.value)!==-1,onChange:ye.onChange,className:"".concat(nt,"-item"),style:ye.style},ye.label)}));var Mt={toggleOption:tt,value:X,disabled:_.disabled,name:_.name,registerValue:Xe,cancelValue:Je},Nt=(0,$.default)(nt,(0,G.default)({},"".concat(nt,"-rtl"),T==="rtl"),H);return ee.createElement("div",(0,q.default)({className:Nt,style:ne},Dt,{ref:B}),ee.createElement(le.Provider,{value:Mt},Y))},V=ee.forwardRef(Te),te=ee.memo(V);S.default=te},"./node_modules/antd/lib/table/Column.js":function(ie,S,t){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;function A(q){return null}var L=A;S.default=L},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(ie,S,t){var A=t("./node_modules/css-loader/dist/runtime/api.js");S=A(!1),S.push([ie.i,".insights-graph-header.funnels{border-bottom:1px solid var(--border)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:var(--text-default)}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),ie.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss":function(ie,S,t){var A=t("./node_modules/css-loader/dist/runtime/api.js");S=A(!1),S.push([ie.i,".correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:var(--radius);border:1px solid var(--border);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid var(--border);border-top:1px solid var(--border);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:var(--text-muted-alt)}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:var(--antd-table-background-dark);text-transform:uppercase;color:var(--text-muted)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),ie.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss":function(ie,S,t){var A=t("./node_modules/css-loader/dist/runtime/api.js");S=A(!1),S.push([ie.i,".funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid var(--warning)}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid var(--border);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:var(--text-muted)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:var(--font-medium)}.funnel-correlation .correlation-feedback{margin-top:1rem}.funnel-correlation .correlation-feedback .ant-card-body{padding:.5rem 1rem}.funnel-correlation .correlation-feedback h4{padding:0;margin:0;font-weight:700;color:var(--text-muted-alt)}.funnel-correlation .correlation-feedback .emoji-button{margin-right:4px}.funnel-correlation .correlation-feedback .emoji-button:last-of-type{margin-right:0}.funnel-correlation .correlation-feedback .row-initial{display:flex;align-items:center}.funnel-correlation .correlation-feedback .row-initial .ant-col{text-align:right}.funnel-correlation .correlation-feedback .row-initial .ant-col:first-of-type{text-align:left}.funnel-correlation .correlation-feedback .close-button{color:var(--text-muted)!important;cursor:pointer;z-index:var(--z-raised)}.funnel-correlation .correlation-feedback .feedback-button{margin:1rem 0}",""]),ie.exports=S},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss":function(ie,S,t){var A=t("./node_modules/css-loader/dist/runtime/api.js");S=A(!1),S.push([ie.i,".funnel-correlation-table{margin-top:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius);padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:var(--text-default);margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:var(--text-muted-alt);cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:var(--text-muted-alt)}",""]),ie.exports=S}}]);
