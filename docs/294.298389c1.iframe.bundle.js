var On=Object.defineProperty,Sn=Object.defineProperties;var En=Object.getOwnPropertyDescriptors;var Nt=Object.getOwnPropertySymbols;var wn=Object.prototype.hasOwnProperty,Nn=Object.prototype.propertyIsEnumerable;var It=(V,I,l)=>I in V?On(V,I,{enumerable:!0,configurable:!0,writable:!0,value:l}):V[I]=l,h=(V,I)=>{for(var l in I||(I={}))wn.call(I,l)&&It(V,l,I[l]);if(Nt)for(var l of Nt(I))Nn.call(I,l)&&It(V,l,I[l]);return V},w=(V,I)=>Sn(V,En(I));var A=(V,I,l)=>new Promise((M,te)=>{var j=U=>{try{X(l.next(U))}catch(D){te(D)}},p=U=>{try{X(l.throw(U))}catch(D){te(D)}},X=U=>U.done?M(U.value):Promise.resolve(U.value).then(j,p);X((l=l.apply(V,I)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/experiments/Experiment.tsx":function(V,I,l){"use strict";l.r(I),l.d(I,"scene",function(){return Ht}),l.d(I,"Experiment",function(){return jt});var M=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/form/index.js"),te=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/skeleton/index.js"),j=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),p=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),X=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input/index.js"),U=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tooltip/index.js"),D=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),$e=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/card/index.js"),it=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tag/index.js"),at=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/collapse/index.js"),st=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/progress/index.js"),L=l("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),ot=l("./frontend/src/lib/components/PageHeader.tsx"),Ft=l("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),_t=l("./frontend/src/lib/components/PropertyFilters/utils.ts"),v=l("./frontend/src/lib/components/TaxonomicFilter/types.ts"),le=l("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),Oe=l("./frontend/src/scenes/funnels/funnelLogic.ts"),se=l("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),de=l("./frontend/src/scenes/insights/insightLogic.ts"),c=l("./frontend/src/types.ts"),Ct=l("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Tt=l.n(Ct),kt=l("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss"),lt=l.n(kt),Pe={};Pe.insert="head",Pe.singleton=!1;var In=Tt()(lt.a,Pe),Fn=lt.a.locals||{},W=l("./frontend/src/lib/api.ts"),S=l("./frontend/src/lib/dayjs.ts"),Se=l("./frontend/src/scenes/insights/utils/cleanFilters.ts"),Ae=l("./frontend/src/scenes/teamLogic.tsx"),H=l("./frontend/src/scenes/urls.ts"),oe=l("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),Dt=l("./frontend/src/scenes/experiments/experimentsLogic.ts"),ce=l("./frontend/src/lib/constants.tsx"),Ve=l("./frontend/src/scenes/trends/trendsLogic.ts"),pe=l("./frontend/src/lib/utils/eventUsageLogic.ts"),Rt=l("./frontend/src/scenes/userLogic.ts"),dt=l("./frontend/src/lib/components/Tooltip.tsx"),me=l("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Mt=l("./frontend/src/models/groupsModel.ts"),Ye=l("./frontend/src/lib/components/lemonToast.tsx"),_=l("./frontend/src/lib/utils.tsx"),e=l("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const ue=14,xe=Object(L.kea)({props:{},key:t=>t.experimentId||"new",path:t=>["scenes","experiment","experimentLogic",t],connect:{values:[Ae.a,["currentTeamId"],Rt.a,["hasAvailableFeature"],Mt.a,["groupTypes","groupsTaxonomicTypes","aggregationLabel"]],actions:[Dt.a,["updateExperiments","addToExperiments"]]},actions:{setExperiment:t=>({experiment:t}),createExperiment:(t,n,r)=>({draft:t,runningTime:n,sampleSize:r}),setExperimentInsightId:t=>({shortId:t}),createNewExperimentInsight:t=>({filters:t}),setFilters:t=>({filters:t}),setNewExperimentData:t=>({experimentData:t}),updateExperimentGroup:(t,n)=>({variant:t,idx:n}),removeExperimentGroup:t=>({idx:t}),setExperimentInsightType:t=>({insightType:t}),setEditExperiment:t=>({editing:t}),setSecondaryMetrics:t=>({secondaryMetrics:t}),setExperimentResultCalculationError:t=>({error:t}),setFlagImplementationWarning:t=>({warning:t}),setFlagAvailabilityWarning:t=>({warning:t}),resetNewExperiment:!0,launchExperiment:!0,endExperiment:!0,addExperimentGroup:!0,archiveExperiment:!0},reducers:{newExperimentData:[null,{setNewExperimentData:(t,n)=>{let{experimentData:r}=n;if(r.filters){const a=h(h({},t==null?void 0:t.filters),r.filters);return w(h(h({},t),r),{filters:a})}if(r.parameters){const a=h(h({},t==null?void 0:t.parameters),r.parameters);return w(h(h({},t),r),{parameters:a})}return h(h({},t),r)},updateExperimentGroup:(t,n)=>{var r;let{variant:a,idx:o}=n;const d=[...(t==null||(r=t.parameters)===null||r===void 0?void 0:r.feature_flag_variants)||[]];return d[o]=h(h({},d[o]),a),w(h({},t),{parameters:w(h({},t==null?void 0:t.parameters),{feature_flag_variants:d})})},addExperimentGroup:t=>{var n;if(t!=null&&(n=t.parameters)!==null&&n!==void 0&&n.feature_flag_variants){const r=ct(t.parameters.feature_flag_variants.length+1),a=t.parameters.feature_flag_variants.map((o,d)=>w(h({},o),{rollout_percentage:r[d]}));return w(h({},t),{parameters:w(h({},t.parameters),{feature_flag_variants:[...a,{key:`test_group_${t.parameters.feature_flag_variants.length}`,rollout_percentage:r[r.length-1]}]})})}return t},removeExperimentGroup:(t,n)=>{var r,a;let{idx:o}=n;if(!t)return t;const d=[...((r=t.parameters)===null||r===void 0?void 0:r.feature_flag_variants)||[]];d.splice(o,1);const m=ct(((t==null||(a=t.parameters)===null||a===void 0?void 0:a.feature_flag_variants)||[]).length-1),s=d.map((x,E)=>w(h({},x),{rollout_percentage:m[E]}));return w(h({},t),{parameters:w(h({},t.parameters),{feature_flag_variants:s})})},setSecondaryMetrics:(t,n)=>{let{secondaryMetrics:r}=n;const a=r.map(o=>o);return w(h({},t),{secondary_metrics:a})},resetNewExperiment:()=>({parameters:{feature_flag_variants:[{key:"control",rollout_percentage:50},{key:"test",rollout_percentage:50}]}})}],experimentInsightType:[c.F.TRENDS,{setExperimentInsightType:(t,n)=>{let{insightType:r}=n;return r}}],experimentInsightId:[null,{setExperimentInsightId:(t,n)=>{let{shortId:r}=n;return r}}],editingExistingExperiment:[!1,{setEditExperiment:(t,n)=>{let{editing:r}=n;return r}}],experimentResultCalculationError:[null,{setExperimentResultCalculationError:(t,n)=>{let{error:r}=n;return r}}],flagImplementationWarning:[!1,{setFlagImplementationWarning:(t,n)=>{let{warning:r}=n;return r}}],flagAvailabilityWarning:[!1,{setFlagAvailabilityWarning:(t,n)=>{let{warning:r}=n;return r}}]},listeners:t=>{let{values:n,actions:r}=t;return{createExperiment:a=>A(this,null,function*(){var o;let{draft:d,runningTime:m,sampleSize:s}=a,x=null;const E=!!n.experimentId&&n.experimentId!=="new";try{if(E){var O,C;if(x=yield W.b.update(`api/projects/${n.currentTeamId}/experiments/${n.experimentId}`,h(w(h({},n.newExperimentData),{parameters:w(h({},(O=n.newExperimentData)===null||O===void 0?void 0:O.parameters),{recommended_running_time:m,recommended_sample_size:s})}),!d&&{start_date:Object(S.a)()})),(C=x)!==null&&C!==void 0&&C.id){r.updateExperiments(x),oe.router.actions.push(H.a.experiment(x.id));return}}else{var T;x=yield W.b.create(`api/projects/${n.currentTeamId}/experiments`,h(w(h({},n.newExperimentData),{parameters:w(h({},(T=n.newExperimentData)===null||T===void 0?void 0:T.parameters),{recommended_running_time:m,recommended_sample_size:s})}),!d&&{start_date:Object(S.a)()})),x&&pe.e.actions.reportExperimentCreated(x)}}catch(N){Ye.d.error(N.detail||"Failed to create experiment");return}if((o=x)!==null&&o!==void 0&&o.id){const N=x.id;oe.router.actions.push(H.a.experiment(N)),r.addToExperiments(x),Ye.d.success(`Experiment ${E?"updated":"created"}`,{button:{label:"View it",action:()=>{oe.router.actions.push(H.a.experiment(N))}}})}}),createNewExperimentInsight:a=>A(this,null,function*(){let{filters:o}=a,d;n.experimentInsightType===c.F.FUNNELS?d=Object(Se.a)(h({insight:c.F.FUNNELS,funnel_viz_type:c.B.Steps,date_from:Object(S.a)().subtract(ue,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(S.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:ce.k.horizontal},o)):d=Object(Se.a)(h({insight:c.F.TRENDS,date_from:Object(S.a)().subtract(ue,"day").format("YYYY-MM-DDTHH:mm"),date_to:Object(S.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},o));const m={name:"",description:"",tags:[],filters:d,result:null},s=yield W.b.create(`api/projects/${n.currentTeamId}/insights`,m);r.setExperimentInsightId(s.short_id),r.setNewExperimentData({filters:h({},m.filters)})}),setFilters:a=>{let{filters:o}=a;if(n.experimentInsightType===c.F.FUNNELS){var d;(d=Oe.a.findMounted({dashboardItemId:n.experimentInsightId}))===null||d===void 0||d.actions.setFilters(o)}else{var m;(m=Ve.a.findMounted({dashboardItemId:n.experimentInsightId}))===null||m===void 0||m.actions.setFilters(o)}},loadExperimentSuccess:a=>A(this,null,function*(){let{experimentData:o}=a;o&&pe.e.actions.reportExperimentViewed(o),r.setExperimentInsightType((o==null?void 0:o.filters.insight)||c.F.FUNNELS),o!=null&&o.start_date?(r.resetNewExperiment(),r.loadExperimentResults(),r.loadSecondaryMetricResults()):(r.setNewExperimentData(h({},o)),r.createNewExperimentInsight(o==null?void 0:o.filters))}),launchExperiment:()=>A(this,null,function*(){const a=Object(S.a)();r.updateExperiment({start_date:a.toISOString()}),n.experimentData&&pe.e.actions.reportExperimentLaunched(n.experimentData,a)}),endExperiment:()=>A(this,null,function*(){var a;const o=Object(S.a)();r.updateExperiment({end_date:o.toISOString()});const d=o.diff((a=n.experimentData)===null||a===void 0?void 0:a.start_date,"second");n.experimentData&&pe.e.actions.reportExperimentCompleted(n.experimentData,o,d,n.areResultsSignificant)}),archiveExperiment:()=>A(this,null,function*(){r.updateExperiment({archived:!0}),n.experimentData&&pe.e.actions.reportExperimentArchived(n.experimentData)}),setExperimentInsightType:()=>{if(n.experimentId==="new"||n.editingExistingExperiment)r.createNewExperimentInsight();else{var a;r.createNewExperimentInsight((a=n.experimentData)===null||a===void 0?void 0:a.filters)}},updateExperimentSuccess:a=>A(this,null,function*(){let{experimentData:o}=a;r.updateExperiments(o)}),setNewExperimentData:(a,o)=>A(this,null,function*(){var d,m,s;let{experimentData:x}=a;const E=((d=x.filters)===null||d===void 0?void 0:d.events)&&x.filters.events.length>0||((m=x.filters)===null||m===void 0?void 0:m.actions)&&x.filters.actions.length>0;if(!(!x.filters||Object.keys(x.filters).length===0)){if(E){const O=`/api/projects/${n.currentTeamId}/experiments/requires_flag_implementation?${Object(_.Gb)(x.filters||{})}`;yield o(100);try{const C=yield W.b.get(O);r.setFlagImplementationWarning(C.result)}catch(C){r.setFlagImplementationWarning(!1)}}if((s=x.filters)!==null&&s!==void 0&&s.properties){const O=Object(_.r)(x.filters.properties)||[];if(O.length>0){const C=!!O.find(T=>T.type==="cohort"||!ce.l.includes(T.key||""));r.setFlagAvailabilityWarning(C)}else r.setFlagAvailabilityWarning(!1)}}})}},loaders:t=>{let{actions:n,values:r}=t;return{experimentData:[null,{loadExperiment:()=>A(this,null,function*(){if(r.experimentId&&r.experimentId!=="new")try{return yield W.b.get(`api/projects/${r.currentTeamId}/experiments/${r.experimentId}`)}catch(a){throw a.status===404?a:(Ye.d.error(`Failed to load experiment ${r.experimentId}`),new Error(`Failed to load experiment ${r.experimentId}`))}return null}),updateExperiment:a=>A(this,null,function*(){return yield W.b.update(`api/projects/${r.currentTeamId}/experiments/${r.experimentId}`,a)})}],experimentResults:[null,{loadExperimentResults:()=>A(this,null,function*(){try{const a=yield W.b.get(`api/projects/${r.currentTeamId}/experiments/${r.experimentId}/results`);return w(h({},a),{itemID:Math.random().toString(36).substring(2,15)})}catch(a){return n.setExperimentResultCalculationError(a.detail),null}})}],secondaryMetricResults:[null,{loadSecondaryMetricResults:()=>A(this,null,function*(){var a;return yield Promise.all((((a=r.experimentData)===null||a===void 0?void 0:a.secondary_metrics)||[]).map((o,d)=>A(this,null,function*(){try{return(yield W.b.get(`api/projects/${r.currentTeamId}/experiments/${r.experimentId}/secondary_results?id=${d}`)).result}catch(m){return{}}})))})}]}},selectors:{experimentId:[()=>[(t,n)=>{var r;return(r=n.experimentId)!==null&&r!==void 0?r:"new"}],t=>t],breadcrumbs:[t=>[t.experimentData,t.experimentId],(t,n)=>[{name:"Experiments",path:H.a.experiments()},{name:(t==null?void 0:t.name)||"New",path:H.a.experiment(n||"new")}]],variants:[t=>[t.newExperimentData,t.experimentData],(t,n)=>{var r,a;if(n!=null&&n.start_date){var o;return(n==null||(o=n.parameters)===null||o===void 0?void 0:o.feature_flag_variants)||[]}return(t==null||(r=t.parameters)===null||r===void 0?void 0:r.feature_flag_variants)||(n==null||(a=n.parameters)===null||a===void 0?void 0:a.feature_flag_variants)||[]}],taxonomicGroupTypesForSelection:[t=>[t.newExperimentData,t.groupsTaxonomicTypes],(t,n)=>{var r;return(t==null||(r=t.filters)===null||r===void 0?void 0:r.aggregation_group_type_index)!=null&&n.length>0?[n[t.filters.aggregation_group_type_index]]:[v.a.PersonProperties,v.a.Cohorts]}],parsedSecondaryMetrics:[t=>[t.newExperimentData,t.experimentData],(t,n)=>(t==null?void 0:t.secondary_metrics)||(n==null?void 0:n.secondary_metrics)||[]],minimumDetectableChange:[t=>[t.newExperimentData],t=>{var n;return(t==null||(n=t.parameters)===null||n===void 0?void 0:n.minimum_detectable_effect)||5}],minimumSampleSizePerVariant:[t=>[t.minimumDetectableChange],t=>n=>Math.ceil(1600*n*(1-n/100)/(t*t))],areResultsSignificant:[t=>[t.experimentResults],t=>(t==null?void 0:t.significant)||!1],significanceBannerDetails:[t=>[t.experimentResults],t=>{if((t==null?void 0:t.significance_code)===c.bb.HighLoss){var n;return Object(e.jsxs)(e.Fragment,{children:["This is because the expected loss in conversion is greater than 1%",Object(e.jsx)(dt.a,{placement:"right",title:Object(e.jsxs)(e.Fragment,{children:["Current value is ",(n=((t==null?void 0:t.expected_loss)||0)*100)===null||n===void 0?void 0:n.toFixed(2),"%"]}),children:Object(e.jsx)(me.a,{style:{padding:"4px 2px"}})}),"."]})}if((t==null?void 0:t.significance_code)===c.bb.HighPValue){var r;return Object(e.jsxs)(e.Fragment,{children:["This is because the p value is greater than 0.05",Object(e.jsx)(dt.a,{placement:"right",title:Object(e.jsxs)(e.Fragment,{children:["Current value is ",(t==null||(r=t.p_value)===null||r===void 0?void 0:r.toFixed(3))||1,"."]}),children:Object(e.jsx)(me.a,{style:{padding:"4px 2px"}})}),"."]})}return(t==null?void 0:t.significance_code)===c.bb.LowWinProbability?"This is because the win probability of all test variants combined is less than 90%.":(t==null?void 0:t.significance_code)===c.bb.NotEnoughExposure?"This is because we need at least 100 people per variant to declare significance.":""}],recommendedExposureForCountData:[t=>[t.minimumDetectableChange],t=>n=>{const r=n*t/100,a=n,o=r+n;return parseFloat((4/Math.pow(Math.sqrt(a/ue)-Math.sqrt(o/ue),2)).toFixed(1))}],expectedRunningTime:[()=>[],()=>function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ue;return parseFloat((n/(t/r)).toFixed(1))}],conversionRateForVariant:[t=>[t.experimentResults],t=>n=>{const r="--";if(!t)return r;const a=(t==null?void 0:t.insight).find(o=>{var d,m;return((d=o[0])===null||d===void 0||(m=d.breakdown_value)===null||m===void 0?void 0:m[0])===n});return a?(a[a.length-1].count/a[0].count*100).toFixed(1):r}],getIndexForVariant:[t=>[t.experimentResults],t=>(n,r)=>{let a;if(!t)a=0;else{let o=-1;r===c.F.FUNNELS?o=[...t==null?void 0:t.insight].sort((d,m)=>{var s,x;return((s=m[0])===null||s===void 0?void 0:s.count)-((x=d[0])===null||x===void 0?void 0:x.count)}).findIndex(d=>{var m,s;return((m=d[0])===null||m===void 0||(s=m.breakdown_value)===null||s===void 0?void 0:s[0])===n}):o=(t==null?void 0:t.insight).findIndex(d=>d.breakdown_value===n),a=o===-1?0:o}return r===c.F.FUNNELS&&a++,a}],countDataForVariant:[t=>[t.experimentResults],t=>n=>{const r="--";if(!t)return r;const a=(t==null?void 0:t.insight).find(o=>o.breakdown_value===n);return a?a.count.toString():r}],highestProbabilityVariant:[t=>[t.experimentResults],t=>{if(t){const n=Math.max(...Object.values(t.probability));return Object.keys(t.probability).find(r=>Math.abs(t.probability[r]-n)<Number.EPSILON)}}],areTrendResultsConfusing:[t=>[t.experimentResults,t.highestProbabilityVariant],(t,n)=>{if(!t)return!1;const r=(t==null?void 0:t.insight).reduce((a,o)=>o.count>a.count?o:a,{count:0,breakdown_value:""});return r.count?r.breakdown_value!==n:!1}],sortedExperimentResultVariants:[t=>[t.experimentResults,t.experimentData],(t,n)=>{if(t){var r,a;const o=Object.keys(t.probability).sort((d,m)=>t.probability[m]-t.probability[d]);return n==null||(r=n.parameters)===null||r===void 0||(a=r.feature_flag_variants)===null||a===void 0||a.forEach(d=>{o.includes(d.key)||o.push(d.key)}),o}return[]}]},urlToAction:t=>{let{actions:n,values:r}=t;return{"/experiments/:id":(a,o,d,m,s)=>{let{id:x}=a;if(!r.hasAvailableFeature(c.e.EXPERIMENTATION)){oe.router.actions.push("/experiments");return}const E=m.initial||m.pathname!==(s==null?void 0:s.pathname);if(n.setEditExperiment(!1),x&&E){const O=x==="new"?"new":parseInt(x);O==="new"&&(n.createNewExperimentInsight(),n.resetNewExperiment(),n.setSecondaryMetrics([])),O!=="new"&&O===r.experimentId&&n.loadExperiment()}}}}});function ct(t){const n=Math.round(100/t),a=n*t-100,o=new Array(t).fill(n);return o[t-1]=n-a,o}var Be=l("./frontend/src/scenes/insights/InsightContainer.tsx"),$=l("./frontend/src/lib/components/icons.tsx"),Lt=l("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),Ee=l("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CaretDownOutlined.js"),ze=l("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),$t=l("./frontend/src/lib/components/CopyToClipboard.tsx"),Pt=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/modal/index.js");const pt=14,Ke={name:"",filters:{insight:c.F.TRENDS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}]}},At={name:"",filters:{insight:c.F.FUNNELS,events:[{id:"$pageview",name:"$pageview",type:"events",order:0}],layout:ce.k.horizontal}},Vt=Object(L.kea)({props:{},path:["scenes","experiment","secondaryMetricsLogic"],connect:{values:[Ae.a,["currentTeamId"]]},actions:{setSecondaryMetrics:t=>({secondaryMetrics:t}),createNewMetric:!0,addNewMetric:t=>({metric:t}),updateMetricFilters:t=>({filters:t}),setFilters:t=>({filters:t}),setPreviewInsightId:t=>({shortId:t}),createPreviewInsight:t=>({filters:t}),showModal:!0,hideModal:!0,changeInsightType:t=>({type:t}),setCurrentMetricName:t=>({name:t}),deleteMetric:t=>({metricId:t})},loaders:t=>{let{values:n}=t;return{experiments:[[],{loadExperiments:()=>A(this,null,function*(){return(yield W.b.get(`api/projects/${n.currentTeamId}/experiments`)).results})}]}},reducers:t=>{let{props:n}=t;return{previewInsightId:[null,{setPreviewInsightId:(r,a)=>{let{shortId:o}=a;return o}}],metrics:[n.initialMetrics,{addNewMetric:(r,a)=>{let{metric:o}=a;return[...r,h({},o)]},deleteMetric:(r,a)=>{let{metricId:o}=a;return r.filter((d,m)=>m!==o)}}],modalVisible:[!1,{showModal:()=>!0,hideModal:()=>!1}],currentMetricName:["",{setCurrentMetricName:(r,a)=>{let{name:o}=a;return o}}],currentMetric:[Ke,{changeInsightType:(r,a)=>{let{type:o}=a;return o===c.F.TRENDS?Ke:r.filters.insight===c.F.TRENDS?At:Ke},updateMetricFilters:(r,a)=>{let{filters:o}=a;return w(h({},r),{filters:o})}}]}},listeners:t=>{let{actions:n,values:r,props:a}=t;return{createPreviewInsight:o=>A(this,null,function*(){let{filters:d}=o,m;(d==null?void 0:d.insight)===c.F.FUNNELS?m=Object(Se.a)(h({insight:c.F.FUNNELS,funnel_viz_type:c.B.Steps,date_from:Object(S.a)().subtract(pt,"day").format("YYYY-MM-DD"),date_to:Object(S.a)().endOf("d").format("YYYY-MM-DDTHH:mm"),layout:ce.k.horizontal},d)):m=Object(Se.a)(h({insight:c.F.TRENDS,date_from:Object(S.a)().subtract(pt,"day").format("YYYY-MM-DD"),date_to:Object(S.a)().endOf("d").format("YYYY-MM-DDTHH:mm")},d));const s={description:"",tags:[],filters:m,result:null},x=yield W.b.create(`api/projects/${Ae.a.values.currentTeamId}/insights`,s);n.setPreviewInsightId(x.short_id)}),setFilters:o=>{let{filters:d}=o;if(d.insight===c.F.FUNNELS){var m;(m=Oe.a.findMounted({dashboardItemId:r.previewInsightId}))===null||m===void 0||m.actions.setFilters(d)}else{var s;(s=Ve.a.findMounted({dashboardItemId:r.previewInsightId}))===null||s===void 0||s.actions.setFilters(d)}},createNewMetric:()=>{n.addNewMetric(w(h({},r.currentMetric),{name:r.currentMetricName})),a.onMetricsChange(r.metrics),n.changeInsightType(c.F.TRENDS),n.setCurrentMetricName("")},deleteMetric:()=>{a.onMetricsChange(r.metrics)},changeInsightType:()=>n.createPreviewInsight(r.currentMetric.filters)}},events:t=>{let{actions:n}=t;return{afterMount:()=>{n.createPreviewInsight()}}}});var B=l("./frontend/src/lib/components/LemonButton/index.ts"),Ue=l("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function we(t){let{onMetricsChange:n,initialMetrics:r}=t;const a=Vt({onMetricsChange:n,initialMetrics:r}),{previewInsightId:o,metrics:d,modalVisible:m,currentMetric:s}=Object(L.useValues)(a),{createNewMetric:x,updateMetricFilters:E,setFilters:O,showModal:C,hideModal:T,changeInsightType:N,setCurrentMetricName:z,deleteMetric:K}=Object(L.useActions)(a),{insightProps:b}=Object(L.useValues)(Object(de.c)({dashboardItemId:o,syncWithUrl:!1})),{isStepsEmpty:i,filterSteps:Z}=Object(L.useValues)(Object(Oe.a)(b));return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Pt.a,{title:"Add secondary metric",visible:m,destroyOnClose:!0,onCancel:T,footer:null,style:{minWidth:600},children:Object(e.jsxs)(M.a,{layout:"vertical",initialValues:{type:c.F.TRENDS},onValuesChange:k=>{k.name&&z(k.name)},onFinish:()=>{x(),T()},scrollToFirstError:!0,requiredMark:!1,children:[Object(e.jsx)(M.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"You have to enter a name."}],children:Object(e.jsx)(X.a,{})}),Object(e.jsx)(M.a.Item,{name:"type",label:"Type",children:Object(e.jsxs)(D.a,{style:{display:"flex"},value:s.filters.insight,onChange:()=>{N()},suffixIcon:Object(e.jsx)(Ee.a,{}),dropdownMatchSelectWidth:!1,children:[Object(e.jsx)(D.a.Option,{value:c.F.TRENDS,children:Object(e.jsx)(p.a,{children:Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Trend"})})})}),Object(e.jsx)(D.a.Option,{value:c.F.FUNNELS,children:Object(e.jsx)(p.a,{children:Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Conversion funnel"})})})})]})}),Object(e.jsxs)(M.a.Item,{name:"query",label:"Query",children:[s.filters.insight===c.F.FUNNELS&&Object(e.jsx)(se.a,{bordered:!0,filters:s.filters,setFilters:k=>{const Y=h(w(h({},s.filters),{insight:c.F.FUNNELS}),k);E(Y),O(Y)},typeKey:"funnel-preview-metric",mathAvailability:Ue.b.None,hideDeleteBtn:Z.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!i,seriesIndicatorType:"numeric",sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[v.a.EventProperties,v.a.PersonProperties,v.a.EventFeatureFlags,v.a.Cohorts,v.a.Elements]}),s.filters.insight===c.F.TRENDS&&Object(e.jsx)(se.a,{bordered:!0,entitiesLimit:1,filters:s.filters,setFilters:k=>{const Y=h(w(h({},s.filters),{insight:c.F.TRENDS}),k);E(Y),O(Y)},typeKey:"trend-preview-metric",buttonCopy:"Add graph series",showSeriesIndicator:!0,propertiesTaxonomicGroupTypes:[v.a.EventProperties,v.a.PersonProperties,v.a.EventFeatureFlags,v.a.Cohorts,v.a.Elements]})]}),Object(e.jsx)(M.a.Item,{name:"metric-preview",label:"Metric preview",children:Object(e.jsx)(L.BindLogic,{logic:de.c,props:b,children:Object(e.jsx)(Be.a,{disableHeader:!0,disableTable:!0,disableCorrelationTable:!0})})}),Object(e.jsxs)(j.a,{justify:"end",children:[Object(e.jsx)(B.a,{type:"secondary",className:"mr-2",onClick:()=>T(),children:"Cancel"}),Object(e.jsx)(B.a,{type:"primary",htmlType:"submit",children:"Save"})]})]})}),Object(e.jsx)(j.a,{children:Object(e.jsxs)(p.a,{children:[d.map((k,Y)=>Object(e.jsxs)(j.a,{className:"mt-4 border rounded p-4",children:[Object(e.jsxs)(j.a,{align:"middle",justify:"space-between",className:"w-full mb-3 pb-2 border-b",children:[Object(e.jsx)("div",{children:Object(e.jsx)("b",{children:k.name})}),Object(e.jsx)(B.a,{icon:Object(e.jsx)($.IconDelete,{}),size:"small",status:"muted",onClick:()=>K(Y)})]}),k.filters.insight===c.F.FUNNELS&&Object(e.jsx)(se.a,{bordered:!0,filters:k.filters,setFilters:J=>{const f=h(w(h({},k.filters),{insight:c.F.FUNNELS}),J);E(f),O(f)},typeKey:`funnel-preview-${Y}`,mathAvailability:Ue.b.None,hideDeleteBtn:Z.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!i,seriesIndicatorType:"numeric",sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[v.a.EventProperties,v.a.PersonProperties,v.a.EventFeatureFlags,v.a.Cohorts,v.a.Elements],readOnly:!0}),k.filters.insight===c.F.TRENDS&&Object(e.jsx)(se.a,{bordered:!0,filters:k.filters,setFilters:J=>{const f=h(w(h({},k.filters),{insight:c.F.TRENDS}),J);E(f),O(f)},typeKey:`trend-preview-${Y}`,buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,propertiesTaxonomicGroupTypes:[v.a.EventProperties,v.a.PersonProperties,v.a.EventFeatureFlags,v.a.Cohorts,v.a.Elements],readOnly:!0})]},Y)),d&&!(d.length>2)&&Object(e.jsx)(p.a,{children:Object(e.jsx)("div",{className:"mb-2 mt-4",children:Object(e.jsx)(B.a,{type:"secondary",onClick:C,children:"Add metric"})})})]})})]})}try{we.displayName="SecondaryMetrics",we.__docgenInfo={description:"",displayName:"SecondaryMetrics",props:{onMetricsChange:{defaultValue:null,description:"",name:"onMetricsChange",required:!0,type:{name:"(metrics: SecondaryExperimentMetric[]) => void"}},initialMetrics:{defaultValue:null,description:"",name:"initialMetrics",required:!0,type:{name:"SecondaryExperimentMetric[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"]={docgenInfo:we.__docgenInfo,name:"SecondaryMetrics",path:"frontend/src/scenes/experiments/SecondaryMetrics.tsx#SecondaryMetrics"})}catch(t){}var Ge=l("./frontend/src/lib/colors.ts"),Yt=l("./frontend/src/lib/components/EntityFilterInfo.tsx"),Bt=l("./frontend/src/lib/components/EditableField/EditableField.tsx"),mt=l("./frontend/src/lib/components/Link.tsx"),zt=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/slider/index.js"),Kt=l("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),Ut=l("./frontend/src/lib/components/InsightLabel/index.tsx"),ut=l("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function Gt(){const[t,n]=Object(le.useState)(!1),[r,a]=Object(le.useState)(!1);return Object(e.jsxs)($e.a,{className:"experiment-workflow",title:Object(e.jsx)("span",{className:"card-secondary",children:"Experiment workflow"}),children:[Object(e.jsx)(j.a,{children:Object(e.jsxs)(p.a,{className:"exp-workflow-step step-completed w-full",children:[Object(e.jsxs)(j.a,{align:"middle",children:[Object(e.jsx)($.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}),Object(e.jsx)("b",{className:"ml-2",children:"Create experiment"})]}),Object(e.jsx)("div",{className:"ml-8",children:"Set variants, select participants, and add secondary metrics"})]})}),Object(e.jsx)(j.a,{children:Object(e.jsxs)(p.a,{className:`w-full exp-workflow-step ${t?"step-completed":""}`,onClick:()=>n(!t),children:[Object(e.jsxs)(j.a,{align:"middle",children:[t?Object(e.jsx)($.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):Object(e.jsx)($.IconRadioButtonUnchecked,{}),Object(e.jsx)("b",{className:"ml-2",children:"Validate experiment"})]}),Object(e.jsx)("div",{className:"ml-8",children:"Once you've written your code, it's a good idea to test that each variant behaves as you'd expect."})]})}),Object(e.jsx)(j.a,{children:Object(e.jsxs)(p.a,{className:`w-full exp-workflow-step ${r?"step-completed":""}`,onClick:()=>a(!r),children:[Object(e.jsxs)(j.a,{align:"middle",children:[r?Object(e.jsx)($.IconCheckmark,{style:{color:"var(--primary)",fontSize:24}}):Object(e.jsx)($.IconRadioButtonUnchecked,{}),Object(e.jsx)("b",{className:"ml-2",children:"Launch experiment"})]}),Object(e.jsx)("div",{className:"ml-8",children:"Run your experiment, monitor results, and decide when to terminate your experiment."})]})})]})}function je(t){var n,r,a,o,d,m;let{experiment:s,trendCount:x,funnelConversionRate:E,trendExposure:O,funnelSampleSize:C,funnelEntrants:T}=t;const N=(s==null?void 0:s.id)||"new",{experimentInsightType:z,editingExistingExperiment:K,minimumDetectableChange:b,expectedRunningTime:i,aggregationLabel:Z}=Object(L.useValues)(xe({experimentId:N})),{setNewExperimentData:k}=Object(L.useActions)(xe({experimentId:N})),Y=z===c.F.FUNNELS&&100-E<50?100-E:50,J=Object(S.a)().diff(Object(S.a)(s==null?void 0:s.start_date),"hour");let f=0;s!=null&&s.start_date?f=i(T||1,C||0,J):f=i(T||1,C||0);const be=Object(S.a)(s==null?void 0:s.start_date).add(f,"hour"),fe=!(s!=null&&s.end_date)&&J>=24&&T&&C,y=Object(_.r)(s==null||(n=s.filters)===null||n===void 0?void 0:n.properties);return Object(e.jsxs)(j.a,{children:[Object(e.jsxs)(p.a,{span:!(s!=null&&s.start_date)&&N!=="new"&&!K?12:24,children:[N==="new"&&Object(e.jsx)(j.a,{className:"experiment-preview-row",children:Object(e.jsxs)("div",{children:[Object(e.jsx)("div",{children:Object(e.jsx)("b",{children:"Experiment preview"})}),Object(e.jsxs)("div",{className:"text-muted",children:["Here are the baseline metrics for your experiment. Adjust your minimum detectible threshold to adjust for the smallest conversion value you\u2019ll accept, and the experiment duration."," "]})]})}),(N==="new"||K)&&Object(e.jsx)(j.a,{className:"mb-4",children:Object(e.jsxs)(p.a,{span:24,children:[Object(e.jsxs)("div",{children:[Object(e.jsx)("b",{children:"Minimum acceptable improvement"}),Object(e.jsx)(U.a,{title:"Minimum acceptable improvement is a calculation that estimates the smallest significant improvement you are willing to accept.",children:Object(e.jsx)(me.a,{style:{marginLeft:4}})})]}),Object(e.jsxs)(j.a,{className:"mde-slider",children:[Object(e.jsx)(p.a,{span:8,children:Object(e.jsx)(zt.a,{defaultValue:5,value:b,min:1,max:Y,trackStyle:{background:"var(--primary)"},handleStyle:{background:"var(--primary)"},onChange:F=>{k({parameters:{minimum_detectable_effect:F}})},tipFormatter:F=>`${F}%`})}),Object(e.jsx)(Kt.a,{min:1,max:Y,defaultValue:5,formatter:F=>`${F}%`,style:{margin:"0 16px"},value:b,onChange:F=>{k({parameters:{minimum_detectable_effect:F}})}})]})]})}),Object(e.jsxs)(j.a,{className:`experiment-preview-row ${s!=null&&s.start_date?"mr":""}`,children:[z===c.F.TRENDS?Object(e.jsxs)(e.Fragment,{children:[!(s!=null&&s.start_date)&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)(p.a,{span:6,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Baseline Count"}),Object(e.jsx)("div",{className:"l4",children:Object(_.Q)(x||0)})]}),Object(e.jsxs)(p.a,{span:6,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Minimum Acceptable Count"}),Object(e.jsx)("div",{className:"l4",children:Object(_.Q)(x+Math.ceil(x*(b/100))||0)})]})]}),Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Recommended running time"}),Object(e.jsxs)("div",{children:[Object(e.jsxs)("span",{className:"l4",children:["~",Object(_.Q)(O||0)]})," days"]})]})]}):Object(e.jsxs)(e.Fragment,{children:[!(s!=null&&s.start_date)&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Baseline Conversion Rate"}),Object(e.jsxs)("div",{className:"l4",children:[E.toFixed(1),"%"]})]}),Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Minimum Acceptable Conversion Rate"}),Object(e.jsxs)("div",{className:"l4",children:[(E+b).toFixed(1),"%"]})]})]}),Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Recommended Sample Size"}),Object(e.jsxs)("div",{className:"pb-4",children:[Object(e.jsxs)("span",{className:"l4",children:["~",Object(_.Q)(C||0)]})," persons"]})]}),!(s!=null&&s.start_date)&&Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Recommended running time"}),Object(e.jsxs)("div",{children:[Object(e.jsxs)("span",{className:"l4",children:["~",Object(_.Q)(f||0)]})," days"]})]})]}),Object(e.jsxs)(j.a,{className:"w-full mt-4",children:[Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Experiment variants"}),Object(e.jsx)("ul",{className:"variants-list",children:s==null||(r=s.parameters)===null||r===void 0||(a=r.feature_flag_variants)===null||a===void 0?void 0:a.map((F,q)=>Object(e.jsx)("li",{children:F.key},q))})]}),Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary",children:"Participants"}),Object(e.jsx)("div",{children:y!=null&&y.length?Object(e.jsx)("div",{children:y==null?void 0:y.map(F=>Object(e.jsx)(ut.a,{item:F,style:{margin:2,cursor:"default"}},F.key))}):Object(e.jsxs)(e.Fragment,{children:["100% of"," ",(s==null||(o=s.filters)===null||o===void 0?void 0:o.aggregation_group_type_index)!=null?Object(_.i)(Z(s.filters.aggregation_group_type_index).plural):"users"]})})]})]}),Object(e.jsxs)(j.a,{className:"w-full",children:[N!=="new"&&!K&&Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary mt-4",children:"Start date"}),s!=null&&s.start_date?Object(e.jsx)("span",{children:Object(S.a)(s==null?void 0:s.start_date).format("D MMM YYYY")}):Object(e.jsx)("span",{className:"description",children:"Not started yet"})]}),z===c.F.FUNNELS&&fe?Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary mt-4",children:"Expected end date"}),Object(e.jsx)("span",{children:be.isAfter(Object(S.a)())?be.format("D MMM YYYY"):Object(S.a)().format("D MMM YYYY")})]}):null,(s==null?void 0:s.end_date)&&Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsx)("div",{className:"card-secondary mt-4",children:"Completed date"}),Object(e.jsx)("span",{children:Object(S.a)(s==null?void 0:s.end_date).format("D MMM YYYY")})]})]})]}),N!=="new"&&!K&&Object(e.jsx)(j.a,{className:"experiment-preview-row",children:Object(e.jsxs)(p.a,{children:[Object(e.jsx)("div",{className:"card-secondary mb-2",children:z===c.F.FUNNELS?"Conversion goal steps":"Trend goal"}),[...(s==null||(d=s.filters)===null||d===void 0?void 0:d.events)||[],...(s==null||(m=s.filters)===null||m===void 0?void 0:m.actions)||[]].sort((F,q)=>(F.order||0)-(q.order||0)).map((F,q)=>{var ee;return Object(e.jsxs)(p.a,{className:"mb-2",children:[Object(e.jsxs)(j.a,{style:{marginBottom:4},children:[Object(e.jsx)("div",{className:"preview-conversion-goal-num",children:z===c.F.FUNNELS?(F.order||0)+1:q+1}),Object(e.jsx)("b",{children:Object(e.jsx)(Ut.a,{action:F,showCountedByTag:z===c.F.TRENDS,hideIcon:!0})})]}),(ee=F.properties)===null||ee===void 0?void 0:ee.map(ve=>Object(e.jsx)(ut.a,{item:ve},ve.key))]},q)})]})})]}),N!=="new"&&!K&&!(s!=null&&s.start_date)&&Object(e.jsx)(p.a,{span:12,className:"pl-4",children:Object(e.jsx)(Gt,{})})]})}try{je.displayName="ExperimentPreview",je.__docgenInfo={description:"",displayName:"ExperimentPreview",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}},trendCount:{defaultValue:null,description:"",name:"trendCount",required:!0,type:{name:"number"}},trendExposure:{defaultValue:null,description:"",name:"trendExposure",required:!1,type:{name:"number"}},funnelSampleSize:{defaultValue:null,description:"",name:"funnelSampleSize",required:!1,type:{name:"number"}},funnelConversionRate:{defaultValue:null,description:"",name:"funnelConversionRate",required:!0,type:{name:"number"}},funnelEntrants:{defaultValue:null,description:"",name:"funnelEntrants",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"]={docgenInfo:je.__docgenInfo,name:"ExperimentPreview",path:"frontend/src/scenes/experiments/ExperimentPreview.tsx#ExperimentPreview"})}catch(t){}var We=l("./frontend/@posthog/lemon-ui/src/index.ts"),P=l("./frontend/src/lib/components/CodeSnippet/index.tsx");function he(){return Object(e.jsx)("div",{className:"warning",children:Object(e.jsxs)("p",{children:[Object(e.jsx)("b",{children:"Warning:"})," Server side experiment metrics require you to manually send the feature flag information."," ",Object(e.jsx)(We.Link,{to:"https://posthog.com/tutorials/experiments#step-2-sending-the-right-events",target:"_blank",children:"See this tutorial for more information."})]})})}function Ne(t){let{flagKey:n,variant:r}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(P.a,{language:P.b.JavaScript,wrap:!0,children:`const experimentFlagValue = await client.getFeatureFlag('${n}', 'user distinct id')

if (experimentFlagValue === '${r}' ) {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`}),Object(e.jsx)(he,{})]})}function Ie(t){let{flagKey:n,variant:r}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(P.a,{language:P.b.JavaScript,wrap:!0,children:`if (posthog.getFeatureFlag('${n}') === '${r}') {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`}),Object(e.jsx)("b",{children:"Test that it works"}),Object(e.jsx)(P.a,{language:P.b.JavaScript,wrap:!0,children:`posthog.feature_flags.override({'${n}': '${r}'})`})]})}function Fe(t){let{flagKey:n,variant:r}=t;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(P.a,{language:P.b.JavaScript,wrap:!0,children:`if (posthog.getFeatureFlag('${n}') === '${r}') {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`})})}function _e(t){let{flagKey:n,variant:r}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(P.a,{language:P.b.PHP,wrap:!0,children:`if (PostHog::getFeatureFlag('${n}', 'user distinct id') == '${r}') {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`}),Object(e.jsx)(he,{})]})}function Ce(t){let{flagKey:n,variant:r}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(P.a,{language:P.b.Go,wrap:!0,children:`experimentFlagValue, err := client.GetFeatureFlag(
                    FeatureFlagPayload{
                        Key:        '${n}',
                        DistinctId: "distinct-id",
                    })

if (experimentFlagValue == '${r}' ) {
    // Do something differently for this user
} else {
    // It's a good idea to let control variant always be the default behaviour,
    // so if something goes wrong with flag evaluation, you don't break your app.
}`}),Object(e.jsx)(he,{})]})}function Te(t){let{flagKey:n,variant:r}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(P.a,{language:P.b.Ruby,wrap:!0,children:`experimentFlagValue = posthog.get_feature_flag('${n}', 'user distinct id')


if experimentFlagValue == '${r}'
    # Do something differently for this user
else
    # It's a good idea to let control variant always be the default behaviour,
    # so if something goes wrong with flag evaluation, you don't break your app.
end
`}),Object(e.jsx)(he,{})]})}function ke(t){let{flagKey:n,variant:r}=t;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(P.a,{language:P.b.Python,wrap:!0,children:`experiment_flag_value = posthog.get_feature_flag("${n}", "user_distinct_id"):

if experiment_flag_value == '${r}':
    # Do something differently for this user
else:
    # It's a good idea to let control variant always be the default behaviour,
    # so if something goes wrong with flag evaluation, you don't break your app.
`}),Object(e.jsx)(he,{})]})}try{Ne.displayName="NodeJSSnippet",Ne.__docgenInfo={description:"",displayName:"NodeJSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#NodeJSSnippet"]={docgenInfo:Ne.__docgenInfo,name:"NodeJSSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#NodeJSSnippet"})}catch(t){}try{Ie.displayName="JSSnippet",Ie.__docgenInfo={description:"",displayName:"JSSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#JSSnippet"]={docgenInfo:Ie.__docgenInfo,name:"JSSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#JSSnippet"})}catch(t){}try{Fe.displayName="RNSnippet",Fe.__docgenInfo={description:"",displayName:"RNSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RNSnippet"]={docgenInfo:Fe.__docgenInfo,name:"RNSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RNSnippet"})}catch(t){}try{_e.displayName="PHPSnippet",_e.__docgenInfo={description:"",displayName:"PHPSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PHPSnippet"]={docgenInfo:_e.__docgenInfo,name:"PHPSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PHPSnippet"})}catch(t){}try{Ce.displayName="GolangSnippet",Ce.__docgenInfo={description:"",displayName:"GolangSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#GolangSnippet"]={docgenInfo:Ce.__docgenInfo,name:"GolangSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#GolangSnippet"})}catch(t){}try{Te.displayName="RubySnippet",Te.__docgenInfo={description:"",displayName:"RubySnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RubySnippet"]={docgenInfo:Te.__docgenInfo,name:"RubySnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#RubySnippet"})}catch(t){}try{ke.displayName="PythonSnippet",ke.__docgenInfo={description:"",displayName:"PythonSnippet",props:{flagKey:{defaultValue:null,description:"",name:"flagKey",required:!0,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PythonSnippet"]={docgenInfo:ke.__docgenInfo,name:"PythonSnippet",path:"frontend/src/scenes/experiments/ExperimentCodeSnippets.tsx#PythonSnippet"})}catch(t){}const ne="?utm_medium=in-product&utm_campaign=experiment",re="https://posthog.com/docs/integrate/",ie="#feature-flags",He=[{value:"JavaScript",documentationLink:`${re}client/js${ne}${ie}`,Icon:$.IconJavascript,Snippet:Ie},{value:"ReactNative",documentationLink:`${re}client/react-native${ne}${ie}`,Icon:$.IconJavascript,Snippet:Fe},{value:"Node.js",documentationLink:`${re}server/node${ne}${ie}`,Icon:$.IconNodeJS,Snippet:Ne},{value:"PHP",documentationLink:`${re}server/php${ne}${ie}`,Icon:$.IconPHP,Snippet:_e},{value:"Ruby",documentationLink:`${re}server/ruby${ne}${ie}`,Icon:$.IconRuby,Snippet:Te},{value:"Golang",documentationLink:`${re}server/go${ne}${ie}`,Icon:$.IconGolang,Snippet:Ce},{value:"Python",documentationLink:`${re}server/python${ne}${ie}`,Icon:$.IconPython,Snippet:ke}];function De(t){let{selectedOptionValue:n,selectOption:r}=t;return Object(e.jsx)(D.a,{value:n,onChange:r,style:{minWidth:120},suffixIcon:Object(e.jsx)(Ee.a,{}),children:He.map((a,o)=>{let{value:d,Icon:m}=a;return Object(e.jsx)(D.a.Option,{"data-attr":"experiment-instructions-select-option-"+d,value:d,children:Object(e.jsxs)("div",{className:"flex items-center",children:[Object(e.jsx)(m,{className:"mr-1"})," ",d]})},o)})})}function ge(t){var n,r,a,o,d,m,s;let{experiment:x}=t;const E=(n=x==null||(r=x.parameters)===null||r===void 0||(a=r.feature_flag_variants)===null||a===void 0||(o=a[1])===null||o===void 0?void 0:o.key)!==null&&n!==void 0?n:"test",[O,C]=Object(le.useState)(E),[T]=He,[N,z]=Object(le.useState)(T),K=b=>{const i=He.find(Z=>Z.value===b);i&&z(i)};return Object(e.jsxs)($e.a,{title:Object(e.jsx)("span",{className:"card-secondary",children:"Feature flag usage and implementation"}),className:"experiment-implementation-details",children:[Object(e.jsxs)("div",{style:{justifyContent:"space-between"},className:"flex mb-2",children:[Object(e.jsxs)("div",{children:[Object(e.jsx)("span",{className:"mr-2",children:"Variant group"}),Object(e.jsx)(D.a,{onChange:C,value:O,style:{minWidth:80},suffixIcon:Object(e.jsx)(Ee.a,{}),children:x==null||(d=x.parameters)===null||d===void 0||(m=d.feature_flag_variants)===null||m===void 0?void 0:m.map((b,i)=>Object(e.jsx)(D.a.Option,{value:b.key,children:b.key},i))})]}),Object(e.jsx)("div",{children:Object(e.jsx)(De,{selectOption:K,selectedOptionValue:N.value})})]}),Object(e.jsx)("b",{children:"Implement your experiment in code"}),Object(e.jsx)(N.Snippet,{variant:O,flagKey:(s=x==null?void 0:x.feature_flag_key)!==null&&s!==void 0?s:""}),Object(e.jsx)(We.Link,{to:N.documentationLink,target:"_blank",children:Object(e.jsxs)("div",{className:"flex items-center",children:["See the docs for more implementation information. ",Object(e.jsx)($.IconOpenInNew,{className:"ml-1"})]})})]})}try{De.displayName="CodeLanguageSelect",De.__docgenInfo={description:"",displayName:"CodeLanguageSelect",props:{selectedOptionValue:{defaultValue:null,description:"",name:"selectedOptionValue",required:!0,type:{name:"string"}},selectOption:{defaultValue:null,description:"",name:"selectOption",required:!0,type:{name:"(selectedValue: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#CodeLanguageSelect"]={docgenInfo:De.__docgenInfo,name:"CodeLanguageSelect",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#CodeLanguageSelect"})}catch(t){}try{ge.displayName="ExperimentImplementationDetails",ge.__docgenInfo={description:"",displayName:"ExperimentImplementationDetails",props:{experiment:{defaultValue:null,description:"",name:"experiment",required:!0,type:{name:"Partial<Experiment> | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"]={docgenInfo:ge.__docgenInfo,name:"ExperimentImplementationDetails",path:"frontend/src/scenes/experiments/ExperimentImplementationDetails.tsx#ExperimentImplementationDetails"})}catch(t){}var Wt=l("./frontend/src/lib/components/NotFound/index.tsx"),xt=l("./frontend/src/lib/components/AlertMessage/index.ts");const Ht={component:jt,logic:xe,paramsToProps:t=>{let{params:{id:n}}=t;return{experimentId:n==="new"?"new":parseInt(n)}}};function jt(){var t,n,r,a,o,d,m,s,x,E,O,C,T,N,z;const{experimentId:K,newExperimentData:b,experimentData:i,experimentInsightId:Z,minimumSampleSizePerVariant:k,recommendedExposureForCountData:Y,variants:J,experimentResults:f,countDataForVariant:be,editingExistingExperiment:fe,experimentInsightType:y,experimentResultsLoading:F,parsedSecondaryMetrics:q,areResultsSignificant:ee,conversionRateForVariant:ve,getIndexForVariant:Je,significanceBannerDetails:Jt,areTrendResultsConfusing:Qt,taxonomicGroupTypesForSelection:Xt,groupTypes:Zt,aggregationLabel:qt,secondaryMetricResults:Q,experimentDataLoading:en,secondaryMetricResultsLoading:tn,experimentResultCalculationError:ht,flagImplementationWarning:nn,flagAvailabilityWarning:rn,sortedExperimentResultVariants:Qe}=Object(L.useValues)(xe),{setNewExperimentData:ye,createExperiment:an,launchExperiment:sn,setFilters:Re,setEditExperiment:on,endExperiment:gt,addExperimentGroup:ln,updateExperiment:dn,updateExperimentGroup:cn,removeExperimentGroup:pn,setSecondaryMetrics:mn,setExperimentInsightType:un,archiveExperiment:xn}=Object(L.useActions)(xe),[jn]=M.a.useForm(),[Xe,Ze]=Object(le.useState)(!0),{insightProps:qe}=Object(L.useValues)(Object(de.c)({dashboardItemId:Z})),{isStepsEmpty:hn,filterSteps:gn,filters:bt,results:et,conversionMetrics:bn}=Object(L.useValues)(Object(Oe.a)(qe)),{filters:ft,results:fn}=Object(L.useValues)(Object(Ve.a)(qe)),tt=bn.totalRate*100,vt=k(tt)*J.length,nt=(t=fn[0])===null||t===void 0?void 0:t.count,yt=et==null||(n=et[0])===null||n===void 0?void 0:n.count,Ot=Y(nt),G=Math.floor(24/(J.length+2)),Me=y===c.F.FUNNELS&&f!==null&&f!==void 0&&f.insight?f.insight.reduce((u,g)=>{var R;return((R=g[0])===null||R===void 0?void 0:R.count)+u},0):0,vn=y===c.F.FUNNELS?(Me||0)/((i==null||(r=i.parameters)===null||r===void 0?void 0:r.recommended_sample_size)||1)*100:Object(S.a)().diff(i==null?void 0:i.start_date,"day")/((i==null||(a=i.parameters)===null||a===void 0?void 0:a.recommended_running_time)||1)*100,yn={running:"green",draft:"default",complete:"purple"},St=()=>{if(i!=null&&i.start_date){if(!(i!=null&&i.end_date))return"running"}else return"draft";return"complete"},Et=10,wt=[{background:"#35416b",color:"#fff"},{background:"#C278CE66",color:"#35416B"},{background:"#FFE6AE",color:"#35416B"},{background:"#8DA9E74D",color:"#35416B"}];return en?Object(e.jsx)(te.a,{active:!0}):!i&&K!=="new"?Object(e.jsx)(Wt.a,{object:"experiment"}):Object(e.jsx)(e.Fragment,{children:K==="new"||fe?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)(j.a,{align:"middle",justify:"space-between",style:{borderBottom:"1px solid var(--border)",marginBottom:"1rem",paddingBottom:8},children:[Object(e.jsx)(ot.a,{title:fe?"Edit experiment":"New experiment"}),Object(e.jsxs)(j.a,{children:[Object(e.jsx)(B.a,{type:"secondary",className:"mr-2",onClick:i?()=>oe.router.actions.push(H.a.experiment(i.id)):()=>oe.router.actions.push(H.a.experiments()),children:"Cancel"}),Object(e.jsx)(B.a,{type:"primary",htmlType:"submit",form:"new-experiment",children:"Save"})]})]}),Object(e.jsxs)(M.a,{name:"new-experiment",layout:"vertical",className:"experiment-form",form:jn,onValuesChange:u=>ye(u),initialValues:{name:b==null?void 0:b.name,feature_flag_key:b==null?void 0:b.feature_flag_key,description:b==null?void 0:b.description},onFinish:()=>an(!0,Ot,vt),requiredMark:!1,scrollToFirstError:!0,children:[Object(e.jsx)("div",{children:Object(e.jsxs)(L.BindLogic,{logic:de.c,props:qe,children:[Object(e.jsxs)(j.a,{children:[Object(e.jsxs)(p.a,{span:12,style:{paddingRight:24},children:[Object(e.jsxs)(j.a,{className:"w-full",children:[Object(e.jsx)(M.a.Item,{style:{marginRight:16},label:"Name",name:"name",rules:[{required:!0,message:"You have to enter a name."}],children:Object(e.jsx)(X.a,{"data-attr":"experiment-name",className:"ph-ignore-input"})}),Object(e.jsx)(M.a.Item,{style:{marginBottom:"1rem"},label:Object(e.jsxs)("div",{children:["Feature flag key"," ",Object(e.jsx)(U.a,{title:"Enter a unique key. This will create a new feature flag which will be associated with this experiment.",children:Object(e.jsx)(me.a,{})})]}),name:"feature_flag_key",rules:[{required:!0,message:"You have to enter a feature flag key name."}],children:Object(e.jsx)(X.a,{"data-attr":"experiment-feature-flag-key",disabled:fe})})]}),Object(e.jsx)(M.a.Item,{label:Object(e.jsxs)("div",{children:["Description ",Object(e.jsx)("span",{className:"text-muted",children:"(optional)"})]}),name:"description",children:Object(e.jsx)(We.LemonTextArea,{"data-attr":"experiment-description",className:"ph-ignore-input",placeholder:"Adding a helpful description can ensure others know what this experiment is about."})}),(b==null||(o=b.parameters)===null||o===void 0?void 0:o.feature_flag_variants)&&Object(e.jsxs)(p.a,{children:[Object(e.jsx)("label",{children:Object(e.jsx)("b",{children:"Experiment variants"})}),Object(e.jsx)("div",{className:"text-muted",children:"Participants are divided into variant groups evenly. All experiments must consist of a control group and at least one test group. Experiments may have at most 3 test groups. Variant names can only contain letters, numbers, hyphens, and underscores."}),Object(e.jsxs)(p.a,{className:"variants",children:[b.parameters.feature_flag_variants.map((u,g)=>Object(e.jsx)(M.a,{initialValues:{key:u.key},onValuesChange:R=>{cn(R,g)},children:Object(e.jsxs)(j.a,{className:`feature-flag-variant ${g===0?"border-t":g>=Et?"border-b":""}`,children:[Object(e.jsx)("div",{className:"variant-label",style:g===0?h({},wt[g]):h({},wt[g%3+1]),children:g===0?"Control":"Test"}),Object(e.jsx)(M.a.Item,{name:"key",rules:[{required:!0,message:"Key should not be empty."},{required:!0,pattern:/^([A-z]|[a-z]|[0-9]|-|_)+$/,message:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Lt.a,{style:{color:"#F96132"}})," ","Variant names can only contain letters, numbers, hyphens, and underscores."]})}],style:{display:"contents"},children:Object(e.jsx)(X.a,{disabled:g===0,"data-attr":"feature-flag-variant-key","data-key-index":g.toString(),className:"ph-ignore-input",placeholder:`example-variant-${g+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1})}),Object(e.jsx)("div",{className:"float-right",children:!(g===0||g===1)&&Object(e.jsx)(U.a,{title:"Delete this variant",placement:"bottomLeft",children:Object(e.jsx)(B.a,{status:"primary-alt",size:"small",icon:Object(e.jsx)($.IconDelete,{}),onClick:()=>pn(g)})})})]},`${u}-${g}`)},`${u}-${g}`)),b.parameters.feature_flag_variants.length<Et&&Object(e.jsx)("div",{className:"feature-flag-variant border-b",children:Object(e.jsx)(B.a,{onClick:()=>ln(),fullWidth:!0,icon:Object(e.jsx)($.IconPlusMini,{}),children:"Add test variant"})})]})]}),Object(e.jsxs)(j.a,{className:"person-selection",children:[Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("strong",{children:"Select participants"})}),Object(e.jsxs)(p.a,{children:[Object(e.jsx)("div",{className:"text-muted",children:"Select the entities who will participate in this experiment. If no filters are set, 100% of participants will be targeted."}),Object(e.jsx)("div",{className:"mt-4 mb-2",children:Object(e.jsx)("strong",{children:"Participant type"})}),Object(e.jsxs)(D.a,{value:(b==null||(d=b.filters)===null||d===void 0?void 0:d.aggregation_group_type_index)!=null?b.filters.aggregation_group_type_index:-1,onChange:u=>{var g;const R=u!==-1?u:void 0;R!=(b==null||(g=b.filters)===null||g===void 0?void 0:g.aggregation_group_type_index)&&(Re({properties:[],aggregation_group_type_index:R}),ye({filters:{aggregation_group_type_index:R,properties:[]}}))},"data-attr":"participant-aggregation-filter",dropdownMatchSelectWidth:!1,children:[Object(e.jsx)(D.a.Option,{value:-1,children:"Persons"},-1),Zt.map(u=>Object(e.jsx)(D.a.Option,{value:u.group_type_index,children:Object(_.i)(qt(u.group_type_index).plural)},u.group_type_index))]}),Object(e.jsx)("div",{className:"mt-4 mb-2",children:Object(e.jsx)("strong",{children:"Filters"})}),Object(e.jsx)("div",{className:"mb-4",children:Object(e.jsx)(Ft.a,{pageKey:"experiment-participants-property",propertyFilters:y===c.F.FUNNELS?Object(_.r)(bt.properties):Object(_.r)(ft.properties),onChange:u=>{ye({filters:{properties:u}}),Re({properties:u.filter(_t.g)})},taxonomicGroupTypes:Xt})}),rn&&Object(e.jsxs)(xt.a,{type:"info",className:"mt-3 mb-3",children:["These properties aren't immediately available on first page load for unidentified persons. This experiment requires that at least one event is sent prior to becoming available to your product or website."," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/integrate/client/js#bootstrapping-flags",target:"_blank",children:[" ","Learn more about how to make feature flags available instantly."]})]}),Object(e.jsx)("div",{className:"mt-4 mb-2",children:Object(e.jsx)("strong",{children:"Advanced Options"})}),Object(e.jsxs)("div",{className:"mb-4",children:["For more advanced options like changing the rollout percentage and persisting feature flags, you can"," ",K==="new"?"change settings on the feature flag after creation.":Object(e.jsx)(mt.a,{to:b!=null&&b.feature_flag?H.a.featureFlag(b.feature_flag):void 0,children:"change settings on the feature flag."})]})]})]})]}),Object(e.jsxs)(j.a,{className:"metrics-selection",children:[Object(e.jsxs)(p.a,{span:12,children:[Object(e.jsxs)("div",{className:"mb-2","data-attr":"experiment-goal-type",children:[Object(e.jsx)("b",{children:"Goal type"}),Object(e.jsx)("div",{className:"text-muted",children:y===c.F.TRENDS?"Track counts of a specific event or action":"Track how many persons complete a sequence of actions and or events"})]}),Object(e.jsxs)(D.a,{style:{display:"flex"},value:y,onChange:un,suffixIcon:Object(e.jsx)(Ee.a,{}),dropdownMatchSelectWidth:!1,children:[Object(e.jsx)(D.a.Option,{value:c.F.TRENDS,children:Object(e.jsx)(p.a,{children:Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Trend"})})})}),Object(e.jsx)(D.a.Option,{value:c.F.FUNNELS,children:Object(e.jsx)(p.a,{children:Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Conversion funnel"})})})})]}),Object(e.jsxs)("div",{className:"my-4",children:[Object(e.jsx)("b",{children:"Experiment goal"}),y===c.F.TRENDS&&Object(e.jsx)("div",{className:"text-muted",children:"Trend-based experiments can have at most one graph series. This metric is used to track the progress of your experiment."})]}),nn&&Object(e.jsxs)(xt.a,{type:"info",className:"mt-3 mb-3",children:["We can't detect any feature flag information for this target metric. Ensure that you're using the latest PostHog client libraries, and make sure you manually send feature flag information for server-side libraries if necessary."," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/integrate/server/python#capture",target:"_blank",children:[" ","Read the docs for how to do this for server-side libraries."]})]}),y===c.F.FUNNELS&&Object(e.jsx)(se.a,{bordered:!0,filters:bt,setFilters:u=>{ye({filters:u}),Re(u)},typeKey:"experiment-funnel-goal",mathAvailability:Ue.b.None,hideDeleteBtn:gn.length===1,buttonCopy:"Add funnel step",showSeriesIndicator:!hn,seriesIndicatorType:"numeric",sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[v.a.EventProperties,v.a.PersonProperties,v.a.EventFeatureFlags,v.a.Cohorts,v.a.Elements]}),y===c.F.TRENDS&&Object(e.jsx)(se.a,{bordered:!0,filters:ft,setFilters:u=>{ye({filters:u}),Re(u)},typeKey:"experiment-trends",buttonCopy:"Add graph series",showSeriesIndicator:!0,entitiesLimit:1,hideDeleteBtn:!0,propertiesTaxonomicGroupTypes:[v.a.EventProperties,v.a.PersonProperties,v.a.EventFeatureFlags,v.a.Cohorts,v.a.Elements]}),Object(e.jsx)(j.a,{className:"secondary-metrics",children:Object(e.jsxs)("div",{className:"flex flex-col",children:[Object(e.jsxs)("div",{children:[Object(e.jsx)("b",{children:"Secondary metrics"}),Object(e.jsx)("span",{className:"text-muted ml-2",children:"(optional)"})]}),Object(e.jsxs)("div",{className:"text-muted",style:{marginTop:4},children:["Use secondary metrics to monitor metrics related to your experiment goal. You can add up to three secondary metrics."," "]}),Object(e.jsx)(we,{onMetricsChange:u=>mn(u),initialMetrics:q})]})})]}),Object(e.jsxs)(p.a,{span:12,className:"pl-4",children:[Object(e.jsx)("div",{className:"card-secondary mb-4","data-attr":"experiment-preview",children:"Goal preview"}),Object(e.jsx)(Be.a,{disableHeader:y===c.F.TRENDS,disableTable:!0,disableCorrelationTable:!0})]})]})]}),Object(e.jsx)(j.a,{children:Object(e.jsx)($e.a,{className:"experiment-preview",children:Object(e.jsx)(je,{experiment:b,trendCount:nt,trendExposure:Ot,funnelSampleSize:vt,funnelEntrants:yt,funnelConversionRate:tt})})})]})}),Object(e.jsx)(B.a,{className:"float-right",type:"primary",htmlType:"submit",children:"Save"})]})]}):i?Object(e.jsxs)("div",{className:"view-experiment",children:[Object(e.jsx)(j.a,{className:"draft-header",children:Object(e.jsxs)(j.a,{justify:"space-between",align:"middle",className:"w-full pb-4",children:[Object(e.jsxs)(p.a,{children:[Object(e.jsx)(j.a,{children:Object(e.jsx)(ot.a,{style:{paddingRight:8},title:`${i==null?void 0:i.name}`,buttons:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)($t.a,{explicitValue:i.feature_flag_key,iconStyle:{color:"var(--muted-alt)"},children:Object(e.jsx)("span",{className:"text-muted",children:i.feature_flag_key})}),Object(e.jsx)(it.a,{style:{alignSelf:"center"},color:yn[St()],children:Object(e.jsx)("b",{className:"uppercase",children:St()})}),f&&i.end_date&&Object(e.jsx)(it.a,{style:{alignSelf:"center"},color:ee?"green":"geekblue",children:Object(e.jsx)("b",{className:"uppercase",children:ee?"Significant Results":"Results not significant"})})]})})}),Object(e.jsx)("span",{className:"exp-description",children:i.start_date?Object(e.jsx)(Bt.a,{multiline:!0,name:"description",value:i.description||"",placeholder:"Description (optional)",onSave:u=>dn({description:u}),maxLength:400,"data-attr":"experiment-description",compactButtons:!0}):Object(e.jsx)(e.Fragment,{children:i.description||"There is no description for this experiment."})})]}),i&&!i.start_date&&Object(e.jsxs)("div",{className:"flex items-center",children:[Object(e.jsx)(B.a,{type:"secondary",className:"mr-2",onClick:()=>on(!0),children:"Edit"}),Object(e.jsx)(B.a,{type:"primary",onClick:()=>sn(),children:"Launch"})]}),i&&i.start_date&&!i.end_date&&Object(e.jsx)(B.a,{type:"secondary",status:"danger",onClick:()=>gt(),children:"Stop"}),(i==null?void 0:i.end_date)&&Object(S.a)().isSameOrAfter(Object(S.a)(i.end_date),"day")&&!i.archived&&Object(e.jsx)(B.a,{type:"secondary",status:"danger",onClick:()=>xn(),children:Object(e.jsx)("b",{children:"Archive"})})]})}),Object(e.jsxs)(j.a,{children:[Xe&&f&&ee&&!i.end_date&&Object(e.jsxs)(j.a,{align:"middle",className:"significant-results",children:[Object(e.jsx)(p.a,{span:20,style:{fontWeight:500,color:"#497342"},children:Object(e.jsxs)("div",{children:["Experiment results are significant."," ",i.end_date?"":"You can end your experiment now or let it run until complete."]})}),Object(e.jsx)(p.a,{span:4,children:i.end_date?Object(e.jsx)(ze.a,{className:"close-button",onClick:()=>Ze(!1)}):Object(e.jsx)(B.a,{type:"primary",onClick:()=>gt(),children:"End experiment"})})]}),Xe&&f&&!ee&&!i.end_date&&Object(e.jsxs)(j.a,{align:"top",className:"not-significant-results",children:[Object(e.jsxs)(p.a,{span:23,style:{fontWeight:500,color:"#2D2D2D"},children:[Object(e.jsx)("strong",{children:"Your results are not statistically significant"}),"."," ",Jt," ",i!=null&&i.end_date?"":"We don't recommend ending this experiment yet."," ","See our"," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations",children:[" ","experimentation guide"," "]}),"for more information."," "]}),Object(e.jsx)(p.a,{span:1,children:Object(e.jsx)(ze.a,{className:"close-button",onClick:()=>Ze(!1)})})]}),Xe&&i.end_date&&Object(e.jsxs)(j.a,{align:"top",className:"feature-flag-mods",children:[Object(e.jsxs)(p.a,{span:23,style:{fontWeight:500},children:[Object(e.jsx)("strong",{children:"Your experiment is complete, but the feature flag is still enabled."})," ","We recommend removing the feature flag from your code completely, instead of relying on this distribution."," ",Object(e.jsx)(mt.a,{to:i.feature_flag?H.a.featureFlag(i.feature_flag):void 0,children:Object(e.jsx)("b",{children:"Adjust feature flag distribution"})})]}),Object(e.jsx)(p.a,{span:1,children:Object(e.jsx)(ze.a,{className:"close-button",onClick:()=>Ze(!1)})})]})]}),Object(e.jsxs)(j.a,{children:[Object(e.jsx)(at.a,{className:"w-full",defaultActiveKey:"experiment-details",children:Object(e.jsx)(at.a.Panel,{header:Object(e.jsx)("b",{children:"Experiment details"}),children:Object(e.jsxs)(j.a,{children:[Object(e.jsx)(p.a,{span:i!=null&&i.start_date?12:24,children:Object(e.jsx)(je,{experiment:i,trendCount:nt,trendExposure:i==null?void 0:i.parameters.recommended_running_time,funnelSampleSize:i==null?void 0:i.parameters.recommended_sample_size,funnelConversionRate:tt,funnelEntrants:i!=null&&i.start_date?Me:yt})}),!F&&!f&&i.start_date&&Object(e.jsx)(p.a,{span:12,children:Object(e.jsx)(ge,{experiment:i})}),f&&Object(e.jsxs)(p.a,{span:12,className:"mt-4",children:[Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)("b",{children:"Experiment progress"})}),Object(e.jsx)(st.a,{strokeWidth:20,showInfo:!1,percent:vn,strokeColor:"var(--success)"}),y===c.F.TRENDS&&i.start_date&&Object(e.jsxs)(j.a,{justify:"space-between",className:"mt-2",children:[i.end_date?Object(e.jsxs)("div",{children:["Ran for"," ",Object(e.jsx)("b",{children:Object(S.a)(i.end_date).diff(i.start_date,"day")})," ","days"]}):Object(e.jsxs)("div",{children:[Object(e.jsx)("b",{children:Object(S.a)().diff(i.start_date,"day")})," days running"]}),Object(e.jsxs)("div",{children:["Goal:"," ",Object(e.jsx)("b",{children:i==null||(m=i.parameters)===null||m===void 0?void 0:m.recommended_running_time})," ","days"]})]}),y===c.F.FUNNELS&&Object(e.jsxs)(j.a,{justify:"space-between",className:"mt-2",children:[i.end_date?Object(e.jsxs)("div",{children:["Saw ",Object(e.jsx)("b",{children:Object(_.Q)(Me)})," ","participants"]}):Object(e.jsxs)("div",{children:[Object(e.jsx)("b",{children:Object(_.Q)(Me)})," ","participants seen"]}),Object(e.jsxs)("div",{children:["Goal:"," ",Object(e.jsx)("b",{children:Object(_.Q)((i==null||(s=i.parameters)===null||s===void 0?void 0:s.recommended_sample_size)||0)})," ","participants"]})]})]}),((x=i.secondary_metrics)===null||x===void 0?void 0:x.length)>0&&Object(e.jsx)(p.a,{className:"secondary-progress",span:i!=null&&i.start_date&&((i==null||(E=i.parameters)===null||E===void 0||(O=E.feature_flag_variants)===null||O===void 0?void 0:O.length)||0)<=5?12:24,children:!!(i!=null&&i.secondary_metrics.length)&&Object(e.jsxs)(p.a,{className:"border-b",children:[Object(e.jsxs)(j.a,{align:"middle",justify:"space-between",className:"mb-2",children:[Object(e.jsx)(p.a,{className:"card-secondary",span:2*G,children:"Secondary metrics"}),i==null||(C=i.parameters)===null||C===void 0||(T=C.feature_flag_variants)===null||T===void 0?void 0:T.map((u,g)=>Object(e.jsx)(p.a,{span:G,style:{color:Object(Ge.d)(Je(u.key,y))},children:Object(e.jsx)("span",{className:"text-sm",children:Object(_.i)(u.key)})},g))]}),i.start_date?tn?Object(e.jsx)(te.a,{active:!0,paragraph:!1}):Object(e.jsx)(e.Fragment,{children:i.secondary_metrics.map((u,g)=>{var R,ae;return Object(e.jsxs)(j.a,{className:"border-t",justify:"space-between",style:{paddingTop:8,paddingBottom:8},children:[Object(e.jsx)(p.a,{span:2*G,children:Object(_.i)(u.name)}),i==null||(R=i.parameters)===null||R===void 0||(ae=R.feature_flag_variants)===null||ae===void 0?void 0:ae.map((Le,rt)=>Object(e.jsx)(p.a,{span:G,children:Q!=null&&Q[g][Le.key]?u.filters.insight===c.F.FUNNELS?Object(e.jsxs)(e.Fragment,{children:[((Q==null?void 0:Q[g][Le.key])*100).toFixed(1),"%"]}):Object(e.jsx)(e.Fragment,{children:Object(_.Q)(Q==null?void 0:Q[g][Le.key])}):Object(e.jsx)(e.Fragment,{children:"--"})},rt))]},g)})}):Object(e.jsx)(e.Fragment,{children:i.secondary_metrics.map((u,g)=>{var R,ae;return Object(e.jsxs)(j.a,{className:"border-t",justify:"space-between",style:{paddingTop:8,paddingBottom:8},children:[Object(e.jsx)(p.a,{span:2*G,children:Object(_.i)(u.name)}),i==null||(R=i.parameters)===null||R===void 0||(ae=R.feature_flag_variants)===null||ae===void 0?void 0:ae.map((Le,rt)=>Object(e.jsx)(p.a,{span:G,children:"--"},rt))]},g)})})]})})]})},"experiment-details")}),!(i!=null&&i.start_date)&&Object(e.jsx)("div",{className:"mt-4 w-full",children:Object(e.jsx)(ge,{experiment:i})})]}),Object(e.jsxs)("div",{className:"experiment-result",children:[f?((i==null||(N=i.parameters)===null||N===void 0||(z=N.feature_flag_variants)===null||z===void 0?void 0:z.length)||0)>4?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)(j.a,{className:"border-t",justify:"space-between",style:{paddingTop:8,paddingBottom:8},children:[Object(e.jsx)(p.a,{span:2*G,children:"Variant"}),Qe.map((u,g)=>Object(e.jsx)(p.a,{span:G,style:{color:Object(Ge.d)(Je(u,y))},children:Object(e.jsx)("b",{children:Object(_.i)(u)})},g))]}),Object(e.jsxs)(j.a,{className:"border-t",justify:"space-between",style:{paddingTop:8,paddingBottom:8},children:[Object(e.jsx)(p.a,{span:2*G,children:y===c.F.TRENDS?"Count":"Conversion Rate"}),Qe.map((u,g)=>Object(e.jsx)(p.a,{span:G,children:y===c.F.TRENDS?be(u):`${ve(u)}%`},g))]}),Object(e.jsxs)(j.a,{className:"border-t",justify:"space-between",style:{paddingTop:8,paddingBottom:8},children:[Object(e.jsx)(p.a,{span:2*G,children:"Probability to be the best"}),Qe.map((u,g)=>Object(e.jsx)(p.a,{span:G,children:Object(e.jsx)("b",{children:f.probability[u]?`${(f.probability[u]*100).toFixed(1)}%`:"--"})},g))]})]}):Object(e.jsx)(j.a,{justify:"space-around",style:{flexFlow:"nowrap"},children:Object.keys(f.probability).sort((u,g)=>f.probability[g]-f.probability[u]).map((u,g)=>Object(e.jsxs)(p.a,{className:"pr-4",children:[Object(e.jsx)("div",{children:Object(e.jsx)("b",{children:Object(_.i)(u)})}),y===c.F.TRENDS?Object(e.jsxs)(j.a,{children:[Object(e.jsx)("b",{style:{paddingRight:4},children:Object(e.jsxs)(j.a,{children:["action"in f.insight[0]&&Object(e.jsx)(Yt.a,{filter:f.insight[0].action}),Object(e.jsx)("span",{style:{paddingLeft:4},children:"count:"})]})})," ",be(u)," ",Qt&&g===0&&Object(e.jsx)(U.a,{placement:"right",title:"It might seem confusing that the best variant has lower absolute count, but this can happen when fewer people are exposed to this variant, so its relative count is higher.",children:Object(e.jsx)(me.a,{style:{padding:"4px 2px"}})})]}):Object(e.jsxs)(j.a,{children:[Object(e.jsx)("b",{style:{paddingRight:4},children:"Conversion rate:"})," ",ve(u),"%"]}),Object(e.jsx)(st.a,{percent:Number((f.probability[u]*100).toFixed(1)),size:"small",showInfo:!1,strokeColor:Object(Ge.d)(Je(u,y))}),Object(e.jsxs)("div",{children:["Probability that this variant is the best:"," ",Object(e.jsxs)("b",{children:[(f.probability[u]*100).toFixed(1),"%"]})]})]},g))}):F&&Object(e.jsx)("div",{className:"text-center",children:Object(e.jsx)(te.a,{active:!0})}),f?Object(e.jsx)(L.BindLogic,{logic:de.c,props:{dashboardItemId:f.itemID,cachedInsight:{short_id:f.itemID,filters:h(h(w(h({},f.filters),{insight:y}),y===c.F.FUNNELS&&{layout:ce.k.vertical,funnel_viz_type:c.B.Steps}),y===c.F.TRENDS&&{display:c.k.ActionsLineGraphCumulative}),result:f.insight,disable_baseline:!0},doNotLoad:!0},children:Object(e.jsx)("div",{className:"mt-4",children:Object(e.jsx)(Be.a,{disableHeader:!0,disableCorrelationTable:y===c.F.FUNNELS,disableLastComputation:!0})})}):i.start_date&&Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:"no-experiment-results",children:!F&&Object(e.jsxs)("div",{className:"text-center",children:[Object(e.jsx)("b",{children:"There are no results for this experiment yet."}),Object(e.jsxs)("div",{className:"text-sm ",children:[!!ht&&`${ht}. `," ","Wait a bit longer for your users to be exposed to the experiment. Double check your feature flag implementation if you're still not seeing results."]})]})})})]})]}):Object(e.jsx)(te.a,{active:!0})})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/experiments/Experiment.scss":function(V,I,l){var M=l("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");I=M(!1),I.push([V.i,'.experiment-form .metrics-selection,.experiment-form .person-selection{border-top:1px solid var(--border);padding-top:1rem;width:100%}.experiment-form .person-selection{align-items:center;justify-content:space-between}.experiment-form .insights-graph-container{margin-bottom:1rem;background-color:#fff}.experiment-form .insights-graph-container .ant-card-head{border-bottom:1px solid var(--border);min-height:unset;background-color:var(--bg-light);padding-left:1rem;padding-right:1rem}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title{padding:.5rem 0}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter{font-size:14px}.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter:not(:last-child),.experiment-form .insights-graph-container .ant-card-head .ant-card-head-title span.filter span.head-title-item{margin-right:.5rem}.experiment-form .insights-graph-container .display-config-inner{display:flex;align-items:center;justify-content:space-between;overflow-x:auto}.experiment-form .insights-graph-container .ant-card-body{padding:0}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.experiment-form .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{width:100%;height:min(90vh - 16rem,36rem);max-width:300px;padding:0 1rem 1rem 0;display:flex;align-items:center}.experiment-form .insights-graph-container .LineGraph{width:calc(100% - 2rem);height:calc(100% - 3rem)}.experiment-form .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.experiment-form .experiment-preview{margin-bottom:1rem;border-bottom:1px solid var(--border)}.experiment-form .experiment-preview .mde-slider .ant-slider-handle{border:none}.experiment-form .experiment-preview .mde-slider .ant-slider-rail{background-color:#e5ebff}.experiment-form .variants{margin-top:.5rem;padding-bottom:1rem}.experiment-form .variants .ant-form-horizontal{min-height:32px}.experiment-form .variants .border-top{border-top-left-radius:4px;border-top-right-radius:4px}.experiment-form .variants .border-bottom{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.experiment-form .variants .feature-flag-variant{display:flex;align-items:center;height:3.5rem;padding:0 .5rem;background:#fff;border-bottom-width:1px;border-bottom-color:var(--border);border-top:1px solid var(--border);border-left:1px solid var(--border);border-right:1px solid var(--border)}.experiment-form .variants .feature-flag-variant .ant-form-item-explain-error{margin-top:.5rem;color:var(--danger)}.experiment-form .variants .feature-flag-variant .ant-form-item-label{padding:0}.experiment-form .variants .variant-label{display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:4px;color:#fff;min-width:52px;padding:2px 6px;margin-right:8px;font-size:12px;font-weight:500;letter-spacing:.01em}.experiment-form .secondary-metrics{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border);margin-bottom:1rem;width:100%}.experiment-form .ant-input-number-disabled,.experiment-form .ant-input[disabled]{color:#000}.view-experiment .draft-header{margin-bottom:1rem;border-bottom:1px solid var(--border)}.view-experiment .exp-description{font-style:italic;color:var(--muted)}.view-experiment .participants{background-color:#fff}.view-experiment .participants .ant-collapse-header{padding-top:.5rem;padding-bottom:.5rem;padding-left:.75rem}.view-experiment .variants-list li{display:inline}.view-experiment .variants-list li:after{content:", "}.view-experiment .variants-list li:last-child:after{content:""}.view-experiment .experiment-result{padding-top:1rem}.view-experiment .significant-results{padding:.5rem;width:100%;background:rgba(119,185,108,.1);border-radius:4px;text-align:center;margin-bottom:1rem}.view-experiment .not-significant-results{padding:.5rem;width:100%;background:rgba(83,117,255,.1);border-radius:4px;margin-bottom:1rem}.view-experiment .feature-flag-mods{padding:.5rem;width:100%;background:#f6ebf8;border-radius:4px;margin-bottom:1rem}.view-experiment .ant-collapse-content-box{display:flex;flex-flow:column}.view-experiment .secondary-progress{margin-top:.5rem}.view-experiment .secondary-progress li:before{content:"\u2022";display:inline-block;font-weight:900;margin-right:4px}.view-experiment .secondary-progress .ant-progress-inner,.view-experiment .secondary-progress .ant-progress-inner .ant-progress-bg{border-radius:4px}.view-experiment .no-experiment-results{display:flex;justify-content:center;align-items:center;margin-top:1rem;background-color:var(--side);border:1px solid var(--border);width:100%;min-height:320px;font-size:24px}.preview-conversion-goal-num{height:24px;width:24px;text-align:center;background-color:var(--side);color:var(--primary-alt);font-weight:700;margin-right:.5rem}.experiment-preview-row{border-bottom:1px solid var(--border);padding-bottom:1rem;margin-bottom:1rem}.experiment-preview-row:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.metric-name{border:1px solid var(--border);border-radius:4px;padding:8px 8px 8px 16px;margin-left:.5rem;flex:1}.experiment-implementation-details,.experiment-workflow{border-color:var(--dark-grey)}.experiment-implementation-details .ant-card-head,.experiment-workflow .ant-card-head{padding-left:1rem;padding-right:1rem;border:none}.experiment-implementation-details .ant-card-head-title,.experiment-workflow .ant-card-head-title{border-bottom:1px solid var(--border)}.experiment-implementation-details .exp-workflow-step,.experiment-workflow .exp-workflow-step{margin-bottom:.5rem;padding:.5rem;border-radius:4px}.experiment-implementation-details .exp-workflow-step:hover,.experiment-workflow .exp-workflow-step:hover{cursor:pointer}.experiment-implementation-details .step-completed,.experiment-workflow .step-completed{background-color:#e5ebff}',""]),V.exports=I}}]);
