"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[80190],{"../../products/user_interviews/frontend/UserInterview.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UserInterview:()=>UserInterview,scene:()=>scene});var posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.20.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),NotFound=__webpack_require__("../../frontend/src/lib/components/NotFound/index.tsx"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts"),LemonMarkdown=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonMarkdown/index.ts"),LemonWidget=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonWidget/LemonWidget.tsx"),dist_module=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.242.2_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),PersonDisplay=__webpack_require__("../../frontend/src/scenes/persons/PersonDisplay.tsx"),lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),userInterviewsLogic=__webpack_require__("../../products/user_interviews/frontend/userInterviewsLogic.ts");let userInterviewLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","user_interviews","frontend","userInterviewLogic"]),(0,index_esm.props)({}),(0,index_esm.key)(props=>props.id),(0,lib.loaders)(_ref=>{let{props}=_ref;return{userInterview:[userInterviewsLogic.i.findMounted()?.values.userInterviews.find(interview=>interview.id===props.id)||null,{loadUserInterview:async id=>{try{return await api.ZP.userInterviews.get(id)}catch{return null}},updateUserInterview:async data=>await api.ZP.userInterviews.update(props.id,data)}]}}),(0,index_esm.selectors)(_ref2=>{let{props}=_ref2;return{breadcrumbs:[s=>[s.userInterview],userInterview=>[{key:"UserInterviews",name:"User interviews",path:urls.j.userInterviews()},{key:props.id,name:userInterview?.interviewee_emails?.join(", "),path:urls.j.userInterview(props.id)}]]}}),(0,index_esm.afterMount)(_ref3=>{let{actions,props}=_ref3;props.id&&actions.loadUserInterview(props.id)})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:UserInterview,logic:userInterviewLogic,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id}}};function UserInterview(){let{userInterview,userInterviewLoading}=(0,index_esm.useValues)(userInterviewLogic),{updateUserInterview}=(0,index_esm.useAsyncActions)(userInterviewLogic),[summaryInEditing,setSummaryInEditing]=(0,react.useState)(null);return userInterviewLoading&&!userInterview?(0,jsx_runtime.jsxs)("div",{className:"@container",children:[(0,jsx_runtime.jsx)(PageHeader.m,{caption:(0,jsx_runtime.jsx)(src.yW.Text,{className:"w-48 h-4"})}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 items-start gap-4 @4xl:grid-cols-3",children:[(0,jsx_runtime.jsx)(LemonWidget._,{title:"Summary",className:"col-span-2",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5 p-3",children:[(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-6 w-[20%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[60%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[70%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[80%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[40%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[55%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[65%]"})]})}),(0,jsx_runtime.jsx)(LemonWidget._,{title:"Transcript",className:"col-span-1",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5 p-3",children:[(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[80%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[40%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[60%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[70%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[80%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[40%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[60%]"}),(0,jsx_runtime.jsx)(src.yW.Text,{className:"h-3 w-[70%]"})]})})]})]}):userInterview?(0,jsx_runtime.jsxs)("div",{className:"@container",children:[(0,jsx_runtime.jsx)(PageHeader.m,{caption:(0,jsx_runtime.jsx)(InterviewMetadata,{interview:userInterview})}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 items-start gap-4 @4xl:grid-cols-3",children:[(0,jsx_runtime.jsx)(LemonWidget._,{title:"Summary",className:"col-span-2",actions:null!==summaryInEditing?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{size:"xsmall",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconX,{}),tooltip:"Discard changes",onClick:()=>setSummaryInEditing(null),disabledReason:userInterviewLoading?"Savingâ€¦":void 0}),(0,jsx_runtime.jsx)(src.Jp,{size:"xsmall",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconCheck,{}),tooltip:"Save",onClick:()=>{updateUserInterview({summary:summaryInEditing}).then(()=>{setSummaryInEditing(null)}).catch(e=>dist_module.ZP.captureException(e))},loading:userInterviewLoading})]}):(0,jsx_runtime.jsx)(src.Jp,{size:"xsmall",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPencil,{}),onClick:()=>setSummaryInEditing(userInterview.summary||"")}),children:null!==summaryInEditing?(0,jsx_runtime.jsx)(src.X7,{value:summaryInEditing,onChange:newValue=>setSummaryInEditing(newValue),className:"pb-2 px-3"}):(0,jsx_runtime.jsx)(LemonMarkdown.j,{className:"p-3",children:userInterview.summary||"_No summary available._"})}),(0,jsx_runtime.jsxs)("div",{className:"col-span-1 flex flex-col gap-y-4",children:[(0,jsx_runtime.jsx)(LemonWidget._,{title:"Participants",children:(0,jsx_runtime.jsx)("div",{className:"p-3 flex flex-col gap-y-2",children:userInterview.interviewee_emails.map(interviewee_email=>(0,jsx_runtime.jsx)(PersonDisplay.I,{person:{properties:{email:interviewee_email},distinct_id:interviewee_email},withIcon:!0},interviewee_email))})}),(0,jsx_runtime.jsx)(LemonWidget._,{title:"Transcript",children:(0,jsx_runtime.jsx)(LemonMarkdown.j,{className:"p-3",children:userInterview.transcript||"_No transcript available._"})})]})]})]}):(0,jsx_runtime.jsx)(NotFound.T,{object:"user interview"})}function InterviewMetadata(_ref2){let{interview}=_ref2;return(0,jsx_runtime.jsx)("header",{className:"flex gap-x-2 gap-y-1 flex-wrap items-center",children:interview.created_at&&(0,jsx_runtime.jsxs)(src.oe,{className:"bg-bg-light",children:["Created: ",(0,dayjs.Bv)(interview.created_at).format("YYYY-MM-DD HH:mm")]})})}},"../../products/user_interviews/frontend/userInterviewsLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>userInterviewsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/urls.ts");let userInterviewsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["products","user_interviews","frontend","userInterviewsLogic"]),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)({userInterviews:{__default:[],loadUserInterviews:async()=>(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.userInterviews.list()).results}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({breadcrumbs:[()=>[],()=>[{key:"UserInterviews",name:"User interviews",path:scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.userInterviews()}]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref=>{let{actions}=_ref;actions.loadUserInterviews()})])}}]);