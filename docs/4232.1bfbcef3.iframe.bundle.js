"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[4232],{"./frontend/src/scenes/persons/PersonPageHeader.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>PersonPageHeader});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),groupsAccessLogic=__webpack_require__("./frontend/src/lib/introductions/groupsAccessLogic.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function GroupsTabs(_ref){let{activeGroupTypeIndex}=_ref;const{groupTypes,aggregationLabel}=(0,index_esm.useValues)(groupsModel.$),{groupsAccessStatus}=(0,index_esm.useValues)(groupsAccessLogic.e),showGroupsIntroductionPage=[groupsAccessLogic.Q.HasAccess,groupsAccessLogic.Q.HasGroupTypes,groupsAccessLogic.Q.NoAccess].includes(groupsAccessStatus);return(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:activeGroupTypeIndex,tabs:[{key:-1,label:"Persons",link:urls.j.persons()},...showGroupsIntroductionPage?[{key:0,label:"Groups",link:urls.j.groups(0)}]:groupTypes.map((groupType=>({label:(0,utils.fm)(aggregationLabel(groupType.group_type_index).plural),key:groupType.group_type_index,link:urls.j.groups(groupType.group_type_index)})))]})}try{GroupsTabs.displayName="GroupsTabs",GroupsTabs.__docgenInfo={description:"",displayName:"GroupsTabs",props:{activeGroupTypeIndex:{defaultValue:null,description:"",name:"activeGroupTypeIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/GroupsTabs.tsx#GroupsTabs"]={docgenInfo:GroupsTabs.__docgenInfo,name:"GroupsTabs",path:"frontend/src/scenes/groups/GroupsTabs.tsx#GroupsTabs"})}catch(__react_docgen_typescript_loader_error){}function PersonPageHeader(_ref){let{activeGroupTypeIndex}=_ref;const{showGroupsOptions}=(0,index_esm.useValues)(groupsModel.$);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:"Persons"+(showGroupsOptions?" & Groups":""),caption:`A catalog of your product's end users${showGroupsOptions?" and groups":""}.`}),showGroupsOptions&&(0,jsx_runtime.jsx)(GroupsTabs,{activeGroupTypeIndex})]})}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{activeGroupTypeIndex:{defaultValue:null,description:"",name:"activeGroupTypeIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/persons/PersonsScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PersonsScene:()=>PersonsScene,scene:()=>scene});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),PersonPageHeader=__webpack_require__("./frontend/src/scenes/persons/PersonPageHeader.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),fast_deep_equal=__webpack_require__("./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),schema=__webpack_require__("./frontend/src/queries/schema.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),lemonToast=__webpack_require__("./frontend/src/lib/lemon-ui/lemonToast.tsx"),DataTable_utils=__webpack_require__("./frontend/src/queries/nodes/DataTable/utils.ts"),featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx");const getDefaultQuery=function(){let usePersonsQuery=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{kind:schema.OH.DataTableNode,source:usePersonsQuery?{kind:schema.OH.PersonsQuery,select:(0,DataTable_utils.Qi)(schema.OH.PersonsQuery)}:{kind:schema.OH.PersonsNode},full:!0,propertiesViaUrl:!0}},personsSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","persons","personsSceneLogic"]),(0,index_esm.connect)({values:[featureFlagLogic.h,["featureFlags"]]}),(0,index_esm.selectors)({queryFlagEnabled:[s=>[s.featureFlags],featureFlags=>!!featureFlags?.[constants.y8.PERSONS_HOGQL_QUERY]]}),(0,index_esm.actions)({setQuery:query=>({query})}),(0,index_esm.reducers)((_ref=>{let{selectors}=_ref;return{query:[state=>getDefaultQuery(selectors.queryFlagEnabled(state)),{setQuery:(_,_ref2)=>{let{query}=_ref2;return query}}]}})),(0,lib.actionToUrl)((_ref3=>{let{values}=_ref3;return{setQuery:()=>[urls.j.persons(),{},(0,utils.h0)(values.query,getDefaultQuery(values.queryFlagEnabled))?{}:{q:values.query},{replace:!0}]}})),(0,lib.urlToAction)((_ref4=>{let{actions,values}=_ref4;return{[urls.j.persons()]:(_,__,_ref5)=>{let{q:queryParam}=_ref5;if(!fast_deep_equal_default()(queryParam,values.query))if(queryParam)"object"==typeof queryParam?actions.setQuery(queryParam):(lemonToast.UJ.error("Invalid query in URL"),console.error({queryParam}));else{const defaultQuery=getDefaultQuery(values.queryFlagEnabled);(0,utils.h0)(values.query,defaultQuery)||actions.setQuery(defaultQuery)}}}}))]);var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:PersonsScene};function PersonsScene(){const{query}=(0,index_esm.useValues)(personsSceneLogic),{setQuery}=(0,index_esm.useActions)(personsSceneLogic);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PersonPageHeader.l,{activeGroupTypeIndex:-1}),(0,jsx_runtime.jsx)(Query.A,{query,setQuery})]})}}}]);