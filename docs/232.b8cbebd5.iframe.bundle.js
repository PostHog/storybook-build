(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{4261:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(70),_interopRequireDefault=__webpack_require__(25);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(81)),React=_interopRequireWildcard(__webpack_require__(0)),_UserOutlined=_interopRequireDefault(__webpack_require__(4262)),_AntdIcon=_interopRequireDefault(__webpack_require__(108)),UserOutlined=function UserOutlined(props,ref){return React.createElement(_AntdIcon.default,(0,_objectSpread2.default)((0,_objectSpread2.default)({},props),{},{ref:ref,icon:_UserOutlined.default}))};UserOutlined.displayName="UserOutlined";var _default=React.forwardRef(UserOutlined);exports.default=_default},4262:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"}},4404:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RelatedGroups}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),LemonTable=__webpack_require__(243),groupsModel=__webpack_require__(127),UserOutlined=__webpack_require__(4261),UserOutlined_default=__webpack_require__.n(UserOutlined),utils=__webpack_require__(10),PersonHeader=__webpack_require__(346),regenerator=(__webpack_require__(41),__webpack_require__(45),__webpack_require__(40),__webpack_require__(50),__webpack_require__(7)),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(67),__webpack_require__(12)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),api=__webpack_require__(22),teamLogic=__webpack_require__(26),relatedGroupsLogic=Object(index_esm.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[teamLogic.a,["currentTeamId"]]},props:{},key:function key(props){var _props$groupTypeIndex;return"".concat(null!==(_props$groupTypeIndex=props.groupTypeIndex)&&void 0!==_props$groupTypeIndex?_props$groupTypeIndex:"person","-").concat(props.id)},actions:function actions(){return{loadRelatedActors:!0}},loaders:function loaders(_ref){var _loadRelatedActors,values=_ref.values,props=_ref.props;return{relatedActors:[[],{loadRelatedActors:(_loadRelatedActors=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var url;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return url="api/projects/".concat(values.currentTeamId,"/groups/related?").concat(Object(utils.zb)({group_type_index:props.groupTypeIndex,id:props.id})),_context.next=3,api.a.get(url);case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)}))),function loadRelatedActors(){return _loadRelatedActors.apply(this,arguments)}),setGroup:function setGroup(){return[]}}]}},events:function events(_ref2){return{afterMount:_ref2.actions.loadRelatedActors}}}),GroupActorHeader=__webpack_require__(909);function RelatedGroups(_ref){var groupTypeIndex=_ref.groupTypeIndex,id=_ref.id,_useValues=Object(index_esm.useValues)(relatedGroupsLogic({groupTypeIndex:groupTypeIndex,id:id})),relatedActors=_useValues.relatedActors,relatedActorsLoading=_useValues.relatedActorsLoading,aggregationLabel=Object(index_esm.useValues)(groupsModel.a).aggregationLabel,columns=[{title:"Type",key:"type",render:function RenderActor(_,actor){return"group"===actor.type?react_default.a.createElement(react_default.a.Fragment,null,Object(utils.j)(aggregationLabel(actor.group_type_index).singular)):react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(UserOutlined_default.a,null)," Person")}},{title:"id",key:"id",render:function RenderActor(_,actor){return"group"==actor.type?react_default.a.createElement(GroupActorHeader.a,{actor:actor}):react_default.a.createElement(PersonHeader.a,{person:actor,withIcon:!1})}}];return react_default.a.createElement(LemonTable.a,{dataSource:relatedActors,columns:columns,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:relatedActorsLoading,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{RelatedGroups.displayName="RelatedGroups",RelatedGroups.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:RelatedGroups.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(__react_docgen_typescript_loader_error){}},4747:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Group",(function(){return Group}));__webpack_require__(41),__webpack_require__(40),__webpack_require__(112);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),tabs=__webpack_require__(573),InfoCircleOutlined=__webpack_require__(640),index_esm=__webpack_require__(1),PropertiesTable=__webpack_require__(910),TimezoneAware=__webpack_require__(236),regenerator=(__webpack_require__(45),__webpack_require__(50),__webpack_require__(7)),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(67),__webpack_require__(12)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),api=__webpack_require__(22),utils=__webpack_require__(10),teamLogic=__webpack_require__(26),groupsModel=__webpack_require__(127),urls=__webpack_require__(18),GroupActorHeader=__webpack_require__(909),groupLogic=Object(index_esm.kea)({path:["groups","groupLogic"],connect:{values:[teamLogic.a,["currentTeamId"],groupsModel.a,["groupTypes","aggregationLabel"]]},actions:function actions(){return{setGroup:function setGroup(groupTypeIndex,groupKey){return{groupTypeIndex:groupTypeIndex,groupKey:groupKey}}}},loaders:function loaders(_ref){var _loadGroup,values=_ref.values;return{groupData:[null,{loadGroup:(_loadGroup=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var params,url;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return params={group_type_index:values.groupTypeIndex,group_key:values.groupKey},url="api/projects/".concat(values.currentTeamId,"/groups/find?").concat(Object(utils.zb)(params)),_context.next=4,api.a.get(url);case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}),_callee)}))),function loadGroup(){return _loadGroup.apply(this,arguments)})}]}},reducers:{groupTypeIndex:[0,{setGroup:function setGroup(_,_ref2){return _ref2.groupTypeIndex}}],groupKey:["",{setGroup:function setGroup(_,_ref3){return _ref3.groupKey}}]},selectors:{groupTypeName:[function(s){return[s.aggregationLabel,s.groupTypeIndex]},function(aggregationLabel,index){return aggregationLabel(index).singular}],breadcrumbs:[function(s){return[s.groupTypeName,s.groupTypeIndex,s.groupKey,s.groupData]},function(groupTypeName,groupTypeIndex,groupKey,groupData){return[{name:Object(utils.j)(groupTypeName),path:urls.a.groups(String(groupTypeIndex))},{name:Object(GroupActorHeader.b)(groupKey,(null==groupData?void 0:groupData.group_properties)||{}),path:urls.a.group(String(groupTypeIndex),groupKey)}]}]},urlToAction:function urlToAction(_ref4){var actions=_ref4.actions;return{"/groups/:groupTypeIndex/:groupKey":function groupsGroupTypeIndexGroupKey(_ref5){var groupTypeIndex=_ref5.groupTypeIndex,groupKey=_ref5.groupKey;groupTypeIndex&&groupKey&&(actions.setGroup(+groupTypeIndex,decodeURIComponent(groupKey)),actions.loadGroup())}}}}),EventsTable=__webpack_require__(1756),RelatedGroups=__webpack_require__(4404),Tooltip=__webpack_require__(44),types=__webpack_require__(4),PageHeader=__webpack_require__(208),CopyToClipboard=__webpack_require__(908),TabPane=tabs.a.TabPane,scene={component:Group,logic:groupLogic};function GroupCaption(_ref){var groupData=_ref.groupData,groupTypeName=_ref.groupTypeName;return react_default.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},react_default.a.createElement("div",{className:"mr"},react_default.a.createElement("span",{className:"text-muted"},"Type:")," ",groupTypeName),react_default.a.createElement("div",{className:"mr"},react_default.a.createElement("span",{className:"text-muted"},"Key:")," ",react_default.a.createElement(CopyToClipboard.a,{tooltipMessage:null,description:"group key",style:{display:"inline-flex",justifyContent:"flex-end"}},groupData.group_key)),react_default.a.createElement("div",null,react_default.a.createElement("span",{className:"text-muted"},"First seen:")," ",groupData.created_at?react_default.a.createElement(TimezoneAware.b,{time:groupData.created_at}):"unknown"))}function Group(){var _useValues=Object(index_esm.useValues)(groupLogic),groupData=_useValues.groupData,groupDataLoading=_useValues.groupDataLoading,groupTypeName=_useValues.groupTypeName,groupKey=_useValues.groupKey,groupTypeIndex=_useValues.groupTypeIndex;return groupData?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PageHeader.a,{title:Object(GroupActorHeader.b)(groupData.group_key,groupData.group_properties),caption:react_default.a.createElement(GroupCaption,{groupData:groupData,groupTypeName:groupTypeName})}),react_default.a.createElement(tabs.a,null,react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"persons-properties-tab"},"Properties"),key:types.v.PROPERTIES},react_default.a.createElement(PropertiesTable.a,{properties:groupData.group_properties||{},embedded:!1,searchable:!0})),react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"persons-events-tab"},"Events"),key:types.v.EVENTS},react_default.a.createElement(EventsTable.a,{pageKey:"".concat(groupTypeIndex,"::").concat(groupKey),fixedFilters:{properties:[{key:"$group_".concat(groupTypeIndex),value:groupKey}]},sceneUrl:urls.a.group(groupTypeIndex.toString(),groupKey),hideTableConfig:!0})),react_default.a.createElement(TabPane,{tab:react_default.a.createElement("span",{"data-attr":"group-related-tab"},"Related people & groups",react_default.a.createElement(Tooltip.a,{title:"People and groups that have shared events with this ".concat(groupTypeName," in the last 90 days.")},react_default.a.createElement(InfoCircleOutlined.a,{style:{marginLeft:6,marginRight:0}}))),key:types.v.RELATED},react_default.a.createElement(RelatedGroups.a,{id:groupKey,groupTypeIndex:groupTypeIndex})))):groupDataLoading?react_default.a.createElement(utils.b,null):react_default.a.createElement(PageHeader.a,{title:"Group not found"})}}}]);