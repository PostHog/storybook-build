(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{"./frontend/src/scenes/actions/ActionsTable.tsx":function(ce,f,e){"use strict";e.r(f),e.d(f,"scene",function(){return ae}),e.d(f,"ActionsTable",function(){return ue});var N=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),F=e.n(N),g=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),t=e.n(g),h=e("./node_modules/core-js/modules/es.array.map.js"),z=e.n(h),V=e("./node_modules/core-js/modules/es.regexp.exec.js"),P=e.n(V),y=e("./node_modules/core-js/modules/es.string.search.js"),D=e.n(y),Y=e("./node_modules/core-js/modules/es.array.concat.js"),R=e.n(Y),E=e("./node_modules/core-js/modules/es.function.name.js"),Q=e.n(E),B=e("./node_modules/core-js/modules/es.array.slice.js"),p=e.n(B),T=e("./node_modules/core-js/modules/es.number.constructor.js"),q=e.n(T),A=e("./node_modules/core-js/modules/es.array.filter.js"),ee=e.n(A),K=e("./node_modules/core-js/modules/es.object.to-string.js"),G=e.n(K),d=e("./node_modules/react/index.js"),n=e.n(d),u=e("./frontend/src/scenes/actions/Actions.scss"),c=e("./frontend/src/lib/components/Link.tsx"),O=e("./node_modules/antd/es/radio/index.js"),M=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),I=e("./frontend/src/lib/utils.tsx"),r=e("./node_modules/kea/lib/index.esm.js"),L=e("./frontend/src/models/actionsModel.ts"),W=e("./frontend/src/scenes/actions/NewActionButton.tsx"),v=e("./frontend/src/types.ts"),$=e("./node_modules/fuse.js/dist/fuse.esm.js"),j=e("./frontend/src/scenes/userLogic.ts"),X=e("./frontend/src/scenes/teamLogic.tsx"),Z=e("./frontend/src/lib/api.ts"),x=e("./frontend/src/scenes/urls.ts"),H=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),te=e("./frontend/src/lib/components/LemonTable/index.ts"),o=e("./frontend/src/lib/components/LemonButton/index.ts"),J=e("./frontend/src/lib/components/LemonDivider/index.ts"),U=e("./frontend/src/lib/components/LemonButton/More.tsx"),s=e("./node_modules/kea-router/lib/index.js"),l=e.n(s),a=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),_=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),b=e("./frontend/src/lib/components/PageHeader.tsx"),S=e("./frontend/@posthog/lemon-ui/src/index.ts"),ne=function(se,le){return new $.a(se,{keys:["name","url"],threshold:.3}).search(le).map(function(ie){return ie.item})},ae={component:ue};function ue(){var me=Object(r.useValues)(X.a),se=me.currentTeam,le=Object(r.useValues)(Object(L.a)({params:"include_count=1"})),ie=le.actions,Me=le.actionsLoading,fe=Object(r.useActions)(L.a),ve=fe.loadActions,je=Object(d.useState)(""),Ee=t()(je,2),_e=Ee[0],ge=Ee[1],Te=Object(d.useState)(!1),Oe=t()(Te,2),Pe=Oe[0],Ae=Oe[1],De=Object(r.useValues)(j.a),de=De.user,Ie=De.hasAvailableFeature,Le=[{title:"Name",dataIndex:"name",width:"25%",sorter:function(i,m){return(i.name||"").localeCompare(m.name||"")},render:function(i,m,k){return n.a.createElement(c.a,{"data-attr":"action-link-"+k,to:x.a.action(m.id),className:"row-name"},i||n.a.createElement("i",null,"Unnamed action"))}}].concat(F()(Ie(v.d.TAGGING)?[{title:"Tags",dataIndex:"tags",width:250,key:"tags",render:function(i){return n.a.createElement(a.a,{tags:i,staticOnly:!0})}}]:[]),[{title:"Type",key:"type",render:function(i,m){var k;return n.a.createElement("span",null,(k=m.steps)!==null&&k!==void 0&&k.length?m.steps.map(function(re){return n.a.createElement("div",{key:re.id},function(){var w=Object(I.Ab)(re.url||"");switch(w=w.slice(0,40)+(w.length>40?"...":""),re.event){case"$autocapture":return"Autocapture";case"$pageview":switch(re.url_matching){case"regex":return n.a.createElement(n.a.Fragment,null,"Page view URL matches regex ",n.a.createElement("strong",null,w));case"exact":return n.a.createElement(n.a.Fragment,null,"Page view URL matches exactly ",n.a.createElement("strong",null,w));default:return n.a.createElement(n.a.Fragment,null,"Page view URL contains ",n.a.createElement("strong",null,w))}default:return n.a.createElement(n.a.Fragment,null,"Event: ",n.a.createElement("strong",null,re.event))}}())}):n.a.createElement("i",null,"Empty \u2013 set this action up"))}},Object(H.b)(),Object(H.a)()],F()(se!=null&&se.slack_incoming_webhook?[{title:"Webhook",dataIndex:"post_to_slack",sorter:function(i,m){return Number(i.post_to_slack)-Number(m.post_to_slack)},render:function(i){return i?n.a.createElement(M.a,null):null}}]:[]),[{width:0,render:function(i,m){return n.a.createElement(U.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(o.a,{status:"stealth",to:x.a.action(m.id),fullWidth:!0},"Edit"),n.a.createElement(o.a,{status:"stealth",to:Object(s.combineUrl)(x.a.insightNew({insight:v.B.TRENDS,interval:"day",display:v.j.ActionsLineGraph,actions:[{id:m.id,name:m.name,type:"actions",order:0}]})).url,fullWidth:!0},"Try out in Insights"),n.a.createElement(J.a,null),n.a.createElement(o.a,{status:"danger",onClick:function(){return Object(I.w)({endpoint:Z.b.actions.determineDeleteEndpoint(),object:m,callback:ve})},fullWidth:!0},"Delete action"))})}}]),oe=ie;return _e&&_e!==""&&(oe=ne(oe,_e)),Pe&&(oe=oe.filter(function(C){var i;return((i=C.created_by)===null||i===void 0?void 0:i.uuid)===(de==null?void 0:de.uuid)})),n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(b.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),n.a.createElement(_.a,{tab:_.b.Actions}),n.a.createElement(S.LemonInput,{type:"search",placeholder:"Search for actions",onChange:ge,value:_e}),n.a.createElement(O.a.Group,{buttonStyle:"solid",value:Pe,onChange:function(i){return Ae(i.target.value)}},n.a.createElement(O.a.Button,{value:!1},"All actions"),n.a.createElement(O.a.Button,{value:!0},"My actions")),n.a.createElement("div",{className:"mb-4 float-right"},n.a.createElement(W.a,null)),n.a.createElement(te.a,{columns:Le,loading:Me,rowKey:"id",pagination:{pageSize:100},"data-attr":"actions-table",dataSource:oe,defaultSorting:{columnKey:"created_by",order:-1},emptyState:"The first step to standardized analytics is creating your first action."}))}},"./frontend/src/scenes/actions/NewActionButton.tsx":function(ce,f,e){"use strict";e.d(f,"a",function(){return B});var N=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=e.n(N),g=e("./node_modules/react/index.js"),t=e.n(g),h=e("./node_modules/kea-router/lib/index.js"),z=e.n(h),V=e("./frontend/src/scenes/urls.ts"),P=e("./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx"),y=e("./frontend/src/lib/components/icons.tsx"),D=e("./frontend/src/lib/components/LemonButton/index.ts"),Y=e("./node_modules/kea/lib/index.esm.js"),R=e("./frontend/src/lib/logic/featureFlagLogic.ts"),E=e("./frontend/src/lib/constants.tsx"),Q=e("./frontend/@posthog/lemon-ui/src/index.ts");function B(){var p=Object(g.useState)(!1),T=F()(p,2),q=T[0],A=T[1],ee=Object(g.useState)(!1),K=F()(ee,2),G=K[0],d=K[1],n=Object(Y.useValues)(R.a),u=n.featureFlags;return t.a.createElement(t.a.Fragment,null,t.a.createElement(D.a,{type:"primary",onClick:function(){return A(!0)},"data-attr":"create-action"},"New ",u[E.h.SIMPLIFY_ACTIONS]?"calculated event":"action"),t.a.createElement(Q.LemonModal,{isOpen:q,onClose:function(){A(!1),d(!1)},title:"Create new ".concat(u[E.h.SIMPLIFY_ACTIONS]?"calculated event":"action"),footer:t.a.createElement(t.a.Fragment,null,G&&t.a.createElement(D.a,{key:"back-button",type:"secondary",onClick:function(){return d(!1)}},"Back"),t.a.createElement(D.a,{key:"cancel-button",type:"secondary",onClick:function(){A(!1),d(!1)}},"Cancel"))},G?t.a.createElement(P.a,null):t.a.createElement("div",{className:"space-y-2"},t.a.createElement(D.a,{type:"secondary",icon:t.a.createElement(y.IconMagnifier,null),onClick:function(){return d(!0)},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-inspect"},"Inspect element on your site"),t.a.createElement(D.a,{type:"secondary",icon:t.a.createElement(y.IconEdit,null),onClick:function(){h.router.actions.push(V.a.createAction())},size:"large",fullWidth:!0,center:!0,"data-attr":"new-action-pageview"},"From event or pageview"))))}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(ce,f,e){"use strict";e.d(f,"b",function(){return o}),e.d(f,"a",function(){return U});var N=e("./node_modules/core-js/modules/es.object.keys.js"),F=e.n(N),g=e("./node_modules/core-js/modules/es.symbol.js"),t=e.n(g),h=e("./node_modules/core-js/modules/es.array.filter.js"),z=e.n(h),V=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),P=e.n(V),y=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),D=e.n(y),Y=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),R=e.n(Y),E=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Q=e.n(E),B=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),p=e.n(B),T=e("./node_modules/core-js/modules/es.array.iterator.js"),q=e.n(T),A=e("./node_modules/core-js/modules/es.object.to-string.js"),ee=e.n(A),K=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),G=e.n(K),d=e("./node_modules/core-js/modules/es.object.from-entries.js"),n=e.n(d),u=e("./node_modules/core-js/modules/es.array.map.js"),c=e.n(u),O=e("./node_modules/core-js/modules/es.object.entries.js"),M=e.n(O),I=e("./node_modules/react/index.js"),r=e.n(I),L=e("./node_modules/kea/lib/index.esm.js"),W=e("./node_modules/antd/es/tabs/index.js"),v=e("./frontend/src/scenes/urls.ts"),$=e("./frontend/src/lib/components/Tooltip.tsx"),j=e("./frontend/src/lib/components/icons.tsx"),X=e("./frontend/src/lib/components/TitleWithIcon.tsx"),Z=e("./frontend/src/lib/logic/featureFlagLogic.ts"),x=e("./frontend/src/lib/constants.tsx");function H(s,l){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(s);l&&(_=_.filter(function(b){return Object.getOwnPropertyDescriptor(s,b).enumerable})),a.push.apply(a,_)}return a}function te(s){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?arguments[l]:{};l%2?H(Object(a),!0).forEach(function(_){p()(s,_,a[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach(function(_){Object.defineProperty(s,_,Object.getOwnPropertyDescriptor(a,_))})}return s}var o;(function(s){s.Actions="actions",s.EventDefinitions="events",s.EventPropertyDefinitions="properties"})(o||(o={}));var J=Object(L.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(l){return{tab:l}}},reducers:{tab:[o.EventDefinitions,{setTab:function(l,a){var _=a.tab;return _}}]},selectors:function(){return{tabUrls:[function(){return[Z.a.selectors.featureFlags]},function(l){var a;return te((a={},p()(a,o.EventPropertyDefinitions,v.a.eventPropertyDefinitions()),p()(a,o.EventDefinitions,v.a.eventDefinitions()),a),l[x.h.SIMPLIFY_ACTIONS]?{}:p()({},o.Actions,v.a.actions()))}]}},actionToUrl:function(l){var a=l.values;return{setTab:function(b){var S=b.tab;return a.tabUrls[S]||v.a.events()}}},urlToAction:function(l){var a=l.actions,_=l.values;return Object.fromEntries(Object.entries(_.tabUrls).map(function(b){var S=Q()(b,2),ne=S[0],ae=S[1];return[ae,function(){_.tab!==ne&&a.setTab(ne)}]}))}});function U(s){var l=s.tab,a=Object(L.useActions)(J),_=a.setTab,b=Object(L.useValues)(Z.a),S=b.featureFlags;return r.a.createElement(W.a,{tabPosition:"top",animated:!1,activeKey:l,onTabClick:function(ae){return _(ae)}},r.a.createElement(W.a.TabPane,{tab:r.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:o.EventDefinitions}),!S[x.h.SIMPLIFY_ACTIONS]&&r.a.createElement(W.a.TabPane,{tab:r.a.createElement(X.a,{icon:r.a.createElement($.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},r.a.createElement(j.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:o.Actions}),r.a.createElement(W.a.TabPane,{tab:r.a.createElement(X.a,{icon:r.a.createElement($.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},r.a.createElement(j.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:o.EventPropertyDefinitions}))}try{U.displayName="DataManagementPageTabs",U.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:U.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(s){}},"./frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx":function(ce,f,e){"use strict";e.d(f,"a",function(){return d});var N=e("./node_modules/core-js/modules/es.array.map.js"),F=e.n(N),g=e("./node_modules/react/index.js"),t=e.n(g),h=e("./node_modules/clsx/dist/clsx.m.js"),z=e("./node_modules/kea/lib/index.esm.js"),V=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),P=e("./frontend/src/lib/components/LemonButton/index.ts"),y=e("./node_modules/antd/es/popconfirm/index.js"),D=e("./frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts"),Y=e("./frontend/src/lib/utils.tsx"),R=e("./frontend/src/lib/components/LemonRow/index.ts"),E=e("./frontend/src/lib/components/icons.tsx"),Q=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),B=e("./node_modules/kea-forms/lib/index.js"),p=e.n(B),T=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),q=e("./frontend/src/lib/forms/Field.tsx"),A=e("./node_modules/antd/lib/typography/index.js"),ee=e.n(A);function K(n){var u=n.numberOfResults,c=n.isSearching,O=n.isAddingEntry;return u>0?null:c?t.a.createElement(R.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs that match your search."):O?null:t.a.createElement(R.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow"},"There are no authorized URLs or domains. Add one to get started.")}function G(n){var u=n.actionId,c=Object(D.b)({actionId:u}),O=Object(z.useValues)(c),M=O.isProposedUrlSubmitting,I=Object(z.useActions)(c),r=I.cancelProposingUrl;return t.a.createElement(B.Form,{logic:D.b,props:{actionId:u},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2"},t.a.createElement(q.a,{name:"url"},t.a.createElement(T.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})),t.a.createElement("div",{className:"flex justify-end gap-2"},t.a.createElement(P.a,{type:"secondary",onClick:r},"Cancel"),t.a.createElement(P.a,{htmlType:"submit",type:"primary",disabled:M,"data-attr":"url-save"},"Save")))}function d(n){var u=n.pageKey,c=n.actionId,O=Object(D.b)({actionId:c}),M=Object(z.useValues)(O),I=M.appUrlsKeyed,r=M.suggestionsLoading,L=M.searchTerm,W=M.launchUrl,v=M.editUrlIndex,$=M.isAddUrlFormVisible,j=Object(z.useActions)(O),X=j.addUrl,Z=j.removeUrl,x=j.setSearchTerm,H=j.newUrl,te=j.setEditUrlIndex;return t.a.createElement("div",null,t.a.createElement("div",{className:"flex items-center mb-4 gap-2 justify-between"},t.a.createElement(T.a,{type:"search",autoFocus:u==="toolbar-launch"&&!Object(Y.Y)(),placeholder:"Search for authorized URLs",onChange:x,value:L}),t.a.createElement(P.a,{onClick:H,type:"secondary",icon:t.a.createElement(E.IconPlus,null),"data-attr":"toolbar-add-url"},"Add",u==="toolbar-launch"&&" authorized URL")),r?t.a.createElement(R.a,{outlined:!0,fullWidth:!0,size:"large",key:-1},t.a.createElement(Q.a,{className:"text-xl"})):t.a.createElement("div",{className:"space-y-2"},$&&t.a.createElement(R.a,{outlined:!0,fullWidth:!0,size:"large"},t.a.createElement(G,{actionId:c})),t.a.createElement(K,{numberOfResults:I.length,isSearching:L.length>0,isAddingEntry:$}),I.map(function(o,J){return t.a.createElement("div",{key:J,className:Object(h.a)("border rounded flex items-center py-2 px-4 min-h-14")},v===J?t.a.createElement(G,{actionId:c}):t.a.createElement(t.a.Fragment,null,o.type==="suggestion"&&t.a.createElement(V.a,{type:"highlight",className:"mr-4"},"Suggestion"),t.a.createElement(ee.a.Text,{ellipsis:{tooltip:o.url},className:"text-muted-alt flex-1"},o.url),t.a.createElement("div",{className:"Actions flex space-x-2 shrink-0"},o.type==="suggestion"?t.a.createElement(P.a,{onClick:function(){return X(o.url)},icon:t.a.createElement(E.IconPlus,null),"data-attr":"toolbar-apply-suggestion"},"Apply suggestion"):t.a.createElement(t.a.Fragment,null,t.a.createElement(P.a,{icon:t.a.createElement(E.IconOpenInApp,null),href:W(o.url),tooltip:"Launch toolbar",center:!0,className:"ActionButton","data-attr":"toolbar-open"},"Launch"),t.a.createElement(P.a,{icon:t.a.createElement(E.IconEdit,null),onClick:function(){return te(o.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),t.a.createElement(y.a,{placement:"topRight",title:t.a.createElement(t.a.Fragment,null,"Are you sure you want to remove this authorized url?"),onConfirm:function(){return Z(J)}},t.a.createElement(P.a,{icon:t.a.createElement(E.IconDelete,null),tooltip:"Remove URL",center:!0,className:"ActionButton"}))))))})))}try{d.displayName="AuthorizedUrls",d.__docgenInfo={description:"",displayName:"AuthorizedUrls",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!1,type:{name:"string"}},actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"]={docgenInfo:d.__docgenInfo,name:"AuthorizedUrls",path:"frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx#AuthorizedUrls"})}catch(n){}}}]);
