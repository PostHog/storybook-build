(window.webpackJsonp=window.webpackJsonp||[]).push([[287,291],{"./frontend/src/scenes/cohorts/Cohort.tsx":function(x,t,e){"use strict";e.r(t),e.d(t,"scene",function(){return Ee}),e.d(t,"Cohort",function(){return le});var s=e("./node_modules/core-js/modules/es.function.name.js"),i=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/scenes/urls.ts"),O=e("./frontend/src/models/cohortsModel.ts"),c=Object(i.kea)([Object(i.props)({}),Object(i.key)(function(g){return g.id||"new"}),Object(i.path)(["scenes","cohorts","cohortLogic"]),Object(i.selectors)({breadcrumbs:[function(){return[O.a.selectors.cohortsById,function(g,v){return v.id}]},function(g,v){var N;return[{name:"Cohorts",path:D.a.cohorts()},{name:v!=="new"&&((N=g[v])===null||N===void 0?void 0:N.name)||"Untitled"}]}]})]),I=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),w=e.n(I),k=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/antd/lib/dropdown/style/index.css"),y=e.n(k),E={};E.insert="head",E.singleton=!1;var f=w()(y.a,E),M=y.a.locals||{},b=e("./node_modules/core-js/modules/es.array.concat.js"),p=e("./frontend/src/scenes/cohorts/cohortEditLogic.ts"),U=e("./frontend/src/scenes/userLogic.ts"),o=e("./frontend/src/lib/components/PageHeader.tsx"),u=e("./frontend/src/lib/components/LemonButton/index.ts"),B=e("./node_modules/kea-router/lib/index.js"),K=e("./node_modules/antd/es/divider/index.js"),F=e("./frontend/src/lib/forms/Field.tsx"),r=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),l=e("./frontend/src/lib/components/Tooltip.tsx"),a=e("./frontend/src/lib/components/LemonSelect.tsx"),h=e("./frontend/src/scenes/cohorts/CohortFilters/constants.tsx"),R=e("./frontend/src/lib/constants.tsx"),Y=e("./frontend/src/types.ts"),$=e("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),X=e("./node_modules/antd/lib/upload/Dragger.js"),pe=e.n(X),j=e("./frontend/src/lib/components/icons.tsx"),me=e("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx"),xe=e("./node_modules/core-js/modules/es.array.map.js"),ie=e("./node_modules/core-js/modules/es.array.iterator.js"),fe=e("./node_modules/core-js/modules/es.object.to-string.js"),m=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),L=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss"),V=e.n(L),C={};C.insert="head",C.singleton=!1;var te=w()(V.a,C),G=V.a.locals||{},P=e("./frontend/src/scenes/cohorts/cohortUtils.tsx"),A=e("./node_modules/kea-forms/lib/index.js"),W=e("./node_modules/kea-forms/lib/components.js"),J=e("./node_modules/clsx/dist/clsx.m.js"),_=e("./node_modules/antd/es/row/index.js"),re=e("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),q=e("./frontend/src/lib/utils.tsx"),H=e("./frontend/src/lib/components/LemonDivider/index.ts"),S=e("./frontend/src/lib/components/AlertMessage/index.ts"),Oe=e("./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaRowBuilder.tsx"),n=e("./node_modules/react/jsx-runtime.js");function he(g){var v=Object(p.a)(g),N=Object(i.useValues)(v),ee=N.cohort,ne=Object(i.useActions)(v),be=ne.setInnerGroupType,ge=ne.duplicateFilter,ve=ne.removeFilter,se=ne.addFilter;return Object(n.jsxs)(n.Fragment,{children:[ee.filters.properties.values.map(function(d,T){return Object(P.i)(d)?Object(n.jsxs)(A.Group,{name:["filters","properties","values",T],children:[T!==0&&Object(n.jsx)("div",{className:"CohortCriteriaGroups__matching-group__logical-divider",children:ee.filters.properties.type}),Object(n.jsx)(W.Field,{name:"id",template:function(z){var de=z.error,Z=z.kids;return Object(n.jsxs)("div",{className:Object(J.a)("CohortCriteriaGroups__matching-group",de&&"CohortCriteriaGroups__matching-group--error"),children:[Object(n.jsxs)(_.a,{align:"middle",wrap:!1,className:"px-4",children:[Object(n.jsx)(re.a,{name:q.c[T],color:re.b.Gray}),Object(n.jsx)(me.a,{prefix:"Match persons against",suffix:"criteria",onChange:function(Q){return be(Q,T)},value:d.type}),Object(n.jsx)("div",{style:{flex:1,minWidth:"0.5rem"}}),Object(n.jsx)(u.a,{icon:Object(n.jsx)(j.IconCopy,{}),status:"primary-alt",onClick:function(){return ge(T)}}),ee.filters.properties.values.length>1&&Object(n.jsx)(u.a,{icon:Object(n.jsx)(j.IconDelete,{}),status:"primary-alt",onClick:function(){return ve(T)}})]}),Object(n.jsx)(H.a,{className:"my-4"}),de&&Object(n.jsx)(S.a,{className:"m-2",type:"error",children:de}),Z]})},children:Object(n.jsx)(n.Fragment,{children:d.values.map(function(ae,z){return Object(P.i)(ae)?null:Object(n.jsxs)(A.Group,{name:["values",z],children:[Object(n.jsx)(Oe.a,{id:g.id,groupIndex:T,index:z,logicalOperator:d.type,criteria:ae,type:Object(P.g)(ae),hideDeleteIcon:d.values.length<=1}),z===d.values.length-1&&Object(n.jsx)("div",{className:"m-3",children:Object(n.jsx)(u.a,{"data-attr":"cohort-add-filter-group-criteria",type:"secondary",onClick:function(){return se(T)},icon:Object(n.jsx)(j.IconPlusMini,{color:"var(--primary)"}),children:"Add criteria"})})]},z)})})})]},T):null}),Object(n.jsx)(u.a,{"data-attr":"cohort-add-filter-group",className:"mb-4 mt-4",type:"secondary",onClick:function(){return se()},icon:Object(n.jsx)(j.IconPlusMini,{color:"var(--primary)"}),fullWidth:!0,children:"Add criteria group"})]})}try{he.displayName="CohortCriteriaGroups",he.__docgenInfo={description:"",displayName:"CohortCriteriaGroups",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"]={docgenInfo:he.__docgenInfo,name:"CohortCriteriaGroups",path:"frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.tsx#CohortCriteriaGroups"})}catch(g){}var Ce=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),Pe=e("./frontend/src/scenes/persons/Persons.tsx"),Te=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),Le=e("./frontend/src/lib/components/NotFound/index.tsx");function je(g){var v,N=g.id,ee={id:N},ne=Object(p.a)(ee),be=Object(i.useActions)(ne),ge=be.deleteCohort,ve=be.setOuterGroupsType,se=Object(i.useValues)(ne),d=se.cohort,T=se.cohortLoading,ae=se.cohortMissing,z=Object(i.useValues)(U.a),de=z.hasAvailableFeature,Z=d.id==="new"||d.id===void 0;return ae?Object(n.jsx)(Le.a,{object:"cohort"}):Object(n.jsx)("div",{className:"cohort",children:Object(n.jsxs)(A.Form,{logic:p.a,props:ee,formKey:"cohort",enableFormOnSubmit:!0,children:[Object(n.jsx)(o.a,{title:Z?"New cohort":d.name||"Untitled",buttons:Object(n.jsxs)("div",{className:"flex items-center gap-2",children:[Z?Object(n.jsx)(u.a,{"data-attr":"cancel-cohort",type:"secondary",onClick:function(){B.router.actions.push(D.a.cohorts())},disabled:T,children:"Cancel"}):Object(n.jsx)(u.a,{"data-attr":"delete-cohort",status:"danger",type:"secondary",onClick:function(){ge()},disabled:T,children:"Delete"}),Object(n.jsx)(u.a,{type:"primary","data-attr":"save-cohort",htmlType:"submit",loading:T||d.is_calculating,disabled:T||d.is_calculating,children:"Save"})]})}),Object(n.jsx)(K.a,{}),Object(n.jsxs)("div",{className:"space-y-2",style:{maxWidth:640},children:[Object(n.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[Object(n.jsx)("div",{className:"flex-1",children:Object(n.jsx)(F.a,{name:"name",label:"Name",children:Object(n.jsx)(r.a,{"data-attr":"cohort-name"})})}),Object(n.jsx)("div",{className:"flex-1",children:Object(n.jsx)(F.a,{name:"is_static",label:"Type",children:function(Q){var ce=Q.value,ue=Q.onChange;return Object(n.jsx)(l.a,{title:Z?null:"Create a new cohort to use a different type of cohort.",children:Object(n.jsx)("div",{children:Object(n.jsx)(a.a,{disabled:!Z,options:h.b,value:ce?R.d.Static:R.d.Dynamic,onChange:function(ye){ue(ye===R.d.Static)},fullWidth:!0,"data-attr":"cohort-type"})})})}})})]}),de(Y.e.DASHBOARD_COLLABORATION)&&Object(n.jsx)("div",{className:"ph-ignore-input",children:Object(n.jsx)(F.a,{name:"description",label:"Description","data-attr":"cohort-description",children:Object(n.jsx)($.a,{})})})]}),d.is_static?Object(n.jsx)("div",{className:"mt-4 ph-ignore-input",children:Object(n.jsx)(F.a,{name:"csv",label:Z?"Upload users":"Add users","data-attr":"cohort-csv",children:function(Q){var ce,ue,we=Q.onChange;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user\u2019s distinct ID. The very first row (the header) will be skipped during import."}),Object(n.jsx)(pe.a,{name:"file",multiple:!1,fileList:d.csv?[d.csv]:[],accept:".csv",showUploadList:!1,beforeUpload:function(Ae){return we(Ae),!1},className:"cohort-csv-dragger",children:d.csv?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),Object(n.jsx)("div",{className:"ant-upload-text",children:(ce=(ue=d.csv)===null||ue===void 0?void 0:ue.name)!==null&&ce!==void 0?ce:"File chosen"})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j.IconUploadFile,{style:{fontSize:"3rem",color:"var(--muted-alt)"}}),Object(n.jsx)("div",{className:"ant-upload-text",children:"Drag a file here or click to browse for a file"})]})})]})}})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(K.a,{}),Object(n.jsxs)("div",{className:"flex items-center justify-between my-4",children:[Object(n.jsxs)("div",{className:"flex flex-col",children:[Object(n.jsx)(Te.a,{htmlFor:"groups",children:"Matching criteria"}),Object(n.jsx)("span",{children:"Actors who match the following criteria will be part of the cohort. Continuously updated automatically."})]}),Object(n.jsx)(me.a,{value:d.filters.properties.type,onChange:function(Q){ve(Q)},topLevelFilter:!0,suffix:"criteria"})]}),Object(n.jsx)(he,{id:ee.id})]}),!Z&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(K.a,{}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{className:"l3 mb-4",children:["Persons in this cohort",Object(n.jsx)("span",{className:"text-muted ml-2",children:!d.is_calculating&&"(".concat(d.count," matching ").concat(Object(q.tb)((v=d.count)!==null&&v!==void 0?v:0,"person","persons",!1),")")})]}),d.is_calculating?Object(n.jsxs)("div",{className:"cohort-recalculating flex items-center",children:[Object(n.jsx)(Ce.a,{className:"mr-4"}),"We're recalculating who belongs to this cohort. This could take up to a couple of minutes."]}):Object(n.jsx)(Pe.Persons,{cohort:d.id})]})]})]})})}try{je.displayName="CohortEdit",je.__docgenInfo={description:"",displayName:"CohortEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"]={docgenInfo:je.__docgenInfo,name:"CohortEdit",path:"frontend/src/scenes/cohorts/CohortEdit.tsx#CohortEdit"})}catch(g){}var Ee={component:le,logic:c,paramsToProps:function(v){var N=v.params.id;return{id:N&&N!=="new"?parseInt(N):"new"}}};function le(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=g.id;return Object(n.jsx)(je,{id:v})}try{le.displayName="Cohort",le.__docgenInfo={description:"",displayName:"Cohort",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/cohorts/Cohort.tsx#Cohort"]={docgenInfo:le.__docgenInfo,name:"Cohort",path:"frontend/src/scenes/cohorts/Cohort.tsx#Cohort"})}catch(g){}},"./frontend/src/scenes/groups/groupsListLogic.ts":function(x,t,e){"use strict";e.d(t,"a",function(){return F});var s=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),i=e.n(s),D=e("./node_modules/@babel/runtime/regenerator/index.js"),O=e.n(D),c=e("./node_modules/core-js/modules/es.array.iterator.js"),I=e.n(c),w=e("./node_modules/core-js/modules/es.object.to-string.js"),k=e.n(w),y=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),E=e.n(y),f=e("./node_modules/core-js/modules/es.array.concat.js"),M=e.n(f),b=e("./node_modules/kea/lib/index.esm.js"),p=e("./frontend/src/lib/api.ts"),U=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),o=e("./frontend/src/lib/utils.tsx"),u=e("./frontend/src/scenes/teamLogic.tsx"),B=e("./frontend/src/scenes/urls.ts"),K=e("./frontend/src/models/groupsModel.ts"),F=Object(b.kea)({path:["groups","groupsListLogic"],connect:{values:[u.a,["currentTeamId"],K.a,["groupTypes","aggregationLabel"],U.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(a){return{url:a}},setTab:function(a){return{tab:a}}}},loaders:function(l){var a=l.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var h=i()(O.a.mark(function Y($){var X;return O.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(X=$.url,!a.groupsEnabled){j.next=6;break}return X=X||"api/projects/".concat(a.currentTeamId,"/groups/?group_type_index=").concat(a.currentTab),j.next=5,p.b.get(X);case 5:return j.abrupt("return",j.sent);case 6:case"end":return j.stop()}},Y)}));function R(Y){return h.apply(this,arguments)}return R}()}]}},reducers:{currentTab:["-1",{setTab:function(l,a){var h=a.tab;return h}}]},selectors:{currentTabName:[function(r){return[r.currentTab,r.groupTypes,r.aggregationLabel]},function(r,l,a){return r==="-1"?"Persons":l!=null&&l.length?Object(o.i)(a(parseInt(r)).singular):""}],groupName:[function(r){return[r.currentTab,r.aggregationLabel]},function(r,l){return r==="-1"?{singular:"person",plural:"persons"}:l(parseInt(r))}],breadcrumbs:[function(r){return[r.currentTabName,r.currentTab]},function(r,l){return[{name:r,path:B.a.groups(l)}]}]},actionToUrl:function(){return{setTab:function(a){var h=a.tab;return h!=="-1"?B.a.groups(h):B.a.persons()}}},urlToAction:function(l){var a=l.actions,h=l.values;return{"/groups/:id":function(Y){var $=Y.id;$&&(a.setTab($),a.loadGroups())},"/persons":function(){h.currentTab!=="-1"&&a.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(x,t,e){"use strict";e.d(t,"a",function(){return w});var s=e("./node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/scenes/persons/personsLogic.tsx"),D=e("./frontend/src/scenes/persons/PersonHeader.tsx"),O=e("./frontend/@posthog/lemon-ui/src/index.ts"),c=e("./node_modules/react/jsx-runtime.js"),I=e.n(c);function w(){var k=Object(s.useValues)(i.a),y=k.personDeleteModal,E=Object(s.useActions)(i.a),f=E.deletePerson,M=E.showPersonDeleteModal;return Object(c.jsx)(O.LemonModal,{isOpen:!!y,onClose:function(){return M(null)},title:'Are you sure you want to delete "'.concat(Object(D.b)(y),'"?'),description:Object(c.jsxs)(c.Fragment,{children:["This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",Object(c.jsxs)("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold",children:[" ","Learn more"]})]}),footer:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(O.LemonButton,{status:"danger",type:"secondary",onClick:function(){f({person:y,deleteEvents:!0}),M(null)},"data-attr":"delete-person-with-events",children:"Delete person and all corresponding events"}),Object(c.jsx)(O.LemonButton,{type:"secondary",onClick:function(){return M(null)},"data-attr":"delete-person-cancel",children:"Cancel"}),Object(c.jsx)(O.LemonButton,{type:"primary",status:"danger",onClick:function(){f({person:y,deleteEvents:!1}),M(null)},"data-attr":"delete-person-no-events",children:"Delete person"})]})})}},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(x,t,e){"use strict";e.d(t,"a",function(){return b});var s=e("./node_modules/kea/lib/index.esm.js"),i=e("./frontend/src/lib/components/PageHeader.tsx"),D=e("./node_modules/core-js/modules/es.array.includes.js"),O=e("./node_modules/core-js/modules/es.string.includes.js"),c=e("./node_modules/core-js/modules/es.array.map.js"),I=e("./node_modules/antd/es/tabs/index.js"),w=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),k=e("./frontend/src/lib/utils.tsx"),y=e("./frontend/src/models/groupsModel.ts"),E=e("./frontend/src/scenes/groups/groupsListLogic.ts"),f=e("./node_modules/react/jsx-runtime.js");function M(){var p=Object(s.useActions)(E.a),U=p.setTab,o=Object(s.useValues)(E.a),u=o.currentTab,B=Object(s.useValues)(y.a),K=B.groupTypes,F=B.aggregationLabel,r=Object(s.useValues)(w.b),l=r.groupsAccessStatus,a=[w.a.HasAccess,w.a.HasGroupTypes,w.a.NoAccess].includes(l);return Object(f.jsxs)(I.a,{activeKey:u,onChange:function(R){return U(R)},children:[Object(f.jsx)(I.a.TabPane,{tab:"Persons"},"-1"),a?Object(f.jsx)(I.a.TabPane,{tab:"Introducing Group Analytics"},"0"):K.map(function(h){return Object(f.jsx)(I.a.TabPane,{tab:Object(k.i)(F(h.group_type_index).plural)},h.group_type_index)})]})}function b(p){var U=p.hideGroupTabs,o=Object(s.useValues)(y.a),u=o.showGroupsOptions;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.a,{title:"Persons".concat(u?" & Groups":""),caption:"A catalog of your product's end users".concat(u?" and groups":"",".")}),!U&&u&&Object(f.jsx)(M,{})]})}try{b.displayName="PersonPageHeader",b.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:b.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(p){}},"./frontend/src/scenes/persons/Persons.scss":function(x,t,e){"use strict";var s=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=e.n(s),D=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),O=e.n(D),c={};c.insert="head",c.singleton=!1;var I=i()(O.a,c),w=O.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(x,t,e){"use strict";e.r(t),e.d(t,"scene",function(){return xe}),e.d(t,"Persons",function(){return ie}),e.d(t,"PersonsScene",function(){return fe});var s=e("./node_modules/kea/lib/index.esm.js"),i=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),D=e.n(i),O=e("./node_modules/core-js/modules/es.array.concat.js"),c=e("./node_modules/core-js/modules/es.object.keys.js"),I=e("./frontend/src/lib/components/TZLabel/index.tsx"),w=e("./frontend/src/lib/components/PropertiesTable.tsx"),k=e("./frontend/src/scenes/persons/Persons.scss"),y=e("./frontend/src/lib/components/CopyToClipboard.tsx"),E=e("./frontend/src/scenes/persons/PersonHeader.tsx"),f=e("./frontend/src/lib/components/LemonTable/index.ts"),M=e("./frontend/@posthog/lemon-ui/src/index.ts"),b=e("./frontend/src/lib/components/icons.tsx"),p=e("./frontend/src/scenes/persons/personsLogic.tsx"),U=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),o=e("./node_modules/react/jsx-runtime.js");function u(m){var L=m.people,V=m.loading,C=V===void 0?!1:V,te=m.hasPrevious,G=m.hasNext,P=m.loadPrevious,A=m.loadNext,W=m.compact,J=Object(s.useActions)(p.a),_=J.showPersonDeleteModal,re=[{title:"Person",key:"person",render:function(H,S){return Object(o.jsx)(E.a,{withIcon:!0,person:S})}},{title:"ID",key:"id",render:function(H,S){return Object(o.jsx)("div",{className:"overflow-hidden",children:S.distinct_ids.length&&Object(o.jsx)(y.a,{explicitValue:S.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID",children:S.distinct_ids[0]})})}}].concat(D()(W?[]:[{title:"First seen",dataIndex:"created_at",render:function(H){return H?Object(o.jsx)(I.a,{time:H}):Object(o.jsx)(o.Fragment,{})}},{render:function(H,S){return Object(o.jsx)(M.LemonButton,{onClick:function(){return _(S)},icon:Object(o.jsx)(b.IconDelete,{}),status:"danger",size:"small"})}}]));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f.a,{"data-attr":"persons-table",columns:re,loading:C,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:G?function(){A==null||A(),window.scrollTo(0,0)}:void 0,onBackward:te?function(){P==null||P(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(H){var S=H.properties;return Object.keys(S).length?Object(o.jsx)(w.a,{properties:S}):"This person has no properties."}},dataSource:L,emptyState:"No persons",nouns:["person","persons"]}),Object(o.jsx)(U.a,{})]})}try{u.displayName="PersonsTable",u.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:u.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(m){}var B=e("./node_modules/antd/es/popconfirm/index.js"),K=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=e.n(K),r=e("./node_modules/core-js/modules/es.regexp.exec.js"),l=e("./node_modules/core-js/modules/es.string.search.js"),a=e("./node_modules/react/index.js"),h=e("./frontend/src/lib/components/Tooltip.tsx"),R=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),Y=function(){var L=Object(s.useActions)(p.a),V=L.loadPersons,C=L.setListFilters,te=Object(s.useValues)(p.a),G=te.listFilters,P=Object(a.useState)(""),A=F()(P,2),W=A[0],J=A[1],_=Object(R.a)(V,800);return Object(a.useEffect)(function(){J(G.search||"")},[]),Object(a.useEffect)(function(){C({search:W||void 0}),_()},[W]),Object(o.jsxs)("div",{className:"flex items-center gap-2",children:[Object(o.jsx)(M.LemonInput,{type:"search",placeholder:"Search for persons",onChange:J,value:W,"data-attr":"persons-search"}),Object(o.jsx)(h.a,{title:Object(o.jsx)(o.Fragment,{children:'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.'}),children:Object(o.jsx)(b.IconInfo,{className:"text-2xl text-muted-alt shrink-0"})})]})},$=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),X=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),pe=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),j=e("./frontend/src/lib/components/LemonButton/index.ts"),me=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),xe={component:fe,logic:p.a,paramsToProps:function(){return{syncWithUrl:!0}}};function ie(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=m.cohort;return Object(o.jsx)(s.BindLogic,{logic:p.a,props:{cohort:L,syncWithUrl:!L},children:Object(o.jsx)(fe,{})})}function fe(){var m=Object(s.useActions)(p.a),L=m.loadPersons,V=m.setListFilters,C=Object(s.useValues)(p.a),te=C.cohortId,G=C.persons,P=C.listFilters,A=C.personsLoading,W=C.exporterProps,J=C.apiDocsURL;return Object(o.jsxs)("div",{className:"persons-list",children:[!te&&Object(o.jsx)($.a,{}),Object(o.jsxs)("div",{className:"space-y-2",children:[Object(o.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[Object(o.jsx)(Y,{}),Object(o.jsx)(B.a,{placement:"topRight",title:Object(o.jsxs)(o.Fragment,{children:["Exporting by CSV is limited to 10,000 users.",Object(o.jsx)("br",{}),"To export more, please use ",Object(o.jsx)("a",{href:J,children:"the API"}),". Do you want to export by CSV?"]}),onConfirm:function(){return Object(me.a)(W[0])},children:Object(o.jsx)(j.a,{type:"secondary",icon:Object(o.jsx)(b.IconExport,{style:{color:"var(--primary)"}}),children:P.properties&&P.properties.length>0?Object(o.jsxs)("div",{style:{display:"block"},children:["Export (",Object(o.jsx)("strong",{children:P.properties.length})," filter)"]}):"Export"})})]}),Object(o.jsx)(X.a,{pageKey:"persons-list-page",propertyFilters:P.properties,onChange:function(re){V({properties:re}),L()},endpoint:"person",taxonomicGroupTypes:[pe.a.PersonProperties],showConditionBadge:!0}),Object(o.jsx)(u,{people:G.results,loading:A,hasPrevious:!!G.previous,hasNext:!!G.next,loadPrevious:function(){return L(G.previous)},loadNext:function(){return L(G.next)}})]})]})}try{ie.displayName="Persons",ie.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:ie.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(m){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss":function(x,t,e){var s=e("./node_modules/css-loader/dist/runtime/api.js");t=s(!1),t.push([x.i,".CohortCriteriaGroups__matching-group{padding-top:1rem;border:1px solid var(--border);border-radius:4px;width:100%;margin:.5rem 0}.CohortCriteriaGroups__matching-group.CohortCriteriaGroups__matching-group--error{border:1px solid var(--danger)}.CohortCriteriaGroups__matching-group__logical-divider{color:var(--primary-alt);font-weight:600;font-size:12px;text-transform:uppercase;padding:0 1.5rem}",""]),x.exports=t},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(x,t,e){var s=e("./node_modules/css-loader/dist/runtime/api.js");t=s(!1),t.push([x.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),x.exports=t},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/antd/lib/dropdown/style/index.css":function(x,t,e){var s=e("./node_modules/css-loader/dist/runtime/api.js");t=s(!1),t.push([x.i,'.ant-dropdown-menu-item.ant-dropdown-menu-item-danger{color:#ff4d4f}.ant-dropdown-menu-item.ant-dropdown-menu-item-danger:hover{color:#fff;background-color:#ff4d4f}.ant-dropdown{box-sizing:border-box;margin:0;padding:0;color:rgba(0,0,0,.85);font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";position:absolute;top:-9999px;left:-9999px;z-index:1050;display:block}.ant-dropdown:before{position:absolute;top:-4px;right:0;bottom:-4px;left:-7px;z-index:-9999;opacity:.0001;content:" "}.ant-dropdown-wrap{position:relative}.ant-dropdown-wrap .ant-btn>.anticon-down{font-size:10px}.ant-dropdown-wrap .anticon-down:before{transition:transform .2s}.ant-dropdown-wrap-open .anticon-down:before{transform:rotate(180deg)}.ant-dropdown-hidden,.ant-dropdown-menu-hidden,.ant-dropdown-menu-submenu-hidden{display:none}.ant-dropdown-show-arrow.ant-dropdown-placement-topCenter,.ant-dropdown-show-arrow.ant-dropdown-placement-topLeft,.ant-dropdown-show-arrow.ant-dropdown-placement-topRight{padding-bottom:10px}.ant-dropdown-show-arrow.ant-dropdown-placement-bottomCenter,.ant-dropdown-show-arrow.ant-dropdown-placement-bottomLeft,.ant-dropdown-show-arrow.ant-dropdown-placement-bottomRight{padding-top:10px}.ant-dropdown-arrow{position:absolute;z-index:1;display:block;width:8.48528137px;height:8.48528137px;background:transparent;border-style:solid;border-width:4.24264069px;transform:rotate(45deg)}.ant-dropdown-placement-topCenter>.ant-dropdown-arrow,.ant-dropdown-placement-topLeft>.ant-dropdown-arrow,.ant-dropdown-placement-topRight>.ant-dropdown-arrow{bottom:6.2px;border-color:transparent #fff #fff transparent;box-shadow:3px 3px 7px rgba(0,0,0,.07)}.ant-dropdown-placement-topCenter>.ant-dropdown-arrow{left:50%;transform:translateX(-50%) rotate(45deg)}.ant-dropdown-placement-topLeft>.ant-dropdown-arrow{left:16px}.ant-dropdown-placement-topRight>.ant-dropdown-arrow{right:16px}.ant-dropdown-placement-bottomCenter>.ant-dropdown-arrow,.ant-dropdown-placement-bottomLeft>.ant-dropdown-arrow,.ant-dropdown-placement-bottomRight>.ant-dropdown-arrow{top:6px;border-color:#fff transparent transparent #fff;box-shadow:-2px -2px 5px rgba(0,0,0,.06)}.ant-dropdown-placement-bottomCenter>.ant-dropdown-arrow{left:50%;transform:translateX(-50%) rotate(45deg)}.ant-dropdown-placement-bottomLeft>.ant-dropdown-arrow{left:16px}.ant-dropdown-placement-bottomRight>.ant-dropdown-arrow{right:16px}.ant-dropdown-menu{position:relative;margin:0;padding:4px 0;text-align:left;list-style-type:none;background-color:#fff;background-clip:padding-box;border-radius:2px;outline:none;box-shadow:0 3px 6px -4px rgba(0,0,0,.12),0 6px 16px 0 rgba(0,0,0,.08),0 9px 28px 8px rgba(0,0,0,.05)}.ant-dropdown-menu-item-group-title{padding:5px 12px;color:rgba(0,0,0,.45);transition:all .3s}.ant-dropdown-menu-submenu-popup{position:absolute;z-index:1050;background:transparent;box-shadow:none;transform-origin:0 0}.ant-dropdown-menu-submenu-popup li,.ant-dropdown-menu-submenu-popup ul{list-style:none}.ant-dropdown-menu-submenu-popup ul{margin-right:.3em;margin-left:.3em}.ant-dropdown-menu-item{position:relative;display:flex;align-items:center}.ant-dropdown-menu-item-icon{min-width:12px;margin-right:8px;font-size:12px}.ant-dropdown-menu-title-content{flex:auto}.ant-dropdown-menu-title-content>a{color:inherit;transition:all .3s}.ant-dropdown-menu-title-content>a:hover{color:inherit}.ant-dropdown-menu-title-content>a:after{position:absolute;top:0;right:0;bottom:0;left:0;content:""}.ant-dropdown-menu-item,.ant-dropdown-menu-submenu-title{clear:both;margin:0;padding:5px 12px;color:rgba(0,0,0,.85);font-weight:400;font-size:14px;line-height:22px;white-space:nowrap;cursor:pointer;transition:all .3s}.ant-dropdown-menu-item-selected,.ant-dropdown-menu-submenu-title-selected{color:#1890ff;background-color:#e6f7ff}.ant-dropdown-menu-item:hover,.ant-dropdown-menu-submenu-title:hover{background-color:#f5f5f5}.ant-dropdown-menu-item-disabled,.ant-dropdown-menu-submenu-title-disabled{color:rgba(0,0,0,.25);cursor:not-allowed}.ant-dropdown-menu-item-disabled:hover,.ant-dropdown-menu-submenu-title-disabled:hover{color:rgba(0,0,0,.25);background-color:#fff;cursor:not-allowed}.ant-dropdown-menu-item-disabled a,.ant-dropdown-menu-submenu-title-disabled a{pointer-events:none}.ant-dropdown-menu-item-divider,.ant-dropdown-menu-submenu-title-divider{height:1px;margin:4px 0;overflow:hidden;line-height:0;background-color:#f0f0f0}.ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon,.ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon{position:absolute;right:8px}.ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon,.ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon{margin-right:0!important;color:rgba(0,0,0,.45);font-size:10px;font-style:normal}.ant-dropdown-menu-item-group-list{margin:0 8px;padding:0;list-style:none}.ant-dropdown-menu-submenu-title{padding-right:24px}.ant-dropdown-menu-submenu-vertical{position:relative}.ant-dropdown-menu-submenu-vertical>.ant-dropdown-menu{position:absolute;top:0;left:100%;min-width:100%;margin-left:4px;transform-origin:0 0}.ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title,.ant-dropdown-menu-submenu.ant-dropdown-menu-submenu-disabled .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-arrow-icon{color:rgba(0,0,0,.25);background-color:#fff;cursor:not-allowed}.ant-dropdown-menu-submenu-selected .ant-dropdown-menu-submenu-title{color:#1890ff}.ant-dropdown.ant-slide-down-appear.ant-slide-down-appear-active.ant-dropdown-placement-bottomCenter,.ant-dropdown.ant-slide-down-appear.ant-slide-down-appear-active.ant-dropdown-placement-bottomLeft,.ant-dropdown.ant-slide-down-appear.ant-slide-down-appear-active.ant-dropdown-placement-bottomRight,.ant-dropdown.ant-slide-down-enter.ant-slide-down-enter-active.ant-dropdown-placement-bottomCenter,.ant-dropdown.ant-slide-down-enter.ant-slide-down-enter-active.ant-dropdown-placement-bottomLeft,.ant-dropdown.ant-slide-down-enter.ant-slide-down-enter-active.ant-dropdown-placement-bottomRight{animation-name:antSlideUpIn}.ant-dropdown.ant-slide-up-appear.ant-slide-up-appear-active.ant-dropdown-placement-topCenter,.ant-dropdown.ant-slide-up-appear.ant-slide-up-appear-active.ant-dropdown-placement-topLeft,.ant-dropdown.ant-slide-up-appear.ant-slide-up-appear-active.ant-dropdown-placement-topRight,.ant-dropdown.ant-slide-up-enter.ant-slide-up-enter-active.ant-dropdown-placement-topCenter,.ant-dropdown.ant-slide-up-enter.ant-slide-up-enter-active.ant-dropdown-placement-topLeft,.ant-dropdown.ant-slide-up-enter.ant-slide-up-enter-active.ant-dropdown-placement-topRight{animation-name:antSlideDownIn}.ant-dropdown.ant-slide-down-leave.ant-slide-down-leave-active.ant-dropdown-placement-bottomCenter,.ant-dropdown.ant-slide-down-leave.ant-slide-down-leave-active.ant-dropdown-placement-bottomLeft,.ant-dropdown.ant-slide-down-leave.ant-slide-down-leave-active.ant-dropdown-placement-bottomRight{animation-name:antSlideUpOut}.ant-dropdown.ant-slide-up-leave.ant-slide-up-leave-active.ant-dropdown-placement-topCenter,.ant-dropdown.ant-slide-up-leave.ant-slide-up-leave-active.ant-dropdown-placement-topLeft,.ant-dropdown.ant-slide-up-leave.ant-slide-up-leave-active.ant-dropdown-placement-topRight{animation-name:antSlideDownOut}.ant-dropdown-button>.anticon.anticon-down,.ant-dropdown-link>.anticon.anticon-down,.ant-dropdown-trigger>.anticon.anticon-down{font-size:10px;vertical-align:baseline}.ant-dropdown-button{white-space:nowrap}.ant-dropdown-button.ant-btn-group>.ant-btn:last-child:not(:first-child):not(.ant-btn-icon-only){padding-right:8px;padding-left:8px}.ant-dropdown-menu-dark,.ant-dropdown-menu-dark .ant-dropdown-menu{background:#001529}.ant-dropdown-menu-dark .ant-dropdown-menu-item,.ant-dropdown-menu-dark .ant-dropdown-menu-item .ant-dropdown-menu-submenu-arrow:after,.ant-dropdown-menu-dark .ant-dropdown-menu-item>.anticon+span>a,.ant-dropdown-menu-dark .ant-dropdown-menu-item>.anticon+span>a .ant-dropdown-menu-submenu-arrow:after,.ant-dropdown-menu-dark .ant-dropdown-menu-item>a,.ant-dropdown-menu-dark .ant-dropdown-menu-item>a .ant-dropdown-menu-submenu-arrow:after,.ant-dropdown-menu-dark .ant-dropdown-menu-submenu-title,.ant-dropdown-menu-dark .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-arrow:after{color:hsla(0,0%,100%,.65)}.ant-dropdown-menu-dark .ant-dropdown-menu-item:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-item>.anticon+span>a:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-item>a:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-submenu-title:hover{color:#fff;background:transparent}.ant-dropdown-menu-dark .ant-dropdown-menu-item-selected,.ant-dropdown-menu-dark .ant-dropdown-menu-item-selected:hover,.ant-dropdown-menu-dark .ant-dropdown-menu-item-selected>a{color:#fff;background:#1890ff}.ant-dropdown-rtl{direction:rtl}.ant-dropdown-rtl.ant-dropdown:before{right:-7px;left:0}.ant-dropdown-menu-submenu-rtl .ant-dropdown-menu-item-group-title,.ant-dropdown-menu.ant-dropdown-menu-rtl,.ant-dropdown-rtl .ant-dropdown-menu-item-group-title{direction:rtl;text-align:right}.ant-dropdown-menu-submenu-popup.ant-dropdown-menu-submenu-rtl{transform-origin:100% 0}.ant-dropdown-rtl .ant-dropdown-menu-item,.ant-dropdown-rtl .ant-dropdown-menu-submenu-popup li,.ant-dropdown-rtl .ant-dropdown-menu-submenu-popup ul,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title{text-align:right}.ant-dropdown-rtl .ant-dropdown-menu-item>.anticon:first-child,.ant-dropdown-rtl .ant-dropdown-menu-item>span>.anticon:first-child,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title>.anticon:first-child,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title>span>.anticon:first-child{margin-right:0;margin-left:8px}.ant-dropdown-rtl .ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon{right:auto;left:8px}.ant-dropdown-rtl .ant-dropdown-menu-item .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon,.ant-dropdown-rtl .ant-dropdown-menu-submenu-title .ant-dropdown-menu-submenu-expand-icon .ant-dropdown-menu-submenu-arrow-icon{margin-left:0!important;transform:scaleX(-1)}.ant-dropdown-rtl .ant-dropdown-menu-submenu-title{padding-right:12px;padding-left:24px}.ant-dropdown-rtl .ant-dropdown-menu-submenu-vertical>.ant-dropdown-menu{right:100%;left:0;margin-right:4px;margin-left:0}',""]),x.exports=t}}]);
