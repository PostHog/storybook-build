(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{4375:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupsListLogic}));__webpack_require__(42),__webpack_require__(46),__webpack_require__(40),__webpack_require__(51);var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(68),__webpack_require__(13)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__),kea__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),lib_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(418),lib_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(29),scenes_urls__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(18),_models_groupsModel__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(129),groupsListLogic=Object(kea__WEBPACK_IMPORTED_MODULE_7__.kea)({path:["groups","groupsListLogic"],connect:{values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_11__.a,["currentTeamId"],_models_groupsModel__WEBPACK_IMPORTED_MODULE_13__.a,["groupTypes","aggregationLabel"],lib_introductions_groupsAccessLogic__WEBPACK_IMPORTED_MODULE_9__.b,["groupsEnabled"]]},actions:function actions(){return{loadGroups:function loadGroups(url){return{url:url}},setTab:function setTab(tab){return{tab:tab}}}},loaders:function loaders(_ref){var _loadGroups,values=_ref.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:(_loadGroups=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function _callee(_ref2){var url;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(url=_ref2.url,!values.groupsEnabled){_context.next=6;break}return url=url||"api/projects/".concat(values.currentTeamId,"/groups/?group_type_index=").concat(values.currentTab),_context.next=5,lib_api__WEBPACK_IMPORTED_MODULE_8__.a.get(url);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}),_callee)}))),function loadGroups(_x){return _loadGroups.apply(this,arguments)})}]}},reducers:{currentTab:["-1",{setTab:function setTab(_,_ref3){return _ref3.tab}}]},selectors:{currentTabName:[function(s){return[s.currentTab,s.groupTypes,s.aggregationLabel]},function(currentTab,groupTypes,aggregationLabel){return"-1"===currentTab?"Persons":(null==groupTypes?void 0:groupTypes.length)?Object(lib_utils__WEBPACK_IMPORTED_MODULE_10__.j)(aggregationLabel(parseInt(currentTab)).singular):""}],breadcrumbs:[function(s){return[s.currentTabName,s.currentTab]},function(currentTabName,currentTab){return[{name:currentTabName,path:scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.groups(currentTab)}]}]},actionToUrl:function actionToUrl(){return{setTab:function setTab(_ref4){var tab=_ref4.tab;return"-1"!==tab?scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.groups(tab):scenes_urls__WEBPACK_IMPORTED_MODULE_12__.a.persons()}}},urlToAction:function urlToAction(_ref5){var actions=_ref5.actions,values=_ref5.values;return{"/groups/:id":function groupsId(_ref6){var id=_ref6.id;id&&(actions.setTab(id),actions.loadGroups())},"/persons":function persons(){"-1"!==values.currentTab&&actions.setTab("-1")}}}})},4385:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonPageHeader}));var index_esm=__webpack_require__(1),PageHeader=__webpack_require__(209),react=__webpack_require__(0),react_default=__webpack_require__.n(react),tabs=(__webpack_require__(85),__webpack_require__(33),__webpack_require__(102),__webpack_require__(575)),groupsAccessLogic=__webpack_require__(418),utils=__webpack_require__(10),groupsModel=__webpack_require__(129),groupsListLogic=__webpack_require__(4375);function GroupsTabs(){var setTab=Object(index_esm.useActions)(groupsListLogic.a).setTab,currentTab=Object(index_esm.useValues)(groupsListLogic.a).currentTab,_useValues2=Object(index_esm.useValues)(groupsModel.a),groupTypes=_useValues2.groupTypes,aggregationLabel=_useValues2.aggregationLabel,groupsAccessStatus=Object(index_esm.useValues)(groupsAccessLogic.b).groupsAccessStatus,showGroupsIntroductionPage=[groupsAccessLogic.a.HasAccess,groupsAccessLogic.a.HasGroupTypes,groupsAccessLogic.a.NoAccess].includes(groupsAccessStatus);return react_default.a.createElement(tabs.a,{activeKey:currentTab,onChange:function onChange(activeKey){return setTab(activeKey)}},react_default.a.createElement(tabs.a.TabPane,{tab:"Persons",key:"-1"}),showGroupsIntroductionPage?react_default.a.createElement(tabs.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):groupTypes.map((function(groupType){return react_default.a.createElement(tabs.a.TabPane,{tab:Object(utils.j)(aggregationLabel(groupType.group_type_index).plural),key:groupType.group_type_index})})))}function PersonPageHeader(_ref){var hideGroupTabs=_ref.hideGroupTabs,showGroupsOptions=Object(index_esm.useValues)(groupsModel.a).showGroupsOptions;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PageHeader.a,{title:"Persons".concat(showGroupsOptions?" & Groups":""),caption:"A catalog of your product's end users".concat(showGroupsOptions?" and groups":"",".")}),!hideGroupTabs&&showGroupsOptions&&react_default.a.createElement(GroupsTabs,null))}try{PersonPageHeader.displayName="PersonPageHeader",PersonPageHeader.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:PersonPageHeader.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(__react_docgen_typescript_loader_error){}},4399:function(module,exports,__webpack_require__){(exports=__webpack_require__(49)(!1)).push([module.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.pay-gate-page{display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:1rem}.pay-gate-page h2{font-size:32px;font-weight:600;margin-bottom:8px}.pay-gate-page h2 .highlight{font-weight:700;color:#f96132}.pay-gate-page .pay-caption{max-width:500px}.pay-gate-page .pay-buttons{margin-top:1rem;width:320px;max-width:90%}.pay-gate-page .pay-buttons .ant-btn{margin-bottom:1rem}",""]),module.exports=exports},4406:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PayGatePage_PayGatePage_PayGatePage}));__webpack_require__(42);var index_esm=__webpack_require__(1),react=__webpack_require__(0),react_default=__webpack_require__.n(react),LinkButton=__webpack_require__(404),userLogic=__webpack_require__(65),utils=__webpack_require__(10),icons=__webpack_require__(24),injectStylesIntoStyleTag=__webpack_require__(19),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),PayGatePage=__webpack_require__(4399),PayGatePage_default=__webpack_require__.n(PayGatePage),options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(PayGatePage_default.a,options),PayGatePage_default.a.locals;function PayGatePage_PayGatePage_PayGatePage(_ref){var header=_ref.header,caption=_ref.caption,hideUpgradeButton=_ref.hideUpgradeButton,docsLink=_ref.docsLink,featureKey=_ref.featureKey,upgradeLink=Object(index_esm.useValues)(userLogic.a).upgradeLink,featureName=Object(utils.Q)(featureKey,"title");return react_default.a.createElement("div",{className:"pay-gate-page"},react_default.a.createElement("h2",null,header),react_default.a.createElement("div",{className:"pay-caption"},caption),react_default.a.createElement("div",{className:"pay-buttons"},!hideUpgradeButton&&react_default.a.createElement(LinkButton.a,{to:upgradeLink,type:"primary","data-attr":"".concat(featureKey,"-upgrade"),className:"LemonLinkButton"},"Upgrade now to get ",featureName),docsLink&&react_default.a.createElement(LinkButton.a,{type:hideUpgradeButton?"primary":void 0,to:"".concat(docsLink,"?utm_medium=in-product&utm_campaign=").concat(featureKey,"-upgrade-learn-more"),target:"_blank","data-attr":"".concat(featureKey,"-learn-more"),className:"LemonLinkButton"},"Learn more about ",featureName," ",react_default.a.createElement(icons.IconOpenInNew,{style:{marginLeft:8}}))))}try{PayGatePage_PayGatePage_PayGatePage.displayName="PayGatePage",PayGatePage_PayGatePage_PayGatePage.__docgenInfo={description:"",displayName:"PayGatePage",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"string | Element"}},caption:{defaultValue:null,description:"",name:"caption",required:!0,type:{name:"string | Element"}},hideUpgradeButton:{defaultValue:null,description:"",name:"hideUpgradeButton",required:!1,type:{name:"boolean"}},docsLink:{defaultValue:null,description:"",name:"docsLink",required:!1,type:{name:"string"}},featureKey:{defaultValue:null,description:"",name:"featureKey",required:!0,type:{name:"enum",value:[{value:'"experimentation"'},{value:'"group-analytics"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PayGatePage/PayGatePage.tsx#PayGatePage"]={docgenInfo:PayGatePage_PayGatePage_PayGatePage.__docgenInfo,name:"PayGatePage",path:"frontend/src/lib/components/PayGatePage/PayGatePage.tsx#PayGatePage"})}catch(__react_docgen_typescript_loader_error){}},4752:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Groups",(function(){return Groups}));__webpack_require__(113),__webpack_require__(40),__webpack_require__(114);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),groupsListLogic=__webpack_require__(4375),PropertiesTable=__webpack_require__(915),PersonPageHeader=__webpack_require__(4385),TimezoneAware=__webpack_require__(237),LemonTable=__webpack_require__(246),Link=__webpack_require__(56),urls=__webpack_require__(18),groupsAccessLogic=__webpack_require__(418),PayGatePage=__webpack_require__(4406);function GroupsIntroduction(_ref){var header,subtext,access=_ref.access;return access===groupsAccessLogic.a.NoAccess?(header=react_default.a.createElement(react_default.a.Fragment,null,"Introducing ",react_default.a.createElement("span",{className:"highlight"},"Group Analytics"),"!"),subtext=react_default.a.createElement(react_default.a.Fragment,null,"Analyze how groups interact with your product as a whole instead of individual users (e.g. retention by companies instead of by users)")):access===groupsAccessLogic.a.HasAccess?(header=react_default.a.createElement(react_default.a.Fragment,null,"You're almost done!"),subtext=react_default.a.createElement(react_default.a.Fragment,null,"Learn how to track groups in your code")):(header=react_default.a.createElement(react_default.a.Fragment,null,"Looks like you're tracking groups!"),subtext=react_default.a.createElement(react_default.a.Fragment,null,"Upgrade today to use groups in Insights.")),react_default.a.createElement(PayGatePage.a,{header:header,featureKey:"group-analytics",caption:subtext,docsLink:"https://posthog.com/docs/user-guides/group-analytics",hideUpgradeButton:access===groupsAccessLogic.a.HasAccess})}try{GroupsIntroduction.displayName="GroupsIntroduction",GroupsIntroduction.__docgenInfo={description:"",displayName:"GroupsIntroduction",props:{access:{defaultValue:null,description:"",name:"access",required:!0,type:{name:"enum",value:[{value:"1"},{value:"2"},{value:"3"}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"]={docgenInfo:GroupsIntroduction.__docgenInfo,name:"GroupsIntroduction",path:"frontend/src/scenes/groups/GroupsIntroduction.tsx#GroupsIntroduction"})}catch(__react_docgen_typescript_loader_error){}var GroupActorHeader=__webpack_require__(914),scene={component:Groups,logic:groupsListLogic.a};function Groups(){var _useValues=Object(index_esm.useValues)(groupsListLogic.a),currentTabName=_useValues.currentTabName,groups=_useValues.groups,groupsLoading=_useValues.groupsLoading,loadGroups=Object(index_esm.useActions)(groupsListLogic.a).loadGroups,groupsAccessStatus=Object(index_esm.useValues)(groupsAccessLogic.b).groupsAccessStatus;if(groupsAccessStatus==groupsAccessLogic.a.HasAccess||groupsAccessStatus==groupsAccessLogic.a.HasGroupTypes||groupsAccessStatus==groupsAccessLogic.a.NoAccess)return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PersonPageHeader.a,null),react_default.a.createElement(GroupsIntroduction,{access:groupsAccessStatus}));var columns=[{title:currentTabName,key:"group_key",render:function Render(_,group){return react_default.a.createElement(Link.a,{to:urls.a.group(group.group_type_index.toString(),group.group_key)},Object(GroupActorHeader.b)(group.group_key,group.group_properties))}},{title:"First seen",key:"created_at",render:function Render(_,group){return react_default.a.createElement(TimezoneAware.b,{time:group.created_at})}}];return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(PersonPageHeader.a,null),react_default.a.createElement(LemonTable.a,{columns:columns,rowKey:"group_key",loading:groupsLoading,dataSource:groups.results,expandable:{expandedRowRender:function RenderPropertiesTable(_ref){var group_properties=_ref.group_properties;return react_default.a.createElement(PropertiesTable.a,{properties:group_properties})},rowExpandable:function rowExpandable(_ref2){var group_properties=_ref2.group_properties;return!!group_properties&&Object.keys(group_properties).length>0}},pagination:{controlled:!0,onBackward:groups.previous?function(){loadGroups(groups.previous),window.scrollTo(0,0)}:void 0,onForward:groups.next?function(){loadGroups(groups.next),window.scrollTo(0,0)}:void 0}}))}}}]);