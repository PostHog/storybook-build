(window.webpackJsonp=window.webpackJsonp||[]).push([[237],{4506:function(module,exports,__webpack_require__){(exports=__webpack_require__(50)(!1)).push([module.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.billing-page .plan-description ol,.billing-page .plan-description ul{margin-top:1rem;padding-left:0;list-style:none;text-align:center}.billing-page .plan-description ol li,.billing-page .plan-description ul li{line-height:1.2rem;margin-bottom:1rem}.billing-page .plan-description ol .disclaimer,.billing-page .plan-description ul .disclaimer{font-size:10px;font-weight:700;vertical-align:top;padding-left:1px}.billing-page .plan-description .disclaimer-details{font-size:.75rem;color:rgba(0,0,0,.5);margin-top:1rem}.billing-page .bill-amount{margin-top:.5rem;font-size:1.2rem;font-weight:700;text-align:center}",""]),module.exports=exports},4518:function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread2=__webpack_require__(2),react=__webpack_require__(0),asn_ToolOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},AntdIcon=__webpack_require__(16),icons_ToolOutlined_ToolOutlined=function ToolOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_ToolOutlined}))};icons_ToolOutlined_ToolOutlined.displayName="ToolOutlined";__webpack_exports__.a=react.forwardRef(icons_ToolOutlined_ToolOutlined)},4729:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Billing",(function(){return Billing_Billing}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),PageHeader=__webpack_require__(205),es_alert=(__webpack_require__(42),__webpack_require__(64),__webpack_require__(1248)),es_button=__webpack_require__(141),card=__webpack_require__(4273),index_esm=__webpack_require__(1),plan_default=__webpack_require__.p+"images/plan-default.64d2c4930c12267ba45d77bebf37405c.svg",Link=__webpack_require__(57),icons=__webpack_require__(36),ToolOutlined=__webpack_require__(4518),WarningOutlined=__webpack_require__(4282),billingLogic=__webpack_require__(623);function CurrentPlan(_ref){var plan=_ref.plan,billing=Object(index_esm.useValues)(billingLogic.c).billing;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:"space-top"}),(null==billing?void 0:billing.should_setup_billing)?react_default.a.createElement(es_alert.a,{type:"warning",message:react_default.a.createElement(react_default.a.Fragment,null,"Your plan is ",react_default.a.createElement("b",null,"currently inactive")," as you haven't finished setting up your billing information."),action:billing.subscription_url&&react_default.a.createElement(es_button.a,{href:billing.subscription_url,icon:react_default.a.createElement(ToolOutlined.a,null)},"Finish setup"),showIcon:!0,icon:react_default.a.createElement(WarningOutlined.a,null)}):react_default.a.createElement(card.a,{title:"Organization billing plan"},react_default.a.createElement("div",{style:{display:"flex",alignItems:"center"}},react_default.a.createElement("div",null,react_default.a.createElement("img",{src:plan.image_url||plan_default,alt:"",height:100,width:100})),react_default.a.createElement("div",{style:{flexGrow:1,paddingLeft:16}},react_default.a.createElement("h3",{className:"l3",style:{marginBottom:8}},plan.name),react_default.a.createElement(Link.a,{target:"_blank",to:"https://posthog.com/pricing#plan-".concat(plan.key,"?").concat(billingLogic.b)},"More plan details ",react_default.a.createElement(icons.IconOpenInNew,null)),react_default.a.createElement("div",{style:{marginTop:4}},plan.price_string),react_default.a.createElement("div",{className:"text-muted mt"},"Click on ",react_default.a.createElement("b",null,"manage subscription")," to cancel your billing agreement,"," ",react_default.a.createElement("b",null,"update your card")," or other billing information,")),react_default.a.createElement("div",null,react_default.a.createElement(es_button.a,{type:"primary",href:"/billing/manage",icon:react_default.a.createElement(ToolOutlined.a,null)},"Manage subscription"),react_default.a.createElement("div",{className:"text-muted text-center"},"Get past invoices too")))))}try{CurrentPlan.displayName="CurrentPlan",CurrentPlan.__docgenInfo={description:"",displayName:"CurrentPlan",props:{plan:{defaultValue:null,description:"",name:"plan",required:!0,type:{name:"PlanInterface"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/billing/CurrentPlan.tsx#CurrentPlan"]={docgenInfo:CurrentPlan.__docgenInfo,name:"CurrentPlan",path:"frontend/src/scenes/billing/CurrentPlan.tsx#CurrentPlan"})}catch(__react_docgen_typescript_loader_error){}var progress=__webpack_require__(2566),utils=__webpack_require__(10),Tooltip=__webpack_require__(47);function CurrentUsage(){var _billing$current_bill,_useValues=Object(index_esm.useValues)(billingLogic.c),eventAllocation=_useValues.eventAllocation,percentage=_useValues.percentage,strokeColor=_useValues.strokeColor,billing=_useValues.billing,plan=null==billing?void 0:billing.plan;return billing?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:"space-top"}),react_default.a.createElement(card.a,{title:"Current monthly usage"},billing.should_display_current_bill&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("h3",{className:"l3"},"Current bill amount"),void 0!==(null==billing?void 0:billing.current_bill_amount)&&null!==(null==billing?void 0:billing.current_bill_amount)?react_default.a.createElement(react_default.a.Fragment,null,"This is the amount (in dollars) of the bill for the currently ongoing period. The final amount will be billed a few days after the end of the month. Please note this number is reported on a daily basis,"," ",react_default.a.createElement("b",null,"so events ingested in the last 24 hours may not be reflected yet."),react_default.a.createElement("div",{className:"bill-amount"},"$".concat(null==billing||null===(_billing$current_bill=billing.current_bill_amount)||void 0===_billing$current_bill?void 0:_billing$current_bill.toLocaleString()))):react_default.a.createElement(react_default.a.Fragment,null,"We can't show your current bill amount right now. Please check back again in a few minutes or"," ",react_default.a.createElement("a",{href:"https://posthog.com/support/",target:"_blank"},"contact us")," ","if this message does not disappear.")),react_default.a.createElement("h3",{className:"l3 mt"},"Current event usage"),null!==billing.current_usage?react_default.a.createElement(react_default.a.Fragment,null,"Your organization has used"," ",react_default.a.createElement(Tooltip.a,{title:"".concat(billing.current_usage.toLocaleString()," events")},react_default.a.createElement("b",null,Object(utils.p)(billing.current_usage)))," ","events this month (calculated roughly every hour)."," ",eventAllocation&&react_default.a.createElement(react_default.a.Fragment,null,"You can use up to ",react_default.a.createElement("b",null,Object(utils.p)(eventAllocation))," events per month."),plan&&!plan.event_allowance&&!plan.is_metered_billing&&"Your current plan has an unlimited event allocation.",react_default.a.createElement(progress.a,{type:"line",percent:null!==percentage?Math.floor(100*percentage):100,strokeColor:strokeColor,status:null!==percentage?"normal":"success"}),(null==plan?void 0:plan.is_metered_billing)&&react_default.a.createElement("div",{className:"mt text-muted"},"This is the number of events that your organization has ingested across all your projects for the ",react_default.a.createElement("b",null,"current month")," and that ",react_default.a.createElement("b",null,"will be billed")," a few days after the end of the month.")):react_default.a.createElement("div",null,"Currently we do not have information about the number of billed events. Please check back again in a few minutes or"," ",react_default.a.createElement("a",{href:"https://posthog.com/support/",target:"_blank"},"contact us")," ","if this message does not disappear."))):null}__webpack_require__(34),__webpack_require__(41),__webpack_require__(512);var regenerator=__webpack_require__(8),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(69),__webpack_require__(13)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),slicedToArray=__webpack_require__(12),slicedToArray_default=__webpack_require__.n(slicedToArray),skeleton=__webpack_require__(1243),row=__webpack_require__(411),col=__webpack_require__(350),Spinner=__webpack_require__(211);function Plan(_ref){var plan=_ref.plan,onSubscribe=_ref.onSubscribe,_useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),detail=_useState2[0],setDetail=_useState2[1],_useState3=Object(react.useState)(!0),_useState4=slicedToArray_default()(_useState3,2),isDetailLoading=_useState4[0],setIsDetailLoading=_useState4[1],loadPlanDetail=function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(key){var response;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,fetch("/api/plans/".concat(key,"/template/"));case 2:if(!(response=_context.sent).ok){_context.next=9;break}return _context.t0=setDetail,_context.next=7,response.text();case 7:_context.t1=_context.sent,(0,_context.t0)(_context.t1);case 9:setIsDetailLoading(!1);case 10:case"end":return _context.stop()}}),_callee)})));return function loadPlanDetail(_x){return _ref2.apply(this,arguments)}}();return Object(react.useEffect)((function(){loadPlanDetail(plan.key)}),[plan.key]),react_default.a.createElement(card.a,null,react_default.a.createElement("div",{className:"cursor-pointer",onClick:function onClick(){return onSubscribe(plan)}},react_default.a.createElement("img",{src:plan.image_url||plan_default,alt:"",height:100,width:100}),react_default.a.createElement("h3",{style:{fontSize:22}},plan.name),react_default.a.createElement("div",{style:{fontWeight:"bold",marginBottom:16,fontSize:16}},plan.price_string)),react_default.a.createElement("div",null,react_default.a.createElement(es_button.a,{"data-attr":"btn-subscribe-now","data-plan":plan.key,type:"primary",onClick:function onClick(){return onSubscribe(plan)}},"Subscribe now")),isDetailLoading?react_default.a.createElement(skeleton.a,{paragraph:{rows:6},title:!1,className:"mt",active:!0}):react_default.a.createElement("div",{className:"plan-description",dangerouslySetInnerHTML:{__html:detail}}))}function BillingEnrollment(){var _useValues=Object(index_esm.useValues)(billingLogic.c),plans=_useValues.plans,plansLoading=_useValues.plansLoading,billingSubscriptionLoading=_useValues.billingSubscriptionLoading,subscribe=Object(index_esm.useActions)(billingLogic.c).subscribe,handleBillingSubscribe=function handleBillingSubscribe(plan){subscribe(plan.key)};return plans.length||plansLoading?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:"space-top"}),plansLoading?react_default.a.createElement(card.a,null,react_default.a.createElement(skeleton.a,{active:!0})):react_default.a.createElement(card.a,{title:"Billing Plan Enrollment"},react_default.a.createElement(row.a,{gutter:16,className:"space-top",style:{display:"flex",justifyContent:"center"}},plans.map((function(plan){return react_default.a.createElement(col.a,{sm:8,key:plan.key,className:"text-center"},billingSubscriptionLoading?react_default.a.createElement(Spinner.a,null):react_default.a.createElement(Plan,{plan:plan,onSubscribe:handleBillingSubscribe}))}))))):null}var injectStylesIntoStyleTag=__webpack_require__(18),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),Billing=__webpack_require__(4506),Billing_default=__webpack_require__.n(Billing),options={insert:"head",singleton:!1},scene=(injectStylesIntoStyleTag_default()(Billing_default.a,options),Billing_default.a.locals,{component:Billing_Billing,logic:billingLogic.c});function Billing_Billing(){var billing=Object(index_esm.useValues)(billingLogic.c).billing;return react_default.a.createElement("div",{className:"billing-page"},react_default.a.createElement(PageHeader.a,{title:"Billing & usage information"}),react_default.a.createElement(CurrentUsage,null),(null==billing?void 0:billing.plan)?react_default.a.createElement(CurrentPlan,{plan:billing.plan}):react_default.a.createElement(BillingEnrollment,null),react_default.a.createElement("div",{style:{marginBottom:128}}))}}}]);