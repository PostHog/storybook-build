(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[51502],{"../../frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>SceneDashboardChoiceModal});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonModal/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonRow/index.ts"),lib_lemon_ui_LemonSkeleton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSkeleton/index.ts"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx"),_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneDashboardChoiceModal(_ref){let{scene}=_ref,modalLogic=(0,_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_10__.F)({scene}),{isOpen,currentDashboardId,dashboards,searchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(modalLogic),{closeSceneDashboardChoiceModal,setSceneDashboardChoice,setSearchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(modalLogic),{dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_9__.h);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonModal__WEBPACK_IMPORTED_MODULE_5__.f,{isOpen:isOpen,onClose:closeSceneDashboardChoiceModal,title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:["Select a default dashboard for ",_sceneDashboardChoiceModalLogic__WEBPACK_IMPORTED_MODULE_10__.o[scene]]}),footer:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_12__.cn)("flex gap-2 w-full",currentDashboardId?"justify-between":"justify-end"),children:[currentDashboardId?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__.J,{type:"secondary","data-attr":"scene-dashboard-choice-new-tab",onClick:()=>{setSceneDashboardChoice(null),setSearchTerm(""),closeSceneDashboardChoiceModal()},children:'Reset to "new tab"'}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__.J,{type:"secondary","data-attr":"close-scene-dashboard-choice-modal",onClick:closeSceneDashboardChoiceModal,children:"Close"})]}),children:dashboardsLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"deprecated-space-y-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonSkeleton__WEBPACK_IMPORTED_MODULE_7__.y.Row,{repeat:4})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.DF,{type:"search",placeholder:"Search for dashboards",onChange:setSearchTerm,value:null!=searchTerm?searchTerm:void 0,fullWidth:!0,allowClear:!0,className:"mb-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.p2,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"deprecated-space-y-2 min-h-100",children:dashboards.map(dashboard=>{let isCurrentChoice=dashboard.id===currentDashboardId,rowContents=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"flex-1 flex flex-col justify-center overflow-hidden",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("strong",{children:dashboard.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span",{className:"text-text-3000 font-normal text-ellipsis",children:dashboard.description})]}),isCurrentChoice?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_components_SceneDashboardChoice_SceneIcon__WEBPACK_IMPORTED_MODULE_3__.m,{scene:scene,size:"small"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span",{children:"Default"})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("strong",{className:"set-default-text",children:"Set as default"})]});return isCurrentChoice?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_6__.Q,{fullWidth:!0,status:"muted",className:"dashboard-row",children:rowContents},dashboard.id):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_4__.J,{fullWidth:!0,className:"dashboard-row",onClick:()=>{setSceneDashboardChoice(dashboard.id),setSearchTerm(""),closeSceneDashboardChoiceModal(),kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.replace(scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.projectHomepage())},children:rowContents},dashboard.id)})})]})})}},"../../frontend/src/lib/components/SceneDashboardChoice/SceneIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>SceneIcon});var clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.35.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneIcon(props){let className=(0,clsx__WEBPACK_IMPORTED_MODULE_3__.default)("text-warning","small"===props.size?"text-lg":"text-3xl");return props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__.x.ProjectHomepage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconHome,{className:className}):props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__.x.Group||props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_1__.x.Person?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPerson,{className:className}):null}},"../../frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>sceneDashboardChoiceModalLogic,o:()=>sceneDescription});var fuse_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.281.0/node_modules/posthog-js/dist/module.js"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/utils/eventUsageLogic.ts"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx");let sceneDescription={[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.Person]:"persons",[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.Group]:"groups",[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage]:"this project"},sceneDashboardChoiceModalLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["lib","components","SceneDashboardChoice","sceneDashboardChoiceModalLogic",key||"unknown"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>`${props.scene}`),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({logic:[lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_2__.vx],actions:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.teamLogic,["updateCurrentTeam"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_5__.userLogic,["setUserScenePersonalisation"]],values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.teamLogic,["currentTeam"],scenes_userLogic__WEBPACK_IMPORTED_MODULE_5__.userLogic,["user"],_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_6__.h,["nameSortedDashboards"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!0,setSceneDashboardChoice:dashboardId=>({dashboardId}),setSearchTerm:searchTerm=>({searchTerm})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({searchTerm:[null,{setSearchTerm:(_,_ref)=>{let{searchTerm}=_ref;return searchTerm}}],isOpen:[!1,{showSceneDashboardChoiceModal:()=>!0,closeSceneDashboardChoiceModal:()=>!1}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)(_ref2=>{let{props}=_ref2;return{currentDashboardId:[s=>[s.currentTeam,s.user],(currentTeam,user)=>{var _user$scene_personali,_ref3,_currentTeam$primary_;let currentDashboard=null!==(_user$scene_personali=user?.scene_personalisation?.find(choice=>choice.scene===props.scene)?.dashboard)&&void 0!==_user$scene_personali?_user$scene_personali:null;return currentDashboard||props.scene!==scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage||(currentDashboard=null!==(_currentTeam$primary_=currentTeam?.primary_dashboard)&&void 0!==_currentTeam$primary_?_currentTeam$primary_:null),null!==(_ref3="number"==typeof currentDashboard?currentDashboard:currentDashboard?.id)&&void 0!==_ref3?_ref3:null}],dashboards:[s=>[s.searchTerm,s.nameSortedDashboards],(searchTerm,dashboards)=>(dashboards=dashboards.filter(d=>!d.deleted).sort((a,b)=>{var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")}),searchTerm)?new fuse_js__WEBPACK_IMPORTED_MODULE_7__.Z(dashboards,{keys:["key","name","description","tags"],threshold:.3}).search(searchTerm).map(result=>result.item):dashboards]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref4=>{let{actions,props}=_ref4;return{setSceneDashboardChoice:async _ref5=>{let{dashboardId}=_ref5;props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage?(actions.updateCurrentTeam({primary_dashboard:null!=dashboardId?dashboardId:null}),posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("primary dashboard changed")):(actions.setUserScenePersonalisation(props.scene,null!=dashboardId?dashboardId:0),posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("scene dashboard choice set",{scene:props.scene,dashboardId:dashboardId}))},showSceneDashboardChoiceModal:async()=>{props.scene===scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_3__.x.ProjectHomepage?posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("primary dashboard modal opened"):posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("scene dashboard choice modal opened",{scene:props.scene})}}})])},"../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F1:()=>TabsPrimitive_TabsPrimitive_TabsPrimitive,TN:()=>TabsPrimitiveContent,qf:()=>TabsPrimitiveList,Em:()=>TabsPrimitiveTrigger});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),TabsPrimitive=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.scss"),TabsPrimitive_default=__webpack_require__.n(TabsPrimitive),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(TabsPrimitive_default(),options),TabsPrimitive_default().locals;var react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+primitive@1.1.2/node_modules/@radix-ui/primitive/dist/index.mjs"),react_context_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-context/dist/index.mjs"),react_roving_focus_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-roving-focus@1.1.10_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@1_s34sf37ri6vsfee6hgvbnj4c5m/node_modules/@radix-ui/react-roving-focus/dist/index.mjs"),react_presence_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-presence@1.1.4_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@radix-ui/react-presence/dist/index.mjs"),react_primitive_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@18.2._ihqo3gllg2a7btjdwawxemejy4/node_modules/@radix-ui/react-primitive/dist/index.mjs"),react_direction_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-direction@1.1.1_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-direction/dist/index.mjs"),react_use_controllable_state_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-use-controllable-state@1.2.2_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),react_id_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-id@1.1.1_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-id/dist/index.mjs"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),TABS_NAME="Tabs",[createTabsContext,createTabsScope]=(0,react_context_dist.b)(TABS_NAME,[react_roving_focus_dist.Pc]),useRovingFocusGroupScope=(0,react_roving_focus_dist.Pc)(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value:valueProp,onValueChange,defaultValue,orientation="horizontal",dir,activationMode="automatic",...tabsProps}=props,direction=(0,react_direction_dist.gm)(dir),[value,setValue]=(0,react_use_controllable_state_dist.T)({prop:valueProp,onChange:onValueChange,defaultProp:defaultValue??"",caller:TABS_NAME});return(0,jsx_runtime.jsx)(TabsProvider,{scope:__scopeTabs,baseId:(0,react_id_dist.M)(),value,onValueChange:setValue,orientation,dir:direction,activationMode,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{dir:direction,"data-orientation":orientation,...tabsProps,ref:forwardedRef})})});Tabs.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,loop=!0,...listProps}=props,context=useTabsContext(TAB_LIST_NAME,__scopeTabs),rovingFocusGroupScope=useRovingFocusGroupScope(__scopeTabs);return(0,jsx_runtime.jsx)(react_roving_focus_dist.fC,{asChild:!0,...rovingFocusGroupScope,orientation:context.orientation,dir:context.dir,loop,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{role:"tablist","aria-orientation":context.orientation,...listProps,ref:forwardedRef})})});TabsList.displayName=TAB_LIST_NAME;var TRIGGER_NAME="TabsTrigger",TabsTrigger=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value,disabled=!1,...triggerProps}=props,context=useTabsContext(TRIGGER_NAME,__scopeTabs),rovingFocusGroupScope=useRovingFocusGroupScope(__scopeTabs),triggerId=makeTriggerId(context.baseId,value),contentId=makeContentId(context.baseId,value),isSelected=value===context.value;return(0,jsx_runtime.jsx)(react_roving_focus_dist.ck,{asChild:!0,...rovingFocusGroupScope,focusable:!disabled,active:isSelected,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.button,{type:"button",role:"tab","aria-selected":isSelected,"aria-controls":contentId,"data-state":isSelected?"active":"inactive","data-disabled":disabled?"":void 0,disabled,id:triggerId,...triggerProps,ref:forwardedRef,onMouseDown:(0,dist.M)(props.onMouseDown,event=>{disabled||0!==event.button||!1!==event.ctrlKey?event.preventDefault():context.onValueChange(value)}),onKeyDown:(0,dist.M)(props.onKeyDown,event=>{[" ","Enter"].includes(event.key)&&context.onValueChange(value)}),onFocus:(0,dist.M)(props.onFocus,()=>{let isAutomaticActivation="manual"!==context.activationMode;isSelected||disabled||!isAutomaticActivation||context.onValueChange(value)})})})});TabsTrigger.displayName=TRIGGER_NAME;var CONTENT_NAME="TabsContent",TabsContent=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value,forceMount,children,...contentProps}=props,context=useTabsContext(CONTENT_NAME,__scopeTabs),triggerId=makeTriggerId(context.baseId,value),contentId=makeContentId(context.baseId,value),isSelected=value===context.value,isMountAnimationPreventedRef=react.useRef(isSelected);return react.useEffect(()=>{let rAF=requestAnimationFrame(()=>isMountAnimationPreventedRef.current=!1);return()=>cancelAnimationFrame(rAF)},[]),(0,jsx_runtime.jsx)(react_presence_dist.z,{present:forceMount||isSelected,children:({present})=>(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{"data-state":isSelected?"active":"inactive","data-orientation":context.orientation,role:"tabpanel","aria-labelledby":triggerId,hidden:!present,id:contentId,tabIndex:0,...contentProps,ref:forwardedRef,style:{...props.style,animationDuration:isMountAnimationPreventedRef.current?"0s":void 0},children:present&&children})})});function makeTriggerId(baseId,value){return`${baseId}-trigger-${value}`}function makeContentId(baseId,value){return`${baseId}-content-${value}`}TabsContent.displayName=CONTENT_NAME;var css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts");function TabsPrimitive_TabsPrimitive_TabsPrimitive(_ref){let{...props}=_ref;return(0,jsx_runtime.jsx)(Tabs,{...props})}function TabsPrimitiveList(_ref2){let{...props}=_ref2;return(0,jsx_runtime.jsx)(TabsList,{...props})}function TabsPrimitiveContent(_ref3){let{...props}=_ref3;return(0,jsx_runtime.jsx)(TabsContent,{...props})}function TabsPrimitiveTrigger(_ref4){let{className,...props}=_ref4;return(0,jsx_runtime.jsx)(TabsTrigger,{className:(0,css_classes.cn)("tabs-trigger",className),...props})}},"../../frontend/src/scenes/new-tab/NewTabScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NewTabScene:()=>NewTabScene,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.35.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),SceneDashboardChoiceModal=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/SceneDashboardChoiceModal.tsx"),sceneDashboardChoiceModalLogic=__webpack_require__("../../frontend/src/lib/components/SceneDashboardChoice/sceneDashboardChoiceModalLogic.ts"),ScrollableShadows=__webpack_require__("../../frontend/src/lib/components/ScrollableShadows/ScrollableShadows.tsx"),useFeatureFlag=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),ButtonPrimitives=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),ListBox=__webpack_require__("../../frontend/src/lib/ui/ListBox/ListBox.tsx"),TabsPrimitive=__webpack_require__("../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),kea_loaders_lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),constants=__webpack_require__("../../frontend/src/lib/constants.tsx"),featureFlagLogic=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),tabAwareActionToUrl=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareActionToUrl.ts"),tabAwareUrlToAction=__webpack_require__("../../frontend/src/lib/logic/scenes/tabAwareUrlToAction.ts"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),getAppContext=__webpack_require__("../../frontend/src/lib/utils/getAppContext.ts"),GroupActorDisplay=__webpack_require__("../../frontend/src/scenes/persons/GroupActorDisplay.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),defaultTree=__webpack_require__("../../frontend/src/layout/panel-layout/ProjectTree/defaultTree.tsx"),ProjectTree_utils=__webpack_require__("../../frontend/src/layout/panel-layout/ProjectTree/utils.tsx"),groupsModel=__webpack_require__("../../frontend/src/models/groupsModel.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let NEW_TAB_COMMANDS_ITEMS=[{value:"all",displayName:"All"},{value:"create-new",displayName:"Create new"},{value:"apps",displayName:"Apps"},{value:"data-management",displayName:"Data management"},{value:"recents",displayName:"Recents files"},{value:"persons",displayName:"Persons"},{value:"groups",displayName:"Groups"},{value:"eventDefinitions",displayName:"Events"},{value:"propertyDefinitions",displayName:"Properties"},{value:"askAI",displayName:"Posthog AI"}];function getIconForFileSystemItem(fs){return"icon"in fs&&fs.icon?(0,jsx_runtime.jsx)(defaultTree.ee,{type:fs.type,colorOverride:fs.iconColor,children:fs.icon}):(0,defaultTree.PO)("iconType"in fs?fs.iconType:fs.type,fs.iconColor)}let sortByLastViewedAt=items=>items.map((item,originalIndex)=>({item,originalIndex})).toSorted((a,b)=>{let parseTime=value=>{if(!value)return 0;let parsed=Date.parse(value);return Number.isFinite(parsed)?parsed:0},diff=parseTime(b.item.lastViewedAt)-parseTime(a.item.lastViewedAt);return 0!==diff?diff:a.originalIndex-b.originalIndex}).map(_ref=>{let{item}=_ref;return item});function matchesRecentsSearch(entry,searchChunks){if(0===searchChunks.length)return!0;let nameLower=((0,ProjectTree_utils.uo)(entry.path).pop()||entry.path).toLowerCase();return searchChunks.every(chunk=>nameLower.includes(chunk)||"recents".includes(chunk))}let newTabSceneLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","new-tab","newTabSceneLogic"]),(0,index_esm.props)({}),(0,index_esm.connect)(()=>({values:[featureFlagLogic.featureFlagLogic,["featureFlags"],groupsModel.$,["groupTypes","aggregationLabel"]]})),(0,index_esm.key)(props=>props.tabId||"default"),(0,index_esm.actions)({setSearch:search=>({search}),selectNext:!0,selectPrevious:!0,onSubmit:!0,setSelectedCategory:category=>({category}),loadRecents:!0,debouncedPersonSearch:searchTerm=>({searchTerm}),debouncedEventDefinitionSearch:searchTerm=>({searchTerm}),debouncedPropertyDefinitionSearch:searchTerm=>({searchTerm}),debouncedGroupSearch:searchTerm=>({searchTerm}),setNewTabSceneDataInclude:include=>({include}),toggleNewTabSceneDataInclude:item=>({item}),triggerSearchForIncludedItems:!0,refreshDataAfterToggle:!0,showMoreInSection:section=>({section}),resetSectionLimits:!0,askAI:searchTerm=>({searchTerm}),logCreateNewItem:href=>({href}),loadInitialGroups:!0,setFirstNoResultsSearchPrefix:(dataset,prefix)=>({dataset,prefix})}),(0,kea_loaders_lib.loaders)(_ref2=>{let{values,actions}=_ref2;return{sceneLogViews:[[],{loadSceneLogViews:async()=>await api.ZP.fileSystemLogView.list({type:"scene"})}],newLogViews:[[],{loadNewLogViews:async()=>await api.ZP.fileSystemLogView.list({type:"create-new"})}],recents:[()=>{if("sessionStorage"in window)try{let value=window.sessionStorage.getItem(`newTab-recentItems-${(0,getAppContext.ev)()}`),recents=value?JSON.parse(value):null;if(recents)return recents}catch{}return{results:[],hasMore:!1,startTime:null,endTime:null}},{loadRecents:async(_,breakpoint)=>{values.recentsLoading&&await breakpoint(250);let searchTerm=values.search.trim(),noResultsPrefix=values.firstNoResultsSearchPrefixes.recents;if(searchTerm&&noResultsPrefix&&searchTerm.length>noResultsPrefix.length&&searchTerm.startsWith(noResultsPrefix))return{searchTerm,results:[],hasMore:!1,lastCount:0};let response=await api.ZP.fileSystem.list({search:searchTerm,limit:11,orderBy:"-last_viewed_at",notType:"folder"});breakpoint();let searchChunks=searchTerm.toLowerCase().split(" ").filter(s=>s),filteredCount=searchTerm?response.results.filter(item=>matchesRecentsSearch(item,searchChunks)).length:response.results.length,recents={searchTerm,results:response.results.slice(0,10),hasMore:response.results.length>10,lastCount:Math.min(response.results.length,10)};if(searchTerm?actions.setFirstNoResultsSearchPrefix("recents",0===filteredCount?searchTerm:null):actions.setFirstNoResultsSearchPrefix("recents",null),"sessionStorage"in window&&""===searchTerm)try{window.sessionStorage.setItem(`newTab-recentItems-${(0,getAppContext.ev)()}`,JSON.stringify(recents))}catch{}return recents}}],personSearchResults:[[],{loadPersonSearchResults:async(_ref3,breakpoint)=>{let{searchTerm}=_ref3;if(""===searchTerm.trim())return[];let response=await api.ZP.persons.list({search:searchTerm.trim(),limit:5});return breakpoint(),response.results},loadInitialPersons:async(_,breakpoint)=>{let response=await api.ZP.persons.list({limit:5});return breakpoint(),actions.setFirstNoResultsSearchPrefix("persons",null),response.results}}],eventDefinitionSearchResults:[[],{loadEventDefinitionSearchResults:async(_ref4,breakpoint)=>{var _response$results;let{searchTerm}=_ref4,trimmed=searchTerm.trim();await breakpoint(200);let response=await api.ZP.eventDefinitions.list({search:trimmed||void 0,limit:5});return breakpoint(),null!==(_response$results=response.results)&&void 0!==_response$results?_response$results:[]},loadInitialEventDefinitions:async(_,breakpoint)=>{var _response$results2;let response=await api.ZP.eventDefinitions.list({limit:5});return breakpoint(),actions.setFirstNoResultsSearchPrefix("eventDefinitions",null),null!==(_response$results2=response.results)&&void 0!==_response$results2?_response$results2:[]}}],propertyDefinitionSearchResults:[[],{loadPropertyDefinitionSearchResults:async(_ref5,breakpoint)=>{var _response$results3;let{searchTerm}=_ref5,trimmed=searchTerm.trim();await breakpoint(200);let response=await api.ZP.propertyDefinitions.list({search:trimmed||void 0,limit:5});return breakpoint(),null!==(_response$results3=response.results)&&void 0!==_response$results3?_response$results3:[]},loadInitialPropertyDefinitions:async(_,breakpoint)=>{var _response$results4;let response=await api.ZP.propertyDefinitions.list({limit:5});return breakpoint(),actions.setFirstNoResultsSearchPrefix("propertyDefinitions",null),null!==(_response$results4=response.results)&&void 0!==_response$results4?_response$results4:[]}}],groupSearchResults:[{},{loadGroupSearchResults:async(_ref6,breakpoint)=>{let{searchTerm}=_ref6,trimmed=searchTerm.trim();if(""===trimmed)return{};let groupTypesList=Array.from(values.groupTypes.values());if(0===groupTypesList.length)return{};await breakpoint(200);let responses=await Promise.all(groupTypesList.map(groupType=>api.ZP.groups.list({group_type_index:groupType.group_type_index,search:trimmed,limit:5})));return breakpoint(),Object.fromEntries(responses.map((response,index)=>[groupTypesList[index].group_type_index,response.results.slice(0,5)]))},loadInitialGroups:async(_,breakpoint)=>{let groupTypesList=Array.from(values.groupTypes.values());if(0===groupTypesList.length)return{};await breakpoint(200);let responses=await Promise.all(groupTypesList.map(groupType=>api.ZP.groups.list({group_type_index:groupType.group_type_index,search:"",limit:5})));return breakpoint(),Object.fromEntries(responses.map((response,index)=>[groupTypesList[index].group_type_index,response.results.slice(0,5)]))}}]}}),(0,index_esm.reducers)({search:["",{setSearch:(_,_ref7)=>{let{search}=_ref7;return search}}],selectedCategory:["all",{setSelectedCategory:(_,_ref8)=>{let{category}=_ref8;return category}}],newTabSceneDataInclude:[["all"],{setNewTabSceneDataInclude:(_,_ref9)=>{let{include}=_ref9;return include},toggleNewTabSceneDataInclude:(state,_ref10)=>{let{item}=_ref10;if("all"===item)return state.includes("all")?state.filter(i=>"all"!==i):["all"];if(state.includes(item)){let newState=state.filter(i=>i!==item);return 0===newState.length?["all"]:newState}return[...state.filter(i=>"all"!==i),item]}}],personSearchPending:[!1,{debouncedPersonSearch:()=>!0,loadPersonSearchResults:()=>!1,loadPersonSearchResultsSuccess:()=>!1,loadPersonSearchResultsFailure:()=>!1}],eventDefinitionSearchPending:[!1,{debouncedEventDefinitionSearch:()=>!0,loadEventDefinitionSearchResults:()=>!1,loadEventDefinitionSearchResultsSuccess:()=>!1,loadEventDefinitionSearchResultsFailure:()=>!1}],propertyDefinitionSearchPending:[!1,{debouncedPropertyDefinitionSearch:()=>!0,loadPropertyDefinitionSearchResults:()=>!1,loadPropertyDefinitionSearchResultsSuccess:()=>!1,loadPropertyDefinitionSearchResultsFailure:()=>!1}],groupSearchPending:[!1,{debouncedGroupSearch:()=>!0,loadGroupSearchResults:()=>!1,loadGroupSearchResultsSuccess:()=>!1,loadGroupSearchResultsFailure:()=>!1}],rawSelectedIndex:[0,{selectNext:state=>state+1,selectPrevious:state=>state-1,setSearch:()=>0,setSelectedCategory:()=>0}],sectionItemLimits:[{},{showMoreInSection:(state,_ref11)=>{let{section}=_ref11;return{...state,[section]:1/0}},resetSectionLimits:()=>({}),setSearch:()=>({}),toggleNewTabSceneDataInclude:()=>({})}],firstNoResultsSearchPrefixes:[{recents:null,persons:null,eventDefinitions:null,propertyDefinitions:null},{setFirstNoResultsSearchPrefix:(state,_ref12)=>{let{dataset,prefix}=_ref12;return{...state,[dataset]:prefix}},setSearch:(state,_ref13)=>{let{search}=_ref13;return""===search.trim()?{recents:null,persons:null,eventDefinitions:null,propertyDefinitions:null}:state}}]}),(0,index_esm.selectors)(_ref14=>{let{actions}=_ref14;return{sceneLogViewsByRef:[s=>[s.sceneLogViews],sceneLogViews=>sceneLogViews.reduce((acc,_ref15)=>{let{ref,viewed_at}=_ref15,current=acc[ref];return(!current||Date.parse(viewed_at)>Date.parse(current))&&(acc[ref]=viewed_at),acc},{})],newLogViewsByRef:[s=>[s.newLogViews],newLogViews=>newLogViews.reduce((acc,_ref16)=>{let{ref,viewed_at}=_ref16,current=acc[ref];return(!current||Date.parse(viewed_at)>Date.parse(current))&&(acc[ref]=viewed_at),acc},{})],newTabSceneDataIncludePersons:[s=>[s.newTabSceneDataInclude],include=>include.includes("persons")],newTabSceneDataIncludeEventDefinitions:[s=>[s.newTabSceneDataInclude],include=>include.includes("eventDefinitions")],newTabSceneDataIncludePropertyDefinitions:[s=>[s.newTabSceneDataInclude],include=>include.includes("propertyDefinitions")],categories:[s=>[s.featureFlags],featureFlags=>{let categories=[{key:"all",label:"All"},{key:"recents",label:"Recents"},{key:"create-new",label:"Create new"},{key:"apps",label:"Apps"},{key:"data-management",label:"Data management"}];return featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]&&(categories.push({key:"persons",label:"Persons"}),categories.push({key:"groups",label:"Groups"}),categories.push({key:"eventDefinitions",label:"Events"}),categories.push({key:"propertyDefinitions",label:"Properties"}),categories.push({key:"askAI",label:"Ask Posthog AI"})),categories}],isSearching:[s=>[s.recentsLoading,s.personSearchResultsLoading,s.personSearchPending,s.eventDefinitionSearchResultsLoading,s.eventDefinitionSearchPending,s.propertyDefinitionSearchResultsLoading,s.propertyDefinitionSearchPending,s.groupSearchResultsLoading,s.groupSearchPending,s.search],(recentsLoading,personSearchResultsLoading,personSearchPending,eventDefinitionSearchResultsLoading,eventDefinitionSearchPending,propertyDefinitionSearchResultsLoading,propertyDefinitionSearchPending,groupSearchResultsLoading,groupSearchPending,search)=>(recentsLoading||personSearchResultsLoading||personSearchPending||eventDefinitionSearchResultsLoading||eventDefinitionSearchPending||propertyDefinitionSearchResultsLoading||propertyDefinitionSearchPending||groupSearchResultsLoading||groupSearchPending)&&""!==search.trim()],projectTreeSearchItems:[s=>[s.recents],recents=>recents.results.map(item=>{var _item$last_viewed_at;let name=(0,ProjectTree_utils.uo)(item.path).pop();return{id:item.path,name:name||item.path,category:"recents",href:item.href||"#",lastViewedAt:null!==(_item$last_viewed_at=item.last_viewed_at)&&void 0!==_item$last_viewed_at?_item$last_viewed_at:null,icon:getIconForFileSystemItem({type:item.type,iconType:item.type,path:item.path}),record:item}})],personSearchItems:[s=>[s.personSearchResults],personSearchResults=>personSearchResults.map(person=>{let personId=person.distinct_ids?.[0]||person.uuid||"unknown",displayName=person.properties?.email||personId;return{id:`person-${person.uuid}`,name:`${displayName}`,category:"persons",href:urls.j.personByUUID(person.uuid||""),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPerson,{}),record:{type:"person",path:`Person: ${displayName}`,href:urls.j.personByUUID(person.uuid||"")}}})],eventDefinitionSearchItems:[s=>[s.eventDefinitionSearchResults],eventDefinitionSearchResults=>eventDefinitionSearchResults.map(eventDef=>({id:`event-definition-${eventDef.id}`,name:eventDef.name,category:"eventDefinitions",href:urls.j.eventDefinition(eventDef.id),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconApps,{}),record:{type:"event-definition",path:`Event: ${eventDef.name}`,href:urls.j.eventDefinition(eventDef.id)}}))],propertyDefinitionSearchItems:[s=>[s.propertyDefinitionSearchResults],propertyDefinitionSearchResults=>propertyDefinitionSearchResults.map(propDef=>({id:`property-definition-${propDef.id}`,name:propDef.name,category:"propertyDefinitions",href:urls.j.propertyDefinition(propDef.id),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconApps,{}),record:{type:"property-definition",path:`Property: ${propDef.name}`,href:urls.j.propertyDefinition(propDef.id)}}))],groupSearchItems:[s=>[s.groupSearchResults,s.aggregationLabel],(groupSearchResults,aggregationLabel)=>{let items=[];for(let[groupTypeIndexString,groups]of Object.entries(groupSearchResults)){let groupTypeIndex=parseInt(groupTypeIndexString,10),noun=aggregationLabel(groupTypeIndex).singular;groups.forEach(group=>{let display=(0,GroupActorDisplay.O)(group.group_key,group.group_properties||{}),href=urls.j.group(groupTypeIndex,group.group_key);items.push({id:`group-${groupTypeIndex}-${group.group_key}`,name:`${noun}: ${display}`,displayName:display,category:"groups",href,icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPeople,{}),record:{type:"group",path:`${noun}: ${display}`,href,groupTypeIndex,groupKey:group.group_key,groupNoun:noun,groupDisplayName:display}})})}return items}],aiSearchItems:[s=>[s.search],search=>{let searchTerm=search.trim(),items=[],askDirectQuestionToAiItem={id:"ask-ai",name:searchTerm?`Ask: ${searchTerm}`:"Ask Posthog AI anything...",category:"askAI",href:urls.j.max(void 0,searchTerm),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconSparkles,{}),record:{type:"ai",path:searchTerm?`Ask Posthog AI: ${searchTerm}`:"Ask Posthog AI",href:"#",searchTerm:searchTerm||"",onClick:()=>actions.askAI(searchTerm)}},openAiInTabItem={id:"open-ai",name:"Open",category:"askAI",href:urls.j.max(void 0,void 0),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconArrowRight,{}),record:{type:"ai",path:"Open",href:"#",searchTerm:""}};return searchTerm&&items.push(askDirectQuestionToAiItem),items.push(openAiInTabItem),items}],getSectionItemLimit:[s=>[s.sectionItemLimits],sectionItemLimits=>section=>sectionItemLimits[section]||5],itemsGrid:[s=>[s.featureFlags,s.projectTreeSearchItems,s.aiSearchItems,s.sceneLogViewsByRef,s.newLogViewsByRef],(featureFlags,projectTreeSearchItems,aiSearchItems,sceneLogViewsByRef,newLogViewsByRef)=>{let registerSceneKey=(map,key,sceneKey)=>{!(!key||!sceneKey||map.has(key))&&map.set(key,sceneKey)},sceneKeyByType=new Map,getSceneKeyForFs=fs=>{if(fs.sceneKey)return fs.sceneKey;if(fs.type){let direct=sceneKeyByType.get(fs.type);if(direct)return direct;let baseType=fs.type.split("/")?.[0];if(baseType){let base=sceneKeyByType.get(baseType);if(base)return base}}if("iconType"in fs&&fs.iconType){let fromIcon=sceneKeyByType.get(fs.iconType);if(fromIcon)return fromIcon}return null},getLastViewedAt=sceneKey=>{var _sceneLogViewsByRef$s;return sceneKey&&null!==(_sceneLogViewsByRef$s=sceneLogViewsByRef[sceneKey])&&void 0!==_sceneLogViewsByRef$s?_sceneLogViewsByRef$s:null},getLastViewedAtForHref=href=>{var _newLogViewsByRef$hre;return href&&null!==(_newLogViewsByRef$hre=newLogViewsByRef[href])&&void 0!==_newLogViewsByRef$hre?_newLogViewsByRef$hre:null},defaultProducts=(0,defaultTree.UC)(),defaultData=(0,defaultTree.T7)();defaultProducts.forEach(fs=>{fs.sceneKey&&(registerSceneKey(sceneKeyByType,fs.type,fs.sceneKey),fs.type?.includes("/")&&registerSceneKey(sceneKeyByType,fs.type.split("/")[0],fs.sceneKey),"iconType"in fs&&registerSceneKey(sceneKeyByType,fs.iconType,fs.sceneKey))}),defaultData.forEach(fs=>{fs.sceneKey&&(registerSceneKey(sceneKeyByType,fs.type,fs.sceneKey),fs.type?.includes("/")&&registerSceneKey(sceneKeyByType,fs.type.split("/")[0],fs.sceneKey),"iconType"in fs&&registerSceneKey(sceneKeyByType,fs.iconType,fs.sceneKey))});let newInsightItems=(0,defaultTree.eq)().filter(_ref17=>{let{path}=_ref17;return path.startsWith("Insight/")}).map((fs,index)=>({id:`new-insight-${index}`,name:"New "+fs.path.substring(8),category:"create-new",href:fs.href,flag:fs.flag,icon:getIconForFileSystemItem(fs),record:fs,lastViewedAt:getLastViewedAtForHref(fs.href)})).filter(_ref18=>{let{flag}=_ref18;return!flag||featureFlags[flag]}),newDataItems=(0,defaultTree.eq)().filter(_ref19=>{let{path}=_ref19;return path.startsWith("Data/")}).map((fs,index)=>({id:`new-data-${index}`,name:"New "+(0,utils.fm)(fs.path.substring(5).toLowerCase()),category:"create-new",href:fs.href,flag:fs.flag,icon:getIconForFileSystemItem(fs),record:fs,lastViewedAt:getLastViewedAtForHref(fs.href)})).filter(_ref20=>{let{flag}=_ref20;return!flag||featureFlags[flag]}),newOtherItems=(0,defaultTree.eq)().filter(_ref21=>{let{path}=_ref21;return!path.startsWith("Insight/")&&!path.startsWith("Data/")}).map((fs,index)=>({id:`new-other-${index}`,name:"New "+fs.path,category:"create-new",href:fs.href,flag:fs.flag,icon:getIconForFileSystemItem(fs),record:fs,lastViewedAt:getLastViewedAtForHref(fs.href)})).filter(_ref22=>{let{flag}=_ref22;return!flag||featureFlags[flag]}),sortedProducts=sortByLastViewedAt([...defaultProducts,...(0,defaultTree.We)()].map((fs,index)=>({id:`product-${index}`,name:fs.path,category:"apps",href:fs.href,flag:fs.flag,icon:getIconForFileSystemItem(fs),record:fs,lastViewedAt:getLastViewedAt(getSceneKeyForFs(fs))})).filter(_ref23=>{let{flag}=_ref23;return!flag||featureFlags[flag]}).toSorted((a,b)=>a.name.localeCompare(b.name))),sortedData=sortByLastViewedAt(defaultData.map((fs,index)=>({id:`data-${index}`,name:fs.path,category:"data-management",href:fs.href,flag:fs.flag,icon:getIconForFileSystemItem(fs),record:fs})).filter(_ref24=>{let{flag}=_ref24;return!flag||featureFlags[flag]})),sortedNewInsightItems=sortByLastViewedAt(newInsightItems),sortedNewDataItems=sortByLastViewedAt(newDataItems),sortedNewOtherItems=sortByLastViewedAt(newOtherItems);return sortByLastViewedAt([...featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]?aiSearchItems:[],...projectTreeSearchItems,{id:"new-sql-query",name:"New SQL query",category:"create-new",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconDatabase,{}),href:"/sql",record:{type:"query",path:"New SQL query"},lastViewedAt:getLastViewedAtForHref("/sql")},...sortedNewInsightItems,...sortedNewOtherItems,...sortedProducts,...sortedData,...sortedNewDataItems,{id:"new-hog-program",name:"New Hog program",category:"create-new",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconHogQL,{}),href:"/debug/hog",record:{type:"hog",path:"New Hog program"},lastViewedAt:getLastViewedAtForHref("/debug/hog")}])}],filteredItemsGrid:[s=>[s.itemsGrid,s.search,s.selectedCategory],(itemsGrid,search,selectedCategory)=>{let filtered=itemsGrid;if("all"!==selectedCategory&&(filtered=filtered.filter(item=>item.category===selectedCategory)),!String(search).trim())return filtered;let lowerSearchChunks=search.toLowerCase().split(" ").map(s=>s.trim()).filter(s=>s);return filtered.filter(item=>0===lowerSearchChunks.filter(lowerSearch=>!`${item.category} ${item.name}`.toLowerCase().includes(lowerSearch)).length)}],groupedFilteredItems:[s=>[s.filteredItemsGrid],filteredItemsGrid=>filteredItemsGrid.reduce((acc,item)=>(acc[item.category]||(acc[item.category]=[]),acc[item.category].push(item),acc),{})],newTabSceneDataGroupedItems:[s=>[s.itemsGrid,s.search,s.newTabSceneDataInclude,s.personSearchItems,s.groupSearchItems,s.eventDefinitionSearchItems,s.propertyDefinitionSearchItems,s.aiSearchItems,s.featureFlags,s.getSectionItemLimit],(itemsGrid,search,newTabSceneDataInclude,personSearchItems,groupSearchItems,eventDefinitionSearchItems,propertyDefinitionSearchItems,aiSearchItems,featureFlags,getSectionItemLimit)=>{if(!featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE])return{};let searchLower=search.toLowerCase().trim(),filterBySearch=items=>{if(!searchLower)return items;let searchChunks=searchLower.split(" ").filter(s=>s);return items.filter(item=>searchChunks.every(chunk=>item.name.toLowerCase().includes(chunk)||item.category.toLowerCase().includes(chunk)))},showAll=newTabSceneDataInclude.includes("all"),grouped={};if(showAll||newTabSceneDataInclude.includes("persons")){let limit=getSectionItemLimit("persons");grouped.persons=personSearchItems.slice(0,limit)}if(showAll||newTabSceneDataInclude.includes("groups")){let limit=getSectionItemLimit("groups");grouped.groups=groupSearchItems.slice(0,limit)}if(showAll||newTabSceneDataInclude.includes("eventDefinitions")){let limit=getSectionItemLimit("eventDefinitions");grouped.eventDefinitions=eventDefinitionSearchItems.slice(0,limit)}if(showAll||newTabSceneDataInclude.includes("propertyDefinitions")){let limit=getSectionItemLimit("propertyDefinitions");grouped.propertyDefinitions=propertyDefinitionSearchItems.slice(0,limit)}if(showAll||newTabSceneDataInclude.includes("create-new")){let limit=getSectionItemLimit("create-new");grouped["create-new"]=sortByLastViewedAt(filterBySearch(itemsGrid.filter(item=>"create-new"===item.category))).slice(0,limit)}if(showAll||newTabSceneDataInclude.includes("apps")){let limit=getSectionItemLimit("apps");grouped.apps=sortByLastViewedAt(filterBySearch(itemsGrid.filter(item=>"apps"===item.category)).slice(0,limit))}if(showAll||newTabSceneDataInclude.includes("data-management")){let limit=getSectionItemLimit("data-management");grouped["data-management"]=sortByLastViewedAt(filterBySearch(itemsGrid.filter(item=>"data-management"===item.category))).slice(0,limit)}if(showAll||newTabSceneDataInclude.includes("recents")){let limit=getSectionItemLimit("recents");grouped.recents=filterBySearch(itemsGrid.filter(item=>"recents"===item.category)).slice(0,limit)}if(showAll||newTabSceneDataInclude.includes("askAI")){let limit=getSectionItemLimit("askAI");grouped.askAI=aiSearchItems.slice(0,limit)}return grouped}],newTabSceneDataGroupedItemsFullData:[s=>[s.itemsGrid,s.search,s.newTabSceneDataInclude,s.personSearchItems,s.groupSearchItems,s.eventDefinitionSearchItems,s.propertyDefinitionSearchItems,s.aiSearchItems,s.featureFlags],(itemsGrid,search,newTabSceneDataInclude,personSearchItems,groupSearchItems,eventDefinitionSearchItems,propertyDefinitionSearchItems,aiSearchItems,featureFlags)=>{if(!featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE])return{};let searchLower=search.toLowerCase().trim(),filterBySearch=items=>{if(!searchLower)return items;let searchChunks=searchLower.split(" ").filter(s=>s);return items.filter(item=>searchChunks.every(chunk=>item.name.toLowerCase().includes(chunk)||item.category.toLowerCase().includes(chunk)))},showAll=newTabSceneDataInclude.includes("all"),fullCounts={};return(showAll||newTabSceneDataInclude.includes("persons"))&&(fullCounts.persons=personSearchItems.length),(showAll||newTabSceneDataInclude.includes("groups"))&&(fullCounts.groups=groupSearchItems.length),(showAll||newTabSceneDataInclude.includes("eventDefinitions"))&&(fullCounts.eventDefinitions=eventDefinitionSearchItems.length),(showAll||newTabSceneDataInclude.includes("propertyDefinitions"))&&(fullCounts.propertyDefinitions=propertyDefinitionSearchItems.length),(showAll||newTabSceneDataInclude.includes("create-new"))&&(fullCounts["create-new"]=filterBySearch(itemsGrid.filter(item=>"create-new"===item.category)).length),(showAll||newTabSceneDataInclude.includes("apps"))&&(fullCounts.apps=filterBySearch(itemsGrid.filter(item=>"apps"===item.category)).length),(showAll||newTabSceneDataInclude.includes("data-management"))&&(fullCounts["data-management"]=filterBySearch(itemsGrid.filter(item=>"data-management"===item.category)).length),(showAll||newTabSceneDataInclude.includes("recents"))&&(fullCounts.recents=filterBySearch(itemsGrid.filter(item=>"recents"===item.category)).length),(showAll||newTabSceneDataInclude.includes("askAI"))&&(fullCounts.askAI=aiSearchItems.length),fullCounts}],allCategories:[s=>[s.featureFlags,s.groupedFilteredItems,s.newTabSceneDataGroupedItems,s.newTabSceneDataInclude],(featureFlags,groupedFilteredItems,newTabSceneDataGroupedItems,newTabSceneDataInclude)=>{if(!featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE])return Object.entries(groupedFilteredItems);let orderedSections=[],showAll=newTabSceneDataInclude.includes("all");return["recents","create-new","apps","data-management"].forEach(section=>{(showAll||newTabSceneDataInclude.includes(section))&&orderedSections.push(section)}),(showAll||newTabSceneDataInclude.includes("persons"))&&orderedSections.push("persons"),(showAll||newTabSceneDataInclude.includes("groups"))&&orderedSections.push("groups"),(showAll||newTabSceneDataInclude.includes("eventDefinitions"))&&orderedSections.push("eventDefinitions"),(showAll||newTabSceneDataInclude.includes("propertyDefinitions"))&&orderedSections.push("propertyDefinitions"),(showAll||newTabSceneDataInclude.includes("askAI"))&&orderedSections.push("askAI"),orderedSections.map(section=>[section,newTabSceneDataGroupedItems[section]||[]]).filter(_ref25=>{let[,items]=_ref25;return!showAll||items.length>0})}],firstCategoryWithResults:[s=>[s.allCategories],allCategories=>{for(let[category,items]of allCategories)if(items.length>0)return category;return null}],selectedIndex:[s=>[s.rawSelectedIndex,s.filteredItemsGrid],(rawSelectedIndex,filteredItemsGrid)=>0===filteredItemsGrid.length?null:(rawSelectedIndex%filteredItemsGrid.length+filteredItemsGrid.length)%filteredItemsGrid.length],selectedItem:[s=>[s.selectedIndex,s.filteredItemsGrid],(selectedIndex,filteredItemsGrid)=>null!==selectedIndex&&selectedIndex<filteredItemsGrid.length?filteredItemsGrid[selectedIndex]:null]}}),(0,index_esm.listeners)(_ref26=>{let{actions,values}=_ref26;return{logCreateNewItem:async _ref27=>{let{href}=_ref27;if(href){try{await api.ZP.fileSystemLogView.create({type:"create-new",ref:href})}catch(error){console.error("Failed to log create new item usage:",error)}actions.loadNewLogViews()}},triggerSearchForIncludedItems:()=>{if(values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]){let searchTerm=values.search.trim();(values.newTabSceneDataInclude.includes("all")?["persons","groups","eventDefinitions","propertyDefinitions","askAI"]:values.newTabSceneDataInclude).forEach(item=>{""!==searchTerm?"persons"===item?actions.debouncedPersonSearch(searchTerm):"groups"===item?actions.debouncedGroupSearch(searchTerm):"eventDefinitions"===item?actions.debouncedEventDefinitionSearch(searchTerm):"propertyDefinitions"===item&&actions.debouncedPropertyDefinitionSearch(searchTerm):"persons"===item?actions.loadInitialPersons({}):"groups"===item?actions.loadInitialGroups():"eventDefinitions"===item?actions.loadInitialEventDefinitions({}):"propertyDefinitions"===item&&actions.loadInitialPropertyDefinitions({})})}},onSubmit:()=>{let selected=values.selectedItem;selected&&("askAI"===selected.category&&selected.record?.searchTerm?actions.askAI(selected.record.searchTerm):selected.href&&("create-new"===selected.category&&actions.logCreateNewItem(selected.href),lib.router.actions.push(selected.href)))},setSearch:()=>{let newTabSceneData=values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE];if(actions.loadRecents(),newTabSceneData){let searchTerm=values.search.trim();(values.newTabSceneDataInclude.includes("all")?["persons","groups","eventDefinitions","propertyDefinitions","askAI"]:values.newTabSceneDataInclude).forEach(item=>{""!==searchTerm?"persons"===item?actions.debouncedPersonSearch(searchTerm):"groups"===item?actions.debouncedGroupSearch(searchTerm):"eventDefinitions"===item?actions.debouncedEventDefinitionSearch(searchTerm):"propertyDefinitions"===item&&actions.debouncedPropertyDefinitionSearch(searchTerm):"persons"===item?actions.loadInitialPersons({}):"groups"===item?actions.loadInitialGroups():"eventDefinitions"===item?actions.loadInitialEventDefinitions({}):"propertyDefinitions"===item&&actions.loadInitialPropertyDefinitions({})})}},toggleNewTabSceneDataInclude:_ref28=>{let{item}=_ref28;values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]&&(values.newTabSceneDataInclude.includes(item)?(actions.setSelectedCategory("all"),"persons"===item?actions.loadPersonSearchResultsSuccess([]):"eventDefinitions"===item?actions.loadEventDefinitionSearchResultsSuccess([]):"propertyDefinitions"===item?actions.loadPropertyDefinitionSearchResultsSuccess([]):"groups"===item&&actions.loadGroupSearchResultsSuccess({})):actions.setSelectedCategory(item))},setNewTabSceneDataInclude:()=>{actions.triggerSearchForIncludedItems()},refreshDataAfterToggle:()=>{actions.triggerSearchForIncludedItems()},debouncedPersonSearch:async(_ref29,breakpoint)=>{let{searchTerm}=_ref29;await breakpoint(300);try{let trimmed=searchTerm.trim(),noResultsPrefix=values.firstNoResultsSearchPrefixes.persons;if(trimmed&&noResultsPrefix&&trimmed.length>noResultsPrefix.length&&trimmed.startsWith(noResultsPrefix)){actions.loadPersonSearchResultsSuccess([]);return}let response=await api.ZP.persons.list({search:trimmed,limit:5});breakpoint(),actions.loadPersonSearchResultsSuccess(response.results),trimmed&&actions.setFirstNoResultsSearchPrefix("persons",0===response.results.length?trimmed:null)}catch(error){console.error("Person search failed:",error),actions.loadPersonSearchResultsFailure(error)}},debouncedEventDefinitionSearch:async(_ref30,breakpoint)=>{let{searchTerm}=_ref30;await breakpoint(300);try{var _response$results5,_response$results6;let trimmed=searchTerm.trim(),noResultsPrefix=values.firstNoResultsSearchPrefixes.eventDefinitions;if(trimmed&&noResultsPrefix&&trimmed.length>noResultsPrefix.length&&trimmed.startsWith(noResultsPrefix)){actions.loadEventDefinitionSearchResultsSuccess([]);return}let response=await api.ZP.eventDefinitions.list({search:trimmed,limit:5});actions.loadEventDefinitionSearchResultsSuccess(null!==(_response$results5=response.results)&&void 0!==_response$results5?_response$results5:[]),trimmed&&actions.setFirstNoResultsSearchPrefix("eventDefinitions",0===(null!==(_response$results6=response.results)&&void 0!==_response$results6?_response$results6:[]).length?trimmed:null)}catch(error){console.error("Event definition search failed:",error),actions.loadEventDefinitionSearchResultsFailure(error)}},debouncedPropertyDefinitionSearch:async(_ref31,breakpoint)=>{let{searchTerm}=_ref31;await breakpoint(300);try{var _response$results7,_response$results8;let trimmed=searchTerm.trim(),noResultsPrefix=values.firstNoResultsSearchPrefixes.propertyDefinitions;if(trimmed&&noResultsPrefix&&trimmed.length>noResultsPrefix.length&&trimmed.startsWith(noResultsPrefix)){actions.loadPropertyDefinitionSearchResultsSuccess([]);return}let response=await api.ZP.propertyDefinitions.list({search:trimmed,limit:5});actions.loadPropertyDefinitionSearchResultsSuccess(null!==(_response$results7=response.results)&&void 0!==_response$results7?_response$results7:[]),trimmed&&actions.setFirstNoResultsSearchPrefix("propertyDefinitions",0===(null!==(_response$results8=response.results)&&void 0!==_response$results8?_response$results8:[]).length?trimmed:null)}catch(error){console.error("Property definition search failed:",error),actions.loadPropertyDefinitionSearchResultsFailure(error)}},debouncedGroupSearch:async(_ref32,breakpoint)=>{let{searchTerm}=_ref32;await breakpoint(300),actions.loadGroupSearchResults({searchTerm})}}}),(0,tabAwareActionToUrl.N)(_ref33=>{let{values}=_ref33;return{setSearch:()=>[lib.router.values.location.pathname,{search:values.search||void 0,category:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]||"all"===values.selectedCategory?void 0:values.selectedCategory,include:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]&&values.newTabSceneDataInclude.length>0?values.newTabSceneDataInclude.join(","):void 0}],setSelectedCategory:()=>[lib.router.values.location.pathname,{search:values.search||void 0,category:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]||"all"===values.selectedCategory?void 0:values.selectedCategory,include:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]&&values.newTabSceneDataInclude.length>0?values.newTabSceneDataInclude.join(","):void 0}],setNewTabSceneDataInclude:()=>[lib.router.values.location.pathname,{search:values.search||void 0,category:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]||"all"===values.selectedCategory?void 0:values.selectedCategory,include:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]&&values.newTabSceneDataInclude.length>0?values.newTabSceneDataInclude.join(","):void 0}],toggleNewTabSceneDataInclude:()=>[lib.router.values.location.pathname,{search:values.search||void 0,category:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]||"all"===values.selectedCategory?void 0:values.selectedCategory,include:values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]&&values.newTabSceneDataInclude.length>0?values.newTabSceneDataInclude.join(","):void 0}]}}),(0,tabAwareUrlToAction.O)(_ref34=>{let{actions,values}=_ref34;return{[urls.j.newTab()]:(_,searchParams)=>{let newTabSceneData=values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE];if(searchParams.search&&searchParams.search!==values.search&&(actions.setSearch(String(searchParams.search)),newTabSceneData&&values.newTabSceneDataInclude.length>0)){let searchTerm=String(searchParams.search).trim();""!==searchTerm&&(values.newTabSceneDataInclude.includes("all")?["persons","groups","eventDefinitions","propertyDefinitions"]:values.newTabSceneDataInclude).forEach(item=>{"persons"===item?actions.debouncedPersonSearch(searchTerm):"groups"===item?actions.debouncedGroupSearch(searchTerm):"eventDefinitions"===item?actions.debouncedEventDefinitionSearch(searchTerm):"propertyDefinitions"===item&&actions.debouncedPropertyDefinitionSearch(searchTerm)})}!newTabSceneData&&searchParams.category&&searchParams.category!==values.selectedCategory&&actions.setSelectedCategory(searchParams.category);let includeFromUrl=searchParams.include?searchParams.include.split(",").filter(item=>["all","create-new","apps","data-management","recents","persons","groups","eventDefinitions","propertyDefinitions","askAI"].includes(item)):[],currentIncludeString=values.newTabSceneDataInclude.slice().sort().join(","),urlIncludeString=includeFromUrl.slice().sort().join(",");if(newTabSceneData&&currentIncludeString!==urlIncludeString){actions.setNewTabSceneDataInclude(includeFromUrl);let searchTerm=searchParams.search?String(searchParams.search).trim():"";(includeFromUrl.includes("all")?["persons","groups","eventDefinitions","propertyDefinitions","askAI"]:includeFromUrl).forEach(item=>{""!==searchTerm?"persons"===item?actions.debouncedPersonSearch(searchTerm):"groups"===item?actions.debouncedGroupSearch(searchTerm):"eventDefinitions"===item?actions.debouncedEventDefinitionSearch(searchTerm):"propertyDefinitions"===item&&actions.debouncedPropertyDefinitionSearch(searchTerm):"persons"===item?actions.loadInitialPersons({}):"groups"===item?actions.loadInitialGroups():"eventDefinitions"===item?actions.loadInitialEventDefinitions({}):"propertyDefinitions"===item&&actions.loadInitialPropertyDefinitions({})})}!searchParams.search&&values.search&&actions.setSearch(""),newTabSceneData||searchParams.category||"all"===values.selectedCategory||actions.setSelectedCategory("all"),(searchParams.include||1===values.newTabSceneDataInclude.length)&&(searchParams.include||values.newTabSceneDataInclude.includes("all"))||actions.setNewTabSceneDataInclude(["all"])}}}),(0,index_esm.afterMount)(_ref35=>{let{actions,values}=_ref35;actions.loadSceneLogViews(),actions.loadNewLogViews(),actions.loadRecents(),values.featureFlags[constants.y8.DATA_IN_NEW_TAB_SCENE]&&values.newTabSceneDataInclude.includes("all")&&(actions.loadInitialPersons({}),actions.loadInitialGroups(),actions.loadInitialEventDefinitions({}),actions.loadInitialPropertyDefinitions({}))})]);var sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),navigationLogic=__webpack_require__("../../frontend/src/layout/navigation/navigationLogic.ts"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts"),Link=__webpack_require__("../../frontend/src/lib/lemon-ui/Link/index.ts"),ContextMenu=__webpack_require__("../../frontend/src/lib/ui/ContextMenu/ContextMenu.tsx"),DropdownMenu=__webpack_require__("../../frontend/src/lib/ui/DropdownMenu/DropdownMenu.tsx"),Label=__webpack_require__("../../frontend/src/lib/ui/Label/Label.tsx"),WrappingLoadingSkeleton=__webpack_require__("../../frontend/src/lib/ui/WrappingLoadingSkeleton/WrappingLoadingSkeleton.tsx"),SearchHighlight=__webpack_require__("../../frontend/src/layout/navigation-3000/components/SearchHighlight.tsx"),sidePanelStateLogic=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/sidePanelStateLogic.tsx"),MenuItems=__webpack_require__("../../frontend/src/layout/panel-layout/ProjectTree/menus/MenuItems.tsx"),types=__webpack_require__("../../frontend/src/types.ts");function NoResultsFound(_ref){let{handleAskAi}=_ref,{setSearch}=(0,index_esm.useActions)(newTabSceneLogic);return(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-4 px-2 py-2 bg-glass-bg-3000 rounded-lg",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,jsx_runtime.jsxs)("p",{className:"text-tertiary mb-2",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{})," No results found"]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1",children:[(0,jsx_runtime.jsxs)(ListBox.w.Item,{asChild:!0,className:"list-none",children:[(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",onClick:()=>setSearch(""),variant:"panel",children:"Clear search"})," "]}),"or"," ",(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",onClick:()=>handleAskAi(),variant:"panel",children:"Ask Posthog AI"})})]})]})})}let getCategoryDisplayName=category=>({"create-new":"Create new",apps:"Apps","data-management":"Data management",recents:"Recents",persons:"Persons",groups:"Groups",eventDefinitions:"Events",propertyDefinitions:"Properties",askAI:"Posthog AI"})[category]||category,formatRelativeTimeShort=date=>{if(!date)return"";let parsedDate=(0,dayjs.Bv)(date);if(!parsedDate.isValid())return"";let now=(0,dayjs.Bv)();if(60>Math.max(0,now.diff(parsedDate,"second")))return"just now";let minutes=now.diff(parsedDate,"minute");if(minutes<60)return`${minutes} min ago`;let hours=now.diff(parsedDate,"hour");if(hours<24)return`${hours} hr${1===hours?"":"s"} ago`;let days=now.diff(parsedDate,"day");if(days<30)return`${days} day${1===days?"":"s"} ago`;let months=now.diff(parsedDate,"month")||1;if(months<12)return`${months} mo${1===months?"":"s"} ago`;let years=now.diff(parsedDate,"year")||1;return`${years} yr${1===years?"":"s"} ago`};function convertToTreeDataItem(item){return{...item,record:{...item.record,href:item.href,path:item.name}}}function Category(_ref){let{tabId,items,category,columnIndex,isFirstCategoryWithResults}=_ref,groupRef=(0,react.useRef)(null),isFirstCategory=0===columnIndex,newTabSceneData=(0,useFeatureFlag.y)("DATA_IN_NEW_TAB_SCENE"),{filteredItemsGrid,search,isSearching,newTabSceneDataGroupedItemsFullData,getSectionItemLimit,newTabSceneDataInclude}=(0,index_esm.useValues)(newTabSceneLogic({tabId})),{showMoreInSection,logCreateNewItem}=(0,index_esm.useActions)(newTabSceneLogic({tabId})),{groupTypes}=(0,index_esm.useValues)(groupsModel.$);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)("mb-8",{"mb-0 @xl/main-content:flex @xl/main-content:flex-row @xl/main-content:gap-x-4":newTabSceneData}),children:[(0,jsx_runtime.jsx)("div",{className:(0,css_classes.cn)("mb-4",{"mb-2 @xl/main-content:min-w-[200px]":newTabSceneData}),children:(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)("flex items-baseline gap-2",{"gap-0":newTabSceneData}),children:[newTabSceneData?(0,jsx_runtime.jsx)(Label._,{intent:"menu",className:"px-2",children:getCategoryDisplayName(category)}):(0,jsx_runtime.jsx)("h3",{className:"mb-0 text-lg font-medium text-secondary",children:getCategoryDisplayName(category)}),"recents"===category&&isSearching&&(0,jsx_runtime.jsx)(src.$j,{size:"small"}),newTabSceneData&&!["persons","groups","eventDefinitions","propertyDefinitions"].includes(category)&&0===items.length&&!newTabSceneDataInclude.includes("all")&&(0,jsx_runtime.jsx)(src.oe,{className:"text-xs text-tertiary",size:"small",children:"No results found"})]})}),(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)("flex flex-col gap-2",{"@xl/main-content:grow min-w-0 empty:hidden gap-1":newTabSceneData}),children:[0===items.length?"recents"===category&&isSearching?(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-2 text-tertiary text-balance",children:(0,jsx_runtime.jsx)(WrappingLoadingSkeleton.x,{children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",children:"Loading items..."})})}):null:(0,jsx_runtime.jsxs)(ListBox.w.Group,{ref:groupRef,groupId:`category-${category}`,children:[items.map((item,index)=>{var _ref2,_item$lastViewedAt,_item$icon;let isCreateNew="create-new"===item.category,focusFirst=newTabSceneData&&isFirstCategoryWithResults&&0===index||filteredItemsGrid.length>0&&isFirstCategory&&0===index,lastViewedAt=null!==(_ref2=null!==(_item$lastViewedAt=item.lastViewedAt)&&void 0!==_item$lastViewedAt?_item$lastViewedAt:item.record?.last_viewed_at)&&void 0!==_ref2?_ref2:null,record=item.record,groupNoun="groups"===item.category?record?.groupNoun||item.name.split(":")[0]:null,groupDisplayName="groups"===item.category?"string"==typeof item.displayName?item.displayName:item.name.split(":").slice(1).join(":").trim():null,highlightText=text=>search?(0,jsx_runtime.jsx)(SearchHighlight.r,{string:text,substring:search}):text;return(0,jsx_runtime.jsxs)(ButtonPrimitives.HL,{className:"group w-full border-0",children:[(0,jsx_runtime.jsxs)(ContextMenu.xV,{children:[(0,jsx_runtime.jsx)(ContextMenu.W4,{asChild:!0,children:(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,focusFirst:focusFirst,row:index,column:columnIndex,focusKey:item.id,index:index,children:(0,jsx_runtime.jsxs)(Link.r,{to:item.href||"#",className:"w-full",buttonProps:{size:"sm",hasSideActionRight:!0},onClick:e=>{e.preventDefault(),item.href&&(isCreateNew&&logCreateNewItem(item.href),lib.router.actions.push(item.href))},children:[(0,jsx_runtime.jsx)("span",{className:"text-sm",children:null!==(_item$icon=item.icon)&&void 0!==_item$icon?_item$icon:item.name[0]}),(0,jsx_runtime.jsxs)("span",{className:"flex min-w-0 items-center gap-2",children:[groupNoun?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"text-sm truncate text-primary",children:highlightText(groupDisplayName&&groupDisplayName.length>0?groupDisplayName:item.name)}),(0,jsx_runtime.jsx)(src.oe,{size:"small",type:"muted",className:"shrink-0",children:highlightText((0,utils.fm)(groupNoun.trim()))})]}):(0,jsx_runtime.jsx)("span",{className:"text-sm truncate text-primary",children:search?(0,jsx_runtime.jsx)(SearchHighlight.r,{string:item.name,substring:search}):item.displayName||item.name}),lastViewedAt?(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted whitespace-nowrap",children:formatRelativeTimeShort(lastViewedAt)}):null]})]})})}),(0,jsx_runtime.jsx)(ContextMenu.h_,{loop:!0,className:"max-w-[250px]",children:(0,jsx_runtime.jsx)(ContextMenu.Xl,{children:(0,jsx_runtime.jsx)(MenuItems.s,{item:convertToTreeDataItem(item),type:"context",root:"project://",onlyTree:!1,showSelectMenuOption:!1})})})]}),(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xs",iconOnly:!0,isSideActionRight:!0,className:"opacity-0 group-hover:opacity-100 group-has-[button[data-state=open]]:opacity-100 mt-px",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconEllipsis,{className:"size-3"})})}),(0,jsx_runtime.jsx)(DropdownMenu.AW,{loop:!0,align:"end",side:"bottom",className:"max-w-[250px]",children:(0,jsx_runtime.jsx)(DropdownMenu.Qk,{children:(0,jsx_runtime.jsx)(MenuItems.s,{item:convertToTreeDataItem(item),type:"dropdown",root:"project://",onlyTree:!1,showSelectMenuOption:!1})})})]})]},item.id)}),newTabSceneData&&(()=>{let currentLimit=getSectionItemLimit(category),fullCount=newTabSceneDataGroupedItemsFullData[category]||0;return fullCount>currentLimit&&(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,focusKey:`show-all-${category}`,index:items.length,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{size:"sm",onClick:()=>{let showAllIndex=items.length;showMoreInSection(category),setTimeout(()=>{groupRef.current?.resumeFocus(showAllIndex)},0)},className:"w-full text-tertiary data-[focused=true]:text-primary",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconArrowRight,{className:"rotate-90"})," Show all (",fullCount-currentLimit," more)"]})})})()]}),newTabSceneData&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["persons"===category&&(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsxs)(Link.r,{to:urls.j.persons(),buttonProps:{size:"sm",className:"w-full text-tertiary data-[focused=true]:text-primary"},children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconExternal,{})," See all persons"]})}),"eventDefinitions"===category&&(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsxs)(Link.r,{to:urls.j.eventDefinitions(),buttonProps:{size:"sm",className:"w-full text-tertiary data-[focused=true]:text-primary"},children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconExternal,{})," See all events"]})}),"groups"===category&&groupTypes.size>0&&(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsxs)(Link.r,{to:urls.j.groups(Array.from(groupTypes.keys())[0]),buttonProps:{size:"sm",className:"w-full text-tertiary data-[focused=true]:text-primary"},children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconExternal,{})," See all groups"]})}),"propertyDefinitions"===category&&(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsxs)(Link.r,{to:urls.j.propertyDefinitions(),buttonProps:{size:"sm",className:"w-full text-tertiary data-[focused=true]:text-primary"},children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconExternal,{})," See all properties"]})})]})]})]},category),newTabSceneData&&(0,jsx_runtime.jsx)("div",{className:"h-px w-full bg-border-primary"})]})}function Results(_ref3){let{tabId,searchInputRef,listboxRef,handleAskAi}=_ref3,{filteredItemsGrid,groupedFilteredItems,search,selectedCategory,isSearching,newTabSceneDataInclude,allCategories,firstCategoryWithResults}=(0,index_esm.useValues)(newTabSceneLogic({tabId})),{setSearch,logCreateNewItem}=(0,index_esm.useActions)(newTabSceneLogic({tabId})),{openSidePanel}=(0,index_esm.useActions)(sidePanelStateLogic.f),newTabSceneData=(0,useFeatureFlag.y)("DATA_IN_NEW_TAB_SCENE"),items=groupedFilteredItems[selectedCategory]||[],hasResults=allCategories.some(_ref4=>{let[,items]=_ref4;return items.length>0}),shouldShowGlobalNoResults=newTabSceneData&&newTabSceneDataInclude.includes("all")&&""!==search.trim()&&!hasResults&&!isSearching;return((0,react.useEffect)(()=>{newTabSceneData&&!isSearching&&hasResults&&firstCategoryWithResults&&listboxRef.current?.focusFirstItem()},[newTabSceneData,isSearching,hasResults,firstCategoryWithResults,listboxRef]),newTabSceneData||"all"===selectedCategory)?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[allCategories.map((_ref5,columnIndex)=>{let[category,items]=_ref5;return(0,jsx_runtime.jsx)(Category,{tabId:tabId,items:items,category:category,columnIndex:columnIndex,isFirstCategoryWithResults:category===firstCategoryWithResults},category)}),shouldShowGlobalNoResults&&(0,jsx_runtime.jsx)(NoResultsFound,{handleAskAi:handleAskAi}),newTabSceneData||0!==filteredItemsGrid.length||isSearching?null:(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-4 px-2 py-2 bg-glass-bg-3000 rounded-lg col-span-full",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,jsx_runtime.jsxs)("p",{className:"text-tertiary mb-1",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{})," No results found"]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",onClick:()=>{setSearch(""),searchInputRef.current?.focus()},variant:"panel",className:"list-none",children:"Clear search"})}),"or"," ",(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{size:"sm",onClick:()=>openSidePanel(types.H$.Max),variant:"panel",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconSparkles,{}),"Ask Posthog AI"]})})]})]})})]}):(0,jsx_runtime.jsxs)("div",{className:"col-span-full mb-8",children:[(0,jsx_runtime.jsx)("div",{className:"mb-4",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,jsx_runtime.jsx)("h3",{className:"mb-0 text-lg font-medium text-secondary",children:getCategoryDisplayName(selectedCategory)}),"recents"===selectedCategory&&isSearching&&(0,jsx_runtime.jsx)(src.$j,{size:"small"})]})}),(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-2",children:"recents"===selectedCategory&&0===items.length?(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-2 text-tertiary text-balance",children:isSearching?"Searching...":"No results found"}):items.map((item,index)=>{var _item$icon2;let isCreateNew="create-new"===item.category;return(0,jsx_runtime.jsxs)(ButtonPrimitives.HL,{className:"group w-full border-0",children:[(0,jsx_runtime.jsxs)(ContextMenu.xV,{children:[(0,jsx_runtime.jsx)(ContextMenu.W4,{asChild:!0,children:(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,focusFirst:filteredItemsGrid.length>0&&0===index,row:index,column:0,focusKey:item.id,children:(0,jsx_runtime.jsxs)(Link.r,{to:item.href||"#",className:"w-full",buttonProps:{size:"sm",hasSideActionRight:!0,truncate:!0},onClick:e=>{e.preventDefault(),item.href&&(isCreateNew&&logCreateNewItem(item.href),lib.router.actions.push(item.href))},children:[(0,jsx_runtime.jsx)("span",{className:"text-sm",children:null!==(_item$icon2=item.icon)&&void 0!==_item$icon2?_item$icon2:item.name[0]}),(0,jsx_runtime.jsx)("span",{className:"text-sm truncate text-primary",children:search?(0,jsx_runtime.jsx)(SearchHighlight.r,{string:item.name,substring:search}):item.displayName||item.name})]})})}),(0,jsx_runtime.jsx)(ContextMenu.h_,{loop:!0,className:"max-w-[250px]",children:(0,jsx_runtime.jsx)(ContextMenu.Xl,{children:(0,jsx_runtime.jsx)(MenuItems.s,{item:convertToTreeDataItem(item),type:"context",root:"project://",onlyTree:!1,showSelectMenuOption:!1})})})]}),(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xs",iconOnly:!0,isSideActionRight:!0,className:"opacity-0 group-hover:opacity-100 group-has-[button[data-state=open]]:opacity-100 mt-px",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconEllipsis,{className:"size-3"})})}),(0,jsx_runtime.jsx)(DropdownMenu.AW,{loop:!0,align:"end",side:"bottom",className:"max-w-[250px]",children:(0,jsx_runtime.jsx)(DropdownMenu.Qk,{children:(0,jsx_runtime.jsx)(MenuItems.s,{item:convertToTreeDataItem(item),type:"dropdown",root:"project://",onlyTree:!1,showSelectMenuOption:!1})})})]})]},item.id)})})]},selectedCategory)}function SearchHints(_ref){let{focusSearchInput,tabId,handleAskAi}=_ref,newTabSceneData=(0,useFeatureFlag.y)("DATA_IN_NEW_TAB_SCENE"),{setSearch}=(0,index_esm.useActions)(newTabSceneLogic({tabId})),{search}=(0,index_esm.useValues)(newTabSceneLogic({tabId}));return(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center relative text-xs font-medium overflow-hidden py-1 px-1.5 border-x border-b rounded-b backdrop-blur-sm bg-[var(--glass-bg-3000)]",children:[(0,jsx_runtime.jsxs)("span",{children:[(0,jsx_runtime.jsx)("span",{className:"text-tertiary",children:"Try:"}),(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xxs",className:"text-xs",onClick:()=>{setSearch("New SQL query"),focusSearchInput()},children:"New SQL query"})}),(0,jsx_runtime.jsx)("span",{className:"text-tertiary",children:"or"}),(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xxs",className:"text-xs",onClick:()=>{setSearch("Experiment"),focusSearchInput()},children:"Experiment"})})]}),!newTabSceneData&&(0,jsx_runtime.jsx)("span",{className:"text-primary flex gap-1 items-center",children:(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{size:"xxs",onClick:()=>handleAskAi(search),className:"text-xs",tooltip:"Hit enter to open Posthog AI",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconSparkles,{className:"size-4"}),"Ask Posthog AI"]})})})]})}var icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),TextInputPrimitive=__webpack_require__("../../frontend/src/lib/ui/TextInputPrimitive/TextInputPrimitive.tsx"),KeyboardShortcut=__webpack_require__("../../frontend/src/layout/navigation-3000/components/KeyboardShortcut.tsx");let SearchInput=(0,react.forwardRef)(function SearchInput(_ref,ref){let{commands,placeholder="Type / to see commands...",value="",onChange,onCommandSelect,selectedCommands=[],onSelectedCommandsChange,activeCommands=[],onClearAll}=_ref,[inputValue,setInputValue]=(0,react.useState)(value),[showDropdown,setShowDropdown]=(0,react.useState)(!1),[filteredCommands,setFilteredCommands]=(0,react.useState)(commands),inputRef=(0,react.useRef)(null),[focusedTagIndex,setFocusedTagIndex]=(0,react.useState)(null),[expandedTags,setExpandedTags]=(0,react.useState)(!1);(0,react.useImperativeHandle)(ref,()=>({focus:()=>{inputRef.current&&inputRef.current.focus()},getInputRef:()=>inputRef}),[]),(0,react.useEffect)(()=>{setInputValue(value)},[value]),(0,react.useEffect)(()=>{setFilteredCommands(commands)},[commands]);let handleInputChange=newValue=>{if(setInputValue(newValue),onChange?.(newValue),null!==focusedTagIndex&&setFocusedTagIndex(null),expandedTags&&setExpandedTags(!1),"/"===newValue)setFilteredCommands(commands),setShowDropdown(!0);else if(showDropdown&&newValue.startsWith("/")&&newValue.length>1){let searchTerm=newValue.substring(1).toLowerCase();setFilteredCommands(commands.filter(cmd=>cmd.displayName.toLowerCase().includes(searchTerm)))}else showDropdown&&!newValue.startsWith("/")&&setShowDropdown(!1)},selectCommand=command=>{let newSelectedCommands=selectedCommands.some(cmd=>cmd.value===command.value)?selectedCommands.filter(cmd=>cmd.value!==command.value):[...selectedCommands,command];onSelectedCommandsChange?.(newSelectedCommands),onCommandSelect?.(command),inputValue.startsWith("/")&&(setInputValue(""),onChange?.("")),setExpandedTags(!1),setFocusedTagIndex(null),setShowDropdown(!1),setTimeout(()=>{inputRef.current&&inputRef.current.focus()},150)};return(0,jsx_runtime.jsx)("div",{className:"relative w-full",children:(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)((0,TextInputPrimitive.G)({variant:"default",size:"lg"}),"flex gap-1 focus-within:border-secondary items-center h-8 rounded-lg"),children:[(0,jsx_runtime.jsxs)(DropdownMenu.h_,{open:showDropdown,onOpenChange:open=>{setShowDropdown(open)},children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{variant:"outline",className:`ml-[calc(var(--button-padding-x-sm)+1px)] font-mono text-tertiary ${-1===focusedTagIndex?"ring-2 ring-accent":""}`,iconOnly:!0,size:"sm",tooltip:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Click to show commands/filters, or type ",(0,jsx_runtime.jsx)(KeyboardShortcut.e,{forwardslash:!0})]}),tooltipPlacement:"bottom",children:"/"})}),(0,jsx_runtime.jsx)(DropdownMenu.AW,{align:"start",className:"min-w-[200px]",onCloseAutoFocus:e=>{e.preventDefault(),setTimeout(()=>{inputRef.current&&inputRef.current.focus()},100)},children:(0,jsx_runtime.jsxs)(DropdownMenu.Qk,{children:[(0,jsx_runtime.jsx)(Label._,{intent:"menu",className:"px-2",children:"Filters"}),(0,jsx_runtime.jsx)(DropdownMenu.VD,{}),filteredCommands.map(command=>{let isActive=activeCommands.includes(command.value);return(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{className:"group flex items-center text-left",onClick:()=>selectCommand(command),fullWidth:!0,menuItem:!0,children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-center",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconCheck,{className:(0,css_classes.cn)("hidden size-4 group-hover:block group-hover:opacity-10",{"opacity-10":!isActive,"block text-success group-hover:opacity-100":isActive})}),(0,jsx_runtime.jsx)(icons.R1,{className:(0,css_classes.cn)("hidden size-4 group-hover:hidden",{block:!isActive})})]}),(0,jsx_runtime.jsx)("div",{className:"font-medium text-primary",children:command.displayName})]},command.value)})})]})})]}),0===selectedCommands.length?null:1===selectedCommands.length||expandedTags?selectedCommands.map((command,index)=>(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{className:`text-primary ${focusedTagIndex===index?"ring-2 ring-accent":""}`,size:"sm",variant:"outline",onClick:()=>{selectCommand(command),setShowDropdown(!1),setExpandedTags(!1),setFocusedTagIndex(null)},children:[command.displayName,(0,jsx_runtime.jsx)(posthog_icons_es.IconX,{className:"size-3 ml-1 text-tertiary"})]},command.value)):(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{className:"text-primary",size:"sm",variant:"outline",onClick:()=>setShowDropdown(!0),children:[selectedCommands.length," filters",(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronRight,{className:"ml-1 rotate-90 text-tertiary"})]}),(0,jsx_runtime.jsx)(TextInputPrimitive.w,{id:"command-input",ref:inputRef,value:inputValue,onChange:e=>handleInputChange(e.target.value),onKeyDown:e=>{switch(e.key){case"/":if(!showDropdown&&""===inputValue){e.preventDefault(),setFilteredCommands(commands),setShowDropdown(!0);return}break;case"Backspace":""===inputValue&&(e.preventDefault(),e.stopPropagation(),0===selectedCommands.length?setShowDropdown(!0):expandedTags?null!==focusedTagIndex&&(selectCommand(selectedCommands[focusedTagIndex]),setExpandedTags(!1),setFocusedTagIndex(null)):(setExpandedTags(!0),setFocusedTagIndex(selectedCommands.length-1)));break;case"ArrowLeft":let cursorPosition=inputRef.current?.selectionStart||0;""===inputValue?(e.preventDefault(),e.stopPropagation(),0===selectedCommands.length?setShowDropdown(!0):!expandedTags&&selectedCommands.length>0?(setExpandedTags(!0),setFocusedTagIndex(selectedCommands.length-1)):expandedTags&&null!==focusedTagIndex&&(focusedTagIndex>0?setFocusedTagIndex(focusedTagIndex-1):setFocusedTagIndex(-1))):""!==inputValue&&0===cursorPosition&&(e.preventDefault(),e.stopPropagation(),setExpandedTags(!0),setFocusedTagIndex(-1),setShowDropdown(!0));break;case"ArrowRight":""===inputValue&&expandedTags&&null!==focusedTagIndex&&(e.preventDefault(),e.stopPropagation(),-1===focusedTagIndex?setFocusedTagIndex(0):focusedTagIndex<selectedCommands.length-1?setFocusedTagIndex(focusedTagIndex+1):(setFocusedTagIndex(null),setExpandedTags(!1)));break;case"Enter":""===inputValue&&expandedTags&&null!==focusedTagIndex&&(e.preventDefault(),e.stopPropagation(),-1===focusedTagIndex?setShowDropdown(!0):(selectCommand(selectedCommands[focusedTagIndex]),setExpandedTags(!1),setFocusedTagIndex(null)));break;case"ArrowDown":""===inputValue&&expandedTags&&-1===focusedTagIndex&&(e.preventDefault(),e.stopPropagation(),setShowDropdown(!0));break;case"Escape":(showDropdown||expandedTags)&&(e.preventDefault(),e.stopPropagation(),setExpandedTags(!1),setFocusedTagIndex(null),setShowDropdown(!1))}},placeholder:placeholder,autoFocus:!0,autoComplete:"off",className:"pl-1 w-full border-none flex-1 h-full min-h-full rounded-r-lg",size:"lg",suffix:(""!==inputValue||selectedCommands.length>0)&&(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{iconOnly:!0,onClick:()=>{setInputValue(""),onChange?.(""),setExpandedTags(!1),setFocusedTagIndex(null),setShowDropdown(!1),onClearAll?.(),inputRef.current?.focus()},"aria-label":"Clear input and filters",size:"sm",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconX,{})})})})]})})}),scene={component:NewTabScene,logic:newTabSceneLogic};function NewTabScene(){let{tabId,source}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},commandInputRef=(0,react.useRef)(null),listboxRef=(0,react.useRef)(null),inputRef=(0,react.useRef)(null),{filteredItemsGrid,search,categories,selectedCategory,newTabSceneDataInclude,isSearching}=(0,index_esm.useValues)(newTabSceneLogic({tabId})),{mobileLayout}=(0,index_esm.useValues)(navigationLogic.f),{setSearch,setSelectedCategory,toggleNewTabSceneDataInclude,refreshDataAfterToggle}=(0,index_esm.useActions)(newTabSceneLogic({tabId})),{showSceneDashboardChoiceModal}=(0,index_esm.useActions)((0,sceneDashboardChoiceModalLogic.F)({scene:sceneTypes.x.ProjectHomepage})),newTabSceneData=(0,useFeatureFlag.y)("DATA_IN_NEW_TAB_SCENE"),focusSearchInput=()=>{commandInputRef.current?.focus()},handleAskAi=question=>{let nextQuestion=(null!=question?question:search).trim();lib.router.actions.push(urls.j.max(void 0,nextQuestion))},selectedCommands=newTabSceneDataInclude.filter(commandValue=>"all"!==commandValue).map(commandValue=>NEW_TAB_COMMANDS_ITEMS.find(cmd=>cmd.value===commandValue)||{value:commandValue,displayName:commandValue});return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(ListBox.w,{ref:listboxRef,className:"w-full grid grid-rows-[auto_1fr] flex-col h-[calc(100vh-var(--scene-layout-header-height))]",virtualFocus:!0,autoSelectFirst:!0,children:[(0,jsx_runtime.jsx)("div",{className:"sr-only",children:(0,jsx_runtime.jsx)("p",{children:"Welcome to the new tab, type / to see commands... or type a search term, you can navigate all interactive elements with the keyboard"})}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsxs)("div",{className:"px-2 @lg/main-content:px-8 pt-2 @lg/main-content:pt-8 mx-auto w-full max-w-[1200px] ",children:[newTabSceneData?(0,jsx_runtime.jsx)(SearchInput,{ref:commandInputRef,commands:NEW_TAB_COMMANDS_ITEMS,value:search,onChange:value=>{"/"!==value&&setSearch(value)},placeholder:"Search or ask an AI question",activeCommands:newTabSceneDataInclude,selectedCommands:selectedCommands,onCommandSelect:command=>{"all"===command.value?newTabSceneDataInclude.includes("all")?newTabSceneDataInclude.forEach(selectedCommand=>{toggleNewTabSceneDataInclude(selectedCommand)}):toggleNewTabSceneDataInclude("all"):toggleNewTabSceneDataInclude(command.value),refreshDataAfterToggle()},onClearAll:()=>{newTabSceneDataInclude.forEach(command=>{toggleNewTabSceneDataInclude(command)}),refreshDataAfterToggle()}}):(0,jsx_runtime.jsx)(src.DF,{inputRef:inputRef,value:search,onChange:value=>setSearch(value),prefix:(0,jsx_runtime.jsx)(posthog_icons_es.IconSearch,{}),className:"w-full",placeholder:"Search...",autoFocus:!0,allowClear:!0,"aria-controls":"combobox-listbox","aria-label":"Search for a person, event, property, or app, you can navigate all interactive elements with the keyboard"}),!newTabSceneData&&(0,jsx_runtime.jsx)("div",{className:"mx-1.5",children:(0,jsx_runtime.jsx)(SearchHints,{filteredItemsGridLength:filteredItemsGrid.length,focusSearchInput:focusSearchInput,tabId:tabId||"",handleAskAi:handleAskAi})})]}),newTabSceneData?(0,jsx_runtime.jsx)("div",{className:"border-b",children:(0,jsx_runtime.jsx)("div",{className:"max-w-[1200px] mx-auto w-full px-2 @lg/main-content:px-10 pb-2",children:(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-x-2 gap-y-2 flex-wrap",children:"homepage"===source?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xxs","data-attr":"project-home-customize-homepage",className:"ml-auto text-xs",onClick:showSceneDashboardChoiceModal,children:"Customize homepage"}),(0,jsx_runtime.jsx)(SceneDashboardChoiceModal.q,{scene:sceneTypes.x.ProjectHomepage})]}):null})})}):(0,jsx_runtime.jsx)(TabsPrimitive.F1,{value:selectedCategory,onValueChange:value=>setSelectedCategory(value),children:(0,jsx_runtime.jsx)(TabsPrimitive.qf,{className:"border-b",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-[1200px] mx-auto w-full px-1 @lg/main-content:px-8 flex",children:[categories.map(category=>(0,jsx_runtime.jsx)(TabsPrimitive.Em,{value:category.key,className:"px-2 py-1 cursor-pointer",onClick:()=>{mobileLayout||(focusSearchInput(),listboxRef.current?.focusFirstItem())},children:category.label},category.key)),"homepage"===source?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{type:"tertiary",size:"small","data-attr":"project-home-customize-homepage",className:"ml-auto",onClick:showSceneDashboardChoiceModal,children:"Customize homepage"}),(0,jsx_runtime.jsx)(SceneDashboardChoiceModal.q,{scene:sceneTypes.x.ProjectHomepage})]}):null]})})})]}),(0,jsx_runtime.jsx)(ScrollableShadows.D,{direction:"vertical",className:"flex flex-col gap-4 overflow-auto h-full",innerClassName:(0,css_classes.cn)("pt-6",{"pt-4":newTabSceneData}),styledScrollbars:!0,children:(0,jsx_runtime.jsx)("div",{className:"flex flex-col flex-1 max-w-[1200px] mx-auto w-full gap-4 px-4 @lg/main-content:px-8 group/colorful-product-icons colorful-product-icons-true",children:newTabSceneData||0!==filteredItemsGrid.length||isSearching?(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)({"grid grid-cols-1 @md/main-content:grid-cols-2 @xl/main-content:grid-cols-3 @2xl/main-content:grid-cols-4 gap-4":!newTabSceneData,"flex flex-col gap-2 mb-32":newTabSceneData}),children:[newTabSceneData&&(0,jsx_runtime.jsx)("div",{className:"col-span-full border border-primary border-px rounded-md p-2 mb-2",children:(0,jsx_runtime.jsxs)("p",{className:"flex flex-col items-center @md/main-content:flex-row gap-1 m-0 text-sm text-tertiary",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{className:"size-4 text-accent"})," You're trying out the new tab UX with the flag:"," ",(0,jsx_runtime.jsx)("span",{className:"font-mono border border-primary border-px rounded-md px-1 mb-0",children:"data-in-new-tab-scene"})]})}),(0,jsx_runtime.jsx)(Results,{tabId:tabId||"",searchInputRef:commandInputRef.current?.getInputRef()||{current:null},listboxRef:listboxRef,handleAskAi:handleAskAi})]}):(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-4 px-2 py-2 bg-glass-bg-3000 rounded-lg",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,jsx_runtime.jsxs)("p",{className:"text-tertiary mb-2",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{})," No results found"]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1",children:[(0,jsx_runtime.jsxs)(ListBox.w.Item,{asChild:!0,className:"list-none",children:[(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",onClick:()=>setSearch(""),variant:"panel",children:"Clear search"})," "]}),"or"," ",(0,jsx_runtime.jsx)(ListBox.w.Item,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"sm",onClick:()=>handleAskAi(),variant:"panel",children:"Ask Posthog AI"})})]})]})})})})]})})}},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".tabs-trigger{border-bottom:2px solid transparent;color:var(--color-text-secondary)}.tabs-trigger:hover,.tabs-trigger[data-state=active]{color:var(--color-accent)}.tabs-trigger[data-state=active]{border-color:var(--color-accent)}",""]),module.exports=exports}}]);