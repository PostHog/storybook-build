"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[80618],{"../../frontend/src/scenes/error-tracking/components/ContextDisplay.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ContextDisplayEmpty:()=>ContextDisplayEmpty,ContextDisplayWithStacktrace:()=>ContextDisplayWithStacktrace,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),scenes_error_tracking_mocks_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/scenes/error-tracking/__mocks__/events/index.tsx"),_ContextDisplay__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/error-tracking/components/ContextDisplay.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let __WEBPACK_DEFAULT_EXPORT__={title:"ErrorTracking/ContextDisplay",parameters:{layout:"centered",viewMode:"story"},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Mi,{hoverEffect:!1,className:"p-2 px-3 w-[900px]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Story,{})})]};function ContextDisplayEmpty(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ContextDisplay__WEBPACK_IMPORTED_MODULE_3__.B,{loading:!1})}function ContextDisplayWithStacktrace(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ContextWrapperAllEvents,{children:props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ContextDisplay__WEBPACK_IMPORTED_MODULE_3__.B,{...props})})}function getProps(event_name){let overrideProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},properties=event_name?scenes_error_tracking_mocks_events__WEBPACK_IMPORTED_MODULE_2__.J7[event_name].properties:null;return{loading:!1,attributes:properties?(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_1__.OZ)(properties):null,additionalProperties:properties?(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_1__.DB)(properties,!0):{},...overrideProps}}function ContextWrapperAllEvents(_ref){let{children}=_ref,eventNames=Object.keys(scenes_error_tracking_mocks_events__WEBPACK_IMPORTED_MODULE_2__.J7);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"space-y-4",children:eventNames.map(name=>{let props=getProps(name);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"px-3 py-2",children:children(props)},name)})})}ContextDisplayEmpty.parameters={...ContextDisplayEmpty.parameters,docs:{...ContextDisplayEmpty.parameters?.docs,source:{originalSource:"function ContextDisplayEmpty(): JSX.Element {\n  return <ContextDisplay loading={false} />;\n}",...ContextDisplayEmpty.parameters?.docs?.source}}},ContextDisplayWithStacktrace.parameters={...ContextDisplayWithStacktrace.parameters,docs:{...ContextDisplayWithStacktrace.parameters?.docs,source:{originalSource:"function ContextDisplayWithStacktrace(): JSX.Element {\n  return <ContextWrapperAllEvents>{props => <ContextDisplay {...props} />}</ContextWrapperAllEvents>;\n}",...ContextDisplayWithStacktrace.parameters?.docs?.source}}};let __namedExportsOrder=["ContextDisplayEmpty","ContextDisplayWithStacktrace"]},"../../frontend/src/scenes/error-tracking/components/ContextDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>ContextDisplay});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.13.1_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),lib_hooks_useIsHovering__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/hooks/useIsHovering.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils.tsx"),lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/utils/copyToClipboard.tsx"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),ts_pattern__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/.pnpm/ts-pattern@4.3.0/node_modules/ts-pattern/dist/index.js"),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/error-tracking/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ContextDisplay(_ref){let{className,attributes,additionalProperties={},loading}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__.cn)("pt-8 transition-[width] duration-200",className),children:(0,ts_pattern__WEBPACK_IMPORTED_MODULE_7__.EQ)(loading).with(!0,()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"flex justify-center w-full h-32 items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.$j,{})})).with(!1,()=>{let additionalEntries=Object.entries(additionalProperties).map(_ref2=>{let[key,value]=_ref2;return[(0,lib_utils__WEBPACK_IMPORTED_MODULE_4__.UV)(key,"title"),value]}),exceptionEntries=attributes&&[["Level",attributes.level],["Synthetic",attributes.synthetic],["Library",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__.KT)(attributes,"lib","libVersion")],["Handled",attributes.handled],["Browser",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__.KT)(attributes,"browser","browserVersion")],["OS",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_2__.KT)(attributes,"os","osVersion")],["URL",attributes.url]];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ContextTable,{entries:exceptionEntries||[]}),additionalEntries.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ContextTable,{entries:additionalEntries})]})}).exhaustive()})}function ContextTable(_ref3){let{entries}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("table",{className:"border-spacing-0 border-separate rounded w-full border overflow-hidden cursor-default",onClick:_utils__WEBPACK_IMPORTED_MODULE_8__.de,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("tbody",{className:"w-full",children:[entries.filter(_ref4=>{let[,value]=_ref4;return void 0!==value}).map(_ref5=>{let[key,value]=_ref5;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(ContextRow,{label:key,value:String(value)},key)}),0==entries.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("tr",{className:"w-full text-center",children:"No data available"})]})})}function ContextRow(_ref6){let{label,value}=_ref6,valueRef=(0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),isHovering=(0,lib_hooks_useIsHovering__WEBPACK_IMPORTED_MODULE_3__.Z)(valueRef);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("tr",{className:"even:bg-fill-tertiary w-full group",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("th",{className:"border-r-1 font-semibold text-xs p-1 w-1/3 text-left",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("td",{ref:valueRef,className:"w-full truncate p-1 text-xs max-w-0 relative",title:value,children:[String(value),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__.cn)("absolute right-0 top-[50%] translate-y-[-50%] group-even:bg-fill-tertiary group-odd:bg-fill-primary drop-shadow-sm",isHovering?"opacity-100":"opacity-0"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{size:"xsmall",className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_10__.cn)("p-0 rounded-none"),tooltip:"Copy",onClick:()=>{(0,lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_5__.v)(value).catch(error=>{console.error("Failed to copy to clipboard:",error)})},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconCopy,{})})})]})]})}}}]);