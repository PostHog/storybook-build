(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./frontend/src/lib/components/PayGateMini/PayGateMini.tsx":function(me,C,e){"use strict";e.d(C,"a",function(){return Y});var $=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.symbol.js"),ie=e("./node_modules/core-js/modules/es.symbol.description.js"),te=e("./node_modules/react/index.js"),b=e.n(te),Z=e("./node_modules/kea/lib/index.esm.js"),o=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),h=e("./frontend/src/types.ts"),ae=e("./frontend/src/scenes/userLogic.ts"),F=e("./frontend/src/lib/components/icons.tsx"),Ee=e("./frontend/src/lib/components/LemonButton/index.ts"),w=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ce=e.n(w),ne=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss"),G=e.n(ne),H={};H.insert="head",H.singleton=!1;var L=ce()(G.a,H),ue=G.a.locals||{},S=e("./frontend/src/lib/constants.tsx"),k=e("./frontend/src/lib/utils.tsx"),z,R=(z={},oe()(z,h.d.DASHBOARD_PERMISSIONING,{icon:b.a.createElement(F.IconEmojiPeople,null),description:"Share insights, collaborate on dashboards, manage permissions, and make decisions with your team.",umbrella:"advanced permissioning"}),oe()(z,h.d.SSO_ENFORCEMENT,{icon:b.a.createElement(F.IconLock,null),description:"Enable SAML single sign-on, enforce login with SSO, automatic user provisioning, and advanced authentication controls.",umbrella:"advanced authentication"}),z);function Y(_){var M=_.feature,A=_.style,O=_.children,N=_.overrideShouldShowGate,q=Object(Z.useValues)(o.a),g=q.preflight,be=Object(Z.useValues)(ae.a),fe=be.hasAvailableFeature,U=R[M],K=S.i[M],P=null;return!N&&!fe(M)&&(g!=null&&g.cloud?K===S.o?P="add-card":P="contact-sales":P="check-licensing"),P?b.a.createElement("div",{className:"PayGateMini",style:A},b.a.createElement("div",{className:"PayGateMini__icon"},U.icon),b.a.createElement("div",{className:"PayGateMini__description"},U.description),b.a.createElement("div",{className:"PayGateMini__cta"},"Upgrade to ",P==="add-card"?"a premium":"the ".concat(Object(k.j)(K))," ","plan to gain ",U.umbrella,"."),b.a.createElement(Ee.a,{to:P==="add-card"?"/organization/billing":void 0,href:P==="contact-sales"?"mailto:sales@posthog.com?subject=Inquiring about ".concat(U.umbrella):P==="check-licensing"?"https://posthog.com/pricing":void 0,type:"secondary",fullWidth:!0,center:!0},P==="add-card"?"Upgrade now":P==="contact-sales"?"Contact sales":"Explore license options")):b.a.createElement(b.a.Fragment,null,O)}try{Y.displayName="PayGateMini",Y.__docgenInfo={description:`A sort of paywall for premium features.

Simply shows its children when the feature is available,
otherwise it presents upsell UI with the call to action that's most relevant for the circumstances.`,displayName:"PayGateMini",props:{feature:{defaultValue:null,description:"",name:"feature",required:!0,type:{name:"enum",value:[{value:'"sso_enforcement"'},{value:'"dashboard_permissioning"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},overrideShouldShowGate:{defaultValue:null,description:"",name:"overrideShouldShowGate",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"]={docgenInfo:Y.__docgenInfo,name:"PayGateMini",path:"frontend/src/lib/components/PayGateMini/PayGateMini.tsx#PayGateMini"})}catch(_){}},"./frontend/src/scenes/dashboard/ShareModal.tsx":function(me,C,e){"use strict";e.d(C,"a",function(){return q}),e.d(C,"b",function(){return g});var $=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.array.map.js"),ie=e.n(de),te=e("./node_modules/core-js/modules/es.array.concat.js"),b=e.n(te),Z=e("./node_modules/react/index.js"),o=e.n(Z),h=e("./node_modules/kea/lib/index.esm.js"),ae=e("./frontend/src/scenes/dashboard/dashboardLogic.ts"),F=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),Ee=e("./frontend/src/scenes/urls.ts"),w=e("./frontend/src/models/dashboardsModel.tsx"),ce=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),ne=e("./frontend/src/lib/components/LemonModal/LemonModal.tsx"),G=e("./frontend/src/lib/components/LemonButton/index.ts"),H=e("./frontend/src/lib/utils.tsx"),L=e("./frontend/src/lib/components/icons.tsx"),ue=e("./frontend/src/types.ts"),S=e("./frontend/src/lib/constants.tsx"),k=e("./frontend/src/lib/components/LemonSelect.tsx"),z=e("./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts"),R=e("./frontend/src/lib/components/ProfilePicture/index.ts"),Y=e("./node_modules/antd/es/select/index.js"),_=e("./node_modules/antd/es/button/index.js"),M=e("./frontend/src/lib/components/Tooltip.tsx"),A=e("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),O=e("./frontend/src/lib/components/AlertMessage/index.ts"),N,q=(N={},oe()(N,S.e.EveryoneInProjectCanEdit,{label:"Everyone in the project can edit",icon:o.a.createElement(L.IconLockOpen,null)}),oe()(N,S.e.OnlyCollaboratorsCanEdit,{label:"Only those invited to this dashboard can edit",icon:o.a.createElement(L.IconLock,null)}),N);function g(U){var K=U.visible,P=U.onCancel,V=Object(h.useValues)(w.a),T=V.dashboardLoading,B=Object(h.useValues)(ae.c),E=B.dashboard,J=B.canEditDashboard,je=Object(h.useActions)(ae.c),le=je.setIsSharedDashboard,ee=E?window.location.origin+Ee.a.sharedDashboard(E.share_token):"";return E?o.a.createElement(ne.a,{visible:K,onCancel:P},o.a.createElement(be,{dashboardId:E.id}),o.a.createElement("section",null,o.a.createElement("h5",null,"External sharing"),o.a.createElement(ce.a,{id:"share-dashboard-switch",label:"Share dashboard publicly",checked:E.is_shared,loading:T,"data-attr":"share-dashboard-switch",onChange:function(Q){le(E.id,Q)},type:"primary",disabled:!J,style:{width:"100%",height:"3rem",fontWeight:600}}),E.is_shared?o.a.createElement(o.a.Fragment,null,E.share_token&&o.a.createElement(G.a,{"data-attr":"share-dashboard-link-button",onClick:function(){return Object(H.t)(ee,"link")},icon:o.a.createElement(L.IconCopy,null),style:{width:"100%",height:"3rem",border:"1px solid var(--border)"}},"Copy shared dashboard link"),o.a.createElement("div",null,"Use this HTML snippet to embed the dashboard on your website:"),o.a.createElement(F.a,{language:F.b.HTML},'<iframe width="100%" height="100%" frameborder="0" src="'.concat(ee,'?embedded" />'))):null)):null}function be(U){var K=U.dashboardId,P=Object(h.useValues)(w.a),V=P.dashboardLoading,T=Object(h.useValues)(ae.c),B=T.dashboard,E=T.canEditDashboard,J=T.canRestrictDashboard,je=Object(h.useActions)(ae.c),le=je.triggerDashboardUpdate,ee=Object(h.useValues)(Object(z.a)({dashboardId:K})),_e=ee.allCollaborators,Q=ee.explicitCollaboratorsLoading,Me=ee.addableMembers,Oe=ee.explicitCollaboratorsToBeAdded,W=Object(h.useActions)(Object(z.a)({dashboardId:K})),ve=W.deleteExplicitCollaborator,he=W.setExplicitCollaboratorsToBeAdded,D=W.addExplicitCollaborators;return B&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",null,"Collaboration settings"),o.a.createElement(A.a,{feature:ue.d.DASHBOARD_PERMISSIONING,style:{marginTop:"0.75rem"}},o.a.createElement("section",null,(!E||!J)&&o.a.createElement(O.a,{type:"info"},E?"You aren't allowed to change the restriction level \u2013 only the dashboard owner and project admins can.":"You aren't allowed to change sharing settings \u2013 only dashboard collaborators with edit settings can."),o.a.createElement(k.a,{value:B.effective_restriction_level,onChange:function(i){return le({restriction_level:i})},options:q,loading:V,type:"stealth",outlined:!0,style:{height:"3rem",width:"100%"},disabled:!J})),B.restriction_level>S.e.EveryoneInProjectCanEdit&&o.a.createElement("section",null,o.a.createElement("h5",null,"Collaborators"),E&&o.a.createElement("div",{style:{display:"flex",marginBottom:"0.75rem"}},o.a.createElement(Y.a,{mode:"multiple",placeholder:"Search for team members to add\u2026",loading:Q,value:Oe,onChange:function(i){return he(i)},showArrow:!0,showSearch:!0,style:{flexGrow:1}},Me.map(function(n){return o.a.createElement(Y.a.Option,{key:n.id,value:n.uuid,title:"".concat(n.first_name," (").concat(n.email,")")},o.a.createElement(R.b,{name:n.first_name,email:n.email,size:"sm",style:{display:"inline-flex",marginRight:8}}),n.first_name," (",n.email,")")})),o.a.createElement(_.a,{type:"primary",style:{flexShrink:0,marginLeft:"0.5rem"},loading:Q,disabled:Oe.length===0,onClick:function(){return D()}},"Add")),_e.map(function(n){return o.a.createElement(fe,{key:n.user.uuid,collaborator:n,deleteCollaborator:E?ve:void 0})}))))}function fe(U){var K=U.collaborator,P=U.deleteCollaborator,V=K.user,T=K.level,B=T<=S.d.CanEdit,E=S.C[T];return o.a.createElement("div",{className:"CollaboratorRow"},o.a.createElement(R.b,{email:V.email,name:V.first_name,size:"md",showName:!0}),o.a.createElement(M.a,{title:B?null:"".concat(V.first_name||"This person"," ").concat(T===S.d._Owner?"created the dashboard":"is a project administrator"),placement:"left"},o.a.createElement("div",{className:"CollaboratorRow__details"},o.a.createElement("span",null,B?E:o.a.createElement("b",null,E)),P&&o.a.createElement(G.a,{icon:o.a.createElement(L.IconCancel,null),onClick:function(){return P(V.uuid)},type:"stealth",tooltip:B?"Remove invited collaborator":null,disabled:!B,status:"danger",size:"small"}))))}try{g.displayName="ShareModal",g.__docgenInfo={description:"",displayName:"ShareModal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"]={docgenInfo:g.__docgenInfo,name:"ShareModal",path:"frontend/src/scenes/dashboard/ShareModal.tsx#ShareModal"})}catch(U){}},"./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts":function(me,C,e){"use strict";e.d(C,"a",function(){return se});var $=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),oe=e.n($),de=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ie=e.n(de),te=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),b=e.n(te),Z=e("./node_modules/@babel/runtime/regenerator/index.js"),o=e.n(Z),h=e("./node_modules/core-js/modules/es.array.iterator.js"),ae=e.n(h),F=e("./node_modules/core-js/modules/es.object.to-string.js"),Ee=e.n(F),w=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ce=e.n(w),ne=e("./node_modules/core-js/modules/es.array.sort.js"),G=e.n(ne),H=e("./node_modules/core-js/modules/es.promise.js"),L=e.n(H),ue=e("./node_modules/core-js/modules/es.string.iterator.js"),S=e.n(ue),k=e("./node_modules/core-js/modules/es.array.map.js"),z=e.n(k),R=e("./node_modules/core-js/modules/es.array.concat.js"),Y=e.n(R),_=e("./node_modules/core-js/modules/es.array.filter.js"),M=e.n(_),A=e("./node_modules/core-js/modules/es.array.find.js"),O=e.n(A),N=e("./node_modules/core-js/modules/es.object.keys.js"),q=e.n(N),g=e("./node_modules/core-js/modules/es.symbol.js"),be=e.n(g),fe=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),U=e.n(fe),K=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),P=e.n(K),V=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),T=e.n(V),B=e("./node_modules/core-js/modules/es.array.slice.js"),E=e.n(B),J=e("./node_modules/core-js/modules/es.function.name.js"),je=e.n(J),le=e("./node_modules/core-js/modules/es.array.from.js"),ee=e.n(le),_e=e("./node_modules/core-js/modules/es.regexp.exec.js"),Q=e.n(_e),Me=e("./node_modules/core-js/modules/es.symbol.description.js"),Oe=e.n(Me),W=e("./node_modules/core-js/modules/es.symbol.iterator.js"),ve=e.n(W),he=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/lib/api.ts"),n=e("./frontend/src/lib/constants.tsx"),i=e("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),d=e("./frontend/src/scenes/dashboard/dashboardLogic.ts");function f(s,r){var t=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!t){if(Array.isArray(s)||(t=v(s))||r&&s&&typeof s.length=="number"){t&&(s=t);var l=0,x=function(){};return{s:x,n:function(){return l>=s.length?{done:!0}:{done:!1,value:s[l++]}},e:function(j){throw j},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,I=!1,y;return{s:function(){t=t.call(s)},n:function(){var j=t.next();return p=j.done,j},e:function(j){I=!0,y=j},f:function(){try{!p&&t.return!=null&&t.return()}finally{if(I)throw y}}}}function v(s,r){if(!!s){if(typeof s=="string")return m(s,r);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(s,r)}}function m(s,r){(r==null||r>s.length)&&(r=s.length);for(var t=0,l=new Array(r);t<r;t++)l[t]=s[t];return l}function a(s,r){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);r&&(l=l.filter(function(x){return Object.getOwnPropertyDescriptor(s,x).enumerable})),t.push.apply(t,l)}return t}function u(s){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?a(Object(t),!0).forEach(function(l){oe()(s,l,t[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(t,l))})}return s}var se=Object(he.kea)({path:function(r){return["scenes","dashboard","dashboardCollaboratorsLogic",r]},props:{},key:function(r){return r.dashboardId},connect:function(r){return{values:[i.b,["admins","plainMembers","allMembers","allMembersLoading"],Object(d.c)({id:r.dashboardId}),["dashboard"]]}},actions:{deleteExplicitCollaborator:function(r){return{userUuid:r}},setExplicitCollaboratorsToBeAdded:function(r){return{userUuids:r}},addExplicitCollaborators:!0},reducers:{explicitCollaboratorsToBeAdded:[[],{setExplicitCollaboratorsToBeAdded:function(r,t){var l=t.userUuids;return l}}]},loaders:function(r){var t=r.values,l=r.props,x=r.actions;return{explicitCollaborators:[[],{loadExplicitCollaborators:function(){var p=b()(o.a.mark(function y(){var c;return o.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,D.b.dashboards.collaborators.list(l.dashboardId);case 2:return c=re.sent,c.sort(function(X,pe){return X.user.first_name.localeCompare(pe.user.first_name)}),re.abrupt("return",c);case 5:case"end":return re.stop()}},y)}));function I(){return p.apply(this,arguments)}return I}(),addExplicitCollaborators:function(){var p=b()(o.a.mark(function y(){var c,j,re,X;return o.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return c=t.explicitCollaboratorsToBeAdded,j=t.explicitCollaborators,x.setExplicitCollaboratorsToBeAdded([]),Pe.next=4,Promise.all(c.map(function(){var Ce=b()(o.a.mark(function ye(Le){return o.a.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,D.b.dashboards.collaborators.create(l.dashboardId,Le,n.d.CanEdit);case 2:return De.abrupt("return",De.sent);case 3:case"end":return De.stop()}},ye)}));return function(ye){return Ce.apply(this,arguments)}}()));case 4:return re=Pe.sent,X=[].concat(ie()(j),ie()(re)),X.sort(function(Ce,ye){return Ce.user.first_name.localeCompare(ye.user.first_name)}),Pe.abrupt("return",X);case 8:case"end":return Pe.stop()}},y)}));function I(){return p.apply(this,arguments)}return I}(),deleteExplicitCollaborator:function(){var p=b()(o.a.mark(function y(c){var j;return o.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return j=c.userUuid,X.next=3,D.b.dashboards.collaborators.delete(l.dashboardId,j);case 3:return X.abrupt("return",t.explicitCollaborators.filter(function(pe){return pe.user.uuid!==j}));case 4:case"end":return X.stop()}},y)}));function I(y){return p.apply(this,arguments)}return I}()}]}},selectors:{allCollaborators:[function(s){return[s.explicitCollaborators,s.admins,s.allMembers,s.dashboard]},function(s,r,t,l){var x,p=[],I=l==null||(x=l.created_by)===null||x===void 0?void 0:x.uuid,y=(l==null?void 0:l.effective_restriction_level)===n.e.EveryoneInProjectCanEdit?t:r;return p.push.apply(p,ie()(s.filter(function(c){return!y.find(function(j){return j.user.uuid===c.user.uuid})}).map(function(c){return u(u({},c),{},{level:c.user.uuid===I?n.d._Owner:c.level})}))),p.push.apply(p,ie()(y.map(function(c){return{user:c.user,level:c.user.uuid===I?n.d._Owner:n.d._ProjectAdmin}}))),p.sort(function(c,j){return c.level===j.level?c.user.first_name.localeCompare(j.user.first_name):j.level-c.level}),p}],addableMembers:[function(s){return[s.allCollaborators,s.plainMembers]},function(s,r){var t=[],l=f(r),x;try{var p=function(){var y=x.value;s.some(function(c){return c.user.uuid===y.user.uuid})||t.push(y.user)};for(l.s();!(x=l.n()).done;)p()}catch(I){l.e(I)}finally{l.f()}return t.sort(function(I,y){return I.first_name.localeCompare(y.first_name)}),t}],addableMembersLoading:[function(s){return[s.explicitCollaboratorsLoading,s.allMembersLoading]},function(s,r){return s||r}]},events:function(r){var t=r.actions;return{afterMount:function(){t.loadExplicitCollaborators()}}}})},"./frontend/src/scenes/dashboard/dashboardsLogic.ts":function(me,C,e){"use strict";e.d(C,"a",function(){return R}),e.d(C,"b",function(){return Y});var $=e("./node_modules/core-js/modules/es.array.sort.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.array.filter.js"),ie=e.n(de),te=e("./node_modules/core-js/modules/es.object.to-string.js"),b=e.n(te),Z=e("./node_modules/core-js/modules/es.function.name.js"),o=e.n(Z),h=e("./node_modules/core-js/modules/es.array.map.js"),ae=e.n(h),F=e("./node_modules/core-js/modules/es.regexp.exec.js"),Ee=e.n(F),w=e("./node_modules/core-js/modules/es.string.search.js"),ce=e.n(w),ne=e("./node_modules/core-js/modules/es.array.flat-map.js"),G=e.n(ne),H=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),L=e.n(H),ue=e("./node_modules/kea/lib/index.esm.js"),S=e("./node_modules/fuse.js/dist/fuse.esm.js"),k=e("./frontend/src/models/dashboardsModel.tsx"),z=e("./frontend/src/lib/utils.tsx"),R;(function(_){_.All="all",_.Pinned="pinned",_.Shared="shared"})(R||(R={}));var Y=Object(ue.kea)({path:["scenes","dashboard","dashboardsLogic"],actions:{setSearchTerm:function(M){return{searchTerm:M}},setCurrentTab:function(M){return{tab:M}}},reducers:{searchTerm:{setSearchTerm:function(M,A){var O=A.searchTerm;return O}},currentTab:[R.All,{setCurrentTab:function(M,A){var O=A.tab;return O}}]},selectors:{dashboards:[function(_){return[k.a.selectors.nameSortedDashboards,_.searchTerm,_.currentTab]},function(_,M,A){return _=_.filter(function(O){return!O.deleted}).sort(function(O,N){var q,g;return((q=O.name)!==null&&q!==void 0?q:"Untitled").localeCompare((g=N.name)!==null&&g!==void 0?g:"Untitled")}),A===R.Pinned?_=_.filter(function(O){return O.pinned}):A===R.Shared&&(_=_.filter(function(O){return O.is_shared})),M?new S.a(_,{keys:["key","name"],threshold:.3}).search(M).map(function(O){return O.item}):_}],dashboardTags:[function(){return[k.a.selectors.nameSortedDashboards]},function(_){return Object(z.Db)(_.flatMap(function(M){var A=M.tags;return A||""}),function(M){return M}).sort()}]}})},"./frontend/src/scenes/project/Settings/teamMembersLogic.tsx":function(me,C,e){"use strict";e.d(C,"a",function(){return ve}),e.d(C,"b",function(){return he});var $=e("./node_modules/core-js/modules/es.object.keys.js"),oe=e.n($),de=e("./node_modules/core-js/modules/es.symbol.js"),ie=e.n(de),te=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),b=e.n(te),Z=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o=e.n(Z),h=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),ae=e.n(h),F=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Ee=e.n(F),w=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ce=e.n(w),ne=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),G=e.n(ne),H=e("./node_modules/@babel/runtime/regenerator/index.js"),L=e.n(H),ue=e("./node_modules/core-js/modules/es.array.iterator.js"),S=e.n(ue),k=e("./node_modules/core-js/modules/es.object.to-string.js"),z=e.n(k),R=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Y=e.n(R),_=e("./node_modules/core-js/modules/es.promise.js"),M=e.n(_),A=e("./node_modules/core-js/modules/es.string.iterator.js"),O=e.n(A),N=e("./node_modules/core-js/modules/es.array.map.js"),q=e.n(N),g=e("./node_modules/core-js/modules/es.array.concat.js"),be=e.n(g),fe=e("./node_modules/core-js/modules/es.array.filter.js"),U=e.n(fe),K=e("./node_modules/core-js/modules/es.array.find.js"),P=e.n(K),V=e("./node_modules/react/index.js"),T=e.n(V),B=e("./node_modules/kea/lib/index.esm.js"),E=e("./frontend/src/lib/api.ts"),J=e("./frontend/src/lib/constants.tsx"),je=e("./frontend/src/types.ts"),le=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),ee=e("./frontend/src/lib/utils/permissioning.ts"),_e=e("./frontend/src/scenes/userLogic.ts"),Q=e("./frontend/src/scenes/teamLogic.tsx"),Me=e("./frontend/src/lib/components/lemonToast.tsx");function Oe(D,n){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(D);n&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(D,f).enumerable})),i.push.apply(i,d)}return i}function W(D){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Oe(Object(i),!0).forEach(function(d){Ee()(D,d,i[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):Oe(Object(i)).forEach(function(d){Object.defineProperty(D,d,Object.getOwnPropertyDescriptor(i,d))})}return D}var ve=J.m.Admin,he=Object(B.kea)({path:["scenes","project","Settings","teamMembersLogic"],actions:{changeUserAccessLevel:function(n,i){return{user:n,newLevel:i}}},loaders:function(n){var i=n.values;return{explicitMembers:{__default:[],loadMembers:function(){var d=G()(L.a.mark(function v(){return L.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.b.get("api/projects/".concat(Q.a.values.currentTeamId,"/explicit_members/"));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},v)}));function f(){return d.apply(this,arguments)}return f}(),addMembers:function(){var d=G()(L.a.mark(function v(m){var a,u,se;return L.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=m.userUuids,u=m.level,r.next=3,Promise.all(a.map(function(t){return E.b.create("api/projects/".concat(Q.a.values.currentTeamId,"/explicit_members/"),{user_uuid:t,level:u})}));case 3:return se=r.sent,Me.d.success("Added ".concat(se.length," members").concat(se.length!==1&&"s"," to the project.")),r.abrupt("return",[].concat(ce()(i.explicitMembers),ce()(se)));case 6:case"end":return r.stop()}},v)}));function f(v){return d.apply(this,arguments)}return f}(),removeMember:function(){var d=G()(L.a.mark(function v(m){var a,u;return L.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=m.member,s.next=3,E.b.delete("api/projects/".concat(Q.a.values.currentTeamId,"/explicit_members/").concat(u.user.uuid,"/"));case 3:return Me.d.success(T.a.createElement(T.a.Fragment,null,u.user.uuid===((a=_e.a.values.user)===null||a===void 0?void 0:a.uuid)?"Left":"Removed ".concat(u.user.first_name," (").concat(u.user.email,") from")," ","the project.")),s.abrupt("return",i.explicitMembers.filter(function(r){return r.user.uuid!==u.user.uuid}));case 5:case"end":return s.stop()}},v)}));function f(v){return d.apply(this,arguments)}return f}()}}},selectors:function(n){var i=n.selectors;return{allMembers:[function(){return[Q.a.selectors.currentTeam,_e.a.selectors.hasAvailableFeature,i.explicitMembers,le.a.selectors.members]},function(d,f,v,m){return!(d!=null&&d.access_control)||!f(je.d.PROJECT_BASED_PERMISSIONING)?m.map(function(a){return W(W({},a),{},{explicit_team_level:null,organization_level:a.level})}):m.filter(function(a){var u=a.level;return u>=ve}).map(function(a){return W(W({},a),{},{explicit_team_level:null,organization_level:a.level})}).concat(v.filter(function(a){var u=a.parent_level;return u<ve}).map(function(a){return W(W({},a),{},{level:a.effective_level,explicit_team_level:a.level,organization_level:a.parent_level})}))}],allMembersLoading:[function(){return[i.explicitMembersLoading,le.a.selectors.membersLoading]},function(d,f){return d||f}],admins:[function(){return[i.allMembers]},function(d){return d.filter(function(f){var v=f.level;return v>=J.y.Admin})}],plainMembers:[function(){return[i.allMembers]},function(d){return d.filter(function(f){var v=f.level;return v<J.y.Admin})}],addableMembers:[function(){return[i.explicitMembers,le.a.selectors.members,_e.a.selectors.user]},function(d,f,v){return f.filter(function(m){var a=m.user;return a.uuid!==v.uuid}).map(function(m){var a=d.find(function(se){return se.user.uuid===m.user.uuid}),u;return a?u=Math.max(a.effective_level,m.level):u=m.level>=ve?m.level:null,W(W({},m),{},{level:u,explicit_team_level:a?a.level:null,organization_level:m.level})})}]}},listeners:function(n){var i=n.actions;return{changeUserAccessLevel:function(){var d=G()(L.a.mark(function v(m){var a,u;return L.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=m.user,u=m.newLevel,s.next=3,E.b.update("api/projects/".concat(Q.a.values.currentTeamId,"/explicit_members/").concat(a.uuid,"/"),{level:u});case 3:Me.d.success(T.a.createElement(T.a.Fragment,null,"Made ",T.a.createElement("b",null,a.first_name)," project ",ee.b.get(u))),i.loadMembers();case 5:case"end":return s.stop()}},v)}));function f(v){return d.apply(this,arguments)}return f}()}},events:function(n){var i=n.actions;return{afterMount:i.loadMembers}}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PayGateMini/PayGateMini.scss":function(me,C,e){var $=e("./node_modules/css-loader/dist/runtime/api.js");C=$(!1),C.push([me.i,".PayGateMini{display:flex;flex-direction:column;align-items:center;text-align:center;background:var(--bg-side);border-radius:var(--radius);padding:.75rem;font-size:.875rem}.PayGateMini__icon{display:flex;color:var(--warning);font-size:2rem}.PayGateMini__description{margin-top:.75rem;font-weight:600;color:var(--primary-alt)}.PayGateMini__cta{margin-bottom:.75rem}",""]),me.exports=C}}]);
