(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"./frontend/src/lib/components/Drawer.tsx":function(Z,j,e){"use strict";e.d(j,"a",function(){return R});var C=e("./node_modules/@babel/runtime/helpers/extends.js"),z=e.n(C),T=e("./node_modules/react/index.js"),x=e.n(T),_=e("./node_modules/antd/es/drawer/index.js"),U=e("./frontend/src/vars.ts");function R(t){return x.a.createElement(_.a,z()({},t,{zIndex:U.a.zDrawer}))}try{R.displayName="Drawer",R.__docgenInfo={description:"",displayName:"Drawer",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Drawer.tsx#Drawer"]={docgenInfo:R.__docgenInfo,name:"Drawer",path:"frontend/src/lib/components/Drawer.tsx#Drawer"})}catch(t){}},"./frontend/src/lib/components/Property.tsx":function(Z,j,e){"use strict";e.d(j,"a",function(){return V});var C=e("./node_modules/core-js/modules/es.object.to-string.js"),z=e.n(C),T=e("./node_modules/core-js/modules/es.regexp.exec.js"),x=e.n(T),_=e("./node_modules/core-js/modules/es.regexp.to-string.js"),U=e.n(_),R=e("./node_modules/core-js/modules/es.string.replace.js"),t=e.n(R),S=e("./node_modules/@babel/runtime/helpers/typeof.js"),k=e.n(S),Q=e("./node_modules/react/index.js"),le=e.n(Q);function V(m){var M=m.value;return le.a.createElement("span",{title:M},k()(M)==="object"?JSON.stringify(M):M&&M.toString().replace(/(^\w+:|^)\/\//,""))}try{V.displayName="Property",V.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:V.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(m){}},"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(Z,j,e){"use strict";e.d(j,"a",function(){return U});var C=e("./frontend/src/lib/components/PageHeader.tsx"),z=e("./node_modules/react/index.js"),T=e.n(z),x=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),_=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx");function U(R){var t=R.activeTab,S=R.hideTabs;return T.a.createElement(T.a.Fragment,null,T.a.createElement(C.a,{title:T.a.createElement("div",{className:"flex-center"},"Data Management",T.a.createElement(_.a,{type:"warning",style:{marginLeft:6,lineHeight:"1.4em"}},"BETA")),caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!S&&T.a.createElement(x.a,{tab:t}))}try{U.displayName="DataManagementPageHeader",U.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:U.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch(R){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(Z,j,e){"use strict";e.d(j,"b",function(){return N}),e.d(j,"a",function(){return ce});var C=e("./node_modules/core-js/modules/es.array.iterator.js"),z=e.n(C),T=e("./node_modules/core-js/modules/es.array.map.js"),x=e.n(T),_=e("./node_modules/core-js/modules/es.object.entries.js"),U=e.n(_),R=e("./node_modules/core-js/modules/es.object.from-entries.js"),t=e.n(R),S=e("./node_modules/core-js/modules/es.object.to-string.js"),k=e.n(S),Q=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),le=e.n(Q),V=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),m=e.n(V),M=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),O=e.n(M),E=e("./node_modules/react/index.js"),y=e.n(E),L=e("./node_modules/kea/lib/index.esm.js"),F=e("./node_modules/antd/es/tabs/index.js"),q=e("./frontend/src/scenes/urls.ts"),ee=e("./frontend/src/lib/components/Tooltip.tsx"),d=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),de,N;(function(w){w.Actions="actions",w.EventDefinitions="events",w.EventPropertyDefinitions="properties"})(N||(N={}));var Ee=(de={},O()(de,N.EventPropertyDefinitions,q.a.eventPropertyDefinitions()),O()(de,N.EventDefinitions,q.a.eventDefinitions()),O()(de,N.Actions,q.a.actions()),de),_e=Object(L.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(Y){return{tab:Y}}},reducers:{tab:[N.EventDefinitions,{setTab:function(Y,X){var G=X.tab;return G}}]},actionToUrl:function(){return{setTab:function(X){var G=X.tab;return Ee[G]||q.a.events()}}},urlToAction:function(Y){var X=Y.actions,G=Y.values;return Object.fromEntries(Object.entries(Ee).map(function(ne){var te=m()(ne,2),pe=te[0],ie=te[1];return[ie,function(){G.tab!==pe&&X.setTab(pe)}]}))}});function ce(w){var Y=w.tab,X=Object(L.useActions)(_e),G=X.setTab;return y.a.createElement(F.a,{tabPosition:"top",animated:!1,activeKey:Y,onTabClick:function(te){return G(te)}},y.a.createElement(F.a.TabPane,{tab:y.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:N.EventDefinitions}),y.a.createElement(F.a.TabPane,{tab:y.a.createElement("span",{"data-attr":"data-management-actions-tab"},"Actions",y.a.createElement(ee.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},y.a.createElement(d.a,{style:{marginLeft:8,marginRight:0}}))),key:N.Actions}),y.a.createElement(F.a.TabPane,{tab:y.a.createElement("span",{"data-attr":"data-management-event-properties-tab"},"Properties",y.a.createElement(ee.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},y.a.createElement(d.a,{style:{marginLeft:8,marginRight:0}}))),key:N.EventPropertyDefinitions}))}try{ce.displayName="DataManagementPageTabs",ce.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:ce.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(w){}},"./frontend/src/scenes/events/UsageDisabledWarning.tsx":function(Z,j,e){"use strict";e.d(j,"a",function(){return x});var C=e("./node_modules/antd/es/alert/index.js"),z=e("./node_modules/react/index.js"),T=e.n(z);function x(_){var U=_.tab;return T.a.createElement(C.a,{type:"info",showIcon:!0,message:"".concat(U," are not enabled for your instance."),description:T.a.createElement(T.a.Fragment,null,"You will still see the list of events and properties, but usage information will be unavailable. If you want to enable event usage please set the follow environment variable:"," ",T.a.createElement("pre",{style:{display:"inline"}},"ASYNC_EVENT_PROPERTY_USAGE=1"),". Please note, enabling this environment variable ",T.a.createElement("b",null,"may increase load considerably in your infrastructure"),", particularly if you have a large volume of events.")})}try{x.displayName="UsageDisabledWarning",x.__docgenInfo={description:"",displayName:"UsageDisabledWarning",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"]={docgenInfo:x.__docgenInfo,name:"UsageDisabledWarning",path:"frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"})}catch(_){}},"./frontend/src/scenes/events/VolumeTable.scss":function(Z,j,e){"use strict";var C=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),z=e.n(C),T=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/VolumeTable.scss"),x=e.n(T),_={};_.insert="head",_.singleton=!1;var U=z()(x.a,_),R=x.a.locals||{}},"./frontend/src/scenes/events/VolumeTable.tsx":function(Z,j,e){"use strict";e.d(j,"a",function(){return ie});var C=e("./node_modules/core-js/modules/es.symbol.js"),z=e("./node_modules/core-js/modules/es.symbol.description.js"),T=e("./node_modules/core-js/modules/es.array.map.js"),x=e("./node_modules/core-js/modules/es.function.name.js"),_=e("./node_modules/core-js/modules/es.regexp.exec.js"),U=e("./node_modules/core-js/modules/es.string.ends-with.js"),R=e("./node_modules/core-js/modules/es.string.search.js"),t=e("./node_modules/core-js/modules/es.string.starts-with.js"),S=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),k=e.n(S),Q=e("./node_modules/antd/es/button/index.js"),le=e("./node_modules/antd/es/input/index.js"),V=e("./node_modules/@ant-design/icons/es/icons/WarningOutlined.js"),m=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),M=e("./node_modules/@ant-design/icons/es/icons/ArrowRightOutlined.js"),O=e("./node_modules/antd/lib/table/index.js"),E=e.n(O),y=e("./node_modules/fuse.js/dist/fuse.esm.js"),L=e("./node_modules/kea/lib/index.esm.js"),F=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),q=e("./frontend/src/lib/utils.tsx"),ee=e("./node_modules/react/index.js"),d=e.n(ee),de=e("./frontend/src/scenes/userLogic.ts"),N=e("./frontend/src/types.ts"),Ee=e("./frontend/src/scenes/events/VolumeTable.scss"),_e=e("./frontend/src/scenes/events/definitions/definitionDrawerLogic.ts"),ce=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),w=e("./frontend/src/scenes/events/Owner.tsx"),Y=e("./node_modules/antd/es/row/index.js"),X=e("./frontend/src/models/eventDefinitionsModel.ts");function G($){var I=$.id,H=$.description,W=$.type,fe=Object(L.useActions)(X.a),ue=fe.updateDescription,ve=Object(ee.useState)(H),ae=k()(ve,2),re=ae[0],J=ae[1],se=Object(ee.useState)(!1),me=k()(se,2),b=me[0],g=me[1];return Object(ee.useEffect)(function(){J(H)},[H]),d.a.createElement(d.a.Fragment,null,d.a.createElement(Y.a,null,d.a.createElement(le.a.TextArea,{value:re||"",style:{paddingLeft:0},bordered:b,onClick:function(c){c.stopPropagation(),g(!0)},placeholder:"Click to add description",onChange:function(c){return J(c.target.value)},onKeyDown:function(c){c.key==="Enter"&&(g(!1),ue(I,re,W))},autoSize:!0})),b&&d.a.createElement(Y.a,{style:{float:"right",marginTop:8}},d.a.createElement(Q.a,{size:"small",style:{marginRight:8},onClick:function(c){c.stopPropagation(),g(!1),J(H)}},"Cancel"),d.a.createElement(Q.a,{type:"primary",size:"small",onClick:function(c){c.stopPropagation(),J(re),g(!1),ue(I,re,W)}},"Save")))}try{G.displayName="VolumeTableRecordDescription",G.__docgenInfo={description:"",displayName:"VolumeTableRecordDescription",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/definitions/VolumeTableRecordDescription.tsx#VolumeTableRecordDescription"]={docgenInfo:G.__docgenInfo,name:"VolumeTableRecordDescription",path:"frontend/src/scenes/events/definitions/VolumeTableRecordDescription.tsx#VolumeTableRecordDescription"})}catch($){}var ne=e("./frontend/src/lib/components/Tooltip.tsx"),te=function(I){return!!F.f.event[I]},pe=function(I,H){return new y.a(I,{keys:["eventOrProp.name"],threshold:.3}).search(H).map(function(W){return W.item})};function ie($){var I=$.type,H=$.data,W=Object(ee.useState)(!1),fe=k()(W,2),ue=fe[0],ve=fe[1],ae=Object(ee.useState)([]),re=k()(ae,2),J=re[0],se=re[1],me=Object(L.useValues)(de.a),b=me.hasAvailableFeature,g=Object(L.useActions)(_e.a),K=g.openDrawer,c=b(N.c.INGESTION_TAXONOMY),A=[{title:"".concat(Object(q.j)(I)," name"),render:function(l,s){var r;return d.a.createElement("span",null,d.a.createElement("div",{style:{display:"flex",alignItems:"baseline",paddingBottom:4}},d.a.createElement("span",{className:"ph-no-capture",style:{paddingRight:8}},d.a.createElement(F.b,{style:c?{fontWeight:"bold"}:{},value:s.eventOrProp.name})),b(N.c.TAGGING)?d.a.createElement(ce.a,{tags:s.eventOrProp.tags||[],staticOnly:!0}):null),c&&(te(s.eventOrProp.name)?null:d.a.createElement(G,{id:s.eventOrProp.id,description:s.eventOrProp.description,type:I})),(r=s.warnings)===null||r===void 0?void 0:r.map(function(n){return d.a.createElement(ne.a,{key:n,color:"orange",title:d.a.createElement(d.a.Fragment,null,d.a.createElement("b",null,"Warning!")," ",n)},d.a.createElement(V.a,{style:{color:"var(--warning)",marginLeft:6}}))}))},sorter:function(l,s){return(""+l.eventOrProp.name).localeCompare(s.eventOrProp.name||"")},filters:[{text:"Has warnings",value:"warnings"},{text:"No warnings",value:"noWarnings"}],onFilter:function(l,s){return l==="warnings"?!!s.warnings.length:!s.warnings.length}},I==="event"&&c?{title:"Owner",render:function(l,s){var r,n=(r=s.eventOrProp)===null||r===void 0?void 0:r.owner;return te(s.eventOrProp.name)?d.a.createElement(d.a.Fragment,null,"-"):d.a.createElement(w.a,{user:n})}}:{},I==="event"?{title:function(){return d.a.createElement(ne.a,{placement:"right",title:"Total number of events over the last 30 days. Can be delayed by up to an hour."},"30 day volume (delayed by up to an hour)",d.a.createElement(m.a,{className:"info-indicator"}))},render:function(l,s){return d.a.createElement("span",{className:"ph-no-capture"},Object(q.q)(s.eventOrProp.volume_30_day))},sorter:function(l,s){return l.eventOrProp.volume_30_day==s.eventOrProp.volume_30_day,(l.eventOrProp.volume_30_day||-1)-(s.eventOrProp.volume_30_day||-1)}}:{},{title:function(){return d.a.createElement(ne.a,{placement:"right",title:"Number of queries in PostHog that included a filter on this ".concat(I)},"30 day queries (delayed by up to an hour)",d.a.createElement(m.a,{className:"info-indicator"}))},render:function(l,s){return d.a.createElement("span",{className:"ph-no-capture"},Object(q.q)(s.eventOrProp.query_usage_30_day))},sorter:function(l,s){return l.eventOrProp.query_usage_30_day==s.eventOrProp.query_usage_30_day,(l.eventOrProp.query_usage_30_day||-1)-(s.eventOrProp.query_usage_30_day||-1)}},c?{render:function(l,s){return d.a.createElement(d.a.Fragment,null,te(s.eventOrProp.name)?null:d.a.createElement(Q.a,{type:"link",icon:d.a.createElement(M.a,{style:{color:"#5375FF"}}),onClick:function(){return K(I,s.eventOrProp.id)}}))}}:{}];return Object(ee.useEffect)(function(){se(H.map(function(o){var l,s,r={eventOrProp:o};return r.warnings=[],!((l=o.name)===null||l===void 0)&&l.endsWith(" ")&&r.warnings.push("This ".concat(I," ends with a space.")),!((s=o.name)===null||s===void 0)&&s.startsWith(" ")&&r.warnings.push("This ".concat(I," starts with a space.")),r})||[])},[H]),d.a.createElement(d.a.Fragment,null,d.a.createElement(le.a.Search,{allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},onChange:function(l){ve(l.target.value)},placeholder:"Filter ".concat(I==="property"?"properties":"events","....")}),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(E.a,{dataSource:ue?pe(J,ue):J,columns:A,rowKey:function(l){return l.eventOrProp.name},size:"small",style:{marginBottom:"4rem"},pagination:{pageSize:100,hideOnSinglePage:!0},onRow:function(l){return c&&!te(l.eventOrProp.name)?{onClick:function(){return K(I,l.eventOrProp.id)},style:{cursor:"pointer"}}:{}}}))}try{ie.displayName="VolumeTable",ie.__docgenInfo={description:"",displayName:"VolumeTable",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"property"'},{value:'"event"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(PropertyDefinition | EventDefinition)[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/VolumeTable.tsx#VolumeTable"]={docgenInfo:ie.__docgenInfo,name:"VolumeTable",path:"frontend/src/scenes/events/VolumeTable.tsx#VolumeTable"})}catch($){}},"./frontend/src/scenes/events/definitions/DefinitionDrawer.tsx":function(Z,j,e){"use strict";e.d(j,"a",function(){return me});var C=e("./node_modules/core-js/modules/es.array.filter.js"),z=e("./node_modules/core-js/modules/es.array.includes.js"),T=e("./node_modules/core-js/modules/es.function.name.js"),x=e("./node_modules/core-js/modules/es.string.includes.js"),_=e("./node_modules/kea/lib/index.esm.js"),U=e("./frontend/src/lib/components/Drawer.tsx"),R=e("./node_modules/react/index.js"),t=e.n(R),S=e("./frontend/src/scenes/events/definitions/definitionDrawerLogic.ts"),k=e("./node_modules/antd/lib/typography/Title.js"),Q=e.n(k),le=e("./frontend/src/scenes/events/VolumeTable.scss"),V=e("./node_modules/antd/es/collapse/index.js"),m=e("./node_modules/antd/es/button/index.js"),M=e("./node_modules/antd/es/alert/index.js"),O=e("./node_modules/antd/es/row/index.js"),E=e("./node_modules/antd/es/col/index.js"),y=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),L=e("./frontend/src/lib/utils.tsx"),F=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),q=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),ee=e("./node_modules/core-js/modules/es.symbol.js"),d=e("./node_modules/core-js/modules/es.symbol.description.js"),de=e("./node_modules/core-js/modules/es.array.concat.js"),N=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ee=e.n(N),_e=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ce=e.n(_e),w=e("./node_modules/antd/es/input/index.js"),Y=e("./node_modules/antd/es/table/index.js"),X=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),G=e("./frontend/src/types.ts"),ne=e("./frontend/src/scenes/userLogic.ts");function te(){var b,g=Object(_.useValues)(S.a),K=g.eventPropertiesDefinitions,c=g.eventsSnippet,A=g.eventPropertiesDefinitionTags,o=g.tagLoading,l=Object(_.useActions)(S.a),s=l.setEventPropertyDescription,r=l.saveAll,n=l.setEventPropertyDefinitionUpdateList,a=l.setEventPropertyDefinition,i=Object(_.useValues)(ne.a),f=i.hasAvailableFeature,u=(b=c[0])===null||b===void 0?void 0:b.properties,p=[{title:"Property",key:"property",render:function(P){var D=P.name;return t.a.createElement("span",{className:"text-default"},D)}},{title:"Description",key:"description",render:function(P){var D=P.description,v=P.id,oe=Object(R.useState)(D),B=Ee()(oe,2),ge=B[0],Oe=B[1],Pe=Object(X.a)(function(De){s(De,v)},200);return t.a.createElement(w.a.TextArea,{placeholder:"Add description",value:ge||"",onChange:function(ye){Oe(ye.target.value),Pe(ye.target.value)},onKeyDown:function(ye){ye.key==="Enter"&&r()}})}}].concat(ce()(f(G.c.TAGGING)?[{title:"Tags",key:"tags",render:function(P){var D=P.id,v=P.tags;return t.a.createElement(y.a,{id:D,tags:v||[],onChange:function(B,ge){n(D),a({tags:ge},D)},saving:o,tagsAvailable:A==null?void 0:A.filter(function(oe){return!(v!=null&&v.includes(oe))})})}}]:[]),[{title:"Example",key:"example",render:function(P){var D=P.name,v=u[D];return v=Array.isArray(v)||v instanceof Object?JSON.stringify(v).substr(0,140):v,t.a.createElement("div",{style:{backgroundColor:"#F0F0F0",padding:"4px, 15px",textAlign:"center"}},t.a.createElement("span",{style:{fontSize:10,fontWeight:400,fontFamily:"monaco"}},v))}}]);return t.a.createElement(t.a.Fragment,null,t.a.createElement(O.a,{style:{paddingBottom:16}},t.a.createElement("span",{className:"text-default text-muted"},"Top properties that are sent with this event. Please note that description and tags are shared across events. Posthog properties are ",t.a.createElement("b",null,"excluded")," from this list.")),t.a.createElement(Y.a,{dataSource:K,columns:p,rowKey:function(P){return P.id},size:"small",tableLayout:"fixed",pagination:{pageSize:5,hideOnSinglePage:!0}}))}var pe=e("./node_modules/core-js/modules/es.array.find.js"),ie=e("./node_modules/core-js/modules/es.array.map.js"),$=e("./node_modules/antd/es/select/index.js"),I=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),H=e("./frontend/src/scenes/events/Owner.tsx");function W(b){var g=b.owner,K=Object(_.useValues)(I.a),c=K.members,A=Object(_.useActions)(S.a),o=A.changeOwner;return t.a.createElement($.a,{className:"owner-select",placeholder:t.a.createElement(H.a,{user:g}),style:{minWidth:200},dropdownClassName:"owner-option",onChange:function(s){var r,n=(r=c.find(function(a){return a.user.id===s}))===null||r===void 0?void 0:r.user;n&&o(n)}},c.map(function(l){return t.a.createElement($.a.Option,{key:l.user.id,value:l.user.id},t.a.createElement(H.a,{user:l.user}))}))}try{W.displayName="DefinitionOwnerDropdown",W.__docgenInfo={description:"",displayName:"DefinitionOwnerDropdown",props:{owner:{defaultValue:null,description:"",name:"owner",required:!0,type:{name:"UserBasicType | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/definitions/DefinitionOwnerDropdown.tsx#DefinitionOwnerDropdown"]={docgenInfo:W.__docgenInfo,name:"DefinitionOwnerDropdown",path:"frontend/src/scenes/events/definitions/DefinitionOwnerDropdown.tsx#DefinitionOwnerDropdown"})}catch(b){}function fe(){var b=Object(_.useValues)(S.a),g=b.description,K=Object(_.useActions)(S.a),c=K.setDescription,A=K.saveAll;return t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{style:{flexDirection:"column",minWidth:300}},t.a.createElement("h4",{className:"l4"},"Description"),t.a.createElement(w.a.TextArea,{style:{minHeight:108,marginBottom:8},placeholder:"Add description",value:g||"",onChange:function(l){c(l.target.value)},onKeyDown:function(l){l.key==="Enter"&&A()}})))}var ue=e("./frontend/src/lib/components/Property.tsx"),ve=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),ae=e("./frontend/src/scenes/persons/PersonHeader.tsx");function re(){var b=Object(_.useValues)(S.a),g=b.eventsSnippet,K=[{title:"Person",key:"person",render:function(A){var o=A.person;return o?t.a.createElement(ae.a,{withIcon:!0,person:o}):{props:{colSpan:0}}}},{title:"URL",key:"url",eventProperties:["$current_url","$screen_name"],span:4,render:function(A){var o=A.properties;return o?t.a.createElement(ue.a,{value:o.$current_url?o.$current_url:o.$screen_name}):{props:{colSpan:0}}},ellipsis:!0},{title:"Source",key:"source",render:function(A){var o=A.properties;return o?t.a.createElement(ue.a,{value:o.$browser}):{props:{colSpan:0}}}},{title:"When",key:"when",render:function(A){var o=A.timestamp;return o?t.a.createElement(ve.b,{time:o,showSeconds:!0}):{props:{colSpan:0}}},ellipsis:!0}];return t.a.createElement(t.a.Fragment,null,g&&t.a.createElement("div",{style:{fontWeight:400,paddingTop:15}},t.a.createElement(Y.a,{dataSource:g,columns:K,key:"default",rowKey:function(A){return A.id},size:"small",pagination:!1})))}var J=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),se=e("./frontend/src/lib/components/Tooltip.tsx");function me(){var b,g=Object(_.useValues)(S.a),K=g.drawerState,c=g.definition,A=g.tagLoading,o=g.type,l=g.eventDefinitionTags,s=g.propertyDefinitionTags,r=Object(_.useActions)(S.a),n=r.closeDrawer,a=r.setDefinition,i=r.saveAll,f=Object(_.useValues)(q.a),u=f.preflight,p=Object(_.useValues)(ne.a),h=p.hasAvailableFeature,P=V.a.Panel,D=o==="event"?l:s;return t.a.createElement(t.a.Fragment,null,c&&t.a.createElement("div",{className:"definition-drawer"},t.a.createElement(U.a,{placement:"right",headerStyle:{paddingBottom:0},title:t.a.createElement(Q.a,{level:3},c.name),visible:K,onClose:n,width:"60vw",bodyStyle:{padding:14,paddingTop:0},className:"definition-drawer",footer:t.a.createElement(m.a,{style:{float:"right"},type:"primary",onClick:i},"Save")},u&&!(u!=null&&u.is_event_property_usage_enabled)?t.a.createElement("div",{style:{marginTop:8}},t.a.createElement(J.a,{tab:o==="event"?"Events Stats":"Property Stats"})):c.volume_30_day===null&&t.a.createElement(t.a.Fragment,null,t.a.createElement(M.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later."})),t.a.createElement(V.a,{defaultActiveKey:["1"],expandIconPosition:"right",ghost:!0,style:{borderBottom:"1px solid #D9D9D9"}},t.a.createElement(P,{header:"General",key:"1",className:"l3"},t.a.createElement(O.a,{className:"panel-wrapper"},t.a.createElement(E.a,{style:{marginRight:14}},t.a.createElement(fe,null)),t.a.createElement(E.a,null,h(G.c.TAGGING)&&t.a.createElement(O.a,null,t.a.createElement(E.a,null,t.a.createElement("h4",{className:"l4"},"Tags"),t.a.createElement(y.a,{tags:c.tags||[],onChange:function(oe,B){return a({tags:B})},saving:A,tagsAvailable:D==null?void 0:D.filter(function(v){var oe;return!(!((oe=c.tags)===null||oe===void 0)&&oe.includes(v))})}))),o==="event"&&t.a.createElement(O.a,null,t.a.createElement("div",{style:{paddingTop:16}},t.a.createElement("h4",{className:"l4"},"Owner"),t.a.createElement(W,{owner:c.owner||null}))))),t.a.createElement(O.a,{className:"detail-status"},o==="event"&&t.a.createElement("div",{style:{paddingRight:32,textAlign:"center"}},t.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",textAlign:"center"}},t.a.createElement("h4",{className:"l4",style:{marginBottom:0}},"Total count (30 days)"),t.a.createElement(se.a,{placement:"right",title:"Total number of events over the last 30 days. Can be delayed by up to an hour."},t.a.createElement(F.a,{className:"info-indicator"}))),t.a.createElement("span",null,c.volume_30_day||"-")),t.a.createElement("div",{style:{textAlign:"center"}},t.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},t.a.createElement("h4",{className:"l4",style:{marginBottom:0}},"Query Usage (30 days)"),t.a.createElement(se.a,{placement:"right",title:"Number of queries in PostHog that included a filter on this ".concat(o)},t.a.createElement(F.a,{className:"info-indicator"}))),t.a.createElement("span",null,c.query_usage_30_day||"-")),t.a.createElement("div",null,t.a.createElement("h4",{className:"l4"},"Last modified"),t.a.createElement("span",null,Object(L.M)(c.updated_at||null))),t.a.createElement("div",null,t.a.createElement("h4",{className:"l4"},"Last modified by"),t.a.createElement("span",null,((b=c.updated_by)===null||b===void 0?void 0:b.first_name)||"-"))))),o==="event"&&t.a.createElement(V.a,{defaultActiveKey:["2"],expandIconPosition:"right",ghost:!0},t.a.createElement(P,{header:"Properties",key:"2",className:"l3"},t.a.createElement(te,null))),t.a.createElement(V.a,{style:{paddingBottom:32},defaultActiveKey:["3"],expandIconPosition:"right",ghost:!0},t.a.createElement(P,{header:"Recent",key:"3",className:"l3 events-table"},t.a.createElement("span",{className:"text-muted",style:{fontWeight:400,fontSize:14}},"Most recent events received"),t.a.createElement(re,null))))))}},"./frontend/src/scenes/events/definitions/definitionDrawerLogic.ts":function(Z,j,e){"use strict";e.d(j,"a",function(){return l});var C=e("./node_modules/core-js/modules/es.symbol.js"),z=e.n(C),T=e("./node_modules/core-js/modules/es.symbol.description.js"),x=e.n(T),_=e("./node_modules/core-js/modules/es.array.concat.js"),U=e.n(_),R=e("./node_modules/core-js/modules/es.array.filter.js"),t=e.n(R),S=e("./node_modules/core-js/modules/es.array.find.js"),k=e.n(S),Q=e("./node_modules/core-js/modules/es.array.flat-map.js"),le=e.n(Q),V=e("./node_modules/core-js/modules/es.array.for-each.js"),m=e.n(V),M=e("./node_modules/core-js/modules/es.array.includes.js"),O=e.n(M),E=e("./node_modules/core-js/modules/es.array.iterator.js"),y=e.n(E),L=e("./node_modules/core-js/modules/es.array.map.js"),F=e.n(L),q=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),ee=e.n(q),d=e("./node_modules/core-js/modules/es.function.name.js"),de=e.n(d),N=e("./node_modules/core-js/modules/es.object.keys.js"),Ee=e.n(N),_e=e("./node_modules/core-js/modules/es.object.to-string.js"),ce=e.n(_e),w=e("./node_modules/core-js/modules/es.string.includes.js"),Y=e.n(w),X=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),G=e.n(X),ne=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),te=e.n(ne),pe=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ie=e.n(pe),$=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=e.n($),H=e("./node_modules/@babel/runtime/regenerator/index.js"),W=e.n(H),fe=e("./node_modules/regenerator-runtime/runtime.js"),ue=e.n(fe),ve=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),ae=e.n(ve),re=e("./node_modules/kea/lib/index.esm.js"),J=e("./frontend/src/lib/api.ts"),se=e("./frontend/src/lib/utils.tsx"),me=e("./frontend/src/models/eventDefinitionsModel.ts"),b=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),g=e("./frontend/src/models/propertyDefinitionsModel.ts"),K=e("./frontend/src/scenes/teamLogic.ts"),c=e("./frontend/src/scenes/urls.ts");function A(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),n.push.apply(n,a)}return n}function o(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?A(Object(n),!0).forEach(function(a){I()(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}var l=Object(re.kea)({path:["scenes","events","definitions","definitionDrawerLogic"],actions:function(){return{openDrawer:function(n,a){return{type:n,id:a}},setDrawerType:function(n){return{type:n}},setDescription:function(n){return{description:n}},changeOwner:function(n){return{owner:n}},setDefinition:function(n){return{definition:n}},setEventPropertyDescription:function(n,a){return{description:n,id:a}},setEventPropertyDefinition:function(n,a){return{propertyDefinition:n,id:a}},setEventPropertyDefinitionUpdateList:function(n){return{id:n}},closeDrawer:!0,setTagLoading:function(n){return{loading:n}},saveAll:!0,setGraphResults:function(n){return{results:n}},setVisibilityById:function(n){return{entry:n}}}},loaders:function(r){var n=r.actions,a=r.values;return{definition:[null,{loadDefinition:function(){var i=ae()(W.a.mark(function u(p){var h,P;return W.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return h=p.type,P=p.id,v.next=3,J.a.get("api/projects/@current/".concat(h,"_definitions/").concat(P));case 3:return v.abrupt("return",v.sent);case 4:case"end":return v.stop()}},u)}));function f(u){return i.apply(this,arguments)}return f}(),saveDefinition:function(){var i=ae()(W.a.mark(function u(p){var h,P,D,v;return W.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return h=p.definition,P=p.type,P==="event"&&(h.owner=((D=h.owner)===null||D===void 0?void 0:D.id)||null,h.description=a.description),P==="property"&&a.type==="property"&&(h.description=a.description),B.next=5,J.a.update("api/projects/@current/".concat(P,"_definitions/").concat(h.id),h);case 5:return v=B.sent,n.saveDefinitionSuccess(v),B.abrupt("return",v);case 8:case"end":return B.stop()}},u)}));function f(u){return i.apply(this,arguments)}return f}(),closeDrawer:function(){return null}}],eventsSnippet:[[],{loadEventsSnippet:function(){var i=ae()(W.a.mark(function u(p){var h,P,D,v;return W.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return h=a.type==="property"?[{key:p==null?void 0:p.name,value:"is_set",operator:"is_set",type:"event"}]:{},P=a.type==="event"?p==null?void 0:p.name:null,D=Object(se.Ab)(o(o({properties:h},{event:P}),{},{orderBy:["-timestamp"],limit:5})),B.next=5,J.a.get("api/projects/".concat(K.a.values.currentTeamId,"/events/?").concat(D));case 5:return v=B.sent,a.type==="property"&&n.loadEventsSnippetSuccess(v.results),B.abrupt("return",v.results);case 8:case"end":return B.stop()}},u)}));function f(u){return i.apply(this,arguments)}return f}()}],eventPropertiesDefinitions:[[],{loadEventPropertiesDefinitions:function(){var i=ae()(W.a.mark(function u(p){var h;return W.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,J.a.get("api/projects/@current/property_definitions/?properties=".concat(p));case 2:return h=D.sent,D.abrupt("return",h.results);case 4:case"end":return D.stop()}},u)}));function f(u){return i.apply(this,arguments)}return f}()}]}},reducers:function(){return{drawerState:[!1,{openDrawer:function(){return!0},closeDrawer:function(){return!1}}],description:["",{setDescription:function(n,a){var i=a.description;return i}}],definition:[null,{setDefinition:function(n,a){var i=a.definition;return o(o({},n),i)}}],tagLoading:[!1,{setTagLoading:function(n,a){var i=a.loading;return i}}],type:["",{setDrawerType:function(n,a){var i=a.type;return i}}],eventPropertiesDefinitions:[[],{setEventPropertyDefinition:function(n,a){var i=a.propertyDefinition,f=a.id,u=n.map(function(p){return p.id===f?o(o({},p),i):p});return u}}],editedEventPropertyDefinitions:[[],{setEventPropertyDefinitionUpdateList:function(n,a){var i=a.id;return i&&!n.includes(i)?[].concat(ie()(n),[i]):ie()(n)}}],graphResults:[[],{setGraphResults:function(n,a){var i=a.results;return i}}]}},selectors:function(){return{eventDefinitionTags:[function(){return[me.a.selectors.eventDefinitions]},function(r){var n=r.flatMap(function(a){var i=a.tags;return i}).filter(function(a){return!!a});return Object(se.Cb)(n,function(a){return a}).sort()}],eventPropertiesDefinitionTags:[function(r){return[r.eventPropertiesDefinitions]},function(r){var n=r.flatMap(function(a){var i=a.tags;return i}).filter(function(a){return!!a});return Object(se.Cb)(n,function(a){return a}).sort()}],propertyDefinitionTags:[function(){return[g.a.selectors.propertyDefinitions]},function(r){var n=r.flatMap(function(a){var i=a.tags;return i}).filter(function(a){return!!a});return Object(se.Cb)(n,function(a){return a}).sort()}]}},listeners:function(r){var n=r.actions,a=r.values;return{openDrawer:function(f){var u=f.type,p=f.id;n.setDrawerType(u),n.loadDefinition({type:u,id:p})},loadDefinitionSuccess:function(f){var u=f.definition;n.loadEventsSnippet(u),n.setDescription((u==null?void 0:u.description)||"")},loadEventsSnippetSuccess:function(f){var u=f.eventsSnippet,p=Object.keys(u[0].properties).filter(function(h){return!b.f.event[h]});n.loadEventPropertiesDefinitions(p)},saveDefinitionSuccess:function(f){var u=f.definition;a.type==="event"?me.a.actions.updateEventDefinition(u):g.a.actions.updatePropertyDefinition(u)},changeOwner:function(f){var u=f.owner;n.setDefinition({owner:u})},setEventPropertyDescription:function(f){var u=f.description,p=f.id;n.setEventPropertyDefinition({description:u},p),n.setEventPropertyDefinitionUpdateList(p)},saveAll:function(){n.saveDefinition({definition:o({},a.definition),type:a.type}),a.editedEventPropertyDefinitions.forEach(function(f){var u=a.eventPropertiesDefinitions.find(function(p){return p.id===f});n.saveDefinition({definition:o({},u),type:"property"})}),n.closeDrawer()}}},actionToUrl:function(r){var n=r.values;return{openDrawer:function(i){var f=i.type,u=i.id;return f==="property"?c.a.eventPropertyDefinition(u):c.a.eventDefinition(u)},closeDrawer:function(){return n.type==="property"?c.a.eventPropertyDefinitions():c.a.eventDefinitions()}}},urlToAction:function(r){var n=r.actions;return{"/data-management/events/:id":function(i){var f=i.id;f&&n.openDrawer("event",f)},"/data-management/event-properties/:id":function(i){var f=i.id;f&&n.openDrawer("property",f)}}}})},"./node_modules/antd/lib/typography/Title.js":function(Z,j,e){"use strict";var C=e("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),z=e("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var T=C(e("./node_modules/@babel/runtime/helpers/extends.js")),x=S(e("./node_modules/react/index.js")),_=C(e("./node_modules/antd/lib/_util/devWarning.js")),U=C(e("./node_modules/antd/lib/typography/Base.js")),R=e("./node_modules/antd/lib/_util/type.js");function t(m){if(typeof WeakMap!="function")return null;var M=new WeakMap,O=new WeakMap;return(t=function(y){return y?O:M})(m)}function S(m,M){if(!M&&m&&m.__esModule)return m;if(m===null||z(m)!=="object"&&typeof m!="function")return{default:m};var O=t(M);if(O&&O.has(m))return O.get(m);var E={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in m)if(L!=="default"&&Object.prototype.hasOwnProperty.call(m,L)){var F=y?Object.getOwnPropertyDescriptor(m,L):null;F&&(F.get||F.set)?Object.defineProperty(E,L,F):E[L]=m[L]}return E.default=m,O&&O.set(m,E),E}var k=function(m,M){var O={};for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&M.indexOf(E)<0&&(O[E]=m[E]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,E=Object.getOwnPropertySymbols(m);y<E.length;y++)M.indexOf(E[y])<0&&Object.prototype.propertyIsEnumerable.call(m,E[y])&&(O[E[y]]=m[E[y]]);return O},Q=(0,R.tupleNum)(1,2,3,4,5),le=function(M){var O=M.level,E=O===void 0?1:O,y=k(M,["level"]),L;return Q.indexOf(E)!==-1?L="h".concat(E):((0,_.default)(!1,"Typography.Title","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value. And `5` need 4.6.0+ version."),L="h1"),x.createElement(U.default,(0,T.default)({},y,{component:L}))},V=le;j.default=V},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/VolumeTable.scss":function(Z,j,e){var C=e("./node_modules/css-loader/dist/runtime/api.js");j=C(!1),j.push([Z.i,".definition-drawer .ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding-top:0}.definition-drawer .definition-description.ant-input:-moz-placeholder-shown{font-style:italic}.definition-drawer .definition-description.ant-input:-ms-input-placeholder{font-style:italic}.definition-drawer .definition-description.ant-input:placeholder-shown{font-style:italic}.definition-drawer .panel-wrapper{display:flex;flex-direction:row;padding-top:0}.definition-drawer .panel-wrapper span{font-weight:400;font-size:14px}.definition-drawer .owner-select .ant-select-selector .ant-select-selection-placeholder{color:#000;font-weight:400}.definition-drawer .detail-status{display:flex;flex-direction:row;justify-content:space-evenly;margin-top:30px;text-align:center}.definition-drawer .detail-status .ant-typography{margin-bottom:0}.definition-drawer .detail-status span{font-weight:400;font-size:14px}",""]),Z.exports=j}}]);
