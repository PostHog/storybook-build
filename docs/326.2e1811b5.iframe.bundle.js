(window.webpackJsonp=window.webpackJsonp||[]).push([[326],{"./frontend/src/scenes/surveys/Surveys.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Surveys",(function(){return Surveys}));var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),stringWithWBR=__webpack_require__("./frontend/src/lib/utils/stringWithWBR.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("./frontend/src/lib/api.ts"),types=__webpack_require__("./frontend/src/types.ts");function getSurveyStatus(survey){return survey.start_date?survey.end_date?types.O.Complete:types.O.Running:types.O.Draft}const surveysLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","surveys","surveysLogic"]),Object(lib.loaders)((_ref=>{let{values:values}=_ref;return{surveys:{__default:[],loadSurveys:async()=>await api.b.surveys.list()||{results:[]},deleteSurvey:async _ref2=>{let{id:id}=_ref2;return await api.b.surveys.delete(id),values.surveys.filter((survey=>survey.id!==id))}}}})),Object(index_esm.listeners)((()=>({deleteSurveySuccess:()=>{src.lemonToast.success("Survey deleted")}}))),Object(index_esm.selectors)({breadcrumbs:[()=>[],()=>[{name:"Surveys",path:urls.a.surveys()}]]}),Object(index_esm.afterMount)((async _ref3=>{let{actions:actions}=_ref3;await actions.loadSurveys()}))]);try{getSurveyStatus.displayName="getSurveyStatus",getSurveyStatus.__docgenInfo={description:"",displayName:"getSurveyStatus",props:{id:{defaultValue:null,description:"UUID",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"popover"'},{value:'"button"'},{value:'"full_screen"'},{value:'"email"'}]}},linked_flag:{defaultValue:null,description:"",name:"linked_flag",required:!0,type:{name:"FeatureFlagBasicType | null"}},targeting_flag:{defaultValue:null,description:"",name:"targeting_flag",required:!0,type:{name:"FeatureFlagBasicType | null"}},conditions:{defaultValue:null,description:"",name:"conditions",required:!0,type:{name:"{ url: string; selector: string; } | null"}},appearance:{defaultValue:null,description:"",name:"appearance",required:!0,type:{name:"SurveyAppearance"}},questions:{defaultValue:null,description:"",name:"questions",required:!0,type:{name:"SurveyQuestion[]"}},created_at:{defaultValue:null,description:"",name:"created_at",required:!0,type:{name:"string"}},created_by:{defaultValue:null,description:"",name:"created_by",required:!0,type:{name:"UserBasicType | null"}},start_date:{defaultValue:null,description:"",name:"start_date",required:!0,type:{name:"string | null"}},end_date:{defaultValue:null,description:"",name:"end_date",required:!0,type:{name:"string | null"}},archived:{defaultValue:null,description:"",name:"archived",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/surveys/surveysLogic.tsx#getSurveyStatus"]={docgenInfo:getSurveyStatus.__docgenInfo,name:"getSurveyStatus",path:"frontend/src/scenes/surveys/surveysLogic.tsx#getSurveyStatus"})}catch(__react_docgen_typescript_loader_error){}var columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:Surveys,logic:surveysLogic};function Surveys(){const{surveys:surveys}=Object(index_esm.useValues)(surveysLogic);return Object(jsx_runtime.jsxs)("div",{className:"mt-10",children:[Object(jsx_runtime.jsx)(PageHeader.a,{title:"Surveys",buttons:Object(jsx_runtime.jsx)(src.LemonButton,{type:"primary",to:urls.a.survey("new"),"data-attr":"new-survey",children:"New survey"})}),Object(jsx_runtime.jsx)(src.LemonTable,{className:"mt-6",columns:[{dataIndex:"name",title:"Name",render:function RenderName(_,survey){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(src.Link,{to:urls.a.survey(survey.id),className:"row-name",children:Object(stringWithWBR.a)(survey.name,17)})})}},{title:"Responses",render:function RenderResponses(){return Object(jsx_runtime.jsx)("div",{children:0})}},{dataIndex:"type",title:"Type"},Object(columnUtils.b)(),Object(columnUtils.a)(),{title:"Status",width:100,render:function Render(_,survey){const status=getSurveyStatus(survey);return Object(jsx_runtime.jsx)(src.LemonTag,{color:{running:"green",draft:"default",complete:"purple"}[status],style:{fontWeight:600},children:status.toUpperCase()})}},{width:0,render:function Render(){return Object(jsx_runtime.jsx)(More.a,{overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(src.LemonButton,{status:"stealth",fullWidth:!0,children:"View results"}),Object(jsx_runtime.jsx)(src.LemonButton,{status:"stealth",fullWidth:!0,onClick:()=>{},children:"Edit"}),Object(jsx_runtime.jsx)(src.LemonDivider,{}),Object(jsx_runtime.jsx)(src.LemonButton,{status:"danger",onClick:()=>{},fullWidth:!0,children:"Delete"})]})})}}],dataSource:surveys,defaultSorting:{columnKey:"created_at",order:-1},nouns:["survey","surveys"]})]})}}}]);