(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{"./frontend/src/scenes/cohorts/Cohorts.tsx":function(u,n,e){"use strict";e.r(n),e.d(n,"Cohorts",function(){return O}),e.d(n,"scene",function(){return F});var h=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),L=e("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),p=e("./frontend/src/models/cohortsModel.ts"),c=e("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),S=e("./frontend/src/lib/components/PageHeader.tsx"),T=e("./frontend/src/types.ts"),I=e("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),N=e.n(I),A=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss"),v=e.n(A),j={};j.insert="head",j.singleton=!1;var k=N()(v.a,j),G=v.a.locals||{},R=e("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),b=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),z=e("./frontend/src/lib/components/Tooltip.tsx"),P=e("./frontend/src/lib/components/Link.tsx"),w=e("./frontend/src/lib/dayjs.ts"),D=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),l=e("./frontend/src/scenes/urls.ts"),E=e("./frontend/src/lib/components/LemonTable/index.ts"),U=e("./frontend/src/scenes/userLogic.ts"),V=e("./frontend/src/lib/components/LemonButton/More.tsx"),a=e("./frontend/src/lib/components/LemonButton/index.ts"),B=e("./frontend/src/lib/components/LemonDivider/index.ts"),i=e("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),M=e("./frontend/@posthog/lemon-ui/src/index.ts"),t=e("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const W=(m,f)=>new R.a(m,{keys:["name"],threshold:.3}).search(f).map(g=>g.item);function O(){const{cohorts:m,cohortsLoading:f}=Object(c.useValues)(p.a),{deleteCohort:g,exportCohortPersons:y}=Object(c.useActions)(p.a),{hasAvailableFeature:H}=Object(c.useValues)(U.a),{searchParams:J}=Object(c.useValues)(i.router),[x,K]=Object(h.useState)(""),$=[{title:"Name",dataIndex:"name",className:"ph-no-capture",width:"30%",sorter:(r,o)=>(r.name||"").localeCompare(o.name||""),render:function(o,s){let{id:d,description:C}=s;return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(P.a,{to:Object(i.combineUrl)(l.a.cohort(d),J).url,className:"row-name",children:o||"Untitled"}),H(T.e.DASHBOARD_COLLABORATION)&&C&&Object(t.jsx)("span",{className:"row-description",children:C})]})}},{title:"Users in cohort",align:"right",render:function(o,s){var d;return(d=s.count)===null||d===void 0?void 0:d.toLocaleString()},dataIndex:"count",sorter:(r,o)=>(r.count||0)-(o.count||0)},Object(b.b)(),Object(b.a)(),{title:Object(t.jsx)("span",{children:Object(t.jsxs)(z.a,{title:"PostHog calculates what users belong to each cohort. This is then used when filtering on cohorts in the Trends page etc. Calculating happens every 15 minutes, or whenever a cohort is updated.",children:["Last calculated",Object(t.jsx)(L.a,{style:{marginLeft:6}})]})}),render:function(o,s){return s.is_static?Object(t.jsx)(t.Fragment,{children:"N/A"}):s.is_calculating?Object(t.jsxs)("span",{className:"flex items-center",children:["in progress ",Object(t.jsx)(D.a,{className:"ml-2"})]}):Object(w.a)(s.last_calculation).fromNow()}},{width:0,render:function(o,s){return Object(t.jsx)(V.a,{overlay:Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(a.a,{status:"stealth",to:l.a.cohort(s.id),fullWidth:!0,children:"Edit"}),Object(t.jsx)(a.a,{status:"stealth",to:Object(i.combineUrl)(l.a.sessionRecordings(),{filters:{properties:[{key:"id",label:s.name,type:"cohort",value:s.id}]}}).url,fullWidth:!0,children:"View session recordings"}),Object(t.jsx)(a.a,{status:"stealth",onClick:()=>y(s.id,["distinct_ids.0","id","name","properties.email"]),tooltip:"Export specific columns for users belonging to this cohort in CSV format. Includes distinct id, internal id, email, and name",fullWidth:!0,children:"Export important columns for users"}),Object(t.jsx)(a.a,{status:"stealth",onClick:()=>y(s.id),tooltip:"Export all users belonging to this cohort in CSV format.",fullWidth:!0,children:"Export all columns for users"}),Object(t.jsx)(B.a,{}),Object(t.jsx)(a.a,{status:"danger",onClick:()=>g(s),fullWidth:!0,children:"Delete cohort"})]})})}}];return Object(t.jsxs)("div",{children:[Object(t.jsx)(S.a,{title:"Cohorts",caption:"Create lists of users who have something in common to use in analytics or feature flags."}),Object(t.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-2",children:[Object(t.jsx)(M.LemonInput,{type:"search",placeholder:"Search for cohorts",onChange:K,value:x}),Object(t.jsx)(a.a,{type:"primary","data-attr":"create-cohort",onClick:()=>i.router.actions.push(l.a.cohort("new")),children:"New Cohort"})]}),Object(t.jsx)(E.a,{columns:$,loading:f,rowKey:"id",pagination:{pageSize:100},dataSource:x?W(m,x):m,nouns:["cohort","cohorts"],"data-attr":"cohorts-table"})]})}const F={component:O,logic:p.a}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/cohorts/Cohorts.scss":function(u,n,e){var h=e("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");n=h(!1),n.push([u.i,".cohorts-drawer .ant-drawer-content-wrapper{max-width:850px!important;width:100%!important}.cohort-recalculating{background-color:var(--bg-mid);padding:.5rem 1rem;margin-top:1rem;border-radius:var(--radius)}.cohort-recalculating .ant-spin-spinning{margin-right:.375rem}.cohort-csv-dragger{height:155px!important;background-color:transparent!important;margin-top:1rem;border:2px dashed var(--primary)!important;border-radius:4px!important}.cohort-csv-dragger:hover{border-color:var(--primary-light)!important}.cohort-csv-dragger .ant-upload-drag-container{display:flex!important;justify-content:center;flex-direction:column;align-items:center;height:100%;padding:0 1rem}.cohort-csv-dragger .ant-upload-drag-container .ant-upload-text{font-weight:600;font-size:1rem!important;margin:8px 0 0!important}",""]),u.exports=n}}]);
