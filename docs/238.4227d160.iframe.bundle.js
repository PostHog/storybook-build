(window.webpackJsonp=window.webpackJsonp||[]).push([[238,244],{"./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx":function(S,u,e){"use strict";e.r(u),e.d(u,"scene",function(){return oe}),e.d(u,"EventDefinitionsTable",function(){return ee});var W=e("./node_modules/core-js/modules/es.array.concat.js"),o=e("./node_modules/core-js/modules/es.function.name.js"),x=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),E=e.n(x),J=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Y=e.n(J),V=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),P=e.n(V),O={};O.insert="head",O.singleton=!1;var k=Y()(P.a,O),q=P.a.locals||{},L=e("./node_modules/react/index.js"),n=e.n(L),f=e("./node_modules/kea/lib/index.esm.js"),U=e("./frontend/src/lib/components/LemonTable/index.ts"),g=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),K=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),C=e("./frontend/src/scenes/organizationLogic.tsx"),j=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),m=e("./frontend/src/lib/utils.tsx"),w=e("./node_modules/core-js/modules/es.array.includes.js"),T=e("./node_modules/core-js/modules/es.string.includes.js"),Q=e("./frontend/src/lib/components/LemonButton/More.tsx"),X=e("./frontend/src/lib/components/LemonButton/index.ts"),F=e("./frontend/src/scenes/urls.ts"),ne=e("./node_modules/kea-router/lib/index.js"),te=e("./frontend/src/lib/utils/eventUsageLogic.ts");function $(b){var D,p,l,M,h,R,y,_,s=b.definition,z=Object(f.useActions)(g.d),A=z.loadPropertiesForEvent,H=z.setLocalPropertyDefinition,G=Object(f.useValues)(g.d),i=G.eventPropertiesCacheMap,Z=G.eventDefinitionPropertiesLoading,r=Object(f.useValues)(C.a),t=r.hasDashboardCollaboration,a=r.hasIngestionTaxonomy,d=Object(f.useActions)(te.f),v=d.reportDataManagementEventDefinitionsPageClickNestedPropertyDetail;Object(L.useEffect)(function(){A(s)},[]);var ie=[{title:"Property",key:"property",className:"definition-column-name",render:function(B,c){return n.a.createElement(j.b,{definition:c,event:s,hideIcon:!0,openDetailInNewTab:!1,updateRemoteItem:function(se){H(s,se)}})}},{title:"Type",key:"type",className:"definition-column-type",render:function(B,c){return c.property_type?n.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},c.property_type):n.a.createElement("span",{className:"text-muted"},"\u2014")}}].concat(E()(t?[{title:"Tags",key:"tags",render:function(B,c){var N;return n.a.createElement(K.a,{tags:(N=c.tags)!==null&&N!==void 0?N:[],staticOnly:!0})}}]:[]),E()(a?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(B,c){return c.query_usage_30_day?Object(m.O)(c.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(B,c){return c.example?n.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},c.example):n.a.createElement("span",{className:"text-muted"},"\u2014")}},{key:"actions",width:0,render:function(B,c){return n.a.createElement(Q.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(X.a,{type:"stealth",onClick:function(){v(),ne.router.actions.push(F.a.eventPropertyDefinition(c.id))},fullWidth:!0,"data-attr":"event-properties-definition-property-detail"},"Show property in list"))})}}]);return n.a.createElement("div",{className:"event-properties-wrapper"},n.a.createElement("span",{className:"event-properties-header"},"Top properties"),n.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),n.a.createElement(U.a,{id:"event-properties-definition-table-".concat(s.id),"data-attr":"event-properties-definition-nested-table",columns:ie,className:"event-properties-definition-table-".concat(s.id),dataSource:(D=i==null||(p=i[s.id])===null||p===void 0?void 0:p.results)!==null&&D!==void 0?D:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:g.b,currentPage:(l=i==null||(M=i[s.id])===null||M===void 0?void 0:M.page)!==null&&l!==void 0?l:1,entryCount:(h=i==null||(R=i[s.id])===null||R===void 0?void 0:R.count)!==null&&h!==void 0?h:0,onForward:!(i==null||(y=i[s.id])===null||y===void 0)&&y.next?function(){A(s,i[s.id].next)}:void 0,onBackward:!(i==null||(_=i[s.id])===null||_===void 0)&&_.previous?function(){A(s,i[s.id].previous)}:void 0},loading:Z.includes(s.id)}))}try{$.displayName="EventDefinitionProperties",$.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:$.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(b){}var ae=e("./node_modules/antd/es/input/index.js"),oe={component:ee,logic:g.d,paramsToProps:function(){return{syncWithUrl:!0}}};function ee(){var b,D,p=Object(f.useValues)(g.d),l=p.eventDefinitions,M=p.eventDefinitionsLoading,h=p.openedDefinitionId,R=p.filters,y=Object(f.useActions)(g.d),_=y.loadEventDefinitions,s=y.setOpenedDefinition,z=y.setLocalEventDefinition,A=y.setFilters,H=Object(f.useValues)(C.a),G=H.hasDashboardCollaboration,i=H.hasIngestionTaxonomy,Z=[{key:"icon",className:"definition-column-icon",render:function(t,a){return n.a.createElement(j.a,{definition:a,hideView:!0,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(t,a){return n.a.createElement(j.a,{definition:a,hideView:!0,hideIcon:!0,updateRemoteItem:function(v){return z(v)}})},sorter:function(t,a){return t.name.localeCompare(a.name)}}].concat(E()(G?[{title:"Tags",key:"tags",render:function(t,a){var d;return n.a.createElement(K.a,{tags:(d=a.tags)!==null&&d!==void 0?d:[],staticOnly:!0})}}]:[]),E()(i?[{title:"30 day volume",key:"volume_30_day",align:"right",render:function(t,a){return a.volume_30_day?Object(m.O)(a.volume_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(t,a){var d,v;return((d=t==null?void 0:t.volume_30_day)!==null&&d!==void 0?d:0)-((v=a==null?void 0:a.volume_30_day)!==null&&v!==void 0?v:0)}},{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(t,a){return a.query_usage_30_day?Object(m.O)(a.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(t,a){var d,v;return((d=t==null?void 0:t.query_usage_30_day)!==null&&d!==void 0?d:0)-((v=a==null?void 0:a.query_usage_30_day)!==null&&v!==void 0?v:0)}}]:[]));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",flexDirection:"row",alignItems:"center",width:"100%",marginBottom:"1rem"}},n.a.createElement(ae.a.Search,{placeholder:"Search for events",allowClear:!0,enterButton:!0,value:R.event,style:{maxWidth:600,width:"initial"},onChange:function(t){A({event:t.target.value||""})}})),n.a.createElement(U.a,{columns:Z,className:"events-definition-table","data-attr":"events-definition-table",loading:M,rowKey:"id",rowStatus:function(t){return t.id===h?"highlighted":void 0},pagination:{controlled:!0,currentPage:(b=l==null?void 0:l.page)!==null&&b!==void 0?b:1,entryCount:(D=l==null?void 0:l.count)!==null&&D!==void 0?D:0,pageSize:g.a,onForward:l.next?function(){_(l.next)}:void 0,onBackward:l.previous?function(){_(l.previous)}:void 0},expandable:{expandedRowRender:function(t){return n.a.createElement($,{definition:t})},noIndent:!0,isRowExpanded:function(t){return t.id===h?!0:-1},onRowCollapse:function(t){return t.id===h&&s(null)}},dataSource:l.results,emptyState:"No event definitions",nouns:["event","events"]}))}},"./frontend/src/scenes/events/EventsVolumeTable.tsx":function(S,u,e){"use strict";e.r(u),e.d(u,"scene",function(){return K}),e.d(u,"EventsVolumeTable",function(){return C});var W=e("./node_modules/react/index.js"),o=e.n(W),x=e("./node_modules/kea/lib/index.esm.js"),E=e("./node_modules/antd/es/alert/index.js"),J=e("./node_modules/antd/es/skeleton/index.js"),Y=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),V=e("./frontend/src/models/eventDefinitionsModel.ts"),P=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),O=e("./frontend/src/scenes/events/VolumeTable.tsx"),k=e("./frontend/src/scenes/events/definitions/DefinitionDrawer.tsx"),q=e("./frontend/src/lib/logic/featureFlagLogic.ts"),L=e("./frontend/src/lib/constants.tsx"),n=e("./frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx"),f=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),U=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),g=e("./frontend/src/scenes/data-management/DataManagementPageHeader.tsx"),K={component:C,logic:V.a};function C(){var j=Object(x.useValues)(Y.a),m=j.preflight,w=Object(x.useValues)(V.a),T=w.eventDefinitions,Q=w.loaded,X=Object(x.useValues)(q.a),F=X.featureFlags;return o.a.createElement("div",{"data-attr":"manage-events-table"},o.a.createElement(g.a,{activeTab:U.b.EventDefinitions}),F[L.o.DATA_MANAGEMENT]?o.a.createElement(o.a.Fragment,null,m&&!(m!=null&&m.is_event_property_usage_enabled)?o.a.createElement(P.a,{tab:"Event Definitions"}):(T.length===0||T[0].volume_30_day===null)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later.",style:{marginBottom:"1rem"}})),o.a.createElement(x.BindLogic,{logic:f.d,props:{}},o.a.createElement(n.EventDefinitionsTable,null))):o.a.createElement(o.a.Fragment,null,Q?o.a.createElement(o.a.Fragment,null,m&&!(m!=null&&m.is_event_property_usage_enabled)?o.a.createElement(P.a,{tab:"Properties Stats"}):(T.length===0||T[0].volume_30_day===null)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later.",style:{marginBottom:"1rem"}})),o.a.createElement(O.a,{data:T,type:"event"})):o.a.createElement(J.a,{active:!0,paragraph:{rows:5}})),!F[L.o.DATA_MANAGEMENT]&&o.a.createElement(k.a,null))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(S,u,e){var W=e("./node_modules/css-loader/dist/runtime/api.js");u=W(!1),u.push([S.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:flex-start}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted path{fill:var(--taxonomy-icon-muted)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{height:28px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified path{fill:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified:not(.taxonomy-icon-ph){margin-bottom:-4px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--text-muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),S.exports=u}}]);
