"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[43617],{"../../frontend/src/scenes/dashboard/dashboards/Dashboards.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Dashboards:()=>Dashboards,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),AccessControlAction=__webpack_require__("../../frontend/src/lib/components/AccessControlAction.tsx"),AppShortcut=__webpack_require__("../../frontend/src/lib/components/AppShortcuts/AppShortcut.tsx"),shortcuts=__webpack_require__("../../frontend/src/lib/components/AppShortcuts/shortcuts.ts"),LemonTabs=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTabs/index.ts"),DeleteDashboardModal=__webpack_require__("../../frontend/src/scenes/dashboard/DeleteDashboardModal.tsx"),DuplicateDashboardModal=__webpack_require__("../../frontend/src/scenes/dashboard/DuplicateDashboardModal.tsx"),NewDashboardModal=__webpack_require__("../../frontend/src/scenes/dashboard/NewDashboardModal.tsx"),DashboardsTable=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx"),dashboardsLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),More=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonDialog=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDialog/index.ts"),LemonSnack=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSnack/LemonSnack.tsx"),LemonTable=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTable/index.ts"),DashboardTemplateEditor=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardTemplateEditor.tsx"),dashboardTemplateEditorLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardTemplateEditorLogic.ts"),dashboardTemplatesLogic=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),userLogic=__webpack_require__("../../frontend/src/scenes/userLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let DashboardTemplatesTable=()=>{let{allTemplates,allTemplatesLoading}=(0,index_esm.useValues)(dashboardTemplatesLogic.R),{openDashboardTemplateEditor,setDashboardTemplateId,deleteDashboardTemplate,updateDashboardTemplate}=(0,index_esm.useActions)(dashboardTemplateEditorLogic.X),{user}=(0,index_esm.useValues)(userLogic.userLogic),columns=[{title:"Name",dataIndex:"template_name",render:(_,_ref)=>{let{template_name}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:template_name})}},{title:"Description",dataIndex:"dashboard_description",render:(_,_ref2)=>{let{dashboard_description}=_ref2;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:dashboard_description})}},{title:"Type",dataIndex:"team_id",render:(_,_ref3)=>{let{scope}=_ref3;return"global"===scope?(0,jsx_runtime.jsx)(LemonSnack.L,{children:"Official"}):(0,jsx_runtime.jsx)(LemonSnack.L,{children:"Team"})}},{width:0,render:(_,_ref4)=>{let{id,scope}=_ref4;return user?.is_staff?(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{if(void 0===id){console.error("Dashboard template id not defined");return}setDashboardTemplateId(id),openDashboardTemplateEditor()},fullWidth:!0,children:"Edit"}),(0,jsx_runtime.jsxs)(src.Jp,{onClick:()=>{if(void 0===id){console.error("Dashboard template id not defined");return}updateDashboardTemplate({id,dashboardTemplateUpdates:{scope:"global"===scope?"team":"global"}})},fullWidth:!0,children:["Make visible to ","global"===scope?"this team only":"everyone"]}),(0,jsx_runtime.jsx)(src.p2,{}),(0,jsx_runtime.jsx)(src.Jp,{onClick:()=>{if(void 0===id){console.error("Dashboard template id not defined");return}LemonDialog.LemonDialog.open({title:"Delete dashboard template?",description:"This action cannot be undone.",primaryButton:{status:"danger",children:"Delete",onClick:()=>{deleteDashboardTemplate(id)}}})},fullWidth:!0,status:"danger",disabledReason:"global"===scope?"Cannot delete global dashboard templates, make them team only first":void 0,children:"Delete dashboard"})]})}):null}}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonTable.g,{"data-attr":"dashboards-template-table",pagination:{pageSize:10},dataSource:Object.values(allTemplates),columns:columns,loading:allTemplatesLoading,defaultSorting:{columnKey:"name",order:1},emptyState:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"There are no dashboard templates."}),nouns:["template","templates"]}),(0,jsx_runtime.jsx)(DashboardTemplateEditor.v,{})]})};var newDashboardLogic=__webpack_require__("../../frontend/src/scenes/dashboard/newDashboardLogic.ts"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes=__webpack_require__("../../frontend/src/scenes/scenes.ts"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/components/SceneContent.tsx"),SceneTitleSection=__webpack_require__("../../frontend/src/layout/scenes/components/SceneTitleSection.tsx"),dashboardsModel=__webpack_require__("../../frontend/src/models/dashboardsModel.tsx"),types=__webpack_require__("../../frontend/src/types.ts"),DashboardTemplateChooser=__webpack_require__("../../frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx");let scene={component:Dashboards,logic:dashboardsLogic.dJ,settingSectionId:"environment-product-analytics"};function Dashboards(){let{dashboardsLoading}=(0,index_esm.useValues)(dashboardsModel.h),{setCurrentTab}=(0,index_esm.useActions)(dashboardsLogic.dJ),{dashboards,currentTab,isFiltering}=(0,index_esm.useValues)(dashboardsLogic.dJ),{showNewDashboardModal}=(0,index_esm.useActions)(newDashboardLogic.Z),enabledTabs=[{key:dashboardsLogic.NS.All,label:"All dashboards"},{key:dashboardsLogic.NS.Yours,label:"My dashboards"},{key:dashboardsLogic.NS.Pinned,label:"Pinned"},{key:dashboardsLogic.NS.Templates,label:"Templates"}];return(0,jsx_runtime.jsxs)(SceneContent._,{children:[(0,jsx_runtime.jsx)(NewDashboardModal.O,{}),(0,jsx_runtime.jsx)(DuplicateDashboardModal.i,{}),(0,jsx_runtime.jsx)(DeleteDashboardModal.y,{}),(0,jsx_runtime.jsx)(SceneTitleSection.s,{name:scenes.lc[sceneTypes.x.Dashboards].name,description:scenes.lc[sceneTypes.x.Dashboards].description,resourceType:{type:scenes.lc[sceneTypes.x.Dashboards].iconType||"default_icon_type"},actions:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(AccessControlAction.b,{resourceType:types.qR.Dashboard,minAccessLevel:types.W$.Editor,children:(0,jsx_runtime.jsx)(AppShortcut.g,{name:"NewDashboard",keybind:[shortcuts.z.new],intent:"New dashboard",interaction:"click",asChild:!0,scope:sceneTypes.x.Dashboards,children:(0,jsx_runtime.jsx)(src.Jp,{size:"small","data-attr":"new-dashboard",onClick:showNewDashboardModal,type:"primary",children:"New dashboard"})})})})}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:currentTab,onChange:newKey=>setCurrentTab(newKey),tabs:enabledTabs,sceneInset:!0}),(0,jsx_runtime.jsx)("div",{children:currentTab===dashboardsLogic.NS.Templates?(0,jsx_runtime.jsx)(DashboardTemplatesTable,{}):dashboardsLoading||dashboards.length>0||isFiltering?(0,jsx_runtime.jsx)(DashboardsTable.z,{}):(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("p",{children:"Create your first dashboard:"}),(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{})]})})]})}}}]);