(window.webpackJsonp=window.webpackJsonp||[]).push([[2,9],{"./frontend/src/scenes/apps/AppMetricsScene.tsx":function(A,E,e){"use strict";e.r(E),e.d(E,"scene",function(){return j}),e.d(E,"AppMetrics",function(){return s});var T=e("./node_modules/core-js/modules/es.function.name.js"),f=e.n(T),d=e("./node_modules/antd/es/tabs/index.js"),n=e("./frontend/src/scenes/apps/appMetricsSceneLogic.ts"),D=e("./frontend/src/lib/components/PageHeader.tsx"),v=e("./node_modules/kea/lib/index.esm.js"),M=e("./frontend/src/scenes/apps/MetricsTab.tsx"),L=e("./frontend/src/scenes/apps/HistoricalExportsTab.tsx"),u=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),b=e("./frontend/src/scenes/apps/ErrorDetailsModal.tsx"),t=e("./node_modules/react/jsx-runtime.js"),O=e.n(t),j={component:s,logic:n.appMetricsSceneLogic,paramsToProps:function(x){var c,o=x.params.pluginConfigId;return{pluginConfigId:(c=parseInt(o))!==null&&c!==void 0?c:0}}};function s(){var _=Object(v.useValues)(n.appMetricsSceneLogic),x=_.activeTab,c=_.pluginConfig,o=_.pluginConfigLoading,a=_.showTab,i=Object(v.useActions)(n.appMetricsSceneLogic),r=i.setActiveTab;return Object(t.jsxs)("div",{children:[Object(t.jsx)(D.a,{title:c?c.plugin_info.name:Object(t.jsx)(u.a,{}),caption:"An overview of metrics and export for this app."}),o||!x?Object(t.jsx)(u.a,{}):Object(t.jsxs)(d.a,{tabPosition:"top",animated:!1,activeKey:x,onTabClick:function(m){return r(m)},children:[a(n.AppMetricsTab.ProcessEvent)&&Object(t.jsx)(d.a.TabPane,{tab:"processEvent metrics",children:Object(t.jsx)(M.MetricsTab,{tab:n.AppMetricsTab.ProcessEvent})},n.AppMetricsTab.ProcessEvent),a(n.AppMetricsTab.OnEvent)&&Object(t.jsx)(d.a.TabPane,{tab:"onEvent metrics",children:Object(t.jsx)(M.MetricsTab,{tab:n.AppMetricsTab.OnEvent})},n.AppMetricsTab.OnEvent),a(n.AppMetricsTab.ExportEvents)&&Object(t.jsx)(d.a.TabPane,{tab:"exportEvents metrics",children:Object(t.jsx)(M.MetricsTab,{tab:n.AppMetricsTab.ExportEvents})},n.AppMetricsTab.ExportEvents),a(n.AppMetricsTab.HistoricalExports)&&Object(t.jsx)(d.a.TabPane,{tab:"Historical Exports",children:Object(t.jsx)(L.HistoricalExportsTab,{})},n.AppMetricsTab.HistoricalExports)]}),Object(t.jsx)(b.ErrorDetailsModal,{})]})}},"./frontend/src/scenes/apps/ErrorDetailsModal.tsx":function(A,E,e){"use strict";e.r(E),e.d(E,"ErrorDetailsModal",function(){return x});var T=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),f=e.n(T),d=e("./node_modules/react/index.js"),n=e.n(d),D=e("./node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/scenes/apps/appMetricsSceneLogic.ts"),M=e("./frontend/src/lib/components/LemonSkeleton/index.tsx"),L=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),u=e("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx"),b=e("./frontend/src/lib/components/LemonButton/index.ts"),t=e("./frontend/src/lib/components/icons.tsx"),O=e("./frontend/src/lib/components/LemonModal/index.ts"),j=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),s=e("./node_modules/react/jsx-runtime.js"),_=e.n(s);function x(){var o,a,i=Object(D.useValues)(v.appMetricsSceneLogic),r=i.errorDetails,p=i.errorDetailsModalError,m=i.errorDetailsLoading,g=Object(D.useActions)(v.appMetricsSceneLogic),I=g.closeErrorDetailsModal,R=Object(d.useState)(0),C=f()(R,2),P=C[0],h=C[1],l=r[P];return Object(s.jsx)(O.a,{isOpen:!!p,onClose:I,title:p,width:"min(50vw, 80rem)",description:Object(s.jsx)("span",{children:l==null||(o=l.error_details)===null||o===void 0||(a=o.error.message)===null||a===void 0?void 0:a.substring(0,200)}),footer:Object(s.jsx)("div",{className:"flex items-center justify-end gap-1 h-",children:m?Object(s.jsx)(M.a,{className:"1-10"}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("span",{children:[P+1," of ",r.length," sample",r.length>1?"s":""]}),Object(s.jsx)(b.a,{icon:Object(s.jsx)(t.IconChevronLeft,{}),onClick:function(){return h(P-1)},disabled:P==0}),Object(s.jsx)(b.a,{icon:Object(s.jsx)(t.IconChevronRight,{}),onClick:function(){return h(P+1)},disabled:P==r.length-1})]})}),children:!p||m?Object(s.jsx)(M.a,{className:"h-10"}):Object(s.jsxs)("div",{className:"flex flex-col space-y-2",style:{height:"80vh"},children:[Object(s.jsxs)("div",{children:[Object(s.jsx)(u.a,{children:"When:"})," ",Object(s.jsx)(L.b,{time:l.timestamp,showSeconds:!0})]}),l.error_details.eventCount&&Object(s.jsxs)("div",{children:[Object(s.jsx)(u.a,{children:"Event Count"}),Object(s.jsx)("div",{children:l.error_details.eventCount})]}),l.error_details.error.message&&Object(s.jsx)(c,{title:"Error message",defaultIsExpanded:!0,children:Object(s.jsx)(j.a,{wrap:!0,language:j.b.JavaScript,children:l.error_details.error.message})}),l.error_details.event&&Object(s.jsx)(c,{title:"Event payload",defaultIsExpanded:!1,children:Object(s.jsx)(j.a,{wrap:!0,language:j.b.JSON,children:JSON.stringify(l.error_details.event,null,2)})}),l.error_details.error.stack&&Object(s.jsx)(c,{title:"Stack trace",defaultIsExpanded:!1,children:Object(s.jsx)(j.a,{wrap:!0,language:j.b.JavaScript,children:l.error_details.error.stack})})]})})}function c(o){var a=Object(d.useState)(o.defaultIsExpanded),i=f()(a,2),r=i[0],p=i[1];return Object(s.jsxs)("div",{className:"bg-mid border rounded",children:[Object(s.jsx)(b.a,{status:"stealth",fullWidth:!0,onClick:function(){return p(!r)},sideIcon:r?Object(s.jsx)(t.IconUnfoldLess,{}):Object(s.jsx)(t.IconUnfoldMore,{}),title:r?"Show less":"Show more",className:"bg-mid",children:o.title}),r&&Object(s.jsx)("div",{className:"bg-light p-2",children:o.children})]})}},"./frontend/src/scenes/apps/HistoricalExportsTab.tsx":function(A,E,e){"use strict";e.r(E),e.d(E,"HistoricalExportsTab",function(){return s});var T=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),f=e.n(T),d=e("./node_modules/core-js/modules/es.array.concat.js"),n=e.n(d),D=e("./node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/scenes/apps/appMetricsSceneLogic.ts"),M=e("./frontend/src/lib/components/LemonTable/index.ts"),L=e("./frontend/src/scenes/apps/HistoricalExport.tsx"),u=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),b=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),t=e("./node_modules/antd/es/progress/index.js"),O=e("./node_modules/react/jsx-runtime.js"),j=e.n(O);function s(){var _=Object(D.useValues)(v.appMetricsSceneLogic),x=_.historicalExports,c=_.historicalExportsLoading,o=_.pluginConfig;return Object(O.jsx)(M.a,{dataSource:x,loading:c,columns:[{title:"Dates exported",render:function(i,r){var p=f()(r.payload.dateRange,2),m=p[0],g=p[1];return m===g?m:"".concat(m," - ").concat(g)}},{title:"Progress",width:130,render:function(i,r){switch(r.status){case"success":return Object(O.jsx)(b.a,{type:"success",className:"uppercase",children:"Success"});case"fail":return Object(O.jsx)(b.a,{type:"danger",className:"uppercase",children:"Failed"});case"not_finished":return Object(O.jsx)(t.a,{percent:Math.floor((r.progress||0)*100)})}},align:"right"},Object(u.b)(),Object(u.a)()],expandable:{expandedRowRender:function(i){if(!!o)return Object(O.jsx)(L.HistoricalExport,{pluginConfigId:o.id,jobId:i.job_id})}},useURLForSorting:!1,noSortingCancellation:!0})}}}]);
