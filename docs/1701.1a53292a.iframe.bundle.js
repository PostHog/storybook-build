"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[1701],{"./frontend/src/scenes/experiments/Experiments.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Experiments:function(){return Experiments},scene:function(){return scene}});var lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),_experimentsLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/scenes/experiments/experimentsLogic.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts"),lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/components/Table/utils.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/utils/stringWithWBR.tsx"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),lib_dayjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/dayjs.ts"),antd__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/tag/index.js"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),_ExperimentsPayGate__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/scenes/experiments/ExperimentsPayGate.tsx"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),kea_router__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./frontend/src/lib/components/hedgehogs.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:Experiments,logic:_experimentsLogic__WEBPACK_IMPORTED_MODULE_1__.O};function Experiments(){const{filteredExperiments:filteredExperiments,experimentsLoading:experimentsLoading,tab:tab,searchTerm:searchTerm,shouldShowEmptyState:shouldShowEmptyState,shouldShowProductIntroduction:shouldShowProductIntroduction}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_experimentsLogic__WEBPACK_IMPORTED_MODULE_1__.O),{setExperimentsTab:setExperimentsTab,deleteExperiment:deleteExperiment,setSearchStatus:setSearchStatus,setSearchTerm:setSearchTerm}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_experimentsLogic__WEBPACK_IMPORTED_MODULE_1__.O),{hasAvailableFeature:hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_14__.userLogic),EXPERIMENTS_PRODUCT_DESCRIPTION="Experiments help you test changes to your product to see which changes will lead to optimal results. Automatic statistical calculations let you see if the results are valid or if they are likely just a chance occurrence.",getExperimentDuration=experiment=>experiment.end_date?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(experiment.end_date).diff((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(experiment.start_date),"day"):experiment.start_date?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)().diff((0,lib_dayjs__WEBPACK_IMPORTED_MODULE_10__.Bv)(experiment.start_date),"day"):void 0,columns=[{title:(0,lib_components_Table_utils__WEBPACK_IMPORTED_MODULE_6__.P)("Name"),dataIndex:"name",className:"ph-no-capture",sticky:!0,width:"40%",render:function Render(_,experiment){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__.r,{to:experiment.id?scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.experiment(experiment.id):void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("span",{className:"row-name",children:(0,lib_utils_stringWithWBR__WEBPACK_IMPORTED_MODULE_8__.Z)(experiment.name,17)})}),experiment.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("span",{className:"row-description",children:experiment.description})]})}},(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_4__.J)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_4__.r)(),{title:"Duration",key:"duration",render:function Render(_,experiment){const duration=getExperimentDuration(experiment);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{children:void 0!==duration?`${duration} day${1!==duration?"s":""}`:"--"})},sorter:(a,b)=>{var _getExperimentDuratio,_getExperimentDuratio2;return(null!==(_getExperimentDuratio=getExperimentDuration(a))&&void 0!==_getExperimentDuratio?_getExperimentDuratio:-1)>(null!==(_getExperimentDuratio2=getExperimentDuration(b))&&void 0!==_getExperimentDuratio2?_getExperimentDuratio2:-1)?1:-1},align:"right"},{title:"Status",key:"status",render:function Render(_,experiment){const status=(0,_experimentsLogic__WEBPACK_IMPORTED_MODULE_1__.R)(experiment);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(antd__WEBPACK_IMPORTED_MODULE_22__.Z,{color:{running:"green",draft:"default",complete:"purple"}[status],style:{fontWeight:600},children:status.toUpperCase()})},align:"center",sorter:(a,b)=>{const statusA=(0,_experimentsLogic__WEBPACK_IMPORTED_MODULE_1__.R)(a),statusB=(0,_experimentsLogic__WEBPACK_IMPORTED_MODULE_1__.R)(b),score={draft:1,running:2,complete:3};return score[statusA]>score[statusB]?1:-1}},{width:0,render:function Render(_,experiment){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_11__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__.Jp,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.experiment(`${experiment.id}`),size:"small",fullWidth:!0,children:"View"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_13__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__.Jp,{status:"danger",onClick:()=>deleteExperiment(experiment.id),"data-attr":`experiment-${experiment.id}-dropdown-remove`,fullWidth:!0,children:"Delete experiment"})]})})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_components_PageHeader__WEBPACK_IMPORTED_MODULE_0__.m,{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"flex items-center",children:"Experiments"}),buttons:hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_5__.P$.EXPERIMENTATION)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_12__.Jp,{type:"primary","data-attr":"create-experiment",to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.experiment("new"),children:"New experiment"}):void 0,caption:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:["Check out our",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_9__.r,{"data-attr":"experiment-help",to:"https://posthog.com/docs/user-guides/experimentation?utm_medium=in-product&utm_campaign=new-experiment",target:"_blank",children:[" ","Experimentation user guide"]})," ","to learn more."]}),tabbedPage:hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_5__.P$.EXPERIMENTATION)}),hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_5__.P$.EXPERIMENTATION)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_LemonTabs__WEBPACK_IMPORTED_MODULE_16__.T,{activeKey:tab,onChange:newKey=>setExperimentsTab(newKey),tabs:[{key:_types__WEBPACK_IMPORTED_MODULE_5__.F7.All,label:"All experiments"},{key:_types__WEBPACK_IMPORTED_MODULE_5__.F7.Yours,label:"Your experiments"},{key:_types__WEBPACK_IMPORTED_MODULE_5__.F7.Archived,label:"Archived experiments"}]}),(shouldShowEmptyState||shouldShowProductIntroduction)&&(tab===_types__WEBPACK_IMPORTED_MODULE_5__.F7.Archived?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_18__.C,{productName:"Experiments",productKey:_types__WEBPACK_IMPORTED_MODULE_5__.Md.EXPERIMENTS,thingName:"archived experiment",description:EXPERIMENTS_PRODUCT_DESCRIPTION,docsURL:"https://posthog.com/docs/experiments",isEmpty:shouldShowEmptyState}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_18__.C,{productName:"Experiments",productKey:_types__WEBPACK_IMPORTED_MODULE_5__.Md.EXPERIMENTS,thingName:"experiment",description:EXPERIMENTS_PRODUCT_DESCRIPTION,docsURL:"https://posthog.com/docs/experiments",action:()=>kea_router__WEBPACK_IMPORTED_MODULE_19__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.experiment("new")),isEmpty:shouldShowEmptyState,customHog:lib_components_hedgehogs__WEBPACK_IMPORTED_MODULE_20__.ExperimentsHog})),!shouldShowEmptyState&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_15__.LemonInput,{type:"search",placeholder:"Search for Experiments",onChange:setSearchTerm,value:searchTerm}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("b",{children:"Status"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_15__.LemonSelect,{onChange:status=>{status&&setSearchStatus(status)},options:[{label:"All",value:"all"},{label:"Draft",value:_types__WEBPACK_IMPORTED_MODULE_5__.mN.Draft},{label:"Running",value:_types__WEBPACK_IMPORTED_MODULE_5__.mN.Running},{label:"Complete",value:_types__WEBPACK_IMPORTED_MODULE_5__.mN.Complete}],value:"all",dropdownMaxContentWidth:!0})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_3__.g,{dataSource:filteredExperiments,columns:columns,rowKey:"id",loading:experimentsLoading,defaultSorting:{columnKey:"created_at",order:-1},noSortingCancellation:!0,pagination:{pageSize:100},nouns:["experiment","experiments"],"data-attr":"experiment-table"})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_ExperimentsPayGate__WEBPACK_IMPORTED_MODULE_17__.p,{})]})}}}]);