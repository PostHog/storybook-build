"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[26414],{"../../products/error_tracking/frontend/components/GenericSelect.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>GenericSelect});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function GenericSelect(_ref){let{current,size,onChange,values,placeholder,renderValue}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Yv,{onChange:onChange,value:current,placeholder:placeholder,options:values.map(key=>({value:key,label:renderValue(key)})),size:size})}},"../../products/error_tracking/frontend/components/IssueActions/BulkActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>BulkActions});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/types.ts"),_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts"),_Assignee_AssigneeDisplay__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeDisplay.tsx"),_Assignee_AssigneeSelect__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeSelect.tsx"),_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/errorFiltersLogic.ts"),_GenericSelect__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/components/GenericSelect.tsx"),_Indicator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../products/error_tracking/frontend/components/Indicator.tsx"),_issueActionsLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function BulkActions(_ref){let{issues,selectedIds}=_ref,{mergeIssues,assignIssues,resolveIssues,suppressIssues,activateIssues}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_issueActionsLogic__WEBPACK_IMPORTED_MODULE_9__.x),{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_6__.U),{setFilterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_6__.U),{setSelectedIssueIds}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_3__.t),hasAtLeastTwoIssues=selectedIds.length>=2,currentStatus=issues.filter(issue=>selectedIds.includes(issue.id)).map(issue=>issue.status).reduce((acc,status)=>null===acc?status:"mixed"===acc||acc!==status?"mixed":acc,null);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"flex gap-x-2 justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"flex gap-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{disabledReason:hasAtLeastTwoIssues?null:"Select at least two issues to merge",type:"secondary",size:"small",onClick:()=>_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.dn.open({title:"Merge Issues",content:`Are you sure you want to merge these ${selectedIds.length} issues?`,primaryButton:{children:"Merge",status:"danger",onClick:()=>{mergeIssues(selectedIds)}}}),children:"Merge"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_GenericSelect__WEBPACK_IMPORTED_MODULE_7__.e,{size:"small",current:"mixed"==currentStatus?null:currentStatus,values:["active","resolved","suppressed"],placeholder:"Mark as",renderValue:value=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Indicator__WEBPACK_IMPORTED_MODULE_8__.Eg,{status:value,size:"small",className:"w-full",withTooltip:!0}),onChange:value=>{if(value!=currentStatus)switch(value){case"resolved":resolveIssues(selectedIds);break;case"suppressed":suppressIssues(selectedIds);break;case"active":activateIssues(selectedIds)}}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Assignee_AssigneeSelect__WEBPACK_IMPORTED_MODULE_5__.i,{assignee:null,onChange:assignee=>assignIssues(selectedIds,assignee),children:displayAssignee=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"secondary",size:"small",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Assignee_AssigneeDisplay__WEBPACK_IMPORTED_MODULE_4__.VQ,{assignee:displayAssignee,placeholder:"Assign"})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.Jp,{type:"secondary",size:"small",onClick:()=>{let quotedIds=selectedIds.map(id=>`'${id}'`).join(", "),newFilter={key:`issue_id NOT IN (${quotedIds})`,type:_types__WEBPACK_IMPORTED_MODULE_2__.FT.HogQL,value:null},firstGroup=filterGroup.values[0],updatedFirstGroup={...firstGroup,values:[...firstGroup.values,newFilter]};setFilterGroup({type:_types__WEBPACK_IMPORTED_MODULE_2__.J2.And,values:[updatedFirstGroup]}),setSelectedIssueIds([])},children:"Hide from search"})]})}},"../../products/error_tracking/frontend/components/IssueImpactTool.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>ErrorTrackingIssueImpactTool});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),scenes_max_MaxTool__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/scenes/max/MaxTool.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_impact_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../products/error_tracking/frontend/impact/errorTrackingImpactSceneLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ErrorTrackingIssueImpactTool(){let{setEvents}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_impact_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_4__.l);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(scenes_max_MaxTool__WEBPACK_IMPORTED_MODULE_2__.Z,{identifier:"find_error_tracking_impactful_issue_event_list",context:{},callback:toolOutput=>{setEvents(toolOutput.events),kea_router__WEBPACK_IMPORTED_MODULE_1__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.errorTrackingImpact())},suggestions:[],introOverride:{headline:"What kind of issues are you looking for?",description:"Search by message, file name, event properties, or stack trace."},className:"hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"relative"})})}},"../../products/error_tracking/frontend/components/TableColumns.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>IssueListTitleColumn,r:()=>IssueListTitleHeader});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),utils=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),errorTrackingBulkSelectLogic=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts"),errorTrackingIssueSceneLogic=__webpack_require__("../../products/error_tracking/frontend/errorTrackingIssueSceneLogic.ts"),AssigneeDisplay=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeDisplay.tsx"),AssigneeSelect=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeSelect.tsx"),issueActionsLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),DropdownMenu=__webpack_require__("../../frontend/src/lib/ui/DropdownMenu/DropdownMenu.tsx"),frontend_utils=__webpack_require__("../../products/error_tracking/frontend/utils.ts"),Indicator=__webpack_require__("../../products/error_tracking/frontend/components/Indicator.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let IssueStatusSelect=_ref=>{let{status,options=frontend_utils.y$,onChange}=_ref,[showPopover,setShowPopover]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(DropdownMenu.h_,{open:showPopover,onOpenChange:setShowPopover,children:[(0,jsx_runtime.jsxs)(DropdownMenu.$F,{className:"flex items-center hover:bg-fill-button-tertiary-hover p-[0.1rem] rounded cursor-pointer",role:"button",children:[(0,jsx_runtime.jsx)(Indicator.Eg,{status:status,className:"ml-1 text-xs text-secondary"}),(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronDown,{})]}),(0,jsx_runtime.jsx)(IssueStatusDropdown,{status:status,options:options,onChange:status=>{setShowPopover(!1),onChange(status)}})]})};function IssueStatusDropdown(_ref2){let{status,options,onChange}=_ref2;return(0,jsx_runtime.jsx)(DropdownMenu.AW,{children:options.map(option=>(0,jsx_runtime.jsx)(DropdownMenu.Xi,{className:"text-base text-secondary hover:bg-fill-button-tertiary-hover hover:text-fill-button-tertiary px-1",asChild:!0,children:(0,jsx_runtime.jsx)(src.Jp,{fullWidth:!0,onClick:()=>option!==status&&onChange(option),role:"menuitem",size:"xsmall",active:option===status,children:(0,jsx_runtime.jsx)(Indicator.Eg,{status:option})})},option))})}var RuntimeIcon=__webpack_require__("../../products/error_tracking/frontend/components/RuntimeIcon.tsx");let IssueListTitleHeader=_ref=>{let{results}=_ref,{selectedIssueIds}=(0,index_esm.useValues)(errorTrackingBulkSelectLogic.t),{setSelectedIssueIds}=(0,index_esm.useActions)(errorTrackingBulkSelectLogic.t),allSelected=results.length==selectedIssueIds.length&&selectedIssueIds.length>0;return(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,jsx_runtime.jsx)(src.Hw,{checked:allSelected,onChange:()=>allSelected?setSelectedIssueIds([]):setSelectedIssueIds(results.map(r=>r.id))}),(0,jsx_runtime.jsx)("span",{children:"Issue"})]})},IssueListTitleColumn=props=>{let{selectedIssueIds,shiftKeyHeld,previouslyCheckedRecordIndex}=(0,index_esm.useValues)(errorTrackingBulkSelectLogic.t),{setSelectedIssueIds,setPreviouslyCheckedRecordIndex}=(0,index_esm.useActions)(errorTrackingBulkSelectLogic.t),{updateIssueAssignee,updateIssueStatus}=(0,index_esm.useActions)(issueActionsLogic.x),record=props.record,checked=selectedIssueIds.includes(record.id),runtime=(0,utils.sm)(record.library),recordIndex=props.recordIndex;return(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-x-2 group my-1",children:[(0,jsx_runtime.jsx)(src.Hw,{className:"h-[1rem]",checked:checked,onChange:newValue=>{let includedIds=[];if(shiftKeyHeld&&null!==previouslyCheckedRecordIndex){let start=Math.min(previouslyCheckedRecordIndex,recordIndex),end=Math.max(previouslyCheckedRecordIndex,recordIndex)+1;includedIds.push(...props.results.slice(start,end).map(r=>r.id))}else includedIds.push(record.id);setPreviouslyCheckedRecordIndex(recordIndex),setSelectedIssueIds(newValue?[...new Set([...selectedIssueIds,...includedIds])]:selectedIssueIds.filter(id=>!includedIds.includes(id)))}}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-[3px]",children:[(0,jsx_runtime.jsx)(src.rU,{className:"flex-1 pr-12",to:urls.j.errorTrackingIssue(record.id,{timestamp:record.last_seen}),onClick:()=>{let issueLogic=(0,errorTrackingIssueSceneLogic.r)({id:record.id,timestamp:record.last_seen});issueLogic.mount(),issueLogic.actions.setIssue(record)},children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center h-[1rem] gap-2",children:[(0,jsx_runtime.jsx)(RuntimeIcon.Z,{className:"shrink-0",runtime:runtime,fontSize:"0.7rem"}),(0,jsx_runtime.jsx)("span",{className:"font-semibold text-[0.9rem] line-clamp-1",children:record.name||"Unknown Type"})]})}),(0,jsx_runtime.jsx)("div",{title:record.description||void 0,className:"font-medium line-clamp-1 text-[var(--gray-8)]",children:record.description}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center text-secondary",children:[(0,jsx_runtime.jsx)(IssueStatusSelect,{status:record.status,onChange:status=>updateIssueStatus(record.id,status)}),(0,jsx_runtime.jsx)(CustomGroupSeparator,{}),(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:record.assignee,onChange:assignee=>updateIssueAssignee(record.id,assignee),children:anyAssignee=>(0,jsx_runtime.jsxs)("div",{className:"flex items-center hover:bg-fill-button-tertiary-hover p-[0.1rem] rounded cursor-pointer",role:"button",children:[(0,jsx_runtime.jsx)(AssigneeDisplay._x,{assignee:anyAssignee,size:"xsmall"}),(0,jsx_runtime.jsx)(AssigneeDisplay.VQ,{assignee:anyAssignee,className:"ml-1 text-xs text-secondary",size:"xsmall"}),(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronDown,{})]})}),(0,jsx_runtime.jsx)(CustomGroupSeparator,{}),(0,jsx_runtime.jsx)(TZLabel.w,{time:record.first_seen,className:"border-dotted border-b text-xs ml-1",delayMs:750}),(0,jsx_runtime.jsx)(icons.VG,{className:"text-quaternary mx-1"}),record.last_seen?(0,jsx_runtime.jsx)(TZLabel.w,{time:record.last_seen,className:"border-dotted border-b text-xs",delayMs:750}):(0,jsx_runtime.jsx)(src.yW,{})]})]})]})},CustomGroupSeparator=()=>(0,jsx_runtime.jsx)(posthog_icons_es.IconMinus,{className:"text-quaternary",transform:"rotate(90)"})},"../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>errorTrackingBulkSelectLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx");let errorTrackingBulkSelectLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorTrackingBulkSelectLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({actions:[_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_1__.x,["mutationSuccess","mutationFailure"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setSelectedIssueIds:ids=>({ids}),setShiftKeyHeld:shiftKeyHeld=>({shiftKeyHeld}),setPreviouslyCheckedRecordIndex:index=>({index})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({selectedIssueIds:[[],{setSelectedIssueIds:(_,_ref)=>{let{ids}=_ref;return ids}}],shiftKeyHeld:[!1,{setShiftKeyHeld:(_,_ref2)=>{let{shiftKeyHeld}=_ref2;return shiftKeyHeld}}],previouslyCheckedRecordIndex:[null,{setPreviouslyCheckedRecordIndex:(_,_ref3)=>{let{index}=_ref3;return index}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref4=>{let{actions}=_ref4;return{mutationSuccess:()=>actions.setSelectedIssueIds([]),mutationFailure:()=>actions.setSelectedIssueIds([])}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref5=>{let{actions,cache}=_ref5,onKeyChange=event=>{actions.setShiftKeyHeld(event.shiftKey)};window.addEventListener("keydown",onKeyChange),window.addEventListener("keyup",onKeyChange),cache.onKeyChange=onKeyChange}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.beforeUnmount)(_ref6=>{let{cache}=_ref6;window.removeEventListener("keydown",cache.onKeyChange),window.removeEventListener("keyup",cache.onKeyChange)})])},"../../products/error_tracking/frontend/impact/ErrorTrackingImpactScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingImpactScene:()=>ErrorTrackingImpactScene,Options:()=>Options,scene:()=>scene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/utils.tsx"),scenes_insights_EmptyStates__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/insights/EmptyStates/index.ts"),products_actions_frontend_components_EventName__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../products/actions/frontend/components/EventName.tsx"),_components_ErrorTrackingSetupPrompt_ErrorTrackingSetupPrompt__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../products/error_tracking/frontend/components/ErrorTrackingSetupPrompt/ErrorTrackingSetupPrompt.tsx"),_components_IssueActions_BulkActions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/BulkActions.tsx"),_components_IssueImpactTool__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../products/error_tracking/frontend/components/IssueImpactTool.tsx"),_components_TableColumns__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../products/error_tracking/frontend/components/TableColumns.tsx"),_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts"),_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../products/error_tracking/frontend/impact/errorTrackingImpactSceneLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let scene={component:ErrorTrackingImpactScene,logic:_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_11__.l};function ErrorTrackingImpactScene(){let{completedInitialLoad,issuesLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_11__.l);return(0,lib_hooks_useFeatureFlag__WEBPACK_IMPORTED_MODULE_2__.y)("ERROR_TRACKING_ISSUE_CORRELATION")?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_components_ErrorTrackingSetupPrompt_ErrorTrackingSetupPrompt__WEBPACK_IMPORTED_MODULE_6__.n,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_IssueImpactTool__WEBPACK_IMPORTED_MODULE_8__.J,{}),issuesLoading||completedInitialLoad?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"px-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(Options,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(Table,{})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(InitialState,{})]}):null}let Table=()=>{let{issues,issuesLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_11__.l),columns=[{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_TableColumns__WEBPACK_IMPORTED_MODULE_9__.r,{results:issues}),render:function RenderTitle(_,record,recordIndex){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_TableColumns__WEBPACK_IMPORTED_MODULE_9__.O,{results:issues,record:record,recordIndex:recordIndex})}},{title:"Impact",key:"impact",align:"center",tooltip:"The impact is measured by the odds ratio, which indicates the likelihood of this issue causing the event not to occur.",sorter:(a,b)=>a.odds_ratio-b.odds_ratio,render:function RenderImpact(_,record){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:"text-lg font-medium",children:(0,lib_utils__WEBPACK_IMPORTED_MODULE_3__.d$)(record.odds_ratio)})},width:"20%"},{title:"Population",key:"population",align:"center",sorter:(a,b)=>population(a)-population(b),render:function RenderPopulation(_,record){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:"text-lg font-medium",children:(0,lib_utils__WEBPACK_IMPORTED_MODULE_3__.d$)(population(record))})},width:"20%"}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.g3,{columns:columns,loading:issuesLoading,dataSource:issues,emptyState:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(scenes_insights_EmptyStates__WEBPACK_IMPORTED_MODULE_4__.dV,{heading:"No issues found",detail:"It looks like there are no issues affecting this event, please try a different one."}),expandable:{noIndent:!0,expandedRowRender:function RenderExpandedRow(record){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.g3,{embedded:!0,stealth:!0,columns:[{dataIndex:"row"},{title:record.event,dataIndex:"event"},{title:`No ${record.event}`,dataIndex:"no_event"}],dataSource:[{row:"Exception occurred",event:record.population.both,no_event:record.population.exception_only},{row:"No exception",event:record.population.success_only,no_event:record.population.neither}]})}}})},InitialState=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"flex flex-col flex-1 items-center mt-24 text-center mb-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("h2",{className:"text-xl font-bold",children:"Understand the impact of issues"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"text-sm text-secondary mb-2",children:"See what issues are causing the most impact on your conversion, activation or any other event you're tracking in PostHog."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(EventSelector,{})]}),Options=()=>{let{selectedIssueIds}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_10__.t),{issues}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_11__.l);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"sticky top-[var(--breadcrumbs-height-compact)] z-20 py-2 bg-primary",children:selectedIssueIds.length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_IssueActions_BulkActions__WEBPACK_IMPORTED_MODULE_7__.c,{issues:issues,selectedIds:selectedIssueIds}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(EventSelector,{})})},EventSelector=()=>{let{events}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_11__.l),{setEvents}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_errorTrackingImpactSceneLogic__WEBPACK_IMPORTED_MODULE_11__.l);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(products_actions_frontend_components_EventName__WEBPACK_IMPORTED_MODULE_5__.B,{value:events&&events.length>0?events[0]:null,onChange:event=>setEvents(event?[event]:[]),allEventsOption:"clear",placement:"bottom"})},population=issue=>Object.values(issue.population).reduce((acc,val)=>acc+val,0)},"../../products/error_tracking/frontend/impact/errorTrackingImpactSceneLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>errorTrackingImpactSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.7_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/api.ts"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../products/error_tracking/frontend/errorTrackingBulkSelectLogic.ts"),_queries__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/queries.ts");let errorTrackingImpactSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","configuration","errorTrackingImpactSceneLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({actions:[_errorTrackingBulkSelectLogic__WEBPACK_IMPORTED_MODULE_6__.t,["setSelectedIssueIds"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setEvents:events=>({events})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({events:[null,{setEvents:(_,_ref)=>{let{events}=_ref;return events}}],completedInitialLoad:[!1,{loadIssuesSuccess:()=>!0}]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref2=>{let{values}=_ref2;return{issues:[[],{loadIssues:async()=>values.events?(await lib_api__WEBPACK_IMPORTED_MODULE_3__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_7__.x3)({events:values.events}),{refresh:"force_blocking"})).results:[]}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref3=>{let{actions}=_ref3;return{setEvents:()=>actions.loadIssues()}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({breadcrumbs:[()=>[],()=>[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_4__.x.ErrorTracking,path:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.j.errorTracking(),name:"Error tracking"},{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_4__.x.ErrorTrackingImpact,path:scenes_urls__WEBPACK_IMPORTED_MODULE_5__.j.errorTrackingImpact(),name:"Impact"}]]}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_2__.Vt)(_ref4=>{let{actions}=_ref4;return{events:()=>actions.setSelectedIssueIds([])}})])}}]);