(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./frontend/src/lib/components/CopyToClipboard.tsx":function(ce,D,e){"use strict";e.d(D,"a",function(){return Z});var H=e("./node_modules/core-js/modules/es.symbol.js"),ae=e.n(H),q=e("./node_modules/core-js/modules/es.symbol.description.js"),Ee=e.n(q),le=e("./node_modules/core-js/modules/es.object.to-string.js"),ee=e.n(le),x=e("./node_modules/core-js/modules/es.regexp.to-string.js"),V=e.n(x),X=e("./node_modules/@babel/runtime/helpers/extends.js"),te=e.n(X),U=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),R=e.n(U),t=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),ie=e.n(t),ne=e("./node_modules/react/index.js"),J=e.n(ne),re=e("./frontend/src/lib/utils.tsx"),pe=e("./frontend/src/lib/components/Tooltip.tsx"),de=e("./frontend/src/lib/components/icons.tsx"),ve=e("./frontend/src/lib/components/LemonButton/index.ts");function me(p,c){var a=Object.keys(p);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(p);c&&(d=d.filter(function(u){return Object.getOwnPropertyDescriptor(p,u).enumerable})),a.push.apply(a,d)}return a}function oe(p){for(var c=1;c<arguments.length;c++){var a=arguments[c]!=null?arguments[c]:{};c%2?me(Object(a),!0).forEach(function(d){R()(p,d,a[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach(function(d){Object.defineProperty(p,d,Object.getOwnPropertyDescriptor(a,d))})}return p}function Z(p){var c=p.children,a=p.explicitValue,d=p.description,u=p.selectable,P=u===void 0?!1:u,W=p.isValueSensitive,se=W===void 0?!1:W,T=p.tooltipMessage,k=T===void 0?null:T,G=p.iconStyle,F=G===void 0?{}:G,C=p.iconPosition,he=C===void 0?"end":C,Ae=p.style,Oe=ie()(p,["children","explicitValue","description","selectable","isValueSensitive","tooltipMessage","iconStyle","iconPosition","style"]),be=function(){return Object(re.t)(a!=null?a:c?c.toString():"",d)},je=J.a.createElement("span",te()({className:se?"ph-no-capture":"",style:oe({cursor:P?"text":"pointer",display:"inline-flex",alignItems:"center",flexDirection:he==="end"?"row":"row-reverse",flexWrap:"nowrap",width:"fit-content",wordBreak:"break-all"},Ae),onClick:P?void 0:be},Oe),J.a.createElement("span",{style:he==="start"?{flexGrow:1}:{}},c),J.a.createElement(ve.a,{compact:!0,icon:J.a.createElement(de.IconCopy,null),className:"copy-icon",onClick:P?be:void 0,style:oe(R()({},he==="end"?"marginLeft":"marginRight",4),F)}));return!P||k!==null?J.a.createElement(pe.a,{title:k||"Click to copy"},je):J.a.createElement(J.a.Fragment,null,je)}try{Z.displayName="CopyToClipboardInline",Z.__docgenInfo={description:"",displayName:"CopyToClipboardInline",props:{explicitValue:{defaultValue:null,description:"",name:"explicitValue",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},selectable:{defaultValue:{value:"false"},description:"Makes text selectable instead of copying on click anywhere",name:"selectable",required:!1,type:{name:"boolean"}},isValueSensitive:{defaultValue:{value:"false"},description:"",name:"isValueSensitive",required:!1,type:{name:"boolean"}},tooltipMessage:{defaultValue:{value:"null"},description:"",name:"tooltipMessage",required:!1,type:{name:"string | null"}},iconStyle:{defaultValue:{value:"{}"},description:"",name:"iconStyle",required:!1,type:{name:"Record<string, string | number>"}},iconPosition:{defaultValue:{value:"end"},description:"",name:"iconPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"]={docgenInfo:Z.__docgenInfo,name:"CopyToClipboardInline",path:"frontend/src/lib/components/CopyToClipboard.tsx#CopyToClipboardInline"})}catch(p){}},"./frontend/src/lib/components/PropertiesTable.tsx":function(ce,D,e){"use strict";e.d(D,"a",function(){return fe});var H=e("./node_modules/core-js/modules/es.array.filter.js"),ae=e("./node_modules/core-js/modules/es.array.includes.js"),q=e("./node_modules/core-js/modules/es.array.map.js"),Ee=e("./node_modules/core-js/modules/es.array.some.js"),le=e("./node_modules/core-js/modules/es.object.entries.js"),ee=e("./node_modules/core-js/modules/es.string.includes.js"),x=e("./node_modules/core-js/modules/es.string.starts-with.js"),V=e("./node_modules/@babel/runtime/helpers/typeof.js"),X=e.n(V),te=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),U=e.n(te),R=e("./node_modules/react/index.js"),t=e.n(R),ie=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),ne=e("./node_modules/antd/es/input/index.js"),J=e("./node_modules/antd/es/dropdown/index.js"),re=e("./node_modules/antd/es/menu/index.js"),pe=e("./node_modules/antd/es/popconfirm/index.js"),de=e("./frontend/src/lib/utils.tsx"),ve=e("./frontend/src/lib/components/icons.tsx"),me=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),oe=e.n(me),Z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss"),p=e.n(Z),c={};c.insert="head",c.singleton=!1;var a=oe()(p.a,c),d=p.a.locals||{},u=e("./frontend/src/lib/components/LemonTable/index.ts"),P=e("./frontend/src/lib/components/CopyToClipboard.tsx"),W=e("./node_modules/kea/lib/index.esm.js"),se=e("./frontend/src/models/propertyDefinitionsModel.ts"),T=e("./frontend/src/lib/components/LemonButton/index.ts"),k=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),G=e.n(k),F=e("./node_modules/antd/es/button/index.js"),C=e("./node_modules/antd/es/radio/index.js"),he=e("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),Ae=e("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),Oe=e("./node_modules/@ant-design/icons/es/icons/CheckOutlined.js"),be=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),je=e("./node_modules/@ant-design/icons/es/icons/StopOutlined.js"),Te=e("./node_modules/antd/lib/modal/Modal.js"),K=e.n(Te);function Le(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,o)}return r}function ue(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Le(Object(r),!0).forEach(function(o){G()(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}function Ce(s){var n=s.editProperty,r={creating:!1,propertyType:"string"},o=Object(R.useState)(r),i=U()(o,2),m=i[0],y=i[1],L=function(){m.key&&m.value!==void 0&&(n(m.key,m.value),y(r))};return t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"mb"},t.a.createElement("div",{className:"text-right"},t.a.createElement(F.a,{"data-attr":"add-prop-button",onClick:function(){return y(ue(ue({},m),{},{creating:!0}))},type:"primary",icon:t.a.createElement(he.a,null)},"New property"))),t.a.createElement(K.a,{visible:m.creating,destroyOnClose:!0,onCancel:function(){return y(r)},title:"Adding new property",okText:t.a.createElement(t.a.Fragment,null,t.a.createElement(Ae.a,{style:{marginRight:4}}),"Save Property"),okButtonProps:{disabled:!m.key||m.value===void 0},onOk:L},t.a.createElement("div",{className:"input-set"},t.a.createElement("label",{htmlFor:"propertyKey"},"Key"),t.a.createElement(ne.a,{id:"propertyKey",autoFocus:!0,placeholder:"try email, first_name, is_verified, membership_level, total_revenue",onChange:function(h){return y(ue(ue({},m),{},{key:h.target.value}))}})),t.a.createElement("div",{className:"input-set"},t.a.createElement("label",{htmlFor:"propertyType"},"Type of Property"),t.a.createElement("div",null,t.a.createElement(C.a.Group,{value:m.propertyType,onChange:function(h){return y(ue(ue({},m),{},{propertyType:h.target.value,value:h.target.value==="string"?void 0:"true"}))},id:"propertyType",buttonStyle:"solid"},t.a.createElement(C.a.Button,{value:"string"},"Text or Number"),t.a.createElement(C.a.Button,{value:"boolean"},"Boolean or Null")))),t.a.createElement("div",{className:"input-set"},t.a.createElement("label",{htmlFor:"propertyValue"},"Value"),m.propertyType==="boolean"?t.a.createElement("div",null,t.a.createElement(C.a.Group,{value:m.value,onChange:function(h){return y(ue(ue({},m),{},{value:h.target.value}))},id:"propertyValue",buttonStyle:"solid"},t.a.createElement(C.a.Button,{value:"true",defaultChecked:!0},t.a.createElement(Oe.a,null)," True"),t.a.createElement(C.a.Button,{value:"false"},t.a.createElement(be.a,null)," False"),t.a.createElement(C.a.Button,{value:"null"},t.a.createElement(je.a,null)," Null"))):t.a.createElement(ne.a,{placeholder:"try email@example.com, gold, 1",onChange:function(h){return y(ue(ue({},m),{},{value:h.target.value}))},id:"propertyValue",onKeyDown:function(h){return h.key==="Enter"&&L()}}))))}try{Ce.displayName="NewPropertyComponent",Ce.__docgenInfo={description:"",displayName:"NewPropertyComponent",props:{editProperty:{defaultValue:null,description:"",name:"editProperty",required:!0,type:{name:"(key: string, newValue?: string | number | boolean | null | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"]={docgenInfo:Ce.__docgenInfo,name:"NewPropertyComponent",path:"frontend/src/scenes/persons/NewPropertyComponent.tsx#NewPropertyComponent"})}catch(s){}function Ie(s){var n=s.value,r=s.onChange;return t.a.createElement(ne.a,{defaultValue:n,autoFocus:!0,onBlur:function(){return r(null,!1)},onPressEnter:function(i){return r(i.target.value,!0)}})}function De(s){var n=s.value,r=s.rootKey,o=s.onEdit,i=s.nestingLevel,m=s.useDetectedPropertyType,y=Object(W.useValues)(se.a),L=y.describeProperty,S=Object(R.useState)(!1),h=U()(S,2),l=h[0],v=h[1],f=r&&!ie.e.includes(r)&&(!i||i<=1)&&o,b=["string","number","bigint"],M=["boolean","null"],B;r&&m&&(B=L(r));var Q=n===null?"null":X()(n),g=n===null?"null":String(n),ye=function(A,N){v(!1),r!==void 0&&N&&o&&A!=n&&o(r,A,n)},O=t.a.createElement("span",{className:f?"editable ph-no-capture":"ph-no-capture",onClick:function(){return f&&b.includes(Q)&&v(!0)}},Object(de.eb)(n)?t.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"value-link"},t.a.createElement("span",null,g),t.a.createElement(ve.IconOpenInNew,null)):g);return t.a.createElement("div",{className:"properties-table-value"},l?t.a.createElement(Ie,{value:n,onChange:ye}):t.a.createElement(t.a.Fragment,null,f&&M.includes(Q)?t.a.createElement(J.a,{overlay:t.a.createElement(re.a,{onClick:function(A){var N=A.key,j=null;N==="t"?j=!0:N==="f"&&(j=!1),ye(j,!0)}},t.a.createElement(re.a.Item,{key:"t"},"true"),t.a.createElement(re.a.Item,{key:"f"},"false"),t.a.createElement(re.a.Item,{key:"n",danger:!0},"null"))},O):t.a.createElement(P.a,{description:"property value",explicitValue:g,selectable:!0,isValueSensitive:!0},O),t.a.createElement("div",{className:"property-value-type"},B||Q)))}function fe(s){var n=s.properties,r=s.rootKey,o=s.onEdit,i=s.sortProperties,m=i===void 0?!1:i,y=s.searchable,L=y===void 0?!1:y,S=s.embedded,h=S===void 0?!0:S,l=s.nestingLevel,v=l===void 0?0:l,f=s.onDelete,b=s.className,M=s.useDetectedPropertyType,B=Object(R.useState)(""),Q=U()(B,2),g=Q[0],ye=Q[1],O=Object(R.useMemo)(function(){if(!(n instanceof Object))return[];var A=Object.entries(n);if(g){var N=g.toLowerCase();A=A.filter(function(j){var ge=U()(j,2),Pe=ge[0],Se=ge[1];return Pe.toLowerCase().includes(N)||JSON.stringify(Se).toLowerCase().includes(N)})}return m&&A.sort(function(j,ge){var Pe=U()(j,1),Se=Pe[0],Ue=U()(ge,1),Me=Ue[0];return Se[0]==="$"&&Me[0]!=="$"?1:Se[0]!=="$"&&Me[0]==="$"||Se.toLowerCase()<Me.toLowerCase()?-1:1}),A},[n,m,g]);if(Array.isArray(n))return t.a.createElement("div",null,n.length?n.map(function(A,N){return t.a.createElement(fe,{key:N,properties:A,nestingLevel:v+1,useDetectedPropertyType:["$set","$set_once"].some(function(j){return j===r})?!1:M})}):t.a.createElement("div",{className:"property-value-type"},"ARRAY (EMPTY)"));var w=[{key:"key",title:"Key",width:"20rem",render:function(N,j){return t.a.createElement("div",{className:"properties-table-key"},t.a.createElement(ie.a,{value:j[0]}))},sorter:function(N,j){return String(N[0]).localeCompare(String(j[0]))}},{key:"value",title:"Value",render:function(N,j){return t.a.createElement(fe,{properties:j[1],rootKey:j[0],onEdit:o,nestingLevel:v+1,useDetectedPropertyType:["$set","$set_once"].some(function(ge){return ge===r})?!1:M})}}];return f&&v===0&&w.push({key:"delete",title:"",width:0,render:function(N,j){return!ie.e.includes(j[0])&&!String(j[0]).startsWith("$initial_")&&t.a.createElement(pe.a,{onConfirm:function(){return f(j[0])},okButtonProps:{danger:!0},okText:"Delete",title:t.a.createElement(t.a.Fragment,null,"Are you sure you want to delete property ",t.a.createElement("code",null,j[0]),"?"," ",t.a.createElement("b",null,"This cannot be undone.")),placement:"left"},t.a.createElement(T.a,{icon:t.a.createElement(ve.IconDeleteForever,null),status:"danger",compact:!0}))}}),n instanceof Object?t.a.createElement(t.a.Fragment,null,L&&t.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"}},t.a.createElement(ne.a.Search,{placeholder:"Search for property keys and values",className:"mb",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},value:g,onChange:function(N){ye(N.target.value)}}),o&&t.a.createElement(Ce,{editProperty:o})),t.a.createElement(u.a,{columns:w,showHeader:!h,size:"small",rowKey:"0",embedded:h,dataSource:O,className:b,emptyState:"This property value is an empty object."})):t.a.createElement(De,{value:n,rootKey:r,onEdit:o,nestingLevel:v,useDetectedPropertyType:M})}try{fe.displayName="PropertiesTable",fe.__docgenInfo={description:"",displayName:"PropertiesTable",props:{properties:{defaultValue:null,description:"",name:"properties",required:!0,type:{name:"any"}},sortProperties:{defaultValue:{value:"false"},description:"",name:"sortProperties",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"",name:"searchable",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"true"},description:"Whether this table should be style for being embedded. Default: true.",name:"embedded",required:!1,type:{name:"boolean"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((key: string) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},useDetectedPropertyType:{defaultValue:null,description:"",name:"useDetectedPropertyType",required:!1,type:{name:"boolean"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((key: string, newValue: any, oldValue?: any) => void)"}},nestingLevel:{defaultValue:{value:"0"},description:"",name:"nestingLevel",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"]={docgenInfo:fe.__docgenInfo,name:"PropertiesTable",path:"frontend/src/lib/components/PropertiesTable.tsx#PropertiesTable"})}catch(s){}},"./frontend/src/scenes/actions/EventName.tsx":function(ce,D,e){"use strict";e.d(D,"a",function(){return ee}),e.d(D,"b",function(){return x});var H=e("./node_modules/react/index.js"),ae=e.n(H),q=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Ee=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),le=e("./frontend/src/lib/components/TaxonomicFilter/types.ts");function ee(V){var X=V.value,te=V.onChange;return ae.a.createElement(Ee.c,{groupType:le.a.Events,onChange:te,value:X,type:"secondary",style:{maxWidth:"24rem"},placeholder:"Choose an event",dataAttr:"event-name-box",renderValue:function(R){return ae.a.createElement(q.a,{value:R,disablePopover:!0})},allowClear:!0})}function x(V){var X=V.value,te=V.onChange;return ae.a.createElement(Ee.a,{groupType:le.a.Events,onChange:te,value:X,type:"secondary",placeholder:"Select an event",dataAttr:"event-name-box",renderValue:function(R){return ae.a.createElement(q.a,{value:R,disablePopover:!0})},allowClear:!0})}try{ee.displayName="EventName",ee.__docgenInfo={description:"",displayName:"EventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#EventName"]={docgenInfo:ee.__docgenInfo,name:"EventName",path:"frontend/src/scenes/actions/EventName.tsx#EventName"})}catch(V){}try{x.displayName="LemonEventName",x.__docgenInfo={description:"",displayName:"LemonEventName",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/actions/EventName.tsx#LemonEventName"]={docgenInfo:x.__docgenInfo,name:"LemonEventName",path:"frontend/src/scenes/actions/EventName.tsx#LemonEventName"})}catch(V){}},"./frontend/src/scenes/events/EventDetails.tsx":function(ce,D,e){"use strict";e.d(D,"a",function(){return p});var H=e("./node_modules/core-js/modules/es.object.keys.js"),ae=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),q=e.n(ae),Ee=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),le=e.n(Ee),ee=e("./node_modules/react/index.js"),x=e.n(ee),V=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),X=e("./frontend/src/lib/components/PropertiesTable.tsx"),te=e("./frontend/src/scenes/events/EventElements.tsx"),U=e("./node_modules/antd/es/tabs/index.js"),R=e("./node_modules/antd/es/button/index.js"),t=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),ie=e.n(t),ne=e("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),J=e("./frontend/src/lib/utils.tsx");function re(c,a){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(c);a&&(u=u.filter(function(P){return Object.getOwnPropertyDescriptor(c,P).enumerable})),d.push.apply(d,u)}return d}function pe(c){for(var a=1;a<arguments.length;a++){var d=arguments[a]!=null?arguments[a]:{};a%2?re(Object(d),!0).forEach(function(u){q()(c,u,d[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):re(Object(d)).forEach(function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(d,u))})}return c}function de(c){var a=c.event,d=a.event,u=a.id,P=a.uuid,W=a.distinct_id,se=a.properties,T=a.elements,k=a.timestamp,G=a.person,F=ie()(a,["event","id","uuid","distinct_id","properties","elements","timestamp","person"]),C=pe(pe(pe(pe({},u?{id:u}:null),P?{uuid:P}:null),{},{timestamp:k,event:d,distinct_id:W,properties:Object(J.xb)(se)},T&&T.length>0?{elements:T}:null),F);return x.a.createElement(ne.a,{language:ne.b.JSON},JSON.stringify(C,null,4))}try{de.displayName="EventJSON",de.__docgenInfo={description:"",displayName:"EventJSON",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventJSON.tsx#EventJSON"]={docgenInfo:de.__docgenInfo,name:"EventJSON",path:"frontend/src/scenes/events/EventJSON.tsx#EventJSON"})}catch(c){}var ve=e("./frontend/src/lib/dayjs.ts");function me(c,a){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(c);a&&(u=u.filter(function(P){return Object.getOwnPropertyDescriptor(c,P).enumerable})),d.push.apply(d,u)}return d}function oe(c){for(var a=1;a<arguments.length;a++){var d=arguments[a]!=null?arguments[a]:{};a%2?me(Object(d),!0).forEach(function(u){q()(c,u,d[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):me(Object(d)).forEach(function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(d,u))})}return c}var Z=U.a.TabPane;function p(c){for(var a=c.event,d=Object(ee.useState)(!1),u=le()(d,2),P=u[0],W=u[1],se={},T={},k=0,G=0,F=Object.keys(a.properties);G<F.length;G++){var C=F[G];V.d.event[C]&&V.d.event[C].hide&&(k+=1,P&&(T[C]=a.properties[C])),(!V.d.event[C]||!V.d.event[C].hide)&&(se[C]=a.properties[C])}return x.a.createElement(U.a,{"data-attr":"event-details",defaultActiveKey:"properties",style:{float:"left",width:"100%"},tabBarStyle:{margin:0}},x.a.createElement(Z,{tab:"Properties",key:"properties"},x.a.createElement(X.a,{properties:oe(oe({$timestamp:Object(ve.a)(a.timestamp).toISOString()},se),T),useDetectedPropertyType:!0}),k>0&&x.a.createElement("small",null,x.a.createElement(R.a,{style:{margin:"8px 0 0 8px"},type:"link",onClick:function(){return W(!P)}},P?"Showing ":"",k," hidden properties. Click to ",P?"hide":"show","."))),x.a.createElement(Z,{tab:"JSON",key:"json"},x.a.createElement(de,{event:a})),a.elements&&a.elements.length>0&&x.a.createElement(Z,{tab:"Elements",key:"elements"},x.a.createElement(te.a,{event:a})))}try{p.displayName="EventDetails",p.__docgenInfo={description:"",displayName:"EventDetails",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventDetails.tsx#EventDetails"]={docgenInfo:p.__docgenInfo,name:"EventDetails",path:"frontend/src/scenes/events/EventDetails.tsx#EventDetails"})}catch(c){}},"./frontend/src/scenes/events/EventElements.tsx":function(ce,D,e){"use strict";e.d(D,"a",function(){return p});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(H),q=e("./node_modules/core-js/modules/es.array.fill.js"),Ee=e.n(q),le=e("./node_modules/core-js/modules/es.array.join.js"),ee=e.n(le),x=e("./node_modules/core-js/modules/es.array.map.js"),V=e.n(x),X=e("./node_modules/core-js/modules/es.array.slice.js"),te=e.n(X),U=e("./node_modules/core-js/modules/es.object.entries.js"),R=e.n(U),t=e("./node_modules/core-js/modules/es.regexp.exec.js"),ie=e.n(t),ne=e("./node_modules/core-js/modules/es.string.replace.js"),J=e.n(ne),re=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),pe=e.n(re),de=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ve=e.n(de),me=e("./node_modules/react/index.js"),oe=e.n(me);function Z(c){return Array(c).fill("    ").join("")}function p(c){var a=c.event,d=ve()(a.elements||[]).reverse();return d=d.slice(Math.max(d.length-10,1)),oe.a.createElement("div",null,d.map(function(u,P){return oe.a.createElement("pre",{className:"code",key:P,style:{margin:0,padding:0,borderRadius:0,backgroundColor:P===d.length-1?"var(--primary)":void 0}},Z(P),"<",u.tag_name,u.attr_id&&' id="'.concat(u.attr_id,'"'),Object.entries(u.attributes).map(function(W){var se=pe()(W,2),T=se[0],k=se[1];return oe.a.createElement("span",{key:T}," ".concat(T.replace("attr__",""),'="').concat(k,'"'))}),">",u.text,P===d.length-1&&oe.a.createElement("span",null,"</",u.tag_name,">"))}),ve()(d).reverse().slice(1).map(function(u,P){return oe.a.createElement("pre",{className:"code",key:P,style:{margin:0,padding:0,borderRadius:0}},Z(d.length-P-2),"</",u.tag_name,">")}))}try{p.displayName="EventElements",p.__docgenInfo={description:"",displayName:"EventElements",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"EventType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventElements.tsx#EventElements"]={docgenInfo:p.__docgenInfo,name:"EventElements",path:"frontend/src/scenes/events/EventElements.tsx#EventElements"})}catch(c){}},"./frontend/src/scenes/events/EventsTable.tsx":function(ce,D,e){"use strict";e.d(D,"a",function(){return h});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e("./node_modules/core-js/modules/es.array.find.js"),q=e("./node_modules/core-js/modules/es.array.join.js"),Ee=e("./node_modules/core-js/modules/es.array.map.js"),le=e("./node_modules/core-js/modules/es.array.some.js"),ee=e("./node_modules/core-js/modules/es.array.splice.js"),x=e("./node_modules/core-js/modules/es.object.keys.js"),V=e("./node_modules/core-js/modules/es.object.to-string.js"),X=e("./node_modules/core-js/modules/es.regexp.to-string.js"),te=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),U=e.n(te),R=e("./node_modules/react/index.js"),t=e.n(R),ie=e("./node_modules/kea/lib/index.esm.js"),ne=e("./frontend/src/scenes/events/EventDetails.tsx"),J=e("./frontend/src/lib/components/Link.tsx"),re=e("./node_modules/antd/es/button/index.js"),pe=e("./node_modules/core-js/modules/es.array.filter.js"),de=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),ve=e.n(de),me=e("./node_modules/kea-router/lib/index.js"),oe=e("./node_modules/core-js/modules/es.regexp.exec.js"),Z=e("./node_modules/core-js/modules/es.string.replace.js"),p=e("./node_modules/@babel/runtime/helpers/typeof.js"),c=e.n(p);function a(l){var v=l.value;return t.a.createElement("span",{title:v},c()(v)==="object"?JSON.stringify(v):v&&v.toString().replace(/(^\w+:|^)\/\//,""))}try{a.displayName="Property",a.__docgenInfo={description:"",displayName:"Property",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Property.tsx#Property"]={docgenInfo:a.__docgenInfo,name:"Property",path:"frontend/src/lib/components/Property.tsx#Property"})}catch(l){}var d=e("./frontend/src/lib/components/PropertyFilters/utils.ts");function u(l,v){var f=Object.keys(l);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(l);v&&(b=b.filter(function(M){return Object.getOwnPropertyDescriptor(l,M).enumerable})),f.push.apply(f,b)}return f}function P(l){for(var v=1;v<arguments.length;v++){var f=arguments[v]!=null?arguments[v]:{};v%2?u(Object(f),!0).forEach(function(b){ve()(l,b,f[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(f)):u(Object(f)).forEach(function(b){Object.defineProperty(l,b,Object.getOwnPropertyDescriptor(f,b))})}return l}function W(l){var v=l.property,f=l.value,b=l.filters,M=l.onClick,B=l.className,Q=Object(d.c)(b.properties),g=Q.find(function(w){return w.key===v&&w.value===f&&!w.operator})?Q.filter(function(w){return w.key!==v||w.value!==f||w.operator}):[].concat(U()(Q),[{key:v,value:f}]),ye=Object(me.combineUrl)(window.location.pathname,P(P({},b),{},{properties:g}),{}),O=ye.url;return t.a.createElement(J.a,{to:O,className:B,onClick:function(){M&&M(v,f)}},t.a.createElement(a,{value:f}))}try{W.displayName="FilterPropertyLink",W.__docgenInfo={description:"",displayName:"FilterPropertyLink",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((property: string, value: string | number) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"]={docgenInfo:W.__docgenInfo,name:"FilterPropertyLink",path:"frontend/src/lib/components/FilterPropertyLink.tsx#FilterPropertyLink"})}catch(l){}var se=e("./frontend/src/lib/utils.tsx"),T=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),k=e.n(T),G=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss"),F=e.n(G),C={};C.insert="head",C.singleton=!1;var he=k()(F.a,C),Ae=F.a.locals||{},Oe=e("./frontend/src/scenes/events/eventsTableLogic.ts"),be=e("./frontend/src/scenes/persons/PersonHeader.tsx"),je=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),Te=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),K=e("./frontend/src/types.ts"),Le=e("./frontend/src/scenes/actions/EventName.tsx"),ue=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Ce=e("./frontend/src/lib/components/Tooltip.tsx"),Ie=e("./node_modules/clsx/dist/clsx.m.js"),De=e("./frontend/src/lib/components/ResizableTable/tableConfigLogic.ts"),fe=e("./frontend/src/scenes/urls.ts"),s=e("./frontend/src/lib/components/LemonTable/index.ts"),n=e("./frontend/src/lib/components/icons.tsx"),r=e("./frontend/src/lib/components/LemonButton/index.ts"),o=e("./frontend/src/lib/components/LemonButton/More.tsx"),i=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),m=e("./frontend/src/scenes/teamLogic.ts"),y=e("./frontend/src/scenes/events/createActionFromEvent.tsx");function L(l){Object(R.useEffect)(function(){var v="hidden",f="visibilitychange";typeof document.msHidden!="undefined"?(v="msHidden",f="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(v="webkitHidden",f="webkitvisibilitychange");var b=function(){l(!document[v])};return document.addEventListener(f,b),function(){document.removeEventListener(f,b)}},[])}var S=e("./frontend/src/lib/components/ResizableTable/TableConfig.tsx");function h(l){var v=l.pageKey,f=l.fixedFilters,b=l.fixedColumns,M=l.sceneUrl,B=l.fetchMonths,Q=B===void 0?12:B,g=l.startingColumns,ye=l.showCustomizeColumns,O=ye===void 0?!0:ye,w=l.showExport,A=w===void 0?!0:w,N=l.showAutoload,j=N===void 0?!0:N,ge=l.showEventFilter,Pe=ge===void 0?!0:ge,Se=l.showRowExpanders,Ue=Se===void 0?!0:Se,Me=l.showActionsButton,Xe=Me===void 0?!0:Me,$e=l.showPersonColumn,Ze=$e===void 0?!0:$e,Ye=l.linkPropertiesToFilters,We=Ye===void 0?!0:Ye,ke=Object(ie.useValues)(m.a),Fe=ke.currentTeam,ze=Object(Oe.a)({fixedFilters:f,key:v,sceneUrl:M||fe.a.events(),fetchMonths:Q}),_e=Object(ie.useValues)(ze),Re=_e.properties,qe=_e.eventsFormatted,He=_e.isLoading,et=_e.hasNext,Je=_e.isLoadingNext,Be=_e.eventFilter,tt=_e.automaticLoadEnabled,nt=_e.exportUrl,rt=_e.highlightEvents,ot=_e.months,Ge=Object(ie.useValues)(Object(De.a)({startingColumns:g})),Ve=Ge.tableWidth,Ke=Ge.selectedColumns,xe=Object(ie.useActions)(ze),st=xe.fetchNextEvents,at=xe.prependNewEvents,lt=xe.setEventFilter,it=xe.toggleAutomaticLoad,dt=xe.startDownload,ut=xe.setPollingActive,ct=xe.setProperties,mt=!(f!=null&&f.person_id);L(ut);var Qe=function(E,$){var I=E.date_break,_=E.new_events;return{children:I||(_?t.a.createElement(r.a,{icon:t.a.createElement(n.IconSync,null),style:{borderRadius:0},onClick:function(){return at()},center:!0,fullWidth:!0},"There are new events. Click here to load them"):"???"),props:{colSpan:$+1,style:_?{padding:0}:void 0}}},pt={title:"Person",key:"person",render:function(E,$){var I,_,z=$.event;return z?mt&&((I=z.person)===null||I===void 0||(_=I.distinct_ids)===null||_===void 0?void 0:_.length)?t.a.createElement(J.a,{to:fe.a.person(z.person.distinct_ids[0])},t.a.createElement(be.a,{withIcon:!0,person:z.person})):t.a.createElement(be.a,{withIcon:!0,person:z.person}):{props:{colSpan:0}}}},we=Object(R.useMemo)(function(){var Y=[{title:"Event",key:"event",width:"16rem",render:function($,I){if(!I.event)return Qe(I,Ve);var _=I.event;return t.a.createElement(Te.a,{value:Object(se.g)(_)})},ellipsis:!0},{title:"URL / Screen",key:"url",width:"4rem",render:function($,I){var _=I.event;if(!_)return{props:{colSpan:0}};var z=_.properties.$current_url?"$current_url":"$screen_name";return We?t.a.createElement(W,{className:"ph-no-capture",property:z,value:_.properties[z],filters:{properties:Re}}):t.a.createElement(a,{value:_.properties[z]})},ellipsis:!0},{title:"Source",key:"source",render:function($,I){var _=I.event;return _?We?t.a.createElement(W,{property:"$lib",value:_.properties.$lib,filters:{properties:Re}}):t.a.createElement(a,{value:_.properties.$lib}):{props:{colSpan:0}}}}];return Ze&&Y.splice(1,0,pt),Y},[Ve]),vt=Object(R.useMemo)(function(){var Y=Ke==="DEFAULT"?U()(we):Ke.map(function(E,$){return we.find(function(I){return I.key===E})||{title:Te.d.event[E]?Te.d.event[E].label:E,key:E,render:function(_,z){var Ne=z.event;return Ne?We?t.a.createElement(W,{className:"ph-no-capture ",property:E,value:Ne.properties[E],filters:{properties:Re}}):t.a.createElement(a,{value:Ne.properties[E]}):$===0?Qe(z,Ve):{props:{colSpan:0}}}}});return Y.push({title:"Time",key:"time",render:function($,I){var _=I.event;return _?t.a.createElement(je.b,{time:_.timestamp,showSeconds:!0}):{props:{colSpan:0}}}}),Xe&&Y.push({key:"actions",width:0,render:function($,I){var _=I.event;if(!_)return{props:{colSpan:0}};var z;return _.event==="$pageview"?z={insight:K.s.TRENDS,interval:"day",display:K.d.ActionsLineGraph,actions:[],events:[{id:"$pageview",name:"$pageview",type:"events",order:0,properties:[{key:"$current_url",value:_.properties.$current_url,type:"event"}]}]}:_.event!=="$autocapture"&&(z={insight:K.s.TRENDS,interval:"day",display:K.d.ActionsLineGraph,actions:[],events:[{id:_.event,name:_.event,type:"events",order:0,properties:[]}]}),t.a.createElement(o.a,{overlay:t.a.createElement(t.a.Fragment,null,Fe&&t.a.createElement(r.a,{type:"stealth",onClick:function(){return Object(y.a)(Fe.id,_,0,Fe.data_attributes||[])},fullWidth:!0,"data-attr":"events-table-create-action"},"Create action from event"),z&&t.a.createElement(r.a,{type:"stealth",to:fe.a.insightNew(z),fullWidth:!0,"data-attr":"events-table-usage"},"Try out in Insights"))})}}),b?Y.concat(b):Y},[Ke]);return t.a.createElement("div",{"data-attr":"manage-events-table"},t.a.createElement("div",{className:"events","data-attr":"events-table",style:{paddingTop:"1rem",borderTop:"1px solid var(--border)"}},t.a.createElement("div",{className:"mb",style:{display:"flex",gap:"1rem",flexWrap:"wrap",justifyContent:"space-between",alignItems:"start"}},t.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",flexDirection:"row",alignItems:"center",width:"100%"}},t.a.createElement(ue.a,{propertyFilters:Re,onChange:ct,pageKey:v,taxonomicPopoverPlacement:"bottom-start",style:{marginBottom:0,marginTop:0},eventNames:Be?[Be]:[],useLemonButton:!0,prefixComponent:Pe?t.a.createElement(Le.b,{value:Be,onChange:function(E){lt(E||"")}}):t.a.createElement(t.a.Fragment,null)})),t.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:"1rem",borderTop:j||O||A?"1px solid var(--border)":0,width:"100%",paddingTop:j||O||A?"1rem":0}},j&&t.a.createElement(i.a,{type:"primary",id:"autoload-switch",label:"Automatically load new events",checked:tt,onChange:it}),t.a.createElement("div",{style:{display:"flex",gap:"0.5rem",flexDirection:"row"}},O&&t.a.createElement(S.a,{immutableColumns:["event","person"],defaultColumns:we.map(function(Y){return Y.key||""})}),A&&nt&&t.a.createElement(Ce.a,{title:"Export up to 10,000 latest events.",placement:"left"},t.a.createElement(r.a,{type:"secondary",icon:t.a.createElement(n.IconExport,{style:{color:"var(--primary)"}}),onClick:dt},"Export"))))),t.a.createElement(s.a,{dataSource:qe,loading:He,columns:vt,key:Ke==="DEFAULT"?"default":Ke.join("-"),className:"ph-no-capture",loadingSkeletonRows:20,emptyState:He?void 0:Re.some(function(Y){return Object.keys(Y).length})||Be?"No events matching filters found in the last ".concat(ot," months!"):t.a.createElement(t.a.Fragment,null,"This project doesn't have any events. If you haven't integrated PostHog yet,"," ",t.a.createElement(J.a,{to:"/project/settings"},"click here to instrument analytics with PostHog in your product"),"."),rowKey:function(E){var $;return E.event?E.event.id+"-"+E.event.event:(($=E.date_break)===null||$===void 0?void 0:$.toString())||""},rowClassName:function(E){return Object(Ie.a)({"event-row":E.event,highlighted:E.event&&rt[E.event.id],"event-row-is-exception":E.event&&E.event.event==="$exception","event-row-date-separator":E.date_break,"event-row-new":E.new_events})},expandable:Ue?{expandedRowRender:function(E){var $=E.event;return $&&t.a.createElement(ne.a,{event:$})},rowExpandable:function(E){var $=E.event,I=E.date_break,_=E.new_events;return I||_?-1:!!$}}:void 0}),t.a.createElement(re.a,{type:"primary",onClick:st,loading:Je,style:{display:et||Je?"block":"none",margin:"2rem auto 1rem"}},"Load more events")))}try{h.displayName="EventsTable",h.__docgenInfo={description:"",displayName:"EventsTable",props:{pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},fixedFilters:{defaultValue:null,description:"",name:"fixedFilters",required:!1,type:{name:"FixedFilters"}},fixedColumns:{defaultValue:null,description:"",name:"fixedColumns",required:!1,type:{name:"LemonTableColumn<EventsTableRowItem, keyof EventsTableRowItem>[]"}},sceneUrl:{defaultValue:null,description:"",name:"sceneUrl",required:!1,type:{name:"string"}},fetchMonths:{defaultValue:{value:"12"},description:"",name:"fetchMonths",required:!1,type:{name:"number"}},startingColumns:{defaultValue:null,description:"",name:"startingColumns",required:!1,type:{name:"ColumnChoice"}},showCustomizeColumns:{defaultValue:{value:"true"},description:"",name:"showCustomizeColumns",required:!1,type:{name:"boolean"}},showExport:{defaultValue:{value:"true"},description:"",name:"showExport",required:!1,type:{name:"boolean"}},showAutoload:{defaultValue:{value:"true"},description:"",name:"showAutoload",required:!1,type:{name:"boolean"}},showEventFilter:{defaultValue:{value:"true"},description:"",name:"showEventFilter",required:!1,type:{name:"boolean"}},showRowExpanders:{defaultValue:{value:"true"},description:"",name:"showRowExpanders",required:!1,type:{name:"boolean"}},showActionsButton:{defaultValue:{value:"true"},description:"",name:"showActionsButton",required:!1,type:{name:"boolean"}},showPersonColumn:{defaultValue:{value:"true"},description:"",name:"showPersonColumn",required:!1,type:{name:"boolean"}},linkPropertiesToFilters:{defaultValue:{value:"true"},description:"",name:"linkPropertiesToFilters",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/EventsTable.tsx#EventsTable"]={docgenInfo:h.__docgenInfo,name:"EventsTable",path:"frontend/src/scenes/events/EventsTable.tsx#EventsTable"})}catch(l){}},"./frontend/src/scenes/events/eventsTableLogic.ts":function(ce,D,e){"use strict";e.d(D,"a",function(){return fe});var H=e("./node_modules/core-js/modules/es.array.concat.js"),ae=e.n(H),q=e("./node_modules/core-js/modules/es.array.filter.js"),Ee=e.n(q),le=e("./node_modules/core-js/modules/es.array.for-each.js"),ee=e.n(le),x=e("./node_modules/core-js/modules/es.array.iterator.js"),V=e.n(x),X=e("./node_modules/core-js/modules/es.array.join.js"),te=e.n(X),U=e("./node_modules/core-js/modules/es.array.map.js"),R=e.n(U),t=e("./node_modules/core-js/modules/es.array.reduce.js"),ie=e.n(t),ne=e("./node_modules/core-js/modules/es.array.splice.js"),J=e.n(ne),re=e("./node_modules/core-js/modules/es.object.to-string.js"),pe=e.n(re),de=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),ve=e.n(de),me=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),oe=e.n(me),Z=e("./node_modules/@babel/runtime/regenerator/index.js"),p=e.n(Z),c=e("./node_modules/regenerator-runtime/runtime.js"),a=e.n(c),d=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),u=e.n(d),P=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),W=e.n(P),se=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),T=e.n(se),k=e("./node_modules/kea/lib/index.esm.js"),G=e("./frontend/src/lib/utils.tsx"),F=e("./node_modules/kea-router/lib/index.js"),C=e.n(F),he=e("./frontend/src/lib/api.ts"),Ae=e("./frontend/src/scenes/teamLogic.ts"),Oe=e("./frontend/src/lib/dayjs.ts"),be=e("./frontend/src/lib/logic/featureFlagLogic.ts"),je=e("./frontend/src/lib/components/lemonToast.tsx");function Te(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,o)}return r}function K(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Te(Object(r),!0).forEach(function(o){W()(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}var Le=5,ue=365,Ce=5e3,Ie=function(n,r){var o=[];return o=n.map(function(i){return{event:i}}),o.forEach(function(i,m){var y=o[m-1];m>0&&i.event&&y.event&&!Object(Oe.a)(i.event.timestamp).isSame(y.event.timestamp,"day")&&o.splice(m,0,{date_break:Object(Oe.a)(i.event.timestamp).format("LL")})}),r.length>0&&o.splice(0,0,{new_events:!0}),o},De=function(n){return Object(Oe.b)().subtract(n,"day").toISOString()},fe=Object(k.kea)({path:function(n){return["scenes","events","eventsTableLogic",n]},props:{},key:function(n){return[n.fixedFilters?JSON.stringify(n.fixedFilters):"all",n.key,n.sceneUrl].filter(function(r){return!!r}).join("-")},connect:{values:[Ae.a,["currentTeamId"],be.a,["featureFlags"]]},actions:{setPollingActive:function(n){return{pollingActive:n}},setProperties:function(n){return Array.isArray(n)?n.length===0?{properties:[{}]}:{properties:n}:{properties:[n]}},fetchEvents:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return{nextParams:n}},fetchEventsSuccess:function(n){return n},fetchNextEvents:!0,fetchOrPollFailure:function(n){return{error:n}},pollEvents:!0,pollEventsSuccess:function(n){return{events:n}},prependEvents:function(n){return{events:n}},prependNewEvents:!0,setSelectedEvent:function(n){return{selectedEvent:n}},setPollTimeout:function(n){return{pollTimeout:n}},setEventFilter:function(n){return{event:n}},toggleAutomaticLoad:function(n){return{automaticLoadEnabled:n}},noop:function(n){return n},startDownload:!0},reducers:{pollingIsActive:[!0,{setPollingActive:function(n,r){var o=r.pollingActive;return o},pollEventsSuccess:function(n,r){var o=r.events;return o&&o.length?!1:n},prependNewEvents:function(){return!0},toggleAutomaticLoad:function(){return!0}}],properties:[[],{setProperties:function(n,r){var o=r.properties;return Object(G.s)(o)}}],eventFilter:["",{setEventFilter:function(n,r){var o=r.event;return o}}],isLoading:[!0,{fetchEvents:function(){return!0},fetchEventsSuccess:function(){return!1},fetchOrPollFailure:function(){return!1}}],isLoadingNext:[!1,{fetchNextEvents:function(){return!0},fetchEventsSuccess:function(){return!1}}],events:[[],{fetchEventsSuccess:function(n,r){var o=r.events,i=r.isNext;return i?[].concat(T()(n),T()(o)):o},prependEvents:function(n,r){var o=r.events;return[].concat(T()(o),T()(n))}}],hasNext:[!1,{fetchEvents:function(){return!1},fetchNextEvents:function(){return!1},fetchEventsSuccess:function(n,r){var o=r.hasNext;return o}}],orderBy:["-timestamp",{}],selectedEvent:[null,{setSelectedEvent:function(n,r){var o=r.selectedEvent;return o}}],newEvents:[[],{setProperties:function(){return[]},pollEventsSuccess:function(n,r){var o=r.events;return o||[]},prependEvents:function(){return[]}}],highlightEvents:[{},{prependEvents:function(n,r){var o=r.events;return o.reduce(function(i,m){return i[m.id]=!0,i},{})}}],pollTimeout:[0,{setPollTimeout:function(n,r){return r.pollTimeout}}],automaticLoadEnabled:[!1,{persist:!0},{toggleAutomaticLoad:function(n,r){var o=r.automaticLoadEnabled;return o}}]},selectors:function(n){var r=n.selectors,o=n.props;return{eventsFormatted:[function(){return[r.events,r.newEvents]},function(i,m){return Ie(i,m)}],exportUrl:[function(){return[r.currentTeamId,r.eventFilter,r.orderBy,r.properties,r.minimumQueryDate]},function(i,m,y,L,S){var h;return"/api/projects/".concat(i,"/events.csv?").concat(Object(G.Ab)(K(K(K({},o.fixedFilters||{}),{},{properties:[].concat(T()(L),T()(((h=o.fixedFilters)===null||h===void 0?void 0:h.properties)||[]))},m?{event:m}:{}),{},{orderBy:[y],after:S})))}],months:[function(){return[function(i,m){return m.fetchMonths}]},function(i){return i||12}],minimumQueryDate:[function(){return[r.months]},function(i){return Object(Oe.b)().subtract(i,"months").toISOString()}],pollAfter:[function(){return[r.events]},function(i){return(i==null?void 0:i.length)>0&&i[0].timestamp?i[0].timestamp:De(0)}]}},actionToUrl:function(n){var r=n.values;return{setProperties:function(){return[F.router.values.location.pathname,K(K({},F.router.values.searchParams),{},{properties:r.properties.length===0?void 0:r.properties}),F.router.values.hashParams,{replace:!0}]},setEventFilter:function(){return[F.router.values.location.pathname,K(K({},F.router.values.searchParams),{},{eventFilter:r.eventFilter}),F.router.values.hashParams,{replace:!0}]}}},urlToAction:function(n){var r=n.actions,o=n.values,i=n.props;return W()({},i.sceneUrl,function(m,y){r.setProperties(y.properties||o.properties||{}),y.eventFilter&&r.setEventFilter(y.eventFilter)})},events:function(n){var r=n.values;return{beforeUnmount:function(){return clearTimeout(r.pollTimeout||void 0)}}},listeners:function(n){var r=n.actions,o=n.values,i=n.props;return{startDownload:function(){je.a.success("The export is starting. It should finish soon"),window.location.href=o.exportUrl},setProperties:function(){return r.fetchEvents()},setEventFilter:function(){return r.fetchEvents()},fetchNextEvents:function(){var m=u()(p.a.mark(function L(){var S;return p.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:S=o.events,S.length===0?r.fetchEvents():r.fetchEvents({before:S[S.length-1].timestamp});case 2:case"end":return l.stop()}},L)}));function y(){return m.apply(this,arguments)}return y}(),fetchEvents:function(){var m=u()(p.a.mark(function L(S,h){var l,v,f,b,M,B,Q,g;return p.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(M=function(){return M=u()(p.a.mark(function A(N){var j;return p.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return j=K(K(K(K({after:N},i.fixedFilters||{}),{},{properties:f},v||{}),o.eventFilter?{event:o.eventFilter}:{}),{},{orderBy:[o.orderBy]}),Pe.abrupt("return",he.a.get("api/projects/".concat(o.currentTeamId,"/events/?").concat(Object(G.Ab)(j))));case 2:case"end":return Pe.stop()}},A)})),M.apply(this,arguments)},b=function(A){return M.apply(this,arguments)},v=S.nextParams,clearTimeout(o.pollTimeout),!(o.events.length>0)){O.next=9;break}return O.next=7,h(300);case 7:O.next=11;break;case 9:return O.next=11,h(1);case 11:return f=[].concat(T()(o.properties),T()(((l=i.fixedFilters)===null||l===void 0?void 0:l.properties)||[])),B=null,Q=!1,O.prev=14,O.next=17,b(De(Le));case 17:if(B=O.sent,B.results.length!==0){O.next=23;break}return O.next=21,b(De(ue));case 21:B=O.sent,Q=!0;case 23:O.next=29;break;case 25:return O.prev=25,O.t0=O.catch(14),r.fetchOrPollFailure(O.t0),O.abrupt("return");case 29:h(),r.fetchEventsSuccess({events:B.results,hasNext:!!B.next||!Q,isNext:!!v}),g=window.setTimeout(r.pollEvents,Ce),r.setPollTimeout(g);case 33:case"end":return O.stop()}},L,null,[[14,25]])}));function y(L,S){return m.apply(this,arguments)}return y}(),pollEvents:function(){var m=u()(p.a.mark(function L(S,h){var l,v,f,b,M,B;return p.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(v=function(){var O=window.setTimeout(r.pollEvents,Ce);r.setPollTimeout(O)},o.orderBy==="-timestamp"){g.next=3;break}return g.abrupt("return");case 3:if(i.sceneUrl===F.router.values.location.pathname){g.next=5;break}return g.abrupt("return");case 5:if(o.pollingIsActive){g.next=8;break}return v(),g.abrupt("return");case 8:return f=[].concat(T()(o.properties),T()(((l=i.fixedFilters)===null||l===void 0?void 0:l.properties)||[])),b=K(K(K({},i.fixedFilters||{}),{},{properties:f},o.eventFilter?{event:o.eventFilter}:{}),{},{orderBy:[o.orderBy],after:o.pollAfter}),M=Object(G.Ab)(b),B=null,g.prev=12,g.next=15,he.a.get("api/projects/".concat(o.currentTeamId,"/events/?").concat(M));case 15:B=g.sent,g.next=21;break;case 18:return g.prev=18,g.t0=g.catch(12),g.abrupt("return");case 21:h(),o.automaticLoadEnabled?r.prependEvents(B.results):r.pollEventsSuccess(B.results),v();case 24:case"end":return g.stop()}},L,null,[[12,18]])}));function y(L,S){return m.apply(this,arguments)}return y}(),prependNewEvents:function(){o.newEvents.length&&r.prependEvents(o.newEvents)},fetchOrPollFailure:function(y){var L=y.error;je.a.error("There was a problem fetching your events: ".concat(L.statusText))},toggleAutomaticLoad:function(y){var L=y.automaticLoadEnabled;L&&r.prependNewEvents()}}}})},"./node_modules/@ant-design/icons/es/icons/SaveOutlined.js":function(ce,D,e){"use strict";var H=e("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ae=e("./node_modules/react/index.js"),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},Ee=q,le=e("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),ee=function(X,te){return ae.createElement(le.a,Object(H.a)(Object(H.a)({},X),{},{ref:te,icon:Ee}))};ee.displayName="SaveOutlined";var x=D.a=ae.forwardRef(ee)},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/PropertiesTable.scss":function(ce,D,e){var H=e("./node_modules/css-loader/dist/runtime/api.js");D=H(!1),D.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.properties-table-key{min-width:12rem;display:flex;align-items:center;justify-content:space-between}.property-value-type{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:1.25rem;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;text-transform:uppercase;cursor:default}.property-value-type:not(:first-child){margin-left:.25rem}.properties-table-value{min-width:12rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;display:flex;align-items:center}.properties-table-value .value-link>*{vertical-align:middle}.properties-table-value .value-link>svg{margin-left:.25rem;font-size:1rem}.properties-table-value .editable{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;-webkit-text-decoration-color:#5375ff;text-decoration-color:#5375ff;cursor:pointer}",""]),ce.exports=D},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/EventsTable.scss":function(ce,D,e){var H=e("./node_modules/css-loader/dist/runtime/api.js");D=H(!1),D.push([ce.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.events .events-table-button-clear{padding:0 4px;margin-left:4px}.events .events-table-button-clear.visible,.events .events-table-button-clear:focus,.events .events-table-button-clear:hover{border:1px solid #5375ff}.events .event-row-new{height:2.5rem}.events .event-row-date-separator{background-color:var(--bg-mid);color:var(--text-muted);font-weight:600;font-size:.75rem;height:2rem;text-align:center}.events .event-row-is-exception{background-color:#fffaf8}.events td{max-width:20rem}",""]),ce.exports=D}}]);
