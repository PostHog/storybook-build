(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[53868],{"./frontend/src/lib/components/CompactList/CompactList.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>CompactList_CompactList_CompactList});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),CompactList=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/CompactList/CompactList.scss"),CompactList_default=__webpack_require__.n(CompactList),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(CompactList_default(),options),CompactList_default().locals;var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonSkeleton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSkeleton/index.ts"),themeLogic=__webpack_require__("./frontend/src/layout/navigation-3000/themeLogic.ts"),EmptyMessage=__webpack_require__("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function CompactList_CompactList_CompactList(_ref){let{title,viewAllURL,loading,items,emptyMessage,renderRow}=_ref,{theme}=(0,index_esm.useValues)(themeLogic.b);return(0,jsx_runtime.jsxs)("div",{className:"CompactList",style:theme?.boxStyle,children:[(0,jsx_runtime.jsxs)("div",{className:"CompactList__header",children:[(0,jsx_runtime.jsx)("h3",{className:"px-2 truncate",title:title,children:title}),viewAllURL&&(0,jsx_runtime.jsx)(LemonButton.J,{to:viewAllURL,children:"View all"})]}),(0,jsx_runtime.jsx)("div",{className:"mx-2",children:(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"})}),(0,jsx_runtime.jsx)("div",{className:"CompactList__content",children:loading?(0,jsx_runtime.jsx)("div",{className:"p-2 space-y-6",children:Array.from({length:6},(_,index)=>(0,jsx_runtime.jsx)(LemonSkeleton.y,{},index))}):0===items.length&&emptyMessage?(0,jsx_runtime.jsx)(EmptyMessage.M,{...emptyMessage}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:items.map((item,index)=>renderRow(item,index))})})]})}},"./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>DashboardsTable,z:()=>DashboardsTableContainer});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@posthog+icons@0.7.0_react-dom@18.2.0_react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/MemberSelect.tsx"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/constants.tsx"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonRow/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),_types__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./frontend/src/types.ts"),_DashboardHeader__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./frontend/src/scenes/dashboard/DashboardHeader.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DashboardsTableContainer(){let{dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_23__.h),{dashboards,filters}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_17__.dJ);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(DashboardsTable,{dashboards:dashboards,dashboardsLoading:dashboardsLoading,filters:filters})}function DashboardsTable(_ref){let{dashboards,dashboardsLoading,filters,extraActions,hideActions}=_ref,{unpinDashboard,pinDashboard}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_23__.h),{setFilters}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_17__.dJ),{hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_22__.userLogic),{currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_20__.teamLogic),{showDuplicateDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_19__.T),{showDeleteDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_18__.r),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref2){let{id}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{size:"small",onClick:pinned?()=>unpinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList):()=>pinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList),tooltip:pinned?"Unpin dashboard":"Pin dashboard",icon:pinned?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPinFilled,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPin,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(_,_ref3){let{id,name,description,is_shared,effective_privilege_level}=_ref3,isPrimary=id===currentTeam?.primary_dashboard,canEditDashboard=effective_privilege_level>=lib_constants__WEBPACK_IMPORTED_MODULE_5__.kH.CanEdit;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonTable_LemonTableLink__WEBPACK_IMPORTED_MODULE_12__.i,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_21__.j.dashboard(id),title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)("span",{"data-attr":"dashboard-name",children:name||"Untitled"}),is_shared&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:"This dashboard is shared publicly.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconShare,{className:"ml-1 text-base text-link"})}),!canEditDashboard&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:_DashboardHeader__WEBPACK_IMPORTED_MODULE_25__.o,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconLock,{className:"ml-1 text-base text-muted"})}),isPrimary&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:"The primary dashboard is shown on the project home page.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconHome,{className:"ml-1 text-base text-warning"})})})]}),description:hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_24__.P$.TEAM_COLLABORATION)?description:void 0})},sorter:_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_23__.q},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_24__.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_4__.D,{tags:tags,staticOnly:!0}):null}}]:[],(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_11__.JB)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_11__.rw)(),hideActions?{}:{width:0,render:function RenderActions(_,_ref4){let{id,name}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_7__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_21__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).actions.setDashboardMode(null,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList)},fullWidth:!0,children:"View"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_21__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).actions.setDashboardMode(_types__WEBPACK_IMPORTED_MODULE_24__.MN.Edit,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList)},fullWidth:!0,children:"Edit"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{onClick:()=>{showDuplicateDashboardModal(id,name)},fullWidth:!0,children:"Duplicate"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_8__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_9__.Q,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconHome,{className:"text-warning"}),fullWidth:!0,status:"warning",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)("span",{className:"text-muted",children:["Change the default dashboard",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)("br",{}),"from the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_13__.r,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_21__.j.projectHomepage(),children:"project home page"}),"."]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_8__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{onClick:()=>{showDeleteDashboardModal(id)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:x=>setFilters({search:x}),value:filters.search}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)("span",{children:"Filter to:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{active:filters.pinned,type:"secondary",size:"small",onClick:()=>setFilters({pinned:!filters.pinned}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPin,{}),children:"Pinned"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{active:filters.shared,type:"secondary",size:"small",onClick:()=>setFilters({shared:!filters.shared}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconShare,{}),children:"Shared"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)("span",{children:"Created by:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_components_MemberSelect__WEBPACK_IMPORTED_MODULE_3__.a,{value:"All users"===filters.createdBy?null:filters.createdBy,onChange:user=>setFilters({createdBy:user?.uuid||"All users"})})]}),extraActions]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_26__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_10__.g,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:dashboards,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns:columns,loading:dashboardsLoading,defaultSorting:{columnKey:"name",order:1},emptyState:"No dashboards matching your filters!",nouns:["dashboard","dashboards"]})]})}},"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FeatureFlag:()=>FeatureFlag_FeatureFlag,scene:()=>scene}),__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlag.scss");var posthog_icons_es=__webpack_require__("./node_modules/.pnpm/@posthog+icons@0.7.0_react-dom@18.2.0_react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.1.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),kea_router_lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),ActivityLog=__webpack_require__("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),CopyToClipboard=__webpack_require__("./frontend/src/lib/components/CopyToClipboard.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),PayGateMini=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonCheckbox=__webpack_require__("./frontend/src/lib/lemon-ui/LemonCheckbox/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonField=__webpack_require__("./frontend/src/lib/lemon-ui/LemonField/index.ts"),LemonInput=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),LemonTag=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),LemonTextArea=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTextArea/LemonTextArea.tsx"),Lettermark=__webpack_require__("./frontend/src/lib/lemon-ui/Lettermark/index.ts"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),es=__webpack_require__("./node_modules/.pnpm/posthog-js@1.131.1/node_modules/posthog-js/dist/es.js"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),PostHogContext=(0,react.createContext)({client:es.ZP}),usePostHog=function(){return(0,react.useContext)(PostHogContext).client},__assign=function(){return(__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}function PostHogFeature(_a){var client,_a1,featureFlagPayload,setFeatureFlagPayload,client1,_a2,featureFlagVariantKey,setFeatureFlagVariantKey,flag=_a.flag,match=_a.match,children=_a.children,fallback=_a.fallback,visibilityObserverOptions=_a.visibilityObserverOptions,trackInteraction=_a.trackInteraction,trackView=_a.trackView,props=__rest(_a,["flag","match","children","fallback","visibilityObserverOptions","trackInteraction","trackView"]),payload=(client=usePostHog(),featureFlagPayload=(_a1=(0,react.useState)())[0],setFeatureFlagPayload=_a1[1],(0,react.useEffect)(function(){return client.onFeatureFlags(function(){setFeatureFlagPayload(client.getFeatureFlagPayload(flag))})},[client,flag]),featureFlagPayload),variant=(client1=usePostHog(),featureFlagVariantKey=(_a2=(0,react.useState)())[0],setFeatureFlagVariantKey=_a2[1],(0,react.useEffect)(function(){return client1.onFeatureFlags(function(){setFeatureFlagVariantKey(client1.getFeatureFlag(flag))})},[client1,flag]),featureFlagVariantKey);if(void 0===match||variant===match){var childNode="function"==typeof children?children(payload):children;return react.createElement(VisibilityAndClickTracker,__assign({flag:flag,options:visibilityObserverOptions,trackInteraction:null==trackInteraction||trackInteraction,trackView:null==trackView||trackView},props),childNode)}return react.createElement(react.Fragment,null,fallback)}function VisibilityAndClickTracker(_a){var flag=_a.flag,children=_a.children,trackInteraction=_a.trackInteraction,trackView=_a.trackView,options=_a.options,props=__rest(_a,["flag","children","trackInteraction","trackView","options"]),ref=(0,react.useRef)(null),posthog=usePostHog(),visibilityTrackedRef=(0,react.useRef)(!1),clickTrackedRef=(0,react.useRef)(!1),cachedOnClick=(0,react.useCallback)(function(){!clickTrackedRef.current&&trackInteraction&&(!function(flag,posthog){var _a;posthog.capture("$feature_interaction",{feature_flag:flag,$set:((_a={})["$feature_interaction/".concat(flag)]=!0,_a)})}(flag,posthog),clickTrackedRef.current=!0)},[flag,posthog,trackInteraction]);return(0,react.useEffect)(function(){if(null!==ref.current&&trackView){var onIntersect=function(entry){!visibilityTrackedRef.current&&entry.isIntersecting&&(function(flag,posthog){posthog.capture("$feature_view",{feature_flag:flag})}(flag,posthog),visibilityTrackedRef.current=!0)},observer=new IntersectionObserver(function(_a){return onIntersect(_a[0])},__assign({threshold:.1},options));return observer.observe(ref.current),function(){return observer.disconnect()}}},[flag,options,posthog,ref,trackView]),react.createElement("div",__assign({ref:ref},props,{onClick:cachedOnClick}),children)}var Dashboard=__webpack_require__("./frontend/src/scenes/dashboard/Dashboard.tsx"),dashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),EmptyDashboardComponent=__webpack_require__("./frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx"),FeatureFlagSnippets=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),JSONEditorInput=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/feature-flags/JSONEditorInput.scss"),JSONEditorInput_default=__webpack_require__.n(JSONEditorInput),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(JSONEditorInput_default(),options),JSONEditorInput_default().locals;var CodeEditors=__webpack_require__("./frontend/src/lib/components/CodeEditors.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function JSONEditorInput_JSONEditorInput(_ref){let{onChange,placeholder,lineHeight=20,defaultNumberOfLines=1,value="",readOnly=!1}=_ref,valString=value?.toString()||"",defaultLines=Math.max(defaultNumberOfLines,valString.split(/\r\n|\r|\n/).length)+1,defaultHeight=lineHeight*defaultLines,[height,setHeight]=(0,react.useState)(defaultHeight),[focused,setFocused]=(0,react.useState)(!1),updateHeight=val=>{if(val){let lineCount=val.split(/\r\n|\r|\n/).length,newLineCount=Math.max(lineCount,defaultNumberOfLines)+1;setHeight(lineHeight*newLineCount)}else setHeight(lineHeight*(defaultNumberOfLines+1))};return(0,jsx_runtime.jsxs)("div",{className:"JsonEditorInput",onFocus:()=>setFocused(!0),onBlur:()=>setFocused(!1),children:[(0,jsx_runtime.jsx)(CodeEditors.p,{className:"border",language:"json",height:height,value:value?.toString(),options:{readOnly:readOnly,lineHeight:lineHeight,minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1},padding:{bottom:0,top:10},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,glyphMargin:!0,folding:!1,lineNumbers:"off",lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",cursorStyle:"block-outline",scrollBeyondLastLine:!1,quickSuggestions:!1,contextmenu:!1},onChange:val=>{updateHeight(val),onChange?.(val)}}),!focused&&!value?.toString()&&placeholder&&(0,jsx_runtime.jsx)("div",{className:"placeholder",children:(0,jsx_runtime.jsx)("div",{className:"placeholderLabelContainer",children:placeholder})})]})}var insights_utils=__webpack_require__("./frontend/src/scenes/insights/utils.tsx"),NotebookSelectButton=__webpack_require__("./frontend/src/scenes/notebooks/NotebookSelectButton/NotebookSelectButton.tsx"),TitleWithIcon=__webpack_require__("./frontend/src/lib/components/TitleWithIcon.tsx"),LemonInputSelect=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInputSelect/LemonInputSelect.tsx"),types=__webpack_require__("./frontend/src/types.ts"),permissionsLogic=__webpack_require__("./frontend/src/scenes/settings/organization/Permissions/permissionsLogic.tsx"),rolesLogic=__webpack_require__("./frontend/src/scenes/settings/organization/Permissions/Roles/rolesLogic.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts");function ResourcePermission(_ref2){let{rolesToAdd,addableRoles,onChange,addableRolesLoading,onAdd,roles,deleteAssociatedRole,resourceType,canEdit}=_ref2,{allPermissions}=(0,index_esm.useValues)(permissionsLogic.f),{roles:possibleRolesWithAccess}=(0,index_esm.useValues)(rolesLogic.V),resourceLevel=allPermissions.find(permission=>permission.resource===resourceType),rolesWithAccess=possibleRolesWithAccess.filter(role=>role.feature_flags_access_level===types.uv.WRITE),tableData=[{id:"",name:"Organization default",feature_flags_access_level:resourceLevel?resourceLevel.access_level:types.uv.WRITE,created_by:null,created_at:""},...rolesWithAccess,...roles.map(role=>({...role,feature_flags_access_level:types.uv.WRITE,deletable:!0}))];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.LemonTable,{dataSource:tableData,columns:[{title:"Role",dataIndex:"name",key:"name",render:function RenderRoleName(_,role){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Organization default"===role.name?(0,jsx_runtime.jsx)(TitleWithIcon.H,{icon:(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconGear,{}),to:`${urls.j.settings("organization-rbac")}`,targetBlank:!0,size:"small",noPadding:!0,tooltip:"Organization-wide permissions for roles can be managed in the organization settings.",className:"ml-1"}),children:"All users by default"}):role.name})}},{title:"Access",dataIndex:"feature_flags_access_level",key:"feature_flags_access_level",render:function RenderAccessLevel(_,role){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-row justify-between",children:[role.feature_flags_access_level===types.uv.WRITE?"Edit":"View",role.deletable&&(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),onClick:()=>deleteAssociatedRole(role.id),tooltip:"Remove custom role from feature flag",tooltipPlacement:"bottom-start",size:"small"})]})}}],className:"mt-4"}),canEdit&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h5",{className:"mt-4",children:"Custom edit roles"}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1",children:(0,jsx_runtime.jsx)(LemonInputSelect.n,{placeholder:"Search for roles to add…",loading:addableRolesLoading,onChange:onChange,value:rolesToAdd,mode:"multiple","data-attr":"resource-permissioning-select",options:addableRoles.map(role=>({key:role.id,label:`${role.name}`,labelComponent:(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsx)("b",{children:`${role.name}`})})}))})}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",loading:!1,disabled:0===rolesToAdd.length,onClick:onAdd,children:"Add"})]})]})]})}var userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),tagsModel=__webpack_require__("./frontend/src/models/tagsModel.ts"),DataTable_utils=__webpack_require__("./frontend/src/queries/nodes/DataTable/utils.ts"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),schema=__webpack_require__("./frontend/src/queries/schema.ts"),dashboardsLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),DashboardsTable=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx"),DashboardTemplateChooser=__webpack_require__("./frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),NewDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),dashboardsModel=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),feature_flags_featureFlagLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagLogic.ts");function AnalysisTab(_ref){let{featureFlag}=_ref;return(0,jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:newDashboardLogic.Z,props:{featureFlagId:featureFlag.id},children:featureFlag.analytics_dashboards&&featureFlag.analytics_dashboards.length>0?(0,jsx_runtime.jsx)(FeatureFlagDashboardsTableContainer,{}):featureFlag.id&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{scope:"feature_flag"}),(0,jsx_runtime.jsx)(NewDashboardModal.O,{})]})})})}function FeatureFlagDashboardsTableContainer(){let{filteredDashboards}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{showNewDashboardModal}=(0,index_esm.useActions)(newDashboardLogic.Z),{dashboardsLoading}=(0,index_esm.useValues)(dashboardsModel.h),{filters}=(0,index_esm.useValues)(dashboardsLogic.dJ);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DashboardsTable.q,{extraActions:(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:showNewDashboardModal,children:"New dashboard"})}),hideActions:!0,dashboards:filteredDashboards,dashboardsLoading:dashboardsLoading,filters:filters}),(0,jsx_runtime.jsx)(NewDashboardModal.O,{})]})}var TaxonomicFilter_types=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),ActionFilter=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),ActionFilterRow=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function FeatureFlagAutoRollback(_ref){let{readOnly}=_ref,{featureFlag,sentryIntegrationEnabled,sentryErrorCount,insightRollingAverages}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{addRollbackCondition,removeRollbackCondition,loadInsightAtIndex}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{user}=(0,index_esm.useValues)(userLogic.userLogic);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsx)("b",{children:"Auto rollback"}),(0,jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"}),!readOnly&&(0,jsx_runtime.jsx)("div",{className:"mt-2",children:"Specify the conditions in which this feature flag will automatically roll back."})]}),readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map((rollback_condition,index)=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),"insight"===rollback_condition.threshold_type&&rollback_condition.threshold_metric?.events?.[0]?.name?(0,jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4 bg-bg-light",children:[(0,jsx_runtime.jsx)("b",{children:`${(0,utils.fm)(rollback_condition.threshold_type)} based rollback`}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[insightRollingAverages[index]&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"\xa0 trailing average is ",insightRollingAverages[index],"."]}),"\xa0Trigger when trailing average of \xa0",(0,jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"\xa0 is\xa0",rollback_condition.operator&&utils.mG[rollback_condition.operator]," ",rollback_condition.threshold]})]}):(0,jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4 bg-bg-light",children:[(0,jsx_runtime.jsx)("b",{children:`${(0,utils.fm)(rollback_condition.threshold_type)} based rollback`}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Trigger when there is a\xa0",(0,jsx_runtime.jsxs)("b",{children:[rollback_condition.threshold,"%"]}),"\xa0increase in errors"]})]})]})),!readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map((_,index)=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),(0,jsx_runtime.jsx)("div",{className:"mb-4 border rounded p-4 bg-bg-light",children:(0,jsx_runtime.jsxs)(lib.Group,{name:["rollback_conditions",index],children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex",children:[(0,jsx_runtime.jsx)("div",{className:"mt-3 mr-3",children:(0,jsx_runtime.jsx)("b",{children:"Rollback Condition Type"})}),(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold_type",children:_ref2=>{let{value,onChange}=_ref2;return(0,jsx_runtime.jsx)(src.LemonSelect,{value:value,onChange:onChange,options:[{value:types.SR.Sentry,label:"Error Based"},{value:types.SR.Insight,label:"Metric Based"}]})}})]}),(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),noPadding:!0,onClick:()=>{removeRollbackCondition(index)}})]}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),"insight"==featureFlag.rollback_conditions[index].threshold_type?(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold_metric",children:_ref3=>{let{value,onChange}=_ref3;return(0,jsx_runtime.jsx)(ActionFilter.T,{filters:value,setFilters:payload=>{onChange({...payload}),loadInsightAtIndex(index,payload)},typeKey:"feature-flag-rollback-trends-"+index,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:ActionFilterRow.Qq.None,propertiesTaxonomicGroupTypes:[TaxonomicFilter_types.t.EventProperties,TaxonomicFilter_types.t.PersonProperties,TaxonomicFilter_types.t.EventFeatureFlags,TaxonomicFilter_types.t.Cohorts,TaxonomicFilter_types.t.Elements]})}}),(0,jsx_runtime.jsxs)("span",{children:["trailing 7 day average is\xa0",void 0!==insightRollingAverages[index]?(0,jsx_runtime.jsx)("b",{children:insightRollingAverages[index]}):(0,jsx_runtime.jsx)(Spinner.$,{}),". Trigger when trailing average is"]}),(0,jsx_runtime.jsx)(LemonField.D,{name:"operator",children:_ref4=>{let{value,onChange}=_ref4;return(0,jsx_runtime.jsx)(src.LemonSelect,{value:value,onChange:onChange,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold",children:(0,jsx_runtime.jsx)(src.LemonInput,{min:0,type:"number"})})]}):sentryIntegrationEnabled?(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[sentryErrorCount?(0,jsx_runtime.jsxs)("span",{children:[(0,jsx_runtime.jsxs)("b",{children:[(0,utils.Lc)(sentryErrorCount)," "]})," Sentry errors in the past 24 hours."," "]}):(0,jsx_runtime.jsx)(Spinner.$,{}),(0,jsx_runtime.jsx)("span",{children:"\xa0Trigger when there is a"}),(0,jsx_runtime.jsx)(LemonField.D,{name:"threshold",className:"ml-3 mr-3",children:_ref5=>{let{value,onChange}=_ref5;return(0,jsx_runtime.jsx)(src.LemonInput,{value:value,suffix:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"%"}),type:"number",min:0,onChange:onChange})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"operator",className:"mr-3",children:_ref6=>{let{value,onChange}=_ref6;return(0,jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value:value,onChange:onChange})}}),(0,jsx_runtime.jsxs)("span",{children:["to"," ",sentryErrorCount?(0,jsx_runtime.jsx)("b",{children:(0,utils.Lc)(Math.round(sentryErrorCount*(1+(featureFlag.rollback_conditions[index].threshold||0)/100)))}):(0,jsx_runtime.jsx)(Spinner.$,{})," ","errors."]}),(0,jsx_runtime.jsx)("div",{})]})}):user?.is_staff?(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("b",{children:"This feature requires an active Sentry integration."}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(src.Link,{to:urls.j.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",(0,jsx_runtime.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):(0,jsx_runtime.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]})),!readOnly&&(0,jsx_runtime.jsx)(src.LemonButton,{type:"secondary",onClick:addRollbackCondition,children:"Add condition"})]})}var FeatureFlagCodeExample=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagCodeExample.tsx"),featureFlagPermissionsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagPermissionsLogic.tsx"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),LemonTableLink=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/LemonTableLink.tsx"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),organizationLogic=__webpack_require__("./frontend/src/scenes/organizationLogic.tsx"),FeatureFlags=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlags.tsx");let getColumns=()=>{let{currentTeamId}=(0,index_esm.useValues)(teamLogic.teamLogic),{currentOrganization}=(0,index_esm.useValues)(organizationLogic.p),{aggregationLabel}=(0,index_esm.useValues)(groupsModel.$);return[{title:"Project",dataIndex:"team_id",width:"45%",render:(dataValue,record)=>{let team=currentOrganization?.teams?.find(t=>t.id===Number(dataValue));if(!team)return"(project does not exist)";let isCurrentTeam=team.id===currentTeamId,linkText=isCurrentTeam?`${team.name} (current)`:team.name;return(0,jsx_runtime.jsx)(LemonTableLink.i,{to:isCurrentTeam?void 0:urls.j.project(team.id,record.flag_id?urls.j.featureFlag(record.flag_id):""),title:linkText})}},(0,columnUtils.JB)(),(0,columnUtils.rw)(),{title:"Release conditions",width:200,render:function Render(_,record){let releaseText=(0,FeatureFlags.groupFilters)(record.filters,void 0,aggregationLabel);return"string"==typeof releaseText&&releaseText.startsWith("100% of")?(0,jsx_runtime.jsx)(src.LemonTag,{type:"highlight",children:releaseText}):releaseText}},{title:"Status",dataIndex:"active",render:dataValue=>dataValue?(0,jsx_runtime.jsx)(src.LemonTag,{type:"success",className:"uppercase",children:"Enabled"}):(0,jsx_runtime.jsx)(src.LemonTag,{type:"default",className:"uppercase",children:"Disabled"})}]};function InfoBanner(){var _currentOrganization$;let text;let{currentOrganization}=(0,index_esm.useValues)(organizationLogic.p),{featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),hasMultipleProjects=(null!==(_currentOrganization$=currentOrganization?.teams?.length)&&void 0!==_currentOrganization$?_currentOrganization$:0)>1,isMember=!currentOrganization?.membership_level||currentOrganization.membership_level<constants.Dk.Admin;if(isMember&&!hasMultipleProjects)text="You currently have access to only one project. If your organization manages multiple projects and you wish to copy this feature flag across them, request project access from your administrator.";else if(hasMultipleProjects){if(featureFlag.can_edit)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{});text="You don't have the necessary permissions to copy this flag to another project. Contact your administrator to request editing rights."}else text="This feature enables the copying of a feature flag across different projects. Once additional projects are added within your organization, you'll be able to replicate this flag to them.";return(0,jsx_runtime.jsx)(src.LemonBanner,{type:"info",className:"mb-4",children:text})}function FeatureFlagCopySection(){var _currentOrganization$2;let{featureFlag,copyDestinationProject,projectsWithCurrentFlag,featureFlagCopyLoading}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{setCopyDestinationProject,copyFlag}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{currentOrganization}=(0,index_esm.useValues)(organizationLogic.p),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),hasStaticCohort=function(featureFlag){let{cohorts}=(0,index_esm.useValues)(cohortsModel.Q),staticCohorts=new Set;for(let group of(cohorts.forEach(cohort=>{cohort.is_static&&staticCohorts.add(cohort.id)}),featureFlag.filters.groups))for(let prop of group.properties||[])if("cohort"===prop.type&&staticCohorts.has(prop.value))return!0;return!1}(featureFlag),hasMultipleProjects=(null!==(_currentOrganization$2=currentOrganization?.teams?.length)&&void 0!==_currentOrganization$2?_currentOrganization$2:0)>1;return hasMultipleProjects&&featureFlag.can_edit?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Feature flag copy"}),(0,jsx_runtime.jsx)("div",{className:"ant-row",children:"Copy your flag and its configuration to another project."}),hasStaticCohort&&(0,jsx_runtime.jsx)(src.LemonBanner,{type:"info",className:"mt-4",children:"The flag you are about to copy references a static cohort. If the cohort with identical name does not exist in the target project, it will be copied as an empty cohort. This is because the associated persons might not exist in the target project."}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex gap-4 my-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6",children:"Key"}),(0,jsx_runtime.jsx)("div",{className:"border px-3 rounded h-10 text-center flex items-center justify-center max-w-200",children:(0,jsx_runtime.jsx)("span",{className:"font-semibold truncate",children:featureFlag.key})})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"h-6"}),(0,jsx_runtime.jsx)(posthog_icons_es.IconArrowRight,{className:"h-10",fontSize:"30"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6",children:"Destination project"}),(0,jsx_runtime.jsx)(src.LemonSelect,{dropdownMatchSelectWidth:!1,value:copyDestinationProject,onChange:id=>setCopyDestinationProject(id),options:currentOrganization?.teams?.map(team=>({value:team.id,label:team.name})).filter(option=>option.value!==currentTeam?.id)||[],className:"min-w-[10rem]"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"h-6"}),(0,jsx_runtime.jsx)(src.LemonButton,{disabledReason:!copyDestinationProject&&"Select destination project",loading:featureFlagCopyLoading,type:"primary",icon:(0,jsx_runtime.jsx)(icons.JK,{}),onClick:()=>copyFlag(),className:"w-28 max-w-28",children:projectsWithCurrentFlag.find(p=>Number(p.team_id)===copyDestinationProject)?"Update":"Copy"})]})]})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}function FeatureFlagProjects(){let{projectsWithCurrentFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{loadProjectsWithCurrentFlag}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk);return(0,react.useEffect)(()=>{loadProjectsWithCurrentFlag()},[]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(InfoBanner,{}),(0,jsx_runtime.jsx)(FeatureFlagCopySection,{}),(0,jsx_runtime.jsx)(LemonTable.g,{loading:!1,dataSource:projectsWithCurrentFlag,columns:getColumns(),emptyState:"This feature flag is not being used in any other project."})]})}var FeatureFlagReleaseConditions=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagReleaseConditions.tsx"),dayjs=__webpack_require__("./frontend/src/lib/dayjs.ts"),Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip/index.ts");function FeatureFlagSchedule(){let{featureFlag,scheduledChanges,scheduledChangeOperation,scheduleDateMarker,schedulePayload,schedulePayloadErrors}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{deleteScheduledChange,setScheduleDateMarker,setSchedulePayload,setScheduledChangeOperation,createScheduledChange}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{aggregationLabel}=(0,index_esm.useValues)(groupsModel.$),aggregationGroupTypeIndex=featureFlag.filters.aggregation_group_type_index,scheduleFilters={...schedulePayload.filters,aggregation_group_type_index:aggregationGroupTypeIndex},columns=[{title:"Change",dataIndex:"payload",render:function Render(_,scheduledChange){let{payload}=scheduledChange;if(payload.operation===types.fL.UpdateStatus){let isEnabled=payload.value;return(0,jsx_runtime.jsx)(src.LemonTag,{type:isEnabled?"success":"default",className:"uppercase",children:isEnabled?"Enable":"Disable"})}if(payload.operation===types.fL.AddReleaseCondition){let releaseText=(0,FeatureFlags.groupFilters)(payload.value,void 0,aggregationLabel);return(0,jsx_runtime.jsxs)("div",{className:"inline-flex leading-8",children:[(0,jsx_runtime.jsx)("span",{className:"mr-2",children:(0,jsx_runtime.jsx)("b",{children:"Add release condition:"})}),"string"==typeof releaseText&&releaseText.startsWith("100% of")?(0,jsx_runtime.jsx)(src.LemonTag,{type:"highlight",children:releaseText}):releaseText]})}return JSON.stringify(payload)}},(0,columnUtils.pD)("scheduled_at","Scheduled at"),(0,columnUtils.rw)(),(0,columnUtils.JB)(),{title:"Status",dataIndex:"executed_at",render:function Render(_,scheduledChange){let{executed_at,failure_reason}=scheduledChange,{type,text}=failure_reason?{type:"danger",text:"Error"}:executed_at?{type:"completion",text:"Complete"}:{type:"default",text:"Scheduled"};return(0,jsx_runtime.jsx)(Tooltip.u,{title:failure_reason?`Failed: ${failure_reason}`:executed_at&&`Completed: ${(0,dayjs.Bv)(executed_at).format("MMMM D, YYYY h:mm A")}`,children:(0,jsx_runtime.jsx)(src.LemonTag,{type:type,children:(0,jsx_runtime.jsx)("b",{className:"uppercase",children:text})})})}},{width:0,render:function Render(_,scheduledChange){return!scheduledChange.executed_at&&(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsx)(src.LemonButton,{status:"danger",onClick:()=>deleteScheduledChange(scheduledChange.id),fullWidth:!0,children:"Delete scheduled change"})})}}];return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Add a scheduled change"}),(0,jsx_runtime.jsx)("div",{className:"mb-6",children:"Automatically change flag properties at a future point in time."}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex gap-10 mb-8",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6 mb-1",children:"Change type"}),(0,jsx_runtime.jsx)(src.LemonSelect,{className:"w-50",placeholder:"Select variant",value:scheduledChangeOperation,onChange:value=>value&&setScheduledChangeOperation(value),options:[{label:"Change status",value:types.fL.UpdateStatus},{label:"Add a condition",value:types.fL.AddReleaseCondition}]})]}),(0,jsx_runtime.jsxs)("div",{className:"w-50",children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6 mb-1",children:"Date and time"}),(0,jsx_runtime.jsx)(src.LemonCalendarSelectInput,{value:scheduleDateMarker,onChange:value=>setScheduleDateMarker(value),placeholder:"Select date",selectionPeriod:"upcoming",showTime:!0})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[scheduledChangeOperation===types.fL.UpdateStatus&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("div",{className:"border rounded p-4",children:(0,jsx_runtime.jsx)(src.LemonCheckbox,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:value=>{setSchedulePayload(null,value)},checked:schedulePayload.active})})}),scheduledChangeOperation===types.fL.AddReleaseCondition&&(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{id:`schedule-release-conditions-${featureFlag.id}`,filters:scheduleFilters,onChange:(value,errors)=>setSchedulePayload(value,null,errors),hideMatchOptions:!0}),(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-end",children:(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:createScheduledChange,disabledReason:scheduleDateMarker?(0,utils.bv)(schedulePayloadErrors)?"Fix release condition errors":void 0:"Select the scheduled date and time",children:"Schedule"})}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:""})]}),(0,jsx_runtime.jsx)(src.LemonTable,{rowClassName:record=>record.executed_at?"opacity-75":"",className:"mt-8",loading:!1,dataSource:scheduledChanges,columns:columns,defaultSorting:{columnKey:"scheduled_at",order:1},emptyState:"You do not have any scheduled changes"})]})}var featureFlagsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),CompactList=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),RecentInsights=__webpack_require__("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function RecentFeatureFlagInsights(){let{relatedInsights,relatedInsightsLoading,featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk);return(0,jsx_runtime.jsx)(CompactList.a,{title:"Insights that use this feature flag",loading:relatedInsightsLoading,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:urls.j.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`})},items:relatedInsights.slice(0,5),renderRow:(insight,index)=>(0,jsx_runtime.jsx)(RecentInsights.z,{insight:insight},index)})}let scene={component:FeatureFlag_FeatureFlag,logic:feature_flags_featureFlagLogic.hk,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id:id&&"new"!==id?parseInt(id):"new"}}};function focusVariantKeyField(index){setTimeout(()=>document.querySelector(`.VariantFormList input[data-key-index="${index}"]`)?.focus(),50)}function FeatureFlag_FeatureFlag(){let{id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{props,featureFlag,featureFlagLoading,featureFlagMissing,isEditingFlag,recordingFilterForFlag,newCohortLoading,activeTab}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{featureFlags}=(0,index_esm.useValues)(featureFlagLogic.h),{deleteFeatureFlag,editFeatureFlag,loadFeatureFlag,saveFeatureFlag,createStaticCohort,setFeatureFlagFilters,setActiveTab}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{addableRoles,unfilteredAddableRolesLoading,rolesToAdd,derivedRoles}=(0,index_esm.useValues)((0,featureFlagPermissionsLogic.M)({flagId:featureFlag.id})),{setRolesToAdd,addAssociatedRoles,deleteAssociatedRole}=(0,index_esm.useActions)((0,featureFlagPermissionsLogic.M)({flagId:featureFlag.id})),{tags}=(0,index_esm.useValues)(tagsModel.x),{hasAvailableFeature}=(0,index_esm.useValues)(userLogic.userLogic),[hasKeyChanged,setHasKeyChanged]=(0,react.useState)(!1),[advancedSettingsExpanded,setAdvancedSettingsExpanded]=(0,react.useState)(!1),isNewFeatureFlag="new"===id||void 0===id;if(featureFlagMissing)return(0,jsx_runtime.jsx)(NotFound.T,{object:"feature flag"});if(featureFlagLoading)return(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(src.LemonSkeleton,{active:!0,className:"h-4 w-2/5"}),(0,jsx_runtime.jsx)(src.LemonSkeleton,{active:!0,className:"h-4 w-full"}),(0,jsx_runtime.jsx)(src.LemonSkeleton,{active:!0,className:"h-4 w-full"}),(0,jsx_runtime.jsx)(src.LemonSkeleton,{active:!0,className:"h-4 w-3/5"})]});let tabs=[{label:"Overview",key:featureFlagsLogic.i.OVERVIEW,content:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)(FeatureFlagRollout,{readOnly:!0}),featureFlag.filters.super_groups&&(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{readOnly:!0,isSuper:!0,filters:featureFlag.filters}),(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{readOnly:!0,filters:featureFlag.filters}),featureFlags[constants.y8.AUTO_ROLLBACK_FEATURE_FLAGS]&&(0,jsx_runtime.jsx)(FeatureFlagAutoRollback,{readOnly:!0})]}),(0,jsx_runtime.jsxs)("div",{className:"max-w-120 w-full",children:[(0,jsx_runtime.jsx)(RecentFeatureFlagInsights,{}),(0,jsx_runtime.jsx)("div",{className:"my-4"})]})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"mb-4"}),(0,jsx_runtime.jsx)(FeatureFlagCodeExample.H,{featureFlag:featureFlag})]})}];return featureFlag.key&&id&&(tabs.push({label:"Usage",key:featureFlagsLogic.i.USAGE,content:(0,jsx_runtime.jsx)(UsageTab,{id:id,featureFlag:featureFlag})}),tabs.push({label:"Projects",key:featureFlagsLogic.i.PROJECTS,content:(0,jsx_runtime.jsx)(FeatureFlagProjects,{})}),tabs.push({label:"Schedule",key:featureFlagsLogic.i.SCHEDULE,content:(0,jsx_runtime.jsx)(FeatureFlagSchedule,{})})),featureFlags[constants.y8.FF_DASHBOARD_TEMPLATES]&&featureFlag.key&&id&&tabs.push({label:(0,jsx_runtime.jsxs)("div",{className:"flex flex-row",children:[(0,jsx_runtime.jsx)("div",{children:"Analysis"}),(0,jsx_runtime.jsxs)(LemonTag.o,{className:"ml-1 float-right uppercase",type:"warning",children:[" ","Beta"]})]}),key:featureFlagsLogic.i.Analysis,content:(0,jsx_runtime.jsx)(PostHogFeature,{flag:constants.y8.FF_DASHBOARD_TEMPLATES,match:!0,children:(0,jsx_runtime.jsx)(AnalysisTab,{id:id,featureFlag:featureFlag})})}),featureFlag.id&&tabs.push({label:"History",key:featureFlagsLogic.i.HISTORY,content:(0,jsx_runtime.jsx)(ActivityLog.D,{scope:types.jc.FEATURE_FLAG,id:featureFlag.id})}),featureFlag.can_edit&&tabs.push({label:"Permissions",key:featureFlagsLogic.i.PERMISSIONS,content:(0,jsx_runtime.jsx)(PayGateMini.E,{feature:types.P$.ROLE_BASED_ACCESS,children:(0,jsx_runtime.jsx)(ResourcePermission,{resourceType:types._z.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})}),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("div",{className:"feature-flag",children:isNewFeatureFlag||isEditingFlag?(0,jsx_runtime.jsxs)(lib.Form,{id:"feature-flag",logic:feature_flags_featureFlagLogic.hk,props:props,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.j.featureFlags())},children:"Cancel"}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",form:"feature-flag",children:"Save"})]})}),featureFlag.experiment_set&&featureFlag.experiment_set?.length>0&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"warning",children:["This feature flag is linked to an experiment. Edit settings here only for advanced functionality. If unsure, go back to"," ",(0,jsx_runtime.jsx)(Link.r,{to:urls.j.experiment(featureFlag.experiment_set[0]),children:"the experiment creation screen."})]}),(0,jsx_runtime.jsx)("div",{className:"my-4",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-1/2 space-y-4",children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"key",label:"Key",help:hasKeyChanged&&"new"!==id?(0,jsx_runtime.jsxs)("span",{className:"text-warning",children:[(0,jsx_runtime.jsx)("b",{children:"Warning! "}),"Changing this key will",(0,jsx_runtime.jsxs)(Link.r,{to:`https://posthog.com/docs/features/feature-flags${FeatureFlagSnippets.X_}#feature-flag-persistence`,target:"_blank",targetBlankIcon:!0,children:[" ","affect the persistence of your flag"]})]}):void 0,children:_ref2=>{let{value,onChange}=_ref2;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonInput.D,{value:value,onChange:v=>{v!==value&&setHasKeyChanged(!0),onChange(v)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),(0,jsx_runtime.jsx)("span",{className:"text-muted text-sm",children:"Feature flag keys must be unique"})]})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"name",label:"Description",children:(0,jsx_runtime.jsx)(LemonTextArea._,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:featureFlag.name||""})}),hasAvailableFeature(types.P$.TAGGING)&&(0,jsx_runtime.jsx)(LemonField.D,{name:"tags",label:"Tags",children:_ref3=>{let{value,onChange}=_ref3;return(0,jsx_runtime.jsx)(ObjectTags.D,{saving:featureFlagLoading,tags:value,onChange:tags=>onChange(tags),tagsAvailable:tags.filter(tag=>!featureFlag.tags?.includes(tag)),className:"mt-2"})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"active",children:_ref4=>{let{value,onChange}=_ref4;return(0,jsx_runtime.jsx)("div",{className:"border rounded p-4",children:(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:()=>onChange(!value),checked:value})})}}),(0,jsx_runtime.jsx)(LemonField.D,{name:"ensure_experience_continuity",children:_ref5=>{let{value,onChange}=_ref5;return(0,jsx_runtime.jsxs)("div",{className:"border rounded p-4",children:[(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:()=>onChange(!value),fullWidth:!0,checked:value}),(0,jsx_runtime.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/docs/feature-flags/creating-feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:"Learn more"})]})]})}})]})}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(FeatureFlagRollout,{}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{id:`${featureFlag.id}`,filters:featureFlag.filters,onChange:setFeatureFlagFilters}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(FeatureFlagCodeExample.H,{featureFlag:featureFlag}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),isNewFeatureFlag&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(LemonButton.J,{fullWidth:!0,onClick:()=>setAdvancedSettingsExpanded(!advancedSettingsExpanded),sideIcon:advancedSettingsExpanded?(0,jsx_runtime.jsx)(posthog_icons_es.IconCollapse,{}):(0,jsx_runtime.jsx)(posthog_icons_es.IconExpand,{}),children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"l4 mt-2",children:"Advanced settings"}),(0,jsx_runtime.jsx)("div",{className:"text-muted mb-2 font-medium",children:"Define who can modify this flag."})]})})}),advancedSettingsExpanded&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlags[constants.y8.AUTO_ROLLBACK_FEATURE_FLAGS]&&(0,jsx_runtime.jsx)(FeatureFlagAutoRollback,{}),(0,jsx_runtime.jsxs)("div",{className:"border rounded bg-bg-light",children:[(0,jsx_runtime.jsx)("h3",{className:"p-2 mb-0",children:"Permissions"}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"}),(0,jsx_runtime.jsx)("div",{className:"p-3",children:(0,jsx_runtime.jsx)(PayGateMini.E,{feature:types.P$.ROLE_BASED_ACCESS,children:(0,jsx_runtime.jsx)(ResourcePermission,{resourceType:types._z.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd:rolesToAdd,addableRoles:addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})})]})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.j.featureFlags())},children:"Cancel"}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",form:"feature-flag",children:"Save"})]})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{notebookProps:{href:urls.j.featureFlag(id)},caption:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex space-x-1",children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"Key:"})," ",(0,jsx_runtime.jsx)(CopyToClipboard.D,{tooltipMessage:null,description:"Feature flag key",className:"justify-end",children:featureFlag.key})]})}),(0,jsx_runtime.jsx)("div",{children:featureFlag?.tags&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlag.tags.length>0?(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"Tags:"}):null," ",featureFlag.can_edit?(0,jsx_runtime.jsx)(ObjectTags.D,{tags:featureFlag.tags,onChange:tags=>{saveFeatureFlag({tags})},tagsAvailable:tags.filter(tag=>!featureFlag.tags?.includes(tag))}):featureFlag.tags.length>0?(0,jsx_runtime.jsx)(ObjectTags.D,{tags:featureFlag.tags,staticOnly:!0}):null]})})]}),(0,jsx_runtime.jsx)("div",{className:"mt-2",children:featureFlag.name||(0,jsx_runtime.jsx)("i",{children:"Description (optional)"})})]}),buttons:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(More.T,{loading:newCohortLoading,overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonButton.J,{to:urls.j.replay(types.yd.Recent,recordingFilterForFlag),fullWidth:!0,children:"View Recordings"}),featureFlags[constants.y8.FEATURE_FLAG_COHORT_CREATION]&&(0,jsx_runtime.jsx)(LemonButton.J,{loading:newCohortLoading,onClick:()=>{createStaticCohort()},fullWidth:!0,children:"Create Cohort"}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"delete-feature-flag",status:"danger",fullWidth:!0,onClick:()=>{deleteFeatureFlag(featureFlag)},disabledReason:featureFlag.can_edit?(featureFlag.features?.length||0)>0?"This feature flag is in use with an early access feature. Delete the early access feature to delete this flag":(featureFlag.experiment_set?.length||0)>0?"This feature flag is linked to an experiment. Delete the experiment to delete this flag":null:"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",children:"Delete feature flag"})]})}),(0,jsx_runtime.jsx)(LemonDivider.p,{vertical:!0}),(0,jsx_runtime.jsx)(NotebookSelectButton.R,{resource:{type:types.Cz.FeatureFlag,attrs:{id:featureFlag.id}},type:"secondary"}),(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"edit-feature-flag",type:"secondary",disabledReason:!featureFlag.can_edit&&"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",onClick:()=>{editFeatureFlag(!0)},children:"Edit"})]})})}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:activeTab,onChange:tab=>tab!==activeTab&&setActiveTab(tab),tabs:tabs})]})})})}function UsageTab(_ref6){let{featureFlag}=_ref6,{key:featureFlagKey,usage_dashboard:dashboardId,has_enriched_analytics:hasEnrichedAnalytics}=featureFlag,{generateUsageDashboard,enrichUsageDashboard}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),{featureFlagLoading}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),dashboard=null;if(dashboardId){let dashboardLogicValues=(0,index_esm.useValues)((0,dashboardLogic.BM)({id:dashboardId,placement:types.F4.FeatureFlag}));dashboard=dashboardLogicValues.dashboard}let{closeEnrichAnalyticsNotice}=(0,index_esm.useActions)(featureFlagsLogic.b),{enrichAnalyticsNoticeAcknowledged}=(0,index_esm.useValues)(featureFlagsLogic.b);(0,react.useEffect)(()=>{dashboard&&hasEnrichedAnalytics&&!(dashboard.tiles?.find(tile=>{var _tile$insight$name$in;return(null!==(_tile$insight$name$in=tile.insight?.name?.indexOf("Feature Viewed"))&&void 0!==_tile$insight$name$in?_tile$insight$name$in:-1)>-1})!==void 0)&&enrichUsageDashboard()},[dashboard]);let propertyFilter=[{key:"$feature_flag",type:types.FT.Event,value:featureFlagKey,operator:types.WV.Exact}];return(0,jsx_runtime.jsxs)("div",{children:[dashboard?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hasEnrichedAnalytics&&!enrichAnalyticsNoticeAcknowledged&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",className:"mb-3",onClose:()=>closeEnrichAnalyticsNotice(),children:["Get richer insights automatically by"," ",(0,jsx_runtime.jsxs)(Link.r,{to:"https://posthog.com/docs/libraries/js#enriched-analytics",target:"_blank",children:["enabling enriched analytics for flags"," "]})]}),(0,jsx_runtime.jsx)(Dashboard.Dashboard,{id:dashboardId.toString(),placement:types.F4.FeatureFlag})]}):(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("b",{children:"Dashboard"}),(0,jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"There is currently no connected dashboard to this feature flag. If there was previously a connected dashboard, it may have been deleted."}),featureFlagLoading?(0,jsx_runtime.jsx)(EmptyDashboardComponent.l,{loading:!0,canEdit:!1}):(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary",onClick:()=>generateUsageDashboard(),children:"Generate Usage Dashboard"})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-4 mb-4",children:[(0,jsx_runtime.jsx)("b",{children:"Log"}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:`Feature flag calls for "${featureFlagKey}" will appear here`})]}),(0,jsx_runtime.jsx)(Query.A,{query:{kind:schema.OH.DataTableNode,source:{kind:schema.OH.EventsQuery,select:[...(0,DataTable_utils.Qi)(schema.OH.EventsQuery),featureFlag.filters.multivariate?"properties.$feature_flag_response":"if(toString(properties.$feature_flag_response) IN ['1', 'true'], 'true', 'false') -- Feature Flag Response"],event:"$feature_flag_called",properties:propertyFilter,after:"-30d"},full:!1,showDateRange:!0}})]})}function FeatureFlagRollout(_ref7){let{readOnly}=_ref7,{multivariateEnabled,variants,areVariantRolloutsValid,variantRolloutSum,nonEmptyVariants,aggregationTargetName,featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.hk),{distributeVariantsEqually,addVariant,removeVariant,setMultivariateEnabled}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.hk),filterGroups=featureFlag.filters.groups||[],confirmRevertMultivariateEnabled=()=>{src.LemonDialog.open({title:"Change value type?",description:"The existing vaiants will be lost",primaryButton:{children:"Confirm",type:"primary",onClick:()=>setMultivariateEnabled(!1),size:"small"},secondaryButton:{children:"Cancel",type:"tertiary",size:"small"}})};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[readOnly?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,jsx_runtime.jsx)("span",{className:"card-secondary",children:"Type"}),(0,jsx_runtime.jsx)("span",{children:featureFlag.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),(0,jsx_runtime.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),(0,jsx_runtime.jsxs)("span",{children:["This flag"," ",(0,jsx_runtime.jsxs)("b",{children:[featureFlag.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"}),featureFlag.filters.multivariate&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Variant keys"}),(0,jsx_runtime.jsxs)("div",{className:"border rounded p-4 mb-4 bg-bg-light",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-8 gap-4 font-semibold",children:[(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:"Key"}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:"Description"}),(0,jsx_runtime.jsx)("div",{className:"col-span-3",children:"Payload"}),(0,jsx_runtime.jsx)("div",{children:"Rollout"})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"}),variants.map((variant,index)=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-8 gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"col-span-2",children:[(0,jsx_runtime.jsx)(Lettermark.B,{name:utils.bH[index],color:Lettermark.w.Gray}),(0,jsx_runtime.jsx)(CopyToClipboard.D,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:variant.key})]}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:(0,jsx_runtime.jsx)("span",{className:variant.name?"":"text-muted",children:variant.name||"There is no description for this variant key"})}),(0,jsx_runtime.jsx)("div",{className:"col-span-3",children:featureFlag.filters.payloads?.[index]?(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:!0,value:featureFlag.filters.payloads[index]}):(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"No payload associated with this variant"})}),(0,jsx_runtime.jsxs)("div",{children:[variant.rollout_percentage,"%"]})]}),index!==variants.length-1&&(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"})]},index))]})]})]}):(0,jsx_runtime.jsxs)("div",{className:"mb-8",children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Served value"}),(0,jsx_runtime.jsx)("div",{className:"mb-2",children:(0,jsx_runtime.jsx)(src.LemonSegmentedButton,{size:"small",options:[{label:"Release toggle (boolean)",value:"boolean",disabledReason:featureFlag.experiment_set&&featureFlag.experiment_set?.length>0?"This feature flag is associated with an experiment.":void 0},{label:(0,jsx_runtime.jsx)("span",{children:"Multiple variants with rollout percentages (A/B test)"}),value:"multivariate"}],onChange:value=>{"boolean"===value&&nonEmptyVariants.length?confirmRevertMultivariateEnabled():(setMultivariateEnabled("multivariate"===value),focusVariantKeyField(0))},value:multivariateEnabled?"multivariate":"boolean"})}),(0,jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:[(0,utils.fm)(aggregationTargetName)," will be served"," ",multivariateEnabled?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),!multivariateEnabled&&(0,jsx_runtime.jsxs)("div",{className:"mb-6",children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Payload"}),readOnly?featureFlag.filters.payloads?.true?(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,value:featureFlag.filters.payloads?.true}):(0,jsx_runtime.jsx)("span",{children:"No payload associated with this flag"}):(0,jsx_runtime.jsxs)("div",{className:"w-1/2",children:[(0,jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:["Specify a payload to be returned when the served value is"," ",(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)("code",{children:"true"})})]}),(0,jsx_runtime.jsx)(lib.Group,{name:["filters","payloads"],children:(0,jsx_runtime.jsx)(LemonField.D,{name:"true",children:(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:readOnly,placeholder:'Examples: "A string", 2500, {"key": "value"}'})})})]})]}),!readOnly&&multivariateEnabled&&(0,jsx_runtime.jsxs)("div",{className:"feature-flag-variants",children:[(0,jsx_runtime.jsx)("h3",{className:"l4",children:"Variant keys"}),(0,jsx_runtime.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),(0,jsx_runtime.jsxs)("div",{className:"VariantFormList space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"VariantFormList__row grid label-row gap-2 items-center",children:[(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)("div",{className:"col-span-4",children:"Variant key"}),(0,jsx_runtime.jsx)("div",{className:"col-span-6",children:"Description"}),(0,jsx_runtime.jsx)("div",{className:"col-span-8",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsx)("b",{children:"Payload"}),(0,jsx_runtime.jsx)("span",{className:"text-muted font-normal",children:"Specify return payload when the variant key matches"})]})}),(0,jsx_runtime.jsxs)("div",{className:"col-span-4 flex items-center gap-1",children:[(0,jsx_runtime.jsx)("span",{children:"Rollout"}),(0,jsx_runtime.jsx)(LemonButton.J,{onClick:distributeVariantsEqually,children:"(Redistribute)"})]})]}),variants.map((variant,index)=>(0,jsx_runtime.jsx)(lib.Group,{name:"filters",children:(0,jsx_runtime.jsxs)("div",{className:"VariantFormList__row grid gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:(0,jsx_runtime.jsx)(Lettermark.B,{name:utils.bH[index],color:Lettermark.w.Gray})}),(0,jsx_runtime.jsx)("div",{className:"col-span-4",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["multivariate","variants",index,"key"],children:(0,jsx_runtime.jsx)(LemonInput.D,{"data-attr":"feature-flag-variant-key","data-key-index":index.toString(),className:"ph-ignore-input",placeholder:`example-variant-${index+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1,disabled:!!(featureFlag.experiment_set&&featureFlag.experiment_set?.length>0)})})}),(0,jsx_runtime.jsx)("div",{className:"col-span-6",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["multivariate","variants",index,"name"],children:(0,jsx_runtime.jsx)(LemonInput.D,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),(0,jsx_runtime.jsx)("div",{className:"col-span-8",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["payloads",index],children:_ref8=>{let{value,onChange}=_ref8;return(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{onChange:onChange,value:value,placeholder:'{"key": "value"}'})}})}),(0,jsx_runtime.jsx)("div",{className:"col-span-3",children:(0,jsx_runtime.jsx)(LemonField.D,{name:["multivariate","variants",index,"rollout_percentage"],children:_ref9=>{var phrases;let{value,onChange}=_ref9;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(LemonInput.D,{type:"number",min:0,max:100,value:value,onChange:changedValue=>{if(null!==changedValue){let valueInt=void 0!==changedValue?parseInt(changedValue.toString()):0;isNaN(valueInt)||onChange(valueInt)}}}),filterGroups.filter(group=>group.variant===variant.key).length>0&&(0,jsx_runtime.jsxs)("span",{className:"text-muted text-xs",children:["Overridden by"," ",(0,jsx_runtime.jsx)("strong",{children:null===(phrases=filterGroups.filter(group=>null!=group.variant&&group.variant===variant.key).map(variant=>"Set "+(filterGroups.findIndex(group=>group===variant)+1)))||phrases.length<3?(0,insights_utils.EL)(phrases):`${phrases[0]} and ${phrases.length-1} more sets`})]})]})}})}),(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:variants.length>1&&(0,jsx_runtime.jsx)(LemonButton.J,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),"data-attr":`delete-prop-filter-${index}`,noPadding:!0,onClick:()=>removeVariant(index),disabledReason:featureFlag.experiment_set&&featureFlag.experiment_set?.length>0?"Cannot delete variants from a feature flag that is part of an experiment":void 0,tooltipPlacement:"top-end"})})]})},index)),variants.length>0&&!areVariantRolloutsValid&&(0,jsx_runtime.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",variantRolloutSum,")."]}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"secondary",onClick:()=>{let newIndex=variants.length;addVariant(),focusVariantKeyField(newIndex)},icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),disabledReason:featureFlag.experiment_set&&featureFlag.experiment_set?.length>0?"Cannot add variants to a feature flag that is part of an experiment. To update variants, create a new experiment.":void 0,tooltipPlacement:"top-start",center:!0,children:"Add variant"})]})]})]})}},"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>ProjectHomePageCompactListItem});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts");__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ProjectHomePageCompactListItem(_ref){let{to,onClick,title,subtitle,prefix,suffix}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonButton,{fullWidth:!0,to:to,onClick:onClick,className:"h-12",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"flex items-start justify-between overflow-hidden gap-2 flex-1",children:[prefix?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"flex shrink-0 text-muted text-xl",children:prefix}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"truncate space-y-0.5 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"text-link truncate",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"truncate text-muted font-normal text-xs",children:subtitle})]}),suffix?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"shrink-0",children:suffix}):null]})})}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>RecentInsights,z:()=>InsightRow}),__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomepage.scss");var kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),lib_dayjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/dayjs.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function InsightRow(_ref){let{insight}=_ref,{reportInsightOpenedFromRecentInsightList}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_4__.vx);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_8__.x,{title:insight.name||insight.derived_name||"Insight",subtitle:`Last modified ${(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_3__.Bv)(insight.last_modified_at).fromNow()}`,prefix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__.InsightIcon,{insight:insight}),to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.insightView(insight.short_id),onClick:()=>{reportInsightOpenedFromRecentInsightList()}})}function RecentInsights(){let{recentInsights,recentInsightsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_9__.I),{loadRecentInsights}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_9__.I);return(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(()=>{loadRecentInsights()},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_2__.a,{title:"Your recently viewed insights",viewAllURL:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.savedInsights(),loading:recentInsightsLoading,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.savedInsights()},items:recentInsights.slice(0,5),renderRow:(insight,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(InsightRow,{insight:insight},index)})})}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>projectHomepageLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/types.ts");let projectHomepageLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","project-homepage","projectHomepageLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.teamLogic,["currentTeamId","currentTeam"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({primaryDashboardId:[()=>[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.teamLogic.selectors.currentTeam],currentTeam=>currentTeam?.primary_dashboard],dashboardLogicProps:[s=>[s.primaryDashboardId],primaryDashboardId=>primaryDashboardId?{id:primaryDashboardId,placement:_types__WEBPACK_IMPORTED_MODULE_4__.F4.ProjectHomepage}:null]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref=>{let{values}=_ref;return{recentInsights:[[],{loadRecentInsights:async()=>await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.get(`api/projects/${values.currentTeamId}/insights/my_last_viewed?include_query_insights=true`)}],persons:[[],{loadPersons:async()=>{let response=await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.persons.list();return response.results}}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref2=>{let{actions}=_ref2;actions.loadPersons()})])},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/CompactList/CompactList.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".CompactList{background:var(--bg-light);border:1px solid var(--border);border-radius:var(--radius);box-sizing:initial;display:flex;flex:1;flex-direction:column;overflow:hidden}.CompactList .CompactList__header{align-items:center;display:flex;justify-content:space-between;padding:.5rem}.CompactList .CompactList__header h3{font-size:.9rem;font-weight:600;line-height:1.4;margin-bottom:0}.CompactList .CompactList__content{height:16rem;overflow-y:auto;padding:.5rem}.CompactList .LemonButton{font-family:var(--font-sans)!important}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/feature-flags/JSONEditorInput.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".JsonEditorInput{position:relative}.JsonEditorInput .border{border-radius:var(--radius)}.JsonEditorInput .border .monaco-editor,.JsonEditorInput .border .monaco-editor .overflow-guard{border-radius:inherit}.JsonEditorInput .placeholder{bottom:0;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.JsonEditorInput .placeholder .placeholderLabelContainer{align-items:center;color:gray;display:flex;height:100%;padding-left:18px;pointer-events:none}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ProjectHomepage{container-type:inline-size}.ProjectHomepage .ProjectHomepage__dashboardheader{align-items:center;display:flex;justify-content:space-between;margin-top:1rem}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title{align-items:center;display:flex;flex-direction:row}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title .ant-skeleton{width:300px}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title .ant-skeleton h3{margin:0}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title a{color:var(--default)}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title a:hover{color:var(--primary-3000)}.ProjectHomepage .ProjectHomepage__lists{display:flex;gap:1rem}@container (max-width: 800px){.ProjectHomepage .ProjectHomepage__lists{flex-direction:column}}.ProjectHomepage .empty-state-container{align-items:center;background-color:var(--side);display:flex;flex-direction:column;justify-content:center;padding:4rem;width:100%}",""]),module.exports=exports},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__),options={};options.insert="head",options.singleton=!1,_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default(),options),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default().locals}}]);