"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[749],{"./frontend/src/scenes/surveys/Surveys.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NewSurvey:()=>NewSurvey,NewSurveyAppearanceSection:()=>NewSurveyAppearanceSection,NewSurveyCustomisationSection:()=>NewSurveyCustomisationSection,NewSurveyPresentationSection:()=>NewSurveyPresentationSection,NewSurveyTargetingSection:()=>NewSurveyTargetingSection,SurveyNotFound:()=>SurveyNotFound,SurveyTemplates:()=>SurveyTemplates,SurveyView:()=>SurveyView,SurveysList:()=>SurveysList,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_App__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/scenes/App.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/urls.ts"),_mocks_browser__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/mocks/browser.tsx"),_mocks_handlers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/mocks/handlers.ts"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts"),kea_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),_surveyLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/surveys/surveyLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const MOCK_BASIC_SURVEY={id:"0187c279-bcae-0000-34f5-4f121921f005",name:"basic survey",description:"basic survey description",type:_types__WEBPACK_IMPORTED_MODULE_5__.d_.Popover,created_at:"2023-04-27T10:04:37.977401Z",created_by:{id:1,uuid:"01863799-062b-0000-8a61-b2842d5f8642",distinct_id:"Sopz9Z4NMIfXGlJe6W1XF98GOqhHNui5J5eRe0tBGTE",first_name:"Employee 427",email:"test2@posthog.com"},questions:[{question:"question 1?",type:_types__WEBPACK_IMPORTED_MODULE_5__.I9.Open}],conditions:null,linked_flag:null,linked_flag_id:null,targeting_flag:null,targeting_flag_filters:void 0,appearance:{backgroundColor:"white",submitButtonColor:"#2C2C2C"},start_date:null,end_date:null,archived:!1},MOCK_SURVEY_WITH_RELEASE_CONS={id:"0187c279-bcae-0000-34f5-4f121921f006",name:"survey with release conditions",description:"survey with release conditions description",type:_types__WEBPACK_IMPORTED_MODULE_5__.d_.Popover,created_at:"2023-04-28T10:04:37.977401Z",created_by:{id:1,uuid:"01863799-062b-0000-8a61-b2842d5f8642",distinct_id:"Sopz9Z4NMIfXGlJe6W1XF98GOqhHNui5J5eRe0tBGTE",first_name:"Employee 427",email:"test2@posthog.com"},questions:[{question:"question 2?",type:_types__WEBPACK_IMPORTED_MODULE_5__.I9.Open}],appearance:{backgroundColor:"white",submitButtonColor:"#2C2C2C"},conditions:{url:"posthog",selector:""},linked_flag:{id:7,team_id:1,name:"",key:"early-access-feature",filters:{groups:[{variant:null,properties:[],rollout_percentage:null}],payloads:{},multivariate:null},deleted:!1,active:!0,ensure_experience_continuity:!1},linked_flag_id:7,targeting_flag:{id:15,team_id:1,name:"Targeting flag for survey survey with release conditions",key:"survey-targeting-survey-with-release-conditions",filters:{groups:[{variant:null,properties:[{key:"email",type:_types__WEBPACK_IMPORTED_MODULE_5__.FT.Person,value:["li@posthog.com"],operator:_types__WEBPACK_IMPORTED_MODULE_5__.WV.Exact}],rollout_percentage:100}],multivariate:null,payloads:{}},deleted:!1,active:!0,ensure_experience_continuity:!1},targeting_flag_filters:void 0,start_date:"2023-04-29T10:04:37.977401Z",end_date:null,archived:!1},MOCK_SURVEY_SHOWN={clickhouse:"SELECT count() AS `survey shown` FROM events WHERE and(equals(events.team_id, 1), equals(events.event, %(hogql_val_0)s), ifNull(equals(replaceRegexpAll(nullIf(nullIf(JSONExtractRaw(events.properties, %(hogql_val_1)s), ''), 'null'), '^\"|\"$', ''), %(hogql_val_2)s), 0)) LIMIT 100 SETTINGS readonly=2, max_execution_time=60",columns:["survey shown"],hogql:"SELECT count() AS `survey shown` FROM events WHERE and(equals(event, 'survey shown'), equals(properties.$survey_id, '0188e637-3b72-0000-f407-07a338652af9')) LIMIT 100",query:"select count() as 'survey shown' from events where event == 'survey shown' and properties.$survey_id == '0187c279-bcae-0000-34f5-4f121921f006'",results:[[0]],types:[["survey shown","UInt64"]]},MOCK_SURVEY_RESULTS={columns:["*","properties.$survey_response","timestamp","person"],hasMore:!1,results:[],types:["Tuple(UUID, String, String, DateTime64(6, 'UTC'), Int64, String, String, DateTime64(6, 'UTC'))","Nullable(String)","DateTime64(6, 'UTC')","String"]},__WEBPACK_DEFAULT_EXPORT__={title:"Scenes-App/Surveys",parameters:{layout:"fullscreen",testOptions:{excludeNavigationFromSnapshot:!0},viewMode:"story",mockDate:"2023-06-28"},decorators:[(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_3__.x8)({get:{"/api/projects/:team_id/surveys/":(0,_mocks_handlers__WEBPACK_IMPORTED_MODULE_4__.Pb)([MOCK_BASIC_SURVEY,MOCK_SURVEY_WITH_RELEASE_CONS]),"/api/projects/:team_id/surveys/0187c279-bcae-0000-34f5-4f121921f005/":MOCK_BASIC_SURVEY,"/api/projects/:team_id/surveys/0187c279-bcae-0000-34f5-4f121921f006/":MOCK_SURVEY_WITH_RELEASE_CONS,"/api/projects/:team_id/surveys/responses_count/":{"0187c279-bcae-0000-34f5-4f121921f005":17,"0187c279-bcae-0000-34f5-4f121921f006":25}},post:{"/api/projects/:team_id/query/":req=>"EventsQuery"==req.body.kind?MOCK_SURVEY_RESULTS:MOCK_SURVEY_SHOWN}})]};function SurveysList(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.surveys())}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function NewSurvey(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.survey("new"))}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function NewSurveyCustomisationSection(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.survey("new")),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).mount(),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).actions.setSelectedSection(_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.U.Customization)}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function NewSurveyPresentationSection(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.survey("new")),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).mount(),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).actions.setSelectedSection(_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.U.Presentation)}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function NewSurveyTargetingSection(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.survey("new")),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).mount(),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).actions.setSelectedSection(_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.U.Targeting),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).actions.setSurveyValue("conditions",{url:"kiki"}),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).actions.setSurveyValue("targeting_flag_filters",{groups:[{properties:[{key:"$browser",value:["Chrome"],operator:"exact",type:"person"}],rollout_percentage:20}]})}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function NewSurveyAppearanceSection(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.survey("new")),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).mount(),(0,_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.T)({id:"new"}).actions.setSelectedSection(_surveyLogic__WEBPACK_IMPORTED_MODULE_7__.U.Appearance)}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function SurveyView(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.survey(MOCK_SURVEY_WITH_RELEASE_CONS.id))}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function SurveyTemplates(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.surveyTemplates())}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}function SurveyNotFound(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_6__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_2__.j.survey("1234566789"))}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_1__.g,{})}SurveysList.parameters={...SurveysList.parameters,docs:{...SurveysList.parameters?.docs,source:{originalSource:"function SurveysList(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.surveys());\n  }, []);\n  return <App />;\n}",...SurveysList.parameters?.docs?.source}}},NewSurvey.parameters={...NewSurvey.parameters,docs:{...NewSurvey.parameters?.docs,source:{originalSource:"function NewSurvey(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.survey('new'));\n  }, []);\n  return <App />;\n}",...NewSurvey.parameters?.docs?.source}}},NewSurveyCustomisationSection.parameters={...NewSurveyCustomisationSection.parameters,docs:{...NewSurveyCustomisationSection.parameters?.docs,source:{originalSource:"function NewSurveyCustomisationSection(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.survey('new'));\n    surveyLogic({\n      id: 'new'\n    }).mount();\n    surveyLogic({\n      id: 'new'\n    }).actions.setSelectedSection(SurveyEditSection.Customization);\n  }, []);\n  return <App />;\n}",...NewSurveyCustomisationSection.parameters?.docs?.source}}},NewSurveyPresentationSection.parameters={...NewSurveyPresentationSection.parameters,docs:{...NewSurveyPresentationSection.parameters?.docs,source:{originalSource:"function NewSurveyPresentationSection(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.survey('new'));\n    surveyLogic({\n      id: 'new'\n    }).mount();\n    surveyLogic({\n      id: 'new'\n    }).actions.setSelectedSection(SurveyEditSection.Presentation);\n  }, []);\n  return <App />;\n}",...NewSurveyPresentationSection.parameters?.docs?.source}}},NewSurveyTargetingSection.parameters={...NewSurveyTargetingSection.parameters,docs:{...NewSurveyTargetingSection.parameters?.docs,source:{originalSource:"function NewSurveyTargetingSection(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.survey('new'));\n    surveyLogic({\n      id: 'new'\n    }).mount();\n    surveyLogic({\n      id: 'new'\n    }).actions.setSelectedSection(SurveyEditSection.Targeting);\n    surveyLogic({\n      id: 'new'\n    }).actions.setSurveyValue('conditions', {\n      url: 'kiki'\n    });\n    surveyLogic({\n      id: 'new'\n    }).actions.setSurveyValue('targeting_flag_filters', {\n      groups: [{\n        properties: [{\n          key: '$browser',\n          value: ['Chrome'],\n          operator: 'exact',\n          type: 'person'\n        }],\n        rollout_percentage: 20\n      }]\n    });\n  }, []);\n  return <App />;\n}",...NewSurveyTargetingSection.parameters?.docs?.source}}},NewSurveyAppearanceSection.parameters={...NewSurveyAppearanceSection.parameters,docs:{...NewSurveyAppearanceSection.parameters?.docs,source:{originalSource:"function NewSurveyAppearanceSection(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.survey('new'));\n    surveyLogic({\n      id: 'new'\n    }).mount();\n    surveyLogic({\n      id: 'new'\n    }).actions.setSelectedSection(SurveyEditSection.Appearance);\n  }, []);\n  return <App />;\n}",...NewSurveyAppearanceSection.parameters?.docs?.source}}},SurveyView.parameters={...SurveyView.parameters,docs:{...SurveyView.parameters?.docs,source:{originalSource:"function SurveyView(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.survey(MOCK_SURVEY_WITH_RELEASE_CONS.id));\n  }, []);\n  return <App />;\n}",...SurveyView.parameters?.docs?.source}}},SurveyTemplates.parameters={...SurveyTemplates.parameters,docs:{...SurveyTemplates.parameters?.docs,source:{originalSource:"function SurveyTemplates(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.surveyTemplates());\n  }, []);\n  return <App />;\n}",...SurveyTemplates.parameters?.docs?.source}}},SurveyNotFound.parameters={...SurveyNotFound.parameters,docs:{...SurveyNotFound.parameters?.docs,source:{originalSource:"function SurveyNotFound(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.survey('1234566789'));\n  }, []);\n  return <App />;\n}",...SurveyNotFound.parameters?.docs?.source}}}}}]);