(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{"./frontend/src/scenes/events/EventsVolumeTable.tsx":function(S,g,e){"use strict";e.r(g),e.d(g,"scene",function(){return se}),e.d(g,"EventsVolumeTable",function(){return H});var O=e("./node_modules/react/index.js"),n=e.n(O),u=e("./node_modules/kea/lib/index.esm.js"),Y=e("./node_modules/antd/es/alert/index.js"),K=e("./node_modules/antd/es/skeleton/index.js"),U=e("./frontend/src/scenes/PreflightCheck/logic.tsx"),F=e("./frontend/src/models/eventDefinitionsModel.ts"),J=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),X=e("./frontend/src/scenes/events/VolumeTable.tsx"),G=e("./frontend/src/scenes/events/definitions/DefinitionDrawer.tsx"),Q=e("./frontend/src/scenes/events/EventsTabs.tsx"),Z=e("./frontend/src/scenes/events/EventPageHeader.tsx"),_=e("./frontend/src/lib/logic/featureFlagLogic.ts"),B=e("./frontend/src/lib/constants.tsx"),de=e("./node_modules/core-js/modules/es.array.concat.js"),ce=e("./node_modules/core-js/modules/es.function.name.js"),k=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),P=e.n(k),q=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ee=e.n(q),ne=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss"),M=e.n(ne),N={};N.insert="head",N.singleton=!1;var ue=ee()(M.a,N),me=M.a.locals||{},$=e("./frontend/src/lib/components/LemonTable/index.ts"),y=e("./frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts"),z=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),w=e("./frontend/src/scenes/organizationLogic.tsx"),I=e("./frontend/src/scenes/data-management/events/DefinitionHeader.tsx"),V=e("./frontend/src/lib/utils.tsx"),ve=e("./node_modules/core-js/modules/es.array.includes.js"),fe=e("./node_modules/core-js/modules/es.string.includes.js"),te=e("./frontend/src/lib/components/LemonButton/More.tsx"),oe=e("./frontend/src/lib/components/LemonButton/index.ts"),ie=e("./frontend/src/scenes/urls.ts"),ae=e("./node_modules/kea-router/lib/index.js");function C(f){var d,m,a,b,p,v,x,h,s=f.definition,E=Object(u.useActions)(y.d),T=E.loadPropertiesForEvent,A=E.setLocalPropertyDefinition,R=Object(u.useValues)(y.d),t=R.eventPropertiesCacheMap,o=R.eventDefinitionPropertiesLoading,i=Object(u.useValues)(w.a),r=i.hasDashboardCollaboration,c=i.hasIngestionTaxonomy;Object(O.useEffect)(function(){T(s)},[]);var re=[{title:"Property",key:"property",className:"definition-column-name",render:function(j,l){return n.a.createElement(I.b,{definition:l,event:s,hideIcon:!0,openDetailInNewTab:!1,updateRemoteItem:function(le){A(s,le)}})}},{title:"Type",key:"type",className:"definition-column-type",render:function(j,l){return l.property_type?n.a.createElement("div",{className:"definition-pill-value",style:{textTransform:"uppercase"}},l.property_type):n.a.createElement("span",{className:"text-muted"},"\u2014")}}].concat(P()(r?[{title:"Tags",key:"tags",render:function(j,l){var L;return n.a.createElement(z.a,{tags:(L=l.tags)!==null&&L!==void 0?L:[],staticOnly:!0})}}]:[]),P()(c?[{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(j,l){return l.query_usage_30_day?Object(V.O)(l.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")}}]:[]),[{title:"Example",key:"example",align:"right",className:"definition-example-type",render:function(j,l){return l.example?n.a.createElement("div",{className:"definition-pill-value",style:{fontFamily:"monospace"}},l.example):n.a.createElement("span",{className:"text-muted"},"\u2014")}},{key:"actions",width:0,render:function(j,l){return n.a.createElement(te.a,{overlay:n.a.createElement(n.a.Fragment,null,n.a.createElement(oe.a,{type:"stealth",onClick:function(){ae.router.actions.push(ie.a.eventPropertyStat(l.id))},fullWidth:!0,"data-attr":"event-properties-definition-property-detail"},"Show property in list"))})}}]);return n.a.createElement("div",{className:"event-properties-wrapper"},n.a.createElement("span",{className:"event-properties-header"},"Top properties"),n.a.createElement("p",{className:"event-properties-subtext"},"Please note that description and tags are shared across events. Posthog properties are excluded from this list."),n.a.createElement($.a,{id:"event-properties-definition-table-".concat(s.id),"data-attr":"event-properties-definition-nested-table",columns:re,className:"event-properties-definition-table-".concat(s.id),dataSource:(d=t==null||(m=t[s.id])===null||m===void 0?void 0:m.results)!==null&&d!==void 0?d:[],emptyState:"This event has no properties",nouns:["property definition","property definitions"],pagination:{controlled:!0,pageSize:y.b,currentPage:(a=t==null||(b=t[s.id])===null||b===void 0?void 0:b.page)!==null&&a!==void 0?a:1,entryCount:(p=t==null||(v=t[s.id])===null||v===void 0?void 0:v.count)!==null&&p!==void 0?p:0,onForward:!(t==null||(x=t[s.id])===null||x===void 0)&&x.next?function(){T(s,t[s.id].next)}:void 0,onBackward:!(t==null||(h=t[s.id])===null||h===void 0)&&h.previous?function(){T(s,t[s.id].previous)}:void 0},loading:o.includes(s.id)}))}try{C.displayName="EventDefinitionProperties",C.__docgenInfo={description:"",displayName:"EventDefinitionProperties",props:{definition:{defaultValue:null,description:"",name:"definition",required:!0,type:{name:"EventDefinition"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"]={docgenInfo:C.__docgenInfo,name:"EventDefinitionProperties",path:"frontend/src/scenes/data-management/events/EventDefinitionProperties.tsx#EventDefinitionProperties"})}catch(f){}var pe={component:W,logic:y.d,paramsToProps:function(){return{syncWithUrl:!0}}};function W(){var f,d,m=Object(u.useValues)(y.d),a=m.eventDefinitions,b=m.eventDefinitionsLoading,p=m.openedDefinitionId,v=Object(u.useActions)(y.d),x=v.loadEventDefinitions,h=v.setOpenedDefinition,s=v.setLocalEventDefinition,E=Object(u.useValues)(w.a),T=E.hasDashboardCollaboration,A=E.hasIngestionTaxonomy,R=[{key:"icon",className:"definition-column-icon",render:function(o,i){return n.a.createElement(I.a,{definition:i,hideView:!0,hideText:!0})}},{title:"Name",key:"name",className:"definition-column-name",render:function(o,i){return n.a.createElement(I.a,{definition:i,hideView:!0,hideIcon:!0,updateRemoteItem:function(c){return s(c)}})},sorter:function(o,i){return o.name.localeCompare(i.name)}}].concat(P()(T?[{title:"Tags",key:"tags",render:function(o,i){var r;return n.a.createElement(z.a,{tags:(r=i.tags)!==null&&r!==void 0?r:[],staticOnly:!0})}}]:[]),P()(A?[{title:"30 day volume",key:"volume_30_day",align:"right",render:function(o,i){return i.volume_30_day?Object(V.O)(i.volume_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(o,i){var r,c;return((r=o==null?void 0:o.volume_30_day)!==null&&r!==void 0?r:0)-((c=i==null?void 0:i.volume_30_day)!==null&&c!==void 0?c:0)}},{title:"30 day queries",key:"query_usage_30_day",align:"right",render:function(o,i){return i.query_usage_30_day?Object(V.O)(i.query_usage_30_day):n.a.createElement("span",{className:"text-muted"},"\u2014")},sorter:function(o,i){var r,c;return((r=o==null?void 0:o.query_usage_30_day)!==null&&r!==void 0?r:0)-((c=i==null?void 0:i.query_usage_30_day)!==null&&c!==void 0?c:0)}}]:[]));return n.a.createElement($.a,{columns:R,className:"events-definition-table","data-attr":"events-definition-table",loading:b,rowKey:"id",rowStatus:function(o){return o.id===p?"highlighted":void 0},pagination:{controlled:!0,currentPage:(f=a==null?void 0:a.page)!==null&&f!==void 0?f:1,entryCount:(d=a==null?void 0:a.count)!==null&&d!==void 0?d:0,pageSize:y.a,onForward:a.next?function(){x(a.next)}:void 0,onBackward:a.previous?function(){x(a.previous)}:void 0},expandable:{expandedRowRender:function(o){return n.a.createElement(C,{definition:o})},noIndent:!0,isRowExpanded:function(o){return o.id===p?!0:-1},onRowCollapse:function(o){return o.id===p&&h(null)}},dataSource:a.results,emptyState:"No event definitions",nouns:["event","events"]})}var se={component:H,logic:F.a};function H(){var f=Object(u.useValues)(U.a),d=f.preflight,m=Object(u.useValues)(F.a),a=m.eventDefinitions,b=m.loaded,p=Object(u.useValues)(_.a),v=p.featureFlags;return n.a.createElement("div",{"data-attr":"manage-events-table"},n.a.createElement(Z.a,{activeTab:Q.a.EventStats}),b?n.a.createElement(n.a.Fragment,null,d&&!(d!=null&&d.is_event_property_usage_enabled)?n.a.createElement(J.a,{tab:"Events Stats"}):(a.length===0||a[0].volume_30_day===null)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Y.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later.",style:{marginBottom:"1rem"}})),v[B.o.COLLABORATIONS_TAXONOMY]?n.a.createElement(u.BindLogic,{logic:y.d,props:{}},n.a.createElement(W,null)):n.a.createElement(X.a,{data:a,type:"event"})):n.a.createElement(K.a,{active:!0,paragraph:{rows:5}}),!v[B.o.COLLABORATIONS_TAXONOMY]&&n.a.createElement(G.a,null))}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/events/EventDefinitionsTable.scss":function(S,g,e){var O=e("./node_modules/css-loader/dist/runtime/api.js");g=O(!1),g.push([S.i,'.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon{width:36px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon{display:flex;align-items:center;justify-content:flex-start}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon{flex-shrink:0}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-muted path{fill:var(--taxonomy-icon-muted)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified{height:28px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified path{fill:var(--success)}.events-definition-table .LemonTable__content>table>tbody td.definition-column-icon .definition-column-name-icon svg.taxonomy-icon.taxonomy-icon-verified:not(.taxonomy-icon-ph){margin-bottom:-4px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name{display:flex;flex-direction:row;align-items:center}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content{display:flex;flex-direction:column;position:relative}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title{font-weight:600;cursor:pointer;position:relative;overflow:visible}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-title:before{content:"";position:absolute;top:-5px;bottom:-5px;left:-10px;right:-50px;height:22px}.events-definition-table .LemonTable__content>table>tbody td.definition-column-name .definition-column-name-content .definition-column-name-content-description{font-size:13px;color:var(--text-muted);text-overflow:ellipsis}.events-definition-table .LemonTable__content>table>tbody td.definition-example-type .definition-pill-value{float:right}.events-definition-table .LemonTable__content>table>tbody .definition-pill-value{display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.125rem .25rem;letter-spacing:.25px;border-radius:var(--radius);border:1px solid var(--border-light);background:var(--bg-mid);color:var(--muted-alt);font-size:.625rem;font-weight:500;word-break:break-all;max-width:300px;cursor:text}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper{padding:1rem 0 1rem 1rem}.events-definition-table .LemonTable__content>table>tbody .LemonTable__expansion .event-properties-wrapper .event-properties-header{font-weight:600}',""]),S.exports=g}}]);
