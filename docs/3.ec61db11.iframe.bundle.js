(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./frontend/src/lib/introductions/GroupsIntroductionOption.tsx":function(q,b,e){"use strict";e.d(b,"a",function(){return J});var te=e("./node_modules/core-js/modules/es.array.includes.js"),vt=e.n(te),Je=e("./node_modules/core-js/modules/es.string.includes.js"),Qe=e.n(Je),ue=e("./node_modules/react/index.js"),pe=e.n(ue),De=e("./node_modules/kea/lib/index.esm.js"),be=e("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),ne=e("./node_modules/rc-select/es/index.js"),xe=e("./frontend/src/lib/components/Link.tsx"),N=e("./frontend/src/lib/introductions/groupsAccessLogic.ts");function J(t){var R=t.value,P=Object(De.useValues)(N.b),Ee=P.groupsAccessStatus;return[N.a.HasAccess,N.a.HasGroupTypes,N.a.NoAccess].includes(Ee)?pe.a.createElement(ne.default.Option,{key:"groups",value:R,disabled:!0,style:{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"var(--bg-side)",color:"var(--text-muted)"}},pe.a.createElement(be.a,{style:{marginRight:6,color:"var(--warning)"}}),"Unique groups \u2013"," ",pe.a.createElement(xe.a,{to:"https://posthog.com/docs/user-guides/group-analytics?utm_medium=in-product&utm_campaign=group-analytics-learn-more",target:"_blank","data-attr":"group-analytics-learn-more",style:{fontWeight:600}},"Learn more")):null}try{J.displayName="GroupsIntroductionOption",J.__docgenInfo={description:"",displayName:"GroupsIntroductionOption",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"]={docgenInfo:J.__docgenInfo,name:"GroupsIntroductionOption",path:"frontend/src/lib/introductions/GroupsIntroductionOption.tsx#GroupsIntroductionOption"})}catch(t){}},"./frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx":function(q,b,e){"use strict";e.d(b,"a",function(){return re});var te=e("./node_modules/core-js/modules/es.array.concat.js"),vt=e("./node_modules/core-js/modules/es.array.map.js"),Je=e("./node_modules/core-js/modules/es.array.splice.js"),Qe=e("./node_modules/@babel/runtime/helpers/extends.js"),ue=e.n(Qe),pe=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),De=e.n(pe),be=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ne=e.n(be),xe=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),N=e.n(xe),J=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilter.scss"),t=e.n(J),R={};R.insert="head",R.singleton=!1;var P=N()(t.a,R),Ee=t.a.locals||{},y=e("./node_modules/react/index.js"),l=e.n(y),x=e("./node_modules/kea/lib/index.esm.js"),D=e("./frontend/src/scenes/insights/ActionFilter/entityFilterLogic.ts"),Fe=e("./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),Ae=e("./node_modules/antd/es/button/index.js"),Xe=e("./node_modules/@ant-design/icons/es/icons/PlusCircleOutlined.js"),me=e("./frontend/src/types.ts"),Le=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),Ze=e.n(Le),Oe=e("./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js"),ke=e("./frontend/src/lib/components/icons.tsx"),Be=Object(Oe.c)(function(){return l.a.createElement("span",{className:"action-filter-drag-handle"},l.a.createElement(ke.SortableDragIcon,null))}),Q=Object(Oe.b)(function(n){var s=n.filterCount,r=n.filterIndex,i=Ze()(n,["filterCount","filterIndex"]),f=s>1;return l.a.createElement("div",{className:"draggable-action-filter ".concat(f?"drag-handle-visible":"")},f?l.a.createElement(Be,null):l.a.createElement("span",{style:{marginLeft:4}}),l.a.createElement(Fe.a,ue()({},i,{filterCount:s,index:r,key:r})))}),we=Object(Oe.a)(function(n){var s=n.children;return l.a.createElement("div",null,s)});try{Q.displayName="SortableActionFilterRow",Q.__docgenInfo={description:"",displayName:"SortableActionFilterRow",props:{filterIndex:{defaultValue:null,description:"",name:"filterIndex",required:!0,type:{name:"number"}},logic:{defaultValue:null,description:"",name:"logic",required:!0,type:{name:"any"}},filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"ActionFilter"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},mathAvailability:{defaultValue:null,description:"",name:"mathAvailability",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"}]}},hidePropertySelector:{defaultValue:null,description:"",name:"hidePropertySelector",required:!1,type:{name:"boolean"}},singleFilter:{defaultValue:null,description:"",name:"singleFilter",required:!1,type:{name:"boolean"}},showOr:{defaultValue:null,description:"",name:"showOr",required:!1,type:{name:"boolean"}},hideFilter:{defaultValue:null,description:"",name:"hideFilter",required:!1,type:{name:"boolean"}},hideRename:{defaultValue:null,description:"",name:"hideRename",required:!1,type:{name:"boolean"}},onRenameClick:{defaultValue:null,description:"",name:"onRenameClick",required:!1,type:{name:"(() => void)"}},showSeriesIndicator:{defaultValue:null,description:"",name:"showSeriesIndicator",required:!1,type:{name:"boolean"}},seriesIndicatorType:{defaultValue:null,description:"",name:"seriesIndicatorType",required:!1,type:{name:"enum",value:[{value:'"numeric"'},{value:'"alpha"'}]}},horizontalUI:{defaultValue:null,description:"",name:"horizontalUI",required:!1,type:{name:"boolean"}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},filterCount:{defaultValue:null,description:"",name:"filterCount",required:!0,type:{name:"number"}},customRowPrefix:{defaultValue:null,description:"",name:"customRowPrefix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},customRowSuffix:{defaultValue:null,description:"",name:"customRowSuffix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string"}},propertyFilterWrapperClassName:{defaultValue:null,description:"",name:"propertyFilterWrapperClassName",required:!1,type:{name:"string"}},stripeActionRow:{defaultValue:null,description:"",name:"stripeActionRow",required:!1,type:{name:"boolean"}},hasBreakdown:{defaultValue:null,description:"",name:"hasBreakdown",required:!0,type:{name:"boolean"}},showNestedArrow:{defaultValue:null,description:"",name:"showNestedArrow",required:!1,type:{name:"boolean"}},actionsTaxonomicGroupTypes:{defaultValue:null,description:"",name:"actionsTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},propertiesTaxonomicGroupTypes:{defaultValue:null,description:"",name:"propertiesTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},hideDeleteBtn:{defaultValue:null,description:"",name:"hideDeleteBtn",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},renderRow:{defaultValue:null,description:"",name:"renderRow",required:!1,type:{name:"(({ seriesIndicator, prefix, filter, suffix, propertyFiltersButton, renameRowButton, deleteButton, orLabel, }: Record<string, string | Element>) => Element)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableActionFilterRow"]={docgenInfo:Q.__docgenInfo,name:"SortableActionFilterRow",path:"frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableActionFilterRow"})}catch(n){}try{we.displayName="SortableContainer",we.__docgenInfo={description:"",displayName:"SortableContainer",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableContainer"]={docgenInfo:we.__docgenInfo,name:"SortableContainer",path:"frontend/src/scenes/insights/ActionFilter/Sortable.tsx#SortableContainer"})}catch(n){}var Rt=e("./node_modules/core-js/modules/es.function.name.js"),_e=e("./node_modules/antd/es/modal/index.js"),et=e("./node_modules/antd/es/input/index.js"),S=e("./frontend/src/scenes/insights/utils.ts"),gt=e("./node_modules/core-js/modules/es.array.filter.js"),tt=Object(x.kea)({props:{},key:function(s){return s.typeKey},path:function(s){return["scenes","insights","ActionFilter","renameModalLogic",s]},connect:{actions:[D.a,["selectFilter"]]},actions:function(){return{setName:function(r){return{name:r}}}},reducers:function(s){var r,i=s.props;return{name:[(r=Object(S.c)(i.filter))!==null&&r!==void 0?r:"",{setName:function(W,C){var v=C.name;return v},selectFilter:function(W,C){var v,o=C.filter;return(v=Object(S.c)(o))!==null&&v!==void 0?v:""}}]}}});function M(n){var s,r=n.typeKey,i=n.view,f=Object(x.useValues)(D.a),W=f.selectedFilter,C=f.modalVisible,v=Object(x.useActions)(D.a),o=v.renameFilter,m=v.hideModal,c=tt({typeKey:r,filter:W}),u=Object(x.useValues)(c),E=u.name,a=Object(x.useActions)(c),d=a.setName,j=Object(y.useRef)(null);nt(j,{cursor:"all"},[C]);var L="Rename ".concat(i===me.y.FUNNELS?"funnel step":"graph series");return l.a.createElement(_e.a,{"data-attr":"filter-rename-modal",visible:C,title:L,footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ae.a,{type:"link",onClick:m},"Cancel"),l.a.createElement(Ae.a,{type:"primary",onClick:function(){return o(E)}},L)),onCancel:m},"Query series/steps can be renamed to provide a more"," ",l.a.createElement("strong",null,"meaningful label for you and your team members"),". Custom names are also shown on dashboards.",l.a.createElement("br",null),l.a.createElement("div",{className:"l4 mt-05 mb-05"},"Name"),l.a.createElement(et.a,{ref:j,value:E,onPressEnter:function(){return o(E)},onChange:function(X){return d(X.target.value)},suffix:l.a.createElement("span",{className:"text-muted-alt"},(s=Object(S.c)(W,!1))!==null&&s!==void 0?s:"")}))}function nt(n,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Object(y.useEffect)(function(){var i=setTimeout(function(){if(n.current){var f;(f=n.current)===null||f===void 0||f.focus(s)}},0);return function(){return clearTimeout(i)}},r)}try{M.displayName="RenameModal",M.__docgenInfo={description:"",displayName:"RenameModal",props:{typeKey:{defaultValue:null,description:"",name:"typeKey",required:!0,type:{name:"string"}},view:{defaultValue:null,description:"",name:"view",required:!1,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/RenameModal.tsx#RenameModal"]={docgenInfo:M.__docgenInfo,name:"RenameModal",path:"frontend/src/scenes/insights/ActionFilter/RenameModal.tsx#RenameModal"})}catch(n){}var ot=e("./frontend/src/lib/utils/eventUsageLogic.ts"),at=e("./frontend/src/scenes/teamLogic.ts"),rt=e("./node_modules/clsx/dist/clsx.m.js");function oe(n,s){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);s&&(i=i.filter(function(f){return Object.getOwnPropertyDescriptor(n,f).enumerable})),r.push.apply(r,i)}return r}function ae(n){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?oe(Object(r),!0).forEach(function(i){De()(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}var re=l.a.forwardRef(function(n,s){var r=n.setFilters,i=n.filters,f=n.typeKey,W=n.addFilterDefaultOptions,C=W===void 0?{}:W,v=n.mathAvailability,o=v===void 0?Fe.b.All:v,m=n.hidePropertySelector,c=m===void 0?!1:m,u=n.buttonCopy,E=u===void 0?"":u,a=n.disabled,d=a===void 0?!1:a,j=n.sortable,L=j===void 0?!1:j,I=n.showSeriesIndicator,X=I===void 0?!1:I,le=n.seriesIndicatorType,ie=le===void 0?"alpha":le,K=n.showOr,B=K===void 0?!1:K,g=n.hideFilter,F=g===void 0?!1:g,w=n.hideRename,U=w===void 0?!1:w,p=n.horizontalUI,Z=p===void 0?!1:p,T=n.fullWidth,Te=T===void 0?!1:T,fe=n.customRowPrefix,ye=n.customRowSuffix,lt=n.rowClassName,he=n.entitiesLimit,Ge=n.propertyFilterWrapperClassName,Re=n.stripeActionRow,it=Re===void 0?!0:Re,Se=n.customActions,Me=n.showNestedArrow,Ce=Me===void 0?!1:Me,We=n.actionsTaxonomicGroupTypes,Ke=n.propertiesTaxonomicGroupTypes,st=n.hideDeleteBtn,dt=n.renderRow,je=n.buttonType,Ue=je===void 0?"dashed":je,Ie=n.readOnly,G=Ie===void 0?!1:Ie,ze=Object(x.useValues)(at.a),Ve=ze.currentTeamId,V=Object(D.a)({teamId:Ve,setFilters:r,filters:i,typeKey:f,addFilterDefaultOptions:C}),ct=Object(x.useActions)(ot.f),ut=ct.reportFunnelStepReordered,z=Object(x.useValues)(V),$=z.localFilters,Y=Object(x.useActions)(V),$e=Y.addFilter,pt=Y.setLocalFilters,mt=Y.showModal;Object(y.useEffect)(function(){pt(i)},[i]);function Ye(H){var A=H.oldIndex,k=H.newIndex;function Pe(se,_,de){var ee=ne()(se);return Array.prototype.splice.call(ee,de,0,Array.prototype.splice.call(ee,_,1)[0]),ee.map(function(ft,ve){return ae(ae({},ft),{},{order:ve})})}r(Object(D.b)(Pe($,A,k))),A!==k&&ut()}var Ne=he===1,He={logic:V,showSeriesIndicator:X,seriesIndicatorType:ie,mathAvailability:o,hidePropertySelector:c,customRowPrefix:fe,customRowSuffix:ye,rowClassName:lt,propertyFilterWrapperClassName:Ge,stripeActionRow:it,hasBreakdown:!!i.breakdown,fullWidth:Te,actionsTaxonomicGroupTypes:We,propertiesTaxonomicGroupTypes:Ke,hideDeleteBtn:st,disabled:d,readOnly:G,renderRow:dt,hideRename:U,onRenameClick:mt},qe=Boolean(he&&$.length>=he);return l.a.createElement("div",{ref:s},!U&&!G&&l.a.createElement(x.BindLogic,{logic:D.a,props:{setFilters:r,filters:i,typeKey:f,addFilterDefaultOptions:C}},l.a.createElement(M,{view:i.insight,typeKey:f})),$?L?l.a.createElement(we,{onSortEnd:Ye,lockAxis:"y",distance:5},$.map(function(H,A){return l.a.createElement(Q,ue()({key:A,filter:H,index:A,filterIndex:A,filterCount:$.length,showNestedArrow:Ce},He))})):$.map(function(H,A){return l.a.createElement(Fe.a,ue()({filter:H,index:A,key:A,singleFilter:Ne,showOr:B,hideFilter:F||G,horizontalUI:Z,filterCount:$.length,showNestedArrow:Ce},He))}):null,(!Ne||Se)&&l.a.createElement("div",{className:Object(rt.a)(Ue!=="link"?"mt":"mt-05"),style:{display:"flex",alignItems:"center"}},!Ne&&l.a.createElement(Ae.a,{type:Ue,onClick:function(){return $e()},"data-attr":"add-action-event-button",icon:l.a.createElement(Xe.a,null),disabled:qe||d||G,className:"add-action-event-button"},qe?"Reached limit of ".concat(he," ").concat(i.insight===me.y.FUNNELS?"steps":"series"):E||"Action or event"),Se))});try{re.displayName="ActionFilter",re.__docgenInfo={description:"",displayName:"ActionFilter",props:{setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(filters: FilterType) => void"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:'Optional<FilterType, "type">'}},typeKey:{defaultValue:null,description:"",name:"typeKey",required:!0,type:{name:"string"}},addFilterDefaultOptions:{defaultValue:{value:"{}"},description:"",name:"addFilterDefaultOptions",required:!1,type:{name:"Record<string, any>"}},mathAvailability:{defaultValue:{value:"MathAvailability.All"},description:"",name:"mathAvailability",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"}]}},hidePropertySelector:{defaultValue:{value:"false"},description:"",name:"hidePropertySelector",required:!1,type:{name:"boolean"}},buttonCopy:{defaultValue:{value:""},description:"Text copy for the action button to add more events/actions (graph series)",name:"buttonCopy",required:!1,type:{name:"string"}},buttonType:{defaultValue:{value:"dashed"},description:"",name:"buttonType",required:!1,type:{name:"enum",value:[{value:'"link"'},{value:'"text"'},{value:'"default"'},{value:'"primary"'},{value:'"ghost"'},{value:'"dashed"'}]}},disabled:{defaultValue:{value:"false"},description:"Whether the full control is enabled or not",name:"disabled",required:!1,type:{name:"boolean"}},sortable:{defaultValue:{value:"false"},description:"Whether actions/events can be sorted (used mainly for funnel step reordering)",name:"sortable",required:!1,type:{name:"boolean"}},showSeriesIndicator:{defaultValue:{value:"false"},description:"Whether to show an indicator identifying each graph",name:"showSeriesIndicator",required:!1,type:{name:"boolean"}},seriesIndicatorType:{defaultValue:{value:"alpha"},description:"Series badge shows A, B, C | 1, 2, 3",name:"seriesIndicatorType",required:!1,type:{name:"enum",value:[{value:'"numeric"'},{value:'"alpha"'}]}},showOr:{defaultValue:{value:"false"},description:'Whether to show the "OR" label after each filter',name:"showOr",required:!1,type:{name:"boolean"}},hideFilter:{defaultValue:{value:"false"},description:"Hide local filtering (currently used for retention insight)",name:"hideFilter",required:!1,type:{name:"boolean"}},hideRename:{defaultValue:{value:"false"},description:"Hides the rename option",name:"hideRename",required:!1,type:{name:"boolean"}},entitiesLimit:{defaultValue:null,description:"A limit of entities (series or funnel steps) beyond which more can't be added",name:"entitiesLimit",required:!1,type:{name:"number"}},customRowPrefix:{defaultValue:null,description:"Custom prefix element to show in each ActionFilterRow",name:"customRowPrefix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},customRowSuffix:{defaultValue:null,description:"Custom suffix element to show in each ActionFilterRow",name:"customRowSuffix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string"}},propertyFilterWrapperClassName:{defaultValue:null,description:"",name:"propertyFilterWrapperClassName",required:!1,type:{name:"string"}},stripeActionRow:{defaultValue:{value:"true"},description:"",name:"stripeActionRow",required:!1,type:{name:"boolean"}},customActions:{defaultValue:null,description:"Custom actions to be added next to the add series button",name:"customActions",required:!1,type:{name:"Element"}},horizontalUI:{defaultValue:{value:"false"},description:"",name:"horizontalUI",required:!1,type:{name:"boolean"}},fullWidth:{defaultValue:{value:"false"},description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},showNestedArrow:{defaultValue:{value:"false"},description:"Show nested arrows to the left of property filter buttons",name:"showNestedArrow",required:!1,type:{name:"boolean"}},actionsTaxonomicGroupTypes:{defaultValue:null,description:"Which tabs to show for actions selector",name:"actionsTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},propertiesTaxonomicGroupTypes:{defaultValue:null,description:"Which tabs to show for property filters",name:"propertiesTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},hideDeleteBtn:{defaultValue:null,description:"",name:"hideDeleteBtn",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},renderRow:{defaultValue:null,description:"",name:"renderRow",required:!1,type:{name:"(({ seriesIndicator, prefix, filter, suffix, propertyFiltersButton, deleteButton, orLabel, }: Record<string, string | Element>) => Element)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx#ActionFilter"]={docgenInfo:re.__docgenInfo,name:"ActionFilter",path:"frontend/src/scenes/insights/ActionFilter/ActionFilter.tsx#ActionFilter"})}catch(n){}},"./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx":function(q,b,e){"use strict";e.d(b,"b",function(){return r}),e.d(b,"a",function(){return i});var te=e("./node_modules/core-js/modules/es.symbol.js"),vt=e("./node_modules/core-js/modules/es.symbol.description.js"),Je=e("./node_modules/core-js/modules/es.array.concat.js"),Qe=e("./node_modules/core-js/modules/es.array.filter.js"),ue=e("./node_modules/core-js/modules/es.array.map.js"),pe=e("./node_modules/core-js/modules/es.function.name.js"),De=e("./node_modules/core-js/modules/es.object.keys.js"),be=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ne=e.n(be),xe=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),N=e.n(xe),J=e("./node_modules/react/index.js"),t=e.n(J),R=e("./node_modules/kea/lib/index.esm.js"),P=e("./node_modules/antd/es/button/index.js"),Ee=e("./node_modules/antd/es/row/index.js"),y=e("./node_modules/antd/es/col/index.js"),l=e("./node_modules/antd/es/select/index.js"),x=e("./frontend/src/lib/components/Tooltip.tsx"),D=e("./frontend/src/types.ts"),Fe=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Ae=e("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),Xe=e("./node_modules/@ant-design/icons/es/icons/CloseSquareOutlined.js"),me=e("./frontend/src/lib/utils.tsx"),Le=e("./frontend/src/lib/components/SeriesGlyph.tsx"),Ze=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Oe=e.n(Ze),ke=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/index.scss"),Be=e.n(ke),Q={};Q.insert="head",Q.singleton=!1;var we=Oe()(Be.a,Q),Rt=Be.a.locals||{},_e=e("./frontend/src/lib/components/Popup/Popup.tsx"),et=e("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),S=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),gt=e("./frontend/src/lib/components/EntityFilterInfo.tsx"),tt=e("./node_modules/clsx/dist/clsx.m.js"),M=e("./frontend/src/scenes/trends/mathsLogic.tsx"),nt=e("./frontend/src/lib/introductions/GroupsIntroductionOption.tsx"),ot=e("./frontend/src/models/actionsModel.ts"),at=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),rt=e("./frontend/src/lib/components/TaxonomicPopup/TaxonomicPopup.tsx"),oe=e("./frontend/src/lib/components/icons.tsx"),ae;function re(o,m){var c=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);m&&(u=u.filter(function(E){return Object.getOwnPropertyDescriptor(o,E).enumerable})),c.push.apply(c,u)}return c}function n(o){for(var m=1;m<arguments.length;m++){var c=arguments[m]!=null?arguments[m]:{};m%2?re(Object(c),!0).forEach(function(u){N()(o,u,c[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(c)):re(Object(c)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(c,u))})}return o}var s=function(m,c){if(m)return"Hide filters";if(c.properties&&Object.keys(c.properties).length>0){var u;return Object(me.pb)((u=c.properties)===null||u===void 0?void 0:u.length,"filter")}return"Add filters"},r;(function(o){o[o.All=0]="All",o[o.ActorsOnly=1]="ActorsOnly",o[o.None=2]="None"})(r||(r={}));function i(o){var m,c,u,E=o.logic,a=o.filter,d=o.index,j=o.mathAvailability,L=o.hidePropertySelector,I=o.singleFilter,X=o.showOr,le=o.hideFilter,ie=o.hideRename,K=o.onRenameClick,B=K===void 0?function(){}:K,g=o.showSeriesIndicator,F=o.seriesIndicatorType,w=F===void 0?"alpha":F,U=o.horizontalUI,p=U===void 0?!1:U,Z=o.fullWidth,T=Z===void 0?!1:Z,Te=o.filterCount,fe=o.customRowPrefix,ye=o.customRowSuffix,lt=o.rowClassName,he=o.propertyFilterWrapperClassName,Ge=o.stripeActionRow,Re=Ge===void 0?!0:Ge,it=o.hasBreakdown,Se=o.showNestedArrow,Me=Se===void 0?!1:Se,Ce=o.hideDeleteBtn,We=Ce===void 0?!1:Ce,Ke=o.actionsTaxonomicGroupTypes,st=Ke===void 0?[S.a.Events,S.a.Actions]:Ke,dt=o.propertiesTaxonomicGroupTypes,je=o.disabled,Ue=je===void 0?!1:je,Ie=o.readOnly,G=Ie===void 0?!1:Ie,ze=o.renderRow,Ve=Object(R.useValues)(E),V=Ve.selectedFilter,ct=Ve.entities,ut=Ve.entityFilterVisible,z=Object(R.useActions)(E),$=z.updateFilter,Y=z.selectFilter,$e=z.updateFilterMath,pt=z.removeLocalFilter,mt=z.updateFilterProperty,Ye=z.setEntityFilterVisibility,Ne=z.duplicateFilter,He=Object(R.useValues)(ot.a),qe=He.actions,H=Object(R.useValues)(M.c),A=H.mathDefinitions,k=typeof a.order=="number"?ut[a.order]:!1,Pe,se,_,de=a.math,ee=a.math_property,ft=a.math_group_type_index,ve=function(){pt(n(n({},a),{},{index:d}))},St=function(O,ge){var ce;$e(n(n({},Object(M.b)(ge)),{},{math_property:!((ce=A[ge])===null||ce===void 0)&&ce.onProperty?ee!=null?ee:"$time":void 0,type:a.type,index:d}))},Ct=function(O,ge){$e(n(n({},a),{},{math_property:ge,index:d}))},bt=Boolean(V&&(V==null?void 0:V.type)===a.type&&(V==null?void 0:V.index)===d),jt=function(){Y(bt?null:n(n({},a),{},{index:d}))};if(a.type===D.m.NEW_ENTITY)se=null,_=null;else{var yt;Pe=((yt=ct[a.type])===null||yt===void 0?void 0:yt.filter(function(h){return h.id===a.id})[0])||{},se=Pe.name||a.name,_=Pe.id||a.id}var ht=t.a.createElement("div",{className:"stateful-badge or width-locked"},"OR"),xt=w==="numeric"?t.a.createElement(Le.a,{style:{borderColor:"var(--border)"}},d+1):t.a.createElement(Le.b,{seriesIndex:d,hasBreakdown:it}),Et=typeof fe=="function"?fe({filter:a,index:d,onClose:ve}):fe,Ft=t.a.createElement(_e.a,{overlay:t.a.createElement(et.a,{groupType:a.type,value:a.type==="actions"&&typeof _=="string"?parseInt(_):_||void 0,onChange:function(O,ge,ce){$({type:v(O.type)||void 0,id:"".concat(ge),name:ce==null?void 0:ce.name,index:d})},onClose:function(){return Y(null)},taxonomicGroupTypes:st}),visible:bt,onClickOutside:function(){return Y(null)}},function(h){var O=h.setRef;return t.a.createElement(P.a,{"data-attr":"trend-element-subject-"+d,onClick:jt,block:T,ref:O,disabled:Ue||G,style:{maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"}},t.a.createElement("span",{className:"text-overflow",style:{maxWidth:"100%"}},t.a.createElement(gt.a,{filter:a})),t.a.createElement(Ae.a,{style:{fontSize:10}}))}),At=typeof ye=="function"?ye({filter:a,index:d,onClose:ve}):ye,Ot=t.a.createElement(P.a,{type:"link",onClick:function(){typeof a.order=="number"&&Ye(a.order,!k)},className:"row-action-btn show-filters".concat(k?" visible":""),"data-attr":"show-prop-filter-".concat(d),title:"Show filters",style:{display:"flex",alignItems:"center"}},t.a.createElement(oe.IconFilter,{fontSize:"1.25em"}),!((m=a.properties)===null||m===void 0)&&m.length?Object(me.pb)((c=a.properties)===null||c===void 0?void 0:c.length,"filter"):null),wt=t.a.createElement(P.a,{type:"link",onClick:function(){Y(a),B()},className:"row-action-btn show-rename","data-attr":"show-prop-rename-".concat(d),title:"Rename graph series",style:{display:"flex",alignItems:"center"}},t.a.createElement(oe.IconEdit,{fontSize:"1.25em"})),It=t.a.createElement(P.a,{type:"link",onClick:function(){Ne(a)},style:{display:"flex",alignItems:"center"},className:"row-action-btn","data-attr":"show-prop-duplicate-".concat(d),title:"Duplicate graph series"},t.a.createElement(oe.IconCopy,{fontSize:"1.25em"})),Tt=t.a.createElement(P.a,{type:"link",onClick:ve,style:{display:"flex",alignItems:"center"},className:"row-action-btn delete","data-attr":"delete-prop-filter-".concat(d),title:"Delete graph series"},t.a.createElement(oe.IconDelete,{fontSize:"1.25em"}));return t.a.createElement("div",{className:Object(tt.a)({"action-row-striped":p&&Re,"action-row":!p||!Re,"full-width":T})},!p&&d>0&&X&&t.a.createElement(Ee.a,{align:"middle",style:{marginTop:12}},ht),t.a.createElement(Ee.a,{gutter:8,align:"middle",className:"".concat(p?"":"mt"," ").concat(lt),wrap:!T},ze?ze({seriesIndicator:xt,prefix:Et,filter:Ft,suffix:At,propertyFiltersButton:Ot,renameRowButton:wt,deleteButton:Tt,orLabel:ht}):t.a.createElement(t.a.Fragment,null,!We&&p&&!I&&Te>1&&t.a.createElement(y.a,null,t.a.createElement(P.a,{type:"link",onClick:ve,className:"row-action-btn delete",title:"Remove graph series",danger:!0,icon:t.a.createElement(Xe.a,null)})),g&&t.a.createElement(y.a,{className:"action-row-letter"},xt),fe!==void 0?t.a.createElement(y.a,null,Et):t.a.createElement(t.a.Fragment,null,p&&t.a.createElement(y.a,null,"Showing")),t.a.createElement(y.a,{className:"column-filter",style:T?{}:{maxWidth:"calc(".concat(j===r.None?"100":"50","% - 16px)")},flex:T?"auto":void 0},Ft),ye!==void 0&&t.a.createElement(y.a,{className:"column-row-suffix"},At),j!==r.None&&t.a.createElement(t.a.Fragment,null,p&&t.a.createElement(y.a,null,"counted by"),t.a.createElement(y.a,{style:{maxWidth:"calc(50% - 16px".concat(g?" - 32px":"",")")}},t.a.createElement(W,{math:de,mathGroupTypeIndex:ft,index:d,onMathSelect:St,style:{maxWidth:"100%",width:"initial"},mathAvailability:j})),((u=A[de||""])===null||u===void 0?void 0:u.onProperty)&&t.a.createElement(t.a.Fragment,null,p&&t.a.createElement(y.a,null,"on property"),t.a.createElement(y.a,{style:{maxWidth:"calc(50% - 16px".concat(g?" - 32px":"",")")}},t.a.createElement(rt.d,{groupType:S.a.NumericalEventProperties,value:ee,onChange:function(O){return Ct(d,O)},eventNames:se?[se]:[],dataAttr:"math-property-select",renderValue:function(O){return t.a.createElement(x.a,{title:t.a.createElement(t.a.Fragment,null,"Calculate"," ",A[de!=null?de:""].name.toLowerCase()," from property ",t.a.createElement("code",null,O),". Note that only"," ",se," occurences where ",t.a.createElement("code",null,O)," is set with a numeric value will be taken into account."),placement:"right"},t.a.createElement("div",null,t.a.createElement(at.a,{value:O,disablePopover:!0})))}})))),(p||T)&&!le&&!G&&t.a.createElement(y.a,null,Ot),(p||T)&&!ie&&!G&&t.a.createElement(y.a,null,wt),(p||T)&&!le&&!I&&!G&&t.a.createElement(y.a,null,It),!We&&!p&&!I&&!G&&t.a.createElement(y.a,{className:"column-delete-btn"},Tt),p&&Te>1&&d<Te-1&&X&&ht)),(!L||a.properties&&a.properties.length>0)&&!p&&!T&&t.a.createElement("div",{style:{paddingTop:6}},t.a.createElement("span",{style:{color:"#C4C4C4",fontSize:18,paddingLeft:6,paddingRight:2}},"\u21B3"),t.a.createElement(P.a,{className:"ant-btn-md",onClick:function(){return typeof a.order=="number"?Ye(a.order,!k):void 0},"data-attr":"show-prop-filter-"+d},s(k,a))),k&&t.a.createElement("div",{className:"mr property-filter-wrapper ".concat(he)},t.a.createElement(Fe.a,{pageKey:"".concat(d,"-").concat(_,"-filter"),propertyFilters:a.properties,onChange:function(O){return mt({properties:O,index:d})},disablePopover:p,style:{marginBottom:0},showNestedArrow:Me,taxonomicGroupTypes:dt,eventNames:a.type===S.a.Events&&a.id?[String(a.id)]:a.type===S.a.Actions&&a.id?Object(me.H)(parseInt(String(a.id)),qe):[]})))}var f="This can only be used on properties that have at least one number type occurence in your events.";function W(o){var m,c=o.math,u=o.mathGroupTypeIndex,E=o.mathAvailability,a=o.index,d=o.onMathSelect,j=o.style,L=Object(R.useValues)(M.c),I=L.mathDefinitions,X=L.eventMathEntries,le=L.propertyMathEntries,ie=X;E===r.ActorsOnly&&(ie=ie.filter(function(B){var g=ne()(B,2),F=g[1];return F.actor}));var K=Object(M.a)(c,u);return E===r.ActorsOnly&&!(!((m=I[K])===null||m===void 0)&&m.actor)&&(K="dau"),t.a.createElement(l.a,{style:n({width:150},j),value:K,onChange:function(g){return d(a,g)},"data-attr":"math-selector-".concat(a),dropdownMatchSelectWidth:!1,dropdownStyle:{maxWidth:320},listHeight:280},t.a.createElement(l.a.OptGroup,{key:"event aggregates",label:"Event aggregation"},ie.map(function(B){var g=ne()(B,2),F=g[0],w=g[1],U=w.name,p=w.description,Z=w.onProperty;return t.a.createElement(l.a.Option,{key:F,value:F,"data-attr":"math-".concat(F,"-").concat(a)},t.a.createElement(x.a,{title:Z?t.a.createElement(t.a.Fragment,null,p,t.a.createElement("br",null),f):p,placement:"right"},t.a.createElement("div",{style:{height:"100%",width:"100%",paddingRight:8,overflow:"hidden",textOverflow:"ellipsis"}},U)))}),Object(nt.a)({value:""})),E!==r.ActorsOnly&&t.a.createElement(l.a.OptGroup,{key:"property aggregates",label:"Property aggregation"},le.map(function(B){var g=ne()(B,2),F=g[0],w=g[1],U=w.name,p=w.description,Z=w.onProperty;return t.a.createElement(l.a.Option,{key:F,value:F,"data-attr":"math-".concat(F,"-").concat(a)},t.a.createElement(x.a,{title:Z?t.a.createElement(t.a.Fragment,null,p,t.a.createElement("br",null),f):p,placement:"right"},t.a.createElement("div",{style:{height:"100%",width:"100%"}},U)))})))}var C=(ae={},N()(ae,S.a.Events,D.m.EVENTS),N()(ae,S.a.Actions,D.m.ACTIONS),ae);function v(o){return C[o]||null}try{i.displayName="ActionFilterRow",i.__docgenInfo={description:"",displayName:"ActionFilterRow",props:{logic:{defaultValue:null,description:"",name:"logic",required:!0,type:{name:"any"}},filter:{defaultValue:null,description:"",name:"filter",required:!0,type:{name:"ActionFilter"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},mathAvailability:{defaultValue:null,description:"",name:"mathAvailability",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"}]}},hidePropertySelector:{defaultValue:null,description:"",name:"hidePropertySelector",required:!1,type:{name:"boolean"}},singleFilter:{defaultValue:null,description:"",name:"singleFilter",required:!1,type:{name:"boolean"}},showOr:{defaultValue:null,description:"",name:"showOr",required:!1,type:{name:"boolean"}},hideFilter:{defaultValue:null,description:"",name:"hideFilter",required:!1,type:{name:"boolean"}},hideRename:{defaultValue:null,description:"",name:"hideRename",required:!1,type:{name:"boolean"}},onRenameClick:{defaultValue:{value:"() => {}"},description:"",name:"onRenameClick",required:!1,type:{name:"(() => void)"}},showSeriesIndicator:{defaultValue:null,description:"",name:"showSeriesIndicator",required:!1,type:{name:"boolean"}},seriesIndicatorType:{defaultValue:{value:"alpha"},description:"",name:"seriesIndicatorType",required:!1,type:{name:"enum",value:[{value:'"numeric"'},{value:'"alpha"'}]}},horizontalUI:{defaultValue:{value:"false"},description:"",name:"horizontalUI",required:!1,type:{name:"boolean"}},fullWidth:{defaultValue:{value:"false"},description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},filterCount:{defaultValue:null,description:"",name:"filterCount",required:!0,type:{name:"number"}},customRowPrefix:{defaultValue:null,description:"",name:"customRowPrefix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},customRowSuffix:{defaultValue:null,description:"",name:"customRowSuffix",required:!1,type:{name:"string | Element | ((props: { filter: FunnelStepRangeEntityFilter | ActionFilter; index: number; onClose: () => void; }) => Element)"}},rowClassName:{defaultValue:null,description:"",name:"rowClassName",required:!1,type:{name:"string"}},propertyFilterWrapperClassName:{defaultValue:null,description:"",name:"propertyFilterWrapperClassName",required:!1,type:{name:"string"}},stripeActionRow:{defaultValue:{value:"true"},description:"",name:"stripeActionRow",required:!1,type:{name:"boolean"}},hasBreakdown:{defaultValue:null,description:"",name:"hasBreakdown",required:!0,type:{name:"boolean"}},showNestedArrow:{defaultValue:{value:"false"},description:"",name:"showNestedArrow",required:!1,type:{name:"boolean"}},actionsTaxonomicGroupTypes:{defaultValue:{value:"[TaxonomicFilterGroupType.Events, TaxonomicFilterGroupType.Actions]"},description:"",name:"actionsTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},propertiesTaxonomicGroupTypes:{defaultValue:null,description:"",name:"propertiesTaxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}},hideDeleteBtn:{defaultValue:{value:"false"},description:"",name:"hideDeleteBtn",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},renderRow:{defaultValue:null,description:"",name:"renderRow",required:!1,type:{name:"(({ seriesIndicator, prefix, filter, suffix, propertyFiltersButton, renameRowButton, deleteButton, orLabel, }: Record<string, string | Element>) => Element)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#ActionFilterRow"]={docgenInfo:i.__docgenInfo,name:"ActionFilterRow",path:"frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#ActionFilterRow"})}catch(o){}try{v.displayName="taxonomicFilterGroupTypeToEntityType",v.__docgenInfo={description:"",displayName:"taxonomicFilterGroupTypeToEntityType",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#taxonomicFilterGroupTypeToEntityType"]={docgenInfo:v.__docgenInfo,name:"taxonomicFilterGroupTypeToEntityType",path:"frontend/src/scenes/insights/ActionFilter/ActionFilterRow/ActionFilterRow.tsx#taxonomicFilterGroupTypeToEntityType"})}catch(o){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilter.scss":function(q,b,e){var te=e("./node_modules/css-loader/dist/runtime/api.js");b=te(!1),b.push([q.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.draggable-action-filter{margin-top:16px;display:flex}.draggable-action-filter .action-filter-drag-handle{cursor:move;padding:4px 2px 0 0;color:#2d2d2d;font-size:1.2em}.draggable-action-filter .action-filter-drag-handle svg{transform:rotate(90deg)}.draggable-action-filter .ant-row.mt{margin-top:0}.add-action-event-button:not(.ant-btn-link){border-color:rgba(0,0,0,.24);color:#5375ff;padding-left:2.5rem;padding-right:2.5rem}",""]),q.exports=b},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/ActionFilter/ActionFilterRow/index.scss":function(q,b,e){var te=e("./node_modules/css-loader/dist/runtime/api.js");b=te(!1),b.push([q.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.property-select{cursor:pointer;width:150px;margin-top:6px}.property-select .ant-select-selector{border-color:#d9d9d9!important;cursor:pointer!important}.property-select .ant-select-arrow{color:#2d2d2d;font-size:10px}.property-select:not(.ant-select-open) input{cursor:pointer!important}.property-select:hover .ant-select-arrow,.property-select:hover .ant-select-selection-item,.property-select:hover .ant-select-selection-placeholder{color:#7d9bff!important}.property-select:hover .ant-select-selector{border-color:#7d9bff!important}.property-select .ant-select-selection-placeholder,.property-select .ant-select-selection-search-input,.property-select .ant-select-selector{font-size:13px;height:28px!important}.property-select .ant-select-selection-item{line-height:26px!important}.property-select .ant-select-selection-placeholder{line-height:24px!important;color:#2d2d2d}.property-select.horizontal-ui{width:unset!important;min-width:120px;margin-top:0}.property-select.horizontal-ui .ant-select-selection-placeholder,.property-select.horizontal-ui .ant-select-selection-search-input,.property-select.horizontal-ui .ant-select-selector{font-size:inherit;height:32px!important}.property-select.horizontal-ui .ant-select-selection-item,.property-select.horizontal-ui .ant-select-selection-placeholder{line-height:30px!important}.row-action-btn{padding:0 4px}.row-action-btn.visible,.row-action-btn:focus,.row-action-btn:hover{border:1px solid #5375ff}.action-row-striped.full-width,.action-row.full-width{flex-basis:100%}.draggable-action-filter.drag-handle-visible .action-row-striped.full-width,.draggable-action-filter.drag-handle-visible .action-row.full-width{width:calc(100% - 16px);flex-basis:calc(100% - 16px)}.action-row-striped{padding:0 .25rem;margin:.25rem 0}.action-row-striped:nth-child(2n){padding:.25rem;background-color:#f6f6f6}.full-width .property-filter-button-label{max-width:300px}.horizontal-ui .row-action-btn.delete{padding:0;width:unset;color:rgba(249,97,50,.6)}.action-row-letter{padding-right:1px}",""]),q.exports=b}}]);
