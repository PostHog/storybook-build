(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts":function(oe,C,t){"use strict";t.d(C,"a",function(){return q});var R=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),M=t.n(R),je=t("./node_modules/core-js/modules/es.array.includes.js"),de=t.n(je),Z=t("./node_modules/core-js/modules/es.string.includes.js"),_e=t.n(Z),ce=t("./node_modules/core-js/modules/es.object.values.js"),i=t.n(ce),ve=t("./node_modules/core-js/modules/es.array.iterator.js"),Fe=t.n(ve),xe=t("./node_modules/core-js/modules/es.object.to-string.js"),ie=t.n(xe),V=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),he=t.n(V),me=t("./node_modules/core-js/modules/es.object.keys.js"),Oe=t.n(me),F=t("./node_modules/core-js/modules/es.symbol.js"),se=t.n(F),y=t("./node_modules/core-js/modules/es.array.filter.js"),P=t.n(y),K=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),B=t.n(K),k=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),le=t.n(k),ue=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),ye=t.n(ue),G=t("./node_modules/kea/lib/index.esm.js"),ne=t("./frontend/src/lib/utils.tsx"),x=t("./frontend/src/types.ts"),_=t("./frontend/src/scenes/insights/sharedUtils.ts"),I=t("./frontend/src/scenes/insights/insightLogic.ts");function re(ee,a){var h=Object.keys(ee);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(ee);a&&(U=U.filter(function(we){return Object.getOwnPropertyDescriptor(ee,we).enumerable})),h.push.apply(h,U)}return h}function be(ee){for(var a=1;a<arguments.length;a++){var h=arguments[a]!=null?arguments[a]:{};a%2?re(Object(h),!0).forEach(function(U){M()(ee,U,h[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(h)):re(Object(h)).forEach(function(U){Object.defineProperty(ee,U,Object.getOwnPropertyDescriptor(h,U))})}return ee}function Ee(ee){return Object.values(x.z).includes(ee)}var q=Object(G.kea)({props:{},key:Object(_.c)("new"),path:function(a){return["lib","components","ChartFilter","chartFilterLogic",a]},connect:function(a){return{actions:[Object(I.c)(a),["setFilters"]],values:[Object(I.c)(a),["filters"]]}},actions:function(){return{setChartFilter:function(h){return{chartFilter:h}}}},selectors:{chartFilter:[function(ee){return[ee.filters]},function(ee){var a=ee.display,h=ee.funnel_viz_type;return(a===x.j.FunnelViz?h:a)||null}]},listeners:function(a){var h=a.actions,U=a.values;return{setChartFilter:function(Ce){var e=Ce.chartFilter,Ne=U.filters,He=Ne.display,Qe=Ne.funnel_viz_type;Ee(e)?(Qe!==e||He!==x.j.FunnelViz)&&h.setFilters(be(be({},U.filters),{},{display:x.j.FunnelViz,funnel_viz_type:e})):Object(ne.pb)(He,e)||h.setFilters(be(be({},U.filters),{},{display:e}))}}}})},"./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts":function(oe,C,t){"use strict";t.d(C,"a",function(){return ne});var R=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),M=t.n(R),je=t("./node_modules/core-js/modules/es.array.iterator.js"),de=t.n(je),Z=t("./node_modules/core-js/modules/es.object.to-string.js"),_e=t.n(Z),ce=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),i=t.n(ce),ve=t("./node_modules/core-js/modules/es.object.keys.js"),Fe=t.n(ve),xe=t("./node_modules/core-js/modules/es.symbol.js"),ie=t.n(xe),V=t("./node_modules/core-js/modules/es.array.filter.js"),he=t.n(V),me=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Oe=t.n(me),F=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),se=t.n(F),y=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),P=t.n(y),K=t("./node_modules/kea/lib/index.esm.js"),B=t("./frontend/src/lib/utils.tsx"),k=t("./frontend/src/types.ts"),le=t("./frontend/src/scenes/insights/sharedUtils.ts"),ue=t("./frontend/src/scenes/insights/insightLogic.ts");function ye(x,_){var I=Object.keys(x);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(x);_&&(re=re.filter(function(be){return Object.getOwnPropertyDescriptor(x,be).enumerable})),I.push.apply(I,re)}return I}function G(x){for(var _=1;_<arguments.length;_++){var I=arguments[_]!=null?arguments[_]:{};_%2?ye(Object(I),!0).forEach(function(re){M()(x,re,I[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(I)):ye(Object(I)).forEach(function(re){Object.defineProperty(x,re,Object.getOwnPropertyDescriptor(I,re))})}return x}var ne=Object(K.kea)({props:{},key:Object(le.c)("new"),path:function(_){return["lib","components","CompareFilter","compareFilterLogic",_]},connect:function(_){return{actions:[Object(ue.c)(_),["setFilters"]],values:[Object(ue.c)(_),["filters","canEditInsight"]]}},actions:function(){return{setCompare:function(I){return{compare:I}},toggleCompare:!0}},selectors:{compare:[function(x){return[x.filters]},function(x){return!!(x!=null&&x.compare)}],disabled:[function(x){return[x.filters,x.canEditInsight]},function(x,_){var I=x.insight,re=x.date_from,be=x.display;return!_||I===k.D.LIFECYCLE||be===k.j.WorldMap||re==="all"}]},listeners:function(_){var I=_.values,re=_.actions;return{setCompare:function(Ee){var q=Ee.compare;Object(B.pb)(q,I.compare)||re.setFilters(G(G({},I.filters),{},{compare:q}))},toggleCompare:function(){re.setCompare(!I.compare)}}}})},"./frontend/src/lib/components/InlineMessage/InlineMessage.tsx":function(oe,C,t){"use strict";t.d(C,"a",function(){return me});var R=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),M=t.n(R),je=t("./node_modules/react/index.js"),de=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Z=t.n(de),_e=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss"),ce=t.n(_e),i={};i.insert="head",i.singleton=!1;var ve=Z()(ce.a,i),Fe=ce.a.locals||{},xe=t("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),ie=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),V=t("./node_modules/clsx/dist/clsx.m.js"),he=t("./node_modules/react/jsx-runtime.js");function me(Oe){var F=Oe.children,se=Oe.style,y=Oe.icon,P=y===void 0?Object(he.jsx)(xe.a,{}):y,K=Oe.type,B=K===void 0?"info":K,k=Oe.closable,le=Oe.onClose,ue=Object(je.useState)(!0),ye=M()(ue,2),G=ye[0],ne=ye[1],x=function(){ne(!1),le==null||le()};return Object(he.jsxs)("div",{className:Object(V.a)("inline-message",B,k&&"closable",!G&&"hidden"),style:se,children:[Object(he.jsx)("div",{className:"inline-icon",children:P}),Object(he.jsx)("div",{className:"inline-main",children:F}),k&&Object(he.jsx)("div",{className:"closable",onClick:x,children:Object(he.jsx)(ie.a,{})})]})}try{me.displayName="InlineMessage",me.__docgenInfo={description:"",displayName:"InlineMessage",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:{value:"<ExclamationCircleFilled />"},description:"",name:"icon",required:!1,type:{name:"Element"}},type:{defaultValue:{value:"info"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"danger"'},{value:'"warning"'},{value:'"info"'}]}},closable:{defaultValue:null,description:"",name:"closable",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"]={docgenInfo:me.__docgenInfo,name:"InlineMessage",path:"frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"})}catch(Oe){}},"./frontend/src/scenes/insights/InsightContainer.tsx":function(oe,C,t){"use strict";t.d(C,"a",function(){return vt});var R=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),M=t.n(R),je=t("./node_modules/antd/es/card/index.js"),de=t("./node_modules/antd/es/row/index.js"),Z=t("./node_modules/antd/es/col/index.js"),_e=t("./node_modules/core-js/modules/es.array.includes.js"),ce=t("./node_modules/core-js/modules/es.string.includes.js"),i=t("./node_modules/kea/lib/index.esm.js"),ve=t("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),Fe=t("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),xe=t("./node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),ie=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),V=t("./node_modules/react/index.js"),he=t.n(V),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},Oe=me,F=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),se=function(n,s){return V.createElement(F.a,Object(ie.a)(Object(ie.a)({},n),{},{ref:s,icon:Oe}))};se.displayName="AreaChartOutlined";var y=V.forwardRef(se),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},K=P,B=function(n,s){return V.createElement(F.a,Object(ie.a)(Object(ie.a)({},n),{},{ref:s,icon:K}))};B.displayName="BarChartOutlined";var k=V.forwardRef(B),le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"},ue=le,ye=function(n,s){return V.createElement(F.a,Object(ie.a)(Object(ie.a)({},n),{},{ref:s,icon:ue}))};ye.displayName="NumberOutlined";var G=V.forwardRef(ye),ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},x=ne,_=function(n,s){return V.createElement(F.a,Object(ie.a)(Object(ie.a)({},n),{},{ref:s,icon:x}))};_.displayName="TableOutlined";var I=V.forwardRef(_),re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"},be=re,Ee=function(n,s){return V.createElement(F.a,Object(ie.a)(Object(ie.a)({},n),{},{ref:s,icon:be}))};Ee.displayName="PieChartOutlined";var q=V.forwardRef(Ee),ee=t("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js"),a=t("./frontend/src/types.ts"),h=t("./frontend/src/scenes/insights/insightLogic.ts"),U=t("./frontend/src/lib/components/Tooltip.tsx"),we=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),Ce=t("./frontend/@posthog/lemon-ui/src/index.ts"),e=t("./node_modules/react/jsx-runtime.js");function Ne(r){var n=r.filters,s=r.onChange,o=r.disabled,d=Object(i.useValues)(h.c),c=d.insightProps,u=d.isSingleSeries,l=Object(i.useValues)(Object(ve.a)(c)),j=l.chartFilter,m=Object(i.useActions)(Object(ve.a)(c)),O=m.setChartFilter,f=n.insight===a.D.STICKINESS||n.insight===a.D.RETENTION,E=n.insight===a.D.STICKINESS||n.insight===a.D.RETENTION,g=n.insight===a.D.STICKINESS||n.insight===a.D.RETENTION&&!!n.breakdown&&n.breakdown!=="$geoip_country_code"&&n.breakdown!=="$geoip_country_name"||!u||!!n.formula,S=n.insight===a.D.STICKINESS||n.insight===a.D.RETENTION||!u,L=n.insight===a.D.RETENTION,D=L||n.insight===a.D.STICKINESS||n.insight===a.D.RETENTION,J=n.insight===a.D.RETENTION?a.j.ActionsTable:n.insight===a.D.FUNNELS?a.j.FunnelViz:a.j.ActionsLineGraph;function A(te){var v=te.icon,N=te.tooltip,W=te.children,Q=W===void 0?null:W;return Object(e.jsx)(U.a,{title:N,placement:"left",children:Object(e.jsxs)("div",{className:"w-full",children:[v," ",Q]})})}var ae=n.insight===a.D.FUNNELS?[{value:a.z.Steps,label:Object(e.jsx)(A,{icon:Object(e.jsx)(Fe.a,{}),children:"Steps"})},{value:a.z.Trends,label:Object(e.jsxs)(A,{icon:Object(e.jsx)(xe.a,{}),children:["Trends",Object(e.jsx)(we.a,{type:"warning",className:"uppercase",style:{marginLeft:6,lineHeight:"1.4em"},children:"BETA"})]})}]:[{title:"Line Chart",options:[{value:a.j.ActionsLineGraph,label:Object(e.jsx)(A,{icon:Object(e.jsx)(xe.a,{}),children:"Linear"})},{value:a.j.ActionsLineGraphCumulative,label:Object(e.jsx)(A,{icon:Object(e.jsx)(y,{}),children:"Cumulative"}),disabled:f}]},{title:"Bar Chart",options:[{value:a.j.ActionsBar,label:Object(e.jsx)(A,{icon:Object(e.jsx)(k,{}),children:"Time"}),disabled:L},{value:a.j.ActionsBarValue,label:Object(e.jsx)(A,{icon:Object(e.jsx)(k,{}),children:"Value"}),disabled:D}]},{options:[{value:a.j.BoldNumber,label:Object(e.jsx)(A,{icon:Object(e.jsx)(G,{}),tooltip:"Big and bold. Only works with one series at a time.",children:"Number"}),disabled:S},{value:a.j.ActionsTable,label:Object(e.jsx)(A,{icon:Object(e.jsx)(I,{}),children:"Table"})},{value:a.j.ActionsPie,label:Object(e.jsx)(A,{icon:Object(e.jsx)(q,{}),children:"Pie"}),disabled:E},{value:a.j.WorldMap,label:Object(e.jsx)(A,{icon:Object(e.jsx)(ee.a,{}),tooltip:"Visualize data by country. Only works with one series at a time.",children:"World Map"}),disabled:g}]}];return Object(e.jsx)(Ce.LemonSelect,{value:j||J||n.display,onChange:function(v){O(v),s==null||s(v)},dropdownPlacement:"bottom-end",dropdownMatchSelectWidth:!1,"data-attr":"chart-filter",disabled:o,options:ae,size:"small"},"2")}try{Ne.displayName="ChartFilter",Ne.__docgenInfo={description:"",displayName:"ChartFilter",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((chartFilter: ChartDisplayType | FunnelVizType) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"]={docgenInfo:Ne.__docgenInfo,name:"ChartFilter",path:"frontend/src/lib/components/ChartFilter/ChartFilter.tsx#ChartFilter"})}catch(r){}var He=t("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts");function Qe(){var r=Object(i.useValues)(h.c),n=r.insightProps,s=Object(i.useValues)(Object(He.a)(n)),o=s.compare,d=s.disabled,c=Object(i.useActions)(Object(He.a)(n)),u=c.setCompare;return d?null:Object(e.jsx)(Ce.LemonCheckbox,{onChange:u,checked:o,disabled:d,label:Object(e.jsx)("span",{className:"font-normal",children:"Compare to previous time period"}),bordered:!0,size:"small"})}var tt=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ie=t.n(tt),Vt=t("./node_modules/core-js/modules/es.array.map.js"),Bt=t("./node_modules/core-js/modules/es.object.entries.js"),wt=t("./node_modules/core-js/modules/es.array.iterator.js"),Pe=t("./node_modules/core-js/modules/es.object.to-string.js"),Se=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),$e=t("./node_modules/core-js/modules/es.object.keys.js"),Ye=t("./node_modules/core-js/modules/es.symbol.js"),xt=t("./node_modules/core-js/modules/es.array.filter.js"),nt=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Kt=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Ut=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),Wt=t("./node_modules/core-js/modules/es.array.slice.js"),st=t("./node_modules/core-js/modules/es.function.name.js"),Xs=t("./node_modules/core-js/modules/es.array.from.js"),Qs=t("./node_modules/core-js/modules/es.string.iterator.js"),Zs=t("./node_modules/core-js/modules/es.regexp.exec.js"),qs=t("./node_modules/core-js/modules/es.symbol.description.js"),er=t("./node_modules/core-js/modules/es.symbol.iterator.js"),$=t("./frontend/src/lib/utils.tsx"),Dn=t("./frontend/src/scenes/insights/sharedUtils.ts"),Te=t("./frontend/src/lib/dayjs.ts"),yt=t("./frontend/src/lib/logic/featureFlagLogic.ts");function Fn(r,n){var s=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!s){if(Array.isArray(r)||(s=In(r))||n&&r&&typeof r.length=="number"){s&&(r=s);var o=0,d=function(){};return{s:d,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(m){throw m},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,u=!1,l;return{s:function(){s=s.call(r)},n:function(){var m=s.next();return c=m.done,m},e:function(m){u=!0,l=m},f:function(){try{!c&&s.return!=null&&s.return()}finally{if(u)throw l}}}}function In(r,n){if(!!r){if(typeof r=="string")return zt(r,n);var s=Object.prototype.toString.call(r).slice(8,-1);if(s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set")return Array.from(r);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return zt(r,n)}}function zt(r,n){(n==null||n>r.length)&&(n=r.length);for(var s=0,o=new Array(n);s<n;s++)o[s]=r[s];return o}function kt(r,n){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),s.push.apply(s,o)}return s}function Ht(r){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?kt(Object(s),!0).forEach(function(o){M()(r,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):kt(Object(s)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(s,o))})}return r}var $t=Object(i.kea)({props:{},key:Object(Dn.c)("new"),path:function(n){return["lib","components","IntervalFilter","intervalFilterLogic",n]},connect:function(n){return{actions:[Object(h.c)(n),["setFilters"]],values:[Object(h.c)(n),["filters"],yt.a,["featureFlags"]]}},actions:function(){return{setInterval:function(s){return{interval:s}}}},listeners:function(n){var s=n.values,o=n.actions,d=n.selectors;return{setInterval:function(u){var l=u.interval;Object($.pb)(l,s.filters.interval)||o.setFilters(Ht(Ht({},s.filters),{},{interval:l}))},setFilters:function(u,l,j,m){var O=u.filters,f=O.date_from,E=O.date_to,g=d.filters(m);if(!(!f||Object($.pb)(f,g.date_from)&&Object($.pb)(E,g.date_to))){if(f&&E&&Object(Te.a)(O.date_from).isValid()&&Object(Te.a)(O.date_to).isValid()){Object(Te.a)(E).diff(Object(Te.a)(f),"day")<=3?o.setInterval("hour"):Object(Te.a)(E).diff(Object(Te.a)(f),"month")<=3?o.setInterval("day"):o.setInterval("month");return}var S="day",L=Fn($.u),D;try{for(L.s();!(D=L.n()).done;){var J=D.value,A=J.key,ae=J.values,te=J.defaultInterval;if(ae[0]===f&&ae[1]===(E||void 0)&&A!=="Custom"&&te){S=te;break}}}catch(v){L.e(v)}finally{L.f()}o.setInterval(S)}}}},selectors:{interval:[function(r){return[r.filters]},function(r){return r==null?void 0:r.interval}]}}),Ln={hour:{label:"Hour",newDateFrom:"dStart"},day:{label:"Day",newDateFrom:void 0},week:{label:"Week",newDateFrom:"-30d"},month:{label:"Month",newDateFrom:"-90d"}};function rt(r){var n=r.disabled,s=Object(i.useValues)(h.c),o=s.insightProps,d=Object(i.useValues)($t(o)),c=d.interval,u=Object(i.useActions)($t(o)),l=u.setInterval;return Object(e.jsx)(Ce.LemonSelect,{size:"small",disabled:n,value:c||void 0,dropdownMatchSelectWidth:!1,onChange:function(m){m&&l(String(m))},"data-attr":"interval-filter",options:Object.entries(Ln).map(function(j){var m=Ie()(j,2),O=m[0],f=m[1].label;return{value:O,label:f}})})}try{rt.displayName="IntervalFilter",rt.__docgenInfo={description:"",displayName:"IntervalFilter",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"]={docgenInfo:rt.__docgenInfo,name:"IntervalFilter",path:"frontend/src/lib/components/IntervalFilter/IntervalFilter.tsx#IntervalFilter"})}catch(r){}var Le=t("./node_modules/antd/es/select/index.js"),An=t("./node_modules/@ant-design/icons/es/icons/FundOutlined.js"),Rn=t("./frontend/src/lib/components/SmoothingFilter/smoothings.ts");function Yt(r,n){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),s.push.apply(s,o)}return s}function Gt(r){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Yt(Object(s),!0).forEach(function(o){M()(r,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):Yt(Object(s)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(s,o))})}return r}function Nn(){var r=Object(i.useValues)(h.c),n=r.filters,s=Object(i.useActions)(h.c),o=s.setFilters,d=n.interval,c=n.smoothing_intervals;if(!d)return null;var u=Rn.a[d].map(function(l){var j=l.value,m=l.label;return{value:j,label:j===c?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(An.a,{})," ",m]}):m}});return u.length?Object(e.jsx)(Le.a,{bordered:!0,value:c||1,dropdownMatchSelectWidth:!1,onChange:function(j){o(Gt(Gt({},n),{},{smoothing_intervals:j}))},"data-attr":"smoothing-filter",options:u},d):Object(e.jsx)(e.Fragment,{})}var Me=t("./frontend/src/lib/constants.tsx"),Mn=t("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),Jt=t("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts"),Vn=t("./frontend/src/lib/components/DateFilter/DateFilter.tsx");function Xt(r,n){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),s.push.apply(s,o)}return s}function Qt(r){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Xt(Object(s),!0).forEach(function(o){M()(r,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):Xt(Object(s)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(s,o))})}return r}function at(r){var n,s=Object(i.useValues)(h.c),o=s.insightProps,d=Object(i.useValues)(Object(Jt.a)(o)),c=d.dates,u=c.dateFrom,l=c.dateTo,j=Object(i.useActions)(Object(Jt.a)(o)),m=j.setDates;return Object(e.jsx)(Vn.a,Qt(Qt({},r),{},{dateFrom:(n=u!=null?u:"-7d")!==null&&n!==void 0?n:void 0,dateTo:l!=null?l:void 0,onChange:function(f,E){var g;m(f,E),(g=r.onChange)===null||g===void 0||g.call(r,f,E)}}))}try{at.displayName="InsightDateFilter",at.__docgenInfo={description:"",displayName:"InsightDateFilter",props:{showCustom:{defaultValue:null,description:"",name:"showCustom",required:!1,type:{name:"boolean"}},showRollingRangePicker:{defaultValue:null,description:"",name:"showRollingRangePicker",required:!1,type:{name:"boolean"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((key: ReactNode) => ReactNode)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((fromDate: string | null, toDate: string | null) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"(() => HTMLElement)"}},dateOptions:{defaultValue:null,description:"",name:"dateOptions",required:!1,type:{name:"DateMappingOption[]"}},isDateFormatted:{defaultValue:null,description:"",name:"isDateFormatted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"]={docgenInfo:at.__docgenInfo,name:"InsightDateFilter",path:"frontend/src/scenes/insights/filters/InsightDateFilter/InsightDateFilter.tsx#InsightDateFilter"})}catch(r){}var ot=t("./frontend/src/scenes/retention/retentionTableLogic.ts"),Bn=t("./frontend/src/lib/components/DatePicker.tsx");function it(r){var n=r.disabled,s=Object(i.useValues)(h.c),o=s.insightProps,d=Object(i.useValues)(Object(ot.e)(o)),c=d.filters,u=Object(i.useActions)(Object(ot.e)(o)),l=u.setFilters,j=c.date_to&&Object(Te.a)(c.date_to).year()!==Object(Te.a)().year()?", YYYY":"";return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(U.a,{title:"Cohorts up to this end date",children:Object(e.jsx)("span",{style:{maxWidth:100},className:"flex inline-flex items-center pl-2",children:Object(e.jsx)(Bn.a,{showTime:c.period==="Hour",use12Hours:!0,format:c.period==="Hour"?"MMM D".concat(j,", h a"):"MMM D".concat(j),value:c.date_to?Object(Te.a)(c.date_to):void 0,onChange:function(O){return l({date_to:O&&Object(Te.a)(O).toISOString()})},allowClear:!0,placeholder:"Today",className:"retention-date-picker",disabled:n})})})})}try{it.displayName="RetentionDatePicker",it.__docgenInfo={description:"",displayName:"RetentionDatePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"]={docgenInfo:it.__docgenInfo,name:"RetentionDatePicker",path:"frontend/src/scenes/insights/RetentionDatePicker.tsx#RetentionDatePicker"})}catch(r){}var pe=t("./frontend/src/scenes/funnels/funnelLogic.ts"),Ae=t("./frontend/src/lib/components/icons.tsx");function lt(r){var n=r.disabled,s=Object(i.useValues)(h.c),o=s.insightProps,d=Object(i.useValues)(Object(pe.a)(o)),c=d.barGraphLayout,u=Object(i.useActions)(Object(pe.a)(o)),l=u.setFilters,j=[{title:"Graph Display Options",options:[{value:Me.l.vertical,icon:Object(e.jsx)(Ae.IconFunnelVertical,{}),label:"Left to right"},{value:Me.l.horizontal,icon:Object(e.jsx)(Ae.IconFunnelHorizontal,{}),label:"Top to bottom"}]}];return Object(e.jsx)(Ce.LemonSelect,{value:c||Me.l.vertical,onChange:function(O){return O&&l({layout:O})},dropdownMatchSelectWidth:!1,"data-attr":"funnel-bar-layout-selector",disabled:n,options:j,size:"small"})}try{lt.displayName="FunnelDisplayLayoutPicker",lt.__docgenInfo={description:"",displayName:"FunnelDisplayLayoutPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"]={docgenInfo:lt.__docgenInfo,name:"FunnelDisplayLayoutPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx#FunnelDisplayLayoutPicker"})}catch(r){}var wn=t("./node_modules/@ant-design/icons/es/icons/BarsOutlined.js"),_t=t("./frontend/src/scenes/paths/pathsLogic.ts"),Kn=t("./frontend/src/scenes/userLogic.ts");function ct(r){var n,s=r.disabled,o=Object(i.useValues)(h.c),d=o.insightProps,c=Object(i.useValues)(Object(_t.b)(d)),u=c.filter,l=Object(i.useActions)(Object(_t.b)(d)),j=l.setFilter,m=Object(i.useValues)(Kn.a),O=m.user,f=2,E=O!=null&&(n=O.organization)!==null&&n!==void 0&&n.available_features.includes(a.d.PATHS_ADVANCED)?20:5,g=Array.from(Array.from(Array.from(Array(E+1).keys()).slice(f)),function(S){return{label:"".concat(S," Steps"),value:S}});return Object(e.jsx)(Le.a,{id:"path-step-filter","data-attr":"path-step-filter",defaultValue:5,value:u.step_limit||_t.a,onSelect:function(L){return j({step_limit:L})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!0,dropdownAlign:$.a.bottomRight,optionLabelProp:"label",disabled:s,children:g.map(function(S){return Object(e.jsx)(Le.a.Option,{value:S.value,label:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(wn.a,{})," ",S.label]}),children:S.label},S.value)})})}try{ct.displayName="PathStepPicker",ct.__docgenInfo={description:"",displayName:"PathStepPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"]={docgenInfo:ct.__docgenInfo,name:"PathStepPicker",path:"frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx#PathStepPicker"})}catch(r){}var Un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"},Wn=Un,Zt=function(n,s){return V.createElement(F.a,Object(ie.a)(Object(ie.a)({},n),{},{ref:s,icon:Wn}))};Zt.displayName="PercentageOutlined";var qt=V.forwardRef(Zt);function dt(r){var n=r.disabled,s=Object(i.useValues)(h.c),o=s.insightProps,d=Object(i.useValues)(Object(ot.e)(o)),c=d.retentionReference,u=Object(i.useActions)(Object(ot.e)(o)),l=u.setRetentionReference;return Object(e.jsx)(Le.a,{value:c,onChange:l,bordered:!1,dropdownMatchSelectWidth:!1,"data-attr":"reference-selector",optionLabelProp:"label",disabled:n,children:[{value:"total",icon:Object(e.jsx)(qt,{}),label:"Overall cohort"},{value:"previous",icon:Object(e.jsx)(qt,{}),label:"Relative to previous period"}].map(function(j){return Object(e.jsx)(Le.a.Option,{value:j.value,label:Object(e.jsxs)(e.Fragment,{children:[j.icon," ",j.label]}),children:j.label},j.value)})})}try{dt.displayName="ReferencePicker",dt.__docgenInfo={description:"",displayName:"ReferencePicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"]={docgenInfo:dt.__docgenInfo,name:"ReferencePicker",path:"frontend/src/scenes/insights/filters/ReferencePicker.tsx#ReferencePicker"})}catch(r){}var en=t("./node_modules/antd/es/tooltip/index.js"),Ve=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),zn=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Be=t.n(zn),tr=t("./node_modules/core-js/modules/es.set.js"),nr=t("./node_modules/core-js/modules/es.array.concat.js"),kn=t("./node_modules/antd/es/input-number/index.js"),Ct=t("./node_modules/clsx/dist/clsx.m.js"),Hn=0,tn=90,$n=new Set([5,15,25,50,90]),Yn=[{label:"Auto bins",value:Me.a,display:!0}].concat(Be()(Array.from(Array.from(Array(tn+1).keys()),function(r){return{label:"".concat(r," bins"),value:r,display:$n.has(r)}})),[{label:"Custom",value:"custom",display:!0}]);function ut(r){var n=r.disabled,s=Object(i.useValues)(h.c),o=s.insightProps,d=Object(i.useValues)(Object(pe.a)(o)),c=d.filters,u=d.numericBinCount,l=Object(i.useActions)(Object(pe.a)(o)),j=l.setBinCount;return Object(e.jsx)(Le.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:Me.a,value:c.bin_count||Me.a,onSelect:function(O){return j(O)},dropdownRender:function(O){return Object(e.jsxs)(e.Fragment,{children:[O,Object(e.jsxs)("div",{children:[Object(e.jsx)(kn.a,{className:"funnel-bins-custom-picker",size:"middle",min:Hn,max:tn,value:u,onChange:function(E){var g=typeof E=="string"?parseInt(E):E;g&&j(g)}})," ","bins"]})]})},listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:$.a.bottomRight,optionLabelProp:"label",disabled:n,children:Object(e.jsx)(Le.a.OptGroup,{label:"Bin Count",children:Yn.map(function(m){return m.value==="custom"?null:Object(e.jsx)(Le.a.Option,{className:Object(Ct.a)({"select-option-hidden":!m.display}),value:m.value,label:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(k,{})," ",m.label]}),children:m.label},m.value)})})})}try{ut.displayName="FunnelBinsPicker",ut.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:ut.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(r){}var Gn=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Ze=t.n(Gn),Jn=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/UnitPicker/UnitPicker.scss"),nn=t.n(Jn),Pt={};Pt.insert="head",Pt.singleton=!1;var sr=Ze()(nn.a,Pt),rr=nn.a.locals||{},Et=t("./frontend/src/scenes/insights/aggregationAxisFormat.ts"),Ke=t("./frontend/src/lib/components/LemonButton/index.ts"),Xn=t("./frontend/src/lib/components/LemonDivider/index.ts"),sn=t("./frontend/src/lib/forms/Field.tsx"),rn=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),an=t("./node_modules/use-debounce/esm/useDebouncedCallback.js"),Qn=t("./frontend/src/lib/hooks/useKeyboardHotkeys.tsx"),St=t("./frontend/src/lib/utils/eventUsageLogic.ts");function on(r,n){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),s.push.apply(s,o)}return s}function ln(r){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?on(Object(s),!0).forEach(function(o){M()(r,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):on(Object(s)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(s,o))})}return r}var Zn=Et.a.reduce(function(r,n){return r[n.value]=n.label,r},{});function jt(r){var n=r.filters,s=r.setFilters,o=Object(i.useValues)(yt.a),d=o.featureFlags,c=Object(i.useActions)(St.e),u=c.reportAxisUnitsChanged,l=Object(V.useState)(!1),j=Ie()(l,2),m=j[0],O=j[1],f=Object(V.useState)(n.aggregation_axis_format||void 0),E=Ie()(f,2),g=E[0],S=E[1],L=Object(V.useState)(n.aggregation_axis_prefix||""),D=Ie()(L,2),J=D[0],A=D[1],ae=Object(V.useState)(n.aggregation_axis_postfix||""),te=Ie()(ae,2),v=te[0],N=te[1],W=Object(an.a)(function(){O(!m)},200),Q=Object(an.a)(function(p){var b=p.format,w=p.prefix,Y=p.postfix;s(ln(ln({},n),{},{aggregation_axis_format:b,aggregation_axis_prefix:w,aggregation_axis_postfix:Y}))},200);Object(Qn.a)({escape:{action:W}},[]);var z=function(b){var w=b.format,Y=b.prefix,T=b.postfix,H=b.close;S(w),A(Y||""),N(T||""),Q({format:w,prefix:Y,postfix:T}),H&&W(),u({format:w,prefix:Y,postfix:T,display:n.display,unitIsSet:!!Y||!!T||w&&w!=="numeric"})},X=Object(V.useMemo)(function(){var p="None";return g&&(p=Zn[g]),J!=null&&J.length&&(p="prefix: ".concat(J)),v!=null&&v.length&&(p="postfix: ".concat(v)),p},[g,J,v]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("span",{children:Object(Et.b)(n.display)}),Object(e.jsx)(Ke.b,{onClick:function(){return O(!m)},size:"small",type:"secondary",status:"stealth","data-attr":"chart-aggregation-axis-format",popup:{onClickOutside:close,visible:m,className:"UnitPopup",overlay:Object(e.jsxs)(e.Fragment,{children:[Et.a.map(function(p,b){var w=p.value,Y=p.label;return Object(e.jsx)(Ke.a,{onClick:function(){return z({format:w,close:!0})},status:"stealth",active:w===g,fullWidth:!0,children:Y},b)}),!!d[Me.j.CURRENCY_UNITS]&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Xn.a,{}),Object(e.jsx)(sn.b,{label:"prefix:",children:Object(e.jsx)(rn.a,{value:J,onChange:function(b){return z({prefix:b})},onPressEnter:function(b){return z({prefix:b,close:!0})}})}),Object(e.jsx)(sn.b,{label:"postfix:",children:Object(e.jsx)(rn.a,{value:v,onChange:function(b){return z({postfix:b})},onPressEnter:function(b){return z({postfix:b,close:!0})}})})]})]}),placement:"bottom-start",actionable:!0,closeOnClickInside:!1},children:X})]})}try{jt.displayName="UnitPicker",jt.__docgenInfo={description:"",displayName:"UnitPicker",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(filters: Partial<FilterType>, insightMode?: ItemMode | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/UnitPicker/UnitPicker.tsx#UnitPicker"]={docgenInfo:jt.__docgenInfo,name:"UnitPicker",path:"frontend/src/lib/components/UnitPicker/UnitPicker.tsx#UnitPicker"})}catch(r){}var Ue,We,qn=function(n,s){switch(n){case a.D.FUNNELS:return s.funnel_viz_type===a.z.Trends;case a.D.RETENTION:case a.D.PATHS:return!1;case a.D.TRENDS:case a.D.STICKINESS:case a.D.LIFECYCLE:default:return!s.display||!Me.p.includes(s.display)}},es=function(n){switch(n){case a.D.TRENDS:case a.D.STICKINESS:return!0;case a.D.RETENTION:case a.D.FUNNELS:return!1;case a.D.LIFECYCLE:case a.D.PATHS:return!1;default:return!0}},ts=(Ue={},M()(Ue,"".concat(a.D.TRENDS),!0),M()(Ue,"".concat(a.D.STICKINESS),!0),M()(Ue,"".concat(a.D.LIFECYCLE),!0),M()(Ue,"".concat(a.D.FUNNELS),!0),M()(Ue,"".concat(a.D.RETENTION),!1),M()(Ue,"".concat(a.D.PATHS),!0),Ue),ns=(We={},M()(We,"".concat(a.D.TRENDS),!0),M()(We,"".concat(a.D.STICKINESS),!0),M()(We,"".concat(a.D.LIFECYCLE),!1),M()(We,"".concat(a.D.FUNNELS),!1),M()(We,"".concat(a.D.RETENTION),!1),M()(We,"".concat(a.D.PATHS),!1),We),ss=function(n){var s,o;return!n.actions&&!n.events||((s=n.actions)===null||s===void 0?void 0:s.length)===0&&((o=n.events)===null||o===void 0?void 0:o.length)===0};function Re(r){return Object(e.jsx)("span",{className:"space-x-2 flex items-center text-sm",children:r.children})}function ft(r){var n=r.filters,s=r.activeView,o=r.disableTable,d=s===a.D.FUNNELS,c=s===a.D.PATHS,u=Object(i.useValues)(yt.a),l=u.featureFlags,j=Object(i.useActions)(h.c),m=j.setFilters;return Object(e.jsxs)("div",{className:"flex justify-between items-center flex-wrap","data-attr":"insight-filters",children:[Object(e.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap my-2",children:[ts[s]&&!o&&Object(e.jsxs)(Re,{children:[Object(e.jsx)("span",{children:"Date range"}),Object(e.jsx)(at,{disabled:d&&ss(n),makeLabel:function(f){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Mn.a,{})," ",f,f=="All time"&&Object(e.jsx)(en.a,{title:"Only events dated after 2015 will be shown",children:Object(e.jsx)(Ve.a,{className:"info-indicator"})})]})}})]}),qn(s,n)&&Object(e.jsxs)(Re,{children:[Object(e.jsxs)("span",{children:[Object(e.jsx)("span",{className:"hide-lte-md",children:"grouped "}),"by"]}),Object(e.jsx)(rt,{view:s})]}),s===a.D.TRENDS&&!n.breakdown_type&&!n.compare&&(!n.display||n.display===a.j.ActionsLineGraph)&&l[Me.j.SMOOTHING_INTERVAL]?Object(e.jsx)(Re,{children:Object(e.jsx)(Nn,{})}):null,s===a.D.RETENTION&&Object(e.jsxs)(Re,{children:[Object(e.jsx)(it,{}),Object(e.jsx)(dt,{})]}),c&&Object(e.jsx)(Re,{children:Object(e.jsx)(ct,{})}),ns[s]&&Object(e.jsx)(Re,{children:Object(e.jsx)(Qe,{})})]}),Object(e.jsxs)("div",{className:"flex items-center space-x-4 flex-wrap my-2",children:[es(s)&&Object(e.jsxs)(e.Fragment,{children:[s===a.D.TRENDS&&Object(e.jsx)(Re,{children:Object(e.jsx)(jt,{filters:n,setFilters:m})}),Object(e.jsxs)(Re,{children:[Object(e.jsx)("span",{children:"Chart type"}),Object(e.jsx)(Ne,{filters:n})]})]}),d&&n.funnel_viz_type===a.z.Steps&&Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(Re,{children:Object(e.jsx)(lt,{})})}),d&&n.funnel_viz_type===a.z.TimeToConvert&&Object(e.jsx)(Re,{children:Object(e.jsx)(ut,{})})]})]})}try{ft.displayName="InsightDisplayConfig",ft.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'},{value:'"subscriptions"'},{value:'"sharing"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:ft.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(r){}var Tt=t("./node_modules/antd/es/button/index.js"),rs=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss"),cn=t.n(rs),Dt={};Dt.insert="head",Dt.singleton=!1;var ar=Ze()(cn.a,Dt),or=cn.a.locals||{},ir=t("./node_modules/core-js/modules/es.array.find.js"),dn=t("./frontend/src/lib/components/EntityFilterInfo.tsx");function un(){var r,n=Object(i.useValues)(h.c),s=n.insightProps,o=Object(i.useValues)(Object(pe.a)(s)),d=o.filters,c=o.numberOfSeries,u=o.areFiltersValid,l=o.filterSteps,j=Object(i.useActions)(Object(pe.a)(s)),m=j.changeStepRange;if(d.funnel_viz_type===a.z.Steps)return null;var O=function(L,D){m(L,D)},f=u?Array.from(Array(Math.max(c)).keys()).slice(0,-1):[0],E=u?Array.from(Array(Math.max(c)).keys()).slice(((r=d.funnel_from_step)!==null&&r!==void 0?r:0)+1):[1],g=function(L){return L.map(function(D){var J=l.find(function(A){return A.order===D});return J?Object(e.jsx)(Le.a.Option,{value:D,label:"Step ".concat(D+1),children:Object(e.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(e.jsxs)("span",{style:{marginRight:4},children:["Step ",D+1,":"]}),Object(e.jsx)(dn.a,{filter:J})]})},D):null})};return Object(e.jsxs)(de.a,{className:"funnel-options-inputs",children:[Object(e.jsx)("span",{className:"text-muted-alt",children:"from"}),Object(e.jsx)(Le.a,{disabled:!u,dropdownMatchSelectWidth:!1,dropdownAlign:$.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_from_step-selector",optionLabelProp:"label",value:d.funnel_from_step||0,onChange:function(L){return O(L,d.funnel_to_step)},style:{marginLeft:4,marginRight:4},children:g(f)}),Object(e.jsx)("span",{className:"text-muted-alt",children:"to"}),Object(e.jsx)(Le.a,{disabled:!u,dropdownMatchSelectWidth:!1,dropdownAlign:$.a.bottomLeft,"data-attr":"funnel-header-steps-funnel_to_step-selector",optionLabelProp:"label",value:d.funnel_to_step||Math.max(c-1,1),onChange:function(L){return O(d.funnel_from_step,L)},style:{marginLeft:4,marginRight:4},children:g(E)})]})}function as(){var r=Object(i.useValues)(h.c),n=r.insightProps,s=r.filters,o=r.activeView,d=Object(i.useValues)(Object(pe.a)(n)),c=d.conversionMetrics,u=d.aggregationTargetLabel,l=Object(i.useActions)(Object(ve.a)(n)),j=l.setChartFilter;if(o!==a.D.FUNNELS)return null;var m=[].concat(Be()(s.funnel_viz_type===a.z.Steps?[Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("span",{className:"text-muted-alt",children:[Object(e.jsx)(U.a,{title:"Overall conversion rate for all ".concat(u.plural," on the entire funnel."),children:Object(e.jsx)(Ve.a,{className:"info-indicator left"})}),"Total conversion rate"]}),Object(e.jsx)("span",{className:"text-muted-alt mr-1",children:":"}),Object(e.jsx)("span",{className:"l4",children:Object($.rb)(c.totalRate,2,!0)})]})]:[]),Be()(s.funnel_viz_type!==a.z.Trends?[Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("span",{className:"text-muted-alt",children:[Object(e.jsx)(U.a,{title:"Average (arithmetic mean) of the total time each ".concat(u.singular," spent in the entire funnel."),children:Object(e.jsx)(Ve.a,{className:"info-indicator left"})}),"Average time to convert"," "]}),s.funnel_viz_type===a.z.TimeToConvert&&Object(e.jsx)(un,{}),Object(e.jsx)("span",{className:"text-muted-alt mr-1",children:":"}),Object(e.jsx)(Tt.a,{type:"link",onClick:function(){return j(a.z.TimeToConvert)},disabled:s.funnel_viz_type===a.z.TimeToConvert,children:Object(e.jsx)("span",{className:"l4",children:Object($.O)(c.averageTime)})})]})]:[]),Be()(s.funnel_viz_type===a.z.Trends?[Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("span",{className:"text-muted-alt",children:"Conversion rate "}),Object(e.jsx)(un,{})]})]:[]));return Object(e.jsx)(de.a,{className:"funnel-canvas-label",align:"middle",children:m.map(function(O,f){return Object(e.jsxs)(he.a.Fragment,{children:[f>0&&Object(e.jsx)("span",{style:{margin:"2px 8px",borderLeft:"1px solid var(--border)",height:14}}),O]},f)})})}var os=t("./frontend/src/lib/hooks/usePeriodicRerender.ts"),jn=3;function is(){var r=Object(i.useValues)(h.c),n=r.lastRefresh,s=Object(i.useActions)(h.c),o=s.loadResults;return Object(os.a)(15e3),Object(e.jsxs)("div",{className:"text-muted-alt",style:{height:32,display:"flex",alignItems:"center"},children:["Computed ",n?Object(Te.a)(n).fromNow():"a while ago",Object(e.jsx)("span",{style:{padding:"0 4px"},children:"\u2022"}),Object(e.jsx)(en.a,{title:Object(e.jsxs)(e.Fragment,{children:["Insights can be refreshed",Object(e.jsx)("br",{}),"every ",jn," minutes."]}),children:Object(e.jsx)(Tt.a,{size:"small",type:"link",onClick:function(){return o(!0)},disabled:!!n&&Object(Te.a)().subtract(jn-.5,"minutes").isBefore(n),style:{padding:0},children:Object(e.jsx)("span",{style:{fontSize:14},children:"Refresh"})})})]})}var Ft=t("./frontend/src/scenes/trends/viz/index.ts"),mt=t("./frontend/src/scenes/trends/trendsLogic.ts"),fn=t("./frontend/src/scenes/insights/views/InsightsTable/InsightsTable.tsx");try{InsightsTable.displayName="InsightsTable",InsightsTable.__docgenInfo={description:"",displayName:"InsightsTable",props:{isLegend:{defaultValue:{value:"false"},description:"Whether this is just a legend instead of standalone insight viz. Default: false.",name:"isLegend",required:!1,type:{name:"boolean"}},embedded:{defaultValue:{value:"false"},description:"Whether this is table is embedded in another card or whether it should be a card of its own. Default: false.",name:"embedded",required:!1,type:{name:"boolean"}},filterKey:{defaultValue:null,description:"Key for the entityFilterLogic",name:"filterKey",required:!0,type:{name:"string"}},canEditSeriesNameInline:{defaultValue:{value:"false"},description:"",name:"canEditSeriesNameInline",required:!1,type:{name:"boolean"}},canCheckUncheckSeries:{defaultValue:{value:"true"},description:"(Un)checking series updates the insight via the API, so it should be disabled if updates aren't desired.",name:"canCheckUncheckSeries",required:!1,type:{name:"boolean"}},isMainInsightView:{defaultValue:{value:"false"},description:"",name:"isMainInsightView",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"]={docgenInfo:InsightsTable.__docgenInfo,name:"InsightsTable",path:"frontend/src/scenes/insights/views/InsightsTable/index.tsx#InsightsTable"})}catch(r){}var mn=t("./frontend/src/scenes/insights/insightSceneLogic.tsx"),ls=t("./frontend/src/scenes/insights/views/WorldMap/index.ts"),cs=t("./frontend/src/scenes/insights/views/BoldNumber/index.ts");function Ge(r){var n=r.view,s=Object(i.useValues)(mn.a),o=s.insightMode,d=Object(i.useValues)(h.c),c=d.insightProps,u=Object(i.useValues)(Object(mt.a)(c)),l=u.filters,j=u.loadMoreBreakdownUrl,m=u.breakdownValuesLoading,O=Object(i.useActions)(Object(mt.a)(c)),f=O.loadMoreBreakdownValues,E=function(){if(!l.display||l.display===a.j.ActionsLineGraph||l.display===a.j.ActionsLineGraphCumulative||l.display===a.j.ActionsBar)return Object(e.jsx)(Ft.b,{});if(l.display===a.j.BoldNumber)return Object(e.jsx)(cs.a,{});if(l.display===a.j.ActionsTable)return Object(e.jsx)(i.BindLogic,{logic:mt.a,props:{dashboardItemId:null,view:n,filters:null},children:Object(e.jsx)(fn.b,{embedded:!0,filterKey:"trends_".concat(n),canEditSeriesNameInline:o===a.E.Edit,isMainInsightView:!0})});if(l.display===a.j.ActionsPie)return Object(e.jsx)(Ft.c,{});if(l.display===a.j.ActionsBarValue)return Object(e.jsx)(Ft.a,{});if(l.display===a.j.WorldMap)return Object(e.jsx)(ls.a,{})};return Object(e.jsxs)(e.Fragment,{children:[(l.actions||l.events)&&Object(e.jsx)("div",{className:l.display!==a.j.ActionsTable&&l.display!==a.j.WorldMap&&l.display!==a.j.BoldNumber?"trends-insights-container":void 0,children:E()}),l.breakdown&&j&&Object(e.jsxs)("div",{className:"my-4 flex flex-col items-center",children:[Object(e.jsxs)("div",{className:"text-muted mb-2",children:["For readability, ",Object(e.jsx)("b",{children:"not all breakdown values are displayed"}),". Click below to load them."]}),Object(e.jsx)(Ce.LemonButton,{onClick:f,loading:m,size:"small",type:"secondary",children:"Load more breakdown values"})]})]})}try{Ge.displayName="TrendInsight",Ge.__docgenInfo={description:"",displayName:"TrendInsight",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/trends/Trends.tsx#TrendInsight"]={docgenInfo:Ge.__docgenInfo,name:"TrendInsight",path:"frontend/src/scenes/trends/Trends.tsx#TrendInsight"})}catch(r){}var ds=t("./frontend/src/scenes/retention/RetentionContainer.tsx"),us=t("./frontend/src/scenes/paths/Paths.tsx"),qe=t("./frontend/src/scenes/insights/EmptyStates/index.ts");function js(){var r=Object(i.useValues)(h.c),n=r.activeView;return n!==a.D.PATHS?null:Object(e.jsx)(de.a,{className:"funnel-canvas-label",align:"middle",children:Object(e.jsx)(he.a.Fragment,{children:Object(e.jsx)("span",{className:"text-muted-alt",children:"Large path items are shown by default. View smaller items by hovering over a node"})})})}var bn=t("./frontend/src/lib/components/InsightLegend/InsightLegend.tsx"),lr=t("./node_modules/core-js/modules/es.object.from-entries.js"),cr=t("./node_modules/core-js/modules/es.array.flat-map.js"),dr=t("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),fs=t("./frontend/src/lib/components/LemonTable/index.ts"),bt=t("./frontend/src/scenes/funnels/funnelUtils.ts"),It=t("./frontend/src/scenes/insights/views/Funnels/funnelStepTableUtils.tsx"),ms=t("./frontend/src/models/cohortsModel.ts"),pn=t("./frontend/src/lib/components/LemonCheckbox/index.ts"),vn=t("./frontend/src/lib/components/Lettermark/Lettermark.tsx"),Lt=t("./frontend/src/lib/components/LemonRow/index.ts"),Je=t("./frontend/src/scenes/funnels/ValueInspectorButton.tsx"),bs=t("./frontend/src/lib/colors.ts"),ps=t("./frontend/src/models/propertyDefinitionsModel.ts"),vs=t("./frontend/src/scenes/insights/utils.tsx");function hs(){var r=Object(i.useValues)(h.c),n=r.insightProps,s=Object(pe.a)(n),o=Object(i.useValues)(s),d=o.insightLoading,c=o.filters,u=o.steps,l=o.flattenedBreakdowns,j=o.hiddenLegendKeys,m=o.visibleStepsWithConversionMetrics,O=o.isOnlySeries,f=Object(i.useActions)(s),E=f.setHiddenById,g=f.toggleVisibilityByBreakdown,S=f.openPersonsModalForSeries,L=Object(i.useValues)(ms.a),D=L.cohorts,J=Object(i.useValues)(ps.a),A=J.formatPropertyValueForDisplay,ae=l==null?void 0:l.every(function(v){return!j[Object(bt.l)(v.breakdown_value)]}),te=[{children:[{title:O?"Breakdown":Object(e.jsx)(pn.a,{checked:ae||(l!=null&&l.some(function(v){return!j[Object(bt.l)(v.breakdown_value)]})?"indeterminate":!1),onChange:function(){E(Object.fromEntries(m.flatMap(function(){return l.map(function(N){return[Object(bt.l)(N.breakdown_value),ae]})})))},label:Object(e.jsx)("span",{className:"font-bold",children:"Breakdown"}),size:"small"}),dataIndex:"breakdown_value",render:function(N,W){var Q,z=((Q=W.breakdown_value)===null||Q===void 0?void 0:Q.length)==1?W.breakdown_value[0]:W.breakdown_value,X=Object(vs.d)(D,A,z,W.breakdown,c.breakdown_type);return O?Object(e.jsx)("span",{className:"font-medium",children:X}):Object(e.jsx)(pn.a,{checked:!j[Object(bt.l)(W.breakdown_value)],onChange:function(){return g(W.breakdown_value)},label:X})}},{title:Object(e.jsxs)(e.Fragment,{children:["Total",Object(e.jsx)("br",{}),"conversion"]}),render:function(N,W){var Q,z;return Object($.rb)((Q=W==null||(z=W.conversionRates)===null||z===void 0?void 0:z.total)!==null&&Q!==void 0?Q:0,2,!0)},align:"right"}]}].concat(Be()(u.map(function(v,N){return{title:Object(e.jsx)(Lt.a,{icon:Object(e.jsx)(vn.a,{name:N+1,color:vn.b.Gray}),style:{font:"inherit",padding:0},size:"small",children:Object(e.jsx)(dn.a,{filter:Object(It.a)(v)})}),children:[{title:N===0?"Entered":"Converted",render:function(Q,z){var X,p,b=(X=z.steps)===null||X===void 0?void 0:X[N];return b&&Object(e.jsx)(Je.a,{onClick:function(){return S({step:v,series:b,converted:!0})},style:{padding:0},children:Object($.P)((p=b.count)!==null&&p!==void 0?p:0)})},align:"right"}].concat(Be()(N===0?[]:[{title:"Dropped\xA0off",render:function(Q,z){var X,p,b=(X=z.steps)===null||X===void 0?void 0:X[N];return b&&Object(e.jsx)(Je.a,{onClick:function(){return S({step:v,series:b,converted:!1})},style:{padding:0},children:Object($.P)((p=b.droppedOffFromPrevious)!==null&&p!==void 0?p:0)})},align:"right"}]),[{title:Object(e.jsxs)(e.Fragment,{children:["Conversion",Object(e.jsx)("br",{}),"so\xA0far"]}),render:function(Q,z){var X,p,b,w,Y,T,H=Object(It.b)(z,v.order);return H!=null&&H.total?Object(e.jsx)(Lt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:Object(e.jsx)(Ae.IconFlag,{}),size:"small",children:Object($.rb)((X=(p=z.steps)===null||p===void 0||(b=p[v.order])===null||b===void 0?void 0:b.conversionRates.total)!==null&&X!==void 0?X:0,2,!0)}):Object($.rb)((w=(Y=z.steps)===null||Y===void 0||(T=Y[v.order])===null||T===void 0?void 0:T.conversionRates.total)!==null&&w!==void 0?w:0,2,!0)},align:"right"}],Be()(N===0?[]:[{title:Object(e.jsxs)(e.Fragment,{children:["Conversion",Object(e.jsx)("br",{}),"from\xA0previous"]}),render:function(Q,z){var X,p,b,w,Y,T,H=Object(It.b)(z,v.order);return!(H!=null&&H.total)&&H!==null&&H!==void 0&&H.fromPrevious?Object(e.jsx)(Lt.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:Object(e.jsx)(Ae.IconFlag,{}),size:"small",children:Object($.rb)((X=(p=z.steps)===null||p===void 0||(b=p[v.order])===null||b===void 0?void 0:b.conversionRates.fromPrevious)!==null&&X!==void 0?X:0,2,!0)}):Object($.rb)((w=(Y=z.steps)===null||Y===void 0||(T=Y[v.order])===null||T===void 0?void 0:T.conversionRates.fromPrevious)!==null&&w!==void 0?w:0,2,!0)},align:"right"},{title:Object(e.jsxs)(e.Fragment,{children:["Median",Object(e.jsx)("br",{}),"time"]}),render:function(Q,z){var X,p;return((X=z.steps)===null||X===void 0||(p=X[v.order])===null||p===void 0?void 0:p.median_conversion_time)!=null?Object($.O)(z.steps[v.order].median_conversion_time,3):"\u2013"},align:"right",width:0,className:"whitespace-nowrap"},{title:Object(e.jsxs)(e.Fragment,{children:["Average",Object(e.jsx)("br",{}),"time"]}),render:function(Q,z){var X,p;return((X=z.steps)===null||X===void 0||(p=X[v.order])===null||p===void 0?void 0:p.average_conversion_time)!=null?Object($.O)(z.steps[v.order].average_conversion_time,3):"\u2013"},align:"right",width:0,className:"whitespace-nowrap"}]))}})));return Object(e.jsx)(fs.a,{dataSource:l,columns:te,loading:d,rowKey:"breakdownIndex",rowStatus:function(N){return N.significant?"highlighted":null},rowRibbonColor:function(N){var W;return Object(bs.d)((W=N==null?void 0:N.breakdownIndex)!==null&&W!==void 0?W:0)}})}var Os=t("./frontend/src/lib/components/Animation/Animation.tsx"),gs=t("./frontend/src/lib/animations/animations.ts"),xs=t("./node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),ys=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss"),hn=t.n(ys),At={};At.insert="head",At.singleton=!1;var ur=Ze()(hn.a,At),jr=hn.a.locals||{},_s=t("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),Cs=t("./frontend/src/lib/components/PayCard/PayCard.tsx"),Ps=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),fr=t("./node_modules/core-js/modules/es.number.is-integer.js"),mr=t("./node_modules/core-js/modules/es.number.constructor.js"),br=t("./node_modules/core-js/modules/es.number.to-fixed.js"),pr=t("./node_modules/core-js/modules/es.string.split.js"),Es=t("./node_modules/antd/es/spin/index.js"),Rt=t("./node_modules/antd/es/table/index.js"),Ss=t("./node_modules/antd/lib/table/Column.js"),De=t.n(Ss),On=t("./node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),Ts={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},Ds=Ts,gn=function(n,s){return V.createElement(F.a,Object(ie.a)(Object(ie.a)({},n),{},{ref:s,icon:Ds}))};gn.displayName="FallOutlined";var xn=V.forwardRef(gn),yn=t("./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),Fs=t("./node_modules/antd/lib/checkbox/Checkbox.js"),pt=t.n(Fs),Xe=t("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Is=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss"),_n=t.n(Is),Nt={};Nt.insert="head",Nt.singleton=!1;var vr=Ze()(_n.a,Nt),hr=_n.a.locals||{},Ls=t("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function et(r){var n=r.id,s=r.offset,o=r.children,d=Object(i.useActions)(Object(Ls.a)({id:n,offset:s})),c=d.scrolling,u=Object(V.useRef)(null);return Object(V.useEffect)(function(){var l=u.current;return document.addEventListener("scroll",function(){return l&&c(l)}),function(){return document.removeEventListener("scroll",function(){return l&&c(l)})}},[u.current]),Object(e.jsx)("div",{ref:u,children:o})}try{et.displayName="VisibilitySensor",et.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:et.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(r){}var Cn=t("./frontend/src/lib/components/Popup/Popup.tsx"),As=t("./node_modules/antd/es/modal/index.js"),Rs=t("./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js"),Ns=t("./node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),Ms=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),Vs=t("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss"),Pn=t.n(Vs),Mt={};Mt.insert="head",Mt.singleton=!1;var Or=Ze()(Pn.a,Mt),gr=Pn.a.locals||{},Bs=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),En=t("./frontend/src/lib/components/Link.tsx"),ws=t("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx");function Ks(){var r=Object(i.useValues)(h.c),n=r.insightProps,s=Object(pe.a)(n),o=Object(i.useValues)(s),d=o.correlationsLoading,c=o.funnelCorrelationDetails,u=o.parseDisplayNameForCorrelation,l=o.correlationMatrixAndScore,j=Object(i.useActions)(s),m=j.setFunnelCorrelationDetails,O=j.openCorrelationPersonsModal,f=(c==null?void 0:c.result_type)===a.v.Events?"event":"property",E=(c==null?void 0:c.result_type)===a.v.Events?"performed event":"have property",g=Object(e.jsx)(e.Fragment,{});if(c){var S=u(c),L=S.first_value,D=S.second_value;g=Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Xe.a,{value:L}),D!==void 0&&Object(e.jsxs)(e.Fragment,{children:[" :: ",Object(e.jsx)(Xe.a,{value:D,disablePopover:!0})]})]})}var J=l.correlationScore,A=l.truePositive,ae=l.falsePositive,te=l.trueNegative,v=l.falseNegative,N=l.correlationScoreStrength,W=N==="strong"?Object(e.jsx)(Rs.a,{style:{color:"var(--success)"}}):N==="moderate"?Object(e.jsx)(Ns.a,{style:{color:"var(--warning)"}}):Object(e.jsx)(Ms.a,{style:{color:"var(--danger)"}}),Q=function(){return m(null)};return Object(e.jsx)(As.a,{className:"correlation-matrix",visible:!!c,onCancel:Q,destroyOnClose:!0,footer:Object(e.jsx)(Tt.a,{onClick:Q,children:"Dismiss"}),width:600,title:"Correlation details",children:Object(e.jsx)("div",{className:"correlation-table-wrapper",children:d?Object(e.jsx)("div",{className:"mt-4 text-center",children:Object(e.jsx)(Bs.a,{className:"text-4xl"})}):c?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("p",{className:"text-muted-alt mb-4",children:["The table below displays the correlation details for users who ",E," ",Object(e.jsx)("b",{children:g}),"."]}),Object(e.jsxs)("table",{children:[Object(e.jsxs)("thead",{children:[Object(e.jsx)("tr",{className:"table-title",children:Object(e.jsx)("td",{colSpan:3,children:"Results matrix"})}),Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{children:(c==null?void 0:c.result_type)===a.v.Events?"Performed event":"Has property"}),Object(e.jsx)("td",{children:"Success"}),Object(e.jsx)("td",{children:"Dropped off"})]})]}),Object(e.jsxs)("tbody",{children:[Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{className:"horizontal-header",children:"Yes"}),Object(e.jsxs)("td",{children:[Object(e.jsx)(U.a,{title:"True positive (TP) - Percentage of users who ".concat(E," and completed the funnel."),children:Object(e.jsx)("div",{className:"percentage",children:A?Object($.rb)(A/(A+ae)):"0.00%"})}),A===0?"0 users":Object(e.jsx)(En.a,{onClick:function(){O(c,!0)},children:Object($.sb)(A,"user",void 0,!0)})]}),Object(e.jsxs)("td",{children:[Object(e.jsx)("div",{className:"percentage",children:Object(e.jsx)(U.a,{title:"False negative (FN) - Percentage of users who ".concat(E," and did not complete the funnel."),children:v?Object($.rb)(v/(v+te)):"0.00%"})}),v===0?"0 users":Object(e.jsx)(En.a,{onClick:function(){O(c,!1)},children:Object($.sb)(v,"user",void 0,!0)})]})]}),Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{className:"horizontal-header",children:"No"}),Object(e.jsxs)("td",{children:[Object(e.jsx)("div",{className:"percentage",children:Object(e.jsx)(U.a,{title:"False positive (FP) - Percentage of users who did not ".concat(E," and completed the funnel."),children:ae?Object($.rb)(ae/(A+ae)):"0.00%"})}),Object($.sb)(ae,"user",void 0,!0)]}),Object(e.jsxs)("td",{children:[Object(e.jsx)("div",{className:"percentage",children:Object(e.jsx)(U.a,{title:"True negative (TN) - Percentage of users who did not ".concat(E," and did not complete the funnel."),children:te?Object($.rb)(te/(v+te)):"0.00%"})}),Object($.sb)(te,"user",void 0,!0)]})]}),Object(e.jsxs)("tr",{children:[Object(e.jsx)("td",{className:"horizontal-header"}),Object(e.jsx)("td",{children:Object(e.jsx)("b",{children:"100%"})}),Object(e.jsx)("td",{children:Object(e.jsx)("b",{children:"100%"})})]})]})]}),Object(e.jsxs)("div",{className:"mt-4 text-center",children:[Object($.i)((c==null?void 0:c.result_type)||"")," ",Object(e.jsx)("b",{children:g})," ","has a"," ",(c==null?void 0:c.correlation_type)===a.w.Success?Object(e.jsxs)("b",{className:"text-success",children:["positive"," ",Object(e.jsx)(U.a,{title:"Positive correlation means this ".concat(f," is correlated with a successful conversion."),children:Object(e.jsx)(Ve.a,{className:"cursor-pointer"})})]}):Object(e.jsxs)("b",{className:"text-danger",children:["negative"," ",Object(e.jsx)(U.a,{title:"Negative correlation means this ".concat(f," is correlated with an unsuccessful conversion (user dropped off)."),children:Object(e.jsx)(Ve.a,{className:"cursor-pointer"})})]})," ","correlation score of"," ",Object(e.jsx)("b",{style:{color:N==="strong"?"var(--success)":N==="moderate"?"var(--warning)":"var(--danger)"},children:Object(e.jsx)(U.a,{title:"This ".concat(f," has ").concat(N," correlation."),children:Object(e.jsxs)("span",{style:{cursor:"pointer"},children:[W," ",J.toFixed(3)]})})})]})]}):Object(e.jsx)("div",{children:Object(e.jsx)(ws.a,{type:"danger",children:"We could not load the details for this correlation value. Please recreate your funnel and try again."})})})})}function Us(){var r=Object(i.useValues)(h.c),n=r.insightProps,s=Object(pe.a)(n),o=Object(i.useValues)(s),d=o.stepsWithCount,c=o.correlationValues,u=o.correlationTypes,l=o.eventHasPropertyCorrelations,j=o.eventWithPropertyCorrelationsValues,m=o.parseDisplayNameForCorrelation,O=o.correlationsLoading,f=o.eventWithPropertyCorrelationsLoading,E=o.nestedTableExpandedKeys,g=o.correlationPropKey,S=o.filters,L=o.aggregationTargetLabel,D=Object(i.useActions)(s),J=D.setCorrelationTypes,A=D.loadEventWithPropertyCorrelations,ae=D.addNestedTableExpandedKey,te=D.removeNestedTableExpandedKey,v=D.openCorrelationPersonsModal,N=D.loadCorrelations,W=Object(i.useActions)(St.e),Q=W.reportCorrelationInteraction;Object(V.useEffect)(function(){N({})},[S]);var z=function(T){u?u.includes(T)?J(u.filter(function(H){return H!==T})):J([].concat(Be()(u),[T])):J([T])},X=function(T){var H=function(gt){return gt<10&&!Number.isInteger(gt)?gt.toFixed(1):gt.toFixed()},ge=T.correlation_type===a.w.Success,fe=m(T),ke=fe.first_value,ht=fe.second_value;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("h4",{children:[ge?Object(e.jsx)(On.a,{style:{color:"green"}}):Object(e.jsx)(xn,{style:{color:"red"}})," ",Object(e.jsx)(Xe.a,{value:ke}),ht!==void 0&&Object(e.jsxs)(e.Fragment,{children:[" :: ",Object(e.jsx)(Xe.a,{value:ht,disablePopover:!0})]})]}),Object(e.jsxs)("div",{children:[Object($.i)(L.plural)," ",S.aggregation_group_type_index!=null?"that":"who"," converted were"," ",Object(e.jsx)("mark",{children:Object(e.jsxs)("b",{children:[H(T.odds_ratio),"x ",ge?"more":"less"," likely"]})})," ","to"," ",T.result_type===a.v.EventWithProperties?"have this event property":"do this event"]}),Object(e.jsx)(Ks,{})]})},p=function(T){return Object(e.jsx)(Je.a,{onClick:function(){v(T,!0)},children:T.success_count})},b=function(T){return Object(e.jsx)(Je.a,{onClick:function(){v(T,!1)},children:T.failure_count})},w=function(T){return f?Object(e.jsxs)("div",{className:"nested-properties-loading",children:[Object(e.jsx)(Es.a,{}),Object(e.jsx)("h3",{children:"Loading correlation results"}),Object(e.jsx)("p",{children:"This process can take up to 20 seconds. "})]}):Object(e.jsxs)("div",{children:[Object(e.jsx)("h4",{style:{paddingLeft:16},children:"Correlated properties"}),Object(e.jsxs)(Rt.a,{dataSource:j[T],rowKey:function(ge){return ge.event.event},className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(ge,fe){return Q(a.v.EventWithProperties,"pagination change",{page:ge,page_size:fe})}},children:[Object(e.jsx)(De.a,{title:"Property",render:function(ge,fe){return X(fe)},align:"left"},"eventName"),Object(e.jsx)(De.a,{title:"Completed",render:function(ge,fe){return p(fe)},width:90,align:"center"},"success_count"),Object(e.jsx)(De.a,{title:"Dropped off",render:function(ge,fe){return b(fe)},width:120,align:"center"},"failure_count"),Object(e.jsx)(De.a,{title:"",render:function(ge,fe){return Object(e.jsx)(Sn,{record:fe})},align:"center",width:30},"actions")]})]})};return d.length>1?Object(e.jsx)(et,{id:g,offset:152,children:Object(e.jsxs)("div",{className:"funnel-correlation-table",children:[Object(e.jsxs)("span",{className:"funnel-correlation-header",children:[Object(e.jsxs)("span",{className:"table-header",children:[Object(e.jsx)(Ae.IconSelectEvents,{style:{marginRight:4,fontSize:24,opacity:.5}}),"CORRELATED EVENTS"]}),Object(e.jsxs)("span",{className:"table-options",children:[Object(e.jsx)("p",{className:"title",children:"CORRELATION"}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return z(a.w.Success)},children:Object(e.jsx)(pt.a,{checked:u.includes(a.w.Success),style:{pointerEvents:"none"},children:"Success"})}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return z(a.w.Failure)},children:Object(e.jsx)(pt.a,{checked:u.includes(a.w.Failure),style:{pointerEvents:"none"},children:"Dropoff"})})]})]}),Object(e.jsxs)(Rt.a,{dataSource:c,loading:O,size:"small",scroll:{x:"max-content"},rowKey:function(T){return T.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(){return Q(a.v.Events,"load more")}},expandable:{expandedRowRender:function(T){return w(T.event.event)},expandedRowKeys:E,rowExpandable:function(){return S.aggregation_group_type_index===void 0},expandIcon:function(T){var H=T.expanded,ge=T.onExpand,fe=T.record,ke=T.expandable;return ke?H?Object(e.jsx)(U.a,{title:"Collapse",children:Object(e.jsx)("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Ot){te(fe.event.event),ge(fe,Ot)},children:Object(e.jsx)(Ae.IconUnfoldLess,{})})}):Object(e.jsx)(U.a,{title:"Expand to see correlated properties for this event",children:Object(e.jsx)("div",{style:{cursor:"pointer",opacity:.5,fontSize:24},onClick:function(Ot){!l(fe.event.event)&&A(fe.event.event),ae(fe.event.event),ge(fe,Ot)},children:Object(e.jsx)(Ae.IconUnfoldMore,{})})}):null}},children:[Object(e.jsx)(De.a,{title:"Event",render:function(T,H){return X(H)},align:"left",ellipsis:!0},"eventName"),Object(e.jsx)(De.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Completed",Object(e.jsx)(U.a,{title:"".concat(Object($.i)(L.plural)," ").concat(S.aggregation_group_type_index!=null?"that":"who"," performed the event and completed the entire funnel."),children:Object(e.jsx)(Ve.a,{className:"column-info"})})]}),render:function(T,H){return p(H)},width:90,align:"center"},"success_count"),Object(e.jsx)(De.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Dropped off",Object(e.jsx)(U.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object($.i)(L.plural)," ",S.aggregation_group_type_index!=null?"that":"who"," ","performed the event and did ",Object(e.jsx)("b",{children:"not complete"})," the entire funnel."]}),children:Object(e.jsx)(Ve.a,{className:"column-info"})})]}),render:function(T,H){return b(H)},width:120,align:"center"},"failure_count"),Object(e.jsx)(De.a,{title:"",render:function(T,H){return Object(e.jsx)(Sn,{record:H})},width:30},"actions")]})]})}):null}var Sn=function(n){var s=n.record,o=Object(i.useValues)(h.c),d=o.insightProps,c=Object(pe.a)(d),u=Object(i.useActions)(c),l=u.excludeEventPropertyFromProject,j=u.excludeEventFromProject,m=u.setFunnelCorrelationDetails,O=Object(i.useValues)(c),f=O.isEventPropertyExcluded,E=O.isEventExcluded,g=s.event.event.split("::"),S=Object(V.useState)(!1),L=Ie()(S,2),D=L[0],J=L[1];return Object(e.jsx)(de.a,{style:{justifyContent:"flex-end"},children:Object(e.jsx)(Cn.a,{visible:D,actionable:!0,onClickOutside:function(){return J(!1)},overlay:Object(e.jsxs)(e.Fragment,{children:[s.result_type===a.v.Events&&Object(e.jsx)(Ke.a,{onClick:function(){return m(s)},fullWidth:!0,status:"stealth",children:"View correlation details"}),Object(e.jsx)(Ke.a,{disabled:s.result_type===a.v.EventWithProperties?f(g[1]):E(g[0]),onClick:function(){return s.result_type===a.v.EventWithProperties?l(g[0],g[1]):j(g[0])},fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",status:"stealth",children:"Exclude event from project"})]}),children:Object(e.jsx)(Ke.a,{status:"stealth",onClick:function(){return J(!D)},children:Object(e.jsx)(yn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"})})})})},Ws=t("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function zs(){var r=Object(i.useValues)(h.c),n=r.insightProps,s=Object(pe.a)(n),o=Object(i.useValues)(s),d=o.stepsWithCount,c=o.propertyCorrelationValues,u=o.propertyCorrelationTypes,l=o.excludedPropertyNames,j=o.parseDisplayNameForCorrelation,m=o.propertyCorrelationsLoading,O=o.inversePropertyNames,f=o.propertyNames,E=o.correlationPropKey,g=o.allProperties,S=o.filters,L=o.aggregationTargetLabel,D=Object(i.useActions)(s),J=D.setPropertyCorrelationTypes,A=D.setPropertyNames,ae=D.openCorrelationPersonsModal,te=D.loadPropertyCorrelations,v=Object(i.useActions)(St.e),N=v.reportCorrelationInteraction;Object(V.useEffect)(function(){f.length===0&&A(g),te({})},[S]);var W=function(b){u?u.includes(b)?J(u.filter(function(w){return w!==b})):J([].concat(Be()(u),[b])):J([b])},Q=function(b){return Object(e.jsx)(Je.a,{onClick:function(){ae(b,!0)},children:b.success_count})},z=function(b){return Object(e.jsx)(Je.a,{onClick:function(){ae(b,!1)},children:b.failure_count})},X=function(b){var w=function(ke){return ke<10&&!Number.isInteger(ke)?ke.toFixed(1):ke.toFixed()},Y=b.correlation_type===a.w.Success,T=j(b),H=T.first_value,ge=T.second_value;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("h4",{children:[Y?Object(e.jsx)(On.a,{style:{color:"green"}}):Object(e.jsx)(xn,{style:{color:"red"}})," ",Object(e.jsx)(Xe.a,{value:H}),ge!==void 0&&Object(e.jsxs)(e.Fragment,{children:[" :: ",Object(e.jsx)(Xe.a,{value:ge,disablePopover:!0})]})]}),Object(e.jsxs)("div",{children:[Object($.i)(L.plural)," ",S.aggregation_group_type_index!=null?"that":"who"," converted were"," ",Object(e.jsx)("mark",{children:Object(e.jsxs)("b",{children:[w(b.odds_ratio),"x ",Y?"more":"less"," likely"]})})," ","to have this property value"]})]})};return d.length>1?Object(e.jsx)(et,{offset:150,id:"".concat(E,"-properties"),children:Object(e.jsxs)("div",{className:"funnel-correlation-table",children:[Object(e.jsxs)(de.a,{className:"funnel-correlation-header",children:[Object(e.jsxs)(Z.a,{className:"table-header",children:[Object(e.jsx)(Ae.IconSelectProperties,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"]}),Object(e.jsxs)(Z.a,{className:"table-options",children:[Object(e.jsx)(de.a,{style:{display:"contents"},children:g.length>0&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("p",{className:"title",children:"PROPERTIES "}),Object(e.jsx)(Ws.a,{value:new Set(f),onChange:function(b){return A(b)},allProperties:O(l||[])})]})}),Object(e.jsxs)(de.a,{style:{display:"contents"},children:[Object(e.jsx)("p",{className:"title",style:{marginLeft:8},children:"CORRELATION"}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(){return W(a.w.Success)},children:Object(e.jsx)(pt.a,{checked:u.includes(a.w.Success),style:{pointerEvents:"none"},children:"Success"})}),Object(e.jsx)("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:function(){return W(a.w.Failure)},children:Object(e.jsx)(pt.a,{checked:u.includes(a.w.Failure),style:{pointerEvents:"none"},children:"Dropoff"})})]})]})]}),Object(e.jsxs)(Rt.a,{dataSource:c,loading:m,scroll:{x:"max-content"},size:"small",rowKey:function(b){return b.event.event},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:function(b,w){return N(a.v.Properties,"pagination change",{page:b,page_size:w})}},children:[Object(e.jsx)(De.a,{title:"".concat(Object($.i)(L.singular)," property"),render:function(b,w){return X(w)},align:"left"},"propertName"),Object(e.jsx)(De.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Completed",Object(e.jsx)(U.a,{title:"".concat(Object($.i)(L.plural)," ").concat(S.aggregation_group_type_index!=null?"that":"who"," have this property and completed the entire funnel."),children:Object(e.jsx)(Ve.a,{className:"column-info"})})]}),render:function(b,w){return Q(w)},width:90,align:"center"},"success_count"),Object(e.jsx)(De.a,{title:Object(e.jsxs)("div",{className:"flex items-center",children:["Dropped off",Object(e.jsx)(U.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object($.i)(L.plural)," ",S.aggregation_group_type_index!=null?"that":"who"," have this property and did ",Object(e.jsx)("b",{children:"not complete"})," the entire funnel."]}),children:Object(e.jsx)(Ve.a,{className:"column-info"})})]}),render:function(b,w){return z(w)},width:120,align:"center"},"failure_count"),Object(e.jsx)(De.a,{title:"",render:function(b,w){return Object(e.jsx)(ks,{record:w})},align:"center",width:30},"actions")]})]})}):null}var ks=function(n){var s=n.record,o=Object(i.useValues)(h.c),d=o.insightProps,c=Object(pe.a)(d),u=Object(i.useActions)(c),l=u.excludePropertyFromProject,j=u.setFunnelCorrelationDetails,m=Object(i.useValues)(c),O=m.isPropertyExcludedFromProject,f=(s.event.event||"").split("::")[0],E=Object(V.useState)(!1),g=Ie()(E,2),S=g[0],L=g[1];return Object(e.jsx)(de.a,{style:{justifyContent:"flex-end"},children:Object(e.jsx)(Cn.a,{visible:S,actionable:!0,onClickOutside:function(){return L(!1)},overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Ke.a,{onClick:function(){return j(s)},fullWidth:!0,status:"stealth",children:"View correlation details"}),Object(e.jsx)(Ke.a,{disabled:O(f),onClick:function(){return l(f)},fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",status:"stealth",children:"Exclude property from project"})]}),children:Object(e.jsx)(Ke.a,{status:"stealth",onClick:function(){return L(!S)},children:Object(e.jsx)(yn.a,{style:{color:"var(--primary)",fontSize:24},className:"insight-dropdown-actions"})})})})},Hs=function(){var n,s=Object(i.useValues)(h.c),o=s.insightProps,d=Object(i.useValues)(Object(pe.a)(o)),c=d.isSkewed,u=d.stepsWithCount,l=d.correlationFeedbackHidden,j=d.correlationDetailedFeedbackVisible,m=d.correlationFeedbackRating,O=d.correlationAnalysisAvailable,f=d.aggregationTargetLabel,E=Object(i.useActions)(Object(pe.a)(o)),g=E.sendCorrelationAnalysisFeedback,S=E.hideSkewWarning,L=E.hideCorrelationAnalysisFeedback,D=E.setCorrelationFeedbackRating,J=E.setCorrelationDetailedFeedback,A=Object(i.useValues)(Ps.a),ae=A.preflight,te=Object(V.useRef)(null);return u.length<=1?null:!O&&!(ae!=null&&(n=ae.instance_preferences)!==null&&n!==void 0&&n.disable_paid_fs)?Object(e.jsx)(Cs.a,{identifier:a.d.CORRELATION_ANALYSIS,title:"Get a deeper understanding of why your ".concat(f.plural," are not converting"),caption:"Correlation analysis automatically finds signals for why ".concat(f.plural," are converting or dropping off.")}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h2",{style:{margin:"1rem 0"},children:"Correlation analysis"}),Object(e.jsxs)("div",{className:"funnel-correlation",children:[c&&Object(e.jsxs)(je.a,{className:"skew-warning",children:[Object(e.jsxs)("h4",{children:[Object(e.jsx)(Ae.IconFeedbackWarning,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",Object(e.jsx)(_s.a,{className:"close-button",onClick:S})]}),Object(e.jsxs)("div",{children:[Object(e.jsx)("b",{children:"Tips for adjusting your funnel:"}),Object(e.jsxs)("ol",{children:[Object(e.jsx)("li",{children:"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."}),Object(e.jsx)("li",{children:"Choose an event that happens more frequently for subsequent funnels steps."})]})]})]}),Object(e.jsx)(Us,{}),!l&&Object(e.jsxs)("div",{className:"border rounded p-4 space-y-2 mt-4",children:[Object(e.jsxs)("div",{className:"flex items-center justify-between",children:[Object(e.jsxs)("h4",{className:"text-muted-alt",children:[Object(e.jsx)(xs.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?"]}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[!!m&&Object(e.jsx)("i",{className:"text-success mr-2",children:"Thanks for your feedback!"}),[[5,"\u{1F60D}"],[4,"\u{1F600}"],[3,"\u{1F634}"],[2,"\u{1F614}"],[1,"\u{1F44E}"]].map(function(v,N){return Object(e.jsx)(Ce.LemonButton,{active:m===v[0],onClick:function(){m===v[0]?D(0):(D(v[0]),setTimeout(function(){var Q;return(Q=te.current)===null||Q===void 0?void 0:Q.focus()},100))},children:v[1]},N)}),Object(e.jsx)(Ce.LemonButton,{icon:Object(e.jsx)(Ae.IconClose,{}),onClick:L,status:"stealth"})]})]}),j?Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("form",{onSubmit:g,className:"space-y-2",children:[Object(e.jsx)(Ce.LemonTextArea,{onBlur:function(N){return J(N.target.value)},placeholder:"Optional. Help us by sharing details around your experience...",ref:te,onPressCmdEnter:function(){var N;(N=te.current)===null||N===void 0||N.blur(),g()}}),Object(e.jsx)("div",{className:"flex justify-end",children:Object(e.jsx)(Ce.LemonButton,{"data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit",children:"Share feedback"})})]})}):null]}),Object(e.jsx)(zs,{})]})]})},$s=t("./frontend/src/scenes/funnels/Funnel.tsx");function Ys(){var r=Object(i.useValues)(h.c),n=r.insightProps,s=Object(i.useValues)(Object(pe.a)(n)),o=s.isValidFunnel,d=s.insightLoading,c=s.areFiltersValid,u=o&&c||d;return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:Object(Ct.a)("funnel-insights-container",{"non-empty-state":u}),children:Object(e.jsx)($s.a,{})})})}var Gs=t("./frontend/src/lib/components/ExportButton/ExportButton.tsx"),Js=t("./frontend/src/lib/components/AlertMessage/index.ts"),ze,Tn=(ze={},M()(ze,"".concat(a.D.TRENDS),Object(e.jsx)(Ge,{view:a.D.TRENDS})),M()(ze,"".concat(a.D.STICKINESS),Object(e.jsx)(Ge,{view:a.D.STICKINESS})),M()(ze,"".concat(a.D.LIFECYCLE),Object(e.jsx)(Ge,{view:a.D.LIFECYCLE})),M()(ze,"".concat(a.D.FUNNELS),Object(e.jsx)(Ys,{})),M()(ze,"".concat(a.D.RETENTION),Object(e.jsx)(ds.a,{})),M()(ze,"".concat(a.D.PATHS),Object(e.jsx)(us.a,{})),ze);function vt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{disableHeader:!1,disableTable:!1,disableCorrelationTable:!1,disableLastComputation:!1},n=r.disableHeader,s=r.disableTable,o=r.disableCorrelationTable,d=r.disableLastComputation,c=Object(i.useValues)(mn.a),u=c.insightMode,l=Object(i.useValues)(h.c),j=l.insightProps,m=l.canEditInsight,O=l.insightLoading,f=l.activeView,E=l.loadedView,g=l.filters,S=l.showTimeoutMessage,L=l.showErrorMessage,D=l.exporterResourceParams,J=l.isUsingSessionAnalysis,A=Object(i.useValues)(Object(pe.a)(j)),ae=A.areFiltersValid,te=A.isValidFunnel,v=A.areExclusionFiltersValid,N=A.correlationAnalysisAvailable,W=function(){if(f!==E||O&&!S)return Object(e.jsx)("div",{className:"text-center",children:Object(e.jsx)(Os.a,{type:gs.a.LaptopHog})});if(E===a.D.FUNNELS){if(!ae)return Object(e.jsx)(qe.b,{actionable:u===a.E.Edit||s});if(!v)return Object(e.jsx)(qe.a,{});if(!te&&!O)return Object(e.jsx)(qe.c,{})}return L?Object(e.jsx)(qe.d,{}):S?Object(e.jsx)(qe.e,{isLoading:O}):null}();function Q(){return f===a.D.FUNNELS&&!L&&!S&&ae&&te&&g.funnel_viz_type===a.z.Steps&&!s?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h2",{className:"my-4 mx-0",children:"Detailed results"}),Object(e.jsx)(hs,{})]}):(!g.display||(g==null?void 0:g.display)!==a.j.ActionsTable&&(g==null?void 0:g.display)!==a.j.ActionsBarValue)&&f===a.D.TRENDS&&!s?Object(e.jsxs)(e.Fragment,{children:[D&&Object(e.jsxs)("div",{className:"flex items-center justify-between my-4 mx-0",children:[Object(e.jsx)("h2",{className:"m-0",children:"Detailed results"}),Object(e.jsx)(U.a,{title:"Export this table in CSV format",placement:"left",children:Object(e.jsx)(Gs.a,{type:"secondary",status:"primary",items:[{export_format:a.r.CSV,export_context:D}]})})]}),Object(e.jsx)(i.BindLogic,{logic:mt.a,props:j,children:Object(e.jsx)(fn.b,{isLegend:!0,filterKey:f===a.D.TRENDS?"trends_".concat(f):"",canEditSeriesNameInline:f===a.D.TRENDS&&u===a.E.Edit,canCheckUncheckSeries:m})})]}):null}return Object(e.jsxs)(e.Fragment,{children:[J?Object(e.jsx)("div",{className:"mb-4",children:Object(e.jsxs)(Js.a,{type:"info",children:["When using sessions and session properties, events without session IDs will be excluded from the set of results."," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/user-guides/sessions",children:"Learn more about sessions."})]})}):null,Object(e.jsx)(je.a,{title:n?null:Object(e.jsx)(ft,{activeView:f,insightMode:u,filters:g,disableTable:!!s}),"data-attr":"insights-graph",className:"insights-graph-container",children:Object(e.jsxs)("div",{children:[Object(e.jsxs)(de.a,{className:Object(Ct.a)("insights-graph-header",{funnels:f===a.D.FUNNELS}),align:"middle",justify:"space-between",children:[!d&&Object(e.jsx)(Z.a,{children:Object(e.jsx)(is,{})}),Object(e.jsxs)(Z.a,{children:[f===a.D.FUNNELS?Object(e.jsx)(as,{}):null,f===a.D.PATHS?Object(e.jsx)(js,{}):null,Object(e.jsx)(bn.b,{})]})]}),W||((f===a.D.TRENDS||f===a.D.STICKINESS)&&g.show_legend?Object(e.jsxs)(de.a,{className:"insights-graph-container-row",wrap:!1,children:[Object(e.jsx)(Z.a,{className:"insights-graph-container-row-left",children:Tn[f]}),Object(e.jsx)(Z.a,{className:"insights-graph-container-row-right",children:Object(e.jsx)(bn.a,{})})]}):Tn[f])]})}),Q(),!o&&N&&f===a.D.FUNNELS&&Object(e.jsx)(Hs,{})]})}try{vt.displayName="InsightContainer",vt.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}},disableCorrelationTable:{defaultValue:null,description:"",name:"disableCorrelationTable",required:!1,type:{name:"boolean"}},disableLastComputation:{defaultValue:null,description:"",name:"disableLastComputation",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:vt.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(r){}},"./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts":function(oe,C,t){"use strict";t.d(C,"a",function(){return ye});var R=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),M=t.n(R),je=t("./node_modules/core-js/modules/es.array.iterator.js"),de=t.n(je),Z=t("./node_modules/core-js/modules/es.object.to-string.js"),_e=t.n(Z),ce=t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),i=t.n(ce),ve=t("./node_modules/core-js/modules/es.object.keys.js"),Fe=t.n(ve),xe=t("./node_modules/core-js/modules/es.symbol.js"),ie=t.n(xe),V=t("./node_modules/core-js/modules/es.array.filter.js"),he=t.n(V),me=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),Oe=t.n(me),F=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),se=t.n(F),y=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),P=t.n(y),K=t("./node_modules/kea/lib/index.esm.js"),B=t("./frontend/src/scenes/insights/insightLogic.ts"),k=t("./frontend/src/scenes/insights/sharedUtils.ts");function le(G,ne){var x=Object.keys(G);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(G);ne&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(G,I).enumerable})),x.push.apply(x,_)}return x}function ue(G){for(var ne=1;ne<arguments.length;ne++){var x=arguments[ne]!=null?arguments[ne]:{};ne%2?le(Object(x),!0).forEach(function(_){M()(G,_,x[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(x)):le(Object(x)).forEach(function(_){Object.defineProperty(G,_,Object.getOwnPropertyDescriptor(x,_))})}return G}var ye=Object(K.kea)({props:{},key:Object(k.c)("new"),path:function(ne){return["scenes","insights","InsightDateFilter","insightDateFilterLogic",ne]},connect:function(ne){return{actions:[Object(B.c)(ne),["setFilters"]],values:[Object(B.c)(ne),["filters"]]}},actions:function(){return{setDates:function(x,_){return{dateFrom:x,dateTo:_}}}},selectors:{dates:[function(G){return[G.filters]},function(G){return{dateFrom:(G==null?void 0:G.date_from)||null,dateTo:(G==null?void 0:G.date_to)||null}}]},listeners:function(ne){var x=ne.actions,_=ne.values;return{setDates:function(re){var be=re.dateFrom,Ee=re.dateTo;x.setFilters(ue(ue({},_.filters),{},{date_from:be||null,date_to:Ee||null}))}}}})},"./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js":function(oe,C,t){"use strict";var R=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),M=t("./node_modules/react/index.js"),je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},de=je,Z=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),_e=function(ve,Fe){return M.createElement(Z.a,Object(R.a)(Object(R.a)({},ve),{},{ref:Fe,icon:de}))};_e.displayName="OrderedListOutlined";var ce=C.a=M.forwardRef(_e)},"./node_modules/antd/lib/checkbox/Checkbox.js":function(oe,C,t){"use strict";var R=t("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),M=t("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var je=R(t("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),de=R(t("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),Z=ie(t("./node_modules/react/index.js")),_e=R(t("./node_modules/classnames/index.js")),ce=R(t("./node_modules/rc-checkbox/es/index.js")),i=t("./node_modules/antd/lib/checkbox/Group.js"),ve=t("./node_modules/antd/lib/config-provider/index.js"),Fe=R(t("./node_modules/antd/lib/_util/devWarning.js"));function xe(F){if(typeof WeakMap!="function")return null;var se=new WeakMap,y=new WeakMap;return(xe=function(K){return K?y:se})(F)}function ie(F,se){if(!se&&F&&F.__esModule)return F;if(F===null||M(F)!=="object"&&typeof F!="function")return{default:F};var y=xe(se);if(y&&y.has(F))return y.get(F);var P={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)){var k=K?Object.getOwnPropertyDescriptor(F,B):null;k&&(k.get||k.set)?Object.defineProperty(P,B,k):P[B]=F[B]}return P.default=F,y&&y.set(F,P),P}var V=function(F,se){var y={};for(var P in F)Object.prototype.hasOwnProperty.call(F,P)&&se.indexOf(P)<0&&(y[P]=F[P]);if(F!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,P=Object.getOwnPropertySymbols(F);K<P.length;K++)se.indexOf(P[K])<0&&Object.prototype.propertyIsEnumerable.call(F,P[K])&&(y[P[K]]=F[P[K]]);return y},he=function(se,y){var P,K=se.prefixCls,B=se.className,k=se.children,le=se.indeterminate,ue=le===void 0?!1:le,ye=se.style,G=se.onMouseEnter,ne=se.onMouseLeave,x=se.skipGroup,_=x===void 0?!1:x,I=V(se,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),re=Z.useContext(ve.ConfigContext),be=re.getPrefixCls,Ee=re.direction,q=Z.useContext(i.GroupContext),ee=Z.useRef(I.value);Z.useEffect(function(){q==null||q.registerValue(I.value),(0,Fe.default)("checked"in I||!!q||!("value"in I),"Checkbox","`value` is not a valid prop, do you mean `checked`?")},[]),Z.useEffect(function(){if(!_)return I.value!==ee.current&&(q==null||q.cancelValue(ee.current),q==null||q.registerValue(I.value)),function(){return q==null?void 0:q.cancelValue(I.value)}},[I.value]);var a=be("checkbox",K),h=(0,de.default)({},I);q&&!_&&(h.onChange=function(){I.onChange&&I.onChange.apply(I,arguments),q.toggleOption&&q.toggleOption({label:k,value:I.value})},h.name=q.name,h.checked=q.value.indexOf(I.value)!==-1,h.disabled=I.disabled||q.disabled);var U=(0,_e.default)((P={},(0,je.default)(P,"".concat(a,"-wrapper"),!0),(0,je.default)(P,"".concat(a,"-rtl"),Ee==="rtl"),(0,je.default)(P,"".concat(a,"-wrapper-checked"),h.checked),(0,je.default)(P,"".concat(a,"-wrapper-disabled"),h.disabled),P),B),we=(0,_e.default)((0,je.default)({},"".concat(a,"-indeterminate"),ue));return Z.createElement("label",{className:U,style:ye,onMouseEnter:G,onMouseLeave:ne},Z.createElement(ce.default,(0,de.default)({},h,{prefixCls:a,className:we,ref:y})),k!==void 0&&Z.createElement("span",null,k))},me=Z.forwardRef(he);me.displayName="Checkbox";var Oe=me;C.default=Oe},"./node_modules/antd/lib/checkbox/Group.js":function(oe,C,t){"use strict";var R=t("./node_modules/antd/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),M=t("./node_modules/antd/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.GroupContext=void 0;var je=R(t("./node_modules/antd/node_modules/@babel/runtime/helpers/extends.js")),de=R(t("./node_modules/antd/node_modules/@babel/runtime/helpers/defineProperty.js")),Z=R(t("./node_modules/antd/node_modules/@babel/runtime/helpers/toConsumableArray.js")),_e=R(t("./node_modules/antd/node_modules/@babel/runtime/helpers/slicedToArray.js")),ce=V(t("./node_modules/react/index.js")),i=R(t("./node_modules/classnames/index.js")),ve=R(t("./node_modules/antd/node_modules/rc-util/lib/omit.js")),Fe=R(t("./node_modules/antd/lib/checkbox/Checkbox.js")),xe=t("./node_modules/antd/lib/config-provider/index.js");function ie(y){if(typeof WeakMap!="function")return null;var P=new WeakMap,K=new WeakMap;return(ie=function(k){return k?K:P})(y)}function V(y,P){if(!P&&y&&y.__esModule)return y;if(y===null||M(y)!=="object"&&typeof y!="function")return{default:y};var K=ie(P);if(K&&K.has(y))return K.get(y);var B={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in y)if(le!=="default"&&Object.prototype.hasOwnProperty.call(y,le)){var ue=k?Object.getOwnPropertyDescriptor(y,le):null;ue&&(ue.get||ue.set)?Object.defineProperty(B,le,ue):B[le]=y[le]}return B.default=y,K&&K.set(y,B),B}var he=function(y,P){var K={};for(var B in y)Object.prototype.hasOwnProperty.call(y,B)&&P.indexOf(B)<0&&(K[B]=y[B]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,B=Object.getOwnPropertySymbols(y);k<B.length;k++)P.indexOf(B[k])<0&&Object.prototype.propertyIsEnumerable.call(y,B[k])&&(K[B[k]]=y[B[k]]);return K},me=ce.createContext(null);C.GroupContext=me;var Oe=function(P,K){var B=P.defaultValue,k=P.children,le=P.options,ue=le===void 0?[]:le,ye=P.prefixCls,G=P.className,ne=P.style,x=P.onChange,_=he(P,["defaultValue","children","options","prefixCls","className","style","onChange"]),I=ce.useContext(xe.ConfigContext),re=I.getPrefixCls,be=I.direction,Ee=ce.useState(_.value||B||[]),q=(0,_e.default)(Ee,2),ee=q[0],a=q[1],h=ce.useState([]),U=(0,_e.default)(h,2),we=U[0],Ce=U[1];ce.useEffect(function(){"value"in _&&a(_.value||[])},[_.value]);var e=function(){return ue.map(function(Se){return typeof Se=="string"?{label:Se,value:Se}:Se})},Ne=function(Se){Ce(function($e){return $e.filter(function(Ye){return Ye!==Se})})},He=function(Se){Ce(function($e){return[].concat((0,Z.default)($e),[Se])})},Qe=function(Se){var $e=ee.indexOf(Se.value),Ye=(0,Z.default)(ee);$e===-1?Ye.push(Se.value):Ye.splice($e,1),"value"in _||a(Ye);var xt=e();x==null||x(Ye.filter(function(nt){return we.indexOf(nt)!==-1}).sort(function(nt,Kt){var Ut=xt.findIndex(function(st){return st.value===nt}),Wt=xt.findIndex(function(st){return st.value===Kt});return Ut-Wt}))},tt=re("checkbox",ye),Ie="".concat(tt,"-group"),Vt=(0,ve.default)(_,["value","disabled"]);ue&&ue.length>0&&(k=e().map(function(Pe){return ce.createElement(Fe.default,{prefixCls:tt,key:Pe.value.toString(),disabled:"disabled"in Pe?Pe.disabled:_.disabled,value:Pe.value,checked:ee.indexOf(Pe.value)!==-1,onChange:Pe.onChange,className:"".concat(Ie,"-item"),style:Pe.style},Pe.label)}));var Bt={toggleOption:Qe,value:ee,disabled:_.disabled,name:_.name,registerValue:He,cancelValue:Ne},wt=(0,i.default)(Ie,(0,de.default)({},"".concat(Ie,"-rtl"),be==="rtl"),G);return ce.createElement("div",(0,je.default)({className:wt,style:ne},Vt,{ref:K}),ce.createElement(me.Provider,{value:Bt},k))},F=ce.forwardRef(Oe),se=ce.memo(F);C.default=se},"./node_modules/antd/lib/table/Column.js":function(oe,C,t){"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;function R(je){return null}var M=R;C.default=M},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss":function(oe,C,t){var R=t("./node_modules/css-loader/dist/runtime/api.js");C=R(!1),C.push([oe.i,".inline-message{background-color:var(--bg-mid);border-radius:var(--radius);padding:.5rem 1rem;font-weight:var(--font-medium);display:flex;align-items:center;color:var(--primary-alt)}.inline-message.danger{background-color:var(--danger-highlight);color:var(--danger)}.inline-message.closable{padding-right:.5rem}.inline-message.hidden{display:none}.inline-message .inline-icon{margin-right:6px;display:flex;align-items:center}.inline-message .inline-main{flex-grow:1}.inline-message .closable{color:var(--muted);align-self:flex-start;padding-left:1rem;cursor:pointer}",""]),oe.exports=C},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/UnitPicker/UnitPicker.scss":function(oe,C,t){var R=t("./node_modules/css-loader/dist/runtime/api.js");C=R(!1),C.push([oe.i,".UnitPopup{width:20rem}",""]),oe.exports=C},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/funnels/FunnelCanvasLabel.scss":function(oe,C,t){var R=t("./node_modules/css-loader/dist/runtime/api.js");C=R(!1),C.push([oe.i,".insights-graph-header.funnels{border-bottom:1px solid var(--border)}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link{padding:0}.insights-graph-header.funnels .funnel-canvas-label .ant-btn-link:disabled{cursor:default;color:var(--default)}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-label{padding:4px}.insights-graph-header.funnels .funnel-canvas-label .funnel-options-inputs{align-items:center;padding:4px}",""]),oe.exports=C},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss":function(oe,C,t){var R=t("./node_modules/css-loader/dist/runtime/api.js");C=R(!1),C.push([oe.i,".correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:var(--radius);border:1px solid var(--border);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid var(--border);border-top:1px solid var(--border);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:var(--muted-alt)}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:var(--antd-table-background-dark);text-transform:uppercase;color:var(--muted)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),oe.exports=C},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss":function(oe,C,t){var R=t("./node_modules/css-loader/dist/runtime/api.js");C=R(!1),C.push([oe.i,".funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid var(--warning)}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid var(--border);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:var(--muted)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:var(--font-medium)}",""]),oe.exports=C},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss":function(oe,C,t){var R=t("./node_modules/css-loader/dist/runtime/api.js");C=R(!1),C.push([oe.i,".funnel-correlation-table{margin-top:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-self:stretch;justify-content:space-between;align-content:space-between;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius);padding-bottom:5px}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;padding-bottom:4px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:var(--default);margin-left:1rem;margin-top:.5rem}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center;margin-top:5px}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:var(--muted-alt);cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .nested-properties-loading{text-align:center;padding:2rem 0}.funnel-correlation-table .nested-properties-loading h3{font-size:1rem;font-weight:700;margin-bottom:0}.funnel-correlation-table .nested-properties-loading h3 p{color:var(--muted-alt)}",""]),oe.exports=C}}]);
