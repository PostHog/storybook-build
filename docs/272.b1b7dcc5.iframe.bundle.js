var Ws=Object.defineProperty,Gs=Object.defineProperties;var Ks=Object.getOwnPropertyDescriptors;var Vt=Object.getOwnPropertySymbols;var Fn=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable;var Pn=(y,h,n)=>h in y?Ws(y,h,{enumerable:!0,configurable:!0,writable:!0,value:n}):y[h]=n,z=(y,h)=>{for(var n in h||(h={}))Fn.call(h,n)&&Pn(y,n,h[n]);if(Vt)for(var n of Vt(h))Cn.call(h,n)&&Pn(y,n,h[n]);return y},oe=(y,h)=>Gs(y,Ks(h));var Tn=(y,h)=>{var n={};for(var f in y)Fn.call(y,f)&&h.indexOf(f)<0&&(n[f]=y[f]);if(y!=null&&Vt)for(var f of Vt(y))h.indexOf(f)<0&&Cn.call(y,f)&&(n[f]=y[f]);return n};var Re=(y,h,n)=>new Promise((f,o)=>{var k=j=>{try{R(n.next(j))}catch(F){o(F)}},L=j=>{try{R(n.throw(j))}catch(F){o(F)}},R=j=>j.done?f(j.value):Promise.resolve(j.value).then(k,L);R((n=n.apply(y,h)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[272],{"./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx":function(y,h,n){"use strict";n.d(h,"a",function(){return Y});var f=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),o=n.n(f),k=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),L=n("./frontend/src/lib/components/LemonButton/index.ts"),R=n("./frontend/src/lib/components/LemonDivider/index.ts"),j=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),F=n.n(j);function Y(ee){let{item:D,onComplete:w,onClose:X}=ee;const[ce,le]=Object(f.useState)(D.alias),[N,M]=Object(f.useState)(D.regex);return Object(j.jsxs)("div",{className:"px-2",children:[Object(j.jsx)("b",{children:"New Wildcard"}),Object(j.jsx)(R.a,{}),Object(j.jsxs)("div",{className:"space-y-2",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Alias"}),Object(j.jsx)(k.a,{defaultValue:ce,onChange:P=>le(P),onPressEnter:()=>!1})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Regex"}),Object(j.jsx)(k.a,{defaultValue:N,onChange:P=>M(P),onPressEnter:()=>!1}),Object(j.jsxs)("div",{className:"text-muted",style:{marginBottom:12},children:["For example: ",Object(j.jsx)("code",{children:"\\/merchant\\/\\d+\\/dashboard$"})]})]})]}),Object(j.jsxs)("div",{className:"flex justify-end gap-2",children:[Object(j.jsx)(L.a,{type:"secondary",onClick:X,children:"Cancel"}),Object(j.jsx)(L.a,{type:"primary",onClick:()=>w({alias:ce,regex:N}),children:"Save"})]})]})}try{Y.displayName="PathRegexPopup",Y.__docgenInfo={description:"",displayName:"PathRegexPopup",props:{onComplete:{defaultValue:null,description:"",name:"onComplete",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"]={docgenInfo:Y.__docgenInfo,name:"PathRegexPopup",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"})}catch(ee){}},"./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx":function(y,h,n){"use strict";n.d(h,"a",function(){return j});var f=n("./frontend/src/scenes/actions/Actions.scss"),o=n("./frontend/src/lib/components/PropertyFilters/components/FilterRow.tsx"),k=n("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx"),L=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),R=n.n(L);function j(F){let{pageKey:Y,onChange:ee,onRemove:D,pathCleaningFilters:w,showConditionBadge:X=!1,disablePopover:ce=!1}=F;return Object(L.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:w.length>0&&w.map((le,N)=>Object(L.jsx)(o.a,{item:le,index:N,totalCount:w.length-1,filters:w,pageKey:Y,showConditionBadge:X,disablePopover:ce,label:"Add rule",onRemove:D,filterComponent:M=>Object(L.jsx)(k.a,{item:le,onClose:M,onComplete:P=>{ee(P),M()}})},N))})}try{j.displayName="PathCleanFilters",j.__docgenInfo={description:"",displayName:"PathCleanFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(index: number) => void"}},pathCleaningFilters:{defaultValue:null,description:"",name:"pathCleaningFilters",required:!0,type:{name:"Record<string, any>[]"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},showConditionBadge:{defaultValue:{value:"false"},description:"",name:"showConditionBadge",required:!1,type:{name:"boolean"}},disablePopover:{defaultValue:{value:"false"},description:"",name:"disablePopover",required:!1,type:{name:"boolean"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"]={docgenInfo:j.__docgenInfo,name:"PathCleanFilters",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"})}catch(F){}},"./frontend/src/scenes/dashboard/NewDashboardModal.tsx":function(y,h,n){"use strict";n.d(h,"a",function(){return O});var f=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),o=n("./frontend/src/lib/forms/Field.tsx"),k=n("./frontend/src/lib/components/LemonButton/index.ts"),L=n("./frontend/src/types.ts"),R=n("./frontend/src/lib/components/LemonSelect.tsx"),j=n("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),F=n("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),Y=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),ee=n("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx"),D=n("./frontend/src/scenes/dashboard/DashboardCollaborators.tsx"),w=n("./frontend/src/lib/components/LemonModal/index.ts"),X=n("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),ce=n.n(X),le=n("./frontend/src/lib/logic/featureFlagLogic.ts"),N=n("./frontend/src/lib/constants.tsx"),M=n("./frontend/src/scenes/userLogic.ts"),P=n("./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),S=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),x=n.n(S);function O(){const{hideNewDashboardModal:c,createAndGoToDashboard:E}=Object(f.useActions)(F.a),{isNewDashboardSubmitting:T,newDashboardModalVisible:U}=Object(f.useValues)(F.a),{hasAvailableFeature:ne}=Object(f.useValues)(M.a),{templatesList:Ce}=Object(f.useValues)(P.a),{featureFlags:Te}=Object(f.useValues)(le.a),pe=!!Te[N.i.DASHBOARD_TEMPLATES]?Ce:[{value:"DEFAULT_APP",label:"Product analytics","data-attr":"dashboard-select-default-app"}];return Object(S.jsx)(w.a,{title:"New dashboard",description:"Use dashboards to compose multiple insights into a single view.",onClose:c,isOpen:U,footer:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(k.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",disabled:T,onClick:c,children:"Cancel"}),Object(S.jsx)(k.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-submit-and-go",disabled:T,onClick:E,children:"Create and go to dashboard"}),Object(S.jsx)(k.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:T,disabled:T,children:"Create"})]}),children:Object(S.jsxs)(X.Form,{logic:F.a,formKey:"newDashboard",id:"new-dashboard-form",enableFormOnSubmit:!0,className:"space-y-2",children:[Object(S.jsx)(o.a,{name:"name",label:"Name",children:Object(S.jsx)(Y.a,{autoFocus:!0,"data-attr":"dashboard-name-input",className:"ph-ignore-input"})}),ne(L.e.DASHBOARD_COLLABORATION)?Object(S.jsx)(o.a,{name:"description",label:"Description",showOptional:!0,children:Object(S.jsx)(ee.a,{"data-attr":"dashboard-description-input",className:"ph-ignore-input"})}):null,Object(S.jsx)(o.a,{name:"useTemplate",label:"Template",showOptional:!0,children:Object(S.jsx)(R.a,{placeholder:"Optionally start from template",allowClear:!0,options:pe,fullWidth:!0,"data-attr":"copy-from-template"})}),Object(S.jsx)(o.a,{name:"restrictionLevel",label:"Collaboration settings",children:te=>{let{value:B,onChange:je}=te;return Object(S.jsx)(j.a,{feature:L.e.DASHBOARD_PERMISSIONING,children:Object(S.jsx)(R.a,{value:B,onChange:je,options:D.a,fullWidth:!0})})}})]})})}},"./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx":function(y,h,n){"use strict";n.d(h,"a",function(){return R});var f=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),o=n("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),k=n.n(o),L=n("./frontend/src/lib/api.ts");const R=Object(f.kea)([Object(f.path)(["scenes","dashboard","dashboards","templates","dashboardTemplatesLogic"]),Object(o.loaders)({repository:[{},{loadRepository:()=>Re(this,null,function*(){const j=yield L.b.get("api/projects/@current/dashboard_templates/repository"),F={};for(const Y of j)Y.url&&(F[Y.url.replace(/\/+$/,"")]=Y);return F})}],template:[null,{installTemplate:j=>Re(this,null,function*(){return yield L.b.create("api/projects/@current/dashboard_templates/",j)})}]}),Object(f.reducers)(()=>({templatesList:[[],{loadRepositorySuccess:(j,F)=>{let{repository:Y}=F;return Object.values(Y).map(ee=>({value:ee.name,label:ee.name,"data-attr":`dashboard-select-${ee.name.replace(" ","-")}`}))}}]})),Object(f.listeners)(j=>{let{actions:F}=j;return{installTemplateSuccess:()=>F.loadRepository()}}),Object(f.afterMount)(j=>{let{actions:F}=j;F.loadRepository()})])},"./frontend/src/scenes/insights/InsightScene.tsx":function(y,h,n){"use strict";n.r(h),n.d(h,"InsightScene",function(){return En}),n.d(h,"scene",function(){return Vs});var f=n("./frontend/src/scenes/insights/insightSceneLogic.tsx"),o=n("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),k=n("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),L=n.n(k),R=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss"),j=n.n(R),F={};F.insert="head",F.singleton=!1;var Y=L()(j.a,F),ee=j.a.locals||{},D=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),w=n("./frontend/src/scenes/insights/insightLogic.ts"),X=n("./frontend/src/lib/components/CommandPalette/commandPaletteLogic.ts"),ce=n("./frontend/src/lib/components/CompareFilter/compareFilterLogic.ts"),le=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),N=n("./frontend/src/lib/utils.tsx"),M=n("./frontend/src/scenes/insights/sharedUtils.ts"),P=n("./frontend/src/scenes/insights/filters/InsightDateFilter/insightDateFilterLogic.ts");const S="insights",x=Object(o.kea)({props:{},key:Object(M.l)("new"),path:t=>["scenes","insights","insightCommandLogic",t],connect:t=>[X.a,Object(ce.a)(t),Object(P.a)(t)],events:t=>{let{props:s}=t;return{afterMount:()=>{const a=[{key:"insight-graph",resolver:[{icon:le.a,display:'Toggle "Compare Previous" on Graph',executor:()=>{Object(ce.a)(s).actions.toggleCompare()}},...N.u.map(i=>{let{key:r,values:l}=i;return{icon:le.a,display:`Set Time Range to ${r}`,executor:()=>{Object(P.a)(s).actions.setDates(l[0],l[1])}}})],scope:S}];for(const i of a)X.a.actions.registerCommand(i)},beforeUnmount:()=>{X.a.actions.deregisterScope(S)}}}});var O=n("./frontend/src/scenes/insights/insightDataLogic.ts"),c=n("./frontend/src/types.ts"),E=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/button/index.js"),T=n("./frontend/src/lib/constants.tsx"),U=n("./frontend/src/lib/logic/featureFlagLogic.ts"),ne=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Te=Ce,De=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),pe=function(s,a){return D.createElement(De.a,Object(ne.a)(Object(ne.a)({},s),{},{ref:a,icon:Te}))};pe.displayName="ArrowLeftOutlined";var te=D.forwardRef(pe),B=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),je=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/experimental/NPSPrompt.scss"),Ne=n.n(je),Ae={};Ae.insert="head",Ae.singleton=!1;var W=L()(Ne.a,Ae),ve=Ne.a.locals||{},ae=n("./node_modules/.pnpm/posthog-js@1.39.4/node_modules/posthog-js/dist/es.js"),me=n.p+"images/nps.01f8251908e72335482be26ee661ccc7.svg",ye=n("./frontend/src/scenes/userLogic.ts"),Ve=n("./frontend/src/lib/dayjs.ts"),H=n("./frontend/@posthog/lemon-ui/src/index.ts"),e=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const Mt=1e4,kt=3500,Xe="experimental-nps-v8",Be=Object(o.kea)({path:["lib","experimental","NPSPrompt"],selectors:{featureFlagEnabled:[()=>[U.a.selectors.featureFlags],t=>t[T.i.NPS_PROMPT]],userIsOldEnough:[()=>[ye.a.selectors.user],t=>t&&Object(Ve.a)(t.date_joined).isBefore(Object(Ve.a)().add(-15,"day"))],npsPromptEnabled:[t=>[t.featureFlagEnabled,t.userIsOldEnough],(t,s)=>t&&s]},actions:{show:!0,hide:!0,setStep:t=>({step:t}),stepBack:!0,setPayload:t=>({payload:t}),submit:t=>({completed:t}),dismiss:!0,send:t=>({result:t})},reducers:{step:[0,{setStep:(t,s)=>{let{step:a}=s;return a},stepBack:t=>Math.max(t-1,0),submit:()=>3,setPayload:(t,s)=>{let{payload:a}=s;return t===0&&typeof(a==null?void 0:a.score)!="undefined"?1:t}}],hidden:[!0,{show:()=>!1,hide:()=>!0}],payload:[null,{setPayload:(t,s)=>{let{payload:a}=s;return z(z({},t),a)}}]},listeners:t=>{let{values:s,actions:a,cache:i}=t;return{stepBack:()=>{s.step===1&&a.setPayload(null)},dismiss:()=>{var r;const l=typeof((r=s.payload)===null||r===void 0?void 0:r.score)!="undefined"?"partial":"dismissed";a.hide(),a.send(l)},submit:r=>{let{completed:l}=r;const d=l?"completed":"partial";a.send(d),i.timeout=window.setTimeout(()=>a.hide(),kt)},send:r=>{let{result:l}=r;ae.a.capture("nps feedback",oe(z({},s.payload),{result:l})),ae.a.people.set({nps_2106:!0}),localStorage.setItem(Xe,"true")},show:()=>{ae.a.capture("nps modal shown")}}},events:t=>{let{actions:s,values:a,cache:i}=t;return{afterMount:()=>{a.npsPromptEnabled&&!localStorage.getItem(Xe)&&(i.timeout=window.setTimeout(()=>s.show(),Mt))},beforeUnmount:()=>{window.clearTimeout(i.timeout)}}}});function We(){const{setStep:t,setPayload:s,stepBack:a,submit:i,dismiss:r}=Object(o.useActions)(Be),{step:l,payload:d,hidden:m,npsPromptEnabled:u}=Object(o.useValues)(Be);if(!u)return null;const p=Object(e.jsxs)("div",{className:"nps-header",children:[Object(e.jsx)("div",{className:"cursor-pointer",onClick:a,children:Object(e.jsx)(te,{})}),Object(e.jsx)("div",{className:"nps-progress",children:[0,1,2].map(g=>Object(e.jsx)("div",{className:`pg-item${g<=l?" completed":""}`},g))})]});return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:`nps-prompt${m?" hide":""}`,children:[Object(e.jsx)("span",{className:"nps-dismiss",onClick:r,children:Object(e.jsx)(B.a,{})}),Object(e.jsxs)("div",{className:"prompt-inner",children:[l===0&&Object(e.jsxs)("div",{"data-attr":"nps-step-0",children:[Object(e.jsx)("div",{className:"prompt-title",children:"Help us improve PostHog in less than 60 seconds \u{1F64F}"}),Object(e.jsx)("div",{className:"question",children:"How would you feel if you could no longer use PostHog?"}),Object(e.jsxs)("div",{className:"action-buttons",children:[Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>s({score:1}),children:"Not disappointed"}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>s({score:3}),children:"Somewhat disappointed"}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>s({score:5}),children:"Very disappointed"})]})]}),l===1&&Object(e.jsxs)("div",{"data-attr":"nps-step-1",children:[p,Object(e.jsx)("div",{className:"question",children:"What's the main reason behind this score?"}),Object(e.jsx)(H.LemonTextArea,{autoFocus:!0,placeholder:"You can describe the key benefits you get from PostHog, shortcomings or anything else...",value:(d==null?void 0:d.feedback_score)||"",onChange:g=>s({feedback_score:g}),onKeyDown:g=>g.key==="Enter"&&g.metaKey&&t(2)}),Object(e.jsxs)("div",{style:{textAlign:"left"},className:"mt-4",children:[Object(e.jsx)(E.a,{type:"link",style:{paddingLeft:0},onClick:()=>i(!1),children:"Finish"}),Object(e.jsx)(E.a,{style:{float:"right"},onClick:()=>t(2),children:"Continue"})]})]}),l===2&&Object(e.jsxs)("div",{"data-attr":"nps-step-2",children:[p,Object(e.jsx)("div",{className:"question",children:"Last one. What type of person or company do you think could benefit most from PostHog?"}),Object(e.jsx)(H.LemonTextArea,{autoFocus:!0,placeholder:"You can describe their role, background, company or team size, ...",value:(d==null?void 0:d.feedback_persona)||"",onChange:g=>s({feedback_persona:g}),onKeyDown:g=>g.key==="Enter"&&g.metaKey&&i(!0)}),Object(e.jsx)("div",{style:{textAlign:"left"},className:"mt-4",children:Object(e.jsx)(E.a,{style:{float:"right"},onClick:()=>i(!0),children:"Finish"})})]}),l===3&&Object(e.jsxs)("div",{"data-attr":"nps-step-2",style:{display:"flex",alignItems:"center"},children:[Object(e.jsx)("img",{src:me,alt:"",height:40}),Object(e.jsx)("div",{className:"prompt-title",style:{margin:0},children:"Thanks for helping us improve PostHog!"})]})]})]})})}var Bt=n("./frontend/src/scenes/insights/InsightsNav.tsx"),Oe=n("./frontend/src/lib/components/Tooltip.tsx"),he=n("./frontend/src/models/dashboardsModel.tsx"),ie=n("./frontend/src/lib/utils/eventUsageLogic.ts"),de=n("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),xe=n("./node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js"),ge=n("./frontend/src/lib/components/lemonToast.tsx"),_e=n("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),fe=n("./frontend/src/scenes/urls.ts");const Ze=Object(o.kea)({path:["lib","components","AddToDashboard","saveToDashboardModalLogic"],props:{},key:t=>{let{insight:s}=t;if(!s.short_id)throw Error("must provide an insight with a short id");return s.short_id},connect:t=>({logic:[he.a],actions:[Object(w.c)({dashboardItemId:t.insight.short_id}),["updateInsight","updateInsightSuccess","updateInsightFailure"],ie.e,["reportSavedInsightToDashboard","reportRemovedInsightFromDashboard","reportCreatedDashboardFromModal"],de.a,["showNewDashboardModal"]]}),actions:{addNewDashboard:!0,setDashboardId:t=>({id:t}),setSearchQuery:t=>({query:t}),setInsight:t=>({insight:t}),setScrollIndex:t=>({index:t}),addToDashboard:(t,s)=>({insight:t,dashboardId:s}),removeFromDashboard:(t,s)=>({insight:t,dashboardId:s})},reducers:{_dashboardId:[null,{setDashboardId:(t,s)=>{let{id:a}=s;return a}}],searchQuery:["",{setSearchQuery:(t,s)=>{let{query:a}=s;return a}}],scrollIndex:[-1,{setScrollIndex:(t,s)=>{let{index:a}=s;return a}}],dashboardWithActiveAPICall:[null,{addToDashboard:(t,s)=>{let{dashboardId:a}=s;return a},removeFromDashboard:(t,s)=>{let{dashboardId:a}=s;return a},updateInsightSuccess:()=>null,updateInsightFailure:()=>null}]},selectors:{dashboardId:[t=>[t._dashboardId,he.a.selectors.lastDashboardId,he.a.selectors.nameSortedDashboards,(s,a)=>a.fromDashboard],(t,s,a,i)=>t||i||s||(a.length>0?a[0].id:null)],dashboardsFuse:[()=>[he.a.selectors.nameSortedDashboards],t=>new xe.a(t||[],{keys:["name","description","tags"],threshold:.3})],filteredDashboards:[t=>[t.searchQuery,t.dashboardsFuse,he.a.selectors.nameSortedDashboards],(t,s,a)=>t.length?s.search(t).map(i=>i.item):a],currentDashboards:[t=>[t.filteredDashboards,(s,a)=>a.insight],(t,s)=>t.filter(a=>{var i;return(i=s.dashboards)===null||i===void 0?void 0:i.includes(a.id)})],availableDashboards:[t=>[t.filteredDashboards,(s,a)=>a.insight],(t,s)=>t.filter(a=>{var i;return!((i=s.dashboards)!==null&&i!==void 0&&i.includes(a.id))})],orderedDashboards:[t=>[t.currentDashboards,t.availableDashboards],(t,s)=>[...t,...s]]},listeners:t=>{let{actions:s,values:a,props:i}=t;return{setDashboardId:r=>{let{id:l}=r;he.a.actions.setLastDashboardId(l)},addNewDashboard:()=>Re(this,null,function*(){s.showNewDashboardModal()}),[he.a.actionTypes.addDashboardSuccess]:r=>Re(this,null,function*(){let{dashboard:l}=r;s.reportCreatedDashboardFromModal(),s.setDashboardId(l.id),s.addToDashboard(i.insight,l.id),s.setScrollIndex(a.orderedDashboards.findIndex(d=>d.id===l.id))}),addToDashboard:r=>Re(this,null,function*(){let{insight:l,dashboardId:d}=r;s.updateInsight(oe(z({},l),{dashboards:[...l.dashboards||[],d]}),()=>{s.reportSavedInsightToDashboard(),he.a.actions.tileAddedToDashboard(d),ge.d.success("Insight added to dashboard",{button:{label:"View dashboard",action:()=>_e.router.actions.push(fe.a.dashboard(d))}})})}),removeFromDashboard:r=>Re(this,null,function*(){let{insight:l,dashboardId:d}=r;s.updateInsight(oe(z({},l),{dashboards:(l.dashboards||[]).filter(m=>m!==d)}),()=>{s.reportRemovedInsightFromDashboard(),ge.d.success("Insight removed from dashboard")})})}}});var Wt=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss"),et=n.n(Wt),Ie={};Ie.insert="head",Ie.singleton=!1;var zs=L()(et.a,Ie),Us=et.a.locals||{},re=n("./frontend/src/lib/components/icons.tsx"),An=n("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),In=n("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/List/index.js"),Ln=n("./node_modules/.pnpm/react-virtualized@9.22.3_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-virtualized/dist/es/AutoSizer/index.js"),Q=n("./frontend/src/lib/components/LemonButton/index.ts"),ln=n("./frontend/src/lib/components/Link.tsx"),Ge=n("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),Gt=n("./frontend/src/scenes/teamLogic.tsx"),wn=n("./frontend/src/lib/components/LemonModal/index.ts");const Rn=t=>{var s;let{style:a,isHighlighted:i,isAlreadyOnDashboard:r,dashboard:l,insight:d,canEditInsight:m}=t;const u=Ze({insight:d,fromDashboard:((s=d.dashboards)===null||s===void 0?void 0:s[0])||void 0}),{addToDashboard:p,removeFromDashboard:g}=Object(o.useActions)(u),{dashboardWithActiveAPICall:v}=Object(o.useValues)(u),{currentTeam:C}=Object(o.useValues)(Gt.a),V=l.id===(C==null?void 0:C.primary_dashboard);return Object(e.jsxs)("div",{"data-attr":"dashboard-list-item",style:a,className:Object(Ge.default)("flex items-center space-x-2",i&&"highlighted"),children:[Object(e.jsx)(ln.a,{to:fe.a.dashboard(l.id),children:l.name||"Untitled"}),V&&Object(e.jsx)(Oe.a,{title:"Primary dashboards are shown on the project home page",children:Object(e.jsx)(re.IconCottage,{className:"text-warning text-base"})}),Object(e.jsx)("span",{className:"grow"}),Object(e.jsx)(Q.a,{type:r?"primary":"secondary",loading:v===l.id,disabled:!!v||!m,size:"small",onClick:b=>{b.preventDefault(),r?g(d,l.id):p(d,l.id)},children:r?"Added":"Add to dashboard"})]})};function tt(t){var s,a,i;let{isOpen:r,closeModal:l,insight:d,canEditInsight:m}=t;const u=Ze({insight:d,fromDashboard:((s=d.dashboards)===null||s===void 0?void 0:s[0])||void 0}),{searchQuery:p,currentDashboards:g,orderedDashboards:v,scrollIndex:C}=Object(o.useValues)(u),{setSearchQuery:V,addNewDashboard:b}=Object(o.useActions)(u),$=_=>{let{index:I,style:q}=_;return Object(e.jsx)(Rn,{dashboard:v[I],insight:d,canEditInsight:m,isHighlighted:I===C,isAlreadyOnDashboard:g.some(K=>K.id===v[I].id),style:q},I)};return Object(e.jsx)(wn.a,{onClose:l,isOpen:r,title:"Add to dashboard",footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{className:"flex-1",children:Object(e.jsx)(Q.a,{type:"secondary",onClick:b,disabled:!m,children:"Add to a new dashboard"})}),Object(e.jsx)(Q.a,{type:"secondary",onClick:l,children:"Close"})]}),children:Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(An.a,{"data-attr":"dashboard-searchfield",type:"search",fullWidth:!0,placeholder:"Search for dashboards...",value:p,onChange:_=>V(_)}),Object(e.jsxs)("div",{className:"text-muted-alt",children:["This insight is referenced on ",Object(e.jsx)("strong",{className:"text-default",children:(a=d.dashboards)===null||a===void 0?void 0:a.length})," ",Object(N.vb)(((i=d.dashboards)===null||i===void 0?void 0:i.length)||0,"dashboard","dashboards",!1)]}),Object(e.jsx)("div",{style:{minHeight:420},children:Object(e.jsx)(Ln.a,{children:_=>{let{height:I,width:q}=_;return Object(e.jsx)(In.a,{width:q,height:I,rowCount:v.length,overscanRowCount:100,rowHeight:40,rowRenderer:$,scrollToIndex:C})}})})]})})}try{tt.displayName="AddToDashboardModal",tt.__docgenInfo={description:"",displayName:"AddToDashboardModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},closeModal:{defaultValue:null,description:"",name:"closeModal",required:!0,type:{name:"() => void"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"]={docgenInfo:tt.__docgenInfo,name:"AddToDashboardModal",path:"frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx#AddToDashboardModal"})}catch(t){}var Dn=n("./frontend/src/scenes/dashboard/NewDashboardModal.tsx");function nt(t){var s;let{insight:a,canEditInsight:i}=t;const[r,l]=Object(D.useState)(!1),{rawDashboards:d}=Object(o.useValues)(he.a),m=((s=a.dashboards)===null||s===void 0?void 0:s.map(u=>d[u]).filter(u=>!!u))||[];return Object(e.jsxs)("span",{className:"save-to-dashboard","data-attr":"save-to-dashboard-button",children:[Object(e.jsx)(tt,{isOpen:r,closeModal:()=>l(!1),insight:a,canEditInsight:i}),Object(e.jsx)(Dn.a,{}),Object(e.jsx)(Q.a,{onClick:()=>l(!0),type:"secondary",icon:Object(e.jsx)(re.IconWithCount,{count:m.length,showZero:!1,children:Object(e.jsx)(re.IconGauge,{})}),children:"Add to dashboard"})]})}try{nt.displayName="AddToDashboard",nt.__docgenInfo={description:"",displayName:"AddToDashboard",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},canEditInsight:{defaultValue:null,description:"",name:"canEditInsight",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"]={docgenInfo:nt.__docgenInfo,name:"AddToDashboard",path:"frontend/src/lib/components/AddToDashboard/AddToDashboard.tsx#AddToDashboard"})}catch(t){}var Nn=n("./frontend/src/scenes/insights/InsightContainer.tsx"),dn=n("./frontend/src/lib/components/EditableField/EditableField.tsx"),cn=n("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx");function st(t){let{saveAs:s,saveInsight:a,isSaved:i,insightSaving:r,insightChanged:l,addingToDashboard:d}=t;const m=i&&!l,u=i&&!d;return Object(e.jsx)(Q.c,{type:"primary",onClick:()=>a(!0),"data-attr":"insight-save-button",disabled:m,loading:!m&&r,sideAction:{popup:{placement:"bottom-end",overlay:Object(e.jsxs)(e.Fragment,{children:[!m&&Object(e.jsxs)(Q.a,{onClick:()=>a(!1),"data-attr":"insight-save-and-continue",status:"stealth",fullWidth:!0,children:[d?"Save, add to dashboard":"Save"," & continue editing"]}),u&&Object(e.jsx)(Q.a,{onClick:s,"data-attr":"insight-save-as-new-insight",status:"stealth",fullWidth:!0,children:"Save as\u2026"})]})},disabled:m&&!u,"data-attr":"insight-save-dropdown"},children:m?"No changes to be saved":d?"Save & add to dashboard":"Save"})}try{st.displayName="InsightSaveButton",st.__docgenInfo={description:"",displayName:"InsightSaveButton",props:{saveAs:{defaultValue:null,description:"",name:"saveAs",required:!0,type:{name:"() => void"}},saveInsight:{defaultValue:null,description:"",name:"saveInsight",required:!0,type:{name:"(redirectToViewMode?: boolean | undefined) => void"}},isSaved:{defaultValue:null,description:"",name:"isSaved",required:!0,type:{name:"boolean | undefined"}},insightSaving:{defaultValue:null,description:"",name:"insightSaving",required:!0,type:{name:"boolean"}},insightChanged:{defaultValue:null,description:"",name:"insightChanged",required:!0,type:{name:"boolean"}},addingToDashboard:{defaultValue:null,description:"",name:"addingToDashboard",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"]={docgenInfo:st.__docgenInfo,name:"InsightSaveButton",path:"frontend/src/scenes/insights/InsightSaveButton.tsx#InsightSaveButton"})}catch(t){}const Kt="<this_should_be_changed_when_in_use>",Vn=15e3,Mn=!0,zt=[{title:"Experimentation is launching!",description:"Experimentation can help you test which product changes optimize your metrics. Give us feedback on your needs!"},{title:"Want to test product changes before shipping? \u{1F9EA}",description:"Our new A/B testing feature is launching soon and will let you seamlessly run experiments on your product. Interested?"},{title:"Introducing A/B testing \u{1F680}",description:"We are launching our A/B testing suite soon! Share your feedback, help us shape this new feature."}],un=Object(o.kea)({path:["lib","experimental","FeedbackCallCTA"],selectors:{featureFlagGroup:[()=>[U.a.selectors.featureFlags],t=>t[Kt]],copy:[t=>[t.featureFlagGroup],t=>t==="control"?zt[0]:t==="variant-0"?zt[1]:t==="variant-1"?zt[2]:null]},actions:{reportAndDismiss:t=>({result:t}),show:!0,hide:!0},reducers:{hidden:[!0,{show:()=>!1,hide:()=>!0}]},listeners:t=>{let{actions:s}=t;return{reportAndDismiss:a=>{let{result:i}=a;ae.a.capture("experimentation call prompt action",{result:i}),localStorage.setItem(Kt,"true"),s.hide(),i==="more-info"&&ge.d.success("We'll be in touch via email in the next few days!")}}},events:t=>{let{actions:s,values:a,cache:i}=t;return{afterMount:()=>{a.featureFlagGroup&&!localStorage.getItem(Kt)&&(i.timeout=window.setTimeout(()=>s.show(),Vn))},beforeUnmount:()=>{window.clearTimeout(i.timeout)}}}});function kn(){const{hidden:t,copy:s}=Object(o.useValues)(un),{reportAndDismiss:a}=Object(o.useActions)(un);return Mn?null:Object(e.jsxs)("div",{className:`nps-prompt${t?" hide":""}`,children:[Object(e.jsx)("span",{className:"nps-dismiss",onClick:()=>a("dismiss"),children:Object(e.jsx)(B.a,{})}),s&&Object(e.jsxs)("div",{className:"prompt-inner",children:[Object(e.jsx)("div",{className:"prompt-title",children:s.title}),Object(e.jsx)("div",{className:"question",children:s.description}),Object(e.jsxs)("div",{className:"action-buttons",style:{width:240},children:[Object(e.jsx)("a",{href:"https://calendly.com/posthog-feedback",target:"_blank",rel:"noreferrer",onClick:()=>a("call"),children:Object(e.jsx)(E.a,{className:"prompt-button",children:"Schedule call with Eng Team"})}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>a("more-info"),children:"Send me more info"}),Object(e.jsx)(E.a,{className:"prompt-button",onClick:()=>a("not-interested"),children:"Not interested"})]})]})]})}var Bn=n("./frontend/src/lib/components/PageHeader.tsx"),Ut=n("./frontend/src/scenes/insights/utils.tsx"),Me=n("./frontend/src/models/groupsModel.ts"),Wn=n("./frontend/src/models/cohortsModel.ts"),Gn=n("./frontend/src/scenes/trends/mathsLogic.tsx"),Ke=n("./frontend/src/lib/components/LemonSkeleton/index.tsx");function pn(){return Object(e.jsx)(e.Fragment,{children:Object(e.jsxs)("div",{className:"my-6 space-y-4",children:[Object(e.jsx)(Ke.a,{className:"w-1/4"}),Object(e.jsx)(Ke.a,{className:"w-1/2",repeat:3}),Object(e.jsx)(Ke.a,{}),Object(e.jsxs)("div",{className:"border rounded p-6 flex items-center gap-4",children:[Object(e.jsx)("div",{className:"flex-1 space-y-2",children:Object(e.jsx)(Ke.a.Row,{repeat:3})}),Object(e.jsx)("div",{className:"flex-1 space-y-2",children:Object(e.jsx)(Ke.a.Row,{repeat:3})})]}),Object(e.jsx)("div",{className:"border rounded p-6",style:{minHeight:600}})]})})}var Kn=n("./node_modules/.pnpm/react-transition-group@4.4.5_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/react-transition-group/esm/CSSTransition.js"),be=n("./frontend/src/scenes/trends/trendsLogic.ts"),ze=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),Le=n("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx"),G=n("./frontend/src/lib/components/TaxonomicFilter/types.ts");function at(t){let{insightProps:s}=t;const{setFilters:a}=Object(o.useActions)(Object(be.a)(s)),{filters:i,isFormulaOn:r}=Object(o.useValues)(Object(be.a)(s)),{groupsTaxonomicTypes:l}=Object(o.useValues)(Me.a),d=[G.a.EventProperties,G.a.PersonProperties,G.a.EventFeatureFlags,...l,G.a.Cohorts,G.a.Elements,...Object(M.j)(i)?[G.a.Sessions]:[]];return Object(e.jsxs)(e.Fragment,{children:[Object(M.f)(i)&&Object(e.jsxs)("div",{className:"mb-2",children:["Showing ",Object(e.jsx)("b",{children:"Unique users"})," who did"]}),Object(e.jsx)(ze.a,{filters:i,setFilters:m=>a(m),typeKey:`trends_${c.F.TRENDS}`,buttonCopy:`Add graph ${r?"variable":"series"}`,showSeriesIndicator:!0,showNestedArrow:!0,entitiesLimit:Object(M.c)(i)&&i.display&&T.y.includes(i.display)&&!r||Object(M.f)(i)?1:N.c.length,mathAvailability:Object(M.f)(i)?Le.b.None:Object(M.i)(i)?Le.b.ActorsOnly:Le.b.All,propertiesTaxonomicGroupTypes:d})]})}function it(t){let{insightProps:s}=t;const{filters:a,localFilters:i,isFormulaOn:r}=Object(o.useValues)(Object(be.a)(s)),{setIsFormulaOn:l}=Object(o.useActions)(Object(be.a)(s)),d=r&&Object(M.j)(a)&&!!a.display&&T.y.includes(a.display)&&i.length>1;return Object(e.jsxs)("div",{className:"flex items-center justify-between w-full",children:[Object(e.jsx)("span",{children:r?"Variables":"Series"}),Object(e.jsx)(Oe.a,{title:d?"This chart type does not support multiple series, so in order to disable formula mode, remove variables or switch to a different chart type.":"Make your own formula the output of the insight with formula mode. Use graph series as variables.",children:Object(e.jsx)("div",{style:{margin:"-0.25rem 0"},children:Object(e.jsxs)(H.LemonButton,{size:"small",onClick:()=>l(!r),disabled:d,icon:Object(e.jsx)(re.IconCalculate,{}),id:"trends-formula-switch",children:[r?"Disable":"Enable"," formula mode"]})})})]})}try{at.displayName="TrendsSeries",at.__docgenInfo={description:"",displayName:"TrendsSeries",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"]={docgenInfo:at.__docgenInfo,name:"TrendsSeries",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeries"})}catch(t){}try{it.displayName="TrendsSeriesLabel",it.__docgenInfo={description:"",displayName:"TrendsSeriesLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"]={docgenInfo:it.__docgenInfo,name:"TrendsSeriesLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsSeries.tsx#TrendsSeriesLabel"})}catch(t){}var zn=n("./frontend/src/lib/components/PropertyGroupFilters/PropertyGroupFilters.tsx");function rt(t){let{filters:s}=t;const{setFiltersMerge:a}=Object(o.useActions)(w.c),{allEventNames:i}=Object(o.useValues)(w.c),{groupsTaxonomicTypes:r}=Object(o.useValues)(Me.a),l=[G.a.EventProperties,G.a.PersonProperties,G.a.EventFeatureFlags,...r,G.a.Cohorts,G.a.Elements,...s.insight===c.F.TRENDS?[G.a.Sessions]:[]];return Object(e.jsx)(zn.b,{noTitle:!0,value:Object(N.q)(s.properties),onChange:d=>a({properties:d}),taxonomicGroupTypes:l,pageKey:"insight-filters",eventNames:i,filters:s,setTestFilters:d=>a(d)})}try{rt.displayName="GlobalAndOrFilters",rt.__docgenInfo={description:"",displayName:"GlobalAndOrFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"]={docgenInfo:rt.__docgenInfo,name:"GlobalAndOrFilters",path:"frontend/src/scenes/insights/EditorFilters/GlobalAndOrFilters.tsx#GlobalAndOrFilters"})}catch(t){}const Un=/^[a-zA-Z\ \-\*\^0-9\+\/\(\)\.]+$/;function ot(t){let{insightProps:s}=t;const{isFormulaOn:a,filters:i}=Object(o.useValues)(Object(be.a)(s)),r=Object(M.j)(i)?i.formula:null,{setFilters:l}=Object(o.useActions)(Object(be.a)(s)),[d,m]=Object(D.useState)(r);return Object(D.useEffect)(()=>{r&&m(r)},[r]),a?Object(e.jsx)("div",{className:"flex items-center gap-2",children:Object(e.jsx)(H.LemonInput,{className:"flex-1",placeholder:"Example: (A + B) / 100",autoFocus:!0,value:d,onChange:u=>{let p=u.toLocaleUpperCase();p=p.split("").filter(g=>Un.test(g)).join(""),m(p)},onBlur:u=>{var p;((p=u.relatedTarget)===null||p===void 0?void 0:p.id)!=="trends-formula-switch"&&d!==r&&l({formula:d})},onFocus:()=>{d&&d!==r&&l({formula:d})},onPressEnter:()=>{d!==r&&l({formula:d})}})}):null}function lt(t){let{insightProps:s}=t;const{isFormulaOn:a}=Object(o.useValues)(Object(be.a)(s));return a?Object(e.jsx)(e.Fragment,{children:"Formula"}):null}try{ot.displayName="TrendsFormula",ot.__docgenInfo={description:"",displayName:"TrendsFormula",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"]={docgenInfo:ot.__docgenInfo,name:"TrendsFormula",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormula"})}catch(t){}try{lt.displayName="TrendsFormulaLabel",lt.__docgenInfo={description:"",displayName:"TrendsFormulaLabel",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"]={docgenInfo:lt.__docgenInfo,name:"TrendsFormulaLabel",path:"frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx#TrendsFormulaLabel"})}catch(t){}var Yn=n("./frontend/src/scenes/insights/filters/BreakdownFilter/index.ts");function dt(t){let{filters:s}=t;const{setFiltersMerge:a}=Object(o.useActions)(w.c),{featureFlags:i}=Object(o.useValues)(U.a),r=s.insight!==c.F.TRENDS&&!!i[T.i.BREAKDOWN_BY_MULTIPLE_PROPERTIES];return Object(e.jsx)(Yn.a,{filters:s,setFilters:a,useMultiBreakdown:r})}try{dt.displayName="Breakdown",dt.__docgenInfo={description:"",displayName:"Breakdown",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"]={docgenInfo:dt.__docgenInfo,name:"Breakdown",path:"frontend/src/scenes/insights/EditorFilters/Breakdown.tsx#Breakdown"})}catch(t){}var $n=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/checkbox/index.js"),Yt=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),qn=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss"),mn=n.n(qn),$t={};$t.insert="head",$t.singleton=!1;var Ys=L()(mn.a,$t),$s=mn.a.locals||{};const Hn=[{name:"new",tooltip:"Users who were first seen on this period and did the activity during the period."},{name:"returning",tooltip:"Users who did activity both this and previous period."},{name:"resurrecting",tooltip:"Users who did the activity this period but did not do the activity on the previous period (i.e. were inactive for 1 or more periods)."},{name:"dormant",tooltip:"Users who went dormant on this period, i.e. users who did not do the activity this period but did the activity on the previous period."}];function ct(t){let{insightProps:s}=t;const{toggleLifecycle:a}=Object(o.useActions)(Object(be.a)(s));return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)("div",{className:"LifecycleToggles",children:Hn.map((i,r)=>Object(e.jsxs)("div",{children:[i.name," ",Object(e.jsxs)("div",{children:[Object(e.jsx)($n.a,{defaultChecked:!0,className:i.name,onChange:()=>a(i.name)}),Object(e.jsx)(Oe.a,{title:i.tooltip,children:Object(e.jsx)(Yt.a,{className:"info-indicator"})})]})]},r))})})}try{ct.displayName="LifecycleToggles",ct.__docgenInfo={description:"",displayName:"LifecycleToggles",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"]={docgenInfo:ct.__docgenInfo,name:"LifecycleToggles",path:"frontend/src/scenes/insights/EditorFilters/LifecycleToggles.tsx#LifecycleToggles"})}catch(t){}var Qn=n("./frontend/src/scenes/insights/filters/TestAccountFilter/index.ts");function ut(t){let{filters:s,insightProps:a}=t;const{setFilters:i}=Object(o.useActions)(Object(be.a)(a));return Object(e.jsx)(Qn.a,{filters:s,onChange:i})}try{ut.displayName="LifecycleGlobalFilters",ut.__docgenInfo={description:"",displayName:"LifecycleGlobalFilters",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"]={docgenInfo:ut.__docgenInfo,name:"LifecycleGlobalFilters",path:"frontend/src/scenes/insights/EditorFilters/LifecycleGlobalFilters.tsx#LifecycleGlobalFilters"})}catch(t){}var Se=n("./frontend/src/scenes/retention/retentionTableLogic.ts"),Ee=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),Jn=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input/index.js"),Xn=n("./frontend/src/lib/introductions/groupsAccessLogic.ts"),Zn=n("./frontend/src/scenes/groups/GroupsIntroduction.tsx");const qt=-1;function Ue(t){let{aggregationGroupTypeIndex:s,onChange:a}=t;const{groupTypes:i,aggregationLabel:r}=Object(o.useValues)(Me.a),{needsUpgradeForGroups:l,canStartUsingGroups:d}=Object(o.useValues)(Xn.b),m=[{title:"Event Aggregation",options:[{value:qt,label:"Unique users"}]}];return l||d?m[0].footer=Object(e.jsx)(Zn.a,{needsUpgrade:l}):i.forEach(u=>{m[0].options.push({value:u.group_type_index,label:`Unique ${r(u.group_type_index).plural}`})}),Object(e.jsx)(H.LemonSelect,{value:s===void 0?qt:s,onChange:u=>{u!==null&&a(u===qt?void 0:u)},"data-attr":"retention-aggregation-selector",dropdownMatchSelectWidth:!1,options:m})}try{Ue.displayName="AggregationSelect",Ue.__docgenInfo={description:"",displayName:"AggregationSelect",props:{aggregationGroupTypeIndex:{defaultValue:null,description:"",name:"aggregationGroupTypeIndex",required:!0,type:{name:"number | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(aggregationGroupTypeIndex: number | undefined) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"]={docgenInfo:Ue.__docgenInfo,name:"AggregationSelect",path:"frontend/src/scenes/insights/filters/AggregationSelect.tsx#AggregationSelect"})}catch(t){}function pt(t){var s,a;let{insightProps:i}=t;const{showGroupsOptions:r}=Object(o.useValues)(Me.a),{filters:l,actionFilterTargetEntity:d,actionFilterReturningEntity:m}=Object(o.useValues)(Object(Se.e)(i)),{setFilters:u}=Object(o.useActions)(Object(Se.e)(i));return Object(e.jsxs)("div",{className:"space-y-2","data-attr":"retention-summary",children:[Object(e.jsxs)("div",{children:["Show"," ",r?Object(e.jsx)(Ue,{aggregationGroupTypeIndex:l.aggregation_group_type_index,onChange:p=>u({aggregation_group_type_index:p})}):Object(e.jsx)("b",{children:"Unique users"})," ","who performed event or action"]}),Object(e.jsxs)("div",{className:"flex items-center",children:[Object(e.jsx)(ze.a,{entitiesLimit:1,mathAvailability:Le.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:d,setFilters:p=>{p.events&&p.events.length>0?u({target_entity:p.events[0]}):p.actions&&p.actions.length>0?u({target_entity:p.actions[0]}):u({target_entity:void 0})},typeKey:"retention-table"}),Object(e.jsx)(Ee.a,{value:l.retention_type?Se.d[l.retention_type]:void 0,onChange:p=>u({retention_type:p}),dropdownMatchSelectWidth:!1,children:Object.entries(Se.d).map(p=>{let[g,v]=p;return Object(e.jsxs)(Ee.a.Option,{value:g,children:[v,Object(e.jsx)(Oe.a,{placement:"right",title:Se.c[g],children:Object(e.jsx)(Yt.a,{className:"info-indicator"})})]},g)})})]}),Object(e.jsxs)("div",{children:["in the last"," ",Object(e.jsx)(Jn.a,{type:"tel",style:{width:80},value:String(((s=l.total_intervals)!==null&&s!==void 0?s:11)-1),onChange:p=>u({total_intervals:parseInt(p.target.value||"0")+1})})," ",Object(e.jsx)(Ee.a,{value:l.period,onChange:p=>u({period:p}),dropdownMatchSelectWidth:!1,children:Se.b.map(p=>Object(e.jsx)(Ee.a.Option,{value:p,children:Se.a[p]||p},p))})]}),Object(e.jsxs)("div",{children:["and then came back to perform event or action"," ",Object(e.jsx)("div",{className:"flex",children:Object(e.jsx)(ze.a,{entitiesLimit:1,mathAvailability:Le.b.None,hideFilter:!0,hideRename:!0,buttonCopy:"Add graph series",filters:m,setFilters:p=>{p.events&&p.events.length>0?u({returning_entity:p.events[0]}):p.actions&&p.actions.length>0?u({returning_entity:p.actions[0]}):u({returning_entity:void 0})},typeKey:"retention-table-returning"})}),"on any of the next ",Se.a[(a=l.period)!==null&&a!==void 0?a:"Day"]]}),Object(e.jsx)("div",{children:Object(e.jsxs)("p",{className:"text-muted mt-4",children:["Want to learn more about retention?"," ",Object(e.jsxs)("a",{href:"https://posthog.com/docs/features/retention?utm_campaign=learn-more-horizontal&utm_medium=in-product",target:"_blank",rel:"noopener",style:{display:"inline-flex",alignItems:"center"},children:["Go to docs",Object(e.jsx)(re.IconOpenInNew,{style:{marginLeft:4}})]})]})})]})}try{pt.displayName="RetentionSummary",pt.__docgenInfo={description:"",displayName:"RetentionSummary",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"]={docgenInfo:pt.__docgenInfo,name:"RetentionSummary",path:"frontend/src/scenes/insights/EditorFilters/RetentionSummary.tsx#RetentionSummary"})}catch(t){}var ue=n("./frontend/src/scenes/paths/pathsLogic.ts"),es=n("./frontend/src/lib/components/LemonCheckbox/index.ts");function mt(t){var s,a,i;let{insightProps:r}=t;const{filter:l}=Object(o.useValues)(Object(ue.b)(r)),{setFilter:d}=Object(o.useActions)(Object(ue.b)(r)),m=[{type:c.J.PageView,label:"Page views",selected:(s=l.include_event_types)===null||s===void 0?void 0:s.includes(c.J.PageView)},{type:c.J.Screen,label:"Screen views",selected:(a=l.include_event_types)===null||a===void 0?void 0:a.includes(c.J.Screen)},{type:c.J.CustomEvent,label:"Custom events",selected:(i=l.include_event_types)===null||i===void 0?void 0:i.includes(c.J.CustomEvent)}],u=g=>{l.include_event_types?l.include_event_types.includes(g)?d({include_event_types:l.include_event_types.filter(v=>v!==g)}):d({include_event_types:l.include_event_types?[...l.include_event_types,g]:[g]}):d({include_event_types:[g]})},p=Object(N.i)(Object(Ut.h)(l).join(" & "));return Object(e.jsx)(Q.b,{status:"stealth",fullWidth:!0,type:"secondary",popup:{sameWidth:!0,closeOnClickInside:!1,overlay:m.map(g=>{var v;return Object(e.jsxs)(Q.a,{onClick:()=>u(g.type),status:"stealth",disabled:g.selected&&((v=l.include_event_types)===null||v===void 0?void 0:v.length)===1,fullWidth:!0,"data-attr":g["data-attr"],children:[Object(e.jsx)("span",{className:"pointer-events-none mr-2",children:Object(e.jsx)(es.a,{checked:g.selected})}),g.label]},g.type)}),actionable:!0},children:p})}try{mt.displayName="PathsEventTypes",mt.__docgenInfo={description:"",displayName:"PathsEventTypes",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsEventTypes.tsx#PathsEventTypes"]={docgenInfo:mt.__docgenInfo,name:"PathsEventTypes",path:"frontend/src/scenes/insights/EditorFilters/PathsEventTypes.tsx#PathsEventTypes"})}catch(t){}var ts=n("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx");function ht(t){let{insightProps:s}=t;const{filter:a}=Object(o.useValues)(Object(ue.b)(s)),{setFilter:i}=Object(o.useActions)(Object(ue.b)(s));return Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(ts.a,{onChange:r=>i({path_groupings:r}),value:a.path_groupings||[],filterOption:!1,mode:"multiple-custom"})})}try{ht.displayName="PathsWildcardGroups",ht.__docgenInfo={description:"",displayName:"PathsWildcardGroups",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsWildcardGroups.tsx#PathsWildcardGroups"]={docgenInfo:ht.__docgenInfo,name:"PathsWildcardGroups",path:"frontend/src/scenes/insights/EditorFilters/PathsWildcardGroups.tsx#PathsWildcardGroups"})}catch(t){}var hn=n("./frontend/src/lib/components/Popup/Popup.tsx"),ns=n("./frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx");function Ye(t){let{pathItem:s,onChange:a,children:i,taxonomicGroupTypes:r,disabled:l,wildcardOptions:d}=t;const[m,u]=Object(D.useState)(!1);return Object(e.jsx)(hn.a,{visible:m,placement:"bottom-end",onClickOutside:()=>u(!1),overlay:Object(e.jsx)(ns.a,{value:s,onChange:(p,g)=>{a(g),u(!1)},taxonomicGroupTypes:r,optionsFromProp:{wildcard:d}}),children:Object(e.jsx)("div",{onClick:l?()=>{}:()=>u(!m),children:i})})}try{Ye.displayName="PathItemSelector",Ye.__docgenInfo={description:"",displayName:"PathItemSelector",props:{pathItem:{defaultValue:null,description:"",name:"pathItem",required:!0,type:{name:"TaxonomicFilterValue | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(item: string) => void"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!0,type:{name:"TaxonomicFilterGroupType[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},wildcardOptions:{defaultValue:null,description:"",name:"wildcardOptions",required:!1,type:{name:"SimpleOption[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/components/PathItemSelector.tsx#PathItemSelector"]={docgenInfo:Ye.__docgenInfo,name:"PathItemSelector",path:"frontend/src/lib/components/PropertyFilters/components/PathItemSelector.tsx#PathItemSelector"})}catch(t){}function gt(t){return Object(e.jsx)($e,z({position:"start"},t))}function ft(t){return Object(e.jsx)($e,z({position:"end"},t))}function $e(t){let{insightProps:s,position:a}=t;const{filter:i,wildcards:r,taxonomicGroupTypes:l}=Object(o.useValues)(Object(ue.b)(s)),{setFilter:d}=Object(o.useActions)(Object(ue.b)(s)),m=i.funnel_paths&&[c.z.between,c.z.after].includes(i.funnel_paths),u=i.funnel_paths&&[c.z.between,c.z.before].includes(i.funnel_paths),p=m||u;function g(_,I){var q,K,Z,A;const se=((q=_.events)===null||q===void 0||(K=q.filter(we=>we.order===I-1))===null||K===void 0?void 0:K[0])||((Z=_.actions)===null||Z===void 0||(A=Z.filter(we=>we.order===I-1))===null||A===void 0?void 0:A[0]);return(se==null?void 0:se.name)||""}function v(_,I){let q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return _&&I?Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(re.IconFunnelVertical,{className:"text-2xl"}),Object(e.jsx)("span",{className:"label",children:`${I>0?"Funnel step "+(I+q):"Funnel dropoff "+I*-1}: ${g(_,I>0?I+q:I*-1)}`})]}):Object(e.jsx)("span",{})}function C(){if(i.funnel_paths)if(i.funnel_paths===c.z.after){var _;return v(i.funnel_filter,(_=i.funnel_filter)===null||_===void 0?void 0:_.funnel_step)}else if(i.funnel_paths===c.z.between){var I;return v(i.funnel_filter,(I=i.funnel_filter)===null||I===void 0?void 0:I.funnel_step,-1)}else return Object(e.jsx)("span",{});else return i.start_point?Object(e.jsx)("span",{className:"label",children:i.start_point}):Object(e.jsx)("span",{className:"label",style:{color:"var(--muted)"},children:"Add start point"})}function V(){if(i.funnel_paths)if(i.funnel_paths===c.z.before||i.funnel_paths===c.z.between){var _;return v(i.funnel_filter,(_=i.funnel_filter)===null||_===void 0?void 0:_.funnel_step)}else return Object(e.jsx)("span",{});else return i.end_point?Object(e.jsx)("span",{className:"label",children:i.end_point}):Object(e.jsx)("span",{className:"label",style:{color:"var(--muted)"},children:"Add end point"})}const b={start:{index:0,getLabel:C,setFilterKey:"start_point",pathItem:i.start_point,closeButtonEnabled:i.start_point||m,disabled:u&&!m,funnelFilterLink:i.funnel_filter&&m},end:{index:1,getLabel:V,setFilterKey:"end_point",pathItem:i.end_point,closeButtonEnabled:i.end_point||u,disabled:m&&!u,funnelFilterLink:i.funnel_filter&&u}}[a],$=b.closeButtonEnabled?Q.c:Q.a;return Object(e.jsx)(Ye,{pathItem:b.pathItem,index:b.index,onChange:_=>d({[b.setFilterKey]:_}),taxonomicGroupTypes:l,disabled:p,wildcardOptions:r,children:Object(e.jsx)($,{"data-attr":"new-prop-filter-"+b.index,status:b.funnelFilterLink?"primary":"stealth",fullWidth:!0,className:"paths-endpoint-field",type:"secondary",active:p,disabled:b.disabled,onClick:b.funnelFilterLink?()=>{_e.router.actions.push(Object(_e.combineUrl)("/insights",Object(_e.encodeParams)(i.funnel_filter,"?")).url)}:()=>{},sideAction:{icon:Object(e.jsx)(re.IconClose,{}),type:"tertiary",onClick:_=>{d({[b.setFilterKey]:void 0,funnel_filter:void 0,funnel_paths:void 0}),_.stopPropagation()}},children:b.getLabel()})})}try{gt.displayName="PathsTargetStart",gt.__docgenInfo={description:"",displayName:"PathsTargetStart",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetStart"]={docgenInfo:gt.__docgenInfo,name:"PathsTargetStart",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetStart"})}catch(t){}try{ft.displayName="PathsTargetEnd",ft.__docgenInfo={description:"",displayName:"PathsTargetEnd",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetEnd"]={docgenInfo:ft.__docgenInfo,name:"PathsTargetEnd",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTargetEnd"})}catch(t){}try{$e.displayName="PathsTarget",$e.__docgenInfo={description:"",displayName:"PathsTarget",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTarget"]={docgenInfo:$e.__docgenInfo,name:"PathsTarget",path:"frontend/src/scenes/insights/EditorFilters/PathsTarget.tsx#PathsTarget"})}catch(t){}var ss=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),Ht=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),as=n("./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx"),is=n("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx");function rs(){const[t,s]=Object(D.useState)(!1),{insightProps:a}=Object(o.useValues)(w.c),{filter:i}=Object(o.useValues)(Object(ue.b)(a)),{setFilter:r}=Object(o.useActions)(Object(ue.b)(a)),{currentTeam:l}=Object(o.useValues)(Gt.a),d=((l==null?void 0:l.path_cleaning_filters)||[]).length>0;return Object(e.jsxs)("div",{className:"space-y-2",children:[Object(e.jsx)(as.a,{pageKey:"pathcleanfilters-local",pathCleaningFilters:i.local_path_cleaning_filters||[],onChange:m=>{r({local_path_cleaning_filters:[...i.local_path_cleaning_filters||[],m]})},onRemove:m=>{const u=(i.local_path_cleaning_filters||[]).filter((p,g)=>g!==m);r({local_path_cleaning_filters:u})}}),Object(e.jsx)(hn.a,{visible:t,placement:"top-end",fallbackPlacements:["top-start"],onClickOutside:()=>s(!1),overlay:Object(e.jsx)(is.a,{item:{},onClose:()=>s(!1),onComplete:m=>{r({local_path_cleaning_filters:[...i.local_path_cleaning_filters||[],m]}),s(!1)}}),children:Object(e.jsx)(H.LemonButton,{onClick:()=>s(!t),className:"new-prop-filter","data-attr":"new-prop-filter-pathcleanfilters-local",type:"secondary",icon:Object(e.jsx)(re.IconPlus,{}),size:"small",children:"Add Rule"})}),Object(e.jsx)(Oe.a,{title:d?"Clean paths based using regex replacement.":"You don't have path cleaning filters. Click the gear icon to configure it.",children:Object(e.jsx)(H.LemonSwitch,{disabled:!d,checked:d&&i.path_replacements||!1,onChange:m=>{localStorage.setItem("default_path_clean_filters",m.toString()),r({path_replacements:m})},label:"Apply global path URL cleaning",bordered:!0})})]})}var bt=n("./frontend/src/lib/components/LemonLabel/LemonLabel.tsx");function jt(t){let{insightProps:s}=t;const{filter:a}=Object(o.useValues)(Object(ue.b)(s)),{setFilter:i}=Object(o.useActions)(Object(ue.b)(s)),[r,l]=Object(D.useState)({edge_limit:a.edge_limit,min_edge_weight:a.min_edge_weight,max_edge_weight:a.max_edge_weight}),d=()=>{(r.edge_limit!==a.edge_limit||r.min_edge_weight!==a.min_edge_weight||r.max_edge_weight!==a.max_edge_weight)&&i(z({},r))};return Object(e.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(e.jsx)(bt.a,{info:"Determines the maximum number of path nodes that can be generated. If necessary certain items will be grouped.",children:"Maximum number of paths"}),Object(e.jsx)(Ht.a,{min:0,max:1e3,defaultValue:50,onChange:m=>l(u=>oe(z({},u),{edge_limit:Number(m)})),onBlur:d,onPressEnter:d}),Object(e.jsx)(bt.a,{info:"Determines the minimum and maximum number of persons in each path. Helps adjust the density of the visualization.",children:"Number of people on each path"}),Object(e.jsxs)("div",{children:["between"," ",Object(e.jsx)(Ht.a,{min:0,max:1e5,onChange:m=>l(u=>oe(z({},u),{min_edge_weight:Number(m)})),onBlur:d,onPressEnter:d})," ","and"," ",Object(e.jsx)(Ht.a,{onChange:m=>l(u=>oe(z({},u),{max_edge_weight:Number(m)})),min:0,max:1e5,onBlur:d,onPressEnter:d})]}),Object(e.jsxs)("div",{children:[Object(e.jsxs)("div",{className:"flex mb-2",children:[Object(e.jsx)(bt.a,{showOptional:!0,info:Object(e.jsx)(e.Fragment,{children:"Cleaning rules are an advanced feature that uses regex to normalize URLS for paths visualization. Rules can be set for all insights in the project settings, or they can be defined specifically for an insight."}),children:"Path Cleaning Rules"}),Object(e.jsxs)(ln.a,{className:"grow-1 text-right",to:"/project/settings#path_cleaning_filtering",children:[Object(e.jsx)(ss.a,{})," Configure Project Rules"]})]}),Object(e.jsx)(rs,{})]})]})}try{jt.displayName="PathsAdvanced",jt.__docgenInfo={description:"",displayName:"PathsAdvanced",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsAdvanced.tsx#PathsAdvanced"]={docgenInfo:jt.__docgenInfo,name:"PathsAdvanced",path:"frontend/src/scenes/insights/EditorFilters/PathsAdvanced.tsx#PathsAdvanced"})}catch(t){}var J=n("./frontend/src/scenes/funnels/funnelLogic.ts"),gn=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FunnelPlotOutlined.js"),os=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/ClockCircleOutlined.js"),ls=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/LineChartOutlined.js"),fn=n("./frontend/src/lib/components/ChartFilter/chartFilterLogic.ts"),bn=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/menu/index.js"),ds=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/dropdown/index.js"),cs=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss"),jn=n.n(cs),Qt={};Qt.insert="head",Qt.singleton=!1;var qs=L()(jn.a,Qt),Hs=jn.a.locals||{};function vn(t){let{icon:s,label:a,description:i,onClick:r}=t;return Object(e.jsxs)("div",{onClick:r,children:[Object(e.jsxs)("div",{className:"flex items-center text-sm font-medium gap-2",children:[s,Object(e.jsx)("div",{children:a})]}),i&&Object(e.jsx)("div",{className:"text-muted text-xs mt-1",children:i})]})}function vt(t){let{label:s,value:a,onValueChange:i,options:r,hideDescriptionOnDisplay:l,disabled:d,compact:m}=t;const u=r.find(g=>g.key===a),p=Object(e.jsx)(bn.a,{children:r.map(g=>{let b=g,{key:v,hidden:C}=b,V=Tn(b,["key","hidden"]);return C?null:Object(e.jsx)(bn.a.Item,{children:Object(e.jsx)(vn,oe(z({},V),{onClick:()=>i(v)}))},v)})});return Object(e.jsxs)(e.Fragment,{children:[s&&Object(e.jsx)("label",{className:"ant-form-item-label",children:s}),Object(e.jsx)(ds.a,{overlay:p,trigger:["click"],disabled:d,children:Object(e.jsxs)("div",{className:Object(Ge.default)("dropdown-selector",d&&" disabled",m&&"compact"),onClick:g=>g.preventDefault(),children:[Object(e.jsx)("div",{className:"grow",children:u&&Object(e.jsx)(vn,oe(z({},u),{onClick:()=>{},description:l?void 0:u.description}))}),Object(e.jsx)("div",{className:"dropdown-arrow",children:Object(e.jsx)(re.IconArrowDropDown,{})})]})})]})}try{vt.displayName="DropdownSelector",vt.__docgenInfo={description:"",displayName:"DropdownSelector",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | null"}},onValueChange:{defaultValue:null,description:"",name:"onValueChange",required:!0,type:{name:"(value: string) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"DropdownOption[]"}},hideDescriptionOnDisplay:{defaultValue:null,description:"",name:"hideDescriptionOnDisplay",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"]={docgenInfo:vt.__docgenInfo,name:"DropdownSelector",path:"frontend/src/lib/components/DropdownSelector/DropdownSelector.tsx#DropdownSelector"})}catch(t){}const us=()=>{};function yt(t){let{onChange:s=us,disabled:a=!1,simpleMode:i}=t;const{insightProps:r}=Object(o.useValues)(w.c),{aggregationTargetLabel:l}=Object(o.useValues)(Object(J.a)(r)),{chartFilter:d}=Object(o.useValues)(Object(fn.a)(r)),{setChartFilter:m}=Object(o.useActions)(Object(fn.a)(r)),u=c.B.Steps,p=[{key:c.B.Steps,label:"Conversion steps",description:`Track ${l.plural} progress between steps of the funnel`,icon:Object(e.jsx)(gn.a,{})},{key:c.B.TimeToConvert,label:"Time to convert",description:`Track how long it takes for ${l.plural} to convert`,icon:Object(e.jsx)(os.a,{}),hidden:!1},{key:c.B.Trends,label:"Historical trends",description:"Track how this funnel's conversion rate is trending over time",icon:Object(e.jsx)(ls.a,{}),hidden:!1}];if(p.filter(v=>!v.hidden).length<=1)return null;const g=Object(e.jsx)("div",{className:"funnel-chart-filter",children:Object(e.jsx)(vt,{options:p,value:d||u,onValueChange:v=>{const C=v;m(C),s(C)},disabled:a,hideDescriptionOnDisplay:!0,compact:i})});return i?g:Object(e.jsxs)("div",{children:[Object(e.jsx)("h4",{className:"secondary",children:"Graph Type"}),g]})}try{yt.displayName="ToggleButtonChartFilter",yt.__docgenInfo={description:"",displayName:"ToggleButtonChartFilter",props:{onChange:{defaultValue:{value:"(): void => {}"},description:"",name:"onChange",required:!1,type:{name:"((chartFilter: FunnelVizType) => void)"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},simpleMode:{defaultValue:null,description:"",name:"simpleMode",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"]={docgenInfo:yt.__docgenInfo,name:"ToggleButtonChartFilter",path:"frontend/src/scenes/insights/views/Funnels/ToggleButtonChartFilter.tsx#ToggleButtonChartFilter"})}catch(t){}const Jt="funnels",yn=Object(o.kea)({path:["scenes","insights","InsightTabs","FunnelTab","funnelCommandLogic"],connect:[X.a],events:{afterMount:()=>{const t=[{icon:gn.a,display:"Clear Funnel",executor:()=>{var a;(a=J.a.findMounted({syncWithUrl:!0}))===null||a===void 0||a.actions.clearFunnel()}}],s=[{key:Jt,resolver:t,scope:Jt}];for(const a of s)X.a.actions.registerCommand(a)},beforeUnmount:()=>{X.a.actions.deregisterScope(Jt)}}});var ps=n("./node_modules/.pnpm/use-debounce@6.0.1_react@16.14.0/node_modules/use-debounce/esm/useDebouncedCallback.js");const On={[c.w.Minute]:[1,1440],[c.w.Hour]:[1,24],[c.w.Day]:[1,365],[c.w.Week]:[1,53],[c.w.Month]:[1,12]};function ms(){var t;const{insightProps:s}=Object(o.useValues)(w.c),{conversionWindow:a,aggregationTargetLabel:i,filters:r}=Object(o.useValues)(Object(J.a)(s)),{setFilters:l}=Object(o.useActions)(Object(J.a)(s)),[d,m]=Object(D.useState)(a),u=Object.keys(On).map(v=>{var C;return{label:Object(N.i)(Object(N.vb)((C=a.funnel_window_interval)!==null&&C!==void 0?C:7,v,`${v}s`,!1)),value:v}}),p=On[(t=a.funnel_window_interval_unit)!==null&&t!==void 0?t:c.w.Day],g=Object(ps.a)(()=>{(d.funnel_window_interval!==a.funnel_window_interval||d.funnel_window_interval_unit!==a.funnel_window_interval_unit)&&l(d)},200);return Object(e.jsxs)("div",{className:"flex items-center gap-2 ",children:[Object(e.jsxs)("span",{className:"whitespace-nowrap",children:["Conversion window limit"," ",Object(e.jsx)(Oe.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("b",{children:"Recommended!"})," Limit to ",i.plural," ",r.aggregation_group_type_index!=null?"that":"who"," converted within a specific time frame. ",Object(N.i)(i.plural)," ",r.aggregation_group_type_index!=null?"that":"who"," do not convert in this time frame will be considered as drop-offs."]}),children:Object(e.jsx)(Yt.a,{className:"info-indicator"})})]}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(H.LemonInput,{type:"number",className:"max-w-20",fullWidth:!1,min:p[0],max:p[1],defaultValue:a.funnel_window_interval,value:d.funnel_window_interval,onChange:v=>{m(C=>oe(z({},C),{funnel_window_interval:Number(v)})),g()},onBlur:g,onPressEnter:g}),Object(e.jsx)(H.LemonSelect,{dropdownMatchSelectWidth:!1,value:d.funnel_window_interval_unit,onChange:v=>{v&&(m(C=>oe(z({},C),{funnel_window_interval_unit:v})),g())},options:u})]})]})}const hs=20;function Ot(t){let{insightProps:s}=t;const{isStepsEmpty:a,filterSteps:i,filters:r}=Object(o.useValues)(Object(J.a)(s)),{setFilters:l}=Object(o.useActions)(Object(J.a)(s)),{groupsTaxonomicTypes:d,showGroupsOptions:m}=Object(o.useValues)(Me.a);return Object(o.useMountedLogic)(yn),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex justify-between items-center",children:[Object(e.jsx)(bt.a,{children:"Query Steps"}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{className:"text-muted",children:"Graph type"}),Object(e.jsx)(yt,{simpleMode:!0})]})]}),Object(e.jsx)(ze.a,{bordered:!0,filters:r,setFilters:l,typeKey:"EditFunnel-action",mathAvailability:Le.b.None,hideDeleteBtn:i.length===1,buttonCopy:"Add step",showSeriesIndicator:!a,seriesIndicatorType:"numeric",entitiesLimit:hs,sortable:!0,showNestedArrow:!0,propertiesTaxonomicGroupTypes:[G.a.EventProperties,G.a.PersonProperties,G.a.EventFeatureFlags,...d,G.a.Cohorts,G.a.Elements]}),Object(e.jsxs)("div",{className:"mt-4 space-y-4",children:[m&&Object(e.jsxs)("div",{className:"flex items-center w-full gap-2",children:[Object(e.jsx)("span",{children:"Aggregating by"}),Object(e.jsx)(Ue,{aggregationGroupTypeIndex:r.aggregation_group_type_index,onChange:u=>l({aggregation_group_type_index:u})})]}),Object(e.jsx)(ms,{})]})]})}try{Ot.displayName="FunnelsQuerySteps",Ot.__docgenInfo={description:"",displayName:"FunnelsQuerySteps",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"]={docgenInfo:Ot.__docgenInfo,name:"FunnelsQuerySteps",path:"frontend/src/scenes/insights/EditorFilters/FunnelsQuerySteps.tsx#FunnelsQuerySteps"})}catch(t){}const gs=[{label:"Sequential",value:c.bb.ORDERED},{label:"Strict order",value:c.bb.STRICT},{label:"Any order",value:c.bb.UNORDERED}];function fs(){const{insightProps:t}=Object(o.useValues)(w.c),{filters:s}=Object(o.useValues)(Object(J.a)(t)),{setFilters:a}=Object(o.useActions)(Object(J.a)(t));return Object(e.jsx)(H.LemonSelect,{id:"funnel-step-order-filter","data-attr":"funnel-step-order-filter",value:s.funnel_order_type||c.bb.ORDERED,onChange:i=>i&&a({funnel_order_type:i}),dropdownMatchSelectWidth:!1,options:gs})}var Xt=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),xn=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),bs=n("./node_modules/.pnpm/@react-hook+size@2.1.2_react@16.14.0/node_modules/@react-hook/size/dist/module/index.js");function js(t){var s,a,i,r,l,d,m,u;let{filter:p,index:g,onClose:v,isVertical:C}=t;const{insightProps:V}=Object(o.useValues)(w.c),{filters:b,areFiltersValid:$,numberOfSeries:_,exclusionDefaultStepRange:I}=Object(o.useValues)(Object(J.a)(V)),{setOneEventExclusionFilter:q}=Object(o.useActions)(Object(J.a)(V)),K={funnel_from_step:(s=(a=b.exclusions)===null||a===void 0||(i=a[g])===null||i===void 0?void 0:i.funnel_from_step)!==null&&s!==void 0?s:I.funnel_from_step,funnel_to_step:(r=(l=b.exclusions)===null||l===void 0||(d=l[g])===null||d===void 0?void 0:d.funnel_to_step)!==null&&r!==void 0?r:I.funnel_to_step},Z=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K.funnel_from_step,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K.funnel_to_step;q(oe(z({},p),{funnel_from_step:A,funnel_to_step:se}),g)};return Object(e.jsxs)(Xt.a,{justify:"space-between",align:"middle",wrap:!1,style:{margin:`${C?4:0}px 0`,paddingLeft:4,width:C?"100%":"auto"},children:["between",Object(e.jsx)(Ee.a,{defaultValue:0,disabled:!$,dropdownMatchSelectWidth:!1,dropdownAlign:N.a.bottomRight,"data-attr":"funnel-exclusion-funnel_from_step-selector",optionLabelProp:"label",value:K.funnel_from_step,onChange:A=>Z(A),onBlur:()=>Z,style:{marginLeft:4,marginRight:4},children:Array.from(Array(_).keys()).slice(0,-1).map(A=>Object(e.jsxs)(Ee.a.Option,{value:A,label:`Step ${A+1}`,children:["Step ",A+1]},A))}),"and",Object(e.jsx)(Ee.a,{defaultValue:((m=K.funnel_from_step)!==null&&m!==void 0?m:0)+1,disabled:!$,dropdownMatchSelectWidth:!1,dropdownAlign:N.a.bottomRight,"data-attr":"funnel-exclusion-funnel_to_step-selector",optionLabelProp:"label",value:K.funnel_to_step,onChange:A=>Z(K.funnel_from_step,A),onBlur:()=>Z,style:{marginLeft:4},children:Array.from(Array(_).keys()).slice(((u=K.funnel_from_step)!==null&&u!==void 0?u:0)+1).map(A=>Object(e.jsxs)(Ee.a.Option,{value:A,label:`Step ${A+1}`,children:["Step ",A+1]},A))}),Object(e.jsx)("div",{style:{flex:1}}),Object(e.jsx)(H.LemonButton,{icon:Object(e.jsx)(re.IconDelete,{}),status:"primary-alt",onClick:v,"data-attr":"delete-prop-exclusion-filter",title:"Delete event exclusion series"})]})}function vs(t){let{seriesIndicator:s,filter:a,suffix:i,isVertical:r}=t;return Object(e.jsxs)(Xt.a,{wrap:!1,align:r?"top":"middle",style:{width:"100%"},children:[Object(e.jsx)(xn.a,{style:{padding:`${r?5:0}px 8px`},children:s}),Object(e.jsx)(xn.a,{flex:"auto",children:Object(e.jsxs)(Xt.a,{align:"middle",wrap:r,children:[a,i]})})]})}function ys(){const{insightProps:t}=Object(o.useValues)(w.c),{exclusionFilters:s,areFiltersValid:a,exclusionDefaultStepRange:i}=Object(o.useValues)(Object(J.a)(t)),{setEventExclusionFilters:r}=Object(o.useActions)(Object(J.a)(t)),l=Object(D.useRef)(null),[d]=Object(bs.a)(l),m=!!d&&d<450;return Object(e.jsx)(ze.a,{ref:l,setFilters:r,filters:s,typeKey:"funnel-exclusions-filter",addFilterDefaultOptions:z({id:"$pageview",name:"$pageview",type:c.p.EVENTS},i),disabled:!a,buttonCopy:"Add exclusion",actionsTaxonomicGroupTypes:[G.a.Events],mathAvailability:Le.b.None,hideFilter:!0,hideRename:!0,hideDeleteBtn:!0,seriesIndicatorType:"alpha",renderRow:u=>Object(e.jsx)(vs,oe(z({},u),{isVertical:m})),customRowSuffix:u=>Object(e.jsx)(js,oe(z({},u),{isVertical:m}))})}function Os(){const{insightProps:t}=Object(o.useValues)(w.c),{stepReference:s}=Object(o.useValues)(Object(J.a)(t)),{setStepReference:a}=Object(o.useActions)(Object(J.a)(t)),i=[{value:c.A.total,label:"Overall conversion"},{value:c.A.previous,label:"Relative to previous step"}];return Object(e.jsx)(H.LemonSelect,{value:s||c.A.total,onChange:r=>r&&a(r),dropdownMatchSelectWidth:!1,"data-attr":"funnel-step-reference-selector",options:i})}var xt=n("./frontend/src/lib/forms/Field.tsx");function _t(t){let{filters:s,insightProps:a}=t;const{aggregationTargetLabel:i,advancedOptionsUsedCount:r}=Object(o.useValues)(Object(J.a)(a)),{setFilters:l,setStepReference:d}=Object(o.useActions)(Object(J.a)(a));return Object(o.useMountedLogic)(yn),Object(e.jsxs)("div",{className:"space-y-4",children:[Object(e.jsx)(xt.b,{label:"Step order",info:Object(e.jsxs)("ul",{className:"list-disc pl-4",children:[Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Sequential"})," - Step B must happen after Step A, but any number events can happen between A and B."]}),Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Strict order"})," - Step B must happen directly after Step A without any events in between."]}),Object(e.jsxs)("li",{children:[Object(e.jsx)("b",{children:"Any order"})," - Steps can be completed in any sequence."]})]}),children:Object(e.jsx)(fs,{})}),Object(e.jsx)(xt.b,{label:"Conversion rate calculation",children:Object(e.jsx)(Os,{})}),Object(e.jsx)(xt.b,{label:"Exclusion steps",info:Object(e.jsxs)(e.Fragment,{children:["Exclude ",i.plural," ",s.aggregation_group_type_index!=null?"that":"who"," completed the specified event between two specific steps. Note that these ",i.plural," will be"," ",Object(e.jsx)("b",{children:"completely excluded from the entire funnel"}),"."]}),children:Object(e.jsx)(ys,{})}),!!r&&Object(e.jsx)("div",{className:"mt-4",children:Object(e.jsx)(Q.a,{status:"danger",onClick:()=>{d(c.A.total),l({funnel_order_type:c.bb.ORDERED,exclusions:[]})},children:"Reset advanced options"})})]})}try{_t.displayName="FunnelsAdvanced",_t.__docgenInfo={description:"",displayName:"FunnelsAdvanced",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"]={docgenInfo:_t.__docgenInfo,name:"FunnelsAdvanced",path:"frontend/src/scenes/insights/EditorFilters/FunnelsAdvanced.tsx#FunnelsAdvanced"})}catch(t){}var Zt=n("./frontend/src/lib/components/PropertyFilters/propertyFilterLogic.ts"),Qs=n("./frontend/src/scenes/actions/Actions.scss"),xs=n("./frontend/src/lib/components/PropertyFilters/components/PropertyFilterButton.tsx");function St(t){let{propertyFilters:s,onChange:a,pageKey:i,taxonomicGroupTypes:r,wildcardOptions:l}=t;const d={propertyFilters:s,onChange:a,pageKey:i},{filtersWithNew:m}=Object(o.useValues)(Object(Zt.a)(d)),{setFilter:u,remove:p,setFilters:g}=Object(o.useActions)(Object(Zt.a)(d));return Object(D.useEffect)(()=>{s&&!Object(N.sb)(s,m)&&g([...s,{}])},[s]),Object(e.jsx)(o.BindLogic,{logic:Zt.a,props:d,children:m==null?void 0:m.map((v,C)=>Object(e.jsx)("div",{className:"mb-2",children:Object(e.jsx)(Ye,{pathItem:v.value,onChange:V=>u(C,{key:V,value:V,type:c.N.Event}),index:C,taxonomicGroupTypes:r,wildcardOptions:l,children:v.value?Object(e.jsx)(xs.a,{item:v,onClose:()=>{p(C)},children:v.value.toString()}):Object(e.jsx)(H.LemonButton,{className:"new-prop-filter","data-attr":"new-prop-filter-"+i,type:"secondary",icon:Object(e.jsx)(re.IconPlusMini,{color:"var(--primary)"}),children:"Add exclusion"})})},C))})}try{St.displayName="PathItemFilters",St.__docgenInfo={description:"",displayName:"PathItemFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},propertyFilters:{defaultValue:null,description:"",name:"propertyFilters",required:!1,type:{name:"AnyPropertyFilter[] | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(filters: AnyPropertyFilter[]) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!0,type:{name:"TaxonomicFilterGroupType[]"}},wildcardOptions:{defaultValue:null,description:"",name:"wildcardOptions",required:!1,type:{name:"SimpleOption[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PropertyFilters/PathItemFilters.tsx#PathItemFilters"]={docgenInfo:St.__docgenInfo,name:"PathItemFilters",path:"frontend/src/lib/components/PropertyFilters/PathItemFilters.tsx#PathItemFilters"})}catch(t){}function Et(t){let{insightProps:s}=t;const{filter:a,wildcards:i}=Object(o.useValues)(Object(ue.b)(s)),{updateExclusions:r}=Object(o.useActions)(Object(ue.b)(s)),l=a.include_event_types?[...a.include_event_types.map(d=>d===c.J.Screen?G.a.Screens:d===c.J.CustomEvent?G.a.CustomEvents:G.a.PageviewUrls),G.a.Wildcards]:[G.a.Wildcards];return Object(e.jsx)(St,{taxonomicGroupTypes:l,pageKey:"exclusion",propertyFilters:a.exclude_events&&a.exclude_events.map(d=>({key:d,value:d,operator:void 0,type:c.N.Event})),onChange:d=>{const m=d.length>0?d.map(u=>u.value):d;r(m)},wildcardOptions:i})}try{Et.displayName="PathsExclusions",Et.__docgenInfo={description:"",displayName:"PathsExclusions",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsExclusions.tsx#PathsExclusions"]={docgenInfo:Et.__docgenInfo,name:"PathsExclusions",path:"frontend/src/scenes/insights/EditorFilters/PathsExclusions.tsx#PathsExclusions"})}catch(t){}var _s=n("./frontend/src/scenes/insights/utils/cleanFilters.ts"),Js=n("./frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.scss"),Ss=n("./frontend/src/lib/components/LemonBadge/LemonBadge.tsx");function Pt(t){let{editorFilterGroup:s,insight:a,insightProps:i}=t;const{title:r,editorFilters:l,count:d,defaultExpanded:m=!0}=s,[u,p]=Object(D.useState)(m),{featureFlags:g}=Object(o.useValues)(U.a),v=g[T.i.INSIGHT_EDITOR_PANELS];return Object(e.jsxs)("div",{className:Object(Ge.default)("EditorFilterGroup",{"EditorFilterGroup--editorpanels":v}),children:[r&&Object(e.jsx)("div",{className:"EditorFilterGroup__title",children:Object(e.jsx)(Q.a,{status:"stealth",fullWidth:!0,onClick:()=>p(!u),sideIcon:u?Object(e.jsx)(re.IconUnfoldLess,{}):Object(e.jsx)(re.IconUnfoldMore,{}),title:u?"Show less":"Show more","data-attr":"editor-filter-group-collapse-"+Object(N.Eb)(r),children:Object(e.jsxs)("div",{className:"flex items-center space-x-2 font-semibold",children:[Object(e.jsx)("span",{children:r}),Object(e.jsx)(Ss.a.Number,{count:d||0})]})})}),!v||u?Object(e.jsx)("div",{className:"EditorFilterGroup__content",children:l.map(C=>{var V,b,$;let{label:_,tooltip:I,showOptional:q,key:K,valueSelector:Z,component:A}=C;const se=typeof _=="function"||A?{insight:a,insightProps:i,filters:(V=a.filters)!==null&&V!==void 0?V:Object(_s.a)({}),value:(b=Z?Z(a):a==null||($=a.filters)===null||$===void 0?void 0:$[K])!==null&&b!==void 0?b:null}:null;return Object(e.jsx)("div",{children:Object(e.jsx)(xt.b,{label:typeof _=="function"?Object(e.jsx)(_,z({},se)):_,info:I,showOptional:q,children:A?Object(e.jsx)(A,z({},se)):null})},K)})}):null]},r)}try{Pt.displayName="EditorFilterGroup",Pt.__docgenInfo={description:"",displayName:"EditorFilterGroup",props:{editorFilterGroup:{defaultValue:null,description:"",name:"editorFilterGroup",required:!0,type:{name:"InsightEditorFilterGroup<InsightEditorFilter<EditorFilterProps>>"}},insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"]={docgenInfo:Pt.__docgenInfo,name:"EditorFilterGroup",path:"frontend/src/scenes/insights/EditorFilters/EditorFilterGroup.tsx#EditorFilterGroup"})}catch(t){}var Es=n("./frontend/src/lib/components/PayCard/PayCard.tsx");function Ft(t){let{}=t;return Object(e.jsx)(Es.a,{identifier:c.e.PATHS_ADVANCED,title:"Get a deeper understanding of your users",caption:"Advanced features such as interconnection with funnels, grouping & wildcarding and exclusions can help you gain deeper insights.",docsLink:"https://posthog.com/docs/user-guides/paths",dismissable:!1})}try{Ft.displayName="PathsAdvancedPaywall",Ft.__docgenInfo={description:"",displayName:"PathsAdvancedPaywall",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/PathsAdvancedPaywall.tsx#PathsAdvancedPaywall"]={docgenInfo:Ft.__docgenInfo,name:"PathsAdvancedPaywall",path:"frontend/src/scenes/insights/EditorFilters/PathsAdvancedPaywall.tsx#PathsAdvancedPaywall"})}catch(t){}var Ps=n("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),Fs=n("./frontend/src/scenes/saved-insights/SavedInsights.tsx");function Ct(t){let{value:s}=t;const{setActiveView:a}=Object(o.useActions)(w.c);return Object(e.jsx)(H.LemonSelect,{options:Fs.INSIGHT_TYPE_OPTIONS,value:s,onChange:i=>{i&&a(i)},fullWidth:!0,"data-attr":"insight-type"})}try{Ct.displayName="InsightTypeSelector",Ct.__docgenInfo={description:"",displayName:"InsightTypeSelector",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"]={docgenInfo:Ct.__docgenInfo,name:"InsightTypeSelector",path:"frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx#InsightTypeSelector"})}catch(t){}var Cs=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss"),_n=n.n(Cs),en={};en.insert="head",en.singleton=!1;var Xs=L()(_n.a,en),Zs=_n.a.locals||{};function Tt(t){let{insightProps:s}=t;const{setFilters:a}=Object(o.useActions)(Object(J.a)(s)),{filters:i,breakdownAttributionStepOptions:r}=Object(o.useValues)(Object(J.a)(s));return Object(e.jsx)(H.LemonSelect,{value:i.breakdown_attribution_type||c.j.FirstTouch,placeholder:"Attribution",options:[{value:c.j.FirstTouch,label:"First touchpoint"},{value:c.j.LastTouch,label:"Last touchpoint"},{value:c.j.AllSteps,label:"All steps"},i.funnel_order_type===c.bb.UNORDERED?{value:c.j.Step,label:"Any step"}:{value:c.j.Step,label:"Specific step",element:Object(e.jsx)(H.LemonSelect,{className:"ml-2",onChange:l=>{l!==null&&a({breakdown_attribution_type:c.j.Step,breakdown_attribution_value:l})},placeholder:`Step ${i.breakdown_attribution_value?i.breakdown_attribution_value+1:1}`,options:r})}],onChange:l=>{l&&a({breakdown_attribution_type:l,breakdown_attribution_value:i.breakdown_attribution_value||0})},dropdownMaxContentWidth:!0,"data-attr":"breakdown-attributions"})}try{Tt.displayName="Attribution",Tt.__docgenInfo={description:"",displayName:"Attribution",props:{insight:{defaultValue:null,description:"",name:"insight",required:!0,type:{name:"Partial<InsightModel>"}},insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"Partial<FilterType>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"]={docgenInfo:Tt.__docgenInfo,name:"Attribution",path:"frontend/src/scenes/insights/EditorFilters/AttributionFilter.tsx#Attribution"})}catch(t){}function At(t){var s,a,i;let{insightProps:r,showing:l}=t;const{user:d}=Object(o.useValues)(ye.a),m=(d==null||(s=d.organization)===null||s===void 0?void 0:s.available_features)||[],u=Object(w.c)(r),{filters:p,insight:g,filterPropertiesCount:v}=Object(o.useValues)(u),{preflight:C}=Object(o.useValues)(Ps.a),{advancedOptionsUsedCount:V}=Object(o.useValues)(Object(J.a)(r)),{featureFlags:b}=Object(o.useValues)(U.a),$=b[T.i.INSIGHT_EDITOR_PANELS],_=Object(M.j)(p),I=Object(M.f)(p),q=Object(M.i)(p),K=Object(M.h)(p),Z=Object(M.g)(p),A=Object(M.e)(p),se=_||I||q,we=_&&!T.n.includes(p.display||c.k.ActionsLineGraph)||K&&b[T.i.RETENTION_BREAKDOWN]&&p.display!==c.k.ActionsLineGraph||A&&p.funnel_viz_type===c.B.Steps,nn=_||q||K||Z||A,qe=m.includes(c.e.PATHS_ADVANCED),sn=A&&p.funnel_viz_type===c.B.Steps,Lt=V+(_&&p.formula?1:0),an=!!Lt,ke=[{title:"General",editorFilters:Pe([$?{key:"insight",label:"Type",component:Ct}:void 0,K&&{key:"retention-summary",label:"Retention Summary",component:pt},...Z?Pe([{key:"event-types",label:"Event Types",component:mt},qe&&{key:"wildcard-groups",label:"Wildcard Groups",showOptional:!0,component:ht,tooltip:Object(e.jsxs)(e.Fragment,{children:["Use wildcard matching to group events by unique values in path item names. Use an asterisk (*) in place of unique values. For example, instead of /merchant/1234/payment, replace the unique value with an asterisk /merchant/*/payment. ",Object(e.jsx)("b",{children:"Use a comma to separate multiple wildcards."})]})},{key:"start-target",label:"Starts at",component:gt},qe&&{key:"ends-target",label:"Ends at",component:ft}]):[],...A?Pe([{key:"query-steps",component:Ot}]):[]])},{title:"Series",editorFilters:Pe([se&&{key:"series",label:_?it:void 0,component:at},_?{key:"formula",label:lt,component:ot}:null])},{title:"Filters",count:v,editorFilters:Pe([I?{key:"properties",label:$?void 0:"Filters",position:"right",component:ut}:null,I?{key:"toggles",label:"Lifecycle Toggles",position:"right",component:ct}:null,nn?{key:"properties",label:$?void 0:"Filters",position:"right",component:rt}:null])},{title:"Breakdown",count:((a=p.breakdowns)===null||a===void 0?void 0:a.length)||(p.breakdown?1:0),position:"right",editorFilters:Pe([we?{key:"breakdown",label:"Breakdown by",position:"right",tooltip:Object(e.jsx)(e.Fragment,{children:"Use breakdown to see the aggregation (total volume, active users, etc.) for each value of that property. For example, breaking down by Current URL with total volume will give you the event volume for each URL your users have visited."}),component:dt}:null,sn?{key:"attribution",label:"Attribution type",position:"right",tooltip:Object(e.jsxs)("div",{children:["Attribution type determines which property value to use for the entire funnel.",Object(e.jsxs)("ul",{className:"list-disc pl-4",children:[Object(e.jsx)("li",{children:"First step: the first property value seen from all steps is chosen."}),Object(e.jsx)("li",{children:"Last step: last property value seen from all steps is chosen."}),Object(e.jsx)("li",{children:"Specific step: the property value seen at that specific step is chosen."}),Object(e.jsx)("li",{children:"All steps: the property value must be seen in all steps."}),Object(e.jsx)("li",{children:"Any step: the property value must be seen on at least one step of the funnel."})]})]}),component:Tt}:null])},{title:"Exclusions",position:"right",editorFilters:Pe([Z&&{key:"paths-exclusions",label:"Exclusions",position:"right",tooltip:Object(e.jsx)(e.Fragment,{children:"Exclude events from Paths visualisation. You can use wildcard groups in exclusions as well."}),component:Et}])},{title:"Advanced Options",position:"left",defaultExpanded:an,count:Lt,editorFilters:Pe([Z&&(qe?{key:"paths-advanced",component:jt}:C!=null&&(i=C.instance_preferences)!==null&&i!==void 0&&i.disable_paid_fs?void 0:{key:"paths-paywall",component:Ft}),A&&{key:"funnels-advanced",component:_t}])}].filter(Fe=>Fe.editorFilters.length>0);let wt=[];if(!$){const Fe=ke.reduce((He,Qe)=>He.concat(Qe.editorFilters.filter(Je=>Je.position!=="right")),[]),Rt=ke.reduce((He,Qe)=>He.concat(Qe.editorFilters.filter(Je=>Je.position==="right")),[]);wt=[{title:"Left",editorFilters:Fe},{title:"right",editorFilters:Rt}]}return Object(e.jsx)(Kn.a,{in:l,timeout:250,classNames:"anim-",mountOnEnter:!0,unmountOnExit:!0,children:Object(e.jsx)("div",{className:Object(Ge.default)("EditorFiltersWrapper",{"EditorFiltersWrapper--editorpanels":$,"EditorFiltersWrapper--singlecolumn":$||A}),children:Object(e.jsx)("div",{className:"EditorFilters",children:($||A?ke:wt).map(Fe=>Object(e.jsx)(Pt,{editorFilterGroup:Fe,insight:g,insightProps:r},Fe.title))})})})}function Pe(t){return t.filter(s=>!!s)}try{At.displayName="EditorFilters",At.__docgenInfo={description:"",displayName:"EditorFilters",props:{insightProps:{defaultValue:null,description:"",name:"insightProps",required:!0,type:{name:"InsightLogicProps"}},showing:{defaultValue:null,description:"",name:"showing",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"]={docgenInfo:At.__docgenInfo,name:"EditorFilters",path:"frontend/src/scenes/insights/EditorFilters/EditorFilters.tsx#EditorFilters"})}catch(t){}var Ts=n("./frontend/src/lib/components/LemonButton/More.tsx"),tn=n("./frontend/src/lib/components/LemonDivider/index.ts"),As=n("./frontend/src/scenes/saved-insights/savedInsightsLogic.ts"),Sn=n("./frontend/src/lib/components/Subscriptions/SubscriptionsModal.tsx"),Is=n("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),Ls=n("./frontend/src/lib/components/Sharing/SharingModal.tsx"),ws=n("./frontend/src/lib/components/ExportButton/ExportButton.tsx"),Rs=n("./frontend/src/models/tagsModel.ts"),Ds=n("./frontend/src/queries/Query/Query.tsx");function It(t){var s,a,i;let{insightId:r}=t;const{insightMode:l,subscriptionId:d}=Object(o.useValues)(f.a),{setInsightMode:m}=Object(o.useActions)(f.a),u=Object(w.c)({dashboardItemId:r||"new"}),{insightProps:p,insightLoading:g,filtersKnown:v,filters:C,canEditInsight:V,insight:b,insightChanged:$,tagLoading:_,insightSaving:I,exporterResourceParams:q,isUsingDataExploration:K,showErrorMessage:Z}=Object(o.useValues)(u),{saveInsight:A,setInsightMetadata:se,saveAs:we,reportInsightViewedForRecentInsights:nn,abortAnyRunningQuery:qe,loadResults:sn}=Object(o.useActions)(u),{duplicateInsight:Lt,loadInsights:an}=Object(o.useActions)(As.b),{query:ke}=Object(o.useValues)(Object(O.a)(p)),{setQuery:wt}=Object(o.useActions)(Object(O.a)(p));Object(o.useMountedLogic)(x(p));const{hasAvailableFeature:Fe}=Object(o.useValues)(ye.a),{aggregationLabel:Rt}=Object(o.useValues)(Me.a),{cohortsById:He}=Object(o.useValues)(Wn.a),{mathDefinitions:Qe}=Object(o.useValues)(Gn.f),{featureFlags:Je}=Object(o.useValues)(U.a),{tags:Ms}=Object(o.useValues)(Rs.a),{currentTeamId:ks}=Object(o.useValues)(Gt.a),{push:Dt}=Object(o.useActions)(_e.router);Object(D.useEffect)(()=>{nn()},[r]),Object(D.useEffect)(()=>(Z&&sn(),()=>{qe()}),[]);const rn=Je[T.i.INSIGHT_EDITOR_PANELS];if(r!=="new"&&g&&!v)return Object(e.jsx)(pn,{});const Bs=Object(e.jsxs)("div",{className:"insights-page",children:[r!=="new"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Sn.b,{isOpen:l===c.G.Subscriptions,closeModal:()=>Dt(fe.a.insightView(b.short_id)),insightShortId:r,subscriptionId:d}),Object(e.jsx)(Ls.a,{isOpen:l===c.G.Sharing,closeModal:()=>Dt(fe.a.insightView(b.short_id)),insightShortId:r,insight:b})]}),Object(e.jsx)(Bn.a,{title:Object(e.jsx)(dn.a,{name:"name",value:b.name||"",placeholder:K?Object(Ut.k)(ke.source,Rt):Object(Ut.j)(C,Rt,He,Qe),onSave:Nt=>se({name:Nt}),saveOnBlur:!0,maxLength:400,mode:V?void 0:"view","data-attr":"insight-name",notice:V?void 0:{icon:Object(e.jsx)(re.IconLock,{}),tooltip:"You don't have edit permissions on any of the dashboards this insight belongs to. Ask a dashboard collaborator with edit access to add you."}}),buttons:Object(e.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[l!==c.G.Edit&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Ts.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Q.a,{status:"stealth",onClick:()=>Lt(b,!0),fullWidth:!0,"data-attr":"duplicate-insight-from-insight-view",children:"Duplicate"}),Object(e.jsx)(Q.a,{status:"stealth",onClick:()=>se({favorited:!b.favorited}),fullWidth:!0,children:b.favorited?"Remove from favorites":"Add to favorites"}),Object(e.jsx)(tn.a,{}),Object(e.jsx)(Q.a,{status:"stealth",onClick:()=>b.short_id?Dt(fe.a.insightSharing(b.short_id)):null,fullWidth:!0,children:"Share or embed"}),b.short_id&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Sn.a,{insightShortId:b.short_id}),q?Object(e.jsx)(ws.a,{fullWidth:!0,items:[{export_format:c.t.PNG,insight:b.id},{export_format:c.t.CSV,export_context:q}]}):null,Object(e.jsx)(tn.a,{})]}),Object(e.jsx)(Q.a,{status:"danger",onClick:()=>Object(N.x)({object:b,endpoint:`projects/${ks}/insights`,callback:()=>{an(),Dt(fe.a.savedInsights())}}),fullWidth:!0,children:"Delete insight"})]})}),Object(e.jsx)(tn.a,{vertical:!0})]}),l===c.G.Edit&&b.saved&&Object(e.jsx)(Q.a,{type:"secondary",onClick:()=>m(c.G.View,null),children:"Cancel"}),l!==c.G.Edit&&b.short_id&&Object(e.jsx)(nt,{insight:b,canEditInsight:V}),l!==c.G.Edit?V&&Object(e.jsx)(Q.a,{type:"primary",onClick:()=>m(c.G.Edit,null),"data-attr":"insight-edit-button",children:"Edit"}):Object(e.jsx)(st,{saveAs:we,saveInsight:A,isSaved:b.saved,addingToDashboard:!!((s=b.dashboards)!==null&&s!==void 0&&s.length)&&!b.id,insightSaving:I,insightChanged:$})]}),caption:Object(e.jsxs)(e.Fragment,{children:[!!(V||b.description)&&Object(e.jsx)(dn.a,{multiline:!0,name:"description",value:b.description||"",placeholder:"Description (optional)",onSave:Nt=>se({description:Nt}),saveOnBlur:!0,maxLength:400,mode:V?void 0:"view","data-attr":"insight-description",compactButtons:!0,paywall:!Fe(c.e.DASHBOARD_COLLABORATION)}),V?Object(e.jsx)(cn.a,{tags:(a=b.tags)!==null&&a!==void 0?a:[],onChange:(Nt,on)=>se({tags:on!=null?on:[]}),saving:_,tagsAvailable:Ms,className:"insight-metadata-tags","data-attr":"insight-tags"}):(i=b.tags)!==null&&i!==void 0&&i.length?Object(e.jsx)(cn.a,{tags:b.tags,saving:_,className:"insight-metadata-tags","data-attr":"insight-tags",staticOnly:!0}):null,Object(e.jsx)(Is.a,{at:b.last_modified_at,by:b.last_modified_by,className:"mt-2"})]})}),K?Object(e.jsx)(Ds.a,{query:ke,setQuery:wt}):Object(e.jsxs)(e.Fragment,{children:[!rn&&l===c.G.Edit&&Object(e.jsx)(Bt.a,{}),Object(e.jsxs)("div",{className:Object(Ge.default)("insight-wrapper",{"insight-wrapper--editorpanels":rn,"insight-wrapper--singlecolumn":!rn&&C.insight===c.F.FUNNELS}),children:[Object(e.jsx)(At,{insightProps:p,showing:l===c.G.Edit}),Object(e.jsx)("div",{className:"insights-container","data-attr":"insight-view",children:Object(e.jsx)(Nn.a,{insightMode:l})})]})]}),l!==c.G.View?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(We,{}),Object(e.jsx)(kn,{})]}):null]});return Object(e.jsx)(o.BindLogic,{logic:w.c,props:p,children:Bs})}try{It.displayName="Insight",It.__docgenInfo={description:"",displayName:"Insight",props:{insightId:{defaultValue:null,description:"",name:"insightId",required:!0,type:{name:'"new" | InsightShortId'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/Insight.tsx#Insight"]={docgenInfo:It.__docgenInfo,name:"Insight",path:"frontend/src/scenes/insights/Insight.tsx#Insight"})}catch(t){}var Ns=n("./frontend/src/lib/components/NotFound/index.tsx");function En(){var t,s;const{insightId:a,insight:i,insightCache:r}=Object(o.useValues)(f.a);return a==="new"||a&&i!==null&&i!==void 0&&i.id&&i!==null&&i!==void 0&&i.short_id?Object(e.jsx)(It,{insightId:a}):r!=null&&(t=r.logic)!==null&&t!==void 0&&(s=t.values)!==null&&s!==void 0&&s.insightLoading?Object(e.jsx)(pn,{}):Object(e.jsx)(Ns.a,{object:"insight"})}const Vs={component:En,logic:f.a}},"./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FallOutlined.js":function(y,h,n){"use strict";var f=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},L=k,R=n("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/components/AntdIcon.js"),j=function(ee,D){return o.createElement(R.a,Object(f.a)(Object(f.a)({},ee),{},{ref:D,icon:L}))};j.displayName="FallOutlined";var F=h.a=o.forwardRef(j)},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js":function(y,h,n){"use strict";var f=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var k=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),L=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),R=X(n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),j=f(n("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),F=f(n("./node_modules/.pnpm/rc-checkbox@2.3.2_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-checkbox/es/index.js")),Y=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js"),ee=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js"),D=f(n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/_util/devWarning.js"));function w(P){if(typeof WeakMap!="function")return null;var S=new WeakMap,x=new WeakMap;return(w=function(c){return c?x:S})(P)}function X(P,S){if(!S&&P&&P.__esModule)return P;if(P===null||o(P)!=="object"&&typeof P!="function")return{default:P};var x=w(S);if(x&&x.has(P))return x.get(P);var O={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in P)if(E!=="default"&&Object.prototype.hasOwnProperty.call(P,E)){var T=c?Object.getOwnPropertyDescriptor(P,E):null;T&&(T.get||T.set)?Object.defineProperty(O,E,T):O[E]=P[E]}return O.default=P,x&&x.set(P,O),O}var ce=function(P,S){var x={};for(var O in P)Object.prototype.hasOwnProperty.call(P,O)&&S.indexOf(O)<0&&(x[O]=P[O]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,O=Object.getOwnPropertySymbols(P);c<O.length;c++)S.indexOf(O[c])<0&&Object.prototype.propertyIsEnumerable.call(P,O[c])&&(x[O[c]]=P[O[c]]);return x},le=function(S,x){var O,c=S.prefixCls,E=S.className,T=S.children,U=S.indeterminate,ne=U===void 0?!1:U,Ce=S.style,Te=S.onMouseEnter,De=S.onMouseLeave,pe=S.skipGroup,te=pe===void 0?!1:pe,B=ce(S,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),je=R.useContext(ee.ConfigContext),Ne=je.getPrefixCls,Ae=je.direction,W=R.useContext(Y.GroupContext),ve=R.useRef(B.value);R.useEffect(function(){W==null||W.registerValue(B.value),(0,D.default)("checked"in B||!!W||!("value"in B),"Checkbox","`value` is not a valid prop, do you mean `checked`?")},[]),R.useEffect(function(){if(!te)return B.value!==ve.current&&(W==null||W.cancelValue(ve.current),W==null||W.registerValue(B.value)),function(){return W==null?void 0:W.cancelValue(B.value)}},[B.value]);var ae=Ne("checkbox",c),me=(0,L.default)({},B);W&&!te&&(me.onChange=function(){B.onChange&&B.onChange.apply(B,arguments),W.toggleOption&&W.toggleOption({label:T,value:B.value})},me.name=W.name,me.checked=W.value.indexOf(B.value)!==-1,me.disabled=B.disabled||W.disabled);var ye=(0,j.default)((O={},(0,k.default)(O,"".concat(ae,"-wrapper"),!0),(0,k.default)(O,"".concat(ae,"-rtl"),Ae==="rtl"),(0,k.default)(O,"".concat(ae,"-wrapper-checked"),me.checked),(0,k.default)(O,"".concat(ae,"-wrapper-disabled"),me.disabled),O),E),Ve=(0,j.default)((0,k.default)({},"".concat(ae,"-indeterminate"),ne));return R.createElement("label",{className:ye,style:Ce,onMouseEnter:Te,onMouseLeave:De},R.createElement(F.default,(0,L.default)({},me,{prefixCls:ae,className:Ve,ref:x})),T!==void 0&&R.createElement("span",null,T))},N=R.forwardRef(le);N.displayName="Checkbox";var M=N;h.default=M},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Group.js":function(y,h,n){"use strict";var f=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(h,"__esModule",{value:!0}),h.default=h.GroupContext=void 0;var k=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/extends.js")),L=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/defineProperty.js")),R=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/toConsumableArray.js")),j=f(n("./node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/slicedToArray.js")),F=ce(n("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js")),Y=f(n("./node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js")),ee=f(n("./node_modules/.pnpm/rc-util@5.24.4_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/rc-util/lib/omit.js")),D=f(n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js")),w=n("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/config-provider/index.js");function X(x){if(typeof WeakMap!="function")return null;var O=new WeakMap,c=new WeakMap;return(X=function(T){return T?c:O})(x)}function ce(x,O){if(!O&&x&&x.__esModule)return x;if(x===null||o(x)!=="object"&&typeof x!="function")return{default:x};var c=X(O);if(c&&c.has(x))return c.get(x);var E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in x)if(U!=="default"&&Object.prototype.hasOwnProperty.call(x,U)){var ne=T?Object.getOwnPropertyDescriptor(x,U):null;ne&&(ne.get||ne.set)?Object.defineProperty(E,U,ne):E[U]=x[U]}return E.default=x,c&&c.set(x,E),E}var le=function(x,O){var c={};for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&O.indexOf(E)<0&&(c[E]=x[E]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,E=Object.getOwnPropertySymbols(x);T<E.length;T++)O.indexOf(E[T])<0&&Object.prototype.propertyIsEnumerable.call(x,E[T])&&(c[E[T]]=x[E[T]]);return c},N=F.createContext(null);h.GroupContext=N;var M=function(O,c){var E=O.defaultValue,T=O.children,U=O.options,ne=U===void 0?[]:U,Ce=O.prefixCls,Te=O.className,De=O.style,pe=O.onChange,te=le(O,["defaultValue","children","options","prefixCls","className","style","onChange"]),B=F.useContext(w.ConfigContext),je=B.getPrefixCls,Ne=B.direction,Ae=F.useState(te.value||E||[]),W=(0,j.default)(Ae,2),ve=W[0],ae=W[1],me=F.useState([]),ye=(0,j.default)(me,2),Ve=ye[0],H=ye[1];F.useEffect(function(){"value"in te&&ae(te.value||[])},[te.value]);var e=function(){return ne.map(function(de){return typeof de=="string"?{label:de,value:de}:de})},Mt=function(de){H(function(xe){return xe.filter(function(ge){return ge!==de})})},kt=function(de){H(function(xe){return[].concat((0,R.default)(xe),[de])})},Xe=function(de){var xe=ve.indexOf(de.value),ge=(0,R.default)(ve);xe===-1?ge.push(de.value):ge.splice(xe,1),"value"in te||ae(ge);var _e=e();pe==null||pe(ge.filter(function(fe){return Ve.indexOf(fe)!==-1}).sort(function(fe,Ze){var Wt=_e.findIndex(function(Ie){return Ie.value===fe}),et=_e.findIndex(function(Ie){return Ie.value===Ze});return Wt-et}))},Be=je("checkbox",Ce),We="".concat(Be,"-group"),Bt=(0,ee.default)(te,["value","disabled"]);ne&&ne.length>0&&(T=e().map(function(ie){return F.createElement(D.default,{prefixCls:Be,key:ie.value.toString(),disabled:"disabled"in ie?ie.disabled:te.disabled,value:ie.value,checked:ve.indexOf(ie.value)!==-1,onChange:ie.onChange,className:"".concat(We,"-item"),style:ie.style},ie.label)}));var Oe={toggleOption:Xe,value:ve,disabled:te.disabled,name:te.name,registerValue:kt,cancelValue:Mt},he=(0,Y.default)(We,(0,L.default)({},"".concat(We,"-rtl"),Ne==="rtl"),Te);return F.createElement("div",(0,k.default)({className:he,style:De},Bt,{ref:c}),F.createElement(N.Provider,{value:Oe},T))},P=F.forwardRef(M),S=F.memo(P);h.default=S},"./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/table/Column.js":function(y,h,n){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;function f(k){return null}var o=f;h.default=o},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/AddToDashboard/AddToDashboard.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,"",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/DropdownSelector/DropdownSelector.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".dropdown-selector{padding:.5rem;border:1px solid var(--border-light);border-radius:var(--radius);display:flex;align-items:center;cursor:pointer}.dropdown-selector.disabled{color:var(--muted);cursor:not-allowed}.dropdown-selector.compact{padding:.333rem .5rem}.dropdown-selector .dropdown-arrow{display:flex;align-items:center;padding-left:4px;font-size:1.2em;color:var(--muted-alt)}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/experimental/NPSPrompt.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".nps-prompt{background-color:var(--default);border-radius:var(--radius);padding:6px 1rem 1rem;color:var(--light);position:fixed;bottom:16px;right:16px;width:calc(100% - 32px);max-width:360px;z-index:var(--z-nps-overlay);font-size:.85rem;text-align:center;transition:transform 1s ease-in-out;transform:translateY(0)}.nps-prompt.hide{transform:translateY(150%)}.nps-prompt .prompt-title{font-size:1rem;font-weight:700;margin-bottom:1rem;max-width:90%;margin-left:auto;margin-right:auto;padding-top:10px}.nps-prompt .nps-dismiss{position:absolute;top:6px;right:6px;cursor:pointer}.nps-prompt .nps-header{display:flex;align-items:center;margin-bottom:.5rem}.nps-prompt .nps-progress{flex-grow:1;display:flex;justify-content:center}.nps-prompt .nps-progress .pg-item{width:12px;height:12px;border-radius:50%;background-color:var(--border);margin-right:.5rem}.nps-prompt .nps-progress .pg-item:last-of-type{margin-right:0}.nps-prompt .nps-progress .pg-item.completed{background-color:var(--success)}.nps-prompt .question{text-align:left;padding-bottom:.5rem}.nps-prompt .action-buttons{width:200px;margin:0 auto;padding-top:.5rem}.nps-prompt .action-buttons .ant-btn{margin-bottom:.5rem;width:100%}.nps-prompt .ant-btn:not(.ant-btn-link){background-color:var(--bg-depth);border:1px solid #000;color:var(--light)}.nps-prompt textarea{color:var(--light);background-color:var(--bg-depth);border-color:#000}.nps-prompt .ant-btn-link span{color:var(--light);text-decoration:underline!important}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/EditorFilters.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".EditorFiltersWrapper{flex-shrink:0;border:1px solid var(--border);border-radius:var(--radius);padding:1rem;margin-bottom:1rem}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:1rem}@media screen and (min-width:768px){.EditorFiltersWrapper .EditorFilters{display:flex;gap:2rem}.EditorFiltersWrapper .EditorFilters .EditorFilterGroup{flex:1;width:50%}.EditorFiltersWrapper .EditorFilters>*+*{margin-top:0}}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{margin-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{flex-direction:column;gap:0}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters .EditorFilterGroup{width:auto}.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters>*+*{margin-top:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{border:none;padding:0}@media screen and (min-width:1200px){.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn{--editor-panel-width:max(25vw,28rem)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn .EditorFilters{width:var(--editor-panel-width);display:block;padding-right:1rem}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter{width:0}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1))}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active{width:var(--editor-panel-width);transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--enter-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--enter-active .EditorFilters{transform:translateX(0);transition:transform .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit{width:var(--editor-panel-width)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit .EditorFilters{transform:translateX(0)}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active{width:0;transition:width .25s}.EditorFiltersWrapper.EditorFiltersWrapper--editorpanels.anim--exit-active .EditorFilters,.EditorFiltersWrapper.EditorFiltersWrapper--singlecolumn.anim--exit-active .EditorFilters{transform:translateX(calc(var(--editor-panel-width)*-1));transition:transform .25s}}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/EditorFilters/LifecycleToggles.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".LifecycleToggles{text-transform:uppercase}.LifecycleToggles div{font-size:12px;display:flex;justify-content:space-between;padding-bottom:4px;align-items:center}.LifecycleToggles .new .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-new);background-color:var(--lifecycle-new)}.LifecycleToggles .returning .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-returning);background-color:var(--lifecycle-returning)}.LifecycleToggles .resurrecting .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-resurrecting);background-color:var(--lifecycle-resurrecting)}.LifecycleToggles .dormant .ant-checkbox-checked .ant-checkbox-inner{border-color:var(--lifecycle-dormant);background-color:var(--lifecycle-dormant)}",""]),y.exports=h},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/Insight.scss":function(y,h,n){var f=n("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js");h=f(!1),h.push([y.i,".insights-page .ant-card-bordered{border-radius:var(--radius);box-shadow:none;border:1px solid var(--border)}.insights-page h2{font-size:1.125rem;font-weight:600}.insights-page .top-bar,.insights-page .top-bar .ant-tabs,.insights-page .top-bar .ant-tabs-nav-list{width:100%}.insights-page .top-bar .ant-btn-loading-icon{display:none}.insights-page .top-bar .ant-tabs-tab{padding:0}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn,.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.insights-page .top-bar .ant-tabs-tab .ant-tabs-tab-btn .tab-text{padding-bottom:6px;color:inherit}.insights-page .insight-history-button{padding-right:0;padding-left:0;border-radius:0;border:0;border-bottom:2px solid transparent}.insights-page .insight-history-button.active{border-bottom:2px solid var(--primary)}.insights-page hr{margin:1rem 0}.insights-page .ant-tabs-tab .hotkey{margin-bottom:0;background-color:var(--primary-bg-hover)!important;border-color:var(--primary-bg-hover)!important}.insights-page .ant-tabs-tab .deprecated{color:var(--muted)}.insights-page .ant-tabs-tab .deprecated .hotkey{margin-bottom:0;background-color:var(--light)!important;border-color:var(--border)!important;color:var(--muted)}.insights-page .ant-tabs-tab.ant-tabs-tab-active .deprecated{color:var(--primary)}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .hotkey{background-color:var(--primary-bg-active)!important}.insights-page .ant-tabs-tab:not(.ant-tabs-tab-active):hover .deprecated .hotkey{background-color:var(--light)!important}.insights-page .insight-controls{overflow:visible;position:relative;margin-bottom:1rem}.insights-page .insight-controls .ant-card-body{padding:.8rem 1rem}.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{position:relative}@media screen and (min-width:1200px){.insights-page .insight-wrapper.insight-wrapper--editorpanels,.insights-page .insight-wrapper.insight-wrapper--singlecolumn{display:flex;overflow:hidden}.insights-page .insight-wrapper.insight-wrapper--editorpanels .insights-container,.insights-page .insight-wrapper.insight-wrapper--singlecolumn .insights-container{flex:1;overflow-x:auto}}.insights-page .insights-graph-container{background:#fff;margin-bottom:1rem}.insights-page .insights-graph-container .ant-card-head{border-bottom:1px solid var(--border);min-height:unset;background-color:var(--bg-light);padding-left:1rem;padding-right:1rem}.insights-page .insights-graph-container .ant-card-body,.insights-page .insights-graph-container .ant-card-head .ant-card-head-title{padding:0}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-left{width:100%}.insights-page .insights-graph-container .insights-graph-container-row .insights-graph-container-row-right{height:min(90vh - 16rem,36rem);max-width:300px;width:-moz-fit-content;width:fit-content;padding:0 1rem 1rem 0;display:flex;align-items:center}.insights-page .insights-graph-container .LineGraph{width:calc(100% - 3rem);height:calc(100% - 3rem)}.insights-page .insight-title-container{display:flex;align-items:center}.insights-page .insight-title-container .insight-title-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.insights-page .advanced-options-dropdown{font-size:1.4em;color:var(--primary-alt)}.insights-page .advanced-options-dropdown.expanded{transform:rotateX(180deg)}.insights-page .funnel-advanced-options .funnel-exclusions-filter .mt:first-of-type{margin-top:.5rem}.insights-page .retention-date-picker{background-color:transparent;border:0}.insights-page .retention-date-picker input::-moz-placeholder{color:var(--default)}.insights-page .retention-date-picker input::placeholder{color:var(--default)}.insights-page .insights-graph-header{margin-top:0!important;margin-bottom:0!important;padding-left:1rem;padding-right:1rem;min-height:48px}.insight-metadata-tags{margin-top:.5rem}.insight-metadata-tags .ant-tag{margin-top:0}.trends-insights-container{position:relative;min-height:min(90vh - 16rem,36rem);display:flex;justify-content:center}.trends-insights-container .LineGraph{height:calc(100% - 1rem)!important}.funnel-insights-container{background-color:var(--funnel-canvas-background);border-radius:0 0 var(--radius) var(--radius)}.funnel-insights-container.non-empty-state{min-height:26rem;position:relative;margin-bottom:0}.funnel-insights-container .ant-table-wrapper{margin-top:0!important}.funnel-tab-btn-popover .ant-popover-inner-content{padding:4px 15px}.funnel-tab-btn-popover .ant-popover-inner-content button.ant-btn-link{padding:0;margin:0 0 0 4px}.significance-highlight{display:inline-flex;background:var(--primary);color:var(--bg-light)}.significance-highlight .LemonIcon{color:var(--bg-light)}",""]),y.exports=h}}]);
