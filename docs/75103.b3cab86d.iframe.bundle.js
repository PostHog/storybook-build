"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[75103],{"../../products/error_tracking/frontend/components/Indicators.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>StatusIndicator,V:()=>LabelIndicator});var clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let sizeVariants={xsmall:"gap-1 text-xs",small:"gap-2 text-sm",medium:"gap-3 text-base",large:"gap-3 text-lg"};function LabelIndicator(_ref){let{intent,label,size,tooltip,className}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.u,{title:tooltip,placement:"right",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.default)("flex items-center",className,sizeVariants[size]),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Mo,{status:intent,size:"small"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{children:label})]})})}let STATUS_LABEL={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release",suppressed:"Suppressed"},STATUS_INTENT={active:"warning",archived:"muted",resolved:"success",pending_release:"muted",suppressed:"danger"},STATUS_INTENT_LABEL={active:"Reopen issue",suppressed:"Suppress issue",archived:"Archive issue",pending_release:"Resolve in next version",resolved:"Resolve issue"},STATUS_TOOLTIP={suppressed:"Stop capturing this issue",active:"Ongoing issue",archived:void 0,resolved:"Will become active again on next occurrence",pending_release:void 0};function StatusIndicator(_ref2){let{status,size="small",intent=!1,className,withTooltip}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(LabelIndicator,{intent:STATUS_INTENT[status],size:size,label:intent?STATUS_INTENT_LABEL[status]:STATUS_LABEL[status],tooltip:withTooltip?STATUS_TOOLTIP[status]:void 0,className:className})}},"../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>issueActionsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.274.1_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts");let issueActionsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["products","error_tracking","components","IssueActions","issueActionsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({mergeIssues:ids=>({ids}),splitIssue:function(id,fingerprints){let exclusive=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return{id,fingerprints,exclusive}},resolveIssues:ids=>({ids}),suppressIssues:ids=>({ids}),activateIssues:ids=>({ids}),assignIssues:(ids,assignee)=>({ids,assignee}),updateIssueAssignee:(id,assignee)=>({id,assignee}),updateIssueStatus:(id,status)=>({id,status}),updateIssueName:(id,name)=>({id,name}),updateIssueDescription:(id,description)=>({id,description}),mutationSuccess:mutationName=>({mutationName}),mutationFailure:(mutationName,error)=>({mutationName,error})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref=>{let{actions}=_ref;async function runMutation(mutationName,cb){try{await cb(),actions.mutationSuccess(mutationName)}catch(e){actions.mutationFailure(mutationName,e)}}return{mergeIssues:async _ref2=>{let{ids}=_ref2,[firstId,...otherIds]=ids;firstId&&otherIds.length>0&&await runMutation("mergeIssues",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_merged",{primary:firstId}),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.mergeInto(firstId,otherIds)})},splitIssue:async _ref3=>{let{id,fingerprints,exclusive}=_ref3;await runMutation("splitIssues",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_split",{issueId:id}),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.split(id,fingerprints,exclusive)})},resolveIssues:async _ref4=>{let{ids}=_ref4;await runMutation("resolveIssues",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_resolve"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"resolved")})},suppressIssues:async _ref5=>{let{ids}=_ref5;await runMutation("suppressIssues",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_suppress"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"suppressed")})},activateIssues:async _ref6=>{let{ids}=_ref6;await runMutation("activateIssues",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_activate"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"active")})},assignIssues:async _ref7=>{let{ids,assignee}=_ref7;await runMutation("assignIssues",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_assign"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkAssign(ids,assignee)})},updateIssueAssignee:async _ref8=>{let{id,assignee}=_ref8;await runMutation("updateIssueAssignee",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_assignee"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.assignIssue(id,assignee)})},updateIssueStatus:async _ref9=>{let{id,status}=_ref9;await runMutation("updateIssueStatus",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_status"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{status})})},updateIssueName:async _ref10=>{let{id,name}=_ref10;await runMutation("updateIssueName",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_name"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{name})})},updateIssueDescription:async _ref11=>{let{id,description}=_ref11;await runMutation("updateIssueDescription",async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_description"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{description})})}}})])},"../../products/error_tracking/frontend/components/IssueFilters/FilterGroup.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Vd:()=>taxonomicFilterLogicKey,e_:()=>FilterGroup,o5:()=>taxonomicGroupTypes});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),use_debounce__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../node_modules/.pnpm/use-debounce@9.0.3_react@18.2.0/node_modules/use-debounce/dist/index.module.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_TaxonomicFilter_InfiniteSelectResults__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/InfiniteSelectResults.tsx"),lib_components_TaxonomicFilter_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),lib_components_TaxonomicFilter_taxonomicFilterLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx"),lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/UniversalFilters.tsx"),lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/universalFiltersLogic.ts"),lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/components/UniversalFilters/utils.ts"),lib_hooks_useOnMountEffect__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../frontend/src/lib/hooks/useOnMountEffect.ts"),_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/types.ts"),_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../products/error_tracking/frontend/components/IssueFilters/issueFiltersLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let taxonomicFilterLogicKey="error-tracking",taxonomicGroupTypes=[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.ErrorTrackingProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.ErrorTrackingIssues,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.EventProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.PersonProperties,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.Cohorts,lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.HogQLExpression],FilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.H),{setFilterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.H);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__.Z,{rootKey:taxonomicFilterLogicKey,group:filterGroup.values[0],taxonomicGroupTypes:taxonomicGroupTypes,onChange:group=>setFilterGroup({type:_types__WEBPACK_IMPORTED_MODULE_11__.J2.And,values:[group]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(UniversalSearch,{})})},UniversalSearch=()=>{let[visible,setVisible]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),{searchQuery}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.H),{setSearchQuery}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_12__.H),{addGroupFilter}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__.d),searchInputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),floatingRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),onClose=()=>{searchInputRef.current?.blur(),setVisible(!1)},taxonomicFilterLogicProps={taxonomicFilterLogicKey,taxonomicGroupTypes,onChange:(taxonomicGroup,value,item,originalQuery)=>{searchInputRef.current?.blur(),setVisible(!1),setSearchQuery(""),addGroupFilter(taxonomicGroup,value,item,originalQuery)},onEnter:onClose,autoSelectItem:!1,initialSearchQuery:searchQuery,excludedProperties:{[lib_components_TaxonomicFilter_types__WEBPACK_IMPORTED_MODULE_6__.t.ErrorTrackingIssues]:["assignee"]}},onChange=(0,use_debounce__WEBPACK_IMPORTED_MODULE_14__.y1)(value=>setSearchQuery(value),250);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(kea__WEBPACK_IMPORTED_MODULE_0__.BindLogic,{logic:lib_components_TaxonomicFilter_taxonomicFilterLogic__WEBPACK_IMPORTED_MODULE_5__.aS,props:taxonomicFilterLogicProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Qw,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_TaxonomicFilter_InfiniteSelectResults__WEBPACK_IMPORTED_MODULE_3__.Q,{focusInput:()=>searchInputRef.current?.focus(),taxonomicFilterLogicProps:taxonomicFilterLogicProps,popupAnchorElement:floatingRef.current,useVerticalLayout:!0}),matchWidth:!0,visible:visible,closeOnClickInside:!1,floatingRef:floatingRef,onClickOutside:()=>onClose(),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_TaxonomicFilter_TaxonomicFilter__WEBPACK_IMPORTED_MODULE_4__.N,{prefix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(UniversalFilterGroup,{}),onClick:()=>setVisible(!0),searchInputRef:searchInputRef,onClose:()=>onClose(),onChange:onChange,size:"small",fullWidth:!0,docLink:"https://posthog.com/docs/error-tracking/filter-and-search-issues"})})})},UniversalFilterGroup=()=>{let{filterGroup}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__.d),{replaceGroupValue,removeGroupValue}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(lib_components_UniversalFilters_universalFiltersLogic__WEBPACK_IMPORTED_MODULE_8__.d),[allowInitiallyOpen,setAllowInitiallyOpen]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,lib_hooks_useOnMountEffect__WEBPACK_IMPORTED_MODULE_10__.x)(()=>setAllowInitiallyOpen(!0)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.Fragment,{children:filterGroup.values.map((filterOrGroup,index)=>(0,lib_components_UniversalFilters_utils__WEBPACK_IMPORTED_MODULE_9__.pU)(filterOrGroup)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__.Z.Group,{index:index,group:filterOrGroup,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(UniversalSearch,{})},index):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(lib_components_UniversalFilters_UniversalFilters__WEBPACK_IMPORTED_MODULE_7__.Z.Value,{index:index,filter:filterOrGroup,onRemove:()=>removeGroupValue(index),onChange:value=>replaceGroupValue(index,value),initiallyOpen:allowInitiallyOpen&&filterOrGroup.type!=_types__WEBPACK_IMPORTED_MODULE_11__.FT.HogQL},index))})}},"../../products/error_tracking/frontend/components/IssueFilters/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>ErrorFilters});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),AssigneeDisplay=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeDisplay.tsx"),AssigneeSelect=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeSelect.tsx"),issueQueryOptionsLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueQueryOptions/issueQueryOptionsLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),DateFilter=__webpack_require__("../../frontend/src/lib/components/DateFilter/DateFilter.tsx"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),issueFiltersLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueFilters/issueFiltersLogic.ts");let errorTrackingDateOptions=utils.bE.filter(dm=>!["Yesterday","All time","Today"].includes(dm.key));errorTrackingDateOptions.unshift({key:"Last hour",values:["-1h"],getFormattedDate:date=>date.subtract(1,"h").format(utils.zT)});var FilterGroup=__webpack_require__("../../products/error_tracking/frontend/components/IssueFilters/FilterGroup.tsx"),TestAccountFilter=__webpack_require__("../../frontend/src/scenes/insights/filters/TestAccountFilter/index.ts"),Indicators=__webpack_require__("../../products/error_tracking/frontend/components/Indicators.tsx");let ErrorFilters={Root:_ref=>{let{children}=_ref;return(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:children})},DateRange:_ref=>{let{className,fullWidth=!1,size="small"}=_ref,{dateRange}=(0,index_esm.useValues)(issueFiltersLogic.H),{setDateRange}=(0,index_esm.useActions)(issueFiltersLogic.H);return(0,jsx_runtime.jsx)("span",{className:(0,css_classes.cn)("rounded bg-surface-primary",className),children:(0,jsx_runtime.jsx)(DateFilter.f,{size:size,dateFrom:dateRange.date_from,dateTo:dateRange.date_to,fullWidth:fullWidth,dateOptions:errorTrackingDateOptions,onChange:(changedDateFrom,changedDateTo)=>setDateRange({date_from:changedDateFrom,date_to:changedDateTo}),allowedRollingDateOptions:["hours","days","weeks","months","years"]})})},FilterGroup:FilterGroup.e_,Assignee:()=>{let{assignee}=(0,index_esm.useValues)(issueQueryOptionsLogic.n),{setAssignee}=(0,index_esm.useActions)(issueQueryOptionsLogic.n);return(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:null!=assignee?assignee:null,onChange:assignee=>setAssignee(assignee),children:displayAssignee=>(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",size:"small",children:(0,jsx_runtime.jsx)(AssigneeDisplay.VQ,{assignee:displayAssignee,placeholder:"Any assignee"})})})},Status:()=>{let{status}=(0,index_esm.useValues)(issueQueryOptionsLogic.n),{setStatus}=(0,index_esm.useActions)(issueQueryOptionsLogic.n),label=key=>{switch(key){case"all":case null:return(0,jsx_runtime.jsx)(Indicators.V,{intent:"muted",label:"All",size:"small"});default:return(0,jsx_runtime.jsx)(Indicators.E,{status:key,size:"small"})}};return(0,jsx_runtime.jsx)(src.Yv,{onChange:value=>setStatus(value||void 0),value:status||null,placeholder:"Select status",options:["all","active","resolved","suppressed"].map(key=>({value:key,label:label(key)})),size:"small"})},InternalAccounts:()=>{let{filterTestAccounts}=(0,index_esm.useValues)(issueFiltersLogic.H),{setFilterTestAccounts}=(0,index_esm.useActions)(issueFiltersLogic.H);return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(TestAccountFilter.z,{size:"small",filters:{filter_test_accounts:filterTestAccounts},onChange:_ref=>{let{filter_test_accounts}=_ref;return setFilterTestAccounts(filter_test_accounts||!1)}})})}}},"../../products/error_tracking/frontend/components/IssueFilters/issueFiltersLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>issueFiltersLogic});var fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../products/error_tracking/frontend/utils.ts");let DEFAULT_DATE_RANGE={date_from:"-7d",date_to:null},DEFAULT_FILTER_GROUP={type:_types__WEBPACK_IMPORTED_MODULE_3__.J2.And,values:[{type:_types__WEBPACK_IMPORTED_MODULE_3__.J2.And,values:[]}]},issueFiltersLogic=(0,kea__WEBPACK_IMPORTED_MODULE_1__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_1__.path)(["products","error_tracking","components","IssueFilters","issueFiltersLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_1__.actions)({setDateRange:dateRange=>({dateRange}),setSearchQuery:searchQuery=>({searchQuery}),setFilterGroup:filterGroup=>({filterGroup}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts})}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.reducers)({dateRange:[DEFAULT_DATE_RANGE,{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],filterGroup:[DEFAULT_FILTER_GROUP,{persist:!0},{setFilterGroup:(_,_ref2)=>{let{filterGroup}=_ref2;return filterGroup}}],filterTestAccounts:[!1,{persist:!0},{setFilterTestAccounts:(_,_ref3)=>{let{filterTestAccounts}=_ref3;return filterTestAccounts}}],searchQuery:["",{setSearchQuery:(_,_ref4)=>{let{searchQuery}=_ref4;return searchQuery}}]}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.urlToAction)(_ref5=>{let{actions,values}=_ref5;return{"*":(_,params)=>{params.dateRange&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.dateRange,values.dateRange)&&actions.setDateRange(params.dateRange),params.filterGroup&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.filterGroup,values.filterGroup)&&actions.setFilterGroup(params.filterGroup),params.filterTestAccounts&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.filterTestAccounts,values.filterTestAccounts)&&actions.setFilterTestAccounts(params.filterTestAccounts),params.searchQuery&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.searchQuery,values.searchQuery)&&actions.setSearchQuery(params.searchQuery)}}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.actionToUrl)(_ref6=>{let{values}=_ref6,buildURL=()=>(0,_utils__WEBPACK_IMPORTED_MODULE_4__.qI)(kea_router__WEBPACK_IMPORTED_MODULE_2__.router,params=>((0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"filterTestAccounts",values.filterTestAccounts,!1),(0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"searchQuery",values.searchQuery,""),(0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"filterGroup",values.filterGroup,DEFAULT_FILTER_GROUP),(0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"dateRange",values.dateRange,DEFAULT_DATE_RANGE),params));return{setDateRange:()=>buildURL(),setFilterGroup:()=>buildURL(),setSearchQuery:()=>buildURL(),setFilterTestAccounts:()=>buildURL()}})])},"../../products/error_tracking/frontend/components/IssueQueryOptions/issueQueryOptionsLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>issueQueryOptionsLogic});var fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../products/error_tracking/frontend/utils.ts");let DEFAULT_ORDER_BY="last_seen",DEFAULT_ORDER_DIRECTION="DESC",DEFAULT_REVENUE_PERIOD="last_30_days",DEFAULT_REVENUE_ENTITY="person",DEFAULT_STATUS="active",issueQueryOptionsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_1__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_1__.path)(["products","error_tracking","components","IssueQueryOptions","issueQueryOptionsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_1__.actions)({setOrderBy:orderBy=>({orderBy}),setOrderDirection:orderDirection=>({orderDirection}),setRevenueEntity:revenueEntity=>({revenueEntity}),setRevenuePeriod:revenuePeriod=>({revenuePeriod}),setAssignee:assignee=>({assignee}),setStatus:status=>({status})}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.reducers)({orderBy:[DEFAULT_ORDER_BY,{persist:!0},{setOrderBy:(_,_ref)=>{let{orderBy}=_ref;return orderBy}}],orderDirection:[DEFAULT_ORDER_DIRECTION,{persist:!0},{setOrderDirection:(_,_ref2)=>{let{orderDirection}=_ref2;return orderDirection}}],revenuePeriod:[DEFAULT_REVENUE_PERIOD,{persist:!0},{setRevenuePeriod:(_,_ref3)=>{let{revenuePeriod}=_ref3;return revenuePeriod}}],revenueEntity:[DEFAULT_REVENUE_ENTITY,{persist:!0},{setRevenueEntity:(_,_ref4)=>{let{revenueEntity}=_ref4;return revenueEntity}}],assignee:[null,{persist:!0},{setAssignee:(_,_ref5)=>{let{assignee}=_ref5;return assignee}}],status:[DEFAULT_STATUS,{persist:!0},{setStatus:(_,_ref6)=>{let{status}=_ref6;return status}}]}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.actionToUrl)(_ref7=>{let{values}=_ref7,buildURL=()=>(0,_utils__WEBPACK_IMPORTED_MODULE_3__.qI)(kea_router__WEBPACK_IMPORTED_MODULE_2__.router,params=>((0,_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"assignee",values.assignee,null),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"status",values.status,DEFAULT_STATUS),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"orderBy",values.orderBy,DEFAULT_ORDER_BY),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"orderDirection",values.orderDirection,DEFAULT_ORDER_DIRECTION),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"revenuePeriod",values.revenuePeriod,DEFAULT_REVENUE_PERIOD),(0,_utils__WEBPACK_IMPORTED_MODULE_3__.aM)(params,"revenueEntity",values.revenueEntity,DEFAULT_REVENUE_ENTITY),params));return{setOrderBy:()=>buildURL(),setStatus:()=>buildURL(),setAssignee:()=>buildURL(),setRevenuePeriod:()=>buildURL(),setRevenueEntity:()=>buildURL(),setOrderDirection:()=>buildURL()}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.urlToAction)(_ref8=>{let{actions,values}=_ref8;return{"*":(_,params)=>{params.orderBy&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.orderBy,values.orderBy)&&actions.setOrderBy(params.orderBy),params.status&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.status,values.status)&&actions.setStatus(params.status),params.assignee&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.assignee,values.assignee)&&actions.setAssignee(params.assignee),params.orderDirection&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.orderDirection,values.orderDirection)&&actions.setOrderDirection(params.orderDirection),params.revenueEntity&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.revenueEntity,values.revenueEntity)&&actions.setRevenueEntity(params.revenueEntity),params.revenuePeriod&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.revenuePeriod,values.revenuePeriod)&&actions.setOrderDirection(params.revenuePeriod)}}})])},"../../products/error_tracking/frontend/components/SetupPrompt/SetupPrompt.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingSetupPrompt});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.33.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils/product-intents.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/types.ts"),_exceptionIngestionLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/components/SetupPrompt/exceptionIngestionLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ErrorTrackingSetupPrompt=_ref=>{let{children}=_ref,{hasSentExceptionEvent,hasSentExceptionEventLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_exceptionIngestionLogic__WEBPACK_IMPORTED_MODULE_7__.L),{currentTeam,currentTeamLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic),exceptionAutocaptureEnabled=currentTeam&&currentTeam.autocapture_exceptions_opt_in;return hasSentExceptionEventLoading||currentTeamLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.$j,{})}):hasSentExceptionEvent||exceptionAutocaptureEnabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(IngestionStatusCheck,{})},IngestionStatusCheck=()=>{let{addProductIntent,updateCurrentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__.C,{productName:"Error tracking",thingName:"issue",titleOverride:"You haven't captured any exceptions",description:"To start capturing exceptions you need to enable exception autocapture. Exception autocapture only applies to the JS SDK. Installation for other platforms are described in the docs.",isEmpty:!0,productKey:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,actionElementOverride:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{type:"primary",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_EXCEPTION_AUTOCAPTURE_ENABLED}),updateCurrentTeam({autocapture_exceptions_opt_in:!0})},children:"Enable exception autocapture"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{targetBlank:!0,sideIcon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconExternal,{className:"w-5 h-5"}),to:"https://posthog.com/docs/error-tracking/installation",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_DOCS_VIEWED})},children:"Read the docs"})]})})}},"../../products/error_tracking/frontend/components/SetupPrompt/exceptionIngestionLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>exceptionIngestionLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/utils/definitions.ts"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/types.ts");let exceptionIngestionLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["products","error_tracking","components","SetupPrompt","exceptionIngestionLogic"]),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)({hasSentExceptionEvent:{__default:void 0,loadExceptionEventDefinition:async()=>{let definition=(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.eventDefinitions.list({event_type:_types__WEBPACK_IMPORTED_MODULE_4__.uW.Event,search:"$exception"})).results.find(r=>"$exception"===r.name);return!!definition&&!(0,lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__.U)(definition)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref=>{let{actions}=_ref;actions.loadExceptionEventDefinition()})])},"../../products/error_tracking/frontend/hooks/use-sparkline-data.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>useSparklineData,U:()=>useSparklineDataIssueScene});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/utils.tsx"),_scenes_ErrorTrackingIssueScene_errorTrackingIssueSceneLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../products/error_tracking/frontend/scenes/ErrorTrackingIssueScene/errorTrackingIssueSceneLogic.ts"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../products/error_tracking/frontend/utils.ts");function generateFallbackData(dateRange,volumeResolution){var _dateRange$date_to;let defaultData=Array(volumeResolution).fill({value:0,date:new Date});if(!dateRange||!dateRange.date_from)return defaultData;let dateFrom=(0,lib_utils__WEBPACK_IMPORTED_MODULE_2__.FZ)(dateRange.date_from),dateTo=(0,lib_utils__WEBPACK_IMPORTED_MODULE_2__.FZ)(null!==(_dateRange$date_to=dateRange.date_to)&&void 0!==_dateRange$date_to?_dateRange$date_to:new Date().toISOString());if(!dateFrom||!dateTo)return defaultData;let binSize=dateTo.diff(dateFrom,"ms")/volumeResolution;return 0===binSize?defaultData:defaultData.map((_ref,index)=>{let{value}=_ref;return{value,date:dateFrom.add(index*binSize,"ms").toDate()}})}function generateDataFromVolumeBuckets(volumeBuckets){return volumeBuckets.map(_ref2=>{let{label,value}=_ref2;return{value,date:new Date(label)}})}function useSparklineData(aggregations,volumeResolution,dateRange){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>aggregations?.volume_buckets?generateDataFromVolumeBuckets(aggregations.volume_buckets):generateFallbackData(dateRange,volumeResolution),[aggregations,volumeResolution,dateRange])}function useSparklineDataIssueScene(){let{aggregations,dateRange}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_scenes_ErrorTrackingIssueScene_errorTrackingIssueSceneLogic__WEBPACK_IMPORTED_MODULE_3__.r);return useSparklineData(aggregations,_utils__WEBPACK_IMPORTED_MODULE_4__.q7,dateRange)}},"../../products/error_tracking/frontend/hooks/use-sparkline-options.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>useSparklineOptions,z:()=>useDefaultSparklineColorVars});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_layout_navigation_3000_themeLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/layout/navigation-3000/themeLogic.ts");function useSparklineOptions(){let overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},deps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],colorVars=useDefaultSparklineColorVars();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({backgroundColor:`var(--${colorVars[0]})`,hoverBackgroundColor:`var(--${colorVars[1]})`,axisColor:`var(--${colorVars[0]})`,borderRadius:5,eventLabelHeight:20,eventLabelPaddingX:5,eventLabelPaddingY:3,eventMinSpace:2,minBarHeight:10,...overrides}),[colorVars,...deps])}let DARK_MODE_COLORS=["color-zinc-400","color-zinc-200"],LIGHT_MODE_COLORS=["color-zinc-400","color-zinc-600"];function useDefaultSparklineColorVars(){let{isDarkModeOn}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_layout_navigation_3000_themeLogic__WEBPACK_IMPORTED_MODULE_2__.b);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>isDarkModeOn?DARK_MODE_COLORS:LIGHT_MODE_COLORS,[isDarkModeOn])}},"../../products/error_tracking/frontend/scenes/ErrorTrackingIssueScene/errorTrackingIssueSceneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>errorTrackingIssueSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.7_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_dayjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/dayjs.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/utils.tsx"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/types.ts"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/types.ts"),_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),_components_IssueFilters_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../products/error_tracking/frontend/components/IssueFilters/issueFiltersLogic.ts"),_queries__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../products/error_tracking/frontend/queries.ts"),_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../products/error_tracking/frontend/utils.ts");let errorTrackingIssueSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["products","error_tracking","scenes","ErrorTrackingIssueScene","errorTrackingIssueSceneLogic",key]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.id),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[_components_IssueFilters_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_11__.H,["dateRange","filterTestAccounts","filterGroup","searchQuery"]],actions:[_components_IssueFilters_issueFiltersLogic__WEBPACK_IMPORTED_MODULE_11__.H,["setDateRange","setFilterTestAccounts","setFilterGroup","setSearchQuery"],_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_10__.x,["updateIssueAssignee","updateIssueStatus","updateIssueName","updateIssueDescription"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({loadIssue:!0,loadSummary:!0,loadInitialEvent:timestamp=>({timestamp}),setInitialEventTimestamp:timestamp=>({timestamp}),setIssue:issue=>({issue}),setLastSeen:lastSeen=>({lastSeen}),selectEvent:event=>({event}),createExternalReference:(integrationId,config)=>({integrationId,config}),updateAssignee:assignee=>({assignee}),updateStatus:status=>({status}),updateName:name=>({name}),updateDescription:description=>({description})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.defaults)({issue:null,summary:null,properties:null,lastSeen:null,initialEvent:null,selectedEvent:null,initialEventTimestamp:null,initialEventLoading:!0}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)(_ref=>{let{values}=_ref;return{summary:{},lastSeen:{setLastSeen:(prevLastSeen,_ref2)=>{let{lastSeen}=_ref2,lastSeenDayjs=(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_5__.Bv)(lastSeen);return!prevLastSeen||prevLastSeen.isBefore(lastSeenDayjs)?lastSeenDayjs:prevLastSeen}},initialEventTimestamp:{setInitialEventTimestamp:(state,_ref3)=>{let{timestamp}=_ref3;return!state&&timestamp?timestamp:state}},selectedEvent:{selectEvent:(_,_ref4)=>{let{event}=_ref4;return!event&&values.initialEvent?values.initialEvent:event}}}}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref5=>{let{values,actions,props}=_ref5;return{issue:{setIssue:_ref6=>{let{issue}=_ref6;return issue},loadIssue:async()=>await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.getIssue(props.id,props.fingerprint),createExternalReference:async _ref7=>{let{integrationId,config}=_ref7;if(values.issue){var _values$issue$externa;let response=await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.createExternalReference(props.id,integrationId,config),externalIssues=null!==(_values$issue$externa=values.issue.external_issues)&&void 0!==_values$issue$externa?_values$issue$externa:[];return{...values.issue,external_issues:[...externalIssues,response]}}return null},updateAssignee:_ref8=>{let{assignee}=_ref8;return values.issue?{...values.issue,assignee}:values.issue},updateStatus:_ref9=>{let{status}=_ref9;return values.issue?{...values.issue,status}:values.issue},updateName:_ref10=>{let{name}=_ref10;return values.issue?{...values.issue,name}:values.issue},updateDescription:_ref11=>{let{description}=_ref11;return values.issue?{...values.issue,description}:values.issue}},initialEvent:{loadInitialEvent:async _ref12=>{let{timestamp}=_ref12,issue=(await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_12__.zx)({issueId:props.id,dateRange:getNarrowDateRange(timestamp),filterTestAccounts:!1,withAggregations:!1,withFirstEvent:!1,withLastEvent:!0}),{refresh:"blocking"})).results[0],positionEvent=null;if(!issue.last_event)return null;let initialEvent={uuid:(positionEvent=issue.last_event).uuid,timestamp:positionEvent.timestamp,person:{distinct_ids:[],properties:{}},properties:JSON.parse(positionEvent.properties)};return values.selectedEvent||actions.selectEvent(initialEvent),initialEvent}},summary:{loadSummary:async()=>{let response=await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_12__.zx)({issueId:props.id,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,filterGroup:values.filterGroup,searchQuery:values.searchQuery,volumeResolution:_utils__WEBPACK_IMPORTED_MODULE_13__.q7,withAggregations:!0,withFirstEvent:!1,withLastEvent:!1}),{refresh:"blocking"});if(!response.results.length)return null;let summary=response.results[0];return summary.aggregations?{first_seen:summary.first_seen,last_seen:summary.last_seen,aggregations:summary.aggregations}:null}},issueFingerprints:[[],{loadIssueFingerprints:async()=>(await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.fingerprints.list(props.id)).results}],similarIssues:[[],{loadSimilarIssues:async()=>await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.getSimilarIssues(props.id)}]}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)(_ref13=>{let{actions}=_ref13;return{breadcrumbs:[s=>[s.issue],issue=>{let exceptionType=issue?.name||"Issue";return[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_7__.x.ErrorTracking,name:"Error tracking",path:scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.errorTracking(),iconType:"error_tracking"},{key:[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_7__.x.ErrorTrackingIssue,exceptionType],name:exceptionType,onRename:async name=>actions.updateName(name),iconType:"error_tracking"}]}],[_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_14__.f]:[(_,p)=>[p.id],issueId=>({activity_scope:_types__WEBPACK_IMPORTED_MODULE_9__.jc.ERROR_TRACKING_ISSUE,activity_item_id:issueId})],issueId:[(_,p)=>[p.id],id=>id],firstSeen:[s=>[s.issue],issue=>issue?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_5__.Bv)(issue.first_seen):null],aggregations:[s=>[s.summary],summary=>summary?.aggregations],eventsQuery:[s=>[s.issueFingerprints,s.filterTestAccounts,s.searchQuery,s.filterGroup,s.dateRange],(issueFingerprints,filterTestAccounts,searchQuery,filterGroup,dateRange)=>(0,_queries__WEBPACK_IMPORTED_MODULE_12__.QT)({fingerprints:issueFingerprints.map(f=>f.fingerprint),filterTestAccounts,filterGroup,searchQuery,dateRange,columns:["*","timestamp","person"]})],eventsQueryKey:[s=>[s.eventsQuery],()=>(0,lib_utils__WEBPACK_IMPORTED_MODULE_6__.Vj)()]}}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_3__.Vt)(_ref14=>{let{actions}=_ref14;return{initialEventTimestamp:(value,oldValue)=>{!oldValue&&value&&actions.loadInitialEvent(value)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref15=>{let{props,values,actions}=_ref15;return{setDateRange:actions.loadSummary,setFilterGroup:actions.loadSummary,setFilterTestAccounts:actions.loadSummary,setSearchQuery:actions.loadSummary,loadSummarySuccess:_ref16=>{let{summary}=_ref16;if(summary&&summary.last_seen)actions.setLastSeen(summary.last_seen),actions.setInitialEventTimestamp(summary.last_seen);else{var _values$issue$first_s;actions.setInitialEventTimestamp(null!==(_values$issue$first_s=values.issue?.first_seen)&&void 0!==_values$issue$first_s?_values$issue$first_s:null)}},loadIssueFailure:_ref17=>{let{errorObject:{status,data}}=_ref17;308==status&&"issue_id"in data&&kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.replace(scenes_urls__WEBPACK_IMPORTED_MODULE_8__.j.errorTrackingIssue(data.issue_id))},updateName:_ref18=>{let{name}=_ref18;return actions.updateIssueName(props.id,name)},updateDescription:_ref19=>{let{description}=_ref19;return actions.updateIssueDescription(props.id,description)},updateAssignee:_ref20=>{let{assignee}=_ref20;return actions.updateIssueAssignee(props.id,assignee)},updateStatus:_ref21=>{let{status}=_ref21;return actions.updateIssueStatus(props.id,status)},selectEvent:_ref22=>{let{event}=_ref22;event&&kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.replace(kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.currentLocation.pathname,{...kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.searchParams,timestamp:event.timestamp},kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.hashParams)},[_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_10__.x.actionTypes.mutationSuccess]:_ref23=>{let{mutationName}=_ref23;"mergeIssues"===mutationName&&(actions.loadIssue(),actions.loadSummary(),actions.loadIssueFingerprints())}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.events)(_ref24=>{let{props,actions}=_ref24;return{afterMount:()=>{var _props$timestamp;actions.loadIssue(),actions.setInitialEventTimestamp(null!==(_props$timestamp=props.timestamp)&&void 0!==_props$timestamp?_props$timestamp:null),actions.loadSummary(),actions.loadIssueFingerprints()}}})]);function getNarrowDateRange(timestamp){let firstSeen=(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_5__.Bv)(timestamp);return{date_from:firstSeen.subtract(1,"hour").toISOString(),date_to:firstSeen.add(1,"hour").toISOString()}}}}]);