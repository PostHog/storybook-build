(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[97977],{"../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F1:()=>TabsPrimitive_TabsPrimitive_TabsPrimitive,TN:()=>TabsPrimitiveContent,qf:()=>TabsPrimitiveList,Em:()=>TabsPrimitiveTrigger});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),TabsPrimitive=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.scss"),TabsPrimitive_default=__webpack_require__.n(TabsPrimitive),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(TabsPrimitive_default(),options),TabsPrimitive_default().locals;var react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+primitive@1.1.2/node_modules/@radix-ui/primitive/dist/index.mjs"),react_context_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-context@1.1.2_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-context/dist/index.mjs"),react_roving_focus_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-roving-focus@1.1.10_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@1_s34sf37ri6vsfee6hgvbnj4c5m/node_modules/@radix-ui/react-roving-focus/dist/index.mjs"),react_presence_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-presence@1.1.4_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@radix-ui/react-presence/dist/index.mjs"),react_primitive_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-primitive@2.1.3_@types+react-dom@18.2.14_@types+react@17.0.52_react-dom@18.2._ihqo3gllg2a7btjdwawxemejy4/node_modules/@radix-ui/react-primitive/dist/index.mjs"),react_direction_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-direction@1.1.1_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-direction/dist/index.mjs"),react_use_controllable_state_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-use-controllable-state@1.2.2_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs"),react_id_dist=__webpack_require__("../../node_modules/.pnpm/@radix-ui+react-id@1.1.1_@types+react@17.0.52_react@18.2.0/node_modules/@radix-ui/react-id/dist/index.mjs"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),TABS_NAME="Tabs",[createTabsContext,createTabsScope]=(0,react_context_dist.b)(TABS_NAME,[react_roving_focus_dist.Pc]),useRovingFocusGroupScope=(0,react_roving_focus_dist.Pc)(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value:valueProp,onValueChange,defaultValue,orientation="horizontal",dir,activationMode="automatic",...tabsProps}=props,direction=(0,react_direction_dist.gm)(dir),[value,setValue]=(0,react_use_controllable_state_dist.T)({prop:valueProp,onChange:onValueChange,defaultProp:defaultValue??"",caller:TABS_NAME});return(0,jsx_runtime.jsx)(TabsProvider,{scope:__scopeTabs,baseId:(0,react_id_dist.M)(),value,onValueChange:setValue,orientation,dir:direction,activationMode,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{dir:direction,"data-orientation":orientation,...tabsProps,ref:forwardedRef})})});Tabs.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,loop=!0,...listProps}=props,context=useTabsContext(TAB_LIST_NAME,__scopeTabs),rovingFocusGroupScope=useRovingFocusGroupScope(__scopeTabs);return(0,jsx_runtime.jsx)(react_roving_focus_dist.fC,{asChild:!0,...rovingFocusGroupScope,orientation:context.orientation,dir:context.dir,loop,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{role:"tablist","aria-orientation":context.orientation,...listProps,ref:forwardedRef})})});TabsList.displayName=TAB_LIST_NAME;var TRIGGER_NAME="TabsTrigger",TabsTrigger=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value,disabled=!1,...triggerProps}=props,context=useTabsContext(TRIGGER_NAME,__scopeTabs),rovingFocusGroupScope=useRovingFocusGroupScope(__scopeTabs),triggerId=makeTriggerId(context.baseId,value),contentId=makeContentId(context.baseId,value),isSelected=value===context.value;return(0,jsx_runtime.jsx)(react_roving_focus_dist.ck,{asChild:!0,...rovingFocusGroupScope,focusable:!disabled,active:isSelected,children:(0,jsx_runtime.jsx)(react_primitive_dist.WV.button,{type:"button",role:"tab","aria-selected":isSelected,"aria-controls":contentId,"data-state":isSelected?"active":"inactive","data-disabled":disabled?"":void 0,disabled,id:triggerId,...triggerProps,ref:forwardedRef,onMouseDown:(0,dist.M)(props.onMouseDown,event=>{disabled||0!==event.button||!1!==event.ctrlKey?event.preventDefault():context.onValueChange(value)}),onKeyDown:(0,dist.M)(props.onKeyDown,event=>{[" ","Enter"].includes(event.key)&&context.onValueChange(value)}),onFocus:(0,dist.M)(props.onFocus,()=>{let isAutomaticActivation="manual"!==context.activationMode;isSelected||disabled||!isAutomaticActivation||context.onValueChange(value)})})})});TabsTrigger.displayName=TRIGGER_NAME;var CONTENT_NAME="TabsContent",TabsContent=react.forwardRef((props,forwardedRef)=>{let{__scopeTabs,value,forceMount,children,...contentProps}=props,context=useTabsContext(CONTENT_NAME,__scopeTabs),triggerId=makeTriggerId(context.baseId,value),contentId=makeContentId(context.baseId,value),isSelected=value===context.value,isMountAnimationPreventedRef=react.useRef(isSelected);return react.useEffect(()=>{let rAF=requestAnimationFrame(()=>isMountAnimationPreventedRef.current=!1);return()=>cancelAnimationFrame(rAF)},[]),(0,jsx_runtime.jsx)(react_presence_dist.z,{present:forceMount||isSelected,children:({present})=>(0,jsx_runtime.jsx)(react_primitive_dist.WV.div,{"data-state":isSelected?"active":"inactive","data-orientation":context.orientation,role:"tabpanel","aria-labelledby":triggerId,hidden:!present,id:contentId,tabIndex:0,...contentProps,ref:forwardedRef,style:{...props.style,animationDuration:isMountAnimationPreventedRef.current?"0s":void 0},children:present&&children})})});function makeTriggerId(baseId,value){return`${baseId}-trigger-${value}`}function makeContentId(baseId,value){return`${baseId}-content-${value}`}TabsContent.displayName=CONTENT_NAME;var css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts");function TabsPrimitive_TabsPrimitive_TabsPrimitive(_ref){let{...props}=_ref;return(0,jsx_runtime.jsx)(Tabs,{...props})}function TabsPrimitiveList(_ref2){let{...props}=_ref2;return(0,jsx_runtime.jsx)(TabsList,{...props})}function TabsPrimitiveContent(_ref3){let{...props}=_ref3;return(0,jsx_runtime.jsx)(TabsContent,{...props})}function TabsPrimitiveTrigger(_ref4){let{className,...props}=_ref4;return(0,jsx_runtime.jsx)(TabsTrigger,{className:(0,css_classes.cn)("tabs-trigger",className),...props})}},"../../products/error_tracking/frontend/components/ContextDisplay/ContextDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>ContextDisplay});var ts_pattern__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/ts-pattern@4.3.0/node_modules/ts-pattern/dist/index.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.33.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils.tsx"),lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/utils/copyToClipboard.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ContextDisplay(_ref){let{loading,exceptionAttributes,additionalProperties}=_ref,additionalEntries=Object.entries(additionalProperties).map(_ref2=>{let[key,value]=_ref2;return[(0,lib_utils__WEBPACK_IMPORTED_MODULE_4__.UV)(key,"title"),value]}),exceptionEntries=exceptionAttributes?[["Level",exceptionAttributes.level],["Synthetic",exceptionAttributes.synthetic],["Library",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_3__.KT)(exceptionAttributes,"lib","libVersion")],["Handled",exceptionAttributes.handled],["Browser",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_3__.KT)(exceptionAttributes,"browser","browserVersion")],["OS",(0,lib_components_Errors_utils__WEBPACK_IMPORTED_MODULE_3__.KT)(exceptionAttributes,"os","osVersion")],["URL",exceptionAttributes.url]]:[];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:(0,ts_pattern__WEBPACK_IMPORTED_MODULE_0__.EQ)(loading).with(!0,()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"flex justify-center w-full h-32 items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.$j,{})})).with(!1,()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(ContextTable,{entries:[...exceptionEntries,...additionalEntries]})).exhaustive()})}function ContextTable(_ref3){let{entries}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.g3,{embedded:!0,size:"small",dataSource:entries.filter(_ref4=>{let[,value]=_ref4;return void 0!==value}).map(_ref5=>{let[key,value]=_ref5;return{key,value}}),showHeader:!1,columns:[{title:"Key",key:"key",dataIndex:"key",width:0,className:"font-medium bg-inherit",render:(dataValue,record)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"flex gap-x-2 justify-between items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:dataValue}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{size:"xsmall",tooltip:"Copy value",className:"invisible group-hover:visible",onClick:()=>(0,lib_utils_copyToClipboard__WEBPACK_IMPORTED_MODULE_5__.v)(copyValue(record.value)).catch(error=>{console.error("Failed to copy to clipboard:",error)}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconCopy,{})})]})},{title:"Value",key:"value",dataIndex:"value",className:"whitespace-nowrap",render:value=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"whitespace-nowrap",children:renderValue(value)})}],rowClassName:"even:bg-fill-tertiary odd:bg-surface-primary group",firstColumnSticky:!0})}function copyValue(value){return value&&"object"==typeof value?JSON.stringify(value):String(value)}function renderValue(value){return Array.isArray(value)?"["+value.map(renderValue).join(", ")+"]":value&&"object"==typeof value?"{"+Object.entries(value).map(_ref6=>{let[k,v]=_ref6;return`${k}: ${renderValue(v)}`}).join(", ")+"}":"string"==typeof value?/^https?:\/\/.+/.test(value)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.rU,{to:value,target:"_blank",children:value}):value:String(value)}},"../../products/error_tracking/frontend/components/ExceptionAttributesPreview/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>ExceptionAttributesPreview});var react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),dist=__webpack_require__("../../node_modules/.pnpm/ts-pattern@4.3.0/node_modules/ts-pattern/dist/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.33.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),PropertyIcon=__webpack_require__("../../frontend/src/lib/components/PropertyIcon/PropertyIcon.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function ExceptionAttributesPreview(_ref){let{attributes,loading=!1}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,dist.EQ)(loading).with(!0,()=>(0,jsx_runtime.jsxs)("span",{className:"text-muted space-x-2 text-xs",children:[(0,jsx_runtime.jsx)(src.$j,{}),(0,jsx_runtime.jsx)("span",{children:"Loading details..."})]})).with(!1,()=>attributes&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PropertyWrapper,{title:"Unhandled",visible:!attributes.handled,children:(0,jsx_runtime.jsx)(posthog_icons_es.IconBug,{className:"text-sm text-secondary"})}),(0,jsx_runtime.jsx)(PropertyWrapper,{title:attributes.browser,visible:!!attributes.browser,children:(0,jsx_runtime.jsx)(PropertyIcon.V,{property:"$browser",value:attributes.browser,className:"text-sm text-secondary"})}),(0,jsx_runtime.jsx)(PropertyWrapper,{title:attributes.os,visible:!!attributes.os,children:(0,jsx_runtime.jsx)(PropertyIcon.V,{property:"$os",value:attributes.os,className:"text-sm text-secondary"})})]})).exhaustive()})}function PropertyWrapper(_ref2){let{title,visible=!0,children}=_ref2;return 0!=react.Children.count(children)&&void 0!==title&&visible?(0,jsx_runtime.jsxs)(src.oe,{className:"bg-fill-primary",children:[children,(0,jsx_runtime.jsx)("span",{className:"capitalize",children:title})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}},"../../products/error_tracking/frontend/components/ExceptionCard/ExceptionCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>ExceptionCard});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.33.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),errorPropertiesLogic=__webpack_require__("../../frontend/src/lib/components/Errors/errorPropertiesLogic.ts"),TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),TabsPrimitive=__webpack_require__("../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.tsx"),stackFrameLogic=__webpack_require__("../../frontend/src/lib/components/Errors/stackFrameLogic.ts");let releasePreviewLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","error_tracking","frontend","components","ExceptionAttributesPreview","ReleasesPreview","releasePreviewLogic"]),(0,index_esm.props)({}),(0,index_esm.connect)(props=>({values:[(0,errorPropertiesLogic.J)(props),["frames"],stackFrameLogic.e,["stackFrameRecords"]]})),(0,index_esm.selectors)(_ref=>{let{values}=_ref;return{release:[s=>[s.frames,s.stackFrameRecords],()=>{let frames=values.frames,stackFrameRecords=values.stackFrameRecords,relatedReleases=frames.map(f=>f.raw_id).map(id=>stackFrameRecords[id]?.release).filter(r=>!!r);if(1==[...new Set(relatedReleases.map(r=>r?.id))].length)return relatedReleases[0];let kaboomFrame=frames.map(f=>({...f,release:stackFrameRecords[f.raw_id]?.release})).reverse().find(f=>!!f.release);return kaboomFrame?.release}]}})]);var JSONViewer=__webpack_require__("../../frontend/src/lib/components/JSONViewer.tsx"),ButtonPrimitives=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),DropdownMenu=__webpack_require__("../../frontend/src/lib/ui/DropdownMenu/DropdownMenu.tsx"),ContextDisplay=__webpack_require__("../../products/error_tracking/frontend/components/ContextDisplay/ContextDisplay.tsx"),exceptionCardLogic=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionCard/exceptionCardLogic.ts"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SubHeader(_ref){let{className,...props}=_ref;return(0,jsx_runtime.jsx)("div",{className:(0,css_classes.cn)("flex gap-1 items-center border-b-1 bg-[var(--gray-1)] px-2 h-9",className),...props})}function PropertiesTab(_ref){let{...props}=_ref,{properties,exceptionAttributes,additionalProperties}=(0,index_esm.useValues)(errorPropertiesLogic.J),{loading,showJSONProperties,showAdditionalProperties}=(0,index_esm.useValues)(exceptionCardLogic.S);return(0,jsx_runtime.jsxs)(TabsPrimitive.TN,{...props,children:[(0,jsx_runtime.jsx)(SubHeader,{className:"justify-end",children:(0,jsx_runtime.jsx)(ShowDropDownMenu,{})}),(0,jsx_runtime.jsx)("div",{children:showJSONProperties?(0,jsx_runtime.jsx)(JSONViewer.C,{src:properties,name:"event",collapsed:1,collapseStringsAfterLength:80,sortKeys:!0}):(0,jsx_runtime.jsx)(ContextDisplay.B,{loading:loading,exceptionAttributes:exceptionAttributes,additionalProperties:showAdditionalProperties?additionalProperties:{}})})]})}function ShowDropDownMenu(){let{showJSONProperties,showAdditionalProperties}=(0,index_esm.useValues)(exceptionCardLogic.S),{setShowJSONProperties,setShowAdditionalProperties}=(0,index_esm.useActions)(exceptionCardLogic.S);return(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{size:"sm",className:"h-[1.4rem] px-2",children:["Show",(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronDown,{})]})}),(0,jsx_runtime.jsxs)(DropdownMenu.AW,{children:[(0,jsx_runtime.jsx)(DropdownMenu.bO,{checked:showAdditionalProperties,onCheckedChange:setShowAdditionalProperties,asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,size:"sm",children:[(0,jsx_runtime.jsx)(DropdownMenu.nC,{intent:"checkbox"}),"Additional properties"]})}),(0,jsx_runtime.jsx)(DropdownMenu.bO,{checked:showJSONProperties,onCheckedChange:setShowJSONProperties,asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,size:"sm",children:[(0,jsx_runtime.jsx)(DropdownMenu.nC,{intent:"checkbox"}),"As JSON"]})})]})]})}var dist=__webpack_require__("../../node_modules/.pnpm/ts-pattern@4.3.0/node_modules/ts-pattern/dist/index.js"),EmptyMessage=__webpack_require__("../../frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),cva_dist=__webpack_require__("../../node_modules/.pnpm/cva@1.0.0-beta.3_typescript@5.2.2/node_modules/cva/dist/index.mjs"),lodash_throttle=__webpack_require__("../../node_modules/.pnpm/lodash.throttle@4.1.1/node_modules/lodash.throttle/index.js"),lodash_throttle_default=__webpack_require__.n(lodash_throttle);function useAsyncCallback(callback){let deps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{delay:0,leading:!0},[loading,setLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null);return[(0,react.useCallback)(lodash_throttle_default()(async function(){setLoading(!0),setError(null);try{return await callback(...arguments)}catch(err){console.error(err),setError(err)}finally{setLoading(!1)}},options.delay,{leading:options.leading,trailing:options.trailing}),[...deps,options.delay,options.leading,options.trailing]),loading,error]}function useScrollObserver(){let{onScrollTop,onScrollBottom}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},containerRef=(0,react.useRef)(null),handleScroll=(0,react.useCallback)(evt=>{let target=evt.target;if(!target)return;let scrollTop=target.scrollTop,scrollHeight=target.scrollHeight,clientHeight=target.clientHeight;if(scrollHeight===clientHeight)return;let scrollRatio=scrollTop/(scrollHeight-clientHeight);return scrollRatio<=0?onScrollTop?.():scrollRatio>=1?onScrollBottom?.():void 0},[onScrollTop,onScrollBottom]);return(0,react.useCallback)(el=>{el?(containerRef.current=el,el.addEventListener("scroll",handleScroll)):containerRef.current&&containerRef.current.removeEventListener("scroll",handleScroll)},[handleScroll])}var icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts");let LOADING_DEBOUNCE_OPTIONS={leading:!0,delay:500};function SessionTimeline(_ref){let{ref,collector,selectedItemId,className,onTimeClick}=_ref,[items,setItems]=(0,react.useState)([]),[categories,setCategories]=(0,react.useState)(()=>collector.getAllCategories());function toggleCategory(category){setCategories(prevCategories=>prevCategories.includes(category)?prevCategories.filter(c=>c!==category):[...prevCategories,category])}let containerRef=(0,react.useRef)(null),scrollToItem=(0,react.useCallback)(uuid=>{let item=containerRef.current?.querySelector(`[data-item-id="${uuid}"]`);item&&requestAnimationFrame(()=>{item.scrollIntoView({behavior:"instant",block:"center"})})},[]),[loadBefore,beforeLoading]=useAsyncCallback(()=>collector.loadBefore(categories,25).then(()=>{let items=collector.collectItems(),containerEl=containerRef.current,scrollTop=containerEl?.scrollTop||0,scrollHeight=containerEl?.scrollHeight||0;setItems(items),requestAnimationFrame(()=>{let newScrollHeight=containerEl?.scrollHeight||0;containerEl&&(containerEl.scrollTop=scrollTop+(newScrollHeight-scrollHeight))})}),[collector,categories],LOADING_DEBOUNCE_OPTIONS),[loadAfter,afterLoading]=useAsyncCallback(()=>collector.loadAfter(categories,25).then(()=>{setItems(collector.collectItems())}),[collector,categories],LOADING_DEBOUNCE_OPTIONS);(0,react.useEffect)(()=>{collector.clear(),Promise.all([loadBefore(),loadAfter()]).then(()=>{setItems(collector.collectItems()),selectedItemId&&scrollToItem(selectedItemId)})},[collector,loadBefore,loadAfter,setItems,scrollToItem,selectedItemId]);let scrollRefCb=useScrollObserver({onScrollTop:()=>{if(collector.hasBefore(categories))return loadBefore()},onScrollBottom:()=>{if(collector.hasAfter(categories))return loadAfter()}});return(0,react.useImperativeHandle)(ref,()=>({scrollToItem})),(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)("flex",className),children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col justify-between items-center p-1 border-r border-gray-3",children:[(0,jsx_runtime.jsx)("div",{className:"flex flex-col items-center gap-2",children:collector.getCategories().map(cat=>(0,jsx_runtime.jsx)(ItemCategoryToggle,{active:categories.includes(cat),category:cat,onClick:()=>toggleCategory(cat),children:collector.getRenderer(cat)?.categoryIcon},cat))}),items.find(item=>item.id===selectedItemId)&&(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{tooltip:"Scroll to item",tooltipPlacement:"right",iconOnly:!0,onClick:()=>selectedItemId&&scrollToItem(selectedItemId),children:(0,jsx_runtime.jsx)(icons.JT,{})})]}),(0,jsx_runtime.jsxs)("div",{ref:el=>{scrollRefCb(el),containerRef.current=el},className:"h-[500px] w-full overflow-y-auto relative",style:{scrollbarGutter:"stable"},children:[beforeLoading&&(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)(itemContainer({selected:!1}),"justify-start"),children:[(0,jsx_runtime.jsx)(src.$j,{}),(0,jsx_runtime.jsx)("span",{className:"text-secondary",children:"loading..."})]}),items.map(item=>{let renderer=collector.getRenderer(item.category);return renderer?(0,jsx_runtime.jsx)(SessionTimelineItemContainer,{renderer:renderer,item:item,selected:item.id===selectedItemId,onTimeClick:onTimeClick},item.id):null}),afterLoading&&!beforeLoading&&(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)(itemContainer({selected:!1}),"justify-start"),children:[(0,jsx_runtime.jsx)(src.$j,{}),(0,jsx_runtime.jsx)("span",{className:"text-secondary",children:"loading..."})]})]})]})}let itemContainer=(0,cva_dist.jS)({base:"flex justify-between gap-2 items-center px-2 w-full h-[2rem]",variants:{selected:{true:"bg-[var(--gray-1)] border-1 border-accent",false:"border-b border-[var(--gray-2)]"}}}),SessionTimelineItemContainer=(0,react.forwardRef)(function SessionTimelineItemContainer(_ref2,ref){let{renderer,item,selected,onTimeClick}=_ref2;return(0,jsx_runtime.jsxs)("div",{ref:ref,className:itemContainer({selected}),"data-item-id":item.id,children:[(0,jsx_runtime.jsx)("span",{className:"text-xs text-tertiary w-[20px] shrink-0 text-center",children:(0,jsx_runtime.jsx)(renderer.sourceIcon,{item:item})}),(0,jsx_runtime.jsx)("span",{className:"text-xs text-tertiary w-[50px] shrink-0 text-center",children:(0,jsx_runtime.jsx)(src.rU,{className:"text-tertiary hover:text-accent",onClick:()=>onTimeClick?.(item.timestamp),children:item.timestamp.format("HH:mm:ss")})}),(0,jsx_runtime.jsx)("div",{className:"shrink-0 w-[20px] text-center",children:renderer.categoryIcon}),(0,jsx_runtime.jsx)("div",{className:"flex-grow",children:(0,jsx_runtime.jsx)(renderer.render,{item:item})})]})}),itemCategoryToggle=(0,cva_dist.jS)({base:"shrink-0",variants:{active:{true:"text-accent"}}});function ItemCategoryToggle(_ref3){let{active,category,...props}=_ref3;return(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{iconOnly:!0,tooltip:active?`Hide ${category}`:`Show ${category}`,tooltipPlacement:"right",className:itemCategoryToggle({active}),...props})}var defineProperty=__webpack_require__("../../node_modules/.pnpm/@babel+runtime@7.24.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),time_tree=__webpack_require__("../../frontend/src/lib/utils/time-tree.ts");class ItemCollector{constructor(sessionId,timestamp){(0,defineProperty.Z)(this,"sessionId",void 0),(0,defineProperty.Z)(this,"timestamp",void 0),(0,defineProperty.Z)(this,"beforeCursor",void 0),(0,defineProperty.Z)(this,"afterCursor",void 0),(0,defineProperty.Z)(this,"itemCache",void 0),(0,defineProperty.Z)(this,"loaders",new Map),(0,defineProperty.Z)(this,"renderers",new Map),this.sessionId=sessionId,this.timestamp=timestamp,this.beforeCursor=this.timestamp,this.afterCursor=this.timestamp,this.itemCache=new time_tree.f}addCategory(category,renderer,loader){this.loaders.set(category,loader),this.renderers.set(category,renderer)}getAllCategories(){return Array.from(this.loaders.keys())}findMinTimestamp(array){return array.slice().sort((a,b)=>a.timestamp.diff(b.timestamp))[0]}findMaxTimestamp(array){return array.slice().sort((a,b)=>b.timestamp.diff(a.timestamp))[0]}clear(){this.beforeCursor=this.timestamp,this.afterCursor=this.timestamp,this.itemCache=new time_tree.f}getRenderer(category){return this.renderers.get(category)}getLoader(category){return this.loaders.get(category)}getCategories(){return Array.from(this.loaders.keys())}collectItems(){return this.itemCache.getAll()}hasBefore(categories){return categories.map(cat=>this.getLoader(cat)).some(loader=>!!loader&&loader.hasPrevious(this.beforeCursor))}hasAfter(categories){return categories.map(cat=>this.getLoader(cat)).some(loader=>!!loader&&loader.hasNext(this.afterCursor))}async loadBefore(categories,count){let items=[],currentLoaders=categories.map(cat=>this.getLoader(cat)).filter(loader=>!!loader);for(;items.length<count;){let previousItems=await Promise.all(currentLoaders.map(loader=>loader.previous(this.beforeCursor,count))),maxItem=this.findMaxTimestamp(previousItems.filter(item=>null!==item));if(maxItem)items.push(maxItem),this.beforeCursor=maxItem.timestamp;else break}this.itemCache.add(items)}async loadAfter(categories,count){let items=[],currentLoaders=categories.map(cat=>this.getLoader(cat)).filter(loader=>!!loader);for(;items.length<count;){let nextItems=await Promise.all(currentLoaders.map(loader=>loader.next(this.afterCursor,count))),minItem=this.findMinTimestamp(nextItems.filter(item=>null!==item));if(minItem)items.push(minItem),this.afterCursor=minItem.timestamp;else break}this.itemCache.add(items)}}let ItemCategory=function(ItemCategory){return ItemCategory.ERROR_TRACKING="exceptions",ItemCategory.CUSTOM_EVENTS="custom events",ItemCategory.PAGE_VIEWS="pageviews",ItemCategory}({});var utils=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts"),RuntimeIcon=__webpack_require__("../../products/error_tracking/frontend/components/RuntimeIcon.tsx"),api=__webpack_require__("../../frontend/src/lib/api.ts"),schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts");function BasePreview(_ref){let{name,description}=_ref;return(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center",children:[(0,jsx_runtime.jsx)("span",{className:"font-medium",children:name}),description&&(0,jsx_runtime.jsx)("span",{className:"text-secondary text-xs line-clamp-1 max-w-2/3 text-right",children:description})]})}class EventLoader{constructor(sessionId,timestamp){this.sessionId=sessionId,(0,defineProperty.Z)(this,"cache",void 0),(0,defineProperty.Z)(this,"afterCursor",void 0),(0,defineProperty.Z)(this,"previousCursor",void 0),(0,defineProperty.Z)(this,"_hasNext",!0),(0,defineProperty.Z)(this,"_hasPrevious",!0),this.afterCursor=timestamp,this.previousCursor=timestamp,this.cache=new time_tree.f}hasPrevious(to){return!!this.cache.previous(to)||this._hasPrevious}hasNext(from){return!!this.cache.next(from)||this._hasNext}async previous(to,limit){let item=this.cache.previous(to);if(item)return item;if(this._hasPrevious){var _this$cache$previous;let query=this.buildQueryTo(this.previousCursor,limit),response=await api.ZP.query(query);0===response.results.length&&(this._hasPrevious=!1);let items=response.results.map(this.buildItem);return items.length>0&&(this.previousCursor=items[items.length-1].timestamp),this.cache.add(items),null!==(_this$cache$previous=this.cache.previous(to))&&void 0!==_this$cache$previous?_this$cache$previous:null}return null}async next(from,limit){let item=this.cache.next(from);if(item)return item;if(this._hasNext){var _this$cache$next;let query=this.buildQueryFrom(this.afterCursor,limit),response=await api.ZP.query(query);0===response.results.length&&(this._hasNext=!1);let items=response.results.map(this.buildItem);return items.length>0&&(this.afterCursor=items[items.length-1].timestamp),this.cache.add(items),null!==(_this$cache$next=this.cache.next(from))&&void 0!==_this$cache$next?_this$cache$next:null}return null}buildQueryFrom(from,limit){return{kind:schema_general.OH.EventsQuery,select:this.select(),where:[`equals($session_id, '${this.sessionId}')`,...this.where()],after:from.toISOString(),before:from.add(6,"hours").toISOString(),orderBy:["timestamp ASC"],limit:limit}}buildQueryTo(to,limit){return{kind:schema_general.OH.EventsQuery,select:this.select(),where:[`equals($session_id, '${this.sessionId}')`,...this.where()],after:to.subtract(6,"hours").toISOString(),before:to.toISOString(),orderBy:["timestamp DESC"],limit:limit}}}let customItemRenderer={sourceIcon:_ref=>{let{item}=_ref;return(0,jsx_runtime.jsx)(RuntimeIcon.Z,{runtime:item.payload.runtime})},categoryIcon:(0,jsx_runtime.jsx)(posthog_icons_es.IconGraph,{}),render:_ref2=>{let{item}=_ref2;return(0,jsx_runtime.jsx)(BasePreview,{name:item.payload.name})}};class CustomItemLoader extends EventLoader{select(){return["uuid","event","timestamp","properties.$lib"]}where(){return["notEquals(left(event, 1), '$')"]}buildItem(evt){return{id:evt[0],category:ItemCategory.CUSTOM_EVENTS,timestamp:dayjs.Bv.utc(evt[2]),payload:{runtime:(0,utils.sm)(evt[3]),name:evt[1]}}}}let customItemLoader=(sessionId,timestamp)=>{let customEvtLoader=new CustomItemLoader(sessionId,timestamp);return{hasPrevious:customEvtLoader.hasPrevious.bind(customEvtLoader),previous:customEvtLoader.previous.bind(customEvtLoader),hasNext:customEvtLoader.hasNext.bind(customEvtLoader),next:customEvtLoader.next.bind(customEvtLoader)}};var urls=__webpack_require__("../../frontend/src/scenes/urls.ts");let exceptionRenderer={sourceIcon:_ref=>{let{item}=_ref;return(0,jsx_runtime.jsx)(RuntimeIcon.Z,{runtime:item.payload.runtime})},categoryIcon:(0,jsx_runtime.jsx)(posthog_icons_es.IconWarning,{}),render:_ref2=>{let{item}=_ref2,name=item.payload.type,description=item.payload.message,eventIssueId=item.payload.issue_id;return(0,jsx_runtime.jsx)(BasePreview,{name:name,description:(0,jsx_runtime.jsx)(src.rU,{className:"text-secondary hover:text-accent",subtle:!0,to:urls.j.errorTrackingIssue(eventIssueId,{fingerprint:item.payload.fingerprint,timestamp:item.timestamp.toISOString()}),children:description})})}};class ExceptionItemLoader extends EventLoader{select(){return["uuid","timestamp","properties"]}where(){return["equals(event, '$exception')"]}buildItem(evt){let properties=JSON.parse(evt[2]);return{id:evt[0],category:ItemCategory.ERROR_TRACKING,timestamp:dayjs.Bv.utc(evt[1]),payload:{runtime:(0,utils.sm)(properties.$lib),type:getExceptionType(properties.$exception_list),message:getExceptionMessage(properties.$exception_list),fingerprint:properties.$exception_fingerprint,issue_id:properties.$exception_issue_id}}}}let exceptionLoader=(sessionId,timestamp)=>{let excLoader=new ExceptionItemLoader(sessionId,timestamp);return{hasPrevious:excLoader.hasPrevious.bind(excLoader),previous:excLoader.previous.bind(excLoader),hasNext:excLoader.hasNext.bind(excLoader),next:excLoader.next.bind(excLoader)}};function getExceptionType(exceptionList){try{let firstException=exceptionList[0];if(firstException)return firstException.type}catch{return}}function getExceptionMessage(exceptionList){try{let firstException=exceptionList[0];if(firstException)return firstException.value}catch{return}}let pageRenderer={sourceIcon:_ref=>{let{item}=_ref;return(0,jsx_runtime.jsx)(RuntimeIcon.Z,{runtime:item.payload.runtime})},categoryIcon:(0,jsx_runtime.jsx)(posthog_icons_es.IconEye,{}),render:_ref2=>{let{item}=_ref2;return(0,jsx_runtime.jsx)(BasePreview,{name:"Pageview",description:(0,jsx_runtime.jsx)(src.rU,{className:"text-secondary hover:text-accent",subtle:!0,to:item.payload.url,target:"_blank",children:getUrlPathname(item.payload.url)})})}};class PageItemLoader extends EventLoader{select(){return["uuid","timestamp","properties.$current_url","properties.$lib"]}where(){return["equals(event, '$pageview')"]}buildItem(evt){return{id:evt[0],category:ItemCategory.PAGE_VIEWS,timestamp:dayjs.Bv.utc(evt[1]),payload:{runtime:(0,utils.sm)(evt[3]),url:evt[2]}}}}let pageLoader=(sessionId,timestamp)=>{let pageLoader=new PageItemLoader(sessionId,timestamp);return{hasPrevious:pageLoader.hasPrevious.bind(pageLoader),previous:pageLoader.previous.bind(pageLoader),hasNext:pageLoader.hasNext.bind(pageLoader),next:pageLoader.next.bind(pageLoader)}};function getUrlPathname(url){try{return new URL(url).pathname}catch{return url}}var SessionRecordingPlayer=__webpack_require__("../../frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),sessionRecordingPlayerLogic=__webpack_require__("../../frontend/src/scenes/session-recordings/player/sessionRecordingPlayerLogic.ts"),sessionRecordingDataCoordinatorLogic=__webpack_require__("../../frontend/src/scenes/session-recordings/player/sessionRecordingDataCoordinatorLogic.ts");function getRecordingProps(sessionId){return{playerKey:"session-tab",sessionRecordingId:sessionId,matchingEventsMatchType:{matchType:"name",eventNames:["$exception"]}}}let sessionTabLogic=(0,index_esm.kea)([(0,index_esm.path)(key=>["scenes","error-tracking","exceptionCard","sessionTab",key]),(0,index_esm.props)({}),(0,index_esm.key)(_ref=>{let{sessionId}=_ref;return sessionId}),(0,index_esm.connect)(_ref2=>{let{sessionId}=_ref2;return{values:[(0,sessionRecordingDataCoordinatorLogic.a)(getRecordingProps(sessionId)),["isNotFound","sessionPlayerMetaDataLoading"]],actions:[(0,sessionRecordingPlayerLogic.d$)(getRecordingProps(sessionId)),["seekToTimestamp","setPlay","setPause"]]}}),(0,index_esm.propsChanged)((_ref3,oldProps)=>{let{actions,props}=_ref3;props.timestamp!==oldProps.timestamp&&actions.setRecordingTimestamp((0,dayjs.Bv)(props.timestamp),5e3)}),(0,index_esm.actions)({setRecordingTimestamp:(timestamp,offset)=>({timestamp,offset})}),(0,index_esm.defaults)({recordingTimestamp:null}),(0,index_esm.reducers)({recordingTimestamp:{setRecordingTimestamp:(_,_ref4)=>{let{timestamp,offset}=_ref4;return(0,dayjs.Bv)(timestamp).valueOf()-offset}}}),(0,index_esm.selectors)({sessionId:[(_,p)=>[p.sessionId],sessionId=>sessionId],timestamp:[(_,p)=>[p.timestamp],timestamp=>timestamp],recordingProps:[(_,p)=>[p.sessionId],sessionId=>getRecordingProps(sessionId)]}),(0,index_esm.events)(_ref5=>{let{props,actions}=_ref5;return{afterMount:()=>{actions.setRecordingTimestamp((0,dayjs.Bv)(props.timestamp),5e3)}}})]);function SessionRecordingTab(){let{loading}=(0,index_esm.useValues)(exceptionCardLogic.S);return(0,jsx_runtime.jsx)(TabsPrimitive.TN,{value:"recording",children:(0,dist.EQ)(loading).with(!0,()=>(0,jsx_runtime.jsx)(SessionRecordingLoading,{})).with(!1,()=>(0,jsx_runtime.jsx)(SessionRecordingContent,{})).exhaustive()})}function SessionRecordingLoading(){return(0,jsx_runtime.jsx)("div",{className:"flex justify-center w-full h-[300px] items-center",children:(0,jsx_runtime.jsx)(src.$j,{})})}function SessionRecordingContent(){let{recordingProps,recordingTimestamp,isNotFound,sessionPlayerMetaDataLoading}=(0,index_esm.useValues)(sessionTabLogic),{seekToTimestamp,setPlay}=(0,index_esm.useActions)(sessionTabLogic);return(0,react.useEffect)(()=>{!sessionPlayerMetaDataLoading&&!isNotFound&&(recordingTimestamp&&seekToTimestamp(recordingTimestamp),setPlay())},[seekToTimestamp,recordingTimestamp,setPlay,isNotFound,sessionPlayerMetaDataLoading]),(0,jsx_runtime.jsx)("div",{className:"max-h-[500px] h-[500px] flex justify-center items-center",children:(0,jsx_runtime.jsx)(SessionRecordingPlayer.d,{...recordingProps,mode:sessionRecordingPlayerLogic.X4.Standard,autoPlay:!0,noMeta:!0,noBorder:!0,noInspector:!0})})}function SessionTab(_ref){let{timestamp,...props}=_ref,{sessionId}=(0,index_esm.useValues)(errorPropertiesLogic.J),{loading,currentSessionTab}=(0,index_esm.useValues)(exceptionCardLogic.S),{setCurrentSessionTab}=(0,index_esm.useActions)(exceptionCardLogic.S);return(0,jsx_runtime.jsx)(TabsPrimitive.TN,{...props,children:(0,dist.EQ)([loading,sessionId]).with([!0,dist.P.any],()=>(0,jsx_runtime.jsx)("div",{className:"flex justify-center items-center h-[300px]",children:(0,jsx_runtime.jsx)(src.$j,{})})).with([!1,dist.P.nullish],()=>(0,jsx_runtime.jsx)(NoSessionIdFound,{})).with([!1,dist.P.string],_ref2=>{let[_,sessionId]=_ref2;return(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:sessionTabLogic,props:{timestamp,sessionId},children:(0,jsx_runtime.jsxs)(TabsPrimitive.F1,{value:currentSessionTab,onValueChange:setCurrentSessionTab,children:[(0,jsx_runtime.jsx)(SubHeader,{className:"p-0",children:(0,jsx_runtime.jsxs)(TabsPrimitive.qf,{className:"flex justify-start gap-2 w-full h-full items-center",children:[(0,jsx_runtime.jsx)(TabsPrimitive.Em,{className:"px-2 h-full",value:"timeline",children:"Timeline"}),(0,jsx_runtime.jsx)(TabsPrimitive.Em,{className:"px-2 h-full",value:"recording",children:"Recording"})]})}),(0,jsx_runtime.jsx)(SessionTimelineTab,{}),(0,jsx_runtime.jsx)(SessionRecordingTab,{})]})})}).exhaustive()})}function SessionTimelineTab(){let{uuid}=(0,index_esm.useValues)(errorPropertiesLogic.J),sessionTimelineRef=(0,react.useRef)(null),{currentSessionTab}=(0,index_esm.useValues)(exceptionCardLogic.S),{sessionId,timestamp}=(0,index_esm.useValues)(sessionTabLogic),{setRecordingTimestamp}=(0,index_esm.useActions)(sessionTabLogic),{setCurrentSessionTab}=(0,index_esm.useActions)(exceptionCardLogic.S);(0,react.useEffect)(()=>{"timeline"==currentSessionTab&&sessionTimelineRef.current&&sessionTimelineRef.current.scrollToItem(uuid)},[currentSessionTab,uuid]);let onTimeClick=(0,react.useCallback)(time=>{setRecordingTimestamp(time,1e3),setCurrentSessionTab("recording")},[setRecordingTimestamp,setCurrentSessionTab]),collector=(0,react.useMemo)(()=>{if(!sessionId||!timestamp)return;let timestampDayJs=(0,dayjs.Bv)(timestamp).add(1,"millisecond"),collector=new ItemCollector(sessionId,timestampDayJs);return collector.addCategory(ItemCategory.ERROR_TRACKING,exceptionRenderer,exceptionLoader(sessionId,timestampDayJs)),collector.addCategory(ItemCategory.PAGE_VIEWS,pageRenderer,pageLoader(sessionId,timestampDayJs)),collector.addCategory(ItemCategory.CUSTOM_EVENTS,customItemRenderer,customItemLoader(sessionId,timestampDayJs)),collector},[sessionId,timestamp]);return(0,jsx_runtime.jsx)(TabsPrimitive.TN,{value:"timeline",children:collector&&(0,jsx_runtime.jsx)(SessionTimeline,{ref:sessionTimelineRef,collector:collector,selectedItemId:uuid,onTimeClick:onTimeClick})})}function NoSessionIdFound(){return(0,jsx_runtime.jsx)("div",{className:"flex justify-center w-full h-[300px] items-center",children:(0,jsx_runtime.jsx)(EmptyMessage.M,{title:"No session found",description:"There is no $session_id associated with this exception. If it was captured from a server SDK, you can read our doc on how to forward session IDs",buttonText:"Check doc",buttonTo:"https://posthog.com/docs/data/sessions#server-sdks-and-sessions",size:"small"})})}var ExceptionAttributesPreview=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionAttributesPreview/index.ts"),copyToClipboard=__webpack_require__("../../frontend/src/lib/utils/copyToClipboard.tsx");class GitMetadataParser{static getViewCommitLink(release){var _release$metadata$git,_release$metadata$git2;let hasRemoteUrl=release.metadata?.git?.remote_url!==void 0,hasCommitId=release.metadata?.git?.commit_id!==void 0,remoteUrl=null!==(_release$metadata$git=release.metadata?.git?.remote_url)&&void 0!==_release$metadata$git?_release$metadata$git:"",commitId=null!==(_release$metadata$git2=release.metadata?.git?.commit_id)&&void 0!==_release$metadata$git2?_release$metadata$git2:"";return hasRemoteUrl&&hasCommitId?this.resolveRemoteUrlWithCommitToLink(remoteUrl,commitId):void 0}static resolveRemoteUrlWithCommitToLink(remoteUrl,commitSha){let parsed=GitMetadataParser.parseSshRemoteUrl(remoteUrl);if(parsed||(parsed=GitMetadataParser.parseHttpsRemoteUrl(remoteUrl)),parsed?.provider.includes("github"))return`${parsed.provider}/${parsed.user}/${parsed.path}/commit/${commitSha}`}static parseSshRemoteUrl(remoteUrl){let atIdx=remoteUrl.indexOf("@"),colonIdx=remoteUrl.indexOf(":");if(-1===atIdx||-1===colonIdx)return;let providerDomain=remoteUrl.slice(atIdx+1,colonIdx),provider=`https://${providerDomain}`,afterColon=remoteUrl.slice(colonIdx+1),slashIdx=afterColon.indexOf("/");if(-1===slashIdx)return;let user=afterColon.slice(0,slashIdx),path=afterColon.slice(slashIdx+1);return path.endsWith(".git")&&(path=path.slice(0,-4)),{provider,user,path}}static parseHttpsRemoteUrl(remoteUrl){let httpsPrefix="https://";if(!remoteUrl.startsWith(httpsPrefix))return;let withoutProtocol=remoteUrl.slice(httpsPrefix.length),firstSlashIdx=withoutProtocol.indexOf("/");if(-1===firstSlashIdx)return;let provider=`https://${withoutProtocol.slice(0,firstSlashIdx)}`,pathParts=withoutProtocol.slice(firstSlashIdx+1).split("/");if(pathParts.length<2)return;let user=pathParts[0],path=pathParts[1];return path.endsWith(".git")&&(path=path.slice(0,-4)),{provider,user,path}}}function ReleasePopoverContent(_ref){let{release}=_ref,viewCommitLink=(0,react.useMemo)(()=>GitMetadataParser.getViewCommitLink(release),[release]);return(0,jsx_runtime.jsxs)("div",{className:"overflow-hidden",children:[(0,jsx_runtime.jsxs)("div",{className:"border-b-1 p-2 flex items-center justify-between gap-3",children:[(0,jsx_runtime.jsx)("h4",{className:"mb-0",children:"Related release"}),viewCommitLink&&(0,jsx_runtime.jsx)(src.Jp,{to:viewCommitLink,targetBlank:!0,size:"xsmall",type:"secondary",icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconExternal,{}),children:"View commit"})]}),(0,jsx_runtime.jsx)("div",{className:"p-2",children:release?.metadata?.git?(0,jsx_runtime.jsx)(GitContent,{release:release}):(0,jsx_runtime.jsx)(GitlessContent,{release:release})})]})}function GitContent(_ref2){var _release$metadata$git2;let{release}=_ref2;return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,jsx_runtime.jsx)(src.u,{title:"Click to copy full commit SHA to clipboard",children:(0,jsx_runtime.jsxs)(src.oe,{className:"bg-fill-primary font-mono text-xs cursor-pointer hover:bg-fill-secondary",onClick:()=>{var _release$metadata$git;return(0,copyToClipboard.v)(null!==(_release$metadata$git=release.metadata?.git?.commit_id)&&void 0!==_release$metadata$git?_release$metadata$git:"","full commit SHA")},children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconCommit,{className:"text-sm text-secondary"}),(0,jsx_runtime.jsx)("span",{title:`${null!==(_release$metadata$git2=release.metadata?.git?.commit_id)&&void 0!==_release$metadata$git2?_release$metadata$git2:""} (click to copy)`,children:release.metadata?.git?.commit_id?.slice(0,7)})]})}),release.metadata?.git?.branch&&(0,jsx_runtime.jsx)(src.u,{title:"Git branch name",children:(0,jsx_runtime.jsxs)(src.oe,{className:"bg-fill-primary text-xs",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconGitBranch,{className:"text-sm text-secondary"}),(0,jsx_runtime.jsx)("span",{title:release.metadata?.git?.branch,children:release.metadata?.git?.branch})]})}),release.metadata?.git?.repo_name&&(0,jsx_runtime.jsx)(src.u,{title:"Git repository name",children:(0,jsx_runtime.jsxs)(src.oe,{className:"bg-fill-primary text-xs",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconGitRepository,{className:"text-sm text-secondary"}),(0,jsx_runtime.jsx)("span",{title:release.metadata?.git?.repo_name,children:release.metadata?.git?.repo_name})]})})]})})}function GitlessContent(_ref3){let{release}=_ref3;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,jsx_runtime.jsxs)(src.oe,{className:"bg-fill-primary text-xs",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconCommit,{className:"text-sm text-secondary"}),(0,jsx_runtime.jsx)("span",{children:release.version})]}),(0,jsx_runtime.jsx)(src.u,{title:"No git release information available. Version you see was manually provided by you using '--version' flag in the 'upload' CLI command",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconInfo,{className:"text-muted-alt"})})]})}function ReleasePreviewPill(){let[isOpen,setIsOpen]=(0,react.useState)(!1),{release}=(0,index_esm.useValues)(releasePreviewLogic);return release?(0,jsx_runtime.jsx)(src.J2,{visible:isOpen,overlay:(0,jsx_runtime.jsx)(ReleasePopoverContent,{release:release}),placement:"right",padded:!1,showArrow:!0,onMouseEnterInside:()=>setIsOpen(!0),onMouseLeaveInside:()=>setIsOpen(!1),children:(0,jsx_runtime.jsx)("span",{className:"inline-flex align-middle",onMouseEnter:()=>setIsOpen(!0),onMouseLeave:()=>setIsOpen(!1),children:(0,jsx_runtime.jsxs)(src.oe,{className:"bg-fill-primary",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconCommit,{className:"text-sm text-secondary"}),(0,jsx_runtime.jsx)("span",{children:releasePillTitle(release)})]})})}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}function releasePillTitle(release){var _ref,_release$metadata$git;return null!==(_ref=null!==(_release$metadata$git=release.metadata?.git?.commit_id?.slice(0,7))&&void 0!==_release$metadata$git?_release$metadata$git:release.version)&&void 0!==_ref?_ref:""}var dist_module=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.275.1_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js");function FixModal(_ref){let{isOpen,onClose}=_ref,{exceptionList}=(0,index_esm.useValues)(errorPropertiesLogic.J),{stackFrameRecords}=(0,index_esm.useValues)(stackFrameLogic.e),{loadFromRawIds}=(0,index_esm.useActions)(stackFrameLogic.e);(0,react.useEffect)(()=>{if(isOpen&&exceptionList.length>0){let rawIds=exceptionList.flatMap(exception=>exception.stacktrace?.frames||[]).map(frame=>frame.raw_id);rawIds.length>0&&loadFromRawIds(rawIds)}},[isOpen,exceptionList,loadFromRawIds]);let generatePrompt=()=>{let stacktraceText=exceptionList.map(exception=>generateExceptionText(exception,stackFrameRecords)).join("\n\n");return`Please help me fix this error. Here's the stack trace:

\`\`\`
${stacktraceText}
\`\`\`

Note: Frames marked with [IN-APP] are from the application code (my code), while frames without this marker are from external libraries/frameworks.
Focus your analysis primarily on the [IN-APP] frames as these are most likely where the issue needs to be fixed.

Can you:
1. Analyze what's causing this error. Try to consider multiple possible factors, and dig deep to find a root cause.
2. Explain in detail why this error occurred. Provide code examples if applicable.
3. Suggest the most likely fix, enumerating multiple possible solutions and choosing the best one.
4. Attempt to fix this error.

The final output of your efforts should be:
- An implemented fix for the issue
- A detailed explanation of the fix and how it addresses the root cause
`};return(0,jsx_runtime.jsx)(src.fQ,{isOpen:isOpen,onClose:onClose,title:"Fix this error with AI",width:"50rem",footer:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,jsx_runtime.jsx)(src.Jp,{type:"secondary",onClick:onClose,children:"Close"}),(0,jsx_runtime.jsx)(src.Jp,{type:"primary",onClick:()=>{(0,copyToClipboard.v)(generatePrompt(),"LLM prompt"),dist_module.ZP.capture("error_tracking_prompt_copied"),onClose()},children:"Copy to clipboard"})]}),children:(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)("p",{className:"text-muted",children:"Paste this prompt into your favourite coding assistant to get help fixing this error:"}),(0,jsx_runtime.jsx)("div",{className:"bg-bg-light border rounded p-4 font-mono text-sm whitespace-pre-wrap max-h-96 overflow-auto",children:generatePrompt()})]})})}function generateExceptionText(exception,stackFrameRecords){let result=`${exception.type}: ${exception.value}`;for(let frame of exception.stacktrace?.frames||[]){let inAppMarker=frame.in_app?" [IN-APP]":"";result+=`
${inAppMarker}  File "${frame.source}", line: ${frame.line}, in: ${frame.resolved_name}`;let frameRecord=stackFrameRecords[frame.raw_id];frameRecord?.context?.line?.line&&(result+=`
    ${frameRecord.context.line.line}`)}return result}var StacktraceBase=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionCard/Stacktrace/StacktraceBase.tsx"),StacktraceGenericDisplay=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionCard/Stacktrace/StacktraceGenericDisplay.tsx"),StacktraceTextDisplay=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionCard/Stacktrace/StacktraceTextDisplay.tsx");function StacktraceTab(_ref){let{className,issue,issueLoading,timestamp,...props}=_ref,{loading}=(0,index_esm.useValues)(exceptionCardLogic.S),{exceptionAttributes,exceptionList}=(0,index_esm.useValues)(errorPropertiesLogic.J),showFixButton=hasResolvedStackFrames(exceptionList),[showFixModal,setShowFixModal]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(TabsPrimitive.TN,{...props,children:[(0,jsx_runtime.jsxs)(SubHeader,{className:"justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(ExceptionAttributesPreview.x,{attributes:exceptionAttributes,loading:loading}),(0,jsx_runtime.jsx)(ReleasePreviewPill,{})]}),(0,jsx_runtime.jsxs)(ButtonPrimitives.HL,{size:"sm",children:[showFixButton&&(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{onClick:()=>setShowFixModal(!0),className:"px-2 h-[1.4rem]",tooltip:"Generate AI prompt to fix this error",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconMagicWand,{}),"Get AI prompt"]}),(0,jsx_runtime.jsx)(StacktraceTab_ShowDropDownMenu,{children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{className:"px-2 h-[1.4rem]",children:["Show",(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronDown,{})]})})]})]}),(0,jsx_runtime.jsx)(StacktraceIssueDisplay,{className:"p-2",truncateMessage:!1,issue:null!=issue?issue:void 0,issueLoading:issueLoading}),(0,jsx_runtime.jsx)(FixModal,{isOpen:showFixModal,onClose:()=>setShowFixModal(!1)})]})}function StacktraceIssueDisplay(_ref2){let{issue,issueLoading,...stacktraceDisplayProps}=_ref2,{showAsText}=(0,index_esm.useValues)(exceptionCardLogic.S),componentProps={...stacktraceDisplayProps,renderLoading:renderHeader=>{var _issue$name,_issue$description;return renderHeader({type:null!==(_issue$name=issue?.name)&&void 0!==_issue$name?_issue$name:void 0,value:null!==(_issue$description=issue?.description)&&void 0!==_issue$description?_issue$description:void 0,loading:issueLoading})},renderEmpty:()=>(0,jsx_runtime.jsx)(StacktraceBase.G,{})};return showAsText?(0,jsx_runtime.jsx)(StacktraceTextDisplay.L,{...componentProps}):(0,jsx_runtime.jsx)(StacktraceGenericDisplay.l,{...componentProps})}function StacktraceTab_ShowDropDownMenu(_ref3){let{children}=_ref3,{showAllFrames,showAsText}=(0,index_esm.useValues)(exceptionCardLogic.S),{setShowAllFrames,setShowAsText}=(0,index_esm.useActions)(exceptionCardLogic.S);return(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:children}),(0,jsx_runtime.jsxs)(DropdownMenu.AW,{children:[(0,jsx_runtime.jsx)(DropdownMenu.bO,{checked:showAllFrames,onCheckedChange:setShowAllFrames,asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,size:"sm",children:[(0,jsx_runtime.jsx)(DropdownMenu.nC,{intent:"checkbox"}),"All frames"]})}),(0,jsx_runtime.jsx)(DropdownMenu.bO,{checked:showAsText,onCheckedChange:setShowAsText,asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,size:"sm",children:[(0,jsx_runtime.jsx)(DropdownMenu.nC,{intent:"checkbox"}),"As text"]})})]})]})}function hasResolvedStackFrames(exceptionList){return exceptionList.some(exception=>!!(exception.stacktrace?.type==="resolved"&&exception.stacktrace?.frames)&&exception.stacktrace.frames.some(frame=>frame.resolved))}function ExceptionCard(_ref){var _ref2,_event$uuid;let{issue,issueLoading,event,eventLoading,label}=_ref,{setLoading}=(0,index_esm.useActions)(exceptionCardLogic.S);(0,react.useEffect)(()=>{setLoading(eventLoading)},[setLoading,eventLoading]);let props={properties:event?.properties,id:null!==(_ref2=null!==(_event$uuid=event?.uuid)&&void 0!==_event$uuid?_event$uuid:issue?.id)&&void 0!==_ref2?_ref2:"error"};return(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:errorPropertiesLogic.J,props:props,children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:releasePreviewLogic,props:props,children:(0,jsx_runtime.jsx)(ExceptionCardContent,{issue:issue,timestamp:event?.timestamp,issueLoading:issueLoading,label:label})})})}function ExceptionCardContent(_ref3){let{issue,issueLoading,timestamp,label}=_ref3,{currentTab}=(0,index_esm.useValues)(exceptionCardLogic.S),{setCurrentTab}=(0,index_esm.useActions)(exceptionCardLogic.S);return(0,jsx_runtime.jsx)(src.Mi,{hoverEffect:!1,className:"p-0 relative overflow-hidden",children:(0,jsx_runtime.jsxs)(TabsPrimitive.F1,{value:currentTab,onValueChange:setCurrentTab,children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-between h-[2rem] items-center w-full px-2 border-b",children:(0,jsx_runtime.jsxs)(TabsPrimitive.qf,{className:"flex justify-between w-full h-full items-center",children:[(0,jsx_runtime.jsx)("div",{className:"w-full h-full",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1 text-lg h-full",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconLogomark,{}),(0,jsx_runtime.jsx)("span",{className:"text-sm",children:"Exception"})]})}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 w-full justify-center h-full",children:[(0,jsx_runtime.jsx)(TabsPrimitive.Em,{className:"px-2",value:"stacktrace",children:"Stacktrace"}),(0,jsx_runtime.jsx)(TabsPrimitive.Em,{className:"px-2",value:"properties",children:"Properties"}),(0,jsx_runtime.jsx)(TabsPrimitive.Em,{className:"px-2",value:"session",children:"Session"})]}),(0,jsx_runtime.jsxs)("div",{className:"w-full flex gap-2 justify-end items-center",children:[timestamp&&(0,jsx_runtime.jsx)(TZLabel.w,{className:"text-muted text-xs",time:timestamp}),label]})]})}),(0,jsx_runtime.jsx)(StacktraceTab,{value:"stacktrace",issue:issue,issueLoading:issueLoading,timestamp:timestamp}),(0,jsx_runtime.jsx)(PropertiesTab,{value:"properties"}),(0,jsx_runtime.jsx)(SessionTab,{value:"session",timestamp:timestamp})]})})}},"../../products/error_tracking/frontend/components/ExceptionCard/Stacktrace/StacktraceBase.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>StacktraceEmptyDisplay});var lib_components_EmptyMessage_EmptyMessage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function StacktraceEmptyDisplay(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(lib_components_EmptyMessage_EmptyMessage__WEBPACK_IMPORTED_MODULE_0__.M,{title:"No stacktrace available",description:"Make sure the SDK is set up correctly or contact support if problem persists",buttonText:"Check documentation",buttonTo:"https://posthog.com/docs/error-tracking/installation",size:"small"})}},"../../products/error_tracking/frontend/components/ExceptionCard/Stacktrace/StacktraceGenericDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>StacktraceGenericDisplay});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_Errors_FingerprintRecordPartDisplay__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/Errors/FingerprintRecordPartDisplay.tsx"),lib_components_Errors_StackTraces__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/Errors/StackTraces.tsx"),lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/Errors/errorPropertiesLogic.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/lib/lemon-ui/Tooltip/index.ts"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/utils.ts"),_RuntimeIcon__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../products/error_tracking/frontend/components/RuntimeIcon.tsx"),_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionCard/exceptionCardLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function StacktraceGenericDisplay(_ref){let{className,truncateMessage,renderLoading,renderEmpty}=_ref,{exceptionAttributes,hasStacktrace}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_5__.J),{loading,showAllFrames}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_9__.S),{runtime}=exceptionAttributes||{},renderExceptionHeader=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(_ref2=>{let{type,value,loading,part}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(StacktraceGenericExceptionHeader,{type:type,value:value,part:part,runtime:runtime,loading:loading,truncate:truncateMessage})},[runtime,truncateMessage]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:className,children:[loading?renderLoading(renderExceptionHeader):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_Errors_StackTraces__WEBPACK_IMPORTED_MODULE_4__.v,{showAllFrames:showAllFrames,renderExceptionHeader:renderExceptionHeader,onFrameContextClick:(_,e)=>(0,_utils__WEBPACK_IMPORTED_MODULE_7__.de)(e)}),!loading&&!hasStacktrace&&renderEmpty()]})}function StacktraceGenericExceptionHeader(_ref3){let{type,value,runtime,part,loading,truncate}=_ref3,isScriptError="Script error"===value&&"web"===runtime&&"Error"===type;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"pb-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"flex gap-2 items-center h-6",children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.yW,{className:"w-[25%] h-2"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[runtime&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_RuntimeIcon__WEBPACK_IMPORTED_MODULE_8__.Z,{runtime:runtime,fontSize:"0.9rem",className:"ml-1"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"font-semibold text-[1rem]",children:type||"Unknown type"}),part&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_Errors_FingerprintRecordPartDisplay__WEBPACK_IMPORTED_MODULE_3__.t,{part:part})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_11__.cn)("font-medium text-[var(--gray-8)] leading-6",{"line-clamp-1":truncate}),children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.yW,{className:"w-[50%] h-2"}):isScriptError?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_6__.u,{title:"This error occurs when JavaScript errors are caught by the browser but details are hidden due to cross-origin restrictions.",docLink:"https://posthog.com/docs/error-tracking/common-questions#what-is-a-script-error-with-no-stack-traces",placement:"right-end",delayMs:50,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:value})}):value||"Unknown message"})]})}},"../../products/error_tracking/frontend/components/ExceptionCard/Stacktrace/StacktraceTextDisplay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>StacktraceTextDisplay});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/Errors/errorPropertiesLogic.ts"),lib_components_Errors_stackFrameLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/Errors/stackFrameLogic.ts"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionCard/exceptionCardLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function StacktraceTextDisplay(_ref){let{className,renderLoading,renderEmpty,truncateMessage}=_ref,{exceptionList,hasStacktrace}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_components_Errors_errorPropertiesLogic__WEBPACK_IMPORTED_MODULE_3__.J),{loading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__.S),renderExceptionHeader=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(_ref2=>{let{type,value,loading,part}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(StacktraceTextExceptionHeader,{type:type,value:value,part:part,loading:loading,truncate:truncateMessage})},[truncateMessage]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:className,children:[loading?renderLoading(renderExceptionHeader):exceptionList.map(exception=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(ExceptionTextDisplay,{exception:exception},exception.id)),!loading&&!hasStacktrace&&renderEmpty()]})}function StacktraceTextExceptionHeader(_ref3){let{type,value,loading}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_7__.cn)("font-mono"),children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.yW,{className:"h-2 w-1/2"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[type,": ",value]})})}function ExceptionTextDisplay(_ref4){let{exception}=_ref4,{showAllFrames}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_exceptionCardLogic__WEBPACK_IMPORTED_MODULE_5__.S);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("p",{className:"font-mono mb-0 font-bold line-clamp-1",children:[exception.type,": ",exception.value]}),(exception.stacktrace?.frames||[]).filter(frame=>!!showAllFrames||frame.in_app).map((frame,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(StackframeTextDisplay,{frame:frame},idx))]})}function StackframeTextDisplay(_ref5){let{frame}=_ref5,{stackFrameRecords}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(lib_components_Errors_stackFrameLogic__WEBPACK_IMPORTED_MODULE_4__.e),{loadFromRawIds}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(lib_components_Errors_stackFrameLogic__WEBPACK_IMPORTED_MODULE_4__.e);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{loadFromRawIds([frame.raw_id])},[loadFromRawIds,frame.raw_id]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("p",{className:"font-mono indent-[1rem] whitespace-no-wrap mb-0 line-clamp-1",children:['File "',frame.source,'", line: ',frame.line,", in: ",frame.resolved_name]}),stackFrameRecords[frame.raw_id]&&stackFrameRecords[frame.raw_id].context?.line.line&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{className:"font-mono indent-[2rem] whitespace-no-wrap mb-0 text-tertiary line-clamp-1",children:stackFrameRecords[frame.raw_id].context?.line.line})]})}},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/lib/ui/TabsPrimitive/TabsPrimitive.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".tabs-trigger{border-bottom:2px solid transparent;color:var(--color-text-secondary)}.tabs-trigger:hover,.tabs-trigger[data-state=active]{color:var(--color-accent)}.tabs-trigger[data-state=active]{border-color:var(--color-accent)}",""]),module.exports=exports},"../../node_modules/.pnpm/lodash.throttle@4.1.1/node_modules/lodash.throttle/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectToString=Object.prototype.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){return(timerId=void 0,trailing&&lastArgs)?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function flush(){return void 0===timerId?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=flush,debounced}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==objectToString.call(value)}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}}}]);
//# sourceMappingURL=97977.84aaea66.iframe.bundle.js.map