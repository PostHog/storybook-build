(window.webpackJsonp=window.webpackJsonp||[]).push([[291],{"./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx":function(ie,M,t){"use strict";t.d(M,"a",function(){return A});var U=t("./node_modules/core-js/modules/es.array.map.js"),P=t.n(U),z=t("./node_modules/clsx/dist/clsx.m.js"),E=t("./node_modules/kea/lib/index.esm.js"),N=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),g=t("./frontend/src/lib/components/LemonButton/index.ts"),p=t("./node_modules/antd/es/popconfirm/index.js"),j=t("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts"),l=t("./frontend/src/lib/components/LemonRow/index.ts"),e=t("./frontend/src/lib/components/icons.tsx"),V=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),K=t("./node_modules/kea-forms/lib/index.js"),B=t.n(K),F=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),G=t("./frontend/src/lib/forms/Field.tsx"),h=t("./node_modules/react/jsx-runtime.js"),$=t.n(h);function W(x){var R=x.numberOfResults,y=x.isSearching,_=x.isAddingEntry,H=x.type;return R>0?null:y?Object(h.jsxs)(l.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow",children:["There are no authorized ",H===j.a.RECORDING_DOMAINS?"domains":"URLs"," that match your search."]}):_?null:Object(h.jsx)(l.a,{outlined:!0,fullWidth:!0,size:"large",className:"AuthorizedUrlRow",children:H===j.a.RECORDING_DOMAINS?"No domains are specified, so recordings will be authorized on all domains.":"There are no authorized urls. Add one to get started."})}function k(x){var R=x.actionId,y=x.type,_=Object(j.c)({actionId:R,type:y}),H=Object(E.useValues)(_),X=H.isProposedUrlSubmitting,D=Object(E.useActions)(_),q=D.cancelProposingUrl;return Object(h.jsxs)(K.Form,{logic:j.c,props:{actionId:R,type:y},formKey:"proposedUrl",enableFormOnSubmit:!0,className:"w-full space-y-2",children:[Object(h.jsx)(G.a,{name:"url",children:Object(h.jsx)(F.a,{autoFocus:!0,placeholder:"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)","data-attr":"url-input"})}),Object(h.jsxs)("div",{className:"flex justify-end gap-2",children:[Object(h.jsx)(g.a,{type:"secondary",onClick:q,children:"Cancel"}),Object(h.jsx)(g.a,{htmlType:"submit",type:"primary",disabled:X,"data-attr":"url-save",children:"Save"})]})]})}function A(x){var R=x.actionId,y=x.type,_=x.addText,H=_===void 0?"Add":_,X=Object(j.c)({actionId:R,type:y}),D=Object(E.useValues)(X),q=D.urlsKeyed,ge=D.suggestionsLoading,ce=D.searchTerm,Y=D.launchUrl,Oe=D.editUrlIndex,te=D.isAddUrlFormVisible,I=D.onlyAllowDomains,w=Object(E.useActions)(X),ee=w.addUrl,fe=w.removeUrl,le=w.setSearchTerm,ve=w.newUrl,Z=w.setEditUrlIndex;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex items-center mb-4 gap-2 justify-between",children:[Object(h.jsx)(F.a,{type:"search",placeholder:"Search for authorized ".concat(I?"domains":"URLs"),onChange:le,value:ce}),Object(h.jsx)(g.a,{onClick:ve,type:"secondary",icon:Object(h.jsx)(e.IconPlus,{}),"data-attr":"toolbar-add-url",children:H})]}),ge?Object(h.jsx)(l.a,{outlined:!0,fullWidth:!0,size:"large",children:Object(h.jsx)(V.a,{className:"text-xl"})},-1):Object(h.jsxs)("div",{className:"space-y-2",children:[te&&Object(h.jsx)(l.a,{outlined:!0,fullWidth:!0,size:"large",children:Object(h.jsx)(k,{type:y,actionId:R})}),Object(h.jsx)(W,{numberOfResults:q.length,isSearching:ce.length>0,isAddingEntry:te,type:y}),q.map(function(L,ne){return Object(h.jsx)("div",{className:Object(z.a)("border rounded flex items-center py-2 px-4 min-h-14"),children:Oe===ne?Object(h.jsx)(k,{type:y,actionId:R}):Object(h.jsxs)(h.Fragment,{children:[L.type==="suggestion"&&Object(h.jsx)(N.a,{type:"highlight",className:"mr-4 uppercase",children:"Suggestion"}),Object(h.jsx)("span",{title:L.url,className:"flex-1 truncate",children:L.url}),Object(h.jsx)("div",{className:"Actions flex space-x-2 shrink-0",children:L.type==="suggestion"?Object(h.jsx)(g.a,{onClick:function(){return ee(L.url)},icon:Object(h.jsx)(e.IconPlus,{}),"data-attr":"toolbar-apply-suggestion",children:"Apply suggestion"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a,{icon:Object(h.jsx)(e.IconOpenInApp,{}),to:Y(L.url),targetBlank:!0,tooltip:y===j.a.TOOLBAR_URLS?"Launch toolbar":"Launch url",center:!0,className:"ActionButton","data-attr":"toolbar-open",children:"Launch"}),Object(h.jsx)(g.a,{icon:Object(h.jsx)(e.IconEdit,{}),onClick:function(){return Z(L.originalIndex)},tooltip:"Edit",center:!0,className:"ActionButton"}),Object(h.jsx)(p.a,{placement:"topRight",title:Object(h.jsxs)(h.Fragment,{children:["Are you sure you want to remove this authorized"," ",I?"domain":"URL","?"]}),onConfirm:function(){return fe(ne)},children:Object(h.jsx)(g.a,{icon:Object(h.jsx)(e.IconDelete,{}),tooltip:"Remove ".concat(I?"domain":"URL"),center:!0,className:"ActionButton"})})]})})]})},ne)})]})]})}try{A.displayName="AuthorizedUrlList",A.__docgenInfo={description:"",displayName:"AuthorizedUrlList",props:{actionId:{defaultValue:null,description:"",name:"actionId",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"TOOLBAR_URLS"'},{value:'"RECORDING_DOMAINS"'}]}},addText:{defaultValue:{value:"Add"},description:"",name:"addText",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"]={docgenInfo:A.__docgenInfo,name:"AuthorizedUrlList",path:"frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx#AuthorizedUrlList"})}catch(x){}},"./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx":function(ie,M,t){"use strict";t.d(M,"a",function(){return e});var U=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),P=t.n(U),z=t("./node_modules/react/index.js"),E=t.n(z),N=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),g=t("./frontend/src/lib/components/LemonButton/index.ts"),p=t("./frontend/src/lib/components/LemonDivider/index.ts"),j=t("./node_modules/react/jsx-runtime.js"),l=t.n(j);function e(V){var K=V.item,B=V.onComplete,F=V.onClose,G=Object(z.useState)(K.alias),h=P()(G,2),$=h[0],W=h[1],k=Object(z.useState)(K.regex),A=P()(k,2),x=A[0],R=A[1];return Object(j.jsxs)("div",{className:"px-2",children:[Object(j.jsx)("b",{children:"New Wildcard"}),Object(j.jsx)(p.a,{}),Object(j.jsxs)("div",{className:"space-y-2",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Alias"}),Object(j.jsx)(N.a,{defaultValue:$,onChange:function(_){return W(_)},onPressEnter:function(){return!1}})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Regex"}),Object(j.jsx)(N.a,{defaultValue:x,onChange:function(_){return R(_)},onPressEnter:function(){return!1}}),Object(j.jsxs)("div",{className:"text-muted",style:{marginBottom:12},children:["For example: ",Object(j.jsx)("code",{children:"\\/merchant\\/\\d+\\/dashboard$"})]})]})]}),Object(j.jsxs)("div",{className:"flex justify-end gap-2",children:[Object(j.jsx)(g.a,{type:"secondary",onClick:F,children:"Cancel"}),Object(j.jsx)(g.a,{type:"primary",onClick:function(){return B({alias:$,regex:x})},children:"Save"})]})]})}try{e.displayName="PathRegexPopup",e.__docgenInfo={description:"",displayName:"PathRegexPopup",props:{onComplete:{defaultValue:null,description:"",name:"onComplete",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Record<string, any>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"]={docgenInfo:e.__docgenInfo,name:"PathRegexPopup",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx#PathRegexPopup"})}catch(V){}},"./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx":function(ie,M,t){"use strict";t.d(M,"a",function(){return j});var U=t("./node_modules/core-js/modules/es.array.map.js"),P=t.n(U),z=t("./frontend/src/scenes/actions/Actions.scss"),E=t("./frontend/src/lib/components/PropertyFilters/components/FilterRow.tsx"),N=t("./frontend/src/lib/components/PathCleanFilters/PathCleanFilter.tsx"),g=t("./node_modules/react/jsx-runtime.js"),p=t.n(g);function j(l){var e=l.pageKey,V=l.onChange,K=l.onRemove,B=l.pathCleaningFilters,F=l.showConditionBadge,G=F===void 0?!1:F,h=l.disablePopover,$=h===void 0?!1:h;return Object(g.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:B.length>0&&B.map(function(W,k){return Object(g.jsx)(E.a,{item:W,index:k,totalCount:B.length-1,filters:B,pageKey:e,showConditionBadge:G,disablePopover:$,label:"Add rule",onRemove:K,filterComponent:function(x){return Object(g.jsx)(N.a,{item:W,onClose:x,onComplete:function(y){V(y),x()}})}},k)})})}try{j.displayName="PathCleanFilters",j.__docgenInfo={description:"",displayName:"PathCleanFilters",props:{endpoint:{defaultValue:null,description:"",name:"endpoint",required:!1,type:{name:"string | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newItem: Record<string, any>) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(index: number) => void"}},pathCleaningFilters:{defaultValue:null,description:"",name:"pathCleaningFilters",required:!0,type:{name:"Record<string, any>[]"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}},showConditionBadge:{defaultValue:{value:"false"},description:"",name:"showConditionBadge",required:!1,type:{name:"boolean"}},disablePopover:{defaultValue:{value:"false"},description:"",name:"disablePopover",required:!1,type:{name:"boolean"}},taxonomicGroupTypes:{defaultValue:null,description:"",name:"taxonomicGroupTypes",required:!1,type:{name:"TaxonomicFilterGroupType[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"]={docgenInfo:j.__docgenInfo,name:"PathCleanFilters",path:"frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx#PathCleanFilters"})}catch(l){}},"./frontend/src/lib/hooks/useAnchor.ts":function(ie,M,t){"use strict";t.d(M,"a",function(){return z});var U=t("./node_modules/react/index.js"),P=t.n(U);function z(E){Object(U.useEffect)(function(){if(E&&document.getElementById(E.substr(1))){var N=document.getElementById(E.substr(1));if(!N)return;N.classList.add("highlighted");var g=N.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:g-50-32,behavior:"smooth"})}},[E])}},"./frontend/src/scenes/project/Settings/index.tsx":function(ie,M,t){"use strict";t.r(M),t.d(M,"scene",function(){return gt}),t.d(M,"ProjectSettings",function(){return Ne});var U=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),P=t.n(U),z=t("./node_modules/core-js/modules/es.function.name.js"),E=t("./node_modules/core-js/modules/es.array.includes.js"),N=t("./node_modules/core-js/modules/es.string.includes.js"),g=t("./node_modules/react/index.js"),p=t("./node_modules/kea/lib/index.esm.js"),j=t("./frontend/src/scenes/teamLogic.tsx"),l=t("./frontend/@posthog/lemon-ui/src/index.ts"),e=t("./node_modules/react/jsx-runtime.js");function V(){var n=Object(p.useActions)(j.a),s=n.updateCurrentTeam,r=Object(p.useValues)(j.a),o=r.currentTeam,a=r.currentTeamLoading;return Object(e.jsx)(l.LemonSwitch,{onChange:function(u){s({anonymize_ips:u})},checked:!!(o!=null&&o.anonymize_ips),disabled:a,label:"Discard client IP data",bordered:!0})}var K=t("./frontend/src/lib/components/JSSnippet.tsx"),B=t("./frontend/src/scenes/urls.ts"),F=t("./frontend/src/lib/components/AuthorizedUrlList/AuthorizedUrlList.tsx"),G=t("./frontend/src/lib/components/AuthorizedUrlList/authorizedUrlListLogic.ts");function h(){var n=Object(p.useActions)(j.a),s=n.updateCurrentTeam,r=Object(p.useValues)(j.a),o=r.currentTeam;return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h2",{id:"recordings",className:"subtitle",children:"Recordings"}),Object(e.jsxs)("p",{children:["Watch recordings of how users interact with your web app to see what can be improved. Recordings are found in the ",Object(e.jsx)(l.Link,{to:B.a.sessionRecordings(),children:"recordings page"}),"."]}),Object(e.jsxs)("p",{children:["Please note ",Object(e.jsx)("b",{children:"your website needs to have"})," the ",Object(e.jsx)("a",{href:"#snippet",children:"PostHog snippet"})," or the latest version of"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/integrations/js-integration?utm_campaign=session-recording&utm_medium=in-product",target:"_blank",children:"posthog-js"})," ",Object(e.jsx)("b",{children:"directly"})," installed. For more details, check out our"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/user-guides/recordings?utm_campaign=session-recording&utm_medium=in-product",target:"_blank",children:"docs"}),"."]}),Object(e.jsx)(l.LemonSwitch,{"data-attr":"opt-in-session-recording-switch",onChange:function(m){s({session_recording_opt_in:m})},checked:!!(o!=null&&o.session_recording_opt_in),label:"Record user sessions",bordered:!0}),o!=null&&o.session_recording_opt_in?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h3",{className:"my-6",id:"urls",children:"Capture console logs within recordings"}),Object(e.jsx)("p",{children:"This setting controls if browser console logs wil captured as a part of recordings. The console logs will be shown in the recording player to help you debug any issues."}),Object(e.jsx)(l.LemonSwitch,{"data-attr":"opt-in-capture-console-log-switch",onChange:function(m){s({capture_console_log_opt_in:m})},checked:!!(o!=null&&o.capture_console_log_opt_in),label:"Capture console logs",bordered:!0}),Object(e.jsx)("h3",{className:"my-6",id:"urls",children:"Authorized domains for recordings"}),Object(e.jsx)("p",{children:"Use the settings below to restrict the domains where recordings will be captured. If no domains are selected, then there will be no domain restriction."}),Object(e.jsxs)("p",{children:[Object(e.jsx)("b",{children:"Domains and wilcard subdomains are allowed"})," (example: ",Object(e.jsx)("code",{children:"https://*.example.com"}),"). However, wildcarded top-level domains cannot be used (for security reasons)."]}),Object(e.jsx)(F.a,{type:G.a.RECORDING_DOMAINS})]}):null]})}var $=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),W=t.n($),k=t("./node_modules/@babel/runtime/regenerator/index.js"),A=t.n(k),x=t("./node_modules/core-js/modules/es.regexp.exec.js"),R=t("./node_modules/core-js/modules/es.string.replace.js"),y=t("./frontend/src/lib/api.ts"),_=t("./frontend/src/lib/components/lemonToast.tsx"),H=t("./frontend/src/lib/utils.tsx");function X(n){return n.replace(/\/*(?:posthog|slack)?\/?$/,"/slack")}var D=Object(p.kea)({path:["scenes","project","Settings","webhookIntegrationLogic"],loaders:function(s){var r=s.actions;return{testedWebhook:[null,{testWebhook:function(){var o=W()(A.a.mark(function m(u){var i,c;return A.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((i=u)!==null&&i!==void 0&&i.includes("discord.com/")&&(u=X(u)),!u){d.next=16;break}return d.prev=2,d.next=5,y.b.create("api/user/test_slack_webhook",{webhook:u});case 5:if(c=d.sent,!c.success){d.next=10;break}return d.abrupt("return",u);case 10:r.testWebhookFailure(c.error);case 11:d.next=16;break;case 13:d.prev=13,d.t0=d.catch(2),r.testWebhookFailure(d.t0.message);case 16:return d.abrupt("return",null);case 17:case"end":return d.stop()}},m,null,[[2,13]])}));function a(m){return o.apply(this,arguments)}return a}()}],removedWebhook:[null,{removeWebhook:function(){return j.a.actions.updateCurrentTeam({slack_incoming_webhook:""}),null}}]}},listeners:function(){return{testWebhookSuccess:function(){var s=W()(A.a.mark(function o(a){var m;return A.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:m=a.testedWebhook,m&&j.a.actions.updateCurrentTeam({slack_incoming_webhook:m});case 2:case"end":return i.stop()}},o)}));function r(o){return s.apply(this,arguments)}return r}(),testWebhookFailure:function(r){var o=r.error;_.d.error(Object(H.i)(o))}}},selectors:{loading:[function(n){return[n.testedWebhookLoading,j.a.selectors.currentTeamLoading]},function(n,s){return n||s}]}});function q(){var n=Object(g.useState)(""),s=P()(n,2),r=s[0],o=s[1],a=Object(p.useActions)(D),m=a.testWebhook,u=a.removeWebhook,i=Object(p.useValues)(D),c=i.loading,b=Object(p.useValues)(j.a),d=b.currentTeam;return Object(g.useEffect)(function(){d!=null&&d.slack_incoming_webhook&&o(d==null?void 0:d.slack_incoming_webhook)},[d]),Object(e.jsxs)("div",{children:[Object(e.jsxs)("p",{children:["Send notifications when selected actions are performed by users.",Object(e.jsx)("br",{}),"Guidance on integrating with webhooks available in our docs,"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/integrate/third-party/slack",children:"for Slack"})," and"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/integrations/microsoft-teams",children:"for Microsoft Teams"}),". Discord is also supported."]}),Object(e.jsxs)("div",{className:"space-y-4",style:{maxWidth:"40rem"},children:[Object(e.jsx)(l.LemonInput,{value:r,onChange:o,type:"url",placeholder:d!=null&&d.slack_incoming_webhook?"":"integration disabled - enter URL, then Test & Save",disabled:c,onPressEnter:function(){return m(r)}}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)(l.LemonButton,{type:"primary",disabled:!r,onClick:function(O){O.preventDefault(),m(r)},loading:c,children:"Test & Save"}),Object(e.jsx)(l.LemonButton,{status:"danger",type:"secondary",onClick:function(O){O.preventDefault(),u(),o("")},disabled:!(d!=null&&d.slack_incoming_webhook),children:"Clear & Disable"})]})]})]})}var ge=t("./frontend/src/lib/hooks/useAnchor.ts"),ce=t("./node_modules/kea-router/lib/index.js"),Y=t("./frontend/src/scenes/userLogic.ts");function Oe(){var n=Object(p.useValues)(Y.a),s=n.user,r=n.userLoading,o=Object(p.useActions)(Y.a),a=o.updateUser;return Object(e.jsx)(l.LemonSwitch,{id:"posthog-toolbar-switch",onChange:function(){a({toolbar_mode:(s==null?void 0:s.toolbar_mode)==="disabled"?"toolbar":"disabled"})},checked:(s==null?void 0:s.toolbar_mode)!=="disabled",disabled:r,label:"Enable PostHog Toolbar",bordered:!0})}var te=t("./frontend/src/scenes/ingestion/frameworks/CodeSnippet.tsx"),I=t("./frontend/src/lib/components/icons.tsx");function w(n){var s=n.isOpen,r=n.setIsOpen,o=Object(p.useValues)(j.a),a=o.currentTeam,m=o.teamBeingDeleted,u=Object(p.useActions)(j.a),i=u.deleteTeam,c=Object(g.useState)(!1),b=P()(c,2),d=b[0],f=b[1],O=!!a&&(m==null?void 0:m.id)===a.id;return Object(e.jsxs)(l.LemonModal,{title:"Delete the project and its data?",onClose:function(){return r(!1)},footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(l.LemonButton,{disabled:O,type:"secondary",onClick:function(){return r(!1)},children:"Cancel"}),Object(e.jsx)(l.LemonButton,{type:"primary",disabled:!d,loading:O,"data-attr":"delete-project-ok",status:"danger",onClick:a?function(){return i(a)}:void 0,children:"Delete ".concat(a?a.name:"the current project")})]}),isOpen:s,children:[Object(e.jsxs)("p",{children:["Project deletion ",Object(e.jsx)("b",{children:"cannot be undone"}),". You will lose all data, ",Object(e.jsx)("b",{children:"including events"}),", related to the project."]}),Object(e.jsxs)("p",{children:["Please type ",Object(e.jsx)("strong",{children:a?a.name:"this project's name"})," to confirm."]}),Object(e.jsx)(l.LemonInput,{type:"text",onChange:function(C){a&&f(C.toLowerCase()===a.name.toLowerCase())}})]})}function ee(n){var s=n.isRestricted,r=Object(p.useValues)(j.a),o=r.currentTeam,a=Object(g.useState)(!1),m=P()(a,2),u=m[0],i=m[1];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"text-danger",children:[Object(e.jsx)("h2",{className:"text-danger subtitle",children:"Danger Zone"}),Object(e.jsxs)("div",{className:"mt-4",children:[!s&&Object(e.jsxs)("p",{className:"text-danger",children:["This is ",Object(e.jsx)("b",{children:"irreversible"}),". Please be certain."]}),Object(e.jsxs)(l.LemonButton,{status:"danger",type:"secondary",onClick:function(){return i(!0)},"data-attr":"delete-project-button",icon:Object(e.jsx)(I.IconDelete,{}),disabled:s,children:["Delete ",(o==null?void 0:o.name)||"the current project"]})]})]}),Object(e.jsx)(w,{isOpen:u,setIsOpen:i})]})}try{w.displayName="DeleteProjectModal",w.__docgenInfo={description:"",displayName:"DeleteProjectModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/DangerZone.tsx#DeleteProjectModal"]={docgenInfo:w.__docgenInfo,name:"DeleteProjectModal",path:"frontend/src/scenes/project/Settings/DangerZone.tsx#DeleteProjectModal"})}catch(n){}try{ee.displayName="DangerZone",ee.__docgenInfo={description:"",displayName:"DangerZone",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/DangerZone.tsx#DangerZone"]={docgenInfo:ee.__docgenInfo,name:"DangerZone",path:"frontend/src/scenes/project/Settings/DangerZone.tsx#DangerZone"})}catch(n){}var fe=t("./frontend/src/lib/components/PageHeader.tsx"),le=t("./frontend/src/lib/components/Link.tsx"),ve=t("./frontend/src/lib/components/JSBookmarklet.tsx"),Z=t("./frontend/src/lib/components/RestrictedArea.tsx"),L=t("./frontend/src/lib/constants.tsx"),ne=t("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),se=t.n(ne),vt=t("./node_modules/core-js/modules/es.array.concat.js"),xt=t("./node_modules/core-js/modules/es.object.to-string.js"),yt=t("./node_modules/core-js/modules/es.regexp.to-string.js"),Be=t("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Ue=t("./frontend/src/lib/utils/eventUsageLogic.ts"),re=t("./frontend/src/lib/components/TaxonomicFilter/types.ts"),xe=t("./frontend/src/models/groupsModel.ts");function Ve(){var n=Object(p.useActions)(j.a),s=n.updateCurrentTeam,r=Object(p.useActions)(Ue.e),o=r.reportTestAccountFiltersUpdated,a=Object(p.useValues)(j.a),m=a.currentTeam,u=a.currentTeamLoading,i=Object(p.useValues)(xe.a),c=i.groupsTaxonomicTypes,b=function(f){s({test_account_filters:f}),o(f)};return Object(e.jsxs)("div",{className:"mb-4 flex flex-col gap-2",children:[Object(e.jsx)("div",{className:"mb-4",children:m&&Object(e.jsx)(Be.a,{pageKey:"testaccountfilters",propertyFilters:m==null?void 0:m.test_account_filters,onChange:b,taxonomicGroupTypes:[re.a.EventProperties,re.a.PersonProperties,re.a.EventFeatureFlags].concat(se()(c),[re.a.Cohorts,re.a.Elements])})}),Object(e.jsx)(l.LemonSwitch,{onChange:function(f){localStorage.setItem("default_filter_test_accounts",f.toString()),s({test_account_filters_default_checked:f})},checked:!!(m!=null&&m.test_account_filters_default_checked),disabled:u,label:"Enable this filter on all new insights",bordered:!0})]})}var Ct=t("./node_modules/core-js/modules/es.array.map.js"),Tt=t("./node_modules/core-js/modules/es.object.entries.js"),Fe=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),de=t("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx"),Te=t("./frontend/src/lib/components/LemonDialog/index.ts"),ue=t("./frontend/src/lib/components/LemonSkeleton/index.tsx");function We(){var n=Object(p.useValues)(Fe.a),s=n.preflight,r=Object(p.useValues)(j.a),o=r.currentTeam,a=r.currentTeamLoading,m=Object(p.useActions)(j.a),u=m.updateCurrentTeam;if(!(s!=null&&s.available_timezones)||!o)return Object(e.jsx)(ue.a,{className:"w-1/2"});function i(b){Te.a.open({title:"Do you want to change the timezone of this project?",description:"This will change how every graph in this project is calculated, which means your data will look different than it did before.",primaryButton:{children:"Change timezone",status:"danger",onClick:function(){return u({timezone:b})}},secondaryButton:{children:"Cancel"}})}var c=Object.entries(s.available_timezones).map(function(b){var d=P()(b,2),f=d[0],O=d[1],v="".concat(f.replace(/\//g," / ").replace(/_/g," ")," (UTC").concat(O===0?"\xB1":O>0?"+":"-").concat(Math.abs(O),")");return{key:f,label:v}});return Object(e.jsx)(de.a,{mode:"single",placeholder:"Select a timezone",loading:a,disabled:a,value:[o.timezone],onChange:function(d){return i(d)},options:c,"data-attr":"timezone-select"})}var At=t("./node_modules/core-js/modules/es.array.filter.js"),Lt=t("./node_modules/core-js/modules/es.string.trim.js"),we=t("./node_modules/antd/es/skeleton/index.js");function ze(){var n=Object(p.useValues)(j.a),s=n.currentTeam,r=n.currentTeamLoading,o=Object(p.useActions)(j.a),a=o.updateCurrentTeam,m=Object(g.useState)([]),u=P()(m,2),i=u[0],c=u[1];return Object(g.useEffect)(function(){return c((s==null?void 0:s.data_attributes)||[])},[s]),s?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("p",{children:["Specify a comma-separated list of"," ",Object(e.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes",rel:"noreferrer noopener",children:"data attributes"})," ","used in your app. For example: ",Object(e.jsx)("code",{children:"data-attr, data-custom-id, data-myref-*"}),". These attributes will be used when using the toolbar and defining actions to match unique elements on your pages. You can use ",Object(e.jsx)("code",{children:"*"})," as a wildcard."]}),Object(e.jsxs)("p",{children:["For example, when creating an action on your CTA button, the best selector could be something like:"," ",Object(e.jsx)("code",{children:"div > form > button:nth-child(2)"}),". However all buttons in your app have a"," ",Object(e.jsx)("code",{children:"data-custom-id"})," attribute. If you whitelist it here, the selector for your button will instead be ",Object(e.jsx)("code",{children:"button[data-custom-id='cta-button']"}),"."]}),Object(e.jsxs)("div",{className:"space-y-4",style:{maxWidth:"40rem"},children:[Object(e.jsx)(de.a,{mode:"multiple-custom",onChange:function(d){return c(d||[])},value:i,"data-attr":"data-attribute-select",placeholder:"data-attr, ...",loading:r,disabled:r}),Object(e.jsx)(l.LemonButton,{type:"primary",onClick:function(){return a({data_attributes:i.map(function(d){return d.trim()}).filter(function(d){return d})||[]})},children:"Save"})]})]}):Object(e.jsx)(we.a,{paragraph:{rows:0},active:!0})}var oe=t("./frontend/src/types.ts"),Q=t("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),me=t("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zM512 734.2c-62.1 0-112.6-50.5-112.6-112.6S449.9 509 512 509s112.6 50.5 112.6 112.6S574.1 734.2 512 734.2zm0-160.9c-26.6 0-48.2 21.6-48.2 48.3 0 26.6 21.6 48.3 48.2 48.3s48.2-21.6 48.2-48.3c0-26.6-21.6-48.3-48.2-48.3z"}}]},name:"crown",theme:"filled"},ke=Ke,Ae=t("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),Le=function(s,r){return g.createElement(Ae.a,Object(me.a)(Object(me.a)({},s),{},{ref:r,icon:ke}))};Le.displayName="CrownFilled";var He=g.forwardRef(Le),Ge=t("./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js"),Ye=t("./node_modules/@ant-design/icons/es/icons/LogoutOutlined.js"),Je=t("./frontend/src/lib/components/ProfilePicture/index.ts"),J=t("./frontend/src/lib/utils/permissioning.ts"),$e=t("./frontend/src/lib/components/UserSelectItem.tsx"),Ze=t("./node_modules/kea-forms/lib/index.js"),Pe=t("./frontend/src/lib/forms/Field.tsx");function je(n){var s=n.isRestricted,r=Object(p.useValues)(Q.b),o=r.addableMembers,a=r.allMembersLoading,m=Object(p.useValues)(j.a),u=m.currentTeam,i=Object(g.useState)(!1),c=P()(i,2),b=c[0],d=c[1];function f(){d(!1)}return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(l.LemonButton,{type:"primary","data-attr":"add-project-members-button",onClick:function(){d(!0)},icon:Object(e.jsx)(I.IconPlus,{}),disabled:s,children:"Add members to project"}),Object(e.jsx)(l.LemonModal,{title:"",onClose:f,isOpen:b,simple:!0,children:Object(e.jsxs)(Ze.Form,{logic:Q.b,formKey:"addMembers",enableFormOnSubmit:!0,children:[Object(e.jsx)(l.LemonModal.Header,{children:Object(e.jsx)("h3",{children:"Adding members".concat(u!=null&&u.name?" to project ".concat(u.name):"")})}),Object(e.jsxs)(l.LemonModal.Content,{className:"space-y-2",children:[Object(e.jsx)(Pe.a,{name:"userUuids",children:Object(e.jsx)(de.a,{mode:"multiple",placeholder:"Organization members",loading:a,options:Object($e.a)(o.map(function(O){return O.user}),"uuid")})}),Object(e.jsx)(Pe.a,{name:"level",label:"With project-specific access level",children:Object(e.jsx)(l.LemonSelect,{fullWidth:!0,options:J.d.map(function(O){return{value:O,label:J.b.get(O)}})})})]}),Object(e.jsxs)(l.LemonModal.Footer,{children:[Object(e.jsx)(l.LemonButton,{type:"secondary",onClick:f,children:"Cancel"}),Object(e.jsx)(l.LemonButton,{type:"primary","data-attr":"add-project-members-submit",htmlType:"submit",children:"Add members to project"})]})]})})]})}try{je.displayName="AddMembersModalWithButton",je.__docgenInfo={description:"",displayName:"AddMembersModalWithButton",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/AddMembersModal.tsx#AddMembersModalWithButton"]={docgenInfo:je.__docgenInfo,name:"AddMembersModalWithButton",path:"frontend/src/scenes/project/Settings/AddMembersModal.tsx#AddMembersModalWithButton"})}catch(n){}var ye=t("./frontend/src/lib/components/Tooltip.tsx");function Qe(n){var s,r=Object(p.useValues)(Y.a),o=r.user,a=Object(p.useValues)(j.a),m=a.currentTeam,u=Object(p.useActions)(Q.b),i=u.changeUserAccessLevel,c=m?m.effective_membership_level:null;if(!o)return null;var b=n.organization_level>=L.o.Admin,d=(s=J.b.get(n.level))!==null&&s!==void 0?s:"unknown (".concat(n.level,")"),f=J.d.filter(function(T){return!Object(J.a)(c,o,n,T)}),O=n.explicit_team_level?f.concat([n.explicit_team_level]):f,v=b?"This user is a member of the project implicitly due to being an organization ".concat(d,"."):Object(J.a)(c,o,n,f),C=v?Object(e.jsxs)("div",{className:"border rounded px-3 py-2 flex inline-flex items-center",children:[n.level===L.o.Owner&&Object(e.jsx)(He,{className:"mr-2"}),d]}):Object(e.jsx)(l.LemonSelect,{dropdownMatchSelectWidth:!1,onChange:function(S){S!==null&&i(n.user,S)},options:O.map(function(T){return{value:T,disabled:T===n.explicit_team_level,label:(T>n.level,J.b.get(T))}}),value:n.explicit_team_level});return v?Object(e.jsx)(ye.a,{title:v,children:C}):C}function Xe(n){var s=Object(p.useValues)(Y.a),r=s.user,o=Object(p.useValues)(j.a),a=o.currentTeam,m=Object(p.useActions)(Q.b),u=m.removeMember;if(!r)return null;function i(){Te.a.open({title:"".concat(n.user.uuid==(r==null?void 0:r.uuid)?"Leave":"Remove ".concat(n.user.first_name," (").concat(n.user.email,") from")," project ").concat(a==null?void 0:a.name,"?"),secondaryButton:{children:"Cancel"},primaryButton:{status:"danger",children:n.user.uuid==(r==null?void 0:r.uuid)?"Leave":"Remove",onClick:function(){return u({member:n})}}})}var c=((a==null?void 0:a.effective_membership_level)&&a.effective_membership_level>=L.o.Admin||n.user.uuid===r.uuid)&&n.organization_level<Q.a;return c?Object(e.jsx)(l.LemonButton,{status:"danger",onClick:i,"data-attr":"delete-team-membership",children:n.user.uuid!==r.uuid?Object(e.jsx)(Ge.a,{title:"Remove from project"}):Object(e.jsx)(Ye.a,{title:"Leave project"})}):null}function pe(n){var s=n.user,r=Object(p.useValues)(Q.b),o=r.allMembers,a=r.allMembersLoading,m=[{key:"user_profile_picture",render:function(i,c){return Object(e.jsx)(Je.b,{name:c.user.first_name,email:c.user.email})},width:32},{title:"Name",key:"user_first_name",render:function(i,c){return c.user.uuid==s.uuid?"".concat(c.user.first_name," (me)"):c.user.first_name},sorter:function(i,c){return i.user.first_name.localeCompare(c.user.first_name)}},{title:"Email",key:"user_email",render:function(i,c){return c.user.email},sorter:function(i,c){return i.user.email.localeCompare(c.user.email)}},{title:"Level",key:"level",render:function(i,c){return Qe(c)},sorter:function(i,c){return i.level-c.level}},{title:"Joined\xA0At",dataIndex:"joined_at",key:"joined_at",render:function(i,c){return Object(H.N)(c.joined_at)},sorter:function(i,c){return i.joined_at.localeCompare(c.joined_at)}},{key:"actions",align:"center",render:function(i,c){return Xe(c)}}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("h2",{className:"subtitle flex justify-between items-center",id:"members-with-project-access",children:["Members with Project Access",Object(e.jsx)(Z.a,{Component:je,minimumAccessLevel:L.o.Admin,scope:Z.b.Project})]}),Object(e.jsx)(l.LemonTable,{columns:m,dataSource:o,loading:a,"data-attr":"team-members-table"})]})}try{pe.displayName="TeamMembers",pe.__docgenInfo={description:"",displayName:"TeamMembers",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserType"}},team:{defaultValue:null,description:"",name:"team",required:!0,type:{name:"TeamType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/TeamMembers.tsx#TeamMembers"]={docgenInfo:pe.__docgenInfo,name:"TeamMembers",path:"frontend/src/scenes/project/Settings/TeamMembers.tsx#TeamMembers"})}catch(n){}var qe=t("./frontend/src/scenes/organizationLogic.tsx"),et=t("./frontend/src/scenes/sceneLogic.ts"),tt=t("./node_modules/@ant-design/icons/es/icons/LockOutlined.js"),nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},st=nt,Se=function(s,r){return g.createElement(Ae.a,Object(me.a)(Object(me.a)({},s),{},{ref:r,icon:st}))};Se.displayName="UnlockOutlined";var rt=g.forwardRef(Se);function he(n){var s=n.isRestricted,r=Object(p.useValues)(qe.a),o=r.currentOrganization,a=r.currentOrganizationLoading,m=Object(p.useValues)(j.a),u=m.currentTeam,i=m.currentTeamLoading,c=Object(p.useActions)(j.a),b=c.updateCurrentTeam,d=Object(p.useActions)(et.a),f=d.guardAvailableFeature,O=Object(p.useValues)(Y.a),v=O.hasAvailableFeature,C=v(oe.d.PROJECT_BASED_PERMISSIONING)&&(u==null?void 0:u.access_control);return Object(e.jsxs)("div",{children:[Object(e.jsx)("h2",{className:"subtitle",id:"access-control",children:"Access Control"}),Object(e.jsx)("p",{children:C?Object(e.jsxs)(e.Fragment,{children:["This project is"," ",Object(e.jsxs)("b",{children:[Object(e.jsx)(tt.a,{style:{color:"var(--warning)",marginRight:5}}),"private"]}),". Only members listed below are allowed to access it."]}):Object(e.jsxs)(e.Fragment,{children:["This project is"," ",Object(e.jsxs)("b",{children:[Object(e.jsx)(rt,{style:{marginRight:5}}),"open"]}),". Any member of the organization can access it. To enable granular access control, make it private."]})}),Object(e.jsx)(l.LemonSwitch,{onChange:function(S){f(oe.d.PROJECT_BASED_PERMISSIONING,"project-based permissioning","Set permissions granularly for each project. Make sure only the right people have access to protected data.",function(){return b({access_control:S})})},checked:!!C,disabled:s||!o||!u||a||i,bordered:!0,label:"Make project private"})]})}try{he.displayName="AccessControl",he.__docgenInfo={description:"",displayName:"AccessControl",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/project/Settings/AccessControl.tsx#AccessControl"]={docgenInfo:he.__docgenInfo,name:"AccessControl",path:"frontend/src/scenes/project/Settings/AccessControl.tsx#AccessControl"})}catch(n){}var ot=t("./frontend/src/lib/components/PathCleanFilters/PathCleanFilters.tsx");function at(){var n=Object(p.useActions)(j.a),s=n.updateCurrentTeam,r=Object(p.useValues)(j.a),o=r.currentTeam,a=r.pathCleaningFiltersWithNew,m=function(c){s({path_cleaning_filters:c})},u=function(c){var b=((o==null?void 0:o.path_cleaning_filters)||[]).filter(function(d,f){return f!==c});m(b)};return Object(e.jsx)("div",{children:o&&Object(e.jsx)(ot.a,{pageKey:"pathcleanfilters",pathCleaningFilters:a,onChange:function(c){m([].concat(se()((o==null?void 0:o.path_cleaning_filters)||[]),[c]))},onRemove:u})})}var Pt=t("./node_modules/core-js/modules/es.object.keys.js"),St=t("./node_modules/core-js/modules/es.symbol.js"),Et=t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),_t=t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Rt=t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),it=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),be=t.n(it),Ee=t("./frontend/src/lib/components/PersonPropertySelect/PersonPropertySelect.tsx"),ct=t("./frontend/src/lib/components/EventSelect/EventSelect.tsx"),_e=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),lt=t("./frontend/src/lib/components/AlertMessage/index.ts");function Re(n,s){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);s&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,o)}return r}function dt(n){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Re(Object(r),!0).forEach(function(o){be()(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}function ut(){var n=Object(p.useActions)(j.a),s=n.updateCurrentTeam,r=Object(p.useValues)(j.a),o=r.currentTeam,a=r.funnelCorrelationConfig,m=function(i,c,b){if(o){var d=dt({},a);i!==void 0&&(d.excluded_person_property_names=i),b!==void 0&&(d.excluded_event_property_names=b),c!==void 0&&(d.excluded_event_names=c),d&&JSON.stringify(d)!==JSON.stringify(a)&&s({correlation_config:d})}};return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("h2",{className:"subtitle",id:"internal-users-filtering",children:["Correlation analysis exclusions"," ",Object(e.jsx)(_e.a,{type:"warning",className:"uppercase ml-2",children:"Beta"})]}),Object(e.jsx)("p",{children:"Globally exclude events or properties that do not provide relevant signals for your conversions."}),Object(e.jsx)(lt.a,{type:"info",children:"Correlation analysis can automatically surface relevant signals for conversion, and help you understand why your users dropped off and what makes them convert."}),o&&Object(e.jsxs)("div",{className:"mt-4 space-y-2",children:[Object(e.jsxs)("div",{children:[Object(e.jsxs)("h3",{className:"flex items-center gap-2",children:[Object(e.jsx)(I.IconSelectProperties,{className:"text-lg"}),"Excluded person properties"]}),Object(e.jsx)(Ee.a,{onChange:function(i){return m(i)},selectedProperties:o.correlation_config.excluded_person_property_names||[],addText:"Add exclusion"})]}),Object(e.jsxs)("div",{children:[Object(e.jsxs)("h3",{className:"flex items-center gap-2",children:[Object(e.jsx)(I.IconSelectEvents,{className:"text-lg"}),"Excluded events"]}),Object(e.jsx)(ct.a,{onChange:function(i){return m(void 0,i)},selectedEvents:o.correlation_config.excluded_event_names||[],addElement:Object(e.jsx)(l.LemonButton,{size:"small",type:"secondary",icon:Object(e.jsx)(I.IconPlus,{}),children:"Add exclusion"})})]}),Object(e.jsxs)("div",{children:[Object(e.jsxs)("h3",{className:"flex items-center gap-2",children:[Object(e.jsx)(I.IconSelectEvents,{className:"text-lg"}),"Excluded event properties"]}),Object(e.jsx)("div",{style:{maxWidth:"40rem"},children:Object(e.jsx)(de.a,{mode:"multiple-custom",onChange:function(i){return m(void 0,void 0,i)},value:o.correlation_config.excluded_event_property_names||[]})})]})]})]})}var mt=t("./frontend/src/lib/components/LemonTable/index.ts"),De=t("./frontend/src/lib/introductions/groupsAccessLogic.ts"),Dt=t("./node_modules/core-js/modules/es.array.iterator.js"),It=t("./node_modules/core-js/modules/web.dom-collections.iterator.js");function Ie(n,s){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);s&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,o)}return r}function ae(n){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Ie(Object(r),!0).forEach(function(o){be()(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}var Me=Object(p.kea)({path:["scenes","project","Settings","groupAnalyticsConfigLogic"],connect:{values:[xe.a,["groupTypes","groupTypesLoading"]],actions:[xe.a,["updateGroupTypesMetadata"]]},actions:{setSingular:function(s,r){return{groupTypeIndex:s,value:r}},setPlural:function(s,r){return{groupTypeIndex:s,value:r}},reset:!0,save:!0},reducers:{singularChanges:[{},{setSingular:function(s,r){var o=r.groupTypeIndex,a=r.value;return ae(ae({},s),{},be()({},o,a))},reset:function(){return{}},updateGroupTypesMetadataSuccess:function(){return{}}}],pluralChanges:[{},{setPlural:function(s,r){var o=r.groupTypeIndex,a=r.value;return ae(ae({},s),{},be()({},o,a))},reset:function(){return{}},updateGroupTypesMetadataSuccess:function(){return{}}}]},selectors:{hasChanges:[function(n){return[n.singularChanges,n.pluralChanges]},function(n,s){return Object.keys(n).length>0||Object.keys(s).length>0}]},listeners:function(s){var r=s.values,o=s.actions;return{save:function(){var a=W()(A.a.mark(function u(){var i,c,b,d;return A.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:i=r.groupTypes,c=r.singularChanges,b=r.pluralChanges,d=i.map(function(v){var C=ae({},v);return c[v.group_type_index]&&(C.name_singular=c[v.group_type_index]),b[v.group_type_index]&&(C.name_plural=b[v.group_type_index]),C}),o.updateGroupTypesMetadata(d);case 3:case"end":return O.stop()}},u)}));function m(){return a.apply(this,arguments)}return m}()}}}),jt=t("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js");function pt(){var n=Object(p.useValues)(Me),s=n.groupTypes,r=n.groupTypesLoading,o=n.singularChanges,a=n.pluralChanges,m=n.hasChanges,u=Object(p.useActions)(Me),i=u.setSingular,c=u.setPlural,b=u.reset,d=u.save,f=Object(p.useValues)(De.b),O=f.groupsAccessStatus;if(O!==De.a.AlreadyUsing)return null;var v=[{title:Object(e.jsxs)(ye.a,{title:"As used in code",children:["Group type",Object(e.jsx)(jt.a,{className:"ml-2"})]}),dataIndex:"group_type",key:"name",render:function(T){return T}},{title:"Singular name",key:"singular",render:function(T,S){return Object(e.jsx)(l.LemonInput,{value:o[S.group_type_index]||S.name_singular||S.group_type,onChange:function(Ce){return i(S.group_type_index,Ce)}})}},{title:"Plural name",key:"plural",render:function(T,S){return Object(e.jsx)(l.LemonInput,{value:a[S.group_type_index]||S.name_plural||"".concat(S.group_type,"(s)"),onChange:function(Ce){return c(S.group_type_index,Ce)}})}}];return Object(e.jsxs)("div",{id:"group-analytics",children:[Object(e.jsx)("h2",{className:"subtitle",children:"Group Analytics"}),Object(e.jsx)("p",{children:"This project has access to group analytics. Below you can configure how various group types are displayed throughout the app."}),Object(e.jsx)(mt.a,{columns:v,dataSource:s,loading:r}),Object(e.jsxs)("div",{className:"flex gap-2 mt-4",children:[Object(e.jsx)(l.LemonButton,{type:"primary",disabled:!m,onClick:d,children:"Save"}),Object(e.jsx)(l.LemonButton,{disabled:!m,onClick:b,children:"Cancel"})]}),Object(e.jsx)(l.LemonDivider,{className:"my-6"})]})}function ht(){var n=Object(p.useValues)(j.a),s=n.currentTeam,r=Object(p.useActions)(j.a),o=r.updateCurrentTeam,a=Object(g.useState)([]),m=P()(a,2),u=m[0],i=m[1];return Object(g.useEffect)(function(){return i((s==null?void 0:s.person_display_name_properties)||L.p)},[s]),s?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("p",{children:["Choose which properties of an identified Person will be used for their ",Object(e.jsx)("b",{children:"Display Name"}),". The first property to be found on the Person will be used. Drag the items to re-order the priority."]}),Object(e.jsxs)("div",{className:"space-y-4",children:[Object(e.jsx)(Ee.a,{onChange:function(b){return i(b)},selectedProperties:u||[],addText:"Add",sortable:!0}),Object(e.jsx)(l.LemonButton,{type:"primary",onClick:function(){return o({person_display_name_properties:u.map(function(b){return b.trim()}).filter(function(b){return b})||[]})},children:"Save"})]})]}):Object(e.jsx)(ue.a,{className:"w-1/2"})}var bt=t("./frontend/src/scenes/project/Settings/SlackIntegration.tsx"),gt={component:Ne};function Ot(){var n=Object(p.useValues)(j.a),s=n.currentTeam,r=n.currentTeamLoading,o=Object(p.useActions)(j.a),a=o.updateCurrentTeam,m=Object(g.useState)((s==null?void 0:s.name)||""),u=P()(m,2),i=u[0],c=u[1];return s!=null&&s.is_demo?Object(e.jsx)("p",{children:Object(e.jsx)("i",{children:"The demo project cannot be renamed."})}):Object(e.jsxs)("div",{className:"space-y-4",style:{maxWidth:"40rem"},children:[Object(e.jsx)(l.LemonInput,{value:i,onChange:c,disabled:r}),Object(e.jsx)(l.LemonButton,{type:"primary",onClick:function(){return a({name:i})},disabled:!i||!s||i===s.name,loading:r,children:"Rename Project"})]})}function Ne(){var n,s,r,o=Object(p.useValues)(j.a),a=o.currentTeam,m=o.currentTeamLoading,u=o.isTeamTokenResetAvailable,i=Object(p.useActions)(j.a),c=i.resetToken,b=Object(p.useValues)(ce.router),d=b.location,f=Object(p.useValues)(Y.a),O=f.user,v=f.hasAvailableFeature,C=O==null||(n=O.organization)===null||n===void 0||(s=n.available_features)===null||s===void 0?void 0:s.includes(oe.d.PATHS_ADVANCED);Object(ge.a)(d.hash);var T=Object(e.jsxs)("div",{className:"space-y-4",children:[Object(e.jsx)(ue.a,{className:"w-1/2"}),Object(e.jsx)(ue.a,{repeat:3})]});return Object(e.jsxs)("div",{children:[Object(e.jsx)(fe.a,{title:"Project settings",caption:"Organize your analytics within the project. These settings only apply to ".concat((r=a==null?void 0:a.name)!==null&&r!==void 0?r:"the current project",".")}),Object(e.jsxs)("div",{className:"border rounded p-6",children:[Object(e.jsx)("h2",{id:"name",className:"subtitle mt-0",children:"Display name"}),m&&!a?T:Object(e.jsx)(Ot,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{id:"snippet",className:"subtitle",children:"Website event autocapture"}),"To integrate PostHog into your website and get event autocapture with no additional work, include the following snippet in your\xA0website's\xA0HTML. Ideally, put it just above the\xA0",Object(e.jsx)("code",{children:"</head>"}),"\xA0tag.",Object(e.jsx)("br",{}),"For more guidance, including on identifying users,"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/integrations/js-integration",children:"see PostHog Docs"}),".",m&&!a?T:Object(e.jsx)(K.a,{}),Object(e.jsxs)("p",{children:["You can even test PostHog out on a live site without changing any code.",Object(e.jsx)("br",{}),"Just drag the bookmarklet below to your bookmarks bar, open the website you want to test PostHog on and click it.",Object(e.jsx)("br",{}),"This will enable our tracking, on the currently loaded page only. The data will show up in this project.",Object(e.jsx)("br",{})]}),Object(e.jsx)("div",{children:a&&Object(e.jsx)(ve.a,{team:a})}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{id:"custom-events",className:"subtitle",children:"Send custom events"}),"To send custom events ",Object(e.jsx)("a",{href:"https://posthog.com/docs/integrations",children:"visit PostHog Docs"})," and integrate the library for the specific language or platform you're using. We support Python, Ruby, Node, Go, PHP, iOS, Android, and more.",Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{id:"project-variables",className:"subtitle mb-4",children:"Project Variables"}),Object(e.jsx)("h3",{id:"project-api-key",className:"l3",children:"Project API Key"}),Object(e.jsxs)("p",{children:["You can use this write-only key in any one of"," ",Object(e.jsx)("a",{href:"https://posthog.com/docs/integrations",children:"our libraries"}),"."]}),Object(e.jsx)(te.a,{actions:u?[{icon:Object(e.jsx)(I.IconRefresh,{}),title:"Reset project API key",popconfirmProps:{title:Object(e.jsxs)(e.Fragment,{children:["Reset the project's API key?"," ",Object(e.jsx)("b",{children:"This will invalidate the current API key and cannot be undone."})]}),okText:"Reset key",okType:"danger",placement:"left"},callback:c}]:[],copyDescription:"project API key",children:(a==null?void 0:a.api_token)||""}),Object(e.jsx)("p",{children:"Write-only means it can only create new events. It can't read events or any of your other data stored with PostHog, so it's safe to use in public apps."}),Object(e.jsx)("h3",{id:"project-id",className:"l3 mt-4",children:"Project ID"}),Object(e.jsxs)("p",{children:["You can use this ID to reference your project in our ",Object(e.jsx)("a",{href:"https://posthog.com/docs/api",children:"API"}),"."]}),Object(e.jsx)(te.a,{copyDescription:"project ID",children:String((a==null?void 0:a.id)||"")}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{className:"subtitle",id:"timezone",children:"Timezone"}),Object(e.jsx)("p",{children:"Set the timezone for your project. All charts will be based on this timezone, including how PostHog buckets data in day/week/month intervals."}),Object(e.jsx)("div",{style:{maxWidth:"40rem"},children:Object(e.jsx)(We,{})}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsxs)("h2",{className:"subtitle",id:"internal-users-filtering",children:["Filter out internal and test users"," ",Object(e.jsx)(ye.a,{title:'Events will still be ingested and saved, but they will be excluded from any queries where the "Filter out internal and test users" toggle is set.',children:Object(e.jsx)(I.IconInfo,{style:{fontSize:"1em",color:"var(--muted-alt)",marginTop:4,marginLeft:5}})})]}),Object(e.jsxs)("p",{children:["Increase the quality of your analytics results by filtering out events from internal sources, such as team members, test accounts, or development environments."," ",Object(e.jsx)("strong",{children:"The filters you apply here are added as extra filters when the toggle is switched on."})," ","So, if you apply a cohort, it means you will only match users in that cohort."]}),Object(e.jsx)("strong",{children:"Example filters"}),Object(e.jsxs)("ul",{className:"list-disc pl-4 mb-2",children:[Object(e.jsxs)("li",{children:['"',Object(e.jsx)("strong",{children:"Email"})," does not contain ",Object(e.jsx)("strong",{children:"yourcompany.com"}),`" to exclude all events from your company's team members.`]}),Object(e.jsxs)("li",{children:['"',Object(e.jsx)("strong",{children:"Host"})," does not contain ",Object(e.jsx)("strong",{children:"localhost"}),'" to exclude all events from local development environments.']})]}),Object(e.jsx)(Ve,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)(ut,{}),C&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsxs)("h2",{className:"subtitle",id:"path_cleaning_filtering",children:["Path cleaning rules",Object(e.jsx)(_e.a,{type:"warning",className:"uppercase",style:{marginLeft:8},children:"Beta"})]}),Object(e.jsxs)("p",{children:["Make your ",Object(e.jsx)(le.a,{to:B.a.insightNew({insight:oe.E.PATHS}),children:"Paths"})," clearer by aliasing one or multiple URLs."," ",Object(e.jsxs)("i",{children:["Example: ",Object(e.jsx)("code",{children:"htttp://client1.mydomain.com/accounts"})," and"," ",Object(e.jsx)("code",{children:"htttp://tenant2.mydomain.com/accounts"})," can become a single"," ",Object(e.jsx)("code",{children:"accounts"})," path."]})]}),Object(e.jsx)("p",{children:"Each rule is composed of an alias and a regex pattern. Any pattern in a URL or event name that matches the regex will be replaced with the alias. Rules are applied in the order that they're listed."}),Object(e.jsx)("p",{children:Object(e.jsx)("b",{children:"Rules that you set here will be applied before wildcarding and other regex replacement if the toggle is switched on."})}),Object(e.jsx)(at,{})]}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("div",{id:"permitted-domains"})," ",Object(e.jsx)("div",{id:"authorized-urls"}),Object(e.jsx)("h2",{className:"subtitle",id:"urls",children:"Authorized URLs"}),Object(e.jsxs)("p",{children:["These are the URLs where the"," ",Object(e.jsxs)("b",{children:[Object(e.jsx)(le.a,{to:B.a.toolbarLaunch(),children:"Toolbar"})," will automatically launch"]})," ","(if you're logged in) and where we'll ",Object(e.jsx)("b",{children:"record sessions"})," (if ",Object(e.jsx)("a",{href:"#recordings",children:"enabled"}),")."]}),Object(e.jsxs)("p",{children:[Object(e.jsx)("b",{children:"Domains and wilcard subdomains are allowed"})," (example: ",Object(e.jsx)("code",{children:"https://*.example.com"}),"). However, wildcarded top-level domains cannot be used (for security reasons)."]}),Object(e.jsx)(F.a,{type:G.a.TOOLBAR_URLS}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{className:"subtitle",id:"attributes",children:"Data attributes"}),Object(e.jsx)(ze,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{className:"subtitle",id:"person-display-name",children:"Person Display Name"}),Object(e.jsx)(ht,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{className:"subtitle",id:"webhook",children:"Webhook integration"}),Object(e.jsx)(q,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h2",{className:"subtitle",id:"slack",children:"Slack integration"}),Object(e.jsx)(bt.a,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"})]}),Object(e.jsx)("h2",{className:"subtitle",id:"datacapture",children:"Data capture configuration"}),Object(e.jsx)(V,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)("h2",{className:"subtitle",children:"PostHog Toolbar"}),Object(e.jsx)("p",{children:"Enable PostHog Toolbar, which gives access to heatmaps, stats and allows you to create actions, right there on your website!"}),Object(e.jsx)(Oe,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)(h,{}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),Object(e.jsx)(pt,{}),Object(e.jsx)(Z.a,{Component:he,minimumAccessLevel:L.o.Admin}),Object(e.jsx)(l.LemonDivider,{className:"my-6"}),(a==null?void 0:a.access_control)&&v(oe.d.PROJECT_BASED_PERMISSIONING)&&Object(e.jsxs)(p.BindLogic,{logic:Q.b,props:{team:a},children:[O&&Object(e.jsx)(pe,{user:O,team:a}),Object(e.jsx)(l.LemonDivider,{className:"my-6"})]}),Object(e.jsx)(Z.a,{Component:ee,minimumAccessLevel:L.o.Admin,scope:Z.b.Project})]})]})}}}]);
