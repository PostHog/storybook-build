/*! For license information please see 5139.35c730a9.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[5139],{"./frontend/src/lib/components/CompactList/CompactList.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>CompactList_CompactList_CompactList});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),CompactList=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/CompactList/CompactList.scss"),CompactList_default=__webpack_require__.n(CompactList),options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(CompactList_default(),options);CompactList_default().locals;var LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonSkeleton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSkeleton/index.ts"),EmptyMessage=__webpack_require__("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function CompactList_CompactList_CompactList(_ref){let{title,viewAllURL,loading,items,emptyMessage,renderRow}=_ref;return(0,jsx_runtime.jsxs)("div",{className:"CompactList",children:[(0,jsx_runtime.jsxs)("div",{className:"CompactList__header",children:[(0,jsx_runtime.jsx)("h3",{className:"px-2 truncate",title,children:title}),viewAllURL&&(0,jsx_runtime.jsx)(LemonButton.J,{to:viewAllURL,children:"View all"})]}),(0,jsx_runtime.jsx)("div",{className:"mx-2",children:(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-0"})}),(0,jsx_runtime.jsx)("div",{className:"CompactList__content",children:loading?(0,jsx_runtime.jsx)("div",{className:"p-2 space-y-6",children:Array.from({length:6},((_,index)=>(0,jsx_runtime.jsx)(LemonSkeleton.y,{},index)))}):0===items.length&&emptyMessage?(0,jsx_runtime.jsx)(EmptyMessage.M,{...emptyMessage}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:items.map(((item,index)=>renderRow(item,index)))})})]})}},"./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>DashboardsTable,z:()=>DashboardsTableContainer});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@posthog+icons@0.4.11_react-dom@18.2.0_react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),kea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/constants.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonMarkdown__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonMarkdown/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonRow/index.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),scenes_organization_membersLogic__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./frontend/src/scenes/organization/membersLogic.tsx"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./frontend/src/scenes/urls.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),_types__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./frontend/src/types.ts"),_DashboardHeader__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./frontend/src/scenes/dashboard/DashboardHeader.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function DashboardsTableContainer(){const{dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.h),{dashboards,filters}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_17__.dJ);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(DashboardsTable,{dashboards,dashboardsLoading,filters})}function DashboardsTable(_ref){let{dashboards,dashboardsLoading,filters,extraActions,hideActions}=_ref;const{unpinDashboard,pinDashboard}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.h),{setFilters}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_17__.dJ),{hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_23__.userLogic),{currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_21__.teamLogic),{showDuplicateDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_19__.T),{showDeleteDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useActions)(scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_18__.r),{meFirstMembers}=(0,kea__WEBPACK_IMPORTED_MODULE_2__.useValues)(scenes_organization_membersLogic__WEBPACK_IMPORTED_MODULE_20__.m),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref2){let{id}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{size:"small",status:"stealth",onClick:pinned?()=>unpinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList):()=>pinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList),tooltip:pinned?"Unpin dashboard":"Pin dashboard",icon:pinned?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPinFilled,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPin,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(name,_ref3){let{id,description,is_shared,effective_privilege_level}=_ref3;const isPrimary=id===currentTeam?.primary_dashboard,canEditDashboard=effective_privilege_level>=lib_constants__WEBPACK_IMPORTED_MODULE_4__.kH.CanEdit;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"row-name",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_13__.r,{"data-attr":"dashboard-name",to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),children:name||"Untitled"}),is_shared&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:"This dashboard is shared publicly.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconShare,{className:"ml-1 text-base text-link"})}),!canEditDashboard&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:_DashboardHeader__WEBPACK_IMPORTED_MODULE_26__.o,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_5__._V1,{className:"ml-1 text-base text-muted"})}),isPrimary&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:"The primary dashboard is shown on the project home page.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_5__.Bhv,{className:"ml-1 text-base text-warning"})})]}),hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_25__.P$.DASHBOARD_COLLABORATION)&&description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonMarkdown__WEBPACK_IMPORTED_MODULE_9__.j,{className:"row-description max-w-100",lowKeyHeadings:!0,children:description})]})},sorter:_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_24__.q},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_25__.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_3__.D,{tags,staticOnly:!0}):null}}]:[],(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_12__.JB)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_12__.rw)(),hideActions?{}:{width:0,render:function RenderActions(_,_ref4){let{id,name}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_7__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).actions.setDashboardMode(null,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList)},fullWidth:!0,children:"View"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_16__.BM)({id}).actions.setDashboardMode(_types__WEBPACK_IMPORTED_MODULE_25__.MN.Edit,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_15__.GU.DashboardsList)},fullWidth:!0,children:"Edit"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{status:"stealth",onClick:()=>{showDuplicateDashboardModal(id,name)},fullWidth:!0,children:"Duplicate"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_8__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_10__.Q,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_5__.Bhv,{className:"text-warning"}),fullWidth:!0,status:"warning",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("span",{className:"text-muted",children:["Change the default dashboard",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("br",{}),"from the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_13__.r,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_22__.j.projectHomepage(),children:"project home page"}),"."]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_8__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{onClick:()=>{showDeleteDashboardModal(id)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:x=>setFilters({search:x}),value:filters.search}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:"Filter to:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{active:filters.pinned,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({pinned:!filters.pinned}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPin,{}),children:"Pinned"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_6__.J,{active:filters.shared,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({shared:!filters.shared}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconShare,{}),children:"Shared"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("span",{children:"Created by:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_1__.LemonSelect,{options:[{value:"All users",label:"All Users"},...meFirstMembers.map((x=>({value:x.user.uuid,label:x.user.first_name})))],size:"small",value:filters.createdBy,onChange:v=>{setFilters({createdBy:v})},dropdownMatchSelectWidth:!1})]}),extraActions]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_11__.g,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:dashboards,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns,loading:dashboardsLoading,defaultSorting:{columnKey:"name",order:1},emptyState:"No dashboards matching your filters!",nouns:["dashboard","dashboards"]})]})}},"./frontend/src/scenes/feature-flags/FeatureFlag.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FeatureFlag:()=>FeatureFlag_FeatureFlag,scene:()=>scene});__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlag.scss");var card=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/card/index.js"),skeleton=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/skeleton/index.js"),popconfirm=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/popconfirm/index.js"),es_radio=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/radio/index.js"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.5/node_modules/kea-forms/lib/index.js"),kea_router_lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),ActivityLog=__webpack_require__("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),humanizeActivity=__webpack_require__("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),CopyToClipboard=__webpack_require__("./frontend/src/lib/components/CopyToClipboard.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),ObjectTags=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),PayGateMini=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),Field=__webpack_require__("./frontend/src/lib/forms/Field.tsx"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonCheckbox=__webpack_require__("./frontend/src/lib/lemon-ui/LemonCheckbox/index.ts"),LemonDivider=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),LemonInput=__webpack_require__("./frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),LemonTag=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTag/LemonTag.tsx"),LemonTextArea=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTextArea/LemonTextArea.tsx"),Lettermark=__webpack_require__("./frontend/src/lib/lemon-ui/Lettermark/index.ts"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),Spinner=__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip/index.ts"),featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),es=__webpack_require__("./node_modules/.pnpm/posthog-js@1.95.0/node_modules/posthog-js/dist/es.js"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),PostHogContext=(0,react.createContext)({client:es.ZP});var usePostHog=function(){return(0,react.useContext)(PostHogContext).client};var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function PostHogFeature(_a){var flag=_a.flag,match=_a.match,children=_a.children,fallback=_a.fallback,visibilityObserverOptions=_a.visibilityObserverOptions,trackInteraction=_a.trackInteraction,trackView=_a.trackView,props=__rest(_a,["flag","match","children","fallback","visibilityObserverOptions","trackInteraction","trackView"]),payload=function useFeatureFlagPayload(flag){var client=usePostHog(),_a=(0,react.useState)(),featureFlagPayload=_a[0],setFeatureFlagPayload=_a[1];return(0,react.useEffect)((function(){return client.onFeatureFlags((function(){setFeatureFlagPayload(client.getFeatureFlagPayload(flag))}))}),[client,flag]),featureFlagPayload}(flag),variant=function useFeatureFlagVariantKey(flag){var client=usePostHog(),_a=(0,react.useState)(),featureFlagVariantKey=_a[0],setFeatureFlagVariantKey=_a[1];return(0,react.useEffect)((function(){return client.onFeatureFlags((function(){setFeatureFlagVariantKey(client.getFeatureFlag(flag))}))}),[client,flag]),featureFlagVariantKey}(flag),shouldTrackInteraction=null==trackInteraction||trackInteraction,shouldTrackView=null==trackView||trackView;if(void 0===match||variant===match){var childNode="function"==typeof children?children(payload):children;return react.createElement(VisibilityAndClickTracker,__assign({flag,options:visibilityObserverOptions,trackInteraction:shouldTrackInteraction,trackView:shouldTrackView},props),childNode)}return react.createElement(react.Fragment,null,fallback)}function VisibilityAndClickTracker(_a){var flag=_a.flag,children=_a.children,trackInteraction=_a.trackInteraction,trackView=_a.trackView,options=_a.options,props=__rest(_a,["flag","children","trackInteraction","trackView","options"]),ref=(0,react.useRef)(null),posthog=usePostHog(),visibilityTrackedRef=(0,react.useRef)(!1),clickTrackedRef=(0,react.useRef)(!1),cachedOnClick=(0,react.useCallback)((function(){!clickTrackedRef.current&&trackInteraction&&(!function captureFeatureInteraction(flag,posthog){var _a;posthog.capture("$feature_interaction",{feature_flag:flag,$set:(_a={},_a["$feature_interaction/"+flag]=!0,_a)})}(flag,posthog),clickTrackedRef.current=!0)}),[flag,posthog,trackInteraction]);return(0,react.useEffect)((function(){if(null!==ref.current&&trackView){var observer=new IntersectionObserver((function(_a){return function(entry){!visibilityTrackedRef.current&&entry.isIntersecting&&(function captureFeatureView(flag,posthog){posthog.capture("$feature_view",{feature_flag:flag})}(flag,posthog),visibilityTrackedRef.current=!0)}(_a[0])}),__assign({threshold:.1},options));return observer.observe(ref.current),function(){return observer.disconnect()}}}),[flag,options,posthog,ref,trackView]),react.createElement("div",__assign({ref},props,{onClick:cachedOnClick}),children)}var billingLogic=__webpack_require__("./frontend/src/scenes/billing/billingLogic.ts"),Dashboard=__webpack_require__("./frontend/src/scenes/dashboard/Dashboard.tsx"),dashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),EmptyDashboardComponent=__webpack_require__("./frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx"),FeatureFlagSnippets=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagSnippets.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),JSONEditorInput=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/feature-flags/JSONEditorInput.scss"),JSONEditorInput_default=__webpack_require__.n(JSONEditorInput),options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(JSONEditorInput_default(),options);JSONEditorInput_default().locals;var CodeEditors=__webpack_require__("./frontend/src/lib/components/CodeEditors.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function JSONEditorInput_JSONEditorInput(_ref){let{onChange,placeholder,lineHeight=20,defaultNumberOfLines=1,value="",readOnly=!1}=_ref;const valString=value?.toString()||"",_lineHeight=lineHeight,defaultLines=Math.max(defaultNumberOfLines,valString.split(/\r\n|\r|\n/).length)+1,defaultHeight=_lineHeight*defaultLines,[height,setHeight]=(0,react.useState)(defaultHeight),[focused,setFocused]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"JsonEditorInput",onFocus:()=>setFocused(!0),onBlur:()=>setFocused(!1),children:[(0,jsx_runtime.jsx)(CodeEditors.p,{className:"border",language:"json",height,value:value?.toString(),options:{readOnly,lineHeight:_lineHeight,minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1},padding:{bottom:0,top:10},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,glyphMargin:!0,folding:!1,lineNumbers:"off",lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",cursorStyle:"block-outline",scrollBeyondLastLine:!1,quickSuggestions:!1,contextmenu:!1},onChange:val=>{(val=>{if(val){const lineCount=val.split(/\r\n|\r|\n/).length,newLineCount=Math.max(lineCount,defaultNumberOfLines)+1;setHeight(_lineHeight*newLineCount)}else setHeight(_lineHeight*(defaultNumberOfLines+1))})(val),onChange?.(val)}}),!focused&&!value?.toString()&&placeholder&&(0,jsx_runtime.jsx)("div",{className:"placeholder",children:(0,jsx_runtime.jsx)("div",{className:"placeholderLabelContainer",children:placeholder})})]})}var insights_utils=__webpack_require__("./frontend/src/scenes/insights/utils.tsx"),NotebookSelectButton=__webpack_require__("./frontend/src/scenes/notebooks/NotebookSelectButton/NotebookSelectButton.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),TitleWithIcon=__webpack_require__("./frontend/src/lib/components/TitleWithIcon.tsx"),LemonSelectMultiple=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSelectMultiple/LemonSelectMultiple.tsx"),types=__webpack_require__("./frontend/src/types.ts"),permissionsLogic=__webpack_require__("./frontend/src/scenes/settings/organization/Permissions/permissionsLogic.tsx"),rolesLogic=__webpack_require__("./frontend/src/scenes/settings/organization/Permissions/Roles/rolesLogic.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts");function roleLemonSelectOptions(roles){return roles.map((role=>({key:role.id,label:`${role.name}`,labelComponent:(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsx)("b",{children:`${role.name}`})})})))}function ResourcePermission(_ref2){let{rolesToAdd,addableRoles,onChange,addableRolesLoading,onAdd,roles,deleteAssociatedRole,resourceType,canEdit}=_ref2;const{allPermissions,shouldShowPermissionsTable}=(0,index_esm.useValues)(permissionsLogic.f),{roles:possibleRolesWithAccess}=(0,index_esm.useValues)(rolesLogic.V),resourceLevel=allPermissions.find((permission=>permission.resource===resourceType)),rolesWithAccess=possibleRolesWithAccess.filter((role=>role.feature_flags_access_level===types.uv.WRITE)),columns=[{title:"Role",dataIndex:"name",key:"name",render:function RenderRoleName(_,role){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Organization default"===role.name?(0,jsx_runtime.jsx)(TitleWithIcon.H,{icon:(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(icons.iCC,{}),to:`${urls.j.settings("organization")}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,tooltip:"Organization-wide permissions for roles can be managed in the organization settings.",className:"ml-1"}),children:"All users by default"}):role.name})}},{title:"Access",dataIndex:"feature_flags_access_level",key:"feature_flags_access_level",render:function RenderAccessLevel(_,role){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-row justify-between",children:[role.feature_flags_access_level===types.uv.WRITE?"Edit":"View",role.deletable&&(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(icons.Fzz,{}),onClick:()=>deleteAssociatedRole(role.id),tooltip:"Remove custom role from feature flag",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}}],tableData=[{id:"",name:"Organization default",feature_flags_access_level:resourceLevel?resourceLevel.access_level:types.uv.WRITE,created_by:null,created_at:""},...rolesWithAccess,...roles.map((role=>({...role,feature_flags_access_level:types.uv.WRITE,deletable:!0})))];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!shouldShowPermissionsTable&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[resourceLevel&&(0,jsx_runtime.jsx)(OrganizationResourcePermissionLabel,{resourceLevel}),(0,jsx_runtime.jsx)(OrganizationResourcePermissionRoles,{roles:rolesWithAccess})]}),shouldShowPermissionsTable&&(0,jsx_runtime.jsx)(src.LemonTable,{dataSource:tableData,columns,className:"mt-4"}),!shouldShowPermissionsTable&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h5",{className:"mt-4",children:"Roles"}),roles.length>0?(0,jsx_runtime.jsx)("div",{className:"pb-2 rounded overflow-y-auto max-h-80",children:roles.map((role=>(0,jsx_runtime.jsx)(RoleRow,{role,deleteRole:roleId=>deleteAssociatedRole(roleId)},role.id)))}):(0,jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"No roles added yet"})]}),canEdit&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h5",{className:"mt-4",children:"Custom edit roles"}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1",children:(0,jsx_runtime.jsx)(LemonSelectMultiple.E,{placeholder:"Search for roles to add…",loading:addableRolesLoading,onChange,value:rolesToAdd,filterOption:!0,mode:"multiple","data-attr":"resource-permissioning-select",options:roleLemonSelectOptions(addableRoles)})}),(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",loading:!1,disabled:0===rolesToAdd.length,onClick:onAdd,children:"Add"})]})]})]})}function OrganizationResourcePermissionLabel(_ref3){let{resourceLevel}=_ref3;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(TitleWithIcon.H,{icon:(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(icons.iCC,{}),to:`${urls.j.settings("organization")}?tab=role_based_access`,status:"stealth",targetBlank:!0,size:"small",noPadding:!0,className:"ml-1"}),children:(0,jsx_runtime.jsx)("h5",{children:"Organization default"})}),(0,jsx_runtime.jsx)("b",{children:permissionsLogic.O[resourceLevel.access_level]})]})}function OrganizationResourcePermissionRoles(_ref4){let{roles}=_ref4;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h5",{className:"mt-4",children:"Roles with edit access"}),(0,jsx_runtime.jsx)("div",{className:"flex",children:roles.map((role=>(0,jsx_runtime.jsxs)("span",{className:"simple-tag tag-light-blue text-primary-alt mr-2",children:[(0,jsx_runtime.jsx)("b",{children:role.name})," "]},role.id)))})]})}function RoleRow(_ref5){let{role,deleteRole}=_ref5;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between h-8",children:[(0,jsx_runtime.jsx)("b",{children:role.name}),deleteRole&&(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(icons.Fzz,{}),onClick:()=>deleteRole(role.id),tooltip:"Remove role from permission",tooltipPlacement:"bottomLeft",status:"primary-alt",type:"tertiary",size:"small"})]})}var userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),tagsModel=__webpack_require__("./frontend/src/models/tagsModel.ts"),DataTable_utils=__webpack_require__("./frontend/src/queries/nodes/DataTable/utils.ts"),Query=__webpack_require__("./frontend/src/queries/Query/Query.tsx"),schema=__webpack_require__("./frontend/src/queries/schema.ts"),dashboardsLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),DashboardsTable=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx"),DashboardTemplateChooser=__webpack_require__("./frontend/src/scenes/dashboard/DashboardTemplateChooser.tsx"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),NewDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),dashboardsModel=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),feature_flags_featureFlagLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagLogic.ts");function AnalysisTab(_ref){let{featureFlag}=_ref;return(0,jsx_runtime.jsx)("div",{className:"NewDashboardModal",children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:newDashboardLogic.Z,props:{featureFlagId:featureFlag.id},children:featureFlag.analytics_dashboards&&featureFlag.analytics_dashboards.length>0?(0,jsx_runtime.jsx)(FeatureFlagDashboardsTableContainer,{}):featureFlag.id&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DashboardTemplateChooser.g,{scope:"feature_flag"}),(0,jsx_runtime.jsx)(NewDashboardModal.O,{})]})})})}function FeatureFlagDashboardsTableContainer(){const{filteredDashboards}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),{showNewDashboardModal}=(0,index_esm.useActions)(newDashboardLogic.Z),{dashboardsLoading}=(0,index_esm.useValues)(dashboardsModel.h),{filters}=(0,index_esm.useValues)(dashboardsLogic.dJ);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DashboardsTable.q,{extraActions:(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",onClick:()=>{showNewDashboardModal()},children:"New dashboard"})}),hideActions:!0,dashboards:filteredDashboards,dashboardsLoading,filters}),(0,jsx_runtime.jsx)(NewDashboardModal.O,{})]})}var TaxonomicFilter_types=__webpack_require__("./frontend/src/lib/components/TaxonomicFilter/types.ts"),ActionFilter=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),ActionFilterRow=__webpack_require__("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function FeatureFlagAutoRollback(_ref){let{readOnly}=_ref;const{featureFlag,sentryIntegrationEnabled,sentryErrorCount,insightRollingAverages}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),{addRollbackCondition,removeRollbackCondition,loadInsightAtIndex}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.h),{user}=(0,index_esm.useValues)(userLogic.userLogic);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsx)("b",{children:"Auto rollback"}),(0,jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"}),!readOnly&&(0,jsx_runtime.jsx)("div",{className:"mt-2",children:"Specify the conditions in which this feature flag will automatically roll back."})]}),readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map(((rollback_condition,index)=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),"insight"===rollback_condition.threshold_type&&rollback_condition.threshold_metric?.events?.[0]?.name?(0,jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4 bg-bg-light",children:[(0,jsx_runtime.jsx)("b",{children:`${(0,utils.fm)(rollback_condition.threshold_type)} based rollback`}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[insightRollingAverages[index]&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"  trailing average is ",insightRollingAverages[index],"."]})," Trigger when trailing average of  ",(0,jsx_runtime.jsx)("b",{children:rollback_condition.threshold_metric.events[0].name}),"  is ",rollback_condition.operator&&utils.mG[rollback_condition.operator]," ",rollback_condition.threshold]})]}):(0,jsx_runtime.jsxs)("div",{className:"mb-4 border rounded p-4 bg-bg-light",children:[(0,jsx_runtime.jsx)("b",{children:`${(0,utils.fm)(rollback_condition.threshold_type)} based rollback`}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Trigger when there is a ",(0,jsx_runtime.jsxs)("b",{children:[rollback_condition.threshold,"%"]})," increase in errors"]})]})]}))),!readOnly&&featureFlag.rollback_conditions&&featureFlag.rollback_conditions.map(((_,index)=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("div",{className:"condition-set-separator",children:"OR"}),(0,jsx_runtime.jsx)("div",{className:"mb-4 border rounded p-4 bg-bg-light",children:(0,jsx_runtime.jsxs)(lib.Group,{name:["rollback_conditions",index],children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex",children:[(0,jsx_runtime.jsx)("div",{className:"mt-3 mr-3",children:(0,jsx_runtime.jsx)("b",{children:"Rollback Condition Type"})}),(0,jsx_runtime.jsx)(Field.g,{name:"threshold_type",children:_ref2=>{let{value,onChange}=_ref2;return(0,jsx_runtime.jsx)(src.LemonSelect,{value,onChange,options:[{value:types.SR.Sentry,label:"Error Based"},{value:types.SR.Insight,label:"Metric Based"}]})}})]}),(0,jsx_runtime.jsx)(src.LemonButton,{icon:(0,jsx_runtime.jsx)(icons.Fzz,{}),status:"muted",noPadding:!0,onClick:()=>{removeRollbackCondition(index)}})]}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:"my-3"}),"insight"==featureFlag.rollback_conditions[index].threshold_type?(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center mt-4",children:[(0,jsx_runtime.jsx)(Field.g,{name:"threshold_metric",children:_ref3=>{let{value,onChange}=_ref3;return(0,jsx_runtime.jsx)(ActionFilter.T,{filters:value,setFilters:payload=>{onChange({...payload}),loadInsightAtIndex(index,payload)},typeKey:"feature-flag-rollback-trends-"+index,buttonCopy:"Add graph series",showSeriesIndicator:!1,showNestedArrow:!0,hideRename:!0,entitiesLimit:1,mathAvailability:ActionFilterRow.Qq.None,propertiesTaxonomicGroupTypes:[TaxonomicFilter_types.t.EventProperties,TaxonomicFilter_types.t.PersonProperties,TaxonomicFilter_types.t.EventFeatureFlags,TaxonomicFilter_types.t.Cohorts,TaxonomicFilter_types.t.Elements]})}}),(0,jsx_runtime.jsxs)("span",{children:["trailing 7 day average is ",void 0!==insightRollingAverages[index]?(0,jsx_runtime.jsx)("b",{children:insightRollingAverages[index]}):(0,jsx_runtime.jsx)(Spinner.$,{}),". Trigger when trailing average is"]}),(0,jsx_runtime.jsx)(Field.g,{name:"operator",children:_ref4=>{let{value,onChange}=_ref4;return(0,jsx_runtime.jsx)(src.LemonSelect,{value,onChange,options:[{label:"greater than",value:"gt"},{label:"less than",value:"lt"}]})}}),(0,jsx_runtime.jsx)(Field.g,{name:"threshold",children:(0,jsx_runtime.jsx)(src.LemonInput,{min:0,type:"number"})})]}):sentryIntegrationEnabled?(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[sentryErrorCount?(0,jsx_runtime.jsxs)("span",{children:[(0,jsx_runtime.jsxs)("b",{children:[(0,utils.Lc)(sentryErrorCount)," "]})," Sentry errors in the past 24 hours."," "]}):(0,jsx_runtime.jsx)(Spinner.$,{}),(0,jsx_runtime.jsx)("span",{children:" Trigger when there is a"}),(0,jsx_runtime.jsx)(Field.g,{name:"threshold",className:"ml-3 mr-3",children:_ref5=>{let{value,onChange}=_ref5;return(0,jsx_runtime.jsx)(src.LemonInput,{value,suffix:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"%"}),type:"number",min:0,onChange})}}),(0,jsx_runtime.jsx)(Field.g,{name:"operator",className:"mr-3",children:_ref6=>{let{value,onChange}=_ref6;return(0,jsx_runtime.jsx)(src.LemonSelect,{options:[{label:"increase",value:"gt"},{label:"decrease",value:"lt"}],value,onChange})}}),(0,jsx_runtime.jsxs)("span",{children:["to"," ",sentryErrorCount?(0,jsx_runtime.jsx)("b",{children:(0,utils.Lc)(Math.round(sentryErrorCount*(1+(featureFlag.rollback_conditions[index].threshold||0)/100)))}):(0,jsx_runtime.jsx)(Spinner.$,{})," ","errors."]}),(0,jsx_runtime.jsx)("div",{})]})}):user?.is_staff?(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("b",{children:"This feature requires an active Sentry integration."}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(src.Link,{to:urls.j.instanceSettings(),children:"Go to Instance Settings"})," and update the"," ",(0,jsx_runtime.jsx)("code",{children:'"SENTRY_"'})," properties from your Sentry account to enable."]}):(0,jsx_runtime.jsx)("p",{className:"text-muted",children:"This PostHog instance is not configured for Sentry. Please contact the instance owner to configure it."})]})})]}))),!readOnly&&(0,jsx_runtime.jsx)(src.LemonButton,{type:"secondary",onClick:()=>{addRollbackCondition()},children:"Add condition"})]})}var FeatureFlagCodeExample=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagCodeExample.tsx"),featureFlagPermissionsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagPermissionsLogic.tsx"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),teamLogic=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),groupsModel=__webpack_require__("./frontend/src/models/groupsModel.ts"),organizationLogic=__webpack_require__("./frontend/src/scenes/organizationLogic.tsx"),FeatureFlags=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlags.tsx");const getColumns=()=>{const{currentTeamId}=(0,index_esm.useValues)(teamLogic.teamLogic),{currentOrganization}=(0,index_esm.useValues)(organizationLogic.p),{updateCurrentTeam}=(0,index_esm.useActions)(userLogic.userLogic),{aggregationLabel}=(0,index_esm.useValues)(groupsModel.$);return[{title:"Project",dataIndex:"team_id",width:"45%",render:(dataValue,record)=>{const team=currentOrganization?.teams?.find((t=>t.id===Number(dataValue)));if(!team)return"(project does not exist)";const isCurrentTeam=team.id===currentTeamId,linkText=isCurrentTeam?`${team.name} (current)`:team.name;return isCurrentTeam?(0,jsx_runtime.jsx)("span",{className:"font-semibold",children:linkText}):(0,jsx_runtime.jsx)(src.Link,{className:"row-name",onClick:()=>{updateCurrentTeam(team.id,`/feature_flags/${record.flag_id}`)},children:linkText})}},(0,columnUtils.JB)(),(0,columnUtils.rw)(),{title:"Release conditions",width:200,render:function Render(_,record){const releaseText=(0,FeatureFlags.groupFilters)(record.filters,void 0,aggregationLabel);return"string"==typeof releaseText&&releaseText.startsWith("100% of")?(0,jsx_runtime.jsx)(src.LemonTag,{type:"highlight",children:releaseText}):releaseText}},{title:"Status",dataIndex:"active",render:dataValue=>dataValue?(0,jsx_runtime.jsx)(src.LemonTag,{type:"success",className:"uppercase",children:"Enabled"}):(0,jsx_runtime.jsx)(src.LemonTag,{type:"default",className:"uppercase",children:"Disabled"})}]};function InfoBanner(){var _currentOrganization$;const{currentOrganization}=(0,index_esm.useValues)(organizationLogic.p),{featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),hasMultipleProjects=(null!==(_currentOrganization$=currentOrganization?.teams?.length)&&void 0!==_currentOrganization$?_currentOrganization$:0)>1;let text;if((!currentOrganization?.membership_level||currentOrganization.membership_level<constants.Dk.Admin)&&!hasMultipleProjects)text="You currently have access to only one project. If your organization manages multiple projects and you wish to copy this feature flag across them, request project access from your administrator.";else if(hasMultipleProjects){if(featureFlag.can_edit)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{});text="You don't have the necessary permissions to copy this flag to another project. Contact your administrator to request editing rights."}else text="This feature enables the copying of a feature flag across different projects. Once additional projects are added within your organization, you'll be able to replicate this flag to them.";return(0,jsx_runtime.jsx)(src.LemonBanner,{type:"info",className:"mb-4",children:text})}function FeatureFlagCopySection(){var _currentOrganization$2;const{featureFlag,copyDestinationProject,projectsWithCurrentFlag,featureFlagCopyLoading}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),{setCopyDestinationProject,copyFlag}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.h),{currentOrganization}=(0,index_esm.useValues)(organizationLogic.p),{currentTeam}=(0,index_esm.useValues)(teamLogic.teamLogic),hasStaticCohort=function checkHasStaticCohort(featureFlag){const{cohorts}=(0,index_esm.useValues)(cohortsModel.Q),staticCohorts=new Set;cohorts.forEach((cohort=>{cohort.is_static&&staticCohorts.add(cohort.id)}));for(const group of featureFlag.filters.groups)for(const prop of group.properties||[])if("cohort"===prop.type&&staticCohorts.has(prop.value))return!0;return!1}(featureFlag);return(null!==(_currentOrganization$2=currentOrganization?.teams?.length)&&void 0!==_currentOrganization$2?_currentOrganization$2:0)>1&&featureFlag.can_edit?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Feature flag copy"}),(0,jsx_runtime.jsx)("div",{className:"ant-row",children:"Copy your flag and its configuration to another project."}),hasStaticCohort&&(0,jsx_runtime.jsx)(src.LemonBanner,{type:"info",className:"mt-4",children:"The flag you are about to copy references a static cohort. If the cohort with identical name does not exist in the target project, it will be copied as an empty cohort. This is because the associated persons might not exist in the target project."}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex gap-4 my-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6",children:"Key"}),(0,jsx_runtime.jsx)("div",{className:"border px-3 rounded h-10 text-center flex items-center justify-center max-w-200",children:(0,jsx_runtime.jsx)("span",{className:"font-semibold truncate",children:featureFlag.key})})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"h-6"}),(0,jsx_runtime.jsx)(icons.Ec8,{className:"h-10",fontSize:"30"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6",children:"Destination project"}),(0,jsx_runtime.jsx)(src.LemonSelect,{dropdownMatchSelectWidth:!1,value:copyDestinationProject,onChange:id=>setCopyDestinationProject(id),options:currentOrganization?.teams?.map((team=>({value:team.id,label:team.name}))).filter((option=>option.value!==currentTeam?.id))||[],className:"min-w-40"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"h-6"}),(0,jsx_runtime.jsx)(src.LemonButton,{disabledReason:!copyDestinationProject&&"Select destination project",loading:featureFlagCopyLoading,type:"primary",icon:(0,jsx_runtime.jsx)(icons.JKM,{}),onClick:()=>copyFlag(),className:"w-28 max-w-28",children:projectsWithCurrentFlag.find((p=>Number(p.team_id)===copyDestinationProject))?"Update":"Copy"})]})]})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}function FeatureFlagProjects(){const{projectsWithCurrentFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),{loadProjectsWithCurrentFlag}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.h);return(0,react.useEffect)((()=>{loadProjectsWithCurrentFlag()}),[]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(InfoBanner,{}),(0,jsx_runtime.jsx)(FeatureFlagCopySection,{}),(0,jsx_runtime.jsx)(LemonTable.g,{loading:!1,dataSource:projectsWithCurrentFlag,columns:getColumns(),emptyState:"This feature flag is not being used in any other project."})]})}var FeatureFlagReleaseConditions=__webpack_require__("./frontend/src/scenes/feature-flags/FeatureFlagReleaseConditions.tsx"),DatePicker=__webpack_require__("./frontend/src/lib/components/DatePicker.tsx");const logic=(0,feature_flags_featureFlagLogic.h)({id:"schedule"}),DAYJS_FORMAT="MMMM DD, YYYY h:mm A",columns=[(0,columnUtils.JB)(),(0,columnUtils.rw)()];function FeatureFlagSchedule(){const{featureFlag,scheduledChanges,scheduleChangeType,scheduleDateMarker}=(0,index_esm.useValues)(logic),{setFeatureFlag,loadScheduledChanges,setScheduleDateMarker,setScheduleChangeType}=(0,index_esm.useActions)(logic);return(0,react.useEffect)((()=>{loadScheduledChanges()}),[]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Add a scheduled change"}),(0,jsx_runtime.jsx)("div",{className:"mb-6",children:"Automatically change flag properties at a future point in time."}),(0,jsx_runtime.jsxs)("div",{className:"inline-flex gap-10 mb-8",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6 mb-1",children:"Change type"}),(0,jsx_runtime.jsx)(src.LemonSelect,{className:"w-50",placeholder:"Select variant",value:scheduleChangeType,onChange:value=>setScheduleChangeType(value),options:[{label:"Add a condition",value:"add_condition"},{label:"Change status",value:"change_status"}]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold leading-6 h-6 mb-1",children:"Date and time"}),(0,jsx_runtime.jsx)(DatePicker.M,{value:scheduleDateMarker,onChange:value=>setScheduleDateMarker(value),className:"h-10 w-60",allowClear:!1,showTime:!0,showSecond:!1,format:DAYJS_FORMAT})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:["add_condition"===scheduleChangeType&&(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{usageContext:"schedule"}),"change_status"===scheduleChangeType&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("div",{className:"border rounded p-4",children:(0,jsx_runtime.jsx)(src.LemonCheckbox,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:value=>{featureFlag.active=value,setFeatureFlag(featureFlag)},checked:featureFlag.active})})}),(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-end",children:(0,jsx_runtime.jsx)(src.LemonButton,{type:"primary",children:"Schedule"})}),(0,jsx_runtime.jsx)(src.LemonDivider,{className:""})]}),(0,jsx_runtime.jsx)(src.LemonTable,{className:"mt-8",loading:!1,dataSource:scheduledChanges,columns,emptyState:"You do not have any scheduled changes"})]})}var featureFlagsLogic=__webpack_require__("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),CompactList=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),RecentInsights=__webpack_require__("./frontend/src/scenes/project-homepage/RecentInsights.tsx");function RecentFeatureFlagInsights(){const{relatedInsights,relatedInsightsLoading,featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h);return(0,jsx_runtime.jsx)(CompactList.a,{title:"Insights that use this feature flag",loading:relatedInsightsLoading,emptyMessage:{title:"You have no insights that use this feature flag",description:"Explore this feature flag's insights by creating one below.",buttonText:"Create insight",buttonTo:urls.j.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${featureFlag.key}`})},items:relatedInsights.slice(0,5),renderRow:(insight,index)=>(0,jsx_runtime.jsx)(RecentInsights.z,{insight},index)})}const scene={component:FeatureFlag_FeatureFlag,logic:feature_flags_featureFlagLogic.h,paramsToProps:_ref=>{let{params:{id}}=_ref;return{id:id&&"new"!==id?parseInt(id):"new"}}};function focusVariantKeyField(index){setTimeout((()=>document.querySelector(`.VariantFormList input[data-key-index="${index}"]`)?.focus()),50)}function FeatureFlag_FeatureFlag(){let{id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{props,featureFlag,featureFlagLoading,featureFlagMissing,isEditingFlag,recordingFilterForFlag,newCohortLoading}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),{featureFlags}=(0,index_esm.useValues)(featureFlagLogic.h),{deleteFeatureFlag,editFeatureFlag,loadFeatureFlag,triggerFeatureFlagUpdate,createStaticCohort}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.h),{addableRoles,unfilteredAddableRolesLoading,rolesToAdd,derivedRoles}=(0,index_esm.useValues)((0,featureFlagPermissionsLogic.M)({flagId:featureFlag.id})),{setRolesToAdd,addAssociatedRoles,deleteAssociatedRole}=(0,index_esm.useActions)((0,featureFlagPermissionsLogic.M)({flagId:featureFlag.id})),{tags}=(0,index_esm.useValues)(tagsModel.x),{hasAvailableFeature}=(0,index_esm.useValues)(userLogic.userLogic),[hasKeyChanged,setHasKeyChanged]=(0,react.useState)(!1),[activeTab,setActiveTab]=(0,react.useState)(featureFlagsLogic.i.OVERVIEW),[advancedSettingsExpanded,setAdvancedSettingsExpanded]=(0,react.useState)(!1),isNewFeatureFlag="new"===id||void 0===id;if(featureFlagMissing)return(0,jsx_runtime.jsx)(NotFound.T,{object:"feature flag"});if(featureFlagLoading)return(0,jsx_runtime.jsx)(Spinner.t,{sceneLevel:!0});const tabs=[{label:"Overview",key:featureFlagsLogic.i.OVERVIEW,content:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex space-x-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-7",children:[(0,jsx_runtime.jsx)(FeatureFlagRollout,{readOnly:!0}),featureFlag.filters.super_groups&&(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{readOnly:!0,isSuper:!0}),(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{readOnly:!0}),featureFlags[constants.y8.AUTO_ROLLBACK_FEATURE_FLAGS]&&(0,jsx_runtime.jsx)(FeatureFlagAutoRollback,{readOnly:!0})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-6",children:[(0,jsx_runtime.jsx)(RecentFeatureFlagInsights,{}),(0,jsx_runtime.jsx)("div",{className:"my-4"})]})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"mb-4"}),(0,jsx_runtime.jsx)(FeatureFlagCodeExample.H,{featureFlag})]})}];return featureFlag.key&&id&&tabs.push({label:"Usage",key:featureFlagsLogic.i.USAGE,content:(0,jsx_runtime.jsx)(UsageTab,{id,featureFlag})}),featureFlags[constants.y8.MULTI_PROJECT_FEATURE_FLAGS]&&tabs.push({label:"Projects",key:featureFlagsLogic.i.PROJECTS,content:(0,jsx_runtime.jsx)(FeatureFlagProjects,{})}),featureFlags[constants.y8.FF_DASHBOARD_TEMPLATES]&&featureFlag.key&&id&&tabs.push({label:(0,jsx_runtime.jsxs)("div",{className:"flex flex-row",children:[(0,jsx_runtime.jsx)("div",{children:"Analysis"}),(0,jsx_runtime.jsxs)(LemonTag.o,{className:"ml-1 float-right uppercase",type:"warning",children:[" ","Beta"]})]}),key:featureFlagsLogic.i.Analysis,content:(0,jsx_runtime.jsx)(PostHogFeature,{flag:constants.y8.FF_DASHBOARD_TEMPLATES,match:!0,children:(0,jsx_runtime.jsx)(AnalysisTab,{id,featureFlag})})}),featureFlag.id&&tabs.push({label:"History",key:featureFlagsLogic.i.HISTORY,content:(0,jsx_runtime.jsx)(ActivityLog.D,{scope:humanizeActivity.jc.FEATURE_FLAG,id:featureFlag.id})}),featureFlags[constants.y8.ROLE_BASED_ACCESS]&&featureFlag.can_edit&&tabs.push({label:"Permissions",key:featureFlagsLogic.i.PERMISSIONS,content:(0,jsx_runtime.jsx)(PayGateMini.E,{feature:types.P$.ROLE_BASED_ACCESS,children:(0,jsx_runtime.jsx)(ResourcePermission,{resourceType:types._z.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd,addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})}),featureFlags[constants.y8.SCHEDULED_CHANGES_FEATURE_FLAGS]&&tabs.push({label:"Schedule",key:featureFlagsLogic.i.SCHEDULE,content:(0,jsx_runtime.jsx)(FeatureFlagSchedule,{})}),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("div",{className:"feature-flag",children:isNewFeatureFlag||isEditingFlag?(0,jsx_runtime.jsxs)(lib.Form,{id:"feature-flag",logic:feature_flags_featureFlagLogic.h,props,formKey:"featureFlag",enableFormOnSubmit:!0,className:"space-y-4",children:[(0,jsx_runtime.jsx)(PageHeader.m,{title:isNewFeatureFlag?"New feature flag":featureFlag.key||"Untitled",buttons:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.j.featureFlags())},disabled:featureFlagLoading,children:"Cancel"}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",form:"feature-flag",loading:featureFlagLoading,children:"Save"})]})}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-2 non-3000"}),featureFlag.experiment_set&&featureFlag.experiment_set?.length>0&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"warning",children:["This feature flag is linked to an experiment. Edit settings here only for advanced functionality. If unsure, go back to"," ",(0,jsx_runtime.jsx)(Link.r,{to:urls.j.experiment(featureFlag.experiment_set[0]),children:"the experiment creation screen."})]}),(0,jsx_runtime.jsx)("div",{className:"mt-4 mb-8",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-1/2 space-y-4",children:[(0,jsx_runtime.jsx)(Field.g,{name:"key",label:"Key",help:hasKeyChanged&&"new"!==id?(0,jsx_runtime.jsxs)("span",{className:"text-warning",children:[(0,jsx_runtime.jsx)("b",{children:"Warning! "}),"Changing this key will",(0,jsx_runtime.jsxs)(Link.r,{to:`https://posthog.com/docs/features/feature-flags${FeatureFlagSnippets.X_}#feature-flag-persistence`,target:"_blank",targetBlankIcon:!0,children:[" ","affect the persistence of your flag"]})]}):void 0,children:_ref2=>{let{value,onChange}=_ref2;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonInput.D,{value,onChange:v=>{v!==value&&setHasKeyChanged(!0),onChange(v)},"data-attr":"feature-flag-key",className:"ph-ignore-input",autoFocus:!0,placeholder:"examples: new-landing-page, betaFeature, ab_test_1",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1}),(0,jsx_runtime.jsx)("span",{className:"text-muted text-sm",children:"Feature flag keys must be unique"})]})}}),(0,jsx_runtime.jsx)(Field.g,{name:"name",label:"Description",children:(0,jsx_runtime.jsx)(LemonTextArea._,{className:"ph-ignore-input","data-attr":"feature-flag-description",defaultValue:featureFlag.name||""})}),hasAvailableFeature(types.P$.TAGGING)&&(0,jsx_runtime.jsx)(Field.g,{name:"tags",label:"Tags",children:_ref3=>{let{value,onChange}=_ref3;return(0,jsx_runtime.jsx)(ObjectTags.D,{tags:value,onChange:(_,tags)=>onChange(tags),saving:featureFlagLoading,tagsAvailable:tags.filter((tag=>!featureFlag.tags?.includes(tag))),className:"mt-2"})}}),(0,jsx_runtime.jsx)(Field.g,{name:"active",children:_ref4=>{let{value,onChange}=_ref4;return(0,jsx_runtime.jsx)("div",{className:"border rounded p-4",children:(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"flag-enabled-checkbox",label:"Enable feature flag",onChange:()=>onChange(!value),checked:value})})}}),(0,jsx_runtime.jsx)(Field.g,{name:"ensure_experience_continuity",children:_ref5=>{let{value,onChange}=_ref5;return(0,jsx_runtime.jsxs)("div",{className:"border rounded p-4",children:[(0,jsx_runtime.jsx)(LemonCheckbox.H,{id:"continuity-checkbox",label:"Persist flag across authentication steps",onChange:()=>onChange(!value),fullWidth:!0,checked:value}),(0,jsx_runtime.jsxs)("div",{className:"text-muted text-sm pl-7",children:["If your feature flag is applied prior to an identify or authentication event, use this to ensure that feature flags are not reset after a person is identified. This ensures the experience for the anonymous person is carried forward to the authenticated person."," ",(0,jsx_runtime.jsx)(Link.r,{to:"https://posthog.com/manual/feature-flags#persisting-feature-flags-across-authentication-steps",target:"_blank",children:"Learn more"})]})]})}})]})}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(FeatureFlagRollout,{}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(FeatureFlagReleaseConditions.I,{}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(FeatureFlagCodeExample.H,{featureFlag}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),isNewFeatureFlag&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(LemonButton.J,{fullWidth:!0,status:"stealth",onClick:()=>setAdvancedSettingsExpanded(!advancedSettingsExpanded),sideIcon:advancedSettingsExpanded?(0,jsx_runtime.jsx)(icons.GZ,{}):(0,jsx_runtime.jsx)(icons.So7,{}),children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"l4 mt-2",children:"Advanced settings"}),(0,jsx_runtime.jsx)("div",{className:"text-muted mb-2 font-medium",children:"Define who can modify this flag."})]})})}),advancedSettingsExpanded&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[featureFlags[constants.y8.AUTO_ROLLBACK_FEATURE_FLAGS]&&(0,jsx_runtime.jsx)(FeatureFlagAutoRollback,{}),featureFlags[constants.y8.ROLE_BASED_ACCESS]&&(0,jsx_runtime.jsx)(card.Z,{title:"Permissions",className:"mb-4",children:(0,jsx_runtime.jsx)(PayGateMini.E,{feature:types.P$.ROLE_BASED_ACCESS,children:(0,jsx_runtime.jsx)(ResourcePermission,{resourceType:types._z.FEATURE_FLAGS,onChange:roleIds=>setRolesToAdd(roleIds),rolesToAdd,addableRoles,addableRolesLoading:unfilteredAddableRolesLoading,onAdd:()=>addAssociatedRoles(),roles:derivedRoles,deleteAssociatedRole:id=>deleteAssociatedRole({roleId:id}),canEdit:featureFlag.can_edit})})})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-feature-flag",type:"secondary",onClick:()=>{isEditingFlag?(editFeatureFlag(!1),loadFeatureFlag()):kea_router_lib.router.actions.push(urls.j.featureFlags())},disabled:featureFlagLoading,children:"Cancel"}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"save-feature-flag",htmlType:"submit",form:"feature-flag",loading:featureFlagLoading,children:"Save"})]})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlagLoading?(0,jsx_runtime.jsx)(skeleton.Z,{active:!0}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PageHeader.m,{notebookProps:{href:urls.j.featureFlag(id)},title:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[featureFlag.key||"Untitled",(0,jsx_runtime.jsx)(CopyToClipboard.D,{explicitValue:featureFlag.key,iconStyle:{color:"var(--muted-alt)"}}),(0,jsx_runtime.jsx)("div",{className:"flex",children:featureFlag.active?(0,jsx_runtime.jsx)(LemonTag.o,{type:"success",className:"uppercase",children:"Enabled"}):(0,jsx_runtime.jsx)(LemonTag.o,{type:"default",className:"uppercase",children:"Disabled"})})]}),caption:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{children:featureFlag.name||(0,jsx_runtime.jsx)("i",{children:"Description (optional)"})}),featureFlag?.tags&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:featureFlag.can_edit?(0,jsx_runtime.jsx)(ObjectTags.D,{tags:featureFlag.tags,onChange:(_,tags)=>{triggerFeatureFlagUpdate({tags})},saving:featureFlagLoading,tagsAvailable:tags.filter((tag=>!featureFlag.tags?.includes(tag))),className:"mt-2"}):featureFlag.tags.length?(0,jsx_runtime.jsx)(ObjectTags.D,{tags:featureFlag.tags,saving:featureFlagLoading,staticOnly:!0,className:"mt-2"}):null})]}),buttons:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(More.T,{loading:newCohortLoading,overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonButton.J,{to:urls.j.replay(types.yd.Recent,recordingFilterForFlag),fullWidth:!0,children:"View Recordings"}),featureFlags[constants.y8.FEATURE_FLAG_COHORT_CREATION]&&(0,jsx_runtime.jsx)(LemonButton.J,{loading:newCohortLoading,onClick:()=>{createStaticCohort()},fullWidth:!0,children:"Create Cohort"}),(0,jsx_runtime.jsx)(LemonDivider.p,{}),(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"delete-feature-flag",status:"danger",fullWidth:!0,onClick:()=>{deleteFeatureFlag(featureFlag)},disabledReason:featureFlagLoading?"Loading...":featureFlag.can_edit?(featureFlag.features?.length||0)>0?"This feature flag is in use with an early access feature. Delete the early access feature to delete this flag":(featureFlag.experiment_set?.length||0)>0?"This feature flag is linked to an experiment. Delete the experiment to delete this flag":null:"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",children:"Delete feature flag"})]})}),(0,jsx_runtime.jsx)(LemonDivider.p,{vertical:!0}),(0,jsx_runtime.jsx)(NotebookSelectButton.R,{resource:{type:types.Cz.FeatureFlag,attrs:{id:featureFlag.id}},type:"secondary"}),(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"edit-feature-flag",type:"secondary",tooltip:featureFlags[constants.y8.ROLE_BASED_ACCESS]&&!featureFlag.can_edit&&"You have only 'View' access for this feature flag. To make changes, please contact the flag's creator.",onClick:()=>{editFeatureFlag(!0)},disabled:featureFlagLoading||!featureFlag.can_edit,children:"Edit"})]})})}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:activeTab,onChange:setActiveTab,tabs})]})})})})}function UsageTab(_ref6){let{featureFlag}=_ref6;const{key:featureFlagKey,usage_dashboard:dashboardId,has_enriched_analytics:hasEnrichedAnalytics}=featureFlag,{generateUsageDashboard,enrichUsageDashboard}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.h),{featureFlagLoading}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),{receivedErrorsFromAPI,dashboard}=(0,index_esm.useValues)((0,dashboardLogic.BM)({id:dashboardId,placement:types.F4.FeatureFlag})),connectedDashboardExists=dashboardId&&!receivedErrorsFromAPI,{closeEnrichAnalyticsNotice}=(0,index_esm.useActions)(featureFlagsLogic.b),{enrichAnalyticsNoticeAcknowledged}=(0,index_esm.useValues)(featureFlagsLogic.b);(0,react.useEffect)((()=>{connectedDashboardExists&&dashboard&&hasEnrichedAnalytics&&void 0===dashboard.tiles?.find((tile=>{var _tile$insight$name$in;return(null!==(_tile$insight$name$in=tile.insight?.name?.indexOf("Feature Viewed"))&&void 0!==_tile$insight$name$in?_tile$insight$name$in:-1)>-1}))&&enrichUsageDashboard()}),[dashboard]);const propertyFilter=[{key:"$feature_flag",type:types.FT.Event,value:featureFlagKey,operator:types.WV.Exact}];return(0,jsx_runtime.jsxs)("div",{children:[connectedDashboardExists?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hasEnrichedAnalytics&&!enrichAnalyticsNoticeAcknowledged&&(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",className:"mb-3",onClose:()=>closeEnrichAnalyticsNotice(),children:["Get richer insights automatically by"," ",(0,jsx_runtime.jsxs)(Link.r,{to:"https://posthog.com/docs/libraries/js#enriched-analytics",target:"_blank",children:["enabling enriched analytics for flags"," "]})]}),(0,jsx_runtime.jsx)(Dashboard.Dashboard,{id:dashboardId.toString(),placement:types.F4.FeatureFlag})]}):(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("b",{children:"Dashboard"}),(0,jsx_runtime.jsx)("div",{className:"text-muted mb-2",children:"There is currently no connected dashboard to this feature flag. If there was previously a connected dashboard, it may have been deleted."}),featureFlagLoading?(0,jsx_runtime.jsx)(EmptyDashboardComponent.l,{loading:!0,canEdit:!1}):(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary",onClick:()=>generateUsageDashboard(),children:"Generate Usage Dashboard"})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-4 mb-4",children:[(0,jsx_runtime.jsx)("b",{children:"Log"}),(0,jsx_runtime.jsx)("div",{className:"text-muted",children:`Feature flag calls for "${featureFlagKey}" will appear here`})]}),(0,jsx_runtime.jsx)(Query.A,{query:{kind:schema.OH.DataTableNode,source:{kind:schema.OH.EventsQuery,select:[...(0,DataTable_utils.Qi)(schema.OH.EventsQuery),featureFlag.filters.multivariate?"properties.$feature_flag_response":"if(toString(properties.$feature_flag_response) IN ['1', 'true'], 'true', 'false') -- Feature Flag Response"],event:"$feature_flag_called",properties:propertyFilter,after:"-30d"},full:!1,showDateRange:!0}})]})}function FeatureFlagRollout(_ref7){let{readOnly}=_ref7;const{multivariateEnabled,variants,areVariantRolloutsValid,featureFlagLoading,variantRolloutSum,nonEmptyVariants,aggregationTargetName,featureFlag}=(0,index_esm.useValues)(feature_flags_featureFlagLogic.h),{distributeVariantsEqually,addVariant,removeVariant,setMultivariateEnabled}=(0,index_esm.useActions)(feature_flags_featureFlagLogic.h),[showVariantDiscardWarning,setShowVariantDiscardWarning]=(0,react.useState)(!1),{hasAvailableFeature}=(0,index_esm.useValues)(userLogic.userLogic),{upgradeLink}=(0,index_esm.useValues)(billingLogic.kr),filterGroups=featureFlag.filters.groups||[];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[readOnly?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,jsx_runtime.jsx)("span",{className:"card-secondary",children:"Type"}),(0,jsx_runtime.jsx)("span",{children:featureFlag.filters.multivariate?"Multiple variants with rollout percentages (A/B/C test)":"Release toggle (boolean)"}),(0,jsx_runtime.jsx)("span",{className:"card-secondary mt-4",children:"Flag persistence"}),(0,jsx_runtime.jsxs)("span",{children:["This flag"," ",(0,jsx_runtime.jsxs)("b",{children:[featureFlag.ensure_experience_continuity?"persists":"does not persist"," "]}),"across authentication events."]})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"}),featureFlag.filters.multivariate&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Variant keys"}),(0,jsx_runtime.jsxs)("div",{className:"border rounded p-4 mb-4 bg-bg-light",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-8 gap-4 font-semibold",children:[(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:"Key"}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:"Description"}),(0,jsx_runtime.jsx)("div",{className:"col-span-3",children:"Payload"}),(0,jsx_runtime.jsx)("div",{children:"Rollout"})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"}),variants.map(((variant,index)=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-8 gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"col-span-2",children:[(0,jsx_runtime.jsx)(Lettermark.B,{name:utils.bH[index],color:Lettermark.w.Gray}),(0,jsx_runtime.jsx)(CopyToClipboard.D,{tooltipMessage:null,description:"key",style:{marginLeft:"0.5rem"},iconStyle:{color:"var(--muted-alt)"},children:variant.key})]}),(0,jsx_runtime.jsx)("div",{className:"col-span-2",children:(0,jsx_runtime.jsx)("span",{className:variant.name?"":"text-muted",children:variant.name||"There is no description for this variant key"})}),(0,jsx_runtime.jsx)("div",{className:"col-span-3",children:featureFlag.filters.payloads?.[index]?(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly:!0,value:featureFlag.filters.payloads[index]}):(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"No payload associated with this variant"})}),(0,jsx_runtime.jsxs)("div",{children:[variant.rollout_percentage,"%"]})]}),index!==variants.length-1&&(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-3"})]},index)))]})]})]}):(0,jsx_runtime.jsxs)("div",{className:"mb-8",children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Served value"}),(0,jsx_runtime.jsx)("div",{className:"mb-2",children:(0,jsx_runtime.jsx)(popconfirm.Z,{placement:"top",title:"Change value type? The variants below will be lost.",disabled:featureFlagLoading,visible:showVariantDiscardWarning,onConfirm:()=>{setMultivariateEnabled(!1),setShowVariantDiscardWarning(!1)},onCancel:()=>setShowVariantDiscardWarning(!1),okText:"OK",cancelText:"Cancel",children:(0,jsx_runtime.jsx)(es_radio.ZP.Group,{options:[{label:"Release toggle (boolean)",value:!1,disabled:!!(featureFlag.experiment_set&&featureFlag.experiment_set?.length>0)},{label:(0,jsx_runtime.jsx)(Tooltip.u,{title:hasAvailableFeature(types.P$.MULTIVARIATE_FLAGS)?"":"This feature is not available on your current plan.",children:(0,jsx_runtime.jsxs)("div",{children:[!hasAvailableFeature(types.P$.MULTIVARIATE_FLAGS)&&(0,jsx_runtime.jsx)(Link.r,{to:upgradeLink,target:"_blank",children:(0,jsx_runtime.jsx)(icons._V1,{style:{marginRight:4,color:"var(--warning)"}})}),"Multiple variants with rollout percentages (A/B test)"]})}),value:!0,disabled:!hasAvailableFeature(types.P$.MULTIVARIATE_FLAGS)}],onChange:e=>{const{value}=e.target;!1===value&&nonEmptyVariants.length?setShowVariantDiscardWarning(!0):(setMultivariateEnabled(value),focusVariantKeyField(0))},value:multivariateEnabled,optionType:"button"})})}),(0,jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:[(0,utils.fm)(aggregationTargetName)," will be served"," ",multivariateEnabled?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("strong",{children:"a variant key"})," according to the below distribution"]}):(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)("code",{children:"true"})})," ","if they match one or more release condition groups."]})]}),!multivariateEnabled&&(0,jsx_runtime.jsxs)("div",{className:"mb-6",children:[(0,jsx_runtime.jsx)("h3",{className:"l3",children:"Payload"}),readOnly?featureFlag.filters.payloads?.true?(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly,value:featureFlag.filters.payloads?.true}):(0,jsx_runtime.jsx)("span",{children:"No payload associated with this flag"}):(0,jsx_runtime.jsxs)("div",{className:"w-1/2",children:[(0,jsx_runtime.jsxs)("div",{className:"text-muted mb-4",children:["Specify a payload to be returned when the served value is"," ",(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)("code",{children:"true"})})]}),(0,jsx_runtime.jsx)(lib.Group,{name:["filters","payloads"],children:(0,jsx_runtime.jsx)(Field.g,{name:"true",children:(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{readOnly,placeholder:'Examples: "A string", 2500, {"key": "value"}'})})})]})]}),!readOnly&&multivariateEnabled&&(0,jsx_runtime.jsxs)("div",{className:"feature-flag-variants",children:[(0,jsx_runtime.jsx)("h3",{className:"l4",children:"Variant keys"}),(0,jsx_runtime.jsx)("span",{children:"The rollout percentage of feature flag variants must add up to 100%"}),(0,jsx_runtime.jsxs)("div",{className:"VariantFormList space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"VariantFormList__row grid label-row gap-2 items-center",children:[(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)("div",{className:"col-span-4",children:"Variant key"}),(0,jsx_runtime.jsx)("div",{className:"col-span-6",children:"Description"}),(0,jsx_runtime.jsx)("div",{className:"col-span-8",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsx)("b",{children:"Payload"}),(0,jsx_runtime.jsx)("span",{className:"text-muted font-normal",children:"Specify return payload when the variant key matches"})]})}),(0,jsx_runtime.jsxs)("div",{className:"col-span-4 flex items-center gap-1",children:[(0,jsx_runtime.jsx)("span",{children:"Rollout"}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"tertiary",onClick:distributeVariantsEqually,children:"(Redistribute)"})]})]}),variants.map(((variant,index)=>(0,jsx_runtime.jsx)(lib.Group,{name:"filters",children:(0,jsx_runtime.jsxs)("div",{className:"VariantFormList__row grid gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:(0,jsx_runtime.jsx)(Lettermark.B,{name:utils.bH[index],color:Lettermark.w.Gray})}),(0,jsx_runtime.jsx)("div",{className:"col-span-4",children:(0,jsx_runtime.jsx)(Field.g,{name:["multivariate","variants",index,"key"],children:(0,jsx_runtime.jsx)(LemonInput.D,{"data-attr":"feature-flag-variant-key","data-key-index":index.toString(),className:"ph-ignore-input",placeholder:`example-variant-${index+1}`,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:!1,disabled:!!(featureFlag.experiment_set&&featureFlag.experiment_set?.length>0)})})}),(0,jsx_runtime.jsx)("div",{className:"col-span-6",children:(0,jsx_runtime.jsx)(Field.g,{name:["multivariate","variants",index,"name"],children:(0,jsx_runtime.jsx)(LemonInput.D,{"data-attr":"feature-flag-variant-name",className:"ph-ignore-input",placeholder:"Description"})})}),(0,jsx_runtime.jsx)("div",{className:"col-span-8",children:(0,jsx_runtime.jsx)(Field.g,{name:["payloads",index],children:_ref8=>{let{value,onChange}=_ref8;return(0,jsx_runtime.jsx)(JSONEditorInput_JSONEditorInput,{onChange,value,placeholder:'{"key": "value"}'})}})}),(0,jsx_runtime.jsx)("div",{className:"col-span-3",children:(0,jsx_runtime.jsx)(Field.g,{name:["multivariate","variants",index,"rollout_percentage"],children:_ref9=>{let{value,onChange}=_ref9;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(LemonInput.D,{type:"number",min:0,max:100,value,onChange:changedValue=>{if(null!=changedValue){const valueInt=parseInt(changedValue.toString());isNaN(valueInt)||onChange(valueInt)}}}),filterGroups.filter((group=>group.variant===variant.key)).length>0&&(0,jsx_runtime.jsxs)("span",{className:"text-muted text-xs",children:["Overridden by"," ",(0,jsx_runtime.jsx)("strong",{children:(phrases=filterGroups.filter((group=>null!=group.variant&&group.variant===variant.key)).map((variant=>"Set "+(filterGroups.findIndex((group=>group===variant))+1))),null===phrases||phrases.length<3?(0,insights_utils.EL)(phrases):`${phrases[0]} and ${phrases.length-1} more sets`)})]})]});var phrases}})}),(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:variants.length>1&&(0,jsx_runtime.jsx)(LemonButton.J,{icon:(0,jsx_runtime.jsx)(icons.Fzz,{}),status:"primary-alt","data-attr":`delete-prop-filter-${index}`,noPadding:!0,onClick:()=>removeVariant(index),disabledReason:featureFlag.experiment_set&&featureFlag.experiment_set?.length>0?"Cannot delete variants from a feature flag that is part of an experiment":void 0,tooltipPlacement:"topRight"})})]})},index))),variants.length>0&&!areVariantRolloutsValid&&(0,jsx_runtime.jsxs)("p",{className:"text-danger",children:["Percentage rollouts for variants must sum to 100 (currently ",variantRolloutSum,")."]}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"secondary",onClick:()=>{const newIndex=variants.length;addVariant(),focusVariantKeyField(newIndex)},icon:(0,jsx_runtime.jsx)(icons.SC9,{}),disabledReason:featureFlag.experiment_set&&featureFlag.experiment_set?.length>0?"Cannot add variants to a feature flag that is part of an experiment. To update variants, create a new experiment.":void 0,tooltipPlacement:"topLeft",center:!0,children:"Add variant"})]})]})]})}},"./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>ProjectHomePageCompactListItem});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"));function ProjectHomePageCompactListItem(_ref){let{to,onClick,title,subtitle,prefix,suffix}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.LemonButton,{fullWidth:!0,to,onClick,className:"h-12",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"flex items-start justify-between overflow-hidden gap-2 flex-1",children:[prefix?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"flex shrink-0 text-muted text-xl",children:prefix}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"truncate space-y-0.5 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"text-link truncate",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"truncate text-muted font-normal text-xs",children:subtitle})]}),suffix?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"shrink-0",children:suffix}):null]})})}},"./frontend/src/scenes/project-homepage/RecentInsights.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>RecentInsights,z:()=>InsightRow});__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomepage.scss");var kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/components/CompactList/CompactList.tsx"),lib_dayjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/lib/dayjs.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/saved-insights/SavedInsights.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/scenes/urls.ts"),_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/scenes/project-homepage/ProjectHomePageCompactListItem.tsx"),_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function InsightRow(_ref){let{insight}=_ref;const{reportInsightOpenedFromRecentInsightList}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_4__.vx);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ProjectHomePageCompactListItem__WEBPACK_IMPORTED_MODULE_8__.x,{title:insight.name||insight.derived_name||"Insight",subtitle:`Last modified ${(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_3__.Bv)(insight.last_modified_at).fromNow()}`,prefix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_saved_insights_SavedInsights__WEBPACK_IMPORTED_MODULE_6__.InsightIcon,{insight}),to:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.insightView(insight.short_id),onClick:()=>{reportInsightOpenedFromRecentInsightList()}})}function RecentInsights(){const{recentInsights,recentInsightsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useValues)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_9__.I),{loadRecentInsights}=(0,kea__WEBPACK_IMPORTED_MODULE_1__.useActions)(_projectHomepageLogic__WEBPACK_IMPORTED_MODULE_9__.I);return(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((()=>{loadRecentInsights()}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(lib_components_CompactList_CompactList__WEBPACK_IMPORTED_MODULE_2__.a,{title:"Your recently viewed insights",viewAllURL:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.savedInsights(),loading:recentInsightsLoading,emptyMessage:{title:"You have no recently viewed insights",description:"Explore this project's insights by clicking below.",buttonText:"View insights",buttonTo:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.savedInsights()},items:recentInsights.slice(0,5),renderRow:(insight,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(InsightRow,{insight},index)})})}},"./frontend/src/scenes/project-homepage/projectHomepageLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>projectHomepageLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/lib/api.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/types.ts");const projectHomepageLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","project-homepage","projectHomepageLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)({values:[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.teamLogic,["currentTeamId","currentTeam"]]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({primaryDashboardId:[()=>[scenes_teamLogic__WEBPACK_IMPORTED_MODULE_3__.teamLogic.selectors.currentTeam],currentTeam=>currentTeam?.primary_dashboard],dashboardLogicProps:[s=>[s.primaryDashboardId],primaryDashboardId=>({id:null!=primaryDashboardId?primaryDashboardId:void 0,placement:_types__WEBPACK_IMPORTED_MODULE_4__.F4.ProjectHomepage})]}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)((_ref=>{let{values}=_ref;return{recentInsights:[[],{loadRecentInsights:async()=>await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.get(`api/projects/${values.currentTeamId}/insights/my_last_viewed?include_query_insights=true`)}],persons:[[],{loadPersons:async()=>(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.persons.list()).results}]}})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)((_ref2=>{let{actions}=_ref2;actions.loadPersons()}))])},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/lib/components/CompactList/CompactList.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".CompactList{box-sizing:initial;display:flex;flex:1;flex-direction:column;overflow:hidden;background:var(--bg-light);border:1px solid var(--border);border-radius:var(--radius)}.CompactList .CompactList__header{display:flex;align-items:center;justify-content:space-between;padding:.5rem}.CompactList .CompactList__header h3{margin-bottom:0;font-size:.9rem;font-weight:600;line-height:1.4}.CompactList .CompactList__content{height:16rem;padding:.5rem;overflow-y:auto}.CompactList .LemonButton{font-family:var(--font-sans)!important}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/feature-flags/JSONEditorInput.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".JsonEditorInput{position:relative}.JsonEditorInput .border{border-radius:var(--radius)}.JsonEditorInput .border .monaco-editor,.JsonEditorInput .border .monaco-editor .overflow-guard{border-radius:inherit}.JsonEditorInput .placeholder{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;pointer-events:none}.JsonEditorInput .placeholder .placeholderLabelContainer{display:flex;align-items:center;height:100%;padding-left:18px;color:grey;pointer-events:none}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/project-homepage/ProjectHomepage.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ProjectHomepage{container-type:inline-size}.ProjectHomepage .ProjectHomepage__dashboardheader{display:flex;align-items:center;justify-content:space-between;margin-top:1rem}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title{display:flex;flex-direction:row;align-items:center}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title .ant-skeleton{width:300px}.ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title .ant-skeleton h3{margin:0}.posthog-3000 .ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title a{color:var(--default)}.posthog-3000 .ProjectHomepage .ProjectHomepage__dashboardheader .ProjectHomepage__dashboardheader__title a:hover{color:var(--primary-3000)}.ProjectHomepage .ProjectHomepage__lists{display:flex;gap:1rem}@container (max-width: 800px){.ProjectHomepage .ProjectHomepage__lists{flex-direction:column}}.ProjectHomepage .empty-state-container{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;padding:4rem;background-color:var(--side)}",""]),module.exports=exports},"./frontend/src/scenes/project-homepage/ProjectHomepage.scss":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.31_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./frontend/src/scenes/project-homepage/ProjectHomepage.scss"),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1__),options={insert:"head",singleton:!1};_node_modules_pnpm_style_loader_2_0_0_webpack_5_88_2_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default(),options),_node_modules_pnpm_css_loader_3_6_0_webpack_5_88_2_node_modules_css_loader_dist_cjs_js_node_modules_pnpm_postcss_loader_4_3_0_postcss_8_4_31_webpack_5_88_2_node_modules_postcss_loader_dist_cjs_js_node_modules_pnpm_sass_loader_10_3_1_sass_1_56_0_webpack_5_88_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_2_use_3_ProjectHomepage_scss__WEBPACK_IMPORTED_MODULE_1___default().locals}}]);