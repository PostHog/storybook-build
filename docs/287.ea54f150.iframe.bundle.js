(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(B,f,e){"use strict";e.d(f,"b",function(){return m}),e.d(f,"a",function(){return S});var K=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),w=e.n(K),k=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=e.n(k),a=e("./node_modules/core-js/modules/es.array.iterator.js"),y=e.n(a),p=e("./node_modules/core-js/modules/es.object.to-string.js"),q=e.n(p),G=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),ee=e.n(G),$=e("./node_modules/core-js/modules/es.object.from-entries.js"),te=e.n($),N=e("./node_modules/core-js/modules/es.array.map.js"),ce=e.n(N),ne=e("./node_modules/core-js/modules/es.object.entries.js"),ue=e.n(ne),H=e("./node_modules/react/index.js"),c=e.n(H),A=e("./node_modules/kea/lib/index.esm.js"),b=e("./node_modules/antd/es/tabs/index.js"),O=e("./frontend/src/scenes/urls.ts"),W=e("./frontend/src/lib/components/Tooltip.tsx"),T=e("./frontend/src/lib/components/icons.tsx"),V=e("./frontend/src/lib/components/TitleWithIcon.tsx"),F=e("./frontend/src/lib/constants.tsx"),ae=e("./frontend/src/lib/logic/featureFlagLogic.ts"),D,m;(function(i){i.Actions="actions",i.EventDefinitions="events",i.EventPropertyDefinitions="properties",i.IngestionWarnings="warnings"})(m||(m={}));var J=(D={},u()(D,m.EventPropertyDefinitions,O.a.eventPropertyDefinitions()),u()(D,m.EventDefinitions,O.a.eventDefinitions()),u()(D,m.Actions,O.a.actions()),u()(D,m.IngestionWarnings,O.a.ingestionWarnings()),D),Z=Object(A.kea)({path:["scenes","events","eventsTabsLogic"],connect:{values:[ae.a,["featureFlags"]]},actions:{setTab:function(v){return{tab:v}}},reducers:{tab:[m.EventDefinitions,{setTab:function(v,_){var E=_.tab;return E}}]},selectors:{showWarningsTab:[function(i){return[i.featureFlags]},function(i){return!!i[F.i.INGESTION_WARNINGS_ENABLED]}]},actionToUrl:function(){return{setTab:function(_){var E=_.tab;return J[E]||O.a.events()}}},urlToAction:function(v){var _=v.actions,E=v.values;return Object.fromEntries(Object.entries(J).map(function(L){var P=w()(L,2),C=P[0],x=P[1];return[x,function(){E.tab!==C&&_.setTab(C)}]}))}});function S(i){var v=i.tab,_=Object(A.useValues)(Z),E=_.showWarningsTab,L=Object(A.useActions)(Z),P=L.setTab;return c.a.createElement(b.a,{tabPosition:"top",animated:!1,activeKey:v,onTabClick:function(x){return P(x)}},c.a.createElement(b.a.TabPane,{tab:c.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:m.EventDefinitions}),c.a.createElement(b.a.TabPane,{tab:c.a.createElement(V.a,{icon:c.a.createElement(W.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},c.a.createElement(T.IconInfo,null)),"data-attr":"data-management-actions-tab"},"Actions"),key:m.Actions}),c.a.createElement(b.a.TabPane,{tab:c.a.createElement(V.a,{icon:c.a.createElement(W.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},c.a.createElement(T.IconInfo,null)),"data-attr":"data-management-event-properties-tab"},"Event Properties"),key:m.EventPropertyDefinitions}),E&&c.a.createElement(b.a.TabPane,{tab:c.a.createElement("span",{"data-attr":"data-management-warnings-tab"},"Ingestion Warnings"),key:m.IngestionWarnings}))}try{S.displayName="DataManagementPageTabs",S.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'},{value:'"warnings"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:S.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(i){}},"./frontend/src/scenes/data-management/ingestion-warnings/IngestionWarningsView.tsx":function(B,f,e){"use strict";e.r(f),e.d(f,"scene",function(){return je}),e.d(f,"IngestionWarningsView",function(){return oe});var K=e("./node_modules/core-js/modules/es.array.join.js"),w=e("./node_modules/core-js/modules/es.regexp.exec.js"),k=e("./node_modules/core-js/modules/es.string.split.js"),u=e("./node_modules/react/index.js"),a=e.n(u),y=e("./node_modules/kea/lib/index.esm.js"),p=e("./frontend/src/scenes/urls.ts"),q=e("./frontend/src/lib/components/PageHeader.tsx"),G=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),ee=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),$=e.n(ee),te=e("./node_modules/@babel/runtime/regenerator/index.js"),N=e.n(te),ce=e("./node_modules/core-js/modules/es.array.iterator.js"),ne=e("./node_modules/core-js/modules/es.object.to-string.js"),ue=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),H=e("./node_modules/kea-loaders/lib/index.js"),c=e("./frontend/src/lib/api.ts"),A=e("./frontend/src/scenes/teamLogic.tsx"),b=Object(y.kea)([Object(y.path)(["scenes","data-management","ingestion-warnings","ingestionWarningsLogic"]),Object(y.connect)({values:[A.a,["currentTeamId"]]}),Object(H.loaders)(function(n){var s=n.values;return{data:[[],{loadData:function(){var t=$()(N.a.mark(function l(){var o,g;return N.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,c.b.get("api/projects/".concat(s.currentTeamId,"/ingestion_warnings"));case 2:return o=d.sent,g=o.results,d.abrupt("return",g);case 5:case"end":return d.stop()}},l)}));function r(){return t.apply(this,arguments)}return r}()}]}}),Object(y.selectors)({breadcrumbs:[function(){return[]},function(){return[{name:"Data Management",path:p.a.eventDefinitions()},{name:"Ingestion Warnings",path:p.a.ingestionWarnings()}]}]}),Object(y.events)(function(n){var s=n.actions;return{afterMount:function(){s.loadData()}}})]),O=e("./frontend/src/lib/components/LemonTable/index.ts"),W=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),T=e("./frontend/src/lib/components/Link.tsx"),V=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),F=e.n(V),ae=e("./node_modules/core-js/modules/es.array.map.js"),D=e("./node_modules/core-js/modules/es.array.fill.js"),m=e("./node_modules/core-js/modules/es.array.slice.js"),J=e("./node_modules/core-js/modules/es.function.name.js"),Z=e("./node_modules/core-js/modules/es.array.from.js"),S=e("./node_modules/core-js/modules/es.string.iterator.js"),i=e("./node_modules/core-js/modules/es.symbol.js"),v=e("./node_modules/core-js/modules/es.symbol.description.js"),_=e("./node_modules/core-js/modules/es.symbol.iterator.js"),E=e("./node_modules/chart.js/dist/chart.mjs"),L=e("./frontend/src/lib/utils.tsx"),P=e("./frontend/src/lib/dayjs.ts"),C=e("./frontend/src/lib/components/Popup/Popup.tsx"),x=e("./node_modules/@floating-ui/core/dist/floating-ui.core.esm.js"),me=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),fe=e.n(me),ge=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss"),se=e.n(ge),Q={};Q.insert="head",Q.singleton=!1;var Pe=fe()(se.a,Q),he=se.a.locals||{};function ve(n,s){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Ee(n))||s&&n&&typeof n.length=="number"){t&&(n=t);var r=0,l=function(){};return{s:l,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(j){throw j},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,g=!1,R;return{s:function(){t=t.call(n)},n:function(){var j=t.next();return o=j.done,j},e:function(j){g=!0,R=j},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(g)throw R}}}}function Ee(n,s){if(!!n){if(typeof n=="string")return re(n,s);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return re(n,s)}}function re(n,s){(s==null||s>n.length)&&(s=n.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=n[t];return r}function Y(n){var s=n.summary,t=Object(u.useRef)(null),r=Object(u.useRef)(null),l=Object(y.useValues)(A.a),o=l.timezone,g=Object(u.useState)(null),R=F()(g,2),d=R[0],j=R[1],Oe=Object(u.useState)(0),ie=F()(Oe,2),Te=ie[0],_e=ie[1],le=Object(u.useMemo)(function(){return Object(L.vb)(0,30).map(function(I){return Object(P.a)().subtract(I,"days").format("D MMM YYYY")}).reverse()},[]),de=Object(u.useMemo)(function(){var I=new Array(30).fill(0),h=ve(s.warnings),M;try{for(h.s();!(M=h.n()).done;){var X=M.value,U=Object(P.c)(X.timestamp,o);I[Object(P.a)().diff(U,"days")]+=1}}catch(z){h.e(z)}finally{h.f()}return I.reverse()},[s]);return Object(u.useEffect)(function(){var I;if(t.current){var h;I=new E.a((h=t.current)===null||h===void 0?void 0:h.getContext("2d"),{type:"bar",data:{labels:le,datasets:[{data:de,minBarLength:3,hoverBackgroundColor:"brand-blue"}]},options:{scales:{x:{display:!1},y:{beginAtZero:!0,display:!1}},plugins:{crosshair:!1,legend:{display:!1},tooltip:{enabled:!1,external:function(X){var U=X.tooltip;if(U.opacity===0){j(null);return}var z=U.dataPoints[0];j(a.a.createElement(a.a.Fragment,null,z.label,": ",z.formattedValue)),_e(U.x)}}},maintainAspectRatio:!1,interaction:{mode:"index",axis:"x",intersect:!1}}})}return function(){var M;(M=I)===null||M===void 0||M.destroy()}},[s,le,de]),a.a.createElement("div",{className:"warning-events-graph"},a.a.createElement("canvas",{ref:t}),a.a.createElement(C.a,{visible:!!d,overlay:d,placement:"bottom-start",middleware:[Object(x.d)({crossAxis:Te})]},a.a.createElement("div",{ref:r})))}try{Y.displayName="WarningEventsGraph",Y.__docgenInfo={description:"",displayName:"WarningEventsGraph",props:{summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"IngestionWarningSummary"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"]={docgenInfo:Y.__docgenInfo,name:"WarningEventsGraph",path:"frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.tsx#WarningEventsGraph"})}catch(n){}var je={component:oe,logic:b},ye={cannot_merge_already_identified:"Refused to merge an already identified user",cannot_merge_with_illegal_distinct_id:"Refused to merge with an illegal distinct id",skipping_event_invalid_uuid:"Refused to process event with invalid uuid"},pe={cannot_merge_already_identified:function(s){var t=s.details;return a.a.createElement(a.a.Fragment,null,"Refused to merge already identified person"," ",a.a.createElement(T.a,{to:p.a.person(t.sourcePersonDistinctId)},t.sourcePersonDistinctId)," into"," ",a.a.createElement(T.a,{to:p.a.person(t.targetPersonDistinctId)},t.targetPersonDistinctId)," via an $identify or $create_alias call")},cannot_merge_with_illegal_distinct_id:function(s){var t=s.details;return a.a.createElement(a.a.Fragment,null,"Refused to merge an illegal distinct_id"," ",a.a.createElement(T.a,{to:p.a.person(t.illegalDistinctId)},t.illegalDistinctId)," with"," ",a.a.createElement(T.a,{to:p.a.person(t.otherDistinctId)},t.otherDistinctId)," via an $identify or $create_alias call")},skipping_event_invalid_uuid:function(s){var t=s.details;return a.a.createElement(a.a.Fragment,null,"Refused to process event with invalid uuid: ",a.a.createElement("code",null,t.eventUuid),".")}};function oe(){var n=Object(y.useValues)(b),s=n.data,t=n.dataLoading;return a.a.createElement("div",{"data-attr":"manage-events-table"},a.a.createElement(q.a,{title:"Data Management",caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),a.a.createElement(G.a,{tab:G.b.IngestionWarnings}),a.a.createElement("div",{className:"mb-4"},"Data ingestion related warnings from past 30 days."),a.a.createElement(O.a,{dataSource:s,loading:t,columns:[{title:"Warning",dataIndex:"type",render:function(l,o){var g=ye[o.type]||o.type;return a.a.createElement(a.a.Fragment,null,g," (",a.a.createElement(T.a,{to:"https://posthog.com/docs/manual/data-management#".concat(g.toLowerCase().split(" ").join("-"))},"docs",")"))}},{title:"Graph",render:function(l,o){return a.a.createElement(Y,{summary:o})}},{title:"Events",dataIndex:"count",align:"right",sorter:function(l,o){return l.count-o.count}},{title:"Last Seen",dataIndex:"lastSeen",render:function(l,o){return a.a.createElement(W.b,{time:o.lastSeen,showSeconds:!0})},align:"right",sorter:function(l,o){return new Date(l.lastSeen)>new Date(o.lastSeen)?1:-1}}],expandable:{expandedRowRender:be},defaultSorting:{columnKey:"lastSeen",order:-1},noSortingCancellation:!0}))}function be(n){return a.a.createElement(O.a,{dataSource:n.warnings,columns:[{title:"Description",key:"description",render:function(t,r){var l=pe[r.type];return l?l(r):a.a.createElement("pre",null,JSON.stringify(r.details,null,2))}},{title:"Time",dataIndex:"timestamp",render:function(t,r){return a.a.createElement(W.b,{time:r.timestamp,showSeconds:!0})},align:"right"}],embedded:!0,size:"small",showHeader:!1})}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/data-management/ingestion-warnings/WarningEventsGraph.scss":function(B,f,e){var K=e("./node_modules/css-loader/dist/runtime/api.js");f=K(!1),f.push([B.i,".warning-events-graph{width:150px}.warning-events-graph canvas{height:36px}",""]),B.exports=f}}]);
