(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{4731:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"Dashboards",(function(){return Dashboards}));__webpack_require__(194),__webpack_require__(210),__webpack_require__(42),__webpack_require__(63);var toConsumableArray=__webpack_require__(15),toConsumableArray_default=__webpack_require__.n(toConsumableArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(1),dashboardsModel=__webpack_require__(75),es_button=__webpack_require__(143),tabs=__webpack_require__(575),input=__webpack_require__(471),row=__webpack_require__(263),col=__webpack_require__(245),card=__webpack_require__(4292),dashboardsLogic=__webpack_require__(1137),Link=__webpack_require__(57),objectSpread2=__webpack_require__(2),asn_PushpinFilled={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"},AntdIcon=__webpack_require__(16),icons_PushpinFilled_PushpinFilled=function PushpinFilled(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_PushpinFilled}))};icons_PushpinFilled_PushpinFilled.displayName="PushpinFilled";var icons_PushpinFilled=react.forwardRef(icons_PushpinFilled_PushpinFilled),PushpinOutlined=__webpack_require__(4305),asn_ShareAltOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},icons_ShareAltOutlined_ShareAltOutlined=function ShareAltOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_ShareAltOutlined}))};icons_ShareAltOutlined_ShareAltOutlined.displayName="ShareAltOutlined";var icons_ShareAltOutlined=react.forwardRef(icons_ShareAltOutlined_ShareAltOutlined),PlusOutlined=__webpack_require__(2698),asn_AppstoreAddOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},icons_AppstoreAddOutlined_AppstoreAddOutlined=function AppstoreAddOutlined(props,ref){return react.createElement(AntdIcon.a,Object(objectSpread2.a)(Object(objectSpread2.a)({},props),{},{ref:ref,icon:asn_AppstoreAddOutlined}))};icons_AppstoreAddOutlined_AppstoreAddOutlined.displayName="AppstoreAddOutlined";var icons_AppstoreAddOutlined=react.forwardRef(icons_AppstoreAddOutlined_AppstoreAddOutlined),slicedToArray=__webpack_require__(12),slicedToArray_default=__webpack_require__.n(slicedToArray),es_form=__webpack_require__(329),utils=__webpack_require__(10),TextArea=__webpack_require__(1264),TextArea_default=__webpack_require__.n(TextArea),LemonModal=__webpack_require__(2586),LemonButton=__webpack_require__(58),constants=__webpack_require__(20),featureFlagLogic=__webpack_require__(77),types=__webpack_require__(4),LemonSelect=__webpack_require__(2562),PayGateMini=__webpack_require__(2587),ShareModal=__webpack_require__(1756);function NewDashboardModal(){var hideNewDashboardModal=Object(index_esm.useActions)(dashboardsLogic.b).hideNewDashboardModal,newDashboardModalVisible=Object(index_esm.useValues)(dashboardsLogic.b).newDashboardModalVisible,addDashboard=Object(index_esm.useActions)(dashboardsModel.a).addDashboard,dashboardLoading=Object(index_esm.useValues)(dashboardsModel.a).dashboardLoading,featureFlags=Object(index_esm.useValues)(featureFlagLogic.a).featureFlags,_Form$useForm=es_form.a.useForm(),form=slicedToArray_default()(_Form$useForm,1)[0];return react_default.a.createElement(LemonModal.a,{title:"New dashboard",destroyOnClose:!0,onCancel:hideNewDashboardModal,visible:newDashboardModalVisible,footer:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(LemonButton.a,{form:"new-dashboard-form",type:"secondary","data-attr":"dashboard-cancel",loading:dashboardLoading,style:{marginRight:"0.5rem"},onClick:hideNewDashboardModal},"Cancel"),react_default.a.createElement(LemonButton.a,{form:"new-dashboard-form",htmlType:"submit",type:"primary","data-attr":"dashboard-submit",loading:dashboardLoading},"Create"))},react_default.a.createElement(es_form.a,{layout:"vertical",form:form,onFinish:function onFinish(values){addDashboard(values)},id:"new-dashboard-form",requiredMark:"optional",initialValues:{restrictionLevel:constants.k.EveryoneInProjectCanEdit}},react_default.a.createElement("p",null,"Use dashboards to compose multiple insights into a single view."),react_default.a.createElement(es_form.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please give your dashboard a name."}]},react_default.a.createElement(input.a,{autoFocus:!0,onChange:function onChange(e){return form.setFieldsValue({key:Object(utils.ub)(e.target.value)})},"data-attr":"dashboard-name-input",className:"ph-ignore-input"})),react_default.a.createElement(es_form.a.Item,{name:"description",label:"Description"},react_default.a.createElement(TextArea_default.a,{onChange:function onChange(e){return form.setFieldsValue({description:e.target.value})},"data-attr":"dashboard-description-input",className:"ph-ignore-input"})),react_default.a.createElement(es_form.a.Item,{name:"useTemplate",label:"Template"},react_default.a.createElement(LemonSelect.a,{value:form.getFieldValue("useTemplate"),onChange:function onChange(newValue){return form.setFieldsValue({useTemplate:newValue})},placeholder:"Optionally start from template",allowClear:!0,options:{DEFAULT_APP:{label:"Website","data-attr":"dashboard-select-default-app"}},type:"stealth",outlined:!0,style:{width:"100%"},"data-attr":"copy-from-template"})),featureFlags[constants.o.DASHBOARD_PERMISSIONS]&&react_default.a.createElement(es_form.a.Item,{name:"restrictionLevel",label:"Collaboration settings",rules:[{required:!0,message:"Restriction level needs to be specified."}]},react_default.a.createElement(PayGateMini.a,{feature:types.c.DASHBOARD_PERMISSIONING},react_default.a.createElement(LemonSelect.a,{value:form.getFieldValue("restrictionLevel"),onChange:function onChange(newValue){return form.setFieldsValue({restrictionLevel:newValue})},options:ShareModal.a,loading:dashboardLoading,type:"stealth",outlined:!0,style:{width:"100%"}})))))}var PageHeader=__webpack_require__(209),ObjectTags=__webpack_require__(348),userLogic=__webpack_require__(66),eventUsageLogic=__webpack_require__(36),urls=__webpack_require__(19),Spinner=__webpack_require__(176),LemonTable=__webpack_require__(246),columnUtils=__webpack_require__(1252),More=__webpack_require__(520),dashboardLogic=__webpack_require__(131),LemonRow=__webpack_require__(103),Tooltip=__webpack_require__(45),scene={component:Dashboards,logic:dashboardsLogic.b};function Dashboards(){var dashboardsLoading=Object(index_esm.useValues)(dashboardsModel.a).dashboardsLoading,_useActions=Object(index_esm.useActions)(dashboardsModel.a),deleteDashboard=_useActions.deleteDashboard,unpinDashboard=_useActions.unpinDashboard,pinDashboard=_useActions.pinDashboard,addDashboard=_useActions.addDashboard,duplicateDashboard=_useActions.duplicateDashboard,_useActions2=Object(index_esm.useActions)(dashboardsLogic.b),showNewDashboardModal=_useActions2.showNewDashboardModal,setSearchTerm=_useActions2.setSearchTerm,setCurrentTab=_useActions2.setCurrentTab,_useValues2=Object(index_esm.useValues)(dashboardsLogic.b),dashboards=_useValues2.dashboards,searchTerm=_useValues2.searchTerm,currentTab=_useValues2.currentTab,hasAvailableFeature=Object(index_esm.useValues)(userLogic.a).hasAvailableFeature,columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref){var id=_ref.id;return pinned?react_default.a.createElement(icons_PushpinFilled,{onClick:function onClick(){return unpinDashboard(id,eventUsageLogic.a.DashboardsList)},style:{cursor:"pointer"}}):react_default.a.createElement(PushpinOutlined.a,{onClick:function onClick(){return pinDashboard(id,eventUsageLogic.a.DashboardsList)},style:{cursor:"pointer"}})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(name,_ref2){var id=_ref2.id,description=_ref2.description,_highlight=_ref2._highlight,is_shared=_ref2.is_shared;return react_default.a.createElement("div",{className:_highlight?"highlighted":void 0,style:{display:"inline-block"}},react_default.a.createElement("div",{className:"row-name"},react_default.a.createElement(Link.a,{"data-attr":"dashboard-name",to:urls.a.dashboard(id)},name||"Untitled"),is_shared&&react_default.a.createElement(Tooltip.a,{title:"This dashboard is shared publicly."},react_default.a.createElement(icons_ShareAltOutlined,{style:{marginLeft:6}}))),hasAvailableFeature(types.c.DASHBOARD_COLLABORATION)&&description&&react_default.a.createElement("span",{className:"row-description"},description))},sorter:function sorter(a,b){var _a$name,_b$name;return(null!==(_a$name=a.name)&&void 0!==_a$name?_a$name:"Untitled").localeCompare(null!==(_b$name=b.name)&&void 0!==_b$name?_b$name:"Untitled")}}].concat(toConsumableArray_default()(hasAvailableFeature(types.c.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?react_default.a.createElement(ObjectTags.a,{tags:tags,staticOnly:!0}):null}}]:[]),[Object(columnUtils.b)(),Object(columnUtils.a)(),{width:0,render:function RenderActions(_,_ref3){var id=_ref3.id,name=_ref3.name;return react_default.a.createElement(More.a,{overlay:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(LemonButton.a,{type:"stealth",to:urls.a.dashboard(id),onClick:function onClick(){Object(dashboardLogic.c)({id:id}).mount(),Object(dashboardLogic.c)({id:id}).actions.setDashboardMode(null,eventUsageLogic.a.DashboardsList)},fullWidth:!0},"View"),react_default.a.createElement(LemonButton.a,{type:"stealth",to:urls.a.dashboard(id),onClick:function onClick(){Object(dashboardLogic.c)({id:id}).mount(),Object(dashboardLogic.c)({id:id}).actions.setDashboardMode(types.e.Edit,eventUsageLogic.a.DashboardsList)},fullWidth:!0},"Edit"),react_default.a.createElement(LemonButton.a,{type:"stealth",onClick:function onClick(){return duplicateDashboard({id:id,name:name})},fullWidth:!0},"Duplicate"),react_default.a.createElement(LemonRow.b,null),react_default.a.createElement(LemonButton.a,{type:"stealth",style:{color:"var(--danger)"},onClick:function onClick(){return deleteDashboard({id:id,redirect:!1})},fullWidth:!0},"Delete dashboard"))})}}]);return react_default.a.createElement("div",null,react_default.a.createElement(NewDashboardModal,null),react_default.a.createElement(PageHeader.a,{title:"Dashboards",buttons:react_default.a.createElement(es_button.a,{"data-attr":"new-dashboard",onClick:showNewDashboardModal,type:"primary",icon:react_default.a.createElement(PlusOutlined.a,null)},"New Dashboard")}),react_default.a.createElement(tabs.a,{activeKey:currentTab,style:{borderColor:"#D9D9D9"},onChange:function onChange(tab){return setCurrentTab(tab)}},react_default.a.createElement(tabs.a.TabPane,{tab:"All Dashboards",key:dashboardsLogic.a.All}),react_default.a.createElement(tabs.a.TabPane,{tab:"Pinned",key:dashboardsLogic.a.Pinned}),react_default.a.createElement(tabs.a.TabPane,{tab:"Shared",key:dashboardsLogic.a.Shared})),react_default.a.createElement("div",null,react_default.a.createElement(input.a.Search,{allowClear:!0,enterButton:!0,placeholder:"Search for dashboards",style:{width:240},value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value)}})),react_default.a.createElement(LemonRow.b,{large:!0}),dashboardsLoading?react_default.a.createElement("div",{className:"flex-center",style:{flexDirection:"column"}},react_default.a.createElement(Spinner.a,null),react_default.a.createElement("div",{className:"mt"},react_default.a.createElement("b",null,"Loading dashboards"))):dashboards.length>0||searchTerm||currentTab!==dashboardsLogic.a.All?react_default.a.createElement(LemonTable.a,{dataSource:dashboards,rowKey:"id",columns:columns,defaultSorting:{columnKey:"name",order:1},emptyState:searchTerm?"No ".concat(currentTab===dashboardsLogic.a.Pinned?"pinned ":currentTab===dashboardsLogic.a.Shared?"shared ":"",'dashboards matching "').concat(searchTerm,'"!'):currentTab===dashboardsLogic.a.Pinned?react_default.a.createElement(react_default.a.Fragment,null,"No dashboards have been pinned for quick access yet."," ",react_default.a.createElement(Link.a,{onClick:function onClick(){return setCurrentTab(dashboardsLogic.a.All)}},"Go to All Dashboards to pin one.")):currentTab===dashboardsLogic.a.Shared?react_default.a.createElement(react_default.a.Fragment,null,"No dashboards have been shared yet."," ",react_default.a.createElement(Link.a,{onClick:function onClick(){return setCurrentTab(dashboardsLogic.a.All)}},"Go to All Dashboards to share one.")):void 0,nouns:["dashboard","dashboards"]}):react_default.a.createElement("div",{className:"mt"},react_default.a.createElement("p",null,"Create your first dashboard:"),react_default.a.createElement(row.a,{gutter:[16,16]},react_default.a.createElement(col.a,{xs:24,xl:6},react_default.a.createElement(card.a,{title:"Empty",size:"small",style:{cursor:"pointer"},onClick:function onClick(){return addDashboard({name:"New Dashboard",show:!0,useTemplate:""})}},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40}},react_default.a.createElement(icons_AppstoreAddOutlined,null)))),react_default.a.createElement(col.a,{xs:24,xl:6},react_default.a.createElement(card.a,{title:"App Default",size:"small",style:{cursor:"pointer"},onClick:function onClick(){return addDashboard({name:"Web App Dashboard",show:!0,useTemplate:"DEFAULT_APP"})}},react_default.a.createElement("div",{style:{textAlign:"center",fontSize:40}},react_default.a.createElement(icons_AppstoreAddOutlined,null)))))))}}}]);