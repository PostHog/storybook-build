"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[84851],{"../../frontend/src/scenes/dashboard/Dashboards.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Edit:()=>Edit,Erroring:()=>Erroring,List:()=>List,New:()=>New,NewSelectVariables:()=>NewSelectVariables,NotFound:()=>NotFound,Show:()=>Show,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var kea_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/utils/eventUsageLogic.ts"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_App__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/scenes/App.tsx"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/scenes/dashboard/dashboardLogic.tsx"),scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/dashboard/newDashboardLogic.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_mocks_browser__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/mocks/browser.tsx"),_mocks_features__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/mocks/features.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/types.ts"),_dashboards_templates_dashboardTemplatesLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let dashboardRaw=__webpack_require__("../../frontend/src/scenes/dashboard/__mocks__/dashboard1.json"),dashboard={...dashboardRaw,tiles:dashboardRaw.tiles.map(tile=>({...tile,is_cached:!0,...tile.insight?{insight:{...tile.insight,last_refresh:new Date().toISOString(),is_cached:!0,cache_target_age:new Date(Date.now()+36e5).toISOString()}}:{}}))},insightMocks=dashboard.tiles.reduce((acc,tile)=>(tile.insight&&(acc[`/api/projects/:team_id/insights/${tile.insight.id}/`]=tile.insight,acc[`/api/environments/:team_id/insights/${tile.insight.id}/`]=tile.insight),acc),{}),__WEBPACK_DEFAULT_EXPORT__={title:"Scenes-App/Dashboards",decorators:[(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_7__.x8)({get:{"/api/environments/:team_id/dashboards/":__webpack_require__("../../frontend/src/scenes/dashboard/__mocks__/dashboards.json"),"/api/environments/:team_id/dashboards/1/":dashboard,...insightMocks,"/api/environments/:team_id/insights/:id/":req=>{let insightId=req.params.id,tile=dashboard.tiles?.find(t=>t.insight?.id?.toString()===insightId?.toString());if(tile?.insight)return[200,tile.insight];let insight=insightMocks[`/api/environments/:team_id/insights/${insightId}/`]||insightMocks[`/api/projects/:team_id/insights/${insightId}/`];return insight?[200,insight]:[404,{detail:"Insight not found"}]},"/api/environments/:team_id/dashboards/1/collaborators/":[],"/api/environments/:team_id/dashboards/2/":[500,{detail:"Server error"}],"/api/projects/:team_id/dashboard_templates/":__webpack_require__("../../frontend/src/scenes/dashboard/__mocks__/dashboard_templates.json"),"/api/projects/:team_id/dashboard_templates/json_schema/":__webpack_require__("../../frontend/src/scenes/dashboard/__mocks__/dashboard_template_schema.json"),"/api/environments/:team_id/dashboards/:dash_id/sharing/":{created_at:"2023-02-25T13:28:20.454940Z",enabled:!1,access_token:"a-secret-token"},"/api/environments/:team_id/warehouse/variables/":[],"/api/environments/:team_id/":{id:1,name:"Test Team"}},post:{"/api/environments/:team_id/insights/cancel/":[201]}})],parameters:{layout:"fullscreen",viewMode:"story",mockDate:"2023-02-01"}},List=()=>((0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.dashboards())},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_3__.g,{})),New=()=>((0,_mocks_features__WEBPACK_IMPORTED_MODULE_11__.y)([]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.dashboards()),scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_5__.Z.mount(),scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_5__.Z.actions.showNewDashboardModal(),_dashboards_templates_dashboardTemplatesLogic__WEBPACK_IMPORTED_MODULE_9__.R.mount()},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_3__.g,{})),NewSelectVariables=()=>((0,_mocks_features__WEBPACK_IMPORTED_MODULE_11__.y)([]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.dashboards()),scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_5__.Z.mount(),scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_5__.Z.actions.showNewDashboardModal(),scenes_dashboard_newDashboardLogic__WEBPACK_IMPORTED_MODULE_5__.Z.actions.setActiveDashboardTemplate({id:"1",template_name:"Dashboard name",dashboard_description:"The dashboard description",dashboard_filters:{},tiles:[],variables:[{id:"SIGN_UP",name:"Sign up page viewed",type:"event",default:{id:"$pageview",math:_types__WEBPACK_IMPORTED_MODULE_8__.vN.UniqueUsers,type:_types__WEBPACK_IMPORTED_MODULE_8__.DC.EVENTS},required:!0,description:"Add the current_url filter that matches your sign up page"},{id:"ACTIVATED",name:"Very very long event name very very long. Very very long event name very very long",type:"event",default:{id:"$pageview",math:_types__WEBPACK_IMPORTED_MODULE_8__.vN.UniqueUsers,type:_types__WEBPACK_IMPORTED_MODULE_8__.DC.EVENTS},required:!0,description:"Very long description. Select the event which best represents when a user is activated. Select the event which best represents when a user is activated"},{id:"ACTIVATED",name:"Activated event",type:"event",default:{id:"$pageview",math:_types__WEBPACK_IMPORTED_MODULE_8__.vN.UniqueUsers,type:_types__WEBPACK_IMPORTED_MODULE_8__.DC.EVENTS},required:!1,description:"Select the event which best represents when a user is activated"}],tags:[],image_url:"https://posthog.com/static/5e5cf65347bfb25f1dfc9792b18e87cb/6b063/posthog-bye-kubernetes.png"})},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_3__.g,{})),Show=()=>((0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.dashboard(1))},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_3__.g,{}));Show.parameters={};let Edit=()=>((0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.dashboard(1)),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_4__.B)({id:1}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_4__.B)({id:1}).actions.setDashboardMode(_types__WEBPACK_IMPORTED_MODULE_8__.MN.Edit,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_1__.GU.Browser)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_3__.g,{}));Edit.parameters={};let NotFound=()=>((0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.dashboard(1e3))},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_3__.g,{})),Erroring=()=>((0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_6__.j.dashboard(2))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_3__.g,{}));List.parameters={...List.parameters,docs:{...List.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useEffect(() => {\n    router.actions.push(urls.dashboards());\n  }, []);\n  return <App />;\n}",...List.parameters?.docs?.source}}},New.parameters={...New.parameters,docs:{...New.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useAvailableFeatures([]);\n  useEffect(() => {\n    router.actions.push(urls.dashboards());\n    newDashboardLogic.mount();\n    newDashboardLogic.actions.showNewDashboardModal();\n    dashboardTemplatesLogic.mount();\n  }, []);\n  return <App />;\n}",...New.parameters?.docs?.source}}},NewSelectVariables.parameters={...NewSelectVariables.parameters,docs:{...NewSelectVariables.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useAvailableFeatures([]);\n  useEffect(() => {\n    router.actions.push(urls.dashboards());\n    newDashboardLogic.mount();\n    newDashboardLogic.actions.showNewDashboardModal();\n    newDashboardLogic.actions.setActiveDashboardTemplate({\n      id: '1',\n      template_name: 'Dashboard name',\n      dashboard_description: 'The dashboard description',\n      dashboard_filters: {},\n      tiles: [],\n      variables: [{\n        id: 'SIGN_UP',\n        name: 'Sign up page viewed',\n        type: 'event',\n        default: {\n          id: '$pageview',\n          math: BaseMathType.UniqueUsers,\n          type: EntityTypes.EVENTS\n        },\n        required: true,\n        description: 'Add the current_url filter that matches your sign up page'\n      }, {\n        id: 'ACTIVATED',\n        name: 'Very very long event name very very long. Very very long event name very very long',\n        type: 'event',\n        default: {\n          id: '$pageview',\n          math: BaseMathType.UniqueUsers,\n          type: EntityTypes.EVENTS\n        },\n        required: true,\n        description: 'Very long description. Select the event which best represents when a user is activated. Select the event which best represents when a user is activated'\n      }, {\n        id: 'ACTIVATED',\n        name: 'Activated event',\n        type: 'event',\n        default: {\n          id: '$pageview',\n          math: BaseMathType.UniqueUsers,\n          type: EntityTypes.EVENTS\n        },\n        required: false,\n        description: 'Select the event which best represents when a user is activated'\n      }],\n      tags: [],\n      image_url: 'https://posthog.com/static/5e5cf65347bfb25f1dfc9792b18e87cb/6b063/posthog-bye-kubernetes.png'\n    });\n  }, []);\n  return <App />;\n}",...NewSelectVariables.parameters?.docs?.source}}},Show.parameters={...Show.parameters,docs:{...Show.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useEffect(() => {\n    router.actions.push(urls.dashboard(1));\n  }, []);\n  return <App />;\n}",...Show.parameters?.docs?.source}}},Edit.parameters={...Edit.parameters,docs:{...Edit.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useEffect(() => {\n    router.actions.push(urls.dashboard(1));\n    dashboardLogic({\n      id: 1\n    }).mount();\n    dashboardLogic({\n      id: 1\n    }).actions.setDashboardMode(DashboardMode.Edit, DashboardEventSource.Browser);\n  }, []);\n  return <App />;\n}",...Edit.parameters?.docs?.source}}},NotFound.parameters={...NotFound.parameters,docs:{...NotFound.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useEffect(() => {\n    router.actions.push(urls.dashboard(1000));\n  }, []);\n  return <App />;\n}",...NotFound.parameters?.docs?.source}}},Erroring.parameters={...Erroring.parameters,docs:{...Erroring.parameters?.docs,source:{originalSource:"(): JSX.Element => {\n  useEffect(() => {\n    router.actions.push(urls.dashboard(2));\n  });\n  return <App />;\n}",...Erroring.parameters?.docs?.source}}};let __namedExportsOrder=["List","New","NewSelectVariables","Show","Edit","NotFound","Erroring"]},"../../frontend/src/scenes/dashboard/__mocks__/dashboard_template_schema.json":module=>{module.exports=JSON.parse('{"type":"object","required":["template_name","dashboard_description","dashboard_filters","tiles","variables"],"properties":{"id":{"description":"The id of the dashboard template","type":"string"},"template_name":{"description":"The name of the dashboard template","type":"string"},"created_at":{"description":"When the dashboard template was created","type":"string"},"image_url":{"description":"The image of the dashboard template","type":["string","null"]},"dashboard_description":{"description":"The description of the dashboard template","type":"string"},"dashboard_filters":{"description":"The filters of the dashboard template","type":"object"},"tiles":{"description":"The tiles of the dashboard template","type":"array","items":"object"},"variables":{"description":"The variables of the dashboard template","type":"array","items":{"type":"object","required":["id","name","type","default","description","required"],"properties":{"id":{"description":"The id of the variable","type":"string"},"name":{"description":"The name of the variable","type":"string"},"type":{"description":"The type of the variable","enum":["event"]},"default":{"description":"The default value of the variable","type":"object"},"description":{"description":"The description of the variable","type":"string"},"required":{"description":"Whether the variable is required","type":"boolean"}}}},"tags":{"description":"The tags of the dashboard template","type":"array","items":{"type":"string"}}}}')},"../../frontend/src/scenes/dashboard/__mocks__/dashboard_templates.json":module=>{module.exports=JSON.parse('[{"id":"1","template_name":"Simple Dashboard Template","dashboard_description":"A simple dashboard template","dashboard_filters":{},"tiles":[],"variables":[],"tags":[],"image_url":"https://posthog.com/static/5e5cf65347bfb25f1dfc9792b18e87cb/6b063/posthog-bye-kubernetes.png"},{"id":"2","template_name":"Very long named dashboard template","dashboard_description":"Very long dashboard description, it keeps going and going and going and going and going and going and going and going and going and going and going and going and going","dashboard_filters":{},"tiles":[],"variables":[],"tags":[],"image_url":"https://posthog.com/static/2ba70f2c4650b4b77e4d8cd10324a093/b5380/posthog-ceo-diary-blog.png"},{"id":"3","template_name":"Same again template","dashboard_description":"Very long dashboard description, it keeps going and going and going and going and going and going and going and going and going and going and going and going and going","dashboard_filters":{},"tiles":[],"variables":[],"tags":[],"image_url":"https://posthog.com/static/2ba70f2c4650b4b77e4d8cd10324a093/b5380/posthog-ceo-diary-blog.png"},{"id":"4","template_name":"Same again template","dashboard_description":"Very long dashboard description, it keeps going and going and going and going and going and going and going and going and going and going and going and going and going","dashboard_filters":{},"tiles":[],"variables":[],"tags":[],"image_url":"https://posthog.com/static/2ba70f2c4650b4b77e4d8cd10324a093/b5380/posthog-ceo-diary-blog.png"},{"id":"4","template_name":"Broken image","dashboard_description":"Very long dashboard description, it keeps going and going and going and going and going and going and going and going and going and going and going and going and going","dashboard_filters":{},"tiles":[],"variables":[],"tags":[],"image_url":"broken-image.png"},{"id":"5","template_name":"Broken image 2","dashboard_description":"Very long dashboard description, it keeps going and going and going and going and going and going and going and going and going and going and going and going and going","dashboard_filters":{},"tiles":[],"variables":[],"tags":[],"image_url":"broken-image.png"}]')}}]);