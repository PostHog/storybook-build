"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[11459],{"../../products/error_tracking/frontend/components/ErrorFilters/errorFiltersLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>errorFiltersLogic});var fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__),kea__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../products/error_tracking/frontend/utils.ts");let DEFAULT_DATE_RANGE={date_from:"-7d",date_to:null},DEFAULT_FILTER_GROUP={type:_types__WEBPACK_IMPORTED_MODULE_3__.J2.And,values:[{type:_types__WEBPACK_IMPORTED_MODULE_3__.J2.And,values:[]}]},errorFiltersLogic=(0,kea__WEBPACK_IMPORTED_MODULE_1__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_1__.path)(["scenes","error-tracking","errorFiltersLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_1__.actions)({setDateRange:dateRange=>({dateRange}),setSearchQuery:searchQuery=>({searchQuery}),setFilterGroup:filterGroup=>({filterGroup}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts})}),(0,kea__WEBPACK_IMPORTED_MODULE_1__.reducers)({dateRange:[DEFAULT_DATE_RANGE,{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],filterGroup:[DEFAULT_FILTER_GROUP,{persist:!0},{setFilterGroup:(_,_ref2)=>{let{filterGroup}=_ref2;return filterGroup}}],filterTestAccounts:[!1,{persist:!0},{setFilterTestAccounts:(_,_ref3)=>{let{filterTestAccounts}=_ref3;return filterTestAccounts}}],searchQuery:["",{setSearchQuery:(_,_ref4)=>{let{searchQuery}=_ref4;return searchQuery}}]}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.urlToAction)(_ref5=>{let{actions,values}=_ref5;return{"*":(_,params)=>{params.dateRange&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.dateRange,values.dateRange)&&actions.setDateRange(params.dateRange),params.filterGroup&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.filterGroup,values.filterGroup)&&actions.setFilterGroup(params.filterGroup),params.filterTestAccounts&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.filterTestAccounts,values.filterTestAccounts)&&actions.setFilterTestAccounts(params.filterTestAccounts),params.searchQuery&&!fast_deep_equal__WEBPACK_IMPORTED_MODULE_0___default()(params.searchQuery,values.searchQuery)&&actions.setSearchQuery(params.searchQuery)}}}),(0,kea_router__WEBPACK_IMPORTED_MODULE_2__.actionToUrl)(_ref6=>{let{values}=_ref6,buildURL=()=>(0,_utils__WEBPACK_IMPORTED_MODULE_4__.qI)(kea_router__WEBPACK_IMPORTED_MODULE_2__.router,params=>((0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"filterTestAccounts",values.filterTestAccounts,!1),(0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"searchQuery",values.searchQuery,""),(0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"filterGroup",values.filterGroup,DEFAULT_FILTER_GROUP),(0,_utils__WEBPACK_IMPORTED_MODULE_4__.aM)(params,"dateRange",values.dateRange,DEFAULT_DATE_RANGE),params));return{setDateRange:()=>buildURL(),setFilterGroup:()=>buildURL(),setSearchQuery:()=>buildURL(),setFilterTestAccounts:()=>buildURL()}})])},"../../products/error_tracking/frontend/components/ErrorTrackingSetupPrompt/ErrorTrackingSetupPrompt.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>ErrorTrackingSetupPrompt});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),_posthog_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/components/ProductIntroduction/ProductIntroduction.tsx"),lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils/product-intents.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/types.ts"),_errorIngestionLogic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../products/error_tracking/frontend/components/ErrorTrackingSetupPrompt/errorIngestionLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let ErrorTrackingSetupPrompt=_ref=>{let{children}=_ref,{hasSentExceptionEvent,hasSentExceptionEventLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_errorIngestionLogic__WEBPACK_IMPORTED_MODULE_7__.T),{currentTeam,currentTeamLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic),exceptionAutocaptureEnabled=currentTeam&&currentTeam.autocapture_exceptions_opt_in;return hasSentExceptionEventLoading||currentTeamLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.$j,{})}):hasSentExceptionEvent||exceptionAutocaptureEnabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(IngestionStatusCheck,{})},IngestionStatusCheck=()=>{let{addProductIntent,updateCurrentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_5__.teamLogic);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(lib_components_ProductIntroduction_ProductIntroduction__WEBPACK_IMPORTED_MODULE_3__.C,{productName:"Error tracking",thingName:"issue",titleOverride:"You haven't captured any exceptions",description:"To start capturing exceptions you need to enable exception autocapture. Exception autocapture only applies to the JS SDK. Installation for other platforms are described in the docs.",isEmpty:!0,productKey:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,actionElementOverride:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{type:"primary",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_EXCEPTION_AUTOCAPTURE_ENABLED}),updateCurrentTeam({autocapture_exceptions_opt_in:!0})},children:"Enable exception autocapture"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_2__.Jp,{targetBlank:!0,sideIcon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_1__.IconExternal,{className:"w-5 h-5"}),to:"https://posthog.com/docs/error-tracking/installation",onClick:()=>{addProductIntent({product_type:_types__WEBPACK_IMPORTED_MODULE_6__.Md.ERROR_TRACKING,intent_context:lib_utils_product_intents__WEBPACK_IMPORTED_MODULE_4__.kp.ERROR_TRACKING_DOCS_VIEWED})},children:"Read the docs"})]})})}},"../../products/error_tracking/frontend/components/ErrorTrackingSetupPrompt/errorIngestionLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>errorIngestionLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/utils/definitions.ts"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/types.ts");let errorIngestionLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","errorIngestionLogic"]),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)({hasSentExceptionEvent:{__default:void 0,loadExceptionEventDefinition:async()=>{let definition=(await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.eventDefinitions.list({event_type:_types__WEBPACK_IMPORTED_MODULE_4__.uW.Event,search:"$exception"})).results.find(r=>"$exception"===r.name);return!!definition&&!(0,lib_utils_definitions__WEBPACK_IMPORTED_MODULE_3__.U)(definition)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.afterMount)(_ref=>{let{actions}=_ref;actions.loadExceptionEventDefinition()})])},"../../products/error_tracking/frontend/components/Indicator.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Eg:()=>StatusIndicator,VO:()=>LabelIndicator});var clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let sizeVariants={xsmall:"gap-1 text-xs",small:"gap-2 text-sm",medium:"gap-3 text-base",large:"gap-3 text-lg"};function LabelIndicator(_ref){let{intent,label,size,tooltip,className}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.u,{title:tooltip,placement:"right",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.default)("flex items-center",className,sizeVariants[size]),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.Mo,{status:intent,size:"small"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{children:label})]})})}let STATUS_LABEL={active:"Active",archived:"Archived",resolved:"Resolved",pending_release:"Pending release",suppressed:"Suppressed"},STATUS_INTENT={active:"warning",archived:"muted",resolved:"success",pending_release:"muted",suppressed:"danger"},STATUS_INTENT_LABEL={active:"Reopen issue",suppressed:"Suppress issue",archived:"Archive issue",pending_release:"Resolve in next version",resolved:"Resolve issue"},STATUS_TOOLTIP={suppressed:"Stop capturing this issue",active:"Ongoing issue",archived:void 0,resolved:"Will become active again on next occurrence",pending_release:void 0};function StatusIndicator(_ref2){let{status,size="small",intent=!1,className,withTooltip}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(LabelIndicator,{intent:STATUS_INTENT[status],size:size,label:intent?STATUS_INTENT_LABEL[status]:STATUS_LABEL[status],tooltip:withTooltip?STATUS_TOOLTIP[status]:void 0,className:className})}},"../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>issueActionsLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),posthog_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.264.1_@rrweb+types@2.0.0-alpha.17/node_modules/posthog-js/dist/module.js"),lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/api.ts");let issueActionsLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","error-tracking","issueActionsLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({mergeIssues:ids=>({ids}),splitIssue:function(id,fingerprints){let exclusive=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return{id,fingerprints,exclusive}},resolveIssues:ids=>({ids}),suppressIssues:ids=>({ids}),activateIssues:ids=>({ids}),assignIssues:(ids,assignee)=>({ids,assignee}),updateIssueAssignee:(id,assignee)=>({id,assignee}),updateIssueStatus:(id,status)=>({id,status}),updateIssueName:(id,name)=>({id,name}),updateIssueDescription:(id,description)=>({id,description}),mutationSuccess:()=>{},mutationFailure:error=>({error})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref=>{let{actions}=_ref;async function runMutation(cb){try{await cb(),actions.mutationSuccess()}catch(e){actions.mutationFailure(e)}}return{mergeIssues:async _ref2=>{let{ids}=_ref2,[firstId,...otherIds]=ids;firstId&&otherIds.length>0&&await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_merged",{primary:firstId}),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.mergeInto(firstId,otherIds)})},splitIssue:async _ref3=>{let{id,fingerprints,exclusive}=_ref3;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_split",{issueId:id}),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.split(id,fingerprints,exclusive)})},resolveIssues:async _ref4=>{let{ids}=_ref4;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_resolve"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"resolved")})},suppressIssues:async _ref5=>{let{ids}=_ref5;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_suppress"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"suppressed")})},activateIssues:async _ref6=>{let{ids}=_ref6;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_activate"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkMarkStatus(ids,"active")})},assignIssues:async _ref7=>{let{ids,assignee}=_ref7;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_bulk_assign"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.bulkAssign(ids,assignee)})},updateIssueAssignee:async _ref8=>{let{id,assignee}=_ref8;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_assignee"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.assignIssue(id,assignee)})},updateIssueStatus:async _ref9=>{let{id,status}=_ref9;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_status"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{status})})},updateIssueName:async _ref10=>{let{id,name}=_ref10;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_name"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{name})})},updateIssueDescription:async _ref11=>{let{id,description}=_ref11;await runMutation(async()=>{posthog_js__WEBPACK_IMPORTED_MODULE_1__.ZP.capture("error_tracking_issue_update_description"),await lib_api__WEBPACK_IMPORTED_MODULE_2__.ZP.errorTracking.updateIssue(id,{description})})}}})])},"../../products/error_tracking/frontend/components/RuntimeIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>RuntimeIcon});var _posthog_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.30.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let RuntimeIconMap={python:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPython,web:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconJavascript,node:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconNode,ruby:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconRuby,go:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconGo,rust:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconRust,dotnet:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconCSharp,php:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconPHP,java:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconJava,android:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconAndroid,ios:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconApple,elixir:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconElixir,swift:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconSwift,dart:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconDart,flutter:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconFlutter,"react-native":_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconReact,unknown:_posthog_icons__WEBPACK_IMPORTED_MODULE_0__.IconLogomark};function RuntimeIcon(_ref){let{runtime,...props}=_ref,Icon=RuntimeIconMap[runtime];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Icon,{...props})}},"../../products/error_tracking/frontend/errorTrackingIssueSceneLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>errorTrackingIssueSceneLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_loaders__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),kea_subscriptions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.7_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),lib_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/api.ts"),lib_dayjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/dayjs.ts"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/scenes/urls.ts"),_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/types.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../frontend/src/types.ts"),_components_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../products/error_tracking/frontend/components/ErrorFilters/errorFiltersLogic.ts"),_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx"),_queries__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../products/error_tracking/frontend/queries.ts"),_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../products/error_tracking/frontend/utils.ts");let errorTrackingIssueSceneLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["scenes","error-tracking","errorTrackingIssueSceneLogic",key]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.id),(0,kea__WEBPACK_IMPORTED_MODULE_0__.connect)(()=>({values:[_components_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_9__.U,["dateRange","filterTestAccounts","filterGroup","searchQuery"]],actions:[_components_ErrorFilters_errorFiltersLogic__WEBPACK_IMPORTED_MODULE_9__.U,["setDateRange","setFilterTestAccounts","setFilterGroup","setSearchQuery"],_components_IssueActions_issueActionsLogic__WEBPACK_IMPORTED_MODULE_10__.x,["updateIssueAssignee","updateIssueStatus","updateIssueName","updateIssueDescription"]]})),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({loadIssue:!0,loadSummary:!0,loadInitialEvent:timestamp=>({timestamp}),setInitialEventTimestamp:timestamp=>({timestamp}),setIssue:issue=>({issue}),setLastSeen:lastSeen=>({lastSeen}),selectEvent:event=>({event}),createExternalReference:(integrationId,config)=>({integrationId,config}),updateAssignee:assignee=>({assignee}),updateStatus:status=>({status}),updateName:name=>({name}),updateDescription:description=>({description})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.defaults)({issue:null,summary:null,properties:null,lastSeen:null,initialEvent:null,selectedEvent:null,initialEventTimestamp:null,initialEventLoading:!0}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)(_ref=>{let{values}=_ref;return{summary:{},lastSeen:{setLastSeen:(prevLastSeen,_ref2)=>{let{lastSeen}=_ref2,lastSeenDayjs=(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_5__.Bv)(lastSeen);return!prevLastSeen||prevLastSeen.isBefore(lastSeenDayjs)?lastSeenDayjs:prevLastSeen}},initialEventTimestamp:{setInitialEventTimestamp:(state,_ref3)=>{let{timestamp}=_ref3;return!state&&timestamp?timestamp:state}},selectedEvent:{selectEvent:(_,_ref4)=>{let{event}=_ref4;return!event&&values.initialEvent?values.initialEvent:event}}}}),(0,kea_loaders__WEBPACK_IMPORTED_MODULE_1__.loaders)(_ref5=>{let{values,actions,props}=_ref5;return{issue:{setIssue:_ref6=>{let{issue}=_ref6;return issue},loadIssue:async()=>await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.getIssue(props.id,props.fingerprint),createExternalReference:async _ref7=>{let{integrationId,config}=_ref7;if(values.issue){var _values$issue$externa;let response=await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.errorTracking.createExternalReference(props.id,integrationId,config),externalIssues=null!==(_values$issue$externa=values.issue.external_issues)&&void 0!==_values$issue$externa?_values$issue$externa:[];return{...values.issue,external_issues:[...externalIssues,response]}}return null},updateAssignee:_ref8=>{let{assignee}=_ref8;return values.issue?{...values.issue,assignee}:values.issue},updateStatus:_ref9=>{let{status}=_ref9;return values.issue?{...values.issue,status}:values.issue},updateName:_ref10=>{let{name}=_ref10;return values.issue?{...values.issue,name}:values.issue},updateDescription:_ref11=>{let{description}=_ref11;return values.issue?{...values.issue,description}:values.issue}},initialEvent:{loadInitialEvent:async _ref12=>{let{timestamp}=_ref12,issue=(await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_11__.zx)({issueId:props.id,dateRange:getNarrowDateRange(timestamp),filterTestAccounts:!1,withAggregations:!1,withFirstEvent:!1,withLastEvent:!0}),{refresh:"blocking"})).results[0],positionEvent=null;if(!issue.last_event)return null;let initialEvent={uuid:(positionEvent=issue.last_event).uuid,timestamp:positionEvent.timestamp,person:{distinct_ids:[],properties:{}},properties:JSON.parse(positionEvent.properties)};return values.selectedEvent||actions.selectEvent(initialEvent),initialEvent}},summary:{loadSummary:async()=>{let response=await lib_api__WEBPACK_IMPORTED_MODULE_4__.ZP.query((0,_queries__WEBPACK_IMPORTED_MODULE_11__.zx)({issueId:props.id,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,filterGroup:values.filterGroup,searchQuery:values.searchQuery,volumeResolution:_utils__WEBPACK_IMPORTED_MODULE_12__.q7,withAggregations:!0,withFirstEvent:!1,withLastEvent:!1}),{refresh:"blocking"});if(!response.results.length)return null;let summary=response.results[0];return summary.aggregations?{first_seen:summary.first_seen,last_seen:summary.last_seen,aggregations:summary.aggregations}:null}}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)(_ref13=>{let{actions}=_ref13;return{breadcrumbs:[s=>[s.issue],issue=>{let exceptionType=issue?.name||"Issue";return[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__.x.ErrorTracking,name:"Error tracking",path:scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.errorTracking()},{key:[scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_6__.x.ErrorTrackingIssue,exceptionType],name:exceptionType,onRename:async name=>actions.updateName(name)}]}],[_layout_navigation_3000_sidepanel_types__WEBPACK_IMPORTED_MODULE_13__.f]:[(_,p)=>[p.id],issueId=>({activity_scope:_types__WEBPACK_IMPORTED_MODULE_8__.jc.ERROR_TRACKING_ISSUE,activity_item_id:issueId})],issueId:[(_,p)=>[p.id],id=>id],firstSeen:[s=>[s.issue],issue=>issue?(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_5__.Bv)(issue.first_seen):null],aggregations:[s=>[s.summary],summary=>summary?.aggregations]}}),(0,kea_subscriptions__WEBPACK_IMPORTED_MODULE_3__.Vt)(_ref14=>{let{actions}=_ref14;return{initialEventTimestamp:(value,oldValue)=>{!oldValue&&value&&actions.loadInitialEvent(value)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.listeners)(_ref15=>{let{props,values,actions}=_ref15;return{setDateRange:actions.loadSummary,setFilterGroup:actions.loadSummary,setFilterTestAccounts:actions.loadSummary,setSearchQuery:actions.loadSummary,loadSummarySuccess:_ref16=>{let{summary}=_ref16;if(summary&&summary.last_seen)actions.setLastSeen(summary.last_seen),actions.setInitialEventTimestamp(summary.last_seen);else{var _values$issue$first_s;actions.setInitialEventTimestamp(null!==(_values$issue$first_s=values.issue?.first_seen)&&void 0!==_values$issue$first_s?_values$issue$first_s:null)}},loadIssueFailure:_ref17=>{let{errorObject:{status,data}}=_ref17;308==status&&"issue_id"in data&&kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.replace(scenes_urls__WEBPACK_IMPORTED_MODULE_7__.j.errorTrackingIssue(data.issue_id))},updateName:_ref18=>{let{name}=_ref18;return actions.updateIssueName(props.id,name)},updateDescription:_ref19=>{let{description}=_ref19;return actions.updateIssueDescription(props.id,description)},updateAssignee:_ref20=>{let{assignee}=_ref20;return actions.updateIssueAssignee(props.id,assignee)},updateStatus:_ref21=>{let{status}=_ref21;return actions.updateIssueStatus(props.id,status)},selectEvent:_ref22=>{let{event}=_ref22;event&&kea_router__WEBPACK_IMPORTED_MODULE_2__.router.actions.replace(kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.currentLocation.pathname,{...kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.searchParams,timestamp:event.timestamp},kea_router__WEBPACK_IMPORTED_MODULE_2__.router.values.hashParams)}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.events)(_ref23=>{let{props,actions}=_ref23;return{afterMount:()=>{var _props$timestamp;actions.loadIssue(),actions.setInitialEventTimestamp(null!==(_props$timestamp=props.timestamp)&&void 0!==_props$timestamp?_props$timestamp:null),actions.loadSummary()}}})]);function getNarrowDateRange(timestamp){let firstSeen=(0,lib_dayjs__WEBPACK_IMPORTED_MODULE_5__.Bv)(timestamp);return{date_from:firstSeen.subtract(1,"hour").toISOString(),date_to:firstSeen.add(1,"hour").toISOString()}}}}]);