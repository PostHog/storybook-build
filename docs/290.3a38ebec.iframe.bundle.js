var C=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var y=(c,d)=>{var t={};for(var s in c)H.call(c,s)&&d.indexOf(s)<0&&(t[s]=c[s]);if(c!=null&&C)for(var s of C(c))d.indexOf(s)<0&&J.call(c,s)&&(t[s]=c[s]);return t};(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{"./frontend/src/lib/components/Table/utils.tsx":function(c,d,t){"use strict";t.d(d,"a",function(){return _});var s=t("./frontend/src/lib/hooks/useWindowSize.js"),u=t("./frontend/src/lib/utils/responsiveUtils.tsx"),b=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),D=t.n(b);function _(m){return Object(b.jsx)("span",{style:{whiteSpace:"nowrap"},children:m})}const j=m=>{const{width:O}=Object(s.a)(),E=Object(u.b)(m),h=!!O&&O<=E;return{isTableScrolling:h,tableScrollBreakpoint:E,tableScrollX:h?"max-content":`${E}px`}};try{_.displayName="normalizeColumnTitle",_.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:_.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(m){}try{j.displayName="useIsTableScrolling",j.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:j.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(m){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(c,d,t){"use strict";t.r(d),t.d(d,"scene",function(){return F}),t.d(d,"FeatureFlags",function(){return M}),t.d(d,"groupFilters",function(){return g});var s=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),u=t("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),b=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),D=t("./frontend/src/lib/components/Link.tsx"),_=t("./frontend/src/lib/utils.tsx"),j=t("./frontend/src/lib/components/PageHeader.tsx"),m=t("./frontend/src/lib/components/Table/utils.tsx"),O=t("./frontend/src/scenes/urls.ts"),E=t("./frontend/src/lib/utils/stringWithWBR.tsx"),h=t("./frontend/src/scenes/teamLogic.tsx"),f=t("./frontend/src/lib/components/LemonButton/index.ts"),A=t("./frontend/src/lib/components/LemonDivider/index.ts"),I=t("./frontend/src/lib/components/LemonTable/index.ts"),R=t("./frontend/src/lib/components/LemonButton/More.tsx"),L=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),S=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),B=t("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),W=t("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),p=t("./frontend/@posthog/lemon-ui/src/index.ts"),K=t("./frontend/src/lib/components/Tooltip.tsx"),U=t("./frontend/src/lib/components/icons.tsx"),P=t("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.0/node_modules/kea-router/lib/index.js"),G=t.n(P),e=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js"),X=t.n(e);const F={component:M,logic:u.b};function N(){const{currentTeamId:a}=Object(s.useValues)(h.a),{featureFlagsLoading:l,searchedFeatureFlags:r,searchTerm:z,uniqueCreators:$,filters:x}=Object(s.useValues)(u.b),{updateFeatureFlag:Y,loadFeatureFlags:k,setSearchTerm:w,setFeatureFlagsFilters:v}=Object(s.useActions)(u.b),V=[{title:Object(m.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:(o,i)=>(o.key||"").localeCompare(i.key||""),render:function(i,n){return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-row items-center",children:[Object(e.jsx)(D.a,{to:n.id?O.a.featureFlag(n.id):void 0,className:"row-name",children:Object(E.a)(n.key,17)}),!n.can_edit&&Object(e.jsx)(K.a,{title:"You don't have edit permissions for this feature flag.",children:Object(e.jsx)(U.IconLock,{style:{marginLeft:6,verticalAlign:"-0.125em",display:"inline"}})})]}),n.name&&Object(e.jsx)("span",{className:"row-description",style:{maxWidth:"24rem"},children:n.name})]})}},Object(L.b)(),Object(L.a)(),{title:"Release conditions",width:100,render:function(i,n){return g(n.filters.groups)}},{title:"Status",dataIndex:"active",sorter:(o,i)=>Number(o.active)-Number(i.active),width:100,render:function(i,n){return Object(e.jsx)(e.Fragment,{children:n.performed_rollback?Object(e.jsx)(p.LemonTag,{type:"warning",className:"uppercase",children:"Rolled Back"}):n.active?Object(e.jsx)(p.LemonTag,{type:"success",className:"uppercase",children:"Enabled"}):Object(e.jsx)(p.LemonTag,{type:"default",className:"uppercase",children:"Disabled"})})}},{width:0,render:function(i,n){return Object(e.jsx)(R.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(f.a,{status:"stealth",onClick:()=>{Object(_.s)(n.key,"feature flag key")},fullWidth:!0,children:"Copy feature flag key"}),Object(e.jsxs)(f.a,{status:"stealth",onClick:()=>{n.id&&Y({id:n.id,payload:{active:!n.active}})},id:`feature-flag-${n.id}-switch`,disabled:!n.can_edit,fullWidth:!0,children:[n.active?"Disable":"Enable"," feature flag"]}),n.id&&Object(e.jsx)(f.a,{status:"stealth",fullWidth:!0,disabled:!n.can_edit,onClick:()=>n.id&&P.router.actions.push(O.a.featureFlag(n.id)),children:"Edit"}),Object(e.jsx)(f.a,{status:"stealth",to:O.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:`$feature/${n.key}`}),"data-attr":"usage",fullWidth:!0,children:"Try out in Insights"}),Object(e.jsx)(A.a,{}),n.id&&Object(e.jsx)(f.a,{status:"danger",onClick:()=>{Object(_.x)({endpoint:`projects/${a}/feature_flags`,object:{name:n.key,id:n.id},callback:k})},disabled:!n.can_edit,fullWidth:!0,children:"Delete feature flag"})]})})}}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("div",{children:Object(e.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(e.jsx)(p.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:w,value:z}),Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("span",{children:Object(e.jsx)("b",{children:"Status"})}),Object(e.jsx)(p.LemonSelect,{onChange:o=>{if(o)if(o==="all"){if(x){const i=x,{active:n}=i,T=y(i,["active"]);v(T,!0)}}else v({active:o})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0}),Object(e.jsx)("span",{className:"ml-1",children:Object(e.jsx)("b",{children:"Created by"})}),Object(e.jsx)(p.LemonSelect,{onChange:o=>{if(o)if(o==="any"){if(x){const i=x,{created_by:n}=i,T=y(i,["created_by"]);v(T,!0)}}else v({created_by:o})},options:$,value:"any"})]})]})}),Object(e.jsx)(I.a,{dataSource:r,columns:V,rowKey:"key",loading:l,pagination:{pageSize:100},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table"})]})}function M(){const{activeTab:a}=Object(s.useValues)(u.b),{setActiveTab:l}=Object(s.useActions)(u.b);return Object(e.jsxs)("div",{className:"feature_flags",children:[Object(e.jsx)(j.a,{title:"Feature Flags",buttons:Object(e.jsx)(f.a,{type:"primary",to:O.a.featureFlag("new"),"data-attr":"new-feature-flag",children:"New feature flag"})}),Object(e.jsxs)(b.a,{activeKey:a,destroyInactiveTabPane:!0,onChange:r=>l(r),children:[Object(e.jsx)(b.a.TabPane,{tab:"Overview",children:Object(e.jsx)(N,{})},"overview"),Object(e.jsx)(b.a.TabPane,{tab:"History",children:Object(e.jsx)(B.a,{scope:W.a.FEATURE_FLAG})},"history")]})]})}function g(a){if(a.length===0||!a.some(l=>l.rollout_percentage!==0))return"No users";if(a.some(l=>{var r;return!((r=l.properties)!==null&&r!==void 0&&r.length)&&[null,void 0,100].includes(l.rollout_percentage)}))return"100% of all users";if(a.length===1){const{properties:l,rollout_percentage:r=null}=a[0];return(l==null?void 0:l.length)>0?Object(e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"},children:[r!=null&&Object(e.jsxs)("span",{style:{flexShrink:0,marginRight:5},children:[r,"% of"]}),Object(e.jsx)(S.a,{filters:l,style:{margin:0,flexDirection:"column"}})]}):r!==null?`${r}% of all users`:(console.error("A group with full rollout was not detected early"),"All users")}return"Multiple groups"}try{g.displayName="groupFilters",g.__docgenInfo={description:"",displayName:"groupFilters",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:g.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(a){}}}]);
