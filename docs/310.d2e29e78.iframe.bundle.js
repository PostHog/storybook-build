(window.webpackJsonp=window.webpackJsonp||[]).push([[310],{"./frontend/src/scenes/organization/ConfirmOrganization/ConfirmOrganization.tsx":function(F,c,e){"use strict";e.r(c),e.d(c,"scene",function(){return D}),e.d(c,"ConfirmOrganization",function(){return y});var j=e("./node_modules/react/index.js"),n=e.n(j),O=e("./frontend/src/scenes/organizationLogic.tsx"),f=e("./frontend/src/lib/components/LemonButton/index.ts"),d=e("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),b=e("./frontend/src/lib/components/LemonDivider/index.ts"),l=e("./node_modules/kea/lib/index.esm.js"),Y=e("./node_modules/core-js/modules/es.object.keys.js"),I=e("./node_modules/core-js/modules/es.symbol.js"),V=e("./node_modules/core-js/modules/es.array.filter.js"),G=e("./node_modules/core-js/modules/es.object.to-string.js"),H=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),J=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),K=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),E=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),z=e.n(E),x=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),N=e.n(x),P=e("./node_modules/@babel/runtime/regenerator/index.js"),p=e.n(P),w=e("./frontend/src/lib/api.ts"),C=e("./node_modules/kea-router/lib/index.js"),v=e("./node_modules/kea-forms/lib/index.js"),S=e("./frontend/src/lib/components/lemonToast.tsx");function h(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),r.push.apply(r,o)}return r}function L(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(o){z()(a,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(r,o))})}return a}var u=Object(l.kea)([Object(l.path)(["scenes","organization","confirmOrganizationLogic"]),Object(l.actions)({setEmail:function(t){return{email:t}},setShowNewOrgWarning:function(t){return{show:t}}}),Object(l.reducers)({showNewOrgWarning:[!1,{setShowNewOrgWarning:function(t,r){var o=r.show;return o}}],email:["",{setEmail:function(t,r){var o=r.email;return o}}]}),Object(v.forms)(function(){return{confirmOrganization:{defaults:{},errors:function(t){var r=t.organization_name,o=t.first_name;return{first_name:o?void 0:"Please enter your name",organization_name:r?void 0:"Please enter your organization name"}},submit:function(){var a=N()(p.a.mark(function r(o){var i;return p.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,w.b.create("api/social_signup/",L({},o));case 3:i=s.sent,location.href=i.success_url||"/",s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),S.d.error(s.t0.detail||"Failed to create organization");case 10:case"end":return s.stop()}},r,null,[[0,7]])}));function t(r){return a.apply(this,arguments)}return t}()}}}),Object(C.urlToAction)(function(a){var t=a.actions;return{"/organization/confirm-creation":function(o,i){var m=i.email,s=i.organization_name,B=i.first_name;t.setConfirmOrganizationValues({organization_name:s,first_name:B}),t.setEmail(m)}}})]),g=e("./frontend/src/lib/forms/Field.tsx"),W=e("./frontend/src/lib/components/AnimatedCollapsible.tsx"),T=e("./frontend/src/scenes/urls.ts"),A=e("./frontend/src/lib/components/BridgePage/BridgePage.tsx"),D={component:y,logic:O.a};function y(){var a=Object(l.useValues)(u),t=a.isConfirmOrganizationSubmitting,r=a.email,o=a.showNewOrgWarning,i=Object(l.useActions)(u),m=i.setShowNewOrgWarning;return n.a.createElement(A.a,{view:"org-creation-confirmation"},n.a.createElement("h2",null,"Create a new organization"),n.a.createElement("div",{className:"flex-1"},n.a.createElement("p",{className:"text-center"},n.a.createElement("strong",null,"Trying to join an existing organization? ",n.a.createElement("br",null),!o&&n.a.createElement("a",{onClick:function(){m(!0)}},"Read more"))),n.a.createElement(W.a,{collapsed:!o},n.a.createElement("div",{className:"py-2"},n.a.createElement("p",null,"If you're trying to join an existing organization, you should not create a new one. Some reasons that you may accidentally end up here are:"),n.a.createElement("ul",{className:"list-disc pl-4"},n.a.createElement("li",null,"You're logging in with the wrong email address"),n.a.createElement("li",null,"Your PostHog account is at a different URL"),n.a.createElement("li",null,"You need an invitation from a colleague"))))),n.a.createElement(v.Form,{logic:u,formKey:"confirmOrganization",enableFormOnSubmit:!0,className:"space-y-4"},n.a.createElement(g.a,{name:"email",label:"Email"},n.a.createElement(d.a,{className:"ph-ignore-input",value:r,disabled:!0})),n.a.createElement(g.a,{name:"first_name",label:"Your name"},n.a.createElement(d.a,{className:"ph-ignore-input",placeholder:"Jane Doe"})),n.a.createElement(g.a,{name:"organization_name",label:"Organization name",help:"You can always rename your organization later"},n.a.createElement(d.a,{className:"ph-ignore-input",placeholder:"Hogflix Movies"})),n.a.createElement(f.a,{htmlType:"submit",fullWidth:!0,center:!0,type:"primary",loading:t},"Create organization"),n.a.createElement(f.a,{fullWidth:!0,center:!0,type:"secondary",disabled:t,to:T.a.signup()},"Cancel")),n.a.createElement("div",{className:"text-center terms-and-conditions-text mt-4 text-muted"},"By creating an account, you agree to our"," ",n.a.createElement("a",{href:"https://posthog.com/terms",target:"_blank",rel:"noopener"},"Terms\xA0of\xA0Service")," ","and"," ",n.a.createElement("a",{href:"https://posthog.com/privacy",target:"_blank",rel:"noopener"},"Privacy\xA0Policy"),"."),n.a.createElement(b.a,{thick:!0,dashed:!0,className:"my-6"}),n.a.createElement("div",{className:"text-center terms-and-conditions-text mt-4 text-muted"},"Have questions?"," ",n.a.createElement("a",{href:"https://posthog.com/support",target:"_blank",rel:"noopener"},"Visit support")," ","or"," ",n.a.createElement("a",{href:"https://posthog.com/docs",target:"_blank",rel:"noopener"},"read our documentation"),"."))}}}]);
