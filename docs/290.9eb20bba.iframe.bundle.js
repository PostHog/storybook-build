(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{"./frontend/src/scenes/groups/groupsListLogic.ts":function(A,d,e){"use strict";e.d(d,"a",function(){return H});var t=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),v=e.n(t),E=e("./node_modules/@babel/runtime/regenerator/index.js"),m=e.n(E),a=e("./node_modules/core-js/modules/es.array.iterator.js"),h=e.n(a),f=e("./node_modules/core-js/modules/es.object.to-string.js"),F=e.n(f),g=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),D=e.n(g),c=e("./node_modules/core-js/modules/es.array.concat.js"),O=e.n(c),i=e("./node_modules/kea/lib/index.esm.js"),u=e("./frontend/src/lib/api.ts"),C=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),s=e("./frontend/src/lib/utils.tsx"),j=e("./frontend/src/scenes/teamLogic.tsx"),L=e("./frontend/src/scenes/urls.ts"),G=e("./frontend/src/models/groupsModel.ts"),H=Object(i.kea)({path:["groups","groupsListLogic"],connect:{values:[j.a,["currentTeamId"],G.a,["groupTypes","aggregationLabel"],C.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(o){return{url:o}},setTab:function(o){return{tab:o}}}},loaders:function(r){var o=r.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var p=v()(m.a.mark(function K(U){var W;return m.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(W=U.url,!o.groupsEnabled){T.next=6;break}return W=W||"api/projects/".concat(o.currentTeamId,"/groups/?group_type_index=").concat(o.currentTab),T.next=5,u.b.get(W);case 5:return T.abrupt("return",T.sent);case 6:case"end":return T.stop()}},K)}));function I(K){return p.apply(this,arguments)}return I}()}]}},reducers:{currentTab:["-1",{setTab:function(r,o){var p=o.tab;return p}}]},selectors:{currentTabName:[function(n){return[n.currentTab,n.groupTypes,n.aggregationLabel]},function(n,r,o){return n==="-1"?"Persons":r!=null&&r.length?Object(s.i)(o(parseInt(n)).singular):""}],groupName:[function(n){return[n.currentTab,n.aggregationLabel]},function(n,r){return n==="-1"?{singular:"person",plural:"persons"}:r(parseInt(n))}],breadcrumbs:[function(n){return[n.currentTabName,n.currentTab]},function(n,r){return[{name:n,path:L.a.groups(r)}]}]},actionToUrl:function(){return{setTab:function(o){var p=o.tab;return p!=="-1"?L.a.groups(p):L.a.persons()}}},urlToAction:function(r){var o=r.actions,p=r.values;return{"/groups/:id":function(K){var U=K.id;U&&(o.setTab(U),o.loadGroups())},"/persons":function(){p.currentTab!=="-1"&&o.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(A,d,e){"use strict";e.d(d,"a",function(){return f});var t=e("./node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/scenes/persons/personsLogic.tsx"),E=e("./frontend/src/scenes/persons/PersonHeader.tsx"),m=e("./frontend/@posthog/lemon-ui/src/index.ts"),a=e("./node_modules/react/jsx-runtime.js"),h=e.n(a);function f(){var F=Object(t.useValues)(v.a),g=F.personDeleteModal,D=Object(t.useActions)(v.a),c=D.deletePerson,O=D.showPersonDeleteModal;return Object(a.jsx)(m.LemonModal,{isOpen:!!g,onClose:function(){return O(null)},title:'Are you sure you want to delete "'.concat(Object(E.b)(g),'"?'),description:Object(a.jsxs)(a.Fragment,{children:["This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",Object(a.jsxs)("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold",children:[" ","Learn more"]})]}),footer:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.LemonButton,{status:"danger",type:"secondary",onClick:function(){c({person:g,deleteEvents:!0}),O(null)},"data-attr":"delete-person-with-events",children:"Delete person and all corresponding events"}),Object(a.jsx)(m.LemonButton,{type:"secondary",onClick:function(){return O(null)},"data-attr":"delete-person-cancel",children:"Cancel"}),Object(a.jsx)(m.LemonButton,{type:"primary",status:"danger",onClick:function(){c({person:g,deleteEvents:!1}),O(null)},"data-attr":"delete-person-no-events",children:"Delete person"})]})})}},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(A,d,e){"use strict";e.d(d,"a",function(){return i});var t=e("./node_modules/kea/lib/index.esm.js"),v=e("./frontend/src/lib/components/PageHeader.tsx"),E=e("./node_modules/core-js/modules/es.array.includes.js"),m=e("./node_modules/core-js/modules/es.string.includes.js"),a=e("./node_modules/core-js/modules/es.array.map.js"),h=e("./node_modules/antd/es/tabs/index.js"),f=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),F=e("./frontend/src/lib/utils.tsx"),g=e("./frontend/src/models/groupsModel.ts"),D=e("./frontend/src/scenes/groups/groupsListLogic.ts"),c=e("./node_modules/react/jsx-runtime.js");function O(){var u=Object(t.useActions)(D.a),C=u.setTab,s=Object(t.useValues)(D.a),j=s.currentTab,L=Object(t.useValues)(g.a),G=L.groupTypes,H=L.aggregationLabel,n=Object(t.useValues)(f.b),r=n.groupsAccessStatus,o=[f.a.HasAccess,f.a.HasGroupTypes,f.a.NoAccess].includes(r);return Object(c.jsxs)(h.a,{activeKey:j,onChange:function(I){return C(I)},children:[Object(c.jsx)(h.a.TabPane,{tab:"Persons"},"-1"),o?Object(c.jsx)(h.a.TabPane,{tab:"Introducing Group Analytics"},"0"):G.map(function(p){return Object(c.jsx)(h.a.TabPane,{tab:Object(F.i)(H(p.group_type_index).plural)},p.group_type_index)})]})}function i(u){var C=u.hideGroupTabs,s=Object(t.useValues)(g.a),j=s.showGroupsOptions;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(v.a,{title:"Persons".concat(j?" & Groups":""),caption:"A catalog of your product's end users".concat(j?" and groups":"",".")}),!C&&j&&Object(c.jsx)(O,{})]})}try{i.displayName="PersonPageHeader",i.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:i.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(u){}},"./frontend/src/scenes/persons/Persons.scss":function(A,d,e){"use strict";var t=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),v=e.n(t),E=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),m=e.n(E),a={};a.insert="head",a.singleton=!1;var h=v()(m.a,a),f=m.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(A,d,e){"use strict";e.r(d),e.d(d,"scene",function(){return w}),e.d(d,"Persons",function(){return z}),e.d(d,"PersonsScene",function(){return Z});var t=e("./node_modules/kea/lib/index.esm.js"),v=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),E=e.n(v),m=e("./node_modules/core-js/modules/es.array.concat.js"),a=e("./node_modules/core-js/modules/es.object.keys.js"),h=e("./frontend/src/lib/components/TZLabel/index.tsx"),f=e("./frontend/src/lib/components/PropertiesTable.tsx"),F=e("./frontend/src/scenes/persons/Persons.scss"),g=e("./frontend/src/lib/components/CopyToClipboard.tsx"),D=e("./frontend/src/scenes/persons/PersonHeader.tsx"),c=e("./frontend/src/lib/components/LemonTable/index.ts"),O=e("./frontend/@posthog/lemon-ui/src/index.ts"),i=e("./frontend/src/lib/components/icons.tsx"),u=e("./frontend/src/scenes/persons/personsLogic.tsx"),C=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),s=e("./node_modules/react/jsx-runtime.js");function j(l){var P=l.people,N=l.loading,b=N===void 0?!1:N,Y=l.hasPrevious,y=l.hasNext,x=l.loadPrevious,M=l.loadNext,R=l.compact,V=Object(t.useActions)(u.a),S=V.showPersonDeleteModal,$=[{title:"Person",key:"person",render:function(B,_){return Object(s.jsx)(D.a,{withIcon:!0,person:_})}},{title:"ID",key:"id",render:function(B,_){return Object(s.jsx)("div",{className:"overflow-hidden",children:_.distinct_ids.length&&Object(s.jsx)(g.a,{explicitValue:_.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID",children:_.distinct_ids[0]})})}}].concat(E()(R?[]:[{title:"First seen",dataIndex:"created_at",render:function(B){return B?Object(s.jsx)(h.a,{time:B}):Object(s.jsx)(s.Fragment,{})}},{render:function(B,_){return Object(s.jsx)(O.LemonButton,{onClick:function(){return S(_)},icon:Object(s.jsx)(i.IconDelete,{}),status:"danger",size:"small"})}}]));return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(c.a,{"data-attr":"persons-table",columns:$,loading:b,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:y?function(){M==null||M(),window.scrollTo(0,0)}:void 0,onBackward:Y?function(){x==null||x(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(B){var _=B.properties;return Object.keys(_).length?Object(s.jsx)(f.a,{properties:_}):"This person has no properties."}},dataSource:P,emptyState:"No persons",nouns:["person","persons"]}),Object(s.jsx)(C.a,{})]})}try{j.displayName="PersonsTable",j.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:j.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(l){}var L=e("./node_modules/antd/es/popconfirm/index.js"),G=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),H=e.n(G),n=e("./node_modules/core-js/modules/es.regexp.exec.js"),r=e("./node_modules/core-js/modules/es.string.search.js"),o=e("./node_modules/react/index.js"),p=e("./frontend/src/lib/components/Tooltip.tsx"),I=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),K=function(){var P=Object(t.useActions)(u.a),N=P.loadPersons,b=P.setListFilters,Y=Object(t.useValues)(u.a),y=Y.listFilters,x=Object(o.useState)(""),M=H()(x,2),R=M[0],V=M[1],S=Object(I.a)(N,800);return Object(o.useEffect)(function(){V(y.search||"")},[]),Object(o.useEffect)(function(){b({search:R||void 0}),S()},[R]),Object(s.jsxs)("div",{className:"flex items-center gap-2",children:[Object(s.jsx)(O.LemonInput,{type:"search",placeholder:"Search for persons",onChange:V,value:R,"data-attr":"persons-search"}),Object(s.jsx)(p.a,{title:Object(s.jsx)(s.Fragment,{children:'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.'}),children:Object(s.jsx)(i.IconInfo,{className:"text-2xl text-muted-alt shrink-0"})})]})},U=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),W=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),Q=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),T=e("./frontend/src/lib/components/LemonButton/index.ts"),X=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),w={component:Z,logic:u.a,paramsToProps:function(){return{syncWithUrl:!0}}};function z(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=l.cohort;return Object(s.jsx)(t.BindLogic,{logic:u.a,props:{cohort:P,syncWithUrl:!P},children:Object(s.jsx)(Z,{})})}function Z(){var l=Object(t.useActions)(u.a),P=l.loadPersons,N=l.setListFilters,b=Object(t.useValues)(u.a),Y=b.cohortId,y=b.persons,x=b.listFilters,M=b.personsLoading,R=b.exporterProps,V=b.apiDocsURL;return Object(s.jsxs)("div",{className:"persons-list",children:[!Y&&Object(s.jsx)(U.a,{}),Object(s.jsxs)("div",{className:"space-y-2",children:[Object(s.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[Object(s.jsx)(K,{}),Object(s.jsx)(L.a,{placement:"topRight",title:Object(s.jsxs)(s.Fragment,{children:["Exporting by CSV is limited to 10,000 users.",Object(s.jsx)("br",{}),"To export more, please use ",Object(s.jsx)("a",{href:V,children:"the API"}),". Do you want to export by CSV?"]}),onConfirm:function(){return Object(X.a)(R[0])},children:Object(s.jsx)(T.a,{type:"secondary",icon:Object(s.jsx)(i.IconExport,{style:{color:"var(--primary)"}}),children:x.properties&&x.properties.length>0?Object(s.jsxs)("div",{style:{display:"block"},children:["Export (",Object(s.jsx)("strong",{children:x.properties.length})," filter)"]}):"Export"})})]}),Object(s.jsx)(W.a,{pageKey:"persons-list-page",propertyFilters:x.properties,onChange:function($){N({properties:$}),P()},endpoint:"person",taxonomicGroupTypes:[Q.a.PersonProperties],showConditionBadge:!0}),Object(s.jsx)(j,{people:y.results,loading:M,hasPrevious:!!y.previous,hasNext:!!y.next,loadPrevious:function(){return P(y.previous)},loadNext:function(){return P(y.next)}})]})]})}try{z.displayName="Persons",z.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:z.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(l){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(A,d,e){var t=e("./node_modules/css-loader/dist/runtime/api.js");d=t(!1),d.push([A.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),A.exports=d}}]);
