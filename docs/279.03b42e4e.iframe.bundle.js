(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{"./frontend/src/scenes/groups/groupsListLogic.ts":function(C,d,e){"use strict";e.d(d,"a",function(){return H});var a=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=e.n(a),c=e("./node_modules/@babel/runtime/regenerator/index.js"),t=e.n(c),g=e("./node_modules/core-js/modules/es.array.iterator.js"),L=e.n(g),K=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e.n(K),u=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),U=e.n(u),j=e("./node_modules/core-js/modules/es.array.concat.js"),P=e.n(j),O=e("./node_modules/kea/lib/index.esm.js"),h=e("./frontend/src/lib/api.ts"),E=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),m=e("./frontend/src/lib/utils.tsx"),I=e("./frontend/src/scenes/teamLogic.tsx"),i=e("./frontend/src/scenes/urls.ts"),W=e("./frontend/src/models/groupsModel.ts"),H=Object(O.kea)({path:["groups","groupsListLogic"],connect:{values:[I.a,["currentTeamId"],W.a,["groupTypes","aggregationLabel"],E.b,["groupsEnabled"]]},actions:function(){return{loadGroups:function(o){return{url:o}},setTab:function(o){return{tab:o}}}},loaders:function(r){var o=r.values;return{groups:[{next:null,previous:null,results:[]},{loadGroups:function(){var p=s()(t.a.mark(function A(N){var V;return t.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(V=N.url,!o.groupsEnabled){x.next=6;break}return V=V||"api/projects/".concat(o.currentTeamId,"/groups/?group_type_index=").concat(o.currentTab),x.next=5,h.b.get(V);case 5:return x.abrupt("return",x.sent);case 6:case"end":return x.stop()}},A)}));function b(A){return p.apply(this,arguments)}return b}()}]}},reducers:{currentTab:["-1",{setTab:function(r,o){var p=o.tab;return p}}]},selectors:{currentTabName:[function(n){return[n.currentTab,n.groupTypes,n.aggregationLabel]},function(n,r,o){return n==="-1"?"Persons":r!=null&&r.length?Object(m.i)(o(parseInt(n)).singular):""}],groupName:[function(n){return[n.currentTab,n.aggregationLabel]},function(n,r){return n==="-1"?{singular:"person",plural:"persons"}:r(parseInt(n))}],breadcrumbs:[function(n){return[n.currentTabName,n.currentTab]},function(n,r){return[{name:n,path:i.a.groups(r)}]}]},actionToUrl:function(){return{setTab:function(o){var p=o.tab;return p!=="-1"?i.a.groups(p):i.a.persons()}}},urlToAction:function(r){var o=r.actions,p=r.values;return{"/groups/:id":function(A){var N=A.id;N&&(o.setTab(N),o.loadGroups())},"/persons":function(){p.currentTab!=="-1"&&o.setTab("-1")}}}})},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(C,d,e){"use strict";e.d(d,"a",function(){return K});var a=e("./node_modules/react/index.js"),s=e.n(a),c=e("./node_modules/kea/lib/index.esm.js"),t=e("./frontend/src/scenes/persons/personsLogic.tsx"),g=e("./frontend/src/scenes/persons/PersonHeader.tsx"),L=e("./frontend/@posthog/lemon-ui/src/index.ts");function K(){var T=Object(c.useValues)(t.a),u=T.personDeleteModal,U=Object(c.useActions)(t.a),j=U.deletePerson,P=U.showPersonDeleteModal;return s.a.createElement(L.LemonModal,{isOpen:!!u,onClose:function(){return P(null)},title:'Are you sure you want to delete "'.concat(Object(g.b)(u),'"?'),description:s.a.createElement(s.a.Fragment,null,"This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",s.a.createElement("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold"}," ","Learn more")),footer:s.a.createElement(s.a.Fragment,null,s.a.createElement(L.LemonButton,{status:"danger",type:"secondary",onClick:function(){j({person:u,deleteEvents:!0}),P(null)},"data-attr":"delete-person-with-events"},"Delete person and all corresponding events"),s.a.createElement(L.LemonButton,{type:"secondary",onClick:function(){return P(null)},"data-attr":"delete-person-cancel"},"Cancel"),s.a.createElement(L.LemonButton,{type:"primary",status:"danger",onClick:function(){j({person:u,deleteEvents:!1}),P(null)},"data-attr":"delete-person-no-events"},"Delete person"))})}},"./frontend/src/scenes/persons/PersonPageHeader.tsx":function(C,d,e){"use strict";e.d(d,"a",function(){return h});var a=e("./node_modules/kea/lib/index.esm.js"),s=e("./frontend/src/lib/components/PageHeader.tsx"),c=e("./node_modules/react/index.js"),t=e.n(c),g=e("./node_modules/core-js/modules/es.array.includes.js"),L=e("./node_modules/core-js/modules/es.string.includes.js"),K=e("./node_modules/core-js/modules/es.array.map.js"),T=e("./node_modules/antd/es/tabs/index.js"),u=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),U=e("./frontend/src/lib/utils.tsx"),j=e("./frontend/src/models/groupsModel.ts"),P=e("./frontend/src/scenes/groups/groupsListLogic.ts");function O(){var E=Object(a.useActions)(P.a),m=E.setTab,I=Object(a.useValues)(P.a),i=I.currentTab,W=Object(a.useValues)(j.a),H=W.groupTypes,n=W.aggregationLabel,r=Object(a.useValues)(u.b),o=r.groupsAccessStatus,p=[u.a.HasAccess,u.a.HasGroupTypes,u.a.NoAccess].includes(o);return t.a.createElement(T.a,{activeKey:i,onChange:function(A){return m(A)}},t.a.createElement(T.a.TabPane,{tab:"Persons",key:"-1"}),p?t.a.createElement(T.a.TabPane,{tab:"Introducing Group Analytics",key:"0"}):H.map(function(b){return t.a.createElement(T.a.TabPane,{tab:Object(U.i)(n(b.group_type_index).plural),key:b.group_type_index})}))}function h(E){var m=E.hideGroupTabs,I=Object(a.useValues)(j.a),i=I.showGroupsOptions;return t.a.createElement(t.a.Fragment,null,t.a.createElement(s.a,{title:"Persons".concat(i?" & Groups":""),caption:"A catalog of your product's end users".concat(i?" and groups":"",".")}),!m&&i&&t.a.createElement(O,null))}try{h.displayName="PersonPageHeader",h.__docgenInfo={description:"",displayName:"PersonPageHeader",props:{hideGroupTabs:{defaultValue:null,description:"",name:"hideGroupTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"]={docgenInfo:h.__docgenInfo,name:"PersonPageHeader",path:"frontend/src/scenes/persons/PersonPageHeader.tsx#PersonPageHeader"})}catch(E){}},"./frontend/src/scenes/persons/Persons.scss":function(C,d,e){"use strict";var a=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),s=e.n(a),c=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),t=e.n(c),g={};g.insert="head",g.singleton=!1;var L=s()(t.a,g),K=t.a.locals||{}},"./frontend/src/scenes/persons/Persons.tsx":function(C,d,e){"use strict";e.r(d),e.d(d,"scene",function(){return w}),e.d(d,"Persons",function(){return z}),e.d(d,"PersonsScene",function(){return $});var a=e("./node_modules/react/index.js"),s=e.n(a),c=e("./node_modules/kea/lib/index.esm.js"),t=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),g=e.n(t),L=e("./node_modules/core-js/modules/es.array.concat.js"),K=e("./node_modules/core-js/modules/es.object.keys.js"),T=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),u=e("./frontend/src/lib/components/PropertiesTable.tsx"),U=e("./frontend/src/scenes/persons/Persons.scss"),j=e("./frontend/src/lib/components/CopyToClipboard.tsx"),P=e("./frontend/src/scenes/persons/PersonHeader.tsx"),O=e("./frontend/src/lib/components/LemonTable/index.ts"),h=e("./frontend/@posthog/lemon-ui/src/index.ts"),E=e("./frontend/src/lib/components/icons.tsx"),m=e("./frontend/src/scenes/persons/personsLogic.tsx"),I=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx");function i(l){var f=l.people,F=l.loading,v=F===void 0?!1:F,Y=l.hasPrevious,D=l.hasNext,_=l.loadPrevious,M=l.loadNext,R=l.compact,G=Object(c.useActions)(m.a),S=G.showPersonDeleteModal,Q=[{title:"Person",key:"person",render:function(B,y){return s.a.createElement(P.a,{withIcon:!0,person:y})}},{title:"ID",key:"id",render:function(B,y){return s.a.createElement("div",{style:{overflow:"hidden"}},y.distinct_ids.length&&s.a.createElement(j.a,{explicitValue:y.distinct_ids[0],iconStyle:{color:"var(--primary)"},description:"person distinct ID"},y.distinct_ids[0]))}}].concat(g()(R?[]:[{title:"First seen",dataIndex:"created_at",render:function(B){return B?s.a.createElement(T.b,{time:B}):s.a.createElement(s.a.Fragment,null)}},{render:function(B,y){return s.a.createElement(h.LemonButton,{onClick:function(){return S(y)},icon:s.a.createElement(E.IconDelete,null),status:"danger",size:"small"})}}]));return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{"data-attr":"persons-table",columns:Q,loading:v,rowKey:"id",pagination:{controlled:!0,pageSize:100,onForward:D?function(){M==null||M(),window.scrollTo(0,0)}:void 0,onBackward:Y?function(){_==null||_(),window.scrollTo(0,0)}:void 0},expandable:{expandedRowRender:function(B){var y=B.properties;return Object.keys(y).length?s.a.createElement(u.a,{properties:y}):"This person has no properties."}},dataSource:f,emptyState:"No persons",nouns:["person","persons"]}),s.a.createElement(I.a,null))}try{i.displayName="PersonsTable",i.__docgenInfo={description:"",displayName:"PersonsTable",props:{people:{defaultValue:null,description:"",name:"people",required:!0,type:{name:"PersonType[]"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},hasPrevious:{defaultValue:null,description:"",name:"hasPrevious",required:!1,type:{name:"boolean"}},hasNext:{defaultValue:null,description:"",name:"hasNext",required:!1,type:{name:"boolean"}},loadPrevious:{defaultValue:null,description:"",name:"loadPrevious",required:!1,type:{name:"(() => void)"}},loadNext:{defaultValue:null,description:"",name:"loadNext",required:!1,type:{name:"(() => void)"}},compact:{defaultValue:null,description:"",name:"compact",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"]={docgenInfo:i.__docgenInfo,name:"PersonsTable",path:"frontend/src/scenes/persons/PersonsTable.tsx#PersonsTable"})}catch(l){}var W=e("./node_modules/antd/es/popconfirm/index.js"),H=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),n=e.n(H),r=e("./node_modules/core-js/modules/es.regexp.exec.js"),o=e("./node_modules/core-js/modules/es.string.search.js"),p=e("./frontend/src/lib/components/Tooltip.tsx"),b=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),A=function(){var f=Object(c.useActions)(m.a),F=f.loadPersons,v=f.setListFilters,Y=Object(c.useValues)(m.a),D=Y.listFilters,_=Object(a.useState)(""),M=n()(_,2),R=M[0],G=M[1],S=Object(b.a)(F,800);return Object(a.useEffect)(function(){G(D.search||"")},[]),Object(a.useEffect)(function(){v({search:R||void 0}),S()},[R]),s.a.createElement("div",{className:"flex items-center gap-2"},s.a.createElement(h.LemonInput,{type:"search",placeholder:"Search for persons",onChange:G,value:R,"data-attr":"persons-search"}),s.a.createElement(p.a,{title:s.a.createElement(s.a.Fragment,null,'Search by email or Distinct ID. Email will match partially, for example: "@gmail.com". Distinct ID needs to match exactly.')},s.a.createElement(E.IconInfo,{className:"text-2xl text-muted-alt shrink-0"})))},N=e("./frontend/src/scenes/persons/PersonPageHeader.tsx"),V=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),X=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),x=e("./frontend/src/lib/components/LemonButton/index.ts"),Z=e("./frontend/src/lib/components/ExportButton/exporter.tsx"),w={component:$,logic:m.a,paramsToProps:function(){return{syncWithUrl:!0}}};function z(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=l.cohort;return s.a.createElement(c.BindLogic,{logic:m.a,props:{cohort:f,syncWithUrl:!f}},s.a.createElement($,null))}function $(){var l=Object(c.useActions)(m.a),f=l.loadPersons,F=l.setListFilters,v=Object(c.useValues)(m.a),Y=v.cohortId,D=v.persons,_=v.listFilters,M=v.personsLoading,R=v.exporterProps,G=v.apiDocsURL;return s.a.createElement("div",{className:"persons-list"},!Y&&s.a.createElement(N.a,null),s.a.createElement("div",{className:"space-y-2"},s.a.createElement("div",{className:"flex justify-between items-center gap-2"},s.a.createElement(A,null),s.a.createElement(W.a,{placement:"topRight",title:s.a.createElement(s.a.Fragment,null,"Exporting by CSV is limited to 10,000 users.",s.a.createElement("br",null),"To export more, please use ",s.a.createElement("a",{href:G},"the API"),". Do you want to export by CSV?"),onConfirm:function(){return Object(Z.a)(R[0])}},s.a.createElement(x.a,{type:"secondary",icon:s.a.createElement(E.IconExport,{style:{color:"var(--primary)"}})},_.properties&&_.properties.length>0?s.a.createElement("div",{style:{display:"block"}},"Export (",s.a.createElement("strong",null,_.properties.length)," filter)"):"Export"))),s.a.createElement(V.a,{pageKey:"persons-list-page",propertyFilters:_.properties,onChange:function(Q){F({properties:Q}),f()},endpoint:"person",taxonomicGroupTypes:[X.a.PersonProperties],showConditionBadge:!0}),s.a.createElement(i,{people:D.results,loading:M,hasPrevious:!!D.previous,hasNext:!!D.next,loadPrevious:function(){return f(D.previous)},loadNext:function(){return f(D.next)}})))}try{z.displayName="Persons",z.__docgenInfo={description:"",displayName:"Persons",props:{cohort:{defaultValue:null,description:"",name:"cohort",required:!1,type:{name:'number | "new"'}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/Persons.tsx#Persons"]={docgenInfo:z.__docgenInfo,name:"Persons",path:"frontend/src/scenes/persons/Persons.tsx#Persons"})}catch(l){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(C,d,e){var a=e("./node_modules/css-loader/dist/runtime/api.js");d=a(!1),d.push([C.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),C.exports=d}}]);
