(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./node_modules/@ant-design/icons/es/icons/CloseSquareOutlined.js":function(ke,ne,K){"use strict";var $=K("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Y=K("./node_modules/react/index.js"),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512 347.9 657.9A7.95 7.95 0 00354 671z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"close-square",theme:"outlined"},F=oe,te=K("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),q=function(re,ae){return Y.createElement(te.a,Object($.a)(Object($.a)({},re),{},{ref:ae,icon:F}))};q.displayName="CloseSquareOutlined";var L=ne.a=Y.forwardRef(q)},"./node_modules/@ant-design/icons/es/icons/RedoOutlined.js":function(ke,ne,K){"use strict";var $=K("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Y=K("./node_modules/react/index.js"),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},F=oe,te=K("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),q=function(re,ae){return Y.createElement(te.a,Object($.a)(Object($.a)({},re),{},{ref:ae,icon:F}))};q.displayName="RedoOutlined";var L=ne.a=Y.forwardRef(q)},"./node_modules/@ant-design/icons/es/icons/UndoOutlined.js":function(ke,ne,K){"use strict";var $=K("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Y=K("./node_modules/react/index.js"),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"},F=oe,te=K("./node_modules/@ant-design/icons/es/components/AntdIcon.js"),q=function(re,ae){return Y.createElement(te.a,Object($.a)(Object($.a)({},re),{},{ref:ae,icon:F}))};q.displayName="UndoOutlined";var L=ne.a=Y.forwardRef(q)},"./node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/index.js":function(ke,ne,K){"use strict";K.d(ne,"a",function(){return hr});var $={};K.r($),K.d($,"default",function(){return ze});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y=function(){return Y=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Y.apply(this,arguments)};function oe(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r}function F(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),o,a=[],n;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function q(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(te(arguments[t]));return e}var L;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(L||(L={}));function me(e){return e.nodeType===e.ELEMENT_NODE}function re(e){var t,r=(t=e)===null||t===void 0?void 0:t.host;return Boolean(r&&r.shadowRoot&&r.shadowRoot===e)}function ae(e){var t=e.maskInputOptions,r=e.tagName,i=e.type,o=e.value,a=e.maskInputFn,n=o||"";return(t[r.toLowerCase()]||t[i])&&(a?n=a(n):n="*".repeat(n.length)),n}var Fe="__rrweb_original__";function lt(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,i=0;i<e.width;i+=r)for(var o=0;o<e.height;o+=r){var a=t.getImageData,n=Fe in a?a[Fe]:a,s=new Uint32Array(n.call(t,i,o,Math.min(r,e.width-i),Math.min(r,e.height-o)).data.buffer);if(s.some(function(l){return l!==0}))return!1}return!0}var ut=1,ct=new RegExp("[^a-z0-9-_:]"),Ie=-2;function ft(){return ut++}function dt(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return ct.test(t)?"div":t}function Ne(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(ht).join(""):null}catch(r){return null}}function ht(e){var t=e.cssText;if(pt(e))try{t=Ne(e.styleSheet)||t}catch(r){}return t}function pt(e){return"styleSheet"in e}function mt(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function vt(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var se,We,yt=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,gt=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,bt=/^(data:)([^,]*),(.*)/i;function ge(e,t){return(e||"").replace(yt,function(r,i,o,a,n,s){var l=o||n||s,u=i||a||"";if(!l)return r;if(!gt.test(l)||bt.test(l))return"url("+u+l+u+")";if(l[0]==="/")return"url("+u+(vt(t)+l)+u+")";var f=t.split("/"),d=l.split("/");f.pop();for(var g=0,y=d;g<y.length;g++){var T=y[g];T!=="."&&(T===".."?f.pop():f.push(T))}return"url("+u+f.join("/")+u+")"})}var St=/^[^ \t\n\r\u000c]+/,wt=/^[, \t\n\r\u000c]+/;function Tt(e,t){if(t.trim()==="")return t;var r=0;function i(u){var f,d=u.exec(t.substring(r));return d?(f=d[0],r+=f.length,f):""}for(var o=[];i(wt),!(r>=t.length);){var a=i(St);if(a.slice(-1)===",")a=le(e,a.substring(0,a.length-1)),o.push(a);else{var n="";a=le(e,a);for(var s=!1;;){var l=t.charAt(r);if(l===""){o.push((a+n).trim());break}else if(s)l===")"&&(s=!1);else if(l===","){r+=1,o.push((a+n).trim());break}else l==="("&&(s=!0);n+=l,r+=1}}}return o.join(", ")}function le(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function xt(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function Ae(){var e=document.createElement("a");return e.href="",e.href}function Et(e,t,r,i){return r==="src"||r==="href"&&i||r==="xlink:href"&&i&&i[0]!=="#"||r==="background"&&i&&(t==="table"||t==="td"||t==="th")?le(e,i):r==="srcset"&&i?Tt(e,i):r==="style"&&i?ge(i,Ae()):t==="object"&&r==="data"&&i?le(e,i):i}function Ct(e,t,r){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var i=0;i<e.classList.length;i++){var o=e.classList[i];if(t.test(o))return!0}return r?e.matches(r):!1}function be(e,t,r){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if(typeof t=="string"){if(e.classList.contains(t))return!0}else e.classList.forEach(function(i){if(t.test(i))return!0});return r&&e.matches(r)?!0:be(e.parentNode,t,r)}return e.nodeType===e.TEXT_NODE,be(e.parentNode,t,r)}function Mt(e,t,r){var i=e.contentWindow;if(!!i){var o=!1,a;try{a=i.document.readyState}catch(l){return}if(a!=="complete"){var n=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(n),o=!0,t()});return}var s="about:blank";if(i.location.href!==s||e.src===s||e.src===""){setTimeout(t,0);return}e.addEventListener("load",t)}}function kt(e,t){var r,i=t.doc,o=t.blockClass,a=t.blockSelector,n=t.maskTextClass,s=t.maskTextSelector,l=t.inlineStylesheet,u=t.maskInputOptions,f=u===void 0?{}:u,d=t.maskTextFn,g=t.maskInputFn,y=t.dataURLOptions,T=y===void 0?{}:y,S=t.inlineImages,h=t.recordCanvas,c=t.keepIframeSrcFn,m;if(i.__sn){var E=i.__sn.id;m=E===1?void 0:E}switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:L.Document,childNodes:[],compatMode:e.compatMode,rootId:m}:{type:L.Document,childNodes:[],rootId:m};case e.DOCUMENT_TYPE_NODE:return{type:L.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:m};case e.ELEMENT_NODE:for(var w=Ct(e,o,a),v=dt(e),b={},C=0,k=Array.from(e.attributes);C<k.length;C++){var N=k[C],R=N.name,I=N.value;b[R]=Et(i,v,R,I)}if(v==="link"&&l){var A=Array.from(i.styleSheets).find(function(ie){return ie.href===e.href}),P=null;A&&(P=Ne(A)),P&&(delete b.rel,delete b.href,b._cssText=ge(P,A.href))}if(v==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var P=Ne(e.sheet);P&&(b._cssText=ge(P,Ae()))}if(v==="input"||v==="textarea"||v==="select"){var I=e.value;b.type!=="radio"&&b.type!=="checkbox"&&b.type!=="submit"&&b.type!=="button"&&I?b.value=ae({type:b.type,tagName:v,value:I,maskInputOptions:f,maskInputFn:g}):e.checked&&(b.checked=e.checked)}if(v==="option"&&(e.selected&&!f.select?b.selected=!0:delete b.selected),v==="canvas"&&h){if(e.__context==="2d")lt(e)||(b.rr_dataURL=e.toDataURL(T.type,T.quality));else if(!("__context"in e)){var H=e.toDataURL(T.type,T.quality),G=document.createElement("canvas");G.width=e.width,G.height=e.height;var V=G.toDataURL(T.type,T.quality);H!==V&&(b.rr_dataURL=H)}}if(v==="img"&&S){se||(se=i.createElement("canvas"),We=se.getContext("2d"));var M=e,Z=M.crossOrigin;M.crossOrigin="anonymous";var x=function(){try{se.width=M.naturalWidth,se.height=M.naturalHeight,We.drawImage(M,0,0),b.rr_dataURL=se.toDataURL(T.type,T.quality)}catch(ie){console.warn("Cannot inline img src="+M.currentSrc+"! Error: "+ie)}Z?b.crossOrigin=Z:delete b.crossOrigin};M.complete&&M.naturalWidth!==0?x():M.onload=x}if((v==="audio"||v==="video")&&(b.rr_mediaState=e.paused?"paused":"played",b.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop),w){var p=e.getBoundingClientRect(),O=p.width,W=p.height;b={class:b.class,rr_width:O+"px",rr_height:W+"px"}}return v==="iframe"&&!c(b.src)&&(e.contentDocument||(b.rr_src=b.src),delete b.src),{type:L.Element,tagName:v,attributes:b,childNodes:[],isSVG:xt(e)||void 0,needBlock:w,rootId:m};case e.TEXT_NODE:var z=e.parentNode&&e.parentNode.tagName,X=e.textContent,he=z==="STYLE"?!0:void 0,pe=z==="SCRIPT"?!0:void 0;if(he&&X){try{!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(X=mt(e.parentNode.sheet))}catch(ie){console.warn("Cannot get CSS styles from text's parentNode. Error: "+ie,e)}X=ge(X,Ae())}return pe&&(X="SCRIPT_PLACEHOLDER"),!he&&!pe&&be(e,n,s)&&X&&(X=d?d(X):X.replace(/[\S]/g,"*")),{type:L.Text,textContent:X||"",isStyle:he,rootId:m};case e.CDATA_SECTION_NODE:return{type:L.CDATA,textContent:"",rootId:m};case e.COMMENT_NODE:return{type:L.Comment,textContent:e.textContent||"",rootId:m};default:return!1}}function j(e){return e===void 0?"":e.toLowerCase()}function It(e,t){if(t.comment&&e.type===L.Comment)return!0;if(e.type===L.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(j(e.attributes.name).match(/^msapplication-tile(image|color)$/)||j(e.attributes.name)==="application-name"||j(e.attributes.rel)==="icon"||j(e.attributes.rel)==="apple-touch-icon"||j(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&j(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(j(e.attributes.property).match(/^(og|twitter|fb):/)||j(e.attributes.name).match(/^(og|twitter):/)||j(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(j(e.attributes.name)==="robots"||j(e.attributes.name)==="googlebot"||j(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(j(e.attributes.name)==="author"||j(e.attributes.name)==="generator"||j(e.attributes.name)==="framework"||j(e.attributes.name)==="publisher"||j(e.attributes.name)==="progid"||j(e.attributes.property).match(/^article:/)||j(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(j(e.attributes.name)==="google-site-verification"||j(e.attributes.name)==="yandex-verification"||j(e.attributes.name)==="csrf-token"||j(e.attributes.name)==="p:domain_verify"||j(e.attributes.name)==="verify-v1"||j(e.attributes.name)==="verification"||j(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Se(e,t){var r=t.doc,i=t.map,o=t.blockClass,a=t.blockSelector,n=t.maskTextClass,s=t.maskTextSelector,l=t.skipChild,u=l===void 0?!1:l,f=t.inlineStylesheet,d=f===void 0?!0:f,g=t.maskInputOptions,y=g===void 0?{}:g,T=t.maskTextFn,S=t.maskInputFn,h=t.slimDOMOptions,c=t.dataURLOptions,m=c===void 0?{}:c,E=t.inlineImages,w=E===void 0?!1:E,v=t.recordCanvas,b=v===void 0?!1:v,C=t.onSerialize,k=t.onIframeLoad,N=t.iframeLoadTimeout,R=N===void 0?5e3:N,I=t.keepIframeSrcFn,A=I===void 0?function(){return!1}:I,P=t.preserveWhiteSpace,H=P===void 0?!0:P,G=kt(e,{doc:r,blockClass:o,blockSelector:a,maskTextClass:n,maskTextSelector:s,inlineStylesheet:d,maskInputOptions:y,maskTextFn:T,maskInputFn:S,dataURLOptions:m,inlineImages:w,recordCanvas:b,keepIframeSrcFn:A});if(!G)return console.warn(e,"not serialized"),null;var V;"__sn"in e?V=e.__sn.id:It(G,h)||!H&&G.type===L.Text&&!G.isStyle&&!G.textContent.replace(/^\s+|\s+$/gm,"").length?V=Ie:V=ft();var M=Object.assign(G,{id:V});if(e.__sn=M,V===Ie)return null;i[V]=e,C&&C(e);var Z=!u;if(M.type===L.Element&&(Z=Z&&!M.needBlock,delete M.needBlock),(M.type===L.Document||M.type===L.Element)&&Z){h.headWhitespace&&G.type===L.Element&&G.tagName==="head"&&(H=!1);for(var x={doc:r,map:i,blockClass:o,blockSelector:a,maskTextClass:n,maskTextSelector:s,skipChild:u,inlineStylesheet:d,maskInputOptions:y,maskTextFn:T,maskInputFn:S,slimDOMOptions:h,dataURLOptions:m,inlineImages:w,recordCanvas:b,preserveWhiteSpace:H,onSerialize:C,onIframeLoad:k,iframeLoadTimeout:R,keepIframeSrcFn:A},p=0,O=Array.from(e.childNodes);p<O.length;p++){var W=O[p],z=Se(W,x);z&&M.childNodes.push(z)}if(me(e)&&e.shadowRoot){M.isShadowHost=!0;for(var X=0,he=Array.from(e.shadowRoot.childNodes);X<he.length;X++){var W=he[X],z=Se(W,x);z&&(z.isShadow=!0,M.childNodes.push(z))}}}return e.parentNode&&re(e.parentNode)&&(M.isShadow=!0),M.type===L.Element&&M.tagName==="iframe"&&Mt(e,function(){var pe=e.contentDocument;if(pe&&k){var ie=Se(pe,{doc:pe,map:i,blockClass:o,blockSelector:a,maskTextClass:n,maskTextSelector:s,skipChild:!1,inlineStylesheet:d,maskInputOptions:y,maskTextFn:T,maskInputFn:S,slimDOMOptions:h,dataURLOptions:m,inlineImages:w,recordCanvas:b,preserveWhiteSpace:H,onSerialize:C,onIframeLoad:k,iframeLoadTimeout:R,keepIframeSrcFn:A});ie&&k(e,ie)}},R),M}function pr(e,t){var r=t||{},i=r.blockClass,o=i===void 0?"rr-block":i,a=r.blockSelector,n=a===void 0?null:a,s=r.maskTextClass,l=s===void 0?"rr-mask":s,u=r.maskTextSelector,f=u===void 0?null:u,d=r.inlineStylesheet,g=d===void 0?!0:d,y=r.inlineImages,T=y===void 0?!1:y,S=r.recordCanvas,h=S===void 0?!1:S,c=r.maskAllInputs,m=c===void 0?!1:c,E=r.maskTextFn,w=r.maskInputFn,v=r.slimDOM,b=v===void 0?!1:v,C=r.dataURLOptions,k=r.preserveWhiteSpace,N=r.onSerialize,R=r.onIframeLoad,I=r.iframeLoadTimeout,A=r.keepIframeSrcFn,P=A===void 0?function(){return!1}:A,H={},G=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:m===!1?{password:!0}:m,V=b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b;return[Se(e,{doc:e,map:H,blockClass:o,blockSelector:n,maskTextClass:l,maskTextSelector:f,skipChild:!1,inlineStylesheet:g,maskInputOptions:G,maskTextFn:E,maskInputFn:w,slimDOMOptions:V,dataURLOptions:C,inlineImages:T,recordCanvas:h,preserveWhiteSpace:k,onSerialize:N,onIframeLoad:R,iframeLoadTimeout:I,keepIframeSrcFn:P}),H]}var je=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function Nt(e,t){t===void 0&&(t={});var r=1,i=1;function o(x){var p=x.match(/\n/g);p&&(r+=p.length);var O=x.lastIndexOf(`
`);i=O===-1?i+x.length:x.length-O}function a(){var x={line:r,column:i};return function(p){return p.position=new n(x),T(),p}}var n=function(){function x(p){this.start=p,this.end={line:r,column:i},this.source=t.source}return x}();n.prototype.content=e;var s=[];function l(x){var p=new Error(t.source+":"+r+":"+i+": "+x);if(p.reason=x,p.filename=t.source,p.line=r,p.column=i,p.source=e,t.silent)s.push(p);else throw p}function u(){var x=g();return{type:"stylesheet",stylesheet:{source:t.source,rules:x,parsingErrors:s}}}function f(){return y(/^{\s*/)}function d(){return y(/^}/)}function g(){var x,p=[];for(T(),S(p);e.length&&e.charAt(0)!=="}"&&(x=M()||Z());)x!==!1&&(p.push(x),S(p));return p}function y(x){var p=x.exec(e);if(!!p){var O=p[0];return o(O),e=e.slice(O.length),p}}function T(){y(/^\s*/)}function S(x){x===void 0&&(x=[]);for(var p;p=h();)p!==!1&&x.push(p),p=h();return x}function h(){var x=a();if(!(e.charAt(0)!=="/"||e.charAt(1)!=="*")){for(var p=2;e.charAt(p)!==""&&(e.charAt(p)!=="*"||e.charAt(p+1)!=="/");)++p;if(p+=2,e.charAt(p-1)==="")return l("End of comment missing");var O=e.slice(2,p-2);return i+=2,o(O),e=e.slice(p),i+=2,x({type:"comment",comment:O})}}function c(){var x=y(/^([^{]+)/);if(!!x)return _(x[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(p){return p.replace(/,/g,"\u200C")}).split(/\s*(?![^(]*\)),\s*/).map(function(p){return p.replace(/\u200C/g,",")})}function m(){var x=a(),p=y(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!!p){var O=_(p[0]);if(!y(/^:\s*/))return l("property missing ':'");var W=y(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),z=x({type:"declaration",property:O.replace(je,""),value:W?_(W[0]).replace(je,""):""});return y(/^[;\s]*/),z}}function E(){var x=[];if(!f())return l("missing '{'");S(x);for(var p;p=m();)p!==!1&&(x.push(p),S(x)),p=m();return d()?x:l("missing '}'")}function w(){for(var x,p=[],O=a();x=y(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)p.push(x[1]),y(/^,\s*/);if(!!p.length)return O({type:"keyframe",values:p,declarations:E()})}function v(){var x=a(),p=y(/^@([-\w]+)?keyframes\s*/);if(!!p){var O=p[1];if(p=y(/^([-\w]+)\s*/),!p)return l("@keyframes missing name");var W=p[1];if(!f())return l("@keyframes missing '{'");for(var z,X=S();z=w();)X.push(z),X=X.concat(S());return d()?x({type:"keyframes",name:W,vendor:O,keyframes:X}):l("@keyframes missing '}'")}}function b(){var x=a(),p=y(/^@supports *([^{]+)/);if(!!p){var O=_(p[1]);if(!f())return l("@supports missing '{'");var W=S().concat(g());return d()?x({type:"supports",supports:O,rules:W}):l("@supports missing '}'")}}function C(){var x=a(),p=y(/^@host\s*/);if(!!p){if(!f())return l("@host missing '{'");var O=S().concat(g());return d()?x({type:"host",rules:O}):l("@host missing '}'")}}function k(){var x=a(),p=y(/^@media *([^{]+)/);if(!!p){var O=_(p[1]);if(!f())return l("@media missing '{'");var W=S().concat(g());return d()?x({type:"media",media:O,rules:W}):l("@media missing '}'")}}function N(){var x=a(),p=y(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(!!p)return x({type:"custom-media",name:_(p[1]),media:_(p[2])})}function R(){var x=a(),p=y(/^@page */);if(!!p){var O=c()||[];if(!f())return l("@page missing '{'");for(var W=S(),z;z=m();)W.push(z),W=W.concat(S());return d()?x({type:"page",selectors:O,declarations:W}):l("@page missing '}'")}}function I(){var x=a(),p=y(/^@([-\w]+)?document *([^{]+)/);if(!!p){var O=_(p[1]),W=_(p[2]);if(!f())return l("@document missing '{'");var z=S().concat(g());return d()?x({type:"document",document:W,vendor:O,rules:z}):l("@document missing '}'")}}function A(){var x=a(),p=y(/^@font-face\s*/);if(!!p){if(!f())return l("@font-face missing '{'");for(var O=S(),W;W=m();)O.push(W),O=O.concat(S());return d()?x({type:"font-face",declarations:O}):l("@font-face missing '}'")}}var P=V("import"),H=V("charset"),G=V("namespace");function V(x){var p=new RegExp("^@"+x+"\\s*([^;]+);");return function(){var O=a(),W=y(p);if(!!W){var z={type:x};return z[x]=W[1].trim(),O(z)}}}function M(){if(e[0]==="@")return v()||k()||N()||b()||P()||H()||G()||I()||R()||C()||A()}function Z(){var x=a(),p=c();return p?(S(),x({type:"rule",selectors:p,declarations:E()})):l("selector missing")}return Le(u())}function _(e){return e?e.replace(/^\s+|\s+$/g,""):""}function Le(e,t){for(var r=e&&typeof e.type=="string",i=r?e:t,o=0,a=Object.keys(e);o<a.length;o++){var n=a[o],s=e[n];Array.isArray(s)?s.forEach(function(l){Le(l,i)}):s&&typeof s=="object"&&Le(s,i)}return r&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var Ue={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function At(e){var t=Ue[e.tagName]?Ue[e.tagName]:e.tagName;return t==="link"&&e.attributes._cssText&&(t="style"),t}function Lt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var Be=/([^\\]):hover/,Ot=new RegExp(Be.source,"g");function He(e,t){var r=t==null?void 0:t.stylesWithHoverClass.get(e);if(r)return r;var i=Nt(e,{silent:!0});if(!i.stylesheet)return e;var o=[];if(i.stylesheet.rules.forEach(function(s){"selectors"in s&&(s.selectors||[]).forEach(function(l){Be.test(l)&&o.push(l)})}),o.length===0)return e;var a=new RegExp(o.filter(function(s,l){return o.indexOf(s)===l}).sort(function(s,l){return l.length-s.length}).map(function(s){return Lt(s)}).join("|"),"g"),n=e.replace(a,function(s){var l=s.replace(Ot,"$1.\\:hover");return s+", "+l});return t==null||t.stylesWithHoverClass.set(e,n),n}function Ge(){var e=new Map;return{stylesWithHoverClass:e}}function Rt(e,t){var r=t.doc,i=t.hackCss,o=t.cache;switch(e.type){case L.Document:return r.implementation.createDocument(null,"",null);case L.DocumentType:return r.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case L.Element:var a=At(e),n;e.isSVG?n=r.createElementNS("http://www.w3.org/2000/svg",a):n=r.createElement(a);var s=function(u){if(!e.attributes.hasOwnProperty(u))return"continue";var f=e.attributes[u];if(a==="option"&&u==="selected"&&f===!1)return"continue";if(f=typeof f=="boolean"||typeof f=="number"?"":f,u.startsWith("rr_")){if(a==="canvas"&&u==="rr_dataURL"){var c=document.createElement("img");c.src=f,c.onload=function(){var E=n.getContext("2d");E&&E.drawImage(c,0,0,c.width,c.height)}}else if(a==="img"&&u==="rr_dataURL"){var m=n;m.currentSrc.startsWith("data:")||(m.setAttribute("rrweb-original-src",e.attributes.src),m.src=f)}if(u==="rr_width")n.style.width=f;else if(u==="rr_height")n.style.height=f;else if(u==="rr_mediaCurrentTime")n.currentTime=e.attributes.rr_mediaCurrentTime;else if(u==="rr_mediaState")switch(f){case"played":n.play().catch(function(E){return console.warn("media playback error",E)});break;case"paused":n.pause();break}}else{var d=a==="textarea"&&u==="value",g=a==="style"&&u==="_cssText";if(g&&i&&(f=He(f,o)),d||g){for(var y=r.createTextNode(f),T=0,S=Array.from(n.childNodes);T<S.length;T++){var h=S[T];h.nodeType===n.TEXT_NODE&&n.removeChild(h)}return n.appendChild(y),"continue"}try{if(e.isSVG&&u==="xlink:href")n.setAttributeNS("http://www.w3.org/1999/xlink",u,f);else if(u==="onload"||u==="onclick"||u.substring(0,7)==="onmouse")n.setAttribute("_"+u,f);else{if(a==="meta"&&e.attributes["http-equiv"]==="Content-Security-Policy"&&u==="content")return n.setAttribute("csp-content",f),"continue";a==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||a==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")||(a==="img"&&e.attributes.srcset&&e.attributes.rr_dataURL?n.setAttribute("rrweb-original-srcset",e.attributes.srcset):n.setAttribute(u,f))}}catch(E){}}};for(var l in e.attributes)s(l);if(e.isShadowHost)if(!n.shadowRoot)n.attachShadow({mode:"open"});else for(;n.shadowRoot.firstChild;)n.shadowRoot.removeChild(n.shadowRoot.firstChild);return n;case L.Text:return r.createTextNode(e.isStyle&&i?He(e.textContent,o):e.textContent);case L.CDATA:return r.createCDATASection(e.textContent);case L.Comment:return r.createComment(e.textContent);default:return null}}function we(e,t){var r=t.doc,i=t.map,o=t.skipChild,a=o===void 0?!1:o,n=t.hackCss,s=n===void 0?!0:n,l=t.afterAppend,u=t.cache,f=Rt(e,{doc:r,hackCss:s,cache:u});if(!f)return null;if(e.rootId&&console.assert(i[e.rootId]===r,"Target document should has the same root id."),e.type===L.Document&&(r.close(),r.open(),e.compatMode==="BackCompat"&&e.childNodes&&e.childNodes[0].type!==L.DocumentType&&(e.childNodes[0].type===L.Element&&"xmlns"in e.childNodes[0].attributes&&e.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),f=r),f.__sn=e,i[e.id]=f,(e.type===L.Document||e.type===L.Element)&&!a)for(var d=0,g=e.childNodes;d<g.length;d++){var y=g[d],T=we(y,{doc:r,map:i,skipChild:!1,hackCss:s,afterAppend:l,cache:u});if(!T){console.warn("Failed to rebuild",y);continue}y.isShadow&&me(f)&&f.shadowRoot?f.shadowRoot.appendChild(T):f.appendChild(T),l&&l(T)}return f}function Dt(e,t){function r(o){t(o)}for(var i in e)e[i]&&r(e[i])}function Pt(e){var t=e.__sn;if(t.type===L.Element){var r=e;for(var i in t.attributes)if(!!(t.attributes.hasOwnProperty(i)&&i.startsWith("rr_"))){var o=t.attributes[i];i==="rr_scrollLeft"&&(r.scrollLeft=o),i==="rr_scrollTop"&&(r.scrollTop=o)}}}function Ft(e,t){var r=t.doc,i=t.onVisit,o=t.hackCss,a=o===void 0?!0:o,n=t.afterAppend,s=t.cache,l={},u=we(e,{doc:r,map:l,skipChild:!1,hackCss:a,afterAppend:n,cache:s});return Dt(l,function(f){i&&i(f),Pt(f)}),[u,l]}function Wt(e){return e=e||Object.create(null),{on:function(r,i){(e[r]||(e[r]=[])).push(i)},off:function(r,i){e[r]&&e[r].splice(e[r].indexOf(i)>>>0,1)},emit:function(r,i){(e[r]||[]).slice().map(function(o){o(i)}),(e["*"]||[]).slice().map(function(o){o(r,i)})}}}var ze=Wt;function jt(e,t){if(e===void 0&&(e=window),t===void 0&&(t=document),"scrollBehavior"in t.documentElement.style&&e.__forceSmoothScrollPolyfill__!==!0)return;var r=e.HTMLElement||e.Element,i=468,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||l,scrollIntoView:r.prototype.scrollIntoView},a=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;function n(c){var m=["MSIE ","Trident/","Edge/"];return new RegExp(m.join("|")).test(c)}var s=n(e.navigator.userAgent)?1:0;function l(c,m){this.scrollLeft=c,this.scrollTop=m}function u(c){return .5*(1-Math.cos(Math.PI*c))}function f(c){if(c===null||typeof c!="object"||c.behavior===void 0||c.behavior==="auto"||c.behavior==="instant")return!0;if(typeof c=="object"&&c.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+c.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(c,m){if(m==="Y")return c.clientHeight+s<c.scrollHeight;if(m==="X")return c.clientWidth+s<c.scrollWidth}function g(c,m){var E=e.getComputedStyle(c,null)["overflow"+m];return E==="auto"||E==="scroll"}function y(c){var m=d(c,"Y")&&g(c,"Y"),E=d(c,"X")&&g(c,"X");return m||E}function T(c){for(;c!==t.body&&y(c)===!1;)c=c.parentNode||c.host;return c}function S(c){var m=a(),E,w,v,b=(m-c.startTime)/i;b=b>1?1:b,E=u(b),w=c.startX+(c.x-c.startX)*E,v=c.startY+(c.y-c.startY)*E,c.method.call(c.scrollable,w,v),(w!==c.x||v!==c.y)&&e.requestAnimationFrame(S.bind(e,c))}function h(c,m,E){var w,v,b,C,k=a();c===t.body?(w=e,v=e.scrollX||e.pageXOffset,b=e.scrollY||e.pageYOffset,C=o.scroll):(w=c,v=c.scrollLeft,b=c.scrollTop,C=l),S({scrollable:w,method:C,startTime:k,startX:v,startY:b,x:m,y:E})}e.scroll=e.scrollTo=function(){if(arguments[0]!==void 0){if(f(arguments[0])===!0){o.scroll.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:e.scrollY||e.pageYOffset);return}h.call(e,t.body,arguments[0].left!==void 0?~~arguments[0].left:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:e.scrollY||e.pageYOffset)}},e.scrollBy=function(){if(arguments[0]!==void 0){if(f(arguments[0])){o.scrollBy.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}h.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]!==void 0){if(f(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}var c=arguments[0].left,m=arguments[0].top;h.call(this,this,typeof c=="undefined"?this.scrollLeft:~~c,typeof m=="undefined"?this.scrollTop:~~m)}},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(f(arguments[0])===!0){o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(f(arguments[0])===!0){o.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}var c=T(this),m=c.getBoundingClientRect(),E=this.getBoundingClientRect();c!==t.body?(h.call(this,c,c.scrollLeft+E.left-m.left,c.scrollTop+E.top-m.top),e.getComputedStyle(c).position!=="fixed"&&e.scrollBy({left:m.left,top:m.top,behavior:"smooth"})):e.scrollBy({left:E.left,top:E.top,behavior:"smooth"})}}var B;(function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"})(B||(B={}));var U;(function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"})(U||(U={}));var Q;(function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"})(Q||(Q={}));var ve;(function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"})(ve||(ve={}));var Ve;(function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"})(Ve||(Ve={}));var D;(function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"})(D||(D={}));var Ut=function(){function e(t,r){t===void 0&&(t=[]),this.timeOffset=0,this.raf=null,this.actions=t,this.speed=r}return e.prototype.addAction=function(t){var r=this.findActionIndex(t);this.actions.splice(r,0,t)},e.prototype.addActions=function(t){this.actions=this.actions.concat(t)},e.prototype.start=function(){this.timeOffset=0;var t=performance.now(),r=this.actions,i=this;function o(){var a=performance.now();for(i.timeOffset+=(a-t)*i.speed,t=a;r.length;){var n=r[0];if(i.timeOffset>=n.delay)r.shift(),n.doAction();else break}(r.length>0||i.liveMode)&&(i.raf=requestAnimationFrame(o))}this.raf=requestAnimationFrame(o)},e.prototype.clear=function(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0},e.prototype.setSpeed=function(t){this.speed=t},e.prototype.toggleLiveMode=function(t){this.liveMode=t},e.prototype.isActive=function(){return this.raf!==null},e.prototype.findActionIndex=function(t){for(var r=0,i=this.actions.length-1;r<=i;){var o=Math.floor((r+i)/2);if(this.actions[o].delay<t.delay)r=o+1;else if(this.actions[o].delay>t.delay)i=o-1;else return o+1}return r},e}();function Ye(e,t){if(e.type===B.IncrementalSnapshot&&e.data.source===U.MouseMove){var r=e.data.positions[0].timeOffset,i=e.timestamp+r;return e.delay=i-t,i-t}return e.delay=e.timestamp-t,e.delay}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Xe(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i,o,a=r.call(e),n=[];try{for(;(t===void 0||t-- >0)&&!(i=a.next()).done;)n.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return n}var ue;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(ue||(ue={}));var qe={type:"xstate.init"};function Oe(e){return e===void 0?[]:[].concat(e)}function ce(e){return{type:"xstate.assign",assignment:e}}function Qe(e,t){return typeof(e=typeof e=="string"&&t&&t[e]?t[e]:e)=="string"?{type:e}:typeof e=="function"?{type:e.name,exec:e}:e}function Te(e){return function(t){return e===t}}function Ke(e){return typeof e=="string"?{type:e}:e}function $e(e,t){return{value:e,context:t,actions:[],changed:!1,matches:Te(e)}}function Je(e,t,r){var i=t,o=!1;return[e.filter(function(a){if(a.type==="xstate.assign"){o=!0;var n=Object.assign({},i);return typeof a.assignment=="function"?n=a.assignment(i,r):Object.keys(a.assignment).forEach(function(s){n[s]=typeof a.assignment[s]=="function"?a.assignment[s](i,r):a.assignment[s]}),i=n,!1}return!0}),i,o]}function Ze(e,t){t===void 0&&(t={});var r=Xe(Je(Oe(e.states[e.initial].entry).map(function(n){return Qe(n,t.actions)}),e.context,qe),2),i=r[0],o=r[1],a={config:e,_options:t,initialState:{value:e.initial,actions:i,context:o,matches:Te(e.initial)},transition:function(n,s){var l,u,f=typeof n=="string"?{value:n,context:e.context}:n,d=f.value,g=f.context,y=Ke(s),T=e.states[d];if(T.on){var S=Oe(T.on[y.type]);try{for(var h=function(M){var Z=typeof Symbol=="function"&&Symbol.iterator,x=Z&&M[Z],p=0;if(x)return x.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&p>=M.length&&(M=void 0),{value:M&&M[p++],done:!M}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(S),c=h.next();!c.done;c=h.next()){var m=c.value;if(m===void 0)return $e(d,g);var E=typeof m=="string"?{target:m}:m,w=E.target,v=E.actions,b=v===void 0?[]:v,C=E.cond,k=C===void 0?function(){return!0}:C,N=w===void 0,R=w!=null?w:d,I=e.states[R];if(k(g,y)){var A=Xe(Je((N?Oe(b):[].concat(T.exit,b,I.entry).filter(function(M){return M})).map(function(M){return Qe(M,a._options.actions)}),g,y),3),P=A[0],H=A[1],G=A[2],V=w!=null?w:d;return{value:V,context:H,actions:P,changed:w!==d||P.length>0||G,matches:Te(V)}}}}catch(M){l={error:M}}finally{try{c&&!c.done&&(u=h.return)&&u.call(h)}finally{if(l)throw l.error}}}return $e(d,g)}};return a}var _e=function(e,t){return e.actions.forEach(function(r){var i=r.exec;return i&&i(e.context,t)})};function et(e){var t=e.initialState,r=ue.NotStarted,i=new Set,o={_machine:e,send:function(a){r===ue.Running&&(t=e.transition(t,a),_e(t,Ke(a)),i.forEach(function(n){return n(t)}))},subscribe:function(a){return i.add(a),a(t),{unsubscribe:function(){return i.delete(a)}}},start:function(a){if(a){var n=typeof a=="object"?a:{context:e.config.context,value:a};t={value:n.value,actions:[],context:n.context,matches:Te(n.value)}}return r=ue.Running,_e(t,qe),o},stop:function(){return r=ue.Stopped,i.clear(),o},get state(){return t},get status(){return r}};return o}function Bt(e,t){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.type===B.Meta&&i.timestamp<=t)return e.slice(r)}return e}function Ht(e,t){var r=t.getCastFn,i=t.applyEventsSynchronously,o=t.emitter,a=Ze({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:ce({lastPlayedEvent:function(n,s){return s.type==="CAST_EVENT"?s.payload.event:n.lastPlayedEvent}}),recordTimeOffset:ce(function(n,s){var l=n.timeOffset;return"payload"in s&&"timeOffset"in s.payload&&(l=s.payload.timeOffset),Y(Y({},n),{timeOffset:l,baselineTime:n.events[0].timestamp+l})}),play:function(n){var s,l,u,f,d,g=n.timer,y=n.events,T=n.baselineTime,S=n.lastPlayedEvent;g.clear();try{for(var h=F(y),c=h.next();!c.done;c=h.next()){var m=c.value;Ye(m,T)}}catch(I){s={error:I}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}var E=Bt(y,T),w=S==null?void 0:S.timestamp;(S==null?void 0:S.type)===B.IncrementalSnapshot&&S.data.source===U.MouseMove&&(w=S.timestamp+((d=S.data.positions[0])===null||d===void 0?void 0:d.timeOffset)),T<(w||0)&&o.emit(D.PlayBack);var v=new Array,b=new Array,C=function(I){if(w&&w<T&&(I.timestamp<=w||I===S))return"continue";if(I.timestamp<T)v.push(I);else{var A=r(I,!1);b.push({doAction:function(){A()},delay:I.delay})}};try{for(var k=F(E),N=k.next();!N.done;N=k.next()){var R=N.value;C(R)}}catch(I){u={error:I}}finally{try{N&&!N.done&&(f=k.return)&&f.call(k)}finally{if(u)throw u.error}}i(v),o.emit(D.Flush),g.addActions(b),g.start()},pause:function(n){n.timer.clear()},resetLastPlayedEvent:ce(function(n){return Y(Y({},n),{lastPlayedEvent:null})}),startLive:ce({baselineTime:function(n,s){return n.timer.toggleLiveMode(!0),n.timer.start(),s.type==="TO_LIVE"&&s.payload.baselineTime?s.payload.baselineTime:Date.now()}}),addEvent:ce(function(n,s){var l=n.baselineTime,u=n.timer,f=n.events;if(s.type==="ADD_EVENT"){var d=s.payload.event;Ye(d,l);var g=f.length-1;if(!f[g]||f[g].timestamp<=d.timestamp)f.push(d);else{for(var y=-1,T=0;T<=g;){var S=Math.floor((T+g)/2);f[S].timestamp<=d.timestamp?T=S+1:g=S-1}y===-1&&(y=T),f.splice(y,0,d)}var h=d.timestamp<l,c=r(d,h);h?c():u.isActive()&&u.addAction({doAction:function(){c()},delay:d.delay})}return Y(Y({},n),{events:f})})}});return et(a)}function Gt(e){var t=Ze({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:function(r,i){"payload"in i&&r.timer.setSpeed(i.payload.speed)},recordSpeed:ce({normalSpeed:function(r){return r.timer.speed}}),restoreSpeed:function(r){r.timer.setSpeed(r.normalSpeed)}}});return et(t)}function mr(e,t,r){r===void 0&&(r=document);var i={capture:!0,passive:!0};return r.addEventListener(e,t,i),function(){return r.removeEventListener(e,t,i)}}function zt(){return{map:{},getId:function(e){return!e||!e.__sn?-1:e.__sn.id},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,r=e.__sn&&e.__sn.id;delete this.map[r],e.childNodes&&e.childNodes.forEach(function(i){return t.removeNodeFromMap(i)})},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}}}var fe=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,tt={map:{},getId:function(){return console.error(fe),-1},getNode:function(){return console.error(fe),null},removeNodeFromMap:function(){console.error(fe)},has:function(){return console.error(fe),!1},reset:function(){console.error(fe)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(tt=new Proxy(tt,{get:function(e,t,r){return t==="map"&&console.error(fe),Reflect.get(e,t,r)}}));function vr(e,t,r){r===void 0&&(r={});var i=null,o=0;return function(a){var n=Date.now();!o&&r.leading===!1&&(o=n);var s=t-(n-o),l=this,u=arguments;s<=0||s>t?(i&&(clearTimeout(i),i=null),o=n,e.apply(l,u)):!i&&r.trailing!==!1&&(i=setTimeout(function(){o=r.leading===!1?0:Date.now(),i=null,e.apply(l,u)},s))}}function Vt(e,t,r,i,o){o===void 0&&(o=window);var a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,i?r:{set:function(n){var s=this;setTimeout(function(){r.set.call(s,n)},0),a&&a.set&&a.set.call(this,n)}}),function(){return Vt(e,t,a||{},!0)}}function yr(e,t,r){try{if(!(t in e))return function(){};var i=e[t],o=r(i);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=o,function(){e[t]=i}}catch(a){return function(){}}}function gr(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function br(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Re(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var r=!1;if(typeof t=="string"){if(e.closest!==void 0)return e.closest("."+t)!==null;r=e.classList.contains(t)}else e.classList.forEach(function(i){t.test(i)&&(r=!0)});return r||Re(e.parentNode,t)}return e.nodeType===e.TEXT_NODE,Re(e.parentNode,t)}function Sr(e){return"__sn"in e?e.__sn.id===Ie:!1}function Yt(e,t){if(re(e))return!1;var r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Yt(e.parentNode,t):!0:!0}function wr(e){return Boolean(e.changedTouches)}function Xt(e){e===void 0&&(e=window),"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(r){if(!(0 in arguments))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}var qt=function(){function e(){this.reset()}return e.prototype.add=function(t){var r=this.indexes.get(t.parentId),i={id:t.node.id,mutation:t,children:[],texts:[],attributes:[]};r?(i.parent=r,r.children[i.id]=i):this.tree[i.id]=i,this.indexes.set(i.id,i)},e.prototype.remove=function(t,r){var i=this,o=this.indexes.get(t.parentId),a=this.indexes.get(t.id),n=function(l){i.removeIdSet.add(l);var u=r.getNode(l);u==null||u.childNodes.forEach(function(f){"__sn"in f&&n(f.__sn.id)})},s=function(l){i.removeIdSet.add(l.id),Object.values(l.children).forEach(function(d){return s(d)});var u=i.indexes.get(l.id);if(u){var f=u.parent;f&&(delete u.parent,delete f.children[u.id],i.indexes.delete(t.id))}};a?o?(delete a.parent,delete o.children[a.id],this.indexes.delete(t.id),s(a)):(delete this.tree[a.id],this.indexes.delete(a.id),s(a)):(this.removeNodeMutations.push(t),n(t.id))},e.prototype.text=function(t){var r=this.indexes.get(t.id);r?r.texts.push(t):this.textMutations.push(t)},e.prototype.attribute=function(t){var r=this.indexes.get(t.id);r?r.attributes.push(t):this.attributeMutations.push(t)},e.prototype.scroll=function(t){this.scrollMap.set(t.id,t)},e.prototype.input=function(t){this.inputMap.set(t.id,t)},e.prototype.flush=function(){var t,r,i,o,a=this,n=this,s=n.tree,l=n.removeNodeMutations,u=n.textMutations,f=n.attributeMutations,d={source:U.Mutation,removes:l,texts:u,attributes:f,adds:[]},g=function(w,v){v&&a.removeIdSet.add(w.id),d.texts=d.texts.concat(v?[]:w.texts).filter(function(b){return!a.removeIdSet.has(b.id)}),d.attributes=d.attributes.concat(v?[]:w.attributes).filter(function(b){return!a.removeIdSet.has(b.id)}),!a.removeIdSet.has(w.id)&&!a.removeIdSet.has(w.mutation.parentId)&&!v?(d.adds.push(w.mutation),w.children&&Object.values(w.children).forEach(function(b){return g(b,!1)})):Object.values(w.children).forEach(function(b){return g(b,!0)})};Object.values(s).forEach(function(w){return g(w,!1)});try{for(var y=F(this.scrollMap.keys()),T=y.next();!T.done;T=y.next()){var S=T.value;this.removeIdSet.has(S)&&this.scrollMap.delete(S)}}catch(w){t={error:w}}finally{try{T&&!T.done&&(r=y.return)&&r.call(y)}finally{if(t)throw t.error}}try{for(var h=F(this.inputMap.keys()),c=h.next();!c.done;c=h.next()){var S=c.value;this.removeIdSet.has(S)&&this.inputMap.delete(S)}}catch(w){i={error:w}}finally{try{c&&!c.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var m=new Map(this.scrollMap),E=new Map(this.inputMap);return this.reset(),{mutationData:d,scrollMap:m,inputMap:E}},e.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},e.prototype.idRemoved=function(t){return this.removeIdSet.has(t)},e}();function Qt(e){var t,r,i={},o=function(T,S){var h={value:T,parent:S,children:[]};return i[T.node.id]=h,h},a=[];try{for(var n=F(e),s=n.next();!s.done;s=n.next()){var l=s.value,u=l.nextId,f=l.parentId;if(u&&u in i){var d=i[u];if(d.parent){var g=d.parent.children.indexOf(d);d.parent.children.splice(g,0,o(l,d.parent))}else{var g=a.indexOf(d);a.splice(g,0,o(l,null))}continue}if(f in i){var y=i[f];y.children.push(o(l,y));continue}a.push(o(l,null))}}catch(T){t={error:T}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return a}function rt(e,t){t(e.value);for(var r=e.children.length-1;r>=0;r--)rt(e.children[r],t)}function xe(e){return"__sn"in e?e.__sn.type===L.Element&&e.__sn.tagName==="iframe":!1}function it(e,t){var r,i,o=(i=(r=e.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};var a=o.getBoundingClientRect(),n=it(o,t),s=a.height/o.clientHeight;return{x:a.x*n.relativeScale+n.x,y:a.y*n.relativeScale+n.y,relativeScale:s,absoluteScale:n.absoluteScale*s}}function nt(e){var t;return Boolean((t=e)===null||t===void 0?void 0:t.shadowRoot)}var Kt=function(e){return["."+e+" { background: currentColor }","noscript { display: none !important; }"]},$t=Kt,J;(function(e){e[e.Insert=0]="Insert",e[e.Remove=1]="Remove",e[e.Snapshot=2]="Snapshot",e[e.SetProperty=3]="SetProperty",e[e.RemoveProperty=4]="RemoveProperty"})(J||(J={}));function ee(e,t){var r=e[t[0]];return t.length===1?r:ee(r.cssRules[t[1]].cssRules,t.slice(2))}function Ee(e){var t=q(e),r=t.pop();return{positions:t,index:r}}function Jt(e,t){var r=t.sheet;!r||e.forEach(function(i){if(i.type===J.Insert)try{if(Array.isArray(i.index)){var o=Ee(i.index),a=o.positions,n=o.index,s=ee(r.cssRules,a);s.insertRule(i.cssText,n)}else r.insertRule(i.cssText,i.index)}catch(f){}else if(i.type===J.Remove)try{if(Array.isArray(i.index)){var l=Ee(i.index),a=l.positions,n=l.index,s=ee(r.cssRules,a);s.deleteRule(n||0)}else r.deleteRule(i.index)}catch(f){}else if(i.type===J.Snapshot)Zt(i.cssTexts,t);else if(i.type===J.SetProperty){var u=ee(r.cssRules,i.index);u.style.setProperty(i.property,i.value,i.priority)}else if(i.type===J.RemoveProperty){var u=ee(r.cssRules,i.index);u.style.removeProperty(i.property)}})}function Zt(e,t){var r;try{var i=Array.from(((r=t.sheet)===null||r===void 0?void 0:r.cssRules)||[]).map(function(n){return n.cssText}),o=Object.entries(i).reverse(),a=i.length;o.forEach(function(n){var s,l=te(n,2),u=l[0],f=l[1],d=e.indexOf(f);if(d===-1||d>a)try{(s=t.sheet)===null||s===void 0||s.deleteRule(Number(u))}catch(g){}a=d}),e.forEach(function(n,s){var l,u,f;try{((u=(l=t.sheet)===null||l===void 0?void 0:l.cssRules[s])===null||u===void 0?void 0:u.cssText)!==n&&((f=t.sheet)===null||f===void 0||f.insertRule(n,s))}catch(d){}})}catch(n){}}function _t(e,t){var r;try{var i=Array.from(((r=e.sheet)===null||r===void 0?void 0:r.cssRules)||[]).map(function(o){return o.cssText});t.set(e,[{type:J.Snapshot,cssTexts:i}])}catch(o){}}for(var de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),Ce=0;Ce<de.length;Ce++)ye[de.charCodeAt(Ce)]=Ce;var Tr=function(e){var t=new Uint8Array(e),r,i=t.length,o="";for(r=0;r<i;r+=3)o+=de[t[r]>>2],o+=de[(t[r]&3)<<4|t[r+1]>>4],o+=de[(t[r+1]&15)<<2|t[r+2]>>6],o+=de[t[r+2]&63];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},er=function(e){var t=e.length*.75,r=e.length,i,o=0,a,n,s,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=new ArrayBuffer(t),f=new Uint8Array(u);for(i=0;i<r;i+=4)a=ye[e.charCodeAt(i)],n=ye[e.charCodeAt(i+1)],s=ye[e.charCodeAt(i+2)],l=ye[e.charCodeAt(i+3)],f[o++]=a<<2|n>>4,f[o++]=(n&15)<<4|s>>2,f[o++]=(s&3)<<6|l&63;return u},at=new Map;function ot(e,t){var r=at.get(e);return r||(r=new Map,at.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}function tr(e,t){try{return t===ve.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(r){return null}}var rr=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function ir(e,t){if(!!(t!=null&&t.constructor)){var r=t.constructor.name;if(!!rr.includes(r)){var i=ot(e,r);i.includes(t)||i.push(t)}}}function De(e,t){return function(r){if(r&&typeof r=="object"&&"rr_type"in r)if("index"in r){var i=r.rr_type,o=r.index;return ot(t,i)[o]}else if("args"in r){var a=r.rr_type,n=r.args,s=window[a];return new(s.bind.apply(s,q([void 0],n.map(De(e,t)))))}else{if("base64"in r)return er(r.base64);if("src"in r){var l=e.get(r.src);if(l)return l;var u=new Image;return u.src=r.src,e.set(r.src,u),u}}else if(Array.isArray(r))return r.map(De(e,t));return r}}function nr(e){var t=e.mutation,r=e.target,i=e.type,o=e.imageMap,a=e.errorHandler;try{var n=tr(r,i);if(!n)return;if(t.setter){n[t.property]=t.args[0];return}var s=n[t.property],l=t.args.map(De(o,n)),u=s.apply(n,l);ir(n,u);var f=!1;if(f){t.property==="compileShader"?n.getShaderParameter(l[0],n.COMPILE_STATUS)||console.warn("something went wrong in replay",n.getShaderInfoLog(l[0])):t.property==="linkProgram"&&(n.validateProgram(l[0]),n.getProgramParameter(l[0],n.LINK_STATUS)||console.warn("something went wrong in replay",n.getProgramInfoLog(l[0])));var d=n.getError();d!==n.NO_ERROR&&console.warn.apply(console,q(["WEBGL ERROR",d,"on command:",t.property],l))}}catch(g){a(t,g)}}var ar=nr;function or(e){var t=e.event,r=e.mutation,i=e.target,o=e.imageMap,a=e.errorHandler;try{var n=i.getContext("2d");if(r.setter){n[r.property]=r.args[0];return}var s=n[r.property];if(r.property==="drawImage"&&typeof r.args[0]=="string"){var l=o.get(t);r.args[0]=l,s.apply(n,r.args)}else s.apply(n,r.args)}catch(u){a(r,u)}}var sr=or;function lr(e){var t=e.event,r=e.mutation,i=e.target,o=e.imageMap,a=e.errorHandler;try{var n="commands"in r?r.commands:[r];return[ve.WebGL,ve.WebGL2].includes(r.type)?n.forEach(function(s){ar({mutation:s,type:r.type,target:i,imageMap:o,errorHandler:a})}):n.forEach(function(s){sr({event:t,mutation:s,target:i,imageMap:o,errorHandler:a})})}catch(s){a(r,s)}}var ur=lr,cr=10*1e3,fr=5*1e3,dr=ze||$,Me="[replayer]",Pe={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function st(e){return e.type==B.IncrementalSnapshot&&(e.data.source==U.TouchMove||e.data.source==U.MouseInteraction&&e.data.type==Q.TouchStart)}var hr=function(){function e(t,r){var i=this;if(this.mouseTail=null,this.tailPositions=[],this.emitter=dr(),this.legacy_missingNodeRetryMap={},this.cache=Ge(),this.imageMap=new Map,this.mirror=zt(),this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,!(r!=null&&r.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");var o={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Pe};this.config=Object.assign({},o,r),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(D.Resize,this.handleResize),this.setupDom(),this.treeIndex=new qt,this.fragmentParentMap=new Map,this.elementStateMap=new Map,this.virtualStyleRulesMap=new Map,this.emitter.on(D.Flush,function(){var d,g,y,T,S,h,c=i.treeIndex.flush(),m=c.scrollMap,E=c.inputMap;i.fragmentParentMap.forEach(function(A,P){return i.restoreRealParent(P,A)});try{for(var w=F(i.virtualStyleRulesMap.keys()),v=w.next();!v.done;v=w.next()){var b=v.value;i.restoreNodeSheet(b)}}catch(A){d={error:A}}finally{try{v&&!v.done&&(g=w.return)&&g.call(w)}finally{if(d)throw d.error}}i.fragmentParentMap.clear(),i.elementStateMap.clear(),i.virtualStyleRulesMap.clear();try{for(var C=F(m.values()),k=C.next();!k.done;k=C.next()){var N=k.value;i.applyScroll(N,!0)}}catch(A){y={error:A}}finally{try{k&&!k.done&&(T=C.return)&&T.call(C)}finally{if(y)throw y.error}}try{for(var R=F(E.values()),I=R.next();!I.done;I=R.next()){var N=I.value;i.applyInput(N)}}catch(A){S={error:A}}finally{try{I&&!I.done&&(h=R.return)&&h.call(R)}finally{if(S)throw S.error}}}),this.emitter.on(D.PlayBack,function(){i.firstFullSnapshot=null,i.mirror.reset()});var a=new Ut([],(r==null?void 0:r.speed)||o.speed);this.service=Ht({events:t.map(function(d){return r&&r.unpackFn?r.unpackFn(d):d}).sort(function(d,g){return d.timestamp-g.timestamp}),timer:a,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(function(d){i.emitter.emit(D.StateChange,{player:d})}),this.speedService=Gt({normalSpeed:-1,timer:a}),this.speedService.start(),this.speedService.subscribe(function(d){i.emitter.emit(D.StateChange,{speed:d})});var n=this.service.state.context.events.find(function(d){return d.type===B.Meta}),s=this.service.state.context.events.find(function(d){return d.type===B.FullSnapshot});if(n){var l=n.data,u=l.width,f=l.height;setTimeout(function(){i.emitter.emit(D.Resize,{width:u,height:f})},0)}s&&setTimeout(function(){i.firstFullSnapshot||(i.firstFullSnapshot=s,i.rebuildFullSnapshot(s),i.iframe.contentWindow.scrollTo(s.data.initialOffset))},1),this.service.state.context.events.find(st)&&this.mouse.classList.add("touch-device")}return Object.defineProperty(e.prototype,"timer",{get:function(){return this.service.state.context.timer},enumerable:!1,configurable:!0}),e.prototype.on=function(t,r){return this.emitter.on(t,r),this},e.prototype.off=function(t,r){return this.emitter.off(t,r),this},e.prototype.setConfig=function(t){var r=this;Object.keys(t).forEach(function(i){r.config[i]=t[i]}),this.config.skipInactive||this.backToNormal(),typeof t.speed!="undefined"&&this.speedService.send({type:"SET_SPEED",payload:{speed:t.speed}}),typeof t.mouseTail!="undefined"&&(t.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))},e.prototype.getMetaData=function(){var t=this.service.state.context.events[0],r=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:r.timestamp,totalTime:r.timestamp-t.timestamp}},e.prototype.getCurrentTime=function(){return this.timer.timeOffset+this.getTimeOffset()},e.prototype.getTimeOffset=function(){var t=this.service.state.context,r=t.baselineTime,i=t.events;return r-i[0].timestamp},e.prototype.getMirror=function(){return this.mirror},e.prototype.play=function(t){var r;t===void 0&&(t=0),this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:t}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}})),(r=this.iframe.contentDocument)===null||r===void 0||r.getElementsByTagName("html")[0].classList.remove("rrweb-paused"),this.emitter.emit(D.Start)},e.prototype.pause=function(t){var r;t===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof t=="number"&&(this.play(t),this.service.send({type:"PAUSE"})),(r=this.iframe.contentDocument)===null||r===void 0||r.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(D.Pause)},e.prototype.resume=function(t){t===void 0&&(t=0),console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(D.Resume)},e.prototype.startLive=function(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})},e.prototype.addEvent=function(t){var r=this,i=this.config.unpackFn?this.config.unpackFn(t):t;st(i)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(function(){return r.service.send({type:"ADD_EVENT",payload:{event:i}})})},e.prototype.enableInteract=function(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"},e.prototype.disableInteract=function(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"},e.prototype.resetCache=function(){this.cache=Ge()},e.prototype.setupDom=function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");var t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(jt(this.iframe.contentWindow,this.iframe.contentDocument),Xt(this.iframe.contentWindow))},e.prototype.handleResize=function(t){var r,i;this.iframe.style.display="inherit";try{for(var o=F([this.mouseTail,this.iframe]),a=o.next();!a.done;a=o.next()){var n=a.value;!n||(n.setAttribute("width",String(t.width)),n.setAttribute("height",String(t.height)))}}catch(s){r={error:s}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.applyEventsSynchronously=function(t){var r,i;try{for(var o=F(t),a=o.next();!a.done;a=o.next()){var n=a.value;switch(n.type){case B.DomContentLoaded:case B.Load:case B.Custom:continue;case B.FullSnapshot:case B.Meta:case B.Plugin:break;case B.IncrementalSnapshot:switch(n.data.source){case U.MediaInteraction:continue;default:break}break;default:break}var s=this.getCastFn(n,!0);s()}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}this.mousePos&&this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null,this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null},e.prototype.getCastFn=function(t,r){var i=this;r===void 0&&(r=!1);var o;switch(t.type){case B.DomContentLoaded:case B.Load:break;case B.Custom:o=function(){i.emitter.emit(D.CustomEvent,t)};break;case B.Meta:o=function(){return i.emitter.emit(D.Resize,{width:t.data.width,height:t.data.height})};break;case B.FullSnapshot:o=function(){if(i.firstFullSnapshot){if(i.firstFullSnapshot===t){i.firstFullSnapshot=!0;return}}else i.firstFullSnapshot=!0;i.rebuildFullSnapshot(t,r),i.iframe.contentWindow.scrollTo(t.data.initialOffset)};break;case B.IncrementalSnapshot:o=function(){var n,s;if(i.applyIncremental(t,r),!r&&(t===i.nextUserInteractionEvent&&(i.nextUserInteractionEvent=null,i.backToNormal()),i.config.skipInactive&&!i.nextUserInteractionEvent)){try{for(var l=F(i.service.state.context.events),u=l.next();!u.done;u=l.next()){var f=u.value;if(!(f.timestamp<=t.timestamp)&&i.isUserInteraction(f)){f.delay-t.delay>cr*i.speedService.state.context.timer.speed&&(i.nextUserInteractionEvent=f);break}}}catch(y){n={error:y}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}if(i.nextUserInteractionEvent){var d=i.nextUserInteractionEvent.delay-t.delay,g={speed:Math.min(Math.round(d/fr),i.config.maxSpeed)};i.speedService.send({type:"FAST_FORWARD",payload:g}),i.emitter.emit(D.SkipStart,g)}}};break}var a=function(){var n,s;o&&o();try{for(var l=F(i.config.plugins||[]),u=l.next();!u.done;u=l.next()){var f=u.value;f.handler(t,r,{replayer:i})}}catch(y){n={error:y}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}i.service.send({type:"CAST_EVENT",payload:{event:t}});var d=i.service.state.context.events.length-1;if(t===i.service.state.context.events[d]){var g=function(){d<i.service.state.context.events.length-1||(i.backToNormal(),i.service.send("END"),i.emitter.emit(D.Finish))};t.type===B.IncrementalSnapshot&&t.data.source===U.MouseMove&&t.data.positions.length?setTimeout(function(){g()},Math.max(0,-t.data.positions[0].timeOffset+50)):g()}i.emitter.emit(D.EventCast,t)};return a},e.prototype.rebuildFullSnapshot=function(t,r){var i,o,a=this;if(r===void 0&&(r=!1),!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};var n=[];this.mirror.map=Ft(t.data.node,{doc:this.iframe.contentDocument,afterAppend:function(c){a.collectIframeAndAttachDocument(n,c)},cache:this.cache})[1];var s=function(c,m){l.attachDocumentToIframe(c,m),l.newDocumentQueue=l.newDocumentQueue.filter(function(E){return E!==c})},l=this;try{for(var u=F(n),f=u.next();!f.done;f=u.next()){var d=f.value,g=d.mutationInQueue,y=d.builtNode;s(g,y)}}catch(c){i={error:c}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}var T=this.iframe.contentDocument,S=T.documentElement,h=T.head;this.insertStyleRules(S,h),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(D.FullsnapshotRebuilded,t),r||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()},e.prototype.insertStyleRules=function(t,r){var i=document.createElement("style");t.insertBefore(i,r);var o=$t(this.config.blockClass).concat(this.config.insertStyleRules);this.config.pauseAnimation&&o.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }");for(var a=0;a<o.length;a++)i.sheet.insertRule(o[a],a)},e.prototype.attachDocumentToIframe=function(t,r){var i,o,a=this,n=[];if(!r.contentDocument)for(var s=r.parentNode;s;){if(this.fragmentParentMap.has(s)){var l=s,u=this.fragmentParentMap.get(l);this.restoreRealParent(l,u);break}s=s.parentNode}we(t.node,{doc:r.contentDocument,map:this.mirror.map,hackCss:!0,skipChild:!1,afterAppend:function(c){if(a.collectIframeAndAttachDocument(n,c),c.__sn.type===L.Element&&c.__sn.tagName.toUpperCase()==="HTML"){var m=r.contentDocument,E=m.documentElement,w=m.head;a.insertStyleRules(E,w)}},cache:this.cache});var f=function(c,m){d.attachDocumentToIframe(c,m),d.newDocumentQueue=d.newDocumentQueue.filter(function(E){return E!==c})},d=this;try{for(var g=F(n),y=g.next();!y.done;y=g.next()){var T=y.value,S=T.mutationInQueue,h=T.builtNode;f(S,h)}}catch(c){i={error:c}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}},e.prototype.collectIframeAndAttachDocument=function(t,r){if(xe(r)){var i=this.newDocumentQueue.find(function(o){return o.parentId===r.__sn.id});i&&t.push({mutationInQueue:i,builtNode:r})}},e.prototype.waitForStylesheetLoad=function(){var t=this,r,i=(r=this.iframe.contentDocument)===null||r===void 0?void 0:r.head;if(i){var o=new Set,a,n=this.service.state,s=function(){n=t.service.state};this.emitter.on(D.Start,s),this.emitter.on(D.Pause,s);var l=function(){t.emitter.off(D.Start,s),t.emitter.off(D.Pause,s)};i.querySelectorAll('link[rel="stylesheet"]').forEach(function(u){u.sheet||(o.add(u),u.addEventListener("load",function(){o.delete(u),o.size===0&&a!==-1&&(n.matches("playing")&&t.play(t.getCurrentTime()),t.emitter.emit(D.LoadStylesheetEnd),a&&clearTimeout(a),l())}))}),o.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(D.LoadStylesheetStart),a=setTimeout(function(){n.matches("playing")&&t.play(t.getCurrentTime()),a=-1,l()},this.config.loadTimeout))}},e.prototype.hasImageArg=function(t){var r,i;try{for(var o=F(t),a=o.next();!a.done;a=o.next()){var n=a.value;if(!(!n||typeof n!="object"))if("rr_type"in n&&"args"in n){if(this.hasImageArg(n.args))return!0}else{if("rr_type"in n&&n.rr_type==="HTMLImageElement")return!0;if(n instanceof Array&&this.hasImageArg(n))return!0}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.getImageArgs=function(t){var r,i,o=[];try{for(var a=F(t),n=a.next();!n.done;n=a.next()){var s=n.value;!s||typeof s!="object"||("rr_type"in s&&"args"in s?o.push.apply(o,q(this.getImageArgs(s.args))):"rr_type"in s&&s.rr_type==="HTMLImageElement"?o.push(s.src):s instanceof Array&&o.push.apply(o,q(this.getImageArgs(s))))}}catch(l){r={error:l}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o},e.prototype.preloadAllImages=function(){var t,r,i=this;this.service.state;var o=function(){i.service.state};this.emitter.on(D.Start,o),this.emitter.on(D.Pause,o);var a=function(f){f.type===B.IncrementalSnapshot&&f.data.source===U.CanvasMutation&&("commands"in f.data?f.data.commands.forEach(function(d){return i.preloadImages(d,f)}):n.preloadImages(f.data,f))},n=this;try{for(var s=F(this.service.state.context.events),l=s.next();!l.done;l=s.next()){var u=l.value;a(u)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}},e.prototype.preloadImages=function(t,r){var i=this;if(t.property==="drawImage"&&typeof t.args[0]=="string"&&!this.imageMap.has(r)){var o=document.createElement("canvas"),a=o.getContext("2d"),n=a==null?void 0:a.createImageData(o.width,o.height);n==null||n.data,JSON.parse(t.args[0]),a==null||a.putImageData(n,0,0)}else this.hasImageArg(t.args)&&this.getImageArgs(t.args).forEach(function(s){var l=new Image;l.src=s,i.imageMap.set(s,l)})},e.prototype.applyIncremental=function(t,r){var i=this,o,a,n=t.data;switch(n.source){case U.Mutation:{r&&(n.adds.forEach(function(C){return i.treeIndex.add(C)}),n.texts.forEach(function(C){return i.treeIndex.text(C)}),n.attributes.forEach(function(C){return i.treeIndex.attribute(C)}),n.removes.forEach(function(C){return i.treeIndex.remove(C,i.mirror)}));try{this.applyMutation(n,r)}catch(C){this.warn("Exception in mutation "+(C.message||C),n)}break}case U.Drag:case U.TouchMove:case U.MouseMove:if(r){var s=n.positions[n.positions.length-1];this.mousePos={x:s.x,y:s.y,id:s.id,debugData:n}}else n.positions.forEach(function(C){var k={doAction:function(){i.moveAndHover(C.x,C.y,C.id,r,n)},delay:C.timeOffset+t.timestamp-i.service.state.context.baselineTime};i.timer.addAction(k)}),this.timer.addAction({doAction:function(){},delay:t.delay-((o=n.positions[0])===null||o===void 0?void 0:o.timeOffset)});break;case U.MouseInteraction:{if(n.id===-1)break;var l=new Event(Q[n.type].toLowerCase()),u=this.mirror.getNode(n.id);if(!u)return this.debugNodeNotFound(n,n.id);this.emitter.emit(D.MouseInteraction,{type:n.type,target:u});var f=this.config.triggerFocus;switch(n.type){case Q.Blur:"blur"in u&&u.blur();break;case Q.Focus:f&&u.focus&&u.focus({preventScroll:!0});break;case Q.Click:case Q.TouchStart:case Q.TouchEnd:r?(n.type===Q.TouchStart?this.touchActive=!0:n.type===Q.TouchEnd&&(this.touchActive=!1),this.mousePos={x:n.x,y:n.y,id:n.id,debugData:n}):(n.type===Q.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(n.x,n.y,n.id,r,n),n.type===Q.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):n.type===Q.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):n.type===Q.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case Q.TouchCancel:r?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:u.dispatchEvent(l)}break}case U.Scroll:{if(n.id===-1)break;if(r){this.treeIndex.scroll(n);break}this.applyScroll(n,!1);break}case U.ViewportResize:this.emitter.emit(D.Resize,{width:n.width,height:n.height});break;case U.Input:{if(n.id===-1)break;if(r){this.treeIndex.input(n);break}this.applyInput(n);break}case U.MediaInteraction:{var u=this.mirror.getNode(n.id);if(!u)return this.debugNodeNotFound(n,n.id);var d=u;try{n.currentTime&&(d.currentTime=n.currentTime),n.volume&&(d.volume=n.volume),n.muted&&(d.muted=n.muted),n.type===1&&d.pause(),n.type===0&&d.play()}catch(k){this.config.showWarning&&console.warn("Failed to replay media interactions: "+(k.message||k))}break}case U.StyleSheetRule:{var u=this.mirror.getNode(n.id);if(!u)return this.debugNodeNotFound(n,n.id);var g=u,y=u.parentNode,T=this.fragmentParentMap.has(y),S=T?null:g.sheet,h;S||(this.virtualStyleRulesMap.has(u)?h=this.virtualStyleRulesMap.get(u):(h=[],this.virtualStyleRulesMap.set(u,h))),n.adds&&n.adds.forEach(function(k){var N=k.rule,R=k.index;if(S)try{if(Array.isArray(R)){var I=Ee(R),A=I.positions,P=I.index,H=ee(S.cssRules,A);H.insertRule(N,P)}else{var P=R===void 0?void 0:Math.min(R,S.cssRules.length);S.insertRule(N,P)}}catch(G){}else h==null||h.push({cssText:N,index:R,type:J.Insert})}),n.removes&&n.removes.forEach(function(k){var N=k.index;if(T)h==null||h.push({index:N,type:J.Remove});else try{if(Array.isArray(N)){var R=Ee(N),I=R.positions,A=R.index,P=ee(S.cssRules,I);P.deleteRule(A||0)}else S==null||S.deleteRule(N)}catch(H){}});break}case U.StyleDeclaration:{var u=this.mirror.getNode(n.id);if(!u)return this.debugNodeNotFound(n,n.id);var g=u,c=u.parentNode,m=this.fragmentParentMap.has(c),E=m?null:g.sheet,w=[];if(E||(this.virtualStyleRulesMap.has(u)?w=this.virtualStyleRulesMap.get(u):(w=[],this.virtualStyleRulesMap.set(u,w))),n.set)if(E){var v=ee(E.rules,n.index);v.style.setProperty(n.set.property,n.set.value,n.set.priority)}else w.push(Y({type:J.SetProperty,index:n.index},n.set));if(n.remove)if(E){var v=ee(E.rules,n.index);v.style.removeProperty(n.remove.property)}else w.push(Y({type:J.RemoveProperty,index:n.index},n.remove));break}case U.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;var u=this.mirror.getNode(n.id);if(!u)return this.debugNodeNotFound(n,n.id);ur({event:t,mutation:n,target:u,imageMap:this.imageMap,errorHandler:this.warnCanvasMutationFailed.bind(this)});break}case U.Font:{try{var b=new FontFace(n.family,n.buffer?new Uint8Array(JSON.parse(n.fontSource)):n.fontSource,n.descriptors);(a=this.iframe.contentDocument)===null||a===void 0||a.fonts.add(b)}catch(C){this.config.showWarning&&console.warn(C)}break}}},e.prototype.applyMutation=function(t,r){var i,o,a=this;t.removes.forEach(function(h){var c=a.mirror.getNode(h.id);if(!c)return t.removes.find(function(v){return v.id===h.parentId})?void 0:a.warnNodeNotFound(t,h.id);a.virtualStyleRulesMap.has(c)&&a.virtualStyleRulesMap.delete(c);var m=a.mirror.getNode(h.parentId);if(!m)return a.warnNodeNotFound(t,h.parentId);if(h.isShadow&&nt(m)&&(m=m.shadowRoot),a.mirror.removeNodeFromMap(c),m){var E=null,w="__sn"in m?a.fragmentParentMap.get(m):void 0;w&&w.contains(c)?m=w:a.fragmentParentMap.has(c)&&(E=a.fragmentParentMap.get(c),a.fragmentParentMap.delete(c),c=E);try{m.removeChild(c)}catch(v){if(v instanceof DOMException)a.warn("parent could not remove child in mutation",m,w,c,E,t);else throw v}}});var n=Y({},this.legacy_missingNodeRetryMap),s=[],l=function(h){var c=null;return h.nextId&&(c=a.mirror.getNode(h.nextId)),h.nextId!==null&&h.nextId!==void 0&&h.nextId!==-1&&!c},u=function(h){var c,m,E,w;if(!a.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");var v=a.mirror.getNode(h.parentId);if(!v)return h.node.type===L.Document?a.newDocumentQueue.push(h):s.push(h);var b=null;a.iframe.contentDocument.contains?b=a.iframe.contentDocument.contains(v):a.iframe.contentDocument.body.contains&&(b=a.iframe.contentDocument.body.contains(v));var C=((w=(E=v).getElementsByTagName)===null||w===void 0?void 0:w.call(E,"iframe").length)>0;if(r&&b&&!xe(v)&&!C){var k=document.createDocumentFragment();for(a.mirror.map[h.parentId]=k,a.fragmentParentMap.set(k,v),a.storeState(v);v.firstChild;)k.appendChild(v.firstChild);v=k}h.node.isShadow&&nt(v)&&(v=v.shadowRoot);var N=null,R=null;if(h.previousId&&(N=a.mirror.getNode(h.previousId)),h.nextId&&(R=a.mirror.getNode(h.nextId)),l(h))return s.push(h);if(!(h.node.rootId&&!a.mirror.getNode(h.node.rootId))){var I=h.node.rootId?a.mirror.getNode(h.node.rootId):a.iframe.contentDocument;if(xe(v)){a.attachDocumentToIframe(h,v);return}var A=we(h.node,{doc:I,map:a.mirror.map,skipChild:!0,hackCss:!0,cache:a.cache});if(h.previousId===-1||h.nextId===-1){n[h.node.id]={node:A,mutation:h};return}if("__sn"in v&&v.__sn.type===L.Element&&v.__sn.tagName==="textarea"&&h.node.type===L.Text)try{for(var P=F(Array.from(v.childNodes)),H=P.next();!H.done;H=P.next()){var G=H.value;G.nodeType===v.TEXT_NODE&&v.removeChild(G)}}catch(M){c={error:M}}finally{try{H&&!H.done&&(m=P.return)&&m.call(P)}finally{if(c)throw c.error}}if(N&&N.nextSibling&&N.nextSibling.parentNode)v.insertBefore(A,N.nextSibling);else if(R&&R.parentNode)v.contains(R)?v.insertBefore(A,R):v.insertBefore(A,null);else{if(v===I)for(;I.firstChild;)I.removeChild(I.firstChild);v.appendChild(A)}if(xe(A)){var V=a.newDocumentQueue.find(function(M){return M.parentId===A.__sn.id});V&&(a.attachDocumentToIframe(V,A),a.newDocumentQueue=a.newDocumentQueue.filter(function(M){return M!==V}))}(h.previousId||h.nextId)&&a.legacy_resolveMissingNode(n,v,A,h)}};t.adds.forEach(function(h){u(h)});for(var f=Date.now();s.length;){var d=Qt(s);if(s.length=0,Date.now()-f>500){this.warn("Timeout in the loop, please check the resolve tree data:",d);break}try{for(var g=(i=void 0,F(d)),y=g.next();!y.done;y=g.next()){var T=y.value,S=this.mirror.getNode(T.value.parentId);S?rt(T,function(h){u(h)}):this.debug("Drop resolve tree since there is no parent for the root node.",T)}}catch(h){i={error:h}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}}Object.keys(n).length&&Object.assign(this.legacy_missingNodeRetryMap,n),t.texts.forEach(function(h){var c=a.mirror.getNode(h.id);if(!c)return t.removes.find(function(m){return m.id===h.id})?void 0:a.warnNodeNotFound(t,h.id);a.fragmentParentMap.has(c)&&(c=a.fragmentParentMap.get(c)),c.textContent=h.value}),t.attributes.forEach(function(h){var c=a.mirror.getNode(h.id);if(!c)return t.removes.find(function(N){return N.id===h.id})?void 0:a.warnNodeNotFound(t,h.id);a.fragmentParentMap.has(c)&&(c=a.fragmentParentMap.get(c));for(var m in h.attributes)if(typeof m=="string"){var E=h.attributes[m];if(E===null)c.removeAttribute(m);else if(typeof E=="string")try{c.setAttribute(m,E)}catch(N){a.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",N)}else if(m==="style"){var w=E,v=c;for(var b in w)if(w[b]===!1)v.style.removeProperty(b);else if(w[b]instanceof Array){var C=w[b];v.style.setProperty(b,C[0],C[1])}else{var k=w[b];v.style.setProperty(b,k)}}}})},e.prototype.applyScroll=function(t,r){var i=this.mirror.getNode(t.id);if(!i)return this.debugNodeNotFound(t,t.id);if(i===this.iframe.contentDocument)this.iframe.contentWindow.scrollTo({top:t.y,left:t.x,behavior:r?"auto":"smooth"});else if(i.__sn.type===L.Document)i.defaultView.scrollTo({top:t.y,left:t.x,behavior:r?"auto":"smooth"});else try{i.scrollTop=t.y,i.scrollLeft=t.x}catch(o){}},e.prototype.applyInput=function(t){var r=this.mirror.getNode(t.id);if(!r)return this.debugNodeNotFound(t,t.id);try{r.checked=t.isChecked,r.value=t.text}catch(i){}},e.prototype.legacy_resolveMissingNode=function(t,r,i,o){var a=o.previousId,n=o.nextId,s=a&&t[a],l=n&&t[n];if(s){var u=s,f=u.node,d=u.mutation;r.insertBefore(f,i),delete t[d.node.id],delete this.legacy_missingNodeRetryMap[d.node.id],(d.previousId||d.nextId)&&this.legacy_resolveMissingNode(t,r,f,d)}if(l){var g=l,f=g.node,d=g.mutation;r.insertBefore(f,i.nextSibling),delete t[d.node.id],delete this.legacy_missingNodeRetryMap[d.node.id],(d.previousId||d.nextId)&&this.legacy_resolveMissingNode(t,r,f,d)}},e.prototype.moveAndHover=function(t,r,i,o,a){var n=this.mirror.getNode(i);if(!n)return this.debugNodeNotFound(a,i);var s=it(n,this.iframe),l=t*s.absoluteScale+s.x,u=r*s.absoluteScale+s.y;this.mouse.style.left=l+"px",this.mouse.style.top=u+"px",o||this.drawMouseTail({x:l,y:u}),this.hoverElements(n)},e.prototype.drawMouseTail=function(t){var r=this;if(!!this.mouseTail){var i=this.config.mouseTail===!0?Pe:Object.assign({},Pe,this.config.mouseTail),o=i.lineCap,a=i.lineWidth,n=i.strokeStyle,s=i.duration,l=function(){if(!!r.mouseTail){var u=r.mouseTail.getContext("2d");!u||!r.tailPositions.length||(u.clearRect(0,0,r.mouseTail.width,r.mouseTail.height),u.beginPath(),u.lineWidth=a,u.lineCap=o,u.strokeStyle=n,u.moveTo(r.tailPositions[0].x,r.tailPositions[0].y),r.tailPositions.forEach(function(f){return u.lineTo(f.x,f.y)}),u.stroke())}};this.tailPositions.push(t),l(),setTimeout(function(){r.tailPositions=r.tailPositions.filter(function(u){return u!==t}),l()},s/this.speedService.state.context.timer.speed)}},e.prototype.hoverElements=function(t){var r;(r=this.iframe.contentDocument)===null||r===void 0||r.querySelectorAll(".\\:hover").forEach(function(o){o.classList.remove(":hover")});for(var i=t;i;)i.classList&&i.classList.add(":hover"),i=i.parentElement},e.prototype.isUserInteraction=function(t){return t.type!==B.IncrementalSnapshot?!1:t.data.source>U.Mutation&&t.data.source<=U.Input},e.prototype.backToNormal=function(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(D.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))},e.prototype.restoreRealParent=function(t,r){this.mirror.map[r.__sn.id]=r,r.__sn.type===L.Element&&r.__sn.tagName==="textarea"&&t.textContent&&(r.value=t.textContent),r.appendChild(t),this.restoreState(r)},e.prototype.storeState=function(t){var r,i;if(t&&t.nodeType===t.ELEMENT_NODE){var o=t;(o.scrollLeft||o.scrollTop)&&this.elementStateMap.set(t,{scroll:[o.scrollLeft,o.scrollTop]}),o.tagName==="STYLE"&&_t(o,this.virtualStyleRulesMap);var a=o.children;try{for(var n=F(Array.from(a)),s=n.next();!s.done;s=n.next()){var l=s.value;this.storeState(l)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}}},e.prototype.restoreState=function(t){var r,i;if(t.nodeType===t.ELEMENT_NODE){var o=t;if(this.elementStateMap.has(t)){var a=this.elementStateMap.get(t);a.scroll&&(o.scrollLeft=a.scroll[0],o.scrollTop=a.scroll[1]),this.elementStateMap.delete(t)}var n=o.children;try{for(var s=F(Array.from(n)),l=s.next();!l.done;l=s.next()){var u=l.value;this.restoreState(u)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}},e.prototype.restoreNodeSheet=function(t){var r=this.virtualStyleRulesMap.get(t);if(t.nodeName==="STYLE"&&!!r){var i=t;Jt(r,i)}},e.prototype.warnNodeNotFound=function(t,r){this.treeIndex.idRemoved(r)?this.warn("Node with id '"+r+"' was previously removed. ",t):this.warn("Node with id '"+r+"' not found. ",t)},e.prototype.warnCanvasMutationFailed=function(t,r){this.warn("Has error on canvas update",r,"canvas mutation:",t)},e.prototype.debugNodeNotFound=function(t,r){this.treeIndex.idRemoved(r)?this.debug(Me,"Node with id '"+r+"' was previously removed. ",t):this.debug(Me,"Node with id '"+r+"' not found. ",t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];!this.config.showWarning||console.warn.apply(console,q([Me],t))},e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];!this.config.showDebug||console.log.apply(console,q([Me],t))},e}()}}]);
