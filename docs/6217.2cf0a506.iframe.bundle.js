(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[6217],{"../../frontend/src/lib/components/Scenes/SceneLoadingSkeleton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>SceneLoadingSkeleton});var lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),lib_ui_Label_Label__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/ui/Label/Label.tsx"),lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/ui/WrappingLoadingSkeleton/WrappingLoadingSkeleton.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneLoadingSkeleton(_ref){let{fullWidth=!0}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"flex flex-col gap-px",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_2__.x,{fullWidth:!1,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(lib_ui_Label_Label__WEBPACK_IMPORTED_MODULE_1__._,{intent:"menu","aria-hidden":!0,children:"Some label text"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_2__.x,{fullWidth:fullWidth,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_0__.hL,{inert:!0,"aria-hidden":!0,children:"Loading..."})})]})}},"../../frontend/src/lib/components/Scenes/SceneTextInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>SceneTextInput});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),lib_ui_TextareaPrimitive_TextareaPrimitive__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/ui/TextareaPrimitive/TextareaPrimitive.tsx"),_layout_scenes_SceneLayout__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/layout/scenes/SceneLayout.tsx"),_SceneLoadingSkeleton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/components/Scenes/SceneLoadingSkeleton.tsx"),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/components/Scenes/utils.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneTextInput(_ref){let{defaultValue="",onSave,dataAttrKey,optional=!1,canEdit=!0,isLoading=!1,name}=_ref,[localValue,setLocalValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultValue),[localIsEditing,setLocalIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[hasChanged,setHasChanged]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),nameCapitalized=name.charAt(0).toUpperCase()+name.slice(1);return((0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setHasChanged(localValue!==defaultValue),0!==localValue.length||optional?setError(null):setError(`${nameCapitalized} is required`)},[localValue,defaultValue,optional,nameCapitalized]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{isLoading||localIsEditing||setLocalValue(defaultValue)},[isLoading,defaultValue,localIsEditing]),isLoading)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_SceneLoadingSkeleton__WEBPACK_IMPORTED_MODULE_4__.T,{}):localIsEditing?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("form",{onSubmit:e=>{e.preventDefault(),onSave(localValue),setHasChanged(!1),setLocalIsEditing(!1)},name:`page-${name}-form`,className:"flex flex-col gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout_scenes_SceneLayout__WEBPACK_IMPORTED_MODULE_3__.ZV,{htmlFor:`page-${name}-input`,title:nameCapitalized,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(lib_ui_TextareaPrimitive_TextareaPrimitive__WEBPACK_IMPORTED_MODULE_2__.L,{value:localValue,onChange:e=>{setLocalValue(e.target.value)},placeholder:`${nameCapitalized} ${optional?"(optional)":""}`,id:`page-${name}-input`,"data-attr":`${dataAttrKey}-${name}-input`,autoFocus:!0,error:!!error})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_utils__WEBPACK_IMPORTED_MODULE_5__.B,{name:name,onCancel:()=>{setLocalValue(defaultValue),setLocalIsEditing(!1)},hasChanged:hasChanged,error:error,dataAttrKey:dataAttrKey,isLoading:isLoading})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_layout_scenes_SceneLayout__WEBPACK_IMPORTED_MODULE_3__.ZV,{title:nameCapitalized,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_1__.hL,{className:"hyphens-auto flex gap-1 items-center",lang:"en",onClick:()=>setLocalIsEditing(!0),tooltip:canEdit?`Edit ${name}`:`${nameCapitalized} is read-only`,autoHeight:!0,menuItem:!0,inert:!canEdit,variant:"panel",children:""!==localValue?localValue:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("span",{className:"text-tertiary font-normal",children:["No ",name," ",optional?"(optional)":""]})})})}},"../../frontend/src/lib/components/Scenes/SceneUpdateActivityInfo.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>SceneActivityIndicator});var lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/lib/lemon-ui/ProfilePicture/index.ts"),_layout_scenes_SceneLayout__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/layout/scenes/SceneLayout.tsx"),_TZLabel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneActivityIndicator(_ref){let{at,by,prefix="Last modified"}=_ref;return at||by?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_layout_scenes_SceneLayout__WEBPACK_IMPORTED_MODULE_1__.ZV,{title:prefix,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("span",{className:"flex items-center gap-1 whitespace-normal flex-wrap",children:[at&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_TZLabel__WEBPACK_IMPORTED_MODULE_2__.w,{time:at,className:"w-fit"}),by&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{className:"text-secondary",children:"by"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(lib_lemon_ui_ProfilePicture__WEBPACK_IMPORTED_MODULE_0__.Y,{user:by,showName:!0,size:"md"})]})]})}):null}},"../../frontend/src/lib/integrations/GitHubIntegrationHelpers.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{so:()=>GitHubRepositoryPicker,k8:()=>GitHubRepositorySelectField});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),LemonField=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts");let githubIntegrationLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.key)(props=>props.id),(0,index_esm.path)(key=>["lib","integrations","githubIntegrationLogic",key]),(0,index_esm.actions)({loadRepositories:()=>({})}),(0,lib.loaders)(_ref=>{let{props}=_ref;return{repositories:[[],{loadRepositories:async()=>(await api.ZP.integrations.githubRepositories(props.id)).repositories}]}})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let GitHubRepositoryPicker=_ref=>{let{value,onChange,integrationId}=_ref,{options,loading}=useRepositories(integrationId);return(0,jsx_runtime.jsx)(src.nt,{onChange:val=>{var _val$;return onChange?.(null!==(_val$=val[0])&&void 0!==_val$?_val$:null)},value:value?[value]:[],mode:"single","data-attr":"select-github-repository",placeholder:"Select a repository...",options:options,loading:loading})},GitHubRepositorySelectField=_ref2=>{let{integrationId}=_ref2,{options,loading}=useRepositories(integrationId);return(0,jsx_runtime.jsx)(LemonField.D,{name:"repositories",label:"Repository",children:(0,jsx_runtime.jsx)(src.nt,{mode:"single","data-attr":"select-github-repository",placeholder:"Select a repository...",options:options,loading:loading})})};function useRepositories(integrationId){let logic=githubIntegrationLogic({id:integrationId}),{repositories,repositoriesLoading}=(0,index_esm.useValues)(logic),{loadRepositories}=(0,index_esm.useActions)(logic);return(0,react.useEffect)(()=>{loadRepositories()},[loadRepositories]),{options:(0,react.useMemo)(()=>repositories.map(r=>({key:r,label:r})),[repositories]),loading:repositoriesLoading}}},"../../frontend/src/lib/integrations/LinearIntegrationHelpers.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ul:()=>LinearTeamPicker,Af:()=>LinearTeamSelectField});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),LemonField=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts");let linearIntegrationLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.key)(props=>props.id),(0,index_esm.path)(key=>["lib","integrations","linearIntegrationLogic",key]),(0,index_esm.actions)({loadAllLinearTeams:()=>({})}),(0,lib.loaders)(_ref=>{let{props}=_ref;return{linearTeams:[[],{loadAllLinearTeams:async()=>(await api.ZP.integrations.linearTeams(props.id)).teams}]}})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function LinearTeamPicker(_ref){let{onChange,value,integration}=_ref,{options,loading}=useLinearTeams(integration.id);return(0,jsx_runtime.jsx)(src.nt,{onChange:val=>{var _val$;return onChange?.(null!==(_val$=val[0])&&void 0!==_val$?_val$:null)},value:value?[value]:[],mode:"single","data-attr":"select-linear-team",placeholder:"Select a team...",options:options,loading:loading})}let LinearTeamSelectField=_ref2=>{let{integrationId}=_ref2,{options,loading}=useLinearTeams(integrationId);return(0,jsx_runtime.jsx)(LemonField.D,{name:"teamIds",label:"Team",children:(0,jsx_runtime.jsx)(src.nt,{mode:"single","data-attr":"select-linear-team",placeholder:"Select a team...",options:options,loading:loading})})};function useLinearTeams(integrationId){let logic=linearIntegrationLogic({id:integrationId}),{linearTeams,linearTeamsLoading}=(0,index_esm.useValues)(logic),{loadAllLinearTeams}=(0,index_esm.useActions)(logic),linearTeamOptions=(0,react.useMemo)(()=>linearTeams?linearTeams.map(x=>({key:x.id,label:x.name})):[],[linearTeams]);return(0,react.useEffect)(()=>{loadAllLinearTeams()},[loadAllLinearTeams]),{options:linearTeamOptions,loading:linearTeamsLoading}}},"../../products/error_tracking/frontend/components/ExceptionCard/exceptionCardLogic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>exceptionCardLogic});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js");let exceptionCardLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(key=>["products","error_tracking","ExceptionCard",key]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.key)(props=>props.issueId),(0,kea__WEBPACK_IMPORTED_MODULE_0__.props)({}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setShowJSONProperties:showJSON=>({showJSON}),setShowAdditionalProperties:showProperties=>({showProperties}),setShowAsText:showAsText=>({showAsText}),setShowAllFrames:showAllFrames=>({showAllFrames}),setLoading:loading=>({loading}),setCurrentSessionTab:tab=>({tab}),setCurrentTab:tab=>({tab})}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({showJSONProperties:[!1,{setShowJSONProperties:(_,_ref)=>{let{showJSON}=_ref;return showJSON}}],showAdditionalProperties:[!0,{setShowAdditionalProperties:(_,_ref2)=>{let{showProperties}=_ref2;return showProperties}}],showAsText:[!1,{setShowAsText:(_,_ref3)=>{let{showAsText}=_ref3;return showAsText}}],showAllFrames:[!1,{setShowAllFrames:(_,_ref4)=>{let{showAllFrames}=_ref4;return showAllFrames}}],loading:[!0,{setLoading:(_,_ref5)=>{let{loading}=_ref5;return loading}}],currentSessionTab:["timeline",{setCurrentSessionTab:(_,_ref6)=>{let{tab}=_ref6;return tab}}],currentTab:["stacktrace",{setCurrentTab:(_,_ref7)=>{let{tab}=_ref7;return tab}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)({issueId:[(_,p)=>[p.issueId],issueId=>issueId]})])},"../../products/error_tracking/frontend/components/SparklineChart/SparklineChart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>SparklineChart});var d3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/d3@7.9.0/node_modules/d3/src/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),use_resize_observer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/.pnpm/use-resize-observer@8.0.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/use-resize-observer/dist/bundle.esm.js"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SparklineChart(_ref){let{data,events=[],options,className}=_ref,svgRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),{height:contentHeight,width:contentWidth,ref:contentRef}=(0,use_resize_observer__WEBPACK_IMPORTED_MODULE_3__.Z)({box:"content-box"});return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let svgEl=svgRef.current;if(svgEl&&contentHeight&&contentWidth){let svg=d3__WEBPACK_IMPORTED_MODULE_0__.Ys(svgEl);if(data.length<2)throw Error("Not enough data to render chart");let timeDiff=Math.abs(data[1].date.getTime()-data[0].date.getTime()),extent=d3__WEBPACK_IMPORTED_MODULE_0__.Wem(data.map(d=>d.date)),maxDate=new Date(extent[1]);maxDate.setTime(extent[1].getTime()+timeDiff);let xTicks=d3__WEBPACK_IMPORTED_MODULE_0__.jKP(extent[0],maxDate,8),xScale=d3__WEBPACK_IMPORTED_MODULE_0__.Xf().domain([extent[0],maxDate]).range([0,contentWidth]),maxValue=d3__WEBPACK_IMPORTED_MODULE_0__.Fp7(data.map(d=>d.value))||0,yScale=d3__WEBPACK_IMPORTED_MODULE_0__.BYU().domain([0,maxValue||1]).range([contentHeight-options.minBarHeight,options.eventLabelHeight]),xAxis=d3__WEBPACK_IMPORTED_MODULE_0__.LLu(xScale).tickValues(xTicks).tickSize(0).tickPadding(5);return svg.selectAll("g.datum").data(data).enter().append("g").attr("class","datum").call(buildBarGroup,xScale,yScale,contentHeight,data,options),svg.append("g").attr("transform",`translate(0,${contentHeight})`).style("color",options.axisColor).call(xAxis),svg.selectAll("g.event").data(events||[]).enter().append("g").attr("class","event").call(buildEvent,xScale,options,contentHeight,contentWidth),()=>{svg.selectAll("*").remove()}}},[data,events,options,contentHeight,contentWidth]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{ref:contentRef,className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_4__.cn)("h-full w-full p-4 overflow-hidden",className),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{ref:svgRef,className:"overflow-visible",height:"100%",width:"100%"})})}function buildBarGroup(group,xScale,yScale,contentHeight,data,options){let bandwidth=xScale(data[1].date)-xScale(data[0].date);group.attr("x",d=>xScale(d.date)).on("mouseover",function(_,d){let current=d3__WEBPACK_IMPORTED_MODULE_0__.Ys(this);options.onDatumMouseEnter?.(d),options.hoverBackgroundColor&&current.select(".bar").style("fill",options.hoverBackgroundColor)}).on("mouseout",function(_,d){let current=d3__WEBPACK_IMPORTED_MODULE_0__.Ys(this);options.onDatumMouseLeave?.(d),current.select(".bar").style("fill",options.backgroundColor)}),group.append("rect").attr("class","bar").attr("x",(_,i)=>xScale(data[i].date)).attr("y",d=>yScale(d.value)+options.borderRadius).attr("width",.9*bandwidth).attr("height",d=>d&&d.value>0?contentHeight-yScale(d.value):0).style("fill",options.backgroundColor).style("clip-path",`inset(0 0 ${options.borderRadius+1}px 0)`).attr("rx",options.borderRadius).attr("ry",options.borderRadius);let maxValue=Math.max(...yScale.domain());group.append("rect").attr("class","overlay").attr("x",(_,i)=>xScale(data[i].date)).attr("y",yScale(maxValue)).attr("width",bandwidth).attr("height",d=>d?contentHeight-yScale(maxValue)+options.borderRadius:0).style("fill","transparent")}function buildEventLabel(selection,xScale,options,contentWidth){let paddingX=options.eventLabelPaddingX,paddingY=options.eventLabelPaddingY,baseLine=options.eventLabelHeight/2,textNodes=selection.append("text").attr("class","font-semibold").attr("x",d=>xScale(d.date)).attr("y",baseLine).attr("fill","white").attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","10px").text(d=>d.payload).nodes();selection.insert("rect","text").attr("x",(_,i)=>textNodes[i].getBBox().x-paddingX).attr("y",(_,i)=>textNodes[i].getBBox().y-paddingY).attr("width",(_,i)=>textNodes[i].getBBox().width+2*paddingX).attr("height",(_,i)=>textNodes[i].getBBox().height+2*paddingY).attr("rx",options.borderRadius).attr("ry",options.borderRadius).attr("fill",d=>d.color||"black");let movingNodes=selection.nodes().map((node,index)=>{let bbox=node.getBBox();return{x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2,radius:bbox.width/2+options.eventMinSpace,id:`moving-${index}`}}),clonedNodes=movingNodes.map(node=>({...node})),simulation=d3__WEBPACK_IMPORTED_MODULE_0__.A4v(movingNodes).velocityDecay(.9).force("collision",d3__WEBPACK_IMPORTED_MODULE_0__.Hh().radius((_,i)=>movingNodes[i].radius)).force("boundaries",forceBoundaries(movingNodes,-10,contentWidth+10));simulation.stop(),simulation.tick(500),movingNodes.forEach((_,index)=>{let newX=movingNodes[index].x,initialX=clonedNodes[index].x,newY=movingNodes[index].y,initialY=clonedNodes[index].y,deltaX=newX-initialX,deltaY=newY-initialY;selection.filter((_,i)=>i===index).attr("transform",`translate(${deltaX}, ${deltaY})`).attr("dx",deltaX).attr("dy",deltaY)})}function buildEventAnchor(selection,xScale,contentHeight){selection.append("circle").attr("cx",d=>xScale(d.date)).attr("cy",contentHeight).attr("r",6).attr("fill","white").attr("stroke",d=>d.color||"black").attr("stroke-width",2)}function buildEvent(selection,xScale,options,contentHeight,contentWidth){selection.append("g").attr("class","label").call(buildEventLabel,xScale,options,contentWidth),selection.call(buildEventLine,xScale,contentHeight,contentWidth),selection.call(buildEventAnchor,xScale,contentHeight),selection.style("cursor",options.onEventClick?"pointer":"default").on("mouseover",function(_,d){options.onEventMouseEnter?.(d)}).on("mouseout",function(_,d){options.onEventMouseLeave?.(d)})}function buildEventLine(selection,xScale,contentHeight,contentWidth){selection.insert("line","g.label").attr("x1",d=>xScale(d.date)).attr("y1",contentHeight).attr("x2",(_,index)=>{let labelNode=selection.selectAll(".label").nodes().find((_,i)=>i===index),dx=parseFloat(labelNode.getAttribute("dx")||"0"),labelBbox=labelNode.getBBox();return labelBbox?.x+dx+labelBbox?.width/2||0}).attr("y2",5).attr("stroke-width",2).attr("stroke",d=>{let xPos=xScale(d.date);return xPos<0||xPos>contentWidth?"transparent":d.color||"black"})}function forceBoundaries(nodes,minX,maxX){return()=>{nodes.forEach(node=>{node.vy=0,node.x+node.radius>maxX?node.vx+=maxX-(node.x+node.radius):node.x-node.radius<minX&&(node.vx+=minX-(node.x-node.radius))})}}},"../../products/error_tracking/frontend/scenes/ErrorTrackingIssueScene/ErrorTrackingIssueScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ErrorTrackingIssueScene:()=>ErrorTrackingIssueScene_ErrorTrackingIssueScene_ErrorTrackingIssueScene,scene:()=>scene});var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),ErrorTrackingIssueScene=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../products/error_tracking/frontend/scenes/ErrorTrackingIssueScene/ErrorTrackingIssueScene.scss"),ErrorTrackingIssueScene_default=__webpack_require__.n(ErrorTrackingIssueScene),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(ErrorTrackingIssueScene_default(),options),ErrorTrackingIssueScene_default().locals;var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),dist_module=__webpack_require__("../../node_modules/.pnpm/posthog-js@1.288.0/node_modules/posthog-js/dist/module.js"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.35.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),useFeatureFlag=__webpack_require__("../../frontend/src/lib/hooks/useFeatureFlag.ts"),ButtonPrimitives=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),DropdownMenu=__webpack_require__("../../frontend/src/lib/ui/DropdownMenu/DropdownMenu.tsx"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),SceneBreadcrumbs=__webpack_require__("../../frontend/src/layout/scenes/components/SceneBreadcrumbs.tsx"),fast_deep_equal=__webpack_require__("../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),utils=__webpack_require__("../../products/error_tracking/frontend/utils.ts"),consts=__webpack_require__("../../products/error_tracking/frontend/components/Breakdowns/consts.ts");let breakdownFiltersLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","error_tracking","components","Breakdowns","breakdownFiltersLogic"]),(0,index_esm.actions)({setDateRange:dateRange=>({dateRange}),setFilterTestAccounts:filterTestAccounts=>({filterTestAccounts}),setFilterOpen:filterOpen=>({filterOpen}),setBreakdownProperty:breakdownProperty=>({breakdownProperty})}),(0,index_esm.reducers)({dateRange:[consts.fI,{persist:!0},{setDateRange:(_,_ref)=>{let{dateRange}=_ref;return dateRange}}],filterTestAccounts:[consts.fY,{persist:!0},{setFilterTestAccounts:(_,_ref2)=>{let{filterTestAccounts}=_ref2;return filterTestAccounts}}],breakdownProperty:["$browser",{persist:!0},{setBreakdownProperty:(_,_ref3)=>{let{breakdownProperty}=_ref3;return breakdownProperty}}],filterOpen:[!1,{setFilterOpen:(_,_ref4)=>{let{filterOpen}=_ref4;return filterOpen}}]}),(0,lib.urlToAction)(_ref5=>{let{actions,values}=_ref5;return{"*":(_,params)=>{var _params$dateRange,_params$filterTestAcc,_params$breakdownProp;let dateRange=null!==(_params$dateRange=params.dateRange)&&void 0!==_params$dateRange?_params$dateRange:consts.fI;fast_deep_equal_default()(dateRange,values.dateRange)||actions.setDateRange(dateRange);let filterTestAccounts=null!==(_params$filterTestAcc=params.filterTestAccounts)&&void 0!==_params$filterTestAcc?_params$filterTestAcc:consts.fY;filterTestAccounts!==values.filterTestAccounts&&actions.setFilterTestAccounts(filterTestAccounts);let breakdownProperty=null!==(_params$breakdownProp=params.breakdownProperty)&&void 0!==_params$breakdownProp?_params$breakdownProp:"$browser";breakdownProperty!==values.breakdownProperty&&actions.setBreakdownProperty(breakdownProperty)}}}),(0,lib.actionToUrl)(_ref6=>{let{values}=_ref6,buildURL=()=>(0,utils.qI)(lib.router,params=>((0,utils.aM)(params,"filterTestAccounts",values.filterTestAccounts,consts.fY),(0,utils.aM)(params,"dateRange",values.dateRange,consts.fI),(0,utils.aM)(params,"breakdownProperty",values.breakdownProperty,"$browser"),params));return{setDateRange:()=>buildURL(),setFilterTestAccounts:()=>buildURL(),setBreakdownProperty:()=>buildURL()}})]);var kea_loaders_lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.1.1_kea@3.1.7_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_subscriptions_lib=__webpack_require__("../../node_modules/.pnpm/kea-subscriptions@3.0.1_kea@3.1.7_react@18.2.0_/node_modules/kea-subscriptions/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),insights_utils=__webpack_require__("../../frontend/src/scenes/insights/utils.tsx"),queries=__webpack_require__("../../products/error_tracking/frontend/queries.ts");let miniBreakdownsLogic=(0,index_esm.kea)([(0,index_esm.path)(["products","error_tracking","components","Breakdowns","miniBreakdownsLogic"]),(0,index_esm.props)({}),(0,index_esm.key)(_ref=>{let{issueId}=_ref;return issueId}),(0,index_esm.connect)(()=>({values:[breakdownFiltersLogic,["dateRange","filterTestAccounts"]]})),(0,kea_loaders_lib.loaders)(_ref2=>{let{props,values}=_ref2;return{response:[null,{loadResponse:async()=>{let startTime=Date.now(),result=await api.ZP.query((0,queries.Yt)({issueId:props.issueId,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,breakdownProperties:consts.yg.map(preset=>preset.property),maxValuesPerProperty:consts._d}),{refresh:"blocking"});return dist_module.ZP.capture(consts.KJ.MiniBreakdownsLoaded,{issueId:props.issueId,dateRange:values.dateRange,filterTestAccounts:values.filterTestAccounts,breakdownProperties:consts.yg.map(preset=>preset.property),duration:Date.now()-startTime}),result}}]}}),(0,index_esm.selectors)(()=>({getBreakdownForProperty:[s=>[s.response],response=>property=>{let properties=[],totalCount=0;if(response&&response.results&&property&&response.results[property]){let propertyData=response.results[property];propertyData.values.forEach(value=>{properties.push({label:value.value,count:value.count})});let otherCount=Math.max(0,(totalCount=propertyData.total_count||0)-propertyData.values.reduce((sum,value)=>sum+value.count,0));otherCount>0&&properties.push({label:insights_utils.t7,count:otherCount})}return{properties,totalCount}}]})),(0,kea_subscriptions_lib.Vt)(_ref3=>{let{actions}=_ref3;return{dateRange:()=>{actions.loadResponse()},filterTestAccounts:()=>{actions.loadResponse()}}}),(0,index_esm.events)(_ref4=>{let{actions}=_ref4;return{afterMount:()=>{actions.loadResponse()}}})]);var clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),Errors_utils=__webpack_require__("../../frontend/src/lib/components/Errors/utils.ts"),components_TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),ViewRecordingButton=__webpack_require__("../../frontend/src/lib/components/ViewRecordingButton/ViewRecordingButton.tsx"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),lib_utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),copyToClipboard=__webpack_require__("../../frontend/src/lib/utils/copyToClipboard.tsx"),persons_PersonDisplay=__webpack_require__("../../frontend/src/scenes/persons/PersonDisplay.tsx"),person_utils=__webpack_require__("../../frontend/src/scenes/persons/person-utils.ts"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),errorTrackingIssueSceneLogic=__webpack_require__("../../products/error_tracking/frontend/scenes/ErrorTrackingIssueScene/errorTrackingIssueSceneLogic.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let tagColor={yellow:"bg-brand-yellow",red:"bg-brand-red",blue:"bg-brand-blue"};function ExceptionTag(_ref){let{color,label}=_ref;return(0,jsx_runtime.jsx)(src.oe,{size:"small",className:(0,css_classes.cn)("font-semibold text-white border-gray-100/20 px-1 py-[0.1rem] text-[11px] rounded-sm inline",tagColor[color]),children:label})}function use_error_tag_renderer_useErrorTagRenderer(){let{lastSeen,firstSeen,selectedEvent}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);return(0,react.useCallback)(evt=>evt?lastSeen&&evt.timestamp&&(0,dayjs.Bv)(evt.timestamp).isSame(lastSeen)?(0,jsx_runtime.jsx)(ExceptionTag,{color:"red",label:"Last Seen"}):firstSeen&&evt.timestamp&&(0,dayjs.Bv)(evt.timestamp).isSame(firstSeen)?(0,jsx_runtime.jsx)(ExceptionTag,{color:"blue",label:"First Seen"}):selectedEvent&&selectedEvent.uuid==evt.uuid?(0,jsx_runtime.jsx)(ExceptionTag,{color:"yellow",label:"Current"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),[lastSeen,firstSeen,selectedEvent])}var dataNodeLogic=__webpack_require__("../../frontend/src/queries/nodes/DataNode/dataNodeLogic.ts"),InsightViz=__webpack_require__("../../frontend/src/queries/nodes/InsightViz/InsightViz.tsx");let buildKea=index_esm.kea;function defaultCreateKey(_ref){let{queryKey}=_ref;return queryKey}function createDataSourceLogic(createPath,createRecord){let createKey=arguments.length>2&&void 0!==arguments[2]?arguments[2]:defaultCreateKey;return buildKea([(0,index_esm.path)(createPath),(0,index_esm.props)({}),(0,index_esm.key)(createKey),(0,index_esm.connect)(props=>{let sourceKey=createKey(props),dataKey=`DataNode.${sourceKey}`,insightProps={dashboardItemId:`new-AdHoc.${dataKey}`,dataNodeCollectionId:dataKey},vizKey=(0,InsightViz.gG)(insightProps),dataLogic=(0,dataNodeLogic.M)({key:vizKey,query:props.query,autoLoad:!0});return{values:[dataLogic,["response","responseLoading","canLoadNextData"]],actions:[dataLogic,["loadData","loadNextData"]]}}),(0,index_esm.selectors)({items:[s=>[s.response],response=>response&&response.results?response.results.map(createRecord):[]],itemsLoading:[s=>[s.responseLoading],loading=>loading]})])}var dist=__webpack_require__("../../node_modules/.pnpm/ts-pattern@4.3.0/node_modules/ts-pattern/dist/index.js");function DataSourceTable_DataSourceTable(_ref){let{dataSource,className,embedded=!1,onRowClick,rowRibbonColor,expandable,children}=_ref,{items,itemsLoading}=(0,index_esm.useValues)(dataSource),columns=react.Children.toArray(children).filter(child=>(0,react.isValidElement)(child)).map(child=>{let props=child.props;return{title:props.title,align:props.align,width:props.width,render:(_,record,recordIndex,rowCount)=>props.cellRenderer(record,recordIndex,rowCount)}}),onRow=(0,react.useCallback)(record=>onRowClick?{onClick:event=>{onRowClick(record,event)},className:"hover:bg-fill-highlight-50"}:{},[onRowClick]);return(0,jsx_runtime.jsx)(src.g3,{dataSource:items,columns:columns,loading:itemsLoading,embedded:embedded,onRow:onRow,className:className,footer:(0,jsx_runtime.jsx)(DataSourceTableFooter,{dataSource:dataSource}),rowRibbonColor:rowRibbonColor,expandable:expandable})}function DataSourceTableFooter(_ref2){let{dataSource}=_ref2,{itemsLoading,canLoadNextData}=(0,index_esm.useValues)(dataSource),{loadNextData}=(0,index_esm.useActions)(dataSource);return(0,jsx_runtime.jsx)("div",{className:"p-1",children:(0,jsx_runtime.jsxs)(src.Jp,{className:"rounded-tl-none rounded-tr-none",loading:itemsLoading,center:!0,fullWidth:!0,disabledReason:(0,dist.EQ)([itemsLoading,canLoadNextData]).with([!0,dist.P.any],()=>"Loading...").with([dist.P.any,!1],()=>"Increase date range or change filters").otherwise(()=>void 0),onClick:()=>loadNextData(),children:[itemsLoading&&(0,jsx_runtime.jsx)("span",{children:"Loading..."}),!itemsLoading&&!canLoadNextData&&(0,jsx_runtime.jsx)("span",{children:"No more entries"}),!itemsLoading&&canLoadNextData&&(0,jsx_runtime.jsx)("span",{children:"Load More"})]})})}function DataSourceTable_DataSourceTableColumn(_){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}var components_ExceptionAttributesPreview=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionAttributesPreview/index.ts");let eventsSourceLogic_eventsSourceLogic=createDataSourceLogic(()=>["products","error_tracking","components","EventsTable","eventsSourceLogic"],function rowToRecord(row){return{uuid:row[0].uuid,timestamp:row[1],person:row[2],properties:row[0].properties}});function EventsTable(_ref){let{query,queryKey,selectedEvent,onEventSelect}=_ref,tagRenderer=use_error_tag_renderer_useErrorTagRenderer(),dataSource=eventsSourceLogic_eventsSourceLogic({queryKey,query});function isEventSelected(record){return!!selectedEvent&&selectedEvent.uuid===record.uuid}function toggleSelectedEvent(record){return isEventSelected(record)?onEventSelect(null):onEventSelect(record)}function renderUUID(record){return(0,jsx_runtime.jsx)("div",{className:"flex items-center",children:(0,jsx_runtime.jsx)("input",{type:"radio",className:"cursor-pointer",checked:isEventSelected(record),onChange:()=>{}})})}function renderPerson(record){let display=(0,person_utils.yh)(record.person);return(0,jsx_runtime.jsx)("div",{className:"flex items-center",children:(0,jsx_runtime.jsx)("span",{onClick:utils.de,children:(0,jsx_runtime.jsx)(persons_PersonDisplay.I,{person:record.person,noLink:!0,children:(0,jsx_runtime.jsxs)(src.rU,{subtle:!0,className:(0,clsx_m.default)("flex items-center"),children:[(0,jsx_runtime.jsx)(persons_PersonDisplay.T,{displayName:display,person:record.person,size:"md"}),(0,jsx_runtime.jsx)("span",{className:(0,clsx_m.default)("ph-no-capture","truncate"),children:display})]})})})})}function renderAttributes(record){return(0,jsx_runtime.jsxs)("div",{className:"flex justify-end gap-1",children:[tagRenderer(record),(0,jsx_runtime.jsx)(components_ExceptionAttributesPreview.x,{attributes:(0,Errors_utils.OZ)(record.properties)})]})}function renderTime(record){return(0,jsx_runtime.jsx)(components_TZLabel.w,{time:record.timestamp})}return(0,jsx_runtime.jsxs)(DataSourceTable_DataSourceTable,{dataSource:dataSource,embedded:!0,onRowClick:toggleSelectedEvent,className:"overflow-auto",children:[(0,jsx_runtime.jsx)(DataSourceTable_DataSourceTableColumn,{width:"40px",cellRenderer:renderUUID}),(0,jsx_runtime.jsx)(DataSourceTable_DataSourceTableColumn,{title:"Person",cellRenderer:renderPerson}),(0,jsx_runtime.jsx)(DataSourceTable_DataSourceTableColumn,{title:"Time",cellRenderer:renderTime}),(0,jsx_runtime.jsx)(DataSourceTable_DataSourceTableColumn,{title:"Labels",align:"right",cellRenderer:renderAttributes}),(0,jsx_runtime.jsx)(DataSourceTable_DataSourceTableColumn,{title:"Actions",align:"right",cellRenderer:Actions})]})}let Actions=record=>{let{onClick,disabledReason}=(0,ViewRecordingButton.m)({sessionId:(0,Errors_utils.MQ)(record.properties),recordingStatus:(0,Errors_utils.W7)(record.properties),timestamp:record.timestamp,inModal:!0});return(0,jsx_runtime.jsxs)("div",{className:"flex justify-end",children:[(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{disabledReasons:(0,lib_utils.HD)(disabledReason)?{[disabledReason]:!0}:{},onClick:onClick,tooltip:"View recording",children:(0,jsx_runtime.jsx)(icons.Ud,{})}),record.properties.$ai_trace_id&&(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{fullWidth:!0,onClick:event=>{(0,utils.de)(event),urls.j.llmAnalyticsTrace(record.properties.$ai_trace_id,{event:record.uuid,timestamp:record.timestamp})},disabledReasons:{"There is no LLM Trace ID on this event":!record.properties.$ai_trace_id},tooltip:"View LLM Trace",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconAI,{})}),(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{"data-attr":"events-table-event-link",onClick:event=>{(0,utils.de)(event),(0,copyToClipboard.v)(urls.j.absolute(urls.j.currentProject(urls.j.event(String(record.uuid),record.timestamp))),"link to event")},tooltip:"Copy link to exception event",children:(0,jsx_runtime.jsx)(icons.JH,{})})]})};var ExceptionCard=__webpack_require__("../../products/error_tracking/frontend/components/ExceptionCard/ExceptionCard.tsx"),IssueFilters=__webpack_require__("../../products/error_tracking/frontend/components/IssueFilters/index.tsx"),issueFiltersLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueFilters/issueFiltersLogic.ts"),use_sparkline_data=__webpack_require__("../../products/error_tracking/frontend/hooks/use-sparkline-data.tsx");function useSparklineEvents(){let{firstSeen,lastSeen,selectedEvent}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);return(0,react.useMemo)(()=>{let events=[];return firstSeen&&events.push({id:"first_seen",date:firstSeen.toDate(),color:"var(--brand-blue)",payload:"First Seen",radius:6}),selectedEvent&&!isFirstOrLastEvent(firstSeen,lastSeen,selectedEvent)&&events.push({id:"current",date:new Date(selectedEvent.timestamp),color:"var(--brand-yellow)",payload:"Current",radius:6}),lastSeen&&events.push({id:"last_seen",date:lastSeen.toDate(),color:"var(--brand-red)",payload:"Last Seen",radius:6}),events},[firstSeen,lastSeen,selectedEvent])}function isFirstOrLastEvent(firstSeen,lastSeen,selectedEvent){return!!(selectedEvent&&firstSeen?.isSame(selectedEvent.timestamp)||selectedEvent&&lastSeen?.isSame(selectedEvent.timestamp))}var use_sparkline_options=__webpack_require__("../../products/error_tracking/frontend/hooks/use-sparkline-options.tsx"),SparklineChart=__webpack_require__("../../products/error_tracking/frontend/components/SparklineChart/SparklineChart.tsx");function TimeBoundary(_ref){let{time,loading,label,updateDateRange}=_ref,{dateRange}=(0,index_esm.useValues)(issueFiltersLogic.H),{setDateRange}=(0,index_esm.useActions)(issueFiltersLogic.H),onClick=(0,react.useCallback)(e=>{setDateRange(updateDateRange(dateRange)),e.preventDefault(),e.stopPropagation()},[dateRange,updateDateRange,setDateRange]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,dist.EQ)([loading,time]).with([!0,dist.P.any],()=>(0,jsx_runtime.jsx)(src.yW,{className:"w-[50px] h-2"})).with([!1,dist.P.nullish],()=>(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted",children:"-"})).with([!1,dist.P.any],()=>(0,jsx_runtime.jsx)("span",{onClick:onClick,className:"hover:bg-fill-button-tertiary-hover px-1 rounded flex items-center cursor-pointer",children:(0,jsx_runtime.jsx)(components_TZLabel.w,{time:time,className:"border-dotted border-b text-xs text-muted",title:label})})).exhaustive()})}let Metadata=_ref=>{let{children,className}=_ref,{aggregations,summaryLoading,issueLoading,firstSeen,lastSeen}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),[hoveredDatum,setHoveredDatum]=(0,react.useState)(null),sparklineData=(0,use_sparkline_data.U)(),sparklineEvents=useSparklineEvents(),sparklineOptions=(0,use_sparkline_options.Q)({onDatumMouseEnter:d=>{setHoveredDatum({type:"datum",data:d})},onDatumMouseLeave:()=>{setHoveredDatum(null)},onEventMouseEnter:d=>{setHoveredDatum({type:"event",data:d})},onEventMouseLeave:()=>{setHoveredDatum(null)}},[setHoveredDatum]);return(0,jsx_runtime.jsxs)(src.Mi,{className:(0,clsx_m.default)("p-0",className),hoverEffect:!1,children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center h-[40px] px-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-end items-center h-full",children:(0,dist.EQ)(hoveredDatum).when(data=>shouldRenderIssueMetrics(data),()=>(0,jsx_runtime.jsx)(IssueMetrics,{aggregations:aggregations,summaryLoading:summaryLoading})).with({type:"datum"},data=>renderDataPoint(data.data)).with({type:"event"},data=>renderEventPoint(data.data)).otherwise(()=>null)}),(0,jsx_runtime.jsx)("div",{className:"flex justify-end items-center h-full",children:(0,dist.EQ)(hoveredDatum).when(data=>shouldRenderIssueMetrics(data),()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(TimeBoundary,{time:firstSeen,loading:issueLoading,label:"First Seen",updateDateRange:dateRange=>(dateRange.date_from=firstSeen?.toISOString(),dateRange)}),(0,jsx_runtime.jsx)(posthog_icons_es.IconChevronRight,{}),(0,jsx_runtime.jsx)(TimeBoundary,{time:lastSeen,loading:summaryLoading,label:"Last Seen",updateDateRange:dateRange=>(dateRange.date_to=lastSeen?.endOf("minute").toISOString(),dateRange)})]})).with({type:"datum"},data=>renderDate(data.data.date)).with({type:"event"},data=>renderDate(data.data.date)).otherwise(()=>null)})]}),(0,jsx_runtime.jsx)("div",{onClick:utils.de,children:(0,jsx_runtime.jsx)(SparklineChart.P,{data:sparklineData,events:sparklineEvents,options:sparklineOptions,className:"h-full pt-0"})}),children]})};function shouldRenderIssueMetrics(data){return null==data||"datum"==data.type&&0==data.data.value}function IssueMetrics(_ref2){let{aggregations,summaryLoading}=_ref2,hasSessionCount=aggregations&&0!==aggregations.sessions;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center h-full gap-3",children:[renderMetric("Occurrences",aggregations?.occurrences,summaryLoading),renderMetric("Sessions",aggregations?.sessions,summaryLoading,hasSessionCount?void 0:"No $session_id was set for any event in this issue"),renderMetric("Users",aggregations?.users,summaryLoading)]})}function renderMetric(name,value,loading,tooltip){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,dist.EQ)([loading]).with([!0],()=>(0,jsx_runtime.jsx)(src.yW,{className:"w-[80px] h-2"})).with([!1],()=>(0,jsx_runtime.jsx)(src.u,{title:tooltip,delayMs:0,placement:"right",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-lg font-bold inline-block",children:null==value?"0":(0,lib_utils.d$)(value)}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted inline-block",children:name})]})})).exhaustive()})}function renderDate(date){return(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted whitespace-nowrap",children:(0,dayjs.Bv)(date).utc().format("D MMM YYYY HH:mm (UTC)")})}function renderDataPoint(d){return renderMetric("Occurrences",d.value,!1)}function renderEventPoint(d){return(0,jsx_runtime.jsx)("div",{className:"flex justify-start items-center h-full gap-1",children:(0,jsx_runtime.jsx)("div",{className:"text-lg font-bold",children:d.payload})})}var SetupPrompt=__webpack_require__("../../products/error_tracking/frontend/components/SetupPrompt/SetupPrompt.tsx"),SceneTextInput=__webpack_require__("../../frontend/src/lib/components/Scenes/SceneTextInput.tsx"),SceneUpdateActivityInfo=__webpack_require__("../../frontend/src/lib/components/Scenes/SceneUpdateActivityInfo.tsx"),SceneLayout=__webpack_require__("../../frontend/src/layout/scenes/SceneLayout.tsx"),colors=__webpack_require__("../../frontend/src/lib/colors.ts"),PropertyIcon=__webpack_require__("../../frontend/src/lib/components/PropertyIcon/PropertyIcon.tsx"),Tooltip=__webpack_require__("../../frontend/src/lib/lemon-ui/Tooltip/index.ts");function BreakdownsStackedBar(_ref){let{properties,totalCount,propertyName}=_ref;return(0,jsx_runtime.jsx)("div",{className:"flex w-full h-4 rounded overflow-hidden bg-fill-secondary",children:properties.map((item,index)=>{let percentage=item.count/totalCount*100;return(0,jsx_runtime.jsx)(Tooltip.u,{delayMs:0,title:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1.5 font-semibold",children:[(0,jsx_runtime.jsx)(PropertyIcon.V,{property:propertyName,value:item.label}),(0,jsx_runtime.jsx)("span",{children:item.label})]}),(0,jsx_runtime.jsxs)("div",{className:"opacity-70",children:[percentage.toFixed(1),"%"]})]}),children:(0,jsx_runtime.jsx)("div",{className:"h-full hover:opacity-80 flex items-center justify-center",style:{width:`${percentage}%`,backgroundColor:(0,colors._r)(index)},children:percentage>8&&(0,jsx_runtime.jsx)(PropertyIcon.V,{property:propertyName,value:item.label,className:"text-white text-xs opacity-90"})})},index)})})}function BreakdownsTileButton(_ref){let{item}=_ref,{breakdownProperty}=(0,index_esm.useValues)(breakdownFiltersLogic),{setBreakdownProperty}=(0,index_esm.useActions)(breakdownFiltersLogic),{category}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{setCategory}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),isSelected="breakdowns"===category&&breakdownProperty===item.property;return(0,jsx_runtime.jsx)("button",{onClick:()=>{setBreakdownProperty(item.property),setCategory("breakdowns"),dist_module.ZP.capture(consts.KJ.MiniBreakdownsPropertySelected,{property:item.property})},className:(0,css_classes.cn)("w-full px-2.5 py-2 text-left border-l-[3px] cursor-pointer",isSelected?"border-l-brand-yellow":"border-l-transparent"),children:(0,jsx_runtime.jsx)(BreakdownPreview,{title:item.title,property:item.property})})}function BreakdownPreview(_ref2){let{title,property}=_ref2,{getBreakdownForProperty,responseLoading}=(0,index_esm.useValues)(miniBreakdownsLogic),{properties,totalCount}=getBreakdownForProperty(property),hasOnlyNullBreakdown=1===properties.length&&properties[0].label===insights_utils.ZA;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"font-semibold text-xs w-[30%]",children:title}),(0,jsx_runtime.jsx)("div",{className:"w-[70%]",children:responseLoading?(0,jsx_runtime.jsx)("div",{className:"h-4 flex items-center justify-center",children:(0,jsx_runtime.jsx)(src.yW,{})}):0===properties.length||hasOnlyNullBreakdown?(0,jsx_runtime.jsx)("div",{className:"text-muted text-xs h-4 flex items-center justify-center",children:"No data"}):(0,jsx_runtime.jsx)(BreakdownsStackedBar,{properties:properties,totalCount:totalCount,propertyName:property})})]})}function MiniBreakdowns(){return(0,jsx_runtime.jsx)("div",{className:"border rounded bg-surface-primary overflow-hidden divide-y",children:consts.yg.map(item=>(0,jsx_runtime.jsx)(BreakdownsTileButton,{item:item},item.property))})}var GitHubIntegrationHelpers=__webpack_require__("../../frontend/src/lib/integrations/GitHubIntegrationHelpers.tsx"),LinearIntegrationHelpers=__webpack_require__("../../frontend/src/lib/integrations/LinearIntegrationHelpers.tsx"),integrationsLogic=__webpack_require__("../../frontend/src/lib/integrations/integrationsLogic.ts"),integrations_utils=__webpack_require__("../../frontend/src/lib/integrations/utils.ts"),LemonField=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),WrappingLoadingSkeleton=__webpack_require__("../../frontend/src/lib/ui/WrappingLoadingSkeleton/WrappingLoadingSkeleton.tsx");let ERROR_TRACKING_INTEGRATIONS=["linear","github","gitlab"],ExternalReferences=()=>{var _issue$external_issue;let{issue,issueLoading}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{createExternalReference}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),{getIntegrationsByKind,integrationsLoading}=(0,index_esm.useValues)(integrationsLogic.a);if(!issue||integrationsLoading)return(0,jsx_runtime.jsx)(WrappingLoadingSkeleton.x,{fullWidth:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,"aria-hidden":!0,children:"Loading"})});let errorTrackingIntegrations=getIntegrationsByKind(ERROR_TRACKING_INTEGRATIONS),externalReferences=null!==(_issue$external_issue=issue.external_issues)&&void 0!==_issue$external_issue?_issue$external_issue:[],creatingIssue=issue&&issueLoading,onClickCreateIssue=integration=>{"github"===integration.kind?createGitHubIssueForm(issue,integration,createExternalReference):"gitlab"===integration.kind?createGitLabIssueForm(issue,integration,createExternalReference):integration&&"linear"===integration.kind&&createLinearIssueForm(issue,integration,createExternalReference)};return(0,jsx_runtime.jsxs)("div",{children:[externalReferences.map(reference=>(0,jsx_runtime.jsx)(src.rU,{to:reference.external_url,target:"_blank",onClick:()=>{dist_module.ZP.capture("error_tracking_external_issue_clicked",{issue_id:issue.id,integration_kind:reference.integration.kind})},children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{fullWidth:!0,disabled:issueLoading,children:[(0,jsx_runtime.jsx)(IntegrationIcon,{kind:reference.integration.kind}),reference.integration.display_name]})},reference.id)),0===errorTrackingIntegrations.length?(0,jsx_runtime.jsx)(SetupIntegrationsButton,{}):errorTrackingIntegrations.length>1?(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{fullWidth:!0,disabled:creatingIssue,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),creatingIssue?"Creating issue...":"Create issue"]})}),(0,jsx_runtime.jsx)(DropdownMenu.AW,{loop:!0,matchTriggerWidth:!0,children:(0,jsx_runtime.jsx)(DropdownMenu.Qk,{children:errorTrackingIntegrations.map(integration=>(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>onClickCreateIssue(integration),children:[(0,jsx_runtime.jsx)(IntegrationIcon,{kind:integration.kind}),integration.display_name]})},integration.id))})})]}):(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{fullWidth:!0,onClick:()=>onClickCreateIssue(errorTrackingIntegrations[0]),disabled:issueLoading,children:[(0,jsx_runtime.jsx)(IntegrationIcon,{kind:errorTrackingIntegrations[0].kind}),creatingIssue?"Creating issue...":"Create issue"]})]})};function SetupIntegrationsButton(){return(0,jsx_runtime.jsx)(src.rU,{to:urls.j.errorTrackingConfiguration({tab:"error-tracking-integrations"}),buttonProps:{variant:"panel",fullWidth:!0,menuItem:!0},tooltip:"Go to integrations configuration",target:"_blank",children:"Setup integrations"})}let createGitHubIssueForm=(issue,integration,onSubmit)=>{let posthogUrl=window.location.origin+window.location.pathname,body=issue.description+"\n<br/>\n<br/>\n"+`**PostHog issue:** ${posthogUrl}`;src.dn.openForm({title:"Create GitHub issue",shouldAwaitSubmit:!0,initialValues:{title:issue.name,body:body,integrationId:integration.id,repositories:[]},content:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jsx_runtime.jsx)(GitHubIntegrationHelpers.k8,{integrationId:integration.id}),(0,jsx_runtime.jsx)(LemonField.D,{name:"title",label:"Title",children:(0,jsx_runtime.jsx)(src.DF,{"data-attr":"issue-title",placeholder:"Issue title",size:"small"})}),(0,jsx_runtime.jsx)(LemonField.D,{name:"body",label:"Body",children:(0,jsx_runtime.jsx)(src._V,{"data-attr":"issue-body",placeholder:"Start typing..."})})]}),errors:{title:title=>title?void 0:"You must enter a title",repositories:repositories=>repositories&&0===repositories.length?"You must choose a repository":void 0},onSubmit:_ref=>{let{title,body,repositories}=_ref;onSubmit(integration.id,{repository:repositories[0],title,body})}})},createGitLabIssueForm=(issue,integration,onSubmit)=>{let posthogUrl=window.location.origin+window.location.pathname,body=issue.description+"\n<br/>\n<br/>\n"+`**PostHog issue:** ${posthogUrl}`;src.dn.openForm({title:"Create GitLab issue",shouldAwaitSubmit:!0,initialValues:{title:issue.name,body:body,integrationId:integration.id},content:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"title",label:"Title",children:(0,jsx_runtime.jsx)(src.DF,{"data-attr":"issue-title",placeholder:"Issue title",size:"small"})}),(0,jsx_runtime.jsx)(LemonField.D,{name:"body",label:"Body",children:(0,jsx_runtime.jsx)(src._V,{"data-attr":"issue-body",placeholder:"Start typing..."})})]}),errors:{title:title=>title?void 0:"You must enter a title"},onSubmit:_ref2=>{let{title,body}=_ref2;onSubmit(integration.id,{title,body})}})},createLinearIssueForm=(issue,integration,onSubmit)=>{src.dn.openForm({title:"Create Linear issue",shouldAwaitSubmit:!0,initialValues:{title:issue.name,description:issue.description,integrationId:integration.id,teamIds:[]},content:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jsx_runtime.jsx)(LinearIntegrationHelpers.Af,{integrationId:integration.id}),(0,jsx_runtime.jsx)(LemonField.D,{name:"title",label:"Title",children:(0,jsx_runtime.jsx)(src.DF,{"data-attr":"issue-title",placeholder:"Issue title",size:"small"})}),(0,jsx_runtime.jsx)(LemonField.D,{name:"description",label:"Description",children:(0,jsx_runtime.jsx)(src._V,{"data-attr":"issue-description",placeholder:"Start typing..."})})]}),errors:{title:title=>title?void 0:"You must enter a title",teamIds:teamIds=>teamIds&&0===teamIds.length?"You must choose a team":void 0},onSubmit:_ref3=>{let{title,description,teamIds}=_ref3;onSubmit(integration.id,{team_id:teamIds[0],title,description})}})},IntegrationIcon=_ref4=>{let{kind}=_ref4;return(0,jsx_runtime.jsx)("img",{src:integrations_utils.U[kind],className:"w-5 h-5 rounded-sm"})};var types=__webpack_require__("../../products/tasks/frontend/types.ts");let IssueTasks=()=>{let{issue,issueLoading,selectedEvent}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{getIntegrationsByKind}=(0,index_esm.useValues)(integrationsLogic.a);return(0,jsx_runtime.jsx)(SceneLayout.ZV,{title:"Tasks",children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{fullWidth:!0,onClick:()=>{issue&&createTaskForm(issue,selectedEvent,getIntegrationsByKind(["github"]))},disabled:issueLoading,variant:"panel",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),"Create task in PostHog"]})})},createTaskForm=(issue,selectedEvent,githubIntegrations)=>{var _issue$name,_description;let posthogUrl=window.location.origin+window.location.pathname,description="";if(selectedEvent?.properties){let props=selectedEvent.properties;if(props.$exception_list&&Array.isArray(props.$exception_list)&&props.$exception_list.length>0){let exception=props.$exception_list[0];description+=`## ${(0,Errors_utils.yj)(exception)}: ${exception.value}

`,exception.mechanism&&(description+=`**Handled:** ${exception.mechanism.handled?"Yes":"No"}

`),exception.stacktrace&&"resolved"===exception.stacktrace.type&&(description+=`## Stack Trace

`,exception.stacktrace.frames.slice().reverse().forEach((frame,index)=>{description+=`**${index+1}.** `;let resolvedName=(0,Errors_utils.p1)(frame);resolvedName?description+=`\`${resolvedName}\``:description+="Anonymous function",frame.source&&(description+=` in \`${frame.source}\``),frame.line&&(description+=` at line ${frame.line}`,frame.column&&(description+=`:${frame.column}`)),description+="\n",frame.resolve_failure&&(description+=`   *Source map resolution failed: ${frame.resolve_failure}*
`)}),description+="\n")}else description+=`## ${issue.name}

`,props.$exception_message&&(description+=`**Message:** ${props.$exception_message}

`),props.$exception_type&&(description+=`**Type:** ${props.$exception_type}

`);(props.$browser||props.$os||props.$lib_version)&&(description+=`## Environment

`,props.$browser&&(description+=`**Browser:** ${props.$browser}
`),props.$os&&(description+=`**OS:** ${props.$os}
`),props.$lib_version&&(description+=`**SDK Version:** ${props.$lib_version}
`),props.$viewport_height&&props.$viewport_width&&(description+=`**Viewport:** ${props.$viewport_width}x${props.$viewport_height}
`),description+="\n"),props.$current_url&&(description+=`**Page:** ${props.$current_url}
`),props.$referrer&&(description+=`**Referrer:** ${props.$referrer}
`),props.distinct_id&&(description+=`**User ID:** ${props.distinct_id}
`),description+="\n"}else description+=`## ${issue.name}

`;description+=`---

**PostHog Error Tracking:** ${posthogUrl}
**First Seen:** ${new Date(issue.first_seen).toLocaleString()}
`;let defaultIntegration=githubIntegrations[0];src.dn.openForm({title:"Create PostHog task",initialValues:{title:null!==(_issue$name=issue.name)&&void 0!==_issue$name?_issue$name:"",description:null!==(_description=description)&&void 0!==_description?_description:"",repositories:[]},content:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-y-4",children:[githubIntegrations.length>0&&(0,jsx_runtime.jsx)(GitHubIntegrationHelpers.k8,{integrationId:defaultIntegration.id}),(0,jsx_runtime.jsx)(LemonField.D,{name:"title",label:"Title",children:(0,jsx_runtime.jsx)(src.DF,{"data-attr":"task-title",placeholder:"Task title",size:"small"})}),(0,jsx_runtime.jsx)(LemonField.D,{name:"description",label:"Description",children:(0,jsx_runtime.jsx)(src._V,{"data-attr":"task-description",placeholder:"Start typing...",rows:8})})]}),errors:{title:title=>title?void 0:"You must enter a title",repositories:repositories=>githubIntegrations.length>0&&(!repositories||0===repositories.length)?"You must choose a repository":void 0},onSubmit:async _ref=>{let{title,description,repositories}=_ref;try{let taskData={title,description,origin_product:types.A.ERROR_TRACKING};if(githubIntegrations.length>0&&repositories&&repositories.length>0){let repoName=repositories[0];if(repoName&&"string"==typeof repoName){let organization,repository;repoName.includes("/")?[organization,repository]=repoName.split("/",2):(organization=defaultIntegration.config?.account?.name||defaultIntegration.config?.account?.login||"GitHub",repository=repoName),taskData.github_integration=defaultIntegration.id,taskData.repository_config={organization,repository}}}await api.ZP.tasks.create(taskData)}catch(error){console.error("Failed to create task:",error)}}})};var sidePanelLogic=__webpack_require__("../../frontend/src/layout/navigation-3000/sidepanel/sidePanelLogic.tsx"),src_types=__webpack_require__("../../frontend/src/types.ts");function BaseActions(_ref){let{issueId,resourceType}=_ref,{openSidePanel}=(0,index_esm.useActions)(sidePanelLogic.x);return(0,jsx_runtime.jsx)(SceneLayout.EJ,{children:(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{onClick:()=>openSidePanel(src_types.H$.Discussion),tooltip:"Comment",menuItem:!0,className:"justify-center",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconComment,{}),(0,jsx_runtime.jsx)("span",{className:"hidden @[200px]:block",children:"Comment"})]}),(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{onClick:()=>{(0,copyToClipboard.v)(window.location.origin+urls.j.errorTrackingIssue(issueId),"issue link")},tooltip:"Share","data-attr":`${resourceType}-share`,menuItem:!0,className:"justify-center",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconShare,{}),(0,jsx_runtime.jsx)("span",{className:"hidden @[200px]:block",children:"Share"})]})]})})}var AssigneeDisplay=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeDisplay.tsx"),AssigneeSelect=__webpack_require__("../../products/error_tracking/frontend/components/Assignee/AssigneeSelect.tsx");let IssueAssigneeSelect=_ref=>{let{assignee,disabled,onChange}=_ref;return(0,jsx_runtime.jsx)(SceneLayout.ZV,{title:"Assignee",children:(0,jsx_runtime.jsx)(AssigneeSelect.i,{assignee:assignee,onChange:onChange,children:(anyAssignee,isOpen)=>(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,fullWidth:!0,disabled:disabled,className:"flex justify-between","data-state":isOpen?"open":"closed",variant:"panel",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)(AssigneeDisplay._x,{assignee:anyAssignee,size:"small"}),(0,jsx_runtime.jsx)(AssigneeDisplay.VQ,{assignee:anyAssignee,className:"ml-1",size:"small"})]}),!disabled&&(0,jsx_runtime.jsx)(DropdownMenu.Ac,{})]})})})};var issueActionsLogic=__webpack_require__("../../products/error_tracking/frontend/components/IssueActions/issueActionsLogic.tsx");function IssueCohort(_ref){let{issue}=_ref,cohort=issue.cohort;return(0,jsx_runtime.jsx)(SceneLayout.ZV,{title:"Cohort",children:cohort?(0,jsx_runtime.jsx)(IssueCohortDisplay,{issueId:issue.id,cohort:cohort}):(0,jsx_runtime.jsx)(IssueCohortCreate,{issue:issue})})}function IssueCohortCreate(_ref2){let{issue}=_ref2,{createIssueCohort}=(0,index_esm.useAsyncActions)(issueActionsLogic.x),onCreate=(0,react.useCallback)(async(name,description)=>{await createIssueCohort(issue.id,name,description),src.UJ.success("Cohort created")},[issue,createIssueCohort]);return(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{variant:"panel",fullWidth:!0,onClick:()=>createIssueCohortForm(issue,onCreate),children:"Create Cohort"})}function createIssueCohortForm(issue,onSubmit){src.dn.openForm({title:"Create Cohort",shouldAwaitSubmit:!0,initialValues:{cohortName:`Impacted by Issue [${issue.name}${issue.description?` - ${issue.description.substring(0,200)}`:""}]`,cohortDescription:new URL(urls.j.errorTrackingIssue(issue.id),window.location.href).toString()},content:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-y-2 w-[600px]",children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"cohortName",label:"Cohort Name",children:(0,jsx_runtime.jsx)(src.DF,{"data-attr":"cohort-name",placeholder:"Cohort name",size:"small"})}),(0,jsx_runtime.jsx)(LemonField.D,{name:"cohortDescription",label:"Cohort Description",children:(0,jsx_runtime.jsx)(src.DF,{"data-attr":"cohort-description",placeholder:"Cohort description"})})]}),errors:{cohortName:name=>name?void 0:"You must enter a title"},onSubmit:_ref3=>{let{cohortName,cohortDescription}=_ref3;return onSubmit(cohortName,cohortDescription)}})}function IssueCohortDisplay(_ref4){let{cohort}=_ref4;return(0,jsx_runtime.jsx)(src.rU,{to:urls.j.cohort(cohort.id),tooltip:"Edit Cohort",target:"_blank",children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{variant:"panel",fullWidth:!0,children:cohort.name})})}var Indicators=__webpack_require__("../../products/error_tracking/frontend/components/Indicators.tsx");let IssueStatusSelect=_ref=>{let{status,onChange}=_ref;return(0,jsx_runtime.jsx)(SceneLayout.ZV,{title:"Status",children:(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{fullWidth:!0,className:"flex justify-between",variant:"panel",menuItem:!0,children:[(0,jsx_runtime.jsx)(Indicators.E,{status:status,withTooltip:!0}),(0,jsx_runtime.jsx)(DropdownMenu.Ac,{})]})}),(0,jsx_runtime.jsx)(DropdownMenu.AW,{loop:!0,matchTriggerWidth:!0,children:(0,jsx_runtime.jsx)(DropdownMenu.Qk,{children:"active"===status?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>onChange("resolved"),children:(0,jsx_runtime.jsx)(Indicators.E,{status:"resolved",intent:!0})})}),(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>onChange("suppressed"),children:(0,jsx_runtime.jsx)(Indicators.E,{status:"suppressed",intent:!0})})})]}):(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>onChange("active"),children:(0,jsx_runtime.jsx)(Indicators.E,{status:"active",intent:!0})})})})})]})})};var LemonModal=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonModal/LemonModal.tsx"),RuntimeIcon=__webpack_require__("../../products/error_tracking/frontend/components/RuntimeIcon.tsx");function SimilarIssueCard(_ref){let{issue,onClick,actions}=_ref,relatedRuntime=(0,Errors_utils.sm)(issue.library);return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between px-2 py-1 border rounded bg-surface-primary",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-0.5 min-w-0 group flex-grow cursor-pointer",onClick:onClick,children:[(0,jsx_runtime.jsxs)("div",{className:"font-medium flex items-center gap-2 text-sm truncate group-hover:text-accent",children:[(0,jsx_runtime.jsx)(RuntimeIcon.Z,{runtime:relatedRuntime,fontSize:"0.7rem",className:"shrink-0"}),issue.name]}),issue.description&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-secondary truncate",children:issue.description})]}),actions]})}let SimilarIssuesList=()=>{let{issue,similarIssues,similarIssuesLoading,similarIssuesMaxDistance}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{loadSimilarIssues,setSimilarIssuesMaxDistance}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),{mergeIssues}=(0,index_esm.useAsyncActions)(issueActionsLogic.x),[selectedIssue,setSelectedIssue]=(0,react.useState)(null);(0,react.useEffect)(()=>{loadSimilarIssues()},[loadSimilarIssues]);let handleMerge=async(relatedIssueId,maxDistance)=>{issue&&(await mergeIssues([issue.id,relatedIssueId]),dist_module.ZP.capture("similar_issue_merged",{maxDistance:maxDistance}),loadSimilarIssues(!0))};return(0,jsx_runtime.jsxs)(SceneLayout.ZV,{title:"Similar issues",children:[similarIssuesLoading?(0,jsx_runtime.jsx)(src.$j,{}):similarIssues.length>0?(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-1",children:similarIssues.map(similarIssue=>(0,jsx_runtime.jsx)(SimilarIssueCard,{issue:similarIssue,onClick:()=>setSelectedIssue(similarIssue),actions:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"xxs",onClick:()=>handleMerge(similarIssue.id,similarIssuesMaxDistance),className:"shrink-0 px-2 py-3 h-full",children:"Merge"})}))}):(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:(0,jsx_runtime.jsx)(src.Jp,{size:"small",onClick:()=>{setSimilarIssuesMaxDistance(similarIssuesMaxDistance+.1)},className:"w-fit",type:"primary",children:"No similar issues found. Search further?"})}),(0,jsx_runtime.jsxs)(src.fQ,{isOpen:!!selectedIssue,onClose:()=>setSelectedIssue(null),width:"95%",maxWidth:"1400px",children:[(0,jsx_runtime.jsx)(LemonModal.R6,{children:(0,jsx_runtime.jsx)("h3",{children:selectedIssue?.name||"Issue Details"})}),(0,jsx_runtime.jsx)(LemonModal.TL,{children:selectedIssue&&(0,jsx_runtime.jsx)(IssueModalContent,{issueId:selectedIssue.id})})]})]})},IssueModalContent=_ref=>{let{issueId}=_ref,{issue,issueLoading,selectedEvent,initialEventLoading}=(0,index_esm.useValues)((0,errorTrackingIssueSceneLogic.r)({id:issueId})),tagRenderer=use_error_tag_renderer_useErrorTagRenderer();return(0,jsx_runtime.jsx)("div",{className:"ErrorTrackingIssue",children:(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:(0,jsx_runtime.jsx)(ExceptionCard.F,{issue:null!=issue?issue:void 0,issueLoading:issueLoading,event:null!=selectedEvent?selectedEvent:void 0,eventLoading:initialEventLoading,label:tagRenderer(selectedEvent)})})})},RESOURCE_TYPE="issue",ErrorTrackingIssueScenePanel=_ref=>{var _issue$name;let{showActions=!0}=_ref,{issue}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{updateName,updateAssignee,updateStatus}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),hasTasks=(0,useFeatureFlag.y)("TASKS"),hasIssueSplitting=(0,useFeatureFlag.y)("ERROR_TRACKING_ISSUE_SPLITTING"),hasSimilarIssues=(0,useFeatureFlag.y)("ERROR_TRACKING_RELATED_ISSUES"),hasNewIssueLayout=(0,useFeatureFlag.y)("ERROR_TRACKING_ISSUE_LAYOUT_V2");return issue?(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2 @container",children:[showActions&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(BaseActions,{issueId:issue.id,resourceType:RESOURCE_TYPE}),(0,jsx_runtime.jsx)(SceneLayout.bI,{})]}),(0,jsx_runtime.jsx)(SceneTextInput.O,{name:"name",defaultValue:null!==(_issue$name=issue.name)&&void 0!==_issue$name?_issue$name:"",onSave:updateName,dataAttrKey:RESOURCE_TYPE}),(0,jsx_runtime.jsx)(IssueStatusSelect,{status:issue.status,onChange:updateStatus}),(0,jsx_runtime.jsx)(IssueAssigneeSelect,{assignee:issue.assignee,onChange:updateAssignee,disabled:"active"!=issue.status}),(0,jsx_runtime.jsx)(IssueExternalReference,{}),(0,jsx_runtime.jsx)(IssueCohort,{issue:issue}),hasIssueSplitting&&(0,jsx_runtime.jsx)(IssueFingerprints,{}),hasTasks&&(0,jsx_runtime.jsx)(IssueTasks,{}),(0,jsx_runtime.jsx)(SceneUpdateActivityInfo.T,{at:issue.first_seen,prefix:"First seen"}),hasNewIssueLayout&&(0,jsx_runtime.jsx)(IssueBreakdowns,{}),hasSimilarIssues&&(0,jsx_runtime.jsx)(SimilarIssuesList,{})]}):null},IssueExternalReference=()=>(0,jsx_runtime.jsx)(SceneLayout.ZV,{title:"External references",children:(0,jsx_runtime.jsx)(ExternalReferences,{})}),IssueFingerprints=()=>{let{issue,issueFingerprints,issueFingerprintsLoading}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r);return(0,jsx_runtime.jsx)(SceneLayout.ZV,{title:"Fingerprints",children:(0,jsx_runtime.jsx)(src.rU,{to:issue?urls.j.errorTrackingIssueFingerprints(issue.id):void 0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{fullWidth:!0,menuItem:!0,variant:"panel",children:issueFingerprintsLoading?(0,jsx_runtime.jsx)(src.$j,{}):`${(0,lib_utils.Zi)(issueFingerprints.length,"fingerprint")}`})})})},IssueBreakdowns=()=>(0,jsx_runtime.jsx)(SceneLayout.ZV,{title:"Breakdowns",children:(0,jsx_runtime.jsx)(MiniBreakdowns,{})});var Query=__webpack_require__("../../frontend/src/queries/Query/Query.tsx");function BreakdownsChart(){let{issue}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{breakdownProperty,dateRange,filterTestAccounts}=(0,index_esm.useValues)(breakdownFiltersLogic),query=(0,react.useMemo)(()=>{var _issue$id;return(0,queries.LD)({breakdownProperty,dateRange,filterTestAccounts,filterGroup:{type:src_types.J2.And,values:[{type:src_types.J2.And,values:[]}]},issueId:null!==(_issue$id=issue?.id)&&void 0!==_issue$id?_issue$id:""})},[breakdownProperty,dateRange,filterTestAccounts,issue?.id]);return issue?.id?(0,jsx_runtime.jsx)("div",{className:"border rounded bg-surface-primary p-3",children:(0,jsx_runtime.jsx)(Query.A,{query:query,context:{ignoreActionsInSeriesLabels:!0}})}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}var DateFilter=__webpack_require__("../../frontend/src/lib/components/DateFilter/DateFilter.tsx"),PropertyKeyInfo=__webpack_require__("../../frontend/src/lib/components/PropertyKeyInfo.tsx"),TaxonomicFilter=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx"),TaxonomicFilter_types=__webpack_require__("../../frontend/src/lib/components/TaxonomicFilter/types.ts"),Popover=__webpack_require__("../../frontend/src/lib/lemon-ui/Popover/index.ts"),TestAccountFilter=__webpack_require__("../../frontend/src/scenes/insights/filters/TestAccountFilter/index.ts");function BreakdownsSearchBar(){let{dateRange,filterTestAccounts,filterOpen,breakdownProperty}=(0,index_esm.useValues)(breakdownFiltersLogic),{setDateRange,setFilterTestAccounts,setFilterOpen,setBreakdownProperty}=(0,index_esm.useActions)(breakdownFiltersLogic);return(0,jsx_runtime.jsxs)("div",{className:"border rounded bg-surface-primary p-3 flex gap-2 items-center",children:[(0,jsx_runtime.jsx)(DateFilter.f,{size:"small",dateFrom:dateRange.date_from,dateTo:dateRange.date_to,fullWidth:!1,dateOptions:lib_utils.bE,onChange:(changedDateFrom,changedDateTo)=>{setDateRange({date_from:changedDateFrom,date_to:changedDateTo})},allowedRollingDateOptions:["hours","days","weeks","months","years"]}),(0,jsx_runtime.jsx)(Popover.J2,{overlay:(0,jsx_runtime.jsx)(TaxonomicFilter.I,{value:breakdownProperty,onChange:(_,value)=>{value&&(setBreakdownProperty(String(value)),dist_module.ZP.capture(consts.KJ.PropertySelected,{property:String(value)})),setFilterOpen(!1)},taxonomicGroupTypes:consts.Bt}),visible:filterOpen,onClickOutside:()=>setFilterOpen(!1),children:(0,jsx_runtime.jsx)(src.Jp,{size:"small",type:"secondary",onClick:()=>setFilterOpen(!filterOpen),children:(0,jsx_runtime.jsx)(PropertyKeyInfo.T,{value:breakdownProperty,disablePopover:!0,type:TaxonomicFilter_types.t.EventProperties})})}),(0,jsx_runtime.jsx)("div",{className:"flex-1"}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(TestAccountFilter.z,{size:"small",filters:{filter_test_accounts:filterTestAccounts},onChange:_ref=>{let{filter_test_accounts}=_ref;return setFilterTestAccounts(filter_test_accounts||!1)}})})]})}function V2Layout(){let{issue,selectedEvent}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{openSidePanel}=(0,index_esm.useActions)(sidePanelLogic.x),isPostHogSDKIssue=selectedEvent?.properties.$exception_values?.some(v=>v.includes("persistence.isDisabled is not a function"));return(0,jsx_runtime.jsxs)(SetupPrompt.n,{children:[isPostHogSDKIssue&&(0,jsx_runtime.jsx)(src.Vp,{type:"error",action:{to:"https://status.posthog.com/incidents/l70cgmt7475m",children:"Read more"},className:"mb-4",children:"This issue was captured because of a bug in the PostHog SDK. We've fixed the issue, and you won't be charged for any of these exception events. We recommend setting this issue's status to \"Suppressed\"."}),(0,jsx_runtime.jsxs)("div",{className:"ErrorTrackingIssue grid grid-cols-10 gap-6",children:[(0,jsx_runtime.jsxs)("div",{className:"col-span-3 border-r flex flex-col min-h-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between p-1",children:[(0,jsx_runtime.jsx)(SceneBreadcrumbs.A,{}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{onClick:()=>openSidePanel(src_types.H$.Discussion),tooltip:"Comment",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconComment,{})}),(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{onClick:()=>{issue&&(0,copyToClipboard.v)(window.location.origin+urls.j.errorTrackingIssue(issue.id),"issue link")},tooltip:"Share",children:(0,jsx_runtime.jsx)(posthog_icons_es.IconShare,{})})]})]}),(0,jsx_runtime.jsx)(src.p2,{className:"my-0"}),(0,jsx_runtime.jsx)("div",{className:"p-2 space-y-2",children:(0,jsx_runtime.jsx)(ErrorTrackingIssueScenePanel,{showActions:!1})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex col-span-7 gap-y-2 flex-col",children:[(0,jsx_runtime.jsx)(Breadcrumbs,{}),(0,jsx_runtime.jsx)(CategoryContent,{})]})]})]})}let CategoryContent=()=>{let{category,exceptionsCategory,issue,issueLoading,selectedEvent,initialEventLoading,eventsQuery,eventsQueryKey}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{selectEvent,setExceptionsCategory}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),tagRenderer=use_error_tag_renderer_useErrorTagRenderer();return"breakdowns"===category?(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)(BreakdownsSearchBar,{}),(0,jsx_runtime.jsx)(BreakdownsChart,{})]}):"exception"===exceptionsCategory?(0,jsx_runtime.jsx)(ExceptionCard.F,{issue:null!=issue?issue:void 0,issueLoading:issueLoading,event:null!=selectedEvent?selectedEvent:void 0,eventLoading:initialEventLoading,label:tagRenderer(selectedEvent)}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(IssueFilters.h.Root,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,jsx_runtime.jsx)(IssueFilters.h.DateRange,{}),(0,jsx_runtime.jsx)(IssueFilters.h.InternalAccounts,{})]}),(0,jsx_runtime.jsx)(IssueFilters.h.FilterGroup,{})]}),(0,jsx_runtime.jsx)(Metadata,{children:(0,jsx_runtime.jsx)(EventsTable,{query:eventsQuery,queryKey:eventsQueryKey,selectedEvent:null,onEventSelect:selectedEvent=>{selectedEvent&&(selectEvent(selectedEvent),setExceptionsCategory("exception"))}})})]})},Breadcrumbs=()=>{let{category,exceptionsCategory}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{setCategory,setExceptionsCategory}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r);return(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-x-2 border bg-surface-tertiary py-1 px-2 rounded",children:[(0,jsx_runtime.jsx)("div",{children:"Issue"}),(0,jsx_runtime.jsx)("div",{children:"/"}),(0,jsx_runtime.jsx)("div",{className:"flex items-center",children:(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{size:"xs",children:[(0,jsx_runtime.jsx)("span",{className:"capitalize",children:category}),(0,jsx_runtime.jsx)(DropdownMenu.Ac,{})]})}),(0,jsx_runtime.jsx)(DropdownMenu.AW,{loop:!0,align:"start",side:"bottom",children:(0,jsx_runtime.jsxs)(DropdownMenu.Qk,{children:[(0,jsx_runtime.jsxs)(DropdownMenu.Ph,{children:[(0,jsx_runtime.jsx)(DropdownMenu.kt,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,children:["Exceptions",(0,jsx_runtime.jsx)(DropdownMenu.Ac,{intent:"sub"})]})}),(0,jsx_runtime.jsxs)(DropdownMenu.TG,{children:[(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>{setCategory("exceptions"),setExceptionsCategory("exception")},children:"Last seen"})}),(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>{setCategory("exceptions"),setExceptionsCategory("all")},children:"All"})})]})]}),(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>setCategory("breakdowns"),children:"Breakdowns"})})]})})]})}),"exceptions"===category&&"all"!=exceptionsCategory?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{children:"/"}),(0,jsx_runtime.jsx)("div",{children:"Exception"})]}):null]})},scene={component:ErrorTrackingIssueScene_ErrorTrackingIssueScene_ErrorTrackingIssueScene,logic:errorTrackingIssueSceneLogic.r,paramsToProps:_ref=>{let{params:{id},searchParams:{fingerprint,timestamp}}=_ref;return{id,fingerprint,timestamp}}};function ErrorTrackingIssueScene_ErrorTrackingIssueScene_ErrorTrackingIssueScene(){let{issue,issueId,issueLoading,selectedEvent,initialEventLoading,eventsQuery,eventsQueryKey}=(0,index_esm.useValues)(errorTrackingIssueSceneLogic.r),{selectEvent}=(0,index_esm.useActions)(errorTrackingIssueSceneLogic.r),tagRenderer=use_error_tag_renderer_useErrorTagRenderer(),hasIssueSplitting=(0,useFeatureFlag.y)("ERROR_TRACKING_ISSUE_SPLITTING"),hasNewIssueLayout=(0,useFeatureFlag.y)("ERROR_TRACKING_ISSUE_LAYOUT_V2"),isPostHogSDKIssue=selectedEvent?.properties.$exception_values?.some(v=>v.includes("persistence.isDisabled is not a function"));return((0,react.useEffect)(()=>{dist_module.ZP.capture("error_tracking_issue_viewed",{issue_id:issueId})},[issueId]),hasNewIssueLayout)?(0,jsx_runtime.jsx)(SetupPrompt.n,{children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:issueFiltersLogic.H,props:{logicKey:errorTrackingIssueSceneLogic.W},children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:breakdownFiltersLogic,props:{},children:(0,jsx_runtime.jsx)(index_esm.BindLogic,{logic:miniBreakdownsLogic,props:{issueId},children:(0,jsx_runtime.jsx)(V2Layout,{})})})})}):(0,jsx_runtime.jsx)(SetupPrompt.n,{children:(0,jsx_runtime.jsxs)(index_esm.BindLogic,{logic:issueFiltersLogic.H,props:{logicKey:errorTrackingIssueSceneLogic.W},children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between mb-2 -ml-[var(--button-padding-x-lg)]",children:[(0,jsx_runtime.jsx)(SceneBreadcrumbs.A,{}),hasIssueSplitting&&(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{iconOnly:!0,children:(0,jsx_runtime.jsx)(posthog_icons_es.IconEllipsis,{})})}),(0,jsx_runtime.jsx)(DropdownMenu.AW,{loop:!0,align:"end",children:(0,jsx_runtime.jsx)(DropdownMenu.Qk,{children:(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{size:"base",menuItem:!0,onClick:()=>lib.router.actions.push(urls.j.errorTrackingIssueFingerprints(issueId)),children:"Split issue"})})})})]})]}),isPostHogSDKIssue&&(0,jsx_runtime.jsx)(src.Vp,{type:"error",action:{to:"https://status.posthog.com/incidents/l70cgmt7475m",children:"Read more"},className:"mb-4",children:"This issue was captured because of a bug in the PostHog SDK. We've fixed the issue, and you won't be charged for any of these exception events. We recommend setting this issue's status to \"Suppressed\"."}),(0,jsx_runtime.jsxs)("div",{className:"ErrorTrackingIssue grid grid-cols-4 gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-2 col-span-3",children:[(0,jsx_runtime.jsx)(ExceptionCard.F,{issue:null!=issue?issue:void 0,issueLoading:issueLoading,event:null!=selectedEvent?selectedEvent:void 0,eventLoading:initialEventLoading,label:tagRenderer(selectedEvent)}),(0,jsx_runtime.jsxs)(IssueFilters.h.Root,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,jsx_runtime.jsx)(IssueFilters.h.DateRange,{}),(0,jsx_runtime.jsx)(IssueFilters.h.InternalAccounts,{})]}),(0,jsx_runtime.jsx)(IssueFilters.h.FilterGroup,{})]}),(0,jsx_runtime.jsx)(Metadata,{children:(0,jsx_runtime.jsx)(EventsTable,{query:eventsQuery,queryKey:eventsQueryKey,selectedEvent:selectedEvent,onEventSelect:selectedEvent=>selectedEvent?selectEvent(selectedEvent):null})})]}),(0,jsx_runtime.jsx)(ErrorTrackingIssueScenePanel,{})]})]})})}},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../products/error_tracking/frontend/scenes/ErrorTrackingIssueScene/ErrorTrackingIssueScene.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".ErrorTrackingIssue .NotFoundComponent{margin:0 auto}body[theme=light] .ErrorTrackingIssue{--gray-1:var(--color-neutral-50);--gray-2:var(--color-neutral-100);--gray-3:var(--color-neutral-200);--gray-4:var(--color-neutral-300);--gray-5:var(--color-neutral-400);--gray-6:var(--color-neutral-500);--gray-7:var(--color-neutral-600);--gray-8:var(--color-neutral-700);--gray-9:var(--color-neutral-800);--gray-10:var(--color-neutral-900)}body[theme=dark] .ErrorTrackingIssue{--gray-1:var(--color-neutral-900);--gray-2:var(--color-neutral-800);--gray-3:var(--color-neutral-700);--gray-4:var(--color-neutral-600);--gray-5:var(--color-neutral-500);--gray-6:var(--color-neutral-400);--gray-7:var(--color-neutral-300);--gray-8:var(--color-neutral-200);--gray-9:var(--color-neutral-100);--gray-10:var(--color-neutral-50)}",""]),module.exports=exports}}]);
//# sourceMappingURL=6217.2cf0a506.iframe.bundle.js.map