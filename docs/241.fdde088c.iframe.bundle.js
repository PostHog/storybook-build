(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{"./frontend/src/lib/components/Table/utils.tsx":function(x,c,t){"use strict";t.d(c,"a",function(){return u});var A=t("./node_modules/react/index.js"),p=t.n(A),h=t("./frontend/src/lib/hooks/useWindowSize.js"),W=t("./frontend/src/lib/utils/responsiveUtils.tsx");function u(_){return p.a.createElement("span",{style:{whiteSpace:"nowrap"}},_)}var y=function(B){var I=Object(h.a)(),R=I.width,O=Object(W.b)(B),e=!!R&&R<=O;return{isTableScrolling:e,tableScrollBreakpoint:O,tableScrollX:e?"max-content":"".concat(O,"px")}};try{u.displayName="normalizeColumnTitle",u.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:u.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(_){}try{y.displayName="useIsTableScrolling",y.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:y.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(_){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(x,c,t){"use strict";t.r(c),t.d(c,"scene",function(){return q}),t.d(c,"FeatureFlags",function(){return U}),t.d(c,"groupFilters",function(){return D});var A=t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),p=t.n(A),h=t("./node_modules/core-js/modules/es.function.name.js"),W=t.n(h),u=t("./node_modules/core-js/modules/es.number.constructor.js"),y=t.n(u),_=t("./node_modules/core-js/modules/es.object.to-string.js"),B=t.n(_),I=t("./node_modules/core-js/modules/es.array.includes.js"),R=t.n(I),O=t("./node_modules/react/index.js"),e=t.n(O),g=t("./node_modules/kea/lib/index.esm.js"),T=t("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),j=t("./node_modules/antd/es/tabs/index.js"),F=t("./frontend/src/lib/components/Link.tsx"),S=t("./frontend/src/lib/utils.tsx"),N=t("./frontend/src/lib/components/PageHeader.tsx"),z=t("./frontend/src/lib/components/Table/utils.tsx"),M=t("./frontend/src/scenes/urls.ts"),V=t("./frontend/src/lib/utils/stringWithWBR.tsx"),Y=t("./frontend/src/scenes/teamLogic.tsx"),d=t("./frontend/src/lib/components/LemonButton/index.ts"),H=t("./frontend/src/lib/components/LemonDivider/index.ts"),J=t("./frontend/src/lib/components/LemonTable/index.ts"),G=t("./frontend/src/lib/components/LemonButton/More.tsx"),K=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),X=t("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),$=t("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),Q=t("./frontend/src/scenes/feature-flags/activityDescriptions.tsx"),Z=t("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),b=t("./frontend/@posthog/lemon-ui/src/index.ts"),w=["active"],k=["created_by"],q={component:U,logic:T.a};function ee(){var l=Object(g.useValues)(Y.a),m=l.currentTeamId,s=Object(g.useValues)(T.a),E=s.featureFlagsLoading,r=s.searchedFeatureFlags,o=s.searchTerm,P=s.uniqueCreators,f=s.filters,C=Object(g.useActions)(T.a),te=C.updateFeatureFlag,ne=C.loadFeatureFlags,ae=C.setSearchTerm,L=C.setFeatureFlagsFilters,se=[{title:Object(z.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:function(a,n){return(a.key||"").localeCompare(n.key||"")},render:function(a,n){return e.a.createElement(e.a.Fragment,null,e.a.createElement(F.a,{to:n.id?M.a.featureFlag(n.id):void 0,className:"row-name"},Object(V.a)(n.key,17)),n.name&&e.a.createElement("span",{className:"row-description"},n.name))}},Object(K.b)(),Object(K.a)(),{title:"Release conditions",width:200,render:function(a,n){return D(n.filters.groups)}},{title:"Status",dataIndex:"active",sorter:function(a,n){return Number(a.active)-Number(n.active)},width:100,render:function(a,n){return e.a.createElement(e.a.Fragment,null,n.active?e.a.createElement(b.LemonTag,{type:"success"},"Enabled"):e.a.createElement(b.LemonTag,{type:"default"},"Disabled"))}},{width:0,render:function(a,n){return e.a.createElement(G.a,{overlay:e.a.createElement(e.a.Fragment,null,e.a.createElement(d.a,{status:"stealth",onClick:function(){Object(S.s)(n.key,"feature flag key")},fullWidth:!0},"Copy feature flag key"),e.a.createElement(d.a,{status:"stealth",onClick:function(){n.id&&te({id:n.id,payload:{active:!n.active}})},id:"feature-flag-".concat(n.id,"-switch"),fullWidth:!0},n.active?"Disable":"Enable"," feature flag"),n.id&&e.a.createElement(d.a,{status:"stealth",to:M.a.featureFlag(n.id),fullWidth:!0},"Edit"),e.a.createElement(d.a,{status:"stealth",to:M.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(n.key)}),"data-attr":"usage",fullWidth:!0},"Try out in Insights"),e.a.createElement(H.a,null),n.id&&e.a.createElement(d.a,{status:"danger",onClick:function(){Object(S.x)({endpoint:"projects/".concat(m,"/feature_flags"),object:{name:n.key,id:n.id},callback:ne})},fullWidth:!0},"Delete feature flag"))})}}];return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",null,e.a.createElement("div",{className:"flex justify-between mb-4"},e.a.createElement(b.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:ae,value:o}),e.a.createElement("div",{className:"flex items-center gap-2"},e.a.createElement("span",null,e.a.createElement("b",null,"Status")),e.a.createElement(b.LemonSelect,{onChange:function(a){if(a)if(a==="all"){if(f){var n=f.active,v=p()(f,w);L(v,!0)}}else L({active:a})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0}),e.a.createElement("span",{className:"ml-1"},e.a.createElement("b",null,"Created by")),e.a.createElement(b.LemonSelect,{onChange:function(a){if(a)if(a==="any"){if(f){var n=f.created_by,v=p()(f,k);L(v,!0)}}else L({created_by:a})},options:P,value:"any"})))),e.a.createElement(J.a,{dataSource:r,columns:se,rowKey:"key",loading:E,pagination:{pageSize:100},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table"}))}function U(){var l=Object(g.useValues)(T.a),m=l.activeTab,s=Object(g.useActions)(T.a),E=s.setActiveTab;return e.a.createElement("div",{className:"feature_flags"},e.a.createElement(N.a,{title:"Feature Flags",buttons:e.a.createElement(d.a,{type:"primary",to:M.a.featureFlag("new"),"data-attr":"new-feature-flag"},"New feature flag")}),e.a.createElement(j.a,{activeKey:m,destroyInactiveTabPane:!0,onChange:function(o){return E(o)}},e.a.createElement(j.a.TabPane,{tab:"Overview",key:"overview"},e.a.createElement(ee,null)),e.a.createElement(j.a.TabPane,{tab:"History",key:"history"},e.a.createElement($.a,{scope:Z.a.FEATURE_FLAG,describer:Q.a}))))}function D(l){if(l.length===0||!l.some(function(o){return o.rollout_percentage!==0}))return"No users";if(l.some(function(o){var P;return!((P=o.properties)!==null&&P!==void 0&&P.length)&&[null,void 0,100].includes(o.rollout_percentage)}))return"100% of all users";if(l.length===1){var m=l[0],s=m.properties,E=m.rollout_percentage,r=E===void 0?null:E;return(s==null?void 0:s.length)>0?e.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"}},r!=null&&e.a.createElement("span",{style:{flexShrink:0,marginRight:5}},r,"% of"),e.a.createElement(X.a,{filters:s,style:{margin:0,flexDirection:"row"}})):r!==null?"".concat(r,"% of all users"):(console.error("A group with full rollout was not detected early"),"All users")}return"Multiple groups"}try{D.displayName="groupFilters",D.__docgenInfo={description:"",displayName:"groupFilters",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:D.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(l){}}}]);
