(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{"./frontend/src/scenes/notebooks/NotebookScene.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"scene",(function(){return scene})),__webpack_require__.d(__webpack_exports__,"NotebookScene",(function(){return NotebookScene_NotebookScene}));var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),notebookLogic=__webpack_require__("./frontend/src/scenes/notebooks/Notebook/notebookLogic.ts"),Notebook=__webpack_require__("./frontend/src/scenes/notebooks/Notebook/Notebook.tsx"),NotFound=__webpack_require__("./frontend/src/lib/components/NotFound/index.tsx"),types=__webpack_require__("./frontend/src/types.ts"),lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),urls=__webpack_require__("./frontend/src/scenes/urls.ts");const notebookSceneLogic=Object(index_esm.kea)([Object(index_esm.path)(["scenes","notebooks","notebookSceneLogic"]),Object(index_esm.path)((key=>["scenes","notebooks","notebookSceneLogic",key])),Object(index_esm.props)({}),Object(index_esm.key)((_ref=>{let{shortId:shortId}=_ref;return shortId})),Object(index_esm.connect)((props=>({values:[Object(notebookLogic.a)(props),["notebook","notebookLoading"]],actions:[Object(notebookLogic.a)(props),["loadNotebook"]]}))),Object(index_esm.actions)({setNotebookMode:mode=>({mode:mode})}),Object(index_esm.reducers)({mode:[types.K.View,{setNotebookMode:(_,_ref2)=>{let{mode:mode}=_ref2;return mode}}]}),Object(index_esm.selectors)((()=>({notebookId:[()=>[(_,props)=>props],props=>props.shortId],breadcrumbs:[s=>[s.notebook,s.notebookLoading],(notebook,notebookLoading)=>[{name:"Notebooks",path:urls.a.dashboards()+"?tab=notebooks"},{name:notebook?(null==notebook?void 0:notebook.title)||"Unnamed":notebookLoading?"Loading...":"Notebook not found"}]]}))),Object(lib.urlToAction)((_ref3=>{let{props:props,actions:actions,values:values}=_ref3;return{[`/notebooks/${props.shortId}(/:mode)`]:_ref4=>{let{mode:mode}=_ref4;const newMode="edit"===mode?types.K.Edit:types.K.View;newMode!==values.mode&&actions.setNotebookMode(newMode)}}})),Object(lib.actionToUrl)((_ref5=>{let{values:values,props:props}=_ref5;return{setNotebookMode:()=>values.mode===types.K.View?urls.a.notebook(props.shortId):urls.a.notebookEdit(props.shortId)}})),Object(index_esm.afterMount)((_ref6=>{let{actions:actions}=_ref6;actions.loadNotebook()}))]);var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),notebookSidebarLogic=__webpack_require__("./frontend/src/scenes/notebooks/Notebook/notebookSidebarLogic.ts"),NotebookMeta=__webpack_require__("./frontend/src/scenes/notebooks/Notebook/NotebookMeta.tsx"),UserActivityIndicator=__webpack_require__("./frontend/src/lib/components/UserActivityIndicator/UserActivityIndicator.tsx"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),LemonMenu=__webpack_require__("./frontend/src/lib/lemon-ui/LemonMenu/index.ts"),notebooksListLogic=__webpack_require__("./frontend/src/scenes/notebooks/Notebook/notebooksListLogic.ts"),notebookTemplates=__webpack_require__("./frontend/src/scenes/notebooks/NotebookTemplates/notebookTemplates.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),NotebookScene=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/notebooks/NotebookScene.scss"),NotebookScene_default=__webpack_require__.n(NotebookScene),options={insert:"head",singleton:!1},featureFlagLogic=(injectStylesIntoStyleTag_default()(NotebookScene_default.a,options),NotebookScene_default.a.locals,__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts")),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const scene={component:NotebookScene_NotebookScene,logic:notebookSceneLogic,paramsToProps:_ref=>{let{params:{shortId:shortId}}=_ref;return{shortId:shortId||"missing"}}};function NotebookScene_NotebookScene(){const{notebookId:notebookId,mode:mode}=Object(index_esm.useValues)(notebookSceneLogic),{setNotebookMode:setNotebookMode}=Object(index_esm.useActions)(notebookSceneLogic),{notebook:notebook,notebookLoading:notebookLoading,conflictWarningVisible:conflictWarningVisible}=Object(index_esm.useValues)(Object(notebookLogic.a)({shortId:notebookId})),{exportJSON:exportJSON}=Object(index_esm.useActions)(Object(notebookLogic.a)({shortId:notebookId})),{selectNotebook:selectNotebook,setNotebookSideBarShown:setNotebookSideBarShown}=Object(index_esm.useActions)(notebookSidebarLogic.b),{selectedNotebook:selectedNotebook,notebookSideBarShown:notebookSideBarShown}=Object(index_esm.useValues)(notebookSidebarLogic.b),{featureFlags:featureFlags}=Object(index_esm.useValues)(featureFlagLogic.a),buttonSize=featureFlags[constants.i.POSTHOG_3000]?"small":"medium";if(!notebook&&!notebookLoading&&!conflictWarningVisible)return Object(jsx_runtime.jsx)(NotFound.a,{object:"notebook"});if(notebookSideBarShown&&selectedNotebook===notebookId)return Object(jsx_runtime.jsxs)("div",{className:"flex flex-col justify-center items-center h-full text-muted-alt mx-10",children:[Object(jsx_runtime.jsxs)("h2",{className:"text-muted-alt",children:["This Notebook is open in the sidebar ",Object(jsx_runtime.jsx)(icons.m,{})]}),Object(jsx_runtime.jsxs)("p",{children:["You can navigate around PostHog and ",Object(jsx_runtime.jsx)("b",{children:"drag and drop"})," thing into it. Or you can close the sidebar and it will be full screen here instead."]}),Object(jsx_runtime.jsx)(src.LemonButton,{type:"secondary",onClick:()=>setNotebookSideBarShown(!1),children:"Open it here instead"})]});const editEnabled=!(null!=notebook&&notebook.is_template);return Object(jsx_runtime.jsxs)("div",{className:"NotebookScene",children:[Object(jsx_runtime.jsxs)("div",{className:"flex items-center justify-between border-b py-2 mb-2 sticky top-0 bg-bg-3000 z-10",children:[Object(jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center",children:[(null==notebook?void 0:notebook.is_template)&&Object(jsx_runtime.jsx)(src.LemonTag,{type:"highlight",children:"TEMPLATE"}),Object(jsx_runtime.jsx)(UserActivityIndicator.a,{at:null==notebook?void 0:notebook.last_modified_at,by:null==notebook?void 0:notebook.last_modified_by})]}),Object(jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center",children:[Object(jsx_runtime.jsx)(NotebookMeta.b,{shortId:notebookId}),Object(jsx_runtime.jsx)(LemonMenu.a,{items:[{items:[{label:"Export JSON",icon:Object(jsx_runtime.jsx)(icons.gb,{}),onClick:()=>{exportJSON()}},editEnabled&&{label:"Delete",icon:Object(jsx_runtime.jsx)(icons.S,{}),status:"danger",onClick:()=>{notebooksListLogic.b.actions.deleteNotebook(notebookId,null==notebook?void 0:notebook.title),lib.router.actions.push(urls.a.notebooks())}}]}],actionable:!0,children:Object(jsx_runtime.jsx)(src.LemonButton,{"aria-label":"more",icon:Object(jsx_runtime.jsx)(icons.Y,{}),status:"stealth",size:"small"})}),Object(jsx_runtime.jsx)(src.LemonButton,{type:"secondary",icon:Object(jsx_runtime.jsx)(icons.Ab,{}),size:buttonSize,onClick:()=>{selectNotebook(notebookTemplates.a[0].short_id),setNotebookSideBarShown(!0)},children:"Guide"}),Object(jsx_runtime.jsx)(NotebookMeta.a,{type:"secondary",size:buttonSize}),Object(jsx_runtime.jsx)(src.LemonButton,{type:"secondary",size:buttonSize,onClick:()=>{selectNotebook(notebookId),setNotebookSideBarShown(!0)},tooltip:Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Pins the notebook to the right, allowing you to view it while navigating the rest of PostHog. This is great for dragging and dropping elements like Insights, Recordings or even Feature Flags into your active Notebook."}),children:"Pin to side"}),editEnabled?mode===types.K.Edit?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(src.LemonButton,{size:buttonSize,type:"primary",onClick:()=>setNotebookMode(types.K.View),children:"Done"})}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(src.LemonButton,{size:buttonSize,type:"primary",onClick:()=>setNotebookMode(types.K.Edit),children:"Edit"})}):null]})]}),Object(jsx_runtime.jsx)(Notebook.a,{shortId:notebookId,editable:editEnabled&&mode===types.K.Edit},notebookId)]})}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.4.18_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/notebooks/NotebookScene.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".Navigation3000 .NotebookScene{position:absolute;left:0;top:0;bottom:0;right:0;overflow-y:auto;padding:0 1rem}",""]),module.exports=exports}}]);