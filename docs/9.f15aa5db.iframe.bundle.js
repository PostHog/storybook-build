(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"./frontend/src/lib/components/HotkeyButton/HotkeyButton.tsx":function(O,m,a){"use strict";a.d(m,"a",function(){return F});var b=a("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),e=a.n(b),i=a("./node_modules/antd/es/button/index.js"),p=a("./node_modules/react/index.js"),$=a.n(p),re=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),M=a.n(re),de=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/HotkeyButton/HotkeyButton.scss"),z=a.n(de),J={};J.insert="head",J.singleton=!1;var ae=M()(z.a,J),X=z.a.locals||{};function F(V){var te=V.hotkey,o=V.children,le=e()(V,["hotkey","children"]);return $.a.createElement("span",{className:"hotkey-button"},$.a.createElement(i.a,le,o," ",$.a.createElement("span",{className:"hotkey"},te)))}try{F.displayName="HotkeyButton",F.__docgenInfo={description:"",displayName:"HotkeyButton",props:{hotkey:{defaultValue:null,description:"",name:"hotkey",required:!0,type:{name:"enum",value:[{value:'"d"'},{value:'"y"'},{value:'"h"'},{value:'"m"'},{value:'"s"'},{value:'"w"'},{value:'"a"'},{value:'"b"'},{value:'"i"'},{value:'"p"'},{value:'"q"'},{value:'"u"'},{value:'"c"'},{value:'"e"'},{value:'"f"'},{value:'"j"'},{value:'"k"'},{value:'"l"'},{value:'"n"'},{value:'"o"'},{value:'"r"'},{value:'"t"'},{value:'"v"'},{value:'"x"'},{value:'"z"'},{value:'"escape"'},{value:'"enter"'}]}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLElement>"}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:"enum",value:[{value:'"button"'},{value:'"reset"'},{value:'"submit"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/HotkeyButton/HotkeyButton.tsx#HotkeyButton"]={docgenInfo:F.__docgenInfo,name:"HotkeyButton",path:"frontend/src/lib/components/HotkeyButton/HotkeyButton.tsx#HotkeyButton"})}catch(V){}},"./frontend/src/lib/hooks/useKeyboardHotkeys.tsx":function(O,m,a){"use strict";a.d(m,"a",function(){return o});var b=a("./node_modules/core-js/modules/es.array.concat.js"),e=a.n(b),i=a("./node_modules/core-js/modules/es.array.includes.js"),p=a.n(i),$=a("./node_modules/core-js/modules/es.array.some.js"),re=a.n($),M=a("./node_modules/core-js/modules/es.object.keys.js"),de=a.n(M),z=a("./node_modules/core-js/modules/es.string.includes.js"),J=a.n(z),ae=a("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),X=a.n(ae),F=a("./node_modules/kea/lib/index.esm.js"),V=a("./frontend/src/lib/hooks/useEventListener.ts"),te=a("./frontend/src/layout/navigation/navigationLogic.ts"),o=function(A,I,L){return ie(A,I,L)},le=function(A,I){return ie(A,I,!0)},Q=function(A,I){var L=A.composedPath()||A.path;if(!L)return!1;var Z=L[0],k=Z.tagName||"not an html element";return I.includes(k.toLowerCase())},be=[".hotkey-block",".hotkey-block *"];function ie(P,A,I){var L=["input","textarea"],Z=Object(F.useValues)(te.a),k=Z.hotkeyNavigationEngaged;Object(V.a)("keydown",function(R){var pe=R.key;if(!(R.metaKey||R.ctrlKey||R.altKey)&&!be.some(function(_){return R.target.matches(_)})){var ge=L.includes(R.target.tagName.toLowerCase());if(!(pe!=="Escape"&&(ge||Q(R,L)))&&!(!I&&k))for(var j=0,ce=Object.keys(P);j<ce.length;j++){var ye=ce[j],K=P[ye];if(!(!K||K.disabled)&&pe.toLowerCase()===ye){R.preventDefault(),K.action();break}}}},void 0,[P].concat(X()(A||[])))}},"./frontend/src/scenes/dashboard/Dashboard.tsx":function(O,m,a){"use strict";a.r(m),a.d(m,"scene",function(){return da}),a.d(m,"Dashboard",function(){return ne});var b=a("./node_modules/react/index.js"),e=a.n(b),i=a("./node_modules/kea/lib/index.esm.js"),p=a("./frontend/src/scenes/dashboard/dashboardLogic.ts"),$=a("./node_modules/core-js/modules/es.array.map.js"),re=a("./node_modules/@babel/runtime/helpers/slicedToArray.js"),M=a.n(re),de=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),z=a.n(de),J=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/DashboardItems.scss"),ae=a.n(J),X={};X.insert="head",X.singleton=!1;var F=z()(ae.a,X),V=ae.a.locals||{},te=a("./node_modules/react-grid-layout/index.js"),o=a("./frontend/src/types.ts"),le=a("./frontend/src/models/insightsModel.tsx"),Q=a("./node_modules/clsx/dist/clsx.m.js"),be=a("./frontend/src/lib/components/InsightCard/index.tsx"),ie=a("./frontend/src/lib/hooks/useResizeObserver.ts");function P(){var n=Object(i.useValues)(p.c),t=n.items,r=n.layouts,s=n.dashboardMode,d=n.isRefreshing,g=n.highlightedInsightId,l=n.refreshStatus,c=Object(i.useActions)(p.c),S=c.updateLayouts,D=c.updateContainerWidth,h=c.updateItemColor,y=c.removeItem,u=c.refreshAllDashboardItems,E=Object(i.useActions)(le.a),w=E.duplicateInsight,W=E.renameInsight,U=Object(b.useState)(null),G=M()(U,2),se=G[0],oe=G[1],ve=Object(b.useRef)(!1),H=Object(b.useRef)(null),je=Object(Q.a)({"dashboard-view-mode":s!==o.e.Edit,"dashboard-edit-mode":s===o.e.Edit}),ee=Object(ie.a)(),f=ee.width,C=ee.ref;return e.a.createElement("div",{className:"dashboard-items-wrapper",ref:C},e.a.createElement(te.Responsive,{width:f||0,className:je,isDraggable:s===o.e.Edit,isResizable:s===o.e.Edit,layouts:r,rowHeight:80,margin:[16,16],containerPadding:[0,0],onLayoutChange:function(Y,T){S(T)},onWidthChange:function(Y,T,B){D(Y,B)},breakpoints:p.a,resizeHandles:["s","e","se"],cols:p.b,onResize:function(Y,T,B){(!se||se.w!==B.w||se.h!==B.h)&&oe(B)},onResizeStop:function(){oe(null)},onDrag:function(){ve.current=!0,H.current&&window.clearTimeout(H.current)},onDragStop:function(){H.current&&window.clearTimeout(H.current),H.current=window.setTimeout(function(){ve.current=!1},250)},draggableCancel:".anticon,.ant-dropdown,table,.ant-popover-content,button,.Popup"},t==null?void 0:t.map(function(v){var Y;return e.a.createElement(be.a,{key:v.short_id,insight:v,loading:d(v.short_id),apiErrored:((Y=l[v.short_id])===null||Y===void 0?void 0:Y.error)||!1,highlighted:g&&v.short_id===g,showResizeHandles:s===o.e.Edit,updateColor:function(B){return h(v.id,B)},removeFromDashboard:function(){return y(v.id)},refresh:function(){return u([v])},rename:function(){return W(v)},duplicate:function(){return w(v)},moveToDashboard:function(B){return w(v,B,!0)}})})))}var A=a("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),I=a("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),L=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/Dashboard.scss"),Z=a.n(L),k={};k.insert="head",k.singleton=!1;var R=z()(Z.a,k),pe=Z.a.locals||{},ge=a("./frontend/src/lib/hooks/useKeyboardHotkeys.tsx"),j=a("./frontend/src/lib/utils/eventUsageLogic.ts"),ce=a("./frontend/src/lib/components/TimezoneAware/index.tsx"),ye=a("./node_modules/core-js/modules/es.array.fill.js"),K=a("./node_modules/antd/es/card/index.js"),_=a("./node_modules/antd/es/row/index.js"),N=a("./node_modules/antd/es/col/index.js"),x=a("./node_modules/antd/es/skeleton/index.js"),Pe=a("./frontend/src/lib/components/HotkeyButton/HotkeyButton.tsx"),xe=a("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),De=a("./frontend/src/lib/components/Link.tsx"),Ce=a("./frontend/src/scenes/urls.ts");function Oe(n){var t=n.active;return e.a.createElement(K.a,{className:"hide-lte-lg"},e.a.createElement(_.a,null,e.a.createElement(N.a,{span:12},e.a.createElement(x.a,{paragraph:{rows:1},active:t}),e.a.createElement("div",{className:"mt"},e.a.createElement("div",{className:"mt"},e.a.createElement(x.a.Button,{active:t}),e.a.createElement(x.a.Button,{active:t,style:{marginLeft:4,width:140}})),e.a.createElement("div",{className:"mt"},e.a.createElement(x.a.Button,{active:t}),e.a.createElement(x.a.Button,{active:t,style:{marginLeft:4,width:140}})),e.a.createElement("div",{className:"mt"},e.a.createElement(x.a.Button,{active:t}),e.a.createElement(x.a.Button,{active:t,style:{marginLeft:4,width:140}})))),e.a.createElement(N.a,{span:12},e.a.createElement("div",{className:"skeleton-actions"},e.a.createElement(x.a.Avatar,{active:t,shape:"circle",size:"small"}),e.a.createElement(x.a.Avatar,{active:t,shape:"circle",size:"small"})),e.a.createElement(x.a.Avatar,{active:t,shape:"circle",size:"large",className:"pie-chart"}))))}function Ne(){return e.a.createElement("div",{className:"bar-chart ant-skeleton-content"},Array(8).fill(0).map(function(n,t){var r=200,s=40,d=Math.floor(Math.random()*(r-s+1))+s;return e.a.createElement("div",{className:"bar-el ant-skeleton-title",key:t,style:{height:d}})}))}var we=e.a.memo(Ne);function Se(n){var t=n.active;return e.a.createElement(K.a,{className:Object(Q.a)("ant-skeleton",t&&"ant-skeleton-active")},e.a.createElement(_.a,null,e.a.createElement(N.a,{span:12},e.a.createElement(x.a,{active:t,paragraph:{rows:1}})),e.a.createElement(N.a,{span:12},e.a.createElement("div",{className:"skeleton-actions"},e.a.createElement(x.a.Avatar,{active:t,shape:"circle",size:"small"}),e.a.createElement(x.a.Avatar,{active:t,shape:"circle",size:"small"})))),e.a.createElement(we,null))}function ue(n){var t=n.loading,r=Object(i.useValues)(p.c),s=r.dashboard;return e.a.createElement("div",{className:"empty-state"},!t&&e.a.createElement("div",{className:"cta"},e.a.createElement(K.a,{className:"card-elevated"},e.a.createElement("h3",{className:"l3"},"Dashboard empty"),e.a.createElement("p",null,"This dashboard sure would look better with some graphs!"),e.a.createElement("div",{className:"mt text-center"},e.a.createElement(De.a,{to:Ce.a.insightNew(void 0,s==null?void 0:s.id)},e.a.createElement(Pe.a,{"data-attr":"dashboard-add-graph-header",icon:e.a.createElement(xe.a,null),hotkey:"n"},"Add Insight"))))),e.a.createElement(_.a,{gutter:16},e.a.createElement(N.a,{span:24,lg:12},e.a.createElement(Oe,{active:t})),e.a.createElement(N.a,{span:24,lg:12},e.a.createElement(Se,{active:t}))),e.a.createElement(_.a,{gutter:16,className:"fade-out-graphs"},e.a.createElement(N.a,{span:24,lg:12},e.a.createElement(Oe,{active:t})),e.a.createElement(N.a,{span:24,lg:12},e.a.createElement(Se,{active:t}))))}try{ue.displayName="EmptyDashboardComponent",ue.__docgenInfo={description:"",displayName:"EmptyDashboardComponent",props:{loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx#EmptyDashboardComponent"]={docgenInfo:ue.__docgenInfo,name:"EmptyDashboardComponent",path:"frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx#EmptyDashboardComponent"})}catch(n){}var He=a("./frontend/src/lib/components/NotFound/index.tsx"),ia=a("./node_modules/core-js/modules/es.array.from.js"),ca=a("./node_modules/core-js/modules/es.string.iterator.js"),ze=a("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),Fe=a.n(ze),Ve=a("./node_modules/antd/es/dropdown/index.js"),Ee=a("./node_modules/antd/es/menu/index.js"),ke=a("./node_modules/antd/es/checkbox/index.js"),Ae=a("./node_modules/antd/es/radio/index.js"),Ke=a("./node_modules/antd/es/space/index.js"),We=a("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),Ue=a("./node_modules/@ant-design/icons/es/icons/LoadingOutlined.js"),Ge=a("./node_modules/@ant-design/icons/es/icons/ReloadOutlined.js"),Ie=a("./frontend/src/lib/utils.tsx"),Ye=a("./frontend/src/lib/components/Tooltip.tsx"),$e=a("./frontend/src/lib/dayjs.ts"),Le=function(){var t=Object(i.useValues)(p.c),r=t.lastRefreshed;return e.a.createElement("span",null,"Last updated ",e.a.createElement("b",null,r?Object($e.a)(r).fromNow():"a while ago"))},Je=Fe()(Array.from([60,120,300,900],function(n){return{label:Object(Ie.N)(n),value:n}}));function Xe(){var n=Object(i.useValues)(p.c),t=n.itemsLoading,r=n.autoRefresh,s=n.refreshMetrics,d=Object(i.useActions)(p.c),g=d.refreshAllDashboardItemsManual,l=d.setAutoRefresh,c=Object(b.useState)(!1),S=M()(c,2),D=S[0],h=S[1];return e.a.createElement(e.a.Fragment,null,e.a.createElement(Ve.a.Button,{overlay:e.a.createElement(Ee.a,{"data-attr":"auto-refresh-picker",id:"auto-refresh-picker"},e.a.createElement("div",{id:"auto-refresh-check",key:"auto-refresh-check",onClick:function(u){u.stopPropagation(),h(!0),l(!r.enabled,r.interval)}},e.a.createElement(Ye.a,{title:"Refresh dashboard automatically",placement:"bottomLeft"},e.a.createElement(ke.a,{onChange:function(u){u.stopPropagation(),u.preventDefault()},checked:r.enabled}),e.a.createElement("label",{style:{marginLeft:10,cursor:"pointer"}},"Auto refresh"))),e.a.createElement(Ee.a.Divider,null),e.a.createElement(Ee.a.ItemGroup,{title:"Refresh interval"},e.a.createElement(Ae.a.Group,{onChange:function(u){l(!0,parseInt(u.target.value))},value:r.interval,style:{width:"100%"}},e.a.createElement(Ke.b,{direction:"vertical",style:{width:"100%"}},Je.map(function(y){var u=y.label,E=y.value;return e.a.createElement(Ae.a,{key:E,value:E,style:{width:"100%"}},u)}))))),trigger:["click"],onClick:function(){return g()},icon:e.a.createElement(We.a,null),disabled:t,buttonsRender:function(u){var E=M()(u,2),w=E[0],W=E[1];return[e.a.cloneElement(w,{style:{paddingLeft:10}}),W]},visible:D,onVisibleChange:function(u){return h(u)}},e.a.createElement("span",{className:"dashboard-items-action-icon"},t?e.a.createElement(Ue.a,null):e.a.createElement(Ge.a,null)),e.a.createElement("span",{className:Object(Q.a)("dashboard-items-action-refresh-text",{hidden:t})},e.a.createElement(Le,null)),e.a.createElement("span",{className:Object(Q.a)("dashboard-items-action-refresh-text","completed",{hidden:!t})},"Refreshed ",s.completed," out of ",s.total)))}var Qe=a("./frontend/src/scenes/insights/EmptyStates/index.ts"),ua=a("./node_modules/core-js/modules/es.symbol.js"),ma=a("./node_modules/core-js/modules/es.symbol.description.js"),ha=a("./node_modules/core-js/modules/es.array.concat.js"),fa=a("./node_modules/core-js/modules/es.array.filter.js"),va=a("./node_modules/core-js/modules/es.array.includes.js"),ba=a("./node_modules/core-js/modules/es.array.join.js"),pa=a("./node_modules/core-js/modules/es.function.name.js"),ga=a("./node_modules/core-js/modules/es.string.includes.js"),Re=a("./frontend/src/lib/components/EditableField/EditableField.tsx");function me(n){var t=n.onExit,r="aside.ant-layout-sider, .layout-top-content";return Object(b.useEffect)(function(){for(var s=window.document.querySelectorAll(r),d=0;d<s.length;d++)s[d].style.display="none";var g=function(){window.document.fullscreenElement===null&&(t==null||t())};try{window.document.body.requestFullscreen().then(function(){window.addEventListener("fullscreenchange",g,!1)})}catch(l){}try{window.dispatchEvent(new window.Event("scroll")),window.dispatchEvent(new window.Event("resize"))}catch(l){}return function(){for(var l=window.document.querySelectorAll(r),c=0;c<l.length;c++)l[c].style.display="block";try{window.removeEventListener("fullscreenchange",g,!1),window.document.fullscreenElement!==null&&window.document.exitFullscreen()}catch(S){}try{window.dispatchEvent(new window.Event("scroll")),window.dispatchEvent(new window.Event("resize"))}catch(S){}}},[]),null}try{me.displayName="FullScreen",me.__docgenInfo={description:"",displayName:"FullScreen",props:{onExit:{defaultValue:null,description:"",name:"onExit",required:!1,type:{name:"(() => any)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/FullScreen.tsx#FullScreen"]={docgenInfo:me.__docgenInfo,name:"FullScreen",path:"frontend/src/lib/components/FullScreen.tsx#FullScreen"})}catch(n){}var q=a("./frontend/src/lib/components/LemonButton/index.ts"),Ze=a("./frontend/src/lib/components/LemonButton/More.tsx"),he=a("./frontend/src/lib/components/LemonRow/index.ts"),Te=a("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),_e=a("./frontend/src/lib/components/PageHeader.tsx"),Be=a("./frontend/src/models/dashboardsModel.tsx"),qe=a("./frontend/src/scenes/dashboard/dashboardsLogic.ts"),Me=a("./frontend/src/scenes/dashboard/ShareModal.tsx"),ea=a("./frontend/src/scenes/userLogic.ts"),aa=a("./frontend/src/lib/constants.tsx"),ta=a("./frontend/src/lib/components/ProfilePicture/ProfileBubbles.tsx"),na=a("./frontend/src/scenes/dashboard/dashboardCollaboratorsLogic.ts"),sa=a("./frontend/src/lib/components/icons.tsx"),fe=a("./node_modules/antd/es/button/index.js");function oa(){var n=Object(i.useValues)(p.c),t=n.dashboard,r=n.allItemsLoading,s=n.dashboardMode,d=n.canEditDashboard,g=Object(i.useActions)(p.c),l=g.setDashboardMode,c=g.triggerDashboardUpdate,S=Object(i.useValues)(qe.b),D=S.dashboardTags,h=Object(i.useActions)(Be.a),y=h.updateDashboard,u=h.pinDashboard,E=h.unpinDashboard,w=h.deleteDashboard,W=h.duplicateDashboard,U=Object(i.useValues)(Be.a),G=U.dashboardLoading,se=Object(i.useValues)(ea.a),oe=se.hasAvailableFeature,ve=Object(b.useState)(!1),H=M()(ve,2),je=H[0],ee=H[1];return t||r?e.a.createElement(e.a.Fragment,null,s===o.e.Fullscreen&&e.a.createElement(me,{onExit:function(){return l(null,j.a.Browser)}}),t&&e.a.createElement(Me.b,{onCancel:function(){return ee(!1)},visible:je}),e.a.createElement(_e.a,{title:e.a.createElement("div",{style:{display:"flex",alignItems:"center"}},e.a.createElement(Re.a,{name:"name",value:(t==null?void 0:t.name)||(r?"Loading\u2026":""),placeholder:"Name this dashboard",onSave:t?function(f){return y({id:t.id,name:f})}:void 0,minLength:1,maxLength:400,mode:d?void 0:"view",notice:t&&!d?{icon:e.a.createElement(sa.IconLock,null),tooltip:"You don't have edit permissions in this dashboard. Ask a dashboard collaborator with edit access to add you."}:void 0})),buttons:s===o.e.Edit?e.a.createElement(fe.a,{"data-attr":"dashboard-edit-mode-save",type:"primary",onClick:function(){return l(null,j.a.DashboardHeader)},tabIndex:10,disabled:r},"Done editing"):s===o.e.Fullscreen?e.a.createElement(fe.a,{onClick:function(){return l(null,j.a.DashboardHeader)},"data-attr":"dashboard-exit-presentation-mode",disabled:r},"Exit full screen"):e.a.createElement(e.a.Fragment,null,e.a.createElement(Ze.a,{overlay:t?e.a.createElement(e.a.Fragment,null,t.created_by&&e.a.createElement(e.a.Fragment,null,e.a.createElement(he.a,{fullWidth:!0,style:{color:"var(--muted-alt)"}},"Created by"," ",t.created_by.first_name||t.created_by.email||"-"," ","on ",Object(Ie.M)(t.created_at)),e.a.createElement(he.b,null)),d&&e.a.createElement(q.a,{onClick:function(){return l(o.e.Edit,j.a.MoreDropdown)},type:"stealth",fullWidth:!0},"Edit layout (E)"),e.a.createElement(q.a,{onClick:function(){return l(o.e.Fullscreen,j.a.MoreDropdown)},type:"stealth",fullWidth:!0},"Go full screen (F)"),d&&(t.pinned?e.a.createElement(q.a,{onClick:function(){return E(t.id,j.a.MoreDropdown)},type:"stealth",fullWidth:!0},"Unpin dashboard"):e.a.createElement(q.a,{onClick:function(){return u(t.id,j.a.MoreDropdown)},type:"stealth",fullWidth:!0},"Pin dashboard")),e.a.createElement(he.b,null),e.a.createElement(q.a,{onClick:function(){return W({id:t.id,name:t.name,show:!0})},type:"stealth",fullWidth:!0},"Duplicate dashboard"),d&&e.a.createElement(q.a,{onClick:function(){return w({id:t.id,redirect:!0})},status:"danger",type:"stealth",fullWidth:!0},"Delete dashboard")):void 0}),e.a.createElement(he.b,{vertical:!0}),t&&e.a.createElement(ra,{dashboard:t,onClick:function(){return ee(function(C){return!C})}}),e.a.createElement(fe.a,{"data-attr":"dashboard-share-button",onClick:function(){return ee(function(C){return!C})}},"Share"),d&&e.a.createElement(De.a,{to:Ce.a.insightNew(void 0,t==null?void 0:t.id)},e.a.createElement(fe.a,{type:"primary","data-attr":"dashboard-add-graph-header",icon:e.a.createElement(xe.a,null)},"Add Insight"))),caption:e.a.createElement(e.a.Fragment,null,t&&!!(d||t.description)&&e.a.createElement(Re.a,{multiline:!0,name:"description",value:t.description||"",placeholder:"Description (optional)",onSave:function(C){return y({id:t.id,description:C})},compactButtons:!0,mode:d?void 0:"view",paywall:!oe(o.c.DASHBOARD_COLLABORATION)}),(t==null?void 0:t.tags)&&oe(o.c.TAGGING)&&e.a.createElement(e.a.Fragment,null,d?e.a.createElement(Te.a,{tags:t.tags,onChange:function(C,v){return c({tags:v})},saving:G,tagsAvailable:D.filter(function(f){var C;return!(!((C=t.tags)===null||C===void 0)&&C.includes(f))}),className:"insight-metadata-tags"}):t.tags.length?e.a.createElement(Te.a,{tags:t.tags,saving:G,staticOnly:!0,className:"insight-metadata-tags"}):null)),delimited:!0})):null}function ra(n){var t=n.dashboard,r=n.onClick,s=Object(i.useValues)(Object(na.a)({dashboardId:t.id})),d=s.allCollaborators;if(!t)return null;var g=Me.a[t.effective_restriction_level],l=[];return g!=null&&g.label&&l.push(g.label),t.is_shared&&l.push("Shared publicly"),e.a.createElement(ta.a,{people:d.map(function(c){return{email:c.user.email,name:c.user.first_name,title:"".concat(c.user.first_name," (").concat(aa.G[c.level],")")}}),tooltip:l.join(" \u2022 "),onClick:r})}var da={component:ne,logic:p.c,paramsToProps:function(t){var r=t.params.id;return{id:parseInt(r)}}};function ne(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=n.id,r=n.shareToken,s=n.placement;return e.a.createElement(i.BindLogic,{logic:p.c,props:{id:t?parseInt(t):void 0,shareToken:r}},e.a.createElement(la,{placement:s}))}function la(n){var t,r,s=n.placement,d=Object(i.useValues)(p.c),g=d.dashboard,l=d.canEditDashboard,c=d.allItemsLoading,S=d.items,D=d.filters,h=d.dashboardMode,y=d.receivedErrorsFromAPI,u=Object(i.useActions)(p.c),E=u.setDashboardMode,w=u.setDates,W=u.reportDashboardViewed;return Object(b.useEffect)(function(){W()},[]),Object(ge.a)(s===o.f.Public||s===o.f.InternalMetrics?{}:{e:{action:function(){return E(h===o.e.Edit?null:o.e.Edit,j.a.Hotkey)},disabled:!l||h!==null&&h!==o.e.Edit},f:{action:function(){return E(h===o.e.Fullscreen?null:o.e.Fullscreen,j.a.Hotkey)},disabled:h!==null&&h!==o.e.Fullscreen},escape:{action:function(){return E(null,j.a.Hotkey)},disabled:h!==o.e.Edit}},[E,h]),!g&&!c?e.a.createElement(He.a,{object:"dashboard"}):e.a.createElement("div",{className:"dashboard"},s!==o.f.ProjectHomepage&&s!==o.f.Public&&s!==o.f.InternalMetrics&&e.a.createElement(oa,null),y?e.a.createElement(Qe.d,{title:"There was an error loading this dashboard"}):!S||S.length===0?e.a.createElement(ue,{loading:c}):e.a.createElement("div",null,e.a.createElement("div",{className:"dashboard-items-actions"},e.a.createElement("div",{className:"left-item",style:s===o.f.Public?{textAlign:"right"}:void 0},s===o.f.Public?e.a.createElement(Le,null):e.a.createElement(Xe,null)),s!==o.f.Public&&e.a.createElement("div",{className:"right-item",style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},e.a.createElement(ce.a,{style:{marginRight:8,fontWeight:"bold"}}),e.a.createElement(A.a,{defaultValue:"Custom",showCustom:!0,dateFrom:(t=D==null?void 0:D.date_from)!==null&&t!==void 0?t:void 0,dateTo:(r=D==null?void 0:D.date_to)!==null&&r!==void 0?r:void 0,onChange:w,disabled:!l,makeLabel:function(G){return e.a.createElement(e.a.Fragment,null,e.a.createElement(I.a,null),e.a.createElement("span",{className:"hide-when-small"}," ",G))}}))),e.a.createElement(P,null)))}try{ne.displayName="Dashboard",ne.__docgenInfo={description:"",displayName:"Dashboard",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},shareToken:{defaultValue:null,description:"",name:"shareToken",required:!1,type:{name:"string"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"public"'},{value:'"internal-metrics"'},{value:'"project-homepage"'},{value:'"dashboard"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/Dashboard.tsx#Dashboard"]={docgenInfo:ne.__docgenInfo,name:"Dashboard",path:"frontend/src/scenes/dashboard/Dashboard.tsx#Dashboard"})}catch(n){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/HotkeyButton/HotkeyButton.scss":function(O,m,a){var b=a("./node_modules/css-loader/dist/runtime/api.js");m=b(!1),m.push([O.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.hotkey-button .ant-btn-primary .hotkey{border:0}",""]),O.exports=m},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/Dashboard.scss":function(O,m,a){var b=a("./node_modules/css-loader/dist/runtime/api.js");m=b(!1),m.push([O.i,'.dashboard .empty-state .fade-out-graphs:after{content:"";width:100%;height:3rem;background:linear-gradient(0deg,#fff,transparent);position:absolute;pointer-events:none;bottom:0}.dashboard-header .dashboard-select,.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.dashboard{margin-top:1rem}.dashboard .dashboard-items-actions{margin-bottom:1rem;display:flex}.dashboard .dashboard-items-actions .left-item{flex-grow:1}.dashboard .dashboard-items-actions .left-item .dashboard-items-action-icon{margin-right:6px}.dashboard .dashboard-items-actions .left-item .dashboard-items-action-refresh-text{visibility:visible}.dashboard .dashboard-items-actions .left-item .dashboard-items-action-refresh-text.hidden{visibility:hidden}.dashboard .dashboard-items-actions .left-item .dashboard-items-action-refresh-text.completed{position:absolute;left:30px}.dashboard .dashboard-items-actions .right-item .ant-btn{padding-left:4px!important}.dashboard .empty-state{position:relative}.dashboard .empty-state .skeleton-actions{text-align:right}.dashboard .empty-state .skeleton-actions .ant-skeleton-avatar{margin-right:8px}.dashboard .empty-state .pie-chart{height:200px;width:200px;max-width:100%;margin-top:1rem}@media(max-width:992px){.dashboard .empty-state .pie-chart{height:140px;width:140px}}.dashboard .empty-state .bar-chart{display:flex;margin-top:1rem;align-items:flex-end}.dashboard .empty-state .bar-chart .bar-el{width:12.5%;margin-left:4px;height:100px}.dashboard .empty-state .ant-col{flex-grow:1}.dashboard .empty-state .ant-col .ant-card{height:100%}.dashboard .empty-state .fade-out-graphs{margin-top:1rem;height:150px;overflow:hidden;position:relative}.dashboard .empty-state .fade-out-graphs:after{width:calc(100% - 16px);left:8px;height:150px}.dashboard .empty-state .cta{width:360px;max-width:calc(100% - 32px);position:absolute;top:16px;left:50%;transform:translateX(-50%);z-index:488}.dashboard-header{display:flex;justify-content:space-between;margin-bottom:1rem;width:100%}.dashboard-header.full-screen{margin-top:1rem}.dashboard-header .dashboard-select{flex:1;padding-right:2rem}.dashboard-header .dashboard-select .ant-select-single{max-width:100%;line-height:40px}.dashboard-header .dashboard-select .ant-select-single .ant-select-selector{align-items:center;padding-left:0;padding-right:8px;line-height:40px;height:40px}.dashboard-header .dashboard-select .ant-select-single .ant-select-selector .ant-select-selection-item{font-size:28px;font-weight:600;line-height:40px;width:100%;height:35px;display:flex;align-items:center}.dashboard-header .dashboard-select .ant-select-single .ant-select-selector .ant-select-selection-item .anticon-share-alt{font-size:16px;margin-left:6px!important;margin-right:4px}.dashboard-header .dashboard-select .ant-select-single.ant-select-open .ant-select-arrow{color:rgba(45,45,45,.4)}.dashboard-header .dashboard-select .ant-select-single .ant-select-arrow{color:#2d2d2d;font-size:14px}.dashboard-header .dashboard-meta{white-space:nowrap;display:flex;align-items:center}.dashboard-header .dashboard-meta .ant-btn{margin-left:10px}.dashboard-header .dashboard-meta .ant-btn .anticon{vertical-align:baseline}.dashboard-header .dashboard-meta .ant-btn.button-box{padding:4px 8px}@media(max-width:768px){.dashboard-header{flex-direction:column}.dashboard-header .dashboard-meta{padding-top:1rem;justify-content:flex-end}}#auto-refresh-check{padding:5px 12px;cursor:pointer}.CollaboratorRow{justify-content:space-between;height:2rem;margin-top:.5rem;padding-left:.5rem}.CollaboratorRow,.CollaboratorRow__details{display:flex;align-items:center}.CollaboratorRow__details>span{margin-right:.5rem}',""]),O.exports=m},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/dashboard/DashboardItems.scss":function(O,m,a){var b=a("./node_modules/css-loader/dist/runtime/api.js");m=b(!1),m.push([O.i,".text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 8px)}.dashboard-items-wrapper{width:100%}.react-grid-layout{position:relative;transition:height .1s ease;margin-bottom:2rem}.react-grid-layout.dashboard-view-mode .react-grid-item{transition:none}.react-grid-item{transition:all .1s ease;transition-property:left,top}.react-grid-item.cssTransforms{transition-property:transform}.react-grid-item.resizing{z-index:1;will-change:width,height}.react-grid-item.react-draggable{cursor:move}.react-grid-item.react-draggable-dragging{transition:none;z-index:105;will-change:transform}.react-grid-item.dropping{visibility:hidden}.react-grid-item.react-grid-placeholder{transition:.1s ease;max-width:100%;position:relative;border:1px solid var(--primary);outline:1px solid var(--primary);border-radius:var(--radius);z-index:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-resizable-hide>.react-resizable-handle{display:none}.react-grid-item>.react-resizable-handle{position:absolute;width:2rem;height:2rem;bottom:-.5rem;right:-.5rem;cursor:se-resize;z-index:10}.react-grid-item>.react-resizable-handle.react-resizable-handle-se{cursor:se-resize}.react-grid-item>.react-resizable-handle.react-resizable-handle-e{top:0;bottom:2rem;height:auto;cursor:ew-resize}.react-grid-item>.react-resizable-handle.react-resizable-handle-s{left:0;right:2rem;width:auto;cursor:ns-resize}.ant-dropdown{z-index:700}.dive-btn{margin-right:.5rem}.dive-btn.dive-btn-dive{border-color:#5375ff;color:#5375ff}.dive-btn.dive-btn-dive:hover{border-color:#0025b9;color:#0025b9}",""]),O.exports=m}}]);
