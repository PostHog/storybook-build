(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{"./frontend/src/scenes/session-recordings/SessionRecordings.tsx":function(y,i,e){"use strict";e.r(i),e.d(i,"SessionsRecordings",function(){return ge}),e.d(i,"scene",function(){return ye});var R=e("./node_modules/react/index.js"),s=e.n(R),o=e("./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx"),M=e("./frontend/src/lib/components/PageHeader.tsx"),V=e("./frontend/src/scenes/teamLogic.tsx"),m=e("./node_modules/kea/lib/index.esm.js"),J=e("./frontend/src/scenes/urls.ts"),Y=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),W=e("./frontend/src/lib/logic/featureFlagLogic.ts"),Q=e("./frontend/src/lib/constants.tsx"),B=e("./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx"),S=e("./node_modules/antd/es/row/index.js"),H=e("./node_modules/antd/es/typography/index.js"),X=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Z=e("./node_modules/@ant-design/icons/es/icons/CalendarOutlined.js"),G=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilter.tsx"),j=e("./frontend/src/types.ts"),ne=e("./node_modules/antd/es/space/index.js"),w=e("./node_modules/antd/es/button/index.js"),z=e("./frontend/src/lib/components/PropertyFilters/components/OperatorValueSelect.tsx"),O=e("./frontend/src/lib/components/Popup/Popup.tsx"),T=e("./node_modules/core-js/modules/es.array.slice.js"),$=e("./node_modules/core-js/modules/es.array.iterator.js"),k=e("./node_modules/core-js/modules/es.object.to-string.js"),P=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),U=e("./frontend/src/lib/components/DurationPicker/DurationPicker.tsx"),b;(function(t){t.SECONDS="seconds",t.MINUTES="minutes",t.HOURS="hours"})(b||(b={}));var C=Object(m.kea)({path:function(n){return["scenes","session-recordings","DurationFilterLogic",n]},key:function(n){return n.pageKey||"global"},props:{},actions:{setValue:function(n){return{value:n}},setIsOpen:function(n){return{isOpen:n}},setOperator:function(n){return{operator:n}}},reducers:function(n){var a,r,u=n.props;return{operator:[u==null||(a=u.initialFilter)===null||a===void 0?void 0:a.operator,{setOperator:function(f,d){var p=d.operator;return p}}],value:[u==null||(r=u.initialFilter)===null||r===void 0?void 0:r.value,{setValue:function(f,d){var p=d.value;return p}}],isOpen:[!1,{setIsOpen:function(f,d){var p=d.isOpen;return p}}]}},selectors:{durationString:[function(t){return[t.operator,t.value]},function(t,n){var a="";t===j.K.GreaterThan?a+="> ":a+="< ";var r=Object(U.b)(n||0);return a+=r.timeValue||0,r.timeValue===1?a+=" "+r.unit.slice(0,-1):a+=" "+r.unit,a}]},listeners:function(n){var a=n.props,r=n.values,u=function(f){var d=f.value,p=f.operator;a.onChange({operator:p||r.operator,value:d||r.value||0,type:"recording",key:"duration"})};return{setValue:function(f){var d=f.value;return u({value:d})},setOperator:function(f){var d=f.operator;return u({operator:d})}}}});function I(t){var n=t.initialFilter,a=t.onChange,r=t.pageKey,u=C({initialFilter:n,onChange:a,pageKey:r}),l=Object(m.useActions)(u),f=l.setValue,d=l.setIsOpen,p=l.setOperator,A=Object(m.useValues)(u),le=A.durationString,oe=A.value,N=A.operator,de=A.isOpen;return s.a.createElement(O.a,{visible:de,placement:"bottom-end",fallbackPlacements:["bottom-start"],onClickOutside:function(){return d(!1)},overlay:s.a.createElement(S.a,null,s.a.createElement(ne.b,null,s.a.createElement(z.a,{operator:N,operators:[j.K.GreaterThan,j.K.LessThan],onChange:function(ce){p(ce)}}),s.a.createElement(U.a,{onChange:f,initialValue:oe||0})))},s.a.createElement(w.a,{onClick:function(){d(!0)}},le))}try{I.displayName="DurationFilter",I.__docgenInfo={description:"",displayName:"DurationFilter",props:{initialFilter:{defaultValue:null,description:"",name:"initialFilter",required:!0,type:{name:"RecordingDurationFilter"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: RecordingDurationFilter) => void"}},pageKey:{defaultValue:null,description:"",name:"pageKey",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"]={docgenInfo:I.__docgenInfo,name:"DurationFilter",path:"frontend/src/scenes/session-recordings/DurationFilter.tsx#DurationFilter"})}catch(t){}var h=e("./frontend/src/lib/utils/eventUsageLogic.ts"),K=e("./frontend/src/lib/components/DateFilter/DateFilter.tsx"),E=e("./frontend/src/lib/components/Tooltip.tsx"),g=e("./frontend/src/lib/components/TaxonomicFilter/types.ts"),q=e("./frontend/src/lib/components/PropertyFilters/PropertyFilters.tsx"),_=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ee=e.n(_),D=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingFilters.scss"),x=e.n(D),c={};c.insert="head",c.singleton=!1;var L=ee()(x.a,c),F=x.a.locals||{},ae=e("./frontend/src/lib/components/icons.tsx"),me=e("./frontend/src/lib/components/LemonButton/index.ts"),fe=e("./frontend/src/scenes/insights/filters/ActionFilter/ActionFilterRow/ActionFilterRow.tsx");function te(t){var n=t.personUUID,a=t.isPersonPage,r=a===void 0?!1:a,u=Object(Y.c)({personUUID:n}),l=Object(m.useValues)(u),f=l.entityFilters,d=l.propertyFilters,p=l.fromDate,A=l.toDate,le=l.durationFilter,oe=l.showFilters,N=Object(m.useActions)(u),de=N.setEntityFilters,re=N.setPropertyFilters,ce=N.setDateRange,Se=N.setDurationFilter,Re=N.enableFilter,ie=N.reportRecordingsListFilterAdded;return s.a.createElement("div",{className:"SessionRecordingFilters"},s.a.createElement(S.a,{className:"filter-row"},s.a.createElement("div",{className:"filter-container",style:{display:oe?void 0:"none"}},s.a.createElement("div",{className:"space-y-2"},s.a.createElement(H.a.Text,{strong:!0},"Filter by events and actions ",s.a.createElement(E.a,{title:"Show recordings where all of the events or actions listed below happen."},s.a.createElement(X.a,{className:"info-icon"}))),s.a.createElement(G.a,{bordered:!0,filters:f,setFilters:function(v){ie(h.d.EventAndAction),de(v)},typeKey:r?"person-".concat(n):"session-recordings",mathAvailability:fe.b.None,buttonCopy:"Add filter",hideRename:!0,hideDuplicate:!0,showNestedArrow:!1,actionsTaxonomicGroupTypes:[g.a.Actions,g.a.Events],propertiesTaxonomicGroupTypes:[g.a.EventProperties,g.a.EventFeatureFlags,g.a.Elements]})),!r&&s.a.createElement("div",{className:"mt-8 space-y-2"},s.a.createElement(H.a.Text,{strong:!0},"Filter by persons and cohorts ",s.a.createElement(E.a,{title:"Show recordings by persons who match the set criteria"},s.a.createElement(X.a,{className:"info-icon"}))),s.a.createElement(q.a,{pageKey:r?"person-".concat(n):"session-recordings",taxonomicGroupTypes:[g.a.PersonProperties,g.a.Cohorts],propertyFilters:d,onChange:function(v){ie(h.d.PersonAndCohort),re(v)}}))),!oe&&s.a.createElement(me.a,{type:"secondary",size:"small",icon:s.a.createElement(ae.IconFilter,null),onClick:function(){if(Re(),r){var v=document.querySelectorAll(".entity-filter-row button");v.length>0&&v[0].click()}}},"Filter recordings"),s.a.createElement(S.a,{className:"time-filter-row"},s.a.createElement(S.a,{className:"time-filter"},s.a.createElement(K.a,{makeLabel:function(v){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z.a,null),s.a.createElement("span",null," ",v))},dateFrom:p!=null?p:"-7d",dateTo:A!=null?A:void 0,onChange:function(v,ue){ie(h.d.DateRange),ce(v,ue!=null?ue:void 0)},dateOptions:[{key:"Custom",values:[]},{key:"Last 24 hours",values:["-24h"]},{key:"Last 7 days",values:["-7d"]},{key:"Last 21 days",values:["-21d"]}]})),s.a.createElement(S.a,{className:"time-filter"},s.a.createElement(H.a.Text,{className:"filter-label"},"Duration"),s.a.createElement(I,{onChange:function(v){ie(h.d.Duration),Se(v)},initialFilter:le,pageKey:r?"person-".concat(n):"session-recordings"})))))}try{te.displayName="SessionRecordingsFilters",te.__docgenInfo={description:"",displayName:"SessionRecordingsFilters",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"]={docgenInfo:te.__docgenInfo,name:"SessionRecordingsFilters",path:"frontend/src/scenes/session-recordings/SessionRecordingFilters.tsx#SessionRecordingsFilters"})}catch(t){}var pe=e("./frontend/src/lib/components/AlertMessage/index.ts"),ve=e("./frontend/@posthog/lemon-ui/src/index.ts");function ge(){var t=Object(m.useValues)(V.a),n=t.currentTeam,a=Object(m.useValues)(W.a),r=a.featureFlags;return s.a.createElement("div",null,s.a.createElement(M.a,{title:s.a.createElement("div",null,"Recordings")}),n&&!(n!=null&&n.session_recording_opt_in)?s.a.createElement("div",{className:"mb-4"},s.a.createElement(pe.a,{type:"info"},"Session recordings are currently disabled for this project. To use this feature, please go to your ",s.a.createElement(ve.Link,{to:"".concat(J.a.projectSettings(),"#recordings")},"project settings")," and enable it.")):null,s.a.createElement(te,null),r[Q.h.SESSION_RECORDINGS_PLAYLIST]?s.a.createElement(B.a,{key:"global"}):s.a.createElement(o.a,{key:"global"}))}var ye={component:ge,logic:Y.c}},"./frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx":function(y,i,e){"use strict";e.d(i,"a",function(){return O});var R=e("./node_modules/core-js/modules/es.array.concat.js"),s=e("./node_modules/react/index.js"),o=e.n(s),M=e("./node_modules/kea/lib/index.esm.js"),V=e("./frontend/src/lib/utils.tsx"),m=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),J=e("./frontend/src/scenes/persons/PersonHeader.tsx"),Y=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),W=e.n(Y),Q=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss"),B=e.n(Q),S={};S.insert="head",S.singleton=!1;var H=W()(B.a,S),X=B.a.locals||{},Z=e("./frontend/src/lib/components/LemonTable/index.ts"),G=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),j=e("./frontend/src/scenes/session-recordings/player/SessionRecordingPlayer.tsx"),ne=e("./frontend/src/lib/components/EmptyMessage/EmptyMessage.tsx"),w=e("./frontend/@posthog/lemon-ui/src/index.ts"),z=e("./frontend/src/lib/components/icons.tsx");function O(T){var $=T.personUUID,k=Object(m.c)({personUUID:$,isPlaylist:!0}),P=Object(M.useValues)(k),U=P.sessionRecordings,b=P.sessionRecordingsResponseLoading,C=P.hasNext,I=P.hasPrev,h=P.activeSessionRecordingId,K=P.offset,E=Object(M.useActions)(k),g=E.openSessionPlayer,q=E.loadNext,_=E.loadPrev,ee=[{title:"Recordings",render:function(x,c){return o.a.createElement("div",null,Object(J.b)(c.person,25),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement(G.b,{time:c.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})," \xB7 ",Object(V.n)(c.recording_duration))))}}];return o.a.createElement("div",{className:"SessionRecordingPlaylist","data-attr":"session-recordings-playlist"},o.a.createElement("div",{className:"SessionRecordingPlaylist__left-column mr-4"},o.a.createElement(Z.a,{dataSource:U,columns:ee,loading:b,onRow:function(x){return{onClick:function(L){L.target.closest("a")||g(x.id)}}},rowStatus:function(x){return h===x.id?"highlighted":null},rowClassName:"cursor-pointer","data-attr":"session-recording-table","data-tooltip":"session-recording-table",emptyState:"No matching recordings found",loadingSkeletonRows:m.a}),o.a.createElement("div",{className:"SessionRecordingPlaylist__pagination-control"},o.a.createElement("span",null,"".concat(K+1," - ").concat(K+(b?Object(m.b)(!0):U.length))),o.a.createElement(w.LemonButton,{icon:o.a.createElement(z.IconChevronLeft,null),status:"stealth",disabled:!I,onClick:function(){_(),window.scrollTo(0,0)}}),o.a.createElement(w.LemonButton,{icon:o.a.createElement(z.IconChevronRight,null),status:"stealth",disabled:!C,onClick:function(){q(),window.scrollTo(0,0)}}))),o.a.createElement("div",{className:"SessionRecordingPlaylist__right-column"},h?o.a.createElement("div",{className:"border rounded h-full"},o.a.createElement(j.b,{playerKey:"playlist",sessionRecordingId:h})):o.a.createElement(ne.a,{title:"No recording selected",description:"Please select a recording from the list on the left",buttonText:"Learn more about recordings",buttonHref:"https://posthog.com/docs/user-guides/recordings"})))}try{O.displayName="SessionRecordingsPlaylist",O.__docgenInfo={description:"",displayName:"SessionRecordingsPlaylist",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:null,description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"]={docgenInfo:O.__docgenInfo,name:"SessionRecordingsPlaylist",path:"frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx#SessionRecordingsPlaylist"})}catch(T){}},"./frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx":function(y,i,e){"use strict";e.d(i,"a",function(){return T});var R=e("./node_modules/react/index.js"),s=e.n(R),o=e("./node_modules/kea/lib/index.esm.js"),M=e("./frontend/src/lib/utils.tsx"),V=e("./node_modules/antd/es/button/index.js"),m=e("./node_modules/antd/es/row/index.js"),J=e("./frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts"),Y=e("./node_modules/@ant-design/icons/es/icons/PlayCircleOutlined.js"),W=e("./frontend/src/scenes/session-recordings/SessionPlayerDrawer.tsx"),Q=e("./node_modules/@ant-design/icons/es/icons/LeftOutlined.js"),B=e("./node_modules/@ant-design/icons/es/icons/RightOutlined.js"),S=e("./frontend/src/scenes/persons/PersonHeader.tsx"),H=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),X=e.n(H),Z=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss"),G=e.n(Z),j={};j.insert="head",j.singleton=!1;var ne=X()(G.a,j),w=G.a.locals||{},z=e("./frontend/src/lib/components/LemonTable/index.ts"),O=e("./frontend/src/lib/components/TimezoneAware/index.tsx");function T($){var k=$.personUUID,P=$.isPersonPage,U=P===void 0?!1:P,b=Object(J.c)({personUUID:k}),C=Object(o.useValues)(b),I=C.sessionRecordings,h=C.sessionRecordingsResponseLoading,K=C.hasNext,E=C.hasPrev,g=Object(o.useActions)(b),q=g.openSessionPlayer,_=g.closeSessionPlayer,ee=g.loadNext,D=g.loadPrev,x=[{title:"Start time",render:function(L,F){return s.a.createElement(O.b,{time:F.start_time,formatDate:"MMMM DD, YYYY",formatTime:"h:mm A"})}},{title:"Duration",render:function(L,F){return s.a.createElement("span",null,Object(M.P)(F.recording_duration))}},{title:"Person",key:"person",render:function(L,F){return s.a.createElement(S.a,{withIcon:!0,person:F.person})}},{render:function(L,F){return s.a.createElement("div",{className:"play-button-container"},s.a.createElement(V.a,{className:F.viewed?"play-button viewed":"play-button","data-attr":"session-recordings-button",icon:s.a.createElement(Y.a,null)},"Watch recording"))}}];return s.a.createElement("div",{className:"session-recordings-table","data-attr":"session-recordings-table"},s.a.createElement(z.a,{dataSource:I,columns:x,loading:h,onRow:function(L){return{onClick:function(ae){ae.target.closest("a")||q(L.id)}}},rowClassName:"cursor-pointer","data-attr":"session-recording-table",emptyState:"No matching recordings found"}),(E||K)&&s.a.createElement(m.a,{className:"pagination-control"},s.a.createElement(V.a,{type:"link",disabled:!E,onClick:function(){D(),window.scrollTo(0,0)}},s.a.createElement(Q.a,null)," Previous"),s.a.createElement(V.a,{type:"link",disabled:!K,onClick:function(){ee(),window.scrollTo(0,0)}},"Next ",s.a.createElement(B.a,null))),s.a.createElement("div",{style:{marginBottom:64}}),s.a.createElement(W.a,{isPersonPage:U,onClose:_}))}try{T.displayName="SessionRecordingsTable",T.__docgenInfo={description:"",displayName:"SessionRecordingsTable",props:{personUUID:{defaultValue:null,description:"",name:"personUUID",required:!1,type:{name:"string"}},isPersonPage:{defaultValue:{value:"false"},description:"",name:"isPersonPage",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"]={docgenInfo:T.__docgenInfo,name:"SessionRecordingsTable",path:"frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx#SessionRecordingsTable"})}catch($){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingFilters.scss":function(y,i,e){var R=e("./node_modules/css-loader/dist/runtime/api.js");i=R(!1),i.push([y.i,".SessionRecordingFilters .filter-row{width:100%;justify-content:space-between;margin-bottom:1rem;align-items:flex-end}.SessionRecordingFilters .filter-container{max-width:700px;padding:1rem;border:1px solid var(--border);flex:1;border-radius:var(--radius)}.SessionRecordingFilters .filter-section{padding-bottom:1rem}.SessionRecordingFilters .session-recording-action-property-filter{margin:0 0 0 68px;background-color:var(--antd-table-background-dark);border-top-width:1px;border:1px solid var(--border);border-top:0 solid var(--border);padding:.25rem 1rem}.SessionRecordingFilters .entity-filter-row{width:100%;padding:1rem;border:1px solid var(--border);margin-top:1rem;border-radius:var(--radius)}.SessionRecordingFilters .time-filter-row{justify-content:flex-end;align-items:flex-end}.SessionRecordingFilters .time-filter-row .time-filter{align-items:center;margin-left:1rem}.SessionRecordingFilters .time-filter-row .time-filter .filter-label{margin-right:4px}",""]),y.exports=i},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingPlaylist.scss":function(y,i,e){var R=e("./node_modules/css-loader/dist/runtime/api.js");i=R(!1),i.push([y.i,".SessionRecordingPlaylist{display:flex;flex-direction:row}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column{width:300px;flex-shrink:0}.SessionRecordingPlaylist .SessionRecordingPlaylist__left-column .SessionRecordingPlaylist__pagination-control{margin-top:1rem;display:flex;width:100%;justify-content:flex-end;align-items:center}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column{flex:1}.SessionRecordingPlaylist .SessionRecordingPlaylist__right-column .SessionRecordingPlaylist__loading{display:flex;align-items:center;justify-content:center;margin-top:10rem}",""]),y.exports=i},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/session-recordings/SessionRecordingTable.scss":function(y,i,e){var R=e("./node_modules/css-loader/dist/runtime/api.js");i=R(!1),i.push([y.i,".session-recordings-table .pagination-control{margin:1rem;justify-content:center}.session-recordings-table .play-button-container{display:flex;justify-content:flex-end}.session-recordings-table .play-button-container .play-button .anticon-play-circle{color:var(--primary)}.session-recordings-table .play-button-container .play-button.viewed .anticon-play-circle{color:var(--muted)}.session-recordings-table .info-icon{color:var(--primary)}",""]),y.exports=i}}]);
