"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[40991],{"./frontend/src/scenes/dashboard/dashboards/Dashboards.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Dashboards:function(){return Dashboards},scene:function(){return scene}});var index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),dashboardsModel=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),dashboardsLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),NewDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/NewDashboardModal.tsx"),PageHeader=__webpack_require__("./frontend/src/lib/components/PageHeader.tsx"),LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),newDashboardLogic=__webpack_require__("./frontend/src/scenes/dashboard/newDashboardLogic.ts"),inAppPromptLogic=__webpack_require__("./frontend/src/lib/logic/inAppPrompt/inAppPromptLogic.tsx"),DeleteDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/DeleteDashboardModal.tsx"),DuplicateDashboardModal=__webpack_require__("./frontend/src/scenes/dashboard/DuplicateDashboardModal.tsx"),card=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_react-dom@16.14.0_react@16.14.0/node_modules/antd/es/card/index.js"),objectSpread2=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),asn_AppstoreAddOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},AntdIcon=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_react-dom@16.14.0_react@16.14.0/node_modules/@ant-design/icons/es/components/AntdIcon.js"),AppstoreAddOutlined_AppstoreAddOutlined=function AppstoreAddOutlined(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref:ref,icon:asn_AppstoreAddOutlined}))};AppstoreAddOutlined_AppstoreAddOutlined.displayName="AppstoreAddOutlined";var icons_AppstoreAddOutlined=react.forwardRef(AppstoreAddOutlined_AppstoreAddOutlined),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const NoDashboards=()=>{const{addDashboard:addDashboard}=(0,index_esm.useActions)(newDashboardLogic.Z);return(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("p",{children:"Create your first dashboard:"}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,jsx_runtime.jsx)(card.Z,{title:"Empty",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>addDashboard({name:"New Dashboard",useTemplate:""}),children:(0,jsx_runtime.jsx)("div",{style:{textAlign:"center",fontSize:40},children:(0,jsx_runtime.jsx)(icons_AppstoreAddOutlined,{})})}),(0,jsx_runtime.jsx)(card.Z,{title:"App Default",size:"small",style:{width:200,cursor:"pointer"},onClick:()=>addDashboard({name:"Web App Dashboard",useTemplate:"DEFAULT_APP"}),children:(0,jsx_runtime.jsx)("div",{style:{textAlign:"center",fontSize:40},children:(0,jsx_runtime.jsx)(icons_AppstoreAddOutlined,{})})})]})]})};var DashboardsTable=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx"),dashboardTemplatesLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/templates/dashboardTemplatesLogic.tsx"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),LemonSnack=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSnack/LemonSnack.tsx"),src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),More=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),dashboardTemplateEditorLogic=__webpack_require__("./frontend/src/scenes/dashboard/dashboardTemplateEditorLogic.ts"),DashboardTemplateEditor=__webpack_require__("./frontend/src/scenes/dashboard/DashboardTemplateEditor.tsx"),userLogic=__webpack_require__("./frontend/src/scenes/userLogic.ts"),LemonDialog=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDialog/index.ts");const DashboardTemplatesTable=()=>{const{allTemplates:allTemplates,allTemplatesLoading:allTemplatesLoading}=(0,index_esm.useValues)(dashboardTemplatesLogic.R),{openDashboardTemplateEditor:openDashboardTemplateEditor,setDashboardTemplateId:setDashboardTemplateId,deleteDashboardTemplate:deleteDashboardTemplate,updateDashboardTemplate:updateDashboardTemplate}=(0,index_esm.useActions)(dashboardTemplateEditorLogic.X),{user:user}=(0,index_esm.useValues)(userLogic.userLogic),columns=[{title:"Name",dataIndex:"template_name",render:(_,_ref)=>{let{template_name:template_name}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:template_name})}},{title:"Description",dataIndex:"dashboard_description",render:(_,_ref2)=>{let{dashboard_description:dashboard_description}=_ref2;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:dashboard_description})}},{title:"Type",dataIndex:"team_id",render:(_,_ref3)=>{let{scope:scope}=_ref3;return"global"===scope?(0,jsx_runtime.jsx)(LemonSnack.L,{children:"Official"}):(0,jsx_runtime.jsx)(LemonSnack.L,{children:"Team"})}},{width:0,render:(_,_ref4)=>{let{id:id,scope:scope}=_ref4;return user?.is_staff?(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.LemonButton,{status:"stealth",onClick:()=>{void 0!==id?(setDashboardTemplateId(id),openDashboardTemplateEditor()):console.error("Dashboard template id not defined")},fullWidth:!0,children:"Edit"}),(0,jsx_runtime.jsxs)(src.LemonButton,{status:"stealth",onClick:()=>{void 0!==id?updateDashboardTemplate({id:id,dashboardTemplateUpdates:{scope:"global"===scope?"team":"global"}}):console.error("Dashboard template id not defined")},fullWidth:!0,children:["Make visible to ","global"===scope?"this team only":"everyone"]}),(0,jsx_runtime.jsx)(src.LemonDivider,{}),(0,jsx_runtime.jsx)(src.LemonButton,{onClick:()=>{void 0!==id?LemonDialog.d.open({title:"Delete dashboard template?",description:"This action cannot be undone.",primaryButton:{status:"danger",children:"Delete",onClick:()=>{deleteDashboardTemplate(id)}}}):console.error("Dashboard template id not defined")},fullWidth:!0,status:"danger",disabledReason:"global"===scope?"Cannot delete global dashboard templates, make them team only first":void 0,children:"Delete dashboard"})]})}):null}}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonTable.g,{"data-attr":"dashboards-template-table",pagination:{pageSize:10},dataSource:Object.values(allTemplates),columns:columns,loading:allTemplatesLoading,defaultSorting:{columnKey:"name",order:1},emptyState:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"There are no dashboard templates."}),nouns:["template","templates"]}),(0,jsx_runtime.jsx)(DashboardTemplateEditor.v,{})]})};var LemonTabs=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTabs/index.ts"),featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),columnUtils=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),notebooksModel=__webpack_require__("./frontend/src/models/notebooksModel.ts"),LemonBanner=__webpack_require__("./frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonMenu=__webpack_require__("./frontend/src/lib/lemon-ui/LemonMenu/index.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),notebookPopoverLogic=__webpack_require__("./frontend/src/scenes/notebooks/Notebook/notebookPopoverLogic.ts"),membersLogic=__webpack_require__("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),types=__webpack_require__("./frontend/src/types.ts"),LemonSelectMultiple=__webpack_require__("./frontend/src/lib/lemon-ui/LemonSelectMultiple/LemonSelectMultiple.tsx");const fromNodeTypeToLabel={[types.Cz.FeatureFlag]:"Feature flags",[types.Cz.FeatureFlagCodeExample]:"Feature flag Code Examples",[types.Cz.Experiment]:"Experiments",[types.Cz.EarlyAccessFeature]:"Early Access Features",[types.Cz.Image]:"Images",[types.Cz.Insight]:"Insights",[types.Cz.Person]:"Persons",[types.Cz.Query]:"Queries",[types.Cz.Recording]:"Session recordings",[types.Cz.RecordingPlaylist]:"Session replay playlists",[types.Cz.ReplayTimestamp]:"Session recording comments"};function ContainsTypeFilters(_ref){let{filters:filters,setFilters:setFilters}=_ref;return(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"Containing:"}),(0,jsx_runtime.jsx)(LemonSelectMultiple.E,{mode:"multiple",selectClassName:"min-w-40",placeholder:"Any content",options:Object.entries(fromNodeTypeToLabel).filter((entry=>""!==entry[1])).reduce(((acc,_ref2)=>{let[type,label]=_ref2;return acc[type]={label:label},acc}),{}),value:filters.contains,onChange:newValue=>{setFilters({contains:newValue.map((x=>x))})},"data-attr":"notebooks-list-contains-filters"})]})}try{ContainsTypeFilters.displayName="ContainsTypeFilters",ContainsTypeFilters.__docgenInfo={description:"",displayName:"ContainsTypeFilters",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"NotebooksListFilters"}},setFilters:{defaultValue:null,description:"",name:"setFilters",required:!0,type:{name:"(selection: Partial<NotebooksListFilters>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/notebooks/NotebooksTable/ContainsTypeFilter.tsx#ContainsTypeFilters"]={docgenInfo:ContainsTypeFilters.__docgenInfo,name:"ContainsTypeFilters",path:"frontend/src/scenes/notebooks/NotebooksTable/ContainsTypeFilter.tsx#ContainsTypeFilters"})}catch(__react_docgen_typescript_loader_error){}var api=__webpack_require__("./frontend/src/lib/api.ts"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),lib=__webpack_require__("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5/node_modules/kea-loaders/lib/index.js");const DEFAULT_FILTERS={search:"",createdBy:"All users",contains:[]},notebooksTableLogic=(0,index_esm.kea)([(0,index_esm.path)(["scenes","notebooks","NotebooksTable","notebooksTableLogic"]),(0,index_esm.actions)({loadNotebooks:!0,setFilters:filters=>({filters:filters})}),(0,index_esm.connect)({values:[notebooksModel.L,["notebookTemplates"]]}),(0,index_esm.reducers)({filters:[DEFAULT_FILTERS,{setFilters:(state,_ref)=>{let{filters:filters}=_ref;return(0,utils.hO)({...state||{},...filters})}}]}),(0,lib.loaders)((_ref2=>{let{values:values}=_ref2;return{notebooks:[[],{loadNotebooks:async(_,breakpoint)=>{await breakpoint(100);const contains=values.filters?.contains.map((type=>({type:type,attrs:{}})))||void 0,createdByForQuery=values.filters?.createdBy===DEFAULT_FILTERS.createdBy?void 0:values.filters?.createdBy,res=await api.ZP.notebooks.list(contains,createdByForQuery,values.filters?.search);return breakpoint(),res.results}}]}})),(0,index_esm.listeners)((_ref3=>{let{actions:actions}=_ref3;return{setFilters:()=>{actions.loadNotebooks()}}})),(0,index_esm.selectors)({notebooksAndTemplates:[s=>[s.notebooks,s.notebookTemplates,s.filters],(notebooks,notebookTemplates,filters)=>[...(0,utils.h0)(filters,DEFAULT_FILTERS)?notebookTemplates:[],...notebooks]]})]);function NotebooksTable(){const{notebooksAndTemplates:notebooksAndTemplates,filters:filters,notebooksLoading:notebooksLoading,notebookTemplates:notebookTemplates}=(0,index_esm.useValues)(notebooksTableLogic),{loadNotebooks:loadNotebooks,setFilters:setFilters}=(0,index_esm.useActions)(notebooksTableLogic),{meFirstMembers:meFirstMembers}=(0,index_esm.useValues)(membersLogic.m),{setVisibility:setVisibility,selectNotebook:selectNotebook}=(0,index_esm.useActions)(notebookPopoverLogic.L);(0,react.useEffect)((()=>{loadNotebooks()}),[]);const columns=[{title:"Title",dataIndex:"title",width:"100%",render:function Render(title,_ref){let{short_id:short_id,is_template:is_template}=_ref;return(0,jsx_runtime.jsxs)(Link.r,{"data-attr":"notebook-title",to:urls.j.notebook(short_id),className:"font-semibold flex items-center gap-2",children:[title||"Untitled",is_template&&(0,jsx_runtime.jsx)(src.LemonTag,{type:"highlight",children:"TEMPLATE"})]})},sorter:(a,b)=>{var _a$title,_b$title;return(null!==(_a$title=a.title)&&void 0!==_a$title?_a$title:"Untitled").localeCompare(null!==(_b$title=b.title)&&void 0!==_b$title?_b$title:"Untitled")}},(0,columnUtils.J)(),(0,columnUtils.r)(),{render:function Render(_,notebook){return(0,jsx_runtime.jsx)(LemonMenu.d,{items:[{items:[{label:"Delete",icon:(0,jsx_runtime.jsx)(icons.Fzz,{}),status:"danger",onClick:()=>{notebooksModel.L.actions.deleteNotebook(notebook.short_id,notebook?.title)}}]}],actionable:!0,children:(0,jsx_runtime.jsx)(src.LemonButton,{"aria-label":"more",icon:(0,jsx_runtime.jsx)(icons.YRX,{}),status:"stealth",size:"small"})})}}];return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)(LemonBanner.V,{type:"info",action:{onClick:()=>{selectNotebook(notebookTemplates[0].short_id),setVisibility("visible")},children:"Get started"},children:[(0,jsx_runtime.jsx)("b",{children:"Welcome to the preview of Notebooks"})," - a great way to bring Insights, Replays, Feature Flags and many more PostHog prodcuts together into one place."]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap",children:[(0,jsx_runtime.jsx)(src.LemonInput,{type:"search",placeholder:"Search for notebooks",onChange:s=>{setFilters({search:s})},value:filters.search}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,jsx_runtime.jsx)(ContainsTypeFilters,{filters:filters,setFilters:setFilters}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"Created by:"}),(0,jsx_runtime.jsx)(src.LemonSelect,{options:[{value:DEFAULT_FILTERS.createdBy,label:DEFAULT_FILTERS.createdBy},...meFirstMembers.map((x=>({value:x.user.uuid,label:x.user.first_name})))],size:"small",value:filters.createdBy,onChange:v=>{setFilters({createdBy:v||DEFAULT_FILTERS.createdBy})},dropdownMatchSelectWidth:!1})]})]})]}),(0,jsx_runtime.jsx)(LemonTable.g,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:notebooksAndTemplates,rowKey:"short_id",columns:columns,loading:notebooksLoading,defaultSorting:{columnKey:"-created_at",order:1},emptyState:"No notebooks matching your filters!",nouns:["notebook","notebooks"]})]})}const scene={component:Dashboards,logic:dashboardsLogic.dJ};function Dashboards(){const{dashboardsLoading:dashboardsLoading}=(0,index_esm.useValues)(dashboardsModel.h),{setCurrentTab:setCurrentTab}=(0,index_esm.useActions)(dashboardsLogic.dJ),{dashboards:dashboards,currentTab:currentTab,isFiltering:isFiltering}=(0,index_esm.useValues)(dashboardsLogic.dJ),{showNewDashboardModal:showNewDashboardModal}=(0,index_esm.useActions)(newDashboardLogic.Z),{closePrompts:closePrompts}=(0,index_esm.useActions)(inAppPromptLogic.U),{featureFlags:featureFlags}=(0,index_esm.useValues)(featureFlagLogic.h),{notebooksLoading:notebooksLoading}=(0,index_esm.useValues)(notebooksModel.L),{createNotebook:createNotebook}=(0,index_esm.useActions)(notebooksModel.L),notebooksEnabled=featureFlags[constants.y8.NOTEBOOKS],enabledTabs=[{key:dashboardsLogic.NS.Dashboards,label:"Dashboards"},{key:dashboardsLogic.NS.Templates,label:"Templates"}];return notebooksEnabled&&enabledTabs.splice(1,0,{key:dashboardsLogic.NS.Notebooks,label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Notebooks",(0,jsx_runtime.jsx)(src.LemonTag,{type:"warning",className:"uppercase ml-2",children:"Beta"})]})}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(NewDashboardModal.OI,{}),(0,jsx_runtime.jsx)(DuplicateDashboardModal.i,{}),(0,jsx_runtime.jsx)(DeleteDashboardModal.y,{}),(0,jsx_runtime.jsx)(PageHeader.m,{title:"Dashboards"+(notebooksEnabled?" & Notebooks":""),buttons:currentTab===dashboardsLogic.NS.Notebooks?(0,jsx_runtime.jsx)(LemonButton.Jp,{"data-attr":"new-notebook",onClick:()=>{createNotebook()},type:"primary",disabledReason:notebooksLoading?"Loading...":void 0,children:"New notebook"}):(0,jsx_runtime.jsx)(LemonButton.Jp,{"data-attr":"new-dashboard",onClick:()=>{closePrompts(),showNewDashboardModal()},type:"primary",children:"New dashboard"})}),(0,jsx_runtime.jsx)(LemonTabs.T,{activeKey:currentTab,onChange:newKey=>setCurrentTab(newKey),tabs:enabledTabs}),currentTab===dashboardsLogic.NS.Templates?(0,jsx_runtime.jsx)(DashboardTemplatesTable,{}):currentTab===dashboardsLogic.NS.Notebooks?(0,jsx_runtime.jsx)(NotebooksTable,{}):dashboardsLoading||dashboards.length>0||isFiltering?(0,jsx_runtime.jsx)(DashboardsTable.z,{}):(0,jsx_runtime.jsx)(NoDashboards,{})]})}},"./frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{q:function(){return DashboardsTable},z:function(){return DashboardsTableContainer}});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@16.14.0/node_modules/kea/lib/index.esm.js"),_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./frontend/src/models/dashboardsModel.tsx"),scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/dashboard/dashboards/dashboardsLogic.ts"),scenes_userLogic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/userLogic.ts"),scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/scenes/teamLogic.tsx"),scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/scenes/dashboard/duplicateDashboardLogic.ts"),scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/dashboard/deleteDashboardLogic.ts"),lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./frontend/src/types.ts"),lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts"),lib_constants__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./frontend/src/lib/constants.tsx"),lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./frontend/src/lib/lemon-ui/Link/index.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./frontend/src/scenes/urls.ts"),lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/columnUtils.tsx"),lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/More.tsx"),scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./frontend/src/scenes/dashboard/dashboardLogic.tsx"),lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonDivider/index.ts"),lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./frontend/src/lib/lemon-ui/LemonRow/index.ts"),_DashboardHeader__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./frontend/src/scenes/dashboard/DashboardHeader.tsx"),_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),scenes_organization_Settings_membersLogic__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function DashboardsTableContainer(){const{dashboardsLoading:dashboardsLoading}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__.h),{dashboards:dashboards,filters:filters}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_2__.dJ);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(DashboardsTable,{dashboards:dashboards,dashboardsLoading:dashboardsLoading,filters:filters})}function DashboardsTable(_ref){let{dashboards:dashboards,dashboardsLoading:dashboardsLoading,filters:filters,extraActions:extraActions,hideActions:hideActions}=_ref;const{unpinDashboard:unpinDashboard,pinDashboard:pinDashboard}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__.h),{setFilters:setFilters}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_dashboards_dashboardsLogic__WEBPACK_IMPORTED_MODULE_2__.dJ),{hasAvailableFeature:hasAvailableFeature}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_userLogic__WEBPACK_IMPORTED_MODULE_3__.userLogic),{currentTeam:currentTeam}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_teamLogic__WEBPACK_IMPORTED_MODULE_4__.teamLogic),{showDuplicateDashboardModal:showDuplicateDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_duplicateDashboardLogic__WEBPACK_IMPORTED_MODULE_5__.T),{showDeleteDashboardModal:showDeleteDashboardModal}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useActions)(scenes_dashboard_deleteDashboardLogic__WEBPACK_IMPORTED_MODULE_6__.r),{meFirstMembers:meFirstMembers}=(0,kea__WEBPACK_IMPORTED_MODULE_0__.useValues)(scenes_organization_Settings_membersLogic__WEBPACK_IMPORTED_MODULE_24__.m),columns=[{width:0,dataIndex:"pinned",render:function Render(pinned,_ref2){let{id:id}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.Jp,{size:"small",status:"stealth",onClick:pinned?()=>unpinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.GU.DashboardsList):()=>pinDashboard(id,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.GU.DashboardsList),tooltip:pinned?"Unpin dashboard":"Pin dashboard",icon:pinned?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.YW7,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.eY2,{})})}},{title:"Name",dataIndex:"name",width:"40%",render:function Render(name,_ref3){let{id:id,description:description,is_shared:is_shared,effective_privilege_level:effective_privilege_level}=_ref3;const isPrimary=id===currentTeam?.primary_dashboard,canEditDashboard=effective_privilege_level>=lib_constants__WEBPACK_IMPORTED_MODULE_11__.kH.CanEdit;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"row-name",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_12__.r,{"data-attr":"dashboard-name",to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.j.dashboard(id),children:name||"Untitled"}),is_shared&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:"This dashboard is shared publicly.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.FOM,{className:"ml-1 text-base text-primary"})}),!canEditDashboard&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:_DashboardHeader__WEBPACK_IMPORTED_MODULE_22__.o,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__._V1,{className:"ml-1 text-base text-muted"})}),isPrimary&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Tooltip__WEBPACK_IMPORTED_MODULE_14__.u,{title:"The primary dashboard is shown on the project home page.",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.Bhv,{className:"ml-1 text-base text-warning"})})]}),hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_8__.P$.DASHBOARD_COLLABORATION)&&description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{className:"row-description",children:description})]})},sorter:_models_dashboardsModel__WEBPACK_IMPORTED_MODULE_1__.q},...hasAvailableFeature(_types__WEBPACK_IMPORTED_MODULE_8__.P$.TAGGING)?[{title:"Tags",dataIndex:"tags",render:function Render(tags){return tags?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_components_ObjectTags_ObjectTags__WEBPACK_IMPORTED_MODULE_16__.D,{tags:tags,staticOnly:!0}):null}}]:[],(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_17__.J)(),(0,lib_lemon_ui_LemonTable_columnUtils__WEBPACK_IMPORTED_MODULE_17__.r)(),hideActions?{}:{width:0,render:function RenderActions(_,_ref4){let{id:id,name:name}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton_More__WEBPACK_IMPORTED_MODULE_18__.T,{overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.Jp,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.BM)({id:id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.BM)({id:id}).actions.setDashboardMode(null,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.GU.DashboardsList)},fullWidth:!0,children:"View"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.Jp,{status:"stealth",to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.j.dashboard(id),onClick:()=>{(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.BM)({id:id}).mount(),(0,scenes_dashboard_dashboardLogic__WEBPACK_IMPORTED_MODULE_19__.BM)({id:id}).actions.setDashboardMode(_types__WEBPACK_IMPORTED_MODULE_8__.MN.Edit,lib_utils_eventUsageLogic__WEBPACK_IMPORTED_MODULE_10__.GU.DashboardsList)},fullWidth:!0,children:"Edit"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.Jp,{status:"stealth",onClick:()=>{showDuplicateDashboardModal(id,name)},fullWidth:!0,children:"Duplicate"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_20__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonRow__WEBPACK_IMPORTED_MODULE_21__.Q,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.Bhv,{className:"text-warning"}),fullWidth:!0,status:"warning",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("span",{className:"text-muted",children:["Change the default dashboard",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("br",{}),"from the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_Link__WEBPACK_IMPORTED_MODULE_12__.r,{to:scenes_urls__WEBPACK_IMPORTED_MODULE_13__.j.projectHomepage(),children:"project home page"}),"."]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonDivider__WEBPACK_IMPORTED_MODULE_20__.p,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.Jp,{onClick:()=>{showDeleteDashboardModal(id)},fullWidth:!0,status:"danger",children:"Delete dashboard"})]})})}}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex justify-between gap-2 flex-wrap mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_23__.LemonInput,{type:"search",placeholder:"Search for dashboards",onChange:x=>setFilters({search:x}),value:filters.search}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.Jp,{active:filters.pinned,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({pinned:!filters.pinned}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.eY2,{}),children:"Pinned"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("div",{className:"flex items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonButton__WEBPACK_IMPORTED_MODULE_9__.Jp,{active:filters.shared,type:"secondary",status:"stealth",size:"small",onClick:()=>setFilters({shared:!filters.shared}),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_icons__WEBPACK_IMPORTED_MODULE_15__.FOM,{}),children:"Shared"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)("span",{children:"Created by:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_23__.LemonSelect,{options:[{value:"All users",label:"All Users"},...meFirstMembers.map((x=>({value:x.user.uuid,label:x.user.first_name})))],size:"small",value:filters.createdBy,onChange:v=>{setFilters({createdBy:v})},dropdownMatchSelectWidth:!1})]}),extraActions]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_25__.jsx)(lib_lemon_ui_LemonTable__WEBPACK_IMPORTED_MODULE_7__.g,{"data-attr":"dashboards-table",pagination:{pageSize:100},dataSource:dashboards,rowKey:"id",rowClassName:record=>record._highlight?"highlighted":null,columns:columns,loading:dashboardsLoading,defaultSorting:{columnKey:"name",order:1},emptyState:"No dashboards matching your filters!",nouns:["dashboard","dashboards"]})]})}try{DashboardsTable.displayName="DashboardsTable",DashboardsTable.__docgenInfo={description:"",displayName:"DashboardsTable",props:{dashboards:{defaultValue:null,description:"",name:"dashboards",required:!0,type:{name:"DashboardBasicType[]"}},filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"DashboardsFilters"}},dashboardsLoading:{defaultValue:null,description:"",name:"dashboardsLoading",required:!0,type:{name:"boolean"}},extraActions:{defaultValue:null,description:"",name:"extraActions",required:!1,type:{name:"Element | Element[]"}},hideActions:{defaultValue:null,description:"",name:"hideActions",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx#DashboardsTable"]={docgenInfo:DashboardsTable.__docgenInfo,name:"DashboardsTable",path:"frontend/src/scenes/dashboard/dashboards/DashboardsTable.tsx#DashboardsTable"})}catch(__react_docgen_typescript_loader_error){}}}]);