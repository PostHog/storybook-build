"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[51129],{"../../frontend/src/scenes/feature-flags/FeatureManagement.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FeatureManagement:()=>FeatureManagement,scene:()=>scene});var index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),teamLogic=__webpack_require__("../../frontend/src/scenes/teamLogic.tsx"),lib=__webpack_require__("../../node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.5_react@18.2.0_/node_modules/kea-loaders/lib/index.js"),kea_router_lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.2.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),api=__webpack_require__("../../frontend/src/lib/api.ts"),sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts");let featureManagementLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.path)(["scenes","features","featureManagementLogic"]),(0,index_esm.connect)({values:[teamLogic.H,["currentTeamId"]]}),(0,index_esm.actions)({setActiveFeatureId:activeFeatureId=>({activeFeatureId})}),(0,index_esm.reducers)({activeFeatureId:[null,{setActiveFeatureId:(_,_ref)=>{let{activeFeatureId}=_ref;return activeFeatureId}}]}),(0,lib.loaders)(_ref2=>{let{values}=_ref2;return{features:[{results:[],count:0,offset:0},{loadFeatures:async()=>(await api.ZP.get(`api/projects/${values.currentTeamId}/features`)).data}]}}),(0,index_esm.selectors)({activeFeature:[s=>[s.activeFeatureId,s.features],(activeFeatureId,features)=>features.results.find(feature=>feature.id===activeFeatureId)||null],breadcrumbs:[s=>[s.activeFeatureId,s.activeFeature],(activeFeatureId,activeFeature)=>{let breadcrumbs=[{key:sceneTypes.x.FeatureManagement,name:"Features",path:urls.j.featureManagement()}];if(activeFeatureId){var _activeFeature$name;breadcrumbs.push({key:[sceneTypes.x.FeatureManagement,activeFeatureId],name:null!==(_activeFeature$name=activeFeature?.name)&&void 0!==_activeFeature$name?_activeFeature$name:"Feature",path:urls.j.featureManagement(String(activeFeatureId))})}return breadcrumbs}]}),(0,index_esm.listeners)(_ref3=>{let{actions,values}=_ref3;return{loadFeaturesSuccess:_ref4=>{let{features}=_ref4;null===values.activeFeatureId&&features.results.length>0&&actions.setActiveFeatureId(features.results[0].id)}}}),(0,kea_router_lib.actionToUrl)({setActiveFeatureId:_ref5=>{let{activeFeatureId}=_ref5;return urls.j.featureManagement(activeFeatureId)}}),(0,kea_router_lib.urlToAction)(_ref6=>{let{actions,values}=_ref6;return{"/features/:id":_ref7=>{let{id}=_ref7;id&&String(values.activeFeatureId)!==id&&actions.setActiveFeatureId(Number(id))}}}),(0,index_esm.afterMount)(_ref8=>{let{actions}=_ref8;actions.loadFeatures()})]),featureManagementDetailLogic=(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.path)(["scenes","features","featureManagementDetailLogic"]),(0,index_esm.connect)({values:[teamLogic.H,["currentTeamId"],featureManagementLogic,["activeFeatureId","activeFeature"]]})]);var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function Metadata(){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("h2",{className:"font-semibold text-lg",children:"Metadata"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0})]})}function Rollout(){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("h2",{className:"font-semibold text-lg",children:"Rollout"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0})]})}function Usage(){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("h2",{className:"font-semibold text-lg",children:"Usage"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0})]})}function Activity(){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("h2",{className:"font-semibold text-lg",children:"Activity"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0})]})}function History(){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("h2",{className:"font-semibold text-lg",children:"History"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0})]})}function Permissions(){return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("h2",{className:"font-semibold text-lg",children:"Permissions"}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0}),(0,jsx_runtime.jsx)(src.yW,{className:"w-full h-4",active:!0})]})}function FeatureManagementDetail(){let{activeFeature}=(0,index_esm.useValues)(featureManagementDetailLogic);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-16",children:[(0,jsx_runtime.jsx)("div",{className:"text-xl font-bold",children:activeFeature?.name}),(0,jsx_runtime.jsx)(Metadata,{}),(0,jsx_runtime.jsx)(Rollout,{}),(0,jsx_runtime.jsx)(Usage,{}),(0,jsx_runtime.jsx)(Activity,{}),(0,jsx_runtime.jsx)(History,{}),(0,jsx_runtime.jsx)(Permissions,{})]})}let scene={component:FeatureManagement,logic:featureManagementLogic};function FeatureManagement(){let{activeFeatureId,features}=(0,index_esm.useValues)(featureManagementLogic),{setActiveFeatureId}=(0,index_esm.useActions)(featureManagementLogic);return(0,jsx_runtime.jsxs)("div",{className:"flex gap-4",children:[(0,jsx_runtime.jsx)("ul",{className:"w-1/6 space-y-px",children:features.results.map(feature=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(LemonButton.J,{onClick:()=>setActiveFeatureId(feature.id),size:"small",fullWidth:!0,active:activeFeatureId===feature.id,children:(0,jsx_runtime.jsx)("span",{className:"truncate",children:feature.name})})},feature.id))}),(0,jsx_runtime.jsx)("div",{className:"w-5/6",children:(0,jsx_runtime.jsx)(FeatureManagementDetail,{})})]})}}}]);