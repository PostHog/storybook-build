(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{"./frontend/src/lib/components/Table/utils.tsx":function(B,_,e){"use strict";e.d(_,"a",function(){return u});var D=e("./node_modules/react/index.js"),b=e.n(D),M=e("./frontend/src/lib/hooks/useWindowSize.js"),A=e("./frontend/src/lib/utils/responsiveUtils.tsx");function u(m){return b.a.createElement("span",{style:{whiteSpace:"nowrap"}},m)}var T=function(C){var y=Object(M.a)(),t=y.width,o=Object(A.b)(C),r=!!t&&t<=o;return{isTableScrolling:r,tableScrollBreakpoint:o,tableScrollX:r?"max-content":"".concat(o,"px")}};try{u.displayName="normalizeColumnTitle",u.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:u.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(m){}try{T.displayName="useIsTableScrolling",T.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:T.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(m){}},"./frontend/src/scenes/feature-flags/FeatureFlags.tsx":function(B,_,e){"use strict";e.r(_),e.d(_,"scene",function(){return w}),e.d(_,"FeatureFlags",function(){return R}),e.d(_,"groupFilters",function(){return v});var D=e("./node_modules/core-js/modules/es.function.name.js"),b=e.n(D),M=e("./node_modules/core-js/modules/es.number.constructor.js"),A=e.n(M),u=e("./node_modules/core-js/modules/es.object.to-string.js"),T=e.n(u),m=e("./node_modules/core-js/modules/es.array.includes.js"),C=e.n(m),y=e("./node_modules/react/index.js"),t=e.n(y),o=e("./node_modules/kea/lib/index.esm.js"),r=e("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),j=e("./node_modules/antd/es/input/index.js"),L=e("./node_modules/antd/es/tabs/index.js"),W=e("./frontend/src/lib/components/Link.tsx"),h=e("./frontend/src/lib/utils.tsx"),K=e("./frontend/src/lib/components/PageHeader.tsx"),U=e("./frontend/src/lib/components/Table/utils.tsx"),P=e("./frontend/src/scenes/urls.ts"),x=e("./frontend/src/lib/utils/stringWithWBR.tsx"),F=e("./frontend/src/scenes/teamLogic.tsx"),g=e("./frontend/src/lib/components/LemonButton/index.ts"),N=e("./frontend/src/lib/components/LemonDivider/index.ts"),z=e("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),V=e("./frontend/src/lib/components/LemonTable/index.ts"),Y=e("./frontend/src/lib/components/LemonButton/More.tsx"),I=e("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),p=e("./frontend/src/lib/components/PropertyFilters/components/PropertyFiltersDisplay.tsx"),H=e("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),G=e("./frontend/src/scenes/feature-flags/activityDescriptions.tsx"),J=e("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),w={component:R,logic:r.a};function X(){var s=Object(o.useValues)(F.a),E=s.currentTeamId,a=Object(o.useValues)(r.a),f=a.featureFlagsLoading,c=a.searchedFeatureFlags,i=a.searchTerm,d=Object(o.useActions)(r.a),$=d.updateFeatureFlag,Q=d.loadFeatureFlags,Z=d.setSearchTerm,k=[{title:Object(U.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:function(l,n){return(l.key||"").localeCompare(n.key||"")},render:function(l,n){return t.a.createElement(t.a.Fragment,null,t.a.createElement(W.a,{to:n.id?P.a.featureFlag(n.id):void 0,className:"row-name"},Object(x.a)(n.key,17)),n.name&&t.a.createElement("span",{className:"row-description"},n.name))}},Object(I.b)(),Object(I.a)(),{title:"Rollout",width:200,render:function(l,n){return v(n.filters.groups)}},{title:"Status",dataIndex:"active",sorter:function(l,n){return Number(l.active)-Number(n.active)},width:100,render:function(l,n){return t.a.createElement(z.a,{id:"feature-flag-".concat(n.id,"-switch"),checked:n.active,onChange:function(q){return n.id?$({id:n.id,payload:{active:q}}):null},label:t.a.createElement("span",{className:"font-normal"},n.active?"Enabled":"Disabled")})}},{width:0,render:function(l,n){return t.a.createElement(Y.a,{overlay:t.a.createElement(t.a.Fragment,null,t.a.createElement(g.a,{status:"stealth",onClick:function(){Object(h.t)(n.key,"feature flag key")},fullWidth:!0},"Copy key"),n.id&&t.a.createElement(g.a,{status:"stealth",to:P.a.featureFlag(n.id),fullWidth:!0},"Edit"),t.a.createElement(g.a,{status:"stealth",to:P.a.insightNew({events:[{id:"$pageview",name:"$pageview",type:"events",math:"dau"}],breakdown_type:"event",breakdown:"$feature/".concat(n.key)}),"data-attr":"usage",fullWidth:!0},"Try out in Insights"),t.a.createElement(N.a,null),n.id&&t.a.createElement(g.a,{status:"danger",onClick:function(){Object(h.x)({endpoint:"projects/".concat(E,"/feature_flags"),object:{name:n.key,id:n.id},callback:Q})},fullWidth:!0},"Delete feature flag"))})}}];return t.a.createElement(t.a.Fragment,null,t.a.createElement("div",null,t.a.createElement(j.a.Search,{placeholder:"Search for feature flags",allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1,marginBottom:"1rem"},value:i,onChange:function(l){Z(l.target.value)}})),t.a.createElement(V.a,{dataSource:c,columns:k,rowKey:"key",loading:f,defaultSorting:{columnKey:"key",order:1},pagination:{pageSize:100},nouns:["feature flag","feature flags"],"data-attr":"feature-flag-table","data-tooltip":"feature-flag-table"}))}function R(){var s=Object(o.useValues)(r.a),E=s.activeTab,a=Object(o.useActions)(r.a),f=a.setActiveTab;return t.a.createElement("div",{className:"feature_flags"},t.a.createElement(K.a,{title:"Feature Flags",buttons:t.a.createElement(g.a,{type:"primary",to:P.a.featureFlag("new"),"data-attr":"new-feature-flag"},"New feature flag")}),t.a.createElement(L.a,{activeKey:E,destroyInactiveTabPane:!0,onChange:function(i){return f(i)}},t.a.createElement(L.a.TabPane,{tab:"Overview",key:"overview"},t.a.createElement(X,null)),t.a.createElement(L.a.TabPane,{tab:"History",key:"history"},t.a.createElement(H.a,{scope:J.a.FEATURE_FLAG,describer:G.a}))))}function v(s){if(s.length===0||!s.some(function(i){return i.rollout_percentage!==0}))return"No users";if(s.some(function(i){var d;return!((d=i.properties)!==null&&d!==void 0&&d.length)&&[null,void 0,100].includes(i.rollout_percentage)}))return"All users";if(s.length===1){var E=s[0],a=E.properties,f=E.rollout_percentage,c=f===void 0?null:f;return(a==null?void 0:a.length)>0&&c!=null?t.a.createElement("div",{style:{display:"flex",alignItems:"center"}},t.a.createElement("span",{style:{flexShrink:0,marginRight:5}},c,"% of"),t.a.createElement(p.a,{filters:a,style:{margin:0,width:"100%"}})):(a==null?void 0:a.length)>0?t.a.createElement(p.a,{filters:a,style:{margin:0}}):c!==null?"".concat(c,"% of all users"):(console.error("A group with full rollout was not detected early"),"All users")}return"".concat(s.length," groups")}try{v.displayName="groupFilters",v.__docgenInfo={description:"",displayName:"groupFilters",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"]={docgenInfo:v.__docgenInfo,name:"groupFilters",path:"frontend/src/scenes/feature-flags/FeatureFlags.tsx#groupFilters"})}catch(s){}}}]);
