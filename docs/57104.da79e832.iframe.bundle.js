(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[57104],{"../../frontend/src/layout/scenes/SceneContent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{SN:()=>SceneSection,Vl:()=>SceneDivider,_W:()=>SceneContent,sG:()=>SceneTitleSection});var _posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),lib_lemon_ui_LemonMarkdown__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonMarkdown/index.ts"),lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),lib_ui_TextareaPrimitive_TextareaPrimitive__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/lib/ui/TextareaPrimitive/TextareaPrimitive.tsx"),lib_ui_TextInputPrimitive_TextInputPrimitive__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/lib/ui/TextInputPrimitive/TextInputPrimitive.tsx"),lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../frontend/src/lib/ui/WrappingLoadingSkeleton/WrappingLoadingSkeleton.tsx"),lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_panel_layout_ProjectTree_defaultTree__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../frontend/src/layout/panel-layout/ProjectTree/defaultTree.tsx"),_posthog_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.27.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),lib_constants__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../frontend/src/lib/constants.tsx"),kea__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneContent(_ref){let{children}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"scene-content flex flex-col gap-y-4",children:children})}function SceneSection(_ref2){let{title,description,isLoading,children,className,hideTitleAndDescription}=_ref2,{featureFlags}=(0,kea__WEBPACK_IMPORTED_MODULE_10__.useValues)(lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_11__.featureFlagLogic);return featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_9__.y8.NEW_SCENE_LAYOUT]?isLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_13__.cn)("flex flex-col gap-4",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("h2",{className:"text-xl font-bold my-0 mb-1 max-w-prose",children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("p",{className:"text-sm text-secondary my-0 max-w-prose",children:description})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_5__.x,{children:children})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_13__.cn)("scene-section--new-layout flex flex-col gap-4",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("h2",{className:"text-xl font-bold my-0 mb-1 max-w-prose",children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("p",{className:"text-sm text-secondary my-0 max-w-prose",children:description})]}),children]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_13__.cn)("scene-section--fallback flex flex-col gap-4",className),children:[!hideTitleAndDescription&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"flex flex-col",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("h2",{className:"flex-1 subtitle mt-0",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("p",{className:"m-0",children:description})]}),children]})}function SceneTitleSection(_ref3){let{name,description,resourceType,markdown=!1,isLoading=!1,onNameBlur,onDescriptionBlur,docsURL}=_ref3,{featureFlags}=(0,kea__WEBPACK_IMPORTED_MODULE_10__.useValues)(lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_11__.featureFlagLogic);if(!featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_9__.y8.NEW_SCENE_LAYOUT])return null;let icon=resourceType.forceIcon?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_panel_layout_ProjectTree_defaultTree__WEBPACK_IMPORTED_MODULE_7__.ee,{type:resourceType.type,colorOverride:resourceType.forceIconColorOverride,children:resourceType.forceIcon}):(0,_panel_layout_ProjectTree_defaultTree__WEBPACK_IMPORTED_MODULE_7__.PO)(resourceType.type);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"scene-title-section w-full flex gap-0 group/colorful-product-icons colorful-product-icons-true",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"flex flex-col gap-1.5 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{className:"flex gap-3 [&_svg]:size-6 items-center",children:[resourceType.to?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.rU,{to:resourceType.to,tooltip:resourceType.tooltip||`View all ${resourceType.typePlural}`,buttonProps:{size:"base",iconOnly:!0,variant:"panel",className:"rounded-sm h-[var(--button-height-lg)]"},children:icon}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:(0,lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_2__.sq)({size:"base",iconOnly:!0,className:"rounded-sm h-[var(--button-height-lg)]",inert:!0}),children:icon}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(SceneName,{name:name,isLoading:isLoading,onBlur:onNameBlur})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(SceneDescription,{description:description,markdown:markdown,isLoading:isLoading,onBlur:onDescriptionBlur})]}),docsURL&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.rU,{to:`${docsURL}?utm_medium=in-product&utm_campaign=scene-title-section-docs-link`,buttonProps:{variant:"panel",className:"rounded-sm"},tooltip:`View docs for ${resourceType.typePlural}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_posthog_icons__WEBPACK_IMPORTED_MODULE_8__.IconDocument,{})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:"hidden lg:block",children:"Read the docs"})]})]})}function SceneName(_ref4){let{name:initialName,isLoading=!1,onBlur}=_ref4,[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),[name,setName]=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(initialName),textClasses="text-3xl font-bold my-0 pl-[var(--button-padding-x-sm)] h-[var(--button-height-lg)] leading-[1.4] select-auto";(0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{isLoading||setName(initialName)},[initialName,isLoading]);let Element=onBlur?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_2__.hL,{size:"lg",onClick:()=>setIsEditing(!0),className:textClasses,menuItem:!0,variant:"panel",tooltip:isEditing?null:"Edit name",children:name||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:"text-tertiary",children:"Unnamed"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("h1",{className:(0,lib_utils_css_classes__WEBPACK_IMPORTED_MODULE_13__.cn)((0,lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_2__.sq)({size:"lg",inert:!0,className:textClasses})),children:name||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:"text-tertiary",children:"Unnamed"})});return isLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"max-w-prose",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_5__.x,{fullWidth:!0,children:Element})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"scene-name max-w-prose flex flex-col gap-0 -ml-[calc(var(--button-padding-x-sm)+2px)]",children:isEditing?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_ui_TextInputPrimitive_TextInputPrimitive__WEBPACK_IMPORTED_MODULE_4__.w,{variant:"default",value:name||"",onChange:e=>setName(e.target.value),className:`${textClasses} bg-transparent field-sizing-content w-full`,autoFocus:!0,onBlur:()=>{setIsEditing(!1),initialName!==name&&onBlur?.(name||"")},size:"lg"})}):Element})}function SceneDescription(_ref5){let{description:initialDescription,markdown=!1,isLoading=!1,onBlur}=_ref5,[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),[description,setDescription]=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(initialDescription),textClasses="text-sm my-0 select-auto";(0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{isLoading||setDescription(initialDescription)},[initialDescription,isLoading]);let Element=onBlur?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_2__.hL,{onClick:()=>setIsEditing(!0),className:`${textClasses}`,autoHeight:!0,menuItem:!0,variant:"panel",tooltip:isEditing?null:"Edit description",children:markdown&&description?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_lemon_ui_LemonMarkdown__WEBPACK_IMPORTED_MODULE_1__.j,{lowKeyHeadings:!0,className:"[&_p]:my-0 [&_p]:leading-[20px]",children:description}):description||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:"text-tertiary",children:"No description (optional)"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:markdown&&description?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_lemon_ui_LemonMarkdown__WEBPACK_IMPORTED_MODULE_1__.j,{lowKeyHeadings:!0,className:(0,lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_2__.sq)({inert:!0,className:`${textClasses} -ml-[var(--button-padding-x-base)]`,autoHeight:!0}),children:description}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("p",{className:(0,lib_ui_Button_ButtonPrimitives__WEBPACK_IMPORTED_MODULE_2__.sq)({inert:!0,className:`${textClasses} -ml-[var(--button-padding-x-base)]`,autoHeight:!0}),children:description||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("span",{className:"text-tertiary",children:"No description (optional)"})})});return isLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"max-w-prose",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_ui_WrappingLoadingSkeleton_WrappingLoadingSkeleton__WEBPACK_IMPORTED_MODULE_5__.x,{fullWidth:!0,children:Element})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("div",{className:"scene-description max-w-prose flex flex-col gap-0",children:isEditing?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(lib_ui_TextareaPrimitive_TextareaPrimitive__WEBPACK_IMPORTED_MODULE_3__.L,{variant:"default",value:description||"",onChange:e=>setDescription(e.target.value),className:`${textClasses} bg-transparent field-sizing-content w-full`,autoFocus:!0,onBlur:()=>{setIsEditing(!1),initialDescription!==description&&onBlur?.(description||"")},markdown:!0})}):Element})}function SceneDivider(){let{featureFlags}=(0,kea__WEBPACK_IMPORTED_MODULE_10__.useValues)(lib_logic_featureFlagLogic__WEBPACK_IMPORTED_MODULE_11__.featureFlagLogic);return featureFlags[lib_constants__WEBPACK_IMPORTED_MODULE_9__.y8.NEW_SCENE_LAYOUT]?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_posthog_lemon_ui__WEBPACK_IMPORTED_MODULE_0__.p2,{className:"scene-divider -mx-4 w-[calc(100%+var(--spacing)*8)]"}):null}},"../../frontend/src/lib/components/Scenes/InsightOrDashboard/SceneAddToDropdownMenu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>SceneAddToDropdownMenu});var posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.27.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),ButtonPrimitives=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),DropdownMenu=__webpack_require__("../../frontend/src/lib/ui/DropdownMenu/DropdownMenu.tsx"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),dayjs=__webpack_require__("../../frontend/src/lib/dayjs.ts"),react=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),NotebookNodeContext=__webpack_require__("../../frontend/src/scenes/notebooks/Nodes/NotebookNodeContext.ts"),notebookSelectButtonLogic=__webpack_require__("../../frontend/src/scenes/notebooks/NotebookSelectButton/notebookSelectButtonLogic.ts"),notebooksModel=__webpack_require__("../../frontend/src/models/notebooksModel.ts"),types=__webpack_require__("../../frontend/src/types.ts"),AccessControlAction=__webpack_require__("../../frontend/src/lib/components/AccessControlAction.tsx"),notebooks_types=__webpack_require__("../../frontend/src/scenes/notebooks/types.ts"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function SceneNotebookMenuItems(_ref){let{notebookSelectButtonProps,newNotebookTitle,onNotebookOpened,dataAttrKey}=_ref,logic=(0,notebookSelectButtonLogic.l)({...notebookSelectButtonProps}),{loadNotebooksContainingResource,loadAllNotebooks}=(0,index_esm.useActions)(logic),nodeLogic=(0,NotebookNodeContext.A)(),{notebooksLoading,notebooksContainingResource,notebooksNotContainingResource,searchQuery}=(0,index_esm.useValues)(logic),{resource}=notebookSelectButtonProps||{},{createNotebook}=(0,index_esm.useActions)(notebooksModel.L),notebookResource=resource&&"boolean"!=typeof resource?resource:null,openAndAddToNotebook=(notebookShortId,exists)=>{let position=notebookSelectButtonProps?.resource?"end":"start";(0,notebooksModel.fL)(notebookShortId,notebooks_types.b.Popover,position,theNotebookLogic=>{!exists&&notebookSelectButtonProps?.resource&&theNotebookLogic.actions.insertAfterLastNode([notebookSelectButtonProps.resource])})},openNewNotebook=()=>{let title=null!=newNotebookTitle?newNotebookTitle:`Notes ${(0,dayjs.Bv)().format("DD/MM")}`;createNotebook(notebooks_types.b.Popover,title,notebookResource?[notebookResource]:void 0,theNotebookLogic=>{onNotebookOpened?.(theNotebookLogic),loadNotebooksContainingResource()})};return(0,react.useEffect)(()=>{nodeLogic||(resource&&loadNotebooksContainingResource(),loadAllNotebooks())},[nodeLogic,resource]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(DropdownMenu.Qk,{children:[(0,jsx_runtime.jsx)(AccessControlAction.bW,{resourceType:types.qR.Notebook,minAccessLevel:types.W$.Editor,children:_ref2=>{let{disabledReason}=_ref2;return(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,disabled:!!disabledReason,...disabledReason&&{tooltip:disabledReason},"data-attr":`${dataAttrKey}-new-notebook-dropdown-menu-item`,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,onClick:openNewNotebook,"data-attr":`${dataAttrKey}-new-notebook-button`,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),"New notebook"]})})}}),(0,jsx_runtime.jsx)(DropdownMenu.Xi,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>{openAndAddToNotebook("scratchpad",!1)},"data-attr":`${dataAttrKey}-my-scratchpad-dropdown-menu-item`,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconNotebook,{}),"My scratchpad"]})})]}),(0,jsx_runtime.jsxs)(DropdownMenu.Qk,{children:[(0,jsx_runtime.jsx)(DropdownMenu.VD,{}),!notebooksLoading||notebooksNotContainingResource.length||notebooksContainingResource.length?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[resource?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DropdownMenu.Ju,{children:"Continue in"}),notebooksContainingResource.length>0?notebooksContainingResource.map(notebook=>(0,jsx_runtime.jsx)(DropdownMenu.Xi,{onClick:()=>{openAndAddToNotebook(notebook.short_id,!0)},"data-attr":`${dataAttrKey}-continue-in-notebook-dropdown-menu-item`,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,tooltip:notebook.title,tooltipPlacement:"left",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconNotebook,{}),(0,jsx_runtime.jsx)("span",{className:"truncate",children:notebook.title})]})},notebook.short_id)):(0,jsx_runtime.jsx)(DropdownMenu.Xi,{children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,inert:!0,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconNotebook,{}),"No notebooks found"]})}),(0,jsx_runtime.jsx)(DropdownMenu.VD,{})]}):null,resource?(0,jsx_runtime.jsx)(DropdownMenu.Ju,{children:"Add to"}):null,notebooksNotContainingResource.length>0?notebooksNotContainingResource.map(notebook=>(0,jsx_runtime.jsx)(DropdownMenu.Xi,{onClick:()=>{openAndAddToNotebook(notebook.short_id,!1)},"data-attr":`${dataAttrKey}-add-to-notebook-dropdown-menu-item`,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,tooltip:notebook.title,tooltipPlacement:"left",children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconNotebook,{}),(0,jsx_runtime.jsx)("span",{className:"truncate",children:notebook.title})]})},notebook.short_id)):(0,jsx_runtime.jsx)(DropdownMenu.Xi,{children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,inert:!0,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconNotebook,{}),"No notebooks found"]})})]}):(0,jsx_runtime.jsx)("div",{className:"px-2 py-1 flex flex-row items-center gap-x-1",children:notebooksLoading?"Loading...":searchQuery.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"No matching notebooks"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"You have no notebooks"})})]})]})}var schema_general=__webpack_require__("../../frontend/src/queries/schema/schema-general.ts");function SceneAddToDropdownMenu(_ref){let{notebook,dashboard,shortId,dataAttrKey,disabledReasons}=_ref;return(0,jsx_runtime.jsxs)(DropdownMenu.h_,{children:[(0,jsx_runtime.jsx)(DropdownMenu.$F,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,"data-attr":`${dataAttrKey}-add-to-dropdown-menu`,disabledReasons:disabledReasons,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconPlus,{}),"Add to...",(0,jsx_runtime.jsx)(DropdownMenu.Ac,{})]})}),(0,jsx_runtime.jsxs)(DropdownMenu.AW,{align:"start",matchTriggerWidth:!0,children:[(0,jsx_runtime.jsx)(DropdownMenu.Ph,{children:notebook&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DropdownMenu.kt,{asChild:!0,children:(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{menuItem:!0,"data-attr":`${dataAttrKey}-add-to-notebook-dropdown-menu`,children:["Notebook",(0,jsx_runtime.jsx)(DropdownMenu.Ac,{intent:"sub"})]})}),(0,jsx_runtime.jsx)(DropdownMenu.TG,{children:(0,jsx_runtime.jsx)(SceneNotebookMenuItems,{notebookSelectButtonProps:{resource:{type:notebooks_types.C.Query,attrs:{query:{kind:schema_general.OH.SavedInsightNode,shortId:shortId}}}},dataAttrKey:dataAttrKey})})]})}),dashboard&&(0,jsx_runtime.jsx)(DropdownMenu.Xi,{children:(0,jsx_runtime.jsx)(ButtonPrimitives.hL,{menuItem:!0,onClick:()=>{dashboard.onClick?.()},"data-attr":`${dataAttrKey}-add-to-dashboard-dropdown-menu`,children:"Dashboard"})})]})]})}},"../../frontend/src/scenes/cohorts/Cohort.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Cohort:()=>Cohort,scene:()=>scene});var src=__webpack_require__("../../frontend/@posthog/lemon-ui/src/index.ts"),index_esm=__webpack_require__("../../node_modules/.pnpm/kea@3.1.7_react@18.2.0/node_modules/kea/lib/index.esm.js"),lib=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.7_react@18.2.0_/node_modules/kea-forms/lib/index.js"),kea_router_lib=__webpack_require__("../../node_modules/.pnpm/kea-router@3.4.1_kea@3.1.7_react@18.2.0_/node_modules/kea-router/lib/index.js"),NotFound=__webpack_require__("../../frontend/src/lib/components/NotFound/index.tsx"),PageHeader=__webpack_require__("../../frontend/src/lib/components/PageHeader.tsx"),TZLabel=__webpack_require__("../../frontend/src/lib/components/TZLabel/index.tsx"),constants=__webpack_require__("../../frontend/src/lib/constants.tsx"),icons=__webpack_require__("../../frontend/src/lib/lemon-ui/icons/index.ts"),LemonButton=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/index.ts"),More=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonButton/More.tsx"),LemonField=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonField/index.ts"),LemonInput=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonInput/LemonInput.tsx"),LemonLabel=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonLabel/LemonLabel.tsx"),LemonSelect=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonSelect/index.ts"),LemonTextArea=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonTextArea/LemonTextArea.tsx"),Spinner=__webpack_require__("../../frontend/src/lib/lemon-ui/Spinner/Spinner.tsx"),utils=__webpack_require__("../../frontend/src/lib/utils.tsx"),cohortEditLogic=__webpack_require__("../../frontend/src/scenes/cohorts/cohortEditLogic.ts"),injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@2.0.0_webpack@5.88.2/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),CohortCriteriaGroups=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss"),CohortCriteriaGroups_default=__webpack_require__.n(CohortCriteriaGroups),options={};options.insert="head",options.singleton=!1,injectStylesIntoStyleTag_default()(CohortCriteriaGroups_default(),options),CohortCriteriaGroups_default().locals;var posthog_icons_es=__webpack_require__("../../node_modules/.pnpm/@posthog+icons@0.27.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/@posthog/icons/dist/posthog-icons.es.js"),clsx_m=__webpack_require__("../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),components=__webpack_require__("../../node_modules/.pnpm/kea-forms@3.2.0_kea@3.1.7_react@18.2.0_/node_modules/kea-forms/lib/components.js"),LemonBanner=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonBanner/index.ts"),LemonDivider=__webpack_require__("../../frontend/src/lib/lemon-ui/LemonDivider/index.ts"),Lettermark=__webpack_require__("../../frontend/src/lib/lemon-ui/Lettermark/index.ts"),CohortCriteriaRowBuilder=__webpack_require__("../../frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaRowBuilder.tsx"),cohortUtils=__webpack_require__("../../frontend/src/scenes/cohorts/cohortUtils.tsx"),AndOrFilterSelect=__webpack_require__("../../frontend/src/queries/nodes/InsightViz/PropertyGroupFilters/AndOrFilterSelect.tsx"),jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function CohortCriteriaGroups_CohortCriteriaGroups(logicProps){let logic=(0,cohortEditLogic.B)(logicProps),{cohort}=(0,index_esm.useValues)(logic),{setInnerGroupType,duplicateFilter,removeFilter,addFilter}=(0,index_esm.useActions)(logic);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[cohort.filters.properties.values.map((group,groupIndex)=>{var _group$sort_key;return(0,cohortUtils.tz)(group)?(0,jsx_runtime.jsxs)(lib.Group,{name:["filters","properties","values",groupIndex],children:[0!==groupIndex&&(0,jsx_runtime.jsx)("div",{className:"CohortCriteriaGroups__matching-group__logical-divider",children:cohort.filters.properties.type}),(0,jsx_runtime.jsx)(components.Field,{name:"id",template:_ref=>{let{error,kids}=_ref;return(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.default)("CohortCriteriaGroups__matching-group",error&&"CohortCriteriaGroups__matching-group--error"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-nowrap items-center px-4",children:[(0,jsx_runtime.jsx)(Lettermark.B,{name:utils.bH[groupIndex],color:Lettermark.w.Gray}),(0,jsx_runtime.jsx)(AndOrFilterSelect.n,{prefix:"Match persons against",suffix:["criterion","criteria"],onChange:value=>setInnerGroupType(value,groupIndex),value:group.type}),(0,jsx_runtime.jsx)("div",{className:"flex-1 min-w-[0.5rem]"}),(0,jsx_runtime.jsx)(LemonButton.J,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconCopy,{}),onClick:()=>duplicateFilter(groupIndex)}),cohort.filters.properties.values.length>1&&(0,jsx_runtime.jsx)(LemonButton.J,{icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),onClick:()=>removeFilter(groupIndex)})]}),(0,jsx_runtime.jsx)(LemonDivider.p,{className:"my-4"}),error&&(0,jsx_runtime.jsx)(LemonBanner.V,{className:"m-2",type:"error",children:error}),kids]})},children:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:group.values.map((criteria,criteriaIndex)=>{var _criteria$sort_key;return(0,cohortUtils.tz)(criteria)?null:(0,jsx_runtime.jsxs)(lib.Group,{name:["values",criteriaIndex],children:[(0,jsx_runtime.jsx)(CohortCriteriaRowBuilder.t,{id:logicProps.id,groupIndex:groupIndex,index:criteriaIndex,logicalOperator:group.type,criteria:criteria,type:(0,cohortUtils.et)(criteria),hideDeleteIcon:group.values.length<=1}),criteriaIndex===group.values.length-1&&(0,jsx_runtime.jsx)("div",{className:"m-3",children:(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cohort-add-filter-group-criteria",type:"secondary",onClick:()=>addFilter(groupIndex),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),children:"Add criteria"})})]},null!==(_criteria$sort_key=criteria.sort_key)&&void 0!==_criteria$sort_key?_criteria$sort_key:criteriaIndex)})})})]},null!==(_group$sort_key=group.sort_key)&&void 0!==_group$sort_key?_group$sort_key:groupIndex):null}),(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cohort-add-filter-group",className:"mb-4 mt-4",type:"secondary",onClick:()=>addFilter(),icon:(0,jsx_runtime.jsx)(posthog_icons_es.IconPlusSmall,{}),fullWidth:!0,children:"Add criteria group"})]})}var CohortFilters_constants=__webpack_require__("../../frontend/src/scenes/cohorts/CohortFilters/constants.tsx"),NotebookSelectButton=__webpack_require__("../../frontend/src/scenes/notebooks/NotebookSelectButton/NotebookSelectButton.tsx"),types=__webpack_require__("../../frontend/src/scenes/notebooks/types.ts"),urls=__webpack_require__("../../frontend/src/scenes/urls.ts"),SceneLayout=__webpack_require__("../../frontend/src/layout/scenes/SceneLayout.tsx"),SceneAddToDropdownMenu=__webpack_require__("../../frontend/src/lib/components/Scenes/InsightOrDashboard/SceneAddToDropdownMenu.tsx"),SceneFile=__webpack_require__("../../frontend/src/lib/components/Scenes/SceneFile.tsx"),featureFlagLogic=__webpack_require__("../../frontend/src/lib/logic/featureFlagLogic.ts"),Query=__webpack_require__("../../frontend/src/queries/Query/Query.tsx"),ButtonPrimitives=__webpack_require__("../../frontend/src/lib/ui/Button/ButtonPrimitives.tsx"),SceneContent=__webpack_require__("../../frontend/src/layout/scenes/SceneContent.tsx"),css_classes=__webpack_require__("../../frontend/src/lib/utils/css-classes.ts"),WrappingLoadingSkeleton=__webpack_require__("../../frontend/src/lib/ui/WrappingLoadingSkeleton/WrappingLoadingSkeleton.tsx");let RESOURCE_TYPE="cohort";function CohortEdit(_ref){var _cohort$is_calculatin,_cohort$is_calculatin2;let{id}=_ref,logicProps={id},logic=(0,cohortEditLogic.B)(logicProps),{deleteCohort,setOuterGroupsType,setQuery,duplicateCohort,setCohortValue}=(0,index_esm.useActions)(logic),{cohort,cohortLoading,cohortMissing,query,duplicatedCohortLoading}=(0,index_esm.useValues)(logic),isNewCohort="new"===cohort.id||void 0===cohort.id,{featureFlags}=(0,index_esm.useValues)(featureFlagLogic.featureFlagLogic),newSceneLayout=featureFlags[constants.y8.NEW_SCENE_LAYOUT],dataNodeLogicKey=(0,cohortUtils.wL)(cohort.id);return cohortMissing?(0,jsx_runtime.jsx)(NotFound.T,{object:"cohort"}):cohortLoading&&!newSceneLayout?(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-2/5"}),(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-full"}),(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-full"}),(0,jsx_runtime.jsx)(src.yW,{active:!0,className:"h-4 w-3/5"})]}):(0,jsx_runtime.jsxs)("div",{className:"cohort",children:[(0,jsx_runtime.jsx)(PageHeader.m,{buttons:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[isNewCohort?(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"cancel-cohort",type:"secondary",onClick:()=>{kea_router_lib.router.actions.push(urls.j.cohorts())},disabled:cohortLoading,children:"Cancel"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:!newSceneLayout&&(0,jsx_runtime.jsx)(More.T,{overlay:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!cohort.is_static&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LemonButton.J,{onClick:()=>duplicateCohort(!1),fullWidth:!0,disabledReason:cohort.is_calculating?"Cohort is still calculating":void 0,loading:duplicatedCohortLoading,children:"Duplicate as dynamic cohort"}),(0,jsx_runtime.jsx)(LemonButton.J,{onClick:()=>duplicateCohort(!0),fullWidth:!0,disabledReason:cohort.is_calculating?"Cohort is still calculating":void 0,loading:duplicatedCohortLoading,children:"Duplicate as static cohort"}),(0,jsx_runtime.jsx)(src.p2,{})]}),(0,jsx_runtime.jsx)(LemonButton.J,{"data-attr":"delete-cohort",fullWidth:!0,status:"danger",onClick:deleteCohort,children:"Delete cohort"})]})})}),!isNewCohort&&!newSceneLayout&&(0,jsx_runtime.jsx)(NotebookSelectButton.R,{type:"secondary",resource:{type:types.C.Cohort,attrs:{id}}}),(0,jsx_runtime.jsx)(LemonButton.J,{type:"primary","data-attr":"save-cohort",htmlType:"submit",loading:cohortLoading||cohort.is_calculating,form:"cohort",children:"Save"})]})}),(0,jsx_runtime.jsxs)(SceneLayout.kI,{children:[(0,jsx_runtime.jsx)(SceneLayout.be,{children:(0,jsx_runtime.jsx)(SceneFile.z,{dataAttrKey:RESOURCE_TYPE})}),(0,jsx_runtime.jsx)(SceneLayout.bI,{}),(0,jsx_runtime.jsxs)(SceneLayout.kf,{children:[(0,jsx_runtime.jsx)(SceneAddToDropdownMenu.q,{notebook:!0,dataAttrKey:RESOURCE_TYPE,disabledReasons:{"Save the cohort first":isNewCohort}}),(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{onClick:()=>duplicateCohort(!1),disabledReasons:{"Save the cohort first":isNewCohort,"Cohort must be static to duplicate":!cohort.is_static,"Cohort is still calculating":null!==(_cohort$is_calculatin=cohort.is_calculating)&&void 0!==_cohort$is_calculatin&&_cohort$is_calculatin},menuItem:!0,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconCopy,{})," Duplicate as dynamic cohort"]}),(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{onClick:()=>duplicateCohort(!0),disabledReasons:{"Save the cohort first":isNewCohort,"Cohort must be static to duplicate":!cohort.is_static,"Cohort is still calculating":null!==(_cohort$is_calculatin2=cohort.is_calculating)&&void 0!==_cohort$is_calculatin2&&_cohort$is_calculatin2},menuItem:!0,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconCopy,{})," Duplicate as static cohort"]}),(0,jsx_runtime.jsx)(SceneLayout.bI,{}),(0,jsx_runtime.jsxs)(ButtonPrimitives.hL,{onClick:()=>{deleteCohort()},variant:"danger",menuItem:!0,"data-attr":`${RESOURCE_TYPE}-delete`,children:[(0,jsx_runtime.jsx)(posthog_icons_es.IconTrash,{}),"Delete"]})]})]}),(0,jsx_runtime.jsx)(lib.Form,{id:"cohort",logic:cohortEditLogic.B,props:logicProps,formKey:"cohort",enableFormOnSubmit:!0,children:(0,jsx_runtime.jsxs)(SceneContent._W,{children:[(0,jsx_runtime.jsx)(SceneContent.sG,{name:cohort.name,description:cohort.description,resourceType:{to:urls.j.cohorts(),type:RESOURCE_TYPE,typePlural:"cohorts",tooltip:"Go to all cohorts"},isLoading:cohortLoading,onNameBlur:value=>{setCohortValue("name",value)},onDescriptionBlur:value=>{setCohortValue("description",value)},docsURL:"https://posthog.com/docs/data/cohorts"}),(0,jsx_runtime.jsx)(SceneContent.Vl,{}),(0,jsx_runtime.jsxs)(SceneContent.SN,{title:"Type",description:"Static cohorts are created once and never updated, while dynamic cohorts are recalculated based on the latest data.",className:(0,css_classes.cn)("max-w-200",{"deprecated-space-y-2 ":!newSceneLayout,"flex flex-col gap-y-2":newSceneLayout}),hideTitleAndDescription:!0,children:[(0,jsx_runtime.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[!newSceneLayout&&(0,jsx_runtime.jsx)("div",{className:"flex-1",children:(0,jsx_runtime.jsx)(LemonField.D,{name:"name",label:"Name",children:(0,jsx_runtime.jsx)(LemonInput.D,{"data-attr":"cohort-name"})})}),(0,jsx_runtime.jsxs)("div",{className:(0,css_classes.cn)("flex-1",newSceneLayout&&"flex flex-col gap-y-4"),children:[(0,jsx_runtime.jsx)(LemonField.D,{name:"is_static",label:newSceneLayout?null:"Type",children:_ref2=>{let{value,onChange}=_ref2;return(0,jsx_runtime.jsx)(LemonSelect.Yv,{disabledReason:isNewCohort?null:"Create a new cohort to use a different type of cohort.",options:CohortFilters_constants.GK,value:value?constants.ow.Static:constants.ow.Dynamic,onChange:cohortType=>{onChange(cohortType===constants.ow.Static)},fullWidth:!0,"data-attr":"cohort-type"})}}),newSceneLayout&&!isNewCohort&&!cohort?.is_static&&(0,jsx_runtime.jsxs)("div",{className:"max-w-70 w-fit",children:[(0,jsx_runtime.jsxs)("p",{className:"flex items-center gap-x-1 my-0",children:[(0,jsx_runtime.jsx)("strong",{children:"Last calculated:"}),cohort.is_calculating?(0,jsx_runtime.jsx)(WrappingLoadingSkeleton.x,{children:"In progress..."}):cohort.last_calculation?(0,jsx_runtime.jsx)(TZLabel.w,{time:cohort.last_calculation}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Not yet calculated"})]}),cohort.errors_calculating?(0,jsx_runtime.jsx)(src.u,{title:"The last attempted calculation failed. This means your current cohort data can be stale. This doesn't affect feature flag evaluation.",children:(0,jsx_runtime.jsx)("div",{className:"text-danger",children:(0,jsx_runtime.jsx)(icons.b8,{className:"text-danger text-xl shrink-0"})})}):null]})]}),!newSceneLayout&&!isNewCohort&&!cohort?.is_static&&(0,jsx_runtime.jsx)("div",{className:"max-w-70 w-fit",children:(0,jsx_runtime.jsxs)("div",{className:"flex gap-1 flex-col",children:[(0,jsx_runtime.jsx)(LemonLabel.H,{children:"Last calculated"}),cohort.is_calculating?(0,jsx_runtime.jsx)("div",{className:"text-s",children:"In progress..."}):cohort.last_calculation?(0,jsx_runtime.jsxs)("div",{className:"flex flex-1 flex-row gap-1",children:[(0,jsx_runtime.jsx)(TZLabel.w,{time:cohort.last_calculation}),cohort.errors_calculating?(0,jsx_runtime.jsx)(src.u,{title:"The last attempted calculation failed. This means your current cohort data can be stale. This doesn't affect feature flag evaluation.",children:(0,jsx_runtime.jsx)("div",{className:"text-danger",children:(0,jsx_runtime.jsx)(icons.b8,{className:"text-danger text-xl shrink-0"})})}):null]}):(0,jsx_runtime.jsx)("div",{className:"text-s",children:"Not yet calculated"}),(0,jsx_runtime.jsx)("div",{className:"text-secondary text-xs",children:"Cohorts are recalculated every 24 hours"})]})})]}),!newSceneLayout&&(0,jsx_runtime.jsx)("div",{className:"ph-ignore-input",children:(0,jsx_runtime.jsx)(LemonField.D,{name:"description",label:"Description","data-attr":"cohort-description",children:(0,jsx_runtime.jsx)(LemonTextArea._,{})})})]}),cohort.is_static?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneContent.Vl,{}),(0,jsx_runtime.jsx)(SceneContent.SN,{title:isNewCohort?"Upload users":"Add users",description:"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user's distinct ID. The very first row (the header) will be skipped during import.",className:(0,css_classes.cn)("ph-ignore-input",!newSceneLayout&&"mt-4"),children:(0,jsx_runtime.jsx)(LemonField.D,{name:"csv",label:newSceneLayout?null:isNewCohort?"Upload users":"Add users","data-attr":"cohort-csv",children:_ref3=>{var _cohort$csv$name;let{onChange}=_ref3;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!newSceneLayout&&(0,jsx_runtime.jsx)("span",{children:"Upload a CSV file to add users to your cohort. The CSV file only requires a single column with the user's distinct ID. The very first row (the header) will be skipped during import."}),(0,jsx_runtime.jsx)(src.mH,{accept:".csv",multiple:!1,value:cohort.csv?[cohort.csv]:[],onChange:files=>onChange(files[0]),showUploadedFiles:!1,callToAction:(0,jsx_runtime.jsx)("div",{className:(0,css_classes.cn)("flex flex-col items-center justify-center flex-1 cohort-csv-dragger text-text-3000 deprecated-space-y-1",newSceneLayout&&"text-primary mt-0 bg-transparent border border-dashed border-primary hover:border-secondary p-8",newSceneLayout&&cohort.csv?.name&&"border-success"),children:cohort.csv?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(icons.bn,{style:{fontSize:"3rem",color:newSceneLayout?"var(--color-text-primary)":"var(--color-text-secondary)"}}),(0,jsx_runtime.jsx)("div",{children:null!==(_cohort$csv$name=cohort.csv?.name)&&void 0!==_cohort$csv$name?_cohort$csv$name:"File chosen"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(icons.bn,{style:{fontSize:"3rem",color:newSceneLayout?"var(--color-text-primary)":"var(--color-text-secondary)"}}),(0,jsx_runtime.jsx)("div",{children:"Drag a file here or click to browse for a file"}),newSceneLayout&&(0,jsx_runtime.jsx)("div",{className:"text-secondary text-xs",children:"Accepts .csv files only"})]})})})]})}})})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[newSceneLayout?(0,jsx_runtime.jsx)(SceneContent.Vl,{}):(0,jsx_runtime.jsx)(src.p2,{}),!isNewCohort&&cohort.experiment_set&&cohort.experiment_set.length>0&&(0,jsx_runtime.jsxs)(src.Vp,{type:"info",children:["This cohort manages exposure for an experiment. Editing this cohort may change experiment metrics. If unsure,"," ",(0,jsx_runtime.jsx)(src.rU,{to:urls.j.experiment(cohort.experiment_set[0]),children:"check the experiment details."})]}),(0,jsx_runtime.jsxs)(SceneContent.SN,{title:"Matching criteria",description:"Actors who match the following criteria will be part of the cohort. Continuously updated automatically.",className:(0,css_classes.cn)("flex items-start justify-between"),hideTitleAndDescription:!0,children:[!newSceneLayout&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-col",children:[(0,jsx_runtime.jsx)(LemonLabel.H,{htmlFor:"groups",children:"Matching criteria"}),(0,jsx_runtime.jsx)("span",{children:"Actors who match the following criteria will be part of the cohort. Continuously updated automatically."})]}),(0,jsx_runtime.jsx)(AndOrFilterSelect.n,{value:cohort.filters.properties.type,onChange:value=>{setOuterGroupsType(value)},topLevelFilter:!0,suffix:["criterion","criteria"]}),(0,jsx_runtime.jsx)("div",{className:(0,css_classes.cn)("w-full",newSceneLayout&&"[&>div]:my-0 [&>div]:w-full"),children:(0,jsx_runtime.jsx)(CohortCriteriaGroups_CohortCriteriaGroups,{id:logicProps.id})})]})]}),"number"==typeof cohort.id&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SceneContent.Vl,{}),(0,jsx_runtime.jsxs)(SceneContent.SN,{title:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Persons in this cohort",(0,jsx_runtime.jsx)("span",{className:"text-secondary ml-2",children:!cohort.is_calculating&&void 0!==cohort.count&&`(${cohort.count})`})]}),description:"Persons who match the following criteria will be part of the cohort.",hideTitleAndDescription:!0,children:[!newSceneLayout&&(0,jsx_runtime.jsx)(src.p2,{}),(0,jsx_runtime.jsxs)("div",{children:[!newSceneLayout&&(0,jsx_runtime.jsxs)("h3",{className:"l3 mb-4",children:["Persons in this cohort",(0,jsx_runtime.jsx)("span",{className:"text-secondary ml-2",children:!cohort.is_calculating&&void 0!==cohort.count&&`(${cohort.count} matching ${(0,utils.Zi)(cohort.count,"person","persons",!1)})`})]}),cohort.is_calculating?(0,jsx_runtime.jsxs)("div",{className:"cohort-recalculating flex items-center",children:[(0,jsx_runtime.jsx)(Spinner.$,{className:"mr-4"}),cohort.is_static?"We're creating this cohort. This could take up to a couple of minutes.":"We're recalculating who belongs to this cohort. This could take up to a couple of minutes."]}):(0,jsx_runtime.jsx)(Query.A,{query:query,setQuery:setQuery,context:{refresh:"force_blocking",fileNameForExport:cohort.name,dataNodeLogicKey:dataNodeLogicKey}})]})]})]})]})})]})}var sceneTypes=__webpack_require__("../../frontend/src/scenes/sceneTypes.ts"),cohortsModel=__webpack_require__("../../frontend/src/models/cohortsModel.ts");let scene={component:Cohort,logic:(0,index_esm.kea)([(0,index_esm.props)({}),(0,index_esm.key)(props=>props.id||"new"),(0,index_esm.path)(["scenes","cohorts","cohortLogic"]),(0,index_esm.selectors)({breadcrumbs:[()=>[cohortsModel.Qo.selectors.cohortsById,(_,props)=>props.id],(cohortsById,cohortId)=>[{key:"cohorts",name:"Cohorts",path:urls.j.cohorts()},{key:[sceneTypes.x.Cohort,cohortId||"loading"],name:cohortId&&"new"!==cohortId&&cohortsById[cohortId]?.name||"Untitled"}]],projectTreeRef:[()=>[(_,props)=>props.id],id=>({type:"cohort",ref:"new"===id?null:String(id)})]})]),paramsToProps:_ref=>{let{params:{id}}=_ref;return{id:id&&"new"!==id?parseInt(id):"new"}}};function Cohort(){let{id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,jsx_runtime.jsx)(CohortEdit,{id:id})}},"../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/cjs.js!../../node_modules/.pnpm/postcss-loader@4.3.0_postcss@8.5.6_webpack@5.88.2/node_modules/postcss-loader/dist/cjs.js!../../node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0_webpack@5.88.2/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../../frontend/src/scenes/cohorts/CohortFilters/CohortCriteriaGroups.scss":(module,exports,__webpack_require__)=>{(exports=__webpack_require__("../../node_modules/.pnpm/css-loader@3.6.0_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.id,".CohortCriteriaGroups__matching-group{background-color:var(--color-bg-surface-primary);border:1px solid var(--color-border-primary);border-radius:var(--radius);margin:.5rem 0;padding-top:1rem;width:100%}.CohortCriteriaGroups__matching-group.CohortCriteriaGroups__matching-group--error{border:1px solid var(--danger)}.CohortCriteriaGroups__matching-group__logical-divider{color:var(--primary-alt);font-size:12px;font-weight:600;padding:0 1.5rem;text-transform:uppercase}",""]),module.exports=exports}}]);