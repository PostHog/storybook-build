"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[2991],{"./frontend/src/scenes/pipeline/pipelineLogic.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$Y:()=>humanFriendlyTabName,B2:()=>pipelineLogic,v9:()=>singularName});var kea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea@3.1.5_react@18.2.0/node_modules/kea/lib/index.esm.js"),kea_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/sceneTypes.ts"),scenes_urls__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/urls.ts"),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/types.ts");const singularName=tab=>{switch(tab){case _types__WEBPACK_IMPORTED_MODULE_4__.OJ.Filters:return"filter";case _types__WEBPACK_IMPORTED_MODULE_4__.OJ.Transformations:return"transformation";case _types__WEBPACK_IMPORTED_MODULE_4__.OJ.Destinations:return"destination"}},humanFriendlyTabName=tab=>{switch(tab){case _types__WEBPACK_IMPORTED_MODULE_4__.OJ.Filters:return"Filters";case _types__WEBPACK_IMPORTED_MODULE_4__.OJ.Transformations:return"Transformations";case _types__WEBPACK_IMPORTED_MODULE_4__.OJ.Destinations:return"Destinations"}},pipelineLogic=(0,kea__WEBPACK_IMPORTED_MODULE_0__.kea)([(0,kea__WEBPACK_IMPORTED_MODULE_0__.path)(["scenes","pipeline","pipelineLogic"]),(0,kea__WEBPACK_IMPORTED_MODULE_0__.actions)({setCurrentTab:function(){return{tab:arguments.length>0&&void 0!==arguments[0]?arguments[0]:_types__WEBPACK_IMPORTED_MODULE_4__.OJ.Destinations}}}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.reducers)({currentTab:[_types__WEBPACK_IMPORTED_MODULE_4__.OJ.Destinations,{setCurrentTab:(_,_ref)=>{let{tab}=_ref;return tab}}]}),(0,kea__WEBPACK_IMPORTED_MODULE_0__.selectors)((()=>({breadcrumbs:[s=>[s.currentTab],tab=>[{key:scenes_sceneTypes__WEBPACK_IMPORTED_MODULE_2__.x.Pipeline,name:"Data pipeline"},{key:tab,name:humanFriendlyTabName(tab)}]]}))),(0,kea_router__WEBPACK_IMPORTED_MODULE_1__.actionToUrl)((_ref2=>{let{values}=_ref2;return{setCurrentTab:()=>[scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipeline(values.currentTab)]}})),(0,kea_router__WEBPACK_IMPORTED_MODULE_1__.urlToAction)((_ref3=>{let{actions,values}=_ref3;return{"/pipeline/:tab":_ref4=>{let{tab}=_ref4;tab!==values.currentTab&&actions.setCurrentTab(tab)}}}))]);try{singularName.displayName="singularName",singularName.__docgenInfo={description:"",displayName:"singularName",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/pipeline/pipelineLogic.tsx#singularName"]={docgenInfo:singularName.__docgenInfo,name:"singularName",path:"frontend/src/scenes/pipeline/pipelineLogic.tsx#singularName"})}catch(__react_docgen_typescript_loader_error){}try{humanFriendlyTabName.displayName="humanFriendlyTabName",humanFriendlyTabName.__docgenInfo={description:"",displayName:"humanFriendlyTabName",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/pipeline/pipelineLogic.tsx#humanFriendlyTabName"]={docgenInfo:humanFriendlyTabName.__docgenInfo,name:"humanFriendlyTabName",path:"frontend/src/scenes/pipeline/pipelineLogic.tsx#humanFriendlyTabName"})}catch(__react_docgen_typescript_loader_error){}},"./frontend/src/scenes/pipeline/Pipeline.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PipelineAppConfiguration:()=>PipelineAppConfiguration,PipelineAppLogs:()=>PipelineAppLogs,PipelineAppMetrics:()=>PipelineAppMetrics,PipelineFilteringPage:()=>PipelineFilteringPage,PipelineLandingPage:()=>PipelineLandingPage,PipelineTransformationsPage:()=>PipelineTransformationsPage,PipelineTransformationsPageEmpty:()=>PipelineTransformationsPageEmpty,default:()=>__WEBPACK_DEFAULT_EXPORT__});var kea_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.3_kea@3.1.5/node_modules/kea-router/lib/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_App__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./frontend/src/scenes/App.tsx"),scenes_urls__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./frontend/src/scenes/urls.ts"),_mocks_browser__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./frontend/src/mocks/browser.tsx"),_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./frontend/src/types.ts"),_pipelineLogic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./frontend/src/scenes/pipeline/pipelineLogic.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Scenes-App/Pipeline",decorators:[(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_4__.x8)({get:{"api/organizations/@current/pipeline_transformations/":{},"api/projects/:team_id/pipeline_transformations_configs/":{}}})],parameters:{layout:"fullscreen",options:{showPanel:!1},viewMode:"story"}};function PipelineLandingPage(){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipeline()),_pipelineLogic__WEBPACK_IMPORTED_MODULE_6__.B2.mount()}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}function PipelineFilteringPage(){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipeline(_types__WEBPACK_IMPORTED_MODULE_5__.OJ.Filters)),_pipelineLogic__WEBPACK_IMPORTED_MODULE_6__.B2.mount()}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}function PipelineTransformationsPageEmpty(){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipeline(_types__WEBPACK_IMPORTED_MODULE_5__.OJ.Transformations)),_pipelineLogic__WEBPACK_IMPORTED_MODULE_6__.B2.mount()}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}function PipelineTransformationsPage(){return(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_4__.ok)({get:{"api/organizations/@current/pipeline_transformations/":__webpack_require__("./frontend/src/scenes/pipeline/__mocks__/plugins.json"),"api/projects/:team_id/pipeline_transformations_configs/":__webpack_require__("./frontend/src/scenes/pipeline/__mocks__/transformationPluginConfigs.json")}}),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipeline(_types__WEBPACK_IMPORTED_MODULE_5__.OJ.Transformations)),_pipelineLogic__WEBPACK_IMPORTED_MODULE_6__.B2.mount()}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}function PipelineAppConfiguration(){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipelineApp(1,_types__WEBPACK_IMPORTED_MODULE_5__.YU.Configuration))}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}function PipelineAppMetrics(){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipelineApp(1,_types__WEBPACK_IMPORTED_MODULE_5__.YU.Metrics))}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}function PipelineAppLogs(){return(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_4__.ok)({get:{"api/projects/:team_id/plugin_configs/1/logs":__webpack_require__("./frontend/src/scenes/pipeline/__mocks__/pluginLogs.json")}}),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(scenes_urls__WEBPACK_IMPORTED_MODULE_3__.j.pipelineApp(1,_types__WEBPACK_IMPORTED_MODULE_5__.YU.Logs))}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}PipelineLandingPage.parameters={...PipelineLandingPage.parameters,docs:{...PipelineLandingPage.parameters?.docs,source:{originalSource:"function PipelineLandingPage(): JSX.Element {\n  // also Destinations page\n  useEffect(() => {\n    router.actions.push(urls.pipeline());\n    pipelineLogic.mount();\n  }, []);\n  return <App />;\n}",...PipelineLandingPage.parameters?.docs?.source}}},PipelineFilteringPage.parameters={...PipelineFilteringPage.parameters,docs:{...PipelineFilteringPage.parameters?.docs,source:{originalSource:"function PipelineFilteringPage(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.pipeline(PipelineTabs.Filters));\n    pipelineLogic.mount();\n  }, []);\n  return <App />;\n}",...PipelineFilteringPage.parameters?.docs?.source}}},PipelineTransformationsPageEmpty.parameters={...PipelineTransformationsPageEmpty.parameters,docs:{...PipelineTransformationsPageEmpty.parameters?.docs,source:{originalSource:"function PipelineTransformationsPageEmpty(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.pipeline(PipelineTabs.Transformations));\n    pipelineLogic.mount();\n  }, []);\n  return <App />;\n}",...PipelineTransformationsPageEmpty.parameters?.docs?.source}}},PipelineTransformationsPage.parameters={...PipelineTransformationsPage.parameters,docs:{...PipelineTransformationsPage.parameters?.docs,source:{originalSource:"function PipelineTransformationsPage(): JSX.Element {\n  useStorybookMocks({\n    get: {\n      'api/organizations/@current/pipeline_transformations/': require('./__mocks__/plugins.json'),\n      'api/projects/:team_id/pipeline_transformations_configs/': require('./__mocks__/transformationPluginConfigs.json')\n    }\n  });\n  useEffect(() => {\n    router.actions.push(urls.pipeline(PipelineTabs.Transformations));\n    pipelineLogic.mount();\n  }, []);\n  return <App />;\n}",...PipelineTransformationsPage.parameters?.docs?.source}}},PipelineAppConfiguration.parameters={...PipelineAppConfiguration.parameters,docs:{...PipelineAppConfiguration.parameters?.docs,source:{originalSource:"function PipelineAppConfiguration(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.pipelineApp(1, PipelineAppTabs.Configuration));\n  }, []);\n  return <App />;\n}",...PipelineAppConfiguration.parameters?.docs?.source}}},PipelineAppMetrics.parameters={...PipelineAppMetrics.parameters,docs:{...PipelineAppMetrics.parameters?.docs,source:{originalSource:"function PipelineAppMetrics(): JSX.Element {\n  useEffect(() => {\n    router.actions.push(urls.pipelineApp(1, PipelineAppTabs.Metrics));\n  }, []);\n  return <App />;\n}",...PipelineAppMetrics.parameters?.docs?.source}}},PipelineAppLogs.parameters={...PipelineAppLogs.parameters,docs:{...PipelineAppLogs.parameters?.docs,source:{originalSource:"function PipelineAppLogs(): JSX.Element {\n  useStorybookMocks({\n    get: {\n      'api/projects/:team_id/plugin_configs/1/logs': require('./__mocks__/pluginLogs.json')\n    }\n  });\n  useEffect(() => {\n    router.actions.push(urls.pipelineApp(1, PipelineAppTabs.Logs));\n  }, []);\n  return <App />;\n}",...PipelineAppLogs.parameters?.docs?.source}}}},"./frontend/src/scenes/pipeline/__mocks__/pluginLogs.json":module=>{module.exports=JSON.parse('{"count":2,"next":null,"previous":null,"results":[{"id":"018bb51f-0f9f-0000-34ae-d3aa1d9a5770","team_id":1,"plugin_id":1,"plugin_config_id":11,"timestamp":"2023-11-09T17:26:33.626000Z","source":"PLUGIN","type":"ERROR","message":"Error: Received an unexpected error from the endpoint API. Response 400: {\\"meta\\":{\\"errors\\":[\\"value for attribute \'$current_url\' cannot be longer than 1000 bytes\\"]}}\\n       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","instance_id":"12345678-1234-1234-1234-123456789012"},{"id":"018bb51e-262a-0000-eb34-39afd4691d56","team_id":1,"plugin_id":1,"plugin_config_id":11,"timestamp":"2023-11-09T17:25:33.790000Z","source":"PLUGIN","type":"INFO","message":"Successfully sent event to endpoint","instance_id":"12345678-1234-1234-1234-123456789012"}]}')},"./frontend/src/scenes/pipeline/__mocks__/plugins.json":module=>{module.exports=JSON.parse('{"count":3,"next":null,"previous":null,"results":[{"id":1,"plugin_type":"custom","name":"GeoIP","description":"Enrich PostHog events and persons with IP location data","url":"https://github.com/PostHog/posthog-plugin-geoip","icon":null,"config_schema":[],"tag":"2dd67e1dec9c8b5febd7a6d9235c51072950cd37","latest_tag":"2dd67e1dec9c8b5febd7a6d9235c51072950cd37","is_global":true,"organization_id":"12345678-abcd-1234-abcd-1234567890ab","organization_name":"PostHog","capabilities":{"jobs":[],"methods":["processEvent"],"scheduled_tasks":[]},"metrics":{},"public_jobs":{}},{"id":2,"plugin_type":"source","name":"URL Params Parser","description":"Plugin nr 2 description","url":null,"icon":null,"config_schema":[],"tag":null,"latest_tag":null,"is_global":false,"organization_id":"12345678-abcd-1234-abcd-1234567890ab","organization_name":"PostHog","capabilities":{"jobs":[],"methods":["processEvent"],"scheduled_tasks":[]},"metrics":{},"public_jobs":{}},{"id":3,"plugin_type":"custom","name":"Event Sequence Timer Plugin","description":"Time the time taken for a user to perform Event B after performing Event A.","url":"https://github.com/PostHog/event-sequence-timer-plugin","icon":null,"config_schema":[{"key":"eventsToTrack","hint":"**Format:**`(eventA,eventB),(eventC,eventD)` **Spaces are not allowed**","name":"List of events to track time differences on","type":"string","order":1,"default":"","required":true},{"key":"updateTimestamp","hint":"Selecting \'Yes\' will track _last touch_, while selecting \'No\' will track first touch.","name":"Update timestamp on every new first event?","type":"choice","order":2,"choices":["Yes","No"],"default":"Yes","required":false}],"tag":"de39aa9fbfc64405f13a7a8e3ff3b6962b774623","latest_tag":"de39aa9fbfc64405f13a7a8e3ff3b6962b774623","is_global":false,"organization_id":"12345678-abcd-1234-abcd-1234567890ab","organization_name":"PostHog","capabilities":{"jobs":[],"methods":["setupPlugin","processEvent"],"scheduled_tasks":[]},"metrics":{},"public_jobs":{}}]}')},"./frontend/src/scenes/pipeline/__mocks__/transformationPluginConfigs.json":module=>{module.exports=JSON.parse('{"count":5,"next":null,"previous":null,"results":[{"id":11,"plugin":1,"enabled":true,"order":4,"config":{},"error":null,"team_id":1,"plugin_info":null,"delivery_rate_24h":1,"created_at":"2021-04-07T13:37:36.250380Z","updated_at":"2023-02-15T17:40:45.167743Z","name":null,"description":null,"deleted":false},{"id":12,"plugin":2,"enabled":true,"order":2,"config":{},"error":null,"team_id":1,"plugin_info":null,"delivery_rate_24h":1,"created_at":"2021-04-07T13:37:36.250380Z","updated_at":"2023-02-15T17:40:45.167743Z","name":"custom name","description":"custom description","deleted":false},{"id":13,"plugin":2,"enabled":true,"order":3,"config":{},"error":{"name":"Error","time":"2023-11-09T13:33:31.850Z","event":{"uuid":"uuid"},"stack":"Error: Received an unexpected error from the Customer.io API. Response 400: {\\"meta\\":{\\"errors\\":[\\"value for attribute \'$current_url\' cannot be longer than 1000 bytes\\"]}}\\n    at callCustomerIoApi (vm.js:59:11)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","message":"Received an unexpected error from the Customer.io API. Response 400: {\\"meta\\":{\\"errors\\":[\\"value for attribute \'$current_url\' cannot be longer than 1000 bytes\\"]}}"},"team_id":1,"plugin_info":null,"delivery_rate_24h":1,"created_at":"2021-04-07T13:37:36.250380Z","updated_at":"2023-02-15T17:40:45.167743Z","name":"another of plugin 2","description":"has an error","deleted":false},{"id":14,"plugin":3,"enabled":false,"order":1,"config":{},"error":null,"team_id":1,"plugin_info":null,"delivery_rate_24h":1,"created_at":"2021-04-07T13:37:36.250380Z","updated_at":"2023-02-15T17:40:45.167743Z","name":"disabled","description":null,"deleted":false},{"id":15,"plugin":2,"enabled":false,"order":2,"config":{},"error":null,"team_id":1,"plugin_info":null,"delivery_rate_24h":1,"created_at":"2022-07-05T11:18:22.059158Z","updated_at":"2023-01-03T17:37:41.553035Z","name":"another disabled one","description":null,"deleted":false}]}')}}]);