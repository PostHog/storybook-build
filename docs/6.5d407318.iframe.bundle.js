(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./frontend/src/scenes/insights/InsightContainer.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return InsightContainer}));var card=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/card/index.js"),row=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/row/index.js"),col=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/col/index.js"),ChartFilter=__webpack_require__("./frontend/src/lib/components/ChartFilter/index.ts"),CompareFilter=__webpack_require__("./frontend/src/lib/components/CompareFilter/CompareFilter.tsx"),IntervalFilter=__webpack_require__("./frontend/src/lib/components/IntervalFilter/index.ts"),SmoothingFilter=__webpack_require__("./frontend/src/lib/components/SmoothingFilter/SmoothingFilter.tsx"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),types=__webpack_require__("./frontend/src/types.ts"),InsightDateFilter=__webpack_require__("./frontend/src/scenes/insights/filters/InsightDateFilter/index.ts"),FunnelDisplayLayoutPicker=__webpack_require__("./frontend/src/scenes/insights/views/Funnels/FunnelDisplayLayoutPicker.tsx"),PathStepPicker=__webpack_require__("./frontend/src/scenes/insights/views/Paths/PathStepPicker.tsx"),RetentionDatePicker=__webpack_require__("./frontend/src/scenes/insights/RetentionDatePicker.tsx"),RetentionReferencePicker=__webpack_require__("./frontend/src/scenes/insights/filters/RetentionReferencePicker.tsx"),index_esm=__webpack_require__("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),funnelLogic=__webpack_require__("./frontend/src/scenes/funnels/funnelLogic.ts"),es_select=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/select/index.js"),input_number=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/input-number/index.js"),BarChartOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/BarChartOutlined.js"),clsx_m=__webpack_require__("./node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),utils=__webpack_require__("./frontend/src/lib/utils.tsx"),insightLogic=__webpack_require__("./frontend/src/scenes/insights/insightLogic.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");const NUMBER_PRESETS=new Set([5,15,25,50,90]),options=[{label:"Auto bins",value:constants.b,display:!0},...Array.from(Array.from(Array(91).keys()),(v=>({label:`${v} bins`,value:v,display:NUMBER_PRESETS.has(v)}))),{label:"Custom",value:"custom",display:!0}];function FunnelBinsPicker(_ref){let{disabled:disabled}=_ref;const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{filters:filters,numericBinCount:numericBinCount}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{setBinCount:setBinCount}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps));return Object(jsx_runtime.jsx)(es_select.a,{id:"funnel-bin-filter",dropdownClassName:"funnel-bin-filter-dropdown","data-attr":"funnel-bin-filter",defaultValue:constants.b,value:filters.bin_count||constants.b,onSelect:count=>setBinCount(count),dropdownRender:menu=>Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[menu,Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(input_number.a,{className:"funnel-bins-custom-picker",size:"middle",min:1,max:90,value:numericBinCount,onChange:count=>{const parsedCount="string"==typeof count?parseInt(count):count;parsedCount&&setBinCount(parsedCount)}})," ","bins"]})]}),listHeight:440,bordered:!1,dropdownMatchSelectWidth:!1,dropdownAlign:utils.a.bottomRight,optionLabelProp:"label",disabled:disabled,children:Object(jsx_runtime.jsx)(es_select.a.OptGroup,{label:"Bin Count",children:options.map((option=>"custom"===option.value?null:Object(jsx_runtime.jsx)(es_select.a.Option,{className:Object(clsx_m.default)({hidden:!option.display}),value:option.value,label:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(BarChartOutlined.a,{})," ",option.label]}),children:option.label},option.value)))})})}try{FunnelBinsPicker.displayName="FunnelBinsPicker",FunnelBinsPicker.__docgenInfo={description:"",displayName:"FunnelBinsPicker",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"]={docgenInfo:FunnelBinsPicker.__docgenInfo,name:"FunnelBinsPicker",path:"frontend/src/scenes/insights/views/Funnels/FunnelBinsPicker.tsx#FunnelBinsPicker"})}catch(__react_docgen_typescript_loader_error){}var featureFlagLogic=__webpack_require__("./frontend/src/lib/logic/featureFlagLogic.ts"),UnitPicker=__webpack_require__("./frontend/src/lib/components/UnitPicker/UnitPicker.tsx"),sharedUtils=__webpack_require__("./frontend/src/scenes/insights/sharedUtils.ts");const showDateFilter={[`${types.F.TRENDS}`]:!0,[`${types.F.STICKINESS}`]:!0,[`${types.F.LIFECYCLE}`]:!0,[`${types.F.FUNNELS}`]:!0,[`${types.F.RETENTION}`]:!1,[`${types.F.PATHS}`]:!0},showCompareFilter=function(filters){return Object(sharedUtils.j)(filters)?!Object(sharedUtils.b)(filters):!!Object(sharedUtils.i)(filters)},isFunnelEmpty=filters=>{var _filters$actions,_filters$events;return!filters.actions&&!filters.events||0===(null===(_filters$actions=filters.actions)||void 0===_filters$actions?void 0:_filters$actions.length)&&0===(null===(_filters$events=filters.events)||void 0===_filters$events?void 0:_filters$events.length)};function ConfigFilter(props){return Object(jsx_runtime.jsx)("span",{className:"space-x-2 flex items-center text-sm",children:props.children})}function InsightDisplayConfig(_ref){let{filters:filters,disableTable:disableTable}=_ref;const isFunnels=Object(sharedUtils.e)(filters),isPaths=Object(sharedUtils.g)(filters),{featureFlags:featureFlags}=Object(index_esm.useValues)(featureFlagLogic.a),{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{setFilters:setFilters}=Object(index_esm.useActions)(insightLogic.c);return Object(jsx_runtime.jsxs)("div",{className:"flex justify-between items-center flex-wrap","data-attr":"insight-filters",children:[Object(jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap my-2",children:[filters.insight&&showDateFilter[filters.insight]&&!disableTable&&Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(InsightDateFilter.a,{disabled:isFunnels&&isFunnelEmpty(filters)})}),(filter=filters,(Object(sharedUtils.e)(filter)?filter.funnel_viz_type===types.B.Trends:!Object(sharedUtils.h)(filter)&&!Object(sharedUtils.g)(filter)&&(!!Object(sharedUtils.f)(filter)||(Object(sharedUtils.j)(filter)||Object(sharedUtils.i)(filter))&&(!filter.display||!constants.o.includes(filter.display))))&&Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(IntervalFilter.a,{})})),!Object(sharedUtils.j)(filters)||filters.breakdown_type||filters.compare||filters.display&&filters.display!==types.k.ActionsLineGraph||!featureFlags[constants.i.SMOOTHING_INTERVAL]?null:Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(SmoothingFilter.a,{})}),Object(sharedUtils.h)(filters)&&Object(jsx_runtime.jsxs)(ConfigFilter,{children:[Object(jsx_runtime.jsx)(RetentionDatePicker.a,{}),Object(jsx_runtime.jsx)(RetentionReferencePicker.a,{})]}),isPaths&&Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(PathStepPicker.a,{insightProps:insightProps})}),showCompareFilter(filters)&&Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(CompareFilter.a,{})})]}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center space-x-4 flex-wrap my-2",children:[Object(sharedUtils.c)(filters)&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(sharedUtils.j)(filters)&&Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(UnitPicker.a,{filters:filters,setFilters:setFilters})}),Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(ChartFilter.a,{filters:filters})})]}),isFunnels&&filters.funnel_viz_type===types.B.Steps&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(FunnelDisplayLayoutPicker.a,{})})}),isFunnels&&filters.funnel_viz_type===types.B.TimeToConvert&&Object(jsx_runtime.jsx)(ConfigFilter,{children:Object(jsx_runtime.jsx)(FunnelBinsPicker,{})})]})]});var filter}try{InsightDisplayConfig.displayName="InsightDisplayConfig",InsightDisplayConfig.__docgenInfo={description:"",displayName:"InsightDisplayConfig",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterType"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!0,type:{name:"enum",value:[{value:'"TRENDS"'},{value:'"STICKINESS"'},{value:'"LIFECYCLE"'},{value:'"FUNNELS"'},{value:'"RETENTION"'},{value:'"PATHS"'}]}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!0,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'},{value:'"subscriptions"'},{value:'"sharing"'}]}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"]={docgenInfo:InsightDisplayConfig.__docgenInfo,name:"InsightDisplayConfig",path:"frontend/src/scenes/insights/InsightDisplayConfig.tsx#InsightDisplayConfig"})}catch(__react_docgen_typescript_loader_error){}var FunnelCanvasLabel=__webpack_require__("./frontend/src/scenes/funnels/FunnelCanvasLabel.tsx"),dayjs=__webpack_require__("./frontend/src/lib/dayjs.ts"),usePeriodicRerender=__webpack_require__("./frontend/src/lib/hooks/usePeriodicRerender.ts"),tooltip=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tooltip/index.js"),es_button=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/button/index.js");function ComputationTimeWithRefresh(){const{lastRefresh:lastRefresh,insightRefreshButtonDisabledReason:insightRefreshButtonDisabledReason}=Object(index_esm.useValues)(insightLogic.c),{loadResults:loadResults}=Object(index_esm.useActions)(insightLogic.c);return Object(usePeriodicRerender.a)(15e3),Object(jsx_runtime.jsxs)("div",{className:"flex items-center text-muted-alt",children:["Computed ",lastRefresh?Object(dayjs.a)(lastRefresh).fromNow():"a while ago",Object(jsx_runtime.jsx)("span",{className:"px-1",children:"•"}),Object(jsx_runtime.jsx)(tooltip.a,{title:insightRefreshButtonDisabledReason,children:Object(jsx_runtime.jsx)("span",{children:Object(jsx_runtime.jsx)(es_button.a,{type:"link",size:"small",onClick:()=>loadResults(!0),disabled:!!insightRefreshButtonDisabledReason,className:"p-0 z-0",children:Object(jsx_runtime.jsx)("span",{className:"text-sm",children:"Refresh"})})})})]})}var Trends=__webpack_require__("./frontend/src/scenes/trends/Trends.tsx"),RetentionContainer=__webpack_require__("./frontend/src/scenes/retention/RetentionContainer.tsx"),Paths=__webpack_require__("./frontend/src/scenes/paths/Paths.tsx"),trendsLogic=__webpack_require__("./frontend/src/scenes/trends/trendsLogic.ts"),InsightsTable=__webpack_require__("./frontend/src/scenes/insights/views/InsightsTable/InsightsTable.tsx"),EmptyStates=__webpack_require__("./frontend/src/scenes/insights/EmptyStates/index.ts"),PathsLabel=__webpack_require__("./frontend/src/scenes/paths/PathsLabel.tsx"),InsightLegend=__webpack_require__("./frontend/src/lib/components/InsightLegend/InsightLegend.tsx"),Tooltip=__webpack_require__("./frontend/src/lib/lemon-ui/Tooltip.tsx"),LemonTable=__webpack_require__("./frontend/src/lib/lemon-ui/LemonTable/index.ts"),EntityFilterInfo=__webpack_require__("./frontend/src/lib/components/EntityFilterInfo.tsx"),funnelUtils=__webpack_require__("./frontend/src/scenes/funnels/funnelUtils.ts"),funnelStepTableUtils=__webpack_require__("./frontend/src/scenes/insights/views/Funnels/funnelStepTableUtils.tsx"),cohortsModel=__webpack_require__("./frontend/src/models/cohortsModel.ts"),LemonCheckbox=__webpack_require__("./frontend/src/lib/lemon-ui/LemonCheckbox/index.ts"),Lettermark=__webpack_require__("./frontend/src/lib/lemon-ui/Lettermark/index.ts"),LemonRow=__webpack_require__("./frontend/src/lib/lemon-ui/LemonRow/index.ts"),ValueInspectorButton=__webpack_require__("./frontend/src/scenes/funnels/ValueInspectorButton.tsx"),colors=__webpack_require__("./frontend/src/lib/colors.ts"),icons=__webpack_require__("./frontend/src/lib/lemon-ui/icons/index.ts"),propertyDefinitionsModel=__webpack_require__("./frontend/src/models/propertyDefinitionsModel.ts"),insights_utils=__webpack_require__("./frontend/src/scenes/insights/utils.tsx");function FunnelStepsTable(){const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),logic=Object(funnelLogic.a)(insightProps),{insightLoading:insightLoading,filters:filters,steps:steps,flattenedBreakdowns:flattenedBreakdowns,hiddenLegendKeys:hiddenLegendKeys,visibleStepsWithConversionMetrics:visibleStepsWithConversionMetrics,isOnlySeries:isOnlySeries}=Object(index_esm.useValues)(logic),{setHiddenById:setHiddenById,toggleVisibilityByBreakdown:toggleVisibilityByBreakdown,openPersonsModalForSeries:openPersonsModalForSeries}=Object(index_esm.useActions)(logic),{cohorts:cohorts}=Object(index_esm.useValues)(cohortsModel.a),{formatPropertyValueForDisplay:formatPropertyValueForDisplay}=Object(index_esm.useValues)(propertyDefinitionsModel.a),allChecked=null==flattenedBreakdowns?void 0:flattenedBreakdowns.every((b=>!hiddenLegendKeys[Object(funnelUtils.m)(b.breakdown_value)])),columnsGrouped=[{children:[{title:isOnlySeries?"Breakdown":Object(jsx_runtime.jsx)(LemonCheckbox.a,{checked:allChecked||!(null==flattenedBreakdowns||!flattenedBreakdowns.some((b=>!hiddenLegendKeys[Object(funnelUtils.m)(b.breakdown_value)])))&&"indeterminate",onChange:()=>{setHiddenById(Object.fromEntries(visibleStepsWithConversionMetrics.flatMap((()=>flattenedBreakdowns.map((b=>[Object(funnelUtils.m)(b.breakdown_value),allChecked]))))))},label:Object(jsx_runtime.jsx)("span",{className:"font-bold",children:"Breakdown"}),size:"small"}),dataIndex:"breakdown_value",render:function RenderBreakdownValue(_,breakdown){var _breakdown$breakdown_;const value=1==(null===(_breakdown$breakdown_=breakdown.breakdown_value)||void 0===_breakdown$breakdown_?void 0:_breakdown$breakdown_.length)?breakdown.breakdown_value[0]:breakdown.breakdown_value,label=Object(insights_utils.d)(cohorts,formatPropertyValueForDisplay,value,breakdown.breakdown,filters.breakdown_type);return isOnlySeries?Object(jsx_runtime.jsx)("span",{className:"font-medium",children:label}):Object(jsx_runtime.jsx)(LemonCheckbox.a,{checked:!hiddenLegendKeys[Object(funnelUtils.m)(breakdown.breakdown_value)],onChange:()=>toggleVisibilityByBreakdown(breakdown.breakdown_value),label:label})}},{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Total",Object(jsx_runtime.jsx)("br",{}),"conversion"]}),render:(_,breakdown)=>{var _breakdown$conversion,_breakdown$conversion2;return Object(utils.ub)(null!==(_breakdown$conversion=null==breakdown||null===(_breakdown$conversion2=breakdown.conversionRates)||void 0===_breakdown$conversion2?void 0:_breakdown$conversion2.total)&&void 0!==_breakdown$conversion?_breakdown$conversion:0,2,!0)},align:"right"}]},...steps.map(((step,stepIndex)=>({title:Object(jsx_runtime.jsx)(LemonRow.a,{icon:Object(jsx_runtime.jsx)(Lettermark.a,{name:stepIndex+1,color:Lettermark.b.Gray}),style:{font:"inherit",padding:0},size:"small",children:Object(jsx_runtime.jsx)(EntityFilterInfo.a,{filter:Object(funnelStepTableUtils.a)(step)})}),children:[{title:0===stepIndex?"Entered":"Converted",render:function RenderCompleted(_,breakdown){var _breakdown$steps,_stepSeries$count;const stepSeries=null===(_breakdown$steps=breakdown.steps)||void 0===_breakdown$steps?void 0:_breakdown$steps[stepIndex];return stepSeries&&Object(jsx_runtime.jsx)(ValueInspectorButton.a,{onClick:()=>openPersonsModalForSeries({step:step,series:stepSeries,converted:!0}),style:{padding:0},children:Object(utils.Q)(null!==(_stepSeries$count=stepSeries.count)&&void 0!==_stepSeries$count?_stepSeries$count:0)})},align:"right"},...0===stepIndex?[]:[{title:"Dropped off",render:function RenderDropped(_,breakdown){var _breakdown$steps2,_stepSeries$droppedOf;const stepSeries=null===(_breakdown$steps2=breakdown.steps)||void 0===_breakdown$steps2?void 0:_breakdown$steps2[stepIndex];return stepSeries&&Object(jsx_runtime.jsx)(ValueInspectorButton.a,{onClick:()=>openPersonsModalForSeries({step:step,series:stepSeries,converted:!1}),style:{padding:0},children:Object(utils.Q)(null!==(_stepSeries$droppedOf=stepSeries.droppedOffFromPrevious)&&void 0!==_stepSeries$droppedOf?_stepSeries$droppedOf:0)})},align:"right"}],{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Conversion",Object(jsx_runtime.jsx)("br",{}),"so far"]}),render:function RenderConversionSoFar(_,breakdown){var _breakdown$steps$step,_breakdown$steps3,_breakdown$steps3$ste,_breakdown$steps$step2,_breakdown$steps4,_breakdown$steps4$ste;const significance=Object(funnelStepTableUtils.b)(breakdown,step.order);return null!=significance&&significance.total?Object(jsx_runtime.jsx)(LemonRow.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:Object(jsx_runtime.jsx)(icons.eb,{}),size:"small",children:Object(utils.ub)(null!==(_breakdown$steps$step=null===(_breakdown$steps3=breakdown.steps)||void 0===_breakdown$steps3||null===(_breakdown$steps3$ste=_breakdown$steps3[step.order])||void 0===_breakdown$steps3$ste?void 0:_breakdown$steps3$ste.conversionRates.total)&&void 0!==_breakdown$steps$step?_breakdown$steps$step:0,2,!0)}):Object(utils.ub)(null!==(_breakdown$steps$step2=null===(_breakdown$steps4=breakdown.steps)||void 0===_breakdown$steps4||null===(_breakdown$steps4$ste=_breakdown$steps4[step.order])||void 0===_breakdown$steps4$ste?void 0:_breakdown$steps4$ste.conversionRates.total)&&void 0!==_breakdown$steps$step2?_breakdown$steps$step2:0,2,!0)},align:"right"},...0===stepIndex?[]:[{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Conversion",Object(jsx_runtime.jsx)("br",{}),"from previous"]}),render:function RenderConversionFromPrevious(_,breakdown){var _breakdown$steps$step3,_breakdown$steps5,_breakdown$steps5$ste,_breakdown$steps$step4,_breakdown$steps6,_breakdown$steps6$ste;const significance=Object(funnelStepTableUtils.b)(breakdown,step.order);return null!=significance&&significance.total||null==significance||!significance.fromPrevious?Object(utils.ub)(null!==(_breakdown$steps$step4=null===(_breakdown$steps6=breakdown.steps)||void 0===_breakdown$steps6||null===(_breakdown$steps6$ste=_breakdown$steps6[step.order])||void 0===_breakdown$steps6$ste?void 0:_breakdown$steps6$ste.conversionRates.fromPrevious)&&void 0!==_breakdown$steps$step4?_breakdown$steps$step4:0,2,!0):Object(jsx_runtime.jsx)(LemonRow.a,{className:"significance-highlight",tooltip:"Significantly different from other breakdown values",icon:Object(jsx_runtime.jsx)(icons.eb,{}),size:"small",children:Object(utils.ub)(null!==(_breakdown$steps$step3=null===(_breakdown$steps5=breakdown.steps)||void 0===_breakdown$steps5||null===(_breakdown$steps5$ste=_breakdown$steps5[step.order])||void 0===_breakdown$steps5$ste?void 0:_breakdown$steps5$ste.conversionRates.fromPrevious)&&void 0!==_breakdown$steps$step3?_breakdown$steps$step3:0,2,!0)})},align:"right"},{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Median",Object(jsx_runtime.jsx)("br",{}),"time"]}),render:(_,breakdown)=>{var _breakdown$steps7,_breakdown$steps7$ste;return null!=(null===(_breakdown$steps7=breakdown.steps)||void 0===_breakdown$steps7||null===(_breakdown$steps7$ste=_breakdown$steps7[step.order])||void 0===_breakdown$steps7$ste?void 0:_breakdown$steps7$ste.median_conversion_time)?Object(utils.O)(breakdown.steps[step.order].median_conversion_time,3):"–"},align:"right",width:0,className:"whitespace-nowrap"},{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Average",Object(jsx_runtime.jsx)("br",{}),"time"]}),render:(_,breakdown)=>{var _breakdown$steps8,_breakdown$steps8$ste;return null!=(null===(_breakdown$steps8=breakdown.steps)||void 0===_breakdown$steps8||null===(_breakdown$steps8$ste=_breakdown$steps8[step.order])||void 0===_breakdown$steps8$ste?void 0:_breakdown$steps8$ste.average_conversion_time)?Object(utils.O)(breakdown.steps[step.order].average_conversion_time,3):"–"},align:"right",width:0,className:"whitespace-nowrap"}]]})))];return Object(jsx_runtime.jsx)(LemonTable.a,{dataSource:flattenedBreakdowns,columns:columnsGrouped,loading:insightLoading,rowKey:"breakdownIndex",rowStatus:record=>record.significant?"highlighted":null,rowRibbonColor:series=>{var _series$breakdownInde;return Object(colors.d)(null!==(_series$breakdownInde=null==series?void 0:series.breakdownIndex)&&void 0!==_series$breakdownInde?_series$breakdownInde:0)}})}var Animation=__webpack_require__("./frontend/src/lib/components/Animation/Animation.tsx"),animations=__webpack_require__("./frontend/src/lib/animations/animations.ts"),CommentOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CommentOutlined.js"),react=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@2.0.0_webpack@4.46.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),FunnelCorrelation=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss"),FunnelCorrelation_default=__webpack_require__.n(FunnelCorrelation),FunnelCorrelation_options={insert:"head",singleton:!1},CloseOutlined=(injectStylesIntoStyleTag_default()(FunnelCorrelation_default.a,FunnelCorrelation_options),FunnelCorrelation_default.a.locals,__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/CloseOutlined.js")),table=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/table/index.js"),Column=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/table/Column.js"),Column_default=__webpack_require__.n(Column),RiseOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/RiseOutlined.js"),FallOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/FallOutlined.js"),InfoCircleOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),EllipsisOutlined=__webpack_require__("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js"),Checkbox=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/lib/checkbox/Checkbox.js"),Checkbox_default=__webpack_require__.n(Checkbox),PropertyKeyInfo=__webpack_require__("./frontend/src/lib/components/PropertyKeyInfo.tsx"),FunnelCorrelationTable=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss"),FunnelCorrelationTable_default=__webpack_require__.n(FunnelCorrelationTable),FunnelCorrelationTable_options={insert:"head",singleton:!1},eventUsageLogic=(injectStylesIntoStyleTag_default()(FunnelCorrelationTable_default.a,FunnelCorrelationTable_options),FunnelCorrelationTable_default.a.locals,__webpack_require__("./frontend/src/lib/utils/eventUsageLogic.ts")),visibilitySensorLogic=__webpack_require__("./frontend/src/lib/components/VisibilitySensor/visibilitySensorLogic.tsx");function VisibilitySensor(_ref){let{id:id,offset:offset,children:children}=_ref;const{scrolling:scrolling}=Object(index_esm.useActions)(Object(visibilitySensorLogic.a)({id:id,offset:offset})),ref=Object(react.useRef)(null);return Object(react.useEffect)((()=>{const element=ref.current;return document.addEventListener("scroll",(()=>element&&scrolling(element))),()=>document.removeEventListener("scroll",(()=>element&&scrolling(element)))}),[ref.current]),Object(jsx_runtime.jsx)("div",{ref:ref,children:children})}try{VisibilitySensor.displayName="VisibilitySensor",VisibilitySensor.__docgenInfo={description:"",displayName:"VisibilitySensor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"]={docgenInfo:VisibilitySensor.__docgenInfo,name:"VisibilitySensor",path:"frontend/src/lib/components/VisibilitySensor/VisibilitySensor.tsx#VisibilitySensor"})}catch(__react_docgen_typescript_loader_error){}var LemonButton=__webpack_require__("./frontend/src/lib/lemon-ui/LemonButton/index.ts"),Popover=__webpack_require__("./frontend/src/lib/lemon-ui/Popover/Popover.tsx"),modal=__webpack_require__("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/modal/index.js"),CorrelationMatrix=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss"),CorrelationMatrix_default=__webpack_require__.n(CorrelationMatrix),CorrelationMatrix_options={insert:"head",singleton:!1},Spinner=(injectStylesIntoStyleTag_default()(CorrelationMatrix_default.a,CorrelationMatrix_options),CorrelationMatrix_default.a.locals,__webpack_require__("./frontend/src/lib/lemon-ui/Spinner/Spinner.tsx")),Link=__webpack_require__("./frontend/src/lib/lemon-ui/Link.tsx"),AlertMessage=__webpack_require__("./frontend/src/lib/lemon-ui/AlertMessage/index.ts");function CorrelationMatrix_CorrelationMatrix(){const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),logic=Object(funnelLogic.a)(insightProps),{correlationsLoading:correlationsLoading,funnelCorrelationDetails:funnelCorrelationDetails,parseDisplayNameForCorrelation:parseDisplayNameForCorrelation,correlationMatrixAndScore:correlationMatrixAndScore}=Object(index_esm.useValues)(logic),{setFunnelCorrelationDetails:setFunnelCorrelationDetails,openCorrelationPersonsModal:openCorrelationPersonsModal}=Object(index_esm.useActions)(logic),actor=(null==funnelCorrelationDetails?void 0:funnelCorrelationDetails.result_type)===types.x.Events?"event":"property",action=(null==funnelCorrelationDetails?void 0:funnelCorrelationDetails.result_type)===types.x.Events?"performed event":"have property";let displayName=Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{});if(funnelCorrelationDetails){const{first_value:first_value,second_value:second_value}=parseDisplayNameForCorrelation(funnelCorrelationDetails);displayName=Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(PropertyKeyInfo.a,{value:first_value}),void 0!==second_value&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" :: ",Object(jsx_runtime.jsx)(PropertyKeyInfo.a,{value:second_value,disablePopover:!0})]})]})}const{correlationScore:correlationScore,truePositive:truePositive,falsePositive:falsePositive,trueNegative:trueNegative,falseNegative:falseNegative,correlationScoreStrength:correlationScoreStrength}=correlationMatrixAndScore,scoreIcon="strong"===correlationScoreStrength?Object(jsx_runtime.jsx)(icons.x,{className:"text-success"}):"moderate"===correlationScoreStrength?Object(jsx_runtime.jsx)(icons.w,{className:"text-warning"}):Object(jsx_runtime.jsx)(icons.T,{className:"text-danger"}),dismiss=()=>setFunnelCorrelationDetails(null);return Object(jsx_runtime.jsx)(modal.a,{className:"correlation-matrix",visible:!!funnelCorrelationDetails,onCancel:dismiss,destroyOnClose:!0,footer:Object(jsx_runtime.jsx)(es_button.a,{onClick:dismiss,children:"Dismiss"}),width:600,title:"Correlation details",children:Object(jsx_runtime.jsx)("div",{className:"correlation-table-wrapper",children:correlationsLoading?Object(jsx_runtime.jsx)("div",{className:"mt-4 text-center",children:Object(jsx_runtime.jsx)(Spinner.a,{className:"text-4xl"})}):funnelCorrelationDetails?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("p",{className:"text-muted-alt mb-4",children:["The table below displays the correlation details for users who ",action," ",Object(jsx_runtime.jsx)("b",{children:displayName}),"."]}),Object(jsx_runtime.jsxs)("table",{children:[Object(jsx_runtime.jsxs)("thead",{children:[Object(jsx_runtime.jsx)("tr",{className:"table-title",children:Object(jsx_runtime.jsx)("td",{colSpan:3,children:"Results matrix"})}),Object(jsx_runtime.jsxs)("tr",{children:[Object(jsx_runtime.jsx)("td",{children:(null==funnelCorrelationDetails?void 0:funnelCorrelationDetails.result_type)===types.x.Events?"Performed event":"Has property"}),Object(jsx_runtime.jsx)("td",{children:"Success"}),Object(jsx_runtime.jsx)("td",{children:"Dropped off"})]})]}),Object(jsx_runtime.jsxs)("tbody",{children:[Object(jsx_runtime.jsxs)("tr",{children:[Object(jsx_runtime.jsx)("td",{className:"horizontal-header",children:"Yes"}),Object(jsx_runtime.jsxs)("td",{children:[Object(jsx_runtime.jsx)(Tooltip.a,{title:`True positive (TP) - Percentage of users who ${action} and completed the funnel.`,children:Object(jsx_runtime.jsx)("div",{className:"percentage",children:truePositive?Object(utils.ub)(truePositive/(truePositive+falsePositive)):"0.00%"})}),0===truePositive?"0 users":Object(jsx_runtime.jsx)(Link.a,{onClick:()=>{openCorrelationPersonsModal(funnelCorrelationDetails,!0)},children:Object(utils.vb)(truePositive,"user",void 0,!0)})]}),Object(jsx_runtime.jsxs)("td",{children:[Object(jsx_runtime.jsx)("div",{className:"percentage",children:Object(jsx_runtime.jsx)(Tooltip.a,{title:`False negative (FN) - Percentage of users who ${action} and did not complete the funnel.`,children:falseNegative?Object(utils.ub)(falseNegative/(falseNegative+trueNegative)):"0.00%"})}),0===falseNegative?"0 users":Object(jsx_runtime.jsx)(Link.a,{onClick:()=>{openCorrelationPersonsModal(funnelCorrelationDetails,!1)},children:Object(utils.vb)(falseNegative,"user",void 0,!0)})]})]}),Object(jsx_runtime.jsxs)("tr",{children:[Object(jsx_runtime.jsx)("td",{className:"horizontal-header",children:"No"}),Object(jsx_runtime.jsxs)("td",{children:[Object(jsx_runtime.jsx)("div",{className:"percentage",children:Object(jsx_runtime.jsx)(Tooltip.a,{title:`False positive (FP) - Percentage of users who did not ${action} and completed the funnel.`,children:falsePositive?Object(utils.ub)(falsePositive/(truePositive+falsePositive)):"0.00%"})}),Object(utils.vb)(falsePositive,"user",void 0,!0)]}),Object(jsx_runtime.jsxs)("td",{children:[Object(jsx_runtime.jsx)("div",{className:"percentage",children:Object(jsx_runtime.jsx)(Tooltip.a,{title:`True negative (TN) - Percentage of users who did not ${action} and did not complete the funnel.`,children:trueNegative?Object(utils.ub)(trueNegative/(falseNegative+trueNegative)):"0.00%"})}),Object(utils.vb)(trueNegative,"user",void 0,!0)]})]}),Object(jsx_runtime.jsxs)("tr",{children:[Object(jsx_runtime.jsx)("td",{className:"horizontal-header"}),Object(jsx_runtime.jsx)("td",{children:Object(jsx_runtime.jsx)("b",{children:"100%"})}),Object(jsx_runtime.jsx)("td",{children:Object(jsx_runtime.jsx)("b",{children:"100%"})})]})]})]}),Object(jsx_runtime.jsxs)("div",{className:"mt-4 text-center",children:[Object(utils.i)((null==funnelCorrelationDetails?void 0:funnelCorrelationDetails.result_type)||"")," ",Object(jsx_runtime.jsx)("b",{children:displayName})," ","has a"," ",(null==funnelCorrelationDetails?void 0:funnelCorrelationDetails.correlation_type)===types.y.Success?Object(jsx_runtime.jsx)(Tooltip.a,{title:`Positive correlation means this ${actor} is correlated with a successful conversion.`,children:Object(jsx_runtime.jsxs)("span",{className:"cursor-help text-success",children:[Object(jsx_runtime.jsx)(icons.Yc,{})," positive correlation"]})}):Object(jsx_runtime.jsx)(Tooltip.a,{title:`Negative correlation means this ${actor} is correlated with an unsuccessful conversion (user dropped off).`,children:Object(jsx_runtime.jsxs)("strong",{className:"cursor-help text-danger",children:[Object(jsx_runtime.jsx)(icons.Zc,{})," negative correlation"]})})," ","score of"," ",Object(jsx_runtime.jsx)(Tooltip.a,{title:`This ${actor} has ${correlationScoreStrength} correlation.`,children:Object(jsx_runtime.jsxs)("strong",{className:Object(clsx_m.default)("cursor-help","strong"===correlationScoreStrength?"text-success":"moderate"===correlationScoreStrength?"text-warning":"text-danger"),children:[scoreIcon," ",correlationScore.toFixed(3)]})})]})]}):Object(jsx_runtime.jsx)(AlertMessage.a,{type:"error",children:"We could not load the details for this correlation value. Please recreate your funnel and try again."})})})}function FunnelCorrelationTable_FunnelCorrelationTable(){const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),logic=Object(funnelLogic.a)(insightProps),{steps:steps,correlationValues:correlationValues,correlationTypes:correlationTypes,eventHasPropertyCorrelations:eventHasPropertyCorrelations,eventWithPropertyCorrelationsValues:eventWithPropertyCorrelationsValues,parseDisplayNameForCorrelation:parseDisplayNameForCorrelation,correlationsLoading:correlationsLoading,eventWithPropertyCorrelationsLoading:eventWithPropertyCorrelationsLoading,nestedTableExpandedKeys:nestedTableExpandedKeys,correlationPropKey:correlationPropKey,filters:filters,aggregationTargetLabel:aggregationTargetLabel}=Object(index_esm.useValues)(logic),{setCorrelationTypes:setCorrelationTypes,loadEventWithPropertyCorrelations:loadEventWithPropertyCorrelations,addNestedTableExpandedKey:addNestedTableExpandedKey,removeNestedTableExpandedKey:removeNestedTableExpandedKey,openCorrelationPersonsModal:openCorrelationPersonsModal,loadCorrelations:loadCorrelations}=Object(index_esm.useActions)(logic),{reportCorrelationInteraction:reportCorrelationInteraction}=Object(index_esm.useActions)(eventUsageLogic.e);Object(react.useEffect)((()=>{loadCorrelations({})}),[filters]);const onClickCorrelationType=correlationType=>{correlationTypes?correlationTypes.includes(correlationType)?setCorrelationTypes(correlationTypes.filter((types=>types!==correlationType))):setCorrelationTypes([...correlationTypes,correlationType]):setCorrelationTypes([correlationType])},renderOddsRatioTextRecord=record=>{const is_success=record.correlation_type===types.y.Success,{first_value:first_value,second_value:second_value}=parseDisplayNameForCorrelation(record);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("h4",{children:[is_success?Object(jsx_runtime.jsx)(RiseOutlined.a,{className:"text-success"}):Object(jsx_runtime.jsx)(FallOutlined.a,{className:"text-danger"})," ",Object(jsx_runtime.jsx)(PropertyKeyInfo.a,{value:first_value}),void 0!==second_value&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" :: ",Object(jsx_runtime.jsx)(PropertyKeyInfo.a,{value:second_value,disablePopover:!0})]})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(utils.i)(aggregationTargetLabel.plural)," ",null!=filters.aggregation_group_type_index?"that":"who"," converted were"," ",Object(jsx_runtime.jsx)("mark",{children:Object(jsx_runtime.jsxs)("b",{children:[(value=record.odds_ratio,value<10&&!Number.isInteger(value)?value.toFixed(1):value.toFixed()),"x ",is_success?"more":"less"," likely"]})})," ","to"," ",record.result_type===types.x.EventWithProperties?"have this event property":"do this event"]}),Object(jsx_runtime.jsx)(CorrelationMatrix_CorrelationMatrix,{})]});var value},renderSuccessCount=record=>Object(jsx_runtime.jsx)(ValueInspectorButton.a,{onClick:()=>{openCorrelationPersonsModal(record,!0)},children:record.success_count}),renderFailureCount=record=>Object(jsx_runtime.jsx)(ValueInspectorButton.a,{onClick:()=>{openCorrelationPersonsModal(record,!1)},children:record.failure_count});return steps.length>1?Object(jsx_runtime.jsx)(VisibilitySensor,{id:correlationPropKey,offset:152,children:Object(jsx_runtime.jsxs)("div",{className:"funnel-correlation-table",children:[Object(jsx_runtime.jsxs)("span",{className:"funnel-correlation-header",children:[Object(jsx_runtime.jsxs)("span",{className:"table-header",children:[Object(jsx_runtime.jsx)(icons.xc,{className:"mr-1 text-2xl opacity-50"}),"CORRELATED EVENTS"]}),Object(jsx_runtime.jsxs)("span",{className:"table-options",children:[Object(jsx_runtime.jsx)("p",{className:"title",children:"CORRELATION"}),Object(jsx_runtime.jsx)("div",{className:"tab-btn ant-btn",onClick:()=>onClickCorrelationType(types.y.Success),children:Object(jsx_runtime.jsx)(Checkbox_default.a,{checked:correlationTypes.includes(types.y.Success),className:"pointer-events-none",children:"Success"})}),Object(jsx_runtime.jsx)("div",{className:"tab-btn ant-btn",onClick:()=>onClickCorrelationType(types.y.Failure),children:Object(jsx_runtime.jsx)(Checkbox_default.a,{checked:correlationTypes.includes(types.y.Failure),className:"pointer-events-none",children:"Drop-off"})})]})]}),Object(jsx_runtime.jsxs)(table.a,{dataSource:correlationValues,loading:correlationsLoading,size:"small",scroll:{x:"max-content"},rowKey:record=>record.event.event,pagination:{pageSize:5,hideOnSinglePage:!0,onChange:()=>reportCorrelationInteraction(types.x.Events,"load more")},expandable:{expandedRowRender:record=>{return eventName=record.event.event,eventWithPropertyCorrelationsLoading?Object(jsx_runtime.jsxs)("div",{className:"flex flex-col items-center py-2",children:[Object(jsx_runtime.jsx)(Spinner.a,{className:"text-2xl mb-2"}),Object(jsx_runtime.jsx)("h3",{className:"mb-1 text-md font-semibold",children:"Loading correlation results…"}),Object(jsx_runtime.jsx)("p",{className:"m-0 text-xs text-muted",children:"This process can take up to 20 seconds."})]}):Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("h4",{className:"pl-4",children:"Correlated properties"}),Object(jsx_runtime.jsxs)(table.a,{dataSource:eventWithPropertyCorrelationsValues[eventName],rowKey:record=>record.event.event,className:"nested-properties-table",scroll:{x:"max-content"},pagination:{pageSize:5,hideOnSinglePage:!0,onChange:(page,page_size)=>reportCorrelationInteraction(types.x.EventWithProperties,"pagination change",{page:page,page_size:page_size})},children:[Object(jsx_runtime.jsx)(Column_default.a,{title:"Property",render:(_,record)=>renderOddsRatioTextRecord(record),align:"left"},"eventName"),Object(jsx_runtime.jsx)(Column_default.a,{title:"Completed",render:(_,record)=>renderSuccessCount(record),width:90,align:"center"},"success_count"),Object(jsx_runtime.jsx)(Column_default.a,{title:"Dropped off",render:(_,record)=>renderFailureCount(record),width:120,align:"center"},"failure_count"),Object(jsx_runtime.jsx)(Column_default.a,{title:"",render:(_,record)=>Object(jsx_runtime.jsx)(CorrelationActionsCell,{record:record}),align:"center",width:30},"actions")]})]});var eventName},expandedRowKeys:nestedTableExpandedKeys,rowExpandable:()=>void 0===filters.aggregation_group_type_index,expandIcon:_ref=>{let{expanded:expanded,onExpand:onExpand,record:record,expandable:expandable}=_ref;return expandable?expanded?Object(jsx_runtime.jsx)(Tooltip.a,{title:"Collapse",children:Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.cd,{}),status:"stealth",type:"tertiary",active:!0,noPadding:!0,onClick:e=>{removeNestedTableExpandedKey(record.event.event),onExpand(record,e)}})}):Object(jsx_runtime.jsx)(Tooltip.a,{title:"Expand to see correlated properties for this event",children:Object(jsx_runtime.jsx)(LemonButton.a,{icon:Object(jsx_runtime.jsx)(icons.dd,{}),status:"stealth",type:"tertiary",noPadding:!0,onClick:e=>{!eventHasPropertyCorrelations(record.event.event)&&loadEventWithPropertyCorrelations(record.event.event),addNestedTableExpandedKey(record.event.event),onExpand(record,e)}})}):null}},children:[Object(jsx_runtime.jsx)(Column_default.a,{title:"Event",render:(_,record)=>renderOddsRatioTextRecord(record),align:"left",ellipsis:!0},"eventName"),Object(jsx_runtime.jsx)(Column_default.a,{title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Completed",Object(jsx_runtime.jsx)(Tooltip.a,{title:`${Object(utils.i)(aggregationTargetLabel.plural)} ${null!=filters.aggregation_group_type_index?"that":"who"} performed the event and completed the entire funnel.`,children:Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:"column-info"})})]}),render:(_,record)=>renderSuccessCount(record),width:90,align:"center"},"success_count"),Object(jsx_runtime.jsx)(Column_default.a,{title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Dropped off",Object(jsx_runtime.jsx)(Tooltip.a,{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(utils.i)(aggregationTargetLabel.plural)," ",null!=filters.aggregation_group_type_index?"that":"who"," ","performed the event and did ",Object(jsx_runtime.jsx)("b",{children:"not complete"})," the entire funnel."]}),children:Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:"column-info"})})]}),render:(_,record)=>renderFailureCount(record),width:120,align:"center"},"failure_count"),Object(jsx_runtime.jsx)(Column_default.a,{title:"",render:(_,record)=>Object(jsx_runtime.jsx)(CorrelationActionsCell,{record:record}),width:30},"actions")]})]})}):null}const CorrelationActionsCell=_ref2=>{let{record:record}=_ref2;const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),logic=Object(funnelLogic.a)(insightProps),{excludeEventPropertyFromProject:excludeEventPropertyFromProject,excludeEventFromProject:excludeEventFromProject,setFunnelCorrelationDetails:setFunnelCorrelationDetails}=Object(index_esm.useActions)(logic),{isEventPropertyExcluded:isEventPropertyExcluded,isEventExcluded:isEventExcluded}=Object(index_esm.useValues)(logic),components=record.event.event.split("::"),[popoverOpen,setPopoverOpen]=Object(react.useState)(!1);return Object(jsx_runtime.jsx)(row.a,{style:{justifyContent:"flex-end"},children:Object(jsx_runtime.jsx)(Popover.a,{visible:popoverOpen,actionable:!0,onClickOutside:()=>setPopoverOpen(!1),overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[record.result_type===types.x.Events&&Object(jsx_runtime.jsx)(LemonButton.a,{onClick:()=>setFunnelCorrelationDetails(record),fullWidth:!0,status:"stealth",children:"View correlation details"}),Object(jsx_runtime.jsx)(LemonButton.a,{disabled:record.result_type===types.x.EventWithProperties?isEventPropertyExcluded(components[1]):isEventExcluded(components[0]),onClick:()=>record.result_type===types.x.EventWithProperties?excludeEventPropertyFromProject(components[0],components[1]):excludeEventFromProject(components[0]),fullWidth:!0,title:"Remove this event from any correlation analysis report in this project.",status:"stealth",children:"Exclude event from project"})]}),children:Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>setPopoverOpen(!popoverOpen),children:Object(jsx_runtime.jsx)(EllipsisOutlined.a,{className:"insight-dropdown-actions"})})})})};var PropertyNamesSelect=__webpack_require__("./frontend/src/lib/components/PropertyNamesSelect/PropertyNamesSelect.tsx");function FunnelPropertyCorrelationTable(){const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),logic=Object(funnelLogic.a)(insightProps),{steps:steps,propertyCorrelationValues:propertyCorrelationValues,propertyCorrelationTypes:propertyCorrelationTypes,excludedPropertyNames:excludedPropertyNames,parseDisplayNameForCorrelation:parseDisplayNameForCorrelation,propertyCorrelationsLoading:propertyCorrelationsLoading,inversePropertyNames:inversePropertyNames,propertyNames:propertyNames,correlationPropKey:correlationPropKey,allProperties:allProperties,filters:filters,aggregationTargetLabel:aggregationTargetLabel}=Object(index_esm.useValues)(logic),{setPropertyCorrelationTypes:setPropertyCorrelationTypes,setPropertyNames:setPropertyNames,openCorrelationPersonsModal:openCorrelationPersonsModal,loadPropertyCorrelations:loadPropertyCorrelations}=Object(index_esm.useActions)(logic),{reportCorrelationInteraction:reportCorrelationInteraction}=Object(index_esm.useActions)(eventUsageLogic.e);Object(react.useEffect)((()=>{0===propertyNames.length&&setPropertyNames(allProperties),loadPropertyCorrelations({})}),[filters]);const onClickCorrelationType=correlationType=>{propertyCorrelationTypes?propertyCorrelationTypes.includes(correlationType)?setPropertyCorrelationTypes(propertyCorrelationTypes.filter((types=>types!==correlationType))):setPropertyCorrelationTypes([...propertyCorrelationTypes,correlationType]):setPropertyCorrelationTypes([correlationType])};return steps.length>1?Object(jsx_runtime.jsx)(VisibilitySensor,{offset:150,id:`${correlationPropKey}-properties`,children:Object(jsx_runtime.jsxs)("div",{className:"funnel-correlation-table",children:[Object(jsx_runtime.jsxs)(row.a,{className:"funnel-correlation-header",children:[Object(jsx_runtime.jsxs)(col.a,{className:"table-header",children:[Object(jsx_runtime.jsx)(icons.yc,{style:{marginRight:4,opacity:.5,fontSize:24}}),"CORRELATED PROPERTIES"]}),Object(jsx_runtime.jsxs)(col.a,{className:"table-options",children:[Object(jsx_runtime.jsx)(row.a,{style:{display:"contents"},children:allProperties.length>0&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("p",{className:"title",children:"PROPERTIES "}),Object(jsx_runtime.jsx)(PropertyNamesSelect.a,{value:new Set(propertyNames),onChange:selectedProperties=>setPropertyNames(selectedProperties),allProperties:inversePropertyNames(excludedPropertyNames||[])})]})}),Object(jsx_runtime.jsxs)(row.a,{style:{display:"contents"},children:[Object(jsx_runtime.jsx)("p",{className:"title",style:{marginLeft:8},children:"CORRELATION"}),Object(jsx_runtime.jsx)("div",{className:"tab-btn ant-btn",style:{paddingTop:"1px",paddingBottom:"1px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:()=>onClickCorrelationType(types.y.Success),children:Object(jsx_runtime.jsx)(Checkbox_default.a,{checked:propertyCorrelationTypes.includes(types.y.Success),style:{pointerEvents:"none"},children:"Success"})}),Object(jsx_runtime.jsx)("div",{className:"tab-btn ant-btn",style:{marginRight:"8px",paddingTop:"1px",paddingBottom:"1px",borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>onClickCorrelationType(types.y.Failure),children:Object(jsx_runtime.jsx)(Checkbox_default.a,{checked:propertyCorrelationTypes.includes(types.y.Failure),style:{pointerEvents:"none"},children:"Drop-off"})})]})]})]}),Object(jsx_runtime.jsxs)(table.a,{dataSource:propertyCorrelationValues,loading:propertyCorrelationsLoading,scroll:{x:"max-content"},size:"small",rowKey:record=>record.event.event,pagination:{pageSize:5,hideOnSinglePage:!0,onChange:(page,page_size)=>reportCorrelationInteraction(types.x.Properties,"pagination change",{page:page,page_size:page_size})},children:[Object(jsx_runtime.jsx)(Column_default.a,{title:`${Object(utils.i)(aggregationTargetLabel.singular)} property`,render:(_,record)=>(record=>{const is_success=record.correlation_type===types.y.Success,{first_value:first_value,second_value:second_value}=parseDisplayNameForCorrelation(record);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("h4",{children:[is_success?Object(jsx_runtime.jsx)(RiseOutlined.a,{style:{color:"green"}}):Object(jsx_runtime.jsx)(FallOutlined.a,{style:{color:"red"}})," ",Object(jsx_runtime.jsx)(PropertyKeyInfo.a,{value:first_value}),void 0!==second_value&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" :: ",Object(jsx_runtime.jsx)(PropertyKeyInfo.a,{value:second_value,disablePopover:!0})]})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(utils.i)(aggregationTargetLabel.plural)," ",null!=filters.aggregation_group_type_index?"that":"who"," converted were"," ",Object(jsx_runtime.jsx)("mark",{children:Object(jsx_runtime.jsxs)("b",{children:[(value=record.odds_ratio,value<10&&!Number.isInteger(value)?value.toFixed(1):value.toFixed()),"x ",is_success?"more":"less"," likely"]})})," ","to have this property value"]})]});var value})(record),align:"left"},"propertName"),Object(jsx_runtime.jsx)(Column_default.a,{title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Completed",Object(jsx_runtime.jsx)(Tooltip.a,{title:`${Object(utils.i)(aggregationTargetLabel.plural)} ${null!=filters.aggregation_group_type_index?"that":"who"} have this property and completed the entire funnel.`,children:Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:"column-info"})})]}),render:(_,record)=>(record=>Object(jsx_runtime.jsx)(ValueInspectorButton.a,{onClick:()=>{openCorrelationPersonsModal(record,!0)},children:record.success_count}))(record),width:90,align:"center"},"success_count"),Object(jsx_runtime.jsx)(Column_default.a,{title:Object(jsx_runtime.jsxs)("div",{className:"flex items-center",children:["Dropped off",Object(jsx_runtime.jsx)(Tooltip.a,{title:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(utils.i)(aggregationTargetLabel.plural)," ",null!=filters.aggregation_group_type_index?"that":"who"," have this property and did ",Object(jsx_runtime.jsx)("b",{children:"not complete"})," the entire funnel."]}),children:Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:"column-info"})})]}),render:(_,record)=>(record=>Object(jsx_runtime.jsx)(ValueInspectorButton.a,{onClick:()=>{openCorrelationPersonsModal(record,!1)},children:record.failure_count}))(record),width:120,align:"center"},"failure_count"),Object(jsx_runtime.jsx)(Column_default.a,{title:"",render:(_,record)=>Object(jsx_runtime.jsx)(FunnelPropertyCorrelationTable_CorrelationActionsCell,{record:record}),align:"center",width:30},"actions")]})]})}):null}const FunnelPropertyCorrelationTable_CorrelationActionsCell=_ref=>{let{record:record}=_ref;const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),logic=Object(funnelLogic.a)(insightProps),{excludePropertyFromProject:excludePropertyFromProject,setFunnelCorrelationDetails:setFunnelCorrelationDetails}=Object(index_esm.useActions)(logic),{isPropertyExcludedFromProject:isPropertyExcludedFromProject}=Object(index_esm.useValues)(logic),propertyName=(record.event.event||"").split("::")[0],[popoverOpen,setPopoverOpen]=Object(react.useState)(!1);return Object(jsx_runtime.jsx)(row.a,{style:{justifyContent:"flex-end"},children:Object(jsx_runtime.jsx)(Popover.a,{visible:popoverOpen,actionable:!0,onClickOutside:()=>setPopoverOpen(!1),overlay:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(LemonButton.a,{onClick:()=>setFunnelCorrelationDetails(record),fullWidth:!0,status:"stealth",children:"View correlation details"}),Object(jsx_runtime.jsx)(LemonButton.a,{disabled:isPropertyExcludedFromProject(propertyName),onClick:()=>excludePropertyFromProject(propertyName),fullWidth:!0,title:"Remove this property from any correlation analysis report in this project.",status:"stealth",children:"Exclude property from project"})]}),children:Object(jsx_runtime.jsx)(LemonButton.a,{status:"stealth",onClick:()=>setPopoverOpen(!popoverOpen),children:Object(jsx_runtime.jsx)(EllipsisOutlined.a,{className:"insight-dropdown-actions"})})})})};var src=__webpack_require__("./frontend/@posthog/lemon-ui/src/index.ts"),PayGateMini=__webpack_require__("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx");const FunnelCorrelation_FunnelCorrelation=()=>{const{insightProps:insightProps}=Object(index_esm.useValues)(insightLogic.c),{isSkewed:isSkewed,steps:steps,correlationFeedbackHidden:correlationFeedbackHidden,correlationDetailedFeedbackVisible:correlationDetailedFeedbackVisible,correlationFeedbackRating:correlationFeedbackRating}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),{sendCorrelationAnalysisFeedback:sendCorrelationAnalysisFeedback,hideSkewWarning:hideSkewWarning,hideCorrelationAnalysisFeedback:hideCorrelationAnalysisFeedback,setCorrelationFeedbackRating:setCorrelationFeedbackRating,setCorrelationDetailedFeedback:setCorrelationDetailedFeedback}=Object(index_esm.useActions)(Object(funnelLogic.a)(insightProps)),detailedFeedbackRef=Object(react.useRef)(null);return steps.length<=1?null:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h2",{className:"my-4",children:"Correlation analysis"}),Object(jsx_runtime.jsx)(PayGateMini.a,{feature:types.e.CORRELATION_ANALYSIS,children:Object(jsx_runtime.jsxs)("div",{className:"funnel-correlation",children:[isSkewed&&Object(jsx_runtime.jsxs)(card.a,{className:"skew-warning",children:[Object(jsx_runtime.jsxs)("h4",{children:[Object(jsx_runtime.jsx)(icons.bb,{style:{fontSize:24,marginRight:4,color:"var(--warning)"}})," ","Adjust your funnel definition to improve correlation analysis",Object(jsx_runtime.jsx)(CloseOutlined.a,{className:"close-button",onClick:hideSkewWarning})]}),Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("b",{children:"Tips for adjusting your funnel:"}),Object(jsx_runtime.jsxs)("ol",{children:[Object(jsx_runtime.jsx)("li",{children:"Adjust your first funnel step to be more specific. For example, choose a page or an event that occurs less frequently."}),Object(jsx_runtime.jsx)("li",{children:"Choose an event that happens more frequently for subsequent funnels steps."})]})]})]}),Object(jsx_runtime.jsx)(FunnelCorrelationTable_FunnelCorrelationTable,{}),!correlationFeedbackHidden&&Object(jsx_runtime.jsxs)("div",{className:"border rounded p-4 space-y-2 mt-4",children:[Object(jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[Object(jsx_runtime.jsxs)("h4",{className:"text-muted-alt",children:[Object(jsx_runtime.jsx)(CommentOutlined.a,{style:{marginRight:4}}),"Was this correlation analysis report useful?"]}),Object(jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[!!correlationFeedbackRating&&Object(jsx_runtime.jsx)("i",{className:"text-success mr-2",children:"Thanks for your feedback!"}),[[5,"😍"],[4,"😀"],[3,"😴"],[2,"😔"],[1,"👎"]].map(((content,index)=>Object(jsx_runtime.jsx)(src.LemonButton,{active:correlationFeedbackRating===content[0],onClick:()=>{correlationFeedbackRating===content[0]?setCorrelationFeedbackRating(0):(setCorrelationFeedbackRating(content[0]),setTimeout((()=>{var _detailedFeedbackRef$;return null===(_detailedFeedbackRef$=detailedFeedbackRef.current)||void 0===_detailedFeedbackRef$?void 0:_detailedFeedbackRef$.focus()}),100))},children:content[1]},index))),Object(jsx_runtime.jsx)(src.LemonButton,{icon:Object(jsx_runtime.jsx)(icons.D,{}),onClick:hideCorrelationAnalysisFeedback,status:"stealth"})]})]}),correlationDetailedFeedbackVisible?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("form",{onSubmit:sendCorrelationAnalysisFeedback,className:"space-y-2",children:[Object(jsx_runtime.jsx)(src.LemonTextArea,{onBlur:e=>setCorrelationDetailedFeedback(e.target.value),placeholder:"Optional. Help us by sharing details around your experience...",ref:detailedFeedbackRef,onPressCmdEnter:()=>{var _detailedFeedbackRef$2;null===(_detailedFeedbackRef$2=detailedFeedbackRef.current)||void 0===_detailedFeedbackRef$2||_detailedFeedbackRef$2.blur(),sendCorrelationAnalysisFeedback()}}),Object(jsx_runtime.jsx)("div",{className:"flex justify-end",children:Object(jsx_runtime.jsx)(src.LemonButton,{"data-attr":"correlation-analysis-share-feedback",type:"primary",htmlType:"submit",children:"Share feedback"})})]})}):null]}),Object(jsx_runtime.jsx)(FunnelPropertyCorrelationTable,{})]})})]})};var FunnelInsight=__webpack_require__("./frontend/src/scenes/insights/views/Funnels/FunnelInsight.tsx"),ExportButton=__webpack_require__("./frontend/src/lib/components/ExportButton/ExportButton.tsx");const VIEW_MAP={[`${types.F.TRENDS}`]:Object(jsx_runtime.jsx)(Trends.a,{view:types.F.TRENDS}),[`${types.F.STICKINESS}`]:Object(jsx_runtime.jsx)(Trends.a,{view:types.F.STICKINESS}),[`${types.F.LIFECYCLE}`]:Object(jsx_runtime.jsx)(Trends.a,{view:types.F.LIFECYCLE}),[`${types.F.FUNNELS}`]:Object(jsx_runtime.jsx)(FunnelInsight.a,{}),[`${types.F.RETENTION}`]:Object(jsx_runtime.jsx)(RetentionContainer.a,{}),[`${types.F.PATHS}`]:Object(jsx_runtime.jsx)(Paths.c,{})};function InsightContainer(_ref){let{disableHeader:disableHeader,disableTable:disableTable,disableCorrelationTable:disableCorrelationTable,disableLastComputation:disableLastComputation,insightMode:insightMode}=_ref;const{insightProps:insightProps,canEditInsight:canEditInsight,insightLoading:insightLoading,activeView:activeView,filters:filters,timedOutQueryId:timedOutQueryId,erroredQueryId:erroredQueryId,exporterResourceParams:exporterResourceParams,isUsingSessionAnalysis:isUsingSessionAnalysis}=Object(index_esm.useValues)(insightLogic.c),{areFiltersValid:areFiltersValid,isValidFunnel:isValidFunnel,areExclusionFiltersValid:areExclusionFiltersValid}=Object(index_esm.useValues)(Object(funnelLogic.a)(insightProps)),BlockingEmptyState=(()=>{if(insightLoading&&null===timedOutQueryId)return Object(jsx_runtime.jsx)("div",{className:"text-center",children:Object(jsx_runtime.jsx)(Animation.a,{type:animations.a.LaptopHog})});if(activeView===types.F.FUNNELS){if(!areFiltersValid)return Object(jsx_runtime.jsx)(EmptyStates.b,{actionable:insightMode===types.G.Edit||disableTable});if(!areExclusionFiltersValid)return Object(jsx_runtime.jsx)(EmptyStates.a,{});if(!isValidFunnel&&!insightLoading)return Object(jsx_runtime.jsx)(EmptyStates.c,{})}return erroredQueryId?Object(jsx_runtime.jsx)(EmptyStates.d,{queryId:erroredQueryId}):timedOutQueryId?Object(jsx_runtime.jsx)(EmptyStates.e,{isLoading:insightLoading,queryId:timedOutQueryId}):null})();return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isUsingSessionAnalysis?Object(jsx_runtime.jsx)("div",{className:"mb-4",children:Object(jsx_runtime.jsxs)(AlertMessage.a,{type:"info",children:["When using sessions and session properties, events without session IDs will be excluded from the set of results."," ",Object(jsx_runtime.jsx)("a",{href:"https://posthog.com/docs/user-guides/sessions",children:"Learn more about sessions."})]})}):null,Object(jsx_runtime.jsx)(card.a,{title:disableHeader?null:Object(jsx_runtime.jsx)(InsightDisplayConfig,{activeView:activeView,insightMode:insightMode||types.G.View,filters:filters,disableTable:!!disableTable}),"data-attr":"insights-graph",className:"insights-graph-container",children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)(row.a,{className:Object(clsx_m.default)("insights-graph-header",{funnels:Object(sharedUtils.e)(filters)}),align:"middle",justify:"space-between",children:[!disableLastComputation&&Object(jsx_runtime.jsx)(col.a,{children:Object(jsx_runtime.jsx)(ComputationTimeWithRefresh,{})}),Object(jsx_runtime.jsxs)(col.a,{children:[Object(sharedUtils.e)(filters)?Object(jsx_runtime.jsx)(FunnelCanvasLabel.a,{}):null,Object(sharedUtils.g)(filters)?Object(jsx_runtime.jsx)(PathsLabel.a,{}):null,Object(jsx_runtime.jsx)(InsightLegend.b,{})]})]}),BlockingEmptyState||(Object(sharedUtils.c)(filters)&&filters.show_legend?Object(jsx_runtime.jsxs)(row.a,{className:"insights-graph-container-row",wrap:!1,children:[Object(jsx_runtime.jsx)(col.a,{className:"insights-graph-container-row-left",children:VIEW_MAP[activeView]}),Object(jsx_runtime.jsx)(col.a,{className:"insights-graph-container-row-right",children:Object(jsx_runtime.jsx)(InsightLegend.a,{})})]}):VIEW_MAP[activeView])]})}),function renderTable(){return Object(sharedUtils.e)(filters)&&null===erroredQueryId&&null===timedOutQueryId&&areFiltersValid&&isValidFunnel&&filters.funnel_viz_type===types.B.Steps&&!disableTable?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("h2",{className:"my-4 mx-0",children:"Detailed results"}),Object(jsx_runtime.jsx)(FunnelStepsTable,{})]}):!Object(sharedUtils.j)(filters)||filters.display&&((null==filters?void 0:filters.display)===types.k.ActionsTable||(null==filters?void 0:filters.display)===types.k.ActionsBarValue)||disableTable?null:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[exporterResourceParams&&Object(jsx_runtime.jsxs)("div",{className:"flex items-center justify-between my-4 mx-0",children:[Object(jsx_runtime.jsx)("h2",{className:"m-0",children:"Detailed results"}),Object(jsx_runtime.jsx)(Tooltip.a,{title:"Export this table in CSV format",placement:"left",children:Object(jsx_runtime.jsx)(ExportButton.a,{type:"secondary",status:"primary",items:[{export_format:types.t.CSV,export_context:exporterResourceParams}]})})]}),Object(jsx_runtime.jsx)(index_esm.BindLogic,{logic:trendsLogic.a,props:insightProps,children:Object(jsx_runtime.jsx)(InsightsTable.a,{isLegend:!0,filterKey:Object(sharedUtils.j)(filters)?`trends_${activeView}`:"",canEditSeriesNameInline:Object(sharedUtils.j)(filters)&&!filters.formula&&insightMode===types.G.Edit,canCheckUncheckSeries:canEditInsight})})]})}(),!disableCorrelationTable&&activeView===types.F.FUNNELS&&Object(jsx_runtime.jsx)(FunnelCorrelation_FunnelCorrelation,{})]})}try{InsightContainer.displayName="InsightContainer",InsightContainer.__docgenInfo={description:"",displayName:"InsightContainer",props:{disableHeader:{defaultValue:null,description:"",name:"disableHeader",required:!1,type:{name:"boolean"}},disableTable:{defaultValue:null,description:"",name:"disableTable",required:!1,type:{name:"boolean"}},disableCorrelationTable:{defaultValue:null,description:"",name:"disableCorrelationTable",required:!1,type:{name:"boolean"}},disableLastComputation:{defaultValue:null,description:"",name:"disableLastComputation",required:!1,type:{name:"boolean"}},insightMode:{defaultValue:null,description:"",name:"insightMode",required:!1,type:{name:"enum",value:[{value:'"edit"'},{value:'"view"'},{value:'"subscriptions"'},{value:'"sharing"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"]={docgenInfo:InsightContainer.__docgenInfo,name:"InsightContainer",path:"frontend/src/scenes/insights/InsightContainer.tsx#InsightContainer"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/CorrelationMatrix.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".correlation-matrix .ant-modal-body{display:flex;justify-content:center}.correlation-matrix .correlation-table-wrapper table{border-radius:var(--radius);border:1px solid var(--border);border-collapse:separate;border-spacing:0;margin:0 auto}.correlation-matrix .correlation-table-wrapper table td{padding:.5rem 1rem;border-left:1px solid var(--border);border-top:1px solid var(--border);text-align:center}.correlation-matrix .correlation-table-wrapper table td .percentage{font-weight:700;padding-bottom:.25rem}.correlation-matrix .correlation-table-wrapper table td:first-child{border-left:none}.correlation-matrix .correlation-table-wrapper table .table-title{color:var(--muted-alt)}.correlation-matrix .correlation-table-wrapper table .table-title td{border-top:none}.correlation-matrix .correlation-table-wrapper table .horizontal-header,.correlation-matrix .correlation-table-wrapper table thead{font-weight:700;background-color:var(--antd-table-background-dark);text-transform:uppercase;color:var(--muted)}.correlation-matrix .correlation-table-wrapper table tbody td:not(.horizontal-header){text-align:right}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelation.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".funnel-correlation{margin-bottom:3rem}.funnel-correlation .skew-warning{margin-top:1rem;line-height:2em;border:1px solid var(--warning)}.funnel-correlation .skew-warning .ant-card-body{padding:.5rem 1rem}.funnel-correlation .skew-warning h4{font-size:1.1em;display:flex;align-items:center;border-bottom:1px solid var(--border);padding:.5rem 1rem;margin-left:-1rem;margin-right:-1rem;position:relative}.funnel-correlation .skew-warning h4 .close-button{position:absolute;right:16px;color:var(--muted)!important;cursor:pointer}.funnel-correlation .skew-warning b{padding-bottom:.5rem;font-weight:var(--font-medium)}",""]),module.exports=exports},"./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@4.3.0_dhonik3q6ff6ozbzdscnovq2ka/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/sass-loader@10.3.1_sass@1.56.0+webpack@4.46.0/node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/insights/views/Funnels/FunnelCorrelationTable.scss":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".funnel-correlation-table{margin-top:1rem;border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}.funnel-correlation-table .ant-table thead th{border-bottom:1px solid var(--border)}.funnel-correlation-table .funnel-correlation-header{background:#f2f2f2;display:flex;align-items:center;align-self:stretch;padding:.25rem .5rem;justify-content:space-between;align-content:space-between;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}.funnel-correlation-table .funnel-correlation-header .table-header{font-style:normal;font-weight:700;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;color:var(--default)}.funnel-correlation-table .funnel-correlation-header .table-options{display:flex;flex-grow:1;justify-content:flex-end;align-items:center}.funnel-correlation-table .funnel-correlation-header .table-options .title{font-family:Inter;font-style:normal;font-weight:600;font-size:11px;line-height:16px;display:flex;align-items:center;letter-spacing:.02em;text-transform:uppercase;margin:5px;color:rgba(0,0,0,.5)}.funnel-correlation-table .column-info{color:var(--muted-alt);cursor:pointer;padding-left:4px}.funnel-correlation-table .nested-properties-table{margin:1rem;border:1px solid var(--border);border-radius:var(--radius)}.funnel-correlation-table .nested-properties-table thead th{border-bottom:1px solid var(--border)}",""]),module.exports=exports}}]);