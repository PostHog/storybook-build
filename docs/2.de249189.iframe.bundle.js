(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./frontend/src/scenes/data-management/DataManagementPageHeader.tsx":function(se,b,e){"use strict";e.d(b,"a",function(){return G});var K=e("./frontend/src/lib/components/PageHeader.tsx"),k=e("./node_modules/react/index.js"),h=e.n(k),N=e("./frontend/src/scenes/data-management/DataManagementPageTabs.tsx"),y=e("./frontend/src/lib/components/LemonTag/LemonTag.tsx");function G($){var t=$.activeTab,S=$.hideTabs;return h.a.createElement(h.a.Fragment,null,h.a.createElement(K.a,{title:h.a.createElement("div",{className:"flex-center"},"Data Management",h.a.createElement(y.a,{type:"warning",style:{marginLeft:6,lineHeight:"1.4em"}},"BETA")),caption:"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.",tabbedPage:!0}),!S&&h.a.createElement(N.a,{tab:t}))}try{G.displayName="DataManagementPageHeader",G.__docgenInfo={description:"",displayName:"DataManagementPageHeader",props:{activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"]={docgenInfo:G.__docgenInfo,name:"DataManagementPageHeader",path:"frontend/src/scenes/data-management/DataManagementPageHeader.tsx#DataManagementPageHeader"})}catch($){}},"./frontend/src/scenes/data-management/DataManagementPageTabs.tsx":function(se,b,e){"use strict";e.d(b,"b",function(){return B}),e.d(b,"a",function(){return de});var K=e("./node_modules/core-js/modules/es.array.iterator.js"),k=e.n(K),h=e("./node_modules/core-js/modules/es.array.map.js"),N=e.n(h),y=e("./node_modules/core-js/modules/es.object.entries.js"),G=e.n(y),$=e("./node_modules/core-js/modules/es.object.from-entries.js"),t=e.n($),S=e("./node_modules/core-js/modules/es.object.to-string.js"),oe=e.n(S),q=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),fe=e.n(q),J=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),f=e.n(J),W=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),O=e.n(W),_=e("./node_modules/react/index.js"),E=e.n(_),A=e("./node_modules/kea/lib/index.esm.js"),x=e("./node_modules/antd/es/tabs/index.js"),Q=e("./frontend/src/scenes/urls.ts"),X=e("./frontend/src/lib/components/Tooltip.tsx"),d=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),le,B;(function(U){U.Actions="actions",U.EventDefinitions="events",U.EventPropertyDefinitions="properties"})(B||(B={}));var Ee=(le={},O()(le,B.EventPropertyDefinitions,Q.a.eventPropertyDefinitions()),O()(le,B.EventDefinitions,Q.a.eventDefinitions()),O()(le,B.Actions,Q.a.actions()),le),ve=Object(A.kea)({path:["scenes","events","eventsTabsLogic"],actions:{setTab:function(w){return{tab:w}}},reducers:{tab:[B.EventDefinitions,{setTab:function(w,Y){var V=Y.tab;return V}}]},actionToUrl:function(){return{setTab:function(Y){var V=Y.tab;return Ee[V]||Q.a.events()}}},urlToAction:function(w){var Y=w.actions,V=w.values;return Object.fromEntries(Object.entries(Ee).map(function(ee){var Z=f()(ee,2),pe=Z[0],ie=Z[1];return[ie,function(){V.tab!==pe&&Y.setTab(pe)}]}))}});function de(U){var w=U.tab,Y=Object(A.useActions)(ve),V=Y.setTab;return E.a.createElement(x.a,{tabPosition:"top",animated:!1,activeKey:w,onTabClick:function(Z){return V(Z)}},E.a.createElement(x.a.TabPane,{tab:E.a.createElement("span",{"data-attr":"data-management-events-tab"},"Events"),key:B.EventDefinitions}),E.a.createElement(x.a.TabPane,{tab:E.a.createElement("span",{"data-attr":"data-management-actions-tab"},"Actions",E.a.createElement(X.a,{title:"Actions consist of one or more events that you have decided to put into a deliberately-labeled bucket. They're used in insights and dashboards."},E.a.createElement(d.a,{style:{marginLeft:8,marginRight:0}}))),key:B.Actions}),E.a.createElement(x.a.TabPane,{tab:E.a.createElement("span",{"data-attr":"data-management-event-properties-tab"},"Properties",E.a.createElement(X.a,{title:"Properties are additional data sent along with an event capture. Use properties to understand additional information about events and the actors that generate them."},E.a.createElement(d.a,{style:{marginLeft:8,marginRight:0}}))),key:B.EventPropertyDefinitions}))}try{de.displayName="DataManagementPageTabs",de.__docgenInfo={description:"",displayName:"DataManagementPageTabs",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"enum",value:[{value:'"actions"'},{value:'"events"'},{value:'"properties"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"]={docgenInfo:de.__docgenInfo,name:"DataManagementPageTabs",path:"frontend/src/scenes/data-management/DataManagementPageTabs.tsx#DataManagementPageTabs"})}catch(U){}},"./frontend/src/scenes/events/UsageDisabledWarning.tsx":function(se,b,e){"use strict";e.d(b,"a",function(){return N});var K=e("./node_modules/antd/es/alert/index.js"),k=e("./node_modules/react/index.js"),h=e.n(k);function N(y){var G=y.tab;return h.a.createElement(K.a,{type:"info",showIcon:!0,message:"".concat(G," are not enabled for your instance."),description:h.a.createElement(h.a.Fragment,null,"You will still see the list of events and properties, but usage information will be unavailable. If you want to enable event usage please set the follow environment variable:"," ",h.a.createElement("pre",{style:{display:"inline"}},"ASYNC_EVENT_PROPERTY_USAGE=1"),". Please note, enabling this environment variable ",h.a.createElement("b",null,"may increase load considerably in your infrastructure"),", particularly if you have a large volume of events.")})}try{N.displayName="UsageDisabledWarning",N.__docgenInfo={description:"",displayName:"UsageDisabledWarning",props:{tab:{defaultValue:null,description:"",name:"tab",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"]={docgenInfo:N.__docgenInfo,name:"UsageDisabledWarning",path:"frontend/src/scenes/events/UsageDisabledWarning.tsx#UsageDisabledWarning"})}catch(y){}},"./frontend/src/scenes/events/VolumeTable.scss":function(se,b,e){"use strict";var K=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),k=e.n(K),h=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/VolumeTable.scss"),N=e.n(h),y={};y.insert="head",y.singleton=!1;var G=k()(N.a,y),$=N.a.locals||{}},"./frontend/src/scenes/events/VolumeTable.tsx":function(se,b,e){"use strict";e.d(b,"a",function(){return ie});var K=e("./node_modules/core-js/modules/es.symbol.js"),k=e("./node_modules/core-js/modules/es.symbol.description.js"),h=e("./node_modules/core-js/modules/es.array.map.js"),N=e("./node_modules/core-js/modules/es.function.name.js"),y=e("./node_modules/core-js/modules/es.regexp.exec.js"),G=e("./node_modules/core-js/modules/es.string.ends-with.js"),$=e("./node_modules/core-js/modules/es.string.search.js"),t=e("./node_modules/core-js/modules/es.string.starts-with.js"),S=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),oe=e.n(S),q=e("./node_modules/antd/es/button/index.js"),fe=e("./node_modules/antd/es/input/index.js"),J=e("./node_modules/@ant-design/icons/es/icons/WarningOutlined.js"),f=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),W=e("./node_modules/@ant-design/icons/es/icons/ArrowRightOutlined.js"),O=e("./node_modules/antd/lib/table/index.js"),_=e.n(O),E=e("./node_modules/fuse.js/dist/fuse.esm.js"),A=e("./node_modules/kea/lib/index.esm.js"),x=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),Q=e("./frontend/src/lib/utils.tsx"),X=e("./node_modules/react/index.js"),d=e.n(X),le=e("./frontend/src/scenes/userLogic.ts"),B=e("./frontend/src/types.ts"),Ee=e("./frontend/src/scenes/events/VolumeTable.scss"),ve=e("./frontend/src/scenes/events/definitions/definitionDrawerLogic.ts"),de=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),U=e("./frontend/src/scenes/events/Owner.tsx"),w=e("./node_modules/antd/es/row/index.js"),Y=e("./frontend/src/models/eventDefinitionsModel.ts");function V(F){var C=F.id,H=F.description,R=F.type,me=Object(A.useActions)(Y.a),ce=me.updateDescription,_e=Object(X.useState)(H),te=oe()(_e,2),ne=te[0],z=te[1],ae=Object(X.useState)(!1),ue=oe()(ae,2),M=ue[0],g=ue[1];return Object(X.useEffect)(function(){z(H)},[H]),d.a.createElement(d.a.Fragment,null,d.a.createElement(w.a,null,d.a.createElement(fe.a.TextArea,{value:ne||"",style:{paddingLeft:0},bordered:M,onClick:function(c){c.stopPropagation(),g(!0)},placeholder:"Click to add description",onChange:function(c){return z(c.target.value)},onKeyDown:function(c){c.key==="Enter"&&(g(!1),ce(C,ne,R))},autoSize:!0})),M&&d.a.createElement(w.a,{style:{float:"right",marginTop:8}},d.a.createElement(q.a,{size:"small",style:{marginRight:8},onClick:function(c){c.stopPropagation(),g(!1),z(H)}},"Cancel"),d.a.createElement(q.a,{type:"primary",size:"small",onClick:function(c){c.stopPropagation(),z(ne),g(!1),ce(C,ne,R)}},"Save")))}try{V.displayName="VolumeTableRecordDescription",V.__docgenInfo={description:"",displayName:"VolumeTableRecordDescription",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/definitions/VolumeTableRecordDescription.tsx#VolumeTableRecordDescription"]={docgenInfo:V.__docgenInfo,name:"VolumeTableRecordDescription",path:"frontend/src/scenes/events/definitions/VolumeTableRecordDescription.tsx#VolumeTableRecordDescription"})}catch(F){}var ee=e("./frontend/src/lib/components/Tooltip.tsx"),Z=function(C){return!!x.f.event[C]},pe=function(C,H){return new E.a(C,{keys:["eventOrProp.name"],threshold:.3}).search(H).map(function(R){return R.item})};function ie(F){var C=F.type,H=F.data,R=Object(X.useState)(!1),me=oe()(R,2),ce=me[0],_e=me[1],te=Object(X.useState)([]),ne=oe()(te,2),z=ne[0],ae=ne[1],ue=Object(A.useValues)(le.a),M=ue.hasAvailableFeature,g=Object(A.useActions)(ve.a),L=g.openDrawer,c=M(B.c.INGESTION_TAXONOMY),j=[{title:"".concat(Object(Q.j)(C)," name"),render:function(l,s){var r;return d.a.createElement("span",null,d.a.createElement("div",{style:{display:"flex",alignItems:"baseline",paddingBottom:4}},d.a.createElement("span",{className:"ph-no-capture",style:{paddingRight:8}},d.a.createElement(x.b,{style:c?{fontWeight:"bold"}:{},value:s.eventOrProp.name})),M(B.c.TAGGING)?d.a.createElement(de.a,{tags:s.eventOrProp.tags||[],staticOnly:!0}):null),c&&(Z(s.eventOrProp.name)?null:d.a.createElement(V,{id:s.eventOrProp.id,description:s.eventOrProp.description,type:C})),(r=s.warnings)===null||r===void 0?void 0:r.map(function(n){return d.a.createElement(ee.a,{key:n,color:"orange",title:d.a.createElement(d.a.Fragment,null,d.a.createElement("b",null,"Warning!")," ",n)},d.a.createElement(J.a,{style:{color:"var(--warning)",marginLeft:6}}))}))},sorter:function(l,s){return(""+l.eventOrProp.name).localeCompare(s.eventOrProp.name||"")},filters:[{text:"Has warnings",value:"warnings"},{text:"No warnings",value:"noWarnings"}],onFilter:function(l,s){return l==="warnings"?!!s.warnings.length:!s.warnings.length}},C==="event"&&c?{title:"Owner",render:function(l,s){var r,n=(r=s.eventOrProp)===null||r===void 0?void 0:r.owner;return Z(s.eventOrProp.name)?d.a.createElement(d.a.Fragment,null,"-"):d.a.createElement(U.a,{user:n})}}:{},C==="event"?{title:function(){return d.a.createElement(ee.a,{placement:"right",title:"Total number of events over the last 30 days. Can be delayed by up to an hour."},"30 day volume (delayed by up to an hour)",d.a.createElement(f.a,{className:"info-indicator"}))},render:function(l,s){return d.a.createElement("span",{className:"ph-no-capture"},Object(Q.q)(s.eventOrProp.volume_30_day))},sorter:function(l,s){return l.eventOrProp.volume_30_day==s.eventOrProp.volume_30_day,(l.eventOrProp.volume_30_day||-1)-(s.eventOrProp.volume_30_day||-1)}}:{},{title:function(){return d.a.createElement(ee.a,{placement:"right",title:"Number of queries in PostHog that included a filter on this ".concat(C)},"30 day queries (delayed by up to an hour)",d.a.createElement(f.a,{className:"info-indicator"}))},render:function(l,s){return d.a.createElement("span",{className:"ph-no-capture"},Object(Q.q)(s.eventOrProp.query_usage_30_day))},sorter:function(l,s){return l.eventOrProp.query_usage_30_day==s.eventOrProp.query_usage_30_day,(l.eventOrProp.query_usage_30_day||-1)-(s.eventOrProp.query_usage_30_day||-1)}},c?{render:function(l,s){return d.a.createElement(d.a.Fragment,null,Z(s.eventOrProp.name)?null:d.a.createElement(q.a,{type:"link",icon:d.a.createElement(W.a,{style:{color:"#5375FF"}}),onClick:function(){return L(C,s.eventOrProp.id)}}))}}:{}];return Object(X.useEffect)(function(){ae(H.map(function(o){var l,s,r={eventOrProp:o};return r.warnings=[],!((l=o.name)===null||l===void 0)&&l.endsWith(" ")&&r.warnings.push("This ".concat(C," ends with a space.")),!((s=o.name)===null||s===void 0)&&s.startsWith(" ")&&r.warnings.push("This ".concat(C," starts with a space.")),r})||[])},[H]),d.a.createElement(d.a.Fragment,null,d.a.createElement(fe.a.Search,{allowClear:!0,enterButton:!0,style:{maxWidth:400,width:"initial",flexGrow:1},onChange:function(l){_e(l.target.value)},placeholder:"Filter ".concat(C==="property"?"properties":"events","....")}),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(_.a,{dataSource:ce?pe(z,ce):z,columns:j,rowKey:function(l){return l.eventOrProp.name},size:"small",style:{marginBottom:"4rem"},pagination:{pageSize:100,hideOnSinglePage:!0},onRow:function(l){return c&&!Z(l.eventOrProp.name)?{onClick:function(){return L(C,l.eventOrProp.id)},style:{cursor:"pointer"}}:{}}}))}try{ie.displayName="VolumeTable",ie.__docgenInfo={description:"",displayName:"VolumeTable",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"property"'},{value:'"event"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"(PropertyDefinition | EventDefinition)[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/VolumeTable.tsx#VolumeTable"]={docgenInfo:ie.__docgenInfo,name:"VolumeTable",path:"frontend/src/scenes/events/VolumeTable.tsx#VolumeTable"})}catch(F){}},"./frontend/src/scenes/events/definitions/DefinitionDrawer.tsx":function(se,b,e){"use strict";e.d(b,"a",function(){return ue});var K=e("./node_modules/core-js/modules/es.array.filter.js"),k=e("./node_modules/core-js/modules/es.array.includes.js"),h=e("./node_modules/core-js/modules/es.function.name.js"),N=e("./node_modules/core-js/modules/es.string.includes.js"),y=e("./node_modules/kea/lib/index.esm.js"),G=e("./frontend/src/lib/components/Drawer.tsx"),$=e("./node_modules/react/index.js"),t=e.n($),S=e("./frontend/src/scenes/events/definitions/definitionDrawerLogic.ts"),oe=e("./node_modules/antd/lib/typography/Title.js"),q=e.n(oe),fe=e("./frontend/src/scenes/events/VolumeTable.scss"),J=e("./node_modules/antd/es/collapse/index.js"),f=e("./node_modules/antd/es/button/index.js"),W=e("./node_modules/antd/es/alert/index.js"),O=e("./node_modules/antd/es/row/index.js"),_=e("./node_modules/antd/es/col/index.js"),E=e("./frontend/src/lib/components/ObjectTags/ObjectTags.tsx"),A=e("./frontend/src/lib/utils.tsx"),x=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Q=e("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),X=e("./node_modules/core-js/modules/es.symbol.js"),d=e("./node_modules/core-js/modules/es.symbol.description.js"),le=e("./node_modules/core-js/modules/es.array.concat.js"),B=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),Ee=e.n(B),ve=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),de=e.n(ve),U=e("./node_modules/antd/es/input/index.js"),w=e("./node_modules/antd/es/table/index.js"),Y=e("./node_modules/use-debounce/esm/useDebouncedCallback.js"),V=e("./frontend/src/types.ts"),ee=e("./frontend/src/scenes/userLogic.ts");function Z(){var M,g=Object(y.useValues)(S.a),L=g.eventPropertiesDefinitions,c=g.eventsSnippet,j=g.eventPropertiesDefinitionTags,o=g.tagLoading,l=Object(y.useActions)(S.a),s=l.setEventPropertyDescription,r=l.saveAll,n=l.setEventPropertyDefinitionUpdateList,a=l.setEventPropertyDefinition,i=Object(y.useValues)(ee.a),m=i.hasAvailableFeature,u=(M=c[0])===null||M===void 0?void 0:M.properties,v=[{title:"Property",key:"property",render:function(P){var D=P.name;return t.a.createElement("span",{className:"text-default"},D)}},{title:"Description",key:"description",render:function(P){var D=P.description,p=P.id,re=Object($.useState)(D),I=Ee()(re,2),ge=I[0],Oe=I[1],Pe=Object(Y.a)(function(De){s(De,p)},200);return t.a.createElement(U.a.TextArea,{placeholder:"Add description",value:ge||"",onChange:function(ye){Oe(ye.target.value),Pe(ye.target.value)},onKeyDown:function(ye){ye.key==="Enter"&&r()}})}}].concat(de()(m(V.c.TAGGING)?[{title:"Tags",key:"tags",render:function(P){var D=P.id,p=P.tags;return t.a.createElement(E.a,{id:D,tags:p||[],onChange:function(I,ge){n(D),a({tags:ge},D)},saving:o,tagsAvailable:j==null?void 0:j.filter(function(re){return!(p!=null&&p.includes(re))})})}}]:[]),[{title:"Example",key:"example",render:function(P){var D=P.name,p=u[D];return p=Array.isArray(p)||p instanceof Object?JSON.stringify(p).substr(0,140):p,t.a.createElement("div",{style:{backgroundColor:"#F0F0F0",padding:"4px, 15px",textAlign:"center"}},t.a.createElement("span",{style:{fontSize:10,fontWeight:400,fontFamily:"monaco"}},p))}}]);return t.a.createElement(t.a.Fragment,null,t.a.createElement(O.a,{style:{paddingBottom:16}},t.a.createElement("span",{className:"text-default text-muted"},"Top properties that are sent with this event. Please note that description and tags are shared across events. Posthog properties are ",t.a.createElement("b",null,"excluded")," from this list.")),t.a.createElement(w.a,{dataSource:L,columns:v,rowKey:function(P){return P.id},size:"small",tableLayout:"fixed",pagination:{pageSize:5,hideOnSinglePage:!0}}))}var pe=e("./node_modules/core-js/modules/es.array.find.js"),ie=e("./node_modules/core-js/modules/es.array.map.js"),F=e("./node_modules/antd/es/select/index.js"),C=e("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),H=e("./frontend/src/scenes/events/Owner.tsx");function R(M){var g=M.owner,L=Object(y.useValues)(C.a),c=L.members,j=Object(y.useActions)(S.a),o=j.changeOwner;return t.a.createElement(F.a,{className:"owner-select",placeholder:t.a.createElement(H.a,{user:g}),style:{minWidth:200},dropdownClassName:"owner-option",onChange:function(s){var r,n=(r=c.find(function(a){return a.user.id===s}))===null||r===void 0?void 0:r.user;n&&o(n)}},c.map(function(l){return t.a.createElement(F.a.Option,{key:l.user.id,value:l.user.id},t.a.createElement(H.a,{user:l.user}))}))}try{R.displayName="DefinitionOwnerDropdown",R.__docgenInfo={description:"",displayName:"DefinitionOwnerDropdown",props:{owner:{defaultValue:null,description:"",name:"owner",required:!0,type:{name:"UserBasicType | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/events/definitions/DefinitionOwnerDropdown.tsx#DefinitionOwnerDropdown"]={docgenInfo:R.__docgenInfo,name:"DefinitionOwnerDropdown",path:"frontend/src/scenes/events/definitions/DefinitionOwnerDropdown.tsx#DefinitionOwnerDropdown"})}catch(M){}function me(){var M=Object(y.useValues)(S.a),g=M.description,L=Object(y.useActions)(S.a),c=L.setDescription,j=L.saveAll;return t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{style:{flexDirection:"column",minWidth:300}},t.a.createElement("h4",{className:"l4"},"Description"),t.a.createElement(U.a.TextArea,{style:{minHeight:108,marginBottom:8},placeholder:"Add description",value:g||"",onChange:function(l){c(l.target.value)},onKeyDown:function(l){l.key==="Enter"&&j()}})))}var ce=e("./frontend/src/lib/components/Property.tsx"),_e=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),te=e("./frontend/src/scenes/persons/PersonHeader.tsx");function ne(){var M=Object(y.useValues)(S.a),g=M.eventsSnippet,L=[{title:"Person",key:"person",render:function(j){var o=j.person;return o?t.a.createElement(te.a,{withIcon:!0,person:o}):{props:{colSpan:0}}}},{title:"URL",key:"url",eventProperties:["$current_url","$screen_name"],span:4,render:function(j){var o=j.properties;return o?t.a.createElement(ce.a,{value:o.$current_url?o.$current_url:o.$screen_name}):{props:{colSpan:0}}},ellipsis:!0},{title:"Source",key:"source",render:function(j){var o=j.properties;return o?t.a.createElement(ce.a,{value:o.$browser}):{props:{colSpan:0}}}},{title:"When",key:"when",render:function(j){var o=j.timestamp;return o?t.a.createElement(_e.b,{time:o,showSeconds:!0}):{props:{colSpan:0}}},ellipsis:!0}];return t.a.createElement(t.a.Fragment,null,g&&t.a.createElement("div",{style:{fontWeight:400,paddingTop:15}},t.a.createElement(w.a,{dataSource:g,columns:L,key:"default",rowKey:function(j){return j.id},size:"small",pagination:!1})))}var z=e("./frontend/src/scenes/events/UsageDisabledWarning.tsx"),ae=e("./frontend/src/lib/components/Tooltip.tsx");function ue(){var M,g=Object(y.useValues)(S.a),L=g.drawerState,c=g.definition,j=g.tagLoading,o=g.type,l=g.eventDefinitionTags,s=g.propertyDefinitionTags,r=Object(y.useActions)(S.a),n=r.closeDrawer,a=r.setDefinition,i=r.saveAll,m=Object(y.useValues)(Q.a),u=m.preflight,v=Object(y.useValues)(ee.a),T=v.hasAvailableFeature,P=J.a.Panel,D=o==="event"?l:s;return t.a.createElement(t.a.Fragment,null,c&&t.a.createElement("div",{className:"definition-drawer"},t.a.createElement(G.a,{placement:"right",headerStyle:{paddingBottom:0},title:t.a.createElement(q.a,{level:3},c.name),visible:L,onClose:n,width:"60vw",bodyStyle:{padding:14,paddingTop:0},className:"definition-drawer",footer:t.a.createElement(f.a,{style:{float:"right"},type:"primary",onClick:i},"Save")},u&&!(u!=null&&u.is_event_property_usage_enabled)?t.a.createElement("div",{style:{marginTop:8}},t.a.createElement(z.a,{tab:o==="event"?"Events Stats":"Property Stats"})):c.volume_30_day===null&&t.a.createElement(t.a.Fragment,null,t.a.createElement(W.a,{type:"warning",message:"We haven't been able to get usage and volume data yet. Please check later."})),t.a.createElement(J.a,{defaultActiveKey:["1"],expandIconPosition:"right",ghost:!0,style:{borderBottom:"1px solid #D9D9D9"}},t.a.createElement(P,{header:"General",key:"1",className:"l3"},t.a.createElement(O.a,{className:"panel-wrapper"},t.a.createElement(_.a,{style:{marginRight:14}},t.a.createElement(me,null)),t.a.createElement(_.a,null,T(V.c.TAGGING)&&t.a.createElement(O.a,null,t.a.createElement(_.a,null,t.a.createElement("h4",{className:"l4"},"Tags"),t.a.createElement(E.a,{tags:c.tags||[],onChange:function(re,I){return a({tags:I})},saving:j,tagsAvailable:D==null?void 0:D.filter(function(p){var re;return!(!((re=c.tags)===null||re===void 0)&&re.includes(p))})}))),o==="event"&&t.a.createElement(O.a,null,t.a.createElement("div",{style:{paddingTop:16}},t.a.createElement("h4",{className:"l4"},"Owner"),t.a.createElement(R,{owner:c.owner||null}))))),t.a.createElement(O.a,{className:"detail-status"},o==="event"&&t.a.createElement("div",{style:{paddingRight:32,textAlign:"center"}},t.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",textAlign:"center"}},t.a.createElement("h4",{className:"l4",style:{marginBottom:0}},"Total count (30 days)"),t.a.createElement(ae.a,{placement:"right",title:"Total number of events over the last 30 days. Can be delayed by up to an hour."},t.a.createElement(x.a,{className:"info-indicator"}))),t.a.createElement("span",null,c.volume_30_day||"-")),t.a.createElement("div",{style:{textAlign:"center"}},t.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},t.a.createElement("h4",{className:"l4",style:{marginBottom:0}},"Query Usage (30 days)"),t.a.createElement(ae.a,{placement:"right",title:"Number of queries in PostHog that included a filter on this ".concat(o)},t.a.createElement(x.a,{className:"info-indicator"}))),t.a.createElement("span",null,c.query_usage_30_day||"-")),t.a.createElement("div",null,t.a.createElement("h4",{className:"l4"},"Last modified"),t.a.createElement("span",null,Object(A.M)(c.updated_at||null))),t.a.createElement("div",null,t.a.createElement("h4",{className:"l4"},"Last modified by"),t.a.createElement("span",null,((M=c.updated_by)===null||M===void 0?void 0:M.first_name)||"-"))))),o==="event"&&t.a.createElement(J.a,{defaultActiveKey:["2"],expandIconPosition:"right",ghost:!0},t.a.createElement(P,{header:"Properties",key:"2",className:"l3"},t.a.createElement(Z,null))),t.a.createElement(J.a,{style:{paddingBottom:32},defaultActiveKey:["3"],expandIconPosition:"right",ghost:!0},t.a.createElement(P,{header:"Recent",key:"3",className:"l3 events-table"},t.a.createElement("span",{className:"text-muted",style:{fontWeight:400,fontSize:14}},"Most recent events received"),t.a.createElement(ne,null))))))}},"./frontend/src/scenes/events/definitions/definitionDrawerLogic.ts":function(se,b,e){"use strict";e.d(b,"a",function(){return l});var K=e("./node_modules/core-js/modules/es.symbol.js"),k=e.n(K),h=e("./node_modules/core-js/modules/es.symbol.description.js"),N=e.n(h),y=e("./node_modules/core-js/modules/es.array.concat.js"),G=e.n(y),$=e("./node_modules/core-js/modules/es.array.filter.js"),t=e.n($),S=e("./node_modules/core-js/modules/es.array.find.js"),oe=e.n(S),q=e("./node_modules/core-js/modules/es.array.flat-map.js"),fe=e.n(q),J=e("./node_modules/core-js/modules/es.array.for-each.js"),f=e.n(J),W=e("./node_modules/core-js/modules/es.array.includes.js"),O=e.n(W),_=e("./node_modules/core-js/modules/es.array.iterator.js"),E=e.n(_),A=e("./node_modules/core-js/modules/es.array.map.js"),x=e.n(A),Q=e("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),X=e.n(Q),d=e("./node_modules/core-js/modules/es.function.name.js"),le=e.n(d),B=e("./node_modules/core-js/modules/es.object.keys.js"),Ee=e.n(B),ve=e("./node_modules/core-js/modules/es.object.to-string.js"),de=e.n(ve),U=e("./node_modules/core-js/modules/es.string.includes.js"),w=e.n(U),Y=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),V=e.n(Y),ee=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Z=e.n(ee),pe=e("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ie=e.n(pe),F=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),C=e.n(F),H=e("./node_modules/@babel/runtime/regenerator/index.js"),R=e.n(H),me=e("./node_modules/regenerator-runtime/runtime.js"),ce=e.n(me),_e=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),te=e.n(_e),ne=e("./node_modules/kea/lib/index.esm.js"),z=e("./frontend/src/lib/api.ts"),ae=e("./frontend/src/lib/utils.tsx"),ue=e("./frontend/src/models/eventDefinitionsModel.ts"),M=e("./frontend/src/lib/components/PropertyKeyInfo.tsx"),g=e("./frontend/src/models/propertyDefinitionsModel.ts"),L=e("./frontend/src/scenes/teamLogic.ts"),c=e("./frontend/src/scenes/urls.ts");function j(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),n.push.apply(n,a)}return n}function o(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?j(Object(n),!0).forEach(function(a){C()(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}var l=Object(ne.kea)({path:["scenes","events","definitions","definitionDrawerLogic"],actions:function(){return{openDrawer:function(n,a){return{type:n,id:a}},setDrawerType:function(n){return{type:n}},setDescription:function(n){return{description:n}},changeOwner:function(n){return{owner:n}},setDefinition:function(n){return{definition:n}},setEventPropertyDescription:function(n,a){return{description:n,id:a}},setEventPropertyDefinition:function(n,a){return{propertyDefinition:n,id:a}},setEventPropertyDefinitionUpdateList:function(n){return{id:n}},closeDrawer:!0,setTagLoading:function(n){return{loading:n}},saveAll:!0,setGraphResults:function(n){return{results:n}},setVisibilityById:function(n){return{entry:n}}}},loaders:function(r){var n=r.actions,a=r.values;return{definition:[null,{loadDefinition:function(){var i=te()(R.a.mark(function u(v){var T,P;return R.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return T=v.type,P=v.id,p.next=3,z.a.get("api/projects/@current/".concat(T,"_definitions/").concat(P));case 3:return p.abrupt("return",p.sent);case 4:case"end":return p.stop()}},u)}));function m(u){return i.apply(this,arguments)}return m}(),saveDefinition:function(){var i=te()(R.a.mark(function u(v){var T,P,D,p;return R.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return T=v.definition,P=v.type,P==="event"&&(T.owner=((D=T.owner)===null||D===void 0?void 0:D.id)||null,T.description=a.description),P==="property"&&a.type==="property"&&(T.description=a.description),I.next=5,z.a.update("api/projects/@current/".concat(P,"_definitions/").concat(T.id),T);case 5:return p=I.sent,n.saveDefinitionSuccess(p),I.abrupt("return",p);case 8:case"end":return I.stop()}},u)}));function m(u){return i.apply(this,arguments)}return m}(),closeDrawer:function(){return null}}],eventsSnippet:[[],{loadEventsSnippet:function(){var i=te()(R.a.mark(function u(v){var T,P,D,p;return R.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return T=a.type==="property"?[{key:v==null?void 0:v.name,value:"is_set",operator:"is_set",type:"event"}]:{},P=a.type==="event"?v==null?void 0:v.name:null,D=Object(ae.Bb)(o(o({properties:T},{event:P}),{},{orderBy:["-timestamp"],limit:5})),I.next=5,z.a.get("api/projects/".concat(L.a.values.currentTeamId,"/events/?").concat(D));case 5:return p=I.sent,a.type==="property"&&n.loadEventsSnippetSuccess(p.results),I.abrupt("return",p.results);case 8:case"end":return I.stop()}},u)}));function m(u){return i.apply(this,arguments)}return m}()}],eventPropertiesDefinitions:[[],{loadEventPropertiesDefinitions:function(){var i=te()(R.a.mark(function u(v){var T;return R.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,z.a.get("api/projects/@current/property_definitions/?properties=".concat(v));case 2:return T=D.sent,D.abrupt("return",T.results);case 4:case"end":return D.stop()}},u)}));function m(u){return i.apply(this,arguments)}return m}()}]}},reducers:function(){return{drawerState:[!1,{openDrawer:function(){return!0},closeDrawer:function(){return!1}}],description:["",{setDescription:function(n,a){var i=a.description;return i}}],definition:[null,{setDefinition:function(n,a){var i=a.definition;return o(o({},n),i)}}],tagLoading:[!1,{setTagLoading:function(n,a){var i=a.loading;return i}}],type:["",{setDrawerType:function(n,a){var i=a.type;return i}}],eventPropertiesDefinitions:[[],{setEventPropertyDefinition:function(n,a){var i=a.propertyDefinition,m=a.id,u=n.map(function(v){return v.id===m?o(o({},v),i):v});return u}}],editedEventPropertyDefinitions:[[],{setEventPropertyDefinitionUpdateList:function(n,a){var i=a.id;return i&&!n.includes(i)?[].concat(ie()(n),[i]):ie()(n)}}],graphResults:[[],{setGraphResults:function(n,a){var i=a.results;return i}}]}},selectors:function(){return{eventDefinitionTags:[function(){return[ue.a.selectors.eventDefinitions]},function(r){var n=r.flatMap(function(a){var i=a.tags;return i}).filter(function(a){return!!a});return Object(ae.Db)(n,function(a){return a}).sort()}],eventPropertiesDefinitionTags:[function(r){return[r.eventPropertiesDefinitions]},function(r){var n=r.flatMap(function(a){var i=a.tags;return i}).filter(function(a){return!!a});return Object(ae.Db)(n,function(a){return a}).sort()}],propertyDefinitionTags:[function(){return[g.a.selectors.propertyDefinitions]},function(r){var n=r.flatMap(function(a){var i=a.tags;return i}).filter(function(a){return!!a});return Object(ae.Db)(n,function(a){return a}).sort()}]}},listeners:function(r){var n=r.actions,a=r.values;return{openDrawer:function(m){var u=m.type,v=m.id;n.setDrawerType(u),n.loadDefinition({type:u,id:v})},loadDefinitionSuccess:function(m){var u=m.definition;n.loadEventsSnippet(u),n.setDescription((u==null?void 0:u.description)||"")},loadEventsSnippetSuccess:function(m){var u=m.eventsSnippet,v=Object.keys(u[0].properties).filter(function(T){return!M.f.event[T]});n.loadEventPropertiesDefinitions(v)},saveDefinitionSuccess:function(m){var u=m.definition;a.type==="event"?ue.a.actions.updateEventDefinition(u):g.a.actions.updatePropertyDefinition(u)},changeOwner:function(m){var u=m.owner;n.setDefinition({owner:u})},setEventPropertyDescription:function(m){var u=m.description,v=m.id;n.setEventPropertyDefinition({description:u},v),n.setEventPropertyDefinitionUpdateList(v)},saveAll:function(){n.saveDefinition({definition:o({},a.definition),type:a.type}),a.editedEventPropertyDefinitions.forEach(function(m){var u=a.eventPropertiesDefinitions.find(function(v){return v.id===m});n.saveDefinition({definition:o({},u),type:"property"})}),n.closeDrawer()}}},actionToUrl:function(r){var n=r.values;return{openDrawer:function(i){var m=i.type,u=i.id;return m==="property"?c.a.eventPropertyDefinition(u):c.a.eventDefinition(u)},closeDrawer:function(){return n.type==="property"?c.a.eventPropertyDefinitions():c.a.eventDefinitions()}}},urlToAction:function(r){var n=r.actions;return{"/data-management/events/:id":function(i){var m=i.id;m&&n.openDrawer("event",m)},"/data-management/event-properties/:id":function(i){var m=i.id;m&&n.openDrawer("property",m)}}}})},"./node_modules/antd/lib/typography/Title.js":function(se,b,e){"use strict";var K=e("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),k=e("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=K(e("./node_modules/@babel/runtime/helpers/extends.js")),N=S(e("./node_modules/react/index.js")),y=K(e("./node_modules/antd/lib/_util/devWarning.js")),G=K(e("./node_modules/antd/lib/typography/Base.js")),$=e("./node_modules/antd/lib/_util/type.js");function t(f){if(typeof WeakMap!="function")return null;var W=new WeakMap,O=new WeakMap;return(t=function(E){return E?O:W})(f)}function S(f,W){if(!W&&f&&f.__esModule)return f;if(f===null||k(f)!=="object"&&typeof f!="function")return{default:f};var O=t(W);if(O&&O.has(f))return O.get(f);var _={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in f)if(A!=="default"&&Object.prototype.hasOwnProperty.call(f,A)){var x=E?Object.getOwnPropertyDescriptor(f,A):null;x&&(x.get||x.set)?Object.defineProperty(_,A,x):_[A]=f[A]}return _.default=f,O&&O.set(f,_),_}var oe=function(f,W){var O={};for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&W.indexOf(_)<0&&(O[_]=f[_]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,_=Object.getOwnPropertySymbols(f);E<_.length;E++)W.indexOf(_[E])<0&&Object.prototype.propertyIsEnumerable.call(f,_[E])&&(O[_[E]]=f[_[E]]);return O},q=(0,$.tupleNum)(1,2,3,4,5),fe=function(W){var O=W.level,_=O===void 0?1:O,E=oe(W,["level"]),A;return q.indexOf(_)!==-1?A="h".concat(_):((0,y.default)(!1,"Typography.Title","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value. And `5` need 4.6.0+ version."),A="h1"),N.createElement(G.default,(0,h.default)({},E,{component:A}))},J=fe;b.default=J},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/events/VolumeTable.scss":function(se,b,e){var K=e("./node_modules/css-loader/dist/runtime/api.js");b=K(!1),b.push([se.i,".definition-drawer .ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding-top:0}.definition-drawer .definition-description.ant-input:-moz-placeholder-shown{font-style:italic}.definition-drawer .definition-description.ant-input:-ms-input-placeholder{font-style:italic}.definition-drawer .definition-description.ant-input:placeholder-shown{font-style:italic}.definition-drawer .panel-wrapper{display:flex;flex-direction:row;padding-top:0}.definition-drawer .panel-wrapper span{font-weight:400;font-size:14px}.definition-drawer .owner-select .ant-select-selector .ant-select-selection-placeholder{color:#000;font-weight:400}.definition-drawer .detail-status{display:flex;flex-direction:row;justify-content:space-evenly;margin-top:30px;text-align:center}.definition-drawer .detail-status .ant-typography{margin-bottom:0}.definition-drawer .detail-status span{font-weight:400;font-size:14px}",""]),se.exports=b}}]);
