"use strict";(self.webpackChunkposthog=self.webpackChunkposthog||[]).push([[82250],{"./frontend/src/scenes/data-management/DataManagementScene.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Database:()=>Database,IngestionWarnings:()=>IngestionWarnings,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DataManagementScene_stories});var lib=__webpack_require__("./node_modules/.pnpm/kea-router@3.1.4_kea@3.1.5/node_modules/kea-router/lib/index.js"),constants=__webpack_require__("./frontend/src/lib/constants.tsx"),dayjs=__webpack_require__("./frontend/src/lib/dayjs.ts"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),App=__webpack_require__("./frontend/src/scenes/App.tsx"),urls=__webpack_require__("./frontend/src/scenes/urls.ts"),browser=__webpack_require__("./frontend/src/mocks/browser.tsx");let ingestionWarningsResponse=baseTime=>({results:[{type:"replay_timestamp_invalid",lastSeen:baseTime.subtract(1,"day"),warnings:[{type:"replay_timestamp_invalid",timestamp:baseTime.subtract(1,"day"),details:{timestamp:"not a date",replayRecord:{session_id:"some uuid"}}}],count:1},{type:"replay_timestamp_too_far",lastSeen:baseTime.subtract(1,"day"),warnings:[{type:"replay_timestamp_too_far",timestamp:baseTime.subtract(1,"day"),details:{timestamp:baseTime.add(4,"day").toISOString(),replayRecord:{session_id:"some uuid"},daysFromNow:4}}],count:1},{type:"event_timestamp_in_future",lastSeen:"2023-06-07T15:11:42.149000Z",warnings:[{type:"event_timestamp_in_future",timestamp:baseTime.subtract(1,"day"),details:{timestamp:"2023-06-07T15:10:49.765Z",sentAt:"1970-01-01T00:00:02.040936+00:00",offset:"",now:"2023-06-07T15:10:50.103781+00:00",result:"2076-11-11T06:21:37.828Z",eventUuid:"01889669-179e-7ab7-8535-821a78c8388e",eventName:"$capture_metrics"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(1,"day"),details:{timestamp:"2023-06-12T17:48:30.647Z",sentAt:"2023-06-05T11:56:20.575000+00:00",offset:"",now:"2023-06-05T11:56:20.973420+00:00",result:"2023-06-12T17:48:31.045Z",eventUuid:"01888b6a-5274-0002-6b7e-41a5b2d94a43",eventName:"client_request_failure"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(3,"day"),details:{timestamp:"2023-06-12T17:43:24.839Z",sentAt:"2023-06-05T11:56:20.575000+00:00",offset:"",now:"2023-06-05T11:56:20.973420+00:00",result:"2023-06-12T17:43:25.237Z",eventUuid:"01888b6a-5274-0001-7c18-3db548460528",eventName:"client_request_failure"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(3,"day"),details:{timestamp:"2023-05-25T12:16:20.389Z",sentAt:"1970-01-01T00:00:01.312112+00:00",offset:"",now:"2023-05-25T12:16:21.836131+00:00",result:"2076-10-16T00:32:40.913Z",eventUuid:"018852d6-b14c-0000-9d40-4f6caebf93c0",eventName:"$capture_metrics"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(3,"day"),details:{timestamp:"2023-05-20T12:41:05.910Z",sentAt:"1970-01-01T00:00:01.260819+00:00",offset:"",now:"2023-05-20T12:41:06.159219+00:00",result:"2076-10-06T01:22:10.809Z",eventUuid:"0188392d-8b6f-0000-e73c-ee83f1413a5a",eventName:"$capture_metrics"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(12,"day"),details:{timestamp:"2023-05-18T22:15:54.943Z",sentAt:"1970-01-01T00:00:03.337903+00:00",offset:"",now:"2023-05-18T22:15:55.248965+00:00",result:"2076-10-02T20:31:46.854Z",eventUuid:"018830ef-1671-0000-341c-bf64a7c23915",eventName:"$capture_metrics"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(12,"day"),details:{timestamp:"2023-05-17T13:17:20.687Z",sentAt:"1970-01-01T00:00:02.401985+00:00",offset:"",now:"2023-05-17T13:17:20.888451+00:00",result:"2076-09-30T02:34:39.174Z",eventUuid:"018829db-a678-0000-a45e-85884574b83e",eventName:"$capture_metrics"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(12,"day"),details:{timestamp:"2023-05-17T04:33:53.725Z",sentAt:"1970-01-01T00:00:00.849001+00:00",offset:"",now:"2023-05-17T04:34:04.697751+00:00",result:"2076-09-29T09:07:57.573Z",eventUuid:"018827fc-951a-0000-2f64-7ae5477af4cd",eventName:"$pageview"}},{type:"event_timestamp_in_future",timestamp:baseTime.subtract(12,"day"),details:{timestamp:"2023-05-17T04:34:03.195Z",sentAt:"1970-01-01T00:00:01.532197+00:00",offset:"",now:"2023-05-17T04:34:04.661606+00:00",result:"2076-09-29T09:08:06.324Z",eventUuid:"018827fc-94f6-0000-0dde-8a8dc2ca4594",eventName:"$pageleave"}}],count:9}]});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let MOCK_DATABASE={tables:{events:{type:"posthog",id:"events",name:"events",fields:{uuid:{name:"uuid",type:"string",schema_valid:!0},event:{name:"event",type:"string",schema_valid:!0},properties:{name:"properties",type:"json",schema_valid:!0},timestamp:{name:"timestamp",type:"datetime",schema_valid:!0},distinct_id:{name:"distinct_id",type:"string",schema_valid:!0},elements_chain:{name:"elements_chain",type:"string",schema_valid:!0},created_at:{name:"created_at",type:"datetime",schema_valid:!0},pdi:{name:"pdi",type:"lazy_table",table:"person_distinct_ids",schema_valid:!0},poe:{name:"poe",type:"virtual_table",table:"events",fields:["id","created_at","properties"],schema_valid:!0},person:{name:"person",type:"field_traverser",chain:["pdi","person"],schema_valid:!0},person_id:{name:"person_id",type:"field_traverser",chain:["pdi","person_id"],schema_valid:!0}}},persons:{type:"posthog",id:"persons",name:"persons",fields:{id:{name:"id",type:"string",schema_valid:!0},created_at:{name:"created_at",type:"datetime",schema_valid:!0},properties:{name:"properties",type:"json",schema_valid:!0},is_identified:{name:"is_identified",type:"boolean",schema_valid:!0},is_deleted:{name:"is_deleted",type:"boolean",schema_valid:!0},version:{name:"version",type:"integer",schema_valid:!0}}},person_distinct_ids:{type:"posthog",id:"person_distinct_ids",name:"person_distinct_ids",fields:{distinct_id:{name:"distinct_id",type:"string",schema_valid:!0},person_id:{name:"person_id",type:"string",schema_valid:!0},is_deleted:{name:"is_deleted",type:"boolean",schema_valid:!0},version:{name:"version",type:"integer",schema_valid:!0},person:{name:"person",type:"lazy_table",table:"persons",schema_valid:!0}}},session_recording_events:{type:"posthog",id:"session_recording_events",name:"session_recording_events",fields:{uuid:{name:"uuid",type:"string",schema_valid:!0},timestamp:{name:"timestamp",type:"datetime",schema_valid:!0},distinct_id:{name:"distinct_id",type:"string",schema_valid:!0},session_id:{name:"session_id",type:"string",schema_valid:!0},window_id:{name:"window_id",type:"string",schema_valid:!0},snapshot_data:{name:"snapshot_data",type:"json",schema_valid:!0},created_at:{name:"created_at",type:"datetime",schema_valid:!0},has_full_snapshot:{name:"has_full_snapshot",type:"boolean",schema_valid:!0},events_summary:{name:"events_summary",type:"json",schema_valid:!0},click_count:{name:"click_count",type:"integer",schema_valid:!0},keypress_count:{name:"keypress_count",type:"integer",schema_valid:!0},timestamps_summary:{name:"timestamps_summary",type:"datetime",schema_valid:!0},first_event_timestamp:{name:"first_event_timestamp",type:"datetime",schema_valid:!0},last_event_timestamp:{name:"last_event_timestamp",type:"datetime",schema_valid:!0},urls:{name:"urls",type:"string",schema_valid:!0},pdi:{name:"pdi",type:"lazy_table",table:"person_distinct_ids",schema_valid:!0},person:{name:"person",type:"field_traverser",chain:["pdi","person"],schema_valid:!0},person_id:{name:"person_id",type:"field_traverser",chain:["pdi","person_id"],schema_valid:!0}}},cohort_people:{type:"posthog",id:"cohort_people",name:"cohort_people",fields:{person_id:{name:"person_id",type:"string",schema_valid:!0},cohort_id:{name:"cohort_id",type:"integer",schema_valid:!0},sign:{name:"sign",type:"integer",schema_valid:!0},version:{name:"version",type:"integer",schema_valid:!0},person:{name:"person",type:"lazy_table",table:"persons",schema_valid:!0}}},static_cohort_people:{type:"posthog",id:"static_cohort_people",name:"static_cohort_people",fields:{person_id:{name:"person_id",type:"string",schema_valid:!0},cohort_id:{name:"cohort_id",type:"integer",schema_valid:!0},person:{name:"person",type:"lazy_table",table:"persons",schema_valid:!0}}},groups:{type:"posthog",id:"groups",name:"groups",fields:{index:{name:"index",type:"integer",schema_valid:!0},key:{name:"key",type:"string",schema_valid:!0},created_at:{name:"created_at",type:"datetime",schema_valid:!0},properties:{name:"properties",type:"json",schema_valid:!0}}}}},meta={title:"Scenes-App/Data Management",parameters:{layout:"fullscreen",viewMode:"story",mockDate:"2023-02-15"},decorators:[(0,browser.x8)({get:{"/api/projects/:team_id/ingestion_warnings/":()=>[200,ingestionWarningsResponse((0,dayjs.Bv)("2023-02-15T16:00:00.000Z"))]},post:{"/api/projects/:team_id/query/":req=>{if("DatabaseSchemaQuery"===req.body.query.kind)return[200,MOCK_DATABASE]}}})]},DataManagementScene_stories=meta;function Database(){return(0,browser.zt)([constants.y8.DATA_WAREHOUSE]),(0,react.useEffect)(()=>{lib.router.actions.push(urls.j.database())},[]),(0,jsx_runtime.jsx)(App.g,{})}function IngestionWarnings(){return(0,browser.zt)([constants.y8.INGESTION_WARNINGS_ENABLED]),(0,react.useEffect)(()=>{lib.router.actions.push(urls.j.ingestionWarnings())},[]),(0,jsx_runtime.jsx)(App.g,{})}Database.parameters={...Database.parameters,docs:{...Database.parameters?.docs,source:{originalSource:"function Database(): JSX.Element {\n  setFeatureFlags([FEATURE_FLAGS.DATA_WAREHOUSE]);\n  useEffect(() => {\n    router.actions.push(urls.database());\n  }, []);\n  return <App />;\n}",...Database.parameters?.docs?.source}}},IngestionWarnings.parameters={...IngestionWarnings.parameters,docs:{...IngestionWarnings.parameters?.docs,source:{originalSource:"function IngestionWarnings(): JSX.Element {\n  setFeatureFlags([FEATURE_FLAGS.INGESTION_WARNINGS_ENABLED]);\n  useEffect(() => {\n    router.actions.push(urls.ingestionWarnings());\n  }, []);\n  return <App />;\n}",...IngestionWarnings.parameters?.docs?.source}}};let __namedExportsOrder=["Database","IngestionWarnings"]}}]);