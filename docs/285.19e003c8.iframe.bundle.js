(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{"./frontend/src/lib/components/InlineMessage/InlineMessage.tsx":function(T,r,e){"use strict";e.d(r,"a",function(){return C});var p=e("./node_modules/@babel/runtime/helpers/slicedToArray.js"),y=e.n(p),I=e("./node_modules/react/index.js"),j=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),d=e.n(j),M=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss"),x=e.n(M),B={};B.insert="head",B.singleton=!1;var h=d()(x.a,B),g=x.a.locals||{},c=e("./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js"),O=e("./node_modules/@ant-design/icons/es/icons/CloseOutlined.js"),$=e("./node_modules/clsx/dist/clsx.m.js"),J=e("./node_modules/react/jsx-runtime.js");function C(K){var oe=K.children,ce=K.style,re=K.icon,U=re===void 0?Object(J.jsx)(c.a,{}):re,G=K.type,E=G===void 0?"info":G,R=K.closable,D=K.onClose,X=Object(I.useState)(!0),Q=y()(X,2),ee=Q[0],se=Q[1],k=function(){se(!1),D==null||D()};return Object(J.jsxs)("div",{className:Object($.a)("inline-message",E,R&&"closable",!ee&&"hidden"),style:ce,children:[Object(J.jsx)("div",{className:"inline-icon",children:U}),Object(J.jsx)("div",{className:"inline-main",children:oe}),R&&Object(J.jsx)("div",{className:"closable",onClick:k,children:Object(J.jsx)(O.a,{})})]})}try{C.displayName="InlineMessage",C.__docgenInfo={description:"",displayName:"InlineMessage",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},icon:{defaultValue:{value:"<ExclamationCircleFilled />"},description:"",name:"icon",required:!1,type:{name:"Element"}},type:{defaultValue:{value:"info"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"danger"'},{value:'"warning"'}]}},closable:{defaultValue:null,description:"",name:"closable",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"]={docgenInfo:C.__docgenInfo,name:"InlineMessage",path:"frontend/src/lib/components/InlineMessage/InlineMessage.tsx#InlineMessage"})}catch(K){}},"./frontend/src/lib/components/Table/utils.tsx":function(T,r,e){"use strict";e.d(r,"a",function(){return d});var p=e("./frontend/src/lib/hooks/useWindowSize.js"),y=e("./frontend/src/lib/utils/responsiveUtils.tsx"),I=e("./node_modules/react/jsx-runtime.js"),j=e.n(I);function d(x){return Object(I.jsx)("span",{style:{whiteSpace:"nowrap"},children:x})}var M=function(B){var h=Object(p.a)(),g=h.width,c=Object(y.b)(B),O=!!g&&g<=c;return{isTableScrolling:O,tableScrollBreakpoint:c,tableScrollX:O?"max-content":"".concat(c,"px")}};try{d.displayName="normalizeColumnTitle",d.__docgenInfo={description:"",displayName:"normalizeColumnTitle",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"]={docgenInfo:d.__docgenInfo,name:"normalizeColumnTitle",path:"frontend/src/lib/components/Table/utils.tsx#normalizeColumnTitle"})}catch(x){}try{M.displayName="useIsTableScrolling",M.__docgenInfo={description:"",displayName:"useIsTableScrolling",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"]={docgenInfo:M.__docgenInfo,name:"useIsTableScrolling",path:"frontend/src/lib/components/Table/utils.tsx#useIsTableScrolling"})}catch(x){}},"./frontend/src/scenes/groups/RelatedGroups.tsx":function(T,r,e){"use strict";e.d(r,"a",function(){return G});var p=e("./node_modules/kea/lib/index.esm.js"),y=e("./frontend/src/lib/components/LemonTable/index.ts"),I=e("./frontend/src/models/groupsModel.ts"),j=e("./node_modules/@ant-design/icons/lib/icons/UserOutlined.js"),d=e.n(j),M=e("./frontend/src/lib/utils.tsx"),x=e("./frontend/src/scenes/persons/PersonHeader.tsx"),B=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),h=e.n(B),g=e("./node_modules/@babel/runtime/regenerator/index.js"),c=e.n(g),O=e("./node_modules/core-js/modules/es.array.concat.js"),$=e("./node_modules/core-js/modules/es.array.iterator.js"),J=e("./node_modules/core-js/modules/es.object.to-string.js"),C=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),K=e("./frontend/src/lib/api.ts"),oe=e("./frontend/src/scenes/teamLogic.tsx"),ce=Object(p.kea)({path:["scenes","groups","relatedGroupsLogic"],connect:{values:[oe.a,["currentTeamId"]]},props:{},key:function(R){var D;return"".concat((D=R.groupTypeIndex)!==null&&D!==void 0?D:"person","-").concat(R.id)},actions:function(){return{loadRelatedActors:!0}},loaders:function(R){var D=R.values,X=R.props;return{relatedActors:[[],{loadRelatedActors:function(){var Q=h()(c.a.mark(function se(){var k;return c.a.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return k="api/projects/".concat(D.currentTeamId,"/groups/related?").concat(Object(M.Gb)({group_type_index:X.groupTypeIndex,id:X.id})),Z.next=3,K.b.get(k);case 3:return Z.abrupt("return",Z.sent);case 4:case"end":return Z.stop()}},se)}));function ee(){return Q.apply(this,arguments)}return ee}(),setGroup:function(){return[]}}]}},events:function(R){var D=R.actions;return{afterMount:D.loadRelatedActors}}}),re=e("./frontend/src/scenes/persons/GroupActorHeader.tsx"),U=e("./node_modules/react/jsx-runtime.js");function G(E){var R=E.groupTypeIndex,D=E.id,X=Object(p.useValues)(ce({groupTypeIndex:R,id:D})),Q=X.relatedActors,ee=X.relatedActorsLoading,se=Object(p.useValues)(I.a),k=se.aggregationLabel,ae=[{title:"Type",key:"type",render:function(ve,q){return q.type==="group"?Object(U.jsx)(U.Fragment,{children:Object(M.i)(k(q.group_type_index).singular)}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(d.a,{})," Person"]})}},{title:"id",key:"id",render:function(ve,q){return q.type=="group"?Object(U.jsx)(re.a,{actor:q}):Object(U.jsx)(x.a,{person:q,withIcon:!1})}}];return Object(U.jsx)(y.a,{dataSource:Q,columns:ae,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},loading:ee,nouns:["related group","related groups"],emptyState:"No related groups found"})}try{G.displayName="RelatedGroups",G.__docgenInfo={description:"",displayName:"RelatedGroups",props:{groupTypeIndex:{defaultValue:null,description:"",name:"groupTypeIndex",required:!0,type:{name:"number | null"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"]={docgenInfo:G.__docgenInfo,name:"RelatedGroups",path:"frontend/src/scenes/groups/RelatedGroups.tsx#RelatedGroups"})}catch(E){}},"./frontend/src/scenes/persons/Person.tsx":function(T,r,e){"use strict";e.r(r),e.d(r,"scene",function(){return Ve}),e.d(r,"Person",function(){return Re});var p=e("./node_modules/core-js/modules/es.array.map.js"),y=e("./node_modules/core-js/modules/es.array.slice.js"),I=e("./node_modules/core-js/modules/es.array.join.js"),j=e("./node_modules/antd/es/tabs/index.js"),d=e("./node_modules/antd/es/dropdown/index.js"),M=e("./node_modules/antd/es/menu/index.js"),x=e("./node_modules/antd/es/tag/index.js"),B=e("./node_modules/@ant-design/icons/es/icons/DownOutlined.js"),h=e("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),g=e("./frontend/src/scenes/events/index.ts"),c=e("./node_modules/kea/lib/index.esm.js"),O=e("./frontend/src/scenes/persons/personsLogic.tsx"),$=e("./frontend/src/scenes/persons/PersonHeader.tsx"),J=e("./frontend/src/scenes/persons/Persons.scss"),C=e("./frontend/src/lib/components/CopyToClipboard.tsx"),K=e("./node_modules/antd/es/modal/index.js"),oe=e("./node_modules/antd/es/select/index.js"),ce=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),re=e.n(ce),U=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss"),G=e.n(U),E={};E.insert="head",E.singleton=!1;var R=re()(G.a,E),D=G.a.locals||{},X=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),Q=e.n(X),ee=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),se=e.n(ee),k=e("./node_modules/@babel/runtime/regenerator/index.js"),ae=e.n(k),Z=e("./node_modules/core-js/modules/es.array.iterator.js"),ve=e("./node_modules/core-js/modules/es.object.to-string.js"),q=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Pe=e("./node_modules/core-js/modules/es.object.keys.js"),Ie=e("./node_modules/core-js/modules/es.symbol.js"),Me=e("./node_modules/core-js/modules/es.array.filter.js"),Ce=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),he=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),le=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),je=e("./node_modules/kea-router/lib/index.js"),u=e("./frontend/src/lib/api.ts"),be=e("./frontend/src/lib/components/lemonToast.tsx"),Oe=e("./frontend/src/lib/utils/eventUsageLogic.ts");function ge(o,n){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(o);n&&(v=v.filter(function(F){return Object.getOwnPropertyDescriptor(o,F).enumerable})),t.push.apply(t,v)}return t}function _(o){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?ge(Object(t),!0).forEach(function(v){Q()(o,v,t[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):ge(Object(t)).forEach(function(v){Object.defineProperty(o,v,Object.getOwnPropertyDescriptor(t,v))})}return o}var S=Object(c.kea)({props:{},key:function(n){var t;return(t=n.person.id)!==null&&t!==void 0?t:"new"},path:function(n){return["scenes","persons","mergeSplitPersonLogic",n]},connect:function(){return{actions:[Object(O.a)({syncWithUrl:!0}),["setListFilters","loadPersons","setPerson","setSplitMergeModalShown"]],values:[Object(O.a)({syncWithUrl:!0}),["persons"]]}},actions:{setSelectedPersonToAssignSplit:function(n){return{id:n}},cancel:!0},reducers:function(n){var t=n.props;return{person:[t.person,{}],selectedPersonsToAssignSplit:[null,{setSelectedPersonToAssignSplit:function(F,N){var Y=N.id;return Y}}]}},listeners:function(n){var t=n.actions,v=n.values;return{setListFilters:function(){t.loadPersons()},cancel:function(){v.executedLoading||t.setSplitMergeModalShown(!1)}}},loaders:function(n){var t=n.values,v=n.actions;return{executed:[!1,{execute:function(){var F=se()(ae.a.mark(function Y(){var w;return ae.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,u.b.create("api/person/"+t.person.id+"/split/",_({},t.selectedPersonsToAssignSplit?{main_distinct_id:t.selectedPersonsToAssignSplit}:{}));case 2:if(w=P.sent,!w.success){P.next=9;break}return be.d.success("Person succesfully split. This may take up to a couple of minutes to complete."),Oe.e.actions.reportPersonSplit(t.person.distinct_ids.length),v.setSplitMergeModalShown(!1),je.router.actions.push("/persons"),P.abrupt("return",!0);case 9:return P.abrupt("return",!1);case 10:case"end":return P.stop()}},Y)}));function N(){return F.apply(this,arguments)}return N}()}]}},events:function(n){var t=n.actions;return{afterMount:[t.loadPersons]}}}),ye=e("./frontend/src/lib/utils.tsx"),ue=e("./frontend/src/lib/components/InlineMessage/InlineMessage.tsx"),s=e("./node_modules/react/jsx-runtime.js");function a(o){var n=o.person,t={person:n},v=Object(c.useValues)(S(t)),F=v.executedLoading,N=Object(c.useActions)(S(t)),Y=N.execute,w=N.cancel;return Object(s.jsx)(K.a,{visible:!0,title:"Split persons",onCancel:w,className:"merge-split-person",okText:"Split persons",onOk:Y,okButtonProps:{loading:F},cancelButtonProps:{disabled:F},children:n.distinct_ids.length<2?"Only persons with more than two distinct IDs can be split.":Object(s.jsx)(c.BindLogic,{logic:S,props:t,children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(l,{})})})})}function l(){var o=Object(c.useValues)(S),n=o.person,t=o.executedLoading,v=Object(c.useActions)(S),F=v.setSelectedPersonToAssignSplit;return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"This will split all Distinct IDs for this person into unique persons."}),Object(s.jsxs)("p",{children:["You can select a distinct ID for which all the current properties will be assigned (",Object(s.jsx)("i",{children:"optional"}),"). All other new users will start without any properties."]}),Object(s.jsx)(oe.a,{allowClear:!0,showSearch:!0,style:{width:"100%"},placeholder:"Select a distinct ID to which to assign all properties (optional)",onChange:function(Y){return F(Y)},filterOption:!1,disabled:t,children:n==null?void 0:n.distinct_ids.map(function(N){return Object(s.jsx)(oe.a.Option,{value:N,children:N},N)})}),Object(s.jsx)(ue.a,{style:{marginTop:16},type:"danger",children:Object(s.jsxs)("div",{children:["This will create ",Object(s.jsx)("strong",{children:n.distinct_ids.length-1})," new"," ",Object(ye.tb)(n.distinct_ids.length,"person",void 0,!1),". This might change the numbers in your charts, even historically. Please be certain."]})})]}):null}try{a.displayName="MergeSplitPerson",a.__docgenInfo={description:"",displayName:"MergeSplitPerson",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"PersonType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"]={docgenInfo:a.__docgenInfo,name:"MergeSplitPerson",path:"frontend/src/scenes/persons/MergeSplitPerson.tsx#MergeSplitPerson"})}catch(o){}var i=e("./node_modules/core-js/modules/es.function.name.js"),W=e("./node_modules/react/index.js"),ne=e("./frontend/src/lib/components/LemonTable/index.ts"),z=e("./frontend/src/scenes/urls.ts"),f=e("./frontend/src/lib/components/Link.tsx");function H(){var o=Object(c.useValues)(O.a),n=o.cohorts,t=o.cohortsLoading,v=o.person,F=Object(c.useActions)(O.a),N=F.loadCohorts;Object(W.useEffect)(function(){N()},[v]);var Y=[{title:"Name",dataIndex:"name",key:"name",className:"ph-no-capture",render:function(L,P){return Object(s.jsx)(f.a,{to:z.a.cohort(P.id),children:Object(s.jsx)("strong",{children:P.name})})},sorter:function(L,P){return(L.name||"").localeCompare(P.name||"")}},{title:"Users in cohort",render:function(L){return L==null?void 0:L.toLocaleString()},dataIndex:"count",sorter:function(L,P){return(L.count||0)-(P.count||0)}}];return Object(s.jsx)(ne.a,{dataSource:n||[],loading:t,columns:Y,rowKey:"id",pagination:{pageSize:30,hideOnSinglePage:!0},emptyState:"This person doesn't belong to any cohort"})}var xe=e("./frontend/src/lib/components/PropertiesTable.tsx"),te=e("./frontend/src/lib/components/TimezoneAware/index.tsx"),fe=e("./frontend/src/lib/components/Tooltip.tsx"),A=e("./frontend/src/types.ts"),b=e("./frontend/src/lib/components/PageHeader.tsx"),m=e("./frontend/src/scenes/groups/RelatedGroups.tsx"),V=e("./frontend/src/lib/introductions/groupsAccessLogic.ts"),Se=e("./frontend/src/lib/components/ActivityLog/ActivityLog.tsx"),Ae=e("./frontend/src/lib/components/ActivityLog/humanizeActivity.tsx"),pe=e("./frontend/@posthog/lemon-ui/src/index.ts"),Le=e("./frontend/src/scenes/teamLogic.tsx"),Ee=e("./frontend/src/lib/components/AlertMessage/index.ts"),De=e("./frontend/src/scenes/persons/PersonDeleteModal.tsx"),Fe=e("./frontend/src/lib/components/Spinner/Spinner.tsx"),Ne=e("./frontend/src/scenes/session-recordings/playlist/SessionRecordingsPlaylist.tsx"),Be=e("./frontend/src/lib/components/NotFound/index.tsx"),Ue=e("./frontend/src/scenes/persons/RelatedFeatureFlags.tsx"),ie=j.a.TabPane,Ve={component:Re,logic:O.a,paramsToProps:function(n){var t=n.params._;return{syncWithUrl:!0,urlId:decodeURIComponent(t)}}};function Ke(o){var n=o.person;return Object(s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"IDs:"})," ",Object(s.jsx)(C.a,{tooltipMessage:null,description:"person distinct ID",style:{justifyContent:"flex-end"},children:n.distinct_ids[0]}),n.distinct_ids.length>1&&Object(s.jsx)(d.a,{overlay:Object(s.jsx)(M.a,{children:n.distinct_ids.slice(1).map(function(t){return Object(s.jsx)(M.a.Item,{children:Object(s.jsx)(C.a,{description:"person distinct ID",iconStyle:{color:"var(--primary)"},children:t})},t)})}),trigger:["click"],children:Object(s.jsxs)(x.a,{className:"extra-ids",children:["+",n.distinct_ids.length-1,Object(s.jsx)(B.a,{})]})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"text-muted",children:"First seen:"})," ",n.created_at?Object(s.jsx)(te.b,{time:n.created_at}):"unknown"]})]})}function Re(){var o=Object(c.useValues)(O.a),n=o.person,t=o.personLoading,v=o.deletedPersonLoading,F=o.currentTab,N=o.splitMergeModalShown,Y=o.urlId,w=o.distinctId,L=Object(c.useActions)(O.a),P=L.editProperty,Ge=L.deleteProperty,We=L.navigateToTab,ze=L.setSplitMergeModalShown,He=L.showPersonDeleteModal,Ye=L.setDistinctId,$e=Object(c.useValues)(V.b),Je=$e.groupsEnabled,Xe=Object(c.useValues)(Le.a),Te=Xe.currentTeam;return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(b.a,{title:Object($.b)(n),caption:Object(s.jsx)(Ke,{person:n}),buttons:Object(s.jsxs)("div",{className:"flex gap-2",children:[Object(s.jsx)(pe.LemonButton,{onClick:function(){return He(n)},disabled:v,loading:v,type:"secondary",status:"danger","data-attr":"delete-person",children:"Delete person"}),n.distinct_ids.length>1&&Object(s.jsx)(pe.LemonButton,{onClick:function(){return ze(!0)},"data-attr":"merge-person-button",type:"secondary",children:"Split IDs"})]})}),Object(s.jsx)(De.a,{}),Object(s.jsxs)(j.a,{activeKey:F,onChange:function(me){We(me)},destroyInactiveTabPane:!0,"data-attr":"persons-tabs",children:[Object(s.jsx)(ie,{tab:Object(s.jsx)("span",{"data-attr":"persons-properties-tab",children:"Properties"}),children:Object(s.jsx)(xe.a,{properties:n.properties||{},searchable:!0,onEdit:P,sortProperties:!0,embedded:!1,onDelete:function(me){return Ge(me)}})},A.J.PROPERTIES),Object(s.jsx)(ie,{tab:Object(s.jsx)("span",{"data-attr":"persons-events-tab",children:"Events"}),children:Object(s.jsx)(g.b,{pageKey:n.distinct_ids.join("__"),fixedFilters:{person_id:n.id},showPersonColumn:!1,sceneUrl:z.a.person(Y||n.distinct_ids[0]||String(n.id))})},A.J.EVENTS),Object(s.jsxs)(ie,{tab:Object(s.jsx)("span",{"data-attr":"person-session-recordings-tab",children:"Recordings"}),children:[Te!=null&&Te.session_recording_opt_in?null:Object(s.jsx)("div",{className:"mb-4",children:Object(s.jsxs)(Ee.a,{type:"info",children:["Session recordings are currently disabled for this project. To use this feature, please go to your ",Object(s.jsx)(pe.Link,{to:"".concat(z.a.projectSettings(),"#recordings"),children:"project settings"})," and enable it."]})}),Object(s.jsx)(Ne.SessionRecordingsPlaylist,{logicKey:n.uuid||"persons",personUUID:n.uuid,updateSearchParams:!0})]},A.J.SESSION_RECORDINGS),Object(s.jsx)(ie,{tab:Object(s.jsx)("span",{"data-attr":"persons-cohorts-tab",children:"Cohorts"}),children:Object(s.jsx)(H,{})},A.J.COHORTS),Je&&n.uuid&&Object(s.jsx)(ie,{tab:Object(s.jsxs)("span",{"data-attr":"persons-related-tab",children:["Related groups",Object(s.jsx)(fe.a,{title:"People and groups that have shared events with this person in the last 90 days.",children:Object(s.jsx)(h.a,{style:{marginLeft:6,marginRight:0}})})]}),children:Object(s.jsx)(m.a,{id:n.uuid,groupTypeIndex:null})},A.J.RELATED),n.uuid&&Object(s.jsxs)(ie,{tab:Object(s.jsx)("span",{"data-attr":"persons-related-flags-tab",children:"Feature flags"}),children:[Object(s.jsxs)("div",{className:"flex space-x-4 items-center mb-2",children:[Object(s.jsxs)("div",{children:["Choose ID:",Object(s.jsx)(fe.a,{title:"Feature flags can have different values based on the persons IDs. Turn on persistence in feature flag settings if you'd like these to be constant always.",children:Object(s.jsx)(h.a,{style:{marginLeft:6,marginRight:0}})})]}),Object(s.jsx)(pe.LemonSelect,{value:n.distinct_ids[0],onChange:function(me){return me&&Ye(me)},options:n.distinct_ids.map(function(de){return{label:de,value:de}}),"data-attr":"person-feature-flags-select"})]}),Object(s.jsx)(pe.LemonDivider,{className:"mb-4"}),Object(s.jsx)(Ue.b,{distinctId:w||n.distinct_ids[0]})]},A.J.FEATURE_FLAGS),Object(s.jsx)(ie,{tab:"History",children:Object(s.jsx)(Se.a,{scope:Ae.a.PERSON,id:n.id,caption:Object(s.jsxs)("div",{children:[Object(s.jsx)(h.a,{style:{marginRight:".25rem"}}),Object(s.jsx)("span",{children:"This page only shows changes made by users in the PostHog site. Automatic changes from the API aren't shown here."})]})})},"history")]}),N&&n&&Object(s.jsx)(a,{person:n})]}):t?Object(s.jsx)(Fe.b,{}):Object(s.jsx)(Be.a,{object:"Person"})}},"./frontend/src/scenes/persons/PersonDeleteModal.tsx":function(T,r,e){"use strict";e.d(r,"a",function(){return x});var p=e("./node_modules/kea/lib/index.esm.js"),y=e("./frontend/src/scenes/persons/personsLogic.tsx"),I=e("./frontend/src/scenes/persons/PersonHeader.tsx"),j=e("./frontend/@posthog/lemon-ui/src/index.ts"),d=e("./node_modules/react/jsx-runtime.js"),M=e.n(d);function x(){var B=Object(p.useValues)(y.a),h=B.personDeleteModal,g=Object(p.useActions)(y.a),c=g.deletePerson,O=g.showPersonDeleteModal;return Object(d.jsx)(j.LemonModal,{isOpen:!!h,onClose:function(){return O(null)},title:'Are you sure you want to delete "'.concat(Object(I.b)(h),'"?'),description:Object(d.jsxs)(d.Fragment,{children:["This action cannot be undone. If you opt to delete the person and its corresponding events, the events will not be immediately removed. Instead these events will be deleted on a set schedule during non-peak usage times.",Object(d.jsxs)("a",{href:"https://posthog.com/docs/privacy/data-deletion",target:"_blank",rel:"noopener",className:"font-bold",children:[" ","Learn more"]})]}),footer:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j.LemonButton,{status:"danger",type:"secondary",onClick:function(){c({person:h,deleteEvents:!0}),O(null)},"data-attr":"delete-person-with-events",children:"Delete person and all corresponding events"}),Object(d.jsx)(j.LemonButton,{type:"secondary",onClick:function(){return O(null)},"data-attr":"delete-person-cancel",children:"Cancel"}),Object(d.jsx)(j.LemonButton,{type:"primary",status:"danger",onClick:function(){c({person:h,deleteEvents:!1}),O(null)},"data-attr":"delete-person-no-events",children:"Delete person"})]})})}},"./frontend/src/scenes/persons/Persons.scss":function(T,r,e){"use strict";var p=e("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),y=e.n(p),I=e("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss"),j=e.n(I),d={};d.insert="head",d.singleton=!1;var M=y()(j.a,d),x=j.a.locals||{}},"./frontend/src/scenes/persons/RelatedFeatureFlags.tsx":function(T,r,e){"use strict";e.d(r,"a",function(){return S}),e.d(r,"b",function(){return ue});var p=e("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),y=e.n(p),I=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=e.n(I),d=e("./node_modules/core-js/modules/es.function.name.js"),M=e("./node_modules/core-js/modules/es.object.to-string.js"),x=e("./node_modules/core-js/modules/es.regexp.to-string.js"),B=e("./node_modules/core-js/modules/es.number.constructor.js"),h=e("./frontend/@posthog/lemon-ui/src/index.ts"),g=e("./node_modules/kea/lib/index.esm.js"),c=e("./frontend/src/lib/components/Table/utils.tsx"),O=e("./frontend/src/lib/utils.tsx"),$=e("./frontend/src/lib/utils/stringWithWBR.tsx"),J=e("./frontend/src/scenes/urls.ts"),C=e("./frontend/src/types.ts"),K=e("./node_modules/core-js/modules/es.symbol.js"),oe=e("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),ce=e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),re=e("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),U=e("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),G=e.n(U),E=e("./node_modules/@babel/runtime/regenerator/index.js"),R=e.n(E),D=e("./node_modules/core-js/modules/es.array.iterator.js"),X=e("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Q=e("./node_modules/core-js/modules/es.array.concat.js"),ee=e("./node_modules/core-js/modules/es.regexp.exec.js"),se=e("./node_modules/core-js/modules/es.string.replace.js"),k=e("./node_modules/core-js/modules/es.array.map.js"),ae=e("./node_modules/core-js/modules/es.object.keys.js"),Z=e("./node_modules/core-js/modules/es.string.search.js"),ve=e("./node_modules/core-js/modules/es.array.filter.js"),q=e("./node_modules/fuse.js/dist/fuse.esm.js"),Pe=e("./node_modules/kea-loaders/lib/index.js"),Ie=e("./frontend/src/lib/api.ts"),Me=e("./frontend/src/scenes/feature-flags/featureFlagsLogic.ts"),Ce=e("./frontend/src/scenes/teamLogic.tsx");function he(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);a&&(i=i.filter(function(W){return Object.getOwnPropertyDescriptor(s,W).enumerable})),l.push.apply(l,i)}return l}function le(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?he(Object(l),!0).forEach(function(i){j()(s,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):he(Object(l)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(l,i))})}return s}var je=Object(g.kea)([Object(g.path)(["scenes","persons","relatedFeatureFlagsLogic"]),Object(g.connect)({values:[Ce.a,["currentTeamId"],Me.b,["featureFlags"]]}),Object(g.props)({}),Object(g.key)(function(s){return"".concat(s.distinctId)}),Object(g.actions)({setSearchTerm:function(a){return{searchTerm:a}},setFilters:function(a,l){return{filters:a,replace:l}},loadRelatedFeatureFlags:!0}),Object(Pe.loaders)(function(s){var a=s.values,l=s.props;return{relatedFeatureFlags:[null,{loadRelatedFeatureFlags:function(){var i=G()(R.a.mark(function ne(){var z;return R.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Ie.b.get("api/projects/".concat(a.currentTeamId,"/feature_flags/evaluation_reasons?").concat(Object(O.Gb)(le({distinct_id:l.distinctId},l.groups?{groups:l.groups}:{}))));case 2:return z=H.sent,H.abrupt("return",z);case 4:case"end":return H.stop()}},ne)}));function W(){return i.apply(this,arguments)}return W}()}]}}),Object(g.reducers)({searchTerm:["",{setSearchTerm:function(a,l){var i=l.searchTerm;return i}}],filters:[{},{setFilters:function(a,l){var i=l.filters,W=l.replace;return le(W?{}:le({},a),i)}}]}),Object(g.selectors)(function(){return{mappedRelatedFeatureFlags:[function(s){return[s.relatedFeatureFlags,s.featureFlags]},function(s,a){return s&&a?a.map(function(l){return le(le({},s[l.key]),l)}):[]}],filteredMappedFlags:[function(s){return[s.mappedRelatedFeatureFlags,s.searchTerm,s.filters]},function(s,a,l){if(!a&&Object.keys(l).length===0)return s;var i=s;a&&(i=new q.a(s,{keys:["key","name"],threshold:.3}).search(a).map(function(f){return f.item}));var W=l.type,ne=l.active,z=l.reason;return W&&(i=i.filter(function(f){return W===C.t.Variants?f.filters.multivariate:!f.filters.multivariate})),ne&&(i=i.filter(function(f){return ne==="true"?f.active:!f.active})),z&&(i=i.filter(function(f){return z==="not matched"?f.evaluation.reason!==S.ConditionMatch:f.evaluation.reason===S.ConditionMatch})),i}]}}),Object(g.events)(function(s){var a=s.actions;return{afterMount:a.loadRelatedFeatureFlags}})]),u=e("./node_modules/react/jsx-runtime.js"),be=["type"],Oe=["reason"],ge=["active"],_,S;(function(s){s.ConditionMatch="condition_match",s.NoConditionMatch="no_condition_match",s.OutOfRolloutBound="out_of_rollout_bound",s.NoGroupType="no_group_type",s.Disabled="disabled"})(S||(S={}));var ye=(_={},j()(_,S.ConditionMatch,"Matches"),j()(_,S.NoConditionMatch,"Doesn't match any conditions"),j()(_,S.OutOfRolloutBound,"Out of rollout bound"),j()(_,S.NoGroupType,"Missing group type"),j()(_,S.Disabled,"Disabled"),_);function ue(s){var a=s.distinctId,l=s.groups,i=Object(g.useValues)(je({distinctId:a,groups:l})),W=i.filteredMappedFlags,ne=i.relatedFeatureFlagsLoading,z=i.searchTerm,f=i.filters,H=Object(g.useActions)(je({distinctId:a,groups:l})),xe=H.setSearchTerm,te=H.setFilters,fe=[{title:Object(c.a)("Key"),dataIndex:"key",className:"ph-no-capture",sticky:!0,width:"40%",sorter:function(b,m){return(b.key||"").localeCompare(m.key||"")},render:function(b,m){var V=(m.experiment_set||[]).length>0;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(h.Link,{to:m.id?J.a.featureFlag(m.id):void 0,className:"row-name",children:[Object($.a)(m.key,17),Object(u.jsx)(h.LemonTag,{type:V?"purple":"default",className:"ml-2",children:V?"Experiment":"Feature flag"})]}),m.name&&Object(u.jsx)("span",{className:"row-description",children:m.name})]})}},{title:"Type",width:100,render:function(b,m){return m.filters.multivariate?C.t.Variants:C.t.ReleaseToggle}},{title:"Value",dataIndex:"value",width:150,render:function(b,m){return Object(u.jsx)("div",{style:{wordBreak:"break-word"},children:m.active?Object(O.i)(m.value.toString()):"--"})}},{title:"Match evaluation",dataIndex:"evaluation",width:150,render:function(b,m){var V,Se=m.evaluation.reason===S.ConditionMatch;return Object(u.jsxs)("div",{children:[m.active?Object(u.jsx)(u.Fragment,{children:ye[m.evaluation.reason]}):"--",Se&&Object(u.jsxs)("span",{className:"simple-tag ml-2",style:{background:"var(--primary-highlight)"},children:["Set ",((V=m.evaluation.condition_index)!==null&&V!==void 0?V:0)+1]})]})}},{title:"Status",dataIndex:"active",sorter:function(b,m){return Number(b.active)-Number(m.active)},width:100,render:function(b,m){return Object(u.jsx)("span",{className:"font-normal",children:m.active?"Enabled":"Disabled"})}}];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(u.jsx)(h.LemonInput,{type:"search",placeholder:"Search for feature flags",onChange:xe,value:z}),Object(u.jsxs)("div",{className:"flex items-center gap-2",children:[Object(u.jsx)("span",{children:Object(u.jsx)("b",{children:"Type"})}),Object(u.jsx)(h.LemonSelect,{options:[{label:"All types",value:"all"},{label:C.t.ReleaseToggle,value:C.t.ReleaseToggle},{label:C.t.Variants,value:C.t.Variants}],onChange:function(b){if(b)if(b==="all"){if(f){var m=f.type,V=y()(f,be);te(V,!0)}}else te({type:b})},value:"all",dropdownMaxContentWidth:!0}),Object(u.jsx)("span",{className:"ml-2",children:Object(u.jsx)("b",{children:"Match evaluation"})}),Object(u.jsx)(h.LemonSelect,{options:[{label:"All",value:"all"},{label:"Matched",value:S.ConditionMatch},{label:"Not matched",value:"not matched"}],onChange:function(b){if(b)if(b==="all"){if(f){var m=f.reason,V=y()(f,Oe);te(V,!0)}}else te({reason:b})},value:"all",dropdownMaxContentWidth:!0}),Object(u.jsx)("span",{className:"ml-2",children:Object(u.jsx)("b",{children:"Status"})}),Object(u.jsx)(h.LemonSelect,{onChange:function(b){if(b)if(b==="all"){if(f){var m=f.active,V=y()(f,ge);te(V,!0)}}else te({active:b})},options:[{label:"All",value:"all"},{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}],value:"all",dropdownMaxContentWidth:!0})]})]}),Object(u.jsx)(h.LemonTable,{columns:fe,loading:ne,dataSource:W})]})}try{ue.displayName="RelatedFeatureFlags",ue.__docgenInfo={description:"",displayName:"RelatedFeatureFlags",props:{distinctId:{defaultValue:null,description:"",name:"distinctId",required:!0,type:{name:"string"}},groups:{defaultValue:null,description:"",name:"groups",required:!1,type:{name:"{ [key: string]: string; }"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"]={docgenInfo:ue.__docgenInfo,name:"RelatedFeatureFlags",path:"frontend/src/scenes/persons/RelatedFeatureFlags.tsx#RelatedFeatureFlags"})}catch(s){}},"./node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js":function(T,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};r.default=p},"./node_modules/@ant-design/icons/lib/icons/UserOutlined.js":function(T,r,e){"use strict";var p=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),y=e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var I=y(e("./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/objectSpread2.js")),j=p(e("./node_modules/react/index.js")),d=y(e("./node_modules/@ant-design/icons-svg/lib/asn/UserOutlined.js")),M=y(e("./node_modules/@ant-design/icons/lib/components/AntdIcon.js")),x=function(g,c){return j.createElement(M.default,(0,I.default)((0,I.default)({},g),{},{ref:c,icon:d.default}))};x.displayName="UserOutlined";var B=j.forwardRef(x);r.default=B},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/lib/components/InlineMessage/InlineMessage.scss":function(T,r,e){var p=e("./node_modules/css-loader/dist/runtime/api.js");r=p(!1),r.push([T.i,".inline-message{background-color:var(--bg-mid);border-radius:var(--radius);padding:.5rem 1rem;font-weight:var(--font-medium);display:flex;align-items:center;color:var(--primary-alt)}.inline-message.danger{background-color:var(--danger-highlight);color:var(--danger)}.inline-message.closable{padding-right:.5rem}.inline-message.hidden{display:none}.inline-message .inline-icon{margin-right:6px;display:flex;align-items:center}.inline-message .inline-main{flex-grow:1}.inline-message .closable{color:var(--muted);align-self:flex-start;padding-left:1rem;cursor:pointer}",""]),T.exports=r},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/MergeSplitPerson.scss":function(T,r,e){var p=e("./node_modules/css-loader/dist/runtime/api.js");r=p(!1),r.push([T.i,".merge-split-person .activity-header{background-color:var(--bg-mid);border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-left:-24px;margin-right:-24px;padding:8px 0;display:flex;justify-content:center;margin-bottom:1rem}.merge-split-person .ant-modal-header{border-bottom:0}.merge-split-person .ant-modal-body{padding-top:0}.merge-split-person .ant-radio-wrapper{margin-right:2px}.merge-split-person .ant-col{margin-right:1rem}.merge-split-person code{background-color:var(--bg-mid);color:var(--primary-alt);padding:4px 8px;border-radius:var(--radius)}",""]),T.exports=r},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js?!./frontend/src/scenes/persons/Persons.scss":function(T,r,e){var p=e("./node_modules/css-loader/dist/runtime/api.js");r=p(!1),r.push([T.i,".extra-ids{display:inline-flex;align-items:center;height:1.25rem;line-height:1.125rem;margin:0 0 0 .25rem;padding:0 .25rem 0 .375rem;color:var(--primary);cursor:pointer}.extra-ids svg{margin-left:.25rem}",""]),T.exports=r}}]);
