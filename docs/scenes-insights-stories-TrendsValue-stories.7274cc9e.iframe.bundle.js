"use strict";(self.webpackChunk_posthog_storybook=self.webpackChunk_posthog_storybook||[]).push([[13625],{"../../frontend/src/scenes/insights/stories/TrendsValue.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TrendsArea:()=>TrendsArea,TrendsAreaBreakdown:()=>TrendsAreaBreakdown,TrendsAreaBreakdownEdit:()=>TrendsAreaBreakdownEdit,TrendsAreaEdit:()=>TrendsAreaEdit,TrendsNumber:()=>TrendsNumber,TrendsNumberEdit:()=>TrendsNumberEdit,TrendsTable:()=>TrendsTable,TrendsTableBreakdown:()=>TrendsTableBreakdown,TrendsTableBreakdownEdit:()=>TrendsTableBreakdownEdit,TrendsTableEdit:()=>TrendsTableEdit,TrendsValue:()=>TrendsValue,TrendsValueBreakdown:()=>TrendsValueBreakdown,TrendsValueBreakdownEdit:()=>TrendsValueBreakdownEdit,TrendsValueEdit:()=>TrendsValueEdit,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../frontend/src/scenes/insights/__mocks__/createInsightScene.tsx"),scenes_insights_mocks_insight_mocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../frontend/src/scenes/insights/__mocks__/insight.mocks.ts");let __WEBPACK_DEFAULT_EXPORT__={title:"Scenes-App/Insights/TrendsValue",parameters:{layout:"fullscreen",testOptions:{snapshotBrowsers:["chromium"],viewport:{width:1300,height:720}},viewMode:"story",mockDate:"2022-03-11"},decorators:[(0,__webpack_require__("../../frontend/src/mocks/browser.tsx").x8)({get:{"/api/environments/:team_id/persons/retention":scenes_insights_mocks_insight_mocks__WEBPACK_IMPORTED_MODULE_1__.I,"/api/environments/:team_id/persons/properties":scenes_insights_mocks_insight_mocks__WEBPACK_IMPORTED_MODULE_1__.A,"/api/projects/:team_id/groups_types":[]},post:{"/api/projects/:team_id/cohorts/":{id:1}}})]},TrendsValue=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsValue.json"));TrendsValue.parameters={testOptions:{waitForSelector:"[data-attr=trend-bar-value-graph] > canvas"}};let TrendsValueEdit=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsValue.json"),"edit");TrendsValueEdit.parameters={testOptions:{waitForSelector:"[data-attr=trend-bar-value-graph] > canvas"}};let TrendsValueBreakdown=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsValueBreakdown.json"));TrendsValueBreakdown.parameters={testOptions:{waitForSelector:"[data-attr=trend-bar-value-graph] > canvas"}};let TrendsValueBreakdownEdit=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsValueBreakdown.json"),"edit");TrendsValueBreakdownEdit.parameters={testOptions:{waitForSelector:"[data-attr=trend-bar-value-graph] > canvas"}};let TrendsArea=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsArea.json"));TrendsArea.parameters={testOptions:{waitForSelector:"[data-attr=trend-line-graph] > canvas"}};let TrendsAreaEdit=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsArea.json"),"edit");TrendsAreaEdit.parameters={testOptions:{waitForSelector:"[data-attr=trend-line-graph] > canvas"}};let TrendsAreaBreakdown=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsAreaBreakdown.json"));TrendsAreaBreakdown.parameters={testOptions:{waitForSelector:"[data-attr=trend-line-graph] > canvas"}};let TrendsAreaBreakdownEdit=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsAreaBreakdown.json"),"edit");TrendsAreaBreakdownEdit.parameters={testOptions:{waitForSelector:"[data-attr=trend-line-graph] > canvas"}};let TrendsNumber=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsNumber.json"));TrendsNumber.parameters={testOptions:{waitForSelector:".BoldNumber__value"}};let TrendsNumberEdit=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsNumber.json"),"edit");TrendsNumberEdit.parameters={testOptions:{waitForSelector:".BoldNumber__value"}};let TrendsTable=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsTable.json"));TrendsTable.parameters={testOptions:{waitForSelector:"[data-attr=insights-table-graph] td"}};let TrendsTableEdit=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsTable.json"),"edit");TrendsTableEdit.parameters={testOptions:{waitForSelector:"[data-attr=insights-table-graph] td"}};let TrendsTableBreakdown=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsTableBreakdown.json"));TrendsTableBreakdown.parameters={testOptions:{waitForSelector:"[data-attr=insights-table-graph] td"}};let TrendsTableBreakdownEdit=(0,scenes_insights_mocks_createInsightScene__WEBPACK_IMPORTED_MODULE_0__.q)(__webpack_require__("../../frontend/src/mocks/fixtures/api/projects/team_id/insights/trendsTableBreakdown.json"),"edit");TrendsTableBreakdownEdit.parameters={testOptions:{waitForSelector:"[data-attr=insights-table-graph] td"}},TrendsValue.parameters={...TrendsValue.parameters,docs:{...TrendsValue.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsValue.json'))",...TrendsValue.parameters?.docs?.source}}},TrendsValueEdit.parameters={...TrendsValueEdit.parameters,docs:{...TrendsValueEdit.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsValue.json'), 'edit')",...TrendsValueEdit.parameters?.docs?.source}}},TrendsValueBreakdown.parameters={...TrendsValueBreakdown.parameters,docs:{...TrendsValueBreakdown.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsValueBreakdown.json'))",...TrendsValueBreakdown.parameters?.docs?.source}}},TrendsValueBreakdownEdit.parameters={...TrendsValueBreakdownEdit.parameters,docs:{...TrendsValueBreakdownEdit.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsValueBreakdown.json'), 'edit')",...TrendsValueBreakdownEdit.parameters?.docs?.source}}},TrendsArea.parameters={...TrendsArea.parameters,docs:{...TrendsArea.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsArea.json'))",...TrendsArea.parameters?.docs?.source}}},TrendsAreaEdit.parameters={...TrendsAreaEdit.parameters,docs:{...TrendsAreaEdit.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsArea.json'), 'edit')",...TrendsAreaEdit.parameters?.docs?.source}}},TrendsAreaBreakdown.parameters={...TrendsAreaBreakdown.parameters,docs:{...TrendsAreaBreakdown.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsAreaBreakdown.json'))",...TrendsAreaBreakdown.parameters?.docs?.source}}},TrendsAreaBreakdownEdit.parameters={...TrendsAreaBreakdownEdit.parameters,docs:{...TrendsAreaBreakdownEdit.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsAreaBreakdown.json'), 'edit')",...TrendsAreaBreakdownEdit.parameters?.docs?.source}}},TrendsNumber.parameters={...TrendsNumber.parameters,docs:{...TrendsNumber.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsNumber.json'))",...TrendsNumber.parameters?.docs?.source}}},TrendsNumberEdit.parameters={...TrendsNumberEdit.parameters,docs:{...TrendsNumberEdit.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsNumber.json'), 'edit')",...TrendsNumberEdit.parameters?.docs?.source}}},TrendsTable.parameters={...TrendsTable.parameters,docs:{...TrendsTable.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsTable.json'))",...TrendsTable.parameters?.docs?.source}}},TrendsTableEdit.parameters={...TrendsTableEdit.parameters,docs:{...TrendsTableEdit.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsTable.json'), 'edit')",...TrendsTableEdit.parameters?.docs?.source}}},TrendsTableBreakdown.parameters={...TrendsTableBreakdown.parameters,docs:{...TrendsTableBreakdown.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsTableBreakdown.json'))",...TrendsTableBreakdown.parameters?.docs?.source}}},TrendsTableBreakdownEdit.parameters={...TrendsTableBreakdownEdit.parameters,docs:{...TrendsTableBreakdownEdit.parameters?.docs,source:{originalSource:"createInsightStory(require('../../../mocks/fixtures/api/projects/team_id/insights/trendsTableBreakdown.json'), 'edit')",...TrendsTableBreakdownEdit.parameters?.docs?.source}}};let __namedExportsOrder=["TrendsValue","TrendsValueEdit","TrendsValueBreakdown","TrendsValueBreakdownEdit","TrendsArea","TrendsAreaEdit","TrendsAreaBreakdown","TrendsAreaBreakdownEdit","TrendsNumber","TrendsNumberEdit","TrendsTable","TrendsTableEdit","TrendsTableBreakdown","TrendsTableBreakdownEdit"]},"../../frontend/src/scenes/insights/__mocks__/createInsightScene.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>createInsightStory});var kea_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/kea-router@3.3.1_kea@3.1.5_react@18.2.0_/node_modules/kea-router/lib/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),scenes_App__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../frontend/src/scenes/App.tsx"),_mocks_browser__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../frontend/src/mocks/browser.tsx"),_queries_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../frontend/src/queries/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function setLegendFilter(query,showLegend){return(0,_queries_utils__WEBPACK_IMPORTED_MODULE_4__.KN)(query)?(0,_queries_utils__WEBPACK_IMPORTED_MODULE_4__.kX)(query.source)?{...query,source:{...query.source,trendsFilter:{...query.source.trendsFilter,showLegend}}}:(0,_queries_utils__WEBPACK_IMPORTED_MODULE_4__.Vr)(query.source)?{...query,source:{...query.source,lifecycleFilter:{...query.source.lifecycleFilter,showLegend}}}:(0,_queries_utils__WEBPACK_IMPORTED_MODULE_4__.vy)(query.source)?{...query,source:{...query.source,stickinessFilter:{...query.source.stickinessFilter,showLegend}}}:query:query}let shortCounter=0;function createInsightStory(insight){let mode=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view",showLegend=arguments.length>2&&void 0!==arguments[2]&&arguments[2],count=shortCounter++;return function InsightStory(){return document.body.classList.add("storybook-test-runner"),(0,_mocks_browser__WEBPACK_IMPORTED_MODULE_3__.ok)({get:{"/api/environments/:team_id/insights/":(_,__,ctx)=>{var _insight$id;return[ctx.status(200),ctx.json({count:1,results:[{...insight,short_id:`${insight.short_id}${count}`,id:(null!==(_insight$id=insight.id)&&void 0!==_insight$id?_insight$id:0)+1+count,query:setLegendFilter(insight.query,showLegend)}]})]}},post:{"/api/environments/:team_id/query/":(req,__,ctx)=>[ctx.status(200),ctx.json({cache_key:req.params.query,calculation_trigger:null,error:"",hasMore:!1,is_cached:!0,query_status:null,results:insight.result})]}}),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{kea_router__WEBPACK_IMPORTED_MODULE_0__.router.actions.push(`/insights/${insight.short_id}${count}${"edit"===mode?"/edit":""}`)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(scenes_App__WEBPACK_IMPORTED_MODULE_2__.g,{})}}},"../../frontend/src/scenes/insights/__mocks__/insight.mocks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>samplePersonProperties,I:()=>sampleRetentionPeopleResponse});let sampleRetentionPeopleResponse={result:[{person:{id:0xba1e11c,name:"test_user@posthog.com",distinct_ids:["1234"],properties:{$os:"Mac OS X",email:"test_user@posthog.com"},is_identified:!0,created_at:"2021-11-15T15:23:54.099000Z",uuid:"017d27d1-173a-2345-9bb1-337a0bb07be3"},appearances:[!0,!0,!0,!0,!0,!0,!0,!0,!0]},{person:{id:0xb99c1e3,name:"test@posthog.com",distinct_ids:["abc"],properties:{$os:"Mac OS X",email:"test@posthog.com"},is_identified:!1,created_at:"2021-11-15T14:12:41.919000Z",uuid:"017d23f1-6326-3456-0c5c-af00affbd563"},appearances:[!0,!0,!0,!0,!0,!1,!0,!0,!0]}],next:"https://app.posthog.com/api/projects/1/persons/retention/?insight=RETENTION&target_entity=%7B%22id%22%3A%22%24pageview%22%2C%22name%22%3A%22%24pageview%22%2C%22type%22%3A%22events%22%7D&returning_entity=%7B%22id%22%3A%22%24pageview%22%2C%22type%22%3A%22events%22%2C%22name%22%3A%22%24pageview%22%7D&period=Day&retention_type=retention_first_time&display=ActionsTable&properties=%5B%5D&selected_interval=2&offset=100"},samplePersonProperties=[{id:1,name:"location",count:1},{id:2,name:"role",count:2},{id:3,name:"height",count:3}]}}]);