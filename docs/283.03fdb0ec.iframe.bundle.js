var Qe=Object.defineProperty,Xe=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var Se=(y,h,t)=>h in y?Qe(y,h,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[h]=t,de=(y,h)=>{for(var t in h||(h={}))Me.call(h,t)&&Se(y,t,h[t]);if(ce)for(var t of ce(h))Le.call(h,t)&&Se(y,t,h[t]);return y},be=(y,h)=>Xe(y,qe(h));var Ae=(y,h)=>{var t={};for(var m in y)Me.call(y,m)&&h.indexOf(m)<0&&(t[m]=y[m]);if(y!=null&&ce)for(var m of ce(y))h.indexOf(m)<0&&Le.call(y,m)&&(t[m]=y[m]);return t};var z=(y,h,t)=>new Promise((m,B)=>{var r=T=>{try{A(t.next(T))}catch(_){B(_)}},S=T=>{try{A(t.throw(T))}catch(_){B(_)}},A=T=>T.done?m(T.value):Promise.resolve(T.value).then(r,S);A((t=t.apply(y,h)).next())});(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{"./frontend/src/lib/hooks/useAnchor.ts":function(y,h,t){"use strict";t.d(h,"a",function(){return r});var m=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),B=t.n(m);function r(S){Object(m.useEffect)(()=>{if(S&&document.getElementById(S.substr(1))){const A=document.getElementById(S.substr(1));if(!A)return;A.classList.add("highlighted");const T=A.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:T-50-32,behavior:"smooth"})}},[S])}},"./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx":function(y,h,t){"use strict";t.d(h,"a",function(){return _});var m=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),B=t("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),r=t.n(B),S=t("./frontend/src/lib/api.ts"),A=t("./frontend/src/scenes/project/Settings/teamMembersLogic.tsx"),T=t("./frontend/src/types.ts");const _=Object(m.kea)([Object(m.path)(["scenes","organization","rolesLogic"]),Object(m.connect)({values:[A.b,["allMembers"]]}),Object(m.actions)({setCreateRoleModalShown:b=>({shown:b}),setRoleInFocus:b=>({role:b}),setRoleMembersInFocus:b=>({roleMembers:b}),setRoleMembersToAdd:b=>({uuids:b}),openCreateRoleModal:!0,setPermission:(b,j)=>({resource:b,access:j}),clearPermission:!0,updateRole:b=>({role:b})}),Object(m.reducers)({createRoleModalShown:[!1,{setCreateRoleModalShown:(b,j)=>{let{shown:g}=j;return g}}],roleInFocus:[null,{setRoleInFocus:(b,j)=>{let{role:g}=j;return g}}],roleMembersInFocus:[[],{setRoleMembersInFocus:(b,j)=>{let{roleMembers:g}=j;return g}}],roleMembersToAdd:[[],{setRoleMembersToAdd:(b,j)=>{let{uuids:g}=j;return g}}],roles:[[],{updateRole:(b,j)=>{let{role:g}=j;return b.map(c=>c.id==g.id?g:c)}}]}),Object(B.loaders)(b=>{let{values:j,actions:g}=b;return{roles:{loadRoles:()=>z(this,null,function*(){const c=yield S.b.roles.list();return(c==null?void 0:c.results)||[]}),createRole:c=>z(this,null,function*(){const{roles:O,roleMembersToAdd:N}=j,e=yield S.b.roles.create(c);return yield g.addRoleMembers({role:e,membersToAdd:N}),g.setRoleMembersInFocus([]),g.setRoleMembersToAdd([]),g.clearPermission(),g.setCreateRoleModalShown(!1),[e,...O]}),deleteRole:c=>z(this,null,function*(){return yield S.b.roles.delete(c.id),j.roles.filter(O=>O.id!==c.id)})},roleMembersInFocus:[[],{loadRoleMembers:c=>z(this,null,function*(){let{roleId:O}=c;const N=yield S.b.roles.members.list(O);return(N==null?void 0:N.results)||[]}),addRoleMembers:c=>z(this,null,function*(){let{role:O,membersToAdd:N}=c;const e=yield Promise.all(N.map(L=>z(this,null,function*(){return yield S.b.roles.members.create(O.id,L)})));return g.setRoleMembersToAdd([]),[...j.roleMembersInFocus,...e]}),deleteRoleMember:c=>z(this,null,function*(){let{roleMemberUuid:O}=c;return j.roleInFocus&&(yield S.b.roles.members.delete(j.roleInFocus.id,O)),j.roleMembersInFocus.filter(N=>N.id!==O)})}]}}),Object(m.listeners)(b=>{let{actions:j,values:g}=b;return{setRoleInFocus:c=>{let{role:O}=c;O&&j.loadRoleMembers({roleId:O.id}),j.setCreateRoleModalShown(!0)},openCreateRoleModal:()=>{j.setRoleInFocus(null),j.setRoleMembersInFocus([]),j.setCreateRoleModalShown(!0)},setCreateRoleModalShown:()=>{g.roleInFocus?j.setPermission(T.U.FEATURE_FLAGS,g.roleInFocus.feature_flags_access_level):j.setPermission(T.U.FEATURE_FLAGS,T.a.WRITE)},deleteRoleSuccess:()=>{j.setCreateRoleModalShown(!1)}}}),Object(m.selectors)({addableMembers:[b=>[b.allMembers,b.roleMembersInFocus],(b,j)=>{const g=[];for(const c of b)j.some(O=>O.user.uuid===c.user.uuid)||g.push(c.user);return g.sort((c,O)=>c.first_name.localeCompare(O.first_name)),g}]}),Object(m.afterMount)(b=>{let{actions:j}=b;j.loadRoles()})])},"./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx":function(y,h,t){"use strict";t.d(h,"a",function(){return c}),t.d(h,"b",function(){return N});var m=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),B=t("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js"),r=t.n(B),S=t("./frontend/src/lib/api.ts"),A=t("./frontend/src/types.ts"),T=t("./frontend/src/lib/logic/featureFlagLogic.ts"),_=t("./frontend/src/lib/constants.tsx"),b=t("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx"),j=t("./frontend/@posthog/lemon-ui/src/index.ts");const g={[A.U.FEATURE_FLAGS]:"Feature Flags"},c={[A.a.WRITE]:"View & Edit",[A.a.READ]:"View Only"},O={[A.U.FEATURE_FLAGS]:"feature_flags_access_level"},N=Object(m.kea)([Object(m.path)(["scenes","organization","Settings","Permissions","permissionsLogic"]),Object(m.connect)({values:[T.a,["featureFlags"],b.a,["roles"]],actions:[b.a,["updateRole"]]}),Object(m.actions)({updatePermission:(e,L,R,E)=>({checked:e,role:L,resourceId:R,resourceType:E})}),Object(B.loaders)(e=>{let{values:L}=e;return{organizationResourcePermissions:[[],{loadOrganizationResourcePermissions:()=>z(this,null,function*(){const R=yield S.b.resourcePermissions.list();return(R==null?void 0:R.results)||[]}),updateOrganizationResourcePermission:R=>z(this,null,function*(){let{id:E,resource:w,access_level:p}=R;if(E){const I=yield S.b.resourcePermissions.update(E,{access_level:p});return L.organizationResourcePermissions.map(G=>G.id==I.id?I:G)}else{const I=yield S.b.resourcePermissions.create({resource:w,access_level:p});return[...L.organizationResourcePermissions,I]}})}]}}),Object(m.listeners)(e=>{let{actions:L}=e;return{updatePermission:R=>z(this,null,function*(){let{checked:E,role:w,resourceId:p,resourceType:I}=R;const G=E?A.a.WRITE:A.a.READ;if(w.id){const W=yield S.b.roles.update(w.id,{[O[I]]:G});W&&(L.updateRole(W),j.lemonToast.success(`${w.name} role ${I} edit access updated`))}else L.updateOrganizationResourcePermission({id:p,access_level:G})}),updateOrganizationResourcePermissionSuccess:()=>{j.lemonToast.success("Organizational edit access updated")}}}),Object(m.selectors)({organizationResourcePermissionsMap:[e=>[e.organizationResourcePermissions],e=>e.reduce((L,R)=>be(de({},L),{[R.resource]:R}),{})],allPermissions:[e=>[e.organizationResourcePermissionsMap],e=>Object.keys(g).map(L=>{var R,E;return{id:((R=e[L])===null||R===void 0?void 0:R.id)||null,resource:L,name:g[L],access_level:((E=e[L])===null||E===void 0?void 0:E.access_level)||A.a.WRITE}})],shouldShowPermissionsTable:[e=>[e.featureFlags],e=>e[_.i.ROLE_BASED_ACCESS]==="control"],resourceRolesAccess:[e=>[e.allPermissions,e.roles],(e,L)=>{const R=e.map(E=>({[E.resource]:{organization_default:E.access_level,id:E.id}}));for(const E of L)for(const w of R){const p=Object.keys(w)[0];w[p][`${E.name}`]=E[O[p]]}return R}]}),Object(m.afterMount)(e=>{let{actions:L}=e;L.loadOrganizationResourcePermissions()})])},"./frontend/src/scenes/organization/Settings/index.tsx":function(y,h,t){"use strict";t.r(h),t.d(h,"scene",function(){return Ze}),t.d(h,"OrganizationSettingsTabs",function(){return le}),t.d(h,"OrganizationSettings",function(){return ye});var m=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),B=t("./frontend/src/lib/components/PageHeader.tsx"),r=t("./node_modules/.pnpm/kea@3.1.0_react@16.14.0/node_modules/kea/lib/index.esm.js"),S=t("./frontend/src/lib/components/CopyToClipboard.tsx"),A=t("./frontend/src/lib/components/ProfilePicture/index.ts"),T=t("./frontend/src/scenes/organization/Settings/inviteLogic.ts"),_=t("./frontend/src/scenes/organization/Settings/InviteModal.tsx"),b=t("./frontend/src/lib/components/LemonTable/index.ts"),j=t("./frontend/src/lib/components/LemonTable/columnUtils.tsx"),g=t("./frontend/src/scenes/PreflightCheck/preflightLogic.tsx"),c=t("./frontend/src/lib/components/LemonButton/index.ts"),O=t("./frontend/src/lib/components/icons.tsx"),N=t("./frontend/src/lib/components/LemonDialog/index.ts"),e=t("./node_modules/.pnpm/react@16.14.0/node_modules/react/jsx-runtime.js");function L(n,s){const o=new URL(`/signup/${n}`,document.baseURI).href;return s.is_expired?Object(e.jsx)("b",{children:"Expired! Delete and recreate"}):Object(e.jsx)(S.a,{"data-attr":"invite-link",description:"invite link",children:o})}function R(n){return function(o,i){return Object(e.jsx)(c.a,{title:"Cancel the invite","data-attr":"invite-delete",icon:Object(e.jsx)(O.IconClose,{}),status:"danger",onClick:()=>{i.is_expired?n(i):N.a.open({title:`Do you want to cancel the invite for ${i.target_email}?`,primaryButton:{children:"Yes, cancel invite",status:"danger",onClick:()=>n(i)},secondaryButton:{children:"No, keep invite"}})}})}}function E(){const{invites:n,invitesLoading:s}=Object(r.useValues)(T.a),{deleteInvite:o,showInviteModal:i}=Object(r.useActions)(T.a),{preflight:a}=Object(r.useValues)(g.a),d=[{key:"user_profile_picture",render:function(u,l){return Object(e.jsx)(A.b,{name:l.first_name,email:l.target_email})},width:32},{title:"Invitee",dataIndex:"target_email",key:"target_email",render:function(u,l){return l.target_email?Object(e.jsxs)("div",{className:"flex items-center",children:[l.target_email,l.first_name?` (${l.first_name})`:""]}):Object(e.jsx)("i",{children:"no one"})},width:"20%"},Object(j.b)(),Object(j.a)(),{title:"Invite Link",dataIndex:"id",key:"link",render:(v,u)=>L(u.id,u)},{title:"",key:"actions",width:24,render:R(o)}];return Object(e.jsxs)("div",{children:[Object(e.jsxs)("h2",{id:"invites",className:"subtitle",style:{justifyContent:"space-between"},children:["Pending Invites",Object(e.jsx)(c.a,{type:"primary",onClick:i,"data-attr":"invite-teammate-button",children:"Invite team member"})]}),!(a!=null&&a.email_service_available)&&Object(e.jsx)(_.a,{}),Object(e.jsx)(b.a,{dataSource:n,columns:d,rowKey:"id",loading:s,style:{marginTop:"1rem"},"data-attr":"invites-table",emptyState:"There are no outstanding invitations. You can invite another team member above."})]})}var w=t("./frontend/src/scenes/organization/Settings/membersLogic.tsx"),p=t("./frontend/src/lib/constants.tsx"),I=t("./frontend/src/scenes/organizationLogic.tsx"),G=t("./frontend/src/scenes/userLogic.ts"),W=t("./frontend/src/lib/utils/permissioning.ts"),Re=t("./frontend/src/lib/components/TZLabel/index.tsx"),Oe=t("./frontend/src/lib/components/LemonButton/More.tsx"),ue=t("./frontend/src/lib/components/LemonTag/LemonTag.tsx"),Ce=t("./frontend/src/lib/components/LemonDivider/index.ts"),C=t("./frontend/@posthog/lemon-ui/src/index.ts");function De(n,s){var o;const{user:i}=Object(r.useValues)(G.a),{currentOrganization:a}=Object(r.useValues)(I.a),{removeMember:d,changeMemberAccessLevel:v}=Object(r.useActions)(w.a);if(!i)return null;const u=(o=a==null?void 0:a.membership_level)!==null&&o!==void 0?o:-1,l=(u>=p.p.Admin&&s.level<=u||s.user.uuid===i.uuid)&&s.level!==p.p.Owner,M=a?a.membership_level:null,f=W.c.filter(x=>!Object(W.a)(M,i,s,x)),V=Object(W.a)(M,i,s,f);return Object(e.jsx)(Oe.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[V?Object(e.jsx)("div",{children:V}):f.map(x=>Object(e.jsx)(c.a,{status:"stealth",fullWidth:!0,onClick:U=>{if(U.preventDefault(),!i)throw Error;if(x===p.p.Owner){var D;N.a.open({title:`Transfer organization ownership to ${s.user.first_name}?`,description:`You will no longer be the owner of ${(D=i.organization)===null||D===void 0?void 0:D.name}. After the transfer you will become an administrator.`,primaryButton:{status:"danger",children:"Transfer Ownership",onClick:()=>v(s,x)},secondaryButton:{children:"Cancel"}})}else v(s,x)},"data-test-level":x,children:x===p.p.Owner?Object(e.jsx)(e.Fragment,{children:"Transfer organization ownership"}):x>s.level?Object(e.jsxs)(e.Fragment,{children:["Upgrade to ",W.b.get(x)]}):Object(e.jsxs)(e.Fragment,{children:["Downgrade to ",W.b.get(x)]})},`${s.user.uuid}-level-${x}`)),l?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Ce.a,{}),Object(e.jsx)(c.a,{status:"danger","data-attr":"delete-org-membership",onClick:()=>{var x;if(!i)throw Error;N.a.open({title:`${s.user.uuid==i.uuid?"Leave":`Remove ${s.user.first_name} from`} organization ${(x=i.organization)===null||x===void 0?void 0:x.name}?`,primaryButton:{children:s.user.uuid==i.uuid?"Leave":"Remove",status:"danger",onClick:()=>d(s)},secondaryButton:{children:"Cancel"}})},fullWidth:!0,children:s.user.uuid!==i.uuid?"Remove from organization":"Leave organization"})]}):null]})})}function ee(n){let{user:s}=n;const{filteredMembers:o,membersLoading:i,search:a}=Object(r.useValues)(w.a),{setSearch:d}=Object(r.useActions)(w.a),v=[{key:"user_profile_picture",render:function(l,M){return Object(e.jsx)(A.b,{name:M.user.first_name,email:M.user.email})},width:32},{title:"Name",key:"user_first_name",render:(u,l)=>l.user.uuid==s.uuid?`${l.user.first_name} (me)`:l.user.first_name,sorter:(u,l)=>u.user.first_name.localeCompare(l.user.first_name)},{title:"Email",key:"user_email",render:(u,l)=>l.user.email,sorter:(u,l)=>u.user.email.localeCompare(l.user.email)},{title:"Level",dataIndex:"level",key:"level",render:function(l,M){var f;return Object(e.jsx)(ue.a,{"data-attr":"membership-level",children:M.level===p.p.Owner?"Organization owner":`Project ${(f=W.b.get(M.level))!==null&&f!==void 0?f:`unknown (${M.level})`}`})},sorter:(u,l)=>u.level-l.level},{title:"Joined",dataIndex:"joined_at",key:"joined_at",render:function(l){return Object(e.jsx)("div",{className:"whitespace-nowrap",children:Object(e.jsx)(Re.a,{time:l})})},sorter:(u,l)=>u.joined_at.localeCompare(l.joined_at)},{key:"actions",width:0,render:De}];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h2",{className:"subtitle",children:"Members"}),Object(e.jsx)(C.LemonInput,{type:"search",placeholder:"Search for members",value:a,onChange:d}),Object(e.jsx)(b.a,{dataSource:o,columns:v,rowKey:"id",style:{marginTop:"1rem"},loading:i,"data-attr":"org-members-table",defaultSorting:{columnKey:"level",order:-1},pagination:{pageSize:50}})]})}try{ee.displayName="Members",ee.__docgenInfo={description:"",displayName:"Members",props:{user:{defaultValue:null,description:"Currently logged-in user.",name:"user",required:!0,type:{name:"UserType"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/organization/Settings/Members.tsx#Members"]={docgenInfo:ee.__docgenInfo,name:"Members",path:"frontend/src/scenes/organization/Settings/Members.tsx#Members"})}catch(n){}function ne(n){let{isOpen:s,setIsOpen:o}=n;const{currentOrganization:i,organizationBeingDeleted:a}=Object(r.useValues)(I.a),{deleteOrganization:d}=Object(r.useActions)(I.a),[v,u]=Object(m.useState)(!1),l=!!i&&(a==null?void 0:a.id)===i.id;return Object(e.jsxs)(C.LemonModal,{title:"Delete the entire organization?",onClose:l?void 0:()=>o(!1),footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(C.LemonButton,{disabled:l,type:"secondary",onClick:()=>o(!1),children:"Cancel"}),Object(e.jsx)(C.LemonButton,{type:"primary",disabled:!v,loading:l,"data-attr":"delete-organization-ok",status:"danger",onClick:i?()=>d(i):void 0,children:`Delete ${i?i.name:"the current organization"}`})]}),isOpen:s,children:[Object(e.jsxs)("p",{children:["Organization deletion ",Object(e.jsx)("b",{children:"cannot be undone"}),". You will lose all data, ",Object(e.jsx)("b",{children:"including all events"}),", related to all projects within this organization."]}),Object(e.jsxs)("p",{children:["Please type"," ",Object(e.jsx)("strong",{children:i?i.name:"this organization's name"})," to confirm."]}),Object(e.jsx)(C.LemonInput,{type:"text",onChange:M=>{i&&u(M.toLowerCase()===i.name.toLowerCase())}})]})}function te(n){let{isRestricted:s}=n;const{currentOrganization:o}=Object(r.useValues)(I.a),[i,a]=Object(m.useState)(!1);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"text-danger",children:[Object(e.jsx)("h2",{className:"text-danger subtitle",children:"Danger Zone"}),Object(e.jsxs)("div",{className:"mt-4",children:[!s&&Object(e.jsxs)("p",{className:"text-danger",children:["This is ",Object(e.jsx)("b",{children:"irreversible"}),". Please be certain."]}),Object(e.jsxs)(C.LemonButton,{status:"danger",type:"secondary",onClick:()=>a(!0),"data-attr":"delete-organization-button",icon:Object(e.jsx)(O.IconDelete,{}),disabled:s,children:["Delete ",(o==null?void 0:o.name)||"the current organization"]})]})]}),Object(e.jsx)(ne,{isOpen:i,setIsOpen:a})]})}try{ne.displayName="DeleteOrganizationModal",ne.__docgenInfo={description:"",displayName:"DeleteOrganizationModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},setIsOpen:{defaultValue:null,description:"",name:"setIsOpen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/organization/Settings/DangerZone.tsx#DeleteOrganizationModal"]={docgenInfo:ne.__docgenInfo,name:"DeleteOrganizationModal",path:"frontend/src/scenes/organization/Settings/DangerZone.tsx#DeleteOrganizationModal"})}catch(n){}try{te.displayName="DangerZone",te.__docgenInfo={description:"",displayName:"DangerZone",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/organization/Settings/DangerZone.tsx#DangerZone"]={docgenInfo:te.__docgenInfo,name:"DangerZone",path:"frontend/src/scenes/organization/Settings/DangerZone.tsx#DangerZone"})}catch(n){}var X=t("./frontend/src/lib/components/RestrictedArea.tsx"),Ee=t("./frontend/src/lib/hooks/useAnchor.ts"),se=t("./frontend/src/lib/components/Tooltip.tsx"),H=t("./frontend/src/lib/api.ts"),ie=t("./frontend/src/lib/components/lemonToast.tsx"),oe=t("./frontend/src/types.ts"),fe=t("./node_modules/.pnpm/kea-forms@3.0.3_kea@3.1.0/node_modules/kea-forms/lib/index.js"),Ie=t("./node_modules/.pnpm/kea-loaders@3.0.0_kea@3.1.0/node_modules/kea-loaders/lib/index.js");const $=Object(r.kea)([Object(r.path)(["scenes","organization","verifiedDomainsLogic"]),Object(r.connect)({values:[I.a,["currentOrganization"]]}),Object(r.actions)({replaceDomain:n=>({domain:n}),setAddModalShown:n=>({shown:n}),setConfigureSAMLModalId:n=>({id:n}),setVerifyModal:n=>({id:n})}),Object(r.reducers)({verifiedDomains:[[],{replaceDomain:(n,s)=>{let{domain:o}=s;const i=[...n.filter(a=>{let{id:d}=a;return d!==o.id}),o];return i.sort((a,d)=>a.domain.localeCompare(d.domain)),i}}],addModalShown:[!1,{setAddModalShown:(n,s)=>{let{shown:o}=s;return o},addVerifiedDomainSuccess:()=>!1}],configureSAMLModalId:[null,{setConfigureSAMLModalId:(n,s)=>{let{id:o}=s;return o}}],verifyModal:[null,{setVerifyModal:(n,s)=>{let{id:o}=s;return o}}]}),Object(Ie.loaders)(n=>{let{values:s,actions:o}=n;return{verifiedDomains:[[],{loadVerifiedDomains:()=>z(this,null,function*(){var i;return(yield H.b.get(`api/organizations/${(i=s.currentOrganization)===null||i===void 0?void 0:i.id}/domains`)).results}),addVerifiedDomain:i=>z(this,null,function*(){var a;return[yield H.b.create(`api/organizations/${(a=s.currentOrganization)===null||a===void 0?void 0:a.id}/domains`,{domain:i}),...s.verifiedDomains]}),deleteVerifiedDomain:i=>z(this,null,function*(){var a;return yield H.b.delete(`api/organizations/${(a=s.currentOrganization)===null||a===void 0?void 0:a.id}/domains/${i}`),[...s.verifiedDomains.filter(d=>d.id!==i)]})}],updatingDomain:[!1,{updateDomain:i=>z(this,null,function*(){var a;const d=yield H.b.update(`api/organizations/${(a=s.currentOrganization)===null||a===void 0?void 0:a.id}/domains/${i.id}`,be(de({},i),{id:void 0}));return ie.d.success("Domain updated successfully! Changes will take immediately."),o.replaceDomain(d),!1}),verifyDomain:()=>z(this,null,function*(){var i;const a=yield H.b.create(`api/organizations/${(i=s.currentOrganization)===null||i===void 0?void 0:i.id}/domains/${s.verifyModal}/verify`);return a.is_verified?ie.d.success("Domain verified successfully."):ie.d.warning("We could not verify your domain yet. DNS propagation may take up to 72 hours. Please try again later."),o.replaceDomain(a),o.setVerifyModal(null),!1})}]}}),Object(r.listeners)(n=>{let{actions:s,values:o}=n;return{setConfigureSAMLModalId:i=>{let{id:a}=i;const d=o.verifiedDomains.find(v=>{let{id:u}=v;return u===a});if(a&&d){const{saml_acs_url:v,saml_entity_id:u,saml_x509_cert:l}=d;s.setSamlConfigValues({saml_acs_url:v,saml_entity_id:u,saml_x509_cert:l,id:a})}}}}),Object(r.selectors)({domainBeingVerified:[n=>[n.verifiedDomains,n.verifyModal],(n,s)=>s&&n.find(o=>{let{id:i}=o;return i===s})||null],isSSOEnforcementAvailable:[n=>[n.currentOrganization],n=>{var s;return(s=n==null?void 0:n.available_features.includes(oe.e.SSO_ENFORCEMENT))!==null&&s!==void 0?s:!1}],isSAMLAvailable:[n=>[n.currentOrganization],n=>{var s;return(s=n==null?void 0:n.available_features.includes(oe.e.SAML))!==null&&s!==void 0?s:!1}]}),Object(r.afterMount)(n=>{let{actions:s}=n;return s.loadVerifiedDomains()}),Object(fe.forms)(n=>{let{actions:s,values:o}=n;return{samlConfig:{defaults:{},errors:i=>({saml_acs_url:i.saml_acs_url&&!i.saml_acs_url.match(p.w)?"Please enter a valid URL, including https://":void 0}),submit:(i,a)=>z(this,null,function*(){var d;const M=i,{id:v}=M,u=Ae(M,["id"]);if(!v)return;const l=yield H.b.update(`api/organizations/${(d=o.currentOrganization)===null||d===void 0?void 0:d.id}/domains/${i.id}`,de({},u));a(),s.replaceDomain(l),s.setConfigureSAMLModalId(null),s.setSamlConfigValues({}),ie.d.success(`SAML configuration for ${l.domain} updated successfully.`)})}}})]);var me=t("./node_modules/.pnpm/@ant-design+icons@4.7.0_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js"),Z=t("./frontend/src/lib/components/LemonModal/index.ts");function Te(){const{addModalShown:n,verifiedDomainsLoading:s}=Object(r.useValues)($),{setAddModalShown:o,addVerifiedDomain:i}=Object(r.useActions)($),[a,d]=Object(m.useState)(""),[v,u]=Object(m.useState)(!1),l=!a||!a.match(p.e),M=()=>{d(""),u(!1)},f=()=>{o(!1),M()},V=()=>{u(!0),l||(i(a),M())};return Object(e.jsxs)(Z.a,{onClose:f,isOpen:n,title:"Add authentication domain",footer:Object(e.jsx)(c.a,{type:"primary",disabled:a===""||v&&l||s,onClick:V,children:"Add domain"}),children:[Object(e.jsx)(C.LemonInput,{placeholder:"posthog.com",autoFocus:!0,value:a,onChange:d,onPressEnter:V}),v&&l&&Object(e.jsx)("span",{className:"text-danger text-xs",children:"Please enter a valid domain or subdomain name (e.g. my.posthog.com)"})]})}var Pe=t("./frontend/src/scenes/organization/Settings/VerifiedDomains/SSOSelect.tsx"),J=t("./frontend/src/lib/forms/Field.tsx");function ze(){const{domainBeingVerified:n,updatingDomainLoading:s}=Object(r.useValues)($),{setVerifyModal:o,verifyDomain:i}=Object(r.useActions)($),a=`_posthog-challenge.${n==null?void 0:n.domain}.`;return Object(e.jsx)(Z.a,{isOpen:!!n,onClose:()=>o(null),title:"Verify your domain",description:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ue.a,{className:"uppercase",children:(n==null?void 0:n.domain)||""}),Object(e.jsx)("p",{children:"To verify your domain, you need to add a record to your DNS zone."})]}),footer:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(c.a,{type:"secondary",onClick:()=>o(null),children:"Verify later"}),Object(e.jsx)(c.a,{type:"primary",disabled:s,onClick:i,children:"Verify"})]}),children:Object(e.jsx)("div",{children:Object(e.jsxs)("ol",{children:[Object(e.jsx)("li",{children:"Sign in to your DNS provider."}),Object(e.jsxs)("li",{children:["Add the following ",Object(e.jsx)("b",{children:"TXT"})," record.",Object(e.jsxs)("div",{className:"my-4 space-y-2",children:[Object(e.jsx)(J.b,{label:"Name",children:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("div",{className:"border rounded p-2 h-10 flex-1",children:a}),Object(e.jsx)(S.a,{explicitValue:a})]})}),Object(e.jsx)(J.b,{label:"Value or content",children:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("div",{className:"border rounded p-2 h-10 flex-1",children:n==null?void 0:n.verification_challenge}),Object(e.jsx)(S.a,{explicitValue:n==null?void 0:n.verification_challenge})]})}),Object(e.jsx)(J.b,{label:"TTL",children:Object(e.jsxs)("div",{className:"flex items-center gap-2",children:[Object(e.jsx)("div",{className:"border rounded p-2 h-10 flex-1",children:"Default or 3600"}),Object(e.jsx)(S.a,{explicitValue:"3600"})]})})]})]}),Object(e.jsx)("li",{children:"Press verify below."})]})})})}var ge=t("./frontend/src/lib/components/Link.tsx"),Ne=t("./frontend/src/lib/components/LemonSwitch/LemonSwitch.tsx"),Ve=t("./frontend/src/lib/components/AlertMessage/index.ts"),he=t("./frontend/src/lib/components/LemonInput/LemonInput.tsx"),Fe=t("./frontend/src/lib/components/LemonTextArea/LemonTextArea.tsx");function we(){const{configureSAMLModalId:n,isSamlConfigSubmitting:s,samlConfig:o}=Object(r.useValues)($),{setConfigureSAMLModalId:i}=Object(r.useActions)($),a=o.saml_acs_url&&o.saml_entity_id&&o.saml_x509_cert,d=()=>{i(null)};return Object(e.jsx)(Z.a,{onClose:d,isOpen:!!n,title:"",simple:!0,children:Object(e.jsxs)(fe.Form,{logic:$,formKey:"samlConfig",enableFormOnSubmit:!0,className:"LemonModal__layout ",children:[Object(e.jsx)(Z.a.Header,{children:Object(e.jsx)("h3",{children:"Configure SAML authentication and provisioning"})}),Object(e.jsxs)(Z.a.Content,{className:"space-y-2",children:[Object(e.jsx)(J.a,{name:"saml_acs_url",label:"SAML ACS URL",children:Object(e.jsx)(he.a,{className:"ph-ignore-input",placeholder:"Your IdP's ACS or single sign-on URL."})}),Object(e.jsx)(J.a,{name:"saml_entity_id",label:"SAML Entity ID",children:Object(e.jsx)(he.a,{className:"ph-ignore-input",placeholder:"Entity ID provided by your IdP."})}),Object(e.jsx)(J.a,{name:"saml_x509_cert",label:"SAML X.509 Certificate",children:Object(e.jsx)(Fe.a,{className:"ph-ignore-input",minRows:10,placeholder:`Enter the public certificate of your IdP. Keep all line breaks.
-----BEGIN CERTIFICATE-----
MIICVjCCAb+gAwIBAgIBADANBgkqhkiG9w0BAQ0FADBIMQswCQYDVQQGEwJ1czEL
-----END CERTIFICATE-----`})}),!a&&Object(e.jsx)(Ve.a,{type:"info",children:"SAML will not be enabled unless you enter all attributes above. However you can still settings as draft."})]}),Object(e.jsx)(Z.a.Footer,{children:Object(e.jsx)(c.a,{loading:s,type:"primary",htmlType:"submit",children:"Save settings"})})]})})}const Q={marginRight:4,fontSize:"1.15em",paddingTop:2};function Be(){const{verifiedDomainsLoading:n,updatingDomainLoading:s}=Object(r.useValues)($),{setAddModalShown:o}=Object(r.useActions)($);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex items-center",children:[Object(e.jsxs)("div",{style:{flexGrow:1},children:[Object(e.jsx)("div",{id:"domain-whitelist"})," ",Object(e.jsx)("h2",{id:"authentication-domains",className:"subtitle",children:"Authentication domains"}),Object(e.jsx)("p",{className:"text-muted-alt",children:"Enable users to sign up automatically with an email address on verified domains and enforce SSO for accounts under your domains."})]}),Object(e.jsx)(c.a,{type:"primary",onClick:()=>o(!0),disabled:n||s,children:"Add domain"})]}),Object(e.jsx)($e,{})]})}function $e(){const{verifiedDomains:n,verifiedDomainsLoading:s,currentOrganization:o,updatingDomainLoading:i,isSSOEnforcementAvailable:a,isSAMLAvailable:d}=Object(r.useValues)($),{updateDomain:v,deleteVerifiedDomain:u,setVerifyModal:l,setConfigureSAMLModalId:M}=Object(r.useActions)($),{preflight:f}=Object(r.useValues)(g.a),V=[{key:"domain",title:"Domain name",dataIndex:"domain",render:function(U,D){let{domain:P}=D;return Object(e.jsx)(ue.a,{children:P})}},...f!=null&&f.cloud?[{key:"is_verified",title:Object(e.jsxs)(e.Fragment,{children:["Verification",Object(e.jsx)(se.a,{title:"Verification (through DNS) is required to use domains for authentication (e.g. SAML or enforce SSO).",children:Object(e.jsx)(me.a,{style:{marginLeft:4}})})]}),render:function(U,D){let{is_verified:P,verified_at:F}=D;return P?Object(e.jsxs)("div",{className:"flex items-center text-success",children:[Object(e.jsx)(O.IconCheckmark,{style:Q})," Verified"]}):F?Object(e.jsxs)("div",{className:"flex items-center text-danger",children:[Object(e.jsx)(O.IconExclamation,{style:Q})," Verification expired"]}):Object(e.jsxs)("div",{className:"flex items-center text-warning",children:[Object(e.jsx)(O.IconWarning,{style:Q})," Pending verification"]})}}]:[],{key:"jit_provisioning_enabled",title:Object(e.jsxs)(e.Fragment,{children:["Automatic provisioning"," ",Object(e.jsx)(se.a,{title:`Enables just-in-time provisioning. If a user logs in with SSO with an email address on this domain an account will be created in ${(o==null?void 0:o.name)||"this organization"} if it does not exist.`,children:Object(e.jsx)(me.a,{})})]}),render:function(U,D){let{jit_provisioning_enabled:P,id:F,is_verified:K}=D;return K?Object(e.jsx)("div",{className:"flex items-center",children:Object(e.jsx)(Ne.a,{checked:P,disabled:i||!K,onChange:k=>v({id:F,jit_provisioning_enabled:k}),label:Object(e.jsx)("span",{className:"font-normal",children:P?"Enabled":"Disabled"})})}):Object(e.jsx)("i",{className:"text-muted-alt",children:"Verify domain to enable automatic provisioning"})}},{key:"sso_enforcement",title:Object(e.jsxs)(e.Fragment,{children:["Enforce SSO"," ",Object(e.jsx)(se.a,{title:"Require users with email addresses on this domain to always log in using a specific SSO provider.",children:Object(e.jsx)(me.a,{})})]}),render:function(U,D,P){let{sso_enforcement:F,is_verified:K,id:k,has_saml:Y}=D;return a?K?Object(e.jsx)(Pe.a,{value:F,loading:i,onChange:q=>v({id:k,sso_enforcement:q}),samlAvailable:Y}):Object(e.jsx)("i",{className:"text-muted-alt",children:"Verify domain to enable"}):P===0?Object(e.jsxs)(ge.a,{to:Object(p.D)(f==null?void 0:f.cloud).url,target:Object(p.D)(f==null?void 0:f.cloud).target,className:"flex items-center",children:[Object(e.jsx)(O.IconLock,{style:{color:"var(--warning)",marginLeft:4}})," Upgrade to enable SSO enforcement"]}):Object(e.jsx)(e.Fragment,{})}},{key:"saml",title:"SAML",render:function(U,D,P){let{is_verified:F,saml_acs_url:K,saml_entity_id:k,saml_x509_cert:Y,has_saml:q}=D;return d?F?Object(e.jsx)(e.Fragment,{children:q?Object(e.jsxs)("div",{className:"flex items-center text-success",children:[Object(e.jsx)(O.IconCheckmark,{style:Q})," SAML enabled"]}):K||k||Y?Object(e.jsxs)("div",{className:"flex items-center text-warning",children:[Object(e.jsx)(O.IconWarning,{style:Q})," SAML partially configured"]}):Object(e.jsxs)("div",{className:"flex items-center",children:[Object(e.jsx)(O.IconOffline,{style:Q})," SAML not set up"]})}):Object(e.jsx)("i",{className:"text-muted-alt",children:"Verify domain to enable"}):P===0?Object(e.jsxs)(ge.a,{to:Object(p.D)(f==null?void 0:f.cloud).url,target:Object(p.D)(f==null?void 0:f.cloud).target,className:"flex items-center",children:[Object(e.jsx)(O.IconLock,{style:{color:"var(--warning)",marginLeft:4}})," Upgrade to enable SAML"]}):Object(e.jsx)(e.Fragment,{})}},{key:"actions",width:32,align:"center",render:function(U,D){let{is_verified:P,id:F,domain:K}=D;return P?Object(e.jsx)(Oe.a,{overlay:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(c.a,{status:"stealth",onClick:()=>M(F),fullWidth:!0,disabled:!d,title:d?void 0:"Upgrade to enable SAML",children:"Configure SAML"}),Object(e.jsxs)(c.a,{status:"danger",onClick:()=>N.a.open({title:`Remove ${K}?`,description:"This cannot be undone. If you have SAML configured or SSO enforced,it will be immediately disabled.",primaryButton:{status:"danger",children:"Remove domain",onClick:()=>u(F)},secondaryButton:{children:"Cancel"}}),fullWidth:!0,children:[Object(e.jsx)(O.IconDelete,{})," Remove domain"]})]}),style:{display:"inline-block"}}):Object(e.jsx)(c.a,{type:"primary",onClick:()=>l(F),children:"Verify"})}}];return Object(e.jsxs)("div",{children:[Object(e.jsx)(b.a,{dataSource:n,columns:V,loading:s,rowKey:"id",emptyState:"You haven't registered any authentication domains yet."}),Object(e.jsx)(Te,{}),Object(e.jsx)(we,{}),Object(e.jsx)(ze,{})]})}var Ue=t("./frontend/src/lib/components/PayGateMini/PayGateMini.tsx"),ke=t("./frontend/src/lib/logic/featureFlagLogic.ts"),je=t("./node_modules/.pnpm/antd@4.17.1_wcqkhtmu7mswc6yz4uyexck3ty/node_modules/antd/es/tabs/index.js"),xe=t("./frontend/src/scenes/urls.ts"),ve=t("./frontend/src/scenes/organization/Settings/Permissions/permissionsLogic.tsx"),Ke=t("./frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx"),_e=t("./frontend/src/lib/components/Spinner/Spinner.tsx"),We=t("./frontend/src/lib/components/UserSelectItem.tsx"),ae=t("./frontend/src/scenes/organization/Settings/Permissions/Roles/rolesLogic.tsx");function Ge(){const{roleInFocus:n,createRoleModalShown:s,roleMembersToAdd:o,roleMembersInFocusLoading:i,addableMembers:a,rolesLoading:d,roleMembersInFocus:v}=Object(r.useValues)(ae.a),{setCreateRoleModalShown:u,setRoleMembersToAdd:l,createRole:M,deleteRoleMember:f,addRoleMembers:V,deleteRole:x}=Object(r.useActions)(ae.a),{isAdminOrOwner:U}=Object(r.useValues)(I.a),[D,P]=Object(m.useState)(""),F=()=>{u(!1),l([])},K=()=>{M(D),P("")},k=!n;return Object(e.jsxs)(Z.a,{onClose:F,isOpen:s,title:k?"Create role":`Edit ${n.name} role`,footer:d?Object(e.jsx)(_e.a,{monocolor:!0}):Object(e.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[Object(e.jsx)("div",{children:!k&&Object(e.jsx)(c.a,{htmlType:"submit",type:"primary",status:"danger",onClick:()=>x(n),"data-attr":"role-delete-submit",children:"Delete role"})}),Object(e.jsx)(c.a,{type:"primary",onClick:K,children:"Save"})]}),children:[k&&Object(e.jsxs)("div",{className:"mb-5",children:[Object(e.jsx)("h5",{children:"Role Name"}),Object(e.jsx)(C.LemonInput,{placeholder:"Product",autoFocus:!0,value:D,onChange:P})]}),U&&Object(e.jsxs)("div",{className:"mb-5",children:[Object(e.jsx)("h5",{children:"Members"}),Object(e.jsxs)("div",{className:"flex gap-2",children:[Object(e.jsx)("div",{className:"flex-1",children:Object(e.jsx)(Ke.a,{placeholder:"Search for team members to add\u2026",value:o,loading:i,onChange:Y=>l(Y),filterOption:!0,mode:"multiple","data-attr":"subscribed-emails",options:Object(We.a)(a,"uuid")})}),!k&&Object(e.jsx)(c.a,{type:"primary",loading:i,disabled:o.length===0,onClick:()=>V({role:n,membersToAdd:o}),children:"Add"})]})]}),!k&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("h5",{children:"Role Members"}),v.length>0?Object(e.jsx)("div",{className:"mt-2 pb-2 rounded overflow-y-auto",style:{maxHeight:300},children:v.map(Y=>Object(e.jsx)(Ye,{member:Y,deleteMember:q=>f({roleMemberUuid:q}),isAdminOrOwner:!!U},Y.id))}):Object(e.jsx)("div",{className:"text-muted mb-2",children:"No members added yet"})]})]})}function Ye(n){let{member:s,deleteMember:o,isAdminOrOwner:i}=n;const{user:a}=s;return Object(e.jsxs)("div",{className:"flex items-center justify-between mt-2 h-8",children:[Object(e.jsx)(A.b,{email:a.email,name:a.first_name,size:"md",showName:!0}),i&&o&&Object(e.jsx)(c.a,{icon:Object(e.jsx)(O.IconDelete,{}),onClick:()=>o(s.id),tooltip:"Remove user from role",status:"primary-alt",type:"tertiary",size:"small"})]})}function re(n){let{isRestricted:s}=n;const{resourceRolesAccess:o,organizationResourcePermissionsLoading:i}=Object(r.useValues)(ve.b),{updatePermission:a}=Object(r.useActions)(ve.b),{roles:d,rolesLoading:v}=Object(r.useValues)(ae.a),{setRoleInFocus:u,openCreateRoleModal:l}=Object(r.useActions)(ae.a),M=[{key:"role",title:"",width:150,render:function(V,x){return Object(e.jsx)(e.Fragment,{children:x.name=="organization_default"?Object(e.jsx)("b",{children:"All users by default"}):Object(e.jsx)(C.LemonButton,{type:"tertiary",noPadding:!0,onClick:()=>u(x),children:x.name})})}},...o.flatMap(f=>{const V=Object.keys(f)[0];return[{key:"view",title:Object(e.jsx)(se.a,{title:"View defaults cannot be changed",children:Object(e.jsxs)("div",{className:"text-center",children:[V," ",Object(e.jsx)("br",{})," View"]})}),align:"center",render:function(){return Object(e.jsx)("div",{className:"flex justify-center",children:Object(e.jsx)(C.LemonCheckbox,{defaultChecked:!0,disabled:!0,color:"gray"})})}},{key:"edit",title:Object(e.jsxs)("div",{className:"text-center",children:[V," ",Object(e.jsx)("br",{})," Edit"]}),align:"center",render:function(U,D){return Object(e.jsx)("div",{className:"flex justify-center",children:Object(e.jsx)(C.LemonCheckbox,{onChange:P=>{a(P,D,f[V].id,V)},checked:f[`${V}`][D.name]>=oe.a.WRITE})})}}]})];return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsxs)("div",{className:"flex flex-row justify-between items-center mb-4",children:[Object(e.jsx)("div",{className:"text-muted-alt",children:"Edit organizational default permission levels for posthog resources. Use roles to apply permissions to specific sets of users."}),!s&&Object(e.jsx)(C.LemonButton,{type:"primary",onClick:l,"data-attr":"create-role-button",children:"Create role"})]}),Object(e.jsx)(C.LemonTable,{bordered:!0,columns:M,loading:v||i,dataSource:[{name:"organization_default"},...d]}),Object(e.jsx)(Ge,{})]})}try{re.displayName="PermissionsGrid",re.__docgenInfo={description:"",displayName:"PermissionsGrid",props:{isRestricted:{defaultValue:null,description:"",name:"isRestricted",required:!0,type:{name:"boolean"}},restrictionReason:{defaultValue:null,description:"",name:"restrictionReason",required:!0,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["frontend/src/scenes/organization/Settings/Permissions/PermissionsGrid.tsx#PermissionsGrid"]={docgenInfo:re.__docgenInfo,name:"PermissionsGrid",path:"frontend/src/scenes/organization/Settings/Permissions/PermissionsGrid.tsx#PermissionsGrid"})}catch(n){}const Ze={component:ye,logic:I.a};let le;(function(n){n.GENERAL="general",n.ROLE_BASED_ACCESS="role_based_access"})(le||(le={}));function He(n){let{isRestricted:s}=n;const{currentOrganization:o,currentOrganizationLoading:i}=Object(r.useValues)(I.a),{updateOrganization:a}=Object(r.useActions)(I.a),[d,v]=Object(m.useState)((o==null?void 0:o.name)||"");return Object(e.jsxs)("div",{style:{maxWidth:"40rem"},children:[Object(e.jsx)("h2",{id:"name",className:"subtitle mt-0",children:"Display Name"}),Object(e.jsx)(C.LemonInput,{className:"mb-4",value:d,onChange:v,disabled:s}),Object(e.jsx)(C.LemonButton,{type:"primary",onClick:u=>{u.preventDefault(),a({name:d})},disabled:s||!d||!o||d===o.name,loading:i,children:"Rename Organization"})]})}function Je(n){let{isRestricted:s}=n;const{currentOrganization:o}=Object(r.useValues)(I.a),{updateOrganization:i}=Object(r.useActions)(I.a);return Object(e.jsxs)("div",{children:[Object(e.jsx)("h2",{id:"notification-preferences",className:"subtitle",children:"Notification Preferences"}),Object(e.jsx)("div",{children:Object(e.jsx)(C.LemonSwitch,{"data-attr":"is-member-join-email-enabled-switch",onChange:a=>{i({is_member_join_email_enabled:a})},checked:!!(o!=null&&o.is_member_join_email_enabled),disabled:s||!o,label:"Email all current members when a new member joins",bordered:!0})})]})}const pe=Object(r.kea)({path:["scenes","organization","Settings","index"],actions:{setTab:n=>({tab:n})},reducers:{tab:[le.GENERAL,{setTab:(n,s)=>{let{tab:o}=s;return o}}]},actionToUrl:()=>({setTab:n=>{let{tab:s}=n;return`${xe.a.organizationSettings()}?tab=${s}`}}),urlToAction:n=>{let{values:s,actions:o}=n;return{[xe.a.organizationSettings()]:(i,a)=>{a.tab&&s.tab!==a.tab&&o.setTab(a.tab)}}}});function ye(){const{user:n}=Object(r.useValues)(G.a),{featureFlags:s}=Object(r.useValues)(ke.a);Object(Ee.a)(location.hash);const{tab:o}=Object(r.useValues)(pe),{setTab:i}=Object(r.useActions)(pe);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(B.a,{title:"Organization Settings",caption:"View and manage your organization here. Build an even better product together."}),Object(e.jsxs)(je.a,{activeKey:o,destroyInactiveTabPane:!0,onChange:a=>i(a),children:[Object(e.jsx)(je.a.TabPane,{tab:"General",children:Object(e.jsxs)("div",{className:"border rounded p-6",children:[Object(e.jsx)(X.a,{Component:He,minimumAccessLevel:p.p.Admin}),Object(e.jsx)(C.LemonDivider,{className:"my-6"}),Object(e.jsx)(E,{}),Object(e.jsx)(C.LemonDivider,{className:"my-6"}),n&&Object(e.jsx)(ee,{user:n}),Object(e.jsx)(C.LemonDivider,{className:"my-6"}),Object(e.jsx)(X.a,{Component:Be,minimumAccessLevel:p.p.Admin}),Object(e.jsx)(C.LemonDivider,{className:"my-6"}),Object(e.jsx)(X.a,{Component:Je,minimumAccessLevel:p.p.Admin}),Object(e.jsx)(C.LemonDivider,{className:"my-6"}),Object(e.jsx)(X.a,{Component:te,minimumAccessLevel:p.p.Owner})]})},"general"),s[p.i.ROLE_BASED_ACCESS]&&Object(e.jsx)(je.a.TabPane,{tab:"Role-based access",children:Object(e.jsx)(Ue.a,{feature:oe.e.ROLE_BASED_ACCESS,children:Object(e.jsx)(X.a,{Component:re,minimumAccessLevel:p.p.Admin})})},"role_based_access")]})]})}}}]);
